{"items":[{"tags":["java","groovy","nextflow"],"comments":[{"owner":{"account_id":2824173,"reputation":339,"user_id":2427138,"display_name":"mribeirodantas"},"score":1,"creation_date":1690313761,"post_id":76765334,"comment_id":135335400,"body_markdown":"The correct place is indeed in the script block, but it&#39;s awkward that the `dna` variable is not working. Can you provide a minimal reproducible example?","body":"The correct place is indeed in the script block, but it&#39;s awkward that the <code>dna</code> variable is not working. Can you provide a minimal reproducible example?"}],"answers":[{"tags":[],"owner":{"account_id":391289,"reputation":52114,"user_id":751863,"accept_rate":100,"display_name":"Steve"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1690335147,"creation_date":1690335147,"answer_id":76767451,"question_id":76765334,"body_markdown":"The correct place to define the variable is in the [`script`](https://www.nextflow.io/docs/latest/process.html#script) block. If you only need a local variable (i.e. it is _not_ required in the `output` declaration for example), you can use the `def` keyword like in the example below. Note that with the `-params-file` option, `params.VC` will actually return a `ConfigMap` (a `LinkedHashMap` subclass) object. One way would be to use Groovy&#39;s null-safe operator (?.) to get the label value and the elvis operator (?:) to provide a default if it doesn&#39;t exist:\r\n\r\n```\r\nparams.bams = &#39;/path/to/bams/*.bam{,.bai}&#39;\r\n\r\n\r\nprocess VariantCall {\r\n\r\n    input:\r\n    tuple val(meta), path(bam), path(bai)\r\n    val(dna)\r\n\r\n    output:\r\n    tuple val(meta), path(&#39;out.vcf&#39;)\r\n\r\n    script:\r\n    def g_label = params?.VC?.get(dna)?.general?.label ?: &quot;none&quot;\r\n\r\n    &quot;&quot;&quot;\r\n    the_variant_caller \\\\\r\n        -l &quot;${g_label}&quot; \\\\\r\n        -o out.vcf\r\n    &quot;&quot;&quot;\r\n}\r\n\r\n\r\nworkflow {\r\n    \r\n    bams = Channel.fromFilePairs( params.bams, flat: true )\r\n\r\n    VariantCall( bams, &#39;mtDNA&#39; )\r\n}\r\n```\r\n\r\nRun using:\r\n\r\n```\r\nnextflow run main.nf -params-file params.json\r\n```\r\n","title":"How to create a new variable by merging together input and parameters in nextflow?","body":"<p>The correct place to define the variable is in the <a href=\"https://www.nextflow.io/docs/latest/process.html#script\" rel=\"nofollow noreferrer\"><code>script</code></a> block. If you only need a local variable (i.e. it is <em>not</em> required in the <code>output</code> declaration for example), you can use the <code>def</code> keyword like in the example below. Note that with the <code>-params-file</code> option, <code>params.VC</code> will actually return a <code>ConfigMap</code> (a <code>LinkedHashMap</code> subclass) object. One way would be to use Groovy's null-safe operator (?.) to get the label value and the elvis operator (?:) to provide a default if it doesn't exist:</p>\n<pre><code>params.bams = '/path/to/bams/*.bam{,.bai}'\n\n\nprocess VariantCall {\n\n    input:\n    tuple val(meta), path(bam), path(bai)\n    val(dna)\n\n    output:\n    tuple val(meta), path('out.vcf')\n\n    script:\n    def g_label = params?.VC?.get(dna)?.general?.label ?: &quot;none&quot;\n\n    &quot;&quot;&quot;\n    the_variant_caller \\\\\n        -l &quot;${g_label}&quot; \\\\\n        -o out.vcf\n    &quot;&quot;&quot;\n}\n\n\nworkflow {\n    \n    bams = Channel.fromFilePairs( params.bams, flat: true )\n\n    VariantCall( bams, 'mtDNA' )\n}\n</code></pre>\n<p>Run using:</p>\n<pre><code>nextflow run main.nf -params-file params.json\n</code></pre>\n"}],"owner":{"account_id":25427494,"reputation":39,"user_id":19232471,"display_name":"Ulf90"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":128,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1690335147,"creation_date":1690307336,"question_id":76765334,"body_markdown":"I am having the following issue:\r\nI am trying to create new variable within a process that actually would take items from the input section, from the parameter section and create new variables to be used in the script section:\r\nHere is how the process looks like in a meaningful semplification:\r\n\r\n```\r\nnextflow.enable.dsl=2\r\n\r\nprocess VariantCall {\r\ncontainer &#39;the_container&#39;\r\n\r\n    input:\r\n        val(dna)\r\n        tuple val(meta), path(in_bam), path(in_bam_bai)\r\n\r\n    output:\r\n        tuple val(meta), path(&#39;out.vcf&#39;)\r\n\r\n    publishDir &quot;${params.publish_dir}/VariantCalling/${meta}/${dna}&quot;, mode: &#39;copy&#39;, pattern: &#39;*.vcf&#39;\r\n    \r\n    g_label = &quot;${params.VC}.${dna}.general.label&quot;\r\n\r\n    script:\r\n        &quot;&quot;&quot;\r\n    the_variant_caller \\\r\n    -l ${g_label}\r\n    -o out.vcf\r\n        &quot;&quot;&quot;\r\n\r\n```\r\nThe params.json looks like this:\r\n```\r\n{\r\n&quot;VC&quot;:{\r\n        &quot;nDNA&quot;:{\r\n            &quot;general&quot;: {\r\n                &quot;label&quot;: &quot;&quot;,\r\n                &quot;cov_thresh&quot;: 0\r\n            }\r\n        &quot;mtDNA&quot;:{\r\n            &quot;general&quot;: {\r\n                &quot;label&quot;: &quot;MT&quot;,\r\n                &quot;cov_thresh&quot;: 0\r\n            }\r\n}\r\n```\r\nSo my goal is to have a g_label variable to feed into the script, that is the composition of the backbone of params.json and the input i am giving (dna). \r\nThen, i run the workflow like this:\r\n```\r\nworkflow VariantCall_Module {\r\n    take:\r\n        dna\r\n        in_bam\r\n\r\n\r\n    main:\r\n        VariantCall(\r\n            dna,\r\n            in_bam\r\n\r\n        )\r\n\r\n    emit:\r\n        vcf = VariantCall.out\r\n}\r\n```\r\n\r\nhowever, no matter how i phrase g_label i always get:\r\n```\r\nERROR ~ Error executing process &gt; &#39;TheModule:VariantCalling_nDNA (1)&#39;\r\n\r\nCaused by:\r\n  No such variable: g_label -- Check script &#39;././modules/variant-calling-ndna/../variant-call-utils/processes.nf&#39; at line: 21\r\n``` \r\nI also tried:\r\n-  to have g_label inside the script block\r\n-  to have the g_label under `def g_label = &quot;${params.VC}.${dna}.general.label&quot;`\r\nBut same results, with the difference that when i phrase it inside the script block i get as error:\r\n`No such variable: dna`\r\nSo it looks to me i have a problem with the syntax but also that the dna variable although is in the input (and it&#39;s taken without problem in the publishDir statement), it doesn&#39;t get passed into a new variable.\r\nDo you have any ideas? \r\ncheers!\r\n","title":"How to create a new variable by merging together input and parameters in nextflow?","body":"<p>I am having the following issue:\nI am trying to create new variable within a process that actually would take items from the input section, from the parameter section and create new variables to be used in the script section:\nHere is how the process looks like in a meaningful semplification:</p>\n<pre><code>nextflow.enable.dsl=2\n\nprocess VariantCall {\ncontainer 'the_container'\n\n    input:\n        val(dna)\n        tuple val(meta), path(in_bam), path(in_bam_bai)\n\n    output:\n        tuple val(meta), path('out.vcf')\n\n    publishDir &quot;${params.publish_dir}/VariantCalling/${meta}/${dna}&quot;, mode: 'copy', pattern: '*.vcf'\n    \n    g_label = &quot;${params.VC}.${dna}.general.label&quot;\n\n    script:\n        &quot;&quot;&quot;\n    the_variant_caller \\\n    -l ${g_label}\n    -o out.vcf\n        &quot;&quot;&quot;\n\n</code></pre>\n<p>The params.json looks like this:</p>\n<pre><code>{\n&quot;VC&quot;:{\n        &quot;nDNA&quot;:{\n            &quot;general&quot;: {\n                &quot;label&quot;: &quot;&quot;,\n                &quot;cov_thresh&quot;: 0\n            }\n        &quot;mtDNA&quot;:{\n            &quot;general&quot;: {\n                &quot;label&quot;: &quot;MT&quot;,\n                &quot;cov_thresh&quot;: 0\n            }\n}\n</code></pre>\n<p>So my goal is to have a g_label variable to feed into the script, that is the composition of the backbone of params.json and the input i am giving (dna).\nThen, i run the workflow like this:</p>\n<pre><code>workflow VariantCall_Module {\n    take:\n        dna\n        in_bam\n\n\n    main:\n        VariantCall(\n            dna,\n            in_bam\n\n        )\n\n    emit:\n        vcf = VariantCall.out\n}\n</code></pre>\n<p>however, no matter how i phrase g_label i always get:</p>\n<pre><code>ERROR ~ Error executing process &gt; 'TheModule:VariantCalling_nDNA (1)'\n\nCaused by:\n  No such variable: g_label -- Check script '././modules/variant-calling-ndna/../variant-call-utils/processes.nf' at line: 21\n</code></pre>\n<p>I also tried:</p>\n<ul>\n<li>to have g_label inside the script block</li>\n<li>to have the g_label under <code>def g_label = &quot;${params.VC}.${dna}.general.label&quot;</code>\nBut same results, with the difference that when i phrase it inside the script block i get as error:\n<code>No such variable: dna</code>\nSo it looks to me i have a problem with the syntax but also that the dna variable although is in the input (and it's taken without problem in the publishDir statement), it doesn't get passed into a new variable.\nDo you have any ideas?\ncheers!</li>\n</ul>\n"},{"tags":["java","arrays","algorithm","frameworks"],"comments":[{"owner":{"account_id":481416,"reputation":355404,"user_id":895245,"accept_rate":49,"display_name":"Ciro Santilli OurBigBook.com"},"score":11,"creation_date":1426232378,"post_id":1484347,"comment_id":46295847,"body_markdown":"Array of primitive to array of containers would help: http://stackoverflow.com/questions/3770289/converting-array-of-primitives-to-array-of-containers-in-java followed by `Collections.max(Arrays.asList())`.","body":"Array of primitive to array of containers would help: <a href=\"http://stackoverflow.com/questions/3770289/converting-array-of-primitives-to-array-of-containers-in-java\" title=\"converting array of primitives to array of containers in java\">stackoverflow.com/questions/3770289/&hellip;</a> followed by <code>Collections.max(Arrays.asList())</code>."},{"owner":{"account_id":7407971,"reputation":2389,"user_id":5636313,"accept_rate":76,"display_name":"Farid"},"score":5,"creation_date":1593186568,"post_id":1484347,"comment_id":110701138,"body_markdown":"I just love how dumb the Java is","body":"I just love how dumb the Java is"},{"owner":{"account_id":3116542,"reputation":1299,"user_id":3450840,"accept_rate":56,"display_name":"Florian F"},"score":0,"creation_date":1650226586,"post_id":1484347,"comment_id":127061616,"body_markdown":"Arrays.asList won&#39;t work on an array of a primitive type\\.","body":"Arrays.asList won&#39;t work on an array of a primitive type\\."}],"answers":[{"comments":[{"owner":{"account_id":48455,"reputation":57218,"user_id":143972,"accept_rate":100,"display_name":"Zed"},"score":1,"creation_date":1254083621,"post_id":1484352,"comment_id":1335751,"body_markdown":"Collections.min(myCollection); If you want to use it for arrays, you can do it like Collections.min(Arrays.asList(myArray));","body":"Collections.min(myCollection); If you want to use it for arrays, you can do it like Collections.min(Arrays.asList(myArray));"},{"owner":{"account_id":20189,"reputation":166057,"user_id":48015,"accept_rate":80,"display_name":"Christoph"},"score":3,"creation_date":1254083630,"post_id":1484352,"comment_id":1335752,"body_markdown":"converting a `char []` to a `Character []` only to determine the maximum is quite inefficient - better create a utility class with static methods for each primitive type similar to `java.util.Arrays`: http://java.sun.com/javase/6/docs/api/java/util/Arrays.html","body":"converting a <code>char []</code> to a <code>Character []</code> only to determine the maximum is quite inefficient - better create a utility class with static methods for each primitive type similar to <code>java.util.Arrays</code>: <a href=\"http://java.sun.com/javase/6/docs/api/java/util/Arrays.html\" rel=\"nofollow noreferrer\">java.sun.com/javase/6/docs/api/java/util/Arrays.html</a>"},{"owner":{"account_id":20937,"reputation":167576,"user_id":50476,"accept_rate":100,"display_name":"Bart Kiers"},"score":0,"creation_date":1254084070,"post_id":1484352,"comment_id":1335774,"body_markdown":"@Christoph: yes, if the size of the array is large, I would agree. Simply stating it is &quot;inefficient&quot; does not make sense if the application in question makes many database calls and/or I/O operations and the size of the array is (relative) small.","body":"@Christoph: yes, if the size of the array is large, I would agree. Simply stating it is &quot;inefficient&quot; does not make sense if the application in question makes many database calls and/or I/O operations and the size of the array is (relative) small."},{"owner":{"account_id":20189,"reputation":166057,"user_id":48015,"accept_rate":80,"display_name":"Christoph"},"score":0,"creation_date":1254084317,"post_id":1484352,"comment_id":1335790,"body_markdown":"you should use `Character.valueOf(chars[i])` instead of `new Character(chars[i])` for performance reasons: http://java.sun.com/javase/6/docs/api/java/lang/Character.html#valueOf%28char%29","body":"you should use <code>Character.valueOf(chars[i])</code> instead of <code>new Character(chars[i])</code> for performance reasons: <a href=\"http://java.sun.com/javase/6/docs/api/java/lang/Character.html#valueOf%28char%29\" rel=\"nofollow noreferrer\">java.sun.com/javase/6/docs/api/java/lang/&hellip;</a>"},{"owner":{"account_id":1005212,"reputation":28568,"user_id":1019167,"accept_rate":92,"display_name":"AlexWien"},"score":0,"creation_date":1365026642,"post_id":1484352,"comment_id":22466348,"body_markdown":"@Christoph Christoph is right, it is inefficient and stupid to transform an array to an Collection, for min max search.","body":"@Christoph Christoph is right, it is inefficient and stupid to transform an array to an Collection, for min max search."}],"tags":[],"owner":{"account_id":20937,"reputation":167576,"user_id":50476,"accept_rate":100,"display_name":"Bart Kiers"},"comment_count":5,"down_vote_count":1,"up_vote_count":22,"is_accepted":false,"score":21,"last_activity_date":1254084517,"creation_date":1254082215,"answer_id":1484352,"question_id":1484347,"body_markdown":"Yes, it&#39;s done in the [Collections][1] class. Note that you will need to convert your primitive char array to a Character[] manually.\r\n\r\nA short demo:\r\n\r\n    import java.util.*;\r\n\r\n    public class Main {\r\n        \r\n        public static Character[] convert(char[] chars) {\r\n            Character[] copy = new Character[chars.length];\r\n            for(int i = 0; i &lt; copy.length; i++) {\r\n                copy[i] = Character.valueOf(chars[i]);\r\n            }\r\n            return copy;\r\n        }\r\n        \r\n        public static void main(String[] args) {\r\n            char[] a = {&#39;3&#39;, &#39;5&#39;, &#39;1&#39;, &#39;4&#39;, &#39;2&#39;};\r\n            Character[] b = convert(a);\r\n            System.out.println(Collections.max(Arrays.asList(b)));\r\n        }\r\n    }\r\n\r\n  [1]: http://java.sun.com/javase/6/docs/api/java/util/Collections.html#min(java.util.Collection)","title":"Finding the max/min value in an array of primitives using Java","body":"<p>Yes, it's done in the <a href=\"http://java.sun.com/javase/6/docs/api/java/util/Collections.html#min(java.util.Collection)\" rel=\"noreferrer\">Collections</a> class. Note that you will need to convert your primitive char array to a Character[] manually.</p>\n\n<p>A short demo:</p>\n\n<pre><code>import java.util.*;\n\npublic class Main {\n\n    public static Character[] convert(char[] chars) {\n        Character[] copy = new Character[chars.length];\n        for(int i = 0; i &lt; copy.length; i++) {\n            copy[i] = Character.valueOf(chars[i]);\n        }\n        return copy;\n    }\n\n    public static void main(String[] args) {\n        char[] a = {'3', '5', '1', '4', '2'};\n        Character[] b = convert(a);\n        System.out.println(Collections.max(Arrays.asList(b)));\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":20189,"reputation":166057,"user_id":48015,"accept_rate":80,"display_name":"Christoph"},"comment_count":0,"down_vote_count":2,"up_vote_count":5,"is_accepted":false,"score":3,"last_activity_date":1595941183,"creation_date":1254085935,"answer_id":1484494,"question_id":1484347,"body_markdown":"Here&#39;s a utility class providing `min/max` methods for primitive types: [Primitives.java](http://pastebin.com/f57ae8d47)\r\n\r\n    int [] numbers= {10,1,8,7,6,5,2};\r\n\t\tint a=Integer.MAX_VALUE;\r\n\t\tfor(int c:numbers) {\r\n\t\t\ta=c&lt;a?c:a;\r\n\t\t\t}\r\n\t\t\t\r\n\t\tSystem.out.println(&quot;Lowest value is&quot;+a);","title":"Finding the max/min value in an array of primitives using Java","body":"<p>Here's a utility class providing <code>min/max</code> methods for primitive types: <a href=\"http://pastebin.com/f57ae8d47\" rel=\"nofollow noreferrer\">Primitives.java</a></p>\n<pre><code>int [] numbers= {10,1,8,7,6,5,2};\n    int a=Integer.MAX_VALUE;\n    for(int c:numbers) {\n        a=c&lt;a?c:a;\n        }\n        \n    System.out.println(&quot;Lowest value is&quot;+a);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":5330844,"reputation":14681,"user_id":4251431,"accept_rate":80,"display_name":"Basheer AL-MOMANI"},"score":11,"creation_date":1463596770,"post_id":1486010,"comment_id":62136641,"body_markdown":"what is `ArrayUtils`","body":"what is <code>ArrayUtils</code>"},{"owner":{"account_id":23239,"reputation":4528,"user_id":58100,"accept_rate":67,"display_name":"E.M."},"score":4,"creation_date":1477159714,"post_id":1486010,"comment_id":67656637,"body_markdown":"`Arrays.asList()` should be fine, but `ArrayUtils.toObject()` will copy each element of `a` to a new array of `Character`.","body":"<code>Arrays.asList()</code> should be fine, but <code>ArrayUtils.toObject()</code> will copy each element of <code>a</code> to a new array of <code>Character</code>."},{"owner":{"account_id":2623942,"reputation":1814,"user_id":2271388,"display_name":"nessa.gp"},"score":8,"creation_date":1487222341,"post_id":1486010,"comment_id":71687824,"body_markdown":"`Arrays.asList(a)` doesn&#39;t work. You can&#39;t make a list of primitives (`List&lt;char&gt;` in this case). First you need to convert the primitive values to objects and that&#39;s why `ArrayUtils.toObject` is used.","body":"<code>Arrays.asList(a)</code> doesn&#39;t work. You can&#39;t make a list of primitives (<code>List&lt;char&gt;</code> in this case). First you need to convert the primitive values to objects and that&#39;s why <code>ArrayUtils.toObject</code> is used."}],"tags":[],"owner":{"account_id":15843,"reputation":13885,"user_id":33889,"accept_rate":82,"display_name":"Michael Rutherfurd"},"comment_count":3,"down_vote_count":1,"up_vote_count":201,"is_accepted":true,"score":200,"last_activity_date":1384610315,"creation_date":1254127392,"answer_id":1486010,"question_id":1484347,"body_markdown":"Using Commons Lang (to convert) + Collections (to min/max)\r\n\r\n    import java.util.Arrays;\r\n    import java.util.Collections;\r\n    \r\n    import org.apache.commons.lang.ArrayUtils;\r\n    \r\n    public class MinMaxValue {\r\n    \r\n        public static void main(String[] args) {\r\n            char[] a = {&#39;3&#39;, &#39;5&#39;, &#39;1&#39;, &#39;4&#39;, &#39;2&#39;};\r\n            \r\n            List b = Arrays.asList(ArrayUtils.toObject(a));\r\n        \r\n            System.out.println(Collections.min(b));\r\n            System.out.println(Collections.max(b));\r\n       }\r\n    }\r\n\r\nNote that `Arrays.asList()` wraps the underlying array, so it should not be too memory intensive and it should not perform a copy on the elements of the array.","title":"Finding the max/min value in an array of primitives using Java","body":"<p>Using Commons Lang (to convert) + Collections (to min/max)</p>\n\n<pre><code>import java.util.Arrays;\nimport java.util.Collections;\n\nimport org.apache.commons.lang.ArrayUtils;\n\npublic class MinMaxValue {\n\n    public static void main(String[] args) {\n        char[] a = {'3', '5', '1', '4', '2'};\n\n        List b = Arrays.asList(ArrayUtils.toObject(a));\n\n        System.out.println(Collections.min(b));\n        System.out.println(Collections.max(b));\n   }\n}\n</code></pre>\n\n<p>Note that <code>Arrays.asList()</code> wraps the underlying array, so it should not be too memory intensive and it should not perform a copy on the elements of the array.</p>\n"},{"comments":[{"owner":{"account_id":7848,"reputation":108920,"user_id":13792,"accept_rate":100,"display_name":"ColinD"},"score":5,"creation_date":1260477910,"post_id":1658144,"comment_id":1784031,"body_markdown":"It&#39;s implemented more or less like in the question except it throws an IllegalArgumentException for an array of length 0. (http://code.google.com/p/guava-libraries/source/browse/trunk/src/com/google/common/primitives/Chars.java)","body":"It&#39;s implemented more or less like in the question except it throws an IllegalArgumentException for an array of length 0. (<a href=\"http://code.google.com/p/guava-libraries/source/browse/trunk/src/com/google/common/primitives/Chars.java\" rel=\"nofollow noreferrer\">code.google.com/p/guava-libraries/source/browse/trunk/src/c&zwnj;&#8203;om/&hellip;</a>)"},{"owner":{"account_id":88318,"reputation":8934,"user_id":244360,"accept_rate":78,"display_name":"Kong"},"score":3,"creation_date":1401058978,"post_id":1658144,"comment_id":36724747,"body_markdown":"This is the best solution of everything here. Avoids all that java.util.Arrays#asList varargs confusion.","body":"This is the best solution of everything here. Avoids all that java.util.Arrays#asList varargs confusion."}],"tags":[],"owner":{"account_id":21620,"reputation":2451,"user_id":52687,"accept_rate":80,"display_name":"Andrew McKinlay"},"comment_count":2,"down_vote_count":1,"up_vote_count":62,"is_accepted":false,"score":61,"last_activity_date":1257105016,"creation_date":1257105016,"answer_id":1658144,"question_id":1484347,"body_markdown":"The [Google Guava library][1] has min and max methods in its Chars, Ints, Longs, etc. classes.\r\n\r\nSo you can simply use:\r\n\r\n    Chars.min(myarray)\r\n\r\nNo conversions are required and presumably it&#39;s efficiently implemented.\r\n\r\n  [1]: http://code.google.com/p/guava-libraries/","title":"Finding the max/min value in an array of primitives using Java","body":"<p>The <a href=\"http://code.google.com/p/guava-libraries/\" rel=\"noreferrer\">Google Guava library</a> has min and max methods in its Chars, Ints, Longs, etc. classes.</p>\n\n<p>So you can simply use:</p>\n\n<pre><code>Chars.min(myarray)\n</code></pre>\n\n<p>No conversions are required and presumably it's efficiently implemented.</p>\n"},{"tags":[],"owner":{"account_id":3377913,"reputation":31,"user_id":2835693,"display_name":"hightower"},"comment_count":0,"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1380646400,"creation_date":1380644944,"answer_id":19121381,"question_id":1484347,"body_markdown":"    import java.util.Random;\r\n    \r\n    public class Main {\r\n\r\n    public static void main(String[] args) {\r\n       int a[] = new int [100];\r\n       Random rnd = new Random ();\r\n\r\n        for (int i = 0; i&lt; a.length; i++) {\r\n            a[i] = rnd.nextInt(99-0)+0;\r\n            System.out.println(a[i]);\r\n        }\r\n\r\n        int max = 0;          \r\n\r\n        for (int i = 0; i &lt; a.length; i++) {\r\n            a[i] = max;\r\n            \r\n\r\n            for (int j = i+1; j&lt;a.length; j++) {\r\n                if (a[j] &gt; max) {\r\n                   max = a[j];\r\n                }\r\n\r\n            }\r\n        }\r\n     \r\n        System.out.println(&quot;Max element: &quot; + max);\r\n    }\r\n    }","title":"Finding the max/min value in an array of primitives using Java","body":"<pre><code>import java.util.Random;\n\npublic class Main {\n\npublic static void main(String[] args) {\n   int a[] = new int [100];\n   Random rnd = new Random ();\n\n    for (int i = 0; i&lt; a.length; i++) {\n        a[i] = rnd.nextInt(99-0)+0;\n        System.out.println(a[i]);\n    }\n\n    int max = 0;          \n\n    for (int i = 0; i &lt; a.length; i++) {\n        a[i] = max;\n\n\n        for (int j = i+1; j&lt;a.length; j++) {\n            if (a[j] &gt; max) {\n               max = a[j];\n            }\n\n        }\n    }\n\n    System.out.println(\"Max element: \" + max);\n}\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":14810,"reputation":38725,"user_id":30773,"accept_rate":60,"display_name":"davidsheldon"},"score":3,"creation_date":1472552068,"post_id":19921300,"comment_id":65786903,"body_markdown":"It&#39;s probably worth noting that a) this modifies the array, and b) for large arrays it&#39;s a more expensive solution O(nlog n) rather than O(n)","body":"It&#39;s probably worth noting that a) this modifies the array, and b) for large arrays it&#39;s a more expensive solution O(nlog n) rather than O(n)"}],"tags":[],"owner":{"account_id":3571654,"reputation":27,"user_id":2981816,"display_name":"whoduexpect"},"comment_count":1,"down_vote_count":2,"up_vote_count":2,"is_accepted":false,"score":0,"last_activity_date":1384234042,"creation_date":1384232894,"answer_id":19921300,"question_id":1484347,"body_markdown":"Pass the array to a method that sorts it with `Arrays.sort()` so it only sorts the array the method is using then sets *min* to `array[0]` and *max* to `array[array.length-1]`.","title":"Finding the max/min value in an array of primitives using Java","body":"<p>Pass the array to a method that sorts it with <code>Arrays.sort()</code> so it only sorts the array the method is using then sets <em>min</em> to <code>array[0]</code> and <em>max</em> to <code>array[array.length-1]</code>.</p>\n"},{"comments":[{"owner":{"account_id":222159,"reputation":396,"user_id":480579,"display_name":"Jeff"},"score":3,"creation_date":1409174455,"post_id":23169726,"comment_id":39871785,"body_markdown":"I think what this means to say is that if you sort the array (in ascending order), by definition, the minimum value will always be at the first position, a[0], and the maximum value will always be at the last position, [a.length-1].","body":"I think what this means to say is that if you sort the array (in ascending order), by definition, the minimum value will always be at the first position, a[0], and the maximum value will always be at the last position, [a.length-1]."},{"owner":{"account_id":1706372,"reputation":972,"user_id":1565344,"accept_rate":60,"display_name":"Alex"},"score":1,"creation_date":1415043276,"post_id":23169726,"comment_id":42033149,"body_markdown":"This is a legitimate and useful way of solving the problem. What&#39;s the disadvantage of using it compared to the other ones?","body":"This is a legitimate and useful way of solving the problem. What&#39;s the disadvantage of using it compared to the other ones?"},{"owner":{"account_id":392232,"reputation":516,"user_id":753379,"accept_rate":53,"display_name":"jajdoo"},"score":14,"creation_date":1420896856,"post_id":23169726,"comment_id":44154962,"body_markdown":"@alex time complexity - sorting is at best an O(nlogn) affair, while Michael Rutherfurd approach is O(n).","body":"@alex time complexity - sorting is at best an O(nlogn) affair, while Michael Rutherfurd approach is O(n)."},{"owner":{"account_id":1257650,"reputation":23489,"user_id":1216775,"accept_rate":54,"display_name":"akhil_mittal"},"score":6,"creation_date":1424671172,"post_id":23169726,"comment_id":45629799,"body_markdown":"We dont need sort as single iteration over list is enough to find min and max.","body":"We dont need sort as single iteration over list is enough to find min and max."},{"owner":{"account_id":65080,"reputation":5716,"user_id":191761,"accept_rate":71,"display_name":"Adam Burley"},"score":0,"creation_date":1616546062,"post_id":23169726,"comment_id":118035206,"body_markdown":"@akhil_mittal but this requires more code than a sort, because there is no Java standard method to do this iteration","body":"@akhil_mittal but this requires more code than a sort, because there is no Java standard method to do this iteration"}],"tags":[],"owner":{"account_id":4331554,"reputation":349,"user_id":3536936,"display_name":"Lubna_Nsour"},"comment_count":5,"down_vote_count":11,"up_vote_count":37,"is_accepted":false,"score":26,"last_activity_date":1611316727,"creation_date":1397908437,"answer_id":23169726,"question_id":1484347,"body_markdown":"By sorting the array, you get the first and last values for min / max. \r\n\r\n    import java.util.Arrays;\r\n\r\n    public class apples {\r\n\r\n      public static void main(String[] args) {\r\n    \tint a[] = {2,5,3,7,8};\r\n    \tArrays.sort(a);\r\n\r\n    \tint min =a[0];\r\n    \tSystem.out.println(min);\r\n\r\n    \tint max= a[a.length-1];\r\n    \tSystem.out.println(max);\r\n      }\r\n    \t\r\n    }\r\n\r\nAlthough the sorting operation is more expensive than simply finding min/max values with a simple loop. But when performance is not a concern (e.g. small arrays, or your the cost is irrelevant for your application), it is a quite simple solution.\r\n\r\nNote: the array also gets modified after this.","title":"Finding the max/min value in an array of primitives using Java","body":"<p>By sorting the array, you get the first and last values for min / max.</p>\n<pre><code>import java.util.Arrays;\n\npublic class apples {\n\n  public static void main(String[] args) {\n    int a[] = {2,5,3,7,8};\n    Arrays.sort(a);\n\n    int min =a[0];\n    System.out.println(min);\n\n    int max= a[a.length-1];\n    System.out.println(max);\n  }\n    \n}\n</code></pre>\n<p>Although the sorting operation is more expensive than simply finding min/max values with a simple loop. But when performance is not a concern (e.g. small arrays, or your the cost is irrelevant for your application), it is a quite simple solution.</p>\n<p>Note: the array also gets modified after this.</p>\n"},{"tags":[],"owner":{"account_id":2021629,"reputation":57953,"user_id":1807667,"accept_rate":60,"display_name":"Ortomala Lokni"},"comment_count":0,"down_vote_count":0,"up_vote_count":167,"is_accepted":false,"score":167,"last_activity_date":1489064675,"creation_date":1433672794,"answer_id":30692454,"question_id":1484347,"body_markdown":"You can simply use the new Java 8 [`Stream`s](https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html) but you have to work with `int`.\r\n\r\nThe [`stream`](http://docs.oracle.com/javase/8/docs/api/java/util/Arrays.html#stream-int:A-) method of the utility class [`Arrays`](http://docs.oracle.com/javase/8/docs/api/java/util/Arrays.html) gives you an [`IntStream`](http://docs.oracle.com/javase/8/docs/api/java/util/stream/IntStream.html) on which you can use the [`min`](http://docs.oracle.com/javase/8/docs/api/java/util/stream/IntStream.html#min--) method. You can also do [`max`](http://docs.oracle.com/javase/8/docs/api/java/util/stream/IntStream.html#max--), [`sum`](http://docs.oracle.com/javase/8/docs/api/java/util/stream/IntStream.html#sum--), [`average`](http://docs.oracle.com/javase/8/docs/api/java/util/stream/IntStream.html#average--),...\r\n\r\nThe [`getAsInt`](http://docs.oracle.com/javase/8/docs/api/java/util/OptionalInt.html#getAsInt--) method is used to get the value from the [`OptionalInt`](http://docs.oracle.com/javase/8/docs/api/java/util/OptionalInt.html)\r\n\r\n    import java.util.Arrays;\r\n    \r\n    public class Test {\r\n        public static void main(String[] args){\r\n            int[] tab = {12, 1, 21, 8};\r\n            int min = Arrays.stream(tab).min().getAsInt();\r\n            int max = Arrays.stream(tab).max().getAsInt();\r\n            System.out.println(&quot;Min = &quot; + min);\r\n            System.out.println(&quot;Max = &quot; + max)\r\n        }\r\n        \r\n    }\r\n\r\n**==UPDATE==**\r\n\r\nIf execution time is important and you want to go through the data only once you can use the [`summaryStatistics()`](https://docs.oracle.com/javase/8/docs/api/java/util/stream/IntStream.html#summaryStatistics--) method like this\r\n\r\n    import java.util.Arrays;\r\n    import java.util.IntSummaryStatistics;\r\n    \r\n    public class SOTest {\r\n        public static void main(String[] args){\r\n            int[] tab = {12, 1, 21, 8};\r\n            IntSummaryStatistics stat = Arrays.stream(tab).summaryStatistics();\r\n            int min = stat.getMin();\r\n            int max = stat.getMax();\r\n            System.out.println(&quot;Min = &quot; + min);\r\n            System.out.println(&quot;Max = &quot; + max);\r\n        }\r\n    }\r\n\r\nThis approach can give better performance than classical loop because the [`summaryStatistics`](https://docs.oracle.com/javase/8/docs/api/java/util/stream/IntStream.html#summaryStatistics--) method is a [reduction operation](https://docs.oracle.com/javase/8/docs/api/java/util/stream/package-summary.html#Reduction) and it allows parallelization.","title":"Finding the max/min value in an array of primitives using Java","body":"<p>You can simply use the new Java 8 <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html\" rel=\"noreferrer\"><code>Stream</code>s</a> but you have to work with <code>int</code>.</p>\n\n<p>The <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/Arrays.html#stream-int:A-\" rel=\"noreferrer\"><code>stream</code></a> method of the utility class <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/Arrays.html\" rel=\"noreferrer\"><code>Arrays</code></a> gives you an <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/stream/IntStream.html\" rel=\"noreferrer\"><code>IntStream</code></a> on which you can use the <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/stream/IntStream.html#min--\" rel=\"noreferrer\"><code>min</code></a> method. You can also do <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/stream/IntStream.html#max--\" rel=\"noreferrer\"><code>max</code></a>, <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/stream/IntStream.html#sum--\" rel=\"noreferrer\"><code>sum</code></a>, <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/stream/IntStream.html#average--\" rel=\"noreferrer\"><code>average</code></a>,...</p>\n\n<p>The <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/OptionalInt.html#getAsInt--\" rel=\"noreferrer\"><code>getAsInt</code></a> method is used to get the value from the <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/OptionalInt.html\" rel=\"noreferrer\"><code>OptionalInt</code></a></p>\n\n<pre><code>import java.util.Arrays;\n\npublic class Test {\n    public static void main(String[] args){\n        int[] tab = {12, 1, 21, 8};\n        int min = Arrays.stream(tab).min().getAsInt();\n        int max = Arrays.stream(tab).max().getAsInt();\n        System.out.println(\"Min = \" + min);\n        System.out.println(\"Max = \" + max)\n    }\n\n}\n</code></pre>\n\n<p><strong>==UPDATE==</strong></p>\n\n<p>If execution time is important and you want to go through the data only once you can use the <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/stream/IntStream.html#summaryStatistics--\" rel=\"noreferrer\"><code>summaryStatistics()</code></a> method like this</p>\n\n<pre><code>import java.util.Arrays;\nimport java.util.IntSummaryStatistics;\n\npublic class SOTest {\n    public static void main(String[] args){\n        int[] tab = {12, 1, 21, 8};\n        IntSummaryStatistics stat = Arrays.stream(tab).summaryStatistics();\n        int min = stat.getMin();\n        int max = stat.getMax();\n        System.out.println(\"Min = \" + min);\n        System.out.println(\"Max = \" + max);\n    }\n}\n</code></pre>\n\n<p>This approach can give better performance than classical loop because the <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/stream/IntStream.html#summaryStatistics--\" rel=\"noreferrer\"><code>summaryStatistics</code></a> method is a <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/stream/package-summary.html#Reduction\" rel=\"noreferrer\">reduction operation</a> and it allows parallelization.</p>\n"},{"comments":[{"owner":{"account_id":2707424,"reputation":4360,"user_id":2336725,"display_name":"Teepeemm"},"score":2,"creation_date":1434715990,"post_id":30911587,"comment_id":49910453,"body_markdown":"The problem with sorting is that it has an O(n log n) overhead for a O(n) problem.  But this is better than the other three &quot;sort the array&quot; answers already given.","body":"The problem with sorting is that it has an O(n log n) overhead for a O(n) problem.  But this is better than the other three &quot;sort the array&quot; answers already given."}],"tags":[],"owner":{"account_id":5386756,"reputation":851,"user_id":4290390,"display_name":"Kim G."},"comment_count":1,"down_vote_count":2,"up_vote_count":2,"is_accepted":false,"score":0,"last_activity_date":1434672367,"creation_date":1434619827,"answer_id":30911587,"question_id":1484347,"body_markdown":"The basic way to get the min/max value of an Array. If you need the unsorted array, you may create a copy or pass it to a method that returns the min or max. If not, sorted array is better since it performs faster in some cases.\r\n\r\n    public class MinMaxValueOfArray {\r\n        public static void main(String[] args) {\r\n            int[] A = {2, 4, 3, 5, 5};\r\n            Arrays.sort(A);\r\n            int min = A[0];\r\n            int max = A[A.length -1];\r\n            System.out.println(&quot;Min Value = &quot; + min);        \r\n            System.out.println(&quot;Max Value = &quot; + max);\r\n        }\r\n    }","title":"Finding the max/min value in an array of primitives using Java","body":"<p>The basic way to get the min/max value of an Array. If you need the unsorted array, you may create a copy or pass it to a method that returns the min or max. If not, sorted array is better since it performs faster in some cases.</p>\n\n<pre><code>public class MinMaxValueOfArray {\n    public static void main(String[] args) {\n        int[] A = {2, 4, 3, 5, 5};\n        Arrays.sort(A);\n        int min = A[0];\n        int max = A[A.length -1];\n        System.out.println(\"Min Value = \" + min);        \n        System.out.println(\"Max Value = \" + max);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4226501,"reputation":13504,"user_id":3459910,"accept_rate":73,"display_name":"winklerrr"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1440602975,"creation_date":1440602975,"answer_id":32230758,"question_id":1484347,"body_markdown":"You could easily do it with an `IntStream` and the `max()` method.\r\n\r\n### Example\r\n\r\n    public static int maxValue(final int[] intArray) {\r\n      return IntStream.range(0, intArray.length).map(i -&gt; intArray[i]).max().getAsInt();\r\n    }\r\n\r\n### Explanation \r\n\r\n1. `range(0, intArray.length)` - To get a stream with as many elements as present in the `intArray`.\r\n\r\n2. `map(i -&gt; intArray[i])` - Map every element of the stream to an actual element of the `intArray`.\r\n\r\n3. `max()` - Get the maximum element of this stream as `OptionalInt`.\r\n\r\n4. `getAsInt()` - Unwrap the `OptionalInt`. (You could also use here: `orElse(0)`, just in case the `OptionalInt` is empty.)","title":"Finding the max/min value in an array of primitives using Java","body":"<p>You could easily do it with an <code>IntStream</code> and the <code>max()</code> method.</p>\n\n<h3>Example</h3>\n\n<pre><code>public static int maxValue(final int[] intArray) {\n  return IntStream.range(0, intArray.length).map(i -&gt; intArray[i]).max().getAsInt();\n}\n</code></pre>\n\n<h3>Explanation</h3>\n\n<ol>\n<li><p><code>range(0, intArray.length)</code> - To get a stream with as many elements as present in the <code>intArray</code>.</p></li>\n<li><p><code>map(i -&gt; intArray[i])</code> - Map every element of the stream to an actual element of the <code>intArray</code>.</p></li>\n<li><p><code>max()</code> - Get the maximum element of this stream as <code>OptionalInt</code>.</p></li>\n<li><p><code>getAsInt()</code> - Unwrap the <code>OptionalInt</code>. (You could also use here: <code>orElse(0)</code>, just in case the <code>OptionalInt</code> is empty.)</p></li>\n</ol>\n"},{"comments":[{"owner":{"account_id":2509230,"reputation":1396,"user_id":4576274,"display_name":"Pramod"},"score":0,"creation_date":1536401945,"post_id":37762644,"comment_id":91417309,"body_markdown":"While your solution will work, but it will increase the time complexity to O(nlogn) while min can be found easily in O(n) by using other answers.","body":"While your solution will work, but it will increase the time complexity to O(nlogn) while min can be found easily in O(n) by using other answers."},{"owner":{"account_id":2042397,"reputation":10132,"user_id":1834057,"accept_rate":51,"display_name":"Nicholas Hamilton"},"score":0,"creation_date":1552207542,"post_id":37762644,"comment_id":96917018,"body_markdown":"simply crazy to use a sort in this situation.","body":"simply crazy to use a sort in this situation."},{"owner":{"account_id":95476,"reputation":14534,"user_id":260007,"accept_rate":100,"display_name":"biziclop"},"score":0,"creation_date":1553937613,"post_id":37762644,"comment_id":97577903,"body_markdown":"It can be useful when the first n&gt;1 smallest/largest value is needed, with some repairs.","body":"It can be useful when the first n&gt;1 smallest/largest value is needed, with some repairs."}],"tags":[],"owner":{"account_id":2376705,"reputation":37064,"user_id":2079831,"accept_rate":100,"display_name":"Andrew"},"comment_count":3,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1465640911,"creation_date":1465640911,"answer_id":37762644,"question_id":1484347,"body_markdown":"Example with float:\r\n\r\n    public static float getMaxFloat(float[] data) {\r\n\r\n        float[] copy = Arrays.copyOf(data, data.length);\r\n        Arrays.sort(copy);\r\n        return copy[data.length - 1];\r\n    }\r\n\r\n    public static float getMinFloat(float[] data) {\r\n\r\n        float[] copy = Arrays.copyOf(data, data.length);\r\n        Arrays.sort(copy);\r\n        return copy[0];\r\n    }","title":"Finding the max/min value in an array of primitives using Java","body":"<p>Example with float:</p>\n\n<pre><code>public static float getMaxFloat(float[] data) {\n\n    float[] copy = Arrays.copyOf(data, data.length);\n    Arrays.sort(copy);\n    return copy[data.length - 1];\n}\n\npublic static float getMinFloat(float[] data) {\n\n    float[] copy = Arrays.copyOf(data, data.length);\n    Arrays.sort(copy);\n    return copy[0];\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":2085185,"reputation":779,"user_id":1856342,"accept_rate":71,"display_name":"krems"},"score":1,"creation_date":1497553011,"post_id":40031337,"comment_id":76138727,"body_markdown":"You should use \ndouble max = Double.NEGATIVE_INFINITY;\ninstead of \ndouble max = Double.MIN_VALUE;\nAs MIN_VALUE for double is positive","body":"You should use  double max = Double.NEGATIVE_INFINITY; instead of  double max = Double.MIN_VALUE; As MIN_VALUE for double is positive"},{"owner":{"account_id":2042397,"reputation":10132,"user_id":1834057,"accept_rate":51,"display_name":"Nicholas Hamilton"},"score":2,"creation_date":1520333229,"post_id":40031337,"comment_id":85262299,"body_markdown":"... or you could set max to the first item in the array, and iterate from the 2nd item, see my answer.","body":"... or you could set max to the first item in the array, and iterate from the 2nd item, see my answer."}],"tags":[],"owner":{"account_id":435850,"reputation":1429,"user_id":822664,"accept_rate":60,"display_name":"Sauer"},"comment_count":2,"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1499691882,"creation_date":1476394235,"answer_id":40031337,"question_id":1484347,"body_markdown":"I have a little helper class in all of my applications with methods like:\r\n\r\n    public static double arrayMax(double[] arr) {\r\n    \tdouble max = Double.NEGATIVE_INFINITY;\r\n    \t\r\n    \tfor(double cur: arr)\r\n    \t\tmax = Math.max(max, cur);\r\n    \t\r\n    \treturn max;\r\n    }","title":"Finding the max/min value in an array of primitives using Java","body":"<p>I have a little helper class in all of my applications with methods like:</p>\n\n<pre><code>public static double arrayMax(double[] arr) {\n    double max = Double.NEGATIVE_INFINITY;\n\n    for(double cur: arr)\n        max = Math.max(max, cur);\n\n    return max;\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":3377694,"reputation":4854,"user_id":2835520,"accept_rate":100,"display_name":"IgniteCoders"},"score":0,"creation_date":1520342330,"post_id":49128983,"comment_id":85268213,"body_markdown":"This is for numbers `int` but the question is asking for primitive values `int, long, char, byte....`","body":"This is for numbers <code>int</code> but the question is asking for primitive values <code>int, long, char, byte....</code>"}],"tags":[],"owner":{"account_id":2042397,"reputation":10132,"user_id":1834057,"accept_rate":51,"display_name":"Nicholas Hamilton"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1520333349,"creation_date":1520333349,"answer_id":49128983,"question_id":1484347,"body_markdown":"        public int getMin(int[] values){\r\n            int ret = values[0];\r\n            for(int i = 1; i &lt; values.length; i++)\r\n                ret = Math.min(ret,values[i]);\r\n            return ret;\r\n        }","title":"Finding the max/min value in an array of primitives using Java","body":"<pre><code>    public int getMin(int[] values){\n        int ret = values[0];\n        for(int i = 1; i &lt; values.length; i++)\n            ret = Math.min(ret,values[i]);\n        return ret;\n    }\n</code></pre>\n"},{"comments":[{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":1,"creation_date":1544236705,"post_id":53119572,"comment_id":94215895,"body_markdown":";-) That’s “Not completely serious” alright. Hesitating to upvote…","body":";-) That’s “Not completely serious” alright. Hesitating to upvote…"}],"tags":[],"owner":{"account_id":6348404,"reputation":372,"user_id":4928212,"accept_rate":100,"display_name":"mnzl"},"comment_count":1,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1541166578,"creation_date":1541165656,"answer_id":53119572,"question_id":1484347,"body_markdown":"Here is a solution to get the max value in about 99% of runs (change the 0.01 to get a better result):\r\n\r\n    public static double getMax(double[] vals){\r\n        final double[] max = {Double.NEGATIVE_INFINITY};\r\n\r\n        IntStream.of(new Random().ints((int) Math.ceil(Math.log(0.01) / Math.log(1.0 - (1.0/vals.length))),0,vals.length).toArray())\r\n                .forEach(r -&gt; max[0] = (max[0] &lt; vals[r])? vals[r]: max[0]);\r\n\r\n        return max[0];\r\n    }\r\n(Not completely serious)","title":"Finding the max/min value in an array of primitives using Java","body":"<p>Here is a solution to get the max value in about 99% of runs (change the 0.01 to get a better result):</p>\n\n<pre><code>public static double getMax(double[] vals){\n    final double[] max = {Double.NEGATIVE_INFINITY};\n\n    IntStream.of(new Random().ints((int) Math.ceil(Math.log(0.01) / Math.log(1.0 - (1.0/vals.length))),0,vals.length).toArray())\n            .forEach(r -&gt; max[0] = (max[0] &lt; vals[r])? vals[r]: max[0]);\n\n    return max[0];\n}\n</code></pre>\n\n<p>(Not completely serious)</p>\n"},{"tags":[],"owner":{"account_id":14423849,"reputation":598,"user_id":10419204,"display_name":"Simon Z."},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1554207950,"creation_date":1551161009,"answer_id":54879301,"question_id":1484347,"body_markdown":"A solution with `reduce()`:\r\n\r\n    int[] array = {23, 3, 56, 97, 42};\r\n    // directly print out\r\n    Arrays.stream(array).reduce((x, y) -&gt; x &gt; y ? x : y).ifPresent(System.out::println);\r\n\r\n    // get the result as an int\r\n    int res = Arrays.stream(array).reduce((x, y) -&gt; x &gt; y ? x : y).getAsInt();\r\n    System.out.println(res);\r\n    &gt;&gt;\r\n    97\r\n    97\r\n\r\nIn the code above, `reduce()` returns data in `Optional` format, which you can convert to `int` by `getAsInt()`. \r\n \r\nIf we want to compare the max value with a certain number, we can set a start value in `reduce()`:\r\n\r\n    int[] array = {23, 3, 56, 97, 42};\r\n    // e.g., compare with 100\r\n    int max = Arrays.stream(array).reduce(100, (x, y) -&gt; x &gt; y ? x : y);\r\n    System.out.println(max);\r\n    &gt;&gt;\r\n    100\r\n\r\nIn the code above, when `reduce()` with an identity (start value) as the first parameter, it returns data in the same format with the identity. With this property, we can apply this solution to other arrays:\r\n\r\n    double[] array = {23.1, 3, 56.6, 97, 42};\r\n    double max = Arrays.stream(array).reduce(array[0], (x, y) -&gt; x &gt; y ? x : y);\r\n    System.out.println(max);\r\n    &gt;&gt;\r\n    97.0","title":"Finding the max/min value in an array of primitives using Java","body":"<p>A solution with <code>reduce()</code>:</p>\n\n<pre><code>int[] array = {23, 3, 56, 97, 42};\n// directly print out\nArrays.stream(array).reduce((x, y) -&gt; x &gt; y ? x : y).ifPresent(System.out::println);\n\n// get the result as an int\nint res = Arrays.stream(array).reduce((x, y) -&gt; x &gt; y ? x : y).getAsInt();\nSystem.out.println(res);\n&gt;&gt;\n97\n97\n</code></pre>\n\n<p>In the code above, <code>reduce()</code> returns data in <code>Optional</code> format, which you can convert to <code>int</code> by <code>getAsInt()</code>. </p>\n\n<p>If we want to compare the max value with a certain number, we can set a start value in <code>reduce()</code>:</p>\n\n<pre><code>int[] array = {23, 3, 56, 97, 42};\n// e.g., compare with 100\nint max = Arrays.stream(array).reduce(100, (x, y) -&gt; x &gt; y ? x : y);\nSystem.out.println(max);\n&gt;&gt;\n100\n</code></pre>\n\n<p>In the code above, when <code>reduce()</code> with an identity (start value) as the first parameter, it returns data in the same format with the identity. With this property, we can apply this solution to other arrays:</p>\n\n<pre><code>double[] array = {23.1, 3, 56.6, 97, 42};\ndouble max = Arrays.stream(array).reduce(array[0], (x, y) -&gt; x &gt; y ? x : y);\nSystem.out.println(max);\n&gt;&gt;\n97.0\n</code></pre>\n"},{"comments":[{"owner":{"account_id":4680926,"reputation":2259,"user_id":3789665,"accept_rate":57,"display_name":"greybeard"},"score":0,"creation_date":1690349974,"post_id":65800230,"comment_id":135339194,"body_markdown":"What question does this answer, and how?","body":"What question does this answer, and how?"}],"tags":[],"owner":{"account_id":8984705,"reputation":42,"user_id":6698628,"display_name":"Balu Abraham"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1611094078,"creation_date":1611094078,"answer_id":65800230,"question_id":1484347,"body_markdown":"        int[] arr = {1, 2, 3};\r\n\r\n        List&lt;Integer&gt; list = Arrays.stream(arr).boxed().collect(Collectors.toList());\r\n        int max_ = Collections.max(list);\r\n        int i;\r\n        if (max_ &gt; 0) {\r\n            for (i = 1; i &lt; Collections.max(list); i++) {\r\n                if (!list.contains(i)) {\r\n                    System.out.println(i);\r\n                    break;\r\n                }\r\n            }\r\n            if(i==max_){\r\n                System.out.println(i+1);\r\n            }\r\n        } else {\r\n            System.out.println(&quot;1&quot;);\r\n        }\r\n    }","title":"Finding the max/min value in an array of primitives using Java","body":"<pre><code>    int[] arr = {1, 2, 3};\n\n    List&lt;Integer&gt; list = Arrays.stream(arr).boxed().collect(Collectors.toList());\n    int max_ = Collections.max(list);\n    int i;\n    if (max_ &gt; 0) {\n        for (i = 1; i &lt; Collections.max(list); i++) {\n            if (!list.contains(i)) {\n                System.out.println(i);\n                break;\n            }\n        }\n        if(i==max_){\n            System.out.println(i+1);\n        }\n    } else {\n        System.out.println(&quot;1&quot;);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6655393,"reputation":2561,"user_id":5136131,"display_name":"Positive Navid"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1690334070,"creation_date":1690334070,"answer_id":76767410,"question_id":1484347,"body_markdown":"     IntStream.of(a).max().getAsInt()\r\n\r\nExample:\r\n    \r\n    import java.util.stream.IntStream;\r\n    public class Solution {\r\n    \tpublic static void main(String[] args) {\r\n            int[] a = {3, 7, 5, 2};\r\n            int max = IntStream.of(a).max().getAsInt();\r\n    \t\tSystem.out.println(max);\r\n    \t}\r\n    }","title":"Finding the max/min value in an array of primitives using Java","body":"<pre><code> IntStream.of(a).max().getAsInt()\n</code></pre>\n<p>Example:</p>\n<pre><code>import java.util.stream.IntStream;\npublic class Solution {\n    public static void main(String[] args) {\n        int[] a = {3, 7, 5, 2};\n        int max = IntStream.of(a).max().getAsInt();\n        System.out.println(max);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":49568,"reputation":119894,"user_id":147601,"accept_rate":63,"display_name":"Nick Heiner"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":820302,"favorite_count":0,"down_vote_count":0,"up_vote_count":245,"accepted_answer_id":1486010,"answer_count":17,"score":245,"last_activity_date":1690334070,"creation_date":1254082076,"question_id":1484347,"body_markdown":"It&#39;s trivial to write a function to determine the min/max value in an array, such as:\r\n\r\n\t/**\r\n\t * \r\n\t * @param chars\r\n\t * @return the max value in the array of chars\r\n\t */\r\n\tprivate static int maxValue(char[] chars) {\r\n\t\tint max = chars[0];\r\n\t\tfor (int ktr = 0; ktr &lt; chars.length; ktr++) {\r\n\t\t\tif (chars[ktr] &gt; max) {\r\n\t\t\t\tmax = chars[ktr];\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn max;\r\n\t}\r\n\r\nbut isn&#39;t this already done somewhere?","title":"Finding the max/min value in an array of primitives using Java","body":"<p>It's trivial to write a function to determine the min/max value in an array, such as:</p>\n\n<pre><code>/**\n * \n * @param chars\n * @return the max value in the array of chars\n */\nprivate static int maxValue(char[] chars) {\n    int max = chars[0];\n    for (int ktr = 0; ktr &lt; chars.length; ktr++) {\n        if (chars[ktr] &gt; max) {\n            max = chars[ktr];\n        }\n    }\n    return max;\n}\n</code></pre>\n\n<p>but isn't this already done somewhere?</p>\n"},{"tags":["java","android","hprof","eclipse-memory-analyzer"],"comments":[{"owner":{"account_id":441056,"reputation":11115,"user_id":830964,"accept_rate":50,"display_name":"Deepak Bala"},"score":1,"creation_date":1365789583,"post_id":15977723,"comment_id":22776462,"body_markdown":"Isn&#39;t that what [ParseHeapDump.sh](http://wiki.eclipse.org/index.php/MemoryAnalyzer/FAQ) does ?","body":"Isn&#39;t that what <a href=\"http://wiki.eclipse.org/index.php/MemoryAnalyzer/FAQ\" rel=\"nofollow noreferrer\">ParseHeapDump.sh</a> does ?"},{"owner":{"account_id":410135,"reputation":1759,"user_id":781794,"accept_rate":68,"display_name":"Abhishek"},"score":0,"creation_date":1365794158,"post_id":15977723,"comment_id":22778823,"body_markdown":"Yup, thanks for that. Did not know about it. Have a follow up question, How do you parse the index file that is generated? Want to run some custom analysis on it.","body":"Yup, thanks for that. Did not know about it. Have a follow up question, How do you parse the index file that is generated? Want to run some custom analysis on it."},{"owner":{"account_id":441056,"reputation":11115,"user_id":830964,"accept_rate":50,"display_name":"Deepak Bala"},"score":0,"creation_date":1365846409,"post_id":15977723,"comment_id":22791555,"body_markdown":"I&#39;ll move my comment to the answer&#39;s section since that was what you were looking for. If you elaborate on the custom analysis you&#39;re after, may be we can help.","body":"I&#39;ll move my comment to the answer&#39;s section since that was what you were looking for. If you elaborate on the custom analysis you&#39;re after, may be we can help."},{"owner":{"account_id":4258989,"reputation":738,"user_id":3483824,"display_name":"bitsabhi"},"score":1,"creation_date":1537342195,"post_id":15977723,"comment_id":91744754,"body_markdown":"jhat -port 7401 -J-Xmx4G &lt;file&gt;","body":"jhat -port 7401 -J-Xmx4G &lt;file&gt;"}],"answers":[{"comments":[{"owner":{"account_id":410135,"reputation":1759,"user_id":781794,"accept_rate":68,"display_name":"Abhishek"},"score":0,"creation_date":1365877807,"post_id":15986464,"comment_id":22799873,"body_markdown":"Here is the custom analysis I want, By packagename heap utilisation, in a format which can be stored to a db or saved as a csv.","body":"Here is the custom analysis I want, By packagename heap utilisation, in a format which can be stored to a db or saved as a csv."},{"owner":{"account_id":441056,"reputation":11115,"user_id":830964,"accept_rate":50,"display_name":"Deepak Bala"},"score":0,"creation_date":1365919181,"post_id":15986464,"comment_id":22808633,"body_markdown":"There is an export option on the dominator tree window that will allow you to export to `HTML` / `CSV` / `TXT`. I know that is not a direct answer to your question, but it is the best I have. The files can indeed be parsed on a command line to do what you&#39;re asking, but I do not know the technical path that will achieve that.","body":"There is an export option on the dominator tree window that will allow you to export to <code>HTML</code> / <code>CSV</code> / <code>TXT</code>. I know that is not a direct answer to your question, but it is the best I have. The files can indeed be parsed on a command line to do what you&#39;re asking, but I do not know the technical path that will achieve that."},{"owner":{"account_id":4482195,"reputation":828,"user_id":3645968,"display_name":"Charles Roth"},"score":0,"creation_date":1460749154,"post_id":15986464,"comment_id":60904288,"body_markdown":"Tried ParseHeapDump.sh (ssh&#39;d to big linux server), fails immediately with &quot;Unable to initialize GTK+&quot;, looks like it thinks it&#39;s talking to a UI(??)","body":"Tried ParseHeapDump.sh (ssh&#39;d to big linux server), fails immediately with &quot;Unable to initialize GTK+&quot;, looks like it thinks it&#39;s talking to a UI(??)"}],"tags":[],"owner":{"account_id":441056,"reputation":11115,"user_id":830964,"accept_rate":50,"display_name":"Deepak Bala"},"comment_count":3,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1366126787,"creation_date":1365846435,"answer_id":15986464,"question_id":15977723,"body_markdown":"[ParseHeapDump.sh][1] does what you&#39;re looking for. As for the follow up question I&#39;m not sure what format the index files are stored in.\r\n\r\n\r\n  [1]: http://wiki.eclipse.org/index.php/MemoryAnalyzer/FAQ","title":"analyse a HPROF memory dump file from command line programmatically","body":"<p><a href=\"http://wiki.eclipse.org/index.php/MemoryAnalyzer/FAQ\" rel=\"nofollow\">ParseHeapDump.sh</a> does what you're looking for. As for the follow up question I'm not sure what format the index files are stored in.</p>\n"},{"comments":[{"owner":{"account_id":485331,"reputation":3633,"user_id":901597,"display_name":"Joe Bowbeer"},"score":0,"creation_date":1380272844,"post_id":16907654,"comment_id":28147933,"body_markdown":"Fixed: andromat link is still among the living, but was mistyped.","body":"Fixed: andromat link is still among the living, but was mistyped."}],"tags":[],"owner":{"account_id":485331,"reputation":3633,"user_id":901597,"display_name":"Joe Bowbeer"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1690333117,"creation_date":1370303505,"answer_id":16907654,"question_id":15977723,"body_markdown":"See [github.com/joebowbeer/andromat](https://github.com/joebowbeer/andromat), which is adapted from [bitbucket.org/ekabanov/mat](https://bitbucket.org/ekabanov/mat), which is a stripped-down command line version of [Eclipse Memory Analyzer](http://www.eclipse.org/mat/).","title":"analyse a HPROF memory dump file from command line programmatically","body":"<p>See <a href=\"https://github.com/joebowbeer/andromat\" rel=\"nofollow noreferrer\">github.com/joebowbeer/andromat</a>, which is adapted from <a href=\"https://bitbucket.org/ekabanov/mat\" rel=\"nofollow noreferrer\">bitbucket.org/ekabanov/mat</a>, which is a stripped-down command line version of <a href=\"http://www.eclipse.org/mat/\" rel=\"nofollow noreferrer\">Eclipse Memory Analyzer</a>.</p>\n"}],"owner":{"account_id":410135,"reputation":1759,"user_id":781794,"accept_rate":68,"display_name":"Abhishek"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":16025,"favorite_count":0,"down_vote_count":0,"up_vote_count":13,"accepted_answer_id":15986464,"answer_count":2,"score":13,"last_activity_date":1690333117,"creation_date":1365788808,"question_id":15977723,"body_markdown":"I was investigation with analyzing a HPROF file using Eclipse&#39;s Memory Analyser (MAT).\r\nThe dominator tree, reports and the OQL interface look really useful. But all this has to be done manually from the MAT software.\r\n\r\nIs there a commandline interface so I can programmatically parse the HPROF and automatically generate custom reports.\r\n\r\nThis would be useful to integrate this a test infrastructure to do a automatic memory analysis.\r\n\r\nBtw, the heapsize is will be between 10-60MB.","title":"analyse a HPROF memory dump file from command line programmatically","body":"<p>I was investigation with analyzing a HPROF file using Eclipse's Memory Analyser (MAT).\nThe dominator tree, reports and the OQL interface look really useful. But all this has to be done manually from the MAT software.</p>\n\n<p>Is there a commandline interface so I can programmatically parse the HPROF and automatically generate custom reports.</p>\n\n<p>This would be useful to integrate this a test infrastructure to do a automatic memory analysis.</p>\n\n<p>Btw, the heapsize is will be between 10-60MB.</p>\n"},{"tags":["java","spring-boot","spring-mvc","spring-test","spring-test-mvc"],"answers":[{"tags":[],"owner":{"account_id":136251,"reputation":87506,"user_id":339637,"accept_rate":55,"display_name":"Ken Chan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690332948,"creation_date":1690311937,"answer_id":76765804,"question_id":76764123,"body_markdown":"If `MockMvc#perform()` throws exception , it implies you do not configure spring-mvc to handle this exception.(i.e `ConstraintViolationException` in your case). \r\n\r\nIn reality, the exception will be propagated back to the servlet container to let it handle (e.g decide what HTTP response will be returned etc).But now as you are using `MockMvc` , you can think that it is a mocked version of servlet container which its implementation is just throw the exception for any exception  propagated to it.\r\n\r\nSo the answer is to configure spring-mvc to handle  `ConstraintViolationException` , for example by declaring a `@ControllerAdvice` for it :\r\n\r\n``` java\r\n@ControllerAdvice\r\npublic class ApiExceptionHandler {\r\n\r\n\t@ExceptionHandler(ConstraintViolationException.class)\r\n\t@ResponseStatus(value = HttpStatus.BAD_REQUEST)\r\n\tpublic void handleConstraintViolationException(final ConstraintViolationException ex) {\r\n\t    log.info(&quot;handle ConstraintViolationException blabla&quot;,ex);\r\n\t}\r\n}\r\n```\r\n\r\nNote : See more how to handle exception in spring-mvc at [this][1]\r\n\r\n\r\n  [1]: https://spring.io/blog/2013/11/01/exception-handling-in-spring-mvc#recent-updates","title":"Spring Test with mockMVC throws ServletException","body":"<p>If <code>MockMvc#perform()</code> throws exception , it implies you do not configure spring-mvc to handle this exception.(i.e <code>ConstraintViolationException</code> in your case).</p>\n<p>In reality, the exception will be propagated back to the servlet container to let it handle (e.g decide what HTTP response will be returned etc).But now as you are using <code>MockMvc</code> , you can think that it is a mocked version of servlet container which its implementation is just throw the exception for any exception  propagated to it.</p>\n<p>So the answer is to configure spring-mvc to handle  <code>ConstraintViolationException</code> , for example by declaring a <code>@ControllerAdvice</code> for it :</p>\n<pre class=\"lang-java prettyprint-override\"><code>@ControllerAdvice\npublic class ApiExceptionHandler {\n\n    @ExceptionHandler(ConstraintViolationException.class)\n    @ResponseStatus(value = HttpStatus.BAD_REQUEST)\n    public void handleConstraintViolationException(final ConstraintViolationException ex) {\n        log.info(&quot;handle ConstraintViolationException blabla&quot;,ex);\n    }\n}\n</code></pre>\n<p>Note : See more how to handle exception in spring-mvc at <a href=\"https://spring.io/blog/2013/11/01/exception-handling-in-spring-mvc#recent-updates\" rel=\"nofollow noreferrer\">this</a></p>\n"}],"owner":{"account_id":15860278,"reputation":319,"user_id":11443551,"display_name":"iiiiiiiiiiiiiiiiiiii"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":471,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1690332948,"creation_date":1690298037,"question_id":76764123,"body_markdown":"I have the following Spring test class:\r\n\r\n\r\n```java\r\n\r\n@AutoConfigureMockMvc\r\n@Testcontainers\r\n@ExtendWith(SpringExtension.class)\r\n@SpringBootTest\r\n@ActiveProfiles(&quot;test&quot;)\r\npublic class FormTest {\r\n\r\n    @Autowired\r\n    private MockMvc mockMvc;\r\n    \r\n\r\n    @Test\r\n    public void givenInvalidForm_whenSubmitted_returns400() throws Exception {\r\n\r\n        FormUploadDTO dto = .. generate DTO\r\n        MvcResult mvcResult =  mockMvc.perform(post(BaseApi.BASE_API + &quot;/forms&quot;)\r\n                        .contentType(MediaType.APPLICATION_JSON.getMediaType())\r\n                        .content(asJsonString(new ArrayList&lt;&gt;(Collections.singleton(dto)){}))\r\n                        .andDo(print())\r\n                        .andReturn();\r\n        assertEquals(400, mvcResult.getResponse().getStatus());\r\n\r\n\r\n    }\r\n\r\n}\r\n```\r\n\r\nhowever, instead of spring-application container returning bad-request (for `@NotNull` annotated fields), it throws the following error:\r\n\r\n```\r\njakarta.servlet.ServletException: Request processing failed: jakarta.validation.ConstraintViolationException: submitForm.dtos[0].client: must not be null, submitForm.dtos[0].priceType: must not be null, submitForm.dtos[0].price: must not be null, submitForm.dtos[0].materialType: must not be null, submitForm.dtos[0].dateTo: must not be null, submitForm.dtos[0].client: must not be blank, submitForm.dtos[0].dateFrom: must not be null\r\n\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1019)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)\r\n\tat org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:72)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)\r\n\tat org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter ....\r\n\r\n\r\nCaused by: jakarta.validation.ConstraintViolationException: submitForm.dtos[0].client: must not be null, submitForm.dtos[0].priceType: must not be null, submitForm.dtos[0].price: must not be null, submitForm.dtos[0].materialType: must not be null, submitForm.dtos[0].dateTo: must not be null, submitForm.dtos[0].client: must not be blank, submitForm.dtos[0].dateFrom: must not be null\r\n\tat org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:138)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:756)\r\n```\r\n    \r\n\r\nany idea how this can be fixed?\r\n\r\n","title":"Spring Test with mockMVC throws ServletException","body":"<p>I have the following Spring test class:</p>\n<pre class=\"lang-java prettyprint-override\"><code>\n@AutoConfigureMockMvc\n@Testcontainers\n@ExtendWith(SpringExtension.class)\n@SpringBootTest\n@ActiveProfiles(&quot;test&quot;)\npublic class FormTest {\n\n    @Autowired\n    private MockMvc mockMvc;\n    \n\n    @Test\n    public void givenInvalidForm_whenSubmitted_returns400() throws Exception {\n\n        FormUploadDTO dto = .. generate DTO\n        MvcResult mvcResult =  mockMvc.perform(post(BaseApi.BASE_API + &quot;/forms&quot;)\n                        .contentType(MediaType.APPLICATION_JSON.getMediaType())\n                        .content(asJsonString(new ArrayList&lt;&gt;(Collections.singleton(dto)){}))\n                        .andDo(print())\n                        .andReturn();\n        assertEquals(400, mvcResult.getResponse().getStatus());\n\n\n    }\n\n}\n</code></pre>\n<p>however, instead of spring-application container returning bad-request (for <code>@NotNull</code> annotated fields), it throws the following error:</p>\n<pre><code>jakarta.servlet.ServletException: Request processing failed: jakarta.validation.ConstraintViolationException: submitForm.dtos[0].client: must not be null, submitForm.dtos[0].priceType: must not be null, submitForm.dtos[0].price: must not be null, submitForm.dtos[0].materialType: must not be null, submitForm.dtos[0].dateTo: must not be null, submitForm.dtos[0].client: must not be blank, submitForm.dtos[0].dateFrom: must not be null\n\n    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1019)\n    at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)\n    at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)\n    at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)\n    at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:72)\n    at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)\n    at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter ....\n\n\nCaused by: jakarta.validation.ConstraintViolationException: submitForm.dtos[0].client: must not be null, submitForm.dtos[0].priceType: must not be null, submitForm.dtos[0].price: must not be null, submitForm.dtos[0].materialType: must not be null, submitForm.dtos[0].dateTo: must not be null, submitForm.dtos[0].client: must not be blank, submitForm.dtos[0].dateFrom: must not be null\n    at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:138)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\n    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:756)\n</code></pre>\n<p>any idea how this can be fixed?</p>\n"},{"tags":["java","spring"],"comments":[{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1690352235,"post_id":76767136,"comment_id":135339472,"body_markdown":"Use `@Qualifier` instead of `@Named` (the annotation from the spring package not the regular java package).","body":"Use <code>@Qualifier</code> instead of <code>@Named</code> (the annotation from the spring package not the regular java package)."}],"answers":[{"comments":[{"owner":{"account_id":1723702,"reputation":8288,"user_id":1578872,"accept_rate":69,"display_name":"user1578872"},"score":0,"creation_date":1690328910,"post_id":76767157,"comment_id":135337434,"body_markdown":"Tried this and getting the error below.\n\nNo qualifying bean of type &#39;reactor.kafka.receiver.KafkaReceiver&lt;java.lang.String, java.lang.String&gt;&#39; available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {@javax.inject.Named(\\&quot;${kafka.consumer.bean.name}\\&quot;)}","body":"Tried this and getting the error below.  No qualifying bean of type &#39;reactor.kafka.receiver.KafkaReceiver&lt;java.lang.String, java.lang.String&gt;&#39; available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {@javax.inject.Named(\\&quot;${kafka.consumer.bean.name}\\&quot;)}"}],"tags":[],"owner":{"account_id":4992802,"reputation":11963,"user_id":4014448,"display_name":"Nadir Belhaj"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690328645,"creation_date":1690328645,"answer_id":76767157,"question_id":76767136,"body_markdown":"change `@Named(&quot;consumer-bean&quot;)` to `@Named(&quot;${kafka.consumer.bean.name}&quot;`\r\nwhere ${kafka.consumer.bean.name} is the configuration property that holds the dynamic bean name","title":"Spring - @Named annotation use a value from property","body":"<p>change <code>@Named(&quot;consumer-bean&quot;)</code> to <code>@Named(&quot;${kafka.consumer.bean.name}&quot;</code>\nwhere ${kafka.consumer.bean.name} is the configuration property that holds the dynamic bean name</p>\n"}],"owner":{"account_id":1723702,"reputation":8288,"user_id":1578872,"accept_rate":69,"display_name":"user1578872"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1690332472,"creation_date":1690328248,"question_id":76767136,"body_markdown":"I am injecting bean using @Named(&quot;consumer-bean&quot;).\r\n\r\n    @Inject\r\n        public KafkaReconMessageProcessor(\r\n                                          @Named(&quot;consumer-bean&quot;) final KafkaReceiver&lt;String, String&gt; receiver) \r\n       {\r\n            this.receiver = receiver;\r\n        }\r\n\r\nHere, the bean name is hard coded to consumer-bean.\r\n\r\nI have a use case where bean name is dynamic, so it should be property driven.\r\n\r\nIn my application.yml,\r\n\r\n    consumer-bean: kafka.receiver.topic1 \r\n\r\nI want to use this name in the bean to make it property driven. Is there any way to do that?\r\n\r\nI tried with,\r\n\r\n    @javax.inject.Named(&quot;${consumer-bean}&quot;)} \r\n\r\nBut, it didnt work.\r\n","title":"Spring - @Named annotation use a value from property","body":"<p>I am injecting bean using @Named(&quot;consumer-bean&quot;).</p>\n<pre><code>@Inject\n    public KafkaReconMessageProcessor(\n                                      @Named(&quot;consumer-bean&quot;) final KafkaReceiver&lt;String, String&gt; receiver) \n   {\n        this.receiver = receiver;\n    }\n</code></pre>\n<p>Here, the bean name is hard coded to consumer-bean.</p>\n<p>I have a use case where bean name is dynamic, so it should be property driven.</p>\n<p>In my application.yml,</p>\n<pre><code>consumer-bean: kafka.receiver.topic1 \n</code></pre>\n<p>I want to use this name in the bean to make it property driven. Is there any way to do that?</p>\n<p>I tried with,</p>\n<pre><code>@javax.inject.Named(&quot;${consumer-bean}&quot;)} \n</code></pre>\n<p>But, it didnt work.</p>\n"},{"tags":["java","swing","gridbaglayout"],"answers":[{"tags":[],"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1690303418,"creation_date":1690303418,"answer_id":76764864,"question_id":76764072,"body_markdown":"&gt; leaves 10% free space on top and bottom.\r\n\r\n&gt; spaces the buttons by a fraction of the screen, I currently use 1/40 as the spacing\r\n\r\nWhich would be 2.5% between each button, or 7.5% for the space between the 4 buttons.\r\n\r\n&gt; Then the buttons fill the rest of the space.\r\n\r\nSo this leaves 72.5% of space for the 4 buttons or 18.125% for each button.\r\n\r\nWhat you have is a custom layout where each component takes a fixed percentage of the space available. The logic should be part of a layout manager, not handled by application logic.\r\n\r\nCheck out the [Relative Layout](https://tips4java.wordpress.com/2008/11/02/relative-layout/) which allows components to grow/shrink based on the relative size of each component and the space available to all components.\r\n\r\nYou would use the `RelativeLayout` with code something like:\r\n\r\n    RelativeLayout rl = new RelativeLayout(RelativeLayout.Y_AXIS);\r\n\tJPanel panel = new JPanel(rl);\r\n    panel.add(Box.createVerticalStrut(1), new Float(10));\r\n\tpanel.add(button1, new Float(18.125));\r\n    panel.add(Box.createVerticalStrut(1), new Float(2.5));\r\n\tpanel.add(button2, new Float(18.125));\r\n    panel.add(Box.createVerticalStrut(1), new Float(2.5));\r\n\tpanel.add(button3, new Float(18.125));\r\n    panel.add(Box.createVerticalStrut(1), new Float(2.5));\r\n\tpanel.add(button4, new Float(18.125));\r\n    panel.add(Box.createVerticalStrut(1), new Float(10));\r\n\r\n","title":"Change Insets when changing screen size with Grid Bag Constraints","body":"<blockquote>\n<p>leaves 10% free space on top and bottom.</p>\n</blockquote>\n<blockquote>\n<p>spaces the buttons by a fraction of the screen, I currently use 1/40 as the spacing</p>\n</blockquote>\n<p>Which would be 2.5% between each button, or 7.5% for the space between the 4 buttons.</p>\n<blockquote>\n<p>Then the buttons fill the rest of the space.</p>\n</blockquote>\n<p>So this leaves 72.5% of space for the 4 buttons or 18.125% for each button.</p>\n<p>What you have is a custom layout where each component takes a fixed percentage of the space available. The logic should be part of a layout manager, not handled by application logic.</p>\n<p>Check out the <a href=\"https://tips4java.wordpress.com/2008/11/02/relative-layout/\" rel=\"nofollow noreferrer\">Relative Layout</a> which allows components to grow/shrink based on the relative size of each component and the space available to all components.</p>\n<p>You would use the <code>RelativeLayout</code> with code something like:</p>\n<pre><code>RelativeLayout rl = new RelativeLayout(RelativeLayout.Y_AXIS);\nJPanel panel = new JPanel(rl);\npanel.add(Box.createVerticalStrut(1), new Float(10));\npanel.add(button1, new Float(18.125));\npanel.add(Box.createVerticalStrut(1), new Float(2.5));\npanel.add(button2, new Float(18.125));\npanel.add(Box.createVerticalStrut(1), new Float(2.5));\npanel.add(button3, new Float(18.125));\npanel.add(Box.createVerticalStrut(1), new Float(2.5));\npanel.add(button4, new Float(18.125));\npanel.add(Box.createVerticalStrut(1), new Float(10));\n</code></pre>\n"}],"owner":{"account_id":15379266,"reputation":125,"user_id":11095121,"display_name":"Semlan Bakelsen"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76764864,"answer_count":1,"score":0,"last_activity_date":1690332211,"creation_date":1690297752,"question_id":76764072,"body_markdown":"I have a program intended to be a start menu for a game. So far I have 3 JPanels: `homePanel`, `mainPanel` and `optionsPanel`. The &#39;homePanel&#39; is a panel holding both menu and options panel.\r\n\r\n[![Home menu image][1]][1]\r\n\r\nmainPanel has 3 buttons: `Start Game`, `Options`, and `Quit`. optionsPanel has 3 `optionsButton` 1 , 2 and 3 as well as a `backButton`.\r\n\r\n[![Option menu image][2]][2]\r\n\r\nThe first button changes the program window size between 4 different sizes. I use GridBagLayout to place the buttons because it has been the most consistent layout to align itself to the center of the screen.\r\n\r\nI am trying to place the buttons in the center of the screen, vertically, and automatically set the button height so it leaves 10% free space on top and bottom. And spaces the buttons by a fraction of the screen, I currently use 1/40 as the spacing. Then the buttons fill the rest of the space.\r\n\r\nThis works when I set it up, placing the buttons. I use:\r\n```\r\ngbcOptions.insets = new Insets(spacing, 0, spacing, 0);\r\n```\r\nto set the spacing, but when I try to change the screen size the spacing doesn&#39;t change. I am able to correctly calculate the button height and the new spacing value. But the actual spacing between the buttons does not change. They are the same as the first time the buttons were added to the panel.\r\n\r\nHere the program is enlarged and the spacing between the buttons is too small:\r\n[![Large options image][3]][3]\r\n\r\n---\r\n\r\n**Methods:**\r\n\r\nStart of class:\r\n\r\n    public class MainMenuGUI extends JFrame {\r\n\r\n    private JPanel homePanel;\r\n    private JPanel menuPanel;\r\n    private JPanel optionsPanel;\r\n    private JButton[] optionButtons;\r\n    private int[] optionValues;\r\n    private int windowHeight;\r\n    private int windowWidth;\r\n    private int maxContentWidth;\r\n    private int maxContentHeight;\r\n    private int spacing;\r\n    //window size options\r\n    private String[] windowSizeOptions = {&quot;Small (1/4)&quot;, &quot;Medium (1/2)&quot;, &quot;Large (3/4)&quot;, &quot;Fullscreen&quot;};\r\n    private int currentWindowSizeIndex = 0; // Index of the current window size option\r\n    ...\r\n\r\nHere are my methods:\r\n\r\nHere is where I set everything up:\r\n\r\n    public MainMenuGUI() {\r\n        // Set up the main window properties\r\n        setTitle(&quot;Game Main Menu&quot;);\r\n        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n\r\n        //window size, calculate the maximum content size based on the window size\r\n        Dimension screenSize = Toolkit.getDefaultToolkit().getScreenSize();\r\n\r\n        //set up the window size with the method\r\n        //Calculate values based on window size\r\n        setWindowSize(windowSizeOptions[currentWindowSizeIndex]);\r\n\r\n        //Print out to se the screen size and max content sizes\r\n        System.out.println(&quot;window Width: &quot; + windowWidth + &quot;\\nWindow height: &quot; + windowHeight\r\n                        + &quot;\\nMaxContentWidth: &quot; + maxContentWidth + &quot;\\nMaxContentHeight: &quot; + maxContentHeight);\r\n\r\n        setResizable(false);\r\n        setUndecorated(true);\r\n        setSize(windowWidth, windowHeight);\r\n        setLocationRelativeTo(null); // Center the window on the screen\r\n\r\n\r\n        //homePanel holds any Panel outside the gamePanel\r\n        homePanel = new JPanel();\r\n        homePanel.setLayout(new BorderLayout());\r\n        homePanel.setBackground(new Color(20, 20, 20));\r\n        add(homePanel, BorderLayout.CENTER);\r\n\r\n\r\n        // Create the main menu components\r\n        menuPanel = new JPanel();\r\n        menuPanel.setLayout(new GridBagLayout());\r\n\r\n\r\n        // Buttons\r\n        JButton startButton = createStyledButton(&quot;Start Game&quot;, buttonWidth);\r\n        JButton optionsButton = createStyledButton(&quot;Options&quot;, buttonWidth);\r\n        JButton quitButton = createStyledButton(&quot;Quit&quot;, buttonWidth);\r\n\r\n\r\n        // Add buttons to the panel\r\n        GridBagConstraints gbc = new GridBagConstraints();\r\n        gbc.fill = GridBagConstraints.HORIZONTAL;\r\n        gbc.insets = new Insets(spacing, 0, spacing, 0);\r\n\r\n        gbc.gridy = 0;\r\n        menuPanel.add(startButton, gbc);\r\n\r\n        gbc.gridy = 1;\r\n        menuPanel.add(optionsButton, gbc);\r\n\r\n        gbc.gridy = 2;\r\n        menuPanel.add(quitButton, gbc);\r\n\r\n\r\n        //Option Panel\r\n\r\n        // Initialize option buttons and values\r\n        optionButtons = new JButton[3];\r\n        optionValues = new int[]{1, 1, 1};\r\n\r\n        // Create the options menu components\r\n        optionsPanel = new JPanel();\r\n        optionsPanel.setLayout(new GridBagLayout());\r\n\r\n\r\n        //Options Buttons\r\n        JButton optionButton1 = createStyledButton(&quot;Screen Size: &quot; + windowSizeOptions[currentWindowSizeIndex], buttonWidth);\r\n        JButton optionButton2 = createStyledButton(&quot;Option 2: &quot; + optionValues[1], buttonWidth);\r\n        JButton optionButton3 = createStyledButton(&quot;Option 3: &quot; + optionValues[2], buttonWidth);\r\n        JButton optionBackButton = createStyledButton(&quot;Back&quot;, buttonWidth);\r\n\r\n\r\n        //adding buttons to panel\r\n        GridBagConstraints gbcOptions = new GridBagConstraints();\r\n        gbcOptions.fill = GridBagConstraints.HORIZONTAL;\r\n\r\n\r\n        gbcOptions.insets = new Insets(spacing, 0, spacing, 0);\r\n\r\n        gbcOptions.gridy = 0;\r\n        optionsPanel.add(optionButton1, gbcOptions);\r\n\r\n        gbcOptions.gridy = 1;\r\n        optionsPanel.add(optionButton2, gbcOptions);\r\n\r\n        gbcOptions.gridy = 2;\r\n        optionsPanel.add(optionButton3, gbcOptions);\r\n\r\n        gbcOptions.gridy = 3;\r\n        optionsPanel.add(optionBackButton, gbcOptions);\r\n\r\n\r\n\r\n        // Set the desired starting index for the window size options\r\n        currentWindowSizeIndex = 1;\r\n\r\n        // Update the text of the optionsButton\r\n        optionButton1.setText(&quot;Screen Size: &quot; + windowSizeOptions[currentWindowSizeIndex]);\r\n\r\n        // Update the main window size based on the selected option\r\n        setWindowSize(windowSizeOptions[currentWindowSizeIndex]);\r\n\r\n\r\n        //adjust button height\r\n        setButtonSize(menuPanel);\r\n        setButtonSize(optionsPanel);\r\n\r\n        //set background\r\n        menuPanel.setBackground(new Color(20,20,20));\r\n        optionsPanel.setBackground(new Color(20,20,20));\r\n\r\n        //Action Listeners\r\n\r\n        /.../\r\n    \r\n        // Show the main menu panel when the program starts\r\n        showMainMenu();\r\n\r\n\r\n    }\r\n\r\nThis method sets the window to size and calculates a few variables:\r\n\r\n    private void setWindowSize(String windowSizeOption) {\r\n        Dimension screenSize = Toolkit.getDefaultToolkit().getScreenSize();\r\n        int newWindowWidth;\r\n        int newWindowHeight;\r\n\r\n        if (windowSizeOption.equals(&quot;Small (1/4)&quot;)) {\r\n            newWindowWidth = (int) (screenSize.width * 0.25);\r\n            newWindowHeight = (int) (screenSize.height * 0.25);\r\n\r\n        } else if (windowSizeOption.equals(&quot;Medium (1/2)&quot;)) {\r\n            newWindowWidth = (int) (screenSize.width * 0.5);\r\n            newWindowHeight = (int) (screenSize.height * 0.5);\r\n        } else if (windowSizeOption.equals(&quot;Large (3/4)&quot;)) {\r\n            newWindowWidth = (int) (screenSize.width * 0.75);\r\n            newWindowHeight = (int) (screenSize.height * 0.75);\r\n        } else { // Fullscreen\r\n            newWindowWidth = screenSize.width;\r\n            newWindowHeight = screenSize.height;\r\n        }\r\n\r\n\r\n        //window size and content size\r\n        windowWidth = newWindowWidth;\r\n        windowHeight = newWindowHeight;\r\n        maxContentWidth = Math.min(newWindowWidth, newWindowHeight * 2);\r\n        maxContentHeight = Math.min(newWindowHeight, newWindowWidth * 2);\r\n\r\n        //Button sizes\r\n        buttonWidth = maxContentWidth / 3;\r\n        spacing = maxContentHeight /40;\r\n\r\n\r\n        // Set the new window size\r\n        setSize(newWindowWidth, newWindowHeight);\r\n\r\n        // Center the window on the screen\r\n        setLocationRelativeTo(null);\r\n    }\r\n\r\nHere is my method that changing the button sizes:\r\n\r\n    private void setButtonSize(JPanel panel) {\r\n        int numButtons = countButtons(panel);\r\n        int availableHeight = (int) (maxContentHeight * 0.8);\r\n        int totalSpacing = (numButtons - 1) * spacing;\r\n        int buttonHeight = (availableHeight - totalSpacing) / numButtons;\r\n\r\n        for (Component component : panel.getComponents()) {\r\n            if (component instanceof JButton) {\r\n                JButton button = (JButton) component;\r\n                button.setPreferredSize(new Dimension(buttonWidth, buttonHeight));\r\n            }\r\n        }\r\n\r\n    }\r\n\r\nHere is a method to return the number of buttons in the panel:\r\n\r\n    private int countButtons(JPanel panel) {\r\n        int numButtons = 0;\r\n        for (Component component : panel.getComponents()) {\r\n            if (component instanceof JButton) {\r\n                numButtons++;\r\n            }\r\n        }\r\n        return numButtons;\r\n    }\r\n\r\nHere is the method that stylized the buttons:\r\n\r\n    private JButton createStyledButton(String text, int width) {\r\n        JButton button = new JButton(text);\r\n        button.setBackground(new Color(5,5,5));\r\n        button.setForeground(Color.WHITE);\r\n        button.setPreferredSize(new Dimension(width, 50));\r\n        button.setBorder(BorderFactory.createLineBorder(Color.WHITE, 2));\r\n        button.setAlignmentX(Component.CENTER_ALIGNMENT);\r\n        button.setFocusable(false);\r\n        return button;\r\n    }\r\n\r\nHere is the ActionListener for the button that changes screen size (in the same method where the buttons get added):\r\n\r\n    optionButton1.addActionListener(new ActionListener() {\r\n            @Override\r\n            public void actionPerformed(ActionEvent e) {\r\n                // Cycle through the window size options\r\n                currentWindowSizeIndex = (currentWindowSizeIndex + 1) % windowSizeOptions.length;\r\n\r\n                // Update the text of the optionsButton\r\n                optionButton1.setText(&quot;Screen Size: &quot; + windowSizeOptions[currentWindowSizeIndex]);\r\n\r\n                // Update the main window size based on the selected option\r\n                setWindowSize(windowSizeOptions[currentWindowSizeIndex]);\r\n\r\n                //adjust button height\r\n                setButtonSize(menuPanel);\r\n                setButtonSize(optionsPanel);\r\n\r\n                revalidate();\r\n                repaint();\r\n\r\n            }\r\n        });\r\n\r\n\r\nAnd my methods to show the different panels:\r\n\r\n    private void showOptionsMenu() {\r\n        // Hide the main menu panel\r\n        homePanel.remove(menuPanel);\r\n\r\n        // Show the options panel\r\n        homePanel.add(optionsPanel, BorderLayout.CENTER);\r\n\r\n        // Refresh the options panel\r\n        homePanel.revalidate();\r\n        homePanel.repaint();\r\n    }\r\n\r\n\r\n\r\n    private void showMainMenu() {\r\n        // Remove the options menu panel from the main window\r\n        homePanel.remove(optionsPanel);\r\n\r\n        // Add the main menu panel back to the main window\r\n        homePanel.add(menuPanel, BorderLayout.CENTER);\r\n\r\n        // Refresh the main window to display the main menu\r\n        homePanel.revalidate();\r\n        homePanel.repaint();\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        SwingUtilities.invokeLater(() -&gt; {\r\n            MainMenuGUI mainMenu = new MainMenuGUI();\r\n            mainMenu.setVisible(true);\r\n        });\r\n    }\r\n\r\n---\r\n\r\n**What I have tried:**\r\n\r\nI have tried to change the Insets in the `setButtonSize` method:\r\n\r\n    GridBagConstraints gbcOptions = ((GridBagLayout) panel.getLayout()).getConstraints(panel);\r\n    gbcOptions.insets = new Insets(spacing, 0, spacing, 0);\r\n\r\nDoing this once for the panel and also tried doing it for every button in the for loop:\r\n\r\n    for (Component component : panel.getComponents()) {\r\n            if (component instanceof JButton) {\r\n                JButton button = (JButton) component;\r\n                button.setPreferredSize(new Dimension(buttonWidth, buttonHeight));\r\n\r\n                GridBagConstraints gbcOptions = ((GridBagLayout) panel.getLayout()).getConstraints(button);\r\n                gbcOptions.insets = new Insets(spacing, 0, spacing, 0);\r\n            }\r\n        }\r\n\r\n\r\nI tried to change it at the end of the ActionListener for the Screen Size button which is within the same method as the buttons are added.\r\n\r\nAny way I try it doesn&#39;t change from the initial value. If I want a bigger spacing I can set it and the button height is decreased but because I start at 1/2 screen size, when switching  to 1/4 the buttons get much smaller:\r\n\r\n[![Small buttons image][4]][4]\r\n\r\nI always put:\r\n\r\n    revalidate();\r\n    repaint();\r\n\r\nafter, and I also try to put the panel names in front but no difference.\r\n\r\nI have also tried to make the Insets accessible in the class:\r\n\r\n    private Insets inset = new Insets(0, 0, spacing, 0);\r\n\r\nAnd use this to change the spacings:\r\n\r\n    gbcOptions.insets = inset;\r\n\r\nBut I can&#39;t get it to actually change the spacing, the variable `spacing` does change but not the actual space between the buttons.\r\n\r\n---\r\n\r\nSo I&#39;d like to be able to change the spacing somehow, I&#39;d like to use the GridBagLayout as it has been the easiest to get the buttons to align to the center. But if there is an easier / better way to go about this I could use that instead, I&#39;m not completely set on using this layout, I just need it to function as I want it without too much trouble.\r\n\r\nAnd as mentioned above:\r\n\r\n&gt; I am trying to place the buttons in the center of the screen, vertically, and automatically set the button height so it leaves 10% free space on top and bottom. And spaces the buttons by a fraction of the screen, I currently use 1/40 as the spacing. Then the buttons fill the rest of the space.\r\n\r\n  [1]: https://i.stack.imgur.com/TfaVU.png\r\n  [2]: https://i.stack.imgur.com/rZ8Xp.png\r\n  [3]: https://i.stack.imgur.com/ukU1a.png\r\n  [4]: https://i.stack.imgur.com/T8xek.png","title":"Change Insets when changing screen size with Grid Bag Constraints","body":"<p>I have a program intended to be a start menu for a game. So far I have 3 JPanels: <code>homePanel</code>, <code>mainPanel</code> and <code>optionsPanel</code>. The 'homePanel' is a panel holding both menu and options panel.</p>\n<p><a href=\"https://i.stack.imgur.com/TfaVU.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/TfaVU.png\" alt=\"Home menu image\" /></a></p>\n<p>mainPanel has 3 buttons: <code>Start Game</code>, <code>Options</code>, and <code>Quit</code>. optionsPanel has 3 <code>optionsButton</code> 1 , 2 and 3 as well as a <code>backButton</code>.</p>\n<p><a href=\"https://i.stack.imgur.com/rZ8Xp.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/rZ8Xp.png\" alt=\"Option menu image\" /></a></p>\n<p>The first button changes the program window size between 4 different sizes. I use GridBagLayout to place the buttons because it has been the most consistent layout to align itself to the center of the screen.</p>\n<p>I am trying to place the buttons in the center of the screen, vertically, and automatically set the button height so it leaves 10% free space on top and bottom. And spaces the buttons by a fraction of the screen, I currently use 1/40 as the spacing. Then the buttons fill the rest of the space.</p>\n<p>This works when I set it up, placing the buttons. I use:</p>\n<pre><code>gbcOptions.insets = new Insets(spacing, 0, spacing, 0);\n</code></pre>\n<p>to set the spacing, but when I try to change the screen size the spacing doesn't change. I am able to correctly calculate the button height and the new spacing value. But the actual spacing between the buttons does not change. They are the same as the first time the buttons were added to the panel.</p>\n<p>Here the program is enlarged and the spacing between the buttons is too small:\n<a href=\"https://i.stack.imgur.com/ukU1a.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ukU1a.png\" alt=\"Large options image\" /></a></p>\n<hr />\n<p><strong>Methods:</strong></p>\n<p>Start of class:</p>\n<pre><code>public class MainMenuGUI extends JFrame {\n\nprivate JPanel homePanel;\nprivate JPanel menuPanel;\nprivate JPanel optionsPanel;\nprivate JButton[] optionButtons;\nprivate int[] optionValues;\nprivate int windowHeight;\nprivate int windowWidth;\nprivate int maxContentWidth;\nprivate int maxContentHeight;\nprivate int spacing;\n//window size options\nprivate String[] windowSizeOptions = {&quot;Small (1/4)&quot;, &quot;Medium (1/2)&quot;, &quot;Large (3/4)&quot;, &quot;Fullscreen&quot;};\nprivate int currentWindowSizeIndex = 0; // Index of the current window size option\n...\n</code></pre>\n<p>Here are my methods:</p>\n<p>Here is where I set everything up:</p>\n<pre><code>public MainMenuGUI() {\n    // Set up the main window properties\n    setTitle(&quot;Game Main Menu&quot;);\n    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n\n    //window size, calculate the maximum content size based on the window size\n    Dimension screenSize = Toolkit.getDefaultToolkit().getScreenSize();\n\n    //set up the window size with the method\n    //Calculate values based on window size\n    setWindowSize(windowSizeOptions[currentWindowSizeIndex]);\n\n    //Print out to se the screen size and max content sizes\n    System.out.println(&quot;window Width: &quot; + windowWidth + &quot;\\nWindow height: &quot; + windowHeight\n                    + &quot;\\nMaxContentWidth: &quot; + maxContentWidth + &quot;\\nMaxContentHeight: &quot; + maxContentHeight);\n\n    setResizable(false);\n    setUndecorated(true);\n    setSize(windowWidth, windowHeight);\n    setLocationRelativeTo(null); // Center the window on the screen\n\n\n    //homePanel holds any Panel outside the gamePanel\n    homePanel = new JPanel();\n    homePanel.setLayout(new BorderLayout());\n    homePanel.setBackground(new Color(20, 20, 20));\n    add(homePanel, BorderLayout.CENTER);\n\n\n    // Create the main menu components\n    menuPanel = new JPanel();\n    menuPanel.setLayout(new GridBagLayout());\n\n\n    // Buttons\n    JButton startButton = createStyledButton(&quot;Start Game&quot;, buttonWidth);\n    JButton optionsButton = createStyledButton(&quot;Options&quot;, buttonWidth);\n    JButton quitButton = createStyledButton(&quot;Quit&quot;, buttonWidth);\n\n\n    // Add buttons to the panel\n    GridBagConstraints gbc = new GridBagConstraints();\n    gbc.fill = GridBagConstraints.HORIZONTAL;\n    gbc.insets = new Insets(spacing, 0, spacing, 0);\n\n    gbc.gridy = 0;\n    menuPanel.add(startButton, gbc);\n\n    gbc.gridy = 1;\n    menuPanel.add(optionsButton, gbc);\n\n    gbc.gridy = 2;\n    menuPanel.add(quitButton, gbc);\n\n\n    //Option Panel\n\n    // Initialize option buttons and values\n    optionButtons = new JButton[3];\n    optionValues = new int[]{1, 1, 1};\n\n    // Create the options menu components\n    optionsPanel = new JPanel();\n    optionsPanel.setLayout(new GridBagLayout());\n\n\n    //Options Buttons\n    JButton optionButton1 = createStyledButton(&quot;Screen Size: &quot; + windowSizeOptions[currentWindowSizeIndex], buttonWidth);\n    JButton optionButton2 = createStyledButton(&quot;Option 2: &quot; + optionValues[1], buttonWidth);\n    JButton optionButton3 = createStyledButton(&quot;Option 3: &quot; + optionValues[2], buttonWidth);\n    JButton optionBackButton = createStyledButton(&quot;Back&quot;, buttonWidth);\n\n\n    //adding buttons to panel\n    GridBagConstraints gbcOptions = new GridBagConstraints();\n    gbcOptions.fill = GridBagConstraints.HORIZONTAL;\n\n\n    gbcOptions.insets = new Insets(spacing, 0, spacing, 0);\n\n    gbcOptions.gridy = 0;\n    optionsPanel.add(optionButton1, gbcOptions);\n\n    gbcOptions.gridy = 1;\n    optionsPanel.add(optionButton2, gbcOptions);\n\n    gbcOptions.gridy = 2;\n    optionsPanel.add(optionButton3, gbcOptions);\n\n    gbcOptions.gridy = 3;\n    optionsPanel.add(optionBackButton, gbcOptions);\n\n\n\n    // Set the desired starting index for the window size options\n    currentWindowSizeIndex = 1;\n\n    // Update the text of the optionsButton\n    optionButton1.setText(&quot;Screen Size: &quot; + windowSizeOptions[currentWindowSizeIndex]);\n\n    // Update the main window size based on the selected option\n    setWindowSize(windowSizeOptions[currentWindowSizeIndex]);\n\n\n    //adjust button height\n    setButtonSize(menuPanel);\n    setButtonSize(optionsPanel);\n\n    //set background\n    menuPanel.setBackground(new Color(20,20,20));\n    optionsPanel.setBackground(new Color(20,20,20));\n\n    //Action Listeners\n\n    /.../\n\n    // Show the main menu panel when the program starts\n    showMainMenu();\n\n\n}\n</code></pre>\n<p>This method sets the window to size and calculates a few variables:</p>\n<pre><code>private void setWindowSize(String windowSizeOption) {\n    Dimension screenSize = Toolkit.getDefaultToolkit().getScreenSize();\n    int newWindowWidth;\n    int newWindowHeight;\n\n    if (windowSizeOption.equals(&quot;Small (1/4)&quot;)) {\n        newWindowWidth = (int) (screenSize.width * 0.25);\n        newWindowHeight = (int) (screenSize.height * 0.25);\n\n    } else if (windowSizeOption.equals(&quot;Medium (1/2)&quot;)) {\n        newWindowWidth = (int) (screenSize.width * 0.5);\n        newWindowHeight = (int) (screenSize.height * 0.5);\n    } else if (windowSizeOption.equals(&quot;Large (3/4)&quot;)) {\n        newWindowWidth = (int) (screenSize.width * 0.75);\n        newWindowHeight = (int) (screenSize.height * 0.75);\n    } else { // Fullscreen\n        newWindowWidth = screenSize.width;\n        newWindowHeight = screenSize.height;\n    }\n\n\n    //window size and content size\n    windowWidth = newWindowWidth;\n    windowHeight = newWindowHeight;\n    maxContentWidth = Math.min(newWindowWidth, newWindowHeight * 2);\n    maxContentHeight = Math.min(newWindowHeight, newWindowWidth * 2);\n\n    //Button sizes\n    buttonWidth = maxContentWidth / 3;\n    spacing = maxContentHeight /40;\n\n\n    // Set the new window size\n    setSize(newWindowWidth, newWindowHeight);\n\n    // Center the window on the screen\n    setLocationRelativeTo(null);\n}\n</code></pre>\n<p>Here is my method that changing the button sizes:</p>\n<pre><code>private void setButtonSize(JPanel panel) {\n    int numButtons = countButtons(panel);\n    int availableHeight = (int) (maxContentHeight * 0.8);\n    int totalSpacing = (numButtons - 1) * spacing;\n    int buttonHeight = (availableHeight - totalSpacing) / numButtons;\n\n    for (Component component : panel.getComponents()) {\n        if (component instanceof JButton) {\n            JButton button = (JButton) component;\n            button.setPreferredSize(new Dimension(buttonWidth, buttonHeight));\n        }\n    }\n\n}\n</code></pre>\n<p>Here is a method to return the number of buttons in the panel:</p>\n<pre><code>private int countButtons(JPanel panel) {\n    int numButtons = 0;\n    for (Component component : panel.getComponents()) {\n        if (component instanceof JButton) {\n            numButtons++;\n        }\n    }\n    return numButtons;\n}\n</code></pre>\n<p>Here is the method that stylized the buttons:</p>\n<pre><code>private JButton createStyledButton(String text, int width) {\n    JButton button = new JButton(text);\n    button.setBackground(new Color(5,5,5));\n    button.setForeground(Color.WHITE);\n    button.setPreferredSize(new Dimension(width, 50));\n    button.setBorder(BorderFactory.createLineBorder(Color.WHITE, 2));\n    button.setAlignmentX(Component.CENTER_ALIGNMENT);\n    button.setFocusable(false);\n    return button;\n}\n</code></pre>\n<p>Here is the ActionListener for the button that changes screen size (in the same method where the buttons get added):</p>\n<pre><code>optionButton1.addActionListener(new ActionListener() {\n        @Override\n        public void actionPerformed(ActionEvent e) {\n            // Cycle through the window size options\n            currentWindowSizeIndex = (currentWindowSizeIndex + 1) % windowSizeOptions.length;\n\n            // Update the text of the optionsButton\n            optionButton1.setText(&quot;Screen Size: &quot; + windowSizeOptions[currentWindowSizeIndex]);\n\n            // Update the main window size based on the selected option\n            setWindowSize(windowSizeOptions[currentWindowSizeIndex]);\n\n            //adjust button height\n            setButtonSize(menuPanel);\n            setButtonSize(optionsPanel);\n\n            revalidate();\n            repaint();\n\n        }\n    });\n</code></pre>\n<p>And my methods to show the different panels:</p>\n<pre><code>private void showOptionsMenu() {\n    // Hide the main menu panel\n    homePanel.remove(menuPanel);\n\n    // Show the options panel\n    homePanel.add(optionsPanel, BorderLayout.CENTER);\n\n    // Refresh the options panel\n    homePanel.revalidate();\n    homePanel.repaint();\n}\n\n\n\nprivate void showMainMenu() {\n    // Remove the options menu panel from the main window\n    homePanel.remove(optionsPanel);\n\n    // Add the main menu panel back to the main window\n    homePanel.add(menuPanel, BorderLayout.CENTER);\n\n    // Refresh the main window to display the main menu\n    homePanel.revalidate();\n    homePanel.repaint();\n}\n\npublic static void main(String[] args) {\n    SwingUtilities.invokeLater(() -&gt; {\n        MainMenuGUI mainMenu = new MainMenuGUI();\n        mainMenu.setVisible(true);\n    });\n}\n</code></pre>\n<hr />\n<p><strong>What I have tried:</strong></p>\n<p>I have tried to change the Insets in the <code>setButtonSize</code> method:</p>\n<pre><code>GridBagConstraints gbcOptions = ((GridBagLayout) panel.getLayout()).getConstraints(panel);\ngbcOptions.insets = new Insets(spacing, 0, spacing, 0);\n</code></pre>\n<p>Doing this once for the panel and also tried doing it for every button in the for loop:</p>\n<pre><code>for (Component component : panel.getComponents()) {\n        if (component instanceof JButton) {\n            JButton button = (JButton) component;\n            button.setPreferredSize(new Dimension(buttonWidth, buttonHeight));\n\n            GridBagConstraints gbcOptions = ((GridBagLayout) panel.getLayout()).getConstraints(button);\n            gbcOptions.insets = new Insets(spacing, 0, spacing, 0);\n        }\n    }\n</code></pre>\n<p>I tried to change it at the end of the ActionListener for the Screen Size button which is within the same method as the buttons are added.</p>\n<p>Any way I try it doesn't change from the initial value. If I want a bigger spacing I can set it and the button height is decreased but because I start at 1/2 screen size, when switching  to 1/4 the buttons get much smaller:</p>\n<p><a href=\"https://i.stack.imgur.com/T8xek.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/T8xek.png\" alt=\"Small buttons image\" /></a></p>\n<p>I always put:</p>\n<pre><code>revalidate();\nrepaint();\n</code></pre>\n<p>after, and I also try to put the panel names in front but no difference.</p>\n<p>I have also tried to make the Insets accessible in the class:</p>\n<pre><code>private Insets inset = new Insets(0, 0, spacing, 0);\n</code></pre>\n<p>And use this to change the spacings:</p>\n<pre><code>gbcOptions.insets = inset;\n</code></pre>\n<p>But I can't get it to actually change the spacing, the variable <code>spacing</code> does change but not the actual space between the buttons.</p>\n<hr />\n<p>So I'd like to be able to change the spacing somehow, I'd like to use the GridBagLayout as it has been the easiest to get the buttons to align to the center. But if there is an easier / better way to go about this I could use that instead, I'm not completely set on using this layout, I just need it to function as I want it without too much trouble.</p>\n<p>And as mentioned above:</p>\n<blockquote>\n<p>I am trying to place the buttons in the center of the screen, vertically, and automatically set the button height so it leaves 10% free space on top and bottom. And spaces the buttons by a fraction of the screen, I currently use 1/40 as the spacing. Then the buttons fill the rest of the space.</p>\n</blockquote>\n"},{"tags":["java","serverless","sst"],"owner":{"account_id":19985487,"reputation":1,"user_id":14647698,"display_name":"Jida Liu"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":60,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690332118,"creation_date":1690332118,"question_id":76767308,"body_markdown":"I tried to develop SST application using Java11 runtime.\r\nBy refering to guides [Configuring Java runtime](https://docs.sst.dev/constructs/Function#configuring-java-runtime), I create a project using runtime of Java11, my stacks like\r\n```\r\nexport default {\r\n  config(_input) {\r\n    return {\r\n      name: &#39;my-sst-test2&#39;,\r\n      region: &#39;cn-northwest-1&#39;\r\n    };\r\n  },\r\n  stacks(app) {\r\n    app.setDefaultFunctionProps({\r\n      runtime: &quot;java11&quot;,\r\n    });\r\n    app.stack(function Stack({ stack }) {\r\n      const api = new Api(stack, &quot;api-java-test&quot;, {\r\n        routes: {\r\n          &quot;GET /&quot;: &quot;api.Handler::handleRequest&quot;,\r\n        },\r\n      });\r\n      stack.addOutputs({\r\n        ApiEndpoint: api.url,\r\n      });\r\n    });\r\n  },\r\n} satisfies SSTConfig;\r\n```\r\nAnd my handler implement in Java is like\r\n```java\r\npublic class Handler implements RequestHandler&lt;APIGatewayProxyRequestEvent, APIGatewayProxyResponseEvent&gt;{\r\n  @Override\r\n  public APIGatewayProxyResponseEvent handleRequest(APIGatewayProxyRequestEvent event, Context context)\r\n  {\r\n    APIGatewayProxyResponseEvent response = new APIGatewayProxyResponseEvent();\r\n    response.setStatusCode(200);\r\n    response.setBody(&quot;Hello, World! Received a request with id &quot; + event.getRequestContext().getRequestId());\r\n    return response;\r\n  }\r\n}\r\n```\r\nwhen I try to invoke lambda by requesting &quot;https://xxxxxxxxx.execute-api.cn-northwest-1.amazonaws.com.cn/&quot;, I got InaccessibleObjectException, error logs like\r\n```\r\n|  Invoked api.Handler::handleRequest\r\ncolors.js:6|  +4848ms Exception in thread &quot;main&quot;\r\ncolors.js:6|  +4850ms java.lang.Error: java.lang.RuntimeException: java.lang.reflect.InaccessibleObjectException: Unable to make field private final java.util.Map java.util.Collections$UnmodifiableMap.m accessible: module java.base does not &quot;opens java.util&quot; to unnamed module @433c675d\r\ncolors.js:6|  +4850ms \tat com.amazonaws.services.lambda.runtime.api.client.AWSLambda.startRuntime(AWSLambda.java:195)\r\ncolors.js:6|  +4851ms \tat com.amazonaws.services.lambda.runtime.api.client.AWSLambda.main(AWSLambda.java:188)\r\ncolors.js:6|  +4851ms Caused by: java.lang.RuntimeException: java.lang.reflect.InaccessibleObjectException: Unable to make field private final java.util.Map java.util.Collections$UnmodifiableMap.m accessible: module java.base does not &quot;opens java.util&quot; to unnamed module @433c675d\r\ncolors.js:6|  +4852ms \tat com.amazonaws.services.lambda.runtime.api.client.util.EnvWriter.&lt;init&gt;(EnvWriter.java:26)\r\ncolors.js:6|  +4852ms \tat com.amazonaws.services.lambda.runtime.api.client.AWSLambda.startRuntime(AWSLambda.java:210)\r\ncolors.js:6|  +4853ms \tat com.amazonaws.services.lambda.runtime.api.client.AWSLambda.startRuntime(AWSLambda.java:193)\r\ncolors.js:6|  +4853ms \t... 1 more\r\ncolors.js:6|  +4854ms Caused by: java.lang.reflect.InaccessibleObjectException: Unable to make field private final java.util.Map java.util.Collections$UnmodifiableMap.m accessible: module java.base does not &quot;opens java.util&quot; to unnamed module @433c675d\r\ncolors.js:6|  +4854ms \tat java.base/java.lang.reflect.AccessibleObject.checkCanSetAccessible(AccessibleObject.java:354)\r\ncolors.js:6|  +4854ms \tat java.base/java.lang.reflect.AccessibleObject.checkCanSetAccessible(AccessibleObject.java:297)\r\ncolors.js:6|  +4855ms \tat java.base/java.lang.reflect.Field.checkCanSetAccessible(Field.java:178)\r\ncolors.js:6|  +4855ms \tat java.base/java.lang.reflect.Field.setAccessible(Field.java:172)\r\ncolors.js:6|  +4855ms \tat com.amazonaws.services.lambda.runtime.api.client.util.EnvWriter.&lt;init&gt;(EnvWriter.java:21)\r\ncolors.js:6|  +4855ms \t... 3 more\r\n```\r\nafter searching google, I got solutions like described in &quot;[https://stackoverflow.com/questions/41265266/how-to-solve-inaccessibleobjectexception-unable-to-make-member-accessible-m]&quot;\r\nIt request to add vm optins &quot;java --add-opens java.base/java.lang=ALL-UNNAMED&quot; when running java application to allow all reflect operations, but I cannot find where to add vm options when running sst.\r\n\r\nIn &quot;sst/runtime/handlers/java.js/useJavaHandler&quot;, it seems sst accept extra options when running java application, but I cannot find where to configure it.\r\n```\r\nconst proc = spawn(`java`, [\r\n    `-cp`,\r\n    [\r\n        url.fileURLToPath(new URL(&quot;../../support/java-runtime/release/*&quot;, import.meta.url)),\r\n    ].join(os.platform() === &quot;win32&quot; ? &quot;;&quot; : &quot;:&quot;),\r\n    &quot;com.amazonaws.services.lambda.runtime.api.client.AWSLambda&quot;,\r\n    input.handler,\r\n], {\r\n    env: {\r\n        ...process.env,\r\n        ...input.environment,\r\n        IS_LOCAL: &quot;true&quot;,\r\n        AWS_LAMBDA_RUNTIME_API: `localhost:${server.port}/${input.workerID}`,\r\n    },\r\n    cwd: input.out,\r\n});\r\n```\r\n\r\nI cannot find where to add vm options when invoking SST application locally using Java runtime","title":"How to add vm options when using java runtime in SST?","body":"<p>I tried to develop SST application using Java11 runtime.\nBy refering to guides <a href=\"https://docs.sst.dev/constructs/Function#configuring-java-runtime\" rel=\"nofollow noreferrer\">Configuring Java runtime</a>, I create a project using runtime of Java11, my stacks like</p>\n<pre><code>export default {\n  config(_input) {\n    return {\n      name: 'my-sst-test2',\n      region: 'cn-northwest-1'\n    };\n  },\n  stacks(app) {\n    app.setDefaultFunctionProps({\n      runtime: &quot;java11&quot;,\n    });\n    app.stack(function Stack({ stack }) {\n      const api = new Api(stack, &quot;api-java-test&quot;, {\n        routes: {\n          &quot;GET /&quot;: &quot;api.Handler::handleRequest&quot;,\n        },\n      });\n      stack.addOutputs({\n        ApiEndpoint: api.url,\n      });\n    });\n  },\n} satisfies SSTConfig;\n</code></pre>\n<p>And my handler implement in Java is like</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Handler implements RequestHandler&lt;APIGatewayProxyRequestEvent, APIGatewayProxyResponseEvent&gt;{\n  @Override\n  public APIGatewayProxyResponseEvent handleRequest(APIGatewayProxyRequestEvent event, Context context)\n  {\n    APIGatewayProxyResponseEvent response = new APIGatewayProxyResponseEvent();\n    response.setStatusCode(200);\n    response.setBody(&quot;Hello, World! Received a request with id &quot; + event.getRequestContext().getRequestId());\n    return response;\n  }\n}\n</code></pre>\n<p>when I try to invoke lambda by requesting &quot;https://xxxxxxxxx.execute-api.cn-northwest-1.amazonaws.com.cn/&quot;, I got InaccessibleObjectException, error logs like</p>\n<pre><code>|  Invoked api.Handler::handleRequest\ncolors.js:6|  +4848ms Exception in thread &quot;main&quot;\ncolors.js:6|  +4850ms java.lang.Error: java.lang.RuntimeException: java.lang.reflect.InaccessibleObjectException: Unable to make field private final java.util.Map java.util.Collections$UnmodifiableMap.m accessible: module java.base does not &quot;opens java.util&quot; to unnamed module @433c675d\ncolors.js:6|  +4850ms   at com.amazonaws.services.lambda.runtime.api.client.AWSLambda.startRuntime(AWSLambda.java:195)\ncolors.js:6|  +4851ms   at com.amazonaws.services.lambda.runtime.api.client.AWSLambda.main(AWSLambda.java:188)\ncolors.js:6|  +4851ms Caused by: java.lang.RuntimeException: java.lang.reflect.InaccessibleObjectException: Unable to make field private final java.util.Map java.util.Collections$UnmodifiableMap.m accessible: module java.base does not &quot;opens java.util&quot; to unnamed module @433c675d\ncolors.js:6|  +4852ms   at com.amazonaws.services.lambda.runtime.api.client.util.EnvWriter.&lt;init&gt;(EnvWriter.java:26)\ncolors.js:6|  +4852ms   at com.amazonaws.services.lambda.runtime.api.client.AWSLambda.startRuntime(AWSLambda.java:210)\ncolors.js:6|  +4853ms   at com.amazonaws.services.lambda.runtime.api.client.AWSLambda.startRuntime(AWSLambda.java:193)\ncolors.js:6|  +4853ms   ... 1 more\ncolors.js:6|  +4854ms Caused by: java.lang.reflect.InaccessibleObjectException: Unable to make field private final java.util.Map java.util.Collections$UnmodifiableMap.m accessible: module java.base does not &quot;opens java.util&quot; to unnamed module @433c675d\ncolors.js:6|  +4854ms   at java.base/java.lang.reflect.AccessibleObject.checkCanSetAccessible(AccessibleObject.java:354)\ncolors.js:6|  +4854ms   at java.base/java.lang.reflect.AccessibleObject.checkCanSetAccessible(AccessibleObject.java:297)\ncolors.js:6|  +4855ms   at java.base/java.lang.reflect.Field.checkCanSetAccessible(Field.java:178)\ncolors.js:6|  +4855ms   at java.base/java.lang.reflect.Field.setAccessible(Field.java:172)\ncolors.js:6|  +4855ms   at com.amazonaws.services.lambda.runtime.api.client.util.EnvWriter.&lt;init&gt;(EnvWriter.java:21)\ncolors.js:6|  +4855ms   ... 3 more\n</code></pre>\n<p>after searching google, I got solutions like described in &quot;[https://stackoverflow.com/questions/41265266/how-to-solve-inaccessibleobjectexception-unable-to-make-member-accessible-m]&quot;\nIt request to add vm optins &quot;java --add-opens java.base/java.lang=ALL-UNNAMED&quot; when running java application to allow all reflect operations, but I cannot find where to add vm options when running sst.</p>\n<p>In &quot;sst/runtime/handlers/java.js/useJavaHandler&quot;, it seems sst accept extra options when running java application, but I cannot find where to configure it.</p>\n<pre><code>const proc = spawn(`java`, [\n    `-cp`,\n    [\n        url.fileURLToPath(new URL(&quot;../../support/java-runtime/release/*&quot;, import.meta.url)),\n    ].join(os.platform() === &quot;win32&quot; ? &quot;;&quot; : &quot;:&quot;),\n    &quot;com.amazonaws.services.lambda.runtime.api.client.AWSLambda&quot;,\n    input.handler,\n], {\n    env: {\n        ...process.env,\n        ...input.environment,\n        IS_LOCAL: &quot;true&quot;,\n        AWS_LAMBDA_RUNTIME_API: `localhost:${server.port}/${input.workerID}`,\n    },\n    cwd: input.out,\n});\n</code></pre>\n<p>I cannot find where to add vm options when invoking SST application locally using Java runtime</p>\n"},{"tags":["java","maven","weblogic"],"comments":[{"owner":{"account_id":328273,"reputation":14391,"user_id":651140,"display_name":"Andrzej Jozwik"},"score":0,"creation_date":1333435024,"post_id":9984904,"comment_id":12764522,"body_markdown":"Have you tried mvn -Pext weblogic:deploy?","body":"Have you tried mvn -Pext weblogic:deploy?"}],"answers":[{"tags":[],"owner":{"account_id":357146,"reputation":1563,"user_id":697114,"display_name":"Jeff West"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1690331300,"creation_date":1333461150,"answer_id":9994726,"question_id":9984904,"body_markdown":"It looks like you are not referring to the Oracle WebLogic Maven Plugin.  In the error you see this: org.codehaus.mojo:weblogic-maven-plugin:maven-plugin:3.9.3.  Perhaps you were trying the codehaus plugin and need to update your pom with the coordinates to the Oracle one that you installed.  For example:\r\n\r\n\r\n    groupId=com.oracle.weblogic\r\n    artifactId=weblogic-maven-plugin\r\n    version=10.3.4\r\n\r\n","title":"Cannot find weblogic maven plugin","body":"<p>It looks like you are not referring to the Oracle WebLogic Maven Plugin.  In the error you see this: org.codehaus.mojo:weblogic-maven-plugin:maven-plugin:3.9.3.  Perhaps you were trying the codehaus plugin and need to update your pom with the coordinates to the Oracle one that you installed.  For example:</p>\n<pre><code>groupId=com.oracle.weblogic\nartifactId=weblogic-maven-plugin\nversion=10.3.4\n</code></pre>\n"},{"comments":[{"owner":{"account_id":182820,"reputation":5625,"user_id":417791,"accept_rate":96,"display_name":"Wojciech Owczarczyk"},"score":0,"creation_date":1338905025,"post_id":10303240,"comment_id":14208420,"body_markdown":"I did that and afterwards I am having issues trying to call a web service from a JUnit test. There is an NPE Exception during WSDL Parsing. Any idea what can cause this behaviour?","body":"I did that and afterwards I am having issues trying to call a web service from a JUnit test. There is an NPE Exception during WSDL Parsing. Any idea what can cause this behaviour?"},{"owner":{"account_id":93208,"reputation":6939,"user_id":255139,"accept_rate":44,"display_name":"Kalpesh Soni"},"score":0,"creation_date":1399329101,"post_id":10303240,"comment_id":36007586,"body_markdown":"and finally sync push the oracle jars in your local repo C:\\share\\weblogic\\wls1212\\wlserver\\server\\lib&gt;mvn -Doracle-maven-sync.oracleHome=c:\\share\\weblogic\\wls1212\\ com.oracle.maven:oracle-maven-sync:push -X &gt;push.txt see http://docs.oracle.com/middleware/1212/wls/WLPRG/maven.htm","body":"and finally sync push the oracle jars in your local repo C:\\share\\weblogic\\wls1212\\wlserver\\server\\lib&gt;mvn -Doracle-maven-sync.oracleHome=c:\\share\\weblogic\\wls1212\\ com.oracle.maven:oracle-maven-sync:push -X &gt;push.txt see <a href=\"http://docs.oracle.com/middleware/1212/wls/WLPRG/maven.htm\" rel=\"nofollow noreferrer\">docs.oracle.com/middleware/1212/wls/WLPRG/maven.htm</a>"},{"owner":{"account_id":93208,"reputation":6939,"user_id":255139,"accept_rate":44,"display_name":"Kalpesh Soni"},"score":0,"creation_date":1399563347,"post_id":10303240,"comment_id":36125329,"body_markdown":"yes thats right, i added all steps as a separate answer","body":"yes thats right, i added all steps as a separate answer"}],"tags":[],"owner":{"account_id":400676,"reputation":463,"user_id":766778,"accept_rate":78,"display_name":"Dhawan Gayash"},"comment_count":3,"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1335289719,"creation_date":1335289719,"answer_id":10303240,"question_id":9984904,"body_markdown":"You need to check your settings.xml file. You need to add the following into your settings.xml \r\n   &lt;pluginGroups&gt;\r\n     &lt;!-- pluginGroup\r\n      | Specifies a further group identifier to use for plugin lookup.\r\n      --&gt;\r\n      &lt;pluginGroup&gt;com.oracle.weblogic&lt;/pluginGroup&gt;\r\n   &lt;/pluginGroups&gt;\r\n\r\nAlso you need to follow a two step process for installing the weblogic maven plugin jar. First use the jarbuilder tool for generating the uber jar. \r\n\r\n     java -jar wljarbuilder.jar -profile weblogic-maven-plugin\r\n\r\nThis command would create a 65MB jar named weblogic-maven-plugin jar. Now you need to provision your jar into the repo. Use the command and remove the pom.xml from the jar.\r\n    \r\n     jar xvf MW_HOME/wlserver_10.3/server/lib/weblogic-maven-plugin.jar META-INF/maven/com.oracle.weblogic/weblogic-maven-plugin/pom.xml\r\n     \r\n     cp MW_HOME/wlserver_10.3/server/lib/META-INF/maven/com.oracle.weblogic/weblogic-maven-plugin/pom.xml MW_HOME/wlserver_10.3/server/lib\r\n\r\nThe next step is most important. You need to be in the MW_HOME/wlserver_10.3/server/lib directory for this. \r\n\r\n     mvn install\r\n\r\nAnd then you need to do a ....\r\n\r\n     mvn install:install-file -Dfile=&quot;MW_HOME/wlserver_10.3/server/lib/weblogic-maven-plugin.jar -DpomFile=&quot;pom.xml&quot; \r\n\r\n\r\n&lt;a href=&quot;http://buttso.blogspot.com/2011/02/using-weblogic-prefix-with-weblogic.html&quot;&gt;weblogic goal prefix with weblogic maven plugins&lt;/a&gt;\r\n\r\n\r\n     \r\n","title":"Cannot find weblogic maven plugin","body":"<p>You need to check your settings.xml file. You need to add the following into your settings.xml \n   \n     \n      com.oracle.weblogic\n   </p>\n\n<p>Also you need to follow a two step process for installing the weblogic maven plugin jar. First use the jarbuilder tool for generating the uber jar. </p>\n\n<pre><code> java -jar wljarbuilder.jar -profile weblogic-maven-plugin\n</code></pre>\n\n<p>This command would create a 65MB jar named weblogic-maven-plugin jar. Now you need to provision your jar into the repo. Use the command and remove the pom.xml from the jar.</p>\n\n<pre><code> jar xvf MW_HOME/wlserver_10.3/server/lib/weblogic-maven-plugin.jar META-INF/maven/com.oracle.weblogic/weblogic-maven-plugin/pom.xml\n\n cp MW_HOME/wlserver_10.3/server/lib/META-INF/maven/com.oracle.weblogic/weblogic-maven-plugin/pom.xml MW_HOME/wlserver_10.3/server/lib\n</code></pre>\n\n<p>The next step is most important. You need to be in the MW_HOME/wlserver_10.3/server/lib directory for this. </p>\n\n<pre><code> mvn install\n</code></pre>\n\n<p>And then you need to do a ....</p>\n\n<pre><code> mvn install:install-file -Dfile=\"MW_HOME/wlserver_10.3/server/lib/weblogic-maven-plugin.jar -DpomFile=\"pom.xml\" \n</code></pre>\n\n<p><a href=\"http://buttso.blogspot.com/2011/02/using-weblogic-prefix-with-weblogic.html\" rel=\"noreferrer\">weblogic goal prefix with weblogic maven plugins</a></p>\n"},{"tags":[],"owner":{"account_id":93208,"reputation":6939,"user_id":255139,"accept_rate":44,"display_name":"Kalpesh Soni"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1447103061,"creation_date":1399563316,"answer_id":23546274,"question_id":9984904,"body_markdown":"this is what i did for weblogic 12c\r\n\r\nThis basically\r\n\r\n - Builds client jars\r\n - Builds oralce maven plugin jar\r\n - Installs them in local repo\r\n - Then uses the sync plugin to push tons of oracle jars in local repo - including ejb, jsf, jpa, weblogic 200+ jars\r\n\r\nSee\r\nhttp://docs.oracle.com/middleware/1212/core/MAVEN/config_maven.htm\r\nhttp://docs.oracle.com/middleware/1212/wls/WLPRG/maven.htm\r\n\r\nif you a developer using zip installation follow these instruction to install weblogic zip\r\n\r\nhttp://www.oracle.com/webfolder/technetwork/tutorials/obe/java/wls_12c_netbeans_install/wls_12c_netbeans_install.html\r\n\r\nclean /home/oracle/.m2/repository dir\r\n\r\n    cd /home/oracle/wls12120/wlserver/server/lib\r\n   \r\n    cp weblogic.jar weblogic-classes.jar\r\n    java -jar wljarbuilder.jar -profile weblogic-maven-plugin\r\n    mvn install:install-file -Dfile=weblogic-maven-plugin.jar -DpomFile=pom.xml\r\n    mvn install\r\n    cd /home/oracle/wls12120/oracle_common/plugins/maven/com/oracle/maven/oracle-maven-sync/12.1.2\r\n    mvn install:install-file -DpomFile=oracle-maven-sync.12.1.2.pom -Dfile=oracle-maven-sync.12.1.2.jar\r\n    mvn com.oracle.maven:oracle-maven-sync:push  -Doracle-maven-sync.oracleHome=/home/oracle/wls12120  -Doracle-maven-sync.testingOnly=false -X\r\n\r\n\r\nFor windows I wrote this script that you can run from home dir\r\ntested in 12.1.2\r\n\r\n\tcls\r\n\techo about to delete %USERPROFILE%\\.m2\\repository\r\n\tpause\r\n\tdel /Q/F %USERPROFILE%\\.m2\\repository\r\n\r\n\tset WL_HOME=%~dp0\r\n\tset ORACLE_HOME=%~dp0\r\n\tset WLV=12.1.2\r\n\r\n\r\n\tset w\r\n\r\n\tset M2_HOME=%WL_HOME%\\oracle_common\\modules\\org.apache.maven_3.0.4\r\n\r\n\tsetlocal\r\n\tpushd\r\n\tcd %WL_HOME%\\wlserver\\server\\lib\r\n\tcp weblogic.jar weblogic-classes.jar\r\n\tcall java -jar wljarbuilder.jar -profile weblogic-maven-plugin\r\n\tcall mvn install:install-file -Dfile=weblogic-maven-plugin.jar -DpomFile=pom.xml\r\n\techo on\r\n\tcall mvn install\r\n\r\n\tpause\r\n\r\n\techo on\r\n\tcd %WL_HOME%\\oracle_common\\plugins\\maven\\com\\oracle\\maven\\oracle-maven-sync\\%WLV%\r\n\techo on\r\n\tcall mvn install:install-file -DpomFile=oracle-maven-sync.%WLV%.pom -Dfile=oracle-maven-sync.%WLV%.jar\r\n\techo on\r\n\tcall mvn com.oracle.maven:oracle-maven-sync:push  -Doracle-maven-sync.oracleHome=%WL_HOME% -Doracle-maven-sync.testingOnly=false -X\r\n\r\n\tpopd\r\n","title":"Cannot find weblogic maven plugin","body":"<p>this is what i did for weblogic 12c</p>\n\n<p>This basically</p>\n\n<ul>\n<li>Builds client jars</li>\n<li>Builds oralce maven plugin jar</li>\n<li>Installs them in local repo</li>\n<li>Then uses the sync plugin to push tons of oracle jars in local repo - including ejb, jsf, jpa, weblogic 200+ jars</li>\n</ul>\n\n<p>See\n<a href=\"http://docs.oracle.com/middleware/1212/core/MAVEN/config_maven.htm\" rel=\"nofollow\">http://docs.oracle.com/middleware/1212/core/MAVEN/config_maven.htm</a>\n<a href=\"http://docs.oracle.com/middleware/1212/wls/WLPRG/maven.htm\" rel=\"nofollow\">http://docs.oracle.com/middleware/1212/wls/WLPRG/maven.htm</a></p>\n\n<p>if you a developer using zip installation follow these instruction to install weblogic zip</p>\n\n<p><a href=\"http://www.oracle.com/webfolder/technetwork/tutorials/obe/java/wls_12c_netbeans_install/wls_12c_netbeans_install.html\" rel=\"nofollow\">http://www.oracle.com/webfolder/technetwork/tutorials/obe/java/wls_12c_netbeans_install/wls_12c_netbeans_install.html</a></p>\n\n<p>clean /home/oracle/.m2/repository dir</p>\n\n<pre><code>cd /home/oracle/wls12120/wlserver/server/lib\n\ncp weblogic.jar weblogic-classes.jar\njava -jar wljarbuilder.jar -profile weblogic-maven-plugin\nmvn install:install-file -Dfile=weblogic-maven-plugin.jar -DpomFile=pom.xml\nmvn install\ncd /home/oracle/wls12120/oracle_common/plugins/maven/com/oracle/maven/oracle-maven-sync/12.1.2\nmvn install:install-file -DpomFile=oracle-maven-sync.12.1.2.pom -Dfile=oracle-maven-sync.12.1.2.jar\nmvn com.oracle.maven:oracle-maven-sync:push  -Doracle-maven-sync.oracleHome=/home/oracle/wls12120  -Doracle-maven-sync.testingOnly=false -X\n</code></pre>\n\n<p>For windows I wrote this script that you can run from home dir\ntested in 12.1.2</p>\n\n<pre><code>cls\necho about to delete %USERPROFILE%\\.m2\\repository\npause\ndel /Q/F %USERPROFILE%\\.m2\\repository\n\nset WL_HOME=%~dp0\nset ORACLE_HOME=%~dp0\nset WLV=12.1.2\n\n\nset w\n\nset M2_HOME=%WL_HOME%\\oracle_common\\modules\\org.apache.maven_3.0.4\n\nsetlocal\npushd\ncd %WL_HOME%\\wlserver\\server\\lib\ncp weblogic.jar weblogic-classes.jar\ncall java -jar wljarbuilder.jar -profile weblogic-maven-plugin\ncall mvn install:install-file -Dfile=weblogic-maven-plugin.jar -DpomFile=pom.xml\necho on\ncall mvn install\n\npause\n\necho on\ncd %WL_HOME%\\oracle_common\\plugins\\maven\\com\\oracle\\maven\\oracle-maven-sync\\%WLV%\necho on\ncall mvn install:install-file -DpomFile=oracle-maven-sync.%WLV%.pom -Dfile=oracle-maven-sync.%WLV%.jar\necho on\ncall mvn com.oracle.maven:oracle-maven-sync:push  -Doracle-maven-sync.oracleHome=%WL_HOME% -Doracle-maven-sync.testingOnly=false -X\n\npopd\n</code></pre>\n"},{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":1,"creation_date":1690610286,"post_id":76765189,"comment_id":135380453,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/76765189/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":29089683,"reputation":1,"user_id":22283856,"display_name":"Indra"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690305966,"creation_date":1690305966,"answer_id":76765189,"question_id":9984904,"body_markdown":"mvn -X com.oracle.maven:oracle-maven-sync:push -DoracleHome=%ORACLE_HOME% -Doracle-maven-sync.testingOnly=false","title":"Cannot find weblogic maven plugin","body":"<p>mvn -X com.oracle.maven:oracle-maven-sync:push -DoracleHome=%ORACLE_HOME% -Doracle-maven-sync.testingOnly=false</p>\n"}],"owner":{"account_id":191280,"reputation":15745,"user_id":431769,"accept_rate":78,"display_name":"hudi"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":12527,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":10303240,"answer_count":4,"score":2,"last_activity_date":1690331300,"creation_date":1333407006,"question_id":9984904,"body_markdown":"I follow this tutorial to install weblogic plugin:\r\nhttp://docs.oracle.com/cd/E21764_01/web.1111/e13702/maven_deployer.htm\r\nand now I can see this jar in my local repository\r\nbut when I run mvn weblogic:deploy I have still this error:\r\n\r\n    No versions are present in the repository for the artifact with a range [9.0,11.0)\r\n      weblogic:weblogic:jar:null\r\n    \r\n    from the specified remote repositories:\r\n      central (http://repo1.maven.org/maven2),\r\n      codehaus.org (http://snapshots.repository.codehaus.org)\r\n    \r\n    Path to dependency: \r\n    \t1) org.codehaus.mojo:weblogic-maven-plugin:maven-plugin:3.9.3\r\n\r\n\r\nmaven setting:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;settings&gt;\r\n        &lt;localRepository&gt;/path...&lt;/localRepository&gt;\r\n        &lt;profiles&gt;\r\n            &lt;profile&gt;\r\n                &lt;id&gt;ext&lt;/id&gt;\r\n                &lt;repositories&gt;\r\n                    &lt;repository&gt;\r\n                        &lt;id&gt;central&lt;/id&gt;\r\n                        &lt;url&gt;http://repo1.maven.org/maven2&lt;/url&gt;\r\n                    &lt;/repository&gt;\r\n                    &lt;repository&gt;\r\n                        &lt;id&gt;java.net&lt;/id&gt;\r\n                        &lt;url&gt;http://download.java.net/maven/2&lt;/url&gt;\r\n                    &lt;/repository&gt;\r\n                    &lt;repository&gt;\r\n                        &lt;id&gt;maven2-repository.dev.java.net&lt;/id&gt;\r\n                        &lt;url&gt;http://download.java.net/maven/2/&lt;/url&gt;\r\n                    &lt;/repository&gt;\r\n                    &lt;repository&gt;\r\n                        &lt;id&gt;Mirrors.ibiblio.org&lt;/id&gt;\r\n                        &lt;url&gt;http://mirrors.ibiblio.org/pub/mirrors/maven2/&lt;/url&gt;\r\n                    &lt;/repository&gt;\r\n                    &lt;repository&gt;\r\n                        &lt;id&gt;mojo-executor-repository&lt;/id&gt;\r\n                        &lt;url&gt;http://mojo-executor.googlecode.com/svn/repo/&lt;/url&gt;\r\n                    &lt;/repository&gt;\r\n                    &lt;repository&gt;\r\n                        &lt;id&gt;spring-maven-milestone&lt;/id&gt;\r\n                        &lt;name&gt;Springframework Maven Repository&lt;/name&gt;\r\n                        &lt;url&gt;http://maven.springframework.org/milestone&lt;/url&gt;\r\n                    &lt;/repository&gt;\r\n                &lt;/repositories&gt;\r\n                &lt;pluginRepositories&gt;\r\n                    &lt;pluginRepository&gt;\r\n                        &lt;id&gt;java.net&lt;/id&gt;\r\n                        &lt;name&gt;Java.net Repository for Maven2&lt;/name&gt;\r\n                        &lt;url&gt;http://download.java.net/maven/1/&lt;/url&gt;\r\n                        &lt;layout&gt;legacy&lt;/layout&gt;\r\n                    &lt;/pluginRepository&gt;\r\n                    &lt;pluginRepository&gt;\r\n                        &lt;id&gt;eviwarePluginRepository&lt;/id&gt;\r\n                        &lt;url&gt;http://www.eviware.com/repository/maven2/&lt;/url&gt;\r\n                    &lt;/pluginRepository&gt;\r\n                &lt;/pluginRepositories&gt;\r\n            &lt;/profile&gt;\r\n        &lt;/profiles&gt;\r\n&lt;/settings&gt;\r\n\r\n","title":"Cannot find weblogic maven plugin","body":"<p>I follow this tutorial to install weblogic plugin:\n<a href=\"http://docs.oracle.com/cd/E21764_01/web.1111/e13702/maven_deployer.htm\" rel=\"nofollow\">http://docs.oracle.com/cd/E21764_01/web.1111/e13702/maven_deployer.htm</a>\nand now I can see this jar in my local repository\nbut when I run mvn weblogic:deploy I have still this error:</p>\n\n<pre><code>No versions are present in the repository for the artifact with a range [9.0,11.0)\n  weblogic:weblogic:jar:null\n\nfrom the specified remote repositories:\n  central (http://repo1.maven.org/maven2),\n  codehaus.org (http://snapshots.repository.codehaus.org)\n\nPath to dependency: \n    1) org.codehaus.mojo:weblogic-maven-plugin:maven-plugin:3.9.3\n</code></pre>\n\n<p>maven setting:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;settings&gt;\n    &lt;localRepository&gt;/path...&lt;/localRepository&gt;\n    &lt;profiles&gt;\n        &lt;profile&gt;\n            &lt;id&gt;ext&lt;/id&gt;\n            &lt;repositories&gt;\n                &lt;repository&gt;\n                    &lt;id&gt;central&lt;/id&gt;\n                    &lt;url&gt;http://repo1.maven.org/maven2&lt;/url&gt;\n                &lt;/repository&gt;\n                &lt;repository&gt;\n                    &lt;id&gt;java.net&lt;/id&gt;\n                    &lt;url&gt;http://download.java.net/maven/2&lt;/url&gt;\n                &lt;/repository&gt;\n                &lt;repository&gt;\n                    &lt;id&gt;maven2-repository.dev.java.net&lt;/id&gt;\n                    &lt;url&gt;http://download.java.net/maven/2/&lt;/url&gt;\n                &lt;/repository&gt;\n                &lt;repository&gt;\n                    &lt;id&gt;Mirrors.ibiblio.org&lt;/id&gt;\n                    &lt;url&gt;http://mirrors.ibiblio.org/pub/mirrors/maven2/&lt;/url&gt;\n                &lt;/repository&gt;\n                &lt;repository&gt;\n                    &lt;id&gt;mojo-executor-repository&lt;/id&gt;\n                    &lt;url&gt;http://mojo-executor.googlecode.com/svn/repo/&lt;/url&gt;\n                &lt;/repository&gt;\n                &lt;repository&gt;\n                    &lt;id&gt;spring-maven-milestone&lt;/id&gt;\n                    &lt;name&gt;Springframework Maven Repository&lt;/name&gt;\n                    &lt;url&gt;http://maven.springframework.org/milestone&lt;/url&gt;\n                &lt;/repository&gt;\n            &lt;/repositories&gt;\n            &lt;pluginRepositories&gt;\n                &lt;pluginRepository&gt;\n                    &lt;id&gt;java.net&lt;/id&gt;\n                    &lt;name&gt;Java.net Repository for Maven2&lt;/name&gt;\n                    &lt;url&gt;http://download.java.net/maven/1/&lt;/url&gt;\n                    &lt;layout&gt;legacy&lt;/layout&gt;\n                &lt;/pluginRepository&gt;\n                &lt;pluginRepository&gt;\n                    &lt;id&gt;eviwarePluginRepository&lt;/id&gt;\n                    &lt;url&gt;http://www.eviware.com/repository/maven2/&lt;/url&gt;\n                &lt;/pluginRepository&gt;\n            &lt;/pluginRepositories&gt;\n        &lt;/profile&gt;\n    &lt;/profiles&gt;\n</code></pre>\n\n<p></p>\n"},{"tags":["python","java","deep-learning","djl"],"owner":{"account_id":27896473,"reputation":13,"user_id":21301661,"display_name":"frogfromflow"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1690328870,"creation_date":1689682413,"question_id":76712665,"body_markdown":"I need the use pre-trained model of DialoGpt but with Java. Could you provide me a code sample. It&#39;s not necessary to use only DJL, you can use every Java-written library.\r\n\r\nI&#39;ve tried to copy Python code to Java according to the code sample at the end of the page: https://huggingface.co/microsoft/DialoGPT-large \r\nbut I don&#39;t know what to start with.\r\n\r\nHere&#39;s the code (you can also find it at the end of the link above):\r\n\r\n``` python\r\nfrom transformers import AutoModelForCausalLM, AutoTokenizer\r\nimport torch\r\n\r\n\r\ntokenizer = AutoTokenizer.from_pretrained(&quot;microsoft/DialoGPT-large&quot;)\r\nmodel = AutoModelForCausalLM.from_pretrained(&quot;microsoft/DialoGPT-large&quot;)\r\n\r\n# Let&#39;s chat for 5 lines\r\nfor step in range(5):\r\n    # encode the new user input, add the eos_token and return a tensor in Pytorch\r\n    new_user_input_ids = tokenizer.encode(input(&quot;&gt;&gt; User:&quot;) + tokenizer.eos_token, return_tensors=&#39;pt&#39;)\r\n\r\n    # append the new user input tokens to the chat history\r\n    bot_input_ids = torch.cat([chat_history_ids, new_user_input_ids], dim=-1) if step &gt; 0 else new_user_input_ids\r\n\r\n    # generated a response while limiting the total chat history to 1000 tokens, \r\n    chat_history_ids = model.generate(bot_input_ids, max_length=1000, pad_token_id=tokenizer.eos_token_id)\r\n\r\n    # pretty print last ouput tokens from bot\r\n    print(&quot;DialoGPT: {}&quot;.format(tokenizer.decode(chat_history_ids[:, bot_input_ids.shape[-1]:][0], skip_special_tokens=True)))\r\n```","title":"How to use DialoGpt with DJL","body":"<p>I need the use pre-trained model of DialoGpt but with Java. Could you provide me a code sample. It's not necessary to use only DJL, you can use every Java-written library.</p>\n<p>I've tried to copy Python code to Java according to the code sample at the end of the page: <a href=\"https://huggingface.co/microsoft/DialoGPT-large\" rel=\"nofollow noreferrer\">https://huggingface.co/microsoft/DialoGPT-large</a>\nbut I don't know what to start with.</p>\n<p>Here's the code (you can also find it at the end of the link above):</p>\n<pre class=\"lang-py prettyprint-override\"><code>from transformers import AutoModelForCausalLM, AutoTokenizer\nimport torch\n\n\ntokenizer = AutoTokenizer.from_pretrained(&quot;microsoft/DialoGPT-large&quot;)\nmodel = AutoModelForCausalLM.from_pretrained(&quot;microsoft/DialoGPT-large&quot;)\n\n# Let's chat for 5 lines\nfor step in range(5):\n    # encode the new user input, add the eos_token and return a tensor in Pytorch\n    new_user_input_ids = tokenizer.encode(input(&quot;&gt;&gt; User:&quot;) + tokenizer.eos_token, return_tensors='pt')\n\n    # append the new user input tokens to the chat history\n    bot_input_ids = torch.cat([chat_history_ids, new_user_input_ids], dim=-1) if step &gt; 0 else new_user_input_ids\n\n    # generated a response while limiting the total chat history to 1000 tokens, \n    chat_history_ids = model.generate(bot_input_ids, max_length=1000, pad_token_id=tokenizer.eos_token_id)\n\n    # pretty print last ouput tokens from bot\n    print(&quot;DialoGPT: {}&quot;.format(tokenizer.decode(chat_history_ids[:, bot_input_ids.shape[-1]:][0], skip_special_tokens=True)))\n</code></pre>\n"},{"tags":["java","swing","awt","jtree","treecellrenderer"],"comments":[{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":1,"creation_date":1690168419,"post_id":76751073,"comment_id":135310635,"body_markdown":"If you&#39;re going to modify that state of the children based on updates to the parent, then you&#39;re going to need to generate appropriate tree events","body":"If you&#39;re going to modify that state of the children based on updates to the parent, then you&#39;re going to need to generate appropriate tree events"},{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":1,"creation_date":1690168661,"post_id":76751073,"comment_id":135310655,"body_markdown":"I would look to make use of a custom `TreeModel`, as this is going to give you more control and information","body":"I would look to make use of a custom <code>TreeModel</code>, as this is going to give you more control and information"},{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":1,"creation_date":1690169606,"post_id":76751073,"comment_id":135310719,"body_markdown":"I would also spend some time looking over the `TreeModel#valueForPathChanged` method, as this would most likely be the place you want to update the child objects and generate the appropriate tree events ... and no, I don&#39;t have example, I&#39;ve just been reading","body":"I would also spend some time looking over the <code>TreeModel#valueForPathChanged</code> method, as this would most likely be the place you want to update the child objects and generate the appropriate tree events ... and no, I don&#39;t have example, I&#39;ve just been reading"}],"answers":[{"comments":[{"owner":{"account_id":1810821,"reputation":475,"user_id":1646928,"accept_rate":71,"display_name":"JamesB"},"score":0,"creation_date":1690259361,"post_id":76751395,"comment_id":135324504,"body_markdown":"Thanks for your code, it really helped because now when I click CheckBox father is working, clicking any last son checkbox getting:\n `Exception in thread &quot;AWT-EventQueue-0&quot; java.lang.IllegalArgumentException: path in TreePath must be non null and not empty.` \n\nfrom line 111:\n\n`fireTreeNodesChanged(this, model.getPaths(), model.getIndicies(), model.getChildren());`\n\nNote: Changed `main class` to instantiate `new MainFrame();`","body":"Thanks for your code, it really helped because now when I click CheckBox father is working, clicking any last son checkbox getting:  <code>Exception in thread &quot;AWT-EventQueue-0&quot; java.lang.IllegalArgumentException: path in TreePath must be non null and not empty.</code>   from line 111:  <code>fireTreeNodesChanged(this, model.getPaths(), model.getIndicies(), model.getChildren());</code>  Note: Changed <code>main class</code> to instantiate <code>new MainFrame();</code>"},{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":1,"creation_date":1690259730,"post_id":76751395,"comment_id":135324534,"body_markdown":"Fixed..........","body":"Fixed.........."},{"owner":{"account_id":1810821,"reputation":475,"user_id":1646928,"accept_rate":71,"display_name":"JamesB"},"score":0,"creation_date":1690298310,"post_id":76751395,"comment_id":135332251,"body_markdown":"Thanks, this error disappeared, main checkbox works like a charm, still one issue in the children ones:\nhttps://s11.gifyu.com/images/ScpBX.gif","body":"Thanks, this error disappeared, main checkbox works like a charm, still one issue in the children ones: <a href=\"https://s11.gifyu.com/images/ScpBX.gif\" rel=\"nofollow noreferrer\">s11.gifyu.com/images/ScpBX.gif</a>"},{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1690321794,"post_id":76751395,"comment_id":135336705,"body_markdown":"Seems to be working for me","body":"Seems to be working for me"}],"tags":[],"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"comment_count":4,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1690328820,"creation_date":1690172651,"answer_id":76751395,"question_id":76751073,"body_markdown":"I&#39;m not going to try and fix your code, it&#39;s moving in the wrong direction for what you seem to be trying to achieve, instead, I&#39;ve modified [this example](https://stackoverflow.com/questions/31375773/how-do-you-make-components-of-jpanel-as-a-node-in-jtree-usable/31376208#31376208) to add support for updating the child nodes when the parent node state changes.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n    import java.awt.Component;\r\n    import java.awt.EventQueue;\r\n    import java.awt.event.ActionEvent;\r\n    import java.awt.event.ActionListener;\r\n    import java.util.ArrayList;\r\n    import java.util.List;\r\n    import javax.swing.AbstractCellEditor;\r\n    import javax.swing.JCheckBox;\r\n    import javax.swing.JFrame;\r\n    import javax.swing.JScrollPane;\r\n    import javax.swing.JTree;\r\n    import javax.swing.UIManager;\r\n    import javax.swing.tree.DefaultMutableTreeNode;\r\n    import javax.swing.tree.DefaultTreeModel;\r\n    import javax.swing.tree.TreeCellEditor;\r\n    import javax.swing.tree.TreeCellRenderer;\r\n    import javax.swing.tree.TreeNode;\r\n    import javax.swing.tree.TreePath;\r\n\r\n    public class Main {\r\n\r\n        public static void main(String[] args) {\r\n            new Main();\r\n        }\r\n\r\n        public Main() {\r\n            EventQueue.invokeLater(new Runnable() {\r\n                @Override\r\n                public void run() {\r\n                    JTree tree = createTree();\r\n                    tree.setToggleClickCount(0);\r\n                    tree.setCellRenderer(new StateRenderer());\r\n                    tree.setCellEditor(new StateEditor());\r\n                    tree.setEditable(true);\r\n\r\n                    JFrame f = new JFrame();\r\n                    f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n                    f.add(new JScrollPane(tree));\r\n\r\n                    f.pack();\r\n                    f.setLocationRelativeTo(null);\r\n                    f.setVisible(true);\r\n                }\r\n            });\r\n        }\r\n\r\n        private JTree createTree() {\r\n            int children = 4;\r\n            int grandChildren = 2;\r\n            DefaultMutableTreeNode root = new DefaultMutableTreeNode(new State(&quot;Films&quot;, false));\r\n            DefaultMutableTreeNode node;\r\n\r\n            String[] cat = {&quot;Sci-Fi&quot;, &quot;Fantasy&quot;, &quot;Action&quot;, &quot;Comedy&quot;};\r\n            String[][] films = {\r\n                {&quot;Star Wars&quot;, &quot;Star Trek&quot;},\r\n                {&quot;Lord of the Rings&quot;, &quot;Conan&quot;},\r\n                {&quot;Terminator&quot;, &quot;Transformers&quot;},\r\n                {&quot;Cheaper by the Doze&quot;, &quot;Father of the Bride&quot;}\r\n            };\r\n            for (int j = 0; j &lt; children; j++) {\r\n                node = new DefaultMutableTreeNode(new State(cat[j], false));\r\n                root.add(node);\r\n                for (int k = 0; k &lt; grandChildren; k++) {\r\n                    node.add(new DefaultMutableTreeNode(new State(films[j][k], false)));\r\n                }\r\n            }\r\n            TestModel model = new TestModel(root);\r\n            return new JTree(model);\r\n        }\r\n\r\n        public class State {\r\n\r\n            private String text;\r\n            private boolean selected;\r\n\r\n            public State(String text, boolean selected) {\r\n                this.text = text;\r\n                this.selected = selected;\r\n            }\r\n\r\n            public String getText() {\r\n                return text;\r\n            }\r\n\r\n            public boolean isSelected() {\r\n                return selected;\r\n            }\r\n\r\n            public void setSelected(boolean selected) {\r\n                this.selected = selected;\r\n            }\r\n\r\n        }\r\n\r\n        public class StateEditor extends AbstractCellEditor implements TreeCellEditor {\r\n\r\n            //JPanel panel;\r\n            private JCheckBox checkBox;\r\n\r\n            private State editorValue;\r\n\r\n            public StateEditor() {\r\n                checkBox = new JCheckBox();\r\n                checkBox.setOpaque(false);\r\n                // This seems to be important :/\r\n                checkBox.addActionListener(new ActionListener() {\r\n                    @Override\r\n                    public void actionPerformed(ActionEvent e) {\r\n                        stopCellEditing();\r\n                    }\r\n                });\r\n            }\r\n\r\n            @Override\r\n            public Object getCellEditorValue() {\r\n                editorValue.setSelected(checkBox.isSelected());\r\n                return editorValue;\r\n            }\r\n\r\n            @Override\r\n            public Component getTreeCellEditorComponent(JTree tree, Object value, boolean isSelected, boolean expanded, boolean leaf, int row) {\r\n                if (value instanceof DefaultMutableTreeNode) {\r\n                    DefaultMutableTreeNode node = (DefaultMutableTreeNode) value;\r\n                    State state = (State) node.getUserObject();\r\n                    editorValue = state;\r\n                    checkBox.setText(state.getText());\r\n                    checkBox.setSelected(state.isSelected());\r\n                } else {\r\n                    checkBox.setText(&quot;??&quot;);\r\n                    checkBox.setSelected(false);\r\n                }\r\n\r\n                return checkBox;\r\n\r\n            }\r\n\r\n        }\r\n\r\n        public class StateRenderer implements TreeCellRenderer {\r\n\r\n            private JCheckBox checkBox;\r\n\r\n            public StateRenderer() {\r\n                checkBox = new JCheckBox();\r\n                checkBox.setOpaque(false);\r\n            }\r\n\r\n            @Override\r\n            public Component getTreeCellRendererComponent(JTree tree, Object value, boolean selected, boolean expanded, boolean leaf, int row, boolean hasFocus) {\r\n                if (value instanceof DefaultMutableTreeNode) {\r\n                    DefaultMutableTreeNode node = (DefaultMutableTreeNode) value;\r\n                    State state = (State) node.getUserObject();\r\n                    checkBox.setText(state.getText());\r\n                    checkBox.setSelected(state.isSelected());\r\n                } else {\r\n                    checkBox.setText(&quot;??&quot;);\r\n                    checkBox.setSelected(false);\r\n                }\r\n\r\n                if (selected) {\r\n                    checkBox.setBackground(UIManager.getColor(&quot;Tree.selectionBackground&quot;));\r\n                    checkBox.setForeground(UIManager.getColor(&quot;Tree.selectionForeground&quot;));\r\n                } else {\r\n                    checkBox.setForeground(tree.getForeground());\r\n                    checkBox.setBackground(null);\r\n                }\r\n\r\n                checkBox.setOpaque(selected);\r\n\r\n                return checkBox;\r\n            }\r\n        }\r\n\r\n        public class TestModel extends DefaultTreeModel {\r\n            public TestModel(TreeNode root) {\r\n                super(root);\r\n            }\r\n\r\n            @Override\r\n            public void valueForPathChanged(TreePath path, Object newValue) {\r\n                // This is important, as it fires the nodeChanged event\r\n                super.valueForPathChanged(path, newValue);\r\n                Object lastPathComponent = path.getLastPathComponent();\r\n                if (!(lastPathComponent instanceof DefaultMutableTreeNode)) {\r\n                    return;\r\n                }\r\n                DefaultMutableTreeNode parentNode = (DefaultMutableTreeNode) lastPathComponent;\r\n                if (parentNode.isLeaf()) {\r\n                    return;\r\n                }\r\n\r\n                State state = stateFrom(parentNode);\r\n                StateChangeModel model = new StateChangeModel();\r\n                updateState(parentNode, state, model);\r\n\r\n                fireTreeNodesChanged(this, model.getPaths(), model.getIndicies(), model.getChildren());\r\n            }\r\n\r\n            protected State stateFrom(TreeNode node) {\r\n                if (!(node instanceof DefaultMutableTreeNode)) {\r\n                    return null;\r\n                }\r\n                DefaultMutableTreeNode defaultNode = (DefaultMutableTreeNode) node;\r\n                Object userObject = defaultNode.getUserObject();\r\n                if (!(userObject instanceof State)) {\r\n                    // Here, if you&#39;re clever, you could check the\r\n                    // state of all the nodes of this node&#39;s parent\r\n                    // and if they&#39;re all selected, mark the parent\r\n                    // nodes as selected as well\r\n                    return null;\r\n                }\r\n                return (State) userObject;\r\n            }\r\n\r\n            protected void updateState(DefaultMutableTreeNode parentNode, State state, StateChangeModel model) {\r\n                for (int index = 0; index &lt; parentNode.getChildCount(); index++) {\r\n                    TreeNode childNode = parentNode.getChildAt(index);\r\n                    if (!(childNode instanceof DefaultMutableTreeNode)) {\r\n                        continue;\r\n                    }\r\n                    DefaultMutableTreeNode defaultChildNode = (DefaultMutableTreeNode) childNode;\r\n                    Object childObject = defaultChildNode.getUserObject();\r\n                    if (!(childObject instanceof State)) {\r\n                        return;\r\n                    }\r\n                    State childState = (State) childObject;\r\n                    childState.setSelected(state.isSelected());\r\n\r\n                    model.add(new TreePath(getPathToRoot(childNode)), index, childNode);\r\n                    // Recursive update...\r\n                    updateState(defaultChildNode, state, model);\r\n                }\r\n            }\r\n\r\n            protected class StateChangeModel {\r\n                List&lt;TreePath&gt; paths = new ArrayList&lt;&gt;(8);\r\n                List&lt;Integer&gt; indicies = new ArrayList&lt;&gt;(8);\r\n                List&lt;Object&gt; children = new ArrayList&lt;&gt;(8);            \r\n\r\n                public void add(TreePath path, int index, TreeNode child) {\r\n                    paths.add(path);\r\n                    indicies.add(index);\r\n                    children.add(child);\r\n                }\r\n\r\n                public TreePath[] getPaths() {\r\n                    return paths.toArray(new TreePath[paths.size()]);\r\n                }\r\n\r\n                public int[] getIndicies() {\r\n                    return indicies.stream().mapToInt(i -&gt; i).toArray();\r\n                }\r\n\r\n                public Object[] getChildren() {\r\n                    return children.toArray(new Object[children.size()]);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\nNow, it&#39;s important to note a couple of things...\r\n\r\n1. It&#39;s VERY important that you call `stopCellEditing` on the `TreeCellEditor` when the state changes, otherwise this will NOT work.  I don&#39;t know why, but that&#39;s the way it needs to work.\r\n2. I&#39;ve made use of a custom `DefaultTreeModel` and overridden the `valueForPathChanged` method.  This is VERY important, as it&#39;s how the model gets notified that the state of a node was changed by the editor.  Otherwise you&#39;re going to need to spend a lot of time with `TreeModelListener` and spend a lot of time writing a lot of dirty code.\r\n3. You&#39;re current direction/implementation is fundamentally flawed for what you seem to be trying to do, I suggest spending some time studying the above example and trying to move your code to it.\r\n\r\n&gt; still one issue in the children ones\r\n\r\nSeems to be working find for me:\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/ZWjML.gif\r\n  [2]: https://i.stack.imgur.com/2128O.gif","title":"Issue with Swing JTree Checkbox Behavior","body":"<p>I'm not going to try and fix your code, it's moving in the wrong direction for what you seem to be trying to achieve, instead, I've modified <a href=\"https://stackoverflow.com/questions/31375773/how-do-you-make-components-of-jpanel-as-a-node-in-jtree-usable/31376208#31376208\">this example</a> to add support for updating the child nodes when the parent node state changes.</p>\n<p><a href=\"https://i.stack.imgur.com/ZWjML.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ZWjML.gif\" alt=\"enter image description here\" /></a></p>\n<pre><code>import java.awt.Component;\nimport java.awt.EventQueue;\nimport java.awt.event.ActionEvent;\nimport java.awt.event.ActionListener;\nimport java.util.ArrayList;\nimport java.util.List;\nimport javax.swing.AbstractCellEditor;\nimport javax.swing.JCheckBox;\nimport javax.swing.JFrame;\nimport javax.swing.JScrollPane;\nimport javax.swing.JTree;\nimport javax.swing.UIManager;\nimport javax.swing.tree.DefaultMutableTreeNode;\nimport javax.swing.tree.DefaultTreeModel;\nimport javax.swing.tree.TreeCellEditor;\nimport javax.swing.tree.TreeCellRenderer;\nimport javax.swing.tree.TreeNode;\nimport javax.swing.tree.TreePath;\n\npublic class Main {\n\n    public static void main(String[] args) {\n        new Main();\n    }\n\n    public Main() {\n        EventQueue.invokeLater(new Runnable() {\n            @Override\n            public void run() {\n                JTree tree = createTree();\n                tree.setToggleClickCount(0);\n                tree.setCellRenderer(new StateRenderer());\n                tree.setCellEditor(new StateEditor());\n                tree.setEditable(true);\n\n                JFrame f = new JFrame();\n                f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n                f.add(new JScrollPane(tree));\n\n                f.pack();\n                f.setLocationRelativeTo(null);\n                f.setVisible(true);\n            }\n        });\n    }\n\n    private JTree createTree() {\n        int children = 4;\n        int grandChildren = 2;\n        DefaultMutableTreeNode root = new DefaultMutableTreeNode(new State(&quot;Films&quot;, false));\n        DefaultMutableTreeNode node;\n\n        String[] cat = {&quot;Sci-Fi&quot;, &quot;Fantasy&quot;, &quot;Action&quot;, &quot;Comedy&quot;};\n        String[][] films = {\n            {&quot;Star Wars&quot;, &quot;Star Trek&quot;},\n            {&quot;Lord of the Rings&quot;, &quot;Conan&quot;},\n            {&quot;Terminator&quot;, &quot;Transformers&quot;},\n            {&quot;Cheaper by the Doze&quot;, &quot;Father of the Bride&quot;}\n        };\n        for (int j = 0; j &lt; children; j++) {\n            node = new DefaultMutableTreeNode(new State(cat[j], false));\n            root.add(node);\n            for (int k = 0; k &lt; grandChildren; k++) {\n                node.add(new DefaultMutableTreeNode(new State(films[j][k], false)));\n            }\n        }\n        TestModel model = new TestModel(root);\n        return new JTree(model);\n    }\n\n    public class State {\n\n        private String text;\n        private boolean selected;\n\n        public State(String text, boolean selected) {\n            this.text = text;\n            this.selected = selected;\n        }\n\n        public String getText() {\n            return text;\n        }\n\n        public boolean isSelected() {\n            return selected;\n        }\n\n        public void setSelected(boolean selected) {\n            this.selected = selected;\n        }\n\n    }\n\n    public class StateEditor extends AbstractCellEditor implements TreeCellEditor {\n\n        //JPanel panel;\n        private JCheckBox checkBox;\n\n        private State editorValue;\n\n        public StateEditor() {\n            checkBox = new JCheckBox();\n            checkBox.setOpaque(false);\n            // This seems to be important :/\n            checkBox.addActionListener(new ActionListener() {\n                @Override\n                public void actionPerformed(ActionEvent e) {\n                    stopCellEditing();\n                }\n            });\n        }\n\n        @Override\n        public Object getCellEditorValue() {\n            editorValue.setSelected(checkBox.isSelected());\n            return editorValue;\n        }\n\n        @Override\n        public Component getTreeCellEditorComponent(JTree tree, Object value, boolean isSelected, boolean expanded, boolean leaf, int row) {\n            if (value instanceof DefaultMutableTreeNode) {\n                DefaultMutableTreeNode node = (DefaultMutableTreeNode) value;\n                State state = (State) node.getUserObject();\n                editorValue = state;\n                checkBox.setText(state.getText());\n                checkBox.setSelected(state.isSelected());\n            } else {\n                checkBox.setText(&quot;??&quot;);\n                checkBox.setSelected(false);\n            }\n\n            return checkBox;\n\n        }\n\n    }\n\n    public class StateRenderer implements TreeCellRenderer {\n\n        private JCheckBox checkBox;\n\n        public StateRenderer() {\n            checkBox = new JCheckBox();\n            checkBox.setOpaque(false);\n        }\n\n        @Override\n        public Component getTreeCellRendererComponent(JTree tree, Object value, boolean selected, boolean expanded, boolean leaf, int row, boolean hasFocus) {\n            if (value instanceof DefaultMutableTreeNode) {\n                DefaultMutableTreeNode node = (DefaultMutableTreeNode) value;\n                State state = (State) node.getUserObject();\n                checkBox.setText(state.getText());\n                checkBox.setSelected(state.isSelected());\n            } else {\n                checkBox.setText(&quot;??&quot;);\n                checkBox.setSelected(false);\n            }\n\n            if (selected) {\n                checkBox.setBackground(UIManager.getColor(&quot;Tree.selectionBackground&quot;));\n                checkBox.setForeground(UIManager.getColor(&quot;Tree.selectionForeground&quot;));\n            } else {\n                checkBox.setForeground(tree.getForeground());\n                checkBox.setBackground(null);\n            }\n\n            checkBox.setOpaque(selected);\n\n            return checkBox;\n        }\n    }\n\n    public class TestModel extends DefaultTreeModel {\n        public TestModel(TreeNode root) {\n            super(root);\n        }\n\n        @Override\n        public void valueForPathChanged(TreePath path, Object newValue) {\n            // This is important, as it fires the nodeChanged event\n            super.valueForPathChanged(path, newValue);\n            Object lastPathComponent = path.getLastPathComponent();\n            if (!(lastPathComponent instanceof DefaultMutableTreeNode)) {\n                return;\n            }\n            DefaultMutableTreeNode parentNode = (DefaultMutableTreeNode) lastPathComponent;\n            if (parentNode.isLeaf()) {\n                return;\n            }\n\n            State state = stateFrom(parentNode);\n            StateChangeModel model = new StateChangeModel();\n            updateState(parentNode, state, model);\n\n            fireTreeNodesChanged(this, model.getPaths(), model.getIndicies(), model.getChildren());\n        }\n\n        protected State stateFrom(TreeNode node) {\n            if (!(node instanceof DefaultMutableTreeNode)) {\n                return null;\n            }\n            DefaultMutableTreeNode defaultNode = (DefaultMutableTreeNode) node;\n            Object userObject = defaultNode.getUserObject();\n            if (!(userObject instanceof State)) {\n                // Here, if you're clever, you could check the\n                // state of all the nodes of this node's parent\n                // and if they're all selected, mark the parent\n                // nodes as selected as well\n                return null;\n            }\n            return (State) userObject;\n        }\n\n        protected void updateState(DefaultMutableTreeNode parentNode, State state, StateChangeModel model) {\n            for (int index = 0; index &lt; parentNode.getChildCount(); index++) {\n                TreeNode childNode = parentNode.getChildAt(index);\n                if (!(childNode instanceof DefaultMutableTreeNode)) {\n                    continue;\n                }\n                DefaultMutableTreeNode defaultChildNode = (DefaultMutableTreeNode) childNode;\n                Object childObject = defaultChildNode.getUserObject();\n                if (!(childObject instanceof State)) {\n                    return;\n                }\n                State childState = (State) childObject;\n                childState.setSelected(state.isSelected());\n\n                model.add(new TreePath(getPathToRoot(childNode)), index, childNode);\n                // Recursive update...\n                updateState(defaultChildNode, state, model);\n            }\n        }\n\n        protected class StateChangeModel {\n            List&lt;TreePath&gt; paths = new ArrayList&lt;&gt;(8);\n            List&lt;Integer&gt; indicies = new ArrayList&lt;&gt;(8);\n            List&lt;Object&gt; children = new ArrayList&lt;&gt;(8);            \n\n            public void add(TreePath path, int index, TreeNode child) {\n                paths.add(path);\n                indicies.add(index);\n                children.add(child);\n            }\n\n            public TreePath[] getPaths() {\n                return paths.toArray(new TreePath[paths.size()]);\n            }\n\n            public int[] getIndicies() {\n                return indicies.stream().mapToInt(i -&gt; i).toArray();\n            }\n\n            public Object[] getChildren() {\n                return children.toArray(new Object[children.size()]);\n            }\n        }\n    }\n}\n</code></pre>\n<p>Now, it's important to note a couple of things...</p>\n<ol>\n<li>It's VERY important that you call <code>stopCellEditing</code> on the <code>TreeCellEditor</code> when the state changes, otherwise this will NOT work.  I don't know why, but that's the way it needs to work.</li>\n<li>I've made use of a custom <code>DefaultTreeModel</code> and overridden the <code>valueForPathChanged</code> method.  This is VERY important, as it's how the model gets notified that the state of a node was changed by the editor.  Otherwise you're going to need to spend a lot of time with <code>TreeModelListener</code> and spend a lot of time writing a lot of dirty code.</li>\n<li>You're current direction/implementation is fundamentally flawed for what you seem to be trying to do, I suggest spending some time studying the above example and trying to move your code to it.</li>\n</ol>\n<blockquote>\n<p>still one issue in the children ones</p>\n</blockquote>\n<p>Seems to be working find for me:</p>\n<p><a href=\"https://i.stack.imgur.com/2128O.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/2128O.gif\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":1810821,"reputation":475,"user_id":1646928,"accept_rate":71,"display_name":"JamesB"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1690328820,"creation_date":1690165640,"question_id":76751073,"body_markdown":"Facing this issue with my code while working with checkboxes in a JTree. The root node is  treated as a &quot;Named Vector&quot; in first iteration instead of a &quot;CheckBoxNode&quot;As a result, it doesn&#39;t iterate through its child checkboxes.\r\n\r\nIn the second iteration, the root node becomes a &quot;CheckBoxNode,&quot; causing all child checkboxes to be selected, but they should already be selected and instead should be deselected:\r\n\r\n[![First Image][1]][1]\r\n\r\n[![Second Image][2]][2]\r\n\r\nSecond Iteration and Second Click:\r\n\r\n[![Third Image][3]][3]\r\n\r\n[![Fourth Image][4]][4]\r\n\r\n[![Fifth Image][5]][5]\r\n\r\nResult:\r\n\r\n[![Result Image][6]][6]\r\n\r\n\r\n*JanelaPrincipal.java:*\r\n    \r\n    package br.josueborges.principal;\r\n    \r\n    import javax.swing.*;\r\n    import java.awt.*;\r\n    import java.util.*;\r\n    import java.util.List;\r\n    import javax.swing.tree.*;\r\n    \r\n    public class JanelaPrincipal {\r\n    \r\n        private JFrame frame;\r\n        private JTree tree;\r\n    \r\n        public JanelaPrincipal() {\r\n            initialize();\r\n        }\r\n    \r\n        public static void main(String[] args) {\r\n            EventQueue.invokeLater(() -&gt; {\r\n                try {\r\n                    JanelaPrincipal window = new JanelaPrincipal();\r\n                    window.frame.setVisible(true);\r\n                } catch (Exception e) {\r\n                    e.printStackTrace();\r\n                }\r\n            });\r\n        }\r\n    \r\n        private void initialize() {\r\n        \t\r\n            frame = new JFrame();\r\n            frame.setBounds(100, 100, 400, 400);\r\n            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n            frame.getContentPane().setLayout(new BorderLayout());\r\n    \r\n            DefaultMutableTreeNode root = new DefaultMutableTreeNode(&quot;Root&quot;);\r\n    \r\n            DefaultMutableTreeNode folder1 = new DefaultMutableTreeNode(&quot;Folder 1&quot;);\r\n            DefaultMutableTreeNode folder2 = new DefaultMutableTreeNode(&quot;Folder 2&quot;);\r\n    \r\n            DefaultMutableTreeNode file1 = new DefaultMutableTreeNode(&quot;File 1&quot;);\r\n            DefaultMutableTreeNode file2 = new DefaultMutableTreeNode(&quot;File 2&quot;);\r\n            DefaultMutableTreeNode file3 = new DefaultMutableTreeNode(&quot;File 3&quot;);\r\n    \r\n            root.add(folder1);\r\n            root.add(folder2);\r\n    \r\n            folder1.add(file1);\r\n            folder2.add(file2);\r\n            folder2.add(file3);\r\n    \r\n            Map&lt;String, List&lt;String&gt;&gt; pacotesEArquivos = new HashMap&lt;&gt;();\r\n            \r\n            List&lt;String&gt; nodes = new ArrayList&lt;&gt;();\r\n            Enumeration&lt;?&gt; enumeration = root.breadthFirstEnumeration();\r\n            while (enumeration.hasMoreElements()) {\r\n                DefaultMutableTreeNode node = (DefaultMutableTreeNode) enumeration.nextElement();\r\n                if (node.isLeaf()) {\r\n                    nodes.add(node.toString());\r\n                }\r\n            }\r\n            pacotesEArquivos.put(&quot;Root&quot;, nodes);\r\n    \r\n            tree = new CheckBoxNodeTreeSample().retornaJTree(pacotesEArquivos);\r\n            JScrollPane scrollPane = new JScrollPane(tree);\r\n            frame.getContentPane().add(scrollPane, BorderLayout.CENTER);\r\n        }\r\n    }\r\n\r\n\r\n*CheckBoxNode.java:*\r\n\r\n\r\n    package br.josueborges.principal;\r\n    \r\n    import java.awt.Color;\r\n    import java.awt.Component;\r\n    import java.awt.Font;\r\n    import java.awt.event.ItemEvent;\r\n    import java.awt.event.ItemListener;\r\n    import java.awt.event.MouseEvent;\r\n    import java.util.EventObject;\r\n    import java.util.List;\r\n    import java.util.Map;\r\n    import java.util.Vector;\r\n    import java.util.*;\r\n    \r\n    import javax.swing.AbstractCellEditor;\r\n    import javax.swing.JCheckBox;\r\n    import javax.swing.JTree;\r\n    import javax.swing.UIManager;\r\n    import javax.swing.tree.DefaultMutableTreeNode;\r\n    import javax.swing.tree.DefaultTreeCellRenderer;\r\n    import javax.swing.tree.DefaultTreeModel;\r\n    import javax.swing.tree.TreeCellEditor;\r\n    import javax.swing.tree.TreeCellRenderer;\r\n    import javax.swing.tree.TreePath;\r\n    \r\n    public class CheckBoxNodeTreeSample {\r\n    \r\n    \tpublic CheckBoxNodeTreeSample() {\r\n    \r\n    \t}\r\n    \r\n    \tpublic JTree retornaJTree(Map&lt;String, List&lt;String&gt;&gt; pacotesEArquivos) {\r\n    \r\n    \t\tArrayList&lt;Vector&lt;Object&gt;&gt; vetores = new ArrayList&lt;Vector&lt;Object&gt;&gt;();\r\n    \r\n    \t\tfor (Map.Entry&lt;String, List&lt;String&gt;&gt; entry : pacotesEArquivos.entrySet()) {\r\n    \t\t\tString pacote = entry.getKey();\r\n    \t\t\tpacote = pacote.substring(1);\r\n    \r\n    \t\t\tSystem.out.println(&quot;Pacote: &quot; + pacote);\r\n    \t\t\tList&lt;String&gt; nomesArquivos = entry.getValue();\r\n    \r\n    \t\t\tCheckBoxNode checkBoxNode[] = new CheckBoxNode[nomesArquivos.size()];\r\n    \r\n    \t\t\t// String nomeArquivo : nomesArquivos\r\n    \t\t\tfor (int i = 0; i &lt; nomesArquivos.size(); i++) {\r\n    \t\t\t\tcheckBoxNode[i] = new CheckBoxNode(nomesArquivos.get(i), false);\r\n    \t\t\t}\r\n    \r\n    \t\t\tVector&lt;Object&gt; vetorDoJTree = new NamedVector(pacote, checkBoxNode);\r\n    \r\n    \t\t\tvetores.add(vetorDoJTree);\r\n    \t\t}\r\n    \r\n    \t\tCheckBoxNodeRenderer renderer = new CheckBoxNodeRenderer();\r\n    \r\n    \t\tObject rootNodes[] = new Object[pacotesEArquivos.size()];\r\n    \r\n    \t\tfor (int i = 0; i &lt; vetores.size(); i++) {\r\n    \t\t\trootNodes[i] = vetores.get(i);\r\n    \t\t}\r\n    \r\n    \t\tVector&lt;Object&gt; rootVector = new NamedVector(&quot;Teste&quot;, rootNodes);\r\n    \r\n    \t\tJTree tree = new JTree(rootVector);\r\n    \r\n    \t\ttree.setVisibleRowCount(50);\r\n    \t\ttree.setRootVisible(false);\r\n    \t\ttree.setShowsRootHandles(true);\r\n    \r\n    \t\ttree.setCellRenderer(renderer);\r\n    \t\ttree.setCellEditor(new CheckBoxNodeEditor(tree));\r\n    \t\ttree.setEditable(true);\r\n    \r\n    \t\treturn tree;\r\n    \t}\r\n    }\r\n    \r\n    class CheckBoxNodeRenderer implements TreeCellRenderer {\r\n    \r\n    \tprivate JCheckBox leafRenderer = new JCheckBox();\r\n    \tprivate Color selectionForeground, selectionBackground, textForeground, textBackground;\r\n    \r\n    \tprotected JCheckBox getLeafRenderer() {\r\n    \t\treturn leafRenderer;\r\n    \t}\r\n    \r\n    \tpublic CheckBoxNodeRenderer() {\r\n    \t\tFont fontValue;\r\n    \t\tfontValue = UIManager.getFont(&quot;Tree.font&quot;);\r\n    \t\tif (fontValue != null) {\r\n    \t\t\tleafRenderer.setFont(fontValue);\r\n    \t\t}\r\n    \t\tBoolean booleanValue = (Boolean) UIManager.get(&quot;Tree.drawsFocusBorderAroundIcon&quot;);\r\n    \t\tSystem.out.println(&quot;booleanValue: &quot; + booleanValue);\r\n    \t\tleafRenderer.setFocusPainted((booleanValue != null) &amp;&amp; (booleanValue.booleanValue()));\r\n    \t\tUIManager.getColor(&quot;Tree.selectionBorderColor&quot;);\r\n    \t\tselectionForeground = UIManager.getColor(&quot;Tree.selectionForeground&quot;);\r\n    \t\tselectionBackground = UIManager.getColor(&quot;Tree.selectionBackground&quot;);\r\n    \t\ttextForeground = UIManager.getColor(&quot;Tree.textForeground&quot;);\r\n    \t\ttextBackground = UIManager.getColor(&quot;Tree.textBackground&quot;);\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic Component getTreeCellRendererComponent(JTree tree, Object value, boolean selected, boolean expanded,\r\n    \t\t\tboolean leaf, int row, boolean hasFocus) {\r\n    \r\n    \t\tComponent returnValue;\r\n    \t\t\r\n    \t\tString stringValue = tree.convertValueToText(value, selected, expanded, leaf, row, false);\r\n    \t\tleafRenderer.setText(stringValue);\r\n    \t\tleafRenderer.setSelected(false);\r\n    \t\tleafRenderer.setEnabled(tree.isEnabled());\r\n    \t\tif (selected) {\r\n    \t\t\tleafRenderer.setForeground(selectionForeground);\r\n    \t\t\tleafRenderer.setBackground(selectionBackground);\r\n    \t\t} else {\r\n    \t\t\tleafRenderer.setForeground(textForeground);\r\n    \t\t\tleafRenderer.setBackground(textBackground);\r\n    \t\t}\r\n    \t\tif ((value != null) &amp;&amp; (value instanceof DefaultMutableTreeNode)) {\r\n    \t\t\tObject userObject = ((DefaultMutableTreeNode) value).getUserObject();\r\n    \t\t\tif (userObject instanceof CheckBoxNode) {\r\n    \t\t\t\tCheckBoxNode node = (CheckBoxNode) userObject;\r\n    \t\t\t\tleafRenderer.setText(node.getText());\r\n    \t\t\t\tleafRenderer.setSelected(node.isSelected());\r\n    \t\t\t}\r\n    \t\t}\r\n    \t\treturnValue = leafRenderer;\r\n    \t\t\r\n    \t\treturn returnValue;\r\n    \t}\r\n    }\r\n    \r\n    class CheckBoxNodeEditor extends AbstractCellEditor implements TreeCellEditor {\r\n    \r\n    \tprivate static final long serialVersionUID = 1L;\r\n    \tprivate CheckBoxNodeRenderer renderer = new CheckBoxNodeRenderer();\r\n    \tprivate JTree tree;\r\n    \r\n    \tpublic CheckBoxNodeEditor(JTree tree) {\r\n    \t\tthis.tree = tree;\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic Object getCellEditorValue() {\r\n    \t\tJCheckBox checkbox = renderer.getLeafRenderer();\r\n    \t\tCheckBoxNode checkBoxNode = new CheckBoxNode(checkbox.getText(), checkbox.isSelected());\r\n    \t\treturn checkBoxNode;\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic boolean isCellEditable(EventObject event) {\r\n    \t\tboolean returnValue = false;\r\n    \t\tif (event instanceof MouseEvent) {\r\n    \t\t\tMouseEvent mouseEvent = (MouseEvent) event;\r\n    \t\t\tTreePath path = tree.getPathForLocation(mouseEvent.getX(), mouseEvent.getY());\r\n    \t\t\tif (path != null) {\r\n    \t\t\t\tObject node = path.getLastPathComponent();\r\n    \t\t\t\tif ((node != null) &amp;&amp; (node instanceof DefaultMutableTreeNode)) {\r\n    \t\t\t\t\tDefaultMutableTreeNode treeNode = (DefaultMutableTreeNode) node;\r\n    \t\t\t\t\tObject userObject = treeNode.getUserObject();\r\n    \t\t\t\t\treturnValue = true;\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\t}\r\n    \t\treturn returnValue;\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic Component getTreeCellEditorComponent(JTree tree, Object value, boolean selected, boolean expanded,\r\n    \t\t\tboolean leaf, int row) {\r\n    \r\n    \t\tComponent editor = renderer.getTreeCellRendererComponent(tree, value, true, expanded, leaf, row, true);\r\n    \t\t\r\n    \t\tItemListener itemListener = new ItemListener() {\r\n    \t\t\t@Override\r\n    \t\t\tpublic void itemStateChanged(ItemEvent itemEvent) {\r\n    \t\t\t\tif (stopCellEditing()) {\r\n    \t\t\t\t\tfireEditingStopped();\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\t};\r\n    \t\tif (editor instanceof JCheckBox) {\r\n    \t        JCheckBox checkBox = (JCheckBox) editor;\r\n    \t        checkBox.removeItemListener(itemListener);\r\n    \t        checkBox.addItemListener(itemListener);\r\n    \r\n    \t        // Ao clicar no checkbox, atualizar o estado de todos os checkboxes filhos e pais\r\n    \t        DefaultMutableTreeNode node = (DefaultMutableTreeNode) value;\r\n    \t        Object userObject = node.getUserObject();\r\n    \t        if (userObject instanceof CheckBoxNode) {\r\n    \t        \t\r\n    \t            CheckBoxNode parentNode = (CheckBoxNode) userObject;\r\n    \t            boolean parentSelected = checkBox.isSelected();\r\n    \r\n    \t            // Percorrer os n&#243;s filhos (arquivos) e definir o mesmo estado do checkbox pai\r\n    \t            for (int i = 0; i &lt; node.getChildCount(); i++) {\r\n    \t                DefaultMutableTreeNode childNode = (DefaultMutableTreeNode) node.getChildAt(i);\r\n    \t                Object childUserObject = childNode.getUserObject();\r\n    \t                if (childUserObject instanceof CheckBoxNode) {\r\n    \t                    CheckBoxNode childCheckBoxNode = (CheckBoxNode) childUserObject;\r\n    \t                    childCheckBoxNode.setSelected(parentSelected);\r\n    \t                }\r\n    \t            }\r\n    \r\n    \t            // Atualizar o estado dos n&#243;s pais\r\n    \t            updateParentNodes(node, parentSelected);\r\n    \r\n    \t            // Notificar a &#225;rvore que houve mudan&#231;a no modelo\r\n    \t            ((DefaultTreeModel) tree.getModel()).nodeStructureChanged(node);\r\n    \t      }\r\n    \t    }\r\n    \t    return editor;\r\n    \t}\r\n    \r\n    // M&#233;todo para atualizar o estado dos n&#243;s pais\r\n    \tprivate void updateParentNodes(DefaultMutableTreeNode node, boolean selected) {\r\n    \t\tDefaultMutableTreeNode parentNode = (DefaultMutableTreeNode) node.getParent();\r\n    \t\tif (parentNode != null) {\r\n    \t\t\tObject parentUserObject = parentNode.getUserObject();\r\n    \t\t\tif (parentUserObject instanceof CheckBoxNode) {\r\n    \t\t\t\tCheckBoxNode parentCheckBoxNode = (CheckBoxNode) parentUserObject;\r\n    \r\n    \t\t\t\t// Verificar se todos os filhos est&#227;o selecionados e atualizar o estado do n&#243;\r\n    \t\t\t\t// pai\r\n    \t\t\t\tboolean allChildrenSelected = true;\r\n    \t\t\t\tfor (int i = 0; i &lt; parentNode.getChildCount(); i++) {\r\n    \t\t\t\t\tDefaultMutableTreeNode childNode = (DefaultMutableTreeNode) parentNode.getChildAt(i);\r\n    \t\t\t\t\tObject childUserObject = childNode.getUserObject();\r\n    \t\t\t\t\tif (childUserObject instanceof CheckBoxNode) {\r\n    \t\t\t\t\t\tCheckBoxNode childCheckBoxNode = (CheckBoxNode) childUserObject;\r\n    \t\t\t\t\t\tif (!childCheckBoxNode.isSelected()) {\r\n    \t\t\t\t\t\t\tallChildrenSelected = false;\r\n    \t\t\t\t\t\t\tbreak;\r\n    \t\t\t\t\t\t}\r\n    \t\t\t\t\t}\r\n    \t\t\t\t}\r\n    \r\n    \t\t\t\tparentCheckBoxNode.setSelected(allChildrenSelected);\r\n    \r\n    \t\t\t\t// Continuar atualizando os n&#243;s pais recursivamente\r\n    \t\t\t\tupdateParentNodes(parentNode, selected);\r\n    \t\t\t}\r\n    \t\t}\r\n    \t}\r\n    }\r\n    \r\n    class CheckBoxNode {\r\n    \r\n    \tprivate String text;\r\n    \tprivate boolean selected;\r\n    \r\n    \tpublic CheckBoxNode(String text, boolean selected) {\r\n    \t\tthis.text = text;\r\n    \t\tthis.selected = selected;\r\n    \t}\r\n    \r\n    \tpublic boolean isSelected() {\r\n    \t\treturn selected;\r\n    \t}\r\n    \r\n    \tpublic void setSelected(boolean newValue) {\r\n    \t\tselected = newValue;\r\n    \t}\r\n    \r\n    \tpublic String getText() {\r\n    \t\treturn text;\r\n    \t}\r\n    \r\n    \tpublic void setText(String newValue) {\r\n    \t\ttext = newValue;\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic String toString() {\r\n    \t\treturn getClass().getName() + &quot;[&quot; + text + &quot;/&quot; + selected + &quot;]&quot;;\r\n    \t}\r\n    }\r\n    \r\n    class NamedVector extends Vector&lt;Object&gt; {\r\n    \r\n    \tprivate static final long serialVersionUID = 1L;\r\n    \tprivate String name;\r\n    \r\n    \tpublic NamedVector(String name) {\r\n    \t\tsuper(); \r\n    \t\tthis.name = name;\r\n    \t}\r\n    \r\n    \tpublic NamedVector(String name, Object elements[]) {\r\n    \t\tthis.name = name;\r\n    \t\tfor (int i = 0, n = elements.length; i &lt; n; i++) {\r\n    \t\t\tadd(elements[i]);\r\n    \t\t}\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic String toString() {\r\n    \t\treturn &quot;[&quot; + name + &quot;]&quot;;\r\n    \t}\r\n    }\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/lPJBD.jpg\r\n  [2]: https://i.stack.imgur.com/bIJxs.jpg\r\n  [3]: https://i.stack.imgur.com/223Tp.jpg\r\n  [4]: https://i.stack.imgur.com/6RCrY.jpg\r\n  [5]: https://i.stack.imgur.com/eCcKT.jpg\r\n  [6]: https://i.stack.imgur.com/Noqf6.jpg","title":"Issue with Swing JTree Checkbox Behavior","body":"<p>Facing this issue with my code while working with checkboxes in a JTree. The root node is  treated as a &quot;Named Vector&quot; in first iteration instead of a &quot;CheckBoxNode&quot;As a result, it doesn't iterate through its child checkboxes.</p>\n<p>In the second iteration, the root node becomes a &quot;CheckBoxNode,&quot; causing all child checkboxes to be selected, but they should already be selected and instead should be deselected:</p>\n<p><a href=\"https://i.stack.imgur.com/lPJBD.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/lPJBD.jpg\" alt=\"First Image\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/bIJxs.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/bIJxs.jpg\" alt=\"Second Image\" /></a></p>\n<p>Second Iteration and Second Click:</p>\n<p><a href=\"https://i.stack.imgur.com/223Tp.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/223Tp.jpg\" alt=\"Third Image\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/6RCrY.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/6RCrY.jpg\" alt=\"Fourth Image\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/eCcKT.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/eCcKT.jpg\" alt=\"Fifth Image\" /></a></p>\n<p>Result:</p>\n<p><a href=\"https://i.stack.imgur.com/Noqf6.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Noqf6.jpg\" alt=\"Result Image\" /></a></p>\n<p><em>JanelaPrincipal.java:</em></p>\n<pre><code>package br.josueborges.principal;\n\nimport javax.swing.*;\nimport java.awt.*;\nimport java.util.*;\nimport java.util.List;\nimport javax.swing.tree.*;\n\npublic class JanelaPrincipal {\n\n    private JFrame frame;\n    private JTree tree;\n\n    public JanelaPrincipal() {\n        initialize();\n    }\n\n    public static void main(String[] args) {\n        EventQueue.invokeLater(() -&gt; {\n            try {\n                JanelaPrincipal window = new JanelaPrincipal();\n                window.frame.setVisible(true);\n            } catch (Exception e) {\n                e.printStackTrace();\n            }\n        });\n    }\n\n    private void initialize() {\n        \n        frame = new JFrame();\n        frame.setBounds(100, 100, 400, 400);\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        frame.getContentPane().setLayout(new BorderLayout());\n\n        DefaultMutableTreeNode root = new DefaultMutableTreeNode(&quot;Root&quot;);\n\n        DefaultMutableTreeNode folder1 = new DefaultMutableTreeNode(&quot;Folder 1&quot;);\n        DefaultMutableTreeNode folder2 = new DefaultMutableTreeNode(&quot;Folder 2&quot;);\n\n        DefaultMutableTreeNode file1 = new DefaultMutableTreeNode(&quot;File 1&quot;);\n        DefaultMutableTreeNode file2 = new DefaultMutableTreeNode(&quot;File 2&quot;);\n        DefaultMutableTreeNode file3 = new DefaultMutableTreeNode(&quot;File 3&quot;);\n\n        root.add(folder1);\n        root.add(folder2);\n\n        folder1.add(file1);\n        folder2.add(file2);\n        folder2.add(file3);\n\n        Map&lt;String, List&lt;String&gt;&gt; pacotesEArquivos = new HashMap&lt;&gt;();\n        \n        List&lt;String&gt; nodes = new ArrayList&lt;&gt;();\n        Enumeration&lt;?&gt; enumeration = root.breadthFirstEnumeration();\n        while (enumeration.hasMoreElements()) {\n            DefaultMutableTreeNode node = (DefaultMutableTreeNode) enumeration.nextElement();\n            if (node.isLeaf()) {\n                nodes.add(node.toString());\n            }\n        }\n        pacotesEArquivos.put(&quot;Root&quot;, nodes);\n\n        tree = new CheckBoxNodeTreeSample().retornaJTree(pacotesEArquivos);\n        JScrollPane scrollPane = new JScrollPane(tree);\n        frame.getContentPane().add(scrollPane, BorderLayout.CENTER);\n    }\n}\n</code></pre>\n<p><em>CheckBoxNode.java:</em></p>\n<pre><code>package br.josueborges.principal;\n\nimport java.awt.Color;\nimport java.awt.Component;\nimport java.awt.Font;\nimport java.awt.event.ItemEvent;\nimport java.awt.event.ItemListener;\nimport java.awt.event.MouseEvent;\nimport java.util.EventObject;\nimport java.util.List;\nimport java.util.Map;\nimport java.util.Vector;\nimport java.util.*;\n\nimport javax.swing.AbstractCellEditor;\nimport javax.swing.JCheckBox;\nimport javax.swing.JTree;\nimport javax.swing.UIManager;\nimport javax.swing.tree.DefaultMutableTreeNode;\nimport javax.swing.tree.DefaultTreeCellRenderer;\nimport javax.swing.tree.DefaultTreeModel;\nimport javax.swing.tree.TreeCellEditor;\nimport javax.swing.tree.TreeCellRenderer;\nimport javax.swing.tree.TreePath;\n\npublic class CheckBoxNodeTreeSample {\n\n    public CheckBoxNodeTreeSample() {\n\n    }\n\n    public JTree retornaJTree(Map&lt;String, List&lt;String&gt;&gt; pacotesEArquivos) {\n\n        ArrayList&lt;Vector&lt;Object&gt;&gt; vetores = new ArrayList&lt;Vector&lt;Object&gt;&gt;();\n\n        for (Map.Entry&lt;String, List&lt;String&gt;&gt; entry : pacotesEArquivos.entrySet()) {\n            String pacote = entry.getKey();\n            pacote = pacote.substring(1);\n\n            System.out.println(&quot;Pacote: &quot; + pacote);\n            List&lt;String&gt; nomesArquivos = entry.getValue();\n\n            CheckBoxNode checkBoxNode[] = new CheckBoxNode[nomesArquivos.size()];\n\n            // String nomeArquivo : nomesArquivos\n            for (int i = 0; i &lt; nomesArquivos.size(); i++) {\n                checkBoxNode[i] = new CheckBoxNode(nomesArquivos.get(i), false);\n            }\n\n            Vector&lt;Object&gt; vetorDoJTree = new NamedVector(pacote, checkBoxNode);\n\n            vetores.add(vetorDoJTree);\n        }\n\n        CheckBoxNodeRenderer renderer = new CheckBoxNodeRenderer();\n\n        Object rootNodes[] = new Object[pacotesEArquivos.size()];\n\n        for (int i = 0; i &lt; vetores.size(); i++) {\n            rootNodes[i] = vetores.get(i);\n        }\n\n        Vector&lt;Object&gt; rootVector = new NamedVector(&quot;Teste&quot;, rootNodes);\n\n        JTree tree = new JTree(rootVector);\n\n        tree.setVisibleRowCount(50);\n        tree.setRootVisible(false);\n        tree.setShowsRootHandles(true);\n\n        tree.setCellRenderer(renderer);\n        tree.setCellEditor(new CheckBoxNodeEditor(tree));\n        tree.setEditable(true);\n\n        return tree;\n    }\n}\n\nclass CheckBoxNodeRenderer implements TreeCellRenderer {\n\n    private JCheckBox leafRenderer = new JCheckBox();\n    private Color selectionForeground, selectionBackground, textForeground, textBackground;\n\n    protected JCheckBox getLeafRenderer() {\n        return leafRenderer;\n    }\n\n    public CheckBoxNodeRenderer() {\n        Font fontValue;\n        fontValue = UIManager.getFont(&quot;Tree.font&quot;);\n        if (fontValue != null) {\n            leafRenderer.setFont(fontValue);\n        }\n        Boolean booleanValue = (Boolean) UIManager.get(&quot;Tree.drawsFocusBorderAroundIcon&quot;);\n        System.out.println(&quot;booleanValue: &quot; + booleanValue);\n        leafRenderer.setFocusPainted((booleanValue != null) &amp;&amp; (booleanValue.booleanValue()));\n        UIManager.getColor(&quot;Tree.selectionBorderColor&quot;);\n        selectionForeground = UIManager.getColor(&quot;Tree.selectionForeground&quot;);\n        selectionBackground = UIManager.getColor(&quot;Tree.selectionBackground&quot;);\n        textForeground = UIManager.getColor(&quot;Tree.textForeground&quot;);\n        textBackground = UIManager.getColor(&quot;Tree.textBackground&quot;);\n    }\n\n    @Override\n    public Component getTreeCellRendererComponent(JTree tree, Object value, boolean selected, boolean expanded,\n            boolean leaf, int row, boolean hasFocus) {\n\n        Component returnValue;\n        \n        String stringValue = tree.convertValueToText(value, selected, expanded, leaf, row, false);\n        leafRenderer.setText(stringValue);\n        leafRenderer.setSelected(false);\n        leafRenderer.setEnabled(tree.isEnabled());\n        if (selected) {\n            leafRenderer.setForeground(selectionForeground);\n            leafRenderer.setBackground(selectionBackground);\n        } else {\n            leafRenderer.setForeground(textForeground);\n            leafRenderer.setBackground(textBackground);\n        }\n        if ((value != null) &amp;&amp; (value instanceof DefaultMutableTreeNode)) {\n            Object userObject = ((DefaultMutableTreeNode) value).getUserObject();\n            if (userObject instanceof CheckBoxNode) {\n                CheckBoxNode node = (CheckBoxNode) userObject;\n                leafRenderer.setText(node.getText());\n                leafRenderer.setSelected(node.isSelected());\n            }\n        }\n        returnValue = leafRenderer;\n        \n        return returnValue;\n    }\n}\n\nclass CheckBoxNodeEditor extends AbstractCellEditor implements TreeCellEditor {\n\n    private static final long serialVersionUID = 1L;\n    private CheckBoxNodeRenderer renderer = new CheckBoxNodeRenderer();\n    private JTree tree;\n\n    public CheckBoxNodeEditor(JTree tree) {\n        this.tree = tree;\n    }\n\n    @Override\n    public Object getCellEditorValue() {\n        JCheckBox checkbox = renderer.getLeafRenderer();\n        CheckBoxNode checkBoxNode = new CheckBoxNode(checkbox.getText(), checkbox.isSelected());\n        return checkBoxNode;\n    }\n\n    @Override\n    public boolean isCellEditable(EventObject event) {\n        boolean returnValue = false;\n        if (event instanceof MouseEvent) {\n            MouseEvent mouseEvent = (MouseEvent) event;\n            TreePath path = tree.getPathForLocation(mouseEvent.getX(), mouseEvent.getY());\n            if (path != null) {\n                Object node = path.getLastPathComponent();\n                if ((node != null) &amp;&amp; (node instanceof DefaultMutableTreeNode)) {\n                    DefaultMutableTreeNode treeNode = (DefaultMutableTreeNode) node;\n                    Object userObject = treeNode.getUserObject();\n                    returnValue = true;\n                }\n            }\n        }\n        return returnValue;\n    }\n\n    @Override\n    public Component getTreeCellEditorComponent(JTree tree, Object value, boolean selected, boolean expanded,\n            boolean leaf, int row) {\n\n        Component editor = renderer.getTreeCellRendererComponent(tree, value, true, expanded, leaf, row, true);\n        \n        ItemListener itemListener = new ItemListener() {\n            @Override\n            public void itemStateChanged(ItemEvent itemEvent) {\n                if (stopCellEditing()) {\n                    fireEditingStopped();\n                }\n            }\n        };\n        if (editor instanceof JCheckBox) {\n            JCheckBox checkBox = (JCheckBox) editor;\n            checkBox.removeItemListener(itemListener);\n            checkBox.addItemListener(itemListener);\n\n            // Ao clicar no checkbox, atualizar o estado de todos os checkboxes filhos e pais\n            DefaultMutableTreeNode node = (DefaultMutableTreeNode) value;\n            Object userObject = node.getUserObject();\n            if (userObject instanceof CheckBoxNode) {\n                \n                CheckBoxNode parentNode = (CheckBoxNode) userObject;\n                boolean parentSelected = checkBox.isSelected();\n\n                // Percorrer os nós filhos (arquivos) e definir o mesmo estado do checkbox pai\n                for (int i = 0; i &lt; node.getChildCount(); i++) {\n                    DefaultMutableTreeNode childNode = (DefaultMutableTreeNode) node.getChildAt(i);\n                    Object childUserObject = childNode.getUserObject();\n                    if (childUserObject instanceof CheckBoxNode) {\n                        CheckBoxNode childCheckBoxNode = (CheckBoxNode) childUserObject;\n                        childCheckBoxNode.setSelected(parentSelected);\n                    }\n                }\n\n                // Atualizar o estado dos nós pais\n                updateParentNodes(node, parentSelected);\n\n                // Notificar a árvore que houve mudança no modelo\n                ((DefaultTreeModel) tree.getModel()).nodeStructureChanged(node);\n          }\n        }\n        return editor;\n    }\n\n// Método para atualizar o estado dos nós pais\n    private void updateParentNodes(DefaultMutableTreeNode node, boolean selected) {\n        DefaultMutableTreeNode parentNode = (DefaultMutableTreeNode) node.getParent();\n        if (parentNode != null) {\n            Object parentUserObject = parentNode.getUserObject();\n            if (parentUserObject instanceof CheckBoxNode) {\n                CheckBoxNode parentCheckBoxNode = (CheckBoxNode) parentUserObject;\n\n                // Verificar se todos os filhos estão selecionados e atualizar o estado do nó\n                // pai\n                boolean allChildrenSelected = true;\n                for (int i = 0; i &lt; parentNode.getChildCount(); i++) {\n                    DefaultMutableTreeNode childNode = (DefaultMutableTreeNode) parentNode.getChildAt(i);\n                    Object childUserObject = childNode.getUserObject();\n                    if (childUserObject instanceof CheckBoxNode) {\n                        CheckBoxNode childCheckBoxNode = (CheckBoxNode) childUserObject;\n                        if (!childCheckBoxNode.isSelected()) {\n                            allChildrenSelected = false;\n                            break;\n                        }\n                    }\n                }\n\n                parentCheckBoxNode.setSelected(allChildrenSelected);\n\n                // Continuar atualizando os nós pais recursivamente\n                updateParentNodes(parentNode, selected);\n            }\n        }\n    }\n}\n\nclass CheckBoxNode {\n\n    private String text;\n    private boolean selected;\n\n    public CheckBoxNode(String text, boolean selected) {\n        this.text = text;\n        this.selected = selected;\n    }\n\n    public boolean isSelected() {\n        return selected;\n    }\n\n    public void setSelected(boolean newValue) {\n        selected = newValue;\n    }\n\n    public String getText() {\n        return text;\n    }\n\n    public void setText(String newValue) {\n        text = newValue;\n    }\n\n    @Override\n    public String toString() {\n        return getClass().getName() + &quot;[&quot; + text + &quot;/&quot; + selected + &quot;]&quot;;\n    }\n}\n\nclass NamedVector extends Vector&lt;Object&gt; {\n\n    private static final long serialVersionUID = 1L;\n    private String name;\n\n    public NamedVector(String name) {\n        super(); \n        this.name = name;\n    }\n\n    public NamedVector(String name, Object elements[]) {\n        this.name = name;\n        for (int i = 0, n = elements.length; i &lt; n; i++) {\n            add(elements[i]);\n        }\n    }\n\n    @Override\n    public String toString() {\n        return &quot;[&quot; + name + &quot;]&quot;;\n    }\n}\n</code></pre>\n"},{"tags":["java","ssl","admob","admob-rewardedvideoad"],"owner":{"account_id":277973,"reputation":653,"user_id":572286,"accept_rate":98,"display_name":"KisnardOnline"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":71,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690328806,"creation_date":1690092508,"question_id":76746837,"body_markdown":"My Android app is a MMORPG so it connects to my server.  For some reason, this is breaking AdMob SSV.  Ads show fine (test and real), but the server-side validation callback is never received.  This is driving me insane - appreciate any help.\r\n\r\nHere is the warning message I see in the logcat:\r\n\r\n    Precache exception\r\n    \thi: javax.net.ssl.SSLProtocolException: Read error: ssl=0x77c5e4c0b798: Failure in SSL library, usually a protocol error\r\n    \terror:1e000065:Cipher functions:OPENSSL_internal:BAD_DECRYPT (external/boringssl/src/crypto/fipsmodule/cipher/e_aes.c:1095 0x77c538ad22dc:0x00000000)\r\n    \terror:1000008b:SSL routines:OPENSSL_internal:DECRYPTION_FAILED_OR_BAD_RECORD_MAC (external/boringssl/src/ssl/tls_record.cc:298 0x77c538ad22dc:0x00000000)\r\n    \t\tat hd.a(:com.google.android.gms.policy_ads_fdr_dynamite@231710101@231710100057.526733554.526733554:6)\r\n    \t\tat hq.a(:com.google.android.gms.policy_ads_fdr_dynamite@231710101@231710100057.526733554.526733554:0)\r\n    \t\tat xv.b(:com.google.android.gms.policy_ads_fdr_dynamite@231710101@231710100057.526733554.526733554:2)\r\n    \t\tat xv.a(:com.google.android.gms.policy_ads_fdr_dynamite@231710101@231710100057.526733554.526733554:2)\r\n    \t\tat tx.t(:com.google.android.gms.policy_ads_fdr_dynamite@231710101@231710100057.526733554.526733554:4)\r\n    \t\tat yr.a(:com.google.android.gms.policy_ads_fdr_dynamite@231710101@231710100057.526733554.526733554:0)\r\n    \t\tat zt.m(:com.google.android.gms.policy_ads_fdr_dynamite@231710101@231710100057.526733554.526733554:2)\r\n    \t\tat zt.l(:com.google.android.gms.policy_ads_fdr_dynamite@231710101@231710100057.526733554.526733554:31)\r\n    \t\tat zt.j(:com.google.android.gms.policy_ads_fdr_dynamite@231710101@231710100057.526733554.526733554:39)\r\n    \t\tat zt.d(:com.google.android.gms.policy_ads_fdr_dynamite@231710101@231710100057.526733554.526733554:30)\r\n    \t\tat wc.run(:com.google.android.gms.policy_ads_fdr_dynamite@231710101@231710100057.526733554.526733554:43)\r\n    \t\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1137)\r\n    \t\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:637)\r\n    \t\tat java.lang.Thread.run(Thread.java:1012)\r\n    \tCaused by: javax.net.ssl.SSLProtocolException: Read error: ssl=0x77c5e4c0b798: Failure in SSL library, usually a protocol error\r\n    \terror:1e000065:Cipher functions:OPENSSL_internal:BAD_DECRYPT (external/boringssl/src/crypto/fipsmodule/cipher/e_aes.c:1095 0x77c538ad22dc:0x00000000)\r\n    \terror:1000008b:SSL routines:OPENSSL_internal:DECRYPTION_FAILED_OR_BAD_RECORD_MAC (external/boringssl/src/ssl/tls_record.cc:298 0x77c538ad22dc:0x00000000)\r\n    \t\tat com.android.org.conscrypt.NativeCrypto.ENGINE_SSL_read_direct(Native Method)\r\n    \t\tat com.android.org.conscrypt.NativeSsl.readDirectByteBuffer(NativeSsl.java:569)\r\n    \t\tat com.android.org.conscrypt.ConscryptEngine.readPlaintextDataDirect(ConscryptEngine.java:1095)\r\n    \t\tat com.android.org.conscrypt.ConscryptEngine.readPlaintextData(ConscryptEngine.java:1079)\r\n    \t\tat com.android.org.conscrypt.ConscryptEngine.unwrap(ConscryptEngine.java:876)\r\n    \t\tat com.android.org.conscrypt.ConscryptEngine.unwrap(ConscryptEngine.java:747)\r\n    \t\tat com.android.org.conscrypt.ConscryptEngine.unwrap(ConscryptEngine.java:712)\r\n    \t\tat com.android.org.conscrypt.ConscryptEngineSocket$SSLInputStream.processDataFromSocket(ConscryptEngineSocket.java:858)\r\n    \t\tat com.android.org.conscrypt.ConscryptEngineSocket$SSLInputStream.readUntilDataAvailable(ConscryptEngineSocket.java:824)\r\n    \t\tat com.android.org.conscrypt.ConscryptEngineSocket$SSLInputStream.read(ConscryptEngineSocket.java:797)\r\n    \t\tat com.android.okhttp.okio.Okio$2.read(Okio.java:138)\r\n    \t\tat com.android.okhttp.okio.AsyncTimeout$2.read(AsyncTimeout.java:213)\r\n    \t\tat com.android.okhttp.okio.RealBufferedSource.read(RealBufferedSource.java:51)\r\n    \t\tat com.android.okhttp.internal.http.Http1xStream$FixedLengthSource.read(Http1xStream.java:395)\r\n    \t\tat com.android.okhttp.okio.RealBufferedSource$1.read(RealBufferedSource.java:372)\r\n    \t\tat hd.a(:com.google.android.gms.policy_ads_fdr_dynamite@231710101@231710100057.526733554.526733554:3)\r\n    \t\t... 13 more\r\n\r\nHere is my client side SSL connection code:\r\n\r\n    //load your key store as a stream and initialize a KeyStore\r\n    KeyStore trustStore = KeyStore.getInstance(KeyStore.getDefaultType());\r\n    \r\n    //if your store is password protected then declare it (it can be null however)\r\n    String tsName = &quot;res/gamedata/truststore-bks&quot;;\r\n    char[] trustPassword = &quot;REDACTED&quot;.toCharArray();\r\n    \r\n    //load the stream to your store\r\n    trustStore.load(MyCommandReceiver.GetActiveActivity().getAssets().open(tsName), trustPassword);\r\n    \r\n    //initialize a trust manager factory with the trusted store\r\n    TrustManagerFactory trustFactory = TrustManagerFactory.getInstance(TrustManagerFactory.getDefaultAlgorithm());\r\n    trustFactory.init(trustStore);\r\n    \r\n    //get the trust managers from the factory\r\n    TrustManager[] trustManagers = trustFactory.getTrustManagers();\r\n    \r\n    //initialize an ssl context to use these managers and set as default\r\n    //SSLContext sslContext = SSLContext.getInstance(&quot;SSL&quot;);\r\n    SSLContext sslContext = SSLContext.getInstance(&quot;TLSv1.3&quot;);\r\n    sslContext.init(null, trustManagers, null);\r\n    //SSLContext.setDefault(sslContext); //this was breaking admob ads from loading - and likely other stuff too\r\n    \r\n    //create sslfactory from the ssl context\r\n    SSLSocketFactory factory = sslContext.getSocketFactory();\r\n    \r\n    final int connectTimeout = 6 * 1000; //6 seconds to connect\r\n    if (GameActivity.isPROD) {\r\n    \t//https://stackoverflow.com/questions/5715751/ssl-socket-connect-timeout\r\n    \t//GameActivity.sC = (SSLSocket) SSLSocketFactory.getDefault().createSocket(); //the way code wanted me to do it\r\n    \tGameActivity.sC = (SSLSocket) factory.createSocket();\r\n    \tGameActivity.sC.setSoTimeout(connectTimeout);\r\n    \tGameActivity.sC.connect(new InetSocketAddress(GameActivity.PROD_IP, GameActivity.PROD_PORT), connectTimeout);\r\n    } else {\r\n    \tGameActivity.ShowLongToast(&quot;===DEV SERVER===&quot;);\r\n    \t//https://stackoverflow.com/questions/5715751/ssl-socket-connect-timeout\r\n    \t//GameActivity.sC = (SSLSocket) SSLSocketFactory.getDefault().createSocket(); //the way code wanted me to do it\r\n    \tGameActivity.sC = (SSLSocket) factory.createSocket();\r\n    \tGameActivity.sC.setSoTimeout(connectTimeout);\r\n    \tGameActivity.sC.connect(new InetSocketAddress(GameActivity.DEV_IP, GameActivity.PROD_PORT), connectTimeout);\r\n    }\r\n    \r\n    //GameActivity.sC.setEnabledProtocols(new String[]{&quot;SSLv3&quot;, &quot;TLSv1&quot;, &quot;TLSv1.1&quot;, &quot;TLSv1.2&quot;});\r\n    //GameActivity.sC.setEnabledProtocols(new String[]{&quot;TLSv1.2&quot;, &quot;TLSv1.3&quot;});\r\n    GameActivity.sC.setEnabledProtocols(new String[]{&quot;TLSv1.3&quot;});\r\n    //even tried with line above commented out\r\n    \r\n    GameActivity.LoggerWrite(&quot;i&quot;, TAG, &quot;LoginActivity:connectToServer: ------SUPPORTED CIPHER SUITES------&quot;);\r\n    GameActivity.LoggerWrite(&quot;i&quot;, TAG, Arrays.toString(factory.getSupportedCipherSuites()));\r\n    GameActivity.LoggerWrite(&quot;i&quot;, TAG, &quot;LoginActivity:connectToServer:------SOCKET INFO------&quot;);\r\n    printSocketInfo(GameActivity.sC);\r\n    GameActivity.sC.setSoTimeout(0);\r\n    GameActivity.LoggerWrite(&quot;i&quot;, TAG, &quot;LoginActivity:connectToServer:------START HANDSHAKE------&quot;);\r\n    GameActivity.sC.startHandshake();\r\n    \r\n    GameActivity.sC.addHandshakeCompletedListener(new HandshakeCompletedListener() {\r\n    \t@Override\r\n    \tpublic void handshakeCompleted(HandshakeCompletedEvent arg0) {\r\n    \t\tGameActivity.LoggerWrite(&quot;i&quot;, TAG, &quot;LoginActivity:connectToServer:------HANDSHAKE-COMPLETED-LISTENER - START------&quot;);\r\n    \t\tGameActivity.LoggerWrite(&quot;i&quot;, TAG, &quot;LoginActivity:connectToServer:Cipher suite: &quot; + arg0.getCipherSuite());\r\n    \r\n    \t\tGameActivity.LoggerWrite(&quot;i&quot;, TAG, &quot;LoginActivity:connectToServer:Local Principal: &quot; + arg0.getLocalPrincipal());\r\n    \r\n    \t\tCertificate[] peerCertificates = null;\r\n    \t\ttry {\r\n    \t\t\tpeerCertificates = arg0.getPeerCertificates();\r\n    \t\t\tfor (Certificate s : peerCertificates) {\r\n    \t\t\t\tGameActivity.LoggerWrite(&quot;i&quot;, TAG, &quot;LoginActivity:connectToServer:Peer Certificate(public key): &quot; + s.getPublicKey());\r\n    \t\t\t}\r\n    \t\t} catch (SSLPeerUnverifiedException e) {\r\n    \t\t\tGameActivity.LoggerWrite(&quot;e&quot;, TAG, &quot;LoginActivity:connectToServer:arg0.getPeerCertificates()&quot; + e);\r\n    \t\t}\r\n    \r\n    \t\ttry {\r\n    \t\t\tGameActivity.LoggerWrite(&quot;i&quot;, TAG, &quot;LoginActivity:connectToServer:Peer Principal: &quot; + arg0.getPeerPrincipal());\r\n    \t\t} catch (SSLPeerUnverifiedException e) {\r\n    \t\t\tGameActivity.LoggerWrite(&quot;e&quot;, TAG, &quot;LoginActivity:connectToServer:arg0.getPeerPrincipal()&quot; + e);\r\n    \t\t}\r\n    \t\tGameActivity.LoggerWrite(&quot;i&quot;, TAG, &quot;LoginActivity:connectToServer:Session: &quot; + arg0.getSession());\r\n    \t\tGameActivity.LoggerWrite(&quot;i&quot;, TAG, &quot;LoginActivity:connectToServer:Socket: &quot; + arg0.getSocket());\r\n    \t\tGameActivity.LoggerWrite(&quot;i&quot;, TAG, &quot;LoginActivity:connectToServer:Source: &quot; + arg0.getSource());\r\n    \t\tGameActivity.LoggerWrite(&quot;i&quot;, TAG, &quot;LoginActivity:connectToServer:------HANDSHAKE-COMPLETED-LISTENER - END------&quot;);\r\n    \r\n    //                        connectedToServer = true; //so subsequent clicks to Login don&#39;t make new connections\r\n    \t}\r\n    });\r\n    \r\n    GameActivity.LoggerWrite(&quot;i&quot;, TAG, &quot;LoginActivity:connectToServer:------START DataStreams - START------&quot;);\r\n    GameActivity.commandIn = new DataInputStream(GameActivity.sC.getInputStream()); //create input-stream for a command socket\r\n    GameActivity.commandOut = new DataOutputStream(GameActivity.sC.getOutputStream()); //create output-stream for a command socket\r\n    GameActivity.LoggerWrite(&quot;i&quot;, TAG, &quot;LoginActivity:connectToServer:------START DataStreams - END------&quot;);\r\n    \r\n    //creating a thread for receiving commands\r\n    MyCommandReceiver.GetActiveActivity().runOnUiThread(new Runnable() {\r\n    \t@Override\r\n    \tpublic void run() {\r\n    \t\tGameActivity.commandReceiver = new MyCommandReceiver();\r\n    \t\tGameActivity.commandReceiverThread = new Thread(null, GameActivity.commandReceiver, &quot;commandReceiver-&quot; + &quot;&quot;); //characterName\r\n    \t\tGameActivity.commandReceiverThread.setDaemon(true);\r\n    \t\tGameActivity.commandReceiverThread.start();\r\n    \t}\r\n    });","title":"AdMob - Precache exception - Server Side Validation SSV not working","body":"<p>My Android app is a MMORPG so it connects to my server.  For some reason, this is breaking AdMob SSV.  Ads show fine (test and real), but the server-side validation callback is never received.  This is driving me insane - appreciate any help.</p>\n<p>Here is the warning message I see in the logcat:</p>\n<pre><code>Precache exception\n    hi: javax.net.ssl.SSLProtocolException: Read error: ssl=0x77c5e4c0b798: Failure in SSL library, usually a protocol error\n    error:1e000065:Cipher functions:OPENSSL_internal:BAD_DECRYPT (external/boringssl/src/crypto/fipsmodule/cipher/e_aes.c:1095 0x77c538ad22dc:0x00000000)\n    error:1000008b:SSL routines:OPENSSL_internal:DECRYPTION_FAILED_OR_BAD_RECORD_MAC (external/boringssl/src/ssl/tls_record.cc:298 0x77c538ad22dc:0x00000000)\n        at hd.a(:com.google.android.gms.policy_ads_fdr_dynamite@231710101@231710100057.526733554.526733554:6)\n        at hq.a(:com.google.android.gms.policy_ads_fdr_dynamite@231710101@231710100057.526733554.526733554:0)\n        at xv.b(:com.google.android.gms.policy_ads_fdr_dynamite@231710101@231710100057.526733554.526733554:2)\n        at xv.a(:com.google.android.gms.policy_ads_fdr_dynamite@231710101@231710100057.526733554.526733554:2)\n        at tx.t(:com.google.android.gms.policy_ads_fdr_dynamite@231710101@231710100057.526733554.526733554:4)\n        at yr.a(:com.google.android.gms.policy_ads_fdr_dynamite@231710101@231710100057.526733554.526733554:0)\n        at zt.m(:com.google.android.gms.policy_ads_fdr_dynamite@231710101@231710100057.526733554.526733554:2)\n        at zt.l(:com.google.android.gms.policy_ads_fdr_dynamite@231710101@231710100057.526733554.526733554:31)\n        at zt.j(:com.google.android.gms.policy_ads_fdr_dynamite@231710101@231710100057.526733554.526733554:39)\n        at zt.d(:com.google.android.gms.policy_ads_fdr_dynamite@231710101@231710100057.526733554.526733554:30)\n        at wc.run(:com.google.android.gms.policy_ads_fdr_dynamite@231710101@231710100057.526733554.526733554:43)\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1137)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:637)\n        at java.lang.Thread.run(Thread.java:1012)\n    Caused by: javax.net.ssl.SSLProtocolException: Read error: ssl=0x77c5e4c0b798: Failure in SSL library, usually a protocol error\n    error:1e000065:Cipher functions:OPENSSL_internal:BAD_DECRYPT (external/boringssl/src/crypto/fipsmodule/cipher/e_aes.c:1095 0x77c538ad22dc:0x00000000)\n    error:1000008b:SSL routines:OPENSSL_internal:DECRYPTION_FAILED_OR_BAD_RECORD_MAC (external/boringssl/src/ssl/tls_record.cc:298 0x77c538ad22dc:0x00000000)\n        at com.android.org.conscrypt.NativeCrypto.ENGINE_SSL_read_direct(Native Method)\n        at com.android.org.conscrypt.NativeSsl.readDirectByteBuffer(NativeSsl.java:569)\n        at com.android.org.conscrypt.ConscryptEngine.readPlaintextDataDirect(ConscryptEngine.java:1095)\n        at com.android.org.conscrypt.ConscryptEngine.readPlaintextData(ConscryptEngine.java:1079)\n        at com.android.org.conscrypt.ConscryptEngine.unwrap(ConscryptEngine.java:876)\n        at com.android.org.conscrypt.ConscryptEngine.unwrap(ConscryptEngine.java:747)\n        at com.android.org.conscrypt.ConscryptEngine.unwrap(ConscryptEngine.java:712)\n        at com.android.org.conscrypt.ConscryptEngineSocket$SSLInputStream.processDataFromSocket(ConscryptEngineSocket.java:858)\n        at com.android.org.conscrypt.ConscryptEngineSocket$SSLInputStream.readUntilDataAvailable(ConscryptEngineSocket.java:824)\n        at com.android.org.conscrypt.ConscryptEngineSocket$SSLInputStream.read(ConscryptEngineSocket.java:797)\n        at com.android.okhttp.okio.Okio$2.read(Okio.java:138)\n        at com.android.okhttp.okio.AsyncTimeout$2.read(AsyncTimeout.java:213)\n        at com.android.okhttp.okio.RealBufferedSource.read(RealBufferedSource.java:51)\n        at com.android.okhttp.internal.http.Http1xStream$FixedLengthSource.read(Http1xStream.java:395)\n        at com.android.okhttp.okio.RealBufferedSource$1.read(RealBufferedSource.java:372)\n        at hd.a(:com.google.android.gms.policy_ads_fdr_dynamite@231710101@231710100057.526733554.526733554:3)\n        ... 13 more\n</code></pre>\n<p>Here is my client side SSL connection code:</p>\n<pre><code>//load your key store as a stream and initialize a KeyStore\nKeyStore trustStore = KeyStore.getInstance(KeyStore.getDefaultType());\n\n//if your store is password protected then declare it (it can be null however)\nString tsName = &quot;res/gamedata/truststore-bks&quot;;\nchar[] trustPassword = &quot;REDACTED&quot;.toCharArray();\n\n//load the stream to your store\ntrustStore.load(MyCommandReceiver.GetActiveActivity().getAssets().open(tsName), trustPassword);\n\n//initialize a trust manager factory with the trusted store\nTrustManagerFactory trustFactory = TrustManagerFactory.getInstance(TrustManagerFactory.getDefaultAlgorithm());\ntrustFactory.init(trustStore);\n\n//get the trust managers from the factory\nTrustManager[] trustManagers = trustFactory.getTrustManagers();\n\n//initialize an ssl context to use these managers and set as default\n//SSLContext sslContext = SSLContext.getInstance(&quot;SSL&quot;);\nSSLContext sslContext = SSLContext.getInstance(&quot;TLSv1.3&quot;);\nsslContext.init(null, trustManagers, null);\n//SSLContext.setDefault(sslContext); //this was breaking admob ads from loading - and likely other stuff too\n\n//create sslfactory from the ssl context\nSSLSocketFactory factory = sslContext.getSocketFactory();\n\nfinal int connectTimeout = 6 * 1000; //6 seconds to connect\nif (GameActivity.isPROD) {\n    //https://stackoverflow.com/questions/5715751/ssl-socket-connect-timeout\n    //GameActivity.sC = (SSLSocket) SSLSocketFactory.getDefault().createSocket(); //the way code wanted me to do it\n    GameActivity.sC = (SSLSocket) factory.createSocket();\n    GameActivity.sC.setSoTimeout(connectTimeout);\n    GameActivity.sC.connect(new InetSocketAddress(GameActivity.PROD_IP, GameActivity.PROD_PORT), connectTimeout);\n} else {\n    GameActivity.ShowLongToast(&quot;===DEV SERVER===&quot;);\n    //https://stackoverflow.com/questions/5715751/ssl-socket-connect-timeout\n    //GameActivity.sC = (SSLSocket) SSLSocketFactory.getDefault().createSocket(); //the way code wanted me to do it\n    GameActivity.sC = (SSLSocket) factory.createSocket();\n    GameActivity.sC.setSoTimeout(connectTimeout);\n    GameActivity.sC.connect(new InetSocketAddress(GameActivity.DEV_IP, GameActivity.PROD_PORT), connectTimeout);\n}\n\n//GameActivity.sC.setEnabledProtocols(new String[]{&quot;SSLv3&quot;, &quot;TLSv1&quot;, &quot;TLSv1.1&quot;, &quot;TLSv1.2&quot;});\n//GameActivity.sC.setEnabledProtocols(new String[]{&quot;TLSv1.2&quot;, &quot;TLSv1.3&quot;});\nGameActivity.sC.setEnabledProtocols(new String[]{&quot;TLSv1.3&quot;});\n//even tried with line above commented out\n\nGameActivity.LoggerWrite(&quot;i&quot;, TAG, &quot;LoginActivity:connectToServer: ------SUPPORTED CIPHER SUITES------&quot;);\nGameActivity.LoggerWrite(&quot;i&quot;, TAG, Arrays.toString(factory.getSupportedCipherSuites()));\nGameActivity.LoggerWrite(&quot;i&quot;, TAG, &quot;LoginActivity:connectToServer:------SOCKET INFO------&quot;);\nprintSocketInfo(GameActivity.sC);\nGameActivity.sC.setSoTimeout(0);\nGameActivity.LoggerWrite(&quot;i&quot;, TAG, &quot;LoginActivity:connectToServer:------START HANDSHAKE------&quot;);\nGameActivity.sC.startHandshake();\n\nGameActivity.sC.addHandshakeCompletedListener(new HandshakeCompletedListener() {\n    @Override\n    public void handshakeCompleted(HandshakeCompletedEvent arg0) {\n        GameActivity.LoggerWrite(&quot;i&quot;, TAG, &quot;LoginActivity:connectToServer:------HANDSHAKE-COMPLETED-LISTENER - START------&quot;);\n        GameActivity.LoggerWrite(&quot;i&quot;, TAG, &quot;LoginActivity:connectToServer:Cipher suite: &quot; + arg0.getCipherSuite());\n\n        GameActivity.LoggerWrite(&quot;i&quot;, TAG, &quot;LoginActivity:connectToServer:Local Principal: &quot; + arg0.getLocalPrincipal());\n\n        Certificate[] peerCertificates = null;\n        try {\n            peerCertificates = arg0.getPeerCertificates();\n            for (Certificate s : peerCertificates) {\n                GameActivity.LoggerWrite(&quot;i&quot;, TAG, &quot;LoginActivity:connectToServer:Peer Certificate(public key): &quot; + s.getPublicKey());\n            }\n        } catch (SSLPeerUnverifiedException e) {\n            GameActivity.LoggerWrite(&quot;e&quot;, TAG, &quot;LoginActivity:connectToServer:arg0.getPeerCertificates()&quot; + e);\n        }\n\n        try {\n            GameActivity.LoggerWrite(&quot;i&quot;, TAG, &quot;LoginActivity:connectToServer:Peer Principal: &quot; + arg0.getPeerPrincipal());\n        } catch (SSLPeerUnverifiedException e) {\n            GameActivity.LoggerWrite(&quot;e&quot;, TAG, &quot;LoginActivity:connectToServer:arg0.getPeerPrincipal()&quot; + e);\n        }\n        GameActivity.LoggerWrite(&quot;i&quot;, TAG, &quot;LoginActivity:connectToServer:Session: &quot; + arg0.getSession());\n        GameActivity.LoggerWrite(&quot;i&quot;, TAG, &quot;LoginActivity:connectToServer:Socket: &quot; + arg0.getSocket());\n        GameActivity.LoggerWrite(&quot;i&quot;, TAG, &quot;LoginActivity:connectToServer:Source: &quot; + arg0.getSource());\n        GameActivity.LoggerWrite(&quot;i&quot;, TAG, &quot;LoginActivity:connectToServer:------HANDSHAKE-COMPLETED-LISTENER - END------&quot;);\n\n//                        connectedToServer = true; //so subsequent clicks to Login don't make new connections\n    }\n});\n\nGameActivity.LoggerWrite(&quot;i&quot;, TAG, &quot;LoginActivity:connectToServer:------START DataStreams - START------&quot;);\nGameActivity.commandIn = new DataInputStream(GameActivity.sC.getInputStream()); //create input-stream for a command socket\nGameActivity.commandOut = new DataOutputStream(GameActivity.sC.getOutputStream()); //create output-stream for a command socket\nGameActivity.LoggerWrite(&quot;i&quot;, TAG, &quot;LoginActivity:connectToServer:------START DataStreams - END------&quot;);\n\n//creating a thread for receiving commands\nMyCommandReceiver.GetActiveActivity().runOnUiThread(new Runnable() {\n    @Override\n    public void run() {\n        GameActivity.commandReceiver = new MyCommandReceiver();\n        GameActivity.commandReceiverThread = new Thread(null, GameActivity.commandReceiver, &quot;commandReceiver-&quot; + &quot;&quot;); //characterName\n        GameActivity.commandReceiverThread.setDaemon(true);\n        GameActivity.commandReceiverThread.start();\n    }\n});\n</code></pre>\n"},{"tags":["java","rest"],"comments":[{"owner":{"account_id":7501,"reputation":187982,"user_id":13070,"accept_rate":90,"display_name":"Mark B"},"score":1,"creation_date":1690228066,"post_id":76757600,"comment_id":135321266,"body_markdown":"You have an API endpoint that does literally nothing but check if a request header is present, and throws an error if it isn&#39;t. You are then creating a new HTTP connection to that API endpoint without adding that header to the request. What exactly do you expect to happen?","body":"You have an API endpoint that does literally nothing but check if a request header is present, and throws an error if it isn&#39;t. You are then creating a new HTTP connection to that API endpoint without adding that header to the request. What exactly do you expect to happen?"},{"owner":{"account_id":28404101,"reputation":111,"user_id":21728438,"display_name":"Eduardo Roque"},"score":0,"creation_date":1690228418,"post_id":76757600,"comment_id":135321323,"body_markdown":"This was an example, no a real scenario, I would like to know, how do i validate that my API is not consume for external app, but it can be consumed from my backend.","body":"This was an example, no a real scenario, I would like to know, how do i validate that my API is not consume for external app, but it can be consumed from my backend."},{"owner":{"account_id":7501,"reputation":187982,"user_id":13070,"accept_rate":90,"display_name":"Mark B"},"score":1,"creation_date":1690228499,"post_id":76757600,"comment_id":135321346,"body_markdown":"Add the request header to the request?","body":"Add the request header to the request?"},{"owner":{"account_id":28404101,"reputation":111,"user_id":21728438,"display_name":"Eduardo Roque"},"score":0,"creation_date":1690228607,"post_id":76757600,"comment_id":135321361,"body_markdown":"I did and i got the same result:","body":"I did and i got the same result:"},{"owner":{"account_id":28404101,"reputation":111,"user_id":21728438,"display_name":"Eduardo Roque"},"score":0,"creation_date":1690228637,"post_id":76757600,"comment_id":135321365,"body_markdown":"connection.setRequestProperty(&quot;Sec-Fetch-Site&quot;, &quot;same-origin&quot;","body":"connection.setRequestProperty(&quot;Sec-Fetch-Site&quot;, &quot;same-origin&quot;"},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":1,"creation_date":1690235298,"post_id":76757600,"comment_id":135322351,"body_markdown":"Read your code again -- you are not adding the header (not in the version in your question, anyway, which is the only version we can help you with). And what exactly does &quot;it fails&quot; mean?","body":"Read your code again -- you are not adding the header (not in the version in your question, anyway, which is the only version we can help you with). And what exactly does &quot;it fails&quot; mean?"},{"owner":{"account_id":208830,"reputation":10240,"user_id":459557,"display_name":"vanje"},"score":1,"creation_date":1690276418,"post_id":76757600,"comment_id":135327264,"body_markdown":"You should reconsider your architecture. You should move the business logic out of the endpoints. The endpoints should only be used from outside. Then you can call the other business logic function directly.","body":"You should reconsider your architecture. You should move the business logic out of the endpoints. The endpoints should only be used from outside. Then you can call the other business logic function directly."},{"owner":{"account_id":28404101,"reputation":111,"user_id":21728438,"display_name":"Eduardo Roque"},"score":0,"creation_date":1690286284,"post_id":76757600,"comment_id":135329262,"body_markdown":"The problem is this is for my work, not my personal projects, so I can&#39;t do any change.","body":"The problem is this is for my work, not my personal projects, so I can&#39;t do any change."},{"owner":{"account_id":28404101,"reputation":111,"user_id":21728438,"display_name":"Eduardo Roque"},"score":0,"creation_date":1690308384,"post_id":76757600,"comment_id":135334419,"body_markdown":"On the other hand, no matter if I send or not the header Sec-Fectch-Site, connection.setRequestProperty(&quot;Sec-Fetch-Site&quot;, &quot;same-origin&quot;), when I consume prueba from prueba2 that header is not sent.","body":"On the other hand, no matter if I send or not the header Sec-Fectch-Site, connection.setRequestProperty(&quot;Sec-Fetch-Site&quot;, &quot;same-origin&quot;), when I consume prueba from prueba2 that header is not sent."}],"answers":[{"tags":[],"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1690328420,"creation_date":1690321258,"answer_id":76766686,"question_id":76757600,"body_markdown":"Headers starting with &quot;sec-&quot; are restricted by `HttpUrlConnection`, and won&#39;t be set on the request unless the system property `sun.net.http.allowRestrictedHeaders` is set to `true`.\r\n\r\nThe Javadoc says:\r\n```\r\n/*\r\n     * Restrict setting of request headers through the public api\r\n     * consistent with JavaScript XMLHttpRequest2 with a few\r\n     * exceptions. Disallowed headers are silently ignored for\r\n     * backwards compatibility reasons rather than throwing a\r\n     * SecurityException. For example, some applets set the\r\n     * Host header since old JREs did not implement HTTP 1.1.\r\n     * Additionally, any header starting with Sec- is\r\n     * disallowed.\r\n     *\r\n     * The following headers are allowed for historical reasons:\r\n     *\r\n     * Accept-Charset, Accept-Encoding, Cookie, Cookie2, Date,\r\n     * Referer, TE, User-Agent, headers beginning with Proxy-.\r\n     *\r\n     * The following headers are allowed in a limited form:\r\n     *\r\n     * Connection: close\r\n     *\r\n     * See http://www.w3.org/TR/XMLHttpRequest2.\r\n     */\r\n```","title":"Why is HttpURLConnection ignoring the header I want to send?","body":"<p>Headers starting with &quot;sec-&quot; are restricted by <code>HttpUrlConnection</code>, and won't be set on the request unless the system property <code>sun.net.http.allowRestrictedHeaders</code> is set to <code>true</code>.</p>\n<p>The Javadoc says:</p>\n<pre><code>/*\n     * Restrict setting of request headers through the public api\n     * consistent with JavaScript XMLHttpRequest2 with a few\n     * exceptions. Disallowed headers are silently ignored for\n     * backwards compatibility reasons rather than throwing a\n     * SecurityException. For example, some applets set the\n     * Host header since old JREs did not implement HTTP 1.1.\n     * Additionally, any header starting with Sec- is\n     * disallowed.\n     *\n     * The following headers are allowed for historical reasons:\n     *\n     * Accept-Charset, Accept-Encoding, Cookie, Cookie2, Date,\n     * Referer, TE, User-Agent, headers beginning with Proxy-.\n     *\n     * The following headers are allowed in a limited form:\n     *\n     * Connection: close\n     *\n     * See http://www.w3.org/TR/XMLHttpRequest2.\n     */\n</code></pre>\n"}],"owner":{"account_id":28404101,"reputation":111,"user_id":21728438,"display_name":"Eduardo Roque"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":81,"favorite_count":0,"down_vote_count":3,"up_vote_count":1,"accepted_answer_id":76766686,"answer_count":1,"score":-2,"last_activity_date":1690328420,"creation_date":1690227855,"question_id":76757600,"body_markdown":"I want to consume my own API from my backend, the issue is that when I do the request in backend \r\nthe header Sec-Fetch-Site is not sent.\r\n\r\n```java\r\n    @POST\r\n\t@Path(&quot;/prueba&quot;)\r\n\t@Produces(MediaType.APPLICATION_JSON)\r\n\tpublic Response prueba(@Context HttpHeaders headers) {\r\n\t\tString message = &quot;OK&quot;;\r\n\t\tMultivaluedMap&lt;String, String&gt; rh = headers.getRequestHeaders();\r\n\t\tif (rh == null || rh.get(&quot;Sec-Fetch-Site&quot;) == null || !rh.get(&quot;Sec-Fetch-Site&quot;).get(0).equals(&quot;same-origin&quot;))\r\n\t\t\tmessage = &quot;Error&quot;;\t\r\n\t\t\r\n\t\treturn Response.ok(message).build();\r\n\t}\r\n\t\r\n\t@POST\r\n\t@Path(&quot;/prueba2&quot;)\r\n\t@Produces(MediaType.APPLICATION_JSON)\r\n\tpublic Response prueba2() {\r\n\t\t  URL url;\r\n\t\t  byte[] buffer = new byte[1024];\r\n\t\ttry {\r\n\t\t\turl = new URL(&quot;http://localhost:8080/login/rest/auth/prueba&quot;);\r\n\t\t\tHttpURLConnection connection = (HttpURLConnection) url.openConnection();\r\n\t\t        connection.setRequestMethod(&quot;POST&quot;);\r\n\t\t        \r\n\t\t    int responseCode = connection.getResponseCode();\r\n\t\t    if (responseCode != HttpURLConnection.HTTP_OK)\r\n\t\t     \t throw new IOException(&quot;Error: &quot; + responseCode);\r\n\t\t        \r\n\t\t\t    try (InputStream inputStream = connection.getInputStream();\r\n\t\t\t             ByteArrayOutputStream output = new ByteArrayOutputStream()) {\r\n\t\t\t           \r\n\t\t\t            int bytesRead;\r\n\t\t\t            while ((bytesRead = inputStream.read(buffer)) != -1)\r\n\t\t\t                output.write(buffer, 0, bytesRead);\r\n\t\t\t    }\r\n\t\t} catch (IOException e) {\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n```\r\n\r\nI can consume /prueba2 without problem; however it fails if I try to consume /prueba from /prueba2. What am I doing wrong? Regards.","title":"Why is HttpURLConnection ignoring the header I want to send?","body":"<p>I want to consume my own API from my backend, the issue is that when I do the request in backend\nthe header Sec-Fetch-Site is not sent.</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @POST\n    @Path(&quot;/prueba&quot;)\n    @Produces(MediaType.APPLICATION_JSON)\n    public Response prueba(@Context HttpHeaders headers) {\n        String message = &quot;OK&quot;;\n        MultivaluedMap&lt;String, String&gt; rh = headers.getRequestHeaders();\n        if (rh == null || rh.get(&quot;Sec-Fetch-Site&quot;) == null || !rh.get(&quot;Sec-Fetch-Site&quot;).get(0).equals(&quot;same-origin&quot;))\n            message = &quot;Error&quot;;  \n        \n        return Response.ok(message).build();\n    }\n    \n    @POST\n    @Path(&quot;/prueba2&quot;)\n    @Produces(MediaType.APPLICATION_JSON)\n    public Response prueba2() {\n          URL url;\n          byte[] buffer = new byte[1024];\n        try {\n            url = new URL(&quot;http://localhost:8080/login/rest/auth/prueba&quot;);\n            HttpURLConnection connection = (HttpURLConnection) url.openConnection();\n                connection.setRequestMethod(&quot;POST&quot;);\n                \n            int responseCode = connection.getResponseCode();\n            if (responseCode != HttpURLConnection.HTTP_OK)\n                 throw new IOException(&quot;Error: &quot; + responseCode);\n                \n                try (InputStream inputStream = connection.getInputStream();\n                         ByteArrayOutputStream output = new ByteArrayOutputStream()) {\n                       \n                        int bytesRead;\n                        while ((bytesRead = inputStream.read(buffer)) != -1)\n                            output.write(buffer, 0, bytesRead);\n                }\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n</code></pre>\n<p>I can consume /prueba2 without problem; however it fails if I try to consume /prueba from /prueba2. What am I doing wrong? Regards.</p>\n"},{"tags":["java","spring","rest","spring-boot","oauth-2.0"],"comments":[{"owner":{"account_id":3448603,"reputation":4018,"user_id":4392800,"display_name":"identigral"},"score":0,"creation_date":1562385841,"post_id":56782653,"comment_id":100366411,"body_markdown":"https://www.baeldung.com/spring-security-oauth-jwt is a good quick start","body":"<a href=\"https://www.baeldung.com/spring-security-oauth-jwt\" rel=\"nofollow noreferrer\">baeldung.com/spring-security-oauth-jwt</a> is a good quick start"},{"owner":{"account_id":1535921,"reputation":3060,"user_id":1431979,"display_name":"Pierre C"},"score":0,"creation_date":1690325889,"post_id":56782653,"comment_id":135337161,"body_markdown":"Unfortunately the https://www.baeldung.com/spring-security-oauth-jwt tutorial is to build an Authorization server, not a client to use it.","body":"Unfortunately the <a href=\"https://www.baeldung.com/spring-security-oauth-jwt\" rel=\"nofollow noreferrer\">baeldung.com/spring-security-oauth-jwt</a> tutorial is to build an Authorization server, not a client to use it."}],"answers":[{"tags":[],"owner":{"account_id":1535921,"reputation":3060,"user_id":1431979,"display_name":"Pierre C"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690325617,"creation_date":1690325617,"answer_id":76766993,"question_id":56782653,"body_markdown":"As a starting point, you can handle the OAuth2 JWT bearer flow manually with the following code which basically creates a filter to configure the `WebClient` that will connect to the Resource server.\r\n\r\nThe filter creates the signed JWT you will send to the Authorization server to get back the access token that will be used in the final request header as a Bearer token.\r\n\r\nNote that the flow you refer to is defined in the [RFC-7523 (art. 2.1)](https://datatracker.ietf.org/doc/html/rfc7523#section-2.1) specification.\r\n\r\nHere is the filter :\r\n\r\n```java\r\n\r\nprivate ExchangeFilterFunction jwtAuthorizationGrantFilter() {\r\n    return (request, next) -&gt; {\r\n\r\n        // Create a JWT with the required claims\r\n        String jwtToken = JWT.create()\r\n                .withClaim(&quot;iss&quot;, &quot;3eeff86e-xxxxx-beafaa5ee66f&quot;)\r\n                .withClaim(&quot;sub&quot;, &quot;a1e757a3-xxxxx-77c5780b9284&quot;)\r\n                .withClaim(&quot;aud&quot;, &quot;account-d.docusign.com&quot;)\r\n                .withIssuedAt(Instant.now())\r\n                .withExpiresAt(Instant.now().plus(100, ChronoUnit.MINUTES))\r\n                .withClaim(&quot;scope&quot;, &quot;signature impersonation&quot;)\r\n                .sign(algorithm);\r\n\r\n\r\n        // Send the JWT to the authorization server and get an access token\r\n        return webClient.post()\r\n                .uri(&quot;https://account-d.docusign.com/oauth/token&quot;) // Your authorization server token endpoint here\r\n                .accept(MediaType.APPLICATION_JSON)\r\n                .body(BodyInserters.fromFormData(&quot;grant_type&quot;, &quot;urn:ietf:params:oauth:grant-type:jwt-bearer&quot;)\r\n                        .with(&quot;assertion&quot;, jwtToken))\r\n                .retrieve()\r\n                .onStatus(HttpStatus::isError, response -&gt; {\r\n                    logTraceResponse(log, response);\r\n                    return response.createException().flatMap(Mono::error);\r\n                })\r\n                .bodyToMono(OAuth2AccessTokenResponse.class)\r\n                // Add the access token as a header to the original request\r\n                .map(tokenResponse -&gt; tokenResponse.getAccessToken().getTokenValue())\r\n                .flatMap(token -&gt; next.exchange(ClientRequest.from(request)\r\n                            .header(HttpHeaders.AUTHORIZATION, &quot;Bearer &quot; + token)\r\n                            .build()));\r\n    };\r\n}\r\n```\r\n\r\nThe only dependencies needed are the following, with the auth0 one being used to create the JWT above :\r\n\r\n```\r\nimplementation(&quot;org.springframework.boot:spring-boot-starter-oauth2-client&quot;)\r\nimplementation(&quot;org.springframework.boot:spring-boot-starter-webflux&quot;)\r\nimplementation(&quot;com.auth0:java-jwt:4.4.0&quot;)\r\n```\r\n\r\nThen you apply the filter to the `WebClient` :\r\n\r\n```java\r\nprivate WebClient dsWebClient = WebClient.builder()\r\n        .filter(jwtAuthorizationGrantFilter())\r\n        .build();\r\n\r\npublic Mono&lt;String&gt; makeApiCall() {\r\n    return dsWebClient.get()\r\n            .uri(&quot;https://account-d.docusign.com/oauth/userinfo&quot;)\r\n            .retrieve()\r\n            .bodyToMono(String.class);\r\n}\r\n````\r\n\r\nThen, the only missing part is handling the public and private keys to sign the JWT :\r\n\r\n```java\r\n\r\n    private static final Base64.Decoder DECODER = Base64.getMimeDecoder();\r\n\r\n    private static final RSAPublicKey publicKey = getRSAPublicKey();\r\n    private static final RSAPrivateKey privateKey = getRSAPrivateKey();\r\n\r\n    private static final Algorithm algorithm = Algorithm.RSA256(publicKey, privateKey);\r\n\r\n    private static RSAPrivateKey getRSAPrivateKey() {\r\n        Path privateKeyPath = Paths.get(&quot;src/main/resources/certificates/docusignPrivateKey&quot;);\r\n        try {\r\n            byte[] privateKeyBytes = buildPkcs8KeyFromPkcs1Key(convertCertFilesToBytes(privateKeyPath));\r\n            PKCS8EncodedKeySpec spec = new PKCS8EncodedKeySpec(privateKeyBytes);\r\n            KeyFactory keyFactory = KeyFactory.getInstance(&quot;RSA&quot;);\r\n            return (RSAPrivateKey) keyFactory.generatePrivate(spec);\r\n        } catch (IOException | NoSuchAlgorithmException | InvalidKeySpecException e) {\r\n            throw new RuntimeException(&quot;Cannot read private key in &quot; + privateKeyPath);\r\n        }\r\n    }\r\n\r\n    private static RSAPublicKey getRSAPublicKey() {\r\n        Path privateKeyPath = Paths.get(&quot;src/main/resources/certificates/docusignPublicKey&quot;);\r\n        try {\r\n            byte[] publicKeyBytes = convertCertFilesToBytes(privateKeyPath);\r\n            X509EncodedKeySpec spec = new X509EncodedKeySpec(publicKeyBytes);\r\n            KeyFactory keyFactory = KeyFactory.getInstance(&quot;RSA&quot;);\r\n            return (RSAPublicKey) keyFactory.generatePublic(spec);\r\n        } catch (IOException | NoSuchAlgorithmException | InvalidKeySpecException e) {\r\n            throw new RuntimeException(&quot;Cannot read private key in &quot; + privateKeyPath);\r\n        }\r\n    }\r\n\r\n    private static byte[] buildPkcs8KeyFromPkcs1Key(byte[] innerKey) {\r\n        final byte[] result = new byte[innerKey.length + 26];\r\n        System.arraycopy(DECODER.decode(&quot;MIIEvAIBADANBgkqhkiG9w0BAQEFAASCBKY=&quot;), 0, result, 0, 26);\r\n        System.arraycopy(BigInteger.valueOf(result.length - 4).toByteArray(), 0, result, 2, 2);\r\n        System.arraycopy(BigInteger.valueOf(innerKey.length).toByteArray(), 0, result, 24, 2);\r\n        System.arraycopy(innerKey, 0, result, 26, innerKey.length);\r\n        return result;\r\n    }\r\n\r\n    private static byte[] convertCertFilesToBytes(Path certPath) throws IOException {\r\n        String certString = Files.readString(certPath).replaceAll(&quot;-----.+KEY-----&quot;, &quot;&quot;);\r\n        return DECODER.decode(certString);\r\n    }\r\n\r\n    public static void logTraceResponse(Logger log, ClientResponse response) {\r\n        log.trace(&quot;Response status: {}&quot;, response.statusCode());\r\n        log.trace(&quot;Response headers: {}&quot;, response.headers().asHttpHeaders());\r\n        response.bodyToMono(String.class)\r\n                .publishOn(Schedulers.boundedElastic())\r\n                .subscribe(body -&gt; log.trace(&quot;Response body: {}&quot;, body));\r\n    }\r\n\r\n\r\n```\r\n\r\nThis solution will probably request an access token at each request.  \r\n\r\nA more involving solution would use Spring&#39;s `ReactiveClientRegistrationRepository` and `ServerOAuth2AuthorizedClientRepository` to automatically configure the Client  Registration and Authorized Clients but the lack of example/documentation of a Spring Boot CLIENT using this JWT Flow makes creating this enhanced solution a real puzzle.","title":"OAuth 2 client for JWT bearer grant using Spring OAuth","body":"<p>As a starting point, you can handle the OAuth2 JWT bearer flow manually with the following code which basically creates a filter to configure the <code>WebClient</code> that will connect to the Resource server.</p>\n<p>The filter creates the signed JWT you will send to the Authorization server to get back the access token that will be used in the final request header as a Bearer token.</p>\n<p>Note that the flow you refer to is defined in the <a href=\"https://datatracker.ietf.org/doc/html/rfc7523#section-2.1\" rel=\"nofollow noreferrer\">RFC-7523 (art. 2.1)</a> specification.</p>\n<p>Here is the filter :</p>\n<pre class=\"lang-java prettyprint-override\"><code>\nprivate ExchangeFilterFunction jwtAuthorizationGrantFilter() {\n    return (request, next) -&gt; {\n\n        // Create a JWT with the required claims\n        String jwtToken = JWT.create()\n                .withClaim(&quot;iss&quot;, &quot;3eeff86e-xxxxx-beafaa5ee66f&quot;)\n                .withClaim(&quot;sub&quot;, &quot;a1e757a3-xxxxx-77c5780b9284&quot;)\n                .withClaim(&quot;aud&quot;, &quot;account-d.docusign.com&quot;)\n                .withIssuedAt(Instant.now())\n                .withExpiresAt(Instant.now().plus(100, ChronoUnit.MINUTES))\n                .withClaim(&quot;scope&quot;, &quot;signature impersonation&quot;)\n                .sign(algorithm);\n\n\n        // Send the JWT to the authorization server and get an access token\n        return webClient.post()\n                .uri(&quot;https://account-d.docusign.com/oauth/token&quot;) // Your authorization server token endpoint here\n                .accept(MediaType.APPLICATION_JSON)\n                .body(BodyInserters.fromFormData(&quot;grant_type&quot;, &quot;urn:ietf:params:oauth:grant-type:jwt-bearer&quot;)\n                        .with(&quot;assertion&quot;, jwtToken))\n                .retrieve()\n                .onStatus(HttpStatus::isError, response -&gt; {\n                    logTraceResponse(log, response);\n                    return response.createException().flatMap(Mono::error);\n                })\n                .bodyToMono(OAuth2AccessTokenResponse.class)\n                // Add the access token as a header to the original request\n                .map(tokenResponse -&gt; tokenResponse.getAccessToken().getTokenValue())\n                .flatMap(token -&gt; next.exchange(ClientRequest.from(request)\n                            .header(HttpHeaders.AUTHORIZATION, &quot;Bearer &quot; + token)\n                            .build()));\n    };\n}\n</code></pre>\n<p>The only dependencies needed are the following, with the auth0 one being used to create the JWT above :</p>\n<pre><code>implementation(&quot;org.springframework.boot:spring-boot-starter-oauth2-client&quot;)\nimplementation(&quot;org.springframework.boot:spring-boot-starter-webflux&quot;)\nimplementation(&quot;com.auth0:java-jwt:4.4.0&quot;)\n</code></pre>\n<p>Then you apply the filter to the <code>WebClient</code> :</p>\n<pre class=\"lang-java prettyprint-override\"><code>private WebClient dsWebClient = WebClient.builder()\n        .filter(jwtAuthorizationGrantFilter())\n        .build();\n\npublic Mono&lt;String&gt; makeApiCall() {\n    return dsWebClient.get()\n            .uri(&quot;https://account-d.docusign.com/oauth/userinfo&quot;)\n            .retrieve()\n            .bodyToMono(String.class);\n}\n</code></pre>\n<p>Then, the only missing part is handling the public and private keys to sign the JWT :</p>\n<pre class=\"lang-java prettyprint-override\"><code>\n    private static final Base64.Decoder DECODER = Base64.getMimeDecoder();\n\n    private static final RSAPublicKey publicKey = getRSAPublicKey();\n    private static final RSAPrivateKey privateKey = getRSAPrivateKey();\n\n    private static final Algorithm algorithm = Algorithm.RSA256(publicKey, privateKey);\n\n    private static RSAPrivateKey getRSAPrivateKey() {\n        Path privateKeyPath = Paths.get(&quot;src/main/resources/certificates/docusignPrivateKey&quot;);\n        try {\n            byte[] privateKeyBytes = buildPkcs8KeyFromPkcs1Key(convertCertFilesToBytes(privateKeyPath));\n            PKCS8EncodedKeySpec spec = new PKCS8EncodedKeySpec(privateKeyBytes);\n            KeyFactory keyFactory = KeyFactory.getInstance(&quot;RSA&quot;);\n            return (RSAPrivateKey) keyFactory.generatePrivate(spec);\n        } catch (IOException | NoSuchAlgorithmException | InvalidKeySpecException e) {\n            throw new RuntimeException(&quot;Cannot read private key in &quot; + privateKeyPath);\n        }\n    }\n\n    private static RSAPublicKey getRSAPublicKey() {\n        Path privateKeyPath = Paths.get(&quot;src/main/resources/certificates/docusignPublicKey&quot;);\n        try {\n            byte[] publicKeyBytes = convertCertFilesToBytes(privateKeyPath);\n            X509EncodedKeySpec spec = new X509EncodedKeySpec(publicKeyBytes);\n            KeyFactory keyFactory = KeyFactory.getInstance(&quot;RSA&quot;);\n            return (RSAPublicKey) keyFactory.generatePublic(spec);\n        } catch (IOException | NoSuchAlgorithmException | InvalidKeySpecException e) {\n            throw new RuntimeException(&quot;Cannot read private key in &quot; + privateKeyPath);\n        }\n    }\n\n    private static byte[] buildPkcs8KeyFromPkcs1Key(byte[] innerKey) {\n        final byte[] result = new byte[innerKey.length + 26];\n        System.arraycopy(DECODER.decode(&quot;MIIEvAIBADANBgkqhkiG9w0BAQEFAASCBKY=&quot;), 0, result, 0, 26);\n        System.arraycopy(BigInteger.valueOf(result.length - 4).toByteArray(), 0, result, 2, 2);\n        System.arraycopy(BigInteger.valueOf(innerKey.length).toByteArray(), 0, result, 24, 2);\n        System.arraycopy(innerKey, 0, result, 26, innerKey.length);\n        return result;\n    }\n\n    private static byte[] convertCertFilesToBytes(Path certPath) throws IOException {\n        String certString = Files.readString(certPath).replaceAll(&quot;-----.+KEY-----&quot;, &quot;&quot;);\n        return DECODER.decode(certString);\n    }\n\n    public static void logTraceResponse(Logger log, ClientResponse response) {\n        log.trace(&quot;Response status: {}&quot;, response.statusCode());\n        log.trace(&quot;Response headers: {}&quot;, response.headers().asHttpHeaders());\n        response.bodyToMono(String.class)\n                .publishOn(Schedulers.boundedElastic())\n                .subscribe(body -&gt; log.trace(&quot;Response body: {}&quot;, body));\n    }\n\n\n</code></pre>\n<p>This solution will probably request an access token at each request.</p>\n<p>A more involving solution would use Spring's <code>ReactiveClientRegistrationRepository</code> and <code>ServerOAuth2AuthorizedClientRepository</code> to automatically configure the Client  Registration and Authorized Clients but the lack of example/documentation of a Spring Boot CLIENT using this JWT Flow makes creating this enhanced solution a real puzzle.</p>\n"}],"owner":{"account_id":5602297,"reputation":61,"user_id":4438155,"display_name":"Siva Kumar K"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":911,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"answer_count":1,"score":6,"last_activity_date":1690325617,"creation_date":1561597344,"question_id":56782653,"body_markdown":"In the Spring OAUTH library under org.springframework.security.oauth2.client.token.grant package we have grants for client, code, implicit and password. \r\n\r\nThere are some extension grants like jwt-bearer or SAML which requires assertion to be sent for token generation. \r\n\r\nGrant type: urn:ietf:params:oauth:grant-type:jwt-bearer\r\n\r\nDoes Spring OAUTH 2 support these extension grants. If so which class to use? Do we need to write a custome class to support it ?","title":"OAuth 2 client for JWT bearer grant using Spring OAuth","body":"<p>In the Spring OAUTH library under org.springframework.security.oauth2.client.token.grant package we have grants for client, code, implicit and password. </p>\n\n<p>There are some extension grants like jwt-bearer or SAML which requires assertion to be sent for token generation. </p>\n\n<p>Grant type: urn:ietf:params:oauth:grant-type:jwt-bearer</p>\n\n<p>Does Spring OAUTH 2 support these extension grants. If so which class to use? Do we need to write a custome class to support it ?</p>\n"},{"tags":["java","spring","mocking","mockito","postconstruct"],"comments":[{"owner":{"account_id":1082858,"reputation":104688,"user_id":1079354,"accept_rate":93,"display_name":"Makoto"},"score":0,"creation_date":1537894597,"post_id":52502758,"comment_id":91947103,"body_markdown":"What are you looking to get out of this mock?  Are you using this service somewhere else or are you actually testing the service?","body":"What are you looking to get out of this mock?  Are you using this service somewhere else or are you actually testing the service?"},{"owner":{"account_id":10712164,"reputation":658,"user_id":7884076,"accept_rate":31,"display_name":"Jan Testowy"},"score":0,"creation_date":1537895563,"post_id":52502758,"comment_id":91947579,"body_markdown":"I am just going wondering how mockito treats @postconstruct. I am expecting something like: CONSTRUCTOR, POST CONSTRUCT","body":"I am just going wondering how mockito treats @postconstruct. I am expecting something like: CONSTRUCTOR, POST CONSTRUCT"},{"owner":{"account_id":1082858,"reputation":104688,"user_id":1079354,"accept_rate":93,"display_name":"Makoto"},"score":1,"creation_date":1537896390,"post_id":52502758,"comment_id":91947972,"body_markdown":"Why would it do anything with that?  You&#39;re mocking (e.g. faking) the Spring-driven interactions with this object, so the Spring construct of `@PostConstruct` wouldn&#39;t even apply.  So again, what is your goal with this mock?  Do you want to test this service or do you want to use a mock of your service somewhere else?","body":"Why would it do anything with that?  You&#39;re mocking (e.g. faking) the Spring-driven interactions with this object, so the Spring construct of <code>@PostConstruct</code> wouldn&#39;t even apply.  So again, what is your goal with this mock?  Do you want to test this service or do you want to use a mock of your service somewhere else?"}],"answers":[{"comments":[{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":25,"creation_date":1537897006,"post_id":52503151,"comment_id":91948269,"body_markdown":"`@PostConstruct` isn&#39;t only a spring concept, it isn&#39;t even a Spring annotation.","body":"<code>@PostConstruct</code> isn&#39;t only a spring concept, it isn&#39;t even a Spring annotation."}],"tags":[],"owner":{"account_id":14402680,"reputation":312,"user_id":10403784,"display_name":"Vadim Yemelyanov"},"comment_count":1,"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1690325308,"creation_date":1537894049,"answer_id":52503151,"question_id":52502758,"body_markdown":"Because PostConstruct is only spring concept. But you can call postConstruct manually.\r\n\r\n    @Before\r\n    public void prepare() {\r\n        MockitoAnnotations.initMocks(this);\r\n        this.service.init(); //your Injected bean\r\n    }\r\n\r\n\r\n","title":"Testing @Postconstruct with Mockito","body":"<p>Because PostConstruct is only spring concept. But you can call postConstruct manually.</p>\n<pre><code>@Before\npublic void prepare() {\n    MockitoAnnotations.initMocks(this);\n    this.service.init(); //your Injected bean\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1852692,"reputation":1963,"user_id":1678893,"display_name":"goedi"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1537898270,"creation_date":1537897292,"answer_id":52503965,"question_id":52502758,"body_markdown":"`@PostConstruct` is an annotation defined by JSR 250 and it will be ignored in your current test cause you are using `@RunWith(MockitoJUnitRunner.class)`, i.e., A JUnit runner that is not aware of this annotation. If you are writing unit tests they should be simple ad just test the business logic of your application, but if you want to write integrations tests that use some third-party code that is able to process this kind of annotation, like Spring, for example. Then you can annotate your test class with following annotations:\r\n\r\n    @RunWith(SpringJUnit4ClassRunner.class)\r\n    @ContextConfiguration(classes = {AppConfig.class})","title":"Testing @Postconstruct with Mockito","body":"<p><code>@PostConstruct</code> is an annotation defined by JSR 250 and it will be ignored in your current test cause you are using <code>@RunWith(MockitoJUnitRunner.class)</code>, i.e., A JUnit runner that is not aware of this annotation. If you are writing unit tests they should be simple ad just test the business logic of your application, but if you want to write integrations tests that use some third-party code that is able to process this kind of annotation, like Spring, for example. Then you can annotate your test class with following annotations:</p>\n\n<pre><code>@RunWith(SpringJUnit4ClassRunner.class)\n@ContextConfiguration(classes = {AppConfig.class})\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6778658,"reputation":1374,"user_id":5219732,"display_name":"Aleksandr Semyannikov"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1542565800,"creation_date":1537897791,"answer_id":52504081,"question_id":52502758,"body_markdown":"I modified a little your service by adding a method foo:\r\n\r\n    @Service\r\n    public class MyService {\r\n        public MyService() {\r\n            System.out.println(&quot;CONSTRUKTOR&quot;);\r\n        }\r\n    \r\n        @PostConstruct\r\n        public void init() {\r\n            System.out.println(&quot;POST CONSTRUCT&quot;);\r\n        }\r\n    \r\n        public String foo() {\r\n            return &quot;bar&quot;;\r\n        }\r\n    }\r\n\r\nIf you want to get behaviour, that you described, there are at least two possibilities:\r\n\r\n 1. `@RunWith(SpringJUnit4ClassRunner.class)` + `@Autowired` - that combination will let you to get a usual service in your test\r\n\r\n        @RunWith(SpringJUnit4ClassRunner.class)\r\n        @ContextConfiguration(classes = MyService.class)\r\n        public class Mockito1 {\r\n        \r\n            @Autowired\r\n            private MyService service;\r\n        \r\n            @Before\r\n            public void init() {\r\n            }\r\n        \r\n            @Test\r\n            public void name() throws Exception {\r\n                System.out.println(service.foo());\r\n            }\r\n        }\r\n\r\nThis code will print:\r\n\r\n    CONSTRUKTOR\r\n    POST CONSTRUCT\r\n    bar\r\n\r\n 2. `@RunWith(SpringJUnit4ClassRunner.class)` + `@SpyBean` - that combination will let you to get a service in your test and to modify it&#39;s behaviour using Mockito\r\n\r\n        @RunWith(SpringJUnit4ClassRunner.class)\r\n        @ContextConfiguration(classes = MyService.class)\r\n        public class Mockito1 {\r\n\r\n            @SpyBean\r\n            private MyService service;\r\n\r\n            @Before\r\n            public void init() {\r\n            }\r\n\r\n            @Test\r\n            public void name() throws Exception {\r\n                System.out.println(service.foo());\r\n                Mockito.when(service.foo()).thenReturn(&quot;FOO&quot;);\r\n                System.out.println(service.foo());\r\n            }\r\n        }\r\n\r\nThis code will print:\r\n\r\n    CONSTRUKTOR\r\n    POST CONSTRUCT\r\n    bar\r\n    FOO","title":"Testing @Postconstruct with Mockito","body":"<p>I modified a little your service by adding a method foo:</p>\n\n<pre><code>@Service\npublic class MyService {\n    public MyService() {\n        System.out.println(\"CONSTRUKTOR\");\n    }\n\n    @PostConstruct\n    public void init() {\n        System.out.println(\"POST CONSTRUCT\");\n    }\n\n    public String foo() {\n        return \"bar\";\n    }\n}\n</code></pre>\n\n<p>If you want to get behaviour, that you described, there are at least two possibilities:</p>\n\n<ol>\n<li><p><code>@RunWith(SpringJUnit4ClassRunner.class)</code> + <code>@Autowired</code> - that combination will let you to get a usual service in your test</p>\n\n<pre><code>@RunWith(SpringJUnit4ClassRunner.class)\n@ContextConfiguration(classes = MyService.class)\npublic class Mockito1 {\n\n    @Autowired\n    private MyService service;\n\n    @Before\n    public void init() {\n    }\n\n    @Test\n    public void name() throws Exception {\n        System.out.println(service.foo());\n    }\n}\n</code></pre></li>\n</ol>\n\n<p>This code will print:</p>\n\n<pre><code>CONSTRUKTOR\nPOST CONSTRUCT\nbar\n</code></pre>\n\n<ol start=\"2\">\n<li><p><code>@RunWith(SpringJUnit4ClassRunner.class)</code> + <code>@SpyBean</code> - that combination will let you to get a service in your test and to modify it's behaviour using Mockito</p>\n\n<pre><code>@RunWith(SpringJUnit4ClassRunner.class)\n@ContextConfiguration(classes = MyService.class)\npublic class Mockito1 {\n\n    @SpyBean\n    private MyService service;\n\n    @Before\n    public void init() {\n    }\n\n    @Test\n    public void name() throws Exception {\n        System.out.println(service.foo());\n        Mockito.when(service.foo()).thenReturn(\"FOO\");\n        System.out.println(service.foo());\n    }\n}\n</code></pre></li>\n</ol>\n\n<p>This code will print:</p>\n\n<pre><code>CONSTRUKTOR\nPOST CONSTRUCT\nbar\nFOO\n</code></pre>\n"}],"owner":{"account_id":10712164,"reputation":658,"user_id":7884076,"accept_rate":31,"display_name":"Jan Testowy"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":35544,"favorite_count":0,"down_vote_count":0,"up_vote_count":9,"answer_count":3,"score":9,"last_activity_date":1690325308,"creation_date":1537892739,"question_id":52502758,"body_markdown":"Why when I injecting mocks via `Mockito` my `@Postconstruckt` method is not calling?\r\n\r\n    @Service\r\n    public class MyService {\r\n        public MyService() {\r\n            System.out.println(&quot;CONSTRUKTOR&quot;);\r\n        }\r\n    \r\n        @PostConstruct\r\n        public void init() {\r\n            System.out.println(&quot;POST CONSTRUCT&quot;);\r\n        }\r\n\r\n    @RunWith(MockitoJUnitRunner.class)\r\n    public class Mockito1 {\r\n    \r\n        @InjectMocks\r\n        private MyService service;\r\n    \r\n        @Before\r\n        public void init() {\r\n        }\r\n\r\nOutput:\r\nOnly: `CONSTRUKTOR`","title":"Testing @Postconstruct with Mockito","body":"<p>Why when I injecting mocks via <code>Mockito</code> my <code>@Postconstruckt</code> method is not calling?</p>\n\n<pre><code>@Service\npublic class MyService {\n    public MyService() {\n        System.out.println(\"CONSTRUKTOR\");\n    }\n\n    @PostConstruct\n    public void init() {\n        System.out.println(\"POST CONSTRUCT\");\n    }\n\n@RunWith(MockitoJUnitRunner.class)\npublic class Mockito1 {\n\n    @InjectMocks\n    private MyService service;\n\n    @Before\n    public void init() {\n    }\n</code></pre>\n\n<p>Output:\nOnly: <code>CONSTRUKTOR</code></p>\n"},{"tags":["java","tomcat","dspace"],"comments":[{"owner":{"account_id":4046639,"reputation":97,"user_id":3327677,"display_name":"Roel"},"score":0,"creation_date":1460635174,"post_id":36616668,"comment_id":60840635,"body_markdown":"When I try to start the xmlui webapp from the tomcat _Application manager_ it just says:     **FAIL - Application at context path /xmlui could not be started**","body":"When I try to start the xmlui webapp from the tomcat <i>Application manager</i> it just says:     <b>FAIL - Application at context path /xmlui could not be started</b>"},{"owner":{"account_id":4046639,"reputation":97,"user_id":3327677,"display_name":"Roel"},"score":0,"creation_date":1460635297,"post_id":36616668,"comment_id":60840728,"body_markdown":"Same for the jspui **FAIL - Application at context path /jspui could not be started**","body":"Same for the jspui <b>FAIL - Application at context path /jspui could not be started</b>"},{"owner":{"account_id":27490,"reputation":2189,"user_id":72625,"accept_rate":75,"display_name":"schweerelos"},"score":0,"creation_date":1460669315,"post_id":36616668,"comment_id":60863773,"body_markdown":"It would be useful if you could show us the content of the files you&#39;ve added to /etc/tomcat7/localhost. Also, is there anything in the tomcat log file (probably `/var/log/tomcat7/catalina.out` or similar)?","body":"It would be useful if you could show us the content of the files you&#39;ve added to /etc/tomcat7/localhost. Also, is there anything in the tomcat log file (probably <code>&#47;var&#47;log&#47;tomcat7&#47;catalina.out</code> or similar)?"},{"owner":{"account_id":4046639,"reputation":97,"user_id":3327677,"display_name":"Roel"},"score":0,"creation_date":1460709041,"post_id":36616668,"comment_id":60878046,"body_markdown":"As you asked, I added an image of me doing an ls inside localhost and the stack of my tomcat.","body":"As you asked, I added an image of me doing an ls inside localhost and the stack of my tomcat."},{"owner":{"account_id":27490,"reputation":2189,"user_id":72625,"accept_rate":75,"display_name":"schweerelos"},"score":0,"creation_date":1460928868,"post_id":36616668,"comment_id":60954697,"body_markdown":"You need to tell us which of the files has the content you copied. Is that the `xmlui.xml` one, and do the others have the docBase adjusted appropriately? Is your XMLUI actually installed in `/dspace/webapps/xmlui` -- that is, does that directory exist and contain files? Is that directory readable by the user running tomcat?","body":"You need to tell us which of the files has the content you copied. Is that the <code>xmlui.xml</code> one, and do the others have the docBase adjusted appropriately? Is your XMLUI actually installed in <code>&#47;dspace&#47;webapps&#47;xmlui</code> -- that is, does that directory exist and contain files? Is that directory readable by the user running tomcat?"},{"owner":{"account_id":4046639,"reputation":97,"user_id":3327677,"display_name":"Roel"},"score":0,"creation_date":1460962531,"post_id":36616668,"comment_id":60963209,"body_markdown":"I added the information you asked for. I noticed the logs of the tomcat already got deleted. i&#39;m looking for a site to copy my log in to so it stays readable.","body":"I added the information you asked for. I noticed the logs of the tomcat already got deleted. i&#39;m looking for a site to copy my log in to so it stays readable."},{"owner":{"account_id":4046639,"reputation":97,"user_id":3327677,"display_name":"Roel"},"score":0,"creation_date":1460968007,"post_id":36616668,"comment_id":60966261,"body_markdown":"Added /var/log/tomcat7/catalina.out logs with the use of gist","body":"Added /var/log/tomcat7/catalina.out logs with the use of gist"},{"owner":{"account_id":27490,"reputation":2189,"user_id":72625,"accept_rate":75,"display_name":"schweerelos"},"score":0,"creation_date":1461032872,"post_id":36616668,"comment_id":61002652,"body_markdown":"I&#39;m running out of ideas. Is there anything in the DSpace log file? I note your gist says `SEVERE: One or more listeners failed to start. Full details will be found in the appropriate container log file` but I don&#39;t know where those container log files would be.","body":"I&#39;m running out of ideas. Is there anything in the DSpace log file? I note your gist says <code>SEVERE: One or more listeners failed to start. Full details will be found in the appropriate container log file</code> but I don&#39;t know where those container log files would be."},{"owner":{"account_id":4046639,"reputation":97,"user_id":3327677,"display_name":"Roel"},"score":0,"creation_date":1461049361,"post_id":36616668,"comment_id":61008477,"body_markdown":"I will start over from a clean Tomcat install.","body":"I will start over from a clean Tomcat install."}],"answers":[{"tags":[],"owner":{"account_id":5351663,"reputation":1854,"user_id":4970442,"display_name":"Pablo Bianchi"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690325015,"creation_date":1690325015,"answer_id":76766950,"question_id":36616668,"body_markdown":"In my case, the issue was I copied all the Solr cores to `/opt/solr/server/solr/configsets` instead of to `/var/solr/data`, as it should on a Debian (11 in my case). From [step 13 on the documentation][1]:\r\n\r\n&lt;pre&gt;\r\n# [solr] is the location where Solr is installed.\r\n&lt;strong&gt;# NOTE: On Debian systems the configsets may be under /var/solr/data/configsets&lt;/strong&gt;\r\ncp -R [dspace]/solr/* [solr]/server/solr/configsets\r\n&lt;/pre&gt;\r\n\r\nSeems that [in other cases][2] is a permissions issue.\r\n\r\n\r\n  [1]: https://wiki.lyrasis.org/display/DSDOC7x/Installing+DSpace#InstallingDSpace-BackendInstallation\r\n  [2]: https://dspacegeek.blogspot.com/2017/10/http-status-404.html","title":"Intalled Dspace on Debian, 404 error stays after copying files to tomcat webapps","body":"<p>In my case, the issue was I copied all the Solr cores to <code>/opt/solr/server/solr/configsets</code> instead of to <code>/var/solr/data</code>, as it should on a Debian (11 in my case). From <a href=\"https://wiki.lyrasis.org/display/DSDOC7x/Installing+DSpace#InstallingDSpace-BackendInstallation\" rel=\"nofollow noreferrer\">step 13 on the documentation</a>:</p>\n<pre>\n# [solr] is the location where Solr is installed.\n<strong># NOTE: On Debian systems the configsets may be under /var/solr/data/configsets</strong>\ncp -R [dspace]/solr/* [solr]/server/solr/configsets\n</pre>\n<p>Seems that <a href=\"https://dspacegeek.blogspot.com/2017/10/http-status-404.html\" rel=\"nofollow noreferrer\">in other cases</a> is a permissions issue.</p>\n"}],"owner":{"account_id":4046639,"reputation":97,"user_id":3327677,"display_name":"Roel"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":676,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1690325015,"creation_date":1460619662,"question_id":36616668,"body_markdown":"This is my first time installing Dspace,\r\nI followed the tutorial from the duraspace site.\r\n\r\nwiki.duraspace.org/display/DSDOC5x/Installing+DSpace\r\n\r\n - Mvn package was a succes.\r\n - Building the package with ant was a succes.\r\n - Initializing the database was successful\r\n\r\nI also added the needed xml files to /etc/tomcat7/localhost/\r\n\r\nI then started my tomcat service but 127.0.0.1:8080/xmlui gives me a 404.\r\nThe original tomcat pages(docs,...) do work.\r\n\r\nI&#39;ve already looked at the \r\n\r\n/var/log/tomcat7/catalina.out for seeing what goes wrong and found no errors. So I&#39;m out of inspiration.\r\n\r\nI have never worked with Dspace or Tomcat before.\r\nIt could be that I looked over something small.\r\n\r\nSome help would be welcome. Thank you very much\r\n\r\nIf it can help these are the files inside my Catalina/localhost\r\n\r\n[Files inside Catalina/localhost][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/FVT3v.png\r\n\r\nInside the not standard xml files the code is (as example xmlui.xml):\r\n\r\n    &lt;?xml version=&#39;1.0&#39;?&gt;\r\n    &lt;Context\r\n    docBase=&quot;/dspace/webapps/xmlui&quot;\r\n    reloadable=&quot;true&quot;\r\n    cachingAllowed=&quot;false&quot;/&gt;\r\n\r\nThe files inside the /dspace/webapps/xmlui as ls:\r\n\r\n    aspects             exception2html.xslt  META-INF      static  WEB-INF\r\n    exception2dri.xslt  i18n                 sitemap.xmap  themes\r\n\r\nAbout rights: It should not be a problem. For now I just dit a chmod -R 777 on the /dspace folder.\r\n\r\nA remembrance that all services run except of my rest, xmlui and jspui.\r\n\r\n\r\nthe log of my tomcat starting up in /var/log/tomcat7/catalina.out:\r\n\r\nhttps://gist.github.com/RoelKint/06795ccc0fc8c56367554e4c860c8ded\r\n\r\n","title":"Intalled Dspace on Debian, 404 error stays after copying files to tomcat webapps","body":"<p>This is my first time installing Dspace,\nI followed the tutorial from the duraspace site.</p>\n\n<p>wiki.duraspace.org/display/DSDOC5x/Installing+DSpace</p>\n\n<ul>\n<li>Mvn package was a succes.</li>\n<li>Building the package with ant was a succes.</li>\n<li>Initializing the database was successful</li>\n</ul>\n\n<p>I also added the needed xml files to /etc/tomcat7/localhost/</p>\n\n<p>I then started my tomcat service but 127.0.0.1:8080/xmlui gives me a 404.\nThe original tomcat pages(docs,...) do work.</p>\n\n<p>I've already looked at the </p>\n\n<p>/var/log/tomcat7/catalina.out for seeing what goes wrong and found no errors. So I'm out of inspiration.</p>\n\n<p>I have never worked with Dspace or Tomcat before.\nIt could be that I looked over something small.</p>\n\n<p>Some help would be welcome. Thank you very much</p>\n\n<p>If it can help these are the files inside my Catalina/localhost</p>\n\n<p><a href=\"https://i.stack.imgur.com/FVT3v.png\" rel=\"nofollow\">Files inside Catalina/localhost</a></p>\n\n<p>Inside the not standard xml files the code is (as example xmlui.xml):</p>\n\n<pre><code>&lt;?xml version='1.0'?&gt;\n&lt;Context\ndocBase=\"/dspace/webapps/xmlui\"\nreloadable=\"true\"\ncachingAllowed=\"false\"/&gt;\n</code></pre>\n\n<p>The files inside the /dspace/webapps/xmlui as ls:</p>\n\n<pre><code>aspects             exception2html.xslt  META-INF      static  WEB-INF\nexception2dri.xslt  i18n                 sitemap.xmap  themes\n</code></pre>\n\n<p>About rights: It should not be a problem. For now I just dit a chmod -R 777 on the /dspace folder.</p>\n\n<p>A remembrance that all services run except of my rest, xmlui and jspui.</p>\n\n<p>the log of my tomcat starting up in /var/log/tomcat7/catalina.out:</p>\n\n<p><a href=\"https://gist.github.com/RoelKint/06795ccc0fc8c56367554e4c860c8ded\" rel=\"nofollow\">https://gist.github.com/RoelKint/06795ccc0fc8c56367554e4c860c8ded</a></p>\n"},{"tags":["java","android","ssl","ssl-certificate"],"owner":{"account_id":15937140,"reputation":57,"user_id":16618701,"display_name":"stani gam"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":213,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690324744,"creation_date":1690324744,"question_id":76766925,"body_markdown":"I am currently trying to connect to an MQTT broker via SSL/TLS from an Android client. For this, I have a combination of three keys: crt, key, and ca. The ca key is self-signed and not trusted by default.\r\n\r\nThis is the certificate information:\r\n\r\n```\r\nSubject\tiot.fr-par.scw.cloud\r\nCommon names\tiot.fr-par.scw.cloud\r\nAlternative names\tiot.fr-par.scw.cloud\r\nSerial Number\t3a6e35afb2dd3f43908e40d10c3a01f66dfd79f0\r\nValid from\tMon, 29 May 2023 08:24:00 UTC\r\nValid until\tTue, 28 May 2024 08:24:00 UTC (expires in 10 months and 2 days)\r\nIssuer\tiot.fr-par.scw.cloud\r\nSignature algorithm\tSHA512withRSA\r\n```\r\n\r\nI am using the Paho MQTT library in Android. Here is the code that I am using to connect and publish:\r\n\r\n```java\r\npackage com.dakatech.daka_ap;\r\n\r\nimport android.content.Context;\r\nimport org.eclipse.paho.android.service.MqttAndroidClient;\r\nimport org.eclipse.paho.client.mqttv3.*;\r\n\r\nimport javax.net.ssl.KeyManagerFactory;\r\nimport javax.net.ssl.SSLContext;\r\nimport javax.net.ssl.TrustManagerFactory;\r\nimport java.io.InputStream;\r\nimport java.security.KeyStore;\r\nimport java.security.cert.CertificateFactory;\r\nimport java.security.cert.X509Certificate;\r\n\r\npublic class MqttClient {\r\n\r\n    private static final String brokerUrl = &quot;ssl://iot.fr-par.scw.cloud:8883&quot;;\r\n    private static final String clientId = &quot;AndroidClient&quot;;\r\n    private static final String topic = &quot;your/topic&quot;;\r\n    private final Context context; // Initialized in constructor\r\n\r\n    public MqttClient(Context context) {\r\n        this.context = context;\r\n    }\r\n\r\n    public void connectAndPublish() {\r\n        try {\r\n\r\n            // Cr&#233;er le SSLContext\r\n            SSLContext sslContext;\r\n            try {\r\n                sslContext = getSslContext(context);\r\n            } catch (Exception e) {\r\n                e.printStackTrace();\r\n                return;\r\n            }\r\n\r\n            MqttAndroidClient client = new MqttAndroidClient(context, brokerUrl, clientId);\r\n            MqttConnectOptions options = new MqttConnectOptions();\r\n            options.setSocketFactory(sslContext.getSocketFactory());\r\n\r\n            client.connect(options, null, new IMqttActionListener() {\r\n                @Override\r\n                public void onSuccess(IMqttToken asyncActionToken) {\r\n                    // Connect&#233;, publier un message\r\n                    MqttMessage message = new MqttMessage(&quot;Hello, world!&quot;.getBytes());\r\n                    message.setQos(1);\r\n                    try {\r\n                        client.publish(topic, message);\r\n                    } catch (MqttException e) {\r\n                        e.printStackTrace();\r\n                    }\r\n                }\r\n\r\n                @Override\r\n                public void onFailure(IMqttToken asyncActionToken, Throwable exception) {\r\n                    // La connexion a &#233;chou&#233;\r\n                    exception.printStackTrace();\r\n                }\r\n            });\r\n        } catch (Exception e) {\r\n            // G&#233;rer l&#39;erreur\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\n        private SSLContext getSslContext(Context context) throws Exception {\r\n            // Charger le certificat CA\r\n            CertificateFactory cf = CertificateFactory.getInstance(&quot;X.509&quot;);\r\n            InputStream caInput = context.getResources().openRawResource(R.raw.ca);\r\n            X509Certificate caCertificate;\r\n            try {\r\n                caCertificate = (X509Certificate) cf.generateCertificate(caInput);\r\n            } finally {\r\n                caInput.close();\r\n            }\r\n            String keyStoreType = KeyStore.getDefaultType();\r\n            KeyStore keyStore = KeyStore.getInstance(keyStoreType);\r\n            keyStore.load(null, null);\r\n            keyStore.setCertificateEntry(&quot;ca&quot;, caCertificate);\r\n\r\n            // Cr&#233;er un TrustManager qui fait confiance au keystore\r\n            String tmfAlgorithm = TrustManagerFactory.getDefaultAlgorithm();\r\n            TrustManagerFactory tmf = TrustManagerFactory.getInstance(tmfAlgorithm);\r\n            tmf.init(keyStore);\r\n\r\n            // Charger le keystore du client\r\n            KeyStore clientKeyStore = KeyStore.getInstance(&quot;PKCS12&quot;);\r\n            try (InputStream keyStoreInput = context.getResources().openRawResource(R.raw.client)) {\r\n                clientKeyStore.load(keyStoreInput, &quot;poplpopl&quot;.toCharArray());\r\n            }\r\n\r\n            // Cr&#233;er un KeyManager &#224; partir du keystore du client\r\n            KeyManagerFactory kmf = KeyManagerFactory.getInstance(KeyManagerFactory.getDefaultAlgorithm());\r\n            kmf.init(clientKeyStore, &quot;poplpopl&quot;.toCharArray());\r\n\r\n            // Cr&#233;er un SSLContext qui utilise notre TrustManager et KeyManager\r\n            SSLContext sslContext = SSLContext.getInstance(&quot;TLS&quot;);\r\n            sslContext.init(kmf.getKeyManagers(), tmf.getTrustManagers(), null);\r\n\r\n            return sslContext;\r\n        }\r\n}\r\n```\r\n\r\nHowever, I am getting an SSLHandshakeException with the message `java.security.cert.CertPathValidatorException: Trust anchor for certification path not found`. It&#39;s like Java is not reading the CA certificate.\r\n\r\nI defined a network-security-config:\r\n\r\n```xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;network-security-config xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;\r\n    &lt;debug-overrides&gt;\r\n        &lt;trust-anchors&gt;\r\n            &lt;!-- Trust preinstalled CAs --&gt;\r\n            &lt;certificates src=&quot;system&quot;/&gt;\r\n            &lt;!-- Additionally trust user added CAs --&gt;\r\n            &lt;certificates src=&quot;user&quot;/&gt;\r\n            &lt;!-- Trust certificates in raw resource directories --&gt;\r\n            &lt;certificates src=&quot;@raw/ca&quot;/&gt;\r\n        &lt;/trust-anchors&gt;\r\n    &lt;/debug-overrides&gt;\r\n&lt;/network-security-config&gt;\r\n```\r\n\r\nAnd I linked it in the AndroidManifest.xml:\r\n\r\n```xml\r\n&lt;application\r\n...\r\n            android:networkSecurityConfig=&quot;@xml/network_security_config&quot;\r\n...&gt;\r\n```\r\n\r\nThe keys are correctly placed in the src/raw directory.\r\n\r\nDespite all these, the issue persists. Is there something I am missing or doing wrong? Any suggestions would be greatly appreciated.\r\n\r\nps: connection is working with openssl on linux: \r\n```\r\nopenssl s_client -connect iot.fr-par.scw.cloud:8883 -cert crt.pem -key key.pem -CAfile ca.pem\r\nCONNECTED(00000005)\r\ndepth=1 C = FR, L = Paris, O = Scaleway, OU = scaleway.com, CN = iot.fr-par.scw.cloud\r\nverify return:1\r\ndepth=0 C = FR, L = Paris, O = Scaleway, OU = iot-hub, CN = iot.fr-par.scw.cloud\r\nverify return:1\r\n---\r\nCertificate chain\r\n 0 s:C = FR, L = Paris, O = Scaleway, OU = iot-hub, CN = iot.fr-par.scw.cloud\r\n   i:C = FR, L = Paris, O = Scaleway, OU = scaleway.com, CN = iot.fr-par.scw.cloud\r\n   a:PKEY: rsaEncryption, 4096 (bit); sigalg: RSA-SHA512\r\n   v:NotBefore: May 29 08:24:00 2023 GMT; NotAfter: May 28 08:24:00 2024 GMT\r\n---\r\nServer certificate\r\n-----BEGIN CERTIFICATE-----\r\nMIIF9zCCA9+gAwIBAgIUOm41r7LdP0OQjkDRDDoB9m39efAwDQYJKoZIhvcNAQEN\r\nBQAwZjELMAkGA1UEBhMCRlIxDjAMBgNVBAcTBVBhcmlzMREwDwYDVQQKEwhTY2Fs\r\nZXdheTEVMBMGA1UECxMMc2NhbGV3YXkuY29tMR0wGwYDVQQDExRpb3QuZnItcGFy\r\nLnNjdy5jbG91ZDAeFw0yMzA1MjkwODI0MDBaFw0yNDA1MjgwODI0MDBaMGExCzAJ\r\nBgNVBAYTAkZSMQ4wDAYDVQQHEwVQYXJpczERMA8GA1UEChMIU2NhbGV3YXkxEDAO\r\nBgNVBAsTB2lvdC1odWIxHTAbBgNVBAMTFGlvdC5mci1wYXIuc2N3LmNsb3VkMIIC\r\nIjANBgkqhkiG9w0BAQEFAAOCAg8AMIICCgKCAgEA8jTXyhDM0NttOng6BwuMIgyV\r\n7B/lO4j4lOUiCet3bJmMPzh/stL+jKFmJ9oSI9ShpD9q/DIoAMrWMC1mzcU0CR/6\r\nyJ7UbT8U9Kjnvnp5KY3UXBiCvBU8GSbZHc4gsLc8Q5dGNw4P7AAXcQyBviDpSNy9\r\ndUxkbjjAPD/KQJmiru8r/eRSick1N9WMnSW938lxeOxVpa5bpUUDj/PGL6G1gh/g\r\n04IV1oc3RyhJ0DaAuA/3HokCJnGgXYewkJLrabPbOn6t4qmrQqKzd/xSae1/98bS\r\n+liXuAnoZQkLv2N9uUyJHefEnn3y+YRkat2L+9vUpfXzhLjBIphDRbzAlzSTGRbD\r\nT7TAuQdKLbIpb+WpgGVmRvcOBpxRy7i0op1z+ypXsuSZHtlYB4pAUwSb1D6k0Bqp\r\nMAdTWY2/IlQ6ECfZp3LvrQUhzZd6vv9firMkEhPzWUqck0/8G3UTUg5eikcYhBKS\r\nQUEuWe6qKfzmdtXZSIWRVdyA1TiVNCVG7eqB1DgHRBNFrIPPSfapH7XXj1TGu/XS\r\nLR/cJ8d3STnt+WaQVm+tgRlblT6EYhcDpwrKbqip3DgVJ2rPAVqVGWkihjz5PPMr\r\nIvthxiSOqCTzLelxgna/lKD13b8d/2K/uMycFUmDjRwfeLXAMjzi78KBjewhPC6u\r\nMqCV31n+AnmQWxb6/U8CAwEAAaOBoTCBnjAOBgNVHQ8BAf8EBAMCBaAwHQYDVR0l\r\nBBYwFAYIKwYBBQUHAwEGCCsGAQUFBwMCMAwGA1UdEwEB/wQCMAAwHQYDVR0OBBYE\r\nFA3Y5ZxN0W/maIAggwgsxC6J75XfMB8GA1UdIwQYMBaAFAJBBDKX4egU/YknRFDp\r\nARE2glxdMB8GA1UdEQQYMBaCFGlvdC5mci1wYXIuc2N3LmNsb3VkMA0GCSqGSIb3\r\nDQEBDQUAA4ICAQAGuNWUzvA5P7ZtQJJ/vyIxT12F2NL9gdklwJtVdaA4iLGXaHtv\r\nbFZbVllWBTB8eXOAE0h1gvWGUmcQ6Y5W+9SZYFKnXl3iA3tn9sbMUuPW70Ljbp9B\r\njrg4ABUrmyuYXNTSUcKbfXk8xLIvckzkr/2kEPixv//T/wZnIhYKSoIgpBKaw4n7\r\nuE7shtR1A/tOc3WLlmI+8419GuI0zzbBA5kzao9Ch2zBBFjciWicGxSLiDidJWlS\r\nNmJx7ZGRgFYcG/anAJvUYDTboVH2KJ/PZ51Q8sUa+uph5q8N2vgT/8sNNBf9MYfn\r\niq72p9F9ippOxM4dVYAEXIAk3mehtS19yuLAF3t5zjSMuhbrez49H5FcTuJ+Gg8Q\r\n6+p9/upZmB3QqrBh2sIOMYWW9qEbXbw2lKSsRm6/wnH7F3E5iGPzSLkJGgsyGTZ1\r\nk1setqUIjLhJlha6Wt0p/CrgRpBvNWCam0/0ZASamgVy7vV7Ru4vIzOGvE8FR4PI\r\n0b4M5uYdNCFnYYE6HL3i+/dtOi4I1GXH50iSTGztBARhII+FBf+Mh4Gft15+WzG5\r\nRSaCRz1YMos6mEUqKxPzirLQeoLE0jDInTGm05QHMURK1BET2h0UgsrVqbLDMXXt\r\nfAOljTL0CMWtFgQYWC+aWpgjTU8oFmj26AwJA2bK6TJFuWL477ZuJObpdA==\r\n-----END CERTIFICATE-----\r\nsubject=C = FR, L = Paris, O = Scaleway, OU = iot-hub, CN = iot.fr-par.scw.cloud\r\nissuer=C = FR, L = Paris, O = Scaleway, OU = scaleway.com, CN = iot.fr-par.scw.cloud\r\n---\r\nNo client certificate CA names sent\r\nRequested Signature Algorithms: RSA-PSS+SHA256:ECDSA+SHA256:Ed25519:RSA-PSS+SHA384:RSA-PSS+SHA512:RSA+SHA256:RSA+SHA384:RSA+SHA512:ECDSA+SHA384:ECDSA+SHA512:RSA+SHA1:ECDSA+SHA1\r\nShared Requested Signature Algorithms: RSA-PSS+SHA256:ECDSA+SHA256:Ed25519:RSA-PSS+SHA384:RSA-PSS+SHA512:RSA+SHA256:RSA+SHA384:RSA+SHA512:ECDSA+SHA384:ECDSA+SHA512\r\nPeer signing digest: SHA256\r\nPeer signature type: RSA-PSS\r\nServer Temp Key: X25519, 253 bits\r\n---\r\nSSL handshake has read 2394 bytes and written 1827 bytes\r\nVerification: OK\r\n---\r\nNew, TLSv1.3, Cipher is TLS_AES_128_GCM_SHA256\r\nServer public key is 4096 bit\r\nThis TLS version forbids renegotiation.\r\nCompression: NONE\r\nExpansion: NONE\r\nNo ALPN negotiated\r\nEarly data was not sent\r\nVerify return code: 0 (ok)\r\n---\r\n---\r\nPost-Handshake New Session Ticket arrived:\r\nSSL-Session:\r\n    Protocol  : TLSv1.3\r\n    Cipher    : TLS_AES_128_GCM_SHA256\r\n    Session-ID: 782BFAB969087DF319705E617BA121BF178F81CA4E14CA86B6467FEC26BC258E\r\n    Session-ID-ctx:\r\n    Resumption PSK: 4F87F4BDB1D3088B43806BF98D7C0224852773F07D565BCBAD1109D02569EBCB\r\n    PSK identity: None\r\n    PSK identity hint: None\r\n    SRP username: None\r\n    TLS session ticket lifetime hint: 604800 (seconds)\r\n    TLS session ticket:\r\n    0000 - ec 2a d3 9c b4 2b f9 67-5f 18 2b 06 8e 78 21 59   .*...+.g_.+..x!Y\r\n    0010 - 60 56 f3 27 e3 ea 65 a2-0c f4 f3 cc 4e e1 0f c4   `V.&#39;..e.....N...\r\n    0020 - be 58 36 a4 ca 67 25 ab-69 ae aa b0 62 aa 87 aa   .X6..g%.i...b...\r\n    0030 - e8 de 72 f5 e8 00 b8 90-66 cc b3 08 56 9b e6 59   ..r.....f...V..Y\r\n    0040 - 24 2e a5 0a 92 7c e2 32-6d 59 f4 62 42 bb 89 12   $....|.2mY.bB...\r\n    0050 - e8 b9 8b b0 06 8a 31 14-92 06 ee 09 6e 41 3f ba   ......1.....nA?.\r\n    0060 - 83 79 8c f5 f7 4d 16 5a-f8 6e 83 f3 45 ce d4 ee   .y...M.Z.n..E...\r\n    0070 - 51 97 68 04 e0 ea ab 70-e8 a2 df b6 15 dd a1 dc   Q.h....p........\r\n    0080 - 0c 05 40 76 0d 39 1b 4e-d0 45 39 be 82 0a ad ce   ..@v.9.N.E9.....\r\n    0090 - bf 70 62 02 f6 28 e0 cc-ca 2c c1 bb f2 d1 7e 4a   .pb..(...,....~J\r\n    00a0 - 84 31 61 22 e3 3d c3 a7-d6 26 9d d2 c4 49 a9 8e   .1a&quot;.=...&amp;...I..\r\n    00b0 - 26 12 e1 92 70 39 b1 12-90 4a db 58 0b 6a f2 83   &amp;...p9...J.X.j..\r\n    00c0 - 18 5c 1d 23 96 63 6c a4-91 33 85 b5 82 62 37 3d   .\\.#.cl..3...b7=\r\n    00d0 - 3d 4c 54 cb b7 b2 a9 20-d5 f3 ca 67 82 80 cc 5e   =LT.... ...g...^\r\n    00e0 - af 5d 05 62 da c5 d4 02-4f 18 14 ac b8 b7 c3 5d   .].b....O......]\r\n    00f0 - cb cb 2d 06 34 f3 83 fc-ec 09 d2 73 31 b6 7e 95   ..-.4......s1.~.\r\n    0100 - 78 ea 84 76 9c d4 70 6a-6f 22 c4 74 ac e5 39 40   x..v..pjo&quot;.t..9@\r\n    0110 - 99 ee 04 42 ff 6b 36 53-6a 4b 0a 50 38 4f af a2   ...B.k6SjK.P8O..\r\n    0120 - 5a e5 df 1c 5e df 45 e0-b6 49 b3 6d f4 12 c2 13   Z...^.E..I.m....\r\n    0130 - 20 af d4 3d 2b c2 77 f0-42 36 ae 40 44 c4 f8 6a    ..=+.w.B6.@D..j\r\n    0140 - 51 22 03 82 77 a5 11 2a-53 99 72 4f 0e a6 8f 8f   Q&quot;..w..*S.rO....\r\n    0150 - 57 04 cc f2 43 3d b8 dc-5a 2e 58 a3 4b 91 99 e2   W...C=..Z.X.K...\r\n    0160 - 49 d8 19 6d 30 48 5c c7-3d 5c 8b f4 0f 96 bc d0   I..m0H\\.=\\......\r\n    0170 - 45 22 80 60 cd ee d5 31-3e c8 0f 17 54 1a 65 64   E&quot;.`...1&gt;...T.ed\r\n    0180 - 5c aa f2 91 d2 5e b5 0f-a1 12 e4 33 02 69 66 48   \\....^.....3.ifH\r\n    0190 - b4 7f 81 3c 18 78 bc 50-10 2e 29 a3 6b 48 06 cf   ...&lt;.x.P..).kH..\r\n    01a0 - 22 7e 1b 6e b4 73 f6 46-5f 76 0e 57 fb 8a 33 df   &quot;~.n.s.F_v.W..3.\r\n    01b0 - f2 18 b6 e0 3d 5c 55 55-ec 22 a5 8c e3 a9 58 2b   ....=\\UU.&quot;....X+\r\n    01c0 - ed c3 ec db 50 f3 9d 37-d2 c1 3b ae 45 c2 2e d3   ....P..7..;.E...\r\n    01d0 - 7a a6 b8 64 0e 5a 4f 73-c2 6d 07 f0 43 ef 92 4f   z..d.ZOs.m..C..O\r\n    01e0 - 63 4c 25 37 09 71 16 9e-06 b6 66 bf 11 4b 48 ff   cL%7.q....f..KH.\r\n    01f0 - ad 03 5a 1a a6 9e 4e 50-49 97 53 73 a3 ed 19 42   ..Z...NPI.Ss...B\r\n    0200 - 49 eb 71 62 27 dd 06 b6-6f 59 92 20 30 60 8c f7   I.qb&#39;...oY. 0`..\r\n    0210 - 35 ce 9b 14 5a 9f d4 ad-fc 67 06 b4 ab c1 89 78   5...Z....g.....x\r\n    0220 - ff c2 12 9f 62 2b 92 99-14 1e 9d 8e 05 ef 38 3a   ....b+........8:\r\n    0230 - 8e 91 d3 10 0d e8 97 d7-9b a5 f3 19 bc b0 11 e9   ................\r\n    0240 - c1 7b 33 da 79 22 f5 81-33 25 77 8a a3 87 f7 50   .{3.y&quot;..3%w....P\r\n    0250 - 9c 76 49 ca 42 63 5b 53-74 fc 79 22 dd 9e 7a b7   .vI.Bc[St.y&quot;..z.\r\n    0260 - 20 38 ba 4b ab 35 2a da-79 d7 4e d2 51 02 f2 f0    8.K.5*.y.N.Q...\r\n    0270 - 4b 25 00 5a 56 6b 1c 21-6a b6 29 b2 8f 3b 94 30   K%.ZVk.!j.)..;.0\r\n    0280 - df 09 27 c3 79 fb 28 5a-3f 9c df 5f f7 72 a2 35   ..&#39;.y.(Z?.._.r.5\r\n    0290 - 1a 6a c1 54 7d e3 e2 46-9e db 47 f8 8e 28 f3 5b   .j.T}..F..G..(.[\r\n    02a0 - dd a3 09 96 ef 38 64 ad-2d 06 b0 9b 62 a5 02 01   .....8d.-...b...\r\n    02b0 - 53 aa 32 30 fb 1a b6 66-35 48 90 1e d3 20 8a 83   S.20...f5H... ..\r\n    02c0 - 84 f6 04 36 03 59 20 db-d7 7f be 66 42 44 3c a2   ...6.Y ....fBD&lt;.\r\n    02d0 - 52 5b 71 82 86 d1 05 d8-00 b8 c9 af 58 15 4d 68   R[q.........X.Mh\r\n    02e0 - a6 6e 87 a8 08 33 f2 72-41 35 4c 71 db dc 97 3c   .n...3.rA5Lq...&lt;\r\n    02f0 - ff 6e 96 bb 3b 6c fc c2-db 48 93 b2 38 98 40 38   .n..;l...H..8.@8\r\n    0300 - e7 ff 1b 41 1d 3a 32 95-dd 65 37 29 f4 5d ca 17   ...A.:2..e7).]..\r\n    0310 - ea 83 18 ef 1c df c6 5e-33 c7 3f f1 08 87 63 71   .......^3.?...cq\r\n    0320 - 7d 02 db b0 9d 64 59 3f-8f 08 85 13 97 28 82 19   }....dY?.....(..\r\n    0330 - 0c 8f 18 65 d4 93 bf 62-ab b8 27 8a 8b 0e d2 00   ...e...b..&#39;.....\r\n    0340 - 39 f0 ee 34 5d 0b 41 5f-9c 96 c7 11 a3 0a 89 81   9..4].A_........\r\n    0350 - 20 c7 30 f8 b0 ad 35 ca-78 4a d9 cb 15 29 9e 82    .0...5.xJ...)..\r\n    0360 - a4 82 6f 4c c9 19 ab 7d-85 05 4e db 08 23 53 0c   ..oL...}..N..#S.\r\n    0370 - 11 f5 00 48 2b a9 91 d4-66 5a 54 56 1e 2b 15 0a   ...H+...fZTV.+..\r\n    0380 - 17 fe 9f 1e 62 bc b4 d5-c9 68 30 87 a5 61 c6 ee   ....b....h0..a..\r\n    0390 - b8 d7 24 b0 56 17 e9 9c-48 79 3f 6b 7e 8b 37 a4   ..$.V...Hy?k~.7.\r\n    03a0 - 96 48 60 c5 c3 66 d9 12-40 0c fb b2 48 27 54 83   .H`..f..@...H&#39;T.\r\n    03b0 - 9d ec 11 fc d5 a7 d3 be-ec b6 bc c8 b3 28 3e d9   .............(&gt;.\r\n    03c0 - ef 79 77 db bc da 43 6c-f8 22 57 c5 7d 40 ea fd   .yw...Cl.&quot;W.}@..\r\n    03d0 - 35 9b 7b a6 6f a4 33 9a-8f 53 5b fb 21 29 f0 eb   5.{.o.3..S[.!)..\r\n    03e0 - c0 72 44 84 d6 75 1e ef-f7 8e 09 45 0d d4 77 6f   .rD..u.....E..wo\r\n    03f0 - 7c 79 25 19 d4 7d fa 10-a1 2f 08 b0 ec e0 03 85   |y%..}.../......\r\n    0400 - f5 3d c5 7c 3a 68 ba 74-ca 54 70 85 d7 8c 4f c9   .=.|:h.t.Tp...O.\r\n    0410 - 61 f3 69 8e a4 d2 fa f5-dc 05 ba 19 09 fd 4b 19   a.i...........K.\r\n    0420 - af a7 93 9c 3b e5 37 38-65 b3 11 19 1b b3 e3 85   ....;.78e.......\r\n    0430 - 01 cc 26 4c e3 7a 30 95-34 d2 98 f3 c0 36 97 54   ..&amp;L.z0.4....6.T\r\n    0440 - 41 f8 1d 24 a1 d2 bc 8a-95 7c f3 07 95 72 06 df   A..$.....|...r..\r\n    0450 - 65 15 08 24 9e 28 fb 00-0b 4f f5 0b 24 41 c2 49   e..$.(...O..$A.I\r\n    0460 - b9 b5 c3 13 ee 28 a8 41-05 7c 0f 5d 57 15 be 91   .....(.A.|.]W...\r\n    0470 - fc c3 42 87 fb a7 ac 79-fc 5f 5a 0c 98 1d 28 db   ..B....y._Z...(.\r\n    0480 - f5 7b 1a 5c 80 f4 09 f3-61 85 89 c7 48 a8 14 c3   .{.\\....a...H...\r\n    0490 - 88 d6 ea 84 c4 fa aa 0f-b1 bd 02 da b9 f7 2b 7a   ..............+z\r\n    04a0 - c5 a2 cf e5 64 b2 c7 e2-7f 1a e2 dc 46 e1 41 e5   ....d.......F.A.\r\n    04b0 - 54 9b 80 76 c9 3c d1 a7-56 ed 81 56 ba 29 c4 44   T..v.&lt;..V..V.).D\r\n    04c0 - a4 0e e8 c4 58 48 34 2d-4c 18 3d 9b d8 44 58 67   ....XH4-L.=..DXg\r\n    04d0 - 0d 66 1a 43 d8 ed                                 .f.C..\r\n\r\n    Start Time: 1690324588\r\n    Timeout   : 7200 (sec)\r\n    Verify return code: 0 (ok)\r\n    Extended master secret: no\r\n    Max Early Data: 0\r\n---\r\nread R BLOCK\r\n``` \r\n","title":"Android MQTT Client SSL Handshake Exception: Trust anchor for certification path not found","body":"<p>I am currently trying to connect to an MQTT broker via SSL/TLS from an Android client. For this, I have a combination of three keys: crt, key, and ca. The ca key is self-signed and not trusted by default.</p>\n<p>This is the certificate information:</p>\n<pre><code>Subject iot.fr-par.scw.cloud\nCommon names    iot.fr-par.scw.cloud\nAlternative names   iot.fr-par.scw.cloud\nSerial Number   3a6e35afb2dd3f43908e40d10c3a01f66dfd79f0\nValid from  Mon, 29 May 2023 08:24:00 UTC\nValid until Tue, 28 May 2024 08:24:00 UTC (expires in 10 months and 2 days)\nIssuer  iot.fr-par.scw.cloud\nSignature algorithm SHA512withRSA\n</code></pre>\n<p>I am using the Paho MQTT library in Android. Here is the code that I am using to connect and publish:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.dakatech.daka_ap;\n\nimport android.content.Context;\nimport org.eclipse.paho.android.service.MqttAndroidClient;\nimport org.eclipse.paho.client.mqttv3.*;\n\nimport javax.net.ssl.KeyManagerFactory;\nimport javax.net.ssl.SSLContext;\nimport javax.net.ssl.TrustManagerFactory;\nimport java.io.InputStream;\nimport java.security.KeyStore;\nimport java.security.cert.CertificateFactory;\nimport java.security.cert.X509Certificate;\n\npublic class MqttClient {\n\n    private static final String brokerUrl = &quot;ssl://iot.fr-par.scw.cloud:8883&quot;;\n    private static final String clientId = &quot;AndroidClient&quot;;\n    private static final String topic = &quot;your/topic&quot;;\n    private final Context context; // Initialized in constructor\n\n    public MqttClient(Context context) {\n        this.context = context;\n    }\n\n    public void connectAndPublish() {\n        try {\n\n            // Créer le SSLContext\n            SSLContext sslContext;\n            try {\n                sslContext = getSslContext(context);\n            } catch (Exception e) {\n                e.printStackTrace();\n                return;\n            }\n\n            MqttAndroidClient client = new MqttAndroidClient(context, brokerUrl, clientId);\n            MqttConnectOptions options = new MqttConnectOptions();\n            options.setSocketFactory(sslContext.getSocketFactory());\n\n            client.connect(options, null, new IMqttActionListener() {\n                @Override\n                public void onSuccess(IMqttToken asyncActionToken) {\n                    // Connecté, publier un message\n                    MqttMessage message = new MqttMessage(&quot;Hello, world!&quot;.getBytes());\n                    message.setQos(1);\n                    try {\n                        client.publish(topic, message);\n                    } catch (MqttException e) {\n                        e.printStackTrace();\n                    }\n                }\n\n                @Override\n                public void onFailure(IMqttToken asyncActionToken, Throwable exception) {\n                    // La connexion a échoué\n                    exception.printStackTrace();\n                }\n            });\n        } catch (Exception e) {\n            // Gérer l'erreur\n            e.printStackTrace();\n        }\n    }\n\n        private SSLContext getSslContext(Context context) throws Exception {\n            // Charger le certificat CA\n            CertificateFactory cf = CertificateFactory.getInstance(&quot;X.509&quot;);\n            InputStream caInput = context.getResources().openRawResource(R.raw.ca);\n            X509Certificate caCertificate;\n            try {\n                caCertificate = (X509Certificate) cf.generateCertificate(caInput);\n            } finally {\n                caInput.close();\n            }\n            String keyStoreType = KeyStore.getDefaultType();\n            KeyStore keyStore = KeyStore.getInstance(keyStoreType);\n            keyStore.load(null, null);\n            keyStore.setCertificateEntry(&quot;ca&quot;, caCertificate);\n\n            // Créer un TrustManager qui fait confiance au keystore\n            String tmfAlgorithm = TrustManagerFactory.getDefaultAlgorithm();\n            TrustManagerFactory tmf = TrustManagerFactory.getInstance(tmfAlgorithm);\n            tmf.init(keyStore);\n\n            // Charger le keystore du client\n            KeyStore clientKeyStore = KeyStore.getInstance(&quot;PKCS12&quot;);\n            try (InputStream keyStoreInput = context.getResources().openRawResource(R.raw.client)) {\n                clientKeyStore.load(keyStoreInput, &quot;poplpopl&quot;.toCharArray());\n            }\n\n            // Créer un KeyManager à partir du keystore du client\n            KeyManagerFactory kmf = KeyManagerFactory.getInstance(KeyManagerFactory.getDefaultAlgorithm());\n            kmf.init(clientKeyStore, &quot;poplpopl&quot;.toCharArray());\n\n            // Créer un SSLContext qui utilise notre TrustManager et KeyManager\n            SSLContext sslContext = SSLContext.getInstance(&quot;TLS&quot;);\n            sslContext.init(kmf.getKeyManagers(), tmf.getTrustManagers(), null);\n\n            return sslContext;\n        }\n}\n</code></pre>\n<p>However, I am getting an SSLHandshakeException with the message <code>java.security.cert.CertPathValidatorException: Trust anchor for certification path not found</code>. It's like Java is not reading the CA certificate.</p>\n<p>I defined a network-security-config:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;network-security-config xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;\n    &lt;debug-overrides&gt;\n        &lt;trust-anchors&gt;\n            &lt;!-- Trust preinstalled CAs --&gt;\n            &lt;certificates src=&quot;system&quot;/&gt;\n            &lt;!-- Additionally trust user added CAs --&gt;\n            &lt;certificates src=&quot;user&quot;/&gt;\n            &lt;!-- Trust certificates in raw resource directories --&gt;\n            &lt;certificates src=&quot;@raw/ca&quot;/&gt;\n        &lt;/trust-anchors&gt;\n    &lt;/debug-overrides&gt;\n&lt;/network-security-config&gt;\n</code></pre>\n<p>And I linked it in the AndroidManifest.xml:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;application\n...\n            android:networkSecurityConfig=&quot;@xml/network_security_config&quot;\n...&gt;\n</code></pre>\n<p>The keys are correctly placed in the src/raw directory.</p>\n<p>Despite all these, the issue persists. Is there something I am missing or doing wrong? Any suggestions would be greatly appreciated.</p>\n<p>ps: connection is working with openssl on linux:</p>\n<pre><code>openssl s_client -connect iot.fr-par.scw.cloud:8883 -cert crt.pem -key key.pem -CAfile ca.pem\nCONNECTED(00000005)\ndepth=1 C = FR, L = Paris, O = Scaleway, OU = scaleway.com, CN = iot.fr-par.scw.cloud\nverify return:1\ndepth=0 C = FR, L = Paris, O = Scaleway, OU = iot-hub, CN = iot.fr-par.scw.cloud\nverify return:1\n---\nCertificate chain\n 0 s:C = FR, L = Paris, O = Scaleway, OU = iot-hub, CN = iot.fr-par.scw.cloud\n   i:C = FR, L = Paris, O = Scaleway, OU = scaleway.com, CN = iot.fr-par.scw.cloud\n   a:PKEY: rsaEncryption, 4096 (bit); sigalg: RSA-SHA512\n   v:NotBefore: May 29 08:24:00 2023 GMT; NotAfter: May 28 08:24:00 2024 GMT\n---\nServer certificate\n-----BEGIN CERTIFICATE-----\nMIIF9zCCA9+gAwIBAgIUOm41r7LdP0OQjkDRDDoB9m39efAwDQYJKoZIhvcNAQEN\nBQAwZjELMAkGA1UEBhMCRlIxDjAMBgNVBAcTBVBhcmlzMREwDwYDVQQKEwhTY2Fs\nZXdheTEVMBMGA1UECxMMc2NhbGV3YXkuY29tMR0wGwYDVQQDExRpb3QuZnItcGFy\nLnNjdy5jbG91ZDAeFw0yMzA1MjkwODI0MDBaFw0yNDA1MjgwODI0MDBaMGExCzAJ\nBgNVBAYTAkZSMQ4wDAYDVQQHEwVQYXJpczERMA8GA1UEChMIU2NhbGV3YXkxEDAO\nBgNVBAsTB2lvdC1odWIxHTAbBgNVBAMTFGlvdC5mci1wYXIuc2N3LmNsb3VkMIIC\nIjANBgkqhkiG9w0BAQEFAAOCAg8AMIICCgKCAgEA8jTXyhDM0NttOng6BwuMIgyV\n7B/lO4j4lOUiCet3bJmMPzh/stL+jKFmJ9oSI9ShpD9q/DIoAMrWMC1mzcU0CR/6\nyJ7UbT8U9Kjnvnp5KY3UXBiCvBU8GSbZHc4gsLc8Q5dGNw4P7AAXcQyBviDpSNy9\ndUxkbjjAPD/KQJmiru8r/eRSick1N9WMnSW938lxeOxVpa5bpUUDj/PGL6G1gh/g\n04IV1oc3RyhJ0DaAuA/3HokCJnGgXYewkJLrabPbOn6t4qmrQqKzd/xSae1/98bS\n+liXuAnoZQkLv2N9uUyJHefEnn3y+YRkat2L+9vUpfXzhLjBIphDRbzAlzSTGRbD\nT7TAuQdKLbIpb+WpgGVmRvcOBpxRy7i0op1z+ypXsuSZHtlYB4pAUwSb1D6k0Bqp\nMAdTWY2/IlQ6ECfZp3LvrQUhzZd6vv9firMkEhPzWUqck0/8G3UTUg5eikcYhBKS\nQUEuWe6qKfzmdtXZSIWRVdyA1TiVNCVG7eqB1DgHRBNFrIPPSfapH7XXj1TGu/XS\nLR/cJ8d3STnt+WaQVm+tgRlblT6EYhcDpwrKbqip3DgVJ2rPAVqVGWkihjz5PPMr\nIvthxiSOqCTzLelxgna/lKD13b8d/2K/uMycFUmDjRwfeLXAMjzi78KBjewhPC6u\nMqCV31n+AnmQWxb6/U8CAwEAAaOBoTCBnjAOBgNVHQ8BAf8EBAMCBaAwHQYDVR0l\nBBYwFAYIKwYBBQUHAwEGCCsGAQUFBwMCMAwGA1UdEwEB/wQCMAAwHQYDVR0OBBYE\nFA3Y5ZxN0W/maIAggwgsxC6J75XfMB8GA1UdIwQYMBaAFAJBBDKX4egU/YknRFDp\nARE2glxdMB8GA1UdEQQYMBaCFGlvdC5mci1wYXIuc2N3LmNsb3VkMA0GCSqGSIb3\nDQEBDQUAA4ICAQAGuNWUzvA5P7ZtQJJ/vyIxT12F2NL9gdklwJtVdaA4iLGXaHtv\nbFZbVllWBTB8eXOAE0h1gvWGUmcQ6Y5W+9SZYFKnXl3iA3tn9sbMUuPW70Ljbp9B\njrg4ABUrmyuYXNTSUcKbfXk8xLIvckzkr/2kEPixv//T/wZnIhYKSoIgpBKaw4n7\nuE7shtR1A/tOc3WLlmI+8419GuI0zzbBA5kzao9Ch2zBBFjciWicGxSLiDidJWlS\nNmJx7ZGRgFYcG/anAJvUYDTboVH2KJ/PZ51Q8sUa+uph5q8N2vgT/8sNNBf9MYfn\niq72p9F9ippOxM4dVYAEXIAk3mehtS19yuLAF3t5zjSMuhbrez49H5FcTuJ+Gg8Q\n6+p9/upZmB3QqrBh2sIOMYWW9qEbXbw2lKSsRm6/wnH7F3E5iGPzSLkJGgsyGTZ1\nk1setqUIjLhJlha6Wt0p/CrgRpBvNWCam0/0ZASamgVy7vV7Ru4vIzOGvE8FR4PI\n0b4M5uYdNCFnYYE6HL3i+/dtOi4I1GXH50iSTGztBARhII+FBf+Mh4Gft15+WzG5\nRSaCRz1YMos6mEUqKxPzirLQeoLE0jDInTGm05QHMURK1BET2h0UgsrVqbLDMXXt\nfAOljTL0CMWtFgQYWC+aWpgjTU8oFmj26AwJA2bK6TJFuWL477ZuJObpdA==\n-----END CERTIFICATE-----\nsubject=C = FR, L = Paris, O = Scaleway, OU = iot-hub, CN = iot.fr-par.scw.cloud\nissuer=C = FR, L = Paris, O = Scaleway, OU = scaleway.com, CN = iot.fr-par.scw.cloud\n---\nNo client certificate CA names sent\nRequested Signature Algorithms: RSA-PSS+SHA256:ECDSA+SHA256:Ed25519:RSA-PSS+SHA384:RSA-PSS+SHA512:RSA+SHA256:RSA+SHA384:RSA+SHA512:ECDSA+SHA384:ECDSA+SHA512:RSA+SHA1:ECDSA+SHA1\nShared Requested Signature Algorithms: RSA-PSS+SHA256:ECDSA+SHA256:Ed25519:RSA-PSS+SHA384:RSA-PSS+SHA512:RSA+SHA256:RSA+SHA384:RSA+SHA512:ECDSA+SHA384:ECDSA+SHA512\nPeer signing digest: SHA256\nPeer signature type: RSA-PSS\nServer Temp Key: X25519, 253 bits\n---\nSSL handshake has read 2394 bytes and written 1827 bytes\nVerification: OK\n---\nNew, TLSv1.3, Cipher is TLS_AES_128_GCM_SHA256\nServer public key is 4096 bit\nThis TLS version forbids renegotiation.\nCompression: NONE\nExpansion: NONE\nNo ALPN negotiated\nEarly data was not sent\nVerify return code: 0 (ok)\n---\n---\nPost-Handshake New Session Ticket arrived:\nSSL-Session:\n    Protocol  : TLSv1.3\n    Cipher    : TLS_AES_128_GCM_SHA256\n    Session-ID: 782BFAB969087DF319705E617BA121BF178F81CA4E14CA86B6467FEC26BC258E\n    Session-ID-ctx:\n    Resumption PSK: 4F87F4BDB1D3088B43806BF98D7C0224852773F07D565BCBAD1109D02569EBCB\n    PSK identity: None\n    PSK identity hint: None\n    SRP username: None\n    TLS session ticket lifetime hint: 604800 (seconds)\n    TLS session ticket:\n    0000 - ec 2a d3 9c b4 2b f9 67-5f 18 2b 06 8e 78 21 59   .*...+.g_.+..x!Y\n    0010 - 60 56 f3 27 e3 ea 65 a2-0c f4 f3 cc 4e e1 0f c4   `V.'..e.....N...\n    0020 - be 58 36 a4 ca 67 25 ab-69 ae aa b0 62 aa 87 aa   .X6..g%.i...b...\n    0030 - e8 de 72 f5 e8 00 b8 90-66 cc b3 08 56 9b e6 59   ..r.....f...V..Y\n    0040 - 24 2e a5 0a 92 7c e2 32-6d 59 f4 62 42 bb 89 12   $....|.2mY.bB...\n    0050 - e8 b9 8b b0 06 8a 31 14-92 06 ee 09 6e 41 3f ba   ......1.....nA?.\n    0060 - 83 79 8c f5 f7 4d 16 5a-f8 6e 83 f3 45 ce d4 ee   .y...M.Z.n..E...\n    0070 - 51 97 68 04 e0 ea ab 70-e8 a2 df b6 15 dd a1 dc   Q.h....p........\n    0080 - 0c 05 40 76 0d 39 1b 4e-d0 45 39 be 82 0a ad ce   ..@v.9.N.E9.....\n    0090 - bf 70 62 02 f6 28 e0 cc-ca 2c c1 bb f2 d1 7e 4a   .pb..(...,....~J\n    00a0 - 84 31 61 22 e3 3d c3 a7-d6 26 9d d2 c4 49 a9 8e   .1a&quot;.=...&amp;...I..\n    00b0 - 26 12 e1 92 70 39 b1 12-90 4a db 58 0b 6a f2 83   &amp;...p9...J.X.j..\n    00c0 - 18 5c 1d 23 96 63 6c a4-91 33 85 b5 82 62 37 3d   .\\.#.cl..3...b7=\n    00d0 - 3d 4c 54 cb b7 b2 a9 20-d5 f3 ca 67 82 80 cc 5e   =LT.... ...g...^\n    00e0 - af 5d 05 62 da c5 d4 02-4f 18 14 ac b8 b7 c3 5d   .].b....O......]\n    00f0 - cb cb 2d 06 34 f3 83 fc-ec 09 d2 73 31 b6 7e 95   ..-.4......s1.~.\n    0100 - 78 ea 84 76 9c d4 70 6a-6f 22 c4 74 ac e5 39 40   x..v..pjo&quot;.t..9@\n    0110 - 99 ee 04 42 ff 6b 36 53-6a 4b 0a 50 38 4f af a2   ...B.k6SjK.P8O..\n    0120 - 5a e5 df 1c 5e df 45 e0-b6 49 b3 6d f4 12 c2 13   Z...^.E..I.m....\n    0130 - 20 af d4 3d 2b c2 77 f0-42 36 ae 40 44 c4 f8 6a    ..=+.w.B6.@D..j\n    0140 - 51 22 03 82 77 a5 11 2a-53 99 72 4f 0e a6 8f 8f   Q&quot;..w..*S.rO....\n    0150 - 57 04 cc f2 43 3d b8 dc-5a 2e 58 a3 4b 91 99 e2   W...C=..Z.X.K...\n    0160 - 49 d8 19 6d 30 48 5c c7-3d 5c 8b f4 0f 96 bc d0   I..m0H\\.=\\......\n    0170 - 45 22 80 60 cd ee d5 31-3e c8 0f 17 54 1a 65 64   E&quot;.`...1&gt;...T.ed\n    0180 - 5c aa f2 91 d2 5e b5 0f-a1 12 e4 33 02 69 66 48   \\....^.....3.ifH\n    0190 - b4 7f 81 3c 18 78 bc 50-10 2e 29 a3 6b 48 06 cf   ...&lt;.x.P..).kH..\n    01a0 - 22 7e 1b 6e b4 73 f6 46-5f 76 0e 57 fb 8a 33 df   &quot;~.n.s.F_v.W..3.\n    01b0 - f2 18 b6 e0 3d 5c 55 55-ec 22 a5 8c e3 a9 58 2b   ....=\\UU.&quot;....X+\n    01c0 - ed c3 ec db 50 f3 9d 37-d2 c1 3b ae 45 c2 2e d3   ....P..7..;.E...\n    01d0 - 7a a6 b8 64 0e 5a 4f 73-c2 6d 07 f0 43 ef 92 4f   z..d.ZOs.m..C..O\n    01e0 - 63 4c 25 37 09 71 16 9e-06 b6 66 bf 11 4b 48 ff   cL%7.q....f..KH.\n    01f0 - ad 03 5a 1a a6 9e 4e 50-49 97 53 73 a3 ed 19 42   ..Z...NPI.Ss...B\n    0200 - 49 eb 71 62 27 dd 06 b6-6f 59 92 20 30 60 8c f7   I.qb'...oY. 0`..\n    0210 - 35 ce 9b 14 5a 9f d4 ad-fc 67 06 b4 ab c1 89 78   5...Z....g.....x\n    0220 - ff c2 12 9f 62 2b 92 99-14 1e 9d 8e 05 ef 38 3a   ....b+........8:\n    0230 - 8e 91 d3 10 0d e8 97 d7-9b a5 f3 19 bc b0 11 e9   ................\n    0240 - c1 7b 33 da 79 22 f5 81-33 25 77 8a a3 87 f7 50   .{3.y&quot;..3%w....P\n    0250 - 9c 76 49 ca 42 63 5b 53-74 fc 79 22 dd 9e 7a b7   .vI.Bc[St.y&quot;..z.\n    0260 - 20 38 ba 4b ab 35 2a da-79 d7 4e d2 51 02 f2 f0    8.K.5*.y.N.Q...\n    0270 - 4b 25 00 5a 56 6b 1c 21-6a b6 29 b2 8f 3b 94 30   K%.ZVk.!j.)..;.0\n    0280 - df 09 27 c3 79 fb 28 5a-3f 9c df 5f f7 72 a2 35   ..'.y.(Z?.._.r.5\n    0290 - 1a 6a c1 54 7d e3 e2 46-9e db 47 f8 8e 28 f3 5b   .j.T}..F..G..(.[\n    02a0 - dd a3 09 96 ef 38 64 ad-2d 06 b0 9b 62 a5 02 01   .....8d.-...b...\n    02b0 - 53 aa 32 30 fb 1a b6 66-35 48 90 1e d3 20 8a 83   S.20...f5H... ..\n    02c0 - 84 f6 04 36 03 59 20 db-d7 7f be 66 42 44 3c a2   ...6.Y ....fBD&lt;.\n    02d0 - 52 5b 71 82 86 d1 05 d8-00 b8 c9 af 58 15 4d 68   R[q.........X.Mh\n    02e0 - a6 6e 87 a8 08 33 f2 72-41 35 4c 71 db dc 97 3c   .n...3.rA5Lq...&lt;\n    02f0 - ff 6e 96 bb 3b 6c fc c2-db 48 93 b2 38 98 40 38   .n..;l...H..8.@8\n    0300 - e7 ff 1b 41 1d 3a 32 95-dd 65 37 29 f4 5d ca 17   ...A.:2..e7).]..\n    0310 - ea 83 18 ef 1c df c6 5e-33 c7 3f f1 08 87 63 71   .......^3.?...cq\n    0320 - 7d 02 db b0 9d 64 59 3f-8f 08 85 13 97 28 82 19   }....dY?.....(..\n    0330 - 0c 8f 18 65 d4 93 bf 62-ab b8 27 8a 8b 0e d2 00   ...e...b..'.....\n    0340 - 39 f0 ee 34 5d 0b 41 5f-9c 96 c7 11 a3 0a 89 81   9..4].A_........\n    0350 - 20 c7 30 f8 b0 ad 35 ca-78 4a d9 cb 15 29 9e 82    .0...5.xJ...)..\n    0360 - a4 82 6f 4c c9 19 ab 7d-85 05 4e db 08 23 53 0c   ..oL...}..N..#S.\n    0370 - 11 f5 00 48 2b a9 91 d4-66 5a 54 56 1e 2b 15 0a   ...H+...fZTV.+..\n    0380 - 17 fe 9f 1e 62 bc b4 d5-c9 68 30 87 a5 61 c6 ee   ....b....h0..a..\n    0390 - b8 d7 24 b0 56 17 e9 9c-48 79 3f 6b 7e 8b 37 a4   ..$.V...Hy?k~.7.\n    03a0 - 96 48 60 c5 c3 66 d9 12-40 0c fb b2 48 27 54 83   .H`..f..@...H'T.\n    03b0 - 9d ec 11 fc d5 a7 d3 be-ec b6 bc c8 b3 28 3e d9   .............(&gt;.\n    03c0 - ef 79 77 db bc da 43 6c-f8 22 57 c5 7d 40 ea fd   .yw...Cl.&quot;W.}@..\n    03d0 - 35 9b 7b a6 6f a4 33 9a-8f 53 5b fb 21 29 f0 eb   5.{.o.3..S[.!)..\n    03e0 - c0 72 44 84 d6 75 1e ef-f7 8e 09 45 0d d4 77 6f   .rD..u.....E..wo\n    03f0 - 7c 79 25 19 d4 7d fa 10-a1 2f 08 b0 ec e0 03 85   |y%..}.../......\n    0400 - f5 3d c5 7c 3a 68 ba 74-ca 54 70 85 d7 8c 4f c9   .=.|:h.t.Tp...O.\n    0410 - 61 f3 69 8e a4 d2 fa f5-dc 05 ba 19 09 fd 4b 19   a.i...........K.\n    0420 - af a7 93 9c 3b e5 37 38-65 b3 11 19 1b b3 e3 85   ....;.78e.......\n    0430 - 01 cc 26 4c e3 7a 30 95-34 d2 98 f3 c0 36 97 54   ..&amp;L.z0.4....6.T\n    0440 - 41 f8 1d 24 a1 d2 bc 8a-95 7c f3 07 95 72 06 df   A..$.....|...r..\n    0450 - 65 15 08 24 9e 28 fb 00-0b 4f f5 0b 24 41 c2 49   e..$.(...O..$A.I\n    0460 - b9 b5 c3 13 ee 28 a8 41-05 7c 0f 5d 57 15 be 91   .....(.A.|.]W...\n    0470 - fc c3 42 87 fb a7 ac 79-fc 5f 5a 0c 98 1d 28 db   ..B....y._Z...(.\n    0480 - f5 7b 1a 5c 80 f4 09 f3-61 85 89 c7 48 a8 14 c3   .{.\\....a...H...\n    0490 - 88 d6 ea 84 c4 fa aa 0f-b1 bd 02 da b9 f7 2b 7a   ..............+z\n    04a0 - c5 a2 cf e5 64 b2 c7 e2-7f 1a e2 dc 46 e1 41 e5   ....d.......F.A.\n    04b0 - 54 9b 80 76 c9 3c d1 a7-56 ed 81 56 ba 29 c4 44   T..v.&lt;..V..V.).D\n    04c0 - a4 0e e8 c4 58 48 34 2d-4c 18 3d 9b d8 44 58 67   ....XH4-L.=..DXg\n    04d0 - 0d 66 1a 43 d8 ed                                 .f.C..\n\n    Start Time: 1690324588\n    Timeout   : 7200 (sec)\n    Verify return code: 0 (ok)\n    Extended master secret: no\n    Max Early Data: 0\n---\nread R BLOCK\n</code></pre>\n"},{"tags":["java","stripe-payments"],"comments":[{"owner":{"account_id":15637668,"reputation":43,"user_id":11282052,"display_name":"Ignacio Estevo"},"score":0,"creation_date":1672528048,"post_id":74971926,"comment_id":132303522,"body_markdown":"I have also tried using the token as shown in the Docs: https://stripe.com/docs/api/external_account_bank_accounts/create?lang=java","body":"I have also tried using the token as shown in the Docs: <a href=\"https://stripe.com/docs/api/external_account_bank_accounts/create?lang=java\" rel=\"nofollow noreferrer\">stripe.com/docs/api/external_account_bank_accounts/&hellip;</a>"},{"owner":{"account_id":15637668,"reputation":43,"user_id":11282052,"display_name":"Ignacio Estevo"},"score":0,"creation_date":1672528096,"post_id":74971926,"comment_id":132303529,"body_markdown":"And creating a new BankAccount object and setting manually the parameters, but accountNumber is not available as it shouldn&#39;t be for security","body":"And creating a new BankAccount object and setting manually the parameters, but accountNumber is not available as it shouldn&#39;t be for security"}],"answers":[{"tags":[],"owner":{"account_id":24416201,"reputation":746,"user_id":18343043,"display_name":"Tarzan"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1672653805,"creation_date":1672653805,"answer_id":74981041,"question_id":74971926,"body_markdown":"So this is a bit trickier and I think it should have been better documented for what it&#39;s worth. You first need to start by creating a bank account token using the token API as shown [here](https://stripe.com/docs/api/tokens/create_bank_account?lang=java). This will generate a token `btok_xxx` that you will need then to use to create an external bank account for your Custom Account as shown [here](https://stripe.com/docs/api/external_account_bank_accounts/create?lang=java)","title":"Add an BankAccount through Stripe API in Java","body":"<p>So this is a bit trickier and I think it should have been better documented for what it's worth. You first need to start by creating a bank account token using the token API as shown <a href=\"https://stripe.com/docs/api/tokens/create_bank_account?lang=java\" rel=\"nofollow noreferrer\">here</a>. This will generate a token <code>btok_xxx</code> that you will need then to use to create an external bank account for your Custom Account as shown <a href=\"https://stripe.com/docs/api/external_account_bank_accounts/create?lang=java\" rel=\"nofollow noreferrer\">here</a></p>\n"},{"tags":[],"owner":{"account_id":13361220,"reputation":1,"user_id":9643175,"display_name":"Christophe Lassus"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690323447,"creation_date":1690323089,"answer_id":76766818,"question_id":74971926,"body_markdown":"Correct code is:\r\n\r\n    bankParams.put(&quot;external_account[object]&quot;,&quot;bank_account&quot;);\r\n    bankParams.put(&quot;external_account[country]&quot;,&quot;US&quot;);\r\n    bankParams.put(&quot;external_account[currency]&quot;,&quot;USD&quot;);\r\n    bankParams.put(&quot;external_account[routing_number]&quot;, &quot;110000000&quot;);\r\n    bankParams.put(&quot;external_account[account_number]&quot;, &quot;000123456789&quot;);\r\n\r\nAs Stripe doc says:\r\n\r\n&gt; &quot;external_account is either a token, like the ones returned by Stripe.js, or a dictionary containing a user’s bank account details&quot;\r\n\r\nIn http syntax, &quot;Dictionary&quot; params are passed through with square brackets...","title":"Add an BankAccount through Stripe API in Java","body":"<p>Correct code is:</p>\n<pre><code>bankParams.put(&quot;external_account[object]&quot;,&quot;bank_account&quot;);\nbankParams.put(&quot;external_account[country]&quot;,&quot;US&quot;);\nbankParams.put(&quot;external_account[currency]&quot;,&quot;USD&quot;);\nbankParams.put(&quot;external_account[routing_number]&quot;, &quot;110000000&quot;);\nbankParams.put(&quot;external_account[account_number]&quot;, &quot;000123456789&quot;);\n</code></pre>\n<p>As Stripe doc says:</p>\n<blockquote>\n<p>&quot;external_account is either a token, like the ones returned by Stripe.js, or a dictionary containing a user’s bank account details&quot;</p>\n</blockquote>\n<p>In http syntax, &quot;Dictionary&quot; params are passed through with square brackets...</p>\n"}],"owner":{"account_id":15637668,"reputation":43,"user_id":11282052,"display_name":"Ignacio Estevo"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":126,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74981041,"answer_count":2,"score":0,"last_activity_date":1690323447,"creation_date":1672518143,"question_id":74971926,"body_markdown":"I am looking to add a bankAccount to a Connect Account in Stripe through the API. I&#39;m using the test numbers given and I followed the instructions. The account has already set an AccountLink and it is of Custom type (Express has also been tried)\r\n\r\n    Stripe.apiKey = stripePrivate;\r\n\r\n        Account account = Account.retrieve(accountId);\r\n        Map&lt;String, Object&gt; bankParams = new HashMap&lt;&gt;();\r\n        bankParams.put(&quot;object&quot;, &quot;bank_account&quot;);\r\n        bankParams.put(&quot;country&quot;, &quot;US&quot;);\r\n        bankParams.put(&quot;currency&quot;, &quot;usd&quot;);\r\n        bankParams.put(&quot;routing_number&quot;, &quot;110000000&quot;);\r\n        bankParams.put(&quot;account_number&quot;, &quot;000123456789&quot;);\r\n\r\n        BankAccount bankAccount = (BankAccount) account.getExternalAccounts().create(bankParams);\r\n\r\nIt appears that it is not recognizing the parameters as I get the following error:\r\n\r\n    &quot;Received unknown parameters: account_number, object, routing_number, currency,country; code: parameter_unknown; request-id: req_ANeBN5XHeh2ki0&quot;\r\nThe Stripe version is 22.4","title":"Add an BankAccount through Stripe API in Java","body":"<p>I am looking to add a bankAccount to a Connect Account in Stripe through the API. I'm using the test numbers given and I followed the instructions. The account has already set an AccountLink and it is of Custom type (Express has also been tried)</p>\n<pre><code>Stripe.apiKey = stripePrivate;\n\n    Account account = Account.retrieve(accountId);\n    Map&lt;String, Object&gt; bankParams = new HashMap&lt;&gt;();\n    bankParams.put(&quot;object&quot;, &quot;bank_account&quot;);\n    bankParams.put(&quot;country&quot;, &quot;US&quot;);\n    bankParams.put(&quot;currency&quot;, &quot;usd&quot;);\n    bankParams.put(&quot;routing_number&quot;, &quot;110000000&quot;);\n    bankParams.put(&quot;account_number&quot;, &quot;000123456789&quot;);\n\n    BankAccount bankAccount = (BankAccount) account.getExternalAccounts().create(bankParams);\n</code></pre>\n<p>It appears that it is not recognizing the parameters as I get the following error:</p>\n<pre><code>&quot;Received unknown parameters: account_number, object, routing_number, currency,country; code: parameter_unknown; request-id: req_ANeBN5XHeh2ki0&quot;\n</code></pre>\n<p>The Stripe version is 22.4</p>\n"},{"tags":["java","operators","boolean","bitwise-operators"],"comments":[{"owner":{"account_id":4192612,"reputation":2296,"user_id":3434874,"accept_rate":100,"display_name":"Blake Yarbrough"},"score":3,"creation_date":1446654191,"post_id":5564410,"comment_id":54835012,"body_markdown":"Possible duplicate of [Why do we usually use \\`||\\` not \\`|\\`, what is the difference?](http://stackoverflow.com/questions/7101992/why-do-we-usually-use-not-what-is-the-difference)","body":"Possible duplicate of <a href=\"http://stackoverflow.com/questions/7101992/why-do-we-usually-use-not-what-is-the-difference\">Why do we usually use `||` not `|`, what is the difference?</a>"},{"owner":{"account_id":2042397,"reputation":10132,"user_id":1834057,"accept_rate":51,"display_name":"Nicholas Hamilton"},"score":0,"creation_date":1517722713,"post_id":5564410,"comment_id":84206702,"body_markdown":"Double performs shortcut if possible.","body":"Double performs shortcut if possible."},{"owner":{"account_id":193707,"reputation":34691,"user_id":435605,"accept_rate":45,"display_name":"AlikElzin-kilaka"},"score":0,"creation_date":1600701249,"post_id":5564410,"comment_id":113163244,"body_markdown":"Couldn&#39;t find info on this in the official sun/oracle documentation :(","body":"Couldn&#39;t find info on this in the official sun/oracle documentation :("},{"owner":{"account_id":193707,"reputation":34691,"user_id":435605,"accept_rate":45,"display_name":"AlikElzin-kilaka"},"score":0,"creation_date":1600701305,"post_id":5564410,"comment_id":113163277,"body_markdown":"&quot;short-circuiting&quot; is the key term here.","body":"&quot;short-circuiting&quot; is the key term here."}],"answers":[{"comments":[{"owner":{"account_id":185877,"reputation":5330,"user_id":422869,"accept_rate":80,"display_name":"Torres"},"score":0,"creation_date":1302083538,"post_id":5564429,"comment_id":6328739,"body_markdown":"Thank you Andreas for the edit, maybe this other question helps too: http://stackoverflow.com/questions/4014535/vs-and-vs","body":"Thank you Andreas for the edit, maybe this other question helps too: <a href=\"http://stackoverflow.com/questions/4014535/vs-and-vs\">stackoverflow.com/questions/4014535/vs-and-vs</a>"}],"tags":[],"owner":{"account_id":185877,"reputation":5330,"user_id":422869,"accept_rate":80,"display_name":"Torres"},"comment_count":1,"down_vote_count":0,"up_vote_count":37,"is_accepted":false,"score":37,"last_activity_date":1302083409,"creation_date":1302083358,"answer_id":5564429,"question_id":5564410,"body_markdown":"    boolean a, b;\r\n    \r\n    Operation     Meaning                       Note\r\n    ---------     -------                       ----\r\n       a &amp;&amp; b     logical AND                    short-circuiting\r\n       a || b     logical OR                     short-circuiting\r\n       a &amp;  b     boolean logical AND            not short-circuiting\r\n       a |  b     boolean logical OR             not short-circuiting\r\n       a ^  b     boolean logical exclusive OR\r\n      !a          logical NOT\r\n    \r\n    short-circuiting        (x != 0) &amp;&amp; (1/x &gt; 1)   SAFE\r\n    not short-circuiting    (x != 0) &amp;  (1/x &gt; 1)   NOT SAFE","title":"What is the difference between &amp; and &amp;&amp; in Java?","body":"<pre><code>boolean a, b;\n\nOperation     Meaning                       Note\n---------     -------                       ----\n   a &amp;&amp; b     logical AND                    short-circuiting\n   a || b     logical OR                     short-circuiting\n   a &amp;  b     boolean logical AND            not short-circuiting\n   a |  b     boolean logical OR             not short-circuiting\n   a ^  b     boolean logical exclusive OR\n  !a          logical NOT\n\nshort-circuiting        (x != 0) &amp;&amp; (1/x &gt; 1)   SAFE\nnot short-circuiting    (x != 0) &amp;  (1/x &gt; 1)   NOT SAFE\n</code></pre>\n"},{"tags":[],"owner":{"account_id":339468,"reputation":9236,"user_id":668970,"accept_rate":75,"display_name":"developer"},"comment_count":0,"down_vote_count":0,"up_vote_count":15,"is_accepted":false,"score":15,"last_activity_date":1302083558,"creation_date":1302083558,"answer_id":5564476,"question_id":5564410,"body_markdown":"It depends on the type of the arguments...\r\n\r\nFor integer arguments, the single ampersand (&quot;&amp;&quot;)is the &quot;bit-wise AND&quot; operator. The double ampersand (&quot;&amp;&amp;&quot;) is not defined for anything but two boolean arguments.\r\n\r\nFor boolean arguments, the single ampersand constitutes the (unconditional) &quot;logical AND&quot; operator while the double ampersand (&quot;&amp;&amp;&quot;) is the &quot;conditional logical AND&quot; operator. That is to say that the single ampersand always evaluates both arguments whereas the double ampersand will only evaluate the second argument if the first argument is true.\r\n\r\nFor all other argument types and combinations, a compile-time error should occur.\r\n","title":"What is the difference between &amp; and &amp;&amp; in Java?","body":"<p>It depends on the type of the arguments...</p>\n\n<p>For integer arguments, the single ampersand (\"&amp;\")is the \"bit-wise AND\" operator. The double ampersand (\"&amp;&amp;\") is not defined for anything but two boolean arguments.</p>\n\n<p>For boolean arguments, the single ampersand constitutes the (unconditional) \"logical AND\" operator while the double ampersand (\"&amp;&amp;\") is the \"conditional logical AND\" operator. That is to say that the single ampersand always evaluates both arguments whereas the double ampersand will only evaluate the second argument if the first argument is true.</p>\n\n<p>For all other argument types and combinations, a compile-time error should occur.</p>\n"},{"tags":[],"owner":{"account_id":277279,"reputation":62850,"user_id":571189,"display_name":"Prince John Wesley"},"comment_count":0,"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1302100682,"creation_date":1302083564,"answer_id":5564478,"question_id":5564410,"body_markdown":"&amp;&amp; is a short circuit operator whereas &amp; is a AND operator.\r\n\r\nTry this.\r\n\r\n\t\tString s = null;\r\n\t\tboolean b = false &amp; s.isEmpty(); // NullPointerException\r\n\t\tboolean sb = false &amp;&amp; s.isEmpty(); // sb is false","title":"What is the difference between &amp; and &amp;&amp; in Java?","body":"<p>&amp;&amp; is a short circuit operator whereas &amp; is a AND operator.</p>\n\n<p>Try this.</p>\n\n<pre><code>    String s = null;\n    boolean b = false &amp; s.isEmpty(); // NullPointerException\n    boolean sb = false &amp;&amp; s.isEmpty(); // sb is false\n</code></pre>\n"},{"comments":[{"owner":{"account_id":6383695,"reputation":5206,"user_id":4952262,"accept_rate":71,"display_name":"Michu93"},"score":15,"creation_date":1499955887,"post_id":5564484,"comment_id":77139516,"body_markdown":"What&#39;s the reason to write one &amp; or | in if statement? It never will be faster than &amp;&amp; and ||. Why do we want to check second condition if we already can have answer? Can you provide and realistic example, please?","body":"What&#39;s the reason to write one &amp; or | in if statement? It never will be faster than &amp;&amp; and ||. Why do we want to check second condition if we already can have answer? Can you provide and realistic example, please?"},{"owner":{"account_id":31816,"reputation":168632,"user_id":87698,"accept_rate":65,"display_name":"Heinzi"},"score":25,"creation_date":1502693935,"post_id":5564484,"comment_id":78295228,"body_markdown":"@Michu93: One example would be if the second condition is a function call which has a side effect that you always need. Since side effects should usually be avoided, there will be only rare cases where you need that, and I can&#39;t think of a realistic example at the moment.","body":"@Michu93: One example would be if the second condition is a function call which has a side effect that you always need. Since side effects should usually be avoided, there will be only rare cases where you need that, and I can&#39;t think of a realistic example at the moment."},{"owner":{"account_id":5643901,"reputation":750,"user_id":4466720,"accept_rate":50,"display_name":"Petr Dvoř&#225;k"},"score":12,"creation_date":1604164177,"post_id":5564484,"comment_id":114265921,"body_markdown":"@Michu93 When implementing security-related code, especially cryptography, the use of these operators prevents side-channel attacks based on time measurements (different execution times for different results). Sometimes, &quot;the constant time&quot; comparison is more valuable than &quot;faster&quot; comparison.","body":"@Michu93 When implementing security-related code, especially cryptography, the use of these operators prevents side-channel attacks based on time measurements (different execution times for different results). Sometimes, &quot;the constant time&quot; comparison is more valuable than &quot;faster&quot; comparison."},{"owner":{"account_id":8687130,"reputation":3474,"user_id":6501190,"accept_rate":83,"display_name":"java-addict301"},"score":6,"creation_date":1647362516,"post_id":5564484,"comment_id":126349998,"body_markdown":"@PetrDvoř&#225;k fantastic example.  To add to this, I have seen this implemented in authentication/login code (including Spring Security) where code execution for an invalid username should take as long as code execution for an invalid password (ie, the former shouldn&#39;t short-curcuit).","body":"@PetrDvoř&#225;k fantastic example.  To add to this, I have seen this implemented in authentication/login code (including Spring Security) where code execution for an invalid username should take as long as code execution for an invalid password (ie, the former shouldn&#39;t short-curcuit)."}],"tags":[],"owner":{"account_id":211497,"reputation":11114,"user_id":463693,"display_name":"ITroubs"},"comment_count":4,"down_vote_count":1,"up_vote_count":363,"is_accepted":true,"score":362,"last_activity_date":1302344076,"creation_date":1302083599,"answer_id":5564484,"question_id":5564410,"body_markdown":"&amp; &lt;-- verifies both operands  \r\n&amp;&amp; &lt;-- stops evaluating if the first operand evaluates to false since the result will be false\r\n\r\n\r\n`(x != 0) &amp; (1/x &gt; 1)` &lt;-- this means evaluate `(x != 0)` then evaluate `(1/x &gt; 1)` then do the &amp;. the problem is that for x=0 this will throw an exception.\r\n\r\n`(x != 0) &amp;&amp; (1/x &gt; 1)` &lt;-- this means evaluate `(x != 0)` and only if this is true then evaluate `(1/x &gt; 1)` so if you have x=0 then this is perfectly safe and won&#39;t throw any exception if (x != 0) evaluates to false the whole thing directly evaluates to false without evaluating the `(1/x &gt; 1)`.\r\n\r\nEDIT:\r\n\r\n\r\n`exprA | exprB` &lt;-- this means evaluate `exprA` then evaluate `exprB` then do the `|`.\r\n\r\n`exprA || exprB` &lt;-- this means evaluate `exprA` and only if this is `false` then evaluate `exprB` and do the `||`.","title":"What is the difference between &amp; and &amp;&amp; in Java?","body":"<p>&amp; &lt;-- verifies both operands<br>\n&amp;&amp; &lt;-- stops evaluating if the first operand evaluates to false since the result will be false</p>\n\n<p><code>(x != 0) &amp; (1/x &gt; 1)</code> &lt;-- this means evaluate <code>(x != 0)</code> then evaluate <code>(1/x &gt; 1)</code> then do the &amp;. the problem is that for x=0 this will throw an exception.</p>\n\n<p><code>(x != 0) &amp;&amp; (1/x &gt; 1)</code> &lt;-- this means evaluate <code>(x != 0)</code> and only if this is true then evaluate <code>(1/x &gt; 1)</code> so if you have x=0 then this is perfectly safe and won't throw any exception if (x != 0) evaluates to false the whole thing directly evaluates to false without evaluating the <code>(1/x &gt; 1)</code>.</p>\n\n<p>EDIT:</p>\n\n<p><code>exprA | exprB</code> &lt;-- this means evaluate <code>exprA</code> then evaluate <code>exprB</code> then do the <code>|</code>.</p>\n\n<p><code>exprA || exprB</code> &lt;-- this means evaluate <code>exprA</code> and only if this is <code>false</code> then evaluate <code>exprB</code> and do the <code>||</code>.</p>\n"},{"tags":[],"owner":{"account_id":36858,"reputation":113744,"user_id":105224,"accept_rate":73,"display_name":"Andreas Dolk"},"comment_count":0,"down_vote_count":1,"up_vote_count":8,"is_accepted":false,"score":7,"last_activity_date":1382450191,"creation_date":1302083631,"answer_id":5564488,"question_id":5564410,"body_markdown":"it&#39;s as specified in the [JLS (15.22.2)][1]:\n\n&gt; When both operands of a &amp;, ^, or | operator are of type boolean or Boolean, then the type of the bitwise operator expression is boolean. In all cases, the operands are subject to unboxing conversion (&#167;5.1.8) as necessary.\n&gt;\n&gt; For &amp;, the result value is true if both operand values are true; otherwise, the result is false.\n&gt;\n&gt; For ^, the result value is true if the operand values are different; otherwise, the result is false.\n&gt;\n&gt; For |, the result value is false if both operand values are false; otherwise, the result is true.\n\nThe &quot;trick&quot; is that `&amp;` is an *Integer Bitwise Operator* as well as an *Boolean Logical Operator*. So why not, seeing this as an example for *operator overloading* is reasonable.\n\n\n  [1]: http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.22.2","title":"What is the difference between &amp; and &amp;&amp; in Java?","body":"<p>it's as specified in the <a href=\"http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.22.2\" rel=\"noreferrer\">JLS (15.22.2)</a>:</p>\n<blockquote>\n<p>When both operands of a &amp;, ^, or | operator are of type boolean or Boolean, then the type of the bitwise operator expression is boolean. In all cases, the operands are subject to unboxing conversion (§5.1.8) as necessary.</p>\n<p>For &amp;, the result value is true if both operand values are true; otherwise, the result is false.</p>\n<p>For ^, the result value is true if the operand values are different; otherwise, the result is false.</p>\n<p>For |, the result value is false if both operand values are false; otherwise, the result is true.</p>\n</blockquote>\n<p>The &quot;trick&quot; is that <code>&amp;</code> is an <em>Integer Bitwise Operator</em> as well as an <em>Boolean Logical Operator</em>. So why not, seeing this as an example for <em>operator overloading</em> is reasonable.</p>\n"},{"comments":[{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":5,"creation_date":1474976481,"post_id":7199886,"comment_id":66744837,"body_markdown":"The question is about logical boolean operations, not bitwise operations.","body":"The question is about logical boolean operations, not bitwise operations."},{"owner":{"account_id":8613791,"reputation":3578,"user_id":6451425,"accept_rate":95,"display_name":"Ad Infinitum"},"score":33,"creation_date":1490175552,"post_id":7199886,"comment_id":72990906,"body_markdown":"@EJP It helps still googlers like me, who read only the title.","body":"@EJP It helps still googlers like me, who read only the title."}],"tags":[],"owner":{"account_id":235324,"reputation":4269,"user_id":502059,"accept_rate":79,"display_name":"suat"},"comment_count":2,"down_vote_count":3,"up_vote_count":69,"is_accepted":false,"score":66,"last_activity_date":1314331078,"creation_date":1314331078,"answer_id":7199886,"question_id":5564410,"body_markdown":"Besides not being a lazy evaluator by evaluating both operands, I think the main characteristics of bitwise operators compare each bytes of operands like in the following example:\r\n\r\n    int a = 4;\r\n    int b = 7;\r\n    System.out.println(a &amp; b); // prints 4\r\n    //meaning in an 32 bit system\r\n    // 00000000 00000000 00000000 00000100\r\n    // 00000000 00000000 00000000 00000111\r\n    // ===================================\r\n    // 00000000 00000000 00000000 00000100\r\n\r\n","title":"What is the difference between &amp; and &amp;&amp; in Java?","body":"<p>Besides not being a lazy evaluator by evaluating both operands, I think the main characteristics of bitwise operators compare each bytes of operands like in the following example:</p>\n\n<pre><code>int a = 4;\nint b = 7;\nSystem.out.println(a &amp; b); // prints 4\n//meaning in an 32 bit system\n// 00000000 00000000 00000000 00000100\n// 00000000 00000000 00000000 00000111\n// ===================================\n// 00000000 00000000 00000000 00000100\n</code></pre>\n"},{"comments":[{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":2,"creation_date":1474976527,"post_id":16588055,"comment_id":66744872,"body_markdown":"It will change the overall result of the expression if the operands have side-effects.","body":"It will change the overall result of the expression if the operands have side-effects."}],"tags":[],"owner":{"account_id":2776554,"reputation":39,"user_id":2390032,"display_name":"Ryan"},"comment_count":1,"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1474976560,"creation_date":1368708905,"answer_id":16588055,"question_id":5564410,"body_markdown":"With booleans, there is no output difference between the two. You can swap &amp;&amp; and &amp; or || and | and it will never change the result of your expression.\r\n\r\nThe difference lies behind the scene where the information is being processed. When you right an expression &quot;(a != 0) &amp; ( b != 0)&quot;  for a= 0 and b = 1, The following happens:\r\n\r\n    left side: a != 0 --&gt; false\r\n    right side: b 1= 0 --&gt; true\r\n    left side and right side are both true? --&gt; false\r\n    expression returns false\r\n\r\nWhen you write an expression `(a != 0) &amp;&amp; ( b != 0)` when a= 0 and b = 1, the following happens:\r\n\r\n    a != 0 --&gt;false\r\n    expression returns false\r\n\r\nLess steps, less processing, better coding, especially when doing many boolean expression or complicated arguments.","title":"What is the difference between &amp; and &amp;&amp; in Java?","body":"<p>With booleans, there is no output difference between the two. You can swap &amp;&amp; and &amp; or || and | and it will never change the result of your expression.</p>\n\n<p>The difference lies behind the scene where the information is being processed. When you right an expression \"(a != 0) &amp; ( b != 0)\"  for a= 0 and b = 1, The following happens:</p>\n\n<pre><code>left side: a != 0 --&gt; false\nright side: b 1= 0 --&gt; true\nleft side and right side are both true? --&gt; false\nexpression returns false\n</code></pre>\n\n<p>When you write an expression <code>(a != 0) &amp;&amp; ( b != 0)</code> when a= 0 and b = 1, the following happens:</p>\n\n<pre><code>a != 0 --&gt;false\nexpression returns false\n</code></pre>\n\n<p>Less steps, less processing, better coding, especially when doing many boolean expression or complicated arguments.</p>\n"},{"tags":[],"owner":{"account_id":6871153,"reputation":1591,"user_id":5281441,"display_name":"satish"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1447752193,"creation_date":1447752193,"answer_id":33753201,"question_id":5564410,"body_markdown":" ‘&amp;&amp;’ : - is a Logical AND operator produce a boolean value of true or false based on the logical relationship of its arguments.\r\n\r\nFor example: - Condition1 &amp;&amp; Condition2\r\n\r\nIf Condition1 is false, then (Condition1 &amp;&amp; Condition2) will always be false, that is the reason why this logical operator is also known as Short Circuit Operator because it does not evaluate another condition. If Condition1 is false , then there is no need to evaluate Condtiton2.\r\n\r\nIf Condition1 is true, then Condition2 is evaluated, if it is true then overall result will be true else it will be false.\r\n\r\n ‘&amp;’ : - is a Bitwise AND Operator. It produces a one (1) in the output if both the input bits are one. Otherwise it produces zero (0).\r\n\r\nFor example:-\r\n\r\nint a=12; // binary representation of 12 is 1100\r\n\r\nint b=6; // binary representation of 6 is 0110\r\n\r\nint c=(a &amp; b); // binary representation of (12 &amp; 6) is 0100\r\n\r\nThe value of c is 4.\r\n\r\nfor reference , refer this http://techno-terminal.blogspot.in/2015/11/difference-between-operator-and-operator.html\r\n","title":"What is the difference between &amp; and &amp;&amp; in Java?","body":"<p>‘&amp;&amp;’ : - is a Logical AND operator produce a boolean value of true or false based on the logical relationship of its arguments.</p>\n\n<p>For example: - Condition1 &amp;&amp; Condition2</p>\n\n<p>If Condition1 is false, then (Condition1 &amp;&amp; Condition2) will always be false, that is the reason why this logical operator is also known as Short Circuit Operator because it does not evaluate another condition. If Condition1 is false , then there is no need to evaluate Condtiton2.</p>\n\n<p>If Condition1 is true, then Condition2 is evaluated, if it is true then overall result will be true else it will be false.</p>\n\n<p>‘&amp;’ : - is a Bitwise AND Operator. It produces a one (1) in the output if both the input bits are one. Otherwise it produces zero (0).</p>\n\n<p>For example:-</p>\n\n<p>int a=12; // binary representation of 12 is 1100</p>\n\n<p>int b=6; // binary representation of 6 is 0110</p>\n\n<p>int c=(a &amp; b); // binary representation of (12 &amp; 6) is 0100</p>\n\n<p>The value of c is 4.</p>\n\n<p>for reference , refer this <a href=\"http://techno-terminal.blogspot.in/2015/11/difference-between-operator-and-operator.html\" rel=\"noreferrer\">http://techno-terminal.blogspot.in/2015/11/difference-between-operator-and-operator.html</a></p>\n"},{"tags":[],"owner":{"account_id":543631,"reputation":10094,"user_id":912829,"accept_rate":53,"display_name":"ACV"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1461930595,"creation_date":1461930595,"answer_id":36937636,"question_id":5564410,"body_markdown":"`&amp;&amp;` and `||` are called short circuit operators. When they are used, for `||` - if the first operand evaluates to `true`, then the rest of the operands are not evaluated. For `&amp;&amp;` - if the first operand evaluates to `false`, the rest of them don&#39;t get evaluated at all.\r\n\r\n\r\nso `if (a || (++x &gt; 0))` in this example the variable x won&#39;t get incremented if a was `true`.","title":"What is the difference between &amp; and &amp;&amp; in Java?","body":"<p><code>&amp;&amp;</code> and <code>||</code> are called short circuit operators. When they are used, for <code>||</code> - if the first operand evaluates to <code>true</code>, then the rest of the operands are not evaluated. For <code>&amp;&amp;</code> - if the first operand evaluates to <code>false</code>, the rest of them don't get evaluated at all.</p>\n\n<p>so <code>if (a || (++x &gt; 0))</code> in this example the variable x won't get incremented if a was <code>true</code>.</p>\n"},{"tags":[],"owner":{"account_id":4066076,"reputation":2498,"user_id":3340968,"accept_rate":43,"display_name":"Yasir Shabbir Choudhary"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1478770975,"creation_date":1478770975,"answer_id":40524317,"question_id":5564410,"body_markdown":"&amp; is a bitwise operator plus used for checking both conditions because sometimes we need to evaluate both condition.\r\nBut &amp;&amp; logical operator go to 2nd condition when first condition give true.\r\n\r\n","title":"What is the difference between &amp; and &amp;&amp; in Java?","body":"<p>&amp; is a bitwise operator plus used for checking both conditions because sometimes we need to evaluate both condition.\nBut &amp;&amp; logical operator go to 2nd condition when first condition give true.</p>\n"},{"tags":[],"owner":{"account_id":5330844,"reputation":14681,"user_id":4251431,"accept_rate":80,"display_name":"Basheer AL-MOMANI"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1488578959,"creation_date":1486988152,"answer_id":42203827,"question_id":5564410,"body_markdown":"all answers are `great`, and it seems that `no` more answer `is needed`\r\nbut I just wonted to point out something about `&amp;&amp;` operator called `dependent condition`\r\n\r\nIn expressions using operator &amp;&amp;, a condition—we’ll call this the `dependent condition`—may require another condition to be true for the evaluation of the dependent condition to be meaningful. \r\n\r\nIn this case, the dependent condition should be placed after the &amp;&amp; operator to prevent errors.\r\n\r\n Consider the expression `(i != 0) &amp;&amp; (10 / i == 2)`. The dependent condition `(10 / i == 2)` must `appear after` the `&amp;&amp;` operator to prevent the possibility of division by zero.\r\n\r\nanother example  `(myObject != null) &amp;&amp; (myObject.getValue() == somevaluse)` \r\n\r\nand another thing: `&amp;&amp;` and `||` are called [short-circuit evaluation][1] because the second argument is executed or evaluated `only if` the `first` argument does `not suffice` to `determine` the `value` of the `expression`\r\n\r\nReferences: [Java™ How To Program (Early Objects), Tenth Edition][2] \r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Short-circuit_evaluation\r\n  [2]: https://www.safaribooksonline.com/library/view/javatm-how-to/9780133813036/ch05lev2sec20.html","title":"What is the difference between &amp; and &amp;&amp; in Java?","body":"<p>all answers are <code>great</code>, and it seems that <code>no</code> more answer <code>is needed</code>\nbut I just wonted to point out something about <code>&amp;&amp;</code> operator called <code>dependent condition</code></p>\n\n<p>In expressions using operator &amp;&amp;, a condition—we’ll call this the <code>dependent condition</code>—may require another condition to be true for the evaluation of the dependent condition to be meaningful. </p>\n\n<p>In this case, the dependent condition should be placed after the &amp;&amp; operator to prevent errors.</p>\n\n<p>Consider the expression <code>(i != 0) &amp;&amp; (10 / i == 2)</code>. The dependent condition <code>(10 / i == 2)</code> must <code>appear after</code> the <code>&amp;&amp;</code> operator to prevent the possibility of division by zero.</p>\n\n<p>another example  <code>(myObject != null) &amp;&amp; (myObject.getValue() == somevaluse)</code> </p>\n\n<p>and another thing: <code>&amp;&amp;</code> and <code>||</code> are called <a href=\"https://en.wikipedia.org/wiki/Short-circuit_evaluation\" rel=\"nofollow noreferrer\">short-circuit evaluation</a> because the second argument is executed or evaluated <code>only if</code> the <code>first</code> argument does <code>not suffice</code> to <code>determine</code> the <code>value</code> of the <code>expression</code></p>\n\n<p>References: <a href=\"https://www.safaribooksonline.com/library/view/javatm-how-to/9780133813036/ch05lev2sec20.html\" rel=\"nofollow noreferrer\">Java™ How To Program (Early Objects), Tenth Edition</a> </p>\n"},{"comments":[{"owner":{"account_id":4382488,"reputation":343,"user_id":6666688,"display_name":"java dev"},"score":0,"creation_date":1652441439,"post_id":43338306,"comment_id":127612879,"body_markdown":"All respection for your rich explain @aircraft","body":"All respection for your rich explain @aircraft"},{"owner":{"account_id":3449131,"reputation":12148,"user_id":2889165,"accept_rate":73,"display_name":"Andreas Lundgren"},"score":0,"creation_date":1690317506,"post_id":43338306,"comment_id":135336093,"body_markdown":"This is not correct on the wiki source. A bitwise and of for example 00000010 and 00000010 does not produce the number 1, it produces the number 2. This can be casted to the boolean True, but this answer states that it produces 1 which is plain incorrect.","body":"This is not correct on the wiki source. A bitwise and of for example 00000010 and 00000010 does not produce the number 1, it produces the number 2. This can be casted to the boolean True, but this answer states that it produces 1 which is plain incorrect."}],"tags":[],"owner":{"account_id":8719608,"reputation":25664,"user_id":6523163,"accept_rate":72,"display_name":"aircraft"},"comment_count":2,"down_vote_count":1,"up_vote_count":9,"is_accepted":false,"score":8,"last_activity_date":1690323217,"creation_date":1491892204,"answer_id":43338306,"question_id":5564410,"body_markdown":"I think my answer can be more understandable:\r\n\r\nThere are two differences between  `&amp;` and ` &amp;&amp;`.\r\n\r\n**If they use as logical AND**\r\n\r\n`&amp;` and `&amp;&amp;` can be logical `AND`, when the `&amp;` or `&amp;&amp;` left and right expression result all is true, the whole operation result can be true.\r\n\r\nwhen `&amp;` and `&amp;&amp;` as logical `AND`, there is a difference:\r\n\r\nwhen use `&amp;&amp;` as logical `AND`, if the left expression result is false, the right expression will not execute.\r\n\r\nTake the example :\r\n\r\n    String str = null;\r\n    \r\n    if(str!=null &amp;&amp; !str.equals(&quot;&quot;)){  // the right expression will not execute\r\n    \t\t\r\n    }\r\n\r\nIf using `&amp;`:\r\n\r\n    String str = null;\r\n    \r\n    if(str!=null &amp; !str.equals(&quot;&quot;)){  // the right expression will execute, and throw the NullPointerException \r\n    \t\t\r\n    }\r\n\r\nAn other more example:\r\n\r\n    int x = 0;\r\n    int y = 2;\r\n    if(x==0 &amp; ++y&gt;2){\r\n        System.out.print(“y=”+y);  // print is: y=3\r\n    }\r\n\r\n---\r\n\r\n    int x = 0;\r\n    int y = 2;\r\n    if(x==0 &amp;&amp; ++y&gt;2){\r\n        System.out.print(“y=”+y);  // print is: y=2\r\n    }\r\n\r\n\r\n**&amp; can be used as bit operator**\r\n\r\n`&amp;` can be used as Bitwise `AND` operator,  `&amp;&amp;` can not.\r\n\r\n&gt; The bitwise AND &quot; &amp;&quot; operator produces 1 if and only if both of the bits in \r\nits operands are 1. However, if both of the bits are 0 or both of the bits are different then this operator produces 0. To be more precise bitwise AND &quot; &amp;&quot; operator&#160;returns 1 if both of the two bits is 1 and it returns 0 if any of the bits is 0.&#160;\r\n\r\nFrom the wiki page:\r\n\r\nhttp://www.roseindia.net/java/master-java/java-bitwise-and.shtml","title":"What is the difference between &amp; and &amp;&amp; in Java?","body":"<p>I think my answer can be more understandable:</p>\n<p>There are two differences between  <code>&amp;</code> and <code> &amp;&amp;</code>.</p>\n<p><strong>If they use as logical AND</strong></p>\n<p><code>&amp;</code> and <code>&amp;&amp;</code> can be logical <code>AND</code>, when the <code>&amp;</code> or <code>&amp;&amp;</code> left and right expression result all is true, the whole operation result can be true.</p>\n<p>when <code>&amp;</code> and <code>&amp;&amp;</code> as logical <code>AND</code>, there is a difference:</p>\n<p>when use <code>&amp;&amp;</code> as logical <code>AND</code>, if the left expression result is false, the right expression will not execute.</p>\n<p>Take the example :</p>\n<pre><code>String str = null;\n\nif(str!=null &amp;&amp; !str.equals(&quot;&quot;)){  // the right expression will not execute\n        \n}\n</code></pre>\n<p>If using <code>&amp;</code>:</p>\n<pre><code>String str = null;\n\nif(str!=null &amp; !str.equals(&quot;&quot;)){  // the right expression will execute, and throw the NullPointerException \n        \n}\n</code></pre>\n<p>An other more example:</p>\n<pre><code>int x = 0;\nint y = 2;\nif(x==0 &amp; ++y&gt;2){\n    System.out.print(“y=”+y);  // print is: y=3\n}\n</code></pre>\n<hr />\n<pre><code>int x = 0;\nint y = 2;\nif(x==0 &amp;&amp; ++y&gt;2){\n    System.out.print(“y=”+y);  // print is: y=2\n}\n</code></pre>\n<p><strong>&amp; can be used as bit operator</strong></p>\n<p><code>&amp;</code> can be used as Bitwise <code>AND</code> operator,  <code>&amp;&amp;</code> can not.</p>\n<blockquote>\n<p>The bitwise AND &quot; &amp;&quot; operator produces 1 if and only if both of the bits in\nits operands are 1. However, if both of the bits are 0 or both of the bits are different then this operator produces 0. To be more precise bitwise AND &quot; &amp;&quot; operator returns 1 if both of the two bits is 1 and it returns 0 if any of the bits is 0. </p>\n</blockquote>\n<p>From the wiki page:</p>\n<p><a href=\"http://www.roseindia.net/java/master-java/java-bitwise-and.shtml\" rel=\"nofollow noreferrer\">http://www.roseindia.net/java/master-java/java-bitwise-and.shtml</a></p>\n"},{"tags":[],"owner":{"account_id":128634,"reputation":902,"user_id":326639,"accept_rate":100,"display_name":"mgr326639"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1517232813,"creation_date":1506427582,"answer_id":46426081,"question_id":5564410,"body_markdown":"Besides &amp;&amp; and || being short circuiting, also consider operator precedence when mixing the two forms.\r\nI think it will not be immediately apparent to everybody that result1 and result2 contain different values.\r\n\r\n    boolean a = true;\r\n    boolean b = false;\r\n    boolean c = false;\r\n    \r\n    boolean result1 = a || b &amp;&amp; c; //is true;  evaluated as a || (b &amp;&amp; c)\r\n    boolean result2 = a  | b &amp;&amp; c; //is false; evaluated as (a | b) &amp;&amp; c\r\n\r\n","title":"What is the difference between &amp; and &amp;&amp; in Java?","body":"<p>Besides &amp;&amp; and || being short circuiting, also consider operator precedence when mixing the two forms.\nI think it will not be immediately apparent to everybody that result1 and result2 contain different values.</p>\n\n<pre><code>boolean a = true;\nboolean b = false;\nboolean c = false;\n\nboolean result1 = a || b &amp;&amp; c; //is true;  evaluated as a || (b &amp;&amp; c)\nboolean result2 = a  | b &amp;&amp; c; //is false; evaluated as (a | b) &amp;&amp; c\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4806468,"reputation":3469,"user_id":3881354,"accept_rate":75,"display_name":"Elyas Hadizadeh"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1617181803,"creation_date":1617181803,"answer_id":66884750,"question_id":5564410,"body_markdown":"In respect of the AND and OR operators, Java has got two types of evaluation namely `Short-Circuit evaluation` and `full evaluation`. \r\n\r\n**`&amp;&amp; ||` Short-Circuit Evaluation**\r\n\r\n*Short-Circuit evaluation* enables you to **not evaluate** the right-hand side of AND and OR expressions, when the overall result can be predicted from the left-side value.\r\n\r\n    int numberOne = 1;\r\n    int numberTwo = 2;\r\n    boolean result = false;\r\n\r\n    // left-side is false so the the overall result CAN be predicted without evaluating the right side.\r\n    // numberOne will be 1, numberTwo will be 2, result will be false\r\n    result = (numberOne &gt; numberTwo) &amp;&amp; (++numberOne == numberTwo);\r\n    \r\n    System.out.println(numberOne); // prints 1\r\n    System.out.println(numberTwo); // prints 2\r\n    System.out.println(result);    // prints false\r\n\r\n\r\n    // left-side is true so the the overall result CAN NOT be predicted without evaluating the right side.\r\n    // numberOne will be 2, numberTwo will be 2, result will be true\r\n    result = (numberTwo &gt; numberOne) &amp;&amp; (++numberOne == numberTwo);\r\n\r\n    System.out.println(numberOne); // prints 2\r\n    System.out.println(numberTwo); // prints 2\r\n    System.out.println(result);    // prints true\r\n\r\n**`&amp; | ^` Full Evaluation**\r\n\r\nAlthough in some cases it is possible to predict the result, It is necessary to evaluate the right-hand side.\r\n\r\n    int numberOne = 1;\r\n    int numberTwo = 2;\r\n    boolean result = false;\r\n\r\n    // left-side is false so the the overall result will be false BUT the right side MUST be evaluated too.\r\n    // numberOne will be 2, numberTwo will be 2, result will be false\r\n    result = (numberOne &gt; numberTwo) &amp; (++numberOne == numberTwo);\r\n\r\n    System.out.println(numberOne); // prints 2\r\n    System.out.println(numberTwo); // prints 2\r\n    System.out.println(result);    // prints false\r\n\r\n\r\n\r\nNotice:\r\n\r\n 1. Notice that for XOR (`^`) there is no short-circuit, because both sides are always required to determine the overall result.\r\n 2. Notice that other possible names for Short-Circuit evaluation are `minimal evaluation` and `McCarthy evaluation`.\r\n 3. It is not recommenced to mix boolean logic and actions in the same expression\r\n 4. `&amp;` can also act as a Bitwise AND operator which is very academic and can be used in cryptography. When both bits are 1, the result is 1, or either of the bits is not 1, the result is 0. (Check the following code)\r\n\r\n\r\nAND Bitwise example:\r\n\r\n    byte a = 5;              // 00000101\r\n    byte b = 3;              // 00000011\r\n    byte c = (byte) (a &amp; b); // 00000001 (c is 1)\r\n\r\n\r\n\r\n","title":"What is the difference between &amp; and &amp;&amp; in Java?","body":"<p>In respect of the AND and OR operators, Java has got two types of evaluation namely <code>Short-Circuit evaluation</code> and <code>full evaluation</code>.</p>\n<p><strong><code>&amp;&amp; ||</code> Short-Circuit Evaluation</strong></p>\n<p><em>Short-Circuit evaluation</em> enables you to <strong>not evaluate</strong> the right-hand side of AND and OR expressions, when the overall result can be predicted from the left-side value.</p>\n<pre><code>int numberOne = 1;\nint numberTwo = 2;\nboolean result = false;\n\n// left-side is false so the the overall result CAN be predicted without evaluating the right side.\n// numberOne will be 1, numberTwo will be 2, result will be false\nresult = (numberOne &gt; numberTwo) &amp;&amp; (++numberOne == numberTwo);\n\nSystem.out.println(numberOne); // prints 1\nSystem.out.println(numberTwo); // prints 2\nSystem.out.println(result);    // prints false\n\n\n// left-side is true so the the overall result CAN NOT be predicted without evaluating the right side.\n// numberOne will be 2, numberTwo will be 2, result will be true\nresult = (numberTwo &gt; numberOne) &amp;&amp; (++numberOne == numberTwo);\n\nSystem.out.println(numberOne); // prints 2\nSystem.out.println(numberTwo); // prints 2\nSystem.out.println(result);    // prints true\n</code></pre>\n<p><strong><code>&amp; | ^</code> Full Evaluation</strong></p>\n<p>Although in some cases it is possible to predict the result, It is necessary to evaluate the right-hand side.</p>\n<pre><code>int numberOne = 1;\nint numberTwo = 2;\nboolean result = false;\n\n// left-side is false so the the overall result will be false BUT the right side MUST be evaluated too.\n// numberOne will be 2, numberTwo will be 2, result will be false\nresult = (numberOne &gt; numberTwo) &amp; (++numberOne == numberTwo);\n\nSystem.out.println(numberOne); // prints 2\nSystem.out.println(numberTwo); // prints 2\nSystem.out.println(result);    // prints false\n</code></pre>\n<p>Notice:</p>\n<ol>\n<li>Notice that for XOR (<code>^</code>) there is no short-circuit, because both sides are always required to determine the overall result.</li>\n<li>Notice that other possible names for Short-Circuit evaluation are <code>minimal evaluation</code> and <code>McCarthy evaluation</code>.</li>\n<li>It is not recommenced to mix boolean logic and actions in the same expression</li>\n<li><code>&amp;</code> can also act as a Bitwise AND operator which is very academic and can be used in cryptography. When both bits are 1, the result is 1, or either of the bits is not 1, the result is 0. (Check the following code)</li>\n</ol>\n<p>AND Bitwise example:</p>\n<pre><code>byte a = 5;              // 00000101\nbyte b = 3;              // 00000011\nbyte c = (byte) (a &amp; b); // 00000001 (c is 1)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5273768,"reputation":4934,"user_id":4211264,"accept_rate":73,"display_name":"Bhargav Thanki"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1620279417,"creation_date":1620279417,"answer_id":67412420,"question_id":5564410,"body_markdown":"Almost every point of comparison is very well covered in all the answers. I just want to add one example. To demonstrate how the output changes based on which operator we use. Consider the below example\r\n\r\n    int a = 10;\r\n\tif(++a==10 &amp; ++a==12) {\r\n\t    ++a;\r\n\t}\r\n\tSystem.out.println(a); //12\r\n    \r\nIn the above code, We are using bitwise &amp; operator. So It will evaluate both the arguments(left and right) irrespective of the individual result.\r\n\r\nso `a` will increment 2 times within `if condition`. But as the condition will not become true, It will not enter inside the if-loop and 3rd increment will not happen. So the final value of a would become 12 in this case.\r\n\r\nNow suppose, in the same above example If we use short-circuit &amp;&amp; operator. then after evaluating `++a==10` to false, It will not go to check the second argument. And Hence the final value of a would-be 11.\r\n\r\n    int a = 10;\r\n\tif(++a==10 &amp;&amp; ++a==12) {\r\n\t    ++a;\r\n\t}\r\n\tSystem.out.println(a); //11\r\n\r\nBased on this, We can say that performance of bitwise &amp; operator is relatively low compare to the short-circuit &amp;&amp; operator. As bitwise operator will go to evaluate both the arguments irrespective of the result of the first argument. While &amp;&amp; operator will stop evaluating the second argument if the first argument&#39;s result is false.\r\n\r\nOne more difference between these two is, Bitwise &amp; operator is applicable for boolean as well as integral types. While short-circuit &amp;&amp; operator is applicable only for the boolean type.\r\n\r\nWe can write \r\n\r\n    System.out.println(4 &amp; 5); // 4\r\n\r\nBut if We try to write like ,\r\n\r\n    System.out.println(4 &amp;&amp; 5);\r\n\r\nThen it will give an error saying, \r\n\r\n&gt; bad operand types for binary operator &#39;&amp;&amp;&#39;\r\n\r\n ","title":"What is the difference between &amp; and &amp;&amp; in Java?","body":"<p>Almost every point of comparison is very well covered in all the answers. I just want to add one example. To demonstrate how the output changes based on which operator we use. Consider the below example</p>\n<pre><code>int a = 10;\nif(++a==10 &amp; ++a==12) {\n    ++a;\n}\nSystem.out.println(a); //12\n</code></pre>\n<p>In the above code, We are using bitwise &amp; operator. So It will evaluate both the arguments(left and right) irrespective of the individual result.</p>\n<p>so <code>a</code> will increment 2 times within <code>if condition</code>. But as the condition will not become true, It will not enter inside the if-loop and 3rd increment will not happen. So the final value of a would become 12 in this case.</p>\n<p>Now suppose, in the same above example If we use short-circuit &amp;&amp; operator. then after evaluating <code>++a==10</code> to false, It will not go to check the second argument. And Hence the final value of a would-be 11.</p>\n<pre><code>int a = 10;\nif(++a==10 &amp;&amp; ++a==12) {\n    ++a;\n}\nSystem.out.println(a); //11\n</code></pre>\n<p>Based on this, We can say that performance of bitwise &amp; operator is relatively low compare to the short-circuit &amp;&amp; operator. As bitwise operator will go to evaluate both the arguments irrespective of the result of the first argument. While &amp;&amp; operator will stop evaluating the second argument if the first argument's result is false.</p>\n<p>One more difference between these two is, Bitwise &amp; operator is applicable for boolean as well as integral types. While short-circuit &amp;&amp; operator is applicable only for the boolean type.</p>\n<p>We can write</p>\n<pre><code>System.out.println(4 &amp; 5); // 4\n</code></pre>\n<p>But if We try to write like ,</p>\n<pre><code>System.out.println(4 &amp;&amp; 5);\n</code></pre>\n<p>Then it will give an error saying,</p>\n<blockquote>\n<p>bad operand types for binary operator '&amp;&amp;'</p>\n</blockquote>\n"}],"owner":{"display_name":"Lavneesh"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":241037,"favorite_count":0,"down_vote_count":1,"up_vote_count":220,"accepted_answer_id":5564484,"answer_count":15,"score":219,"last_activity_date":1690323217,"creation_date":1302083215,"question_id":5564410,"body_markdown":"I always thought that `&amp;&amp;` operator in Java is used for verifying whether both its boolean operands are `true`, and the `&amp;` operator is used to do Bit-wise operations on two integer types.\r\n\r\nRecently I came to know that `&amp;` operator can also be used verify whether both its boolean operands are `true`, the only difference being that it checks the RHS operand even if the LHS operand is false.\r\n\r\nIs the `&amp;` operator in Java internally overloaded? Or is there some other concept behind this? ","title":"What is the difference between &amp; and &amp;&amp; in Java?","body":"<p>I always thought that <code>&amp;&amp;</code> operator in Java is used for verifying whether both its boolean operands are <code>true</code>, and the <code>&amp;</code> operator is used to do Bit-wise operations on two integer types.</p>\n\n<p>Recently I came to know that <code>&amp;</code> operator can also be used verify whether both its boolean operands are <code>true</code>, the only difference being that it checks the RHS operand even if the LHS operand is false.</p>\n\n<p>Is the <code>&amp;</code> operator in Java internally overloaded? Or is there some other concept behind this? </p>\n"},{"tags":["java","python-3.x","selenium-webdriver","selenium-chromedriver"],"answers":[{"tags":[],"owner":{"account_id":16516727,"reputation":29,"user_id":11933952,"display_name":"Waller511"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1566448835,"creation_date":1565918757,"answer_id":57517936,"question_id":50602355,"body_markdown":"I had the same problem, so I made a selenium script to automatically download the exe file from chromedrivers site and get all my scripts to reference the current location of the chromedriver.exe file in my python directory. I run this script parallel to google updates in the scheduler, so that when chrome gets updated so does the driver. \r\n\r\nFeel free to use it / retool it.\r\n\r\n-- getFileProperties.py --\r\n```python\r\n# as per https://stackoverflow.com/questions/580924/python-windows-file-version-attribute\r\n\r\nimport win32api\r\n\r\n#==============================================================================\r\ndef getFileProperties(fname):\r\n#==============================================================================\r\n    &quot;&quot;&quot;\r\n    Read all properties of the given file return them as a dictionary.\r\n    &quot;&quot;&quot;\r\n    propNames = (&#39;Comments&#39;, &#39;InternalName&#39;, &#39;ProductName&#39;,\r\n        &#39;CompanyName&#39;, &#39;LegalCopyright&#39;, &#39;ProductVersion&#39;,\r\n        &#39;FileDescription&#39;, &#39;LegalTrademarks&#39;, &#39;PrivateBuild&#39;,\r\n        &#39;FileVersion&#39;, &#39;OriginalFilename&#39;, &#39;SpecialBuild&#39;)\r\n\r\n    props = {&#39;FixedFileInfo&#39;: None, &#39;StringFileInfo&#39;: None, &#39;FileVersion&#39;: None}\r\n\r\n    try:\r\n        # backslash as parm returns dictionary of numeric info corresponding to VS_FIXEDFILEINFO struc\r\n        fixedInfo = win32api.GetFileVersionInfo(fname, &#39;\\\\&#39;)\r\n        props[&#39;FixedFileInfo&#39;] = fixedInfo\r\n        props[&#39;FileVersion&#39;] = &quot;%d.%d.%d.%d&quot; % (fixedInfo[&#39;FileVersionMS&#39;] / 65536,\r\n                fixedInfo[&#39;FileVersionMS&#39;] % 65536, fixedInfo[&#39;FileVersionLS&#39;] / 65536,\r\n                fixedInfo[&#39;FileVersionLS&#39;] % 65536)\r\n\r\n        # \\VarFileInfo\\Translation returns list of available (language, codepage)\r\n        # pairs that can be used to retreive string info. We are using only the first pair.\r\n        lang, codepage = win32api.GetFileVersionInfo(fname, &#39;\\\\VarFileInfo\\\\Translation&#39;)[0]\r\n\r\n        # any other must be of the form \\StringfileInfo\\%04X%04X\\parm_name, middle\r\n        # two are language/codepage pair returned from above\r\n\r\n        strInfo = {}\r\n        for propName in propNames:\r\n            strInfoPath = u&#39;\\\\StringFileInfo\\\\%04X%04X\\\\%s&#39; % (lang, codepage, propName)\r\n            ## print str_info\r\n            strInfo[propName] = win32api.GetFileVersionInfo(fname, strInfoPath)\r\n\r\n        props[&#39;StringFileInfo&#39;] = strInfo\r\n    except:\r\n        pass\r\n\r\n    return props\r\n``` \r\n-- ChromeVersion.py --\r\n```python\r\nfrom getFileProperties import *\r\n\r\nchrome_browser = #&#39;C:\\\\Program Files (x86)\\\\Google\\\\Chrome\\\\Application\\\\chrome.exe&#39; -- ENTER YOUR Chrome.exe filepath\r\n\r\n\r\ncb_dictionary = getFileProperties(chrome_browser) # returns whole string of version (ie. 76.0.111)\r\n\r\nchrome_browser_version = cb_dictionary[&#39;FileVersion&#39;][:2] # substring version to capabable version (ie. 77 / 76)\r\n\r\n\r\nnextVersion = str(int(chrome_browser_version) +1) # grabs the next version of the chrome browser\r\n\r\nlastVersion = str(int(chrome_browser_version) -1) # grabs the last version of the chrome browser\r\n\r\n``` \r\n-- ChromeDriverAutomation.py --\r\n\r\n```python\r\nfrom ChromeVersion import chrome_browser_version, nextVersion, lastVersion\r\n\r\n\r\ndriverName = &quot;\\\\chromedriver.exe&quot;\r\n\r\n# defining base file directory of chrome drivers\r\ndriver_loc = #&quot;C:\\\\Users\\\\Administrator\\\\AppData\\\\Local\\\\Programs\\\\Python\\\\Python37-32\\\\ChromeDriver\\\\&quot; -- ENTER the file path of your exe\r\n# -- I created a separate folder to house the versions of chromedriver, previous versions will be deleted after downloading the newest version.\r\n# ie. version 75 will be deleted after 77 has been downloaded.\r\n\r\n# defining the file path of your exe file automatically updating based on your browsers current version of chrome.\r\ncurrentPath = driver_loc + chrome_browser_version + driverName \r\n# check file directories to see if chrome drivers exist in nextVersion\r\n\r\n\r\nimport os.path\r\n\r\n# check if new version of drive exists --&gt; only continue if it doesn&#39;t\r\nNewpath = driver_loc + nextVersion\r\n\r\n# check if we have already downloaded the newest version of the browser, ie if we have version 76, and have already downloaded a version of 77, we don&#39;t need to run any more of the script.\r\nnewfileloc = Newpath + driverName\r\nexists = os.path.exists(newfileloc)\r\n\r\n\r\nif (exists == False):\r\n\r\n\t#open chrome driver and attempt to download new chrome driver exe file.\r\n\r\n\tfrom selenium import webdriver\r\n\tfrom selenium.webdriver.common.keys import Keys\r\n\tfrom selenium.webdriver.chrome.options import Options\r\n\timport time\r\n\tchrome_options = Options()\r\n\texecutable_path = currentPath\r\n\tdriver = webdriver.Chrome(executable_path=executable_path, options=chrome_options)\r\n\r\n\t# opening up url of chromedriver to get new version of chromedriver.\r\n\tchromeDriverURL = &#39;https://chromedriver.storage.googleapis.com/index.html?path=&#39; + nextVersion \r\n\r\n\tdriver.get(chromeDriverURL)\r\n\r\n\ttime.sleep(5)\r\n\t# find records of table rows\r\n\ttable = driver.find_elements_by_css_selector(&#39;tr&#39;)\r\n\r\n\t\r\n\t# check the length of the table\r\n\tTable_len = len(table)\r\n\r\n\t# ensure that table length is greater than 4, else fail. -- table length of 4 is default when there are no availble updates\r\n\tif (Table_len &gt; 4 ):\r\n\r\n\t\t# define string value of link\r\n\t\trowText = table[(len(table)-2)].text[:6]\r\n\t\ttime.sleep(1)\r\n\t\t# select the value of the row\r\n\t\tdriver.find_element_by_xpath(&#39;//*[contains(text(),&#39; + &#39;&quot;&#39; + str(rowText) + &#39;&quot;&#39;+&#39;)]&#39;).click()\r\n\t\ttime.sleep(1)\r\n\t\t#select chromedriver zip for windows \r\n\t\tdriver.find_element_by_xpath(&#39;//*[contains(text(),&#39; + &#39;&quot;&#39; + &quot;win32&quot; + &#39;&quot;&#39;+&#39;)]&#39;).click()\r\n\r\n\t\ttime.sleep(3)\r\n\t\tdriver.quit()\r\n\t\t\r\n\t\tfrom zipfile import ZipFile\r\n\t\timport shutil\r\n\r\n\r\n\t\tfileName = #r&quot;C:\\Users\\Administrator\\Downloads\\chromedriver_win32.zip&quot; --&gt; enter your download path here.\r\n\r\n\r\n\t\t\r\n\r\n\t\t# Create a ZipFile Object and load sample.zip in it\r\n\t\twith ZipFile(fileName, &#39;r&#39;) as zipObj:\r\n\t\t   # Extract all the contents of zip file in different directory\r\n\t\t   zipObj.extractall(Newpath)\r\n\t\t  \r\n\t\t\r\n\t\t# delete downloaded file\r\n\t\tos.remove(fileName)\r\n\r\n\r\n\r\n\t\t# defining old chrome driver location\r\n\t\toldPath = driver_loc + lastVersion\r\n\t\toldpathexists = os.path.exists(oldPath)\r\n\t\t\r\n\t\t# this deletes the old folder with the older version of chromedriver in it (version 75, once 77 has been downloaded)\r\n\t\tif(oldpathexists == True):\r\n\t\t\tshutil.rmtree(oldPath, ignore_errors=True)\r\n\r\n\r\n\t\t\r\nexit()\r\n\r\n``` \r\nhttps://github.com/MattWaller/ChromeDriverAutoUpdate","title":"Is there a way to automatically update chromedriver in my Test Automation Suite directory?","body":"<p>I had the same problem, so I made a selenium script to automatically download the exe file from chromedrivers site and get all my scripts to reference the current location of the chromedriver.exe file in my python directory. I run this script parallel to google updates in the scheduler, so that when chrome gets updated so does the driver. </p>\n\n<p>Feel free to use it / retool it.</p>\n\n<p>-- getFileProperties.py --</p>\n\n<pre class=\"lang-py prettyprint-override\"><code># as per https://stackoverflow.com/questions/580924/python-windows-file-version-attribute\n\nimport win32api\n\n#==============================================================================\ndef getFileProperties(fname):\n#==============================================================================\n    \"\"\"\n    Read all properties of the given file return them as a dictionary.\n    \"\"\"\n    propNames = ('Comments', 'InternalName', 'ProductName',\n        'CompanyName', 'LegalCopyright', 'ProductVersion',\n        'FileDescription', 'LegalTrademarks', 'PrivateBuild',\n        'FileVersion', 'OriginalFilename', 'SpecialBuild')\n\n    props = {'FixedFileInfo': None, 'StringFileInfo': None, 'FileVersion': None}\n\n    try:\n        # backslash as parm returns dictionary of numeric info corresponding to VS_FIXEDFILEINFO struc\n        fixedInfo = win32api.GetFileVersionInfo(fname, '\\\\')\n        props['FixedFileInfo'] = fixedInfo\n        props['FileVersion'] = \"%d.%d.%d.%d\" % (fixedInfo['FileVersionMS'] / 65536,\n                fixedInfo['FileVersionMS'] % 65536, fixedInfo['FileVersionLS'] / 65536,\n                fixedInfo['FileVersionLS'] % 65536)\n\n        # \\VarFileInfo\\Translation returns list of available (language, codepage)\n        # pairs that can be used to retreive string info. We are using only the first pair.\n        lang, codepage = win32api.GetFileVersionInfo(fname, '\\\\VarFileInfo\\\\Translation')[0]\n\n        # any other must be of the form \\StringfileInfo\\%04X%04X\\parm_name, middle\n        # two are language/codepage pair returned from above\n\n        strInfo = {}\n        for propName in propNames:\n            strInfoPath = u'\\\\StringFileInfo\\\\%04X%04X\\\\%s' % (lang, codepage, propName)\n            ## print str_info\n            strInfo[propName] = win32api.GetFileVersionInfo(fname, strInfoPath)\n\n        props['StringFileInfo'] = strInfo\n    except:\n        pass\n\n    return props\n</code></pre>\n\n<p>-- ChromeVersion.py --</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>from getFileProperties import *\n\nchrome_browser = #'C:\\\\Program Files (x86)\\\\Google\\\\Chrome\\\\Application\\\\chrome.exe' -- ENTER YOUR Chrome.exe filepath\n\n\ncb_dictionary = getFileProperties(chrome_browser) # returns whole string of version (ie. 76.0.111)\n\nchrome_browser_version = cb_dictionary['FileVersion'][:2] # substring version to capabable version (ie. 77 / 76)\n\n\nnextVersion = str(int(chrome_browser_version) +1) # grabs the next version of the chrome browser\n\nlastVersion = str(int(chrome_browser_version) -1) # grabs the last version of the chrome browser\n\n</code></pre>\n\n<p>-- ChromeDriverAutomation.py --</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>from ChromeVersion import chrome_browser_version, nextVersion, lastVersion\n\n\ndriverName = \"\\\\chromedriver.exe\"\n\n# defining base file directory of chrome drivers\ndriver_loc = #\"C:\\\\Users\\\\Administrator\\\\AppData\\\\Local\\\\Programs\\\\Python\\\\Python37-32\\\\ChromeDriver\\\\\" -- ENTER the file path of your exe\n# -- I created a separate folder to house the versions of chromedriver, previous versions will be deleted after downloading the newest version.\n# ie. version 75 will be deleted after 77 has been downloaded.\n\n# defining the file path of your exe file automatically updating based on your browsers current version of chrome.\ncurrentPath = driver_loc + chrome_browser_version + driverName \n# check file directories to see if chrome drivers exist in nextVersion\n\n\nimport os.path\n\n# check if new version of drive exists --&gt; only continue if it doesn't\nNewpath = driver_loc + nextVersion\n\n# check if we have already downloaded the newest version of the browser, ie if we have version 76, and have already downloaded a version of 77, we don't need to run any more of the script.\nnewfileloc = Newpath + driverName\nexists = os.path.exists(newfileloc)\n\n\nif (exists == False):\n\n    #open chrome driver and attempt to download new chrome driver exe file.\n\n    from selenium import webdriver\n    from selenium.webdriver.common.keys import Keys\n    from selenium.webdriver.chrome.options import Options\n    import time\n    chrome_options = Options()\n    executable_path = currentPath\n    driver = webdriver.Chrome(executable_path=executable_path, options=chrome_options)\n\n    # opening up url of chromedriver to get new version of chromedriver.\n    chromeDriverURL = 'https://chromedriver.storage.googleapis.com/index.html?path=' + nextVersion \n\n    driver.get(chromeDriverURL)\n\n    time.sleep(5)\n    # find records of table rows\n    table = driver.find_elements_by_css_selector('tr')\n\n\n    # check the length of the table\n    Table_len = len(table)\n\n    # ensure that table length is greater than 4, else fail. -- table length of 4 is default when there are no availble updates\n    if (Table_len &gt; 4 ):\n\n        # define string value of link\n        rowText = table[(len(table)-2)].text[:6]\n        time.sleep(1)\n        # select the value of the row\n        driver.find_element_by_xpath('//*[contains(text(),' + '\"' + str(rowText) + '\"'+')]').click()\n        time.sleep(1)\n        #select chromedriver zip for windows \n        driver.find_element_by_xpath('//*[contains(text(),' + '\"' + \"win32\" + '\"'+')]').click()\n\n        time.sleep(3)\n        driver.quit()\n\n        from zipfile import ZipFile\n        import shutil\n\n\n        fileName = #r\"C:\\Users\\Administrator\\Downloads\\chromedriver_win32.zip\" --&gt; enter your download path here.\n\n\n\n\n        # Create a ZipFile Object and load sample.zip in it\n        with ZipFile(fileName, 'r') as zipObj:\n           # Extract all the contents of zip file in different directory\n           zipObj.extractall(Newpath)\n\n\n        # delete downloaded file\n        os.remove(fileName)\n\n\n\n        # defining old chrome driver location\n        oldPath = driver_loc + lastVersion\n        oldpathexists = os.path.exists(oldPath)\n\n        # this deletes the old folder with the older version of chromedriver in it (version 75, once 77 has been downloaded)\n        if(oldpathexists == True):\n            shutil.rmtree(oldPath, ignore_errors=True)\n\n\n\nexit()\n\n</code></pre>\n\n<p><a href=\"https://github.com/MattWaller/ChromeDriverAutoUpdate\" rel=\"nofollow noreferrer\">https://github.com/MattWaller/ChromeDriverAutoUpdate</a></p>\n"}],"owner":{"account_id":4165830,"reputation":170,"user_id":3441429,"accept_rate":29,"display_name":"Python_Novice"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4823,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":1,"score":5,"last_activity_date":1690322313,"creation_date":1527676102,"question_id":50602355,"body_markdown":"I have an Automation framework using Selenium and Python. For running Chrome browser I have placed chrome driver in one of the folders in my automation framework. Now the problem is chrome driver gets udpated after certain period of time and my script starts failing because of that and I need to place the updated chrome driver in the directory every time when it gets updated by Google. \r\n\r\nIs there any automated way I can implement to resolve this issue?","title":"Is there a way to automatically update chromedriver in my Test Automation Suite directory?","body":"<p>I have an Automation framework using Selenium and Python. For running Chrome browser I have placed chrome driver in one of the folders in my automation framework. Now the problem is chrome driver gets udpated after certain period of time and my script starts failing because of that and I need to place the updated chrome driver in the directory every time when it gets updated by Google. </p>\n\n<p>Is there any automated way I can implement to resolve this issue?</p>\n"},{"tags":["java","minecraft","minecraft-fabric"],"comments":[{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1690329002,"post_id":76766733,"comment_id":135337446,"body_markdown":"[This](https://github.com/AdvancedXRay/XRay-Fabric) is a pre-existing fabric X-Ray mod and it might provide some insight into how to do what you are trying","body":"<a href=\"https://github.com/AdvancedXRay/XRay-Fabric\" rel=\"nofollow noreferrer\">This</a> is a pre-existing fabric X-Ray mod and it might provide some insight into how to do what you are trying"}],"owner":{"account_id":20028073,"reputation":1,"user_id":21352370,"display_name":"Turtle"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":135,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690322237,"creation_date":1690321930,"question_id":76766733,"body_markdown":"How to draw an outline for a block using its coordinates? if its even possible using this code\r\nIn minecraft java fabric 1.20.1\r\n\r\n```java\r\npackage net.kaupenjoe.tutorialmod;\r\n\r\nimport net.fabricmc.api.ClientModInitializer;\r\nimport net.fabricmc.api.EnvType;\r\nimport net.fabricmc.api.Environment;\r\nimport net.fabricmc.fabric.api.client.event.lifecycle.v1.ClientTickEvents;\r\nimport net.fabricmc.fabric.api.client.keybinding.v1.KeyBindingHelper;\r\nimport net.minecraft.block.Block;\r\nimport net.minecraft.block.Blocks;\r\nimport net.minecraft.client.MinecraftClient;\r\nimport net.minecraft.client.network.ClientPlayerEntity;\r\nimport net.minecraft.client.option.KeyBinding;\r\nimport net.minecraft.text.Text;\r\nimport net.minecraft.util.math.BlockPos;\r\nimport net.minecraft.util.math.ChunkPos;\r\n\r\nimport org.lwjgl.glfw.GLFW;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\n@Environment(EnvType.CLIENT)\r\npublic class TutorialModClient implements ClientModInitializer {\r\n\r\n    private static KeyBinding keyBinding;\r\n    private static List&lt;Block&gt; blocksToCheck = new ArrayList&lt;&gt;();\r\n\r\n    static {\r\n        blocksToCheck.add(Blocks.DIAMOND_ORE);\r\n        blocksToCheck.add(Blocks.DEEPSLATE_DIAMOND_ORE);\r\n    }\r\n\r\n    @Override\r\n    public void onInitializeClient() {\r\n        keyBinding = KeyBindingHelper.registerKeyBinding(new KeyBinding(\r\n                &quot;xray i guess&quot;,\r\n                GLFW.GLFW_KEY_P,\r\n                &quot;key.categories.misc&quot;\r\n        ));\r\n\r\n        ClientTickEvents.START_CLIENT_TICK.register(client -&gt; {\r\n            if (keyBinding.isPressed()) {\r\n                listCertainBlocks();\r\n            }\r\n        });\r\n    }\r\n\r\n    private void listCertainBlocks() {\r\n        MinecraftClient minecraft = MinecraftClient.getInstance();\r\n        ClientPlayerEntity player = minecraft.player;\r\n        int playerChunkX = player.getBlockPos().getX() &gt;&gt; 4;\r\n        int playerChunkZ = player.getBlockPos().getZ() &gt;&gt; 4;\r\n\r\n        int chunkRadius = 2;\r\n        int bottomY = 0;\r\n        int topY = minecraft.world.getHeight();\r\n\r\n        System.out.println(&quot;Certain Blocks within &quot; + chunkRadius + &quot; chunks around the player, from bedrock to the top:&quot;);\r\n\r\n        for (int chunkX = playerChunkX - chunkRadius; chunkX &lt;= playerChunkX + chunkRadius; chunkX++) {\r\n            for (int chunkZ = playerChunkZ - chunkRadius; chunkZ &lt;= playerChunkZ + chunkRadius; chunkZ++) {\r\n                ChunkPos chunkPos = new ChunkPos(chunkX, chunkZ);\r\n\r\n                for (int y = bottomY; y &lt; topY; y++) {\r\n                    for (int x = 0; x &lt; 16; x++) {\r\n                        for (int z = 0; z &lt; 16; z++) {\r\n                            BlockPos pos = new BlockPos(chunkPos.getStartX() + x, y, chunkPos.getStartZ() + z);\r\n                            Block block = minecraft.world.getBlockState(pos).getBlock();\r\n\r\n                            if (blocksToCheck.contains(block)) {\r\n                                player.sendMessage(Text.of(&quot; - &quot; + block.getTranslationKey() + &quot; at (&quot; + pos.getX() + &quot;, &quot; + pos.getY() + &quot;, &quot; + pos.getZ() + &quot;)&quot;));\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n```\r\nI have this code to find blocks in a certain radius, in this code example diamond ore and deepslate diamond ore\r\n\r\nright now all it does is sends the blocks position to the chat\r\n\r\n\r\nI tried all sort of methods, using chatGBT but nothing worked\r\nAlso tried googling but couldnt find anything that worked","title":"How to draw an outline around a block using Fabric api mod","body":"<p>How to draw an outline for a block using its coordinates? if its even possible using this code\nIn minecraft java fabric 1.20.1</p>\n<pre class=\"lang-java prettyprint-override\"><code>package net.kaupenjoe.tutorialmod;\n\nimport net.fabricmc.api.ClientModInitializer;\nimport net.fabricmc.api.EnvType;\nimport net.fabricmc.api.Environment;\nimport net.fabricmc.fabric.api.client.event.lifecycle.v1.ClientTickEvents;\nimport net.fabricmc.fabric.api.client.keybinding.v1.KeyBindingHelper;\nimport net.minecraft.block.Block;\nimport net.minecraft.block.Blocks;\nimport net.minecraft.client.MinecraftClient;\nimport net.minecraft.client.network.ClientPlayerEntity;\nimport net.minecraft.client.option.KeyBinding;\nimport net.minecraft.text.Text;\nimport net.minecraft.util.math.BlockPos;\nimport net.minecraft.util.math.ChunkPos;\n\nimport org.lwjgl.glfw.GLFW;\n\nimport java.util.ArrayList;\nimport java.util.List;\n\n@Environment(EnvType.CLIENT)\npublic class TutorialModClient implements ClientModInitializer {\n\n    private static KeyBinding keyBinding;\n    private static List&lt;Block&gt; blocksToCheck = new ArrayList&lt;&gt;();\n\n    static {\n        blocksToCheck.add(Blocks.DIAMOND_ORE);\n        blocksToCheck.add(Blocks.DEEPSLATE_DIAMOND_ORE);\n    }\n\n    @Override\n    public void onInitializeClient() {\n        keyBinding = KeyBindingHelper.registerKeyBinding(new KeyBinding(\n                &quot;xray i guess&quot;,\n                GLFW.GLFW_KEY_P,\n                &quot;key.categories.misc&quot;\n        ));\n\n        ClientTickEvents.START_CLIENT_TICK.register(client -&gt; {\n            if (keyBinding.isPressed()) {\n                listCertainBlocks();\n            }\n        });\n    }\n\n    private void listCertainBlocks() {\n        MinecraftClient minecraft = MinecraftClient.getInstance();\n        ClientPlayerEntity player = minecraft.player;\n        int playerChunkX = player.getBlockPos().getX() &gt;&gt; 4;\n        int playerChunkZ = player.getBlockPos().getZ() &gt;&gt; 4;\n\n        int chunkRadius = 2;\n        int bottomY = 0;\n        int topY = minecraft.world.getHeight();\n\n        System.out.println(&quot;Certain Blocks within &quot; + chunkRadius + &quot; chunks around the player, from bedrock to the top:&quot;);\n\n        for (int chunkX = playerChunkX - chunkRadius; chunkX &lt;= playerChunkX + chunkRadius; chunkX++) {\n            for (int chunkZ = playerChunkZ - chunkRadius; chunkZ &lt;= playerChunkZ + chunkRadius; chunkZ++) {\n                ChunkPos chunkPos = new ChunkPos(chunkX, chunkZ);\n\n                for (int y = bottomY; y &lt; topY; y++) {\n                    for (int x = 0; x &lt; 16; x++) {\n                        for (int z = 0; z &lt; 16; z++) {\n                            BlockPos pos = new BlockPos(chunkPos.getStartX() + x, y, chunkPos.getStartZ() + z);\n                            Block block = minecraft.world.getBlockState(pos).getBlock();\n\n                            if (blocksToCheck.contains(block)) {\n                                player.sendMessage(Text.of(&quot; - &quot; + block.getTranslationKey() + &quot; at (&quot; + pos.getX() + &quot;, &quot; + pos.getY() + &quot;, &quot; + pos.getZ() + &quot;)&quot;));\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    }\n}\n</code></pre>\n<p>I have this code to find blocks in a certain radius, in this code example diamond ore and deepslate diamond ore</p>\n<p>right now all it does is sends the blocks position to the chat</p>\n<p>I tried all sort of methods, using chatGBT but nothing worked\nAlso tried googling but couldnt find anything that worked</p>\n"},{"tags":["java","json","spring","jackson","deserialization"],"owner":{"account_id":450931,"reputation":1641,"user_id":846535,"accept_rate":33,"display_name":"marcellorvalle"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":11,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690322132,"creation_date":1690320210,"question_id":76766593,"body_markdown":"I have a custom Money class and a deserializer for it:\r\n\r\n    public class MoneyDeserializerNullable extends JsonDeserializer&lt;Money&gt; {\r\n        public Money deserialize(JsonParser p, DeserializationContext ctxt) throws IOException {\r\n            return Money.from(p.getValueAsString());\r\n        }\r\n    \r\n        public Money getNullValue(DeserializationContext ctxt) {\r\n            return Money.NULL;\r\n        }\r\n    }\r\n\r\nI have an input body DTO like that:\r\n\r\n    @JsonInclude\r\n    public class TaxesDTO {\r\n    \r\n        @JsonDeserialize(using = MoneyDeserializerNullable.class)\r\n        private Money value1;\r\n\r\n        @JsonDeserialize(using = MoneyDeserializerNullable.class)\r\n        private Money value2;\r\n\r\n        //getters and setters    \r\n    }\r\n\r\nMy REST endpoint is something like that:\r\n\r\n     @PostMapping(&quot;/taxes&quot;)\r\n     public void postTaxes(@RequestBody @Valid taxesDTO body) {\r\n        // do something with the body\r\n     }\r\n\r\nIf the client post something like this:\r\n\r\n    {\r\n       &quot;value1&quot;: null\r\n    }\r\n\r\nThe body will have value1 = *Money.NULL* but value2 will be *null*. I have no custom ObjectMapper.\r\n\r\nIn this scenario, how can I make *value2* to be converted?\r\n\r\nPS.: I know I can change the getter methods to achieve that but I would like to delegate it to jackson. ","title":"How to consider not informed JSON fields using Jackson JsonDeserializer::getNullValue?","body":"<p>I have a custom Money class and a deserializer for it:</p>\n<pre><code>public class MoneyDeserializerNullable extends JsonDeserializer&lt;Money&gt; {\n    public Money deserialize(JsonParser p, DeserializationContext ctxt) throws IOException {\n        return Money.from(p.getValueAsString());\n    }\n\n    public Money getNullValue(DeserializationContext ctxt) {\n        return Money.NULL;\n    }\n}\n</code></pre>\n<p>I have an input body DTO like that:</p>\n<pre><code>@JsonInclude\npublic class TaxesDTO {\n\n    @JsonDeserialize(using = MoneyDeserializerNullable.class)\n    private Money value1;\n\n    @JsonDeserialize(using = MoneyDeserializerNullable.class)\n    private Money value2;\n\n    //getters and setters    \n}\n</code></pre>\n<p>My REST endpoint is something like that:</p>\n<pre><code> @PostMapping(&quot;/taxes&quot;)\n public void postTaxes(@RequestBody @Valid taxesDTO body) {\n    // do something with the body\n }\n</code></pre>\n<p>If the client post something like this:</p>\n<pre><code>{\n   &quot;value1&quot;: null\n}\n</code></pre>\n<p>The body will have value1 = <em>Money.NULL</em> but value2 will be <em>null</em>. I have no custom ObjectMapper.</p>\n<p>In this scenario, how can I make <em>value2</em> to be converted?</p>\n<p>PS.: I know I can change the getter methods to achieve that but I would like to delegate it to jackson.</p>\n"},{"tags":["java","java-stream"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":3,"creation_date":1690321895,"post_id":76766685,"comment_id":135336716,"body_markdown":"Wouldn&#39;t it be easier if your `Map` were the right way around?","body":"Wouldn&#39;t it be easier if your <code>Map</code> were the right way around?"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":1,"creation_date":1690322362,"post_id":76766685,"comment_id":135336786,"body_markdown":"If you get it the right way around, it&#39;s as simple as `list.stream().map(altName -&gt; myMap.getOrDefault(altName, altName)).forEach(System.out::println);`","body":"If you get it the right way around, it&#39;s as simple as <code>list.stream().map(altName -&gt; myMap.getOrDefault(altName, altName)).forEach(System.out::println);</code>"}],"answers":[{"comments":[{"owner":{"account_id":7788252,"reputation":37,"user_id":5892233,"display_name":"AAPJ"},"score":0,"creation_date":1690323698,"post_id":76766738,"comment_id":135336919,"body_markdown":"Thank you, first solution worked for me, also changing as getRealName method :)","body":"Thank you, first solution worked for me, also changing as getRealName method :)"}],"tags":[],"owner":{"account_id":5168089,"reputation":26701,"user_id":4137489,"accept_rate":100,"display_name":"marstran"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1690322011,"creation_date":1690322011,"answer_id":76766738,"question_id":76766685,"body_markdown":"Just put the result of `getRealName` in a variable before doing the logic:\r\n\r\n```java\r\nList&lt;String&gt; result = list.stream()\r\n    .map(altName -&gt; {\r\n        var realName = getRealName(altName);\r\n        return realName != null ? realName : altName;\r\n    })\r\n    .collect(Collectors.toList());\r\n```\r\n\r\nIf `getRealName` instead returned an `Optional&lt;String&gt;`, then you could use the `.orElse` method on it:\r\n\r\n```java\r\nList&lt;String&gt; result = list.stream()\r\n    .map(altName -&gt; getRealName(altName).orElse(altName)))\r\n    .collect(Collectors.toList());\r\n```\r\n\r\nBy the way, it looks like you should turn your `Map` around (swap keys and values), because you are only querying it by the value. Maps are much more efficient and ergonomic if you query them by the key. Your `getRealName`-method would just be `map.get(altname)`.","title":"Java stream based on condition create list","body":"<p>Just put the result of <code>getRealName</code> in a variable before doing the logic:</p>\n<pre class=\"lang-java prettyprint-override\"><code>List&lt;String&gt; result = list.stream()\n    .map(altName -&gt; {\n        var realName = getRealName(altName);\n        return realName != null ? realName : altName;\n    })\n    .collect(Collectors.toList());\n</code></pre>\n<p>If <code>getRealName</code> instead returned an <code>Optional&lt;String&gt;</code>, then you could use the <code>.orElse</code> method on it:</p>\n<pre class=\"lang-java prettyprint-override\"><code>List&lt;String&gt; result = list.stream()\n    .map(altName -&gt; getRealName(altName).orElse(altName)))\n    .collect(Collectors.toList());\n</code></pre>\n<p>By the way, it looks like you should turn your <code>Map</code> around (swap keys and values), because you are only querying it by the value. Maps are much more efficient and ergonomic if you query them by the key. Your <code>getRealName</code>-method would just be <code>map.get(altname)</code>.</p>\n"}],"owner":{"account_id":7788252,"reputation":37,"user_id":5892233,"display_name":"AAPJ"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":52,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76766738,"answer_count":1,"score":0,"last_activity_date":1690322011,"creation_date":1690321250,"question_id":76766685,"body_markdown":"Below code returns [Test11, Test33, Test44]. But I want is [Test11, Test2, Test33, Test44]. i.e When realName exists use it, else use the altName.\r\n\r\nThe line which i commented out is giving correct result. But getRealName method is being called twice.\r\nIs there any way to use the stream() to get the desired output that i want without calling the method twice? Please help.\r\n\r\n```\r\npublic class Main {\r\n    private static HashMap&lt;String, String&gt; myMap = new HashMap&lt;&gt;();\r\n    public static void main(String[] args) {\r\n        myMap.put(&quot;Test11&quot;, &quot;Test1&quot;);\r\n        myMap.put(&quot;Test33&quot;, &quot;Test3&quot;);\r\n        myMap.put(&quot;Test44&quot;, &quot;Test4&quot;);\r\n\r\n        List&lt;String&gt; list = new ArrayList&lt;String&gt;();\r\n        list.add(&quot;Test1&quot;);\r\n        list.add(&quot;Test2&quot;);\r\n        list.add(&quot;Test3&quot;);\r\n        list.add(&quot;Test4&quot;);\r\n\r\n\r\n        List&lt;String&gt; result = list.stream().map(altName -&gt; getRealName(altName)).\r\n                filter(realName -&gt;  Objects.nonNull(realName)).collect(Collectors.toList());\r\n\r\n       /* List&lt;String&gt; result = list.stream()\r\n                .map(altName -&gt; getRealName(altName)!=null?getRealName(altName):altName)\r\n                .collect(Collectors.toList());*/\r\n\r\n        System.out.println(result);\r\n\r\n    }\r\n\r\n    private static String getRealName(String item) {\r\n        for (Map.Entry&lt;String, String&gt; entry : myMap.entrySet()) {\r\n            if (entry.getValue().equals(item)) {\r\n                return entry.getKey();\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n}\r\n\r\n```","title":"Java stream based on condition create list","body":"<p>Below code returns [Test11, Test33, Test44]. But I want is [Test11, Test2, Test33, Test44]. i.e When realName exists use it, else use the altName.</p>\n<p>The line which i commented out is giving correct result. But getRealName method is being called twice.\nIs there any way to use the stream() to get the desired output that i want without calling the method twice? Please help.</p>\n<pre><code>public class Main {\n    private static HashMap&lt;String, String&gt; myMap = new HashMap&lt;&gt;();\n    public static void main(String[] args) {\n        myMap.put(&quot;Test11&quot;, &quot;Test1&quot;);\n        myMap.put(&quot;Test33&quot;, &quot;Test3&quot;);\n        myMap.put(&quot;Test44&quot;, &quot;Test4&quot;);\n\n        List&lt;String&gt; list = new ArrayList&lt;String&gt;();\n        list.add(&quot;Test1&quot;);\n        list.add(&quot;Test2&quot;);\n        list.add(&quot;Test3&quot;);\n        list.add(&quot;Test4&quot;);\n\n\n        List&lt;String&gt; result = list.stream().map(altName -&gt; getRealName(altName)).\n                filter(realName -&gt;  Objects.nonNull(realName)).collect(Collectors.toList());\n\n       /* List&lt;String&gt; result = list.stream()\n                .map(altName -&gt; getRealName(altName)!=null?getRealName(altName):altName)\n                .collect(Collectors.toList());*/\n\n        System.out.println(result);\n\n    }\n\n    private static String getRealName(String item) {\n        for (Map.Entry&lt;String, String&gt; entry : myMap.entrySet()) {\n            if (entry.getValue().equals(item)) {\n                return entry.getKey();\n            }\n        }\n        return null;\n    }\n}\n\n</code></pre>\n"},{"tags":["java","spring-boot","kubernetes","hazelcast"],"comments":[{"owner":{"account_id":21395683,"reputation":1553,"user_id":15758781,"display_name":"Lunatic"},"score":0,"creation_date":1690289327,"post_id":76762462,"comment_id":135330028,"body_markdown":"Welcome to SO, please check the provided answers and accept them if they address the solution otherwise feel free to leave comment.","body":"Welcome to SO, please check the provided answers and accept them if they address the solution otherwise feel free to leave comment."},{"owner":{"account_id":29087554,"reputation":11,"user_id":22282162,"display_name":"Prateek Goel"},"score":0,"creation_date":1690297000,"post_id":76762462,"comment_id":135331963,"body_markdown":"@Lunatic Edited the above question for the updated logs with Default Kubernetes Config. Also , can u tell me u need to view the deployment config or service config ? –","body":"@Lunatic Edited the above question for the updated logs with Default Kubernetes Config. Also , can u tell me u need to view the deployment config or service config ? –"}],"answers":[{"comments":[{"owner":{"account_id":29087554,"reputation":11,"user_id":22282162,"display_name":"Prateek Goel"},"score":0,"creation_date":1690291176,"post_id":76762848,"comment_id":135330488,"body_markdown":"Hi, Thanks for quick response . \n1. I have tried scaling down all pods and scaling them back again . The issue Still persists .\n2. ServiceName and Namespace are correctly Set .\n3. What should I check in Kubernetes Config File ?","body":"Hi, Thanks for quick response .  1. I have tried scaling down all pods and scaling them back again . The issue Still persists . 2. ServiceName and Namespace are correctly Set . 3. What should I check in Kubernetes Config File ?"},{"owner":{"account_id":21395683,"reputation":1553,"user_id":15758781,"display_name":"Lunatic"},"score":0,"creation_date":1690291287,"post_id":76762848,"comment_id":135330525,"body_markdown":"@PrateekGoel i guess i may need more details then, leave an other question with you configuration properties, specifically the modified options from defaults.","body":"@PrateekGoel i guess i may need more details then, leave an other question with you configuration properties, specifically the modified options from defaults."},{"owner":{"account_id":29087554,"reputation":11,"user_id":22282162,"display_name":"Prateek Goel"},"score":0,"creation_date":1690291931,"post_id":76762848,"comment_id":135330695,"body_markdown":"Edited the above question for the updated logs with Default Kubernetes Config. Also , can u tell me u need to view the deployment config or service config ?","body":"Edited the above question for the updated logs with Default Kubernetes Config. Also , can u tell me u need to view the deployment config or service config ?"}],"tags":[],"owner":{"account_id":21395683,"reputation":1553,"user_id":15758781,"display_name":"Lunatic"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690289163,"creation_date":1690289163,"answer_id":76762848,"question_id":76762462,"body_markdown":"Let imagine you don&#39;t have network connectivity problem, so as warning suggests, Hazelcast [client][1] failed to connect to the Kubernetes master API server which can cause from  misconfiguration of Hazelcast client or the Kubernetes cluster.\r\nHere are some work arounds,\r\n\r\n - Try restarting the Hazelcast client and the Kubernetes API server pod `kubectl delete pod &#39;the-pod-name&#39; -n &#39;the-namespace&#39;` which cause a brief interruption in service while the new pod is being created and started. However if you have multiple replicas of the API server pod running, you can use a rolling update strategy to update the pods.(This is mostly happens in my experience)\r\n - Make sure that `ServiceName` and `Namespace` properties are set correctly within Hazelcast client configuration .\r\n - Check the Kubernetes configuration file or possible network connectivity issues.\r\n\r\n\r\n  [1]: https://github.com/hazelcast/hazelcast-kubernetes/blob/master/src/main/java/com/hazelcast/kubernetes/RetryUtils.java","title":"Hazelcast Cluster Not able to Connect to Kubernetes Master","body":"<p>Let imagine you don't have network connectivity problem, so as warning suggests, Hazelcast <a href=\"https://github.com/hazelcast/hazelcast-kubernetes/blob/master/src/main/java/com/hazelcast/kubernetes/RetryUtils.java\" rel=\"nofollow noreferrer\">client</a> failed to connect to the Kubernetes master API server which can cause from  misconfiguration of Hazelcast client or the Kubernetes cluster.\nHere are some work arounds,</p>\n<ul>\n<li>Try restarting the Hazelcast client and the Kubernetes API server pod <code>kubectl delete pod 'the-pod-name' -n 'the-namespace'</code> which cause a brief interruption in service while the new pod is being created and started. However if you have multiple replicas of the API server pod running, you can use a rolling update strategy to update the pods.(This is mostly happens in my experience)</li>\n<li>Make sure that <code>ServiceName</code> and <code>Namespace</code> properties are set correctly within Hazelcast client configuration .</li>\n<li>Check the Kubernetes configuration file or possible network connectivity issues.</li>\n</ul>\n"}],"owner":{"account_id":29087554,"reputation":11,"user_id":22282162,"display_name":"Prateek Goel"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":289,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1690321208,"creation_date":1690286171,"question_id":76762462,"body_markdown":"I have redeployed one of my already working application after AKS upgrade .\r\nNow my pods are not able to communicate amongst each other saying that could not connect to Kubernetes Master . I have tried externalising port 5701 in my service and deployment .\r\nWhat could be the possible cause for this ?\r\n\r\n```2023-07-25 11:40:15.654 | forecast-management-service | main | ERROR | c.w.p.m.i.a.registry.MetricRegistryImpl  |  | MTR-0029: Double registration of metric group named &quot;Default&quot;.\r\n2023-07-25 11:40:15.703 | forecast-management-service | main | ERROR | w.p.i.c.IAMCCMControlsConfigBaseListener |  | Unable to find SCM configuration for IAMEnvControlsConfig, default value for properties will be used and no property will be read from CCM\r\n2023-07-25 11:40:23.593 | forecast-management-service | main | INFO  | com.hazelcast.instance.AddressPicker     |  | [LOCAL] [dev] [3.11.2] Prefer IPv4 stack is true, prefer IPv6 addresses is false\r\n2023-07-25 11:40:23.601 | forecast-management-service | main | INFO  | com.hazelcast.instance.AddressPicker     |  | [LOCAL] [dev] [3.11.2] Picked [10.112.5.51]:5701, using socket ServerSocket[addr=/0:0:0:0:0:0:0:0,localport=5701], bind any local is true\r\n2023-07-25 11:40:23.642 | forecast-management-service | main | INFO  | com.hazelcast.system                     |  | [10.112.5.51]:5701 [dev] [3.11.2] Hazelcast 3.11.2 (20190216 - e302506) starting at [10.112.5.51]:5701\r\n2023-07-25 11:40:23.643 | forecast-management-service | main | INFO  | com.hazelcast.system                     |  | [10.112.5.51]:5701 [dev] [3.11.2] Copyright (c) 2008-2019, Hazelcast, Inc. All Rights Reserved.\r\n2023-07-25 11:40:23.643 | forecast-management-service | main | INFO  | com.hazelcast.instance.Node              |  | [10.112.5.51]:5701 [dev] [3.11.2] A non-empty group password is configured for the Hazelcast member. Starting with Hazelcast version 3.8.2, members with the same group name, but with different group passwords (that do not use authentication) form a cluster. The group password configuration will be removed completely in a future release.\r\n2023-07-25 11:40:24.218 | forecast-management-service | main | INFO  | c.h.s.i.o.impl.BackpressureRegulator     |  | [10.112.5.51]:5701 [dev] [3.11.2] Backpressure is disabled\r\n2023-07-25 11:40:25.203 | forecast-management-service | main | INFO  | c.h.s.d.integration.DiscoveryService     |  | [10.112.5.51]:5701 [dev] [3.11.2] Kubernetes Discovery properties: { service-dns: null, service-dns-timeout: 5, service-name: forecast-mgmt, service-port: 5701, service-label: null, service-label-value: true, namespace: qa-forecast-mgmt, resolve-not-ready-addresses: false, kubernetes-master: https://kubernetes.default.svc}\r\n2023-07-25 11:40:25.210 | forecast-management-service | main | INFO  | c.h.s.d.integration.DiscoveryService     |  | [10.112.5.51]:5701 [dev] [3.11.2] Kubernetes Discovery activated resolver: KubernetesApiEndpointResolver\r\n2023-07-25 11:40:25.341 | forecast-management-service | main | INFO  | com.hazelcast.instance.Node              |  | [10.112.5.51]:5701 [dev] [3.11.2] Activating Discovery SPI Joiner\r\n2023-07-25 11:40:25.693 | forecast-management-service | main | INFO  | c.h.s.i.o.impl.OperationExecutorImpl     |  | [10.112.5.51]:5701 [dev] [3.11.2] Starting 7 partition threads and 4 generic threads (1 dedicated for priority tasks)\r\n2023-07-25 11:40:25.703 | forecast-management-service | main | INFO  | c.h.internal.diagnostics.Diagnostics     |  | [10.112.5.51]:5701 [dev] [3.11.2] Diagnostics started\r\n2023-07-25 11:40:25.704 | forecast-management-service | main | INFO  | c.h.internal.diagnostics.BuildInfoPlugin |  | [10.112.5.51]:5701 [dev] [3.11.2] Plugin:active\r\n2023-07-25 11:40:25.704 | forecast-management-service | main | INFO  | c.h.i.diagnostics.SystemPropertiesPlugin |  | [10.112.5.51]:5701 [dev] [3.11.2] Plugin:active\r\n2023-07-25 11:40:25.705 | forecast-management-service | main | INFO  | c.h.i.diagnostics.ConfigPropertiesPlugin |  | [10.112.5.51]:5701 [dev] [3.11.2] Plugin:active\r\n2023-07-25 11:40:25.709 | forecast-management-service | main | INFO  | c.h.internal.diagnostics.MetricsPlugin   |  | [10.112.5.51]:5701 [dev] [3.11.2] Plugin:active, period-millis:60000\r\n2023-07-25 11:40:25.711 | forecast-management-service | main | INFO  | c.h.i.diagnostics.SlowOperationPlugin    |  | [10.112.5.51]:5701 [dev] [3.11.2] Plugin:active, period-millis:60000\r\n2023-07-25 11:40:25.712 | forecast-management-service | main | INFO  | .h.i.d.MemberHazelcastInstanceInfoPlugin |  | [10.112.5.51]:5701 [dev] [3.11.2] Plugin:active, period-millis:60000\r\n2023-07-25 11:40:25.713 | forecast-management-service | main | INFO  | c.h.internal.diagnostics.SystemLogPlugin |  | [10.112.5.51]:5701 [dev] [3.11.2] Plugin:active: logPartitions:false\r\n2023-07-25 11:40:25.718 | forecast-management-service | main | INFO  | .h.i.d.MemberHazelcastInstanceInfoPlugin |  | [10.112.5.51]:5701 [dev] [3.11.2] Plugin:active, period-millis:10000\r\n2023-07-25 11:40:25.718 | forecast-management-service | main | INFO  | c.h.i.d.OperationHeartbeatPlugin         |  | [10.112.5.51]:5701 [dev] [3.11.2] Plugin:active: period-millis:10000 max-deviation:33%\r\n2023-07-25 11:40:25.722 | forecast-management-service | main | INFO  | com.hazelcast.core.LifecycleService      |  | [10.112.5.51]:5701 [dev] [3.11.2] [10.112.5.51]:5701 is STARTING\r\n2023-07-25 11:40:25.756 | forecast-management-service | main | WARN  | com.hazelcast.kubernetes.RetryUtils      |  | Couldn&#39;t connect to the Kubernetes master, [1] retrying in 1 seconds...\r\n2023-07-25 11:40:27.262 | forecast-management-service | main | WARN  | com.hazelcast.kubernetes.RetryUtils      |  | Couldn&#39;t connect to the Kubernetes master, [2] retrying in 2 seconds...\r\n2023-07-25 11:40:29.519 | forecast-management-service | main | WARN  | com.hazelcast.kubernetes.RetryUtils      |  | Couldn&#39;t connect to the Kubernetes master, [3] retrying in 3 seconds...\r\n2023-07-25 11:40:32.899 | forecast-management-service | main | WARN  | com.hazelcast.kubernetes.RetryUtils      |  | Couldn&#39;t connect to the Kubernetes master, [4] retrying in 5 seconds...\r\n2023-07-25 11:40:32.995 | forecast-management-service | hz.jobEngine-hazelcast-kubernetes.IO.thread-in-0 | INFO  | com.hazelcast.nio.tcp.TcpIpConnection    |  | [10.112.5.51]:5701 [dev] [3.11.2] Connection[id=1, /10.112.5.51:5701-&gt;/10.112.4.237:44935, endpoint=null, alive=false, type=NONE] closed. Reason: Connection closed by the other side\r\n2023-07-25 11:40:37.967 | forecast-management-service | main | WARN  | com.hazelcast.kubernetes.RetryUtils      |  | Couldn&#39;t connect to the Kubernetes master, [5] retrying in 7 seconds...\r\n2023-07-25 11:40:43.236 | forecast-management-service | hz.jobEngine-hazelcast-kubernetes.IO.thread-in-1 | INFO  | com.hazelcast.nio.tcp.TcpIpConnection    |  | [10.112.5.51]:5701 [dev] [3.11.2] Connection[id=2, /10.112.5.51:5701-&gt;/10.112.4.208:32261, endpoint=null, alive=false, type=NONE] closed. Reason: Connection closed by the other side\r\n```\r\n\r\n**EDIT 1:**\r\n\r\nAfter removing the port Externalising tag , The Logs for default Kubernetes Behaviour is added below. It says some WARNING related to Zone Aware . \r\nRecently we had changed the Git Repo of the Project but ```ServiceName``` and ```Namespace``` are correctly mapped .\r\n\r\n```2023-07-25 13:20:43.215 | forecast-management-service | main | INFO  | c.h.s.i.o.impl.BackpressureRegulator     |  | [10.112.5.131]:5701 [dev] [3.11.2] Backpressure is disabled\r\n2023-07-25 13:20:44.153 | forecast-management-service | main | INFO  | c.h.s.d.integration.DiscoveryService     |  | [10.112.5.131]:5701 [dev] [3.11.2] Kubernetes Discovery properties: { service-dns: null, service-dns-timeout: 5, service-name: forecast-mgmt, service-port: 5701, service-label: null, service-label-value: true, namespace: qa-forecast-mgmt, resolve-not-ready-addresses: false, kubernetes-master: https://kubernetes.default.svc}\r\n2023-07-25 13:20:44.160 | forecast-management-service | main | INFO  | c.h.s.d.integration.DiscoveryService     |  | [10.112.5.131]:5701 [dev] [3.11.2] Kubernetes Discovery activated resolver: KubernetesApiEndpointResolver\r\n2023-07-25 13:20:44.281 | forecast-management-service | main | INFO  | com.hazelcast.instance.Node              |  | [10.112.5.131]:5701 [dev] [3.11.2] Activating Discovery SPI Joiner\r\n2023-07-25 13:20:44.618 | forecast-management-service | main | INFO  | c.h.s.i.o.impl.OperationExecutorImpl     |  | [10.112.5.131]:5701 [dev] [3.11.2] Starting 7 partition threads and 4 generic threads (1 dedicated for priority tasks)\r\n2023-07-25 13:20:44.629 | forecast-management-service | main | INFO  | c.h.internal.diagnostics.Diagnostics     |  | [10.112.5.131]:5701 [dev] [3.11.2] Diagnostics started\r\n2023-07-25 13:20:44.630 | forecast-management-service | main | INFO  | c.h.internal.diagnostics.BuildInfoPlugin |  | [10.112.5.131]:5701 [dev] [3.11.2] Plugin:active\r\n2023-07-25 13:20:44.631 | forecast-management-service | main | INFO  | c.h.i.diagnostics.SystemPropertiesPlugin |  | [10.112.5.131]:5701 [dev] [3.11.2] Plugin:active\r\n2023-07-25 13:20:44.631 | forecast-management-service | main | INFO  | c.h.i.diagnostics.ConfigPropertiesPlugin |  | [10.112.5.131]:5701 [dev] [3.11.2] Plugin:active\r\n2023-07-25 13:20:44.634 | forecast-management-service | main | INFO  | c.h.internal.diagnostics.MetricsPlugin   |  | [10.112.5.131]:5701 [dev] [3.11.2] Plugin:active, period-millis:60000\r\n2023-07-25 13:20:44.636 | forecast-management-service | main | INFO  | c.h.i.diagnostics.SlowOperationPlugin    |  | [10.112.5.131]:5701 [dev] [3.11.2] Plugin:active, period-millis:60000\r\n2023-07-25 13:20:44.636 | forecast-management-service | main | INFO  | .h.i.d.MemberHazelcastInstanceInfoPlugin |  | [10.112.5.131]:5701 [dev] [3.11.2] Plugin:active, period-millis:60000\r\n2023-07-25 13:20:44.638 | forecast-management-service | main | INFO  | c.h.internal.diagnostics.SystemLogPlugin |  | [10.112.5.131]:5701 [dev] [3.11.2] Plugin:active: logPartitions:false\r\n2023-07-25 13:20:44.643 | forecast-management-service | main | INFO  | .h.i.d.MemberHazelcastInstanceInfoPlugin |  | [10.112.5.131]:5701 [dev] [3.11.2] Plugin:active, period-millis:10000\r\n2023-07-25 13:20:44.643 | forecast-management-service | main | INFO  | c.h.i.d.OperationHeartbeatPlugin         |  | [10.112.5.131]:5701 [dev] [3.11.2] Plugin:active: period-millis:10000 max-deviation:33%\r\n2023-07-25 13:20:44.646 | forecast-management-service | main | INFO  | com.hazelcast.core.LifecycleService      |  | [10.112.5.131]:5701 [dev] [3.11.2] [10.112.5.131]:5701 is STARTING\r\n2023-07-25 13:20:44.679 | forecast-management-service | main | WARN  | com.hazelcast.kubernetes.RetryUtils      |  | Couldn&#39;t connect to the Kubernetes master, [1] retrying in 1 seconds...\r\n2023-07-25 13:20:46.184 | forecast-management-service | main | WARN  | com.hazelcast.kubernetes.RetryUtils      |  | Couldn&#39;t connect to the Kubernetes master, [2] retrying in 2 seconds...\r\n2023-07-25 13:20:48.443 | forecast-management-service | main | WARN  | com.hazelcast.kubernetes.RetryUtils      |  | Couldn&#39;t connect to the Kubernetes master, [3] retrying in 3 seconds...\r\n2023-07-25 13:20:51.823 | forecast-management-service | main | WARN  | com.hazelcast.kubernetes.RetryUtils      |  | Couldn&#39;t connect to the Kubernetes master, [4] retrying in 5 seconds...\r\n2023-07-25 13:20:56.893 | forecast-management-service | main | WARN  | com.hazelcast.kubernetes.RetryUtils      |  | Couldn&#39;t connect to the Kubernetes master, [5] retrying in 7 seconds...\r\n2023-07-25 13:21:04.492 | forecast-management-service | main | WARN  | com.hazelcast.kubernetes.RetryUtils      |  | Couldn&#39;t connect to the Kubernetes master, [6] retrying in 11 seconds...\r\n2023-07-25 13:21:15.890 | forecast-management-service | main | WARN  | com.hazelcast.kubernetes.RetryUtils      |  | Couldn&#39;t connect to the Kubernetes master, [7] retrying in 17 seconds...\r\n2023-07-25 13:21:32.978 | forecast-management-service | main | WARN  | com.hazelcast.kubernetes.RetryUtils      |  | Couldn&#39;t connect to the Kubernetes master, [8] retrying in 25 seconds...\r\n2023-07-25 13:21:58.610 | forecast-management-service | main | WARN  | com.hazelcast.kubernetes.RetryUtils      |  | Couldn&#39;t connect to the Kubernetes master, [9] retrying in 38 seconds...\r\n2023-07-25 13:22:37.056 | forecast-management-service | main | WARN  | com.hazelcast.kubernetes.RetryUtils      |  | Couldn&#39;t connect to the Kubernetes master, [10] retrying in 57 seconds...\r\n2023-07-25 13:23:34.725 | forecast-management-service | main | WARN  | c.h.s.d.integration.DiscoveryService     |  | [10.112.5.131]:5701 [dev] [3.11.2] Cannot fetch the current zone, ZONE_AWARE feature is disabled\r\n2023-07-25 13:23:34.733 | forecast-management-service | main | WARN  | com.hazelcast.kubernetes.RetryUtils      |  | Couldn&#39;t connect to the Kubernetes master, [1] retrying in 1 seconds...```","title":"Hazelcast Cluster Not able to Connect to Kubernetes Master","body":"<p>I have redeployed one of my already working application after AKS upgrade .\nNow my pods are not able to communicate amongst each other saying that could not connect to Kubernetes Master . I have tried externalising port 5701 in my service and deployment .\nWhat could be the possible cause for this ?</p>\n<pre><code>2023-07-25 11:40:15.703 | forecast-management-service | main | ERROR | w.p.i.c.IAMCCMControlsConfigBaseListener |  | Unable to find SCM configuration for IAMEnvControlsConfig, default value for properties will be used and no property will be read from CCM\n2023-07-25 11:40:23.593 | forecast-management-service | main | INFO  | com.hazelcast.instance.AddressPicker     |  | [LOCAL] [dev] [3.11.2] Prefer IPv4 stack is true, prefer IPv6 addresses is false\n2023-07-25 11:40:23.601 | forecast-management-service | main | INFO  | com.hazelcast.instance.AddressPicker     |  | [LOCAL] [dev] [3.11.2] Picked [10.112.5.51]:5701, using socket ServerSocket[addr=/0:0:0:0:0:0:0:0,localport=5701], bind any local is true\n2023-07-25 11:40:23.642 | forecast-management-service | main | INFO  | com.hazelcast.system                     |  | [10.112.5.51]:5701 [dev] [3.11.2] Hazelcast 3.11.2 (20190216 - e302506) starting at [10.112.5.51]:5701\n2023-07-25 11:40:23.643 | forecast-management-service | main | INFO  | com.hazelcast.system                     |  | [10.112.5.51]:5701 [dev] [3.11.2] Copyright (c) 2008-2019, Hazelcast, Inc. All Rights Reserved.\n2023-07-25 11:40:23.643 | forecast-management-service | main | INFO  | com.hazelcast.instance.Node              |  | [10.112.5.51]:5701 [dev] [3.11.2] A non-empty group password is configured for the Hazelcast member. Starting with Hazelcast version 3.8.2, members with the same group name, but with different group passwords (that do not use authentication) form a cluster. The group password configuration will be removed completely in a future release.\n2023-07-25 11:40:24.218 | forecast-management-service | main | INFO  | c.h.s.i.o.impl.BackpressureRegulator     |  | [10.112.5.51]:5701 [dev] [3.11.2] Backpressure is disabled\n2023-07-25 11:40:25.203 | forecast-management-service | main | INFO  | c.h.s.d.integration.DiscoveryService     |  | [10.112.5.51]:5701 [dev] [3.11.2] Kubernetes Discovery properties: { service-dns: null, service-dns-timeout: 5, service-name: forecast-mgmt, service-port: 5701, service-label: null, service-label-value: true, namespace: qa-forecast-mgmt, resolve-not-ready-addresses: false, kubernetes-master: https://kubernetes.default.svc}\n2023-07-25 11:40:25.210 | forecast-management-service | main | INFO  | c.h.s.d.integration.DiscoveryService     |  | [10.112.5.51]:5701 [dev] [3.11.2] Kubernetes Discovery activated resolver: KubernetesApiEndpointResolver\n2023-07-25 11:40:25.341 | forecast-management-service | main | INFO  | com.hazelcast.instance.Node              |  | [10.112.5.51]:5701 [dev] [3.11.2] Activating Discovery SPI Joiner\n2023-07-25 11:40:25.693 | forecast-management-service | main | INFO  | c.h.s.i.o.impl.OperationExecutorImpl     |  | [10.112.5.51]:5701 [dev] [3.11.2] Starting 7 partition threads and 4 generic threads (1 dedicated for priority tasks)\n2023-07-25 11:40:25.703 | forecast-management-service | main | INFO  | c.h.internal.diagnostics.Diagnostics     |  | [10.112.5.51]:5701 [dev] [3.11.2] Diagnostics started\n2023-07-25 11:40:25.704 | forecast-management-service | main | INFO  | c.h.internal.diagnostics.BuildInfoPlugin |  | [10.112.5.51]:5701 [dev] [3.11.2] Plugin:active\n2023-07-25 11:40:25.704 | forecast-management-service | main | INFO  | c.h.i.diagnostics.SystemPropertiesPlugin |  | [10.112.5.51]:5701 [dev] [3.11.2] Plugin:active\n2023-07-25 11:40:25.705 | forecast-management-service | main | INFO  | c.h.i.diagnostics.ConfigPropertiesPlugin |  | [10.112.5.51]:5701 [dev] [3.11.2] Plugin:active\n2023-07-25 11:40:25.709 | forecast-management-service | main | INFO  | c.h.internal.diagnostics.MetricsPlugin   |  | [10.112.5.51]:5701 [dev] [3.11.2] Plugin:active, period-millis:60000\n2023-07-25 11:40:25.711 | forecast-management-service | main | INFO  | c.h.i.diagnostics.SlowOperationPlugin    |  | [10.112.5.51]:5701 [dev] [3.11.2] Plugin:active, period-millis:60000\n2023-07-25 11:40:25.712 | forecast-management-service | main | INFO  | .h.i.d.MemberHazelcastInstanceInfoPlugin |  | [10.112.5.51]:5701 [dev] [3.11.2] Plugin:active, period-millis:60000\n2023-07-25 11:40:25.713 | forecast-management-service | main | INFO  | c.h.internal.diagnostics.SystemLogPlugin |  | [10.112.5.51]:5701 [dev] [3.11.2] Plugin:active: logPartitions:false\n2023-07-25 11:40:25.718 | forecast-management-service | main | INFO  | .h.i.d.MemberHazelcastInstanceInfoPlugin |  | [10.112.5.51]:5701 [dev] [3.11.2] Plugin:active, period-millis:10000\n2023-07-25 11:40:25.718 | forecast-management-service | main | INFO  | c.h.i.d.OperationHeartbeatPlugin         |  | [10.112.5.51]:5701 [dev] [3.11.2] Plugin:active: period-millis:10000 max-deviation:33%\n2023-07-25 11:40:25.722 | forecast-management-service | main | INFO  | com.hazelcast.core.LifecycleService      |  | [10.112.5.51]:5701 [dev] [3.11.2] [10.112.5.51]:5701 is STARTING\n2023-07-25 11:40:25.756 | forecast-management-service | main | WARN  | com.hazelcast.kubernetes.RetryUtils      |  | Couldn't connect to the Kubernetes master, [1] retrying in 1 seconds...\n2023-07-25 11:40:27.262 | forecast-management-service | main | WARN  | com.hazelcast.kubernetes.RetryUtils      |  | Couldn't connect to the Kubernetes master, [2] retrying in 2 seconds...\n2023-07-25 11:40:29.519 | forecast-management-service | main | WARN  | com.hazelcast.kubernetes.RetryUtils      |  | Couldn't connect to the Kubernetes master, [3] retrying in 3 seconds...\n2023-07-25 11:40:32.899 | forecast-management-service | main | WARN  | com.hazelcast.kubernetes.RetryUtils      |  | Couldn't connect to the Kubernetes master, [4] retrying in 5 seconds...\n2023-07-25 11:40:32.995 | forecast-management-service | hz.jobEngine-hazelcast-kubernetes.IO.thread-in-0 | INFO  | com.hazelcast.nio.tcp.TcpIpConnection    |  | [10.112.5.51]:5701 [dev] [3.11.2] Connection[id=1, /10.112.5.51:5701-&gt;/10.112.4.237:44935, endpoint=null, alive=false, type=NONE] closed. Reason: Connection closed by the other side\n2023-07-25 11:40:37.967 | forecast-management-service | main | WARN  | com.hazelcast.kubernetes.RetryUtils      |  | Couldn't connect to the Kubernetes master, [5] retrying in 7 seconds...\n2023-07-25 11:40:43.236 | forecast-management-service | hz.jobEngine-hazelcast-kubernetes.IO.thread-in-1 | INFO  | com.hazelcast.nio.tcp.TcpIpConnection    |  | [10.112.5.51]:5701 [dev] [3.11.2] Connection[id=2, /10.112.5.51:5701-&gt;/10.112.4.208:32261, endpoint=null, alive=false, type=NONE] closed. Reason: Connection closed by the other side\n</code></pre>\n<p><strong>EDIT 1:</strong></p>\n<p>After removing the port Externalising tag , The Logs for default Kubernetes Behaviour is added below. It says some WARNING related to Zone Aware .\nRecently we had changed the Git Repo of the Project but <code>ServiceName</code> and <code>Namespace</code> are correctly mapped .</p>\n<pre><code>2023-07-25 13:20:44.153 | forecast-management-service | main | INFO  | c.h.s.d.integration.DiscoveryService     |  | [10.112.5.131]:5701 [dev] [3.11.2] Kubernetes Discovery properties: { service-dns: null, service-dns-timeout: 5, service-name: forecast-mgmt, service-port: 5701, service-label: null, service-label-value: true, namespace: qa-forecast-mgmt, resolve-not-ready-addresses: false, kubernetes-master: https://kubernetes.default.svc}\n2023-07-25 13:20:44.160 | forecast-management-service | main | INFO  | c.h.s.d.integration.DiscoveryService     |  | [10.112.5.131]:5701 [dev] [3.11.2] Kubernetes Discovery activated resolver: KubernetesApiEndpointResolver\n2023-07-25 13:20:44.281 | forecast-management-service | main | INFO  | com.hazelcast.instance.Node              |  | [10.112.5.131]:5701 [dev] [3.11.2] Activating Discovery SPI Joiner\n2023-07-25 13:20:44.618 | forecast-management-service | main | INFO  | c.h.s.i.o.impl.OperationExecutorImpl     |  | [10.112.5.131]:5701 [dev] [3.11.2] Starting 7 partition threads and 4 generic threads (1 dedicated for priority tasks)\n2023-07-25 13:20:44.629 | forecast-management-service | main | INFO  | c.h.internal.diagnostics.Diagnostics     |  | [10.112.5.131]:5701 [dev] [3.11.2] Diagnostics started\n2023-07-25 13:20:44.630 | forecast-management-service | main | INFO  | c.h.internal.diagnostics.BuildInfoPlugin |  | [10.112.5.131]:5701 [dev] [3.11.2] Plugin:active\n2023-07-25 13:20:44.631 | forecast-management-service | main | INFO  | c.h.i.diagnostics.SystemPropertiesPlugin |  | [10.112.5.131]:5701 [dev] [3.11.2] Plugin:active\n2023-07-25 13:20:44.631 | forecast-management-service | main | INFO  | c.h.i.diagnostics.ConfigPropertiesPlugin |  | [10.112.5.131]:5701 [dev] [3.11.2] Plugin:active\n2023-07-25 13:20:44.634 | forecast-management-service | main | INFO  | c.h.internal.diagnostics.MetricsPlugin   |  | [10.112.5.131]:5701 [dev] [3.11.2] Plugin:active, period-millis:60000\n2023-07-25 13:20:44.636 | forecast-management-service | main | INFO  | c.h.i.diagnostics.SlowOperationPlugin    |  | [10.112.5.131]:5701 [dev] [3.11.2] Plugin:active, period-millis:60000\n2023-07-25 13:20:44.636 | forecast-management-service | main | INFO  | .h.i.d.MemberHazelcastInstanceInfoPlugin |  | [10.112.5.131]:5701 [dev] [3.11.2] Plugin:active, period-millis:60000\n2023-07-25 13:20:44.638 | forecast-management-service | main | INFO  | c.h.internal.diagnostics.SystemLogPlugin |  | [10.112.5.131]:5701 [dev] [3.11.2] Plugin:active: logPartitions:false\n2023-07-25 13:20:44.643 | forecast-management-service | main | INFO  | .h.i.d.MemberHazelcastInstanceInfoPlugin |  | [10.112.5.131]:5701 [dev] [3.11.2] Plugin:active, period-millis:10000\n2023-07-25 13:20:44.643 | forecast-management-service | main | INFO  | c.h.i.d.OperationHeartbeatPlugin         |  | [10.112.5.131]:5701 [dev] [3.11.2] Plugin:active: period-millis:10000 max-deviation:33%\n2023-07-25 13:20:44.646 | forecast-management-service | main | INFO  | com.hazelcast.core.LifecycleService      |  | [10.112.5.131]:5701 [dev] [3.11.2] [10.112.5.131]:5701 is STARTING\n2023-07-25 13:20:44.679 | forecast-management-service | main | WARN  | com.hazelcast.kubernetes.RetryUtils      |  | Couldn't connect to the Kubernetes master, [1] retrying in 1 seconds...\n2023-07-25 13:20:46.184 | forecast-management-service | main | WARN  | com.hazelcast.kubernetes.RetryUtils      |  | Couldn't connect to the Kubernetes master, [2] retrying in 2 seconds...\n2023-07-25 13:20:48.443 | forecast-management-service | main | WARN  | com.hazelcast.kubernetes.RetryUtils      |  | Couldn't connect to the Kubernetes master, [3] retrying in 3 seconds...\n2023-07-25 13:20:51.823 | forecast-management-service | main | WARN  | com.hazelcast.kubernetes.RetryUtils      |  | Couldn't connect to the Kubernetes master, [4] retrying in 5 seconds...\n2023-07-25 13:20:56.893 | forecast-management-service | main | WARN  | com.hazelcast.kubernetes.RetryUtils      |  | Couldn't connect to the Kubernetes master, [5] retrying in 7 seconds...\n2023-07-25 13:21:04.492 | forecast-management-service | main | WARN  | com.hazelcast.kubernetes.RetryUtils      |  | Couldn't connect to the Kubernetes master, [6] retrying in 11 seconds...\n2023-07-25 13:21:15.890 | forecast-management-service | main | WARN  | com.hazelcast.kubernetes.RetryUtils      |  | Couldn't connect to the Kubernetes master, [7] retrying in 17 seconds...\n2023-07-25 13:21:32.978 | forecast-management-service | main | WARN  | com.hazelcast.kubernetes.RetryUtils      |  | Couldn't connect to the Kubernetes master, [8] retrying in 25 seconds...\n2023-07-25 13:21:58.610 | forecast-management-service | main | WARN  | com.hazelcast.kubernetes.RetryUtils      |  | Couldn't connect to the Kubernetes master, [9] retrying in 38 seconds...\n2023-07-25 13:22:37.056 | forecast-management-service | main | WARN  | com.hazelcast.kubernetes.RetryUtils      |  | Couldn't connect to the Kubernetes master, [10] retrying in 57 seconds...\n2023-07-25 13:23:34.725 | forecast-management-service | main | WARN  | c.h.s.d.integration.DiscoveryService     |  | [10.112.5.131]:5701 [dev] [3.11.2] Cannot fetch the current zone, ZONE_AWARE feature is disabled\n2023-07-25 13:23:34.733 | forecast-management-service | main | WARN  | com.hazelcast.kubernetes.RetryUtils      |  | Couldn't connect to the Kubernetes master, [1] retrying in 1 seconds...```\n</code></pre>\n"},{"tags":["java","unit-testing","gis"],"comments":[{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":0,"creation_date":1690338740,"post_id":76766600,"comment_id":135338183,"body_markdown":"Just use two fixed points, [45 S, 90 W] to [45 N, 90 E], Google says _15,882 km_.  _https://www.google.com/search?q=distance+from+45+S+90+W+to+45+N+90+E_","body":"Just use two fixed points, [45 S, 90 W] to [45 N, 90 E], Google says <i>15,882 km</i>.  <i><a href=\"https://www.google.com/search?q=distance+from+45+S+90+W+to+45+N+90+E\" rel=\"nofollow noreferrer\">google.com/search?q=distance+from+45+S+90+W+to+45+N+90+E</a></i>"},{"owner":{"account_id":4209265,"reputation":496,"user_id":4368869,"accept_rate":50,"display_name":"Robert S"},"score":0,"creation_date":1697736100,"post_id":76766600,"comment_id":136320455,"body_markdown":"@Relias, doesn&#39;t that beg the question of how Google knows their calculation is correct?","body":"@Relias, doesn&#39;t that beg the question of how Google knows their calculation is correct?"},{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":0,"creation_date":1697736544,"post_id":76766600,"comment_id":136320551,"body_markdown":"They&#39;re a part of a conglomerate, so through the use of _satellites_ and _[lidar](https://en.wikipedia.org/wiki/Lidar)_.  There is a newer type of _lidar_ also; the name escapes me.  And, their GPS is super accurate.  I trust it, the precision is about 50 meters, at the most.","body":"They&#39;re a part of a conglomerate, so through the use of <i>satellites</i> and <i><a href=\"https://en.wikipedia.org/wiki/Lidar\" rel=\"nofollow noreferrer\">lidar</a></i>.  There is a newer type of <i>lidar</i> also; the name escapes me.  And, their GPS is super accurate.  I trust it, the precision is about 50 meters, at the most."},{"owner":{"account_id":4209265,"reputation":496,"user_id":4368869,"accept_rate":50,"display_name":"Robert S"},"score":0,"creation_date":1697738488,"post_id":76766600,"comment_id":136320886,"body_markdown":"@Relias, very insightful!  I appreciate that.  I did, ultimately, use this technique as a means to approximate accuracy.","body":"@Relias, very insightful!  I appreciate that.  I did, ultimately, use this technique as a means to approximate accuracy."}],"owner":{"account_id":4209265,"reputation":496,"user_id":4368869,"accept_rate":50,"display_name":"Robert S"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1690320255,"creation_date":1690320255,"question_id":76766600,"body_markdown":"I am writing unit tests that test if my geodesic calculations are correct.\r\n\r\nIs there any absolute values I can input to test if my bearing and range calculations are correct.  In other words, is there a set of two coordinates that we *know* the distance between and the bearing from Point A to Point B?  \r\n\r\nI have not been able to find some kind of industry-standard values in my research.","title":"Are there any absolute values I can use for unit testing geodesic calculations?","body":"<p>I am writing unit tests that test if my geodesic calculations are correct.</p>\n<p>Is there any absolute values I can input to test if my bearing and range calculations are correct.  In other words, is there a set of two coordinates that we <em>know</em> the distance between and the bearing from Point A to Point B?</p>\n<p>I have not been able to find some kind of industry-standard values in my research.</p>\n"},{"tags":["java","selenium-webdriver","cucumber"],"owner":{"account_id":24894125,"reputation":27,"user_id":18765607,"display_name":"Jano Marek"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":9,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690320113,"creation_date":1690320113,"question_id":76766590,"body_markdown":"I have problem i need to have disabled images for first step in option like this.. it is in before tag:\r\n\r\n        options.addArguments(&quot;--blink-settings=imagesEnabled=false&quot;);\r\n\r\nIs it possible to enable it after first step is executed?\r\nI have cucumber java test framework.\r\nSomething like adding to step def.\r\n\r\n        options.addArguments(&quot;--blink-settings=imagesEnabled=true&quot;);\r\n\r\nThanks for every advice.\r\n","title":"Is it possible in selenium enable images after certain step? If in before class is disabled","body":"<p>I have problem i need to have disabled images for first step in option like this.. it is in before tag:</p>\n<pre><code>    options.addArguments(&quot;--blink-settings=imagesEnabled=false&quot;);\n</code></pre>\n<p>Is it possible to enable it after first step is executed?\nI have cucumber java test framework.\nSomething like adding to step def.</p>\n<pre><code>    options.addArguments(&quot;--blink-settings=imagesEnabled=true&quot;);\n</code></pre>\n<p>Thanks for every advice.</p>\n"},{"tags":["java","maven","maven-site-plugin"],"answers":[{"tags":[],"owner":{"account_id":3793708,"reputation":7679,"user_id":3149528,"accept_rate":50,"display_name":"Slawomir Jaranowski"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1690319526,"creation_date":1690319526,"answer_id":76766539,"question_id":76765750,"body_markdown":"Mentioned documentation is out of date - should be updated (thanks for point).\r\n\r\n\r\nReporting was removed from `maven-plugin-plugin` in version 3.9.0 - [MPLUGIN-467][1]  \r\nnow is dedicated reporting plugin - `maven-plugin-report-plugin`.\r\n\r\nSo please use:\r\n\r\n```\r\n&lt;reporting&gt;\r\n    &lt;plugins&gt;\r\n      &lt;plugin&gt;\r\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n        &lt;artifactId&gt;maven-plugin-report-plugin&lt;/artifactId&gt;\r\n        &lt;version&gt;3.9.0&lt;/version&gt;\r\n      &lt;/plugin&gt;\r\n    &lt;/plugins&gt;\r\n  &lt;/reporting&gt;\r\n```\r\n\r\n\r\n\r\nReferences:\r\n - https://maven.apache.org/plugin-tools/maven-plugin-report-plugin/examples/generate-report.html\r\n\r\n  [1]: https://issues.apache.org/jira/browse/MPLUGIN-467","title":"plugin-info.html file not being generated when running Maven site","body":"<p>Mentioned documentation is out of date - should be updated (thanks for point).</p>\n<p>Reporting was removed from <code>maven-plugin-plugin</code> in version 3.9.0 - <a href=\"https://issues.apache.org/jira/browse/MPLUGIN-467\" rel=\"nofollow noreferrer\">MPLUGIN-467</a><br />\nnow is dedicated reporting plugin - <code>maven-plugin-report-plugin</code>.</p>\n<p>So please use:</p>\n<pre><code>&lt;reporting&gt;\n    &lt;plugins&gt;\n      &lt;plugin&gt;\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n        &lt;artifactId&gt;maven-plugin-report-plugin&lt;/artifactId&gt;\n        &lt;version&gt;3.9.0&lt;/version&gt;\n      &lt;/plugin&gt;\n    &lt;/plugins&gt;\n  &lt;/reporting&gt;\n</code></pre>\n<p>References:</p>\n<ul>\n<li><a href=\"https://maven.apache.org/plugin-tools/maven-plugin-report-plugin/examples/generate-report.html\" rel=\"nofollow noreferrer\">https://maven.apache.org/plugin-tools/maven-plugin-report-plugin/examples/generate-report.html</a></li>\n</ul>\n"}],"owner":{"account_id":29082932,"reputation":35,"user_id":22278526,"display_name":"Mike Solomon"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":76766539,"answer_count":1,"score":2,"last_activity_date":1690319526,"creation_date":1690311338,"question_id":76765750,"body_markdown":"I have a custom Maven plugin that has a few goals/Mojos in it that I&#39;d like to generate documentation for. According to the [Maven guide to plugin documentation](https://maven.apache.org/guides/development/guide-plugin-documentation.html#navigation-links), I am supposed to use the Maven plugin plugin in combination with the Maven site plugin to generate a `plugin-info.html` file that contains information about my goals.\r\n\r\nUnfortunately, I can&#39;t seem to generate this file. I _can_ generate a site, it just doesn&#39;t contain information about my goals/Mojos.\r\n\r\n[As the guide suggested](https://maven.apache.org/guides/development/guide-plugin-documentation.html#plugin-configuration-parameters), I updated my `pom.xml` file to include the Maven plugin plugin in the reporting section:\r\n\r\n```xml\r\n&lt;reporting&gt;\r\n    &lt;plugins&gt;\r\n        ...\r\n        &lt;plugin&gt;\r\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n            &lt;artifactId&gt;maven-plugin-plugin&lt;/artifactId&gt;\r\n            &lt;version&gt;3.9.0&lt;/version&gt;\r\n        &lt;/plugin&gt;\r\n    &lt;/plugins&gt;\r\n&lt;/reporting&gt;\r\n```\r\n\r\nI also have this plugin along with the site plugin in my `&lt;build&gt;/&lt;plugins&gt;` section:\r\n\r\n```xml\r\n&lt;build&gt;\r\n    ...\r\n    &lt;plugins&gt;\r\n        ...\r\n        &lt;plugin&gt;\r\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n            &lt;artifactId&gt;maven-site-plugin&lt;/artifactId&gt;\r\n            &lt;version&gt;3.12.1&lt;/version&gt;\r\n        &lt;/plugin&gt;\r\n        &lt;plugin&gt;\r\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n            &lt;artifactId&gt;maven-plugin-plugin&lt;/artifactId&gt;\r\n            &lt;version&gt;3.9.0&lt;/version&gt;\r\n            &lt;executions&gt;\r\n                &lt;execution&gt;\r\n                   &lt;id&gt;generate-helpmojo&lt;/id&gt;\r\n                   &lt;goals&gt;\r\n                       &lt;goal&gt;helpmojo&lt;/goal&gt;\r\n                   &lt;/goals&gt;\r\n               &lt;/execution&gt;\r\n            &lt;/executions&gt;\r\n        &lt;/plugin&gt; \r\n    &lt;plugins&gt;\r\n&lt;/build&gt;\r\n```\r\n\r\nWhen I run `mvn clean site` or `mvn site:site`, a `target/site` directory is generated with various files in it:\r\n[![target/site directory](https://i.stack.imgur.com/HqENM.png)](https://i.stack.imgur.com/HqENM.png)\r\n \r\nI expected to see a `plugin-info.html` file in there that includes information on my goals such as their names and descriptions. Unfortunately, I don&#39;t see that file anywhere.\r\n\r\nI&#39;m pretty sure I&#39;ve set up my goals/Mojos correctly. Here&#39;s an example of one of them:\r\n\r\n```java\r\n/**\r\n * Run the configured recipes and apply the changes locally.\r\n * &lt;p&gt;\r\n * This variant of rewrite:run will fork the maven life cycle and can be run as a &quot;stand-alone&quot; goal. It will\r\n * execute the maven build up to the process-test-classes phase.\r\n */\r\n@Mojo(name = &quot;run&quot;, requiresDependencyResolution = ResolutionScope.TEST, threadSafe = true,\r\n        defaultPhase = LifecyclePhase.PROCESS_TEST_CLASSES)\r\n@Execute(phase = LifecyclePhase.PROCESS_TEST_CLASSES)\r\npublic class RewriteRunMojo extends AbstractRewriteRunMojo {\r\n}\r\n```\r\n\r\nWhen I run `mvn process-classes`, I correctly get a `target/classes/META-INF/maven/.../plugin-help.xml` file that includes the information about my goals:\r\n\r\n```xml\r\n...\r\n&lt;mojo&gt;\r\n  &lt;goal&gt;run&lt;/goal&gt;\r\n  &lt;description&gt;Run the configured recipes and apply the changes locally. \r\nThis variant of rewrite:run will fork the maven life cycle and can be run as a stand-alone goal. It will execute the maven build up to the process-test-classes phase.\r\n  &lt;/description&gt;\r\n  ...\r\n&lt;/mojo&gt;\r\n```\r\n\r\nYet, that information doesn&#39;t seem to get used by the Maven site plugin.\r\n\r\nIs there some command or configuration I&#39;m missing to generate documentation for my goals? Is there any other information I can provide that&#39;s relevant to this question?\r\n\r\nThanks for your time!","title":"plugin-info.html file not being generated when running Maven site","body":"<p>I have a custom Maven plugin that has a few goals/Mojos in it that I'd like to generate documentation for. According to the <a href=\"https://maven.apache.org/guides/development/guide-plugin-documentation.html#navigation-links\" rel=\"nofollow noreferrer\">Maven guide to plugin documentation</a>, I am supposed to use the Maven plugin plugin in combination with the Maven site plugin to generate a <code>plugin-info.html</code> file that contains information about my goals.</p>\n<p>Unfortunately, I can't seem to generate this file. I <em>can</em> generate a site, it just doesn't contain information about my goals/Mojos.</p>\n<p><a href=\"https://maven.apache.org/guides/development/guide-plugin-documentation.html#plugin-configuration-parameters\" rel=\"nofollow noreferrer\">As the guide suggested</a>, I updated my <code>pom.xml</code> file to include the Maven plugin plugin in the reporting section:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;reporting&gt;\n    &lt;plugins&gt;\n        ...\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-plugin-plugin&lt;/artifactId&gt;\n            &lt;version&gt;3.9.0&lt;/version&gt;\n        &lt;/plugin&gt;\n    &lt;/plugins&gt;\n&lt;/reporting&gt;\n</code></pre>\n<p>I also have this plugin along with the site plugin in my <code>&lt;build&gt;/&lt;plugins&gt;</code> section:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;build&gt;\n    ...\n    &lt;plugins&gt;\n        ...\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-site-plugin&lt;/artifactId&gt;\n            &lt;version&gt;3.12.1&lt;/version&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-plugin-plugin&lt;/artifactId&gt;\n            &lt;version&gt;3.9.0&lt;/version&gt;\n            &lt;executions&gt;\n                &lt;execution&gt;\n                   &lt;id&gt;generate-helpmojo&lt;/id&gt;\n                   &lt;goals&gt;\n                       &lt;goal&gt;helpmojo&lt;/goal&gt;\n                   &lt;/goals&gt;\n               &lt;/execution&gt;\n            &lt;/executions&gt;\n        &lt;/plugin&gt; \n    &lt;plugins&gt;\n&lt;/build&gt;\n</code></pre>\n<p>When I run <code>mvn clean site</code> or <code>mvn site:site</code>, a <code>target/site</code> directory is generated with various files in it:\n<a href=\"https://i.stack.imgur.com/HqENM.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/HqENM.png\" alt=\"target/site directory\" /></a></p>\n<p>I expected to see a <code>plugin-info.html</code> file in there that includes information on my goals such as their names and descriptions. Unfortunately, I don't see that file anywhere.</p>\n<p>I'm pretty sure I've set up my goals/Mojos correctly. Here's an example of one of them:</p>\n<pre class=\"lang-java prettyprint-override\"><code>/**\n * Run the configured recipes and apply the changes locally.\n * &lt;p&gt;\n * This variant of rewrite:run will fork the maven life cycle and can be run as a &quot;stand-alone&quot; goal. It will\n * execute the maven build up to the process-test-classes phase.\n */\n@Mojo(name = &quot;run&quot;, requiresDependencyResolution = ResolutionScope.TEST, threadSafe = true,\n        defaultPhase = LifecyclePhase.PROCESS_TEST_CLASSES)\n@Execute(phase = LifecyclePhase.PROCESS_TEST_CLASSES)\npublic class RewriteRunMojo extends AbstractRewriteRunMojo {\n}\n</code></pre>\n<p>When I run <code>mvn process-classes</code>, I correctly get a <code>target/classes/META-INF/maven/.../plugin-help.xml</code> file that includes the information about my goals:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>...\n&lt;mojo&gt;\n  &lt;goal&gt;run&lt;/goal&gt;\n  &lt;description&gt;Run the configured recipes and apply the changes locally. \nThis variant of rewrite:run will fork the maven life cycle and can be run as a stand-alone goal. It will execute the maven build up to the process-test-classes phase.\n  &lt;/description&gt;\n  ...\n&lt;/mojo&gt;\n</code></pre>\n<p>Yet, that information doesn't seem to get used by the Maven site plugin.</p>\n<p>Is there some command or configuration I'm missing to generate documentation for my goals? Is there any other information I can provide that's relevant to this question?</p>\n<p>Thanks for your time!</p>\n"},{"tags":["java","maven","intellij-idea"],"answers":[{"tags":[],"owner":{"account_id":11122988,"reputation":473,"user_id":8165349,"display_name":"Paul Pazderski"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1690318914,"creation_date":1690318914,"answer_id":76766497,"question_id":76764044,"body_markdown":"You need to differentiate between the Maven parts and the Java parts. \r\n\r\n`groupId` and `artifactId` are Maven specific parts.\r\n\r\nThe `import` is Java and your `Util` class has no [package][1].\r\nA class package represents the directory tree a source file is placed in. For Maven by convention places the main source in `src/main/java`. That is your source root. And that is where your `Util.java` is placed. It is not in a subdirectory therefore it has no package.\r\n\r\nIf you had your `Util` class for example in `src/main/java/my/proj/lib/Util.java` it would be in the Java package `my.proj.lib` and you could import it with `import my.proj.lib.Util;`\r\n\r\nRegards naming conflicts: I&#39;m not entirely sure what you mean by that but it is common (but not required by any mean) to start package names with the reversed domain name of the project. E.g. if the project homepage would be https://my-awsome-project.com all packages could start with `com.my-awsome-project.*`.\r\n\r\nSame conventions exist for Maven where the `groupId` is usually the reversed domain name of the owning project. Since domain names are kinda unique this prevents most naming conflicts.\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Java_package?useskin=vector","title":"importing from maven sibling modules","body":"<p>You need to differentiate between the Maven parts and the Java parts.</p>\n<p><code>groupId</code> and <code>artifactId</code> are Maven specific parts.</p>\n<p>The <code>import</code> is Java and your <code>Util</code> class has no <a href=\"https://en.wikipedia.org/wiki/Java_package?useskin=vector\" rel=\"nofollow noreferrer\">package</a>.\nA class package represents the directory tree a source file is placed in. For Maven by convention places the main source in <code>src/main/java</code>. That is your source root. And that is where your <code>Util.java</code> is placed. It is not in a subdirectory therefore it has no package.</p>\n<p>If you had your <code>Util</code> class for example in <code>src/main/java/my/proj/lib/Util.java</code> it would be in the Java package <code>my.proj.lib</code> and you could import it with <code>import my.proj.lib.Util;</code></p>\n<p>Regards naming conflicts: I'm not entirely sure what you mean by that but it is common (but not required by any mean) to start package names with the reversed domain name of the project. E.g. if the project homepage would be <a href=\"https://my-awsome-project.com\" rel=\"nofollow noreferrer\">https://my-awsome-project.com</a> all packages could start with <code>com.my-awsome-project.*</code>.</p>\n<p>Same conventions exist for Maven where the <code>groupId</code> is usually the reversed domain name of the owning project. Since domain names are kinda unique this prevents most naming conflicts.</p>\n"}],"owner":{"account_id":14117115,"reputation":410,"user_id":10198627,"display_name":"a.ilchinger"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":58,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76766497,"answer_count":1,"score":0,"last_activity_date":1690318914,"creation_date":1690297500,"question_id":76764044,"body_markdown":"The project structure is as follows:\r\n\r\n    /proj-root\r\n       /proj-lib\r\n       /proj-cli\r\n`proj-root` defines the `proj-lib` and `proj-cli` projects as its (maven) modules. It has `pom` packaging while the other two have `jar` packaging. I added a dependency on `proj-lib` in `proj-cli/pom.xml`\r\n\r\nUsing the IntelliJ IDE I can import my project without any issues. Building and running works fine both inside the IDE as well as when running the `mvn` command from a terminal.\r\n\r\nHowever, I am missing `import` statements in `proj-cli`.\r\n\r\nImagine a class `Util` in `proj-lib/src/main/java/Util.java`. Without ever importing it (explicitly) I can use this class inside `proj-cli/src/main/java/Main.java`. Trying to manually import the class with `import groupId.artifactId.Util;` fails because this path cannot be resolved.\r\n\r\nWhile many imports can be tedious, I actually like seeing all the stuff coming from elsewhere, including sibling modules. So my question is - is this implicit import intended? How could I explicitly import it? And while I didn&#39;t got to this point yet, what if I have to fully qualify artifact and group ID of such an import to avoid naming conflicts?","title":"importing from maven sibling modules","body":"<p>The project structure is as follows:</p>\n<pre><code>/proj-root\n   /proj-lib\n   /proj-cli\n</code></pre>\n<p><code>proj-root</code> defines the <code>proj-lib</code> and <code>proj-cli</code> projects as its (maven) modules. It has <code>pom</code> packaging while the other two have <code>jar</code> packaging. I added a dependency on <code>proj-lib</code> in <code>proj-cli/pom.xml</code></p>\n<p>Using the IntelliJ IDE I can import my project without any issues. Building and running works fine both inside the IDE as well as when running the <code>mvn</code> command from a terminal.</p>\n<p>However, I am missing <code>import</code> statements in <code>proj-cli</code>.</p>\n<p>Imagine a class <code>Util</code> in <code>proj-lib/src/main/java/Util.java</code>. Without ever importing it (explicitly) I can use this class inside <code>proj-cli/src/main/java/Main.java</code>. Trying to manually import the class with <code>import groupId.artifactId.Util;</code> fails because this path cannot be resolved.</p>\n<p>While many imports can be tedious, I actually like seeing all the stuff coming from elsewhere, including sibling modules. So my question is - is this implicit import intended? How could I explicitly import it? And while I didn't got to this point yet, what if I have to fully qualify artifact and group ID of such an import to avoid naming conflicts?</p>\n"},{"tags":["java","newline"],"comments":[{"owner":{"account_id":2057319,"reputation":4151,"user_id":1834700,"accept_rate":83,"display_name":"Rong Nguyen"},"score":1,"creation_date":1373603202,"post_id":17607334,"comment_id":25628170,"body_markdown":"This is the 444555 Java&#39;s question, you&#39;re welcome :-)","body":"This is the 444555 Java&#39;s question, you&#39;re welcome :-)"}],"answers":[{"comments":[{"owner":{"account_id":1603736,"reputation":1240,"user_id":1484248,"accept_rate":71,"display_name":"exit_1"},"score":0,"creation_date":1373603116,"post_id":17607372,"comment_id":25628156,"body_markdown":"Thanks! that&#39;s very helpful. I believe that once I access the url, the lines are already split, is there any way in Java that I could just read certain lines? This should eb a sample output of the api: http://ip-api.com/line","body":"Thanks! that&#39;s very helpful. I believe that once I access the url, the lines are already split, is there any way in Java that I could just read certain lines? This should eb a sample output of the api: <a href=\"http://ip-api.com/line\" rel=\"nofollow noreferrer\">ip-api.com/line</a>"},{"owner":{"account_id":1280854,"reputation":1419,"user_id":1234970,"accept_rate":100,"display_name":"Chase"},"score":1,"creation_date":1373603174,"post_id":17607372,"comment_id":25628162,"body_markdown":"Using lines, you can access the individual lines. So `lines[0]` will get the first line and `lines[1]` will get the second line and so forth.","body":"Using lines, you can access the individual lines. So <code>lines[0]</code> will get the first line and <code>lines[1]</code> will get the second line and so forth."},{"owner":{"account_id":1603736,"reputation":1240,"user_id":1484248,"accept_rate":71,"display_name":"exit_1"},"score":0,"creation_date":1373603398,"post_id":17607372,"comment_id":25628220,"body_markdown":"Thanks @Chase. I&#39;m curious though, is this the only way Java allows this to happen, that is, you must read all lines and then choose which to actually use in your program?","body":"Thanks @Chase. I&#39;m curious though, is this the only way Java allows this to happen, that is, you must read all lines and then choose which to actually use in your program?"},{"owner":{"account_id":1280854,"reputation":1419,"user_id":1234970,"accept_rate":100,"display_name":"Chase"},"score":0,"creation_date":1373603496,"post_id":17607372,"comment_id":25628241,"body_markdown":"Pretty much. Any any language you have to read the contents in before you can access it. You could skip over data until you run into a `\\n` character. But that wouldn&#39;t be any less complicated. Just ignore the lines you don&#39;t use. You can call `lines[4]` to jump directly to access line 5, without having to look at the other ones first, then later you can look at line 2 with `lines[1]`.","body":"Pretty much. Any any language you have to read the contents in before you can access it. You could skip over data until you run into a <code>\\n</code> character. But that wouldn&#39;t be any less complicated. Just ignore the lines you don&#39;t use. You can call <code>lines[4]</code> to jump directly to access line 5, without having to look at the other ones first, then later you can look at line 2 with <code>lines[1]</code>."},{"owner":{"account_id":1603736,"reputation":1240,"user_id":1484248,"accept_rate":71,"display_name":"exit_1"},"score":0,"creation_date":1373610895,"post_id":17607372,"comment_id":25630257,"body_markdown":"I have been using your suggested code and it&#39;s working well, I was hoping you could explain line by line what is happening so I can further expand my understanding of the subject. It would be greatly appreciated.","body":"I have been using your suggested code and it&#39;s working well, I was hoping you could explain line by line what is happening so I can further expand my understanding of the subject. It would be greatly appreciated."}],"tags":[],"owner":{"account_id":1280854,"reputation":1419,"user_id":1234970,"accept_rate":100,"display_name":"Chase"},"comment_count":5,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1373603365,"creation_date":1373602763,"answer_id":17607372,"question_id":17607334,"body_markdown":"You will want to read all the data from the stream.\r\n\r\n    InputStream stream = geoLocRetriever.openStream();\r\n    ByteArrayOutputStream buffer = new ByteArrayOutputStream();\r\n    if (stream != null) try {\r\n        final BufferedInputStream input = new BufferedInputStream(stream);\r\n        final byte[] reader = new byte[16384];\r\n        int r = 0;\r\n        while ((r = input.read(reader, 0, 16384)) != -1)\r\n            buffer.write(reader, 0, r);\r\n        buffer.flush();\r\n    } catch(IOException e) {\r\n        e.printStackTrace();\r\n    } finally {\r\n        if(stream != null) try {\r\n            stream.close();\r\n        } catch(IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n    \r\nConvert that to a string.\r\n\r\n    locHolder = new String(buffer.toByteArray());\r\n    \r\nYou can then split the lines using `String.split`.\r\n\r\n    String[] lines = locHolder.split(&quot;\\n&quot;);\r\n\r\nUsing that you can then read the lines individually.","title":"How to fetch data from API given in Newline","body":"<p>You will want to read all the data from the stream.</p>\n\n<pre><code>InputStream stream = geoLocRetriever.openStream();\nByteArrayOutputStream buffer = new ByteArrayOutputStream();\nif (stream != null) try {\n    final BufferedInputStream input = new BufferedInputStream(stream);\n    final byte[] reader = new byte[16384];\n    int r = 0;\n    while ((r = input.read(reader, 0, 16384)) != -1)\n        buffer.write(reader, 0, r);\n    buffer.flush();\n} catch(IOException e) {\n    e.printStackTrace();\n} finally {\n    if(stream != null) try {\n        stream.close();\n    } catch(IOException e) {\n        e.printStackTrace();\n    }\n}\n</code></pre>\n\n<p>Convert that to a string.</p>\n\n<pre><code>locHolder = new String(buffer.toByteArray());\n</code></pre>\n\n<p>You can then split the lines using <code>String.split</code>.</p>\n\n<pre><code>String[] lines = locHolder.split(\"\\n\");\n</code></pre>\n\n<p>Using that you can then read the lines individually.</p>\n"}],"owner":{"account_id":1603736,"reputation":1240,"user_id":1484248,"accept_rate":71,"display_name":"exit_1"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":335,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":17607372,"answer_count":1,"score":1,"last_activity_date":1690318686,"creation_date":1373602329,"question_id":17607334,"body_markdown":"Part of my program&#39;s purpose is to retrieve data that is given in newline format from this api:http://ip-api.com/docs/api:newline_separated. The data are is concerned with the geo location of an IP address and is presented in Newline format; I only want to pull certain lines. I am not very familiar with URL/file i/o in Java and when I researched it I was a bit overwhelmed. I am able to access the data I want but I am struggling with understanding how to pull it into my program. \r\n\r\nThis is my method that will be used to access the data, pull certain lines, then convert it into variables to be used in the rest of the class:\r\n\r\n    public void getGeoLoc()\r\n    {\r\n\tString locHolder;\r\n\ttry {\r\n\t\tgeoLocRetriever = new URL(&quot;http://ip-api.com/line/&quot; + MainDisplay.getAttackerIpHolder());\r\n\t} catch (MalformedURLException e) {\r\n\t\te.printStackTrace();\r\n\t}\r\n\t//BufferedReader in = new BufferedReader(new InputStreamReader(geoLocRetriever.openStream()));\r\n    }\r\n\r\nAny input or suggested tutorial would be greatly appreciated.","title":"How to fetch data from API given in Newline","body":"<p>Part of my program's purpose is to retrieve data that is given in newline format from this api:<a href=\"http://ip-api.com/docs/api:newline_separated\" rel=\"nofollow noreferrer\">http://ip-api.com/docs/api:newline_separated</a>. The data are is concerned with the geo location of an IP address and is presented in Newline format; I only want to pull certain lines. I am not very familiar with URL/file i/o in Java and when I researched it I was a bit overwhelmed. I am able to access the data I want but I am struggling with understanding how to pull it into my program.</p>\n<p>This is my method that will be used to access the data, pull certain lines, then convert it into variables to be used in the rest of the class:</p>\n<pre><code>public void getGeoLoc()\n{\nString locHolder;\ntry {\n    geoLocRetriever = new URL(&quot;http://ip-api.com/line/&quot; + MainDisplay.getAttackerIpHolder());\n} catch (MalformedURLException e) {\n    e.printStackTrace();\n}\n//BufferedReader in = new BufferedReader(new InputStreamReader(geoLocRetriever.openStream()));\n}\n</code></pre>\n<p>Any input or suggested tutorial would be greatly appreciated.</p>\n"},{"tags":["java","android"],"answers":[{"tags":[],"owner":{"account_id":933416,"reputation":25,"user_id":962823,"display_name":"user962823"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1431191151,"creation_date":1431191151,"answer_id":30142754,"question_id":30142624,"body_markdown":"It sounds like what you want to do is &quot;snoop&quot; on another app. That is, you want to retrieve data from it that it doesn&#39;t publicly expose in it&#39;s API.\r\n\r\nI believe this is generally impossible without breaking the encapsulation of the app - this means you would have to use more than its publicly documented (and reliable) interface, and delve into its implementation specifics which are liable to change without warning, thus breaking your own app.\r\n\r\nThere are apps that are able to take screenshots of other apps, this would be one example of how you could indirectly break the encapsulation, as you could attempt to parse the data that way. I give this example purely to prove that it is possible, however this would be considered terrible practice and should be avoided for many reasons.\r\n\r\nFor all serious use cases, I would say that if it is not provided in the API, you cannot obtain the data.","title":"Android get data from Application without API","body":"<p>It sounds like what you want to do is \"snoop\" on another app. That is, you want to retrieve data from it that it doesn't publicly expose in it's API.</p>\n\n<p>I believe this is generally impossible without breaking the encapsulation of the app - this means you would have to use more than its publicly documented (and reliable) interface, and delve into its implementation specifics which are liable to change without warning, thus breaking your own app.</p>\n\n<p>There are apps that are able to take screenshots of other apps, this would be one example of how you could indirectly break the encapsulation, as you could attempt to parse the data that way. I give this example purely to prove that it is possible, however this would be considered terrible practice and should be avoided for many reasons.</p>\n\n<p>For all serious use cases, I would say that if it is not provided in the API, you cannot obtain the data.</p>\n"}],"owner":{"account_id":3328492,"reputation":729,"user_id":2797912,"accept_rate":33,"display_name":"Chirag Nagpal"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":940,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"answer_count":1,"score":-3,"last_activity_date":1690318635,"creation_date":1431190414,"question_id":30142624,"body_markdown":"I am working on an Android app where I need to integrate data from another app.\r\n\r\nJust For Example: Think a situation I have ***Google play store*** in my mobile. Now when a person searches &quot;education&quot; in ***play store*** It shows all the result in list which consists that keyword. Now I want to get all the data result fetched by ***play store***  in my app.\r\n\r\nNote:- I am not sure there is any code to get data from another app, but still I saw an app called [App for all taxi cabs][1] It shows all the result from various application even there is no API for ***ola cabs***, ***Taxi for sure*** and many others but they are somehow manage to get all these data for their app.\r\n\r\nPlease help I crucially want to know if there is possibility to do so or not. \r\n\r\n\r\n\r\n  [1]: https://play.google.com/store/apps/details?id=com.cabsguru","title":"Android get data from Application without API","body":"<p>I am working on an Android app where I need to integrate data from another app.</p>\n<p>Just For Example: Think a situation I have <em><strong>Google play store</strong></em> in my mobile. Now when a person searches &quot;education&quot; in <em><strong>play store</strong></em> It shows all the result in list which consists that keyword. Now I want to get all the data result fetched by <em><strong>play store</strong></em>  in my app.</p>\n<p>Note:- I am not sure there is any code to get data from another app, but still I saw an app called <a href=\"https://play.google.com/store/apps/details?id=com.cabsguru\" rel=\"nofollow noreferrer\">App for all taxi cabs</a> It shows all the result from various application even there is no API for <em><strong>ola cabs</strong></em>, <em><strong>Taxi for sure</strong></em> and many others but they are somehow manage to get all these data for their app.</p>\n<p>Please help I crucially want to know if there is possibility to do so or not.</p>\n"},{"tags":["javascript","java","json","post","fetch-api"],"comments":[{"owner":{"account_id":2478109,"reputation":2505,"user_id":2158271,"accept_rate":56,"display_name":"haba713"},"score":0,"creation_date":1515868444,"post_id":48242992,"comment_id":83468489,"body_markdown":"I&#39;m not familiar with Jersey but try using annotation `@Produces(MediaType.APPLICATION_JSON)` for the method `createUser(...)`.","body":"I&#39;m not familiar with Jersey but try using annotation <code>@Produces(MediaType.APPLICATION_JSON)</code> for the method <code>createUser(...)</code>."},{"owner":{"account_id":10378186,"reputation":71,"user_id":7653779,"accept_rate":0,"display_name":"Arthur Klipfel"},"score":0,"creation_date":1515869762,"post_id":48242992,"comment_id":83468913,"body_markdown":"I forgot to tell that my whole jersey resources file is configured to produce json","body":"I forgot to tell that my whole jersey resources file is configured to produce json"}],"answers":[{"tags":[],"owner":{"account_id":12119380,"reputation":207,"user_id":8851614,"display_name":"dawid"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1515873033,"creation_date":1515873033,"answer_id":48243710,"question_id":48242992,"body_markdown":"415 is Unsupported Media Type (https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/415)\r\n\r\ntry changing\r\n\r\n    @Consumes(MediaType.APPLICATION_JSON)\r\n\r\nto\r\n\r\n    @Consumes(MediaType.APPLICATION_JSON_VALUE)\r\n\r\n\r\n","title":"415 error when sending POST request to REST API","body":"<p>415 is Unsupported Media Type (<a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/415\" rel=\"nofollow noreferrer\">https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/415</a>)</p>\n\n<p>try changing</p>\n\n<pre><code>@Consumes(MediaType.APPLICATION_JSON)\n</code></pre>\n\n<p>to</p>\n\n<pre><code>@Consumes(MediaType.APPLICATION_JSON_VALUE)\n</code></pre>\n"}],"owner":{"account_id":10378186,"reputation":71,"user_id":7653779,"accept_rate":0,"display_name":"Arthur Klipfel"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1372,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1690318584,"creation_date":1515868005,"question_id":48242992,"body_markdown":"I&#39;m developing a REST API in JavaEE and a client using this API in ReactJS.\r\n\r\nThe API works perfectly when I&#39;m using postman, but as soon as I use fetch method in JS to POST JSON information through my client, I&#39;m getting a 415 error:\r\n\r\n&gt; Unsupported Mediatype in my browser&#39;s console.\r\n\r\nFor the API, I&#39;m using Jersey to process requests and Hibernate as ORM. I have genson dependency and as I said, everything works perfectly fine with Postman.\r\nI also checked the result of `JSON.stringify()` before sending it and it looks fine to me.\r\n\r\nPlus, in my server&#39;s console, I&#39;m getting this error every time I try to POST anything :\r\n\r\n&gt;    GRAVE: A message body reader for Java class model.User, and Java type class model.User, and MIME media type application/octet-stream was not found.\r\n\r\nI checked and double-checked everything, I&#39;m sending the right headers, the browser identifies the request as &#39;application/json&#39; content type but it&#39;s like my API still doesn&#39;t accept it, or receives it as application/octet-stream mediatype.\r\n\r\nHere is the method where fetch is done: \r\n\r\n    \r\n    signIn(){\r\n\t\tconsole.log(JSON.stringify(this.state));\r\n\t\tfetch(&#39;http://localhost:8080/P52/users&#39;, {\r\n\t\t\t\t\tmethod: &#39;POST&#39;,\r\n\t\t\t\t\tbody: JSON.stringify(this.state),\r\n\t\t\t\t\theaders: {\r\n\t\t\t\t\t\t&#39;Content-Type&#39;: &#39;application/json&#39;,\r\n\t\t\t\t\t\t&#39;Accept&#39;: &#39;application/json&#39;\r\n\t\t\t\t\t}\r\n\t\t\t\t}).then(res =&gt; {\r\n\t\t\t\t\treturn res.json();\r\n\t\t\t\t}).catch(err=&gt;err)\r\n\t}\r\n\r\nThe method that receives data in the API : \r\n\r\n    @POST\r\n    @Consumes(MediaType.APPLICATION_JSON)\r\n    public User createUser(User u){\r\n        return UserController.createUser(u);\r\n    }\r\n\r\nThe controller just create a new instance of User class to run this code in the User model class : \r\n\r\n    public User(User u){\r\n        this.id = u.getId();\r\n        this.pseudo = u.getPseudo();\r\n        this.firstname = u.getFirstname();\r\n        this.lastname = u.getLastname();\r\n        Session session = (Session)HibernateUtil.getSessionFactory().openSession();\r\n        session.beginTransaction();\r\n        session.save(this);\r\n        session.getTransaction().commit();\r\n        session.close();\r\n    }\r\n\r\nIf anyone has the answer to my problem or has already faced it, please let me know so I can finally move forward with this project. \r\n\r\n\r\n\r\n","title":"415 error when sending POST request to REST API","body":"<p>I'm developing a REST API in JavaEE and a client using this API in ReactJS.</p>\n<p>The API works perfectly when I'm using postman, but as soon as I use fetch method in JS to POST JSON information through my client, I'm getting a 415 error:</p>\n<blockquote>\n<p>Unsupported Mediatype in my browser's console.</p>\n</blockquote>\n<p>For the API, I'm using Jersey to process requests and Hibernate as ORM. I have genson dependency and as I said, everything works perfectly fine with Postman.\nI also checked the result of <code>JSON.stringify()</code> before sending it and it looks fine to me.</p>\n<p>Plus, in my server's console, I'm getting this error every time I try to POST anything :</p>\n<blockquote>\n<p>GRAVE: A message body reader for Java class model.User, and Java type class model.User, and MIME media type application/octet-stream was not found.</p>\n</blockquote>\n<p>I checked and double-checked everything, I'm sending the right headers, the browser identifies the request as 'application/json' content type but it's like my API still doesn't accept it, or receives it as application/octet-stream mediatype.</p>\n<p>Here is the method where fetch is done:</p>\n<pre><code>signIn(){\n    console.log(JSON.stringify(this.state));\n    fetch('http://localhost:8080/P52/users', {\n                method: 'POST',\n                body: JSON.stringify(this.state),\n                headers: {\n                    'Content-Type': 'application/json',\n                    'Accept': 'application/json'\n                }\n            }).then(res =&gt; {\n                return res.json();\n            }).catch(err=&gt;err)\n}\n</code></pre>\n<p>The method that receives data in the API :</p>\n<pre><code>@POST\n@Consumes(MediaType.APPLICATION_JSON)\npublic User createUser(User u){\n    return UserController.createUser(u);\n}\n</code></pre>\n<p>The controller just create a new instance of User class to run this code in the User model class :</p>\n<pre><code>public User(User u){\n    this.id = u.getId();\n    this.pseudo = u.getPseudo();\n    this.firstname = u.getFirstname();\n    this.lastname = u.getLastname();\n    Session session = (Session)HibernateUtil.getSessionFactory().openSession();\n    session.beginTransaction();\n    session.save(this);\n    session.getTransaction().commit();\n    session.close();\n}\n</code></pre>\n<p>If anyone has the answer to my problem or has already faced it, please let me know so I can finally move forward with this project.</p>\n"},{"tags":["javascript","java","reactjs","fetch-api"],"comments":[{"owner":{"account_id":16221866,"reputation":15,"user_id":11713229,"display_name":"Sujata Mishra"},"score":0,"creation_date":1599895777,"post_id":63857942,"comment_id":112922136,"body_markdown":"@JaromandaX I have changed the API&#39; last 3 digit before posting","body":"@JaromandaX I have changed the API&#39; last 3 digit before posting"},{"owner":{"account_id":6532198,"reputation":54726,"user_id":5053002,"display_name":"Jaromanda X"},"score":0,"creation_date":1599896412,"post_id":63857942,"comment_id":112922257,"body_markdown":"Ok, so now check the backend logs at 35.154.16.000 to see what is causing the server to send error 500","body":"Ok, so now check the backend logs at 35.154.16.000 to see what is causing the server to send error 500"},{"owner":{"account_id":16221866,"reputation":15,"user_id":11713229,"display_name":"Sujata Mishra"},"score":0,"creation_date":1599896489,"post_id":63857942,"comment_id":112922273,"body_markdown":"@JaromandaX Sorry I have corrected it now.","body":"@JaromandaX Sorry I have corrected it now."},{"owner":{"account_id":6532198,"reputation":54726,"user_id":5053002,"display_name":"Jaromanda X"},"score":0,"creation_date":1599896772,"post_id":63857942,"comment_id":112922338,"body_markdown":"Well, check the server logs for the cause of the error 500","body":"Well, check the server logs for the cause of the error 500"},{"owner":{"account_id":16221866,"reputation":15,"user_id":11713229,"display_name":"Sujata Mishra"},"score":0,"creation_date":1599897316,"post_id":63857942,"comment_id":112922442,"body_markdown":"Actually I am just handling the front-end part. I have added the log screenshot.","body":"Actually I am just handling the front-end part. I have added the log screenshot."},{"owner":{"account_id":6532198,"reputation":54726,"user_id":5053002,"display_name":"Jaromanda X"},"score":0,"creation_date":1599901908,"post_id":63857942,"comment_id":112923355,"body_markdown":"Well, it&#39;s a backend error - so, contact them","body":"Well, it&#39;s a backend error - so, contact them"},{"owner":{"account_id":15064163,"reputation":13516,"user_id":10871900,"display_name":"dan1st is crying"},"score":0,"creation_date":1690324657,"post_id":63857942,"comment_id":135337023,"body_markdown":"From your hardly readable screenshot, it looks like you are sending an invalid HTTP request. Try not using that `cors-anywhere.herokuapp.com` site.","body":"From your hardly readable screenshot, it looks like you are sending an invalid HTTP request. Try not using that <code>cors-anywhere.herokuapp.com</code> site."}],"owner":{"account_id":16221866,"reputation":15,"user_id":11713229,"display_name":"Sujata Mishra"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":457,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690318470,"creation_date":1599895342,"question_id":63857942,"body_markdown":"I am fetching an API signup/validateOtp for validating the OTP. In body I am passing the mobile number and OTP but I am getting the Internal Server Error.\r\n\r\nFollowing is the code for fetching the API-\r\n\r\n    onSubmitOtp = () =&gt; {\r\n        console.log(this.state.mobile);\r\n        console.log(JSON.stringify(this.state.otp));\r\n        fetch(&#39;https://cors-anywhere.herokuapp.com/http://35.154.16.105:8080/signup/validateOtp&#39;,{\r\n            method:&#39;post&#39;,\r\n            headers:{&#39;Content-Type&#39;:&#39;application/json&#39;},\r\n            body: JSON.stringify({\r\n                mobile: this.state.mobile,\r\n                otp:this.state.otp\r\n            })\r\n        })\r\n        .then(response =&gt; response.json())\r\n        .then(data =&gt;{\r\n            if(data.content === &#39;OK&#39;){\r\n                // this.props.loadNewUser(this.state.otp);\r\n                console.log(this.state.mobile);\r\n                this.props.onRouteChange(&#39;createprofile&#39;,&#39;nonav&#39;);\r\n            }\r\n            else\r\n             console.log(data.error);\r\n        })\r\n        this.props.onRouteChange(&#39;otp&#39;,&#39;nonav&#39;);\r\n    }\r\n\r\n![API][1]\r\n\r\nError-\r\nOtp.js:19 POST https://cors-anywhere.herokuapp.com/http://35.154.16:105:8080/signup/validateOtp 500 (Internal Server Error)\r\n\r\n\r\n![Log][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/iU9qJ.png\r\n  [2]: https://i.stack.imgur.com/cFF5D.jpg","title":"Internal Server Error 500 while calling the API","body":"<p>I am fetching an API signup/validateOtp for validating the OTP. In body I am passing the mobile number and OTP but I am getting the Internal Server Error.</p>\n<p>Following is the code for fetching the API-</p>\n<pre><code>onSubmitOtp = () =&gt; {\n    console.log(this.state.mobile);\n    console.log(JSON.stringify(this.state.otp));\n    fetch('https://cors-anywhere.herokuapp.com/http://35.154.16.105:8080/signup/validateOtp',{\n        method:'post',\n        headers:{'Content-Type':'application/json'},\n        body: JSON.stringify({\n            mobile: this.state.mobile,\n            otp:this.state.otp\n        })\n    })\n    .then(response =&gt; response.json())\n    .then(data =&gt;{\n        if(data.content === 'OK'){\n            // this.props.loadNewUser(this.state.otp);\n            console.log(this.state.mobile);\n            this.props.onRouteChange('createprofile','nonav');\n        }\n        else\n         console.log(data.error);\n    })\n    this.props.onRouteChange('otp','nonav');\n}\n</code></pre>\n<p><img src=\"https://i.stack.imgur.com/iU9qJ.png\" alt=\"API\" /></p>\n<p>Error-\nOtp.js:19 POST <a href=\"https://cors-anywhere.herokuapp.com/http://35.154.16:105:8080/signup/validateOtp\" rel=\"nofollow noreferrer\">https://cors-anywhere.herokuapp.com/http://35.154.16:105:8080/signup/validateOtp</a> 500 (Internal Server Error)</p>\n<p><img src=\"https://i.stack.imgur.com/cFF5D.jpg\" alt=\"Log\" /></p>\n"},{"tags":["java","https","httpurlconnection"],"comments":[{"owner":{"account_id":1295621,"reputation":111,"user_id":7403310,"display_name":"saadeez"},"score":0,"creation_date":1663655639,"post_id":73782274,"comment_id":130284600,"body_markdown":"Looks like you are trying to pull a string from Http GET and aiming to convert into POJO?","body":"Looks like you are trying to pull a string from Http GET and aiming to convert into POJO?"},{"owner":{"account_id":23945581,"reputation":77,"user_id":17937975,"display_name":"KaizOffical"},"score":0,"creation_date":1663660982,"post_id":73782274,"comment_id":130286281,"body_markdown":"@saadeez im trying to fetch the data (json) from the url base (i get with string then parse to json)","body":"@saadeez im trying to fetch the data (json) from the url base (i get with string then parse to json)"},{"owner":{"account_id":1295621,"reputation":111,"user_id":7403310,"display_name":"saadeez"},"score":0,"creation_date":1663745549,"post_id":73782274,"comment_id":130308954,"body_markdown":"why dont you use Apache Commons Library for this? if you are un-aware then i can share its sample","body":"why dont you use Apache Commons Library for this? if you are un-aware then i can share its sample"}],"owner":{"account_id":23945581,"reputation":77,"user_id":17937975,"display_name":"KaizOffical"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":185,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690318326,"creation_date":1663654181,"question_id":73782274,"body_markdown":"I&#39;m making a Java program and I want to fetch updates (JSON data) from URL of my website.\r\nI used `HttpURLConnection` and `Pass SSL Certificate`.\r\nI got this error while running:\r\n```none\r\njavax.net.ssl.SSLException: Received fatal alert: internal_error\r\n\tat sun.security.ssl.Alerts.getSSLException(Alerts.java:208)\r\n\tat sun.security.ssl.Alerts.getSSLException(Alerts.java:154)\r\n\tat sun.security.ssl.SSLSocketImpl.recvAlert(SSLSocketImpl.java:2011)\r\n\tat sun.security.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:1113)\r\n\tat sun.security.ssl.SSLSocketImpl.performInitialHandshake(SSLSocketImpl.java:1363)\r\n\tat sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1391)\r\n\tat sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1375)\r\n\tat sun.net.www.protocol.https.HttpsClient.afterConnect(HttpsClient.java:563)\r\n\tat sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.connect(AbstractDelegateHttpsURLConnection.java:185)\r\n\tat sun.net.www.protocol.https.HttpsURLConnectionImpl.connect(HttpsURLConnectionImpl.java:153)\r\n```\r\n(`HTTPS` URL) &lt;br&gt;\r\nI also try `HTTP` URL but the response code is `308` &lt;br&gt;\r\n\r\nPass SSL Certificate code:\r\n\r\n    public static void setupIgnoreSSLCertificate() throws NoSuchAlgorithmException, KeyManagementException {\r\n        final TrustManager[] trustManager = new TrustManager[]{new X509TrustManager() {\r\n            @Override\r\n            public void checkClientTrusted(X509Certificate[] x509Certificates, String s) {\r\n            }\r\n\r\n            @Override\r\n            public void checkServerTrusted(X509Certificate[] x509Certificates, String s) {\r\n            }\r\n\r\n            @Override\r\n            public X509Certificate[] getAcceptedIssuers() {\r\n                return null;\r\n            }\r\n        }};\r\n\r\n        final SSLContext disease = SSLContext.getInstance(&quot;SSL&quot;);\r\n        disease.init(null, trustManager, new SecureRandom());\r\n\r\n        HttpsURLConnection.setDefaultSSLSocketFactory(disease.getSocketFactory());\r\n\r\n        final HostnameVerifier aids = (s, sslSession) -&gt; true;\r\n        HttpsURLConnection.setDefaultHostnameVerifier(aids);\r\n    }\r\n\r\nFetch code:\r\n\r\n        StringBuilder text = new StringBuilder();\r\n        try {\r\n            setupIgnoreSSLCertificate();\r\n        } catch (NoSuchAlgorithmException | KeyManagementException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n        try {\r\n\t        URL url = new URL(base + method);\r\n\t        HttpURLConnection connection = (HttpURLConnection) url.openConnection();\r\n\t        connection.setRequestMethod(&quot;GET&quot;);\r\n\t        connection.connect();\r\n\t        int code = connection.getResponseCode();\r\n\t        if(code != 200) {\r\n\t            System.out.println(&quot;Error code: &quot; + code);\r\n\t        } else {\r\n\t            Scanner scanner = new Scanner(url.openStream());\r\n\t            while(scanner.hasNext()) {\r\n\t                text.append(scanner.nextLine());\r\n\t            }\r\n\t            scanner.close();\r\n\t        }\r\n    \t} catch(Exception e) {\r\n    \t\te.printStackTrace();\r\n    \t}\r\n","title":"Cannot fetch data (JSON) from URL - Java","body":"<p>I'm making a Java program and I want to fetch updates (JSON data) from URL of my website.\nI used <code>HttpURLConnection</code> and <code>Pass SSL Certificate</code>.\nI got this error while running:</p>\n<pre class=\"lang-none prettyprint-override\"><code>javax.net.ssl.SSLException: Received fatal alert: internal_error\n    at sun.security.ssl.Alerts.getSSLException(Alerts.java:208)\n    at sun.security.ssl.Alerts.getSSLException(Alerts.java:154)\n    at sun.security.ssl.SSLSocketImpl.recvAlert(SSLSocketImpl.java:2011)\n    at sun.security.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:1113)\n    at sun.security.ssl.SSLSocketImpl.performInitialHandshake(SSLSocketImpl.java:1363)\n    at sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1391)\n    at sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1375)\n    at sun.net.www.protocol.https.HttpsClient.afterConnect(HttpsClient.java:563)\n    at sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.connect(AbstractDelegateHttpsURLConnection.java:185)\n    at sun.net.www.protocol.https.HttpsURLConnectionImpl.connect(HttpsURLConnectionImpl.java:153)\n</code></pre>\n<p>(<code>HTTPS</code> URL) <br>\nI also try <code>HTTP</code> URL but the response code is <code>308</code> <br></p>\n<p>Pass SSL Certificate code:</p>\n<pre><code>public static void setupIgnoreSSLCertificate() throws NoSuchAlgorithmException, KeyManagementException {\n    final TrustManager[] trustManager = new TrustManager[]{new X509TrustManager() {\n        @Override\n        public void checkClientTrusted(X509Certificate[] x509Certificates, String s) {\n        }\n\n        @Override\n        public void checkServerTrusted(X509Certificate[] x509Certificates, String s) {\n        }\n\n        @Override\n        public X509Certificate[] getAcceptedIssuers() {\n            return null;\n        }\n    }};\n\n    final SSLContext disease = SSLContext.getInstance(&quot;SSL&quot;);\n    disease.init(null, trustManager, new SecureRandom());\n\n    HttpsURLConnection.setDefaultSSLSocketFactory(disease.getSocketFactory());\n\n    final HostnameVerifier aids = (s, sslSession) -&gt; true;\n    HttpsURLConnection.setDefaultHostnameVerifier(aids);\n}\n</code></pre>\n<p>Fetch code:</p>\n<pre><code>    StringBuilder text = new StringBuilder();\n    try {\n        setupIgnoreSSLCertificate();\n    } catch (NoSuchAlgorithmException | KeyManagementException e) {\n        throw new RuntimeException(e);\n    }\n    try {\n        URL url = new URL(base + method);\n        HttpURLConnection connection = (HttpURLConnection) url.openConnection();\n        connection.setRequestMethod(&quot;GET&quot;);\n        connection.connect();\n        int code = connection.getResponseCode();\n        if(code != 200) {\n            System.out.println(&quot;Error code: &quot; + code);\n        } else {\n            Scanner scanner = new Scanner(url.openStream());\n            while(scanner.hasNext()) {\n                text.append(scanner.nextLine());\n            }\n            scanner.close();\n        }\n    } catch(Exception e) {\n        e.printStackTrace();\n    }\n</code></pre>\n"},{"tags":["java","spring-boot","google-cloud-platform","migration","google-cloud-pubsub"],"comments":[{"owner":{"account_id":7507064,"reputation":107,"user_id":5703263,"accept_rate":0,"display_name":"arjun"},"score":0,"creation_date":1699940968,"post_id":76420903,"comment_id":136590665,"body_markdown":"Can you please share me the full class of PubSubInboundChannelAdapter","body":"Can you please share me the full class of PubSubInboundChannelAdapter"}],"answers":[{"tags":[],"owner":{"account_id":13722712,"reputation":26,"user_id":9902246,"display_name":"tschi"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1690186522,"creation_date":1690186522,"answer_id":76752557,"question_id":76420903,"body_markdown":"try to add spring.cloud.gcp.pubsub.project-id properties and update to last spring-cloud-gcp-dependencies 4.5.1\r\nI have solve my migration from springboot 2.7 to 3.1 with pubsub and I didn&#39;t created PubSubTemplate, it &#39;s created by spring","title":"GCP Spring boot migration 3.x : Required a bean of type &#39;com.google.cloud.spring.pubsub.core.PubSubTemplate&#39; that could not be found","body":"<p>try to add spring.cloud.gcp.pubsub.project-id properties and update to last spring-cloud-gcp-dependencies 4.5.1\nI have solve my migration from springboot 2.7 to 3.1 with pubsub and I didn't created PubSubTemplate, it 's created by spring</p>\n"},{"tags":[],"owner":{"account_id":3750072,"reputation":33,"user_id":3128600,"accept_rate":0,"display_name":"spartans"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1690318296,"creation_date":1690318296,"answer_id":76766434,"question_id":76420903,"body_markdown":"No need to add this config spring.cloud.gcp.pubsub.project-id, \r\n\r\n&lt;version&gt;4.5.1&lt;/version&gt; alone could fix the issue.","title":"GCP Spring boot migration 3.x : Required a bean of type &#39;com.google.cloud.spring.pubsub.core.PubSubTemplate&#39; that could not be found","body":"<p>No need to add this config spring.cloud.gcp.pubsub.project-id,</p>\n<p>4.5.1 alone could fix the issue.</p>\n"}],"owner":{"account_id":4397755,"reputation":790,"user_id":3584279,"accept_rate":100,"display_name":"RVA"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":556,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76752557,"answer_count":2,"score":0,"last_activity_date":1690318296,"creation_date":1686123287,"question_id":76420903,"body_markdown":"I&#39;ve a java 17 application with many modules. I&#39;ve changed the spring boot version from 2.7.6 to 3.0.6 and I&#39;ve got the following issues appearing on the module handling PubSubs from GCP\r\n\r\n&gt; Parameter 1 of method myMessageChannelAdapter in com.controller.file.MyController required a bean of type &#39;com.google.cloud.spring.pubsub.core.PubSubTemplate&#39; that could not be found.\r\n\r\nI&#39;ve migrated the gcs dependencies as follow : \r\n\r\n    &lt;dependencyManagement&gt;\r\n        &lt;dependencies&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;com.google.cloud&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-cloud-gcp-dependencies&lt;/artifactId&gt;\r\n                &lt;version&gt;4.4.0&lt;/version&gt;\r\n                &lt;type&gt;pom&lt;/type&gt;\r\n                &lt;scope&gt;import&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n        &lt;/dependencies&gt;\r\n    &lt;/dependencyManagement&gt;\r\n    &lt;dependencies&gt;\r\n       ....\r\n    &lt;!-- gcs --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.google.cloud&lt;/groupId&gt;\r\n            &lt;artifactId&gt;google-cloud-storage&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.google.cloud&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-cloud-gcp-pubsub&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.google.cloud&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-cloud-gcp-core&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n\r\nHere is how I&#39;m creating my PubSubInboundChannelAdapter :\r\n\r\n    @Bean\r\n    public PubSubInboundChannelAdapter myMessageChannelAdapter(\r\n            @Qualifier(&quot;myChannel&quot;) MessageChannel inputChannel,\r\n            PubSubTemplate pubSubTemplate) {\r\n       return getInboundAdapter(inputChannel, pubSubTemplate, subscriptionName);\r\n    }\r\n    \r\n\r\n    @Bean\r\n    public MessageChannel myChannel() {\r\n        return new DirectChannel();\r\n    }\r\n\r\nShould I add another dependency to have a PubSubTemplate automatically autowired or should I create it ?\r\nIf I have to create it, I can&#39;t find a proper way to do it","title":"GCP Spring boot migration 3.x : Required a bean of type &#39;com.google.cloud.spring.pubsub.core.PubSubTemplate&#39; that could not be found","body":"<p>I've a java 17 application with many modules. I've changed the spring boot version from 2.7.6 to 3.0.6 and I've got the following issues appearing on the module handling PubSubs from GCP</p>\n<blockquote>\n<p>Parameter 1 of method myMessageChannelAdapter in com.controller.file.MyController required a bean of type 'com.google.cloud.spring.pubsub.core.PubSubTemplate' that could not be found.</p>\n</blockquote>\n<p>I've migrated the gcs dependencies as follow :</p>\n<pre><code>&lt;dependencyManagement&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.google.cloud&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-cloud-gcp-dependencies&lt;/artifactId&gt;\n            &lt;version&gt;4.4.0&lt;/version&gt;\n            &lt;type&gt;pom&lt;/type&gt;\n            &lt;scope&gt;import&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n&lt;/dependencyManagement&gt;\n&lt;dependencies&gt;\n   ....\n&lt;!-- gcs --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.google.cloud&lt;/groupId&gt;\n        &lt;artifactId&gt;google-cloud-storage&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.google.cloud&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-cloud-gcp-pubsub&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.google.cloud&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-cloud-gcp-core&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>Here is how I'm creating my PubSubInboundChannelAdapter :</p>\n<pre><code>@Bean\npublic PubSubInboundChannelAdapter myMessageChannelAdapter(\n        @Qualifier(&quot;myChannel&quot;) MessageChannel inputChannel,\n        PubSubTemplate pubSubTemplate) {\n   return getInboundAdapter(inputChannel, pubSubTemplate, subscriptionName);\n}\n\n\n@Bean\npublic MessageChannel myChannel() {\n    return new DirectChannel();\n}\n</code></pre>\n<p>Should I add another dependency to have a PubSubTemplate automatically autowired or should I create it ?\nIf I have to create it, I can't find a proper way to do it</p>\n"},{"tags":["python","java","sockets","stock"],"comments":[{"owner":{"account_id":448441,"reputation":3683,"user_id":6783775,"display_name":"rveerd"},"score":1,"creation_date":1690383773,"post_id":76766431,"comment_id":135346487,"body_markdown":"You should reduce your code to a [minimal, reproducible example](https://stackoverflow.com/help/minimal-reproducible-example). This will help others help you.","body":"You should reduce your code to a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal, reproducible example</a>. This will help others help you."},{"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"score":0,"creation_date":1690412881,"post_id":76766431,"comment_id":135351947,"body_markdown":"In particular, are the requests to remote services really needed to trigger the problem, or can it be reproduced with just the Python and Java programs communicating using hardcoded data?","body":"In particular, are the requests to remote services really needed to trigger the problem, or can it be reproduced with just the Python and Java programs communicating using hardcoded data?"}],"owner":{"account_id":29090695,"reputation":11,"user_id":22284639,"display_name":"IneptDwarf33872"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1690318263,"creation_date":1690318263,"question_id":76766431,"body_markdown":"I&#39;m building a program to compile and compress yfinance data for a group of stocks and put the data in a .txt file. This requires me to run a python program that sends the data to a java program over  a socket. When I run the python server and then the java client though, the program only sends some of the data, and suddenly stops after a chunk of the data is sent causing the program to hang.\r\n\r\nHere is the python server\r\n```\r\nimport socket\r\nimport yfinance as yf\r\nimport pandas as pd\r\nimport datetime as dt\r\n\r\n\r\npd.options.display.max_rows = 2000000\r\n\r\nwith socket.socket(socket.AF_INET, socket.SOCK_STREAM) as s:\r\n    s.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, 1)\r\n    s.bind((&quot;127.0.0.1&quot;, 65432))\r\n    s.listen()\r\n    conn, addr = s.accept()\r\n    with conn:\r\n        print(f&quot;Connected by {addr}&quot;)\r\n        while True:\r\n            data = conn.recv(1024)\r\n            if not data:\r\n                print(&#39;nodata&#39;)\r\n                break\r\n            stringdata = data.decode(&#39;utf-8&#39;)\r\n            print(stringdata)\r\n            if stringdata == &quot;end&quot;:\r\n                break\r\n            start1 = stringdata[0:10]\r\n            start = dt.datetime(int(start1[0:4]), int(start1[5:7]), int(start1[8:10]))\r\n            end1 = stringdata[10:20]\r\n            end = dt.datetime(int(end1[0:4]), int(end1[5:7]), int(end1[8:10]))\r\n            tticker = yf.Ticker(stringdata[20:])\r\n            print(tticker.history(start=start, end=end, interval=&quot;5m&quot;)\r\n            stringdata2 = str(data2)\r\n            print(stringdata2)\r\n            conn.sendall(bytes(stringdata2, &#39;utf-8&#39;))\r\n        s.close()\r\n```\r\nAnd here is the Java client\r\n\r\n```\r\nimport java.net.*;\r\nimport java.text.NumberFormat;\r\nimport java.text.ParseException;\r\nimport java.time.LocalDate;\r\n//import org.javatuples.*;\r\nimport java.time.LocalDateTime;\r\nimport java.time.LocalTime;\r\nimport java.time.format.DateTimeFormatter;  \r\nimport java.util.ArrayList;\r\nimport java.io.*;\r\nimport java.util.Scanner;\r\npublic class main{\r\n\r\n\tpublic static ArrayList&lt;String&gt; Tickers = new ArrayList&lt;String&gt;();\r\n\tpublic static File stockTracker = new File(&quot;StockTracking.txt&quot;);\r\n\tpublic static void main(String[] args) throws IOException, ParseException, InterruptedException{\r\n\t\t\r\n//\t\tArrayList&lt;String&gt; NYSETickers = new ArrayList&lt;String&gt;();\r\n//\t\tArrayList&lt;String&gt; NASDAQTickers = new ArrayList&lt;String&gt;();\r\n\t\tint x = 65;\r\n\t\tchar y;\r\n\t\tString z;\r\n\t\tString x1;\r\n\t\twhile(x &lt;= 90) {\r\n\t\t\ty = (char)x;\r\n\t\t\tz = String.valueOf(y);\r\n\t\t\tx1 = &quot;https://eoddata.com/stocklist/NYSE/&quot; + z + &quot;.htm&quot;;\r\n\t\t\tURL tickers = new URL(x1);\r\n\t\t\tURLConnection tCon = tickers.openConnection();\r\n\t\t\tInputStreamReader tStream = new InputStreamReader(tCon.getInputStream());\r\n\t\t\tBufferedReader tBuff = new BufferedReader(tStream);\r\n\r\n\t\t\tString oline = tBuff.readLine();\r\n\t\t\twhile(oline != null) {\r\n\t\t\t\tif(oline.contains(&quot;NYSE,&quot;)){\r\n\t\t\t\t\tString gx = oline.substring(oline.indexOf(&quot;/NYSE/&quot;) + 6, oline.indexOf(&quot;.htm&quot;));\r\n\t\t\t\t\tif(!(gx.equals(&quot;BRK.A&quot;)) &amp;&amp; !(gx.equals(&quot;EVN&quot;))) {\r\n\t\t\t\t\t//System.out.println(gx);\r\n\t\t\t\t\t//System.out.println(Integer.parseInt(oline.substring(oline.indexOf(&quot;&lt;td align=right&gt;&quot;) + 16, oline.indexOf(&quot;&lt;td align=right&gt;&quot;) + 17)));\r\n\t\t\t\t\tSystem.out.println(oline.substring(oline.indexOf(&quot;&lt;td align=right&gt;&quot;) + 17, oline.indexOf(&quot;&lt;td align=right&gt;&quot;) + 18));\r\n\t\t\t\t\tSystem.out.println(oline.substring(oline.indexOf(&quot;&lt;td align=right&gt;&quot;) + 94, oline.indexOf(&quot;&lt;/td&gt;&lt;td align=\\&quot;right\\&quot;&gt;&quot;)));\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\tif(!(Integer.parseInt(oline.substring(oline.indexOf(&quot;&lt;td align=right&gt;&quot;) + 16, oline.indexOf(&quot;&lt;td align=right&gt;&quot;) + 17)) &lt; 5 &amp;&amp; oline.substring(oline.indexOf(&quot;&lt;td align=right&gt;&quot;) + 17, oline.indexOf(&quot;&lt;td align=right&gt;&quot;) + 18).equals(&quot;.&quot;)) &amp;&amp; NumberFormat.getNumberInstance(java.util.Locale.US).parse(oline.substring(oline.indexOf(&quot;&lt;td align=right&gt;&quot;) + 94, oline.indexOf(&quot;&lt;/td&gt;&lt;td align=\\&quot;right\\&quot;&gt;&quot;))).intValue() &gt; 1000000) {\r\n\t\t\t\t\t\tTickers.add(gx);\r\n\t\t\t\t\t\tSystem.out.println(gx);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t}catch(ParseException e) {\r\n\t\t\t\t\t\tTickers.add(gx);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\toline = tBuff.readLine();\r\n\t\t\t}\r\n\t\t\ty = (char)x;\r\n\t\t\tz = String.valueOf(y);\r\n\t\t\tx1 = &quot;https://eoddata.com/stocklist/NASDAQ/&quot; + z + &quot;.htm&quot;;\r\n\t\t\tURL ntickers = new URL(x1);\r\n\t\t\tURLConnection nCon = ntickers.openConnection();\r\n\t\t\tInputStreamReader nStream = new InputStreamReader(nCon.getInputStream());\r\n\t\t\tBufferedReader nBuff = new BufferedReader(nStream);\r\n\r\n\t\t\tString nline = nBuff.readLine();\r\n\t\t\twhile(nline != null) {\r\n\t\t\t\tif(nline.contains(&quot;NASDAQ,&quot;)){\r\n\t\t\t\t\tString gx = nline.substring(nline.indexOf(&quot;/NASDAQ/&quot;) + 8, nline.indexOf(&quot;.htm&quot;));\r\n\t\t\t\t\t//if(!(gx.equals(&quot;BRK.A&quot;)) &amp;&amp; !(gx.equals(&quot;EVN&quot;))) {\r\n\t\t\t\t\t//System.out.println(gx);\r\n\t\t\t\t\t//System.out.println(Integer.parseInt(oline.substring(oline.indexOf(&quot;&lt;td align=right&gt;&quot;) + 16, oline.indexOf(&quot;&lt;td align=right&gt;&quot;) + 17)));\r\n\t\t\t\t\t//System.out.println(nline.substring(nline.indexOf(&quot;&lt;td align=right&gt;&quot;) + 17, nline.indexOf(&quot;&lt;td align=right&gt;&quot;) + 18));\r\n\t\t\t\t\t//System.out.println(oline.substring(oline.indexOf(&quot;&lt;td align=right&gt;&quot;) + 94, oline.indexOf(&quot;&lt;/td&gt;&lt;td align=\\&quot;right\\&quot;&gt;&quot;)));\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\tif(!(Integer.parseInt(nline.substring(nline.indexOf(&quot;&lt;td align=right&gt;&quot;) + 16, nline.indexOf(&quot;&lt;td align=right&gt;&quot;) + 17)) &lt; 5 &amp;&amp; nline.substring(nline.indexOf(&quot;&lt;td align=right&gt;&quot;) + 17, nline.indexOf(&quot;&lt;td align=right&gt;&quot;) + 18).equals(&quot;.&quot;)) &amp;&amp; NumberFormat.getNumberInstance(java.util.Locale.US).parse(nline.substring(nline.indexOf(&quot;&lt;td align=right&gt;&quot;) + 94, nline.indexOf(&quot;&lt;/td&gt;&lt;td align=\\&quot;right\\&quot;&gt;&quot;))).intValue() &gt; 1000000) {\r\n\t\t\t\t\t\tTickers.add(gx);\r\n\t\t\t\t\t\tSystem.out.println(gx);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t}catch(ParseException e) {\r\n\t\t\t\t\t\tTickers.add(gx);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t//}\r\n\t\t\t\tnline = nBuff.readLine();\r\n\t\t\t}\r\n\t\t\tx++;\r\n\t\t}\r\n\t\tfor(String tick:Tickers) {\r\n\t\t\tSystem.out.println(tick);\r\n\t\t}\r\n\t\t\r\n\t\t\t\r\n\t\t\r\n\t\t\r\n\t\t\r\n\t\t\tScanner console = new Scanner(System.in);\r\n\t\t\t\r\n\t\t    Socket transmission = new Socket(&quot;localhost&quot;, 65432);\r\n\t\t    System.out.println(&quot;Socket Created&quot;);\r\n\t\t    \r\n\t\t    Reader reader = new InputStreamReader(transmission.getInputStream());\r\n\t\t    BufferedReader in = new BufferedReader(reader);\r\n\t\t    \r\n\t\t    //InputStream in3 = transmission.getInputStream();\r\n\t\t    \r\n\t\t    Writer writer = new OutputStreamWriter(transmission.getOutputStream());\r\n\t\t    BufferedWriter out = new BufferedWriter(writer);\r\n\t\t    \r\n\t\t    FileWriter dWriter = new FileWriter(&quot;StockTracking.txt&quot;);\r\n\t\t    initData(in, out);\r\n\t\t    out.write(&quot;end&quot;);\r\n\t\t    transmission.close();\r\n\t\t    System.out.println(&quot;Socket Closed&quot;);\r\npublic static boolean initData(BufferedReader in, BufferedWriter out) throws IOException, InterruptedException {\r\n\t\tLocalDate edate = LocalDate.now().minusDays(1);\r\n\t\tLocalDate sdate = LocalDate.now().minusDays(40);\r\n\t\tString ssdate = sdate.format(DateTimeFormatter.ISO_LOCAL_DATE);\r\n\t\tString sedate = edate.format(DateTimeFormatter.ISO_LOCAL_DATE);\r\n\t\t\r\n\t\tPrintWriter pw =  new PrintWriter(new FileWriter(stockTracker));\r\n\t\tfor(String ticker:Tickers) {\r\n\t\tSystem.out.println(ticker);\r\n\t\t out.write(ssdate + sedate + ticker);\r\n\t\t out.flush();\r\n\t\t Thread.sleep(10);\r\n\t\t //System.out.println(&quot;Kill&quot; + in.readLine());\r\n\t\t //System.out.println(&quot;Kill&quot; + in.readLine());\r\n\t\t pw.println(ticker);\r\n\t\t String x;\r\n\t\t while(true) {\r\n\t\t\t //System.out.println(i);\r\n\t\t\t x = in.readLine();\r\n\t\t\t System.out.println(x);\r\n\t\t\t if(x.length() &gt; 25 &amp;&amp; x.substring(0, 1).equals(&quot;2&quot;)) {\r\n\t\t\t\t pw.println(x.substring(5, 7) + x.substring(8, 10) + x.substring(11, 13) + x.substring(14, 16) + x.substring(27, x.indexOf(&quot;.&quot;) + 2));\r\n\t\t\t\t if(x.substring(5, 7).equals(&quot;07&quot;)) {\r\n\t\t\t\t if(x.substring(8, 10).equals(&quot;21&quot;)) {\r\n\t\t\t\t\t if(x.substring(11, 13).equals(&quot;15&quot;)) {\r\n\t\t\t\t\t\t if(x.substring(14, 16).equals(&quot;55&quot;)) {\r\n\t\t\t\t\t\t\t break;\r\n\t\t\t\t\t\t }\r\n\t\t\t\t\t }\t\r\n\t\t\t\t }\r\n\t\t\t\t }\r\n\t\t\t }\r\n\t\t }\r\n\t\t //System.out.println(&quot;Kill&quot; + in.readLine());\r\n\t\t pw.flush();\r\n\t\t}\r\n\t\tpw.close();\r\n\t\treturn false;\r\n\t}\r\n}\r\n```\r\n\r\n\r\n","title":"Is there some data limit preventing all of this data from being sent? Any help would be appreciated! :)","body":"<p>I'm building a program to compile and compress yfinance data for a group of stocks and put the data in a .txt file. This requires me to run a python program that sends the data to a java program over  a socket. When I run the python server and then the java client though, the program only sends some of the data, and suddenly stops after a chunk of the data is sent causing the program to hang.</p>\n<p>Here is the python server</p>\n<pre><code>import socket\nimport yfinance as yf\nimport pandas as pd\nimport datetime as dt\n\n\npd.options.display.max_rows = 2000000\n\nwith socket.socket(socket.AF_INET, socket.SOCK_STREAM) as s:\n    s.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, 1)\n    s.bind((&quot;127.0.0.1&quot;, 65432))\n    s.listen()\n    conn, addr = s.accept()\n    with conn:\n        print(f&quot;Connected by {addr}&quot;)\n        while True:\n            data = conn.recv(1024)\n            if not data:\n                print('nodata')\n                break\n            stringdata = data.decode('utf-8')\n            print(stringdata)\n            if stringdata == &quot;end&quot;:\n                break\n            start1 = stringdata[0:10]\n            start = dt.datetime(int(start1[0:4]), int(start1[5:7]), int(start1[8:10]))\n            end1 = stringdata[10:20]\n            end = dt.datetime(int(end1[0:4]), int(end1[5:7]), int(end1[8:10]))\n            tticker = yf.Ticker(stringdata[20:])\n            print(tticker.history(start=start, end=end, interval=&quot;5m&quot;)\n            stringdata2 = str(data2)\n            print(stringdata2)\n            conn.sendall(bytes(stringdata2, 'utf-8'))\n        s.close()\n</code></pre>\n<p>And here is the Java client</p>\n<pre><code>import java.net.*;\nimport java.text.NumberFormat;\nimport java.text.ParseException;\nimport java.time.LocalDate;\n//import org.javatuples.*;\nimport java.time.LocalDateTime;\nimport java.time.LocalTime;\nimport java.time.format.DateTimeFormatter;  \nimport java.util.ArrayList;\nimport java.io.*;\nimport java.util.Scanner;\npublic class main{\n\n    public static ArrayList&lt;String&gt; Tickers = new ArrayList&lt;String&gt;();\n    public static File stockTracker = new File(&quot;StockTracking.txt&quot;);\n    public static void main(String[] args) throws IOException, ParseException, InterruptedException{\n        \n//      ArrayList&lt;String&gt; NYSETickers = new ArrayList&lt;String&gt;();\n//      ArrayList&lt;String&gt; NASDAQTickers = new ArrayList&lt;String&gt;();\n        int x = 65;\n        char y;\n        String z;\n        String x1;\n        while(x &lt;= 90) {\n            y = (char)x;\n            z = String.valueOf(y);\n            x1 = &quot;https://eoddata.com/stocklist/NYSE/&quot; + z + &quot;.htm&quot;;\n            URL tickers = new URL(x1);\n            URLConnection tCon = tickers.openConnection();\n            InputStreamReader tStream = new InputStreamReader(tCon.getInputStream());\n            BufferedReader tBuff = new BufferedReader(tStream);\n\n            String oline = tBuff.readLine();\n            while(oline != null) {\n                if(oline.contains(&quot;NYSE,&quot;)){\n                    String gx = oline.substring(oline.indexOf(&quot;/NYSE/&quot;) + 6, oline.indexOf(&quot;.htm&quot;));\n                    if(!(gx.equals(&quot;BRK.A&quot;)) &amp;&amp; !(gx.equals(&quot;EVN&quot;))) {\n                    //System.out.println(gx);\n                    //System.out.println(Integer.parseInt(oline.substring(oline.indexOf(&quot;&lt;td align=right&gt;&quot;) + 16, oline.indexOf(&quot;&lt;td align=right&gt;&quot;) + 17)));\n                    System.out.println(oline.substring(oline.indexOf(&quot;&lt;td align=right&gt;&quot;) + 17, oline.indexOf(&quot;&lt;td align=right&gt;&quot;) + 18));\n                    System.out.println(oline.substring(oline.indexOf(&quot;&lt;td align=right&gt;&quot;) + 94, oline.indexOf(&quot;&lt;/td&gt;&lt;td align=\\&quot;right\\&quot;&gt;&quot;)));\n                    try {\n                    if(!(Integer.parseInt(oline.substring(oline.indexOf(&quot;&lt;td align=right&gt;&quot;) + 16, oline.indexOf(&quot;&lt;td align=right&gt;&quot;) + 17)) &lt; 5 &amp;&amp; oline.substring(oline.indexOf(&quot;&lt;td align=right&gt;&quot;) + 17, oline.indexOf(&quot;&lt;td align=right&gt;&quot;) + 18).equals(&quot;.&quot;)) &amp;&amp; NumberFormat.getNumberInstance(java.util.Locale.US).parse(oline.substring(oline.indexOf(&quot;&lt;td align=right&gt;&quot;) + 94, oline.indexOf(&quot;&lt;/td&gt;&lt;td align=\\&quot;right\\&quot;&gt;&quot;))).intValue() &gt; 1000000) {\n                        Tickers.add(gx);\n                        System.out.println(gx);\n                    }\n                    }catch(ParseException e) {\n                        Tickers.add(gx);\n                    }\n                    }\n                }\n                oline = tBuff.readLine();\n            }\n            y = (char)x;\n            z = String.valueOf(y);\n            x1 = &quot;https://eoddata.com/stocklist/NASDAQ/&quot; + z + &quot;.htm&quot;;\n            URL ntickers = new URL(x1);\n            URLConnection nCon = ntickers.openConnection();\n            InputStreamReader nStream = new InputStreamReader(nCon.getInputStream());\n            BufferedReader nBuff = new BufferedReader(nStream);\n\n            String nline = nBuff.readLine();\n            while(nline != null) {\n                if(nline.contains(&quot;NASDAQ,&quot;)){\n                    String gx = nline.substring(nline.indexOf(&quot;/NASDAQ/&quot;) + 8, nline.indexOf(&quot;.htm&quot;));\n                    //if(!(gx.equals(&quot;BRK.A&quot;)) &amp;&amp; !(gx.equals(&quot;EVN&quot;))) {\n                    //System.out.println(gx);\n                    //System.out.println(Integer.parseInt(oline.substring(oline.indexOf(&quot;&lt;td align=right&gt;&quot;) + 16, oline.indexOf(&quot;&lt;td align=right&gt;&quot;) + 17)));\n                    //System.out.println(nline.substring(nline.indexOf(&quot;&lt;td align=right&gt;&quot;) + 17, nline.indexOf(&quot;&lt;td align=right&gt;&quot;) + 18));\n                    //System.out.println(oline.substring(oline.indexOf(&quot;&lt;td align=right&gt;&quot;) + 94, oline.indexOf(&quot;&lt;/td&gt;&lt;td align=\\&quot;right\\&quot;&gt;&quot;)));\n                    try {\n                    if(!(Integer.parseInt(nline.substring(nline.indexOf(&quot;&lt;td align=right&gt;&quot;) + 16, nline.indexOf(&quot;&lt;td align=right&gt;&quot;) + 17)) &lt; 5 &amp;&amp; nline.substring(nline.indexOf(&quot;&lt;td align=right&gt;&quot;) + 17, nline.indexOf(&quot;&lt;td align=right&gt;&quot;) + 18).equals(&quot;.&quot;)) &amp;&amp; NumberFormat.getNumberInstance(java.util.Locale.US).parse(nline.substring(nline.indexOf(&quot;&lt;td align=right&gt;&quot;) + 94, nline.indexOf(&quot;&lt;/td&gt;&lt;td align=\\&quot;right\\&quot;&gt;&quot;))).intValue() &gt; 1000000) {\n                        Tickers.add(gx);\n                        System.out.println(gx);\n                    }\n                    }catch(ParseException e) {\n                        Tickers.add(gx);\n                    }\n                    }\n                //}\n                nline = nBuff.readLine();\n            }\n            x++;\n        }\n        for(String tick:Tickers) {\n            System.out.println(tick);\n        }\n        \n            \n        \n        \n        \n            Scanner console = new Scanner(System.in);\n            \n            Socket transmission = new Socket(&quot;localhost&quot;, 65432);\n            System.out.println(&quot;Socket Created&quot;);\n            \n            Reader reader = new InputStreamReader(transmission.getInputStream());\n            BufferedReader in = new BufferedReader(reader);\n            \n            //InputStream in3 = transmission.getInputStream();\n            \n            Writer writer = new OutputStreamWriter(transmission.getOutputStream());\n            BufferedWriter out = new BufferedWriter(writer);\n            \n            FileWriter dWriter = new FileWriter(&quot;StockTracking.txt&quot;);\n            initData(in, out);\n            out.write(&quot;end&quot;);\n            transmission.close();\n            System.out.println(&quot;Socket Closed&quot;);\npublic static boolean initData(BufferedReader in, BufferedWriter out) throws IOException, InterruptedException {\n        LocalDate edate = LocalDate.now().minusDays(1);\n        LocalDate sdate = LocalDate.now().minusDays(40);\n        String ssdate = sdate.format(DateTimeFormatter.ISO_LOCAL_DATE);\n        String sedate = edate.format(DateTimeFormatter.ISO_LOCAL_DATE);\n        \n        PrintWriter pw =  new PrintWriter(new FileWriter(stockTracker));\n        for(String ticker:Tickers) {\n        System.out.println(ticker);\n         out.write(ssdate + sedate + ticker);\n         out.flush();\n         Thread.sleep(10);\n         //System.out.println(&quot;Kill&quot; + in.readLine());\n         //System.out.println(&quot;Kill&quot; + in.readLine());\n         pw.println(ticker);\n         String x;\n         while(true) {\n             //System.out.println(i);\n             x = in.readLine();\n             System.out.println(x);\n             if(x.length() &gt; 25 &amp;&amp; x.substring(0, 1).equals(&quot;2&quot;)) {\n                 pw.println(x.substring(5, 7) + x.substring(8, 10) + x.substring(11, 13) + x.substring(14, 16) + x.substring(27, x.indexOf(&quot;.&quot;) + 2));\n                 if(x.substring(5, 7).equals(&quot;07&quot;)) {\n                 if(x.substring(8, 10).equals(&quot;21&quot;)) {\n                     if(x.substring(11, 13).equals(&quot;15&quot;)) {\n                         if(x.substring(14, 16).equals(&quot;55&quot;)) {\n                             break;\n                         }\n                     }  \n                 }\n                 }\n             }\n         }\n         //System.out.println(&quot;Kill&quot; + in.readLine());\n         pw.flush();\n        }\n        pw.close();\n        return false;\n    }\n}\n</code></pre>\n"},{"tags":["java","spring-boot","spring-mvc","mockmvc"],"answers":[{"comments":[{"owner":{"account_id":10642398,"reputation":6164,"user_id":7836976,"accept_rate":95,"display_name":"runnerpaul"},"score":0,"creation_date":1690400459,"post_id":76766421,"comment_id":135350051,"body_markdown":"That makes sense. I only ask as I thought the specification of the Accept header on getPriceV2 and the wildcard header on getPrice would allow for the correct routing. It works as I wish when I submit a request through Postman. Just not in my test using MockMvc.","body":"That makes sense. I only ask as I thought the specification of the Accept header on getPriceV2 and the wildcard header on getPrice would allow for the correct routing. It works as I wish when I submit a request through Postman. Just not in my test using MockMvc."}],"tags":[],"owner":{"account_id":5475023,"reputation":90,"user_id":4353227,"accept_rate":100,"display_name":"Suresh Kumar"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690318160,"creation_date":1690318160,"answer_id":76766421,"question_id":76766264,"body_markdown":"using different url only it is possible. means the @postmapping, value should be unique for each method.\r\n\r\n@postmapping(value=&quot;/api/price&quot;)  cannot be used with another post mapping. In your case, you mapped both post methods with same url.  change one value to differnt url apart from &quot;url/price&quot;, it will work","title":"MockMvc gets Ambiguous handler methods","body":"<p>using different url only it is possible. means the @postmapping, value should be unique for each method.</p>\n<p>@postmapping(value=&quot;/api/price&quot;)  cannot be used with another post mapping. In your case, you mapped both post methods with same url.  change one value to differnt url apart from &quot;url/price&quot;, it will work</p>\n"}],"owner":{"account_id":10642398,"reputation":6164,"user_id":7836976,"accept_rate":95,"display_name":"runnerpaul"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":20,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1690318160,"creation_date":1690316439,"question_id":76766264,"body_markdown":"I have these controllers:\r\n\r\n```Java\r\n@PostMapping(\r\n  value = Endpoints.GET_PRICE,\r\n    produces = MediaType.APPLICATION_JSON_VALUE,\r\n    headers = {&quot;Accept=*/*&quot;})\r\npublic ResponseEntity&lt;PricesResponse&gt; getPrice(\r\n  @RequestBody @Validated({PriceRequestValidationCheck.class}) PriceRequest priceRequest) {\r\n  PricesResponse defaultPriceResponse =\r\n    priceService.generateAllPricesForWeb(priceRequest, Optional.empty());\r\n  return ResponseEntity.ok(defaultPriceResponse);\r\n}\r\n\r\n@PostMapping(\r\n  value = Endpoints.GET_PRICE,\r\n    produces = MediaType.APPLICATION_JSON_VALUE,\r\n    headers = {&quot;Accept=application/vnd.price.v2+json&quot;})\r\npublic ResponseEntity&lt;PricesResponse&gt; getPriceV2(\r\n  @RequestBody @Validated({PriceRequestValidationCheckV2.class}) PriceRequest priceRequest, HttpServletRequest request) {\r\n  PricesResponse defaultPriceResponse =\r\n    priceService.generateAllPricesForWeb(\r\n      priceRequest,\r\n        Optional.of(\r\n          request\r\n            .getHeader(&quot;Accept&quot;)\r\n            .replace(&quot;application/vnd.price.v&quot;, &quot;&quot;)\r\n            .replace(&quot;+json&quot;, &quot;&quot;)));\r\nreturn ResponseEntity.ok(defaultPriceResponse);\r\n}\r\n```\r\n\r\nWhen I execute a test which runs:\r\n\r\n```Java\r\nprivate MvcResult callPriceEndPoint(MediaType acceptHeader) throws Exception {\r\n  return mockMvc\r\n    .perform(\r\n      MockMvcRequestBuilders.post(GET_PRICE_PATH)\r\n        .content(getJsonString(getPriceRequest()))\r\n        .contentType(MediaType.APPLICATION_JSON)\r\n        .accept(acceptHeader))\r\n          .andExpect(status().is5xxServerError())\r\n          .andReturn();\r\n}\r\n```\r\n\r\nIt gices this error:\r\n\r\n&gt;org.springframework.web.util.NestedServletException: Request processing failed; nested exception is java.lang.IllegalStateException: Ambiguous handler methods mapped for &#39;/api/price&#39;: {public...\r\n\r\n`Endpoints.GET_PRICE` is `/api/price`.\r\n\r\nI understand that `callPriceEndPoint` doesn&#39;t know which controller to use but how do I resolve this?","title":"MockMvc gets Ambiguous handler methods","body":"<p>I have these controllers:</p>\n<pre><code>@PostMapping(\n  value = Endpoints.GET_PRICE,\n    produces = MediaType.APPLICATION_JSON_VALUE,\n    headers = {&quot;Accept=*/*&quot;})\npublic ResponseEntity&lt;PricesResponse&gt; getPrice(\n  @RequestBody @Validated({PriceRequestValidationCheck.class}) PriceRequest priceRequest) {\n  PricesResponse defaultPriceResponse =\n    priceService.generateAllPricesForWeb(priceRequest, Optional.empty());\n  return ResponseEntity.ok(defaultPriceResponse);\n}\n\n@PostMapping(\n  value = Endpoints.GET_PRICE,\n    produces = MediaType.APPLICATION_JSON_VALUE,\n    headers = {&quot;Accept=application/vnd.price.v2+json&quot;})\npublic ResponseEntity&lt;PricesResponse&gt; getPriceV2(\n  @RequestBody @Validated({PriceRequestValidationCheckV2.class}) PriceRequest priceRequest, HttpServletRequest request) {\n  PricesResponse defaultPriceResponse =\n    priceService.generateAllPricesForWeb(\n      priceRequest,\n        Optional.of(\n          request\n            .getHeader(&quot;Accept&quot;)\n            .replace(&quot;application/vnd.price.v&quot;, &quot;&quot;)\n            .replace(&quot;+json&quot;, &quot;&quot;)));\nreturn ResponseEntity.ok(defaultPriceResponse);\n}\n</code></pre>\n<p>When I execute a test which runs:</p>\n<pre><code>private MvcResult callPriceEndPoint(MediaType acceptHeader) throws Exception {\n  return mockMvc\n    .perform(\n      MockMvcRequestBuilders.post(GET_PRICE_PATH)\n        .content(getJsonString(getPriceRequest()))\n        .contentType(MediaType.APPLICATION_JSON)\n        .accept(acceptHeader))\n          .andExpect(status().is5xxServerError())\n          .andReturn();\n}\n</code></pre>\n<p>It gices this error:</p>\n<blockquote>\n<p>org.springframework.web.util.NestedServletException: Request processing failed; nested exception is java.lang.IllegalStateException: Ambiguous handler methods mapped for '/api/price': {public...</p>\n</blockquote>\n<p><code>Endpoints.GET_PRICE</code> is <code>/api/price</code>.</p>\n<p>I understand that <code>callPriceEndPoint</code> doesn't know which controller to use but how do I resolve this?</p>\n"},{"tags":["java","spring","visual-studio-code","terminal"],"comments":[{"owner":{"account_id":15638847,"reputation":105,"user_id":11282873,"display_name":"Julian Dave"},"score":0,"creation_date":1649966029,"post_id":62280290,"comment_id":127013819,"body_markdown":"I am also irritated by vscode&#39;s monochromatic logging output. \nHave you found a solution already?","body":"I am also irritated by vscode&#39;s monochromatic logging output.  Have you found a solution already?"}],"answers":[{"comments":[{"owner":{"account_id":15638847,"reputation":105,"user_id":11282873,"display_name":"Julian Dave"},"score":0,"creation_date":1650304615,"post_id":67126012,"comment_id":127078542,"body_markdown":"I added the file to src and addressed it in the xml via     &lt;context:property-placeholder location=&quot;classpath:application.properties&quot;/&gt;\nI still don&#39;t see any colors...","body":"I added the file to src and addressed it in the xml via     &lt;context:property-placeholder location=&quot;classpath:application.properties&quot;/&gt; I still don&#39;t see any colors..."},{"owner":{"account_id":22443986,"reputation":2042,"user_id":16648127,"display_name":"Enfield Li"},"score":0,"creation_date":1652889543,"post_id":67126012,"comment_id":127717944,"body_markdown":"This solution works for my initializer spring boot project","body":"This solution works for my initializer spring boot project"}],"tags":[],"owner":{"account_id":17005042,"reputation":161,"user_id":12301426,"display_name":"Novocaine"},"comment_count":2,"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1618579151,"creation_date":1618579151,"answer_id":67126012,"question_id":62280290,"body_markdown":"add `spring.output.ansi.enabled=always` into your project `application.properties`\r\n[enable vscode spring boot logs colors][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/euJ4f.png","title":"Provide Color Theme to the `Java Process Console` in the Terminal of VSCode while running a Spring Project","body":"<p>add <code>spring.output.ansi.enabled=always</code> into your project <code>application.properties</code>\n<a href=\"https://i.stack.imgur.com/euJ4f.png\" rel=\"noreferrer\">enable vscode spring boot logs colors</a></p>\n"},{"tags":[],"owner":{"account_id":13107349,"reputation":11,"user_id":9855009,"display_name":"Grover Rendich"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1690318049,"creation_date":1690318049,"answer_id":76766410,"question_id":62280290,"body_markdown":"this works for me \r\n\r\n&gt; spring.output.ansi.enabled=always","title":"Provide Color Theme to the `Java Process Console` in the Terminal of VSCode while running a Spring Project","body":"<p>this works for me</p>\n<blockquote>\n<p>spring.output.ansi.enabled=always</p>\n</blockquote>\n"}],"owner":{"account_id":10073864,"reputation":2288,"user_id":7446645,"display_name":"RICHARD ABRAHAM"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2049,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"answer_count":2,"score":6,"last_activity_date":1690318049,"creation_date":1591697941,"question_id":62280290,"body_markdown":"Is there a way to add colours/themes to the output generated in the `Java Process Console` which is a result of running a Spring Application from the VSCode `Spring-Boot-Dashboard`.\r\n\r\nI am looking for a targetted solution for the `Java Process Console` that is outputted on the integrated `Terminal`. I am using `Git Bash` as my integrated terminal.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/SDRbJ.png","title":"Provide Color Theme to the `Java Process Console` in the Terminal of VSCode while running a Spring Project","body":"<p>Is there a way to add colours/themes to the output generated in the <code>Java Process Console</code> which is a result of running a Spring Application from the VSCode <code>Spring-Boot-Dashboard</code>.</p>\n\n<p>I am looking for a targetted solution for the <code>Java Process Console</code> that is outputted on the integrated <code>Terminal</code>. I am using <code>Git Bash</code> as my integrated terminal.</p>\n\n<p><a href=\"https://i.stack.imgur.com/SDRbJ.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/SDRbJ.png\" alt=\"enter image description here\"></a></p>\n"},{"tags":["java","paypal","ide"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1683177864,"post_id":76169001,"comment_id":134327061,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."}],"answers":[{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1690890866,"post_id":76766406,"comment_id":135413514,"body_markdown":"As it’s currently written, your answer is unclear. Please [edit] to add additional details that will help others understand how this addresses the question asked. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"As it’s currently written, your answer is unclear. Please <a href=\"https://stackoverflow.com/posts/76766406/edit\">edit</a> to add additional details that will help others understand how this addresses the question asked. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":8321718,"reputation":1,"user_id":6253160,"display_name":"Asim Afzal"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690318004,"creation_date":1690318004,"answer_id":76766406,"question_id":76169001,"body_markdown":"you have nothing to do here it will automatically pick your application id. you just have to add your application id in paypal developer sandbox account in login with paypal advanced settings.","title":"Paypal checkout integration in android app","body":"<p>you have nothing to do here it will automatically pick your application id. you just have to add your application id in paypal developer sandbox account in login with paypal advanced settings.</p>\n"}],"owner":{"account_id":28499627,"reputation":1,"user_id":21811012,"display_name":"Softwer Developer"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":55,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1690318004,"creation_date":1683164006,"question_id":76169001,"body_markdown":"I&#39;m trying to integrate paypal checkout in my android app. In this, I don&#39;t know how to put my application ID in the part:\r\n\r\nBuildConfig.APPLICATION_ID + &quot;://paypalpay&quot;,\r\n\r\nCould someone help me?\r\n\r\nPayPalCheckout.setConfig(new CheckoutConfig(\r\n                this,\r\n                YOUR_CLIENT_ID,\r\n                Environment.SANDBOX,\r\n                BuildConfig.APPLICATION_ID + &quot;://paypalpay&quot;,\r\n                CurrencyCode.USD,\r\n                UserAction.PAY_NOW\r\n        ));","title":"Paypal checkout integration in android app","body":"<p>I'm trying to integrate paypal checkout in my android app. In this, I don't know how to put my application ID in the part:</p>\n<p>BuildConfig.APPLICATION_ID + &quot;://paypalpay&quot;,</p>\n<p>Could someone help me?</p>\n<p>PayPalCheckout.setConfig(new CheckoutConfig(\nthis,\nYOUR_CLIENT_ID,\nEnvironment.SANDBOX,\nBuildConfig.APPLICATION_ID + &quot;://paypalpay&quot;,\nCurrencyCode.USD,\nUserAction.PAY_NOW\n));</p>\n"},{"tags":["java","domain-driven-design","policy","specifications"],"comments":[{"owner":{"account_id":1580843,"reputation":13479,"user_id":1466267,"accept_rate":91,"display_name":"SpaceTrucker"},"score":0,"creation_date":1357496054,"post_id":14185139,"comment_id":19660954,"body_markdown":"I would say that specifications are targeted on describing features of instances and policies are about describing actions. But I&#39;m really not sure about, although I also read the book.","body":"I would say that specifications are targeted on describing features of instances and policies are about describing actions. But I&#39;m really not sure about, although I also read the book."}],"answers":[{"comments":[{"owner":{"account_id":132538,"reputation":19447,"user_id":333288,"accept_rate":97,"display_name":"MUG4N"},"score":2,"creation_date":1357505927,"post_id":14185853,"comment_id":19663941,"body_markdown":"Let me get this right. A policy contains algorithms. Specifications are predicates and therefore limited to boolean checks. Did I get this right? (to put it simple)","body":"Let me get this right. A policy contains algorithms. Specifications are predicates and therefore limited to boolean checks. Did I get this right? (to put it simple)"},{"owner":{"account_id":87202,"reputation":17573,"user_id":241986,"accept_rate":80,"display_name":"Boris Treukhov"},"score":3,"creation_date":1357506403,"post_id":14185853,"comment_id":19664087,"body_markdown":"@MUG4N yes - that is the difference between them, but the coolest feature of SPECIFICATION is composition, and the feature of POLICY is that the code that contains the business rules is not scattered (encapsulation) I.e. it&#39;s ok to have a lot of the specs(and their combinations) all over the place, but it&#39;s not ok to have a lot of policies without some centralized place where you can find them.","body":"@MUG4N yes - that is the difference between them, but the coolest feature of SPECIFICATION is composition, and the feature of POLICY is that the code that contains the business rules is not scattered (encapsulation) I.e. it&#39;s ok to have a lot of the specs(and their combinations) all over the place, but it&#39;s not ok to have a lot of policies without some centralized place where you can find them."},{"owner":{"account_id":1849211,"reputation":4812,"user_id":1676134,"accept_rate":90,"display_name":"E-Bat"},"score":5,"creation_date":1422656457,"post_id":14185853,"comment_id":44851909,"body_markdown":"@BorisTreukhov impresive explanation","body":"@BorisTreukhov impresive explanation"}],"tags":[],"owner":{"account_id":87202,"reputation":17573,"user_id":241986,"accept_rate":80,"display_name":"Boris Treukhov"},"comment_count":3,"down_vote_count":0,"up_vote_count":73,"is_accepted":true,"score":73,"last_activity_date":1690317909,"creation_date":1357500420,"answer_id":14185853,"question_id":14185139,"body_markdown":"The main idea behind SPECIFICATION is that it&#39;s a predicate, which often implies using logical operators with it\r\n\r\n&gt; SPECIFICATION is an adaptation of an established formalism (Eric Evans DDD, p. 274)\r\n\r\nfor example we can say that the box is red, i.e. satisfies some RedSpecification. We can declare some GreenSpecification, and even a composite RedOrGreenSpecification.\r\nIf we have some advanced framework that supports logical operations for specifications it can be something like \r\n\r\n    BoxSpecification redBoxSpec = BoxSpecification.forColor(BoxColor.RED);\r\n    BoxSpecification greenBoxSpec = BoxSpecification.forColor(BoxColor.GREEN);\r\n    BoxSpecification redOrGreenBoxSpec = redBoxSpec.or(greenBoxSpec);\r\n\r\nthen we can use the specification for example to query all red/green boxes from some repository:\r\n    \r\n    Collection&lt;Box&gt; boxes = boxRepository.findAll(redOrGreenBoxSpec);\r\n\r\nAs for POLICY - it&#39;s a variant of STRATEGY pattern, but its main purpose is encapsulating the business rules is some declarative form.\r\n\r\nTechnically - it&#39;s not always a direct implementation of STRATEGY - in first stages it can be just a separate class(as it&#39;s shown in the first chapter of the [*blue book*][1]), but it can be easily extended later \r\n\r\n&gt; *Policy* is another name for the design  pattern known as STRATEGY It is usually motivated by the need to substitute different rules, which is not needed here, as far we know. But the concept we are trying to capture does fit the *meaning* of a policy, which is an equally important motivation in domain-driven-design \r\n\r\n    \r\nFor example we pack presents in yellow boxes in January, and in red boxes in February\r\n\r\n\r\n    public class Box{\r\n      public BoxColor getColor(){}\r\n      public void recolor(BoxColor color){} \r\n    }\r\n    \r\n    public class BoxFactory{\r\n        public Box createDefaultBox(SomeDate date){\r\n             NewBoxPolicy boxPolicy = PolicyRegistry.getNewBoxPolicyForDate(date);\r\n             Box box = new Box();\r\n             boxPolicy.prepareBox(box);\r\n             return box;\r\n       }\r\n    }\r\n    public interface NewBoxPolicy{\r\n       void prepareBox(Box box);\r\n    }\r\n    public class FebruaryNewBoxPolicy implements NewBoxPolicy{\r\n        public void prepareBox(Box box) { box.recolor(BoxColor.RED}; }\r\n    }\r\n    public class JanuaryNewBoxPolicy implements NewBoxPolicy{\r\n        public void prepareBox(Box box) { box.recolor(BoxColor.YELLOW}; }\r\n    }\r\n    public class PolicyRegistry{\r\n       public static NewBoxPolicy getNewBoxPolicyForDate(SomeDate date){\r\n          switch (date.month()){\r\n             case SomeMonth.JANUARY: return JANUARY_NEW_BOX_POLICY;\r\n             case SomeMonth.FEBRUARY: return FEBRUARY_NEW_BOX_POLICY;\r\n             default: throw new AssertionError();\r\n          }\r\n    }\r\n\r\nIt&#39;s important to understand that POLICY can encapsulate actions, while SPECIFICATION only describes the properties of an object(these properties can both satisfy or DO NOT satisfy the business requirements). Some validation POLICY can use SPECIFICATIONs to check that the requirements are satisfied, of course.\r\n\r\nSo you can have many different SPECIFICATION instances in your project, and they can describe both the valid and invalid objects from the business point of view. Actually, specifications can make no sense at all: for example if you have a product searching site, user can specify a request to search for a product named &quot;XBOX&quot;, but with the vendor name &quot;Sony&quot;, if the knowledge that only the specific vendors can produce the specific products is not captured in your model.      \r\n\r\nThe important aspect of POLICY is that its intent is to encapsulate the *actual* business rules(so the code is not scattered the different parts of the project), so when the rules change you can easily find the corresponding class. So you can have many SPECIFICATIONs in your project, but a manageable number of POLICIES, and those POLICIES should be easy to find and to change. \r\n\r\nP.S. please note that this post is just an example and not a license to do over-engineering, of course you should use the simplest design possible, it&#39;s a matter of common sense.  \r\n\r\n\r\n  [1]: https://www.goodreads.com/book/show/179133.Domain_Driven_Design","title":"Difference between specification and a policy?","body":"<p>The main idea behind SPECIFICATION is that it's a predicate, which often implies using logical operators with it</p>\n<blockquote>\n<p>SPECIFICATION is an adaptation of an established formalism (Eric Evans DDD, p. 274)</p>\n</blockquote>\n<p>for example we can say that the box is red, i.e. satisfies some RedSpecification. We can declare some GreenSpecification, and even a composite RedOrGreenSpecification.\nIf we have some advanced framework that supports logical operations for specifications it can be something like</p>\n<pre><code>BoxSpecification redBoxSpec = BoxSpecification.forColor(BoxColor.RED);\nBoxSpecification greenBoxSpec = BoxSpecification.forColor(BoxColor.GREEN);\nBoxSpecification redOrGreenBoxSpec = redBoxSpec.or(greenBoxSpec);\n</code></pre>\n<p>then we can use the specification for example to query all red/green boxes from some repository:</p>\n<pre><code>Collection&lt;Box&gt; boxes = boxRepository.findAll(redOrGreenBoxSpec);\n</code></pre>\n<p>As for POLICY - it's a variant of STRATEGY pattern, but its main purpose is encapsulating the business rules is some declarative form.</p>\n<p>Technically - it's not always a direct implementation of STRATEGY - in first stages it can be just a separate class(as it's shown in the first chapter of the <a href=\"https://www.goodreads.com/book/show/179133.Domain_Driven_Design\" rel=\"nofollow noreferrer\"><em>blue book</em></a>), but it can be easily extended later</p>\n<blockquote>\n<p><em>Policy</em> is another name for the design  pattern known as STRATEGY It is usually motivated by the need to substitute different rules, which is not needed here, as far we know. But the concept we are trying to capture does fit the <em>meaning</em> of a policy, which is an equally important motivation in domain-driven-design</p>\n</blockquote>\n<p>For example we pack presents in yellow boxes in January, and in red boxes in February</p>\n<pre><code>public class Box{\n  public BoxColor getColor(){}\n  public void recolor(BoxColor color){} \n}\n\npublic class BoxFactory{\n    public Box createDefaultBox(SomeDate date){\n         NewBoxPolicy boxPolicy = PolicyRegistry.getNewBoxPolicyForDate(date);\n         Box box = new Box();\n         boxPolicy.prepareBox(box);\n         return box;\n   }\n}\npublic interface NewBoxPolicy{\n   void prepareBox(Box box);\n}\npublic class FebruaryNewBoxPolicy implements NewBoxPolicy{\n    public void prepareBox(Box box) { box.recolor(BoxColor.RED}; }\n}\npublic class JanuaryNewBoxPolicy implements NewBoxPolicy{\n    public void prepareBox(Box box) { box.recolor(BoxColor.YELLOW}; }\n}\npublic class PolicyRegistry{\n   public static NewBoxPolicy getNewBoxPolicyForDate(SomeDate date){\n      switch (date.month()){\n         case SomeMonth.JANUARY: return JANUARY_NEW_BOX_POLICY;\n         case SomeMonth.FEBRUARY: return FEBRUARY_NEW_BOX_POLICY;\n         default: throw new AssertionError();\n      }\n}\n</code></pre>\n<p>It's important to understand that POLICY can encapsulate actions, while SPECIFICATION only describes the properties of an object(these properties can both satisfy or DO NOT satisfy the business requirements). Some validation POLICY can use SPECIFICATIONs to check that the requirements are satisfied, of course.</p>\n<p>So you can have many different SPECIFICATION instances in your project, and they can describe both the valid and invalid objects from the business point of view. Actually, specifications can make no sense at all: for example if you have a product searching site, user can specify a request to search for a product named &quot;XBOX&quot;, but with the vendor name &quot;Sony&quot;, if the knowledge that only the specific vendors can produce the specific products is not captured in your model.</p>\n<p>The important aspect of POLICY is that its intent is to encapsulate the <em>actual</em> business rules(so the code is not scattered the different parts of the project), so when the rules change you can easily find the corresponding class. So you can have many SPECIFICATIONs in your project, but a manageable number of POLICIES, and those POLICIES should be easy to find and to change.</p>\n<p>P.S. please note that this post is just an example and not a license to do over-engineering, of course you should use the simplest design possible, it's a matter of common sense.</p>\n"}],"owner":{"account_id":132538,"reputation":19447,"user_id":333288,"accept_rate":97,"display_name":"MUG4N"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":11321,"favorite_count":0,"down_vote_count":0,"up_vote_count":42,"accepted_answer_id":14185853,"answer_count":1,"score":42,"last_activity_date":1690317909,"creation_date":1357495808,"question_id":14185139,"body_markdown":"I am reading the brilliant book &quot;Domain Driven Design&quot; written by Eric Evans. In his book Eric describes two different concepts: the specification pattern and policies. \r\n\r\nHere is an example for a specification:\r\n\r\n    public interface ProjectSpecification {\r\n      public boolean isSatisfiedBy(Project p);\r\n    }\r\n\r\n    public class ProjectIsOverdueSpecification implements ProjectSpecification {\r\n      public boolean isSatisfiedBy(Project p) { … }\r\n    }\r\n\r\n    //client:\r\n    if {\r\n      (projectIsOverdueSpecification.isSatisfiedBy(theCurrentProject) { … }\r\n    }\r\n\r\nHere is an example for a policy:\r\n\r\n    public class CargoBooking {\r\n\r\n      private OverBookingPolicy overBookingPolicy = new OverBookingPolicy();\r\n     \r\n      public int makeBooking(Cargo cargo, Voyage voyage) {\r\n        if (!overbookingPolicy.isAllowed(cargo, voyage)) \r\n          return –1;\r\n        int confirmation = orderConfirmationSequence.next();\r\n        voyage.addCargo(cargo, confirmation);\r\n        return confirmation;\r\n      }\r\n    }\r\n     \r\n    public OverBookingPolicy {\r\n      public boolean isAllowed(Cargo cargo, Voyage voyage) {\r\n        return (cargo.size() + voyage.bookedCargoSize()) &lt;= (voyage.capacity() * 1.1);\r\n      }\r\n    }\r\n\r\nI know that a policy is actually a strategy but in the two examples above there is absolutely no difference. So my question at this point is: What is the difference between those two patterns? Both patterns make business rules explicit so why do we distinguish between those two patterns? For me both are kind of predicates.\r\n\r\n","title":"Difference between specification and a policy?","body":"<p>I am reading the brilliant book \"Domain Driven Design\" written by Eric Evans. In his book Eric describes two different concepts: the specification pattern and policies. </p>\n\n<p>Here is an example for a specification:</p>\n\n<pre><code>public interface ProjectSpecification {\n  public boolean isSatisfiedBy(Project p);\n}\n\npublic class ProjectIsOverdueSpecification implements ProjectSpecification {\n  public boolean isSatisfiedBy(Project p) { … }\n}\n\n//client:\nif {\n  (projectIsOverdueSpecification.isSatisfiedBy(theCurrentProject) { … }\n}\n</code></pre>\n\n<p>Here is an example for a policy:</p>\n\n<pre><code>public class CargoBooking {\n\n  private OverBookingPolicy overBookingPolicy = new OverBookingPolicy();\n\n  public int makeBooking(Cargo cargo, Voyage voyage) {\n    if (!overbookingPolicy.isAllowed(cargo, voyage)) \n      return –1;\n    int confirmation = orderConfirmationSequence.next();\n    voyage.addCargo(cargo, confirmation);\n    return confirmation;\n  }\n}\n\npublic OverBookingPolicy {\n  public boolean isAllowed(Cargo cargo, Voyage voyage) {\n    return (cargo.size() + voyage.bookedCargoSize()) &lt;= (voyage.capacity() * 1.1);\n  }\n}\n</code></pre>\n\n<p>I know that a policy is actually a strategy but in the two examples above there is absolutely no difference. So my question at this point is: What is the difference between those two patterns? Both patterns make business rules explicit so why do we distinguish between those two patterns? For me both are kind of predicates.</p>\n"},{"tags":["java","date-format","java-time"],"comments":[{"owner":{"account_id":9725613,"reputation":53332,"user_id":7212686,"accept_rate":100,"display_name":"azro"},"score":0,"creation_date":1690225032,"post_id":76757281,"comment_id":135320730,"body_markdown":"What have you tried ?","body":"What have you tried ?"},{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":1,"creation_date":1690228266,"post_id":76757281,"comment_id":135321298,"body_markdown":"the patterns are listed in the [javadoc](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/time/format/DateTimeFormatter.html#patterns) (with examples and explanation about how many symbols are needed)","body":"the patterns are listed in the <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/time/format/DateTimeFormatter.html#patterns\" rel=\"nofollow noreferrer\">javadoc</a> (with examples and explanation about how many symbols are needed)"},{"owner":{"account_id":2179728,"reputation":73077,"user_id":10819573,"display_name":"Arvind Kumar Avinash"},"score":1,"creation_date":1690232059,"post_id":76757281,"comment_id":135321934,"body_markdown":"[Never use `SimpleDateFormat` or `DateTimeFormatter` without a `Locale`](https://stackoverflow.com/a/65544056/10819573).","body":"<a href=\"https://stackoverflow.com/a/65544056/10819573\">Never use <code>SimpleDateFormat</code> or <code>DateTimeFormatter</code> without a <code>Locale</code></a>."}],"answers":[{"comments":[{"owner":{"account_id":18740842,"reputation":3833,"user_id":13664137,"display_name":"moken"},"score":0,"creation_date":1690256178,"post_id":76757319,"comment_id":135324251,"body_markdown":"While this link may answer the question, it is better to include the essential parts of the answer here and provide the link for reference.  Link-only answers can become invalid if the linked page changes. - [From Review](/review/low-quality-posts/34739497)","body":"While this link may answer the question, it is better to include the essential parts of the answer here and provide the link for reference.  Link-only answers can become invalid if the linked page changes. - <a href=\"/review/low-quality-posts/34739497\">From Review</a>"},{"owner":{"account_id":10836,"reputation":196641,"user_id":20654,"accept_rate":80,"display_name":"OscarRyz"},"score":0,"creation_date":1690292922,"post_id":76757319,"comment_id":135330974,"body_markdown":"Removed link to docs and added some code","body":"Removed link to docs and added some code"}],"tags":[],"owner":{"account_id":10836,"reputation":196641,"user_id":20654,"accept_rate":80,"display_name":"OscarRyz"},"comment_count":2,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1690292818,"creation_date":1690225020,"answer_id":76757319,"question_id":76757281,"body_markdown":"_Updated with code_\r\n\r\nYou have to combine a couple of things: \r\n\r\n1. Parse the date into an `OffsetDateTime` (which has the timezone part)\r\n1. Convert that into an `Instant` which like an &quot;absolute&quot; time. \r\n1. Get your local offset, so you see what that would be in your local time\r\n1. Convert the instant into `LocalDateTime` using that offset. \r\n\r\nCode\r\n\r\n```java\r\nimport java.time.*;\r\nimport java.time.format.*;\r\n\r\n\r\n/* 1 */ var odt = OffsetDateTime.parse(&quot;Fri, 14 Jul 2023 11:53:06 -0400&quot;,\r\n                               DateTimeFormatter.RFC_1123_DATE_TIME);\r\n/* 2 */ var instant = odt.toInstant();\r\n/* 3 */ var localOffset = OffsetDateTime.now().getOffset();\r\n/* 4 */ var result = LocalDateTime.ofInstant(instant, localOffset);\r\n\r\n\r\n/*\r\nResult\r\nodt ==&gt; 2023-07-14T11:53:06-04:00\r\ninstant ==&gt; 2023-07-14T15:53:06Z\r\nlocalOffset ==&gt; -05:00\r\nresult ==&gt; 2023-07-14T10:53:06\r\n*/\r\n```","title":"How to parse a date string containing a numerical zone offset","body":"<p><em>Updated with code</em></p>\n<p>You have to combine a couple of things:</p>\n<ol>\n<li>Parse the date into an <code>OffsetDateTime</code> (which has the timezone part)</li>\n<li>Convert that into an <code>Instant</code> which like an &quot;absolute&quot; time.</li>\n<li>Get your local offset, so you see what that would be in your local time</li>\n<li>Convert the instant into <code>LocalDateTime</code> using that offset.</li>\n</ol>\n<p>Code</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.time.*;\nimport java.time.format.*;\n\n\n/* 1 */ var odt = OffsetDateTime.parse(&quot;Fri, 14 Jul 2023 11:53:06 -0400&quot;,\n                               DateTimeFormatter.RFC_1123_DATE_TIME);\n/* 2 */ var instant = odt.toInstant();\n/* 3 */ var localOffset = OffsetDateTime.now().getOffset();\n/* 4 */ var result = LocalDateTime.ofInstant(instant, localOffset);\n\n\n/*\nResult\nodt ==&gt; 2023-07-14T11:53:06-04:00\ninstant ==&gt; 2023-07-14T15:53:06Z\nlocalOffset ==&gt; -05:00\nresult ==&gt; 2023-07-14T10:53:06\n*/\n</code></pre>\n"},{"comments":[{"owner":{"account_id":5289146,"reputation":8128,"user_id":4222206,"display_name":"queeg"},"score":0,"creation_date":1690226899,"post_id":76757486,"comment_id":135321042,"body_markdown":"well spotted, sir.","body":"well spotted, sir."},{"owner":{"account_id":2279792,"reputation":3691,"user_id":2005176,"accept_rate":4,"display_name":"akaliza"},"score":0,"creation_date":1690227233,"post_id":76757486,"comment_id":135321104,"body_markdown":"still getting DateTimeParseException","body":"still getting DateTimeParseException"},{"owner":{"account_id":3013735,"reputation":13241,"user_id":2556520,"display_name":"bhspencer"},"score":0,"creation_date":1690227352,"post_id":76757486,"comment_id":135321126,"body_markdown":"@akaliza are you using a different date or pattern string. The above code compiles and parses the date from your question correctly.","body":"@akaliza are you using a different date or pattern string. The above code compiles and parses the date from your question correctly."},{"owner":{"account_id":2279792,"reputation":3691,"user_id":2005176,"accept_rate":4,"display_name":"akaliza"},"score":0,"creation_date":1690229562,"post_id":76757486,"comment_id":135321508,"body_markdown":"the same code I am getting the error in intelliJ, but in replit it works , I am using java 18, maybe i should reference the ZoneId ?","body":"the same code I am getting the error in intelliJ, but in replit it works , I am using java 18, maybe i should reference the ZoneId ?"},{"owner":{"account_id":2279792,"reputation":3691,"user_id":2005176,"accept_rate":4,"display_name":"akaliza"},"score":0,"creation_date":1690229852,"post_id":76757486,"comment_id":135321551,"body_markdown":"ok, adding local to date formatter solves the issue, thank you everyone","body":"ok, adding local to date formatter solves the issue, thank you everyone"},{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":1,"creation_date":1690231151,"post_id":76757486,"comment_id":135321801,"body_markdown":"It says _&quot;... could not be parsed at index 0&quot;_, so it doesn&#39;t understand _&quot;Fri&quot;_.","body":"It says <i>&quot;... could not be parsed at index 0&quot;</i>, so it doesn&#39;t understand <i>&quot;Fri&quot;</i>."}],"tags":[],"owner":{"account_id":3013735,"reputation":13241,"user_id":2556520,"display_name":"bhspencer"},"comment_count":6,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1690316952,"creation_date":1690226677,"answer_id":76757486,"question_id":76757281,"body_markdown":"The issue is the zone offset. You are using a lowercase &#39;z&#39; which is for a named time zone e.g. &quot;PST&quot; or &quot;EST&quot;. Try with a capital &#39;Z&#39; as shown below for a numerical zone offset:\r\n\r\n        String date = &quot;Fri, 14 Jul 2023 11:53:06 -0400&quot;;\r\n        String pattern = &quot;EEE, dd MMM yyyy HH:mm:ss Z&quot;; //Note the capital &#39;Z&#39;\r\n        DateTimeFormatter formatter = DateTimeFormatter.ofPattern(pattern);\r\n        ZonedDateTime zonedDateTime = ZonedDateTime.parse(date, formatter);\r\n        System.out.println(zonedDateTime);\r\n\r\n","title":"How to parse a date string containing a numerical zone offset","body":"<p>The issue is the zone offset. You are using a lowercase 'z' which is for a named time zone e.g. &quot;PST&quot; or &quot;EST&quot;. Try with a capital 'Z' as shown below for a numerical zone offset:</p>\n<pre><code>    String date = &quot;Fri, 14 Jul 2023 11:53:06 -0400&quot;;\n    String pattern = &quot;EEE, dd MMM yyyy HH:mm:ss Z&quot;; //Note the capital 'Z'\n    DateTimeFormatter formatter = DateTimeFormatter.ofPattern(pattern);\n    ZonedDateTime zonedDateTime = ZonedDateTime.parse(date, formatter);\n    System.out.println(zonedDateTime);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1690271352,"creation_date":1690238589,"answer_id":76758429,"question_id":76757281,"body_markdown":"The [Answer by bhspencer][1] identifies part of the problem, needing a tweak to your formatting pattern. However, you may also need to specify a `Locale` with your `DateTimeFormatter`. \r\n\r\nBut FYI, there is a simpler approach. No need to specify a formatting pattern at all.\r\n\r\n# tl;dr\r\n\r\n    OffsetDateTime.parse( \r\n        &quot;Fri, 14 Jul 2023 11:53:06 -0400&quot; , \r\n        DateTimeFormatter.RFC_1123_DATE_TIME \r\n    )\r\n\r\n# RFC 1123 / RFC 822\r\n\r\nYour input string `&quot;Fri, 14 Jul 2023 11:53:06 -0400&quot;` complies with the outdated standard format defined in [RFC 1123][2] &amp; RFC 822. \r\n\r\n*java.time* comes with a formatter predefined for that format. See class [`DateTimeFormatter.RFC_1123_DATE_TIME`](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/time/format/DateTimeFormatter.html#RFC_1123_DATE_TIME).\r\n\r\n```java\r\nString input = &quot;Fri, 14 Jul 2023 11:53:06 -0400&quot; ;\r\nOffsetDateTime odt = OffsetDateTime.parse( input , DateTimeFormatter.RFC_1123_DATE_TIME );\r\n```\r\n\r\nSee this code [run at Ideone.com][3].\r\n\r\n&gt;odt.toString() = 2023-07-14T11:53:06-04:00\r\n\r\n\r\n----------\r\n\r\nTip: Educate the publisher of your data about using the modern [ISO 8601][4] standard formats rather than these troublesome outmoded formats.\r\n\r\nAnd educate them on using a fully-formed offset, including the optional COLON. I have seen multiple protocols and libraries that do not tolerate the omitted COLON. And easier to read by humans if included.\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/76757486/642706\r\n  [2]: https://www.rfc-editor.org/rfc/rfc1123\r\n  [3]: https://ideone.com/ZTIFF0\r\n  [4]: https://en.wikipedia.org/wiki/ISO_8601","title":"How to parse a date string containing a numerical zone offset","body":"<p>The <a href=\"https://stackoverflow.com/a/76757486/642706\">Answer by bhspencer</a> identifies part of the problem, needing a tweak to your formatting pattern. However, you may also need to specify a <code>Locale</code> with your <code>DateTimeFormatter</code>.</p>\n<p>But FYI, there is a simpler approach. No need to specify a formatting pattern at all.</p>\n<h1>tl;dr</h1>\n<pre><code>OffsetDateTime.parse( \n    &quot;Fri, 14 Jul 2023 11:53:06 -0400&quot; , \n    DateTimeFormatter.RFC_1123_DATE_TIME \n)\n</code></pre>\n<h1>RFC 1123 / RFC 822</h1>\n<p>Your input string <code>&quot;Fri, 14 Jul 2023 11:53:06 -0400&quot;</code> complies with the outdated standard format defined in <a href=\"https://www.rfc-editor.org/rfc/rfc1123\" rel=\"nofollow noreferrer\">RFC 1123</a> &amp; RFC 822.</p>\n<p><em>java.time</em> comes with a formatter predefined for that format. See class <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/time/format/DateTimeFormatter.html#RFC_1123_DATE_TIME\" rel=\"nofollow noreferrer\"><code>DateTimeFormatter.RFC_1123_DATE_TIME</code></a>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>String input = &quot;Fri, 14 Jul 2023 11:53:06 -0400&quot; ;\nOffsetDateTime odt = OffsetDateTime.parse( input , DateTimeFormatter.RFC_1123_DATE_TIME );\n</code></pre>\n<p>See this code <a href=\"https://ideone.com/ZTIFF0\" rel=\"nofollow noreferrer\">run at Ideone.com</a>.</p>\n<blockquote>\n<p>odt.toString() = 2023-07-14T11:53:06-04:00</p>\n</blockquote>\n<hr />\n<p>Tip: Educate the publisher of your data about using the modern <a href=\"https://en.wikipedia.org/wiki/ISO_8601\" rel=\"nofollow noreferrer\">ISO 8601</a> standard formats rather than these troublesome outmoded formats.</p>\n<p>And educate them on using a fully-formed offset, including the optional COLON. I have seen multiple protocols and libraries that do not tolerate the omitted COLON. And easier to read by humans if included.</p>\n"},{"tags":[],"owner":{"account_id":4335872,"reputation":77,"user_id":3540367,"display_name":"Vinit More"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690296500,"creation_date":1690296500,"answer_id":76763888,"question_id":76757281,"body_markdown":"With below code I am able to get result without error in date format. Not sure if this is what you needed. Or comment here and will explore options.\r\n\r\n**Code**\r\n\r\n    DateTimeFormatter fmt = DateTimeFormatter.ofPattern(&quot;E, d LLL u HH:mm:ss Z&quot;);\r\n    LocalDateTime date = LocalDateTime.parse(&quot;Fri, 14 Jul 2023 11:53:06 -0400&quot;, fmt);\r\n    System.out.println(date);\r\n**Result**\r\n\r\n    2023-07-14T11:53:06","title":"How to parse a date string containing a numerical zone offset","body":"<p>With below code I am able to get result without error in date format. Not sure if this is what you needed. Or comment here and will explore options.</p>\n<p><strong>Code</strong></p>\n<pre><code>DateTimeFormatter fmt = DateTimeFormatter.ofPattern(&quot;E, d LLL u HH:mm:ss Z&quot;);\nLocalDateTime date = LocalDateTime.parse(&quot;Fri, 14 Jul 2023 11:53:06 -0400&quot;, fmt);\nSystem.out.println(date);\n</code></pre>\n<p><strong>Result</strong></p>\n<pre><code>2023-07-14T11:53:06\n</code></pre>\n"}],"owner":{"account_id":2279792,"reputation":3691,"user_id":2005176,"accept_rate":4,"display_name":"akaliza"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":98,"favorite_count":0,"down_vote_count":3,"up_vote_count":4,"answer_count":4,"score":1,"last_activity_date":1690316952,"creation_date":1690224669,"question_id":76757281,"body_markdown":"I have this date in string `&quot;Fri, 14 Jul 2023 11:53:06 -0400&quot;`\r\n\r\n and I am unable to convert it in LocalDateTime \r\nI have tried this pattern &quot;EEE, dd MMM yyyy HH:mm:ss z&quot; and I have date format exception\r\n\r\n\r\nany idea ?\r\n\r\nThanks","title":"How to parse a date string containing a numerical zone offset","body":"<p>I have this date in string <code>&quot;Fri, 14 Jul 2023 11:53:06 -0400&quot;</code></p>\n<p>and I am unable to convert it in LocalDateTime\nI have tried this pattern &quot;EEE, dd MMM yyyy HH:mm:ss z&quot; and I have date format exception</p>\n<p>any idea ?</p>\n<p>Thanks</p>\n"},{"tags":["java","multithreading","while-loop","wait"],"comments":[{"owner":{"account_id":277416,"reputation":681878,"user_id":571407,"accept_rate":100,"display_name":"JB Nizet"},"score":4,"creation_date":1445082765,"post_id":33186280,"comment_id":54178482,"body_markdown":"Everything can be answered by reading the javadoc of wait() and notify() (and notifyAll(), which should be preferred).","body":"Everything can be answered by reading the javadoc of wait() and notify() (and notifyAll(), which should be preferred)."},{"owner":{"account_id":80219,"reputation":34027,"user_id":226975,"accept_rate":80,"display_name":"Wyzard"},"score":1,"creation_date":1445087583,"post_id":33186280,"comment_id":54179852,"body_markdown":"I wouldn&#39;t say that `notifyAll` &quot;should be preferred&quot;.  There are cases where it&#39;s appropriate, and cases where it isn&#39;t.","body":"I wouldn&#39;t say that <code>notifyAll</code> &quot;should be preferred&quot;.  There are cases where it&#39;s appropriate, and cases where it isn&#39;t."},{"owner":{"account_id":2478127,"reputation":19514,"user_id":2158288,"display_name":"ZhongYu"},"score":0,"creation_date":1445095888,"post_id":33186280,"comment_id":54182438,"body_markdown":"http://stackoverflow.com/q/32774399/2158288","body":"<a href=\"http://stackoverflow.com/q/32774399/2158288\">stackoverflow.com/q/32774399/2158288</a>"},{"owner":{"account_id":422870,"reputation":25925,"user_id":801894,"display_name":"Solomon Slow"},"score":0,"creation_date":1445186374,"post_id":33186280,"comment_id":54205587,"body_markdown":"@Wyzard, One case where notifyAll() should be preferred is if you&#39;re handing out bite-sized bits of advice to newbies who don&#39;t fully understand what they&#39;re doing.  If you use notifyAll() when you could have used notify(), the only consequence is that the program does not perform as well as it might have done.  If you use notify() where you should have used notifyAll(), then the consequence could be much worse than that.","body":"@Wyzard, One case where notifyAll() should be preferred is if you&#39;re handing out bite-sized bits of advice to newbies who don&#39;t fully understand what they&#39;re doing.  If you use notifyAll() when you could have used notify(), the only consequence is that the program does not perform as well as it might have done.  If you use notify() where you should have used notifyAll(), then the consequence could be much worse than that."}],"answers":[{"tags":[],"owner":{"account_id":3869700,"reputation":337,"user_id":3205937,"accept_rate":50,"display_name":"GMB"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1445085092,"creation_date":1445085092,"answer_id":33186648,"question_id":33186280,"body_markdown":"An `if` statement checks if an expression is true or false by **running once**, and then runs the code inside the statement only if it is true.\r\n\r\nwhere as \r\n\r\nA `while` condition **continues to execute** the code in the while statement untill the expression is true. Moreover while loops are more suitable to be used when you don&#39;t know how many times you may have to loop through the condition.\r\n\r\n`obj.wait()` - causes the current thread to wait until another thread invokes the `notify()` method or the `nofityAll()` method for the respective object in this case. In case  a timeout was passes as a parameter then the tread would wait till the certain amount of time has elapsed.\r\n\r\n`obj.notify()` would wake up a single thread that was waiting on the respective objects monitor. The awakened thread will proceed only after the current thread relinquishes the lock on the object.","title":"Why we must use &quot;while&quot; for checking race condition not &quot;if&quot;","body":"<p>An <code>if</code> statement checks if an expression is true or false by <strong>running once</strong>, and then runs the code inside the statement only if it is true.</p>\n\n<p>where as </p>\n\n<p>A <code>while</code> condition <strong>continues to execute</strong> the code in the while statement untill the expression is true. Moreover while loops are more suitable to be used when you don't know how many times you may have to loop through the condition.</p>\n\n<p><code>obj.wait()</code> - causes the current thread to wait until another thread invokes the <code>notify()</code> method or the <code>nofityAll()</code> method for the respective object in this case. In case  a timeout was passes as a parameter then the tread would wait till the certain amount of time has elapsed.</p>\n\n<p><code>obj.notify()</code> would wake up a single thread that was waiting on the respective objects monitor. The awakened thread will proceed only after the current thread relinquishes the lock on the object.</p>\n"},{"tags":[],"owner":{"account_id":80219,"reputation":34027,"user_id":226975,"accept_rate":80,"display_name":"Wyzard"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1445087358,"creation_date":1445087358,"answer_id":33187004,"question_id":33186280,"body_markdown":"The need for the loop is explained in the Javadoc for the `wait` methods:\r\n\r\n&gt; A thread can also wake up without being notified, interrupted, or timing out, a so-called *spurious wakeup.* While this will rarely occur in practice, applications must guard against it by testing for the condition that should have caused the thread to be awakened, and continuing to wait if the condition is not satisfied.\r\n\r\nTo guard against this, after the `wait()` call returns, you have to check the condition again, and if it&#39;s false, go back and call `wait()` again instead of proceeding.  The `while` loop accomplishes that.\r\n\r\n---\r\n\r\nWhen you call `wait()`, the object&#39;s lock is automatically released while waiting, and then acquired again before the method returns.  This means that when another thread calls `notify()` on the object, the waiting thread can&#39;t immediately resume running, because the notifying thread still holds the object&#39;s lock and the waiting thread has to wait for it to be released.  It also means that if there are several waiting threads and you call `notifyAll()`, the waiting threads can&#39;t all resume at once:  one of the threads will get the lock and return from `wait()`, and when it releases the lock, then another of the threads can acquire it and return from `wait()`, and so on.\r\n\r\nIn some cases when multiple waiting threads are involved, a waiting thread may wake up, find that the condition is true, and do some stuff that ends up changing the condition back to false — all while holding the lock.  Then, when it releases the lock (e.g. by calling `wait()` again), the next thread wakes up and finds that the condition is false.  In this case, it isn&#39;t a spurious wakeup; the condition really did become true, but then became false again before the thread got a chance to check it.\r\n\r\nFor example:  a producer thread adds several items to a queue and calls `notifyAll()` to wake up the consumer threads.  Each consumer thread takes one item from the queue, then releases the lock while processing the item.  But if there are more consumer threads than there were items added to the queue, some of the threads will wake up only to find that the queue is empty, so they just have to go back to waiting again.\r\n\r\nChecking the condition in a `while` loop takes care of this situation in addition to handling spurious wakeups.","title":"Why we must use &quot;while&quot; for checking race condition not &quot;if&quot;","body":"<p>The need for the loop is explained in the Javadoc for the <code>wait</code> methods:</p>\n\n<blockquote>\n  <p>A thread can also wake up without being notified, interrupted, or timing out, a so-called <em>spurious wakeup.</em> While this will rarely occur in practice, applications must guard against it by testing for the condition that should have caused the thread to be awakened, and continuing to wait if the condition is not satisfied.</p>\n</blockquote>\n\n<p>To guard against this, after the <code>wait()</code> call returns, you have to check the condition again, and if it's false, go back and call <code>wait()</code> again instead of proceeding.  The <code>while</code> loop accomplishes that.</p>\n\n<hr>\n\n<p>When you call <code>wait()</code>, the object's lock is automatically released while waiting, and then acquired again before the method returns.  This means that when another thread calls <code>notify()</code> on the object, the waiting thread can't immediately resume running, because the notifying thread still holds the object's lock and the waiting thread has to wait for it to be released.  It also means that if there are several waiting threads and you call <code>notifyAll()</code>, the waiting threads can't all resume at once:  one of the threads will get the lock and return from <code>wait()</code>, and when it releases the lock, then another of the threads can acquire it and return from <code>wait()</code>, and so on.</p>\n\n<p>In some cases when multiple waiting threads are involved, a waiting thread may wake up, find that the condition is true, and do some stuff that ends up changing the condition back to false — all while holding the lock.  Then, when it releases the lock (e.g. by calling <code>wait()</code> again), the next thread wakes up and finds that the condition is false.  In this case, it isn't a spurious wakeup; the condition really did become true, but then became false again before the thread got a chance to check it.</p>\n\n<p>For example:  a producer thread adds several items to a queue and calls <code>notifyAll()</code> to wake up the consumer threads.  Each consumer thread takes one item from the queue, then releases the lock while processing the item.  But if there are more consumer threads than there were items added to the queue, some of the threads will wake up only to find that the queue is empty, so they just have to go back to waiting again.</p>\n\n<p>Checking the condition in a <code>while</code> loop takes care of this situation in addition to handling spurious wakeups.</p>\n"},{"comments":[{"owner":{"account_id":2424306,"reputation":16850,"user_id":2116590,"display_name":"Parveen Verma"},"score":0,"creation_date":1538288867,"post_id":41511395,"comment_id":92086069,"body_markdown":"Although many explanations available but the level at which you explained really helped to understand this puzzle. +1 for this.","body":"Although many explanations available but the level at which you explained really helped to understand this puzzle. +1 for this."}],"tags":[],"owner":{"account_id":75804,"reputation":94840,"user_id":217324,"accept_rate":96,"display_name":"Nathan Hughes"},"comment_count":1,"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1690316761,"creation_date":1483725019,"answer_id":41511395,"question_id":33186280,"body_markdown":"Using an if check instead of checking repeatedly in a loop is a mistake. There are a couple reasons to use the loop.\r\n\r\nOne is the &quot;spurious wakeup&quot;, which means the wait method can return without the thread having been notified: it&#39;s not valid to infer, based on the thread exiting the wait method, that it must have gotten notified. This may not happen a lot but it is a possibility that has to be handled.\r\n\r\nBut the main reason is this one: When your thread waits it releases the lock. When it receives a notification it doesn&#39;t have the lock and has to acquire it again before it can exit the wait method. *Just because the thread got notified doesn&#39;t mean it&#39;s next in line to get the lock.* If the thread decides what to do based on something that happened when the thread didn&#39;t have ownership of the lock, multiple threads may have had the opportunity to act on the same shared object between the time the notify happened and the time that the thread got the lock, and the state of the shared object may not be what your thread thinks it is. Using a while loop allows the thread to check the condition it&#39;s waiting on again, with the lock held, confirming that the condition is still valid before it proceeds.\r\n\r\n\r\n","title":"Why we must use &quot;while&quot; for checking race condition not &quot;if&quot;","body":"<p>Using an if check instead of checking repeatedly in a loop is a mistake. There are a couple reasons to use the loop.</p>\n<p>One is the &quot;spurious wakeup&quot;, which means the wait method can return without the thread having been notified: it's not valid to infer, based on the thread exiting the wait method, that it must have gotten notified. This may not happen a lot but it is a possibility that has to be handled.</p>\n<p>But the main reason is this one: When your thread waits it releases the lock. When it receives a notification it doesn't have the lock and has to acquire it again before it can exit the wait method. <em>Just because the thread got notified doesn't mean it's next in line to get the lock.</em> If the thread decides what to do based on something that happened when the thread didn't have ownership of the lock, multiple threads may have had the opportunity to act on the same shared object between the time the notify happened and the time that the thread got the lock, and the state of the shared object may not be what your thread thinks it is. Using a while loop allows the thread to check the condition it's waiting on again, with the lock held, confirming that the condition is still valid before it proceeds.</p>\n"}],"owner":{"account_id":2637198,"reputation":317,"user_id":2281578,"accept_rate":29,"display_name":"scugxl"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3718,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"answer_count":3,"score":6,"last_activity_date":1690316761,"creation_date":1445082680,"question_id":33186280,"body_markdown":"I read the following code in &quot;Thinking in java&quot;.\r\n\r\n    synchronized(obj)\r\n\t\t{\r\n\t\t\twhile (condition_not_matched)\r\n\t\t\t{\r\n\t\t\t\tobj.wait();\r\n\t\t\t}\r\n\t\t\t//continue\r\n\t\t\tdosomething();\r\n\t\t\t\r\n\t\t}\r\n\r\nWhat I think:&lt;br&gt;\r\nUse &quot;if&quot; is OK, because the &quot;wait&quot; means it must get the obj&#39;s lock monitor, and only one thread can executed here.\r\n\r\n(1)Why here use &quot;while (condition)&quot; not &quot;if&quot; ?&lt;br&gt;\r\n(2)What happend when executed &quot;obj.wait()&quot;? Does the currrent thread  release the lock of &quot;obj&quot;?&lt;br&gt; \r\n(3)And when another thread executed &quot;obj.notify()&quot;, what happend of the previous thread (Did it refetch the lock of obj or not ?if yes, it must condition_not_matched , so &quot;if&quot; is enough.)&lt;br&gt;\r\nAm I wrong?","title":"Why we must use &quot;while&quot; for checking race condition not &quot;if&quot;","body":"<p>I read the following code in \"Thinking in java\".</p>\n\n<pre><code>synchronized(obj)\n    {\n        while (condition_not_matched)\n        {\n            obj.wait();\n        }\n        //continue\n        dosomething();\n\n    }\n</code></pre>\n\n<p>What I think:<br>\nUse \"if\" is OK, because the \"wait\" means it must get the obj's lock monitor, and only one thread can executed here.</p>\n\n<p>(1)Why here use \"while (condition)\" not \"if\" ?<br>\n(2)What happend when executed \"obj.wait()\"? Does the currrent thread  release the lock of \"obj\"?<br> \n(3)And when another thread executed \"obj.notify()\", what happend of the previous thread (Did it refetch the lock of obj or not ?if yes, it must condition_not_matched , so \"if\" is enough.)<br>\nAm I wrong?</p>\n"},{"tags":["java","android","android-source","mobile-development"],"comments":[{"owner":{"account_id":918082,"reputation":54574,"user_id":950427,"accept_rate":91,"display_name":"Jared Burrows"},"score":0,"creation_date":1427394010,"post_id":29285714,"comment_id":46769437,"body_markdown":"Are you talking about: https://source.android.com/source/building-kernels.html#downloading-a-prebuilt-gcc?","body":"Are you talking about: <a href=\"https://source.android.com/source/building-kernels.html#downloading-a-prebuilt-gcc\" rel=\"nofollow noreferrer\">source.android.com/source/&hellip;</a>?"}],"answers":[{"comments":[{"owner":{"account_id":1342401,"reputation":23303,"user_id":1283845,"accept_rate":65,"display_name":"BlackHatSamurai"},"score":0,"creation_date":1427394385,"post_id":29286056,"comment_id":46769659,"body_markdown":"So this isn&#39;t included in the standard SDK?","body":"So this isn&#39;t included in the standard SDK?"},{"owner":{"account_id":1933155,"reputation":15551,"user_id":1830736,"accept_rate":98,"display_name":"George Hilliard"},"score":0,"creation_date":1427394474,"post_id":29286056,"comment_id":46769719,"body_markdown":"No.  The Android SDK is made for application developers.  You will have a very bad time trying to build any part of AOSP with the developer SDK.","body":"No.  The Android SDK is made for application developers.  You will have a very bad time trying to build any part of AOSP with the developer SDK."}],"tags":[],"owner":{"account_id":1933155,"reputation":15551,"user_id":1830736,"accept_rate":98,"display_name":"George Hilliard"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1427394517,"creation_date":1427394167,"answer_id":29286056,"question_id":29285714,"body_markdown":"The AOSP toolchain is, essentially, the collection of tools used to build Android.\r\n\r\nThe [documentation](https://source.android.com/source/initializing.html) [describes](https://source.android.com/source/downloading.html) how to set up a suitable toolchain.  It normally happens automatically when you try to build anything for your target.  This build normally happens by invoking the `lunch` command.","title":"What is the AOSP Toolchain?","body":"<p>The AOSP toolchain is, essentially, the collection of tools used to build Android.</p>\n\n<p>The <a href=\"https://source.android.com/source/initializing.html\" rel=\"nofollow\">documentation</a> <a href=\"https://source.android.com/source/downloading.html\" rel=\"nofollow\">describes</a> how to set up a suitable toolchain.  It normally happens automatically when you try to build anything for your target.  This build normally happens by invoking the <code>lunch</code> command.</p>\n"},{"tags":[],"owner":{"account_id":85940,"reputation":2812,"user_id":239318,"accept_rate":94,"display_name":"diatrevolo"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1427394243,"creation_date":1427394243,"answer_id":29286080,"question_id":29285714,"body_markdown":"The toolchain (even in the broader sense, not just AOSP) is the set of tools necessary to build software and firmware for a specific platform.  In the sense of AOSP, this includes all the scripts and binaries necessary to interpret and build Android make files, scripts necessary for selecting architectures, for inspecting source code, for running tests on a build, etc.  \r\n\r\nBasically the toolchain is everything you need to develop for a platform.","title":"What is the AOSP Toolchain?","body":"<p>The toolchain (even in the broader sense, not just AOSP) is the set of tools necessary to build software and firmware for a specific platform.  In the sense of AOSP, this includes all the scripts and binaries necessary to interpret and build Android make files, scripts necessary for selecting architectures, for inspecting source code, for running tests on a build, etc.  </p>\n\n<p>Basically the toolchain is everything you need to develop for a platform.</p>\n"},{"tags":[],"owner":{"account_id":14562608,"reputation":198,"user_id":10518289,"display_name":"janithcooray"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690316449,"creation_date":1690316449,"answer_id":76766266,"question_id":29285714,"body_markdown":"For readers who saw `get the proper toolchain packages from AOSP or CodeSourcery or ETC` and wanted to know where to get it - \r\n\r\nIt&#39;s not clearly mentioned In the Android source website itself what these tools are specifically. you have to download the entire repo and you will find it inside.","title":"What is the AOSP Toolchain?","body":"<p>For readers who saw <code>get the proper toolchain packages from AOSP or CodeSourcery or ETC</code> and wanted to know where to get it -</p>\n<p>It's not clearly mentioned In the Android source website itself what these tools are specifically. you have to download the entire repo and you will find it inside.</p>\n"}],"owner":{"account_id":1342401,"reputation":23303,"user_id":1283845,"accept_rate":65,"display_name":"BlackHatSamurai"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2024,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":3,"score":1,"last_activity_date":1690316449,"creation_date":1427393012,"question_id":29285714,"body_markdown":"I&#39;m looking to build some kernel source code, and I keep seeing &quot;AOSP Toolchain&quot;. I know that AOSP is the Android Open Source Project, but I&#39;m wondering what exactly is the &quot;toolchain&quot;? ","title":"What is the AOSP Toolchain?","body":"<p>I'm looking to build some kernel source code, and I keep seeing \"AOSP Toolchain\". I know that AOSP is the Android Open Source Project, but I'm wondering what exactly is the \"toolchain\"? </p>\n"},{"tags":["java","gradle","discord4j"],"answers":[{"tags":[],"owner":{"account_id":15013161,"reputation":71,"user_id":10836980,"display_name":"Azn9"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690273910,"creation_date":1690273910,"answer_id":76760832,"question_id":76760268,"body_markdown":"By clicking the &quot;stop&quot; button, you&#39;re forcibly closing the application without letting it terminate properly.\r\nIf the bot still appears online, it is because due to this force close, it never sends a &quot;disconnect&quot; message to Discord.\r\nThe threads you see are from gradle, which runs as a daemon by default, meaning it is always active to launch the applications faster the next time you use it.\r\n\r\nIf you want to shut down your bot correctly, you should add some logic in your code by listening for input in the console by example and calling `client.logout().block();`.","title":"Threads not being terminated after closing application","body":"<p>By clicking the &quot;stop&quot; button, you're forcibly closing the application without letting it terminate properly.\nIf the bot still appears online, it is because due to this force close, it never sends a &quot;disconnect&quot; message to Discord.\nThe threads you see are from gradle, which runs as a daemon by default, meaning it is always active to launch the applications faster the next time you use it.</p>\n<p>If you want to shut down your bot correctly, you should add some logic in your code by listening for input in the console by example and calling <code>client.logout().block();</code>.</p>\n"},{"tags":[],"owner":{"account_id":29054467,"reputation":36,"user_id":22256528,"display_name":"Muhammad Tariq"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690275448,"creation_date":1690275448,"answer_id":76761056,"question_id":76760268,"body_markdown":"It seems like the issue might be related to how you are handling the termination of your Discord bot application. When you run the bot using the code you provided, it blocks the main thread with `gateway.onDisconnect().block();`, preventing the application from properly terminating when you try to exit it.\r\n\r\nTo gracefully shut down the Discord bot when you want to exit the application, you can use a `CountDownLatch`. Here&#39;s how you can modify your code to achieve this:\r\n\r\n    ```java\r\n    import reactor.core.publisher.Mono;\r\n    import java.util.concurrent.CountDownLatch;\r\n    \r\n    public class SampleBot {\r\n        private static final String BOT_TOKEN = &quot;your_bot_token_here&quot;;\r\n    \r\n        public static void main(String[] args) throws Exception {\r\n            DiscordClient client = DiscordClientBuilder.create(BOT_TOKEN).build();\r\n            GatewayDiscordClient gateway = client.login().block();\r\n    \r\n            // Initialize the latch with 1 permit\r\n            CountDownLatch latch = new CountDownLatch(1);\r\n    \r\n            // Add a shutdown hook to gracefully disconnect the bot when the application is terminated\r\n            Runtime.getRuntime().addShutdownHook(new Thread(() -&gt; {\r\n                System.out.println(&quot;Shutting down bot...&quot;);\r\n                gateway.logout().block();\r\n                latch.countDown();\r\n            }));\r\n    \r\n            // Wait until the latch reaches 0 (i.e., the bot is disconnected)\r\n            latch.await();\r\n        }\r\n    }\r\n    ```\r\n\r\nWith this modification, when you run the bot, it will start and block the main thread with `latch.await()`. However, when you exit the application (for example, by clicking the Exit button in the console), the shutdown hook will be triggered, logging out the bot and releasing the latch, allowing the main thread to continue and the application to terminate gracefully.\r\n\r\nBy using this approach, you should no longer see active threads in your task manager after exiting the application, as the bot will be disconnected properly before the application terminates.","title":"Threads not being terminated after closing application","body":"<p>It seems like the issue might be related to how you are handling the termination of your Discord bot application. When you run the bot using the code you provided, it blocks the main thread with <code>gateway.onDisconnect().block();</code>, preventing the application from properly terminating when you try to exit it.</p>\n<p>To gracefully shut down the Discord bot when you want to exit the application, you can use a <code>CountDownLatch</code>. Here's how you can modify your code to achieve this:</p>\n<pre><code>```java\nimport reactor.core.publisher.Mono;\nimport java.util.concurrent.CountDownLatch;\n\npublic class SampleBot {\n    private static final String BOT_TOKEN = &quot;your_bot_token_here&quot;;\n\n    public static void main(String[] args) throws Exception {\n        DiscordClient client = DiscordClientBuilder.create(BOT_TOKEN).build();\n        GatewayDiscordClient gateway = client.login().block();\n\n        // Initialize the latch with 1 permit\n        CountDownLatch latch = new CountDownLatch(1);\n\n        // Add a shutdown hook to gracefully disconnect the bot when the application is terminated\n        Runtime.getRuntime().addShutdownHook(new Thread(() -&gt; {\n            System.out.println(&quot;Shutting down bot...&quot;);\n            gateway.logout().block();\n            latch.countDown();\n        }));\n\n        // Wait until the latch reaches 0 (i.e., the bot is disconnected)\n        latch.await();\n    }\n}\n```\n</code></pre>\n<p>With this modification, when you run the bot, it will start and block the main thread with <code>latch.await()</code>. However, when you exit the application (for example, by clicking the Exit button in the console), the shutdown hook will be triggered, logging out the bot and releasing the latch, allowing the main thread to continue and the application to terminate gracefully.</p>\n<p>By using this approach, you should no longer see active threads in your task manager after exiting the application, as the bot will be disconnected properly before the application terminates.</p>\n"}],"owner":{"account_id":29085639,"reputation":1,"user_id":22280584,"display_name":"Larrix Replik"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":75,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1690315985,"creation_date":1690269414,"question_id":76760268,"body_markdown":"I&#39;m trying to create a discord bot using the Discord4J api, but when I try to run the app from IntelliJ or CMD, when I exit the app, the bot is still active and in my task manager I can see the active threads created by this app, the only way is to manually end the tasks from task manager.\r\n\r\nI followed the steps provided by the official Discord4J wiki [Music-Bot-Tutorial](https://github.com/Discord4J/Discord4J/wiki/Music-Bot-Tutorial), It mentions `If you wish to disconnect your bot, click on the Exit button in the console.`, but this is not happening with my program.\r\n\r\nThis is the code I am using:\r\n```\r\npublic static void main(String[] args) throws Exception {\r\n  DiscordClient client = DiscordClientBuilder.create(BOT_TOKEN).build();\r\n  GatewayDiscordClient gateway = client.login().block();\r\n\r\n  gateway.onDisconnect().block();\r\n}\r\n```\r\n\r\nGradle only gives this details when I try to stop the application\r\n`\r\nExecution failed for task &#39;:SampleBot.main()&#39;.\r\nBuild cancelled while executing task &#39;:SampleBot.main()&#39;\r\n`","title":"Threads not being terminated after closing application","body":"<p>I'm trying to create a discord bot using the Discord4J api, but when I try to run the app from IntelliJ or CMD, when I exit the app, the bot is still active and in my task manager I can see the active threads created by this app, the only way is to manually end the tasks from task manager.</p>\n<p>I followed the steps provided by the official Discord4J wiki <a href=\"https://github.com/Discord4J/Discord4J/wiki/Music-Bot-Tutorial\" rel=\"nofollow noreferrer\">Music-Bot-Tutorial</a>, It mentions <code>If you wish to disconnect your bot, click on the Exit button in the console.</code>, but this is not happening with my program.</p>\n<p>This is the code I am using:</p>\n<pre><code>public static void main(String[] args) throws Exception {\n  DiscordClient client = DiscordClientBuilder.create(BOT_TOKEN).build();\n  GatewayDiscordClient gateway = client.login().block();\n\n  gateway.onDisconnect().block();\n}\n</code></pre>\n<p>Gradle only gives this details when I try to stop the application\n<code>Execution failed for task ':SampleBot.main()'. Build cancelled while executing task ':SampleBot.main()'</code></p>\n"},{"tags":["java","parsing","web-scraping","jsoup","pastebin"],"answers":[{"tags":[],"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1690163609,"creation_date":1690163609,"answer_id":76751006,"question_id":76750142,"body_markdown":"## Class line is invalid\r\n\r\nSpace in a `class` attribute separates class names. Hence, expecting `.getElementsByClass(&quot;foo bar&quot;)` to work is incorrect - you&#39;re asking a lot from JSoup here. What you really want is `.getElementsByClass(&quot;foo&quot;)` and then get the intersection (the &#39;overlap&#39;) between that and `.getElementsByClass(&quot;bar&quot;)`.\r\n\r\nSecondly, HTML classes must start with a letter. In other words, `-raw` is an invalid class name. Given that it is invalid, in the browser/HTML space the general trend is not to hard-crash (but, had it been XHTML, most parser tools would completely refuse this HTML as being invalid), but what _does_ happen is more or less undefined - you shouldn&#39;t write invalid HTML. It is possible that JSoup completely ignores &#39;-raw&#39;.\r\n\r\nThus, we have 2 plausible things that make JSoup not parse this, and __neither is JSoup&#39;s fault - it is the fault of this invalid HTML__:\r\n\r\n* It doesn&#39;t let you ask for multiple classes in a single &quot;by class&quot; call. Fix by getting the intersection between all those classes you are actually interested in.\r\n\r\n* It doesn&#39;t let you ask for `-raw`. Simply don&#39;t ask for that one.\r\n\r\n## Different HTML is returned\r\n\r\nJSoup parses the HTML. __It does not run any javascript__. Turn javascript off in your browser and retry the request. I bet you get the same &#39;weird completely neutered HTML&#39;.\r\n\r\nThere are various ways to integrate dynamism (e.g. the values of things in db tables, think &#39;list of movies on youtube&#39;, &#39;streetnames in google maps&#39;, &#39;most recent posts&#39; on a forum site, and so on - anything that isn&#39;t &#39;hardcoded&#39; by the programmers and designers). The usual way __in the past__ was templating. In which case, the HTML you get from the browser is very similar to the DOM that the browser ends up showing to your eyeballs.\r\n\r\nHowever, more and more of the web is now done using a static-HTML+API-calls model: The HTML/CSS/JS served by the server is completely static (&#39;hardcoded&#39; - every pageload it is the same every time, and therefore, it contains absolutely nothing dynamic. No comments, nothing that could change based on user interaction at all). That HTML/CSS/JS then runs a bunch of web requests within javascript to get the dynamic parts and creates the HTML elements dynamically, injecting them on the fly into the DOM (which is the &#39;HTML&#39; the way the browser knows how to render it, i.e. parsed, turned into a syntax tree, and crucially _the javascript gets to edit it, which is reflected live in what the page looks like_.\r\n\r\nAll those pages (And it is _most of the web_ at this point) cannot be parsed with JSoup. You need something to fully emulate an entire browser (because that javascript can tell the system to scroll the page, and then render a canvas, and then check the canvas and react to that, and then ask for your screen size, and a million other things that are difficult to emulate for a non-browser). Then you can ask the browser for the DOM and go from there.\r\n\r\nThis _is_ possible - &#39;browser automation&#39; exists, e.g. in the form of selenium, but these tools were generally originally designed to let you _test_ your own websites, they weren&#39;t designed to let you scrape existing sites. Selenium specifically, and the general principle of browser based web scraping, is __incredibly slow and complicated__. You&#39;re running an entire browser, which means you need a graphics stack and GBs of memory to spend a second or 3 to process it all.\r\n\r\nGenerally, the obvious way to get at all that dynamic data is __to use the same APIs that the static HTML/CSS/JS is using__ - because APIs don&#39;t change when a designer decides they don&#39;t like the colour of part of the page: They are _designed_ to be easy to use from code. Sites also tend to charge for API usage, though. Generally, the significant hassle of attempting to write the extremely complicated code, and maintain the extremely complicated stack of IAAS you need, and the extremely complicated team of lawyers you need to sort out the business of using automated browsers to parse the web add up to costing far, far more than API access costs. Which is why the vast majority of programmers use those APIs, which means that few good programmers are working on making those browser automation tools run faster.\r\n\r\nThat all combines into: Use the API.\r\n","title":"Jsoup can&#39;t find existing element by class name","body":"<h2>Class line is invalid</h2>\n<p>Space in a <code>class</code> attribute separates class names. Hence, expecting <code>.getElementsByClass(&quot;foo bar&quot;)</code> to work is incorrect - you're asking a lot from JSoup here. What you really want is <code>.getElementsByClass(&quot;foo&quot;)</code> and then get the intersection (the 'overlap') between that and <code>.getElementsByClass(&quot;bar&quot;)</code>.</p>\n<p>Secondly, HTML classes must start with a letter. In other words, <code>-raw</code> is an invalid class name. Given that it is invalid, in the browser/HTML space the general trend is not to hard-crash (but, had it been XHTML, most parser tools would completely refuse this HTML as being invalid), but what <em>does</em> happen is more or less undefined - you shouldn't write invalid HTML. It is possible that JSoup completely ignores '-raw'.</p>\n<p>Thus, we have 2 plausible things that make JSoup not parse this, and <strong>neither is JSoup's fault - it is the fault of this invalid HTML</strong>:</p>\n<ul>\n<li><p>It doesn't let you ask for multiple classes in a single &quot;by class&quot; call. Fix by getting the intersection between all those classes you are actually interested in.</p>\n</li>\n<li><p>It doesn't let you ask for <code>-raw</code>. Simply don't ask for that one.</p>\n</li>\n</ul>\n<h2>Different HTML is returned</h2>\n<p>JSoup parses the HTML. <strong>It does not run any javascript</strong>. Turn javascript off in your browser and retry the request. I bet you get the same 'weird completely neutered HTML'.</p>\n<p>There are various ways to integrate dynamism (e.g. the values of things in db tables, think 'list of movies on youtube', 'streetnames in google maps', 'most recent posts' on a forum site, and so on - anything that isn't 'hardcoded' by the programmers and designers). The usual way <strong>in the past</strong> was templating. In which case, the HTML you get from the browser is very similar to the DOM that the browser ends up showing to your eyeballs.</p>\n<p>However, more and more of the web is now done using a static-HTML+API-calls model: The HTML/CSS/JS served by the server is completely static ('hardcoded' - every pageload it is the same every time, and therefore, it contains absolutely nothing dynamic. No comments, nothing that could change based on user interaction at all). That HTML/CSS/JS then runs a bunch of web requests within javascript to get the dynamic parts and creates the HTML elements dynamically, injecting them on the fly into the DOM (which is the 'HTML' the way the browser knows how to render it, i.e. parsed, turned into a syntax tree, and crucially <em>the javascript gets to edit it, which is reflected live in what the page looks like</em>.</p>\n<p>All those pages (And it is <em>most of the web</em> at this point) cannot be parsed with JSoup. You need something to fully emulate an entire browser (because that javascript can tell the system to scroll the page, and then render a canvas, and then check the canvas and react to that, and then ask for your screen size, and a million other things that are difficult to emulate for a non-browser). Then you can ask the browser for the DOM and go from there.</p>\n<p>This <em>is</em> possible - 'browser automation' exists, e.g. in the form of selenium, but these tools were generally originally designed to let you <em>test</em> your own websites, they weren't designed to let you scrape existing sites. Selenium specifically, and the general principle of browser based web scraping, is <strong>incredibly slow and complicated</strong>. You're running an entire browser, which means you need a graphics stack and GBs of memory to spend a second or 3 to process it all.</p>\n<p>Generally, the obvious way to get at all that dynamic data is <strong>to use the same APIs that the static HTML/CSS/JS is using</strong> - because APIs don't change when a designer decides they don't like the colour of part of the page: They are <em>designed</em> to be easy to use from code. Sites also tend to charge for API usage, though. Generally, the significant hassle of attempting to write the extremely complicated code, and maintain the extremely complicated stack of IAAS you need, and the extremely complicated team of lawyers you need to sort out the business of using automated browsers to parse the web add up to costing far, far more than API access costs. Which is why the vast majority of programmers use those APIs, which means that few good programmers are working on making those browser automation tools run faster.</p>\n<p>That all combines into: Use the API.</p>\n"}],"owner":{"account_id":29076113,"reputation":1,"user_id":22273230,"display_name":"KostromDan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":57,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1690315963,"creation_date":1690143161,"question_id":76750142,"body_markdown":"I&#39;m trying to parse `pastebin` page with all params(likes, views_count, etc). And all fine except raw text.\r\nI know that there is a `\\&lt;paste_id\\&gt;/raw`, but I don&#39;t want to use it since I will have to make 2 requests. And I can&#39;t immediately access `\\&lt;paste_id\\&gt;/raw` because I need all the additional parameters.\r\nNeeded data stores in\r\n\r\n```html\r\n&lt;textarea class=&quot;textarea -raw js-paste-raw&quot;&gt;Text I need to parse&lt;/textarea&gt;\r\n```\r\nI checked that in the response from the `pastebin` server without processing/with `javascript` processing, this element looks exactly the same.\r\n`Jsoup` simply ignores this element as if it doesn&#39;t exist.\r\n\r\n```java\r\nElements raw_test_1 = doc.getElementsByClass(&quot;textarea&quot;);\r\nlog(raw_test_1.size());\r\n\r\nElements raw_test_2 = doc.select(&quot;textarea&quot;);\r\nlog(raw_test_2.size());\r\n\r\nElements raw_test_3 = doc.getElementsByClass(&quot;textarea -raw js-paste-raw&quot;);\r\nlog(raw_test_3.size());\r\n```\r\n\r\nResult:\r\n\r\n`0`\r\n\r\n`0`\r\n\r\n`0`\r\n\r\nIt looks like the `pastebin` developers did something nasty with this element to ruin the lives of those who try to parse their site.\r\nEdge shows that this element has errors.\r\n\r\n[![enter image description here][1]][1]\r\n\r\nWhich confirms that this element of the site is intentionally corrupted.\r\n\r\nupdate:\r\n\r\nI found out the cause of the problem. The response from the `PasteBin` servers is completely different for browsers and `JSoup`. There are more than 900 lines of code for browsers. And 300 for `Jsoup`. `Pastebin` somehow detects that we are parsing the page and issues a neutered response. The raw paste we need is contained in the neutered part of the answer. I tried `.userAgent(&quot;Chrome/4.0.249.0 Safari/532.5&quot;)` but it&#39;s not enough, how to make `pastebin` servers perceive our request as a real request?\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/wwOnG.png","title":"Jsoup can&#39;t find existing element by class name","body":"<p>I'm trying to parse <code>pastebin</code> page with all params(likes, views_count, etc). And all fine except raw text.\nI know that there is a <code>\\&lt;paste_id\\&gt;/raw</code>, but I don't want to use it since I will have to make 2 requests. And I can't immediately access <code>\\&lt;paste_id\\&gt;/raw</code> because I need all the additional parameters.\nNeeded data stores in</p>\n<pre class=\"lang-html prettyprint-override\"><code>&lt;textarea class=&quot;textarea -raw js-paste-raw&quot;&gt;Text I need to parse&lt;/textarea&gt;\n</code></pre>\n<p>I checked that in the response from the <code>pastebin</code> server without processing/with <code>javascript</code> processing, this element looks exactly the same.\n<code>Jsoup</code> simply ignores this element as if it doesn't exist.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Elements raw_test_1 = doc.getElementsByClass(&quot;textarea&quot;);\nlog(raw_test_1.size());\n\nElements raw_test_2 = doc.select(&quot;textarea&quot;);\nlog(raw_test_2.size());\n\nElements raw_test_3 = doc.getElementsByClass(&quot;textarea -raw js-paste-raw&quot;);\nlog(raw_test_3.size());\n</code></pre>\n<p>Result:</p>\n<p><code>0</code></p>\n<p><code>0</code></p>\n<p><code>0</code></p>\n<p>It looks like the <code>pastebin</code> developers did something nasty with this element to ruin the lives of those who try to parse their site.\nEdge shows that this element has errors.</p>\n<p><a href=\"https://i.stack.imgur.com/wwOnG.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/wwOnG.png\" alt=\"enter image description here\" /></a></p>\n<p>Which confirms that this element of the site is intentionally corrupted.</p>\n<p>update:</p>\n<p>I found out the cause of the problem. The response from the <code>PasteBin</code> servers is completely different for browsers and <code>JSoup</code>. There are more than 900 lines of code for browsers. And 300 for <code>Jsoup</code>. <code>Pastebin</code> somehow detects that we are parsing the page and issues a neutered response. The raw paste we need is contained in the neutered part of the answer. I tried <code>.userAgent(&quot;Chrome/4.0.249.0 Safari/532.5&quot;)</code> but it's not enough, how to make <code>pastebin</code> servers perceive our request as a real request?</p>\n"},{"tags":["java","quartz-scheduler","spring-camel"],"comments":[{"owner":{"account_id":1310169,"reputation":3813,"user_id":1258319,"accept_rate":81,"display_name":"Julian"},"score":0,"creation_date":1690318777,"post_id":76766142,"comment_id":135336277,"body_markdown":"I am not sure I understand the question but how would you like to have scheduler running if you no longer add the route to the camel context?","body":"I am not sure I understand the question but how would you like to have scheduler running if you no longer add the route to the camel context?"},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1690323201,"post_id":76766142,"comment_id":135336886,"body_markdown":"Please trim your code to make it easier to find your problem. Follow these guidelines to create a [minimal reproducible example](https://stackoverflow.com/help/minimal-reproducible-example).","body":"Please trim your code to make it easier to find your problem. Follow these guidelines to create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}],"owner":{"account_id":29089927,"reputation":1,"user_id":22284051,"display_name":"ntn"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":59,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690315102,"creation_date":1690315102,"question_id":76766142,"body_markdown":"There is a Springboot application that receives the parameters (what, where) of the route (Apache Camel) and the schedule for its execution (Quartz).\r\nFor example, log a message every second, or send a message to the ActiceMQ queue once.\r\nA database is used to save and restore the schedule in case of an application restart.\r\n\r\nHow to correctly save and restore Apache Camel route parameters on application restart by linking it to its corresponding schedule?\r\n\r\n```\r\npublic class CustomRouter extends RouteBuilder {\r\n\r\n    private final int repeatInterval;\r\n    private final String message;\r\n    private final String destination;\r\n    private final String triggerName;\r\n\r\n    public CustomRouter(\r\n            int repeatInterval, \r\n            String message, \r\n            String destination, \r\n            String triggerName) {\r\n        this.repeatInterval = repeatInterval;\r\n        this.message = message;\r\n        this.destination = destination;\r\n        this.triggerName = triggerName;\r\n    }\r\n\r\n    @Override\r\n    public void configure() throws Exception {\r\n        from(&quot;customQuartz://&quot; \r\n                + triggerName + &quot;?trigger.repeatInterval=&quot; + repeatInterval)\r\n                .setBody(simple(this.message))\r\n                .to(destination);\r\n    }\r\n}\r\n```\r\n\r\n```\r\n@Service\r\npublic class CamelStarter implements InitializingBean, DisposableBean {\r\n    \r\n    private final QuartzComponent customQuartz;\r\n    private DefaultCamelContext camelCustomContext;\r\n\r\n    public CamelStarter(QuartzComponent customQuartz) {\r\n        this.customQuartz = customQuartz;\r\n    }\r\n    \r\n    @Override\r\n    public void afterPropertiesSet() throws Exception {\r\n        camelCustomContext = new DefaultCamelContext();\r\n        camelCustomContext.addComponent(&quot;customQuartz&quot;, customQuartz);\r\n        camelCustomContext.setName(&quot;camelCustomContext&quot;);\r\n        \r\n        camelCustomContext.addRoutes(new CustomRouter(\r\n                1000, \r\n                &quot;CustomRouter1&quot;, \r\n                &quot;log:customLog1&quot;, \r\n                &quot;customRouterTrigger1&quot;));\r\n        \r\n        camelCustomContext.start();\r\n    }\r\n\r\n    @Override\r\n    public void destroy() throws Exception {\r\n        camelCustomContext.stop();\r\n    }\r\n}\r\n```\r\n\r\n```\r\n@Configuration\r\npublic class CamelCustomConfiguration {\r\n\r\n    @Bean\r\n    public SchedulerFactoryBean customSchedulerFactory(\r\n            DataSource dataSource, QuartzProperties quartzProperties) {\r\n        Properties properties = new Properties();\r\n        properties.putAll(quartzProperties.getProperties());\r\n\r\n        SchedulerFactoryBean factory = new SchedulerFactoryBean();\r\n        factory.setOverwriteExistingJobs(true);\r\n        factory.setWaitForJobsToCompleteOnShutdown(true);\r\n        factory.setDataSource(dataSource);\r\n        factory.setQuartzProperties(properties);\r\n        factory.setJobFactory(new SpringBeanJobFactory());\r\n        return factory;\r\n    }\r\n\r\n    @Bean\r\n    public Scheduler customScheduler(\r\n            DataSource dataSource, QuartzProperties quartzProperties) {\r\n        return customSchedulerFactory(dataSource, quartzProperties).getScheduler();\r\n    }\r\n\r\n    @Bean\r\n    public QuartzComponent customquartz(\r\n            DataSource dataSource,\r\n            QuartzProperties quartzProperties) {\r\n        QuartzComponent component = new QuartzComponent();\r\n        component.setScheduler(customScheduler(dataSource, quartzProperties));\r\n        return component;\r\n    }\r\n}\r\n```\r\n\r\n```\r\nspring.datasource.url=jdbc:postgresql://localhost:5432/schedule_module\r\nspring.datasource.username=postgres\r\nspring.datasource.password=1111\r\nspring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect\r\nspring.jpa.hibernate.ddl-auto=update\r\n\r\nspring.quartz.job-store-type=jdbc\r\nspring.quartz.properties.org.quartz.scheduler.instanceId=CustomClusteredScheduler\r\nspring.quartz.properties.org.quartz.jobStore.driverDelegateClass=org.quartz.impl.jdbcjobstore.PostgreSQLDelegate\r\nspring.quartz.properties.org.quartz.jobStore.tablePrefix=qrtz_\r\nspring.quartz.properties.org.quartz.jobStore.isClustered=true\r\n```\r\n\r\nAt the 1st launch of the application, the message is displayed in the Log and entries about the route schedule appear in the database:\r\n\r\n```\r\n2023-07-25 22:53:04.929  INFO 9928 --- [           main] r.s.n.p.s.ScheduleAppApplication         : Starting ScheduleAppApplication using Java 17.0.6 on DESKTOP-6SHGJTA with PID 9928 (C:\\work\\dev\\testsapps\\springboot-camel-quartz\\schedule-app\\target\\classes started by baa in C:\\work\\dev\\testsapps\\springboot-camel-quartz\\schedule-app)\r\n2023-07-25 22:53:04.932  INFO 9928 --- [           main] r.s.n.p.s.ScheduleAppApplication         : No active profile set, falling back to 1 default profile: &quot;default&quot;\r\n2023-07-25 22:53:05.775  INFO 9928 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...\r\n2023-07-25 22:53:05.902  INFO 9928 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.\r\n2023-07-25 22:53:05.965  INFO 9928 --- [           main] org.quartz.impl.StdSchedulerFactory      : Using default implementation for ThreadExecutor\r\n2023-07-25 22:53:05.978  INFO 9928 --- [           main] org.quartz.core.SchedulerSignalerImpl    : Initialized Scheduler Signaller of type: class org.quartz.core.SchedulerSignalerImpl\r\n2023-07-25 22:53:05.978  INFO 9928 --- [           main] org.quartz.core.QuartzScheduler          : Quartz Scheduler v.2.3.2 created.\r\n2023-07-25 22:53:05.982  INFO 9928 --- [           main] o.s.s.quartz.LocalDataSourceJobStore     : Using db table-based data access locking (synchronization).\r\n2023-07-25 22:53:05.984  INFO 9928 --- [           main] o.s.s.quartz.LocalDataSourceJobStore     : JobStoreCMT initialized.\r\n2023-07-25 22:53:05.985  INFO 9928 --- [           main] org.quartz.core.QuartzScheduler          : Scheduler meta-data: Quartz Scheduler (v2.3.2) &#39;customSchedulerFactory&#39; with instanceId &#39;CustomClusteredScheduler&#39;\r\n  Scheduler class: &#39;org.quartz.core.QuartzScheduler&#39; - running locally.\r\n  NOT STARTED.\r\n  Currently in standby mode.\r\n  Number of jobs executed: 0\r\n  Using thread pool &#39;org.quartz.simpl.SimpleThreadPool&#39; - with 10 threads.\r\n  Using job-store &#39;org.springframework.scheduling.quartz.LocalDataSourceJobStore&#39; - which supports persistence. and is clustered.\r\n\r\n2023-07-25 22:53:05.986  INFO 9928 --- [           main] org.quartz.impl.StdSchedulerFactory      : Quartz scheduler &#39;customSchedulerFactory&#39; initialized from an externally provided properties instance.\r\n2023-07-25 22:53:05.986  INFO 9928 --- [           main] org.quartz.impl.StdSchedulerFactory      : Quartz scheduler version: 2.3.2\r\n2023-07-25 22:53:05.986  INFO 9928 --- [           main] org.quartz.core.QuartzScheduler          : JobFactory set to: org.springframework.scheduling.quartz.SpringBeanJobFactory@4d8286c4\r\n2023-07-25 22:53:06.441  INFO 9928 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.21.0 (camelCustomContext) is starting\r\n2023-07-25 22:53:06.501  INFO 9928 --- [           main] o.a.c.component.quartz.QuartzEndpoint    : Job Camel_camelCustomContext.customRouterTrigger1 (cron=null, triggerType=SimpleTriggerImpl, jobClass=CamelJob) is scheduled. Next fire date is 2023-07-25T22:53:06.464+0300\r\n2023-07-25 22:53:06.510  INFO 9928 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Routes startup (started:1)\r\n2023-07-25 22:53:06.510  INFO 9928 --- [           main] o.a.c.impl.engine.AbstractCamelContext   :     Started route1 (customQuartz://customRouterTrigger1)\r\n2023-07-25 22:53:06.510  INFO 9928 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.21.0 (camelCustomContext) started in 173ms (build:3ms init:102ms start:68ms)\r\n2023-07-25 22:53:06.511  INFO 9928 --- [           main] o.a.c.component.quartz.QuartzComponent   : Starting Quartz scheduler: org.quartz.impl.StdScheduler@889a8a8\r\n2023-07-25 22:53:06.522  INFO 9928 --- [           main] org.quartz.core.QuartzScheduler          : Scheduler customSchedulerFactory_$_CustomClusteredScheduler started.\r\n2023-07-25 22:53:06.586  INFO 9928 --- [actory_Worker-1] customLog1                               : Exchange[ExchangePattern: InOnly, BodyType: String, Body: CustomRouter1]\r\n2023-07-25 22:53:06.787  INFO 9928 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.21.0 (camel-1) is starting\r\n2023-07-25 22:53:06.788  INFO 9928 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Routes startup (started:0)\r\n2023-07-25 22:53:06.788  INFO 9928 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.21.0 (camel-1) started in 61ms (build:42ms init:19ms start:0ms)\r\n2023-07-25 22:53:06.793  INFO 9928 --- [           main] r.s.n.p.s.ScheduleAppApplication         : Started ScheduleAppApplication in 2.205 seconds (JVM running for 2.508)\r\n2023-07-25 22:53:07.472  INFO 9928 --- [actory_Worker-2] customLog1                               : Exchange[ExchangePattern: InOnly, BodyType: String, Body: CustomRouter1]\r\n2023-07-25 22:53:08.470  INFO 9928 --- [actory_Worker-3] customLog1                               : Exchange[ExchangePattern: InOnly, BodyType: String, Body: CustomRouter1]\r\n2023-07-25 22:53:09.469  INFO 9928 --- [actory_Worker-4] customLog1                               : Exchange[ExchangePattern: InOnly, BodyType: String, Body: CustomRouter1]\r\n2023-07-25 22:53:10.473  INFO 9928 --- [actory_Worker-5] customLog1                               : Exchange[ExchangePattern: InOnly, BodyType: String, Body: CustomRouter1]\r\n2023-07-25 22:53:11.470  INFO 9928 --- [actory_Worker-6] customLog1                               : Exchange[ExchangePattern: InOnly, BodyType: String, Body: CustomRouter1]\r\n```\r\n\r\nBut if stop the application, remove the line with the addition of the route:\r\n\r\n```\r\n@Override\r\n    public void afterPropertiesSet() throws Exception {\r\n        camelCustomContext = new DefaultCamelContext();\r\n        camelCustomContext.addComponent(&quot;customQuartz&quot;, customQuartz);\r\n        camelCustomContext.setName(&quot;camelCustomContext&quot;);\r\n        \r\n        camelCustomContext.start();\r\n    }\r\n```\r\n\r\nand start the application again, then a message is not displayed in the Log:\r\n\r\n```\r\n2023-07-25 22:57:11.225  INFO 16864 --- [           main] org.quartz.impl.StdSchedulerFactory      : Quartz scheduler &#39;customSchedulerFactory&#39; initialized from an externally provided properties instance.\r\n2023-07-25 22:57:11.225  INFO 16864 --- [           main] org.quartz.impl.StdSchedulerFactory      : Quartz scheduler version: 2.3.2\r\n2023-07-25 22:57:11.225  INFO 16864 --- [           main] org.quartz.core.QuartzScheduler          : JobFactory set to: org.springframework.scheduling.quartz.SpringBeanJobFactory@6778aea6\r\n2023-07-25 22:57:11.603  INFO 16864 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.21.0 (camelCustomContext) is starting\r\n2023-07-25 22:57:11.607  INFO 16864 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Routes startup (started:0)\r\n2023-07-25 22:57:11.607  INFO 16864 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.21.0 (camelCustomContext) started in 29ms (build:3ms init:23ms start:3ms)\r\n2023-07-25 22:57:11.610  INFO 16864 --- [           main] o.a.c.component.quartz.QuartzComponent   : Starting Quartz scheduler: org.quartz.impl.StdScheduler@23a918c7\r\n2023-07-25 22:57:11.636  INFO 16864 --- [           main] o.s.s.quartz.LocalDataSourceJobStore     : ClusterManager: detected 1 failed or restarted instances.\r\n2023-07-25 22:57:11.636  INFO 16864 --- [           main] o.s.s.quartz.LocalDataSourceJobStore     : ClusterManager: Scanning for instance &quot;CustomClusteredScheduler&quot;&#39;s failed in-progress jobs.\r\n2023-07-25 22:57:11.645  INFO 16864 --- [           main] o.s.s.quartz.LocalDataSourceJobStore     : ClusterManager: ......Freed 1 acquired trigger(s).\r\n2023-07-25 22:57:11.650  INFO 16864 --- [           main] org.quartz.core.QuartzScheduler          : Scheduler customSchedulerFactory_$_CustomClusteredScheduler started.\r\n2023-07-25 22:57:11.708  WARN 16864 --- [actory_Worker-1] o.a.camel.component.quartz.CamelJob      : Cannot find existing QuartzEndpoint with uri: customQuartz://customRouterTrigger1?trigger.repeatInterval=1000. Creating new endpoint instance.\r\n2023-07-25 22:57:11.717  WARN 16864 --- [actory_Worker-2] o.a.camel.component.quartz.CamelJob      : Cannot find existing QuartzEndpoint with uri: customQuartz://customRouterTrigger1?trigger.repeatInterval=1000. Creating new endpoint instance.\r\n2023-07-25 22:57:11.732  WARN 16864 --- [actory_Worker-3] o.a.camel.component.quartz.CamelJob      : Cannot find existing QuartzEndpoint with uri: customQuartz://customRouterTrigger1?trigger.repeatInterval=1000. Creating new endpoint instance.\r\n2023-07-25 22:57:11.744  INFO 16864 --- [actory_Worker-1] o.a.c.component.quartz.QuartzEndpoint    : Job Camel_camelCustomContext.customRouterTrigger1 (cron=null, triggerType=SimpleTriggerImpl, jobClass=CamelJob) is scheduled. Next fire date is null\r\n2023-07-25 22:57:11.744  INFO 16864 --- [actory_Worker-2] o.a.c.component.quartz.QuartzEndpoint    : Job Camel_camelCustomContext.customRouterTrigger1 (cron=null, triggerType=SimpleTriggerImpl, jobClass=CamelJob) is scheduled. Next fire date is null\r\n2023-07-25 22:57:11.744  INFO 16864 --- [actory_Worker-3] o.a.c.component.quartz.QuartzEndpoint    : Job Camel_camelCustomContext.customRouterTrigger1 (cron=null, triggerType=SimpleTriggerImpl, jobClass=CamelJob) is scheduled. Next fire date is null\r\n2023-07-25 22:57:11.907  INFO 16864 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.21.0 (camel-1) is starting\r\n2023-07-25 22:57:11.908  INFO 16864 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Routes startup (started:0)\r\n2023-07-25 22:57:11.908  INFO 16864 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.21.0 (camel-1) started in 69ms (build:51ms init:18ms start:0ms)\r\n2023-07-25 22:57:11.914  INFO 16864 --- [           main] r.s.n.p.s.ScheduleAppApplication         : Started ScheduleAppApplication in 2.054 seconds (JVM running for 2.394)\r\n```\r\n\r\n\r\n","title":"How to save and bind Camel dynamic route and Quartz scheduler in DB and restore it after application restart?","body":"<p>There is a Springboot application that receives the parameters (what, where) of the route (Apache Camel) and the schedule for its execution (Quartz).\nFor example, log a message every second, or send a message to the ActiceMQ queue once.\nA database is used to save and restore the schedule in case of an application restart.</p>\n<p>How to correctly save and restore Apache Camel route parameters on application restart by linking it to its corresponding schedule?</p>\n<pre><code>public class CustomRouter extends RouteBuilder {\n\n    private final int repeatInterval;\n    private final String message;\n    private final String destination;\n    private final String triggerName;\n\n    public CustomRouter(\n            int repeatInterval, \n            String message, \n            String destination, \n            String triggerName) {\n        this.repeatInterval = repeatInterval;\n        this.message = message;\n        this.destination = destination;\n        this.triggerName = triggerName;\n    }\n\n    @Override\n    public void configure() throws Exception {\n        from(&quot;customQuartz://&quot; \n                + triggerName + &quot;?trigger.repeatInterval=&quot; + repeatInterval)\n                .setBody(simple(this.message))\n                .to(destination);\n    }\n}\n</code></pre>\n<pre><code>@Service\npublic class CamelStarter implements InitializingBean, DisposableBean {\n    \n    private final QuartzComponent customQuartz;\n    private DefaultCamelContext camelCustomContext;\n\n    public CamelStarter(QuartzComponent customQuartz) {\n        this.customQuartz = customQuartz;\n    }\n    \n    @Override\n    public void afterPropertiesSet() throws Exception {\n        camelCustomContext = new DefaultCamelContext();\n        camelCustomContext.addComponent(&quot;customQuartz&quot;, customQuartz);\n        camelCustomContext.setName(&quot;camelCustomContext&quot;);\n        \n        camelCustomContext.addRoutes(new CustomRouter(\n                1000, \n                &quot;CustomRouter1&quot;, \n                &quot;log:customLog1&quot;, \n                &quot;customRouterTrigger1&quot;));\n        \n        camelCustomContext.start();\n    }\n\n    @Override\n    public void destroy() throws Exception {\n        camelCustomContext.stop();\n    }\n}\n</code></pre>\n<pre><code>@Configuration\npublic class CamelCustomConfiguration {\n\n    @Bean\n    public SchedulerFactoryBean customSchedulerFactory(\n            DataSource dataSource, QuartzProperties quartzProperties) {\n        Properties properties = new Properties();\n        properties.putAll(quartzProperties.getProperties());\n\n        SchedulerFactoryBean factory = new SchedulerFactoryBean();\n        factory.setOverwriteExistingJobs(true);\n        factory.setWaitForJobsToCompleteOnShutdown(true);\n        factory.setDataSource(dataSource);\n        factory.setQuartzProperties(properties);\n        factory.setJobFactory(new SpringBeanJobFactory());\n        return factory;\n    }\n\n    @Bean\n    public Scheduler customScheduler(\n            DataSource dataSource, QuartzProperties quartzProperties) {\n        return customSchedulerFactory(dataSource, quartzProperties).getScheduler();\n    }\n\n    @Bean\n    public QuartzComponent customquartz(\n            DataSource dataSource,\n            QuartzProperties quartzProperties) {\n        QuartzComponent component = new QuartzComponent();\n        component.setScheduler(customScheduler(dataSource, quartzProperties));\n        return component;\n    }\n}\n</code></pre>\n<pre><code>spring.datasource.url=jdbc:postgresql://localhost:5432/schedule_module\nspring.datasource.username=postgres\nspring.datasource.password=1111\nspring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect\nspring.jpa.hibernate.ddl-auto=update\n\nspring.quartz.job-store-type=jdbc\nspring.quartz.properties.org.quartz.scheduler.instanceId=CustomClusteredScheduler\nspring.quartz.properties.org.quartz.jobStore.driverDelegateClass=org.quartz.impl.jdbcjobstore.PostgreSQLDelegate\nspring.quartz.properties.org.quartz.jobStore.tablePrefix=qrtz_\nspring.quartz.properties.org.quartz.jobStore.isClustered=true\n</code></pre>\n<p>At the 1st launch of the application, the message is displayed in the Log and entries about the route schedule appear in the database:</p>\n<pre><code>2023-07-25 22:53:04.929  INFO 9928 --- [           main] r.s.n.p.s.ScheduleAppApplication         : Starting ScheduleAppApplication using Java 17.0.6 on DESKTOP-6SHGJTA with PID 9928 (C:\\work\\dev\\testsapps\\springboot-camel-quartz\\schedule-app\\target\\classes started by baa in C:\\work\\dev\\testsapps\\springboot-camel-quartz\\schedule-app)\n2023-07-25 22:53:04.932  INFO 9928 --- [           main] r.s.n.p.s.ScheduleAppApplication         : No active profile set, falling back to 1 default profile: &quot;default&quot;\n2023-07-25 22:53:05.775  INFO 9928 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...\n2023-07-25 22:53:05.902  INFO 9928 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.\n2023-07-25 22:53:05.965  INFO 9928 --- [           main] org.quartz.impl.StdSchedulerFactory      : Using default implementation for ThreadExecutor\n2023-07-25 22:53:05.978  INFO 9928 --- [           main] org.quartz.core.SchedulerSignalerImpl    : Initialized Scheduler Signaller of type: class org.quartz.core.SchedulerSignalerImpl\n2023-07-25 22:53:05.978  INFO 9928 --- [           main] org.quartz.core.QuartzScheduler          : Quartz Scheduler v.2.3.2 created.\n2023-07-25 22:53:05.982  INFO 9928 --- [           main] o.s.s.quartz.LocalDataSourceJobStore     : Using db table-based data access locking (synchronization).\n2023-07-25 22:53:05.984  INFO 9928 --- [           main] o.s.s.quartz.LocalDataSourceJobStore     : JobStoreCMT initialized.\n2023-07-25 22:53:05.985  INFO 9928 --- [           main] org.quartz.core.QuartzScheduler          : Scheduler meta-data: Quartz Scheduler (v2.3.2) 'customSchedulerFactory' with instanceId 'CustomClusteredScheduler'\n  Scheduler class: 'org.quartz.core.QuartzScheduler' - running locally.\n  NOT STARTED.\n  Currently in standby mode.\n  Number of jobs executed: 0\n  Using thread pool 'org.quartz.simpl.SimpleThreadPool' - with 10 threads.\n  Using job-store 'org.springframework.scheduling.quartz.LocalDataSourceJobStore' - which supports persistence. and is clustered.\n\n2023-07-25 22:53:05.986  INFO 9928 --- [           main] org.quartz.impl.StdSchedulerFactory      : Quartz scheduler 'customSchedulerFactory' initialized from an externally provided properties instance.\n2023-07-25 22:53:05.986  INFO 9928 --- [           main] org.quartz.impl.StdSchedulerFactory      : Quartz scheduler version: 2.3.2\n2023-07-25 22:53:05.986  INFO 9928 --- [           main] org.quartz.core.QuartzScheduler          : JobFactory set to: org.springframework.scheduling.quartz.SpringBeanJobFactory@4d8286c4\n2023-07-25 22:53:06.441  INFO 9928 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.21.0 (camelCustomContext) is starting\n2023-07-25 22:53:06.501  INFO 9928 --- [           main] o.a.c.component.quartz.QuartzEndpoint    : Job Camel_camelCustomContext.customRouterTrigger1 (cron=null, triggerType=SimpleTriggerImpl, jobClass=CamelJob) is scheduled. Next fire date is 2023-07-25T22:53:06.464+0300\n2023-07-25 22:53:06.510  INFO 9928 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Routes startup (started:1)\n2023-07-25 22:53:06.510  INFO 9928 --- [           main] o.a.c.impl.engine.AbstractCamelContext   :     Started route1 (customQuartz://customRouterTrigger1)\n2023-07-25 22:53:06.510  INFO 9928 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.21.0 (camelCustomContext) started in 173ms (build:3ms init:102ms start:68ms)\n2023-07-25 22:53:06.511  INFO 9928 --- [           main] o.a.c.component.quartz.QuartzComponent   : Starting Quartz scheduler: org.quartz.impl.StdScheduler@889a8a8\n2023-07-25 22:53:06.522  INFO 9928 --- [           main] org.quartz.core.QuartzScheduler          : Scheduler customSchedulerFactory_$_CustomClusteredScheduler started.\n2023-07-25 22:53:06.586  INFO 9928 --- [actory_Worker-1] customLog1                               : Exchange[ExchangePattern: InOnly, BodyType: String, Body: CustomRouter1]\n2023-07-25 22:53:06.787  INFO 9928 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.21.0 (camel-1) is starting\n2023-07-25 22:53:06.788  INFO 9928 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Routes startup (started:0)\n2023-07-25 22:53:06.788  INFO 9928 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.21.0 (camel-1) started in 61ms (build:42ms init:19ms start:0ms)\n2023-07-25 22:53:06.793  INFO 9928 --- [           main] r.s.n.p.s.ScheduleAppApplication         : Started ScheduleAppApplication in 2.205 seconds (JVM running for 2.508)\n2023-07-25 22:53:07.472  INFO 9928 --- [actory_Worker-2] customLog1                               : Exchange[ExchangePattern: InOnly, BodyType: String, Body: CustomRouter1]\n2023-07-25 22:53:08.470  INFO 9928 --- [actory_Worker-3] customLog1                               : Exchange[ExchangePattern: InOnly, BodyType: String, Body: CustomRouter1]\n2023-07-25 22:53:09.469  INFO 9928 --- [actory_Worker-4] customLog1                               : Exchange[ExchangePattern: InOnly, BodyType: String, Body: CustomRouter1]\n2023-07-25 22:53:10.473  INFO 9928 --- [actory_Worker-5] customLog1                               : Exchange[ExchangePattern: InOnly, BodyType: String, Body: CustomRouter1]\n2023-07-25 22:53:11.470  INFO 9928 --- [actory_Worker-6] customLog1                               : Exchange[ExchangePattern: InOnly, BodyType: String, Body: CustomRouter1]\n</code></pre>\n<p>But if stop the application, remove the line with the addition of the route:</p>\n<pre><code>@Override\n    public void afterPropertiesSet() throws Exception {\n        camelCustomContext = new DefaultCamelContext();\n        camelCustomContext.addComponent(&quot;customQuartz&quot;, customQuartz);\n        camelCustomContext.setName(&quot;camelCustomContext&quot;);\n        \n        camelCustomContext.start();\n    }\n</code></pre>\n<p>and start the application again, then a message is not displayed in the Log:</p>\n<pre><code>2023-07-25 22:57:11.225  INFO 16864 --- [           main] org.quartz.impl.StdSchedulerFactory      : Quartz scheduler 'customSchedulerFactory' initialized from an externally provided properties instance.\n2023-07-25 22:57:11.225  INFO 16864 --- [           main] org.quartz.impl.StdSchedulerFactory      : Quartz scheduler version: 2.3.2\n2023-07-25 22:57:11.225  INFO 16864 --- [           main] org.quartz.core.QuartzScheduler          : JobFactory set to: org.springframework.scheduling.quartz.SpringBeanJobFactory@6778aea6\n2023-07-25 22:57:11.603  INFO 16864 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.21.0 (camelCustomContext) is starting\n2023-07-25 22:57:11.607  INFO 16864 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Routes startup (started:0)\n2023-07-25 22:57:11.607  INFO 16864 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.21.0 (camelCustomContext) started in 29ms (build:3ms init:23ms start:3ms)\n2023-07-25 22:57:11.610  INFO 16864 --- [           main] o.a.c.component.quartz.QuartzComponent   : Starting Quartz scheduler: org.quartz.impl.StdScheduler@23a918c7\n2023-07-25 22:57:11.636  INFO 16864 --- [           main] o.s.s.quartz.LocalDataSourceJobStore     : ClusterManager: detected 1 failed or restarted instances.\n2023-07-25 22:57:11.636  INFO 16864 --- [           main] o.s.s.quartz.LocalDataSourceJobStore     : ClusterManager: Scanning for instance &quot;CustomClusteredScheduler&quot;'s failed in-progress jobs.\n2023-07-25 22:57:11.645  INFO 16864 --- [           main] o.s.s.quartz.LocalDataSourceJobStore     : ClusterManager: ......Freed 1 acquired trigger(s).\n2023-07-25 22:57:11.650  INFO 16864 --- [           main] org.quartz.core.QuartzScheduler          : Scheduler customSchedulerFactory_$_CustomClusteredScheduler started.\n2023-07-25 22:57:11.708  WARN 16864 --- [actory_Worker-1] o.a.camel.component.quartz.CamelJob      : Cannot find existing QuartzEndpoint with uri: customQuartz://customRouterTrigger1?trigger.repeatInterval=1000. Creating new endpoint instance.\n2023-07-25 22:57:11.717  WARN 16864 --- [actory_Worker-2] o.a.camel.component.quartz.CamelJob      : Cannot find existing QuartzEndpoint with uri: customQuartz://customRouterTrigger1?trigger.repeatInterval=1000. Creating new endpoint instance.\n2023-07-25 22:57:11.732  WARN 16864 --- [actory_Worker-3] o.a.camel.component.quartz.CamelJob      : Cannot find existing QuartzEndpoint with uri: customQuartz://customRouterTrigger1?trigger.repeatInterval=1000. Creating new endpoint instance.\n2023-07-25 22:57:11.744  INFO 16864 --- [actory_Worker-1] o.a.c.component.quartz.QuartzEndpoint    : Job Camel_camelCustomContext.customRouterTrigger1 (cron=null, triggerType=SimpleTriggerImpl, jobClass=CamelJob) is scheduled. Next fire date is null\n2023-07-25 22:57:11.744  INFO 16864 --- [actory_Worker-2] o.a.c.component.quartz.QuartzEndpoint    : Job Camel_camelCustomContext.customRouterTrigger1 (cron=null, triggerType=SimpleTriggerImpl, jobClass=CamelJob) is scheduled. Next fire date is null\n2023-07-25 22:57:11.744  INFO 16864 --- [actory_Worker-3] o.a.c.component.quartz.QuartzEndpoint    : Job Camel_camelCustomContext.customRouterTrigger1 (cron=null, triggerType=SimpleTriggerImpl, jobClass=CamelJob) is scheduled. Next fire date is null\n2023-07-25 22:57:11.907  INFO 16864 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.21.0 (camel-1) is starting\n2023-07-25 22:57:11.908  INFO 16864 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Routes startup (started:0)\n2023-07-25 22:57:11.908  INFO 16864 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.21.0 (camel-1) started in 69ms (build:51ms init:18ms start:0ms)\n2023-07-25 22:57:11.914  INFO 16864 --- [           main] r.s.n.p.s.ScheduleAppApplication         : Started ScheduleAppApplication in 2.054 seconds (JVM running for 2.394)\n</code></pre>\n"},{"tags":["java","static","calendar","thread-safety"],"comments":[{"owner":{"account_id":399566,"reputation":5316,"user_id":765009,"accept_rate":60,"display_name":"toto2"},"score":0,"creation_date":1307300249,"post_id":6245053,"comment_id":7281079,"body_markdown":"Is your static calendar just a fixed date?","body":"Is your static calendar just a fixed date?"},{"owner":{"account_id":218146,"reputation":6489,"user_id":474326,"accept_rate":84,"display_name":"cody"},"score":0,"creation_date":1307300255,"post_id":6245053,"comment_id":7281081,"body_markdown":"maybe it would help to make it &quot;volatile&quot; ?","body":"maybe it would help to make it &quot;volatile&quot; ?"},{"owner":{"account_id":218146,"reputation":6489,"user_id":474326,"accept_rate":84,"display_name":"cody"},"score":0,"creation_date":1307300357,"post_id":6245053,"comment_id":7281097,"body_markdown":"no, I just don&#39;t want to create so many instances - for every call to my methods, as that possibly could take time.","body":"no, I just don&#39;t want to create so many instances - for every call to my methods, as that possibly could take time."},{"owner":{"account_id":399566,"reputation":5316,"user_id":765009,"accept_rate":60,"display_name":"toto2"},"score":0,"creation_date":1307300446,"post_id":6245053,"comment_id":7281107,"body_markdown":"You mean you are worried about the performance hit of many calls to the constructor?","body":"You mean you are worried about the performance hit of many calls to the constructor?"},{"owner":{"account_id":218146,"reputation":6489,"user_id":474326,"accept_rate":84,"display_name":"cody"},"score":0,"creation_date":1307300825,"post_id":6245053,"comment_id":7281159,"body_markdown":"Yes, not at least as the code is for mobile devices..","body":"Yes, not at least as the code is for mobile devices.."},{"owner":{"account_id":2293921,"reputation":9958,"user_id":2015912,"accept_rate":70,"display_name":"scottb"},"score":2,"creation_date":1370540140,"post_id":6245053,"comment_id":24507638,"body_markdown":"I am beginning to conclude that Calendar should not be regarded as simply &quot;not thread safe.&quot;  It should be labeled &quot;thread hostile&quot;.","body":"I am beginning to conclude that Calendar should not be regarded as simply &quot;not thread safe.&quot;  It should be labeled &quot;thread hostile&quot;."}],"answers":[{"comments":[{"owner":{"account_id":2293921,"reputation":9958,"user_id":2015912,"accept_rate":70,"display_name":"scottb"},"score":4,"creation_date":1370540057,"post_id":6245077,"comment_id":24507588,"body_markdown":"Are you really suggesting that making a singleton of a mutable, non-thread safe object will help make its class thread safe?  Really?","body":"Are you really suggesting that making a singleton of a mutable, non-thread safe object will help make its class thread safe?  Really?"}],"tags":[],"owner":{"account_id":370140,"reputation":18565,"user_id":717898,"accept_rate":86,"display_name":"Andrew Lazarus"},"comment_count":1,"down_vote_count":2,"up_vote_count":1,"is_accepted":false,"score":-1,"last_activity_date":1513606224,"creation_date":1307300060,"answer_id":6245077,"question_id":6245053,"body_markdown":"Create a `Calendar` as a local variable in the method. If you need the same calendar across methods, you may be using statics where a (singleton or quasi-singleton) object would be more appropriate.","title":"How to make a static Calendar thread safe","body":"<p>Create a <code>Calendar</code> as a local variable in the method. If you need the same calendar across methods, you may be using statics where a (singleton or quasi-singleton) object would be more appropriate.</p>\n"},{"comments":[{"owner":{"account_id":266709,"reputation":11856,"user_id":554431,"display_name":"bestsss"},"score":0,"creation_date":1307300492,"post_id":6245086,"comment_id":7281111,"body_markdown":"If you clone a template, you dont need synchronized block.As the template itself is immutable.","body":"If you clone a template, you dont need synchronized block.As the template itself is immutable."},{"owner":{"account_id":23121,"reputation":527376,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":0,"creation_date":1307300519,"post_id":6245086,"comment_id":7281116,"body_markdown":"Even though a read on Calendar updates internal state, can you give an example of when two threads might try to set different values for that state?","body":"Even though a read on Calendar updates internal state, can you give an example of when two threads might try to set different values for that state?"},{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":0,"creation_date":1307300632,"post_id":6245086,"comment_id":7281135,"body_markdown":"@bestsss: Well, that depends on whether clone itself is thread-safe. Given the lack of thread safety in the rest of `Calendar`, I wouldn&#39;t want to rely on it.","body":"@bestsss: Well, that depends on whether clone itself is thread-safe. Given the lack of thread safety in the rest of <code>Calendar</code>, I wouldn&#39;t want to rely on it."},{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":1,"creation_date":1307300756,"post_id":6245086,"comment_id":7281149,"body_markdown":"@Peter: Imagine if `areFieldsSet` becomes *visible* as `true` to one thread due to the computation in another before the computed field values themselves become visible. It would potentially be possible for one thread to read *some* old field values and *some* new ones, leading to weird results. I don&#39;t like trying to reason about implementation details to decide whether or not that&#39;s possible.","body":"@Peter: Imagine if <code>areFieldsSet</code> becomes <i>visible</i> as <code>true</code> to one thread due to the computation in another before the computed field values themselves become visible. It would potentially be possible for one thread to read <i>some</i> old field values and <i>some</i> new ones, leading to weird results. I don&#39;t like trying to reason about implementation details to decide whether or not that&#39;s possible."},{"owner":{"account_id":23121,"reputation":527376,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":0,"creation_date":1307301165,"post_id":6245086,"comment_id":7281216,"body_markdown":"@Jon, I agree the class is complex enough that its hard to determine all the possible things which could go wrong. It has some long fields, non volatile fields which could be read incorrectly if changed.","body":"@Jon, I agree the class is complex enough that its hard to determine all the possible things which could go wrong. It has some long fields, non volatile fields which could be read incorrectly if changed."},{"owner":{"account_id":266709,"reputation":11856,"user_id":554431,"display_name":"bestsss"},"score":0,"creation_date":1307301304,"post_id":6245086,"comment_id":7281236,"body_markdown":"@Jon, `clone()` is threadsafe (in a way that can be called concurrently with itself), i dont know a single class (in the JRE) that alters its internal state during `clone()`. Perhaps unclear, if you have a template you just clone() it. If you need to alter the template, clone it, alter it, replace the reference (needs volatile, or better AtomicReference w/ CAS)","body":"@Jon, <code>clone()</code> is threadsafe (in a way that can be called concurrently with itself), i dont know a single class (in the JRE) that alters its internal state during <code>clone()</code>. Perhaps unclear, if you have a template you just clone() it. If you need to alter the template, clone it, alter it, replace the reference (needs volatile, or better AtomicReference w/ CAS)"},{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":0,"creation_date":1307301382,"post_id":6245086,"comment_id":7281251,"body_markdown":"@bestsss: I would *expect* `clone()` to be thread-safe, but given the nastiness of `Calendar`, I&#39;d lock to be sure anyway. Or rather, I&#39;d just avoid using `Calendar` to start with :)","body":"@bestsss: I would <i>expect</i> <code>clone()</code> to be thread-safe, but given the nastiness of <code>Calendar</code>, I&#39;d lock to be sure anyway. Or rather, I&#39;d just avoid using <code>Calendar</code> to start with :)"},{"owner":{"account_id":266709,"reputation":11856,"user_id":554431,"display_name":"bestsss"},"score":0,"creation_date":1307301494,"post_id":6245086,"comment_id":7281275,"body_markdown":"@Jon, dunno why the backlash to Calendar, never ever had issues with.","body":"@Jon, dunno why the backlash to Calendar, never ever had issues with."},{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":0,"creation_date":1307301757,"post_id":6245086,"comment_id":7281315,"body_markdown":"@bestsss: It&#39;s got a horrible API, it&#39;s not thread-safe, it doesn&#39;t let you represent all the different kinds of date/time you might want to represent, it&#39;s mutable... it&#39;s wrong in just about every way I can think of. Joda Time is *so* much nicer. (There are still flaws in Joda Time, some of which I&#39;m hopefully removing in Noda Time, but it&#39;s a lot better than `Calendar`.)","body":"@bestsss: It&#39;s got a horrible API, it&#39;s not thread-safe, it doesn&#39;t let you represent all the different kinds of date/time you might want to represent, it&#39;s mutable... it&#39;s wrong in just about every way I can think of. Joda Time is <i>so</i> much nicer. (There are still flaws in Joda Time, some of which I&#39;m hopefully removing in Noda Time, but it&#39;s a lot better than <code>Calendar</code>.)"},{"owner":{"account_id":48693,"reputation":29189,"user_id":144746,"accept_rate":93,"display_name":"Voo"},"score":0,"creation_date":1307302022,"post_id":6245086,"comment_id":7281361,"body_markdown":"@bestsss Well you have to admit that the Calendar API is hardly the best ever designed (starting from trivial stuff like months starting with 0, days with 1) and does make &quot;simple&quot; stuff harder than it should be. That combined with the fact that in this case an immutable class is much easier to work with - well I agree","body":"@bestsss Well you have to admit that the Calendar API is hardly the best ever designed (starting from trivial stuff like months starting with 0, days with 1) and does make &quot;simple&quot; stuff harder than it should be. That combined with the fact that in this case an immutable class is much easier to work with - well I agree"},{"owner":{"account_id":48693,"reputation":29189,"user_id":144746,"accept_rate":93,"display_name":"Voo"},"score":0,"creation_date":1307302162,"post_id":6245086,"comment_id":7281394,"body_markdown":"@Jon Argh too slow ;) But what do you mean with &quot;it doesn&#39;t let you represent all the different kinds of date/time you might want to represent&quot;? I thought Joda Time used an identical internal representation, so what do you mean with that?","body":"@Jon Argh too slow ;) But what do you mean with &quot;it doesn&#39;t let you represent all the different kinds of date/time you might want to represent&quot;? I thought Joda Time used an identical internal representation, so what do you mean with that?"},{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":0,"creation_date":1307302226,"post_id":6245086,"comment_id":7281404,"body_markdown":"@Voo: How do you represent &quot;just a date with no time&quot; in java.util.Calendar, in an expressive way? (LocalDate in Joda) Or &quot;just a time, with no date&quot; (LocalTime in Joda), or &quot;just a date/time with no associated time zone&quot; (LocalDateTime in Joda)? What about an interval, or a duration?","body":"@Voo: How do you represent &quot;just a date with no time&quot; in java.util.Calendar, in an expressive way? (LocalDate in Joda) Or &quot;just a time, with no date&quot; (LocalTime in Joda), or &quot;just a date/time with no associated time zone&quot; (LocalDateTime in Joda)? What about an interval, or a duration?"},{"owner":{"account_id":266709,"reputation":11856,"user_id":554431,"display_name":"bestsss"},"score":0,"creation_date":1307302244,"post_id":6245086,"comment_id":7281407,"body_markdown":"@Jon, being mutable is good , you know that&#39;s mutable, why would you expect to be threadsafe then? Mutable and threadsafe means datarace that has to be solved somewhere. `long time` is immutable, cheap and perfectly threadsafe. This is what I use if I need time. Calendar is useful only for human representation having a timezone in mind, not for internal storage. Totally cool w/ that. I guess people consider the API awkward but it gets the job done for me.","body":"@Jon, being mutable is good , you know that&#39;s mutable, why would you expect to be threadsafe then? Mutable and threadsafe means datarace that has to be solved somewhere. <code>long time</code> is immutable, cheap and perfectly threadsafe. This is what I use if I need time. Calendar is useful only for human representation having a timezone in mind, not for internal storage. Totally cool w/ that. I guess people consider the API awkward but it gets the job done for me."},{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":0,"creation_date":1307302371,"post_id":6245086,"comment_id":7281426,"body_markdown":"@bestsss: Being mutable is *not* good. It makes it *far* harder to reason about any data you hold, as it could be changed at any point. That&#39;s why `String` is immutable... Personally I don&#39;t *want* to represent times just as `long` values - I want to have an object which expresses what I know about it *in the type system*.","body":"@bestsss: Being mutable is <i>not</i> good. It makes it <i>far</i> harder to reason about any data you hold, as it could be changed at any point. That&#39;s why <code>String</code> is immutable... Personally I don&#39;t <i>want</i> to represent times just as <code>long</code> values - I want to have an object which expresses what I know about it <i>in the type system</i>."},{"owner":{"account_id":48693,"reputation":29189,"user_id":144746,"accept_rate":93,"display_name":"Voo"},"score":0,"creation_date":1307302501,"post_id":6245086,"comment_id":7281438,"body_markdown":"@Jon Ah that was what you meant. I thought you meant Joda time used a different internal representation. I agree that combining date and time in one class with no alternative isn&#39;t pretty - though I&#39;ve got no idea what a time without a timezone would be (isn&#39;t that pretty useless as its ambiguous? [as soon as the data is used in different timezones we have a problem] But then the whole affair is awfully complicated and I&#39;m no expert)","body":"@Jon Ah that was what you meant. I thought you meant Joda time used a different internal representation. I agree that combining date and time in one class with no alternative isn&#39;t pretty - though I&#39;ve got no idea what a time without a timezone would be (isn&#39;t that pretty useless as its ambiguous? [as soon as the data is used in different timezones we have a problem] But then the whole affair is awfully complicated and I&#39;m no expert)"},{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":1,"creation_date":1307302566,"post_id":6245086,"comment_id":7281450,"body_markdown":"@Voo: My alarm clock could be set to wake me up at 8 o&#39;clock local time every day, wherever I am. What time zone should that use in its representation? ;)","body":"@Voo: My alarm clock could be set to wake me up at 8 o&#39;clock local time every day, wherever I am. What time zone should that use in its representation? ;)"},{"owner":{"account_id":266709,"reputation":11856,"user_id":554431,"display_name":"bestsss"},"score":0,"creation_date":1307302860,"post_id":6245086,"comment_id":7281490,"body_markdown":"@Jon, Then we have misunderstanding: calendar doesn&#39;t hold data, it processes it. Even its name doesn&#39;t suggest to hold data (at least not to me). I admit I have not read (or recall) the preamble of `Calendar` doc but to me it&#39;s just a translator from human form time (i.e. Thursday, 3:15pm) to a moment in time that&#39;s universal (and represented by miillis since 1970UTC). If I need to keep the timezone for some reason, still not Calendar. Special Time representation a simple Pair of long/timezone (or id of) would do.","body":"@Jon, Then we have misunderstanding: calendar doesn&#39;t hold data, it processes it. Even its name doesn&#39;t suggest to hold data (at least not to me). I admit I have not read (or recall) the preamble of <code>Calendar</code> doc but to me it&#39;s just a translator from human form time (i.e. Thursday, 3:15pm) to a moment in time that&#39;s universal (and represented by miillis since 1970UTC). If I need to keep the timezone for some reason, still not Calendar. Special Time representation a simple Pair of long/timezone (or id of) would do."},{"owner":{"account_id":266709,"reputation":11856,"user_id":554431,"display_name":"bestsss"},"score":0,"creation_date":1307302957,"post_id":6245086,"comment_id":7281504,"body_markdown":"@Jon *What time zone should that use in its representation*, you sync the timezone externally based on your location. Meh, so smth like onTimeZoneChange - recalc awaking time.","body":"@Jon <i>What time zone should that use in its representation</i>, you sync the timezone externally based on your location. Meh, so smth like onTimeZoneChange - recalc awaking time."},{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":0,"creation_date":1307303146,"post_id":6245086,"comment_id":7281535,"body_markdown":"@bestsss: But logically it *doesn&#39;t have a time zone*. Why should it be represented in *any* time zone? What&#39;s the relevant information here: &quot;8am in whatever your local time zone is&quot;. That information doesn&#39;t change when I change time zone, so why should any representation change? Moreover, why should the representation *pretend* that it&#39;s specific to a particular time zone? Having worked on calendaring systems, I can assure you that being able to represent these things separately is incredibly important.","body":"@bestsss: But logically it <i>doesn&#39;t have a time zone</i>. Why should it be represented in <i>any</i> time zone? What&#39;s the relevant information here: &quot;8am in whatever your local time zone is&quot;. That information doesn&#39;t change when I change time zone, so why should any representation change? Moreover, why should the representation <i>pretend</i> that it&#39;s specific to a particular time zone? Having worked on calendaring systems, I can assure you that being able to represent these things separately is incredibly important."},{"owner":{"account_id":266709,"reputation":11856,"user_id":554431,"display_name":"bestsss"},"score":0,"creation_date":1307303505,"post_id":6245086,"comment_id":7281601,"body_markdown":"@Jon, *doesn&#39;t have a timezone* is a rule, not time (again at least to me). I take the time only as universal (UTC based) and seriously never had issues with that part. You have human based representation 8am+local TZ. The variable is the zone, it changes, the UTC value does as well. It&#39;s a simple logic to follow, any variable changes the result of the function changes. After the result of the function UTC long time, nothing extra needs to be done just checking if the currentTime &gt;= awakingTime.","body":"@Jon, <i>doesn&#39;t have a timezone</i> is a rule, not time (again at least to me). I take the time only as universal (UTC based) and seriously never had issues with that part. You have human based representation 8am+local TZ. The variable is the zone, it changes, the UTC value does as well. It&#39;s a simple logic to follow, any variable changes the result of the function changes. After the result of the function UTC long time, nothing extra needs to be done just checking if the currentTime &gt;= awakingTime."},{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":0,"creation_date":1307303910,"post_id":6245086,"comment_id":7281666,"body_markdown":"@bestsss: So in the example of a time without a date, what UTC value are you going to use? Something with a specific date? Bear in mind that a particular local time may occur zero, once or twice on a specific day when applied to a specific time zone. The concept of a value not being associated with any time zone - but equally not being a fixed *instant* in time - it an important concept to be able to express, in my view... the set of logical operations you can do with such a value is different to (say) an instant in time with no associated zone, or a particular zone+date+time.","body":"@bestsss: So in the example of a time without a date, what UTC value are you going to use? Something with a specific date? Bear in mind that a particular local time may occur zero, once or twice on a specific day when applied to a specific time zone. The concept of a value not being associated with any time zone - but equally not being a fixed <i>instant</i> in time - it an important concept to be able to express, in my view... the set of logical operations you can do with such a value is different to (say) an instant in time with no associated zone, or a particular zone+date+time."},{"owner":{"account_id":266709,"reputation":11856,"user_id":554431,"display_name":"bestsss"},"score":0,"creation_date":1307304469,"post_id":6245086,"comment_id":7281757,"body_markdown":"@Jon, *Something with a specific date* - never. time only or any local timezone, etc.. it&#39;s the same: human vision of the time, it has to be represented internally at some point (i.e. the date/year +timezone applied). Once the missing info is available (date+timezone), a valid time is available as well. How to store prior (int hours, int minutes, int millis, or just a single int holding all the info, millis since mightnight) is a minor issue, i.e. I&#39;d write a class to store it till the moment it can be represented as real time (UTC based), at that moment grab a calendar and set it up-&gt; `long`","body":"@Jon, <i>Something with a specific date</i> - never. time only or any local timezone, etc.. it&#39;s the same: human vision of the time, it has to be represented internally at some point (i.e. the date/year +timezone applied). Once the missing info is available (date+timezone), a valid time is available as well. How to store prior (int hours, int minutes, int millis, or just a single int holding all the info, millis since mightnight) is a minor issue, i.e. I&#39;d write a class to store it till the moment it can be represented as real time (UTC based), at that moment grab a calendar and set it up-&gt; <code>long</code>"},{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":0,"creation_date":1307304849,"post_id":6245086,"comment_id":7281807,"body_markdown":"@bestsss: If it&#39;s just a time but you&#39;re trying to represent it as UTC, what&#39;s your epoch going to be? You talk about &quot;millis since midnight&quot; but that&#39;s not a UTC-based time. You talk about writing &quot;a class to store it till the moment it can be represented as real time&quot; - exactly. You want to represent the concept as a type. Now, with a decent date/time API, you don&#39;t have to do that yourself. It&#39;s part of the library. But I disagree that the date/year+timezone needs to be part of the internal representation. Why should it be?","body":"@bestsss: If it&#39;s just a time but you&#39;re trying to represent it as UTC, what&#39;s your epoch going to be? You talk about &quot;millis since midnight&quot; but that&#39;s not a UTC-based time. You talk about writing &quot;a class to store it till the moment it can be represented as real time&quot; - exactly. You want to represent the concept as a type. Now, with a decent date/time API, you don&#39;t have to do that yourself. It&#39;s part of the library. But I disagree that the date/year+timezone needs to be part of the internal representation. Why should it be?"},{"owner":{"account_id":266709,"reputation":11856,"user_id":554431,"display_name":"bestsss"},"score":0,"creation_date":1307305489,"post_id":6245086,"comment_id":7281897,"body_markdown":"@Jon, of course some rules+data may not suffice the standard API. As you see I say: Calendar doesn&#39;t hold data, and I seriously don&#39;t care for. If I understand the problem, coming up w/ any datastructure is no issue. The calculation processes (i.e. what calendar does) is no walk in the park though and I am totally happy with. The good part about such approach: it is very portable and easy to grasp.","body":"@Jon, of course some rules+data may not suffice the standard API. As you see I say: Calendar doesn&#39;t hold data, and I seriously don&#39;t care for. If I understand the problem, coming up w/ any datastructure is no issue. The calculation processes (i.e. what calendar does) is no walk in the park though and I am totally happy with. The good part about such approach: it is very portable and easy to grasp."},{"owner":{"account_id":370140,"reputation":18565,"user_id":717898,"accept_rate":86,"display_name":"Andrew Lazarus"},"score":0,"creation_date":1307305943,"post_id":6245086,"comment_id":7281967,"body_markdown":"My firm wrote its own date/time classes, largely (AFAICT) duplicating Joda Time. We have TimeOfDay, ZonedTimeOfDay, etc. and, yes, they are immutable. Instances where we have to use java Calendar for conversion are bottlenecks. Even though it&#39;s Java&#39;s second try at datetimes, it still isn&#39;t that good.","body":"My firm wrote its own date/time classes, largely (AFAICT) duplicating Joda Time. We have TimeOfDay, ZonedTimeOfDay, etc. and, yes, they are immutable. Instances where we have to use java Calendar for conversion are bottlenecks. Even though it&#39;s Java&#39;s second try at datetimes, it still isn&#39;t that good."},{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":0,"creation_date":1307306060,"post_id":6245086,"comment_id":7281986,"body_markdown":"@bestsss: Well, I&#39;d rather use a type which allows me to express the value *and* perform operations on it in one go, ideally without having to write it myself. Joda Time performs such a task admirably. Why use Calendar when something so much better is available? Why use a `long` when you can describe your data so much more expressively?","body":"@bestsss: Well, I&#39;d rather use a type which allows me to express the value <i>and</i> perform operations on it in one go, ideally without having to write it myself. Joda Time performs such a task admirably. Why use Calendar when something so much better is available? Why use a <code>long</code> when you can describe your data so much more expressively?"},{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":0,"creation_date":1307306083,"post_id":6245086,"comment_id":7281993,"body_markdown":"@Andrew: Was there any reason not to use Joda Time, out of interest? (Perhaps it pre-dated Joda?)","body":"@Andrew: Was there any reason not to use Joda Time, out of interest? (Perhaps it pre-dated Joda?)"},{"owner":{"account_id":266709,"reputation":11856,"user_id":554431,"display_name":"bestsss"},"score":0,"creation_date":1307306637,"post_id":6245086,"comment_id":7282083,"body_markdown":"@Jon, long is the most portable part you can get; like I told, it is an easy concept to grasp and totally portable (java, C, C#, objective-C - it&#39;s the same more or less). Could be me, but I am no huge fan of external APIs (also need to port &#39;em, not myself in particular but yeah); I can think of MiG layout, jzlib +some ApacheHTTP as the only libs we use.","body":"@Jon, long is the most portable part you can get; like I told, it is an easy concept to grasp and totally portable (java, C, C#, objective-C - it&#39;s the same more or less). Could be me, but I am no huge fan of external APIs (also need to port &#39;em, not myself in particular but yeah); I can think of MiG layout, jzlib +some ApacheHTTP as the only libs we use."},{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":0,"creation_date":1307306991,"post_id":6245086,"comment_id":7282129,"body_markdown":"@bestsss: Yes, it&#39;s very portable... and doesn&#39;t express anything about the value it&#39;s going to represent. Do you use arrays of bytes instead of strings, as well? ;) Personally I think it&#39;s really important to know the best way of performing a task on the given platform. There&#39;s a reason these APIs exist: they mean the world doesn&#39;t have to make the same mistakes time and time again. There&#39;s a portability issue when data has to be *transmitted*, certainly - but in many other cases it&#39;s not a problem, IMO... whereas having to use a bad API (such as Calendar) can lead to horrible bugs.","body":"@bestsss: Yes, it&#39;s very portable... and doesn&#39;t express anything about the value it&#39;s going to represent. Do you use arrays of bytes instead of strings, as well? ;) Personally I think it&#39;s really important to know the best way of performing a task on the given platform. There&#39;s a reason these APIs exist: they mean the world doesn&#39;t have to make the same mistakes time and time again. There&#39;s a portability issue when data has to be <i>transmitted</i>, certainly - but in many other cases it&#39;s not a problem, IMO... whereas having to use a bad API (such as Calendar) can lead to horrible bugs."},{"owner":{"account_id":266709,"reputation":11856,"user_id":554431,"display_name":"bestsss"},"score":0,"creation_date":1307307252,"post_id":6245086,"comment_id":7282160,"body_markdown":"@Jon, *Do you use arrays of bytes instead of strings, as well?*, Dunno how to answer that, since we use heavily hacked (mostly by me) tomcat and the case there is exactly like that (ByteChunk)... I didn&#39;t mean the transmission of the data but representation - the concept of millis since 1970UTC is super simple and portable.","body":"@Jon, <i>Do you use arrays of bytes instead of strings, as well?</i>, Dunno how to answer that, since we use heavily hacked (mostly by me) tomcat and the case there is exactly like that (ByteChunk)... I didn&#39;t mean the transmission of the data but representation - the concept of millis since 1970UTC is super simple and portable."},{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":0,"creation_date":1307307554,"post_id":6245086,"comment_id":7282197,"body_markdown":"@bestsss: Yes, that&#39;s nice and portable if all you want to represent is an *instant* in time. That&#39;s fine for a time stamps, but not for something like a repeated event which is always at the same time *in a particular time zone* etc. Trying to force many different concepts into the same type is a mistake that both Java and .NET made, in my view. Working with dates and times is hard enough without having to battle a poor API :(","body":"@bestsss: Yes, that&#39;s nice and portable if all you want to represent is an <i>instant</i> in time. That&#39;s fine for a time stamps, but not for something like a repeated event which is always at the same time <i>in a particular time zone</i> etc. Trying to force many different concepts into the same type is a mistake that both Java and .NET made, in my view. Working with dates and times is hard enough without having to battle a poor API :("},{"owner":{"account_id":370140,"reputation":18565,"user_id":717898,"accept_rate":86,"display_name":"Andrew Lazarus"},"score":0,"creation_date":1307319113,"post_id":6245086,"comment_id":7283764,"body_markdown":"@Jon, well, the decision predates _my_ arrival at the company. I think there was a reluctance to use 3d-party FOSS, which I do not share. I doubt if anyone even evaluated Joda Time. And, BTW, your reply to bestsss is exactly what we need to deal with, and why the Java classes are no darn good.","body":"@Jon, well, the decision predates <i>my</i> arrival at the company. I think there was a reluctance to use 3d-party FOSS, which I do not share. I doubt if anyone even evaluated Joda Time. And, BTW, your reply to bestsss is exactly what we need to deal with, and why the Java classes are no darn good."}],"tags":[],"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"comment_count":32,"down_vote_count":0,"up_vote_count":14,"is_accepted":true,"score":14,"last_activity_date":1417612408,"creation_date":1307300142,"answer_id":6245086,"question_id":6245053,"body_markdown":"You can&#39;t make something thread-safe if it isn&#39;t. In the case of `Calendar`, even *reading* data from it isn&#39;t thread-safe, as it can update internal data structures.\r\n\r\nIf at all possible, I&#39;d suggest using [Joda Time][1] instead:\r\n\r\n- Most of the types are immutable\r\n- The immutable types are thread-safe\r\n- It&#39;s a generally much better API anyway\r\n\r\nIf you absolutely *have* to use a `Calendar`, you could create a locking object and put all the access through a lock. For example:\r\n\r\n    private static final Calendar calendar = Calendar.getInstance();\r\n    private static final Object calendarLock = new Object();\r\n\r\n    public static int getYear()\r\n    {\r\n        synchronized(calendarLock)\r\n        {\r\n            return calendar.get(Calendar.YEAR);\r\n        }\r\n    }\r\n\r\n    // Ditto for other methods\r\n\r\nIt&#39;s pretty nasty though. You could have just *one* synchronized method which created a clone of the original calendar each time it was needed, of course... it&#39;s possible that by calling `computeFields` or `computeTime` you could make *subsequent* read-operations thread-safe, of course, but personally I&#39;d be loathe to try it.\r\n\r\n  [1]: http://www.joda.org/joda-time/","title":"How to make a static Calendar thread safe","body":"<p>You can't make something thread-safe if it isn't. In the case of <code>Calendar</code>, even <em>reading</em> data from it isn't thread-safe, as it can update internal data structures.</p>\n\n<p>If at all possible, I'd suggest using <a href=\"http://www.joda.org/joda-time/\" rel=\"nofollow noreferrer\">Joda Time</a> instead:</p>\n\n<ul>\n<li>Most of the types are immutable</li>\n<li>The immutable types are thread-safe</li>\n<li>It's a generally much better API anyway</li>\n</ul>\n\n<p>If you absolutely <em>have</em> to use a <code>Calendar</code>, you could create a locking object and put all the access through a lock. For example:</p>\n\n<pre><code>private static final Calendar calendar = Calendar.getInstance();\nprivate static final Object calendarLock = new Object();\n\npublic static int getYear()\n{\n    synchronized(calendarLock)\n    {\n        return calendar.get(Calendar.YEAR);\n    }\n}\n\n// Ditto for other methods\n</code></pre>\n\n<p>It's pretty nasty though. You could have just <em>one</em> synchronized method which created a clone of the original calendar each time it was needed, of course... it's possible that by calling <code>computeFields</code> or <code>computeTime</code> you could make <em>subsequent</em> read-operations thread-safe, of course, but personally I'd be loathe to try it.</p>\n"},{"tags":[],"owner":{"account_id":106190,"reputation":9362,"user_id":282968,"accept_rate":73,"display_name":"MJB"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1307300167,"creation_date":1307300167,"answer_id":6245091,"question_id":6245053,"body_markdown":"You cannot. Yes, you could synchronize on it, but it still has mutable state fields. You&#39;ll have to create your own Calendar object.\r\n\r\nIf possible, use something lightweight, like a long measuring the times in milliseconds, and only convert to a Calendar when you NEED to.","title":"How to make a static Calendar thread safe","body":"<p>You cannot. Yes, you could synchronize on it, but it still has mutable state fields. You'll have to create your own Calendar object.</p>\n\n<p>If possible, use something lightweight, like a long measuring the times in milliseconds, and only convert to a Calendar when you NEED to.</p>\n"},{"comments":[{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":2,"creation_date":1307300584,"post_id":6245117,"comment_id":7281126,"body_markdown":"What exactly do you mean by &quot;change it&quot; bearing in mind that *reading* from it can change its internal state? I wouldn&#39;t be entirely surprised to find that two simultaneous read operations could *potentially* end up corrupting state. It&#39;s unlikely, but I wouldn&#39;t like to rely on it. Calendar is a nasty, nasty class :(","body":"What exactly do you mean by &quot;change it&quot; bearing in mind that <i>reading</i> from it can change its internal state? I wouldn&#39;t be entirely surprised to find that two simultaneous read operations could <i>potentially</i> end up corrupting state. It&#39;s unlikely, but I wouldn&#39;t like to rely on it. Calendar is a nasty, nasty class :("},{"owner":{"account_id":23121,"reputation":527376,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":0,"creation_date":1307300668,"post_id":6245117,"comment_id":7281140,"body_markdown":"Reading it won&#39;t change its state in inconsistent ways.  If you were worried about this you would have to say the same thing about String.hashCode().","body":"Reading it won&#39;t change its state in inconsistent ways.  If you were worried about this you would have to say the same thing about String.hashCode()."},{"owner":{"account_id":23121,"reputation":527376,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":0,"creation_date":1307300860,"post_id":6245117,"comment_id":7281163,"body_markdown":"I agree that Calendar is nasty. Have you tried Serializing it? It sends the entire TimeZone information which is not great for performance but it means if you have a system which has up to date TimeZone information, but you read an old Calendar or get a Calendar from a system which is not up to date you get subtle TimeZone issues you never expected to happen due to bugs in code you are not running. :P","body":"I agree that Calendar is nasty. Have you tried Serializing it? It sends the entire TimeZone information which is not great for performance but it means if you have a system which has up to date TimeZone information, but you read an old Calendar or get a Calendar from a system which is not up to date you get subtle TimeZone issues you never expected to happen due to bugs in code you are not running. :P"},{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":4,"creation_date":1307300909,"post_id":6245117,"comment_id":7281174,"body_markdown":"See my comment replying to you in my answer. `String` is designed to be thread-safe, so its hash caching is thread-safe: the value is atomically changed from &quot;uncached&quot; to &quot;the cached value&quot;. Compare that with `Calendar`, where a `boolean` field determines whether the fields are set, and the fields themselves are separate. What guarantees that all changes to that set of data occurs atomically, or in a desirable order?","body":"See my comment replying to you in my answer. <code>String</code> is designed to be thread-safe, so its hash caching is thread-safe: the value is atomically changed from &quot;uncached&quot; to &quot;the cached value&quot;. Compare that with <code>Calendar</code>, where a <code>boolean</code> field determines whether the fields are set, and the fields themselves are separate. What guarantees that all changes to that set of data occurs atomically, or in a desirable order?"},{"owner":{"account_id":2293921,"reputation":9958,"user_id":2015912,"accept_rate":70,"display_name":"scottb"},"score":0,"creation_date":1370539915,"post_id":6245117,"comment_id":24507525,"body_markdown":"I also have a database app in which date/times are stored in a UTC numeric format.  Every time I need to show a date to the user, the code for that table needs a way to map from a UTC number to a localized String.  For that I&#39;ve been using Calendar because TimeZone provides historically accurate DST and TimeZone offsets.  Because I have so many classes that need this conversion and because Calendars are expensive to create, I&#39;ve also been using a static Calendar field in my JulianDay class used to do the date localizations.  Really struggling how to make this API thread safe.","body":"I also have a database app in which date/times are stored in a UTC numeric format.  Every time I need to show a date to the user, the code for that table needs a way to map from a UTC number to a localized String.  For that I&#39;ve been using Calendar because TimeZone provides historically accurate DST and TimeZone offsets.  Because I have so many classes that need this conversion and because Calendars are expensive to create, I&#39;ve also been using a static Calendar field in my JulianDay class used to do the date localizations.  Really struggling how to make this API thread safe."},{"owner":{"account_id":23121,"reputation":527376,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":1,"creation_date":1370583581,"post_id":6245117,"comment_id":24522525,"body_markdown":"@scottb Part of what makes Calendar slow is creating the TimeZone and Locale objects.  If you cache these immutable objects, you can make creating new Calendar faster.  To make Calendar thread safe you need to lock it while using it.","body":"@scottb Part of what makes Calendar slow is creating the TimeZone and Locale objects.  If you cache these immutable objects, you can make creating new Calendar faster.  To make Calendar thread safe you need to lock it while using it."}],"tags":[],"owner":{"account_id":23121,"reputation":527376,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"comment_count":6,"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1513606178,"creation_date":1307300341,"answer_id":6245117,"question_id":6245053,"body_markdown":"Calendar is thread safe provided you don&#39;t change it.  The usage in your example is fine.\r\n\r\nIt is worth noting that Calendar is not an efficient class and you should only use it for complex operations (like finding the next month/year) IMHO: If you do use it for complex operations, use local variables only.\r\n\r\nIf all you want it a snapshot of the time a faster way is to use currentTimeMillis which does even create an object. You can make the field volatile if you want to make it thread safe.\r\n\r\n    private static long now = System.currentTimeMillis();\r\n\r\nThe usage is a bit suspect.  Why would you get the current time and store it globally like this.  It reminds me of the old joke. \r\n\r\n&gt; \\- Do you have the time?  \r\n&gt; \\- Yes, I have it written down somewhere.","title":"How to make a static Calendar thread safe","body":"<p>Calendar is thread safe provided you don't change it.  The usage in your example is fine.</p>\n\n<p>It is worth noting that Calendar is not an efficient class and you should only use it for complex operations (like finding the next month/year) IMHO: If you do use it for complex operations, use local variables only.</p>\n\n<p>If all you want it a snapshot of the time a faster way is to use currentTimeMillis which does even create an object. You can make the field volatile if you want to make it thread safe.</p>\n\n<pre><code>private static long now = System.currentTimeMillis();\n</code></pre>\n\n<p>The usage is a bit suspect.  Why would you get the current time and store it globally like this.  It reminds me of the old joke. </p>\n\n<blockquote>\n  <p>- Do you have the time?<br>\n  - Yes, I have it written down somewhere.</p>\n</blockquote>\n"},{"comments":[{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":2,"creation_date":1689973433,"post_id":76740232,"comment_id":135293512,"body_markdown":"I do not see how using `LocalDateTime` in this code adds value. The replacement for `java.util.Calendar` is  `java.time.ZonedDateTime`.","body":"I do not see how using <code>LocalDateTime</code> in this code adds value. The replacement for <code>java.util.Calendar</code> is  <code>java.time.ZonedDateTime</code>."},{"owner":{"account_id":94872,"reputation":17207,"user_id":258772,"display_name":"mrts"},"score":0,"creation_date":1690314198,"post_id":76740232,"comment_id":135335468,"body_markdown":"@BasilBourque, thanks, you are right, fixed!","body":"@BasilBourque, thanks, you are right, fixed!"},{"owner":{"account_id":94872,"reputation":17207,"user_id":258772,"display_name":"mrts"},"score":0,"creation_date":1690314506,"post_id":76740232,"comment_id":135335537,"body_markdown":"@BasilBourque, on a second glance, my answer is a unintentional copy of your answer. What do you think, should I remove mine in favor of yours?","body":"@BasilBourque, on a second glance, my answer is a unintentional copy of your answer. What do you think, should I remove mine in favor of yours?"},{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":1,"creation_date":1690315189,"post_id":76740232,"comment_id":135335656,"body_markdown":"Leave it. You&#39;ve gotten an up-vote. An alternate example does not hurt. And your Answer inspired mine.  I do suggest you add a bit of explanation of the code.","body":"Leave it. You&#39;ve gotten an up-vote. An alternate example does not hurt. And your Answer inspired mine.  I do suggest you add a bit of explanation of the code."},{"owner":{"account_id":94872,"reputation":17207,"user_id":258772,"display_name":"mrts"},"score":0,"creation_date":1690559605,"post_id":76740232,"comment_id":135375543,"body_markdown":"Thank you for the suggestion! The API in the code snippet looks quite readable and fluent, and the code appears to be self-explanatory - don&#39;t you think so?","body":"Thank you for the suggestion! The API in the code snippet looks quite readable and fluent, and the code appears to be self-explanatory - don&#39;t you think so?"}],"tags":[],"owner":{"account_id":94872,"reputation":17207,"user_id":258772,"display_name":"mrts"},"comment_count":5,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1690314229,"creation_date":1689962378,"answer_id":76740232,"question_id":6245053,"body_markdown":"Instead of trying to make the `Calendar` API thread-safe, use the thread-safe `java.time` API introduced in Java 8 instead. This API also provides a more fluent and intuitive interface for date and time manipulation.\r\n\r\nHere&#39;s an example compatible with the legacy `Date` API of getting the start of next day with the `java.time` API:\r\n\r\n```java\r\nimport java.time.LocalDateTime;\r\nimport java.time.ZoneId;\r\n\r\npublic static Date getStartOfNextDay() {\r\n    final ZonedDateTime startOfNextDay = ZonedDateTime.now()\r\n            .plusDays(1)\r\n            .withHour(0).withMinute(0).withSecond(0).withNano(0);\r\n    return Date.from(startOfNextDay.toInstant());\r\n}\r\n```\r\n\r\nAnd here&#39;s how it looks with the `Calendar` API:\r\n```java\r\nimport java.util.Calendar;\r\n\r\npublic static Date getStartOfNextDay() {\r\n    final Calendar calendar = Calendar.getInstance();\r\n    calendar.add(Calendar.DAY_OF_MONTH, 1);\r\n    calendar.set(Calendar.HOUR_OF_DAY, 0);\r\n    calendar.set(Calendar.MINUTE, 0);\r\n    calendar.set(Calendar.SECOND, 0);\r\n    calendar.set(Calendar.MILLISECOND, 0);\r\n    return calendar.getTime();\r\n}\r\n```","title":"How to make a static Calendar thread safe","body":"<p>Instead of trying to make the <code>Calendar</code> API thread-safe, use the thread-safe <code>java.time</code> API introduced in Java 8 instead. This API also provides a more fluent and intuitive interface for date and time manipulation.</p>\n<p>Here's an example compatible with the legacy <code>Date</code> API of getting the start of next day with the <code>java.time</code> API:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.time.LocalDateTime;\nimport java.time.ZoneId;\n\npublic static Date getStartOfNextDay() {\n    final ZonedDateTime startOfNextDay = ZonedDateTime.now()\n            .plusDays(1)\n            .withHour(0).withMinute(0).withSecond(0).withNano(0);\n    return Date.from(startOfNextDay.toInstant());\n}\n</code></pre>\n<p>And here's how it looks with the <code>Calendar</code> API:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.Calendar;\n\npublic static Date getStartOfNextDay() {\n    final Calendar calendar = Calendar.getInstance();\n    calendar.add(Calendar.DAY_OF_MONTH, 1);\n    calendar.set(Calendar.HOUR_OF_DAY, 0);\n    calendar.set(Calendar.MINUTE, 0);\n    calendar.set(Calendar.SECOND, 0);\n    calendar.set(Calendar.MILLISECOND, 0);\n    return calendar.getTime();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1690054359,"creation_date":1689974286,"answer_id":76741301,"question_id":6245053,"body_markdown":"# tl;dr\r\n\r\n`Calendar` replaced by [`ZonedDateTime`][1]. [Immutable][2], so [thread-safe][3].\r\n\r\n    private static ZonedDateTime someMoment = ZonedDateTime.now();  // Capture the current moment as seen in the JVM’s current default time zone.\r\n\r\nIf the value is meant to be fixed, unchanging during the execution of your app, mark it `final`. \r\n\r\n    private static final ZonedDateTime someMoment = ZonedDateTime.now();  \r\n\r\nIf at runtime you might assign a different object, then for thread-safety use an [`AtomicReference`][4].\r\n\r\n    private static final AtomicReference&lt; ZonedDateTime &gt; someMomentRef = new AtomicReference&lt;&gt;( ZonedDateTime.now() ) ;\r\n\r\nLater updating with a fresh moment. \r\n\r\n    someMomentRef.set( ZonedDateTime.now() );\r\n\r\nIf you need to interoperate with old code not yet updated to *java.time*, convert.\r\n\r\n    ZonedDateTime someMoment = someMomentRef.get() ;\r\n    Calendar c = GregorianCalendar.from( someMoment ) ;  // `GregorianCalendar` is a concrete subclass of `Calendar`.\r\n\r\n\r\n# `java.time.ZonedDateTime`\r\n\r\nThe terribly flawed `java.util.Calendar` class has been supplanted by the modern *java.time* classes defined in JSR 310. Specifically replaced by `java.time.ZonedDateTime`. \r\n\r\nA `ZonedDateTime` object represents a date with time-of-day as seen in a particular time zone. \r\n\r\nUnderstand that a time zone is a named history of the changes to the offset used by the people of a particular region as decided by their politicians. An offset is merely a number of hours-minutes-seconds ahead or behind the temporal meridian of UTC.\r\n\r\nTo get the current moment, specify your desired/expected time zone.\r\n\r\n    ZoneId z = ZoneId.of( &quot;Africa/Casablanca&quot; ) ;\r\n    ZonedDateTime zdt = ZonedDateTime.now( z ) ;\r\n\r\nIf you want the JVM’s current default time zone, use `ZoneId.systemDefault()`.\r\n\r\nYou can store a `ZonedDateTime` object in a `static` reference. But be aware that such an object stores a frozen moment, is immutable, and does not adjust to later moments. If you want a later moment, call `now` method ago to generate a new fresh `ZonedDateTime` object.\r\n\r\n    private static final ZonedDateTime appLaunched = ZonedDateTime.now( ZoneId.of( &quot;Asia/Tokyo&quot; ) );\r\n\r\n# `java.time.Instant`\r\n\r\nIf you merely want to track a moment, a specific point on the timeline, without business rules explicitly aimed at time zones, use a moment as seen in UTC. For that, use `java.time.Instant` class.\r\n\r\n    private static final Instant instant = Instant.now() ;  // Always in UTC, an offset of zero.\r\n\r\n# Generating localized text\r\n\r\nYou can later apply a time zone for presentation to the user.\r\n\r\n    ZonedDateTime zdt = instant.atZone( ZoneId.systemDefault() ) ;\r\n    String output = \r\n        zdt\r\n        .atZone( ZoneId.systemDefault() )  // Returns a `ZonedDateTime` object.\r\n        .format( \r\n            DateTimeFormatter\r\n            .ofLocalizedDateTime( FormatStyle.FULL )  // Returns a `DateTimeFormatter` object.\r\n            .withLocale( Locale.getDefault() )\r\n        ) ;  // Returns a `String` object.\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/time/ZonedDateTime.html\r\n  [2]: https://en.wikipedia.org/wiki/Immutable_object\r\n  [3]: https://en.wikipedia.org/wiki/Thread_safety\r\n  [4]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/concurrent/atomic/AtomicReference.html","title":"How to make a static Calendar thread safe","body":"<h1>tl;dr</h1>\n<p><code>Calendar</code> replaced by <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/time/ZonedDateTime.html\" rel=\"nofollow noreferrer\"><code>ZonedDateTime</code></a>. <a href=\"https://en.wikipedia.org/wiki/Immutable_object\" rel=\"nofollow noreferrer\">Immutable</a>, so <a href=\"https://en.wikipedia.org/wiki/Thread_safety\" rel=\"nofollow noreferrer\">thread-safe</a>.</p>\n<pre><code>private static ZonedDateTime someMoment = ZonedDateTime.now();  // Capture the current moment as seen in the JVM’s current default time zone.\n</code></pre>\n<p>If the value is meant to be fixed, unchanging during the execution of your app, mark it <code>final</code>.</p>\n<pre><code>private static final ZonedDateTime someMoment = ZonedDateTime.now();  \n</code></pre>\n<p>If at runtime you might assign a different object, then for thread-safety use an <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/concurrent/atomic/AtomicReference.html\" rel=\"nofollow noreferrer\"><code>AtomicReference</code></a>.</p>\n<pre><code>private static final AtomicReference&lt; ZonedDateTime &gt; someMomentRef = new AtomicReference&lt;&gt;( ZonedDateTime.now() ) ;\n</code></pre>\n<p>Later updating with a fresh moment.</p>\n<pre><code>someMomentRef.set( ZonedDateTime.now() );\n</code></pre>\n<p>If you need to interoperate with old code not yet updated to <em>java.time</em>, convert.</p>\n<pre><code>ZonedDateTime someMoment = someMomentRef.get() ;\nCalendar c = GregorianCalendar.from( someMoment ) ;  // `GregorianCalendar` is a concrete subclass of `Calendar`.\n</code></pre>\n<h1><code>java.time.ZonedDateTime</code></h1>\n<p>The terribly flawed <code>java.util.Calendar</code> class has been supplanted by the modern <em>java.time</em> classes defined in JSR 310. Specifically replaced by <code>java.time.ZonedDateTime</code>.</p>\n<p>A <code>ZonedDateTime</code> object represents a date with time-of-day as seen in a particular time zone.</p>\n<p>Understand that a time zone is a named history of the changes to the offset used by the people of a particular region as decided by their politicians. An offset is merely a number of hours-minutes-seconds ahead or behind the temporal meridian of UTC.</p>\n<p>To get the current moment, specify your desired/expected time zone.</p>\n<pre><code>ZoneId z = ZoneId.of( &quot;Africa/Casablanca&quot; ) ;\nZonedDateTime zdt = ZonedDateTime.now( z ) ;\n</code></pre>\n<p>If you want the JVM’s current default time zone, use <code>ZoneId.systemDefault()</code>.</p>\n<p>You can store a <code>ZonedDateTime</code> object in a <code>static</code> reference. But be aware that such an object stores a frozen moment, is immutable, and does not adjust to later moments. If you want a later moment, call <code>now</code> method ago to generate a new fresh <code>ZonedDateTime</code> object.</p>\n<pre><code>private static final ZonedDateTime appLaunched = ZonedDateTime.now( ZoneId.of( &quot;Asia/Tokyo&quot; ) );\n</code></pre>\n<h1><code>java.time.Instant</code></h1>\n<p>If you merely want to track a moment, a specific point on the timeline, without business rules explicitly aimed at time zones, use a moment as seen in UTC. For that, use <code>java.time.Instant</code> class.</p>\n<pre><code>private static final Instant instant = Instant.now() ;  // Always in UTC, an offset of zero.\n</code></pre>\n<h1>Generating localized text</h1>\n<p>You can later apply a time zone for presentation to the user.</p>\n<pre><code>ZonedDateTime zdt = instant.atZone( ZoneId.systemDefault() ) ;\nString output = \n    zdt\n    .atZone( ZoneId.systemDefault() )  // Returns a `ZonedDateTime` object.\n    .format( \n        DateTimeFormatter\n        .ofLocalizedDateTime( FormatStyle.FULL )  // Returns a `DateTimeFormatter` object.\n        .withLocale( Locale.getDefault() )\n    ) ;  // Returns a `String` object.\n</code></pre>\n"}],"owner":{"account_id":218146,"reputation":6489,"user_id":474326,"accept_rate":84,"display_name":"cody"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":12699,"favorite_count":0,"down_vote_count":0,"up_vote_count":10,"accepted_answer_id":6245086,"answer_count":6,"score":10,"last_activity_date":1690314229,"creation_date":1307299882,"question_id":6245053,"body_markdown":"I&#39;d like to use a Calendar for some static methods and use a static field:\r\n\r\n    private static Calendar calendar = Calendar.getInstance();\r\n\r\nNow I read java.util.Calendar isn&#39;t thread safe. How can I make this thread safe (it should be **static**)?","title":"How to make a static Calendar thread safe","body":"<p>I'd like to use a Calendar for some static methods and use a static field:</p>\n\n<pre><code>private static Calendar calendar = Calendar.getInstance();\n</code></pre>\n\n<p>Now I read java.util.Calendar isn't thread safe. How can I make this thread safe (it should be <strong>static</strong>)?</p>\n"},{"tags":["java","quarkus","quarkus-rest-client"],"comments":[{"owner":{"account_id":3052937,"reputation":17914,"user_id":2587166,"accept_rate":83,"display_name":"Luca Basso Ricci"},"score":0,"creation_date":1690352313,"post_id":76765016,"comment_id":135339487,"body_markdown":"https://quarkus.io/guides/resteasy-reactive#grouping-parameters-in-a-custom-class. Also https://docs.oracle.com/javaee/7/api/javax/ws/rs/BeanParam.html","body":"<a href=\"https://quarkus.io/guides/resteasy-reactive#grouping-parameters-in-a-custom-class\" rel=\"nofollow noreferrer\">quarkus.io/guides/&hellip;</a>. Also <a href=\"https://docs.oracle.com/javaee/7/api/javax/ws/rs/BeanParam.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javaee/7/api/javax/ws/rs/BeanParam.html</a>"}],"answers":[{"tags":[],"owner":{"account_id":6518557,"reputation":2810,"user_id":5043481,"display_name":"zforgo"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1690313874,"creation_date":1690313874,"answer_id":76766011,"question_id":76765016,"body_markdown":"**TLDR;** BeanParams are not working with Java Records yet.\r\n\r\n Quarkus 3 supports Jakarta EE APIs. The latest JakartaEE 10 specification contains Restful Web Services 3.1 component which is on Java 11.\r\n\r\nAccording to this [discussion on JakartaEE&#39;s GitHub project](https://github.com/jakartaee/rest/issues/913) v4.0 will be supporting Java 17 (or later) \r\n\r\nUsing traditional java class will solve this problem\r\n\r\n```java\r\npublic class ExampleSearchParameters {\r\n    @QueryParam(&quot;query&quot;)\r\n    String searchQuery;\r\n    @QueryParam(&quot;page_size&quot;)\r\n    Integer size;\r\n    @QueryParam(&quot;page_index&quot;)\r\n    Integer from;\r\n}\r\n```\r\n**Don&#39;t forget** to put annotations on fields (e.g. `@QueryParam`).\r\n\r\nNow, this POJO can be injected as a `@BeanParam` like this:\r\n\r\n```java\r\n@Path(&quot;/example&quot;)\r\npublic class ExampleResource {\r\n\r\n    @GET\r\n    public List&lt;String&gt; hello(@BeanParam ExampleSearchParameters filterParams) {\r\n        return List.of(&quot;query:&quot; + filterParams.searchQuery, &quot;size: &quot; + filterParams.size, &quot;from:&quot; + filterParams.from);\r\n    }\r\n}\r\n``` ","title":"How to pass GET query parameters in Quarkus as POJO object?","body":"<p><strong>TLDR;</strong> BeanParams are not working with Java Records yet.</p>\n<p>Quarkus 3 supports Jakarta EE APIs. The latest JakartaEE 10 specification contains Restful Web Services 3.1 component which is on Java 11.</p>\n<p>According to this <a href=\"https://github.com/jakartaee/rest/issues/913\" rel=\"nofollow noreferrer\">discussion on JakartaEE's GitHub project</a> v4.0 will be supporting Java 17 (or later)</p>\n<p>Using traditional java class will solve this problem</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class ExampleSearchParameters {\n    @QueryParam(&quot;query&quot;)\n    String searchQuery;\n    @QueryParam(&quot;page_size&quot;)\n    Integer size;\n    @QueryParam(&quot;page_index&quot;)\n    Integer from;\n}\n</code></pre>\n<p><strong>Don't forget</strong> to put annotations on fields (e.g. <code>@QueryParam</code>).</p>\n<p>Now, this POJO can be injected as a <code>@BeanParam</code> like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Path(&quot;/example&quot;)\npublic class ExampleResource {\n\n    @GET\n    public List&lt;String&gt; hello(@BeanParam ExampleSearchParameters filterParams) {\n        return List.of(&quot;query:&quot; + filterParams.searchQuery, &quot;size: &quot; + filterParams.size, &quot;from:&quot; + filterParams.from);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":5297359,"reputation":473,"user_id":4784969,"accept_rate":17,"display_name":"Politechniczny"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":479,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1690313874,"creation_date":1690304682,"question_id":76765016,"body_markdown":"I&#39;m switching from Spring to Quarkus and this doesn&#39;t seem to work the same way.\r\n\r\nThere are classes defined:\r\n\r\n```java\r\n@Path(&quot;/example&quot;)\r\npublic class ExampleResource {\r\n\r\n  @GET\r\n  public List&lt;String&gt; search(ExampleSearchParams params) {\r\n    Log.info(params);\r\n    return List.of();\r\n  }\r\n\r\n}\r\n```\r\n\r\n```java\r\npublic record ExampleSearchParams(\r\n  String searchQuery,\r\n  Integer size,\r\n  Integer from\r\n) {\r\n}\r\n```\r\nNow after querying URL `/example?size=10` or `/example?size=10&amp;from=10&amp;searchQuery=test` you get HTTP ERROR 415.\r\n\r\nTry 1. According to docs, you need to annotate with `@BeanParam`\r\n\r\n```java\r\n@Path(&quot;/example&quot;)\r\npublic class ExampleResource {\r\n\r\n  @GET                    // v HERE\r\n  public List&lt;String&gt; search(@BeanParam ExampleSearchParams params) {\r\n    Log.info(params);\r\n    return List.of();\r\n  }\r\n\r\n}\r\n```\r\nNow the Quarkus app fails to start:\r\n```\r\nERROR [io.qua.dep.dev.IsolatedDevModeMain] (main) Failed to start quarkus: java.lang.RuntimeException: io.quarkus.builder.BuildException: Build failure: Build failed due to errors\r\n\r\n[error]: Build step io.quarkus.arc.deployment.ArcProcessor#validate threw an exception: jakarta.enterprise.inject.spi.DeploymentException: Found 3 deployment problems: \r\n\r\n[1] Unsatisfied dependency for type java.lang.String and qualifiers [@Default]\r\n\r\n[2] Unsatisfied dependency for type java.lang.Integer and qualifiers [@Default]\r\n\r\n[3] Unsatisfied dependency for type java.lang.Integer and qualifiers [@Default]\r\n```\r\n\r\nTry 2. Add `@RestQuery` annotations\r\n\r\n```java\r\npublic record ExampleSearchParams(\r\n  @RestQuery\r\n  String searchQuery,\r\n  @RestQuery\r\n  Integer size,\r\n  @RestQuery\r\n  Integer from\r\n) {\r\n}\r\n```\r\nStill the same error on Quarkus app startup.\r\n\r\nTry 3. Use `@RestQuery` directly on object parameter.\r\n\r\n```java\r\n@Path(&quot;/example&quot;)\r\npublic class ExampleResource {\r\n\r\n  @GET\r\n  public List&lt;String&gt; search(@RestQuery ExampleSearchParams params) {\r\n    Log.info(params);\r\n    return List.of();\r\n  }\r\n\r\n}\r\n```\r\nAnd the Quarkus app fails to start with error:\r\n```\r\nCaused by: java.lang.RuntimeException: Could not create converter for ExampleSearchParams for method java.util.List&lt;java.lang.String&gt; search()\r\n```\r\n\r\nIn pom.xml there is dependency\r\n```xml\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;io.quarkus&lt;/groupId&gt;\r\n      &lt;artifactId&gt;quarkus-resteasy-reactive-jackson&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n```\r\n\r\nAny workaround for this? ","title":"How to pass GET query parameters in Quarkus as POJO object?","body":"<p>I'm switching from Spring to Quarkus and this doesn't seem to work the same way.</p>\n<p>There are classes defined:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Path(&quot;/example&quot;)\npublic class ExampleResource {\n\n  @GET\n  public List&lt;String&gt; search(ExampleSearchParams params) {\n    Log.info(params);\n    return List.of();\n  }\n\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>public record ExampleSearchParams(\n  String searchQuery,\n  Integer size,\n  Integer from\n) {\n}\n</code></pre>\n<p>Now after querying URL <code>/example?size=10</code> or <code>/example?size=10&amp;from=10&amp;searchQuery=test</code> you get HTTP ERROR 415.</p>\n<p>Try 1. According to docs, you need to annotate with <code>@BeanParam</code></p>\n<pre class=\"lang-java prettyprint-override\"><code>@Path(&quot;/example&quot;)\npublic class ExampleResource {\n\n  @GET                    // v HERE\n  public List&lt;String&gt; search(@BeanParam ExampleSearchParams params) {\n    Log.info(params);\n    return List.of();\n  }\n\n}\n</code></pre>\n<p>Now the Quarkus app fails to start:</p>\n<pre><code>ERROR [io.qua.dep.dev.IsolatedDevModeMain] (main) Failed to start quarkus: java.lang.RuntimeException: io.quarkus.builder.BuildException: Build failure: Build failed due to errors\n\n[error]: Build step io.quarkus.arc.deployment.ArcProcessor#validate threw an exception: jakarta.enterprise.inject.spi.DeploymentException: Found 3 deployment problems: \n\n[1] Unsatisfied dependency for type java.lang.String and qualifiers [@Default]\n\n[2] Unsatisfied dependency for type java.lang.Integer and qualifiers [@Default]\n\n[3] Unsatisfied dependency for type java.lang.Integer and qualifiers [@Default]\n</code></pre>\n<p>Try 2. Add <code>@RestQuery</code> annotations</p>\n<pre class=\"lang-java prettyprint-override\"><code>public record ExampleSearchParams(\n  @RestQuery\n  String searchQuery,\n  @RestQuery\n  Integer size,\n  @RestQuery\n  Integer from\n) {\n}\n</code></pre>\n<p>Still the same error on Quarkus app startup.</p>\n<p>Try 3. Use <code>@RestQuery</code> directly on object parameter.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Path(&quot;/example&quot;)\npublic class ExampleResource {\n\n  @GET\n  public List&lt;String&gt; search(@RestQuery ExampleSearchParams params) {\n    Log.info(params);\n    return List.of();\n  }\n\n}\n</code></pre>\n<p>And the Quarkus app fails to start with error:</p>\n<pre><code>Caused by: java.lang.RuntimeException: Could not create converter for ExampleSearchParams for method java.util.List&lt;java.lang.String&gt; search()\n</code></pre>\n<p>In pom.xml there is dependency</p>\n<pre class=\"lang-xml prettyprint-override\"><code>    &lt;dependency&gt;\n      &lt;groupId&gt;io.quarkus&lt;/groupId&gt;\n      &lt;artifactId&gt;quarkus-resteasy-reactive-jackson&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>Any workaround for this?</p>\n"},{"tags":["java","collections","set","hashset"],"comments":[{"owner":{"account_id":17835,"reputation":303905,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":2,"creation_date":1646240414,"post_id":71326401,"comment_id":126075957,"body_markdown":"Have you checked [the documentation](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Set.html#of(E...))? It doesn&#39;t define a specific implementation class, but describes some properties of that implementation instead. That means that it&#39;s probably implemented via some internal class. Your first example uses [double-brace initialization](https://stackoverflow.com/questions/1958636/what-is-double-brace-initialization-in-java) which I&#39;d avoid, because it creates classes where no new classes should be needed.","body":"Have you checked <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Set.html#of(E...)\" rel=\"nofollow noreferrer\">the documentation</a>? It doesn&#39;t define a specific implementation class, but describes some properties of that implementation instead. That means that it&#39;s probably implemented via some internal class. Your first example uses <a href=\"https://stackoverflow.com/questions/1958636/what-is-double-brace-initialization-in-java\">double-brace initialization</a> which I&#39;d avoid, because it creates classes where no new classes should be needed."},{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":1,"creation_date":1646240421,"post_id":71326401,"comment_id":126075961,"body_markdown":"`MySillyTest$1` is an anonymous subclass of `HashSet`;  `Set.of()` is returning an [unmodifiable set](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Set.html#unmodifiable) {usually a non-public class, can change depending on version of Java} {source code of `ImmutableCollections` should be distributed together with the JDK, see `lib/src.zip` }","body":"<code>MySillyTest$1</code> is an anonymous subclass of <code>HashSet</code>;  <code>Set.of()</code> is returning an <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Set.html#unmodifiable\" rel=\"nofollow noreferrer\">unmodifiable set</a> {usually a non-public class, can change depending on version of Java} {source code of <code>ImmutableCollections</code> should be distributed together with the JDK, see <code>lib&#47;src.zip</code> }"},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":3,"creation_date":1646241344,"post_id":71326401,"comment_id":126076332,"body_markdown":"[Don’t use double brace initialization.](https://stackoverflow.com/questions/1958636/what-is-double-brace-initialization-in-java)","body":"<a href=\"https://stackoverflow.com/questions/1958636/what-is-double-brace-initialization-in-java\">Don’t use double brace initialization.</a>"},{"owner":{"account_id":3931383,"reputation":1862,"user_id":4012392,"accept_rate":58,"display_name":"hc0re"},"score":0,"creation_date":1646291375,"post_id":71326401,"comment_id":126087993,"body_markdown":"@BasilBourque, thanks for pointing this out, I have edited the snippet","body":"@BasilBourque, thanks for pointing this out, I have edited the snippet"}],"answers":[{"tags":[],"owner":{"account_id":2496,"reputation":266244,"user_id":3474,"accept_rate":83,"display_name":"erickson"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1646240591,"creation_date":1646240591,"answer_id":71326488,"question_id":71326401,"body_markdown":"The implementation class resulting from `Set.of(...)` is not guaranteed. It could change depending on the runtime implementation or in future versions. However, some of its characteristics&amp;mdash;chiefly immutability&amp;mdash;are guaranteed.\r\n\r\nWhen you use &quot;double-brace initialization&quot;, you are defining a new anonymous class that derives from the specified type. So `MySillyTest$1` extends `HashSet` because that&#39;s what you specified. Note that double-brace initialization [has problems;][1] I don&#39;t allow it, and I discourage others from using it.\r\n\r\nThe important difference between the two is the immutability resulting from `Set.of(...)`. If you need a mutable set, it&#39;s not an option. But if you can use an immutable set, it provides superior readability and performance.\r\n\r\nEven if you need a mutable set, however, don&#39;t look at double-brace initialization as an alternative to `Set.of(...)`; just use a `HashSet` in the conventional way.\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/27521360/3474","title":"Set.of(E... elements) - which Set implementation is it using? and what is its relation to new HashSet&lt;&gt;()?","body":"<p>The implementation class resulting from <code>Set.of(...)</code> is not guaranteed. It could change depending on the runtime implementation or in future versions. However, some of its characteristics—chiefly immutability—are guaranteed.</p>\n<p>When you use &quot;double-brace initialization&quot;, you are defining a new anonymous class that derives from the specified type. So <code>MySillyTest$1</code> extends <code>HashSet</code> because that's what you specified. Note that double-brace initialization <a href=\"https://stackoverflow.com/a/27521360/3474\">has problems;</a> I don't allow it, and I discourage others from using it.</p>\n<p>The important difference between the two is the immutability resulting from <code>Set.of(...)</code>. If you need a mutable set, it's not an option. But if you can use an immutable set, it provides superior readability and performance.</p>\n<p>Even if you need a mutable set, however, don't look at double-brace initialization as an alternative to <code>Set.of(...)</code>; just use a <code>HashSet</code> in the conventional way.</p>\n"},{"comments":[{"owner":{"account_id":990786,"reputation":124,"user_id":1008176,"display_name":"Alkenrinnstet"},"score":0,"creation_date":1690301185,"post_id":71326564,"comment_id":135332940,"body_markdown":"**But I do care**, because Set gives no performance guarantees.","body":"<b>But I do care</b>, because Set gives no performance guarantees."},{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1690303063,"post_id":71326564,"comment_id":135333346,"body_markdown":"@Alkenrinnstet If you care about the specific details of the implementation, then you should *not* use `Set.of`. The implementation used by `Set.of`could change in future releases of the JDK. You should explicitly choose a particular implementation that meets your needs. You can choose one of the bundled implementations, obtain one from a third-party library such as *Eclipse Collections* or *Google Guava*, or write your own. Tip: You can leverage the convenient syntax of `Set.of` by passing its result to the constructor of your chosen implementation, as seen at the bottom of the Answer.","body":"@Alkenrinnstet If you care about the specific details of the implementation, then you should <i>not</i> use <code>Set.of</code>. The implementation used by <code>Set.of</code>could change in future releases of the JDK. You should explicitly choose a particular implementation that meets your needs. You can choose one of the bundled implementations, obtain one from a third-party library such as <i>Eclipse Collections</i> or <i>Google Guava</i>, or write your own. Tip: You can leverage the convenient syntax of <code>Set.of</code> by passing its result to the constructor of your chosen implementation, as seen at the bottom of the Answer."}],"tags":[],"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"comment_count":2,"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1690313865,"creation_date":1646240960,"answer_id":71326564,"question_id":71326401,"body_markdown":"# Don’t know, don’t care\r\n\r\nThe concrete class used by [`Set.of`][1] (and [`List.of`][2], [`Map.of`][3]) is not documented. All we know is that the object returned (a) implements the interface, and (b) is unmodifiable. \r\n\r\nThat is all we need to know. We should not care about the particular concrete class used under the covers. \r\n\r\nBeing of unknown concrete class gives freedom to the implementors of the `of` methods. \r\n\r\n - Those programmers are free to optimize according to the nature of your arguments. For example, if you are passing enum arguments, the highly optimized [`EnumSet`][4] class might be used behind the scenes. \r\n - Those programmers are free to change their concrete class between versions of Java. For example, Java 17 implementation might return one concrete class while Java 18 returns another. \r\n\r\nSo you should **never depend on a particular concrete class** being utilized by the `of`/[`copyOf`][5] methods. \r\n\r\nYou asked:\r\n\r\n&gt; What is the real difference between those two? \r\n\r\nIn your first one, we know the concrete class. And the resulting set is modifiable. \r\n\r\nIn your second one, we do not know the concrete class, nor do we care about the concrete class. And the resulting set is unmodifiable. \r\n\r\n\r\n|Code| Concrete Class |Modifiable|\r\n|:--:|:--:|:--:|\r\n| new HashSet&lt;&gt;() {{ add(&quot;a&quot;); add(&quot;b&quot;); add(&quot;c&quot;); }} | known | modifiable |\r\n| Set.of( &quot;a&quot;, &quot;b&quot;, &quot;c&quot; | unknown | unmodifiable |\r\n\r\n# Avoid double-brace\r\n\r\nAs others said, it’s generally best to avoid double-brace initialization. \r\n\r\nIf you want the convenience of compact literals-style initialization of your modifiable collection, combine with the `of` methods.  You can pass an existing collection to the constructor. \r\n\r\n    Set&lt; String &gt; set =\r\n        new HashSet&lt;&gt;(\r\n            Set.of( &quot;a&quot;, &quot;b&quot;, &quot;c&quot; )  // Pass a collection to constructor. \r\n        )\r\n    ;\r\n\r\n    \r\n# “But I *do* care …”\r\n\r\nIf you do care about the specific details of the implementation, then you should not use `Set.of`. The implementation details may vary as discussed above, so you should not rely on a specific implementation with `Set.of`. \r\n\r\nWhen your project has specific needs, you should explicitly choose a particular implementation that meets those needs. You can choose one of the bundled implementations, obtain one from a third-party library such as [*Eclipse Collections*][7] or [Google Guava][8], or write your own. \r\n\r\nTip: You can leverage the convenient syntax of `Set.of` by passing its result to the constructor of your chosen implementation. See the code example above: \r\n\r\n    new HashSet&lt;&gt;( Set.of( … ) )\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Set.html#of(E...)\r\n  [2]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html#of(E...)\r\n  [3]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Map.html#of(K,V)\r\n  [4]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/EnumSet.html\r\n  [5]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Set.html#copyOf(java.util.Collection)\r\n  [6]: https://en.wikipedia.org/wiki/Java_Development_Kit\r\n  [7]: https://eclipse.dev/collections/\r\n  [8]: https://en.wikipedia.org/wiki/Google_Guava","title":"Set.of(E... elements) - which Set implementation is it using? and what is its relation to new HashSet&lt;&gt;()?","body":"<h1>Don’t know, don’t care</h1>\n<p>The concrete class used by <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Set.html#of(E...)\" rel=\"nofollow noreferrer\"><code>Set.of</code></a> (and <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html#of(E...)\" rel=\"nofollow noreferrer\"><code>List.of</code></a>, <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Map.html#of(K,V)\" rel=\"nofollow noreferrer\"><code>Map.of</code></a>) is not documented. All we know is that the object returned (a) implements the interface, and (b) is unmodifiable.</p>\n<p>That is all we need to know. We should not care about the particular concrete class used under the covers.</p>\n<p>Being of unknown concrete class gives freedom to the implementors of the <code>of</code> methods.</p>\n<ul>\n<li>Those programmers are free to optimize according to the nature of your arguments. For example, if you are passing enum arguments, the highly optimized <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/EnumSet.html\" rel=\"nofollow noreferrer\"><code>EnumSet</code></a> class might be used behind the scenes.</li>\n<li>Those programmers are free to change their concrete class between versions of Java. For example, Java 17 implementation might return one concrete class while Java 18 returns another.</li>\n</ul>\n<p>So you should <strong>never depend on a particular concrete class</strong> being utilized by the <code>of</code>/<a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Set.html#copyOf(java.util.Collection)\" rel=\"nofollow noreferrer\"><code>copyOf</code></a> methods.</p>\n<p>You asked:</p>\n<blockquote>\n<p>What is the real difference between those two?</p>\n</blockquote>\n<p>In your first one, we know the concrete class. And the resulting set is modifiable.</p>\n<p>In your second one, we do not know the concrete class, nor do we care about the concrete class. And the resulting set is unmodifiable.</p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th style=\"text-align: center;\">Code</th>\n<th style=\"text-align: center;\">Concrete Class</th>\n<th style=\"text-align: center;\">Modifiable</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align: center;\">new HashSet&lt;&gt;() {{ add(&quot;a&quot;); add(&quot;b&quot;); add(&quot;c&quot;); }}</td>\n<td style=\"text-align: center;\">known</td>\n<td style=\"text-align: center;\">modifiable</td>\n</tr>\n<tr>\n<td style=\"text-align: center;\">Set.of( &quot;a&quot;, &quot;b&quot;, &quot;c&quot;</td>\n<td style=\"text-align: center;\">unknown</td>\n<td style=\"text-align: center;\">unmodifiable</td>\n</tr>\n</tbody>\n</table>\n</div><h1>Avoid double-brace</h1>\n<p>As others said, it’s generally best to avoid double-brace initialization.</p>\n<p>If you want the convenience of compact literals-style initialization of your modifiable collection, combine with the <code>of</code> methods.  You can pass an existing collection to the constructor.</p>\n<pre><code>Set&lt; String &gt; set =\n    new HashSet&lt;&gt;(\n        Set.of( &quot;a&quot;, &quot;b&quot;, &quot;c&quot; )  // Pass a collection to constructor. \n    )\n;\n</code></pre>\n<h1>“But I <em>do</em> care …”</h1>\n<p>If you do care about the specific details of the implementation, then you should not use <code>Set.of</code>. The implementation details may vary as discussed above, so you should not rely on a specific implementation with <code>Set.of</code>.</p>\n<p>When your project has specific needs, you should explicitly choose a particular implementation that meets those needs. You can choose one of the bundled implementations, obtain one from a third-party library such as <a href=\"https://eclipse.dev/collections/\" rel=\"nofollow noreferrer\"><em>Eclipse Collections</em></a> or <a href=\"https://en.wikipedia.org/wiki/Google_Guava\" rel=\"nofollow noreferrer\">Google Guava</a>, or write your own.</p>\n<p>Tip: You can leverage the convenient syntax of <code>Set.of</code> by passing its result to the constructor of your chosen implementation. See the code example above:</p>\n<pre><code>new HashSet&lt;&gt;( Set.of( … ) )\n</code></pre>\n"}],"owner":{"account_id":3931383,"reputation":1862,"user_id":4012392,"accept_rate":58,"display_name":"hc0re"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":899,"favorite_count":0,"down_vote_count":2,"up_vote_count":2,"accepted_answer_id":71326564,"answer_count":2,"score":0,"last_activity_date":1690313865,"creation_date":1646240142,"question_id":71326401,"body_markdown":"I wanted to ask - what is the difference between\r\n\r\n    Set&lt;CurrencyType&gt; set1 = new HashSet&lt;&gt;() {{\r\n        add(&quot;a&quot;);\r\n        add(&quot;b&quot;);\r\n        add(&quot;c&quot;);\r\n    }}\r\n\r\nand\r\n\r\n    Set&lt;CurrencyType&gt; set2 = Set.of(\r\n        &quot;a&quot;,\r\n        &quot;b&quot;,\r\n        &quot;c&quot;\r\n    )\r\n\r\nIn debug mode in a @Test named `MySillyTest` (this name will come back very soon) i can see that `set1` is an instance of `MySillyTest$1`, but I assume it is just a `HashSet`. `set2` on the other hand is an instance of `ImmutableCollections$SetN`. What is the real difference between those two? What implementation of `java.util.Set` is `Set.of()` using? Is there a performance/memory usage/cpu usage difference between those two?","title":"Set.of(E... elements) - which Set implementation is it using? and what is its relation to new HashSet&lt;&gt;()?","body":"<p>I wanted to ask - what is the difference between</p>\n<pre><code>Set&lt;CurrencyType&gt; set1 = new HashSet&lt;&gt;() {{\n    add(&quot;a&quot;);\n    add(&quot;b&quot;);\n    add(&quot;c&quot;);\n}}\n</code></pre>\n<p>and</p>\n<pre><code>Set&lt;CurrencyType&gt; set2 = Set.of(\n    &quot;a&quot;,\n    &quot;b&quot;,\n    &quot;c&quot;\n)\n</code></pre>\n<p>In debug mode in a @Test named <code>MySillyTest</code> (this name will come back very soon) i can see that <code>set1</code> is an instance of <code>MySillyTest$1</code>, but I assume it is just a <code>HashSet</code>. <code>set2</code> on the other hand is an instance of <code>ImmutableCollections$SetN</code>. What is the real difference between those two? What implementation of <code>java.util.Set</code> is <code>Set.of()</code> using? Is there a performance/memory usage/cpu usage difference between those two?</p>\n"},{"tags":["java","mysql","spring","spring-boot"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1690303274,"post_id":76764041,"comment_id":135333385,"body_markdown":"I strongly advise *not* running with a user called &#39;root&#39;. For one thing, you can easily get locked out from the whole server doing that and it&#39;s a PITA to correct that. Create a new user with its own password","body":"I strongly advise <i>not</i> running with a user called &#39;root&#39;. For one thing, you can easily get locked out from the whole server doing that and it&#39;s a PITA to correct that. Create a new user with its own password"}],"answers":[{"tags":[],"owner":{"account_id":8362258,"reputation":1639,"user_id":6280135,"display_name":"Maninder"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690313473,"creation_date":1690313473,"answer_id":76765966,"question_id":76764041,"body_markdown":"I think you forget one property for password. Even though MySQL DB doesn&#39;t have any password you need to pass this property.\r\n\r\n    spring.datasource.jdbcUrl=jdbc:mysql://127.0.0.1:3306/mydb?useSSL=false\r\n    spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver\r\n    spring.datasource.username=root\r\n    spring.datasource.password= ","title":"MySQL 8.0 Access denied for user &#39;root&#39;@&#39;localhost&#39; with empty password","body":"<p>I think you forget one property for password. Even though MySQL DB doesn't have any password you need to pass this property.</p>\n<pre><code>spring.datasource.jdbcUrl=jdbc:mysql://127.0.0.1:3306/mydb?useSSL=false\nspring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver\nspring.datasource.username=root\nspring.datasource.password= \n</code></pre>\n"}],"owner":{"account_id":1250016,"reputation":865,"user_id":3151513,"accept_rate":60,"display_name":"July"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":52,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1690313473,"creation_date":1690297477,"question_id":76764041,"body_markdown":"On my Debian system, type \r\n``` mysql -u root  -h localhost -P 3306```\r\nIt can login successfully:\r\n```\r\n\r\nWelcome to the MySQL monitor.  Commands end with ; or \\g.\r\nYour MySQL connection id is 213\r\nServer version: 8.0.33 MySQL Community Server - GPL\r\n\r\nCopyright (c) 2000, 2023, Oracle and/or its affiliates.\r\n\r\nOracle is a registered trademark of Oracle Corporation and/or its\r\naffiliates. Other names may be trademarks of their respective\r\nowners.\r\n\r\nType &#39;help;&#39; or &#39;\\h&#39; for help. Type &#39;\\c&#39; to clear the current input statement.\r\n\r\nmysql&gt; \r\n\r\n```\r\n\r\nBut when I start spring boot 2.5.3 with config like below in application.properties:\r\n```\r\nspring.datasource.jdbcUrl=jdbc:mysql://127.0.0.1:3306/mydb?useSSL=false\r\nspring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver\r\nspring.datasource.username=root\r\n```\r\n\r\nproduced exception like below:\r\n```\r\njava.sql.SQLException: Access denied for user &#39;root&#39;@&#39;localhost&#39;\r\n        at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:129) ~[mysql-connector-java-8.0.26.jar:8.0.26]\r\n        at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122) ~[mysql-connector-java-8.0.26.jar:8.0.26]\r\n        at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:828) ~[mysql-connector-java-8.0.26.jar:8.0.26]\r\n        at com.mysql.cj.jdbc.ConnectionImpl.&lt;init&gt;(ConnectionImpl.java:448) ~[mysql-connector-java-8.0.26.jar:8.0.26]\r\n        at com.mysql.cj.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:241) ~[mysql-connector-java-8.0.26.jar:8.0.26]\r\n        at com.mysql.cj.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:198) ~[mysql-connector-java-8.0.26.jar:8.0.26]\r\n        at com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:138) ~[HikariCP-4.0.3.jar:na]\r\n        at com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:364) ~[HikariCP-4.0.3.jar:na]\r\n        at com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:206) ~[HikariCP-4.0.3.jar:na]\r\n        at com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:476) ~[HikariCP-4.0.3.jar:na]\r\n        at com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:561) ~[HikariCP-4.0.3.jar:na]\r\n        at com.zaxxer.hikari.pool.HikariPool.&lt;init&gt;(HikariPool.java:115) ~[HikariCP-4.0.3.jar:na]\r\n        at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:112) ~[HikariCP-4.0.3.jar:na]\r\n\r\n```\r\n\r\n\r\n\r\n\r\n","title":"MySQL 8.0 Access denied for user &#39;root&#39;@&#39;localhost&#39; with empty password","body":"<p>On my Debian system, type\n<code> mysql -u root  -h localhost -P 3306</code>\nIt can login successfully:</p>\n<pre><code>\nWelcome to the MySQL monitor.  Commands end with ; or \\g.\nYour MySQL connection id is 213\nServer version: 8.0.33 MySQL Community Server - GPL\n\nCopyright (c) 2000, 2023, Oracle and/or its affiliates.\n\nOracle is a registered trademark of Oracle Corporation and/or its\naffiliates. Other names may be trademarks of their respective\nowners.\n\nType 'help;' or '\\h' for help. Type '\\c' to clear the current input statement.\n\nmysql&gt; \n\n</code></pre>\n<p>But when I start spring boot 2.5.3 with config like below in application.properties:</p>\n<pre><code>spring.datasource.jdbcUrl=jdbc:mysql://127.0.0.1:3306/mydb?useSSL=false\nspring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver\nspring.datasource.username=root\n</code></pre>\n<p>produced exception like below:</p>\n<pre><code>java.sql.SQLException: Access denied for user 'root'@'localhost'\n        at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:129) ~[mysql-connector-java-8.0.26.jar:8.0.26]\n        at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122) ~[mysql-connector-java-8.0.26.jar:8.0.26]\n        at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:828) ~[mysql-connector-java-8.0.26.jar:8.0.26]\n        at com.mysql.cj.jdbc.ConnectionImpl.&lt;init&gt;(ConnectionImpl.java:448) ~[mysql-connector-java-8.0.26.jar:8.0.26]\n        at com.mysql.cj.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:241) ~[mysql-connector-java-8.0.26.jar:8.0.26]\n        at com.mysql.cj.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:198) ~[mysql-connector-java-8.0.26.jar:8.0.26]\n        at com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:138) ~[HikariCP-4.0.3.jar:na]\n        at com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:364) ~[HikariCP-4.0.3.jar:na]\n        at com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:206) ~[HikariCP-4.0.3.jar:na]\n        at com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:476) ~[HikariCP-4.0.3.jar:na]\n        at com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:561) ~[HikariCP-4.0.3.jar:na]\n        at com.zaxxer.hikari.pool.HikariPool.&lt;init&gt;(HikariPool.java:115) ~[HikariCP-4.0.3.jar:na]\n        at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:112) ~[HikariCP-4.0.3.jar:na]\n\n</code></pre>\n"},{"tags":["java","postgresql","spring-boot","flyway"],"answers":[{"comments":[{"owner":{"account_id":20069788,"reputation":25,"user_id":17535621,"display_name":"Julia_Gubolin"},"score":0,"creation_date":1690319065,"post_id":76765923,"comment_id":135336323,"body_markdown":"Thanks for your answer, Mar-Z! It solved the problem.","body":"Thanks for your answer, Mar-Z! It solved the problem."},{"owner":{"account_id":19535095,"reputation":2874,"user_id":14294053,"display_name":"Mar-Z"},"score":0,"creation_date":1690353130,"post_id":76765923,"comment_id":135339631,"body_markdown":"Cool. Thanks for feedback.","body":"Cool. Thanks for feedback."}],"tags":[],"owner":{"account_id":19535095,"reputation":2874,"user_id":14294053,"display_name":"Mar-Z"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1690313013,"creation_date":1690313013,"answer_id":76765923,"question_id":76765760,"body_markdown":"The column `dtype` has been added implicitly to the table `users` because it is now the base entity for the `customers`. Hibernate uses it as a discriminator to distinguish between both objects. You should add it to the Flyway script as a TEXT type column.","title":"ERROR: column &quot;dtype&quot; of relation &quot;users&quot; does not exist","body":"<p>The column <code>dtype</code> has been added implicitly to the table <code>users</code> because it is now the base entity for the <code>customers</code>. Hibernate uses it as a discriminator to distinguish between both objects. You should add it to the Flyway script as a TEXT type column.</p>\n"}],"owner":{"account_id":20069788,"reputation":25,"user_id":17535621,"display_name":"Julia_Gubolin"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":315,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76765923,"answer_count":1,"score":0,"last_activity_date":1690313013,"creation_date":1690311443,"question_id":76765760,"body_markdown":"I&#39;m creating an API with Spring Boot (3.1.1), Java, PostgreSQL and Flyway. I started doing the security settings with Spring Security, creating a user that could have 3 roles (ADMIN, USER, CUSTOMER) and the functions of authentication, authorization and get all/update/delete of users worked without problems.\r\nHowever, I wanted Customer to have more attributes than I had put in User, so I created a class called Customer and had it inherit from User. I did this in code and in migration. But now, when I try to register a new user (User, not Customer), it returns the error: ERROR: column &quot;dtype&quot; of relation &quot;users&quot; does not exist. I didn&#39;t put this attribute in the users table and I couldn&#39;t resolve the error. I tried to recreate the migrations and the database, but it didn&#39;t work.\r\n\r\n**Class User**\r\n\r\n```\r\npackage com.example.auth.domain.user;\r\n\r\nimport jakarta.persistence.*;\r\nimport lombok.AllArgsConstructor;\r\nimport lombok.EqualsAndHashCode;\r\nimport lombok.Getter;\r\nimport lombok.NoArgsConstructor;\r\nimport lombok.Setter;\r\n\r\nimport org.springframework.security.core.GrantedAuthority;\r\nimport org.springframework.security.core.authority.SimpleGrantedAuthority;\r\nimport org.springframework.security.core.userdetails.UserDetails;\r\n\r\nimport java.util.Collection;\r\nimport java.util.List;\r\n\r\n@Table(name = &quot;users&quot;)\r\n@Entity(name = &quot;users&quot;)\r\n@Getter\r\n@Setter\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\n@EqualsAndHashCode(of = &quot;id&quot;)\r\npublic class User implements UserDetails {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.UUID)\r\n    private String id;\r\n    private String login;\r\n    private String password;\r\n    private UserRole role;\r\n\r\n    public User(String login, String password, UserRole role){\r\n        this.login = login;\r\n        this.password = password;\r\n        this.role = role;\r\n    }\r\n\r\n    @Override\r\n    public Collection&lt;? extends GrantedAuthority&gt; getAuthorities() {\r\n        if(this.role == UserRole.ADMIN){\r\n            return List.of(new SimpleGrantedAuthority(&quot;ROLE_ADMIN&quot;), new SimpleGrantedAuthority(&quot;ROLE_USER&quot;), new SimpleGrantedAuthority(&quot;ROLE_CUSTOMER&quot;));\r\n        } \r\n        else if(this.role == UserRole.USER){\r\n            return List.of(new SimpleGrantedAuthority(&quot;ROLE_USER&quot;), new SimpleGrantedAuthority(&quot;ROLE_CUSTOMER&quot;));\r\n        }\r\n        else{\r\n            return List.of(new SimpleGrantedAuthority(&quot;ROLE_CUSTOMER&quot;));\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public String getUsername() {\r\n        return login;\r\n    }\r\n\r\n    @Override\r\n    public boolean isAccountNonExpired() {\r\n        return true;\r\n    }\r\n\r\n    @Override\r\n    public boolean isAccountNonLocked() {\r\n        return true;\r\n    }\r\n\r\n    @Override\r\n    public boolean isCredentialsNonExpired() {\r\n        return true;\r\n    }\r\n\r\n    @Override\r\n    public boolean isEnabled() {\r\n        return true;\r\n    }\r\n}\r\n```\r\n\r\n**Class Customer:**\r\n\r\n```\r\npackage com.example.auth.domain.costumer;\r\n\r\nimport com.example.auth.domain.user.User;\r\nimport com.example.auth.domain.user.UserRole;\r\n\r\nimport jakarta.persistence.Entity;\r\nimport jakarta.persistence.Table;\r\nimport lombok.AllArgsConstructor;\r\nimport lombok.Getter;\r\nimport lombok.NoArgsConstructor;\r\nimport lombok.Setter;\r\n\r\n@Entity(name = &quot;customers&quot;)\r\n@Table(name=&quot;customers&quot;)\r\n@AllArgsConstructor\r\n@Getter\r\n@Setter\r\n@NoArgsConstructor\r\npublic class Customer extends User{\r\n\r\n    private String name;\r\n    private String email;\r\n    private String phone;\r\n    private Integer relationshipTime;\r\n    private Integer age;\r\n    private CustomerContactRole contactorigin;\r\n    private CustomerAccountTypeRole accounttype;\r\n\r\n    public Customer(String login, String password, String name, String email, String phone,\r\n            Integer relationshipTime, Integer age, CustomerContactRole contactOrigin,\r\n            CustomerAccountTypeRole accountType) {\r\n        super(login, password, UserRole.CUSTOMER);\r\n        this.name = name;\r\n        this.email = email;\r\n        this.phone = phone;\r\n        this.relationshipTime = relationshipTime;\r\n        this.age = age;\r\n        this.contactorigin = contactOrigin;\r\n        this.accounttype = accountType;\r\n    }\r\n\r\n}\r\n```\r\n\r\n**Migration: V1__create-product-user-customer-table.sql**\r\n\r\n```\r\nCREATE TABLE product (\r\n    id TEXT PRIMARY KEY UNIQUE NOT NULL,\r\n    name TEXT NOT NULL,\r\n    price INTEGER NOT NULL\r\n);\r\nCREATE TABLE users (\r\n    id TEXT PRIMARY KEY UNIQUE NOT NULL,\r\n    login TEXT NOT NULL UNIQUE,\r\n    password TEXT NOT NULL,\r\n    role TEXT NOT NULL\r\n);\r\n\r\nCREATE TABLE customers (\r\n    name TEXT NOT NULL UNIQUE,\r\n    email TEXT NOT NULL,\r\n    phone TEXT NOT NULL,\r\n    relationshiptime INTEGER NOT NULL,\r\n    age INTEGER NOT NULL,\r\n    contactorigin TEXT NOT NULL,\r\n    accounttype TEXT NOT NULL\r\n) inherits (users);\r\n```\r\n\r\n**Endpoint that generates de error (when I try to register a new User)**\r\n\r\n```\r\n@PostMapping(&quot;/register&quot;)\r\n    public ResponseEntity&lt;String&gt; register(@RequestBody @Valid RegisterDTO data){\r\n        /*if(this.repository.findByLogin(data.login()) != null) {\r\n            String jooj=&quot;&quot;;\r\n            return ResponseEntity.status(HttpStatus.NOT_FOUND).body(&quot;Wrong acess.&quot;);\r\n        }*/\r\n        \r\n        String encryptedPassword = new BCryptPasswordEncoder().encode(data.password());\r\n        User newUser = new User(data.login(), encryptedPassword, data.role());\r\n\r\n        this.repository.save(newUser);\r\n\r\n        return ResponseEntity.status(HttpStatus.OK).body(&quot;Account created sucessfully&quot;);\r\n    }\r\n```\r\n\r\n**Error**\r\n\r\n```\r\nServlet.service() for \r\nservlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: org.springframework.dao.InvalidDataAccessResourceUsageException: could not execute statement [ERROR: column &quot;dtype&quot; of relation &quot;users&quot; does not exist\r\n  Posi&#254;&#210;o: 40] [insert into users (login,password,role,dtype,id) values (?,?,?,&#39;users&#39;,?)]; SQL [insert into users (login,password,role,dtype,id) values (?,?,?,&#39;users&#39;,?)]] with root cause\r\n\r\norg.postgresql.util.PSQLException: ERROR: column &quot;dtype&quot; of relation &quot;users&quot; does not exist\r\n  Posi&#231;&#227;o: 40```","title":"ERROR: column &quot;dtype&quot; of relation &quot;users&quot; does not exist","body":"<p>I'm creating an API with Spring Boot (3.1.1), Java, PostgreSQL and Flyway. I started doing the security settings with Spring Security, creating a user that could have 3 roles (ADMIN, USER, CUSTOMER) and the functions of authentication, authorization and get all/update/delete of users worked without problems.\nHowever, I wanted Customer to have more attributes than I had put in User, so I created a class called Customer and had it inherit from User. I did this in code and in migration. But now, when I try to register a new user (User, not Customer), it returns the error: ERROR: column &quot;dtype&quot; of relation &quot;users&quot; does not exist. I didn't put this attribute in the users table and I couldn't resolve the error. I tried to recreate the migrations and the database, but it didn't work.</p>\n<p><strong>Class User</strong></p>\n<pre><code>package com.example.auth.domain.user;\n\nimport jakarta.persistence.*;\nimport lombok.AllArgsConstructor;\nimport lombok.EqualsAndHashCode;\nimport lombok.Getter;\nimport lombok.NoArgsConstructor;\nimport lombok.Setter;\n\nimport org.springframework.security.core.GrantedAuthority;\nimport org.springframework.security.core.authority.SimpleGrantedAuthority;\nimport org.springframework.security.core.userdetails.UserDetails;\n\nimport java.util.Collection;\nimport java.util.List;\n\n@Table(name = &quot;users&quot;)\n@Entity(name = &quot;users&quot;)\n@Getter\n@Setter\n@NoArgsConstructor\n@AllArgsConstructor\n@EqualsAndHashCode(of = &quot;id&quot;)\npublic class User implements UserDetails {\n    @Id\n    @GeneratedValue(strategy = GenerationType.UUID)\n    private String id;\n    private String login;\n    private String password;\n    private UserRole role;\n\n    public User(String login, String password, UserRole role){\n        this.login = login;\n        this.password = password;\n        this.role = role;\n    }\n\n    @Override\n    public Collection&lt;? extends GrantedAuthority&gt; getAuthorities() {\n        if(this.role == UserRole.ADMIN){\n            return List.of(new SimpleGrantedAuthority(&quot;ROLE_ADMIN&quot;), new SimpleGrantedAuthority(&quot;ROLE_USER&quot;), new SimpleGrantedAuthority(&quot;ROLE_CUSTOMER&quot;));\n        } \n        else if(this.role == UserRole.USER){\n            return List.of(new SimpleGrantedAuthority(&quot;ROLE_USER&quot;), new SimpleGrantedAuthority(&quot;ROLE_CUSTOMER&quot;));\n        }\n        else{\n            return List.of(new SimpleGrantedAuthority(&quot;ROLE_CUSTOMER&quot;));\n        }\n    }\n\n    @Override\n    public String getUsername() {\n        return login;\n    }\n\n    @Override\n    public boolean isAccountNonExpired() {\n        return true;\n    }\n\n    @Override\n    public boolean isAccountNonLocked() {\n        return true;\n    }\n\n    @Override\n    public boolean isCredentialsNonExpired() {\n        return true;\n    }\n\n    @Override\n    public boolean isEnabled() {\n        return true;\n    }\n}\n</code></pre>\n<p><strong>Class Customer:</strong></p>\n<pre><code>package com.example.auth.domain.costumer;\n\nimport com.example.auth.domain.user.User;\nimport com.example.auth.domain.user.UserRole;\n\nimport jakarta.persistence.Entity;\nimport jakarta.persistence.Table;\nimport lombok.AllArgsConstructor;\nimport lombok.Getter;\nimport lombok.NoArgsConstructor;\nimport lombok.Setter;\n\n@Entity(name = &quot;customers&quot;)\n@Table(name=&quot;customers&quot;)\n@AllArgsConstructor\n@Getter\n@Setter\n@NoArgsConstructor\npublic class Customer extends User{\n\n    private String name;\n    private String email;\n    private String phone;\n    private Integer relationshipTime;\n    private Integer age;\n    private CustomerContactRole contactorigin;\n    private CustomerAccountTypeRole accounttype;\n\n    public Customer(String login, String password, String name, String email, String phone,\n            Integer relationshipTime, Integer age, CustomerContactRole contactOrigin,\n            CustomerAccountTypeRole accountType) {\n        super(login, password, UserRole.CUSTOMER);\n        this.name = name;\n        this.email = email;\n        this.phone = phone;\n        this.relationshipTime = relationshipTime;\n        this.age = age;\n        this.contactorigin = contactOrigin;\n        this.accounttype = accountType;\n    }\n\n}\n</code></pre>\n<p><strong>Migration: V1__create-product-user-customer-table.sql</strong></p>\n<pre><code>CREATE TABLE product (\n    id TEXT PRIMARY KEY UNIQUE NOT NULL,\n    name TEXT NOT NULL,\n    price INTEGER NOT NULL\n);\nCREATE TABLE users (\n    id TEXT PRIMARY KEY UNIQUE NOT NULL,\n    login TEXT NOT NULL UNIQUE,\n    password TEXT NOT NULL,\n    role TEXT NOT NULL\n);\n\nCREATE TABLE customers (\n    name TEXT NOT NULL UNIQUE,\n    email TEXT NOT NULL,\n    phone TEXT NOT NULL,\n    relationshiptime INTEGER NOT NULL,\n    age INTEGER NOT NULL,\n    contactorigin TEXT NOT NULL,\n    accounttype TEXT NOT NULL\n) inherits (users);\n</code></pre>\n<p><strong>Endpoint that generates de error (when I try to register a new User)</strong></p>\n<pre><code>@PostMapping(&quot;/register&quot;)\n    public ResponseEntity&lt;String&gt; register(@RequestBody @Valid RegisterDTO data){\n        /*if(this.repository.findByLogin(data.login()) != null) {\n            String jooj=&quot;&quot;;\n            return ResponseEntity.status(HttpStatus.NOT_FOUND).body(&quot;Wrong acess.&quot;);\n        }*/\n        \n        String encryptedPassword = new BCryptPasswordEncoder().encode(data.password());\n        User newUser = new User(data.login(), encryptedPassword, data.role());\n\n        this.repository.save(newUser);\n\n        return ResponseEntity.status(HttpStatus.OK).body(&quot;Account created sucessfully&quot;);\n    }\n</code></pre>\n<p><strong>Error</strong></p>\n<pre><code>Servlet.service() for \nservlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: org.springframework.dao.InvalidDataAccessResourceUsageException: could not execute statement [ERROR: column &quot;dtype&quot; of relation &quot;users&quot; does not exist\n  PosiþÒo: 40] [insert into users (login,password,role,dtype,id) values (?,?,?,'users',?)]; SQL [insert into users (login,password,role,dtype,id) values (?,?,?,'users',?)]] with root cause\n\norg.postgresql.util.PSQLException: ERROR: column &quot;dtype&quot; of relation &quot;users&quot; does not exist\n  Posição: 40```\n</code></pre>\n"},{"tags":["java","sorting","hazelcast","predicates"],"answers":[{"tags":[],"owner":{"account_id":1116483,"reputation":515,"user_id":1105694,"accept_rate":83,"display_name":"h.i"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1430553715,"creation_date":1430553715,"answer_id":29999885,"question_id":29968146,"body_markdown":"i ran a few tests with pagingpredicate and it did exactly what i wanted.\r\n\r\npagesize should be selected carefully. small page size with big data can cause huge number of comparisons with lots of data travel between hazelcast nodes.\r\n\r\nat the end, all the items in the resulting collection are perfectly sorted, including the ones in any given page of course.\r\n\r\nhope someone will find it useful.","title":"Have hazelcast predicate return sorted collection","body":"<p>i ran a few tests with pagingpredicate and it did exactly what i wanted.</p>\n\n<p>pagesize should be selected carefully. small page size with big data can cause huge number of comparisons with lots of data travel between hazelcast nodes.</p>\n\n<p>at the end, all the items in the resulting collection are perfectly sorted, including the ones in any given page of course.</p>\n\n<p>hope someone will find it useful.</p>\n"},{"tags":[],"owner":{"account_id":6415158,"reputation":382,"user_id":4973598,"display_name":"Sunil K-Standard Chartered"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690312760,"creation_date":1690312760,"answer_id":76765894,"question_id":29968146,"body_markdown":"In the Hazelcast document for 4.2 API, it says,\r\n\r\nHazelcast provides paging for defined predicates. With its PagingPredicate interface, you can get a collection of keys, values, or entries page by page by filtering them with predicates and giving the size of the pages. Also, **you can sort the entries by specifying comparators.**\r\n\r\nRefer the page, \r\nhttps://docs.hazelcast.com/imdg/latest/query/how-distributed-query-works.html#filtering-with-paging-predicates\r\n\r\nBTW, I am currently working on developing a rest api on top of a IMap that stores hazelcast Json object which isnt the same as specified above in documentation. Shall revert on the hazelcast json object.","title":"Have hazelcast predicate return sorted collection","body":"<p>In the Hazelcast document for 4.2 API, it says,</p>\n<p>Hazelcast provides paging for defined predicates. With its PagingPredicate interface, you can get a collection of keys, values, or entries page by page by filtering them with predicates and giving the size of the pages. Also, <strong>you can sort the entries by specifying comparators.</strong></p>\n<p>Refer the page,\n<a href=\"https://docs.hazelcast.com/imdg/latest/query/how-distributed-query-works.html#filtering-with-paging-predicates\" rel=\"nofollow noreferrer\">https://docs.hazelcast.com/imdg/latest/query/how-distributed-query-works.html#filtering-with-paging-predicates</a></p>\n<p>BTW, I am currently working on developing a rest api on top of a IMap that stores hazelcast Json object which isnt the same as specified above in documentation. Shall revert on the hazelcast json object.</p>\n"}],"owner":{"account_id":1116483,"reputation":515,"user_id":1105694,"accept_rate":83,"display_name":"h.i"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1890,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":29999885,"answer_count":2,"score":1,"last_activity_date":1690312760,"creation_date":1430397966,"question_id":29968146,"body_markdown":"is there a way to get a sorted collection from a hazelcast predicate? i have found that hazelcast offers a pagingpredicate for this purpose but i am not interested in the paging behavior (at least for now).\r\n\r\neven if one does use this pagingpredicate, does it make sure that the whole collection is sorted and not just the items in a particular page? and also if there is any way to disable the paging completely?\r\n\r\ni am interested in getting the results in sorted form and not in sorting the distributed data structure.\r\n\r\nthank you","title":"Have hazelcast predicate return sorted collection","body":"<p>is there a way to get a sorted collection from a hazelcast predicate? i have found that hazelcast offers a pagingpredicate for this purpose but i am not interested in the paging behavior (at least for now).</p>\n\n<p>even if one does use this pagingpredicate, does it make sure that the whole collection is sorted and not just the items in a particular page? and also if there is any way to disable the paging completely?</p>\n\n<p>i am interested in getting the results in sorted form and not in sorting the distributed data structure.</p>\n\n<p>thank you</p>\n"},{"tags":["java","database","hibernate","jpa","spring-data-jpa"],"comments":[{"owner":{"account_id":3687151,"reputation":131,"user_id":3070677,"display_name":"G10"},"score":0,"creation_date":1690035541,"post_id":76743880,"comment_id":135298284,"body_markdown":"Why do you want it on order?","body":"Why do you want it on order?"},{"owner":{"account_id":136251,"reputation":87506,"user_id":339637,"accept_rate":55,"display_name":"Ken Chan"},"score":0,"creation_date":1690049035,"post_id":76743880,"comment_id":135300004,"body_markdown":"Why not if it can be displayed in some default order that a person prefer to see ?","body":"Why not if it can be displayed in some default order that a person prefer to see ?"}],"answers":[{"comments":[{"owner":{"account_id":4181375,"reputation":5121,"user_id":3426309,"display_name":"Andrey B. Panfilov"},"score":0,"creation_date":1690048761,"post_id":76744775,"comment_id":135299973,"body_markdown":"IMO, the expectation to find PK column at the first position is reasonable, regardless whether it makes sense in SQL or not.","body":"IMO, the expectation to find PK column at the first position is reasonable, regardless whether it makes sense in SQL or not."}],"tags":[],"owner":{"account_id":136251,"reputation":87506,"user_id":339637,"accept_rate":55,"display_name":"Ken Chan"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1690047911,"creation_date":1690042789,"answer_id":76744775,"question_id":76743880,"body_markdown":"Because you configure Hibernate to auto-generate and create the table schema by setting `spring.jpa.hibernate.ddl-auto` to `create-drop`. It has its own rule to determine the order of the columns in the generated create tables DDL which the has nothing to do with the order of fields in the related entity Java class.\r\n\r\nSince hibernate 6.2 , it provides a way to customize the column order in the generated DDL through `ColumnOrderingStrategy` but the behaviour you want still not support out of the box. \r\n\r\nIf you want to take back the total control about defining the column order in the tables , you have to manually create the table by yourself rather than rely on Hibernate to do it. You have to set `spring.jpa.hibernate.ddl-auto` to `none` to tell Hibernate not to do that.\r\n\r\n*Note: consider to use the DB schema management tool such as [`Flyway`][1] or [`Liquibase`][2] to manage all schema changes for any serious production application.*\r\n\r\n\r\n  [1]: https://flywaydb.org/\r\n  [2]: https://www.liquibase.org/","title":"How to change the DB table column order using Spring + Sping Data JPA + Hibernate","body":"<p>Because you configure Hibernate to auto-generate and create the table schema by setting <code>spring.jpa.hibernate.ddl-auto</code> to <code>create-drop</code>. It has its own rule to determine the order of the columns in the generated create tables DDL which the has nothing to do with the order of fields in the related entity Java class.</p>\n<p>Since hibernate 6.2 , it provides a way to customize the column order in the generated DDL through <code>ColumnOrderingStrategy</code> but the behaviour you want still not support out of the box.</p>\n<p>If you want to take back the total control about defining the column order in the tables , you have to manually create the table by yourself rather than rely on Hibernate to do it. You have to set <code>spring.jpa.hibernate.ddl-auto</code> to <code>none</code> to tell Hibernate not to do that.</p>\n<p><em>Note: consider to use the DB schema management tool such as <a href=\"https://flywaydb.org/\" rel=\"nofollow noreferrer\"><code>Flyway</code></a> or <a href=\"https://www.liquibase.org/\" rel=\"nofollow noreferrer\"><code>Liquibase</code></a> to manage all schema changes for any serious production application.</em></p>\n"}],"owner":{"account_id":26571773,"reputation":15,"user_id":20197889,"display_name":"Oleg Khandozhko"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":375,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76744775,"answer_count":1,"score":1,"last_activity_date":1690312354,"creation_date":1690030334,"question_id":76743880,"body_markdown":"actually i am trying to learn something using this tutorial - \r\nhttps://www.youtube.com/watch?v=9SGDpanrc8U&amp;t=2027s\r\n\r\nNow i connect my new DB with my Sping(Java) something.\r\nBut. I don&#39;t understand why in RUN output in IJ and SQL Shell shows wrong order of lines.\r\n**The first line in column should be ID.\r\nAfter should go - name,email, date,age.**\r\n\r\nIn reality it shows - age,date,id,email,name. How can i change it? Please, help.\r\n\r\n\r\nExample from SQL Shell - \r\n\r\n```\r\n Column |          Type          | Collation | Nullable | Default\r\n--------+------------------------+-----------+----------+---------\r\n age    | integer                |           |          |\r\n dob    | date                   |           |          |\r\n id     | bigint                 |           | not null |\r\n email  | character varying(255) |           |          |\r\n name   | character varying(255) |           |          |\r\nIndexes:\r\n    &quot;student_pkey&quot; PRIMARY KEY, btree (id)\r\n```\r\n\r\nMy Student class - \r\n\r\n```\r\n\r\n@Entity\r\n@Table\r\npublic class Student {\r\n\r\n    @Id\r\n    @SequenceGenerator(\r\n            name = &quot;student_sequence&quot;,\r\n            sequenceName = &quot;student_sequence&quot;,\r\n            allocationSize = 1\r\n    )\r\n    @GeneratedValue(\r\n            strategy = GenerationType.SEQUENCE,\r\n            generator = &quot;student_sequence&quot;\r\n    )\r\n    private Long id;\r\n    private String name;\r\n    private String email;\r\n    private LocalDate dob;\r\n    private Integer age;\r\n\r\n    public Student() {\r\n    }\r\n\r\n    public Student(Long id, String name, String email, LocalDate dob, Integer age) {\r\n        this.id = id;\r\n        this.name = name;\r\n        this.email = email;\r\n        this.dob = dob;\r\n        this.age = age;\r\n    }\r\n\r\n    public Student(String name, String email, LocalDate dob, Integer age) {\r\n        this.name = name;\r\n        this.email = email;\r\n        this.dob = dob;\r\n        this.age = age;\r\n    }\r\n\r\nGetters,Setters and to String\r\n\r\n```\r\n\r\nI try to change long to Long and nothing else. I don&#39;t know how to change order of lines here. It looks like everything is fine.","title":"How to change the DB table column order using Spring + Sping Data JPA + Hibernate","body":"<p>actually i am trying to learn something using this tutorial -\n<a href=\"https://www.youtube.com/watch?v=9SGDpanrc8U&amp;t=2027s\" rel=\"nofollow noreferrer\">https://www.youtube.com/watch?v=9SGDpanrc8U&amp;t=2027s</a></p>\n<p>Now i connect my new DB with my Sping(Java) something.\nBut. I don't understand why in RUN output in IJ and SQL Shell shows wrong order of lines.\n<strong>The first line in column should be ID.\nAfter should go - name,email, date,age.</strong></p>\n<p>In reality it shows - age,date,id,email,name. How can i change it? Please, help.</p>\n<p>Example from SQL Shell -</p>\n<pre><code> Column |          Type          | Collation | Nullable | Default\n--------+------------------------+-----------+----------+---------\n age    | integer                |           |          |\n dob    | date                   |           |          |\n id     | bigint                 |           | not null |\n email  | character varying(255) |           |          |\n name   | character varying(255) |           |          |\nIndexes:\n    &quot;student_pkey&quot; PRIMARY KEY, btree (id)\n</code></pre>\n<p>My Student class -</p>\n<pre><code>\n@Entity\n@Table\npublic class Student {\n\n    @Id\n    @SequenceGenerator(\n            name = &quot;student_sequence&quot;,\n            sequenceName = &quot;student_sequence&quot;,\n            allocationSize = 1\n    )\n    @GeneratedValue(\n            strategy = GenerationType.SEQUENCE,\n            generator = &quot;student_sequence&quot;\n    )\n    private Long id;\n    private String name;\n    private String email;\n    private LocalDate dob;\n    private Integer age;\n\n    public Student() {\n    }\n\n    public Student(Long id, String name, String email, LocalDate dob, Integer age) {\n        this.id = id;\n        this.name = name;\n        this.email = email;\n        this.dob = dob;\n        this.age = age;\n    }\n\n    public Student(String name, String email, LocalDate dob, Integer age) {\n        this.name = name;\n        this.email = email;\n        this.dob = dob;\n        this.age = age;\n    }\n\nGetters,Setters and to String\n\n</code></pre>\n<p>I try to change long to Long and nothing else. I don't know how to change order of lines here. It looks like everything is fine.</p>\n"},{"tags":["java","spring-boot","hibernate","jpa","spring-data-jpa"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":1,"creation_date":1690098916,"post_id":76747138,"comment_id":135303606,"body_markdown":"What&#39;s your import statement for `Type`?","body":"What&#39;s your import statement for <code>Type</code>?"},{"owner":{"account_id":23070583,"reputation":83,"user_id":17184390,"display_name":"Sakib X Hossain"},"score":0,"creation_date":1690100001,"post_id":76747138,"comment_id":135303708,"body_markdown":"import org.hibernate.annotations.Type;","body":"import org.hibernate.annotations.Type;"}],"answers":[{"comments":[{"owner":{"account_id":23070583,"reputation":83,"user_id":17184390,"display_name":"Sakib X Hossain"},"score":0,"creation_date":1690102977,"post_id":76747285,"comment_id":135303986,"body_markdown":"Well. I&#39;m not separately using Hibernate. The dependency I&#39;m using is **spring data jpa**. I don&#39;t know which version of hibernate is included on data JPA.\n\n`&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;`","body":"Well. I&#39;m not separately using Hibernate. The dependency I&#39;m using is <b>spring data jpa</b>. I don&#39;t know which version of hibernate is included on data JPA.  <code>&lt;groupId&gt;org.springframework.boot&lt;&#47;groupId&gt; &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;&#47;artifactId&gt;</code>"},{"owner":{"account_id":136251,"reputation":87506,"user_id":339637,"accept_rate":55,"display_name":"Ken Chan"},"score":0,"creation_date":1690103490,"post_id":76747285,"comment_id":135304035,"body_markdown":"spring-data-jpa will include hibernate automatically. what version of spring-boot ? on the other hands , most IDE provides easy way to check which version of hibnerate you are using","body":"spring-data-jpa will include hibernate automatically. what version of spring-boot ? on the other hands , most IDE provides easy way to check which version of hibnerate you are using"},{"owner":{"account_id":23070583,"reputation":83,"user_id":17184390,"display_name":"Sakib X Hossain"},"score":0,"creation_date":1690104681,"post_id":76747285,"comment_id":135304152,"body_markdown":"Spring boot version: 3.1.2 I&#39;m using","body":"Spring boot version: 3.1.2 I&#39;m using"},{"owner":{"account_id":136251,"reputation":87506,"user_id":339637,"accept_rate":55,"display_name":"Ken Chan"},"score":0,"creation_date":1690105152,"post_id":76747285,"comment_id":135304217,"body_markdown":"ok then you are using hibernate 6. so follow my suggestion to fix it.and if you think my post is helpful to you, please consider to upvote it or accept the answer as i spend lot of my time to help you for free. thanks","body":"ok then you are using hibernate 6. so follow my suggestion to fix it.and if you think my post is helpful to you, please consider to upvote it or accept the answer as i spend lot of my time to help you for free. thanks"},{"owner":{"account_id":23070583,"reputation":83,"user_id":17184390,"display_name":"Sakib X Hossain"},"score":0,"creation_date":1690105630,"post_id":76747285,"comment_id":135304269,"body_markdown":"Hibernate 5.3.7.final is used. I&#39;m not using Hibernate 6","body":"Hibernate 5.3.7.final is used. I&#39;m not using Hibernate 6"},{"owner":{"account_id":23070583,"reputation":83,"user_id":17184390,"display_name":"Sakib X Hossain"},"score":0,"creation_date":1690107939,"post_id":76747285,"comment_id":135304515,"body_markdown":"Thank you for your time. But I&#39;m not using Hibernate 6. I haven&#39;t find that useful. Because Type interface don&#39;t have any method called **converter**","body":"Thank you for your time. But I&#39;m not using Hibernate 6. I haven&#39;t find that useful. Because Type interface don&#39;t have any method called <b>converter</b>"},{"owner":{"account_id":136251,"reputation":87506,"user_id":339637,"accept_rate":55,"display_name":"Ken Chan"},"score":0,"creation_date":1690107980,"post_id":76747285,"comment_id":135304519,"body_markdown":"no ideas how to configure your project. please show `pom.xml`. Also , spring boot 3.1 is supposed to work with hibernate 6 . Not a good idea to me if forcing it to work with hibernate 5 . One of the major reason is hibernate 5 is still using old `javax.persistence` while spring boot 3 already upgrade it to the new ` `jakarta.persistence`. And mixing `javax.persistence`  and `jakarta.persistence` in one project is really not a good idea ....","body":"no ideas how to configure your project. please show <code>pom.xml</code>. Also , spring boot 3.1 is supposed to work with hibernate 6 . Not a good idea to me if forcing it to work with hibernate 5 . One of the major reason is hibernate 5 is still using old <code>javax.persistence</code> while spring boot 3 already upgrade it to the new ` <code>jakarta.persistence</code>. And mixing <code>javax.persistence</code>  and <code>jakarta.persistence</code> in one project is really not a good idea ...."},{"owner":{"account_id":23070583,"reputation":83,"user_id":17184390,"display_name":"Sakib X Hossain"},"score":0,"creation_date":1690108063,"post_id":76747285,"comment_id":135304530,"body_markdown":"Here the code: https://github.com/XSakibxHossainX/Data_in_Mulitier_Architecture","body":"Here the code: <a href=\"https://github.com/XSakibxHossainX/Data_in_Mulitier_Architecture\" rel=\"nofollow noreferrer\">github.com/XSakibxHossainX/Data_in_Mulitier_Architecture</a>"},{"owner":{"account_id":136251,"reputation":87506,"user_id":339637,"accept_rate":55,"display_name":"Ken Chan"},"score":0,"creation_date":1690108285,"post_id":76747285,"comment_id":135304550,"body_markdown":"OK. Then you are using hibernate 6 . No idea why you say you are hibernate 5.3.7...  What cause you think it is using hibernate 5.3.7 ? Also no idea what do you mean about `Type` interface does not have a method call converter . I am saying  to change it from `@Type` to `@Convert`.","body":"OK. Then you are using hibernate 6 . No idea why you say you are hibernate 5.3.7...  What cause you think it is using hibernate 5.3.7 ? Also no idea what do you mean about <code>Type</code> interface does not have a method call converter . I am saying  to change it from <code>@Type</code> to <code>@Convert</code>."},{"owner":{"account_id":136251,"reputation":87506,"user_id":339637,"accept_rate":55,"display_name":"Ken Chan"},"score":0,"creation_date":1690108402,"post_id":76747285,"comment_id":135304569,"body_markdown":"Again , if you finally find my post or comments are helpful to you , please consider to upvote or accept my answer as i spend lot of my time to help you for free. Thanks.","body":"Again , if you finally find my post or comments are helpful to you , please consider to upvote or accept my answer as i spend lot of my time to help you for free. Thanks."},{"owner":{"account_id":23070583,"reputation":83,"user_id":17184390,"display_name":"Sakib X Hossain"},"score":0,"creation_date":1690110793,"post_id":76747285,"comment_id":135304806,"body_markdown":"Sorry, I found that - Spring Boot 3.0.0 depends on hibernate-core 6.1.5.Final.\n\nSource -&gt; https://spring.io/blog/2023/05/18/spring-boot-3-1-0-available-now\n\nThe reason I made the mistake Hibernate 5.3.7.final I said because I over-trusted AI. Apologize.","body":"Sorry, I found that - Spring Boot 3.0.0 depends on hibernate-core 6.1.5.Final.  Source -&gt; <a href=\"https://spring.io/blog/2023/05/18/spring-boot-3-1-0-available-now\" rel=\"nofollow noreferrer\">spring.io/blog/2023/05/18/spring-boot-3-1-0-available-now</a>  The reason I made the mistake Hibernate 5.3.7.final I said because I over-trusted AI. Apologize."},{"owner":{"account_id":23070583,"reputation":83,"user_id":17184390,"display_name":"Sakib X Hossain"},"score":0,"creation_date":1690111477,"post_id":76747285,"comment_id":135304876,"body_markdown":"This is what I mean by interface \n\n`@Target({ElementType.METHOD, ElementType.FIELD, ElementType.ANNOTATION_TYPE})\n@Retention(RetentionPolicy.RUNTIME)\npublic @interface Type {\n    Class&lt;? extends UserType&lt;?&gt;&gt; value();\n\n    Parameter[] parameters() default {};\n}`","body":"This is what I mean by interface   <code>@Target({ElementType.METHOD, ElementType.FIELD, ElementType.ANNOTATION_TYPE}) @Retention(RetentionPolicy.RUNTIME) public @interface Type {     Class&lt;? extends UserType&lt;?&gt;&gt; value();      Parameter[] parameters() default {}; }</code>"},{"owner":{"account_id":136251,"reputation":87506,"user_id":339637,"accept_rate":55,"display_name":"Ken Chan"},"score":0,"creation_date":1690125051,"post_id":76747285,"comment_id":135306513,"body_markdown":"good to know. that is called annotation but not interface. It have the symbol `@` before the `interface`","body":"good to know. that is called annotation but not interface. It have the symbol <code>@</code> before the <code>interface</code>"}],"tags":[],"owner":{"account_id":136251,"reputation":87506,"user_id":339637,"accept_rate":55,"display_name":"Ken Chan"},"comment_count":13,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1690102131,"creation_date":1690100834,"answer_id":76747285,"question_id":76747138,"body_markdown":"Guess that you are using Hibernate 6 ?\r\n\r\nIf yes, the source codes you show is for Hibernate 5 or before. Hibernate 6 has the breaking change in the type system , there are no more `type` attribute in the `@Type` , you have to migrate it to use the related JPA standard `AttributeConverter` (i.e `YesNoConverter`) according to the [migration guide][1] : \r\n\r\n&gt; Hibernate now provides standard AttributeConverter implementations for\r\n&gt; handling different database representations as boolean values in the\r\n&gt; domain model\r\n\r\nChange to the following should solve your problem : \r\n\r\n``` java\r\n @Convert(converter=YesNoConverter.class)\r\n private Boolean completed;\r\n```\r\n\r\n\r\n\r\n  [1]: https://docs.jboss.org/hibernate/orm/6.0/migration-guide/migration-guide.html#_boolean_converters","title":"JPA @Type annotation &quot;Cannot resolve method &#39;type&#39; &quot;","body":"<p>Guess that you are using Hibernate 6 ?</p>\n<p>If yes, the source codes you show is for Hibernate 5 or before. Hibernate 6 has the breaking change in the type system , there are no more <code>type</code> attribute in the <code>@Type</code> , you have to migrate it to use the related JPA standard <code>AttributeConverter</code> (i.e <code>YesNoConverter</code>) according to the <a href=\"https://docs.jboss.org/hibernate/orm/6.0/migration-guide/migration-guide.html#_boolean_converters\" rel=\"nofollow noreferrer\">migration guide</a> :</p>\n<blockquote>\n<p>Hibernate now provides standard AttributeConverter implementations for\nhandling different database representations as boolean values in the\ndomain model</p>\n</blockquote>\n<p>Change to the following should solve your problem :</p>\n<pre class=\"lang-java prettyprint-override\"><code> @Convert(converter=YesNoConverter.class)\n private Boolean completed;\n</code></pre>\n"}],"owner":{"account_id":23070583,"reputation":83,"user_id":17184390,"display_name":"Sakib X Hossain"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":453,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76747285,"answer_count":1,"score":0,"last_activity_date":1690312334,"creation_date":1690098355,"question_id":76747138,"body_markdown":"I was working on a project and found that on the @Type interface, there is no method called type. Is there any way to resolve the error? \r\n\r\n\r\n[![Cannot resolve method &#39;type&#39;][1]][1]\r\n\r\n    @Entity\r\n    @Table(name = &quot;Delivery_Table&quot;)\r\n    public class Delivery {\r\n        @Id\r\n        @GeneratedValue\r\n        @Column(name = &quot;Delivery_Id&quot;)\r\n        private Long id;\r\n    \r\n        @Nationalized\r\n        private String name;\r\n        @Column(name = &quot;address_full&quot;,length = 500)\r\n        private String address;\r\n        private LocalTime Delivery_time;\r\n        //Problem occurs here\r\n        //Configuration on pom.xml used JPA where Hibernate is already there\r\n        @Type(type = &quot;yes_no&quot;)\r\n        private Boolean completed;\r\n    \r\n    }\r\n\r\n  [1]: https://i.stack.imgur.com/8JAbF.png","title":"JPA @Type annotation &quot;Cannot resolve method &#39;type&#39; &quot;","body":"<p>I was working on a project and found that on the @Type interface, there is no method called type. Is there any way to resolve the error?</p>\n<p><a href=\"https://i.stack.imgur.com/8JAbF.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8JAbF.png\" alt=\"Cannot resolve method 'type'\" /></a></p>\n<pre><code>@Entity\n@Table(name = &quot;Delivery_Table&quot;)\npublic class Delivery {\n    @Id\n    @GeneratedValue\n    @Column(name = &quot;Delivery_Id&quot;)\n    private Long id;\n\n    @Nationalized\n    private String name;\n    @Column(name = &quot;address_full&quot;,length = 500)\n    private String address;\n    private LocalTime Delivery_time;\n    //Problem occurs here\n    //Configuration on pom.xml used JPA where Hibernate is already there\n    @Type(type = &quot;yes_no&quot;)\n    private Boolean completed;\n\n}\n</code></pre>\n"},{"tags":["java","design-patterns","decimalformat"],"answers":[{"comments":[{"owner":{"account_id":5324511,"reputation":89,"user_id":8441793,"display_name":"Sy Pham"},"score":0,"creation_date":1690314391,"post_id":76765824,"comment_id":135335510,"body_markdown":"Thanks for the g) explanation using the parsing grammar of pattern, I missed that in the javadocs. \nFor the behavior in f), it seems a little bit of digging deep down in the source code of JDK could explain it. So if I understand correctly, in d) and e), because in the pattern &#39;0&#39; appear immediately after dp then Java knows that the fraction part can always be printed (0 if not provided) and so the leading &#39;#&#39; can be intepreted as &#39;drop the 0&#39;. :)","body":"Thanks for the g) explanation using the parsing grammar of pattern, I missed that in the javadocs.  For the behavior in f), it seems a little bit of digging deep down in the source code of JDK could explain it. So if I understand correctly, in d) and e), because in the pattern &#39;0&#39; appear immediately after dp then Java knows that the fraction part can always be printed (0 if not provided) and so the leading &#39;#&#39; can be intepreted as &#39;drop the 0&#39;. :)"}],"tags":[],"owner":{"account_id":1888343,"reputation":176617,"user_id":1707091,"display_name":"rgettman"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1690312119,"creation_date":1690312119,"answer_id":76765824,"question_id":76765528,"body_markdown":"In case &quot;f&quot;, the zero shows up because Java prints a `0` if it&#39;s not guaranteed that there is a fraction part to print.  The below code is taken from [JDK 17 source code for `DecimalFormat`][1].  Because you have all `#` after the decimal point, `minFraDigits` is `0` so it can&#39;t assume that a fraction is present.  It apparently doesn&#39;t see that there is a fraction part to print yet.  It guards against printing nothing if the value is zero.\r\n\r\n```\r\n\r\n// Determine whether or not there are any printable fractional\r\n// digits.  If we&#39;ve used up the digits we know there aren&#39;t.\r\nboolean fractionPresent = (minFraDigits &gt; 0) ||\r\n        (!isInteger &amp;&amp; digitIndex &lt; digitList.count);\r\n\r\n// If there is no fraction present, and we haven&#39;t printed any\r\n// integer digits, then print a zero.  Otherwise we won&#39;t print\r\n// _any_ digits, and we won&#39;t be able to parse this string.\r\nif (!fractionPresent &amp;&amp; result.length() == sizeBeforeIntegerPart) {\r\n    result.append(zero);\r\n}\r\n```\r\n\r\nThe case &quot;g&quot; format is an invalid format.  You can&#39;t have a `0`\r\nfurther from the decimal point than a `#`.  It&#39;s enforced in the\r\nparsing grammar in the [`DecimalFormat` javadocs][2].  For the\r\nFraction part, the zeros must come first if they exist, followed by\r\noptional `#`s.\r\n\r\n&gt; _Fraction_:&lt;br&gt; &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;_MinimumFraction_&lt;sub&gt;_opt_&lt;/sub&gt;\r\n&gt; _OptionalFraction_&lt;sub&gt;_opt_&lt;/sub&gt;\r\n&gt; \r\n&gt; _MinimumFraction_:&lt;br&gt; &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;0\r\n&gt; _MinimumFraction_&lt;sub&gt;_opt_&lt;/sub&gt;\r\n&gt; \r\n&gt; OptionalFraction:&lt;br&gt;\r\n&gt; &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;#\r\n&gt; _OptionalFraction_&lt;sub&gt;_opt_&lt;/sub&gt;\r\n\r\nAnother part of the grammar similar to this enforces that _before_ the decimal point, any `#`s must be before any `0`s, the reverse of after the decimal point.\r\n\r\n\r\n[1]: https://github.com/openjdk/jdk17/blob/master/src/java.base/share/classes/java/text/DecimalFormat.java\r\n[2]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/text/DecimalFormat.html\r\n","title":"Java DecimalFormat pattern, differences between # and 0","body":"<p>In case &quot;f&quot;, the zero shows up because Java prints a <code>0</code> if it's not guaranteed that there is a fraction part to print.  The below code is taken from <a href=\"https://github.com/openjdk/jdk17/blob/master/src/java.base/share/classes/java/text/DecimalFormat.java\" rel=\"nofollow noreferrer\">JDK 17 source code for <code>DecimalFormat</code></a>.  Because you have all <code>#</code> after the decimal point, <code>minFraDigits</code> is <code>0</code> so it can't assume that a fraction is present.  It apparently doesn't see that there is a fraction part to print yet.  It guards against printing nothing if the value is zero.</p>\n<pre><code>\n// Determine whether or not there are any printable fractional\n// digits.  If we've used up the digits we know there aren't.\nboolean fractionPresent = (minFraDigits &gt; 0) ||\n        (!isInteger &amp;&amp; digitIndex &lt; digitList.count);\n\n// If there is no fraction present, and we haven't printed any\n// integer digits, then print a zero.  Otherwise we won't print\n// _any_ digits, and we won't be able to parse this string.\nif (!fractionPresent &amp;&amp; result.length() == sizeBeforeIntegerPart) {\n    result.append(zero);\n}\n</code></pre>\n<p>The case &quot;g&quot; format is an invalid format.  You can't have a <code>0</code>\nfurther from the decimal point than a <code>#</code>.  It's enforced in the\nparsing grammar in the <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/text/DecimalFormat.html\" rel=\"nofollow noreferrer\"><code>DecimalFormat</code> javadocs</a>.  For the\nFraction part, the zeros must come first if they exist, followed by\noptional <code>#</code>s.</p>\n<blockquote>\n<p><em>Fraction</em>:<br>         <em>MinimumFraction</em><sub><em>opt</em></sub>\n<em>OptionalFraction</em><sub><em>opt</em></sub></p>\n<p><em>MinimumFraction</em>:<br>         0\n<em>MinimumFraction</em><sub><em>opt</em></sub></p>\n<p>OptionalFraction:<br>\n        #\n<em>OptionalFraction</em><sub><em>opt</em></sub></p>\n</blockquote>\n<p>Another part of the grammar similar to this enforces that <em>before</em> the decimal point, any <code>#</code>s must be before any <code>0</code>s, the reverse of after the decimal point.</p>\n"}],"owner":{"account_id":5324511,"reputation":89,"user_id":8441793,"display_name":"Sy Pham"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":45,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76765824,"answer_count":1,"score":1,"last_activity_date":1690312119,"creation_date":1690309182,"question_id":76765528,"body_markdown":"I have the following code:\r\n\r\n    public class Main {\r\n        public static void main(String[] args) {\r\n            String pattern = &quot;.00&quot;;         // a) =&gt; |.46|\r\n    //        String pattern = &quot;.##&quot;;       // b) =&gt; |.46|\r\n    //        String pattern = &quot;.0#&quot;;       // c) =&gt; |.46|\r\n    //        String pattern = &quot;#.00&quot;;      // d) =&gt; |.46|\r\n    //        String pattern = &quot;#.0#&quot;;      // e) =&gt; |.46|\r\n    //        String pattern = &quot;#.##&quot;;      // f) =&gt; |0.46|\r\n    //        String pattern = &quot;.#0&quot;;       // g) =&gt; IllegalArgumentException: Malformed pattern &quot;.#0&quot;\r\n\r\n        double value = 0.456;\r\n        DecimalFormat df = (DecimalFormat) NumberFormat.getNumberInstance(Locale.US);\r\n        df.applyPattern(pattern);\r\n        String output = df.format(value);\r\n        System.out.printf(&quot;|%s|&quot;, output);\r\n       }  \r\n    }\r\n\r\nCould someone explain that why in f) the zero before decimal point still displays while d) and e) don&#39;t even though they are all have a &#39;#&#39; before decimal point in the pattern? Also, what could be the reason for the exception in g) as it seems to me a valid pattern?","title":"Java DecimalFormat pattern, differences between # and 0","body":"<p>I have the following code:</p>\n<pre><code>public class Main {\n    public static void main(String[] args) {\n        String pattern = &quot;.00&quot;;         // a) =&gt; |.46|\n//        String pattern = &quot;.##&quot;;       // b) =&gt; |.46|\n//        String pattern = &quot;.0#&quot;;       // c) =&gt; |.46|\n//        String pattern = &quot;#.00&quot;;      // d) =&gt; |.46|\n//        String pattern = &quot;#.0#&quot;;      // e) =&gt; |.46|\n//        String pattern = &quot;#.##&quot;;      // f) =&gt; |0.46|\n//        String pattern = &quot;.#0&quot;;       // g) =&gt; IllegalArgumentException: Malformed pattern &quot;.#0&quot;\n\n    double value = 0.456;\n    DecimalFormat df = (DecimalFormat) NumberFormat.getNumberInstance(Locale.US);\n    df.applyPattern(pattern);\n    String output = df.format(value);\n    System.out.printf(&quot;|%s|&quot;, output);\n   }  \n}\n</code></pre>\n<p>Could someone explain that why in f) the zero before decimal point still displays while d) and e) don't even though they are all have a '#' before decimal point in the pattern? Also, what could be the reason for the exception in g) as it seems to me a valid pattern?</p>\n"},{"tags":["java","date","localtime"],"comments":[{"owner":{"account_id":1755242,"reputation":867,"user_id":1970214,"display_name":"Rafael R. S. Robles"},"score":0,"creation_date":1430246909,"post_id":29927362,"comment_id":47976827,"body_markdown":"First is first, what version of Java are we talking about?","body":"First is first, what version of Java are we talking about?"},{"owner":{"account_id":4000003,"reputation":4365,"user_id":3296266,"accept_rate":92,"display_name":"Stanko"},"score":0,"creation_date":1430247013,"post_id":29927362,"comment_id":47976885,"body_markdown":"@RafaelR.S.Robles JDK 1.8","body":"@RafaelR.S.Robles JDK 1.8"}],"answers":[{"comments":[{"owner":{"account_id":5080491,"reputation":15131,"user_id":4076764,"accept_rate":74,"display_name":"Adam Hughes"},"score":0,"creation_date":1669762558,"post_id":29927527,"comment_id":131715887,"body_markdown":"Accepted answer is correct but I had to still muck with it to get what I want.  To get LocalDateTime formatted to whatever you want: \n\n```LocalDateTime.now().format(DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd HH:mm:ss.S&quot;))```","body":"Accepted answer is correct but I had to still muck with it to get what I want.  To get LocalDateTime formatted to whatever you want:   <code>LocalDateTime.now().format(DateTimeFormatter.ofPattern(&quot;yyyy&zwnj;&#8203;-MM-dd HH:mm:ss.S&quot;))</code>"}],"tags":[],"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"comment_count":1,"down_vote_count":2,"up_vote_count":14,"is_accepted":true,"score":12,"last_activity_date":1430246964,"creation_date":1430246964,"answer_id":29927527,"question_id":29927362,"body_markdown":"Your input is effectively a `LocalDateTime`. It would be much simpler to simply parse that to a `LocalDateTime` and then get the `LocalTime` from that. No time zones to worry about, no somewhat-legacy classes (avoid `Date` and `Calendar` where possible...)\r\n\r\n    import java.time.*;\r\n    import java.time.format.*;\r\n    import java.util.*;\r\n    \r\n    public class Test {\r\n        \r\n        public static void main(String[] args) {\r\n            DateTimeFormatter formatter =\r\n                DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd HH:mm:ss.S&quot;, Locale.US);\r\n            \r\n            String text = &quot;2011-02-18 05:00:00.0&quot;;\r\n            LocalDateTime localDateTime = LocalDateTime.parse(text, formatter);\r\n            LocalTime localTime = localDateTime.toLocalTime();\r\n            System.out.println(localTime);\r\n        }\r\n    }","title":"LocalTime from Date","body":"<p>Your input is effectively a <code>LocalDateTime</code>. It would be much simpler to simply parse that to a <code>LocalDateTime</code> and then get the <code>LocalTime</code> from that. No time zones to worry about, no somewhat-legacy classes (avoid <code>Date</code> and <code>Calendar</code> where possible...)</p>\n\n<pre><code>import java.time.*;\nimport java.time.format.*;\nimport java.util.*;\n\npublic class Test {\n\n    public static void main(String[] args) {\n        DateTimeFormatter formatter =\n            DateTimeFormatter.ofPattern(\"yyyy-MM-dd HH:mm:ss.S\", Locale.US);\n\n        String text = \"2011-02-18 05:00:00.0\";\n        LocalDateTime localDateTime = LocalDateTime.parse(text, formatter);\n        LocalTime localTime = localDateTime.toLocalTime();\n        System.out.println(localTime);\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1475706946,"post_id":29927556,"comment_id":67056312,"body_markdown":"Silly to mix the troublesome old classes with the java.time classes. The old classes are now supplanted by java.time classes. No need for old ones.","body":"Silly to mix the troublesome old classes with the java.time classes. The old classes are now supplanted by java.time classes. No need for old ones."},{"owner":{"account_id":3130920,"reputation":660,"user_id":2648723,"display_name":"fleed"},"score":2,"creation_date":1574539541,"post_id":29927556,"comment_id":104271193,"body_markdown":"If you have to use the old classes with the new then what do you do? Refactor whatever codebase you have to suit the new classes? That makes no sense. Sometimes there&#39;s a need to keep using the old style together with the new, and this applies to any development work, not just Java.","body":"If you have to use the old classes with the new then what do you do? Refactor whatever codebase you have to suit the new classes? That makes no sense. Sometimes there&#39;s a need to keep using the old style together with the new, and this applies to any development work, not just Java."}],"tags":[],"owner":{"display_name":"user4624062"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1430247047,"creation_date":1430247047,"answer_id":29927556,"question_id":29927362,"body_markdown":"Try this&lt;br/&gt;\r\n\r\n        String datestring = &quot;2011-02-18 05:00:00.0&quot;;\r\n        SimpleDateFormat dt = new SimpleDateFormat(&quot;yyyy-MM-dd hh:mm:ss&quot;);//take a look at MM\r\n        Date date = dt.parse(datestring );\r\n        Instant instant = Instant.ofEpochMilli(date.getTime());\r\n        LocalTime res = LocalDateTime.ofInstant(instant, ZoneId.systemDefault()).toLocalTime();","title":"LocalTime from Date","body":"<p>Try this<br/></p>\n\n<pre><code>    String datestring = \"2011-02-18 05:00:00.0\";\n    SimpleDateFormat dt = new SimpleDateFormat(\"yyyy-MM-dd hh:mm:ss\");//take a look at MM\n    Date date = dt.parse(datestring );\n    Instant instant = Instant.ofEpochMilli(date.getTime());\n    LocalTime res = LocalDateTime.ofInstant(instant, ZoneId.systemDefault()).toLocalTime();\n</code></pre>\n"},{"comments":[{"owner":{"account_id":84493,"reputation":1255,"user_id":236152,"display_name":"Anthony"},"score":0,"creation_date":1595001451,"post_id":39869935,"comment_id":111333632,"body_markdown":"can be simplified with LocalTime.ofInstant()","body":"can be simplified with LocalTime.ofInstant()"},{"owner":{"account_id":7471816,"reputation":3218,"user_id":5679560,"accept_rate":36,"display_name":"Rafael Lima"},"score":0,"creation_date":1689645504,"post_id":39869935,"comment_id":135239707,"body_markdown":"very bad anwser, create a localdatetime then convert to localtime? why not just create a localtime","body":"very bad anwser, create a localdatetime then convert to localtime? why not just create a localtime"},{"owner":{"account_id":2179728,"reputation":73077,"user_id":10819573,"display_name":"Arvind Kumar Avinash"},"score":0,"creation_date":1689691092,"post_id":39869935,"comment_id":135247722,"body_markdown":"@RafaelLima - [Here](https://stackoverflow.com/a/76713736/10819573) is a demo of exactly what you have mentioned.","body":"@RafaelLima - <a href=\"https://stackoverflow.com/a/76713736/10819573\">Here</a> is a demo of exactly what you have mentioned."}],"tags":[],"owner":{"account_id":3140002,"reputation":892,"user_id":2655624,"display_name":"johanwannheden"},"comment_count":3,"down_vote_count":1,"up_vote_count":23,"is_accepted":false,"score":22,"last_activity_date":1589787256,"creation_date":1475658891,"answer_id":39869935,"question_id":29927362,"body_markdown":"This is also quite simple:\r\n\r\n    LocalTime time = LocalDateTime.ofInstant(new Date().toInstant(),\r\n        ZoneId.systemDefault()).toLocalTime();\r\n\r\n","title":"LocalTime from Date","body":"<p>This is also quite simple:</p>\n\n<pre><code>LocalTime time = LocalDateTime.ofInstant(new Date().toInstant(),\n    ZoneId.systemDefault()).toLocalTime();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"comment_count":0,"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1475709334,"creation_date":1475707643,"answer_id":39884840,"question_id":29927362,"body_markdown":"The [accepted Answer by Jon Skeet][1] is correct. This Answer expands on those ideas.\r\n\r\n# Avoid legacy date-time classes\r\n\r\nSome of the other Answers, and the Question, mix the old legacy date-time classes with the new. That is unnecessary and bad practice. The whole point of the [java.time][2] classes is to *replace* the troublesome and confusing old classes.\r\n\r\n - You do *not* need `java.util.Date`. \r\n - You do *not* need `java.util.Calendar`.\r\n\r\n# `LocalDateTime`\r\n\r\nYour input string lacks any information about offset-from-UTC or time zone. So we parse it as a [`LocalDateTime`][3] object.\r\n\r\nTo parse, we replace the SPACE in the middle with a `T` to comply with the [ISO 8601][4] standard for date-time formats.\r\n\r\n    String input = &quot;2011-02-18 05:00:00.0&quot;.replace( &quot; &quot; , &quot;T&quot; );\r\n    LocalDateTime ldt = LocalDateTime.parse( input );\r\n\r\n# `LocalTime`\r\n\r\nTo focus on the time-of-day without the date, ask for a [`LocalTime`][5].\r\n\r\n    LocalTime lt = ldt.toLocalTime();\r\n\r\n# `ZonedDateTime`\r\n\r\nNote that none of this are actual moments, not a point on the timeline. Without the context of an offset-from-UTC or a time zone, we do not know if you meant 5 AM in Auckland NZ or 5 AM in Kolkata IN or 5 AM in Paris France or 5 AM in Montr&#233;al Qu&#233;bec. Each of those would be very different moments in time.\r\n\r\nIf by context you do know for certain the intended time zone, apply it. Apply a [`ZoneId`][6] to get a [`ZonedDateTime`][7].\r\n\r\n    ZoneId z = ZoneId.of( &quot;America/Montreal&quot; );\r\n    ZonedDateTime zdt = ldt.atZone( z );\r\n\r\nFrom there, ask for the `LocalTime` if desired.\r\n\r\n    LocalTime lt = zdt.toLocalTime(); \r\n\r\n# `Instant`\r\n\r\nIf you want to see that same moment in [UTC][8], extract an `Instant`. The [`Instant`](http://docs.oracle.com/javase/8/docs/api/java/time/Instant.html) class represents a moment on the timeline in [UTC](https://en.wikipedia.org/wiki/Coordinated_Universal_Time) with a resolution of [nanoseconds](https://en.wikipedia.org/wiki/Nanosecond) (up to nine (9) digits of a decimal fraction).\r\n\r\nGenerally best to focus on [UTC][8] in much of your business logic, logging, data storage, and data exchange. Learn to think of UTC as “The One True Time”.\r\n\r\n    Instant instant = zdt.toInstant();  // Same moment, shifted to UTC.\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/29927527/642706\r\n  [2]: https://docs.oracle.com/javase/8/docs/api/java/time/package-summary.html\r\n  [3]: https://docs.oracle.com/javase/8/docs/api/java/time/LocalDateTime.html\r\n  [4]: https://en.wikipedia.org/wiki/ISO_8601\r\n  [5]: https://docs.oracle.com/javase/8/docs/api/java/time/LocalTime.html\r\n  [6]: https://docs.oracle.com/javase/8/docs/api/java/time/ZoneId.html\r\n  [7]: http://docs.oracle.com/javase/8/docs/api/java/time/ZonedDateTime.html\r\n  [8]: https://en.wikipedia.org/wiki/Coordinated_Universal_Time","title":"LocalTime from Date","body":"<p>The <a href=\"https://stackoverflow.com/a/29927527/642706\">accepted Answer by Jon Skeet</a> is correct. This Answer expands on those ideas.</p>\n\n<h1>Avoid legacy date-time classes</h1>\n\n<p>Some of the other Answers, and the Question, mix the old legacy date-time classes with the new. That is unnecessary and bad practice. The whole point of the <a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/package-summary.html\" rel=\"nofollow noreferrer\">java.time</a> classes is to <em>replace</em> the troublesome and confusing old classes.</p>\n\n<ul>\n<li>You do <em>not</em> need <code>java.util.Date</code>. </li>\n<li>You do <em>not</em> need <code>java.util.Calendar</code>.</li>\n</ul>\n\n<h1><code>LocalDateTime</code></h1>\n\n<p>Your input string lacks any information about offset-from-UTC or time zone. So we parse it as a <a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/LocalDateTime.html\" rel=\"nofollow noreferrer\"><code>LocalDateTime</code></a> object.</p>\n\n<p>To parse, we replace the SPACE in the middle with a <code>T</code> to comply with the <a href=\"https://en.wikipedia.org/wiki/ISO_8601\" rel=\"nofollow noreferrer\">ISO 8601</a> standard for date-time formats.</p>\n\n<pre><code>String input = \"2011-02-18 05:00:00.0\".replace( \" \" , \"T\" );\nLocalDateTime ldt = LocalDateTime.parse( input );\n</code></pre>\n\n<h1><code>LocalTime</code></h1>\n\n<p>To focus on the time-of-day without the date, ask for a <a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/LocalTime.html\" rel=\"nofollow noreferrer\"><code>LocalTime</code></a>.</p>\n\n<pre><code>LocalTime lt = ldt.toLocalTime();\n</code></pre>\n\n<h1><code>ZonedDateTime</code></h1>\n\n<p>Note that none of this are actual moments, not a point on the timeline. Without the context of an offset-from-UTC or a time zone, we do not know if you meant 5 AM in Auckland NZ or 5 AM in Kolkata IN or 5 AM in Paris France or 5 AM in Montréal Québec. Each of those would be very different moments in time.</p>\n\n<p>If by context you do know for certain the intended time zone, apply it. Apply a <a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/ZoneId.html\" rel=\"nofollow noreferrer\"><code>ZoneId</code></a> to get a <a href=\"http://docs.oracle.com/javase/8/docs/api/java/time/ZonedDateTime.html\" rel=\"nofollow noreferrer\"><code>ZonedDateTime</code></a>.</p>\n\n<pre><code>ZoneId z = ZoneId.of( \"America/Montreal\" );\nZonedDateTime zdt = ldt.atZone( z );\n</code></pre>\n\n<p>From there, ask for the <code>LocalTime</code> if desired.</p>\n\n<pre><code>LocalTime lt = zdt.toLocalTime(); \n</code></pre>\n\n<h1><code>Instant</code></h1>\n\n<p>If you want to see that same moment in <a href=\"https://en.wikipedia.org/wiki/Coordinated_Universal_Time\" rel=\"nofollow noreferrer\">UTC</a>, extract an <code>Instant</code>. The <a href=\"http://docs.oracle.com/javase/8/docs/api/java/time/Instant.html\" rel=\"nofollow noreferrer\"><code>Instant</code></a> class represents a moment on the timeline in <a href=\"https://en.wikipedia.org/wiki/Coordinated_Universal_Time\" rel=\"nofollow noreferrer\">UTC</a> with a resolution of <a href=\"https://en.wikipedia.org/wiki/Nanosecond\" rel=\"nofollow noreferrer\">nanoseconds</a> (up to nine (9) digits of a decimal fraction).</p>\n\n<p>Generally best to focus on <a href=\"https://en.wikipedia.org/wiki/Coordinated_Universal_Time\" rel=\"nofollow noreferrer\">UTC</a> in much of your business logic, logging, data storage, and data exchange. Learn to think of UTC as “The One True Time”.</p>\n\n<pre><code>Instant instant = zdt.toInstant();  // Same moment, shifted to UTC.\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2179728,"reputation":73077,"user_id":10819573,"display_name":"Arvind Kumar Avinash"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690311653,"creation_date":1689689860,"answer_id":76713736,"question_id":29927362,"body_markdown":"You can parse your date-time string into a `LocalTime` directly\r\n--\r\n\r\n**Solution using `java.time`, the modern Date-Time API&lt;sup&gt;*&lt;/sup&gt;:**\r\n\r\nHaving formatted the given date-time string into [ISO 8601](https://en.wikipedia.org/wiki/ISO_8601) format, you can parse it to `LocalTime` directly using `DateTimeFormatter.ISO_LOCAL_DATE_TIME`.\r\n\r\nAlternatively, you can use the pattern `u-M-d H:m:s.S` with `DateTimeFormatter` to parse the given date-time string directly into `LocalTime`. \r\n\r\n**Demo:**\r\n\r\n    public class Main {\r\n        public static void main(String[] args) {\r\n            LocalTime time = LocalTime.parse(&quot;2011-02-18 05:00:00.0&quot;.replace(&#39; &#39;, &#39;T&#39;), DateTimeFormatter.ISO_LOCAL_DATE_TIME);\r\n            System.out.println(time);\r\n    \r\n            // Alternatively,\r\n            time = LocalTime.parse(&quot;2011-02-18 05:00:00.0&quot;, DateTimeFormatter.ofPattern(&quot;u-M-d H:m:s.S&quot;, Locale.ENGLISH));\r\n            System.out.println(time);\r\n        }\r\n    }\r\n\r\n**Output:**\r\n\r\n    05:00\r\n    05:00\r\n\r\n[&lt;kbd&gt;ONLINE DEMO&lt;/kbd&gt;](https://ideone.com/wPE3ub)\r\n\r\nLearn more about the modern Date-Time API from **[Trail: Date Time](https://docs.oracle.com/javase/tutorial/datetime/index.html)**.\r\n\r\n---\r\n&lt;sup&gt;* The `java.util` Date-Time API and their formatting API, `SimpleDateFormat` are outdated and error-prone. It is recommended to stop using them completely and switch to the [modern Date-Time API](https://www.oracle.com/technical-resources/articles/java/jf14-Date-Time.html).&lt;/sup&gt;","title":"LocalTime from Date","body":"<h2>You can parse your date-time string into a <code>LocalTime</code> directly</h2>\n<p><strong>Solution using <code>java.time</code>, the modern Date-Time API<sup>*</sup>:</strong></p>\n<p>Having formatted the given date-time string into <a href=\"https://en.wikipedia.org/wiki/ISO_8601\" rel=\"nofollow noreferrer\">ISO 8601</a> format, you can parse it to <code>LocalTime</code> directly using <code>DateTimeFormatter.ISO_LOCAL_DATE_TIME</code>.</p>\n<p>Alternatively, you can use the pattern <code>u-M-d H:m:s.S</code> with <code>DateTimeFormatter</code> to parse the given date-time string directly into <code>LocalTime</code>.</p>\n<p><strong>Demo:</strong></p>\n<pre><code>public class Main {\n    public static void main(String[] args) {\n        LocalTime time = LocalTime.parse(&quot;2011-02-18 05:00:00.0&quot;.replace(' ', 'T'), DateTimeFormatter.ISO_LOCAL_DATE_TIME);\n        System.out.println(time);\n\n        // Alternatively,\n        time = LocalTime.parse(&quot;2011-02-18 05:00:00.0&quot;, DateTimeFormatter.ofPattern(&quot;u-M-d H:m:s.S&quot;, Locale.ENGLISH));\n        System.out.println(time);\n    }\n}\n</code></pre>\n<p><strong>Output:</strong></p>\n<pre><code>05:00\n05:00\n</code></pre>\n<p><a href=\"https://ideone.com/wPE3ub\" rel=\"nofollow noreferrer\"><kbd>ONLINE DEMO</kbd></a></p>\n<p>Learn more about the modern Date-Time API from <strong><a href=\"https://docs.oracle.com/javase/tutorial/datetime/index.html\" rel=\"nofollow noreferrer\">Trail: Date Time</a></strong>.</p>\n<hr />\n<p><sup>* The <code>java.util</code> Date-Time API and their formatting API, <code>SimpleDateFormat</code> are outdated and error-prone. It is recommended to stop using them completely and switch to the <a href=\"https://www.oracle.com/technical-resources/articles/java/jf14-Date-Time.html\" rel=\"nofollow noreferrer\">modern Date-Time API</a>.</sup></p>\n"}],"owner":{"account_id":4000003,"reputation":4365,"user_id":3296266,"accept_rate":92,"display_name":"Stanko"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":43874,"favorite_count":0,"down_vote_count":0,"up_vote_count":20,"accepted_answer_id":29927527,"answer_count":5,"score":20,"last_activity_date":1690311653,"creation_date":1430246405,"question_id":29927362,"body_markdown":"I&#39;m trying to convert a `Date` instance to a `LocalTime` instance.\r\n\r\n    // Create the Date\r\n    Date date = format.parse(&quot;2011-02-18 05:00:00.0&quot;);    \r\n    \r\n    // Convert to Calendar\r\n    Calendar cal = Calendar.getInstance();\r\n    cal.setTime(date);\r\n\r\n    // Convert Calendar to LocalTime\r\n    Instant instant = Instant.ofEpochMilli(cal.getTimeInMillis());\r\n    LocalTime convert = LocalDateTime.ofInstant(instant, ZoneId.systemDefault()).toLocalTime();\r\n\r\nI don&#39;t get a compiler error but the `LocalTime` instance values are wrong.\r\n\r\n\r\nI think it does not work because `Date` stores time in `fasttime` instead of `cdate`.\r\n\r\nI&#39;m using JDK version 1.8.","title":"LocalTime from Date","body":"<p>I'm trying to convert a <code>Date</code> instance to a <code>LocalTime</code> instance.</p>\n\n<pre><code>// Create the Date\nDate date = format.parse(\"2011-02-18 05:00:00.0\");    \n\n// Convert to Calendar\nCalendar cal = Calendar.getInstance();\ncal.setTime(date);\n\n// Convert Calendar to LocalTime\nInstant instant = Instant.ofEpochMilli(cal.getTimeInMillis());\nLocalTime convert = LocalDateTime.ofInstant(instant, ZoneId.systemDefault()).toLocalTime();\n</code></pre>\n\n<p>I don't get a compiler error but the <code>LocalTime</code> instance values are wrong.</p>\n\n<p>I think it does not work because <code>Date</code> stores time in <code>fasttime</code> instead of <code>cdate</code>.</p>\n\n<p>I'm using JDK version 1.8.</p>\n"},{"tags":["java","postgresql","hibernate","auto-increment"],"comments":[{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1689661071,"post_id":76709961,"comment_id":135241094,"body_markdown":"You didn&#39;t specify a strategy on the `@Id` field. There should be an `@GeneratedValue` on there to indiciate to hibernate that the database will generate the identifier.","body":"You didn&#39;t specify a strategy on the <code>@Id</code> field. There should be an <code>@GeneratedValue</code> on there to indiciate to hibernate that the database will generate the identifier."},{"owner":{"account_id":8633322,"reputation":218443,"user_id":6464308,"display_name":"Laurenz Albe"},"score":0,"creation_date":1689661397,"post_id":76709961,"comment_id":135241146,"body_markdown":"If you create the column as `id bigint GENERATED ALWAYS AS IDENTITY PRIMARY KEY`, you&#39;ll see that Hibernate tries to insert.","body":"If you create the column as <code>id bigint GENERATED ALWAYS AS IDENTITY PRIMARY KEY</code>, you&#39;ll see that Hibernate tries to insert."},{"owner":{"account_id":27733991,"reputation":79,"user_id":21171938,"display_name":"Артем Лебідь"},"score":0,"creation_date":1689662461,"post_id":76709961,"comment_id":135241320,"body_markdown":"@M. Deinum When I added the &#39;@GeneratedValue&#39; annotation, I got the following error\n\nCaused by: org.postgresql.util.PSQLException: ERROR: &quot;newtable_seq&quot; relationship does not exist\n  Position: 16","body":"@M. Deinum When I added the &#39;@GeneratedValue&#39; annotation, I got the following error  Caused by: org.postgresql.util.PSQLException: ERROR: &quot;newtable_seq&quot; relationship does not exist   Position: 16"},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1689662639,"post_id":76709961,"comment_id":135241349,"body_markdown":"You need to tell it it uses IDENTITY not AUTO or SEQUENCE.","body":"You need to tell it it uses IDENTITY not AUTO or SEQUENCE."},{"owner":{"account_id":27733991,"reputation":79,"user_id":21171938,"display_name":"Артем Лебідь"},"score":0,"creation_date":1689663708,"post_id":76709961,"comment_id":135241549,"body_markdown":"@M. Deinum I cannot thank you enough!","body":"@M. Deinum I cannot thank you enough!"}],"answers":[{"tags":[],"owner":{"account_id":27733991,"reputation":79,"user_id":21171938,"display_name":"Артем Лебідь"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1690311225,"creation_date":1689956745,"answer_id":76739678,"question_id":76709961,"body_markdown":" \r\nAnswer from [M. Deinum][1]:\r\n\r\nYou didn&#39;t specify a strategy on the `@Id` field. There should be an `@GeneratedValue` on there to indicate to Hibernate that the database will generate the identifier.\r\n\r\n\r\n  [1]: https://stackoverflow.com/users/2696260/m-deinum","title":"Auto incrementing does not occur when adding an item in PostgreSQL using Hibernate","body":"<p>Answer from <a href=\"https://stackoverflow.com/users/2696260/m-deinum\">M. Deinum</a>:</p>\n<p>You didn't specify a strategy on the <code>@Id</code> field. There should be an <code>@GeneratedValue</code> on there to indicate to Hibernate that the database will generate the identifier.</p>\n"}],"owner":{"account_id":27733991,"reputation":79,"user_id":21171938,"display_name":"Артем Лебідь"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":46,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76739678,"answer_count":1,"score":0,"last_activity_date":1690311225,"creation_date":1689660894,"question_id":76709961,"body_markdown":"I created a table in PostgeSQL with data for a person and marked the column &quot;id&quot; with the type &#39;SERIAL&#39; as &#39;primary key&#39;, &#39;not null&#39;\r\n\r\nCREATE Script:\r\n\r\n    \r\n    CREATE TABLE people (\r\n      id serial NOT NULL,\r\n      name varchar(15),\r\n      surname varchar(25),\r\n      department varchar(20),\r\n      salary int,\r\n      PRIMARY KEY (id)\r\n    );\r\nThen I created an Entity class for my table \r\n\r\n\r\n    package hibernate_test.entity;\r\n    import jakarta.persistence.*;\r\n    \r\n    @Entity\r\n    @Table(name = &quot;people&quot;)\r\n    public class Employee {\r\n        @Id\r\n        @Column(name = &quot;id&quot;)\r\n        private int id;\r\n        @Column(name = &quot;name&quot;)\r\n        private String name;\r\n        @Column(name = &quot;surname&quot;)\r\n        private String surname;\r\n        @Column(name = &quot;department&quot;)\r\n        private String department;\r\n        @Column(name = &quot;salary&quot;)\r\n        private int salary;\r\n    \r\n        public Employee() {\r\n        }\r\n    \r\n        public Employee(String name, String surname, String department, int salary) {\r\n            this.name = name;\r\n            this.surname = surname;\r\n            this.department = department;\r\n            this.salary = salary;\r\n        }\r\n    \r\n        @Override\r\n        public String toString() {\r\n            return &quot;Employee{&quot; +\r\n                    &quot;id=&quot; + id +\r\n                    &quot;, name=&#39;&quot; + name + &#39;\\&#39;&#39; +\r\n                    &quot;, surname=&#39;&quot; + surname + &#39;\\&#39;&#39; +\r\n                    &quot;, department=&#39;&quot; + department + &#39;\\&#39;&#39; +\r\n                    &quot;, salary=&quot; + salary +\r\n                    &#39;}&#39;;\r\n        }\r\n    \r\n        public int getId() {\r\n            return id;\r\n        }\r\n    \r\n        public void setId(int id) {\r\n            this.id = id;\r\n        }\r\n    \r\n        public String getName() {\r\n            return name;\r\n        }\r\n    \r\n        public void setName(String name) {\r\n            this.name = name;\r\n        }\r\n    \r\n        public String getSurname() {\r\n            return surname;\r\n        }\r\n    \r\n        public void setSurname(String surname) {\r\n            this.surname = surname;\r\n        }\r\n    \r\n        public String getDepartment() {\r\n            return department;\r\n        }\r\n    \r\n        public void setDepartment(String department) {\r\n            this.department = department;\r\n        }\r\n    \r\n        public int getSalary() {\r\n            return salary;\r\n        }\r\n    \r\n        public void setSalary(int salary) {\r\n            this.salary = salary;\r\n        }\r\n    }\r\n\r\nNext, I wrote a program that adds a record to my table\r\n\r\n    package hibernate_test;\r\n    \r\n    import hibernate_test.entity.Employee;\r\n    import org.hibernate.Session;\r\n    import org.hibernate.SessionFactory;\r\n    import org.hibernate.cfg.Configuration;\r\n    \r\n    public class Test1 {\r\n        public static void main(String[] args) {\r\n            SessionFactory factory = new Configuration()\r\n                    .configure(&quot;hibernate.cfg.xml&quot;)\r\n                    .addAnnotatedClass(Employee.class)\r\n                    .buildSessionFactory();\r\n    \r\n            Session session = factory.getCurrentSession();\r\n            Employee emp = new Employee(&quot;Jack&quot;, &quot;Jack&quot;, &quot;IT&quot;, 5000);\r\n    \r\n            try {\r\n                session.beginTransaction();\r\n                session.save(emp);\r\n                session.getTransaction().commit();\r\n    \r\n            }finally {\r\n                factory.close();\r\n            }\r\n    \r\n        }\r\n    }\r\n\r\nWhen I run this code, the first record is added to the table, but the id is at index 0. I think the index should start at 1 because I specified the type &#39;SERIAL&#39; in the id. \r\nWhen I try to add another item, an error occurs:\r\n\r\n    09:09:05.911 [main] INFO org.hibernate.Version -- HHH000412: Hibernate ORM core version 6.2.6.Final\r\n    09:09:05.916 [main] INFO org.hibernate.cfg.Environment -- HHH000406: Using bytecode reflection optimizer\r\n    09:09:06.366 [main] WARN org.hibernate.orm.connections.pooling -- HHH10001002: Using built-in connection pool (not intended for production use)\r\n    09:09:06.369 [main] INFO org.hibernate.orm.connections.pooling -- HHH10001005: Loaded JDBC driver class: org.postgresql.Driver\r\n    09:09:06.369 [main] INFO org.hibernate.orm.connections.pooling -- HHH10001012: Connecting with JDBC URL [jdbc:postgresql://127.0.0.1:5432/learnhbn]\r\n    09:09:06.369 [main] INFO org.hibernate.orm.connections.pooling -- HHH10001001: Connection properties: {password=****, user=postgres}\r\n    09:09:06.369 [main] INFO org.hibernate.orm.connections.pooling -- HHH10001003: Autocommit mode: false\r\n    09:09:06.373 [main] INFO org.hibernate.orm.connections.pooling -- HHH10001115: Connection pool size: 20 (min=1)\r\n    09:09:06.796 [main] INFO org.hibernate.bytecode.internal.BytecodeProviderInitiator -- HHH000021: Bytecode provider name : bytebuddy\r\n    Hibernate: insert into people (department,name,salary,surname,id) values (?,?,?,?,?)\r\n    09:09:07.648 [main] WARN org.hibernate.engine.jdbc.spi.SqlExceptionHelper -- SQL Error: 0, SQLState: 23505\r\n    09:09:07.648 [main] ERROR org.hibernate.engine.jdbc.spi.SqlExceptionHelper -- ПОМИЛКА: повторювані значення ключа порушують обмеження унікальності &quot;people_pkey&quot;\r\n      Подробности: Ключ (id)=(0) вже існує.\r\n    09:09:07.656 [main] INFO org.hibernate.orm.connections.pooling -- HHH10001008: Cleaning up connection pool [jdbc:postgresql://127.0.0.1:5432/learnhbn]\r\n    Exception in thread &quot;main&quot; org.hibernate.exception.ConstraintViolationException: could not execute statement [ПОМИЛКА: повторювані значення ключа порушують обмеження унікальності &quot;people_pkey&quot;\r\n      Подробности: Ключ (id)=(0) вже існує.] [insert into people (department,name,salary,surname,id) values (?,?,?,?,?)]\r\n    \tat org.hibernate.exception.internal.SQLStateConversionDelegate.convert(SQLStateConversionDelegate.java:95)\r\n    \tat org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:56)\r\n    \tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)\r\n    \tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:278)\r\n    \tat org.hibernate.engine.jdbc.mutation.internal.AbstractMutationExecutor.performNonBatchedMutation(AbstractMutationExecutor.java:108)\r\n    \tat org.hibernate.engine.jdbc.mutation.internal.MutationExecutorSingleNonBatched.performNonBatchedOperations(MutationExecutorSingleNonBatched.java:40)\r\n    \tat org.hibernate.engine.jdbc.mutation.internal.AbstractMutationExecutor.execute(AbstractMutationExecutor.java:53)\r\n    \tat org.hibernate.persister.entity.mutation.InsertCoordinator.doStaticInserts(InsertCoordinator.java:170)\r\n    \tat org.hibernate.persister.entity.mutation.InsertCoordinator.coordinateInsert(InsertCoordinator.java:112)\r\n    \tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:2761)\r\n    \tat org.hibernate.action.internal.EntityInsertAction.execute(EntityInsertAction.java:102)\r\n    \tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:633)\r\n    \tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:502)\r\n    \tat org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:358)\r\n    \tat org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:39)\r\n    \tat org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:127)\r\n    \tat org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1412)\r\n    \tat org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:485)\r\n    \tat org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:2301)\r\n    \tat org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:1966)\r\n    \tat org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:439)\r\n    \tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:169)\r\n    \tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:267)\r\n    \tat org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)\r\n    \tat hibernate_test.Test1.main(Test1.java:21)\r\n    Caused by: org.postgresql.util.PSQLException: ПОМИЛКА: повторювані значення ключа порушують обмеження унікальності &quot;people_pkey&quot;\r\n      Подробности: Ключ (id)=(0) вже існує.\r\n    \tat org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2713)\r\n    \tat org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2401)\r\n    \tat org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:368)\r\n    \tat org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:498)\r\n    \tat org.postgresql.jdbc.PgStatement.execute(PgStatement.java:415)\r\n    \tat org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:190)\r\n    \tat org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:152)\r\n    \tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:275)\r\n    \t... 21 more\r\n    \r\n    Process finished with exit code 1\r\n\r\nThe error indicates that there can&#39;t be two records with index 0, but I don&#39;t pass any id value directly to the constructor. Hibernate should increment the id to one itself, and ideally start with one\r\n\r\nI will be glad if you can help me figure out where I am making a mistake","title":"Auto incrementing does not occur when adding an item in PostgreSQL using Hibernate","body":"<p>I created a table in PostgeSQL with data for a person and marked the column &quot;id&quot; with the type 'SERIAL' as 'primary key', 'not null'</p>\n<p>CREATE Script:</p>\n<pre><code>CREATE TABLE people (\n  id serial NOT NULL,\n  name varchar(15),\n  surname varchar(25),\n  department varchar(20),\n  salary int,\n  PRIMARY KEY (id)\n);\n</code></pre>\n<p>Then I created an Entity class for my table</p>\n<pre><code>package hibernate_test.entity;\nimport jakarta.persistence.*;\n\n@Entity\n@Table(name = &quot;people&quot;)\npublic class Employee {\n    @Id\n    @Column(name = &quot;id&quot;)\n    private int id;\n    @Column(name = &quot;name&quot;)\n    private String name;\n    @Column(name = &quot;surname&quot;)\n    private String surname;\n    @Column(name = &quot;department&quot;)\n    private String department;\n    @Column(name = &quot;salary&quot;)\n    private int salary;\n\n    public Employee() {\n    }\n\n    public Employee(String name, String surname, String department, int salary) {\n        this.name = name;\n        this.surname = surname;\n        this.department = department;\n        this.salary = salary;\n    }\n\n    @Override\n    public String toString() {\n        return &quot;Employee{&quot; +\n                &quot;id=&quot; + id +\n                &quot;, name='&quot; + name + '\\'' +\n                &quot;, surname='&quot; + surname + '\\'' +\n                &quot;, department='&quot; + department + '\\'' +\n                &quot;, salary=&quot; + salary +\n                '}';\n    }\n\n    public int getId() {\n        return id;\n    }\n\n    public void setId(int id) {\n        this.id = id;\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public void setName(String name) {\n        this.name = name;\n    }\n\n    public String getSurname() {\n        return surname;\n    }\n\n    public void setSurname(String surname) {\n        this.surname = surname;\n    }\n\n    public String getDepartment() {\n        return department;\n    }\n\n    public void setDepartment(String department) {\n        this.department = department;\n    }\n\n    public int getSalary() {\n        return salary;\n    }\n\n    public void setSalary(int salary) {\n        this.salary = salary;\n    }\n}\n</code></pre>\n<p>Next, I wrote a program that adds a record to my table</p>\n<pre><code>package hibernate_test;\n\nimport hibernate_test.entity.Employee;\nimport org.hibernate.Session;\nimport org.hibernate.SessionFactory;\nimport org.hibernate.cfg.Configuration;\n\npublic class Test1 {\n    public static void main(String[] args) {\n        SessionFactory factory = new Configuration()\n                .configure(&quot;hibernate.cfg.xml&quot;)\n                .addAnnotatedClass(Employee.class)\n                .buildSessionFactory();\n\n        Session session = factory.getCurrentSession();\n        Employee emp = new Employee(&quot;Jack&quot;, &quot;Jack&quot;, &quot;IT&quot;, 5000);\n\n        try {\n            session.beginTransaction();\n            session.save(emp);\n            session.getTransaction().commit();\n\n        }finally {\n            factory.close();\n        }\n\n    }\n}\n</code></pre>\n<p>When I run this code, the first record is added to the table, but the id is at index 0. I think the index should start at 1 because I specified the type 'SERIAL' in the id.\nWhen I try to add another item, an error occurs:</p>\n<pre><code>09:09:05.911 [main] INFO org.hibernate.Version -- HHH000412: Hibernate ORM core version 6.2.6.Final\n09:09:05.916 [main] INFO org.hibernate.cfg.Environment -- HHH000406: Using bytecode reflection optimizer\n09:09:06.366 [main] WARN org.hibernate.orm.connections.pooling -- HHH10001002: Using built-in connection pool (not intended for production use)\n09:09:06.369 [main] INFO org.hibernate.orm.connections.pooling -- HHH10001005: Loaded JDBC driver class: org.postgresql.Driver\n09:09:06.369 [main] INFO org.hibernate.orm.connections.pooling -- HHH10001012: Connecting with JDBC URL [jdbc:postgresql://127.0.0.1:5432/learnhbn]\n09:09:06.369 [main] INFO org.hibernate.orm.connections.pooling -- HHH10001001: Connection properties: {password=****, user=postgres}\n09:09:06.369 [main] INFO org.hibernate.orm.connections.pooling -- HHH10001003: Autocommit mode: false\n09:09:06.373 [main] INFO org.hibernate.orm.connections.pooling -- HHH10001115: Connection pool size: 20 (min=1)\n09:09:06.796 [main] INFO org.hibernate.bytecode.internal.BytecodeProviderInitiator -- HHH000021: Bytecode provider name : bytebuddy\nHibernate: insert into people (department,name,salary,surname,id) values (?,?,?,?,?)\n09:09:07.648 [main] WARN org.hibernate.engine.jdbc.spi.SqlExceptionHelper -- SQL Error: 0, SQLState: 23505\n09:09:07.648 [main] ERROR org.hibernate.engine.jdbc.spi.SqlExceptionHelper -- ПОМИЛКА: повторювані значення ключа порушують обмеження унікальності &quot;people_pkey&quot;\n  Подробности: Ключ (id)=(0) вже існує.\n09:09:07.656 [main] INFO org.hibernate.orm.connections.pooling -- HHH10001008: Cleaning up connection pool [jdbc:postgresql://127.0.0.1:5432/learnhbn]\nException in thread &quot;main&quot; org.hibernate.exception.ConstraintViolationException: could not execute statement [ПОМИЛКА: повторювані значення ключа порушують обмеження унікальності &quot;people_pkey&quot;\n  Подробности: Ключ (id)=(0) вже існує.] [insert into people (department,name,salary,surname,id) values (?,?,?,?,?)]\n    at org.hibernate.exception.internal.SQLStateConversionDelegate.convert(SQLStateConversionDelegate.java:95)\n    at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:56)\n    at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)\n    at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:278)\n    at org.hibernate.engine.jdbc.mutation.internal.AbstractMutationExecutor.performNonBatchedMutation(AbstractMutationExecutor.java:108)\n    at org.hibernate.engine.jdbc.mutation.internal.MutationExecutorSingleNonBatched.performNonBatchedOperations(MutationExecutorSingleNonBatched.java:40)\n    at org.hibernate.engine.jdbc.mutation.internal.AbstractMutationExecutor.execute(AbstractMutationExecutor.java:53)\n    at org.hibernate.persister.entity.mutation.InsertCoordinator.doStaticInserts(InsertCoordinator.java:170)\n    at org.hibernate.persister.entity.mutation.InsertCoordinator.coordinateInsert(InsertCoordinator.java:112)\n    at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:2761)\n    at org.hibernate.action.internal.EntityInsertAction.execute(EntityInsertAction.java:102)\n    at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:633)\n    at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:502)\n    at org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:358)\n    at org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:39)\n    at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:127)\n    at org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1412)\n    at org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:485)\n    at org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:2301)\n    at org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:1966)\n    at org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:439)\n    at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:169)\n    at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:267)\n    at org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)\n    at hibernate_test.Test1.main(Test1.java:21)\nCaused by: org.postgresql.util.PSQLException: ПОМИЛКА: повторювані значення ключа порушують обмеження унікальності &quot;people_pkey&quot;\n  Подробности: Ключ (id)=(0) вже існує.\n    at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2713)\n    at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2401)\n    at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:368)\n    at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:498)\n    at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:415)\n    at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:190)\n    at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:152)\n    at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:275)\n    ... 21 more\n\nProcess finished with exit code 1\n</code></pre>\n<p>The error indicates that there can't be two records with index 0, but I don't pass any id value directly to the constructor. Hibernate should increment the id to one itself, and ideally start with one</p>\n<p>I will be glad if you can help me figure out where I am making a mistake</p>\n"},{"tags":["java","spring","spring-security"],"answers":[{"tags":[],"owner":{"account_id":29089873,"reputation":1,"user_id":22284008,"display_name":"Denis Lobanov"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690311140,"creation_date":1690311140,"answer_id":76765723,"question_id":76765178,"body_markdown":"Can use @WithMockUser in IT.\r\n\r\nor\r\n\r\ncreate customMockUser\r\n\r\n    @Retention(RetentionPolicy.RUNTIME)\r\n    @WithSecurityContext(factory = CustomUserSecurityContextFactory.class)\r\n    public @interface CustomMockUser {\r\n    \r\n    \tString username() default &quot;user&quot;;\r\n    \r\n    \tString userId() default &quot;&quot;;\r\n    \r\n    \t@AliasFor(annotation = WithSecurityContext.class)\r\n    \tTestExecutionEvent setupBefore() default TestExecutionEvent.TEST_EXECUTION;\r\n    }\r\n\r\nand \r\n\r\n    public class CustomUserSecurityContextFactory implements WithSecurityContextFactory&lt;CustomMockUser&gt; {\r\n\r\n\t@Override\r\n\tpublic SecurityContext createSecurityContext(CustomMockUser withUser) {\r\n\t\tJwtAuthenticationToken authentication = new JwtAuthenticationToken(Jwt.withTokenValue(UUID.randomUUID().toString())\r\n\t\t\t\t\t\t.claim(KeycloakAuthToken.SESSION_ID_CLAIM, UUID.randomUUID().toString())\r\n\t\t\t\t\t\t.claim(KeycloakAuthToken.USER_LOGIN_CLAIM, withUser.username())\r\n\t\t\t\t\t\t.header(&quot;typ&quot;, &quot;JWT&quot;)\r\n\t\t\t\t\t\t.build());\r\n\r\n\t\tSecurityContext context = SecurityContextHolder.createEmptyContext();\r\n\t\tcontext.setAuthentication(authentication);\r\n\t\treturn context;\r\n\t}\r\n    }","title":"Migrating from Spring security oauth to spring security core 6.1.0 getting &#39;principalName cannot be empty&#39; error","body":"<p>Can use @WithMockUser in IT.</p>\n<p>or</p>\n<p>create customMockUser</p>\n<pre><code>@Retention(RetentionPolicy.RUNTIME)\n@WithSecurityContext(factory = CustomUserSecurityContextFactory.class)\npublic @interface CustomMockUser {\n\n    String username() default &quot;user&quot;;\n\n    String userId() default &quot;&quot;;\n\n    @AliasFor(annotation = WithSecurityContext.class)\n    TestExecutionEvent setupBefore() default TestExecutionEvent.TEST_EXECUTION;\n}\n</code></pre>\n<p>and</p>\n<pre><code>public class CustomUserSecurityContextFactory implements WithSecurityContextFactory&lt;CustomMockUser&gt; {\n\n@Override\npublic SecurityContext createSecurityContext(CustomMockUser withUser) {\n    JwtAuthenticationToken authentication = new JwtAuthenticationToken(Jwt.withTokenValue(UUID.randomUUID().toString())\n                    .claim(KeycloakAuthToken.SESSION_ID_CLAIM, UUID.randomUUID().toString())\n                    .claim(KeycloakAuthToken.USER_LOGIN_CLAIM, withUser.username())\n                    .header(&quot;typ&quot;, &quot;JWT&quot;)\n                    .build());\n\n    SecurityContext context = SecurityContextHolder.createEmptyContext();\n    context.setAuthentication(authentication);\n    return context;\n}\n}\n</code></pre>\n"}],"owner":{"account_id":29089628,"reputation":1,"user_id":22283810,"display_name":"Cole Gvozdas"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":136,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1690311140,"creation_date":1690305904,"question_id":76765178,"body_markdown":"I am working on migrating from spring security oauth to spring security core and I just changed our securityfilter chain that used to look like\r\n\r\n\r\n```\r\nimport org.springframework.context.annotation.Configuration;\r\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\r\nimport org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter;\r\n\r\n/** Security configuration for the application */\r\n@Configuration\r\npublic class SecurityConfig extends WebSecurityConfigurerAdapter {\r\n\r\n  @Override\r\n  protected void configure(HttpSecurity http) throws Exception {\r\n    http.csrf().disable().authorizeRequests().anyRequest().permitAll();\r\n  }\r\n}\r\n```\r\nbut now i have changed it to look like this (essentially just getting rid of the deprecated stuff\r\n```\r\n@Configuration\r\npublic class SecurityConfig {\r\n\r\n  @Bean\r\n  public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\r\n    http.csrf(AbstractHttpConfigurer::disable).authorizeHttpRequests(auth -&gt; auth.anyRequest().permitAll());\r\n    return http.build();\r\n  }\r\n}\r\n\r\n```\r\nnow whenever i run an integration test or make a request on our api I receive the error below coming from loadAuthorizedClient function in the *InMemoryOAuth2AuthorizedClientService* file from the spring security apache libraries\r\n```\r\njava.lang.IllegalArgumentException: principalName cannot be empty\r\n\tat org.springframework.util.Assert.hasText(Assert.java:294)\r\n```\r\nnot sure how to set this or even possibly disable it\r\n\r\n\r\nNot even sure where to begin.  I tried setting a principal and it still comes up as null.  I tried writing another bean to overwrite the one from their library with something that has a test principalname, and a few other methods.  Most stack overflow suggestions ive seen on similar posts say to use a bunch of libraries that are all deprecated/non-existent in spring security core 6.  The released migration guide from spring security core is not helpful either.","title":"Migrating from Spring security oauth to spring security core 6.1.0 getting &#39;principalName cannot be empty&#39; error","body":"<p>I am working on migrating from spring security oauth to spring security core and I just changed our securityfilter chain that used to look like</p>\n<pre><code>import org.springframework.context.annotation.Configuration;\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\nimport org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter;\n\n/** Security configuration for the application */\n@Configuration\npublic class SecurityConfig extends WebSecurityConfigurerAdapter {\n\n  @Override\n  protected void configure(HttpSecurity http) throws Exception {\n    http.csrf().disable().authorizeRequests().anyRequest().permitAll();\n  }\n}\n</code></pre>\n<p>but now i have changed it to look like this (essentially just getting rid of the deprecated stuff</p>\n<pre><code>@Configuration\npublic class SecurityConfig {\n\n  @Bean\n  public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n    http.csrf(AbstractHttpConfigurer::disable).authorizeHttpRequests(auth -&gt; auth.anyRequest().permitAll());\n    return http.build();\n  }\n}\n\n</code></pre>\n<p>now whenever i run an integration test or make a request on our api I receive the error below coming from loadAuthorizedClient function in the <em>InMemoryOAuth2AuthorizedClientService</em> file from the spring security apache libraries</p>\n<pre><code>java.lang.IllegalArgumentException: principalName cannot be empty\n    at org.springframework.util.Assert.hasText(Assert.java:294)\n</code></pre>\n<p>not sure how to set this or even possibly disable it</p>\n<p>Not even sure where to begin.  I tried setting a principal and it still comes up as null.  I tried writing another bean to overwrite the one from their library with something that has a test principalname, and a few other methods.  Most stack overflow suggestions ive seen on similar posts say to use a bunch of libraries that are all deprecated/non-existent in spring security core 6.  The released migration guide from spring security core is not helpful either.</p>\n"},{"tags":["java","mysql","jdbc"],"comments":[{"owner":{"account_id":1917892,"reputation":1091,"user_id":1730078,"accept_rate":100,"display_name":"schumacher574"},"score":1,"creation_date":1615790336,"post_id":66623708,"comment_id":117790268,"body_markdown":"What sort of Exception is occurring?  Try printing e&#39;s message or stack trace.","body":"What sort of Exception is occurring?  Try printing e&#39;s message or stack trace."},{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":1,"creation_date":1615811755,"post_id":66623708,"comment_id":117798593,"body_markdown":"Please don&#39;t swallow exceptions. Either let them bubble up, wrap them, or at the very minimum, log the actual exception (e.g. `e.printStackTrace()`, or better yet, using a logging library).","body":"Please don&#39;t swallow exceptions. Either let them bubble up, wrap them, or at the very minimum, log the actual exception (e.g. <code>e.printStackTrace()</code>, or better yet, using a logging library)."}],"answers":[{"tags":[],"owner":{"account_id":2674049,"reputation":93913,"user_id":2310830,"display_name":"RiggsFolly"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1615807157,"creation_date":1615807157,"answer_id":66636983,"question_id":66623708,"body_markdown":"The `root` mysql account is configured to only allow a connection from the PC running the MySQL Server. For obvious security reasons.\r\n\r\n\r\nI suggest you go to the WAMPServer machine and login to MySQL as root, then create a new account, that is NOT a Super User account and HAS password. Using `phpMyAdmin` for this is probably easiest.\r\n\r\nThen configure the domain for this account to allow connections from your network only (192.168.1) note only 3 of the 4 quartiles used will allow access from any IP in your network, but only from within your network. Allocate only the required privileges on the specific databases required, to the new account.\r\n\r\nThen use this new account in your Java code.\r\n\r\n","title":"Connect to a remote database server instead of localhost","body":"<p>The <code>root</code> mysql account is configured to only allow a connection from the PC running the MySQL Server. For obvious security reasons.</p>\n<p>I suggest you go to the WAMPServer machine and login to MySQL as root, then create a new account, that is NOT a Super User account and HAS password. Using <code>phpMyAdmin</code> for this is probably easiest.</p>\n<p>Then configure the domain for this account to allow connections from your network only (192.168.1) note only 3 of the 4 quartiles used will allow access from any IP in your network, but only from within your network. Allocate only the required privileges on the specific databases required, to the new account.</p>\n<p>Then use this new account in your Java code.</p>\n"}],"owner":{"account_id":17655752,"reputation":1,"user_id":12815396,"display_name":"Rod"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":319,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1690310928,"creation_date":1615719659,"question_id":66623708,"body_markdown":"I&#39;m trying to connect to my WAMP sever by using its IP address in my LAN. So far I have written the following code, and I don&#39;t understand why it does not establish the connection.\r\n\r\n    public class DBConnect {    \r\n        public static Connection connect()\r\n        {\r\n            Connection con=null;\r\n            try {\r\n                Class.forName(&quot;com.mysql.jdbc.Driver&quot;);\r\n                con=(Connection) DriverManager.getConnection(&quot;jdbc:mysql://192.168.1.2:3306/employee101?&quot;,&quot;root&quot;,&quot;&quot;);\r\n                JOptionPane.showMessageDialog(null, &quot;Connection Success&quot;);\r\n            } catch (Exception e) {\r\n                System.out.println(&quot;inter.DBConnect.connect()&quot;);\r\n            }\r\n            return con;\r\n        }    \r\n    }","title":"Connect to a remote database server instead of localhost","body":"<p>I'm trying to connect to my WAMP sever by using its IP address in my LAN. So far I have written the following code, and I don't understand why it does not establish the connection.</p>\n<pre><code>public class DBConnect {    \n    public static Connection connect()\n    {\n        Connection con=null;\n        try {\n            Class.forName(&quot;com.mysql.jdbc.Driver&quot;);\n            con=(Connection) DriverManager.getConnection(&quot;jdbc:mysql://192.168.1.2:3306/employee101?&quot;,&quot;root&quot;,&quot;&quot;);\n            JOptionPane.showMessageDialog(null, &quot;Connection Success&quot;);\n        } catch (Exception e) {\n            System.out.println(&quot;inter.DBConnect.connect()&quot;);\n        }\n        return con;\n    }    \n}\n</code></pre>\n"},{"tags":["java","apache-httpclient-4.x"],"answers":[{"comments":[{"owner":{"account_id":133909,"reputation":26610,"user_id":335638,"display_name":"ok2c"},"score":0,"creation_date":1690306225,"post_id":76763878,"comment_id":135333980,"body_markdown":"&gt; It doesn&#39;t have any claimed resources itself, that all goes through the connection manager // Not quite. HttpClient with a caching layer must be properly closed in order to correctly de-allocate cache resources. There are other cases when HttpClient may start extra threads that also need to be properly terminated.","body":"&gt; It doesn&#39;t have any claimed resources itself, that all goes through the connection manager // Not quite. HttpClient with a caching layer must be properly closed in order to correctly de-allocate cache resources. There are other cases when HttpClient may start extra threads that also need to be properly terminated."},{"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"score":1,"creation_date":1690310741,"post_id":76763878,"comment_id":135334850,"body_markdown":"@ok2c you&#39;re probably right. I almost always use a singleton `HttpClient` / `CloseableHttpClient` that I close when the application shuts down.","body":"@ok2c you&#39;re probably right. I almost always use a singleton <code>HttpClient</code> / <code>CloseableHttpClient</code> that I close when the application shuts down."}],"tags":[],"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1690310749,"creation_date":1690296428,"answer_id":76763878,"question_id":76761703,"body_markdown":"Don&#39;t close the `CloseableHttpClient`. It doesn&#39;t have any claimed resources itself, that all goes through the connection manager.\r\n\r\nAlternatively, call `setConnectionManagerShared(true)` on the builder. From its API documentation:\r\n&gt; Defines the connection manager is to be shared by multiple client instances.\r\n&gt;\r\n&gt; If the connection manager is shared its life-cycle is expected to be managed by the caller and it will not be shut down if the client is closed.\r\n","title":"correct way to use PoolingHttpClientConnectionManager in HttpClient4 getting issue java.lang.IllegalStateException: Connection pool shut down","body":"<p>Don't close the <code>CloseableHttpClient</code>. It doesn't have any claimed resources itself, that all goes through the connection manager.</p>\n<p>Alternatively, call <code>setConnectionManagerShared(true)</code> on the builder. From its API documentation:</p>\n<blockquote>\n<p>Defines the connection manager is to be shared by multiple client instances.</p>\n<p>If the connection manager is shared its life-cycle is expected to be managed by the caller and it will not be shut down if the client is closed.</p>\n</blockquote>\n"}],"owner":{"account_id":27891295,"reputation":25,"user_id":21297617,"display_name":"ketan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1260,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76763878,"answer_count":1,"score":0,"last_activity_date":1690310749,"creation_date":1690280282,"question_id":76761703,"body_markdown":"I am utilizing HTTPclient4 in Java to send HTTP requests and handle HTTP responses. I want to use connectionPooling for improved performance but I am not able to find a proper way to do it.\r\n\r\n\r\nI am utilizing HTTPclient4 in Java to send HTTP requests and handle HTTP responses. Below is a code sample illustrating how I set up the connection manager and use it to obtain an instance of the CloseableHttpClient:\r\n\r\n```java\r\n// Setting up the connection manager\r\nstatic PoolingHttpClientConnectionManager connectionManager = new PoolingHttpClientConnectionManager();\r\n\r\n// Getting the CloseableHttpClient using the same connection manager\r\nCloseableHttpClient httpClient = HttpClients.custom()\r\n                                .setConnectionManager(connectionManager)\r\n                                .build();\r\n```\r\n\r\nHowever, after using the httpClient and then closing it, I encountered the following error on trying to get a new httpClient from the connectionManager:\r\n\r\n```\r\njava.lang.IllegalStateException: Connection pool shut down\r\n```\r\n\r\nUpon investigation, I discovered that closing the CloseableHttpClient also closes the connection manager, leading to this issue.\r\n\r\nI understand that connection pooling is recommended when obtaining an httpClient. However, the current behavior poses a question: How can we reuse the same connection manager to get an httpClient if closing the httpClient also closes the connection manager? Additionally, if we cannot reuse the same connection manager, then how does connection pooling work effectively?","title":"correct way to use PoolingHttpClientConnectionManager in HttpClient4 getting issue java.lang.IllegalStateException: Connection pool shut down","body":"<p>I am utilizing HTTPclient4 in Java to send HTTP requests and handle HTTP responses. I want to use connectionPooling for improved performance but I am not able to find a proper way to do it.</p>\n<p>I am utilizing HTTPclient4 in Java to send HTTP requests and handle HTTP responses. Below is a code sample illustrating how I set up the connection manager and use it to obtain an instance of the CloseableHttpClient:</p>\n<pre class=\"lang-java prettyprint-override\"><code>// Setting up the connection manager\nstatic PoolingHttpClientConnectionManager connectionManager = new PoolingHttpClientConnectionManager();\n\n// Getting the CloseableHttpClient using the same connection manager\nCloseableHttpClient httpClient = HttpClients.custom()\n                                .setConnectionManager(connectionManager)\n                                .build();\n</code></pre>\n<p>However, after using the httpClient and then closing it, I encountered the following error on trying to get a new httpClient from the connectionManager:</p>\n<pre><code>java.lang.IllegalStateException: Connection pool shut down\n</code></pre>\n<p>Upon investigation, I discovered that closing the CloseableHttpClient also closes the connection manager, leading to this issue.</p>\n<p>I understand that connection pooling is recommended when obtaining an httpClient. However, the current behavior poses a question: How can we reuse the same connection manager to get an httpClient if closing the httpClient also closes the connection manager? Additionally, if we cannot reuse the same connection manager, then how does connection pooling work effectively?</p>\n"},{"tags":["java","oracle","jdbc","datasource"],"comments":[{"owner":{"account_id":74118,"reputation":49342,"user_id":213136,"accept_rate":100,"display_name":"Bob Jarvis - Слава Україні"},"score":0,"creation_date":1552046899,"post_id":55062845,"comment_id":96873795,"body_markdown":"Have you tried `dataSource.SetAutoCommit(false)`?","body":"Have you tried <code>dataSource.SetAutoCommit(false)</code>?"},{"owner":{"account_id":205124,"reputation":26418,"user_id":453712,"accept_rate":74,"display_name":"michele"},"score":0,"creation_date":1552046957,"post_id":55062845,"comment_id":96873820,"body_markdown":"OracleDatasource if don&#39;t have setautocommit. Connection has it","body":"OracleDatasource if don&#39;t have setautocommit. Connection has it"},{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1552051767,"post_id":55062845,"comment_id":96876367,"body_markdown":"Why do you think that the Oracle datasource has a property called AutoCommit? In any case, if `-Doracle.jdbc.autoCommitSpecCompliant=false` works, have you tried using `props.put(&quot;oracle.jdbc.autoCommitSpecCompliant&quot;,  &quot;false&quot;)`?","body":"Why do you think that the Oracle datasource has a property called AutoCommit? In any case, if <code>-Doracle.jdbc.autoCommitSpecCompliant=false</code> works, have you tried using <code>props.put(&quot;oracle.jdbc.autoCommitSpecCompliant&quot;,  &quot;false&quot;)</code>?"}],"answers":[{"tags":[],"owner":{"account_id":205124,"reputation":26418,"user_id":453712,"accept_rate":74,"display_name":"michele"},"comment_count":0,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1552051986,"creation_date":1552051986,"answer_id":55064299,"question_id":55062845,"body_markdown":"Solution:\r\n\r\n    public DataSource getDefaultDataSource() throws SQLException {\r\n    \tOracleDataSource dataSource = new OracleDataSource();\r\n    \tdataSource.setUser(userName);\r\n    \tdataSource.setPassword(password);\r\n    \tdataSource.setURL(wallet);\r\n    \tProperties props = new Properties();\r\n    \tprops.put(&quot;oracle.jdbc.autoCommitSpecCompliant&quot;, &quot;false&quot;);\r\n    \tdataSource.setConnectionProperties(props );\r\n    \treturn dataSource;\r\n    }","title":"Oracle JDBC Datasource set auto commit property to false to all connections","body":"<p>Solution:</p>\n\n<pre><code>public DataSource getDefaultDataSource() throws SQLException {\n    OracleDataSource dataSource = new OracleDataSource();\n    dataSource.setUser(userName);\n    dataSource.setPassword(password);\n    dataSource.setURL(wallet);\n    Properties props = new Properties();\n    props.put(\"oracle.jdbc.autoCommitSpecCompliant\", \"false\");\n    dataSource.setConnectionProperties(props );\n    return dataSource;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6389739,"reputation":2892,"user_id":4956336,"display_name":"p3consulting"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690310545,"creation_date":1690310545,"answer_id":76765674,"question_id":55062845,"body_markdown":"The value should be a String not a Boolean:\r\n\r\n    props.put(OracleConnection.CONNECTION_PROPERTY_AUTOCOMMIT, &quot;false&quot;); \r\n\r\n","title":"Oracle JDBC Datasource set auto commit property to false to all connections","body":"<p>The value should be a String not a Boolean:</p>\n<pre><code>props.put(OracleConnection.CONNECTION_PROPERTY_AUTOCOMMIT, &quot;false&quot;); \n</code></pre>\n"}],"owner":{"account_id":205124,"reputation":26418,"user_id":453712,"accept_rate":74,"display_name":"michele"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3535,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1690310545,"creation_date":1552046509,"question_id":55062845,"body_markdown":"I have this bean:\r\n\r\n    public DataSource getDatsource() throws SQLException {\r\n\t\tOracleDataSource dataSource = new OracleDataSource();\r\n\t\tdataSource.setUser(userName);\r\n\t\tdataSource.setPassword(password);\r\n\t\tdataSource.setURL(wallet);\r\n\t\tProperties props = new Properties();\r\n\t\tprops.put(&quot;AutoCommit&quot;, false); // not working\r\n\t\tdataSource.setConnectionProperties(props );\r\n\t\treturn dataSource;\r\n\t}\r\n\r\nI would set up datasource like all the connection generated from it, has auto commit to false.\r\n\r\nHow can I do it?\r\n\r\nPS I know `-Doracle.jdbc.autoCommitSpecCompliant=false` and works, but I would set the property hard coded.\r\n\r\nThanks.","title":"Oracle JDBC Datasource set auto commit property to false to all connections","body":"<p>I have this bean:</p>\n\n<pre><code>public DataSource getDatsource() throws SQLException {\n    OracleDataSource dataSource = new OracleDataSource();\n    dataSource.setUser(userName);\n    dataSource.setPassword(password);\n    dataSource.setURL(wallet);\n    Properties props = new Properties();\n    props.put(\"AutoCommit\", false); // not working\n    dataSource.setConnectionProperties(props );\n    return dataSource;\n}\n</code></pre>\n\n<p>I would set up datasource like all the connection generated from it, has auto commit to false.</p>\n\n<p>How can I do it?</p>\n\n<p>PS I know <code>-Doracle.jdbc.autoCommitSpecCompliant=false</code> and works, but I would set the property hard coded.</p>\n\n<p>Thanks.</p>\n"},{"tags":["java","spring","swagger","spring-boot-actuator"],"owner":{"account_id":1538531,"reputation":3761,"user_id":1433826,"accept_rate":51,"display_name":"reiley"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":54,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690310342,"creation_date":1690310342,"question_id":76765646,"body_markdown":"I am upgrading spring boot to `2.7.13` &amp; `JDK17`.\r\n\r\nThen I ran into a common problem with `Springfox`, which I solved using this [post][1]. (tl;dr defining `WebMvcEndpointHandlerMapping` bean)\r\n\r\n\r\nIn my project I&#39;m exposing by health endpoint on `8081`.\r\n\r\n    management.server.port: 8081\r\n\r\nDoing this is throwing error:\r\n\r\n    Parameter 4 of method webEndpointServletHandlerMapping in com.my.application.web.config.WebMvcEndpointConfig required a bean of type &#39;org.springframework.boot.actuate.autoconfigure.endpoint.web.CorsEndpointProperties&#39; that could not be found.\r\n\r\nLooks like the custom definition of bean is not handling CORS well for port 8081.\r\n\r\nAny suggestions how can this be solved?\r\n\r\nBean definition:\r\n\r\n    @Bean\r\n        public WebMvcEndpointHandlerMapping webEndpointServletHandlerMapping(WebEndpointsSupplier webEndpointsSupplier,\r\n                                                                             ServletEndpointsSupplier servletEndpointsSupplier, ControllerEndpointsSupplier controllerEndpointsSupplier,\r\n                                                                             EndpointMediaTypes endpointMediaTypes, CorsEndpointProperties corsProperties,\r\n                                                                             WebEndpointProperties webEndpointProperties, Environment environment) {\r\n            List&lt;ExposableEndpoint&lt;?&gt;&gt; allEndpoints = new ArrayList();\r\n            Collection&lt;ExposableWebEndpoint&gt; webEndpoints = webEndpointsSupplier.getEndpoints();\r\n            allEndpoints.addAll(webEndpoints);\r\n            allEndpoints.addAll(servletEndpointsSupplier.getEndpoints());\r\n            allEndpoints.addAll(controllerEndpointsSupplier.getEndpoints());\r\n            String basePath = webEndpointProperties.getBasePath();\r\n            EndpointMapping endpointMapping = new EndpointMapping(basePath);\r\n            boolean shouldRegisterLinksMapping = this.shouldRegisterLinksMapping(webEndpointProperties, environment,\r\n                    basePath);\r\n            return new WebMvcEndpointHandlerMapping(endpointMapping, webEndpoints, endpointMediaTypes,\r\n                    corsProperties.toCorsConfiguration(), new EndpointLinksResolver(allEndpoints, basePath),\r\n                    shouldRegisterLinksMapping, null);\r\n        }\r\n    \r\n        private boolean shouldRegisterLinksMapping(WebEndpointProperties webEndpointProperties, Environment environment,\r\n                                                   String basePath) {\r\n    \r\n            return webEndpointProperties.getDiscovery().isEnabled() &amp;&amp; (StringUtils.hasText(basePath)\r\n                    || ManagementPortType.get(environment).equals(ManagementPortType.DIFFERENT));\r\n    \r\n        }\r\n\r\n  [1]: https://stackoverflow.com/a/70892119/1433826","title":"Actuator CORS issue when creating WebMvcEndpointHandlerMapping bean","body":"<p>I am upgrading spring boot to <code>2.7.13</code> &amp; <code>JDK17</code>.</p>\n<p>Then I ran into a common problem with <code>Springfox</code>, which I solved using this <a href=\"https://stackoverflow.com/a/70892119/1433826\">post</a>. (tl;dr defining <code>WebMvcEndpointHandlerMapping</code> bean)</p>\n<p>In my project I'm exposing by health endpoint on <code>8081</code>.</p>\n<pre><code>management.server.port: 8081\n</code></pre>\n<p>Doing this is throwing error:</p>\n<pre><code>Parameter 4 of method webEndpointServletHandlerMapping in com.my.application.web.config.WebMvcEndpointConfig required a bean of type 'org.springframework.boot.actuate.autoconfigure.endpoint.web.CorsEndpointProperties' that could not be found.\n</code></pre>\n<p>Looks like the custom definition of bean is not handling CORS well for port 8081.</p>\n<p>Any suggestions how can this be solved?</p>\n<p>Bean definition:</p>\n<pre><code>@Bean\n    public WebMvcEndpointHandlerMapping webEndpointServletHandlerMapping(WebEndpointsSupplier webEndpointsSupplier,\n                                                                         ServletEndpointsSupplier servletEndpointsSupplier, ControllerEndpointsSupplier controllerEndpointsSupplier,\n                                                                         EndpointMediaTypes endpointMediaTypes, CorsEndpointProperties corsProperties,\n                                                                         WebEndpointProperties webEndpointProperties, Environment environment) {\n        List&lt;ExposableEndpoint&lt;?&gt;&gt; allEndpoints = new ArrayList();\n        Collection&lt;ExposableWebEndpoint&gt; webEndpoints = webEndpointsSupplier.getEndpoints();\n        allEndpoints.addAll(webEndpoints);\n        allEndpoints.addAll(servletEndpointsSupplier.getEndpoints());\n        allEndpoints.addAll(controllerEndpointsSupplier.getEndpoints());\n        String basePath = webEndpointProperties.getBasePath();\n        EndpointMapping endpointMapping = new EndpointMapping(basePath);\n        boolean shouldRegisterLinksMapping = this.shouldRegisterLinksMapping(webEndpointProperties, environment,\n                basePath);\n        return new WebMvcEndpointHandlerMapping(endpointMapping, webEndpoints, endpointMediaTypes,\n                corsProperties.toCorsConfiguration(), new EndpointLinksResolver(allEndpoints, basePath),\n                shouldRegisterLinksMapping, null);\n    }\n\n    private boolean shouldRegisterLinksMapping(WebEndpointProperties webEndpointProperties, Environment environment,\n                                               String basePath) {\n\n        return webEndpointProperties.getDiscovery().isEnabled() &amp;&amp; (StringUtils.hasText(basePath)\n                || ManagementPortType.get(environment).equals(ManagementPortType.DIFFERENT));\n\n    }\n</code></pre>\n"},{"tags":["java","sql-server","jdbc"],"comments":[{"owner":{"account_id":2312068,"reputation":90351,"user_id":2029983,"display_name":"Thom A"},"score":0,"creation_date":1689610381,"post_id":76706311,"comment_id":135234568,"body_markdown":"You don&#39;t append a database name to the server name in a connection string. The Database Name is a separate parameter.","body":"You don&#39;t append a database name to the server name in a connection string. The Database Name is a separate parameter."},{"owner":{"account_id":2312068,"reputation":90351,"user_id":2029983,"display_name":"Thom A"},"score":1,"creation_date":1689611198,"post_id":76706311,"comment_id":135234741,"body_markdown":"*&quot;So similarly in java I cannot use the instance name. I leave the database blank.&quot;* The *Instance* and *Database* are different things. A database is something that is hosted on an Instance. There can be multiple Instances on a (Windows) server, and then each Instance will have multiple databases.","body":"<i>&quot;So similarly in java I cannot use the instance name. I leave the database blank.&quot;</i> The <i>Instance</i> and <i>Database</i> are different things. A database is something that is hosted on an Instance. There can be multiple Instances on a (Windows) server, and then each Instance will have multiple databases."},{"owner":{"account_id":166167,"reputation":8075,"user_id":390122,"accept_rate":75,"display_name":"AlwaysLearning"},"score":0,"creation_date":1689631271,"post_id":76706311,"comment_id":135238331,"body_markdown":"Databases are seperate securables. i.e.: just because you have a login that can access an SQL Server instance doesn&#39;t mean that the login has access to all of the databases that are resident there. Does the login you&#39;re using actually have access to both databases?","body":"Databases are seperate securables. i.e.: just because you have a login that can access an SQL Server instance doesn&#39;t mean that the login has access to all of the databases that are resident there. Does the login you&#39;re using actually have access to both databases?"},{"owner":{"account_id":166167,"reputation":8075,"user_id":390122,"accept_rate":75,"display_name":"AlwaysLearning"},"score":0,"creation_date":1689631490,"post_id":76706311,"comment_id":135238364,"body_markdown":"If you&#39;re using JDBC connection string URLs then have you tried telling it which database to use by specifying `jdbc:sqlserver://serverNameOrIpAddress;databaseName=NameOfDatabase2;user=yourLoginName;password=yourLoginPassword`?","body":"If you&#39;re using JDBC connection string URLs then have you tried telling it which database to use by specifying <code>jdbc:sqlserver:&#47;&#47;serverNameOrIpAddress;databaseName=NameOfDa&zwnj;&#8203;tabase2;user=yourLog&zwnj;&#8203;inName;password=your&zwnj;&#8203;LoginPassword</code>?"},{"owner":{"account_id":1000240,"reputation":27,"user_id":7907880,"display_name":"user7907880"},"score":0,"creation_date":1690310362,"post_id":76706311,"comment_id":135334780,"body_markdown":"I agree with @Thomas A. In my situation this particular Instances was not set up correctly. Also I did not have a user account for this DB and ran into issues due to it. I was able to access the first DB/instance without any issues as I had a user account for that DB and was set up correctly.","body":"I agree with @Thomas A. In my situation this particular Instances was not set up correctly. Also I did not have a user account for this DB and ran into issues due to it. I was able to access the first DB/instance without any issues as I had a user account for that DB and was set up correctly."},{"owner":{"account_id":1000240,"reputation":27,"user_id":7907880,"display_name":"user7907880"},"score":0,"creation_date":1690310418,"post_id":76706311,"comment_id":135334788,"body_markdown":"Agree with @Always learning: the solution is provided in the Answer below:  Databases are seperate securables. i.e.: just because you have a login that can access an SQL Server instance doesn&#39;t mean that the login has access to all of the databases that are resident there. \nAlwaysLearning","body":"Agree with @Always learning: the solution is provided in the Answer below:  Databases are seperate securables. i.e.: just because you have a login that can access an SQL Server instance doesn&#39;t mean that the login has access to all of the databases that are resident there.  AlwaysLearning"}],"answers":[{"tags":[],"owner":{"account_id":1000240,"reputation":27,"user_id":7907880,"display_name":"user7907880"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690310120,"creation_date":1690310120,"answer_id":76765623,"question_id":76706311,"body_markdown":"This question can be marked as answered.\r\n\r\nI found out what the real issue was. I realized that while connecting to the server, the Master DB was set as the default. Then providing an instance name in the connection string gave an error that the database cannot be found. Connecting to the server and providing blank for an instance name, connects to the Master DB and obviously cannot find the table that you are trying to query. The DBA had to change the setting (change the default DB). In my case since this was an old DB trying to get hold of the credentials for sa was a challenge!","title":"Java Database connects to the master only","body":"<p>This question can be marked as answered.</p>\n<p>I found out what the real issue was. I realized that while connecting to the server, the Master DB was set as the default. Then providing an instance name in the connection string gave an error that the database cannot be found. Connecting to the server and providing blank for an instance name, connects to the Master DB and obviously cannot find the table that you are trying to query. The DBA had to change the setting (change the default DB). In my case since this was an old DB trying to get hold of the credentials for sa was a challenge!</p>\n"}],"owner":{"account_id":1000240,"reputation":27,"user_id":7907880,"display_name":"user7907880"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":50,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1690310120,"creation_date":1689610150,"question_id":76706311,"body_markdown":"I have a java application that needs to connect to 2 databases on the same server. \r\nThe first one works fine when I connect using server/databasename/userid/password as I connect to the server and a specific database instance.\r\n\r\nThe second data base is set up on the same server but through SSMS I connect only connect to the server and it automatically connects me to Database2. i.e. I use \r\n```none\r\nServer Type: Database Engine\r\nSerevrName: xxx.yyy.z.1\r\nAuthentication SQL Server Authentication\r\nLogin:\r\npassword:\r\n```\r\nThis works fine in SSMS, recognizes all the tables etc.\r\nBut if I use ServerName/databaseName, I get an error that the database cannot be found.\r\nServer Type: Database Engine\r\n```\r\nSerevrName: xxx.yyy.z.1/Database2\r\nAuthentication SQL Server Authentication\r\nLogin:\r\npassword:\r\n```\r\nSo similarly in java I cannot use the instance name. I leave the database blank. It conencts to master and I get a object not found error. If I change my query to include the database select * from database2.dbo.table, also I am getting an error.\r\n\r\nI am not sure how to use and connect to Dataabse2, like I can do it in sql.\r\nUSE Database 2;\r\nGO;\r\n\r\nThis database is created on a SQL Server 2012 and is very old. None of the people who set this up are with us the current time. \r\n\r\nAny help with connecting to the second database will help. \r\nThanks, \r\n\r\n","title":"Java Database connects to the master only","body":"<p>I have a java application that needs to connect to 2 databases on the same server.\nThe first one works fine when I connect using server/databasename/userid/password as I connect to the server and a specific database instance.</p>\n<p>The second data base is set up on the same server but through SSMS I connect only connect to the server and it automatically connects me to Database2. i.e. I use</p>\n<pre class=\"lang-none prettyprint-override\"><code>Server Type: Database Engine\nSerevrName: xxx.yyy.z.1\nAuthentication SQL Server Authentication\nLogin:\npassword:\n</code></pre>\n<p>This works fine in SSMS, recognizes all the tables etc.\nBut if I use ServerName/databaseName, I get an error that the database cannot be found.\nServer Type: Database Engine</p>\n<pre><code>SerevrName: xxx.yyy.z.1/Database2\nAuthentication SQL Server Authentication\nLogin:\npassword:\n</code></pre>\n<p>So similarly in java I cannot use the instance name. I leave the database blank. It conencts to master and I get a object not found error. If I change my query to include the database select * from database2.dbo.table, also I am getting an error.</p>\n<p>I am not sure how to use and connect to Dataabse2, like I can do it in sql.\nUSE Database 2;\nGO;</p>\n<p>This database is created on a SQL Server 2012 and is very old. None of the people who set this up are with us the current time.</p>\n<p>Any help with connecting to the second database will help.\nThanks,</p>\n"},{"tags":["java","spring","spring-boot","spring-security"],"comments":[{"owner":{"account_id":2064278,"reputation":13138,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":1,"creation_date":1690275230,"post_id":76760090,"comment_id":135326978,"body_markdown":"You are trying to use the jwt as a session holder. Thats not how you should use JWT, the roles should be inserted into the JWT, by the authorization server when it creates the JWT, and userdetails is used for session based login. You are trying to mix two different login types. If you need specific info you use the id in the jwt and do a lookup for that specific endpoint. Not use userdetsilsservice.","body":"You are trying to use the jwt as a session holder. Thats not how you should use JWT, the roles should be inserted into the JWT, by the authorization server when it creates the JWT, and userdetails is used for session based login. You are trying to mix two different login types. If you need specific info you use the id in the jwt and do a lookup for that specific endpoint. Not use userdetsilsservice."},{"owner":{"account_id":4038668,"reputation":108,"user_id":3322142,"display_name":"dragontrainer"},"score":0,"creation_date":1690275654,"post_id":76760090,"comment_id":135327089,"body_markdown":"@Toerktumlare Thank you for your response. A requirement is that I manage the roles on my side. Is it correct to use a JwtAuthenticationConverter to add additional authorities to the security context, like I did?\n\nIf using UserDetails in this context is not recommended, I can live with it. I thought it&#39;s a convention to configure it too, no matter if we use JWTs or not. Thanks!","body":"@Toerktumlare Thank you for your response. A requirement is that I manage the roles on my side. Is it correct to use a JwtAuthenticationConverter to add additional authorities to the security context, like I did?  If using UserDetails in this context is not recommended, I can live with it. I thought it&#39;s a convention to configure it too, no matter if we use JWTs or not. Thanks!"},{"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"score":1,"creation_date":1690279417,"post_id":76760090,"comment_id":135327898,"body_markdown":"There should be some way to add private claims to access tokens in your authorisation server, and it would be more efficient to fetch these roles from  DB only once per token issuance rather than for each and every incoming request to your resource server(s). I advise that you expose user roles on a REST endpoint and configure your authorization server to call this endpoint (with client_credentials) and add the result to access and ID tokens private claims. Configuring a `Converter&lt;Jwt, JwtAuthenticationToken&gt;` in resource server(s) should then be straight forward.","body":"There should be some way to add private claims to access tokens in your authorisation server, and it would be more efficient to fetch these roles from  DB only once per token issuance rather than for each and every incoming request to your resource server(s). I advise that you expose user roles on a REST endpoint and configure your authorization server to call this endpoint (with client_credentials) and add the result to access and ID tokens private claims. Configuring a <code>Converter&lt;Jwt, JwtAuthenticationToken&gt;</code> in resource server(s) should then be straight forward."},{"owner":{"account_id":4038668,"reputation":108,"user_id":3322142,"display_name":"dragontrainer"},"score":0,"creation_date":1690283564,"post_id":76760090,"comment_id":135328703,"body_markdown":"@ch4mp Thank you! I&#39;m not sure it&#39;s possible to configure it this way since I&#39;m using Azure for authentication and I&#39;m not aware of such a feature in Azure to allow me to dynamically load the user roles when issuing an access token. Also, performance is not really an issue. I&#39;d rather want to have UserDetails implemented. Any help with this? Thanks!","body":"@ch4mp Thank you! I&#39;m not sure it&#39;s possible to configure it this way since I&#39;m using Azure for authentication and I&#39;m not aware of such a feature in Azure to allow me to dynamically load the user roles when issuing an access token. Also, performance is not really an issue. I&#39;d rather want to have UserDetails implemented. Any help with this? Thanks!"},{"owner":{"account_id":2064278,"reputation":13138,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":0,"creation_date":1690287677,"post_id":76760090,"comment_id":135329583,"body_markdown":"`I&#39;d rather want to have UserDetails implemented` were we not clear? UserDetails is used for form login scenarios, not JWT. You are trying to build a custom security solution which is bad practice. Im not going to participate in teaching bad practices and unsecure solutions. And you should adhere to best security practices.","body":"<code>I&#39;d rather want to have UserDetails implemented</code> were we not clear? UserDetails is used for form login scenarios, not JWT. You are trying to build a custom security solution which is bad practice. Im not going to participate in teaching bad practices and unsecure solutions. And you should adhere to best security practices."},{"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"score":0,"creation_date":1690303002,"post_id":76760090,"comment_id":135333330,"body_markdown":"First, choosing the less efficient solution frequently is a bad choice, and professionally unacceptable. Second, you should ask the question to Google rather than writing &quot;I&#39;m not aware of such a feature in Azure&quot;: https://learn.microsoft.com/en-us/azure/active-directory-b2c/add-api-connector-token-enrichment?pivots=b2c-user-flow","body":"First, choosing the less efficient solution frequently is a bad choice, and professionally unacceptable. Second, you should ask the question to Google rather than writing &quot;I&#39;m not aware of such a feature in Azure&quot;: <a href=\"https://learn.microsoft.com/en-us/azure/active-directory-b2c/add-api-connector-token-enrichment?pivots=b2c-user-flow\" rel=\"nofollow noreferrer\">learn.microsoft.com/en-us/azure/active-directory-b2c/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690309927,"creation_date":1690306020,"answer_id":76765194,"question_id":76760090,"body_markdown":"It is feasible to wire a JPA repository in an authentication converter bean (I do it [here][1] for instance), but **it is a bad practice which should be reserved to cases where you can&#39;t set access token private claims on the authorization server and where you can&#39;t use another (more configurable) authorization server in front of it**. In Keycloak, you do this using &quot;[mappers][2]&quot;, in Auth0, you write &quot;[actions][3]&quot;, in Azure, you use &quot;[API connectors][4]&quot;, etc.\r\n\r\nIt is much more efficient to fetch roles from DB on the authorization server once per token issuance, rather than for each incoming request on resource server(s). You could mitigate that with caches, but creating, maintaining and debugging caches (shared caches in a distributed environment) is always a pain.\r\n\r\nDetails of a working solution with an authorities converter fetching roles from DB (but again, if you do that, my bet is you&#39;ll regret it sooner or later):\r\n```java\r\nstatic interface AuthoritiesConverter extends Converter&lt;Jwt, Set&lt;SimpleGrantedAuthority&gt;&gt; {\r\n}\r\n\r\nstatic interface AuthenticationConverter extends Converter&lt;Jwt, JwtAuthenticationToken&gt; {\r\n}\r\n\r\n@Component\r\n@RequiredArgsConstructor\r\npublic static class PersistedGrantedAuthoritiesRetriever implements AuthoritiesConverter {\r\n\tprivate final UserAuthorityRepository authoritiesRepo;\r\n\r\n\t@Override\r\n\t@Transactional(readOnly = true)\r\n\tpublic Set&lt;SimpleGrantedAuthority&gt; convert(Jwt jwt) {\r\n\t\tfinal Collection&lt;UserAuthority&gt; authorities = authoritiesRepo.findBySubject(jwt.getSubject());\r\n\r\n\t\treturn authorities.stream().map(UserAuthority::getAuthority).map(SimpleGrantedAuthority::new).collect(Collectors.toSet());\r\n\t}\r\n}\r\n\r\n@Component\r\n@RequiredArgsConstructor\r\npublic static class JpaAuthenticationConverter implements AuthenticationConverter {\r\n\tprivate final Converter&lt;String, ? extends Collection&lt;? extends GrantedAuthority&gt;&gt; authoritiesConverter;\r\n\r\n\t@Override\r\n\tpublic JwtAuthenticationToken convert(Jwt jwt) {\r\n\t\treturn new JwtAuthenticationToken(jwt, authoritiesConverter.convert(jwt));\r\n\t}\r\n}\r\n\r\n@EnableWebSecurity\r\n@EnableMethodSecurity\r\n@Configuration\r\npublic static class WebSecurityConfig {\r\n\r\n    @Bean\r\n    SecurityFilterChain filterChain(\r\n            HttpSecurity http,\r\n            Converter&lt;Jwt, ? extends AbstractAuthenticationToken&gt; authenticationConverter) throws Exception {\r\n\r\n        http.oauth2ResourceServer(oauth2 -&gt; oauth2.jwt(jwt -&gt; jwt.jwtAuthenticationConverter(authenticationConverter)));\r\n        \r\n        ...\r\n\r\n    }\r\n}\r\n```\r\n\r\n\r\n\r\n  [1]: https://github.com/ch4mpy/spring-addons/tree/master/samples/webmvc-jwt-default-jpa-authorities\r\n  [2]: https://github.com/ch4mpy/user-proxies/tree/main/api\r\n  [3]: https://auth0.com/docs/customize/actions\r\n  [4]: https://learn.microsoft.com/en-us/azure/active-directory-b2c/add-api-connector-token-enrichment?pivots=b2c-user-flow","title":"Spring Security 6 - Access UserDetails in a OAuth2ResourceServer","body":"<p>It is feasible to wire a JPA repository in an authentication converter bean (I do it <a href=\"https://github.com/ch4mpy/spring-addons/tree/master/samples/webmvc-jwt-default-jpa-authorities\" rel=\"nofollow noreferrer\">here</a> for instance), but <strong>it is a bad practice which should be reserved to cases where you can't set access token private claims on the authorization server and where you can't use another (more configurable) authorization server in front of it</strong>. In Keycloak, you do this using &quot;<a href=\"https://github.com/ch4mpy/user-proxies/tree/main/api\" rel=\"nofollow noreferrer\">mappers</a>&quot;, in Auth0, you write &quot;<a href=\"https://auth0.com/docs/customize/actions\" rel=\"nofollow noreferrer\">actions</a>&quot;, in Azure, you use &quot;<a href=\"https://learn.microsoft.com/en-us/azure/active-directory-b2c/add-api-connector-token-enrichment?pivots=b2c-user-flow\" rel=\"nofollow noreferrer\">API connectors</a>&quot;, etc.</p>\n<p>It is much more efficient to fetch roles from DB on the authorization server once per token issuance, rather than for each incoming request on resource server(s). You could mitigate that with caches, but creating, maintaining and debugging caches (shared caches in a distributed environment) is always a pain.</p>\n<p>Details of a working solution with an authorities converter fetching roles from DB (but again, if you do that, my bet is you'll regret it sooner or later):</p>\n<pre class=\"lang-java prettyprint-override\"><code>static interface AuthoritiesConverter extends Converter&lt;Jwt, Set&lt;SimpleGrantedAuthority&gt;&gt; {\n}\n\nstatic interface AuthenticationConverter extends Converter&lt;Jwt, JwtAuthenticationToken&gt; {\n}\n\n@Component\n@RequiredArgsConstructor\npublic static class PersistedGrantedAuthoritiesRetriever implements AuthoritiesConverter {\n    private final UserAuthorityRepository authoritiesRepo;\n\n    @Override\n    @Transactional(readOnly = true)\n    public Set&lt;SimpleGrantedAuthority&gt; convert(Jwt jwt) {\n        final Collection&lt;UserAuthority&gt; authorities = authoritiesRepo.findBySubject(jwt.getSubject());\n\n        return authorities.stream().map(UserAuthority::getAuthority).map(SimpleGrantedAuthority::new).collect(Collectors.toSet());\n    }\n}\n\n@Component\n@RequiredArgsConstructor\npublic static class JpaAuthenticationConverter implements AuthenticationConverter {\n    private final Converter&lt;String, ? extends Collection&lt;? extends GrantedAuthority&gt;&gt; authoritiesConverter;\n\n    @Override\n    public JwtAuthenticationToken convert(Jwt jwt) {\n        return new JwtAuthenticationToken(jwt, authoritiesConverter.convert(jwt));\n    }\n}\n\n@EnableWebSecurity\n@EnableMethodSecurity\n@Configuration\npublic static class WebSecurityConfig {\n\n    @Bean\n    SecurityFilterChain filterChain(\n            HttpSecurity http,\n            Converter&lt;Jwt, ? extends AbstractAuthenticationToken&gt; authenticationConverter) throws Exception {\n\n        http.oauth2ResourceServer(oauth2 -&gt; oauth2.jwt(jwt -&gt; jwt.jwtAuthenticationConverter(authenticationConverter)));\n        \n        ...\n\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":4038668,"reputation":108,"user_id":3322142,"display_name":"dragontrainer"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":927,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1690309927,"creation_date":1690267814,"question_id":76760090,"body_markdown":"I&#39;m trying to set up an OAuth2Resource Server using Springboot 3 and Spring Security 6.\r\n\r\nI was able to configure authentication correctly; I implemented a custom jwt converter, which fetches the user&#39;s authorities from my database and assigns them to the security context. \r\n```java\r\nclass CustomAuthenticationConverter implements Converter&lt;Jwt, AbstractAuthenticationToken&gt; {\r\n\r\n    AzureUserService azureUserService;\r\n\r\n    public CustomAuthenticationConverter(AzureUserService azureUserService) {\r\n        this.azureUserService = azureUserService;\r\n    }\r\n\r\n    public AbstractAuthenticationToken convert(@NonNull Jwt jwt) {\r\n        // Currently, creates a user in the database, if they don&#39;t exist yet. Guaranteed to get a user.\r\n        User user = azureUserService.retrieveOrCreateUserFromJwt(jwt);\r\n        JwtAuthenticationToken authentication = new JwtAuthenticationToken(jwt, user.getAuthorities(), user.getId());\r\n        SecurityContextHolder.getContext().setAuthentication(authentication);\r\n        return authentication;\r\n    }\r\n}\r\n```\r\n\r\nNow I can protect my routes using authorities. Next step: I&#39;d like to be able to access inside of some route the information about the current user. \r\nHowever, even after registering my user details service class:\r\n\r\n```java\r\n@Bean\r\npublic DaoAuthenticationProvider authenticationProvider() {\r\n    DaoAuthenticationProvider provider = new DaoAuthenticationProvider();\r\n    provider.setUserDetailsService(userDetailsService);\r\n    return provider;\r\n}\r\n```\r\n\r\nI cannot access the UserDetails object in my route:\r\n```java\r\n    @GetMapping(&quot;/api/admin/you&quot;)\r\n    public String showProfile(@AuthenticationPrincipal CustomUserDetails userDetails) {\r\n        return &quot;Details&quot;+ userDetails;\r\n\r\n    }\r\n```\r\n\r\nThis will return &quot;Details null&quot;.\r\n\r\nI&#39;m not sure if UserDetails is not accessible because I&#39;m using this application just as an OAuthResource Server or I haven&#39;t configured it correctly.\r\n\r\nThe implementation of my UserDetails class:\r\n```java\r\n\r\npublic class CustomUserDetails implements UserDetails {\r\n\r\n    private final User user; // This is your own User entity class\r\n\r\n    public CustomUserDetails(User user) {\r\n        this.user = user;\r\n    }\r\n\r\n    @Override\r\n    public Collection&lt;? extends GrantedAuthority&gt; getAuthorities() {\r\n        return user.getAuthorities();\r\n    }\r\n\r\n    // We use OAuth2, hence no need for password\r\n    @Override\r\n    public String getPassword() {\r\n        return null;\r\n    }\r\n\r\n    @Override\r\n    public String getUsername() {\r\n        return user.getId();\r\n    }\r\n\r\n    @Override\r\n    public boolean isAccountNonExpired() {\r\n        return true;\r\n    }\r\n\r\n    @Override\r\n    public boolean isAccountNonLocked() {\r\n        return true;\r\n    }\r\n\r\n    @Override\r\n    public boolean isCredentialsNonExpired() {\r\n        return true;\r\n    }\r\n\r\n    @Override\r\n    public boolean isEnabled() {\r\n        return user.getEnabled();\r\n    }\r\n\r\n    public User getUser() {\r\n        return user;\r\n    }\r\n}\r\n\r\n```\r\n\r\nand the service:\r\n\r\n```java\r\n@Transactional\r\n@Service\r\npublic class CustomUserDetailsService implements UserDetailsService {\r\n    private final UserRepository userRepository;\r\n\r\n    public CustomUserDetailsService(UserRepository userRepository) {\r\n        this.userRepository = userRepository;\r\n    }\r\n\r\n    // Note that Spring calls the unique user identifier &quot;username&quot;, but we&#39;re working with a unique identifier.\r\n    @Override\r\n    public CustomUserDetails loadUserByUsername(String username) throws UsernameNotFoundException {\r\n        Optional&lt;User&gt; optionalUser = userRepository.findById(username);\r\n\r\n        if (optionalUser.isPresent()) {\r\n            User user = optionalUser.get();\r\n            return new CustomUserDetails(user);\r\n        }\r\n        else {\r\n            throw new UsernameNotFoundException(&quot;User not found with id: &quot; + username);\r\n        }\r\n    }\r\n}\r\n\r\n```\r\n\r\nAlso, here is my SecurityConfiguration\r\n\r\n```java\r\n\r\n    @Bean\r\n    public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\r\n\r\n        // Create RequestMatchers out of the Strings\r\n        List&lt;RequestMatcher&gt; publicMatchers = Arrays.stream(publicPaths)\r\n                .map(AntPathRequestMatcher::new)\r\n                .collect(Collectors.toList());\r\n\r\n        // Apply configuration\r\n        http\r\n                .authenticationProvider(authenticationProvider())\r\n                .authorizeHttpRequests(authorizeRequests -&gt; {\r\n                    authorizeRequests\r\n\r\n                            // Allow public access to the routes specified in &#39;publicMatchers&#39; list\r\n                            .requestMatchers(request -&gt;\r\n                                    publicMatchers.stream().anyMatch(matcher -&gt; matcher.matches(request))\r\n                            ).permitAll()\r\n\r\n\r\n                            // Require authentication for all other routes.\r\n                            .anyRequest().authenticated();\r\n                })\r\n\r\n\r\n                // Configure the OAuth 2.0 resource server to use JWT tokens provided by Azure AD B2C\r\n                .oauth2ResourceServer(oauth2ResourceServer -&gt;\r\n                        oauth2ResourceServer\r\n                                .jwt(jwt -&gt;\r\n                                        // Set the location where the server can find the JSON Web Key Set (JWK Set).\r\n                                        // The JWK Set contains public keys. The server uses these public keys to\r\n                                        // validate the signatures of incoming JWTs, ensuring they were issued by a trusted authorization server.\r\n                                        // In this case, the URI of the JWK Set is provided by the &#39;jwkSetUri&#39; variable.\r\n                                        jwt.jwkSetUri(this.jwkSetUri)\r\n                                                .jwtAuthenticationConverter(customAuthenticationConverter())\r\n                                )\r\n                )\r\n                .userDetailsService(userDetailsService);\r\n\r\n        return http.build();\r\n    }\r\n\r\n```","title":"Spring Security 6 - Access UserDetails in a OAuth2ResourceServer","body":"<p>I'm trying to set up an OAuth2Resource Server using Springboot 3 and Spring Security 6.</p>\n<p>I was able to configure authentication correctly; I implemented a custom jwt converter, which fetches the user's authorities from my database and assigns them to the security context.</p>\n<pre class=\"lang-java prettyprint-override\"><code>class CustomAuthenticationConverter implements Converter&lt;Jwt, AbstractAuthenticationToken&gt; {\n\n    AzureUserService azureUserService;\n\n    public CustomAuthenticationConverter(AzureUserService azureUserService) {\n        this.azureUserService = azureUserService;\n    }\n\n    public AbstractAuthenticationToken convert(@NonNull Jwt jwt) {\n        // Currently, creates a user in the database, if they don't exist yet. Guaranteed to get a user.\n        User user = azureUserService.retrieveOrCreateUserFromJwt(jwt);\n        JwtAuthenticationToken authentication = new JwtAuthenticationToken(jwt, user.getAuthorities(), user.getId());\n        SecurityContextHolder.getContext().setAuthentication(authentication);\n        return authentication;\n    }\n}\n</code></pre>\n<p>Now I can protect my routes using authorities. Next step: I'd like to be able to access inside of some route the information about the current user.\nHowever, even after registering my user details service class:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Bean\npublic DaoAuthenticationProvider authenticationProvider() {\n    DaoAuthenticationProvider provider = new DaoAuthenticationProvider();\n    provider.setUserDetailsService(userDetailsService);\n    return provider;\n}\n</code></pre>\n<p>I cannot access the UserDetails object in my route:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @GetMapping(&quot;/api/admin/you&quot;)\n    public String showProfile(@AuthenticationPrincipal CustomUserDetails userDetails) {\n        return &quot;Details&quot;+ userDetails;\n\n    }\n</code></pre>\n<p>This will return &quot;Details null&quot;.</p>\n<p>I'm not sure if UserDetails is not accessible because I'm using this application just as an OAuthResource Server or I haven't configured it correctly.</p>\n<p>The implementation of my UserDetails class:</p>\n<pre class=\"lang-java prettyprint-override\"><code>\npublic class CustomUserDetails implements UserDetails {\n\n    private final User user; // This is your own User entity class\n\n    public CustomUserDetails(User user) {\n        this.user = user;\n    }\n\n    @Override\n    public Collection&lt;? extends GrantedAuthority&gt; getAuthorities() {\n        return user.getAuthorities();\n    }\n\n    // We use OAuth2, hence no need for password\n    @Override\n    public String getPassword() {\n        return null;\n    }\n\n    @Override\n    public String getUsername() {\n        return user.getId();\n    }\n\n    @Override\n    public boolean isAccountNonExpired() {\n        return true;\n    }\n\n    @Override\n    public boolean isAccountNonLocked() {\n        return true;\n    }\n\n    @Override\n    public boolean isCredentialsNonExpired() {\n        return true;\n    }\n\n    @Override\n    public boolean isEnabled() {\n        return user.getEnabled();\n    }\n\n    public User getUser() {\n        return user;\n    }\n}\n\n</code></pre>\n<p>and the service:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Transactional\n@Service\npublic class CustomUserDetailsService implements UserDetailsService {\n    private final UserRepository userRepository;\n\n    public CustomUserDetailsService(UserRepository userRepository) {\n        this.userRepository = userRepository;\n    }\n\n    // Note that Spring calls the unique user identifier &quot;username&quot;, but we're working with a unique identifier.\n    @Override\n    public CustomUserDetails loadUserByUsername(String username) throws UsernameNotFoundException {\n        Optional&lt;User&gt; optionalUser = userRepository.findById(username);\n\n        if (optionalUser.isPresent()) {\n            User user = optionalUser.get();\n            return new CustomUserDetails(user);\n        }\n        else {\n            throw new UsernameNotFoundException(&quot;User not found with id: &quot; + username);\n        }\n    }\n}\n\n</code></pre>\n<p>Also, here is my SecurityConfiguration</p>\n<pre class=\"lang-java prettyprint-override\"><code>\n    @Bean\n    public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\n\n        // Create RequestMatchers out of the Strings\n        List&lt;RequestMatcher&gt; publicMatchers = Arrays.stream(publicPaths)\n                .map(AntPathRequestMatcher::new)\n                .collect(Collectors.toList());\n\n        // Apply configuration\n        http\n                .authenticationProvider(authenticationProvider())\n                .authorizeHttpRequests(authorizeRequests -&gt; {\n                    authorizeRequests\n\n                            // Allow public access to the routes specified in 'publicMatchers' list\n                            .requestMatchers(request -&gt;\n                                    publicMatchers.stream().anyMatch(matcher -&gt; matcher.matches(request))\n                            ).permitAll()\n\n\n                            // Require authentication for all other routes.\n                            .anyRequest().authenticated();\n                })\n\n\n                // Configure the OAuth 2.0 resource server to use JWT tokens provided by Azure AD B2C\n                .oauth2ResourceServer(oauth2ResourceServer -&gt;\n                        oauth2ResourceServer\n                                .jwt(jwt -&gt;\n                                        // Set the location where the server can find the JSON Web Key Set (JWK Set).\n                                        // The JWK Set contains public keys. The server uses these public keys to\n                                        // validate the signatures of incoming JWTs, ensuring they were issued by a trusted authorization server.\n                                        // In this case, the URI of the JWK Set is provided by the 'jwkSetUri' variable.\n                                        jwt.jwkSetUri(this.jwkSetUri)\n                                                .jwtAuthenticationConverter(customAuthenticationConverter())\n                                )\n                )\n                .userDetailsService(userDetailsService);\n\n        return http.build();\n    }\n\n</code></pre>\n"},{"tags":["java","hibernate","maven","hbm2java"],"answers":[{"tags":[],"owner":{"account_id":28009875,"reputation":1,"user_id":21392595,"display_name":"ulil"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1678751053,"creation_date":1678751053,"answer_id":75727864,"question_id":75581489,"body_markdown":"I&#39;ve been searching for this as well to find\r\ngroupId org.hibernate.tool\r\nartifactId hibernate-tools-maven\r\nversion 6.1.7.Final\r\ndoing it","title":"Ensure that hbm2java creates Entity classes that use jakarta.persistence rather than javax.persistence?","body":"<p>I've been searching for this as well to find\ngroupId org.hibernate.tool\nartifactId hibernate-tools-maven\nversion 6.1.7.Final\ndoing it</p>\n"},{"tags":[],"owner":{"account_id":21323309,"reputation":11,"user_id":15696108,"display_name":"Ramanandafy Lova Mialy"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1690309923,"creation_date":1690309923,"answer_id":76765600,"question_id":75581489,"body_markdown":"it works with hbernate-tools-maven. I use the latest version on maven central: 6.2.6.Final\r\nThis is the definition of the plugin tag inside my pom.xml\r\n\r\n       &lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.hibernate.tool&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;hibernate-tools-maven&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;6.2.6.Final&lt;/version&gt;\r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t&lt;packageName&gt;com.example.entity&lt;/packageName&gt;\r\n\t\t\t\t\t&lt;revengFile&gt;src/main/resources/hibernate.reveng.xml&lt;/revengFile&gt;\r\n\t\t\t\t\t&lt;outputDirectory&gt;src/main/java&lt;/outputDirectory&gt;\r\n\t\t\t\t\t&lt;ejb3&gt;true&lt;/ejb3&gt;\r\n\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t\t&lt;dependencies&gt;\r\n\t\t\t\t\t&lt;dependency&gt;\r\n\t\t\t\t\t\t&lt;groupId&gt;org.hibernate.tool&lt;/groupId&gt;\r\n\t\t\t\t\t\t&lt;artifactId&gt;hibernate-tools-orm&lt;/artifactId&gt;\r\n\t\t\t\t\t\t&lt;version&gt;6.2.6.Final&lt;/version&gt;\r\n\t\t\t\t\t&lt;/dependency&gt;\r\n\t\t\t\t\t&lt;dependency&gt;\r\n\t\t\t\t\t\t&lt;groupId&gt;com.h2database&lt;/groupId&gt;\r\n\t\t\t\t\t\t&lt;artifactId&gt;h2&lt;/artifactId&gt;\r\n\t\t\t\t\t\t&lt;version&gt;2.1.214&lt;/version&gt;\r\n\t\t\t\t\t&lt;/dependency&gt;\r\n\t\t\t\t&lt;/dependencies&gt;\r\n\t\t\t\t&lt;executions&gt;\r\n\t\t\t\t\t&lt;execution&gt;\r\n\t\t\t\t\t\t&lt;id&gt;entity-generation&lt;/id&gt;\r\n\t\t\t\t\t\t&lt;phase&gt;none&lt;/phase&gt;\r\n\t\t\t\t\t\t&lt;goals&gt;\r\n\t\t\t\t\t\t\t&lt;goal&gt;hbm2java&lt;/goal&gt;\r\n\t\t\t\t\t\t&lt;/goals&gt;\r\n\t\t\t\t\t&lt;/execution&gt;\r\n\t\t\t\t&lt;/executions&gt;\r\n\t\t&lt;/plugin&gt;\r\n\r\nhibernate.properties\r\n\r\n    hibernate.dialect = org.hibernate.dialect.H2Dialect\r\n    hibernate.connection.driver_class = org.h2.Driver\r\n    hibernate.connection.url = jdbc:h2:file:~/my-db;MODE=MySQL\r\n    hibernate.connection.username = sa\r\n    hibernate.connection.password =\r\n    hibernate.hbm2ddl.auto = update\r\n\r\nhibernate.reveng.xml\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;!DOCTYPE hibernate-reverse-engineering PUBLIC\r\n        &quot;-//Hibernate/Hibernate Reverse Engineering DTD 3.0//EN&quot;\r\n        &quot;http://www.hibernate.org/dtd/hibernate-reverse-engineering-3.0.dtd&quot; &gt;\r\n\r\n    &lt;hibernate-reverse-engineering&gt;\r\n\r\n       &lt;schema-selection match-catalog=&quot;CAMUNDA-DB&quot; match-schema=&quot;PUBLIC&quot;/&gt;\r\n       &lt;type-mapping&gt;\r\n           &lt;!-- jdbc-type is name for java.sql.Types --&gt;\r\n           &lt;sql-type jdbc-type=&quot;VARCHAR&quot; hibernate-type=&quot;java.lang.String&quot; /&gt;\r\n           &lt;sql-type jdbc-type=&quot;DOUBLE&quot;  precision=&#39;4&#39; hibernate- \r\n            type=&quot;java.lang.Double&quot; /&gt;\r\n           &lt;sql-type jdbc-type=&quot;TIMESTAMP&quot;  hibernate- \r\n            type=&quot;java.time.LocalDateTime&quot; /&gt;\r\n       &lt;/type-mapping&gt;\r\n       &lt;table-filter match-name=&quot;flyway_schema_history&quot; exclude=&quot;true&quot;/&gt;\r\n\r\n    &lt;/hibernate-reverse-engineering&gt;\r\n\r\nmy command line for generating entities classes:\r\n\r\n    mvn hibernate-tools:hbm2java","title":"Ensure that hbm2java creates Entity classes that use jakarta.persistence rather than javax.persistence?","body":"<p>it works with hbernate-tools-maven. I use the latest version on maven central: 6.2.6.Final\nThis is the definition of the plugin tag inside my pom.xml</p>\n<pre><code>   &lt;plugin&gt;\n            &lt;groupId&gt;org.hibernate.tool&lt;/groupId&gt;\n            &lt;artifactId&gt;hibernate-tools-maven&lt;/artifactId&gt;\n            &lt;version&gt;6.2.6.Final&lt;/version&gt;\n            &lt;configuration&gt;\n                &lt;packageName&gt;com.example.entity&lt;/packageName&gt;\n                &lt;revengFile&gt;src/main/resources/hibernate.reveng.xml&lt;/revengFile&gt;\n                &lt;outputDirectory&gt;src/main/java&lt;/outputDirectory&gt;\n                &lt;ejb3&gt;true&lt;/ejb3&gt;\n            &lt;/configuration&gt;\n            &lt;dependencies&gt;\n                &lt;dependency&gt;\n                    &lt;groupId&gt;org.hibernate.tool&lt;/groupId&gt;\n                    &lt;artifactId&gt;hibernate-tools-orm&lt;/artifactId&gt;\n                    &lt;version&gt;6.2.6.Final&lt;/version&gt;\n                &lt;/dependency&gt;\n                &lt;dependency&gt;\n                    &lt;groupId&gt;com.h2database&lt;/groupId&gt;\n                    &lt;artifactId&gt;h2&lt;/artifactId&gt;\n                    &lt;version&gt;2.1.214&lt;/version&gt;\n                &lt;/dependency&gt;\n            &lt;/dependencies&gt;\n            &lt;executions&gt;\n                &lt;execution&gt;\n                    &lt;id&gt;entity-generation&lt;/id&gt;\n                    &lt;phase&gt;none&lt;/phase&gt;\n                    &lt;goals&gt;\n                        &lt;goal&gt;hbm2java&lt;/goal&gt;\n                    &lt;/goals&gt;\n                &lt;/execution&gt;\n            &lt;/executions&gt;\n    &lt;/plugin&gt;\n</code></pre>\n<p>hibernate.properties</p>\n<pre><code>hibernate.dialect = org.hibernate.dialect.H2Dialect\nhibernate.connection.driver_class = org.h2.Driver\nhibernate.connection.url = jdbc:h2:file:~/my-db;MODE=MySQL\nhibernate.connection.username = sa\nhibernate.connection.password =\nhibernate.hbm2ddl.auto = update\n</code></pre>\n<p>hibernate.reveng.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;!DOCTYPE hibernate-reverse-engineering PUBLIC\n    &quot;-//Hibernate/Hibernate Reverse Engineering DTD 3.0//EN&quot;\n    &quot;http://www.hibernate.org/dtd/hibernate-reverse-engineering-3.0.dtd&quot; &gt;\n\n&lt;hibernate-reverse-engineering&gt;\n\n   &lt;schema-selection match-catalog=&quot;CAMUNDA-DB&quot; match-schema=&quot;PUBLIC&quot;/&gt;\n   &lt;type-mapping&gt;\n       &lt;!-- jdbc-type is name for java.sql.Types --&gt;\n       &lt;sql-type jdbc-type=&quot;VARCHAR&quot; hibernate-type=&quot;java.lang.String&quot; /&gt;\n       &lt;sql-type jdbc-type=&quot;DOUBLE&quot;  precision='4' hibernate- \n        type=&quot;java.lang.Double&quot; /&gt;\n       &lt;sql-type jdbc-type=&quot;TIMESTAMP&quot;  hibernate- \n        type=&quot;java.time.LocalDateTime&quot; /&gt;\n   &lt;/type-mapping&gt;\n   &lt;table-filter match-name=&quot;flyway_schema_history&quot; exclude=&quot;true&quot;/&gt;\n\n&lt;/hibernate-reverse-engineering&gt;\n</code></pre>\n<p>my command line for generating entities classes:</p>\n<pre><code>mvn hibernate-tools:hbm2java\n</code></pre>\n"}],"owner":{"account_id":146653,"reputation":888,"user_id":357226,"accept_rate":75,"display_name":"Lawrence Tierney"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":222,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1690309923,"creation_date":1677506727,"question_id":75581489,"body_markdown":"When I run hbm2java I would like it to create Entity classes that:\r\n\r\n    import jakarta.persistence\r\n\r\nrather than (as currently)\r\n\r\n    import javax.persistence\r\n\r\nI am invoking hbm2java from a Maven build thus:\r\n```\r\n&lt;plugin&gt;\r\n    &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n    &lt;artifactId&gt;hibernate-tools-maven-plugin&lt;/artifactId&gt;\r\n    &lt;version&gt;5.6.15.Final&lt;/version&gt;\r\n    &lt;executions&gt;\r\n        &lt;execution&gt;\r\n           &lt;phase&gt;generate-sources&lt;/phase&gt;\r\n           &lt;goals&gt;\r\n               &lt;goal&gt;hbm2java&lt;/goal&gt;\r\n           &lt;/goals&gt;\r\n        &lt;/execution&gt;\r\n     &lt;/executions&gt;\r\n     &lt;configuration&gt;\r\n         &lt;packageName&gt;PACKAGE_NAME&lt;/packageName&gt;\r\n         &lt;outputDirectory&gt;OUTPUT_DIR&lt;/outputDirectory&gt;\r\n         &lt;ejb3&gt;true&lt;/ejb3&gt;\r\n     &lt;/configuration&gt;\r\n    &lt;dependencies&gt;\r\n       &lt;dependency&gt;\r\n           &lt;groupId&gt;com.mysql&lt;/groupId&gt;\r\n           &lt;artifactId&gt;mysql-connector-j&lt;/artifactId&gt;\r\n           &lt;version&gt;8.0.32&lt;/version&gt;\r\n       &lt;/dependency&gt;\r\n       &lt;!-- I thought the following dependency would work but it didnt.. --&gt;\r\n       &lt;!--&lt;dependency&gt;\r\n           &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n           &lt;artifactId&gt;hibernate-jpamodelgen-jakarta&lt;/artifactId&gt;\r\n           &lt;version&gt;5.6.15.Final&lt;/version&gt;\r\n       &lt;/dependency&gt;--&gt;\r\n   &lt;/dependencies&gt;\r\n&lt;/plugin&gt;\r\n```\r\nWith hibernate.properties\r\n```\r\nhibernate.connection.url=jdbc:mysql://someserver\r\nhibernate.connection.username=username\r\nhibernate.connection.password=password\r\nhibernate.connection.driver_class=com.mysql.cj.jdbc.Driver\r\nhibernate.dialect=org.hibernate.dialect.MySQLDialect\r\n```","title":"Ensure that hbm2java creates Entity classes that use jakarta.persistence rather than javax.persistence?","body":"<p>When I run hbm2java I would like it to create Entity classes that:</p>\n<pre><code>import jakarta.persistence\n</code></pre>\n<p>rather than (as currently)</p>\n<pre><code>import javax.persistence\n</code></pre>\n<p>I am invoking hbm2java from a Maven build thus:</p>\n<pre><code>&lt;plugin&gt;\n    &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n    &lt;artifactId&gt;hibernate-tools-maven-plugin&lt;/artifactId&gt;\n    &lt;version&gt;5.6.15.Final&lt;/version&gt;\n    &lt;executions&gt;\n        &lt;execution&gt;\n           &lt;phase&gt;generate-sources&lt;/phase&gt;\n           &lt;goals&gt;\n               &lt;goal&gt;hbm2java&lt;/goal&gt;\n           &lt;/goals&gt;\n        &lt;/execution&gt;\n     &lt;/executions&gt;\n     &lt;configuration&gt;\n         &lt;packageName&gt;PACKAGE_NAME&lt;/packageName&gt;\n         &lt;outputDirectory&gt;OUTPUT_DIR&lt;/outputDirectory&gt;\n         &lt;ejb3&gt;true&lt;/ejb3&gt;\n     &lt;/configuration&gt;\n    &lt;dependencies&gt;\n       &lt;dependency&gt;\n           &lt;groupId&gt;com.mysql&lt;/groupId&gt;\n           &lt;artifactId&gt;mysql-connector-j&lt;/artifactId&gt;\n           &lt;version&gt;8.0.32&lt;/version&gt;\n       &lt;/dependency&gt;\n       &lt;!-- I thought the following dependency would work but it didnt.. --&gt;\n       &lt;!--&lt;dependency&gt;\n           &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n           &lt;artifactId&gt;hibernate-jpamodelgen-jakarta&lt;/artifactId&gt;\n           &lt;version&gt;5.6.15.Final&lt;/version&gt;\n       &lt;/dependency&gt;--&gt;\n   &lt;/dependencies&gt;\n&lt;/plugin&gt;\n</code></pre>\n<p>With hibernate.properties</p>\n<pre><code>hibernate.connection.url=jdbc:mysql://someserver\nhibernate.connection.username=username\nhibernate.connection.password=password\nhibernate.connection.driver_class=com.mysql.cj.jdbc.Driver\nhibernate.dialect=org.hibernate.dialect.MySQLDialect\n</code></pre>\n"},{"tags":["java","eclipse"],"answers":[{"comments":[{"owner":{"account_id":667533,"reputation":3441,"user_id":502012,"accept_rate":87,"display_name":"Roger"},"score":0,"creation_date":1292510656,"post_id":4461772,"comment_id":4875399,"body_markdown":"I can change the run configuration to only execute tests in a certain folder, and it works if I run it from the Configurations panel. But If I click on the root folder and go run as &gt; JUnit test it goes back to ignoring it.","body":"I can change the run configuration to only execute tests in a certain folder, and it works if I run it from the Configurations panel. But If I click on the root folder and go run as &gt; JUnit test it goes back to ignoring it."},{"owner":{"account_id":248551,"reputation":1347,"user_id":523980,"accept_rate":100,"display_name":"Riggy"},"score":0,"creation_date":1292510991,"post_id":4461772,"comment_id":4875480,"body_markdown":"I think dimitri is suggesting that you either create a new JUnit run configuration, so you&#39;ll instead do a run as -&gt; Run configurations and create a new junit run config. Perhaps create one for unit tests and one for integration. The run-time configs offer test classes and test methods to be used.","body":"I think dimitri is suggesting that you either create a new JUnit run configuration, so you&#39;ll instead do a run as -&gt; Run configurations and create a new junit run config. Perhaps create one for unit tests and one for integration. The run-time configs offer test classes and test methods to be used."},{"owner":{"account_id":62516,"reputation":20965,"user_id":185723,"accept_rate":89,"display_name":"dimitrisli"},"score":0,"creation_date":1292511673,"post_id":4461772,"comment_id":4875633,"body_markdown":"If you want to execute your test config quickly you can either: 1) visit the dropdown next to the Run As button (a circled triangle) where the most recent executions are being shown or 2) keep your Window&gt;Show View&gt;JUnit panel and rerun test or 3) hit Ctrl+F11 to rerun the last run execution.","body":"If you want to execute your test config quickly you can either: 1) visit the dropdown next to the Run As button (a circled triangle) where the most recent executions are being shown or 2) keep your Window&gt;Show View&gt;JUnit panel and rerun test or 3) hit Ctrl+F11 to rerun the last run execution."}],"tags":[],"owner":{"account_id":62516,"reputation":20965,"user_id":185723,"accept_rate":89,"display_name":"dimitrisli"},"comment_count":3,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1292509696,"creation_date":1292509696,"answer_id":4461772,"question_id":4461673,"body_markdown":"When you right click on the project directory and `Run As &gt; JUnit test` it&#39;s basically the relevant run configuration that is being triggered. Therefore go to `Run &gt; Run Configurations` and on the left panel see exactly what your JUnit configuration is actually doing and configure accordingly.","title":"Excluding JUnit tests in eclipse","body":"<p>When you right click on the project directory and <code>Run As &gt; JUnit test</code> it's basically the relevant run configuration that is being triggered. Therefore go to <code>Run &gt; Run Configurations</code> and on the left panel see exactly what your JUnit configuration is actually doing and configure accordingly.</p>\n"}],"owner":{"account_id":667533,"reputation":3441,"user_id":502012,"accept_rate":87,"display_name":"Roger"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4896,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"accepted_answer_id":4461772,"answer_count":1,"score":7,"last_activity_date":1690309832,"creation_date":1292509051,"question_id":4461673,"body_markdown":"I have a whole bunch of unit tests. I have placed them into suitable test suites. I would like to be able to click on the root directory and go run JUnit tests to execute all the tests. However, if I do this it runs all the tests AND then runs the testsuites. Therefore running all the tests again.\r\n\r\nIs there someway to exclude the testsuites in Eclipse?\r\nthanks\r\n\r\n","title":"Excluding JUnit tests in eclipse","body":"<p>Hey<br>\nI have a whole bunch of unit tests. I have placed them into suitable test suites. I would like to be able to click on the root directory and go run JUnit tests to execute all the tests. However, if I do this it runs all the tests AND then runs the testsuites. Therefore running all the tests again.</p>\n\n<p>Is there someway to exclude the testsuites in Eclipse?\nthanks</p>\n"},{"tags":["java","json","reactor-kafka"],"answers":[{"tags":[],"owner":{"account_id":11400015,"reputation":1904,"user_id":8357251,"display_name":"gdomo"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1690309807,"creation_date":1690309807,"answer_id":76765589,"question_id":76765099,"body_markdown":"Just use `Flux.mapNotNull`:\r\n\r\n        return kafkaReceiver.receive()\r\n                .mapNotNull(oneRecordWithJson -&gt; {\r\n                    // whatever\r\n                    return null; // record would be skipped\r\n                })","title":"How to do nothing when consuming invalid json using reactor kafka?","body":"<p>Just use <code>Flux.mapNotNull</code>:</p>\n<pre><code>    return kafkaReceiver.receive()\n            .mapNotNull(oneRecordWithJson -&gt; {\n                // whatever\n                return null; // record would be skipped\n            })\n</code></pre>\n"}],"owner":{"account_id":14482834,"reputation":3924,"user_id":10461625,"display_name":"PatPanda"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76765589,"answer_count":1,"score":0,"last_activity_date":1690309807,"creation_date":1690305347,"question_id":76765099,"body_markdown":"What I am trying to achieve:\r\n\r\nWith a Reactor Kafka Consumer, consume messages, and be able to &quot;do nothing&quot; when there is an error.\r\n\r\nThe message inside kafka is a JSON representation of ```Person```, the business flow is to convert it to ```person``` object.\r\n\r\nexample of message input: ```{&quot;name&quot;:&quot;John&quot;, &quot;age&quot;:30}```\r\n\r\nHowever, the following can happen:\r\n1 - it is a happy case, the json is well formed, I can convert it to Person with objectMapper.\r\n2 - it is a wrong json, ```JsonProcessingException```, I would like to just throw a runtime exception\r\n3 - the json is incomplete, like ```{&quot;name&quot;:&quot;John&quot;, &quot;ag``` for this case alone, I would like to ignore this case only. However, I am not able to just ignore the message.\r\n\r\nWhat did I try:\r\n\r\n```\r\nFlux&lt;Person&gt; consume() {\r\n        return kafkaReceiver.receive()\r\n                .map(oneRecordWithJson -&gt; {\r\n                    try {\r\n                        //regular flow, no issue, just transform an input to an output\r\n                        return objectMapper.readValue(oneRecordWithJson.value(), Person.class);\r\n                    } catch (JsonEOFException | JsonMappingException e) {\r\n                        // the json is broken in the first place, I do not want to do anything in this case.\r\n                        // I do not want to return a default bad object, I do not want to throw any exception\r\n                        // But here, I am required to return\r\n                        LOGGER.error(&quot;the input is broken, it is not even a valid json to begin with {}&quot;, oneRecordWithJson.value(), e);\r\n                        return null; //&lt;- no!\r\n                    } catch (JsonProcessingException e) {\r\n                        // this is bad, I do want to throw an exception here (which will stop the consumer, but that what is expected)\r\n                        throw new RuntimeException(e);\r\n                    }\r\n                })\r\n                .map(oneCorrectPerson -&gt; doSomething(oneCorrectPerson));\r\n    }\r\n```\r\n\r\nQuestion:\r\n\r\nHow to just ignore the case when the input is not well formed? Without having to throw an exception, returning a null, a default object, etc...","title":"How to do nothing when consuming invalid json using reactor kafka?","body":"<p>What I am trying to achieve:</p>\n<p>With a Reactor Kafka Consumer, consume messages, and be able to &quot;do nothing&quot; when there is an error.</p>\n<p>The message inside kafka is a JSON representation of <code>Person</code>, the business flow is to convert it to <code>person</code> object.</p>\n<p>example of message input: <code>{&quot;name&quot;:&quot;John&quot;, &quot;age&quot;:30}</code></p>\n<p>However, the following can happen:\n1 - it is a happy case, the json is well formed, I can convert it to Person with objectMapper.\n2 - it is a wrong json, <code>JsonProcessingException</code>, I would like to just throw a runtime exception\n3 - the json is incomplete, like <code>{&quot;name&quot;:&quot;John&quot;, &quot;ag</code> for this case alone, I would like to ignore this case only. However, I am not able to just ignore the message.</p>\n<p>What did I try:</p>\n<pre><code>Flux&lt;Person&gt; consume() {\n        return kafkaReceiver.receive()\n                .map(oneRecordWithJson -&gt; {\n                    try {\n                        //regular flow, no issue, just transform an input to an output\n                        return objectMapper.readValue(oneRecordWithJson.value(), Person.class);\n                    } catch (JsonEOFException | JsonMappingException e) {\n                        // the json is broken in the first place, I do not want to do anything in this case.\n                        // I do not want to return a default bad object, I do not want to throw any exception\n                        // But here, I am required to return\n                        LOGGER.error(&quot;the input is broken, it is not even a valid json to begin with {}&quot;, oneRecordWithJson.value(), e);\n                        return null; //&lt;- no!\n                    } catch (JsonProcessingException e) {\n                        // this is bad, I do want to throw an exception here (which will stop the consumer, but that what is expected)\n                        throw new RuntimeException(e);\n                    }\n                })\n                .map(oneCorrectPerson -&gt; doSomething(oneCorrectPerson));\n    }\n</code></pre>\n<p>Question:</p>\n<p>How to just ignore the case when the input is not well formed? Without having to throw an exception, returning a null, a default object, etc...</p>\n"},{"tags":["java","selenium-webdriver","automated-tests","cucumber","kibana"],"comments":[{"owner":{"account_id":4895787,"reputation":10858,"user_id":3945473,"display_name":"M.P. Korstanje"},"score":0,"creation_date":1690325334,"post_id":76765580,"comment_id":135337097,"body_markdown":"It&#39;s pretty useful if you want to figure out which tests get slower over time. Flake analysis is possible too if you&#39;re doing scheduled runs.","body":"It&#39;s pretty useful if you want to figure out which tests get slower over time. Flake analysis is possible too if you&#39;re doing scheduled runs."},{"owner":{"account_id":10489136,"reputation":2762,"user_id":7731623,"display_name":"Nandan A"},"score":0,"creation_date":1690372574,"post_id":76765580,"comment_id":135343662,"body_markdown":"That depends. I capture logs for every test run and save that file into cloud and writes the files location respective to date and time in data base. In my case, I can go and check any old logs. If you want a tool to track all logs together then you can go for it.","body":"That depends. I capture logs for every test run and save that file into cloud and writes the files location respective to date and time in data base. In my case, I can go and check any old logs. If you want a tool to track all logs together then you can go for it."}],"owner":{"account_id":24894125,"reputation":27,"user_id":18765607,"display_name":"Jano Marek"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":15,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690309677,"creation_date":1690309677,"question_id":76765580,"body_markdown":"I have a dilemma. I have a Cucumber-Java framework integrated with Jenkins. It is primarily sequential testing with a lot of different inputs. As an output, I have Extent Reports from Cucumber, and I&#39;m also running multiple jobs with different test sets (tags). Please tell me your honest opinion about whether it makes any sense to integrate it together with Kibana/Grafana. Is it really that beneficial, considering that it can provide historical trend analysis? Will this approach be meaningful in this case?","title":"Does Integration of DataDriven Test framework with kibana make sense?","body":"<p>I have a dilemma. I have a Cucumber-Java framework integrated with Jenkins. It is primarily sequential testing with a lot of different inputs. As an output, I have Extent Reports from Cucumber, and I'm also running multiple jobs with different test sets (tags). Please tell me your honest opinion about whether it makes any sense to integrate it together with Kibana/Grafana. Is it really that beneficial, considering that it can provide historical trend analysis? Will this approach be meaningful in this case?</p>\n"},{"tags":["java","spring-boot","gradle","intellij-idea","integration-testing"],"comments":[{"owner":{"account_id":1884162,"reputation":7056,"user_id":1703730,"display_name":"Bj&#248;rn Vester"},"score":0,"creation_date":1617653141,"post_id":66949242,"comment_id":118358723,"body_markdown":"That exact project structure is documented in the Gradle user guide [here](https://docs.gradle.org/current/userguide/java_testing.html#sec:configuring_java_integration_tests).","body":"That exact project structure is documented in the Gradle user guide <a href=\"https://docs.gradle.org/current/userguide/java_testing.html#sec:configuring_java_integration_tests\" rel=\"nofollow noreferrer\">here</a>."},{"owner":{"account_id":15412107,"reputation":61,"user_id":11118585,"display_name":"R TZ"},"score":0,"creation_date":1617680036,"post_id":66949242,"comment_id":118364485,"body_markdown":"@Bj&#248;rnVester thanks! I&#39;ve actually just found the solution you suggested in another forum and it&#39;s very close to what I need but it creates the module as &#39;Source&#39; instead of &#39;Test Source&#39; and it doesn&#39;t help me. \nThis seems to be a [known issue](https://stackoverflow.com/questions/36324424/defining-a-test-source-set-for-intellij-15-with-gradle).\n\nMy manager don&#39;t want me to spend a lot of time on it and told me to create both &#39;integrationTest&#39; and &#39;unitTest&#39; under &#39;test&#39; module in different packages. I don&#39;t like it but this seems to be something that works.","body":"@Bj&#248;rnVester thanks! I&#39;ve actually just found the solution you suggested in another forum and it&#39;s very close to what I need but it creates the module as &#39;Source&#39; instead of &#39;Test Source&#39; and it doesn&#39;t help me.  This seems to be a <a href=\"https://stackoverflow.com/questions/36324424/defining-a-test-source-set-for-intellij-15-with-gradle\">known issue</a>.  My manager don&#39;t want me to spend a lot of time on it and told me to create both &#39;integrationTest&#39; and &#39;unitTest&#39; under &#39;test&#39; module in different packages. I don&#39;t like it but this seems to be something that works."}],"answers":[{"tags":[],"owner":{"account_id":15412107,"reputation":61,"user_id":11118585,"display_name":"R TZ"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1675101781,"creation_date":1629272029,"answer_id":68828205,"question_id":66949242,"body_markdown":"I&#39;ll put here the solution for people who encounter the same problem.\r\n\r\nCreating a module for integrationTest (add the following to `build.gradle`):\r\n\r\n    sourceSets {\r\n    \tintegrationTest {\r\n    \t\tjava.srcDir file(&quot;src/integrationTest/java&quot;)\r\n    \t\tresources.srcDir file(&quot;src/integrationTest/resources&quot;)\r\n    \t\truntimeClasspath += sourceSets.main.runtimeClasspath + sourceSets.test.runtimeClasspath\r\n    \t\tcompileClasspath += sourceSets.main.compileClasspath + sourceSets.test.compileClasspath\r\n    \t}\r\n    }\r\n\r\nMark it as &#39;Test Source&#39; in Intellij:\r\n\r\n    plugins {\r\n        // ...\r\n\t    id &#39;idea&#39;\r\n    }\r\n    // ...\r\n    idea {\r\n    \tmodule {\r\n    \t\tsourceSets.integrationTest.allSource.srcDirs.each { srcDir -&gt; module.testSourceDirs += srcDir }\r\n    \t}\r\n    }\r\n    // ...\r\n\r\n","title":"Creating IntegrationTest folder as module in intellij","body":"<p>I'll put here the solution for people who encounter the same problem.</p>\n<p>Creating a module for integrationTest (add the following to <code>build.gradle</code>):</p>\n<pre><code>sourceSets {\n    integrationTest {\n        java.srcDir file(&quot;src/integrationTest/java&quot;)\n        resources.srcDir file(&quot;src/integrationTest/resources&quot;)\n        runtimeClasspath += sourceSets.main.runtimeClasspath + sourceSets.test.runtimeClasspath\n        compileClasspath += sourceSets.main.compileClasspath + sourceSets.test.compileClasspath\n    }\n}\n</code></pre>\n<p>Mark it as 'Test Source' in Intellij:</p>\n<pre><code>plugins {\n    // ...\n    id 'idea'\n}\n// ...\nidea {\n    module {\n        sourceSets.integrationTest.allSource.srcDirs.each { srcDir -&gt; module.testSourceDirs += srcDir }\n    }\n}\n// ...\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6402126,"reputation":1833,"user_id":4978865,"accept_rate":87,"display_name":"Praytic"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690308953,"creation_date":1690308953,"answer_id":76765509,"question_id":66949242,"body_markdown":"Extending the accepted answer, this is how you do it in Kotlin DSL:\r\n```\r\nsourceSets {\r\n    create(&quot;integrationTest&quot;) {\r\n        java.srcDir(&quot;src/integrationTest/scala&quot;)\r\n        resources.srcDir(&quot;src/integrationTest/resources&quot;)\r\n        runtimeClasspath += sourceSets[&quot;main&quot;].runtimeClasspath + sourceSets[&quot;test&quot;].runtimeClasspath\r\n        compileClasspath += sourceSets[&quot;main&quot;].compileClasspath + sourceSets[&quot;test&quot;].compileClasspath\r\n    }\r\n}\r\n\r\nidea {\r\n    module {\r\n        val integrationTestSourceSet = sourceSets[&quot;integrationTest&quot;]\r\n        integrationTestSourceSet.allSource.srcDirs.forEach { srcDir -&gt; testSourceDirs.add(srcDir) }\r\n    }\r\n}\r\n```","title":"Creating IntegrationTest folder as module in intellij","body":"<p>Extending the accepted answer, this is how you do it in Kotlin DSL:</p>\n<pre><code>sourceSets {\n    create(&quot;integrationTest&quot;) {\n        java.srcDir(&quot;src/integrationTest/scala&quot;)\n        resources.srcDir(&quot;src/integrationTest/resources&quot;)\n        runtimeClasspath += sourceSets[&quot;main&quot;].runtimeClasspath + sourceSets[&quot;test&quot;].runtimeClasspath\n        compileClasspath += sourceSets[&quot;main&quot;].compileClasspath + sourceSets[&quot;test&quot;].compileClasspath\n    }\n}\n\nidea {\n    module {\n        val integrationTestSourceSet = sourceSets[&quot;integrationTest&quot;]\n        integrationTestSourceSet.allSource.srcDirs.forEach { srcDir -&gt; testSourceDirs.add(srcDir) }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":15412107,"reputation":61,"user_id":11118585,"display_name":"R TZ"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1414,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":68828205,"answer_count":2,"score":2,"last_activity_date":1690308953,"creation_date":1617605441,"question_id":66949242,"body_markdown":"I would like to add integration tests to my spring boot application.\r\nCurrently I don&#39;t have unit tests but I want to keep the standard project layout:\r\n```\r\n├── Demo\r\n│   ├── src\r\n│   │   ├── main\r\n|   |   |   └──java\r\n│   │   ├── integrationTest\r\n|   |   |   └──java\r\n│   │   ├── test\r\n|   |   |   └──java\r\n```\r\nMy questions are:\r\n\r\nShould I create integrationTest folder as module?\r\nIf so - why? and how can I do it in intellij?\r\n\r\n&#39;main&#39; and &#39;test&#39; are already defined as modules under &#39;Demo&#39; which is also defined as module.\r\n\r\nI&#39;ve tried several times to set it via &#39;Project Structure&#39; but it wasn&#39;t created under &#39;Demo&#39; and caused to a mess by creating a different src folder and another build.gardle file\r\n\r\nand when I succeeded to create it under &#39;Demo&#39;, it added a new line to setting.gradle file: include &#39;integrationTest&#39;\r\n\r\nI&#39;m really confused with it.\r\n\r\nCan anyone help me how to create this submodule (if needed)?\r\n\r\nThanks","title":"Creating IntegrationTest folder as module in intellij","body":"<p>I would like to add integration tests to my spring boot application.\nCurrently I don't have unit tests but I want to keep the standard project layout:</p>\n<pre><code>├── Demo\n│   ├── src\n│   │   ├── main\n|   |   |   └──java\n│   │   ├── integrationTest\n|   |   |   └──java\n│   │   ├── test\n|   |   |   └──java\n</code></pre>\n<p>My questions are:</p>\n<p>Should I create integrationTest folder as module?\nIf so - why? and how can I do it in intellij?</p>\n<p>'main' and 'test' are already defined as modules under 'Demo' which is also defined as module.</p>\n<p>I've tried several times to set it via 'Project Structure' but it wasn't created under 'Demo' and caused to a mess by creating a different src folder and another build.gardle file</p>\n<p>and when I succeeded to create it under 'Demo', it added a new line to setting.gradle file: include 'integrationTest'</p>\n<p>I'm really confused with it.</p>\n<p>Can anyone help me how to create this submodule (if needed)?</p>\n<p>Thanks</p>\n"},{"tags":["java","spring","spring-boot","deployment"],"comments":[{"owner":{"account_id":1535561,"reputation":7664,"user_id":1431720,"accept_rate":89,"display_name":"Robert"},"score":0,"creation_date":1690309187,"post_id":76765408,"comment_id":135334569,"body_markdown":"Welcome to stackoverflow. Asking for recommendations is off-topic, see [help/on-topic]. If you&#39;re a student, maybe ask if your university can host. Or put the code on github. As a hiring manager I&#39;ll rather look at your code than how your app looks in the browser anyway.","body":"Welcome to stackoverflow. Asking for recommendations is off-topic, see <a href=\"https://stackoverflow.com/help/on-topic\">help center</a>. If you&#39;re a student, maybe ask if your university can host. Or put the code on github. As a hiring manager I&#39;ll rather look at your code than how your app looks in the browser anyway."}],"owner":{"account_id":26807550,"reputation":1,"user_id":20398633,"display_name":"SUPRANSHU SINGH"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":54,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690308073,"creation_date":1690308073,"question_id":76765408,"body_markdown":"I had created a portfolio website by using spring boot, as we all know that heruku is now paid and railway.app is also paid now from previous few weeks.There is one website know as RENDER is available for deploaying the websites that are made by using spring boot, but its servise is very slow, the websites doesn&#39;t even runs on the browser after a day of deployement.\r\nIn my portfolio website, i had only used emailApi from java and nothing else like database, so it should be easy to deploy.\r\n\r\nI want recommendation of a website to deploy my  Spring bott web application which should be free because I am just a student and I don&#39;t have money to spend. The deployment should be smooth and easy also the speed of website should be well enough.","title":"Spring boot webapp deployement","body":"<p>I had created a portfolio website by using spring boot, as we all know that heruku is now paid and railway.app is also paid now from previous few weeks.There is one website know as RENDER is available for deploaying the websites that are made by using spring boot, but its servise is very slow, the websites doesn't even runs on the browser after a day of deployement.\nIn my portfolio website, i had only used emailApi from java and nothing else like database, so it should be easy to deploy.</p>\n<p>I want recommendation of a website to deploy my  Spring bott web application which should be free because I am just a student and I don't have money to spend. The deployment should be smooth and easy also the speed of website should be well enough.</p>\n"},{"tags":["java","android","webview","java-native-interface","native-activity"],"answers":[{"tags":[],"owner":{"account_id":3471187,"reputation":743,"user_id":2926815,"accept_rate":83,"display_name":"Charles Lohr"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1690307899,"creation_date":1690307899,"answer_id":76765391,"question_id":76489030,"body_markdown":"It appears it is impossible to generate the classes without actual Java code.\r\n\r\nThe solution for me was to use WebMessage Pipes and intercept null callbacks. See this:\r\n\r\nhttps://stackoverflow.com/questions/76716355/acessing-messagepayloadjni-class-in-jni","title":"How to create classes exclusively in JNI / Android Native Acitivites","body":"<p>It appears it is impossible to generate the classes without actual Java code.</p>\n<p>The solution for me was to use WebMessage Pipes and intercept null callbacks. See this:</p>\n<p><a href=\"https://stackoverflow.com/questions/76716355/acessing-messagepayloadjni-class-in-jni\">Acessing MessagePayloadJni class in JNI</a></p>\n"}],"owner":{"account_id":3471187,"reputation":743,"user_id":2926815,"accept_rate":83,"display_name":"Charles Lohr"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":21,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76765391,"answer_count":1,"score":0,"last_activity_date":1690307899,"creation_date":1686909448,"question_id":76489030,"body_markdown":"I have Web Views working in my Native Activity, without any java at all.  Because I&#39;m writing a NativeActivity, using Java is quite painful (if not impossible).  And it&#39;s not too hard to get WebView&#39;s working.  But one issue is the WebViews can only do things like navigate to URLs, or kind of execute JavaScript.\r\n\r\nBut any kind of callback functionality is difficult -- unless -- there is some way using the JNI only, to create a new `ValueCallback&lt;String&gt;`, in C which would override the `onReceiveValue` function.  Only issue is I can&#39;t seem to find any examples of this.\r\n\r\nWhat is the general approach to &quot;generating&quot; classes in the JNI / Native Activities","title":"How to create classes exclusively in JNI / Android Native Acitivites","body":"<p>I have Web Views working in my Native Activity, without any java at all.  Because I'm writing a NativeActivity, using Java is quite painful (if not impossible).  And it's not too hard to get WebView's working.  But one issue is the WebViews can only do things like navigate to URLs, or kind of execute JavaScript.</p>\n<p>But any kind of callback functionality is difficult -- unless -- there is some way using the JNI only, to create a new <code>ValueCallback&lt;String&gt;</code>, in C which would override the <code>onReceiveValue</code> function.  Only issue is I can't seem to find any examples of this.</p>\n<p>What is the general approach to &quot;generating&quot; classes in the JNI / Native Activities</p>\n"},{"tags":["java","javafx","focus","tableview","javafx-8"],"answers":[{"tags":[],"owner":{"account_id":9729040,"reputation":2257,"user_id":7214815,"display_name":"Dmytro Maslenko"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1500323433,"creation_date":1500323433,"answer_id":45153163,"question_id":45137655,"body_markdown":"I see the next solution: you have a temporary variable which will point to the last selected node and you listen to 2 table views for focused property:\r\n\r\n    Node lastSelectedTable = null;\r\n\r\n    tableView1.focusedProperty().addListener((observable, oldValue, newValue) -&gt; {\r\n        if (newValue) {\r\n            lastSelectedTable = tableView1;\r\n        }\r\n    });\r\n\r\n    tableView2.focusedProperty().addListener((observable, oldValue, newValue) -&gt; {\r\n        if (newValue) {\r\n            lastSelectedTable = tableView2;\r\n        }\r\n    });\r\n\r\nAt any time under &#39;lastSelectedTable&#39; you have a reference to really latest focused table.","title":"JavaFx : get the last focused table","body":"<p>I see the next solution: you have a temporary variable which will point to the last selected node and you listen to 2 table views for focused property:</p>\n\n<pre><code>Node lastSelectedTable = null;\n\ntableView1.focusedProperty().addListener((observable, oldValue, newValue) -&gt; {\n    if (newValue) {\n        lastSelectedTable = tableView1;\n    }\n});\n\ntableView2.focusedProperty().addListener((observable, oldValue, newValue) -&gt; {\n    if (newValue) {\n        lastSelectedTable = tableView2;\n    }\n});\n</code></pre>\n\n<p>At any time under 'lastSelectedTable' you have a reference to really latest focused table.</p>\n"}],"owner":{"account_id":10625553,"reputation":3067,"user_id":7825294,"accept_rate":73,"display_name":"Sunflame"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":546,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1690307330,"creation_date":1500274144,"question_id":45137655,"body_markdown":"I have a view with two `TableView`s, and I want to get the last selected table, so which table&#39;s row was selected last time. I tried:\r\n\r\n  * `table.isFocused()` but it returns false for both tables, I guess because I have selected a row not the table itself. \r\n\r\n  * `table.getFocusModel().getFocusedItem() != null`, but it returns true for both tables if I select a row in both table.\r\n\r\nSo how can I get the last selected table&#39;s row, I have a dirty solution, to define an enum and add a listener to the `tableView`&#39;s selection model, but I think there is a simpler way, so do you have any idea? For me the best would be a method that returns true for one tableview and false for the other, of course true for the last selected.","title":"JavaFx : get the last focused table","body":"<p>I have a view with two <code>TableView</code>s, and I want to get the last selected table, so which table's row was selected last time. I tried:</p>\n<ul>\n<li><p><code>table.isFocused()</code> but it returns false for both tables, I guess because I have selected a row not the table itself.</p>\n</li>\n<li><p><code>table.getFocusModel().getFocusedItem() != null</code>, but it returns true for both tables if I select a row in both table.</p>\n</li>\n</ul>\n<p>So how can I get the last selected table's row, I have a dirty solution, to define an enum and add a listener to the <code>tableView</code>'s selection model, but I think there is a simpler way, so do you have any idea? For me the best would be a method that returns true for one tableview and false for the other, of course true for the last selected.</p>\n"},{"tags":["java","arrays"],"comments":[{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1690295183,"post_id":76763633,"comment_id":135331554,"body_markdown":"For reference, the source of the problem is  [LeetCode 31](https://leetcode.com/problems/next-permutation/)","body":"For reference, the source of the problem is  <a href=\"https://leetcode.com/problems/next-permutation/\" rel=\"nofollow noreferrer\">LeetCode 31</a>"}],"answers":[{"tags":[],"owner":{"account_id":27699053,"reputation":2348,"user_id":21144042,"display_name":"Diego Borba"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690306839,"creation_date":1690296117,"answer_id":76763845,"question_id":76763633,"body_markdown":"Your code seems to be missing the step where you reverse the subarray from index &quot;i+1&quot; to the end of the array. This step is essential to ensure you get the next lexicographically greater permutation.\r\n\r\nTo fix the issue, make sure to add the reverse operation in the function, as shown in the correct implementation above. After adding the reverse step, your function should give the correct output for the given test case and other cases as well.\r\n\r\nI solved this way:\r\n\r\n```java\r\nclass Solution {\r\n\tpublic static void nextPermutation(int[] nums) {\r\n\t\tint i = nums.length - 2;\r\n\t\twhile (i &gt;= 0 &amp;&amp; nums[i] &gt;= nums[i + 1]) {\r\n\t\t\ti--;\r\n\t\t}\r\n\r\n\t\tif (i &gt;= 0) {\r\n\t\t\tint j = nums.length - 1;\r\n\t\t\twhile (j &gt;= 0 &amp;&amp; nums[j] &lt;= nums[i]) {\r\n\t\t\t\tj--;\r\n\t\t\t}\r\n\r\n\t\t\tswap(nums, i, j);\r\n\t\t}\r\n\r\n\t\treverse(nums, i + 1);\r\n\t\t\r\n\t\tprintArray(nums);\r\n\t}\r\n\r\n\tprivate static void swap(int[] nums, int i, int j) {\r\n\t\tint temp = nums[i];\r\n\t\tnums[i] = nums[j];\r\n\t\tnums[j] = temp;\r\n\t}\r\n\r\n\tprivate static void reverse(int[] nums, int start) {\r\n\t\tint i = start;\r\n\t\tint j = nums.length - 1;\r\n\t\twhile (i &lt; j) {\r\n\t\t\tswap(nums, i, j);\r\n\t\t\ti++;\r\n\t\t\tj--;\r\n\t\t}\r\n\t}\r\n\r\n\tprivate static void printArray(int[] nums) {\r\n\t\tSystem.out.print(&quot;[&quot;);\r\n\t\tfor (int i = 0; i &lt; nums.length; i++) {\r\n\t\t\tSystem.out.print(nums[i]);\r\n\t\t\tif (i != nums.length - 1) {\r\n\t\t\t\tSystem.out.print(&quot;, &quot;);\r\n\t\t\t}\r\n\t\t}\r\n\t\tSystem.out.println(&quot;]&quot;);\r\n\t}\r\n}\r\n```\r\nCheck this out: [LeetCode31 Full Explanation][1]\r\n\r\n\r\n  [1]: https://leetcode.com/problems/next-permutation/solutions/3473399/beats-100-full-explanation-in-steps/","title":"Next Permutation in Java","body":"<p>Your code seems to be missing the step where you reverse the subarray from index &quot;i+1&quot; to the end of the array. This step is essential to ensure you get the next lexicographically greater permutation.</p>\n<p>To fix the issue, make sure to add the reverse operation in the function, as shown in the correct implementation above. After adding the reverse step, your function should give the correct output for the given test case and other cases as well.</p>\n<p>I solved this way:</p>\n<pre class=\"lang-java prettyprint-override\"><code>class Solution {\n    public static void nextPermutation(int[] nums) {\n        int i = nums.length - 2;\n        while (i &gt;= 0 &amp;&amp; nums[i] &gt;= nums[i + 1]) {\n            i--;\n        }\n\n        if (i &gt;= 0) {\n            int j = nums.length - 1;\n            while (j &gt;= 0 &amp;&amp; nums[j] &lt;= nums[i]) {\n                j--;\n            }\n\n            swap(nums, i, j);\n        }\n\n        reverse(nums, i + 1);\n        \n        printArray(nums);\n    }\n\n    private static void swap(int[] nums, int i, int j) {\n        int temp = nums[i];\n        nums[i] = nums[j];\n        nums[j] = temp;\n    }\n\n    private static void reverse(int[] nums, int start) {\n        int i = start;\n        int j = nums.length - 1;\n        while (i &lt; j) {\n            swap(nums, i, j);\n            i++;\n            j--;\n        }\n    }\n\n    private static void printArray(int[] nums) {\n        System.out.print(&quot;[&quot;);\n        for (int i = 0; i &lt; nums.length; i++) {\n            System.out.print(nums[i]);\n            if (i != nums.length - 1) {\n                System.out.print(&quot;, &quot;);\n            }\n        }\n        System.out.println(&quot;]&quot;);\n    }\n}\n</code></pre>\n<p>Check this out: <a href=\"https://leetcode.com/problems/next-permutation/solutions/3473399/beats-100-full-explanation-in-steps/\" rel=\"nofollow noreferrer\">LeetCode31 Full Explanation</a></p>\n"}],"owner":{"account_id":29088482,"reputation":11,"user_id":22282904,"display_name":"Pari Patel"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":180,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1690306839,"creation_date":1690294517,"question_id":76763633,"body_markdown":"I am trying to solve the next permutation question in java but 1/3 test case fails.. \r\n\r\nQ. A permutation of an array of integers is an arrangement of its members into a sequence or linear order.\r\n\r\nFor example, for arr = [1,2,3], the following are all the permutations of arr: [1,2,3], [1,3,2], [2, 1, 3], [2, 3, 1], [3,1,2], [3,2,1].\r\nThe next permutation of an array of integers is the next lexicographically greater permutation of its integer. More formally, if all the permutations of the array are sorted in one container according to their lexicographical order, then the next permutation of that array is the permutation that follows it in the sorted container. If such arrangement is not possible, the array must be rearranged as the lowest possible order (i.e., sorted in ascending order).\r\n\r\nFor example, the next permutation of arr = [1,2,3] is [1,3,2].\r\nSimilarly, the next permutation of arr = [2,3,1] is [3,1,2].\r\nWhile the next permutation of arr = [3,2,1] is [1,2,3] because [3,2,1] does not have a lexicographical larger rearrangement.\r\nGiven an array of integers nums, find the next permutation of nums.\r\n\r\nThe replacement must be in place and use only constant extra memory.\r\n\r\nExample 1:\r\n\r\nInput: nums = [1,2,3]\r\nOutput: [1,3,2]\r\nExample 2:\r\n\r\nInput: nums = [3,2,1]\r\nOutput: [1,2,3]\r\nExample 3:\r\n\r\nInput: nums = [1,1,5]\r\nOutput: [1,5,1]\r\n\r\n\r\n\r\n\r\n\r\nMy Code:-\r\n\r\n```\r\nclass Solution {\r\n    public void nextPermutation(int[] nums) {\r\n        int ind=1;\r\n        int n= nums.length;\r\n        for(int i=n-2;i&gt;=0;i--){\r\n            if(nums[i]&lt;nums[i+1]){\r\n                ind=i;\r\n                break;\r\n            }\r\n        }\r\n        for(int i=n-1;i&gt;=0;i--){\r\n        if (ind==-1){\r\n            reverse(nums,i+1,n-1);\r\n        }\r\n        }\r\n\r\n        for(int j=n-1;j&gt;ind;j--){\r\n            if(nums[j]&gt;nums[ind]){\r\n                swap(nums,j,ind);\r\n                break;\r\n            }\r\n        }\r\n\r\n        reverse(nums,0,n-1);\r\n\r\n        for(int k=0;k&lt;n;k++){\r\n            System.out.println(nums[k]);\r\n        }\r\n    }\r\n    public static void swap(int n[],int i, int j){\r\n        int temp=n[i];\r\n        n[i]=n[j];\r\n        n[j]=temp;\r\n    }\r\n    public static void reverse(int n[],int i, int j){\r\n        while(i&lt;j){\r\n            swap(n,i,j);\r\n            i++;\r\n            j--;\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n\r\n_____________________________________________________________\r\nthe driver code just accepts the input and calls the function..\r\n\r\nWhat mistake am I making? \r\n\r\nmy failed test case:-\r\n\r\nInput\r\nnums =\r\n[1,2,3]\r\n\r\nStdout\r\n2\r\n3\r\n1\r\n\r\nOutput\r\n[2,3,1]\r\n\r\nExpected\r\n[1,3,2]","title":"Next Permutation in Java","body":"<p>I am trying to solve the next permutation question in java but 1/3 test case fails..</p>\n<p>Q. A permutation of an array of integers is an arrangement of its members into a sequence or linear order.</p>\n<p>For example, for arr = [1,2,3], the following are all the permutations of arr: [1,2,3], [1,3,2], [2, 1, 3], [2, 3, 1], [3,1,2], [3,2,1].\nThe next permutation of an array of integers is the next lexicographically greater permutation of its integer. More formally, if all the permutations of the array are sorted in one container according to their lexicographical order, then the next permutation of that array is the permutation that follows it in the sorted container. If such arrangement is not possible, the array must be rearranged as the lowest possible order (i.e., sorted in ascending order).</p>\n<p>For example, the next permutation of arr = [1,2,3] is [1,3,2].\nSimilarly, the next permutation of arr = [2,3,1] is [3,1,2].\nWhile the next permutation of arr = [3,2,1] is [1,2,3] because [3,2,1] does not have a lexicographical larger rearrangement.\nGiven an array of integers nums, find the next permutation of nums.</p>\n<p>The replacement must be in place and use only constant extra memory.</p>\n<p>Example 1:</p>\n<p>Input: nums = [1,2,3]\nOutput: [1,3,2]\nExample 2:</p>\n<p>Input: nums = [3,2,1]\nOutput: [1,2,3]\nExample 3:</p>\n<p>Input: nums = [1,1,5]\nOutput: [1,5,1]</p>\n<p>My Code:-</p>\n<pre><code>class Solution {\n    public void nextPermutation(int[] nums) {\n        int ind=1;\n        int n= nums.length;\n        for(int i=n-2;i&gt;=0;i--){\n            if(nums[i]&lt;nums[i+1]){\n                ind=i;\n                break;\n            }\n        }\n        for(int i=n-1;i&gt;=0;i--){\n        if (ind==-1){\n            reverse(nums,i+1,n-1);\n        }\n        }\n\n        for(int j=n-1;j&gt;ind;j--){\n            if(nums[j]&gt;nums[ind]){\n                swap(nums,j,ind);\n                break;\n            }\n        }\n\n        reverse(nums,0,n-1);\n\n        for(int k=0;k&lt;n;k++){\n            System.out.println(nums[k]);\n        }\n    }\n    public static void swap(int n[],int i, int j){\n        int temp=n[i];\n        n[i]=n[j];\n        n[j]=temp;\n    }\n    public static void reverse(int n[],int i, int j){\n        while(i&lt;j){\n            swap(n,i,j);\n            i++;\n            j--;\n        }\n    }\n}\n</code></pre>\n<hr />\n<p>the driver code just accepts the input and calls the function..</p>\n<p>What mistake am I making?</p>\n<p>my failed test case:-</p>\n<p>Input\nnums =\n[1,2,3]</p>\n<p>Stdout\n2\n3\n1</p>\n<p>Output\n[2,3,1]</p>\n<p>Expected\n[1,3,2]</p>\n"},{"tags":["java","xml","xslt","sap-cpi"],"comments":[{"owner":{"account_id":8112,"reputation":64602,"user_id":14419,"accept_rate":100,"display_name":"Mads Hansen"},"score":0,"creation_date":1690286126,"post_id":76762287,"comment_id":135329233,"body_markdown":"What is the criteria for &quot;similar&quot;?","body":"What is the criteria for &quot;similar&quot;?"},{"owner":{"account_id":3616427,"reputation":114440,"user_id":3016153,"display_name":"michael.hor257k"},"score":0,"creation_date":1690289894,"post_id":76762287,"comment_id":135330180,"body_markdown":"Seems like a trivial problem. Where exactly are you stuck with this?","body":"Seems like a trivial problem. Where exactly are you stuck with this?"},{"owner":{"account_id":12578778,"reputation":12323,"user_id":9150270,"display_name":"Sandra Rossi"},"score":0,"creation_date":1690293473,"post_id":76762287,"comment_id":135331118,"body_markdown":"Please post minimal example, only `productType` nodes are needed for your question. It&#39;s only a [tag:xslt] question, why using other tags?","body":"Please post minimal example, only <code>productType</code> nodes are needed for your question. It&#39;s only a <a href=\"https://stackoverflow.com/questions/tagged/xslt\">xslt</a> question, why using other tags?"},{"owner":{"account_id":4570164,"reputation":4170,"user_id":3710053,"display_name":"Siebe Jongebloed"},"score":0,"creation_date":1690295354,"post_id":76762287,"comment_id":135331600,"body_markdown":"@SandraRossi: xslt is mostly the best option when transforming xml, but maybe java or spa-cpi have other options as well?","body":"@SandraRossi: xslt is mostly the best option when transforming xml, but maybe java or spa-cpi have other options as well?"}],"answers":[{"comments":[{"owner":{"account_id":3616427,"reputation":114440,"user_id":3016153,"display_name":"michael.hor257k"},"score":0,"creation_date":1690308643,"post_id":76765283,"comment_id":135334463,"body_markdown":"If using XSLT 3.0 (or 2.0), I believe `xsl:for-each-group` would be a much better approach than this (though not necessarily the best). That said, I expect OP will tell us they are limited to XSLT 1.0...","body":"If using XSLT 3.0 (or 2.0), I believe <code>xsl:for-each-group</code> would be a much better approach than this (though not necessarily the best). That said, I expect OP will tell us they are limited to XSLT 1.0..."},{"owner":{"account_id":22562945,"reputation":462,"user_id":16750357,"display_name":"al.truisme"},"score":0,"creation_date":1690322684,"post_id":76765283,"comment_id":135336814,"body_markdown":"So let&#39;s see your ```xsl:for-each-group``` implementation.","body":"So let&#39;s see your <code>xsl:for-each-group</code> implementation."},{"owner":{"account_id":3616427,"reputation":114440,"user_id":3016153,"display_name":"michael.hor257k"},"score":0,"creation_date":1690338645,"post_id":76765283,"comment_id":135338173,"body_markdown":"Sorry, I do not intend to post an answer here until OP pinpoints their problem. You are welcome to post your own question, if you are so eager to learn.","body":"Sorry, I do not intend to post an answer here until OP pinpoints their problem. You are welcome to post your own question, if you are so eager to learn."}],"tags":[],"owner":{"account_id":22562945,"reputation":462,"user_id":16750357,"display_name":"al.truisme"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690306808,"creation_date":1690306808,"answer_id":76765283,"question_id":76762287,"body_markdown":"I get your desired result given your input set with the XSLT3 implementation.\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;xsl:stylesheet xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot;\r\n  version=&quot;3.0&quot;\r\n  xmlns:xs=&quot;http://www.w3.org/2001/XMLSchema&quot;\r\n  exclude-result-prefixes=&quot;#all&quot;&gt;\r\n  \r\n  &lt;xsl:output indent=&quot;yes&quot; /&gt;\r\n  \r\n  &lt;xsl:mode on-no-match=&quot;shallow-copy&quot;/&gt;\r\n  \r\n  &lt;xsl:template match=&quot;/Orders/*[ (name(.) || &#39;Value&#39;) eq name(*[1]) ]&quot; &gt;\r\n    &lt;xsl:if test=&quot;current() is /Orders/*[name(current()) eq name(.)][1]&quot; &gt;\r\n      &lt;xsl:copy&gt;\r\n        &lt;xsl:apply-templates /&gt;\r\n      &lt;/xsl:copy&gt;\r\n    &lt;/xsl:if&gt;\r\n  &lt;/xsl:template&gt;\r\n  \r\n  &lt;xsl:template match=&quot;/Orders/*/*&quot;&gt;\r\n    &lt;xsl:copy&gt;\r\n      &lt;xsl:value-of select=&quot;/Orders/*/*[name(current()) eq name(.)]&quot; \r\n                    separator=&quot;,&quot; /&gt;\r\n    &lt;/xsl:copy&gt;\r\n  &lt;/xsl:template&gt;\r\n  \r\n&lt;/xsl:stylesheet&gt;\r\n```","title":"XSLT mapping to concatenate similar node values","body":"<p>I get your desired result given your input set with the XSLT3 implementation.</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;xsl:stylesheet xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot;\n  version=&quot;3.0&quot;\n  xmlns:xs=&quot;http://www.w3.org/2001/XMLSchema&quot;\n  exclude-result-prefixes=&quot;#all&quot;&gt;\n  \n  &lt;xsl:output indent=&quot;yes&quot; /&gt;\n  \n  &lt;xsl:mode on-no-match=&quot;shallow-copy&quot;/&gt;\n  \n  &lt;xsl:template match=&quot;/Orders/*[ (name(.) || 'Value') eq name(*[1]) ]&quot; &gt;\n    &lt;xsl:if test=&quot;current() is /Orders/*[name(current()) eq name(.)][1]&quot; &gt;\n      &lt;xsl:copy&gt;\n        &lt;xsl:apply-templates /&gt;\n      &lt;/xsl:copy&gt;\n    &lt;/xsl:if&gt;\n  &lt;/xsl:template&gt;\n  \n  &lt;xsl:template match=&quot;/Orders/*/*&quot;&gt;\n    &lt;xsl:copy&gt;\n      &lt;xsl:value-of select=&quot;/Orders/*/*[name(current()) eq name(.)]&quot; \n                    separator=&quot;,&quot; /&gt;\n    &lt;/xsl:copy&gt;\n  &lt;/xsl:template&gt;\n  \n&lt;/xsl:stylesheet&gt;\n</code></pre>\n"}],"owner":{"account_id":29087320,"reputation":11,"user_id":22281984,"display_name":"Jagadeesh Kumar"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":52,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1690306808,"creation_date":1690284757,"question_id":76762287,"body_markdown":"I want `productType` nodes to be combined and values to be concatenated.\r\n\r\nI have sample input XML as below.\r\n\r\n    &lt;Orders&gt;\r\n        &lt;fromDate&gt;Date&lt;/fromDate&gt;\r\n        &lt;toDate&gt;Date&lt;/toDate&gt;\r\n        &lt;soldTo&gt;String&lt;/soldTo&gt;\r\n        &lt;shipTo&gt;String&lt;/shipTo&gt;\r\n        &lt;endUser&gt;String&lt;/endUser&gt;\r\n        &lt;customerPO&gt;String&lt;/customerPO&gt;\r\n        &lt;orderId&gt;String&lt;/orderId&gt;\r\n        &lt;consigneePO&gt;String&lt;/consigneePO&gt;\r\n        &lt;productType&gt;\r\n            &lt;productTypeValue&gt;String1&lt;/productTypeValue&gt;\r\n        &lt;/productType&gt;\r\n        &lt;productType&gt;\r\n            &lt;productTypeValue&gt;String2&lt;/productTypeValue&gt;\r\n        &lt;/productType&gt;\r\n        &lt;orderStatus&gt;\r\n            &lt;orderStatusValue&gt;String3&lt;/orderStatusValue&gt;\r\n        &lt;/orderStatus&gt;\r\n        &lt;orderStatus&gt;\r\n            &lt;orderStatusValue&gt;String4&lt;/orderStatusValue&gt;\r\n        &lt;/orderStatus&gt;\r\n        &lt;orderLineItemStatus&gt;\r\n            &lt;orderLineItemStatusValue&gt;String5&lt;/orderLineItemStatusValue&gt;\r\n        &lt;/orderLineItemStatus&gt;\r\n        &lt;orderLineItemStatus&gt;\r\n            &lt;orderLineItemStatusValue&gt;String6&lt;/orderLineItemStatusValue&gt;\r\n        &lt;/orderLineItemStatus&gt;\r\n    &lt;/Orders&gt;\r\n\r\nExpected output:\r\n\r\n    &lt;Orders&gt;\r\n        &lt;fromDate&gt;Date&lt;/fromDate&gt;\r\n        &lt;toDate&gt;Date&lt;/toDate&gt;\r\n        &lt;soldTo&gt;String&lt;/soldTo&gt;\r\n        &lt;shipTo&gt;String&lt;/shipTo&gt;\r\n        &lt;endUser&gt;String&lt;/endUser&gt;\r\n        &lt;customerPO&gt;String&lt;/customerPO&gt;\r\n        &lt;orderId&gt;String&lt;/orderId&gt;\r\n        &lt;consigneePO&gt;String&lt;/consigneePO&gt;\r\n        &lt;productType&gt;\r\n            &lt;productTypeValue&gt;String1,String2&lt;/productTypeValue&gt;\r\n        &lt;/productType&gt;\r\n        &lt;orderStatus&gt;\r\n            &lt;orderStatusValue&gt;String3,String4&lt;/orderStatusValue&gt;\r\n        &lt;/orderStatus&gt;\r\n        &lt;orderLineItemStatus&gt;\r\n            &lt;orderLineItemStatusValue&gt;String5,String6&lt;/orderLineItemStatusValue&gt;\r\n        &lt;/orderLineItemStatus&gt;\r\n    &lt;/Orders&gt;","title":"XSLT mapping to concatenate similar node values","body":"<p>I want <code>productType</code> nodes to be combined and values to be concatenated.</p>\n<p>I have sample input XML as below.</p>\n<pre><code>&lt;Orders&gt;\n    &lt;fromDate&gt;Date&lt;/fromDate&gt;\n    &lt;toDate&gt;Date&lt;/toDate&gt;\n    &lt;soldTo&gt;String&lt;/soldTo&gt;\n    &lt;shipTo&gt;String&lt;/shipTo&gt;\n    &lt;endUser&gt;String&lt;/endUser&gt;\n    &lt;customerPO&gt;String&lt;/customerPO&gt;\n    &lt;orderId&gt;String&lt;/orderId&gt;\n    &lt;consigneePO&gt;String&lt;/consigneePO&gt;\n    &lt;productType&gt;\n        &lt;productTypeValue&gt;String1&lt;/productTypeValue&gt;\n    &lt;/productType&gt;\n    &lt;productType&gt;\n        &lt;productTypeValue&gt;String2&lt;/productTypeValue&gt;\n    &lt;/productType&gt;\n    &lt;orderStatus&gt;\n        &lt;orderStatusValue&gt;String3&lt;/orderStatusValue&gt;\n    &lt;/orderStatus&gt;\n    &lt;orderStatus&gt;\n        &lt;orderStatusValue&gt;String4&lt;/orderStatusValue&gt;\n    &lt;/orderStatus&gt;\n    &lt;orderLineItemStatus&gt;\n        &lt;orderLineItemStatusValue&gt;String5&lt;/orderLineItemStatusValue&gt;\n    &lt;/orderLineItemStatus&gt;\n    &lt;orderLineItemStatus&gt;\n        &lt;orderLineItemStatusValue&gt;String6&lt;/orderLineItemStatusValue&gt;\n    &lt;/orderLineItemStatus&gt;\n&lt;/Orders&gt;\n</code></pre>\n<p>Expected output:</p>\n<pre><code>&lt;Orders&gt;\n    &lt;fromDate&gt;Date&lt;/fromDate&gt;\n    &lt;toDate&gt;Date&lt;/toDate&gt;\n    &lt;soldTo&gt;String&lt;/soldTo&gt;\n    &lt;shipTo&gt;String&lt;/shipTo&gt;\n    &lt;endUser&gt;String&lt;/endUser&gt;\n    &lt;customerPO&gt;String&lt;/customerPO&gt;\n    &lt;orderId&gt;String&lt;/orderId&gt;\n    &lt;consigneePO&gt;String&lt;/consigneePO&gt;\n    &lt;productType&gt;\n        &lt;productTypeValue&gt;String1,String2&lt;/productTypeValue&gt;\n    &lt;/productType&gt;\n    &lt;orderStatus&gt;\n        &lt;orderStatusValue&gt;String3,String4&lt;/orderStatusValue&gt;\n    &lt;/orderStatus&gt;\n    &lt;orderLineItemStatus&gt;\n        &lt;orderLineItemStatusValue&gt;String5,String6&lt;/orderLineItemStatusValue&gt;\n    &lt;/orderLineItemStatus&gt;\n&lt;/Orders&gt;\n</code></pre>\n"},{"tags":["java","spring","spring-boot","jackson","spring-webflux"],"answers":[{"comments":[{"owner":{"account_id":15595474,"reputation":1060,"user_id":11251146,"display_name":"Nipuna Saranga"},"score":1,"creation_date":1582461517,"post_id":60335899,"comment_id":106778322,"body_markdown":"Similar question has been asked on this matter -&gt; https://stackoverflow.com/q/43769301/11251146","body":"Similar question has been asked on this matter -&gt; <a href=\"https://stackoverflow.com/q/43769301/11251146\">stackoverflow.com/q/43769301/11251146</a>"}],"tags":[],"owner":{"account_id":6623193,"reputation":505,"user_id":5114189,"display_name":"msilb"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1582278197,"creation_date":1582278197,"answer_id":60335899,"question_id":60335898,"body_markdown":"After quite some time spent debugging Spring WebFlux / Jackson library code, I was able to finally find a hint to solve the issue looking at the reactive WebFlux WebClient [docs][1]. There is some custom plumbing required to make WebClient use the default auto-configured Jackson ObjectMapper. The solution is to configure the default decoder used for processing Server-Sent Events when creating new instance of the WebClient. Here is the sample code:\r\n\r\n```\r\n@Component\r\npublic class MarketDataFetcher implements CommandLineRunner {\r\n\r\n    // ...\r\n\r\n    private final WebClient webClient;\r\n\r\n    public MarketDataFetcher(ObjectMapper objectMapper) {\r\n        webClient = createWebClient(objectMapper);\r\n    }\r\n\r\n    private WebClient createWebClient(ObjectMapper objectMapper) {\r\n        return WebClient.builder()\r\n                .codecs(configurer -&gt; configurer.defaultCodecs()\r\n                        .serverSentEventDecoder(new Jackson2JsonDecoder(objectMapper)))\r\n                .baseUrl(BASE_URL)\r\n                .build();\r\n    }\r\n}\r\n```\r\n\r\n`ObjectMapper` is automatically injected by Spring, so no `@Autowired` annotation is needed.\r\n\r\nIt would certainly help if this could be made more explicit in the official documentation somehow. Hope this answer can be useful for someone facing similar issue!\r\n\r\n\r\n  [1]: https://docs.spring.io/spring/docs/current/spring-framework-reference/web-reactive.html#webflux-client-builder","title":"Spring Boot auto-configured Jackson ObjectMapper not used for WebFlux WebClient by default","body":"<p>After quite some time spent debugging Spring WebFlux / Jackson library code, I was able to finally find a hint to solve the issue looking at the reactive WebFlux WebClient <a href=\"https://docs.spring.io/spring/docs/current/spring-framework-reference/web-reactive.html#webflux-client-builder\" rel=\"nofollow noreferrer\">docs</a>. There is some custom plumbing required to make WebClient use the default auto-configured Jackson ObjectMapper. The solution is to configure the default decoder used for processing Server-Sent Events when creating new instance of the WebClient. Here is the sample code:</p>\n\n<pre><code>@Component\npublic class MarketDataFetcher implements CommandLineRunner {\n\n    // ...\n\n    private final WebClient webClient;\n\n    public MarketDataFetcher(ObjectMapper objectMapper) {\n        webClient = createWebClient(objectMapper);\n    }\n\n    private WebClient createWebClient(ObjectMapper objectMapper) {\n        return WebClient.builder()\n                .codecs(configurer -&gt; configurer.defaultCodecs()\n                        .serverSentEventDecoder(new Jackson2JsonDecoder(objectMapper)))\n                .baseUrl(BASE_URL)\n                .build();\n    }\n}\n</code></pre>\n\n<p><code>ObjectMapper</code> is automatically injected by Spring, so no <code>@Autowired</code> annotation is needed.</p>\n\n<p>It would certainly help if this could be made more explicit in the official documentation somehow. Hope this answer can be useful for someone facing similar issue!</p>\n"},{"tags":[],"owner":{"account_id":7298493,"reputation":304,"user_id":5562284,"display_name":"nouveu"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690186927,"creation_date":1690186927,"answer_id":76752610,"question_id":60335898,"body_markdown":"I found in Spring Boot [docs][1] that:\r\n\r\n&gt; the client instance is built using the WebClient.Builder bean auto-configured by Spring Boot\r\n\r\nThere is also section dedicated to [WebClient customization][2] which says:\r\n\r\n&gt; To make the scope of any customizations as narrow as possible, inject the auto-configured WebClient.Builder and then call its methods as required.\r\n\r\nTherefore simplest way to use configured `ObjectMapper` is to define `WebClient` bean like this:\r\n\r\n```java\r\n@Bean\r\npublic WebClient webClient(WebClient.Builder builder) {\r\n    return builder.build();\r\n}\r\n```\r\n\r\nThat is pretty unconvenient that Spring Boot doesn&#39;t do that by default given how any other stuff is already configured to use out of box but it is much better than configuring codecs by hand.\r\n\r\n  [1]: https://%20https://docs.spring.io/spring-boot/docs/current/reference/html/web.html#web.reactive.reactive-server-resources-configuration\r\n  [2]: https://docs.spring.io/spring-boot/docs/current/reference/html/io.html#io.rest-client.webclient.customization","title":"Spring Boot auto-configured Jackson ObjectMapper not used for WebFlux WebClient by default","body":"<p>I found in Spring Boot <a href=\"https://%20https://docs.spring.io/spring-boot/docs/current/reference/html/web.html#web.reactive.reactive-server-resources-configuration\" rel=\"nofollow noreferrer\">docs</a> that:</p>\n<blockquote>\n<p>the client instance is built using the WebClient.Builder bean auto-configured by Spring Boot</p>\n</blockquote>\n<p>There is also section dedicated to <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/io.html#io.rest-client.webclient.customization\" rel=\"nofollow noreferrer\">WebClient customization</a> which says:</p>\n<blockquote>\n<p>To make the scope of any customizations as narrow as possible, inject the auto-configured WebClient.Builder and then call its methods as required.</p>\n</blockquote>\n<p>Therefore simplest way to use configured <code>ObjectMapper</code> is to define <code>WebClient</code> bean like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Bean\npublic WebClient webClient(WebClient.Builder builder) {\n    return builder.build();\n}\n</code></pre>\n<p>That is pretty unconvenient that Spring Boot doesn't do that by default given how any other stuff is already configured to use out of box but it is much better than configuring codecs by hand.</p>\n"},{"tags":[],"owner":{"account_id":184786,"reputation":18896,"user_id":421049,"accept_rate":50,"display_name":"Garret Wilson"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690306788,"creation_date":1690306788,"answer_id":76765280,"question_id":60335898,"body_markdown":"I haven&#39;t tried the high-level property settings mentioned in the question, but you can surgically configure the Jackson `ObjectMapper` at the application level using `Jackson2ObjectMapperBuilderCustomizer`, as I explained in [my answer to another question][1].\r\n\r\n```java\r\n@Configuration\r\npublic class MyAppConfiguration {\r\n\r\n  @Bean\r\n  public Jackson2ObjectMapperBuilderCustomizer jacksonJsonCustomizer() {\r\n    return builder -&gt; builder.modulesToInstall(/*TODO specify modules here);\r\n  }\r\n\r\n}\r\n```\r\n\r\nIn limited testing WebFlux seems to use this configuration, e.g. with `.bodyToMono(SomeType.class)`.\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/76765254","title":"Spring Boot auto-configured Jackson ObjectMapper not used for WebFlux WebClient by default","body":"<p>I haven't tried the high-level property settings mentioned in the question, but you can surgically configure the Jackson <code>ObjectMapper</code> at the application level using <code>Jackson2ObjectMapperBuilderCustomizer</code>, as I explained in <a href=\"https://stackoverflow.com/a/76765254\">my answer to another question</a>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\npublic class MyAppConfiguration {\n\n  @Bean\n  public Jackson2ObjectMapperBuilderCustomizer jacksonJsonCustomizer() {\n    return builder -&gt; builder.modulesToInstall(/*TODO specify modules here);\n  }\n\n}\n</code></pre>\n<p>In limited testing WebFlux seems to use this configuration, e.g. with <code>.bodyToMono(SomeType.class)</code>.</p>\n"}],"owner":{"account_id":6623193,"reputation":505,"user_id":5114189,"display_name":"msilb"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4683,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":3,"score":3,"last_activity_date":1690306788,"creation_date":1582278197,"question_id":60335898,"body_markdown":"In my Spring Boot application I&#39;m making use of the reactive WebFlux WebClient to retrieve streaming JSON data from an SSE (Server-Sent Events) endpoint. Modifying the default auto-configured Jackson ObjectMapper behavior by setting config options in Spring Boot like `spring.jackson.deserialization.read-date-timestamps-as-nanoseconds=false` as suggested by the [official docs][1] has no effect on the WebFlux WebClient. I also tried other suggestions outlined in this [SO thread][2] like creating custom beans for WebFlux configuration but they did not help, the config is still not being picked up.\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-boot/docs/current/reference/html/howto.html#howto-customize-the-jackson-objectmapper\r\n  [2]: https://stackoverflow.com/questions/43195987/configured-objectmapper-not-used-in-spring-boot-webflux/43241547","title":"Spring Boot auto-configured Jackson ObjectMapper not used for WebFlux WebClient by default","body":"<p>In my Spring Boot application I'm making use of the reactive WebFlux WebClient to retrieve streaming JSON data from an SSE (Server-Sent Events) endpoint. Modifying the default auto-configured Jackson ObjectMapper behavior by setting config options in Spring Boot like <code>spring.jackson.deserialization.read-date-timestamps-as-nanoseconds=false</code> as suggested by the <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/howto.html#howto-customize-the-jackson-objectmapper\" rel=\"nofollow noreferrer\">official docs</a> has no effect on the WebFlux WebClient. I also tried other suggestions outlined in this <a href=\"https://stackoverflow.com/questions/43195987/configured-objectmapper-not-used-in-spring-boot-webflux/43241547\">SO thread</a> like creating custom beans for WebFlux configuration but they did not help, the config is still not being picked up.</p>\n"},{"tags":["java","json","spring","reactive-programming","spring-webflux"],"answers":[{"comments":[{"owner":{"account_id":393366,"reputation":3638,"user_id":755183,"accept_rate":71,"display_name":"hahn"},"score":7,"creation_date":1505934284,"post_id":43997021,"comment_id":79620702,"body_markdown":"Could you tell the reason why Jackson2ObjectMapperBuilderCustomizer is not applied to default codecs?","body":"Could you tell the reason why Jackson2ObjectMapperBuilderCustomizer is not applied to default codecs?"},{"owner":{"account_id":11818,"reputation":57413,"user_id":22982,"accept_rate":100,"display_name":"Brian Clozel"},"score":0,"creation_date":1505934772,"post_id":43997021,"comment_id":79620954,"body_markdown":"This sounds like a new question to me - could you create one?","body":"This sounds like a new question to me - could you create one?"},{"owner":{"account_id":3131041,"reputation":1046,"user_id":2648817,"accept_rate":22,"display_name":"Sai Surya Kattamuri"},"score":11,"creation_date":1590457651,"post_id":43997021,"comment_id":109680261,"body_markdown":"@hahn If you use the preconfigured WebClient.Builder provided by spring instead of Webclient.builder(), you can get the objectMapper customizations done automatically\nRef: https://docs.spring.io/spring-boot/docs/current/reference/html/spring-boot-features.html#boot-features-webclient","body":"@hahn If you use the preconfigured WebClient.Builder provided by spring instead of Webclient.builder(), you can get the objectMapper customizations done automatically Ref: <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/spring-boot-features.html#boot-features-webclient\" rel=\"nofollow noreferrer\">docs.spring.io/spring-boot/docs/current/reference/html/&hellip;</a>"},{"owner":{"account_id":1988016,"reputation":712,"user_id":1782745,"accept_rate":17,"display_name":"Sifeng"},"score":0,"creation_date":1695717059,"post_id":43997021,"comment_id":136058227,"body_markdown":"Just a note for someone like me, who thinks the 2 Configurers are same. \nNo, they are not!!! One line for &quot;Encoder&quot; and another line for &quot;Decoder&quot;.","body":"Just a note for someone like me, who thinks the 2 Configurers are same.  No, they are not!!! One line for &quot;Encoder&quot; and another line for &quot;Decoder&quot;."}],"tags":[],"owner":{"account_id":11818,"reputation":57413,"user_id":22982,"accept_rate":100,"display_name":"Brian Clozel"},"comment_count":4,"down_vote_count":0,"up_vote_count":76,"is_accepted":false,"score":76,"last_activity_date":1516926426,"creation_date":1494925676,"answer_id":43997021,"question_id":43769301,"body_markdown":"Here&#39;s an example that customizes the `ObjectMapper` for JSON (de)serialization.\r\nNote that for streaming purposes, different encoders/decoders are being used but the principle remains the same for their configuration.\r\n\r\n        ExchangeStrategies strategies = ExchangeStrategies\r\n                .builder()\r\n                .codecs(clientDefaultCodecsConfigurer -&gt; {\r\n                    clientDefaultCodecsConfigurer.defaultCodecs().jackson2JsonEncoder(new Jackson2JsonEncoder(new ObjectMapper(), MediaType.APPLICATION_JSON));\r\n                    clientDefaultCodecsConfigurer.defaultCodecs().jackson2JsonDecoder(new Jackson2JsonDecoder(new ObjectMapper(), MediaType.APPLICATION_JSON));\r\n\r\n                }).build();\r\n        \r\n        WebClient webClient = WebClient.builder().exchangeStrategies(strategies).build();","title":"How to customize SpringWebFlux WebClient JSON deserialization?","body":"<p>Here's an example that customizes the <code>ObjectMapper</code> for JSON (de)serialization.\nNote that for streaming purposes, different encoders/decoders are being used but the principle remains the same for their configuration.</p>\n\n<pre><code>    ExchangeStrategies strategies = ExchangeStrategies\n            .builder()\n            .codecs(clientDefaultCodecsConfigurer -&gt; {\n                clientDefaultCodecsConfigurer.defaultCodecs().jackson2JsonEncoder(new Jackson2JsonEncoder(new ObjectMapper(), MediaType.APPLICATION_JSON));\n                clientDefaultCodecsConfigurer.defaultCodecs().jackson2JsonDecoder(new Jackson2JsonDecoder(new ObjectMapper(), MediaType.APPLICATION_JSON));\n\n            }).build();\n\n    WebClient webClient = WebClient.builder().exchangeStrategies(strategies).build();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11558150,"reputation":101,"user_id":8468681,"display_name":"Ricardo"},"comment_count":0,"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1502895997,"creation_date":1502895997,"answer_id":45717173,"question_id":43769301,"body_markdown":"You can configure this for a specific WebClient:\r\n\r\n    @Autowired\r\n    public ItunesAlbumServiceImpl(ObjectMapper mapper) {\r\n        ExchangeStrategies strategies = ExchangeStrategies.builder().codecs(clientCodecConfigurer -&gt;\r\n            clientCodecConfigurer.customCodecs().decoder(\r\n                    new Jackson2JsonDecoder(mapper,\r\n                            new MimeType(&quot;text&quot;, &quot;javascript&quot;, StandardCharsets.UTF_8)))\r\n        ).build();\r\n     \r\n        webClient = WebClient.builder()\r\n                .exchangeStrategies(strategies)\r\n                .baseUrl(&quot;https://itunes.apple.com&quot;)\r\n                .build();\r\n    }\r\n\r\nBut also on &#39;application level&#39;\r\n\r\nby configuring a `CodecCustomizer`:\r\n\r\n    @Bean\r\n    public CodecCustomizer jacksonLegacyJsonCustomizer(ObjectMapper mapper) {\r\n        return (configurer) -&gt; {\r\n            MimeType textJavascript = new MimeType(&quot;text&quot;, &quot;javascript&quot;, StandardCharsets.UTF_8);\r\n            CodecConfigurer.CustomCodecs customCodecs = configurer.customCodecs();\r\n            customCodecs.decoder(\r\n                    new Jackson2JsonDecoder(mapper, textJavascript));\r\n            customCodecs.encoder(\r\n                    new Jackson2JsonEncoder(mapper, textJavascript));\r\n        };\r\n    }\r\n\r\nwhich will be made effective by the `WebClientAutoConfiguration` as a `WebClient.Builder` bean:\r\n\r\n    @Autowired\r\n    public ItunesAlbumServiceImpl(WebClient.Builder webclientBuilder) {\r\n        webClient = webclientBuilder.baseUrl(&quot;https://itunes.apple.com&quot;).build();\r\n    }","title":"How to customize SpringWebFlux WebClient JSON deserialization?","body":"<p>You can configure this for a specific WebClient:</p>\n\n<pre><code>@Autowired\npublic ItunesAlbumServiceImpl(ObjectMapper mapper) {\n    ExchangeStrategies strategies = ExchangeStrategies.builder().codecs(clientCodecConfigurer -&gt;\n        clientCodecConfigurer.customCodecs().decoder(\n                new Jackson2JsonDecoder(mapper,\n                        new MimeType(\"text\", \"javascript\", StandardCharsets.UTF_8)))\n    ).build();\n\n    webClient = WebClient.builder()\n            .exchangeStrategies(strategies)\n            .baseUrl(\"https://itunes.apple.com\")\n            .build();\n}\n</code></pre>\n\n<p>But also on 'application level'</p>\n\n<p>by configuring a <code>CodecCustomizer</code>:</p>\n\n<pre><code>@Bean\npublic CodecCustomizer jacksonLegacyJsonCustomizer(ObjectMapper mapper) {\n    return (configurer) -&gt; {\n        MimeType textJavascript = new MimeType(\"text\", \"javascript\", StandardCharsets.UTF_8);\n        CodecConfigurer.CustomCodecs customCodecs = configurer.customCodecs();\n        customCodecs.decoder(\n                new Jackson2JsonDecoder(mapper, textJavascript));\n        customCodecs.encoder(\n                new Jackson2JsonEncoder(mapper, textJavascript));\n    };\n}\n</code></pre>\n\n<p>which will be made effective by the <code>WebClientAutoConfiguration</code> as a <code>WebClient.Builder</code> bean:</p>\n\n<pre><code>@Autowired\npublic ItunesAlbumServiceImpl(WebClient.Builder webclientBuilder) {\n    webClient = webclientBuilder.baseUrl(\"https://itunes.apple.com\").build();\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":108117,"reputation":9982,"user_id":287138,"accept_rate":82,"display_name":"Stefan Haberl"},"score":0,"creation_date":1585754842,"post_id":48447713,"comment_id":107875207,"body_markdown":"this question is tagged `Java` and not `Kotlin`","body":"this question is tagged <code>Java</code> and not <code>Kotlin</code>"}],"tags":[],"owner":{"account_id":3261148,"reputation":425,"user_id":2746716,"accept_rate":50,"display_name":"Amit Yatagiri"},"comment_count":1,"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1583859337,"creation_date":1516897870,"answer_id":48447713,"question_id":43769301,"body_markdown":"with webflux 5.0.2, de-registerDefaults\r\n\r\n\r\n    val strategies = ExchangeStrategies.builder()\r\n                    .codecs { configurer -&gt;\r\n                        configurer.registerDefaults(false)\r\n                        configurer.customCodecs().encoder(Jackson2JsonEncoder(objectMapper, APPLICATION_JSON))\r\n                        configurer.customCodecs().decoder(Jackson2JsonDecoder(objectMapper, APPLICATION_JSON))\r\n                    }.build()\r\n\r\n","title":"How to customize SpringWebFlux WebClient JSON deserialization?","body":"<p>with webflux 5.0.2, de-registerDefaults</p>\n\n<pre><code>val strategies = ExchangeStrategies.builder()\n                .codecs { configurer -&gt;\n                    configurer.registerDefaults(false)\n                    configurer.customCodecs().encoder(Jackson2JsonEncoder(objectMapper, APPLICATION_JSON))\n                    configurer.customCodecs().decoder(Jackson2JsonDecoder(objectMapper, APPLICATION_JSON))\n                }.build()\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2904275,"reputation":12430,"user_id":2490074,"accept_rate":62,"display_name":"Sarvar Nishonboyev"},"comment_count":0,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1586955036,"creation_date":1586955036,"answer_id":61229164,"question_id":43769301,"body_markdown":"Configuring globally:\r\n\r\n```\r\n@Configuration\r\npublic class AppConfig {\r\n\r\n    private final ObjectMapper objectMapper;\r\n\r\n    @Autowired\r\n    public AppConfig(ObjectMapper objectMapper) {\r\n        this.objectMapper = objectMapper;\r\n        this.webClientBuilder = WebClient.builder()\r\n                .exchangeStrategies(exchangeStrategies());\r\n    }\r\n\r\n    private ExchangeStrategies exchangeStrategies() {\r\n        Jackson2JsonEncoder encoder = new Jackson2JsonEncoder(objectMapper);\r\n        Jackson2JsonDecoder decoder = new Jackson2JsonDecoder(objectMapper);\r\n        return ExchangeStrategies\r\n                .builder()\r\n                .codecs(configurer -&gt; {\r\n                    configurer.defaultCodecs().jackson2JsonEncoder(encoder);\r\n                    configurer.defaultCodecs().jackson2JsonDecoder(decoder);\r\n                }).build();\r\n    }\r\n}\r\n```\r\n\r\n","title":"How to customize SpringWebFlux WebClient JSON deserialization?","body":"<p>Configuring globally:</p>\n\n<pre><code>@Configuration\npublic class AppConfig {\n\n    private final ObjectMapper objectMapper;\n\n    @Autowired\n    public AppConfig(ObjectMapper objectMapper) {\n        this.objectMapper = objectMapper;\n        this.webClientBuilder = WebClient.builder()\n                .exchangeStrategies(exchangeStrategies());\n    }\n\n    private ExchangeStrategies exchangeStrategies() {\n        Jackson2JsonEncoder encoder = new Jackson2JsonEncoder(objectMapper);\n        Jackson2JsonDecoder decoder = new Jackson2JsonDecoder(objectMapper);\n        return ExchangeStrategies\n                .builder()\n                .codecs(configurer -&gt; {\n                    configurer.defaultCodecs().jackson2JsonEncoder(encoder);\n                    configurer.defaultCodecs().jackson2JsonDecoder(decoder);\n                }).build();\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1999642,"reputation":786,"user_id":1790988,"display_name":"Martin"},"score":0,"creation_date":1589811445,"post_id":61867063,"comment_id":109433542,"body_markdown":"Thanks for this - I should really update the question with code for more recent Spring  versions...","body":"Thanks for this - I should really update the question with code for more recent Spring  versions..."}],"tags":[],"owner":{"account_id":4470329,"reputation":1272,"user_id":3636822,"display_name":"tomasulo"},"comment_count":1,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1589796132,"creation_date":1589796132,"answer_id":61867063,"question_id":43769301,"body_markdown":"Since Spring `5.1.13` you can use a dedicated `.codec` method to customize them:\r\n\r\n```\r\nWebClient.builder()\r\n    .codecs(configurer -&gt; {\r\n        configurer.defaultCodecs().jackson2JsonEncoder(new Jackson2JsonEncoder(new ObjectMapper(), MediaType.APPLICATION_JSON));\r\n        configurer.defaultCodecs().jackson2JsonDecoder(new Jackson2JsonDecoder(new ObjectMapper(), MediaType.APPLICATION_JSON));\r\n     })\r\n    .build();","title":"How to customize SpringWebFlux WebClient JSON deserialization?","body":"<p>Since Spring <code>5.1.13</code> you can use a dedicated <code>.codec</code> method to customize them:</p>\n\n<pre><code>WebClient.builder()\n    .codecs(configurer -&gt; {\n        configurer.defaultCodecs().jackson2JsonEncoder(new Jackson2JsonEncoder(new ObjectMapper(), MediaType.APPLICATION_JSON));\n        configurer.defaultCodecs().jackson2JsonDecoder(new Jackson2JsonDecoder(new ObjectMapper(), MediaType.APPLICATION_JSON));\n     })\n    .build();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12040719,"reputation":2536,"user_id":8807741,"display_name":"SeverityOne"},"comment_count":0,"down_vote_count":0,"up_vote_count":15,"is_accepted":false,"score":15,"last_activity_date":1604583742,"creation_date":1601307196,"answer_id":64105246,"question_id":43769301,"body_markdown":"Based on the replies above, I ended up with this code:\r\n\r\n    final ObjectMapper mapper = new ObjectMapper()\r\n        .findAndRegisterModules()\r\n        .enable(DeserializationFeature.ACCEPT_EMPTY_STRING_AS_NULL_OBJECT);\r\n    final ExchangeStrategies exchangeStrategies = ExchangeStrategies.builder()\r\n        .codecs(configurer -&gt; configurer.defaultCodecs()\r\n        .jackson2JsonDecoder(new Jackson2JsonDecoder(mapper)))\r\n        .build();\r\n    final WebClient webClient = WebClient.builder()\r\n        .exchangeStrategies(exchangeStrategies)\r\n        .build();\r\n\r\nIf you don&#39;t include `.findAndRegisterModules()`, you&#39;re going to have problems when you want to deserialise things like Java 8&#39;s time objects.","title":"How to customize SpringWebFlux WebClient JSON deserialization?","body":"<p>Based on the replies above, I ended up with this code:</p>\n<pre><code>final ObjectMapper mapper = new ObjectMapper()\n    .findAndRegisterModules()\n    .enable(DeserializationFeature.ACCEPT_EMPTY_STRING_AS_NULL_OBJECT);\nfinal ExchangeStrategies exchangeStrategies = ExchangeStrategies.builder()\n    .codecs(configurer -&gt; configurer.defaultCodecs()\n    .jackson2JsonDecoder(new Jackson2JsonDecoder(mapper)))\n    .build();\nfinal WebClient webClient = WebClient.builder()\n    .exchangeStrategies(exchangeStrategies)\n    .build();\n</code></pre>\n<p>If you don't include <code>.findAndRegisterModules()</code>, you're going to have problems when you want to deserialise things like Java 8's time objects.</p>\n"},{"tags":[],"owner":{"account_id":1525566,"reputation":1183,"user_id":1424108,"display_name":"ibai"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1687863665,"creation_date":1687863665,"answer_id":76564187,"question_id":43769301,"body_markdown":"If anyone interested in customizing the `WebTestClient` during a test, then it would be a similar approach. Just need to mutate the original bean.\r\n\r\n```\r\n@Autowired\r\nprivate WebTestClient webTestClient;\r\n\r\n@Test\r\nvoid test() {\r\n    webTestClient.mutate()\r\n        .codecs(clientCodecConfigurer -&gt; clientCodecConfigurer.defaultCodecs()\r\n            .jackson2JsonDecoder(new Jackson2JsonDecoder(CUSTOM_OBJECT_MAPPER, MediaType.APPLICATION_JSON)))\r\n        .build()\r\n        .get()\r\n        .uri(&quot;/test-endpoint&quot;)\r\n        .exchange()\r\n        .expectStatus().isOk();\r\n\r\n```","title":"How to customize SpringWebFlux WebClient JSON deserialization?","body":"<p>If anyone interested in customizing the <code>WebTestClient</code> during a test, then it would be a similar approach. Just need to mutate the original bean.</p>\n<pre><code>@Autowired\nprivate WebTestClient webTestClient;\n\n@Test\nvoid test() {\n    webTestClient.mutate()\n        .codecs(clientCodecConfigurer -&gt; clientCodecConfigurer.defaultCodecs()\n            .jackson2JsonDecoder(new Jackson2JsonDecoder(CUSTOM_OBJECT_MAPPER, MediaType.APPLICATION_JSON)))\n        .build()\n        .get()\n        .uri(&quot;/test-endpoint&quot;)\n        .exchange()\n        .expectStatus().isOk();\n\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7298493,"reputation":304,"user_id":5562284,"display_name":"nouveu"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690189528,"creation_date":1690189528,"answer_id":76752914,"question_id":43769301,"body_markdown":"In case you use Spring Boot then you can use auto-configured `ObjectMapper` and omit verbose codecs configuration. Just define bean like this:\r\n```java\r\n@Bean\r\npublic WebClient webClient(WebClient.Builder builder) {\r\n    return builder.build();\r\n}\r\n```\r\n\r\nAs I explained [here][1] Spring Boot does auto-configure `WebClient` **builder**. When you create instance by hand it uses built-in defaults and then you have to manually update codecs using one of methods above.\r\n\r\n\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/76752610/5562284","title":"How to customize SpringWebFlux WebClient JSON deserialization?","body":"<p>In case you use Spring Boot then you can use auto-configured <code>ObjectMapper</code> and omit verbose codecs configuration. Just define bean like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Bean\npublic WebClient webClient(WebClient.Builder builder) {\n    return builder.build();\n}\n</code></pre>\n<p>As I explained <a href=\"https://stackoverflow.com/a/76752610/5562284\">here</a> Spring Boot does auto-configure <code>WebClient</code> <strong>builder</strong>. When you create instance by hand it uses built-in defaults and then you have to manually update codecs using one of methods above.</p>\n"},{"tags":[],"owner":{"account_id":184786,"reputation":18896,"user_id":421049,"accept_rate":50,"display_name":"Garret Wilson"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690306581,"creation_date":1690306581,"answer_id":76765254,"question_id":43769301,"body_markdown":"The most direct, concise, and surgical way I&#39;ve found, which I read about in in Baeldung&#39;s [_Spring Boot: Customize the Jackson ObjectMapper_][1], is to use a `Jackson2ObjectMapperBuilderCustomizer`. It looks like this:\r\n\r\n```java\r\n@Configuration\r\npublic class MyAppConfiguration {\r\n\r\n  @Bean\r\n  public Jackson2ObjectMapperBuilderCustomizer jacksonJsonCustomizer() {\r\n    return builder -&gt; builder.modulesToInstall(/*TODO specify modules here);\r\n  }\r\n\r\n}\r\n```\r\n\r\nI&#39;ve verified that this works with Spring Data as well as WebFlux, e.g. `WebClient` and `.bodyToMono(SomeType.class)`. It even works in conjunction with `WebClientCustomizer` if you happen to be using that for customizing the `WebClient`; see the answers to https://stackoverflow.com/q/76080315 .\r\n\r\n\r\n\r\n\r\n  [1]: https://www.baeldung.com/spring-boot-customize-jackson-objectmapper","title":"How to customize SpringWebFlux WebClient JSON deserialization?","body":"<p>The most direct, concise, and surgical way I've found, which I read about in in Baeldung's <a href=\"https://www.baeldung.com/spring-boot-customize-jackson-objectmapper\" rel=\"nofollow noreferrer\"><em>Spring Boot: Customize the Jackson ObjectMapper</em></a>, is to use a <code>Jackson2ObjectMapperBuilderCustomizer</code>. It looks like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\npublic class MyAppConfiguration {\n\n  @Bean\n  public Jackson2ObjectMapperBuilderCustomizer jacksonJsonCustomizer() {\n    return builder -&gt; builder.modulesToInstall(/*TODO specify modules here);\n  }\n\n}\n</code></pre>\n<p>I've verified that this works with Spring Data as well as WebFlux, e.g. <code>WebClient</code> and <code>.bodyToMono(SomeType.class)</code>. It even works in conjunction with <code>WebClientCustomizer</code> if you happen to be using that for customizing the <code>WebClient</code>; see the answers to <a href=\"https://stackoverflow.com/q/76080315\">Spring WebClient.Builder timeout defaults and overrides for runtimes</a> .</p>\n"}],"owner":{"account_id":1999642,"reputation":786,"user_id":1790988,"display_name":"Martin"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":61065,"favorite_count":0,"down_vote_count":0,"up_vote_count":71,"answer_count":9,"score":71,"last_activity_date":1690306581,"creation_date":1493842859,"question_id":43769301,"body_markdown":"I&#39;m using a [spring-webflux WebClient](https://docs.spring.io/spring/docs/5.0.0.BUILD-SNAPSHOT/javadoc-api/org/springframework/web/reactive/function/client/WebClient.html)  (build 20170502.221452-172) to access a Web application producing a stream of _Entry_ objects (application/stream+json) like this:\r\n    \r\n    final WebClient producerClient = WebClient.create(&quot;http://localhost:8080/&quot;);\r\n\r\n    Flux&lt;Entry&gt; entries = producerClient.get().uri(&quot;json-stream&quot;)\r\n            .accept(MediaType.APPLICATION_STREAM_JSON)\r\n            .exchange()\r\n            .flatMapMany(clientResponse -&gt; clientResponse.bodyToFlux(Entry.class));\r\n\r\nWhile the deserialization of the _Entry_ objects works fine for POJOs using standard common types including Java time (JSR-310) datatypes like java.time.Instant, I wonder what I would have to do in order to add any custom JSON to Java deserialization (e. g., a custom Jackson ObjectMapper). \r\n\r\nI can&#39;t find any API in [WebClient](https://docs.spring.io/spring/docs/5.0.0.BUILD-SNAPSHOT/javadoc-api/org/springframework/web/reactive/function/client/WebClient.html) or in the classes of the objects produced by its builder and fluent APIs to do that. \r\n\r\nHas anybody used WebClient with customized deserialization?\r\n\r\n(Maybe the API is not there, yet?)   ","title":"How to customize SpringWebFlux WebClient JSON deserialization?","body":"<p>I'm using a <a href=\"https://docs.spring.io/spring/docs/5.0.0.BUILD-SNAPSHOT/javadoc-api/org/springframework/web/reactive/function/client/WebClient.html\" rel=\"noreferrer\">spring-webflux WebClient</a>  (build 20170502.221452-172) to access a Web application producing a stream of <em>Entry</em> objects (application/stream+json) like this:</p>\n\n<pre><code>final WebClient producerClient = WebClient.create(\"http://localhost:8080/\");\n\nFlux&lt;Entry&gt; entries = producerClient.get().uri(\"json-stream\")\n        .accept(MediaType.APPLICATION_STREAM_JSON)\n        .exchange()\n        .flatMapMany(clientResponse -&gt; clientResponse.bodyToFlux(Entry.class));\n</code></pre>\n\n<p>While the deserialization of the <em>Entry</em> objects works fine for POJOs using standard common types including Java time (JSR-310) datatypes like java.time.Instant, I wonder what I would have to do in order to add any custom JSON to Java deserialization (e. g., a custom Jackson ObjectMapper). </p>\n\n<p>I can't find any API in <a href=\"https://docs.spring.io/spring/docs/5.0.0.BUILD-SNAPSHOT/javadoc-api/org/springframework/web/reactive/function/client/WebClient.html\" rel=\"noreferrer\">WebClient</a> or in the classes of the objects produced by its builder and fluent APIs to do that. </p>\n\n<p>Has anybody used WebClient with customized deserialization?</p>\n\n<p>(Maybe the API is not there, yet?)   </p>\n"},{"tags":["java","rest","hp-alm"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1690814500,"post_id":76765240,"comment_id":135401698,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"owner":{"account_id":29089701,"reputation":1,"user_id":22283871,"display_name":"Mykola"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":15,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690306494,"creation_date":1690306429,"question_id":76765240,"body_markdown":"Trying to create custom script using HP ALM Rest API and while all endpoints are working fine \\bp-components endpoint gives me following:\r\n\r\nResponse code: 403\r\n{&quot;Id&quot;:&quot;qccore.operation-forbidden&quot;,&quot;Title&quot;:&quot;Access to this resource has been denied&quot;,&quot;ExceptionProperties&quot;:null,&quot;StackTrace&quot;:null}\r\n\r\nDoes anyone were able to access BPT resources via rest api?\r\nThanks!\r\n","title":"&quot;Access to this resource has been denied&quot; for Business Components endpoint in HP ALM Rest API","body":"<p>Trying to create custom script using HP ALM Rest API and while all endpoints are working fine \\bp-components endpoint gives me following:</p>\n<p>Response code: 403\n{&quot;Id&quot;:&quot;qccore.operation-forbidden&quot;,&quot;Title&quot;:&quot;Access to this resource has been denied&quot;,&quot;ExceptionProperties&quot;:null,&quot;StackTrace&quot;:null}</p>\n<p>Does anyone were able to access BPT resources via rest api?\nThanks!</p>\n"},{"tags":["java","spring","spring-boot","spring-mvc"],"comments":[{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1690353162,"post_id":76764767,"comment_id":135339636,"body_markdown":"Well the name is a give-away it is a `ThreadLocal` it is bound to a thread, if you start/use another thread it doesn&#39;t have access to it anymore because it is a different thread. A `ThreadLocal` is basically a `Map` with the `Thread` as the key. The problem is your completable futures those already run on a thread before accessig the request hence there is nothing. Instead let the `@Async` method return a `CompletableFuture` and use those instead.","body":"Well the name is a give-away it is a <code>ThreadLocal</code> it is bound to a thread, if you start/use another thread it doesn&#39;t have access to it anymore because it is a different thread. A <code>ThreadLocal</code> is basically a <code>Map</code> with the <code>Thread</code> as the key. The problem is your completable futures those already run on a thread before accessig the request hence there is nothing. Instead let the <code>@Async</code> method return a <code>CompletableFuture</code> and use those instead."}],"owner":{"account_id":2221547,"reputation":1350,"user_id":1960809,"accept_rate":68,"display_name":"blitzen12"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":69,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690306219,"creation_date":1690302675,"question_id":76764767,"body_markdown":"Hello I have here an `async` controller and inside a controller which also calls an `async` method to retrieve user from an API. I wanted to access the userToken which can be found in the requestAttributes where I will be using it to decrypt the encryptedId. Following the answer from [here][1], I was able to access the user token from `ThreadLocalData` however when I try to make my controller asynchronous this is where it no longer works.\r\n\r\n`MyController.java`\r\n\r\n    @Async(&quot;taskExecutor&quot;)\r\n    @GetMapping(value = &quot;/users&quot;)\r\n    public Callable&lt;ResponseEntity&lt;GetUserResponse&gt;&gt; getCashFlowTotals(\r\n            final UserToken accessToken,\r\n            @RequestParam MultiValueMap&lt;String,String&gt; params\r\n    ) throws ExecutionException, InterruptedException, JsonProcessingException {\r\n        \r\n        List&lt;CompletableFuture&lt;GetUserResponse&gt;&gt; futures = new ArrayList&lt;&gt;();\r\n        params.get(&quot;encryptedIds&quot;).forEach(param -&gt; {\r\n            futures.add(userService.getUserDetails(param));\r\n        });\r\n\r\n        CompletableFuture&lt;List&lt;GetUserResponse&gt;&gt; userCompletableFuture = CompletableFuture.allOf(futures.toArray(new CompletableFuture[0])).thenApply(v -&gt; {\r\n            return futures.stream().map(CompletableFuture::join).collect(Collectors.toList());\r\n        });\r\n\r\n        return () -&gt; ResponseEntity.ok(GetUserResponse.builder().user(totalsCompletableFuture.join()).build());\r\n    }\r\n\r\n\r\n`UserService.java`\r\n\r\n    @Async(&quot;taskExecutor&quot;)\r\n    public GetUserResponse getUserDetails(String encryptedIds) {\r\n        Request request = requestFactory.createUserRequest(encryptedIds);\r\n\r\n        //Retrieve user from an API\r\n\r\n        UserToken userToken = ThreadLocalData.getAccessToken(); // This is where it returns empty.\r\n\r\n        return this.formatResponse(userList, encryptedIds);\r\n    }\r\n\r\n`ThreadLocalData.java`\r\n\r\n    public class ThreadLocalData {\r\n    private ThreadLocalData() {}\r\n\r\n    private static final ThreadLocal&lt;Map&lt;String, Object&gt;&gt; ctx = ThreadLocal.withInitial(\r\n            HashMap::new\r\n    );\r\n\r\n    public static Map&lt;String, Object&gt; getContext() {\r\n        return ctx.get();\r\n    }\r\n\r\n    public static void setContext(Map&lt;String, Object&gt; map) {\r\n        ctx.set(map);\r\n    }\r\n\r\n    public static void removeContext() {\r\n        ctx.remove();\r\n    }\r\n\r\n    public static Optional&lt;AccessToken&gt; getUserToken() {\r\n        if (ctx.get().containsKey(&quot;__access_token__&quot;)) {\r\n            return Optional.ofNullable((UserToken) ctx.get().get(&quot;__access_token__&quot;));\r\n        }\r\n\r\n        return Optional.empty();\r\n      }\r\n   }\r\n\r\n`Configuration.java`\r\n\r\n    @Bean(name = &quot;taskExecutor&quot;)\r\n    public Executor taskExecutor() {\r\n        ThreadPoolTaskExecutor executor = new ThreadPoolTaskExecutor();\r\n        executor.setTaskDecorator(runnable -&gt; {\r\n            RequestAttributes requestAttributes = RequestContextHolder.getRequestAttributes();\r\n            Map&lt;String, Object&gt; map;\r\n\r\n            if (requestAttributes != null) {\r\n                map = Arrays.stream(requestAttributes.getAttributeNames(0))\r\n                                .collect(Collectors.toMap(\r\n                                        r -&gt; r,\r\n                                        r -&gt; requestAttributes.getAttribute(r, 0)\r\n                                ));\r\n            } else {\r\n                map = new HashMap&lt;&gt;();\r\n            }\r\n\r\n            return () -&gt; {\r\n                    try {\r\n                        ThreadLocalData.setContext(map);\r\n                        runnable.run();\r\n                    } finally {\r\n                       ThreadLocalData.removeContext()\r\n                    }\r\n\r\n            };\r\n        });\r\n        executor.setCorePoolSize(10);\r\n        executor.setMaxPoolSize(15);\r\n        executor.setQueueCapacity(100);\r\n        executor.setThreadNamePrefix(&quot;asyncThread-&quot;);\r\n        executor.initialize();\r\n\r\n        return executor;\r\n    }\r\n\r\n \r\nDoes anyone here have an idea on what did I miss or how could I get it working?\r\n\r\n  [1]: https://stackoverflow.com/a/58700745/1960809","title":"custom threadlocal data returns null with async within async","body":"<p>Hello I have here an <code>async</code> controller and inside a controller which also calls an <code>async</code> method to retrieve user from an API. I wanted to access the userToken which can be found in the requestAttributes where I will be using it to decrypt the encryptedId. Following the answer from <a href=\"https://stackoverflow.com/a/58700745/1960809\">here</a>, I was able to access the user token from <code>ThreadLocalData</code> however when I try to make my controller asynchronous this is where it no longer works.</p>\n<p><code>MyController.java</code></p>\n<pre><code>@Async(&quot;taskExecutor&quot;)\n@GetMapping(value = &quot;/users&quot;)\npublic Callable&lt;ResponseEntity&lt;GetUserResponse&gt;&gt; getCashFlowTotals(\n        final UserToken accessToken,\n        @RequestParam MultiValueMap&lt;String,String&gt; params\n) throws ExecutionException, InterruptedException, JsonProcessingException {\n    \n    List&lt;CompletableFuture&lt;GetUserResponse&gt;&gt; futures = new ArrayList&lt;&gt;();\n    params.get(&quot;encryptedIds&quot;).forEach(param -&gt; {\n        futures.add(userService.getUserDetails(param));\n    });\n\n    CompletableFuture&lt;List&lt;GetUserResponse&gt;&gt; userCompletableFuture = CompletableFuture.allOf(futures.toArray(new CompletableFuture[0])).thenApply(v -&gt; {\n        return futures.stream().map(CompletableFuture::join).collect(Collectors.toList());\n    });\n\n    return () -&gt; ResponseEntity.ok(GetUserResponse.builder().user(totalsCompletableFuture.join()).build());\n}\n</code></pre>\n<p><code>UserService.java</code></p>\n<pre><code>@Async(&quot;taskExecutor&quot;)\npublic GetUserResponse getUserDetails(String encryptedIds) {\n    Request request = requestFactory.createUserRequest(encryptedIds);\n\n    //Retrieve user from an API\n\n    UserToken userToken = ThreadLocalData.getAccessToken(); // This is where it returns empty.\n\n    return this.formatResponse(userList, encryptedIds);\n}\n</code></pre>\n<p><code>ThreadLocalData.java</code></p>\n<pre><code>public class ThreadLocalData {\nprivate ThreadLocalData() {}\n\nprivate static final ThreadLocal&lt;Map&lt;String, Object&gt;&gt; ctx = ThreadLocal.withInitial(\n        HashMap::new\n);\n\npublic static Map&lt;String, Object&gt; getContext() {\n    return ctx.get();\n}\n\npublic static void setContext(Map&lt;String, Object&gt; map) {\n    ctx.set(map);\n}\n\npublic static void removeContext() {\n    ctx.remove();\n}\n\npublic static Optional&lt;AccessToken&gt; getUserToken() {\n    if (ctx.get().containsKey(&quot;__access_token__&quot;)) {\n        return Optional.ofNullable((UserToken) ctx.get().get(&quot;__access_token__&quot;));\n    }\n\n    return Optional.empty();\n  }\n</code></pre>\n<p>}</p>\n<p><code>Configuration.java</code></p>\n<pre><code>@Bean(name = &quot;taskExecutor&quot;)\npublic Executor taskExecutor() {\n    ThreadPoolTaskExecutor executor = new ThreadPoolTaskExecutor();\n    executor.setTaskDecorator(runnable -&gt; {\n        RequestAttributes requestAttributes = RequestContextHolder.getRequestAttributes();\n        Map&lt;String, Object&gt; map;\n\n        if (requestAttributes != null) {\n            map = Arrays.stream(requestAttributes.getAttributeNames(0))\n                            .collect(Collectors.toMap(\n                                    r -&gt; r,\n                                    r -&gt; requestAttributes.getAttribute(r, 0)\n                            ));\n        } else {\n            map = new HashMap&lt;&gt;();\n        }\n\n        return () -&gt; {\n                try {\n                    ThreadLocalData.setContext(map);\n                    runnable.run();\n                } finally {\n                   ThreadLocalData.removeContext()\n                }\n\n        };\n    });\n    executor.setCorePoolSize(10);\n    executor.setMaxPoolSize(15);\n    executor.setQueueCapacity(100);\n    executor.setThreadNamePrefix(&quot;asyncThread-&quot;);\n    executor.initialize();\n\n    return executor;\n}\n</code></pre>\n<p>Does anyone here have an idea on what did I miss or how could I get it working?</p>\n"},{"tags":["java","spring-boot","gradle","jar","executable-jar"],"comments":[{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":0,"creation_date":1690306572,"post_id":76765206,"comment_id":135334044,"body_markdown":"&quot;*How do I tell the java -jar command to keep running?*&quot; - You don&#39;t. The application should keep running. This is an indication for another issue. Can you [edit] the post and add the relevant code?","body":"&quot;<i>How do I tell the java -jar command to keep running?</i>&quot; - You don&#39;t. The application should keep running. This is an indication for another issue. Can you <a href=\"https://stackoverflow.com/posts/76765206/edit\">edit</a> the post and add the relevant code?"},{"owner":{"account_id":7975532,"reputation":103,"user_id":6018837,"display_name":"Daniel Matev"},"score":2,"creation_date":1690306770,"post_id":76765206,"comment_id":135334085,"body_markdown":"Remove the  `org.springframework.boot:spring-boot-starter-tomcat`, it&#39;s conflicting with `org.springframework.boot:spring-boot-starter-web`.","body":"Remove the  <code>org.springframework.boot:spring-boot-starter-tomcat</code>, it&#39;s conflicting with <code>org.springframework.boot:spring-boot-starter-web</code>."},{"owner":{"account_id":12908744,"reputation":3232,"user_id":9335205,"accept_rate":50,"display_name":"JGleason"},"score":0,"creation_date":1690313597,"post_id":76765206,"comment_id":135335373,"body_markdown":"I tried that but the same issue I actually just added it back after I saw a couple posts and wanted to include it in case someone suggested it.","body":"I tried that but the same issue I actually just added it back after I saw a couple posts and wanted to include it in case someone suggested it."}],"owner":{"account_id":12908744,"reputation":3232,"user_id":9335205,"accept_rate":50,"display_name":"JGleason"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690306114,"creation_date":1690306114,"question_id":76765206,"body_markdown":"I have a simple spring boot application with the following in my build.gradle...\r\n\r\n```\r\ndependencies {\r\n    implementation &#39;org.springframework.boot:spring-boot-starter-oauth2-client&#39;\r\n    implementation &#39;org.springframework.boot:spring-boot-starter-web&#39;\r\n    providedRuntime &#39;org.springframework.boot:spring-boot-starter-tomcat&#39;\r\n    testImplementation &#39;org.springframework.boot:spring-boot-starter-test&#39;\r\n}\r\n```\r\n\r\nWhen I run `gradle bootRun` everything works great but when I run `gradle assemble` and then try running the jar with `java -jar` the application seems to boot properly and I see \r\n\r\n```\r\n13:21:41.132 [main] INFO com.jrgleason.App -- Started App in 1.104 seconds (process running for 1.312\r\n```\r\n\r\nBut it immediately stops running after that. How do I tell the `java -jar` command to keep running?","title":"Why is my Spring Boot Application exiting after starting when ran with &#39;java -jar&#39;","body":"<p>I have a simple spring boot application with the following in my build.gradle...</p>\n<pre><code>dependencies {\n    implementation 'org.springframework.boot:spring-boot-starter-oauth2-client'\n    implementation 'org.springframework.boot:spring-boot-starter-web'\n    providedRuntime 'org.springframework.boot:spring-boot-starter-tomcat'\n    testImplementation 'org.springframework.boot:spring-boot-starter-test'\n}\n</code></pre>\n<p>When I run <code>gradle bootRun</code> everything works great but when I run <code>gradle assemble</code> and then try running the jar with <code>java -jar</code> the application seems to boot properly and I see</p>\n<pre><code>13:21:41.132 [main] INFO com.jrgleason.App -- Started App in 1.104 seconds (process running for 1.312\n</code></pre>\n<p>But it immediately stops running after that. How do I tell the <code>java -jar</code> command to keep running?</p>\n"},{"tags":["java","oop","design-patterns","dependency-injection","inversion-of-control"],"comments":[{"owner":{"account_id":465573,"reputation":192703,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":1,"creation_date":1666387485,"post_id":74159270,"comment_id":130933544,"body_markdown":"Nope, it&#39;s normal.","body":"Nope, it&#39;s normal."},{"owner":{"account_id":12434767,"reputation":3949,"user_id":9055634,"accept_rate":22,"display_name":"Jim"},"score":0,"creation_date":1666387531,"post_id":74159270,"comment_id":130933555,"body_markdown":"@LouisWasserman: So having e.g. 8 classes injected is normal and there is no need for further re-design?","body":"@LouisWasserman: So having e.g. 8 classes injected is normal and there is no need for further re-design?"},{"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"score":0,"creation_date":1666420840,"post_id":74159270,"comment_id":130937340,"body_markdown":"This question is probably not a great fit for Stack Overflow&#39;s requirements, as it is fairly broad and likely to attract opinion-based answers. The general strategy is to consider grouping some of the related dependencies behind a [facade](https://en.wikipedia.org/wiki/Facade_pattern). If none of them are related, perhaps the class still has too many responsibilities.","body":"This question is probably not a great fit for Stack Overflow&#39;s requirements, as it is fairly broad and likely to attract opinion-based answers. The general strategy is to consider grouping some of the related dependencies behind a <a href=\"https://en.wikipedia.org/wiki/Facade_pattern\" rel=\"nofollow noreferrer\">facade</a>. If none of them are related, perhaps the class still has too many responsibilities."},{"owner":{"account_id":12434767,"reputation":3949,"user_id":9055634,"accept_rate":22,"display_name":"Jim"},"score":0,"creation_date":1666425594,"post_id":74159270,"comment_id":130937943,"body_markdown":"@TimMoore: What is a good way to determine/analyse if I need to use facade?","body":"@TimMoore: What is a good way to determine/analyse if I need to use facade?"},{"owner":{"account_id":12434767,"reputation":3949,"user_id":9055634,"accept_rate":22,"display_name":"Jim"},"score":0,"creation_date":1666425729,"post_id":74159270,"comment_id":130937956,"body_markdown":"@TimMoore: The issue with using the facade is that the individual classes are not really related","body":"@TimMoore: The issue with using the facade is that the individual classes are not really related"},{"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"score":0,"creation_date":1666427180,"post_id":74159270,"comment_id":130938106,"body_markdown":"It might be easier to answer this if the question contained a specific example","body":"It might be easier to answer this if the question contained a specific example"},{"owner":{"account_id":1809965,"reputation":36736,"user_id":1646240,"accept_rate":91,"display_name":"StepUp"},"score":0,"creation_date":1666470669,"post_id":74159270,"comment_id":130946460,"body_markdown":"could you show, please, code?","body":"could you show, please, code?"}],"answers":[{"tags":[],"owner":{"account_id":97618,"reputation":168086,"user_id":264697,"accept_rate":100,"display_name":"Steven"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1690305452,"creation_date":1666429352,"answer_id":74162257,"question_id":74159270,"body_markdown":"If your class has 8 dependencies, as you note in the comments, it likely means the class is exhibiting the [Constructor Over-Injection][1] code smell. This code smell is linked to the [Single Responsibility Principle][2]. It is an indication that your class is still doing too much.\r\n\r\nThere are many design patterns that can help you in further reducing the number of dependencies that the class had and therefore lowering the number of responsibilities and, in the end, lowering the complexity of these classes. Although there are many, two interesting patterns that come to my mind are:\r\n\r\n* **The [Decorator design pattern][3];** which is especially suited for extracting Cross-Cutting Concerns like logging out of the class that contains the core/business functionality\r\n* **The [Facade Service refactoring][4];** which hides a group of dependencies with their behavior behind a single, simplified abstraction, allowing the complexity of the original class to be reduced. This pattern is a specific form of the more general [Extract Class refactoring][5].\r\n\r\nI&#39;m naming these two patterns because they are often beneficial in the context of DI. There are, of course, many more patterns and refactorings that might be applicable to your situation, but it would not be useful trying to list them all. With concrete code examples, I might be able to give more specific guidance.\r\n\r\n  [1]: https://blog.ploeh.dk/2018/08/27/on-constructor-over-injection/\r\n  [2]: https://en.wikipedia.org/wiki/Single-responsibility_principle\r\n  [3]: https://en.wikipedia.org/wiki/Decorator_pattern\r\n  [4]: https://blog.ploeh.dk/2010/02/02/RefactoringtoAggregateServices/\r\n  [5]: https://refactoring.com/catalog/extractClass.html","title":"Is there a design pattern for the case of too many injected classes/dependencies?","body":"<p>If your class has 8 dependencies, as you note in the comments, it likely means the class is exhibiting the <a href=\"https://blog.ploeh.dk/2018/08/27/on-constructor-over-injection/\" rel=\"nofollow noreferrer\">Constructor Over-Injection</a> code smell. This code smell is linked to the <a href=\"https://en.wikipedia.org/wiki/Single-responsibility_principle\" rel=\"nofollow noreferrer\">Single Responsibility Principle</a>. It is an indication that your class is still doing too much.</p>\n<p>There are many design patterns that can help you in further reducing the number of dependencies that the class had and therefore lowering the number of responsibilities and, in the end, lowering the complexity of these classes. Although there are many, two interesting patterns that come to my mind are:</p>\n<ul>\n<li><strong>The <a href=\"https://en.wikipedia.org/wiki/Decorator_pattern\" rel=\"nofollow noreferrer\">Decorator design pattern</a>;</strong> which is especially suited for extracting Cross-Cutting Concerns like logging out of the class that contains the core/business functionality</li>\n<li><strong>The <a href=\"https://blog.ploeh.dk/2010/02/02/RefactoringtoAggregateServices/\" rel=\"nofollow noreferrer\">Facade Service refactoring</a>;</strong> which hides a group of dependencies with their behavior behind a single, simplified abstraction, allowing the complexity of the original class to be reduced. This pattern is a specific form of the more general <a href=\"https://refactoring.com/catalog/extractClass.html\" rel=\"nofollow noreferrer\">Extract Class refactoring</a>.</li>\n</ul>\n<p>I'm naming these two patterns because they are often beneficial in the context of DI. There are, of course, many more patterns and refactorings that might be applicable to your situation, but it would not be useful trying to list them all. With concrete code examples, I might be able to give more specific guidance.</p>\n"},{"tags":[],"owner":{"account_id":1809965,"reputation":36736,"user_id":1646240,"accept_rate":91,"display_name":"StepUp"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1666474389,"creation_date":1666474389,"answer_id":74167237,"question_id":74159270,"body_markdown":"If class has too many dependencies, then it is one if the sign that it does many things. So try to design your class to have fewer dependencies.\r\n\r\nIf you think that design of your class is okay, then you can try to group some classes into one and initialize it through dependency injection. This class will be like some one plase to do one tightly coupled operation. ","title":"Is there a design pattern for the case of too many injected classes/dependencies?","body":"<p>If class has too many dependencies, then it is one if the sign that it does many things. So try to design your class to have fewer dependencies.</p>\n<p>If you think that design of your class is okay, then you can try to group some classes into one and initialize it through dependency injection. This class will be like some one plase to do one tightly coupled operation.</p>\n"}],"owner":{"account_id":12434767,"reputation":3949,"user_id":9055634,"accept_rate":22,"display_name":"Jim"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":715,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1690305452,"creation_date":1666387362,"question_id":74159270,"body_markdown":"I have a class that does too many things (many responsibilities). E.g. logging, loading data from various databases, methods that are doing extraneous calculation/processing as well as the main processing method that is this class&#39;s responsibility.  \r\nI have split the class to multiple classes each doing a specific thing and inject the classes to the original one.  \r\nThe concern I have is that now I am injecting quite a few classes and I am not sure if that is considered bad design or code smell.  \r\nIs there some design pattern, similar as there is e.g. builder pattern for the case of having functions with too many parameters, that addresses the case of having many injected dependencies in a class?","title":"Is there a design pattern for the case of too many injected classes/dependencies?","body":"<p>I have a class that does too many things (many responsibilities). E.g. logging, loading data from various databases, methods that are doing extraneous calculation/processing as well as the main processing method that is this class's responsibility.<br />\nI have split the class to multiple classes each doing a specific thing and inject the classes to the original one.<br />\nThe concern I have is that now I am injecting quite a few classes and I am not sure if that is considered bad design or code smell.<br />\nIs there some design pattern, similar as there is e.g. builder pattern for the case of having functions with too many parameters, that addresses the case of having many injected dependencies in a class?</p>\n"},{"tags":["java","desktop-application"],"answers":[{"comments":[{"owner":{"account_id":31293,"reputation":43494,"user_id":85821,"accept_rate":73,"display_name":"Bart van Heukelom"},"score":0,"creation_date":1340286505,"post_id":11139625,"comment_id":14601572,"body_markdown":"I&#39;ve tested that on Windows 7 where it returns `C:\\User\\John`, whereas I probably want `C:\\Users\\John\\AppData\\Local`","body":"I&#39;ve tested that on Windows 7 where it returns <code>C:\\User\\John</code>, whereas I probably want <code>C:\\Users\\John\\AppData\\Local</code>"},{"owner":{"account_id":1418971,"reputation":15473,"user_id":1344008,"display_name":"npe"},"score":0,"creation_date":1340286561,"post_id":11139625,"comment_id":14601610,"body_markdown":"@BartvanHeukelom, well, that&#39;s because it returns your `home` folder, not `AppData`.","body":"@BartvanHeukelom, well, that&#39;s because it returns your <code>home</code> folder, not <code>AppData</code>."},{"owner":{"account_id":183279,"reputation":168313,"user_id":418556,"accept_rate":98,"display_name":"Andrew Thompson"},"score":0,"creation_date":1340286603,"post_id":11139625,"comment_id":14601630,"body_markdown":"`user.home` is a place that is guaranteed to be writable, and is x-plat.  Maybe you can use an environment variable where known and `user.home` otherwise.","body":"<code>user.home</code> is a place that is guaranteed to be writable, and is x-plat.  Maybe you can use an environment variable where known and <code>user.home</code> otherwise."},{"owner":{"account_id":31293,"reputation":43494,"user_id":85821,"accept_rate":73,"display_name":"Bart van Heukelom"},"score":0,"creation_date":1340286928,"post_id":11139625,"comment_id":14601820,"body_markdown":"@npe So it doesn&#39;t return what I need, does it? ;)","body":"@npe So it doesn&#39;t return what I need, does it? ;)"},{"owner":{"account_id":31293,"reputation":43494,"user_id":85821,"accept_rate":73,"display_name":"Bart van Heukelom"},"score":0,"creation_date":1340287023,"post_id":11139625,"comment_id":14601863,"body_markdown":"@AndrewThompson Using the APPDATA environment var might work, yes. Why don&#39;t you put it as answer?","body":"@AndrewThompson Using the APPDATA environment var might work, yes. Why don&#39;t you put it as answer?"}],"tags":[],"owner":{"account_id":1418971,"reputation":15473,"user_id":1344008,"display_name":"npe"},"comment_count":5,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1340286444,"creation_date":1340286444,"answer_id":11139625,"question_id":11139552,"body_markdown":"Use `user.home` system property. Like this:\r\n\r\n\r\n    String userHomePath = System.getProperty(&quot;user.home&quot;);\r\n    File myAwesomeFolder = new File(useHomePath, &quot;myAweSomeApp&quot;);\r\n    myAwesomeFolder.mkdirs();","title":"Creating a local storage directory in Java desktop app","body":"<p>Use <code>user.home</code> system property. Like this:</p>\n\n<pre><code>String userHomePath = System.getProperty(\"user.home\");\nFile myAwesomeFolder = new File(useHomePath, \"myAweSomeApp\");\nmyAwesomeFolder.mkdirs();\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1427644,"reputation":47321,"user_id":1350762,"display_name":"maba"},"score":0,"creation_date":1340286705,"post_id":11139677,"comment_id":14601699,"body_markdown":"That might be a good place for preferences as he says, but history data should probably not be there.","body":"That might be a good place for preferences as he says, but history data should probably not be there."},{"owner":{"account_id":31293,"reputation":43494,"user_id":85821,"accept_rate":73,"display_name":"Bart van Heukelom"},"score":0,"creation_date":1340286794,"post_id":11139677,"comment_id":14601738,"body_markdown":"Indeed it doesn&#39;t seem to fit entirely, but interesting nonetheless. I didn&#39;t know of this API.","body":"Indeed it doesn&#39;t seem to fit entirely, but interesting nonetheless. I didn&#39;t know of this API."},{"owner":{"account_id":7450,"reputation":269220,"user_id":12960,"display_name":"Brian Agnew"},"score":0,"creation_date":1340286996,"post_id":11139677,"comment_id":14601848,"body_markdown":"I guess the question around history may depend on how *much* history. Both APIs will have the capability, but perhaps some load testing is in order","body":"I guess the question around history may depend on how <i>much</i> history. Both APIs will have the capability, but perhaps some load testing is in order"}],"tags":[],"owner":{"account_id":7450,"reputation":269220,"user_id":12960,"display_name":"Brian Agnew"},"comment_count":3,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1690305216,"creation_date":1340286634,"answer_id":11139677,"question_id":11139552,"body_markdown":"You could always use the [Java Preferences API][1] which will store info per-user and you don&#39;t have to worry about the implementation. Different implementations are available for different platforms but that&#39;s hidden from you (the client).\r\n\r\nAn alternative is to use the [Apache Commons Configuration][2] API, which is more complex, but gives you a lot more features.\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/prefs/Preferences.html\r\n  [2]: https://commons.apache.org/proper/commons-configuration/userguide/user_guide.html","title":"Creating a local storage directory in Java desktop app","body":"<p>You could always use the <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/prefs/Preferences.html\" rel=\"nofollow noreferrer\">Java Preferences API</a> which will store info per-user and you don't have to worry about the implementation. Different implementations are available for different platforms but that's hidden from you (the client).</p>\n<p>An alternative is to use the <a href=\"https://commons.apache.org/proper/commons-configuration/userguide/user_guide.html\" rel=\"nofollow noreferrer\">Apache Commons Configuration</a> API, which is more complex, but gives you a lot more features.</p>\n"},{"comments":[{"owner":{"account_id":31293,"reputation":43494,"user_id":85821,"accept_rate":73,"display_name":"Bart van Heukelom"},"score":0,"creation_date":1340287192,"post_id":11139697,"comment_id":14601965,"body_markdown":"This is anything but cross-platform.","body":"This is anything but cross-platform."}],"tags":[],"owner":{"account_id":1363065,"reputation":1271,"user_id":1300056,"accept_rate":33,"display_name":"RTA"},"comment_count":1,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1340286686,"creation_date":1340286686,"answer_id":11139697,"question_id":11139552,"body_markdown":"not confirmed about Linux but you can make entry to windows registry too.\r\n\r\neither way,\r\n\r\n    String path = System.getProperty(&quot;user.home&quot;)+ &quot;\\\\AppLication Data&quot;+&quot;\\\\xyzFolder&quot;;\r\n\r\nthis works for both windows 7 to because %appData% shows the path which legacy for above.\r\n","title":"Creating a local storage directory in Java desktop app","body":"<p>not confirmed about Linux but you can make entry to windows registry too.</p>\n\n<p>either way,</p>\n\n<pre><code>String path = System.getProperty(\"user.home\")+ \"\\\\AppLication Data\"+\"\\\\xyzFolder\";\n</code></pre>\n\n<p>this works for both windows 7 to because %appData% shows the path which legacy for above.</p>\n"},{"comments":[{"owner":{"account_id":31293,"reputation":43494,"user_id":85821,"accept_rate":73,"display_name":"Bart van Heukelom"},"score":0,"creation_date":1340286873,"post_id":11139727,"comment_id":14601795,"body_markdown":"See question and npe&#39;s answer","body":"See question and npe&#39;s answer"},{"owner":{"account_id":1570718,"reputation":148,"user_id":1458461,"display_name":"jayeff"},"score":0,"creation_date":1340292403,"post_id":11139727,"comment_id":14604709,"body_markdown":"Yeah, I noticed when I was finished dropping my answer.","body":"Yeah, I noticed when I was finished dropping my answer."}],"tags":[],"owner":{"account_id":1570718,"reputation":148,"user_id":1458461,"display_name":"jayeff"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1340286781,"creation_date":1340286781,"answer_id":11139727,"question_id":11139552,"body_markdown":"How about storing the app-folder into the user home directory? You can get it per System.getProperty(&quot;user.home&quot;), see http://docs.oracle.com/javase/tutorial/essential/environment/sysprop.html","title":"Creating a local storage directory in Java desktop app","body":"<p>How about storing the app-folder into the user home directory? You can get it per System.getProperty(\"user.home\"), see <a href=\"http://docs.oracle.com/javase/tutorial/essential/environment/sysprop.html\" rel=\"nofollow\">http://docs.oracle.com/javase/tutorial/essential/environment/sysprop.html</a></p>\n"},{"tags":[],"owner":{"account_id":183279,"reputation":168313,"user_id":418556,"accept_rate":98,"display_name":"Andrew Thompson"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1340292886,"creation_date":1340291381,"answer_id":11141176,"question_id":11139552,"body_markdown":"    import java.io.File;\r\n    \r\n    public class AppPathFolder {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tString path = null;\r\n    \t\tString osName = System.getProperty(&quot;os.name&quot;).toLowerCase();\r\n    \t\tif (osName.indexOf(&quot;windows&quot;)&gt;-1) {\r\n    \t\t\tpath = System.getenv(&quot;APPDATA&quot;);\r\n    \t\t} else if (osName.indexOf(&quot;mac&quot;)&gt;-1) {\r\n    \t\t\t// get the env. variable for Mac..\r\n    \t\t\tpath = System.getenv(&quot;?&quot;);\r\n    \t\t\t// etc. for Linux, Unix, Solaris..\r\n    \t\t} else { //anything else\r\n    \t\t\tpath = System.getProperty(&quot;user.home&quot;);\r\n    \t\t}\r\n    \t\tFile rootOfPath = new File(path);\r\n    \t\t// create a sub-directory based on package name of main class..\r\n    \t\t// perhaps prefixed with with java/appdata\r\n    \t\tSystem.out.println(rootOfPath);\r\n    \t}\r\n    }\r\n\r\n\r\nOf course, there are other options for small amounts of data: \r\n\r\n- Apps. that are trusted or have no security manager might use the [`Preferences`](http://docs.oracle.com/javase/7/docs/api/java/util/prefs/Preferences.html) API\r\n- A desktop app. launched using [Java Web Start](https://stackoverflow.com/tags/java-web-start/info) has access to the JNLP API, wich offers the `PersistenceService` - available even to sand-boxed apps.\r\n- An applet can store cookies.\r\n","title":"Creating a local storage directory in Java desktop app","body":"<pre><code>import java.io.File;\n\npublic class AppPathFolder {\n\n    public static void main(String[] args) {\n        String path = null;\n        String osName = System.getProperty(\"os.name\").toLowerCase();\n        if (osName.indexOf(\"windows\")&gt;-1) {\n            path = System.getenv(\"APPDATA\");\n        } else if (osName.indexOf(\"mac\")&gt;-1) {\n            // get the env. variable for Mac..\n            path = System.getenv(\"?\");\n            // etc. for Linux, Unix, Solaris..\n        } else { //anything else\n            path = System.getProperty(\"user.home\");\n        }\n        File rootOfPath = new File(path);\n        // create a sub-directory based on package name of main class..\n        // perhaps prefixed with with java/appdata\n        System.out.println(rootOfPath);\n    }\n}\n</code></pre>\n\n<p>Of course, there are other options for small amounts of data: </p>\n\n<ul>\n<li>Apps. that are trusted or have no security manager might use the <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/prefs/Preferences.html\" rel=\"nofollow noreferrer\"><code>Preferences</code></a> API</li>\n<li>A desktop app. launched using <a href=\"https://stackoverflow.com/tags/java-web-start/info\">Java Web Start</a> has access to the JNLP API, wich offers the <code>PersistenceService</code> - available even to sand-boxed apps.</li>\n<li>An applet can store cookies.</li>\n</ul>\n"}],"owner":{"account_id":31293,"reputation":43494,"user_id":85821,"accept_rate":73,"display_name":"Bart van Heukelom"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4275,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"answer_count":5,"score":6,"last_activity_date":1690305216,"creation_date":1340286174,"question_id":11139552,"body_markdown":"I&#39;m building a Java desktop application and need to store some local data (preferences and history). For this I&#39;d like to create a new folder in the appropriate location, like *AppData\\myapp* in Windows and *~/.myapp* in Linux (and wherever is expected on a Mac).\r\n\r\nWhat is the nice, cross-platform way to do that?\r\n\r\n----\r\n\r\nI&#39;ve seen several questions on this site that ask about this, but either:\r\n\r\n- The asker wants to find Windows&#39; *Application Data* (not cross-platform)\r\n- The solution is to create a folder in `user.home` (Linux style, not cross-platform) This is what I currently do, but I&#39;m looking for an improvement.","title":"Creating a local storage directory in Java desktop app","body":"<p>I'm building a Java desktop application and need to store some local data (preferences and history). For this I'd like to create a new folder in the appropriate location, like <em>AppData\\myapp</em> in Windows and <em>~/.myapp</em> in Linux (and wherever is expected on a Mac).</p>\n\n<p>What is the nice, cross-platform way to do that?</p>\n\n<hr>\n\n<p>I've seen several questions on this site that ask about this, but either:</p>\n\n<ul>\n<li>The asker wants to find Windows' <em>Application Data</em> (not cross-platform)</li>\n<li>The solution is to create a folder in <code>user.home</code> (Linux style, not cross-platform) This is what I currently do, but I'm looking for an improvement.</li>\n</ul>\n"},{"tags":["java","android","kotlin","android-studio"],"answers":[{"comments":[{"owner":{"account_id":29088944,"reputation":55,"user_id":22283269,"display_name":"Keval"},"score":0,"creation_date":1690425067,"post_id":76765031,"comment_id":135353116,"body_markdown":"I am not getting that option to select the language at the creation of a project","body":"I am not getting that option to select the language at the creation of a project"},{"owner":{"account_id":11813923,"reputation":342,"user_id":8644685,"display_name":"Ivan Abakumov"},"score":0,"creation_date":1690508092,"post_id":76765031,"comment_id":135367139,"body_markdown":"@Keval\nwhat version of android studio do you have installed?","body":"@Keval what version of android studio do you have installed?"},{"owner":{"account_id":29088944,"reputation":55,"user_id":22283269,"display_name":"Keval"},"score":0,"creation_date":1690599571,"post_id":76765031,"comment_id":135379905,"body_markdown":"@lvan Abakumov Flamingo 2022.2.1 Patch 2","body":"@lvan Abakumov Flamingo 2022.2.1 Patch 2"},{"owner":{"account_id":11813923,"reputation":342,"user_id":8644685,"display_name":"Ivan Abakumov"},"score":0,"creation_date":1690621498,"post_id":76765031,"comment_id":135381373,"body_markdown":"@Keval\nHave you looked at this [solution](https://stackoverflow.com/a/76065186/8644685)?\n\nIt says here that if you choose a project with jetpack compose, then in this case there will be only Kotlin.","body":"@Keval Have you looked at this <a href=\"https://stackoverflow.com/a/76065186/8644685\">solution</a>?  It says here that if you choose a project with jetpack compose, then in this case there will be only Kotlin."},{"owner":{"account_id":29088944,"reputation":55,"user_id":22283269,"display_name":"Keval"},"score":0,"creation_date":1690728275,"post_id":76765031,"comment_id":135390725,"body_markdown":"@lvan Abakumov ok got it. Thanks for helping me","body":"@lvan Abakumov ok got it. Thanks for helping me"}],"tags":[],"owner":{"account_id":11813923,"reputation":342,"user_id":8644685,"display_name":"Ivan Abakumov"},"comment_count":5,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1690304804,"creation_date":1690304804,"answer_id":76765031,"question_id":76764736,"body_markdown":"You don&#39;t have to worry about this. With each new project creation, Android Studio lets you choose the language in which the project will be.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/1azeW.jpg","title":"Change language in android studio from kotlin to java","body":"<p>You don't have to worry about this. With each new project creation, Android Studio lets you choose the language in which the project will be.</p>\n<p><a href=\"https://i.stack.imgur.com/1azeW.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1azeW.jpg\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":29088944,"reputation":55,"user_id":22283269,"display_name":"Keval"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":272,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"closed_date":1690339887,"accepted_answer_id":76765031,"answer_count":1,"score":2,"last_activity_date":1690304804,"creation_date":1690302438,"question_id":76764736,"body_markdown":"i selected kotlin by mistake at the time of installation of android studio now how to change it to java?\r\n\r\nI haven&#39;t started to code yet so no worries about files or anything\r\n\r\nAnd i have started the project so provide the solution to change the language after starting the project\r\n\r\nAnd i also tried clean installation but whenever i reinstall it doesn&#39;t even give me option to select a language, however it gave me option to create a new project and everything...\r\n\r\nWhen i create a new project i don&#39;t get option to select a language or i counld have made  a new project\r\n\r\nAnd also a default file named MainActivity.kt should be in .java","title":"Change language in android studio from kotlin to java","body":"<p>i selected kotlin by mistake at the time of installation of android studio now how to change it to java?</p>\n<p>I haven't started to code yet so no worries about files or anything</p>\n<p>And i have started the project so provide the solution to change the language after starting the project</p>\n<p>And i also tried clean installation but whenever i reinstall it doesn't even give me option to select a language, however it gave me option to create a new project and everything...</p>\n<p>When i create a new project i don't get option to select a language or i counld have made  a new project</p>\n<p>And also a default file named MainActivity.kt should be in .java</p>\n"},{"tags":["java","r","installation","arm64","rjava"],"comments":[{"owner":{"account_id":3207579,"reputation":1665,"user_id":2726543,"accept_rate":83,"display_name":"Avraham"},"score":0,"creation_date":1690305658,"post_id":76765021,"comment_id":135333877,"body_markdown":"You may wish to look at the [openxlsx](https://CRAN.R-project.org/package=openxlsx) package which provides similar functonality without any Java dependency. It&#39;s based on C++ and Rcpp.","body":"You may wish to look at the <a href=\"https://CRAN.R-project.org/package=openxlsx\" rel=\"nofollow noreferrer\">openxlsx</a> package which provides similar functonality without any Java dependency. It&#39;s based on C++ and Rcpp."},{"owner":{"account_id":6814076,"reputation":12697,"user_id":5295429,"display_name":"Oo.oO"},"score":0,"creation_date":1698387501,"post_id":76765021,"comment_id":136401306,"body_markdown":"I haven&#39;t tried recent versions for quite some time, but sometimes it&#39;s easiest to build stuff from the sources: https://www.owsiak.org/r-java-11-and-making-sure-you-can-load-rjava/ https://www.owsiak.org/r4-0-with-java-14-inside-macos-10-15-4/","body":"I haven&#39;t tried recent versions for quite some time, but sometimes it&#39;s easiest to build stuff from the sources: <a href=\"https://www.owsiak.org/r-java-11-and-making-sure-you-can-load-rjava/\" rel=\"nofollow noreferrer\">owsiak.org/r-java-11-and-making-sure-you-can-load-rjava</a> <a href=\"https://www.owsiak.org/r4-0-with-java-14-inside-macos-10-15-4/\" rel=\"nofollow noreferrer\">owsiak.org/r4-0-with-java-14-inside-macos-10-15-4</a>"}],"owner":{"account_id":29089304,"reputation":1,"user_id":22283563,"display_name":"Yunna Lin"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":70,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690304727,"creation_date":1690304727,"question_id":76765021,"body_markdown":"I am having trouble loading the xlsx package on R (via RStudio). The error message I get when I try to call the package is as below. \r\n\r\n```\r\n&gt; library(xlsx)\r\nError: package or namespace load failed for ‘xlsx’:\r\n .onLoad failed in loadNamespace() for &#39;rJava&#39;, details:\r\n  call: dyn.load(jli, FALSE)\r\n  error: unable to load shared object &#39;/Library/Internet Plug-Ins/JavaAppletPlugin.plugin/Contents/Home/lib/jli/libjli.dylib&#39;:\r\n  dlopen(/Library/Internet Plug-Ins/JavaAppletPlugin.plugin/Contents/Home/lib/jli/libjli.dylib, 0x000A): tried: &#39;/Library/Internet Plug-Ins/JavaAppletPlugin.plugin/Contents/Home/lib/jli/libjli.dylib&#39; (mach-o file, but is an incompatible architecture (have &#39;x86_64&#39;, need &#39;arm64&#39;)), &#39;/System/Volumes/Preboot/Cryptexes/OS/Library/Internet Plug-Ins/JavaAppletPlugin.plugin/Contents/Home/lib/jli/libjli.dylib&#39; (no such file), &#39;/Library/Internet Plug-Ins/JavaAppletPlugin.plugin/Contents/Home/lib/jli/libjli.dylib&#39; (mach-o file, but is an incompatible architecture (have &#39;x86_64&#39;, need &#39;arm64&#39;))\r\n```\r\n\r\nFrom what I can understand this seems to be a rJava issue and not a problem with library(xlsx) per se. I can confirm that the xlsx package is installed on my computer, it just can&#39;t be loaded. I&#39;m using a MacBook running arm64, and I&#39;m running the arm64 version of both R and Rstudio.\r\n\r\nI tried to replace my existing version of Java with the arm64 version of the JRE (obtained from this link: https://www.java.com/en/download/). According to terminal, `java -version` now returns  \r\n```\r\njava version &quot;1.8.0_381&quot;\r\nJava(TM) SE Runtime Environment (build 1.8.0_381-b09)\r\nJava HotSpot(TM) 64-Bit Server VM (build 25.381-b09, mixed mode)\r\n```\r\nHowever now when I try to run the xlsx package on R I get the following fatal error:\r\n\r\n```\r\n# A fatal error has been detected by the Java Runtime Environment:\r\n#\r\n#  SIGSEGV (0xb) at pc=0x00000002880bf2cc, pid=1308, tid=0x0000000000000103\r\n#\r\n# JRE version: Java(TM) SE Runtime Environment (8.0_381) (build 1.8.0_381-b09)\r\n# Java VM: Java HotSpot(TM) 64-Bit Server VM (25.381-b09 mixed mode bsd-aarch64 compressed oops)\r\n# Problematic frame:\r\n# v  ~StubRoutines::jshort_disjoint_arraycopy\r\n#\r\n# Failed to write core dump. Core dumps have been disabled. To enable core dumping, try &quot;ulimit -c unlimited&quot; before starting Java again\r\n#\r\n# If you would like to submit a bug report, please visit:\r\n#   http://bugreport.java.com/bugreport/crash.jsp\r\n```\r\n\r\nLooks like I&#39;ve somehow managed to make things worse. Any advice would be appreciated!","title":"Potential Java/arm64 error when loading the xlsx package in R?","body":"<p>I am having trouble loading the xlsx package on R (via RStudio). The error message I get when I try to call the package is as below.</p>\n<pre><code>&gt; library(xlsx)\nError: package or namespace load failed for ‘xlsx’:\n .onLoad failed in loadNamespace() for 'rJava', details:\n  call: dyn.load(jli, FALSE)\n  error: unable to load shared object '/Library/Internet Plug-Ins/JavaAppletPlugin.plugin/Contents/Home/lib/jli/libjli.dylib':\n  dlopen(/Library/Internet Plug-Ins/JavaAppletPlugin.plugin/Contents/Home/lib/jli/libjli.dylib, 0x000A): tried: '/Library/Internet Plug-Ins/JavaAppletPlugin.plugin/Contents/Home/lib/jli/libjli.dylib' (mach-o file, but is an incompatible architecture (have 'x86_64', need 'arm64')), '/System/Volumes/Preboot/Cryptexes/OS/Library/Internet Plug-Ins/JavaAppletPlugin.plugin/Contents/Home/lib/jli/libjli.dylib' (no such file), '/Library/Internet Plug-Ins/JavaAppletPlugin.plugin/Contents/Home/lib/jli/libjli.dylib' (mach-o file, but is an incompatible architecture (have 'x86_64', need 'arm64'))\n</code></pre>\n<p>From what I can understand this seems to be a rJava issue and not a problem with library(xlsx) per se. I can confirm that the xlsx package is installed on my computer, it just can't be loaded. I'm using a MacBook running arm64, and I'm running the arm64 version of both R and Rstudio.</p>\n<p>I tried to replace my existing version of Java with the arm64 version of the JRE (obtained from this link: <a href=\"https://www.java.com/en/download/\" rel=\"nofollow noreferrer\">https://www.java.com/en/download/</a>). According to terminal, <code>java -version</code> now returns</p>\n<pre><code>java version &quot;1.8.0_381&quot;\nJava(TM) SE Runtime Environment (build 1.8.0_381-b09)\nJava HotSpot(TM) 64-Bit Server VM (build 25.381-b09, mixed mode)\n</code></pre>\n<p>However now when I try to run the xlsx package on R I get the following fatal error:</p>\n<pre><code># A fatal error has been detected by the Java Runtime Environment:\n#\n#  SIGSEGV (0xb) at pc=0x00000002880bf2cc, pid=1308, tid=0x0000000000000103\n#\n# JRE version: Java(TM) SE Runtime Environment (8.0_381) (build 1.8.0_381-b09)\n# Java VM: Java HotSpot(TM) 64-Bit Server VM (25.381-b09 mixed mode bsd-aarch64 compressed oops)\n# Problematic frame:\n# v  ~StubRoutines::jshort_disjoint_arraycopy\n#\n# Failed to write core dump. Core dumps have been disabled. To enable core dumping, try &quot;ulimit -c unlimited&quot; before starting Java again\n#\n# If you would like to submit a bug report, please visit:\n#   http://bugreport.java.com/bugreport/crash.jsp\n</code></pre>\n<p>Looks like I've somehow managed to make things worse. Any advice would be appreciated!</p>\n"},{"tags":["java","spring-boot","spring-data-jpa"],"comments":[{"owner":{"account_id":6904832,"reputation":127,"user_id":5954437,"display_name":"ganeshram"},"score":0,"creation_date":1690302580,"post_id":76764649,"comment_id":135333249,"body_markdown":"Please provide full stack trace of error, if possible.","body":"Please provide full stack trace of error, if possible."},{"owner":{"account_id":19535095,"reputation":2874,"user_id":14294053,"display_name":"Mar-Z"},"score":0,"creation_date":1690303426,"post_id":76764649,"comment_id":135333413,"body_markdown":"Just a wrong class imported. Should be: import org.springframework.boot.orm.jpa.EntityManagerFactoryBuilder;","body":"Just a wrong class imported. Should be: import org.springframework.boot.orm.jpa.EntityManagerFactoryBuilder&zwnj;&#8203;;"},{"owner":{"account_id":27394804,"reputation":51,"user_id":20897193,"display_name":"clickguy"},"score":0,"creation_date":1690303959,"post_id":76764649,"comment_id":135333516,"body_markdown":"OMG @Mar-Z! I knew it was something stupid I was doing. THANK YOU VERY MUCH for your quick helpful answer!","body":"OMG @Mar-Z! I knew it was something stupid I was doing. THANK YOU VERY MUCH for your quick helpful answer!"},{"owner":{"account_id":19535095,"reputation":2874,"user_id":14294053,"display_name":"Mar-Z"},"score":0,"creation_date":1690304533,"post_id":76764649,"comment_id":135333636,"body_markdown":"Cool. Thanks for feedback.","body":"Cool. Thanks for feedback."}],"answers":[{"tags":[],"owner":{"account_id":27394804,"reputation":51,"user_id":20897193,"display_name":"clickguy"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1690304351,"creation_date":1690304046,"answer_id":76764935,"question_id":76764649,"body_markdown":"The answer was simple - and Mar-Z came up with the correct answer:\r\n\r\nJust a wrong class imported. Should be: \r\n```\r\nimport org.springframework.boot.orm.jpa.EntityManagerFactoryBuilder; \r\n```\r\n\r\nand NOT:\r\n```\r\nimport org.hibernate.jpa.boot.spi.EntityManagerFactoryBuilder;\r\n```","title":"Spring Boot 3 - Multiple Data Sources - EntityManagerFactoryBuilder builder Compile Error","body":"<p>The answer was simple - and Mar-Z came up with the correct answer:</p>\n<p>Just a wrong class imported. Should be:</p>\n<pre><code>import org.springframework.boot.orm.jpa.EntityManagerFactoryBuilder; \n</code></pre>\n<p>and NOT:</p>\n<pre><code>import org.hibernate.jpa.boot.spi.EntityManagerFactoryBuilder;\n</code></pre>\n"}],"owner":{"account_id":27394804,"reputation":51,"user_id":20897193,"display_name":"clickguy"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":655,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":76764935,"answer_count":1,"score":-1,"last_activity_date":1690304351,"creation_date":1690301759,"question_id":76764649,"body_markdown":"I need to use multiple data sources in my Spring Boot 3 application. I have configured all the connection properties correctly in my application.properties file (I have used the configuration for single data source projects in the past).\r\n\r\nWhen I try to setup my @Primary data source (it&#39;s the only one I&#39;m trying to setup at this time) - I&#39;m getting a complaint at the line:  ```return builder.dataSource(qaDataSource)```\r\n\r\nThe error is:\r\n```\r\ncannot find symbol\r\n  symbol:  method dataSource(DataSource)\r\n  location: variable builder of type EntityManagerFactoryBuilder\r\n```\r\n\r\nHere&#39;s the class code:\r\n\r\n\r\n```\r\nimport jakarta.persistence.EntityManagerFactory;\r\nimport javax.sql.DataSource;\r\nimport org.hibernate.jpa.boot.spi.EntityManagerFactoryBuilder;\r\nimport org.springframework.beans.factory.annotation.Qualifier;\r\nimport org.springframework.boot.autoconfigure.jdbc.DataSourceProperties;\r\nimport org.springframework.boot.context.properties.ConfigurationProperties;\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.context.annotation.Configuration;\r\nimport org.springframework.context.annotation.Primary;\r\nimport org.springframework.data.jpa.repository.config.EnableJpaRepositories;\r\nimport org.springframework.orm.jpa.JpaTransactionManager;\r\nimport org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean;\r\nimport org.springframework.transaction.PlatformTransactionManager;\r\nimport org.springframework.transaction.annotation.EnableTransactionManagement;\r\n\r\n/**\r\n *\r\n * Configuration for the QA Datasource\r\n * \r\n * \r\n */\r\n@Configuration\r\n@EnableTransactionManagement\r\n@EnableJpaRepositories(\r\n        entityManagerFactoryRef = &quot;qaEntityManagerFactory&quot;,\r\n        transactionManagerRef = &quot;qaTransactionManager&quot;,\r\n        basePackages = { &quot;com.app.repositories&quot; })\r\npublic class QADataConfiguration {\r\n\r\n    @Primary\r\n    @Bean(name=&quot;qaProperties&quot;)\r\n    @ConfigurationProperties(&quot;spring.datasource&quot;)\r\n    public DataSourceProperties dataSourceProperties() {\r\n\r\n        return new DataSourceProperties();\r\n    }\r\n    \r\n    @Primary\r\n    @Bean(name=&quot;qaDatasource&quot;)\r\n    @ConfigurationProperties(prefix = &quot;spring.datasource&quot;)\r\n    public DataSource datasource(@Qualifier(&quot;qaProperties&quot;) DataSourceProperties properties){\r\n\r\n        return properties.initializeDataSourceBuilder().build();\r\n    }\r\n\r\n    @Primary\r\n    @Bean(name=&quot;qaEntityManagerFactory&quot;)\r\n    public LocalContainerEntityManagerFactoryBean entityManagerFactoryBean\r\n            (EntityManagerFactoryBuilder builder,\r\n             @Qualifier(&quot;qaDatasource&quot;) DataSource qaDataSource){\r\n\r\n        return builder.dataSource(qaDataSource)\r\n                .packages(&quot;com.app.config.data.entity.NotifConfig&quot;)\r\n                .persistenceUnit(&quot;qa&quot;).build();\r\n    }\r\n\r\n    @Primary\r\n    @Bean(name = &quot;qaTransactionManager&quot;)\r\n    @ConfigurationProperties(&quot;spring.jpa&quot;)\r\n    public PlatformTransactionManager transactionManager(\r\n            @Qualifier(&quot;userEntityManagerFactory&quot;) EntityManagerFactory entityManagerFactory) {\r\n\r\n        return new JpaTransactionManager(entityManagerFactory);\r\n    }\r\n\r\n}\r\n```\r\n\r\nCompile Error:\r\n\r\n```\r\n-------------------------------------------------------------\r\nCOMPILATION ERROR : \r\n-------------------------------------------------------------\r\ncom/app/config/data/config/QADataConfiguration.java:[55,23] cannot find symbol\r\n  symbol:   method dataSource(javax.sql.DataSource)\r\n  location: variable builder of type org.hibernate.jpa.boot.spi.EntityManagerFactoryBuilder\r\n1 error\r\n-------------------------------------------------------------\r\n------------------------------------------------------------------------\r\nBUILD FAILURE\r\n------------------------------------------------------------------------\r\nTotal time:  19.071 s\r\nFinished at: 2023-07-25T08:02:25-07:00\r\n------------------------------------------------------------------------\r\nFailed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.11.0:compile (default-compile) on project sjconfigurator: Compilation failure\r\ncom/app/config/data/config/QADataConfiguration.java:[55,23] cannot find symbol\r\n  symbol:   method dataSource(javax.sql.DataSource)\r\n  location: variable builder of type org.hibernate.jpa.boot.spi.EntityManagerFactoryBuilder\r\n```\r\n\r\nI&#39;m sure it&#39;s just a case of &quot;stupid user detected&quot;  :) but if someone can help me out - I&#39;d really appreciate it.\r\n","title":"Spring Boot 3 - Multiple Data Sources - EntityManagerFactoryBuilder builder Compile Error","body":"<p>I need to use multiple data sources in my Spring Boot 3 application. I have configured all the connection properties correctly in my application.properties file (I have used the configuration for single data source projects in the past).</p>\n<p>When I try to setup my @Primary data source (it's the only one I'm trying to setup at this time) - I'm getting a complaint at the line:  <code>return builder.dataSource(qaDataSource)</code></p>\n<p>The error is:</p>\n<pre><code>cannot find symbol\n  symbol:  method dataSource(DataSource)\n  location: variable builder of type EntityManagerFactoryBuilder\n</code></pre>\n<p>Here's the class code:</p>\n<pre><code>import jakarta.persistence.EntityManagerFactory;\nimport javax.sql.DataSource;\nimport org.hibernate.jpa.boot.spi.EntityManagerFactoryBuilder;\nimport org.springframework.beans.factory.annotation.Qualifier;\nimport org.springframework.boot.autoconfigure.jdbc.DataSourceProperties;\nimport org.springframework.boot.context.properties.ConfigurationProperties;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.context.annotation.Primary;\nimport org.springframework.data.jpa.repository.config.EnableJpaRepositories;\nimport org.springframework.orm.jpa.JpaTransactionManager;\nimport org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean;\nimport org.springframework.transaction.PlatformTransactionManager;\nimport org.springframework.transaction.annotation.EnableTransactionManagement;\n\n/**\n *\n * Configuration for the QA Datasource\n * \n * \n */\n@Configuration\n@EnableTransactionManagement\n@EnableJpaRepositories(\n        entityManagerFactoryRef = &quot;qaEntityManagerFactory&quot;,\n        transactionManagerRef = &quot;qaTransactionManager&quot;,\n        basePackages = { &quot;com.app.repositories&quot; })\npublic class QADataConfiguration {\n\n    @Primary\n    @Bean(name=&quot;qaProperties&quot;)\n    @ConfigurationProperties(&quot;spring.datasource&quot;)\n    public DataSourceProperties dataSourceProperties() {\n\n        return new DataSourceProperties();\n    }\n    \n    @Primary\n    @Bean(name=&quot;qaDatasource&quot;)\n    @ConfigurationProperties(prefix = &quot;spring.datasource&quot;)\n    public DataSource datasource(@Qualifier(&quot;qaProperties&quot;) DataSourceProperties properties){\n\n        return properties.initializeDataSourceBuilder().build();\n    }\n\n    @Primary\n    @Bean(name=&quot;qaEntityManagerFactory&quot;)\n    public LocalContainerEntityManagerFactoryBean entityManagerFactoryBean\n            (EntityManagerFactoryBuilder builder,\n             @Qualifier(&quot;qaDatasource&quot;) DataSource qaDataSource){\n\n        return builder.dataSource(qaDataSource)\n                .packages(&quot;com.app.config.data.entity.NotifConfig&quot;)\n                .persistenceUnit(&quot;qa&quot;).build();\n    }\n\n    @Primary\n    @Bean(name = &quot;qaTransactionManager&quot;)\n    @ConfigurationProperties(&quot;spring.jpa&quot;)\n    public PlatformTransactionManager transactionManager(\n            @Qualifier(&quot;userEntityManagerFactory&quot;) EntityManagerFactory entityManagerFactory) {\n\n        return new JpaTransactionManager(entityManagerFactory);\n    }\n\n}\n</code></pre>\n<p>Compile Error:</p>\n<pre><code>-------------------------------------------------------------\nCOMPILATION ERROR : \n-------------------------------------------------------------\ncom/app/config/data/config/QADataConfiguration.java:[55,23] cannot find symbol\n  symbol:   method dataSource(javax.sql.DataSource)\n  location: variable builder of type org.hibernate.jpa.boot.spi.EntityManagerFactoryBuilder\n1 error\n-------------------------------------------------------------\n------------------------------------------------------------------------\nBUILD FAILURE\n------------------------------------------------------------------------\nTotal time:  19.071 s\nFinished at: 2023-07-25T08:02:25-07:00\n------------------------------------------------------------------------\nFailed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.11.0:compile (default-compile) on project sjconfigurator: Compilation failure\ncom/app/config/data/config/QADataConfiguration.java:[55,23] cannot find symbol\n  symbol:   method dataSource(javax.sql.DataSource)\n  location: variable builder of type org.hibernate.jpa.boot.spi.EntityManagerFactoryBuilder\n</code></pre>\n<p>I'm sure it's just a case of &quot;stupid user detected&quot;  :) but if someone can help me out - I'd really appreciate it.</p>\n"},{"tags":["java","jvm","sts-springsourcetoolsuite"],"comments":[{"owner":{"account_id":22194,"reputation":18092,"user_id":54506,"accept_rate":78,"display_name":"Jayan"},"score":0,"creation_date":1355200693,"post_id":13813112,"comment_id":19005786,"body_markdown":"are you mixing 64bit STS with 32bit JDK(or vice versa)?","body":"are you mixing 64bit STS with 32bit JDK(or vice versa)?"},{"owner":{"account_id":205160,"reputation":7223,"user_id":453767,"accept_rate":61,"display_name":"Amit Kumar Gupta"},"score":0,"creation_date":1520996093,"post_id":13813112,"comment_id":85541322,"body_markdown":"This question is very old. And I haven&#39;t use STS after that. So I may not be able to try any other answer.","body":"This question is very old. And I haven&#39;t use STS after that. So I may not be able to try any other answer."}],"answers":[{"comments":[{"owner":{"account_id":412271,"reputation":1895,"user_id":785249,"accept_rate":67,"display_name":"noquery"},"score":1,"creation_date":1360803284,"post_id":13831131,"comment_id":20840388,"body_markdown":"I am not finding any big difference in both ini files. I guess problem should be somewhere else. I hope you have set all required environment variables.","body":"I am not finding any big difference in both ini files. I guess problem should be somewhere else. I hope you have set all required environment variables."},{"owner":{"account_id":552215,"reputation":319,"user_id":917279,"accept_rate":100,"display_name":"a_secenthusiast"},"score":1,"creation_date":1447441561,"post_id":13831131,"comment_id":55171913,"body_markdown":"I just added -vm &lt;ful path of javaw.exe&gt; to STS.ini before the -startup option. I was able to start STS. Thank you!","body":"I just added -vm &lt;ful path of javaw.exe&gt; to STS.ini before the -startup option. I was able to start STS. Thank you!"}],"tags":[],"owner":{"account_id":205160,"reputation":7223,"user_id":453767,"accept_rate":61,"display_name":"Amit Kumar Gupta"},"comment_count":2,"down_vote_count":0,"up_vote_count":11,"is_accepted":true,"score":11,"last_activity_date":1355274123,"creation_date":1355274123,"answer_id":13831131,"question_id":13813112,"body_markdown":"Initially I was using STS zip version. Now I installed STS from executable. And it is working fine for me. I required to setup HOME variable, that&#39;s all.\r\n\r\nAttaching the STS.ini from installed STS (for reference).\r\n\r\n\r\n    -vm\r\n    C:\\Program Files\\Java\\jdk1.7.0\\bin\\javaw.exe\r\n    -startup\r\n    plugins/org.eclipse.equinox.launcher_1.3.0.v20120522-1813.jar\r\n    --launcher.library\r\n    plugins/org.eclipse.equinox.launcher.win32.win32.x86_1.1.200.v20120522-1813\r\n    -product\r\n    org.springsource.sts.ide\r\n    --launcher.defaultAction\r\n    openFile\r\n    --launcher.XXMaxPermSize\r\n    256M\r\n    -vmargs\r\n    -Dosgi.requiredJavaVersion=1.5\r\n    -Xms40m\r\n    -Xmx768m\r\n    -XX:MaxPermSize=256m\r\n\r\n","title":"STS is failing to start on my machine","body":"<p>Initially I was using STS zip version. Now I installed STS from executable. And it is working fine for me. I required to setup HOME variable, that's all.</p>\n\n<p>Attaching the STS.ini from installed STS (for reference).</p>\n\n<pre><code>-vm\nC:\\Program Files\\Java\\jdk1.7.0\\bin\\javaw.exe\n-startup\nplugins/org.eclipse.equinox.launcher_1.3.0.v20120522-1813.jar\n--launcher.library\nplugins/org.eclipse.equinox.launcher.win32.win32.x86_1.1.200.v20120522-1813\n-product\norg.springsource.sts.ide\n--launcher.defaultAction\nopenFile\n--launcher.XXMaxPermSize\n256M\n-vmargs\n-Dosgi.requiredJavaVersion=1.5\n-Xms40m\n-Xmx768m\n-XX:MaxPermSize=256m\n</code></pre>\n"},{"tags":[],"owner":{"account_id":911208,"reputation":7563,"user_id":945034,"accept_rate":57,"display_name":"Kumar Sambhav"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1395743733,"creation_date":1395743733,"answer_id":22631888,"question_id":13813112,"body_markdown":"Try running it as administrator.\r\nRight Click --&gt; Run as Administrator.","title":"STS is failing to start on my machine","body":"<p>Try running it as administrator.\nRight Click --> Run as Administrator.</p>\n"},{"tags":[],"owner":{"account_id":1888212,"reputation":31,"user_id":1706984,"display_name":"vik86"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1428745332,"creation_date":1428745332,"answer_id":29576373,"question_id":13813112,"body_markdown":"I&#39;d same issue, On looking at the STS.ini file saw there was double entry of \r\n-vm argument. This error happened to me on updating the STS. Also if it still does not work try running the eclipsec.exe and if that work, then something in ini file is not set correctly.","title":"STS is failing to start on my machine","body":"<p>I'd same issue, On looking at the STS.ini file saw there was double entry of \n-vm argument. This error happened to me on updating the STS. Also if it still does not work try running the eclipsec.exe and if that work, then something in ini file is not set correctly.</p>\n"},{"tags":[],"owner":{"account_id":2784842,"reputation":67281,"user_id":2396539,"accept_rate":78,"display_name":"Aniket Thakur"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1440740687,"creation_date":1440740687,"answer_id":32264098,"question_id":13813112,"body_markdown":"Make sure your STS and JDK that you provide while initializing STS is compatible. What I mean by this is that if your JDK is 64 bit then you should install 64 bit version of Spring suite (`spring-web-4.0.a.RELEASE-installer-x86_64.exe`) and not the 32 bit one.","title":"STS is failing to start on my machine","body":"<p>Make sure your STS and JDK that you provide while initializing STS is compatible. What I mean by this is that if your JDK is 64 bit then you should install 64 bit version of Spring suite (<code>spring-web-4.0.a.RELEASE-installer-x86_64.exe</code>) and not the 32 bit one.</p>\n"},{"tags":[],"owner":{"account_id":902053,"reputation":1613,"user_id":5823681,"display_name":"khd"},"comment_count":0,"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1519279850,"creation_date":1468124482,"answer_id":38288553,"question_id":13813112,"body_markdown":"Delete STS.ini file.\r\nthen it runs correctly and creates a new STS.ini File Automatically","title":"STS is failing to start on my machine","body":"<p>Delete STS.ini file.\nthen it runs correctly and creates a new STS.ini File Automatically</p>\n"},{"comments":[{"owner":{"account_id":3417936,"reputation":1904,"user_id":2866298,"accept_rate":63,"display_name":"osama yaccoub"},"score":0,"creation_date":1661159495,"post_id":39093851,"comment_id":129696849,"body_markdown":"thanks it worked, by the way it happened after I installed java 7 on my machine along with java 8","body":"thanks it worked, by the way it happened after I installed java 7 on my machine along with java 8"}],"tags":[],"owner":{"account_id":3467185,"reputation":77,"user_id":2902426,"display_name":"user2902426"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1690304034,"creation_date":1471933840,"answer_id":39093851,"question_id":13813112,"body_markdown":"I had the same problem yesterday morning. After googling, I saw that the following lines in the STS.ini file were missing (orange marked): [STS.ini][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/BXpzt.png\r\n\r\nAfter adding:\r\n\r\n-vm\r\n\r\n[full path to the javaw.exe]\r\n\r\neverything worked again properly.\r\n\r\n","title":"STS is failing to start on my machine","body":"<p>I had the same problem yesterday morning. After googling, I saw that the following lines in the STS.ini file were missing (orange marked): <a href=\"https://i.stack.imgur.com/BXpzt.png\" rel=\"nofollow noreferrer\">STS.ini</a></p>\n<p>After adding:</p>\n<p>-vm</p>\n<p>[full path to the javaw.exe]</p>\n<p>everything worked again properly.</p>\n"},{"comments":[{"owner":{"account_id":3417936,"reputation":1904,"user_id":2866298,"accept_rate":63,"display_name":"osama yaccoub"},"score":0,"creation_date":1661159499,"post_id":41959718,"comment_id":129696853,"body_markdown":"thanks it worked, by the way it happened after I installed java 7 on my machine along with java 8","body":"thanks it worked, by the way it happened after I installed java 7 on my machine along with java 8"}],"tags":[],"owner":{"account_id":4087284,"reputation":339,"user_id":3356278,"accept_rate":25,"display_name":"Rohit"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1485871897,"creation_date":1485871897,"answer_id":41959718,"question_id":13813112,"body_markdown":"Added line -vm\r\nC:\\Program Files\\Java\\jdk1.8.0_45\\bin\\javaw.exe at the top of sts.ini and it worked for me","title":"STS is failing to start on my machine","body":"<p>Added line -vm\nC:\\Program Files\\Java\\jdk1.8.0_45\\bin\\javaw.exe at the top of sts.ini and it worked for me</p>\n"},{"tags":[],"owner":{"account_id":8821418,"reputation":1,"user_id":6591145,"display_name":"Meharnath B"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1507655352,"creation_date":1507648234,"answer_id":46670180,"question_id":13813112,"body_markdown":"If you are using 32 bit OS, please install 32-bit version of Java 1.8 and similarly 64bit version of java for 64 bit machine.\r\n\r\nAlso, add below vm configurations to your STS.ini file\r\n\r\n\r\n----------\r\n\r\n    -vm \r\n    C:\\Users\\bmeharn\\Documents\\Softwares\\Java8\\jdk1.8.0_131\\bin\\javaw.exe\r\n    -startup\r\n    plugins/org.eclipse.equinox.launcher_1.4.0.v20161219-1356.jar\r\n    --launcher.library\r\n    plugins/org.eclipse.equinox.launcher.win32.win32.x86_64_1.1.500.v20170531-1133\r\n    -product\r\n    org.springsource.sts.ide\r\n    --launcher.defaultAction\r\n    openFile\r\n    -vmargs\r\n    -Dosgi.requiredJavaVersion=1.8\r\n    -Xms40m\r\n    -Dosgi.module.lock.timeout=10\r\n    -Xverify:none\r\n    -Dorg.eclipse.swt.browser.IEVersion=10001\r\n    -Xmx1200m\r\n\r\n\r\n","title":"STS is failing to start on my machine","body":"<p>If you are using 32 bit OS, please install 32-bit version of Java 1.8 and similarly 64bit version of java for 64 bit machine.</p>\n\n<p>Also, add below vm configurations to your STS.ini file</p>\n\n<hr>\n\n<pre><code>-vm \nC:\\Users\\bmeharn\\Documents\\Softwares\\Java8\\jdk1.8.0_131\\bin\\javaw.exe\n-startup\nplugins/org.eclipse.equinox.launcher_1.4.0.v20161219-1356.jar\n--launcher.library\nplugins/org.eclipse.equinox.launcher.win32.win32.x86_64_1.1.500.v20170531-1133\n-product\norg.springsource.sts.ide\n--launcher.defaultAction\nopenFile\n-vmargs\n-Dosgi.requiredJavaVersion=1.8\n-Xms40m\n-Dosgi.module.lock.timeout=10\n-Xverify:none\n-Dorg.eclipse.swt.browser.IEVersion=10001\n-Xmx1200m\n</code></pre>\n"},{"comments":[{"owner":{"account_id":205160,"reputation":7223,"user_id":453767,"accept_rate":61,"display_name":"Amit Kumar Gupta"},"score":0,"creation_date":1530850050,"post_id":51190422,"comment_id":89386896,"body_markdown":"As this post is around 6 years old, I didn&#39;t remember the exact problem. But I didn&#39;t use the STS after that. As per my answer I guess the problem was related to environment variable only.","body":"As this post is around 6 years old, I didn&#39;t remember the exact problem. But I didn&#39;t use the STS after that. As per my answer I guess the problem was related to environment variable only."}],"tags":[],"owner":{"account_id":4760206,"reputation":11,"user_id":3847765,"display_name":"Sanjay KK"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1530790775,"creation_date":1530790775,"answer_id":51190422,"question_id":13813112,"body_markdown":"There are two different downloaders of the STS IDE. May be you have downloaded 32 bit version instead of 64 bits version. Downloaded zip somehow has win32 in either cases.","title":"STS is failing to start on my machine","body":"<p>There are two different downloaders of the STS IDE. May be you have downloaded 32 bit version instead of 64 bits version. Downloaded zip somehow has win32 in either cases.</p>\n"},{"tags":[],"owner":{"account_id":8884633,"reputation":179,"user_id":6633285,"display_name":"Sachin Ghumbre"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1546146098,"creation_date":1546145683,"answer_id":53975364,"question_id":13813112,"body_markdown":"Try Below things and this will surely resolve your issue:\r\n\r\n1. Check your **OS (32 or 64 bit)** and then check STS whether it is compatible with 32 or 64 bit or for both. Now check your **jdk (32 or 64 bit)**\r\n2. If step 1 is validated then update **javaw.exe** path on top in **STS.ini** as given below. Make sure there are no duplicate entries for this path in STS.ini and path is also correct\r\n\r\n**-vm\r\nC:\\Program Files\\Java\\jdk1.8.0_191\\bin\\javaw.exe**\r\n\r\nDone your STS will surely run, best luck !","title":"STS is failing to start on my machine","body":"<p>Try Below things and this will surely resolve your issue:</p>\n\n<ol>\n<li>Check your <strong>OS (32 or 64 bit)</strong> and then check STS whether it is compatible with 32 or 64 bit or for both. Now check your <strong>jdk (32 or 64 bit)</strong></li>\n<li>If step 1 is validated then update <strong>javaw.exe</strong> path on top in <strong>STS.ini</strong> as given below. Make sure there are no duplicate entries for this path in STS.ini and path is also correct</li>\n</ol>\n\n<p><strong>-vm\nC:\\Program Files\\Java\\jdk1.8.0_191\\bin\\javaw.exe</strong></p>\n\n<p>Done your STS will surely run, best luck !</p>\n"},{"tags":[],"owner":{"account_id":12498830,"reputation":1,"user_id":9097905,"display_name":"JavaEngineer"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1558543889,"creation_date":1558543889,"answer_id":56261644,"question_id":13813112,"body_markdown":"Updated -vm properties but still not working. Running sts as Administrator worked for me.","title":"STS is failing to start on my machine","body":"<p>Updated -vm properties but still not working. Running sts as Administrator worked for me.</p>\n"},{"tags":[],"owner":{"account_id":17945185,"reputation":122,"user_id":13039638,"display_name":"uma mahesh"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690303969,"creation_date":1690195556,"answer_id":76753719,"question_id":13813112,"body_markdown":"If your workspace in **one drive** make sure that your one drive is running in windows","title":"STS is failing to start on my machine","body":"<p>If your workspace in <strong>one drive</strong> make sure that your one drive is running in windows</p>\n"}],"owner":{"account_id":205160,"reputation":7223,"user_id":453767,"accept_rate":61,"display_name":"Amit Kumar Gupta"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":34716,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":13831131,"answer_count":12,"score":5,"last_activity_date":1690304034,"creation_date":1355195983,"question_id":13813112,"body_markdown":"I was trying to setup Spring mvc projects on eclipse. Basic projects were working fine. But using restful services, jersey etc started giving so many errors related to dependencies. So I am planning to move on to STS.\r\n\r\nI am using STS 2.9.2. It was giving me &quot;failed to create java virtual machine&quot;. So I added \r\n\r\n    -vm C:\\Program Files\\Java\\jdk1.7.0\\bin\\javaw.exe\r\n\r\nto STS.ini. But now it is giving me following fatal error\r\n\r\n![enter image description here][1]\r\n\r\nBelow is STS.ini\r\n\r\n    -vm\r\n    C:\\Program Files\\Java\\jdk1.7.0\\bin\\javaw.exe\r\n    -startup\r\n    plugins/org.eclipse.equinox.launcher_1.2.0.v20110502.jar\r\n    --launcher.library\r\n    plugins/org.eclipse.equinox.launcher.win32.win32.x86_1.1.100.v20110502\r\n    -product\r\n    com.springsource.sts.ide\r\n    --launcher.defaultAction\r\n    openFile\r\n    --launcher.XXMaxPermSize\r\n    884M\r\n    -vmargs\r\n    -Dosgi.requiredJavaVersion=1.5\r\n    -Xmn128m\r\n    -Xms256m\r\n    -Xmx768m\r\n    -Xss1m\r\n    -XX:PermSize=384m\r\n    -XX:MaxPermSize=768m\r\n\r\n - Eclipse is working perfectly on my machine.\r\n - I don&#39;t want to use Maven or other build tools to solve dependencies related problem due to\r\n   limited internet speed.\r\n\r\n  [1]: http://i.stack.imgur.com/sgK5o.jpg","title":"STS is failing to start on my machine","body":"<p>I was trying to setup Spring mvc projects on eclipse. Basic projects were working fine. But using restful services, jersey etc started giving so many errors related to dependencies. So I am planning to move on to STS.</p>\n\n<p>I am using STS 2.9.2. It was giving me \"failed to create java virtual machine\". So I added </p>\n\n<pre><code>-vm C:\\Program Files\\Java\\jdk1.7.0\\bin\\javaw.exe\n</code></pre>\n\n<p>to STS.ini. But now it is giving me following fatal error</p>\n\n<p><img src=\"https://i.stack.imgur.com/sgK5o.jpg\" alt=\"enter image description here\"></p>\n\n<p>Below is STS.ini</p>\n\n<pre><code>-vm\nC:\\Program Files\\Java\\jdk1.7.0\\bin\\javaw.exe\n-startup\nplugins/org.eclipse.equinox.launcher_1.2.0.v20110502.jar\n--launcher.library\nplugins/org.eclipse.equinox.launcher.win32.win32.x86_1.1.100.v20110502\n-product\ncom.springsource.sts.ide\n--launcher.defaultAction\nopenFile\n--launcher.XXMaxPermSize\n884M\n-vmargs\n-Dosgi.requiredJavaVersion=1.5\n-Xmn128m\n-Xms256m\n-Xmx768m\n-Xss1m\n-XX:PermSize=384m\n-XX:MaxPermSize=768m\n</code></pre>\n\n<ul>\n<li>Eclipse is working perfectly on my machine.</li>\n<li>I don't want to use Maven or other build tools to solve dependencies related problem due to\nlimited internet speed.</li>\n</ul>\n"},{"tags":["java","java-platform-module-system","module-info"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1690222760,"post_id":76756387,"comment_id":135320387,"body_markdown":"*...  then the module must contain opens resources.* No - that&#39;s not necessary","body":"<i>...  then the module must contain opens resources.</i> No - that&#39;s not necessary"},{"owner":{"account_id":15064163,"reputation":13516,"user_id":10871900,"display_name":"dan1st is crying"},"score":0,"creation_date":1690225554,"post_id":76756387,"comment_id":135320798,"body_markdown":"What makes you think you need an `opens` instruction for reading resources? When I create two modules, one with a resource and one using it with `getClassLoader().getResourceAsStream(&quot;META-INF/res/A.txt&quot;)`, I don&#39;t need any `opens` statements.","body":"What makes you think you need an <code>opens</code> instruction for reading resources? When I create two modules, one with a resource and one using it with <code>getClassLoader().getResourceAsStream(&quot;META-INF&#47;res&#47;A.txt&quot;)</code>, I don&#39;t need any <code>opens</code> statements."},{"owner":{"account_id":8235,"reputation":87020,"user_id":14731,"accept_rate":89,"display_name":"Gili"},"score":0,"creation_date":1690301017,"post_id":76756387,"comment_id":135332895,"body_markdown":"@g00se then how do you explain [this exception](https://github.com/testng-team/testng/issues/2727#issue-1128971797)? [Class.getResourceAsStream()](https://github.com/testng-team/testng/blob/04e3e0fa7f8d93151dec408c936d1e27f85b56fe/testng-core/src/main/java/org/testng/reporters/jq/Main.java#L109) is returning `null` when looking up a resource in an external module.","body":"@g00se then how do you explain <a href=\"https://github.com/testng-team/testng/issues/2727#issue-1128971797\" rel=\"nofollow noreferrer\">this exception</a>? <a href=\"https://github.com/testng-team/testng/blob/04e3e0fa7f8d93151dec408c936d1e27f85b56fe/testng-core/src/main/java/org/testng/reporters/jq/Main.java#L109\" rel=\"nofollow noreferrer\">Class.getResourceAsStream()</a> is returning <code>null</code> when looking up a resource in an external module."},{"owner":{"account_id":15064163,"reputation":13516,"user_id":10871900,"display_name":"dan1st is crying"},"score":0,"creation_date":1690301156,"post_id":76756387,"comment_id":135332930,"body_markdown":"Did you try using `ClassLoader#getResourceAsStream` and the full resource name? Can you try to provide an [mcve]?","body":"Did you try using <code>ClassLoader#getResourceAsStream</code> and the full resource name? Can you try to provide an <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>?"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1690302231,"post_id":76756387,"comment_id":135333174,"body_markdown":"*@g00se then how do you explain this exception?* The path to the resource is wrong? In the exception message the resource name is simply the plain file name. That would mean it would have (generally) to be in the same package as the class that loaded it. That, needless to say, is not the correct state of affairs: that Javascript resource should be in a separate resource folder","body":"<i>@g00se then how do you explain this exception?</i> The path to the resource is wrong? In the exception message the resource name is simply the plain file name. That would mean it would have (generally) to be in the same package as the class that loaded it. That, needless to say, is not the correct state of affairs: that Javascript resource should be in a separate resource folder"},{"owner":{"account_id":8235,"reputation":87020,"user_id":14731,"accept_rate":89,"display_name":"Gili"},"score":0,"creation_date":1690302505,"post_id":76756387,"comment_id":135333232,"body_markdown":"@g00se I agree that the path looks wrong, but why would this code work fine on the classpath but break on the module path? Does Java include `/META-INF/resources` in the search path for non-modular code, but removes it for modular code? That seems odd.","body":"@g00se I agree that the path looks wrong, but why would this code work fine on the classpath but break on the module path? Does Java include <code>&#47;META-INF&#47;resources</code> in the search path for non-modular code, but removes it for modular code? That seems odd."},{"owner":{"account_id":15064163,"reputation":13516,"user_id":10871900,"display_name":"dan1st is crying"},"score":0,"creation_date":1690302879,"post_id":76756387,"comment_id":135333307,"body_markdown":"Try to create a minimal reproducer (using the command line) of the issue and show that in your question. I assume there might be some `.class` file or similar in the `META-INF` directory.","body":"Try to create a minimal reproducer (using the command line) of the issue and show that in your question. I assume there might be some <code>.class</code> file or similar in the <code>META-INF</code> directory."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1690303027,"post_id":76756387,"comment_id":135333336,"body_markdown":"`META-INF` is generally nothing to do with resources. To debug, I would print the value of system property `java.class.path` at the app&#39;s entry point","body":"<code>META-INF</code> is generally nothing to do with resources. To debug, I would print the value of system property <code>java.class.path</code> at the app&#39;s entry point"},{"owner":{"account_id":15064163,"reputation":13516,"user_id":10871900,"display_name":"dan1st is crying"},"score":0,"creation_date":1690303113,"post_id":76756387,"comment_id":135333355,"body_markdown":"Are you maybe using multi-release JARs? Because these have `.class` files somewhere in the `META-INF` directory. Try without a multi-release build.","body":"Are you maybe using multi-release JARs? Because these have <code>.class</code> files somewhere in the <code>META-INF</code> directory. Try without a multi-release build."},{"owner":{"account_id":15064163,"reputation":13516,"user_id":10871900,"display_name":"dan1st is crying"},"score":0,"creation_date":1690303665,"post_id":76756387,"comment_id":135333465,"body_markdown":"You might also want to make sure you are using a `Class` from the same `ClassLoader` the resource is located under as well.","body":"You might also want to make sure you are using a <code>Class</code> from the same <code>ClassLoader</code> the resource is located under as well."}],"answers":[{"comments":[{"owner":{"account_id":8235,"reputation":87020,"user_id":14731,"accept_rate":89,"display_name":"Gili"},"score":0,"creation_date":1690303710,"post_id":76764802,"comment_id":135333474,"body_markdown":"You&#39;re right. Per https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/Module.html#getResourceAsStream(java.lang.String):\n\n`If the resource is not in a package in the module then the resource is not encapsulated. [...] A resource name with the name &quot;META-INF/MANIFEST.MF&quot; is never encapsulated because &quot;META-INF&quot; is not a legal package name.` I don&#39;t know what is going on with TestNG but this doesn&#39;t seem to have anything to do with Java Modules. Thank you for pointing in the right direction.","body":"You&#39;re right. Per <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/Module.html#getResourceAsStream(java.lang.String)\" rel=\"nofollow noreferrer\">docs.oracle.com/en/java/javase/20/docs/api/java.base/java/la&zwnj;&#8203;ng/&hellip;</a>:  <code>If the resource is not in a package in the module then the resource is not encapsulated. [...] A resource name with the name &quot;META-INF&#47;MANIFEST.MF&quot; is never encapsulated because &quot;META-INF&quot; is not a legal package name.</code> I don&#39;t know what is going on with TestNG but this doesn&#39;t seem to have anything to do with Java Modules. Thank you for pointing in the right direction."},{"owner":{"account_id":15064163,"reputation":13516,"user_id":10871900,"display_name":"dan1st is crying"},"score":0,"creation_date":1690303781,"post_id":76764802,"comment_id":135333487,"body_markdown":"Note that technically, you could have a class with an &quot;illegal package name&quot; but it cannot be created with `javac` (you&#39;d need to create the class file differently) and it may be different for multi-release JARs where class files are located in subdirectories of `META-INF` (e.g. `META-INF/versions/&lt;Java version&gt;`).","body":"Note that technically, you could have a class with an &quot;illegal package name&quot; but it cannot be created with <code>javac</code> (you&#39;d need to create the class file differently) and it may be different for multi-release JARs where class files are located in subdirectories of <code>META-INF</code> (e.g. <code>META-INF&#47;versions&#47;&lt;Java version&gt;</code>)."}],"tags":[],"owner":{"account_id":15064163,"reputation":13516,"user_id":10871900,"display_name":"dan1st is crying"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1690302931,"creation_date":1690302931,"answer_id":76764802,"question_id":76756387,"body_markdown":"From my testing, opening the package is only necessary when **the file is in the same package as a class in the module**. In that case, you need to open the package of the class in the same module.\r\n\r\nSo, assume you have a project like the following:\r\n```\r\n|-A\r\n| |-module-info.java\r\n| |-a\r\n|   |-A.java\r\n|   |-x\r\n|     |-X\r\n|-B\r\n  |-module-info.java\r\n  |-b\r\n    |-B.java\r\n```\r\nand `A/module-info.java`:\r\n```java\r\nmodule a {\r\n\texports a;\r\n}\r\n```\r\nas well as `B/module-info.java`:\r\n```java\r\nmodule b {\r\n\trequires a;\r\n}\r\n```\r\n\r\nthen compile it with the following commands:\r\n```bash\r\ncd A\r\njavac module-info.java a\\A.java\r\ncd ..\r\ncd B\r\njavac --module-path ..\\A module-info.java b\\B.java\r\ncd ..\r\n```\r\n\r\nThe content of class `A` is irrelevant here (it just needs to exist and have a class/interface/enum/record/whatever declaration with the correct name).\r\n\r\nWe then let `B` read the file `a/x/X` from module `A`:\r\n```java\r\npackage b;\r\n\r\nimport java.io.*;\r\nimport a.A;\r\n\r\npublic class B{\r\n\tpublic static void main(String[] args) throws Exception{\r\n\t\ttry(BufferedReader br = new BufferedReader(new InputStreamReader(A.class.getClassLoader().getResourceAsStream(&quot;a/x/X&quot;)))){\r\n\t\t\tSystem.out.println(br.readLine());\r\n\t\t}\r\n\t}\r\n}\r\n```\r\nWhen running it with\r\n```java\r\njava --module-path A;B -m b/b.B\r\n```\r\nit displays the first line of `a/x/X`.\r\n\r\nHowever, we cannot access files in the same directory as the `A.class` file:\r\n```java\r\npackage b;\r\n\r\nimport java.io.*;\r\nimport a.A;\r\n\r\npublic class B{\r\n\tpublic static void main(String[] args) throws Exception{\r\n\t\ttry(BufferedReader br = new BufferedReader(new InputStreamReader(A.class.getResourceAsStream(&quot;A.java&quot;)))){\r\n\t\t\tSystem.out.println(br.readLine());\r\n\t\t}\r\n\t}\r\n}\r\n```\r\nIf we now add `opens a` in `A/module-info.java` (and recompile the module with the above command), the resource can be read.\r\n\r\nIf we want to read `/META-INF/a/A.txt` or similar (in the `A` module), no `opens` statement is required as there is no class in the same package.","title":"How to access files in /META-INF/resources when module-info.java is present?","body":"<p>From my testing, opening the package is only necessary when <strong>the file is in the same package as a class in the module</strong>. In that case, you need to open the package of the class in the same module.</p>\n<p>So, assume you have a project like the following:</p>\n<pre><code>|-A\n| |-module-info.java\n| |-a\n|   |-A.java\n|   |-x\n|     |-X\n|-B\n  |-module-info.java\n  |-b\n    |-B.java\n</code></pre>\n<p>and <code>A/module-info.java</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>module a {\n    exports a;\n}\n</code></pre>\n<p>as well as <code>B/module-info.java</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>module b {\n    requires a;\n}\n</code></pre>\n<p>then compile it with the following commands:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>cd A\njavac module-info.java a\\A.java\ncd ..\ncd B\njavac --module-path ..\\A module-info.java b\\B.java\ncd ..\n</code></pre>\n<p>The content of class <code>A</code> is irrelevant here (it just needs to exist and have a class/interface/enum/record/whatever declaration with the correct name).</p>\n<p>We then let <code>B</code> read the file <code>a/x/X</code> from module <code>A</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package b;\n\nimport java.io.*;\nimport a.A;\n\npublic class B{\n    public static void main(String[] args) throws Exception{\n        try(BufferedReader br = new BufferedReader(new InputStreamReader(A.class.getClassLoader().getResourceAsStream(&quot;a/x/X&quot;)))){\n            System.out.println(br.readLine());\n        }\n    }\n}\n</code></pre>\n<p>When running it with</p>\n<pre class=\"lang-java prettyprint-override\"><code>java --module-path A;B -m b/b.B\n</code></pre>\n<p>it displays the first line of <code>a/x/X</code>.</p>\n<p>However, we cannot access files in the same directory as the <code>A.class</code> file:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package b;\n\nimport java.io.*;\nimport a.A;\n\npublic class B{\n    public static void main(String[] args) throws Exception{\n        try(BufferedReader br = new BufferedReader(new InputStreamReader(A.class.getResourceAsStream(&quot;A.java&quot;)))){\n            System.out.println(br.readLine());\n        }\n    }\n}\n</code></pre>\n<p>If we now add <code>opens a</code> in <code>A/module-info.java</code> (and recompile the module with the above command), the resource can be read.</p>\n<p>If we want to read <code>/META-INF/a/A.txt</code> or similar (in the <code>A</code> module), no <code>opens</code> statement is required as there is no class in the same package.</p>\n"}],"owner":{"account_id":8235,"reputation":87020,"user_id":14731,"accept_rate":89,"display_name":"Gili"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":81,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":76764802,"answer_count":1,"score":2,"last_activity_date":1690303392,"creation_date":1690215951,"question_id":76756387,"body_markdown":"When TestNG invokes [Class.getResourceAsStream()](https://github.com/testng-team/testng/blob/04e3e0fa7f8d93151dec408c936d1e27f85b56fe/testng-core/src/main/java/org/testng/reporters/jq/Main.java#L109) on an external module, [it is returning null](https://github.com/testng-team/testng/issues/2727#issue-1128971797).\r\n\r\nPer https://stackoverflow.com/questions/59020158/resources-visibility-with-java9-modules#comment104334989_59020158 when a user wants to access `/resources/someResource.xml` in a library that contains `module-info.java`, the module must `opens resources` unconditionally.\r\n\r\nFair enough. But what happens if a user wants to access `/META-INF/resources/someResource.xml` in such a library? What `opens` instruction is necessary in this case?\r\n\r\n**UPDATE**:\r\n\r\nThe bug report was filed against version 7.5 of TestNG. I just noticed that if we [look at the source code](https://github.com/testng-team/testng/blob/release_7.5/testng-core/src/main/java/org/testng/reporters/jq/Main.java#L107C71-L107C71) of that version we see it is trying to load `/META-INF/resources/webjars/jquery/3.5.1/jquery.min.js`.","title":"How to access files in /META-INF/resources when module-info.java is present?","body":"<p>When TestNG invokes <a href=\"https://github.com/testng-team/testng/blob/04e3e0fa7f8d93151dec408c936d1e27f85b56fe/testng-core/src/main/java/org/testng/reporters/jq/Main.java#L109\" rel=\"nofollow noreferrer\">Class.getResourceAsStream()</a> on an external module, <a href=\"https://github.com/testng-team/testng/issues/2727#issue-1128971797\" rel=\"nofollow noreferrer\">it is returning null</a>.</p>\n<p>Per <a href=\"https://stackoverflow.com/questions/59020158/resources-visibility-with-java9-modules#comment104334989_59020158\">Resources visibility with java9 modules</a> when a user wants to access <code>/resources/someResource.xml</code> in a library that contains <code>module-info.java</code>, the module must <code>opens resources</code> unconditionally.</p>\n<p>Fair enough. But what happens if a user wants to access <code>/META-INF/resources/someResource.xml</code> in such a library? What <code>opens</code> instruction is necessary in this case?</p>\n<p><strong>UPDATE</strong>:</p>\n<p>The bug report was filed against version 7.5 of TestNG. I just noticed that if we <a href=\"https://github.com/testng-team/testng/blob/release_7.5/testng-core/src/main/java/org/testng/reporters/jq/Main.java#L107C71-L107C71\" rel=\"nofollow noreferrer\">look at the source code</a> of that version we see it is trying to load <code>/META-INF/resources/webjars/jquery/3.5.1/jquery.min.js</code>.</p>\n"},{"tags":["java","java-9","java-module"],"comments":[{"owner":{"account_id":10098519,"reputation":5323,"user_id":7463126,"display_name":"Alan Bateman"},"score":1,"creation_date":1574758391,"post_id":59020158,"comment_id":104334989,"body_markdown":"Resources in named modules are encapsulated by default. The ClassLoader getResource methods can only locate resources in packages that are open to all modules. Is the V1__init.sql resource in your own module? If so, use Class.getResource instead.","body":"Resources in named modules are encapsulated by default. The ClassLoader getResource methods can only locate resources in packages that are open to all modules. Is the V1__init.sql resource in your own module? If so, use Class.getResource instead."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1574778743,"post_id":59020158,"comment_id":104346181,"body_markdown":"When you need resources of your own module, you should not ask the thread&#39;s context class loader, a feature that only exists to allow setting it to a *different* class loader.","body":"When you need resources of your own module, you should not ask the thread&#39;s context class loader, a feature that only exists to allow setting it to a <i>different</i> class loader."},{"owner":{"account_id":1568042,"reputation":532,"user_id":1456388,"accept_rate":33,"display_name":"fritsMaister"},"score":0,"creation_date":1574803166,"post_id":59020158,"comment_id":104358441,"body_markdown":"I moved the `V1__init.sql` file to `com\\my\\color\\view\\V1__init.sql` and I open this package `opens com.my.color.view;`\nWith this configuration flyway can access the file when I run  `gradle run` but it can&#39;t when I run it with intelij or with running the generated image after `gradle jlink`","body":"I moved the <code>V1__init.sql</code> file to <code>com\\my\\color\\view\\V1__init.sql</code> and I open this package <code>opens com.my.color.view;</code> With this configuration flyway can access the file when I run  <code>gradle run</code> but it can&#39;t when I run it with intelij or with running the generated image after <code>gradle jlink</code>"},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":0,"creation_date":1574843240,"post_id":59020158,"comment_id":104370314,"body_markdown":"Just to emphasize the things already said, you should access the resource like, e.g. `ColorsListView.class.getResource(&quot;V1__init.sql&quot;)`, so that package and module are implicitly given. Then, you must use the returned `URL` as-is, instead of assuming that its `getPath` method returns a file. After packaging the code as jar or image, the resource is not a file anymore.","body":"Just to emphasize the things already said, you should access the resource like, e.g. <code>ColorsListView.class.getResource(&quot;V1__init.sql&quot;)</code>, so that package and module are implicitly given. Then, you must use the returned <code>URL</code> as-is, instead of assuming that its <code>getPath</code> method returns a file. After packaging the code as jar or image, the resource is not a file anymore."}],"owner":{"account_id":1568042,"reputation":532,"user_id":1456388,"accept_rate":33,"display_name":"fritsMaister"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":325,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1690302588,"creation_date":1574614701,"question_id":59020158,"body_markdown":"I&#39;m having issues with finding resources since I start using java modules. \r\n\r\nThe same exact code: ` Thread.currentThread().contextClassLoader.getResource(&quot;db/migration/V1__init.sql&quot;)?.path` behave different, with java-module it returns null, without it, it returns the correct path. \r\n\r\nI guess I&#39;m missing something about java-modules visibility. \r\n\r\nI&#39;m having problems with flyway loading migration files. I&#39;ve made an example code in [github][1] \r\n\r\n\r\n  [1]: https://github.com/ferranDelgado/colors-tornadofx","title":"Resources visibility with java9 modules","body":"<p>I'm having issues with finding resources since I start using java modules. </p>\n\n<p>The same exact code: <code>Thread.currentThread().contextClassLoader.getResource(\"db/migration/V1__init.sql\")?.path</code> behave different, with java-module it returns null, without it, it returns the correct path. </p>\n\n<p>I guess I'm missing something about java-modules visibility. </p>\n\n<p>I'm having problems with flyway loading migration files. I've made an example code in <a href=\"https://github.com/ferranDelgado/colors-tornadofx\" rel=\"nofollow noreferrer\">github</a> </p>\n"},{"tags":["java","spring-boot","jwt","base64","base64url"],"comments":[{"owner":{"account_id":384206,"reputation":50386,"user_id":740553,"accept_rate":46,"display_name":"Mike &#39;Pomax&#39; Kamermans"},"score":0,"creation_date":1611006489,"post_id":65782480,"comment_id":116307520,"body_markdown":"Put error text in your post as text. Not as image. Having said that: I don&#39;t see your code catching that error anywhere, so which line of _your_ code triggers this errors?","body":"Put error text in your post as text. Not as image. Having said that: I don&#39;t see your code catching that error anywhere, so which line of <i>your</i> code triggers this errors?"},{"owner":{"account_id":17251526,"reputation":577,"user_id":12491626,"display_name":"Ronny Giezen"},"score":0,"creation_date":1611006999,"post_id":65782480,"comment_id":116307663,"body_markdown":"@Mike&#39;Pomax&#39;Kamermans I edited the post and put the error as text. When I do a request that goes through the filter with an JWToken in the header I get this error.","body":"@Mike&#39;Pomax&#39;Kamermans I edited the post and put the error as text. When I do a request that goes through the filter with an JWToken in the header I get this error."},{"owner":{"account_id":1223835,"reputation":75878,"user_id":1189885,"accept_rate":43,"display_name":"chrylis -cautiouslyoptimistic-"},"score":0,"creation_date":1611008447,"post_id":65782480,"comment_id":116308119,"body_markdown":"_Why_ are you rewriting your own filter instead of using the out-of-the-box Spring Security JWT support?","body":"<i>Why</i> are you rewriting your own filter instead of using the out-of-the-box Spring Security JWT support?"},{"owner":{"account_id":3461697,"reputation":1150,"user_id":2898592,"accept_rate":91,"display_name":"A.J"},"score":0,"creation_date":1623100013,"post_id":65782480,"comment_id":119978311,"body_markdown":"Did you end up figuring it out by any chance? I am in a similar situation at the moment.","body":"Did you end up figuring it out by any chance? I am in a similar situation at the moment."},{"owner":{"account_id":17251526,"reputation":577,"user_id":12491626,"display_name":"Ronny Giezen"},"score":1,"creation_date":1623152833,"post_id":65782480,"comment_id":119990901,"body_markdown":"@A.J yes for some reason the substring function still kept on some white space before the token so I changed that to: requestTokenHeader.split(&quot; &quot;)[1].trim()","body":"@A.J yes for some reason the substring function still kept on some white space before the token so I changed that to: requestTokenHeader.split(&quot; &quot;)[1].trim()"},{"owner":{"account_id":17251526,"reputation":577,"user_id":12491626,"display_name":"Ronny Giezen"},"score":1,"creation_date":1623153063,"post_id":65782480,"comment_id":119990986,"body_markdown":"@A.J I also answered my question below just now","body":"@A.J I also answered my question below just now"},{"owner":{"account_id":3461697,"reputation":1150,"user_id":2898592,"accept_rate":91,"display_name":"A.J"},"score":0,"creation_date":1623182102,"post_id":65782480,"comment_id":120004786,"body_markdown":"@RonnyGiezen hmm I added your change but it didn&#39;t fix the issue. I do have a slightly different error - `Illegal base64 character: &#39;&gt;&#39;`, although I&#39;d guess it is because of the same problem.","body":"@RonnyGiezen hmm I added your change but it didn&#39;t fix the issue. I do have a slightly different error - <code>Illegal base64 character: &#39;&gt;&#39;</code>, although I&#39;d guess it is because of the same problem."},{"owner":{"account_id":17251526,"reputation":577,"user_id":12491626,"display_name":"Ronny Giezen"},"score":0,"creation_date":1623183375,"post_id":65782480,"comment_id":120005284,"body_markdown":"@A.J Do you see that character anywhere when you print the token in the console after trimming it?","body":"@A.J Do you see that character anywhere when you print the token in the console after trimming it?"},{"owner":{"account_id":3461697,"reputation":1150,"user_id":2898592,"accept_rate":91,"display_name":"A.J"},"score":0,"creation_date":1623183911,"post_id":65782480,"comment_id":120005481,"body_markdown":"@RonnyGiezen This happens just in general when I try to generate the token as well. It fails in your `public String encode(String name, boolean admin) {` method. But yea, if I send a token and output it then I don&#39;t see that `&lt;` symbol.","body":"@RonnyGiezen This happens just in general when I try to generate the token as well. It fails in your <code>public String encode(String name, boolean admin) {</code> method. But yea, if I send a token and output it then I don&#39;t see that <code>&lt;</code> symbol."},{"owner":{"account_id":3461697,"reputation":1150,"user_id":2898592,"accept_rate":91,"display_name":"A.J"},"score":0,"creation_date":1623185014,"post_id":65782480,"comment_id":120005877,"body_markdown":"@RonnyGiezen FYI this happened only after moving from version `0.9.1` to `0.11.2`.","body":"@RonnyGiezen FYI this happened only after moving from version <code>0.9.1</code> to <code>0.11.2</code>."},{"owner":{"account_id":17251526,"reputation":577,"user_id":12491626,"display_name":"Ronny Giezen"},"score":0,"creation_date":1623185296,"post_id":65782480,"comment_id":120005977,"body_markdown":"Let us [continue this discussion in chat](https://chat.stackoverflow.com/rooms/233524/discussion-between-ronny-giezen-and-a-j).","body":"Let us <a href=\"https://chat.stackoverflow.com/rooms/233524/discussion-between-ronny-giezen-and-a-j\">continue this discussion in chat</a>."}],"answers":[{"comments":[{"owner":{"account_id":17251526,"reputation":577,"user_id":12491626,"display_name":"Ronny Giezen"},"score":0,"creation_date":1611042493,"post_id":65782873,"comment_id":116315408,"body_markdown":"Hi thanks for your comment, I have followed some tutorial from baeldung.  I thought this line&quot; jwtToken = requestTokenHeader.substring(7); &quot; removed the Bearer part. I will look into on how I can make it that Spring security automatically handles it","body":"Hi thanks for your comment, I have followed some tutorial from baeldung.  I thought this line&quot; jwtToken = requestTokenHeader.substring(7); &quot; removed the Bearer part. I will look into on how I can make it that Spring security automatically handles it"},{"owner":{"account_id":1223835,"reputation":75878,"user_id":1189885,"accept_rate":43,"display_name":"chrylis -cautiouslyoptimistic-"},"score":1,"creation_date":1611044100,"post_id":65782873,"comment_id":116316021,"body_markdown":"@RonnyGiezen It should, but apparently you&#39;re still getting the space as part of it. At a minimum, you should debug your program and inspect the value of the `jwtToken` variable.","body":"@RonnyGiezen It should, but apparently you&#39;re still getting the space as part of it. At a minimum, you should debug your program and inspect the value of the <code>jwtToken</code> variable."}],"tags":[],"owner":{"account_id":1223835,"reputation":75878,"user_id":1189885,"accept_rate":43,"display_name":"chrylis -cautiouslyoptimistic-"},"comment_count":2,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1611008633,"creation_date":1611008633,"answer_id":65782873,"question_id":65782480,"body_markdown":"What you are decoding isn&#39;t the token, you&#39;re trying to decode _the entire header value_. `Bearer ` isn&#39;t part of the token, it&#39;s the authentication scheme.\r\n\r\nMore generally, you&#39;re writing your own security infrastructure, which is almost always a very bad idea. Spring Security JWT handles all of this for you automatically; use it instead.","title":"Illegal base64url character: &#39; &#39; when getting claims/decode from token Java JWT Spring Boot","body":"<p>What you are decoding isn't the token, you're trying to decode <em>the entire header value</em>. <code>Bearer </code> isn't part of the token, it's the authentication scheme.</p>\n<p>More generally, you're writing your own security infrastructure, which is almost always a very bad idea. Spring Security JWT handles all of this for you automatically; use it instead.</p>\n"},{"tags":[],"owner":{"account_id":17251526,"reputation":577,"user_id":12491626,"display_name":"Ronny Giezen"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1623153557,"creation_date":1623153031,"answer_id":67886311,"question_id":65782480,"body_markdown":"For some reason the substring function kept some white space before the token. I changed that line in my JWTRequestFilter.\r\n\r\nOld:\r\n\r\n    jwtToken = requestTokenHeader.substring(7);\r\nNew:\r\n\r\n    jwtToken = requestTokenHeader.split(&quot; &quot;)[1].trim();\r\nThe added .trim() will delete any white space before or after the string, so that was the solution for me","title":"Illegal base64url character: &#39; &#39; when getting claims/decode from token Java JWT Spring Boot","body":"<p>For some reason the substring function kept some white space before the token. I changed that line in my JWTRequestFilter.</p>\n<p>Old:</p>\n<pre><code>jwtToken = requestTokenHeader.substring(7);\n</code></pre>\n<p>New:</p>\n<pre><code>jwtToken = requestTokenHeader.split(&quot; &quot;)[1].trim();\n</code></pre>\n<p>The added .trim() will delete any white space before or after the string, so that was the solution for me</p>\n"},{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":1,"creation_date":1651753129,"post_id":72122028,"comment_id":127440723,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/72122028/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":23329722,"reputation":11,"user_id":17406298,"display_name":"mohamedpieerre"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1651725975,"creation_date":1651725975,"answer_id":72122028,"question_id":65782480,"body_markdown":"U can also use this : \r\n\r\n    jwtToken = requestTokenHeader.substring(&quot;Bearer &quot;.length());\r\n\r\nIt solved the some problem for me.","title":"Illegal base64url character: &#39; &#39; when getting claims/decode from token Java JWT Spring Boot","body":"<p>U can also use this :</p>\n<pre><code>jwtToken = requestTokenHeader.substring(&quot;Bearer &quot;.length());\n</code></pre>\n<p>It solved the some problem for me.</p>\n"},{"tags":[],"owner":{"account_id":5523724,"reputation":22000,"user_id":4385895,"accept_rate":58,"display_name":"Vasu"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1690302340,"creation_date":1690301946,"answer_id":76764679,"question_id":65782480,"body_markdown":"For me, the problem has been solved after using a proper Base64 compatible secret (i.e., the secret should not have any illegal characters). If you still run into the issue, then double check your secret key i.e., are you using the same secret while decoding the token? \r\n\r\nYou can use the below code to securely generate secret key:\r\n\r\n    public String createSecretKey() {\r\n        SecureRandom secureRandom = new SecureRandom();\r\n        byte[] secretBytes = new byte[36]; //36*8=288 (&gt;256 bits required for HS256)\r\n        secureRandom.nextBytes(secretBytes);\r\n        Base64.Encoder encoder = Base64.getUrlEncoder().withoutPadding();\r\n        return encoder.encodeToString(secretBytes);\r\n    }","title":"Illegal base64url character: &#39; &#39; when getting claims/decode from token Java JWT Spring Boot","body":"<p>For me, the problem has been solved after using a proper Base64 compatible secret (i.e., the secret should not have any illegal characters). If you still run into the issue, then double check your secret key i.e., are you using the same secret while decoding the token?</p>\n<p>You can use the below code to securely generate secret key:</p>\n<pre><code>public String createSecretKey() {\n    SecureRandom secureRandom = new SecureRandom();\n    byte[] secretBytes = new byte[36]; //36*8=288 (&gt;256 bits required for HS256)\n    secureRandom.nextBytes(secretBytes);\n    Base64.Encoder encoder = Base64.getUrlEncoder().withoutPadding();\n    return encoder.encodeToString(secretBytes);\n}\n</code></pre>\n"}],"owner":{"account_id":17251526,"reputation":577,"user_id":12491626,"display_name":"Ronny Giezen"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":13527,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"accepted_answer_id":67886311,"answer_count":4,"score":7,"last_activity_date":1690302340,"creation_date":1611006248,"question_id":65782480,"body_markdown":"When I get some claims from a JWT Token to validate user authentication I get the following error:\r\n\r\n    Illegal base64url character: &#39; &#39;\r\n\r\nCreating a JWT goes completely fine but &quot;decoding&quot; seems to have some issues...\r\nI also tried a base64url decoder to decode the token before getting the claims but then the token is unvalid.\r\n\r\nMy JWToken class where I encode and &quot;decode&quot; the token:\r\n\r\n    @Component\r\n    public class JWToken {\r\n    \r\n        private static final String JWT_USERNAME_CLAIM = &quot;sub&quot;;\r\n        private static final String JWT_ADMIN_CLAIM = &quot;admin&quot;;\r\n    \r\n        @Value(&quot;${jwt.issuer}&quot;)\r\n        private String issuer;\r\n    \r\n        @Value(&quot;${jwt.passPhrase}&quot;)\r\n        private String passPhrase;\r\n    \r\n        @Value(&quot;${jwt.duration-of-validity}&quot;)\r\n        private int expiration;\r\n    \r\n    \r\n       public String encode(String name, boolean admin) {\r\n           String token = Jwts.builder()\r\n                   .claim(JWT_USERNAME_CLAIM, name)\r\n                   .claim(JWT_ADMIN_CLAIM, admin)\r\n                   .setSubject(name)\r\n                   .setIssuer(issuer)\r\n                   .setIssuedAt(new Date(System.currentTimeMillis()))\r\n                   .setExpiration(new Date(System.currentTimeMillis() + expiration * 1000))\r\n                   .signWith(SignatureAlgorithm.HS512, passPhrase).compact();\r\n    \r\n           return token;\r\n       }\r\n    \r\n    \r\n        //for retrieving any information from token we will need the secret key\r\n        private Claims getAllClaimsFromToken(String token) {\r\n            return Jwts.parser().setSigningKey(passPhrase).parseClaimsJws(token).getBody();\r\n        }\r\n    \r\n        public &lt;T&gt; T getClaimFromToken(String token, Function&lt;Claims, T&gt; claimsResolver) {\r\n            final Claims claims = getAllClaimsFromToken(token);\r\n            return claimsResolver.apply(claims);\r\n        }\r\n    \r\n        //retrieve username from jwt token\r\n        public String getUsernameFromToken(String token) {\r\n            return getClaimFromToken(token, Claims::getSubject);\r\n        }\r\n    \r\n        //retrieve expiration date from jwt token\r\n        public Date getExpirationDateFromToken(String token) {\r\n            return getClaimFromToken(token, Claims::getExpiration);\r\n        }\r\n    \r\n        //check if the token has expired\r\n        private Boolean isTokenExpired(String token) {\r\n            final Date expiration = getExpirationDateFromToken(token);\r\n            return expiration.before(new Date());\r\n        }\r\n    \r\n        //validate token\r\n        public Boolean validateToken(String token, String name) {\r\n            final String username = getUsernameFromToken(token);\r\n            return (username.equals(name) &amp;&amp; !isTokenExpired(token));\r\n        }\r\n        \r\n    \r\n    \r\n    }\r\n\r\nMy request filter:\r\n\r\n    @Component\r\n    public class JWTRequestFilter extends OncePerRequestFilter {\r\n        private static final Set&lt;String&gt; SECURED_PATHS =\r\n                Set.of(&quot;/api/offers&quot;, &quot;/api/bids&quot;);\r\n    \r\n        private final JWToken jwToken;\r\n    \r\n        @Autowired\r\n        public JWTRequestFilter(JWToken jwToken) {\r\n            this.jwToken = jwToken;\r\n        }\r\n    \r\n        @Override\r\n        protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain) throws ServletException, IOException {\r\n    \r\n    \r\n    \r\n            final String requestTokenHeader = request.getHeader(&quot;Authorization&quot;);\r\n            String username = null;\r\n            String jwtToken = null;\r\n    \r\n            String servletPath = request.getServletPath();\r\n    \r\n            if (HttpMethod.OPTIONS.matches(request.getMethod()) || SECURED_PATHS.stream().noneMatch(servletPath::startsWith)) {\r\n    \r\n                filterChain.doFilter(request, response);\r\n                return;\r\n            }\r\n    \r\n            // JWT Token is in the form &quot;Bearer token&quot;. Remove Bearer word and get\r\n            // only the Token\r\n            if (requestTokenHeader != null &amp;&amp; requestTokenHeader.startsWith(&quot;Bearer &quot;)) {\r\n                jwtToken = requestTokenHeader.substring(7);\r\n                try {\r\n                    System.out.println(jwtToken);\r\n                    username = jwToken.getUsernameFromToken(jwtToken);\r\n                } catch (IllegalArgumentException e) {\r\n                    System.out.println(&quot;Unable to get JWT Token&quot;);\r\n                    throw new AuthenticationException(&quot;authentication problem&quot;);\r\n                } catch (ExpiredJwtException e) {\r\n                    throw new AuthenticationException(&quot;authentication problem&quot;);\r\n                }\r\n            } else {\r\n                System.out.println(requestTokenHeader);\r\n                logger.warn(&quot;JWT Token does not begin with Bearer String&quot;);\r\n                //throw new AuthenticationException(&quot;authentication problem&quot;);\r\n            }\r\n    \r\n            if(jwToken.validateToken(jwtToken, username)){\r\n                filterChain.doFilter(request, response);\r\n            }\r\n    \r\n            // Once we get the token validate it.\r\n    \r\n            }\r\n    \r\n    }\r\n\r\nThe error in my console when I do a get request for `/api/offers` with the generated JWT token in the header:\r\n\r\n    io.jsonwebtoken.io.DecodingException: Illegal base64url character: &#39; &#39;\r\n    \tat io.jsonwebtoken.io.Base64.ctoi(Base64.java:221) ~[jjwt-api-0.11.2.jar:0.11.2]\r\n    \tat io.jsonwebtoken.io.Base64.decodeFast(Base64.java:270) ~[jjwt-api-0.11.2.jar:0.11.2]\r\n    \tat io.jsonwebtoken.io.Base64Decoder.decode(Base64Decoder.java:36) ~[jjwt-api-0.11.2.jar:0.11.2]\r\n    \tat io.jsonwebtoken.io.Base64Decoder.decode(Base64Decoder.java:23) ~[jjwt-api-0.11.2.jar:0.11.2]\r\n    \tat io.jsonwebtoken.io.ExceptionPropagatingDecoder.decode(ExceptionPropagatingDecoder.java:36) ~[jjwt-api-0.11.2.jar:0.11.2]\r\n    \tat io.jsonwebtoken.impl.DefaultJwtParser.parse(DefaultJwtParser.java:309) ~[jjwt-impl-0.11.2.jar:0.11.2]\r\n    \tat io.jsonwebtoken.impl.DefaultJwtParser.parse(DefaultJwtParser.java:550) ~[jjwt-impl-0.11.2.jar:0.11.2]\r\n    \tat io.jsonwebtoken.impl.DefaultJwtParser.parseClaimsJws(DefaultJwtParser.java:610) ~[jjwt-impl-0.11.2.jar:0.11.2]\r\n    \tat team10.server.aucserver.security.JWToken.getAllClaimsFromToken(JWToken.java:47) ~[classes/:na]\r\n    \tat team10.server.aucserver.security.JWToken.getClaimFromToken(JWToken.java:51) ~[classes/:na]\r\n    \tat team10.server.aucserver.security.JWToken.getUsernameFromToken(JWToken.java:57) ~[classes/:na]\r\n    \tat team10.server.aucserver.security.JWTRequestFilter.doFilterInternal(JWTRequestFilter.java:52) ~[classes/:na]\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.3.1.jar:5.3.1]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.39.jar:9.0.39]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.39.jar:9.0.39]\r\n    \tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.1.jar:5.3.1]\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.3.1.jar:5.3.1]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.39.jar:9.0.39]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.39.jar:9.0.39]\r\n    \tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.1.jar:5.3.1]\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.3.1.jar:5.3.1]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.39.jar:9.0.39]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.39.jar:9.0.39]\r\n    \tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.1.jar:5.3.1]\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.3.1.jar:5.3.1]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.39.jar:9.0.39]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.39.jar:9.0.39]\r\n    \tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202) ~[tomcat-embed-core-9.0.39.jar:9.0.39]\r\n    \tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) ~[tomcat-embed-core-9.0.39.jar:9.0.39]\r\n    \tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542) ~[tomcat-embed-core-9.0.39.jar:9.0.39]\r\n    \tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:143) ~[tomcat-embed-core-9.0.39.jar:9.0.39]\r\n    \tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.39.jar:9.0.39]\r\n    \tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) ~[tomcat-embed-core-9.0.39.jar:9.0.39]\r\n    \tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343) ~[tomcat-embed-core-9.0.39.jar:9.0.39]\r\n    \tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:374) ~[tomcat-embed-core-9.0.39.jar:9.0.39]\r\n    \tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) ~[tomcat-embed-core-9.0.39.jar:9.0.39]\r\n    \tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:868) ~[tomcat-embed-core-9.0.39.jar:9.0.39]\r\n    \tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1590) ~[tomcat-embed-core-9.0.39.jar:9.0.39]\r\n    \tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.39.jar:9.0.39]\r\n    \tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1130) ~[na:na]\r\n    \tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:630) ~[na:na]\r\n    \tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.39.jar:9.0.39]\r\n    \tat java.base/java.lang.Thread.run(Thread.java:832) ~[na:na]\r\n\r\n\r\nAnd line 47 is the `getAllClaimsFromToken` method in the JWToken class.\r\n\r\nFor an extra example this is one of the tokens the encode genrated:\r\n\r\n    Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJyb25ueSIsImFkbWluIjpmYWxzZSwiaXNzIjoicHJpdmF0ZSBjb21wYW55IiwiaWF0IjoxNjExMDA1NTc4LCJleHAiOjE2MTEwMDY3Nzh9.dQwEVfSNa6EIx-U-bgHN50hmrN0wYkj-8jXRoFLTx6JB53ERBWuGUeiXLqtiJ_jTGxEISB-Lv7E9KAyPk8nV3g","title":"Illegal base64url character: &#39; &#39; when getting claims/decode from token Java JWT Spring Boot","body":"<p>When I get some claims from a JWT Token to validate user authentication I get the following error:</p>\n<pre><code>Illegal base64url character: ' '\n</code></pre>\n<p>Creating a JWT goes completely fine but &quot;decoding&quot; seems to have some issues...\nI also tried a base64url decoder to decode the token before getting the claims but then the token is unvalid.</p>\n<p>My JWToken class where I encode and &quot;decode&quot; the token:</p>\n<pre><code>@Component\npublic class JWToken {\n\n    private static final String JWT_USERNAME_CLAIM = &quot;sub&quot;;\n    private static final String JWT_ADMIN_CLAIM = &quot;admin&quot;;\n\n    @Value(&quot;${jwt.issuer}&quot;)\n    private String issuer;\n\n    @Value(&quot;${jwt.passPhrase}&quot;)\n    private String passPhrase;\n\n    @Value(&quot;${jwt.duration-of-validity}&quot;)\n    private int expiration;\n\n\n   public String encode(String name, boolean admin) {\n       String token = Jwts.builder()\n               .claim(JWT_USERNAME_CLAIM, name)\n               .claim(JWT_ADMIN_CLAIM, admin)\n               .setSubject(name)\n               .setIssuer(issuer)\n               .setIssuedAt(new Date(System.currentTimeMillis()))\n               .setExpiration(new Date(System.currentTimeMillis() + expiration * 1000))\n               .signWith(SignatureAlgorithm.HS512, passPhrase).compact();\n\n       return token;\n   }\n\n\n    //for retrieving any information from token we will need the secret key\n    private Claims getAllClaimsFromToken(String token) {\n        return Jwts.parser().setSigningKey(passPhrase).parseClaimsJws(token).getBody();\n    }\n\n    public &lt;T&gt; T getClaimFromToken(String token, Function&lt;Claims, T&gt; claimsResolver) {\n        final Claims claims = getAllClaimsFromToken(token);\n        return claimsResolver.apply(claims);\n    }\n\n    //retrieve username from jwt token\n    public String getUsernameFromToken(String token) {\n        return getClaimFromToken(token, Claims::getSubject);\n    }\n\n    //retrieve expiration date from jwt token\n    public Date getExpirationDateFromToken(String token) {\n        return getClaimFromToken(token, Claims::getExpiration);\n    }\n\n    //check if the token has expired\n    private Boolean isTokenExpired(String token) {\n        final Date expiration = getExpirationDateFromToken(token);\n        return expiration.before(new Date());\n    }\n\n    //validate token\n    public Boolean validateToken(String token, String name) {\n        final String username = getUsernameFromToken(token);\n        return (username.equals(name) &amp;&amp; !isTokenExpired(token));\n    }\n    \n\n\n}\n</code></pre>\n<p>My request filter:</p>\n<pre><code>@Component\npublic class JWTRequestFilter extends OncePerRequestFilter {\n    private static final Set&lt;String&gt; SECURED_PATHS =\n            Set.of(&quot;/api/offers&quot;, &quot;/api/bids&quot;);\n\n    private final JWToken jwToken;\n\n    @Autowired\n    public JWTRequestFilter(JWToken jwToken) {\n        this.jwToken = jwToken;\n    }\n\n    @Override\n    protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain) throws ServletException, IOException {\n\n\n\n        final String requestTokenHeader = request.getHeader(&quot;Authorization&quot;);\n        String username = null;\n        String jwtToken = null;\n\n        String servletPath = request.getServletPath();\n\n        if (HttpMethod.OPTIONS.matches(request.getMethod()) || SECURED_PATHS.stream().noneMatch(servletPath::startsWith)) {\n\n            filterChain.doFilter(request, response);\n            return;\n        }\n\n        // JWT Token is in the form &quot;Bearer token&quot;. Remove Bearer word and get\n        // only the Token\n        if (requestTokenHeader != null &amp;&amp; requestTokenHeader.startsWith(&quot;Bearer &quot;)) {\n            jwtToken = requestTokenHeader.substring(7);\n            try {\n                System.out.println(jwtToken);\n                username = jwToken.getUsernameFromToken(jwtToken);\n            } catch (IllegalArgumentException e) {\n                System.out.println(&quot;Unable to get JWT Token&quot;);\n                throw new AuthenticationException(&quot;authentication problem&quot;);\n            } catch (ExpiredJwtException e) {\n                throw new AuthenticationException(&quot;authentication problem&quot;);\n            }\n        } else {\n            System.out.println(requestTokenHeader);\n            logger.warn(&quot;JWT Token does not begin with Bearer String&quot;);\n            //throw new AuthenticationException(&quot;authentication problem&quot;);\n        }\n\n        if(jwToken.validateToken(jwtToken, username)){\n            filterChain.doFilter(request, response);\n        }\n\n        // Once we get the token validate it.\n\n        }\n\n}\n</code></pre>\n<p>The error in my console when I do a get request for <code>/api/offers</code> with the generated JWT token in the header:</p>\n<pre><code>io.jsonwebtoken.io.DecodingException: Illegal base64url character: ' '\n    at io.jsonwebtoken.io.Base64.ctoi(Base64.java:221) ~[jjwt-api-0.11.2.jar:0.11.2]\n    at io.jsonwebtoken.io.Base64.decodeFast(Base64.java:270) ~[jjwt-api-0.11.2.jar:0.11.2]\n    at io.jsonwebtoken.io.Base64Decoder.decode(Base64Decoder.java:36) ~[jjwt-api-0.11.2.jar:0.11.2]\n    at io.jsonwebtoken.io.Base64Decoder.decode(Base64Decoder.java:23) ~[jjwt-api-0.11.2.jar:0.11.2]\n    at io.jsonwebtoken.io.ExceptionPropagatingDecoder.decode(ExceptionPropagatingDecoder.java:36) ~[jjwt-api-0.11.2.jar:0.11.2]\n    at io.jsonwebtoken.impl.DefaultJwtParser.parse(DefaultJwtParser.java:309) ~[jjwt-impl-0.11.2.jar:0.11.2]\n    at io.jsonwebtoken.impl.DefaultJwtParser.parse(DefaultJwtParser.java:550) ~[jjwt-impl-0.11.2.jar:0.11.2]\n    at io.jsonwebtoken.impl.DefaultJwtParser.parseClaimsJws(DefaultJwtParser.java:610) ~[jjwt-impl-0.11.2.jar:0.11.2]\n    at team10.server.aucserver.security.JWToken.getAllClaimsFromToken(JWToken.java:47) ~[classes/:na]\n    at team10.server.aucserver.security.JWToken.getClaimFromToken(JWToken.java:51) ~[classes/:na]\n    at team10.server.aucserver.security.JWToken.getUsernameFromToken(JWToken.java:57) ~[classes/:na]\n    at team10.server.aucserver.security.JWTRequestFilter.doFilterInternal(JWTRequestFilter.java:52) ~[classes/:na]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.3.1.jar:5.3.1]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.39.jar:9.0.39]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.39.jar:9.0.39]\n    at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.1.jar:5.3.1]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.3.1.jar:5.3.1]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.39.jar:9.0.39]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.39.jar:9.0.39]\n    at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.1.jar:5.3.1]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.3.1.jar:5.3.1]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.39.jar:9.0.39]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.39.jar:9.0.39]\n    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.1.jar:5.3.1]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.3.1.jar:5.3.1]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.39.jar:9.0.39]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.39.jar:9.0.39]\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202) ~[tomcat-embed-core-9.0.39.jar:9.0.39]\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) ~[tomcat-embed-core-9.0.39.jar:9.0.39]\n    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542) ~[tomcat-embed-core-9.0.39.jar:9.0.39]\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:143) ~[tomcat-embed-core-9.0.39.jar:9.0.39]\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.39.jar:9.0.39]\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) ~[tomcat-embed-core-9.0.39.jar:9.0.39]\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343) ~[tomcat-embed-core-9.0.39.jar:9.0.39]\n    at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:374) ~[tomcat-embed-core-9.0.39.jar:9.0.39]\n    at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) ~[tomcat-embed-core-9.0.39.jar:9.0.39]\n    at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:868) ~[tomcat-embed-core-9.0.39.jar:9.0.39]\n    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1590) ~[tomcat-embed-core-9.0.39.jar:9.0.39]\n    at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.39.jar:9.0.39]\n    at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1130) ~[na:na]\n    at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:630) ~[na:na]\n    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.39.jar:9.0.39]\n    at java.base/java.lang.Thread.run(Thread.java:832) ~[na:na]\n</code></pre>\n<p>And line 47 is the <code>getAllClaimsFromToken</code> method in the JWToken class.</p>\n<p>For an extra example this is one of the tokens the encode genrated:</p>\n<pre><code>Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJyb25ueSIsImFkbWluIjpmYWxzZSwiaXNzIjoicHJpdmF0ZSBjb21wYW55IiwiaWF0IjoxNjExMDA1NTc4LCJleHAiOjE2MTEwMDY3Nzh9.dQwEVfSNa6EIx-U-bgHN50hmrN0wYkj-8jXRoFLTx6JB53ERBWuGUeiXLqtiJ_jTGxEISB-Lv7E9KAyPk8nV3g\n</code></pre>\n"},{"tags":["java","spring","registration","consul"],"owner":{"account_id":11442532,"reputation":1,"user_id":8529895,"display_name":"Rosogi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690302131,"creation_date":1690301681,"question_id":76764639,"body_markdown":"**The main problem is** how to register a service with a name not from application.properties (application.yml)\r\nI have an application that runs multiple times *(about 10-20 instances)* and takes configuration values from the database to run. If you take the service-name value from application.properties, then you will have to write your own configuration file for each individual instance. The database has a table that is read and stored in a specific class at startup (I can identify my service based on their environment variables (IP, MAC, etc). \r\n*Can I take service name value from database and set it to service-name in Consul?*\r\n\r\n**The class that registers the service**\r\n```\r\n@Configuration\r\n@ConditionalOnConsulEnabled\r\n@ConditionalOnMissingBean(type= &quot;org.springframework.cloud.consul.discovery.ConsulLifecycle&quot;)\r\n@AutoConfigureAfter(ConsulAutoServiceRegistrationAutoConfiguration.class)\r\npublic class ConsulLifecycle implements ApplicationContextAware {\r\n\r\n    private ConsulAutoServiceRegistration registration;\r\n\r\n    public ConsulLifecycle(ConsulAutoServiceRegistration registration) {\r\n        this.registration = registration;\r\n    }\r\n\r\n    public void setApplicationContext(ApplicationContext context) throws BeansException {\r\n        if (registration != null ) {\r\n            registration.start();\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n**A class that stores values from the database**\r\n```\r\n@Component\r\npublic class DatabaseValues {\r\n\r\n   private String serviceName;\r\n\r\n   //Getters, setters and inner logic\r\n}\r\n```\r\n\r\n\r\nI can&#39;t figure out how to specifically create an object of type *ConsulAutoServiceRegistration* in order to register with the service name I need that i get from database before ConsulLifecycle is created in JVM.\r\nIf there is any other way to do the same functionality without this class, I will gladly try it!","title":"How to register Consul service with service-name from database?","body":"<p><strong>The main problem is</strong> how to register a service with a name not from application.properties (application.yml)\nI have an application that runs multiple times <em>(about 10-20 instances)</em> and takes configuration values from the database to run. If you take the service-name value from application.properties, then you will have to write your own configuration file for each individual instance. The database has a table that is read and stored in a specific class at startup (I can identify my service based on their environment variables (IP, MAC, etc).\n<em>Can I take service name value from database and set it to service-name in Consul?</em></p>\n<p><strong>The class that registers the service</strong></p>\n<pre><code>@Configuration\n@ConditionalOnConsulEnabled\n@ConditionalOnMissingBean(type= &quot;org.springframework.cloud.consul.discovery.ConsulLifecycle&quot;)\n@AutoConfigureAfter(ConsulAutoServiceRegistrationAutoConfiguration.class)\npublic class ConsulLifecycle implements ApplicationContextAware {\n\n    private ConsulAutoServiceRegistration registration;\n\n    public ConsulLifecycle(ConsulAutoServiceRegistration registration) {\n        this.registration = registration;\n    }\n\n    public void setApplicationContext(ApplicationContext context) throws BeansException {\n        if (registration != null ) {\n            registration.start();\n        }\n    }\n}\n</code></pre>\n<p><strong>A class that stores values from the database</strong></p>\n<pre><code>@Component\npublic class DatabaseValues {\n\n   private String serviceName;\n\n   //Getters, setters and inner logic\n}\n</code></pre>\n<p>I can't figure out how to specifically create an object of type <em>ConsulAutoServiceRegistration</em> in order to register with the service name I need that i get from database before ConsulLifecycle is created in JVM.\nIf there is any other way to do the same functionality without this class, I will gladly try it!</p>\n"},{"tags":["java","android","rotation"],"comments":[{"owner":{"account_id":7680112,"reputation":762,"user_id":5819589,"display_name":"Malith Lakshan"},"score":0,"creation_date":1464095721,"post_id":37414662,"comment_id":62335658,"body_markdown":"android:screenOrientation=&quot;locked&quot; add this to manifest","body":"android:screenOrientation=&quot;locked&quot; add this to manifest"},{"owner":{"account_id":7378264,"reputation":4782,"user_id":5709159,"accept_rate":58,"display_name":"Sirop4ik"},"score":0,"creation_date":1464098622,"post_id":37414662,"comment_id":62337855,"body_markdown":"@MalithLakshan no... i have tryed it, but without seccess... Actually i have added entire manifest file","body":"@MalithLakshan no... i have tryed it, but without seccess... Actually i have added entire manifest file"},{"owner":{"account_id":5759553,"reputation":4140,"user_id":4546390,"accept_rate":67,"display_name":"Tilak Madichetti"},"score":0,"creation_date":1464098820,"post_id":37414662,"comment_id":62337998,"body_markdown":"http://stackoverflow.com/questions/18425862/screen-orientation-forced-to-portrait-but-still-the-activities-will-rotate-to/18425897#18425897","body":"<a href=\"http://stackoverflow.com/questions/18425862/screen-orientation-forced-to-portrait-but-still-the-activities-will-rotate-to/18425897#18425897\" title=\"screen orientation forced to portrait but still the activities will rotate to\">stackoverflow.com/questions/18425862/&hellip;</a>"},{"owner":{"account_id":2836762,"reputation":779,"user_id":2437227,"accept_rate":100,"display_name":"ThomasV"},"score":0,"creation_date":1464100603,"post_id":37414662,"comment_id":62339287,"body_markdown":"Can you check your theme style to see if there is anything in there for screen orientation ?","body":"Can you check your theme style to see if there is anything in there for screen orientation ?"},{"owner":{"account_id":7378264,"reputation":4782,"user_id":5709159,"accept_rate":58,"display_name":"Sirop4ik"},"score":0,"creation_date":1464162498,"post_id":37414662,"comment_id":62365566,"body_markdown":"@TilakMadichetti No... i need keep portrait mode for all app. And i have tryed android:screenOrientation=&quot;portrait&quot; but according to my question it doesn&#39;t work","body":"@TilakMadichetti No... i need keep portrait mode for all app. And i have tryed android:screenOrientation=&quot;portrait&quot; but according to my question it doesn&#39;t work"},{"owner":{"account_id":7378264,"reputation":4782,"user_id":5709159,"accept_rate":58,"display_name":"Sirop4ik"},"score":0,"creation_date":1464162597,"post_id":37414662,"comment_id":62365628,"body_markdown":"@ThomasV i checked my theme and here nothing special &lt;style name=&quot;MaterialTheme&quot; parent=&quot;Theme.AppCompat.NoActionBar&quot;&gt;\n        &lt;item name=&quot;colorAccent&quot;&gt;@color/ntz_color_yellow&lt;/item&gt;\n    &lt;/style&gt;","body":"@ThomasV i checked my theme and here nothing special &lt;style name=&quot;MaterialTheme&quot; parent=&quot;Theme.AppCompat.NoActionBar&quot;&gt;         &lt;item name=&quot;colorAccent&quot;&gt;@color/ntz_color_yellow&lt;/item&gt;     &lt;/style&gt;"},{"owner":{"account_id":2836762,"reputation":779,"user_id":2437227,"accept_rate":100,"display_name":"ThomasV"},"score":0,"creation_date":1464165229,"post_id":37414662,"comment_id":62367174,"body_markdown":"Wild guess, but at this point I think we can try anything. ```&lt;uses-permission android:name=&quot;com.google.android..RECEIVE&quot; /&gt;``` try removing the extra point : ```com.google.android.RECEIVE```","body":"Wild guess, but at this point I think we can try anything. <code>&lt;uses-permission android:name=&quot;com.google.android..RECEIVE&quot; &#47;&gt;</code> try removing the extra point : <code>com.google.android.RECEIVE</code>"},{"owner":{"account_id":2836762,"reputation":779,"user_id":2437227,"accept_rate":100,"display_name":"ThomasV"},"score":0,"creation_date":1464165303,"post_id":37414662,"comment_id":62367219,"body_markdown":"Also, I had some weird behaviors when I had comments in my xml files, you could try removing them.","body":"Also, I had some weird behaviors when I had comments in my xml files, you could try removing them."},{"owner":{"account_id":8039996,"reputation":5591,"user_id":6061978,"display_name":"Chris"},"score":0,"creation_date":1464165415,"post_id":37414662,"comment_id":62367302,"body_markdown":"Could you post your Java code for the splash screen?","body":"Could you post your Java code for the splash screen?"}],"answers":[{"comments":[{"owner":{"account_id":7378264,"reputation":4782,"user_id":5709159,"accept_rate":58,"display_name":"Sirop4ik"},"score":0,"creation_date":1464099122,"post_id":37414849,"comment_id":62338201,"body_markdown":"According to the question i have said that android:screenOrientation=&quot;portrait&quot; doesn&#39;t work, and the second i need keep screen portraite mode for all app, not for exect activity...","body":"According to the question i have said that android:screenOrientation=&quot;portrait&quot; doesn&#39;t work, and the second i need keep screen portraite mode for all app, not for exect activity..."},{"owner":{"account_id":7378264,"reputation":4782,"user_id":5709159,"accept_rate":58,"display_name":"Sirop4ik"},"score":0,"creation_date":1464105694,"post_id":37414849,"comment_id":62342925,"body_markdown":"No(( it is still can rotate","body":"No(( it is still can rotate"}],"tags":[],"owner":{"account_id":2836762,"reputation":779,"user_id":2437227,"accept_rate":100,"display_name":"ThomasV"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1464100715,"creation_date":1464095931,"answer_id":37414849,"question_id":37414662,"body_markdown":"Can you add `android:configChanges=&quot;orientation|keyboardHidden&quot;` ?\r\n\r\n    &lt;activity\r\n        android:name=&quot;.activities.Splash&quot;\r\n        android:label=&quot;@string/app_name&quot;\r\n        android:screenOrientation=&quot;portrait&quot;\r\n        android:configChanges=&quot;orientation|keyboardHidden&quot;&gt;","title":"How to keep screen orientation in portrait mode with Android 5.0?","body":"<p>Can you add <code>android:configChanges=\"orientation|keyboardHidden\"</code> ?</p>\n\n<pre><code>&lt;activity\n    android:name=\".activities.Splash\"\n    android:label=\"@string/app_name\"\n    android:screenOrientation=\"portrait\"\n    android:configChanges=\"orientation|keyboardHidden\"&gt;\n</code></pre>\n"},{"comments":[{"owner":{"account_id":7378264,"reputation":4782,"user_id":5709159,"accept_rate":58,"display_name":"Sirop4ik"},"score":0,"creation_date":1464098735,"post_id":37414943,"comment_id":62337941,"body_markdown":"no... i have tryed it, but without seccess... Actually i have added entire manifest file","body":"no... i have tryed it, but without seccess... Actually i have added entire manifest file"}],"tags":[],"owner":{"account_id":1703486,"reputation":3349,"user_id":1563038,"display_name":"Naveen Tamrakar"},"comment_count":1,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1464096147,"creation_date":1464096147,"answer_id":37414943,"question_id":37414662,"body_markdown":"Locks the orientation to its current rotation, whatever that is. Added in API level 18.\r\n\r\n    android:screenOrientation=&quot;locked&quot;\r\n\r\n[android:screenOrientation=&quot;locked&quot;][1]\r\n\r\n\r\n  [1]: https://developer.android.com/guide/topics/manifest/activity-element.html","title":"How to keep screen orientation in portrait mode with Android 5.0?","body":"<p>Locks the orientation to its current rotation, whatever that is. Added in API level 18.</p>\n\n<pre><code>android:screenOrientation=\"locked\"\n</code></pre>\n\n<p><a href=\"https://developer.android.com/guide/topics/manifest/activity-element.html\" rel=\"nofollow\">android:screenOrientation=\"locked\"</a></p>\n"},{"comments":[{"owner":{"account_id":7378264,"reputation":4782,"user_id":5709159,"accept_rate":58,"display_name":"Sirop4ik"},"score":0,"creation_date":1464098726,"post_id":37415730,"comment_id":62337933,"body_markdown":"What do you mean? According to my question i noticed that i have done it and it didn&#39;t work... Have any other idea?","body":"What do you mean? According to my question i noticed that i have done it and it didn&#39;t work... Have any other idea?"}],"tags":[],"owner":{"account_id":8230775,"reputation":45,"user_id":6191449,"accept_rate":43,"display_name":"Abhijeet Singh"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1464098063,"creation_date":1464098063,"answer_id":37415730,"question_id":37414662,"body_markdown":"In your manifest file after your main activity Paste below line.\r\n\r\n    android:screenOrientation=&quot;portrait&quot;\r\nOr in your coding after setContentView() Paste below line.\r\n\r\n    setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);","title":"How to keep screen orientation in portrait mode with Android 5.0?","body":"<p>In your manifest file after your main activity Paste below line.</p>\n\n<pre><code>android:screenOrientation=\"portrait\"\n</code></pre>\n\n<p>Or in your coding after setContentView() Paste below line.</p>\n\n<pre><code>setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6597633,"reputation":6391,"user_id":5096868,"accept_rate":18,"display_name":"Yogesh Rathi"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1470636824,"creation_date":1470636824,"answer_id":38822331,"question_id":37414662,"body_markdown":"\r\n\r\n&gt;In your manifest file after your main activity Paste below line.\r\n\r\n    android:screenOrientation=&quot;portrait&quot;\r\n\r\n&gt; java through setContentView() Paste below line.\r\n\r\n    setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);\r\n\r\n[see documentation.][1]\r\n\r\n\r\n  [1]: https://developer.android.com/reference/android/app/Activity.html#setRequestedOrientation(int)","title":"How to keep screen orientation in portrait mode with Android 5.0?","body":"<blockquote>\n  <p>In your manifest file after your main activity Paste below line.</p>\n</blockquote>\n\n<pre><code>android:screenOrientation=\"portrait\"\n</code></pre>\n\n<blockquote>\n  <p>java through setContentView() Paste below line.</p>\n</blockquote>\n\n<pre><code>setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);\n</code></pre>\n\n<p><a href=\"https://developer.android.com/reference/android/app/Activity.html#setRequestedOrientation(int)\" rel=\"nofollow\">see documentation.</a></p>\n"},{"comments":[{"owner":{"account_id":4257006,"reputation":694,"user_id":3482424,"accept_rate":80,"display_name":"Morten"},"score":1,"creation_date":1690480468,"post_id":76764644,"comment_id":135363422,"body_markdown":"Previous answers are correct. This doesn&#39;t work (for example if device is already in landscape mode).","body":"Previous answers are correct. This doesn&#39;t work (for example if device is already in landscape mode)."}],"tags":[],"owner":{"account_id":29089278,"reputation":1,"user_id":22283546,"display_name":"Rifaat Hassan"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690301703,"creation_date":1690301703,"answer_id":76764644,"question_id":37414662,"body_markdown":"android:exported=&quot;true&quot;\r\nandroid:screenOrientation=&quot;locked&quot;\r\n\r\nthis is work for me","title":"How to keep screen orientation in portrait mode with Android 5.0?","body":"<p>android:exported=&quot;true&quot;\nandroid:screenOrientation=&quot;locked&quot;</p>\n<p>this is work for me</p>\n"}],"owner":{"account_id":7378264,"reputation":4782,"user_id":5709159,"accept_rate":58,"display_name":"Sirop4ik"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2656,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":5,"score":1,"last_activity_date":1690301703,"creation_date":1464095462,"question_id":37414662,"body_markdown":"I need to keep the screen in portrait mode. For this I use this line in the manifest file\r\n\r\n    android:screenOrientation=&quot;portrait&quot;\r\n\r\nHere my file\r\n\r\n    &lt;activity\r\n            android:name=&quot;.activities.Splash&quot;\r\n            android:label=&quot;@string/app_name&quot;\r\n            android:screenOrientation=&quot;portrait&quot;&gt;\r\n            &lt;intent-filter&gt;\r\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\r\n\r\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\r\n            &lt;/intent-filter&gt;\r\n        &lt;/activity&gt;\r\n\r\nI use a Samsung S5, and it still can rotate in landscape...\r\n\r\nAccorging documentation with Android 5.0 we get wide setting options\r\n\r\n    android:screenOrientation=[&quot;unspecified&quot; | &quot;behind&quot; |\r\n    &quot;landscape&quot; | &quot;portrait&quot; |\r\n    &quot;reverseLandscape&quot; | &quot;reversePortrait&quot; |\r\n    &quot;sensorLandscape&quot; | &quot;sensorPortrait&quot; |\r\n    &quot;userLandscape&quot; | &quot;userPortrait&quot; |\r\n    &quot;sensor&quot; | &quot;fullSensor&quot; | &quot;nosensor&quot; |\r\n    &quot;user&quot; | &quot;fullUser&quot; | &quot;locked&quot;]\r\n\r\nI have tried some of them but it still rotate...\r\n\r\nWhat am I doing wrong?\r\n\r\nEntire manifest file\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    package=&quot;com.example.android.camera2basic&quot;\r\n    android:versionCode=&quot;1&quot;\r\n    android:versionName=&quot;1.0&quot;&gt;\r\n\r\n    &lt;uses-permission android:name=&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.READ_PHONE_STATE&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.CAMERA&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\r\n\r\n    &lt;!-- GCM requires a Google account. --&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.GET_ACCOUNTS&quot; /&gt;\r\n\r\n    &lt;!-- For Google+ LogIn --&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.USE_CREDENTIALS&quot; /&gt;\r\n\r\n    &lt;!-- Для регистрации приложения в GCM всякий раз, когда телефон перезагружается. --&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.RECEIVE_BOOT_COMPLETED&quot; /&gt;\r\n\r\n    &lt;!-- Keeps the processor from sleeping when a message is received. --&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.WAKE_LOCK&quot; /&gt;\r\n\r\n    &lt;!-- This app has permission to register and receive data message. --&gt;\r\n    &lt;uses-permission android:name=&quot;com.google.android..RECEIVE&quot; /&gt;\r\n\r\n    &lt;uses-feature android:name=&quot;android.hardware.camera&quot; /&gt;\r\n    &lt;uses-feature android:name=&quot;android.hardware.camera.autofocus&quot; /&gt;\r\n\r\n    &lt;permission\r\n        android:name=&quot;com.example.android.C2D_MESSAGE&quot;\r\n        android:protectionLevel=&quot;signature&quot; /&gt;\r\n\r\n    &lt;uses-permission android:name=&quot;com.example.android&quot; /&gt;\r\n\r\n    &lt;application\r\n        android:name=&quot;.authorization.MyFacebook&quot;\r\n        android:allowBackup=&quot;true&quot;\r\n        android:icon=&quot;@drawable/title&quot;\r\n        android:label=&quot;@string/app_name&quot;\r\n        android:theme=&quot;@style/MaterialTheme&quot;&gt;\r\n        &lt;meta-data\r\n            android:name=&quot;com.facebook.sdk.ApplicationId&quot;\r\n            android:value=&quot;@string/app_id&quot; /&gt;\r\n\r\n        &lt;activity\r\n            android:name=&quot;.activities.Splash&quot;\r\n            android:label=&quot;@string/app_name&quot;\r\n            android:screenOrientation=&quot;locked&quot;&gt;\r\n            &lt;intent-filter&gt;\r\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\r\n\r\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\r\n            &lt;/intent-filter&gt;\r\n        &lt;/activity&gt;\r\n\r\n        &lt;meta-data\r\n            android:name=&quot;com.google.android.gms.version&quot;\r\n            android:value=&quot;@integer/google_play_services_version&quot; /&gt;\r\n\r\n        &lt;receiver\r\n            android:name=&quot;.gcm.GcmBroadcastReceiver&quot;\r\n            android:permission=&quot;com.google.android.c2dm.permission.SEND&quot;&gt;\r\n            &lt;intent-filter&gt;\r\n                &lt;action android:name=&quot;com.google.android.c2dm.intent.RECEIVE&quot; /&gt;\r\n                &lt;action android:name=&quot;com.google.android.c2dm.intent.REGISTRATION&quot; /&gt;\r\n\r\n                &lt;category android:name=&quot;com.example.android&quot; /&gt;\r\n            &lt;/intent-filter&gt;\r\n        &lt;/receiver&gt;\r\n\r\n        &lt;service android:name=&quot;.gcm.GcmIntentService&quot; /&gt;\r\n\r\n        &lt;activity\r\n            android:name=&quot;.activities.AcceptNotAccept&quot;\r\n            android:theme=&quot;@style/AppTheme.CustomStyle&quot; /&gt;\r\n        &lt;activity\r\n            android:name=&quot;.activities.PopUpActivity&quot;\r\n            android:theme=&quot;@style/AppTheme.CustomStyle&quot; /&gt;\r\n        &lt;activity android:name=&quot;.tools.TestDeleteIt&quot; /&gt;\r\n        &lt;activity android:name=&quot;.activities.Welcome2&quot; /&gt;\r\n        &lt;activity android:name=&quot;.activities.WebActivity&quot; /&gt;\r\n        &lt;activity android:name=&quot;.authorization.AuthorizationActivity&quot; /&gt;\r\n        &lt;activity android:name=&quot;.activities.WebViewAcceptReject&quot; /&gt;\r\n        &lt;activity android:name=&quot;.activities.CameraActivity&quot; /&gt;\r\n        &lt;activity android:name=&quot;.authorization.LogIn&quot; /&gt;\r\n        &lt;activity android:name=&quot;.authorization.RegistrationActivity&quot; /&gt;\r\n        &lt;activity android:name=&quot;.activities.ForgotYourPassword&quot; /&gt;\r\n        &lt;activity android:name=&quot;.activities.MainActivity&quot; /&gt;\r\n        &lt;activity android:name=&quot;.activities.VideoActivity&quot;/&gt;\r\n        &lt;activity\r\n            android:name=&quot;com.facebook.FacebookActivity&quot;\r\n            android:configChanges=&quot;keyboard|keyboardHidden|screenLayout|screenSize|orientation&quot;\r\n            android:label=&quot;@string/app_name&quot;\r\n            android:theme=&quot;@android:style/Theme.Translucent.NoTitleBar&quot; /&gt;\r\n    &lt;/application&gt;\r\n\r\n    &lt;/manifest&gt;\r\n\r\nJava code for splash\r\n\r\n    public class Splash extends Activity {\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_splash);\r\n\r\n    //      Hide the status bar.\r\n        View decorView = getWindow().getDecorView();\r\n        int uiOptions = View.SYSTEM_UI_FLAG_FULLSCREEN;\r\n        decorView.setSystemUiVisibility(uiOptions);\r\n\r\n        TextView tvSplash = (TextView) findViewById(R.id.tvSplash);\r\n        tvSplash.setVisibility(View.INVISIBLE);\r\n        UtilClass.setFont(getApplicationContext(), tvSplash);\r\n\r\n        Thread logoTimer = new Thread() {\r\n            public void run() {\r\n                try {\r\n\r\n                    ImageView imageView = (ImageView) findViewById(R.id.ivSplash);\r\n                    Animation animation = AnimationUtils.loadAnimation(getApplicationContext(), R.anim.scale);\r\n                    imageView.startAnimation(animation);\r\n\r\n                    int logoTimer = 0;\r\n                    while (logoTimer &lt; 2500) {\r\n                        sleep(100);\r\n                        logoTimer = logoTimer + 100;\r\n                    }\r\n\r\n                    runOnUiThread(new Runnable() {\r\n                        @Override\r\n                        public void run() {\r\n                            TextView textView = (TextView) findViewById(R.id.tvSplash);\r\n                            Animation animation = AnimationUtils.loadAnimation(getApplicationContext(), R.anim.alpha);\r\n                            textView.startAnimation(animation);\r\n\r\n                        }\r\n                    });\r\n\r\n                    logoTimer = 0;\r\n\r\n                    while (logoTimer &lt; 2500) {\r\n                        sleep(100);\r\n                        logoTimer = logoTimer + 100;\r\n                    }\r\n\r\n                    if (UtilClass.checkLogIn(getApplicationContext())) {\r\n                        startActivity(new Intent(getApplicationContext(), MainActivity.class)\r\n                                .setFlags(Intent.FLAG_ACTIVITY_NEW_TASK |\r\n                                        Intent.FLAG_ACTIVITY_CLEAR_TASK));\r\n                    } else {\r\n                        startActivity(new Intent(getApplicationContext(), AuthorizationActivity.class)\r\n                                .setFlags(Intent.FLAG_ACTIVITY_NEW_TASK |\r\n                                        Intent.FLAG_ACTIVITY_CLEAR_TASK));\r\n                    }\r\n\r\n                } catch (InterruptedException e) {\r\n                    e.printStackTrace();\r\n                }\r\n            }\r\n        };\r\n        logoTimer.start();\r\n    }\r\n    }\r\n","title":"How to keep screen orientation in portrait mode with Android 5.0?","body":"<p>I need to keep the screen in portrait mode. For this I use this line in the manifest file</p>\n\n<pre><code>android:screenOrientation=\"portrait\"\n</code></pre>\n\n<p>Here my file</p>\n\n<pre><code>&lt;activity\n        android:name=\".activities.Splash\"\n        android:label=\"@string/app_name\"\n        android:screenOrientation=\"portrait\"&gt;\n        &lt;intent-filter&gt;\n            &lt;action android:name=\"android.intent.action.MAIN\" /&gt;\n\n            &lt;category android:name=\"android.intent.category.LAUNCHER\" /&gt;\n        &lt;/intent-filter&gt;\n    &lt;/activity&gt;\n</code></pre>\n\n<p>I use a Samsung S5, and it still can rotate in landscape...</p>\n\n<p>Accorging documentation with Android 5.0 we get wide setting options</p>\n\n<pre><code>android:screenOrientation=[\"unspecified\" | \"behind\" |\n\"landscape\" | \"portrait\" |\n\"reverseLandscape\" | \"reversePortrait\" |\n\"sensorLandscape\" | \"sensorPortrait\" |\n\"userLandscape\" | \"userPortrait\" |\n\"sensor\" | \"fullSensor\" | \"nosensor\" |\n\"user\" | \"fullUser\" | \"locked\"]\n</code></pre>\n\n<p>I have tried some of them but it still rotate...</p>\n\n<p>What am I doing wrong?</p>\n\n<p>Entire manifest file</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;manifest xmlns:android=\"http://schemas.android.com/apk/res/android\"\npackage=\"com.example.android.camera2basic\"\nandroid:versionCode=\"1\"\nandroid:versionName=\"1.0\"&gt;\n\n&lt;uses-permission android:name=\"android.permission.WRITE_EXTERNAL_STORAGE\" /&gt;\n&lt;uses-permission android:name=\"android.permission.READ_PHONE_STATE\" /&gt;\n&lt;uses-permission android:name=\"android.permission.CAMERA\" /&gt;\n&lt;uses-permission android:name=\"android.permission.INTERNET\" /&gt;\n\n&lt;!-- GCM requires a Google account. --&gt;\n&lt;uses-permission android:name=\"android.permission.GET_ACCOUNTS\" /&gt;\n\n&lt;!-- For Google+ LogIn --&gt;\n&lt;uses-permission android:name=\"android.permission.USE_CREDENTIALS\" /&gt;\n\n&lt;!-- Для регистрации приложения в GCM всякий раз, когда телефон перезагружается. --&gt;\n&lt;uses-permission android:name=\"android.permission.RECEIVE_BOOT_COMPLETED\" /&gt;\n\n&lt;!-- Keeps the processor from sleeping when a message is received. --&gt;\n&lt;uses-permission android:name=\"android.permission.WAKE_LOCK\" /&gt;\n\n&lt;!-- This app has permission to register and receive data message. --&gt;\n&lt;uses-permission android:name=\"com.google.android..RECEIVE\" /&gt;\n\n&lt;uses-feature android:name=\"android.hardware.camera\" /&gt;\n&lt;uses-feature android:name=\"android.hardware.camera.autofocus\" /&gt;\n\n&lt;permission\n    android:name=\"com.example.android.C2D_MESSAGE\"\n    android:protectionLevel=\"signature\" /&gt;\n\n&lt;uses-permission android:name=\"com.example.android\" /&gt;\n\n&lt;application\n    android:name=\".authorization.MyFacebook\"\n    android:allowBackup=\"true\"\n    android:icon=\"@drawable/title\"\n    android:label=\"@string/app_name\"\n    android:theme=\"@style/MaterialTheme\"&gt;\n    &lt;meta-data\n        android:name=\"com.facebook.sdk.ApplicationId\"\n        android:value=\"@string/app_id\" /&gt;\n\n    &lt;activity\n        android:name=\".activities.Splash\"\n        android:label=\"@string/app_name\"\n        android:screenOrientation=\"locked\"&gt;\n        &lt;intent-filter&gt;\n            &lt;action android:name=\"android.intent.action.MAIN\" /&gt;\n\n            &lt;category android:name=\"android.intent.category.LAUNCHER\" /&gt;\n        &lt;/intent-filter&gt;\n    &lt;/activity&gt;\n\n    &lt;meta-data\n        android:name=\"com.google.android.gms.version\"\n        android:value=\"@integer/google_play_services_version\" /&gt;\n\n    &lt;receiver\n        android:name=\".gcm.GcmBroadcastReceiver\"\n        android:permission=\"com.google.android.c2dm.permission.SEND\"&gt;\n        &lt;intent-filter&gt;\n            &lt;action android:name=\"com.google.android.c2dm.intent.RECEIVE\" /&gt;\n            &lt;action android:name=\"com.google.android.c2dm.intent.REGISTRATION\" /&gt;\n\n            &lt;category android:name=\"com.example.android\" /&gt;\n        &lt;/intent-filter&gt;\n    &lt;/receiver&gt;\n\n    &lt;service android:name=\".gcm.GcmIntentService\" /&gt;\n\n    &lt;activity\n        android:name=\".activities.AcceptNotAccept\"\n        android:theme=\"@style/AppTheme.CustomStyle\" /&gt;\n    &lt;activity\n        android:name=\".activities.PopUpActivity\"\n        android:theme=\"@style/AppTheme.CustomStyle\" /&gt;\n    &lt;activity android:name=\".tools.TestDeleteIt\" /&gt;\n    &lt;activity android:name=\".activities.Welcome2\" /&gt;\n    &lt;activity android:name=\".activities.WebActivity\" /&gt;\n    &lt;activity android:name=\".authorization.AuthorizationActivity\" /&gt;\n    &lt;activity android:name=\".activities.WebViewAcceptReject\" /&gt;\n    &lt;activity android:name=\".activities.CameraActivity\" /&gt;\n    &lt;activity android:name=\".authorization.LogIn\" /&gt;\n    &lt;activity android:name=\".authorization.RegistrationActivity\" /&gt;\n    &lt;activity android:name=\".activities.ForgotYourPassword\" /&gt;\n    &lt;activity android:name=\".activities.MainActivity\" /&gt;\n    &lt;activity android:name=\".activities.VideoActivity\"/&gt;\n    &lt;activity\n        android:name=\"com.facebook.FacebookActivity\"\n        android:configChanges=\"keyboard|keyboardHidden|screenLayout|screenSize|orientation\"\n        android:label=\"@string/app_name\"\n        android:theme=\"@android:style/Theme.Translucent.NoTitleBar\" /&gt;\n&lt;/application&gt;\n\n&lt;/manifest&gt;\n</code></pre>\n\n<p>Java code for splash</p>\n\n<pre><code>public class Splash extends Activity {\n\n@Override\nprotected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.activity_splash);\n\n//      Hide the status bar.\n    View decorView = getWindow().getDecorView();\n    int uiOptions = View.SYSTEM_UI_FLAG_FULLSCREEN;\n    decorView.setSystemUiVisibility(uiOptions);\n\n    TextView tvSplash = (TextView) findViewById(R.id.tvSplash);\n    tvSplash.setVisibility(View.INVISIBLE);\n    UtilClass.setFont(getApplicationContext(), tvSplash);\n\n    Thread logoTimer = new Thread() {\n        public void run() {\n            try {\n\n                ImageView imageView = (ImageView) findViewById(R.id.ivSplash);\n                Animation animation = AnimationUtils.loadAnimation(getApplicationContext(), R.anim.scale);\n                imageView.startAnimation(animation);\n\n                int logoTimer = 0;\n                while (logoTimer &lt; 2500) {\n                    sleep(100);\n                    logoTimer = logoTimer + 100;\n                }\n\n                runOnUiThread(new Runnable() {\n                    @Override\n                    public void run() {\n                        TextView textView = (TextView) findViewById(R.id.tvSplash);\n                        Animation animation = AnimationUtils.loadAnimation(getApplicationContext(), R.anim.alpha);\n                        textView.startAnimation(animation);\n\n                    }\n                });\n\n                logoTimer = 0;\n\n                while (logoTimer &lt; 2500) {\n                    sleep(100);\n                    logoTimer = logoTimer + 100;\n                }\n\n                if (UtilClass.checkLogIn(getApplicationContext())) {\n                    startActivity(new Intent(getApplicationContext(), MainActivity.class)\n                            .setFlags(Intent.FLAG_ACTIVITY_NEW_TASK |\n                                    Intent.FLAG_ACTIVITY_CLEAR_TASK));\n                } else {\n                    startActivity(new Intent(getApplicationContext(), AuthorizationActivity.class)\n                            .setFlags(Intent.FLAG_ACTIVITY_NEW_TASK |\n                                    Intent.FLAG_ACTIVITY_CLEAR_TASK));\n                }\n\n            } catch (InterruptedException e) {\n                e.printStackTrace();\n            }\n        }\n    };\n    logoTimer.start();\n}\n}\n</code></pre>\n"},{"tags":["java","junit","mockito"],"comments":[{"owner":{"account_id":20353400,"reputation":124,"user_id":14929537,"display_name":"fabio19933"},"score":0,"creation_date":1690291232,"post_id":76763005,"comment_id":135330509,"body_markdown":"Could you print implementation of addBatch and setStructured inside to SQLServerPreparedStatement class to understand if everything is correct?","body":"Could you print implementation of addBatch and setStructured inside to SQLServerPreparedStatement class to understand if everything is correct?"},{"owner":{"account_id":187094,"reputation":5113,"user_id":424903,"display_name":"Gimby"},"score":3,"creation_date":1690291466,"post_id":76763005,"comment_id":135330575,"body_markdown":"The methods are final. Don&#39;t know if Mockito can instrument that. https://github.com/microsoft/mssql-jdbc/blob/main/src/main/java/com/microsoft/sqlserver/jdbc/SQLServerPreparedStatement.java","body":"The methods are final. Don&#39;t know if Mockito can instrument that. <a href=\"https://github.com/microsoft/mssql-jdbc/blob/main/src/main/java/com/microsoft/sqlserver/jdbc/SQLServerPreparedStatement.java\" rel=\"nofollow noreferrer\">github.com/microsoft/mssql-jdbc/blob/main/src/main/java/com/&zwnj;&#8203;&hellip;</a>"}],"answers":[{"comments":[{"owner":{"account_id":187094,"reputation":5113,"user_id":424903,"display_name":"Gimby"},"score":0,"creation_date":1690368605,"post_id":76764544,"comment_id":135342839,"body_markdown":"Indeed. You can ask a followup question about that: then why did it complain about setStructured() even though addBatch() is instrumented first and it is final too? Mockito works in mysterious ways.","body":"Indeed. You can ask a followup question about that: then why did it complain about setStructured() even though addBatch() is instrumented first and it is final too? Mockito works in mysterious ways."}],"tags":[],"owner":{"account_id":19179079,"reputation":55,"user_id":14011203,"display_name":"Renaud"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1690300992,"creation_date":1690300992,"answer_id":76764544,"question_id":76763005,"body_markdown":"Thanks @Gimby for pointing out the issue.  It was in fact related to the method being final.  \r\n\r\nA few references that helped me out:\r\n- https://stackoverflow.com/questions/52418475/java-mock-final-void-method-using-mockito\r\n- https://www.davidvlijmincx.com/posts/writing_higher_quality_tests_with_mockitos_inline_mock_maker/","title":"Mockito error &quot;Only void methods can doNothing()&quot; while trying to mock a void method","body":"<p>Thanks @Gimby for pointing out the issue.  It was in fact related to the method being final.</p>\n<p>A few references that helped me out:</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/52418475/java-mock-final-void-method-using-mockito\">Java Mock final void method using Mockito</a></li>\n<li><a href=\"https://www.davidvlijmincx.com/posts/writing_higher_quality_tests_with_mockitos_inline_mock_maker/\" rel=\"nofollow noreferrer\">https://www.davidvlijmincx.com/posts/writing_higher_quality_tests_with_mockitos_inline_mock_maker/</a></li>\n</ul>\n"}],"owner":{"account_id":19179079,"reputation":55,"user_id":14011203,"display_name":"Renaud"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":75,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1690300992,"creation_date":1690290261,"question_id":76763005,"body_markdown":"Im experimenting with Mockito and am encountering an error while trying to mock a void method: &quot;Only void methods can doNothing()!&quot;.  However the method Im trying to mock is a void method: \r\n`void com.microsoft.sqlserver.jdbc.SQLServerPreparedStatement.setStructured(int n, String tvpName, SQLServerDataTable tvpDataTable) throws SQLServerException`\r\n\r\n\r\nHere&#39;s what Im doing\r\n\r\n```\r\npublic class MockitoTest {\r\n\t@Mock private Connection mockConnection;\r\n\t@Mock private SQLServerPreparedStatement mockStatement;\t\r\n\r\n\r\n\t@Test\r\n\tpublic void mockitoTest() throws SQLException\r\n\t{\r\n\t\tMockitoAnnotations.openMocks(this);\r\n\t\tMockito.when(mockConnection.prepareStatement(Mockito.any())).thenReturn(mockStatement);\r\n\t\t\r\n\t\t// Can mock this and it doesnt give me any errors\r\n\t\tMockito.doNothing().when(mockStatement).addBatch(Mockito.isA(String.class));\r\n\r\n\t\t// This throws me the mentioned MockitoException, even through setStructured is void\r\n\t\tMockito.doNothing().when(mockStatement).setStructured(1, Mockito.isA(String.class), Mockito.isA(SQLServerDataTable.class));\r\n\r\n\t\t// ... \r\n\t}\r\n```\r\n\r\nAs per my comment, I can mock SQLServerPreparedStatement&#39;s addBatch method, but not the setStructured method?  Both are void methods.  Why does Mockito think setStructured is not a void method?\r\n\r\nIm using this versions:\r\n```\r\n\t&lt;groupId&gt;org.mockito&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;mockito-core&lt;/artifactId&gt;\r\n\t&lt;version&gt;4.11.0&lt;/version&gt;\r\n```","title":"Mockito error &quot;Only void methods can doNothing()&quot; while trying to mock a void method","body":"<p>Im experimenting with Mockito and am encountering an error while trying to mock a void method: &quot;Only void methods can doNothing()!&quot;.  However the method Im trying to mock is a void method:\n<code>void com.microsoft.sqlserver.jdbc.SQLServerPreparedStatement.setStructured(int n, String tvpName, SQLServerDataTable tvpDataTable) throws SQLServerException</code></p>\n<p>Here's what Im doing</p>\n<pre><code>public class MockitoTest {\n    @Mock private Connection mockConnection;\n    @Mock private SQLServerPreparedStatement mockStatement; \n\n\n    @Test\n    public void mockitoTest() throws SQLException\n    {\n        MockitoAnnotations.openMocks(this);\n        Mockito.when(mockConnection.prepareStatement(Mockito.any())).thenReturn(mockStatement);\n        \n        // Can mock this and it doesnt give me any errors\n        Mockito.doNothing().when(mockStatement).addBatch(Mockito.isA(String.class));\n\n        // This throws me the mentioned MockitoException, even through setStructured is void\n        Mockito.doNothing().when(mockStatement).setStructured(1, Mockito.isA(String.class), Mockito.isA(SQLServerDataTable.class));\n\n        // ... \n    }\n</code></pre>\n<p>As per my comment, I can mock SQLServerPreparedStatement's addBatch method, but not the setStructured method?  Both are void methods.  Why does Mockito think setStructured is not a void method?</p>\n<p>Im using this versions:</p>\n<pre><code>    &lt;groupId&gt;org.mockito&lt;/groupId&gt;\n    &lt;artifactId&gt;mockito-core&lt;/artifactId&gt;\n    &lt;version&gt;4.11.0&lt;/version&gt;\n</code></pre>\n"},{"tags":["java","discord","discord-jda"],"comments":[{"owner":{"account_id":14719989,"reputation":5877,"user_id":10630900,"display_name":"Minn"},"score":0,"creation_date":1690284281,"post_id":76761294,"comment_id":135328863,"body_markdown":"Speaking modes are unrelated to whether the bot is muted. You should consider removing the while(true) loop, since it will just stop your bot from working.","body":"Speaking modes are unrelated to whether the bot is muted. You should consider removing the while(true) loop, since it will just stop your bot from working."},{"owner":{"account_id":29080637,"reputation":1,"user_id":22276759,"display_name":"kabaniery"},"score":0,"creation_date":1690301489,"post_id":76761294,"comment_id":135333012,"body_markdown":"Sorry, I say wrong, bot stay silent, doesn&#39;t muted. But if I remove while(true) loop, bot starts recursive reconnect to the voice channel. Maybe exist some method that should starting calling canProvide() method? Unfortunately I can&#39;t find anything on documentation","body":"Sorry, I say wrong, bot stay silent, doesn&#39;t muted. But if I remove while(true) loop, bot starts recursive reconnect to the voice channel. Maybe exist some method that should starting calling canProvide() method? Unfortunately I can&#39;t find anything on documentation"},{"owner":{"account_id":14719989,"reputation":5877,"user_id":10630900,"display_name":"Minn"},"score":0,"creation_date":1690394171,"post_id":76761294,"comment_id":135348899,"body_markdown":"try updating jda, and in the future you should make sure to properly describe your problem in your original post. The loop only makes your bot stop working entirely.","body":"try updating jda, and in the future you should make sure to properly describe your problem in your original post. The loop only makes your bot stop working entirely."}],"owner":{"account_id":29080637,"reputation":1,"user_id":22276759,"display_name":"kabaniery"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":43,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690300984,"creation_date":1690277383,"question_id":76761294,"body_markdown":"I developing a Discord bot on Java, using JDA v5.0.0-alpha.1. My current target is forcing bot to use voice mode in channel to broadcast audioStream of one of my audio device. For that I use function that set AudioSendHandler to bot AudioManager and open connection of user&#39;s voice channel:\r\n\r\n```\r\npublic void startStream(SlashCommandEvent event) {\r\n        AudioManager manager = Objects.requireNonNull(event.getGuild()).getAudioManager();\r\n        AudioFormatter stream = new AudioFormatter();\r\n        manager.setSendingHandler(stream);\r\n        manager.setSpeakingMode(SpeakingMode.VOICE);\r\n        if (event.getMember().getVoiceState().inAudioChannel()) {\r\n            manager.openAudioConnection(event.getMember().getVoiceState().getChannel());\r\n        }\r\n        while (true) {\r\n        }\r\n        //manager.closeAudioConnection();\r\n    }\r\n```\r\nBut after writting a command, bot connect to user&#39;s channel and stay silent. How can I force him to use a Speaking Mode?\r\nCode of my AudioSendHandler class:\r\n\r\n```\r\npublic class AudioFormatter implements AudioSendHandler {\r\n    AudioFormat format;\r\n    TargetDataLine targetDataLine;\r\n    byte[] buffer;\r\n    ByteBuffer returnedAudio;\r\n\r\n    public AudioFormatter() {\r\n        this.format = new AudioFormat((float)48000, 16, 2, true, true);\r\n        this.targetDataLine =  AudioDevice.getAudioDevice();\r\n    }\r\n\r\n    @Override\r\n    public boolean canProvide() {\r\n        buffer = new byte[48000 * 2 * 2 / 50];\r\n        int bytesRead = targetDataLine.read(buffer, 0, buffer.length);\r\n        returnedAudio = ByteBuffer.wrap(buffer);\r\n        return true;\r\n    }\r\n\r\n    @Nullable\r\n    @Override\r\n    public ByteBuffer provide20MsAudio() {\r\n        return returnedAudio;\r\n    }\r\n    @Override\r\n    public boolean isOpus() {\r\n        return false;\r\n    }\r\n}\r\n```\r\n\r\n\r\nOn debugging, I notice, that object of AudioSendHandler class was created but method canProvide() was never invoked.","title":"How to enable Speaking Mode in JDA Bot (Java Discord API)","body":"<p>I developing a Discord bot on Java, using JDA v5.0.0-alpha.1. My current target is forcing bot to use voice mode in channel to broadcast audioStream of one of my audio device. For that I use function that set AudioSendHandler to bot AudioManager and open connection of user's voice channel:</p>\n<pre><code>public void startStream(SlashCommandEvent event) {\n        AudioManager manager = Objects.requireNonNull(event.getGuild()).getAudioManager();\n        AudioFormatter stream = new AudioFormatter();\n        manager.setSendingHandler(stream);\n        manager.setSpeakingMode(SpeakingMode.VOICE);\n        if (event.getMember().getVoiceState().inAudioChannel()) {\n            manager.openAudioConnection(event.getMember().getVoiceState().getChannel());\n        }\n        while (true) {\n        }\n        //manager.closeAudioConnection();\n    }\n</code></pre>\n<p>But after writting a command, bot connect to user's channel and stay silent. How can I force him to use a Speaking Mode?\nCode of my AudioSendHandler class:</p>\n<pre><code>public class AudioFormatter implements AudioSendHandler {\n    AudioFormat format;\n    TargetDataLine targetDataLine;\n    byte[] buffer;\n    ByteBuffer returnedAudio;\n\n    public AudioFormatter() {\n        this.format = new AudioFormat((float)48000, 16, 2, true, true);\n        this.targetDataLine =  AudioDevice.getAudioDevice();\n    }\n\n    @Override\n    public boolean canProvide() {\n        buffer = new byte[48000 * 2 * 2 / 50];\n        int bytesRead = targetDataLine.read(buffer, 0, buffer.length);\n        returnedAudio = ByteBuffer.wrap(buffer);\n        return true;\n    }\n\n    @Nullable\n    @Override\n    public ByteBuffer provide20MsAudio() {\n        return returnedAudio;\n    }\n    @Override\n    public boolean isOpus() {\n        return false;\n    }\n}\n</code></pre>\n<p>On debugging, I notice, that object of AudioSendHandler class was created but method canProvide() was never invoked.</p>\n"},{"tags":["java","primefaces","png","image-cropper"],"answers":[{"tags":[],"owner":{"account_id":420683,"reputation":10207,"user_id":798502,"accept_rate":86,"display_name":"seinecle"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1690300419,"creation_date":1690298041,"answer_id":76764126,"question_id":76764125,"body_markdown":"The error was investigated [in a Github issue posted on the Primefaces repo][1].\r\n\r\nIt seems that the issue lays in the JDK, not in Primefaces. The error disappears when:\r\n\r\n- the image is converted to jpg\r\n- or a smaller png image is used\r\n\r\nThere is no reason for Primefaces to work on solving this issue and I document it here for future users.\r\n\r\n\r\n  [1]: https://github.com/primefaces/primefaces/issues/10373","title":"ImageCropper: fails with unhelpful error message on very large pictures","body":"<p>The error was investigated <a href=\"https://github.com/primefaces/primefaces/issues/10373\" rel=\"nofollow noreferrer\">in a Github issue posted on the Primefaces repo</a>.</p>\n<p>It seems that the issue lays in the JDK, not in Primefaces. The error disappears when:</p>\n<ul>\n<li>the image is converted to jpg</li>\n<li>or a smaller png image is used</li>\n</ul>\n<p>There is no reason for Primefaces to work on solving this issue and I document it here for future users.</p>\n"}],"owner":{"account_id":420683,"reputation":10207,"user_id":798502,"accept_rate":86,"display_name":"seinecle"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":19,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1690300419,"creation_date":1690298041,"question_id":76764125,"body_markdown":"Using Primefaces&#39;s `ImageCropper` component, cropping a png image of 15,000 x 12,000 pixels fails, the only error trace I get is `error reading png data`. There is no error trace logged on my local IDE.\r\n\r\n- local IDE: NetBeans\r\n- JDK: 17\r\n- server: Payara\r\n\r\n","title":"ImageCropper: fails with unhelpful error message on very large pictures","body":"<p>Using Primefaces's <code>ImageCropper</code> component, cropping a png image of 15,000 x 12,000 pixels fails, the only error trace I get is <code>error reading png data</code>. There is no error trace logged on my local IDE.</p>\n<ul>\n<li>local IDE: NetBeans</li>\n<li>JDK: 17</li>\n<li>server: Payara</li>\n</ul>\n"},{"tags":["java","spring","spring-integration","distributed-lock","spring-integration-jdbc"],"answers":[{"comments":[{"owner":{"account_id":109585,"reputation":8067,"user_id":290284,"accept_rate":95,"display_name":"Cui Pengfei 崔鹏飞"},"score":0,"creation_date":1690299739,"post_id":76764197,"comment_id":135332597,"body_markdown":"Thanks, I have written a few tests: https://github.com/cuipengfei/Spikes/blob/master/jpa/spring-jdbc-distributed-lock-issue/src/test/java/com/github/spring/example/LockTest.java\n\nwhich covers these 4 scenarios: https://github.com/cuipengfei/Spikes/blob/master/jpa/spring-jdbc-distributed-lock-issue/readme.md\n\nIt looks like expireUnusedOlderThan is what I needed.","body":"Thanks, I have written a few tests: <a href=\"https://github.com/cuipengfei/Spikes/blob/master/jpa/spring-jdbc-distributed-lock-issue/src/test/java/com/github/spring/example/LockTest.java\" rel=\"nofollow noreferrer\">github.com/cuipengfei/Spikes/blob/master/jpa/&hellip;</a>  which covers these 4 scenarios: <a href=\"https://github.com/cuipengfei/Spikes/blob/master/jpa/spring-jdbc-distributed-lock-issue/readme.md\" rel=\"nofollow noreferrer\">github.com/cuipengfei/Spikes/blob/master/jpa/&hellip;</a>  It looks like expireUnusedOlderThan is what I needed."}],"tags":[],"owner":{"account_id":3273937,"reputation":114870,"user_id":2756547,"accept_rate":75,"display_name":"Artem Bilan"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1690298487,"creation_date":1690298487,"answer_id":76764197,"question_id":76755731,"body_markdown":"When you talk about one process (and even different threads), you still ask same repository instance and second request is aware about the first. When we deal with several repository instances (different processes in your meaning), they are not aware of each other, and we can avoid dead lock only via TTL (expire) property. This is typical approach in distributed systems to let other instances to take the data when locked instance might be already dead or crashed, so it could not unlock.\r\n\r\nThis way we recommend a TTL long enough to let the logic in program to be performed, but so reasonable that other instances won’t park for nothing too long.\r\n\r\nIn other words, the `time-to-live` is, essentially, an emergency procedure: the locking process might be still running when we take the lock in other process because of expiration. Therefore it has to be a bit longer than we keep the lock in our program.\r\n\r\nYou can look into a `JdbcLockRegistry.expireUnusedOlderThan()` though, but just imaging what would you do if you wouldn&#39;t use this `JdbcLockRegistry`, but regular `ReentrantLock` since you really talk about a single JVM problem.","title":"time to live of DefaultLockRepository has no effect for 2 threads in the same java process when using JdbcLockRegistry","body":"<p>When you talk about one process (and even different threads), you still ask same repository instance and second request is aware about the first. When we deal with several repository instances (different processes in your meaning), they are not aware of each other, and we can avoid dead lock only via TTL (expire) property. This is typical approach in distributed systems to let other instances to take the data when locked instance might be already dead or crashed, so it could not unlock.</p>\n<p>This way we recommend a TTL long enough to let the logic in program to be performed, but so reasonable that other instances won’t park for nothing too long.</p>\n<p>In other words, the <code>time-to-live</code> is, essentially, an emergency procedure: the locking process might be still running when we take the lock in other process because of expiration. Therefore it has to be a bit longer than we keep the lock in our program.</p>\n<p>You can look into a <code>JdbcLockRegistry.expireUnusedOlderThan()</code> though, but just imaging what would you do if you wouldn't use this <code>JdbcLockRegistry</code>, but regular <code>ReentrantLock</code> since you really talk about a single JVM problem.</p>\n"}],"owner":{"account_id":109585,"reputation":8067,"user_id":290284,"accept_rate":95,"display_name":"Cui Pengfei 崔鹏飞"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":70,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76764197,"answer_count":1,"score":0,"last_activity_date":1690299531,"creation_date":1690210920,"question_id":76755731,"body_markdown":"The following code can reproduce the issue\r\n\r\nhttps://github.com/cuipengfei/Spikes/blob/master/jpa/spring-jdbc-distributed-lock-issue/\r\n\r\nrun the test cases in the above code to reproduce\r\n\r\nbefore running the test case, start pg db in docker:\r\n\r\n```shell\r\ndocker run -e POSTGRES_USER=localtest -e POSTGRES_PASSWORD=localtest -e POSTGRES_DB=orders -p 5432:5432 -d postgres:9.6.12\r\n```\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\nwhen running 2 workers in 2 separate java processes, TTL works as expected ↑\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/2aPaE.png\r\n  [2]: https://i.stack.imgur.com/HTjf7.png\r\n\r\nwhen running both workers in one java process, TTL has no effect ↑\r\n\r\n&gt; \r\n\r\nAside from the above code, the real issue I was facing is like this:\r\n\r\n**request 1 hits server 1**, while handling the request, the **thread** **sometimes** **hangs**(due to a weird issue of a 3rd party jar which we can not replace)\r\n**when** that **hanging** happens, our code **won&#39;t have a chance to release the lock**\r\n\r\nthen **request 2** comes, if it hits **other servers**, then **it&#39;s fine**. but **if it hits server 1**, then **request 2** won&#39;t be able to get the lock since the hanging thread **never released the lock** and **TTL does not help in this case**.\r\n\r\nIn **summary**:\r\nIn **one java process**, **a thread gets the lock** but somehow due to bugs or whatever reason it **did not get a chance to  release** the lock. \r\nThen **subsequent threads in this java process** **won&#39;t be able to obtain the same lock** and can not proceed with unfinished job.\r\n**In this case, are there any recommended ways to allow the subsequent threads to be able to get the lock?**","title":"time to live of DefaultLockRepository has no effect for 2 threads in the same java process when using JdbcLockRegistry","body":"<p>The following code can reproduce the issue</p>\n<p><a href=\"https://github.com/cuipengfei/Spikes/blob/master/jpa/spring-jdbc-distributed-lock-issue/\" rel=\"nofollow noreferrer\">https://github.com/cuipengfei/Spikes/blob/master/jpa/spring-jdbc-distributed-lock-issue/</a></p>\n<p>run the test cases in the above code to reproduce</p>\n<p>before running the test case, start pg db in docker:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>docker run -e POSTGRES_USER=localtest -e POSTGRES_PASSWORD=localtest -e POSTGRES_DB=orders -p 5432:5432 -d postgres:9.6.12\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/2aPaE.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/2aPaE.png\" alt=\"enter image description here\" /></a></p>\n<p>when running 2 workers in 2 separate java processes, TTL works as expected ↑</p>\n<p><a href=\"https://i.stack.imgur.com/HTjf7.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/HTjf7.png\" alt=\"enter image description here\" /></a></p>\n<p>when running both workers in one java process, TTL has no effect ↑</p>\n<blockquote>\n</blockquote>\n<p>Aside from the above code, the real issue I was facing is like this:</p>\n<p><strong>request 1 hits server 1</strong>, while handling the request, the <strong>thread</strong> <strong>sometimes</strong> <strong>hangs</strong>(due to a weird issue of a 3rd party jar which we can not replace)\n<strong>when</strong> that <strong>hanging</strong> happens, our code <strong>won't have a chance to release the lock</strong></p>\n<p>then <strong>request 2</strong> comes, if it hits <strong>other servers</strong>, then <strong>it's fine</strong>. but <strong>if it hits server 1</strong>, then <strong>request 2</strong> won't be able to get the lock since the hanging thread <strong>never released the lock</strong> and <strong>TTL does not help in this case</strong>.</p>\n<p>In <strong>summary</strong>:\nIn <strong>one java process</strong>, <strong>a thread gets the lock</strong> but somehow due to bugs or whatever reason it <strong>did not get a chance to  release</strong> the lock.\nThen <strong>subsequent threads in this java process</strong> <strong>won't be able to obtain the same lock</strong> and can not proceed with unfinished job.\n<strong>In this case, are there any recommended ways to allow the subsequent threads to be able to get the lock?</strong></p>\n"},{"tags":["java","spring","spring-boot","spring-security"],"comments":[{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":1,"creation_date":1690295950,"post_id":76763722,"comment_id":135331747,"body_markdown":"Did you look at the documentation? That should tell you what you need to know.","body":"Did you look at the documentation? That should tell you what you need to know."},{"owner":{"account_id":1317274,"reputation":1240,"user_id":1263867,"accept_rate":100,"display_name":"Koos Gadellaa"},"score":1,"creation_date":1690296485,"post_id":76763722,"comment_id":135331865,"body_markdown":"see https://docs.spring.io/spring-security/site/docs/current/api/deprecated-list.html perhaps?","body":"see <a href=\"https://docs.spring.io/spring-security/site/docs/current/api/deprecated-list.html\" rel=\"nofollow noreferrer\">docs.spring.io/spring-security/site/docs/current/api/&hellip;</a> perhaps?"},{"owner":{"account_id":2064278,"reputation":13138,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":1,"creation_date":1690296723,"post_id":76763722,"comment_id":135331911,"body_markdown":"why did you not read the documentation?","body":"why did you not read the documentation?"}],"owner":{"account_id":10046033,"reputation":672,"user_id":7427398,"accept_rate":32,"display_name":"ksernow"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":108,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690299472,"creation_date":1690295212,"question_id":76763722,"body_markdown":"I am trying to migrate to spring 3. I am finding that many method like csrf, authorizeReuqests, antMatcher has been deprecated. \r\n\r\nWhat is the correct way to replace them?\r\n\r\n```\r\npublic SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\r\n\t\thttp.csrf().disable().authorizeRequests().antMatchers(apiPublicPattern).permitAll().antMatchers(fileExtensions)\r\n\t\t\t\t.permitAll().anyRequest().authenticated().and()\r\n\t\t\t\t.addFilterBefore(compositeAuthenticationFilter(), BasicAuthenticationFilter.class).sessionManagement()\r\n\t\t\t\t.maximumSessions(1).expiredUrl(&quot;/expired&quot;).sessionRegistry(sessionRegistry());\r\n\t\thttp.exceptionHandling().accessDeniedHandler(accessDeniedHandler()).and().logout().logoutUrl(&quot;/logout&quot;)\r\n\t\t\t\t.logoutSuccessUrl(&quot;/&quot;).and().headers().contentSecurityPolicy(contentSecurityPolicy);\r\n\t\thttp.authenticationProvider(jwtBearerTokenAuthenticationProvider());\r\n\t\thttp.authenticationProvider(apiKeyAuthenticationProvider());\r\n\t\treturn http.build();\r\n\r\n\r\n\t}\r\n\r\n```\r\n\r\nIDE shows warnings[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/GaX9D.png","title":"Updating to Spring 3.X from 2.X - Correct way to replace deprecated method?","body":"<p>I am trying to migrate to spring 3. I am finding that many method like csrf, authorizeReuqests, antMatcher has been deprecated.</p>\n<p>What is the correct way to replace them?</p>\n<pre><code>public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n        http.csrf().disable().authorizeRequests().antMatchers(apiPublicPattern).permitAll().antMatchers(fileExtensions)\n                .permitAll().anyRequest().authenticated().and()\n                .addFilterBefore(compositeAuthenticationFilter(), BasicAuthenticationFilter.class).sessionManagement()\n                .maximumSessions(1).expiredUrl(&quot;/expired&quot;).sessionRegistry(sessionRegistry());\n        http.exceptionHandling().accessDeniedHandler(accessDeniedHandler()).and().logout().logoutUrl(&quot;/logout&quot;)\n                .logoutSuccessUrl(&quot;/&quot;).and().headers().contentSecurityPolicy(contentSecurityPolicy);\n        http.authenticationProvider(jwtBearerTokenAuthenticationProvider());\n        http.authenticationProvider(apiKeyAuthenticationProvider());\n        return http.build();\n\n\n    }\n\n</code></pre>\n<p>IDE shows warnings<a href=\"https://i.stack.imgur.com/GaX9D.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/GaX9D.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":982079,"reputation":705,"user_id":1001566,"accept_rate":33,"display_name":"Paulo Coutinho"},"score":1,"creation_date":1618015809,"post_id":61455134,"comment_id":118482727,"body_markdown":"I made a new project that can help everyone that is trying do it: https://github.com/paulo-coutinho/rvplayer","body":"I made a new project that can help everyone that is trying do it: <a href=\"https://github.com/paulo-coutinho/rvplayer\" rel=\"nofollow noreferrer\">github.com/paulo-coutinho/rvplayer</a>"}],"answers":[{"comments":[{"owner":{"account_id":14646821,"reputation":553,"user_id":10577926,"display_name":"Adnan haider"},"score":1,"creation_date":1613988670,"post_id":62556034,"comment_id":117236800,"body_markdown":"is it available in java?","body":"is it available in java?"}],"tags":[],"owner":{"account_id":3626293,"reputation":3515,"user_id":3023833,"display_name":"Mostafa Anter"},"comment_count":1,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1609181722,"creation_date":1593004715,"answer_id":62556034,"question_id":61455134,"body_markdown":"here is a new concept to implement that so check this out Integrate RecyclerView with ExoPlayer — The clean way — and customization, my solution based on that [article][1] \r\n\r\nP.S For cleaner code, we will be using Data binding Library and BindingAdapter so do not forget to enable these in gradle.\r\n\r\nLets create an extension function with @BindingAdapter annotation, that we will use to setup our PlayerView, with the values we have passed in our xml file as the arguments.\r\n\r\n\r\n\r\n   BindingData Adapter will be something like this\r\n\r\n    @BindingAdapter(&quot;video_url&quot;, &quot;on_state_change&quot;)\r\n    fun PlayerView.loadVideo(url: String, callback: PlayerStateChange) {\r\n    if (url == null) return\r\n    val player = ExoPlayerFactory.newSimpleInstance(\r\n        context, DefaultRenderersFactory(context), DefaultTrackSelector(),\r\n        DefaultLoadControl()\r\n    )\r\n\r\n    player.playWhenReady = true\r\n    player.repeatMode = Player.REPEAT_MODE_ALL\r\n    // When changing track, retain the latest frame instead of showing a black screen\r\n    setKeepContentOnPlayerReset(true)\r\n    // We&#39;ll show the controller\r\n    this.useController = true\r\n    // Provide url to load the video from here\r\n    val mediaSource = ExtractorMediaSource.Factory(\r\n        DefaultHttpDataSourceFactory(&quot;Demo&quot;)\r\n    ).createMediaSource(Uri.parse(url))\r\n\r\n    player.prepare(mediaSource)\r\n\r\n    this.player = player\r\n\r\n    this.player!!.addListener(object : Player.EventListener {\r\n\r\n        override fun onPlayerError(error: ExoPlaybackException?) {\r\n            super.onPlayerError(error)\r\n            this@loadVideo.context.toast(&quot;Oops! Error occurred while playing media.&quot;)\r\n        }\r\n\r\n        override fun onPlayerStateChanged(playWhenReady: Boolean, playbackState: Int) {\r\n            super.onPlayerStateChanged(playWhenReady, playbackState)\r\n            \r\n            if (playbackState == Player.STATE_BUFFERING) callback.onVideoBuffering(player) // Buffering.. set progress bar visible here\r\n            if (playbackState == Player.STATE_READY){\r\n                // [PlayerView] has fetched the video duration so this is the block to hide the buffering progress bar\r\n                callback.onVideoDurationRetrieved(this@loadVideo.player.duration, player)\r\n            }\r\n            if (playbackState == Player.STATE_READY &amp;&amp; player.playWhenReady){\r\n                // [PlayerView] has started playing/resumed the video\r\n                callback.onStartedPlaying(player)\r\n            }\r\n        }\r\n    })\r\n    }\r\n\r\n\r\n\r\nyou can access a demo repo from [here][2]\r\n\r\n&lt;iframe src=&quot;https://giphy.com/embed/ibAOpHOHg9w8Wfabuy&quot; width=&quot;222&quot; height=&quot;480&quot; frameBorder=&quot;0&quot; class=&quot;giphy-embed&quot; allowFullScreen&gt;&lt;/iframe&gt;&lt;p&gt;&lt;a href=&quot;https://giphy.com/gifs/ibAOpHOHg9w8Wfabuy&quot;&gt;via GIPHY&lt;/a&gt;&lt;/p&gt;\r\n\r\n  [1]: https://medium.com/mindorks/working-with-exoplayer-the-clean-way-and-customization-fac81e5d39ba\r\n  [2]: https://github.com/MostafaAnter/VideoPlayerInsideRecyclerView","title":"Exoplayer with Recyclerview","body":"<p>here is a new concept to implement that so check this out Integrate RecyclerView with ExoPlayer — The clean way — and customization, my solution based on that <a href=\"https://medium.com/mindorks/working-with-exoplayer-the-clean-way-and-customization-fac81e5d39ba\" rel=\"noreferrer\">article</a></p>\n<p>P.S For cleaner code, we will be using Data binding Library and BindingAdapter so do not forget to enable these in gradle.</p>\n<p>Lets create an extension function with @BindingAdapter annotation, that we will use to setup our PlayerView, with the values we have passed in our xml file as the arguments.</p>\n<p>BindingData Adapter will be something like this</p>\n<pre><code>@BindingAdapter(&quot;video_url&quot;, &quot;on_state_change&quot;)\nfun PlayerView.loadVideo(url: String, callback: PlayerStateChange) {\nif (url == null) return\nval player = ExoPlayerFactory.newSimpleInstance(\n    context, DefaultRenderersFactory(context), DefaultTrackSelector(),\n    DefaultLoadControl()\n)\n\nplayer.playWhenReady = true\nplayer.repeatMode = Player.REPEAT_MODE_ALL\n// When changing track, retain the latest frame instead of showing a black screen\nsetKeepContentOnPlayerReset(true)\n// We'll show the controller\nthis.useController = true\n// Provide url to load the video from here\nval mediaSource = ExtractorMediaSource.Factory(\n    DefaultHttpDataSourceFactory(&quot;Demo&quot;)\n).createMediaSource(Uri.parse(url))\n\nplayer.prepare(mediaSource)\n\nthis.player = player\n\nthis.player!!.addListener(object : Player.EventListener {\n\n    override fun onPlayerError(error: ExoPlaybackException?) {\n        super.onPlayerError(error)\n        this@loadVideo.context.toast(&quot;Oops! Error occurred while playing media.&quot;)\n    }\n\n    override fun onPlayerStateChanged(playWhenReady: Boolean, playbackState: Int) {\n        super.onPlayerStateChanged(playWhenReady, playbackState)\n        \n        if (playbackState == Player.STATE_BUFFERING) callback.onVideoBuffering(player) // Buffering.. set progress bar visible here\n        if (playbackState == Player.STATE_READY){\n            // [PlayerView] has fetched the video duration so this is the block to hide the buffering progress bar\n            callback.onVideoDurationRetrieved(this@loadVideo.player.duration, player)\n        }\n        if (playbackState == Player.STATE_READY &amp;&amp; player.playWhenReady){\n            // [PlayerView] has started playing/resumed the video\n            callback.onStartedPlaying(player)\n        }\n    }\n})\n}\n</code></pre>\n<p>you can access a demo repo from <a href=\"https://github.com/MostafaAnter/VideoPlayerInsideRecyclerView\" rel=\"noreferrer\">here</a></p>\n<p><a href=\"https://giphy.com/gifs/ibAOpHOHg9w8Wfabuy\" rel=\"noreferrer\">via GIPHY</a></p>\n"},{"comments":[{"owner":{"account_id":2892194,"reputation":6142,"user_id":2480714,"accept_rate":67,"display_name":"PGMacDesign"},"score":0,"creation_date":1614058014,"post_id":65470344,"comment_id":117261320,"body_markdown":"While this works well for things inside of the recyclerview, it doesn&#39;t help when the app goes to the background (onStop).","body":"While this works well for things inside of the recyclerview, it doesn&#39;t help when the app goes to the background (onStop)."}],"tags":[],"owner":{"account_id":20115729,"reputation":111,"user_id":14751240,"display_name":"somia molaei"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1609164045,"creation_date":1609102349,"answer_id":65470344,"question_id":61455134,"body_markdown":"    holder.player_name.addOnAttachStateChangeListener(new View.OnAttachStateChangeListener() {\r\n        @Override\r\n        public void onViewAttachedToWindow(View v) {\r\n\r\n        }\r\n\r\n        @Override\r\n        public void onViewDetachedFromWindow(View v) {\r\n            holder.player_name.getPlayer().stop();\r\n\r\n        }\r\n    });\r\n\r\n","title":"Exoplayer with Recyclerview","body":"<pre><code>holder.player_name.addOnAttachStateChangeListener(new View.OnAttachStateChangeListener() {\n    @Override\n    public void onViewAttachedToWindow(View v) {\n\n    }\n\n    @Override\n    public void onViewDetachedFromWindow(View v) {\n        holder.player_name.getPlayer().stop();\n\n    }\n});\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13755617,"reputation":184,"user_id":9926639,"display_name":"Ziyaad Shiraz"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1631976340,"creation_date":1631976340,"answer_id":69235670,"question_id":61455134,"body_markdown":"You can create a method inside the adapter, and using the adapter object you have access to in the homefragment, you can call the method. E.g have a method to stop playing the media in on destroy in the home fragment. Inside the method (which will be in adapter,) you can access the exoplayer instance and perform actions on it.","title":"Exoplayer with Recyclerview","body":"<p>You can create a method inside the adapter, and using the adapter object you have access to in the homefragment, you can call the method. E.g have a method to stop playing the media in on destroy in the home fragment. Inside the method (which will be in adapter,) you can access the exoplayer instance and perform actions on it.</p>\n"}],"owner":{"account_id":16055334,"reputation":133,"user_id":11587925,"display_name":"Mukesh Kumar"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":11184,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"answer_count":3,"score":8,"last_activity_date":1690299219,"creation_date":1587977849,"question_id":61455134,"body_markdown":"I have a video feed (similar to TikTok) but when I swipe up the new video plays but the old one keeps playing. I&#39;ve managed to get a page listener but I cannot control the ExoPlayer from the &quot;Home Fragment&quot;.\r\n\r\nAny idea on how to trigger something inside the RecyclerView Adapter from the Home Fragment?\r\n\r\nIf there&#39;s a better solution for doing this, please tell me.\r\n\r\n\r\n\r\n**Home Fragment**\r\n\r\n```\r\npublic class HomeFragment extends Fragment {\r\n\r\n    private View view;\r\n    RecyclerView recyclerView;\r\n    List&lt;Model&gt; models = new ArrayList&lt;&gt;();\r\n    MainRecylerAdapter adapter;\r\n\r\n\r\n    @Nullable\r\n    @Override\r\n    public View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {\r\n        view = inflater.inflate(R.layout.fragment_home, container, false);\r\n\r\n\r\n        recyclerView = view.findViewById(R.id.recyclerview);\r\n\r\n        models.add(new Model(1, &quot;https://www.newslistener.com/Mukesh/1.mp4&quot;, &quot;one&quot;));\r\n        models.add(new Model(2, &quot;https://www.newslistener.com/Mukesh/2.mp4&quot;, &quot;one&quot;));\r\n        models.add(new Model(3, &quot;https://www.newslistener.com/Mukesh/3.mp4&quot;, &quot;one&quot;));\r\n        models.add(new Model(4, &quot;https://www.newslistener.com/Mukesh/4.mp4&quot;, &quot;one&quot;));\r\n        models.add(new Model(5, &quot;https://www.newslistener.com/Mukesh/5.mp4&quot;, &quot;one&quot;));\r\n        models.add(new Model(6, &quot;https://www.newslistener.com/Mukesh/6.mp4&quot;, &quot;one&quot;));\r\n        models.add(new Model(7, &quot;https://www.newslistener.com/Mukesh/7.mp4&quot;, &quot;one&quot;));\r\n        models.add(new Model(8, &quot;https://www.newslistener.com/Mukesh/8.mp4&quot;, &quot;one&quot;));\r\n        models.add(new Model(9, &quot;https://www.newslistener.com/Mukesh/9.mp4&quot;, &quot;one&quot;));\r\n        models.add(new Model(10, &quot;https://www.newslistener.com/Mukesh/10.mp4&quot;, &quot;one&quot;));\r\n        models.add(new Model(11, &quot;https://www.newslistener.com/Mukesh/11.mp4&quot;, &quot;one&quot;));\r\n        models.add(new Model(12, &quot;https://www.newslistener.com/Mukesh/12.mp4&quot;, &quot;one&quot;));\r\n        models.add(new Model(13, &quot;https://www.newslistener.com/Mukesh/13.mp4&quot;, &quot;one&quot;));\r\n        models.add(new Model(14, &quot;https://www.newslistener.com/Mukesh/14.mp4&quot;, &quot;one&quot;));\r\n        models.add(new Model(15, &quot;https://www.newslistener.com/Mukesh/15.mp4&quot;, &quot;one&quot;));\r\n        models.add(new Model(16, &quot;https://www.newslistener.com/Mukesh/16.mp4&quot;, &quot;one&quot;));\r\n        models.add(new Model(17, &quot;https://www.newslistener.com/Mukesh/17.mp4&quot;, &quot;one&quot;));\r\n        models.add(new Model(18, &quot;https://www.newslistener.com/Mukesh/18.mp4&quot;, &quot;one&quot;));\r\n        models.add(new Model(19, &quot;https://www.newslistener.com/Mukesh/19.mp4&quot;, &quot;one&quot;));\r\n        models.add(new Model(20, &quot;https://www.newslistener.com/Mukesh/20.mp4&quot;, &quot;one&quot;));\r\n        models.add(new Model(21, &quot;https://www.newslistener.com/Mukesh/21.mp4&quot;, &quot;one&quot;));\r\n        models.add(new Model(22, &quot;https://www.newslistener.com/Mukesh/22.mp4&quot;, &quot;one&quot;));\r\n        models.add(new Model(23, &quot;https://www.newslistener.com/Mukesh/23.mp4&quot;, &quot;one&quot;));\r\n        models.add(new Model(24, &quot;https://www.newslistener.com/Mukesh/24.mp4&quot;, &quot;one&quot;));\r\n        models.add(new Model(25, &quot;https://www.newslistener.com/Mukesh/25.mp4&quot;, &quot;one&quot;));\r\n        models.add(new Model(26, &quot;https://www.newslistener.com/Mukesh/26.mp4&quot;, &quot;one&quot;));\r\n        models.add(new Model(27, &quot;https://www.newslistener.com/Mukesh/27.mp4&quot;, &quot;one&quot;));\r\n        models.add(new Model(28, &quot;https://www.newslistener.com/Mukesh/28.mp4&quot;, &quot;one&quot;));\r\n        models.add(new Model(29, &quot;https://www.newslistener.com/Mukesh/29.mp4&quot;, &quot;one&quot;));\r\n        models.add(new Model(30, &quot;https://www.newslistener.com/Mukesh/30.mp4&quot;, &quot;one&quot;));\r\n        models.add(new Model(31, &quot;https://www.newslistener.com/Mukesh/31.mp4&quot;, &quot;one&quot;));\r\n        models.add(new Model(32, &quot;https://www.newslistener.com/Mukesh/32.mp4&quot;, &quot;one&quot;));\r\n        models.add(new Model(33, &quot;https://www.newslistener.com/Mukesh/33.mp4&quot;, &quot;one&quot;));\r\n        models.add(new Model(34, &quot;https://www.newslistener.com/Mukesh/34.mp4&quot;, &quot;one&quot;));\r\n        models.add(new Model(35, &quot;https://www.newslistener.com/Mukesh/35.mp4&quot;, &quot;one&quot;));\r\n\r\n        SnapHelper snapHelper = new PagerSnapHelper();\r\n        snapHelper.attachToRecyclerView(recyclerView);\r\n        LinearLayoutManager layoutManager = new LinearLayoutManager(getContext());\r\n        recyclerView.setLayoutManager(layoutManager);\r\n        adapter = new MainRecylerAdapter(models, getActivity());\r\n        recyclerView.setAdapter(adapter);\r\n\r\n\r\n        return view;\r\n    }\r\n}\r\n```\r\n\r\n**Adapter**\r\n\r\n```\r\npublic class MainRecylerAdapter extends RecyclerView.Adapter&lt;MainRecylerAdapter.ViewHolder&gt; {\r\n    List&lt;Model&gt; models = new ArrayList&lt;&gt;();\r\n    Context context;\r\n    private int index = 0;\r\n\r\n    public MainRecylerAdapter(List&lt;Model&gt; models, Context context) {\r\n        this.models = models;\r\n        this.context = context;\r\n    }\r\n\r\n    @NonNull\r\n    @Override\r\n    public MainRecylerAdapter.ViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\r\n        View view = LayoutInflater.from(parent.getContext()).inflate(R.layout.main_recyler_layout, parent, false);\r\n        return new ViewHolder(view);\r\n    }\r\n\r\n    @Override\r\n    public void onBindViewHolder(@NonNull final MainRecylerAdapter.ViewHolder holder, final int position) {\r\n\r\n        if (holder.isPlaying()) {\r\n            Log.e(&quot;TAG1&quot;, &quot;play&quot;);\r\n            holder.releasePlayer();\r\n            holder.intiPlayer(models.get(position).getUrl());\r\n        } else {\r\n            Log.e(&quot;TAG1&quot;, &quot;empty&quot;);\r\n            holder.intiPlayer(models.get(position).getUrl());\r\n        }\r\n\r\n    }\r\n\r\n    @Override\r\n    public int getItemCount() {\r\n        return models.size();\r\n    }\r\n    \r\n\r\n    public class ViewHolder extends RecyclerView.ViewHolder {\r\n\r\n        SimpleExoPlayerView exoPlayerView;\r\n        SimpleExoPlayer exoPlayer;\r\n        private long playbackPosition;\r\n        private int currentWindow;\r\n        private boolean playWhenReady;\r\n        ProgressBar progressBar;\r\n\r\n        public ViewHolder(@NonNull View itemView) {\r\n            super(itemView);\r\n            exoPlayerView = itemView.findViewById(R.id.exoplayerview);\r\n            progressBar  = itemView.findViewById(R.id.progress);\r\n\r\n        }\r\n\r\n        private void intiPlayer(String url) {\r\n                try {\r\n                    BandwidthMeter bandwidthMeter = new DefaultBandwidthMeter();\r\n                    TrackSelector trackSelector = new DefaultTrackSelector(new AdaptiveTrackSelection.Factory(bandwidthMeter));\r\n                    exoPlayer = ExoPlayerFactory.newSimpleInstance(context, trackSelector);\r\n                    Uri videoURI = Uri.parse(url);\r\n                    DefaultHttpDataSourceFactory dataSourceFactory = new DefaultHttpDataSourceFactory(&quot;exoplayer_video&quot;);\r\n                    ExtractorsFactory extractorsFactory = new DefaultExtractorsFactory();\r\n                    MediaSource mediaSource = new ExtractorMediaSource(videoURI, dataSourceFactory, extractorsFactory, null, null);\r\n                    exoPlayerView.setPlayer(exoPlayer);\r\n                    exoPlayer.prepare(mediaSource);\r\n                    exoPlayer.setPlayWhenReady(true);\r\n                } catch (Exception e) {\r\n                    Log.e(&quot;MainAcvtivity&quot;, &quot; exoplayer error &quot; + e.toString());\r\n                }\r\n\r\n\r\n        }\r\n\r\n        private boolean isPlaying() {\r\n            return exoPlayer != null\r\n                    &amp;&amp; exoPlayer.getPlaybackState() != Player.STATE_ENDED\r\n                    &amp;&amp; exoPlayer.getPlaybackState() != Player.STATE_IDLE\r\n                    &amp;&amp; exoPlayer.getPlayWhenReady();\r\n        }\r\n\r\n        private void releasePlayer() {\r\n            if (exoPlayer != null) {\r\n                playbackPosition = exoPlayer.getCurrentPosition();\r\n                currentWindow = exoPlayer.getCurrentWindowIndex();\r\n                playWhenReady = exoPlayer.getPlayWhenReady();\r\n                exoPlayer.release();\r\n                exoPlayer = null;\r\n            }\r\n        }\r\n\r\n\r\n    }\r\n```\r\n\r\n","title":"Exoplayer with Recyclerview","body":"<p>I have a video feed (similar to TikTok) but when I swipe up the new video plays but the old one keeps playing. I've managed to get a page listener but I cannot control the ExoPlayer from the &quot;Home Fragment&quot;.</p>\n<p>Any idea on how to trigger something inside the RecyclerView Adapter from the Home Fragment?</p>\n<p>If there's a better solution for doing this, please tell me.</p>\n<p><strong>Home Fragment</strong></p>\n<pre><code>public class HomeFragment extends Fragment {\n\n    private View view;\n    RecyclerView recyclerView;\n    List&lt;Model&gt; models = new ArrayList&lt;&gt;();\n    MainRecylerAdapter adapter;\n\n\n    @Nullable\n    @Override\n    public View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {\n        view = inflater.inflate(R.layout.fragment_home, container, false);\n\n\n        recyclerView = view.findViewById(R.id.recyclerview);\n\n        models.add(new Model(1, &quot;https://www.newslistener.com/Mukesh/1.mp4&quot;, &quot;one&quot;));\n        models.add(new Model(2, &quot;https://www.newslistener.com/Mukesh/2.mp4&quot;, &quot;one&quot;));\n        models.add(new Model(3, &quot;https://www.newslistener.com/Mukesh/3.mp4&quot;, &quot;one&quot;));\n        models.add(new Model(4, &quot;https://www.newslistener.com/Mukesh/4.mp4&quot;, &quot;one&quot;));\n        models.add(new Model(5, &quot;https://www.newslistener.com/Mukesh/5.mp4&quot;, &quot;one&quot;));\n        models.add(new Model(6, &quot;https://www.newslistener.com/Mukesh/6.mp4&quot;, &quot;one&quot;));\n        models.add(new Model(7, &quot;https://www.newslistener.com/Mukesh/7.mp4&quot;, &quot;one&quot;));\n        models.add(new Model(8, &quot;https://www.newslistener.com/Mukesh/8.mp4&quot;, &quot;one&quot;));\n        models.add(new Model(9, &quot;https://www.newslistener.com/Mukesh/9.mp4&quot;, &quot;one&quot;));\n        models.add(new Model(10, &quot;https://www.newslistener.com/Mukesh/10.mp4&quot;, &quot;one&quot;));\n        models.add(new Model(11, &quot;https://www.newslistener.com/Mukesh/11.mp4&quot;, &quot;one&quot;));\n        models.add(new Model(12, &quot;https://www.newslistener.com/Mukesh/12.mp4&quot;, &quot;one&quot;));\n        models.add(new Model(13, &quot;https://www.newslistener.com/Mukesh/13.mp4&quot;, &quot;one&quot;));\n        models.add(new Model(14, &quot;https://www.newslistener.com/Mukesh/14.mp4&quot;, &quot;one&quot;));\n        models.add(new Model(15, &quot;https://www.newslistener.com/Mukesh/15.mp4&quot;, &quot;one&quot;));\n        models.add(new Model(16, &quot;https://www.newslistener.com/Mukesh/16.mp4&quot;, &quot;one&quot;));\n        models.add(new Model(17, &quot;https://www.newslistener.com/Mukesh/17.mp4&quot;, &quot;one&quot;));\n        models.add(new Model(18, &quot;https://www.newslistener.com/Mukesh/18.mp4&quot;, &quot;one&quot;));\n        models.add(new Model(19, &quot;https://www.newslistener.com/Mukesh/19.mp4&quot;, &quot;one&quot;));\n        models.add(new Model(20, &quot;https://www.newslistener.com/Mukesh/20.mp4&quot;, &quot;one&quot;));\n        models.add(new Model(21, &quot;https://www.newslistener.com/Mukesh/21.mp4&quot;, &quot;one&quot;));\n        models.add(new Model(22, &quot;https://www.newslistener.com/Mukesh/22.mp4&quot;, &quot;one&quot;));\n        models.add(new Model(23, &quot;https://www.newslistener.com/Mukesh/23.mp4&quot;, &quot;one&quot;));\n        models.add(new Model(24, &quot;https://www.newslistener.com/Mukesh/24.mp4&quot;, &quot;one&quot;));\n        models.add(new Model(25, &quot;https://www.newslistener.com/Mukesh/25.mp4&quot;, &quot;one&quot;));\n        models.add(new Model(26, &quot;https://www.newslistener.com/Mukesh/26.mp4&quot;, &quot;one&quot;));\n        models.add(new Model(27, &quot;https://www.newslistener.com/Mukesh/27.mp4&quot;, &quot;one&quot;));\n        models.add(new Model(28, &quot;https://www.newslistener.com/Mukesh/28.mp4&quot;, &quot;one&quot;));\n        models.add(new Model(29, &quot;https://www.newslistener.com/Mukesh/29.mp4&quot;, &quot;one&quot;));\n        models.add(new Model(30, &quot;https://www.newslistener.com/Mukesh/30.mp4&quot;, &quot;one&quot;));\n        models.add(new Model(31, &quot;https://www.newslistener.com/Mukesh/31.mp4&quot;, &quot;one&quot;));\n        models.add(new Model(32, &quot;https://www.newslistener.com/Mukesh/32.mp4&quot;, &quot;one&quot;));\n        models.add(new Model(33, &quot;https://www.newslistener.com/Mukesh/33.mp4&quot;, &quot;one&quot;));\n        models.add(new Model(34, &quot;https://www.newslistener.com/Mukesh/34.mp4&quot;, &quot;one&quot;));\n        models.add(new Model(35, &quot;https://www.newslistener.com/Mukesh/35.mp4&quot;, &quot;one&quot;));\n\n        SnapHelper snapHelper = new PagerSnapHelper();\n        snapHelper.attachToRecyclerView(recyclerView);\n        LinearLayoutManager layoutManager = new LinearLayoutManager(getContext());\n        recyclerView.setLayoutManager(layoutManager);\n        adapter = new MainRecylerAdapter(models, getActivity());\n        recyclerView.setAdapter(adapter);\n\n\n        return view;\n    }\n}\n</code></pre>\n<p><strong>Adapter</strong></p>\n<pre><code>public class MainRecylerAdapter extends RecyclerView.Adapter&lt;MainRecylerAdapter.ViewHolder&gt; {\n    List&lt;Model&gt; models = new ArrayList&lt;&gt;();\n    Context context;\n    private int index = 0;\n\n    public MainRecylerAdapter(List&lt;Model&gt; models, Context context) {\n        this.models = models;\n        this.context = context;\n    }\n\n    @NonNull\n    @Override\n    public MainRecylerAdapter.ViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\n        View view = LayoutInflater.from(parent.getContext()).inflate(R.layout.main_recyler_layout, parent, false);\n        return new ViewHolder(view);\n    }\n\n    @Override\n    public void onBindViewHolder(@NonNull final MainRecylerAdapter.ViewHolder holder, final int position) {\n\n        if (holder.isPlaying()) {\n            Log.e(&quot;TAG1&quot;, &quot;play&quot;);\n            holder.releasePlayer();\n            holder.intiPlayer(models.get(position).getUrl());\n        } else {\n            Log.e(&quot;TAG1&quot;, &quot;empty&quot;);\n            holder.intiPlayer(models.get(position).getUrl());\n        }\n\n    }\n\n    @Override\n    public int getItemCount() {\n        return models.size();\n    }\n    \n\n    public class ViewHolder extends RecyclerView.ViewHolder {\n\n        SimpleExoPlayerView exoPlayerView;\n        SimpleExoPlayer exoPlayer;\n        private long playbackPosition;\n        private int currentWindow;\n        private boolean playWhenReady;\n        ProgressBar progressBar;\n\n        public ViewHolder(@NonNull View itemView) {\n            super(itemView);\n            exoPlayerView = itemView.findViewById(R.id.exoplayerview);\n            progressBar  = itemView.findViewById(R.id.progress);\n\n        }\n\n        private void intiPlayer(String url) {\n                try {\n                    BandwidthMeter bandwidthMeter = new DefaultBandwidthMeter();\n                    TrackSelector trackSelector = new DefaultTrackSelector(new AdaptiveTrackSelection.Factory(bandwidthMeter));\n                    exoPlayer = ExoPlayerFactory.newSimpleInstance(context, trackSelector);\n                    Uri videoURI = Uri.parse(url);\n                    DefaultHttpDataSourceFactory dataSourceFactory = new DefaultHttpDataSourceFactory(&quot;exoplayer_video&quot;);\n                    ExtractorsFactory extractorsFactory = new DefaultExtractorsFactory();\n                    MediaSource mediaSource = new ExtractorMediaSource(videoURI, dataSourceFactory, extractorsFactory, null, null);\n                    exoPlayerView.setPlayer(exoPlayer);\n                    exoPlayer.prepare(mediaSource);\n                    exoPlayer.setPlayWhenReady(true);\n                } catch (Exception e) {\n                    Log.e(&quot;MainAcvtivity&quot;, &quot; exoplayer error &quot; + e.toString());\n                }\n\n\n        }\n\n        private boolean isPlaying() {\n            return exoPlayer != null\n                    &amp;&amp; exoPlayer.getPlaybackState() != Player.STATE_ENDED\n                    &amp;&amp; exoPlayer.getPlaybackState() != Player.STATE_IDLE\n                    &amp;&amp; exoPlayer.getPlayWhenReady();\n        }\n\n        private void releasePlayer() {\n            if (exoPlayer != null) {\n                playbackPosition = exoPlayer.getCurrentPosition();\n                currentWindow = exoPlayer.getCurrentWindowIndex();\n                playWhenReady = exoPlayer.getPlayWhenReady();\n                exoPlayer.release();\n                exoPlayer = null;\n            }\n        }\n\n\n    }\n</code></pre>\n"},{"tags":["java","intellij-idea","minecraft","minecraft-forge"],"comments":[{"owner":{"account_id":15178500,"reputation":4190,"user_id":10952503,"display_name":"Elikill58"},"score":0,"creation_date":1690210646,"post_id":76755440,"comment_id":135318057,"body_markdown":"Can you show the full console log? Show your code and give more details?","body":"Can you show the full console log? Show your code and give more details?"},{"owner":{"account_id":28044768,"reputation":13,"user_id":21421739,"display_name":"NoobGangNB1234"},"score":0,"creation_date":1690212344,"post_id":76755440,"comment_id":135318464,"body_markdown":"Like what? @Elikill58?. the console log was only:\n\n    Process &#39;command &#39;C:\\Users\\NB.jdks\\semeru-1.8.0_382\\bin\\java.exe&#39;&#39; finished with non-zero exit value -1\n\n    Try: Run with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output. Run with --scan to get full insights.","body":"Like what? @Elikill58?. the console log was only:      Process &#39;command &#39;C:\\Users\\NB.jdks\\semeru-1.8.0_382\\bin\\java.exe&#39;&#39; finished with non-zero exit value -1      Try: Run with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output. Run with --scan to get full insights."},{"owner":{"account_id":15178500,"reputation":4190,"user_id":10952503,"display_name":"Elikill58"},"score":0,"creation_date":1690234553,"post_id":76755440,"comment_id":135322266,"body_markdown":"Check the log file of your client, you should have more detail somewhere","body":"Check the log file of your client, you should have more detail somewhere"}],"owner":{"account_id":28044768,"reputation":13,"user_id":21421739,"display_name":"NoobGangNB1234"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":62,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690298129,"creation_date":1690208872,"question_id":76755440,"body_markdown":"I Was writing a mod for minecraft 1.12.2, the build was successful(im using intellij idea community edition 2021.3). i used the command that runs minecraft or runClient and IT gave me a ERROR:\r\nExecution failed for task &#39;:runClient&#39;.\r\n&gt; Process &#39;command &#39;C:\\Users\\NB\\.jdks\\semeru-1.8.0_382\\bin\\java.exe&#39;&#39; finished with non-zero exit value -1\r\n\r\n* Try:\r\nRun with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output. Run with --scan to get full insights.\r\n ","title":"&#39;:runClient&#39;. &gt; Process &#39;command &#39;C:\\Users\\NB\\.jdks\\semeru-1.8.0_382\\bin\\java.exe&#39;&#39; finished with non-zero exit value","body":"<p>I Was writing a mod for minecraft 1.12.2, the build was successful(im using intellij idea community edition 2021.3). i used the command that runs minecraft or runClient and IT gave me a ERROR:\nExecution failed for task ':runClient'.</p>\n<blockquote>\n<p>Process 'command 'C:\\Users\\NB.jdks\\semeru-1.8.0_382\\bin\\java.exe'' finished with non-zero exit value -1</p>\n</blockquote>\n<ul>\n<li>Try:\nRun with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output. Run with --scan to get full insights.</li>\n</ul>\n"},{"tags":["java","flutter","selenium","appium","bdd"],"answers":[{"comments":[{"owner":{"account_id":4778281,"reputation":47,"user_id":3860807,"display_name":"Vaibhav Khachane"},"score":0,"creation_date":1641974279,"post_id":70677890,"comment_id":124945411,"body_markdown":"Thanks for the quick response. As per my understanding, Currently we can&#39;t automate flutter apps using appium locators ? And there is only one option to automate flutter app is DART","body":"Thanks for the quick response. As per my understanding, Currently we can&#39;t automate flutter apps using appium locators ? And there is only one option to automate flutter app is DART"},{"owner":{"account_id":5061796,"reputation":78,"user_id":4954866,"display_name":"aki"},"score":0,"creation_date":1642052982,"post_id":70677890,"comment_id":124970859,"body_markdown":"When I tried it, yes. There was no way to locate elements. But according to that article, you can use semanticLabels. Why not give that a try?","body":"When I tried it, yes. There was no way to locate elements. But according to that article, you can use semanticLabels. Why not give that a try?"},{"owner":{"account_id":5061796,"reputation":78,"user_id":4954866,"display_name":"aki"},"score":0,"creation_date":1642053009,"post_id":70677890,"comment_id":124970873,"body_markdown":"Other than that, the integration test package is the recommended way and it is pretty easy to use.","body":"Other than that, the integration test package is the recommended way and it is pretty easy to use."}],"tags":[],"owner":{"account_id":5061796,"reputation":78,"user_id":4954866,"display_name":"aki"},"comment_count":3,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1641973357,"creation_date":1641973357,"answer_id":70677890,"question_id":70677172,"body_markdown":" 1. You can use gherkin packages available on pub.dev to automate using BDD Cucumber. \r\nThe tests will be written in dart. \r\n\r\n 2. As far as my finding, appium requires `accessibility-id` to interact with elements. In flutter you cannot set `accessibility-id` for widgets. I gave up after a few days of research. The [issue](https://github.com/flutter/flutter/issues/17988) is still open. \r\n\r\nEdit: Found [this](https://github.com/appium/appium/issues/12919) as well that says semanticLabel can be used for resource-id. \r\n\r\n 4. Flutter has its own integration test package that you can use to automate your tests. It&#39;s very easy to implement. \r\nRead more here: https://docs.flutter.dev/cookbook/testing/integration/introduction\r\n\r\n","title":"How to automate flutter mobile app using appium?","body":"<ol>\n<li><p>You can use gherkin packages available on pub.dev to automate using BDD Cucumber.\nThe tests will be written in dart.</p>\n</li>\n<li><p>As far as my finding, appium requires <code>accessibility-id</code> to interact with elements. In flutter you cannot set <code>accessibility-id</code> for widgets. I gave up after a few days of research. The <a href=\"https://github.com/flutter/flutter/issues/17988\" rel=\"nofollow noreferrer\">issue</a> is still open.</p>\n</li>\n</ol>\n<p>Edit: Found <a href=\"https://github.com/appium/appium/issues/12919\" rel=\"nofollow noreferrer\">this</a> as well that says semanticLabel can be used for resource-id.</p>\n<ol start=\"4\">\n<li>Flutter has its own integration test package that you can use to automate your tests. It's very easy to implement.\nRead more here: <a href=\"https://docs.flutter.dev/cookbook/testing/integration/introduction\" rel=\"nofollow noreferrer\">https://docs.flutter.dev/cookbook/testing/integration/introduction</a></li>\n</ol>\n"},{"tags":[],"owner":{"account_id":29088800,"reputation":1,"user_id":22283152,"display_name":"Nirmoh Patel"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690297289,"creation_date":1690297289,"answer_id":76764014,"question_id":70677172,"body_markdown":"1. Is it possible to automate flutter applications with the BDD Cucumber Java framework?\r\n\r\nyes you can create the project Java + maven + cucumber + Junit or TestNg\r\n\r\n2. Is it possible to inspect all mobile elements of the flutter app using the appium inspector? Do any other way to inspect flutter app elements ?\r\n\r\nThere are some limitations to find the elements by using the appium inspector.","title":"How to automate flutter mobile app using appium?","body":"<ol>\n<li>Is it possible to automate flutter applications with the BDD Cucumber Java framework?</li>\n</ol>\n<p>yes you can create the project Java + maven + cucumber + Junit or TestNg</p>\n<ol start=\"2\">\n<li>Is it possible to inspect all mobile elements of the flutter app using the appium inspector? Do any other way to inspect flutter app elements ?</li>\n</ol>\n<p>There are some limitations to find the elements by using the appium inspector.</p>\n"}],"owner":{"account_id":4778281,"reputation":47,"user_id":3860807,"display_name":"Vaibhav Khachane"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2673,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1690297289,"creation_date":1641968608,"question_id":70677172,"body_markdown":"Currently, I am working on automating flutter mobile apps. I have successfully designed a BDD cucumber Java framework with a login script that is working well. Then I tried automating other functionalities, but I couldn’t get the mobile elements locator values into Appium Inspector. Our Team I need your input on the following points.\r\n\r\n1) Is it possible to automate flutter applications with the BDD Cucumber Java framework?\r\n2) Is it possible to inspect all mobile elements of the flutter app using the appium inspector? Do any other way to inspect flutter app elements ?\r\n3) Do we have any other options for automating Flutter apps?","title":"How to automate flutter mobile app using appium?","body":"<p>Currently, I am working on automating flutter mobile apps. I have successfully designed a BDD cucumber Java framework with a login script that is working well. Then I tried automating other functionalities, but I couldn’t get the mobile elements locator values into Appium Inspector. Our Team I need your input on the following points.</p>\n<ol>\n<li>Is it possible to automate flutter applications with the BDD Cucumber Java framework?</li>\n<li>Is it possible to inspect all mobile elements of the flutter app using the appium inspector? Do any other way to inspect flutter app elements ?</li>\n<li>Do we have any other options for automating Flutter apps?</li>\n</ol>\n"},{"tags":["java","spring","spring-boot","postman"],"comments":[{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1690297184,"post_id":76763835,"comment_id":135332007,"body_markdown":"The JSON in your question is valid and could be parsed in your backend. So what&#39;s the question?","body":"The JSON in your question is valid and could be parsed in your backend. So what&#39;s the question?"},{"owner":{"account_id":4335872,"reputation":77,"user_id":3540367,"display_name":"Vinit More"},"score":0,"creation_date":1690299102,"post_id":76763835,"comment_id":135332439,"body_markdown":"[Check this post if it helps to you.](https://stackoverflow.com/questions/31337914/how-to-post-object-and-list-using-postman#:~:text=Postman%3A%20Set%20the%20Body%20type%20to%20raw%20and%20add%20header%20Content%2DType%3A%20application/json)","body":"<a href=\"https://stackoverflow.com/questions/31337914/how-to-post-object-and-list-using-postman#:~:text=Postman%3A%20Set%20the%20Body%20type%20to%20raw%20and%20add%20header%20Content%2DType%3A%20application/json\">Check this post if it helps to you.</a>"}],"answers":[{"comments":[{"owner":{"account_id":14440817,"reputation":419,"user_id":10431512,"display_name":"kidulf"},"score":0,"creation_date":1690300709,"post_id":76763981,"comment_id":135332834,"body_markdown":"what if I have other properties in the Pojo class? would I still be able to use only the id&#39;s?","body":"what if I have other properties in the Pojo class? would I still be able to use only the id&#39;s?"},{"owner":{"account_id":4678173,"reputation":2456,"user_id":3787750,"accept_rate":48,"display_name":"Ekansh Rastogi"},"score":0,"creation_date":1691451880,"post_id":76763981,"comment_id":135490792,"body_markdown":"Yes u can use @JsonIgnore to ignore other properties, all other properties in pogo will be null","body":"Yes u can use @JsonIgnore to ignore other properties, all other properties in pogo will be null"}],"tags":[],"owner":{"account_id":4678173,"reputation":2456,"user_id":3787750,"accept_rate":48,"display_name":"Ekansh Rastogi"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690297121,"creation_date":1690297121,"answer_id":76763981,"question_id":76763835,"body_markdown":"Just create a POJO mapping class\r\n\r\n```\r\nclass Pojo {\r\n private List&lt;AnotherPojo&gt; productIds;\r\n}\r\n\r\nclass AnotherPojo {\r\n private long productId;\r\n} \r\n\r\nand add in controller as below\r\n\r\n@GetMapping(&quot;uri&quot;)\r\npublic Object get(@RequestBody Pojo pojo){\r\n   // log pojo\r\n}\r\n\r\n { &quot;productIds&quot;: [{ &quot;productId&quot;:1 }, {&quot;productId&quot;:2 }, { &quot;productId&quot;:3 }] }\r\n```\r\n\r\nWhen calling from post man, add header Content-type: application-json","title":"how to send a list of id&#39;s in postman","body":"<p>Just create a POJO mapping class</p>\n<pre><code>class Pojo {\n private List&lt;AnotherPojo&gt; productIds;\n}\n\nclass AnotherPojo {\n private long productId;\n} \n\nand add in controller as below\n\n@GetMapping(&quot;uri&quot;)\npublic Object get(@RequestBody Pojo pojo){\n   // log pojo\n}\n\n { &quot;productIds&quot;: [{ &quot;productId&quot;:1 }, {&quot;productId&quot;:2 }, { &quot;productId&quot;:3 }] }\n</code></pre>\n<p>When calling from post man, add header Content-type: application-json</p>\n"}],"owner":{"account_id":14440817,"reputation":419,"user_id":10431512,"display_name":"kidulf"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":80,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1690297121,"creation_date":1690296012,"question_id":76763835,"body_markdown":"I have a spring boot project where I need to expose a few APIs.\r\nI have 2 entities and what I would like to do is to be able to send list of id&#39;s of one of the entities in postman.\r\nAny idea how can I do it?\r\nthis is how my json looks as of now: `&quot;productIds&quot;: [{ &quot;productId&quot;:1 },\r\n{&quot;productId&quot;:2 }, { &quot;productId&quot;:3 }]\r\n      `\r\nbasically Product is an entity and I don&#39;t want to send in the request the entire object, only it&#39;s id","title":"how to send a list of id&#39;s in postman","body":"<p>I have a spring boot project where I need to expose a few APIs.\nI have 2 entities and what I would like to do is to be able to send list of id's of one of the entities in postman.\nAny idea how can I do it?\nthis is how my json looks as of now: <code>&quot;productIds&quot;: [{ &quot;productId&quot;:1 }, {&quot;productId&quot;:2 }, { &quot;productId&quot;:3 }] </code>\nbasically Product is an entity and I don't want to send in the request the entire object, only it's id</p>\n"},{"tags":["java","java.util.concurrent","spring-scheduled"],"comments":[{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1690292250,"post_id":76763214,"comment_id":135330787,"body_markdown":"I would suggest to use a proper caching solution (like Caffeine) and let that do the caching and reloading instead of a scheduled method. That should take care of all those things instead of reinventing the wheel.","body":"I would suggest to use a proper caching solution (like Caffeine) and let that do the caching and reloading instead of a scheduled method. That should take care of all those things instead of reinventing the wheel."}],"answers":[{"comments":[{"owner":{"account_id":17138604,"reputation":51,"user_id":12403120,"display_name":"eweiss"},"score":0,"creation_date":1690364841,"post_id":76763642,"comment_id":135342041,"body_markdown":"if I want thread B to know in maximum minutes that variable change will be volatile will help?","body":"if I want thread B to know in maximum minutes that variable change will be volatile will help?"},{"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1690366241,"post_id":76763642,"comment_id":135342361,"body_markdown":"I think so. I doubt there will be a significant performance improvement; `volatile` is pricey.","body":"I think so. I doubt there will be a significant performance improvement; <code>volatile</code> is pricey."}],"tags":[],"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690294574,"creation_date":1690294574,"answer_id":76763642,"question_id":76763214,"body_markdown":"Yes, reference assignments are atomic and even guarantee consistent application, i.e. if you have this code:\r\n\r\n```\r\n// thread A:\r\n\r\nsomeField = &quot;Hello&quot;;\r\n// do stuff\r\nsomeField = &quot;World&quot;;\r\n\r\n\r\n// thread B:\r\nprint(someField);\r\n// do stuff\r\nprint(someField);\r\n```\r\n\r\nThen it can print one of 3 things:\r\n\r\n* Hello / Hello\r\n* Hello / World\r\n* World / World\r\n\r\nIt is not possible for this code to asplode because of a half-written pointer, nor for this code to first see World and then later see Hello.\r\n\r\n__HOWEVER__.\r\n\r\nThe problem is, this code is still highly suspect. Because it is quite likely it will print Hello/Hello even if (relative to computer terms, and in theory, even human terms, i.e. minutes or even days) have passed since the code that set it to `&quot;World&quot;` has ran! The JVM gives itself the right (see the Java Memory Model section of the JVM Specification) to create local caches for every field, so, thread B has a &#39;cache&#39; that reads &#39;Hello&#39;, and when thread A updates that field to &#39;World&#39;, that just updates thread A&#39;s local cache of that field. A says that field has value &#39;World&#39;, B says it has value &#39;Hello&#39;, and that state of affairs can last very very long indeed, the JVM makes no guarantees about arbitrary synchronization of such conflicts.\r\n\r\nWhat you need are so-called Happens-Before relationships in order to get around the fact that the JMM has all sorts of &#39;I may.. or may not&#39; text in it (which doesn&#39;t simply mean this code is unreliable - it means it is __untestable__. On a really simple machine that doesn&#39;t have local CPU cache pages, it&#39;ll work just fine. On another it fails all the time - you can&#39;t figure that out when working on the box where it works fine!)\r\n\r\nYou establish this in many ways - there is an explicit list in the JMM section. The obvious ones are the same things that establish atomicity - `synchronized`, `volatile`, and many java core libs (mostly, some of stuff in the `java.util.concurrent` package. Not all the stuff - things like `AtomicInteger` don&#39;t, and that&#39;s why AtomicInteger is generally much faster than trying to handroll such things with `synchronized`, as `synchronized` does a lot more than just provide atomicity - it establishes guarantees).\r\n\r\nThe idea behind HB is simple: Any 2 statements have an HB relationship, or not. If they do, then it is not possible for the line that &#39;happens after&#39; to observe any state as it was before the HB line ran. You shouldn&#39;t think about it in terms of &#39;the HB line runs first&#39; (after all, if the HA line doesn&#39;t read any state that the HB line is changing, the JVM is not obligated to &#39;run the HB line first&#39;).\r\n\r\nYou will need to establish HB here: You want `listFromDynamo = result;` to be HB relative to whatever line has any interest in receiving this update in some sort of timely fashion. Otherwise the JVM is free to take _days_ to propagate this write.\r\n\r\nOne really simple way to do it is to slap a `synchronized` on `getListFromDynamo` and `updateListFromDynamo` (or at least wrap `listFromDynamo = result` in a synchronized block). It&#39;s generally a really bad idea to lock on public stuff, so use lombok&#39;s `@Synchronized` or handwrite it:\r\n\r\n```\r\nprivate final Object dynamoLock = new Object[0];\r\n\r\npublic List&lt;ClassFromDynamo&gt; getListFromDynamo() {\r\n  synchronized (dynamoLock) {\r\n    return listFromDynamo;\r\n  }\r\n}\r\n\r\npublic void updateListFromDynamo(){\r\n  List&lt;ClassFromDyanmo&gt; result = new ArrayList&lt;&gt;();\r\n  table.scan().forEach(page -&gt; result.addAll(page.items()));\r\n  synchronized (dynamoLock) {\r\n    listFromDyanmo = result;\r\n  }\r\n}\r\n```\r\n\r\nThis establishes that the `}` of the `synchronized` block in the update method is HB relative to the `synchronized (listFromDynamo) {` in the `get` method, and therefore ensures that the get method cannot observe state as it was _before_ - i.e. cannot observe the &#39;old&#39; reference.\r\n\r\nIf that feels too &#39;inefficient&#39; - perhaps look into that first, synchronized probably isn&#39;t nearly as bad as you think it is, especially in light of the fact that entire table scans are being performed here. That&#39;s like complaining that peeing in the ocean in Amsterdam raises the waterlevel in Manhattan. Yeah probably but not in a way you could even measure. If you have profiler reports that conclusively tell you there is indeed a performance issue there, then and only then start looking into alternatives, which do exist (`AtomicReference` might be very slightly faster, I&#39;d try that first).\r\n","title":"Should I use lock for reference assignment in class","body":"<p>Yes, reference assignments are atomic and even guarantee consistent application, i.e. if you have this code:</p>\n<pre><code>// thread A:\n\nsomeField = &quot;Hello&quot;;\n// do stuff\nsomeField = &quot;World&quot;;\n\n\n// thread B:\nprint(someField);\n// do stuff\nprint(someField);\n</code></pre>\n<p>Then it can print one of 3 things:</p>\n<ul>\n<li>Hello / Hello</li>\n<li>Hello / World</li>\n<li>World / World</li>\n</ul>\n<p>It is not possible for this code to asplode because of a half-written pointer, nor for this code to first see World and then later see Hello.</p>\n<p><strong>HOWEVER</strong>.</p>\n<p>The problem is, this code is still highly suspect. Because it is quite likely it will print Hello/Hello even if (relative to computer terms, and in theory, even human terms, i.e. minutes or even days) have passed since the code that set it to <code>&quot;World&quot;</code> has ran! The JVM gives itself the right (see the Java Memory Model section of the JVM Specification) to create local caches for every field, so, thread B has a 'cache' that reads 'Hello', and when thread A updates that field to 'World', that just updates thread A's local cache of that field. A says that field has value 'World', B says it has value 'Hello', and that state of affairs can last very very long indeed, the JVM makes no guarantees about arbitrary synchronization of such conflicts.</p>\n<p>What you need are so-called Happens-Before relationships in order to get around the fact that the JMM has all sorts of 'I may.. or may not' text in it (which doesn't simply mean this code is unreliable - it means it is <strong>untestable</strong>. On a really simple machine that doesn't have local CPU cache pages, it'll work just fine. On another it fails all the time - you can't figure that out when working on the box where it works fine!)</p>\n<p>You establish this in many ways - there is an explicit list in the JMM section. The obvious ones are the same things that establish atomicity - <code>synchronized</code>, <code>volatile</code>, and many java core libs (mostly, some of stuff in the <code>java.util.concurrent</code> package. Not all the stuff - things like <code>AtomicInteger</code> don't, and that's why AtomicInteger is generally much faster than trying to handroll such things with <code>synchronized</code>, as <code>synchronized</code> does a lot more than just provide atomicity - it establishes guarantees).</p>\n<p>The idea behind HB is simple: Any 2 statements have an HB relationship, or not. If they do, then it is not possible for the line that 'happens after' to observe any state as it was before the HB line ran. You shouldn't think about it in terms of 'the HB line runs first' (after all, if the HA line doesn't read any state that the HB line is changing, the JVM is not obligated to 'run the HB line first').</p>\n<p>You will need to establish HB here: You want <code>listFromDynamo = result;</code> to be HB relative to whatever line has any interest in receiving this update in some sort of timely fashion. Otherwise the JVM is free to take <em>days</em> to propagate this write.</p>\n<p>One really simple way to do it is to slap a <code>synchronized</code> on <code>getListFromDynamo</code> and <code>updateListFromDynamo</code> (or at least wrap <code>listFromDynamo = result</code> in a synchronized block). It's generally a really bad idea to lock on public stuff, so use lombok's <code>@Synchronized</code> or handwrite it:</p>\n<pre><code>private final Object dynamoLock = new Object[0];\n\npublic List&lt;ClassFromDynamo&gt; getListFromDynamo() {\n  synchronized (dynamoLock) {\n    return listFromDynamo;\n  }\n}\n\npublic void updateListFromDynamo(){\n  List&lt;ClassFromDyanmo&gt; result = new ArrayList&lt;&gt;();\n  table.scan().forEach(page -&gt; result.addAll(page.items()));\n  synchronized (dynamoLock) {\n    listFromDyanmo = result;\n  }\n}\n</code></pre>\n<p>This establishes that the <code>}</code> of the <code>synchronized</code> block in the update method is HB relative to the <code>synchronized (listFromDynamo) {</code> in the <code>get</code> method, and therefore ensures that the get method cannot observe state as it was <em>before</em> - i.e. cannot observe the 'old' reference.</p>\n<p>If that feels too 'inefficient' - perhaps look into that first, synchronized probably isn't nearly as bad as you think it is, especially in light of the fact that entire table scans are being performed here. That's like complaining that peeing in the ocean in Amsterdam raises the waterlevel in Manhattan. Yeah probably but not in a way you could even measure. If you have profiler reports that conclusively tell you there is indeed a performance issue there, then and only then start looking into alternatives, which do exist (<code>AtomicReference</code> might be very slightly faster, I'd try that first).</p>\n"}],"owner":{"account_id":17138604,"reputation":51,"user_id":12403120,"display_name":"eweiss"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1690296993,"creation_date":1690291671,"question_id":76763214,"body_markdown":"I have a Spring component class with field of type list with fill from AWS DynamoDB. The use of this component class is in a controller for reading the list. I also have a schedule service that run in a cron and every 10 minute call the update list method.\r\n\r\nThe situation is that I will have multiple read threads and only one write thread, but I am not sure if I should use the Java concurrency lock. Also is the reference assignment atomic?\r\n\r\n```\r\n@Component\r\npublic class ExampleA  {\r\n    DynamoDbEnhancedClient enhancedClient = DynamoDbEnhancedClient.builder()\r\n            .dynamoDbClient(\r\n                    // Configure an instance of the standard client.\r\n                    DynamoDbClient.builder()\r\n                            .region(Region.X)\r\n                            .build())\r\n            .build();\r\n\r\n    DynamoDbTable&lt;ClassFromDyanmo&gt; table = enhancedClient.table(&quot;dynamo_table&quot;, TableSchema.fromBean(ClassFromDyanmo.class));\r\n    private List&lt;ClassFromDyanmo&gt; listFromDynamo;\r\n    \r\n    public List&lt;ClassFromDyanmo&gt; getListFromDynamo() {\r\n    return listFromDyanmo\r\n}\r\n\r\npublic void updateListFromDynamo(){\r\n    List&lt;ClassFromDyanmo&gt; result = new ArrayList&lt;&gt;();\r\n    table.scan().forEach(page -&gt; result.addAll(page.items()));\r\n    listFromDyanmo = result;\r\n}\r\n```\r\n\r\nthe SchduleService:\r\n\r\n```\r\n@Service\r\npublic class UpdateRulesScheduler {\r\n\r\n    @Autowired\r\n    private ExampleA exampleA;\r\n\r\n    @Scheduled(cron = &quot;0 */10 * ? * *&quot;)\r\n    public void scheduleEvery10Minutes() {\r\n        exampleA.updateListFromDynamo();\r\n    }\r\n```\r\n","title":"Should I use lock for reference assignment in class","body":"<p>I have a Spring component class with field of type list with fill from AWS DynamoDB. The use of this component class is in a controller for reading the list. I also have a schedule service that run in a cron and every 10 minute call the update list method.</p>\n<p>The situation is that I will have multiple read threads and only one write thread, but I am not sure if I should use the Java concurrency lock. Also is the reference assignment atomic?</p>\n<pre><code>@Component\npublic class ExampleA  {\n    DynamoDbEnhancedClient enhancedClient = DynamoDbEnhancedClient.builder()\n            .dynamoDbClient(\n                    // Configure an instance of the standard client.\n                    DynamoDbClient.builder()\n                            .region(Region.X)\n                            .build())\n            .build();\n\n    DynamoDbTable&lt;ClassFromDyanmo&gt; table = enhancedClient.table(&quot;dynamo_table&quot;, TableSchema.fromBean(ClassFromDyanmo.class));\n    private List&lt;ClassFromDyanmo&gt; listFromDynamo;\n    \n    public List&lt;ClassFromDyanmo&gt; getListFromDynamo() {\n    return listFromDyanmo\n}\n\npublic void updateListFromDynamo(){\n    List&lt;ClassFromDyanmo&gt; result = new ArrayList&lt;&gt;();\n    table.scan().forEach(page -&gt; result.addAll(page.items()));\n    listFromDyanmo = result;\n}\n</code></pre>\n<p>the SchduleService:</p>\n<pre><code>@Service\npublic class UpdateRulesScheduler {\n\n    @Autowired\n    private ExampleA exampleA;\n\n    @Scheduled(cron = &quot;0 */10 * ? * *&quot;)\n    public void scheduleEvery10Minutes() {\n        exampleA.updateListFromDynamo();\n    }\n</code></pre>\n"},{"tags":["java","spring-boot","spring-data-jpa"],"comments":[{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":3,"creation_date":1690271011,"post_id":76760418,"comment_id":135326061,"body_markdown":"While there are *some* databases that allow you to execute Java functions (like H2), most won&#39;t. So you either have to rewrite the Java logic as SQL, or update the rows one by one.","body":"While there are <i>some</i> databases that allow you to execute Java functions (like H2), most won&#39;t. So you either have to rewrite the Java logic as SQL, or update the rows one by one."},{"owner":{"account_id":19535095,"reputation":2874,"user_id":14294053,"display_name":"Mar-Z"},"score":0,"creation_date":1690272282,"post_id":76760418,"comment_id":135326334,"body_markdown":"Oracle allows Java code store procedures too.","body":"Oracle allows Java code store procedures too."},{"owner":{"account_id":19535095,"reputation":2874,"user_id":14294053,"display_name":"Mar-Z"},"score":0,"creation_date":1690272408,"post_id":76760418,"comment_id":135326359,"body_markdown":"As well Microsoft SQL Server.","body":"As well Microsoft SQL Server."},{"owner":{"account_id":19535095,"reputation":2874,"user_id":14294053,"display_name":"Mar-Z"},"score":0,"creation_date":1690272676,"post_id":76760418,"comment_id":135326418,"body_markdown":"PostgreSQL using PL/Java extension.","body":"PostgreSQL using PL/Java extension."},{"owner":{"account_id":5511406,"reputation":1245,"user_id":4377568,"display_name":"Docteur"},"score":0,"creation_date":1690272721,"post_id":76760418,"comment_id":135326427,"body_markdown":"Thanks for the information on this. Is there any way to do this row by row without knowing the underlying data structure? (Like extracting the row to a Map or something similar)","body":"Thanks for the information on this. Is there any way to do this row by row without knowing the underlying data structure? (Like extracting the row to a Map or something similar)"},{"owner":{"account_id":2673407,"reputation":44640,"user_id":2310289,"display_name":"Scary Wombat"},"score":0,"creation_date":1690333225,"post_id":76760418,"comment_id":135337753,"body_markdown":"I think it would be best to use a DB trigger.","body":"I think it would be best to use a DB trigger."}],"answers":[{"comments":[{"owner":{"account_id":5511406,"reputation":1245,"user_id":4377568,"display_name":"Docteur"},"score":0,"creation_date":1690293392,"post_id":76763419,"comment_id":135331091,"body_markdown":"Where does the value for name come from in your method?","body":"Where does the value for name come from in your method?"},{"owner":{"account_id":18178272,"reputation":55,"user_id":13226583,"display_name":"Rishabh Kabra"},"score":0,"creation_date":1690296897,"post_id":76763419,"comment_id":135331946,"body_markdown":"I have edited to generic or you can use Object instead of generic","body":"I have edited to generic or you can use Object instead of generic"},{"owner":{"account_id":5511406,"reputation":1245,"user_id":4377568,"display_name":"Docteur"},"score":0,"creation_date":1690359998,"post_id":76763419,"comment_id":135340963,"body_markdown":"But the value of name comes from the query itself... I don&#39;t think this answer works","body":"But the value of name comes from the query itself... I don&#39;t think this answer works"}],"tags":[],"owner":{"account_id":18178272,"reputation":55,"user_id":13226583,"display_name":"Rishabh Kabra"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690296858,"creation_date":1690293027,"answer_id":76763419,"question_id":76760418,"body_markdown":"This is not possible via @Query but can be  done via EntityManager.\r\n\r\n    class Test {\r\n    \t@PersistenceContext\r\n    \tprivate EntityManager em;\r\n    \r\n    \tpublic &lt;T&gt; void update(String UpdatedName, T name) {\r\n    \t\tvar data =  myJavaMethod(name);\r\n    \t\tem.createNativeQuery(&quot;UPDATE table SET&quot; + UpdatedName + &quot;= &#39;&quot; + data.toString() + &quot;&#39;&quot;);\r\n    \t}\r\n    }\r\n\r\nI haven&#39;t tried this code but probably this would work if I have understood your requirement correctly.\r\n","title":"How to update a column based on another column&#39;s value with a native query?","body":"<p>This is not possible via @Query but can be  done via EntityManager.</p>\n<pre><code>class Test {\n    @PersistenceContext\n    private EntityManager em;\n\n    public &lt;T&gt; void update(String UpdatedName, T name) {\n        var data =  myJavaMethod(name);\n        em.createNativeQuery(&quot;UPDATE table SET&quot; + UpdatedName + &quot;= '&quot; + data.toString() + &quot;'&quot;);\n    }\n}\n</code></pre>\n<p>I haven't tried this code but probably this would work if I have understood your requirement correctly.</p>\n"}],"owner":{"account_id":5511406,"reputation":1245,"user_id":4377568,"display_name":"Docteur"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":79,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1690296858,"creation_date":1690270667,"question_id":76760418,"body_markdown":"Let&#39;s say I have the following table:\r\n\r\n| name | UpdatedName |\r\n| -------- | -------------- |\r\n| toto    |            |\r\n| foo   |            |\r\n\r\nI want to run a native query that will, for each name, compute an `UpdateName` thanks to a Java method. \r\n\r\nThe reason why I want this to be a native query is because I want to make my code generic, able to perform this transformation on _any_ table with _any_ input and output columns. Thus, this bit of code has no idea of the entities that it is modifying. Of course, if a way to keep this generic and use something else than native queries exist, I&#39;m interested too :) \r\n\r\nHow can I have a query which will, in essence, do this:\r\n```sql\r\nUPDATE table SET UpdatedName = myJavaMethod(name)\r\n``` \r\nI know I can use native queries to do something similar to\r\n```java\r\nUPDATE table SET UpdatedName = :myNewValue\r\n```\r\n\r\nbut how could I retrieve the `name` value from that row, so that I can pass `myJavaMethod(name)` as the arg?","title":"How to update a column based on another column&#39;s value with a native query?","body":"<p>Let's say I have the following table:</p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th>name</th>\n<th>UpdatedName</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>toto</td>\n<td></td>\n</tr>\n<tr>\n<td>foo</td>\n<td></td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>I want to run a native query that will, for each name, compute an <code>UpdateName</code> thanks to a Java method.</p>\n<p>The reason why I want this to be a native query is because I want to make my code generic, able to perform this transformation on <em>any</em> table with <em>any</em> input and output columns. Thus, this bit of code has no idea of the entities that it is modifying. Of course, if a way to keep this generic and use something else than native queries exist, I'm interested too :)</p>\n<p>How can I have a query which will, in essence, do this:</p>\n<pre class=\"lang-sql prettyprint-override\"><code>UPDATE table SET UpdatedName = myJavaMethod(name)\n</code></pre>\n<p>I know I can use native queries to do something similar to</p>\n<pre class=\"lang-java prettyprint-override\"><code>UPDATE table SET UpdatedName = :myNewValue\n</code></pre>\n<p>but how could I retrieve the <code>name</code> value from that row, so that I can pass <code>myJavaMethod(name)</code> as the arg?</p>\n"},{"tags":["java","selenium-webdriver","scrollbar"],"answers":[{"comments":[{"owner":{"account_id":98471,"reputation":15227,"user_id":266531,"accept_rate":100,"display_name":"Kirby"},"score":0,"creation_date":1690296779,"post_id":76740504,"comment_id":135331923,"body_markdown":"Thank you for your valuable answer and for contributing to Stack Overflow. If you could provide some explanation of what your answer  does, that would further improve its quality.","body":"Thank you for your valuable answer and for contributing to Stack Overflow. If you could provide some explanation of what your answer  does, that would further improve its quality."}],"tags":[],"owner":{"account_id":27127834,"reputation":55,"user_id":20670520,"display_name":"Adem akdag"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1690296691,"creation_date":1689965207,"answer_id":76740504,"question_id":76733738,"body_markdown":"Okay, this worked for me:\r\n```\r\nJavascriptExecutor js = (JavascriptExecutor) driver; \r\njs.executeScript(&quot;document.getElementById(&#39;elementsId&#39;).scrollBy(0,100)&quot;);\r\n```","title":"How to scroll inner scroll bar in selenium webdriver java","body":"<p>Okay, this worked for me:</p>\n<pre><code>JavascriptExecutor js = (JavascriptExecutor) driver; \njs.executeScript(&quot;document.getElementById('elementsId').scrollBy(0,100)&quot;);\n</code></pre>\n"}],"owner":{"account_id":27127834,"reputation":55,"user_id":20670520,"display_name":"Adem akdag"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":50,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1690296691,"creation_date":1689887438,"question_id":76733738,"body_markdown":"I have been trying to scroll inner scroll bar on a page (There is no Iframe) but every time driver was focusing on outer scroll bar. How can I control the inner scroll bar? Can anyone help please?","title":"How to scroll inner scroll bar in selenium webdriver java","body":"<p>I have been trying to scroll inner scroll bar on a page (There is no Iframe) but every time driver was focusing on outer scroll bar. How can I control the inner scroll bar? Can anyone help please?</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":7880,"page":288,"page_size":100}
