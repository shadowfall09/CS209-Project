{"items":[{"tags":["java","visual-studio-code"],"comments":[{"owner":{"account_id":6780825,"reputation":155680,"user_id":5221149,"display_name":"Andreas"},"score":0,"creation_date":1554089070,"post_id":55447687,"comment_id":97610036,"body_markdown":"Don&#39;t compile with `--enable-preview`. If you do compile that way, you must also specify that option when running the code.","body":"Don&#39;t compile with <code>--enable-preview</code>. If you do compile that way, you must also specify that option when running the code."}],"answers":[{"comments":[{"owner":{"account_id":11989553,"reputation":1346,"user_id":8773124,"accept_rate":100,"display_name":"AppDreamer"},"score":1,"creation_date":1554154047,"post_id":55447741,"comment_id":97639836,"body_markdown":"I&#39;m having the same issue with a clean install of jdk1.8.0_202. I deleted all other JRE versions, and cleaned up my PATH variables and set my JAVA_HOME to the correct path. I get the rocket and thumbs-up in the VS Code status bar, but when I press F5 on a simple Hello World using code basically created by VS Code, I get the same first half of your error, but mine ends in &quot;... has been compiled by a more recent version of the Java Runtime (class file version 52.65535)&quot; - same number! Is this a VS Code issue? adding &quot;vmArgs&quot;: &quot;--enable-preview&quot; did not fix.","body":"I&#39;m having the same issue with a clean install of jdk1.8.0_202. I deleted all other JRE versions, and cleaned up my PATH variables and set my JAVA_HOME to the correct path. I get the rocket and thumbs-up in the VS Code status bar, but when I press F5 on a simple Hello World using code basically created by VS Code, I get the same first half of your error, but mine ends in &quot;... has been compiled by a more recent version of the Java Runtime (class file version 52.65535)&quot; - same number! Is this a VS Code issue? adding &quot;vmArgs&quot;: &quot;--enable-preview&quot; did not fix."},{"owner":{"account_id":323866,"reputation":986,"user_id":5361649,"display_name":"jinbo wang"},"score":0,"creation_date":1554863860,"post_id":55447741,"comment_id":97903219,"body_markdown":"@AppDreamer Yes, the flag doesn&#39;t work for JDK 8, that&#39;s a bug in the java extension. And the latest redhat.java@0.42.1 extension has fixed the issue. Suggest update the extension and have a try.","body":"@AppDreamer Yes, the flag doesn&#39;t work for JDK 8, that&#39;s a bug in the java extension. And the latest redhat.java@0.42.1 extension has fixed the issue. Suggest update the extension and have a try."},{"owner":{"account_id":11989553,"reputation":1346,"user_id":8773124,"accept_rate":100,"display_name":"AppDreamer"},"score":0,"creation_date":1555108811,"post_id":55447741,"comment_id":98008860,"body_markdown":"Jinbo, I installed 1.8.0_196 and backed out 202, and it fixed my problem. Perhaps it was just an issue with 202 on JDK 8.","body":"Jinbo, I installed 1.8.0_196 and backed out 202, and it fixed my problem. Perhaps it was just an issue with 202 on JDK 8."}],"tags":[],"owner":{"account_id":323866,"reputation":986,"user_id":5361649,"display_name":"jinbo wang"},"comment_count":3,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1554089216,"creation_date":1554089216,"answer_id":55447741,"question_id":55447687,"body_markdown":"In launch.json file, add &quot;vmArgs&quot;: &quot;--enable-preview&quot; to your debug configuration.\r\n```\r\n{\r\n   ...\r\n   &quot;vmArgs&quot;: &quot;--enable-preview&quot;\r\n}\r\n```","title":"How to fix java.lang.UnsupportedClassVersionError: test (class file version 52.65535) was compiled with preview features that are unsupported?","body":"<p>In launch.json file, add \"vmArgs\": \"--enable-preview\" to your debug configuration.</p>\n\n<pre><code>{\n   ...\n   \"vmArgs\": \"--enable-preview\"\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16778040,"reputation":11,"user_id":12128855,"display_name":"Lychee"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1569648406,"creation_date":1569563947,"answer_id":58128596,"question_id":55447687,"body_markdown":"Update: after intensive googling I think I found the answer: \r\n\r\n**This is due to a mismatch with the code version that&#39;s compiling in vscode and the JDK version you&#39;re running in your system.**  \r\n\r\n1. In your VScode, your compiler is trying to compile using (class file version 52.65535), which is **Java 8**, meanwhile your system is running class file version 55.65535 which is **Java 11**. In this case, clean uninstall the Java 11 in your system first, follow the uninstall instructions here: https://docs.oracle.com/javase/8/docs/technotes/guides/install/mac_jdk.html#A1096903\r\n\r\n2. After uninstallation, download and install the JDK 8 from oracle:\r\nhttps://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html\r\n\r\n3. reopen your vscode project, do the following: \r\n\r\n4. open your launch.json file, add this line in configuration: \r\n\r\n    &quot;vmArgs&quot;: &quot;--enable-preview&quot;\r\n\r\n5. inside your file your want to compile and run, press F1 in vscode and do the following: \r\n\r\n - Java: Clean the java language server workspace\r\n   \r\n - Java: Force Java Compilation\r\n\r\n6. Press F5 your code will compile and run!\r\n\r\nReference: https://www.baeldung.com/java-lang-unsupportedclassversion","title":"How to fix java.lang.UnsupportedClassVersionError: test (class file version 52.65535) was compiled with preview features that are unsupported?","body":"<p>Update: after intensive googling I think I found the answer: </p>\n\n<p><strong>This is due to a mismatch with the code version that's compiling in vscode and the JDK version you're running in your system.</strong>  </p>\n\n<ol>\n<li><p>In your VScode, your compiler is trying to compile using (class file version 52.65535), which is <strong>Java 8</strong>, meanwhile your system is running class file version 55.65535 which is <strong>Java 11</strong>. In this case, clean uninstall the Java 11 in your system first, follow the uninstall instructions here: <a href=\"https://docs.oracle.com/javase/8/docs/technotes/guides/install/mac_jdk.html#A1096903\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/8/docs/technotes/guides/install/mac_jdk.html#A1096903</a></p></li>\n<li><p>After uninstallation, download and install the JDK 8 from oracle:\n<a href=\"https://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html\" rel=\"nofollow noreferrer\">https://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html</a></p></li>\n<li><p>reopen your vscode project, do the following: </p></li>\n<li><p>open your launch.json file, add this line in configuration: </p>\n\n<p>\"vmArgs\": \"--enable-preview\"</p></li>\n<li><p>inside your file your want to compile and run, press F1 in vscode and do the following: </p>\n\n<ul>\n<li><p>Java: Clean the java language server workspace</p></li>\n<li><p>Java: Force Java Compilation</p></li>\n</ul></li>\n<li><p>Press F5 your code will compile and run!</p></li>\n</ol>\n\n<p>Reference: <a href=\"https://www.baeldung.com/java-lang-unsupportedclassversion\" rel=\"nofollow noreferrer\">https://www.baeldung.com/java-lang-unsupportedclassversion</a></p>\n"},{"tags":[],"owner":{"account_id":9557519,"reputation":543,"user_id":7099541,"display_name":"afshar"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1643011760,"creation_date":1643011760,"answer_id":70830720,"question_id":55447687,"body_markdown":"The same error on the Intellij idea maven build. correct the JRE version of Maven to the correct version of java.\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/abR7Z.png","title":"How to fix java.lang.UnsupportedClassVersionError: test (class file version 52.65535) was compiled with preview features that are unsupported?","body":"<p>The same error on the Intellij idea maven build. correct the JRE version of Maven to the correct version of java.\n<a href=\"https://i.stack.imgur.com/abR7Z.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/abR7Z.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":[],"owner":{"account_id":27024561,"reputation":1,"user_id":20582037,"display_name":"Nikimba"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669232845,"creation_date":1669207835,"answer_id":74547084,"question_id":55447687,"body_markdown":"I solved this problem by compiling the class through the terminal itself with javac in the &quot;src&quot; folder and then replacing the &quot;.class file&quot; in the &quot;bin&quot; folder by the &quot;.class file&quot; created in the &quot;src&quot; folder. I believe the problem is in VSCODE, I did the same test in Eclipse and it worked without problems.\r\n\r\nAnother alternative:\r\n\r\nin the configure Java Runtime option of VSCODE, you have the option to choose the Runtime version we can choose which java version we want to use, mine was 19, however, apparently it does not work well, so I changed it to version 17 and everything works perfectly. There is an option to download the latest version of the JDK and it is not in 19 only 17 as shown in this print from the website https://code.visualstudio.com/assets/docs/java/java-project/download-jdk .png that is exactly the same as what appears in the program. Until then it was the best alternative I found","title":"How to fix java.lang.UnsupportedClassVersionError: test (class file version 52.65535) was compiled with preview features that are unsupported?","body":"<p>I solved this problem by compiling the class through the terminal itself with javac in the &quot;src&quot; folder and then replacing the &quot;.class file&quot; in the &quot;bin&quot; folder by the &quot;.class file&quot; created in the &quot;src&quot; folder. I believe the problem is in VSCODE, I did the same test in Eclipse and it worked without problems.</p>\n<p>Another alternative:</p>\n<p>in the configure Java Runtime option of VSCODE, you have the option to choose the Runtime version we can choose which java version we want to use, mine was 19, however, apparently it does not work well, so I changed it to version 17 and everything works perfectly. There is an option to download the latest version of the JDK and it is not in 19 only 17 as shown in this print from the website <a href=\"https://code.visualstudio.com/assets/docs/java/java-project/download-jdk\" rel=\"nofollow noreferrer\">https://code.visualstudio.com/assets/docs/java/java-project/download-jdk</a> .png that is exactly the same as what appears in the program. Until then it was the best alternative I found</p>\n"}],"owner":{"account_id":15645719,"reputation":111,"user_id":11287916,"display_name":"Luty"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":20489,"favorite_count":0,"down_vote_count":0,"up_vote_count":11,"answer_count":4,"score":11,"last_activity_date":1669232845,"creation_date":1554088698,"question_id":55447687,"body_markdown":"I recieved this error when I trying to debug a java program with vscode:\r\n```\r\njava.lang.UnsupportedClassVersionError: \r\ntest (class file version 52.65535) was compiled with preview features that are unsupported. \r\nThis version of the Java Runtime only recognizes preview features for class file version 55.65535\r\n```\r\nHere is launch.json:\r\n```\r\n{\r\n    &quot;version&quot;: &quot;0.2.0&quot;,\r\n    &quot;configurations&quot;: [\r\n        {\r\n            &quot;type&quot;: &quot;java&quot;,\r\n            &quot;name&quot;: &quot;Debug (Launch) - Current File&quot;,\r\n            &quot;request&quot;: &quot;launch&quot;,\r\n            &quot;mainClass&quot;: &quot;${file}&quot;\r\n        },\r\n        {\r\n            &quot;type&quot;: &quot;java&quot;,\r\n            &quot;name&quot;: &quot;Debug (Launch)-test&quot;,\r\n            &quot;request&quot;: &quot;launch&quot;,\r\n            &quot;mainClass&quot;: &quot;test&quot;\r\n        }\r\n    ]\r\n}\r\n```\r\nHere is the version of java:\r\n```\r\njava --version:\r\nopenjdk 11.0.2 2019-01-15\r\nOpenJDK Runtime Environment (build 11.0.2+9-Ubuntu-3ubuntu118.04.2)\r\nOpenJDK 64-Bit Server VM (build 11.0.2+9-Ubuntu-3ubuntu118.04.2, mixed mode, sharing)\r\n\r\njavac --version:\r\njavac 11.0.2\r\n```\r\nThis program can run on ubuntu original terminal, but throws error in vscode.\r\n\r\nit would be greatful if you can help me out.","title":"How to fix java.lang.UnsupportedClassVersionError: test (class file version 52.65535) was compiled with preview features that are unsupported?","body":"<p>I recieved this error when I trying to debug a java program with vscode:</p>\n\n<pre><code>java.lang.UnsupportedClassVersionError: \ntest (class file version 52.65535) was compiled with preview features that are unsupported. \nThis version of the Java Runtime only recognizes preview features for class file version 55.65535\n</code></pre>\n\n<p>Here is launch.json:</p>\n\n<pre><code>{\n    \"version\": \"0.2.0\",\n    \"configurations\": [\n        {\n            \"type\": \"java\",\n            \"name\": \"Debug (Launch) - Current File\",\n            \"request\": \"launch\",\n            \"mainClass\": \"${file}\"\n        },\n        {\n            \"type\": \"java\",\n            \"name\": \"Debug (Launch)-test\",\n            \"request\": \"launch\",\n            \"mainClass\": \"test\"\n        }\n    ]\n}\n</code></pre>\n\n<p>Here is the version of java:</p>\n\n<pre><code>java --version:\nopenjdk 11.0.2 2019-01-15\nOpenJDK Runtime Environment (build 11.0.2+9-Ubuntu-3ubuntu118.04.2)\nOpenJDK 64-Bit Server VM (build 11.0.2+9-Ubuntu-3ubuntu118.04.2, mixed mode, sharing)\n\njavac --version:\njavac 11.0.2\n</code></pre>\n\n<p>This program can run on ubuntu original terminal, but throws error in vscode.</p>\n\n<p>it would be greatful if you can help me out.</p>\n"},{"tags":["java","apache-pulsar","pulsar"],"answers":[{"tags":[],"owner":{"account_id":103429,"reputation":6646,"user_id":277023,"accept_rate":56,"display_name":"kellyfj"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1669232286,"creation_date":1669232286,"answer_id":74552185,"question_id":74491416,"body_markdown":"To create a topic with partitions you can either configure the following settings for the Pulsar Broker (if you are relying on automatic topic creation)\r\n\r\n```\r\nallowAutoTopicCreationType = partitioned\r\ndefaultNumPartitions = &lt;N&gt;\r\n```\r\n\r\nAlternatively you can use the Pulsar Admin and use `createPartitionedTopic`\r\nhttps://github.com/apache/pulsar/blob/a165bda1d03e370f5efe1173134fb94e12b584b5/pulsar-client-admin-api/src/main/java/org/apache/pulsar/client/admin/Topics.java#L473-L475\r\n\r\nHowever once a topic has been created (I assume non-partitioned) then there is no way to make it partitioned. It has to be partitioned at topic creation time.","title":"java, apache pulsar Topic partition","body":"<p>To create a topic with partitions you can either configure the following settings for the Pulsar Broker (if you are relying on automatic topic creation)</p>\n<pre><code>allowAutoTopicCreationType = partitioned\ndefaultNumPartitions = &lt;N&gt;\n</code></pre>\n<p>Alternatively you can use the Pulsar Admin and use <code>createPartitionedTopic</code>\n<a href=\"https://github.com/apache/pulsar/blob/a165bda1d03e370f5efe1173134fb94e12b584b5/pulsar-client-admin-api/src/main/java/org/apache/pulsar/client/admin/Topics.java#L473-L475\" rel=\"nofollow noreferrer\">https://github.com/apache/pulsar/blob/a165bda1d03e370f5efe1173134fb94e12b584b5/pulsar-client-admin-api/src/main/java/org/apache/pulsar/client/admin/Topics.java#L473-L475</a></p>\n<p>However once a topic has been created (I assume non-partitioned) then there is no way to make it partitioned. It has to be partitioned at topic creation time.</p>\n"}],"owner":{"account_id":18610431,"reputation":41,"user_id":13563000,"display_name":"Dovile Barkauskaite"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":193,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1669232286,"creation_date":1668782828,"question_id":74491416,"body_markdown":"If I have a topic called `var test = &quot;test&quot;`\r\nand I create a bean:\r\n\r\n    @Bean(name = &quot;test&quot;)\r\n    public Producer&lt;Test&gt; testProducer(PulsarClient pulsarClient){\r\n        return pulsarClient.newProducer()\r\n                .topic(test)\r\n                .create();\r\n    }\r\n\r\nThe topic is created I want to partition, how?","title":"java, apache pulsar Topic partition","body":"<p>If I have a topic called <code>var test = &quot;test&quot;</code>\nand I create a bean:</p>\n<pre><code>@Bean(name = &quot;test&quot;)\npublic Producer&lt;Test&gt; testProducer(PulsarClient pulsarClient){\n    return pulsarClient.newProducer()\n            .topic(test)\n            .create();\n}\n</code></pre>\n<p>The topic is created I want to partition, how?</p>\n"},{"tags":["java","testing","mockito"],"answers":[{"tags":[],"owner":{"account_id":19496972,"reputation":2160,"user_id":14263933,"display_name":"aatwork"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669225219,"creation_date":1669225219,"answer_id":74550984,"question_id":74550724,"body_markdown":"I couldn&#39;t find one. So I use below workaround.\r\n\r\n    List list = List.of(1, 2, 3);\r\n    when(mockObject.getValuesFor(list).thenReturn(List.of(...)));\r\n    \r\n    //do actual test method call\r\n    \r\n    ArgumentCaptor&lt;List&gt; listCaptor = ArgumentCaptor.class(List.class);\r\n    verify(mockObject).getValuesFor(listCaptor.capture());\r\n    \r\n    assertEquals(3, list.getValue().size());\r\n    assertEquals(1, list.getValue().get(0));\r\n    assertEquals(2, list.getValue().get(1));\r\n    assertEquals(3, list.getValue().get(2));\r\n\r\nIt essentially does the same thing. If same list was not passed as the method argument, test case will fail in assert statements.","title":"Mockito ArgumentMatcher to verify if arg value is contained in a certain collection","body":"<p>I couldn't find one. So I use below workaround.</p>\n<pre><code>List list = List.of(1, 2, 3);\nwhen(mockObject.getValuesFor(list).thenReturn(List.of(...)));\n\n//do actual test method call\n\nArgumentCaptor&lt;List&gt; listCaptor = ArgumentCaptor.class(List.class);\nverify(mockObject).getValuesFor(listCaptor.capture());\n\nassertEquals(3, list.getValue().size());\nassertEquals(1, list.getValue().get(0));\nassertEquals(2, list.getValue().get(1));\nassertEquals(3, list.getValue().get(2));\n</code></pre>\n<p>It essentially does the same thing. If same list was not passed as the method argument, test case will fail in assert statements.</p>\n"},{"tags":[],"owner":{"account_id":1713236,"reputation":22836,"user_id":1570854,"accept_rate":71,"display_name":"Lesiak"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1669232099,"creation_date":1669231693,"answer_id":74552074,"question_id":74550724,"body_markdown":"I think `intThat` gets close to what you need:\r\n```lang-java\r\nwhen(mockObject.getValuesFor(intThat(x -&gt; Set.of(1, 2, 3).contains(x))))\r\n  .thenReturn(List.of(3, 4, 5));\r\n```\r\n\r\nIn addition, you can extract a method producing inner `ArgumentMatcher&lt;Integer&gt;`, which would make your code look like\r\n```lang-java\r\nwhen(mockObject.getValuesFor(intThat(isOneOf(1, 2, 3))))\r\n  .thenReturn(List.of(3, 4, 5));\r\n```","title":"Mockito ArgumentMatcher to verify if arg value is contained in a certain collection","body":"<p>I think <code>intThat</code> gets close to what you need:</p>\n<pre class=\"lang-java prettyprint-override\"><code>when(mockObject.getValuesFor(intThat(x -&gt; Set.of(1, 2, 3).contains(x))))\n  .thenReturn(List.of(3, 4, 5));\n</code></pre>\n<p>In addition, you can extract a method producing inner <code>ArgumentMatcher&lt;Integer&gt;</code>, which would make your code look like</p>\n<pre class=\"lang-java prettyprint-override\"><code>when(mockObject.getValuesFor(intThat(isOneOf(1, 2, 3))))\n  .thenReturn(List.of(3, 4, 5));\n</code></pre>\n"}],"owner":{"account_id":1059597,"reputation":24002,"user_id":1061499,"accept_rate":84,"display_name":"davioooh"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":159,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74552074,"answer_count":2,"score":0,"last_activity_date":1669232099,"creation_date":1669223892,"question_id":74550724,"body_markdown":"Is there a way, using [Mockito][1] to define an expression like this?\r\n\r\n    when(mockObject.getValuesFor(in(1, 2, 3)).thenReturn(List.of(...)));\r\n\r\nI can&#39;t find a method like `in()` among the ones defined in [`ArgumentMatchers`][2] and [`AdditionalMatchers`][3], so I&#39;d like to know which is a common way to achieve what I need.\r\n\r\n**Note**\r\nThe method I&#39;m mocking is declared like this:\r\n\r\n    List&lt;Integer&gt; getValuesFor(int arg) {...}\r\n\r\n\r\n  [1]: https://site.mockito.org/\r\n  [2]: https://javadoc.io/static/org.mockito/mockito-core/4.9.0/org/mockito/ArgumentMatchers.html\r\n  [3]: https://javadoc.io/static/org.mockito/mockito-core/4.9.0/org/mockito/AdditionalMatchers.html","title":"Mockito ArgumentMatcher to verify if arg value is contained in a certain collection","body":"<p>Is there a way, using <a href=\"https://site.mockito.org/\" rel=\"nofollow noreferrer\">Mockito</a> to define an expression like this?</p>\n<pre><code>when(mockObject.getValuesFor(in(1, 2, 3)).thenReturn(List.of(...)));\n</code></pre>\n<p>I can't find a method like <code>in()</code> among the ones defined in <a href=\"https://javadoc.io/static/org.mockito/mockito-core/4.9.0/org/mockito/ArgumentMatchers.html\" rel=\"nofollow noreferrer\"><code>ArgumentMatchers</code></a> and <a href=\"https://javadoc.io/static/org.mockito/mockito-core/4.9.0/org/mockito/AdditionalMatchers.html\" rel=\"nofollow noreferrer\"><code>AdditionalMatchers</code></a>, so I'd like to know which is a common way to achieve what I need.</p>\n<p><strong>Note</strong>\nThe method I'm mocking is declared like this:</p>\n<pre><code>List&lt;Integer&gt; getValuesFor(int arg) {...}\n</code></pre>\n"},{"tags":["java","eclipse","macos","maven","easy-rules"],"comments":[{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":0,"creation_date":1637018885,"post_id":69982093,"comment_id":123708433,"body_markdown":"Your question is missing the most important information -- the abstract methods in the RuleListener interface. Please post that information with your question.","body":"Your question is missing the most important information -- the abstract methods in the RuleListener interface. Please post that information with your question."},{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":0,"creation_date":1637018939,"post_id":69982093,"comment_id":123708450,"body_markdown":"Also, it is suspicious to me that your `onFailure` method does not have an `@Override` annotation above it, suggesting that your method signature is likely wrong.","body":"Also, it is suspicious to me that your <code>onFailure</code> method does not have an <code>@Override</code> annotation above it, suggesting that your method signature is likely wrong."},{"owner":{"account_id":23336836,"reputation":13,"user_id":17412363,"display_name":"Plutoverse"},"score":0,"creation_date":1637019081,"post_id":69982093,"comment_id":123708480,"body_markdown":"Here is the class I am implementing https://github.com/j-easy/easy-rules/blob/master/easy-rules-core/src/main/java/org/jeasy/rules/api/RuleListener.java","body":"Here is the class I am implementing <a href=\"https://github.com/j-easy/easy-rules/blob/master/easy-rules-core/src/main/java/org/jeasy/rules/api/RuleListener.java\" rel=\"nofollow noreferrer\">github.com/j-easy/easy-rules/blob/master/easy-rules-core/src&zwnj;&#8203;/&hellip;</a>"},{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":0,"creation_date":1637019339,"post_id":69982093,"comment_id":123708543,"body_markdown":"Please add the entire error message(s) that you see.","body":"Please add the entire error message(s) that you see."},{"owner":{"account_id":23336836,"reputation":13,"user_id":17412363,"display_name":"Plutoverse"},"score":0,"creation_date":1637019454,"post_id":69982093,"comment_id":123708564,"body_markdown":"Here you go...The method onSuccess(Rule, Facts) of type PositionalStrengthListener must override or implement a supertype method\tPositionalStrengthListener.java\t/Everest/src/main/java/rules\tline 17\tJava Problem","body":"Here you go...The method onSuccess(Rule, Facts) of type PositionalStrengthListener must override or implement a supertype method\tPositionalStrengthListener.java\t/Everest/src/main/jav&zwnj;&#8203;a/rules\tline 17\tJava Problem"},{"owner":{"account_id":1992310,"reputation":11172,"user_id":1786065,"accept_rate":91,"display_name":"Rogue"},"score":0,"creation_date":1637020233,"post_id":69982093,"comment_id":123708715,"body_markdown":"Did you add easy-rules as a [project dependency in your pom.xml](https://mvnrepository.com/artifact/org.jeasy/easy-rules/3.2.0)? That XML is needed so the project knows where to find depended-upon code.","body":"Did you add easy-rules as a <a href=\"https://mvnrepository.com/artifact/org.jeasy/easy-rules/3.2.0\" rel=\"nofollow noreferrer\">project dependency in your pom.xml</a>? That XML is needed so the project knows where to find depended-upon code."},{"owner":{"account_id":23336836,"reputation":13,"user_id":17412363,"display_name":"Plutoverse"},"score":0,"creation_date":1637020402,"post_id":69982093,"comment_id":123708744,"body_markdown":"Please see the pom.xml snippets I appended to my question.","body":"Please see the pom.xml snippets I appended to my question."},{"owner":{"account_id":23336836,"reputation":13,"user_id":17412363,"display_name":"Plutoverse"},"score":0,"creation_date":1637020462,"post_id":69982093,"comment_id":123708756,"body_markdown":"Please note that easy rules implementation is working in general. I am running into issue implementing my first RuleListener due to this @Override  error message.","body":"Please note that easy rules implementation is working in general. I am running into issue implementing my first RuleListener due to this @Override  error message."},{"owner":{"account_id":3159259,"reputation":109678,"user_id":2670892,"display_name":"greg-449"},"score":2,"creation_date":1637050259,"post_id":69982093,"comment_id":123714841,"body_markdown":"Check your `import` statements for `Rule` and `Facts` - are they importing the correct class?","body":"Check your <code>import</code> statements for <code>Rule</code> and <code>Facts</code> - are they importing the correct class?"},{"owner":{"account_id":23336836,"reputation":13,"user_id":17412363,"display_name":"Plutoverse"},"score":0,"creation_date":1637082575,"post_id":69982093,"comment_id":123728821,"body_markdown":"Yes @greg-449. I have the import statements: import org.jeasy.rules.api.Facts;\nimport org.jeasy.rules.api.RuleListener;","body":"Yes @greg-449. I have the import statements: import org.jeasy.rules.api.Facts; import org.jeasy.rules.api.RuleListener;"},{"owner":{"account_id":785560,"reputation":14879,"user_id":845414,"display_name":"Johannes Kuhn"},"score":0,"creation_date":1669234746,"post_id":69982093,"comment_id":131601121,"body_markdown":"Do you import `Rule`? You only mentioned 2 import statements.","body":"Do you import <code>Rule</code>? You only mentioned 2 import statements."}],"answers":[{"tags":[],"owner":{"account_id":12580607,"reputation":1,"user_id":9151446,"display_name":"Smooth Carlito"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669231879,"creation_date":1669231879,"answer_id":74552112,"question_id":69982093,"body_markdown":"You responded to greg-449&#39;s comment about the imports, but didn&#39;t mention what import you are using for Rule. Since jeasy has two Rule classes, I think it would be worth double checking this. \r\n\r\nIt should be `org.jeasy.rules.api.Rule`. I&#39;m able to reproduce the compile error by changing the import to `org.jeasy.rules.annotation.Rule` instead.\r\n\r\nAs a side-note, consider using version 4.1.0 of easy-rules-support instead of 3.3.0. It&#39;s not causing this problem, I just think it&#39;s a good idea to keep them in sync unless there&#39;s a specific reason you can&#39;t.","title":"Method does not override or implement a method from a supertype on Eclipse with interface and Easy Rules","body":"<p>You responded to greg-449's comment about the imports, but didn't mention what import you are using for Rule. Since jeasy has two Rule classes, I think it would be worth double checking this.</p>\n<p>It should be <code>org.jeasy.rules.api.Rule</code>. I'm able to reproduce the compile error by changing the import to <code>org.jeasy.rules.annotation.Rule</code> instead.</p>\n<p>As a side-note, consider using version 4.1.0 of easy-rules-support instead of 3.3.0. It's not causing this problem, I just think it's a good idea to keep them in sync unless there's a specific reason you can't.</p>\n"}],"owner":{"account_id":23336836,"reputation":13,"user_id":17412363,"display_name":"Plutoverse"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":929,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1669231879,"creation_date":1637018698,"question_id":69982093,"body_markdown":"[Compiler compliance configuration in Eclipse][1]\r\n\r\nI am running into this popular error &quot;method does not override or implement a method from a supertype&quot; in my code. I have spent nearly 5 hours reading on various solutions offered in the past and none of them are helping me. What is it that I am missing?\r\n\r\nHere are the things that I have tried:\r\n\r\n1. Made sure that the compiler compilation is set to 1.8\r\n2. JRE is 1.8\r\n3. Exited and re-imported my eclipse project in java to see if that helps\r\n4.  mvn clean install -U\r\n5. Used to below properties in my pom.xml file\r\n```\r\n&lt;properties&gt;\r\n  \t  &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;\r\n  \t  &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;\r\n    &lt;/properties&gt;\r\n```\r\n\r\n6. Used another way of mentioning java versions for target and source as below\r\n```\r\n&lt;plugins&gt;\r\n  &lt;plugin&gt;\r\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n        &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n        &lt;configuration&gt;\r\n          &lt;source&gt;1.8&lt;/source&gt;\r\n          &lt;target&gt;1.8&lt;/target&gt;\r\n          &lt;encoding&gt;UTF-8&lt;/encoding&gt;    \r\n        &lt;/configuration&gt;\r\n        &lt;version&gt;3.8.1&lt;/version&gt;\r\n      &lt;/plugin&gt;\r\n     &lt;/plugins&gt;\r\n```\r\n\r\nWhat am I doing?\r\n\r\nI am using Easy Rules. I implemented RuleListener as below: I keep getting the &quot;method does not override or implement a method from a supertype&quot;.  \r\n\r\n```\r\npublic class PositionalStrengthListener implements RuleListener {\r\n    private static Logger logger = LoggerFactory.getLogger(PositionalStrengthListener.class);\r\n\r\n    @Override\r\n    public void onSuccess(Rule rule, Facts facts) {\r\n    \tlogger.debug(&quot;OnSuccess: PositionalStrengthListener&quot;);\r\n  \r\n    }\r\n\r\n    public void onFailure(Rule rule, Facts facts, Exception exception) {\r\n    \tlogger.debug(&quot;On failure:PositionalStrengthListener&quot;);\r\n    }\r\n\r\n}\r\n```\r\n\r\nI am implementing this interface: https://github.com/j-easy/easy-rules/blob/master/easy-rules-core/src/main/java/org/jeasy/rules/api/RuleListener.java\r\n\r\nI was focusing on OnSuccess @Override error message and hence didn&#39;t add @Override on OnFailure but I get the same error with OnFailure if I add @Override.\r\n\r\nBelow is the easy rules dependency in pom.xml file.\r\n```\r\n&lt;!-- https://mvnrepository.com/artifact/org.jeasy/easy-rules --&gt;\r\n\t&lt;dependency&gt;\r\n   \t\t &lt;groupId&gt;org.jeasy&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;easy-rules-core&lt;/artifactId&gt;\r\n   \t\t &lt;version&gt;4.1.0&lt;/version&gt;\r\n\t&lt;/dependency&gt;\r\n\t&lt;dependency&gt;\r\n   \t\t &lt;groupId&gt;org.jeasy&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;easy-rules-support&lt;/artifactId&gt;\r\n   \t\t &lt;version&gt;3.3.0&lt;/version&gt;\r\n\t&lt;/dependency&gt;\r\n```\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/6mtsv.png","title":"Method does not override or implement a method from a supertype on Eclipse with interface and Easy Rules","body":"<p><a href=\"https://i.stack.imgur.com/6mtsv.png\" rel=\"nofollow noreferrer\">Compiler compliance configuration in Eclipse</a></p>\n<p>I am running into this popular error &quot;method does not override or implement a method from a supertype&quot; in my code. I have spent nearly 5 hours reading on various solutions offered in the past and none of them are helping me. What is it that I am missing?</p>\n<p>Here are the things that I have tried:</p>\n<ol>\n<li>Made sure that the compiler compilation is set to 1.8</li>\n<li>JRE is 1.8</li>\n<li>Exited and re-imported my eclipse project in java to see if that helps</li>\n<li>mvn clean install -U</li>\n<li>Used to below properties in my pom.xml file</li>\n</ol>\n<pre><code>&lt;properties&gt;\n      &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;\n      &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;\n    &lt;/properties&gt;\n</code></pre>\n<ol start=\"6\">\n<li>Used another way of mentioning java versions for target and source as below</li>\n</ol>\n<pre><code>&lt;plugins&gt;\n  &lt;plugin&gt;\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n        &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n        &lt;configuration&gt;\n          &lt;source&gt;1.8&lt;/source&gt;\n          &lt;target&gt;1.8&lt;/target&gt;\n          &lt;encoding&gt;UTF-8&lt;/encoding&gt;    \n        &lt;/configuration&gt;\n        &lt;version&gt;3.8.1&lt;/version&gt;\n      &lt;/plugin&gt;\n     &lt;/plugins&gt;\n</code></pre>\n<p>What am I doing?</p>\n<p>I am using Easy Rules. I implemented RuleListener as below: I keep getting the &quot;method does not override or implement a method from a supertype&quot;.</p>\n<pre><code>public class PositionalStrengthListener implements RuleListener {\n    private static Logger logger = LoggerFactory.getLogger(PositionalStrengthListener.class);\n\n    @Override\n    public void onSuccess(Rule rule, Facts facts) {\n        logger.debug(&quot;OnSuccess: PositionalStrengthListener&quot;);\n  \n    }\n\n    public void onFailure(Rule rule, Facts facts, Exception exception) {\n        logger.debug(&quot;On failure:PositionalStrengthListener&quot;);\n    }\n\n}\n</code></pre>\n<p>I am implementing this interface: <a href=\"https://github.com/j-easy/easy-rules/blob/master/easy-rules-core/src/main/java/org/jeasy/rules/api/RuleListener.java\" rel=\"nofollow noreferrer\">https://github.com/j-easy/easy-rules/blob/master/easy-rules-core/src/main/java/org/jeasy/rules/api/RuleListener.java</a></p>\n<p>I was focusing on OnSuccess @Override error message and hence didn't add @Override on OnFailure but I get the same error with OnFailure if I add @Override.</p>\n<p>Below is the easy rules dependency in pom.xml file.</p>\n<pre><code>&lt;!-- https://mvnrepository.com/artifact/org.jeasy/easy-rules --&gt;\n    &lt;dependency&gt;\n         &lt;groupId&gt;org.jeasy&lt;/groupId&gt;\n        &lt;artifactId&gt;easy-rules-core&lt;/artifactId&gt;\n         &lt;version&gt;4.1.0&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n         &lt;groupId&gt;org.jeasy&lt;/groupId&gt;\n        &lt;artifactId&gt;easy-rules-support&lt;/artifactId&gt;\n         &lt;version&gt;3.3.0&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n"},{"tags":["java","unicode","docusignapi"],"comments":[{"owner":{"account_id":28380,"reputation":2314,"user_id":75787,"accept_rate":65,"display_name":"evilfred"},"score":0,"creation_date":1669231565,"post_id":74551114,"comment_id":131600291,"body_markdown":"weird, this totally wasn&#39;t working and then all of a sudden it did start working. am I hallucinating or did Docusign maybe fix something server-side? or I started hitting a differently configured server? lol","body":"weird, this totally wasn&#39;t working and then all of a sudden it did start working. am I hallucinating or did Docusign maybe fix something server-side? or I started hitting a differently configured server? lol"}],"answers":[{"tags":[],"owner":{"account_id":28380,"reputation":2314,"user_id":75787,"accept_rate":65,"display_name":"evilfred"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669231756,"creation_date":1669231756,"answer_id":74552092,"question_id":74551114,"body_markdown":"started working, I guess it was a code problem on my end","title":"Using non-Latin UTF-8 characters in HTML passed to Docusign API","body":"<p>started working, I guess it was a code problem on my end</p>\n"}],"owner":{"account_id":28380,"reputation":2314,"user_id":75787,"accept_rate":65,"display_name":"evilfred"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1669231756,"creation_date":1669225886,"question_id":74551114,"body_markdown":"I am passing an HTML document as part of an envelope creation request to the Docusign REST API. When I include multibyte UTF-8 data, it comes out in the resulting Docusign envelope document interpreted as individual characters. For example, when I include the Russian word &quot;банан&quot;, the first letter has UTF-8 encoding U+D0B1 but it comes out as &#208; (U+00D0) and &#177; (U+00B1).\r\n\r\nI was concerned it could be an issue on my side so I enabled Docusign server-side API request logging. I can see in the log of the request that the string is properly logged as &quot;банан&quot; on the way in. This HTML is included as part of a multipart request, and the header for this part includes:\r\n\r\n    --Boundary_4_1344004434_1669225218640\r\n    Content-Type: text/html;charset=utf-8\r\n    Content-Disposition: form-data; filename=&quot;foo.html&quot;; name=&quot;foo.html&quot;; documentid=&quot;1&quot;\r\n\r\nthe header for the entire multipart request includes:\r\n\r\n    Content-Type: multipart/form-data; boundary=Boundary_4_1344004434_1669225218640\r\n    Content-Length: 95556\r\n\r\nHow can I get the resulting document to properly make use of UTF-8 characters? Am I doing something wrong or is it a limitation of Docusign&#39;s HTML -&gt; PDF conversion support?\r\n\r\nNote: including UTF-8 encoded values for text tabs in the same request works perfectly fine. The only issue is characters within the HTML that gets converted by Docusign into PDF.\r\n\r\nETA: the information from https://stackoverflow.com/questions/33764977/docusign-rest-with-utf-8-characters was not helpful. the first response is to use HTML encoding, but I have no way to cleanly apply that to my whole HTML input as I want the &lt; and &gt; characters in tags to stay intact, and the other &quot;solution&quot; the author appears to have went with is just to encode using ISO-8859-1 rather than UTF-8.","title":"Using non-Latin UTF-8 characters in HTML passed to Docusign API","body":"<p>I am passing an HTML document as part of an envelope creation request to the Docusign REST API. When I include multibyte UTF-8 data, it comes out in the resulting Docusign envelope document interpreted as individual characters. For example, when I include the Russian word &quot;банан&quot;, the first letter has UTF-8 encoding U+D0B1 but it comes out as Ð (U+00D0) and ± (U+00B1).</p>\n<p>I was concerned it could be an issue on my side so I enabled Docusign server-side API request logging. I can see in the log of the request that the string is properly logged as &quot;банан&quot; on the way in. This HTML is included as part of a multipart request, and the header for this part includes:</p>\n<pre><code>--Boundary_4_1344004434_1669225218640\nContent-Type: text/html;charset=utf-8\nContent-Disposition: form-data; filename=&quot;foo.html&quot;; name=&quot;foo.html&quot;; documentid=&quot;1&quot;\n</code></pre>\n<p>the header for the entire multipart request includes:</p>\n<pre><code>Content-Type: multipart/form-data; boundary=Boundary_4_1344004434_1669225218640\nContent-Length: 95556\n</code></pre>\n<p>How can I get the resulting document to properly make use of UTF-8 characters? Am I doing something wrong or is it a limitation of Docusign's HTML -&gt; PDF conversion support?</p>\n<p>Note: including UTF-8 encoded values for text tabs in the same request works perfectly fine. The only issue is characters within the HTML that gets converted by Docusign into PDF.</p>\n<p>ETA: the information from <a href=\"https://stackoverflow.com/questions/33764977/docusign-rest-with-utf-8-characters\">Docusign Rest with UTF-8 Characters</a> was not helpful. the first response is to use HTML encoding, but I have no way to cleanly apply that to my whole HTML input as I want the &lt; and &gt; characters in tags to stay intact, and the other &quot;solution&quot; the author appears to have went with is just to encode using ISO-8859-1 rather than UTF-8.</p>\n"},{"tags":["java","android","android-studio","android-viewpager","android-music-player"],"answers":[{"tags":[],"owner":{"account_id":5282904,"reputation":18287,"user_id":4217682,"accept_rate":50,"display_name":"snachmsm"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669231212,"creation_date":1669231212,"answer_id":74551994,"question_id":74551683,"body_markdown":"check out [`onPageChangeListener`](https://stackoverflow.com/questions/11293300/determine-when-a-viewpager-changes-pages) (first answer with example) or even `SimpleOnPageChangeListener` - play desired music in `onPageSelected(int position)` method","title":"How can I attach a sound to each ViewPager image","body":"<p>check out <a href=\"https://stackoverflow.com/questions/11293300/determine-when-a-viewpager-changes-pages\"><code>onPageChangeListener</code></a> (first answer with example) or even <code>SimpleOnPageChangeListener</code> - play desired music in <code>onPageSelected(int position)</code> method</p>\n"}],"owner":{"account_id":27027795,"reputation":1,"user_id":20584751,"display_name":"AlexP"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":17,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1669231212,"creation_date":1669229208,"question_id":74551683,"body_markdown":"I am newbie. I can&#39;t find an answer. I have a ViewPager with a stack of swipeable images. \r\n\r\nI need to make it so that when a certain picture is opened, the sound that is assigned to it is played. Tell me in which direction to look, so far I can only make the sound play when the first picture is opened, just by launching the MediaPlayer, but this is not at all what I need.","title":"How can I attach a sound to each ViewPager image","body":"<p>I am newbie. I can't find an answer. I have a ViewPager with a stack of swipeable images.</p>\n<p>I need to make it so that when a certain picture is opened, the sound that is assigned to it is played. Tell me in which direction to look, so far I can only make the sound play when the first picture is opened, just by launching the MediaPlayer, but this is not at all what I need.</p>\n"},{"tags":["java","apache-spark"],"answers":[{"tags":[],"owner":{"account_id":11741096,"reputation":9150,"user_id":8593414,"display_name":"Srinivas"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1594655396,"creation_date":1594653487,"answer_id":62878918,"question_id":62878601,"body_markdown":"**Simple Way** - Instead of ```df.columns``` use ```concat_ws(&quot;,&quot;,&quot;*&quot;)```, Check below code.\r\n\r\n```\r\ndf.withColumn(&quot;colName&quot;,expr(&quot;concat_ws(&#39;,&#39;,*)&quot;)).show(false)\r\n+---+--------+---+-------------+\r\n|id |name    |age|colName      |\r\n+---+--------+---+-------------+\r\n|1  |Srinivas|29 |1,Srinivas,29|\r\n|2  |Ravi    |30 |2,Ravi,30    |\r\n+---+--------+---+-------------+\r\n```\r\n","title":"how to concat all columns in a spark dataframe, using java?","body":"<p><strong>Simple Way</strong> - Instead of <code>df.columns</code> use <code>concat_ws(&quot;,&quot;,&quot;*&quot;)</code>, Check below code.</p>\n<pre><code>df.withColumn(&quot;colName&quot;,expr(&quot;concat_ws(',',*)&quot;)).show(false)\n+---+--------+---+-------------+\n|id |name    |age|colName      |\n+---+--------+---+-------------+\n|1  |Srinivas|29 |1,Srinivas,29|\n|2  |Ravi    |30 |2,Ravi,30    |\n+---+--------+---+-------------+\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6099207,"reputation":6223,"user_id":4758823,"display_name":"Som"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1594653817,"creation_date":1594653817,"answer_id":62879045,"question_id":62878601,"body_markdown":"Java has more verbose syntax. \r\nTry this -\r\n```java\r\n df.withColumn(&quot;colName&quot;,concat_ws(&quot;,&quot;, toScalaSeq(Arrays.stream(df.columns()).map(functions::col).collect(Collectors.toList()))));\r\n```\r\nUse below utility to convert java list to scala seq-\r\n```java\r\n  &lt;T&gt; Buffer&lt;T&gt; toScalaSeq(List&lt;T&gt; list) {\r\n        return JavaConversions.asScalaBuffer(list);\r\n    }\r\n```","title":"how to concat all columns in a spark dataframe, using java?","body":"<p>Java has more verbose syntax.\nTry this -</p>\n<pre class=\"lang-java prettyprint-override\"><code> df.withColumn(&quot;colName&quot;,concat_ws(&quot;,&quot;, toScalaSeq(Arrays.stream(df.columns()).map(functions::col).collect(Collectors.toList()))));\n</code></pre>\n<p>Use below utility to convert java list to scala seq-</p>\n<pre class=\"lang-java prettyprint-override\"><code>  &lt;T&gt; Buffer&lt;T&gt; toScalaSeq(List&lt;T&gt; list) {\n        return JavaConversions.asScalaBuffer(list);\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1047389,"reputation":603,"user_id":1052118,"accept_rate":100,"display_name":"t3b4n"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669230985,"creation_date":1669230985,"answer_id":74551959,"question_id":62878601,"body_markdown":"If someone is looking for a way to concat all the columns of a DataFrame in Scala, this is what worked for me:\r\n\r\n    val df_new = df.withColumn(new_column_name, concat_ws(&quot;-&quot;, df.columns.map(col): _*))","title":"how to concat all columns in a spark dataframe, using java?","body":"<p>If someone is looking for a way to concat all the columns of a DataFrame in Scala, this is what worked for me:</p>\n<pre><code>val df_new = df.withColumn(new_column_name, concat_ws(&quot;-&quot;, df.columns.map(col): _*))\n</code></pre>\n"}],"owner":{"account_id":19068786,"reputation":3,"user_id":13923409,"display_name":"joradani"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2350,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":62878918,"answer_count":3,"score":0,"last_activity_date":1669230985,"creation_date":1594652471,"question_id":62878601,"body_markdown":"This is how I do do for 2 specific columns:\r\n\r\n    dataSet.withColumn(&quot;colName&quot;, concat(dataSet.col(&quot;col1&quot;), lit(&quot;,&quot;),dataSet.col(&quot;col2&quot;) ));\r\n\r\nbut `dataSet.columns()` retruns Sting array, and not Column array.\r\nHow should I craete a  `List&lt;Column&gt;`?\r\n\r\nThanks!","title":"how to concat all columns in a spark dataframe, using java?","body":"<p>This is how I do do for 2 specific columns:</p>\n<pre><code>dataSet.withColumn(&quot;colName&quot;, concat(dataSet.col(&quot;col1&quot;), lit(&quot;,&quot;),dataSet.col(&quot;col2&quot;) ));\n</code></pre>\n<p>but <code>dataSet.columns()</code> retruns Sting array, and not Column array.\nHow should I craete a  <code>List&lt;Column&gt;</code>?</p>\n<p>Thanks!</p>\n"},{"tags":["java","apache-kafka"],"comments":[{"owner":{"account_id":16084161,"reputation":1771,"user_id":11609323,"display_name":"Ran Lupovich"},"score":1,"creation_date":1622743349,"post_id":67825720,"comment_id":119886279,"body_markdown":"sslEnabled is set to true? Your &quot;if&quot; gets executed?","body":"sslEnabled is set to true? Your &quot;if&quot; gets executed?"},{"owner":{"account_id":16084161,"reputation":1771,"user_id":11609323,"display_name":"Ran Lupovich"},"score":1,"creation_date":1622743378,"post_id":67825720,"comment_id":119886284,"body_markdown":"The logs provided not enough to understand the error, please provide more log files","body":"The logs provided not enough to understand the error, please provide more log files"}],"owner":{"account_id":6552810,"reputation":151,"user_id":5066614,"display_name":"Smith"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":519,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1669230600,"creation_date":1622739701,"question_id":67825720,"body_markdown":"I am trying to do Kafka consumer configuration using ssl enable but not able to connect.\r\nI have used Spring boot 2.3.3.RELEASE and respective Kafka-client &amp; Spring Kafka was pulled by parent dependency.\r\nHere is some code snippet - \r\n\r\n        Map&lt;String, Object&gt; config = new HashMap&lt;String, Object&gt;();\r\n\t\tconfig.put(ConsumerConfig.BOOTSTRAP_SERVERS_CONFIG, kafkaBootStrapServers);\r\n\t\tconfig.put(ConsumerConfig.KEY_DESERIALIZER_CLASS_CONFIG, StringDeserializer.class);\r\n\t\tconfig.put(ConsumerConfig.VALUE_DESERIALIZER_CLASS_CONFIG, StringDeserializer.class);\r\n\t\tconfig.put(ConsumerConfig.ENABLE_AUTO_COMMIT_CONFIG, &quot;true&quot;);\r\n\t\t\r\n\t\tif (sslEnabled) {\r\n\t\t\tconfig.put(SslConfigs.SSL_PROTOCOL_CONFIG, &quot;SSL&quot;);\r\n\t\t\tconfig.put(SslConfigs.SSL_TRUSTSTORE_LOCATION_CONFIG, trustStoreLocation);\r\n\t\t\tconfig.put(SslConfigs.SSL_TRUSTSTORE_PASSWORD_CONFIG, trustStorePassword);\r\n\t\t\tconfig.put(SslConfigs.SSL_KEY_PASSWORD_CONFIG, keyStorePassword);\r\n\t\t\tconfig.put(SslConfigs.SSL_KEYSTORE_PASSWORD_CONFIG, keyStorePassword);\r\n\t\t\tconfig.put(SslConfigs.SSL_KEYSTORE_LOCATION_CONFIG, keyStoreLocation);\r\n\t\t}\r\n\r\nI am  getting below warning with above config which keeps on writing the logs every seconds. \r\n\r\n    groupId=dp-cds-consumer-group] Bootstrap broker sd-5ea4-f0b6.apac.nsroot.net:9093 (id: -2 rack: null) disconnected\r\n    2021-06-02 16:30:09.791  WARN 447 --- [Container-0-C-1] o.a.k.c.NetworkClient                    : [Consumer clientId=consumer-dp-cos-consumer-group-2, groupId=dp-cos-consumer-group] Bootstrap broker sd-1c3f-5bcc.apac.nsroot.net:9093 (id: -1 rack: null) disconnected\r\n    2021-06-02 16:30:10.005  WARN 447 --- [Container-0-C-1] o.a.k.c.NetworkClient                    : [Consumer clientId=consumer-dp-etrs-consumer-group-3, groupId=dp-etrs-consumer-group] Bootstrap broker sd-5ea4-f0b6.apac.nsroot.net:9093 (id: -2 rack: null) disconnected\r\n    2021-06-02 16:30:10.283  WARN 447 --- [Container-0-C-1] o.a.k.c.NetworkClient \r\n\r\n Instead of `config.put(SslConfigs.SSL_PROTOCOL_CONFIG, &quot;SSL&quot;);` if i use `config.put(&quot;security.protocol&quot;, securityProtocol);` then i am getting below exception :- \r\n\r\n    java.lang.IllegalArgumentException: No enum constant org.apache.kafka.common.security.auth.SecurityProtocol.SSL.SECURITY.PROTOCOL\r\n\t\r\nKindly suggest if some more config is missing here to be added to resolve the issue.","title":"Spring Kafka consumer not able to connect to broker","body":"<p>I am trying to do Kafka consumer configuration using ssl enable but not able to connect.\nI have used Spring boot 2.3.3.RELEASE and respective Kafka-client &amp; Spring Kafka was pulled by parent dependency.\nHere is some code snippet -</p>\n<pre><code>    Map&lt;String, Object&gt; config = new HashMap&lt;String, Object&gt;();\n    config.put(ConsumerConfig.BOOTSTRAP_SERVERS_CONFIG, kafkaBootStrapServers);\n    config.put(ConsumerConfig.KEY_DESERIALIZER_CLASS_CONFIG, StringDeserializer.class);\n    config.put(ConsumerConfig.VALUE_DESERIALIZER_CLASS_CONFIG, StringDeserializer.class);\n    config.put(ConsumerConfig.ENABLE_AUTO_COMMIT_CONFIG, &quot;true&quot;);\n    \n    if (sslEnabled) {\n        config.put(SslConfigs.SSL_PROTOCOL_CONFIG, &quot;SSL&quot;);\n        config.put(SslConfigs.SSL_TRUSTSTORE_LOCATION_CONFIG, trustStoreLocation);\n        config.put(SslConfigs.SSL_TRUSTSTORE_PASSWORD_CONFIG, trustStorePassword);\n        config.put(SslConfigs.SSL_KEY_PASSWORD_CONFIG, keyStorePassword);\n        config.put(SslConfigs.SSL_KEYSTORE_PASSWORD_CONFIG, keyStorePassword);\n        config.put(SslConfigs.SSL_KEYSTORE_LOCATION_CONFIG, keyStoreLocation);\n    }\n</code></pre>\n<p>I am  getting below warning with above config which keeps on writing the logs every seconds.</p>\n<pre><code>groupId=dp-cds-consumer-group] Bootstrap broker sd-5ea4-f0b6.apac.nsroot.net:9093 (id: -2 rack: null) disconnected\n2021-06-02 16:30:09.791  WARN 447 --- [Container-0-C-1] o.a.k.c.NetworkClient                    : [Consumer clientId=consumer-dp-cos-consumer-group-2, groupId=dp-cos-consumer-group] Bootstrap broker sd-1c3f-5bcc.apac.nsroot.net:9093 (id: -1 rack: null) disconnected\n2021-06-02 16:30:10.005  WARN 447 --- [Container-0-C-1] o.a.k.c.NetworkClient                    : [Consumer clientId=consumer-dp-etrs-consumer-group-3, groupId=dp-etrs-consumer-group] Bootstrap broker sd-5ea4-f0b6.apac.nsroot.net:9093 (id: -2 rack: null) disconnected\n2021-06-02 16:30:10.283  WARN 447 --- [Container-0-C-1] o.a.k.c.NetworkClient \n</code></pre>\n<p>Instead of <code>config.put(SslConfigs.SSL_PROTOCOL_CONFIG, &quot;SSL&quot;);</code> if i use <code>config.put(&quot;security.protocol&quot;, securityProtocol);</code> then i am getting below exception :-</p>\n<pre><code>java.lang.IllegalArgumentException: No enum constant org.apache.kafka.common.security.auth.SecurityProtocol.SSL.SECURITY.PROTOCOL\n</code></pre>\n<p>Kindly suggest if some more config is missing here to be added to resolve the issue.</p>\n"},{"tags":["java","ssl","open-liberty","jmstoolbox"],"comments":[{"owner":{"account_id":4558101,"reputation":17722,"user_id":3701228,"display_name":"Gas"},"score":0,"creation_date":1669039310,"post_id":74514603,"comment_id":131545656,"body_markdown":"My guess would be that you are trying to make SSL connection to the non-ssl port.\nYou really need to add `server.xml` to the question and params that you use to establish connection.","body":"My guess would be that you are trying to make SSL connection to the non-ssl port. You really need to add <code>server.xml</code> to the question and params that you use to establish connection."},{"owner":{"account_id":119118,"reputation":6072,"user_id":310606,"accept_rate":74,"display_name":"John Deverall"},"score":0,"creation_date":1669077858,"post_id":74514603,"comment_id":131556836,"body_markdown":"Thanks @Gas. I&#39;ve added server.xml and JMSToolBox config.","body":"Thanks @Gas. I&#39;ve added server.xml and JMSToolBox config."}],"answers":[{"tags":[],"owner":{"account_id":4558101,"reputation":17722,"user_id":3701228,"display_name":"Gas"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1669112703,"creation_date":1669112703,"answer_id":74531054,"question_id":74514603,"body_markdown":"You have misconfiguration.\r\n\r\nYour JMS server is configured like this:\r\n\r\n    &lt;wasJmsEndpoint id=&quot;InboundJmsCommsEndpoint&quot;\r\n        wasJmsPort=&quot;9126&quot; wasJmsSSLPort=&quot;9127&quot; /&gt;\r\n\r\nSo your ports are 9126 for basic and 9127 for secure, so your connection should be:\r\n\r\n - `localhost:9126:BootstrapSecureMessaging` - for plain\r\n - `localhost:9127:BootstrapSecureMessaging` - for ssl port","title":"OpenLiberty not accepting JMS connection from JMSToolBox","body":"<p>You have misconfiguration.</p>\n<p>Your JMS server is configured like this:</p>\n<pre><code>&lt;wasJmsEndpoint id=&quot;InboundJmsCommsEndpoint&quot;\n    wasJmsPort=&quot;9126&quot; wasJmsSSLPort=&quot;9127&quot; /&gt;\n</code></pre>\n<p>So your ports are 9126 for basic and 9127 for secure, so your connection should be:</p>\n<ul>\n<li><code>localhost:9126:BootstrapSecureMessaging</code> - for plain</li>\n<li><code>localhost:9127:BootstrapSecureMessaging</code> - for ssl port</li>\n</ul>\n"}],"owner":{"account_id":119118,"reputation":6072,"user_id":310606,"accept_rate":74,"display_name":"John Deverall"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":200,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74531054,"answer_count":1,"score":0,"last_activity_date":1669230329,"creation_date":1669008546,"question_id":74514603,"body_markdown":"This is a continuation of what I&#39;m [attempting to achieve here][1], connecting JMSToolBox to OpenLiberty. \r\n\r\nI followed the instructions in the [previous question][1] successfully. \r\n\r\nI&#39;m getting the following in message.log in JMSToolBox when I attempt to connect to my JMS app on openliberty. \r\n\r\n[![Error in JMSToolBox][2]][2]\r\n\r\nWhen this happens, on the openliberty side the following gets included in message.log. \r\n\r\n    [21/11/22 16:32:11:341 NZDT] 00000031 com.ibm.ws.recoverylog.spi.RecoveryDirectorImpl              I CWRLS0010I: Performing recovery processing for local WebSphere server (myCoolServer).\r\n    [21/11/22 16:32:11:372 NZDT] 00000031 com.ibm.ws.recoverylog.spi.RecoveryDirectorImpl              I CWRLS0012I: All persistent services have been directed to perform recovery processing for this WebSphere server (MyCoolServer).\r\n    [21/11/22 16:32:11:372 NZDT] 0000006a com.ibm.tx.jta.impl.RecoveryManager                          I WTRN0135I: Transaction service recovering no transactions.\r\n    [21/11/22 16:32:11:414 NZDT] 00000031 com.ibm.ws.sib.utils.ras.SibMessage                          I  CWSIV0777I: A connection to messaging engine defaultME for destination jms/cool/queue/MyCoolNotificationIn on bus defaultBus has been successfully created.\r\n    [21/11/22 16:32:11:414 NZDT] 00000031 com.ibm.ws.sib.utils.ras.SibMessage                          I  CWSIV0556I: Connection to the Messaging Engine was successful. The message-driven bean with activation specification jms/cool/as/MyCoolNotificationInbound will now be able to receive the messages from destination jms/cool/queue/MyCoolNotificationIn.\r\n    [21/11/22 16:32:11:415 NZDT] 00000031 com.ibm.ws.jca.service.EndpointActivationService             I J2CA8801I: The message endpoint for activation specification jms/cool/as/MyCoolNotificationInbound and message driven bean application notification-manager#MyCoolNotificationService.jar# is activated.\r\n    [21/11/22 16:32:11:420 NZDT] 00000031 com.ibm.ws.sib.utils.ras.SibMessage                          I  CWSIV0777I: A connection to messaging engine defaultME for destination jms/cool/queue/ on bus defaultBus has been successfully created.\r\n    [21/11/22 16:32:11:420 NZDT] 00000031 com.ibm.ws.sib.utils.ras.SibMessage                          I  CWSIV0556I: Connection to the Messaging Engine was successful. The message-driven bean with activation specification jms/cool/as/ will now be able to receive the messages from destination jms/cool/queue/.\r\n    [21/11/22 16:32:11:420 NZDT] 00000031 com.ibm.ws.jca.service.EndpointActivationService             I J2CA8801I: The message endpoint for activation specification jms/cool/as/ and message driven bean application notification-manager#MyCoolNotificationService.jar#RecipientNotificationConsumer is activated.\r\n    [21/11/22 16:32:11:426 NZDT] 00000031 com.ibm.ws.sib.utils.ras.SibMessage                          I  CWSIV0777I: A connection to messaging engine defaultME for destination jms/cool/queue/ on bus defaultBus has been successfully created.\r\n    [21/11/22 16:32:11:426 NZDT] 00000031 com.ibm.ws.sib.utils.ras.SibMessage                          I  CWSIV0556I: Connection to the Messaging Engine was successful. The message-driven bean with activation specification jms/cool/as/ will now be able to receive the messages from destination jms/cool/queue/ .\r\n    [21/11/22 16:32:11:426 NZDT] 00000031 com.ibm.ws.jca.service.EndpointActivationService             I J2CA8801I: The message endpoint for activation specification jms/cool/as/ and message driven bean application notification-manager#MyCoolNotificationService.jar# is activated.\r\n    [21/11/22 16:32:11:432 NZDT] 00000031 com.ibm.ws.sib.utils.ras.SibMessage                          I  CWSIV0777I: A connection to messaging engine defaultME for destination jms/cool/queue/ on bus defaultBus has been successfully created.\r\n    [21/11/22 16:32:11:432 NZDT] 00000031 com.ibm.ws.sib.utils.ras.SibMessage                          I  CWSIV0556I: Connection to the Messaging Engine was successful. The message-driven bean with activation specification jms/cool/as/ will now be able to receive the messages from destination jms/cool/queue/ .\r\n    [21/11/22 16:32:11:432 NZDT] 00000031 com.ibm.ws.jca.service.EndpointActivationService             I J2CA8801I: The message endpoint for activation specification jms/cool/as/ and message driven bean application notification-manager#MyCoolNotificationService.jar# is activated.\r\n    [21/11/22 16:32:11:437 NZDT] 00000031 com.ibm.ws.sib.utils.ras.SibMessage                          I  CWSIV0777I: A connection to messaging engine defaultME for destination jms/cool/queue/ on bus defaultBus has been successfully created.\r\n    [21/11/22 16:32:11:437 NZDT] 00000031 com.ibm.ws.sib.utils.ras.SibMessage                          I  CWSIV0556I: Connection to the Messaging Engine was successful. The message-driven bean with activation specification jms/cool/as/ will now be able to receive the messages from destination jms/cool/queue/ .\r\n    [21/11/22 16:32:11:437 NZDT] 00000031 com.ibm.ws.jca.service.EndpointActivationService             I J2CA8801I: The message endpoint for activation specification jms/cool/as/ and message driven bean application notification-manager#MyCoolNotificationService.jar# is activated.\r\n    [21/11/22 16:32:11:444 NZDT] 00000031 com.ibm.ws.sib.utils.ras.SibMessage                          I  CWSIV0777I: A connection to messaging engine defaultME for destination jms/cool/queue/ on bus defaultBus has been successfully created.\r\n    [21/11/22 16:32:11:444 NZDT] 00000031 com.ibm.ws.sib.utils.ras.SibMessage                          I  CWSIV0556I: Connection to the Messaging Engine was successful. The message-driven bean with activation specification jms/cool/as/ will now be able to receive the messages from destination jms/cool/queue/ .\r\n    [21/11/22 16:32:11:444 NZDT] 00000031 com.ibm.ws.jca.service.EndpointActivationService             I J2CA8801I: The message endpoint for activation specification jms/cool/as/ and message driven bean application notification-manager#MyCoolNotificationService.jar#NotificationConsumer is activated.\r\n    [21/11/22 16:32:11:452 NZDT] 00000031 com.ibm.ws.kernel.feature.internal.FeatureManager            A CWWKF0012I: The server installed the following features: [adminCenter-1.0, appClientSupport-1.0, appSecurity-2.0, batch-1.0, beanValidation-1.1, cdi-1.2, concurrent-1.0, distributedMap-1.0, ejb-3.2, ejbHome-3.2, ejbLite-3.2, ejbPersistentTimer-3.2, ejbRemote-3.2, el-3.0, j2eeManagement-1.1, jacc-1.5, jaspic-1.1, javaMail-1.5, javaee-7.0, jaxb-2.2, jaxrs-2.0, jaxrsClient-2.0, jaxws-2.2, jca-1.7, jcaInboundSecurity-1.0, jdbc-4.1, jms-2.0, jmsMdb-3.2, jndi-1.0, jpa-2.1, jpaContainer-2.1, jsf-2.2, json-1.0, jsonp-1.0, jsp-2.3, managedBeans-1.0, mdb-3.2, monitor-1.0, mpConfig-1.4, mpMetrics-2.3, restConnector-2.0, servlet-3.1, ssl-1.0, transportSecurity-1.0, wasJmsClient-2.0, wasJmsSecurity-1.0, wasJmsServer-1.0, webProfile-7.0, websocket-1.1].\r\n    [21/11/22 16:32:11:452 NZDT] 00000031 com.ibm.ws.kernel.feature.internal.FeatureManager            I CWWKF0008I: Feature update completed in 10.158 seconds.\r\n    [21/11/22 16:32:11:452 NZDT] 00000031 com.ibm.ws.kernel.feature.internal.FeatureManager            A CWWKF0011I: The MyCoolServer server is ready to run a smarter planet. The MyCoolServer server started in 10.774 seconds.\r\n    [21/11/22 16:32:22:089 NZDT] 0000003e com.ibm.ws.logging.internal.impl.IncidentImpl                I FFDC1015I: An FFDC Incident has been created: &quot;com.ibm.wsspi.sib.core.exception.SIConnectionLostException: CWSIJ0053E: A network connection was terminated after the peer sent incorrectly formatted information. com.ibm.ws.sib.jfapchannel.impl.InboundTransmissionParser 00170002&quot; at ffdc_22.11.21_16.32.22.0.log\r\n    [21/11/22 16:32:22:143 NZDT] 00000074 com.ibm.ws.logging.internal.impl.IncidentImpl                I FFDC1015I: An FFDC Incident has been created: &quot;com.ibm.ws.sib.jfapchannel.JFapConnectionBrokenException: CWSIJ0051E: An unexpected condition caused a network connection from host 127.0.0.1 using chain InboundBasicMessaging to close. com.ibm.ws.sib.comms.server.GenericTransportReceiveListener.errorOccurred 3-001-0001&quot; at ffdc_22.11.21_16.32.22.1.log\r\n\r\nIn the log referred to by the above I get the following:\r\n\r\n    ------Start of DE processing------ = [21/11/22 16:22:34:728 NZDT]\r\n    Exception = com.ibm.ws.sib.jfapchannel.JFapConnectionBrokenException\r\n    Source = com.ibm.ws.sib.comms.server.GenericTransportReceiveListener.errorOccurred\r\n    probeid = 3-001-0001\r\n    Stack Dump = com.ibm.ws.sib.jfapchannel.JFapConnectionBrokenException: CWSIJ0051E: An unexpected condition caused a network connection from host 127.0.0.1 using chain InboundBasicMessaging to close.\r\n    \tat com.ibm.ws.sib.jfapchannel.server.impl.InboundConnection.invalidateImpl(InboundConnection.java:138)\r\n    \tat com.ibm.ws.sib.jfapchannel.impl.Connection.nonThreadSafeInvalidate(Connection.java:1186)\r\n    \tat com.ibm.ws.sib.jfapchannel.impl.Connection.invalidate(Connection.java:1164)\r\n    \tat com.ibm.ws.sib.jfapchannel.impl.InboundTransmissionParser.parse(InboundTransmissionParser.java:252)\r\n    \tat com.ibm.ws.sib.jfapchannel.impl.ConnectionReadCompletedCallback.complete(ConnectionReadCompletedCallback.java:190)\r\n    \tat com.ibm.ws.sib.jfapchannel.impl.Connection.startNewConversationGeneric(Connection.java:384)\r\n    \tat com.ibm.ws.sib.jfapchannel.server.impl.InboundConnection.startNewConversation(InboundConnection.java:105)\r\n    \tat com.ibm.ws.sib.jfapchannel.server.impl.JFapInboundConnLink.ready(JFapInboundConnLink.java:212)\r\n    \tat com.ibm.ws.tcpchannel.internal.NewConnectionInitialReadCallback.sendToDiscriminators(NewConnectionInitialReadCallback.java:167)\r\n    \tat com.ibm.ws.tcpchannel.internal.NewConnectionInitialReadCallback.complete(NewConnectionInitialReadCallback.java:75)\r\n    \tat com.ibm.ws.tcpchannel.internal.WorkQueueManager.requestComplete(WorkQueueManager.java:514)\r\n    \tat com.ibm.ws.tcpchannel.internal.WorkQueueManager.attemptIO(WorkQueueManager.java:584)\r\n    \tat com.ibm.ws.tcpchannel.internal.WorkQueueManager.workerRun(WorkQueueManager.java:968)\r\n    \tat com.ibm.ws.tcpchannel.internal.WorkQueueManager$Worker.run(WorkQueueManager.java:1057)\r\n    \tat com.ibm.ws.threading.internal.ExecutorServiceImpl$RunnableWrapper.run(ExecutorServiceImpl.java:245)\r\n    \tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1160)\r\n    \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)\r\n    \tat java.lang.Thread.run(Thread.java:825)\r\n    Caused by: com.ibm.wsspi.sib.core.exception.SIConnectionLostException: CWSIJ0053E: A network connection was terminated after the peer sent incorrectly formatted information.\r\n    \tat com.ibm.ws.sib.jfapchannel.impl.InboundTransmissionParser.parsePrimaryHeader(InboundTransmissionParser.java:282)\r\n    \tat com.ibm.ws.sib.jfapchannel.impl.InboundTransmissionParser.parse(InboundTransmissionParser.java:213)\r\n    \t... 14 more\r\n    \r\n    Dump of callerThis\r\n    Object type = com.ibm.ws.sib.comms.server.GenericTransportReceiveListener\r\n      CLASS_NAME = &quot;com.ibm.ws.sib.comms.server.GenericTransportReceiveListener&quot;\r\n      tc = class com.ibm.websphere.ras.TraceComponent@1d7ca9dc\r\n        strings[0] = &quot;TraceComponent[com.ibm.ws.sib.comms.server.GenericTransportReceiveListener,class com.ibm.ws.sib.comms.server.GenericTransportReceiveListener,[SIBCommunications],com.ibm.ws.sib.comms.CWSICMessages,null]&quot;\r\n      nls = class com.ibm.ejs.ras.TraceNLS@a16318c4\r\n        resolver = class com.ibm.ws.logging.internal.TraceNLSResolver@b415991e\r\n          tc = class com.ibm.websphere.ras.TraceComponent@ac5c1b4b\r\n          DEBUG_TRACE_NLS_PROPERTY = &quot;com.ibm.ejs.ras.debugTraceNLSResolver&quot;\r\n          debugTraceNLSResolver = false\r\n\r\nBelow is my server.xml\r\n\r\n    &lt;server description=&quot;MyCool Server EAR Server.xml&quot;&gt;\r\n    \t&lt;featureManager&gt;\r\n    \t\t&lt;feature&gt;javaee-7.0&lt;/feature&gt;\r\n    \t\t&lt;feature&gt;jpa-2.1&lt;/feature&gt;\r\n    \t\t&lt;feature&gt;wasJmsClient-2.0&lt;/feature&gt;\r\n    \t\t&lt;feature&gt;wasJmsServer-1.0&lt;/feature&gt;\r\n    \t\t&lt;feature&gt;jms-2.0&lt;/feature&gt;\r\n    \t\t&lt;feature&gt;jmsMdb-3.2&lt;/feature&gt;\r\n    \t\t&lt;feature&gt;jndi-1.0&lt;/feature&gt;\r\n    \t\t&lt;feature&gt;jca-1.7&lt;/feature&gt;\r\n    \t\t&lt;feature&gt;restConnector-2.0&lt;/feature&gt;\r\n    \t\t&lt;feature&gt;ssl-1.0&lt;/feature&gt;\r\n    \t\t&lt;feature&gt;transportSecurity-1.0&lt;/feature&gt;\r\n    \t\t&lt;feature&gt;appSecurity-2.0&lt;/feature&gt;\r\n    \t\t&lt;feature&gt;adminCenter-1.0&lt;/feature&gt;\r\n    \t\t&lt;feature&gt;mpMetrics-2.3&lt;/feature&gt;\r\n    \t&lt;/featureManager&gt;\r\n    \r\n    \t&lt;remoteFileAccess&gt;\r\n        \t&lt;writeDir&gt;${server.config.dir}&lt;/writeDir&gt;\r\n        &lt;/remoteFileAccess&gt;\r\n    \r\n    \t&lt;orb id=&quot;defaultOrb&quot; orbSSLInitTimeout=&quot;40&quot;&gt;\r\n    \t\t&lt;serverPolicy.csiv2&gt;\r\n    \t\t\t&lt;layers&gt;\r\n    \t\t\t\t&lt;attributeLayer identityAssertionEnabled=&quot;false&quot; /&gt;\r\n    \t\t\t\t&lt;authenticationLayer mechanisms=&quot;LTPA&quot;\r\n    \t\t\t\t\testablishTrustInClient=&quot;Supported&quot; /&gt;\r\n    \t\t\t\t&lt;transportLayer\r\n    \t\t\t\t\tsslEnabled=&quot;true&quot; /&gt;\r\n    \t\t\t&lt;/layers&gt;\r\n    \t\t&lt;/serverPolicy.csiv2&gt;\r\n    \t&lt;/orb&gt;\r\n    \t\r\n      &lt;!-- default SSL configuration is defaultSSLSettings --&gt;\r\n      &lt;sslDefault sslRef=&quot;defaultSSLSettings&quot; /&gt;\r\n      \r\n      &lt;ssl id=&quot;defaultSSLSettings&quot;\r\n           keyStoreRef=&quot;defaultKeyStore&quot;\r\n           clientAuthenticationSupported=&quot;true&quot; /&gt;\r\n      &lt;keyStore id=&quot;defaultKeyStore&quot;\r\n                location=&quot;keystore.jks&quot;\r\n                type=&quot;JKS&quot; password=&quot;defaultPWD&quot; /&gt;\r\n    \r\n    \t&lt;basicRegistry id=&quot;basic&quot; realm=&quot;coolRealm&quot;&gt;\r\n    \t\t&lt;user name=&quot;MyCoolUsername&quot; password=&quot;MyCoolPassword&quot; /&gt;\r\n    \t\t\t...\r\n    \t\t\r\n    \t\t&lt;group name=&quot;coolGroup&quot;&gt;\r\n    \t\t\t&lt;member name=&quot;coolMember&quot; /&gt;\r\n    \t\t\t...\r\n    \t\t&lt;/group&gt;\r\n    \t\t\r\n    \t&lt;/basicRegistry&gt;\r\n    \t\r\n    \t&lt;administrator-role&gt;\r\n    \t\t&lt;user&gt;admin&lt;/user&gt;\r\n    \t&lt;/administrator-role&gt;\r\n    \t&lt;reader-role&gt;\r\n    \t\t&lt;user&gt;reader&lt;/user&gt;\r\n    \t&lt;/reader-role&gt;\r\n    \r\n    \t&lt;!-- jndi-1.0 - https://www.ibm.com/docs/en/was-liberty/base?topic=dmdbwl-deploying-message-driven-beans-connect-embedded-messaging-server --&gt;\r\n    \r\n    \t&lt;!-- START JMS CONFIGURATION --&gt;\r\n    \r\n    \t&lt;wasJmsEndpoint id=&quot;InboundJmsCommsEndpoint&quot;\r\n    \t\twasJmsPort=&quot;9126&quot; wasJmsSSLPort=&quot;9127&quot; /&gt;\r\n    \r\n    \t&lt;connectionManager id=&quot;ConMgr3&quot; maxPoolSize=&quot;5&quot; /&gt;\r\n    \r\n    \t&lt;jmsQueueConnectionFactory\r\n    \t\tjndiName=&quot;jndi_JMS_BASE-QCF&quot; connectionManagerRef=&quot;ConMgr6&quot;&gt;\r\n    \t\t&lt;properties.wasJms /&gt;\r\n    \t&lt;/jmsQueueConnectionFactory&gt;\r\n    \r\n    \t&lt;connectionManager id=&quot;ConMgr6&quot; maxPoolSize=&quot;5&quot; /&gt;\r\n    \r\n    \t&lt;messagingEngine&gt;\r\n    \t\t... queues ....\r\n    \t&lt;/messagingEngine&gt;\r\n    \r\n    \t&lt;!-- RecipientNotificationConsumerCRELarge --&gt;\r\n    \t&lt;jmsQueue id=&quot;coolQueue&quot;\r\n    \t\t...\r\n    \t&lt;/jmsQueue&gt;\r\n    \t&lt;jmsActivationSpec id=&quot;xxx&quot;&gt;\r\n    \t\t...\r\n    \t&lt;/jmsActivationSpec&gt;\r\n    \r\n    \t&lt;enterpriseApplication id=&quot;cool-manager&quot;\r\n    \t\ttype=&quot;ear&quot; location=&quot;MyCoolServiceEAR.ear&quot;\r\n    \t\tname=&quot;myCoolService&quot; contextRoot=&quot;/&quot; /&gt;\r\n    \r\n    \t&lt;httpEndpoint host=&quot;*&quot; httpPort=&quot;${default.http.port}&quot;\r\n    \t\thttpsPort=&quot;${default.https.port}&quot; id=&quot;defaultHttpEndpoint&quot; /&gt;\r\n    &lt;/server&gt;\r\n\r\nHere&#39;s my JMSToolBox configuration\r\n\r\n[![JMSToolBox Configuration][3]][3]\r\n\r\nAnd the properties tab\r\n\r\n[![enter image description here][4]][4]\r\n\r\nI have a few theories about why this may be happening. However, they may be wild goose chases, so I&#39;m hoping to get a steer from someone out there who knows this stuff well. \r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/74340286/connecting-jmstoolbox-to-jms-app-on-openliberty/74346308?noredirect=1#comment131313721_74346308\r\n  [2]: https://i.stack.imgur.com/SenY4.png\r\n  [3]: https://i.stack.imgur.com/c3UPZ.png\r\n  [4]: https://i.stack.imgur.com/YF8mA.png","title":"OpenLiberty not accepting JMS connection from JMSToolBox","body":"<p>This is a continuation of what I'm <a href=\"https://stackoverflow.com/questions/74340286/connecting-jmstoolbox-to-jms-app-on-openliberty/74346308?noredirect=1#comment131313721_74346308\">attempting to achieve here</a>, connecting JMSToolBox to OpenLiberty.</p>\n<p>I followed the instructions in the <a href=\"https://stackoverflow.com/questions/74340286/connecting-jmstoolbox-to-jms-app-on-openliberty/74346308?noredirect=1#comment131313721_74346308\">previous question</a> successfully.</p>\n<p>I'm getting the following in message.log in JMSToolBox when I attempt to connect to my JMS app on openliberty.</p>\n<p><a href=\"https://i.stack.imgur.com/SenY4.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/SenY4.png\" alt=\"Error in JMSToolBox\" /></a></p>\n<p>When this happens, on the openliberty side the following gets included in message.log.</p>\n<pre><code>[21/11/22 16:32:11:341 NZDT] 00000031 com.ibm.ws.recoverylog.spi.RecoveryDirectorImpl              I CWRLS0010I: Performing recovery processing for local WebSphere server (myCoolServer).\n[21/11/22 16:32:11:372 NZDT] 00000031 com.ibm.ws.recoverylog.spi.RecoveryDirectorImpl              I CWRLS0012I: All persistent services have been directed to perform recovery processing for this WebSphere server (MyCoolServer).\n[21/11/22 16:32:11:372 NZDT] 0000006a com.ibm.tx.jta.impl.RecoveryManager                          I WTRN0135I: Transaction service recovering no transactions.\n[21/11/22 16:32:11:414 NZDT] 00000031 com.ibm.ws.sib.utils.ras.SibMessage                          I  CWSIV0777I: A connection to messaging engine defaultME for destination jms/cool/queue/MyCoolNotificationIn on bus defaultBus has been successfully created.\n[21/11/22 16:32:11:414 NZDT] 00000031 com.ibm.ws.sib.utils.ras.SibMessage                          I  CWSIV0556I: Connection to the Messaging Engine was successful. The message-driven bean with activation specification jms/cool/as/MyCoolNotificationInbound will now be able to receive the messages from destination jms/cool/queue/MyCoolNotificationIn.\n[21/11/22 16:32:11:415 NZDT] 00000031 com.ibm.ws.jca.service.EndpointActivationService             I J2CA8801I: The message endpoint for activation specification jms/cool/as/MyCoolNotificationInbound and message driven bean application notification-manager#MyCoolNotificationService.jar# is activated.\n[21/11/22 16:32:11:420 NZDT] 00000031 com.ibm.ws.sib.utils.ras.SibMessage                          I  CWSIV0777I: A connection to messaging engine defaultME for destination jms/cool/queue/ on bus defaultBus has been successfully created.\n[21/11/22 16:32:11:420 NZDT] 00000031 com.ibm.ws.sib.utils.ras.SibMessage                          I  CWSIV0556I: Connection to the Messaging Engine was successful. The message-driven bean with activation specification jms/cool/as/ will now be able to receive the messages from destination jms/cool/queue/.\n[21/11/22 16:32:11:420 NZDT] 00000031 com.ibm.ws.jca.service.EndpointActivationService             I J2CA8801I: The message endpoint for activation specification jms/cool/as/ and message driven bean application notification-manager#MyCoolNotificationService.jar#RecipientNotificationConsumer is activated.\n[21/11/22 16:32:11:426 NZDT] 00000031 com.ibm.ws.sib.utils.ras.SibMessage                          I  CWSIV0777I: A connection to messaging engine defaultME for destination jms/cool/queue/ on bus defaultBus has been successfully created.\n[21/11/22 16:32:11:426 NZDT] 00000031 com.ibm.ws.sib.utils.ras.SibMessage                          I  CWSIV0556I: Connection to the Messaging Engine was successful. The message-driven bean with activation specification jms/cool/as/ will now be able to receive the messages from destination jms/cool/queue/ .\n[21/11/22 16:32:11:426 NZDT] 00000031 com.ibm.ws.jca.service.EndpointActivationService             I J2CA8801I: The message endpoint for activation specification jms/cool/as/ and message driven bean application notification-manager#MyCoolNotificationService.jar# is activated.\n[21/11/22 16:32:11:432 NZDT] 00000031 com.ibm.ws.sib.utils.ras.SibMessage                          I  CWSIV0777I: A connection to messaging engine defaultME for destination jms/cool/queue/ on bus defaultBus has been successfully created.\n[21/11/22 16:32:11:432 NZDT] 00000031 com.ibm.ws.sib.utils.ras.SibMessage                          I  CWSIV0556I: Connection to the Messaging Engine was successful. The message-driven bean with activation specification jms/cool/as/ will now be able to receive the messages from destination jms/cool/queue/ .\n[21/11/22 16:32:11:432 NZDT] 00000031 com.ibm.ws.jca.service.EndpointActivationService             I J2CA8801I: The message endpoint for activation specification jms/cool/as/ and message driven bean application notification-manager#MyCoolNotificationService.jar# is activated.\n[21/11/22 16:32:11:437 NZDT] 00000031 com.ibm.ws.sib.utils.ras.SibMessage                          I  CWSIV0777I: A connection to messaging engine defaultME for destination jms/cool/queue/ on bus defaultBus has been successfully created.\n[21/11/22 16:32:11:437 NZDT] 00000031 com.ibm.ws.sib.utils.ras.SibMessage                          I  CWSIV0556I: Connection to the Messaging Engine was successful. The message-driven bean with activation specification jms/cool/as/ will now be able to receive the messages from destination jms/cool/queue/ .\n[21/11/22 16:32:11:437 NZDT] 00000031 com.ibm.ws.jca.service.EndpointActivationService             I J2CA8801I: The message endpoint for activation specification jms/cool/as/ and message driven bean application notification-manager#MyCoolNotificationService.jar# is activated.\n[21/11/22 16:32:11:444 NZDT] 00000031 com.ibm.ws.sib.utils.ras.SibMessage                          I  CWSIV0777I: A connection to messaging engine defaultME for destination jms/cool/queue/ on bus defaultBus has been successfully created.\n[21/11/22 16:32:11:444 NZDT] 00000031 com.ibm.ws.sib.utils.ras.SibMessage                          I  CWSIV0556I: Connection to the Messaging Engine was successful. The message-driven bean with activation specification jms/cool/as/ will now be able to receive the messages from destination jms/cool/queue/ .\n[21/11/22 16:32:11:444 NZDT] 00000031 com.ibm.ws.jca.service.EndpointActivationService             I J2CA8801I: The message endpoint for activation specification jms/cool/as/ and message driven bean application notification-manager#MyCoolNotificationService.jar#NotificationConsumer is activated.\n[21/11/22 16:32:11:452 NZDT] 00000031 com.ibm.ws.kernel.feature.internal.FeatureManager            A CWWKF0012I: The server installed the following features: [adminCenter-1.0, appClientSupport-1.0, appSecurity-2.0, batch-1.0, beanValidation-1.1, cdi-1.2, concurrent-1.0, distributedMap-1.0, ejb-3.2, ejbHome-3.2, ejbLite-3.2, ejbPersistentTimer-3.2, ejbRemote-3.2, el-3.0, j2eeManagement-1.1, jacc-1.5, jaspic-1.1, javaMail-1.5, javaee-7.0, jaxb-2.2, jaxrs-2.0, jaxrsClient-2.0, jaxws-2.2, jca-1.7, jcaInboundSecurity-1.0, jdbc-4.1, jms-2.0, jmsMdb-3.2, jndi-1.0, jpa-2.1, jpaContainer-2.1, jsf-2.2, json-1.0, jsonp-1.0, jsp-2.3, managedBeans-1.0, mdb-3.2, monitor-1.0, mpConfig-1.4, mpMetrics-2.3, restConnector-2.0, servlet-3.1, ssl-1.0, transportSecurity-1.0, wasJmsClient-2.0, wasJmsSecurity-1.0, wasJmsServer-1.0, webProfile-7.0, websocket-1.1].\n[21/11/22 16:32:11:452 NZDT] 00000031 com.ibm.ws.kernel.feature.internal.FeatureManager            I CWWKF0008I: Feature update completed in 10.158 seconds.\n[21/11/22 16:32:11:452 NZDT] 00000031 com.ibm.ws.kernel.feature.internal.FeatureManager            A CWWKF0011I: The MyCoolServer server is ready to run a smarter planet. The MyCoolServer server started in 10.774 seconds.\n[21/11/22 16:32:22:089 NZDT] 0000003e com.ibm.ws.logging.internal.impl.IncidentImpl                I FFDC1015I: An FFDC Incident has been created: &quot;com.ibm.wsspi.sib.core.exception.SIConnectionLostException: CWSIJ0053E: A network connection was terminated after the peer sent incorrectly formatted information. com.ibm.ws.sib.jfapchannel.impl.InboundTransmissionParser 00170002&quot; at ffdc_22.11.21_16.32.22.0.log\n[21/11/22 16:32:22:143 NZDT] 00000074 com.ibm.ws.logging.internal.impl.IncidentImpl                I FFDC1015I: An FFDC Incident has been created: &quot;com.ibm.ws.sib.jfapchannel.JFapConnectionBrokenException: CWSIJ0051E: An unexpected condition caused a network connection from host 127.0.0.1 using chain InboundBasicMessaging to close. com.ibm.ws.sib.comms.server.GenericTransportReceiveListener.errorOccurred 3-001-0001&quot; at ffdc_22.11.21_16.32.22.1.log\n</code></pre>\n<p>In the log referred to by the above I get the following:</p>\n<pre><code>------Start of DE processing------ = [21/11/22 16:22:34:728 NZDT]\nException = com.ibm.ws.sib.jfapchannel.JFapConnectionBrokenException\nSource = com.ibm.ws.sib.comms.server.GenericTransportReceiveListener.errorOccurred\nprobeid = 3-001-0001\nStack Dump = com.ibm.ws.sib.jfapchannel.JFapConnectionBrokenException: CWSIJ0051E: An unexpected condition caused a network connection from host 127.0.0.1 using chain InboundBasicMessaging to close.\n    at com.ibm.ws.sib.jfapchannel.server.impl.InboundConnection.invalidateImpl(InboundConnection.java:138)\n    at com.ibm.ws.sib.jfapchannel.impl.Connection.nonThreadSafeInvalidate(Connection.java:1186)\n    at com.ibm.ws.sib.jfapchannel.impl.Connection.invalidate(Connection.java:1164)\n    at com.ibm.ws.sib.jfapchannel.impl.InboundTransmissionParser.parse(InboundTransmissionParser.java:252)\n    at com.ibm.ws.sib.jfapchannel.impl.ConnectionReadCompletedCallback.complete(ConnectionReadCompletedCallback.java:190)\n    at com.ibm.ws.sib.jfapchannel.impl.Connection.startNewConversationGeneric(Connection.java:384)\n    at com.ibm.ws.sib.jfapchannel.server.impl.InboundConnection.startNewConversation(InboundConnection.java:105)\n    at com.ibm.ws.sib.jfapchannel.server.impl.JFapInboundConnLink.ready(JFapInboundConnLink.java:212)\n    at com.ibm.ws.tcpchannel.internal.NewConnectionInitialReadCallback.sendToDiscriminators(NewConnectionInitialReadCallback.java:167)\n    at com.ibm.ws.tcpchannel.internal.NewConnectionInitialReadCallback.complete(NewConnectionInitialReadCallback.java:75)\n    at com.ibm.ws.tcpchannel.internal.WorkQueueManager.requestComplete(WorkQueueManager.java:514)\n    at com.ibm.ws.tcpchannel.internal.WorkQueueManager.attemptIO(WorkQueueManager.java:584)\n    at com.ibm.ws.tcpchannel.internal.WorkQueueManager.workerRun(WorkQueueManager.java:968)\n    at com.ibm.ws.tcpchannel.internal.WorkQueueManager$Worker.run(WorkQueueManager.java:1057)\n    at com.ibm.ws.threading.internal.ExecutorServiceImpl$RunnableWrapper.run(ExecutorServiceImpl.java:245)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1160)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)\n    at java.lang.Thread.run(Thread.java:825)\nCaused by: com.ibm.wsspi.sib.core.exception.SIConnectionLostException: CWSIJ0053E: A network connection was terminated after the peer sent incorrectly formatted information.\n    at com.ibm.ws.sib.jfapchannel.impl.InboundTransmissionParser.parsePrimaryHeader(InboundTransmissionParser.java:282)\n    at com.ibm.ws.sib.jfapchannel.impl.InboundTransmissionParser.parse(InboundTransmissionParser.java:213)\n    ... 14 more\n\nDump of callerThis\nObject type = com.ibm.ws.sib.comms.server.GenericTransportReceiveListener\n  CLASS_NAME = &quot;com.ibm.ws.sib.comms.server.GenericTransportReceiveListener&quot;\n  tc = class com.ibm.websphere.ras.TraceComponent@1d7ca9dc\n    strings[0] = &quot;TraceComponent[com.ibm.ws.sib.comms.server.GenericTransportReceiveListener,class com.ibm.ws.sib.comms.server.GenericTransportReceiveListener,[SIBCommunications],com.ibm.ws.sib.comms.CWSICMessages,null]&quot;\n  nls = class com.ibm.ejs.ras.TraceNLS@a16318c4\n    resolver = class com.ibm.ws.logging.internal.TraceNLSResolver@b415991e\n      tc = class com.ibm.websphere.ras.TraceComponent@ac5c1b4b\n      DEBUG_TRACE_NLS_PROPERTY = &quot;com.ibm.ejs.ras.debugTraceNLSResolver&quot;\n      debugTraceNLSResolver = false\n</code></pre>\n<p>Below is my server.xml</p>\n<pre><code>&lt;server description=&quot;MyCool Server EAR Server.xml&quot;&gt;\n    &lt;featureManager&gt;\n        &lt;feature&gt;javaee-7.0&lt;/feature&gt;\n        &lt;feature&gt;jpa-2.1&lt;/feature&gt;\n        &lt;feature&gt;wasJmsClient-2.0&lt;/feature&gt;\n        &lt;feature&gt;wasJmsServer-1.0&lt;/feature&gt;\n        &lt;feature&gt;jms-2.0&lt;/feature&gt;\n        &lt;feature&gt;jmsMdb-3.2&lt;/feature&gt;\n        &lt;feature&gt;jndi-1.0&lt;/feature&gt;\n        &lt;feature&gt;jca-1.7&lt;/feature&gt;\n        &lt;feature&gt;restConnector-2.0&lt;/feature&gt;\n        &lt;feature&gt;ssl-1.0&lt;/feature&gt;\n        &lt;feature&gt;transportSecurity-1.0&lt;/feature&gt;\n        &lt;feature&gt;appSecurity-2.0&lt;/feature&gt;\n        &lt;feature&gt;adminCenter-1.0&lt;/feature&gt;\n        &lt;feature&gt;mpMetrics-2.3&lt;/feature&gt;\n    &lt;/featureManager&gt;\n\n    &lt;remoteFileAccess&gt;\n        &lt;writeDir&gt;${server.config.dir}&lt;/writeDir&gt;\n    &lt;/remoteFileAccess&gt;\n\n    &lt;orb id=&quot;defaultOrb&quot; orbSSLInitTimeout=&quot;40&quot;&gt;\n        &lt;serverPolicy.csiv2&gt;\n            &lt;layers&gt;\n                &lt;attributeLayer identityAssertionEnabled=&quot;false&quot; /&gt;\n                &lt;authenticationLayer mechanisms=&quot;LTPA&quot;\n                    establishTrustInClient=&quot;Supported&quot; /&gt;\n                &lt;transportLayer\n                    sslEnabled=&quot;true&quot; /&gt;\n            &lt;/layers&gt;\n        &lt;/serverPolicy.csiv2&gt;\n    &lt;/orb&gt;\n    \n  &lt;!-- default SSL configuration is defaultSSLSettings --&gt;\n  &lt;sslDefault sslRef=&quot;defaultSSLSettings&quot; /&gt;\n  \n  &lt;ssl id=&quot;defaultSSLSettings&quot;\n       keyStoreRef=&quot;defaultKeyStore&quot;\n       clientAuthenticationSupported=&quot;true&quot; /&gt;\n  &lt;keyStore id=&quot;defaultKeyStore&quot;\n            location=&quot;keystore.jks&quot;\n            type=&quot;JKS&quot; password=&quot;defaultPWD&quot; /&gt;\n\n    &lt;basicRegistry id=&quot;basic&quot; realm=&quot;coolRealm&quot;&gt;\n        &lt;user name=&quot;MyCoolUsername&quot; password=&quot;MyCoolPassword&quot; /&gt;\n            ...\n        \n        &lt;group name=&quot;coolGroup&quot;&gt;\n            &lt;member name=&quot;coolMember&quot; /&gt;\n            ...\n        &lt;/group&gt;\n        \n    &lt;/basicRegistry&gt;\n    \n    &lt;administrator-role&gt;\n        &lt;user&gt;admin&lt;/user&gt;\n    &lt;/administrator-role&gt;\n    &lt;reader-role&gt;\n        &lt;user&gt;reader&lt;/user&gt;\n    &lt;/reader-role&gt;\n\n    &lt;!-- jndi-1.0 - https://www.ibm.com/docs/en/was-liberty/base?topic=dmdbwl-deploying-message-driven-beans-connect-embedded-messaging-server --&gt;\n\n    &lt;!-- START JMS CONFIGURATION --&gt;\n\n    &lt;wasJmsEndpoint id=&quot;InboundJmsCommsEndpoint&quot;\n        wasJmsPort=&quot;9126&quot; wasJmsSSLPort=&quot;9127&quot; /&gt;\n\n    &lt;connectionManager id=&quot;ConMgr3&quot; maxPoolSize=&quot;5&quot; /&gt;\n\n    &lt;jmsQueueConnectionFactory\n        jndiName=&quot;jndi_JMS_BASE-QCF&quot; connectionManagerRef=&quot;ConMgr6&quot;&gt;\n        &lt;properties.wasJms /&gt;\n    &lt;/jmsQueueConnectionFactory&gt;\n\n    &lt;connectionManager id=&quot;ConMgr6&quot; maxPoolSize=&quot;5&quot; /&gt;\n\n    &lt;messagingEngine&gt;\n        ... queues ....\n    &lt;/messagingEngine&gt;\n\n    &lt;!-- RecipientNotificationConsumerCRELarge --&gt;\n    &lt;jmsQueue id=&quot;coolQueue&quot;\n        ...\n    &lt;/jmsQueue&gt;\n    &lt;jmsActivationSpec id=&quot;xxx&quot;&gt;\n        ...\n    &lt;/jmsActivationSpec&gt;\n\n    &lt;enterpriseApplication id=&quot;cool-manager&quot;\n        type=&quot;ear&quot; location=&quot;MyCoolServiceEAR.ear&quot;\n        name=&quot;myCoolService&quot; contextRoot=&quot;/&quot; /&gt;\n\n    &lt;httpEndpoint host=&quot;*&quot; httpPort=&quot;${default.http.port}&quot;\n        httpsPort=&quot;${default.https.port}&quot; id=&quot;defaultHttpEndpoint&quot; /&gt;\n&lt;/server&gt;\n</code></pre>\n<p>Here's my JMSToolBox configuration</p>\n<p><a href=\"https://i.stack.imgur.com/c3UPZ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/c3UPZ.png\" alt=\"JMSToolBox Configuration\" /></a></p>\n<p>And the properties tab</p>\n<p><a href=\"https://i.stack.imgur.com/YF8mA.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/YF8mA.png\" alt=\"enter image description here\" /></a></p>\n<p>I have a few theories about why this may be happening. However, they may be wild goose chases, so I'm hoping to get a steer from someone out there who knows this stuff well.</p>\n"},{"tags":["java","spring","api","web-services","soap"],"owner":{"account_id":25913824,"reputation":11,"user_id":19637497,"display_name":"ron"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":51,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1669230313,"creation_date":1669230313,"question_id":74551866,"body_markdown":"In my current soap API,the response is coming in single line as a string. I need to split the response in three part in xml format.\r\n\r\nFor eg:- current scenario\r\n\\&lt;return\\&gt;Unique\\~status\\~data\\&lt;/return\\&gt;\r\nRequired below format\r\n\r\n\r\nreturn\\&gt;\r\n\r\n1. \\&lt;unique\\&gt;1233\\&lt;/unique\\&gt;\r\n\r\n2. \\&lt;status\\&gt;success\\&lt;/status\\&gt;\r\n\r\n3. \\&lt;data\\&gt;this is the data\\&lt;/data\\&gt;\r\n   \\&lt;/return\\&gt;\r\n\r\nPlease suggest.Thanks","title":"How to include a XML Tag with in the SOAP Response","body":"<p>In my current soap API,the response is coming in single line as a string. I need to split the response in three part in xml format.</p>\n<p>For eg:- current scenario\n&lt;return&gt;Unique~status~data&lt;/return&gt;\nRequired below format</p>\n<p>return&gt;</p>\n<ol>\n<li><p>&lt;unique&gt;1233&lt;/unique&gt;</p>\n</li>\n<li><p>&lt;status&gt;success&lt;/status&gt;</p>\n</li>\n<li><p>&lt;data&gt;this is the data&lt;/data&gt;\n&lt;/return&gt;</p>\n</li>\n</ol>\n<p>Please suggest.Thanks</p>\n"},{"tags":["java","visual-studio-code","intellij-idea","coding-style"],"comments":[{"owner":{"account_id":5168089,"reputation":26701,"user_id":4137489,"accept_rate":100,"display_name":"marstran"},"score":2,"creation_date":1666038443,"post_id":74102858,"comment_id":130836461,"body_markdown":"You could take a look at Editorconfig: https://editorconfig.org/","body":"You could take a look at Editorconfig: <a href=\"https://editorconfig.org/\" rel=\"nofollow noreferrer\">editorconfig.org</a>"},{"owner":{"account_id":72095,"reputation":18817,"user_id":208273,"display_name":"Ryan M"},"score":0,"creation_date":1666066004,"post_id":74102858,"comment_id":130841215,"body_markdown":"It might help to clarify what sorts of things are being formatted incorrectly.","body":"It might help to clarify what sorts of things are being formatted incorrectly."},{"owner":{"account_id":19257961,"reputation":1,"user_id":14074463,"display_name":"Simon Walenkamp"},"score":0,"creation_date":1666091347,"post_id":74102858,"comment_id":130848240,"body_markdown":"@RyanM Simple stuff like tab size and indentation.","body":"@RyanM Simple stuff like tab size and indentation."}],"answers":[{"comments":[{"owner":{"account_id":72095,"reputation":18817,"user_id":208273,"display_name":"Ryan M"},"score":0,"creation_date":1666065940,"post_id":74103053,"comment_id":130841205,"body_markdown":"From the question: *&quot;I have tried to use .editorconfig (works in VSCode with extention. IntelliJ has native support)&quot;*","body":"From the question: <i>&quot;I have tried to use .editorconfig (works in VSCode with extention. IntelliJ has native support)&quot;</i>"},{"owner":{"account_id":72095,"reputation":18817,"user_id":208273,"display_name":"Ryan M"},"score":1,"creation_date":1666066316,"post_id":74103053,"comment_id":130841266,"body_markdown":"In general, I think you&#39;re correct that EditorConfig is the best solution one is likely to find.  However, that doesn&#39;t address the asker&#39;s statement that it doesn&#39;t work for them (although it&#39;s unclear what exactly it&#39;s failing to format consistently).","body":"In general, I think you&#39;re correct that EditorConfig is the best solution one is likely to find.  However, that doesn&#39;t address the asker&#39;s statement that it doesn&#39;t work for them (although it&#39;s unclear what exactly it&#39;s failing to format consistently)."},{"owner":{"account_id":19257961,"reputation":1,"user_id":14074463,"display_name":"Simon Walenkamp"},"score":0,"creation_date":1666091490,"post_id":74103053,"comment_id":130848294,"body_markdown":"As @RyanM mentioned, i already tried this solution. I exported the default profile in IntelliJ and imported it in VSCode (through the extention), but formatting a given file resulted in changes in VSCode.","body":"As @RyanM mentioned, i already tried this solution. I exported the default profile in IntelliJ and imported it in VSCode (through the extention), but formatting a given file resulted in changes in VSCode."}],"tags":[],"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"comment_count":3,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1666065690,"creation_date":1666039486,"answer_id":74103053,"question_id":74102858,"body_markdown":"# EditorConfig\r\n\r\nAs marstran noted in [a comment](https://stackoverflow.com/questions/74102858/is-it-possible-to-use-same-java-code-style-in-multiple-code-editors#comment130836461_74102858), [EditorConfig][1] is an attempt at standardizing those settings.\r\n\r\n - IntelliJ supports EditorConfig; see [this page][2].\r\n - VisualStudio supports EditorConfig.\r\n - VisualStudio Code supports EditorConfig through a plug-in. \r\n\r\n\r\n  [1]: https://editorconfig.org/\r\n  [2]: https://www.jetbrains.com/idea/guide/tutorials/reformatting-code/working-with-editor-configs/","title":"Is it possible to use same Java code style in multiple code editors?","body":"<h1>EditorConfig</h1>\n<p>As marstran noted in <a href=\"https://stackoverflow.com/questions/74102858/is-it-possible-to-use-same-java-code-style-in-multiple-code-editors#comment130836461_74102858\">a comment</a>, <a href=\"https://editorconfig.org/\" rel=\"nofollow noreferrer\">EditorConfig</a> is an attempt at standardizing those settings.</p>\n<ul>\n<li>IntelliJ supports EditorConfig; see <a href=\"https://www.jetbrains.com/idea/guide/tutorials/reformatting-code/working-with-editor-configs/\" rel=\"nofollow noreferrer\">this page</a>.</li>\n<li>VisualStudio supports EditorConfig.</li>\n<li>VisualStudio Code supports EditorConfig through a plug-in.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":4244861,"reputation":171,"user_id":3473837,"display_name":"rchapin"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669229523,"creation_date":1669229523,"answer_id":74551738,"question_id":74102858,"body_markdown":"It seems as though the answer is &quot;no&quot; depending on the IDEs that your team uses.\r\n\r\nThe TLDR; is that both **VSCode** and **Intellij** interpret Eclipse based style xml files differently.\r\n\r\nI dug into this today and it seems that the root of the problem is how various IDEs interpret the rules defined in the xml style guides.  I tried the following with VSCode, IntelliJ Ultimate Edition, and Eclipse (all of which were the latest versions as of the writing of this post):\r\n\r\n - Configured VSCode to use the Google style guide by adding the following to the user&#39;s ```settings.json```\r\n   ```\r\n   &quot;java.format.settings.url&quot;: &quot;https://raw.githubusercontent.com/google/styleguide/gh-pages/eclipse-java-google-style.xml&quot;,\r\n   ```\r\n - Imported the same style guide into Intellij\r\n - Imported the same style guide into Eclipse\r\n - For each IDE, took a sample Java class and reformatted the code\r\n\r\nBoth Eclipse and VSCode reformatted the code exactly the same way.  Intellij interpreted the xml style differently resulting in the following.  **VSCode formatting is on the left and Intellij is on the right.**\r\n\r\n[![enter image description here][1]][1]\r\n\r\nIt seems that without digging through the Intellij source code and applying changes such that it will then interpret the style xml the same as the other IDEs then there is not going to be an easy way to ensure that these two IDEs (and perhaps others) apply code formatting in exactly the same way.\r\n\r\n \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/vWgsL.png","title":"Is it possible to use same Java code style in multiple code editors?","body":"<p>It seems as though the answer is &quot;no&quot; depending on the IDEs that your team uses.</p>\n<p>The TLDR; is that both <strong>VSCode</strong> and <strong>Intellij</strong> interpret Eclipse based style xml files differently.</p>\n<p>I dug into this today and it seems that the root of the problem is how various IDEs interpret the rules defined in the xml style guides.  I tried the following with VSCode, IntelliJ Ultimate Edition, and Eclipse (all of which were the latest versions as of the writing of this post):</p>\n<ul>\n<li>Configured VSCode to use the Google style guide by adding the following to the user's <code>settings.json</code>\n<pre><code>&quot;java.format.settings.url&quot;: &quot;https://raw.githubusercontent.com/google/styleguide/gh-pages/eclipse-java-google-style.xml&quot;,\n</code></pre>\n</li>\n<li>Imported the same style guide into Intellij</li>\n<li>Imported the same style guide into Eclipse</li>\n<li>For each IDE, took a sample Java class and reformatted the code</li>\n</ul>\n<p>Both Eclipse and VSCode reformatted the code exactly the same way.  Intellij interpreted the xml style differently resulting in the following.  <strong>VSCode formatting is on the left and Intellij is on the right.</strong></p>\n<p><a href=\"https://i.stack.imgur.com/vWgsL.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/vWgsL.png\" alt=\"enter image description here\" /></a></p>\n<p>It seems that without digging through the Intellij source code and applying changes such that it will then interpret the style xml the same as the other IDEs then there is not going to be an easy way to ensure that these two IDEs (and perhaps others) apply code formatting in exactly the same way.</p>\n"}],"owner":{"account_id":19257961,"reputation":1,"user_id":14074463,"display_name":"Simon Walenkamp"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":659,"favorite_count":0,"down_vote_count":5,"up_vote_count":1,"answer_count":2,"score":-4,"last_activity_date":1669229523,"creation_date":1666038288,"question_id":74102858,"body_markdown":"I&#39;m currently working on a Java project where multiple developers are using different code editors. Some use VSCode while others use IntelliJ. I have been looking into a way for all devs to use the same code style config without any luck.\r\nI have tried to use .editorconfig (works in VSCode with extention. IntelliJ has native support)\r\n\r\nTried using the Google Java Code Style XML. (works in VSCode with extention. IntelliJ has native support)\r\n(https://github.com/google/styleguide/blob/gh-pages/eclipse-java-google-style.xml)\r\n\r\nEvery solution results in VSCode not formatting a particular file the same way IntelliJ does.\r\n\r\nA quick google search did not help.\r\n\r\nHow can I, as a Java developer, manage code style in large projects where multiple devs use a variety of code editors?","title":"Is it possible to use same Java code style in multiple code editors?","body":"<p>I'm currently working on a Java project where multiple developers are using different code editors. Some use VSCode while others use IntelliJ. I have been looking into a way for all devs to use the same code style config without any luck.\nI have tried to use .editorconfig (works in VSCode with extention. IntelliJ has native support)</p>\n<p>Tried using the Google Java Code Style XML. (works in VSCode with extention. IntelliJ has native support)\n(<a href=\"https://github.com/google/styleguide/blob/gh-pages/eclipse-java-google-style.xml\" rel=\"nofollow noreferrer\">https://github.com/google/styleguide/blob/gh-pages/eclipse-java-google-style.xml</a>)</p>\n<p>Every solution results in VSCode not formatting a particular file the same way IntelliJ does.</p>\n<p>A quick google search did not help.</p>\n<p>How can I, as a Java developer, manage code style in large projects where multiple devs use a variety of code editors?</p>\n"},{"tags":["java","multithreading","process","java-threads"],"comments":[{"owner":{"account_id":372293,"reputation":180467,"user_id":721269,"accept_rate":100,"display_name":"David Schwartz"},"score":4,"creation_date":1669229801,"post_id":74551728,"comment_id":131599828,"body_markdown":"Any time you find yourself wanting to reach into a thread from the outside and force it to do something, you are thinking about the problem wrong. Code the threads to use the amount of memory you want them to use and if a thread detects that it is using more memory than you think it should use, have it free some, terminate itself, or do whatever you think is write. Code the threads to do only what you want them to do so you don&#39;t need to &#39;reach in from the oustide&#39; and coerce them.","body":"Any time you find yourself wanting to reach into a thread from the outside and force it to do something, you are thinking about the problem wrong. Code the threads to use the amount of memory you want them to use and if a thread detects that it is using more memory than you think it should use, have it free some, terminate itself, or do whatever you think is write. Code the threads to do only what you want them to do so you don&#39;t need to &#39;reach in from the oustide&#39; and coerce them."},{"owner":{"account_id":18936940,"reputation":95,"user_id":13817797,"display_name":"Pradip Sodha"},"score":0,"creation_date":1669267594,"post_id":74551728,"comment_id":131606851,"body_markdown":"sounds good, but my threads actually retrieve result sets (size depends on the user query, it can be 10 rows or 1M rows), and things are snowflake JDBC don&#39;t support cursor, so it will bring all data to thread and due to that thread other jobs will be aborted, I just want to make sure other jobs don&#39;t get killed, whether it&#39;s archive by outside code and some in-built feature","body":"sounds good, but my threads actually retrieve result sets (size depends on the user query, it can be 10 rows or 1M rows), and things are snowflake JDBC don&#39;t support cursor, so it will bring all data to thread and due to that thread other jobs will be aborted, I just want to make sure other jobs don&#39;t get killed, whether it&#39;s archive by outside code and some in-built feature"},{"owner":{"account_id":292208,"reputation":10665,"user_id":2245707,"accept_rate":17,"display_name":"pveentjer"},"score":1,"creation_date":1669280209,"post_id":74551728,"comment_id":131610166,"body_markdown":"There is no such mechanism. You can&#39;t apply allocation limits to individual threads.","body":"There is no such mechanism. You can&#39;t apply allocation limits to individual threads."},{"owner":{"account_id":372293,"reputation":180467,"user_id":721269,"accept_rate":100,"display_name":"David Schwartz"},"score":1,"creation_date":1669320545,"post_id":74551728,"comment_id":131622856,"body_markdown":"@PradipSodha Then you need to isolate those operations. Threads are not the right tool for doing that. Maybe processes are.","body":"@PradipSodha Then you need to isolate those operations. Threads are not the right tool for doing that. Maybe processes are."}],"owner":{"account_id":18936940,"reputation":95,"user_id":13817797,"display_name":"Pradip Sodha"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":50,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1669229458,"creation_date":1669229458,"question_id":74551728,"body_markdown":"## Contex\r\nI have one java process(main thread), which will spin up more than one thread, and each thread may require heavy memory usage, and that one java process will work as a driver.\r\n\r\n## Situation\r\nIf one of that threads consumes all memory, then all other threads and java processes will be killed by OS\r\n\r\n## Expectation\r\nis that any way to set max memory for a particular thread, if it crosses that line then only that thread kills?\r\n\r\n## what I tried\r\n1. I know When a Java application is started, we use the JVM option -Xms and -Xmx to control the size of the heap and -Xss to control the stack size, but this is only for java applications not for thread level.\r\n\r\n\r\n2. custom code: write another thread that will track memory usage and if any cross that line then kill it, but threads use shared heap memory so it&#39;s hard to calculate which threads consume but I can use [TheadLocal][1] for calculation.\r\n\r\nbut I looking for a more reasonable and affordable way to do that\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/9/docs/api/java/lang/ThreadLocal.html","title":"set max memory for particular java thread","body":"<h2>Contex</h2>\n<p>I have one java process(main thread), which will spin up more than one thread, and each thread may require heavy memory usage, and that one java process will work as a driver.</p>\n<h2>Situation</h2>\n<p>If one of that threads consumes all memory, then all other threads and java processes will be killed by OS</p>\n<h2>Expectation</h2>\n<p>is that any way to set max memory for a particular thread, if it crosses that line then only that thread kills?</p>\n<h2>what I tried</h2>\n<ol>\n<li><p>I know When a Java application is started, we use the JVM option -Xms and -Xmx to control the size of the heap and -Xss to control the stack size, but this is only for java applications not for thread level.</p>\n</li>\n<li><p>custom code: write another thread that will track memory usage and if any cross that line then kill it, but threads use shared heap memory so it's hard to calculate which threads consume but I can use <a href=\"https://docs.oracle.com/javase/9/docs/api/java/lang/ThreadLocal.html\" rel=\"nofollow noreferrer\">TheadLocal</a> for calculation.</p>\n</li>\n</ol>\n<p>but I looking for a more reasonable and affordable way to do that</p>\n"},{"tags":["java","android","android-studio","pdf-viewer"],"answers":[{"comments":[{"owner":{"account_id":3807602,"reputation":2351,"user_id":3159529,"accept_rate":80,"display_name":"Adedoyin Akande"},"score":0,"creation_date":1485948555,"post_id":41968550,"comment_id":71134827,"body_markdown":"But I don&#39;t want users to have access to the pdf file. I just want them to be able to view it within the app","body":"But I don&#39;t want users to have access to the pdf file. I just want them to be able to view it within the app"},{"owner":{"account_id":39846,"reputation":991173,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"score":1,"creation_date":1485952133,"post_id":41968550,"comment_id":71137218,"body_markdown":"@dbkonXepts: Download the PDF yourself, to [internal storage](https://commonsware.com/blog/2014/04/07/storage-situation-internal-storage.html), using your favorite HTTP client API. Then, use `fromFile()` rather than `fromUri()`.","body":"@dbkonXepts: Download the PDF yourself, to <a href=\"https://commonsware.com/blog/2014/04/07/storage-situation-internal-storage.html\" rel=\"nofollow noreferrer\">internal storage</a>, using your favorite HTTP client API. Then, use <code>fromFile()</code> rather than <code>fromUri()</code>."}],"tags":[],"owner":{"account_id":39846,"reputation":991173,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1485901321,"creation_date":1485901321,"answer_id":41968550,"question_id":41968317,"body_markdown":"Download the PDF yourself, using your favorite HTTP client API. Then, use `fromFile()` rather than `fromUri()`. \r\n","title":"Download PDF file for offline viewing","body":"<p>Download the PDF yourself, using your favorite HTTP client API. Then, use <code>fromFile()</code> rather than <code>fromUri()</code>. </p>\n"}],"owner":{"account_id":3807602,"reputation":2351,"user_id":3159529,"accept_rate":80,"display_name":"Adedoyin Akande"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":358,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":41968550,"answer_count":1,"score":0,"last_activity_date":1669229294,"creation_date":1485900161,"question_id":41968317,"body_markdown":"I&#39;m trying to cache PDF files on the user&#39;s device and open them within my app at a later time. \r\n\r\nWith this package: https://github.com/barteksc/AndroidPdfViewer\r\n\r\nI use `pdfView.fromUri(uri)` which loads the file from the URL every time the page is loaded.\r\nIs there a function I can use to cache these files for offline viewing?","title":"Download PDF file for offline viewing","body":"<p>I'm trying to cache PDF files on the user's device and open them within my app at a later time.</p>\n<p>With this package: <a href=\"https://github.com/barteksc/AndroidPdfViewer\" rel=\"nofollow noreferrer\">https://github.com/barteksc/AndroidPdfViewer</a></p>\n<p>I use <code>pdfView.fromUri(uri)</code> which loads the file from the URL every time the page is loaded.\nIs there a function I can use to cache these files for offline viewing?</p>\n"},{"tags":["java","arrays","algorithm","sorting","integer"],"comments":[{"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"score":3,"creation_date":1669226023,"post_id":74551109,"comment_id":131598632,"body_markdown":"Please, share your **attempt** and specify the problem you&#39;ve encountered. See [How do I ask a good question?](https://stackoverflow.com/help/how-to-ask)","body":"Please, share your <b>attempt</b> and specify the problem you&#39;ve encountered. See <a href=\"https://stackoverflow.com/help/how-to-ask\">How do I ask a good question?</a>"},{"owner":{"account_id":26036230,"reputation":260,"user_id":19741639,"display_name":"viking"},"score":1,"creation_date":1669226912,"post_id":74551109,"comment_id":131598922,"body_markdown":"I have no idea what you are talking about :), What do you want achive","body":"I have no idea what you are talking about :), What do you want achive"},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1669229009,"post_id":74551109,"comment_id":131599577,"body_markdown":"@viking, Given an integer, the O/P wants to process the integer digit-by-digit, finding the digit with the greatest value and the digit with the minimum value.  Presumably, this is all in base ten.","body":"@viking, Given an integer, the O/P wants to process the integer digit-by-digit, finding the digit with the greatest value and the digit with the minimum value.  Presumably, this is all in base ten."},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1669229243,"post_id":74551109,"comment_id":131599652,"body_markdown":"One way to process an integer digit-by-digit is to use the division (`/`) and mod (`%`) operators:  If your number is `n`, the expression `j = n % 10` results in `j` having the value of the least significant (i.e., rightmost) digit.  `n = n / 10` chops off the least significant digit.","body":"One way to process an integer digit-by-digit is to use the division (<code>&#47;</code>) and mod (<code>%</code>) operators:  If your number is <code>n</code>, the expression <code>j = n % 10</code> results in <code>j</code> having the value of the least significant (i.e., rightmost) digit.  <code>n = n &#47; 10</code> chops off the least significant digit."},{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":2,"creation_date":1669234141,"post_id":74551109,"comment_id":131600973,"body_markdown":"Please show an effort on your part before expecting anyone else to show one. BTW I would probably use a stream operation.","body":"Please show an effort on your part before expecting anyone else to show one. BTW I would probably use a stream operation."},{"owner":{"account_id":9591874,"reputation":5,"user_id":7122460,"display_name":"lunesmonday"},"score":0,"creation_date":1669234451,"post_id":74551109,"comment_id":131601032,"body_markdown":"This was asked in midterm exam and I was not able to show effort. The only thing I did was to think input as string and use charAt(index) to compare numbers","body":"This was asked in midterm exam and I was not able to show effort. The only thing I did was to think input as string and use charAt(index) to compare numbers"},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":2,"creation_date":1669234973,"post_id":74551109,"comment_id":131601177,"body_markdown":"Presumably, you have more time to attempt a solution now than you did during the midterm. It is expected here that your question should show an attempt.","body":"Presumably, you have more time to attempt a solution now than you did during the midterm. It is expected here that your question should show an attempt."}],"answers":[{"tags":[],"owner":{"account_id":23842063,"reputation":646,"user_id":17846993,"display_name":"bighugedev"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669228180,"creation_date":1669227871,"answer_id":74551462,"question_id":74551109,"body_markdown":"If you choose to work with the number representing it as a string, that means you&#39;ll have to be using the `charAt(int index)` method to retrieve an individual character from the string.\r\n\r\nThen, to convert any number character (that is, &#39;0&#39;, &#39;1&#39;, &#39;2&#39; ... &#39;9&#39;) to the number itself, subtract character `&#39;0&#39;` from it (`&#39;0&#39;` will be explicitly converted to int (ASCII code) at runtime), and you&#39;ll get the number itself in int representation.\r\n\r\n```java\r\npublic static void main(String[] args) {\r\n    char charNine = &#39;9&#39;;\r\n    int intNine = charNine - &#39;0&#39;;\r\n    System.out.println(intNine);\r\n}\r\n```\r\nThe output is `9`.","title":"How can I find minimum element of an integer in Java?","body":"<p>If you choose to work with the number representing it as a string, that means you'll have to be using the <code>charAt(int index)</code> method to retrieve an individual character from the string.</p>\n<p>Then, to convert any number character (that is, '0', '1', '2' ... '9') to the number itself, subtract character <code>'0'</code> from it (<code>'0'</code> will be explicitly converted to int (ASCII code) at runtime), and you'll get the number itself in int representation.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static void main(String[] args) {\n    char charNine = '9';\n    int intNine = charNine - '0';\n    System.out.println(intNine);\n}\n</code></pre>\n<p>The output is <code>9</code>.</p>\n"},{"comments":[{"owner":{"account_id":8595751,"reputation":5395,"user_id":6438819,"display_name":"RaffleBuffle"},"score":1,"creation_date":1669228651,"post_id":74551521,"comment_id":131599467,"body_markdown":"This is close but fails when the input is 0 (it will report `smallest` as 9). You can fix this by switching to a `do {} while (number != 0)`, i.e. always passing at least once through the update code.","body":"This is close but fails when the input is 0 (it will report <code>smallest</code> as 9). You can fix this by switching to a <code>do {} while (number != 0)</code>, i.e. always passing at least once through the update code."}],"tags":[],"owner":{"account_id":26963252,"reputation":41,"user_id":20530585,"display_name":"programmerlife"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1669228238,"creation_date":1669228238,"answer_id":74551521,"question_id":74551109,"body_markdown":"This should work:\r\n\r\n    int number = Integer.valueOf(input);\r\n    int largest = 0;\r\n    int smallest = 9;\r\n \r\n    while(number != 0)\r\n    {\r\n        int rem = number % 10;\r\n        largest = Math.max(rem, largest);\r\n        smallest = Math.min(rem, smallest);\r\n        number = number / 10;\r\n    }\r\n    System.out.println(largest + &quot; &quot; + smallest);","title":"How can I find minimum element of an integer in Java?","body":"<p>This should work:</p>\n<pre><code>int number = Integer.valueOf(input);\nint largest = 0;\nint smallest = 9;\n\nwhile(number != 0)\n{\n    int rem = number % 10;\n    largest = Math.max(rem, largest);\n    smallest = Math.min(rem, smallest);\n    number = number / 10;\n}\nSystem.out.println(largest + &quot; &quot; + smallest);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3221623,"reputation":3136,"user_id":2718939,"display_name":"Ronak Jain"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1669229168,"creation_date":1669229168,"answer_id":74551677,"question_id":74551109,"body_markdown":"You can parse the string input using wrapper classes util methods. The rest of the code you can refer below.\r\n\r\n    int[] getLargestAndSmallestDigits(String in){\r\n        int n = Integer.valueOf(in);\r\n        if (n==0) {\r\n            return new int[]{0,0};\r\n        }\r\n        int[] ans = {0,9};\r\n        \r\n        while(n != 0)\r\n        {\r\n            int r = n % 10;\r\n            ans[0] = Math.min(r, ans[0]);\r\n            ans[1] = Math.max(r, ans[0]);\r\n            n = n / 10;\r\n        }\r\n        return ans;\r\n    }","title":"How can I find minimum element of an integer in Java?","body":"<p>You can parse the string input using wrapper classes util methods. The rest of the code you can refer below.</p>\n<pre><code>int[] getLargestAndSmallestDigits(String in){\n    int n = Integer.valueOf(in);\n    if (n==0) {\n        return new int[]{0,0};\n    }\n    int[] ans = {0,9};\n    \n    while(n != 0)\n    {\n        int r = n % 10;\n        ans[0] = Math.min(r, ans[0]);\n        ans[1] = Math.max(r, ans[0]);\n        n = n / 10;\n    }\n    return ans;\n}\n</code></pre>\n"}],"owner":{"account_id":9591874,"reputation":5,"user_id":7122460,"display_name":"lunesmonday"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":91,"favorite_count":0,"down_vote_count":4,"up_vote_count":1,"closed_date":1669236226,"answer_count":3,"score":-3,"last_activity_date":1669229168,"creation_date":1669225857,"question_id":74551109,"body_markdown":"Imagine we are getting input from user as integer. I want my code to return minimum and maximum numbers in this integer value. For example, if user enters 56389, the code should display \r\n\r\nMinimum number: 3\r\nMaximum number: 9\r\n\r\nIf user enters single digit integer, let&#39;s say 7, the output should be:\r\n\r\nMinimum number: 7\r\nMaximum number: 7\r\n\r\n\r\n\r\nI am trying to declare input as String instead of integer and compare all elements of the String with charAt(i) method. However, I cannot get the result.\r\n\r\nI would be glad if you can help me!","title":"How can I find minimum element of an integer in Java?","body":"<p>Imagine we are getting input from user as integer. I want my code to return minimum and maximum numbers in this integer value. For example, if user enters 56389, the code should display</p>\n<p>Minimum number: 3\nMaximum number: 9</p>\n<p>If user enters single digit integer, let's say 7, the output should be:</p>\n<p>Minimum number: 7\nMaximum number: 7</p>\n<p>I am trying to declare input as String instead of integer and compare all elements of the String with charAt(i) method. However, I cannot get the result.</p>\n<p>I would be glad if you can help me!</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":2009857,"reputation":25959,"user_id":1798593,"display_name":"Patricia Shanahan"},"score":3,"creation_date":1374066419,"post_id":17700602,"comment_id":25792478,"body_markdown":"A static nested class does not have an implicit reference to any instance of the surrounding class. You would need to pass it a reference to the instance you want it to modify. Why is class B static?","body":"A static nested class does not have an implicit reference to any instance of the surrounding class. You would need to pass it a reference to the instance you want it to modify. Why is class B static?"},{"owner":{"account_id":1107485,"reputation":1005,"user_id":1098606,"accept_rate":64,"display_name":"Karn_way"},"score":0,"creation_date":1374066965,"post_id":17700602,"comment_id":25792862,"body_markdown":"Class B was generating just a template structure for UI display, now i am performing some operation to get the value and that needs to set to surrounding class . is this a design issue?","body":"Class B was generating just a template structure for UI display, now i am performing some operation to get the value and that needs to set to surrounding class . is this a design issue?"},{"owner":{"account_id":2009857,"reputation":25959,"user_id":1798593,"display_name":"Patricia Shanahan"},"score":0,"creation_date":1374067051,"post_id":17700602,"comment_id":25792912,"body_markdown":"If you need each B instance to relate to a specific A instance, and be able to operate on it, the simplest solution would be to make B non-static, and establish that relationship at construction time.","body":"If you need each B instance to relate to a specific A instance, and be able to operate on it, the simplest solution would be to make B non-static, and establish that relationship at construction time."},{"owner":{"account_id":5519,"reputation":70083,"user_id":8922,"accept_rate":75,"display_name":"Sebastian Redl"},"score":1,"creation_date":1374068017,"post_id":17700602,"comment_id":25793550,"body_markdown":"I can reformulate the comment as &quot;I don&#39;t have an A, but I want to change its list.&quot; Does that make it more obvious that your question doesn&#39;t make sense?","body":"I can reformulate the comment as &quot;I don&#39;t have an A, but I want to change its list.&quot; Does that make it more obvious that your question doesn&#39;t make sense?"}],"answers":[{"tags":[],"owner":{"account_id":41920,"reputation":56500,"user_id":121993,"accept_rate":77,"display_name":"Jeff Storey"},"comment_count":0,"down_vote_count":0,"up_vote_count":17,"is_accepted":false,"score":17,"last_activity_date":1374066588,"creation_date":1374066588,"answer_id":17700691,"question_id":17700602,"body_markdown":"You generally use static classes when you **don&#39;t** need access to the instance variables. If you need to access the instance variables make the class non-static.","title":"Can I access an outer class&#39;s field from a static inner class?","body":"<p>You generally use static classes when you <strong>don't</strong> need access to the instance variables. If you need to access the instance variables make the class non-static.</p>\n"},{"tags":[],"owner":{"account_id":1435980,"reputation":127999,"user_id":1357341,"accept_rate":100,"display_name":"arshajii"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1374066771,"creation_date":1374066771,"answer_id":17700756,"question_id":17700602,"body_markdown":"No, you&#39;ll need a non-`static` inner class to do that.\n\nFrom the [JLS &#167;8.5.1][1]:\n\n&gt;The `static` keyword may modify the declaration of a member type `C` within the body of a non-inner class or interface `T`. Its effect is to declare that `C` is not an inner class. Just as a static method of `T` has no current instance of T in its body, `C` also has no current instance of `T`, nor does it have any lexically enclosing instances. \n&gt;\n&gt;**It is a compile-time error if a `static` class contains a usage of a non-static member of an enclosing class.** \n\n\n  [1]: http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.5.1","title":"Can I access an outer class&#39;s field from a static inner class?","body":"<p>No, you'll need a non-<code>static</code> inner class to do that.</p>\n<p>From the <a href=\"http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.5.1\" rel=\"noreferrer\">JLS §8.5.1</a>:</p>\n<blockquote>\n<p>The <code>static</code> keyword may modify the declaration of a member type <code>C</code> within the body of a non-inner class or interface <code>T</code>. Its effect is to declare that <code>C</code> is not an inner class. Just as a static method of <code>T</code> has no current instance of T in its body, <code>C</code> also has no current instance of <code>T</code>, nor does it have any lexically enclosing instances.</p>\n<p><strong>It is a compile-time error if a <code>static</code> class contains a usage of a non-static member of an enclosing class.</strong></p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":1914874,"reputation":13438,"user_id":1727645,"accept_rate":81,"display_name":"Prasad Kharkar"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1374067155,"creation_date":1374066781,"answer_id":17700758,"question_id":17700602,"body_markdown":"In your code, `list` is an instance variable of class `A` and `B` is nested static class. The rules of accessing static and not static member don&#39;t change for nested static class. \r\n\r\n - The variable `list` is instance variable so a can&#39;t be accessed from static context.\r\n - To enable this, you need to change static nester class to inner class.\r\n\r\n \r\n\r\n        class A {\r\n        private List&lt;String&gt; list = new ArrayList&lt;String&gt;();\r\n          public class B {\r\n             public void someMethod(){\r\n                 list.add(&quot;abc&quot;);\r\n             }\r\n          }\r\n        }\r\n\r\n","title":"Can I access an outer class&#39;s field from a static inner class?","body":"<p>In your code, <code>list</code> is an instance variable of class <code>A</code> and <code>B</code> is nested static class. The rules of accessing static and not static member don't change for nested static class. </p>\n\n<ul>\n<li>The variable <code>list</code> is instance variable so a can't be accessed from static context.</li>\n<li><p>To enable this, you need to change static nester class to inner class.</p>\n\n<pre><code>class A {\nprivate List&lt;String&gt; list = new ArrayList&lt;String&gt;();\n  public class B {\n     public void someMethod(){\n         list.add(\"abc\");\n     }\n  }\n}\n</code></pre></li>\n</ul>\n"},{"comments":[{"owner":{"account_id":5408602,"reputation":123,"user_id":4306242,"accept_rate":91,"display_name":"misty"},"score":5,"creation_date":1475080726,"post_id":17701360,"comment_id":66802412,"body_markdown":"Is this really a solution considering object of the class A in expression `A a = new A();` is just local, with its initial values? Can you elaborate, please?","body":"Is this really a solution considering object of the class A in expression <code>A a = new A();</code> is just local, with its initial values? Can you elaborate, please?"},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":3,"creation_date":1591282603,"post_id":17701360,"comment_id":110002684,"body_markdown":"Adding getter and setter has no relevance here, just accessing the field via `a.list` would do the same. The key point is that you create a new instance of `A`. But as [this comment](https://stackoverflow.com/questions/17700602/can-i-access-an-outer-classs-field-from-a-static-inner-class#comment66802412_17701360) already said, using a temporary instance of `A` has no persistent effect.","body":"Adding getter and setter has no relevance here, just accessing the field via <code>a.list</code> would do the same. The key point is that you create a new instance of <code>A</code>. But as <a href=\"https://stackoverflow.com/questions/17700602/can-i-access-an-outer-classs-field-from-a-static-inner-class#comment66802412_17701360\">this comment</a> already said, using a temporary instance of <code>A</code> has no persistent effect."},{"owner":{"account_id":262968,"reputation":767160,"user_id":548225,"accept_rate":90,"display_name":"anubhava"},"score":0,"creation_date":1591283986,"post_id":17701360,"comment_id":110003434,"body_markdown":"Since it is a static inner class (and `list` is non-static), we need an explicit instance to access it otherwise we could simply use `A.this.list`","body":"Since it is a static inner class (and <code>list</code> is non-static), we need an explicit instance to access it otherwise we could simply use <code>A.this.list</code>"}],"tags":[],"owner":{"account_id":262968,"reputation":767160,"user_id":548225,"accept_rate":90,"display_name":"anubhava"},"comment_count":3,"down_vote_count":2,"up_vote_count":15,"is_accepted":true,"score":13,"last_activity_date":1669229162,"creation_date":1374068406,"answer_id":17701360,"question_id":17700602,"body_markdown":"As you can see from other answers that you will need a non-static inner class to do that.\r\n\r\nIf you really cannot make your inner class non-static then you can add required getter and setter method in outer class and access them by creating an instance of outer class from inside inner static class:\r\n\r\n    public class A {\r\n    \tprivate List&lt;String&gt; list = new ArrayList&lt;&gt;();\r\n    \tpublic List&lt;String&gt; getList() {\r\n    \t\treturn list;\r\n    \t}\r\n    \tpublic void setList(List&lt;String&gt; list) {\r\n    \t\tthis.list = list;\r\n    \t}\r\n    \tpublic static class B {\r\n    \t\t// i want to update list here without making list as static\r\n    \t\tvoid updList() {\r\n    \t\t\tA a = new A();\r\n    \t\t\ta.setList(someOtherList);\r\n    \t\t\tSystem.out.println(a.getList());\r\n    \t\t}\r\n    \t}\r\n    } ","title":"Can I access an outer class&#39;s field from a static inner class?","body":"<p>As you can see from other answers that you will need a non-static inner class to do that.</p>\n<p>If you really cannot make your inner class non-static then you can add required getter and setter method in outer class and access them by creating an instance of outer class from inside inner static class:</p>\n<pre><code>public class A {\n    private List&lt;String&gt; list = new ArrayList&lt;&gt;();\n    public List&lt;String&gt; getList() {\n        return list;\n    }\n    public void setList(List&lt;String&gt; list) {\n        this.list = list;\n    }\n    public static class B {\n        // i want to update list here without making list as static\n        void updList() {\n            A a = new A();\n            a.setList(someOtherList);\n            System.out.println(a.getList());\n        }\n    }\n} \n</code></pre>\n"},{"tags":[],"owner":{"account_id":11168451,"reputation":11,"user_id":8196297,"display_name":"Confused Coder"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1504946252,"creation_date":1504946252,"answer_id":46128766,"question_id":17700602,"body_markdown":"`private List&lt;String&gt; list;`\r\n\r\nHere ***list*** is an instance variable while the inner class is static which means that ***class B*** is the same across different ***class A*** instances; one cannot access it. And, that too for a very good and obvious reason.\r\n\r\nOne solution that you can use is pass reference of member ***list*** to the constructor of ***class B*** with a ***weakReference*** to avoid memory leak. \r\n\r\nSomething like this:\r\n\r\n \r\n\r\n    class A {\r\n        private List&lt;String&gt; list;\r\n    \r\n        public static class B {\r\n            WeakReference&lt;List&lt;String&gt;&gt; innerList;\r\n            //constructor\r\n            B(WeakReference&lt;List&lt;String&gt;&gt; innerList){\r\n                this.innerList = innerList;\r\n            }\r\n        }\r\n     \r\n\r\n","title":"Can I access an outer class&#39;s field from a static inner class?","body":"<p><code>private List&lt;String&gt; list;</code></p>\n\n<p>Here <strong><em>list</em></strong> is an instance variable while the inner class is static which means that <strong><em>class B</em></strong> is the same across different <strong><em>class A</em></strong> instances; one cannot access it. And, that too for a very good and obvious reason.</p>\n\n<p>One solution that you can use is pass reference of member <strong><em>list</em></strong> to the constructor of <strong><em>class B</em></strong> with a <strong><em>weakReference</em></strong> to avoid memory leak. </p>\n\n<p>Something like this:</p>\n\n<pre><code>class A {\n    private List&lt;String&gt; list;\n\n    public static class B {\n        WeakReference&lt;List&lt;String&gt;&gt; innerList;\n        //constructor\n        B(WeakReference&lt;List&lt;String&gt;&gt; innerList){\n            this.innerList = innerList;\n        }\n    }\n</code></pre>\n"}],"owner":{"account_id":1107485,"reputation":1005,"user_id":1098606,"accept_rate":64,"display_name":"Karn_way"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":27429,"favorite_count":0,"down_vote_count":0,"up_vote_count":24,"accepted_answer_id":17701360,"answer_count":5,"score":24,"last_activity_date":1669229162,"creation_date":1374066354,"question_id":17700602,"body_markdown":"I have a class which has another `static` inner class: \r\n\r\n    class A {\r\n        private List&lt;String&gt; list;\r\n\r\n        public static class B {\r\n            // I want to update list here without making list as static \r\n            // I don&#39;t have an object for outer class\r\n        }\r\n    }","title":"Can I access an outer class&#39;s field from a static inner class?","body":"<p>I have a class which has another <code>static</code> inner class: </p>\n\n<pre><code>class A {\n    private List&lt;String&gt; list;\n\n    public static class B {\n        // I want to update list here without making list as static \n        // I don't have an object for outer class\n    }\n}\n</code></pre>\n"},{"tags":["java","hibernate","jpa"],"comments":[{"owner":{"account_id":5066911,"reputation":1131,"user_id":4066802,"display_name":"lprakashv"},"score":0,"creation_date":1669227371,"post_id":74548267,"comment_id":131599052,"body_markdown":"Can you please provide the example code snippet you would like to use in this case which is failing?","body":"Can you please provide the example code snippet you would like to use in this case which is failing?"},{"owner":{"account_id":7358121,"reputation":4925,"user_id":5602214,"display_name":"Prashant"},"score":0,"creation_date":1669229021,"post_id":74548267,"comment_id":131599584,"body_markdown":"@Iprakashv I have updated the code with the function call.","body":"@Iprakashv I have updated the code with the function call."},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":0,"creation_date":1669229483,"post_id":74548267,"comment_id":131599729,"body_markdown":"that seems correct: *your `User`* (nor `UserProfile`) has no `email` ... probably you want another (package) `User`!?;) (-&gt; conflicting import! ..seeing `@Component` and `passwordEncoder`, you probably need [`org.springframework.security.core.userdetails.User`](https://docs.spring.io/spring-security/site/docs/4.2.5.RELEASE/apidocs/org/springframework/security/core/userdetails/User.html)??)","body":"that seems correct: <i>your <code>User</code></i> (nor <code>UserProfile</code>) has no <code>email</code> ... probably you want another (package) <code>User</code>!?;) (-&gt; conflicting import! ..seeing <code>@Component</code> and <code>passwordEncoder</code>, you probably need <a href=\"https://docs.spring.io/spring-security/site/docs/4.2.5.RELEASE/apidocs/org/springframework/security/core/userdetails/User.html\" rel=\"nofollow noreferrer\"><code>org.springframework.security.core.userdetails.User</code></a>??)"},{"owner":{"account_id":7358121,"reputation":4925,"user_id":5602214,"display_name":"Prashant"},"score":0,"creation_date":1669230357,"post_id":74548267,"comment_id":131600003,"body_markdown":"@xerx593 it has. it was just omitted from the question for brevity. There is no conflicting imports as well. Again, the question is just a minimum verifiable sample.","body":"@xerx593 it has. it was just omitted from the question for brevity. There is no conflicting imports as well. Again, the question is just a minimum verifiable sample."}],"owner":{"account_id":7358121,"reputation":4925,"user_id":5602214,"display_name":"Prashant"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":73,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1669228977,"creation_date":1669213143,"question_id":74548267,"body_markdown":"I have 2 `@Entity` classes - `User` and `UserProfile`. I have created a `one to one` mapping between them using `Hibernate`. Here is the sample code:\r\n```\r\n@Setter\r\n@Getter\r\n@ToString\r\n@Builder\r\n@AllArgsConstructor\r\n@NoArgsConstructor\r\n\r\n@Entity\r\npublic class User {\r\n\r\n    @Id\r\n    @GeneratedValue(generator = &quot;UUID&quot;)\r\n    @GenericGenerator(\r\n            name = &quot;UUID&quot;,\r\n            strategy = &quot;org.hibernate.id.UUIDGenerator&quot;,\r\n            parameters = {\r\n                    @Parameter(\r\n                            name = &quot;uuid_gen_strategy_class&quot;,\r\n                            value = &quot;org.hibernate.id.uuid.CustomVersionOneStrategy&quot;\r\n                    )\r\n            }\r\n    )\r\n    @Column(columnDefinition = &quot;CHAR(36)&quot;)\r\n    @Type(type = &quot;uuid-char&quot;)\r\n    private UUID userId;\r\n\r\n    @OneToOne(\r\n            mappedBy = &quot;user&quot;,\r\n            cascade = CascadeType.ALL,\r\n            fetch = FetchType.LAZY,\r\n            optional = false\r\n    )\r\n    private UserProfile profile;\r\n\r\n    static class UserBuilder {\r\n\r\n        private User user;\r\n\r\n        public UserBuilder profile(UserProfile profile) {\r\n            if (Objects.isNull(profile)) {\r\n                if (!Objects.isNull(this.user.profile)) {\r\n                    this.user.profile.setUser(null);\r\n                }\r\n            } else {\r\n                profile.setUser(user);\r\n            }\r\n            this.user.profile = profile;\r\n            return this;\r\n        }\r\n    }\r\n\r\n```\r\n`UserProfile` POJO is defined as:\r\n```\r\n@Setter\r\n@Getter\r\n@ToString\r\n@Builder\r\n@AllArgsConstructor\r\n@NoArgsConstructor\r\n\r\n@Entity\r\npublic class UserProfile {\r\n\r\n    @Id\r\n    @GeneratedValue(generator = &quot;UUID&quot;)\r\n    @GenericGenerator(\r\n            name = &quot;UUID&quot;,\r\n            strategy = &quot;org.hibernate.id.UUIDGenerator&quot;,\r\n            parameters = {\r\n                    @Parameter(\r\n                            name = &quot;uuid_gen_strategy_class&quot;,\r\n                            value = &quot;org.hibernate.id.uuid.CustomVersionOneStrategy&quot;\r\n                    )\r\n            }\r\n    )\r\n    @Column(columnDefinition = &quot;CHAR(36)&quot;)\r\n    @Type(type = &quot;uuid-char&quot;)\r\n    private UUID userId;\r\n\r\n    @OneToOne(fetch = FetchType.LAZY)\r\n    @ToString.Exclude\r\n    private User user;\r\n}\r\n```\r\nNow when I am trying to use the builder for `User`, I get an error that the existing fields are not found. The reason why I needed this custom builder is because i would like to create relationship between `User` and `UserProfile` in one place and not have to worry about setting this information everywhere the object is being created.\r\nHow do i fix this issue or is there a better way to achieve what i am trying to do here? \r\n\r\n**Updated**\r\n&lt;hr /&gt;\r\nHere is the sample code that is giving the error:\r\n```\r\n@Component\r\n@RequiredArgsConstructor\r\npublic class RegisterUserRequestToUserMapper {\r\n\r\n    private final PasswordEncoder passwordEncoder;\r\n\r\n    public User map(RegisterUserRequest request) {\r\n        return User.builder()\r\n                .email(request.getEmail())\r\n                .password(passwordEncoder.encode(request.getPassword()))\r\n                .roles(Set.of(Entitlement.USER))\r\n                .profile(\r\n                        UserProfile.builder()\r\n                                .firstName(request.getFirstName())\r\n                                .lastName(request.getLastName())\r\n                                .build()\r\n                )\r\n                .build();\r\n    }\r\n\r\n}\r\n```\r\nThe line that says `.email(...)`  is giving above error.","title":"Lombok: access object whose custom builder is generated from custom builder","body":"<p>I have 2 <code>@Entity</code> classes - <code>User</code> and <code>UserProfile</code>. I have created a <code>one to one</code> mapping between them using <code>Hibernate</code>. Here is the sample code:</p>\n<pre><code>@Setter\n@Getter\n@ToString\n@Builder\n@AllArgsConstructor\n@NoArgsConstructor\n\n@Entity\npublic class User {\n\n    @Id\n    @GeneratedValue(generator = &quot;UUID&quot;)\n    @GenericGenerator(\n            name = &quot;UUID&quot;,\n            strategy = &quot;org.hibernate.id.UUIDGenerator&quot;,\n            parameters = {\n                    @Parameter(\n                            name = &quot;uuid_gen_strategy_class&quot;,\n                            value = &quot;org.hibernate.id.uuid.CustomVersionOneStrategy&quot;\n                    )\n            }\n    )\n    @Column(columnDefinition = &quot;CHAR(36)&quot;)\n    @Type(type = &quot;uuid-char&quot;)\n    private UUID userId;\n\n    @OneToOne(\n            mappedBy = &quot;user&quot;,\n            cascade = CascadeType.ALL,\n            fetch = FetchType.LAZY,\n            optional = false\n    )\n    private UserProfile profile;\n\n    static class UserBuilder {\n\n        private User user;\n\n        public UserBuilder profile(UserProfile profile) {\n            if (Objects.isNull(profile)) {\n                if (!Objects.isNull(this.user.profile)) {\n                    this.user.profile.setUser(null);\n                }\n            } else {\n                profile.setUser(user);\n            }\n            this.user.profile = profile;\n            return this;\n        }\n    }\n\n</code></pre>\n<p><code>UserProfile</code> POJO is defined as:</p>\n<pre><code>@Setter\n@Getter\n@ToString\n@Builder\n@AllArgsConstructor\n@NoArgsConstructor\n\n@Entity\npublic class UserProfile {\n\n    @Id\n    @GeneratedValue(generator = &quot;UUID&quot;)\n    @GenericGenerator(\n            name = &quot;UUID&quot;,\n            strategy = &quot;org.hibernate.id.UUIDGenerator&quot;,\n            parameters = {\n                    @Parameter(\n                            name = &quot;uuid_gen_strategy_class&quot;,\n                            value = &quot;org.hibernate.id.uuid.CustomVersionOneStrategy&quot;\n                    )\n            }\n    )\n    @Column(columnDefinition = &quot;CHAR(36)&quot;)\n    @Type(type = &quot;uuid-char&quot;)\n    private UUID userId;\n\n    @OneToOne(fetch = FetchType.LAZY)\n    @ToString.Exclude\n    private User user;\n}\n</code></pre>\n<p>Now when I am trying to use the builder for <code>User</code>, I get an error that the existing fields are not found. The reason why I needed this custom builder is because i would like to create relationship between <code>User</code> and <code>UserProfile</code> in one place and not have to worry about setting this information everywhere the object is being created.\nHow do i fix this issue or is there a better way to achieve what i am trying to do here?</p>\n<p><strong>Updated</strong></p>\n<hr />\nHere is the sample code that is giving the error:\n```\n@Component\n@RequiredArgsConstructor\npublic class RegisterUserRequestToUserMapper {\n<pre><code>private final PasswordEncoder passwordEncoder;\n\npublic User map(RegisterUserRequest request) {\n    return User.builder()\n            .email(request.getEmail())\n            .password(passwordEncoder.encode(request.getPassword()))\n            .roles(Set.of(Entitlement.USER))\n            .profile(\n                    UserProfile.builder()\n                            .firstName(request.getFirstName())\n                            .lastName(request.getLastName())\n                            .build()\n            )\n            .build();\n}\n</code></pre>\n<p>}</p>\n<pre><code>The line that says `.email(...)`  is giving above error.\n</code></pre>\n"},{"tags":["java","scala","apache-sedona"],"answers":[{"comments":[{"owner":{"account_id":9473547,"reputation":11,"user_id":7043654,"display_name":"Dennis Savio"},"score":0,"creation_date":1669207947,"post_id":74528619,"comment_id":131591590,"body_markdown":"I&#39;ve tried it before. The IDE hints the error &quot;The type of the expression must be an array type but it resolved to Object&quot;. \n\nI&#39;ve also tried to do a cast, too, using (((Row[])boundary.take(1))[0].get(0) == geometryFactory.createPolygon(coordinates))). The code runs, but the assert returns false, so I think It is not returning what was intended to.","body":"I&#39;ve tried it before. The IDE hints the error &quot;The type of the expression must be an array type but it resolved to Object&quot;.   I&#39;ve also tried to do a cast, too, using (((Row[])boundary.take(1))[0].get(0) == geometryFactory.createPolygon(coordinates))). The code runs, but the assert returns false, so I think It is not returning what was intended to."},{"owner":{"account_id":3679807,"reputation":176,"user_id":3065003,"display_name":"Jia Yu - Apache Sedona"},"score":0,"creation_date":1669228888,"post_id":74528619,"comment_id":131599529,"body_markdown":"@DennisSavio please see the updated answer. It should be able to solve your problem.","body":"@DennisSavio please see the updated answer. It should be able to solve your problem."}],"tags":[],"owner":{"account_id":3679807,"reputation":176,"user_id":3065003,"display_name":"Jia Yu - Apache Sedona"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669228834,"creation_date":1669100693,"answer_id":74528619,"question_id":74523500,"body_markdown":"boundary.take(1) gets an array of Rows from Spark DataFrame.\r\n\r\nThe following code works for me:\r\n\r\n```\r\nGeometryFactory geomFactory = new GeometryFactory();\r\nPoint expectedGeom = geomFactory.createPoint(new Coordinate(-88.331492, 32.324142));\r\nGeometry actualGeom = spatialDf.javaRDD().take(1).get(0).&lt;Geometry&gt;getAs(0);\r\nassert(actualGeom.equals(expectedGeom));\r\n```\r\n\r\nNote that you cannot compare a polygon with a geometry using `==` although you think they are the same polygon. This is because they technically have different types `Polygon` vs `Geometry`. Please use `equals` method to compare them.\r\n","title":"Converting Apache Sedona SQL example to java","body":"<p>boundary.take(1) gets an array of Rows from Spark DataFrame.</p>\n<p>The following code works for me:</p>\n<pre><code>GeometryFactory geomFactory = new GeometryFactory();\nPoint expectedGeom = geomFactory.createPoint(new Coordinate(-88.331492, 32.324142));\nGeometry actualGeom = spatialDf.javaRDD().take(1).get(0).&lt;Geometry&gt;getAs(0);\nassert(actualGeom.equals(expectedGeom));\n</code></pre>\n<p>Note that you cannot compare a polygon with a geometry using <code>==</code> although you think they are the same polygon. This is because they technically have different types <code>Polygon</code> vs <code>Geometry</code>. Please use <code>equals</code> method to compare them.</p>\n"}],"owner":{"account_id":9473547,"reputation":11,"user_id":7043654,"display_name":"Dennis Savio"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":93,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"answer_count":1,"score":-1,"last_activity_date":1669228834,"creation_date":1669056051,"question_id":74523500,"body_markdown":"I am trying to convert the Apache Sedona examples code from scala to java, and I am stucked in the line 128 of the SQL example, which says:\r\n\r\n```\r\nassert(boundary.take(1)(0).get(0)==geometryFactory.createPolygon(coordinates))\r\n```\r\n\r\nI am trying to understand it but I am not familiar to the scala syntax. Can somebody help me obtaining a java equivalent command?","title":"Converting Apache Sedona SQL example to java","body":"<p>I am trying to convert the Apache Sedona examples code from scala to java, and I am stucked in the line 128 of the SQL example, which says:</p>\n<pre><code>assert(boundary.take(1)(0).get(0)==geometryFactory.createPolygon(coordinates))\n</code></pre>\n<p>I am trying to understand it but I am not familiar to the scala syntax. Can somebody help me obtaining a java equivalent command?</p>\n"},{"tags":["java","spring-boot","docker","maven","dockerfile"],"comments":[{"owner":{"account_id":13217925,"reputation":5499,"user_id":14401160,"display_name":"STerliakov"},"score":0,"creation_date":1669218900,"post_id":74549165,"comment_id":131595957,"body_markdown":"Replace last COPY with `RUN cp`: source `target/*.jar` is built by naven within the layer, so does not belong to host filesystem.","body":"Replace last COPY with <code>RUN cp</code>: source <code>target&#47;*.jar</code> is built by naven within the layer, so does not belong to host filesystem."},{"owner":{"account_id":10693447,"reputation":878,"user_id":7871511,"display_name":"Rohit Agarwal"},"score":0,"creation_date":1669226969,"post_id":74549165,"comment_id":131598934,"body_markdown":"Did you tried with the same Dockerfile mentioned here https://stackoverflow.com/a/27768965/7871511?","body":"Did you tried with the same Dockerfile mentioned here <a href=\"https://stackoverflow.com/a/27768965/7871511\">stackoverflow.com/a/27768965/7871511</a>?"},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":0,"creation_date":1669230222,"post_id":74549165,"comment_id":131599963,"body_markdown":"please (best) stick to [quickstart](https://spring.io/guides/gs/spring-boot-docker/) and [ref. doc](https://docs.spring.io/spring-boot/docs/current/reference/html/container-images.html)","body":"please (best) stick to <a href=\"https://spring.io/guides/gs/spring-boot-docker/\" rel=\"nofollow noreferrer\">quickstart</a> and <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/container-images.html\" rel=\"nofollow noreferrer\">ref. doc</a>"}],"answers":[{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1669466453,"post_id":74551436,"comment_id":131649337,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/74551436/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":17347273,"reputation":1,"user_id":20583190,"display_name":"victor"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1669227746,"creation_date":1669227746,"answer_id":74551436,"question_id":74549165,"body_markdown":"turns out that you can just skip the Dockerfile Altogether in this case and use this maven command instead:\r\n\r\n    ./mvnw spring-boot:build-image\r\n\r\nand it will build a docker image for you","title":"How to generate a jar file in the Dockerfile?","body":"<p>turns out that you can just skip the Dockerfile Altogether in this case and use this maven command instead:</p>\n<pre><code>./mvnw spring-boot:build-image\n</code></pre>\n<p>and it will build a docker image for you</p>\n"},{"tags":[],"owner":{"account_id":3221623,"reputation":3136,"user_id":2718939,"display_name":"Ronak Jain"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1669228717,"creation_date":1669228717,"answer_id":74551601,"question_id":74549165,"body_markdown":"You need to use --from to copy an artifact built in the previous stage to the current stage. \r\n\r\nJust replace\r\n\r\n    COPY ${JAR_FILE} app.jar\r\n\r\nwith\r\n\r\n    COPY --from=maven_build /path/to/target/*.jar /app.jar\r\n\r\n","title":"How to generate a jar file in the Dockerfile?","body":"<p>You need to use --from to copy an artifact built in the previous stage to the current stage.</p>\n<p>Just replace</p>\n<pre><code>COPY ${JAR_FILE} app.jar\n</code></pre>\n<p>with</p>\n<pre><code>COPY --from=maven_build /path/to/target/*.jar /app.jar\n</code></pre>\n"}],"owner":{"account_id":17347273,"reputation":1,"user_id":20583190,"display_name":"victor"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":942,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74551436,"answer_count":2,"score":0,"last_activity_date":1669228717,"creation_date":1669216817,"question_id":74549165,"body_markdown":"I&#39;m trying to dockerize a spring boot app but i&#39;m having trouble building a jar file with maven.\r\nI Already tried to follow [this tutorial](https://stackoverflow.com/questions/27767264/how-to-dockerize-maven-project-and-how-many-ways-to-accomplish-it) but somehow my .jar isn&#39;t being updated by the &#39;mvn package&#39; command inside the Dockerfile. \r\n\r\nIf I manually run &#39;mvn package&#39; and then build the image, it works.\r\n\r\n\r\n\r\nthis is my dockerfile\r\n\r\n\r\n```\r\nFROM openjdk:11\r\nFROM maven:3.8-jdk-11 as maven_build\r\nCOPY pom.xml pom.xml\r\nCOPY src src\r\nRUN mvn clean package\r\nARG JAR_FILE=target/*.jar\r\nCOPY ${JAR_FILE} app.jar\r\nENTRYPOINT [&quot;java&quot;,&quot;-jar&quot;,&quot;/app.jar&quot;]\r\n\r\n```\r\n\r\nmy project structure \r\n\r\n```\r\nDemo\r\n└── src\r\n|    ├── main\r\n|    │   ├── java\r\n|    │       └── com\r\n|    │           └── App.java\r\n|    │               \r\n|    │   \r\n|    └── test\r\n|\r\n├──── Dockerfile\r\n├──── pom.xml\r\n```\r\n\r\n\r\n","title":"How to generate a jar file in the Dockerfile?","body":"<p>I'm trying to dockerize a spring boot app but i'm having trouble building a jar file with maven.\nI Already tried to follow <a href=\"https://stackoverflow.com/questions/27767264/how-to-dockerize-maven-project-and-how-many-ways-to-accomplish-it\">this tutorial</a> but somehow my .jar isn't being updated by the 'mvn package' command inside the Dockerfile.</p>\n<p>If I manually run 'mvn package' and then build the image, it works.</p>\n<p>this is my dockerfile</p>\n<pre><code>FROM openjdk:11\nFROM maven:3.8-jdk-11 as maven_build\nCOPY pom.xml pom.xml\nCOPY src src\nRUN mvn clean package\nARG JAR_FILE=target/*.jar\nCOPY ${JAR_FILE} app.jar\nENTRYPOINT [&quot;java&quot;,&quot;-jar&quot;,&quot;/app.jar&quot;]\n\n</code></pre>\n<p>my project structure</p>\n<pre><code>Demo\n└── src\n|    ├── main\n|    │   ├── java\n|    │       └── com\n|    │           └── App.java\n|    │               \n|    │   \n|    └── test\n|\n├──── Dockerfile\n├──── pom.xml\n</code></pre>\n"},{"tags":["java","android","drag-and-drop"],"comments":[{"owner":{"account_id":9063839,"reputation":128,"user_id":6749453,"display_name":"Ayaz Muhammad"},"score":0,"creation_date":1669229034,"post_id":74551576,"comment_id":131599588,"body_markdown":"try out this lib hope i will be help full for you https://github.com/aitsuki/SwipeMenuRecyclerView","body":"try out this lib hope i will be help full for you <a href=\"https://github.com/aitsuki/SwipeMenuRecyclerView\" rel=\"nofollow noreferrer\">github.com/aitsuki/SwipeMenuRecyclerView</a>"},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1669276028,"post_id":74551576,"comment_id":131608796,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"owner":{"account_id":27027641,"reputation":1,"user_id":20584624,"display_name":"user20584624"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":11,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1669228590,"creation_date":1669228590,"question_id":74551576,"body_markdown":"i am implementing dragging of a view horizontally. so far everything is working good.\r\n\r\ni have one question how can i limit the drag movement or put certain limit from where the view should stop moving even when user is still dragging. same like navigation drawer movement.\r\n\r\nThanks.\r\n\r\ntried to implement with onTouchListener","title":"Limiting dragged view distance","body":"<p>i am implementing dragging of a view horizontally. so far everything is working good.</p>\n<p>i have one question how can i limit the drag movement or put certain limit from where the view should stop moving even when user is still dragging. same like navigation drawer movement.</p>\n<p>Thanks.</p>\n<p>tried to implement with onTouchListener</p>\n"},{"tags":["java","set","java-stream"],"comments":[{"owner":{"account_id":249169,"reputation":19388,"user_id":525036,"accept_rate":25,"display_name":"Didier L"},"score":0,"creation_date":1669228658,"post_id":74545827,"comment_id":131599469,"body_markdown":"`&quot;123456789&quot;.chars().mapToObj(i -&gt; (char) i).collect(Collectors.toSet())` or even just `Set.of(&#39;1&#39;, &#39;2&#39;, &#39;3&#39;, &#39;4&#39;, &#39;5&#39;, &#39;6&#39;, &#39;7&#39;, &#39;8&#39;, &#39;9&#39;)`","body":"<code>&quot;123456789&quot;.chars().mapToObj(i -&gt; (char) i).collect(Collectors.toSet())</code> or even just <code>Set.of(&#39;1&#39;, &#39;2&#39;, &#39;3&#39;, &#39;4&#39;, &#39;5&#39;, &#39;6&#39;, &#39;7&#39;, &#39;8&#39;, &#39;9&#39;)</code>"}],"answers":[{"tags":[],"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1669202571,"creation_date":1669201766,"answer_id":74545848,"question_id":74545827,"body_markdown":"You need to use operation [`mapToObj()`][mapToObj] (*not* `map()`) to transform `IntStream` into a `Stream&lt;Character&gt;`.\r\n\r\nWhen you apply `.map(i -&gt; (char) i)` in the `IntStream` (*a stream of primitive* `int` *values*) it only performs primitive conversion from `int` to `char` (***reminder:*** [`char`][char] *is a numeric type*), and then the result would be promoted back into `int`.\r\n\r\nAnd when you apply `boxed()` on the `IntStream` you&#39;re getting `Stream&lt;Integer&gt;` (*a stream of integer wrappers*).\r\n\r\n```\r\nSet&lt;Character&gt; totalSet = IntStream.range(&#39;1&#39;, &#39;9&#39;)\r\n    .mapToObj(i -&gt; (char) i)\r\n    .collect(Collectors.toSet());\r\n```\r\n\r\n\r\n\r\n   [mapToObj]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/IntStream.html#mapToObj(java.util.function.IntFunction)\r\n\r\n   [char]: https://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html","title":"How to create a `HashSet&lt;Character&gt;` contains &#39;0&#39;-&#39;9&#39; using Stream API?","body":"<p>You need to use operation <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/IntStream.html#mapToObj(java.util.function.IntFunction)\" rel=\"nofollow noreferrer\"><code>mapToObj()</code></a> (<em>not</em> <code>map()</code>) to transform <code>IntStream</code> into a <code>Stream&lt;Character&gt;</code>.</p>\n<p>When you apply <code>.map(i -&gt; (char) i)</code> in the <code>IntStream</code> (<em>a stream of primitive</em> <code>int</code> <em>values</em>) it only performs primitive conversion from <code>int</code> to <code>char</code> (<em><strong>reminder:</strong></em> <a href=\"https://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html\" rel=\"nofollow noreferrer\"><code>char</code></a> <em>is a numeric type</em>), and then the result would be promoted back into <code>int</code>.</p>\n<p>And when you apply <code>boxed()</code> on the <code>IntStream</code> you're getting <code>Stream&lt;Integer&gt;</code> (<em>a stream of integer wrappers</em>).</p>\n<pre><code>Set&lt;Character&gt; totalSet = IntStream.range('1', '9')\n    .mapToObj(i -&gt; (char) i)\n    .collect(Collectors.toSet());\n</code></pre>\n"}],"owner":{"account_id":10894378,"reputation":737,"user_id":8008906,"display_name":"djy"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":79,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":74545848,"answer_count":1,"score":1,"last_activity_date":1669228530,"creation_date":1669201658,"question_id":74545827,"body_markdown":"I&#39;m trying to create a `Set&lt;Character&gt;` contains value from `&#39;0&#39;` to `&#39;9&#39;`.\r\n\r\nHere&#39;s what I&#39;ve tried:\r\n```\r\nvar totalSet = IntStream.range(&#39;1&#39;, &#39;9&#39;)\r\n    .map(i -&gt; (char) i)\r\n    .boxed()\r\n    .collect(Collectors.toSet()); // type of totalSet is `Set&lt;Integer&gt;`\r\n```\r\n\r\nBut I found that the type of `totalSet` is `Set&lt;Integer&gt;`. How can I achieve the desired result?\r\n\r\nI&#39;m using JDK 17.","title":"How to create a `HashSet&lt;Character&gt;` contains &#39;0&#39;-&#39;9&#39; using Stream API?","body":"<p>I'm trying to create a <code>Set&lt;Character&gt;</code> contains value from <code>'0'</code> to <code>'9'</code>.</p>\n<p>Here's what I've tried:</p>\n<pre><code>var totalSet = IntStream.range('1', '9')\n    .map(i -&gt; (char) i)\n    .boxed()\n    .collect(Collectors.toSet()); // type of totalSet is `Set&lt;Integer&gt;`\n</code></pre>\n<p>But I found that the type of <code>totalSet</code> is <code>Set&lt;Integer&gt;</code>. How can I achieve the desired result?</p>\n<p>I'm using JDK 17.</p>\n"},{"tags":["java","oop","design-patterns","factory-method","template-method-pattern"],"comments":[{"owner":{"display_name":"user10386912"},"score":0,"creation_date":1554194279,"post_id":55461586,"comment_id":97651511,"body_markdown":"I would say Factory is a way of using Strategy, usually Factory creates objects based on received parameter(s), which implies the behavior of creating objects depends on the input, so the factory chooses the right Strategy to create requested object, runs the Strategy and returns the result to the caller of the Factory","body":"I would say Factory is a way of using Strategy, usually Factory creates objects based on received parameter(s), which implies the behavior of creating objects depends on the input, so the factory chooses the right Strategy to create requested object, runs the Strategy and returns the result to the caller of the Factory"},{"owner":{"account_id":236561,"reputation":5234,"user_id":504133,"accept_rate":76,"display_name":"nits.kk"},"score":0,"creation_date":1554195694,"post_id":55461586,"comment_id":97652304,"body_markdown":"Factory, you mean Abstract factory or factory-method, or the static factory methods ?. All 3 are different and as per GOF only factory-method and abstract-facfory are design patterns.","body":"Factory, you mean Abstract factory or factory-method, or the static factory methods ?. All 3 are different and as per GOF only factory-method and abstract-facfory are design patterns."},{"owner":{"display_name":"user10386912"},"score":1,"creation_date":1554196904,"post_id":55461586,"comment_id":97653061,"body_markdown":"abstract-factory indeed and trying to answer to the question I would say factory method is a creational behavior hence a Strategy","body":"abstract-factory indeed and trying to answer to the question I would say factory method is a creational behavior hence a Strategy"},{"owner":{"account_id":236561,"reputation":5234,"user_id":504133,"accept_rate":76,"display_name":"nits.kk"},"score":0,"creation_date":1554198068,"post_id":55461586,"comment_id":97653776,"body_markdown":"hmm interesting perspective. `creational behaviour` and hence factory method is strategy. +1 for this","body":"hmm interesting perspective. <code>creational behaviour</code> and hence factory method is strategy. +1 for this"},{"owner":{"account_id":2530265,"reputation":3734,"user_id":2198705,"display_name":"Nghia Bui"},"score":1,"creation_date":1554262367,"post_id":55461586,"comment_id":97681987,"body_markdown":"Seems you are talking about Template Method not Strategy?","body":"Seems you are talking about Template Method not Strategy?"},{"owner":{"account_id":236561,"reputation":5234,"user_id":504133,"accept_rate":76,"display_name":"nits.kk"},"score":0,"creation_date":1554271497,"post_id":55461586,"comment_id":97684322,"body_markdown":"oh my god, you are so very right, my mind had template and i wrote strategy. i will edit","body":"oh my god, you are so very right, my mind had template and i wrote strategy. i will edit"},{"owner":{"account_id":236561,"reputation":5234,"user_id":504133,"accept_rate":76,"display_name":"nits.kk"},"score":0,"creation_date":1554301589,"post_id":55461586,"comment_id":97702061,"body_markdown":"I have edited the question and included the example code","body":"I have edited the question and included the example code"}],"answers":[{"comments":[{"owner":{"account_id":236561,"reputation":5234,"user_id":504133,"accept_rate":76,"display_name":"nits.kk"},"score":0,"creation_date":1554271717,"post_id":55487054,"comment_id":97684402,"body_markdown":"I am really sorry, by mistake i wrote stategy but i meant template pattern. Really sorry for the horrible mistake. :) I corrected it","body":"I am really sorry, by mistake i wrote stategy but i meant template pattern. Really sorry for the horrible mistake. :) I corrected it"},{"owner":{"display_name":"user10386912"},"score":0,"creation_date":1554272401,"post_id":55487054,"comment_id":97684654,"body_markdown":"@Rafael By `Strategy can use Template Method, Factory Method...` you mean Strategy could be implemented using template or factory method design patterns?","body":"@Rafael By <code>Strategy can use Template Method, Factory Method...</code> you mean Strategy could be implemented using template or factory method design patterns?"},{"owner":{"account_id":5165555,"reputation":7645,"user_id":4135670,"accept_rate":93,"display_name":"Rafael"},"score":1,"creation_date":1554273702,"post_id":55487054,"comment_id":97685184,"body_markdown":"@ValentinCarnu Any implementation detail is acceptable behind an abstraction. The Strategy implementation or any implementation can also be composed by/leverage other patterns. Implementation details are black-boxes that clients shouldn&#39;t care about. If they do, something&#39;s wrong (breaking encapsulation, tight coupling, etc.).","body":"@ValentinCarnu Any implementation detail is acceptable behind an abstraction. The Strategy implementation or any implementation can also be composed by/leverage other patterns. Implementation details are black-boxes that clients shouldn&#39;t care about. If they do, something&#39;s wrong (breaking encapsulation, tight coupling, etc.)."},{"owner":{"account_id":5165555,"reputation":7645,"user_id":4135670,"accept_rate":93,"display_name":"Rafael"},"score":0,"creation_date":1554274722,"post_id":55487054,"comment_id":97685649,"body_markdown":"@nits.kk I&#39;m not sure what else to say... Both abstractions defer details to subclasses, but their responsibilities are different: one is create/full delegation while the other is behavior/partial delegation. Does that make sense?","body":"@nits.kk I&#39;m not sure what else to say... Both abstractions defer details to subclasses, but their responsibilities are different: one is create/full delegation while the other is behavior/partial delegation. Does that make sense?"},{"owner":{"display_name":"user10386912"},"score":1,"creation_date":1554277317,"post_id":55487054,"comment_id":97686928,"body_markdown":"@Rafael `Any implementation detail is acceptable behind an abstraction` +1","body":"@Rafael <code>Any implementation detail is acceptable behind an abstraction</code> +1"},{"owner":{"account_id":236561,"reputation":5234,"user_id":504133,"accept_rate":76,"display_name":"nits.kk"},"score":0,"creation_date":1554301520,"post_id":55487054,"comment_id":97702015,"body_markdown":"I have edited the queation, added the code for demostrating my query.","body":"I have edited the queation, added the code for demostrating my query."}],"tags":[],"owner":{"account_id":5165555,"reputation":7645,"user_id":4135670,"accept_rate":93,"display_name":"Rafael"},"comment_count":6,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1554265540,"creation_date":1554265540,"answer_id":55487054,"question_id":55461586,"body_markdown":"I don&#39;t want to oversimplify these patterns, but, yes, both abstractions defer implementation details completely. Decoupling clients from implementation details is more flexible and allows each to evolve independently; this is the essence of the Dependency&amp;nbsp;Inversion&amp;nbsp;Principle.\r\n\r\n- Factory Method defers creation *completely*\r\n- Strategy defers behavior *completely*\r\n\r\nTo address the comment above:\r\n\r\n- Template Method defers behavior *partially* (not quite the same)\r\n\r\nThese patterns are not used exclusively, e.g., Strategy can use Template Method, Factory Method, or other patterns.\r\n\r\nI hope this helps!","title":"Is Factory method pattern a specialized case of Template method pattern?","body":"<p>I don't want to oversimplify these patterns, but, yes, both abstractions defer implementation details completely. Decoupling clients from implementation details is more flexible and allows each to evolve independently; this is the essence of the Dependency&nbsp;Inversion&nbsp;Principle.</p>\n\n<ul>\n<li>Factory Method defers creation <em>completely</em></li>\n<li>Strategy defers behavior <em>completely</em></li>\n</ul>\n\n<p>To address the comment above:</p>\n\n<ul>\n<li>Template Method defers behavior <em>partially</em> (not quite the same)</li>\n</ul>\n\n<p>These patterns are not used exclusively, e.g., Strategy can use Template Method, Factory Method, or other patterns.</p>\n\n<p>I hope this helps!</p>\n"},{"tags":[],"owner":{"account_id":236561,"reputation":5234,"user_id":504133,"accept_rate":76,"display_name":"nits.kk"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1669228497,"creation_date":1593373862,"answer_id":62627533,"question_id":55461586,"body_markdown":"Both Factory method pattern and Template method pattern have similar design but they vary for their purpose. \r\n\r\nFactory method is a creational pattern where object creation is the responsibility of the child class.\r\n\r\nA pattern where a class defines an abstract method for an object creation and another method using the created object and thereby allowing the subclasses to provide the implementation of the creational method is factory method. \r\n\r\nTemplate method is a behavioral pattern where behaviour is the responsibility of the sub class.\r\n\r\nA pattern where a class defines an abstract method for a behaviour and another method invokes the abstract method to have the behaviour executed, the behaviour is implemented by the subclass. Hence its the parent class invoking the implementation of the child class without having any explicit compile time dependency on its subclass. This is true for the factory method pattern as well. But both differs in their intent. \r\n\r\nIn other words we can say Factory method pattern creates object in a similar way as Template method pattern executes the behaviour. \r\n","title":"Is Factory method pattern a specialized case of Template method pattern?","body":"<p>Both Factory method pattern and Template method pattern have similar design but they vary for their purpose.</p>\n<p>Factory method is a creational pattern where object creation is the responsibility of the child class.</p>\n<p>A pattern where a class defines an abstract method for an object creation and another method using the created object and thereby allowing the subclasses to provide the implementation of the creational method is factory method.</p>\n<p>Template method is a behavioral pattern where behaviour is the responsibility of the sub class.</p>\n<p>A pattern where a class defines an abstract method for a behaviour and another method invokes the abstract method to have the behaviour executed, the behaviour is implemented by the subclass. Hence its the parent class invoking the implementation of the child class without having any explicit compile time dependency on its subclass. This is true for the factory method pattern as well. But both differs in their intent.</p>\n<p>In other words we can say Factory method pattern creates object in a similar way as Template method pattern executes the behaviour.</p>\n"}],"owner":{"account_id":236561,"reputation":5234,"user_id":504133,"accept_rate":76,"display_name":"nits.kk"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5237,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":62627533,"answer_count":2,"score":5,"last_activity_date":1669228497,"creation_date":1554143936,"question_id":55461586,"body_markdown":"GOF talks about frameworks for &quot;Factory method&quot; pattern. Frameworks need objects but implementation of objects depends upon application hence an abstract method to create the object is created. Also as return type is needed so interface for the object needed is defined, it defines the apis needed for the object. Actual objects are created by subclasses (concrete Application) . This is a creational pattern.\r\n\r\nFor Template pattern the only change is that the encapsulating class does not know the implementation of certain behavior hence it abstracts it in a method , uses it but leaves the implementation to the subclasses. This is behavioral pattern. \r\n\r\nIs the only differences between the two are\r\n\r\n    1. Factory method is creational and Template is behavioural.\r\n    2. Factory method abstracts a method to create an object where as template pattern abstracts a method for some policy or algorithm. \r\n\r\nexample code\r\n\r\n     /**factory-method example**/\r\n     public abstract class Application{          \r\n            public void create(){\r\n                  View contentView = createContentView();\r\n                  Menu menu = contentView.obtainMenu();\r\n                  generateMenuItems(menu);\r\n            }\r\n            public abstract View createContentView(); //factory-method\r\n            public void generateMenuItems(Menu menu){\r\n                  // some code\r\n            }\r\n     }\r\n\r\n      /** Product Specification**/            \r\n     public interface View{\r\n          public abstract Menu obtainMenu();\r\n          // other abstract method of product\r\n     }\r\n\r\nNow User code using above will subclass Application and provide implementation for `createContentView()`. \r\n\r\nTemplate method basic characterstic : Parent class concrete method invoking its abstract method.\r\n\r\nFactory method : lets the product creation be implemented by its sub classes.\r\n\r\nAbove example fits for both. In fact any example for Factory methods fits for Template method as well. \r\n     \r\n\r\nSo it is good to say \r\n\r\n1. *Factory method pattern is specialized template method pattern for obtaining the object whose implementation is dependent upon user code which can provide implementation of object creation in the subclass*\r\n2. *Template pattern if used for object creation is Factory method pattern.*\r\n\r\n*My second doubt* : Is it mandatory for Factory method (which is as per GOF based on inberitence) to invoke its abstract product producing method from its other concrete method ?\r\n\r\nIf answer to above is &#39;No&#39; then this means there will be some consumer code which will have an instance of type Factory (composition),will invoke the factory method to obtain the object of a product and will get concrete factory class injected. But now this becomes abstract factory. ","title":"Is Factory method pattern a specialized case of Template method pattern?","body":"<p>GOF talks about frameworks for \"Factory method\" pattern. Frameworks need objects but implementation of objects depends upon application hence an abstract method to create the object is created. Also as return type is needed so interface for the object needed is defined, it defines the apis needed for the object. Actual objects are created by subclasses (concrete Application) . This is a creational pattern.</p>\n\n<p>For Template pattern the only change is that the encapsulating class does not know the implementation of certain behavior hence it abstracts it in a method , uses it but leaves the implementation to the subclasses. This is behavioral pattern. </p>\n\n<p>Is the only differences between the two are</p>\n\n<pre><code>1. Factory method is creational and Template is behavioural.\n2. Factory method abstracts a method to create an object where as template pattern abstracts a method for some policy or algorithm. \n</code></pre>\n\n<p>example code</p>\n\n<pre><code> /**factory-method example**/\n public abstract class Application{          \n        public void create(){\n              View contentView = createContentView();\n              Menu menu = contentView.obtainMenu();\n              generateMenuItems(menu);\n        }\n        public abstract View createContentView(); //factory-method\n        public void generateMenuItems(Menu menu){\n              // some code\n        }\n }\n\n  /** Product Specification**/            \n public interface View{\n      public abstract Menu obtainMenu();\n      // other abstract method of product\n }\n</code></pre>\n\n<p>Now User code using above will subclass Application and provide implementation for <code>createContentView()</code>. </p>\n\n<p>Template method basic characterstic : Parent class concrete method invoking its abstract method.</p>\n\n<p>Factory method : lets the product creation be implemented by its sub classes.</p>\n\n<p>Above example fits for both. In fact any example for Factory methods fits for Template method as well. </p>\n\n<p>So it is good to say </p>\n\n<ol>\n<li><em>Factory method pattern is specialized template method pattern for obtaining the object whose implementation is dependent upon user code which can provide implementation of object creation in the subclass</em></li>\n<li><em>Template pattern if used for object creation is Factory method pattern.</em></li>\n</ol>\n\n<p><em>My second doubt</em> : Is it mandatory for Factory method (which is as per GOF based on inberitence) to invoke its abstract product producing method from its other concrete method ?</p>\n\n<p>If answer to above is 'No' then this means there will be some consumer code which will have an instance of type Factory (composition),will invoke the factory method to obtain the object of a product and will get concrete factory class injected. But now this becomes abstract factory. </p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1669228737,"post_id":74551476,"comment_id":131599485,"body_markdown":"Why do you want to avoid using `contains` method?","body":"Why do you want to avoid using <code>contains</code> method?"}],"answers":[{"tags":[],"owner":{"account_id":15273588,"reputation":71,"user_id":13427345,"display_name":"O1G"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1669228297,"creation_date":1669228297,"answer_id":74551528,"question_id":74551476,"body_markdown":"You could use `list.indexOf(o) &gt;= 0` but this is just the implementation of contains() in ArrayList. Or you could iterate the list and check with equals() but then that&#39;s basically how indexOf is implemented. ","title":"Alternative way to find out if the element is in the list","body":"<p>You could use <code>list.indexOf(o) &gt;= 0</code> but this is just the implementation of contains() in ArrayList. Or you could iterate the list and check with equals() but then that's basically how indexOf is implemented.</p>\n"}],"owner":{"account_id":20675707,"reputation":11,"user_id":15180377,"display_name":"Tian Yang"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":51,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"answer_count":1,"score":-1,"last_activity_date":1669228297,"creation_date":1669227972,"question_id":74551476,"body_markdown":"Is there an alternative way to check if an element is in the list without using contains() method?","title":"Alternative way to find out if the element is in the list","body":"<p>Is there an alternative way to check if an element is in the list without using contains() method?</p>\n"},{"tags":["java","java-stream","reduce"],"comments":[{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":5,"creation_date":1669192343,"post_id":74543772,"comment_id":131586104,"body_markdown":"Looks like your multiplication is overflowing at some point.","body":"Looks like your multiplication is overflowing at some point."},{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":0,"creation_date":1669192796,"post_id":74543772,"comment_id":131586229,"body_markdown":"From the orders of magnitude alone I&#39;d expect the result of the reduction to have 21 digits minimum. So it&#39;s definitely overflowing - integers have a maximum value of about 2 billion (so 10 digits at most) and longs have about 20 digits max so you&#39;d need to use `BigInteger` for your calculation.","body":"From the orders of magnitude alone I&#39;d expect the result of the reduction to have 21 digits minimum. So it&#39;s definitely overflowing - integers have a maximum value of about 2 billion (so 10 digits at most) and longs have about 20 digits max so you&#39;d need to use <code>BigInteger</code> for your calculation."},{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":0,"creation_date":1669193194,"post_id":74543772,"comment_id":131586348,"body_markdown":"Hint: try logging each result as you produce it, in the lambda expression.","body":"Hint: try logging each result as you produce it, in the lambda expression."}],"answers":[{"tags":[],"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1669228177,"creation_date":1669201477,"answer_id":74545775,"question_id":74543772,"body_markdown":"Firstly, as it has been mentioned in the comments, you&#39;re getting integer overflow. With multiplication, it happens very quickly.\r\n\r\nWe can make use of `BigInteger` to visualize the values:\r\n\r\n```\r\nBigInteger productBi = Arrays.stream(nums)\r\n    .mapToObj(BigInteger::valueOf)\r\n    .reduce(BigInteger.ONE, (acc, a) -&gt; {\r\n        System.out.println(acc);\r\n        return acc.multiply(a);\r\n    });\r\n```\r\nWith your sample-data, the code would produce:\r\n\r\n```\r\n1\r\n41\r\n2665\r\n37310\r\n2984800\r\n59696000\r\n596960000\r\n32832800000 // &lt;- already larger than Integer.MAX_VALUE\r\n...\r\n```\r\nIt shows that overflow happens at the very beginning of the calculation. To find the point when the product becomes zero, let&#39;s switch to the initial code:\r\n\r\n```\r\nint product = Arrays.stream(nums).reduce(1, (acc, a) -&gt; {\r\n    System.out.println(acc + &quot; * &quot; + a);\r\n    return acc * a;\r\n});\r\n```\r\nWould produce:\r\n```\r\n1 * 41\r\n41 * 65\r\n2665 * 14\r\n...\r\n1342177280 * 32 // &lt;- here product turs to zero\r\n0 * 42\r\n...\r\nmore zero\r\n```\r\nIt&#39;s clear that multiplication of `1342177280` and `32` gives `0`. Let&#39;s take a look at these numbers in binary using `Integer.toBinaryString()`:\r\n\r\n```\r\nBits: 1010000000000000000000000000000 // 1342177280\r\nBits: 100000                          // 32\r\n```\r\n\r\nAccording to the [&#167;15.17.1. Java language specification][JLS] when overflow occurs, only low-order bits would be preserved. And in this case, all low-order bits are zero, therefore the product would not contain significant bits and the result would be `0`.\r\n\r\n&gt; If an integer **multiplication overflows**, then the **result is the low-order bits** of the mathematical product as represented in some sufficiently large two&#39;s-complement format.\r\n\r\n\r\n\r\n   [JLS]: https://docs.oracle.com/javase/specs/jls/se17/html/jls-15.html#jls-15.17.1","title":"IntStream.reduce() returns wrong result","body":"<p>Firstly, as it has been mentioned in the comments, you're getting integer overflow. With multiplication, it happens very quickly.</p>\n<p>We can make use of <code>BigInteger</code> to visualize the values:</p>\n<pre><code>BigInteger productBi = Arrays.stream(nums)\n    .mapToObj(BigInteger::valueOf)\n    .reduce(BigInteger.ONE, (acc, a) -&gt; {\n        System.out.println(acc);\n        return acc.multiply(a);\n    });\n</code></pre>\n<p>With your sample-data, the code would produce:</p>\n<pre><code>1\n41\n2665\n37310\n2984800\n59696000\n596960000\n32832800000 // &lt;- already larger than Integer.MAX_VALUE\n...\n</code></pre>\n<p>It shows that overflow happens at the very beginning of the calculation. To find the point when the product becomes zero, let's switch to the initial code:</p>\n<pre><code>int product = Arrays.stream(nums).reduce(1, (acc, a) -&gt; {\n    System.out.println(acc + &quot; * &quot; + a);\n    return acc * a;\n});\n</code></pre>\n<p>Would produce:</p>\n<pre><code>1 * 41\n41 * 65\n2665 * 14\n...\n1342177280 * 32 // &lt;- here product turs to zero\n0 * 42\n...\nmore zero\n</code></pre>\n<p>It's clear that multiplication of <code>1342177280</code> and <code>32</code> gives <code>0</code>. Let's take a look at these numbers in binary using <code>Integer.toBinaryString()</code>:</p>\n<pre><code>Bits: 1010000000000000000000000000000 // 1342177280\nBits: 100000                          // 32\n</code></pre>\n<p>According to the <a href=\"https://docs.oracle.com/javase/specs/jls/se17/html/jls-15.html#jls-15.17.1\" rel=\"nofollow noreferrer\">§15.17.1. Java language specification</a> when overflow occurs, only low-order bits would be preserved. And in this case, all low-order bits are zero, therefore the product would not contain significant bits and the result would be <code>0</code>.</p>\n<blockquote>\n<p>If an integer <strong>multiplication overflows</strong>, then the <strong>result is the low-order bits</strong> of the mathematical product as represented in some sufficiently large two's-complement format.</p>\n</blockquote>\n"}],"owner":{"account_id":27022021,"reputation":13,"user_id":20579864,"display_name":"heh"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":121,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74545775,"answer_count":1,"score":0,"last_activity_date":1669228177,"creation_date":1669192273,"question_id":74543772,"body_markdown":"*My code:*\r\n\r\n```\r\npublic class Main {\r\n    public static void main(String[] args) {\r\n        System.out.println(arraySign(new int[]{41,65,14,80,20,10,55,58,24,56,28,86,96,10,3,\r\n                84,4,41,13,32,42,43,83,78,82,70,15,-41}));\r\n    }\r\n\r\n    public static int arraySign(int[] nums) {\r\n\r\n        int product = Arrays.stream(nums).reduce(1, (acc, a) -&gt; acc * a);\r\n\r\n        if (product != 0)\r\n            return product / Math.abs(product);\r\n\r\n        return product;\r\n    }\r\n}\r\n\r\n```\r\n\r\n*Expected result:* `-1`.\r\n\r\nCan you explain why the method above returns `0`?","title":"IntStream.reduce() returns wrong result","body":"<p><em>My code:</em></p>\n<pre><code>public class Main {\n    public static void main(String[] args) {\n        System.out.println(arraySign(new int[]{41,65,14,80,20,10,55,58,24,56,28,86,96,10,3,\n                84,4,41,13,32,42,43,83,78,82,70,15,-41}));\n    }\n\n    public static int arraySign(int[] nums) {\n\n        int product = Arrays.stream(nums).reduce(1, (acc, a) -&gt; acc * a);\n\n        if (product != 0)\n            return product / Math.abs(product);\n\n        return product;\n    }\n}\n\n</code></pre>\n<p><em>Expected result:</em> <code>-1</code>.</p>\n<p>Can you explain why the method above returns <code>0</code>?</p>\n"},{"tags":["java","game-development","text-based"],"comments":[{"owner":{"account_id":2698782,"reputation":38625,"user_id":2330053,"display_name":"Idle_Mind"},"score":0,"creation_date":1669225975,"post_id":74550881,"comment_id":131598616,"body_markdown":"Can&#39;t see the issue from the posted code. Inside your `for` loop at the top, I&#39;d add: `print(i + &quot;: &quot; + turns.get(i).action);` to see if you can spot the error.","body":"Can&#39;t see the issue from the posted code. Inside your <code>for</code> loop at the top, I&#39;d add: <code>print(i + &quot;: &quot; + turns.get(i).action);</code> to see if you can spot the error."},{"owner":{"account_id":9378,"reputation":14558,"user_id":17300,"display_name":"Stephen P"},"score":1,"creation_date":1669226267,"post_id":74550881,"comment_id":131598723,"body_markdown":"I agree with Idle_Mind, also you may have cut out _too much_ information — are `input`, `cmd`, and `dtct` class member variables in BattleManager? The next line `Arraylist&lt;BattleAction&gt; = new ArrayList&lt;BattleAction&gt;();` you&#39;ve dropped the variable name ... can I assume that one is `turns`? and please fix the indentation and line spacing in the question.","body":"I agree with Idle_Mind, also you may have cut out <i>too much</i> information — are <code>input</code>, <code>cmd</code>, and <code>dtct</code> class member variables in BattleManager? The next line <code>Arraylist&lt;BattleAction&gt; = new ArrayList&lt;BattleAction&gt;();</code> you&#39;ve dropped the variable name ... can I assume that one is <code>turns</code>? and please fix the indentation and line spacing in the question."},{"owner":{"account_id":23361584,"reputation":23,"user_id":17433720,"display_name":"Bread Bouquet"},"score":0,"creation_date":1669227522,"post_id":74550881,"comment_id":131599118,"body_markdown":"Idle_Mind, I have tried adding a print statement in the for loop outside of the switch, but when I do I get 2 different errors. \n\n`Cannot find symbol: i`\n`switch(turns.get(i).action)`\n\nand this:\n\n`illegal parenthesized expression:`\n``switch(turns.get(i).action)`, if you want I can try to put all the code up somewhere but it&#39;s on a VM and I would have difficulty transferring it.","body":"Idle_Mind, I have tried adding a print statement in the for loop outside of the switch, but when I do I get 2 different errors.   <code>Cannot find symbol: i</code> <code>switch(turns.get(i).action)</code>  and this:  <code>illegal parenthesized expression:</code> ``switch(turns.get(i).action)`, if you want I can try to put all the code up somewhere but it&#39;s on a VM and I would have difficulty transferring it."},{"owner":{"account_id":2698782,"reputation":38625,"user_id":2330053,"display_name":"Idle_Mind"},"score":0,"creation_date":1669227880,"post_id":74550881,"comment_id":131599233,"body_markdown":"And you put that inbetween the `for` line and the `switch` line?","body":"And you put that inbetween the <code>for</code> line and the <code>switch</code> line?"},{"owner":{"account_id":2698782,"reputation":38625,"user_id":2330053,"display_name":"Idle_Mind"},"score":0,"creation_date":1669228047,"post_id":74550881,"comment_id":131599288,"body_markdown":"Do you by chance have a semi-colon `;` after the right parenthesis `)` of your `for` loop, before the left bracket `{`? Like this? `for (int i = 0; i != turns.size(); i ++); {`","body":"Do you by chance have a semi-colon <code>;</code> after the right parenthesis <code>)</code> of your <code>for</code> loop, before the left bracket <code>{</code>? Like this? <code>for (int i = 0; i != turns.size(); i ++); {</code>"},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1669254482,"post_id":74550881,"comment_id":131605005,"body_markdown":"I doubt posting *all* of the code is a good idea. Instead, are you able to create and post a [Minimal Reproducible Example](https://stackoverflow.com/help/minimal-reproducible-example) ?","body":"I doubt posting <i>all</i> of the code is a good idea. Instead, are you able to create and post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">Minimal Reproducible Example</a> ?"},{"owner":{"account_id":23361584,"reputation":23,"user_id":17433720,"display_name":"Bread Bouquet"},"score":0,"creation_date":1669314741,"post_id":74550881,"comment_id":131621503,"body_markdown":"Idle_Mind, I think this was the issue, the code compiled fine so I guess I didn&#39;t notice it. This was driving me crazy, sorry for not noticing","body":"Idle_Mind, I think this was the issue, the code compiled fine so I guess I didn&#39;t notice it. This was driving me crazy, sorry for not noticing"},{"owner":{"account_id":2698782,"reputation":38625,"user_id":2330053,"display_name":"Idle_Mind"},"score":0,"creation_date":1669316983,"post_id":74550881,"comment_id":131622039,"body_markdown":"No worries! My Computer Science students  do this all the time. Drives them nuts, too. Compiles fine, and is super hard to spot! You can also make this mistake with an `if` and a `while` statement...","body":"No worries! My Computer Science students  do this all the time. Drives them nuts, too. Compiles fine, and is super hard to spot! You can also make this mistake with an <code>if</code> and a <code>while</code> statement..."},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1669322933,"post_id":74550881,"comment_id":131623275,"body_markdown":"It&#39;s called a &quot;null statement&quot; or &quot;empty statement&quot;.  https://stackoverflow.com/questions/32593218/why-does-java-have-an-empty-statement","body":"It&#39;s called a &quot;null statement&quot; or &quot;empty statement&quot;.  <a href=\"https://stackoverflow.com/questions/32593218/why-does-java-have-an-empty-statement\" title=\"why does java have an empty statement\">stackoverflow.com/questions/32593218/&hellip;</a>"},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1669338538,"post_id":74550881,"comment_id":131625687,"body_markdown":"Since the problem was resolved without an answer, consider deleting the question.","body":"Since the problem was resolved without an answer, consider deleting the question."},{"owner":{"account_id":2698782,"reputation":38625,"user_id":2330053,"display_name":"Idle_Mind"},"score":0,"creation_date":1669338646,"post_id":74550881,"comment_id":131625696,"body_markdown":"No, I should definitely get infinite points for correctly deducing the problem without it actually being posted in the question.  ;)","body":"No, I should definitely get infinite points for correctly deducing the problem without it actually being posted in the question.  ;)"}],"owner":{"account_id":23361584,"reputation":23,"user_id":17433720,"display_name":"Bread Bouquet"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":72,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1669227387,"creation_date":1669224684,"question_id":74550881,"body_markdown":"Essentially, I&#39;ve put a switch statement in a for loop. It has not been working as intended. I think it has something to with the break statement.\r\n\r\nWhat I want the loop to do is go to the first element in the array list, execute code based on the &#39;action&#39; String, then go to the next until the list ends. However, it seems that whenever I run the program it only executes the code in the first index. Here is some code for the BattleManager class:\r\n\r\n    Scanner input = new Scanner(System.in);\r\n    String cmd;\r\n    String[] dtct;\r\n    Arraylist&lt;BattleAction&gt; turns = new ArrayList&lt;BattleAction&gt;();\r\n    \r\n    \r\n    \r\n    public void handle() {\r\n    cmd = input.nextLine();\r\n    dtct = (cmd.split());\r\n    \r\n    switch(dtct[0]) {\r\n    case &quot;attack&quot;:\r\n    \r\n    turns.add(new BattleAction(&quot;playerattack&quot;));\r\n    getenemyaction();\r\n    turnsequence();  \r\n\r\n  \r\n    break;\r\n    \r\n    case &quot;defend&quot;:\r\n    getenemyaction();\r\n    turnsequence()\r\n        }\r\n    }\r\n\r\n\r\n    public void getenemyaction() {\r\n    \r\n    turns.add(new BattleAction(&quot;enemyattack&quot;));\r\n    }\r\n\r\n    public void turnsequence() {\r\n    \r\n    Collections.sort(turns);\r\n    print(&quot;Size: &quot; + turns.size())\r\n    for (int i = 0; i != turns.size(); i ++) {\r\n    \r\n    switch(turns.get(i).action) {\r\n    \r\n    case &quot;playerattack&quot;:\r\n    playerattack();\r\n    break;\r\n    \r\n    case &quot;enemyattack&quot;:\r\n    enemyattack();\r\n    break;\r\n      }\r\n    \r\n     }\r\n    }\r\n\r\n    public void playerattack() {\r\n    \r\n    print(&quot;Player attack&quot;);\r\n    }\r\n    \r\n    \r\n    public void enemyattack() {\r\n    print(&quot;Enemy attack&quot;);\r\n    }\r\n\r\n\r\nWhen I run the program here is the output I am getting with the attack command:\r\n\r\n    attack\r\n    Size: 2\r\n    Player Attack\r\n\r\n\r\nHowever when I use the defend command the output is:\r\n\r\n    defend\r\n    Size: 1\r\n    Enemy Attack\r\n\r\n\r\nThe desired output would be for turnsequence() to go through turns and do check action for the desired code to be executed, like this:\r\n\r\n    attack\r\n    Size: 2\r\n    Player Attack\r\n    Enemy Attack\r\n\r\n\r\nI have done my best to cut out as much unnecessary information at possible to prevent confusion. Thank you so much for reading my post! I really appreciate your help! ","title":"Problem with Switch statement in for loop for turn based RPG battle in java","body":"<p>Essentially, I've put a switch statement in a for loop. It has not been working as intended. I think it has something to with the break statement.</p>\n<p>What I want the loop to do is go to the first element in the array list, execute code based on the 'action' String, then go to the next until the list ends. However, it seems that whenever I run the program it only executes the code in the first index. Here is some code for the BattleManager class:</p>\n<pre><code>Scanner input = new Scanner(System.in);\nString cmd;\nString[] dtct;\nArraylist&lt;BattleAction&gt; turns = new ArrayList&lt;BattleAction&gt;();\n\n\n\npublic void handle() {\ncmd = input.nextLine();\ndtct = (cmd.split());\n\nswitch(dtct[0]) {\ncase &quot;attack&quot;:\n\nturns.add(new BattleAction(&quot;playerattack&quot;));\ngetenemyaction();\nturnsequence();  \n\n\nbreak;\n\ncase &quot;defend&quot;:\ngetenemyaction();\nturnsequence()\n    }\n}\n\n\npublic void getenemyaction() {\n\nturns.add(new BattleAction(&quot;enemyattack&quot;));\n}\n\npublic void turnsequence() {\n\nCollections.sort(turns);\nprint(&quot;Size: &quot; + turns.size())\nfor (int i = 0; i != turns.size(); i ++) {\n\nswitch(turns.get(i).action) {\n\ncase &quot;playerattack&quot;:\nplayerattack();\nbreak;\n\ncase &quot;enemyattack&quot;:\nenemyattack();\nbreak;\n  }\n\n }\n}\n\npublic void playerattack() {\n\nprint(&quot;Player attack&quot;);\n}\n\n\npublic void enemyattack() {\nprint(&quot;Enemy attack&quot;);\n}\n</code></pre>\n<p>When I run the program here is the output I am getting with the attack command:</p>\n<pre><code>attack\nSize: 2\nPlayer Attack\n</code></pre>\n<p>However when I use the defend command the output is:</p>\n<pre><code>defend\nSize: 1\nEnemy Attack\n</code></pre>\n<p>The desired output would be for turnsequence() to go through turns and do check action for the desired code to be executed, like this:</p>\n<pre><code>attack\nSize: 2\nPlayer Attack\nEnemy Attack\n</code></pre>\n<p>I have done my best to cut out as much unnecessary information at possible to prevent confusion. Thank you so much for reading my post! I really appreciate your help!</p>\n"},{"tags":["java","spring","junit","mocking","spring-batch"],"comments":[{"owner":{"account_id":6482932,"reputation":29552,"user_id":5019386,"display_name":"Mahmoud Ben Hassine"},"score":0,"creation_date":1669268915,"post_id":74549250,"comment_id":131607099,"body_markdown":"Before going further on testing the feature flag, I suggest you fix your item writer implementation by extracting the delegate setup from the `write` method. Currently you are creating a new jdbcBatchItemWriter in each chunk of data, which is incorrect .","body":"Before going further on testing the feature flag, I suggest you fix your item writer implementation by extracting the delegate setup from the <code>write</code> method. Currently you are creating a new jdbcBatchItemWriter in each chunk of data, which is incorrect ."},{"owner":{"account_id":10940791,"reputation":141,"user_id":8040727,"display_name":"Pinki Sharma"},"score":0,"creation_date":1695654885,"post_id":74549250,"comment_id":136050128,"body_markdown":"@shoaib-jpeg did you able to fix it &amp; make it work ?","body":"@shoaib-jpeg did you able to fix it &amp; make it work ?"}],"owner":{"account_id":19648643,"reputation":9,"user_id":14383031,"display_name":"shoaib-jpeg"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":248,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1669226619,"creation_date":1669217142,"question_id":74549250,"body_markdown":"I have a spring batch application which writes to an SQL database. I have the block of code which writes to the DB wrapped in a feature flag condition as shown below:\r\n\r\n    public class TreatmentWriter implements ItemWriter&lt;TreatmentData&gt; {\r\n    \r\n        JdbcBatchItemWriter&lt;TreatmentData&gt; jdbcBatchItemWriter;\r\n    \r\n        @Autowired\r\n        @Qualifier(&quot;dataSource&quot;)\r\n        private DataSource dataSource;\r\n    \r\n        @Autowired\r\n        @Qualifier(&quot;shawQuery&quot;)\r\n        private String shawQuery;\r\n    \r\n        @Autowired\r\n        FeatureManager featureManager;\r\n    \r\n        @Override\r\n        public void write(List&lt;? extends TreatmentData&gt; processedData) {\r\n            for (TreatmentData data : processedData) {\r\n                log.debug(&quot;Writing processed data: &quot; + data.getTreatment());\r\n            }\r\n            try {\r\n                if (featureManager.isActive(FeaturesToToggle.FEATURE_FLAG)) {\r\n                    log.debug(&quot;Query to update staging table: &quot; + shawQuery);\r\n                    jdbcBatchItemWriter = new JdbcBatchItemWriter&lt;&gt;();\r\n                    jdbcBatchItemWriter.setItemSqlParameterSourceProvider(new BeanPropertyItemSqlParameterSourceProvider&lt;&gt;());\r\n                    jdbcBatchItemWriter.setDataSource(dataSource);\r\n                    jdbcBatchItemWriter.setSql(shawQuery);\r\n                    jdbcBatchItemWriter.write(processedData);\r\n                } else {\r\n                    log.info(&quot;feature flag is disabled&quot;);\r\n                }\r\n            } catch (Exception ex) {\r\n                log.error(&quot;Error writing to DB: {}&quot;, ex);\r\n            }\r\n        }\r\n    }\r\n\r\nFor the unit tests I&#39;m writing, I want to test the function of the feature flag and simply mock the writing to the DB. The way I have the tests setup however, the test fails saying that the `jdbcBatchItemWriter.write()` method call was never called\r\n\r\n    @ExtendWith(MockitoExtension.class)\r\n    @TestInstance(TestInstance.Lifecycle.PER_CLASS)\r\n    @ActiveProfiles(&quot;test&quot;)\r\n    @ContextConfiguration(classes = { TreatmentWriter.class})\r\n    public class TreatmentWriterTest {\r\n    \r\n        private MemoryAppender memoryAppender;\r\n    \r\n        @InjectMocks\r\n        TreatmentWriter treatmentWriter;\r\n    \r\n        @Mock\r\n        private FeatureManager featureManager;\r\n    \r\n        @Spy\r\n        private JdbcBatchItemWriter&lt;TreatmentData&gt; jdbcBatchItemWriter;\r\n    \r\n        @Mock\r\n        private SecretsBeans secretsBeans;\r\n    \r\n        @Mock\r\n        private DataSource shawDataSourceCollectEtl;\r\n    \r\n        @BeforeEach\r\n        public void init() throws NoSuchFieldException, IllegalAccessException {\r\n            Logger logger = (Logger) LoggerFactory.getLogger(&quot;com.ally.cr&quot;);\r\n            memoryAppender = new MemoryAppender();\r\n            memoryAppender.setContext((LoggerContext) LoggerFactory.getILoggerFactory());\r\n            logger.setLevel(Level.DEBUG);\r\n            logger.addAppender(memoryAppender);\r\n            memoryAppender.start();\r\n        }\r\n    \r\n        @Test\r\n        public void UT_whenFeatureFlagIsOn_writeToShaw() throws Exception {\r\n            mockFeatureFlag(true); //setting flag to true\r\n    \r\n            Field shawQuery;\r\n            shawQuery = treatmentWriter.getClass().getDeclaredField(&quot;shawQuery&quot;);\r\n            shawQuery.setAccessible(true);\r\n            shawQuery.set(treatmentWriter, &quot;&quot;);\r\n    \r\n            TreatmentData treatmentData = createTreatmentData(); //generating test data\r\n        \r\n            treatmentWriter.write(Arrays.asList(treatmentData));\r\n            assertThat(memoryAppender.search(&quot;Query to update Shaw staging table: &quot;, Level.INFO).size()).isEqualTo(1);\r\n            verify(jdbcBatchItemWriter).write(any(List.class));\r\n        }\r\n    }\r\n\r\nWhat can I do differently to allow this test to pass? I thought maybe by adding the line `doNothing().when(jdbcBatchItemWriter).write(any(List.class));` I can solve it, but I guess all that does is make sure nothing is returned during that method call (I know it already doesn&#39;t return anything).\r\n\r\nI&#39;d appreciate any help on this. Thanks in advance!","title":"JUnit: Mocking a JDBC write method in Spring Batch","body":"<p>I have a spring batch application which writes to an SQL database. I have the block of code which writes to the DB wrapped in a feature flag condition as shown below:</p>\n<pre><code>public class TreatmentWriter implements ItemWriter&lt;TreatmentData&gt; {\n\n    JdbcBatchItemWriter&lt;TreatmentData&gt; jdbcBatchItemWriter;\n\n    @Autowired\n    @Qualifier(&quot;dataSource&quot;)\n    private DataSource dataSource;\n\n    @Autowired\n    @Qualifier(&quot;shawQuery&quot;)\n    private String shawQuery;\n\n    @Autowired\n    FeatureManager featureManager;\n\n    @Override\n    public void write(List&lt;? extends TreatmentData&gt; processedData) {\n        for (TreatmentData data : processedData) {\n            log.debug(&quot;Writing processed data: &quot; + data.getTreatment());\n        }\n        try {\n            if (featureManager.isActive(FeaturesToToggle.FEATURE_FLAG)) {\n                log.debug(&quot;Query to update staging table: &quot; + shawQuery);\n                jdbcBatchItemWriter = new JdbcBatchItemWriter&lt;&gt;();\n                jdbcBatchItemWriter.setItemSqlParameterSourceProvider(new BeanPropertyItemSqlParameterSourceProvider&lt;&gt;());\n                jdbcBatchItemWriter.setDataSource(dataSource);\n                jdbcBatchItemWriter.setSql(shawQuery);\n                jdbcBatchItemWriter.write(processedData);\n            } else {\n                log.info(&quot;feature flag is disabled&quot;);\n            }\n        } catch (Exception ex) {\n            log.error(&quot;Error writing to DB: {}&quot;, ex);\n        }\n    }\n}\n</code></pre>\n<p>For the unit tests I'm writing, I want to test the function of the feature flag and simply mock the writing to the DB. The way I have the tests setup however, the test fails saying that the <code>jdbcBatchItemWriter.write()</code> method call was never called</p>\n<pre><code>@ExtendWith(MockitoExtension.class)\n@TestInstance(TestInstance.Lifecycle.PER_CLASS)\n@ActiveProfiles(&quot;test&quot;)\n@ContextConfiguration(classes = { TreatmentWriter.class})\npublic class TreatmentWriterTest {\n\n    private MemoryAppender memoryAppender;\n\n    @InjectMocks\n    TreatmentWriter treatmentWriter;\n\n    @Mock\n    private FeatureManager featureManager;\n\n    @Spy\n    private JdbcBatchItemWriter&lt;TreatmentData&gt; jdbcBatchItemWriter;\n\n    @Mock\n    private SecretsBeans secretsBeans;\n\n    @Mock\n    private DataSource shawDataSourceCollectEtl;\n\n    @BeforeEach\n    public void init() throws NoSuchFieldException, IllegalAccessException {\n        Logger logger = (Logger) LoggerFactory.getLogger(&quot;com.ally.cr&quot;);\n        memoryAppender = new MemoryAppender();\n        memoryAppender.setContext((LoggerContext) LoggerFactory.getILoggerFactory());\n        logger.setLevel(Level.DEBUG);\n        logger.addAppender(memoryAppender);\n        memoryAppender.start();\n    }\n\n    @Test\n    public void UT_whenFeatureFlagIsOn_writeToShaw() throws Exception {\n        mockFeatureFlag(true); //setting flag to true\n\n        Field shawQuery;\n        shawQuery = treatmentWriter.getClass().getDeclaredField(&quot;shawQuery&quot;);\n        shawQuery.setAccessible(true);\n        shawQuery.set(treatmentWriter, &quot;&quot;);\n\n        TreatmentData treatmentData = createTreatmentData(); //generating test data\n    \n        treatmentWriter.write(Arrays.asList(treatmentData));\n        assertThat(memoryAppender.search(&quot;Query to update Shaw staging table: &quot;, Level.INFO).size()).isEqualTo(1);\n        verify(jdbcBatchItemWriter).write(any(List.class));\n    }\n}\n</code></pre>\n<p>What can I do differently to allow this test to pass? I thought maybe by adding the line <code>doNothing().when(jdbcBatchItemWriter).write(any(List.class));</code> I can solve it, but I guess all that does is make sure nothing is returned during that method call (I know it already doesn't return anything).</p>\n<p>I'd appreciate any help on this. Thanks in advance!</p>\n"},{"tags":["java"],"comments":[{"owner":{"display_name":"user6073886"},"score":2,"creation_date":1669218769,"post_id":74549567,"comment_id":131595918,"body_markdown":"Does this answer your question? [How do I compare strings in Java?](https://stackoverflow.com/questions/513832/how-do-i-compare-strings-in-java)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/513832/how-do-i-compare-strings-in-java\">How do I compare strings in Java?</a>"},{"owner":{"display_name":"user6073886"},"score":0,"creation_date":1669218926,"post_id":74549567,"comment_id":131595968,"body_markdown":"You also might want to read up what the `substring(int beginindex)` actually does: https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html#substring(int) - You seem to think it will return you a single letter as a String. This is not the case. Never guess what methods do, always check what they actually do in the documentation.","body":"You also might want to read up what the <code>substring(int beginindex)</code> actually does: <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html#substring(int)\" rel=\"nofollow noreferrer\">docs.oracle.com/en/java/javase/11/docs/api/java.base/java/la&zwnj;&#8203;ng/&hellip;</a> - You seem to think it will return you a single letter as a String. This is not the case. Never guess what methods do, always check what they actually do in the documentation."}],"answers":[{"comments":[{"owner":{"account_id":27026326,"reputation":1,"user_id":20583533,"display_name":"Katie-Kat"},"score":0,"creation_date":1669379580,"post_id":74549671,"comment_id":131634176,"body_markdown":"Thank you, I figure it out now. By using charAt(i). It what I tried first but the whole string/char comparison through my off,","body":"Thank you, I figure it out now. By using charAt(i). It what I tried first but the whole string/char comparison through my off,"},{"owner":{"account_id":7971577,"reputation":3673,"user_id":6016064,"accept_rate":71,"display_name":"Edward Peters"},"score":0,"creation_date":1669383950,"post_id":74549671,"comment_id":131635660,"body_markdown":"`chatAt` is a good approach, `&quot;someString.equals()` is fine too. The whole mess of primitives vs. objects vs. strings is really a java problem - the language is old enough to be saddled with some design choices I don&#39;t think anyone would make today, and they trip a lot of people up.","body":"<code>chatAt</code> is a good approach, <code>&quot;someString.equals()</code> is fine too. The whole mess of primitives vs. objects vs. strings is really a java problem - the language is old enough to be saddled with some design choices I don&#39;t think anyone would make today, and they trip a lot of people up."},{"owner":{"account_id":27026326,"reputation":1,"user_id":20583533,"display_name":"Katie-Kat"},"score":0,"creation_date":1669405025,"post_id":74549671,"comment_id":131641383,"body_markdown":"I agree I learnt ruby, but am going for a role that requires Java, so trying to learn it. Another aspect that confuse me is telling what data type a variable is when assigning that data type. It seems silly to say hey this variable I&#39;m assigning an integer to is an integer variable","body":"I agree I learnt ruby, but am going for a role that requires Java, so trying to learn it. Another aspect that confuse me is telling what data type a variable is when assigning that data type. It seems silly to say hey this variable I&#39;m assigning an integer to is an integer variable"},{"owner":{"account_id":7971577,"reputation":3673,"user_id":6016064,"accept_rate":71,"display_name":"Edward Peters"},"score":0,"creation_date":1669408750,"post_id":74549671,"comment_id":131642093,"body_markdown":"@Katie-Kat So there are two things going on there - `dynamic` vs `static` typing, and whether or not a language has type inference. I&#39;ll go to the trenches defending static typing, because it can save you from an incredible number of bugs, and can be a tool for enforcing safe design. Dynamic languages like python feel like trying to build a house out of cooked spaghetti, to me. Type inference is another matter - generally I think it&#39;s worth it for saving verbosity. Java has some, but it was a late addition and not as strong as in many other languages.","body":"@Katie-Kat So there are two things going on there - <code>dynamic</code> vs <code>static</code> typing, and whether or not a language has type inference. I&#39;ll go to the trenches defending static typing, because it can save you from an incredible number of bugs, and can be a tool for enforcing safe design. Dynamic languages like python feel like trying to build a house out of cooked spaghetti, to me. Type inference is another matter - generally I think it&#39;s worth it for saving verbosity. Java has some, but it was a late addition and not as strong as in many other languages."}],"tags":[],"owner":{"account_id":7971577,"reputation":3673,"user_id":6016064,"accept_rate":71,"display_name":"Edward Peters"},"comment_count":4,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1669218929,"creation_date":1669218929,"answer_id":74549671,"question_id":74549567,"body_markdown":"Good time to learn some basic debugging!\r\n\r\nLet&#39;s look at what&#39;s actually in that `substring` you&#39;re looking at. Add \r\n`System.out.println(dna.substring(i));`\r\nto your loop. You&#39;ll see:\r\n\r\n```\r\nATGCGATACGCTTGA\r\nTGCGATACGCTTGA\r\nGCGATACGCTTGA\r\nCGATACGCTTGA\r\nGATACGCTTGA\r\nATACGCTTGA\r\nTACGCTTGA\r\nACGCTTGA\r\nCGCTTGA\r\nGCTTGA\r\nCTTGA\r\nTTGA\r\nTGA\r\nGA\r\nA\r\n```\r\n\r\nSo, `substring` doesn&#39;t mean what you thought it did - it&#39;s taking the substring *starting* at that index and going to the end of the string. Only the last character has a chance of matching your conditions.\r\n\r\nThough, that last one still won&#39;t match your condition, which is understandably surprising if you&#39;re new to the language. In Java, `==` is &quot;referential equality&quot; - when applied to non-primitives, it&#39;s asserting the two things occupy the same location in memory. For strings in particular, this can give surprising and inconsistent results. Java keeps a special section of memory for strings, and tries to avoid duplicates (but doesn&#39;t try *that* hard.) The important takeaway is that `string1.equals(string2)` is the correct way to check.\r\n\r\nIt&#39;s a good idea to do some visibility and sanity checks like that, when your program isn&#39;t doing what you think it is. With a little practice you&#39;ll get a feel for what values to inspect.\r\n\r\n","title":"the counter is not updating with my loop and I don&#39;t know why","body":"<p>Good time to learn some basic debugging!</p>\n<p>Let's look at what's actually in that <code>substring</code> you're looking at. Add\n<code>System.out.println(dna.substring(i));</code>\nto your loop. You'll see:</p>\n<pre><code>ATGCGATACGCTTGA\nTGCGATACGCTTGA\nGCGATACGCTTGA\nCGATACGCTTGA\nGATACGCTTGA\nATACGCTTGA\nTACGCTTGA\nACGCTTGA\nCGCTTGA\nGCTTGA\nCTTGA\nTTGA\nTGA\nGA\nA\n</code></pre>\n<p>So, <code>substring</code> doesn't mean what you thought it did - it's taking the substring <em>starting</em> at that index and going to the end of the string. Only the last character has a chance of matching your conditions.</p>\n<p>Though, that last one still won't match your condition, which is understandably surprising if you're new to the language. In Java, <code>==</code> is &quot;referential equality&quot; - when applied to non-primitives, it's asserting the two things occupy the same location in memory. For strings in particular, this can give surprising and inconsistent results. Java keeps a special section of memory for strings, and tries to avoid duplicates (but doesn't try <em>that</em> hard.) The important takeaway is that <code>string1.equals(string2)</code> is the correct way to check.</p>\n<p>It's a good idea to do some visibility and sanity checks like that, when your program isn't doing what you think it is. With a little practice you'll get a feel for what values to inspect.</p>\n"},{"tags":[],"owner":{"account_id":14781952,"reputation":120,"user_id":10675247,"display_name":"Philippe Fery"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669219884,"creation_date":1669219884,"answer_id":74549884,"question_id":74549567,"body_markdown":"Edward Peters is right about misuse of `substring` that returns a String.\r\nIn Java, string must be places between **double quotes**. A String is an object and you must use method `equals` to compare 2 objects:\r\n\r\n    String a = &quot;first string&quot;;\r\n    String b = &quot;second string&quot;;\r\n    boolean result = a.equals(b));\r\n\r\nIn your case, you should consider using `charAt(int)` instead. Chars must be places between **simple quotes**. A char is a primitive type (not an object) and you must use a double equals sign to compare two of them:\r\n\r\n    char a = &#39;6&#39;;\r\n    char b = &#39;t&#39;;\r\n    boolean result = (a==b);\r\n\r\nSo, your code should look like this:  \r\n\r\n    public class DNA {\r\n        \r\n        \tpublic static void main(String[] args) {\r\n        \t\tString dna1 = &quot;ATGCGATACGCTTGA&quot;;\r\n        \t\tString dna2 = &quot;ATGCGATACGTGA&quot;;\r\n        \t\tString dna3 = &quot;ATTAATATGTACTGA&quot;;\r\n        \t\tString dna = dna1;\r\n        \t\tint aCount = 0;\r\n        \t\tint cCount = 0;\r\n        \t\tint tCount = 0;\r\n        \r\n        \t\tfor (int i = 0; i &lt; dna.length(); i++) {\r\n        \t\t\tif (dna.charAt(i) == &#39;A&#39;) {\r\n        \t\t\t\taCount += 1;\r\n        \t\t\t} else if (dna.charAt(i) == &#39;C&#39;) {\r\n        \t\t\t\tcCount++;\r\n        \t\t\t} else if (dna.charAt(i) == &#39;T&#39;) {\r\n        \t\t\t\ttCount++;\r\n        \t\t\t}\r\n        \t\t\tSystem.out.println(aCount);\r\n        \t\t}\r\n        \t}\r\n        }","title":"the counter is not updating with my loop and I don&#39;t know why","body":"<p>Edward Peters is right about misuse of <code>substring</code> that returns a String.\nIn Java, string must be places between <strong>double quotes</strong>. A String is an object and you must use method <code>equals</code> to compare 2 objects:</p>\n<pre><code>String a = &quot;first string&quot;;\nString b = &quot;second string&quot;;\nboolean result = a.equals(b));\n</code></pre>\n<p>In your case, you should consider using <code>charAt(int)</code> instead. Chars must be places between <strong>simple quotes</strong>. A char is a primitive type (not an object) and you must use a double equals sign to compare two of them:</p>\n<pre><code>char a = '6';\nchar b = 't';\nboolean result = (a==b);\n</code></pre>\n<p>So, your code should look like this:</p>\n<pre><code>public class DNA {\n    \n        public static void main(String[] args) {\n            String dna1 = &quot;ATGCGATACGCTTGA&quot;;\n            String dna2 = &quot;ATGCGATACGTGA&quot;;\n            String dna3 = &quot;ATTAATATGTACTGA&quot;;\n            String dna = dna1;\n            int aCount = 0;\n            int cCount = 0;\n            int tCount = 0;\n    \n            for (int i = 0; i &lt; dna.length(); i++) {\n                if (dna.charAt(i) == 'A') {\n                    aCount += 1;\n                } else if (dna.charAt(i) == 'C') {\n                    cCount++;\n                } else if (dna.charAt(i) == 'T') {\n                    tCount++;\n                }\n                System.out.println(aCount);\n            }\n        }\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":27015200,"reputation":71,"user_id":20574184,"display_name":"mttt"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669220050,"creation_date":1669220050,"answer_id":74549921,"question_id":74549567,"body_markdown":"*substring(i)* doesn&#39;t select one character but all the characters from i to the string length, then you also made a wrong comparison: *==* checks &#39;object identity&#39;, while you want to check that they are equals.\r\n\r\nYou could substitute\r\n\r\n*if (dna.substring(i) == &quot;A&quot;)*\r\n\r\nwith:\r\n\r\n*if (dna.charAt(i) == &#39;A&#39;)*\r\n\r\nthis works because *charAt(i)* returns a primitive type, thus you can correctly compare it to *&#39;A&#39;* using *==*\r\n","title":"the counter is not updating with my loop and I don&#39;t know why","body":"<p><em>substring(i)</em> doesn't select one character but all the characters from i to the string length, then you also made a wrong comparison: <em>==</em> checks 'object identity', while you want to check that they are equals.</p>\n<p>You could substitute</p>\n<p><em>if (dna.substring(i) == &quot;A&quot;)</em></p>\n<p>with:</p>\n<p><em>if (dna.charAt(i) == 'A')</em></p>\n<p>this works because <em>charAt(i)</em> returns a primitive type, thus you can correctly compare it to <em>'A'</em> using <em>==</em></p>\n"},{"tags":[],"owner":{"account_id":1689973,"reputation":37330,"user_id":1552534,"display_name":"WJS"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669226551,"creation_date":1669224421,"answer_id":74550827,"question_id":74549567,"body_markdown":"One of the problems, as stated, was the way you are comparing Strings. Here is a way \r\nthat uses a switch statement and a iterated array of characters. I put all the strings in an array. If you only have one string, the outer loop can be eliminated.\r\n```\r\npublic class DNA {\r\n\r\n    public static void main(String[] args) {\r\n        String dna1 = &quot;ATGCGATACGCTTGA&quot;;\r\n        String dna2 = &quot;ATGCGATACGTGA&quot;;\r\n        String dna3 = &quot;ATTAATATGTACTGA&quot;;\r\n\r\n        String[] dnaStrings =\r\n            {dna1,dna2,dna3};\r\n        int aCount = 0;\r\n        int cCount = 0;\r\n        int tCount = 0;\r\n        int gCount = 0;\r\n        for (String dnaString : dnaStrings) {\r\n            for (char c : dnaString.toCharArray()) {\r\n                switch (c)  {\r\n                    case &#39;A&#39; -&gt; aCount++;\r\n                    case &#39;T&#39; -&gt; tCount++;\r\n                    case &#39;C&#39; -&gt; cCount++;\r\n                    case &#39;G&#39; -&gt; gCount++;\r\n                }\r\n            }\r\n        }\r\n        System.out.println(&quot;A&#39;s = &quot; + aCount);\r\n        System.out.println(&quot;T&#39;s = &quot; + tCount);\r\n        System.out.println(&quot;C&#39;s = &quot; + cCount);\r\n        System.out.println(&quot;G&#39;s = &quot; + gCount);\r\n}\r\n```\r\nprints\r\n```\r\nA&#39;s = 14\r\nT&#39;s = 13\r\nC&#39;s = 6\r\nG&#39;s = 10","title":"the counter is not updating with my loop and I don&#39;t know why","body":"<p>One of the problems, as stated, was the way you are comparing Strings. Here is a way\nthat uses a switch statement and a iterated array of characters. I put all the strings in an array. If you only have one string, the outer loop can be eliminated.</p>\n<pre><code>public class DNA {\n\n    public static void main(String[] args) {\n        String dna1 = &quot;ATGCGATACGCTTGA&quot;;\n        String dna2 = &quot;ATGCGATACGTGA&quot;;\n        String dna3 = &quot;ATTAATATGTACTGA&quot;;\n\n        String[] dnaStrings =\n            {dna1,dna2,dna3};\n        int aCount = 0;\n        int cCount = 0;\n        int tCount = 0;\n        int gCount = 0;\n        for (String dnaString : dnaStrings) {\n            for (char c : dnaString.toCharArray()) {\n                switch (c)  {\n                    case 'A' -&gt; aCount++;\n                    case 'T' -&gt; tCount++;\n                    case 'C' -&gt; cCount++;\n                    case 'G' -&gt; gCount++;\n                }\n            }\n        }\n        System.out.println(&quot;A's = &quot; + aCount);\n        System.out.println(&quot;T's = &quot; + tCount);\n        System.out.println(&quot;C's = &quot; + cCount);\n        System.out.println(&quot;G's = &quot; + gCount);\n}\n</code></pre>\n<p>prints</p>\n<pre><code>A's = 14\nT's = 13\nC's = 6\nG's = 10\n</code></pre>\n"}],"owner":{"account_id":27026326,"reputation":1,"user_id":20583533,"display_name":"Katie-Kat"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":66,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":4,"score":0,"last_activity_date":1669226551,"creation_date":1669218575,"question_id":74549567,"body_markdown":"I&#39;m trying to practice for a techniqual test where I have to count the number of characters in a DNA sequence, but no matter what I do the counter won&#39;t update, this is really frustrating as I learnt code with ruby and it would update, but Java seems to have an issue. I know there&#39;s something wrong with my syntaxt but for the life of me I can&#39;t figure it out.  \r\n\r\n```\r\npublic class DNA {\r\n\r\n  public static void main(String[] args) {\r\n    String dna1 = &quot;ATGCGATACGCTTGA&quot;;\r\n    String dna2 = &quot;ATGCGATACGTGA&quot;;\r\n    String dna3 = &quot;ATTAATATGTACTGA&quot;;\r\n    String dna = dna1;\r\n    int aCount = 0;\r\n    int cCount = 0;\r\n    int tCount = 0; \r\n\r\n    for (int i = 0; i &lt;= dna.length(); i++) {\r\n\r\n      if (dna.substring(i) == &quot;A&quot;) {\r\n        aCount+= 1;\r\n      }\r\n      else if (dna.substring(i) == &quot;C&quot;) {\r\n        cCount++;\r\n      } \r\n      else if (dna.substring(i) == &quot;T&quot;) {\r\n        tCount++;\r\n      }\r\n      System.out.println(aCount);\r\n    } \r\n  }\r\n}\r\n```\r\n\r\nIt just keeps returning zero instead of adding one to it if the conditions are meet and reassigning the value. ","title":"the counter is not updating with my loop and I don&#39;t know why","body":"<p>I'm trying to practice for a techniqual test where I have to count the number of characters in a DNA sequence, but no matter what I do the counter won't update, this is really frustrating as I learnt code with ruby and it would update, but Java seems to have an issue. I know there's something wrong with my syntaxt but for the life of me I can't figure it out.</p>\n<pre><code>public class DNA {\n\n  public static void main(String[] args) {\n    String dna1 = &quot;ATGCGATACGCTTGA&quot;;\n    String dna2 = &quot;ATGCGATACGTGA&quot;;\n    String dna3 = &quot;ATTAATATGTACTGA&quot;;\n    String dna = dna1;\n    int aCount = 0;\n    int cCount = 0;\n    int tCount = 0; \n\n    for (int i = 0; i &lt;= dna.length(); i++) {\n\n      if (dna.substring(i) == &quot;A&quot;) {\n        aCount+= 1;\n      }\n      else if (dna.substring(i) == &quot;C&quot;) {\n        cCount++;\n      } \n      else if (dna.substring(i) == &quot;T&quot;) {\n        tCount++;\n      }\n      System.out.println(aCount);\n    } \n  }\n}\n</code></pre>\n<p>It just keeps returning zero instead of adding one to it if the conditions are meet and reassigning the value.</p>\n"},{"tags":["java","guava"],"comments":[{"owner":{"account_id":968743,"reputation":3452,"user_id":991710,"accept_rate":82,"display_name":"filpa"},"score":1,"creation_date":1669226947,"post_id":74551119,"comment_id":131598927,"body_markdown":"The Java GC does not necessarily run immediately when some memory region is reclaimable (i.e. no longer strongly referenced by anything). It&#39;s up to the GC when to run and there&#39;s relatively little you can do from application code to force it to run - it is suggested to tune the JVM if one has a certain GC behaviour in mind. That said, are you actually running into OOM errors?","body":"The Java GC does not necessarily run immediately when some memory region is reclaimable (i.e. no longer strongly referenced by anything). It&#39;s up to the GC when to run and there&#39;s relatively little you can do from application code to force it to run - it is suggested to tune the JVM if one has a certain GC behaviour in mind. That said, are you actually running into OOM errors?"},{"owner":{"account_id":26963252,"reputation":41,"user_id":20530585,"display_name":"programmerlife"},"score":1,"creation_date":1669227126,"post_id":74551119,"comment_id":131598971,"body_markdown":"No errors as such, but since the application is running on container the load grows on host which will impact other applications. Also at one instance the application got stuck which I suspect was due to memory.","body":"No errors as such, but since the application is running on container the load grows on host which will impact other applications. Also at one instance the application got stuck which I suspect was due to memory."},{"owner":{"account_id":968743,"reputation":3452,"user_id":991710,"accept_rate":82,"display_name":"filpa"},"score":1,"creation_date":1669227250,"post_id":74551119,"comment_id":131599022,"body_markdown":"Are you running Java &gt;9? If so, the JVM will honor limits set on the container such as available memory (it did not in Java 8). One option would be to set the maximum memory that the container can use.","body":"Are you running Java &gt;9? If so, the JVM will honor limits set on the container such as available memory (it did not in Java 8). One option would be to set the maximum memory that the container can use."},{"owner":{"account_id":26963252,"reputation":41,"user_id":20530585,"display_name":"programmerlife"},"score":1,"creation_date":1669227521,"post_id":74551119,"comment_id":131599117,"body_markdown":"I&#39;m using Java 8 only, I&#39;ve limits set on the container but I expect my application to reach near 70% those limits during certain times, but due to these objects taking up the memory I worry the memory usage is more that even during regular usage, I&#39;m worried what will happen at that time. It has failed once.","body":"I&#39;m using Java 8 only, I&#39;ve limits set on the container but I expect my application to reach near 70% those limits during certain times, but due to these objects taking up the memory I worry the memory usage is more that even during regular usage, I&#39;m worried what will happen at that time. It has failed once."},{"owner":{"account_id":26963252,"reputation":41,"user_id":20530585,"display_name":"programmerlife"},"score":0,"creation_date":1669227586,"post_id":74551119,"comment_id":131599143,"body_markdown":"Do you have any idea on the second part of the question?","body":"Do you have any idea on the second part of the question?"},{"owner":{"account_id":2706706,"reputation":852,"user_id":2336165,"display_name":"lfmunoz"},"score":1,"creation_date":1678234510,"post_id":74551119,"comment_id":133493157,"body_markdown":"having issues with this as well. When I add objects to cache and overwrite it, it is not being garbage collected. When I create object and then null the variable holding then call   System.gc() it will get garbage collected immediately.","body":"having issues with this as well. When I add objects to cache and overwrite it, it is not being garbage collected. When I create object and then null the variable holding then call   System.gc() it will get garbage collected immediately."}],"owner":{"account_id":26963252,"reputation":41,"user_id":20530585,"display_name":"programmerlife"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":274,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":0,"score":3,"last_activity_date":1669226304,"creation_date":1669225927,"question_id":74551119,"body_markdown":"I&#39;ve a use case where I want a time-bounded map with expiring entries for which I&#39;m using Guava Cache. The application is run inside a container, and I&#39;ve the following configuration for the cache - thus entries older than 5 secs expire or if the cache reach the defined size they are evicted (as I can see from the logs being printed from removal notifier). But the issue is the memory usage is ever-growing and is never freed up, my guess here is probably the entries have become eligible for GC but are not taken up yet. \r\n\r\n\r\n```\r\nCacheBuilder.newBuilder()\r\n       .maximumSize(1000)\r\n       .expireAfterWrite(5, TimeUnit.SECONDS)\r\n       .removalListener(this::logEviction)\r\n       .build()\r\n\r\n```\r\n\r\n\r\nSo I wanted to understand when exactly does GC will happen after eviction? i.e. If an entry is expired and removed from the Cache, when will it be freed from memory? \r\n\r\nAlso when I use weakValues, I don&#39;t face this problem but I am see some values are evicted with cause as &quot;COLLECTED&quot; (while others are either &quot;EXPIRED&quot; or &quot;SIZE&quot;, which means they were garbage collected as per documentation. What I want to understand here is, are they garbage collected even before other conditions were met (i.e. expiry time or maximum size)?","title":"Guava Cache - When are the evicted items garbage collected? How is the behaviour different when we use weakValues?","body":"<p>I've a use case where I want a time-bounded map with expiring entries for which I'm using Guava Cache. The application is run inside a container, and I've the following configuration for the cache - thus entries older than 5 secs expire or if the cache reach the defined size they are evicted (as I can see from the logs being printed from removal notifier). But the issue is the memory usage is ever-growing and is never freed up, my guess here is probably the entries have become eligible for GC but are not taken up yet.</p>\n<pre><code>CacheBuilder.newBuilder()\n       .maximumSize(1000)\n       .expireAfterWrite(5, TimeUnit.SECONDS)\n       .removalListener(this::logEviction)\n       .build()\n\n</code></pre>\n<p>So I wanted to understand when exactly does GC will happen after eviction? i.e. If an entry is expired and removed from the Cache, when will it be freed from memory?</p>\n<p>Also when I use weakValues, I don't face this problem but I am see some values are evicted with cause as &quot;COLLECTED&quot; (while others are either &quot;EXPIRED&quot; or &quot;SIZE&quot;, which means they were garbage collected as per documentation. What I want to understand here is, are they garbage collected even before other conditions were met (i.e. expiry time or maximum size)?</p>\n"},{"tags":["java","graphics","bluej"],"comments":[{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":1,"creation_date":1669235803,"post_id":74551156,"comment_id":131601374,"body_markdown":"Applets are dead - you&#39;ll get no support for them here.","body":"Applets are dead - you&#39;ll get no support for them here."},{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1669236089,"post_id":74551156,"comment_id":131601439,"body_markdown":"You need to offset the inner graph so that it starts at the corner of the inner rectangle, so that when you do things like `y4 -= w2div;` it takes into account the new starting position","body":"You need to offset the inner graph so that it starts at the corner of the inner rectangle, so that when you do things like <code>y4 -= w2div;</code> it takes into account the new starting position"},{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1669236376,"post_id":74551156,"comment_id":131601505,"body_markdown":"You have a lot of repeating code - it would be a lot easier to create a few methods which took this into account in some way - also, you should consider having a look at [`Graphics#translate(int, int)`](https://docs.oracle.com/en/java/javase/16/docs/api/java.desktop/java/awt/Graphics.html#translate(int,int)), just remember, you need to  undo this afterwards","body":"You have a lot of repeating code - it would be a lot easier to create a few methods which took this into account in some way - also, you should consider having a look at <a href=\"https://docs.oracle.com/en/java/javase/16/docs/api/java.desktop/java/awt/Graphics.html#translate(int,int)\" rel=\"nofollow noreferrer\"><code>Graphics#translate(int, int)</code></a>, just remember, you need to  undo this afterwards"},{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1669237331,"post_id":74551156,"comment_id":131601767,"body_markdown":"If I was doing this, I&#39;d be tempted to create a single method to draw the graph and then use an `AffineTransform` to translate it&#39;s position and rotate/flip it - but that might just cause you to flip out","body":"If I was doing this, I&#39;d be tempted to create a single method to draw the graph and then use an <code>AffineTransform</code> to translate it&#39;s position and rotate/flip it - but that might just cause you to flip out"}],"owner":{"account_id":26754585,"reputation":1,"user_id":20353405,"display_name":"Noxhh"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":23,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1669226097,"creation_date":1669226097,"question_id":74551156,"body_markdown":"I am trying to finish a project that I have been working on for fun on Java, and I&#39;m genuinely trying to figure this out. Here is the code. I put a comment where the problem starts.\r\n\r\n```\r\n// Lab04vst.java\r\n// \r\n\r\nimport java.awt.*;\r\nimport java.applet.*;\r\n\r\npublic class Lab04vsthome extends Applet\r\n{\r\n    public void paint(Graphics g)\r\n    {\r\n        int width = 980;\r\n        int height = 630;\r\n        int x1 = 10;\r\n        int y1 = 640;\r\n        int x2 = 990;\r\n        int y2 = 640;\r\n        g.drawRect(10,10,width,height);\r\n\r\n        int hdiv = height/50;\r\n        int wdiv = width/50;\r\n\r\n        //bottom right\r\n        for(int k = 0; k &lt;= 50; k++)\r\n        {\r\n            g.drawLine(x1,y1,x2,y2);\r\n            y2 -= hdiv;\r\n            x1 += wdiv;\r\n        }   \r\n\r\n        x1 = 10;\r\n        y1 = 640;\r\n        x2 = 990;\r\n        y2 = 640;\r\n\r\n        //bottom left\r\n        for(int k = 0; k &lt;= 50; k++)\r\n        {\r\n            g.drawLine(x1,y1,x2,y2);\r\n            y1 -= hdiv;\r\n            x2 -= wdiv;\r\n        }   \r\n\r\n        x1 = 10;\r\n        y1 = 10;\r\n        x2 = 990;\r\n        y2 = 10;\r\n\r\n        //top right\r\n        for(int k = 0; k &lt;= 50; k++)\r\n        {\r\n            g.drawLine(x1,y1,x2,y2);\r\n            y2 += hdiv;\r\n            x1 += wdiv;\r\n        }   \r\n\r\n        x1 = 10;\r\n        y1 = 10;\r\n        x2 = 990;\r\n        y2 = 10;\r\n\r\n        //top left\r\n        for(int k = 0; k &lt;= 50; k++)\r\n        {\r\n            g.drawLine(x1,y1,x2,y2);\r\n            y1 += hdiv;\r\n            x2 -= wdiv;\r\n        }\r\n        \r\n        x1 = 10;\r\n        y1 = 640;\r\n        x2 = 990;\r\n        y2 = 640;\r\n        \r\n        //problem starts here\r\n        int width2 = 500;\r\n        int height2 = 312;\r\n        g.drawRect(250, 170, width2, height2);\r\n        \r\n        int x3 = 250;\r\n        int y3 = 322;\r\n        int x4 = 510;\r\n        int y4 = 322;\r\n        \r\n        int w2div = width2 / 50;\r\n        int h2div = height2 / 50;\r\n        \r\n        \r\n        for (int k = 0; k &lt;= 50; k++)\r\n        {\r\n            g.drawLine(x3,y3,x4,y4);\r\n            y4 -= w2div;\r\n            x3 += h2div;\r\n        }\r\n    }\r\n}\r\n\r\n```\r\n\r\nIt is supposed to generate the shapes on the outside of the box in the center, in the inside box. When I tried to make this happen with one of them, I can&#39;t figure out a way to move it and to stop it from going out, and I&#39;m genuinely stumped at this point. The solution is probably obvious, but I&#39;m newer to doing graphs and loops in Java so I&#39;m stumped at this point. If it matters at all, I&#39;m using BlueJ. Can anyone help?","title":"Java Graphic problem with getting correct generation on my graphic lines","body":"<p>I am trying to finish a project that I have been working on for fun on Java, and I'm genuinely trying to figure this out. Here is the code. I put a comment where the problem starts.</p>\n<pre><code>// Lab04vst.java\n// \n\nimport java.awt.*;\nimport java.applet.*;\n\npublic class Lab04vsthome extends Applet\n{\n    public void paint(Graphics g)\n    {\n        int width = 980;\n        int height = 630;\n        int x1 = 10;\n        int y1 = 640;\n        int x2 = 990;\n        int y2 = 640;\n        g.drawRect(10,10,width,height);\n\n        int hdiv = height/50;\n        int wdiv = width/50;\n\n        //bottom right\n        for(int k = 0; k &lt;= 50; k++)\n        {\n            g.drawLine(x1,y1,x2,y2);\n            y2 -= hdiv;\n            x1 += wdiv;\n        }   \n\n        x1 = 10;\n        y1 = 640;\n        x2 = 990;\n        y2 = 640;\n\n        //bottom left\n        for(int k = 0; k &lt;= 50; k++)\n        {\n            g.drawLine(x1,y1,x2,y2);\n            y1 -= hdiv;\n            x2 -= wdiv;\n        }   \n\n        x1 = 10;\n        y1 = 10;\n        x2 = 990;\n        y2 = 10;\n\n        //top right\n        for(int k = 0; k &lt;= 50; k++)\n        {\n            g.drawLine(x1,y1,x2,y2);\n            y2 += hdiv;\n            x1 += wdiv;\n        }   \n\n        x1 = 10;\n        y1 = 10;\n        x2 = 990;\n        y2 = 10;\n\n        //top left\n        for(int k = 0; k &lt;= 50; k++)\n        {\n            g.drawLine(x1,y1,x2,y2);\n            y1 += hdiv;\n            x2 -= wdiv;\n        }\n        \n        x1 = 10;\n        y1 = 640;\n        x2 = 990;\n        y2 = 640;\n        \n        //problem starts here\n        int width2 = 500;\n        int height2 = 312;\n        g.drawRect(250, 170, width2, height2);\n        \n        int x3 = 250;\n        int y3 = 322;\n        int x4 = 510;\n        int y4 = 322;\n        \n        int w2div = width2 / 50;\n        int h2div = height2 / 50;\n        \n        \n        for (int k = 0; k &lt;= 50; k++)\n        {\n            g.drawLine(x3,y3,x4,y4);\n            y4 -= w2div;\n            x3 += h2div;\n        }\n    }\n}\n\n</code></pre>\n<p>It is supposed to generate the shapes on the outside of the box in the center, in the inside box. When I tried to make this happen with one of them, I can't figure out a way to move it and to stop it from going out, and I'm genuinely stumped at this point. The solution is probably obvious, but I'm newer to doing graphs and loops in Java so I'm stumped at this point. If it matters at all, I'm using BlueJ. Can anyone help?</p>\n"},{"tags":["java","hibernate","jpa","hibernate-mapping","hibernate-annotations"],"owner":{"account_id":27027177,"reputation":11,"user_id":20584236,"display_name":"Javier Gil"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1669225614,"creation_date":1669225614,"question_id":74551066,"body_markdown":"I&#39;ve a custom implementation of `PropertyAccessor` that only works if I declare it in the XML mapping file, but not when using field annotations in POJOs).\r\n\r\n\r\nI try the following:\r\n- With hibernate-core (4.2), XML works but annotation `@AccessType` doesn&#39;t. \r\n- With hibernate-core (4.3), XML not tested, annotation `@AttributeAccessor` doesn&#39;t work, same problem\r\n- Use `@ColumnTransformer` and `@Formula` instead, but I&#39;ve not found a formula or a function that suits my needs.\r\n\r\nI expect `@AccessType=(&quot;my.custom.property.accessor&quot;)` or `@AttributeAccessor(&quot;my.custom.property.accessor&quot;)` to work, but it seems that these annotations or actually their content are ignored.\r\n\r\nAs a precision, I use field access.\r\n\r\nAny help will be really appreciated, I want to move to annotations instead of XML mapping files, and this issue is preventing me to do it.\r\n\r\nThanks in advance.","title":"Problem using custom PropertyAccessor implementation with annotations","body":"<p>I've a custom implementation of <code>PropertyAccessor</code> that only works if I declare it in the XML mapping file, but not when using field annotations in POJOs).</p>\n<p>I try the following:</p>\n<ul>\n<li>With hibernate-core (4.2), XML works but annotation <code>@AccessType</code> doesn't.</li>\n<li>With hibernate-core (4.3), XML not tested, annotation <code>@AttributeAccessor</code> doesn't work, same problem</li>\n<li>Use <code>@ColumnTransformer</code> and <code>@Formula</code> instead, but I've not found a formula or a function that suits my needs.</li>\n</ul>\n<p>I expect <code>@AccessType=(&quot;my.custom.property.accessor&quot;)</code> or <code>@AttributeAccessor(&quot;my.custom.property.accessor&quot;)</code> to work, but it seems that these annotations or actually their content are ignored.</p>\n<p>As a precision, I use field access.</p>\n<p>Any help will be really appreciated, I want to move to annotations instead of XML mapping files, and this issue is preventing me to do it.</p>\n<p>Thanks in advance.</p>\n"},{"tags":["java","spring-boot","debugging","gradle","tomcat"],"comments":[{"owner":{"account_id":23288659,"reputation":56,"user_id":17371071,"display_name":"Fabricio Entringer Moreira"},"score":0,"creation_date":1666161132,"post_id":74120593,"comment_id":130866840,"body_markdown":"I think this thread can help you: https://stackoverflow.com/questions/40118878/8080-port-already-taken-issue-when-trying-to-redeploy-project-from-spring-tool-s","body":"I think this thread can help you: <a href=\"https://stackoverflow.com/questions/40118878/8080-port-already-taken-issue-when-trying-to-redeploy-project-from-spring-tool-s\" title=\"8080 port already taken issue when trying to redeploy project from spring tool s\">stackoverflow.com/questions/40118878/&hellip;</a>"},{"owner":{"account_id":26667438,"reputation":11,"user_id":20279320,"display_name":"Atul Gupta"},"score":0,"creation_date":1666163969,"post_id":74120593,"comment_id":130867666,"body_markdown":"@FabricioEntringerMoreira Most of the answers suggest killing the process that is occupying the port. I am already doing this, but force killing the process manually every time doesn&#39;t seem to be solution. Is there anything specific on this thread that I should try?","body":"@FabricioEntringerMoreira Most of the answers suggest killing the process that is occupying the port. I am already doing this, but force killing the process manually every time doesn&#39;t seem to be solution. Is there anything specific on this thread that I should try?"}],"answers":[{"tags":[],"owner":{"account_id":2486870,"reputation":685,"user_id":2165146,"display_name":"muhammed ozbilici"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669225429,"creation_date":1669225429,"answer_id":74551026,"question_id":74120593,"body_markdown":"You can do `netsh winsock reset` and restart the PC.","title":"Web server failed to start. Port 8080 was already in use while re-debugging spring boot application","body":"<p>You can do <code>netsh winsock reset</code> and restart the PC.</p>\n"}],"owner":{"account_id":26667438,"reputation":11,"user_id":20279320,"display_name":"Atul Gupta"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":523,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1669225429,"creation_date":1666159780,"question_id":74120593,"body_markdown":"I am trying to run my Spring boot application in debug mode {Intellij Idea}.\r\nWhen I debug the application for the first time, it works. However, on stopping the process and running the application again gives me this error.\r\n\r\n    Error starting ApplicationContext. To display the conditions report re-run your application with &#39;debug&#39; enabled.\r\n    ***************************\r\n    APPLICATION FAILED TO START\r\n    ***************************\r\n    Description:\r\n    Web server failed to start. Port 8080 was already in use.\r\n    Action:\r\n    Identify and stop the process that&#39;s listening on port 8080 or configure this application to listen on another port.\r\n    \r\n    &gt; Task :bootRun FAILED\r\n    Execution failed for task &#39;:bootRun&#39;.\r\n    &gt; Process &#39;..\\jdk11.0.16_9\\bin\\java.exe&#39;&#39; finished with non-zero exit value 1 \r\n\r\nThe problem is that port 8080 doesn&#39;t get released when I stop the execution.\r\nIf I try to manually kill the process using `taskkill /pid &lt;pid&gt; /f`, then I am able to re-run the application, but I have to repeat manually killing the previous process on port 8080 every time I want to re-run the application. Is there a way to overcome this issue?\r\n\r\nTIA!","title":"Web server failed to start. Port 8080 was already in use while re-debugging spring boot application","body":"<p>I am trying to run my Spring boot application in debug mode {Intellij Idea}.\nWhen I debug the application for the first time, it works. However, on stopping the process and running the application again gives me this error.</p>\n<pre><code>Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.\n***************************\nAPPLICATION FAILED TO START\n***************************\nDescription:\nWeb server failed to start. Port 8080 was already in use.\nAction:\nIdentify and stop the process that's listening on port 8080 or configure this application to listen on another port.\n\n&gt; Task :bootRun FAILED\nExecution failed for task ':bootRun'.\n&gt; Process '..\\jdk11.0.16_9\\bin\\java.exe'' finished with non-zero exit value 1 \n</code></pre>\n<p>The problem is that port 8080 doesn't get released when I stop the execution.\nIf I try to manually kill the process using <code>taskkill /pid &lt;pid&gt; /f</code>, then I am able to re-run the application, but I have to repeat manually killing the previous process on port 8080 every time I want to re-run the application. Is there a way to overcome this issue?</p>\n<p>TIA!</p>\n"},{"tags":["java","android"],"answers":[{"comments":[{"owner":{"account_id":25938653,"reputation":43,"user_id":19658497,"display_name":"neverStop"},"score":0,"creation_date":1661507750,"post_id":73426438,"comment_id":129793946,"body_markdown":"I am in activity. It&#39;s the same even I use getSupportActionBar().getThemedContext().setTheme(androidx.appcompat.R.style.Base_ThemeOverlay_AppCompat_Light);\nthe changes happen to OverflowMenu popup theme.","body":"I am in activity. It&#39;s the same even I use getSupportActionBar().getThemedContext().setTheme(androidx.a&zwnj;&#8203;ppcompat.R.style.Bas&zwnj;&#8203;e_ThemeOverlay_AppCo&zwnj;&#8203;mpat_Light); the changes happen to OverflowMenu popup theme."}],"tags":[],"owner":{"account_id":19942592,"reputation":9,"user_id":14614018,"display_name":"Rachid Le Laborantin"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660995911,"creation_date":1660995911,"answer_id":73426438,"question_id":73425303,"body_markdown":"Are you in activity or fragment?\r\nIf activity, try \r\ngetSupportActionBar() to get the toolbar used ","title":"How to change toolbar style programmatically? When I try to do this popup menu changes instead of the toolbar","body":"<p>Are you in activity or fragment?\nIf activity, try\ngetSupportActionBar() to get the toolbar used</p>\n"},{"tags":[],"owner":{"account_id":402229,"reputation":94004,"user_id":769265,"display_name":"David Wasser"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1669225349,"creation_date":1669225349,"answer_id":74551007,"question_id":73425303,"body_markdown":"Using this code:\r\n\r\n    toolbar.getContext().setTheme(R.style.toolbarStyle);\r\n\r\nset&#39;s the theme on the entire `Activity`, because you&#39;ve called `setTheme()` on the `Activity`&#39;s `Context`.\r\n\r\nA theme is intended to be for an entire application, not just for an individual UI element. You want to use styling to style just this one UI element.\r\n\r\nIf you have a custom toolbar, then you should just create methods on your custom toolbar to adjust these styles and call those methods from your `Activity`.","title":"How to change toolbar style programmatically? When I try to do this popup menu changes instead of the toolbar","body":"<p>Using this code:</p>\n<pre><code>toolbar.getContext().setTheme(R.style.toolbarStyle);\n</code></pre>\n<p>set's the theme on the entire <code>Activity</code>, because you've called <code>setTheme()</code> on the <code>Activity</code>'s <code>Context</code>.</p>\n<p>A theme is intended to be for an entire application, not just for an individual UI element. You want to use styling to style just this one UI element.</p>\n<p>If you have a custom toolbar, then you should just create methods on your custom toolbar to adjust these styles and call those methods from your <code>Activity</code>.</p>\n"}],"owner":{"account_id":25938653,"reputation":43,"user_id":19658497,"display_name":"neverStop"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":203,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":74551007,"answer_count":2,"score":3,"last_activity_date":1669225349,"creation_date":1660985294,"question_id":73425303,"body_markdown":"I have a custom toolbar for my app, but in one of the activities I want to change the style of the toolbar programatically. This is the style for the toolbar that I want to apply programmatically.\r\n\r\n    &lt;style name=&quot;toolbarStyle&quot; parent=&quot;ThemeOverlay.AppCompat.Dark&quot;&gt;\r\n        &lt;item name=&quot;android:background&quot;&gt;@color/teal_200&lt;/item&gt;\r\n        &lt;item name=&quot;colorAccent&quot;&gt;@android:color/white&lt;/item&gt;\r\n    &lt;/style&gt;\r\n\r\n\r\nI use this code to change toolbar style programmatically\r\n\r\n    toolbar.getContext().setTheme(R.style.toolbarStyle);\r\n\r\n\r\nThe problem is, the popup theme changes instead of the toolbar.\r\n\r\nHow to fix it?","title":"How to change toolbar style programmatically? When I try to do this popup menu changes instead of the toolbar","body":"<p>I have a custom toolbar for my app, but in one of the activities I want to change the style of the toolbar programatically. This is the style for the toolbar that I want to apply programmatically.</p>\n<pre><code>&lt;style name=&quot;toolbarStyle&quot; parent=&quot;ThemeOverlay.AppCompat.Dark&quot;&gt;\n    &lt;item name=&quot;android:background&quot;&gt;@color/teal_200&lt;/item&gt;\n    &lt;item name=&quot;colorAccent&quot;&gt;@android:color/white&lt;/item&gt;\n&lt;/style&gt;\n</code></pre>\n<p>I use this code to change toolbar style programmatically</p>\n<pre><code>toolbar.getContext().setTheme(R.style.toolbarStyle);\n</code></pre>\n<p>The problem is, the popup theme changes instead of the toolbar.</p>\n<p>How to fix it?</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":12514905,"reputation":2245,"user_id":9194639,"display_name":"new Q Open Wid"},"score":0,"creation_date":1661016882,"post_id":73428759,"comment_id":129672805,"body_markdown":"Does the code you&#39;ve shown work?","body":"Does the code you&#39;ve shown work?"},{"owner":{"account_id":25938653,"reputation":43,"user_id":19658497,"display_name":"neverStop"},"score":0,"creation_date":1661021019,"post_id":73428759,"comment_id":129673625,"body_markdown":"The code works, but I want to access this class and change the line colors.","body":"The code works, but I want to access this class and change the line colors."},{"owner":{"account_id":25938653,"reputation":43,"user_id":19658497,"display_name":"neverStop"},"score":0,"creation_date":1661069854,"post_id":73428759,"comment_id":129679821,"body_markdown":"I need to change the line colors in another activity.","body":"I need to change the line colors in another activity."},{"owner":{"account_id":402229,"reputation":94004,"user_id":769265,"display_name":"David Wasser"},"score":0,"creation_date":1669224822,"post_id":73428759,"comment_id":131598245,"body_markdown":"To change line colors in another `Activity1` you need to use your custom `LinedEditText` instead of `EditText` in the layout for the other `Activity`.","body":"To change line colors in another <code>Activity1</code> you need to use your custom <code>LinedEditText</code> instead of <code>EditText</code> in the layout for the other <code>Activity</code>."},{"owner":{"account_id":25938653,"reputation":43,"user_id":19658497,"display_name":"neverStop"},"score":0,"creation_date":1669225307,"post_id":73428759,"comment_id":131598413,"body_markdown":"@DavidWasser Thanks for your comment. I already fixed that but I forgot to post my answer. Now I&#39;ll post the answer.","body":"@DavidWasser Thanks for your comment. I already fixed that but I forgot to post my answer. Now I&#39;ll post the answer."}],"answers":[{"tags":[],"owner":{"account_id":25938653,"reputation":43,"user_id":19658497,"display_name":"neverStop"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1669225335,"creation_date":1669225335,"answer_id":74551002,"question_id":73428759,"body_markdown":"    public  class LinedEditText extends EditText {\r\n\r\n    private Rect mRect;\r\n    protected Paint mPaint;\r\n\r\n    // we need this constructor for LayoutInflater\r\n    public LinedEditText(Context context, AttributeSet attrs) {\r\n        super(context, attrs);\r\n\r\n        mRect = new Rect();\r\n        mPaint = new Paint();\r\n        mPaint.setStyle(Paint.Style.FILL_AND_STROKE);\r\n        mPaint.setColor(Color.parseColor(&quot;#82B6C6&quot;));\r\n    }\r\n\r\n    @Override\r\n    public void onDraw(Canvas canvas) {\r\n        //int count = getLineCount();\r\n\r\n        int height = getHeight();\r\n        int line_height = getLineHeight();\r\n\r\n        int count = height / line_height;\r\n\r\n        if (getLineCount() &gt; count)\r\n            count = getLineCount();//for long text with scrolling\r\n\r\n\r\n        Rect r = mRect;\r\n        Paint paint = mPaint;\r\n        int baseline = getLineBounds(0, r);//first line\r\n\r\n        for (int i = 0; i &lt; count; i++) {\r\n\r\n            canvas.drawLine(r.left, baseline + 1, r.right, baseline + 1, paint);\r\n            baseline += getLineHeight();//next line\r\n        }\r\n\r\n        super.onDraw(canvas);\r\n    }\r\n}\r\n","title":"How to change the editText line colors programmatically?","body":"<pre><code>public  class LinedEditText extends EditText {\n\nprivate Rect mRect;\nprotected Paint mPaint;\n\n// we need this constructor for LayoutInflater\npublic LinedEditText(Context context, AttributeSet attrs) {\n    super(context, attrs);\n\n    mRect = new Rect();\n    mPaint = new Paint();\n    mPaint.setStyle(Paint.Style.FILL_AND_STROKE);\n    mPaint.setColor(Color.parseColor(&quot;#82B6C6&quot;));\n}\n\n@Override\npublic void onDraw(Canvas canvas) {\n    //int count = getLineCount();\n\n    int height = getHeight();\n    int line_height = getLineHeight();\n\n    int count = height / line_height;\n\n    if (getLineCount() &gt; count)\n        count = getLineCount();//for long text with scrolling\n\n\n    Rect r = mRect;\n    Paint paint = mPaint;\n    int baseline = getLineBounds(0, r);//first line\n\n    for (int i = 0; i &lt; count; i++) {\n\n        canvas.drawLine(r.left, baseline + 1, r.right, baseline + 1, paint);\n        baseline += getLineHeight();//next line\n    }\n\n    super.onDraw(canvas);\n}\n</code></pre>\n<p>}</p>\n"}],"owner":{"account_id":25938653,"reputation":43,"user_id":19658497,"display_name":"neverStop"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74551002,"answer_count":1,"score":0,"last_activity_date":1669225335,"creation_date":1661016447,"question_id":73428759,"body_markdown":"I use this class to make lines inside editText which works well. I want to change the line colors in another activities programmatically. How to do that?\r\n\r\n    \r\n    public  class LinedEditText extends androidx.appcompat.widget.AppCompatEditText{\r\n        public final Paint mPaint = new Paint();\r\n    \r\n        public LinedEditText(Context context) {\r\n            super(context);\r\n            initPaint();\r\n        }\r\n\r\n        public LinedEditText(Context context, AttributeSet attrs) {\r\n            super(context, attrs);\r\n            initPaint();\r\n        }\r\n\r\n        public LinedEditText(Context context, AttributeSet attrs, int defStyle) {\r\n            super(context, attrs, defStyle);\r\n            initPaint();\r\n        }\r\n\r\n        private void initPaint() {\r\n            mPaint.setStyle(Paint.Style.STROKE);\r\n            mPaint.setColor(Color.BLUE);\r\n        }\r\n\r\n        @Override protected void onDraw(Canvas canvas) {\r\n            int left = getLeft();\r\n            int right = getRight();\r\n            int paddingTop = getPaddingTop();\r\n            int paddingBottom = getPaddingBottom();\r\n            int paddingLeft = getPaddingLeft();\r\n            int paddingRight = getPaddingRight();\r\n            int height = getHeight();\r\n            int lineHeight = getLineHeight();\r\n            int count = (height-paddingTop-paddingBottom) / lineHeight;\r\n\r\n            for (int i = 0; i &lt; count; i++) {\r\n                int baseline = lineHeight * (i+1) + paddingTop;\r\n                canvas.drawLine(left+paddingLeft, baseline, right-paddingRight, baseline, mPaint);\r\n            }\r\n\r\n            super.onDraw(canvas);\r\n        }\r\n    }\r\n\r\n\r\nSecond question is, how to make new line when the user pressed enter or return key so as to the will have something like unlimited lines?","title":"How to change the editText line colors programmatically?","body":"<p>I use this class to make lines inside editText which works well. I want to change the line colors in another activities programmatically. How to do that?</p>\n<pre><code>public  class LinedEditText extends androidx.appcompat.widget.AppCompatEditText{\n    public final Paint mPaint = new Paint();\n\n    public LinedEditText(Context context) {\n        super(context);\n        initPaint();\n    }\n\n    public LinedEditText(Context context, AttributeSet attrs) {\n        super(context, attrs);\n        initPaint();\n    }\n\n    public LinedEditText(Context context, AttributeSet attrs, int defStyle) {\n        super(context, attrs, defStyle);\n        initPaint();\n    }\n\n    private void initPaint() {\n        mPaint.setStyle(Paint.Style.STROKE);\n        mPaint.setColor(Color.BLUE);\n    }\n\n    @Override protected void onDraw(Canvas canvas) {\n        int left = getLeft();\n        int right = getRight();\n        int paddingTop = getPaddingTop();\n        int paddingBottom = getPaddingBottom();\n        int paddingLeft = getPaddingLeft();\n        int paddingRight = getPaddingRight();\n        int height = getHeight();\n        int lineHeight = getLineHeight();\n        int count = (height-paddingTop-paddingBottom) / lineHeight;\n\n        for (int i = 0; i &lt; count; i++) {\n            int baseline = lineHeight * (i+1) + paddingTop;\n            canvas.drawLine(left+paddingLeft, baseline, right-paddingRight, baseline, mPaint);\n        }\n\n        super.onDraw(canvas);\n    }\n}\n</code></pre>\n<p>Second question is, how to make new line when the user pressed enter or return key so as to the will have something like unlimited lines?</p>\n"},{"tags":["java","spring","spring-boot","filter"],"answers":[{"tags":[],"owner":{"account_id":6676840,"reputation":2927,"user_id":5151202,"display_name":"times29"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1669202718,"creation_date":1669202718,"answer_id":74546019,"question_id":74545265,"body_markdown":"You could define an [`AuthenticationEntryPoint`](https://docs.spring.io/spring-security/site/docs/current/api/org/springframework/security/web/AuthenticationEntryPoint.html) and use the given `HttpServletResponse` to write your response body as desired.  \r\n\r\nThis is an example where I return a translated string as response body:  \r\n```java\r\nimport lombok.RequiredArgsConstructor;\r\nimport org.springframework.context.support.MessageSourceAccessor;\r\nimport org.springframework.security.core.AuthenticationException;\r\nimport org.springframework.stereotype.Component;\r\n\r\nimport javax.servlet.http.HttpServletRequest;\r\nimport javax.servlet.http.HttpServletResponse;\r\nimport java.io.IOException;\r\n\r\n@Component\r\n@RequiredArgsConstructor\r\npublic class CustomAuthenticationEntryPoint implements AuthenticationEntryPoint {\r\n\r\n    private final MessageSourceAccessor messages;\r\n\r\n    /**\r\n     * This is invoked when a user tries to access a secured REST resource without supplying valid credentials.\r\n     * A 401 Unauthorized HTTP Status code will be returned as there is no login page to redirect to.\r\n     */\r\n    @Override\r\n    public void commence(final HttpServletRequest request, \r\n                         final HttpServletResponse response,\r\n                         final AuthenticationException authException) throws IOException {\r\n        response.sendError(HttpServletResponse.SC_UNAUTHORIZED, messages.getMessage(&quot;error.unauthorized&quot;));\r\n    }\r\n}\r\n```\r\n\r\nYou then need to register your the `AuthenticationEntryPoint` in your Spring Security config.\r\n\r\nOld way:\r\n```java\r\n@Configuration\r\n@EnableWebSecurity\r\n@RequiredArgsConstructor\r\npublic class WebSecurityConfiguration extends WebSecurityConfigurerAdapter {\r\n\r\n    private final CustomAuthenticationEntryPoint authenticationEntryPoint;\r\n\r\n    @Override\r\n    protected void configure(HttpSecurity http) throws Exception {\r\n        http\r\n          // all your other security config\r\n          .exceptionHandling().authenticationEntryPoint(authenticationEntryPoint);\r\n    }\r\n```\r\n\r\nNew way:\r\n```java\r\n@Configuration\r\n@EnableWebSecurity\r\n@RequiredArgsConstructor\r\npublic class WebSecurityConfiguration {\r\n\r\n    private final CustomAuthenticationEntryPoint authenticationEntryPoint;\r\n\r\n    @Bean\r\n    SecurityFilterChain testSecurityFilterChain(HttpSecurity http) throws Exception {\r\n        return http\r\n          // all your other security config\r\n          .exceptionHandling().authenticationEntryPoint(authenticationEntryPoint);\r\n    }\r\n}\r\n```\r\n\r\nDepending on your authentication mechanism, Spring provides a matching `AuthenticationEntryPoint` implementation, e.g. for OAuth it might [`BearerTokenAuthenticationEntryPoint`](https://docs.spring.io/spring-security/site/docs/current/api/org/springframework/security/oauth2/server/resource/web/BearerTokenAuthenticationEntryPoint.html). It might be useful to check what your current `AuthenticationEntryPoint` implementation does and copy some of the logic to your implementation, if desired.","title":"How to set a response body before sending it to client","body":"<p>You could define an <a href=\"https://docs.spring.io/spring-security/site/docs/current/api/org/springframework/security/web/AuthenticationEntryPoint.html\" rel=\"nofollow noreferrer\"><code>AuthenticationEntryPoint</code></a> and use the given <code>HttpServletResponse</code> to write your response body as desired.</p>\n<p>This is an example where I return a translated string as response body:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import lombok.RequiredArgsConstructor;\nimport org.springframework.context.support.MessageSourceAccessor;\nimport org.springframework.security.core.AuthenticationException;\nimport org.springframework.stereotype.Component;\n\nimport javax.servlet.http.HttpServletRequest;\nimport javax.servlet.http.HttpServletResponse;\nimport java.io.IOException;\n\n@Component\n@RequiredArgsConstructor\npublic class CustomAuthenticationEntryPoint implements AuthenticationEntryPoint {\n\n    private final MessageSourceAccessor messages;\n\n    /**\n     * This is invoked when a user tries to access a secured REST resource without supplying valid credentials.\n     * A 401 Unauthorized HTTP Status code will be returned as there is no login page to redirect to.\n     */\n    @Override\n    public void commence(final HttpServletRequest request, \n                         final HttpServletResponse response,\n                         final AuthenticationException authException) throws IOException {\n        response.sendError(HttpServletResponse.SC_UNAUTHORIZED, messages.getMessage(&quot;error.unauthorized&quot;));\n    }\n}\n</code></pre>\n<p>You then need to register your the <code>AuthenticationEntryPoint</code> in your Spring Security config.</p>\n<p>Old way:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\n@EnableWebSecurity\n@RequiredArgsConstructor\npublic class WebSecurityConfiguration extends WebSecurityConfigurerAdapter {\n\n    private final CustomAuthenticationEntryPoint authenticationEntryPoint;\n\n    @Override\n    protected void configure(HttpSecurity http) throws Exception {\n        http\n          // all your other security config\n          .exceptionHandling().authenticationEntryPoint(authenticationEntryPoint);\n    }\n</code></pre>\n<p>New way:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\n@EnableWebSecurity\n@RequiredArgsConstructor\npublic class WebSecurityConfiguration {\n\n    private final CustomAuthenticationEntryPoint authenticationEntryPoint;\n\n    @Bean\n    SecurityFilterChain testSecurityFilterChain(HttpSecurity http) throws Exception {\n        return http\n          // all your other security config\n          .exceptionHandling().authenticationEntryPoint(authenticationEntryPoint);\n    }\n}\n</code></pre>\n<p>Depending on your authentication mechanism, Spring provides a matching <code>AuthenticationEntryPoint</code> implementation, e.g. for OAuth it might <a href=\"https://docs.spring.io/spring-security/site/docs/current/api/org/springframework/security/oauth2/server/resource/web/BearerTokenAuthenticationEntryPoint.html\" rel=\"nofollow noreferrer\"><code>BearerTokenAuthenticationEntryPoint</code></a>. It might be useful to check what your current <code>AuthenticationEntryPoint</code> implementation does and copy some of the logic to your implementation, if desired.</p>\n"},{"tags":[],"owner":{"account_id":26899240,"reputation":21,"user_id":20476657,"display_name":"Manu"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1669207599,"creation_date":1669207403,"answer_id":74546994,"question_id":74545265,"body_markdown":"The filter chain of Spring Security is invoked before the request arrives to the controllers, so is normal that errors in the filter chain aren&#180;t handled by @ControllerAdvice/@ExceptionHandler out of the box.\r\n\r\nA little review of the [spring-security arquitecture][1] \r\n\r\nThere are two kinds of exceptions that could happen here:\r\n  1. AccessDeniedException (see [AccessDeniedHandler][2])\r\n  2. AuthenticationException (or a unauthenticated user)\r\n\r\nTo handle 1 should be quite straightforward [implementing and registering an AccessDeniedHandler impl][3]\r\n\r\nTo handle 2, you should implement a custom [AuthenticationEntryPoint][4]. This component is called when the user is not authenticated or when an AuthenticationException happens.\r\n\r\nI will let you a link to a [baeldung post][5] on the implementation. Look for the delegate approach (point 4), as that allows for a cleaner serialization of the response (using @ExceptionHandler).\r\n\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-security/site/docs/5.5.8/reference/html5/#servlet-exceptiontranslationfilter\r\n  [2]: https://docs.spring.io/spring-security/site/docs/current/api/org/springframework/security/web/access/AccessDeniedHandler.html\r\n  [3]: https://www.baeldung.com/spring-security-custom-access-denied-page#2-access-denied-handler\r\n  [4]: https://docs.spring.io/spring-security/site/docs/current/api/org/springframework/security/web/AuthenticationEntryPoint.html\r\n  [5]: https://www.baeldung.com/spring-security-exceptionhandler\r\n  [6]: https://stackoverflow.com/questions/19767267/handle-spring-security-authentication-exceptions-with-exceptionhandler","title":"How to set a response body before sending it to client","body":"<p>The filter chain of Spring Security is invoked before the request arrives to the controllers, so is normal that errors in the filter chain aren´t handled by @ControllerAdvice/@ExceptionHandler out of the box.</p>\n<p>A little review of the <a href=\"https://docs.spring.io/spring-security/site/docs/5.5.8/reference/html5/#servlet-exceptiontranslationfilter\" rel=\"nofollow noreferrer\">spring-security arquitecture</a></p>\n<p>There are two kinds of exceptions that could happen here:</p>\n<ol>\n<li>AccessDeniedException (see <a href=\"https://docs.spring.io/spring-security/site/docs/current/api/org/springframework/security/web/access/AccessDeniedHandler.html\" rel=\"nofollow noreferrer\">AccessDeniedHandler</a>)</li>\n<li>AuthenticationException (or a unauthenticated user)</li>\n</ol>\n<p>To handle 1 should be quite straightforward <a href=\"https://www.baeldung.com/spring-security-custom-access-denied-page#2-access-denied-handler\" rel=\"nofollow noreferrer\">implementing and registering an AccessDeniedHandler impl</a></p>\n<p>To handle 2, you should implement a custom <a href=\"https://docs.spring.io/spring-security/site/docs/current/api/org/springframework/security/web/AuthenticationEntryPoint.html\" rel=\"nofollow noreferrer\">AuthenticationEntryPoint</a>. This component is called when the user is not authenticated or when an AuthenticationException happens.</p>\n<p>I will let you a link to a <a href=\"https://www.baeldung.com/spring-security-exceptionhandler\" rel=\"nofollow noreferrer\">baeldung post</a> on the implementation. Look for the delegate approach (point 4), as that allows for a cleaner serialization of the response (using @ExceptionHandler).</p>\n"},{"comments":[{"owner":{"account_id":6676840,"reputation":2927,"user_id":5151202,"display_name":"times29"},"score":1,"creation_date":1669309971,"post_id":74547059,"comment_id":131620294,"body_markdown":"Damn son, you surely put in some work, great effort :)","body":"Damn son, you surely put in some work, great effort :)"},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":1,"creation_date":1669313924,"post_id":74547059,"comment_id":131621299,"body_markdown":"Thanks, &quot;Dad&quot;! :)) The &quot;auth entry point&quot; part was easy peasy, but for the &quot;unauthorized&quot; part my sample (BasicAuth) was unlucky/hard!.. :)","body":"Thanks, &quot;Dad&quot;! :)) The &quot;auth entry point&quot; part was easy peasy, but for the &quot;unauthorized&quot; part my sample (BasicAuth) was unlucky/hard!.. :)"}],"tags":[],"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1669224897,"creation_date":1669207708,"answer_id":74547059,"question_id":74545265,"body_markdown":"Precising, applying and testing [Times answer(+1)][1] :\r\n&gt; You could define an AuthenticationEntryPoint and use the given HttpServletResponse to write your response body as desired.\r\n\r\nExtending (e.g) `BasicAuthenticationEntryPoint` (not many configurations send this &quot;WWW-Authenticate&quot; header) like so:\r\n&lt;!-- language-all:lang-java --&gt;\r\n```\r\nprivate static AuthenticationEntryPoint authenticationEntryPoint() {\r\n  BasicAuthenticationEntryPoint result = new BasicAuthenticationEntryPoint() {\r\n    // inline:\r\n    @Override\r\n    public void commence(HttpServletRequest request, HttpServletResponse response, AuthenticationException authException) throws IOException {\r\n      response.addHeader( // identic/similar to super method\r\n          &quot;WWW-Authenticate&quot;, String.format(&quot;Basic realm=\\&quot;%s\\&quot;&quot;, getRealmName())\r\n      );\r\n      // subtle difference:\r\n      response.setStatus(HttpStatus.UNAUTHORIZED.value() /*, no message! */);\r\n      // &quot;print&quot; custom to &quot;response&quot;:\r\n      response.getWriter().format(\r\n          &quot;{\\&quot;error\\&quot;:{\\&quot;message\\&quot;:\\&quot;%s\\&quot;}}&quot;, authException.getMessage()\r\n      );\r\n    }\r\n  };\r\n  // basic specific/default:\r\n  result.setRealmName(&quot;Realm&quot;);\r\n  return result;\r\n}\r\n```\r\n\r\nThese tests pass:\r\n```\r\npackage com.example.security.custom.entrypoint;\r\n\r\nimport org.junit.jupiter.api.Test;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.boot.test.autoconfigure.web.servlet.AutoConfigureMockMvc;\r\nimport org.springframework.boot.test.context.SpringBootTest;\r\nimport org.springframework.test.web.servlet.MockMvc;\r\nimport static org.springframework.security.test.web.servlet.request.SecurityMockMvcRequestPostProcessors.*;\r\nimport static org.springframework.security.test.web.servlet.response.SecurityMockMvcResultMatchers.unauthenticated;\r\nimport static org.springframework.test.web.servlet.request.MockMvcRequestBuilders.*;\r\nimport static org.springframework.test.web.servlet.result.MockMvcResultHandlers.print;\r\nimport static org.springframework.test.web.servlet.result.MockMvcResultMatchers.*;\r\n\r\n@AutoConfigureMockMvc\r\n@SpringBootTest(properties = {&quot;spring.security.user.password=!test2me&quot;})\r\nclass SecurityCustomEntrypointApplicationTests {\r\n\r\n  @Autowired\r\n  private MockMvc mvc;\r\n\r\n  @Test\r\n  public void testWrongCredentials() throws Exception {\r\n    mvc\r\n        .perform(get(&quot;/secured&quot;).with(httpBasic(&quot;unknown&quot;, &quot;wrong&quot;)))\r\n        .andDo(print())\r\n        .andExpectAll(\r\n            unauthenticated(),\r\n            status().isUnauthorized(),\r\n            header().exists(&quot;WWW-Authenticate&quot;),\r\n            content().bytes(new byte[0]) // !! no content\r\n        );\r\n  }\r\n\r\n  @Test\r\n  void testCorrectCredentials() throws Exception {\r\n    mvc\r\n        .perform(get(&quot;/secured&quot;).with(httpBasic(&quot;user&quot;, &quot;!test2me&quot;)))\r\n        .andDo(print())\r\n        .andExpectAll(\r\n            status().isOk(),\r\n            content().string(&quot;Hello&quot;)\r\n        );\r\n  }\r\n\r\n  @Test\r\n  void testNoCredentials() throws Exception {\r\n    mvc\r\n        .perform(get(&quot;/secured&quot;))\r\n        .andDo(print())\r\n        .andExpectAll(\r\n            status().isUnauthorized(),\r\n            header().exists(&quot;WWW-Authenticate&quot;),\r\n            jsonPath(&quot;$.error.message&quot;).exists()\r\n        );\r\n  }\r\n}\r\n```\r\n\r\nOn this (full) app:\r\n```\r\npackage com.example.security.custom.entrypoint;\r\n\r\nimport java.io.IOException;\r\nimport javax.servlet.http.HttpServletRequest;\r\nimport javax.servlet.http.HttpServletResponse;\r\nimport org.springframework.boot.SpringApplication;\r\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.context.annotation.Configuration;\r\nimport org.springframework.http.HttpStatus;\r\nimport static org.springframework.security.config.Customizer.withDefaults;\r\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\r\nimport org.springframework.security.core.AuthenticationException;\r\nimport org.springframework.security.web.AuthenticationEntryPoint;\r\nimport org.springframework.security.web.SecurityFilterChain;\r\nimport org.springframework.security.web.authentication.www.BasicAuthenticationEntryPoint;\r\nimport org.springframework.stereotype.Controller;\r\nimport org.springframework.web.bind.annotation.GetMapping;\r\nimport org.springframework.web.bind.annotation.ResponseBody;\r\n\r\n@SpringBootApplication\r\npublic class SecurityCustomEntrypointApplication {\r\n\r\n  public static void main(String[] args) {\r\n    SpringApplication.run(SecurityCustomEntrypointApplication.class, args);\r\n  }\r\n\r\n  @Controller\r\n  static class SecuredController {\r\n\r\n    @GetMapping(&quot;secured&quot;)\r\n    @ResponseBody\r\n    public String secured() {\r\n      return &quot;Hello&quot;;\r\n    }\r\n  }\r\n\r\n  @Configuration\r\n  static class SecurityConfig {\r\n\r\n    @Bean\r\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\r\n      return http\r\n          .authorizeRequests()\r\n          .anyRequest().authenticated()\r\n          .and()\r\n          .httpBasic(withDefaults())\r\n          .exceptionHandling()\r\n          .authenticationEntryPoint(authenticationEntryPoint()) \r\n          // ...\r\n          .and().build();\r\n    }\r\n    // @Bean (and/) or static...: you decide!;)\r\n    private static AuthenticationEntryPoint authenticationEntryPoint() {\r\n      BasicAuthenticationEntryPoint result = new BasicAuthenticationEntryPoint() {\r\n        @Override\r\n        public void commence(HttpServletRequest request, HttpServletResponse response, AuthenticationException authException) throws IOException {\r\n          response.addHeader(\r\n              &quot;WWW-Authenticate&quot;, String.format(&quot;Basic realm=\\&quot;%s\\&quot;&quot;, getRealmName())\r\n          );\r\n          response.setStatus(HttpStatus.UNAUTHORIZED.value());\r\n          response.getWriter().format(\r\n              &quot;{\\&quot;error\\&quot;:{\\&quot;message\\&quot;:\\&quot;%s\\&quot;}}&quot;, authException.getMessage()\r\n          );\r\n        }\r\n      };\r\n      result.setRealmName(&quot;Realm&quot;);\r\n      return result;\r\n    }\r\n  }\r\n}\r\n```\r\n\r\n- Tested with https://start.spring.io/#!language=java&amp;platformVersion=2.7.5&amp;jvmVersion=17&amp;dependencies=web,security\r\n- Potential problems: Someone else writing to/flushing `response`.\r\n\r\n\r\n----------\r\n\r\n\r\nTo make it work for **&quot;wrong credentials&quot;** *and* **&quot;basic authentication&quot;** (`testWrongCredentials()` expect json body, in form authentication it&#39;d be easier/different (`http.formLogin().failureHandler((req, resp, exc)-&gt;{/*your code here*/})...`)), or as answer to: &quot;How to override `BasicAuthenticationFilter.on[Uns|S]uccessfulAuthentication(req,resp,exc)` in spring security?&quot; (originally they are empty/no-op), we should do:\r\n\r\n```\r\n//@Bean possible resp. needed, when autowire.., for simplicity, just:\r\nprivate static BasicAuthenticationFilter customBasicAuthFilter(AuthenticationManager authenticationManager) {\r\n  return new BasicAuthenticationFilter(authenticationManager\r\n     /*, entryPoint */) {\r\n    @Override\r\n    protected void onUnsuccessfulAuthentication(HttpServletRequest request, HttpServletResponse response, AuthenticationException failed) throws IOException {\r\n      System.err.println(&quot;Aha!&quot;);\r\n      writeToResponse(response, failed); \r\n    }\r\n\r\n    // @Override ...\r\n  };\r\n}\r\n// with:\r\nprivate static void writeToResponse(HttpServletResponse response, Exception failed) throws IOException {\r\n  response.getWriter().format(\r\n      &quot;{\\&quot;error\\&quot;:{\\&quot;message\\&quot;:\\&quot;%s\\&quot;}}&quot;, failed.getMessage()\r\n  );\r\n}\r\n```\r\nThis we can use in our `filterChain` like:\r\n```\r\nhttp.addFilter(customBasicAuthFilter(authenticationManager));\r\n```\r\n***IMPORTANT***: \r\n- filter should be added *before* `.httpBasic(...)`!\r\n- `BasicAuthenticationFilter` also accepts a `AuthenticationEntryPoint ` ..., but it is/does *not the same* as `.exceptionHandling().authenticationEntryPoint(...)`.\r\n\r\nActually this implicitly answers how to override any `XXXFilter#anyVisibleMethod` in any [tag:spring-security] filter;).\r\n\r\nTo work around [&quot;spring-security-without-the-websecurityconfigureradapter&quot;][2], I stuffed it into a [&quot;custom dsl&quot;][3] like (otherwise i get `authenticationManager==null`/circular refs;(:\r\n\r\n```\r\nstatic class CustomDsl extends AbstractHttpConfigurer&lt;CustomDsl, HttpSecurity&gt; {\r\n\r\n  @Override\r\n  public void configure(HttpSecurity http) throws Exception {\r\n    AuthenticationManager authenticationManager = http.getSharedObject(AuthenticationManager.class);\r\n    http.addFilter(customBasicAuthFilter(authenticationManager));\r\n  }\r\n\r\n  public static CustomDsl customDsl() {\r\n    return new CustomDsl();\r\n  }\r\n}\r\n```\r\nTo use it finally like:\r\n```\r\n@Bean\r\npublic SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\r\n  return http\r\n      .authorizeRequests()\r\n      .anyRequest().authenticated()\r\n      .and()\r\n      .apply(CustomDsl.customDsl()) // before httpBasic()!\r\n      .and()\r\n      .httpBasic(withDefaults())\r\n      .exceptionHandling() // this is still needed ...\r\n      .authenticationEntryPoint(authenticationEntryPoint()) // ... for the &quot;anonymous&quot; (test) case!\r\n      .and()\r\n      .build();\r\n}\r\n```\r\n\r\nThen we can also modify/expect:\r\n```\r\n@Test\r\npublic void testWrongCredentials() throws Exception {\r\n  mvc\r\n      .perform(get(&quot;/secured&quot;).with(httpBasic(&quot;unknown&quot;, &quot;wrong&quot;)))\r\n      .andDo(print())\r\n      .andExpectAll(\r\n          unauthenticated(),\r\n          status().isUnauthorized(),\r\n          header().exists(&quot;WWW-Authenticate&quot;),\r\n          jsonPath(&quot;$.error.message&quot;).exists() // !#\r\n      );\r\n}\r\n```\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/74546019/592355\r\n  [2]: https://spring.io/blog/2022/02/21/spring-security-without-the-websecurityconfigureradapter\r\n  [3]: https://spring.io/blog/2022/02/21/spring-security-without-the-websecurityconfigureradapter#accessing-the-local-authenticationmanager","title":"How to set a response body before sending it to client","body":"<p>Precising, applying and testing <a href=\"https://stackoverflow.com/a/74546019/592355\">Times answer(+1)</a> :</p>\n<blockquote>\n<p>You could define an AuthenticationEntryPoint and use the given HttpServletResponse to write your response body as desired.</p>\n</blockquote>\n<p>Extending (e.g) <code>BasicAuthenticationEntryPoint</code> (not many configurations send this &quot;WWW-Authenticate&quot; header) like so:</p>\n\n<pre><code>private static AuthenticationEntryPoint authenticationEntryPoint() {\n  BasicAuthenticationEntryPoint result = new BasicAuthenticationEntryPoint() {\n    // inline:\n    @Override\n    public void commence(HttpServletRequest request, HttpServletResponse response, AuthenticationException authException) throws IOException {\n      response.addHeader( // identic/similar to super method\n          &quot;WWW-Authenticate&quot;, String.format(&quot;Basic realm=\\&quot;%s\\&quot;&quot;, getRealmName())\n      );\n      // subtle difference:\n      response.setStatus(HttpStatus.UNAUTHORIZED.value() /*, no message! */);\n      // &quot;print&quot; custom to &quot;response&quot;:\n      response.getWriter().format(\n          &quot;{\\&quot;error\\&quot;:{\\&quot;message\\&quot;:\\&quot;%s\\&quot;}}&quot;, authException.getMessage()\n      );\n    }\n  };\n  // basic specific/default:\n  result.setRealmName(&quot;Realm&quot;);\n  return result;\n}\n</code></pre>\n<p>These tests pass:</p>\n<pre><code>package com.example.security.custom.entrypoint;\n\nimport org.junit.jupiter.api.Test;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.test.autoconfigure.web.servlet.AutoConfigureMockMvc;\nimport org.springframework.boot.test.context.SpringBootTest;\nimport org.springframework.test.web.servlet.MockMvc;\nimport static org.springframework.security.test.web.servlet.request.SecurityMockMvcRequestPostProcessors.*;\nimport static org.springframework.security.test.web.servlet.response.SecurityMockMvcResultMatchers.unauthenticated;\nimport static org.springframework.test.web.servlet.request.MockMvcRequestBuilders.*;\nimport static org.springframework.test.web.servlet.result.MockMvcResultHandlers.print;\nimport static org.springframework.test.web.servlet.result.MockMvcResultMatchers.*;\n\n@AutoConfigureMockMvc\n@SpringBootTest(properties = {&quot;spring.security.user.password=!test2me&quot;})\nclass SecurityCustomEntrypointApplicationTests {\n\n  @Autowired\n  private MockMvc mvc;\n\n  @Test\n  public void testWrongCredentials() throws Exception {\n    mvc\n        .perform(get(&quot;/secured&quot;).with(httpBasic(&quot;unknown&quot;, &quot;wrong&quot;)))\n        .andDo(print())\n        .andExpectAll(\n            unauthenticated(),\n            status().isUnauthorized(),\n            header().exists(&quot;WWW-Authenticate&quot;),\n            content().bytes(new byte[0]) // !! no content\n        );\n  }\n\n  @Test\n  void testCorrectCredentials() throws Exception {\n    mvc\n        .perform(get(&quot;/secured&quot;).with(httpBasic(&quot;user&quot;, &quot;!test2me&quot;)))\n        .andDo(print())\n        .andExpectAll(\n            status().isOk(),\n            content().string(&quot;Hello&quot;)\n        );\n  }\n\n  @Test\n  void testNoCredentials() throws Exception {\n    mvc\n        .perform(get(&quot;/secured&quot;))\n        .andDo(print())\n        .andExpectAll(\n            status().isUnauthorized(),\n            header().exists(&quot;WWW-Authenticate&quot;),\n            jsonPath(&quot;$.error.message&quot;).exists()\n        );\n  }\n}\n</code></pre>\n<p>On this (full) app:</p>\n<pre><code>package com.example.security.custom.entrypoint;\n\nimport java.io.IOException;\nimport javax.servlet.http.HttpServletRequest;\nimport javax.servlet.http.HttpServletResponse;\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.http.HttpStatus;\nimport static org.springframework.security.config.Customizer.withDefaults;\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\nimport org.springframework.security.core.AuthenticationException;\nimport org.springframework.security.web.AuthenticationEntryPoint;\nimport org.springframework.security.web.SecurityFilterChain;\nimport org.springframework.security.web.authentication.www.BasicAuthenticationEntryPoint;\nimport org.springframework.stereotype.Controller;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.ResponseBody;\n\n@SpringBootApplication\npublic class SecurityCustomEntrypointApplication {\n\n  public static void main(String[] args) {\n    SpringApplication.run(SecurityCustomEntrypointApplication.class, args);\n  }\n\n  @Controller\n  static class SecuredController {\n\n    @GetMapping(&quot;secured&quot;)\n    @ResponseBody\n    public String secured() {\n      return &quot;Hello&quot;;\n    }\n  }\n\n  @Configuration\n  static class SecurityConfig {\n\n    @Bean\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n      return http\n          .authorizeRequests()\n          .anyRequest().authenticated()\n          .and()\n          .httpBasic(withDefaults())\n          .exceptionHandling()\n          .authenticationEntryPoint(authenticationEntryPoint()) \n          // ...\n          .and().build();\n    }\n    // @Bean (and/) or static...: you decide!;)\n    private static AuthenticationEntryPoint authenticationEntryPoint() {\n      BasicAuthenticationEntryPoint result = new BasicAuthenticationEntryPoint() {\n        @Override\n        public void commence(HttpServletRequest request, HttpServletResponse response, AuthenticationException authException) throws IOException {\n          response.addHeader(\n              &quot;WWW-Authenticate&quot;, String.format(&quot;Basic realm=\\&quot;%s\\&quot;&quot;, getRealmName())\n          );\n          response.setStatus(HttpStatus.UNAUTHORIZED.value());\n          response.getWriter().format(\n              &quot;{\\&quot;error\\&quot;:{\\&quot;message\\&quot;:\\&quot;%s\\&quot;}}&quot;, authException.getMessage()\n          );\n        }\n      };\n      result.setRealmName(&quot;Realm&quot;);\n      return result;\n    }\n  }\n}\n</code></pre>\n<ul>\n<li>Tested with <a href=\"https://start.spring.io/#!language=java&amp;platformVersion=2.7.5&amp;jvmVersion=17&amp;dependencies=web,security\" rel=\"nofollow noreferrer\">https://start.spring.io/#!language=java&amp;platformVersion=2.7.5&amp;jvmVersion=17&amp;dependencies=web,security</a></li>\n<li>Potential problems: Someone else writing to/flushing <code>response</code>.</li>\n</ul>\n<hr />\n<p>To make it work for <strong>&quot;wrong credentials&quot;</strong> <em>and</em> <strong>&quot;basic authentication&quot;</strong> (<code>testWrongCredentials()</code> expect json body, in form authentication it'd be easier/different (<code>http.formLogin().failureHandler((req, resp, exc)-&gt;{/*your code here*/})...</code>)), or as answer to: &quot;How to override <code>BasicAuthenticationFilter.on[Uns|S]uccessfulAuthentication(req,resp,exc)</code> in spring security?&quot; (originally they are empty/no-op), we should do:</p>\n<pre><code>//@Bean possible resp. needed, when autowire.., for simplicity, just:\nprivate static BasicAuthenticationFilter customBasicAuthFilter(AuthenticationManager authenticationManager) {\n  return new BasicAuthenticationFilter(authenticationManager\n     /*, entryPoint */) {\n    @Override\n    protected void onUnsuccessfulAuthentication(HttpServletRequest request, HttpServletResponse response, AuthenticationException failed) throws IOException {\n      System.err.println(&quot;Aha!&quot;);\n      writeToResponse(response, failed); \n    }\n\n    // @Override ...\n  };\n}\n// with:\nprivate static void writeToResponse(HttpServletResponse response, Exception failed) throws IOException {\n  response.getWriter().format(\n      &quot;{\\&quot;error\\&quot;:{\\&quot;message\\&quot;:\\&quot;%s\\&quot;}}&quot;, failed.getMessage()\n  );\n}\n</code></pre>\n<p>This we can use in our <code>filterChain</code> like:</p>\n<pre><code>http.addFilter(customBasicAuthFilter(authenticationManager));\n</code></pre>\n<p><em><strong>IMPORTANT</strong></em>:</p>\n<ul>\n<li>filter should be added <em>before</em> <code>.httpBasic(...)</code>!</li>\n<li><code>BasicAuthenticationFilter</code> also accepts a <code>AuthenticationEntryPoint </code> ..., but it is/does <em>not the same</em> as <code>.exceptionHandling().authenticationEntryPoint(...)</code>.</li>\n</ul>\n<p>Actually this implicitly answers how to override any <code>XXXFilter#anyVisibleMethod</code> in any <a href=\"/questions/tagged/spring-security\" class=\"post-tag\" title=\"show questions tagged &#39;spring-security&#39;\" aria-label=\"show questions tagged &#39;spring-security&#39;\" rel=\"tag\" aria-labelledby=\"spring-security-container\">spring-security</a> filter;).</p>\n<p>To work around <a href=\"https://spring.io/blog/2022/02/21/spring-security-without-the-websecurityconfigureradapter\" rel=\"nofollow noreferrer\">&quot;spring-security-without-the-websecurityconfigureradapter&quot;</a>, I stuffed it into a <a href=\"https://spring.io/blog/2022/02/21/spring-security-without-the-websecurityconfigureradapter#accessing-the-local-authenticationmanager\" rel=\"nofollow noreferrer\">&quot;custom dsl&quot;</a> like (otherwise i get <code>authenticationManager==null</code>/circular refs;(:</p>\n<pre><code>static class CustomDsl extends AbstractHttpConfigurer&lt;CustomDsl, HttpSecurity&gt; {\n\n  @Override\n  public void configure(HttpSecurity http) throws Exception {\n    AuthenticationManager authenticationManager = http.getSharedObject(AuthenticationManager.class);\n    http.addFilter(customBasicAuthFilter(authenticationManager));\n  }\n\n  public static CustomDsl customDsl() {\n    return new CustomDsl();\n  }\n}\n</code></pre>\n<p>To use it finally like:</p>\n<pre><code>@Bean\npublic SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n  return http\n      .authorizeRequests()\n      .anyRequest().authenticated()\n      .and()\n      .apply(CustomDsl.customDsl()) // before httpBasic()!\n      .and()\n      .httpBasic(withDefaults())\n      .exceptionHandling() // this is still needed ...\n      .authenticationEntryPoint(authenticationEntryPoint()) // ... for the &quot;anonymous&quot; (test) case!\n      .and()\n      .build();\n}\n</code></pre>\n<p>Then we can also modify/expect:</p>\n<pre><code>@Test\npublic void testWrongCredentials() throws Exception {\n  mvc\n      .perform(get(&quot;/secured&quot;).with(httpBasic(&quot;unknown&quot;, &quot;wrong&quot;)))\n      .andDo(print())\n      .andExpectAll(\n          unauthenticated(),\n          status().isUnauthorized(),\n          header().exists(&quot;WWW-Authenticate&quot;),\n          jsonPath(&quot;$.error.message&quot;).exists() // !#\n      );\n}\n</code></pre>\n"}],"owner":{"account_id":4434750,"reputation":1949,"user_id":3610891,"accept_rate":62,"display_name":"Onki"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":960,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":3,"score":1,"last_activity_date":1669224897,"creation_date":1669199109,"question_id":74545265,"body_markdown":"We are working on a Spring Boot application. Any unknown errors at controllers layers are handled by the global exception handler classes and response is constructed there.\r\n\r\nHowever, I see that in case of authentication at Spring authentication filter, I see that Spring sometimes return without logging or throwing any errors.\r\n\r\nAnd the error message is provided by Spring in WWW-Authenticate header.\r\n\r\nNow, in this case, if any application is not handling this scenario, I want to modify only the response body, I want to pass a JSON message explaining the error message to user in response body so that user does not have to look in header.\r\n\r\nIs there any way to modify only the response body in Spring&#39;s OncePerRequestHeader? I don&#39;t see any method which allows me to simply modify the body.\r\n\r\n","title":"How to set a response body before sending it to client","body":"<p>We are working on a Spring Boot application. Any unknown errors at controllers layers are handled by the global exception handler classes and response is constructed there.</p>\n<p>However, I see that in case of authentication at Spring authentication filter, I see that Spring sometimes return without logging or throwing any errors.</p>\n<p>And the error message is provided by Spring in WWW-Authenticate header.</p>\n<p>Now, in this case, if any application is not handling this scenario, I want to modify only the response body, I want to pass a JSON message explaining the error message to user in response body so that user does not have to look in header.</p>\n<p>Is there any way to modify only the response body in Spring's OncePerRequestHeader? I don't see any method which allows me to simply modify the body.</p>\n"},{"tags":["java","jar","command-prompt"],"comments":[{"owner":{"account_id":138128,"reputation":294236,"user_id":342852,"accept_rate":97,"display_name":"Sean Patrick Floyd"},"score":10,"creation_date":1329915577,"post_id":9395207,"comment_id":11870389,"body_markdown":"type &quot;javac -help&quot;","body":"type &quot;javac -help&quot;"},{"owner":{"account_id":138128,"reputation":294236,"user_id":342852,"accept_rate":97,"display_name":"Sean Patrick Floyd"},"score":2,"creation_date":1329915638,"post_id":9395207,"comment_id":11870424,"body_markdown":"http://docs.oracle.com/javase/6/docs/technotes/tools/index.html#basic","body":"<a href=\"http://docs.oracle.com/javase/6/docs/technotes/tools/index.html#basic\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/6/docs/technotes/tools/index.html#bas&zwnj;&#8203;ic</a>"},{"owner":{"account_id":1066374,"reputation":31120,"user_id":1066828,"accept_rate":95,"display_name":"Fahim Parkar"},"score":2,"creation_date":1329916030,"post_id":9395207,"comment_id":11870593,"body_markdown":"hope [this](http://stackoverflow.com/questions/1064481/newbie-question-how-to-include-jar-files-when-compiling) helps you..","body":"hope <a href=\"http://stackoverflow.com/questions/1064481/newbie-question-how-to-include-jar-files-when-compiling\">this</a> helps you.."},{"owner":{"account_id":2289455,"reputation":5106,"user_id":2012715,"accept_rate":66,"display_name":"Dmytro"},"score":2,"creation_date":1482083530,"post_id":9395207,"comment_id":69621169,"body_markdown":"Note to self: you must use -cp/-classpath flag before the name of the java file you want to run, otherwise it will ignore the flag. `java -cp &quot;.;magic.jar&quot; Foo` is ok `java Foo -cp &quot;.;magic.jar&quot;`is not.","body":"Note to self: you must use -cp/-classpath flag before the name of the java file you want to run, otherwise it will ignore the flag. <code>java -cp &quot;.;magic.jar&quot; Foo</code> is ok <code>java Foo -cp &quot;.;magic.jar&quot;</code>is not."}],"answers":[{"tags":[],"owner":{"account_id":1260595,"reputation":7659,"user_id":1218985,"display_name":"1218985"},"comment_count":0,"down_vote_count":0,"up_vote_count":17,"is_accepted":false,"score":17,"last_activity_date":1458643545,"creation_date":1329917986,"answer_id":9395928,"question_id":9395207,"body_markdown":"Try to add all dependency jar files to your class path through environment variable settings or use the below steps:\r\n\r\n 1. Open command prompt. \r\n 2. Change directory to the location of you java\r\n    file that you would like compile. \r\n 3. Set the classpath for your dependency jar files  as shown below:\r\n\r\n    `set classpath=C:\\Users\\sarath_sivan\\Desktop\\jars\\servlet-api.jar; C:\\Users\\sarath_sivan\\Desktop\\jars\\spring-jdbc-3.0.2.RELEASE; C:\\Users\\sarath_sivan\\Desktop\\jars\\spring-aop-3.0.2.RELEASE;`\r\n\r\n 4. Now, you may compile your java file. (command: `javac YourJavaFile.java`)\r\n\r\nHope this will resolve your dependency issue.\r\n","title":"How to include jar files with java file and compile in command prompt","body":"<p>Try to add all dependency jar files to your class path through environment variable settings or use the below steps:</p>\n\n<ol>\n<li>Open command prompt. </li>\n<li>Change directory to the location of you java\nfile that you would like compile. </li>\n<li><p>Set the classpath for your dependency jar files  as shown below:</p>\n\n<p><code>set classpath=C:\\Users\\sarath_sivan\\Desktop\\jars\\servlet-api.jar; C:\\Users\\sarath_sivan\\Desktop\\jars\\spring-jdbc-3.0.2.RELEASE; C:\\Users\\sarath_sivan\\Desktop\\jars\\spring-aop-3.0.2.RELEASE;</code></p></li>\n<li><p>Now, you may compile your java file. (command: <code>javac YourJavaFile.java</code>)</p></li>\n</ol>\n\n<p>Hope this will resolve your dependency issue.</p>\n"},{"comments":[{"owner":{"account_id":402105,"reputation":405,"user_id":769078,"accept_rate":50,"display_name":"Sri"},"score":9,"creation_date":1464152508,"post_id":9396410,"comment_id":62360857,"body_markdown":"`javac -classpath &quot;.:/home/path/mail.jar;/home/path/servlet.jar&quot; MyJavaFile.java` worked for me. I was using mac. I read somewhere that &#39;:&#39; is used for unix.","body":"<code>javac -classpath &quot;.:&#47;home&#47;path&#47;mail.jar;&#47;home&#47;path&#47;servlet.jar&quot; MyJavaFile.java</code> worked for me. I was using mac. I read somewhere that &#39;:&#39; is used for unix."},{"owner":{"account_id":3952469,"reputation":3052,"user_id":3677030,"accept_rate":21,"display_name":"Mohammed Rampurawala"},"score":5,"creation_date":1464197970,"post_id":9396410,"comment_id":62390500,"body_markdown":"I have used this command but when tried to access the class present in jar file, I am getting ClassNotFoundException.","body":"I have used this command but when tried to access the class present in jar file, I am getting ClassNotFoundException."},{"owner":{"account_id":325508,"reputation":1806,"user_id":646732,"accept_rate":83,"display_name":"Mzq"},"score":9,"creation_date":1521540633,"post_id":9396410,"comment_id":85763437,"body_markdown":"what does `.:` do? sorry if it is a dumb question, but it is not obvious to me.","body":"what does <code>.:</code> do? sorry if it is a dumb question, but it is not obvious to me."},{"owner":{"account_id":1152713,"reputation":3431,"user_id":1134084,"accept_rate":6,"display_name":"Pankaj Shinde"},"score":1,"creation_date":1526630505,"post_id":9396410,"comment_id":87828333,"body_markdown":"@kensen. Typo mistake. replace : (colon) with semicolon (;)","body":"@kensen. Typo mistake. replace : (colon) with semicolon (;)"},{"owner":{"account_id":7193357,"reputation":325,"user_id":5492926,"display_name":"Alfaz Jikani"},"score":0,"creation_date":1568458955,"post_id":9396410,"comment_id":102285868,"body_markdown":"Above didn&#39;t worked for me on ubuntu. I tried without quotation mark and it worked. Ex. `javac -cp .:/home/path/mail.jar:/home/path/servlet.jar; MyJavaFile.java`","body":"Above didn&#39;t worked for me on ubuntu. I tried without quotation mark and it worked. Ex. <code>javac -cp .:&#47;home&#47;path&#47;mail.jar:&#47;home&#47;path&#47;servlet.jar; MyJavaFile.java</code>"},{"owner":{"account_id":369303,"reputation":379,"user_id":716602,"display_name":"sanme98"},"score":0,"creation_date":1672189296,"post_id":9396410,"comment_id":132239086,"body_markdown":"@Mzq the `.` mean your current directory, you can replace it with your current full directory path. `:` just a separator for Unix-like OSes, on Windows, it should be `;`","body":"@Mzq the <code>.</code> mean your current directory, you can replace it with your current full directory path. <code>:</code> just a separator for Unix-like OSes, on Windows, it should be <code>;</code>"}],"tags":[],"owner":{"account_id":336649,"reputation":5489,"user_id":664421,"accept_rate":100,"display_name":"kensen john"},"comment_count":6,"down_vote_count":1,"up_vote_count":148,"is_accepted":false,"score":147,"last_activity_date":1516381210,"creation_date":1329919739,"answer_id":9396410,"question_id":9395207,"body_markdown":"You can include your jar files in the &quot;javac&quot; command using the &quot;-cp&quot; option.\r\n\r\n    javac -cp &quot;.:/home/path/mail.jar:/home/path/servlet.jar;&quot; MyJavaFile.java\r\n\r\nInstead of &quot;-cp&quot; you could also use &quot;-classpath&quot;\r\n\r\n    javac -classpath &quot;.:/home/path/mail.jar:/home/path/servlet.jar:&quot; MyJavaFile.java\r\n\r\nYou could including the jars every time you compile by setting the environment variable &quot;CLASSPATH&quot; correctly. The environment variable will store the path where the jars and classes that needs to be used for compiling/executing any java file. You will not have to include the jars individually every time you compile you file.\r\n\r\nDifferent machines have different methods to set the classpath as an environment variable.\r\nThe commands for Windows, Linux, etc are different. \r\n\r\nYou can find more details in [this blog][1].\r\n\r\n    http://javarevisited.blogspot.com/2011/01/how-classpath-work-in-java.html\r\n\r\n\r\n  [1]: http://javarevisited.blogspot.com/2011/01/how-classpath-work-in-java.html","title":"How to include jar files with java file and compile in command prompt","body":"<p>You can include your jar files in the \"javac\" command using the \"-cp\" option.</p>\n\n<pre><code>javac -cp \".:/home/path/mail.jar:/home/path/servlet.jar;\" MyJavaFile.java\n</code></pre>\n\n<p>Instead of \"-cp\" you could also use \"-classpath\"</p>\n\n<pre><code>javac -classpath \".:/home/path/mail.jar:/home/path/servlet.jar:\" MyJavaFile.java\n</code></pre>\n\n<p>You could including the jars every time you compile by setting the environment variable \"CLASSPATH\" correctly. The environment variable will store the path where the jars and classes that needs to be used for compiling/executing any java file. You will not have to include the jars individually every time you compile you file.</p>\n\n<p>Different machines have different methods to set the classpath as an environment variable.\nThe commands for Windows, Linux, etc are different. </p>\n\n<p>You can find more details in <a href=\"http://javarevisited.blogspot.com/2011/01/how-classpath-work-in-java.html\" rel=\"noreferrer\">this blog</a>.</p>\n\n<pre><code>http://javarevisited.blogspot.com/2011/01/how-classpath-work-in-java.html\n</code></pre>\n"},{"comments":[{"owner":{"account_id":8875503,"reputation":464,"user_id":6627786,"display_name":"Yash Agrawal"},"score":6,"creation_date":1489675453,"post_id":17597340,"comment_id":72783565,"body_markdown":"After successful execution of above command how to run the java class file?","body":"After successful execution of above command how to run the java class file?"},{"owner":{"account_id":1803342,"reputation":305,"user_id":1641086,"accept_rate":73,"display_name":"Chaitanya Gudala"},"score":2,"creation_date":1523929224,"post_id":17597340,"comment_id":86752647,"body_markdown":"java -cp first.jar:second.jar:third.jar MyFile","body":"java -cp first.jar:second.jar:third.jar MyFile"}],"tags":[],"owner":{"account_id":3034693,"reputation":269,"user_id":2573056,"display_name":"user2573056"},"comment_count":2,"down_vote_count":1,"up_vote_count":27,"is_accepted":false,"score":26,"last_activity_date":1373555980,"creation_date":1373555980,"answer_id":17597340,"question_id":9395207,"body_markdown":"\t\r\n\r\nSyntax will work on windows dos command:\r\n\r\n    javac -cp &quot;.;first.jar;second.jar;third.jar&quot; MyJavaFile.java\r\n\r\n","title":"How to include jar files with java file and compile in command prompt","body":"<p>Syntax will work on windows dos command:</p>\n\n<pre><code>javac -cp \".;first.jar;second.jar;third.jar\" MyJavaFile.java\n</code></pre>\n"},{"comments":[{"owner":{"account_id":4489352,"reputation":249,"user_id":3820765,"accept_rate":83,"display_name":"Arturo don Juan"},"score":0,"creation_date":1452210904,"post_id":18509431,"comment_id":57080428,"body_markdown":"When I try the **EXAMPLE :-**, with `.:/jars` replaced with the directory in which my JAR files are located, I get the error message `javac: invalid flag: /location/of/first/jar/file.jar`.","body":"When I try the <b>EXAMPLE :-</b>, with <code>.:&#47;jars</code> replaced with the directory in which my JAR files are located, I get the error message <code>javac: invalid flag: &#47;location&#47;of&#47;first&#47;jar&#47;file.jar</code>."},{"owner":{"account_id":3206229,"reputation":3693,"user_id":2707254,"accept_rate":93,"display_name":"Jamsheer"},"score":0,"creation_date":1452224526,"post_id":18509431,"comment_id":57083954,"body_markdown":"http://stackoverflow.com/questions/27915204/javac-invalid-flag-activation-1-1-jar please refere this ,it may solve your problem","body":"<a href=\"http://stackoverflow.com/questions/27915204/javac-invalid-flag-activation-1-1-jar\" title=\"javac invalid flag activation 1 1 jar\">stackoverflow.com/questions/27915204/&hellip;</a> please refere this ,it may solve your problem"},{"owner":{"account_id":12716386,"reputation":1527,"user_id":9238288,"display_name":"jackw11111"},"score":0,"creation_date":1604801256,"post_id":18509431,"comment_id":114457052,"body_markdown":"`.:./jars/*` works when trying to point to a local project directory `jar/`.","body":"<code>.:.&#47;jars&#47;*</code> works when trying to point to a local project directory <code>jar&#47;</code>."}],"tags":[],"owner":{"account_id":3206229,"reputation":3693,"user_id":2707254,"accept_rate":93,"display_name":"Jamsheer"},"comment_count":3,"down_vote_count":0,"up_vote_count":32,"is_accepted":false,"score":32,"last_activity_date":1377776063,"creation_date":1377774851,"answer_id":18509431,"question_id":9395207,"body_markdown":"Please try on Linux\r\n\r\n    javac -cp jarfile source file \r\n\r\nEXAMPLE :-\r\n\r\n    javac  -cp .:/jars/* com/template/*.java","title":"How to include jar files with java file and compile in command prompt","body":"<p>Please try on Linux</p>\n\n<pre><code>javac -cp jarfile source file \n</code></pre>\n\n<p>EXAMPLE :-</p>\n\n<pre><code>javac  -cp .:/jars/* com/template/*.java\n</code></pre>\n"},{"comments":[{"owner":{"account_id":8875503,"reputation":464,"user_id":6627786,"display_name":"Yash Agrawal"},"score":2,"creation_date":1489675673,"post_id":42576246,"comment_id":72783735,"body_markdown":"java command is showing error Caused by: **java.lang.ClassNotFoundException: org.slf4j.LoggerFactory**\n\nI want to\n**compile **\n`javac -classpath &quot;/home/scorncer/Downloads/spark-core-2.3.jar&quot; MyFile.java`\nand **run** \n`java -cp /home/scorncer/Downloads/spark-core-2.3.jar: MyFile.java\nalso i tried\njava -cp /home/scorncer/Downloads/spark-core-2.3.jar: MyFile`","body":"java command is showing error Caused by: <b>java.lang.ClassNotFoundException: org.slf4j.LoggerFactory</b>  I want to <b>compile ** <code>javac -classpath &quot;&#47;home&#47;scorncer&#47;Downloads&#47;spark-core-2.3.jar&quot; MyFile.java</code> and **run</b>  <code>java -cp &#47;home&#47;scorncer&#47;Downloads&#47;spark-core-2.3.jar: MyFile.java also i tried java -cp &#47;home&#47;scorncer&#47;Downloads&#47;spark-core-2.3.jar: MyFile</code>"}],"tags":[],"owner":{"account_id":10376878,"reputation":91,"user_id":7652834,"display_name":"Isaq"},"comment_count":1,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1488537534,"creation_date":1488536399,"answer_id":42576246,"question_id":9395207,"body_markdown":"This will create .class file:\r\n\r\n    javac -classpath &quot;[jarname with specified path]&quot; [java filename]\r\n\r\nThis will execute class file:\r\n\r\n    java -cp [jarname with specified path]: [java filename]\r\n\r\n","title":"How to include jar files with java file and compile in command prompt","body":"<p>This will create .class file:</p>\n\n<pre><code>javac -classpath \"[jarname with specified path]\" [java filename]\n</code></pre>\n\n<p>This will execute class file:</p>\n\n<pre><code>java -cp [jarname with specified path]: [java filename]\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9206509,"reputation":218,"user_id":6841548,"accept_rate":86,"display_name":"Shravya"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1493248049,"creation_date":1493248049,"answer_id":43645985,"question_id":9395207,"body_markdown":"Try This.\r\n\r\n    javac -cp .:jars/jar1:jars/jar2:jars/jar3 com/source/*.java","title":"How to include jar files with java file and compile in command prompt","body":"<p>Try This.</p>\n\n<pre><code>javac -cp .:jars/jar1:jars/jar2:jars/jar3 com/source/*.java\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4398720,"reputation":417,"user_id":3585029,"accept_rate":57,"display_name":"srihari"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1512053631,"creation_date":1506350336,"answer_id":46407912,"question_id":9395207,"body_markdown":"If you are using Ubuntu:\r\n\r\n\r\n    /opt/JavaServices/sqlite $ export CLASSPATH=/opt/JarFiles/XXXX.jar:/opt/JarFiles/XXXX.jar:/opt/JavaServices/;javac SQLiteSample.java\r\n    \r\n    \r\nGo to folder location (Out of package structure)\r\n\r\n    /opt/JavaServices $ export CLASSPATH=/opt/JarFiles/XXXXX.jar:/opt/JarFiles/XXXXX.jar:/opt/JavaServices/;java sqlite.SQLiteSample\r\n\r\nNote: Please see the file locations and package names","title":"How to include jar files with java file and compile in command prompt","body":"<p>If you are using Ubuntu:</p>\n\n<pre><code>/opt/JavaServices/sqlite $ export CLASSPATH=/opt/JarFiles/XXXX.jar:/opt/JarFiles/XXXX.jar:/opt/JavaServices/;javac SQLiteSample.java\n</code></pre>\n\n<p>Go to folder location (Out of package structure)</p>\n\n<pre><code>/opt/JavaServices $ export CLASSPATH=/opt/JarFiles/XXXXX.jar:/opt/JarFiles/XXXXX.jar:/opt/JavaServices/;java sqlite.SQLiteSample\n</code></pre>\n\n<p>Note: Please see the file locations and package names</p>\n"},{"comments":[{"owner":{"account_id":1188523,"reputation":14452,"user_id":1161948,"accept_rate":92,"display_name":"ThisClark"},"score":4,"creation_date":1546958494,"post_id":49549842,"comment_id":95020286,"body_markdown":"Thanks for also showing how to execute. What does the dot colon do again? It&#39;s current directory and file separator?","body":"Thanks for also showing how to execute. What does the dot colon do again? It&#39;s current directory and file separator?"},{"owner":{"account_id":4595077,"reputation":2795,"user_id":5007383,"accept_rate":100,"display_name":"MathuSum Mut"},"score":2,"creation_date":1566225671,"post_id":49549842,"comment_id":101579836,"body_markdown":"Yes it&#39;s the current directory and a Unix file separator (on Windows it&#39;s a semicolon).","body":"Yes it&#39;s the current directory and a Unix file separator (on Windows it&#39;s a semicolon)."},{"owner":{"account_id":1670882,"reputation":972,"user_id":1537373,"accept_rate":11,"display_name":"AliK"},"score":0,"creation_date":1625183342,"post_id":49549842,"comment_id":120566588,"body_markdown":"Surely the purpose or javac -cp libs/xxx.jar program.java would be to build a final independent output file so you no longer have to use -cp when running because that would mean I would need to copy my libs folder  to where ever I wish to run the app?","body":"Surely the purpose or javac -cp libs/xxx.jar program.java would be to build a final independent output file so you no longer have to use -cp when running because that would mean I would need to copy my libs folder  to where ever I wish to run the app?"}],"tags":[],"owner":{"account_id":6181130,"reputation":2050,"user_id":4816597,"accept_rate":67,"display_name":"imbond"},"comment_count":3,"down_vote_count":0,"up_vote_count":26,"is_accepted":false,"score":26,"last_activity_date":1522306782,"creation_date":1522306782,"answer_id":49549842,"question_id":9395207,"body_markdown":"The followings are steps,\r\n\r\n1. Copy all jars and your .java file in a same folder (It will be easy to mention file names instead of mentioning long path. Though you can keep jar and .java in separate folders).\r\n\r\n2. To compile,\r\n\r\n    &gt;     javac -cp .:&lt;file_1_name&gt;.jar:&lt;file_2_name&gt;.jar &lt;prog_name&gt;.java\r\n\r\n3. To execute,\r\n\r\n    &gt;     java -cp .:&lt;file_1_name&gt;.jar:&lt;file_2_name&gt;.jar &lt;prog_name&gt;\r\n\r\nI hope this helps!","title":"How to include jar files with java file and compile in command prompt","body":"<p>The followings are steps,</p>\n\n<ol>\n<li><p>Copy all jars and your .java file in a same folder (It will be easy to mention file names instead of mentioning long path. Though you can keep jar and .java in separate folders).</p></li>\n<li><p>To compile,</p>\n\n<blockquote>\n<pre><code>javac -cp .:&lt;file_1_name&gt;.jar:&lt;file_2_name&gt;.jar &lt;prog_name&gt;.java\n</code></pre>\n</blockquote></li>\n<li><p>To execute,</p>\n\n<blockquote>\n<pre><code>java -cp .:&lt;file_1_name&gt;.jar:&lt;file_2_name&gt;.jar &lt;prog_name&gt;\n</code></pre>\n</blockquote></li>\n</ol>\n\n<p>I hope this helps!</p>\n"},{"comments":[{"owner":{"account_id":128226,"reputation":10041,"user_id":325900,"accept_rate":78,"display_name":"DaveyDaveDave"},"score":0,"creation_date":1524664342,"post_id":50023665,"comment_id":87064208,"body_markdown":"This answer, while correct, doesn&#39;t really seem to add anything that the other answers don&#39;t already say. If there&#39;s some key difference between this and the other answers, it would be better to explain why your answer differs.","body":"This answer, while correct, doesn&#39;t really seem to add anything that the other answers don&#39;t already say. If there&#39;s some key difference between this and the other answers, it would be better to explain why your answer differs."},{"owner":{"account_id":6473869,"reputation":4718,"user_id":5013141,"accept_rate":75,"display_name":"Michael Fulton"},"score":1,"creation_date":1533314237,"post_id":50023665,"comment_id":90316905,"body_markdown":"You mentioned specifying dependencies at runtime as well as compile time but don&#39;t explain how to specify them at runtime.","body":"You mentioned specifying dependencies at runtime as well as compile time but don&#39;t explain how to specify them at runtime."}],"tags":[],"owner":{"account_id":9984655,"reputation":588,"user_id":7386335,"display_name":"ArockiaRaj"},"comment_count":2,"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1524664286,"creation_date":1524663039,"answer_id":50023665,"question_id":9395207,"body_markdown":"You need to specify the dependencies in compile time as well as runtime\r\n\r\nTo compile use this format\r\n\r\n    javac -cp &quot;*.jar;classfile_path&quot; filename.java\r\n\r\nExample:\r\n\r\n    javac -cp &quot;ojdbc6.jar;c:\\programs&quot; Main.java","title":"How to include jar files with java file and compile in command prompt","body":"<p>You need to specify the dependencies in compile time as well as runtime</p>\n\n<p>To compile use this format</p>\n\n<pre><code>javac -cp \"*.jar;classfile_path\" filename.java\n</code></pre>\n\n<p>Example:</p>\n\n<pre><code>javac -cp \"ojdbc6.jar;c:\\programs\" Main.java\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4634666,"reputation":2759,"user_id":3756232,"accept_rate":40,"display_name":"Guru"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1531815272,"creation_date":1531815272,"answer_id":51376383,"question_id":9395207,"body_markdown":"some times making following change works: \r\n\r\n    java -cp &quot;.;%CLASSPATH%&quot; classfilename \r\n\r\nNote: ON Windows. For linux use `$CLASSPATH` instead. ","title":"How to include jar files with java file and compile in command prompt","body":"<p>some times making following change works: </p>\n\n<pre><code>java -cp \".;%CLASSPATH%\" classfilename \n</code></pre>\n\n<p>Note: ON Windows. For linux use <code>$CLASSPATH</code> instead. </p>\n"},{"comments":[{"owner":{"account_id":14688437,"reputation":5100,"user_id":10607772,"display_name":"double-beep"},"score":5,"creation_date":1590223671,"post_id":61969540,"comment_id":109603537,"body_markdown":"While this code may solve the question, [including an explanation](//meta.stackexchange.com/q/114762) of how and why this solves the problem would really help to improve the quality of your post, and probably result in more up-votes. Remember that you are answering the question for readers in the future, not just the person asking now. Please [edit] your answer to add explanations and give an indication of what limitations and assumptions apply.","body":"While this code may solve the question, <a href=\"//meta.stackexchange.com/q/114762\">including an explanation</a> of how and why this solves the problem would really help to improve the quality of your post, and probably result in more up-votes. Remember that you are answering the question for readers in the future, not just the person asking now. Please <a href=\"https://stackoverflow.com/posts/61969540/edit\">edit</a> your answer to add explanations and give an indication of what limitations and assumptions apply."}],"tags":[],"owner":{"account_id":7339562,"reputation":558,"user_id":5589683,"display_name":"pratap"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1609060690,"creation_date":1590223580,"answer_id":61969540,"question_id":9395207,"body_markdown":"javac -cp jars/jar1:jars/jar2:jars/jar3 abc.java\r\n\r\nWith -cp command we specify the path where to find the additional libraries which are required to compile the class. jar1, jar2 and jar3, available in jars folder are used to compile abc.java class.","title":"How to include jar files with java file and compile in command prompt","body":"<p>javac -cp jars/jar1:jars/jar2:jars/jar3 abc.java</p>\n<p>With -cp command we specify the path where to find the additional libraries which are required to compile the class. jar1, jar2 and jar3, available in jars folder are used to compile abc.java class.</p>\n"},{"tags":[],"owner":{"account_id":13904807,"reputation":159,"user_id":10039469,"display_name":"Rory"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669224656,"creation_date":1669224656,"answer_id":74550875,"question_id":9395207,"body_markdown":"Plenty of these answers helped me, but none that were exactly what I needed. \r\n\r\nAssumptions:\r\n\r\n1) Windows OS\r\n\r\n2) JAR file and java file are in same directory\r\n\r\n`javac -cp &lt;jar filename&gt;.jar &lt;filename&gt;.java`\r\n\r\n`java -cp &lt;jar filename&gt;.jar; &lt;filename&gt;`\r\n\r\nKeep in mind the syntax needs to exactly match. Cannot exclude file extensions or the semi colon.","title":"How to include jar files with java file and compile in command prompt","body":"<p>Plenty of these answers helped me, but none that were exactly what I needed.</p>\n<p>Assumptions:</p>\n<ol>\n<li><p>Windows OS</p>\n</li>\n<li><p>JAR file and java file are in same directory</p>\n</li>\n</ol>\n<p><code>javac -cp &lt;jar filename&gt;.jar &lt;filename&gt;.java</code></p>\n<p><code>java -cp &lt;jar filename&gt;.jar; &lt;filename&gt;</code></p>\n<p>Keep in mind the syntax needs to exactly match. Cannot exclude file extensions or the semi colon.</p>\n"}],"owner":{"account_id":1208574,"reputation":1703,"user_id":1177567,"display_name":"user1177567"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":409958,"favorite_count":0,"down_vote_count":1,"up_vote_count":166,"answer_count":12,"score":165,"last_activity_date":1669224656,"creation_date":1329915455,"question_id":9395207,"body_markdown":"I have 3 jar files and a .java file that depends on these jar files. How do I compile the .java file with these jar files using a command prompt?\r\n","title":"How to include jar files with java file and compile in command prompt","body":"<p>I have 3 jar files and a .java file that depends on these jar files. How do I compile the .java file with these jar files using a command prompt?</p>\n"},{"tags":["java","android"],"answers":[{"comments":[{"owner":{"account_id":25938653,"reputation":43,"user_id":19658497,"display_name":"neverStop"},"score":0,"creation_date":1669225528,"post_id":74550866,"comment_id":131598476,"body_markdown":"Later I noticed that the notification get triggered but at later time not exact, as you said If I whitelist my app it triggers almost perfectly.","body":"Later I noticed that the notification get triggered but at later time not exact, as you said If I whitelist my app it triggers almost perfectly."}],"tags":[],"owner":{"account_id":402229,"reputation":94004,"user_id":769265,"display_name":"David Wasser"},"comment_count":1,"down_vote_count":1,"up_vote_count":1,"is_accepted":true,"score":0,"last_activity_date":1669224612,"creation_date":1669224612,"answer_id":74550866,"question_id":74363763,"body_markdown":"Some devices do not permit applications from running in the background, or from being started by `AlarmManager`. These applications need to be &quot;whitelisted&quot; or added to a list of apps permitted to do this. Different manufactureres handle this differently. If you are running your app on such a device, you will need to have the app (manually) added to the whitelist or list of protected apps, or list of background apps, or whatever.","title":"Sometimes AlarmManager not trigger if I close my app, sometimes it does trigger. What is the problem with that?","body":"<p>Some devices do not permit applications from running in the background, or from being started by <code>AlarmManager</code>. These applications need to be &quot;whitelisted&quot; or added to a list of apps permitted to do this. Different manufactureres handle this differently. If you are running your app on such a device, you will need to have the app (manually) added to the whitelist or list of protected apps, or list of background apps, or whatever.</p>\n"}],"owner":{"account_id":25938653,"reputation":43,"user_id":19658497,"display_name":"neverStop"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":62,"favorite_count":0,"down_vote_count":8,"up_vote_count":1,"accepted_answer_id":74550866,"answer_count":1,"score":-7,"last_activity_date":1669224612,"creation_date":1667923411,"question_id":74363763,"body_markdown":"I don&#39;t want to use services run in foreground because they uses resources. If I open my app later the alarm triggers. One more point, if I whitelist my app from battery optimization it works well. Any suggestion?","title":"Sometimes AlarmManager not trigger if I close my app, sometimes it does trigger. What is the problem with that?","body":"<p>I don't want to use services run in foreground because they uses resources. If I open my app later the alarm triggers. One more point, if I whitelist my app from battery optimization it works well. Any suggestion?</p>\n"},{"tags":["java","postgresql","spring-boot","rest"],"comments":[{"owner":{"account_id":951981,"reputation":14760,"user_id":977919,"accept_rate":92,"display_name":"sidgate"},"score":2,"creation_date":1669198074,"post_id":74544961,"comment_id":131588108,"body_markdown":"better to use geospatial queries. PostGIS?","body":"better to use geospatial queries. PostGIS?"},{"owner":{"account_id":5071367,"reputation":626,"user_id":4070046,"accept_rate":60,"display_name":"Sebastian G."},"score":0,"creation_date":1669199533,"post_id":74544961,"comment_id":131588651,"body_markdown":"@sidgate postgis sounds exactly like what i needed!","body":"@sidgate postgis sounds exactly like what i needed!"},{"owner":{"account_id":21706289,"reputation":473,"user_id":16018684,"display_name":"Amos Machora"},"score":0,"creation_date":1669225085,"post_id":74544961,"comment_id":131598339,"body_markdown":"Sort them from postgres is better off to transfer data through your application layers in their best possible states","body":"Sort them from postgres is better off to transfer data through your application layers in their best possible states"}],"answers":[{"tags":[],"owner":{"account_id":2486870,"reputation":685,"user_id":2165146,"display_name":"muhammed ozbilici"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1669224550,"creation_date":1669224550,"answer_id":74550855,"question_id":74544961,"body_markdown":"It would be good practise to sort in database layer.\r\n\r\nLet&#39;s say you have 1 million rows and first job will be returning of those 1 million, then in application layer, you will sort those, that&#39;s extra 2nd job. Instead of using application layer (and increase jvm memory usage because of that), just return the data which exactly you will need.","title":"Sort result by distance to a given point - Via Postgres or via Spring Data?","body":"<p>It would be good practise to sort in database layer.</p>\n<p>Let's say you have 1 million rows and first job will be returning of those 1 million, then in application layer, you will sort those, that's extra 2nd job. Instead of using application layer (and increase jvm memory usage because of that), just return the data which exactly you will need.</p>\n"}],"owner":{"account_id":5071367,"reputation":626,"user_id":4070046,"accept_rate":60,"display_name":"Sebastian G."},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":106,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74550855,"answer_count":1,"score":0,"last_activity_date":1669224550,"creation_date":1669197799,"question_id":74544961,"body_markdown":"I am writing a REST-Controller in Spring Boot and I want to return Locations in order of which is closest to the given location off a Postgres Database.\r\n\r\nMy Question is: **Where should I handle the sort**: In a Service Function in Java or in Postgres in the Query (using Native Query e.g.) - which is the better approach or does it even matter.\r\n\r\nFor further clearance:\r\n\r\nI save latitude and longitude of locations in the database - and I want to calculate the distance to a given lat long.\r\n\r\n","title":"Sort result by distance to a given point - Via Postgres or via Spring Data?","body":"<p>I am writing a REST-Controller in Spring Boot and I want to return Locations in order of which is closest to the given location off a Postgres Database.</p>\n<p>My Question is: <strong>Where should I handle the sort</strong>: In a Service Function in Java or in Postgres in the Query (using Native Query e.g.) - which is the better approach or does it even matter.</p>\n<p>For further clearance:</p>\n<p>I save latitude and longitude of locations in the database - and I want to calculate the distance to a given lat long.</p>\n"},{"tags":["java","random","text-files","java.util.scanner"],"comments":[{"owner":{"account_id":298566,"reputation":537,"user_id":604656,"accept_rate":47,"display_name":"ashish.g"},"score":2,"creation_date":1669220933,"post_id":74549982,"comment_id":131596730,"body_markdown":"Is it required to store 10 poems in a single file? How are the poems delimited? I mean what marks the end of one poem? A blank line or something like that?","body":"Is it required to store 10 poems in a single file? How are the poems delimited? I mean what marks the end of one poem? A blank line or something like that?"},{"owner":{"account_id":26066303,"reputation":1,"user_id":19766690,"display_name":"Kev98"},"score":0,"creation_date":1669221416,"post_id":74549982,"comment_id":131596892,"body_markdown":"In fact it is required to use all 5-line poems (limericks) of a specific website and somehow have them all in one text file. I‘m not sure how to have all of them, so I decided to test it out with 10 poems at least. Currently the poems are not separated by any blank lines or anything because I thought it would bring more problems. All lines are listed underneath each other bluntly, but I could change that if it‘s inefficient.","body":"In fact it is required to use all 5-line poems (limericks) of a specific website and somehow have them all in one text file. I‘m not sure how to have all of them, so I decided to test it out with 10 poems at least. Currently the poems are not separated by any blank lines or anything because I thought it would bring more problems. All lines are listed underneath each other bluntly, but I could change that if it‘s inefficient."},{"owner":{"account_id":298566,"reputation":537,"user_id":604656,"accept_rate":47,"display_name":"ashish.g"},"score":1,"creation_date":1669221746,"post_id":74549982,"comment_id":131597039,"body_markdown":"If all the poems will definitely be of five lines, you can generate a random number, multiply it by 5, that will be the start of your random poem and you can continue reading next five lines.","body":"If all the poems will definitely be of five lines, you can generate a random number, multiply it by 5, that will be the start of your random poem and you can continue reading next five lines."},{"owner":{"account_id":26066303,"reputation":1,"user_id":19766690,"display_name":"Kev98"},"score":0,"creation_date":1669222092,"post_id":74549982,"comment_id":131597187,"body_markdown":"Wouldn’t the problem occur that the program prints two lines from one poem and three from the following for example? Wouldn’t the poems get mixed up? And yes, they always consist of five lines. Could you possibly show me your solution through code? I am very new and unsure how to implement this.","body":"Wouldn’t the problem occur that the program prints two lines from one poem and three from the following for example? Wouldn’t the poems get mixed up? And yes, they always consist of five lines. Could you possibly show me your solution through code? I am very new and unsure how to implement this."},{"owner":{"account_id":298566,"reputation":537,"user_id":604656,"accept_rate":47,"display_name":"ashish.g"},"score":0,"creation_date":1669222399,"post_id":74549982,"comment_id":131597324,"body_markdown":"If every poem is of 5 lines, 1st, 6th , 11th line (or 0th, 5th, 10th line, when following 0 based indexing)  and so on would be the first line of 1st, 2nd, 3rd poems. There would not be a mix up. You need to generate the number 1,6,11....(or 0,5,10) etc. I would encourage you to write the code and paste edited code in the post. @Reto H&#246;hener IMO The exercise is for reading a file. Also, reading the file into memory doesn&#39;t make much sense.","body":"If every poem is of 5 lines, 1st, 6th , 11th line (or 0th, 5th, 10th line, when following 0 based indexing)  and so on would be the first line of 1st, 2nd, 3rd poems. There would not be a mix up. You need to generate the number 1,6,11....(or 0,5,10) etc. I would encourage you to write the code and paste edited code in the post. @Reto H&#246;hener IMO The exercise is for reading a file. Also, reading the file into memory doesn&#39;t make much sense."}],"answers":[{"comments":[{"owner":{"account_id":298566,"reputation":537,"user_id":604656,"accept_rate":47,"display_name":"ashish.g"},"score":0,"creation_date":1669224572,"post_id":74550483,"comment_id":131598161,"body_markdown":"The only problem i see is this solution is suitable for reading small files only as it reads entire file into memory. Also, start can sometimes be negative.","body":"The only problem i see is this solution is suitable for reading small files only as it reads entire file into memory. Also, start can sometimes be negative."},{"owner":{"account_id":12221317,"reputation":569,"user_id":8920328,"display_name":"Melron"},"score":0,"creation_date":1669229442,"post_id":74550483,"comment_id":131599717,"body_markdown":"@ashish.g if you know the size of your poems, then you can change it. My logic there was about dynamic size. How the start point can be negative?","body":"@ashish.g if you know the size of your poems, then you can change it. My logic there was about dynamic size. How the start point can be negative?"}],"tags":[],"owner":{"account_id":12221317,"reputation":569,"user_id":8920328,"display_name":"Melron"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669222650,"creation_date":1669222650,"answer_id":74550483,"question_id":74549982,"body_markdown":"You can try \r\n\r\n    private static final int POEM_LINES_LENGTH = 5;\r\n\t\r\n\tpublic static void main(String[] args) throws IOException\r\n\t{\r\n\t\t// The file\r\n\t\tFile file = new File(&quot;src/main/java/org/example/text.txt&quot;);\r\n\t\t\r\n\t\t// Get all the lines into a single list\r\n\t\tList&lt;String&gt; lines = Files.readAllLines(Paths.get(file.getAbsolutePath()));\r\n\t\t\r\n\t\t// Get a random poem and point at the end.\r\n\t\tint poemFinish = new Random().nextInt(lines.size() / POEM_LINES_LENGTH) * POEM_LINES_LENGTH;\r\n\t\t\r\n\t\t// Point to the be start\r\n\t\tint start = poemFinish - POEM_LINES_LENGTH;\r\n\t\t\r\n\t\t// Create a sublist with the start and finish indexes.\r\n\t\tfor (String line : lines.subList(start, poemFinish))\r\n\t\t\tSystem.out.println(line);\r\n\t}","title":"Java: print multiple random lines from text file","body":"<p>You can try</p>\n<pre><code>private static final int POEM_LINES_LENGTH = 5;\n\npublic static void main(String[] args) throws IOException\n{\n    // The file\n    File file = new File(&quot;src/main/java/org/example/text.txt&quot;);\n    \n    // Get all the lines into a single list\n    List&lt;String&gt; lines = Files.readAllLines(Paths.get(file.getAbsolutePath()));\n    \n    // Get a random poem and point at the end.\n    int poemFinish = new Random().nextInt(lines.size() / POEM_LINES_LENGTH) * POEM_LINES_LENGTH;\n    \n    // Point to the be start\n    int start = poemFinish - POEM_LINES_LENGTH;\n    \n    // Create a sublist with the start and finish indexes.\n    for (String line : lines.subList(start, poemFinish))\n        System.out.println(line);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":298566,"reputation":537,"user_id":604656,"accept_rate":47,"display_name":"ashish.g"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669224503,"creation_date":1669224503,"answer_id":74550847,"question_id":74549982,"body_markdown":"This will not read the entire file into the memory, hence large files can also be read. \r\n      \r\n      final int totalPoems = 17;\r\n      int skip = new Random().nextInt(totalPoems) * 5;\r\n\r\n      Path path = Paths.get(&quot;file.txt&quot;);\r\n      BufferedReader reader = Files.newBufferedReader(path);\r\n        \r\n      while(skip--&gt;0){\r\n         reader.readLine();\r\n      }\r\n      \r\n      for(int i=0; i&lt;5; i++){\r\n          System.out.println(reader.readLine());\r\n      }\r\n\r\nThe downside is you have to know how many poems are in the file beforehand. If you don&#39;t want to do this you can quickly count the total number of lines/poems only one time.","title":"Java: print multiple random lines from text file","body":"<p>This will not read the entire file into the memory, hence large files can also be read.</p>\n<pre><code>  final int totalPoems = 17;\n  int skip = new Random().nextInt(totalPoems) * 5;\n\n  Path path = Paths.get(&quot;file.txt&quot;);\n  BufferedReader reader = Files.newBufferedReader(path);\n    \n  while(skip--&gt;0){\n     reader.readLine();\n  }\n  \n  for(int i=0; i&lt;5; i++){\n      System.out.println(reader.readLine());\n  }\n</code></pre>\n<p>The downside is you have to know how many poems are in the file beforehand. If you don't want to do this you can quickly count the total number of lines/poems only one time.</p>\n"}],"owner":{"account_id":26066303,"reputation":1,"user_id":19766690,"display_name":"Kev98"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":112,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1669291881,"answer_count":2,"score":0,"last_activity_date":1669224503,"creation_date":1669220295,"question_id":74549982,"body_markdown":"I am currently learning Java and received the following task, that I cannot seem to solve:\r\n\r\n&quot;Create a Java program that prints one random poem of 5 lines in the console. The poems must be read from a text file.&quot;\r\n\r\nI have copied 10 different poems inside a text file, all written underneath each other. I managed to make the program print out the very first poem (first 5 lines) in the console, but first of all, I am not sure if it&#39;s the correct way to do such, and I don&#39;t know how to make the program print out one random poem (5 lines that belong together) each time I run it.\r\n\r\nHere is the farthest I could get:\r\n\r\n```\r\npublic static void main(String[] args) throws IOException {\r\n    File file = new File(&quot;src/main/java/org/example/text.txt&quot;);\r\n\r\n    Scanner scanner = null;\r\n    try {\r\n        scanner = new Scanner(file);\r\n\r\n        int i = 0;\r\n        while (scanner.hasNext()) {\r\n            String line = scanner.nextLine();\r\n            if (i &lt; 5) {\r\n\r\n                i++;\r\n                System.out.println(line);\r\n            }\r\n        }\r\n    } catch (Exception e) {\r\n\r\n    }\r\n}\r\n```","title":"Java: print multiple random lines from text file","body":"<p>I am currently learning Java and received the following task, that I cannot seem to solve:</p>\n<p>&quot;Create a Java program that prints one random poem of 5 lines in the console. The poems must be read from a text file.&quot;</p>\n<p>I have copied 10 different poems inside a text file, all written underneath each other. I managed to make the program print out the very first poem (first 5 lines) in the console, but first of all, I am not sure if it's the correct way to do such, and I don't know how to make the program print out one random poem (5 lines that belong together) each time I run it.</p>\n<p>Here is the farthest I could get:</p>\n<pre><code>public static void main(String[] args) throws IOException {\n    File file = new File(&quot;src/main/java/org/example/text.txt&quot;);\n\n    Scanner scanner = null;\n    try {\n        scanner = new Scanner(file);\n\n        int i = 0;\n        while (scanner.hasNext()) {\n            String line = scanner.nextLine();\n            if (i &lt; 5) {\n\n                i++;\n                System.out.println(line);\n            }\n        }\n    } catch (Exception e) {\n\n    }\n}\n</code></pre>\n"},{"tags":["java","spring-boot","rest","gradle","aerospike"],"comments":[{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":1,"creation_date":1669187767,"post_id":74542998,"comment_id":131584897,"body_markdown":"There were failing tests. &gt;&gt; that kind of explains it","body":"There were failing tests. &gt;&gt; that kind of explains it"}],"answers":[{"tags":[],"owner":{"account_id":22363579,"reputation":260,"user_id":16579758,"display_name":"JDogMcSteezy"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":true,"score":7,"last_activity_date":1669224385,"creation_date":1669224385,"answer_id":74550821,"question_id":74542998,"body_markdown":"By default, `./gradlew build` runs the tests before it builds the jar file.  It looks like the integration tests are failing, and the unit tests are passing. This is likely because the server is not available on localhost.  Run `make build` instead to bypass the tests.","title":"Aerospike REST gateway, failed build with an exception","body":"<p>By default, <code>./gradlew build</code> runs the tests before it builds the jar file.  It looks like the integration tests are failing, and the unit tests are passing. This is likely because the server is not available on localhost.  Run <code>make build</code> instead to bypass the tests.</p>\n"}],"owner":{"account_id":1597463,"reputation":684,"user_id":1479199,"accept_rate":83,"display_name":"Lezir Opav"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":66,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":74550821,"answer_count":1,"score":2,"last_activity_date":1669224385,"creation_date":1669187690,"question_id":74542998,"body_markdown":"im trying to install Aerospike REST Gateway, after running first command ./gradlew build (and waiting for 2 hours) its shows something like this :\r\n\r\n```\r\n2142 tests completed, 1660 failed\r\n\r\n&gt; Task :test FAILED\r\n\r\nFAILURE: Build failed with an exception.\r\n\r\n* What went wrong:\r\nExecution failed for task &#39;:test&#39;.\r\n&gt; There were failing tests. See the report at: file:///home/andalabs/aerospike-rest-gateway/build/reports/tests/test/index.html\r\n\r\n* Try:\r\n&gt; Run with --stacktrace option to get the stack trace.\r\n&gt; Run with --info or --debug option to get more log output.\r\n&gt; Run with --scan to get full insights.\r\n\r\n* Get more help at https://help.gradle.org\r\n\r\nDeprecated Gradle features were used in this build, making it incompatible with Gradle 8.0.\r\n\r\nYou can use &#39;--warning-mode all&#39; to show the individual deprecation warnings and determine if they come from your own scripts or plugins.\r\n\r\nSee https://docs.gradle.org/7.3.1/userguide/command_line_interface.html#sec:command_line_warnings\r\n\r\nBUILD FAILED in 2h 57m 33s\r\n8 actionable tasks: 8 executed\r\n```\r\nMostly those failed task is from package  &quot;com.aerospike.restclient&quot; which i dont have any clue what i have to do with this\r\n\r\nWhat im missing here? im using Ubuntu 20 ","title":"Aerospike REST gateway, failed build with an exception","body":"<p>im trying to install Aerospike REST Gateway, after running first command ./gradlew build (and waiting for 2 hours) its shows something like this :</p>\n<pre><code>2142 tests completed, 1660 failed\n\n&gt; Task :test FAILED\n\nFAILURE: Build failed with an exception.\n\n* What went wrong:\nExecution failed for task ':test'.\n&gt; There were failing tests. See the report at: file:///home/andalabs/aerospike-rest-gateway/build/reports/tests/test/index.html\n\n* Try:\n&gt; Run with --stacktrace option to get the stack trace.\n&gt; Run with --info or --debug option to get more log output.\n&gt; Run with --scan to get full insights.\n\n* Get more help at https://help.gradle.org\n\nDeprecated Gradle features were used in this build, making it incompatible with Gradle 8.0.\n\nYou can use '--warning-mode all' to show the individual deprecation warnings and determine if they come from your own scripts or plugins.\n\nSee https://docs.gradle.org/7.3.1/userguide/command_line_interface.html#sec:command_line_warnings\n\nBUILD FAILED in 2h 57m 33s\n8 actionable tasks: 8 executed\n</code></pre>\n<p>Mostly those failed task is from package  &quot;com.aerospike.restclient&quot; which i dont have any clue what i have to do with this</p>\n<p>What im missing here? im using Ubuntu 20</p>\n"},{"tags":["java","maven","mapper","mapstruct"],"answers":[{"tags":[],"owner":{"account_id":1128956,"reputation":19775,"user_id":1115491,"display_name":"Filip"},"comment_count":0,"down_vote_count":1,"up_vote_count":15,"is_accepted":true,"score":14,"last_activity_date":1501778971,"creation_date":1501778971,"answer_id":45490289,"question_id":45482677,"body_markdown":"The error `Unmapped target properties: &quot;&lt;list of properties&gt;&quot;` is usually represented on the appropriate methods and in your case it means that MapStruct could not find `from` and `to` for the mapping of `MessageDTO toMessageDTO(Message message)` and `clientFrom` and `clientTo` for the mapping of `Message toMessage(MessageDTO messageDTO)`.\r\n\r\nTo solve this you will have to explicitly define the mappings between the different properties.\r\n\r\nYour mapper will look like (I am assuming `mapstruct-jdk8` usage):\r\n\r\n    @Mapper(componentModel = &quot;spring&quot;, uses = {ClientMapper.class})\r\n    public interface MessageMapper {\r\n    \r\n        @Mapping(target = &quot;clientFrom&quot;, source = &quot;from&quot;)\r\n        @Mapping(target = &quot;clientTo&quot;, source = &quot;to&quot;)\r\n        Message toMessage(MessageDTO messageDTO);\r\n    \r\n        @InheritInverseConfiguration //MapStruct will automatically reverse the defined mappings from toMessage\r\n        MessageDTO toMessageDTO(Message message);\r\n    \r\n        List&lt;Message&gt; toMessageList(List&lt;MessageDTO&gt; list);\r\n        List&lt;MessageDTO&gt; toMessageDTOList(List&lt;Message&gt; list);\r\n    }\r\n\r\nFor better understanding have a look at [here](http://mapstruct.org/documentation/stable/reference/html/#basic-mappings). In the documentation. For more info about the `@InheritInverseConfiguration` have a look [here](http://mapstruct.org/documentation/stable/reference/html/#inverse-mappings).\r\n\r\nIf the names of the properties (getters / setters) were the same in `Message` and `MessageDTO`, then you wouldn&#39;t need the `@Mapping` annotations","title":"Java: Unmapped target properties","body":"<p>The error <code>Unmapped target properties: \"&lt;list of properties&gt;\"</code> is usually represented on the appropriate methods and in your case it means that MapStruct could not find <code>from</code> and <code>to</code> for the mapping of <code>MessageDTO toMessageDTO(Message message)</code> and <code>clientFrom</code> and <code>clientTo</code> for the mapping of <code>Message toMessage(MessageDTO messageDTO)</code>.</p>\n\n<p>To solve this you will have to explicitly define the mappings between the different properties.</p>\n\n<p>Your mapper will look like (I am assuming <code>mapstruct-jdk8</code> usage):</p>\n\n<pre><code>@Mapper(componentModel = \"spring\", uses = {ClientMapper.class})\npublic interface MessageMapper {\n\n    @Mapping(target = \"clientFrom\", source = \"from\")\n    @Mapping(target = \"clientTo\", source = \"to\")\n    Message toMessage(MessageDTO messageDTO);\n\n    @InheritInverseConfiguration //MapStruct will automatically reverse the defined mappings from toMessage\n    MessageDTO toMessageDTO(Message message);\n\n    List&lt;Message&gt; toMessageList(List&lt;MessageDTO&gt; list);\n    List&lt;MessageDTO&gt; toMessageDTOList(List&lt;Message&gt; list);\n}\n</code></pre>\n\n<p>For better understanding have a look at <a href=\"http://mapstruct.org/documentation/stable/reference/html/#basic-mappings\" rel=\"noreferrer\">here</a>. In the documentation. For more info about the <code>@InheritInverseConfiguration</code> have a look <a href=\"http://mapstruct.org/documentation/stable/reference/html/#inverse-mappings\" rel=\"noreferrer\">here</a>.</p>\n\n<p>If the names of the properties (getters / setters) were the same in <code>Message</code> and <code>MessageDTO</code>, then you wouldn't need the <code>@Mapping</code> annotations</p>\n"},{"tags":[],"owner":{"account_id":203033,"reputation":544,"user_id":450450,"display_name":"Anatoly Tutov"},"comment_count":0,"down_vote_count":1,"up_vote_count":29,"is_accepted":false,"score":28,"last_activity_date":1669224218,"creation_date":1549994478,"answer_id":54656081,"question_id":45482677,"body_markdown":"In the latest versions of `MapStruct` you can: \r\n\r\n 1. Define `@Mapping` annotation with `ignore=true` attribute for any field that should not be mapped OR\r\n 2. Add special reporting policy to your mapper interface to suppress warnings on all unmapped fields at once, like this:\r\n```java\r\n@Mapper(unmappedTargetPolicy = ReportingPolicy.IGNORE)\r\n```","title":"Java: Unmapped target properties","body":"<p>In the latest versions of <code>MapStruct</code> you can:</p>\n<ol>\n<li>Define <code>@Mapping</code> annotation with <code>ignore=true</code> attribute for any field that should not be mapped OR</li>\n<li>Add special reporting policy to your mapper interface to suppress warnings on all unmapped fields at once, like this:</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>@Mapper(unmappedTargetPolicy = ReportingPolicy.IGNORE)\n</code></pre>\n"}],"owner":{"account_id":9223844,"reputation":259,"user_id":6852253,"display_name":"Błażej Rejnowski"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":32685,"favorite_count":0,"down_vote_count":0,"up_vote_count":18,"accepted_answer_id":45490289,"answer_count":2,"score":18,"last_activity_date":1669224218,"creation_date":1501759125,"question_id":45482677,"body_markdown":"   I have a problem with Mapper.I am using a mapstruct-processor to build Maven project. All time I get a warning: \r\nWarning:(15, 16) java: Unmapped target properties: &quot;from, to&quot;.\r\nWarning:(13, 13) java: Unmapped target properties: &quot;clientFrom, clientTo&quot;.\r\nWhat did I suppose to do with that?  Class Client works well and creates a Client.\r\n\r\n     @Entity\r\n    public class Message {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.AUTO)\r\n    private Long id;\r\n\r\n    private String message;\r\n\r\n    @ManyToOne(cascade = {CascadeType.ALL})\r\n    @JoinColumn(name = &quot;client_from&quot;)\r\n    private Client clientFrom;\r\n\r\n    @ManyToOne\r\n    @JoinColumn(name = &quot;client_to&quot;)\r\n    private Client clientTo;\r\n\r\n    public Message(){}\r\n\r\n    public Long getId() {\r\n        return id;\r\n    }\r\n\r\n    public void setId(Long id) {\r\n        this.id = id;\r\n    }\r\n\r\n    public String getMessage() {\r\n        return message;\r\n    }\r\n\r\n    public void setMessage(String message) {\r\n        this.message = message;\r\n    }\r\n\r\n    public Client getClientFrom() {\r\n        return clientFrom;\r\n    }\r\n\r\n    public void setClientFrom(Client clientFrom) {\r\n        this.clientFrom = clientFrom;\r\n    }\r\n\r\n    public Client getClientTo() {\r\n        return clientTo;\r\n    }\r\n\r\n    public void setClientTo(Client clientTo) {\r\n        this.clientTo = clientTo;\r\n    }\r\n\r\n  \r\n    }\r\n\r\n\r\n    public class MessageDTO {\r\n\r\n    private Long id;\r\n    private String message;\r\n    private ClientDTO from;\r\n    private ClientDTO to;\r\n\r\n    public MessageDTO(){}\r\n\r\n    public Long getId() {\r\n        return id;\r\n    }\r\n\r\n    public void setId(Long id) {\r\n        this.id = id;\r\n    }\r\n\r\n    public String getMessage() {\r\n        return message;\r\n    }\r\n\r\n    public void setMessage(String message) {\r\n        this.message = message;\r\n    }\r\n\r\n    public ClientDTO getFrom() {\r\n        return from;\r\n    }\r\n\r\n    public void setFrom(ClientDTO from) {\r\n        this.from = from;\r\n    }\r\n\r\n    public ClientDTO getTo() {\r\n        return to;\r\n    }\r\n\r\n    public void setTo(ClientDTO to) {\r\n        this.to = to;\r\n    }\r\n    }\r\n\r\n\r\n\r\n     @Mapper(componentModel = &quot;spring&quot;, uses = {ClientMapper.class})\r\n    public interface MessageMapper {\r\n\r\n    Message toMessage(MessageDTO messageDTO);\r\n\r\n    MessageDTO toMessageDTO(Message message);\r\n\r\n    List&lt;Message&gt; toMessageList(List&lt;MessageDTO&gt; list);\r\n    List&lt;MessageDTO&gt; toMessageDTOList(List&lt;Message&gt; list);\r\n    }","title":"Java: Unmapped target properties","body":"<p>I have a problem with Mapper.I am using a mapstruct-processor to build Maven project. All time I get a warning: \nWarning:(15, 16) java: Unmapped target properties: \"from, to\".\nWarning:(13, 13) java: Unmapped target properties: \"clientFrom, clientTo\".\nWhat did I suppose to do with that?  Class Client works well and creates a Client.</p>\n\n<pre><code> @Entity\npublic class Message {\n\n@Id\n@GeneratedValue(strategy = GenerationType.AUTO)\nprivate Long id;\n\nprivate String message;\n\n@ManyToOne(cascade = {CascadeType.ALL})\n@JoinColumn(name = \"client_from\")\nprivate Client clientFrom;\n\n@ManyToOne\n@JoinColumn(name = \"client_to\")\nprivate Client clientTo;\n\npublic Message(){}\n\npublic Long getId() {\n    return id;\n}\n\npublic void setId(Long id) {\n    this.id = id;\n}\n\npublic String getMessage() {\n    return message;\n}\n\npublic void setMessage(String message) {\n    this.message = message;\n}\n\npublic Client getClientFrom() {\n    return clientFrom;\n}\n\npublic void setClientFrom(Client clientFrom) {\n    this.clientFrom = clientFrom;\n}\n\npublic Client getClientTo() {\n    return clientTo;\n}\n\npublic void setClientTo(Client clientTo) {\n    this.clientTo = clientTo;\n}\n\n\n}\n\n\npublic class MessageDTO {\n\nprivate Long id;\nprivate String message;\nprivate ClientDTO from;\nprivate ClientDTO to;\n\npublic MessageDTO(){}\n\npublic Long getId() {\n    return id;\n}\n\npublic void setId(Long id) {\n    this.id = id;\n}\n\npublic String getMessage() {\n    return message;\n}\n\npublic void setMessage(String message) {\n    this.message = message;\n}\n\npublic ClientDTO getFrom() {\n    return from;\n}\n\npublic void setFrom(ClientDTO from) {\n    this.from = from;\n}\n\npublic ClientDTO getTo() {\n    return to;\n}\n\npublic void setTo(ClientDTO to) {\n    this.to = to;\n}\n}\n\n\n\n @Mapper(componentModel = \"spring\", uses = {ClientMapper.class})\npublic interface MessageMapper {\n\nMessage toMessage(MessageDTO messageDTO);\n\nMessageDTO toMessageDTO(Message message);\n\nList&lt;Message&gt; toMessageList(List&lt;MessageDTO&gt; list);\nList&lt;MessageDTO&gt; toMessageDTOList(List&lt;Message&gt; list);\n}\n</code></pre>\n"},{"tags":["java","docker","netflix-eureka","spring-cloud-netflix","service-discovery"],"comments":[{"owner":{"account_id":7608172,"reputation":715,"user_id":5770084,"display_name":"whiplash"},"score":0,"creation_date":1669219695,"post_id":74549709,"comment_id":131596270,"body_markdown":"Are you sure your docker is running on 127.0.0.1?","body":"Are you sure your docker is running on 127.0.0.1?"},{"owner":{"account_id":18048122,"reputation":57,"user_id":13118527,"display_name":"David Ogbodu"},"score":0,"creation_date":1669219844,"post_id":74549709,"comment_id":131596322,"body_markdown":"i dont know ??? how do i check","body":"i dont know ??? how do i check"},{"owner":{"account_id":18048122,"reputation":57,"user_id":13118527,"display_name":"David Ogbodu"},"score":0,"creation_date":1669220126,"post_id":74549709,"comment_id":131596413,"body_markdown":"@whiplash  or how to solve this issue","body":"@whiplash  or how to solve this issue"},{"owner":{"account_id":9228609,"reputation":3045,"user_id":6855531,"display_name":"paltaa"},"score":0,"creation_date":1669220874,"post_id":74549709,"comment_id":131596700,"body_markdown":"do a docker run with port mapping:\n\ndocker run -p 8761","body":"do a docker run with port mapping:  docker run -p 8761"},{"owner":{"account_id":18048122,"reputation":57,"user_id":13118527,"display_name":"David Ogbodu"},"score":0,"creation_date":1669220957,"post_id":74549709,"comment_id":131596735,"body_markdown":"@paltaa ok i will do that now","body":"@paltaa ok i will do that now"},{"owner":{"account_id":18048122,"reputation":57,"user_id":13118527,"display_name":"David Ogbodu"},"score":0,"creation_date":1669221169,"post_id":74549709,"comment_id":131596805,"body_markdown":"@paltaa that is what am doing with this command, docker run -p 8761:8761 -t davidtega/eureka-layered , and the application is starting successfully but i just cant access the localhost:8761 on the browser","body":"@paltaa that is what am doing with this command, docker run -p 8761:8761 -t davidtega/eureka-layered , and the application is starting successfully but i just cant access the localhost:8761 on the browser"},{"owner":{"account_id":9228609,"reputation":3045,"user_id":6855531,"display_name":"paltaa"},"score":0,"creation_date":1669221985,"post_id":74549709,"comment_id":131597143,"body_markdown":"could you post your Dockerfile and check that the port is bound to that process with  lsof -i -P -n | grep LISTEN","body":"could you post your Dockerfile and check that the port is bound to that process with  lsof -i -P -n | grep LISTEN"},{"owner":{"account_id":18048122,"reputation":57,"user_id":13118527,"display_name":"David Ogbodu"},"score":0,"creation_date":1669222595,"post_id":74549709,"comment_id":131597397,"body_markdown":"@paltaa ok i have updated the post and added my dockerfile","body":"@paltaa ok i have updated the post and added my dockerfile"}],"answers":[{"comments":[{"owner":{"account_id":18048122,"reputation":57,"user_id":13118527,"display_name":"David Ogbodu"},"score":0,"creation_date":1669223349,"post_id":74550545,"comment_id":131597686,"body_markdown":"i ran the command docker run -d -p 8761 davidtega/eureka-layered, and i was able to access my eureka server on http://localhost:57072/","body":"i ran the command docker run -d -p 8761 davidtega/eureka-layered, and i was able to access my eureka server on <a href=\"http://localhost:57072/\" rel=\"nofollow noreferrer\">localhost:57072</a>"},{"owner":{"account_id":18048122,"reputation":57,"user_id":13118527,"display_name":"David Ogbodu"},"score":0,"creation_date":1669223381,"post_id":74550545,"comment_id":131597694,"body_markdown":"ok i will try that as well","body":"ok i will try that as well"},{"owner":{"account_id":9228609,"reputation":3045,"user_id":6855531,"display_name":"paltaa"},"score":0,"creation_date":1669223818,"post_id":74550545,"comment_id":131597880,"body_markdown":"okay you are done then","body":"okay you are done then"},{"owner":{"account_id":9228609,"reputation":3045,"user_id":6855531,"display_name":"paltaa"},"score":0,"creation_date":1669224034,"post_id":74550545,"comment_id":131597966,"body_markdown":"Great! You can acept the answer now, will edit it with all the details","body":"Great! You can acept the answer now, will edit it with all the details"}],"tags":[],"owner":{"account_id":9228609,"reputation":3045,"user_id":6855531,"display_name":"paltaa"},"comment_count":4,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1669224103,"creation_date":1669223008,"answer_id":74550545,"question_id":74549709,"body_markdown":"Add to the config `eureka.hostname=localhost` and `eureka.client.serviceUrl.defaultZone=http://${eureka.instance.hostname}:${server.port}/eureka/`\r\n\r\n\r\nMake sure the port is mapped doing a `docker run -p 8761` and then check that the port is correctly listening with `lsof -i -P -n | grep LISTEN`","title":"How Do I Containerize Eureka Server In Docker","body":"<p>Add to the config <code>eureka.hostname=localhost</code> and <code>eureka.client.serviceUrl.defaultZone=http://${eureka.instance.hostname}:${server.port}/eureka/</code></p>\n<p>Make sure the port is mapped doing a <code>docker run -p 8761</code> and then check that the port is correctly listening with <code>lsof -i -P -n | grep LISTEN</code></p>\n"}],"owner":{"account_id":18048122,"reputation":57,"user_id":13118527,"display_name":"David Ogbodu"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1726,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":74550545,"answer_count":1,"score":1,"last_activity_date":1669224103,"creation_date":1669219085,"question_id":74549709,"body_markdown":"i have been struggling to use my created eureka-server container in docker...\r\nI have gone through previous solutions and am still not getting why i cant access the url: http://localhost:8761/\r\nI have changed my properties file severally but no one seems to be working...\r\nFirstly my application.properties file goes like this\r\n```\r\neureka.client.register-with-eureka=false\r\neureka.client.fetch-registry=false\r\nserver.port=8761\r\nspring.application.name=discovery-service\r\neureka.instance.prefer-ip-address=true\r\nlogging.level.org.springframework.cloud.commons.util.InetUtils=trace\r\nspring.cloud.inetutils.timeout-seconds=10\r\n```\r\nAnd my dependecies tag of my pom.xml goes like this\r\n```\r\n&lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-cloud-starter-netflix-eureka-server&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n```\r\nAnd i have also added the @EnableEurekaServer to my application class...\r\nSo when i created an image for it using the docker command docker build -t davidtega/eureka-layered -f Dockerfile.layered .\r\nIt worked perfectly, and i started a container using the docker command docker run -p 8761:8761 -t davidtega/eureka-layered \r\nAnd this the log\r\n[![enter image description here][1]][1]\r\n\r\n\r\nBut when i try to access http://localhost:8761/, this site cannot be reached is the response i get everytime...\r\nSo i noticed my app was running on 0.0.0.0:8761 not 127.0.0.1:8761\r\n[![enter image description here][2]][2]\r\n\r\nI was wondering how do i change it ???\r\nI have two docker files, the first one is the DockerFile and the second one is the Dockerfile.layered\r\nFor my DockerFile, this is what is in it...\r\n```\r\nFROM openjdk:17\r\n\r\nCOPY target/*.jar app.jar\r\n\r\nENTRYPOINT [&quot;java&quot;,&quot;-jar&quot;,&quot;/app.jar&quot;]\r\n\r\n```\r\nAnd my DockerFile.layered file contains \r\n```\r\nFROM eclipse-temurin:17.0.4.1_1-jre as builder\r\nWORKDIR extracted\r\nADD target/*.jar app.jar\r\nRUN java -Djarmode=layertools -jar app.jar extract\r\n\r\nFROM eclipse-temurin:17.0.4.1_1-jre\r\nWORKDIR application\r\nCOPY --from=builder extracted/dependencies/ ./\r\nCOPY --from=builder extracted/spring-boot-loader/ ./\r\nCOPY --from=builder extracted/snapshot-dependencies/ ./\r\nCOPY --from=builder extracted/application/ ./\r\nEXPOSE 8761\r\nENTRYPOINT [&quot;java&quot;, &quot;org.springframework.boot.loader.JarLauncher&quot;]\r\n\r\n```\r\nPlease and please help i request assistance, i am using spring cloud version 2.7 and java 17... Thanks \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/AiMCE.png\r\n  [2]: https://i.stack.imgur.com/fU8B2.png","title":"How Do I Containerize Eureka Server In Docker","body":"<p>i have been struggling to use my created eureka-server container in docker...\nI have gone through previous solutions and am still not getting why i cant access the url: http://localhost:8761/\nI have changed my properties file severally but no one seems to be working...\nFirstly my application.properties file goes like this</p>\n<pre><code>eureka.client.register-with-eureka=false\neureka.client.fetch-registry=false\nserver.port=8761\nspring.application.name=discovery-service\neureka.instance.prefer-ip-address=true\nlogging.level.org.springframework.cloud.commons.util.InetUtils=trace\nspring.cloud.inetutils.timeout-seconds=10\n</code></pre>\n<p>And my dependecies tag of my pom.xml goes like this</p>\n<pre><code>&lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-cloud-starter-netflix-eureka-server&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n</code></pre>\n<p>And i have also added the @EnableEurekaServer to my application class...\nSo when i created an image for it using the docker command docker build -t davidtega/eureka-layered -f Dockerfile.layered .\nIt worked perfectly, and i started a container using the docker command docker run -p 8761:8761 -t davidtega/eureka-layered\nAnd this the log\n<a href=\"https://i.stack.imgur.com/AiMCE.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/AiMCE.png\" alt=\"enter image description here\" /></a></p>\n<p>But when i try to access http://localhost:8761/, this site cannot be reached is the response i get everytime...\nSo i noticed my app was running on 0.0.0.0:8761 not 127.0.0.1:8761\n<a href=\"https://i.stack.imgur.com/fU8B2.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/fU8B2.png\" alt=\"enter image description here\" /></a></p>\n<p>I was wondering how do i change it ???\nI have two docker files, the first one is the DockerFile and the second one is the Dockerfile.layered\nFor my DockerFile, this is what is in it...</p>\n<pre><code>FROM openjdk:17\n\nCOPY target/*.jar app.jar\n\nENTRYPOINT [&quot;java&quot;,&quot;-jar&quot;,&quot;/app.jar&quot;]\n\n</code></pre>\n<p>And my DockerFile.layered file contains</p>\n<pre><code>FROM eclipse-temurin:17.0.4.1_1-jre as builder\nWORKDIR extracted\nADD target/*.jar app.jar\nRUN java -Djarmode=layertools -jar app.jar extract\n\nFROM eclipse-temurin:17.0.4.1_1-jre\nWORKDIR application\nCOPY --from=builder extracted/dependencies/ ./\nCOPY --from=builder extracted/spring-boot-loader/ ./\nCOPY --from=builder extracted/snapshot-dependencies/ ./\nCOPY --from=builder extracted/application/ ./\nEXPOSE 8761\nENTRYPOINT [&quot;java&quot;, &quot;org.springframework.boot.loader.JarLauncher&quot;]\n\n</code></pre>\n<p>Please and please help i request assistance, i am using spring cloud version 2.7 and java 17... Thanks</p>\n"},{"tags":["java","string","null","equals","referenceequals"],"comments":[{"owner":{"display_name":"user166390"},"score":7,"creation_date":1296025032,"post_id":4802015,"comment_id":5321867,"body_markdown":"Compare with `b.equals(a)` -- but don&#39;t use `==` for string comparing as &quot;it won&#39;t work&quot; in other ways. The `null` value (which is different than an empty string `&quot;&quot;`, a valid String instance) can *never* have a method invoked upon it. Placing the &quot;known non-null&quot; (usually a constant value or literal) to the left side of the equality is &quot;Yoda conditionals&quot; or some-such.","body":"Compare with <code>b.equals(a)</code> -- but don&#39;t use <code>==</code> for string comparing as &quot;it won&#39;t work&quot; in other ways. The <code>null</code> value (which is different than an empty string <code>&quot;&quot;</code>, a valid String instance) can <i>never</i> have a method invoked upon it. Placing the &quot;known non-null&quot; (usually a constant value or literal) to the left side of the equality is &quot;Yoda conditionals&quot; or some-such."}],"answers":[{"comments":[{"owner":{"account_id":106034,"reputation":35823,"user_id":282658,"accept_rate":100,"display_name":"JUST MY correct OPINION"},"score":1,"creation_date":1296025134,"post_id":4802042,"comment_id":5321878,"body_markdown":"Both `a` and `b` are references.  `a` is a reference with an instantiated object.  `b` is a reference without an instantiated object (hence the term &quot;null reference&quot;).","body":"Both <code>a</code> and <code>b</code> are references.  <code>a</code> is a reference with an instantiated object.  <code>b</code> is a reference without an instantiated object (hence the term &quot;null reference&quot;)."},{"owner":{"display_name":"user166390"},"score":0,"creation_date":1296025202,"post_id":4802042,"comment_id":5321882,"body_markdown":"I counter-acted the -1 ;-) But it would help to clarify this answer and discuss the difference between &quot;an object&quot; and the `null` value and the difference between objects and variables.","body":"I counter-acted the -1 ;-) But it would help to clarify this answer and discuss the difference between &quot;an object&quot; and the <code>null</code> value and the difference between objects and variables."},{"owner":{"display_name":"user467871"},"score":0,"creation_date":1296025448,"post_id":4802042,"comment_id":5321914,"body_markdown":"@pst thanks :) I answered it by heart because here is my another answer that similar to this question http://stackoverflow.com/questions/4459623/java-is-null-an-instance-of-object/4459652#4459652","body":"@pst thanks :) I answered it by heart because here is my another answer that similar to this question <a href=\"http://stackoverflow.com/questions/4459623/java-is-null-an-instance-of-object/4459652#4459652\" title=\"java is null an instance of object\">stackoverflow.com/questions/4459623/&hellip;</a>"}],"tags":[],"owner":{"display_name":"user467871"},"comment_count":3,"down_vote_count":1,"up_vote_count":11,"is_accepted":false,"score":10,"last_activity_date":1296025585,"creation_date":1296024946,"answer_id":4802042,"question_id":4802015,"body_markdown":"here `a is an Object` but `b(null)` is **not** an Object it is a null reference\r\n\r\n    System.out.println(a instanceof Object); // true\r\n    \r\n    System.out.println(b instanceof Object); // false\r\n\r\n[here is][1] my similar answer\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/4459623/java-is-null-an-instance-of-object/4459652#4459652","title":"Difference between null and empty (&quot;&quot;) Java String","body":"<p>here <code>a is an Object</code> but <code>b(null)</code> is <strong>not</strong> an Object it is a null reference</p>\n\n<pre><code>System.out.println(a instanceof Object); // true\n\nSystem.out.println(b instanceof Object); // false\n</code></pre>\n\n<p><a href=\"https://stackoverflow.com/questions/4459623/java-is-null-an-instance-of-object/4459652#4459652\">here is</a> my similar answer</p>\n"},{"comments":[{"owner":{"account_id":2812953,"reputation":3076,"user_id":2418793,"accept_rate":62,"display_name":"Azurespot"},"score":1,"creation_date":1400382351,"post_id":4802044,"comment_id":36452957,"body_markdown":"&quot;null means that the String Object was not instantiated&quot; - thank you! that helps me to understand things a lot. i was able to use an if statement on a MediaPlayer object once, and it worked to use null, to check if it was running or not (with a method to execute if it was), but i never understood why it worked, but now i see what it was saying, i was checking for whether MediaPlayer had been instantiated or not, by using null... e.g `if (mp==null){do something}`.","body":"&quot;null means that the String Object was not instantiated&quot; - thank you! that helps me to understand things a lot. i was able to use an if statement on a MediaPlayer object once, and it worked to use null, to check if it was running or not (with a method to execute if it was), but i never understood why it worked, but now i see what it was saying, i was checking for whether MediaPlayer had been instantiated or not, by using null... e.g <code>if (mp==null){do something}</code>."}],"tags":[],"owner":{"account_id":288703,"reputation":962,"user_id":589268,"accept_rate":50,"display_name":"Aba Dov"},"comment_count":1,"down_vote_count":3,"up_vote_count":21,"is_accepted":false,"score":18,"last_activity_date":1296024946,"creation_date":1296024946,"answer_id":4802044,"question_id":4802015,"body_markdown":"String is an Object and can be null\r\n\r\nnull means that the String Object was not instantiated \r\n\r\n&quot;&quot; is an actual value of the instantiated Object String like &quot;aaa&quot; \r\n\r\nHere is a link that might clarify that point [http://download.oracle.com/javase/tutorial/java/concepts/object.html][1]\r\n \r\n\r\n\r\n  [1]: http://download.oracle.com/javase/tutorial/java/concepts/object.html","title":"Difference between null and empty (&quot;&quot;) Java String","body":"<p>String is an Object and can be null</p>\n\n<p>null means that the String Object was not instantiated </p>\n\n<p>\"\" is an actual value of the instantiated Object String like \"aaa\" </p>\n\n<p>Here is a link that might clarify that point <a href=\"http://download.oracle.com/javase/tutorial/java/concepts/object.html\" rel=\"noreferrer\">http://download.oracle.com/javase/tutorial/java/concepts/object.html</a></p>\n"},{"tags":[],"owner":{"account_id":235018,"reputation":364854,"user_id":501557,"accept_rate":90,"display_name":"templatetypedef"},"comment_count":0,"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1296024965,"creation_date":1296024965,"answer_id":4802047,"question_id":4802015,"body_markdown":"There is a pretty significant difference between the two.  The empty string `&quot;&quot;` is &quot;the string that has no characters in it.&quot;  It&#39;s an actual string that has a well-defined length.  All of the standard string operations are well-defined on the empty string - you can convert it to lower case, look up the index of some character in it, etc.  The null string `null` is &quot;no string at all.&quot;  It doesn&#39;t have a length because it&#39;s not a string at all.  Trying to apply any standard string operation to the null string will cause a `NullPointerException` at runtime.","title":"Difference between null and empty (&quot;&quot;) Java String","body":"<p>There is a pretty significant difference between the two.  The empty string <code>\"\"</code> is \"the string that has no characters in it.\"  It's an actual string that has a well-defined length.  All of the standard string operations are well-defined on the empty string - you can convert it to lower case, look up the index of some character in it, etc.  The null string <code>null</code> is \"no string at all.\"  It doesn't have a length because it's not a string at all.  Trying to apply any standard string operation to the null string will cause a <code>NullPointerException</code> at runtime.</p>\n"},{"comments":[{"owner":{"account_id":1426955,"reputation":9234,"user_id":1350209,"accept_rate":100,"display_name":"Cole Tobin"},"score":0,"creation_date":1345242775,"post_id":4802049,"comment_id":16028781,"body_markdown":"Does this apply to C# also? As in &quot;&quot;&#39;s array is {&#39;\\0&#39;}, a null","body":"Does this apply to C# also? As in &quot;&quot;&#39;s array is {&#39;\\0&#39;}, a null"},{"owner":{"account_id":1023865,"reputation":2105,"user_id":1033591,"accept_rate":77,"display_name":"Alston"},"score":3,"creation_date":1406871024,"post_id":4802049,"comment_id":39008499,"body_markdown":"The link about `intern` has expired. You can reference to another site to read about it: https://weblogs.java.net/blog/enicholas/archive/2006/06/all_about_inter.html","body":"The link about <code>intern</code> has expired. You can reference to another site to read about it: <a href=\"https://weblogs.java.net/blog/enicholas/archive/2006/06/all_about_inter.html\" rel=\"nofollow noreferrer\">weblogs.java.net/blog/enicholas/archive/2006/06/&hellip;</a>"},{"owner":{"account_id":5421911,"reputation":783,"user_id":4315310,"display_name":"cpinamtz"},"score":0,"creation_date":1515757391,"post_id":4802049,"comment_id":83432683,"body_markdown":"So, if I have a null String `String a = null` and then I **append** it a String like `a+= &quot;example&quot;`, when I print it, why does display `nullexample` if null is not a String?","body":"So, if I have a null String <code>String a = null</code> and then I <b>append</b> it a String like <code>a+= &quot;example&quot;</code>, when I print it, why does display <code>nullexample</code> if null is not a String?"},{"owner":{"account_id":2088546,"reputation":716,"user_id":1907543,"accept_rate":100,"display_name":"daboross"},"score":0,"creation_date":1520154801,"post_id":4802049,"comment_id":85192682,"body_markdown":"@PinaGamer JavaScript allows adding non-strings to strings. `&quot;num: &quot; + 20` gives you the string `&quot;num: 20&quot;`. Does this mean that `20` is a string? (it&#39;s not, `20` is a number). Same case for `null`: it&#39;s not a string, but it can be converted to one if you try to add it.","body":"@PinaGamer JavaScript allows adding non-strings to strings. <code>&quot;num: &quot; + 20</code> gives you the string <code>&quot;num: 20&quot;</code>. Does this mean that <code>20</code> is a string? (it&#39;s not, <code>20</code> is a number). Same case for <code>null</code>: it&#39;s not a string, but it can be converted to one if you try to add it."},{"owner":{"account_id":7363021,"reputation":1618,"user_id":5605687,"accept_rate":100,"display_name":"Onic Team"},"score":0,"creation_date":1568478206,"post_id":4802049,"comment_id":102290399,"body_markdown":"@Zach L : when String s = null+&quot;a&quot;; it gives output nulla but null.concat(&quot;a&quot;) it gives the null pointer exception. what is the reason in my first case null+&quot;a&quot;; is working.","body":"@Zach L : when String s = null+&quot;a&quot;; it gives output nulla but null.concat(&quot;a&quot;) it gives the null pointer exception. what is the reason in my first case null+&quot;a&quot;; is working."},{"owner":{"account_id":48948,"reputation":35452,"user_id":145574,"accept_rate":90,"display_name":"pstanton"},"score":0,"creation_date":1600947674,"post_id":4802049,"comment_id":113253576,"body_markdown":"`null == &quot;&quot; = false` (expected) but in one of the strange quirks of the language, `0 == &quot;&quot; = true` (ummmm)","body":"<code>null == &quot;&quot; = false</code> (expected) but in one of the strange quirks of the language, <code>0 == &quot;&quot; = true</code> (ummmm)"}],"tags":[],"owner":{"account_id":275502,"reputation":16152,"user_id":568406,"display_name":"Zach L"},"comment_count":6,"down_vote_count":0,"up_vote_count":248,"is_accepted":true,"score":248,"last_activity_date":1445513597,"creation_date":1296024970,"answer_id":4802049,"question_id":4802015,"body_markdown":"&quot;&quot; is an actual string, albeit an empty one.\r\n\r\nnull, however, means that the String variable points to nothing.\r\n\r\n`a==b` returns false because &quot;&quot; and null do not occupy the same space in memory--in other words, their variables don&#39;t point to the same objects.\r\n\r\n`a.equals(b)` returns false because &quot;&quot; does not equal null, obviously.\r\n\r\nThe difference is though that since &quot;&quot; is an actual string, you can still invoke methods or functions on it like\r\n\r\n`a.length()`\r\n\r\n`a.substring(0, 1)`\r\n\r\nand so on.\r\n\r\nIf the String equals null, like b, Java would throw a `NullPointerException` if you tried invoking, say:\r\n\r\n`b.length()`\r\n\r\n\r\n----\r\n\r\nIf the difference you are wondering about is == versus equals, it&#39;s this: \r\n\r\n== compares references, like if I went\r\n\r\n    String a = new String(&quot;&quot;);\r\n    String b = new String(&quot;&quot;);\r\n    System.out.println(a==b);\r\n\r\nThat would output false because I allocated two different objects, and a and b point to different objects.\r\n\r\nHowever, `a.equals(b)` in this case would return true, because `equals` for Strings will return true [if and only if the argument String is not null and represents the same sequence of characters.][1]\r\n\r\nBe warned, though, that Java does have a special case for Strings.\r\n\r\n    String a = &quot;abc&quot;;\r\n    String b = &quot;abc&quot;;\r\n    System.out.println(a==b);\r\n\r\nYou would think that the output would be `false`, since it should allocate two different Strings. Actually, Java will [intern][2] literal Strings (ones that are initialized like a and b in our example). So be careful, because that can give some false positives on how == works.\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#equals(java.lang.Object)\r\n  [2]: http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#intern()","title":"Difference between null and empty (&quot;&quot;) Java String","body":"<p>\"\" is an actual string, albeit an empty one.</p>\n\n<p>null, however, means that the String variable points to nothing.</p>\n\n<p><code>a==b</code> returns false because \"\" and null do not occupy the same space in memory--in other words, their variables don't point to the same objects.</p>\n\n<p><code>a.equals(b)</code> returns false because \"\" does not equal null, obviously.</p>\n\n<p>The difference is though that since \"\" is an actual string, you can still invoke methods or functions on it like</p>\n\n<p><code>a.length()</code></p>\n\n<p><code>a.substring(0, 1)</code></p>\n\n<p>and so on.</p>\n\n<p>If the String equals null, like b, Java would throw a <code>NullPointerException</code> if you tried invoking, say:</p>\n\n<p><code>b.length()</code></p>\n\n<hr>\n\n<p>If the difference you are wondering about is == versus equals, it's this: </p>\n\n<p>== compares references, like if I went</p>\n\n<pre><code>String a = new String(\"\");\nString b = new String(\"\");\nSystem.out.println(a==b);\n</code></pre>\n\n<p>That would output false because I allocated two different objects, and a and b point to different objects.</p>\n\n<p>However, <code>a.equals(b)</code> in this case would return true, because <code>equals</code> for Strings will return true <a href=\"http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#equals(java.lang.Object)\">if and only if the argument String is not null and represents the same sequence of characters.</a></p>\n\n<p>Be warned, though, that Java does have a special case for Strings.</p>\n\n<pre><code>String a = \"abc\";\nString b = \"abc\";\nSystem.out.println(a==b);\n</code></pre>\n\n<p>You would think that the output would be <code>false</code>, since it should allocate two different Strings. Actually, Java will <a href=\"http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#intern()\">intern</a> literal Strings (ones that are initialized like a and b in our example). So be careful, because that can give some false positives on how == works.</p>\n"},{"tags":[],"owner":{"account_id":79400,"reputation":7347,"user_id":225176,"accept_rate":64,"display_name":"Arkaaito"},"comment_count":0,"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1296024983,"creation_date":1296024983,"answer_id":4802052,"question_id":4802015,"body_markdown":"What your statements are telling you is just that &quot;&quot; isn&#39;t the same as null - which is true.  &quot;&quot; is an empty string; null means that no value has been assigned.\r\n\r\nIt might be more enlightening to try:\r\n\r\n    System.out.println(a.length()); // 0\r\n    System.out.println(b.length()); // error; b is not an object\r\n\r\n&quot;&quot; is still a string, meaning you can call its methods and get meaningful information.  null is an empty variable - there&#39;s literally nothing there.","title":"Difference between null and empty (&quot;&quot;) Java String","body":"<p>What your statements are telling you is just that \"\" isn't the same as null - which is true.  \"\" is an empty string; null means that no value has been assigned.</p>\n\n<p>It might be more enlightening to try:</p>\n\n<pre><code>System.out.println(a.length()); // 0\nSystem.out.println(b.length()); // error; b is not an object\n</code></pre>\n\n<p>\"\" is still a string, meaning you can call its methods and get meaningful information.  null is an empty variable - there's literally nothing there.</p>\n"},{"tags":[],"owner":{"account_id":106034,"reputation":35823,"user_id":282658,"accept_rate":100,"display_name":"JUST MY correct OPINION"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1296025036,"creation_date":1296025036,"answer_id":4802055,"question_id":4802015,"body_markdown":"In Java a reference type assigned `null` has **no value at all**.  A string assigned `&quot;&quot;` has a value: an empty string, which is to say a string with no characters in it.  When a variable is assigned `null` it means there is no underlying object of any kind, string or otherwise.","title":"Difference between null and empty (&quot;&quot;) Java String","body":"<p>In Java a reference type assigned <code>null</code> has <strong>no value at all</strong>.  A string assigned <code>\"\"</code> has a value: an empty string, which is to say a string with no characters in it.  When a variable is assigned <code>null</code> it means there is no underlying object of any kind, string or otherwise.</p>\n"},{"tags":[],"owner":{"account_id":128749,"reputation":21660,"user_id":326820,"accept_rate":99,"display_name":"Shamim Hafiz - MSFT"},"comment_count":0,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1296025045,"creation_date":1296025045,"answer_id":4802057,"question_id":4802015,"body_markdown":"**null** means the name isn&#39;t referencing any instantiated object.  **&quot;&quot;** means an empty string.\r\n\r\nHere **a** is referencing some object which happens to be an empty string. **b** isn&#39;t referencing any object as it&#39;s null.  ","title":"Difference between null and empty (&quot;&quot;) Java String","body":"<p><strong>null</strong> means the name isn't referencing any instantiated object.  <strong>\"\"</strong> means an empty string.</p>\n\n<p>Here <strong>a</strong> is referencing some object which happens to be an empty string. <strong>b</strong> isn't referencing any object as it's null.  </p>\n"},{"tags":[],"owner":{"account_id":262329,"reputation":22564,"user_id":547122,"accept_rate":40,"display_name":"weltraumpirat"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1296025142,"creation_date":1296025142,"answer_id":4802068,"question_id":4802015,"body_markdown":"&gt; The empty string is distinct from a\r\n&gt; null reference in that in an\r\n&gt; object-oriented programming language a\r\n&gt; null reference to a string type\r\n&gt; doesn&#39;t point to a string object and\r\n&gt; will cause an error were one to try to\r\n&gt; perform any operation on it. The empty\r\n&gt; string is still a string upon which\r\n&gt; string operations may be attempted.\r\n\r\nFrom the wikipedia article on [empty string][1].\r\n\r\n\r\n  [1]: http://en.wikipedia.org/wiki/Empty_string","title":"Difference between null and empty (&quot;&quot;) Java String","body":"<blockquote>\n  <p>The empty string is distinct from a\n  null reference in that in an\n  object-oriented programming language a\n  null reference to a string type\n  doesn't point to a string object and\n  will cause an error were one to try to\n  perform any operation on it. The empty\n  string is still a string upon which\n  string operations may be attempted.</p>\n</blockquote>\n\n<p>From the wikipedia article on <a href=\"http://en.wikipedia.org/wiki/Empty_string\" rel=\"nofollow\">empty string</a>.</p>\n"},{"tags":[],"owner":{"account_id":3662779,"reputation":492,"user_id":3052125,"accept_rate":12,"display_name":"Siddhartha"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1435669531,"creation_date":1435669531,"answer_id":31139121,"question_id":4802015,"body_markdown":"**&quot;&quot;** and **null** both are different . the first one means as part of string variable declaration the string constant has been created in the string pool and some memory has been assigned for the same.\r\n\r\nBut when we are declaring it with **null** then it has just been instantiated jvm , but no memory has been allocated for it. therefore if you are trying to access this object by checking it with **&quot;&quot;** - blank variable  , it can&#39;t prevent nullpointerexception . Please find below one use-case.\r\n\r\n    public class StringCheck {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\t// TODO Auto-generated method stub\r\n\r\n\t\tString s1 = &quot;siddhartha&quot;;\r\n\t\tString s2 = &quot;&quot;;\r\n\t\tString s3 = null;\r\n\r\n\t\tSystem.out.println(&quot;length s1 =&quot;+s1.length());\r\n\t\tSystem.out.println(&quot;length s2 =&quot;+s2.length());\r\n\r\n\t\t//this piece of code will still throw nullpointerexception . \r\n\t\tif(s3 != &quot;&quot;){\r\n\t\t\tSystem.out.println(&quot;length s3 =&quot;+s3.length());\r\n\t\t}\r\n\t}\r\n}","title":"Difference between null and empty (&quot;&quot;) Java String","body":"<p><strong>\"\"</strong> and <strong>null</strong> both are different . the first one means as part of string variable declaration the string constant has been created in the string pool and some memory has been assigned for the same.</p>\n\n<p>But when we are declaring it with <strong>null</strong> then it has just been instantiated jvm , but no memory has been allocated for it. therefore if you are trying to access this object by checking it with <strong>\"\"</strong> - blank variable  , it can't prevent nullpointerexception . Please find below one use-case.</p>\n\n<pre><code>public class StringCheck {\n\npublic static void main(String[] args) {\n    // TODO Auto-generated method stub\n\n    String s1 = \"siddhartha\";\n    String s2 = \"\";\n    String s3 = null;\n\n    System.out.println(\"length s1 =\"+s1.length());\n    System.out.println(\"length s2 =\"+s2.length());\n\n    //this piece of code will still throw nullpointerexception . \n    if(s3 != \"\"){\n        System.out.println(\"length s3 =\"+s3.length());\n    }\n}\n</code></pre>\n\n<p>}</p>\n"},{"tags":[],"owner":{"account_id":6764816,"reputation":317,"user_id":5210128,"accept_rate":12,"display_name":"Mukesh Kumar"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1439565286,"creation_date":1439562766,"answer_id":32012560,"question_id":4802015,"body_markdown":"    String s = &quot;&quot;;\r\n    s.length();\r\n\r\n    String s = null;\r\n    s.length();\r\n\r\nA reference to an empty string `&quot;&quot;` points to an object in the heap - so you can call methods on it. \r\n\r\nBut a reference pointing to `null` has no object to point in the heap and thus you&#39;ll get a `NullPointerException`.","title":"Difference between null and empty (&quot;&quot;) Java String","body":"<pre><code>String s = \"\";\ns.length();\n\nString s = null;\ns.length();\n</code></pre>\n\n<p>A reference to an empty string <code>\"\"</code> points to an object in the heap - so you can call methods on it. </p>\n\n<p>But a reference pointing to <code>null</code> has no object to point in the heap and thus you'll get a <code>NullPointerException</code>.</p>\n"},{"tags":[],"owner":{"account_id":9780503,"reputation":1,"user_id":7248768,"display_name":"Bibiana"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1480875139,"creation_date":1480871765,"answer_id":40961303,"question_id":4802015,"body_markdown":"A string can be empty or have a `null` value. If a string is `null`, it isn&#39;t referring to anything in memory. Try `s.length()&gt;0`. This is because if a string is empty, it still returns a length of 0. So if you enter nothing for the same, then it will still continue looping since it doesn&#39;t register the string as `null`. Whereas if you check for length, then it will exit out of it&#39;s loop. ","title":"Difference between null and empty (&quot;&quot;) Java String","body":"<p>A string can be empty or have a <code>null</code> value. If a string is <code>null</code>, it isn't referring to anything in memory. Try <code>s.length()&gt;0</code>. This is because if a string is empty, it still returns a length of 0. So if you enter nothing for the same, then it will still continue looping since it doesn't register the string as <code>null</code>. Whereas if you check for length, then it will exit out of it's loop. </p>\n"},{"comments":[{"owner":{"account_id":1498881,"reputation":165,"user_id":1404170,"display_name":"mfcallahan"},"score":15,"creation_date":1522374010,"post_id":45794912,"comment_id":86143023,"body_markdown":"This is great! I was explaining null vs empty to somebody and happened upon your answer.  The concept immediately clicked for them.","body":"This is great! I was explaining null vs empty to somebody and happened upon your answer.  The concept immediately clicked for them."},{"owner":{"account_id":1547670,"reputation":939,"user_id":1440818,"display_name":"Michal - wereda-net"},"score":0,"creation_date":1615803989,"post_id":45794912,"comment_id":117795204,"body_markdown":"i see a paper(not useful) on the left one :)","body":"i see a paper(not useful) on the left one :)"},{"owner":{"account_id":1049262,"reputation":5113,"user_id":1053562,"display_name":"mikiqex"},"score":1,"creation_date":1615816969,"post_id":45794912,"comment_id":117801135,"body_markdown":"@Michal-wereda-net That would be less than a bit :-) But digging in memory usage I noticed the image actually illustrates another (yet implementation-dependent) information, that null and empty string both require the same (memory) space, occupied by its pointer: 4 bytes for 32-bit and 8 bytes for 64-bit.","body":"@Michal-wereda-net That would be less than a bit :-) But digging in memory usage I noticed the image actually illustrates another (yet implementation-dependent) information, that null and empty string both require the same (memory) space, occupied by its pointer: 4 bytes for 32-bit and 8 bytes for 64-bit."},{"owner":{"account_id":16191688,"reputation":219,"user_id":11690248,"display_name":"Parthan_akon"},"score":0,"creation_date":1616388300,"post_id":45794912,"comment_id":117976834,"body_markdown":"that was lit :-O","body":"that was lit :-O"}],"tags":[],"owner":{"account_id":1049262,"reputation":5113,"user_id":1053562,"display_name":"mikiqex"},"comment_count":4,"down_vote_count":0,"up_vote_count":392,"is_accepted":false,"score":392,"last_activity_date":1582029856,"creation_date":1503311618,"answer_id":45794912,"question_id":4802015,"body_markdown":"You may also understand the difference between null and an empty string this way:\r\n\r\n[![Difference between null and 0/empty string][1]][1]\r\n\r\n[Original image][2] by R. Sato ([@raysato][3])\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/j9vg8.jpg\r\n  [2]: https://twitter.com/raysato/status/833650208642719744/photo/1\r\n  [3]: https://twitter.com/raysato","title":"Difference between null and empty (&quot;&quot;) Java String","body":"<p>You may also understand the difference between null and an empty string this way:</p>\n\n<p><a href=\"https://i.stack.imgur.com/j9vg8.jpg\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/j9vg8.jpg\" alt=\"Difference between null and 0/empty string\"></a></p>\n\n<p><a href=\"https://twitter.com/raysato/status/833650208642719744/photo/1\" rel=\"noreferrer\">Original image</a> by R. Sato (<a href=\"https://twitter.com/raysato\" rel=\"noreferrer\">@raysato</a>)</p>\n"},{"tags":[],"owner":{"display_name":"user8715994"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1509641221,"creation_date":1509641221,"answer_id":47080537,"question_id":4802015,"body_markdown":"This concept can be better understood from mathematics. Have you ever tried dividing a number (not zero) by 0 using a calculator e.g 7/0? You will get a result that looks like something this: `undefined`, `not a number`, `null` etc. This means that the operation is impossible, for some reasons (let&#39;s leave those reasons to be discussed another day).\r\n\r\nNow, perform this: 0/7. You will get the output, 0. This means that the operation is possible and can be executed, but you the answer is just 0 because nothing is left after the division. There is a valid output and that output is zero.\r\n\r\nIn the first example, not only was the output invalid, the operation was not possible to execute. This is akin to `null` string in java. The second example is akin to `empty` string.","title":"Difference between null and empty (&quot;&quot;) Java String","body":"<p>This concept can be better understood from mathematics. Have you ever tried dividing a number (not zero) by 0 using a calculator e.g 7/0? You will get a result that looks like something this: <code>undefined</code>, <code>not a number</code>, <code>null</code> etc. This means that the operation is impossible, for some reasons (let's leave those reasons to be discussed another day).</p>\n\n<p>Now, perform this: 0/7. You will get the output, 0. This means that the operation is possible and can be executed, but you the answer is just 0 because nothing is left after the division. There is a valid output and that output is zero.</p>\n\n<p>In the first example, not only was the output invalid, the operation was not possible to execute. This is akin to <code>null</code> string in java. The second example is akin to <code>empty</code> string.</p>\n"},{"tags":[],"owner":{"account_id":2252370,"reputation":457,"user_id":1984342,"display_name":"Neeraj Singh"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1548873165,"creation_date":1548872037,"answer_id":54446999,"question_id":4802015,"body_markdown":"When you write\r\n\r\n`String a = &quot;&quot;;`\r\n\r\nIt means there is a variable &#39;a&#39; of type string which points to a object reference in string pool which has a value &quot;&quot;. As variable `a` is holding a valid string object reference, all the methods of string can be applied here.\r\n\r\nWhereas when you write\r\n\r\n`String b = null;`\r\n\r\nIt means that there is a variable `b` of type string which points to an _unknown reference_. And any operation on unknown reference will result in an `NullPointerException`.\r\n\r\nNow, let us evaluate the below expressions.\r\n\r\n    System.out.println(a == b); // false. because a and b both points to different object reference\r\n\r\n    System.out.println(a.equals(b)); // false, because the values at object reference pointed by a and b do not match.\r\n\r\n    System.out.println(b.equals(a)); // NullPointerException, because b is pointing to unknown reference and no operation is allowed","title":"Difference between null and empty (&quot;&quot;) Java String","body":"<p>When you write</p>\n\n<p><code>String a = \"\";</code></p>\n\n<p>It means there is a variable 'a' of type string which points to a object reference in string pool which has a value \"\". As variable <code>a</code> is holding a valid string object reference, all the methods of string can be applied here.</p>\n\n<p>Whereas when you write</p>\n\n<p><code>String b = null;</code></p>\n\n<p>It means that there is a variable <code>b</code> of type string which points to an <em>unknown reference</em>. And any operation on unknown reference will result in an <code>NullPointerException</code>.</p>\n\n<p>Now, let us evaluate the below expressions.</p>\n\n<pre><code>System.out.println(a == b); // false. because a and b both points to different object reference\n\nSystem.out.println(a.equals(b)); // false, because the values at object reference pointed by a and b do not match.\n\nSystem.out.println(b.equals(a)); // NullPointerException, because b is pointing to unknown reference and no operation is allowed\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1618685,"reputation":63,"user_id":1495717,"accept_rate":40,"display_name":"Bharat Kasodariya"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1555756662,"creation_date":1555750915,"answer_id":55771943,"question_id":4802015,"body_markdown":"```String s=null;```\r\n\r\nString is not initialized for null. if any string operation tried it can throw null pointer exception \r\n\r\n```String t=&quot;null&quot;;```\r\n\r\nIt is a string literal with value string &quot;null&quot; same like t = &quot;xyz&quot;. It will not throw null pointer.\r\n\r\n```String u=&quot;&quot;;```\r\n\r\nIt is as empty string , It will not throw null pointer.","title":"Difference between null and empty (&quot;&quot;) Java String","body":"<p><code>String s=null;</code></p>\n\n<p>String is not initialized for null. if any string operation tried it can throw null pointer exception </p>\n\n<p><code>String t=\"null\";</code></p>\n\n<p>It is a string literal with value string \"null\" same like t = \"xyz\". It will not throw null pointer.</p>\n\n<p><code>String u=\"\";</code></p>\n\n<p>It is as empty string , It will not throw null pointer.</p>\n"},{"tags":[],"owner":{"account_id":237323,"reputation":4915,"user_id":505406,"accept_rate":62,"display_name":"RoboAlex"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1561452884,"creation_date":1561452884,"answer_id":56750243,"question_id":4802015,"body_markdown":"In simple term,\r\n\r\n - &quot;&quot; is an empty **String**\r\n\r\n - null is an empty **String Variable**.\r\n\r\n","title":"Difference between null and empty (&quot;&quot;) Java String","body":"<p>In simple term,</p>\n\n<ul>\n<li><p>\"\" is an empty <strong>String</strong></p></li>\n<li><p>null is an empty <strong>String Variable</strong>.</p></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":1089130,"reputation":38502,"user_id":1084174,"accept_rate":89,"display_name":"Sazzad Hissain Khan"},"comment_count":0,"down_vote_count":2,"up_vote_count":11,"is_accepted":false,"score":9,"last_activity_date":1582022389,"creation_date":1571102726,"answer_id":58386009,"question_id":4802015,"body_markdown":"![enter image description here](https://i.stack.imgur.com/KnXpN.jpg)\r\n\r\nThis image might help you to understand the differences. \r\n\r\nThe image was collected from [ProgrammerHumor][1]\r\n\r\n[1]: https://www.reddit.com/r/ProgrammerHumor/comments/8gcub3/meme_i_dont_have_a_good_title_for_this/","title":"Difference between null and empty (&quot;&quot;) Java String","body":"<p><img src=\"https://i.stack.imgur.com/KnXpN.jpg\" alt=\"enter image description here\"></p>\n\n<p>This image might help you to understand the differences. </p>\n\n<p>The image was collected from <a href=\"https://www.reddit.com/r/ProgrammerHumor/comments/8gcub3/meme_i_dont_have_a_good_title_for_this/\" rel=\"noreferrer\">ProgrammerHumor</a></p>\n"},{"comments":[{"owner":{"account_id":7156005,"reputation":28054,"user_id":5468463,"accept_rate":100,"display_name":"Vega"},"score":0,"creation_date":1581913195,"post_id":59979569,"comment_id":106582403,"body_markdown":"The question is for Java","body":"The question is for Java"}],"tags":[],"owner":{"account_id":14435655,"reputation":2397,"user_id":10427807,"display_name":"Rashed Rahat"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1580361782,"creation_date":1580361782,"answer_id":59979569,"question_id":4802015,"body_markdown":"Difference between null &amp; empty string. For example: you have a variable named x. If you write in JS,\r\n\r\n````var x = &quot;&quot;;````\r\n\r\nthis means that you have assigned a value which is empty string (length is 0). Actually this is like something but which is feel of nothing :) On the other hand, \r\n\r\n````var y = null;````\r\n\r\nthis means you&#39;ve not assigned a value to y that clearly said by writing null to y at the time of declaration. If you write y.length; it will throw an error which indicates that no value assigned to y and as a result can&#39;t read length of y.","title":"Difference between null and empty (&quot;&quot;) Java String","body":"<p>Difference between null &amp; empty string. For example: you have a variable named x. If you write in JS,</p>\n\n<p><code>var x = \"\";</code></p>\n\n<p>this means that you have assigned a value which is empty string (length is 0). Actually this is like something but which is feel of nothing :) On the other hand, </p>\n\n<p><code>var y = null;</code></p>\n\n<p>this means you've not assigned a value to y that clearly said by writing null to y at the time of declaration. If you write y.length; it will throw an error which indicates that no value assigned to y and as a result can't read length of y.</p>\n"},{"tags":[],"owner":{"account_id":11267023,"reputation":25,"user_id":8263527,"display_name":"Shivakumar"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1592372981,"creation_date":1592372981,"answer_id":62422264,"question_id":4802015,"body_markdown":"&quot;I call it my billion-dollar mistake. It was the invention of the null reference in 1965&quot; - https://en.wikipedia.org/wiki/Tony_Hoare\r\n\r\nWith respect to real world both can be assumed same. Its just a syntax of a programming language that creates a difference between two as explained by others here. This simply creates overhead like when checking/comparing whether string variable has something, you have to first check if its not null and then actual string comparing ie two comparisons. This is a waste of processing power for every string comparisons.\r\n\r\nObjects.equals() checks for null before calling .equals(). ","title":"Difference between null and empty (&quot;&quot;) Java String","body":"<p>\"I call it my billion-dollar mistake. It was the invention of the null reference in 1965\" - <a href=\"https://en.wikipedia.org/wiki/Tony_Hoare\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/Tony_Hoare</a></p>\n\n<p>With respect to real world both can be assumed same. Its just a syntax of a programming language that creates a difference between two as explained by others here. This simply creates overhead like when checking/comparing whether string variable has something, you have to first check if its not null and then actual string comparing ie two comparisons. This is a waste of processing power for every string comparisons.</p>\n\n<p>Objects.equals() checks for null before calling .equals(). </p>\n"},{"tags":[],"owner":{"account_id":15305578,"reputation":2692,"user_id":11042460,"display_name":"Java wanna bee"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1592649799,"creation_date":1592649799,"answer_id":62484725,"question_id":4802015,"body_markdown":"as a curiosity\r\n\r\n\r\n        String s1 = null;\r\n        String s2 = &quot;hello&quot;;\r\n\r\n         s1 = s1 + s2;\r\n       \r\n\r\n        System.out.println((s); // nullhello","title":"Difference between null and empty (&quot;&quot;) Java String","body":"<p>as a curiosity</p>\n<pre><code>    String s1 = null;\n    String s2 = &quot;hello&quot;;\n\n     s1 = s1 + s2;\n   \n\n    System.out.println((s); // nullhello\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17722379,"reputation":2112,"user_id":12867091,"display_name":"Tashkhisi"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1669224091,"creation_date":1596870988,"answer_id":63312773,"question_id":4802015,"body_markdown":"`null` means nothing; it means you have never set a value for your variable but empty means you have set  `&quot;&quot;` value to your `String`. For instance, see the following example:\r\n\r\n    String str1;\r\n    String str2 = &quot;&quot;;\r\n\r\nHere `str1` is `null` meaning that you have defined it but not set any value for it yet. But you have defined `str2` and set an empty value for it so it has a value even though that value is `&quot;&quot;`;\r\n\r\n`str1` can be compared with other strings but `str2` when compared will throw `NullPointerException` in `RuntimeException`.","title":"Difference between null and empty (&quot;&quot;) Java String","body":"<p><code>null</code> means nothing; it means you have never set a value for your variable but empty means you have set  <code>&quot;&quot;</code> value to your <code>String</code>. For instance, see the following example:</p>\n<pre><code>String str1;\nString str2 = &quot;&quot;;\n</code></pre>\n<p>Here <code>str1</code> is <code>null</code> meaning that you have defined it but not set any value for it yet. But you have defined <code>str2</code> and set an empty value for it so it has a value even though that value is <code>&quot;&quot;</code>;</p>\n<p><code>str1</code> can be compared with other strings but <code>str2</code> when compared will throw <code>NullPointerException</code> in <code>RuntimeException</code>.</p>\n"},{"tags":[],"owner":{"account_id":11303714,"reputation":1376,"user_id":8288930,"accept_rate":60,"display_name":"BlueJapan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1600018112,"creation_date":1600018112,"answer_id":63873630,"question_id":4802015,"body_markdown":"Amazing answers, but I&#39;d like to give from a different perspective. \r\n```java\r\nString a = &quot;StackOverflow&quot;;\r\nString a1 = &quot;StackOverflow&quot; + &quot;&quot;;\r\nString a2 = &quot;StackOverflow&quot; + null;\r\n\r\nSystem.out.println(a == a1); // true\r\nSystem.out.println(a == a2); // false\r\n\r\n```\r\nSo this can tell us &quot;&quot; and null point to the different object references.","title":"Difference between null and empty (&quot;&quot;) Java String","body":"<p>Amazing answers, but I'd like to give from a different perspective.</p>\n<pre class=\"lang-java prettyprint-override\"><code>String a = &quot;StackOverflow&quot;;\nString a1 = &quot;StackOverflow&quot; + &quot;&quot;;\nString a2 = &quot;StackOverflow&quot; + null;\n\nSystem.out.println(a == a1); // true\nSystem.out.println(a == a2); // false\n\n</code></pre>\n<p>So this can tell us &quot;&quot; and null point to the different object references.</p>\n"}],"owner":{"account_id":207849,"reputation":42971,"user_id":457982,"accept_rate":95,"display_name":"Vikas Patidar"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":539104,"favorite_count":0,"down_vote_count":5,"up_vote_count":193,"accepted_answer_id":4802049,"answer_count":22,"score":188,"last_activity_date":1669224091,"creation_date":1296024698,"question_id":4802015,"body_markdown":"What is the difference between `null` and the `&quot;&quot;` (empty string)?\r\n\r\nI have written some simple code:\r\n\r\n    String a = &quot;&quot;;\r\n    String b = null;\r\n    \r\n    System.out.println(a == b); // false\r\n    System.out.println(a.equals(b)); // false\r\n\r\nBoth statements return `false`. It seems, I am not able to find what is the actual difference between them.","title":"Difference between null and empty (&quot;&quot;) Java String","body":"<p>What is the difference between <code>null</code> and the <code>\"\"</code> (empty string)?</p>\n\n<p>I have written some simple code:</p>\n\n<pre><code>String a = \"\";\nString b = null;\n\nSystem.out.println(a == b); // false\nSystem.out.println(a.equals(b)); // false\n</code></pre>\n\n<p>Both statements return <code>false</code>. It seems, I am not able to find what is the actual difference between them.</p>\n"},{"tags":["java","spring","rest","tomcat"],"answers":[{"tags":[],"owner":{"account_id":2486870,"reputation":685,"user_id":2165146,"display_name":"muhammed ozbilici"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1669223896,"creation_date":1669223896,"answer_id":74550725,"question_id":74544546,"body_markdown":"For `PostMapping` you can&#39;t use `URIEncoding=&quot;UTF-8&quot;` so instead of that you can define a filter to tell Tomcat that your request encoding is `UTF-8`, either you can add this to web.xml:\r\n\r\n    &lt;filter&gt;\r\n        &lt;filter-name&gt;encodingFilter&lt;/filter-name&gt;\r\n        &lt;filter-class&gt;org.springframework.web.filter.CharacterEncodingFilter&lt;/filter-class&gt;\r\n        &lt;init-param&gt;\r\n            &lt;param-name&gt;encoding&lt;/param-name&gt;\r\n            &lt;param-value&gt;UTF-8&lt;/param-value&gt;\r\n        &lt;/init-param&gt;\r\n        &lt;init-param&gt;\r\n            &lt;param-name&gt;forceEncoding&lt;/param-name&gt;\r\n            &lt;param-value&gt;true&lt;/param-value&gt;\r\n        &lt;/init-param&gt;\r\n     &lt;/filter&gt;\r\n    \r\n     &lt;filter-mapping&gt;\r\n        &lt;filter-name&gt;encodingFilter&lt;/filter-name&gt;\r\n        &lt;url-pattern&gt;/*&lt;/url-pattern&gt;\r\n     &lt;/filter-mapping&gt;\r\n\r\nor add this filter :\r\n\r\n    public class EncodingFilter implements Filter {\r\n        private String encoding = &quot;UTF-8&quot;;\r\n    \r\n        public void destroy() {\r\n        }\r\n    \r\n        public void doFilter(ServletRequest request, ServletResponse response,\r\n                FilterChain chain) throws IOException, ServletException {\r\n            request.setCharacterEncoding(encoding);\r\n            response.setCharacterEncoding(encoding);\r\n            chain.doFilter(request, response);\r\n        }\r\n    \r\n        public void init(FilterConfig config) throws ServletException {\r\n            if (config.getInitParameter(&quot;encoding&quot;) != null) {\r\n                encoding = config.getInitParameter(&quot;encoding&quot;);\r\n            }\r\n        }\r\n    }","title":"Tomcat Spring Rest Wrong Encoding","body":"<p>For <code>PostMapping</code> you can't use <code>URIEncoding=&quot;UTF-8&quot;</code> so instead of that you can define a filter to tell Tomcat that your request encoding is <code>UTF-8</code>, either you can add this to web.xml:</p>\n<pre><code>&lt;filter&gt;\n    &lt;filter-name&gt;encodingFilter&lt;/filter-name&gt;\n    &lt;filter-class&gt;org.springframework.web.filter.CharacterEncodingFilter&lt;/filter-class&gt;\n    &lt;init-param&gt;\n        &lt;param-name&gt;encoding&lt;/param-name&gt;\n        &lt;param-value&gt;UTF-8&lt;/param-value&gt;\n    &lt;/init-param&gt;\n    &lt;init-param&gt;\n        &lt;param-name&gt;forceEncoding&lt;/param-name&gt;\n        &lt;param-value&gt;true&lt;/param-value&gt;\n    &lt;/init-param&gt;\n &lt;/filter&gt;\n\n &lt;filter-mapping&gt;\n    &lt;filter-name&gt;encodingFilter&lt;/filter-name&gt;\n    &lt;url-pattern&gt;/*&lt;/url-pattern&gt;\n &lt;/filter-mapping&gt;\n</code></pre>\n<p>or add this filter :</p>\n<pre><code>public class EncodingFilter implements Filter {\n    private String encoding = &quot;UTF-8&quot;;\n\n    public void destroy() {\n    }\n\n    public void doFilter(ServletRequest request, ServletResponse response,\n            FilterChain chain) throws IOException, ServletException {\n        request.setCharacterEncoding(encoding);\n        response.setCharacterEncoding(encoding);\n        chain.doFilter(request, response);\n    }\n\n    public void init(FilterConfig config) throws ServletException {\n        if (config.getInitParameter(&quot;encoding&quot;) != null) {\n            encoding = config.getInitParameter(&quot;encoding&quot;);\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":4183802,"reputation":309,"user_id":3428029,"display_name":"phe"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":172,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":74550725,"answer_count":1,"score":1,"last_activity_date":1669223896,"creation_date":1669196089,"question_id":74544546,"body_markdown":"currently, I am working on a Spring Rest Endpoint (not Spring Boot) which I deploy to a Tomcat Servlet Container. It takes a Multipart form\r\n\r\n\t@PostMapping(value = &quot;/audit/{auditNumber}/file&quot;, consumes = MediaType.MULTIPART_FORM_DATA_VALUE)\r\n\tpublic ResponseEntity&lt;?&gt; uploadFileForAudit(//\r\n\t\t\t@PathVariable String peNumber, //\r\n\t\t\t@RequestParam(&quot;category&quot;) String category, //\r\n\t\t\t@RequestParam(&quot;documents&quot;) MultipartFile file, //\r\n\t\t\t@RequestParam(&quot;description&quot;) String description, //\r\n\t\t\t@RequestHeader Map&lt;String, String&gt; headers) {\r\n\r\n\r\n\t\t\r\n\t\tSystem.out.println(&quot;category &quot;+category);\r\n\t\tSystem.out.println(&quot;description &quot;+description);\r\n\r\nWhen German Umlauts are sent as category or description, the console output looks like this:\r\n\r\n    category Pr&#195;&#188;fungsanordnung\r\n    description &#195;&#182;&#195;&#164;&#195;&#188;\r\n\r\nI have other Rest Resources, but they are working. Somehow this Resource has the wrong encoding. I suspect the Multipart-form to be the problem.\r\n\r\nThe frontend is not the problem. I can use JavaScript fetch or Postman and both have the same result.\r\n\r\nAny hint is appreciated.\r\n","title":"Tomcat Spring Rest Wrong Encoding","body":"<p>currently, I am working on a Spring Rest Endpoint (not Spring Boot) which I deploy to a Tomcat Servlet Container. It takes a Multipart form</p>\n<pre><code>@PostMapping(value = &quot;/audit/{auditNumber}/file&quot;, consumes = MediaType.MULTIPART_FORM_DATA_VALUE)\npublic ResponseEntity&lt;?&gt; uploadFileForAudit(//\n        @PathVariable String peNumber, //\n        @RequestParam(&quot;category&quot;) String category, //\n        @RequestParam(&quot;documents&quot;) MultipartFile file, //\n        @RequestParam(&quot;description&quot;) String description, //\n        @RequestHeader Map&lt;String, String&gt; headers) {\n\n\n    \n    System.out.println(&quot;category &quot;+category);\n    System.out.println(&quot;description &quot;+description);\n</code></pre>\n<p>When German Umlauts are sent as category or description, the console output looks like this:</p>\n<pre><code>category PrÃ¼fungsanordnung\ndescription Ã¶Ã¤Ã¼\n</code></pre>\n<p>I have other Rest Resources, but they are working. Somehow this Resource has the wrong encoding. I suspect the Multipart-form to be the problem.</p>\n<p>The frontend is not the problem. I can use JavaScript fetch or Postman and both have the same result.</p>\n<p>Any hint is appreciated.</p>\n"},{"tags":["java","android","list","duplicates"],"comments":[{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1669248979,"post_id":74550212,"comment_id":131604213,"body_markdown":"Has your `Booking` class implemented overrides of `equals` &amp; `hashCode`? Or, is `Booking` class a [record](https://openjdk.org/jeps/395)?","body":"Has your <code>Booking</code> class implemented overrides of <code>equals</code> &amp; <code>hashCode</code>? Or, is <code>Booking</code> class a <a href=\"https://openjdk.org/jeps/395\" rel=\"nofollow noreferrer\">record</a>?"}],"answers":[{"comments":[{"owner":{"account_id":26986880,"reputation":3,"user_id":20550395,"display_name":"donaldD"},"score":0,"creation_date":1669222022,"post_id":74550271,"comment_id":131597156,"body_markdown":"can you please show me how to do it here cause i have tried it but couldn&#39;t get anything to work","body":"can you please show me how to do it here cause i have tried it but couldn&#39;t get anything to work"}],"tags":[],"owner":{"account_id":27026595,"reputation":24,"user_id":20583761,"display_name":"arctic_fox"},"comment_count":1,"down_vote_count":1,"up_vote_count":0,"is_accepted":true,"score":-1,"last_activity_date":1669223834,"creation_date":1669221635,"answer_id":74550271,"question_id":74550212,"body_markdown":"While using HashSet have you overriden hashcode and equals method in Booking class ?\r\n\r\nCheck this out - https://www.baeldung.com/java-equals-hashcode-contracts\r\n\r\nYour Booking class will have some variables. Use those variables to write your custom overriden equals and hashcode methods.\r\n\r\nDefault implementation of equals method uses memory location or address to find equality. Two objects even though having same variable(fields inside object) values, will not be equal in default equal method as they differ in memory address.If all the variables are equal in two objects then equals method should return true and generate same hashcode also in overriden hashcode method. hashcode method should use those variables to generate hashcode. If you will not override hashcode method, default hashcode value will be used and in that case two equal objects might return different hashcode.\r\n\r\n\r\n ","title":"in Android java, how can I remove duplicate items in a list?","body":"<p>While using HashSet have you overriden hashcode and equals method in Booking class ?</p>\n<p>Check this out - <a href=\"https://www.baeldung.com/java-equals-hashcode-contracts\" rel=\"nofollow noreferrer\">https://www.baeldung.com/java-equals-hashcode-contracts</a></p>\n<p>Your Booking class will have some variables. Use those variables to write your custom overriden equals and hashcode methods.</p>\n<p>Default implementation of equals method uses memory location or address to find equality. Two objects even though having same variable(fields inside object) values, will not be equal in default equal method as they differ in memory address.If all the variables are equal in two objects then equals method should return true and generate same hashcode also in overriden hashcode method. hashcode method should use those variables to generate hashcode. If you will not override hashcode method, default hashcode value will be used and in that case two equal objects might return different hashcode.</p>\n"}],"owner":{"account_id":26986880,"reputation":3,"user_id":20550395,"display_name":"donaldD"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":25,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74550271,"answer_count":1,"score":0,"last_activity_date":1669223834,"creation_date":1669221341,"question_id":74550212,"body_markdown":"```\r\n@Override\r\npublic void onSuccess(QuerySnapshot queryDocumentSnapshots) {\r\n    if (task.isSuccessful()) {\r\n        for (QueryDocumentSnapshot collections : queryDocumentSnapshots) {\r\n\r\n            Booking booking = collections.toObject(Booking.class);\r\n            bookingList.add(booking);\r\n\r\n            //bookingList.add(booking);\r\n\r\n\r\n        }\r\n```\r\n\r\n\r\nI tried using bookingList.distinctive, and a HashSet but couldn&#39; get anything to work","title":"in Android java, how can I remove duplicate items in a list?","body":"<pre><code>@Override\npublic void onSuccess(QuerySnapshot queryDocumentSnapshots) {\n    if (task.isSuccessful()) {\n        for (QueryDocumentSnapshot collections : queryDocumentSnapshots) {\n\n            Booking booking = collections.toObject(Booking.class);\n            bookingList.add(booking);\n\n            //bookingList.add(booking);\n\n\n        }\n</code></pre>\n<p>I tried using bookingList.distinctive, and a HashSet but couldn' get anything to work</p>\n"},{"tags":["java","apache-httpclient-4.x","junit-jupiter"],"comments":[{"owner":{"account_id":17006998,"reputation":713,"user_id":12302982,"display_name":"Igor Flakiewicz"},"score":0,"creation_date":1669222459,"post_id":74550413,"comment_id":131597349,"body_markdown":"share your code and setup","body":"share your code and setup"},{"owner":{"account_id":1541447,"reputation":291,"user_id":1435998,"accept_rate":70,"display_name":"Belos"},"score":0,"creation_date":1669223724,"post_id":74550413,"comment_id":131597839,"body_markdown":"updated the post with the code. it’s difficult to post everything because it’s on a vpn machine where stackoverflow is blocked","body":"updated the post with the code. it’s difficult to post everything because it’s on a vpn machine where stackoverflow is blocked"},{"owner":{"account_id":10693447,"reputation":878,"user_id":7871511,"display_name":"Rohit Agarwal"},"score":0,"creation_date":1669229955,"post_id":74550413,"comment_id":131599875,"body_markdown":"Did you debug what is happening in that line?","body":"Did you debug what is happening in that line?"},{"owner":{"account_id":1541447,"reputation":291,"user_id":1435998,"accept_rate":70,"display_name":"Belos"},"score":0,"creation_date":1669239334,"post_id":74550413,"comment_id":131602271,"body_markdown":"I added a debug line but then the debugger is not activating there even when it activates at the line before","body":"I added a debug line but then the debugger is not activating there even when it activates at the line before"}],"owner":{"account_id":1541447,"reputation":291,"user_id":1435998,"accept_rate":70,"display_name":"Belos"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1669223709,"creation_date":1669222339,"question_id":74550413,"body_markdown":"Running into an issue where test calls a get request to a local server using Apache HttpClient in a unit test. The test works if I use the native java Scanner to decode the response but if I use EntityUtils.toString(), junit ignores the test once it hits that line of code which is bizarre because I can see the print out of every line before it.\r\n\r\n    HttpGet request = new HttpGet(url);\r\n    \r\n    CloseableHttpResponse response = httpClient.execute(request);\r\n    \r\n    HttpEntity entity = reponse.getEntity();\r\n    System.out.println(EntityUtils.toString(entity); // skips test here\r\n\r\nVersion info: gradle 7.5.1, Java 17, junit-jupiter 5.9.1, Apache HttpClient 4.5.13","title":"Jupiter JUnit skipping a test once Apache EntityUtils.toString is called","body":"<p>Running into an issue where test calls a get request to a local server using Apache HttpClient in a unit test. The test works if I use the native java Scanner to decode the response but if I use EntityUtils.toString(), junit ignores the test once it hits that line of code which is bizarre because I can see the print out of every line before it.</p>\n<pre><code>HttpGet request = new HttpGet(url);\n\nCloseableHttpResponse response = httpClient.execute(request);\n\nHttpEntity entity = reponse.getEntity();\nSystem.out.println(EntityUtils.toString(entity); // skips test here\n</code></pre>\n<p>Version info: gradle 7.5.1, Java 17, junit-jupiter 5.9.1, Apache HttpClient 4.5.13</p>\n"},{"tags":["java","jsonserializer"],"answers":[{"tags":[],"owner":{"account_id":4445012,"reputation":6710,"user_id":3618581,"display_name":"Termininja"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1669223440,"creation_date":1669223440,"answer_id":74550640,"question_id":74550258,"body_markdown":"I found it:\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    JsonConfig cfg = new JsonConfig();\r\n    cfg.setIgnoreDefaultExcludes(true);\r\n\r\n    JSON json = JSONSerializer.toJSON(str, cfg) // {&quot;test&quot;:&quot;ok&quot;, &quot;class&quot;:&quot;fail&quot;}","title":"JSONSerializer.toJSON ignores key &#39;class&#39;","body":"<p>I found it:</p>\n<pre class=\"lang-java prettyprint-override\"><code>JsonConfig cfg = new JsonConfig();\ncfg.setIgnoreDefaultExcludes(true);\n\nJSON json = JSONSerializer.toJSON(str, cfg) // {&quot;test&quot;:&quot;ok&quot;, &quot;class&quot;:&quot;fail&quot;}\n</code></pre>\n"}],"owner":{"account_id":4445012,"reputation":6710,"user_id":3618581,"display_name":"Termininja"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":47,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1669223440,"creation_date":1669221574,"question_id":74550258,"body_markdown":"How to convert JSON string to JSON by using JSONSerializer if the JSON string contains &#39;class&#39; key? By using toJSON method all &#39;class&#39; keys are ignored:\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    String str = &quot;{&#39;test&#39;: &#39;ok&#39;, &#39;class&#39; : &#39;fail&#39;}&quot;;\r\n    JSON json = JSONSerializer.toJSON(str) // result is: {&quot;test&quot;:&quot;ok&quot;}\r\n\r\n","title":"JSONSerializer.toJSON ignores key &#39;class&#39;","body":"<p>How to convert JSON string to JSON by using JSONSerializer if the JSON string contains 'class' key? By using toJSON method all 'class' keys are ignored:</p>\n<pre class=\"lang-java prettyprint-override\"><code>String str = &quot;{'test': 'ok', 'class' : 'fail'}&quot;;\nJSON json = JSONSerializer.toJSON(str) // result is: {&quot;test&quot;:&quot;ok&quot;}\n</code></pre>\n"},{"tags":["java","hibernate","spring-data-jpa","hibernate-mapping","entity-relationship"],"answers":[{"comments":[{"owner":{"display_name":"user19254373"},"score":0,"creation_date":1655482359,"post_id":72656846,"comment_id":128350650,"body_markdown":"Thank you so much for these wonderful explanations. Voted up ;) Regarding to your answers, could you clarify me about these points?","body":"Thank you so much for these wonderful explanations. Voted up ;) Regarding to your answers, could you clarify me about these points?"},{"owner":{"display_name":"user19254373"},"score":0,"creation_date":1655482616,"post_id":72656846,"comment_id":128350737,"body_markdown":"**1.** Regarding to bidirectional and unidirectional one-to-many, is the key difference `@ManyToOne private Person person;` in the `Phone` entity? Or do `id` fields have also impact for that? I am wondering if there would be any difference if we also use `id` fields for `Phone` and `Person` entities in the first scenario (bidirectional association)?","body":"<b>1.</b> Regarding to bidirectional and unidirectional one-to-many, is the key difference <code>@ManyToOne private Person person;</code> in the <code>Phone</code> entity? Or do <code>id</code> fields have also impact for that? I am wondering if there would be any difference if we also use <code>id</code> fields for <code>Phone</code> and <code>Person</code> entities in the first scenario (bidirectional association)?"},{"owner":{"display_name":"user19254373"},"score":0,"creation_date":1655482792,"post_id":72656846,"comment_id":128350797,"body_markdown":"**2.** Thanks for explanations and useful links.","body":"<b>2.</b> Thanks for explanations and useful links."},{"owner":{"display_name":"user19254373"},"score":0,"creation_date":1655483363,"post_id":72656846,"comment_id":128351027,"body_markdown":"**3.** Then, I think it would be a good practice to use `@JoinColumn(name = &quot;a_id&quot;)` even if not required for default column name so that I will need to use a different name. On the other hand, could you give a good convention example for the usage of OneToOne, OneToMany, ManyToMany in the documentation or an article?","body":"<b>3.</b> Then, I think it would be a good practice to use <code>@JoinColumn(name = &quot;a_id&quot;)</code> even if not required for default column name so that I will need to use a different name. On the other hand, could you give a good convention example for the usage of OneToOne, OneToMany, ManyToMany in the documentation or an article?"},{"owner":{"account_id":2795364,"reputation":7571,"user_id":2404683,"display_name":"Davide D&#39;Alto"},"score":0,"creation_date":1655484360,"post_id":72656846,"comment_id":128351404,"body_markdown":"**1**. Ah sorry, entities must have an id. I&#39;ve just omitted it because it doesn&#39;t matter too much what type you use.","body":"<b>1</b>. Ah sorry, entities must have an id. I&#39;ve just omitted it because it doesn&#39;t matter too much what type you use."},{"owner":{"account_id":2795364,"reputation":7571,"user_id":2404683,"display_name":"Davide D&#39;Alto"},"score":0,"creation_date":1655484730,"post_id":72656846,"comment_id":128351506,"body_markdown":"**3** I don&#39;t usually add annotations unless I have to. But you can choose whatever approach you prefer. The Hibernate docs contain example for each mapping, I&#39;m not going to copy and paste it here to answer your question. Please, don&#39;t ask people to do the work for you.","body":"<b>3</b> I don&#39;t usually add annotations unless I have to. But you can choose whatever approach you prefer. The Hibernate docs contain example for each mapping, I&#39;m not going to copy and paste it here to answer your question. Please, don&#39;t ask people to do the work for you."},{"owner":{"display_name":"user19254373"},"score":0,"creation_date":1655494887,"post_id":72656846,"comment_id":128354216,"body_markdown":"Thanks for reply. Regarding to #3, I mean that point the proper part on the documentation or an example article that shows related relationships. because there are similar parts that I can mix by mistake.","body":"Thanks for reply. Regarding to #3, I mean that point the proper part on the documentation or an example article that shows related relationships. because there are similar parts that I can mix by mistake."},{"owner":{"account_id":2795364,"reputation":7571,"user_id":2404683,"display_name":"Davide D&#39;Alto"},"score":0,"creation_date":1655495983,"post_id":72656846,"comment_id":128354473,"body_markdown":"https://docs.jboss.org/hibernate/orm/5.6/userguide/html_single/Hibernate_User_Guide.html#associations","body":"<a href=\"https://docs.jboss.org/hibernate/orm/5.6/userguide/html_single/Hibernate_User_Guide.html#associations\" rel=\"nofollow noreferrer\">docs.jboss.org/hibernate/orm/5.6/userguide/html_single/&hellip;</a>"},{"owner":{"display_name":"user19254373"},"score":0,"creation_date":1655497768,"post_id":72656846,"comment_id":128354902,"body_markdown":"Yeah, I was exactly looking for that sections and completely understand the difference between uni and bidirectional relations. The only think that I don&#39;t like with bidirectional relations is `addPhone` and `removePhone` methods. I think we always have to define them for bidirectional relations. Is that true?","body":"Yeah, I was exactly looking for that sections and completely understand the difference between uni and bidirectional relations. The only think that I don&#39;t like with bidirectional relations is <code>addPhone</code> and <code>removePhone</code> methods. I think we always have to define them for bidirectional relations. Is that true?"},{"owner":{"account_id":2795364,"reputation":7571,"user_id":2404683,"display_name":"Davide D&#39;Alto"},"score":0,"creation_date":1655500035,"post_id":72656846,"comment_id":128355480,"body_markdown":"Yes, you need to update both sides every time. You can avoid that if you enable Bytecode enhancements: https://docs.jboss.org/hibernate/orm/5.6/userguide/html_single/Hibernate_User_Guide.html#BytecodeEnhancement-dirty-tracking-bidirectional","body":"Yes, you need to update both sides every time. You can avoid that if you enable Bytecode enhancements: <a href=\"https://docs.jboss.org/hibernate/orm/5.6/userguide/html_single/Hibernate_User_Guide.html#BytecodeEnhancement-dirty-tracking-bidirectional\" rel=\"nofollow noreferrer\">docs.jboss.org/hibernate/orm/5.6/userguide/html_single/&hellip;</a>"},{"owner":{"account_id":2795364,"reputation":7571,"user_id":2404683,"display_name":"Davide D&#39;Alto"},"score":0,"creation_date":1655500269,"post_id":72656846,"comment_id":128355530,"body_markdown":"SO is not the right place for this kind of conversations. Check the Hibernate forum (https://discourse.hibernate.org/) or zulip (https://hibernate.zulipchat.com/#narrow/stream/132096-hibernate-user). I think I&#39;ve answered your initial question and more. Good luck.","body":"SO is not the right place for this kind of conversations. Check the Hibernate forum (<a href=\"https://discourse.hibernate.org/\" rel=\"nofollow noreferrer\">discourse.hibernate.org</a>) or zulip (<a href=\"https://hibernate.zulipchat.com/#narrow/stream/132096-hibernate-user\" rel=\"nofollow noreferrer\">hibernate.zulipchat.com/#narrow/stream/132096-hibernate-use&zwnj;&#8203;r</a>). I think I&#39;ve answered your initial question and more. Good luck."},{"owner":{"display_name":"user19254373"},"score":0,"creation_date":1655802122,"post_id":72656846,"comment_id":128411623,"body_markdown":"Regarding to my **2nd** question, I have just read the [documentation part](https://docs.jboss.org/hibernate/orm/6.1/userguide/html_single/Hibernate_User_Guide.html#best-practices-mapping-associations) and confused. Regarding to **Bidirectional associations**, should we use `List` or `Set` with `Bidirectional associations`? Any clarification pls?","body":"Regarding to my <b>2nd</b> question, I have just read the <a href=\"https://docs.jboss.org/hibernate/orm/6.1/userguide/html_single/Hibernate_User_Guide.html#best-practices-mapping-associations\" rel=\"nofollow noreferrer\">documentation part</a> and confused. Regarding to <b>Bidirectional associations</b>, should we use <code>List</code> or <code>Set</code> with <code>Bidirectional associations</code>? Any clarification pls?"},{"owner":{"account_id":2795364,"reputation":7571,"user_id":2404683,"display_name":"Davide D&#39;Alto"},"score":0,"creation_date":1655802887,"post_id":72656846,"comment_id":128411913,"body_markdown":"It depends on the requirements. See https://docs.jboss.org/hibernate/orm/6.1/userguide/html_single/Hibernate_User_Guide.html#collections and https://stackoverflow.com/questions/72655802/hibernate-relationship-confusion-with-uni-and-bidirectional/72656846#72656846","body":"It depends on the requirements. See <a href=\"https://docs.jboss.org/hibernate/orm/6.1/userguide/html_single/Hibernate_User_Guide.html#collections\" rel=\"nofollow noreferrer\">docs.jboss.org/hibernate/orm/6.1/userguide/html_single/&hellip;</a> and <a href=\"https://stackoverflow.com/questions/72655802/hibernate-relationship-confusion-with-uni-and-bidirectional/72656846#72656846\" title=\"hibernate relationship confusion with uni and bidirectional\">stackoverflow.com/questions/72655802/&hellip;</a>"},{"owner":{"display_name":"user19254373"},"score":0,"creation_date":1655812664,"post_id":72656846,"comment_id":128415479,"body_markdown":"What about `equals()` and `hashCode()` methods? Do we always override them in the entities or should we omit or override via `@EqualsAndHashCode(callSuper = true)` in the entities if we do not need any special behaviour?","body":"What about <code>equals()</code> and <code>hashCode()</code> methods? Do we always override them in the entities or should we omit or override via <code>@EqualsAndHashCode(callSuper = true)</code> in the entities if we do not need any special behaviour?"}],"tags":[],"owner":{"account_id":2795364,"reputation":7571,"user_id":2404683,"display_name":"Davide D&#39;Alto"},"comment_count":14,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1669223205,"creation_date":1655456486,"answer_id":72656846,"question_id":72655802,"body_markdown":"There are many options because there are many different use cases.\r\n\r\n1. Choosing between Bidirectional and uni has an impact on the Java Object mapping the entities, how the association is mapped on the database and which query Hibernate will use to load entities (or convert HQL queries). I&#39;m not going into the details of everything - [the documentation does already a great job at it][1] - but if we take the following bidirectional association:\r\n   ```\r\n   @Entity(name = &quot;Person&quot;)\r\n   @Table(name=&quot;PERSON_TABLE&quot;)\r\n   class Person {\r\n\r\n     @Id\t\r\n \t private Long id;\r\n\r\n     @OneToMany(mappedBy = &quot;person&quot;)\r\n\t private List&lt;Phone&gt; phones = new ArrayList&lt;&gt;();\r\n\r\n   }\r\n\r\n   @Entity\r\n   @Table(name=&quot;PHONE_TABLE&quot;)\r\n   class Phone {\r\n\r\n     @Id\t\r\n \t private Long id;\r\n\r\n\t @ManyToOne\r\n\t private Person person;\r\n\r\n   }\r\n   ```\r\n\r\n   Hibernate will map it adding a column `person_id` on the table `PHONE_TABLE`.\r\n\r\n   If instead we map it as a unidirectional one-to-many:\r\n   ```\r\n   @Entity(name = &quot;Person&quot;)\r\n   @Table(name=&quot;PERSON_TABLE&quot;)\r\n   class Person {\r\n\r\n     @Id\t\r\n \t private Long id;\r\n\r\n\t @OneToMany(mappedBy = &quot;person&quot;)\r\n\t private List&lt;Phone&gt; phones = new ArrayList&lt;&gt;();\r\n\r\n   }\r\n\r\n   @Entity\r\n   @Table(name=&quot;PHONE_TABLE&quot;)\r\n   class Phone {\r\n\r\n     @Id\t\r\n\t private Long id;\r\n\r\n     // No many-to-one in this class\r\n\r\n   }\r\n   ```\r\n\r\n   Hibernate creates an extra table `Person_Phone` (a bridge between `PHONE_TABLE` and `PERSON_TABLE`), that contains two columns `person_id` and `phone_id`.\r\n\r\n2. It depends what type of content you expect the association to contain and how you want it returned: does it have duplicates? Is it ordered? Do you want the result as they appear on the db or do you want to use a comparable on the collection? Which mapping are you using? List is usually a good generic option, but you might have better performances using another implementation in some cases, like when you many-to-many associations or when you want to load multiple associations eagerly.\r\n   This question on stack overflow explains why [one cannot load multiple lists eagerly][2] and the documentation [list all the available collections][3] ([there are many more  articles on-line][4]). Here&#39;s an excerpt from the docs:\r\n   &gt;  unidirectional bags are not as efficient when it comes to modifying the collection structure (removing or reshuffling elements).\r\n   &gt;\r\n   &gt; Because the parent-side cannot uniquely identify each individual child, Hibernate deletes all link table rows associated with the parent entity and re-adds the remaining ones that are found in the current collection state.\r\n\r\n3. `@JoinColumn` is optional, and it&#39;s usually necessary when users want to change some of the defaults. For example, when you want to change the column name mapping the association:\r\n   ```\r\n   @Entity\r\n   class Book {\r\n\r\n      // Default column name would be `author_id` but we change it to `a_id`,\r\n      // if you are fine with author_id, than `@JoinColumn` is not necessary\r\n      @ManyToOne\r\n      @JoinColumn(name = &quot;a_id&quot;)\r\n      Author author;\r\n   }\r\n   ```\r\n\r\n   In regard to `@ManyToOne(fetch = FetchType.LAZY)`, Hibernate cannot always fetch many-to-one associations lazily. So the default is `EAGER`. When Hibernate load an association lazily, it creates a proxy object of the expected class. The problem is that you could have code like this:\r\n   ```\r\n   Book book = session.find(Book.class, 5);\r\n   if ( book.getAuthor() == null ) {\r\n    // do something ...\r\n   }\r\n   ``` \r\n\r\n   If Hibernate creates a proxy every time, `getAuthor()` will never return null. So if hibernate can guess that the author exists without querying the associated table, it will load it lazily (for example, when one specifies that the association always exists), otherwise it will just query the associated table and create the object eagerly.\r\n\r\n\r\n  [1]: https://docs.jboss.org/hibernate/orm/5.6/userguide/html_single/Hibernate_User_Guide.html#associations\r\n  [2]: https://stackoverflow.com/questions/13334831/multiplebagfetchexception-thrown-by-hibernate\r\n  [3]: https://docs.jboss.org/hibernate/orm/5.6/userguide/html_single/Hibernate_User_Guide.html#collections-entity\r\n  [4]: https://thorben-janssen.com/association-mappings-bag-list-set/#Don8217t_use_a_List_for_many-to-many_associations","title":"Hibernate relationship confusion with uni and bidirectional","body":"<p>There are many options because there are many different use cases.</p>\n<ol>\n<li><p>Choosing between Bidirectional and uni has an impact on the Java Object mapping the entities, how the association is mapped on the database and which query Hibernate will use to load entities (or convert HQL queries). I'm not going into the details of everything - <a href=\"https://docs.jboss.org/hibernate/orm/5.6/userguide/html_single/Hibernate_User_Guide.html#associations\" rel=\"nofollow noreferrer\">the documentation does already a great job at it</a> - but if we take the following bidirectional association:</p>\n<pre><code>@Entity(name = &quot;Person&quot;)\n@Table(name=&quot;PERSON_TABLE&quot;)\nclass Person {\n\n  @Id    \n  private Long id;\n\n  @OneToMany(mappedBy = &quot;person&quot;)\n  private List&lt;Phone&gt; phones = new ArrayList&lt;&gt;();\n\n}\n\n@Entity\n@Table(name=&quot;PHONE_TABLE&quot;)\nclass Phone {\n\n  @Id    \n  private Long id;\n\n  @ManyToOne\n  private Person person;\n\n}\n</code></pre>\n<p>Hibernate will map it adding a column <code>person_id</code> on the table <code>PHONE_TABLE</code>.</p>\n<p>If instead we map it as a unidirectional one-to-many:</p>\n<pre><code>@Entity(name = &quot;Person&quot;)\n@Table(name=&quot;PERSON_TABLE&quot;)\nclass Person {\n\n  @Id    \n  private Long id;\n\n  @OneToMany(mappedBy = &quot;person&quot;)\n  private List&lt;Phone&gt; phones = new ArrayList&lt;&gt;();\n\n}\n\n@Entity\n@Table(name=&quot;PHONE_TABLE&quot;)\nclass Phone {\n\n  @Id    \n  private Long id;\n\n  // No many-to-one in this class\n\n}\n</code></pre>\n<p>Hibernate creates an extra table <code>Person_Phone</code> (a bridge between <code>PHONE_TABLE</code> and <code>PERSON_TABLE</code>), that contains two columns <code>person_id</code> and <code>phone_id</code>.</p>\n</li>\n<li><p>It depends what type of content you expect the association to contain and how you want it returned: does it have duplicates? Is it ordered? Do you want the result as they appear on the db or do you want to use a comparable on the collection? Which mapping are you using? List is usually a good generic option, but you might have better performances using another implementation in some cases, like when you many-to-many associations or when you want to load multiple associations eagerly.\nThis question on stack overflow explains why <a href=\"https://stackoverflow.com/questions/13334831/multiplebagfetchexception-thrown-by-hibernate\">one cannot load multiple lists eagerly</a> and the documentation <a href=\"https://docs.jboss.org/hibernate/orm/5.6/userguide/html_single/Hibernate_User_Guide.html#collections-entity\" rel=\"nofollow noreferrer\">list all the available collections</a> (<a href=\"https://thorben-janssen.com/association-mappings-bag-list-set/#Don8217t_use_a_List_for_many-to-many_associations\" rel=\"nofollow noreferrer\">there are many more  articles on-line</a>). Here's an excerpt from the docs:</p>\n<blockquote>\n<p>unidirectional bags are not as efficient when it comes to modifying the collection structure (removing or reshuffling elements).</p>\n<p>Because the parent-side cannot uniquely identify each individual child, Hibernate deletes all link table rows associated with the parent entity and re-adds the remaining ones that are found in the current collection state.</p>\n</blockquote>\n</li>\n<li><p><code>@JoinColumn</code> is optional, and it's usually necessary when users want to change some of the defaults. For example, when you want to change the column name mapping the association:</p>\n<pre><code>@Entity\nclass Book {\n\n   // Default column name would be `author_id` but we change it to `a_id`,\n   // if you are fine with author_id, than `@JoinColumn` is not necessary\n   @ManyToOne\n   @JoinColumn(name = &quot;a_id&quot;)\n   Author author;\n}\n</code></pre>\n<p>In regard to <code>@ManyToOne(fetch = FetchType.LAZY)</code>, Hibernate cannot always fetch many-to-one associations lazily. So the default is <code>EAGER</code>. When Hibernate load an association lazily, it creates a proxy object of the expected class. The problem is that you could have code like this:</p>\n<pre><code>Book book = session.find(Book.class, 5);\nif ( book.getAuthor() == null ) {\n // do something ...\n}\n</code></pre>\n<p>If Hibernate creates a proxy every time, <code>getAuthor()</code> will never return null. So if hibernate can guess that the author exists without querying the associated table, it will load it lazily (for example, when one specifies that the association always exists), otherwise it will just query the associated table and create the object eagerly.</p>\n</li>\n</ol>\n"}],"owner":{"display_name":"user19254373"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":251,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1669223205,"creation_date":1655451146,"question_id":72655802,"body_markdown":"I have Spring Data JPA experience, but new for Hibernate and after looking at several tutorials and  articles, now I am too confused with some points. Could you please clarify me about the following issues?\r\n\r\n**1.** Regarding to OneToMany relationship, it is suggested to define this relationship in the table e.g. `Country` table instead of the related table e.g. `Employee` table with `country_id` map key. However, there are different kind of implementations for this and other relationships. \r\n\r\nWhat does Uni or Bidirectional relationship mean in Hibernate? \r\n\r\nCould you please give an example or suggest me a good example (except from documentation that also cunfused me) in order to understand all the relationships used in Hibernate? \r\n\r\n**2.** For the ManyToMany relationship, some example use `List&lt;T&gt;` while some others use `Set&lt;T&gt;`, `Collection&lt;T&gt;`. So, what is the proper way to define multiple relationship entity? \r\n\r\n**3.** There are also some unnecessary implementation e.g. `@ManyToOne(fetch = FetchType.LAZY)` or `@JoinColumn(name = &quot;book_id&quot;)` because these are default implementation. So, as far as I see, there is no need to imply these default settings as they have no impact. Is that true? ","title":"Hibernate relationship confusion with uni and bidirectional","body":"<p>I have Spring Data JPA experience, but new for Hibernate and after looking at several tutorials and  articles, now I am too confused with some points. Could you please clarify me about the following issues?</p>\n<p><strong>1.</strong> Regarding to OneToMany relationship, it is suggested to define this relationship in the table e.g. <code>Country</code> table instead of the related table e.g. <code>Employee</code> table with <code>country_id</code> map key. However, there are different kind of implementations for this and other relationships.</p>\n<p>What does Uni or Bidirectional relationship mean in Hibernate?</p>\n<p>Could you please give an example or suggest me a good example (except from documentation that also cunfused me) in order to understand all the relationships used in Hibernate?</p>\n<p><strong>2.</strong> For the ManyToMany relationship, some example use <code>List&lt;T&gt;</code> while some others use <code>Set&lt;T&gt;</code>, <code>Collection&lt;T&gt;</code>. So, what is the proper way to define multiple relationship entity?</p>\n<p><strong>3.</strong> There are also some unnecessary implementation e.g. <code>@ManyToOne(fetch = FetchType.LAZY)</code> or <code>@JoinColumn(name = &quot;book_id&quot;)</code> because these are default implementation. So, as far as I see, there is no need to imply these default settings as they have no impact. Is that true?</p>\n"},{"tags":["java","nullpointerexception"],"comments":[{"owner":{"account_id":446566,"reputation":18084,"user_id":839689,"accept_rate":71,"display_name":"Nayuki"},"score":0,"creation_date":1669222890,"post_id":74550511,"comment_id":131597501,"body_markdown":"Please show the exception stack trace. Please indicate which line is throwing the NullPointerException.","body":"Please show the exception stack trace. Please indicate which line is throwing the NullPointerException."},{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":0,"creation_date":1669222924,"post_id":74550511,"comment_id":131597518,"body_markdown":"You haven&#39;t told us anything about where the exception is, or what the content of the file is. That makes it really hard to help you. The `readFile` method does seem to go to the *end* of the file, then read an extra line - I strongly suspect that `line` is null. It&#39;s not at all clear why you&#39;ve got that while loop to basically exhaust the scanner *before* you try to use it.","body":"You haven&#39;t told us anything about where the exception is, or what the content of the file is. That makes it really hard to help you. The <code>readFile</code> method does seem to go to the <i>end</i> of the file, then read an extra line - I strongly suspect that <code>line</code> is null. It&#39;s not at all clear why you&#39;ve got that while loop to basically exhaust the scanner <i>before</i> you try to use it."},{"owner":{"account_id":248321,"reputation":62668,"user_id":523612,"accept_rate":100,"display_name":"Karl Knechtel"},"score":0,"creation_date":1669222960,"post_id":74550511,"comment_id":131597528,"body_markdown":"Welcome to Stack Overflow. Please read [ask]. What **specific things** did you try already, in order to **understand** where the NullPointerException comes from? What **line of code** do you think has the exception? (Did you try to **read** the stack trace?) What **value** appears to be null, when you read the error message? Do you **understand why** it causes a problem, if that value is null? Do you believe, that some other part of the code **should be making it** not be null? If so, **why and how**?","body":"Welcome to Stack Overflow. Please read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>. What <b>specific things</b> did you try already, in order to <b>understand</b> where the NullPointerException comes from? What <b>line of code</b> do you think has the exception? (Did you try to <b>read</b> the stack trace?) What <b>value</b> appears to be null, when you read the error message? Do you <b>understand why</b> it causes a problem, if that value is null? Do you believe, that some other part of the code <b>should be making it</b> not be null? If so, <b>why and how</b>?"},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":5,"creation_date":1669222989,"post_id":74550511,"comment_id":131597539,"body_markdown":"There are two variables called `file`.  You initialize one ... and use the other one.   That is the cause of the NPE.","body":"There are two variables called <code>file</code>.  You initialize one ... and use the other one.   That is the cause of the NPE."},{"owner":{"account_id":2139538,"reputation":42521,"user_id":1898563,"accept_rate":78,"display_name":"Michael"},"score":2,"creation_date":1669223005,"post_id":74550511,"comment_id":131597548,"body_markdown":"Unrelated issue but you have a typo here: `while (scanner.hasNextLine());{` This semicolon is breaking this loop. Delete the semicolon.","body":"Unrelated issue but you have a typo here: <code>while (scanner.hasNextLine());{</code> This semicolon is breaking this loop. Delete the semicolon."},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":1,"creation_date":1669223332,"post_id":74550511,"comment_id":131597676,"body_markdown":"The `static` block is going to execute **before** the `main` method ... which is where you are attempt to initialize (the wrong) `file`.  Don&#39;t use a `static` block.  Put that logic into a method ...","body":"The <code>static</code> block is going to execute <b>before</b> the <code>main</code> method ... which is where you are attempt to initialize (the wrong) <code>file</code>.  Don&#39;t use a <code>static</code> block.  Put that logic into a method ..."}],"answers":[{"tags":[],"owner":{"account_id":446566,"reputation":18084,"user_id":839689,"accept_rate":71,"display_name":"Nayuki"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1669223043,"creation_date":1669223043,"answer_id":74550557,"question_id":74550511,"body_markdown":"Pretty sure your problem is here:\r\n\r\n    public class Exception2 {\r\n        public static File file;\r\n    \r\n        static {\r\n            try {\r\n                scanner = new Scanner(file); // &lt;-- NullPointerException\r\n            } catch (FileNotFoundException e) {\r\n                throw new RuntimeException(e);\r\n            }\r\n        }\r\n    }\r\n\r\nThis is because all class fields are initialized to `null`, and the `static { }` block executes before `main()`.\r\n\r\nTo solve this problem, you should move the initialization of `scanner` into `main()`.","title":"Why this code give me NullPointException?","body":"<p>Pretty sure your problem is here:</p>\n<pre><code>public class Exception2 {\n    public static File file;\n\n    static {\n        try {\n            scanner = new Scanner(file); // &lt;-- NullPointerException\n        } catch (FileNotFoundException e) {\n            throw new RuntimeException(e);\n        }\n    }\n}\n</code></pre>\n<p>This is because all class fields are initialized to <code>null</code>, and the <code>static { }</code> block executes before <code>main()</code>.</p>\n<p>To solve this problem, you should move the initialization of <code>scanner</code> into <code>main()</code>.</p>\n"}],"owner":{"account_id":24592309,"reputation":3,"user_id":20377554,"display_name":"housemice"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":50,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"closed_date":1669223142,"accepted_answer_id":74550557,"answer_count":1,"score":-2,"last_activity_date":1669223043,"creation_date":1669222787,"question_id":74550511,"body_markdown":"I have the code which below and file is on the same path but it gives error NullPointException\r\n\r\n```\r\n\r\nimport java.io.FileNotFoundException;\r\nimport java.io.File;\r\nimport java.util.Scanner;\r\nimport java.util.Arrays;\r\nimport static java.io.File.separator;\r\n\r\n\r\npublic class Exception2 {\r\n    public static File file;\r\n    static Scanner scanner;\r\n\r\n    public static void main(String[] args) {\r\n        String seporator = separator;\r\n        String path = &quot;C:&quot;+separator+&quot;Users&quot;+separator+&quot;asus&quot;+separator+&quot;Desktop&quot;+separator+&quot;1.txt&quot;;\r\n        File file = new File(path);\r\n        try {\r\n            readFile();\r\n            System.out.println(&quot;Everything is okay.&quot;);\r\n        } catch (FileNotFoundException e) {\r\n            System.out.println(&quot;Error.&quot;);\r\n        }\r\n    }\r\n\r\n    static {\r\n        try {\r\n            scanner = new Scanner(file);\r\n        } catch (FileNotFoundException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n    }\r\n\r\n    public static void readFile() throws FileNotFoundException {\r\n\r\n        while (scanner.hasNextLine());{\r\n            System.out.println(scanner.nextLine() );\r\n        }\r\n        scanner.close();\r\n        String line = scanner.nextLine();\r\n        String [] words = line.split(&quot; &quot;);\r\n        System.out.println(Arrays.toString(words));\r\n    }\r\n\r\n\r\n}\r\n\r\n```\r\n\r\n\r\nI want to make file reader with my own exceptions\r\nThe meaning of programm that it will read strings from file which places on the path which i wrote and then will give me that strings back but and i added some exceptions triggered if file will be not find out ","title":"Why this code give me NullPointException?","body":"<p>I have the code which below and file is on the same path but it gives error NullPointException</p>\n<pre><code>\nimport java.io.FileNotFoundException;\nimport java.io.File;\nimport java.util.Scanner;\nimport java.util.Arrays;\nimport static java.io.File.separator;\n\n\npublic class Exception2 {\n    public static File file;\n    static Scanner scanner;\n\n    public static void main(String[] args) {\n        String seporator = separator;\n        String path = &quot;C:&quot;+separator+&quot;Users&quot;+separator+&quot;asus&quot;+separator+&quot;Desktop&quot;+separator+&quot;1.txt&quot;;\n        File file = new File(path);\n        try {\n            readFile();\n            System.out.println(&quot;Everything is okay.&quot;);\n        } catch (FileNotFoundException e) {\n            System.out.println(&quot;Error.&quot;);\n        }\n    }\n\n    static {\n        try {\n            scanner = new Scanner(file);\n        } catch (FileNotFoundException e) {\n            throw new RuntimeException(e);\n        }\n    }\n\n    public static void readFile() throws FileNotFoundException {\n\n        while (scanner.hasNextLine());{\n            System.out.println(scanner.nextLine() );\n        }\n        scanner.close();\n        String line = scanner.nextLine();\n        String [] words = line.split(&quot; &quot;);\n        System.out.println(Arrays.toString(words));\n    }\n\n\n}\n\n</code></pre>\n<p>I want to make file reader with my own exceptions\nThe meaning of programm that it will read strings from file which places on the path which i wrote and then will give me that strings back but and i added some exceptions triggered if file will be not find out</p>\n"},{"tags":["java","arrays","function"],"answers":[{"comments":[{"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"score":1,"creation_date":1669197467,"post_id":74544779,"comment_id":131587907,"body_markdown":"What&#39;s the point of declaring `j` - use `array.length-1` directly instead. However, you can use `j` variable more usefully: `for (int i = 0, j = array.length-1; i &lt; j; i++, j--)`, then use `j` directly inside the loop instead of `j-i`.","body":"What&#39;s the point of declaring <code>j</code> - use <code>array.length-1</code> directly instead. However, you can use <code>j</code> variable more usefully: <code>for (int i = 0, j = array.length-1; i &lt; j; i++, j--)</code>, then use <code>j</code> directly inside the loop instead of <code>j-i</code>."},{"owner":{"account_id":26774791,"reputation":826,"user_id":20370596,"display_name":"Christoph Dahlen"},"score":0,"creation_date":1669198664,"post_id":74544779,"comment_id":131588345,"body_markdown":"@AndyTurner Good point, I integrated this into my response.","body":"@AndyTurner Good point, I integrated this into my response."}],"tags":[],"owner":{"account_id":26774791,"reputation":826,"user_id":20370596,"display_name":"Christoph Dahlen"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1669198703,"creation_date":1669197075,"answer_id":74544779,"question_id":74544557,"body_markdown":"The code is giving you an ArrayIndexOutOfBoundsException, as you are trying to address an array index which is beyond array limits. The reason for this is, that arrays are 0-indexed, so an array of length 10 has indexes 0-9. Your code does not take this into account when defining field `j`.\r\n\r\nThe only change you need to make is change that line:\r\n\r\n    int j = array.length;\r\n\r\ninto this one:\r\n\r\n    int j = array.length - 1;\r\n\r\nYou could also do some more refactoring and rewrite method as:\r\n\r\n    public static int[] reversea(int array[]) {\r\n        int swap;\r\n        for (int i = 0, j = array.length-1; i &lt; j; i++, j--) {\r\n            swap = array[i];\r\n            array[i] = array[j];\r\n            array[j] = swap;\r\n        }\r\n        return array;\r\n    }\r\n\r\nInstead of returning useless value of `j` after reversing, the refactored method returns the array in reversed order. \r\n\r\nPS: Please use CamelCase for your class names.\r\n","title":"I want to reverse an array but dont know why this error comes?","body":"<p>The code is giving you an ArrayIndexOutOfBoundsException, as you are trying to address an array index which is beyond array limits. The reason for this is, that arrays are 0-indexed, so an array of length 10 has indexes 0-9. Your code does not take this into account when defining field <code>j</code>.</p>\n<p>The only change you need to make is change that line:</p>\n<pre><code>int j = array.length;\n</code></pre>\n<p>into this one:</p>\n<pre><code>int j = array.length - 1;\n</code></pre>\n<p>You could also do some more refactoring and rewrite method as:</p>\n<pre><code>public static int[] reversea(int array[]) {\n    int swap;\n    for (int i = 0, j = array.length-1; i &lt; j; i++, j--) {\n        swap = array[i];\n        array[i] = array[j];\n        array[j] = swap;\n    }\n    return array;\n}\n</code></pre>\n<p>Instead of returning useless value of <code>j</code> after reversing, the refactored method returns the array in reversed order.</p>\n<p>PS: Please use CamelCase for your class names.</p>\n"},{"comments":[{"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"score":0,"creation_date":1669220602,"post_id":74549606,"comment_id":131596581,"body_markdown":"It would make for a better answer if a) you address the issues in OP&#39;s code; b) explain what your code does, and how that relates to OP&#39;s issues.","body":"It would make for a better answer if a) you address the issues in OP&#39;s code; b) explain what your code does, and how that relates to OP&#39;s issues."},{"owner":{"account_id":14781952,"reputation":120,"user_id":10675247,"display_name":"Philippe Fery"},"score":0,"creation_date":1669222805,"post_id":74549606,"comment_id":131597466,"body_markdown":"Hi Andy Turner! You&#39;re right, it needs some comments. They&#39;ve been added. What do you mean by &quot;OP&#39;s&quot;?","body":"Hi Andy Turner! You&#39;re right, it needs some comments. They&#39;ve been added. What do you mean by &quot;OP&#39;s&quot;?"}],"tags":[],"owner":{"account_id":14781952,"reputation":120,"user_id":10675247,"display_name":"Philippe Fery"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669222777,"creation_date":1669218690,"answer_id":74549606,"question_id":74544557,"body_markdown":"The logic is in method &quot;reverseArray(int[] array)&quot;\r\n\r\n    import java.util.Arrays;\r\n\r\npublic class ArrayReverse {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tint[] array = { 1, 2, 3, 4, 5, 6, 7, 8, 9 };\r\n\t\tSystem.out.println(&quot;original array :: &quot; + array + &quot; : &quot; + Arrays.toString(array));\r\n\t\treverseArray(array);\r\n\t\tSystem.out.println(&quot;reversed array :: &quot; + array + &quot; : &quot; + Arrays.toString(array));\r\n\t}\r\n\r\n\tpublic static void reverseArray(int[] array) {\r\n\t\t// We will iterate on the half of the array length\r\n\t\t// If the array size is an even number (e.g.: {1 ,2 ,3 ,4} we will iterate on\r\n\t\t// the half of the array size (e.g.: 2 numbers)\r\n\t\t// If the array size is an odd number (e.g.: {1 ,2 ,3 ,4 ,5} we will iterate on\r\n\t\t// the half of the array size minus 1 (e.g.: 2 numbers)\r\n\t\tfor (int i = 0; i &lt; array.length / 2; i++) {\r\n\t\t\t// We add the value of the number at index i in array (let&#39;s say its value is x)\r\n\t\t\t// to the value of the number at index (length of array-i-1) of the array (let&#39;s\r\n\t\t\t// say value y)\r\n\t\t\tarray[i] = array[i] + array[array.length - 1 - i];\r\n\t\t\t// Now the value of array[i] is x+y\r\n\t\t\t// We retrieve the value of the number at index (length of array-i-1) from the\r\n\t\t\t// number at index i in array\r\n\t\t\tarray[array.length - 1 - i] = array[i] - array[array.length - 1 - i];\r\n\t\t\t// Now the value of array[length of array-i-1] is (x+y)-y=x\r\n\t\t\t// And finally, we retrieve the value of the number at index (length of\r\n\t\t\t// array-i-1) from number at index i in array\r\n\t\t\tarray[i] = array[i] - array[array.length - 1 - i];\r\n\t\t\t// Now the value of array[i] is (x+y)-x=y\r\n\t\t\t// We have swapped x and y values in the array\r\n\t\t}\r\n\t}\r\n}\r\n\r\nThis can seem a bit complicated but this method only use addition and substraction, no complicated algorithm.\r\nFurthermore, there is no variable instance created except variable &quot;i&quot; as a counter on array index.\r\nAnd, finally, no new array is created. The reversed array is the original array instance simply reversed.","title":"I want to reverse an array but dont know why this error comes?","body":"<p>The logic is in method &quot;reverseArray(int[] array)&quot;</p>\n<pre><code>import java.util.Arrays;\n</code></pre>\n<p>public class ArrayReverse {</p>\n<pre><code>public static void main(String[] args) {\n    int[] array = { 1, 2, 3, 4, 5, 6, 7, 8, 9 };\n    System.out.println(&quot;original array :: &quot; + array + &quot; : &quot; + Arrays.toString(array));\n    reverseArray(array);\n    System.out.println(&quot;reversed array :: &quot; + array + &quot; : &quot; + Arrays.toString(array));\n}\n\npublic static void reverseArray(int[] array) {\n    // We will iterate on the half of the array length\n    // If the array size is an even number (e.g.: {1 ,2 ,3 ,4} we will iterate on\n    // the half of the array size (e.g.: 2 numbers)\n    // If the array size is an odd number (e.g.: {1 ,2 ,3 ,4 ,5} we will iterate on\n    // the half of the array size minus 1 (e.g.: 2 numbers)\n    for (int i = 0; i &lt; array.length / 2; i++) {\n        // We add the value of the number at index i in array (let's say its value is x)\n        // to the value of the number at index (length of array-i-1) of the array (let's\n        // say value y)\n        array[i] = array[i] + array[array.length - 1 - i];\n        // Now the value of array[i] is x+y\n        // We retrieve the value of the number at index (length of array-i-1) from the\n        // number at index i in array\n        array[array.length - 1 - i] = array[i] - array[array.length - 1 - i];\n        // Now the value of array[length of array-i-1] is (x+y)-y=x\n        // And finally, we retrieve the value of the number at index (length of\n        // array-i-1) from number at index i in array\n        array[i] = array[i] - array[array.length - 1 - i];\n        // Now the value of array[i] is (x+y)-x=y\n        // We have swapped x and y values in the array\n    }\n}\n</code></pre>\n<p>}</p>\n<p>This can seem a bit complicated but this method only use addition and substraction, no complicated algorithm.\nFurthermore, there is no variable instance created except variable &quot;i&quot; as a counter on array index.\nAnd, finally, no new array is created. The reversed array is the original array instance simply reversed.</p>\n"}],"owner":{"account_id":26877071,"reputation":1,"user_id":20458153,"display_name":"Bilal Sahi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":99,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74544779,"answer_count":2,"score":0,"last_activity_date":1669222777,"creation_date":1669196135,"question_id":74544557,"body_markdown":"i dont kow ehy my programs dont run.\r\ni am trying to reverse my array through user defined function.\r\ni can give an input but cannot find out the answer.\r\n\r\n    import java.util.*;\r\n    public class reverseanarray{\r\n    public static int reversea(int array[]){\r\n        int swap;\r\n        int j=array.length;\r\n        for(int i=0;i&lt;array.length/2;i++){\r\n            swap=array[i];\r\n            array[i]=array[j];\r\n            array[j]=swap;\r\n            j--;\r\n        }\r\n        return j;\r\n    }      \r\n    public static void main(String args[]){\r\n       Scanner sc = new Scanner(System.in);\r\n       //System.out.println();\r\n       //int a = sc.nextInt();\r\n       System.out.println(&quot;please input the length&quot;);\r\n       int y=sc.nextInt();//INPUT OF LENGTH OF ARRAY\r\n       int arr[]=new int[y];\r\n           //INPUT ARRAY\r\n           for(int r=0;r&lt;arr.length;r++){\r\n               System.out.println(&quot;please input the &quot;+r+&quot; index value&quot;);\r\n               arr[r]=sc.nextInt();\r\n           }\r\n           System.out.println(reversea(arr));\r\n           for(int i=0;i&lt;y;i++){\r\n            System.out.println(arr[i]);\r\n           }\r\n          \r\n        }\r\n\r\n    }\r\n","title":"I want to reverse an array but dont know why this error comes?","body":"<p>i dont kow ehy my programs dont run.\ni am trying to reverse my array through user defined function.\ni can give an input but cannot find out the answer.</p>\n<pre><code>import java.util.*;\npublic class reverseanarray{\npublic static int reversea(int array[]){\n    int swap;\n    int j=array.length;\n    for(int i=0;i&lt;array.length/2;i++){\n        swap=array[i];\n        array[i]=array[j];\n        array[j]=swap;\n        j--;\n    }\n    return j;\n}      \npublic static void main(String args[]){\n   Scanner sc = new Scanner(System.in);\n   //System.out.println();\n   //int a = sc.nextInt();\n   System.out.println(&quot;please input the length&quot;);\n   int y=sc.nextInt();//INPUT OF LENGTH OF ARRAY\n   int arr[]=new int[y];\n       //INPUT ARRAY\n       for(int r=0;r&lt;arr.length;r++){\n           System.out.println(&quot;please input the &quot;+r+&quot; index value&quot;);\n           arr[r]=sc.nextInt();\n       }\n       System.out.println(reversea(arr));\n       for(int i=0;i&lt;y;i++){\n        System.out.println(arr[i]);\n       }\n      \n    }\n\n}\n</code></pre>\n"},{"tags":["java","sql","oracle","spring-boot","jdbctemplate"],"comments":[{"owner":{"account_id":6875395,"reputation":1037,"user_id":5284011,"display_name":"JohnXF"},"score":1,"creation_date":1669028192,"post_id":74517670,"comment_id":131541653,"body_markdown":"Your code looks like you have hard-coded the phone number into the query (line 13) rather than using the parameter you defined. You don&#39;t have any parameters in your SQL at all - you should look to fix that first.","body":"Your code looks like you have hard-coded the phone number into the query (line 13) rather than using the parameter you defined. You don&#39;t have any parameters in your SQL at all - you should look to fix that first."},{"owner":{"account_id":20967180,"reputation":1,"user_id":15405127,"display_name":"H&#242;a V&#245;"},"score":0,"creation_date":1669084237,"post_id":74517670,"comment_id":131557822,"body_markdown":"Sorry that my mistake when copy the code while I testing without parameter. In my code there are parameter for phone number","body":"Sorry that my mistake when copy the code while I testing without parameter. In my code there are parameter for phone number"}],"answers":[{"tags":[],"owner":{"account_id":20967180,"reputation":1,"user_id":15405127,"display_name":"H&#242;a V&#245;"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669222767,"creation_date":1669222767,"answer_id":74550506,"question_id":74517670,"body_markdown":"I have solved the problem by using materialized view and create scheduler to reset it every 24h, the query now much faster about 800ms.","title":"Oracle JDBC Template extremely slow with parameters","body":"<p>I have solved the problem by using materialized view and create scheduler to reset it every 24h, the query now much faster about 800ms.</p>\n"}],"owner":{"account_id":20967180,"reputation":1,"user_id":15405127,"display_name":"H&#242;a V&#245;"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":189,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1669222767,"creation_date":1669027522,"question_id":74517670,"body_markdown":"I have a problem, I use JDBCTemplate in SpringBoot with oracle 19c and using this following query:\r\n\r\n``` sql\r\nSELECT\r\n    CLIENT_EXTRA_INFO.CLIENT_NUMBER,\r\n    CLIENT_EXTRA_INFO.FULL_NAME,\r\nFROM\r\n     CONTRACT\r\n        JOIN CLIENT_EXTRA_INFO on (CONTRACT.CLIENTID = CLIENT_EXTRA_INFO.ID)\r\nWHERE\r\n    CLIENT_EXTRA_INFO.MBPHONE = &#39;0343423223&#39;\r\n  and CONTRACT.STATUS = &#39;ACTIVE&#39;\r\n  and CONTRACT.FLAG IN (&#39;2&#39;, &#39;5&#39;) FETCH  FIRST  10 ROWS ONLY;\r\n```\r\nIt run fast on console, about 300ms, but when add use it with JDBC and add parameter to phone number:\r\n\r\n``` java\r\n@Override\r\n    public ResponsePagingDTO&lt;RetailCustomerDTO&gt; getDuplicateRetailCustomerWithPhoneNumber(DuplicatePhoneNumberRequest request) {\r\n        MapSqlParameterSource mapSqlParameterSource = new MapSqlParameterSource();\r\n        mapSqlParameterSource.addValue(&quot;phone&quot;, request.getPhoneNumber());\r\n        mapSqlParameterSource.addValue(&quot;row&quot;, request.getSize());\r\n        String sql =&quot;SELECT\\n&quot; +\r\n        &quot;    CLIENT_EXTRA_INFO.CLIENT_NUMBER,\\n&quot; +\r\n        &quot;    CLIENT_EXTRA_INFO.FULL_NAME,\\n&quot; +\r\n        &quot;FROM\\n&quot; +\r\n        &quot;     CONTRACT\\n&quot; +\r\n        &quot;        JOIN CLIENT_EXTRA_INFO on (CONTRACT.CLIENTID = CLIENT_EXTRA_INFO.ID)\\n&quot; +\r\n        &quot;WHERE\\n&quot; +\r\n        &quot;    CLIENT_EXTRA_INFO.MBPHONE = :phone\\n&quot; +\r\n        &quot;  and CONTRACT.STATUS = &#39;ACTIVE&#39;\\n&quot; +\r\n        &quot;  and CONTRACT.FLAG IN (&#39;2&#39;, &#39;5&#39;) FETCH  FIRST  :row ROWS ONLY&quot;;\r\n\r\n\r\n        ResponsePagingDTO&lt;RetailCustomerDTO&gt; responsePagingDTO = new ResponsePagingDTO&lt;&gt;();\r\n\r\n\r\n        List&lt;RetailCustomerDTO&gt; retailCustomerDTOS = new ArrayList&lt;&gt;();\r\n        pulseOpsTemplateJdbc.query(sql, mapSqlParameterSource, (result -&gt; {\r\n            RetailCustomerDTO retailCustomer = new RetailCustomerDTO();\r\n            retailCustomer.setClientNumber(result.getString(ClientConstant.CLIENT_NUM));\r\n            retailCustomer.setFullName(result.getString(ClientConstant.FULL_NAME));\r\n            retailCustomer.setPhoneNumber(request.getPhoneNumber());\r\n            retailCustomerDTOS.add(retailCustomer);\r\n        }));\r\n        responsePagingDTO.setData(retailCustomerDTOS);\r\n        return responsePagingDTO;\r\n    }\r\n}\r\n```\r\nThe performance is very low, around 7 min to response compared to run it in console (300ms). Total data is about 80 million records, I have tried many solutions but none of them improve performance, all column in where statement have been indexed.\r\n\r\n\r\n\r\nHave anyone got any solution for this problem? Many thanks to you guys.","title":"Oracle JDBC Template extremely slow with parameters","body":"<p>I have a problem, I use JDBCTemplate in SpringBoot with oracle 19c and using this following query:</p>\n<pre class=\"lang-sql prettyprint-override\"><code>SELECT\n    CLIENT_EXTRA_INFO.CLIENT_NUMBER,\n    CLIENT_EXTRA_INFO.FULL_NAME,\nFROM\n     CONTRACT\n        JOIN CLIENT_EXTRA_INFO on (CONTRACT.CLIENTID = CLIENT_EXTRA_INFO.ID)\nWHERE\n    CLIENT_EXTRA_INFO.MBPHONE = '0343423223'\n  and CONTRACT.STATUS = 'ACTIVE'\n  and CONTRACT.FLAG IN ('2', '5') FETCH  FIRST  10 ROWS ONLY;\n</code></pre>\n<p>It run fast on console, about 300ms, but when add use it with JDBC and add parameter to phone number:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Override\n    public ResponsePagingDTO&lt;RetailCustomerDTO&gt; getDuplicateRetailCustomerWithPhoneNumber(DuplicatePhoneNumberRequest request) {\n        MapSqlParameterSource mapSqlParameterSource = new MapSqlParameterSource();\n        mapSqlParameterSource.addValue(&quot;phone&quot;, request.getPhoneNumber());\n        mapSqlParameterSource.addValue(&quot;row&quot;, request.getSize());\n        String sql =&quot;SELECT\\n&quot; +\n        &quot;    CLIENT_EXTRA_INFO.CLIENT_NUMBER,\\n&quot; +\n        &quot;    CLIENT_EXTRA_INFO.FULL_NAME,\\n&quot; +\n        &quot;FROM\\n&quot; +\n        &quot;     CONTRACT\\n&quot; +\n        &quot;        JOIN CLIENT_EXTRA_INFO on (CONTRACT.CLIENTID = CLIENT_EXTRA_INFO.ID)\\n&quot; +\n        &quot;WHERE\\n&quot; +\n        &quot;    CLIENT_EXTRA_INFO.MBPHONE = :phone\\n&quot; +\n        &quot;  and CONTRACT.STATUS = 'ACTIVE'\\n&quot; +\n        &quot;  and CONTRACT.FLAG IN ('2', '5') FETCH  FIRST  :row ROWS ONLY&quot;;\n\n\n        ResponsePagingDTO&lt;RetailCustomerDTO&gt; responsePagingDTO = new ResponsePagingDTO&lt;&gt;();\n\n\n        List&lt;RetailCustomerDTO&gt; retailCustomerDTOS = new ArrayList&lt;&gt;();\n        pulseOpsTemplateJdbc.query(sql, mapSqlParameterSource, (result -&gt; {\n            RetailCustomerDTO retailCustomer = new RetailCustomerDTO();\n            retailCustomer.setClientNumber(result.getString(ClientConstant.CLIENT_NUM));\n            retailCustomer.setFullName(result.getString(ClientConstant.FULL_NAME));\n            retailCustomer.setPhoneNumber(request.getPhoneNumber());\n            retailCustomerDTOS.add(retailCustomer);\n        }));\n        responsePagingDTO.setData(retailCustomerDTOS);\n        return responsePagingDTO;\n    }\n}\n</code></pre>\n<p>The performance is very low, around 7 min to response compared to run it in console (300ms). Total data is about 80 million records, I have tried many solutions but none of them improve performance, all column in where statement have been indexed.</p>\n<p>Have anyone got any solution for this problem? Many thanks to you guys.</p>\n"},{"tags":["java","string","sorting","collections"],"comments":[{"owner":{"account_id":1485367,"reputation":122993,"user_id":1393766,"display_name":"Pshemo"},"score":2,"creation_date":1669206590,"post_id":74546731,"comment_id":131591096,"body_markdown":"Change `Collection&lt;Person&gt; people` to `List&lt;Person&gt; people` which will let you use `people.sort(Comparator.comparing(Object::toString))`. Currently you are sorting array created via `people.toArray()`, not `people` list itself.","body":"Change <code>Collection&lt;Person&gt; people</code> to <code>List&lt;Person&gt; people</code> which will let you use <code>people.sort(Comparator.comparing(Object::toString))</code>. Currently you are sorting array created via <code>people.toArray()</code>, not <code>people</code> list itself."}],"answers":[{"comments":[{"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"score":2,"creation_date":1669206604,"post_id":74546794,"comment_id":131591104,"body_markdown":"Slightly shorter: `people.sort(Comparator.comparing(Person::toString))`.","body":"Slightly shorter: <code>people.sort(Comparator.comparing(Person::toString))</code>."},{"owner":{"account_id":9763630,"reputation":16595,"user_id":7237884,"display_name":"Panagiotis Bougioukos"},"score":0,"creation_date":1669223234,"post_id":74546794,"comment_id":131597637,"body_markdown":"@user16076953 check my answer as well bellow to get some more insight in `collections` and `arrays`.","body":"@user16076953 check my answer as well bellow to get some more insight in <code>collections</code> and <code>arrays</code>."}],"tags":[],"owner":{"display_name":"user6073886"},"comment_count":2,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1669206546,"creation_date":1669206546,"answer_id":74546794,"question_id":74546731,"body_markdown":"Your problem is that you are converting your Collection/ArrayList to an array and then sort that Array.\r\n\r\nSorting that Array will have no effect on the original ArrayList.\r\n\r\nIf you want to sort your List you first need to declare it as a List, because Collections themself have no predefined order and therefor no sort method for them exists, and then in a second step use the corresponding method to sort that list:\r\n\r\n    public static void main(final String[] args) {\r\n        final List&lt;Person&gt; people = new ArrayList&lt;&gt;();\r\n        \r\n        people.add(new Person(&quot;aaa&quot;, &quot;hhh&quot;));\r\n        people.add(new Person(&quot;aaa&quot;, &quot;aaa&quot;));\r\n        people.add(new Person(&quot;aaa&quot;, &quot;uuu&quot;));\r\n\r\n        Collections.sort(people, Comparator.comparing(Person::toString));\r\n        \r\n        System.out.println(people);\r\n        \r\n    }\r\n\r\nWill output\r\n\r\n&gt; [aaaaaa, aaahhh, aaauuu]","title":"Java - Sorting collection with toString method doesn&#39;t work","body":"<p>Your problem is that you are converting your Collection/ArrayList to an array and then sort that Array.</p>\n<p>Sorting that Array will have no effect on the original ArrayList.</p>\n<p>If you want to sort your List you first need to declare it as a List, because Collections themself have no predefined order and therefor no sort method for them exists, and then in a second step use the corresponding method to sort that list:</p>\n<pre><code>public static void main(final String[] args) {\n    final List&lt;Person&gt; people = new ArrayList&lt;&gt;();\n    \n    people.add(new Person(&quot;aaa&quot;, &quot;hhh&quot;));\n    people.add(new Person(&quot;aaa&quot;, &quot;aaa&quot;));\n    people.add(new Person(&quot;aaa&quot;, &quot;uuu&quot;));\n\n    Collections.sort(people, Comparator.comparing(Person::toString));\n    \n    System.out.println(people);\n    \n}\n</code></pre>\n<p>Will output</p>\n<blockquote>\n<p>[aaaaaa, aaahhh, aaauuu]</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":9763630,"reputation":16595,"user_id":7237884,"display_name":"Panagiotis Bougioukos"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669222505,"creation_date":1669222505,"answer_id":74550443,"question_id":74546731,"body_markdown":"Plot twist\r\n\r\nThe following\r\n\r\n\r\n    public static void main(String[] args) {\r\n    \r\n                Person[] peopleArray = {\r\n                        new Person(&quot;aaa&quot;, &quot;hhh&quot;),\r\n                        new Person(&quot;aaa&quot;, &quot;aaa&quot;),\r\n                        new Person(&quot;aaa&quot;, &quot;uuu&quot;)\r\n                };\r\n    \r\n                Collection&lt;Person&gt; people = Arrays.asList(peopleArray);\r\n    \r\n                Arrays.sort(peopleArray, Comparator.comparing(Object::toString));\r\n    \r\n                System.out.println(people);\r\n            }\r\n\r\nWill print you the `[aaa aaa, aaa hhh, aaa uuu]` which is what you expect.\r\n\r\nIf you don&#39;t sort it and remove the line `Arrays.sort(peopleArray, Comparator.comparing(Object::toString));` it will print you the `[aaa hhh, aaa aaa, aaa uuu]`.\r\n\r\nReason why this would work -&gt; `Arrays.asList()` is backed directly by the array, so when you sort the array you see the same sorting in the collection .\r\n\r\n`java.util.ArrayList()` on the other side is not backed directly by any array that stores the elements since the `ArrayList` supports dynamic list size.","title":"Java - Sorting collection with toString method doesn&#39;t work","body":"<p>Plot twist</p>\n<p>The following</p>\n<pre><code>public static void main(String[] args) {\n\n            Person[] peopleArray = {\n                    new Person(&quot;aaa&quot;, &quot;hhh&quot;),\n                    new Person(&quot;aaa&quot;, &quot;aaa&quot;),\n                    new Person(&quot;aaa&quot;, &quot;uuu&quot;)\n            };\n\n            Collection&lt;Person&gt; people = Arrays.asList(peopleArray);\n\n            Arrays.sort(peopleArray, Comparator.comparing(Object::toString));\n\n            System.out.println(people);\n        }\n</code></pre>\n<p>Will print you the <code>[aaa aaa, aaa hhh, aaa uuu]</code> which is what you expect.</p>\n<p>If you don't sort it and remove the line <code>Arrays.sort(peopleArray, Comparator.comparing(Object::toString));</code> it will print you the <code>[aaa hhh, aaa aaa, aaa uuu]</code>.</p>\n<p>Reason why this would work -&gt; <code>Arrays.asList()</code> is backed directly by the array, so when you sort the array you see the same sorting in the collection .</p>\n<p><code>java.util.ArrayList()</code> on the other side is not backed directly by any array that stores the elements since the <code>ArrayList</code> supports dynamic list size.</p>\n"}],"owner":{"account_id":21774282,"reputation":15,"user_id":16076953,"display_name":"user16076953"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":84,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":74546794,"answer_count":2,"score":0,"last_activity_date":1669222505,"creation_date":1669206187,"question_id":74546731,"body_markdown":"So I&#39;m trying to lexicographically sort this collection but with no success. The same unsorted collection is in the input and the output of the sort method. \r\n\r\n\r\n    class Person {\r\n        \r\n        private String privateName;\r\n        private String lastName;\r\n        \r\n        public Person(String privateName, String lastName) {\r\n            this.privateName = privateName;\r\n            this.lastName = lastName;\r\n        }\r\n        \r\n        public String toString() {\r\n            return privateName + &quot; &quot; + lastName;\r\n        }\r\n    }\r\n    \r\n    class Main {\r\n        public static void main(String[] args) {\r\n            Collection&lt;Person&gt; people = new ArrayList&lt;&gt;();\r\n            \r\n            people.add(new Person(&quot;aaa&quot;, &quot;hhh&quot;));\r\n            people.add(new Person(&quot;aaa&quot;, &quot;aaa&quot;));\r\n            people.add(new Person(&quot;aaa&quot;, &quot;uuu&quot;));\r\n    \r\n            Arrays.sort(people.toArray(), Comparator.comparing(Object::toString));\r\n        }\r\n    }\r\n\r\n\r\nThe order of the elements in the output collection:\r\n&quot;aaa hhh&quot; -&gt; &quot;aaa aaa&quot; -&gt; &quot;aaa uuu&quot; \r\n\r\nWhile I want it to be:\r\n&quot;aaa aaa&quot; -&gt; &quot;aaa hhh&quot; -&gt; &quot;aaa uuu&quot; \r\n\r\nCan somebody tell me why?","title":"Java - Sorting collection with toString method doesn&#39;t work","body":"<p>So I'm trying to lexicographically sort this collection but with no success. The same unsorted collection is in the input and the output of the sort method.</p>\n<pre><code>class Person {\n    \n    private String privateName;\n    private String lastName;\n    \n    public Person(String privateName, String lastName) {\n        this.privateName = privateName;\n        this.lastName = lastName;\n    }\n    \n    public String toString() {\n        return privateName + &quot; &quot; + lastName;\n    }\n}\n\nclass Main {\n    public static void main(String[] args) {\n        Collection&lt;Person&gt; people = new ArrayList&lt;&gt;();\n        \n        people.add(new Person(&quot;aaa&quot;, &quot;hhh&quot;));\n        people.add(new Person(&quot;aaa&quot;, &quot;aaa&quot;));\n        people.add(new Person(&quot;aaa&quot;, &quot;uuu&quot;));\n\n        Arrays.sort(people.toArray(), Comparator.comparing(Object::toString));\n    }\n}\n</code></pre>\n<p>The order of the elements in the output collection:\n&quot;aaa hhh&quot; -&gt; &quot;aaa aaa&quot; -&gt; &quot;aaa uuu&quot;</p>\n<p>While I want it to be:\n&quot;aaa aaa&quot; -&gt; &quot;aaa hhh&quot; -&gt; &quot;aaa uuu&quot;</p>\n<p>Can somebody tell me why?</p>\n"},{"tags":["java","liferay","portlet","liferay-7","portletbridge"],"comments":[{"owner":{"account_id":16878,"reputation":306143,"user_id":37213,"accept_rate":81,"display_name":"duffymo"},"score":0,"creation_date":1669222425,"post_id":74550382,"comment_id":131597336,"body_markdown":"1990s technology.  Who would go back to that?","body":"1990s technology.  Who would go back to that?"},{"owner":{"account_id":11382931,"reputation":41,"user_id":14993633,"display_name":"Sachin"},"score":0,"creation_date":1669224657,"post_id":74550382,"comment_id":131598190,"body_markdown":"yeah. But not sure what latest tech can help to achieve it?","body":"yeah. But not sure what latest tech can help to achieve it?"},{"owner":{"account_id":7701,"reputation":47163,"user_id":13447,"accept_rate":100,"display_name":"Olaf Kock"},"score":0,"creation_date":1669235338,"post_id":74550382,"comment_id":131601272,"body_markdown":"This needs a lot of clarity: You mention (and tag) Liferay, but the direction of what&#39;s included where is absolutely unclear to me. Current Liferay versions make it trivial to embed your own vue application, so you can do whatever you want in that vue app, without relying on server-side integrations. Please see [ask] and edit your question to contain a [mcve]","body":"This needs a lot of clarity: You mention (and tag) Liferay, but the direction of what&#39;s included where is absolutely unclear to me. Current Liferay versions make it trivial to embed your own vue application, so you can do whatever you want in that vue app, without relying on server-side integrations. Please see <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> and edit your question to contain a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}],"owner":{"account_id":11382931,"reputation":41,"user_id":14993633,"display_name":"Sachin"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":25,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1669222152,"creation_date":1669222152,"question_id":74550382,"body_markdown":"I got a requirement where I need to display an other teams jsp page into my application (vue.js/jsp application) in a iframe without using company network. Their url only works in company network. Some team achieved it long back via jboss portlet bridge technology. have no idea it works? Not much material available online as well. I heard liferay can be used but I have no idea about it too. Can some one please help. Thanks ","title":"How to use jboss portlet bridge or liferay bridge?","body":"<p>I got a requirement where I need to display an other teams jsp page into my application (vue.js/jsp application) in a iframe without using company network. Their url only works in company network. Some team achieved it long back via jboss portlet bridge technology. have no idea it works? Not much material available online as well. I heard liferay can be used but I have no idea about it too. Can some one please help. Thanks</p>\n"},{"tags":["java","mongodb","spring-boot","enums"],"comments":[{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1669249117,"post_id":74550333,"comment_id":131604236,"body_markdown":"Tip: By convention, enum objects in Java are named in ALL UPPERCASE. Abiding this convention would make moot your issue.","body":"Tip: By convention, enum objects in Java are named in ALL UPPERCASE. Abiding this convention would make moot your issue."},{"owner":{"account_id":23296940,"reputation":19,"user_id":17378208,"display_name":"Prathap H N"},"score":0,"creation_date":1669902975,"post_id":74550333,"comment_id":131752096,"body_markdown":"Agree ..@BasilBourque.  It is too old code, right now no option to modify it.","body":"Agree ..@BasilBourque.  It is too old code, right now no option to modify it."}],"owner":{"account_id":23296940,"reputation":19,"user_id":17378208,"display_name":"Prathap H N"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":77,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1669221922,"creation_date":1669221922,"question_id":74550333,"body_markdown":"I am unable to fetch the data from the Mongo DB when the enum value (one of the fields) is of a different case in the database.\r\n\r\nMy main class looks like below...\r\n\r\n\r\n```\r\npublic class Test {\r\n\r\n\r\n   public static void main(String[] args){\r\n\r\n   -------\r\n   --------\r\n\r\n   Optional&lt;UserAccount&gt; userAccountInfo= userAccountRepo.findById(id);\r\n\r\n   -------\r\n   --------\r\n\r\n   }\r\n\r\n}\r\n```\r\n\r\n\r\n\r\n```\r\npublic class UserAccount{\r\n\r\n    private String id;\t\r\n    private String firstName;\r\n    private String secondName;\r\n    private AccountStatusEnum status;\r\n    private String address;\r\n    \r\n}\r\n```\r\n\r\n\r\n```\r\npublic enum AccountStatusEnum {\r\n\r\n    created,\r\n    failed,\r\n    inprogress;\r\n  \r\n}\r\n\r\n```\r\n\r\n\r\n```\r\n@Repository\r\npublic interface UserAccountRepo extends MongoRepository&lt;UserAccount, String&gt; {\r\n\r\n    Optional&lt;UserAccount&gt; findById(String id);\r\n\r\n}\r\n```\r\n\r\nData in the collection/table.\r\n\r\n \r\n```\r\n{\r\n  &quot;id&quot;:&quot;0123&quot;,\r\n  &quot;firstName&quot;:&quot;Rama&quot;,\r\n  &quot;lastName&quot;:&quot;Bharath&quot;,\r\n   &quot;status&quot;:&quot;CREATED&quot;,\r\n   &quot;address&quot;:&quot;Bengaluru Dist, Karnataka&quot;\r\n}\r\n\r\n```\r\n\r\nNote: Getting like below \r\n\r\n java.lang.IllegalArgumentException: No enum constant com.test.enums.AccountStatusEnum.CREATED\r\n\r\n\r\n\r\n\r\n\r\n\r\nAdded the below property also to ignore the enum cases, but it didn&#39;t work.\r\n\r\n\r\n```\r\nspring.jackson.mapper.accept-case-insensitive-enums=true\r\n\r\n```\r\n\r\nExpectation: I should be able to retrieve the data from DB, irrespective of cases(upper/lower) in DB.","title":"How to make an enum as a case insensitive file fetching the data from the DB and converting it into java object ? ( serialization/Deserialization)","body":"<p>I am unable to fetch the data from the Mongo DB when the enum value (one of the fields) is of a different case in the database.</p>\n<p>My main class looks like below...</p>\n<pre><code>public class Test {\n\n\n   public static void main(String[] args){\n\n   -------\n   --------\n\n   Optional&lt;UserAccount&gt; userAccountInfo= userAccountRepo.findById(id);\n\n   -------\n   --------\n\n   }\n\n}\n</code></pre>\n<pre><code>public class UserAccount{\n\n    private String id;  \n    private String firstName;\n    private String secondName;\n    private AccountStatusEnum status;\n    private String address;\n    \n}\n</code></pre>\n<pre><code>public enum AccountStatusEnum {\n\n    created,\n    failed,\n    inprogress;\n  \n}\n\n</code></pre>\n<pre><code>@Repository\npublic interface UserAccountRepo extends MongoRepository&lt;UserAccount, String&gt; {\n\n    Optional&lt;UserAccount&gt; findById(String id);\n\n}\n</code></pre>\n<p>Data in the collection/table.</p>\n<pre><code>{\n  &quot;id&quot;:&quot;0123&quot;,\n  &quot;firstName&quot;:&quot;Rama&quot;,\n  &quot;lastName&quot;:&quot;Bharath&quot;,\n   &quot;status&quot;:&quot;CREATED&quot;,\n   &quot;address&quot;:&quot;Bengaluru Dist, Karnataka&quot;\n}\n\n</code></pre>\n<p>Note: Getting like below</p>\n<p>java.lang.IllegalArgumentException: No enum constant com.test.enums.AccountStatusEnum.CREATED</p>\n<p>Added the below property also to ignore the enum cases, but it didn't work.</p>\n<pre><code>spring.jackson.mapper.accept-case-insensitive-enums=true\n\n</code></pre>\n<p>Expectation: I should be able to retrieve the data from DB, irrespective of cases(upper/lower) in DB.</p>\n"},{"tags":["java","spring","spring-boot","stream","java-stream"],"comments":[{"owner":{"account_id":444292,"reputation":1,"user_id":836018,"accept_rate":57,"display_name":"Jack"},"score":0,"creation_date":1669220163,"post_id":74549501,"comment_id":131596431,"body_markdown":"@Chaosfire Not actually, I want to get the 3 countries that has the most cities.","body":"@Chaosfire Not actually, I want to get the 3 countries that has the most cities."}],"answers":[{"comments":[{"owner":{"account_id":444292,"reputation":1,"user_id":836018,"accept_rate":57,"display_name":"Jack"},"score":0,"creation_date":1669221278,"post_id":74549752,"comment_id":131596844,"body_markdown":"Thanks a lot, voted up, it would probably solve the problem. Just a question; I am using OpenCSV and actually think of create such a kind of filtering and mapping the result. But is &quot;fetching the data and getting result by using Java Stream is a better way?&quot; I just thought to filter the necessary records while reading CSV rows, but not sure if it would be possible by OpenCSV (I could not find a similar example). Any idea?","body":"Thanks a lot, voted up, it would probably solve the problem. Just a question; I am using OpenCSV and actually think of create such a kind of filtering and mapping the result. But is &quot;fetching the data and getting result by using Java Stream is a better way?&quot; I just thought to filter the necessary records while reading CSV rows, but not sure if it would be possible by OpenCSV (I could not find a similar example). Any idea?"},{"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"score":0,"creation_date":1669221968,"post_id":74549752,"comment_id":131597134,"body_markdown":"@gonzales Short answer: if performance matters, you need to measure it.","body":"@gonzales Short answer: if performance matters, you need to measure it."},{"owner":{"account_id":444292,"reputation":1,"user_id":836018,"accept_rate":57,"display_name":"Jack"},"score":0,"creation_date":1669229557,"post_id":74549752,"comment_id":131599748,"body_markdown":"Thanks a lot for the update. At the last step I am trying to use these country codes to get cities (I can just use these codes to retrieve cities as there is no FK other than codes). So, in this scene, should I use `ParallelStream` or `CompletableFuture`? (if there is database, I would merge the data on Database side, but for this, I read data from multiple CSV files). Any idea?","body":"Thanks a lot for the update. At the last step I am trying to use these country codes to get cities (I can just use these codes to retrieve cities as there is no FK other than codes). So, in this scene, should I use <code>ParallelStream</code> or <code>CompletableFuture</code>? (if there is database, I would merge the data on Database side, but for this, I read data from multiple CSV files). Any idea?"},{"owner":{"account_id":444292,"reputation":1,"user_id":836018,"accept_rate":57,"display_name":"Jack"},"score":0,"creation_date":1669230330,"post_id":74549752,"comment_id":131599995,"body_markdown":"I mean do you have any idea for this separate question? &gt;&gt;&gt; https://stackoverflow.com/questions/74551863/java-stream-merging-multiple-results-read-from-separate-csv-files","body":"I mean do you have any idea for this separate question? &gt;&gt;&gt; <a href=\"https://stackoverflow.com/questions/74551863/java-stream-merging-multiple-results-read-from-separate-csv-files\" title=\"java stream merging multiple results read from separate csv files\">stackoverflow.com/questions/74551863/&hellip;</a>"},{"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"score":0,"creation_date":1669231715,"post_id":74549752,"comment_id":131600329,"body_markdown":"@gonzales There are many things mixed together. CSV-files and Database. If you have a Database and you have to process a large amount of data, the sure it&#39;s better to process it on the database side and retrieve only a small portion. If you&#39;re forced to do heavy computations (something CPU-intensive operations), you can make use then you can make use of the parallel streams. On the other hand, `ComplitableFuture` is a tool which is focused on arranging asynchronous execution, if you not performing a number-crunching task but calling something - go with a ComplitableFuture.","body":"@gonzales There are many things mixed together. CSV-files and Database. If you have a Database and you have to process a large amount of data, the sure it&#39;s better to process it on the database side and retrieve only a small portion. If you&#39;re forced to do heavy computations (something CPU-intensive operations), you can make use then you can make use of the parallel streams. On the other hand, <code>ComplitableFuture</code> is a tool which is focused on arranging asynchronous execution, if you not performing a number-crunching task but calling something - go with a ComplitableFuture."},{"owner":{"account_id":444292,"reputation":1,"user_id":836018,"accept_rate":57,"display_name":"Jack"},"score":0,"creation_date":1669232101,"post_id":74549752,"comment_id":131600439,"body_markdown":"Thanks a lot for your useful explanations. There is some points that I need to inform you. Could you please clarify me about them? &gt;&gt;&gt;","body":"Thanks a lot for your useful explanations. There is some points that I need to inform you. Could you please clarify me about them? &gt;&gt;&gt;"},{"owner":{"account_id":444292,"reputation":1,"user_id":836018,"accept_rate":57,"display_name":"Jack"},"score":0,"creation_date":1669232222,"post_id":74549752,"comment_id":131600460,"body_markdown":"**1.**  I don&#39;t have a database and read data from multiple CSV files. I think there is no need to use a database just for reading these CSV files. Because the data may be changed and each time I will need to read the CSV files even if the previously read data had been saved to the database. Is that right?","body":"<b>1.</b>  I don&#39;t have a database and read data from multiple CSV files. I think there is no need to use a database just for reading these CSV files. Because the data may be changed and each time I will need to read the CSV files even if the previously read data had been saved to the database. Is that right?"},{"owner":{"account_id":444292,"reputation":1,"user_id":836018,"accept_rate":57,"display_name":"Jack"},"score":0,"creation_date":1669232309,"post_id":74549752,"comment_id":131600480,"body_markdown":"**2.** I can use parallel streams or ComplitableFuture maybe. **BUT**, I need to use the result of first query in my second query as a parameter. So, in this case, should I still use these methods? Or should I use a different approach in Java Stream?","body":"<b>2.</b> I can use parallel streams or ComplitableFuture maybe. <b>BUT</b>, I need to use the result of first query in my second query as a parameter. So, in this case, should I still use these methods? Or should I use a different approach in Java Stream?"},{"owner":{"account_id":444292,"reputation":1,"user_id":836018,"accept_rate":57,"display_name":"Jack"},"score":0,"creation_date":1669232365,"post_id":74549752,"comment_id":131600495,"body_markdown":"You may share your next suggestion for this question on that page (except from the last 2 questions): https://stackoverflow.com/questions/74551863/java-stream-merging-multiple-results-read-from-separate-csv-files?noredirect=1#comment131600372_74551863","body":"You may share your next suggestion for this question on that page (except from the last 2 questions): <a href=\"https://stackoverflow.com/questions/74551863/java-stream-merging-multiple-results-read-from-separate-csv-files?noredirect=1#comment131600372_74551863\" title=\"java stream merging multiple results read from separate csv files\">stackoverflow.com/questions/74551863/&hellip;</a>"},{"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"score":0,"creation_date":1669236019,"post_id":74549752,"comment_id":131601415,"body_markdown":"@gonzales I&#39;ve mentioned database only because you&#39;ve mentioned it. *&quot;I need to use the result of first query in my second query as a parameter.&quot;* that means that these operations should be performed sequentially, one after another. You can chain these steps using `CompletableFuture`. Since is primarily focused on code, a code-attempt (or description in pseudocode of how dialing with files), would bring value to the linked question.","body":"@gonzales I&#39;ve mentioned database only because you&#39;ve mentioned it. <i>&quot;I need to use the result of first query in my second query as a parameter.&quot;</i> that means that these operations should be performed sequentially, one after another. You can chain these steps using <code>CompletableFuture</code>. Since is primarily focused on code, a code-attempt (or description in pseudocode of how dialing with files), would bring value to the linked question."},{"owner":{"account_id":444292,"reputation":1,"user_id":836018,"accept_rate":57,"display_name":"Jack"},"score":0,"creation_date":1669239556,"post_id":74549752,"comment_id":131602334,"body_markdown":"I will try `CompletableFuture` and hope it solves my problem. On the other hand,I think there is never need to use database for reading CSV data, right?","body":"I will try <code>CompletableFuture</code> and hope it solves my problem. On the other hand,I think there is never need to use database for reading CSV data, right?"},{"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"score":0,"creation_date":1669589305,"post_id":74549752,"comment_id":131670176,"body_markdown":"@gonzales If you&#39;re fine with storing data as CSV files, you don&#39;t need a DB. If you have some doubts, you can ask on https://softwareengineering.meta.stackexchange.com/ or http://dba.stackexchange.com. It would be more suitable for these site then for SO, since it&#39;s an architectural problem.","body":"@gonzales If you&#39;re fine with storing data as CSV files, you don&#39;t need a DB. If you have some doubts, you can ask on <a href=\"https://softwareengineering.meta.stackexchange.com/\">softwareengineering.meta.stackexchange.com</a> or <a href=\"http://dba.stackexchange.com\">dba.stackexchange.com</a>. It would be more suitable for these site then for SO, since it&#39;s an architectural problem."},{"owner":{"account_id":444292,"reputation":1,"user_id":836018,"accept_rate":57,"display_name":"Jack"},"score":0,"creation_date":1669652920,"post_id":74549752,"comment_id":131685651,"body_markdown":"Thanks a lot for these useful helps. Actually I just need to read data, not need to write. For this reason, I think no need to use database. However, I am wondering if I need to use a text file, etc. to keep the read data temporarily instead of using Buffered Memory during csv file read. Any idea for that?","body":"Thanks a lot for these useful helps. Actually I just need to read data, not need to write. For this reason, I think no need to use database. However, I am wondering if I need to use a text file, etc. to keep the read data temporarily instead of using Buffered Memory during csv file read. Any idea for that?"}],"tags":[],"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"comment_count":13,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1669221787,"creation_date":1669219237,"answer_id":74549752,"question_id":74549501,"body_markdown":"# Sorting\r\n\r\nThe simplest approach would be to group the data by `countryCode` by generating an auxiliary map of type `Map&lt;String, Long&gt;`, associating each `countryCode` with the count of cities.\r\n\r\nThen generate a stream over the map entries and sort it in the reverse order by *Value* (*i.e. in Descending order of the city count*).\r\n\r\nThat how it might be implemented:\r\n\r\n    public static List&lt;String&gt; getTopNCodes(List&lt;City&gt; cities,\r\n                                            int limit) {\r\n        return cities.stream()\r\n            .collect(Collectors.groupingBy( // creates a Map&lt;String, Long&gt;\r\n                City::getCountryCode,\r\n                Collectors.counting()\r\n            ))\r\n            .entrySet().stream()\r\n            .sorted(Map.Entry.&lt;String, Long&gt;comparingByValue().reversed())\r\n            .limit(limit) // &lt;- retain top N\r\n            .map(Map.Entry::getKey)\r\n            .toList();\r\n    }\r\n\r\nTime complexity of this approach is **O(n * log n)** doe to sorting, which would be downside would be if number of elements to retrieve it small (like `3`), meanwhile the data is massive.\r\n\r\nWe can do better.\r\n\r\n# Partial sorting using Custom Collector\r\n\r\nInstead of sorting all entries of the auxiliary map, we can perform partial sorting using `PriorityQueue` (this class is an implementation of the *Binary Heap* offered by JDK).\r\n\r\nFor that, we can implement a custom collector using static factory method `Collector.of()`.\r\n\r\nAn instance of `PriorityQueue` would be used as a mutable container of the Collector. Each map entry from the stream would be compared with the *root* element of the Heap. If the element is greater (entry holds a larger count) the next entry gets added to the queue root. And in case if the limit is exceeded, the root element should be removed.\r\n\r\nTo make the code reusable we can gentrify it. The first part (creating an intermediate map with Values representing frequencies of Keys) remains the same.\r\n\r\n    public static &lt;T, K&gt; List&lt;K&gt; getTopN(List&lt;T&gt; list,\r\n                                              Function&lt;T, K&gt; keyExtractor,\r\n                                              int limit) {\r\n        return list.stream()\r\n            .collect(Collectors.groupingBy(\r\n                keyExtractor,\r\n                Collectors.counting()\r\n            ))\r\n            .entrySet().stream()\r\n            .collect(getMaxN(\r\n                limit,\r\n                Map.Entry.&lt;K, Long&gt;comparingByValue().reversed(),\r\n                Map.Entry::getKey\r\n            ));\r\n    }\r\n\r\nMin Heap-based Collector:\r\n\r\n    public static &lt;T, R&gt; Collector&lt;T, ?, List&lt;R&gt;&gt; getMaxN(int size,\r\n                                                          Comparator&lt;T&gt; comparator,\r\n                                                          Function&lt;T, R&gt; keyExtractor) {\r\n        \r\n        return Collector.of(\r\n            () -&gt; new PriorityQueue&lt;&gt;(comparator),\r\n            (Queue&lt;T&gt; queue, T next) -&gt; tryAdd(queue, next, comparator, size),\r\n            (Queue&lt;T&gt; left, Queue&lt;T&gt; right) -&gt; {\r\n                right.forEach(next -&gt; tryAdd(left, next, comparator, size));\r\n                return left;\r\n            },\r\n            (Queue&lt;T&gt; queue) -&gt; queue.stream().map(keyExtractor).toList(),\r\n            Collector.Characteristics.UNORDERED\r\n        );\r\n    }\r\n\r\n    public static &lt;T&gt; void tryAdd(Queue&lt;T&gt; queue, T next, Comparator&lt;T&gt; comparator, int size) {\r\n        if (queue.size() == size &amp;&amp; comparator.compare(queue.element(), next) &lt; 0)\r\n            queue.remove(); // if next value is greater than the smallest element in the queue and max size has been exceeded the smallest element needs to be removed from the queue\r\n        if (queue.size() &lt; size) queue.add(next);\r\n    }","title":"Java Stream group by a field and order by this field count?","body":"<h1>Sorting</h1>\n<p>The simplest approach would be to group the data by <code>countryCode</code> by generating an auxiliary map of type <code>Map&lt;String, Long&gt;</code>, associating each <code>countryCode</code> with the count of cities.</p>\n<p>Then generate a stream over the map entries and sort it in the reverse order by <em>Value</em> (<em>i.e. in Descending order of the city count</em>).</p>\n<p>That how it might be implemented:</p>\n<pre><code>public static List&lt;String&gt; getTopNCodes(List&lt;City&gt; cities,\n                                        int limit) {\n    return cities.stream()\n        .collect(Collectors.groupingBy( // creates a Map&lt;String, Long&gt;\n            City::getCountryCode,\n            Collectors.counting()\n        ))\n        .entrySet().stream()\n        .sorted(Map.Entry.&lt;String, Long&gt;comparingByValue().reversed())\n        .limit(limit) // &lt;- retain top N\n        .map(Map.Entry::getKey)\n        .toList();\n}\n</code></pre>\n<p>Time complexity of this approach is <strong>O(n * log n)</strong> doe to sorting, which would be downside would be if number of elements to retrieve it small (like <code>3</code>), meanwhile the data is massive.</p>\n<p>We can do better.</p>\n<h1>Partial sorting using Custom Collector</h1>\n<p>Instead of sorting all entries of the auxiliary map, we can perform partial sorting using <code>PriorityQueue</code> (this class is an implementation of the <em>Binary Heap</em> offered by JDK).</p>\n<p>For that, we can implement a custom collector using static factory method <code>Collector.of()</code>.</p>\n<p>An instance of <code>PriorityQueue</code> would be used as a mutable container of the Collector. Each map entry from the stream would be compared with the <em>root</em> element of the Heap. If the element is greater (entry holds a larger count) the next entry gets added to the queue root. And in case if the limit is exceeded, the root element should be removed.</p>\n<p>To make the code reusable we can gentrify it. The first part (creating an intermediate map with Values representing frequencies of Keys) remains the same.</p>\n<pre><code>public static &lt;T, K&gt; List&lt;K&gt; getTopN(List&lt;T&gt; list,\n                                          Function&lt;T, K&gt; keyExtractor,\n                                          int limit) {\n    return list.stream()\n        .collect(Collectors.groupingBy(\n            keyExtractor,\n            Collectors.counting()\n        ))\n        .entrySet().stream()\n        .collect(getMaxN(\n            limit,\n            Map.Entry.&lt;K, Long&gt;comparingByValue().reversed(),\n            Map.Entry::getKey\n        ));\n}\n</code></pre>\n<p>Min Heap-based Collector:</p>\n<pre><code>public static &lt;T, R&gt; Collector&lt;T, ?, List&lt;R&gt;&gt; getMaxN(int size,\n                                                      Comparator&lt;T&gt; comparator,\n                                                      Function&lt;T, R&gt; keyExtractor) {\n    \n    return Collector.of(\n        () -&gt; new PriorityQueue&lt;&gt;(comparator),\n        (Queue&lt;T&gt; queue, T next) -&gt; tryAdd(queue, next, comparator, size),\n        (Queue&lt;T&gt; left, Queue&lt;T&gt; right) -&gt; {\n            right.forEach(next -&gt; tryAdd(left, next, comparator, size));\n            return left;\n        },\n        (Queue&lt;T&gt; queue) -&gt; queue.stream().map(keyExtractor).toList(),\n        Collector.Characteristics.UNORDERED\n    );\n}\n\npublic static &lt;T&gt; void tryAdd(Queue&lt;T&gt; queue, T next, Comparator&lt;T&gt; comparator, int size) {\n    if (queue.size() == size &amp;&amp; comparator.compare(queue.element(), next) &lt; 0)\n        queue.remove(); // if next value is greater than the smallest element in the queue and max size has been exceeded the smallest element needs to be removed from the queue\n    if (queue.size() &lt; size) queue.add(next);\n}\n</code></pre>\n"}],"owner":{"account_id":444292,"reputation":1,"user_id":836018,"accept_rate":57,"display_name":"Jack"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":654,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":74549752,"answer_count":1,"score":1,"last_activity_date":1669221787,"creation_date":1669218270,"question_id":74549501,"body_markdown":"\r\n\r\nI am trying to get countryCode of the 3 countries that has max cities by usimng Java Stream on the following entity:\r\n\r\n\r\n***City:***\r\n\r\n```\r\nid   | name     | countryCode |\r\n------------------------------\r\n1    | Berlin   | DE          |\r\n2    | Munich   | DE          |\r\n3    | K&#246;ln     | DE          |\r\n4    | Paris    | FR          |\r\n5    | Kopenhag | DK          |\r\n...\r\n```\r\n\r\n\r\n\r\n\r\nI tried something, but not working as expected. So, what is the most proper way to get top 3 country code (top 3 mostly repeated country code)? \r\n\r\n```\r\nfinal Map&lt;String, City&gt; airportCodes2 = airportService.getCities().stream()\r\n                .map(City::getCountryCode, Function.identity())\r\n                .toMap();\r\n```","title":"Java Stream group by a field and order by this field count?","body":"<p>I am trying to get countryCode of the 3 countries that has max cities by usimng Java Stream on the following entity:</p>\n<p><em><strong>City:</strong></em></p>\n<pre><code>id   | name     | countryCode |\n------------------------------\n1    | Berlin   | DE          |\n2    | Munich   | DE          |\n3    | Köln     | DE          |\n4    | Paris    | FR          |\n5    | Kopenhag | DK          |\n...\n</code></pre>\n<p>I tried something, but not working as expected. So, what is the most proper way to get top 3 country code (top 3 mostly repeated country code)?</p>\n<pre><code>final Map&lt;String, City&gt; airportCodes2 = airportService.getCities().stream()\n                .map(City::getCountryCode, Function.identity())\n                .toMap();\n</code></pre>\n"},{"tags":["java","netbeans","jframe"],"comments":[{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":0,"creation_date":1669230161,"post_id":74549509,"comment_id":131599945,"body_markdown":"You can use `SwingUtilties.windowForComponent(....)` to get the top level container for a given component.","body":"You can use <code>SwingUtilties.windowForComponent(....)</code> to get the top level container for a given component."}],"answers":[{"tags":[],"owner":{"account_id":14781952,"reputation":120,"user_id":10675247,"display_name":"Philippe Fery"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1669221614,"creation_date":1669221614,"answer_id":74550265,"question_id":74549509,"body_markdown":"You should create you JFrame instance in a way that it will be visible in your whole class.\r\n\r\nYou can achieve this by declaring a JFrame as a private member of your class. Then you will be able to access it in all class methods:\r\n\r\n    \r\nimport java.awt.Color;\r\nimport java.awt.Dimension;\r\n\r\nimport javax.swing.JFrame;\r\nimport javax.swing.JPanel;\r\n\r\npublic class JFrameDemo {\r\n\tprivate JFrame frame;\r\n\r\n\tpublic JFrameDemo() {\r\n\t\tthis.frame=new JFrame(&quot;Demo #1&quot;);\r\n\t\tinitComponents();\r\n\t\tcreated();\r\n\t}\r\n\r\n\tprivate void initComponents() {\r\n\t\t// Do your stuff here\r\n\t}\r\n\r\n\tpublic void created() {\r\n\t\tint degisken = 1;\r\n\t\tJPanel panel = new JPanel();\r\n\t\tpanel.setBounds(0, 0, 100, 100);\r\n\t\tpanel.setPreferredSize(new Dimension(640, 480));\r\n\t\tpanel.setBackground(new Color(255, 128, 112));\r\n\t\tthis.frame.getContentPane().add(panel);\r\n\t\tthis.frame.pack();\r\n\t\tthis.frame.setVisible(true);\r\n\t}\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tJFrameDemo frameDemo = new JFrameDemo();\r\n\t}\r\n}\r\n\r\n\r\nAnother solution is that your class extends JFrame. This way, you will access the JFrame instance using the `this` keyword because `this` is your class and thus your JFrame:\r\n\r\n    import java.awt.Color;\r\nimport java.awt.Dimension;\r\n\r\nimport javax.swing.JFrame;\r\nimport javax.swing.JPanel;\r\n\r\npublic class JFrameDemo2 extends JFrame {\r\n\r\n\tpublic JFrameDemo2() {\r\n\t\tsuper(&quot;Demo #2&quot;);\r\n\t\tinitComponents();\r\n\t\tcreated();\r\n\t}\r\n\r\n\tprivate void initComponents() {\r\n\t\t// Do your stuff here\r\n\t}\r\n\r\n\tpublic void created() {\r\n\t\tint degisken = 1;\r\n\t\tJPanel panel = new JPanel();\r\n\t\tpanel.setBounds(0, 0, 100, 100);\r\n\t\tpanel.setPreferredSize(new Dimension(640, 480));\r\n\t\tpanel.setBackground(new Color(255, 128, 112));\r\n\t\tthis.getContentPane().add(panel);\r\n\r\n\t}\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tJFrameDemo2 frameDemo = new JFrameDemo2();\r\n\t\tframeDemo.pack();\r\n\t\tframeDemo.setVisible(true);\r\n\t}\r\n}\r\n\r\nAnother remark: don&#39;t add your component directly on your JFrame but on the underlying container:\r\n\r\n    yourFrameInstance.getContentPane().add(yourComponentInstance)","title":"Selecting JFrame without using &#39;this&#39; command","body":"<p>You should create you JFrame instance in a way that it will be visible in your whole class.</p>\n<p>You can achieve this by declaring a JFrame as a private member of your class. Then you will be able to access it in all class methods:</p>\n<p>import java.awt.Color;\nimport java.awt.Dimension;</p>\n<p>import javax.swing.JFrame;\nimport javax.swing.JPanel;</p>\n<p>public class JFrameDemo {\nprivate JFrame frame;</p>\n<pre><code>public JFrameDemo() {\n    this.frame=new JFrame(&quot;Demo #1&quot;);\n    initComponents();\n    created();\n}\n\nprivate void initComponents() {\n    // Do your stuff here\n}\n\npublic void created() {\n    int degisken = 1;\n    JPanel panel = new JPanel();\n    panel.setBounds(0, 0, 100, 100);\n    panel.setPreferredSize(new Dimension(640, 480));\n    panel.setBackground(new Color(255, 128, 112));\n    this.frame.getContentPane().add(panel);\n    this.frame.pack();\n    this.frame.setVisible(true);\n}\n\npublic static void main(String[] args) {\n    JFrameDemo frameDemo = new JFrameDemo();\n}\n</code></pre>\n<p>}</p>\n<p>Another solution is that your class extends JFrame. This way, you will access the JFrame instance using the <code>this</code> keyword because <code>this</code> is your class and thus your JFrame:</p>\n<pre><code>import java.awt.Color;\n</code></pre>\n<p>import java.awt.Dimension;</p>\n<p>import javax.swing.JFrame;\nimport javax.swing.JPanel;</p>\n<p>public class JFrameDemo2 extends JFrame {</p>\n<pre><code>public JFrameDemo2() {\n    super(&quot;Demo #2&quot;);\n    initComponents();\n    created();\n}\n\nprivate void initComponents() {\n    // Do your stuff here\n}\n\npublic void created() {\n    int degisken = 1;\n    JPanel panel = new JPanel();\n    panel.setBounds(0, 0, 100, 100);\n    panel.setPreferredSize(new Dimension(640, 480));\n    panel.setBackground(new Color(255, 128, 112));\n    this.getContentPane().add(panel);\n\n}\n\npublic static void main(String[] args) {\n    JFrameDemo2 frameDemo = new JFrameDemo2();\n    frameDemo.pack();\n    frameDemo.setVisible(true);\n}\n</code></pre>\n<p>}</p>\n<p>Another remark: don't add your component directly on your JFrame but on the underlying container:</p>\n<pre><code>yourFrameInstance.getContentPane().add(yourComponentInstance)\n</code></pre>\n"}],"owner":{"account_id":26606857,"reputation":1,"user_id":20227546,"display_name":"Abdullah Yeşil"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":27,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1669221614,"creation_date":1669218333,"question_id":74549509,"body_markdown":"```\r\n\r\n```\r\n        \r\n\r\n```\r\n public main() {\r\n        initComponents();\r\n JPanel panel=new JPanel();\r\n        panel.setBounds(0, 0, 100, 100);\r\n        panel.setBackground(Jtrue);\r\n        this.add(panel);\r\n}\r\n```\r\n\r\n```\r\n\r\n```\r\n\r\nI am able to add Jframe object using this command\r\n\r\n\r\nHowever, when I write this in a separate method, I cannot add because the &#39;this&#39; method is inside that object.\r\n\r\n\r\n```\r\n   public void created(){\r\n        \r\n        \r\n        int degisken=1;\r\n        JPanel panel=new JPanel();\r\n        panel.setBounds(0, 0, 100, 100);\r\n        panel.setBackground(Jtrue);\r\n        this.add(panel);\r\n       \r\n      \r\n      \r\n    }\r\n    \r\n```\r\nHow can I select that jframe instead of &#39;this&#39;\r\n\r\n\r\n\r\n\r\nI don&#39;t want to create a new jframe because there is already one\r\n","title":"Selecting JFrame without using &#39;this&#39; command","body":"<pre><code>\n</code></pre>\n<pre><code> public main() {\n        initComponents();\n JPanel panel=new JPanel();\n        panel.setBounds(0, 0, 100, 100);\n        panel.setBackground(Jtrue);\n        this.add(panel);\n}\n</code></pre>\n<pre><code>\n</code></pre>\n<p>I am able to add Jframe object using this command</p>\n<p>However, when I write this in a separate method, I cannot add because the 'this' method is inside that object.</p>\n<pre><code>   public void created(){\n        \n        \n        int degisken=1;\n        JPanel panel=new JPanel();\n        panel.setBounds(0, 0, 100, 100);\n        panel.setBackground(Jtrue);\n        this.add(panel);\n       \n      \n      \n    }\n    \n</code></pre>\n<p>How can I select that jframe instead of 'this'</p>\n<p>I don't want to create a new jframe because there is already one</p>\n"},{"tags":["java","android","android-fragments","android-intent","android-activity"],"answers":[{"comments":[{"owner":{"account_id":27007195,"reputation":51,"user_id":20567458,"display_name":"YOUSSEF"},"score":0,"creation_date":1669080980,"post_id":74526527,"comment_id":131557312,"body_markdown":"No, I just implemented Serializable now but I&#39;m still getting the same problem, for the second notice I don&#39;t understand you very well, can you please explain more?","body":"No, I just implemented Serializable now but I&#39;m still getting the same problem, for the second notice I don&#39;t understand you very well, can you please explain more?"}],"tags":[],"owner":{"account_id":24296999,"reputation":169,"user_id":18241066,"display_name":"花未开"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669080149,"creation_date":1669080149,"answer_id":74526527,"question_id":74526167,"body_markdown":"- Is Category serialized?\r\n- You can use BroadcastReceiver as an internal class, and then update the data of Adpater when it receives the data, because the code runs very fast, and it is not necessary to register for monitoring, and it will be processed immediately.","title":"Passing data from Activity to Fragment using AsyncTask - Android","body":"<ul>\n<li>Is Category serialized?</li>\n<li>You can use BroadcastReceiver as an internal class, and then update the data of Adpater when it receives the data, because the code runs very fast, and it is not necessary to register for monitoring, and it will be processed immediately.</li>\n</ul>\n"},{"comments":[{"owner":{"account_id":27007195,"reputation":51,"user_id":20567458,"display_name":"YOUSSEF"},"score":0,"creation_date":1669081416,"post_id":74526611,"comment_id":131557377,"body_markdown":"Thank you for the response, as I I know the UI is initialized in the onCreateView method of the Fragment lifecycle, that&#39;s why I tried to set the adapter and initialization there, but what I&#39;m missing?","body":"Thank you for the response, as I I know the UI is initialized in the onCreateView method of the Fragment lifecycle, that&#39;s why I tried to set the adapter and initialization there, but what I&#39;m missing?"},{"owner":{"account_id":26487448,"reputation":206,"user_id":20125791,"display_name":"Android Newbie A"},"score":0,"creation_date":1669081470,"post_id":74526611,"comment_id":131557389,"body_markdown":"The problem is, you have broadcast the message before the receiver has initialised.","body":"The problem is, you have broadcast the message before the receiver has initialised."},{"owner":{"account_id":26487448,"reputation":206,"user_id":20125791,"display_name":"Android Newbie A"},"score":0,"creation_date":1669081514,"post_id":74526611,"comment_id":131557398,"body_markdown":"It like you have called a phone number in the Activity, but the phone number is still not ready until the Fragment is run.","body":"It like you have called a phone number in the Activity, but the phone number is still not ready until the Fragment is run."},{"owner":{"account_id":26487448,"reputation":206,"user_id":20125791,"display_name":"Android Newbie A"},"score":0,"creation_date":1669081745,"post_id":74526611,"comment_id":131557428,"body_markdown":"Further, I believe revert the ordering of calling  `manager.sendBroadcast(intent);` &amp;\n        `replaceFragment(new HomeFragment());` may still lead to the issue. Since new HomeFragment requires time and the receiver may still not ready when you broadcast the message.","body":"Further, I believe revert the ordering of calling  <code>manager.sendBroadcast(intent);</code> &amp;         <code>replaceFragment(new HomeFragment());</code> may still lead to the issue. Since new HomeFragment requires time and the receiver may still not ready when you broadcast the message."},{"owner":{"account_id":27007195,"reputation":51,"user_id":20567458,"display_name":"YOUSSEF"},"score":0,"creation_date":1669118073,"post_id":74526611,"comment_id":131566399,"body_markdown":"The TimeTask Test is also giving me an **NullPointerException&quot;&quot;, I tried also to revert the order","body":"The TimeTask Test is also giving me an **NullPointerException&quot;&quot;, I tried also to revert the order"}],"tags":[],"owner":{"account_id":26487448,"reputation":206,"user_id":20125791,"display_name":"Android Newbie A"},"comment_count":5,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669081418,"creation_date":1669081036,"answer_id":74526611,"question_id":74526167,"body_markdown":"I guess the way you pass the data from `MainActivity` to `HomeFragment` is incorrect.\r\n\r\n**WHAT YOU EXPECT**\r\n\r\n1. Call `MainActivity#GetBooksAsync`\r\n2. Wait till `onPostExecute` has been called\r\n3. `HomeFragment` is ready to receive the broadcast message, then update UI\r\n4. Broadcast the message from `MainActivity` to the fragment\r\n\r\n**WHAT IS HAPPENING HERE**\r\n1. Call `MainActivity#GetBooksAsync`\r\n2. Wait till `onPostExecute` has been called\r\n3. Broadcast the message from `MainActivity`. There is no receiver to receive this message!\r\n4. `HomeFragment` is ready to receive the broadcast message, then update UI\r\n\r\n---\r\n**HOW SHALL YOU PASS THE DATA THEN?**\r\n\r\nThere are several way. \r\n\r\n1. Broadcast data between the UI component like the things you did. But you will **need to beaware the life cycle of the components**. That is, when you broadcast the data, the receiver must already init and the UI component is in active.\r\n\r\n2. Build a singleton class to store the data. Your activity and fragment treats the singleton class as a common place for the data storage.\r\n\r\n3. Use **Intent** and the **extra** property to pass the data IF the data size is small enough.\r\n\r\n4. Use LiveData. I believe it is the most modern way recommended by the community. Though I am not sure how its work.\r\n\r\n----\r\n\r\nTo verify the fact that it is an life cycle issue,\r\n\r\nyou can try to add a delay before you sending the broadcast message.\r\n\r\n```\r\nclass GetBooksAsync extends AsyncTask&lt;Void, Void, Void&gt; {\r\n...\r\n    @Override\r\n    protected void onPostExecute(Void aVoid) {\r\n        super.onPostExecute(aVoid);\r\n        Intent intent = new Intent(&quot;com.android.mainapp&quot;);\r\n        intent.putExtra(&quot;categories&quot;, categories);\r\n        \r\n        TimerTask task = new TimerTask() {\r\n            @Override\r\n            public void run() {\r\n                manager.sendBroadcast(intent);\r\n            }\r\n        };\r\n\r\n        Timer timer = new Timer();\r\n        timer.schedule(task, 5 * 1000); // Delay the broadcast after 5 seconds\r\n\r\n        \r\n        replaceFragment(new HomeFragment());\r\n    }\r\n\r\n\r\n\r\n```","title":"Passing data from Activity to Fragment using AsyncTask - Android","body":"<p>I guess the way you pass the data from <code>MainActivity</code> to <code>HomeFragment</code> is incorrect.</p>\n<p><strong>WHAT YOU EXPECT</strong></p>\n<ol>\n<li>Call <code>MainActivity#GetBooksAsync</code></li>\n<li>Wait till <code>onPostExecute</code> has been called</li>\n<li><code>HomeFragment</code> is ready to receive the broadcast message, then update UI</li>\n<li>Broadcast the message from <code>MainActivity</code> to the fragment</li>\n</ol>\n<p><strong>WHAT IS HAPPENING HERE</strong></p>\n<ol>\n<li>Call <code>MainActivity#GetBooksAsync</code></li>\n<li>Wait till <code>onPostExecute</code> has been called</li>\n<li>Broadcast the message from <code>MainActivity</code>. There is no receiver to receive this message!</li>\n<li><code>HomeFragment</code> is ready to receive the broadcast message, then update UI</li>\n</ol>\n<hr />\n<p><strong>HOW SHALL YOU PASS THE DATA THEN?</strong></p>\n<p>There are several way.</p>\n<ol>\n<li><p>Broadcast data between the UI component like the things you did. But you will <strong>need to beaware the life cycle of the components</strong>. That is, when you broadcast the data, the receiver must already init and the UI component is in active.</p>\n</li>\n<li><p>Build a singleton class to store the data. Your activity and fragment treats the singleton class as a common place for the data storage.</p>\n</li>\n<li><p>Use <strong>Intent</strong> and the <strong>extra</strong> property to pass the data IF the data size is small enough.</p>\n</li>\n<li><p>Use LiveData. I believe it is the most modern way recommended by the community. Though I am not sure how its work.</p>\n</li>\n</ol>\n<hr />\n<p>To verify the fact that it is an life cycle issue,</p>\n<p>you can try to add a delay before you sending the broadcast message.</p>\n<pre><code>class GetBooksAsync extends AsyncTask&lt;Void, Void, Void&gt; {\n...\n    @Override\n    protected void onPostExecute(Void aVoid) {\n        super.onPostExecute(aVoid);\n        Intent intent = new Intent(&quot;com.android.mainapp&quot;);\n        intent.putExtra(&quot;categories&quot;, categories);\n        \n        TimerTask task = new TimerTask() {\n            @Override\n            public void run() {\n                manager.sendBroadcast(intent);\n            }\n        };\n\n        Timer timer = new Timer();\n        timer.schedule(task, 5 * 1000); // Delay the broadcast after 5 seconds\n\n        \n        replaceFragment(new HomeFragment());\n    }\n\n\n\n</code></pre>\n"},{"comments":[{"owner":{"account_id":27007195,"reputation":51,"user_id":20567458,"display_name":"YOUSSEF"},"score":0,"creation_date":1669117494,"post_id":74526667,"comment_id":131566198,"body_markdown":"I did the same modifications, but I&#39;m still getting a **RecyclerView: No adapter attached; skipping layout** error","body":"I did the same modifications, but I&#39;m still getting a <b>RecyclerView: No adapter attached; skipping layout</b> error"},{"owner":{"account_id":27007195,"reputation":51,"user_id":20567458,"display_name":"YOUSSEF"},"score":0,"creation_date":1669118510,"post_id":74526667,"comment_id":131566540,"body_markdown":"Do you mean `recyclerView.setAdapter(adapter)` in the `onViewCreated` method?","body":"Do you mean <code>recyclerView.setAdapter(adapter)</code> in the <code>onViewCreated</code> method?"},{"owner":{"account_id":24296999,"reputation":169,"user_id":18241066,"display_name":"花未开"},"score":0,"creation_date":1669165974,"post_id":74526667,"comment_id":131581345,"body_markdown":"@YOUSSEF I just modify the code of the questioner. I generally don&#39;t put too many initialization UI operations in createView. I usually put it in onViewCreated","body":"@YOUSSEF I just modify the code of the questioner. I generally don&#39;t put too many initialization UI operations in createView. I usually put it in onViewCreated"},{"owner":{"account_id":27007195,"reputation":51,"user_id":20567458,"display_name":"YOUSSEF"},"score":0,"creation_date":1669238668,"post_id":74526667,"comment_id":131602104,"body_markdown":"i&#39;m still getting the same error for sadly, @Aorlinn&#39;s  answer solved my problem","body":"i&#39;m still getting the same error for sadly, @Aorlinn&#39;s  answer solved my problem"}],"tags":[],"owner":{"account_id":24296999,"reputation":169,"user_id":18241066,"display_name":"花未开"},"comment_count":4,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669081675,"creation_date":1669081675,"answer_id":74526667,"question_id":74526167,"body_markdown":"Your Adapter should be written like this.\r\n```\r\n    class CategoryAdapter extends RecyclerView.Adapter&lt;CategoryAdapter.VHolder&gt;{\r\n        \r\n        private ArrayList&lt;Category&gt; list = new ArrayList&lt;Category&gt;();\r\n\r\n        public void setList(ArrayList&lt;Category&gt; list) {\r\n            this.list = list;\r\n            notifyDataSetChanged();\r\n        }\r\n\r\n        public CategoryAdapter(Context context) {\r\n            // Do not pass a list in the constructor, because the list may be empty\r\n        }\r\n         \r\n        class VHolder extends RecyclerView.ViewHolder {\r\n\r\n            public VHolder(@NonNull View itemView) {\r\n                super(itemView);\r\n            }\r\n        }\r\n        \r\n        ......\r\n}\r\n```\r\n\r\nYour fragment should have a global Adapter for BroadcastReceiver to update data\r\n```\r\npublic class Test extends Fragment {\r\n\r\n    // Create a global Adapter for BroadcastReceiver to call and update data\r\n    private CategoryAdapter adapter;\r\n\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n                             Bundle savedInstanceState) {\r\n        adapter = new CategoryAdapter(getContext());\r\n        initBroadCastReceiver();\r\n        View view = inflater.inflate(R.layout.fragment_home, container, false);\r\n        recyclerView = view.findViewById(R.id.parent_rv);\r\n        recyclerView.setAdapter(categoryAdapter);\r\n        recyclerView.setLayoutManager(new LinearLayoutManager(getContext()));\r\n        return view;\r\n    }\r\n\r\n    private void initBroadCastReceiver() {\r\n        manager = LocalBroadcastManager.getInstance(getContext());\r\n        MyBroadCastReceiver receiver = new MyBroadCastReceiver();\r\n        IntentFilter filter = new IntentFilter();\r\n        filter.addAction(&quot;com.android.mainapp&quot;);\r\n        manager.registerReceiver(receiver,filter);\r\n    }\r\n\r\n    class MyBroadCastReceiver extends BroadcastReceiver {\r\n\r\n        @Override\r\n        public void onReceive(Context context, Intent intent) {\r\n            //get the categories from the intent\r\n            ArrayList&lt;Category&gt; categories = (ArrayList&lt;Category&gt;) intent.getSerializableExtra(&quot;categories&quot;);\r\n            adapter.setList(categories);\r\n        }\r\n    }\r\n}\r\n```","title":"Passing data from Activity to Fragment using AsyncTask - Android","body":"<p>Your Adapter should be written like this.</p>\n<pre><code>    class CategoryAdapter extends RecyclerView.Adapter&lt;CategoryAdapter.VHolder&gt;{\n        \n        private ArrayList&lt;Category&gt; list = new ArrayList&lt;Category&gt;();\n\n        public void setList(ArrayList&lt;Category&gt; list) {\n            this.list = list;\n            notifyDataSetChanged();\n        }\n\n        public CategoryAdapter(Context context) {\n            // Do not pass a list in the constructor, because the list may be empty\n        }\n         \n        class VHolder extends RecyclerView.ViewHolder {\n\n            public VHolder(@NonNull View itemView) {\n                super(itemView);\n            }\n        }\n        \n        ......\n}\n</code></pre>\n<p>Your fragment should have a global Adapter for BroadcastReceiver to update data</p>\n<pre><code>public class Test extends Fragment {\n\n    // Create a global Adapter for BroadcastReceiver to call and update data\n    private CategoryAdapter adapter;\n\n    @Override\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\n                             Bundle savedInstanceState) {\n        adapter = new CategoryAdapter(getContext());\n        initBroadCastReceiver();\n        View view = inflater.inflate(R.layout.fragment_home, container, false);\n        recyclerView = view.findViewById(R.id.parent_rv);\n        recyclerView.setAdapter(categoryAdapter);\n        recyclerView.setLayoutManager(new LinearLayoutManager(getContext()));\n        return view;\n    }\n\n    private void initBroadCastReceiver() {\n        manager = LocalBroadcastManager.getInstance(getContext());\n        MyBroadCastReceiver receiver = new MyBroadCastReceiver();\n        IntentFilter filter = new IntentFilter();\n        filter.addAction(&quot;com.android.mainapp&quot;);\n        manager.registerReceiver(receiver,filter);\n    }\n\n    class MyBroadCastReceiver extends BroadcastReceiver {\n\n        @Override\n        public void onReceive(Context context, Intent intent) {\n            //get the categories from the intent\n            ArrayList&lt;Category&gt; categories = (ArrayList&lt;Category&gt;) intent.getSerializableExtra(&quot;categories&quot;);\n            adapter.setList(categories);\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7004992,"reputation":728,"user_id":5369727,"display_name":"Aorlinn"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1669221142,"creation_date":1669221142,"answer_id":74550165,"question_id":74526167,"body_markdown":"I think there are several problems with your code:\r\n\r\n1. Your task is running in a different thread than the UIThread (which schedules the task and processes the result). That means it most probably runs on a different processor/core. Processed values (such as your collection) are cached in a processor and somewhen after execution the data is written back to RAM. But that might happen after the `onPostExecute` method is called, which takes the collection to another processor cache as well. But when this is done before the collection is returned to the RAM from the task, it&#39;s still empty. That&#39;s called a **race condition**.\r\n\r\nNow there are several ways to solve that. The simplest one is to use [`Collections.synchronizedList(categories)`][1]\r\nThis prevents the processor from caching list values and always return it to the RAM (or using L3 cache which is shared between all processors/cores).\r\n\r\n2. I&#39;m not sure what exactly you pass to the collection. Intents (and it&#39;s data) need to be serializable and what you add to your collection is probably not serializable.\r\n\r\nThen I would use the `AsyncTask` parameters:\r\n \r\n\r\n    class GetBooksAsync extends AsyncTask&lt;ECategories, Void, Collection&lt;Category&gt;&gt; {\r\n            LocalBroadcastManager manager = LocalBroadcastManager.getInstance(getApplicationContext());\r\n        @Override\r\n        protected Void doInBackground(ECategories... eCategories) {\r\n            Collection&lt;Category&gt; categories = [whatever you want to use];\r\n            for (ECategories category : eCategories) {\r\n                try {\r\n                    categories.add(new Category(category.toString(), apiClient.getBooks(category)));\r\n                } catch (IOException e) {\r\n                    e.printStackTrace();\r\n                }\r\n            }\r\n            return categories;\r\n        }\r\n        @Override\r\n        protected void onPostExecute(Collection&lt;Category&gt; categories) {\r\n            super.onPostExecute(categories);\r\n            Intent intent = new Intent(&quot;com.android.mainapp&quot;);\r\n            intent.putExtra(&quot;categories&quot;, categories);\r\n            manager.sendBroadcast(intent);\r\n            replaceFragment(new HomeFragment());\r\n        }\r\n    }\r\n\r\nAnd note that `AsyncTask` and `LocalBroadcastManager` are deprecated.\r\n\r\n  [1]: https://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#synchronizedList(java.util.List)","title":"Passing data from Activity to Fragment using AsyncTask - Android","body":"<p>I think there are several problems with your code:</p>\n<ol>\n<li>Your task is running in a different thread than the UIThread (which schedules the task and processes the result). That means it most probably runs on a different processor/core. Processed values (such as your collection) are cached in a processor and somewhen after execution the data is written back to RAM. But that might happen after the <code>onPostExecute</code> method is called, which takes the collection to another processor cache as well. But when this is done before the collection is returned to the RAM from the task, it's still empty. That's called a <strong>race condition</strong>.</li>\n</ol>\n<p>Now there are several ways to solve that. The simplest one is to use <a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#synchronizedList(java.util.List)\" rel=\"nofollow noreferrer\"><code>Collections.synchronizedList(categories)</code></a>\nThis prevents the processor from caching list values and always return it to the RAM (or using L3 cache which is shared between all processors/cores).</p>\n<ol start=\"2\">\n<li>I'm not sure what exactly you pass to the collection. Intents (and it's data) need to be serializable and what you add to your collection is probably not serializable.</li>\n</ol>\n<p>Then I would use the <code>AsyncTask</code> parameters:</p>\n<pre><code>class GetBooksAsync extends AsyncTask&lt;ECategories, Void, Collection&lt;Category&gt;&gt; {\n        LocalBroadcastManager manager = LocalBroadcastManager.getInstance(getApplicationContext());\n    @Override\n    protected Void doInBackground(ECategories... eCategories) {\n        Collection&lt;Category&gt; categories = [whatever you want to use];\n        for (ECategories category : eCategories) {\n            try {\n                categories.add(new Category(category.toString(), apiClient.getBooks(category)));\n            } catch (IOException e) {\n                e.printStackTrace();\n            }\n        }\n        return categories;\n    }\n    @Override\n    protected void onPostExecute(Collection&lt;Category&gt; categories) {\n        super.onPostExecute(categories);\n        Intent intent = new Intent(&quot;com.android.mainapp&quot;);\n        intent.putExtra(&quot;categories&quot;, categories);\n        manager.sendBroadcast(intent);\n        replaceFragment(new HomeFragment());\n    }\n}\n</code></pre>\n<p>And note that <code>AsyncTask</code> and <code>LocalBroadcastManager</code> are deprecated.</p>\n"}],"owner":{"account_id":27007195,"reputation":51,"user_id":20567458,"display_name":"YOUSSEF"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":60,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74550165,"answer_count":4,"score":0,"last_activity_date":1669221142,"creation_date":1669076138,"question_id":74526167,"body_markdown":"I&#39;m trying to pass an ArrayList from an AsyncTask in the MainActivity to a fragment, but I&#39;m getting a *NullPointerException* for invoking \r\n``\r\nCategoryAdapter.getItemCount()`` even if I&#39;m passing the array after the BroadCastReceiver Invoke.\r\n\r\nWhat Am I doing wrong?\r\n\r\n\r\n\r\n\r\n**MainActivity**\r\n```java\r\n class GetBooksAsync extends AsyncTask&lt;Void, Void, Void&gt; {\r\n        LocalBroadcastManager manager = LocalBroadcastManager.getInstance(getApplicationContext());\r\n    @Override\r\n    protected Void doInBackground(Void... voids) {\r\n        for (ECategories category : ECategories.values()) {\r\n            try {\r\n                categories.add(new Category(category.toString(), apiClient.getBooks(category)));\r\n            } catch (IOException e) {\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n    @Override\r\n    protected void onPostExecute(Void aVoid) {\r\n        super.onPostExecute(aVoid);\r\n        Intent intent = new Intent(&quot;com.android.mainapp&quot;);\r\n        intent.putExtra(&quot;categories&quot;, categories);\r\n        manager.sendBroadcast(intent);\r\n        replaceFragment(new HomeFragment());\r\n    }\r\n}\r\n```\r\n**HomeFragment**\r\n```java\r\n@Override\r\npublic View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n                         Bundle savedInstanceState) {\r\n    initBroadCastReceiver();\r\n    categoryAdapter = new CategoryAdapter(categories,getContext());\r\n    View view = inflater.inflate(R.layout.fragment_home, container, false);\r\n    recyclerView = view.findViewById(R.id.parent_rv);\r\n    recyclerView.setAdapter(categoryAdapter);\r\n    recyclerView.setLayoutManager(new LinearLayoutManager(getContext()));\r\n    categoryAdapter.notifyDataSetChanged();\r\n    return view;\r\n}\r\n\r\nprivate void initBroadCastReceiver() {\r\n    manager = LocalBroadcastManager.getInstance(getContext());\r\n    MyBroadCastReceiver receiver = new MyBroadCastReceiver();\r\n    IntentFilter filter = new IntentFilter();\r\n    filter.addAction(&quot;com.android.mainapp&quot;);\r\n    manager.registerReceiver(receiver,filter);\r\n}\r\n\r\nclass MyBroadCastReceiver extends BroadcastReceiver {\r\n\r\n    @Override\r\n    public void onReceive(Context context, Intent intent) {\r\n        //get the categories from the intent\r\n        categories = new ArrayList&lt;Category&gt;();\r\n        categories = (ArrayList&lt;Category&gt;) intent.getSerializableExtra(&quot;categories&quot;);\r\n    }\r\n}\r\n```\r\ni&#39;ve also tried attaching the recyclerView from the OnReceive Method, but it&#39;s not getting attached.\r\nThank you in advance!\r\n","title":"Passing data from Activity to Fragment using AsyncTask - Android","body":"<p>I'm trying to pass an ArrayList from an AsyncTask in the MainActivity to a fragment, but I'm getting a <em>NullPointerException</em> for invoking\n<code> CategoryAdapter.getItemCount()</code> even if I'm passing the array after the BroadCastReceiver Invoke.</p>\n<p>What Am I doing wrong?</p>\n<p><strong>MainActivity</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code> class GetBooksAsync extends AsyncTask&lt;Void, Void, Void&gt; {\n        LocalBroadcastManager manager = LocalBroadcastManager.getInstance(getApplicationContext());\n    @Override\n    protected Void doInBackground(Void... voids) {\n        for (ECategories category : ECategories.values()) {\n            try {\n                categories.add(new Category(category.toString(), apiClient.getBooks(category)));\n            } catch (IOException e) {\n                e.printStackTrace();\n            }\n        }\n        return null;\n    }\n    @Override\n    protected void onPostExecute(Void aVoid) {\n        super.onPostExecute(aVoid);\n        Intent intent = new Intent(&quot;com.android.mainapp&quot;);\n        intent.putExtra(&quot;categories&quot;, categories);\n        manager.sendBroadcast(intent);\n        replaceFragment(new HomeFragment());\n    }\n}\n</code></pre>\n<p><strong>HomeFragment</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>@Override\npublic View onCreateView(LayoutInflater inflater, ViewGroup container,\n                         Bundle savedInstanceState) {\n    initBroadCastReceiver();\n    categoryAdapter = new CategoryAdapter(categories,getContext());\n    View view = inflater.inflate(R.layout.fragment_home, container, false);\n    recyclerView = view.findViewById(R.id.parent_rv);\n    recyclerView.setAdapter(categoryAdapter);\n    recyclerView.setLayoutManager(new LinearLayoutManager(getContext()));\n    categoryAdapter.notifyDataSetChanged();\n    return view;\n}\n\nprivate void initBroadCastReceiver() {\n    manager = LocalBroadcastManager.getInstance(getContext());\n    MyBroadCastReceiver receiver = new MyBroadCastReceiver();\n    IntentFilter filter = new IntentFilter();\n    filter.addAction(&quot;com.android.mainapp&quot;);\n    manager.registerReceiver(receiver,filter);\n}\n\nclass MyBroadCastReceiver extends BroadcastReceiver {\n\n    @Override\n    public void onReceive(Context context, Intent intent) {\n        //get the categories from the intent\n        categories = new ArrayList&lt;Category&gt;();\n        categories = (ArrayList&lt;Category&gt;) intent.getSerializableExtra(&quot;categories&quot;);\n    }\n}\n</code></pre>\n<p>i've also tried attaching the recyclerView from the OnReceive Method, but it's not getting attached.\nThank you in advance!</p>\n"},{"tags":["java","android","file","android-intent","storage"],"comments":[{"owner":{"account_id":39846,"reputation":991173,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"score":1,"creation_date":1669066826,"post_id":74525037,"comment_id":131554681,"body_markdown":"&quot;The file is created, but the file itself is empty; 0 byte.&quot; -- you do not show any code where you are writing anything. Did you put code in an `onActivityResult()` method to use the `Uri` that you get, then use `ContentResolver` and `openOutputStream()` to get a stream to write to?","body":"&quot;The file is created, but the file itself is empty; 0 byte.&quot; -- you do not show any code where you are writing anything. Did you put code in an <code>onActivityResult()</code> method to use the <code>Uri</code> that you get, then use <code>ContentResolver</code> and <code>openOutputStream()</code> to get a stream to write to?"},{"owner":{"account_id":27006050,"reputation":11,"user_id":20566510,"display_name":"Khiem Luong"},"score":0,"creation_date":1669220495,"post_id":74525037,"comment_id":131596545,"body_markdown":"Yep. You had the right idea. In my onActivitiesResult, I created a ContentResolver and used it to openOutputStream(uri) for an OutputStream variable (called os). What I forgot to do was to store the bytes in variable and then use os.write(bytes). Thanks for suggestion!","body":"Yep. You had the right idea. In my onActivitiesResult, I created a ContentResolver and used it to openOutputStream(uri) for an OutputStream variable (called os). What I forgot to do was to store the bytes in variable and then use os.write(bytes). Thanks for suggestion!"}],"answers":[{"tags":[],"owner":{"account_id":27006050,"reputation":11,"user_id":20566510,"display_name":"Khiem Luong"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1669220720,"creation_date":1669220720,"answer_id":74550070,"question_id":74525037,"body_markdown":"Using CommonsWare suggestions, I created an onActivityResult() and passed in the CREATE_FILE request code from createFile(File url) like so.\r\n```\r\n   @Override\r\n    protected void onActivityResult(int requestCode, int resultCode, Intent intent) {\r\n        super.onActivityResult(requestCode, resultCode, intent);\r\n        if (requestCode == CREATE_FILE) {\r\n            Uri uri = intent.getData();\r\n            final ContentResolver resolver = getContentResolver();\r\n            try {\r\n                OutputStream os = resolver.openOutputStream(uri);\r\n                if (os != null)\r\n                    os.write(encryptedFileBytes);\r\n                os.close();\r\n\r\n\r\n            } catch (IOException e) {\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n    }\r\n```\r\nThanks!","title":"Files created from Intent.ACTION_OPEN_DOCUMENT is 0 byte (Storage Access Framework)","body":"<p>Using CommonsWare suggestions, I created an onActivityResult() and passed in the CREATE_FILE request code from createFile(File url) like so.</p>\n<pre><code>   @Override\n    protected void onActivityResult(int requestCode, int resultCode, Intent intent) {\n        super.onActivityResult(requestCode, resultCode, intent);\n        if (requestCode == CREATE_FILE) {\n            Uri uri = intent.getData();\n            final ContentResolver resolver = getContentResolver();\n            try {\n                OutputStream os = resolver.openOutputStream(uri);\n                if (os != null)\n                    os.write(encryptedFileBytes);\n                os.close();\n\n\n            } catch (IOException e) {\n                e.printStackTrace();\n            }\n        }\n    }\n</code></pre>\n<p>Thanks!</p>\n"}],"owner":{"account_id":27006050,"reputation":11,"user_id":20566510,"display_name":"Khiem Luong"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":293,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1669220720,"creation_date":1669065773,"question_id":74525037,"body_markdown":"I am trying to create a file manager app but I am running into issues with creating new files.\r\n\r\nI am able to open and read files from the app using Intent.ACTION_VIEW and I have implemented a function that sets the Mime Type, so incorrect directories are not the issue.\r\n\r\nBut I wanted to save that file to another directory, so I added another Intent for creating files using the Storage Access Framework (SAF). As seen below:\r\n\r\n```\r\npublic void createFile(File url) {\r\n    Uri uri = Uri.fromFile(url);\r\n    Intent intent = new Intent(Intent.ACTION_CREATE_DOCUMENT);\r\n    intent.addCategory(Intent.CATEGORY_OPENABLE);\r\n    USBUtils.intentUriFilter(url, intent);\r\n\r\n    intent.putExtra(Intent.EXTRA_TITLE, url.getName());\r\n\r\n    intent.putExtra(DocumentsContract.EXTRA_INITIAL_URI, uri);\r\n    startActivityForResult(intent, CREATE_FILE);\r\n}\r\n```\r\n\r\nAgain, I dynamically set the Mime Type from the URL that was passed in and the SAF popup does appear allowing me to choose where the file is downloaded. In the example below I tried to save a copy of 0005.jpg as 0005b.jpg, [as seen in the Emulator display below](https://i.stack.imgur.com/XX1kt.png).\r\n\r\nThe file is created, but the file itself is [empty; 0 byte][1].\r\n\r\nIs there a way to write a byte array to this intent file similar to Files.write(outputFile.toPath(), dataForWriting), where dataForWriting is the byte array? Or maybe move the file created from Files.write() using Intent, not Files.move() or Files.copy()?\r\n\r\n**Some caveats from my attempts at solving this issue:**\r\n1. Files.write() does work, however I want the user to be able to specify where the written file goes through the SAF.\r\n2. With Android 10/API 29 (My target version) I have to deal with scoped storage, so I passed in these flags in the AndroidManifest.xml\r\n\r\n```\r\n&lt;uses-permission android:name=&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot;/&gt;\r\n&lt;uses-permission android:name=&quot;android.permission.READ_EXTERNAL_STORAGE&quot;/&gt;\r\n```\r\n\r\nand\r\n\r\n```\r\nandroid:requestLegacyExternalStorage=&quot;true&quot;\r\n```\r\n\r\nin the application tag. I also have a permission check function which states that I do have write and read external storage permission. This means that Files.write() did not work on some directories, and I have to create files through the SAF.\r\n\r\n3. I am trying to write data to a USB drive that&#39;s connected to the phone (this is basically an app that manages files on a USB). With that being said, Files.write() does not have permission to write directly to a USB, because USBs don&#39;t have an &quot;emulated&quot; folder.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/0VCrr.png","title":"Files created from Intent.ACTION_OPEN_DOCUMENT is 0 byte (Storage Access Framework)","body":"<p>I am trying to create a file manager app but I am running into issues with creating new files.</p>\n<p>I am able to open and read files from the app using Intent.ACTION_VIEW and I have implemented a function that sets the Mime Type, so incorrect directories are not the issue.</p>\n<p>But I wanted to save that file to another directory, so I added another Intent for creating files using the Storage Access Framework (SAF). As seen below:</p>\n<pre><code>public void createFile(File url) {\n    Uri uri = Uri.fromFile(url);\n    Intent intent = new Intent(Intent.ACTION_CREATE_DOCUMENT);\n    intent.addCategory(Intent.CATEGORY_OPENABLE);\n    USBUtils.intentUriFilter(url, intent);\n\n    intent.putExtra(Intent.EXTRA_TITLE, url.getName());\n\n    intent.putExtra(DocumentsContract.EXTRA_INITIAL_URI, uri);\n    startActivityForResult(intent, CREATE_FILE);\n}\n</code></pre>\n<p>Again, I dynamically set the Mime Type from the URL that was passed in and the SAF popup does appear allowing me to choose where the file is downloaded. In the example below I tried to save a copy of 0005.jpg as 0005b.jpg, <a href=\"https://i.stack.imgur.com/XX1kt.png\" rel=\"nofollow noreferrer\">as seen in the Emulator display below</a>.</p>\n<p>The file is created, but the file itself is <a href=\"https://i.stack.imgur.com/0VCrr.png\" rel=\"nofollow noreferrer\">empty; 0 byte</a>.</p>\n<p>Is there a way to write a byte array to this intent file similar to Files.write(outputFile.toPath(), dataForWriting), where dataForWriting is the byte array? Or maybe move the file created from Files.write() using Intent, not Files.move() or Files.copy()?</p>\n<p><strong>Some caveats from my attempts at solving this issue:</strong></p>\n<ol>\n<li>Files.write() does work, however I want the user to be able to specify where the written file goes through the SAF.</li>\n<li>With Android 10/API 29 (My target version) I have to deal with scoped storage, so I passed in these flags in the AndroidManifest.xml</li>\n</ol>\n<pre><code>&lt;uses-permission android:name=&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot;/&gt;\n&lt;uses-permission android:name=&quot;android.permission.READ_EXTERNAL_STORAGE&quot;/&gt;\n</code></pre>\n<p>and</p>\n<pre><code>android:requestLegacyExternalStorage=&quot;true&quot;\n</code></pre>\n<p>in the application tag. I also have a permission check function which states that I do have write and read external storage permission. This means that Files.write() did not work on some directories, and I have to create files through the SAF.</p>\n<ol start=\"3\">\n<li>I am trying to write data to a USB drive that's connected to the phone (this is basically an app that manages files on a USB). With that being said, Files.write() does not have permission to write directly to a USB, because USBs don't have an &quot;emulated&quot; folder.</li>\n</ol>\n"},{"tags":["java","arrays","recursion"],"comments":[{"owner":{"account_id":2360785,"reputation":11123,"user_id":2067492,"display_name":"matt"},"score":0,"creation_date":1669223161,"post_id":74549900,"comment_id":131597617,"body_markdown":"You&#39;ve almost got it. when you call printArray(arr, arr.length - 1); The if statement passes, the call to printArray is called with arr.length, which is fine, but then you&#39;re calling arr[i] but i == arr.length. Switch the order, or even better just use i+1.","body":"You&#39;ve almost got it. when you call printArray(arr, arr.length - 1); The if statement passes, the call to printArray is called with arr.length, which is fine, but then you&#39;re calling arr[i] but i == arr.length. Switch the order, or even better just use i+1."}],"answers":[{"tags":[],"owner":{"account_id":7971577,"reputation":3673,"user_id":6016064,"accept_rate":71,"display_name":"Edward Peters"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669220511,"creation_date":1669220162,"answer_id":74549951,"question_id":74549900,"body_markdown":"`++i` increments the value - it actually changes it (and evaluates as the updated value.) \r\n\r\n`++i`, `i++` and the subtle distinction between them has been the cause of many and frustrating bugs. This is just my opinion, but I advise never using either one of them except as a single-line statement when you need to increment something. The brevity isn&#39;t worth the risk of bugs.\r\n\r\nSo if you enter `printArray` with `i=arr.length-1`, then you get past your i guard, increment i, make the recursive call (which returns), and then try to access `arr[arr.length - 1 + 1], which is out of bounds.\r\n\r\nIf you&#39;re just learning about recursion, you might be confused at how local variables and returns work in a method. Each time you call a method, that&#39;s a new stack frame (a section of memory) with completely different values for its local variables, and which returns independently. `i` is not &quot;`i` in every usage of the method named `printArray`&quot;, it&#39;s only &quot;`i` in the current application of the method `printArray`.&quot; Similarly when you return, you cease to run the *current* application of `printArray`, but not every application.\r\n\r\nSorry if that part&#39;s all stuff you know - I find it&#39;s one of those things that&#39;s completely mind boggling to people starting out, and then becomes completely obvious a week later.","title":"why my code give error of arrayIndex out of bound?","body":"<p><code>++i</code> increments the value - it actually changes it (and evaluates as the updated value.)</p>\n<p><code>++i</code>, <code>i++</code> and the subtle distinction between them has been the cause of many and frustrating bugs. This is just my opinion, but I advise never using either one of them except as a single-line statement when you need to increment something. The brevity isn't worth the risk of bugs.</p>\n<p>So if you enter <code>printArray</code> with <code>i=arr.length-1</code>, then you get past your i guard, increment i, make the recursive call (which returns), and then try to access `arr[arr.length - 1 + 1], which is out of bounds.</p>\n<p>If you're just learning about recursion, you might be confused at how local variables and returns work in a method. Each time you call a method, that's a new stack frame (a section of memory) with completely different values for its local variables, and which returns independently. <code>i</code> is not &quot;<code>i</code> in every usage of the method named <code>printArray</code>&quot;, it's only &quot;<code>i</code> in the current application of the method <code>printArray</code>.&quot; Similarly when you return, you cease to run the <em>current</em> application of <code>printArray</code>, but not every application.</p>\n<p>Sorry if that part's all stuff you know - I find it's one of those things that's completely mind boggling to people starting out, and then becomes completely obvious a week later.</p>\n"},{"tags":[],"owner":{"account_id":27026595,"reputation":24,"user_id":20583761,"display_name":"arctic_fox"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1669220538,"creation_date":1669220478,"answer_id":74550023,"question_id":74549900,"body_markdown":"Replace ++i with i+1\r\n\r\nYou are incrementing the value of local variable in function. Instead of incrementing, send next value to other function as you will use that local variable value while printing in your function.","title":"why my code give error of arrayIndex out of bound?","body":"<p>Replace ++i with i+1</p>\n<p>You are incrementing the value of local variable in function. Instead of incrementing, send next value to other function as you will use that local variable value while printing in your function.</p>\n"}],"owner":{"account_id":24440789,"reputation":1,"user_id":18364522,"display_name":"1018_csds_Pranjal Sharma"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":42,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"closed_date":1669220674,"answer_count":2,"score":-3,"last_activity_date":1669220538,"creation_date":1669219936,"question_id":74549900,"body_markdown":"```\r\nimport java.util.Scanner;\r\n\r\npublic class recursion_4 {\r\n    public static void main(String[] args) {\r\n        Scanner sc = new Scanner(System.in);\r\n        int n = sc.nextInt();\r\n        int a[] = new int[n];\r\n        for (int i = 0; i &lt; n; i++) {\r\n            a[i] = sc.nextInt();\r\n        }\r\n        printArray(a, 0);\r\n        sc.close();\r\n    }\r\n\r\n    static void printArray(int arr[], int i) {\r\n        if (i == arr.length) {\r\n            return;\r\n        }\r\n        printArray(arr, ++i);\r\n        System.out.println(arr[i]);\r\n    }\r\n}\r\n```\r\n\r\nI am try to print array element using recursion.\r\n\r\nBut it give error of arrayIndex Out of bound.","title":"why my code give error of arrayIndex out of bound?","body":"<pre><code>import java.util.Scanner;\n\npublic class recursion_4 {\n    public static void main(String[] args) {\n        Scanner sc = new Scanner(System.in);\n        int n = sc.nextInt();\n        int a[] = new int[n];\n        for (int i = 0; i &lt; n; i++) {\n            a[i] = sc.nextInt();\n        }\n        printArray(a, 0);\n        sc.close();\n    }\n\n    static void printArray(int arr[], int i) {\n        if (i == arr.length) {\n            return;\n        }\n        printArray(arr, ++i);\n        System.out.println(arr[i]);\n    }\n}\n</code></pre>\n<p>I am try to print array element using recursion.</p>\n<p>But it give error of arrayIndex Out of bound.</p>\n"},{"tags":["java","gradle","openapi-generator"],"owner":{"account_id":297370,"reputation":3213,"user_id":602856,"accept_rate":40,"display_name":"rainer198"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":68,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1669220510,"creation_date":1669220510,"question_id":74550029,"body_markdown":"How would you structure a Gradle project which should do the following?\r\n\r\n- generate a spring boot skeleton for an openapi REST api spec.\r\n- building a spring boot application which implents this skeleton. This will be the server application.\r\n- generate a Java client from the same openapi spec, which is published to something like artifactory and can be used by other projects.\r\n\r\nThe challenges I see here are:\r\n- Where to put the `openapi.yml`. In a separate gradle subproject which only provided the openapi spec as a resource and which is a dependency for a server and client subproject? How can I refer to the spec in the `inputSpec` property of the openApiGenerate task?\r\n- There have to be two openapi generator tasks, one for the server code and one for the client. Should is be in the same gradle subproject? How is this possible technically? To me, this seems wrong anyway, since you actively have to define which packages to include when building the client jar. And the server code would also contain the client classes by default.\r\n\r\n\r\n","title":"What it the best structure for an openapi api-first gradle project?","body":"<p>How would you structure a Gradle project which should do the following?</p>\n<ul>\n<li>generate a spring boot skeleton for an openapi REST api spec.</li>\n<li>building a spring boot application which implents this skeleton. This will be the server application.</li>\n<li>generate a Java client from the same openapi spec, which is published to something like artifactory and can be used by other projects.</li>\n</ul>\n<p>The challenges I see here are:</p>\n<ul>\n<li>Where to put the <code>openapi.yml</code>. In a separate gradle subproject which only provided the openapi spec as a resource and which is a dependency for a server and client subproject? How can I refer to the spec in the <code>inputSpec</code> property of the openApiGenerate task?</li>\n<li>There have to be two openapi generator tasks, one for the server code and one for the client. Should is be in the same gradle subproject? How is this possible technically? To me, this seems wrong anyway, since you actively have to define which packages to include when building the client jar. And the server code would also contain the client classes by default.</li>\n</ul>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":74704,"reputation":11534,"user_id":214525,"accept_rate":100,"display_name":"f1sh"},"score":2,"creation_date":1669200916,"post_id":74545627,"comment_id":131589114,"body_markdown":"Does this answer your question? [How to convert a string with Unicode encoding to a string of letters](https://stackoverflow.com/questions/11145681/how-to-convert-a-string-with-unicode-encoding-to-a-string-of-letters)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/11145681/how-to-convert-a-string-with-unicode-encoding-to-a-string-of-letters\">How to convert a string with Unicode encoding to a string of letters</a>"},{"owner":{"account_id":27020486,"reputation":1,"user_id":20578534,"display_name":"TGXZereF"},"score":1,"creation_date":1669201371,"post_id":74545627,"comment_id":131589277,"body_markdown":"@f1sh unfortunately no, I have gone through the answers but the problem here is I have to display an emoji and not normal characters. The unescapeJava() method or the other codes don&#39;t help.","body":"@f1sh unfortunately no, I have gone through the answers but the problem here is I have to display an emoji and not normal characters. The unescapeJava() method or the other codes don&#39;t help."}],"answers":[{"tags":[],"owner":{"account_id":17835,"reputation":303915,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1669220470,"creation_date":1669201450,"answer_id":74545768,"question_id":74545627,"body_markdown":"U+1F601 describes [a Unicode codepoint][1].\r\n\r\n*Often* when you want to convert a codepoint to a `String` in Java then what you describe will work.\r\n\r\n*However* it only works when the codepoint is in [the Basic Multilingual Plane][2], which basically means it&#39;s smaller than U+10000 (i.e. at most 4 hex digits). The BMP includes *most* frequently used characters, but is notably *not* home to many newer emojis.\r\n\r\nIf it&#39;s above that point, then you need to use two `char` values to combine into a single codepoint with [some math][3].\r\n\r\nLuckily you don&#39;t have to do that math on your own, but can use [this version of `Character.toString`][4] instead:\r\n\r\n    Character.toString(0x1F601);\r\n\r\nAnd to fully implement the replacement, we can simply [use `Matcher.replaceAll`][5]:\r\n\r\n    String input = &quot;Hello U+1F601&quot;;\r\n    Pattern p = Pattern.compile(&quot;U\\\\+([0-9a-fA-F]{4,6})&quot;);\r\n    String result = p.matcher(input).replaceAll(r -&gt; Character.toString(Integer.parseInt(r.group(1), 16)));\r\n    System.out.println(result);\r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Unicode#Codespace_and_Code_Points\r\n  [2]: https://en.wikipedia.org/wiki/Plane_(Unicode)#Basic_Multilingual_Plane\r\n  [3]: https://en.wikipedia.org/wiki/UTF-16#Code_points_from_U+010000_to_U+10FFFF\r\n  [4]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Character.html#toString(int)\r\n  [5]: https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/util/regex/Matcher.html#replaceAll(java.util.function.Function)","title":"How do I convert Unicode U+xxxx representation of an emoji into the emoji in Java?","body":"<p>U+1F601 describes <a href=\"https://en.wikipedia.org/wiki/Unicode#Codespace_and_Code_Points\" rel=\"nofollow noreferrer\">a Unicode codepoint</a>.</p>\n<p><em>Often</em> when you want to convert a codepoint to a <code>String</code> in Java then what you describe will work.</p>\n<p><em>However</em> it only works when the codepoint is in <a href=\"https://en.wikipedia.org/wiki/Plane_(Unicode)#Basic_Multilingual_Plane\" rel=\"nofollow noreferrer\">the Basic Multilingual Plane</a>, which basically means it's smaller than U+10000 (i.e. at most 4 hex digits). The BMP includes <em>most</em> frequently used characters, but is notably <em>not</em> home to many newer emojis.</p>\n<p>If it's above that point, then you need to use two <code>char</code> values to combine into a single codepoint with <a href=\"https://en.wikipedia.org/wiki/UTF-16#Code_points_from_U+010000_to_U+10FFFF\" rel=\"nofollow noreferrer\">some math</a>.</p>\n<p>Luckily you don't have to do that math on your own, but can use <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Character.html#toString(int)\" rel=\"nofollow noreferrer\">this version of <code>Character.toString</code></a> instead:</p>\n<pre><code>Character.toString(0x1F601);\n</code></pre>\n<p>And to fully implement the replacement, we can simply <a href=\"https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/util/regex/Matcher.html#replaceAll(java.util.function.Function)\" rel=\"nofollow noreferrer\">use <code>Matcher.replaceAll</code></a>:</p>\n<pre><code>String input = &quot;Hello U+1F601&quot;;\nPattern p = Pattern.compile(&quot;U\\\\+([0-9a-fA-F]{4,6})&quot;);\nString result = p.matcher(input).replaceAll(r -&gt; Character.toString(Integer.parseInt(r.group(1), 16)));\nSystem.out.println(result);\n</code></pre>\n"}],"owner":{"account_id":27020486,"reputation":1,"user_id":20578534,"display_name":"TGXZereF"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":221,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1669220470,"creation_date":1669200779,"question_id":74545627,"body_markdown":"I have a string with Unicode representation of emoji like this:\r\n\r\n&quot;Hello U+1F601&quot;\r\n\r\nI want to convert this into:\r\n\r\n&quot;Hello &#128513;&quot;\r\n\r\nI have tried decoding them using the `parseInt()` method and converting it to `char`, but I keep getting a black and white glyph like this - &#128437;.\r\n\r\nAny pointers how can I can achieve the intended result with Java?\r\n\r\nP.S: `unescapeJava()` method doesn&#39;t work here. I have tried it and also some other answers from other similar threads.","title":"How do I convert Unicode U+xxxx representation of an emoji into the emoji in Java?","body":"<p>I have a string with Unicode representation of emoji like this:</p>\n<p>&quot;Hello U+1F601&quot;</p>\n<p>I want to convert this into:</p>\n<p>&quot;Hello 😁&quot;</p>\n<p>I have tried decoding them using the <code>parseInt()</code> method and converting it to <code>char</code>, but I keep getting a black and white glyph like this - 🖵.</p>\n<p>Any pointers how can I can achieve the intended result with Java?</p>\n<p>P.S: <code>unescapeJava()</code> method doesn't work here. I have tried it and also some other answers from other similar threads.</p>\n"},{"tags":["java","android"],"answers":[{"comments":[{"owner":{"account_id":24233662,"reputation":3,"user_id":18187077,"display_name":"Dust"},"score":0,"creation_date":1669252129,"post_id":74549759,"comment_id":131604683,"body_markdown":"Thks!!!! U help me a lot. I solved the communication problem by using LiveData and ViewModel.","body":"Thks!!!! U help me a lot. I solved the communication problem by using LiveData and ViewModel."}],"tags":[],"owner":{"account_id":27026319,"reputation":51,"user_id":20583527,"display_name":"S&#252;rmu"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1669219274,"creation_date":1669219274,"answer_id":74549759,"question_id":74544450,"body_markdown":"I didn&#39;t use `BottomNavigationActivity`, but you normally use controls (such as your `textView`) inside the `Fragment` itself (eg. in the `onViewCreated` method after inflation of the according layout). Take a look at [this post][1].\r\nProbably that&#39;s the reason, why it&#39;s not inflated, because you did not do it in the `Fragment`.\r\n\r\nTo communicate between `Fragments` and/or `Activity` you can use `ViewModels`. You define a `ViewModel` for the Activity and get it in the Fragment with \r\n\r\n    new ViewModelProvider(getActivity()).get(YourModel.class)\r\n\r\nIn the ViewModel itself it&#39;s best do define `(Mutable)LiveData&lt;&gt;` and observe it. So whenever you change the data, you are notified, plus you don&#39;t need to worry about the fragment state. LiveData checks, whether your fragment still exists and removes it from the list of observers when it&#39;s destroyed.\r\n\r\nWithin the \r\n\r\n  [1]: https://guides.codepath.com/android/Creating-and-Using-Fragments","title":"How to connect Activity and Fragment when creating activity(Android)","body":"<p>I didn't use <code>BottomNavigationActivity</code>, but you normally use controls (such as your <code>textView</code>) inside the <code>Fragment</code> itself (eg. in the <code>onViewCreated</code> method after inflation of the according layout). Take a look at <a href=\"https://guides.codepath.com/android/Creating-and-Using-Fragments\" rel=\"nofollow noreferrer\">this post</a>.\nProbably that's the reason, why it's not inflated, because you did not do it in the <code>Fragment</code>.</p>\n<p>To communicate between <code>Fragments</code> and/or <code>Activity</code> you can use <code>ViewModels</code>. You define a <code>ViewModel</code> for the Activity and get it in the Fragment with</p>\n<pre><code>new ViewModelProvider(getActivity()).get(YourModel.class)\n</code></pre>\n<p>In the ViewModel itself it's best do define <code>(Mutable)LiveData&lt;&gt;</code> and observe it. So whenever you change the data, you are notified, plus you don't need to worry about the fragment state. LiveData checks, whether your fragment still exists and removes it from the list of observers when it's destroyed.</p>\n<p>Within the</p>\n"}],"owner":{"account_id":24233662,"reputation":3,"user_id":18187077,"display_name":"Dust"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74549759,"answer_count":1,"score":0,"last_activity_date":1669219274,"creation_date":1669195667,"question_id":74544450,"body_markdown":"I created an android project using the **Bottom Navigation Activity template**, but I found it difficult to connect Activity and Fragment. For example, when a activity star the MainActivity, and there&#39;s a textView in the HomeFragment, I want to set the text in the onCreate() func in MainActivity. I&#39;ve try\r\n```java\r\n((TextView) binding.getRoot().getViewById(R.id.textView)).setText(test);\r\n```\r\nbut it seems the Fragment not be created yet so I get null pointer.\r\nThe project structure and the MainActivity Class as follow,\r\n[enter image description here](https://i.stack.imgur.com/TTi1Q.png)\r\nThe textView is a View id in navigation_home\r\nI am new in android development, thks.\r\n\r\n\r\nThe way to connect the Activity and the Fragment in it","title":"How to connect Activity and Fragment when creating activity(Android)","body":"<p>I created an android project using the <strong>Bottom Navigation Activity template</strong>, but I found it difficult to connect Activity and Fragment. For example, when a activity star the MainActivity, and there's a textView in the HomeFragment, I want to set the text in the onCreate() func in MainActivity. I've try</p>\n<pre class=\"lang-java prettyprint-override\"><code>((TextView) binding.getRoot().getViewById(R.id.textView)).setText(test);\n</code></pre>\n<p>but it seems the Fragment not be created yet so I get null pointer.\nThe project structure and the MainActivity Class as follow,\n<a href=\"https://i.stack.imgur.com/TTi1Q.png\" rel=\"nofollow noreferrer\">enter image description here</a>\nThe textView is a View id in navigation_home\nI am new in android development, thks.</p>\n<p>The way to connect the Activity and the Fragment in it</p>\n"},{"tags":["java"],"answers":[{"comments":[{"owner":{"account_id":26721652,"reputation":13,"user_id":20325375,"display_name":"Dox"},"score":0,"creation_date":1669222148,"post_id":74549657,"comment_id":131597214,"body_markdown":"I hope this is not a stupid question, but there is no option for Java with Ant, just Maven and some others. Which one should I use?","body":"I hope this is not a stupid question, but there is no option for Java with Ant, just Maven and some others. Which one should I use?"},{"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"score":0,"creation_date":1669227308,"post_id":74549657,"comment_id":131599040,"body_markdown":"@Dox there&#39;s a link to the JAR file that lets you download it. Add it to your class path as you&#39;re used to.","body":"@Dox there&#39;s a link to the JAR file that lets you download it. Add it to your class path as you&#39;re used to."}],"tags":[],"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1669218866,"creation_date":1669218866,"answer_id":74549657,"question_id":74549597,"body_markdown":"In Java 11, all of the so-called &quot;enterprise&quot; modules got removed from the JDK and JRE. That includes APIs like JAXB, but also the Java Activation Framework. That&#39;s needed by JavaMail, but your application is missing it (as shown by the error message).\r\n\r\nAdd this dependency: https://mvnrepository.com/artifact/jakarta.activation/jakarta.activation-api/1.2.2. Make sure to stay away from version 2.x and higher, those have a different package name.","title":"java.lang.NoClassDefFoundError: javax/activation/DataSource exception when I try to send an email in my Java Swing application","body":"<p>In Java 11, all of the so-called &quot;enterprise&quot; modules got removed from the JDK and JRE. That includes APIs like JAXB, but also the Java Activation Framework. That's needed by JavaMail, but your application is missing it (as shown by the error message).</p>\n<p>Add this dependency: <a href=\"https://mvnrepository.com/artifact/jakarta.activation/jakarta.activation-api/1.2.2\" rel=\"nofollow noreferrer\">https://mvnrepository.com/artifact/jakarta.activation/jakarta.activation-api/1.2.2</a>. Make sure to stay away from version 2.x and higher, those have a different package name.</p>\n"},{"comments":[{"owner":{"account_id":26721652,"reputation":13,"user_id":20325375,"display_name":"Dox"},"score":0,"creation_date":1669242748,"post_id":74549737,"comment_id":131603056,"body_markdown":"You were right @mttt it was related to the classpath. Thank you for responding!","body":"You were right @mttt it was related to the classpath. Thank you for responding!"}],"tags":[],"owner":{"account_id":27015200,"reputation":71,"user_id":20574184,"display_name":"mttt"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669219157,"creation_date":1669219157,"answer_id":74549737,"question_id":74549597,"body_markdown":"java.lang.NoClassDefFoundError means the class can&#39; t be found in the classpath, based on your description I think you are creating a jar by ant and then execute it with java -jar. \r\nYou should check:\r\n\r\n 1. in the java command there is a -cp option with the needed jar\r\n 2. the needed jar is correctly pointed at","title":"java.lang.NoClassDefFoundError: javax/activation/DataSource exception when I try to send an email in my Java Swing application","body":"<p>java.lang.NoClassDefFoundError means the class can' t be found in the classpath, based on your description I think you are creating a jar by ant and then execute it with java -jar.\nYou should check:</p>\n<ol>\n<li>in the java command there is a -cp option with the needed jar</li>\n<li>the needed jar is correctly pointed at</li>\n</ol>\n"}],"owner":{"account_id":26721652,"reputation":13,"user_id":20325375,"display_name":"Dox"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":874,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":74549657,"answer_count":2,"score":1,"last_activity_date":1669219265,"creation_date":1669218659,"question_id":74549597,"body_markdown":"I&#39;m trying to create an Java Swing (with Ant) application to send an email to a desired address(My first time).The application builds successfully but when I click the button to send the email I get a lot of different error messages, with the first being a java.lang.NoClassDefFoundError: javax/activation/DataSource .The sender email is new and I did not assosciate it with a phone number(I was told it might lead to issues). I&#39;ve also have already added the mail.jar to the project library. The catch JOptionPane did not print any errors as well so I&#39;m having a hard time figuring this out. I&#39;ve attached the code as well as a [screenshot](https://i.stack.imgur.com/MpxLL.png) of the error.\r\n\r\n&gt;     private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {                                         \r\n&gt;         \r\n&gt;         String toEmail= &quot;email1&quot;;//Changed emails for securityPurposes\r\n&gt; \r\n&gt;         String fromEmail = &quot;email2&quot;;\r\n&gt;         String fromEmailPassword=&quot;Password&quot;;\r\n&gt;         String subject=&quot;This is the subject&quot;;\r\n&gt; \r\n&gt;         Properties properties = new Properties();\r\n&gt;         properties.put(&quot;mail.smtp.auth&quot;,&quot;true&quot;);\r\n&gt;         properties.put(&quot;mail.smtp.starttls.enable&quot;,&quot;true&quot;);\r\n&gt;         properties.put(&quot;mail.smtp.host&quot;,&quot;smtp.gmail.com&quot;);\r\n&gt;         properties.put(&quot;mail.smtp.port&quot;,&quot;587&quot;);\r\n&gt;         \r\n&gt;         Session session=Session.getDefaultInstance(properties,new &gt;javax.mail.Authenticator(){\r\n&gt;         @Override\r\n&gt;         protected PasswordAuthentication getPasswordAuthentication(){\r\n&gt;         return new PasswordAuthentication(fromEmail,fromEmailPassword);\r\n&gt;         }\r\n&gt;         });\r\n&gt;         try{\r\n&gt;             MimeMessage message=new MimeMessage(session);\r\n&gt;             message.setFrom(new InternetAddress(fromEmail));\r\n&gt;             message.addRecipient(Message.RecipientType.TO,new &gt;InternetAddress(toEmail));\r\n&gt;             message.setSubject(subject);\r\n&gt;             message.setText(&quot;Hello&quot;);\r\n&gt;             Transport.send(message);\r\n&gt;         }\r\n&gt;         catch(Exception ex){\r\n&gt;             JOptionPane.showMessageDialog(null, ex);\r\n&gt;         }\r\n&gt;     \r\n&gt;         \r\n&gt;     }                                        \r\n\r\n\r\n\r\n\r\n\r\nI&#39;ve looked but haven&#39;t found any similar cases or solutions.","title":"java.lang.NoClassDefFoundError: javax/activation/DataSource exception when I try to send an email in my Java Swing application","body":"<p>I'm trying to create an Java Swing (with Ant) application to send an email to a desired address(My first time).The application builds successfully but when I click the button to send the email I get a lot of different error messages, with the first being a java.lang.NoClassDefFoundError: javax/activation/DataSource .The sender email is new and I did not assosciate it with a phone number(I was told it might lead to issues). I've also have already added the mail.jar to the project library. The catch JOptionPane did not print any errors as well so I'm having a hard time figuring this out. I've attached the code as well as a <a href=\"https://i.stack.imgur.com/MpxLL.png\" rel=\"nofollow noreferrer\">screenshot</a> of the error.</p>\n<blockquote>\n<pre><code>private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {                                         \n    \n    String toEmail= &quot;email1&quot;;//Changed emails for securityPurposes\n\n    String fromEmail = &quot;email2&quot;;\n    String fromEmailPassword=&quot;Password&quot;;\n    String subject=&quot;This is the subject&quot;;\n\n    Properties properties = new Properties();\n    properties.put(&quot;mail.smtp.auth&quot;,&quot;true&quot;);\n    properties.put(&quot;mail.smtp.starttls.enable&quot;,&quot;true&quot;);\n    properties.put(&quot;mail.smtp.host&quot;,&quot;smtp.gmail.com&quot;);\n    properties.put(&quot;mail.smtp.port&quot;,&quot;587&quot;);\n    \n    Session session=Session.getDefaultInstance(properties,new &gt;javax.mail.Authenticator(){\n    @Override\n    protected PasswordAuthentication getPasswordAuthentication(){\n    return new PasswordAuthentication(fromEmail,fromEmailPassword);\n    }\n    });\n    try{\n        MimeMessage message=new MimeMessage(session);\n        message.setFrom(new InternetAddress(fromEmail));\n        message.addRecipient(Message.RecipientType.TO,new &gt;InternetAddress(toEmail));\n        message.setSubject(subject);\n        message.setText(&quot;Hello&quot;);\n        Transport.send(message);\n    }\n    catch(Exception ex){\n        JOptionPane.showMessageDialog(null, ex);\n    }\n\n    \n}                                        \n</code></pre>\n</blockquote>\n<p>I've looked but haven't found any similar cases or solutions.</p>\n"},{"tags":["java","function"],"comments":[{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":0,"creation_date":1668940561,"post_id":74507335,"comment_id":131523915,"body_markdown":"If we want no input and some output, we can use a lambda of type [`Supplier` (`docs.oracle.com`)](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/function/Supplier.html).","body":"If we want no input and some output, we can use a lambda of type <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/function/Supplier.html\" rel=\"nofollow noreferrer\"><code>Supplier</code> (<code>docs.oracle.com</code>)</a>."},{"owner":{"account_id":18526357,"reputation":11,"user_id":13498157,"display_name":"DVD_DAVIDE"},"score":0,"creation_date":1668941127,"post_id":74507335,"comment_id":131523993,"body_markdown":"The problem isn&#39;t no input at all. It shouldn&#39;t have a predetermined input. I mean, it could be defined as `func()` as well as `func(double min, double max, Random rn, double seed)`.","body":"The problem isn&#39;t no input at all. It shouldn&#39;t have a predetermined input. I mean, it could be defined as <code>func()</code> as well as <code>func(double min, double max, Random rn, double seed)</code>."},{"owner":{"account_id":8316417,"reputation":565,"user_id":6249539,"accept_rate":83,"display_name":"yashpandey8055"},"score":0,"creation_date":1668941606,"post_id":74507335,"comment_id":131524062,"body_markdown":"Can you paste you function because I think you trying to do some integer operations on Object Type which cant be possible because Object class is broader than Integer.","body":"Can you paste you function because I think you trying to do some integer operations on Object Type which cant be possible because Object class is broader than Integer."},{"owner":{"account_id":18526357,"reputation":11,"user_id":13498157,"display_name":"DVD_DAVIDE"},"score":0,"creation_date":1668959446,"post_id":74507335,"comment_id":131527467,"body_markdown":"The function is just a test function I made up it&#39;s declared as `public static double goodFunc(int goodNum){ return (double) goodNum-1; }`.","body":"The function is just a test function I made up it&#39;s declared as <code>public static double goodFunc(int goodNum){ return (double) goodNum-1; }</code>."}],"answers":[{"comments":[{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":1,"creation_date":1668989391,"post_id":74509696,"comment_id":131533713,"body_markdown":"“In the parent package (java.util.function) there is no interface for a function that takes more than 1 argument.”  Except for all the interfaces with a `Bi` syllable in their names (BiFunction, BiConsumer, BiPredicate, ToIntBiFunction, ToLongBiFunction, ToDoubleBiFunction), the interfaces with `Binary` in their names (BinaryOperator, IntBinaryOperator, LongBinaryOperator, DoubleBinaryOperator), and every interface starting with `Obj` (ObjIntConsumer, ObjLongConsumer, ObjDoubleConsumer).","body":"“In the parent package (java.util.function) there is no interface for a function that takes more than 1 argument.”  Except for all the interfaces with a <code>Bi</code> syllable in their names (BiFunction, BiConsumer, BiPredicate, ToIntBiFunction, ToLongBiFunction, ToDoubleBiFunction), the interfaces with <code>Binary</code> in their names (BinaryOperator, IntBinaryOperator, LongBinaryOperator, DoubleBinaryOperator), and every interface starting with <code>Obj</code> (ObjIntConsumer, ObjLongConsumer, ObjDoubleConsumer)."},{"owner":{"account_id":18526357,"reputation":11,"user_id":13498157,"display_name":"DVD_DAVIDE"},"score":0,"creation_date":1669218813,"post_id":74509696,"comment_id":131595934,"body_markdown":"You&#39;re right. Those interfaces take two arguments. The problem is still the same: I don&#39;t wanna pass a function that takes only one argument, nor one that takes two. I don&#39;t know how many arguments it&#39;ll take. I was looking for something much more flexible","body":"You&#39;re right. Those interfaces take two arguments. The problem is still the same: I don&#39;t wanna pass a function that takes only one argument, nor one that takes two. I don&#39;t know how many arguments it&#39;ll take. I was looking for something much more flexible"}],"tags":[],"owner":{"account_id":18526357,"reputation":11,"user_id":13498157,"display_name":"DVD_DAVIDE"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1669218973,"creation_date":1668960314,"answer_id":74509696,"question_id":74507335,"body_markdown":"After some research, I found out that:\r\n\r\n - The interface `Function&lt;T, R&gt;` is specifically designed for a 1-input 1-output function.\r\n - In the parent package (`java.util.function`) there is no interface for a function that takes more than 1 argument. (Edit: as pointed in the comments, there also are interfaces that take two arguments. Still, that doesn&#39;t solve my problem.)\r\n\r\nThe solution might be to force the function given as parameter to accept an array of objects as the only argument, then parse them as required.\r\n\r\nAn example of this would be something like:\r\n```java\r\npublic static double func(Object[] args){\r\n  int a = (int) args[0];\r\n  int b = (int) args[1];\r\n  return (double) a * b;\r\n}\r\n```\r\n(The parsing isn&#39;t done in a try-catch block because I want an exception thrown anyway if the wrong args are given to the function)","title":"Function&lt;T, R&gt; Object in Java with no specified parameters as input and Double as output","body":"<p>After some research, I found out that:</p>\n<ul>\n<li>The interface <code>Function&lt;T, R&gt;</code> is specifically designed for a 1-input 1-output function.</li>\n<li>In the parent package (<code>java.util.function</code>) there is no interface for a function that takes more than 1 argument. (Edit: as pointed in the comments, there also are interfaces that take two arguments. Still, that doesn't solve my problem.)</li>\n</ul>\n<p>The solution might be to force the function given as parameter to accept an array of objects as the only argument, then parse them as required.</p>\n<p>An example of this would be something like:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static double func(Object[] args){\n  int a = (int) args[0];\n  int b = (int) args[1];\n  return (double) a * b;\n}\n</code></pre>\n<p>(The parsing isn't done in a try-catch block because I want an exception thrown anyway if the wrong args are given to the function)</p>\n"}],"owner":{"account_id":18526357,"reputation":11,"user_id":13498157,"display_name":"DVD_DAVIDE"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":46,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":74509696,"answer_count":1,"score":-1,"last_activity_date":1669218973,"creation_date":1668940268,"question_id":74507335,"body_markdown":"I&#39;ve made a Matrix class in java and I wanted to add some `init()` functions.\\\r\nI need one that takes as the first argument a `Function` object, and the function&#39;s arguments if needed as the second.\\\r\nI have encountered two problems:\\\r\n- If the function only takes one argument, the notation `init(Function&lt;&gt; func, Object... args)` gives an error is thrown when compiling: `incompatible types: java.lang.Object cannot be converted to int`.\r\n- If I work around that (by calling `init(FuncClass::Func, 7, null)`, which doesn&#39;t seem such a good idea), I have an error thrown at `func.apply(args)` because `incompatible types: java.lang.Object cannot be converted to int`.\r\n\r\nThe current function definition is this:\r\n\r\n```java\r\npublic void init(Function&lt;Object, Double&gt; function, Object... args){\r\n    for (int i = 0; i &lt; this.rows; i++) {\r\n        for (int j = 0; j &lt; this.cols; j++) {\r\n            this.data[i][j] = function.apply(args);\r\n        }\r\n    }\r\n}\r\n```\r\nThe `data` object is defined as:\\\r\n`double[][] data = new double[rows][cols];`\r\n\r\nEdit: since it came up in the comments, I noticed that the title can be misunderstood.\\\r\nThe problem isn&#39;t no input at all. It shouldn&#39;t have a predetermined input. I mean, it could be defined as `func()` as well as `func(double min, double max, Random rn, double seed)`.\\\r\nIf you can suggest a more explanative title, please do.","title":"Function&lt;T, R&gt; Object in Java with no specified parameters as input and Double as output","body":"<p>I've made a Matrix class in java and I wanted to add some <code>init()</code> functions.<br />\nI need one that takes as the first argument a <code>Function</code> object, and the function's arguments if needed as the second.<br />\nI have encountered two problems:\\</p>\n<ul>\n<li>If the function only takes one argument, the notation <code>init(Function&lt;&gt; func, Object... args)</code> gives an error is thrown when compiling: <code>incompatible types: java.lang.Object cannot be converted to int</code>.</li>\n<li>If I work around that (by calling <code>init(FuncClass::Func, 7, null)</code>, which doesn't seem such a good idea), I have an error thrown at <code>func.apply(args)</code> because <code>incompatible types: java.lang.Object cannot be converted to int</code>.</li>\n</ul>\n<p>The current function definition is this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public void init(Function&lt;Object, Double&gt; function, Object... args){\n    for (int i = 0; i &lt; this.rows; i++) {\n        for (int j = 0; j &lt; this.cols; j++) {\n            this.data[i][j] = function.apply(args);\n        }\n    }\n}\n</code></pre>\n<p>The <code>data</code> object is defined as:<br />\n<code>double[][] data = new double[rows][cols];</code></p>\n<p>Edit: since it came up in the comments, I noticed that the title can be misunderstood.<br />\nThe problem isn't no input at all. It shouldn't have a predetermined input. I mean, it could be defined as <code>func()</code> as well as <code>func(double min, double max, Random rn, double seed)</code>.<br />\nIf you can suggest a more explanative title, please do.</p>\n"},{"tags":["java","eclipse","eclipse-plugin","jmockit"],"comments":[{"owner":{"account_id":1483555,"reputation":2434,"user_id":1392312,"accept_rate":92,"display_name":"Rossiar"},"score":0,"creation_date":1441355906,"post_id":32036544,"comment_id":52655904,"body_markdown":"Possible duplicate of http://stackoverflow.com/questions/2905735/jmockit-initialization-problem","body":"Possible duplicate of <a href=\"http://stackoverflow.com/questions/2905735/jmockit-initialization-problem\" title=\"jmockit initialization problem\">stackoverflow.com/questions/2905735/&hellip;</a>"}],"answers":[{"comments":[{"owner":{"account_id":47700,"reputation":3323,"user_id":141408,"accept_rate":68,"display_name":"Sergey"},"score":0,"creation_date":1441921303,"post_id":32405215,"comment_id":52883142,"body_markdown":"I am using the Oracle JDK, so it should not be the issue.","body":"I am using the Oracle JDK, so it should not be the issue."},{"owner":{"account_id":2046719,"reputation":1734,"user_id":1826647,"display_name":"JChrist"},"score":0,"creation_date":1441952738,"post_id":32405215,"comment_id":52891879,"body_markdown":"Have you checked the first point, i.e. specify jmockit before junit in the order and export tab?","body":"Have you checked the first point, i.e. specify jmockit before junit in the order and export tab?"},{"owner":{"account_id":47700,"reputation":3323,"user_id":141408,"accept_rate":68,"display_name":"Sergey"},"score":0,"creation_date":1442405635,"post_id":32405215,"comment_id":53067416,"body_markdown":"Yes, I did. It is also needed only if you don&#39;t use the @RunWith(MockitoJUnit44Runner.class) annotation.","body":"Yes, I did. It is also needed only if you don&#39;t use the @RunWith(MockitoJUnit44Runner.class) annotation."}],"tags":[],"owner":{"account_id":2046719,"reputation":1734,"user_id":1826647,"display_name":"JChrist"},"comment_count":3,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1441394643,"creation_date":1441394643,"answer_id":32405215,"question_id":32036544,"body_markdown":"I would expect that `@RunWith(JMockit.class)` should have taken care of this problem.\r\n\r\nIn any case, from JMockit tutorial [here][1], there are some notes that you should check, in case these resolve your issue. In particular, these two seem to be most relevant:\r\n&gt; - (Note for Eclipse users: when specifying the order of jars in the &gt;classpath, make sure to use the &quot;Order and Export&quot; tab of the &quot;Java Build &gt;Path&quot; window. Also, make sure the Eclipse project uses the JRE from a JDK &gt;installation instead of a &quot;plain&quot; JRE, since the latter lacks the &gt;&quot;attach&quot; native library.)\r\n&gt; - In other situations (like running on JDK implementations other than &gt;the Oracle JDKs), you may need to pass &quot;-javaagent:&lt;proper &gt;path&gt;/jmockit.jar&quot; as a JVM initialization parameter. This can be done in &gt;the &quot;Run/Debug Configuration&quot; for both Eclipse and IntelliJ IDEA, or with &gt;build tools such as Ant and Maven.\r\n\r\n  [1]: http://jmockit.org/tutorial/Introduction.html#runningTests","title":"JMockIt fails with AgentInitializationException: Agent JAR loaded but agent failed to initialize","body":"<p>I would expect that <code>@RunWith(JMockit.class)</code> should have taken care of this problem.</p>\n\n<p>In any case, from JMockit tutorial <a href=\"http://jmockit.org/tutorial/Introduction.html#runningTests\" rel=\"nofollow\">here</a>, there are some notes that you should check, in case these resolve your issue. In particular, these two seem to be most relevant:</p>\n\n<blockquote>\n  <ul>\n  <li>(Note for Eclipse users: when specifying the order of jars in the >classpath, make sure to use the \"Order and Export\" tab of the \"Java Build >Path\" window. Also, make sure the Eclipse project uses the JRE from a JDK >installation instead of a \"plain\" JRE, since the latter lacks the >\"attach\" native library.)</li>\n  <li>In other situations (like running on JDK implementations other than >the Oracle JDKs), you may need to pass \"-javaagent:path>/jmockit.jar\" as a JVM initialization parameter. This can be done in >the \"Run/Debug Configuration\" for both Eclipse and IntelliJ IDEA, or with >build tools such as Ant and Maven.</li>\n  </ul>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":6462334,"reputation":997,"user_id":5005676,"display_name":"Shubham Verma"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1466496835,"creation_date":1466496835,"answer_id":37938973,"question_id":32036544,"body_markdown":"Right click your project in Package Explorer \r\n&gt; click Properties.\r\n&gt; go to Java Build Path.\r\n&gt; Libraries tab.\r\n&gt; click on &#39;Add Library&#39; button select JUnit click Next. \r\nYou should be able to handle it from there.\r\n\r\nAfter that if you use coverage as : you will be able to see the coverage.","title":"JMockIt fails with AgentInitializationException: Agent JAR loaded but agent failed to initialize","body":"<p>Right click your project in Package Explorer </p>\n\n<blockquote>\n  <p>click Properties.\n  go to Java Build Path.\n  Libraries tab.\n  click on 'Add Library' button select JUnit click Next. \n  You should be able to handle it from there.</p>\n</blockquote>\n\n<p>After that if you use coverage as : you will be able to see the coverage.</p>\n"},{"tags":[],"owner":{"account_id":7749923,"reputation":563,"user_id":5866166,"accept_rate":60,"display_name":"Pavan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669218934,"creation_date":1669218934,"answer_id":74549672,"question_id":32036544,"body_markdown":"pass the following paramter through the VM args.\r\n\r\n    -javaagent:&lt;path&gt;/jmockit.jar","title":"JMockIt fails with AgentInitializationException: Agent JAR loaded but agent failed to initialize","body":"<p>pass the following paramter through the VM args.</p>\n<pre><code>-javaagent:&lt;path&gt;/jmockit.jar\n</code></pre>\n"}],"owner":{"account_id":47700,"reputation":3323,"user_id":141408,"accept_rate":68,"display_name":"Sergey"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3910,"favorite_count":0,"down_vote_count":0,"up_vote_count":10,"answer_count":3,"score":10,"last_activity_date":1669218934,"creation_date":1439737542,"question_id":32036544,"body_markdown":"I am developing a plugin for Eclipse Kepler. Adding @RunWith(JMockit.class) to my test class causes the following error:\r\n\r\n        JMockit: Reinitializing under custom class loader org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader@b7ccec1[com.mypackage.myclass:2.3.9.201508161221(id=1)]\r\n    java.lang.reflect.InvocationTargetException\r\n            at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n            at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\r\n            at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n            at java.lang.reflect.Method.invoke(Method.java:606)\r\n            at sun.instrument.InstrumentationImpl.loadClassAndStartAgent(InstrumentationImpl.java:382)\r\n            at sun.instrument.InstrumentationImpl.loadClassAndCallAgentmain(InstrumentationImpl.java:407)\r\n    Caused by: java.lang.VerifyError\r\n            at sun.instrument.InstrumentationImpl.redefineClasses0(Native Method)\r\n            at sun.instrument.InstrumentationImpl.redefineClasses(InstrumentationImpl.java:170)\r\n            at mockit.internal.startup.Startup.redefineMethods(Startup.java:242)\r\n            at mockit.internal.startup.Startup.redefineMethods(Startup.java:236)\r\n            at mockit.internal.mockups.MockClassSetup.applyClassModifications(MockClassSetup.java:134)\r\n            at mockit.internal.mockups.MockClassSetup.redefineMethodsInClassHierarchy(MockClassSetup.java:91)\r\n            at mockit.internal.mockups.MockClassSetup.redefineMethods(MockClassSetup.java:76)\r\n            at mockit.MockUp.redefineMethods(MockUp.java:240)\r\n            at mockit.MockUp.redefineClassOrImplementInterface(MockUp.java:222)\r\n            at mockit.MockUp.&lt;init&gt;(MockUp.java:131)\r\n            at mockit.integration.junit4.internal.RunNotifierDecorator.&lt;init&gt;(RunNotifierDecorator.java:21)\r\n            at mockit.internal.startup.JMockitInitialization.loadInternalStartupMocksForJUnitIntegration(JMockitInitialization.java:42)\r\n            at mockit.internal.startup.JMockitInitialization.initialize(JMockitInitialization.java:27)\r\n            at mockit.internal.startup.Startup.applyStartupMocks(Startup.java:72)\r\n            at mockit.internal.startup.Startup.reapplyStartupMocks(Startup.java:124)\r\n            at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n            at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\r\n            at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n            at java.lang.reflect.Method.invoke(Method.java:606)\r\n            at mockit.internal.util.MethodReflection.invoke(MethodReflection.java:94)\r\n            at mockit.internal.util.MethodReflection.invoke(MethodReflection.java:159)\r\n            at mockit.internal.startup.Startup.reinitializeJMockitUnderCustomClassLoader(Startup.java:118)\r\n            at mockit.internal.startup.Startup.agentmain(Startup.java:101)\r\n            ... 6 more\r\n    java.lang.IllegalStateException: com.sun.tools.attach.AgentInitializationException: Agent JAR loaded but agent failed to initialize\r\n            at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\r\n            at java.lang.reflect.Constructor.newInstance(Constructor.java:526)\r\n            at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:262)\r\n            at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:153)\r\n            at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:124)\r\n            at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n            at java.lang.reflect.Method.invoke(Method.java:606)\r\n            at org.apache.maven.surefire.util.ReflectionUtils.invokeMethodWithArray2(ReflectionUtils.java:208)\r\n            at org.apache.maven.surefire.booter.ProviderFactory$ProviderProxy.invoke(ProviderFactory.java:156)\r\n            at org.apache.maven.surefire.booter.ProviderFactory.invokeProvider(ProviderFactory.java:82)\r\n            at org.eclipse.tycho.surefire.osgibooter.OsgiSurefireBooter.run(OsgiSurefireBooter.java:91)\r\n            at org.eclipse.tycho.surefire.osgibooter.AbstractUITestApplication$1.run(AbstractUITestApplication.java:35)\r\n            at org.eclipse.swt.widgets.RunnableLock.run(RunnableLock.java:35)\r\n            at org.eclipse.swt.widgets.Synchronizer.runAsyncMessages(Synchronizer.java:135)\r\n            at org.eclipse.swt.widgets.Display.runAsyncMessages(Display.java:4145)\r\n            at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3762)\r\n            at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$9.run(PartRenderingEngine.java:1113)\r\n            at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)\r\n            at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.run(PartRenderingEngine.java:997)\r\n            at org.eclipse.e4.ui.internal.workbench.E4Workbench.createAndRunUI(E4Workbench.java:140)\r\n            at org.eclipse.ui.internal.Workbench$5.run(Workbench.java:611)\r\n            at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)\r\n            at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:567)\r\n            at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:150)\r\n            at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:124)\r\n            at org.eclipse.tycho.surefire.osgibooter.UITestApplication.runApplication(UITestApplication.java:31)\r\n            at org.eclipse.tycho.surefire.osgibooter.AbstractUITestApplication.run(AbstractUITestApplication.java:120)\r\n            at org.eclipse.tycho.surefire.osgibooter.UITestApplication.start(UITestApplication.java:37)\r\n            at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)\r\n            at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)\r\n            at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)\r\n            at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:354)\r\n            at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:181)\r\n            at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n            at java.lang.reflect.Method.invoke(Method.java:606)\r\n            at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:636)\r\n            at org.eclipse.equinox.launcher.Main.basicRun(Main.java:591)\r\n            at org.eclipse.equinox.launcher.Main.run(Main.java:1450)\r\n            at org.eclipse.equinox.launcher.Main.main(Main.java:1426)\r\n    Caused by: com.sun.tools.attach.AgentInitializationException: Agent JAR loaded but agent failed to initialize\r\n            ... 39 more\r\n\r\nAm I doing something wrong or it is a JMockIt bug? I am using version JMockIt  1.18, JUnit 4.12","title":"JMockIt fails with AgentInitializationException: Agent JAR loaded but agent failed to initialize","body":"<p>I am developing a plugin for Eclipse Kepler. Adding @RunWith(JMockit.class) to my test class causes the following error:</p>\n\n<pre><code>    JMockit: Reinitializing under custom class loader org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader@b7ccec1[com.mypackage.myclass:2.3.9.201508161221(id=1)]\njava.lang.reflect.InvocationTargetException\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n        at java.lang.reflect.Method.invoke(Method.java:606)\n        at sun.instrument.InstrumentationImpl.loadClassAndStartAgent(InstrumentationImpl.java:382)\n        at sun.instrument.InstrumentationImpl.loadClassAndCallAgentmain(InstrumentationImpl.java:407)\nCaused by: java.lang.VerifyError\n        at sun.instrument.InstrumentationImpl.redefineClasses0(Native Method)\n        at sun.instrument.InstrumentationImpl.redefineClasses(InstrumentationImpl.java:170)\n        at mockit.internal.startup.Startup.redefineMethods(Startup.java:242)\n        at mockit.internal.startup.Startup.redefineMethods(Startup.java:236)\n        at mockit.internal.mockups.MockClassSetup.applyClassModifications(MockClassSetup.java:134)\n        at mockit.internal.mockups.MockClassSetup.redefineMethodsInClassHierarchy(MockClassSetup.java:91)\n        at mockit.internal.mockups.MockClassSetup.redefineMethods(MockClassSetup.java:76)\n        at mockit.MockUp.redefineMethods(MockUp.java:240)\n        at mockit.MockUp.redefineClassOrImplementInterface(MockUp.java:222)\n        at mockit.MockUp.&lt;init&gt;(MockUp.java:131)\n        at mockit.integration.junit4.internal.RunNotifierDecorator.&lt;init&gt;(RunNotifierDecorator.java:21)\n        at mockit.internal.startup.JMockitInitialization.loadInternalStartupMocksForJUnitIntegration(JMockitInitialization.java:42)\n        at mockit.internal.startup.JMockitInitialization.initialize(JMockitInitialization.java:27)\n        at mockit.internal.startup.Startup.applyStartupMocks(Startup.java:72)\n        at mockit.internal.startup.Startup.reapplyStartupMocks(Startup.java:124)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n        at java.lang.reflect.Method.invoke(Method.java:606)\n        at mockit.internal.util.MethodReflection.invoke(MethodReflection.java:94)\n        at mockit.internal.util.MethodReflection.invoke(MethodReflection.java:159)\n        at mockit.internal.startup.Startup.reinitializeJMockitUnderCustomClassLoader(Startup.java:118)\n        at mockit.internal.startup.Startup.agentmain(Startup.java:101)\n        ... 6 more\njava.lang.IllegalStateException: com.sun.tools.attach.AgentInitializationException: Agent JAR loaded but agent failed to initialize\n        at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n        at java.lang.reflect.Constructor.newInstance(Constructor.java:526)\n        at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:262)\n        at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:153)\n        at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:124)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at java.lang.reflect.Method.invoke(Method.java:606)\n        at org.apache.maven.surefire.util.ReflectionUtils.invokeMethodWithArray2(ReflectionUtils.java:208)\n        at org.apache.maven.surefire.booter.ProviderFactory$ProviderProxy.invoke(ProviderFactory.java:156)\n        at org.apache.maven.surefire.booter.ProviderFactory.invokeProvider(ProviderFactory.java:82)\n        at org.eclipse.tycho.surefire.osgibooter.OsgiSurefireBooter.run(OsgiSurefireBooter.java:91)\n        at org.eclipse.tycho.surefire.osgibooter.AbstractUITestApplication$1.run(AbstractUITestApplication.java:35)\n        at org.eclipse.swt.widgets.RunnableLock.run(RunnableLock.java:35)\n        at org.eclipse.swt.widgets.Synchronizer.runAsyncMessages(Synchronizer.java:135)\n        at org.eclipse.swt.widgets.Display.runAsyncMessages(Display.java:4145)\n        at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3762)\n        at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$9.run(PartRenderingEngine.java:1113)\n        at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)\n        at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.run(PartRenderingEngine.java:997)\n        at org.eclipse.e4.ui.internal.workbench.E4Workbench.createAndRunUI(E4Workbench.java:140)\n        at org.eclipse.ui.internal.Workbench$5.run(Workbench.java:611)\n        at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)\n        at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:567)\n        at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:150)\n        at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:124)\n        at org.eclipse.tycho.surefire.osgibooter.UITestApplication.runApplication(UITestApplication.java:31)\n        at org.eclipse.tycho.surefire.osgibooter.AbstractUITestApplication.run(AbstractUITestApplication.java:120)\n        at org.eclipse.tycho.surefire.osgibooter.UITestApplication.start(UITestApplication.java:37)\n        at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)\n        at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)\n        at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)\n        at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:354)\n        at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:181)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at java.lang.reflect.Method.invoke(Method.java:606)\n        at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:636)\n        at org.eclipse.equinox.launcher.Main.basicRun(Main.java:591)\n        at org.eclipse.equinox.launcher.Main.run(Main.java:1450)\n        at org.eclipse.equinox.launcher.Main.main(Main.java:1426)\nCaused by: com.sun.tools.attach.AgentInitializationException: Agent JAR loaded but agent failed to initialize\n        ... 39 more\n</code></pre>\n\n<p>Am I doing something wrong or it is a JMockIt bug? I am using version JMockIt  1.18, JUnit 4.12</p>\n"},{"tags":["java","android","progressive-web-apps","offlineapps","trusted-web-activity"],"comments":[{"owner":{"account_id":18884032,"reputation":11,"user_id":13775855,"display_name":"Toushirou"},"score":0,"creation_date":1669218811,"post_id":74535401,"comment_id":131595933,"body_markdown":"this has been solved","body":"this has been solved"}],"owner":{"account_id":18884032,"reputation":11,"user_id":13775855,"display_name":"Toushirou"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":64,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1669218859,"creation_date":1669132156,"question_id":74535401,"body_markdown":"This is my first Android project using Java and XML. (Which has been a process)\r\n\r\nI&#39;m having problems extending my `LauncherActivity` to display an Offline-Screen \r\n\r\nI have been following [Offline-First Trusted Web Activities](https://developer.chrome.com/docs/android/trusted-web-activity/offline-first/#create-a-custom-launcheractivity)\r\n\r\nWhen this didn&#39;t work I followed some other Stackoverflows [Taking users to offline activity](https://stackoverflow.com/questions/67648775/take-user-to-offline-activity-screen-when-no-internet-connection-in-android-stud) |  [No internet Layout](https://stackoverflow.com/questions/51070623/how-to-use-a-custom-no-internet-connection-available-layout-when-user-is-offline)\r\n\r\nI noticed the key elements for this to work. \r\n1. adding `user network perms to Mani fest. `\r\n2. calling the new `offline activity` extend the `Launcher Activity` | *`Java file`*.\r\n3. registering `offline activity in the Mani fest.` \r\n4. Error handling | *`Java file`*\r\n5. adding helpers `ConnectivityManager` / rendering `Layout activity` | *`Java file &amp; XML`*\r\n\r\nwhen I run the build - I still get the Dinosaur. \r\n\r\nI used the code demo from - Chrome Dev as referenced above and followed up by using code from\r\n[Offline First Demo](https://github.com/GoogleChrome/android-browser-helper/tree/main/demos/twa-offline-first)","title":"TWA - Struggling w/ Offline Screen implementation","body":"<p>This is my first Android project using Java and XML. (Which has been a process)</p>\n<p>I'm having problems extending my <code>LauncherActivity</code> to display an Offline-Screen</p>\n<p>I have been following <a href=\"https://developer.chrome.com/docs/android/trusted-web-activity/offline-first/#create-a-custom-launcheractivity\" rel=\"nofollow noreferrer\">Offline-First Trusted Web Activities</a></p>\n<p>When this didn't work I followed some other Stackoverflows <a href=\"https://stackoverflow.com/questions/67648775/take-user-to-offline-activity-screen-when-no-internet-connection-in-android-stud\">Taking users to offline activity</a> |  <a href=\"https://stackoverflow.com/questions/51070623/how-to-use-a-custom-no-internet-connection-available-layout-when-user-is-offline\">No internet Layout</a></p>\n<p>I noticed the key elements for this to work.</p>\n<ol>\n<li>adding <code>user network perms to Mani fest. </code></li>\n<li>calling the new <code>offline activity</code> extend the <code>Launcher Activity</code> | <em><code>Java file</code></em>.</li>\n<li>registering <code>offline activity in the Mani fest.</code></li>\n<li>Error handling | <em><code>Java file</code></em></li>\n<li>adding helpers <code>ConnectivityManager</code> / rendering <code>Layout activity</code> | <em><code>Java file &amp; XML</code></em></li>\n</ol>\n<p>when I run the build - I still get the Dinosaur.</p>\n<p>I used the code demo from - Chrome Dev as referenced above and followed up by using code from\n<a href=\"https://github.com/GoogleChrome/android-browser-helper/tree/main/demos/twa-offline-first\" rel=\"nofollow noreferrer\">Offline First Demo</a></p>\n"},{"tags":["java","spring","exception","dropwizard","model-validation"],"owner":{"account_id":27026152,"reputation":11,"user_id":20583392,"display_name":"Raj"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":121,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1669218334,"creation_date":1669218334,"question_id":74549511,"body_markdown":"When I have @Auth and a body(object) in a POST API in Dropwizard getting the following error while running Tests:\r\n\r\n`Caused by: org.glassfish.jersey.server.model.ModelValidationException: Validation of the application resource model has failed during application initialization.`\r\n\r\nHere is my API code:\r\n`\r\n```\r\n@POST\r\n@Path(&quot;api/v2/test/{id}/status&quot;)\r\n@Timed\r\n@ApiOperation(value = &quot;Post your status&quot;,\r\n        response = Response.class)\r\npublic Response postStatus(@Context HttpServletRequest requestContext,\r\n                           @Context UriInfo requestUri,\r\n                           PostStatusReq postStatusReq,\r\n                           @Auth TestAAAuthenticator equip,\r\n                           @PathParam(&quot;id&quot;) Long id\r\n\r\n) {\r\n    log.warn(&quot;postStatus: &quot;+ postStatusReq);\r\n    return Response.ok(&quot;OK&quot;).build();\r\n}\r\n```\r\n`\r\nI have these in my Parent class file:\r\n`\r\n```\r\n\r\n```\r\n```\r\nfinal OAuthCredentialAuthFilter&lt;User&gt; oAuthCredentialAuthFilter = new OAuthCredentialAuthFilter.Builder&lt;User&gt;()\r\n        .setAuthenticator(authenticator)\r\n        .setAuthorizer(new AAAuthorizer())\r\n        .setPrefix(&quot;Bearer&quot;)\r\n        .buildAuthFilter();\r\nenvironment.jersey().register(new AuthDynamicFeature(oAuthCredentialAuthFilter));\r\n```\r\n```\r\n\r\nenvironment.jersey().register(new AuthValueFactoryProvider.Binder&lt;&gt;(User.class));\r\n```\r\n`\r\nUsing Versions:\r\nMaven: 3.6.1\r\nJava: 17\r\nDropwizard: 2.0.28\r\n\r\nTried looking up in stackoverflow and github for similar problem:\r\nhttps://github.com/dropwizard/dropwizard/issues/783\r\nhttps://github.com/dropwizard/dropwizard/issues/1329\r\n\r\nBut I already have these in my code.\r\n\r\nBtwn I&#39;m using @Pathparam from javax.ws.rs\r\nNote: If I remove @Auth TestAAAuthenticator equip or PostStatusReq postStatusReq from the API request everything works fine. But I need both in API. Any help will be much appreciated. Thank you!","title":"ModelValidationException: Validation of the application resource model has failed during application initialization","body":"<p>When I have @Auth and a body(object) in a POST API in Dropwizard getting the following error while running Tests:</p>\n<p><code>Caused by: org.glassfish.jersey.server.model.ModelValidationException: Validation of the application resource model has failed during application initialization.</code></p>\n<p>Here is my API code:\n`</p>\n<pre><code>@POST\n@Path(&quot;api/v2/test/{id}/status&quot;)\n@Timed\n@ApiOperation(value = &quot;Post your status&quot;,\n        response = Response.class)\npublic Response postStatus(@Context HttpServletRequest requestContext,\n                           @Context UriInfo requestUri,\n                           PostStatusReq postStatusReq,\n                           @Auth TestAAAuthenticator equip,\n                           @PathParam(&quot;id&quot;) Long id\n\n) {\n    log.warn(&quot;postStatus: &quot;+ postStatusReq);\n    return Response.ok(&quot;OK&quot;).build();\n}\n</code></pre>\n<p><code>I have these in my Parent class file:</code></p>\n<pre><code>\n</code></pre>\n<pre><code>final OAuthCredentialAuthFilter&lt;User&gt; oAuthCredentialAuthFilter = new OAuthCredentialAuthFilter.Builder&lt;User&gt;()\n        .setAuthenticator(authenticator)\n        .setAuthorizer(new AAAuthorizer())\n        .setPrefix(&quot;Bearer&quot;)\n        .buildAuthFilter();\nenvironment.jersey().register(new AuthDynamicFeature(oAuthCredentialAuthFilter));\n</code></pre>\n<pre><code>\nenvironment.jersey().register(new AuthValueFactoryProvider.Binder&lt;&gt;(User.class));\n</code></pre>\n<p>`\nUsing Versions:\nMaven: 3.6.1\nJava: 17\nDropwizard: 2.0.28</p>\n<p>Tried looking up in stackoverflow and github for similar problem:\n<a href=\"https://github.com/dropwizard/dropwizard/issues/783\" rel=\"nofollow noreferrer\">https://github.com/dropwizard/dropwizard/issues/783</a>\n<a href=\"https://github.com/dropwizard/dropwizard/issues/1329\" rel=\"nofollow noreferrer\">https://github.com/dropwizard/dropwizard/issues/1329</a></p>\n<p>But I already have these in my code.</p>\n<p>Btwn I'm using @Pathparam from javax.ws.rs\nNote: If I remove @Auth TestAAAuthenticator equip or PostStatusReq postStatusReq from the API request everything works fine. But I need both in API. Any help will be much appreciated. Thank you!</p>\n"},{"tags":["java","mapstruct"],"comments":[{"owner":{"account_id":26774791,"reputation":826,"user_id":20370596,"display_name":"Christoph Dahlen"},"score":0,"creation_date":1669056135,"post_id":74522692,"comment_id":131551639,"body_markdown":"Check out that you are actually using org.mapstruct.Named and not javax.inject.Named.","body":"Check out that you are actually using org.mapstruct.Named and not javax.inject.Named."},{"owner":{"account_id":2842936,"reputation":2530,"user_id":2442133,"accept_rate":57,"display_name":"mkczyk"},"score":0,"creation_date":1669104179,"post_id":74522692,"comment_id":131561577,"body_markdown":"Yes, I&#39;m using `org.mapstruct.Named`, `org.mapstruct.Context`.","body":"Yes, I&#39;m using <code>org.mapstruct.Named</code>, <code>org.mapstruct.Context</code>."}],"answers":[{"tags":[],"owner":{"account_id":14162458,"reputation":3910,"user_id":10231374,"display_name":"Toni"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669218106,"creation_date":1669217634,"answer_id":74549364,"question_id":74522692,"body_markdown":"As mentioned in the referenced answer, you could solve it in two ways described below.\r\n\r\n### `@Context`\r\n\r\nThis solution sets `valueWithName` after mapping of `Child` object. Iteration through those objects is done only once, but it requires passing a `ParentNameContext` object to the mapping method.\r\n```java\r\n@Mapper\r\npublic interface MyMapper {\r\n  ParentDto map(Parent parent, @Context ParentNameContext parentNameContext);\r\n}\r\n```\r\n```java\r\npublic class ParentNameContext {\r\n\r\n  private String parentName;\r\n\r\n  @AfterMapping\r\n  public void afterChildMapping(@MappingTarget ChildDto childDto, Child child) {\r\n    childDto.setValueWithName(child.getValue() + parentName);\r\n  }\r\n}\r\n```\r\n\r\n### `@AfterMapping`\r\n\r\nThis solution doesn&#39;t require any additional objects to be passed to the mapping method, but it iterates twice through `Child` objects because `valueWithName` is set after `Parent` object mapping.\r\n```java\r\n@Mapper\r\npublic interface MyMapper {\r\n  ParentDto map(Parent parent);\r\n\r\n  @AfterMapping\r\n  default void afterMapping(@MappingTarget ParentDto parentDto, Parent parent) {\r\n    List&lt;Child&gt; children = parent.getChildren();\r\n    List&lt;ChildDto&gt; dtoChildren = parentDto.getChildren();\r\n    for (int i = 0; i &lt; children.size(); i++)\r\n      dtoChildren.get(i).setValueWithName(children.get(i).getValue() + parent.getName());\r\n  }\r\n}\r\n```\r\n\r\nTo suppress the &quot;Unmapped target property&quot; warning check [Anatoly&#39;s answer][1]. \r\n\r\n\r\n  [1]: https://stackoverflow.com/a/54656081/10231374","title":"MapStruct - pass parent to child in list mapping","body":"<p>As mentioned in the referenced answer, you could solve it in two ways described below.</p>\n<h3><code>@Context</code></h3>\n<p>This solution sets <code>valueWithName</code> after mapping of <code>Child</code> object. Iteration through those objects is done only once, but it requires passing a <code>ParentNameContext</code> object to the mapping method.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Mapper\npublic interface MyMapper {\n  ParentDto map(Parent parent, @Context ParentNameContext parentNameContext);\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>public class ParentNameContext {\n\n  private String parentName;\n\n  @AfterMapping\n  public void afterChildMapping(@MappingTarget ChildDto childDto, Child child) {\n    childDto.setValueWithName(child.getValue() + parentName);\n  }\n}\n</code></pre>\n<h3><code>@AfterMapping</code></h3>\n<p>This solution doesn't require any additional objects to be passed to the mapping method, but it iterates twice through <code>Child</code> objects because <code>valueWithName</code> is set after <code>Parent</code> object mapping.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Mapper\npublic interface MyMapper {\n  ParentDto map(Parent parent);\n\n  @AfterMapping\n  default void afterMapping(@MappingTarget ParentDto parentDto, Parent parent) {\n    List&lt;Child&gt; children = parent.getChildren();\n    List&lt;ChildDto&gt; dtoChildren = parentDto.getChildren();\n    for (int i = 0; i &lt; children.size(); i++)\n      dtoChildren.get(i).setValueWithName(children.get(i).getValue() + parent.getName());\n  }\n}\n</code></pre>\n<p>To suppress the &quot;Unmapped target property&quot; warning check <a href=\"https://stackoverflow.com/a/54656081/10231374\">Anatoly's answer</a>.</p>\n"}],"owner":{"account_id":2842936,"reputation":2530,"user_id":2442133,"accept_rate":57,"display_name":"mkczyk"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2164,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1669218106,"creation_date":1669051402,"question_id":74522692,"body_markdown":"I map classes to DTO with MapStruct. But I need to pass parent object to child mapper because I have to use values from parent for mapping child.\r\n\r\nI try to pass parent with `@Context`:\r\n\r\n    @Mapping(target = &quot;valueWithName&quot;, source = &quot;child&quot;, qualifiedByName = &quot;getValueWithName&quot;)\r\n    ChildDto map(Child child, @Context Parent parent);\r\n    \r\n    @Named(&quot;getValueWithName&quot;)\r\n    default String getValueWithName(Child child, @Context Parent parent) {\r\n        return child.getValue() + parent.getName();\r\n    }\r\n\r\nBut it cause compilation error:\r\n\r\n    Example.java:44:19\r\n    java: Unmapped target property: &quot;valueWithName&quot;. Mapping from Collection element &quot;Example.Child children&quot; to &quot;Example.ChildDto children&quot;.\r\n\r\n\r\nHere is simple full working example:\r\n\r\n    public class Example {\r\n    \r\n        @Data\r\n        @AllArgsConstructor\r\n        public static class Parent {\r\n            private String name;\r\n            private List&lt;Child&gt; children;\r\n        }\r\n    \r\n        @Data\r\n        @AllArgsConstructor\r\n        public static class Child {\r\n            private String value;\r\n        }\r\n    \r\n        @Data\r\n        @AllArgsConstructor\r\n        public static class ParentDto {\r\n            private String name;\r\n            private List&lt;ChildDto&gt; children;\r\n        }\r\n    \r\n        @Data\r\n        @AllArgsConstructor\r\n        public static class ChildDto {\r\n            private String valueWithName;\r\n        }\r\n    \r\n        @Mapper\r\n        public interface MyMapper {\r\n    \r\n            ParentDto map(Parent parent);\r\n    \r\n            @Mapping(target = &quot;valueWithName&quot;, source = &quot;child&quot;, qualifiedByName = &quot;getValueWithName&quot;)\r\n            ChildDto map(Child child);\r\n    \r\n            @Named(&quot;getValueWithName&quot;)\r\n            default String getValueWithName(Child child) {\r\n                return child.getValue() + &quot;name from parent&quot;; // TODO\r\n            }\r\n        }\r\n    \r\n        public static void main(String[] args) {\r\n            MyMapper mapper = Mappers.getMapper(MyMapper.class);\r\n            Parent parent = new Parent(&quot;a&quot;, List.of(new Child(&quot;b&quot;)));\r\n            ParentDto parentDto = mapper.map(parent);\r\n    \r\n            System.out.println(parentDto.getName()); // a\r\n            System.out.println(parentDto.getChildren().get(0).getValueWithName()); // expect: ba\r\n        }\r\n    }\r\n\r\nI saw similar [question with answer][1] but I think it&#39;s different case or I don&#39;t know how to use `@AfterMapping` in my case (notice that `child.getValue() + parent.getName()` is only example, I need to use many fields from parent, so I need to access to parent when mapping child; and also I have list of children).\r\n\r\nMapStruct version 1.5.3.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/53878367/mapstruct-propagate-parent-field-value-to-collection-of-nested-objects/53896638#53896638","title":"MapStruct - pass parent to child in list mapping","body":"<p>I map classes to DTO with MapStruct. But I need to pass parent object to child mapper because I have to use values from parent for mapping child.</p>\n<p>I try to pass parent with <code>@Context</code>:</p>\n<pre><code>@Mapping(target = &quot;valueWithName&quot;, source = &quot;child&quot;, qualifiedByName = &quot;getValueWithName&quot;)\nChildDto map(Child child, @Context Parent parent);\n\n@Named(&quot;getValueWithName&quot;)\ndefault String getValueWithName(Child child, @Context Parent parent) {\n    return child.getValue() + parent.getName();\n}\n</code></pre>\n<p>But it cause compilation error:</p>\n<pre><code>Example.java:44:19\njava: Unmapped target property: &quot;valueWithName&quot;. Mapping from Collection element &quot;Example.Child children&quot; to &quot;Example.ChildDto children&quot;.\n</code></pre>\n<p>Here is simple full working example:</p>\n<pre><code>public class Example {\n\n    @Data\n    @AllArgsConstructor\n    public static class Parent {\n        private String name;\n        private List&lt;Child&gt; children;\n    }\n\n    @Data\n    @AllArgsConstructor\n    public static class Child {\n        private String value;\n    }\n\n    @Data\n    @AllArgsConstructor\n    public static class ParentDto {\n        private String name;\n        private List&lt;ChildDto&gt; children;\n    }\n\n    @Data\n    @AllArgsConstructor\n    public static class ChildDto {\n        private String valueWithName;\n    }\n\n    @Mapper\n    public interface MyMapper {\n\n        ParentDto map(Parent parent);\n\n        @Mapping(target = &quot;valueWithName&quot;, source = &quot;child&quot;, qualifiedByName = &quot;getValueWithName&quot;)\n        ChildDto map(Child child);\n\n        @Named(&quot;getValueWithName&quot;)\n        default String getValueWithName(Child child) {\n            return child.getValue() + &quot;name from parent&quot;; // TODO\n        }\n    }\n\n    public static void main(String[] args) {\n        MyMapper mapper = Mappers.getMapper(MyMapper.class);\n        Parent parent = new Parent(&quot;a&quot;, List.of(new Child(&quot;b&quot;)));\n        ParentDto parentDto = mapper.map(parent);\n\n        System.out.println(parentDto.getName()); // a\n        System.out.println(parentDto.getChildren().get(0).getValueWithName()); // expect: ba\n    }\n}\n</code></pre>\n<p>I saw similar <a href=\"https://stackoverflow.com/questions/53878367/mapstruct-propagate-parent-field-value-to-collection-of-nested-objects/53896638#53896638\">question with answer</a> but I think it's different case or I don't know how to use <code>@AfterMapping</code> in my case (notice that <code>child.getValue() + parent.getName()</code> is only example, I need to use many fields from parent, so I need to access to parent when mapping child; and also I have list of children).</p>\n<p>MapStruct version 1.5.3.</p>\n"},{"tags":["java","reactive-programming","spring-webflux","project-reactor"],"comments":[{"owner":{"account_id":446597,"reputation":22464,"user_id":839733,"accept_rate":69,"display_name":"Abhijit Sarkar"},"score":1,"creation_date":1669206540,"post_id":74545881,"comment_id":131591081,"body_markdown":"Where is doSomething used?","body":"Where is doSomething used?"},{"owner":{"account_id":24502312,"reputation":1,"user_id":18417772,"display_name":"Steph"},"score":0,"creation_date":1669218067,"post_id":74545881,"comment_id":131595664,"body_markdown":"It&#39;s the method in the useCase","body":"It&#39;s the method in the useCase"},{"owner":{"account_id":6889297,"reputation":310,"user_id":5293388,"display_name":"Maciej Stępyra"},"score":0,"creation_date":1669218481,"post_id":74545881,"comment_id":131595814,"body_markdown":"If i think correctly - doOnNext expects void response and does not subscribe to doSomething result","body":"If i think correctly - doOnNext expects void response and does not subscribe to doSomething result"}],"owner":{"account_id":24502312,"reputation":1,"user_id":18417772,"display_name":"Steph"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":562,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1669218040,"creation_date":1669201927,"question_id":74545881,"body_markdown":"I&#39;m creating a reactive endpoint where some actions need to be performed. I want user to see an exception only &#39;retrieveServiceByParam&#39; fails, but any other error shouldn&#39;t be returned, only added in the logs.\r\nThis is my controller:\r\n\r\n```\r\n\r\nprivate final Map&lt;String, MyUseCase&gt; myUseCase; //map of the different implementations of my service\r\n\r\nretrieveServiceByParam(param)\r\n    .doOnNext(\r\n        useCase -&gt;\r\n            useCase.doSomething(xxx)\r\n    .subscribeOn(Schedulers.boundedElastic())\r\n    .subscribe();\r\n\r\nreturn retrieveServiceByParam(param).find().then();\r\n\r\n\r\nprivate Mono&lt;MyUseCase&gt; retrieveServiceByParam(final String param) {\r\n  return MyEnum.find(param)\r\n      .doOnError(\r\n          throwable -&gt; {\r\n            throw new NotFoundException(&quot;xxx&quot;);\r\n          })\r\n      .map(myUseCase::get);\r\n}\r\n\r\n```\r\n\r\nHere&#39;s the use case implementation (where the doOnError/doOnSuccess is not executed):\r\n\r\n\r\n```\r\n@Override\r\npublic Mono&lt;Void&gt; doSomething(final InputValues inputValues) {\r\n  return Mono.when(\r\n          firstAction(xxx),\r\n          secondAction(xxx)\r\n      .onErrorContinue((throwable,o) -&gt; log.error(&quot;ERROR&quot;))\r\n      .doOnSuccess(a -&gt; log.info(&quot;SUCCESS&quot;));\r\n}\r\n```\r\nBoth firstAction and secondAction return Mono&lt;Void&gt; and no matter if they fail or are successful, the onErrorContinue or doOnSuccess are never executed. \r\n\r\n\r\n\r\nIf in the controller I put everything in the &#39;return&#39; statement, the &#39;doOnError&#39;/&#39;doOnSuccess&#39; are executed correctly, but then the API returns an error if anything in the useCase fails (which I don&#39;t want it to). \r\n\r\n","title":"Spring WebFlux doOnSuccess/doOnError/onErrorContinue never executed","body":"<p>I'm creating a reactive endpoint where some actions need to be performed. I want user to see an exception only 'retrieveServiceByParam' fails, but any other error shouldn't be returned, only added in the logs.\nThis is my controller:</p>\n<pre><code>\nprivate final Map&lt;String, MyUseCase&gt; myUseCase; //map of the different implementations of my service\n\nretrieveServiceByParam(param)\n    .doOnNext(\n        useCase -&gt;\n            useCase.doSomething(xxx)\n    .subscribeOn(Schedulers.boundedElastic())\n    .subscribe();\n\nreturn retrieveServiceByParam(param).find().then();\n\n\nprivate Mono&lt;MyUseCase&gt; retrieveServiceByParam(final String param) {\n  return MyEnum.find(param)\n      .doOnError(\n          throwable -&gt; {\n            throw new NotFoundException(&quot;xxx&quot;);\n          })\n      .map(myUseCase::get);\n}\n\n</code></pre>\n<p>Here's the use case implementation (where the doOnError/doOnSuccess is not executed):</p>\n<pre><code>@Override\npublic Mono&lt;Void&gt; doSomething(final InputValues inputValues) {\n  return Mono.when(\n          firstAction(xxx),\n          secondAction(xxx)\n      .onErrorContinue((throwable,o) -&gt; log.error(&quot;ERROR&quot;))\n      .doOnSuccess(a -&gt; log.info(&quot;SUCCESS&quot;));\n}\n</code></pre>\n<p>Both firstAction and secondAction return Mono and no matter if they fail or are successful, the onErrorContinue or doOnSuccess are never executed.</p>\n<p>If in the controller I put everything in the 'return' statement, the 'doOnError'/'doOnSuccess' are executed correctly, but then the API returns an error if anything in the useCase fails (which I don't want it to).</p>\n"},{"tags":["java","android","firebase","kotlin","google-cloud-firestore"],"comments":[{"owner":{"account_id":72426,"reputation":573804,"user_id":209103,"accept_rate":73,"display_name":"Frank van Puffelen"},"score":0,"creation_date":1668891843,"post_id":74503713,"comment_id":131518060,"body_markdown":"Please don&#39;t post screenshots of your code, or other textual content. Instead post the actual text, and use the formatting tools of Stack Overflow to mark it up. Also see: [Why not upload images of code/errors when asking a question?](https://meta.stackoverflow.com/questions/285551/why-not-upload-images-of-code-errors-when-asking-a-question)","body":"Please don&#39;t post screenshots of your code, or other textual content. Instead post the actual text, and use the formatting tools of Stack Overflow to mark it up. Also see: <a href=\"https://meta.stackoverflow.com/questions/285551/why-not-upload-images-of-code-errors-when-asking-a-question\">Why not upload images of code/errors when asking a question?</a>"},{"owner":{"account_id":6819231,"reputation":132861,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1669018441,"post_id":74503713,"comment_id":131538435,"body_markdown":"Tell us what is wrong with shared code. Do you have any errors? Please respond using @AlexMamo","body":"Tell us what is wrong with shared code. Do you have any errors? Please respond using @AlexMamo"},{"owner":{"account_id":25383123,"reputation":1,"user_id":19195242,"display_name":"Syimicode"},"score":0,"creation_date":1669050363,"post_id":74503713,"comment_id":131549849,"body_markdown":"How to make each wallpaper have a different info description according to the clicked wallpaper? for my case all wallpapers have the same info description.. whereas every contributor to the wallpaper should be different @AlexMamo","body":"How to make each wallpaper have a different info description according to the clicked wallpaper? for my case all wallpapers have the same info description.. whereas every contributor to the wallpaper should be different @AlexMamo"},{"owner":{"account_id":72426,"reputation":573804,"user_id":209103,"accept_rate":73,"display_name":"Frank van Puffelen"},"score":1,"creation_date":1669052286,"post_id":74503713,"comment_id":131550494,"body_markdown":"Are you passing any info about the wallpaper the user clicked on into the activity?","body":"Are you passing any info about the wallpaper the user clicked on into the activity?"},{"owner":{"account_id":25383123,"reputation":1,"user_id":19195242,"display_name":"Syimicode"},"score":0,"creation_date":1669054936,"post_id":74503713,"comment_id":131551334,"body_markdown":"I&#39;m confused about how to provide info on each wallpaper with different contributor names @FrankvanPuffelen","body":"I&#39;m confused about how to provide info on each wallpaper with different contributor names @FrankvanPuffelen"}],"answers":[{"tags":[],"owner":{"account_id":27026256,"reputation":1,"user_id":20583476,"display_name":"user20583476"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669217885,"creation_date":1669217885,"answer_id":74549423,"question_id":74503713,"body_markdown":"you should be learning how to convert from json into array in kotlin ways and you should be working on Parcelable Data Class for eficiency data transfer.\r\n\r\nEach pressed button/list item should passing a certain data object includes Contributor, Document ID,etc to a detail screen using Parcelable Data Class.\r\n","title":"How to retrieve Firestore data ID on each different Wallpaper?","body":"<p>you should be learning how to convert from json into array in kotlin ways and you should be working on Parcelable Data Class for eficiency data transfer.</p>\n<p>Each pressed button/list item should passing a certain data object includes Contributor, Document ID,etc to a detail screen using Parcelable Data Class.</p>\n"}],"owner":{"account_id":25383123,"reputation":1,"user_id":19195242,"display_name":"Syimicode"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":108,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1669217885,"creation_date":1668891682,"question_id":74503713,"body_markdown":"I found a problem when (all) wallpaper is clicked, then the retrieved data is not the data it should be. Here&#39;s the application..\r\n\r\nWhat the app looks like:\r\n![1](https://i.stack.imgur.com/hejI1.jpg)\r\n\r\nThis is my firestore data with different `name` and `secretariat` in each wallpaper:\r\n\r\n![2](https://i.stack.imgur.com/p0pVq.jpg)\r\n\r\n\r\n![3](https://i.stack.imgur.com/hTMYX.jpg)\r\n\r\n\r\nThis is the code to retrieve data from the firestore into `textViewContributor` and `textViewSekretariat` located in `FinalWallpaperActivity`\r\n\r\n    lateinit var binding: ActivityInfoBinding\r\n    private var firestore = FirebaseFirestore.getInstance()\r\n\r\n    private lateinit var tvInputKontributor: TextView\r\n    private lateinit var tvInputSekretariat: TextView\r\n\r\n    override fun onCreate(savedInstanceState: Bundle?) {\r\n        super.onCreate(savedInstanceState)\r\n        binding = ActivityInfoBinding.inflate(layoutInflater)\r\n        setContentView(binding.root)\r\n\r\n        tvInputKontributor = findViewById(R.id.inputKontributor)\r\n        tvInputSekretariat = findViewById(R.id.inputSekretariat)\r\n\r\n        firestore.collection(&quot;wallpaper&quot;)\r\n            .get()\r\n            .addOnSuccessListener { result -&gt;\r\n                for (document in result) {\r\n                    Log.d(TAG, &quot;${document.id} =&gt; ${document.data}&quot;)\r\n\r\n                    if (document != null) {\r\n                        val name = document.data[&quot;name&quot;].toString()\r\n                        val sekretariat = document.data[&quot;sekretariat&quot;].toString()\r\n\r\n                        tvInputKontributor.text = name\r\n                        tvInputSekretariat.text = sekretariat\r\n                    }\r\n                }\r\n            }\r\n            .addOnFailureListener { exception -&gt;\r\n                Log.d(TAG, &quot;Error getting documents: &quot;, exception)\r\n            }\r\n\r\nThis is the `btnInfo` declaration to open the `InfoActivity`\r\n\r\n        btnInfo.setOnClickListener {\r\n            val i = Intent(this, InfoActivity::class.java)\r\n            startActivity(i)\r\n        }\r\n\r\n**How to make each wallpaper have a different info description according to the clicked wallpaper? For my case all wallpapers have the same info description.. Whereas every contributor to the wallpaper should be different**\r\n\r\n![6](https://i.stack.imgur.com/5BDOh.png)","title":"How to retrieve Firestore data ID on each different Wallpaper?","body":"<p>I found a problem when (all) wallpaper is clicked, then the retrieved data is not the data it should be. Here's the application..</p>\n<p>What the app looks like:\n<img src=\"https://i.stack.imgur.com/hejI1.jpg\" alt=\"1\" /></p>\n<p>This is my firestore data with different <code>name</code> and <code>secretariat</code> in each wallpaper:</p>\n<p><img src=\"https://i.stack.imgur.com/p0pVq.jpg\" alt=\"2\" /></p>\n<p><img src=\"https://i.stack.imgur.com/hTMYX.jpg\" alt=\"3\" /></p>\n<p>This is the code to retrieve data from the firestore into <code>textViewContributor</code> and <code>textViewSekretariat</code> located in <code>FinalWallpaperActivity</code></p>\n<pre><code>lateinit var binding: ActivityInfoBinding\nprivate var firestore = FirebaseFirestore.getInstance()\n\nprivate lateinit var tvInputKontributor: TextView\nprivate lateinit var tvInputSekretariat: TextView\n\noverride fun onCreate(savedInstanceState: Bundle?) {\n    super.onCreate(savedInstanceState)\n    binding = ActivityInfoBinding.inflate(layoutInflater)\n    setContentView(binding.root)\n\n    tvInputKontributor = findViewById(R.id.inputKontributor)\n    tvInputSekretariat = findViewById(R.id.inputSekretariat)\n\n    firestore.collection(&quot;wallpaper&quot;)\n        .get()\n        .addOnSuccessListener { result -&gt;\n            for (document in result) {\n                Log.d(TAG, &quot;${document.id} =&gt; ${document.data}&quot;)\n\n                if (document != null) {\n                    val name = document.data[&quot;name&quot;].toString()\n                    val sekretariat = document.data[&quot;sekretariat&quot;].toString()\n\n                    tvInputKontributor.text = name\n                    tvInputSekretariat.text = sekretariat\n                }\n            }\n        }\n        .addOnFailureListener { exception -&gt;\n            Log.d(TAG, &quot;Error getting documents: &quot;, exception)\n        }\n</code></pre>\n<p>This is the <code>btnInfo</code> declaration to open the <code>InfoActivity</code></p>\n<pre><code>    btnInfo.setOnClickListener {\n        val i = Intent(this, InfoActivity::class.java)\n        startActivity(i)\n    }\n</code></pre>\n<p><strong>How to make each wallpaper have a different info description according to the clicked wallpaper? For my case all wallpapers have the same info description.. Whereas every contributor to the wallpaper should be different</strong></p>\n<p><img src=\"https://i.stack.imgur.com/5BDOh.png\" alt=\"6\" /></p>\n"},{"tags":["java","multithreading"],"comments":[{"owner":{"account_id":43453,"reputation":16185,"user_id":127035,"accept_rate":71,"display_name":"ewan.chalmers"},"score":0,"creation_date":1423584687,"post_id":28436239,"comment_id":45202726,"body_markdown":"Note that if the doWork method does not change the state of the Foo instance (and particularly if Foo is immutable), then no synchronization is required.","body":"Note that if the doWork method does not change the state of the Foo instance (and particularly if Foo is immutable), then no synchronization is required."},{"owner":{"account_id":422870,"reputation":25925,"user_id":801894,"display_name":"Solomon Slow"},"score":0,"creation_date":1423587132,"post_id":28436239,"comment_id":45204441,"body_markdown":"+1 @JamesWatson who gave the only answer that told you to make `xx` private.  No point in providing synchronized methods to operate on data that other methods can access without synchronization.","body":"+1 @JamesWatson who gave the only answer that told you to make <code>xx</code> private.  No point in providing synchronized methods to operate on data that other methods can access without synchronization."}],"answers":[{"comments":[{"owner":{"account_id":1258981,"reputation":14388,"user_id":1217820,"accept_rate":85,"display_name":"Snake"},"score":0,"creation_date":1423585392,"post_id":28436262,"comment_id":45203187,"body_markdown":"Please see edit to the question, will your way still apply as it will be two different instances?","body":"Please see edit to the question, will your way still apply as it will be two different instances?"},{"owner":{"account_id":413891,"reputation":3932,"user_id":787793,"accept_rate":70,"display_name":"nebula"},"score":0,"creation_date":1423585897,"post_id":28436262,"comment_id":45203520,"body_markdown":"And the answer is no. If it is util method may be you want it to be as a `static`? Then it will work.","body":"And the answer is no. If it is util method may be you want it to be as a <code>static</code>? Then it will work."},{"owner":{"account_id":1493453,"reputation":464,"user_id":1399956,"accept_rate":100,"display_name":"James Watson"},"score":0,"creation_date":1423586833,"post_id":28436262,"comment_id":45204208,"body_markdown":"Using `static` here is overkill because it will prevent **all** instances of `Foo` from being accessed through any instance of Utility via `doWork`.  Using an explicit `synchronize` block on the `Foo` instance should solve the problem at the right level.  I never use the syntactic sugar of `synchronized` on method declarations.  I believe it&#39;s the main reason there is so much confusion around synchronization in Java.","body":"Using <code>static</code> here is overkill because it will prevent <b>all</b> instances of <code>Foo</code> from being accessed through any instance of Utility via <code>doWork</code>.  Using an explicit <code>synchronize</code> block on the <code>Foo</code> instance should solve the problem at the right level.  I never use the syntactic sugar of <code>synchronized</code> on method declarations.  I believe it&#39;s the main reason there is so much confusion around synchronization in Java."},{"owner":{"account_id":413891,"reputation":3932,"user_id":787793,"accept_rate":70,"display_name":"nebula"},"score":0,"creation_date":1423587107,"post_id":28436262,"comment_id":45204415,"body_markdown":"You are right. Like I said in previous comment, if it is meant to be util method then there&#39;s no need for instance of `Foo` inside Utilty class. Just pass the `Foo` in `doWork()` method.","body":"You are right. Like I said in previous comment, if it is meant to be util method then there&#39;s no need for instance of <code>Foo</code> inside Utilty class. Just pass the <code>Foo</code> in <code>doWork()</code> method."}],"tags":[],"owner":{"account_id":413891,"reputation":3932,"user_id":787793,"accept_rate":70,"display_name":"nebula"},"comment_count":4,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1423586591,"creation_date":1423584403,"answer_id":28436262,"question_id":28436239,"body_markdown":"You can use `synchronized` key word.\r\n\r\n\r\n     public synchronized void doWork(){\r\n           x.action();\r\n        }\r\n\r\nThis will make the method thread safe. More on synchronized methods on [Oracle documentation][1].\r\n\r\n**With the updated question:**\r\nUse static method as synchronized, then the lock will be on the class not on individual object. \r\n\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/tutorial/essential/concurrency/syncmeth.html","title":"How to make this Threadsafe","body":"<p>You can use <code>synchronized</code> key word.</p>\n\n<pre><code> public synchronized void doWork(){\n       x.action();\n    }\n</code></pre>\n\n<p>This will make the method thread safe. More on synchronized methods on <a href=\"http://docs.oracle.com/javase/tutorial/essential/concurrency/syncmeth.html\" rel=\"nofollow\">Oracle documentation</a>.</p>\n\n<p><strong>With the updated question:</strong>\nUse static method as synchronized, then the lock will be on the class not on individual object. </p>\n"},{"comments":[{"owner":{"account_id":1258981,"reputation":14388,"user_id":1217820,"accept_rate":85,"display_name":"Snake"},"score":0,"creation_date":1423585355,"post_id":28436274,"comment_id":45203161,"body_markdown":"Please see edit to the question, will your way still apply as it will be two different instances?","body":"Please see edit to the question, will your way still apply as it will be two different instances?"},{"owner":{"account_id":48693,"reputation":29189,"user_id":144746,"accept_rate":93,"display_name":"Voo"},"score":0,"creation_date":1423585723,"post_id":28436274,"comment_id":45203400,"body_markdown":"@Snake Don&#39;t completely change the question after you&#39;ve already received answers - the reason should be obvious. Also no it won&#39;t.","body":"@Snake Don&#39;t completely change the question after you&#39;ve already received answers - the reason should be obvious. Also no it won&#39;t."},{"owner":{"account_id":1258981,"reputation":14388,"user_id":1217820,"accept_rate":85,"display_name":"Snake"},"score":0,"creation_date":1423589387,"post_id":28436274,"comment_id":45205862,"body_markdown":"I didn&#39;t  completely change it. I made it clearer because it seems there was an assumption that it is the same utility class. I actually just clarified that it is more than one utility class. Sorry!!!","body":"I didn&#39;t  completely change it. I made it clearer because it seems there was an assumption that it is the same utility class. I actually just clarified that it is more than one utility class. Sorry!!!"}],"tags":[],"owner":{"account_id":2103622,"reputation":26956,"user_id":1870555,"accept_rate":75,"display_name":"christopher"},"comment_count":3,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1423584441,"creation_date":1423584441,"answer_id":28436274,"question_id":28436239,"body_markdown":"Java has a `synchronized` keyword that you can use in this situation.\r\n\r\n    public synchronized void doWork() \r\n\r\n**Reading**\r\n\r\n* There&#39;s a full explanation of the keyword in the [Java Docs](http://docs.oracle.com/javase/tutorial/essential/concurrency/syncmeth.html).","title":"How to make this Threadsafe","body":"<p>Java has a <code>synchronized</code> keyword that you can use in this situation.</p>\n\n<pre><code>public synchronized void doWork() \n</code></pre>\n\n<p><strong>Reading</strong></p>\n\n<ul>\n<li>There's a full explanation of the keyword in the <a href=\"http://docs.oracle.com/javase/tutorial/essential/concurrency/syncmeth.html\" rel=\"nofollow\">Java Docs</a>.</li>\n</ul>\n"},{"comments":[{"owner":{"account_id":1258981,"reputation":14388,"user_id":1217820,"accept_rate":85,"display_name":"Snake"},"score":0,"creation_date":1423585644,"post_id":28436469,"comment_id":45203339,"body_markdown":"Interesting... I don&#39;t have too many multithreading to do. It is only that one object that I am worried will be accessed by multiple threads. However, any link you recommend to this Immutable solution and BlockingQueue? If there is a straight forward example on the web then I could use that (and accept this answer :))","body":"Interesting... I don&#39;t have too many multithreading to do. It is only that one object that I am worried will be accessed by multiple threads. However, any link you recommend to this Immutable solution and BlockingQueue? If there is a straight forward example on the web then I could use that (and accept this answer :))"},{"owner":{"account_id":1493453,"reputation":464,"user_id":1399956,"accept_rate":100,"display_name":"James Watson"},"score":0,"creation_date":1423586092,"post_id":28436469,"comment_id":45203673,"body_markdown":"There&#39;s a lot of good information in this answer but I have to disagree that it&#39;s simpler to use queues and workers.  For someone trying to get their head around multithreading, working with synchronization in Java is like a guided lesson in the basics.  If you have low contention, it&#39;s tends to be much faster than using the newer more advanced concurrency options.  However, with lots of threads, it&#39;s very difficult to keep all the threads working and make it correct with synchronization.  For simple stuff like making sure objects are created once etc. it&#39;s fine.","body":"There&#39;s a lot of good information in this answer but I have to disagree that it&#39;s simpler to use queues and workers.  For someone trying to get their head around multithreading, working with synchronization in Java is like a guided lesson in the basics.  If you have low contention, it&#39;s tends to be much faster than using the newer more advanced concurrency options.  However, with lots of threads, it&#39;s very difficult to keep all the threads working and make it correct with synchronization.  For simple stuff like making sure objects are created once etc. it&#39;s fine."},{"owner":{"account_id":404649,"reputation":57192,"user_id":773113,"accept_rate":72,"display_name":"Mike Nakis"},"score":0,"creation_date":1423586095,"post_id":28436469,"comment_id":45203678,"body_markdown":"I do not know of any notably good sample off the top of my head.  So, I did a google search, looked at the results real quick, and picked for you the one which seems better than the rest: http://www.developer.com/java/ent/article.php/3645111/Java-5s-BlockingQueue.htm","body":"I do not know of any notably good sample off the top of my head.  So, I did a google search, looked at the results real quick, and picked for you the one which seems better than the rest: <a href=\"http://www.developer.com/java/ent/article.php/3645111/Java-5s-BlockingQueue.htm\" rel=\"nofollow noreferrer\">developer.com/java/ent/article.php/3645111/&hellip;</a>"},{"owner":{"account_id":1258981,"reputation":14388,"user_id":1217820,"accept_rate":85,"display_name":"Snake"},"score":0,"creation_date":1423589442,"post_id":28436469,"comment_id":45205897,"body_markdown":"1 for the link and the info.. Will come helpful in future .. Thank you so much but I agree with  James","body":"1 for the link and the info.. Will come helpful in future .. Thank you so much but I agree with  James"}],"tags":[],"owner":{"account_id":404649,"reputation":57192,"user_id":773113,"accept_rate":72,"display_name":"Mike Nakis"},"comment_count":4,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1669217871,"creation_date":1423585005,"answer_id":28436469,"question_id":28436239,"body_markdown":"And here is an alternative advise:\r\n\r\n&gt; Do ***not*** use `synchronized`.\r\n\r\nCode that uses `synchronized` tends to be complex, buggy, and tends to perform poorly. Worst of all, it tends to suffer from race conditions. ([Wikipedia](https://en.wikipedia.org/wiki/Race_condition).) \r\n\r\nThe inconvenient thing about race conditions is that there exists no kind of test that will catch them. Unit Testing certainly won&#39;t. You might *think* that stress-testing will catch them, but in fact it will not necessarily catch them either, because they can be incredibly elusive: you may have a race condition which manifests itself on average every million seconds of continuous runtime; this means that in order to witness this race condition happening even once, you would have to be running your software day and night for 11 days straight, which of course you will not do; however, once your software is deployed to a million customers out there, the laws of statistics say that one random customer will be experiencing it roughly every second.\r\n\r\nJava was introduced in the early nineties, so it had to support the predominant-at-the-time mechanism for sharing data across threads, which was synchronization. Thus, Java has had the `synchronized` keyword since version 1. This inevitably lead to situations where application programmers who used to be coding in COBOL in their previous job were now writing code in Java and trying to make use of `volatile` and `synchronized`; needless to say, there was much weeping and wailing and gnashing of teeth. Synchronization is very difficult; Entire books have been written on the subject; the tiniest mistake is catastrophic, you cannot avoid tiny mistakes unless you are an expert, and few people on the planet are considered experts.\r\n\r\nIn the decades that followed since then, the Software Industry has been realizing the importance of Software Testing and therefore the importance of Testability. For this reason, synchronization has been falling out of grace and being abandoned. Using the `synchronized` keyword nowadays is indicative of a certain disconnection from the best practices of our times.\r\n\r\nSo, ***do not*** use the `synchronized` keyword; this means: ***do not*** share state between your threads; instead, follow the modern ***Share-Nothing*** approach. This approach can be summarized as follows:\r\n\r\nCreate an **immutable** class which you will call `Message` to communicate between your threads, and use a `BlockingQueue` (from package `java.util.concurrent`) in which other threads store messages intended to be processed by your main thread. Then, in your main thread, just keep popping messages from the queue and processing them.  If the main thread needs to communicate results to another thread, then create another queue for that thread. Simple, elegant, testable, foolproof.\r\n\r\nThe implementation of `BlockingQueue` does internally make use of synchronization techniques, but it has been written by people who knew what they were doing, and it has been thoroughly tested, so it is known to work. That single data structure is the only place in your entire system that should contain synchronization.\r\n","title":"How to make this Threadsafe","body":"<p>And here is an alternative advise:</p>\n<blockquote>\n<p>Do <em><strong>not</strong></em> use <code>synchronized</code>.</p>\n</blockquote>\n<p>Code that uses <code>synchronized</code> tends to be complex, buggy, and tends to perform poorly. Worst of all, it tends to suffer from race conditions. (<a href=\"https://en.wikipedia.org/wiki/Race_condition\" rel=\"nofollow noreferrer\">Wikipedia</a>.)</p>\n<p>The inconvenient thing about race conditions is that there exists no kind of test that will catch them. Unit Testing certainly won't. You might <em>think</em> that stress-testing will catch them, but in fact it will not necessarily catch them either, because they can be incredibly elusive: you may have a race condition which manifests itself on average every million seconds of continuous runtime; this means that in order to witness this race condition happening even once, you would have to be running your software day and night for 11 days straight, which of course you will not do; however, once your software is deployed to a million customers out there, the laws of statistics say that one random customer will be experiencing it roughly every second.</p>\n<p>Java was introduced in the early nineties, so it had to support the predominant-at-the-time mechanism for sharing data across threads, which was synchronization. Thus, Java has had the <code>synchronized</code> keyword since version 1. This inevitably lead to situations where application programmers who used to be coding in COBOL in their previous job were now writing code in Java and trying to make use of <code>volatile</code> and <code>synchronized</code>; needless to say, there was much weeping and wailing and gnashing of teeth. Synchronization is very difficult; Entire books have been written on the subject; the tiniest mistake is catastrophic, you cannot avoid tiny mistakes unless you are an expert, and few people on the planet are considered experts.</p>\n<p>In the decades that followed since then, the Software Industry has been realizing the importance of Software Testing and therefore the importance of Testability. For this reason, synchronization has been falling out of grace and being abandoned. Using the <code>synchronized</code> keyword nowadays is indicative of a certain disconnection from the best practices of our times.</p>\n<p>So, <em><strong>do not</strong></em> use the <code>synchronized</code> keyword; this means: <em><strong>do not</strong></em> share state between your threads; instead, follow the modern <em><strong>Share-Nothing</strong></em> approach. This approach can be summarized as follows:</p>\n<p>Create an <strong>immutable</strong> class which you will call <code>Message</code> to communicate between your threads, and use a <code>BlockingQueue</code> (from package <code>java.util.concurrent</code>) in which other threads store messages intended to be processed by your main thread. Then, in your main thread, just keep popping messages from the queue and processing them.  If the main thread needs to communicate results to another thread, then create another queue for that thread. Simple, elegant, testable, foolproof.</p>\n<p>The implementation of <code>BlockingQueue</code> does internally make use of synchronization techniques, but it has been written by people who knew what they were doing, and it has been thoroughly tested, so it is known to work. That single data structure is the only place in your entire system that should contain synchronization.</p>\n"},{"tags":[],"owner":{"account_id":352837,"reputation":9838,"user_id":690139,"accept_rate":83,"display_name":"Mark Fisher"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1423585079,"creation_date":1423585079,"answer_id":28436496,"question_id":28436239,"body_markdown":"If you have changing data, consider using immutable objects, not just simply slapping on a synchronized keyword.\r\n\r\nRead\r\n\r\n - [This stackoverflow question on immutable data and thread safety][1]\r\n - [Oracle&#39;s documentation on immutability][2]\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/3770539/does-using-only-immutable-data-types-make-a-java-program-thread-safe\r\n  [2]: http://docs.oracle.com/javase/tutorial/essential/concurrency/imstrat.html","title":"How to make this Threadsafe","body":"<p>If you have changing data, consider using immutable objects, not just simply slapping on a synchronized keyword.</p>\n\n<p>Read</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/3770539/does-using-only-immutable-data-types-make-a-java-program-thread-safe\">This stackoverflow question on immutable data and thread safety</a></li>\n<li><a href=\"http://docs.oracle.com/javase/tutorial/essential/concurrency/imstrat.html\" rel=\"nofollow noreferrer\">Oracle's documentation on immutability</a></li>\n</ul>\n"},{"comments":[{"owner":{"account_id":1258981,"reputation":14388,"user_id":1217820,"accept_rate":85,"display_name":"Snake"},"score":0,"creation_date":1423585762,"post_id":28436609,"comment_id":45203421,"body_markdown":"Will this work even if multiple instances of Utility are created but referencing same Foo? It is in my Edit of the question","body":"Will this work even if multiple instances of Utility are created but referencing same Foo? It is in my Edit of the question"},{"owner":{"account_id":1493453,"reputation":464,"user_id":1399956,"accept_rate":100,"display_name":"James Watson"},"score":0,"creation_date":1423586293,"post_id":28436609,"comment_id":45203795,"body_markdown":"Actually yes.  I didn&#39;t consider this initially but this version **will** work with multiple instances of Utility referencing the same Foo instance.  Using `synchronized` on the method **will not** work in that case.  The reason is that `synchronized` on a object level method is the same as saying `synchronized(this){//method body}` where `this` is the Utility instance.  In that situation the threads would lock on different (`Utility`) objects even if the Foo instance is the same which will **not** prevent them from running `doWork` on the same Foo at the same time.","body":"Actually yes.  I didn&#39;t consider this initially but this version <b>will</b> work with multiple instances of Utility referencing the same Foo instance.  Using <code>synchronized</code> on the method <b>will not</b> work in that case.  The reason is that <code>synchronized</code> on a object level method is the same as saying <code>synchronized(this){&#47;&#47;method body}</code> where <code>this</code> is the Utility instance.  In that situation the threads would lock on different (<code>Utility</code>) objects even if the Foo instance is the same which will <b>not</b> prevent them from running <code>doWork</code> on the same Foo at the same time."},{"owner":{"account_id":1258981,"reputation":14388,"user_id":1217820,"accept_rate":85,"display_name":"Snake"},"score":0,"creation_date":1423589568,"post_id":28436609,"comment_id":45205967,"body_markdown":"So if I understand correct. Putting the synchronized on the method itself will not work because it is multiple instances. but if I put synchronized on xx like you did in your answer then it will work because your locking the referenced  object.. Correct?","body":"So if I understand correct. Putting the synchronized on the method itself will not work because it is multiple instances. but if I put synchronized on xx like you did in your answer then it will work because your locking the referenced  object.. Correct?"},{"owner":{"account_id":1493453,"reputation":464,"user_id":1399956,"accept_rate":100,"display_name":"James Watson"},"score":0,"creation_date":1423590205,"post_id":28436609,"comment_id":45206316,"body_markdown":"Sort of.  You can lock on any object.  For example you might come across something like `private static Object LOCK = new Object();` which can puzzling until you see it used in a `synchronize` block as the lock object.  Think of it like a &quot;talking stick&quot; in a tribal meeting where only the person holding the stick is allowed to talk.  Locking on the object has no effect on the object itself, it&#39;s just what the threads use to keep track of whether another thread is in the critical section and whether they can enter.","body":"Sort of.  You can lock on any object.  For example you might come across something like <code>private static Object LOCK = new Object();</code> which can puzzling until you see it used in a <code>synchronize</code> block as the lock object.  Think of it like a &quot;talking stick&quot; in a tribal meeting where only the person holding the stick is allowed to talk.  Locking on the object has no effect on the object itself, it&#39;s just what the threads use to keep track of whether another thread is in the critical section and whether they can enter."},{"owner":{"account_id":1493453,"reputation":464,"user_id":1399956,"accept_rate":100,"display_name":"James Watson"},"score":1,"creation_date":1423590691,"post_id":28436609,"comment_id":45206609,"body_markdown":"One more important note, when choosing objects for locks, make sure you choose something that is aligned with your threading needs.  For example, if you are locking on a private variable that might be reassigned, you can have issues.  Never lock on an object that will be reassigned within the synchronized block unless you want see behaviors that are very hard to reason about.","body":"One more important note, when choosing objects for locks, make sure you choose something that is aligned with your threading needs.  For example, if you are locking on a private variable that might be reassigned, you can have issues.  Never lock on an object that will be reassigned within the synchronized block unless you want see behaviors that are very hard to reason about."}],"tags":[],"owner":{"account_id":1493453,"reputation":464,"user_id":1399956,"accept_rate":100,"display_name":"James Watson"},"comment_count":5,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1423587078,"creation_date":1423585417,"answer_id":28436609,"question_id":28436239,"body_markdown":"    public class Utility{\r\n      private final Foo xx;\r\n      \r\n      public Utility(Foo xx){\r\n        this.xx = xx;\r\n      }\r\n\r\n      public void doWork() {\r\n        // ensures only one thread can be calling action\r\n        synchronized(xx) {\r\n          xx.action();\r\n        }\r\n      }\r\n    }\r\n\r\nA few changes below:\r\n\r\n 1. Make `xx` `final` and `private`.  Making it `private` enforces controls on how `xx` can be accessed.\r\n 2. `synchronize` on `xx` before calling `doWork`.  You can put `synchronized` on the method declaration but I prefer to be explicit about what object you are locking on.  Note that this doesn&#39;t &quot;synchronize xx&quot;.  It simply uses `xx` as the lock.  You must use synchronized blocks with the same monitor object everywhere you are accessing potentially dangerous code blocks.","title":"How to make this Threadsafe","body":"<pre><code>public class Utility{\n  private final Foo xx;\n\n  public Utility(Foo xx){\n    this.xx = xx;\n  }\n\n  public void doWork() {\n    // ensures only one thread can be calling action\n    synchronized(xx) {\n      xx.action();\n    }\n  }\n}\n</code></pre>\n\n<p>A few changes below:</p>\n\n<ol>\n<li>Make <code>xx</code> <code>final</code> and <code>private</code>.  Making it <code>private</code> enforces controls on how <code>xx</code> can be accessed.</li>\n<li><code>synchronize</code> on <code>xx</code> before calling <code>doWork</code>.  You can put <code>synchronized</code> on the method declaration but I prefer to be explicit about what object you are locking on.  Note that this doesn't \"synchronize xx\".  It simply uses <code>xx</code> as the lock.  You must use synchronized blocks with the same monitor object everywhere you are accessing potentially dangerous code blocks.</li>\n</ol>\n"}],"owner":{"account_id":1258981,"reputation":14388,"user_id":1217820,"accept_rate":85,"display_name":"Snake"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":129,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"accepted_answer_id":28436609,"answer_count":5,"score":1,"last_activity_date":1669217871,"creation_date":1423584349,"question_id":28436239,"body_markdown":"I have been reading a lot about threading yet I am not sure of the right way to handle this situation. Lets say I have a utility class that references an object. The utility class does work on the object and it can be called from multiple threads\r\n\r\n      class Utility{\r\n         Foo xx;\r\n         public Utility(Foo xx){\r\n             this.xx = xx;\r\n         }\r\n         \r\n        public void doWork(){\r\n           x.action();\r\n        }\r\n      }\r\n\r\nNow if I have two threads that will will be accessing the utility class and calling doWork() where xx will always refers to the same object, how can I make it thread safe?\r\n\r\n\r\nEDIT: There are 2 instances of the utility class ( one per thread) but the same referenced xx object. See Edit:\r\n\r\n    public class ThreadSafety {\r\n     \r\n        public static void main(String[] args) throws InterruptedException {\r\n            Foo xx = new Foo();\r\n            Utility util1 =  new Utility(xx); \r\n            Utility util2 =  new Utility(xx); \r\n            Thread t1 = new Thread(new MyRunnable(util1) , &quot;t1&quot;);\r\n            Thread t2 = new Thread(new MyRunnable(util2) , &quot;t2&quot;);\r\n            \r\n            t1.start();\r\n            t2.start();\r\n            t1.join();\r\n            t2.join();\r\n    \r\n        }\r\n     \r\n    }\r\n     \r\n    class MyRunnable implements Runnable{\r\n        Utility util;\r\n         \r\n        @Override\r\n        public void run() {\r\n            util.doWork();\r\n        }\r\n     \r\n      \r\n        private void MyRunnable (Utility util) {\r\n            this.util = util;\r\n        }\r\n         \r\n    }\r\n\r\n","title":"How to make this Threadsafe","body":"<p>I have been reading a lot about threading yet I am not sure of the right way to handle this situation. Lets say I have a utility class that references an object. The utility class does work on the object and it can be called from multiple threads</p>\n\n<pre><code>  class Utility{\n     Foo xx;\n     public Utility(Foo xx){\n         this.xx = xx;\n     }\n\n    public void doWork(){\n       x.action();\n    }\n  }\n</code></pre>\n\n<p>Now if I have two threads that will will be accessing the utility class and calling doWork() where xx will always refers to the same object, how can I make it thread safe?</p>\n\n<p>EDIT: There are 2 instances of the utility class ( one per thread) but the same referenced xx object. See Edit:</p>\n\n<pre><code>public class ThreadSafety {\n\n    public static void main(String[] args) throws InterruptedException {\n        Foo xx = new Foo();\n        Utility util1 =  new Utility(xx); \n        Utility util2 =  new Utility(xx); \n        Thread t1 = new Thread(new MyRunnable(util1) , \"t1\");\n        Thread t2 = new Thread(new MyRunnable(util2) , \"t2\");\n\n        t1.start();\n        t2.start();\n        t1.join();\n        t2.join();\n\n    }\n\n}\n\nclass MyRunnable implements Runnable{\n    Utility util;\n\n    @Override\n    public void run() {\n        util.doWork();\n    }\n\n\n    private void MyRunnable (Utility util) {\n        this.util = util;\n    }\n\n}\n</code></pre>\n"},{"tags":["java","jersey","grizzly"],"answers":[{"tags":[],"owner":{"account_id":5752727,"reputation":1642,"user_id":4541832,"display_name":"Maciej Lach"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1439982889,"creation_date":1439982889,"answer_id":32093934,"question_id":32093217,"body_markdown":"In your case, static data should be located in `/static` folder in root of your disk.\r\n\r\nThere are a couple of options where the static resources can be located:\r\n\r\n  - you can serve static resources from your filesystem via absolute path (e.g. `/www/static/`):\r\n\r\n        StaticHttpHandler staticHttpHandler = new StaticHttpHandler(&quot;/www/static/&quot;);\r\n        server.getServerConfiguration().addHttpHandler(staticHttpHandler, &quot;/&quot;);\r\n\r\n  - or embedded your resources into jar archive (e.g. `/www/static.jar`):\r\n\r\n        StaticHttpHandler staticHttpHandler = new CLStaticHttpHandler(new URLClassLoader(new URL[] {new URL(&quot;file:///www/static.jar&quot;)}));\r\n        server.getServerConfiguration().addHttpHandler(staticHttpHandler, &quot;/&quot;);\r\n\r\n  - or embed static resources inside your application jar:\r\n\r\n        StaticHttpHandler staticHttpHandler = new CLStaticHttpHandler(YourApp.class.getClassLoader());\r\n        server.getServerConfiguration().addHttpHandler(staticHttpHandler, &quot;/&quot;);\r\n","title":"Static content in Grizzly jersey","body":"<p>In your case, static data should be located in <code>/static</code> folder in root of your disk.</p>\n\n<p>There are a couple of options where the static resources can be located:</p>\n\n<ul>\n<li><p>you can serve static resources from your filesystem via absolute path (e.g. <code>/www/static/</code>):</p>\n\n<pre><code>StaticHttpHandler staticHttpHandler = new StaticHttpHandler(\"/www/static/\");\nserver.getServerConfiguration().addHttpHandler(staticHttpHandler, \"/\");\n</code></pre></li>\n<li><p>or embedded your resources into jar archive (e.g. <code>/www/static.jar</code>):</p>\n\n<pre><code>StaticHttpHandler staticHttpHandler = new CLStaticHttpHandler(new URLClassLoader(new URL[] {new URL(\"file:///www/static.jar\")}));\nserver.getServerConfiguration().addHttpHandler(staticHttpHandler, \"/\");\n</code></pre></li>\n<li><p>or embed static resources inside your application jar:</p>\n\n<pre><code>StaticHttpHandler staticHttpHandler = new CLStaticHttpHandler(YourApp.class.getClassLoader());\nserver.getServerConfiguration().addHttpHandler(staticHttpHandler, \"/\");\n</code></pre></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":13342410,"reputation":33,"user_id":9630238,"display_name":"Francesco Rosso"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669217323,"creation_date":1669217323,"answer_id":74549295,"question_id":32093217,"body_markdown":"**ATTENTION**\r\nCannot cast from CLStaticHttpHandler to StaticHttpHandler!\r\n\r\n    CLStaticHttpHandler staticHttpHandler = new CLStaticHttpHandler(YourApp.class.getClassLoader());\r\n    server.getServerConfiguration().addHttpHandler(staticHttpHandler, &quot;/&quot;);","title":"Static content in Grizzly jersey","body":"<p><strong>ATTENTION</strong>\nCannot cast from CLStaticHttpHandler to StaticHttpHandler!</p>\n<pre><code>CLStaticHttpHandler staticHttpHandler = new CLStaticHttpHandler(YourApp.class.getClassLoader());\nserver.getServerConfiguration().addHttpHandler(staticHttpHandler, &quot;/&quot;);\n</code></pre>\n"}],"owner":{"account_id":2134790,"reputation":477,"user_id":1894846,"accept_rate":58,"display_name":"Rentonie"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2618,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":2,"score":3,"last_activity_date":1669217323,"creation_date":1439980921,"question_id":32093217,"body_markdown":"   I want to serve static html pages in / and /index.html\r\n\r\n    final HttpServer server = GrizzlyHttpServerFactory.createHttpServer(URI.create(BASE_URI), rc);\r\n\r\nBASE_URL = http://locahost:8080/api/\r\n\r\n    StaticHttpHandler staticHttpHandler = new StaticHttpHandler(&quot;/static&quot;);\r\n    server.getServerConfiguration().addHttpHandler(staticHttpHandler, &quot;/&quot;);\r\n\r\nMy question is where should i put the static file in","title":"Static content in Grizzly jersey","body":"<p>I want to serve static html pages in / and /index.html</p>\n\n<pre><code>final HttpServer server = GrizzlyHttpServerFactory.createHttpServer(URI.create(BASE_URI), rc);\n</code></pre>\n\n<p>BASE_URL = <a href=\"http://locahost:8080/api/\" rel=\"nofollow\">http://locahost:8080/api/</a></p>\n\n<pre><code>StaticHttpHandler staticHttpHandler = new StaticHttpHandler(\"/static\");\nserver.getServerConfiguration().addHttpHandler(staticHttpHandler, \"/\");\n</code></pre>\n\n<p>My question is where should i put the static file in</p>\n"},{"tags":["java","android","gpx"],"comments":[{"owner":{"account_id":2755641,"reputation":8698,"user_id":2373819,"display_name":"Andrew"},"score":0,"creation_date":1669216147,"post_id":74548483,"comment_id":131594850,"body_markdown":"What is the value of `stringUrl` ? Give and example.  Given that your are trying to parse a string for the Uri suggests that the Uri is not of the of the right type for `getContentResolver`, so where did you get `stringUrl` from?","body":"What is the value of <code>stringUrl</code> ? Give and example.  Given that your are trying to parse a string for the Uri suggests that the Uri is not of the of the right type for <code>getContentResolver</code>, so where did you get <code>stringUrl</code> from?"}],"answers":[{"comments":[{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1669233543,"post_id":74549270,"comment_id":131600811,"body_markdown":"`getContentResolver is to get data from a ContentResolver ` No. From a content provider.","body":"<code>getContentResolver is to get data from a ContentResolver </code> No. From a content provider."},{"owner":{"account_id":2755641,"reputation":8698,"user_id":2373819,"display_name":"Andrew"},"score":0,"creation_date":1669240566,"post_id":74549270,"comment_id":131602571,"body_markdown":"@blackapps you are jumping a step / have a different take on the semantics. `getContentResolver`  returns a `ContentResolver` not a content provider as it might not need a content provider to get the data. You get data from the ContentResolver`, it gets the data from the content provider. It&#39;s multi step process, you are jumping over a step in a multiple step chain which continues with further steps with the content provider getting the data from elsewhere (memory, storage, network, etc).","body":"@blackapps you are jumping a step / have a different take on the semantics. <code>getContentResolver</code>  returns a <code>ContentResolver</code> not a content provider as it might not need a content provider to get the data. You get data from the ContentResolver`, it gets the data from the content provider. It&#39;s multi step process, you are jumping over a step in a multiple step chain which continues with further steps with the content provider getting the data from elsewhere (memory, storage, network, etc)."},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1669242194,"post_id":74549270,"comment_id":131602929,"body_markdown":"The content resolver does not see any data. It opens an inputstream for you and then the data flows from content provider to you. The content resolver knows nothing of this. It does not even spy.","body":"The content resolver does not see any data. It opens an inputstream for you and then the data flows from content provider to you. The content resolver knows nothing of this. It does not even spy."},{"owner":{"account_id":2755641,"reputation":8698,"user_id":2373819,"display_name":"Andrew"},"score":0,"creation_date":1669245163,"post_id":74549270,"comment_id":131603501,"body_markdown":"@blackapps the &quot;data&quot; can be an inputstream object or `outputstream` object or even `loadThumbnail` which returns a `Bitmap`, And for `file://` and `android.resource://` Uri types it does not even involve a content provider, you are mistaking `getContentResolver` with what data you get from for some Uri&#39;s you can get from it&#39;s `getContentResolver().openInputStream()` method via an `InputStream` object.","body":"@blackapps the &quot;data&quot; can be an inputstream object or <code>outputstream</code> object or even <code>loadThumbnail</code> which returns a <code>Bitmap</code>, And for <code>file:&#47;&#47;</code> and <code>android.resource:&#47;&#47;</code> Uri types it does not even involve a content provider, you are mistaking <code>getContentResolver</code> with what data you get from for some Uri&#39;s you can get from it&#39;s <code>getContentResolver().openInputStream()</code> method via an <code>InputStream</code> object."}],"tags":[],"owner":{"account_id":2755641,"reputation":8698,"user_id":2373819,"display_name":"Andrew"},"comment_count":4,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1669217231,"creation_date":1669217231,"answer_id":74549270,"question_id":74548483,"body_markdown":"getContentResolver is to get data from a [ContentResolver][1] not from any random Url, it is for getting data from other processes and usually takes the string form of `content://....`\r\n\r\nYou need to download the gpx first with something like [HttpURLConnection][2] and it&#39;s `getInputStream()` method to get an `inputStream` to use with the parser.\r\n\r\n\r\n  [1]: https://developer.android.com/guide/topics/providers/content-providers\r\n  [2]: https://developer.android.com/reference/java/net/HttpURLConnection","title":"GPX parser android - No content provider","body":"<p>getContentResolver is to get data from a <a href=\"https://developer.android.com/guide/topics/providers/content-providers\" rel=\"nofollow noreferrer\">ContentResolver</a> not from any random Url, it is for getting data from other processes and usually takes the string form of <code>content://....</code></p>\n<p>You need to download the gpx first with something like <a href=\"https://developer.android.com/reference/java/net/HttpURLConnection\" rel=\"nofollow noreferrer\">HttpURLConnection</a> and it's <code>getInputStream()</code> method to get an <code>inputStream</code> to use with the parser.</p>\n"}],"owner":{"account_id":27025527,"reputation":5,"user_id":20582870,"display_name":"maciek_123_123"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":128,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":74549270,"answer_count":1,"score":-1,"last_activity_date":1669217231,"creation_date":1669213963,"question_id":74548483,"body_markdown":"In my application I would like to use a gpx file downloaded from the server.\r\n\r\n\r\n\r\nI use  GPXParser from https://github.com/ticofab/android-gpx-parser .\r\n\r\nWhen I was trying to parse gpx file, I got warring &quot;java.io.FileNotFoundException: No content provider&quot;\r\n\r\n```\r\nGpx parsedGpx = null;\r\nGPXParser parser = new GPXParser();\r\nInputStream inputStream = getContentResolver().openInputStream(Uri.parse(stringUrl));\r\nparsedGpx = parser.parse(inputStream);\r\n```\r\n\r\n\r\nHow can I solve my problem?\r\n\r\n","title":"GPX parser android - No content provider","body":"<p>In my application I would like to use a gpx file downloaded from the server.</p>\n<p>I use  GPXParser from <a href=\"https://github.com/ticofab/android-gpx-parser\" rel=\"nofollow noreferrer\">https://github.com/ticofab/android-gpx-parser</a> .</p>\n<p>When I was trying to parse gpx file, I got warring &quot;java.io.FileNotFoundException: No content provider&quot;</p>\n<pre><code>Gpx parsedGpx = null;\nGPXParser parser = new GPXParser();\nInputStream inputStream = getContentResolver().openInputStream(Uri.parse(stringUrl));\nparsedGpx = parser.parse(inputStream);\n</code></pre>\n<p>How can I solve my problem?</p>\n"},{"tags":["java","reflection"],"comments":[{"owner":{"account_id":141282,"reputation":10126,"user_id":348189,"accept_rate":89,"display_name":"TacB0sS"},"score":0,"creation_date":1398780553,"post_id":23366900,"comment_id":35790813,"body_markdown":"I&#39;m not really sure what are you trying to achieve... could you elaborate?","body":"I&#39;m not really sure what are you trying to achieve... could you elaborate?"},{"owner":{"account_id":141282,"reputation":10126,"user_id":348189,"accept_rate":89,"display_name":"TacB0sS"},"score":0,"creation_date":1398780745,"post_id":23366900,"comment_id":35790990,"body_markdown":"Are you trying to create a list with a generic type of the field?","body":"Are you trying to create a list with a generic type of the field?"},{"owner":{"account_id":23121,"reputation":527376,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":0,"creation_date":1398780797,"post_id":23366900,"comment_id":35791030,"body_markdown":"Generics are a compile time feature.  They doesn&#39;t do anything at runtime. What are you trying to achieve?","body":"Generics are a compile time feature.  They doesn&#39;t do anything at runtime. What are you trying to achieve?"},{"owner":{"account_id":3013011,"reputation":12987,"user_id":2555999,"accept_rate":75,"display_name":"ZuzEL"},"score":0,"creation_date":1398781102,"post_id":23366900,"comment_id":35791274,"body_markdown":"Guys, I&#39;am trying to generate random data for tests. For this purpose I fill all my Entity fields with random values through reflections. But I can not create new List&lt;T&gt; and assign it to the field. But it seems my bad","body":"Guys, I&#39;am trying to generate random data for tests. For this purpose I fill all my Entity fields with random values through reflections. But I can not create new List&lt;T&gt; and assign it to the field. But it seems my bad"},{"owner":{"account_id":2671187,"reputation":3406,"user_id":2308571,"display_name":"jgitter"},"score":0,"creation_date":1398781314,"post_id":23366900,"comment_id":35791448,"body_markdown":"If it&#39;s just for testing, then you probably should probably just make `List&lt;?&gt;s` and suppress the warnings.  :-)","body":"If it&#39;s just for testing, then you probably should probably just make <code>List&lt;?&gt;s</code> and suppress the warnings.  :-)"}],"answers":[{"tags":[],"owner":{"account_id":2671187,"reputation":3406,"user_id":2308571,"display_name":"jgitter"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1398780667,"creation_date":1398780285,"answer_id":23366992,"question_id":23366900,"body_markdown":"You can&#39;t do that at runtime.  The best you could do is to create a List&amp;lt;?&amp;gt; and do runtime type checking yourself.\r\n\r\nIf you&#39;re curious why this is, check out &quot;type erasure&quot;.  http://docs.oracle.com/javase/tutorial/java/generics/erasure.html\r\n\r\nAlternatively, you could attempt to *clone* the old list, but only the implementations of list have a clone() method, not the List interface, and it will only perform a shallow copy.\r\n\r\nGood luck!","title":"How to create a new List&lt;T&gt; knowing the Type through reflection?","body":"<p>You can't do that at runtime.  The best you could do is to create a List&lt;?&gt; and do runtime type checking yourself.</p>\n\n<p>If you're curious why this is, check out \"type erasure\".  <a href=\"http://docs.oracle.com/javase/tutorial/java/generics/erasure.html\" rel=\"nofollow\">http://docs.oracle.com/javase/tutorial/java/generics/erasure.html</a></p>\n\n<p>Alternatively, you could attempt to <em>clone</em> the old list, but only the implementations of list have a clone() method, not the List interface, and it will only perform a shallow copy.</p>\n\n<p>Good luck!</p>\n"},{"comments":[{"owner":{"account_id":141282,"reputation":10126,"user_id":348189,"accept_rate":89,"display_name":"TacB0sS"},"score":0,"creation_date":1398781736,"post_id":23367509,"comment_id":35791813,"body_markdown":"I know this seems like an overhead for the question, but I think I understand where you try to go with it","body":"I know this seems like an overhead for the question, but I think I understand where you try to go with it"}],"tags":[],"owner":{"account_id":141282,"reputation":10126,"user_id":348189,"accept_rate":89,"display_name":"TacB0sS"},"comment_count":1,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1398781580,"creation_date":1398781580,"answer_id":23367509,"question_id":23366900,"body_markdown":"\r\nWhat I normally do is:\r\n\r\n    public void populateListAndSetToField(Field field,Class&lt;?&gt; type, Object instance, Object... params) throws IllegalArgumentException, IllegalAccessException {\r\n\t\tList&lt;?&gt; list = getGenericList(type, params);\r\n\t\tfield.set(instance, list);\r\n\t}\r\n\r\n\tprivate &lt;Type&gt; List&lt;Type&gt; getGenericList(Class&lt;Type&gt; type, Object... params) {\r\n\t\tList&lt;Type&gt; l = new ArrayList&lt;Type&gt;();\r\n\t\tfor (int i = 0; i &lt; params.length; i++) {\r\n\t\t\tl.add((Type) params[i]);\r\n\t\t}\r\n\t\treturn l;\r\n\t}\r\n\r\nThere are runtime constrains and checks you need to apply but I&#39;ve used this too many times and it works, thing is when I get to these implementations, the entire surrounding architecture relay on unknown object types, it is tricky.","title":"How to create a new List&lt;T&gt; knowing the Type through reflection?","body":"<p>What I normally do is:</p>\n\n<pre><code>public void populateListAndSetToField(Field field,Class&lt;?&gt; type, Object instance, Object... params) throws IllegalArgumentException, IllegalAccessException {\n    List&lt;?&gt; list = getGenericList(type, params);\n    field.set(instance, list);\n}\n\nprivate &lt;Type&gt; List&lt;Type&gt; getGenericList(Class&lt;Type&gt; type, Object... params) {\n    List&lt;Type&gt; l = new ArrayList&lt;Type&gt;();\n    for (int i = 0; i &lt; params.length; i++) {\n        l.add((Type) params[i]);\n    }\n    return l;\n}\n</code></pre>\n\n<p>There are runtime constrains and checks you need to apply but I've used this too many times and it works, thing is when I get to these implementations, the entire surrounding architecture relay on unknown object types, it is tricky.</p>\n"},{"tags":[],"owner":{"account_id":1909411,"reputation":6847,"user_id":1723626,"accept_rate":70,"display_name":"Optimus Prime"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669217222,"creation_date":1669217222,"answer_id":74549269,"question_id":23366900,"body_markdown":"This is how I was able to create a list,\r\n\r\n```\r\n// Get the class from the type\r\nClass fieldClass = Class.forName(((ParameterizedType) field.getGenericType()).getActualTypeArguments()[0].getTypeName());\r\n// Create a new instance\r\nObject instance = fieldClass.newInstance();\r\nreturn List.of(instance);\r\n```","title":"How to create a new List&lt;T&gt; knowing the Type through reflection?","body":"<p>This is how I was able to create a list,</p>\n<pre><code>// Get the class from the type\nClass fieldClass = Class.forName(((ParameterizedType) field.getGenericType()).getActualTypeArguments()[0].getTypeName());\n// Create a new instance\nObject instance = fieldClass.newInstance();\nreturn List.of(instance);\n</code></pre>\n"}],"owner":{"account_id":3013011,"reputation":12987,"user_id":2555999,"accept_rate":75,"display_name":"ZuzEL"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4948,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":23366992,"answer_count":3,"score":5,"last_activity_date":1669217222,"creation_date":1398780092,"question_id":23366900,"body_markdown":"I have a Field f, after I check it and it turns out that it is of type List&lt;T&gt;, I can get its generic type.\r\n\r\nBut how do I create a new List&lt;type&gt; with this generic type and put new instances inside?\r\n\r\n    if (List.class.isAssignableFrom(f.getType())) {\r\n\r\n\t\tType genericType = f.getGenericType();\r\n\t\tList&lt;genericType&gt; a = new ArrayList(); // ?????? Error\r\n       \r\n\t}\r\n\r\n___\r\nFor example I have a field with type `List&lt;MyObject&gt;`\r\n\r\nIs it possible to create an new instance of `ArrayList&lt;MyObject&gt;` through reflections?","title":"How to create a new List&lt;T&gt; knowing the Type through reflection?","body":"<p>I have a Field f, after I check it and it turns out that it is of type List, I can get its generic type.</p>\n\n<p>But how do I create a new List with this generic type and put new instances inside?</p>\n\n<pre><code>if (List.class.isAssignableFrom(f.getType())) {\n\n    Type genericType = f.getGenericType();\n    List&lt;genericType&gt; a = new ArrayList(); // ?????? Error\n\n}\n</code></pre>\n\n<hr>\n\n<p>For example I have a field with type <code>List&lt;MyObject&gt;</code></p>\n\n<p>Is it possible to create an new instance of <code>ArrayList&lt;MyObject&gt;</code> through reflections?</p>\n"},{"tags":["java","spring","spring-boot","spring-data-jpa","spring-annotations"],"comments":[{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1669184999,"post_id":74542588,"comment_id":131584265,"body_markdown":"No class implements that interface. Let&#39;s start with why you think it&#39;s useful to autowire a non-existing implementation?","body":"No class implements that interface. Let&#39;s start with why you think it&#39;s useful to autowire a non-existing implementation?"},{"owner":{"account_id":23861350,"reputation":3,"user_id":17864251,"display_name":"Md. Ashikul Islam"},"score":0,"creation_date":1669194312,"post_id":74542588,"comment_id":131586752,"body_markdown":"I am a bit confused about that as well but I think MongoRepository contains some functionalities that I needed in the project. (For example MongoClient, MongoConverter). I created an empty interface that implements the mongo interface. If I am doing things wrong can you kindly help me visualize it?","body":"I am a bit confused about that as well but I think MongoRepository contains some functionalities that I needed in the project. (For example MongoClient, MongoConverter). I created an empty interface that implements the mongo interface. If I am doing things wrong can you kindly help me visualize it?"}],"answers":[{"tags":[],"owner":{"account_id":9571720,"reputation":6305,"user_id":7109162,"accept_rate":84,"display_name":"XtremeBaumer"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1669185592,"creation_date":1669185592,"answer_id":74542689,"question_id":74542588,"body_markdown":"Spring boot uses `@EnableJpaRepositories` which all interfaces/classes that extend/implement a spring data [repository](https://docs.spring.io/spring-data/commons/docs/current/api/org/springframework/data/repository/Repository.html). In turn spring then provides an implementation which is added to the container.\r\n\r\nAs [MongoRepository](https://docs.spring.io/spring-data/mongodb/docs/current/api/org/springframework/data/mongodb/repository/MongoRepository.html) is spring JPA repository, the extending interfaces are being picked up and provided as autowireable dependencies. So when you annotate your `PostRepository` with `@Component` it is picked up twice by spring, causing the multiple beans found exception.\r\n\r\nFor more info on this topic check [baeldung](https://www.baeldung.com/the-persistence-layer-with-spring-data-jpa) and [docs](https://docs.spring.io/spring-data/jpa/docs/current/reference/html/)","title":"Spring Boot @Component annotation not used on interface but still bean is being provided with @Autowired","body":"<p>Spring boot uses <code>@EnableJpaRepositories</code> which all interfaces/classes that extend/implement a spring data <a href=\"https://docs.spring.io/spring-data/commons/docs/current/api/org/springframework/data/repository/Repository.html\" rel=\"nofollow noreferrer\">repository</a>. In turn spring then provides an implementation which is added to the container.</p>\n<p>As <a href=\"https://docs.spring.io/spring-data/mongodb/docs/current/api/org/springframework/data/mongodb/repository/MongoRepository.html\" rel=\"nofollow noreferrer\">MongoRepository</a> is spring JPA repository, the extending interfaces are being picked up and provided as autowireable dependencies. So when you annotate your <code>PostRepository</code> with <code>@Component</code> it is picked up twice by spring, causing the multiple beans found exception.</p>\n<p>For more info on this topic check <a href=\"https://www.baeldung.com/the-persistence-layer-with-spring-data-jpa\" rel=\"nofollow noreferrer\">baeldung</a> and <a href=\"https://docs.spring.io/spring-data/jpa/docs/current/reference/html/\" rel=\"nofollow noreferrer\">docs</a></p>\n"}],"owner":{"account_id":23861350,"reputation":3,"user_id":17864251,"display_name":"Md. Ashikul Islam"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":489,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74542689,"answer_count":1,"score":0,"last_activity_date":1669216958,"creation_date":1669184825,"question_id":74542588,"body_markdown":"I am a new learner of Spring Boot. As far as I learned by now, we need to use `@Component` above a class/interface for Spring to store the bean in the Spring container. And we can inject that bean by using `@Autowired`. I&#39;ve been working on a demo project where I can&#39;t see `@Component` on an interface but somehow the bean of that interface is being provided correctly. If I add `@Component` it says multiple beans found. \r\n\r\nPost Controller Class:\r\n\r\n```\r\npackage com.ashik.jobmarket.controller;\r\n\r\nimport com.ashik.jobmarket.repository.PostRepository;\r\nimport com.ashik.jobmarket.model.Post;\r\nimport com.ashik.jobmarket.repository.SearchRepository;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.web.bind.annotation.*;\r\n\r\nimport java.util.List;\r\n\r\n@RestController\r\n@CrossOrigin(origins = &quot;http://localhost:3000&quot;)\r\npublic class PostController {\r\n\r\n    @Autowired\r\n    PostRepository repo;\r\n    @Autowired\r\n    SearchRepository srepo;\r\n\r\n    @GetMapping(&quot;/allPosts&quot;)\r\n    @CrossOrigin\r\n    public List&lt;Post&gt; getAllPosts(){\r\n        return repo.findAll();\r\n    }\r\n\r\n    @GetMapping(&quot;/posts/{text}&quot;)\r\n    @CrossOrigin\r\n    public List&lt;Post&gt; search(@PathVariable String text){\r\n        return srepo.findByText(text);\r\n    }\r\n\r\n\r\n    @PostMapping(&quot;/post&quot;)\r\n    @CrossOrigin\r\n    public Post addPost(@RequestBody Post post){\r\n        return repo.save(post);\r\n    }\r\n\r\n}\r\n```\r\n\r\n\r\n\r\nThe Post Repository Interface:\r\n\r\n```\r\npackage com.ashik.jobmarket.repository;\r\nimport com.ashik.jobmarket.model.Post;\r\nimport org.springframework.data.mongodb.repository.MongoRepository;\r\n\r\npublic interface PostRepository extends MongoRepository&lt;Post, String&gt;{}\r\n```\r\n\r\n\r\n***No Class implemented Post Repository.***\r\n\r\nI tried adding `@Component` myself but it&#39;s saying that I have multiple beans of the same name. I am trying to understand the process, and how the bean is being delivered without `@Component` annotation.","title":"Spring Boot @Component annotation not used on interface but still bean is being provided with @Autowired","body":"<p>I am a new learner of Spring Boot. As far as I learned by now, we need to use <code>@Component</code> above a class/interface for Spring to store the bean in the Spring container. And we can inject that bean by using <code>@Autowired</code>. I've been working on a demo project where I can't see <code>@Component</code> on an interface but somehow the bean of that interface is being provided correctly. If I add <code>@Component</code> it says multiple beans found.</p>\n<p>Post Controller Class:</p>\n<pre><code>package com.ashik.jobmarket.controller;\n\nimport com.ashik.jobmarket.repository.PostRepository;\nimport com.ashik.jobmarket.model.Post;\nimport com.ashik.jobmarket.repository.SearchRepository;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.web.bind.annotation.*;\n\nimport java.util.List;\n\n@RestController\n@CrossOrigin(origins = &quot;http://localhost:3000&quot;)\npublic class PostController {\n\n    @Autowired\n    PostRepository repo;\n    @Autowired\n    SearchRepository srepo;\n\n    @GetMapping(&quot;/allPosts&quot;)\n    @CrossOrigin\n    public List&lt;Post&gt; getAllPosts(){\n        return repo.findAll();\n    }\n\n    @GetMapping(&quot;/posts/{text}&quot;)\n    @CrossOrigin\n    public List&lt;Post&gt; search(@PathVariable String text){\n        return srepo.findByText(text);\n    }\n\n\n    @PostMapping(&quot;/post&quot;)\n    @CrossOrigin\n    public Post addPost(@RequestBody Post post){\n        return repo.save(post);\n    }\n\n}\n</code></pre>\n<p>The Post Repository Interface:</p>\n<pre><code>package com.ashik.jobmarket.repository;\nimport com.ashik.jobmarket.model.Post;\nimport org.springframework.data.mongodb.repository.MongoRepository;\n\npublic interface PostRepository extends MongoRepository&lt;Post, String&gt;{}\n</code></pre>\n<p><em><strong>No Class implemented Post Repository.</strong></em></p>\n<p>I tried adding <code>@Component</code> myself but it's saying that I have multiple beans of the same name. I am trying to understand the process, and how the bean is being delivered without <code>@Component</code> annotation.</p>\n"},{"tags":["java","nullpointerexception","java-stream","option-type"],"answers":[{"tags":[],"owner":{"account_id":7291967,"reputation":57515,"user_id":5558072,"accept_rate":100,"display_name":"Youcef LAIDANI"},"comment_count":0,"down_vote_count":1,"up_vote_count":2,"is_accepted":true,"score":1,"last_activity_date":1669123344,"creation_date":1669122510,"answer_id":74533138,"question_id":74533076,"body_markdown":"Something like this:\r\n\r\n    public Optional&lt;Employee&gt; findEmployee(int id) {\r\n        return Stream.of(employees)\r\n                .filter(Objects::nonNull) // &lt;---------------\r\n                .filter(employee -&gt; employee.getId() == id)\r\n                .findFirst();\r\n    }\r\n\r\nThis will return an empty `Optional` if no result is found. The first filter will filter all non-null employees, then the second filter will check the id.\r\n\r\n---\r\nIf you want to get Employee instead of Optional, then you can use:\r\n\r\n    public Employee findEmployee(int id) {\r\n        return Stream.of(employees)\r\n                .filter(Objects::nonNull)\r\n                .filter(employee -&gt; employee.getId() == id)\r\n                .findFirst()\r\n                .orElse(null);\r\n    }\r\n\r\nOr if you want to go deeper, you even throw an exception if no employee is found, for example:\r\n\r\n    public Employee findEmployee(int id) {\r\n        return Stream.of(employees)\r\n                .filter(Objects::nonNull)\r\n                .filter(employee -&gt; employee.getId() == id)\r\n                .findFirst()\r\n                .orElseThrow(() -&gt; new RuntimeException(&quot;No employee found.&quot;));\r\n    }\r\n","title":"How to get rid of NullPointerException in a method using Streams API and Optional?","body":"<p>Something like this:</p>\n<pre><code>public Optional&lt;Employee&gt; findEmployee(int id) {\n    return Stream.of(employees)\n            .filter(Objects::nonNull) // &lt;---------------\n            .filter(employee -&gt; employee.getId() == id)\n            .findFirst();\n}\n</code></pre>\n<p>This will return an empty <code>Optional</code> if no result is found. The first filter will filter all non-null employees, then the second filter will check the id.</p>\n<hr />\n<p>If you want to get Employee instead of Optional, then you can use:</p>\n<pre><code>public Employee findEmployee(int id) {\n    return Stream.of(employees)\n            .filter(Objects::nonNull)\n            .filter(employee -&gt; employee.getId() == id)\n            .findFirst()\n            .orElse(null);\n}\n</code></pre>\n<p>Or if you want to go deeper, you even throw an exception if no employee is found, for example:</p>\n<pre><code>public Employee findEmployee(int id) {\n    return Stream.of(employees)\n            .filter(Objects::nonNull)\n            .filter(employee -&gt; employee.getId() == id)\n            .findFirst()\n            .orElseThrow(() -&gt; new RuntimeException(&quot;No employee found.&quot;));\n}\n</code></pre>\n"}],"owner":{"account_id":22312572,"reputation":140,"user_id":16561343,"display_name":"Evgeniy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":104,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"closed_date":1669216529,"accepted_answer_id":74533138,"answer_count":1,"score":-2,"last_activity_date":1669216600,"creation_date":1669122241,"question_id":74533076,"body_markdown":"Given the following task.\r\nWe have an `Employee` and a `Company` classes. Each instance of `Employee` class is stored in array `Employee[] employees` in the `Company` class. I need a method which finds an instance of `Employee` in the array `Employee[] employees` by `id`.\r\n\r\nI managed to write the following code:\r\n\r\n    public class Employee {\r\n    \tprotected final int id;\r\n    \tprotected String name;\r\n    \r\n    \tpublic Employee(int id, String name) {\r\n    \t\tthis.id = id;\r\n    \t\tthis.name= name;\r\n    \t}\r\n    \tpublic int getId() {\r\n    \t\treturn id;\r\n    \t}\r\n    }\r\n    \r\n    public class Company {\r\n    \tprivate Employee[] employees;\r\n    \tprivate int size;\r\n    \tprivate static final int defaultCapacity = 5;\r\n    \t\r\n    \tpublic Company() {\r\n    \t\tthis(defaultCapacity);\r\n    \t}\r\n    \t\r\n    \tpublic Company(int capacity) {\r\n    \t\tif (capacity &lt;= 0)\r\n    \t\t\t throw new RuntimeException(&quot;capacity is required&quot;);\r\n    \t\temployees = new Employee[capacity];\r\n    \t}\r\n    \r\n    \tpublic Employee findEmployee(int id) {\r\n    \t\tfor (int i = 0; i &lt; size; i++) {\r\n    \t\t\tif(employees[i].getId() == id) {\r\n    \t\t\t\treturn employees[i];\r\n    \t\t\t}\r\n    \t\t}\r\n    \t\treturn null;\r\n    \t}\r\n    }\r\n\r\nThe problem is that my method `public Employee findEmployee(int id)` throws `NullPointerException` if an element of the `Employee[] employees` equals `null`.\r\n\r\nHow can I rewrite the method `public Employee findEmployee(int id)` using Streams API and Optional in order to get rid of `NullPointerException` in the method public `Employee findEmployee(int id)`?\r\n","title":"How to get rid of NullPointerException in a method using Streams API and Optional?","body":"<p>Given the following task.\nWe have an <code>Employee</code> and a <code>Company</code> classes. Each instance of <code>Employee</code> class is stored in array <code>Employee[] employees</code> in the <code>Company</code> class. I need a method which finds an instance of <code>Employee</code> in the array <code>Employee[] employees</code> by <code>id</code>.</p>\n<p>I managed to write the following code:</p>\n<pre><code>public class Employee {\n    protected final int id;\n    protected String name;\n\n    public Employee(int id, String name) {\n        this.id = id;\n        this.name= name;\n    }\n    public int getId() {\n        return id;\n    }\n}\n\npublic class Company {\n    private Employee[] employees;\n    private int size;\n    private static final int defaultCapacity = 5;\n    \n    public Company() {\n        this(defaultCapacity);\n    }\n    \n    public Company(int capacity) {\n        if (capacity &lt;= 0)\n             throw new RuntimeException(&quot;capacity is required&quot;);\n        employees = new Employee[capacity];\n    }\n\n    public Employee findEmployee(int id) {\n        for (int i = 0; i &lt; size; i++) {\n            if(employees[i].getId() == id) {\n                return employees[i];\n            }\n        }\n        return null;\n    }\n}\n</code></pre>\n<p>The problem is that my method <code>public Employee findEmployee(int id)</code> throws <code>NullPointerException</code> if an element of the <code>Employee[] employees</code> equals <code>null</code>.</p>\n<p>How can I rewrite the method <code>public Employee findEmployee(int id)</code> using Streams API and Optional in order to get rid of <code>NullPointerException</code> in the method public <code>Employee findEmployee(int id)</code>?</p>\n"},{"tags":["java","double","precision"],"comments":[{"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"score":4,"creation_date":1669215823,"post_id":74548868,"comment_id":131594726,"body_markdown":"Never trust on double equality in code. Either use a smal allowed delta (this is what JUnit&#39;s `assertEquals(double, double, double)` does), or use `BigDecimal`.","body":"Never trust on double equality in code. Either use a smal allowed delta (this is what JUnit&#39;s <code>assertEquals(double, double, double)</code> does), or use <code>BigDecimal</code>."},{"owner":{"account_id":7226774,"reputation":19717,"user_id":5515060,"accept_rate":100,"display_name":"Lino"},"score":3,"creation_date":1669215824,"post_id":74548868,"comment_id":131594729,"body_markdown":"Can you please provide an [mre]?","body":"Can you please provide an <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>?"},{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":0,"creation_date":1669215956,"post_id":74548868,"comment_id":131594767,"body_markdown":"This might also be a HW difference - as Rob said, always count with precision issues in floating point math (which this is).","body":"This might also be a HW difference - as Rob said, always count with precision issues in floating point math (which this is)."},{"owner":{"account_id":13359761,"reputation":391,"user_id":10079966,"display_name":"Vml11"},"score":0,"creation_date":1669216168,"post_id":74548868,"comment_id":131594857,"body_markdown":"Yeah it seems i might need to go with Delta checks. In any case does someone know why this difference can happen on doubles? \nMinimal reproducible example is kinda hard to tell just a bunch of doubles that i sum. I guess Java might take some of the decimals as BigDecimal and when they sum the precision is different.","body":"Yeah it seems i might need to go with Delta checks. In any case does someone know why this difference can happen on doubles?  Minimal reproducible example is kinda hard to tell just a bunch of doubles that i sum. I guess Java might take some of the decimals as BigDecimal and when they sum the precision is different."},{"owner":{"account_id":23783500,"reputation":5175,"user_id":17795888,"display_name":"Chaosfire"},"score":1,"creation_date":1669216441,"post_id":74548868,"comment_id":131594968,"body_markdown":"Because floating point numbers are like this. Check [Is floating point math broken?](https://stackoverflow.com/questions/588004/is-floating-point-math-broken)","body":"Because floating point numbers are like this. Check <a href=\"https://stackoverflow.com/questions/588004/is-floating-point-math-broken\">Is floating point math broken?</a>"}],"answers":[{"tags":[],"owner":{"account_id":6746752,"reputation":298,"user_id":5198144,"display_name":"Pekinek"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1669216350,"creation_date":1669216350,"answer_id":74549034,"question_id":74548868,"body_markdown":"Our computers cannot store exact representation of double type. They must be rounded to be saved. That&#39;s why comparing them directly with == might produce unexpected results. You can read more [here][1] about this topic.\r\n\r\nExample of correct comparison of doubles in plain java:\r\n\r\n    double epsilon = 0.000001d;\r\n    assertThat(Math.abs(d1 - d2) &lt; epsilon).isTrue();\r\n\r\n  [1]: https://www.baeldung.com/java-comparing-doubles","title":"Same Java version produces different output for double value","body":"<p>Our computers cannot store exact representation of double type. They must be rounded to be saved. That's why comparing them directly with == might produce unexpected results. You can read more <a href=\"https://www.baeldung.com/java-comparing-doubles\" rel=\"nofollow noreferrer\">here</a> about this topic.</p>\n<p>Example of correct comparison of doubles in plain java:</p>\n<pre><code>double epsilon = 0.000001d;\nassertThat(Math.abs(d1 - d2) &lt; epsilon).isTrue();\n</code></pre>\n"}],"owner":{"account_id":13359761,"reputation":391,"user_id":10079966,"display_name":"Vml11"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":107,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74549034,"answer_count":1,"score":0,"last_activity_date":1669216350,"creation_date":1669215624,"question_id":74548868,"body_markdown":"I have a long sum of doubles that produces an output.\r\nProblem comes when I execute the tests E2E my local environment gets a result with certain amount of decimals but in the dev machine despite it has the same architecture and same java version the decimals do not match for certain sums.\r\n\r\nFor instance:\r\n\r\n```\r\nmatch failed: EQUALS\r\n  $ | not equal (NUMBER:NUMBER)\r\n  6764785.117418662 ---&gt; dev\r\n  6764785.11741866  ---&gt; Local\r\n\r\nmatch failed: EQUALS\r\n  $ | not equal (NUMBER:NUMBER)\r\n  9.7787576643837 ---&gt; dev\r\n  9.778757664383699 ---&gt; Local\r\n\r\nmatch failed: EQUALS\r\n  $ | not equal (NUMBER:NUMBER)\r\n  2.0465350497710526 ---&gt; dev\r\n  2.046535049771075 ---&gt; Local\r\n\r\n```\r\n\r\nThese are just some examples.\r\n\r\nI am using openjdk version &quot;11.0.15&quot; 2022-04-19 from temurin\r\n\r\nI also tried another java version but it keeps happening the same. Any idea of what might i be doing wrong? Also using intelliJ latest version.","title":"Same Java version produces different output for double value","body":"<p>I have a long sum of doubles that produces an output.\nProblem comes when I execute the tests E2E my local environment gets a result with certain amount of decimals but in the dev machine despite it has the same architecture and same java version the decimals do not match for certain sums.</p>\n<p>For instance:</p>\n<pre><code>match failed: EQUALS\n  $ | not equal (NUMBER:NUMBER)\n  6764785.117418662 ---&gt; dev\n  6764785.11741866  ---&gt; Local\n\nmatch failed: EQUALS\n  $ | not equal (NUMBER:NUMBER)\n  9.7787576643837 ---&gt; dev\n  9.778757664383699 ---&gt; Local\n\nmatch failed: EQUALS\n  $ | not equal (NUMBER:NUMBER)\n  2.0465350497710526 ---&gt; dev\n  2.046535049771075 ---&gt; Local\n\n</code></pre>\n<p>These are just some examples.</p>\n<p>I am using openjdk version &quot;11.0.15&quot; 2022-04-19 from temurin</p>\n<p>I also tried another java version but it keeps happening the same. Any idea of what might i be doing wrong? Also using intelliJ latest version.</p>\n"},{"tags":["java","spring","spring-data"],"comments":[{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":3,"creation_date":1669211108,"post_id":74547755,"comment_id":131592713,"body_markdown":"Isn&#39;t the point of `nativeQuery = true` that the query should be just plain SQL? If so, &quot;select new AgendamentoDTO(a.id, a.data, s.nome, p.nome, pro.nome)&quot; doesn&#39;t look appropriate to me.","body":"Isn&#39;t the point of <code>nativeQuery = true</code> that the query should be just plain SQL? If so, &quot;select new AgendamentoDTO(a.id, a.data, s.nome, p.nome, pro.nome)&quot; doesn&#39;t look appropriate to me."},{"owner":{"account_id":1303659,"reputation":2036,"user_id":1253088,"display_name":"Vaibs"},"score":0,"creation_date":1669211197,"post_id":74547755,"comment_id":131592762,"body_markdown":"Looks like your list is empty. check the similar post https://stackoverflow.com/questions/38877775/org-postgresql-util-psqlexception-error-syntax-error-at-or-near","body":"Looks like your list is empty. check the similar post <a href=\"https://stackoverflow.com/questions/38877775/org-postgresql-util-psqlexception-error-syntax-error-at-or-near\" title=\"org postgresql util psqlexception error syntax error at or near\">stackoverflow.com/questions/38877775/&hellip;</a>"},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1669212170,"post_id":74547755,"comment_id":131593174,"body_markdown":"Constructing a DTO onl works in JPQL not in SQL.","body":"Constructing a DTO onl works in JPQL not in SQL."}],"answers":[{"tags":[],"owner":{"account_id":23515844,"reputation":5,"user_id":17563773,"display_name":"Victor"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669216274,"creation_date":1669216274,"answer_id":74549017,"question_id":74547755,"body_markdown":"Works when I Change to JPQL.\r\n\r\n    @Query(value = &quot;select new com.tcc.tccbackend.dtos.AgendamentoDTO(a.id, a.data, s.nome, p.nome, pro.nome) &quot; + &quot;from Agendamento a &quot; + &quot;join Paciente p on p.id = a.id &quot; + &quot;join Profissional pro on pro.id = a.id &quot; + &quot;join Servico s on s.id = a.id&quot;)\r\n        List&lt;AgendamentoDTO&gt; agendamentos3();","title":"JAVA ERROR in SQL: syntax error at or near &quot;(&quot; Position: 26","body":"<p>Works when I Change to JPQL.</p>\n<pre><code>@Query(value = &quot;select new com.tcc.tccbackend.dtos.AgendamentoDTO(a.id, a.data, s.nome, p.nome, pro.nome) &quot; + &quot;from Agendamento a &quot; + &quot;join Paciente p on p.id = a.id &quot; + &quot;join Profissional pro on pro.id = a.id &quot; + &quot;join Servico s on s.id = a.id&quot;)\n    List&lt;AgendamentoDTO&gt; agendamentos3();\n</code></pre>\n"}],"owner":{"account_id":23515844,"reputation":5,"user_id":17563773,"display_name":"Victor"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":209,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1669216274,"creation_date":1669210884,"question_id":74547755,"body_markdown":"I am getting this error\r\n\r\n    Caused by: org.postgresql.util.PSQLException: ERROR: syntax error at or near &quot;(&quot;\r\n      Position: 26\r\n\r\nwhen I try use following method \r\n\r\n**Repository**\r\n\r\n    @Query(value = &quot;select new AgendamentoDTO(a.id, a.data, s.nome, p.nome, pro.nome) &quot; + &quot;from agendamento a &quot; + &quot;join pacientes p on p.id = a.paciente_id &quot; + &quot;join profissionais pro on pro.id = a.profissional_id &quot; + &quot;join servico s on s.id = a.servico_id&quot;, nativeQuery = true)\r\n        List&lt;AgendamentoDTO&gt; agendamentos3();\r\n\r\n**DTO**\r\n\r\n    @Data\r\n    @NoArgsConstructor\r\n    public class AgendamentoDTO {\r\n        private Integer id;\r\n        private String data;\r\n        private String servico;\r\n        private String paciente;\r\n        private String profissional;\r\n    \r\n        public AgendamentoDTO(Integer id, String paciente, String data, String profissional, String servico) {\r\n            this.id = id;\r\n            this.data = data;\r\n            this.servico = servico;\r\n            this.paciente = paciente;\r\n            this.profissional = profissional;\r\n        }\r\n    }\r\n\r\nSpringData - 2.7.0\r\n\r\nDatabase - PostgreSQL\r\n\r\n","title":"JAVA ERROR in SQL: syntax error at or near &quot;(&quot; Position: 26","body":"<p>I am getting this error</p>\n<pre><code>Caused by: org.postgresql.util.PSQLException: ERROR: syntax error at or near &quot;(&quot;\n  Position: 26\n</code></pre>\n<p>when I try use following method</p>\n<p><strong>Repository</strong></p>\n<pre><code>@Query(value = &quot;select new AgendamentoDTO(a.id, a.data, s.nome, p.nome, pro.nome) &quot; + &quot;from agendamento a &quot; + &quot;join pacientes p on p.id = a.paciente_id &quot; + &quot;join profissionais pro on pro.id = a.profissional_id &quot; + &quot;join servico s on s.id = a.servico_id&quot;, nativeQuery = true)\n    List&lt;AgendamentoDTO&gt; agendamentos3();\n</code></pre>\n<p><strong>DTO</strong></p>\n<pre><code>@Data\n@NoArgsConstructor\npublic class AgendamentoDTO {\n    private Integer id;\n    private String data;\n    private String servico;\n    private String paciente;\n    private String profissional;\n\n    public AgendamentoDTO(Integer id, String paciente, String data, String profissional, String servico) {\n        this.id = id;\n        this.data = data;\n        this.servico = servico;\n        this.paciente = paciente;\n        this.profissional = profissional;\n    }\n}\n</code></pre>\n<p>SpringData - 2.7.0</p>\n<p>Database - PostgreSQL</p>\n"},{"tags":["java","android","firebase","firebase-realtime-database"],"answers":[{"tags":[],"owner":{"account_id":72426,"reputation":573804,"user_id":209103,"accept_rate":73,"display_name":"Frank van Puffelen"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669216123,"creation_date":1669216123,"answer_id":74548979,"question_id":74546589,"body_markdown":"When you execute a query against the Firebase Database, there will potentially be multiple results. So the snapshot contains a list of those results. Even if there is only a single result, the snapshot will contain a list of one result.\r\n\r\nYour `onDataChange` needs to handle this list by looping over `snapshot.getChildren()`:\r\n\r\n    public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n        for (DataSnapshot shopUserSnapshot: snapshot.getChildren()) {\r\n            phone=shopUserSnapshot.getValue(ShopUser.class).getNumberphone_shop();\r\n        }\r\n    }\r\n\r\nAlso: please never leave `onCancelled` empty, as you&#39;re ignoring potential errors. At its very least it should look like:\r\n\r\n    @Override\r\n    public void onCancelled(@NonNull DatabaseError error) {\r\n        throw error.toException()l\r\n    }","title":"I can not get data from firebase from a specific user (using the uid check method)","body":"<p>When you execute a query against the Firebase Database, there will potentially be multiple results. So the snapshot contains a list of those results. Even if there is only a single result, the snapshot will contain a list of one result.</p>\n<p>Your <code>onDataChange</code> needs to handle this list by looping over <code>snapshot.getChildren()</code>:</p>\n<pre><code>public void onDataChange(@NonNull DataSnapshot snapshot) {\n    for (DataSnapshot shopUserSnapshot: snapshot.getChildren()) {\n        phone=shopUserSnapshot.getValue(ShopUser.class).getNumberphone_shop();\n    }\n}\n</code></pre>\n<p>Also: please never leave <code>onCancelled</code> empty, as you're ignoring potential errors. At its very least it should look like:</p>\n<pre><code>@Override\npublic void onCancelled(@NonNull DatabaseError error) {\n    throw error.toException()l\n}\n</code></pre>\n"}],"owner":{"account_id":26884422,"reputation":11,"user_id":20467834,"display_name":"shestakovski.erchim"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":25,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1669216123,"creation_date":1669205432,"question_id":74546589,"body_markdown":"I ordered that when a user adds information, he also transfers his uid from another user with it; when receiving a uid, the received uid is compared with the uid from the folder with users.  If they match, the data of a certain user (number, name) is received.  User Model\r\n```\r\npublic class ShopUser {\r\n    private String client_shop,numberphone_shop,ShopInfouid;\r\n    public ShopUser(){\r\n    }\r\n    public ShopUser(String client_shop, String numberphone_shop, String shopInfouid) {\r\n        this.client_shop = client_shop;\r\n        this.numberphone_shop = numberphone_shop;\r\n    this.ShopInfouid=shopInfouid;\r\n    }\r\n    public String getClient_shop() {\r\n        return client_shop;\r\n    }\r\n    public void setClient_shop(String client_shop) {\r\n        this.client_shop = client_shop;\r\n    }\r\n    public String getNumberphone_shop() {\r\n        return numberphone_shop;\r\n    }\r\n    public void setNumberphone_shop(String numberphone_shop) {\r\n        this.numberphone_shop = numberphone_shop;\r\n    }\r\n    public String getShopInfouid() {\r\n        return ShopInfouid;\r\n    }\r\n    public void setShopInfouid(String shopInfouid) {\r\n        ShopInfouid = shopInfouid;\r\n    }\r\n}\r\n```\r\nvalidation method\r\n```\r\nShopInfoRef.orderByChild(&quot;ShopInfouid&quot;).equalTo(getIntent().getExtras().get(&quot;UidShop&quot;).toString())\r\n////UidSop это принятый uid переносится из другого активити  а ShopInfouid это uid пользователя так называется в бд////\r\n            .addValueEventListener(new ValueEventListener() {\r\n                @Override\r\n                public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                    if (snapshot.exists() &amp;&amp; snapshot.getChildrenCount() &gt; 0) {\r\nphone=snapshot.getValue(ShopUser.class).getNumberphone_shop();\r\n                    }else {\r\n                        Toast.makeText(OplataActivity.this, &quot;Данных нет&quot;, Toast.LENGTH_SHORT).show();\r\n                    }\r\n                }\r\n                @Override\r\n                public void onCancelled(@NonNull DatabaseError error) {\r\n                }\r\n            });\r\n```\r\ninitialization\r\n```\r\nprivate String phone;\r\n    ShopInfoRef=FirebaseDatabase.getInstance().getReference().child(&quot;shop&quot;);\r\n```\r\ntried to check in the log d but gave an error that the phone string has a null value and tried to pass this string to the phone open method, but the required number does not appear there, here is the method\r\n```\r\nimage_phone_shop.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                Intent ohoneIntent=new Intent(Intent.ACTION_DIAL);\r\n                ohoneIntent.setData(Uri.parse(&quot;tel:&quot;+ phone));\r\n                startActivity(ohoneIntent);\r\n            }\r\n        });\r\n```\r\nHere is the users folder in which the uids of users from it are compared with the accepted uid\r\n[![user][1]][1]\r\n\r\n\r\nHere is the data folder where the uid is taken from for comparison\r\n[![data][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/vTX6r.jpg\r\n  [2]: https://i.stack.imgur.com/RlLY9.jpg","title":"I can not get data from firebase from a specific user (using the uid check method)","body":"<p>I ordered that when a user adds information, he also transfers his uid from another user with it; when receiving a uid, the received uid is compared with the uid from the folder with users.  If they match, the data of a certain user (number, name) is received.  User Model</p>\n<pre><code>public class ShopUser {\n    private String client_shop,numberphone_shop,ShopInfouid;\n    public ShopUser(){\n    }\n    public ShopUser(String client_shop, String numberphone_shop, String shopInfouid) {\n        this.client_shop = client_shop;\n        this.numberphone_shop = numberphone_shop;\n    this.ShopInfouid=shopInfouid;\n    }\n    public String getClient_shop() {\n        return client_shop;\n    }\n    public void setClient_shop(String client_shop) {\n        this.client_shop = client_shop;\n    }\n    public String getNumberphone_shop() {\n        return numberphone_shop;\n    }\n    public void setNumberphone_shop(String numberphone_shop) {\n        this.numberphone_shop = numberphone_shop;\n    }\n    public String getShopInfouid() {\n        return ShopInfouid;\n    }\n    public void setShopInfouid(String shopInfouid) {\n        ShopInfouid = shopInfouid;\n    }\n}\n</code></pre>\n<p>validation method</p>\n<pre><code>ShopInfoRef.orderByChild(&quot;ShopInfouid&quot;).equalTo(getIntent().getExtras().get(&quot;UidShop&quot;).toString())\n////UidSop это принятый uid переносится из другого активити  а ShopInfouid это uid пользователя так называется в бд////\n            .addValueEventListener(new ValueEventListener() {\n                @Override\n                public void onDataChange(@NonNull DataSnapshot snapshot) {\n                    if (snapshot.exists() &amp;&amp; snapshot.getChildrenCount() &gt; 0) {\nphone=snapshot.getValue(ShopUser.class).getNumberphone_shop();\n                    }else {\n                        Toast.makeText(OplataActivity.this, &quot;Данных нет&quot;, Toast.LENGTH_SHORT).show();\n                    }\n                }\n                @Override\n                public void onCancelled(@NonNull DatabaseError error) {\n                }\n            });\n</code></pre>\n<p>initialization</p>\n<pre><code>private String phone;\n    ShopInfoRef=FirebaseDatabase.getInstance().getReference().child(&quot;shop&quot;);\n</code></pre>\n<p>tried to check in the log d but gave an error that the phone string has a null value and tried to pass this string to the phone open method, but the required number does not appear there, here is the method</p>\n<pre><code>image_phone_shop.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n                Intent ohoneIntent=new Intent(Intent.ACTION_DIAL);\n                ohoneIntent.setData(Uri.parse(&quot;tel:&quot;+ phone));\n                startActivity(ohoneIntent);\n            }\n        });\n</code></pre>\n<p>Here is the users folder in which the uids of users from it are compared with the accepted uid\n<a href=\"https://i.stack.imgur.com/vTX6r.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/vTX6r.jpg\" alt=\"user\" /></a></p>\n<p>Here is the data folder where the uid is taken from for comparison\n<a href=\"https://i.stack.imgur.com/RlLY9.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/RlLY9.jpg\" alt=\"data\" /></a></p>\n"},{"tags":["java","spring","spring-boot","exception","runtime-error"],"comments":[{"owner":{"account_id":19496972,"reputation":2160,"user_id":14263933,"display_name":"aatwork"},"score":0,"creation_date":1669221620,"post_id":74548945,"comment_id":131596983,"body_markdown":"You can take a look here https://stackoverflow.com/a/74550143/14263933. I just wrote solution to a similar problem. Solution should be same.","body":"You can take a look here <a href=\"https://stackoverflow.com/a/74550143/14263933\">stackoverflow.com/a/74550143/14263933</a>. I just wrote solution to a similar problem. Solution should be same."},{"owner":{"account_id":19847496,"reputation":41,"user_id":14538782,"display_name":"smhylc"},"score":0,"creation_date":1669235451,"post_id":74548945,"comment_id":131601295,"body_markdown":"Yes that&#39;s great and work! Thank you so much, I have a small question :) you know, MethodArgumentNotValidException returns us a message. When I get this message in bulk, it is very detailed and long. I can get the content of the message &quot;There is already user with this email!&quot; no problem here. \n\n\nHowever, I want to get the &quot;path&quot; information of it, I want to get PropertyPath by using &quot;constraintViolation.getPropertyPath().toString()&quot; but I could not find this property in MethodArgumentNotValidException. \n\nThank you so much","body":"Yes that&#39;s great and work! Thank you so much, I have a small question :) you know, MethodArgumentNotValidException returns us a message. When I get this message in bulk, it is very detailed and long. I can get the content of the message &quot;There is already user with this email!&quot; no problem here.    However, I want to get the &quot;path&quot; information of it, I want to get PropertyPath by using &quot;constraintViolation.getPropertyPath().toString()&quot; but I could not find this property in MethodArgumentNotValidException.   Thank you so much"},{"owner":{"account_id":19496972,"reputation":2160,"user_id":14263933,"display_name":"aatwork"},"score":0,"creation_date":1669301748,"post_id":74548945,"comment_id":131617632,"body_markdown":"MethodArgumentNotValidException doesn&#39;t have getPropertyPath() method. You can try this  List&lt;FieldError&gt; bindingResult = ex.getBindingResult().getFieldErrors();  &amp; see the options available there. By the way, plz upvote my original answer if you found it useful :)","body":"MethodArgumentNotValidException doesn&#39;t have getPropertyPath() method. You can try this  List&lt;FieldError&gt; bindingResult = ex.getBindingResult().getFieldErrors();  &amp; see the options available there. By the way, plz upvote my original answer if you found it useful :)"}],"owner":{"account_id":19847496,"reputation":41,"user_id":14538782,"display_name":"smhylc"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":487,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1669216001,"creation_date":1669216001,"question_id":74548945,"body_markdown":"I want to catch errors from a global point with Controller Advice. \r\n\r\nI created my ControllerAdvice class in this way, but I get an error when running the project. \r\n\r\n``` @ControllerAdvice\r\npublic class RestExceptionHandler extends ResponseEntityExceptionHandler {\r\n\tList&lt;ErrorEntity&gt; localerrorEntitiesList = new ArrayList&lt;&gt;();\r\n\r\n\t@ExceptionHandler(MethodArgumentNotValidException.class)\r\n\t@ResponseStatus(HttpStatus.UNPROCESSABLE_ENTITY)\r\n\tprotected ResponseEntity&lt;Object&gt; MethodArgumentNotValidException(MethodArgumentNotValidException methodArgumentNotValidException){\r\n\r\n\t\ttry {\r\n\r\n\t\t\tfor (FieldError methodArgument : methodArgumentNotValidException.getBindingResult().getFieldErrors()) {\r\n\t\t\t\tlocalerrorEntitiesList.add(new ErrorEntity(methodArgument.getField(),methodArgument.toString()));\r\n\t\t\t}\r\n\r\n\t\t\treturn new ResponseEntity&lt;&gt;(new ErrorResponse(localerrorEntitiesList),HttpStatus.BAD_REQUEST);\r\n\r\n\t\t}catch (Exception e){\r\n\t\t\treturn new ResponseEntity&lt;&gt;(new ErrorResponse(localerrorEntitiesList), HttpStatus.BAD_REQUEST);\r\n\t\t}\r\n\r\n\r\n\t}\r\n\r\n\r\n} \r\n````\r\n\r\nI have successfully caught many errors before, but I get an error when I want to catch MethodArgumentNotValidException. \r\nError output : \r\n\r\n\r\n\r\n    org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;handlerExceptionResolver&#39; defined in class path resource [org/springframework/boot/autoconfigure/web/servlet/WebMvcAutoConfiguration$EnableWebMvcConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.web.servlet.HandlerExceptionResolver]: Factory method &#39;handlerExceptionResolver&#39; threw exception; nested exception is java.lang.IllegalStateException: Ambiguous @ExceptionHandler method mapped for [class org.springframework.web.bind.MethodArgumentNotValidException]: {protected org.springframework.http.ResponseEntity mywebapp.demowebapp.exception.RestExceptionHandler.MethodArgumentNotValidException(org.springframework.web.bind.MethodArgumentNotValidException), public final org.springframework.http.ResponseEntity org.springframework.web.servlet.mvc.method.annotation.ResponseEntityExceptionHandler.handleException(java.lang.Exception,org.springframework.web.context.request.WebRequest) throws java.lang.Exception}\r\n    \tat org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:658) ~[spring-beans-5.3.23.jar:5.3.23]\r\n    \tat org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:638) ~[spring-beans-5.3.23.jar:5.3.23]\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1352) ~[spring-beans-5.3.23.jar:5.3.23]\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1195) ~[spring-beans-5.3.23.jar:5.3.23]\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582) ~[spring-beans-5.3.23.jar:5.3.23]\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.23.jar:5.3.23]\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.23.jar:5.3.23]\r\n    \tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.23.jar:5.3.23]\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.23.jar:5.3.23]\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.23.jar:5.3.23]\r\n    \tat org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:955) ~[spring-beans-5.3.23.jar:5.3.23]\r\n    \tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918) ~[spring-context-5.3.23.jar:5.3.23]\r\n    \tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583) ~[spring-context-5.3.23.jar:5.3.23]\r\n    \tat org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:147) ~[spring-boot-2.7.5.jar:2.7.5]\r\n    \tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734) ~[spring-boot-2.7.5.jar:2.7.5]\r\n    \tat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:408) ~[spring-boot-2.7.5.jar:2.7.5]\r\n    \tat org.springframework.boot.SpringApplication.run(SpringApplication.java:308) ~[spring-boot-2.7.5.jar:2.7.5]\r\n    \tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1306) ~[spring-boot-2.7.5.jar:2.7.5]\r\n    \tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1295) ~[spring-boot-2.7.5.jar:2.7.5]\r\n    \tat mywebapp.demowebapp.DemoWebAppApplication.main(DemoWebAppApplication.java:17) ~[main/:na]\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:na]\r\n    \tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\r\n    \tat java.base/java.lang.reflect.Method.invoke(Method.java:566) ~[na:na]\r\n    \tat org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:49) ~[spring-boot-devtools-2.7.5.jar:2.7.5]\r\n    Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.web.servlet.HandlerExceptionResolver]: Factory method &#39;handlerExceptionResolver&#39; threw exception; nested exception is java.lang.IllegalStateException: Ambiguous @ExceptionHandler method mapped for [class org.springframework.web.bind.MethodArgumentNotValidException]: {protected org.springframework.http.ResponseEntity mywebapp.demowebapp.exception.RestExceptionHandler.MethodArgumentNotValidException(org.springframework.web.bind.MethodArgumentNotValidException), public final org.springframework.http.ResponseEntity org.springframework.web.servlet.mvc.method.annotation.ResponseEntityExceptionHandler.handleException(java.lang.Exception,org.springframework.web.context.request.WebRequest) throws java.lang.Exception}\r\n    \tat org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:185) ~[spring-beans-5.3.23.jar:5.3.23]\r\n    \tat org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:653) ~[spring-beans-5.3.23.jar:5.3.23]\r\n    \t... 24 common frames omitted\r\n    Caused by: java.lang.IllegalStateException: Ambiguous @ExceptionHandler method mapped for [class org.springframework.web.bind.MethodArgumentNotValidException]: {protected org.springframework.http.ResponseEntity mywebapp.demowebapp.exception.RestExceptionHandler.MethodArgumentNotValidException(org.springframework.web.bind.MethodArgumentNotValidException), public final org.springframework.http.ResponseEntity org.springframework.web.servlet.mvc.method.annotation.ResponseEntityExceptionHandler.handleException(java.lang.Exception,org.springframework.web.context.request.WebRequest) throws java.lang.Exception}\r\n    \tat org.springframework.web.method.annotation.ExceptionHandlerMethodResolver.addExceptionMapping(ExceptionHandlerMethodResolver.java:114) ~[spring-web-5.3.23.jar:5.3.23]\r\n    \tat org.springframework.web.method.annotation.ExceptionHandlerMethodResolver.&lt;init&gt;(ExceptionHandlerMethodResolver.java:78) ~[spring-web-5.3.23.jar:5.3.23]\r\n    \tat org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache(ExceptionHandlerExceptionResolver.java:291) ~[spring-webmvc-5.3.23.jar:5.3.23]\r\n    \tat org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver.afterPropertiesSet(ExceptionHandlerExceptionResolver.java:268) ~[spring-webmvc-5.3.23.jar:5.3.23]\r\n    \tat org.springframework.web.servlet.config.annotation.WebMvcConfigurationSupport.addDefaultHandlerExceptionResolvers(WebMvcConfigurationSupport.java:1090) ~[spring-webmvc-5.3.23.jar:5.3.23]\r\n    \tat org.springframework.web.servlet.config.annotation.WebMvcConfigurationSupport.handlerExceptionResolver(WebMvcConfigurationSupport.java:1032) ~[spring-webmvc-5.3.23.jar:5.3.23]\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:na]\r\n    \tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\r\n    \tat java.base/java.lang.reflect.Method.invoke(Method.java:566) ~[na:na]\r\n    \tat org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:154) ~[spring-beans-5.3.23.jar:5.3.23]\r\n    \t... 25 common frames omitted\r\n    \r\n    \r\n    Process finished with exit code 0","title":"@ControllerAdvice not catch MethodArgumentNotValidException","body":"<p>I want to catch errors from a global point with Controller Advice.</p>\n<p>I created my ControllerAdvice class in this way, but I get an error when running the project.</p>\n<pre><code>public class RestExceptionHandler extends ResponseEntityExceptionHandler {\n    List&lt;ErrorEntity&gt; localerrorEntitiesList = new ArrayList&lt;&gt;();\n\n    @ExceptionHandler(MethodArgumentNotValidException.class)\n    @ResponseStatus(HttpStatus.UNPROCESSABLE_ENTITY)\n    protected ResponseEntity&lt;Object&gt; MethodArgumentNotValidException(MethodArgumentNotValidException methodArgumentNotValidException){\n\n        try {\n\n            for (FieldError methodArgument : methodArgumentNotValidException.getBindingResult().getFieldErrors()) {\n                localerrorEntitiesList.add(new ErrorEntity(methodArgument.getField(),methodArgument.toString()));\n            }\n\n            return new ResponseEntity&lt;&gt;(new ErrorResponse(localerrorEntitiesList),HttpStatus.BAD_REQUEST);\n\n        }catch (Exception e){\n            return new ResponseEntity&lt;&gt;(new ErrorResponse(localerrorEntitiesList), HttpStatus.BAD_REQUEST);\n        }\n\n\n    }\n\n\n} \n</code></pre>\n<p>I have successfully caught many errors before, but I get an error when I want to catch MethodArgumentNotValidException.\nError output :</p>\n<pre><code>org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'handlerExceptionResolver' defined in class path resource [org/springframework/boot/autoconfigure/web/servlet/WebMvcAutoConfiguration$EnableWebMvcConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.web.servlet.HandlerExceptionResolver]: Factory method 'handlerExceptionResolver' threw exception; nested exception is java.lang.IllegalStateException: Ambiguous @ExceptionHandler method mapped for [class org.springframework.web.bind.MethodArgumentNotValidException]: {protected org.springframework.http.ResponseEntity mywebapp.demowebapp.exception.RestExceptionHandler.MethodArgumentNotValidException(org.springframework.web.bind.MethodArgumentNotValidException), public final org.springframework.http.ResponseEntity org.springframework.web.servlet.mvc.method.annotation.ResponseEntityExceptionHandler.handleException(java.lang.Exception,org.springframework.web.context.request.WebRequest) throws java.lang.Exception}\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:658) ~[spring-beans-5.3.23.jar:5.3.23]\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:638) ~[spring-beans-5.3.23.jar:5.3.23]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1352) ~[spring-beans-5.3.23.jar:5.3.23]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1195) ~[spring-beans-5.3.23.jar:5.3.23]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582) ~[spring-beans-5.3.23.jar:5.3.23]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.23.jar:5.3.23]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.23.jar:5.3.23]\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.23.jar:5.3.23]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.23.jar:5.3.23]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.23.jar:5.3.23]\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:955) ~[spring-beans-5.3.23.jar:5.3.23]\n    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918) ~[spring-context-5.3.23.jar:5.3.23]\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583) ~[spring-context-5.3.23.jar:5.3.23]\n    at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:147) ~[spring-boot-2.7.5.jar:2.7.5]\n    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734) ~[spring-boot-2.7.5.jar:2.7.5]\n    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:408) ~[spring-boot-2.7.5.jar:2.7.5]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:308) ~[spring-boot-2.7.5.jar:2.7.5]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1306) ~[spring-boot-2.7.5.jar:2.7.5]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1295) ~[spring-boot-2.7.5.jar:2.7.5]\n    at mywebapp.demowebapp.DemoWebAppApplication.main(DemoWebAppApplication.java:17) ~[main/:na]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:na]\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\n    at java.base/java.lang.reflect.Method.invoke(Method.java:566) ~[na:na]\n    at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:49) ~[spring-boot-devtools-2.7.5.jar:2.7.5]\nCaused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.web.servlet.HandlerExceptionResolver]: Factory method 'handlerExceptionResolver' threw exception; nested exception is java.lang.IllegalStateException: Ambiguous @ExceptionHandler method mapped for [class org.springframework.web.bind.MethodArgumentNotValidException]: {protected org.springframework.http.ResponseEntity mywebapp.demowebapp.exception.RestExceptionHandler.MethodArgumentNotValidException(org.springframework.web.bind.MethodArgumentNotValidException), public final org.springframework.http.ResponseEntity org.springframework.web.servlet.mvc.method.annotation.ResponseEntityExceptionHandler.handleException(java.lang.Exception,org.springframework.web.context.request.WebRequest) throws java.lang.Exception}\n    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:185) ~[spring-beans-5.3.23.jar:5.3.23]\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:653) ~[spring-beans-5.3.23.jar:5.3.23]\n    ... 24 common frames omitted\nCaused by: java.lang.IllegalStateException: Ambiguous @ExceptionHandler method mapped for [class org.springframework.web.bind.MethodArgumentNotValidException]: {protected org.springframework.http.ResponseEntity mywebapp.demowebapp.exception.RestExceptionHandler.MethodArgumentNotValidException(org.springframework.web.bind.MethodArgumentNotValidException), public final org.springframework.http.ResponseEntity org.springframework.web.servlet.mvc.method.annotation.ResponseEntityExceptionHandler.handleException(java.lang.Exception,org.springframework.web.context.request.WebRequest) throws java.lang.Exception}\n    at org.springframework.web.method.annotation.ExceptionHandlerMethodResolver.addExceptionMapping(ExceptionHandlerMethodResolver.java:114) ~[spring-web-5.3.23.jar:5.3.23]\n    at org.springframework.web.method.annotation.ExceptionHandlerMethodResolver.&lt;init&gt;(ExceptionHandlerMethodResolver.java:78) ~[spring-web-5.3.23.jar:5.3.23]\n    at org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache(ExceptionHandlerExceptionResolver.java:291) ~[spring-webmvc-5.3.23.jar:5.3.23]\n    at org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver.afterPropertiesSet(ExceptionHandlerExceptionResolver.java:268) ~[spring-webmvc-5.3.23.jar:5.3.23]\n    at org.springframework.web.servlet.config.annotation.WebMvcConfigurationSupport.addDefaultHandlerExceptionResolvers(WebMvcConfigurationSupport.java:1090) ~[spring-webmvc-5.3.23.jar:5.3.23]\n    at org.springframework.web.servlet.config.annotation.WebMvcConfigurationSupport.handlerExceptionResolver(WebMvcConfigurationSupport.java:1032) ~[spring-webmvc-5.3.23.jar:5.3.23]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:na]\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\n    at java.base/java.lang.reflect.Method.invoke(Method.java:566) ~[na:na]\n    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:154) ~[spring-beans-5.3.23.jar:5.3.23]\n    ... 25 common frames omitted\n\n\nProcess finished with exit code 0\n</code></pre>\n"},{"tags":["java","spring","spring-boot","spring-security","spring-security-oauth2"],"comments":[{"owner":{"account_id":15178453,"reputation":113,"user_id":10952475,"display_name":"Daniel Jos&#233; Mart&#237;nez Parra"},"score":0,"creation_date":1561746948,"post_id":56811656,"comment_id":100177798,"body_markdown":"The current implementation works either for jwt or opaque Tokens. I would like to preserve this feature","body":"The current implementation works either for jwt or opaque Tokens. I would like to preserve this feature"},{"owner":{"account_id":2064278,"reputation":13138,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":0,"creation_date":1561762866,"post_id":56811656,"comment_id":100181856,"body_markdown":"you can read about spring security jwts here https://docs.spring.io/spring-security/site/docs/5.2.0.M3/reference/htmlsingle/#oauth2resourceserver-sansboot","body":"you can read about spring security jwts here <a href=\"https://docs.spring.io/spring-security/site/docs/5.2.0.M3/reference/htmlsingle/#oauth2resourceserver-sansboot\" rel=\"nofollow noreferrer\">docs.spring.io/spring-security/site/docs/5.2.0.M3/reference/&zwnj;&#8203;&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":13547347,"reputation":2150,"user_id":9773274,"display_name":"NatFar"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1561869014,"creation_date":1561869014,"answer_id":56822382,"question_id":56811656,"body_markdown":"Unfortunately, the [Spring Boot auto-configuration](https://github.com/spring-projects/spring-security-oauth2-boot/blob/master/spring-security-oauth2-autoconfigure/src/main/java/org/springframework/boot/autoconfigure/security/oauth2/resource/ResourceServerTokenServicesConfiguration.java) doesn&#39;t seem to provide a way to replace the `DefaultAccessTokenConverter`, which is the default token converter in `RemoteTokenServices`. To replace the converter, you would have to replace the `RemoteTokenServices` that&#39;s created by default.\r\n\r\nIf your converter is a bean, you could set it on your own `RemoteTokenServices` object, which you can then set on `ResourceServerSecurityConfigurer` (so that it could be applied to the `OAuth2AuthenticationManager` behind the scenes):\r\n\r\n```\r\n@Configuration\r\n@EnableResourceServer\r\n@EnableGlobalMethodSecurity(prePostEnabled = true)\r\npublic class SecurityConfiguration extends ResourceServerConfigurerAdapter {\r\n    // ...\r\n\r\n    @Autowired\r\n    private ResourceServerProperties resource;\r\n\r\n    @Autowired\r\n    private CustomAccessTokenConverter customConverter;\r\n\r\n    @Override\r\n    public void configure(ResourceServerSecurityConfigurer resources) {\r\n        resources.tokenServices(customTokenServices());\r\n        // ..\r\n    }\r\n\r\n    private RemoteTokenServices customTokenServices() {\r\n        RemoteTokenServices services = new RemoteTokenServices();\r\n        services.setAccessTokenConverter(this.customConverter);\r\n\r\n        // configure based on .properties file \r\n\t\tservices.setCheckTokenEndpointUrl(this.resource.getTokenInfoUri());\r\n\t\tservices.setClientId(this.resource.getClientId());\r\n\t    services.setClientSecret(this.resource.getClientSecret());\r\n\t\t\r\n        return services;\r\n    }\r\n\r\n    // ..\r\n\r\n  \r\n```\r\n","title":"How to extract claims from Spring Security OAuth2 Boot in the Resource Server?","body":"<p>Unfortunately, the <a href=\"https://github.com/spring-projects/spring-security-oauth2-boot/blob/master/spring-security-oauth2-autoconfigure/src/main/java/org/springframework/boot/autoconfigure/security/oauth2/resource/ResourceServerTokenServicesConfiguration.java\" rel=\"nofollow noreferrer\">Spring Boot auto-configuration</a> doesn't seem to provide a way to replace the <code>DefaultAccessTokenConverter</code>, which is the default token converter in <code>RemoteTokenServices</code>. To replace the converter, you would have to replace the <code>RemoteTokenServices</code> that's created by default.</p>\n\n<p>If your converter is a bean, you could set it on your own <code>RemoteTokenServices</code> object, which you can then set on <code>ResourceServerSecurityConfigurer</code> (so that it could be applied to the <code>OAuth2AuthenticationManager</code> behind the scenes):</p>\n\n<pre><code>@Configuration\n@EnableResourceServer\n@EnableGlobalMethodSecurity(prePostEnabled = true)\npublic class SecurityConfiguration extends ResourceServerConfigurerAdapter {\n    // ...\n\n    @Autowired\n    private ResourceServerProperties resource;\n\n    @Autowired\n    private CustomAccessTokenConverter customConverter;\n\n    @Override\n    public void configure(ResourceServerSecurityConfigurer resources) {\n        resources.tokenServices(customTokenServices());\n        // ..\n    }\n\n    private RemoteTokenServices customTokenServices() {\n        RemoteTokenServices services = new RemoteTokenServices();\n        services.setAccessTokenConverter(this.customConverter);\n\n        // configure based on .properties file \n        services.setCheckTokenEndpointUrl(this.resource.getTokenInfoUri());\n        services.setClientId(this.resource.getClientId());\n        services.setClientSecret(this.resource.getClientSecret());\n\n        return services;\n    }\n\n    // ..\n\n\n</code></pre>\n"}],"owner":{"account_id":15178453,"reputation":113,"user_id":10952475,"display_name":"Daniel Jos&#233; Mart&#237;nez Parra"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3412,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":56822382,"answer_count":1,"score":2,"last_activity_date":1669215958,"creation_date":1561746306,"question_id":56811656,"body_markdown":"I have an Authorization Server built in .Net Core Using [Identity Server 4](https://identityserver4.readthedocs.io/en/latest/)! It is working as expected to authorize clients and resources from Node Js and .Net. Now I&#39;m trying to add a Java spring Boot 2 API (jdk 1.8) as a Protected Resource. I have achieved that goal by using the [OAuth2 Boot Documentation](https://docs.spring.io/spring-security-oauth2-boot/docs/current-SNAPSHOT/reference/htmlsingle/#boot-features-security-oauth2-resource-server)! Everything works fine so far. Now, I need to extract the claims from the access token generated by the Authorization Server. This is a Bearer Token of Type JWT. The implementation I have for this is the following:\r\n```\r\n@Configuration\r\n@EnableResourceServer\r\n@EnableGlobalMethodSecurity(prePostEnabled = true)\r\npublic class SecurityConfiguration extends ResourceServerConfigurerAdapter {\r\n  public String resourceId;\r\n\r\n  @Autowired\r\n  public SecurityConfiguration(@Value(&quot;${security.oauth2.resource.id}&quot;) String resourceId) {\r\n    this.resourceId = resourceId;\r\n  }\r\n\r\n@Override\r\n  public void configure(ResourceServerSecurityConfigurer resources) {\r\n    resources.resourceId(this.resourceId);\r\n}\r\n\r\n  @Override\r\n  public void configure(HttpSecurity httpSecurity) throws Exception {\r\n    httpSecurity\r\n        .csrf()\r\n        .disable()\r\n        .authorizeRequests()\r\n        .antMatchers(&quot;/swagger-ui.html&quot;, &quot;/webjars/**&quot;, &quot;/swagger-resources/**&quot;, &quot;/**/api-docs/**&quot;, &quot;/actuator/**&quot;)\r\n        .permitAll()\r\n        .and()\r\n        .authorizeRequests().anyRequest().fullyAuthenticated();\r\n  }\r\n````\r\n\r\nThe problem is that when I try to access the claims inside a controller, they are not available. I have checked the default extractAuthentication Method from DefaultAccessTokenConverter, inside spring security, and indeed It is ignoring all non-default claims. What cross my mind is creating a new Converter extending the DefaultAccessToken Converter, as following: \r\n\r\n```\r\n@Component\r\npublic class CustomAccessTokenConverter extends DefaultAccessTokenConverter {\r\n\r\n  @Override\r\n  public OAuth2Authentication extractAuthentication(Map&lt;String, ?&gt; claims) {\r\n    OAuth2Authentication authentication = super.extractAuthentication(claims);\r\n    authentication.setDetails(claims);\r\n    return authentication;\r\n  }\r\n}\r\n```\r\nBut I have not figured out where to inject or reference this new converter.","title":"How to extract claims from Spring Security OAuth2 Boot in the Resource Server?","body":"<p>I have an Authorization Server built in .Net Core Using <a href=\"https://identityserver4.readthedocs.io/en/latest/\" rel=\"nofollow noreferrer\">Identity Server 4</a>! It is working as expected to authorize clients and resources from Node Js and .Net. Now I'm trying to add a Java spring Boot 2 API (jdk 1.8) as a Protected Resource. I have achieved that goal by using the <a href=\"https://docs.spring.io/spring-security-oauth2-boot/docs/current-SNAPSHOT/reference/htmlsingle/#boot-features-security-oauth2-resource-server\" rel=\"nofollow noreferrer\">OAuth2 Boot Documentation</a>! Everything works fine so far. Now, I need to extract the claims from the access token generated by the Authorization Server. This is a Bearer Token of Type JWT. The implementation I have for this is the following:</p>\n\n<pre><code>@Configuration\n@EnableResourceServer\n@EnableGlobalMethodSecurity(prePostEnabled = true)\npublic class SecurityConfiguration extends ResourceServerConfigurerAdapter {\n  public String resourceId;\n\n  @Autowired\n  public SecurityConfiguration(@Value(\"${security.oauth2.resource.id}\") String resourceId) {\n    this.resourceId = resourceId;\n  }\n\n@Override\n  public void configure(ResourceServerSecurityConfigurer resources) {\n    resources.resourceId(this.resourceId);\n}\n\n  @Override\n  public void configure(HttpSecurity httpSecurity) throws Exception {\n    httpSecurity\n        .csrf()\n        .disable()\n        .authorizeRequests()\n        .antMatchers(\"/swagger-ui.html\", \"/webjars/**\", \"/swagger-resources/**\", \"/**/api-docs/**\", \"/actuator/**\")\n        .permitAll()\n        .and()\n        .authorizeRequests().anyRequest().fullyAuthenticated();\n  }\n</code></pre>\n\n<p>The problem is that when I try to access the claims inside a controller, they are not available. I have checked the default extractAuthentication Method from DefaultAccessTokenConverter, inside spring security, and indeed It is ignoring all non-default claims. What cross my mind is creating a new Converter extending the DefaultAccessToken Converter, as following: </p>\n\n<pre><code>@Component\npublic class CustomAccessTokenConverter extends DefaultAccessTokenConverter {\n\n  @Override\n  public OAuth2Authentication extractAuthentication(Map&lt;String, ?&gt; claims) {\n    OAuth2Authentication authentication = super.extractAuthentication(claims);\n    authentication.setDetails(claims);\n    return authentication;\n  }\n}\n</code></pre>\n\n<p>But I have not figured out where to inject or reference this new converter.</p>\n"},{"tags":["java","selenium","automation","appium"],"answers":[{"tags":[],"owner":{"account_id":13721490,"reputation":9809,"user_id":9901261,"display_name":"Arundeep Chohan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1656568414,"creation_date":1656568047,"answer_id":72810834,"question_id":72810672,"body_markdown":"    driver.get(&#39;url&#39;)\r\n    navigationStart = driver.execute_script(&quot;return window.performance.timing.navigationStart&quot;)\r\n    responseStart = driver.execute_script(&quot;return window.performance.timing.responseStart&quot;)\r\n    domComplete = driver.execute_script(&quot;return window.performance.timing.domComplete&quot;)\r\n     \r\n    backendPerformance_calc = responseStart - navigationStart\r\n    frontendPerformance_calc = domComplete - responseStart\r\n     \r\n    print(&quot;Back End: %s&quot; % backendPerformance_calc)\r\n    print(&quot;Front End: %s&quot; % frontendPerformance_calc)\r\n\r\n\r\nYou can use this for page loads. Not sure of the Java way for this.\r\n\r\n    JavascriptExecutor js = (JavascriptExecutor)driver;\r\n    js.executeAsyncScript(&quot;return window.performance.timing.navigationStart&quot;);\t\r\n","title":"How can we get exact time to load a Mobile Application page using Appium and Java?","body":"<pre><code>driver.get('url')\nnavigationStart = driver.execute_script(&quot;return window.performance.timing.navigationStart&quot;)\nresponseStart = driver.execute_script(&quot;return window.performance.timing.responseStart&quot;)\ndomComplete = driver.execute_script(&quot;return window.performance.timing.domComplete&quot;)\n \nbackendPerformance_calc = responseStart - navigationStart\nfrontendPerformance_calc = domComplete - responseStart\n \nprint(&quot;Back End: %s&quot; % backendPerformance_calc)\nprint(&quot;Front End: %s&quot; % frontendPerformance_calc)\n</code></pre>\n<p>You can use this for page loads. Not sure of the Java way for this.</p>\n<pre><code>JavascriptExecutor js = (JavascriptExecutor)driver;\njs.executeAsyncScript(&quot;return window.performance.timing.navigationStart&quot;);  \n</code></pre>\n"},{"comments":[{"owner":{"account_id":1241354,"reputation":1178,"user_id":1203882,"accept_rate":100,"display_name":"Clark Kent"},"score":0,"creation_date":1658946845,"post_id":73110908,"comment_id":129181246,"body_markdown":"There are many ways to solve this problem, but other answers have more detailed solutions on how to solve this problem using the tagged frameworks.","body":"There are many ways to solve this problem, but other answers have more detailed solutions on how to solve this problem using the tagged frameworks."}],"tags":[],"owner":{"account_id":16581218,"reputation":1,"user_id":13612863,"display_name":"Itay Sasson"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1658759250,"creation_date":1658759250,"answer_id":73110908,"question_id":72810672,"body_markdown":"You can measure the duration.\r\nStart stopwatch when you start loading the application/page.\r\nAnd stop it when the last element is loaded.\r\n","title":"How can we get exact time to load a Mobile Application page using Appium and Java?","body":"<p>You can measure the duration.\nStart stopwatch when you start loading the application/page.\nAnd stop it when the last element is loaded.</p>\n"},{"tags":[],"owner":{"account_id":27025508,"reputation":1,"user_id":20582851,"display_name":"Bhanu Pratap"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669215836,"creation_date":1669215808,"answer_id":74548913,"question_id":72810672,"body_markdown":"Hi You can find the exact time of loading a homepage by using stopwatch class.\r\nUse below code:\r\n\r\nStopWatch loadTime = new StopWatch();\r\n\r\n\t\tdriver.get(&quot;url&quot;);\r\n\t\tloadTime.start();\r\n\t\t\r\n\t\tboolean appLoaded = new WebDriverWait(driver, 30).until(\r\n\t\t        ExpectedConditions.elementToBeClickable(MobileBy.xpath(&quot;any xpath of expected page&quot;))).isDisplayed();\r\n\t\t\r\n\t\tloadTime.stop();\r\n\t\t\r\n\t\tSystem.out.println(&quot;is App loaded : &quot; +appLoaded);\r\n\t\tlong pageLoadTime_ms = loadTime.getTime();\r\n\t\tSystem.out.println(&quot; Load Time: &quot; + pageLoadTime_ms + &quot; milliseconds&quot;);","title":"How can we get exact time to load a Mobile Application page using Appium and Java?","body":"<p>Hi You can find the exact time of loading a homepage by using stopwatch class.\nUse below code:</p>\n<p>StopWatch loadTime = new StopWatch();</p>\n<pre><code>    driver.get(&quot;url&quot;);\n    loadTime.start();\n    \n    boolean appLoaded = new WebDriverWait(driver, 30).until(\n            ExpectedConditions.elementToBeClickable(MobileBy.xpath(&quot;any xpath of expected page&quot;))).isDisplayed();\n    \n    loadTime.stop();\n    \n    System.out.println(&quot;is App loaded : &quot; +appLoaded);\n    long pageLoadTime_ms = loadTime.getTime();\n    System.out.println(&quot; Load Time: &quot; + pageLoadTime_ms + &quot; milliseconds&quot;);\n</code></pre>\n"}],"owner":{"account_id":25672426,"reputation":1,"user_id":19436446,"display_name":"Umesha H N"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":577,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1669215836,"creation_date":1656566802,"question_id":72810672,"body_markdown":"&gt;Hi Team, I need to calculate the Mobile app Page loading time when we navigate from one screen to other screen for Mobile Application.\r\n\r\n**I have Tried below Approach:** \r\n\r\nBefore Clicking on Element, get the current Time in MS and after clicking on the element, Waiting for expected element to be visible then again getting current time in MS and Subtract the times.\r\n\r\nPlease Help me out with better approach to calculate accurate page load time.\r\n\r\nThank you.","title":"How can we get exact time to load a Mobile Application page using Appium and Java?","body":"<blockquote>\n<p>Hi Team, I need to calculate the Mobile app Page loading time when we navigate from one screen to other screen for Mobile Application.</p>\n</blockquote>\n<p><strong>I have Tried below Approach:</strong></p>\n<p>Before Clicking on Element, get the current Time in MS and after clicking on the element, Waiting for expected element to be visible then again getting current time in MS and Subtract the times.</p>\n<p>Please Help me out with better approach to calculate accurate page load time.</p>\n<p>Thank you.</p>\n"},{"tags":["java","database","jdbc"],"comments":[{"owner":{"account_id":21949,"reputation":5449,"user_id":53744,"accept_rate":100,"display_name":"Will"},"score":1,"creation_date":1269196369,"post_id":2488206,"comment_id":2481151,"body_markdown":"As always, the answer depends on your needs.  Could you explain the role that the relational database plays in your project?  Also, can you clarify what is meant by &quot;it&#39;s the only one I can really use&quot;?","body":"As always, the answer depends on your needs.  Could you explain the role that the relational database plays in your project?  Also, can you clarify what is meant by &quot;it&#39;s the only one I can really use&quot;?"},{"owner":{"account_id":600500,"reputation":709,"user_id":295044,"accept_rate":100,"display_name":"aadersh patel"},"score":0,"creation_date":1269298587,"post_id":2488206,"comment_id":2490490,"body_markdown":"i am trying to implement access controls using a category based model in a banking environment.  The database will hold data about &quot;customers&quot; and their transactions, accounts etc.  It also will hold details about employees.  this data will then be used to categorise each user of the system, and in turn will decide whether actions performed by the users will be permitted or denied.  \n\n&quot;only one i can really use&quot; meaning its the only thing i have learnt about at university, but in theory only - not in practice. \n\nhope that helps...?!","body":"i am trying to implement access controls using a category based model in a banking environment.  The database will hold data about &quot;customers&quot; and their transactions, accounts etc.  It also will hold details about employees.  this data will then be used to categorise each user of the system, and in turn will decide whether actions performed by the users will be permitted or denied.    &quot;only one i can really use&quot; meaning its the only thing i have learnt about at university, but in theory only - not in practice.   hope that helps...?!"}],"answers":[{"comments":[{"owner":{"account_id":44612,"reputation":28559,"user_id":1385039,"accept_rate":74,"display_name":"Michael Ekstrand"},"score":0,"creation_date":1269200209,"post_id":2488214,"comment_id":2481456,"body_markdown":"One more embedded solution to add to the list: SQLite, available in both pure-Java and JNI-based versions.","body":"One more embedded solution to add to the list: SQLite, available in both pure-Java and JNI-based versions."},{"owner":{"account_id":5483053,"reputation":406,"user_id":4358787,"display_name":"Gaurav"},"score":0,"creation_date":1574136737,"post_id":2488214,"comment_id":104113943,"body_markdown":"@BalusC Which of these don&#39;t need installation?","body":"@BalusC Which of these don&#39;t need installation?"}],"tags":[],"owner":{"account_id":52822,"reputation":1089035,"user_id":157882,"accept_rate":93,"display_name":"BalusC"},"comment_count":2,"down_vote_count":0,"up_vote_count":19,"is_accepted":true,"score":19,"last_activity_date":1282271855,"creation_date":1269196356,"answer_id":2488214,"question_id":2488206,"body_markdown":"In fact, you can use every database which is accessible through a [JDBC driver][1]. Almost all self-respected RDBMS vendors provides a fullworthy JDBC driver for download at their homepage. Just Google &quot;[vendorname] jdbc driver download&quot; to find it. Here&#39;s an overview:\r\n\r\n- [MySQL JDBC driver][2]\r\n- [PostgreSQL JDBC driver][3] (note: older versions doesn&#39;t support generated keys).\r\n- [Oracle JDBC driver][4] (note: older versions doesn&#39;t support generated keys).\r\n- [MSSQL JDBC driver][5] (or performancewise better, the [jTDS JDBC driver][6])\r\n- DB2 JDBC driver is hard to find in IBM&#39;s online forest, but it&#39;s usually already included in the `/java` folder of the DB2 installation.\r\n\r\nThis way you can use the [JDBC API][7] transparently to access either of the databases. \r\n\r\nAs to which database to choose, just look at the features, robustness, performance, etc the RDBMS provides and the budget you have -if it isn&#39;t freeware. I myself tend to prefer PostgreSQL.\r\n\r\nInstead of a fullfledged database server, you can also consider an *embedded* Javabased database, such as [&lt;strike&gt;Sun&lt;/strike&gt; Oracle JavaDB][8], [Apache Derby][9], [HSQLDB][10] or [SQLite][11], each which are of course accessible through the JDBC API the usual way.\r\n\r\n\r\n  [1]: http://developers.sun.com/product/jdbc/drivers\r\n  [2]: http://dev.mysql.com/downloads/connector/j/\r\n  [3]: http://jdbc.postgresql.org/download.html\r\n  [4]: http://www.oracle.com/technetwork/database/features/jdbc/index-091264.html\r\n  [5]: http://www.microsoft.com/downloads/details.aspx?FamilyID=99B21B65-E98F-4A61-B811-19912601FDC9&amp;displaylang=en\r\n  [6]: http://jtds.sourceforge.net/\r\n  [7]: http://java.sun.com/docs/books/tutorial/jdbc/index.html\r\n  [8]: http://www.oracle.com/technetwork/java/javadb/overview/index.html\r\n  [9]: http://db.apache.org/derby/\r\n  [10]: http://hsqldb.org/\r\n  [11]: http://www.sqlite.org/","title":"what databases can be used with java?","body":"<p>In fact, you can use every database which is accessible through a <a href=\"http://developers.sun.com/product/jdbc/drivers\" rel=\"noreferrer\">JDBC driver</a>. Almost all self-respected RDBMS vendors provides a fullworthy JDBC driver for download at their homepage. Just Google \"[vendorname] jdbc driver download\" to find it. Here's an overview:</p>\n\n<ul>\n<li><a href=\"http://dev.mysql.com/downloads/connector/j/\" rel=\"noreferrer\">MySQL JDBC driver</a></li>\n<li><a href=\"http://jdbc.postgresql.org/download.html\" rel=\"noreferrer\">PostgreSQL JDBC driver</a> (note: older versions doesn't support generated keys).</li>\n<li><a href=\"http://www.oracle.com/technetwork/database/features/jdbc/index-091264.html\" rel=\"noreferrer\">Oracle JDBC driver</a> (note: older versions doesn't support generated keys).</li>\n<li><a href=\"http://www.microsoft.com/downloads/details.aspx?FamilyID=99B21B65-E98F-4A61-B811-19912601FDC9&amp;displaylang=en\" rel=\"noreferrer\">MSSQL JDBC driver</a> (or performancewise better, the <a href=\"http://jtds.sourceforge.net/\" rel=\"noreferrer\">jTDS JDBC driver</a>)</li>\n<li>DB2 JDBC driver is hard to find in IBM's online forest, but it's usually already included in the <code>/java</code> folder of the DB2 installation.</li>\n</ul>\n\n<p>This way you can use the <a href=\"http://java.sun.com/docs/books/tutorial/jdbc/index.html\" rel=\"noreferrer\">JDBC API</a> transparently to access either of the databases. </p>\n\n<p>As to which database to choose, just look at the features, robustness, performance, etc the RDBMS provides and the budget you have -if it isn't freeware. I myself tend to prefer PostgreSQL.</p>\n\n<p>Instead of a fullfledged database server, you can also consider an <em>embedded</em> Javabased database, such as <a href=\"http://www.oracle.com/technetwork/java/javadb/overview/index.html\" rel=\"noreferrer\"><strike>Sun</strike> Oracle JavaDB</a>, <a href=\"http://db.apache.org/derby/\" rel=\"noreferrer\">Apache Derby</a>, <a href=\"http://hsqldb.org/\" rel=\"noreferrer\">HSQLDB</a> or <a href=\"http://www.sqlite.org/\" rel=\"noreferrer\">SQLite</a>, each which are of course accessible through the JDBC API the usual way.</p>\n"},{"tags":[],"owner":{"account_id":104520,"reputation":21516,"user_id":279395,"accept_rate":96,"display_name":"Marcos Placona"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1269196440,"creation_date":1269196440,"answer_id":2488218,"question_id":2488206,"body_markdown":"You could have used pretty much **ANY** database. MSSQL, SQLite, Postgre, Oracle or [put your choice here]\r\n\r\nThere&#39;s a driver for pretty much any database to integrate with Java. [This][1] is a great place to find out all the DB&#39;s java support, as well as how to integrate\r\n\r\nHope this helps\r\n\r\n\r\n  [1]: http://devapp.sun.com/product/jdbc/drivers#skip2content","title":"what databases can be used with java?","body":"<p>You could have used pretty much <strong>ANY</strong> database. MSSQL, SQLite, Postgre, Oracle or [put your choice here]</p>\n\n<p>There's a driver for pretty much any database to integrate with Java. <a href=\"http://devapp.sun.com/product/jdbc/drivers#skip2content\" rel=\"nofollow noreferrer\">This</a> is a great place to find out all the DB's java support, as well as how to integrate</p>\n\n<p>Hope this helps</p>\n"},{"tags":[],"owner":{"account_id":16878,"reputation":306143,"user_id":37213,"accept_rate":81,"display_name":"duffymo"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1269196446,"creation_date":1269196446,"answer_id":2488219,"question_id":2488206,"body_markdown":"You can use any relational database that has a JDBC driver.  These would include PostgreSQL, Hypersonic SQL, MySQL, SQLLite on the free side and Oracle, MS SQL Server, and others on the paid side.\r\n\r\nThe biggest advantage accrued to MySQL in your case is that it&#39;s free and you know it. That&#39;s enough to make it suitable for what you want to accomplish.\r\n","title":"what databases can be used with java?","body":"<p>You can use any relational database that has a JDBC driver.  These would include PostgreSQL, Hypersonic SQL, MySQL, SQLLite on the free side and Oracle, MS SQL Server, and others on the paid side.</p>\n\n<p>The biggest advantage accrued to MySQL in your case is that it's free and you know it. That's enough to make it suitable for what you want to accomplish.</p>\n"},{"tags":[],"owner":{"account_id":26957,"reputation":564401,"user_id":70604,"display_name":"Pascal Thivent"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1269198898,"creation_date":1269198898,"answer_id":2488368,"question_id":2488206,"body_markdown":"Have a look at the [list of vendors who have endorsed the JDBC API][1] maintained by Sun. Also see the list of third-party [JDBC technology-enabled drivers][2] which are currently shipping.\r\n\r\n\r\n  [1]: http://java.sun.com/products/jdbc/reference/industrysupport/index.html\r\n  [2]: http://developers.sun.com/product/jdbc/drivers","title":"what databases can be used with java?","body":"<p>Have a look at the <a href=\"http://java.sun.com/products/jdbc/reference/industrysupport/index.html\" rel=\"nofollow noreferrer\">list of vendors who have endorsed the JDBC API</a> maintained by Sun. Also see the list of third-party <a href=\"http://developers.sun.com/product/jdbc/drivers\" rel=\"nofollow noreferrer\">JDBC technology-enabled drivers</a> which are currently shipping.</p>\n"},{"tags":[],"owner":{"account_id":39574,"reputation":24267,"user_id":114226,"accept_rate":79,"display_name":"PeterMmm"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1269200054,"creation_date":1269200054,"answer_id":2488424,"question_id":2488206,"body_markdown":"You mentioned MySQL and database. For the case you are free to usa a non RDBMS you can check [db4o][1]. \r\n\r\nAdvantage: pure OO/Java persistence. \r\n\r\n\r\n  [1]: http://www.db4o.com/","title":"what databases can be used with java?","body":"<p>You mentioned MySQL and database. For the case you are free to usa a non RDBMS you can check <a href=\"http://www.db4o.com/\" rel=\"nofollow noreferrer\">db4o</a>. </p>\n\n<p>Advantage: pure OO/Java persistence. </p>\n"},{"tags":[],"owner":{"account_id":26348958,"reputation":16,"user_id":20006878,"display_name":"java-enthusiast"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669215300,"creation_date":1669215300,"answer_id":74548780,"question_id":2488206,"body_markdown":"Many have said this already, but pretty much any database will work. Consider including [the top 5][1] (based on rankings, popularity) in your writeup.\r\n\r\n\r\n  [1]: https://ashintech.medium.com/5-best-databases-to-use-with-java-a9d3d601daec","title":"what databases can be used with java?","body":"<p>Many have said this already, but pretty much any database will work. Consider including <a href=\"https://ashintech.medium.com/5-best-databases-to-use-with-java-a9d3d601daec\" rel=\"nofollow noreferrer\">the top 5</a> (based on rankings, popularity) in your writeup.</p>\n"}],"owner":{"account_id":600500,"reputation":709,"user_id":295044,"accept_rate":100,"display_name":"aadersh patel"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":12059,"favorite_count":0,"down_vote_count":1,"up_vote_count":11,"accepted_answer_id":2488214,"answer_count":6,"score":10,"last_activity_date":1669215300,"creation_date":1269196224,"question_id":2488206,"body_markdown":"I am doing an undergrad final project, and need to justify my choice of MySQL for the database element of my project.  Truth is, it&#39;s the only one I can really use, and hence I went for it.\r\n\r\nWhat other database systems could I have used? Any advantages and disadvantages of these over MySQL?","title":"what databases can be used with java?","body":"<p>I am doing an undergrad final project, and need to justify my choice of MySQL for the database element of my project.  Truth is, it's the only one I can really use, and hence I went for it.</p>\n\n<p>What other database systems could I have used? Any advantages and disadvantages of these over MySQL?</p>\n"},{"tags":["java","technical-debt"],"comments":[{"owner":{"account_id":114128,"reputation":50467,"user_id":300257,"accept_rate":89,"display_name":"Gilbert Le Blanc"},"score":0,"creation_date":1669215064,"post_id":74547899,"comment_id":131594416,"body_markdown":"if your files are too large to read into memory, looping over the values as you read each line of a file is possible, but hard to test properly.","body":"if your files are too large to read into memory, looping over the values as you read each line of a file is possible, but hard to test properly."},{"owner":{"account_id":3391382,"reputation":3687,"user_id":2846138,"display_name":"cyberbrain"},"score":0,"creation_date":1669217323,"post_id":74547899,"comment_id":131595358,"body_markdown":"Did you try _any_ implementation yet and measure it&#39;s performance?","body":"Did you try <i>any</i> implementation yet and measure it&#39;s performance?"},{"owner":{"account_id":27024221,"reputation":3,"user_id":20581752,"display_name":"DGF"},"score":0,"creation_date":1669218293,"post_id":74547899,"comment_id":131595734,"body_markdown":"@cyberbrain\nNo, I&#39;m at the beginning of the implementation.","body":"@cyberbrain No, I&#39;m at the beginning of the implementation."}],"answers":[{"tags":[],"owner":{"account_id":20240228,"reputation":496,"user_id":14844306,"display_name":"Ben Anderson"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1669215107,"creation_date":1669215107,"answer_id":74548733,"question_id":74547899,"body_markdown":"To make an efficient solution, the assumptions and preconditions of the system must be considered.\r\n\r\n## Assuming the file sizes are small\r\n\r\nIf each file is going to be relatively small, then I&#39;d recommend caching the contents of the files.\r\n\r\n### When search patterns are unpredictable\r\n\r\nIf you cannot predict the possible search terms or the contents of the files cannot be split into searchable items, then simply checking the cached file contents with `String#contains` will have to do.\r\n\r\nHowever, if search terms are predictable, or files contain a set number of search terms, then you can attempt to index these terms using the methods discussed below (each have different computation requirements).\r\n\r\n### O(`m`) time complexity approach - where `m` is number of files\r\n\r\nAssuming each search term is going to be a word in the file, it&#39;s a good idea to store the file contents as a `HashSet` (to take advantage of the O(1) time complexity of `HashSet#contains`), with each element being a word or potential search term.\r\n\r\nThat way, you could have a `Map` like so:\r\n```java\r\n//the following code runs once at startup\r\n//map containing file names against their words as a HashSet\r\nMap&lt;String, HashSet&lt;String&gt;&gt; fileContents = new HashMap&lt;&gt;();\r\n\r\n//add files to Map (assuming parseFileContents returns a HashSet&lt;String&gt;)\r\nfileContents.put(&quot;file1&quot;, parseFileContents(&quot;file1&quot;));\r\nfileContents.put(&quot;file2&quot;, parseFileContents(&quot;file2&quot;));\r\nfileContents.put(&quot;file3&quot;, parseFileContents(&quot;file3&quot;));\r\n\r\n//the following code runs every time a request is made\r\n//get files containing the word &quot;dog&quot; (time complexity is O(m) where m is the number of files)\r\nfileContents.entrySet()\r\n    .stream()\r\n    .filter(e -&gt; e.getValue().contains(&quot;dog&quot;))\r\n    .map(Map.Entry::getKey)\r\n    .collect(LinkedList::new);\r\n```\r\n\r\n### O(1) time complexity approach\r\n\r\nIf the search patterns were predictable and there weren&#39;t many, then you could create a `Map` where search terms are keys and a `List` of files are the values:\r\n```java\r\n//the following code runs once at startup\r\n//map containing possible search patterns against files that they appear in\r\nMap&lt;String, List&lt;String&gt;&gt; patternsAgainstFiles = new HashMap&lt;&gt;();\r\n\r\n//then loop through all files and each term found in the file as a key to the map,\r\n//with the file being added to the list in the value\r\n\r\n//the following code runs every time a request is made\r\n//get files containing the word &quot;dog&quot; (time complexity is O(1) after initial computation at startup)\r\npatternsAgainstFiles.getOrDefault(&quot;dog&quot;, new LinkedList&lt;&gt;());\r\n```\r\n\r\n## Other option\r\n\r\nUse this option when:\r\n- Files are too large to store in memory\r\n- Files could change during program execution\r\n\r\nIn this case, you have no choice but to actually search the file in secondary storage every time you wish to search for the given pattern in the file.\r\n\r\nThe best method I can think for doing this at the time of writing, is opening a `FileInputStream` (or something similar) for each file, then reading one byte at a time and appending it to a &#39;current buffer&#39; which is never longer than the length of the search term in bytes. Whenever the &#39;current buffer&#39; has the same length (in bytes) as the search term, it is evaluated against the search term, and if they match then the search term is in the file, but if they don&#39;t match pop the first byte in the &#39;current buffer&#39; and continue.\r\n\r\n\r\nThe above is all my suggestions and there may be more efficient ways to achieve the task at hand. These are just the best approaches I could think of as of writing. ","title":"Java Programmingtechnic to check files performant?","body":"<p>To make an efficient solution, the assumptions and preconditions of the system must be considered.</p>\n<h2>Assuming the file sizes are small</h2>\n<p>If each file is going to be relatively small, then I'd recommend caching the contents of the files.</p>\n<h3>When search patterns are unpredictable</h3>\n<p>If you cannot predict the possible search terms or the contents of the files cannot be split into searchable items, then simply checking the cached file contents with <code>String#contains</code> will have to do.</p>\n<p>However, if search terms are predictable, or files contain a set number of search terms, then you can attempt to index these terms using the methods discussed below (each have different computation requirements).</p>\n<h3>O(<code>m</code>) time complexity approach - where <code>m</code> is number of files</h3>\n<p>Assuming each search term is going to be a word in the file, it's a good idea to store the file contents as a <code>HashSet</code> (to take advantage of the O(1) time complexity of <code>HashSet#contains</code>), with each element being a word or potential search term.</p>\n<p>That way, you could have a <code>Map</code> like so:</p>\n<pre class=\"lang-java prettyprint-override\"><code>//the following code runs once at startup\n//map containing file names against their words as a HashSet\nMap&lt;String, HashSet&lt;String&gt;&gt; fileContents = new HashMap&lt;&gt;();\n\n//add files to Map (assuming parseFileContents returns a HashSet&lt;String&gt;)\nfileContents.put(&quot;file1&quot;, parseFileContents(&quot;file1&quot;));\nfileContents.put(&quot;file2&quot;, parseFileContents(&quot;file2&quot;));\nfileContents.put(&quot;file3&quot;, parseFileContents(&quot;file3&quot;));\n\n//the following code runs every time a request is made\n//get files containing the word &quot;dog&quot; (time complexity is O(m) where m is the number of files)\nfileContents.entrySet()\n    .stream()\n    .filter(e -&gt; e.getValue().contains(&quot;dog&quot;))\n    .map(Map.Entry::getKey)\n    .collect(LinkedList::new);\n</code></pre>\n<h3>O(1) time complexity approach</h3>\n<p>If the search patterns were predictable and there weren't many, then you could create a <code>Map</code> where search terms are keys and a <code>List</code> of files are the values:</p>\n<pre class=\"lang-java prettyprint-override\"><code>//the following code runs once at startup\n//map containing possible search patterns against files that they appear in\nMap&lt;String, List&lt;String&gt;&gt; patternsAgainstFiles = new HashMap&lt;&gt;();\n\n//then loop through all files and each term found in the file as a key to the map,\n//with the file being added to the list in the value\n\n//the following code runs every time a request is made\n//get files containing the word &quot;dog&quot; (time complexity is O(1) after initial computation at startup)\npatternsAgainstFiles.getOrDefault(&quot;dog&quot;, new LinkedList&lt;&gt;());\n</code></pre>\n<h2>Other option</h2>\n<p>Use this option when:</p>\n<ul>\n<li>Files are too large to store in memory</li>\n<li>Files could change during program execution</li>\n</ul>\n<p>In this case, you have no choice but to actually search the file in secondary storage every time you wish to search for the given pattern in the file.</p>\n<p>The best method I can think for doing this at the time of writing, is opening a <code>FileInputStream</code> (or something similar) for each file, then reading one byte at a time and appending it to a 'current buffer' which is never longer than the length of the search term in bytes. Whenever the 'current buffer' has the same length (in bytes) as the search term, it is evaluated against the search term, and if they match then the search term is in the file, but if they don't match pop the first byte in the 'current buffer' and continue.</p>\n<p>The above is all my suggestions and there may be more efficient ways to achieve the task at hand. These are just the best approaches I could think of as of writing.</p>\n"}],"owner":{"account_id":27024221,"reputation":3,"user_id":20581752,"display_name":"DGF"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":43,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74548733,"answer_count":1,"score":0,"last_activity_date":1669215107,"creation_date":1669211458,"question_id":74547899,"body_markdown":"I&#39;m searching for a pattern or programming technic in Java for my service.\r\n\r\nThe Input of the service is an Array of Strings. These Strings represent a file and some information.\r\n\r\nThe output of the service is a Map of the exact String and a Boolean. The Boolean represents that the information exists in the file.\r\n\r\ne.g. Input \r\n```\r\n[&quot;file1/dog&quot;,&quot;file2/cat&quot;,&quot;file1/rabbit&quot;]\r\n\r\n```\r\n\r\nOutput \r\n```\r\n{&quot;file1/dog&quot;:&quot;false&quot;,&quot;file2/cat&quot;:&quot;true&quot;,&quot;file1/rabbit&quot;:&quot;true&quot;}\r\n```\r\n\r\nI want to open files only once and search for all information in this file. e.g. Open file one and search for Dog and rabbit.\r\n\r\nHow to do this fast in Java? \r\n\r\nShould I use a Map with the file as a key to gathering the information?\r\ne.g. \r\n```\r\n{&quot;file1&quot;: [&quot;dog&quot;,&quot;rabbit&quot;], &quot;file2&quot;: [&quot;cat&quot;]}\r\n\r\n```\r\nThe next step is to loop over the keys to check every file.","title":"Java Programmingtechnic to check files performant?","body":"<p>I'm searching for a pattern or programming technic in Java for my service.</p>\n<p>The Input of the service is an Array of Strings. These Strings represent a file and some information.</p>\n<p>The output of the service is a Map of the exact String and a Boolean. The Boolean represents that the information exists in the file.</p>\n<p>e.g. Input</p>\n<pre><code>[&quot;file1/dog&quot;,&quot;file2/cat&quot;,&quot;file1/rabbit&quot;]\n\n</code></pre>\n<p>Output</p>\n<pre><code>{&quot;file1/dog&quot;:&quot;false&quot;,&quot;file2/cat&quot;:&quot;true&quot;,&quot;file1/rabbit&quot;:&quot;true&quot;}\n</code></pre>\n<p>I want to open files only once and search for all information in this file. e.g. Open file one and search for Dog and rabbit.</p>\n<p>How to do this fast in Java?</p>\n<p>Should I use a Map with the file as a key to gathering the information?\ne.g.</p>\n<pre><code>{&quot;file1&quot;: [&quot;dog&quot;,&quot;rabbit&quot;], &quot;file2&quot;: [&quot;cat&quot;]}\n\n</code></pre>\n<p>The next step is to loop over the keys to check every file.</p>\n"},{"tags":["java","soapui","maven-plugin"],"owner":{"account_id":216108,"reputation":1219,"user_id":471137,"accept_rate":10,"display_name":"troger19"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":777,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1669215022,"creation_date":1555256423,"question_id":55677082,"body_markdown":"Is there a version of this plugin **soapui-maven-plugin** working with Java 11? I am getting this error with the newest version 5.5.0 as well as with older:\r\n\r\n    Caused by: java.nio.file.InvalidPathException: Illegal char &lt;*&gt; at index 95: C:\\Users\\username\\.m2\\repository\\com\\smartbear\\utils\\analytics\\out-app-analytics-provider\\lib\\*.jar\r\n\r\nI tried some exlusions which works on older Java versions, but errors still persist. \r\n\r\n    &lt;exclusion&gt;\r\n      &lt;groupId&gt;com.smartbear.utils.analytics&lt;/groupId&gt;\r\n       &lt;artifactId&gt;*&lt;/artifactId&gt;\r\n    &lt;/exclusion&gt;\r\n\r\nIf not, can somebody suggest similiar plugin, where you can write SoapUI tests suite and execute them during build. Of course compatible with Java 11. Thanks","title":"SoapUI maven plugin with Java 11","body":"<p>Is there a version of this plugin <strong>soapui-maven-plugin</strong> working with Java 11? I am getting this error with the newest version 5.5.0 as well as with older:</p>\n\n<pre><code>Caused by: java.nio.file.InvalidPathException: Illegal char &lt;*&gt; at index 95: C:\\Users\\username\\.m2\\repository\\com\\smartbear\\utils\\analytics\\out-app-analytics-provider\\lib\\*.jar\n</code></pre>\n\n<p>I tried some exlusions which works on older Java versions, but errors still persist. </p>\n\n<pre><code>&lt;exclusion&gt;\n  &lt;groupId&gt;com.smartbear.utils.analytics&lt;/groupId&gt;\n   &lt;artifactId&gt;*&lt;/artifactId&gt;\n&lt;/exclusion&gt;\n</code></pre>\n\n<p>If not, can somebody suggest similiar plugin, where you can write SoapUI tests suite and execute them during build. Of course compatible with Java 11. Thanks</p>\n"},{"tags":["c#","java","python","c++","algorithm"],"comments":[{"owner":{"account_id":154071,"reputation":13182,"user_id":369759,"accept_rate":63,"display_name":"ses"},"score":0,"creation_date":1359575281,"post_id":5730330,"comment_id":20404658,"body_markdown":"if a={-5,-3,0,1,-3} = 4\nthen a={-5,-5,-6,-6,-6} = 0 or 1?\n\nif 0 then &#39; a={-5,-3,0,1,-3}&#39; should return 3","body":"if a={-5,-3,0,1,-3} = 4 then a={-5,-5,-6,-6,-6} = 0 or 1?  if 0 then &#39; a={-5,-3,0,1,-3}&#39; should return 3"},{"owner":{"account_id":451418,"reputation":483,"user_id":847309,"accept_rate":88,"display_name":"Alex"},"score":1,"creation_date":1359666608,"post_id":5730330,"comment_id":20444278,"body_markdown":"why {-5,-5,-6,-6,-6} = 0 or even 1. It is 2 -&gt; |-5| = 5 and |-6| = 6","body":"why {-5,-5,-6,-6,-6} = 0 or even 1. It is 2 -&gt; |-5| = 5 and |-6| = 6"}],"answers":[{"comments":[{"owner":{"account_id":246709,"reputation":1175,"user_id":520989,"accept_rate":83,"display_name":"yahh"},"score":0,"creation_date":1303303415,"post_id":5730464,"comment_id":6554081,"body_markdown":"but even though i created a new structure i am still taking the same amount of time to solve the problem","body":"but even though i created a new structure i am still taking the same amount of time to solve the problem"},{"owner":{"account_id":23121,"reputation":527376,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":0,"creation_date":1303303513,"post_id":5730464,"comment_id":6554121,"body_markdown":"It may appear to be the same amount of time, but if you measure it for a large array of up to 10,000 entries you will find there is a very big relative difference.  However, you are right that a simple solution is often the best and fast enough.","body":"It may appear to be the same amount of time, but if you measure it for a large array of up to 10,000 entries you will find there is a very big relative difference.  However, you are right that a simple solution is often the best and fast enough."},{"owner":{"account_id":104911,"reputation":119222,"user_id":280244,"accept_rate":81,"display_name":"Ralph"},"score":0,"creation_date":1303303644,"post_id":5730464,"comment_id":6554165,"body_markdown":"@yahh: the trick is that you iterate only once over the array. You do not need the time to manage the set (insert). -- You need to think in complexity (O-Notation) not in secondes.","body":"@yahh: the trick is that you iterate only once over the array. You do not need the time to manage the set (insert). -- You need to think in complexity (O-Notation) not in secondes."},{"owner":{"account_id":23121,"reputation":527376,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":0,"creation_date":1303303711,"post_id":5730464,"comment_id":6554184,"body_markdown":"Or create any objects which is the really expensive part.","body":"Or create any objects which is the really expensive part."},{"owner":{"account_id":41183,"reputation":7098,"user_id":119636,"display_name":"Buhb"},"score":0,"creation_date":1303303724,"post_id":5730464,"comment_id":6554191,"body_markdown":"Same time complexity, bur a lookup in a set still takes time. Also, the set needs memory. Try it in a profiler, I&#39;m guessing your solution takes twice as long.","body":"Same time complexity, bur a lookup in a set still takes time. Also, the set needs memory. Try it in a profiler, I&#39;m guessing your solution takes twice as long."},{"owner":{"account_id":328117,"reputation":14517,"user_id":650891,"display_name":"Stephen Chung"},"score":0,"creation_date":1303303829,"post_id":5730464,"comment_id":6554214,"body_markdown":"@yahh, your method is not O(n) time.  It requires a lookup for containment within a set, which is probably O(nLogn) if the set if implemented as a tree, or O(n) if implemented as a hash table, but then you&#39;ll have the hash function to calculate.  Multiply this by huge amounts of data, and the CPU and memory costs will add up quickly.  Do not assume something has no or little cost when the costs may be hidden inside its implementation (e.g. in your HashSet).","body":"@yahh, your method is not O(n) time.  It requires a lookup for containment within a set, which is probably O(nLogn) if the set if implemented as a tree, or O(n) if implemented as a hash table, but then you&#39;ll have the hash function to calculate.  Multiply this by huge amounts of data, and the CPU and memory costs will add up quickly.  Do not assume something has no or little cost when the costs may be hidden inside its implementation (e.g. in your HashSet)."},{"owner":{"account_id":23121,"reputation":527376,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":0,"creation_date":1303303869,"post_id":5730464,"comment_id":6554226,"body_markdown":"I would bet closer to 100x times as long. ;)","body":"I would bet closer to 100x times as long. ;)"},{"owner":{"account_id":41183,"reputation":7098,"user_id":119636,"display_name":"Buhb"},"score":4,"creation_date":1303304064,"post_id":5730464,"comment_id":6554286,"body_markdown":"@stephen: insertion and lookup are both O(1) for HashSet.","body":"@stephen: insertion and lookup are both O(1) for HashSet."},{"owner":{"account_id":41183,"reputation":7098,"user_id":119636,"display_name":"Buhb"},"score":1,"creation_date":1303304171,"post_id":5730464,"comment_id":6554315,"body_markdown":"@peter: I meant at least twice.","body":"@peter: I meant at least twice."},{"owner":{"account_id":41183,"reputation":7098,"user_id":119636,"display_name":"Buhb"},"score":0,"creation_date":1303401909,"post_id":5730464,"comment_id":6576601,"body_markdown":"Nice to have numbers on the comparison","body":"Nice to have numbers on the comparison"},{"owner":{"account_id":914148,"reputation":657,"user_id":947334,"display_name":"Nikolay Polivanov"},"score":0,"creation_date":1325612685,"post_id":5730464,"comment_id":10849651,"body_markdown":"You can implement comparator for sort method so that comparison would be made for absolute values. It would simplify `countDistinct` algorithm.","body":"You can implement comparator for sort method so that comparison would be made for absolute values. It would simplify <code>countDistinct</code> algorithm."},{"owner":{"account_id":23121,"reputation":527376,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":0,"creation_date":1325614737,"post_id":5730464,"comment_id":10850394,"body_markdown":"@p.kolya That might not work so well with an `int[]` without using extra memory.","body":"@p.kolya That might not work so well with an <code>int[]</code> without using extra memory."},{"owner":{"account_id":914148,"reputation":657,"user_id":947334,"display_name":"Nikolay Polivanov"},"score":0,"creation_date":1325616163,"post_id":5730464,"comment_id":10850893,"body_markdown":"@PeterLawrey: if the array is sorted by absolute values next step would be to iterate once through the array counting absolutely distinct values (calling `abs` everytime) and leaving out absolutely equal ones. It doesn&#39;t requires extra memory, has the same complexity, but simplifies algorithm.","body":"@PeterLawrey: if the array is sorted by absolute values next step would be to iterate once through the array counting absolutely distinct values (calling <code>abs</code> everytime) and leaving out absolutely equal ones. It doesn&#39;t requires extra memory, has the same complexity, but simplifies algorithm."},{"owner":{"account_id":23121,"reputation":527376,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":0,"creation_date":1325616563,"post_id":5730464,"comment_id":10851012,"body_markdown":"@p.kolya True, if you had a sort which sorted by absolute value, it would make the algo simpler.  However, I don&#39;t know of any built in one and you can&#39;t use a Comparator to do it because it only works on `Integer` not `int`","body":"@p.kolya True, if you had a sort which sorted by absolute value, it would make the algo simpler.  However, I don&#39;t know of any built in one and you can&#39;t use a Comparator to do it because it only works on <code>Integer</code> not <code>int</code>"},{"owner":{"account_id":110658,"reputation":9404,"user_id":292728,"accept_rate":87,"display_name":"Kevin K"},"score":0,"creation_date":1374766887,"post_id":5730464,"comment_id":26079612,"body_markdown":"&quot;IMHO HashMap/HashSet is O(log(log(n)) due to collisions, it is only O(1) if there is a perfect hash function&quot; - In the case of `Integer`s, the hash function *is* perfect...it&#39;s just the value of the integer, so there are no collisions.","body":"&quot;IMHO HashMap/HashSet is O(log(log(n)) due to collisions, it is only O(1) if there is a perfect hash function&quot; - In the case of <code>Integer</code>s, the hash function <i>is</i> perfect...it&#39;s just the value of the integer, so there are no collisions."},{"owner":{"account_id":23121,"reputation":527376,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":0,"creation_date":1374770537,"post_id":5730464,"comment_id":26081861,"body_markdown":"@KevinK It is not perfect because you don&#39;t have an unlimited capacity.  With a capacity, even Integer will give you collisions.","body":"@KevinK It is not perfect because you don&#39;t have an unlimited capacity.  With a capacity, even Integer will give you collisions."},{"owner":{"account_id":23121,"reputation":527376,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":0,"creation_date":1374770940,"post_id":5730464,"comment_id":26082082,"body_markdown":"@KevinK I have added an example to be answer showing how Integers can have significant collisions (in this case every integer has a collision)","body":"@KevinK I have added an example to be answer showing how Integers can have significant collisions (in this case every integer has a collision)"},{"owner":{"account_id":110658,"reputation":9404,"user_id":292728,"accept_rate":87,"display_name":"Kevin K"},"score":1,"creation_date":1374780183,"post_id":5730464,"comment_id":26087410,"body_markdown":"d&#39;oh, I forgot about that!  There are no hash code collisions, but of course the map only has a limited number of buckets :)  Thanks for taking the time to answer, and sorry for the added confusion!","body":"d&#39;oh, I forgot about that!  There are no hash code collisions, but of course the map only has a limited number of buckets :)  Thanks for taking the time to answer, and sorry for the added confusion!"},{"owner":{"account_id":23121,"reputation":527376,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":0,"creation_date":1374780326,"post_id":5730464,"comment_id":26087491,"body_markdown":"@KevinK +1 Most people don&#39;t get as far and think about what you did.  It was a very good point to raise.","body":"@KevinK +1 Most people don&#39;t get as far and think about what you did.  It was a very good point to raise."}],"tags":[],"owner":{"account_id":23121,"reputation":527376,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"comment_count":19,"down_vote_count":0,"up_vote_count":11,"is_accepted":true,"score":11,"last_activity_date":1669214845,"creation_date":1303303299,"answer_id":5730464,"question_id":5730330,"body_markdown":"If the array is sorted you can find duplicates by looking a neighbours.  To compare absolute values to need to start at both the start and the end.  This avoid creating a new structure.\r\n\r\nEDIT: IMHO HashMap/HashSet is O(log(log(n)) due to collisions, it is only O(1) if there is a perfect hash function.  I would have thought not creating object which be much much faster but appears to be only 4x fast on my machine.\r\n\r\nIn summary, you can see that using a Set is simpler, clearer and easier to maintain.  It is still very fast and would be the best solution in 98% of cases.\r\n\r\n    public static void main(String[] args) throws Exception {\r\n        for (int len : new int[]{100 * 1000 * 1000, 10 * 1000 * 1000, 1000 * 1000, 100 * 1000, 10 * 1000, 1000}) {\r\n            int[] nums = new int[len];\r\n            for (int i = 0; i &lt; len; i++)\r\n                nums[i] = (int) (Math.random() * (Math.random() * 2001 - 1000));\r\n            Arrays.sort(nums);\r\n\r\n            long timeArray = 0;\r\n            long timeSet = 0;\r\n            int runs = len &gt; 1000 * 1000 ? 10 : len &gt;= 100 * 1000 ? 100 : 1000;\r\n            for (int i = 0; i &lt; runs; i++) {\r\n                long time1 = System.nanoTime();\r\n                int count = countDistinct(nums);\r\n                long time2 = System.nanoTime();\r\n                int count2 = countDistinctUsingSet(nums);\r\n                long time3 = System.nanoTime();\r\n                timeArray += time2 - time1;\r\n                timeSet += time3 - time2;\r\n                assert count == count2;\r\n            }\r\n            System.out.printf(&quot;For %,d numbers, using an array took %,d us on average, using a Set took %,d us on average, ratio=%.1f%n&quot;,\r\n                    len, timeArray / 1000 / runs, timeSet / 1000 / runs, 1.0 * timeSet / timeArray);\r\n        }\r\n    }\r\n\r\n    private static int countDistinct(int[] nums) {\r\n        int lastLeft = Math.abs(nums[0]);\r\n        int lastRight = Math.abs(nums[nums.length - 1]);\r\n        int count = 0;\r\n        for (int a = 1, b = nums.length - 2; a &lt;= b;) {\r\n            int left = Math.abs(nums[a]);\r\n            int right = Math.abs(nums[b]);\r\n            if (left == lastLeft) {\r\n                a++;\r\n                lastLeft = left;\r\n            } else if (right == lastRight) {\r\n                b--;\r\n                lastRight = right;\r\n            } else if (lastLeft == lastRight) {\r\n                a++;\r\n                b--;\r\n                lastLeft = left;\r\n                lastRight = right;\r\n                count++;\r\n            } else if (lastLeft &gt; lastRight) {\r\n                count++;\r\n                a++;\r\n                lastLeft = left;\r\n            } else {\r\n                count++;\r\n                b--;\r\n                lastRight = right;\r\n            }\r\n        }\r\n        count += (lastLeft == lastRight ? 1 : 2);\r\n        return count;\r\n    }\r\n\r\n    private static int countDistinctUsingSet(int[] nums) {\r\n        Set&lt;Integer&gt; s = new HashSet&lt;Integer&gt;();\r\n        for (int n : nums)\r\n            s.add(Math.abs(n));\r\n        int count = s.size();\r\n        return count;\r\n    }\r\n\r\nprints\r\n\r\nFor 100,000,000 numbers, using an array took 279,623 us on average, using a Set took 1,270,029 us on average, ratio=4.5\r\n\r\nFor 10,000,000 numbers, using an array took 28,525 us on average, using a Set took 126,591 us on average, ratio=4.4\r\n\r\nFor 1,000,000 numbers, using an array took 2,846 us on average, using a Set took 12,131 us on average, ratio=4.3\r\n\r\nFor 100,000 numbers, using an array took 297 us on average, using a Set took 1,239 us on average, ratio=4.2\r\n\r\nFor 10,000 numbers, using an array took 42 us on average, using a Set took 156 us on average, ratio=3.7\r\n\r\nFor 1,000 numbers, using an array took 8 us on average, using a Set took 30 us on average, ratio=3.6\r\n\r\n---\r\n\r\nOn @Kevin K&#39;s point, even Integer can have collision even through it&#39;s hash values are unique, it can map to the same bucket as the capacity is limited.\r\n\r\n    public static int hash(int h) {\r\n        // This function ensures that hashCodes that differ only by\r\n        // constant multiples at each bit position have a bounded\r\n        // number of collisions (approximately 8 at default load factor).\r\n        h ^= (h &gt;&gt;&gt; 20) ^ (h &gt;&gt;&gt; 12);\r\n        return h ^ (h &gt;&gt;&gt; 7) ^ (h &gt;&gt;&gt; 4);\r\n    }\r\n\r\n    public static void main(String[] args) throws Exception {\r\n        Map&lt;Integer, Integer&gt; map = new HashMap&lt;Integer, Integer&gt;(32, 2.0f);\r\n        for (int i = 0; i &lt; 10000 &amp;&amp; map.size() &lt; 32 * 2; i++) {\r\n            if (hash(i) % 32 == 0)\r\n                map.put(i, i);\r\n        }\r\n        System.out.println(map.keySet());\r\n    }\r\n\r\nprints\r\n\r\n[2032, 2002, 1972, 1942, 1913, 1883, 1853, 1823, 1763, 1729, 1703, 1669, 1642, 1608, 1582, 1548, 1524, 1494, 1456, 1426, 1405, 1375, 1337, 1307, 1255, 1221, 1187, 1153, 1134, 1100, 1066, 1032, 1016, 986, 956, 926, 881, 851, 821, 791, 747, 713, 687, 653, 610, 576, 550, 516, 508, 478, 440, 410, 373, 343, 305, 275, 239, 205, 171, 137, 102, 68, 34, 0]\r\n\r\n\r\n\r\nThe values are in reverse order because the HashMap has generated into a LinkedList.","title":"codility absolute distinct count from an array","body":"<p>If the array is sorted you can find duplicates by looking a neighbours.  To compare absolute values to need to start at both the start and the end.  This avoid creating a new structure.</p>\n<p>EDIT: IMHO HashMap/HashSet is O(log(log(n)) due to collisions, it is only O(1) if there is a perfect hash function.  I would have thought not creating object which be much much faster but appears to be only 4x fast on my machine.</p>\n<p>In summary, you can see that using a Set is simpler, clearer and easier to maintain.  It is still very fast and would be the best solution in 98% of cases.</p>\n<pre><code>public static void main(String[] args) throws Exception {\n    for (int len : new int[]{100 * 1000 * 1000, 10 * 1000 * 1000, 1000 * 1000, 100 * 1000, 10 * 1000, 1000}) {\n        int[] nums = new int[len];\n        for (int i = 0; i &lt; len; i++)\n            nums[i] = (int) (Math.random() * (Math.random() * 2001 - 1000));\n        Arrays.sort(nums);\n\n        long timeArray = 0;\n        long timeSet = 0;\n        int runs = len &gt; 1000 * 1000 ? 10 : len &gt;= 100 * 1000 ? 100 : 1000;\n        for (int i = 0; i &lt; runs; i++) {\n            long time1 = System.nanoTime();\n            int count = countDistinct(nums);\n            long time2 = System.nanoTime();\n            int count2 = countDistinctUsingSet(nums);\n            long time3 = System.nanoTime();\n            timeArray += time2 - time1;\n            timeSet += time3 - time2;\n            assert count == count2;\n        }\n        System.out.printf(&quot;For %,d numbers, using an array took %,d us on average, using a Set took %,d us on average, ratio=%.1f%n&quot;,\n                len, timeArray / 1000 / runs, timeSet / 1000 / runs, 1.0 * timeSet / timeArray);\n    }\n}\n\nprivate static int countDistinct(int[] nums) {\n    int lastLeft = Math.abs(nums[0]);\n    int lastRight = Math.abs(nums[nums.length - 1]);\n    int count = 0;\n    for (int a = 1, b = nums.length - 2; a &lt;= b;) {\n        int left = Math.abs(nums[a]);\n        int right = Math.abs(nums[b]);\n        if (left == lastLeft) {\n            a++;\n            lastLeft = left;\n        } else if (right == lastRight) {\n            b--;\n            lastRight = right;\n        } else if (lastLeft == lastRight) {\n            a++;\n            b--;\n            lastLeft = left;\n            lastRight = right;\n            count++;\n        } else if (lastLeft &gt; lastRight) {\n            count++;\n            a++;\n            lastLeft = left;\n        } else {\n            count++;\n            b--;\n            lastRight = right;\n        }\n    }\n    count += (lastLeft == lastRight ? 1 : 2);\n    return count;\n}\n\nprivate static int countDistinctUsingSet(int[] nums) {\n    Set&lt;Integer&gt; s = new HashSet&lt;Integer&gt;();\n    for (int n : nums)\n        s.add(Math.abs(n));\n    int count = s.size();\n    return count;\n}\n</code></pre>\n<p>prints</p>\n<p>For 100,000,000 numbers, using an array took 279,623 us on average, using a Set took 1,270,029 us on average, ratio=4.5</p>\n<p>For 10,000,000 numbers, using an array took 28,525 us on average, using a Set took 126,591 us on average, ratio=4.4</p>\n<p>For 1,000,000 numbers, using an array took 2,846 us on average, using a Set took 12,131 us on average, ratio=4.3</p>\n<p>For 100,000 numbers, using an array took 297 us on average, using a Set took 1,239 us on average, ratio=4.2</p>\n<p>For 10,000 numbers, using an array took 42 us on average, using a Set took 156 us on average, ratio=3.7</p>\n<p>For 1,000 numbers, using an array took 8 us on average, using a Set took 30 us on average, ratio=3.6</p>\n<hr />\n<p>On @Kevin K's point, even Integer can have collision even through it's hash values are unique, it can map to the same bucket as the capacity is limited.</p>\n<pre><code>public static int hash(int h) {\n    // This function ensures that hashCodes that differ only by\n    // constant multiples at each bit position have a bounded\n    // number of collisions (approximately 8 at default load factor).\n    h ^= (h &gt;&gt;&gt; 20) ^ (h &gt;&gt;&gt; 12);\n    return h ^ (h &gt;&gt;&gt; 7) ^ (h &gt;&gt;&gt; 4);\n}\n\npublic static void main(String[] args) throws Exception {\n    Map&lt;Integer, Integer&gt; map = new HashMap&lt;Integer, Integer&gt;(32, 2.0f);\n    for (int i = 0; i &lt; 10000 &amp;&amp; map.size() &lt; 32 * 2; i++) {\n        if (hash(i) % 32 == 0)\n            map.put(i, i);\n    }\n    System.out.println(map.keySet());\n}\n</code></pre>\n<p>prints</p>\n<p>[2032, 2002, 1972, 1942, 1913, 1883, 1853, 1823, 1763, 1729, 1703, 1669, 1642, 1608, 1582, 1548, 1524, 1494, 1456, 1426, 1405, 1375, 1337, 1307, 1255, 1221, 1187, 1153, 1134, 1100, 1066, 1032, 1016, 986, 956, 926, 881, 851, 821, 791, 747, 713, 687, 653, 610, 576, 550, 516, 508, 478, 440, 410, 373, 343, 305, 275, 239, 205, 171, 137, 102, 68, 34, 0]</p>\n<p>The values are in reverse order because the HashMap has generated into a LinkedList.</p>\n"},{"comments":[{"owner":{"account_id":246709,"reputation":1175,"user_id":520989,"accept_rate":83,"display_name":"yahh"},"score":0,"creation_date":1303303733,"post_id":5730468,"comment_id":6554194,"body_markdown":"i do understand the fact that my algorithm would waste space but it would take the same amount of time to solve. the website codility doesnt really bother much with space more with running time","body":"i do understand the fact that my algorithm would waste space but it would take the same amount of time to solve. the website codility doesnt really bother much with space more with running time"},{"owner":{"account_id":228122,"reputation":4355,"user_id":490230,"accept_rate":95,"display_name":"Christian"},"score":1,"creation_date":1303304396,"post_id":5730468,"comment_id":6554379,"body_markdown":"@yahh Well I think in an interview what really counts is the BEST way of doing it. This means in terms of space and memory. Ralphs method with two pointers runs in O(n) and takes O(1) memory. That is the best you can do. So this is obviously the correct answer. I suppose only the perfect answer gives the points.","body":"@yahh Well I think in an interview what really counts is the BEST way of doing it. This means in terms of space and memory. Ralphs method with two pointers runs in O(n) and takes O(1) memory. That is the best you can do. So this is obviously the correct answer. I suppose only the perfect answer gives the points."},{"owner":{"account_id":228122,"reputation":4355,"user_id":490230,"accept_rate":95,"display_name":"Christian"},"score":1,"creation_date":1303304484,"post_id":5730468,"comment_id":6554411,"body_markdown":"by the way: What I learned from those interviews / tests is that an error in the code is no problem. If your code does not compile that&#39;s not as interesting as the algorithm / idea behind! In most interviews you write code on a piece of paper, where normally even the best programmers do make syntax errors etc.","body":"by the way: What I learned from those interviews / tests is that an error in the code is no problem. If your code does not compile that&#39;s not as interesting as the algorithm / idea behind! In most interviews you write code on a piece of paper, where normally even the best programmers do make syntax errors etc."},{"owner":{"account_id":182447,"reputation":4336,"user_id":417166,"display_name":"blaze"},"score":1,"creation_date":1303309019,"post_id":5730468,"comment_id":6555882,"body_markdown":"yahh: your code us actually slower. java.util.HashSet has constant time add() only if hash function is perfect and no conflicts occurs. It&#39;s O(bucket length) otherwise, so in worst case you have O(n^2) performance.","body":"yahh: your code us actually slower. java.util.HashSet has constant time add() only if hash function is perfect and no conflicts occurs. It&#39;s O(bucket length) otherwise, so in worst case you have O(n^2) performance."},{"owner":{"account_id":246709,"reputation":1175,"user_id":520989,"accept_rate":83,"display_name":"yahh"},"score":0,"creation_date":1303315463,"post_id":5730468,"comment_id":6557966,"body_markdown":"@blaze: shouldnt i assume that when using the hash function for primitives it would work perfectly.","body":"@blaze: shouldnt i assume that when using the hash function for primitives it would work perfectly."},{"owner":{"account_id":182447,"reputation":4336,"user_id":417166,"display_name":"blaze"},"score":0,"creation_date":1303376105,"post_id":5730468,"comment_id":6569785,"body_markdown":"@yahh: definitely no. Perfect hashing is when each value hashes to distinct result and your values are &quot;just numbers&quot;, without range limitations. Perfect hash function can&#39;t do better then return number itself as hash value and it&#39;s total waste of memory to allocate 2^N buckets. So you will definitely have some imperfect hashing and possibly buckets reallocations.","body":"@yahh: definitely no. Perfect hashing is when each value hashes to distinct result and your values are &quot;just numbers&quot;, without range limitations. Perfect hash function can&#39;t do better then return number itself as hash value and it&#39;s total waste of memory to allocate 2^N buckets. So you will definitely have some imperfect hashing and possibly buckets reallocations."}],"tags":[],"owner":{"account_id":104911,"reputation":119222,"user_id":280244,"accept_rate":81,"display_name":"Ralph"},"comment_count":6,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1303303314,"creation_date":1303303314,"answer_id":5730468,"question_id":5730330,"body_markdown":"You should have pay attention to the fact that **the array is sorted in ascending order**.\r\n\r\nLets assume that there are only positive numbers, or the question was not about **absolute** distinct.\r\n\r\nThe you could count the Number by iterating trough the list, and increment the counter by one, if the actual element is different from the last.  (and +1 for the first element)\r\n\r\nIf you understand that, you can add the **absolute** distinct constraint. For example by improving the algorithm by two pointers, one starting from the begin, one from the end. Then you have also to take care that both pointers works like in parallel, so that both pointers will end at 0 or the absoulte lowest number (positive/negative) - This will complicate the whole stuff a bit, but it is possible.","title":"codility absolute distinct count from an array","body":"<p>You should have pay attention to the fact that <strong>the array is sorted in ascending order</strong>.</p>\n\n<p>Lets assume that there are only positive numbers, or the question was not about <strong>absolute</strong> distinct.</p>\n\n<p>The you could count the Number by iterating trough the list, and increment the counter by one, if the actual element is different from the last.  (and +1 for the first element)</p>\n\n<p>If you understand that, you can add the <strong>absolute</strong> distinct constraint. For example by improving the algorithm by two pointers, one starting from the begin, one from the end. Then you have also to take care that both pointers works like in parallel, so that both pointers will end at 0 or the absoulte lowest number (positive/negative) - This will complicate the whole stuff a bit, but it is possible.</p>\n"},{"comments":[{"owner":{"account_id":232474,"reputation":5506,"user_id":497339,"display_name":"brain"},"score":2,"creation_date":1303305333,"post_id":5730533,"comment_id":6554654,"body_markdown":"I dont think you should assume that the list doesn&#39;t contain duplicates.","body":"I dont think you should assume that the list doesn&#39;t contain duplicates."}],"tags":[],"owner":{"account_id":328117,"reputation":14517,"user_id":650891,"display_name":"Stephen Chung"},"comment_count":1,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1303304002,"creation_date":1303303544,"answer_id":5730533,"question_id":5730330,"body_markdown":"Well, to be absolutely honest, you need to do better than this.\r\n\r\nJudging from the question, I assume the list do not contain duplicates.  Again, obviously the trick is the pre-sorted list.  Which means that while +5 may be at the right end of the line, -5 will be at the left end of the line, since negative numbers sort in reverse to their absolute magnitude.\r\n\r\nStart from both ends, work inwards.  If the two numbers are -1 of each other, then it is not distinct.  Otherwise, they are distinct, and move the end that is absolutely larger.\r\n\r\nGo until you reach zero, or you bump into the next list -- in that case, take everything remaining in the next list as distinct as well.\r\n\r\nThis algorithm needs no hashes, no dictionaries, no data structures, and runs in O(n) time, going through the whole list exactly once.\r\n","title":"codility absolute distinct count from an array","body":"<p>Well, to be absolutely honest, you need to do better than this.</p>\n\n<p>Judging from the question, I assume the list do not contain duplicates.  Again, obviously the trick is the pre-sorted list.  Which means that while +5 may be at the right end of the line, -5 will be at the left end of the line, since negative numbers sort in reverse to their absolute magnitude.</p>\n\n<p>Start from both ends, work inwards.  If the two numbers are -1 of each other, then it is not distinct.  Otherwise, they are distinct, and move the end that is absolutely larger.</p>\n\n<p>Go until you reach zero, or you bump into the next list -- in that case, take everything remaining in the next list as distinct as well.</p>\n\n<p>This algorithm needs no hashes, no dictionaries, no data structures, and runs in O(n) time, going through the whole list exactly once.</p>\n"},{"tags":[],"owner":{"account_id":31180,"reputation":29173,"user_id":85421,"display_name":"user85421"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1303313436,"creation_date":1303305544,"answer_id":5730972,"question_id":5730330,"body_markdown":"Your solution is at least one of the easiest way to do it (more readable, easier to maintain). It surely is not the most efficient one (neither the worst) and should be acceptable if not used in a time critical code.   \r\n\r\nBut you should have mentioned that and suggested that there is a more efficient solution like traversing the list from both ends (as already answered). Maybe you would have got an extra point for discussing the advantages of both solution.  \r\n\r\nTested your solution (on old (slow) laptop):  \r\n\r\n- less than 2 milliseconds for 10000 numbers  \r\n- ~450 ms for 1000000","title":"codility absolute distinct count from an array","body":"<p>Your solution is at least one of the easiest way to do it (more readable, easier to maintain). It surely is not the most efficient one (neither the worst) and should be acceptable if not used in a time critical code.   </p>\n\n<p>But you should have mentioned that and suggested that there is a more efficient solution like traversing the list from both ends (as already answered). Maybe you would have got an extra point for discussing the advantages of both solution.  </p>\n\n<p>Tested your solution (on old (slow) laptop):  </p>\n\n<ul>\n<li>less than 2 milliseconds for 10000 numbers  </li>\n<li>~450 ms for 1000000</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":195706,"reputation":7004,"user_id":438758,"accept_rate":89,"display_name":"BiGYaN"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1303365425,"creation_date":1303365425,"answer_id":5740135,"question_id":5730330,"body_markdown":"The solution is to use the fact that the array is sorted. What you can do is to have two pointers pointing at beginning and end of the array respectively. Then based on the abs value, decrease/increase the end-pointer/beginning pointer. At the same time you&#39;ll have to keep track of repeated elements in sequence like {3,3,3,4} (the 3 should be counted once).\r\n\r\nIn all it wouldn&#39;t be too complex, I think with 20-25 loc in C.","title":"codility absolute distinct count from an array","body":"<p>The solution is to use the fact that the array is sorted. What you can do is to have two pointers pointing at beginning and end of the array respectively. Then based on the abs value, decrease/increase the end-pointer/beginning pointer. At the same time you'll have to keep track of repeated elements in sequence like {3,3,3,4} (the 3 should be counted once).</p>\n\n<p>In all it wouldn't be too complex, I think with 20-25 loc in C.</p>\n"},{"tags":[],"owner":{"account_id":105356,"reputation":2071,"user_id":281191,"accept_rate":0,"display_name":"goroncy"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1327663788,"creation_date":1319637627,"answer_id":7903734,"question_id":5730330,"body_markdown":"Please find below implementation which is even much faster than Peter&#39;s.\r\n\r\n    if (A == null || A.length == 0) {\r\n      return 0;\r\n    } else if (A.length == 1 || A[0] == A[A.length - 1]) {\r\n      return 1;\r\n    }\r\n\r\n    int absDistinct = 0;\r\n    int leftCurrent;\r\n    int leftNext;\r\n    int rightCurrent;\r\n    int rightPrevious;\r\n\r\n    for (int i = 0, j = A.length; i &lt; j; ) {\r\n\r\n      leftCurrent = A[i];\r\n      rightCurrent = A[j];\r\n      leftNext = A[i + 1];\r\n      rightPrevious = A[j - 1];\r\n\r\n      if (leftCurrent + rightCurrent == 0) {\r\n        while (A[i] - A[i + 1] == 0) {\r\n          i++;\r\n        }\r\n        while (A[j] - A[j - 1] == 0) {\r\n          j--;\r\n        }\r\n        i++;\r\n        j--;\r\n        absDistinct++;\r\n      } else {\r\n        if (leftCurrent + rightCurrent &lt; 0) {\r\n          if (leftCurrent - leftNext != 0) {\r\n            absDistinct++;\r\n          }\r\n          i++;\r\n        } else {\r\n          if (rightCurrent - rightPrevious != 0) {\r\n            absDistinct++;\r\n          }\r\n          j--;\r\n        }\r\n      }\r\n    }\r\n\r\n    return absDistinct;\r\n\r\nThe distribution of numbers is important. But if there will be lot of series of the same numbers this algo will perform better. This shows that the algorythms complexity is not the only barier to overcome. When you have the algo with the propper complexity this might be just one of the options. Linear correction of the algo is still possible. The character of input is sometimes also important.","title":"codility absolute distinct count from an array","body":"<p>Please find below implementation which is even much faster than Peter's.</p>\n\n<pre><code>if (A == null || A.length == 0) {\n  return 0;\n} else if (A.length == 1 || A[0] == A[A.length - 1]) {\n  return 1;\n}\n\nint absDistinct = 0;\nint leftCurrent;\nint leftNext;\nint rightCurrent;\nint rightPrevious;\n\nfor (int i = 0, j = A.length; i &lt; j; ) {\n\n  leftCurrent = A[i];\n  rightCurrent = A[j];\n  leftNext = A[i + 1];\n  rightPrevious = A[j - 1];\n\n  if (leftCurrent + rightCurrent == 0) {\n    while (A[i] - A[i + 1] == 0) {\n      i++;\n    }\n    while (A[j] - A[j - 1] == 0) {\n      j--;\n    }\n    i++;\n    j--;\n    absDistinct++;\n  } else {\n    if (leftCurrent + rightCurrent &lt; 0) {\n      if (leftCurrent - leftNext != 0) {\n        absDistinct++;\n      }\n      i++;\n    } else {\n      if (rightCurrent - rightPrevious != 0) {\n        absDistinct++;\n      }\n      j--;\n    }\n  }\n}\n\nreturn absDistinct;\n</code></pre>\n\n<p>The distribution of numbers is important. But if there will be lot of series of the same numbers this algo will perform better. This shows that the algorythms complexity is not the only barier to overcome. When you have the algo with the propper complexity this might be just one of the options. Linear correction of the algo is still possible. The character of input is sometimes also important.</p>\n"},{"tags":[],"owner":{"account_id":426075,"reputation":1013,"user_id":807077,"display_name":"Michelin Man"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1352315006,"creation_date":1320410184,"answer_id":8009261,"question_id":5730330,"body_markdown":"Here is a recursive algorithm that will return the absolute unique entries in a list in a single pass, that is in O(n) time. It relies on the fact that the array is sorted and it is not using a java.util.Set.\r\n\r\nConsider this example array {-5,-5,-3,0,1,3}\r\n\r\n- Because the array is sorted, one of the two elements at either end of the array will have the absolute highest value: -5\r\n- Again because the array is sorted, if that element is going to have a match, it will be its neighbour, or neighbours for multiple matches.\r\n- So for -5 we do a single check with its neighbour: they are equal. -5 is a duplicate, so remove it, don&#39;t increase our running total and recurse.\r\n\r\n{-5,-3,0,1,3}\r\nNow we pick -5, its unique therefore increase running total to 1 and then remove it.\r\n\r\n{-3,0,1,3}\r\nIf they two ends have equal absolute values, just remove one, it doesnt matter which, just so long as its just one. Say the first. We don&#39;t increment our running total because the value we removed was a duplicate.\r\n\r\n{0,1,3}\r\nNow we pick 3, its unique, running total goes to 2.\r\n\r\n{0,1}\r\nPick 1, its unique, running total 3.\r\n\r\n{0}\r\nSize is 1, the value is unique, increment running total and return it. 4 Correct!\r\n\r\n\r\n    package com.codility.tests;\r\n\r\n    import java.util.ArrayList; \r\n    import java.util.Arrays;\r\n    import java.util.List;\r\n\r\n    public class AbsDistinct {\r\n\r\n    /**\r\n     * Count the number of absolute distinct elements in an array.\r\n     * The array is sorted in ascending order.\r\n     */\r\n    private static int countAbsDistinct(List&lt;Integer&gt; list, int count) {\r\n        int lastIndex = list.size() - 1;\r\n        if (lastIndex == -1) { // zero size list, terminate\r\n            return 0;\r\n        }\r\n        if (lastIndex == 0) { // one element list, terminate\r\n            return ++count;\r\n        }\r\n        if (Math.abs(list.get(0)) == Math.abs(list.get(lastIndex))) {\r\n            // doesn&#39;t matter which end is removed, but to remove _only_ 1\r\n            list.remove(0);\r\n        } else if (Math.abs(list.get(0)) &gt; Math.abs(list.get(lastIndex))) {\r\n            // if different to its nighbour, its unique hence count it\r\n            if (list.get(0) != list.get(1)) {\r\n                count++;\r\n            }\r\n            // now that its been accounted for, remove it\r\n            list.remove(0);\r\n        } else {\r\n            // same logic but for the other end of the list\r\n            if (list.get(lastIndex) != list.get(lastIndex - 1)) {\r\n                count++;\r\n            }\r\n            list.remove(lastIndex);\r\n        }\r\n        return countAbsDistinct(list, count);\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        if (args.length == 0) { // just run the tests\r\n            List&lt;Integer&gt; testList = new ArrayList&lt;Integer&gt;(Arrays.asList(-9, -6, -5, -5, -5, -5, -3, -3, 0, 0, 1, 5, 6, 7, 7, 8));\r\n            List&lt;Integer&gt; empty = new ArrayList&lt;Integer&gt;();\r\n            List&lt;Integer&gt; singleElement = new ArrayList&lt;Integer&gt;(Arrays.asList(1));\r\n            List&lt;Integer&gt; sameElement = new ArrayList&lt;Integer&gt;(Arrays.asList(1, 1, 1, 1, 1, 1));\r\n            System.out.println(&quot;test array: &quot; + countAbsDistinct(testList, 0));\r\n            System.out.println(&quot;empty array: &quot; + countAbsDistinct(empty, 0));\r\n            System.out.println(&quot;single element array: &quot; + countAbsDistinct(singleElement, 0));\r\n            System.out.println(&quot;same element array: &quot; + countAbsDistinct(sameElement, 0));\r\n        } else {\r\n            List&lt;String&gt; argStringList = new ArrayList&lt;String&gt;(Arrays.asList(args));\r\n            List&lt;Integer&gt; argList = new ArrayList&lt;Integer&gt;();\r\n            for (String s : argStringList) {\r\n                argList.add(Integer.parseInt(s));\r\n            }\r\n            System.out.println(&quot;argument array: &quot; + countAbsDistinct(argList, 0));\r\n        }\r\n    }\r\n    }\r\n\r\n","title":"codility absolute distinct count from an array","body":"<p>Here is a recursive algorithm that will return the absolute unique entries in a list in a single pass, that is in O(n) time. It relies on the fact that the array is sorted and it is not using a java.util.Set.</p>\n\n<p>Consider this example array {-5,-5,-3,0,1,3}</p>\n\n<ul>\n<li>Because the array is sorted, one of the two elements at either end of the array will have the absolute highest value: -5</li>\n<li>Again because the array is sorted, if that element is going to have a match, it will be its neighbour, or neighbours for multiple matches.</li>\n<li>So for -5 we do a single check with its neighbour: they are equal. -5 is a duplicate, so remove it, don't increase our running total and recurse.</li>\n</ul>\n\n<p>{-5,-3,0,1,3}\nNow we pick -5, its unique therefore increase running total to 1 and then remove it.</p>\n\n<p>{-3,0,1,3}\nIf they two ends have equal absolute values, just remove one, it doesnt matter which, just so long as its just one. Say the first. We don't increment our running total because the value we removed was a duplicate.</p>\n\n<p>{0,1,3}\nNow we pick 3, its unique, running total goes to 2.</p>\n\n<p>{0,1}\nPick 1, its unique, running total 3.</p>\n\n<p>{0}\nSize is 1, the value is unique, increment running total and return it. 4 Correct!</p>\n\n<pre><code>package com.codility.tests;\n\nimport java.util.ArrayList; \nimport java.util.Arrays;\nimport java.util.List;\n\npublic class AbsDistinct {\n\n/**\n * Count the number of absolute distinct elements in an array.\n * The array is sorted in ascending order.\n */\nprivate static int countAbsDistinct(List&lt;Integer&gt; list, int count) {\n    int lastIndex = list.size() - 1;\n    if (lastIndex == -1) { // zero size list, terminate\n        return 0;\n    }\n    if (lastIndex == 0) { // one element list, terminate\n        return ++count;\n    }\n    if (Math.abs(list.get(0)) == Math.abs(list.get(lastIndex))) {\n        // doesn't matter which end is removed, but to remove _only_ 1\n        list.remove(0);\n    } else if (Math.abs(list.get(0)) &gt; Math.abs(list.get(lastIndex))) {\n        // if different to its nighbour, its unique hence count it\n        if (list.get(0) != list.get(1)) {\n            count++;\n        }\n        // now that its been accounted for, remove it\n        list.remove(0);\n    } else {\n        // same logic but for the other end of the list\n        if (list.get(lastIndex) != list.get(lastIndex - 1)) {\n            count++;\n        }\n        list.remove(lastIndex);\n    }\n    return countAbsDistinct(list, count);\n}\n\npublic static void main(String[] args) {\n    if (args.length == 0) { // just run the tests\n        List&lt;Integer&gt; testList = new ArrayList&lt;Integer&gt;(Arrays.asList(-9, -6, -5, -5, -5, -5, -3, -3, 0, 0, 1, 5, 6, 7, 7, 8));\n        List&lt;Integer&gt; empty = new ArrayList&lt;Integer&gt;();\n        List&lt;Integer&gt; singleElement = new ArrayList&lt;Integer&gt;(Arrays.asList(1));\n        List&lt;Integer&gt; sameElement = new ArrayList&lt;Integer&gt;(Arrays.asList(1, 1, 1, 1, 1, 1));\n        System.out.println(\"test array: \" + countAbsDistinct(testList, 0));\n        System.out.println(\"empty array: \" + countAbsDistinct(empty, 0));\n        System.out.println(\"single element array: \" + countAbsDistinct(singleElement, 0));\n        System.out.println(\"same element array: \" + countAbsDistinct(sameElement, 0));\n    } else {\n        List&lt;String&gt; argStringList = new ArrayList&lt;String&gt;(Arrays.asList(args));\n        List&lt;Integer&gt; argList = new ArrayList&lt;Integer&gt;();\n        for (String s : argStringList) {\n            argList.add(Integer.parseInt(s));\n        }\n        System.out.println(\"argument array: \" + countAbsDistinct(argList, 0));\n    }\n}\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":268860,"reputation":1898,"user_id":557869,"accept_rate":74,"display_name":"Pinser"},"score":0,"creation_date":1446312105,"post_id":8716288,"comment_id":54695363,"body_markdown":"But the correct answer is 5 for the first set of input!","body":"But the correct answer is 5 for the first set of input!"}],"tags":[],"owner":{"account_id":1145456,"reputation":111,"user_id":1128338,"display_name":"Rabi"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1325612161,"creation_date":1325612161,"answer_id":8716288,"question_id":5730330,"body_markdown":"Here is a simple solution for this.\r\n\r\n    public class test{\r\n    \r\n    public static int dis(Integer[] arr) {\r\n        out.println(Arrays.asList(arr));\r\n        if (arr.length == 0) {\r\n            return 0;\r\n        }\r\n        int i = 0;\r\n        int j = arr.length - 1;\r\n        int c = 0;\r\n        while (i &lt;= j) {\r\n            if ((j != arr.length - 1) &amp;&amp; (Math.abs(arr[j]) == Math.abs(arr[j + 1]))) {\r\n                out.println(&quot;skipping J==&quot; + j);\r\n                j--; continue;\r\n            }\r\n            if ((i != 0) &amp;&amp; (Math.abs(arr[i]) == Math.abs(arr[i - 1]))) {\r\n                out.println(&quot;skipping I==&quot; + i);\r\n                i++; continue;\r\n            }\r\n            if (Math.abs(arr[i]) &lt; Math.abs(arr[j])) {\r\n                j--;\r\n                c++;\r\n            }\r\n            else if (Math.abs(arr[i]) &gt; Math.abs(arr[j])) {\r\n                i++; c++;\r\n            }\r\n            else {\r\n                i++; j--; c++;\r\n            }\r\n    \r\n            out.println(&quot;I=&quot; + i + &quot; J=&quot; + j + &quot; C=&quot; + c);\r\n        }\r\n        return c;\r\n    }\r\n    \r\n    \r\n   \r\n\r\n    public static void main(String[] arg){\r\n    \r\n    //Integer[] a = {34,2,3,4,3,-2,3};\r\n    //out.println(&quot;distinct elements are&quot; + dis(a));\r\n    Integer[] aa={-5,-3,0,1,3};\r\n    out.println(&quot;distinct elements count &quot; + dis(aa));\r\n    Integer[] ab={-5,-3,0,1,3, 4, 6, 7};\r\n    out.println(&quot;distinct elements count &quot; + dis(ab));\r\n    Integer[] ac={-5};\r\n    out.println(&quot;distinct elements count &quot; + dis(ac));\r\n    Integer[] acc={9};\r\n    out.println(&quot;distinct elements count &quot; + dis(acc));\r\n    Integer[] ad={9,9,9};\r\n    out.println(&quot;distinct elements count &quot; + dis(ad));\r\n    Integer[] ae={-5,-5};\r\n    out.println(&quot;distinct elements count &quot; + dis(ae));\r\n    Integer[] aee={1,5,5,5,5};\r\n    out.println(&quot;distinct elements count &quot; + dis(aee));\r\n    Integer[] af={-9, -6, -5, -5, -5, -5, -3, -3, 0, 0, 1, 5, 6, 7, 7, 8};\r\n    out.println(&quot;distinct elements count &quot; + dis(af));\r\n    \r\n    }\r\n        \r\n  }\r\n\r\n\r\n\r\nout put is \r\n\r\n\r\n    [-5, -3, 0, 1, 3]\r\n    distinct elements count 4\r\n    [-5, -3, 0, 1, 3, 4, 6, 7]\r\n    distinct elements count 7\r\n    [-5]\r\n    distinct elements count 1\r\n    [9]\r\n    distinct elements count 1\r\n    [9, 9, 9]\r\n    distinct elements count 1\r\n    [-5, -5]\r\n    distinct elements count 1\r\n    [1, 5, 5, 5, 5]\r\n    distinct elements count 2\r\n    [-9, -6, -5, -5, -5, -5, -3, -3, 0, 0, 1, 5, 6, 7, 7, 8]\r\n    distinct elements count 8\r\n\r\n\r\n\r\n\r\n","title":"codility absolute distinct count from an array","body":"<p>Here is a simple solution for this.</p>\n\n<pre><code>public class test{\n\npublic static int dis(Integer[] arr) {\n    out.println(Arrays.asList(arr));\n    if (arr.length == 0) {\n        return 0;\n    }\n    int i = 0;\n    int j = arr.length - 1;\n    int c = 0;\n    while (i &lt;= j) {\n        if ((j != arr.length - 1) &amp;&amp; (Math.abs(arr[j]) == Math.abs(arr[j + 1]))) {\n            out.println(\"skipping J==\" + j);\n            j--; continue;\n        }\n        if ((i != 0) &amp;&amp; (Math.abs(arr[i]) == Math.abs(arr[i - 1]))) {\n            out.println(\"skipping I==\" + i);\n            i++; continue;\n        }\n        if (Math.abs(arr[i]) &lt; Math.abs(arr[j])) {\n            j--;\n            c++;\n        }\n        else if (Math.abs(arr[i]) &gt; Math.abs(arr[j])) {\n            i++; c++;\n        }\n        else {\n            i++; j--; c++;\n        }\n\n        out.println(\"I=\" + i + \" J=\" + j + \" C=\" + c);\n    }\n    return c;\n}\n\n\n\n\npublic static void main(String[] arg){\n\n//Integer[] a = {34,2,3,4,3,-2,3};\n//out.println(\"distinct elements are\" + dis(a));\nInteger[] aa={-5,-3,0,1,3};\nout.println(\"distinct elements count \" + dis(aa));\nInteger[] ab={-5,-3,0,1,3, 4, 6, 7};\nout.println(\"distinct elements count \" + dis(ab));\nInteger[] ac={-5};\nout.println(\"distinct elements count \" + dis(ac));\nInteger[] acc={9};\nout.println(\"distinct elements count \" + dis(acc));\nInteger[] ad={9,9,9};\nout.println(\"distinct elements count \" + dis(ad));\nInteger[] ae={-5,-5};\nout.println(\"distinct elements count \" + dis(ae));\nInteger[] aee={1,5,5,5,5};\nout.println(\"distinct elements count \" + dis(aee));\nInteger[] af={-9, -6, -5, -5, -5, -5, -3, -3, 0, 0, 1, 5, 6, 7, 7, 8};\nout.println(\"distinct elements count \" + dis(af));\n\n}\n</code></pre>\n\n<p>}</p>\n\n<p>out put is </p>\n\n<pre><code>[-5, -3, 0, 1, 3]\ndistinct elements count 4\n[-5, -3, 0, 1, 3, 4, 6, 7]\ndistinct elements count 7\n[-5]\ndistinct elements count 1\n[9]\ndistinct elements count 1\n[9, 9, 9]\ndistinct elements count 1\n[-5, -5]\ndistinct elements count 1\n[1, 5, 5, 5, 5]\ndistinct elements count 2\n[-9, -6, -5, -5, -5, -5, -3, -3, 0, 0, 1, 5, 6, 7, 7, 8]\ndistinct elements count 8\n</code></pre>\n"},{"comments":[{"owner":{"account_id":2643664,"reputation":136,"user_id":2286810,"accept_rate":91,"display_name":"user2286810"},"score":0,"creation_date":1598752214,"post_id":8901705,"comment_id":112560237,"body_markdown":"You got 78% on codility&#39;s server:▶example\nexample test✔OK\nexpand allCorrectness tests\n▶one_element✔OK\n▶two_elements✔OK\n▶same_elements✔OK\n▶simple✔OK\n▶simple_no_zero✘RUNTIME ERROR\ntested program terminated with exit code 1\n▶simple_no_same✔OK\n▶simple_no_negative✔OK\n▶simple_no_positive✔OK\n▶arith_overlow✔OK\n▶medium_chaotic1✘RUNTIME ERROR\ntested program terminated with exit code 1\n▶medium_chaotic2✔OK\nexpand allPerformance tests\n▶long_sequence_no_negative✔OK\n▶long_sequence_no_positive✔OK\n▶long_sequence✘RUNTIME ERROR\ntested program terminated with exit code 1","body":"You got 78% on codility&#39;s server:▶example example test✔OK expand allCorrectness tests ▶one_element✔OK ▶two_elements✔OK ▶same_elements✔OK ▶simple✔OK ▶simple_no_zero✘RUNTIME ERROR tested program terminated with exit code 1 ▶simple_no_same✔OK ▶simple_no_negative✔OK ▶simple_no_positive✔OK ▶arith_overlow✔OK ▶medium_chaotic1✘RUNTIME ERROR tested program terminated with exit code 1 ▶medium_chaotic2✔OK expand allPerformance tests ▶long_sequence_no_negative✔OK ▶long_sequence_no_positive✔OK ▶long_sequence✘RUNTIME ERROR tested program terminated with exit code 1"}],"tags":[],"owner":{"account_id":1179649,"reputation":9,"user_id":1154874,"display_name":"ordurio"},"comment_count":1,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1326834205,"creation_date":1326834205,"answer_id":8901705,"question_id":5730330,"body_markdown":"here is a python proposal i just did to practice:\r\n\r\n        \r\n    def abs_distinct(A):\r\n        if not A:\r\n            return -1\r\n        #assume A is sorted\r\n        n = len(A)\r\n        left_cursor = 0\r\n        right_cursor = n-1\r\n        left_value = A[0]\r\n        right_value = A[n-1]\r\n        nb_abs_distinct = len(set([abs(left_value),abs(right_value)]))\r\n\r\n        while left_value != right_value:\r\n            # case 1: decrease right_cursor down to the next different value\r\n            if abs(left_value) &lt; abs(right_value):\r\n                while A[right_cursor] == right_value:\r\n                    right_cursor -= 1\r\n                right_value = A[right_cursor]\r\n                if abs(right_value) != abs(left_value):\r\n                    nb_abs_distinct += 1\r\n            # case 2: increase left_cursor to the next different value\r\n            elif abs(left_value) &gt; abs(right_value):\r\n                while A[left_cursor] == left_value:\r\n                    left_cursor += 1\r\n                left_value = A[left_cursor]\r\n                if abs(left_value) != abs(right_value): \r\n                    nb_abs_distinct += 1\r\n                \r\n            else:\r\n                while abs(left_value) == abs(right_value):\r\n                    left_cursor += 1\r\n                    left_value = A[left_cursor]\r\n                nb_abs_distinct += 1\r\n            \r\n        return nb_abs_distinct\r\n","title":"codility absolute distinct count from an array","body":"<p>here is a python proposal i just did to practice:</p>\n\n<pre><code>def abs_distinct(A):\n    if not A:\n        return -1\n    #assume A is sorted\n    n = len(A)\n    left_cursor = 0\n    right_cursor = n-1\n    left_value = A[0]\n    right_value = A[n-1]\n    nb_abs_distinct = len(set([abs(left_value),abs(right_value)]))\n\n    while left_value != right_value:\n        # case 1: decrease right_cursor down to the next different value\n        if abs(left_value) &lt; abs(right_value):\n            while A[right_cursor] == right_value:\n                right_cursor -= 1\n            right_value = A[right_cursor]\n            if abs(right_value) != abs(left_value):\n                nb_abs_distinct += 1\n        # case 2: increase left_cursor to the next different value\n        elif abs(left_value) &gt; abs(right_value):\n            while A[left_cursor] == left_value:\n                left_cursor += 1\n            left_value = A[left_cursor]\n            if abs(left_value) != abs(right_value): \n                nb_abs_distinct += 1\n\n        else:\n            while abs(left_value) == abs(right_value):\n                left_cursor += 1\n                left_value = A[left_cursor]\n            nb_abs_distinct += 1\n\n    return nb_abs_distinct\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1477300,"reputation":21,"user_id":1387395,"display_name":"FelixW"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1350768561,"creation_date":1336660870,"answer_id":10536419,"question_id":5730330,"body_markdown":"This is my version. What do you think?\r\n\r\n    int count(vector&lt;int&gt; testVector){\r\n\t\r\n      for(unsigned int i = 0; i &lt; testVector.size(); i++){\r\n\t\t// empty array, return 0\r\n\t\tif(testVector.empty()) return 0;\r\n\r\n\t\t// one number left, must be unique, return 1;\r\n\t\tif(testVector.size() == 1) return 1;\r\n\r\n\t\t// neighbour elements are the same, delete first element\r\n\t\tif(testVector[0] == testVector[1]) {\r\n\t\t\ttestVector.erase(testVector.begin());\r\n\t\t\treturn count(testVector);\r\n\t\t}\r\n\r\n\t\t// absolute value of first and last element identical, delete first element\r\n\t\tif(abs(testVector[0]) == abs(testVector[testVector.size() - 1])){\r\n\t\t\ttestVector.erase(testVector.begin());\r\n\t\t\treturn count(testVector);\r\n\t\t}\r\n\r\n\t\t// if absolute value of beginning is greater than absolute value of end, delete beginning, otherwise end\r\n\t\tif(abs(testVector[0]) &gt; abs(testVector[testVector.size() - 1])){\r\n\t\t\ttestVector.erase(testVector.begin());\r\n\t\t} else {\r\n\t\t\ttestVector.erase(testVector.end() - 1);\r\n\t\t}\t\t\r\n\t\t// increase counter and recurse\r\n\t\treturn 1 + count(testVector);\r\n      }\r\n    }","title":"codility absolute distinct count from an array","body":"<p>This is my version. What do you think?</p>\n\n<pre><code>int count(vector&lt;int&gt; testVector){\n\n  for(unsigned int i = 0; i &lt; testVector.size(); i++){\n    // empty array, return 0\n    if(testVector.empty()) return 0;\n\n    // one number left, must be unique, return 1;\n    if(testVector.size() == 1) return 1;\n\n    // neighbour elements are the same, delete first element\n    if(testVector[0] == testVector[1]) {\n        testVector.erase(testVector.begin());\n        return count(testVector);\n    }\n\n    // absolute value of first and last element identical, delete first element\n    if(abs(testVector[0]) == abs(testVector[testVector.size() - 1])){\n        testVector.erase(testVector.begin());\n        return count(testVector);\n    }\n\n    // if absolute value of beginning is greater than absolute value of end, delete beginning, otherwise end\n    if(abs(testVector[0]) &gt; abs(testVector[testVector.size() - 1])){\n        testVector.erase(testVector.begin());\n    } else {\n        testVector.erase(testVector.end() - 1);\n    }       \n    // increase counter and recurse\n    return 1 + count(testVector);\n  }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1501661,"reputation":31,"user_id":1406106,"display_name":"Chris C Napier"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1337600016,"creation_date":1337509291,"answer_id":10672606,"question_id":5730330,"body_markdown":"    int count(vector&lt;int&gt; &amp;A) {\r\n    \r\n        int len = B.size();\r\n        if (len &lt;= 0)\r\n            return 0;\r\n    \t\r\n        // make a copy and calc absolutes of all items\r\n        vector&lt;int&gt; B = vector&lt;int&gt;(A);\r\n        for (int i = 0; i &lt; len; i++) {\r\n            if (B[i] &lt; 0) \r\n            B[i] = -B[i];\r\n        }\r\n    \r\n        // and sort so we have a simple absolute count\r\n        sort(B.begin(), B.end());\r\n    \r\n        int result = 1;\t//count first number always\r\n        for (int j = 1; j &lt; len; j++) {\r\n            if (B[j] != B[j-1])\r\n                result++;\r\n        }\r\n        return result;\r\n    \r\n    }\r\n\r\n","title":"codility absolute distinct count from an array","body":"<pre><code>int count(vector&lt;int&gt; &amp;A) {\n\n    int len = B.size();\n    if (len &lt;= 0)\n        return 0;\n\n    // make a copy and calc absolutes of all items\n    vector&lt;int&gt; B = vector&lt;int&gt;(A);\n    for (int i = 0; i &lt; len; i++) {\n        if (B[i] &lt; 0) \n        B[i] = -B[i];\n    }\n\n    // and sort so we have a simple absolute count\n    sort(B.begin(), B.end());\n\n    int result = 1; //count first number always\n    for (int j = 1; j &lt; len; j++) {\n        if (B[j] != B[j-1])\n            result++;\n    }\n    return result;\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1597121,"reputation":1,"user_id":1478940,"display_name":"Raymond"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1350768060,"creation_date":1340592709,"answer_id":11182974,"question_id":5730330,"body_markdown":"    class Program\r\n    {\r\n        static int CountArray(int[] MyIntArray)\r\n        {\r\n            int countNum = 0;\r\n            int[] TempIntArray = new int[MyIntArray.Length];\r\n            for (int i = 0; i &lt; MyIntArray.Length; i++)\r\n            {\r\n                TempIntArray[i] = Math.Abs(MyIntArray[i]);\r\n            }\r\n            var queryResults = from n in TempIntArray \r\n                               select n;\r\n            countNum = queryResults.Distinct().ToArray().Length;\r\n            return countNum;\r\n        }\r\n\r\n        static void Main(string[] args)\r\n        {\r\n            Console.WriteLine(&quot;demoX6FVFB-KX8&quot;);\r\n            Random randomNumber = new Random();\r\n            int[] TheArray = new int[100];\r\n            for (int j = 0; j &lt; TheArray.Length; j++)\r\n\t\t\t{\r\n\t\t\t    TheArray[j] = randomNumber.Next(-50, 50);\r\n\t\t\t}\r\n            int counta = Program.CountArray(TheArray);\r\n            Console.WriteLine(counta);\r\n        }\r\n    }","title":"codility absolute distinct count from an array","body":"<pre><code>class Program\n{\n    static int CountArray(int[] MyIntArray)\n    {\n        int countNum = 0;\n        int[] TempIntArray = new int[MyIntArray.Length];\n        for (int i = 0; i &lt; MyIntArray.Length; i++)\n        {\n            TempIntArray[i] = Math.Abs(MyIntArray[i]);\n        }\n        var queryResults = from n in TempIntArray \n                           select n;\n        countNum = queryResults.Distinct().ToArray().Length;\n        return countNum;\n    }\n\n    static void Main(string[] args)\n    {\n        Console.WriteLine(\"demoX6FVFB-KX8\");\n        Random randomNumber = new Random();\n        int[] TheArray = new int[100];\n        for (int j = 0; j &lt; TheArray.Length; j++)\n        {\n            TheArray[j] = randomNumber.Next(-50, 50);\n        }\n        int counta = Program.CountArray(TheArray);\n        Console.WriteLine(counta);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1743684,"reputation":21,"user_id":1594361,"display_name":"readedited"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1344829512,"creation_date":1344829512,"answer_id":11927959,"question_id":5730330,"body_markdown":"this is what i came up with, not sure if the fact that it contains a for loop inside the while deems it as typical noobie mistake.\r\n\r\n    \r\n\r\n        private int getDistict(int[] myaa) {\r\n    \t\tint dupcount=0;\r\n    \t\tint i = 0;\r\n    \t\tint j = myaa.length - 1;\r\n    \t\twhile (i &lt; j) {\r\n    \t//\t\tcheck neighbors \r\n    \t\t\tif(Math.abs(myaa[i]) == Math.abs(myaa[i+1])) {\r\n    \t\t\t\tdupcount++;\r\n    \t\t\t\ti++;\r\n    \t\t\t\tcontinue;\r\n    \t\t\t}\r\n    //\t\tcheck the other side\r\n    \t\t\tif(myaa[i] &lt; 0) {\r\n    \t\t\t\tfor(int k = j; Math.abs(myaa[i]) &lt;= Math.abs(myaa[k]); k-- ) {\r\n    \t\t\t\t\tif(Math.abs(myaa[i])==Math.abs(myaa[k])){\r\n    \t\t\t\t\t\tdupcount++;\r\n    \t\t\t\t\t}\r\n    \t\t\t\t}\t\t\t\t\r\n    \t\t\t}\r\n    \t\t\ti++;\r\n    \t\t}\r\n    \t\treturn myaa.length - dupcount;\r\n    \t}","title":"codility absolute distinct count from an array","body":"<p>this is what i came up with, not sure if the fact that it contains a for loop inside the while deems it as typical noobie mistake.</p>\n\n<pre><code>    private int getDistict(int[] myaa) {\n        int dupcount=0;\n        int i = 0;\n        int j = myaa.length - 1;\n        while (i &lt; j) {\n    //      check neighbors \n            if(Math.abs(myaa[i]) == Math.abs(myaa[i+1])) {\n                dupcount++;\n                i++;\n                continue;\n            }\n//      check the other side\n            if(myaa[i] &lt; 0) {\n                for(int k = j; Math.abs(myaa[i]) &lt;= Math.abs(myaa[k]); k-- ) {\n                    if(Math.abs(myaa[i])==Math.abs(myaa[k])){\n                        dupcount++;\n                    }\n                }               \n            }\n            i++;\n        }\n        return myaa.length - dupcount;\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":154071,"reputation":13182,"user_id":369759,"accept_rate":63,"display_name":"ses"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1359576018,"creation_date":1359575701,"answer_id":14612511,"question_id":5730330,"body_markdown":"        \r\n    import java.util.Arrays;\r\n    \r\n    public class DistinctNumbers {\r\n    \r\n        public static void main(String[] args) {\r\n    \r\n           int[][] tests = new int[][] {\r\n                                     {-5,-3, 0, 1, 3},    //4\r\n                                     {-5,-5,-5,-5,-5},   // 1\r\n                                     { 1, 2, 3, 4, 5},   // 5\r\n                                     { 1},               // 1\r\n                                     { 1, 2},            // 2\r\n                                     { 1, 1},            // 1\r\n                            };\r\n    \r\n           for (int[] test : tests) {\r\n               int count = findDistinctNumberCount( test );\r\n               System.out.println(count);\r\n           }\r\n    \r\n        }\r\n    \r\n        static int findDistinctNumberCount(int[] numbers) {\r\n    \r\n            // 1. make everything abs.\r\n            for (int i=0; i&lt;numbers.length; i++) {\r\n              if (numbers[i] &lt;0) {\r\n                  numbers[i] = Math.abs(numbers[i]);\r\n              }\r\n            }\r\n    \r\n            // 2. sort them\r\n            Arrays.sort(numbers);\r\n    \r\n            // 3. find\r\n            int count = numbers.length;\r\n    \r\n            for (int i=0; i&lt;numbers.length; i++) {\r\n    \r\n                // skip if not distinct (equal)\r\n                i = skipIfNeededAndGentNextIndex(i, numbers);\r\n    \r\n            }\r\n    \r\n            return count;\r\n    \r\n        }\r\n    \r\n        public static int skipIfNeededAndGentNextIndex(int currentIndex, int[] numbers) {\r\n    \r\n            int count = numbers.length;\r\n    \r\n            int nextIndex = currentIndex;\r\n    \r\n            if ( (nextIndex + 1) != numbers.length)  {\r\n    \r\n                nextIndex += 1;\r\n    \r\n                while(numbers[currentIndex] == numbers[nextIndex]) {\r\n    \r\n                    count -= 1;\r\n    \r\n                    if ( (nextIndex + 1) != numbers.length) {\r\n                        nextIndex += 1;\r\n                    } else {\r\n                        break;\r\n                    }\r\n    \r\n                }\r\n    \r\n            }\r\n    \r\n            return count;\r\n        }\r\n    \r\n    }\r\n\r\n","title":"codility absolute distinct count from an array","body":"<pre><code>import java.util.Arrays;\n\npublic class DistinctNumbers {\n\n    public static void main(String[] args) {\n\n       int[][] tests = new int[][] {\n                                 {-5,-3, 0, 1, 3},    //4\n                                 {-5,-5,-5,-5,-5},   // 1\n                                 { 1, 2, 3, 4, 5},   // 5\n                                 { 1},               // 1\n                                 { 1, 2},            // 2\n                                 { 1, 1},            // 1\n                        };\n\n       for (int[] test : tests) {\n           int count = findDistinctNumberCount( test );\n           System.out.println(count);\n       }\n\n    }\n\n    static int findDistinctNumberCount(int[] numbers) {\n\n        // 1. make everything abs.\n        for (int i=0; i&lt;numbers.length; i++) {\n          if (numbers[i] &lt;0) {\n              numbers[i] = Math.abs(numbers[i]);\n          }\n        }\n\n        // 2. sort them\n        Arrays.sort(numbers);\n\n        // 3. find\n        int count = numbers.length;\n\n        for (int i=0; i&lt;numbers.length; i++) {\n\n            // skip if not distinct (equal)\n            i = skipIfNeededAndGentNextIndex(i, numbers);\n\n        }\n\n        return count;\n\n    }\n\n    public static int skipIfNeededAndGentNextIndex(int currentIndex, int[] numbers) {\n\n        int count = numbers.length;\n\n        int nextIndex = currentIndex;\n\n        if ( (nextIndex + 1) != numbers.length)  {\n\n            nextIndex += 1;\n\n            while(numbers[currentIndex] == numbers[nextIndex]) {\n\n                count -= 1;\n\n                if ( (nextIndex + 1) != numbers.length) {\n                    nextIndex += 1;\n                } else {\n                    break;\n                }\n\n            }\n\n        }\n\n        return count;\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":965806,"reputation":5686,"user_id":989256,"accept_rate":73,"display_name":"Michal B."},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1360072038,"creation_date":1360072038,"answer_id":14709020,"question_id":5730330,"body_markdown":".NET C#:\r\n\r\n    static int absoluteDistinctNumbers(int[] arr)\r\n    {\r\n        int same = 0;\r\n        int l = 0;\r\n        int r = arr.Length - 1;\r\n\r\n        while (l &lt; r)\r\n        {\r\n            if (Math.Abs(arr[l]) == Math.Abs(arr[r]))\r\n                ++same;\r\n\r\n            if (Math.Abs(arr[l]) &gt; Math.Abs(arr[r]))\r\n                ++l;\r\n            else\r\n                --r;\r\n        }\r\n\r\n        return arr.Length - same; \r\n    }\r\n\r\nIs there a problem with this solution? It looks much simpler than the other ones presented...and it took me like 10 minutes, so I am quite sure I did something wrong, but I have no idea what... My tests:\r\n\r\n    var arr = new int[] { 4, 2, 1, 1, -1, -5 };\r\n    var result = absoluteDistinctNumbers(arr);\r\n    Debug.Assert(4 == result);\r\n\r\n    arr = new int[] { 1, -1 };\r\n    result = absoluteDistinctNumbers(arr);\r\n    Debug.Assert(1 == result);\r\n\r\n    arr = new int[] { };\r\n    result = absoluteDistinctNumbers(arr);\r\n    Debug.Assert(0 == result);\r\n\r\n    arr = new int[] { 2 };\r\n    result = absoluteDistinctNumbers(arr);\r\n    Debug.Assert(1 == result);\r\n\r\n    arr = new int[] { 3, 3, -3 };\r\n    result = absoluteDistinctNumbers(arr);\r\n    Debug.Assert(1 == result);\r\n\r\n    arr = new int[] { 2, 0, 0, 0 };\r\n    result = absoluteDistinctNumbers(arr);\r\n    Debug.Assert(2 == result);","title":"codility absolute distinct count from an array","body":"<p>.NET C#:</p>\n\n<pre><code>static int absoluteDistinctNumbers(int[] arr)\n{\n    int same = 0;\n    int l = 0;\n    int r = arr.Length - 1;\n\n    while (l &lt; r)\n    {\n        if (Math.Abs(arr[l]) == Math.Abs(arr[r]))\n            ++same;\n\n        if (Math.Abs(arr[l]) &gt; Math.Abs(arr[r]))\n            ++l;\n        else\n            --r;\n    }\n\n    return arr.Length - same; \n}\n</code></pre>\n\n<p>Is there a problem with this solution? It looks much simpler than the other ones presented...and it took me like 10 minutes, so I am quite sure I did something wrong, but I have no idea what... My tests:</p>\n\n<pre><code>var arr = new int[] { 4, 2, 1, 1, -1, -5 };\nvar result = absoluteDistinctNumbers(arr);\nDebug.Assert(4 == result);\n\narr = new int[] { 1, -1 };\nresult = absoluteDistinctNumbers(arr);\nDebug.Assert(1 == result);\n\narr = new int[] { };\nresult = absoluteDistinctNumbers(arr);\nDebug.Assert(0 == result);\n\narr = new int[] { 2 };\nresult = absoluteDistinctNumbers(arr);\nDebug.Assert(1 == result);\n\narr = new int[] { 3, 3, -3 };\nresult = absoluteDistinctNumbers(arr);\nDebug.Assert(1 == result);\n\narr = new int[] { 2, 0, 0, 0 };\nresult = absoluteDistinctNumbers(arr);\nDebug.Assert(2 == result);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":358236,"reputation":41,"user_id":698870,"display_name":"danny"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1431691582,"creation_date":1360281612,"answer_id":14763456,"question_id":5730330,"body_markdown":"The shortest version here for time complexity O(n) and O(1) memory:\r\n\r\n    int countAbsDistinct(int[] A) {\r\n        int start = 0;\r\n        int end = A.length - 1;\r\n        if (end == -1) { // zero size list\r\n            return 0;\r\n        }\r\n    \r\n        int c = 1; // at least one abs distinct for non-empty array\r\n        while(A[start]&lt;A[end]){\r\n    \t    int l = Math.abs(A[start]);\r\n    \t    int r = Math.abs(A[end]);\r\n\t    c++;\r\n    \t\r\n    \t    if (r&gt;=l){\r\n    \t        while(A[end]==list.get(--end)); // move left until different value\r\n    \t    }\r\n    \t    if (l&gt;=r){\r\n                while(A[start]==list.get(++start)); // move right until different value\r\n    \t    }\r\n        }\r\n        if(start&gt;end){ // if last movements made start index bigger than end\r\n            c--;\r\n        }\r\n        return c;\r\n    }","title":"codility absolute distinct count from an array","body":"<p>The shortest version here for time complexity O(n) and O(1) memory:</p>\n\n<pre><code>int countAbsDistinct(int[] A) {\n    int start = 0;\n    int end = A.length - 1;\n    if (end == -1) { // zero size list\n        return 0;\n    }\n\n    int c = 1; // at least one abs distinct for non-empty array\n    while(A[start]&lt;A[end]){\n        int l = Math.abs(A[start]);\n        int r = Math.abs(A[end]);\n    c++;\n\n        if (r&gt;=l){\n            while(A[end]==list.get(--end)); // move left until different value\n        }\n        if (l&gt;=r){\n            while(A[start]==list.get(++start)); // move right until different value\n        }\n    }\n    if(start&gt;end){ // if last movements made start index bigger than end\n        c--;\n    }\n    return c;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2681029,"reputation":1,"user_id":2316424,"display_name":"Tianyu Zheng"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1367074236,"creation_date":1367060877,"answer_id":16251380,"question_id":5730330,"body_markdown":"In the case of Java, Arrays.sort() method has the best average performance. The expectation of time complexity is said to be O(N*log2N). So why not use it?\r\n\r\nHere is a solution.\r\n\r\n1. Go through the array, turn all the negative numbers into their absolute numbers.\r\nFor example, from {-5, -3, 0, 1, 3} to {5, 3, 0, 1, 3}.\r\n2. User Arrays.sort() to resort the array.\r\nFor example, from {5, 3, 0, 1, 3} to {0, 1, 3, 3, 5}.\r\n3. Go through the array again, if the neighbors do not have the same value, count up.\r\n\r\nHere is the source in Java.\r\n\r\n\tint countDistinct(int[] A) {\r\n\t\t\r\n\t\tint size = A.length;\r\n\t\tif(size == 0) {\r\n\t\t\treturn 0;\r\n\t\t}\r\n\t\tfor(int i = 0; i &lt; size; i++) {\r\n\t\t\tif(A[i] &lt; 0) {\r\n\t\t\t\tA[i] = (-1) * A[i];\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tArrays.sort(A);\r\n\t\t\r\n\t\tint count = 1;\r\n\t\tfor(int i = 0; i &lt; size - 1; i++) {\r\n\t\t\tif(A[i] != A[i + 1]) {\r\n\t\t\t\tcount++;\r\n\t\t\t} \r\n\t\t}\r\n\t\t\r\n\t\treturn count;\r\n\t}","title":"codility absolute distinct count from an array","body":"<p>In the case of Java, Arrays.sort() method has the best average performance. The expectation of time complexity is said to be O(N*log2N). So why not use it?</p>\n\n<p>Here is a solution.</p>\n\n<ol>\n<li>Go through the array, turn all the negative numbers into their absolute numbers.\nFor example, from {-5, -3, 0, 1, 3} to {5, 3, 0, 1, 3}.</li>\n<li>User Arrays.sort() to resort the array.\nFor example, from {5, 3, 0, 1, 3} to {0, 1, 3, 3, 5}.</li>\n<li>Go through the array again, if the neighbors do not have the same value, count up.</li>\n</ol>\n\n<p>Here is the source in Java.</p>\n\n<pre><code>int countDistinct(int[] A) {\n\n    int size = A.length;\n    if(size == 0) {\n        return 0;\n    }\n    for(int i = 0; i &lt; size; i++) {\n        if(A[i] &lt; 0) {\n            A[i] = (-1) * A[i];\n        }\n    }\n\n    Arrays.sort(A);\n\n    int count = 1;\n    for(int i = 0; i &lt; size - 1; i++) {\n        if(A[i] != A[i + 1]) {\n            count++;\n        } \n    }\n\n    return count;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2596359,"reputation":4683,"user_id":2249962,"accept_rate":62,"display_name":"JNL"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1373320219,"creation_date":1371688194,"answer_id":17203514,"question_id":5730330,"body_markdown":"Heres what I coded.....Let me know if it can be improved....\r\n\r\n    import java.util.Arrays;\r\n    import java.util.HashSet;\r\n    \r\n    /********\r\n    Joel \r\n    Jun 19, 2013\r\n     ********/\r\n    \r\n    public class CodilityTest {\r\n    \t\r\n    \tprivate int[] inputArray;\r\n    \tpublic static int count=0;\r\n    \t\r\n    \tpublic void setInput(int [] givenIP){\r\n    \t\tthis.inputArray= new int[givenIP.length];\r\n    \t\tfor(int i=0; i&lt;givenIP.length;i++)\r\n    \t\t{ inputArray[i] = givenIP[i];}\r\n    \t}\r\n    \t\r\n    \tpublic int[] getInput(){\r\n    \t\treturn this.inputArray;\r\n    \t}\r\n    \t\r\n    \tpublic CodilityTest(){\r\n    \t\tcount=0;\r\n    \t}\r\n    \t\r\n    \tpublic static void main(String[] args) throws Exception {\r\n    \t\t// TODO Auto-generated method stub\r\n    \t\t\r\n    \t\tCodilityTest o_tc = new CodilityTest();\r\n    \t\t\r\n    \t\tint [] x = {1,2,-3,4,-5,-11,-2,3,-4,5};\r\n    \t\tint [] y = new int[0];\r\n    \t\to_tc.setInput(x);\r\n    \t\to_tc.getOutput(x);\r\n    \t\tSystem.out.println(count);\r\n    \t\t\r\n    \t\tCodilityTest o_tc1 = new CodilityTest();\r\n    \t\to_tc1.getOutput(y);\t\t\r\n    \t}\r\n    \t\r\n    \tpublic void getOutput(int [] givenInput)\r\n    \t{\r\n    \t\tif(givenInput == null)\r\n    \t\t{System.out.println(&quot;Please Enter some variables Sir.&quot;); return;}\r\n    \t\t\r\n    \t\tif(givenInput.length&lt;1)\r\n    \t\t{System.out.println(&quot;Please Enter some variables Sir.&quot;); return; }\r\n    \t\t\r\n    \t\tif(givenInput.length &lt; 2)\r\n    \t\t{count+=1; return;}\r\n    \t\t\r\n    \t\tHashSet&lt;Integer&gt; o_hs = new HashSet&lt;Integer&gt;();\r\n    \t\tfor(int numCount=0; numCount&lt;givenInput.length;numCount++)\r\n    \t\t{\t\t\t\r\n    \t\t\tif(o_hs.add(Math.abs(givenInput[numCount])))\r\n    \t\t\t{count+=1;}\r\n    \t\t}\r\n    \t\t\r\n    \t}\r\n    \r\n    }\r\n\r\n","title":"codility absolute distinct count from an array","body":"<p>Heres what I coded.....Let me know if it can be improved....</p>\n\n<pre><code>import java.util.Arrays;\nimport java.util.HashSet;\n\n/********\nJoel \nJun 19, 2013\n ********/\n\npublic class CodilityTest {\n\n    private int[] inputArray;\n    public static int count=0;\n\n    public void setInput(int [] givenIP){\n        this.inputArray= new int[givenIP.length];\n        for(int i=0; i&lt;givenIP.length;i++)\n        { inputArray[i] = givenIP[i];}\n    }\n\n    public int[] getInput(){\n        return this.inputArray;\n    }\n\n    public CodilityTest(){\n        count=0;\n    }\n\n    public static void main(String[] args) throws Exception {\n        // TODO Auto-generated method stub\n\n        CodilityTest o_tc = new CodilityTest();\n\n        int [] x = {1,2,-3,4,-5,-11,-2,3,-4,5};\n        int [] y = new int[0];\n        o_tc.setInput(x);\n        o_tc.getOutput(x);\n        System.out.println(count);\n\n        CodilityTest o_tc1 = new CodilityTest();\n        o_tc1.getOutput(y);     \n    }\n\n    public void getOutput(int [] givenInput)\n    {\n        if(givenInput == null)\n        {System.out.println(\"Please Enter some variables Sir.\"); return;}\n\n        if(givenInput.length&lt;1)\n        {System.out.println(\"Please Enter some variables Sir.\"); return; }\n\n        if(givenInput.length &lt; 2)\n        {count+=1; return;}\n\n        HashSet&lt;Integer&gt; o_hs = new HashSet&lt;Integer&gt;();\n        for(int numCount=0; numCount&lt;givenInput.length;numCount++)\n        {           \n            if(o_hs.add(Math.abs(givenInput[numCount])))\n            {count+=1;}\n        }\n\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2932748,"reputation":1,"user_id":2512502,"display_name":"guest01"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1371938479,"creation_date":1371937306,"answer_id":17255588,"question_id":5730330,"body_markdown":"    def solution1(A):\r\n        indneg = -1\r\n        lena = len(A)\r\n        lneg = list()\r\n        lpos = list()\r\n        \r\n        for i in range(lena-1):\r\n            if A[i] != A[i+1]:\r\n                if A[i] &lt; 0:\r\n                    lneg.append(A[i])\r\n                else:\r\n                    lpos.append(A[i])\r\n        print(lneg)\r\n        print(lpos)\r\n    \r\n        deltalen = 0\r\n    \r\n        for i in lneg:\r\n            if -i in lpos: deltalen +=1\r\n    \r\n        return(len(lneg)+len(lpos)-deltalen)","title":"codility absolute distinct count from an array","body":"<pre><code>def solution1(A):\n    indneg = -1\n    lena = len(A)\n    lneg = list()\n    lpos = list()\n\n    for i in range(lena-1):\n        if A[i] != A[i+1]:\n            if A[i] &lt; 0:\n                lneg.append(A[i])\n            else:\n                lpos.append(A[i])\n    print(lneg)\n    print(lpos)\n\n    deltalen = 0\n\n    for i in lneg:\n        if -i in lpos: deltalen +=1\n\n    return(len(lneg)+len(lpos)-deltalen)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2981669,"reputation":11,"user_id":2531512,"display_name":"Indu"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1372415857,"creation_date":1372415508,"answer_id":17362683,"question_id":5730330,"body_markdown":"    int[] arr= new int[]{-5,-5,-6,-6,-6};\r\n    Set&lt;Integer&gt; newSet = new HashSet&lt;Integer&gt;();\r\n    for(int i=0;i&lt;arr.length;i++)\r\n      newSet.add(Math.abs(arr[i]));    \r\n    \r\n    System.out.println(newSet.size());","title":"codility absolute distinct count from an array","body":"<pre><code>int[] arr= new int[]{-5,-5,-6,-6,-6};\nSet&lt;Integer&gt; newSet = new HashSet&lt;Integer&gt;();\nfor(int i=0;i&lt;arr.length;i++)\n  newSet.add(Math.abs(arr[i]));    \n\nSystem.out.println(newSet.size());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2658289,"reputation":131,"user_id":2298531,"display_name":"vic-nik"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1600794597,"creation_date":1374766494,"answer_id":17862516,"question_id":5730330,"body_markdown":"Binary search based solution\r\n\r\n    import java.util.Arrays;\r\n\r\n    public class AbsoluteDistinct {\r\n\r\n        private int absoluteDistinct(int[] a) {\r\n            if (a.length == 0 || a.length == 1) return a.length;\r\n\r\n            Arrays.sort(a);\r\n\r\n            int dist = 1;\r\n            int N = a.length;\r\n            for (int i = 0; i &lt; N; i++) {\r\n                if (i + 1 == N) break;\r\n                int temp = Math.abs(a[i]);\r\n                if (temp == Math.abs(a[i+1])) continue;\r\n                if (Arrays.binarySearch(a, (i + 1), N, temp) &lt; 0) dist++;\r\n            }\r\n            \r\n            return dist;\r\n        }\r\n\r\n    \r\n        public static void main(String[] args) {\r\n            //generate array of 1 Million random values\r\n            int LIMIT = 1000000;\r\n            int[] a = new int[LIMIT];\r\n            for (int i = 0; i &lt; LIMIT; i++) {\r\n                int r = (int) (Math.random() * (LIMIT + LIMIT + 1)) - LIMIT;\r\n                a[i] = r;\r\n            }\r\n            //print absolute distinct numbers \r\n            System.out.println(new AbsoluteDistinct().absoluteDistinct(a));\r\n        }\r\n    }","title":"codility absolute distinct count from an array","body":"<p>Binary search based solution</p>\n<pre><code>import java.util.Arrays;\n\npublic class AbsoluteDistinct {\n\n    private int absoluteDistinct(int[] a) {\n        if (a.length == 0 || a.length == 1) return a.length;\n\n        Arrays.sort(a);\n\n        int dist = 1;\n        int N = a.length;\n        for (int i = 0; i &lt; N; i++) {\n            if (i + 1 == N) break;\n            int temp = Math.abs(a[i]);\n            if (temp == Math.abs(a[i+1])) continue;\n            if (Arrays.binarySearch(a, (i + 1), N, temp) &lt; 0) dist++;\n        }\n        \n        return dist;\n    }\n\n\n    public static void main(String[] args) {\n        //generate array of 1 Million random values\n        int LIMIT = 1000000;\n        int[] a = new int[LIMIT];\n        for (int i = 0; i &lt; LIMIT; i++) {\n            int r = (int) (Math.random() * (LIMIT + LIMIT + 1)) - LIMIT;\n            a[i] = r;\n        }\n        //print absolute distinct numbers \n        System.out.println(new AbsoluteDistinct().absoluteDistinct(a));\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3354300,"reputation":1,"user_id":2817630,"display_name":"bbpeter"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1380161512,"creation_date":1380161512,"answer_id":19018205,"question_id":5730330,"body_markdown":"Here is my ruby version 100/100 test on codility, based on the codility test cases, an array with identical absolute values  [3,-3] or [3,3] should return 1,\r\nhere is the example list [link][1]  \r\n\r\n  [1]: http://codility.com/train/\r\n\r\n    def absolute(a)\r\n\t    b = Hash.new(0)\r\n\t    a.each do |x|\r\n\t\t    x = x.abs\r\n\t\t    b[x] += 1\r\n\t    end \r\n\t    return b.size\r\n    end ","title":"codility absolute distinct count from an array","body":"<p>Here is my ruby version 100/100 test on codility, based on the codility test cases, an array with identical absolute values  [3,-3] or [3,3] should return 1,\nhere is the example list <a href=\"http://codility.com/train/\" rel=\"nofollow\">link</a>  </p>\n\n<pre><code>def absolute(a)\n    b = Hash.new(0)\n    a.each do |x|\n        x = x.abs\n        b[x] += 1\n    end \n    return b.size\nend \n</code></pre>\n"},{"tags":[],"owner":{"account_id":1206543,"reputation":177,"user_id":1701059,"accept_rate":80,"display_name":"Yash"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1393184263,"creation_date":1393184263,"answer_id":21973455,"question_id":5730330,"body_markdown":"Here is python implementation:\r\nMight not be too different from the accepted solution, but it based on two pointers idea.\r\n\r\n    def distinct(items):\r\n        l=0\r\n        r=len(items)-1\r\n        count=len( set( [abs( items[l] ),abs( items[r] )] ) )\r\n        a=1\r\n        b=r-1\r\n        while(a&lt;b):\r\n            if items[a]==items[l]:\r\n                a+=1\r\n            elif items[b]==items[r]:\r\n                b-=1\r\n            elif abs(items[a])==abs(items[b]):\r\n                count+=1\r\n                l=a\r\n                r=b\r\n                a+=1\r\n                b-=1\r\n            else:\r\n                count+=2\r\n                l=a\r\n                r=b\r\n                a+=1\r\n                b-=1\r\n        if(abs(items[a])!=abs(items[l]) and abs(items[a])!=abs(items[r]) and abs(items[b])!=abs(items[l]) and abs(items[b])!=abs(items[r])):\r\n            count+=1\r\n        return count","title":"codility absolute distinct count from an array","body":"<p>Here is python implementation:\nMight not be too different from the accepted solution, but it based on two pointers idea.</p>\n\n<pre><code>def distinct(items):\n    l=0\n    r=len(items)-1\n    count=len( set( [abs( items[l] ),abs( items[r] )] ) )\n    a=1\n    b=r-1\n    while(a&lt;b):\n        if items[a]==items[l]:\n            a+=1\n        elif items[b]==items[r]:\n            b-=1\n        elif abs(items[a])==abs(items[b]):\n            count+=1\n            l=a\n            r=b\n            a+=1\n            b-=1\n        else:\n            count+=2\n            l=a\n            r=b\n            a+=1\n            b-=1\n    if(abs(items[a])!=abs(items[l]) and abs(items[a])!=abs(items[r]) and abs(items[b])!=abs(items[l]) and abs(items[b])!=abs(items[r])):\n        count+=1\n    return count\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3377852,"reputation":2456,"user_id":2835640,"accept_rate":95,"display_name":"crogg01"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1400028098,"creation_date":1400027546,"answer_id":23643786,"question_id":5730330,"body_markdown":"Here is C++ code for both implementations with code that generates a randomly sorted integer vector:\r\n\r\n    #include &lt;vector&gt;\r\n    #include &lt;set&gt;\r\n    #include &lt;iostream&gt;\r\n    #include &lt;random&gt;\r\n    #include &lt;cstdlib&gt;\r\n    using namespace std;\r\n    int main(int argc, char** argv) {\r\n\r\n        // generate a vector with random negative and positive integers, then sort it\r\n        // vector&lt;int&gt; vQ2{ -5, -4, -4, -2, 0, 3, 4, 5, 5, 7, 12, 14};\r\n        vector&lt;int&gt; vQ2;\r\n        std::default_random_engine e;\r\n        std::uniform_int_distribution&lt;&gt; d(-10, 10);\r\n        std::function&lt;int()&gt; rnd = std::bind(d, e);\r\n        for(int n=0; n&lt;10; ++n)\r\n            vQ2.push_back(rnd());\r\n        sort(vQ2.begin(),vQ2.end());\r\n    \r\n        // set (hashfunction) solution (hash)\r\n        set&lt;int&gt; sQ2;\r\n        for_each(vQ2.cbegin(),vQ2.cend(),[&amp;sQ2](const int input) -&gt; void { sQ2.insert( std::abs(input) ); } );\r\n        cout &lt;&lt; sQ2.size() &lt;&lt; endl;\r\n    \r\n        // pointers-meeting-in-the-middle solution        \r\n        int absUniqueCount = 0;\r\n        vector&lt;int&gt;::iterator it1 = vQ2.begin();\r\n        vector&lt;int&gt;::iterator it2 = prev(vQ2.end());\r\n        int valueIt1Prev = *it1;\r\n        int valueIt2Prev = *it2;\r\n        while(valueIt1Prev &lt;= valueIt2Prev)\r\n        {\r\n            ++absUniqueCount;\r\n            while(valueIt1Prev == *it1 &amp;&amp; abs(valueIt1Prev) &gt;= abs(valueIt2Prev))\r\n            {   advance(it1,1); } // using advance in case of non contiguous memory container (e.g. list)\r\n            while(valueIt2Prev == *it2 &amp;&amp; abs(valueIt2Prev) &gt;= abs(valueIt1Prev))\r\n            {   advance(it2,-1); } \r\n            valueIt1Prev = *it1;\r\n            valueIt2Prev = *it2;\r\n        }\r\n        copy(vQ2.cbegin(),vQ2.cend(),ostream_iterator&lt;int&gt;(cout,&quot;,&quot;)); cout &lt;&lt; endl;\r\n        cout &lt;&lt; absUniqueCount &lt;&lt; endl;\r\n            \r\n        return 0;\r\n    }\r\n\r\nWhich gives:\r\n\r\n    6\r\n    -9,-8,-8,-8,-5,0,4,4,6,6,\r\n    6\r\n\r\n\r\n\r\n\r\n\r\n","title":"codility absolute distinct count from an array","body":"<p>Here is C++ code for both implementations with code that generates a randomly sorted integer vector:</p>\n\n<pre><code>#include &lt;vector&gt;\n#include &lt;set&gt;\n#include &lt;iostream&gt;\n#include &lt;random&gt;\n#include &lt;cstdlib&gt;\nusing namespace std;\nint main(int argc, char** argv) {\n\n    // generate a vector with random negative and positive integers, then sort it\n    // vector&lt;int&gt; vQ2{ -5, -4, -4, -2, 0, 3, 4, 5, 5, 7, 12, 14};\n    vector&lt;int&gt; vQ2;\n    std::default_random_engine e;\n    std::uniform_int_distribution&lt;&gt; d(-10, 10);\n    std::function&lt;int()&gt; rnd = std::bind(d, e);\n    for(int n=0; n&lt;10; ++n)\n        vQ2.push_back(rnd());\n    sort(vQ2.begin(),vQ2.end());\n\n    // set (hashfunction) solution (hash)\n    set&lt;int&gt; sQ2;\n    for_each(vQ2.cbegin(),vQ2.cend(),[&amp;sQ2](const int input) -&gt; void { sQ2.insert( std::abs(input) ); } );\n    cout &lt;&lt; sQ2.size() &lt;&lt; endl;\n\n    // pointers-meeting-in-the-middle solution        \n    int absUniqueCount = 0;\n    vector&lt;int&gt;::iterator it1 = vQ2.begin();\n    vector&lt;int&gt;::iterator it2 = prev(vQ2.end());\n    int valueIt1Prev = *it1;\n    int valueIt2Prev = *it2;\n    while(valueIt1Prev &lt;= valueIt2Prev)\n    {\n        ++absUniqueCount;\n        while(valueIt1Prev == *it1 &amp;&amp; abs(valueIt1Prev) &gt;= abs(valueIt2Prev))\n        {   advance(it1,1); } // using advance in case of non contiguous memory container (e.g. list)\n        while(valueIt2Prev == *it2 &amp;&amp; abs(valueIt2Prev) &gt;= abs(valueIt1Prev))\n        {   advance(it2,-1); } \n        valueIt1Prev = *it1;\n        valueIt2Prev = *it2;\n    }\n    copy(vQ2.cbegin(),vQ2.cend(),ostream_iterator&lt;int&gt;(cout,\",\")); cout &lt;&lt; endl;\n    cout &lt;&lt; absUniqueCount &lt;&lt; endl;\n\n    return 0;\n}\n</code></pre>\n\n<p>Which gives:</p>\n\n<pre><code>6\n-9,-8,-8,-8,-5,0,4,4,6,6,\n6\n</code></pre>\n"},{"tags":[],"owner":{"account_id":52083,"reputation":11602,"user_id":155639,"accept_rate":64,"display_name":"Andrej Kaurin"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1424871933,"creation_date":1424871933,"answer_id":28720615,"question_id":5730330,"body_markdown":"JavaScript: 100/100\r\n\r\n\r\n    function solution(A) {\r\n        var count = 1,\r\n            len = A.length,\r\n            S = A.map(function(x){ return Math.abs(x) }).sort();\r\n            \r\n        for(var i=1;i&lt;len;i++) {\r\n            if(S[i] != S[i-1]) count++;        \r\n        }\r\n        \r\n        return count;\r\n    }","title":"codility absolute distinct count from an array","body":"<p>JavaScript: 100/100</p>\n\n<pre><code>function solution(A) {\n    var count = 1,\n        len = A.length,\n        S = A.map(function(x){ return Math.abs(x) }).sort();\n\n    for(var i=1;i&lt;len;i++) {\n        if(S[i] != S[i-1]) count++;        \n    }\n\n    return count;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3155243,"reputation":1467,"user_id":2667792,"accept_rate":78,"display_name":"max3d"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1438879728,"creation_date":1438879728,"answer_id":31861448,"question_id":5730330,"body_markdown":"100/100 Java  O(N)\r\n\r\n    public class Distinct {\r\n\r\n        public static int solution(int[] A) {\r\n\r\n            Set&lt;Integer&gt; set = new HashSet&lt;&gt;();\r\n            for (int i : A) {\r\n                set.add(i);\r\n            }\r\n            return set.size();\r\n        }\r\n    }","title":"codility absolute distinct count from an array","body":"<p>100/100 Java  O(N)</p>\n\n<pre><code>public class Distinct {\n\n    public static int solution(int[] A) {\n\n        Set&lt;Integer&gt; set = new HashSet&lt;&gt;();\n        for (int i : A) {\n            set.add(i);\n        }\n        return set.size();\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":421111,"reputation":1410,"user_id":799162,"display_name":"moxi"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1439128090,"creation_date":1439069314,"answer_id":31898766,"question_id":5730330,"body_markdown":"Java 100/100\r\nhttps://codility.com/demo/results/demoMTWUSD-S9M/\r\n\r\nA O(N) solution without using sets and without using Sort, inspired by the Programming Pearls book, Chapter 1:\r\n\r\n    public int solutionWithoutSetCountUntilInputLength(int[] A) {\r\n           int length = A.length;\r\n           int inputLimit = 1000000;\r\n           int[] positives = new int[inputLimit];\r\n           int[] negatives = new int[inputLimit]; // should be length - 1 not counting zero\r\n           \r\n           for (int element : A) {\r\n               if ( element &gt;=0 ) {\r\n                   ++positives[element];\r\n               } else {\r\n                   int abs = element * -1;\r\n                   ++negatives[abs];\r\n               }\r\n           }\r\n                   \r\n           int countDistincts = 0;\r\n           \r\n           for (int i: A) {\r\n               if (i &gt;= 0 ) {\r\n                   if ( positives[i] &gt;= 1 ) {\r\n                       ++countDistincts;   \r\n                       positives[i] = 0;\r\n                   }\r\n               } else {\r\n                   if ( negatives[i * -1] &gt;= 1 ) {\r\n                       ++countDistincts;   \r\n                       negatives[i * -1] = 0;\r\n                   }\r\n               }\r\n           }        \r\n           return countDistincts ;\r\n       }\r\n\r\nI was thinking of improving the last answer, is I did some research of Bit operations with Java, and I found the next solutions with for me it performs better, it uses less space and less CPU cycles:\r\n\r\nimport java.util.Set;\r\n\r\n    public class Distinct {\r\n    public int solution(int[] A) {\r\n            // first part for negatives, second part for positives and adding 1\r\n            // to count the zero as part of the positives section\r\n            int offset = 1_000_000;\r\n            BitSet bitSet = new BitSet( (offset * 2) + 1 );\r\n    \r\n            for (int element : A ) {\r\n                int index = element &gt;= 0 ? offset + element : (element * -1);\r\n                bitSet.set(index);\r\n            }\r\n    \r\n            return bitSet.cardinality();\r\n        }\r\n    }\r\n\r\nHere&#39;s the codility link 100/100:\r\nhttps://codility.com/demo/results/demoN57YUC-G9Z/\r\n\r\nYou can see my other attempts here:\r\n[Distinct][1]\r\n\r\n\r\n  [1]: https://github.com/moxi/codility-lessons/blob/master/Codility/Sorting/Distinct.java","title":"codility absolute distinct count from an array","body":"<p>Java 100/100\n<a href=\"https://codility.com/demo/results/demoMTWUSD-S9M/\" rel=\"nofollow\">https://codility.com/demo/results/demoMTWUSD-S9M/</a></p>\n\n<p>A O(N) solution without using sets and without using Sort, inspired by the Programming Pearls book, Chapter 1:</p>\n\n<pre><code>public int solutionWithoutSetCountUntilInputLength(int[] A) {\n       int length = A.length;\n       int inputLimit = 1000000;\n       int[] positives = new int[inputLimit];\n       int[] negatives = new int[inputLimit]; // should be length - 1 not counting zero\n\n       for (int element : A) {\n           if ( element &gt;=0 ) {\n               ++positives[element];\n           } else {\n               int abs = element * -1;\n               ++negatives[abs];\n           }\n       }\n\n       int countDistincts = 0;\n\n       for (int i: A) {\n           if (i &gt;= 0 ) {\n               if ( positives[i] &gt;= 1 ) {\n                   ++countDistincts;   \n                   positives[i] = 0;\n               }\n           } else {\n               if ( negatives[i * -1] &gt;= 1 ) {\n                   ++countDistincts;   \n                   negatives[i * -1] = 0;\n               }\n           }\n       }        \n       return countDistincts ;\n   }\n</code></pre>\n\n<p>I was thinking of improving the last answer, is I did some research of Bit operations with Java, and I found the next solutions with for me it performs better, it uses less space and less CPU cycles:</p>\n\n<p>import java.util.Set;</p>\n\n<pre><code>public class Distinct {\npublic int solution(int[] A) {\n        // first part for negatives, second part for positives and adding 1\n        // to count the zero as part of the positives section\n        int offset = 1_000_000;\n        BitSet bitSet = new BitSet( (offset * 2) + 1 );\n\n        for (int element : A ) {\n            int index = element &gt;= 0 ? offset + element : (element * -1);\n            bitSet.set(index);\n        }\n\n        return bitSet.cardinality();\n    }\n}\n</code></pre>\n\n<p>Here's the codility link 100/100:\n<a href=\"https://codility.com/demo/results/demoN57YUC-G9Z/\" rel=\"nofollow\">https://codility.com/demo/results/demoN57YUC-G9Z/</a></p>\n\n<p>You can see my other attempts here:\n<a href=\"https://github.com/moxi/codility-lessons/blob/master/Codility/Sorting/Distinct.java\" rel=\"nofollow\">Distinct</a></p>\n"},{"tags":[],"owner":{"account_id":354646,"reputation":3890,"user_id":4185364,"display_name":"milos.ai"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1445278218,"creation_date":1445278218,"answer_id":33221106,"question_id":5730330,"body_markdown":"Very easy to do in Scala:\r\n\r\n    \r\n    object Solution {\r\n        def solution(A: Array[Int]): Int = {\r\n            \r\n            return(A.map(v =&gt; math.abs(v)).distinct.length)\r\n        }\r\n    }\r\n\r\nHere&#39;s link to [test](https://codility.com/demo/results/training75AZPR-AVK/).","title":"codility absolute distinct count from an array","body":"<p>Very easy to do in Scala:</p>\n\n<pre><code>object Solution {\n    def solution(A: Array[Int]): Int = {\n\n        return(A.map(v =&gt; math.abs(v)).distinct.length)\n    }\n}\n</code></pre>\n\n<p>Here's link to <a href=\"https://codility.com/demo/results/training75AZPR-AVK/\" rel=\"nofollow\">test</a>.</p>\n"},{"comments":[{"owner":{"account_id":5265526,"reputation":2568,"user_id":4205652,"accept_rate":100,"display_name":"Richard Erickson"},"score":0,"creation_date":1455043708,"post_id":35299386,"comment_id":58309790,"body_markdown":"welcome to SO and thank you for posting an answer. Please consider expanding it and explaining your code.","body":"welcome to SO and thank you for posting an answer. Please consider expanding it and explaining your code."}],"tags":[],"owner":{"account_id":7807297,"reputation":1,"user_id":5904753,"display_name":"Hassan M"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1455042170,"creation_date":1455042170,"answer_id":35299386,"question_id":5730330,"body_markdown":"    //java code scored 100/100 \r\n    class Solution{\r\n    public int solution(int[] A){\r\n    int distinct = 0;\r\n    Arrays.sort(A);\r\n        if (A.length == 0){\r\n            distinct= 0;\r\n           }\r\n        else{\r\n            distinct= 1;\r\n        }\r\n    \r\n     for(int i=1; i&lt;A.length;i++){\r\n        if(A[i] == A[i-1]){continue;}\r\n        else {\r\n        distinct +=1;\r\n        }\r\n    }\r\n    return distinct;\r\n    }\r\n    public static void main(String[] args){\r\n    int A [] = {2,1,1,2,3,1};\r\n    System.out.println(solution(A));\r\n    \r\n    }\r\n    }","title":"codility absolute distinct count from an array","body":"<pre><code>//java code scored 100/100 \nclass Solution{\npublic int solution(int[] A){\nint distinct = 0;\nArrays.sort(A);\n    if (A.length == 0){\n        distinct= 0;\n       }\n    else{\n        distinct= 1;\n    }\n\n for(int i=1; i&lt;A.length;i++){\n    if(A[i] == A[i-1]){continue;}\n    else {\n    distinct +=1;\n    }\n}\nreturn distinct;\n}\npublic static void main(String[] args){\nint A [] = {2,1,1,2,3,1};\nSystem.out.println(solution(A));\n\n}\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8525433,"reputation":51,"user_id":6391016,"display_name":"Vertigo cache"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1464436104,"creation_date":1464436104,"answer_id":37498601,"question_id":5730330,"body_markdown":"This is my c# solution which got 100/100 for performance and correctness. It provides a simple solution to the problem.\r\n\r\n    using System;\r\n    \r\n    class Solution {\r\n        public int solution(int[] A) {\r\n            int arrLength = A.Length;\r\n            \r\n            Array.Sort(A);\r\n            \r\n            int[] arrNegative = new int[1000002];\r\n            \r\n            int[] arrPositive = new int[1000002];\r\n            \r\n            int i,counter = 0,holder = 0;\r\n            \r\n            bool zero = false;\r\n            \r\n            for (i=0; i &lt; arrLength; i++){     \r\n                if(A[i]&lt;0){\r\n                    holder = Math.Abs(A[i]);\r\n                    if(arrNegative[holder]==0) arrNegative[holder] = holder;   \r\n                }\r\n                else{\r\n                    if(A[i]==0) zero = true;\r\n                    \r\n                    if(arrPositive[A[i]]==0) arrPositive[A[i]] = A[i];\r\n                }\r\n            }\r\n            \r\n            foreach(int c in arrNegative){\r\n                if(c!=0) counter++;\r\n            }\r\n            \r\n            foreach(int c in arrPositive){\r\n                if(c!=0) counter++;\r\n            }\r\n            \r\n            if(zero) counter++;\r\n            \r\n            return counter;\r\n        }\r\n    }","title":"codility absolute distinct count from an array","body":"<p>This is my c# solution which got 100/100 for performance and correctness. It provides a simple solution to the problem.</p>\n\n<pre><code>using System;\n\nclass Solution {\n    public int solution(int[] A) {\n        int arrLength = A.Length;\n\n        Array.Sort(A);\n\n        int[] arrNegative = new int[1000002];\n\n        int[] arrPositive = new int[1000002];\n\n        int i,counter = 0,holder = 0;\n\n        bool zero = false;\n\n        for (i=0; i &lt; arrLength; i++){     \n            if(A[i]&lt;0){\n                holder = Math.Abs(A[i]);\n                if(arrNegative[holder]==0) arrNegative[holder] = holder;   \n            }\n            else{\n                if(A[i]==0) zero = true;\n\n                if(arrPositive[A[i]]==0) arrPositive[A[i]] = A[i];\n            }\n        }\n\n        foreach(int c in arrNegative){\n            if(c!=0) counter++;\n        }\n\n        foreach(int c in arrPositive){\n            if(c!=0) counter++;\n        }\n\n        if(zero) counter++;\n\n        return counter;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1659893,"reputation":189,"user_id":1528378,"display_name":"cimey"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1471341732,"creation_date":1471341732,"answer_id":38971954,"question_id":5730330,"body_markdown":"A more Catterpalistic C# solution with 100/100 score.\r\n\r\nGot tips from below link.\r\nhttps://codesays.com/2014/solution-to-abs-distinct-by-codility/\r\n\r\n     using System;\r\n\r\n    class Solution {\r\n    public int solution(int[] A) {\r\n        // write your code in C# 6.0 with .NET 4.5 (Mono)\r\n        var head = 0; \r\n        var tail = A.Length -1;\r\n        var absCount = 1;\r\n        var current = A[0] &gt; 0 ? A[0] : -A[0];\r\n        while(head &lt;= tail)\r\n        {\r\n            var former = A[head] &gt; 0 ? A[head] : -A[head];\r\n            if(former == current)\r\n            {\r\n                head ++;\r\n                continue;\r\n            }\r\n            \r\n            var latter = A[tail] &gt; 0 ? A[tail] : -A[tail];\r\n            if(latter == current)\r\n            {\r\n                tail--;\r\n                continue;\r\n            }\r\n        \r\n            if(former &gt;= latter)\r\n            {\r\n                current = former;\r\n                head ++;\r\n            }\r\n            else \r\n            {\r\n                current = latter;\r\n                tail--;\r\n            \r\n            }\r\n            \r\n            absCount++;\r\n        }\r\n        \r\n        return absCount;\r\n    }\r\n}","title":"codility absolute distinct count from an array","body":"<p>A more Catterpalistic C# solution with 100/100 score.</p>\n\n<p>Got tips from below link.\n<a href=\"https://codesays.com/2014/solution-to-abs-distinct-by-codility/\" rel=\"nofollow\">https://codesays.com/2014/solution-to-abs-distinct-by-codility/</a></p>\n\n<pre><code> using System;\n\nclass Solution {\npublic int solution(int[] A) {\n    // write your code in C# 6.0 with .NET 4.5 (Mono)\n    var head = 0; \n    var tail = A.Length -1;\n    var absCount = 1;\n    var current = A[0] &gt; 0 ? A[0] : -A[0];\n    while(head &lt;= tail)\n    {\n        var former = A[head] &gt; 0 ? A[head] : -A[head];\n        if(former == current)\n        {\n            head ++;\n            continue;\n        }\n\n        var latter = A[tail] &gt; 0 ? A[tail] : -A[tail];\n        if(latter == current)\n        {\n            tail--;\n            continue;\n        }\n\n        if(former &gt;= latter)\n        {\n            current = former;\n            head ++;\n        }\n        else \n        {\n            current = latter;\n            tail--;\n\n        }\n\n        absCount++;\n    }\n\n    return absCount;\n}\n</code></pre>\n\n<p>}</p>\n"},{"tags":[],"owner":{"account_id":10513148,"reputation":53,"user_id":7748148,"display_name":"Guillermo Abbona"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1595281796,"creation_date":1595281796,"answer_id":63004330,"question_id":5730330,"body_markdown":"Very simple and straightforward with Java 8.\r\n\r\n    return (int) Arrays.stream(A).map(Math::abs)\r\n                .distinct().count();","title":"codility absolute distinct count from an array","body":"<p>Very simple and straightforward with Java 8.</p>\n<pre><code>return (int) Arrays.stream(A).map(Math::abs)\n            .distinct().count();\n</code></pre>\n"},{"comments":[{"owner":{"account_id":6935483,"reputation":1245,"user_id":5323540,"accept_rate":100,"display_name":"TheEsnSiavashi"},"score":0,"creation_date":1691904851,"post_id":65660045,"comment_id":135552565,"body_markdown":"And you don&#39;t even care if its sorted or not. Nice!","body":"And you don&#39;t even care if its sorted or not. Nice!"}],"tags":[],"owner":{"account_id":18957997,"reputation":164,"user_id":13834173,"display_name":"dimi_fn"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1610325742,"creation_date":1610325742,"answer_id":65660045,"question_id":5730330,"body_markdown":"Since there&#39;s also the Python tag in the question asked, below is my simple solution in Python which might be useful to future users, and which gets 100% score, correctness, and performance on Codility:\r\n\r\n    def solution(N):\r\n\r\n      list_of_absolute_values = list(map(lambda x:abs(x), N))\r\n\r\n      return len(set(list_of_absolute_values))\r\n\r\nIn the 1st line of the function, *map()* converts all values to their absolute ones. We then return the number of distinct absolute values via the [set()][1] function which removes duplicates.\r\n\r\n\r\n\r\n\r\n  [1]: https://python-reference.readthedocs.io/en/latest/docs/sets/","title":"codility absolute distinct count from an array","body":"<p>Since there's also the Python tag in the question asked, below is my simple solution in Python which might be useful to future users, and which gets 100% score, correctness, and performance on Codility:</p>\n<pre><code>def solution(N):\n\n  list_of_absolute_values = list(map(lambda x:abs(x), N))\n\n  return len(set(list_of_absolute_values))\n</code></pre>\n<p>In the 1st line of the function, <em>map()</em> converts all values to their absolute ones. We then return the number of distinct absolute values via the <a href=\"https://python-reference.readthedocs.io/en/latest/docs/sets/\" rel=\"nofollow noreferrer\">set()</a> function which removes duplicates.</p>\n"},{"comments":[{"owner":{"account_id":16058888,"reputation":51,"user_id":11590404,"display_name":"Kunal"},"score":0,"creation_date":1623142270,"post_id":67884382,"comment_id":119987986,"body_markdown":"This is the smallest and the most precise answer written in java 8, please mail me if the explanation of each step is needed, I will be happy to share","body":"This is the smallest and the most precise answer written in java 8, please mail me if the explanation of each step is needed, I will be happy to share"}],"tags":[],"owner":{"account_id":16058888,"reputation":51,"user_id":11590404,"display_name":"Kunal"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1623142203,"creation_date":1623142203,"answer_id":67884382,"question_id":5730330,"body_markdown":"  public static int solution(int[] A) {\r\n\t\t  \r\n\t\t  Map&lt;Integer, Long&gt; map= Arrays.stream(A).boxed().collect(Collectors.groupingBy(Function.identity(),Collectors.counting()));\r\n\t\t  int size=map.entrySet().size();\r\n\t\t  return size;\r\n\t    }","title":"codility absolute distinct count from an array","body":"<p>public static int solution(int[] A) {</p>\n<pre><code>      Map&lt;Integer, Long&gt; map= Arrays.stream(A).boxed().collect(Collectors.groupingBy(Function.identity(),Collectors.counting()));\n      int size=map.entrySet().size();\n      return size;\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3173783,"reputation":52223,"user_id":2682142,"display_name":"L&#225;szl&#243; Papp"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1636669650,"creation_date":1636669650,"answer_id":69935702,"question_id":5730330,"body_markdown":"I would like to share the explanation of my algorithm and C++ implementation with you.\r\n\r\n  Caterpillar mathod\r\n\r\n  1. Set the back index to the left end.\r\n  2. Set the front index to the right end.\r\n  3. Skip duplicated values at any point on both ends.\r\n  4. If the absolute value on the left is greater than the absolute value on the right, then increase the back index.\r\n    \r\n  5. If the absolute value on the right is greater than the absolute value on the left, then decrease the front index.\r\n    \r\n  6. If the absolute value on the right equals to the absolute value on the left, then increase the back index and decrease the front index.\r\n\r\n  7. Continue this until we have processed all the elements. This will happen when the last element is processed. This is in worst case when the back and front indices have the same value and/or element. Handle this final element and then exit the iteration. \r\n   \r\n  The runtime complexity is `O(N)` since we go through over each element in the input array.\r\n\r\n  The space complexity is `O(1)` because we do not have any additional array or set, like we would have with the trivial unordered_set solution. So, whilst this approach maintains the same runtime complexity, the space complexity is more efficient.\r\n\r\n    int solution(vector&lt;int&gt; &amp;A)\r\n    {                  \r\n      int N = A.size();           \r\n      int distinct_abs_values = 0;                                             \r\n      for (int back = 0, front = N - 1; back &lt;= front; ++distinct_abs_values) {\r\n        while (back &lt; N - 1 and A[back] == A[back + 1]) ++back;\r\n        while (front &gt; 0 and A[front] == A[front - 1]) --front;\r\n                                         \r\n        const uint64_t eb = abs(A[back]); \r\n        const uint64_t ef = abs(A[front]);\r\n                            \r\n        if (eb &gt; ef) ++back;      \r\n        else if (eb &lt; ef) --front;             \r\n        else if (eb == ef) { ++back; --front; }\r\n      }\r\n                                 \r\n      return distinct_abs_values;\r\n    }","title":"codility absolute distinct count from an array","body":"<p>I would like to share the explanation of my algorithm and C++ implementation with you.</p>\n<p>Caterpillar mathod</p>\n<ol>\n<li><p>Set the back index to the left end.</p>\n</li>\n<li><p>Set the front index to the right end.</p>\n</li>\n<li><p>Skip duplicated values at any point on both ends.</p>\n</li>\n<li><p>If the absolute value on the left is greater than the absolute value on the right, then increase the back index.</p>\n</li>\n<li><p>If the absolute value on the right is greater than the absolute value on the left, then decrease the front index.</p>\n</li>\n<li><p>If the absolute value on the right equals to the absolute value on the left, then increase the back index and decrease the front index.</p>\n</li>\n<li><p>Continue this until we have processed all the elements. This will happen when the last element is processed. This is in worst case when the back and front indices have the same value and/or element. Handle this final element and then exit the iteration.</p>\n</li>\n</ol>\n<p>The runtime complexity is <code>O(N)</code> since we go through over each element in the input array.</p>\n<p>The space complexity is <code>O(1)</code> because we do not have any additional array or set, like we would have with the trivial unordered_set solution. So, whilst this approach maintains the same runtime complexity, the space complexity is more efficient.</p>\n<pre><code>int solution(vector&lt;int&gt; &amp;A)\n{                  \n  int N = A.size();           \n  int distinct_abs_values = 0;                                             \n  for (int back = 0, front = N - 1; back &lt;= front; ++distinct_abs_values) {\n    while (back &lt; N - 1 and A[back] == A[back + 1]) ++back;\n    while (front &gt; 0 and A[front] == A[front - 1]) --front;\n                                     \n    const uint64_t eb = abs(A[back]); \n    const uint64_t ef = abs(A[front]);\n                        \n    if (eb &gt; ef) ++back;      \n    else if (eb &lt; ef) --front;             \n    else if (eb == ef) { ++back; --front; }\n  }\n                             \n  return distinct_abs_values;\n}\n</code></pre>\n"}],"owner":{"account_id":246709,"reputation":1175,"user_id":520989,"accept_rate":83,"display_name":"yahh"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":32545,"favorite_count":0,"down_vote_count":1,"up_vote_count":15,"accepted_answer_id":5730464,"answer_count":35,"score":14,"last_activity_date":1669214845,"creation_date":1303302740,"question_id":5730330,"body_markdown":"so i took the codility interview test yesterday and was informed today that i failed, unfortunately i wasnt given any other information by either codility nor the employer as to where i screwed up so i would appreciate some help in knowing where i went wrong. i know codility pays alot of emphasis on how fast the program runs and how it behaves for large numbers. now i didnt copy paste the questions so this the approx of what i remember\r\n\r\n2. count the number of elements in an array a which are absolute distinct, what it means is if an array had -3 and 3 in it these numbers are not distinct because|-3|=|3|. i think an example would clear it up better\r\n\r\na={-5,-3,0,1,-3}\r\nthe result would be 4 because there are 4 absolute distinct elements in this array.\r\n\r\nThe question also stated that a.length would be &lt;=10000, and most importantly it stated that assume that the **array is sorted in ascending order** but i didnt really understand why we would need it to be sorted\r\n\r\n***IF YOU THINK I MISSED SOMETHING ASK AND I WILL TRY TO CLEAR UP THE QUESTION FURTHER.***\r\n\r\n**here is my code**\r\n\r\n\r\n    import java.util.HashMap;\r\n    import java.util.HashSet;\r\n    import java.util.Set;\r\n    \r\n    \r\n    public class test2 {\r\n    \r\n    \tint test(int[] a){\r\n    \t\tSet&lt;Integer&gt; s=new HashSet&lt;Integer&gt;();\r\n    \t\t\r\n    \t\tfor(int i=0;i&lt;a.length;i++){\r\n    \t\t\ts.add(Math.abs(a[i]));\r\n    \t\t\t\r\n    \t\t}\r\n    \t\treturn s.size();\r\n    \t\t\r\n    \t}\r\n    \t\r\n    \tpublic static void main(String[] args) {\r\n    \t\ttest2 t=new test2();\r\n    \t\tint[] a={1,1,1,2,-1};\r\n    \t\tSystem.out.println(t.test(a));\r\n    \r\n    \t}\r\n    \r\n    }\r\n\r\n","title":"codility absolute distinct count from an array","body":"<p>so i took the codility interview test yesterday and was informed today that i failed, unfortunately i wasnt given any other information by either codility nor the employer as to where i screwed up so i would appreciate some help in knowing where i went wrong. i know codility pays alot of emphasis on how fast the program runs and how it behaves for large numbers. now i didnt copy paste the questions so this the approx of what i remember</p>\n\n<ol>\n<li>count the number of elements in an array a which are absolute distinct, what it means is if an array had -3 and 3 in it these numbers are not distinct because|-3|=|3|. i think an example would clear it up better</li>\n</ol>\n\n<p>a={-5,-3,0,1,-3}\nthe result would be 4 because there are 4 absolute distinct elements in this array.</p>\n\n<p>The question also stated that a.length would be &lt;=10000, and most importantly it stated that assume that the <strong>array is sorted in ascending order</strong> but i didnt really understand why we would need it to be sorted</p>\n\n<p><em><strong>IF YOU THINK I MISSED SOMETHING ASK AND I WILL TRY TO CLEAR UP THE QUESTION FURTHER.</em></strong></p>\n\n<p><strong>here is my code</strong></p>\n\n<pre><code>import java.util.HashMap;\nimport java.util.HashSet;\nimport java.util.Set;\n\n\npublic class test2 {\n\n    int test(int[] a){\n        Set&lt;Integer&gt; s=new HashSet&lt;Integer&gt;();\n\n        for(int i=0;i&lt;a.length;i++){\n            s.add(Math.abs(a[i]));\n\n        }\n        return s.size();\n\n    }\n\n    public static void main(String[] args) {\n        test2 t=new test2();\n        int[] a={1,1,1,2,-1};\n        System.out.println(t.test(a));\n\n    }\n\n}\n</code></pre>\n"},{"tags":["java","apache-poi"],"comments":[{"owner":{"account_id":3284439,"reputation":39734,"user_id":2764255,"accept_rate":50,"display_name":"Nikos Paraskevopoulos"},"score":2,"creation_date":1669217703,"post_id":74548640,"comment_id":131595508,"body_markdown":"I have the impression that you need to quote with double quotes. So the first attempt is wrong because `sFcmName` is unquoted. In the second attmept, replace single quotes with double: `sCellFormula = &quot;IF(B&quot;+iRow+&quot;=\\&quot;&quot;+sFcmName+&quot;\\&quot;,J&quot;+iRow+&quot;-1,J&quot;+iRow+&quot;+F$7-1)&quot;;`","body":"I have the impression that you need to quote with double quotes. So the first attempt is wrong because <code>sFcmName</code> is unquoted. In the second attmept, replace single quotes with double: <code>sCellFormula = &quot;IF(B&quot;+iRow+&quot;=\\&quot;&quot;+sFcmName+&quot;\\&quot;,J&quot;+iRow+&quot;-1,J&quot;+iRow+&quot;+F$7-1)&quot;&zwnj;&#8203;;</code>"},{"owner":{"account_id":350017,"reputation":47555,"user_id":685641,"display_name":"Gagravarr"},"score":2,"creation_date":1669219637,"post_id":74548640,"comment_id":131596253,"body_markdown":"Set the formula you want in Microsoft Excel, save the file, read it back in Apache POI, and see how Excel likes to have it formatted?","body":"Set the formula you want in Microsoft Excel, save the file, read it back in Apache POI, and see how Excel likes to have it formatted?"}],"owner":{"account_id":18529576,"reputation":101,"user_id":13500687,"display_name":"Prashant Naik"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":127,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1669214667,"creation_date":1669214667,"question_id":74548640,"body_markdown":"I am facing one issue when setting cell formula when a string is passed. I am getting below error. I dont know how to fix this error. Any help will be highly appreciated.\r\n\r\n**org.apache.poi.ss.formula.FormulaParseException: Specified named range &#39;Edelweiss&#39; does not exist in the current workbook.**\r\n\r\nBelow is the code snipped. String sFcmName can be anything. I just coded to show the example.\r\n\r\n    String sFcmName = &quot;Edelweiss&quot;;\r\n    cell = currentRow.createCell(iTrialExpiration, CellType.STRING);\r\n    sCellFormula = &quot;IF(B&quot;+iRow+&quot;=&quot;+sFcmName+&quot;,J&quot;+iRow+&quot;-1,J&quot;+iRow+&quot;+F$7-1)&quot;;\r\n    cell.setCellFormula(sCellFormula);\r\n    cell.setCellStyle(dateStyle);\r\n\r\nI even tried the below code. but it gave me some different error.\r\n\r\n**org.apache.poi.ss.formula.FormulaParseException: Parse error near char 7 &#39;&#39;&#39; in specified formula &#39;IF(B21=&#39;Edelweiss&#39;,J21-1,J21+F$7-1)&#39;. Expected number, string, defined name, or data table**\r\n\r\nThis is the below code\r\n    \r\n    String sFcmName = &quot;Edelweiss&quot;;\r\n    cell = currentRow.createCell(iTrialExpiration, CellType.STRING);\r\n    sCellFormula = &quot;IF(B&quot;+iRow+&quot;=&#39;&quot;+sFcmName+&quot;&#39;,J&quot;+iRow+&quot;-1,J&quot;+iRow+&quot;+F$7-1)&quot;;\r\n    cell.setCellFormula(sCellFormula);\r\n    cell.setCellStyle(dateStyle);\r\n\r\n\r\n","title":"java apache poi: how to pass string value to cell formula","body":"<p>I am facing one issue when setting cell formula when a string is passed. I am getting below error. I dont know how to fix this error. Any help will be highly appreciated.</p>\n<p><strong>org.apache.poi.ss.formula.FormulaParseException: Specified named range 'Edelweiss' does not exist in the current workbook.</strong></p>\n<p>Below is the code snipped. String sFcmName can be anything. I just coded to show the example.</p>\n<pre><code>String sFcmName = &quot;Edelweiss&quot;;\ncell = currentRow.createCell(iTrialExpiration, CellType.STRING);\nsCellFormula = &quot;IF(B&quot;+iRow+&quot;=&quot;+sFcmName+&quot;,J&quot;+iRow+&quot;-1,J&quot;+iRow+&quot;+F$7-1)&quot;;\ncell.setCellFormula(sCellFormula);\ncell.setCellStyle(dateStyle);\n</code></pre>\n<p>I even tried the below code. but it gave me some different error.</p>\n<p><strong>org.apache.poi.ss.formula.FormulaParseException: Parse error near char 7 ''' in specified formula 'IF(B21='Edelweiss',J21-1,J21+F$7-1)'. Expected number, string, defined name, or data table</strong></p>\n<p>This is the below code</p>\n<pre><code>String sFcmName = &quot;Edelweiss&quot;;\ncell = currentRow.createCell(iTrialExpiration, CellType.STRING);\nsCellFormula = &quot;IF(B&quot;+iRow+&quot;='&quot;+sFcmName+&quot;',J&quot;+iRow+&quot;-1,J&quot;+iRow+&quot;+F$7-1)&quot;;\ncell.setCellFormula(sCellFormula);\ncell.setCellStyle(dateStyle);\n</code></pre>\n"},{"tags":["java","spring-boot","prometheus","spring-micrometer"],"comments":[{"owner":{"account_id":3281466,"reputation":2250,"user_id":2761985,"accept_rate":38,"display_name":"Jens Baitinger"},"score":0,"creation_date":1669048180,"post_id":74514841,"comment_id":131549079,"body_markdown":"Are you using also `io.micrometer.core.aop.TimedAspect`? And if not, why not?","body":"Are you using also <code>io.micrometer.core.aop.TimedAspect</code>? And if not, why not?"},{"owner":{"account_id":22560169,"reputation":11,"user_id":16747918,"display_name":"Шатов Данил"},"score":0,"creation_date":1669052285,"post_id":74514841,"comment_id":131550492,"body_markdown":"if also add TimedAspect, will be the same error.","body":"if also add TimedAspect, will be the same error."}],"answers":[{"tags":[],"owner":{"account_id":3281466,"reputation":2250,"user_id":2761985,"accept_rate":38,"display_name":"Jens Baitinger"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669214629,"creation_date":1669214629,"answer_id":74548630,"question_id":74514841,"body_markdown":"The problem youre discribing has nothing to do with pointcuts. There is one piece of code that generates a Timer with three tags (`class`, `exception`, `method`) and another one creating the timer with the exact same same with 5 tags (`exception`, `method`, `outcome`, `status`, `uri`) and the framework clearly says, that this is now allowed. \r\n\r\nThere are several possibilites to solve the issue: \r\n\r\n-  simply use another name for the timer (if you need the other one)\r\n-  find the other piece of code that generates that timer and deactivate it. Maybe you need to use the debugger and set an conditional breakpoint in MeterRegistry.register()` that registers the meters with the condition that the meter name matches. \r\n\r\nPS: using the URI as a tag is not a good practice. The issue is that anyone access your service using different URIs (e.g. by just adding a random number) that will end up in a very high number of meters, which will finally kill your prometheus.","title":"Prometheus requires that all meters with the same name have the same set of tag keys","body":"<p>The problem youre discribing has nothing to do with pointcuts. There is one piece of code that generates a Timer with three tags (<code>class</code>, <code>exception</code>, <code>method</code>) and another one creating the timer with the exact same same with 5 tags (<code>exception</code>, <code>method</code>, <code>outcome</code>, <code>status</code>, <code>uri</code>) and the framework clearly says, that this is now allowed.</p>\n<p>There are several possibilites to solve the issue:</p>\n<ul>\n<li>simply use another name for the timer (if you need the other one)</li>\n<li>find the other piece of code that generates that timer and deactivate it. Maybe you need to use the debugger and set an conditional breakpoint in MeterRegistry.register()` that registers the meters with the condition that the meter name matches.</li>\n</ul>\n<p>PS: using the URI as a tag is not a good practice. The issue is that anyone access your service using different URIs (e.g. by just adding a random number) that will end up in a very high number of meters, which will finally kill your prometheus.</p>\n"}],"owner":{"account_id":22560169,"reputation":11,"user_id":16747918,"display_name":"Шатов Данил"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1268,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1669214629,"creation_date":1669010708,"question_id":74514841,"body_markdown":"If @Around only @Timed annotated method like this:   \r\n\r\n package ru.fabit.visor.config.aop;\r\n    \r\n    import io.micrometer.core.annotation.Timed;\r\n    import io.micrometer.core.instrument.MeterRegistry;\r\n    import io.micrometer.core.instrument.Tag;\r\n    import io.micrometer.core.instrument.Tags;\r\n    import io.micrometer.core.instrument.Timer;\r\n    import io.micrometer.core.lang.NonNullApi;\r\n    import org.aspectj.lang.ProceedingJoinPoint;\r\n    import org.aspectj.lang.annotation.Around;\r\n    import org.aspectj.lang.annotation.Aspect;\r\n    import org.aspectj.lang.annotation.Pointcut;\r\n    import org.aspectj.lang.reflect.MethodSignature;\r\n    import org.springframework.cloud.stream.annotation.StreamListener;\r\n    import org.springframework.scheduling.annotation.Scheduled;\r\n    \r\n    import java.lang.reflect.Method;\r\n    import java.util.function.Function;\r\n    \r\n    /**\r\n     * The type Targeted timed aspect.\r\n     */\r\n    @Aspect\r\n    @NonNullApi\r\n    public class TargetedTimedAspect {\r\n    \r\n        public static final String DEFAULT_METRIC_NAME = &quot;method.timed&quot;;\r\n    \r\n        public static final String EXCEPTION_TAG = &quot;exception&quot;;\r\n        public static final String BINDING_TAG = &quot;binding&quot;;\r\n        public static final String SCHEDULED_CRON_TAG = &quot;cron&quot;;\r\n    \r\n        private final MeterRegistry registry;\r\n        private final Function&lt;ProceedingJoinPoint, Iterable&lt;Tag&gt;&gt; tagsBasedOnJoinPoint;\r\n    \r\n        public TargetedTimedAspect(MeterRegistry registry) {\r\n            this(registry, pjp -&gt;\r\n                Tags.of(&quot;class&quot;, pjp.getStaticPart().getSignature().getDeclaringTypeName(),\r\n                    &quot;method&quot;, pjp.getStaticPart().getSignature().getName())\r\n            );\r\n        }\r\n    \r\n        public TargetedTimedAspect(MeterRegistry registry, Function&lt;ProceedingJoinPoint, Iterable&lt;Tag&gt;&gt; tagsBasedOnJoinPoint) {\r\n            this.registry = registry;\r\n            this.tagsBasedOnJoinPoint = tagsBasedOnJoinPoint;\r\n        }\r\n    \r\n        // enable TimedAspect only for @StreamListener and @Scheduled annotated methods or allowed methods pointcut\r\n        @Around(&quot;timedAnnotatedPointcut() )&quot;)\r\n        public Object timedMethod(ProceedingJoinPoint pjp) throws Throwable {\r\n            Method method = ((MethodSignature) pjp.getSignature()).getMethod();\r\n    \r\n            StreamListener streamListener = method.getAnnotation(StreamListener.class);\r\n            Scheduled scheduled = method.getAnnotation(Scheduled.class);\r\n            // timed can be on method or class\r\n            Timed timed = method.getAnnotation(Timed.class);\r\n            if (timed == null) {\r\n                method = pjp.getTarget().getClass().getMethod(method.getName(), method.getParameterTypes());\r\n                timed = method.getAnnotation(Timed.class);\r\n            }\r\n    \r\n            final String metricName = timed.value().isEmpty() ? DEFAULT_METRIC_NAME : timed.value();\r\n            Timer.Sample sample = Timer.start(registry);\r\n            String exceptionClass = &quot;none&quot;;\r\n    \r\n            try {\r\n                return pjp.proceed();\r\n            } catch (Exception ex) {\r\n                exceptionClass = ex.getClass().getSimpleName();\r\n                throw ex;\r\n            } finally {\r\n                try {\r\n                    Timer.Builder timerBuilder = Timer.builder(metricName)\r\n                        .description(timed.description().isEmpty() ? null : timed.description())\r\n                        .tags(timed.extraTags())\r\n                        .tags(EXCEPTION_TAG, exceptionClass)\r\n                        .tags(tagsBasedOnJoinPoint.apply(pjp))\r\n                        .publishPercentileHistogram(timed.histogram())\r\n                        .publishPercentiles(timed.percentiles().length == 0 ? null : timed.percentiles());\r\n    \r\n                    if (streamListener != null) {\r\n                        timerBuilder.tags(\r\n                            BINDING_TAG,\r\n                            streamListener.value().isEmpty() ? streamListener.target() : streamListener.value()\r\n                        );\r\n                    } else if (scheduled != null) {\r\n                        timerBuilder.tags(SCHEDULED_CRON_TAG, scheduled.cron());\r\n                    }\r\n    \r\n                    sample.stop(timerBuilder.register(registry));\r\n                } catch (Exception e) {\r\n                    // ignoring on purpose\r\n                }\r\n            }\r\n        }\r\n    \r\n        @Pointcut(\r\n            &quot;(@annotation(org.springframework.cloud.stream.annotation.StreamListener) ||&quot; +\r\n            &quot;@annotation(org.springframework.scheduling.annotation.Scheduled))&quot;\r\n        )\r\n        public void asyncAnnotatedPointcut() {\r\n            // Method is empty as this is just a Pointcut, the implementations are in the advices.\r\n        }\r\n    \r\n        @Pointcut(&quot;execution(public * ru.fabit.visor.service.impl.StorageClientImpl.*(..)) ||&quot; +\r\n            &quot;execution(public * ru.fabit.visor.service.s3storage.S3StorageClientImpl.*(..))&quot;)\r\n        public void allowedMethodPointcut() {\r\n             // Method is empty as this is just a Pointcut, the implementations are in the advices.\r\n        }\r\n    \r\n        @Pointcut(&quot;@annotation(io.micrometer.core.annotation.Timed)&quot;)\r\n        public void timedAnnotatedPointcut() {\r\n            // Method is empty as this is just a Pointcut, the implementations are in the advices.\r\n        }\r\n    \r\n    }\r\n\r\n\r\nThen return: java.lang.IllegalArgumentException: Prometheus requires that all meters with the same name have the same set of tag keys. There is already an existing meter named &#39;web_photos_gotten_list_seconds&#39; containing tag keys [class, exception, method]. The meter you are attempting to register has keys [exception, method, outcome, status, uri].\r\n\r\n\r\nBut, if add all @Timed method in Pointcut, all good work, i dont understand, why we need all annotated method add to Pointcut separately?\r\n\r\nThis work:\r\n\r\n        package ru.fabit.visor.config.aop;\r\n    \r\n    import io.micrometer.core.annotation.Timed;\r\n    import io.micrometer.core.instrument.MeterRegistry;\r\n    import io.micrometer.core.instrument.Tag;\r\n    import io.micrometer.core.instrument.Tags;\r\n    import io.micrometer.core.instrument.Timer;\r\n    import io.micrometer.core.lang.NonNullApi;\r\n    import org.aspectj.lang.ProceedingJoinPoint;\r\n    import org.aspectj.lang.annotation.Around;\r\n    import org.aspectj.lang.annotation.Aspect;\r\n    import org.aspectj.lang.annotation.Pointcut;\r\n    import org.aspectj.lang.reflect.MethodSignature;\r\n    import org.springframework.cloud.stream.annotation.StreamListener;\r\n    import org.springframework.scheduling.annotation.Scheduled;\r\n    \r\n    import java.lang.reflect.Method;\r\n    import java.util.function.Function;\r\n    \r\n    /**\r\n     * The type Targeted timed aspect.\r\n     */\r\n    @Aspect\r\n    @NonNullApi\r\n    public class TargetedTimedAspect {\r\n    \r\n        public static final String DEFAULT_METRIC_NAME = &quot;method.timed&quot;;\r\n    \r\n        public static final String EXCEPTION_TAG = &quot;exception&quot;;\r\n        public static final String BINDING_TAG = &quot;binding&quot;;\r\n        public static final String SCHEDULED_CRON_TAG = &quot;cron&quot;;\r\n    \r\n        private final MeterRegistry registry;\r\n        private final Function&lt;ProceedingJoinPoint, Iterable&lt;Tag&gt;&gt; tagsBasedOnJoinPoint;\r\n    \r\n        public TargetedTimedAspect(MeterRegistry registry) {\r\n            this(registry, pjp -&gt;\r\n                Tags.of(&quot;class&quot;, pjp.getStaticPart().getSignature().getDeclaringTypeName(),\r\n                    &quot;method&quot;, pjp.getStaticPart().getSignature().getName())\r\n            );\r\n        }\r\n    \r\n        public TargetedTimedAspect(MeterRegistry registry, Function&lt;ProceedingJoinPoint, Iterable&lt;Tag&gt;&gt; tagsBasedOnJoinPoint) {\r\n            this.registry = registry;\r\n            this.tagsBasedOnJoinPoint = tagsBasedOnJoinPoint;\r\n        }\r\n    \r\n        // enable TimedAspect only for @StreamListener and @Scheduled annotated methods or allowed methods pointcut\r\n        @Around(&quot;timedAnnotatedPointcut() &amp;&amp; (asyncAnnotatedPointcut() || allowedMethodPointcut())&quot;)\r\n        public Object timedMethod(ProceedingJoinPoint pjp) throws Throwable {\r\n            Method method = ((MethodSignature) pjp.getSignature()).getMethod();\r\n    \r\n            StreamListener streamListener = method.getAnnotation(StreamListener.class);\r\n            Scheduled scheduled = method.getAnnotation(Scheduled.class);\r\n            // timed can be on method or class\r\n            Timed timed = method.getAnnotation(Timed.class);\r\n            if (timed == null) {\r\n                method = pjp.getTarget().getClass().getMethod(method.getName(), method.getParameterTypes());\r\n                timed = method.getAnnotation(Timed.class);\r\n            }\r\n    \r\n            final String metricName = timed.value().isEmpty() ? DEFAULT_METRIC_NAME : timed.value();\r\n            Timer.Sample sample = Timer.start(registry);\r\n            String exceptionClass = &quot;none&quot;;\r\n    \r\n            try {\r\n                return pjp.proceed();\r\n            } catch (Exception ex) {\r\n                exceptionClass = ex.getClass().getSimpleName();\r\n                throw ex;\r\n            } finally {\r\n                try {\r\n                    Timer.Builder timerBuilder = Timer.builder(metricName)\r\n                        .description(timed.description().isEmpty() ? null : timed.description())\r\n                        .tags(timed.extraTags())\r\n                        .tags(EXCEPTION_TAG, exceptionClass)\r\n                        .tags(tagsBasedOnJoinPoint.apply(pjp))\r\n                        .publishPercentileHistogram(timed.histogram())\r\n                        .publishPercentiles(timed.percentiles().length == 0 ? null : timed.percentiles());\r\n    \r\n                    if (streamListener != null) {\r\n                        timerBuilder.tags(\r\n                            BINDING_TAG,\r\n                            streamListener.value().isEmpty() ? streamListener.target() : streamListener.value()\r\n                        );\r\n                    } else if (scheduled != null) {\r\n                        timerBuilder.tags(SCHEDULED_CRON_TAG, scheduled.cron());\r\n                    }\r\n    \r\n                    sample.stop(timerBuilder.register(registry));\r\n                } catch (Exception e) {\r\n                    // ignoring on purpose\r\n                }\r\n            }\r\n        }\r\n    \r\n        @Pointcut(\r\n            &quot;(@annotation(org.springframework.cloud.stream.annotation.StreamListener) ||&quot; +\r\n            &quot;@annotation(org.springframework.scheduling.annotation.Scheduled))&quot;\r\n        )\r\n        public void asyncAnnotatedPointcut() {\r\n            // Method is empty as this is just a Pointcut, the implementations are in the advices.\r\n        }\r\n    \r\n        @Pointcut(&quot;execution(public * ru.fabit.visor.service.impl.StorageClientImpl.*(..)) ||&quot; +\r\n            &quot;execution(public * ru.fabit.visor.service.s3storage.S3StorageClientImpl.*(..))&quot;)\r\n        public void allowedMethodPointcut() {\r\n             // Method is empty as this is just a Pointcut, the implementations are in the advices.\r\n        }\r\n    \r\n        @Pointcut(&quot;@annotation(io.micrometer.core.annotation.Timed)&quot;)\r\n        public void timedAnnotatedPointcut() {\r\n            // Method is empty as this is just a Pointcut, the implementations are in the advices.\r\n        }\r\n    \r\n    }\r\n\r\npom.xml:\r\n\r\n     &lt;dependency&gt;\r\n                &lt;groupId&gt;io.dropwizard.metrics&lt;/groupId&gt;\r\n                &lt;artifactId&gt;metrics-core&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;io.micrometer&lt;/groupId&gt;\r\n                &lt;artifactId&gt;micrometer-registry-prometheus&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n\r\n","title":"Prometheus requires that all meters with the same name have the same set of tag keys","body":"<p>If @Around only @Timed annotated method like this:</p>\n<p>package ru.fabit.visor.config.aop;</p>\n<pre><code>import io.micrometer.core.annotation.Timed;\nimport io.micrometer.core.instrument.MeterRegistry;\nimport io.micrometer.core.instrument.Tag;\nimport io.micrometer.core.instrument.Tags;\nimport io.micrometer.core.instrument.Timer;\nimport io.micrometer.core.lang.NonNullApi;\nimport org.aspectj.lang.ProceedingJoinPoint;\nimport org.aspectj.lang.annotation.Around;\nimport org.aspectj.lang.annotation.Aspect;\nimport org.aspectj.lang.annotation.Pointcut;\nimport org.aspectj.lang.reflect.MethodSignature;\nimport org.springframework.cloud.stream.annotation.StreamListener;\nimport org.springframework.scheduling.annotation.Scheduled;\n\nimport java.lang.reflect.Method;\nimport java.util.function.Function;\n\n/**\n * The type Targeted timed aspect.\n */\n@Aspect\n@NonNullApi\npublic class TargetedTimedAspect {\n\n    public static final String DEFAULT_METRIC_NAME = &quot;method.timed&quot;;\n\n    public static final String EXCEPTION_TAG = &quot;exception&quot;;\n    public static final String BINDING_TAG = &quot;binding&quot;;\n    public static final String SCHEDULED_CRON_TAG = &quot;cron&quot;;\n\n    private final MeterRegistry registry;\n    private final Function&lt;ProceedingJoinPoint, Iterable&lt;Tag&gt;&gt; tagsBasedOnJoinPoint;\n\n    public TargetedTimedAspect(MeterRegistry registry) {\n        this(registry, pjp -&gt;\n            Tags.of(&quot;class&quot;, pjp.getStaticPart().getSignature().getDeclaringTypeName(),\n                &quot;method&quot;, pjp.getStaticPart().getSignature().getName())\n        );\n    }\n\n    public TargetedTimedAspect(MeterRegistry registry, Function&lt;ProceedingJoinPoint, Iterable&lt;Tag&gt;&gt; tagsBasedOnJoinPoint) {\n        this.registry = registry;\n        this.tagsBasedOnJoinPoint = tagsBasedOnJoinPoint;\n    }\n\n    // enable TimedAspect only for @StreamListener and @Scheduled annotated methods or allowed methods pointcut\n    @Around(&quot;timedAnnotatedPointcut() )&quot;)\n    public Object timedMethod(ProceedingJoinPoint pjp) throws Throwable {\n        Method method = ((MethodSignature) pjp.getSignature()).getMethod();\n\n        StreamListener streamListener = method.getAnnotation(StreamListener.class);\n        Scheduled scheduled = method.getAnnotation(Scheduled.class);\n        // timed can be on method or class\n        Timed timed = method.getAnnotation(Timed.class);\n        if (timed == null) {\n            method = pjp.getTarget().getClass().getMethod(method.getName(), method.getParameterTypes());\n            timed = method.getAnnotation(Timed.class);\n        }\n\n        final String metricName = timed.value().isEmpty() ? DEFAULT_METRIC_NAME : timed.value();\n        Timer.Sample sample = Timer.start(registry);\n        String exceptionClass = &quot;none&quot;;\n\n        try {\n            return pjp.proceed();\n        } catch (Exception ex) {\n            exceptionClass = ex.getClass().getSimpleName();\n            throw ex;\n        } finally {\n            try {\n                Timer.Builder timerBuilder = Timer.builder(metricName)\n                    .description(timed.description().isEmpty() ? null : timed.description())\n                    .tags(timed.extraTags())\n                    .tags(EXCEPTION_TAG, exceptionClass)\n                    .tags(tagsBasedOnJoinPoint.apply(pjp))\n                    .publishPercentileHistogram(timed.histogram())\n                    .publishPercentiles(timed.percentiles().length == 0 ? null : timed.percentiles());\n\n                if (streamListener != null) {\n                    timerBuilder.tags(\n                        BINDING_TAG,\n                        streamListener.value().isEmpty() ? streamListener.target() : streamListener.value()\n                    );\n                } else if (scheduled != null) {\n                    timerBuilder.tags(SCHEDULED_CRON_TAG, scheduled.cron());\n                }\n\n                sample.stop(timerBuilder.register(registry));\n            } catch (Exception e) {\n                // ignoring on purpose\n            }\n        }\n    }\n\n    @Pointcut(\n        &quot;(@annotation(org.springframework.cloud.stream.annotation.StreamListener) ||&quot; +\n        &quot;@annotation(org.springframework.scheduling.annotation.Scheduled))&quot;\n    )\n    public void asyncAnnotatedPointcut() {\n        // Method is empty as this is just a Pointcut, the implementations are in the advices.\n    }\n\n    @Pointcut(&quot;execution(public * ru.fabit.visor.service.impl.StorageClientImpl.*(..)) ||&quot; +\n        &quot;execution(public * ru.fabit.visor.service.s3storage.S3StorageClientImpl.*(..))&quot;)\n    public void allowedMethodPointcut() {\n         // Method is empty as this is just a Pointcut, the implementations are in the advices.\n    }\n\n    @Pointcut(&quot;@annotation(io.micrometer.core.annotation.Timed)&quot;)\n    public void timedAnnotatedPointcut() {\n        // Method is empty as this is just a Pointcut, the implementations are in the advices.\n    }\n\n}\n</code></pre>\n<p>Then return: java.lang.IllegalArgumentException: Prometheus requires that all meters with the same name have the same set of tag keys. There is already an existing meter named 'web_photos_gotten_list_seconds' containing tag keys [class, exception, method]. The meter you are attempting to register has keys [exception, method, outcome, status, uri].</p>\n<p>But, if add all @Timed method in Pointcut, all good work, i dont understand, why we need all annotated method add to Pointcut separately?</p>\n<p>This work:</p>\n<pre><code>    package ru.fabit.visor.config.aop;\n\nimport io.micrometer.core.annotation.Timed;\nimport io.micrometer.core.instrument.MeterRegistry;\nimport io.micrometer.core.instrument.Tag;\nimport io.micrometer.core.instrument.Tags;\nimport io.micrometer.core.instrument.Timer;\nimport io.micrometer.core.lang.NonNullApi;\nimport org.aspectj.lang.ProceedingJoinPoint;\nimport org.aspectj.lang.annotation.Around;\nimport org.aspectj.lang.annotation.Aspect;\nimport org.aspectj.lang.annotation.Pointcut;\nimport org.aspectj.lang.reflect.MethodSignature;\nimport org.springframework.cloud.stream.annotation.StreamListener;\nimport org.springframework.scheduling.annotation.Scheduled;\n\nimport java.lang.reflect.Method;\nimport java.util.function.Function;\n\n/**\n * The type Targeted timed aspect.\n */\n@Aspect\n@NonNullApi\npublic class TargetedTimedAspect {\n\n    public static final String DEFAULT_METRIC_NAME = &quot;method.timed&quot;;\n\n    public static final String EXCEPTION_TAG = &quot;exception&quot;;\n    public static final String BINDING_TAG = &quot;binding&quot;;\n    public static final String SCHEDULED_CRON_TAG = &quot;cron&quot;;\n\n    private final MeterRegistry registry;\n    private final Function&lt;ProceedingJoinPoint, Iterable&lt;Tag&gt;&gt; tagsBasedOnJoinPoint;\n\n    public TargetedTimedAspect(MeterRegistry registry) {\n        this(registry, pjp -&gt;\n            Tags.of(&quot;class&quot;, pjp.getStaticPart().getSignature().getDeclaringTypeName(),\n                &quot;method&quot;, pjp.getStaticPart().getSignature().getName())\n        );\n    }\n\n    public TargetedTimedAspect(MeterRegistry registry, Function&lt;ProceedingJoinPoint, Iterable&lt;Tag&gt;&gt; tagsBasedOnJoinPoint) {\n        this.registry = registry;\n        this.tagsBasedOnJoinPoint = tagsBasedOnJoinPoint;\n    }\n\n    // enable TimedAspect only for @StreamListener and @Scheduled annotated methods or allowed methods pointcut\n    @Around(&quot;timedAnnotatedPointcut() &amp;&amp; (asyncAnnotatedPointcut() || allowedMethodPointcut())&quot;)\n    public Object timedMethod(ProceedingJoinPoint pjp) throws Throwable {\n        Method method = ((MethodSignature) pjp.getSignature()).getMethod();\n\n        StreamListener streamListener = method.getAnnotation(StreamListener.class);\n        Scheduled scheduled = method.getAnnotation(Scheduled.class);\n        // timed can be on method or class\n        Timed timed = method.getAnnotation(Timed.class);\n        if (timed == null) {\n            method = pjp.getTarget().getClass().getMethod(method.getName(), method.getParameterTypes());\n            timed = method.getAnnotation(Timed.class);\n        }\n\n        final String metricName = timed.value().isEmpty() ? DEFAULT_METRIC_NAME : timed.value();\n        Timer.Sample sample = Timer.start(registry);\n        String exceptionClass = &quot;none&quot;;\n\n        try {\n            return pjp.proceed();\n        } catch (Exception ex) {\n            exceptionClass = ex.getClass().getSimpleName();\n            throw ex;\n        } finally {\n            try {\n                Timer.Builder timerBuilder = Timer.builder(metricName)\n                    .description(timed.description().isEmpty() ? null : timed.description())\n                    .tags(timed.extraTags())\n                    .tags(EXCEPTION_TAG, exceptionClass)\n                    .tags(tagsBasedOnJoinPoint.apply(pjp))\n                    .publishPercentileHistogram(timed.histogram())\n                    .publishPercentiles(timed.percentiles().length == 0 ? null : timed.percentiles());\n\n                if (streamListener != null) {\n                    timerBuilder.tags(\n                        BINDING_TAG,\n                        streamListener.value().isEmpty() ? streamListener.target() : streamListener.value()\n                    );\n                } else if (scheduled != null) {\n                    timerBuilder.tags(SCHEDULED_CRON_TAG, scheduled.cron());\n                }\n\n                sample.stop(timerBuilder.register(registry));\n            } catch (Exception e) {\n                // ignoring on purpose\n            }\n        }\n    }\n\n    @Pointcut(\n        &quot;(@annotation(org.springframework.cloud.stream.annotation.StreamListener) ||&quot; +\n        &quot;@annotation(org.springframework.scheduling.annotation.Scheduled))&quot;\n    )\n    public void asyncAnnotatedPointcut() {\n        // Method is empty as this is just a Pointcut, the implementations are in the advices.\n    }\n\n    @Pointcut(&quot;execution(public * ru.fabit.visor.service.impl.StorageClientImpl.*(..)) ||&quot; +\n        &quot;execution(public * ru.fabit.visor.service.s3storage.S3StorageClientImpl.*(..))&quot;)\n    public void allowedMethodPointcut() {\n         // Method is empty as this is just a Pointcut, the implementations are in the advices.\n    }\n\n    @Pointcut(&quot;@annotation(io.micrometer.core.annotation.Timed)&quot;)\n    public void timedAnnotatedPointcut() {\n        // Method is empty as this is just a Pointcut, the implementations are in the advices.\n    }\n\n}\n</code></pre>\n<p>pom.xml:</p>\n<pre><code> &lt;dependency&gt;\n            &lt;groupId&gt;io.dropwizard.metrics&lt;/groupId&gt;\n            &lt;artifactId&gt;metrics-core&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.micrometer&lt;/groupId&gt;\n            &lt;artifactId&gt;micrometer-registry-prometheus&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n</code></pre>\n"},{"tags":["java","selenium","automation","ui-automation","browser-automation"],"answers":[{"tags":[],"owner":{"account_id":6746752,"reputation":298,"user_id":5198144,"display_name":"Pekinek"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1669208320,"creation_date":1669208320,"answer_id":74547191,"question_id":74547050,"body_markdown":"You probably want to use some external library to parse response to Java object, for example [Jackson][1]\r\n\r\nSimple solution (using JsonNode):\r\n\r\n    String jsonString = &quot;{&#39;accountId&#39;: &#39;42515896&#39;}&quot;;\r\n    ObjectMapper mapper = new ObjectMapper();\r\n    JsonNode actualObj = mapper.readTree(jsonString);\r\n    actualObj.get(&quot;accountId&quot;).textValue(); //returns 42515896\r\n    \r\n\r\n  [1]: https://www.baeldung.com/jackson","title":"Is it possible to take element from the API response on Java?","body":"<p>You probably want to use some external library to parse response to Java object, for example <a href=\"https://www.baeldung.com/jackson\" rel=\"nofollow noreferrer\">Jackson</a></p>\n<p>Simple solution (using JsonNode):</p>\n<pre><code>String jsonString = &quot;{'accountId': '42515896'}&quot;;\nObjectMapper mapper = new ObjectMapper();\nJsonNode actualObj = mapper.readTree(jsonString);\nactualObj.get(&quot;accountId&quot;).textValue(); //returns 42515896\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9455787,"reputation":644,"user_id":7031148,"display_name":"Alex Karamfilov"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669214487,"creation_date":1669214487,"answer_id":74548592,"question_id":74547050,"body_markdown":"You can use json path:\r\n```\r\n    public static void main(String[] args) {\r\n        String myJson = &quot;{\\&quot;accountId\\&quot;: \\&quot;42515896\\&quot;}&quot;;\r\n        String accountId = JsonPath.read(myJson, &quot;$.accountId&quot;);\r\n        System.out.println(accountId);\r\n    }\r\n```\r\nDependency:\r\n\r\n```\r\n&lt;!-- https://mvnrepository.com/artifact/com.jayway.jsonpath/json-path --&gt;\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;com.jayway.jsonpath&lt;/groupId&gt;\r\n    &lt;artifactId&gt;json-path&lt;/artifactId&gt;\r\n    &lt;version&gt;2.7.0&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n\r\n```","title":"Is it possible to take element from the API response on Java?","body":"<p>You can use json path:</p>\n<pre><code>    public static void main(String[] args) {\n        String myJson = &quot;{\\&quot;accountId\\&quot;: \\&quot;42515896\\&quot;}&quot;;\n        String accountId = JsonPath.read(myJson, &quot;$.accountId&quot;);\n        System.out.println(accountId);\n    }\n</code></pre>\n<p>Dependency:</p>\n<pre><code>&lt;!-- https://mvnrepository.com/artifact/com.jayway.jsonpath/json-path --&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;com.jayway.jsonpath&lt;/groupId&gt;\n    &lt;artifactId&gt;json-path&lt;/artifactId&gt;\n    &lt;version&gt;2.7.0&lt;/version&gt;\n&lt;/dependency&gt;\n\n</code></pre>\n"}],"owner":{"account_id":21734633,"reputation":19,"user_id":16042806,"display_name":"Danny Fenton"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":198,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":2,"score":0,"last_activity_date":1669214487,"creation_date":1669207674,"question_id":74547050,"body_markdown":"I&#39;m newbie in Java and wanna ask you question. Let&#39;s imagine the situation. I generate account for testing purposes using API and in response I get line e.g. such as:\r\n\r\n```\r\n{\r\n &quot;accountId&quot;: &quot;42515896&quot;\r\n}\r\n```\r\nHow could I write method that will take this &quot;42515896&quot; from the response and insert it into some int variable that I declared before?\r\n\r\n\r\n```\r\npublic class failedAuthorization {\r\n    // created reference variable for WebDriver\r\n    WebDriver driver;\r\n\r\n    @BeforeMethod\r\n    public void setup() {\r\n\r\n        System.setProperty(&quot;webdriver.chrome.driver&quot;,&quot;C:\\\\Users\\\\imagineName.imagineSurname\\\\chromedriver\\\\chromedriver.exe&quot;);\r\n// initializing driver variable using Chrome Driver\r\n        driver=new ChromeDriver();\r\n        driver.manage().deleteAllCookies();\r\n// launching google.com on the browser\r\n        driver.get(&quot;https://login.live.com/&quot;);\r\n// maximized the browser window\r\n        driver.manage().window().maximize();\r\n        driver.manage().timeouts().implicitlyWait(1, TimeUnit.SECONDS);\r\n\r\n    }\r\n```\r\ne.g. I have some API request that generate me account and in response I get data that I will need further to login. How to use generated data?","title":"Is it possible to take element from the API response on Java?","body":"<p>I'm newbie in Java and wanna ask you question. Let's imagine the situation. I generate account for testing purposes using API and in response I get line e.g. such as:</p>\n<pre><code>{\n &quot;accountId&quot;: &quot;42515896&quot;\n}\n</code></pre>\n<p>How could I write method that will take this &quot;42515896&quot; from the response and insert it into some int variable that I declared before?</p>\n<pre><code>public class failedAuthorization {\n    // created reference variable for WebDriver\n    WebDriver driver;\n\n    @BeforeMethod\n    public void setup() {\n\n        System.setProperty(&quot;webdriver.chrome.driver&quot;,&quot;C:\\\\Users\\\\imagineName.imagineSurname\\\\chromedriver\\\\chromedriver.exe&quot;);\n// initializing driver variable using Chrome Driver\n        driver=new ChromeDriver();\n        driver.manage().deleteAllCookies();\n// launching google.com on the browser\n        driver.get(&quot;https://login.live.com/&quot;);\n// maximized the browser window\n        driver.manage().window().maximize();\n        driver.manage().timeouts().implicitlyWait(1, TimeUnit.SECONDS);\n\n    }\n</code></pre>\n<p>e.g. I have some API request that generate me account and in response I get data that I will need further to login. How to use generated data?</p>\n"},{"tags":["java","spring-boot","rest","swagger"],"comments":[{"owner":{"account_id":39252,"reputation":89842,"user_id":113116,"display_name":"Helen"},"score":0,"creation_date":1669213125,"post_id":74547442,"comment_id":131593544,"body_markdown":"You&#39;ll need 2 separate schemas/classes.","body":"You&#39;ll need 2 separate schemas/classes."}],"answers":[{"tags":[],"owner":{"account_id":1722137,"reputation":36,"user_id":13180602,"display_name":"Ela Singh"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669213879,"creation_date":1669213879,"answer_id":74548464,"question_id":74547442,"body_markdown":"You cannot set required on **@ApiModelProperty** with optional condition. You can either have two seperate model or you can use **@ApiParam** on the parameters so that you can specify whether the parameter is required or optional. \r\n\r\nYou can check the usage of @ApiParam here : https://www.baeldung.com/swagger-apiparam-vs-apimodelproperty#:~:text=The%20%40ApiModelProperty%20annotation%20allows%20us,the%20property%20in%20certain%20scenarios.","title":"@ApiModelProperty: set the property &#39;required = true&#39; conditionally","body":"<p>You cannot set required on <strong>@ApiModelProperty</strong> with optional condition. You can either have two seperate model or you can use <strong>@ApiParam</strong> on the parameters so that you can specify whether the parameter is required or optional.</p>\n<p>You can check the usage of @ApiParam here : <a href=\"https://www.baeldung.com/swagger-apiparam-vs-apimodelproperty#:%7E:text=The%20%40ApiModelProperty%20annotation%20allows%20us,the%20property%20in%20certain%20scenarios\" rel=\"nofollow noreferrer\">https://www.baeldung.com/swagger-apiparam-vs-apimodelproperty#:~:text=The%20%40ApiModelProperty%20annotation%20allows%20us,the%20property%20in%20certain%20scenarios</a>.</p>\n"}],"owner":{"account_id":6162914,"reputation":87,"user_id":4803870,"display_name":"Arthur"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":848,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1669213879,"creation_date":1669209575,"question_id":74547442,"body_markdown":"I am trying to implement two endpoints in a spring boot application:\r\n\r\nPOST: api/v1/student\r\n\r\nPUT: api/v1/student/{student_id}\r\n\r\nThe request payload these API takes are same i.e. StudentCreation.java\r\n\r\n```\r\n@Data\r\npublic class StudentCreation {\r\n\r\n\t@ApiModelProperty(required = true)\r\n\tprivate String firstName;\r\n\r\n    @ApiModelProperty(required = true)\r\n\tprivate String lastName;\r\n\r\n\t@ApiModelProperty(required = true)\r\n\tprivate String address;\r\n\r\n}\r\n```\r\n\r\nFor POST endpoint all the fields are required in the payload, but for PUT one the firstName, lastName is optional.\r\n\r\nThe worst case I need to have two different classes for POST and PUT payload requests.\r\nSo, is there any way we can achieve this with a single class i.e. keep the required=true for POST only and required=false for PUT request?\r\n\r\nOr any other better approach is also appreciated.","title":"@ApiModelProperty: set the property &#39;required = true&#39; conditionally","body":"<p>I am trying to implement two endpoints in a spring boot application:</p>\n<p>POST: api/v1/student</p>\n<p>PUT: api/v1/student/{student_id}</p>\n<p>The request payload these API takes are same i.e. StudentCreation.java</p>\n<pre><code>@Data\npublic class StudentCreation {\n\n    @ApiModelProperty(required = true)\n    private String firstName;\n\n    @ApiModelProperty(required = true)\n    private String lastName;\n\n    @ApiModelProperty(required = true)\n    private String address;\n\n}\n</code></pre>\n<p>For POST endpoint all the fields are required in the payload, but for PUT one the firstName, lastName is optional.</p>\n<p>The worst case I need to have two different classes for POST and PUT payload requests.\nSo, is there any way we can achieve this with a single class i.e. keep the required=true for POST only and required=false for PUT request?</p>\n<p>Or any other better approach is also appreciated.</p>\n"},{"tags":["java","android","xml","xpath","vtd-xml"],"comments":[{"owner":{"account_id":733521,"reputation":37853,"user_id":695343,"accept_rate":100,"display_name":"Jens Erat"},"score":0,"creation_date":1374077559,"post_id":17704235,"comment_id":25800562,"body_markdown":"Is a _single_ query taking 3-4 ms or all the ones in that loop together? What does your document look like?","body":"Is a <i>single</i> query taking 3-4 ms or all the ones in that loop together? What does your document look like?"},{"owner":{"account_id":1403299,"reputation":22498,"user_id":1331671,"accept_rate":96,"display_name":"Ron"},"score":0,"creation_date":1374129532,"post_id":17704235,"comment_id":25821334,"body_markdown":"One query takes about 3-4 Seconds(!). My document has one root node and lots of child nodes. No grandchildren.","body":"One query takes about 3-4 Seconds(!). My document has one root node and lots of child nodes. No grandchildren."},{"owner":{"account_id":44242,"reputation":3329,"user_id":129732,"accept_rate":100,"display_name":"vtd-xml-author"},"score":0,"creation_date":1374639928,"post_id":17704235,"comment_id":26014749,"body_markdown":"Ronvcan you add a vtd-xml tag to this question?","body":"Ronvcan you add a vtd-xml tag to this question?"}],"answers":[{"tags":[],"owner":{"account_id":3024185,"reputation":5027,"user_id":2564557,"accept_rate":75,"display_name":"snrlx"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1374135764,"creation_date":1374078261,"answer_id":17705234,"question_id":17704235,"body_markdown":"XPath itself is not very efficient when it comes to iterating through big XML-documents. I myself made the experience that parsing values out of a ~200kb XML-file took around 10 seconds on a low-end device. \r\n\r\nAfter that I reimplemented the parser as a SAXParser and had huge performance increases of around 2 orders of magnitude. So I would propose that you try the SAXParser. It is actually not too hard to implement and there are a couple of tutorials out there.\r\n\r\nThere also exists a question on stackoverflow that deals with the topic of the various parsing methods: [SAX vs. DOM vs. XPath][1]\r\n\r\nI also assume that the evaluation is done in no time when you don&#39;t use NodeSet because it will only look for a single node and return as soon as it has found a matching node.\r\n\r\n**EDIT:**\r\n\r\nParsing the XML-document with SAX means that you iterate through it and store the sought information within objects. Take a look at this tutorial: [SAX Tutorial][2]\r\n\r\nThere the author parses staff information and transforms it into objects so I guess that&#39;s exactly what you need.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/689097/is-xpath-much-more-efficient-as-compared-to-dom-and-sax\r\n  [2]: http://www.mkyong.com/java/how-to-read-xml-file-in-java-sax-parser/","title":"Android - XPath evaluate very slow","body":"<p>XPath itself is not very efficient when it comes to iterating through big XML-documents. I myself made the experience that parsing values out of a ~200kb XML-file took around 10 seconds on a low-end device. </p>\n\n<p>After that I reimplemented the parser as a SAXParser and had huge performance increases of around 2 orders of magnitude. So I would propose that you try the SAXParser. It is actually not too hard to implement and there are a couple of tutorials out there.</p>\n\n<p>There also exists a question on stackoverflow that deals with the topic of the various parsing methods: <a href=\"https://stackoverflow.com/questions/689097/is-xpath-much-more-efficient-as-compared-to-dom-and-sax\">SAX vs. DOM vs. XPath</a></p>\n\n<p>I also assume that the evaluation is done in no time when you don't use NodeSet because it will only look for a single node and return as soon as it has found a matching node.</p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>Parsing the XML-document with SAX means that you iterate through it and store the sought information within objects. Take a look at this tutorial: <a href=\"http://www.mkyong.com/java/how-to-read-xml-file-in-java-sax-parser/\" rel=\"nofollow noreferrer\">SAX Tutorial</a></p>\n\n<p>There the author parses staff information and transforms it into objects so I guess that's exactly what you need.</p>\n"},{"tags":[],"owner":{"account_id":1403299,"reputation":22498,"user_id":1331671,"accept_rate":96,"display_name":"Ron"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1669213834,"creation_date":1374147733,"answer_id":17722485,"question_id":17704235,"body_markdown":"Thanks to @nvrmnd I tried a bit around and found a way better parser:\r\n\r\n[VTD-XML][1]\r\n\r\nHere&#39;s a [example][2] from the devlopers.\r\n\r\nBut this [Tutorial][3] is way better...\r\n\r\n  [1]: http://vtd-xml.sourceforge.net/\r\n  [2]: http://vtd-xml.sourceforge.net/codeSample/cs1.html\r\n  [3]: http://fahdshariff.blogspot.de/2010/08/faster-xpaths-with-vtd-xml.html","title":"Android - XPath evaluate very slow","body":"<p>Thanks to @nvrmnd I tried a bit around and found a way better parser:</p>\n<p><a href=\"http://vtd-xml.sourceforge.net/\" rel=\"nofollow noreferrer\">VTD-XML</a></p>\n<p>Here's a <a href=\"http://vtd-xml.sourceforge.net/codeSample/cs1.html\" rel=\"nofollow noreferrer\">example</a> from the devlopers.</p>\n<p>But this <a href=\"http://fahdshariff.blogspot.de/2010/08/faster-xpaths-with-vtd-xml.html\" rel=\"nofollow noreferrer\">Tutorial</a> is way better...</p>\n"}],"owner":{"account_id":1403299,"reputation":22498,"user_id":1331671,"accept_rate":96,"display_name":"Ron"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2062,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":17722485,"answer_count":2,"score":2,"last_activity_date":1669213834,"creation_date":1374075591,"question_id":17704235,"body_markdown":"I&#39;m using `XPath` to query my `XML-file` which has at the moment about `100KB`.\r\n\r\nI&#39;m iterating of an array and query for every value in the list. \r\n\r\n**Unfortunately a single query takes about 3-4 seconds** under the debugger and slightly less with debugger disabled.\r\n\r\nAny ideas why this is so slow? I use a `Galaxy S2` for testing.\r\n\r\nHere&#39;s my code:\r\n\r\n    XPath xpath = XPathFactory.newInstance().newXPath();\r\n    DocumentBuilderFactory builderFactory = DocumentBuilderFactory.newInstance();\r\n    builderFactory.setNamespaceAware(true);\r\n    DocumentBuilder builder = builderFactory.newDocumentBuilder();\r\n    \r\n    Document document = builder.parse(new File(file_on_internal_sd_url)));\r\n\r\n    int size = mPrefs.getInt(&quot;no_ids&quot;, 0);\r\n    for(int i=0;i&lt;size;i++) {\r\n        String id= mPrefs.getString(&quot;id_&quot; + i, null);\r\n        String expression = &quot;/tag1/tag2[@id = &#39;&quot; + id+ &quot;&#39;]&quot;;\r\n        NodeList nodes = (NodeList) xpath.evaluate(expression, document, XPathConstants.NODESET);\r\n        if(nodes.getLength()&gt;0) {\r\n            myElements.add((Element)nodes.item(0));\r\n        }\r\n    }\r\n\r\n**Update**\r\n\r\nWhen I leave out the `XPathConstants.NODESET` the evalution is done in no time but I don&#39;t get a `NodeList`. It returns an empty string instead...","title":"Android - XPath evaluate very slow","body":"<p>I'm using <code>XPath</code> to query my <code>XML-file</code> which has at the moment about <code>100KB</code>.</p>\n\n<p>I'm iterating of an array and query for every value in the list. </p>\n\n<p><strong>Unfortunately a single query takes about 3-4 seconds</strong> under the debugger and slightly less with debugger disabled.</p>\n\n<p>Any ideas why this is so slow? I use a <code>Galaxy S2</code> for testing.</p>\n\n<p>Here's my code:</p>\n\n<pre><code>XPath xpath = XPathFactory.newInstance().newXPath();\nDocumentBuilderFactory builderFactory = DocumentBuilderFactory.newInstance();\nbuilderFactory.setNamespaceAware(true);\nDocumentBuilder builder = builderFactory.newDocumentBuilder();\n\nDocument document = builder.parse(new File(file_on_internal_sd_url)));\n\nint size = mPrefs.getInt(\"no_ids\", 0);\nfor(int i=0;i&lt;size;i++) {\n    String id= mPrefs.getString(\"id_\" + i, null);\n    String expression = \"/tag1/tag2[@id = '\" + id+ \"']\";\n    NodeList nodes = (NodeList) xpath.evaluate(expression, document, XPathConstants.NODESET);\n    if(nodes.getLength()&gt;0) {\n        myElements.add((Element)nodes.item(0));\n    }\n}\n</code></pre>\n\n<p><strong>Update</strong></p>\n\n<p>When I leave out the <code>XPathConstants.NODESET</code> the evalution is done in no time but I don't get a <code>NodeList</code>. It returns an empty string instead...</p>\n"},{"tags":["java","selenium","getattribute","constraint-validation-api"],"answers":[{"comments":[{"owner":{"account_id":344910,"reputation":7321,"user_id":677518,"display_name":"Ardesco"},"score":0,"creation_date":1561019930,"post_id":56681168,"comment_id":99930048,"body_markdown":"This is massively overcomplicated for little value, selenium already provides a way to get data from WebElement attributes.","body":"This is massively overcomplicated for little value, selenium already provides a way to get data from WebElement attributes."},{"owner":{"account_id":16170777,"reputation":60,"user_id":11674612,"display_name":"SeleniumNT"},"score":1,"creation_date":1561020175,"post_id":56681168,"comment_id":99930170,"body_markdown":"I have faced same scenario, Even value field will not return the entered tax.\nIt will be done by JavascriptExecutor","body":"I have faced same scenario, Even value field will not return the entered tax. It will be done by JavascriptExecutor"},{"owner":{"account_id":344910,"reputation":7321,"user_id":677518,"display_name":"Ardesco"},"score":0,"creation_date":1561021627,"post_id":56681168,"comment_id":99930919,"body_markdown":"The above JavaScript Snippet is returning the value attribute.  This cannot work unless the value attribute has been updated in the DOM which means it does exactly the same thing as the built in selenium functionality.  It&#39;s just additional complexity for absolutely no value.","body":"The above JavaScript Snippet is returning the value attribute.  This cannot work unless the value attribute has been updated in the DOM which means it does exactly the same thing as the built in selenium functionality.  It&#39;s just additional complexity for absolutely no value."},{"owner":{"account_id":16170777,"reputation":60,"user_id":11674612,"display_name":"SeleniumNT"},"score":0,"creation_date":1561026089,"post_id":56681168,"comment_id":99933411,"body_markdown":"i had same scenario.\nemail.getAttribute(&quot;value&quot;); \nthis code doesn&#39;t work in case when there is nothing in Value attribute.","body":"i had same scenario. email.getAttribute(&quot;value&quot;);  this code doesn&#39;t work in case when there is nothing in Value attribute."},{"owner":{"account_id":10049107,"reputation":186647,"user_id":7429447,"accept_rate":86,"display_name":"undetected Selenium"},"score":0,"creation_date":1561026388,"post_id":56681168,"comment_id":99933585,"body_markdown":"@NayanThakor Aren&#39;t you doing the same as in **`arguments[0].value`** in a much more complicated way?","body":"@NayanThakor Aren&#39;t you doing the same as in <b><code>arguments[0].value</code></b> in a much more complicated way?"},{"owner":{"account_id":16170777,"reputation":60,"user_id":11674612,"display_name":"SeleniumNT"},"score":0,"creation_date":1561026583,"post_id":56681168,"comment_id":99933699,"body_markdown":"Unfortunately, arguments[0].value gives me result every time.","body":"Unfortunately, arguments[0].value gives me result every time."}],"tags":[],"owner":{"account_id":16170777,"reputation":60,"user_id":11674612,"display_name":"SeleniumNT"},"comment_count":6,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1561019031,"creation_date":1561016138,"answer_id":56681168,"question_id":56681079,"body_markdown":"Pass your email xpath in this method. You will get entered text\r\n\r\n        public String getTextofInputBox(By by) {\r\n        \r\n        JavascriptExecutor js = (JavascriptExecutor) driver; \r\n        String value = (String)((js).executeScript(&quot;return arguments[0].value&quot;,driver.findElement(by)));\r\n        return value;\r\n    }","title":"How to get the Email/Text entered into a field when there is no &quot;value&quot; attribute or text in the code snippet for Java Selenium","body":"<p>Pass your email xpath in this method. You will get entered text</p>\n\n<pre><code>    public String getTextofInputBox(By by) {\n\n    JavascriptExecutor js = (JavascriptExecutor) driver; \n    String value = (String)((js).executeScript(\"return arguments[0].value\",driver.findElement(by)));\n    return value;\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":9862817,"reputation":5309,"user_id":7305183,"display_name":"Murthi"},"score":0,"creation_date":1561021096,"post_id":56682122,"comment_id":99930647,"body_markdown":"value attribute returns the value only if value attribute is specified in the html DOM. It may not work sometimes. Better we can use javascript executor as in the @Nayan Thakor&#39;s answer","body":"value attribute returns the value only if value attribute is specified in the html DOM. It may not work sometimes. Better we can use javascript executor as in the @Nayan Thakor&#39;s answer"},{"owner":{"account_id":344910,"reputation":7321,"user_id":677518,"display_name":"Ardesco"},"score":0,"creation_date":1561021537,"post_id":56682122,"comment_id":99930872,"body_markdown":"If you type some text into an input element it will set the value attribute in the DOM.  That&#39;s how &lt;input&gt; elements work.  The JavaScript solution below is also reading the value attribute from the DOM.  It&#39;s replicating Selenium functionality.","body":"If you type some text into an input element it will set the value attribute in the DOM.  That&#39;s how &lt;input&gt; elements work.  The JavaScript solution below is also reading the value attribute from the DOM.  It&#39;s replicating Selenium functionality."},{"owner":{"account_id":9862817,"reputation":5309,"user_id":7305183,"display_name":"Murthi"},"score":0,"creation_date":1561021956,"post_id":56682122,"comment_id":99931074,"body_markdown":"It is not case always. it dependent on the developer code. It may not set the value in some application.","body":"It is not case always. it dependent on the developer code. It may not set the value in some application."},{"owner":{"account_id":344910,"reputation":7321,"user_id":677518,"display_name":"Ardesco"},"score":0,"creation_date":1561022763,"post_id":56682122,"comment_id":99931521,"body_markdown":"It is the case for an `&lt;input&gt;` element, this is how they work: https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input#value.  I would agree that you can&#39;t rule out the fact that a developer can purposefully do something totally stupid (just like I can&#39;t guarantee a developer wouldn&#39;t redefine true as false in JavaScript), but in 99.99% of cases it will work and if it doesn&#39;t it&#39;s a bug the developer needs to fix.","body":"It is the case for an <code>&lt;input&gt;</code> element, this is how they work: <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input#value\" rel=\"nofollow noreferrer\">developer.mozilla.org/en-US/docs/Web/HTML/Element/input#valu&zwnj;&#8203;e</a>.  I would agree that you can&#39;t rule out the fact that a developer can purposefully do something totally stupid (just like I can&#39;t guarantee a developer wouldn&#39;t redefine true as false in JavaScript), but in 99.99% of cases it will work and if it doesn&#39;t it&#39;s a bug the developer needs to fix."}],"tags":[],"owner":{"account_id":344910,"reputation":7321,"user_id":677518,"display_name":"Ardesco"},"comment_count":4,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1561019874,"creation_date":1561019874,"answer_id":56682122,"question_id":56681079,"body_markdown":"You are pulling back the wrong attribute, the one you want to use is value:\r\n\r\n    email.getAttribute(&quot;value&quot;);","title":"How to get the Email/Text entered into a field when there is no &quot;value&quot; attribute or text in the code snippet for Java Selenium","body":"<p>You are pulling back the wrong attribute, the one you want to use is value:</p>\n\n<pre><code>email.getAttribute(\"value\");\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10049107,"reputation":186647,"user_id":7429447,"accept_rate":86,"display_name":"undetected Selenium"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1561047056,"creation_date":1561047056,"answer_id":56690032,"question_id":56681079,"body_markdown":"`&lt;input&gt;` element\r\n---------------\r\nAs per the documentation **HTML** [**`&lt;input&gt;`**](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input) **element** is an interactive controls for HTML forms to accept data from the user.\r\n\r\n\r\n----------\r\n\r\n\r\nData validation\r\n--------------------\r\n[Data validation](https://developer.mozilla.org/en-US/docs/Learn/HTML/Forms/Form_validation) helps us to ensure that user have filled in the desired fields in the correct format to ensure that submitted data will be successfully accepted by the Application/Web Server.\r\n\r\nAs per the snapshot:\r\n\r\n[![validate][1]][1]\r\n\r\nThe `&lt;input&gt;` element contains JavaScript validation through the attribute **`data-validate`** which have 2 sub-validations as **`&#39;validate-email&#39;:true`** and **`&#39;required&#39;:true`**. These Javasript validations validates the text entered within the `&lt;input&gt;` field.\r\n\r\nSo once the Javasript validation completes you can extract the text you have entered in the **EMAIL** field i.e. **arjun_123@gmail.com** inducing _WebDriverWait_ using the following solution:\r\n\r\n\tSystem.out.println(new WebDriverWait(driver, 20).until(ExpectedConditions.elementToBeClickable(email).getAttribute(&quot;value&quot;));\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/JoeUR.png","title":"How to get the Email/Text entered into a field when there is no &quot;value&quot; attribute or text in the code snippet for Java Selenium","body":"<h2><code>&lt;input&gt;</code> element</h2>\n\n<p>As per the documentation <strong>HTML</strong> <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input\" rel=\"nofollow noreferrer\"><strong><code>&lt;input&gt;</code></strong></a> <strong>element</strong> is an interactive controls for HTML forms to accept data from the user.</p>\n\n<hr>\n\n<h2>Data validation</h2>\n\n<p><a href=\"https://developer.mozilla.org/en-US/docs/Learn/HTML/Forms/Form_validation\" rel=\"nofollow noreferrer\">Data validation</a> helps us to ensure that user have filled in the desired fields in the correct format to ensure that submitted data will be successfully accepted by the Application/Web Server.</p>\n\n<p>As per the snapshot:</p>\n\n<p><a href=\"https://i.stack.imgur.com/JoeUR.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/JoeUR.png\" alt=\"validate\"></a></p>\n\n<p>The <code>&lt;input&gt;</code> element contains JavaScript validation through the attribute <strong><code>data-validate</code></strong> which have 2 sub-validations as <strong><code>'validate-email':true</code></strong> and <strong><code>'required':true</code></strong>. These Javasript validations validates the text entered within the <code>&lt;input&gt;</code> field.</p>\n\n<p>So once the Javasript validation completes you can extract the text you have entered in the <strong>EMAIL</strong> field i.e. <strong>arjun_123@gmail.com</strong> inducing <em>WebDriverWait</em> using the following solution:</p>\n\n<pre><code>System.out.println(new WebDriverWait(driver, 20).until(ExpectedConditions.elementToBeClickable(email).getAttribute(\"value\"));\n</code></pre>\n"}],"owner":{"account_id":2437205,"reputation":341,"user_id":2126805,"accept_rate":89,"display_name":"Arjun"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":624,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":3,"score":0,"last_activity_date":1669213740,"creation_date":1561015793,"question_id":56681079,"body_markdown":"I want to Get the email id entered &quot;arjun_123@gmail.com&quot; using java code. \r\nI tried the below codes, but it always returned null. \r\n\r\nWhat I really need is, I want to check whether email is successfully entered or not. Sometimes, email is not getting entered.  So I want to check whether field is empty or not and retrieve the text entered.    \r\n\r\n    email.getAttribute(&quot;innerText&quot;);\r\n    email.getAttribute(&quot;innerHTML&quot;);\r\n    email.getAttribute(&quot;textContent&quot;);\r\n    email.getText();\r\n\r\n\r\n[![code snippet][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/4DmQA.jpg","title":"How to get the Email/Text entered into a field when there is no &quot;value&quot; attribute or text in the code snippet for Java Selenium","body":"<p>I want to Get the email id entered \"arjun_123@gmail.com\" using java code. \nI tried the below codes, but it always returned null. </p>\n\n<p>What I really need is, I want to check whether email is successfully entered or not. Sometimes, email is not getting entered.  So I want to check whether field is empty or not and retrieve the text entered.    </p>\n\n<pre><code>email.getAttribute(\"innerText\");\nemail.getAttribute(\"innerHTML\");\nemail.getAttribute(\"textContent\");\nemail.getText();\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/4DmQA.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/4DmQA.jpg\" alt=\"code snippet\"></a></p>\n"},{"tags":["java","android","rx-java","rx-android"],"comments":[{"owner":{"account_id":24127,"reputation":69392,"user_id":61158,"accept_rate":98,"display_name":"akarnokd"},"score":0,"creation_date":1669205613,"post_id":74544537,"comment_id":131590774,"body_markdown":"It&#39;s `fromIterable` in RxJava 3.","body":"It&#39;s <code>fromIterable</code> in RxJava 3."},{"owner":{"account_id":26699892,"reputation":1,"user_id":20307135,"display_name":"Andrei Aleksandrov"},"score":0,"creation_date":1669213385,"post_id":74544537,"comment_id":131593661,"body_markdown":"Yeah, okay, but it doesn&#39;t really work because it defeats the purpose of the async execution. If I&#39;m getting results after all the tasks are finished, I might as well just run it on the main thread. The question is more about how to keep track of the process so I could execute onComplete after all the tasks are finished","body":"Yeah, okay, but it doesn&#39;t really work because it defeats the purpose of the async execution. If I&#39;m getting results after all the tasks are finished, I might as well just run it on the main thread. The question is more about how to keep track of the process so I could execute onComplete after all the tasks are finished"}],"owner":{"account_id":26699892,"reputation":1,"user_id":20307135,"display_name":"Andrei Aleksandrov"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":255,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1669213628,"creation_date":1669196054,"question_id":74544537,"body_markdown":"I have multiple tasks, each being executed on `Schedulers.newThread()`. The task is a method, which returns `Observable&lt;Long&gt;`.\r\n\r\nThe overall structure looks like this:\r\n\r\n```\r\npublic void createAndPerformOperations(int mDataStructureSize, int operationsAmount) {\r\n    disposables.add(Single.fromCallable(() -&gt;\r\n                    (new OperationsFactory()).getOperations((new DataStructureFactory()).getMaps(mDataStructureSize)))\r\n            .subscribeOn(Schedulers.newThread())\r\n            .observeOn(AndroidSchedulers.mainThread())\r\n            .subscribe(operations -&gt; {\r\n                for (int i = 0; i &lt; operations.size(); i++) {\r\n                    performOperation(operations.get(i), i, operationsAmount);\r\n                }\r\n            }));\r\n}\r\n\r\nprivate void performOperation(Operation operation, int id, int operationsAmount) {\r\n    disposables.add(Observable.defer(() -&gt; operation\r\n                    .executeAndReturnUptime(operationsAmount))\r\n            .subscribeOn(Schedulers.newThread())\r\n            .observeOn(AndroidSchedulers.mainThread())\r\n            .subscribe(upTime -&gt; uptimeStream.onNext(new Pair&lt;&gt;(id, upTime))));\r\n}\r\n```\r\n\r\nThe `uptimeStream` is a PublishSubject, which is observed in a Fragment.\r\nI need to somehow call the PublishSubject&#39;s observer onComplete method, but only when all tasks are finished and all Pairs are consumed. \r\n\r\nAlthough the amount of tasks is known, I&#39;m trying to avoid implementing any type of hardcoded counter for consumed items, since the code should be reusable if that amount changes. I&#39;ve tried calling onComplete method directly from different places, but nothing seems to really work. The main problem is that I don&#39;t need just a confirmation that all tasks are finished, but I also need to process all the values in the parent Fragment\r\n\r\nI&#39;m fine with removing PublishSubject in general, if other solution works.\r\n\r\nUPD: I&#39;m aware of [this solution][1], but I can&#39;t find `Observable.from` in RXJava 3, and [in this solution][2] `.zip()` doesn&#39;t work for me, since I can&#39;t manually list all the observables + need to include ID field besides the actual return value\r\n\r\nUPD2: I deleted the HashMap thing because I&#39;ve got to thinking, and the main point here is to still get the results one by one, and execute only onComplete after the tasks are completed. So the solution with `fromIterable` does not really fit there. \r\n\r\n  [1]: https://stackoverflow.com/a/35365371/20307135\r\n  [2]: https://stackoverflow.com/a/35363084/20307135","title":"How to wait for completion of multiple Observables in RXJava?","body":"<p>I have multiple tasks, each being executed on <code>Schedulers.newThread()</code>. The task is a method, which returns <code>Observable&lt;Long&gt;</code>.</p>\n<p>The overall structure looks like this:</p>\n<pre><code>public void createAndPerformOperations(int mDataStructureSize, int operationsAmount) {\n    disposables.add(Single.fromCallable(() -&gt;\n                    (new OperationsFactory()).getOperations((new DataStructureFactory()).getMaps(mDataStructureSize)))\n            .subscribeOn(Schedulers.newThread())\n            .observeOn(AndroidSchedulers.mainThread())\n            .subscribe(operations -&gt; {\n                for (int i = 0; i &lt; operations.size(); i++) {\n                    performOperation(operations.get(i), i, operationsAmount);\n                }\n            }));\n}\n\nprivate void performOperation(Operation operation, int id, int operationsAmount) {\n    disposables.add(Observable.defer(() -&gt; operation\n                    .executeAndReturnUptime(operationsAmount))\n            .subscribeOn(Schedulers.newThread())\n            .observeOn(AndroidSchedulers.mainThread())\n            .subscribe(upTime -&gt; uptimeStream.onNext(new Pair&lt;&gt;(id, upTime))));\n}\n</code></pre>\n<p>The <code>uptimeStream</code> is a PublishSubject, which is observed in a Fragment.\nI need to somehow call the PublishSubject's observer onComplete method, but only when all tasks are finished and all Pairs are consumed.</p>\n<p>Although the amount of tasks is known, I'm trying to avoid implementing any type of hardcoded counter for consumed items, since the code should be reusable if that amount changes. I've tried calling onComplete method directly from different places, but nothing seems to really work. The main problem is that I don't need just a confirmation that all tasks are finished, but I also need to process all the values in the parent Fragment</p>\n<p>I'm fine with removing PublishSubject in general, if other solution works.</p>\n<p>UPD: I'm aware of <a href=\"https://stackoverflow.com/a/35365371/20307135\">this solution</a>, but I can't find <code>Observable.from</code> in RXJava 3, and <a href=\"https://stackoverflow.com/a/35363084/20307135\">in this solution</a> <code>.zip()</code> doesn't work for me, since I can't manually list all the observables + need to include ID field besides the actual return value</p>\n<p>UPD2: I deleted the HashMap thing because I've got to thinking, and the main point here is to still get the results one by one, and execute only onComplete after the tasks are completed. So the solution with <code>fromIterable</code> does not really fit there.</p>\n"},{"tags":["java","java-stream","reduce"],"answers":[{"comments":[{"owner":{"account_id":8324875,"reputation":11755,"user_id":6413377,"accept_rate":25,"display_name":"pirho"},"score":0,"creation_date":1669221588,"post_id":74548278,"comment_id":131596969,"body_markdown":"Exactly. Spending some time with documentation reveals this. I should have used reduce without identity which returns Optional. I was stuck with the binary operator idea which might have been a solution also :)","body":"Exactly. Spending some time with documentation reveals this. I should have used reduce without identity which returns Optional. I was stuck with the binary operator idea which might have been a solution also :)"}],"tags":[],"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1669213563,"creation_date":1669213187,"answer_id":74548278,"question_id":74548124,"body_markdown":"You shouldn&#39;t use `null` as the identity element. The `reduce` method with identity can be regarded as this:\r\n\r\n```\r\nBigDecimal result = identity;\r\nfor (BigDecimal value : list) {\r\n    result = result.add(value);\r\n}\r\n```\r\nAs you see, if the identity is `nul`, you will get a `NullPointerException`. That&#39;s exactly what I got when I tried your code.\r\n\r\n----------\r\n\r\nThe identity value has an important rule though. For an operation `f`, the identity value should be such that, for each value `x`, `f.apply(identity, x)` equals `x`. If it doesn&#39;t, you can get some odd results. For instance:\r\n\r\n```\r\nBigDecimal result1 = Stream.of(BigDecimal.ONE, BigDecimal.TEN)\r\n        .reduce(BigDecimal.ONE, BigDecimal::add);\r\n// result1 is 1 (identity) + 1 (first value) + 10 (second value), so 12\r\n\r\nBigDecimal result2 = Stream.of(BigDecimal.ONE, BigDecimal.TEN)\r\n        .parallel()\r\n        .reduce(BigDecimal.ONE, BigDecimal::add);\r\n// result2 is (1 (identity) + 1 (first value)) + (1 (identity) + 10 (second value)), so 13\r\n\r\nBigDecimal result3 = Stream.of(BigDecimal.ONE, BigDecimal.TEN)\r\n        .parallel()\r\n        .reduce(BigDecimal.ZERO, BigDecimal::add)\r\n        .add(BigDecimal.ONE);\r\n// result3 is (0 (identity) + 1 (first value)) + (0 (identity) + 10 (second value)) + 1, so 12\r\n```\r\nThe reason for this is that, as soon as you go parallel, the stream is split into parts, each part gets reduced on its own, and then the results of the parts are combined using the operator.\r\n\r\n----------\r\n\r\nIf you want to get `null` as result for empty streams, use the `reduce` method without identity:\r\n\r\n```\r\nlist.stream()\r\n        .filter(Objects::nonNull)\r\n        .reduce(BigDecimal::add) // returns Optional&lt;BigDecimal&gt;\r\n        .orElse(null);\r\n```","title":"Obtaining NULL as default value with Java Stream reduce when all items are null still getting non null when some items are non null","body":"<p>You shouldn't use <code>null</code> as the identity element. The <code>reduce</code> method with identity can be regarded as this:</p>\n<pre><code>BigDecimal result = identity;\nfor (BigDecimal value : list) {\n    result = result.add(value);\n}\n</code></pre>\n<p>As you see, if the identity is <code>nul</code>, you will get a <code>NullPointerException</code>. That's exactly what I got when I tried your code.</p>\n<hr />\n<p>The identity value has an important rule though. For an operation <code>f</code>, the identity value should be such that, for each value <code>x</code>, <code>f.apply(identity, x)</code> equals <code>x</code>. If it doesn't, you can get some odd results. For instance:</p>\n<pre><code>BigDecimal result1 = Stream.of(BigDecimal.ONE, BigDecimal.TEN)\n        .reduce(BigDecimal.ONE, BigDecimal::add);\n// result1 is 1 (identity) + 1 (first value) + 10 (second value), so 12\n\nBigDecimal result2 = Stream.of(BigDecimal.ONE, BigDecimal.TEN)\n        .parallel()\n        .reduce(BigDecimal.ONE, BigDecimal::add);\n// result2 is (1 (identity) + 1 (first value)) + (1 (identity) + 10 (second value)), so 13\n\nBigDecimal result3 = Stream.of(BigDecimal.ONE, BigDecimal.TEN)\n        .parallel()\n        .reduce(BigDecimal.ZERO, BigDecimal::add)\n        .add(BigDecimal.ONE);\n// result3 is (0 (identity) + 1 (first value)) + (0 (identity) + 10 (second value)) + 1, so 12\n</code></pre>\n<p>The reason for this is that, as soon as you go parallel, the stream is split into parts, each part gets reduced on its own, and then the results of the parts are combined using the operator.</p>\n<hr />\n<p>If you want to get <code>null</code> as result for empty streams, use the <code>reduce</code> method without identity:</p>\n<pre><code>list.stream()\n        .filter(Objects::nonNull)\n        .reduce(BigDecimal::add) // returns Optional&lt;BigDecimal&gt;\n        .orElse(null);\n</code></pre>\n"}],"owner":{"account_id":8324875,"reputation":11755,"user_id":6413377,"accept_rate":25,"display_name":"pirho"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":118,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"accepted_answer_id":74548278,"answer_count":1,"score":-2,"last_activity_date":1669213563,"creation_date":1669212500,"question_id":74548124,"body_markdown":"My example is about BigDecimal but might apply to other reducable (summable) classes also.\r\n\r\n    @Test\r\n    void streamWithNullsTest() {\r\n      final var list = new ArrayList&lt;BigDecimal&gt;();\r\n      // Ok, gives seed null for empty list\r\n      assertNull(list.stream().reduce(null, BigDecimal::add));\r\n\r\n      // Ok, gives seed 1 for empty list\r\n      assertEquals(BigDecimal.ONE, list.stream().filter(Objects::nonNull).reduce(BigDecimal.ONE, BigDecimal::add));\r\n      \r\n      // Ok, if nulls filtered, gives seed null.\r\n      list.add(null);\r\n      assertNull(list.stream().filter(Objects::nonNull).reduce(null, BigDecimal::add));\r\n  \r\n      // Ok, if nulls filtered, gives seed 1.\r\n      assertEquals(BigDecimal.ONE, list.stream().filter(Objects::nonNull).reduce(BigDecimal.ONE, BigDecimal::add));\r\n  \r\n      // Not ok, because seems to add BigDecimal.ONE to seed null?\r\n      // Need a null if all items are null or sum if any ot items is not null\r\n      list.add(BigDecimal.ONE);\r\n      assertNull(list.stream().filter(Objects::nonNull).reduce(null, BigDecimal::add));\r\n    }\r\n\r\nSo the last one is the problem. I guess I should implement some sort of reducer function (maybe with generics to apply other classes also) or so but is there any other way?\r\n","title":"Obtaining NULL as default value with Java Stream reduce when all items are null still getting non null when some items are non null","body":"<p>My example is about BigDecimal but might apply to other reducable (summable) classes also.</p>\n<pre><code>@Test\nvoid streamWithNullsTest() {\n  final var list = new ArrayList&lt;BigDecimal&gt;();\n  // Ok, gives seed null for empty list\n  assertNull(list.stream().reduce(null, BigDecimal::add));\n\n  // Ok, gives seed 1 for empty list\n  assertEquals(BigDecimal.ONE, list.stream().filter(Objects::nonNull).reduce(BigDecimal.ONE, BigDecimal::add));\n  \n  // Ok, if nulls filtered, gives seed null.\n  list.add(null);\n  assertNull(list.stream().filter(Objects::nonNull).reduce(null, BigDecimal::add));\n\n  // Ok, if nulls filtered, gives seed 1.\n  assertEquals(BigDecimal.ONE, list.stream().filter(Objects::nonNull).reduce(BigDecimal.ONE, BigDecimal::add));\n\n  // Not ok, because seems to add BigDecimal.ONE to seed null?\n  // Need a null if all items are null or sum if any ot items is not null\n  list.add(BigDecimal.ONE);\n  assertNull(list.stream().filter(Objects::nonNull).reduce(null, BigDecimal::add));\n}\n</code></pre>\n<p>So the last one is the problem. I guess I should implement some sort of reducer function (maybe with generics to apply other classes also) or so but is there any other way?</p>\n"},{"tags":["python","java","jdbc","sybase","jaydebeapi"],"answers":[{"tags":[],"owner":{"account_id":8244213,"reputation":306,"user_id":6200901,"display_name":"Stykes"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1661707643,"creation_date":1661707643,"answer_id":73520769,"question_id":73514224,"body_markdown":"I fixed the problem by adding several file paths to the `$CLASSPATH` variable and ensuring that the environment variables were present in the script. Ultimately, I needed more than one file added to `$CLASSPATH`. Solution below (your file paths will obviously differ)\r\n\r\n```python\r\nos.environ[&#39;Path&#39;] = os.environ[&#39;Path&#39;]+f&#39;;D:\\\\Users\\\\{user}\\\\Sybase\\\\IQ-16_0\\\\Bin32&#39;\r\nos.environ[&#39;JAVA_HOME&#39;] = &#39;C:\\\\Program Files\\\\Microsoft\\\\jdk-11.0.15.10-hotspot&#39;\r\nos.environ[&#39;CLASSPATH&#39;] = (f&#39;D:\\\\Users\\\\{user}\\\\Sybase\\\\IQ-16_0\\\\Java\\\\sajdbc4.jar;&#39;+\r\nf&#39;D:\\\\Users\\\\{user}\\\\Sybase\\\\IQ-16_0\\\\Bin32\\\\dbjdbc16.dll;&#39;+\r\nf&#39;D:\\\\Users\\\\{user}\\\\Sybase\\\\jConnect-7_0\\\\classes\\\\jconn4.jar;&#39;+\r\nf&#39;D:\\\\Users\\\\{user}\\\\Sybase\\\\jConnect-7_0\\\\devclasses\\\\jconn4.jar&#39;)\r\n```","title":"jaydebeapi.connect always returning: &quot;TypeError: Class sajdbc4.jar is not found&quot;","body":"<p>I fixed the problem by adding several file paths to the <code>$CLASSPATH</code> variable and ensuring that the environment variables were present in the script. Ultimately, I needed more than one file added to <code>$CLASSPATH</code>. Solution below (your file paths will obviously differ)</p>\n<pre class=\"lang-py prettyprint-override\"><code>os.environ['Path'] = os.environ['Path']+f';D:\\\\Users\\\\{user}\\\\Sybase\\\\IQ-16_0\\\\Bin32'\nos.environ['JAVA_HOME'] = 'C:\\\\Program Files\\\\Microsoft\\\\jdk-11.0.15.10-hotspot'\nos.environ['CLASSPATH'] = (f'D:\\\\Users\\\\{user}\\\\Sybase\\\\IQ-16_0\\\\Java\\\\sajdbc4.jar;'+\nf'D:\\\\Users\\\\{user}\\\\Sybase\\\\IQ-16_0\\\\Bin32\\\\dbjdbc16.dll;'+\nf'D:\\\\Users\\\\{user}\\\\Sybase\\\\jConnect-7_0\\\\classes\\\\jconn4.jar;'+\nf'D:\\\\Users\\\\{user}\\\\Sybase\\\\jConnect-7_0\\\\devclasses\\\\jconn4.jar')\n</code></pre>\n"},{"tags":[],"owner":{"account_id":24277841,"reputation":1,"user_id":18224885,"display_name":"sifirbinard"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669213532,"creation_date":1669040859,"answer_id":74520467,"question_id":73514224,"body_markdown":"For me, the solution was to copy jconn4.jar to &quot;&lt;JAVA_HOME&gt;/jre/lib/ext&quot;","title":"jaydebeapi.connect always returning: &quot;TypeError: Class sajdbc4.jar is not found&quot;","body":"<p>For me, the solution was to copy jconn4.jar to &quot;&lt;JAVA_HOME&gt;/jre/lib/ext&quot;</p>\n"}],"owner":{"account_id":8244213,"reputation":306,"user_id":6200901,"display_name":"Stykes"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":939,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73520769,"answer_count":2,"score":1,"last_activity_date":1669213532,"creation_date":1661632225,"question_id":73514224,"body_markdown":"I am trying to use the [jaydebeapi][1] python package to create a jdbc database connection, but no matter what argument I put in the `connect` method I get the same error: &quot;TypeError: Class [first_argurment_str] is not found&quot;\r\n\r\n    import jaydebeapi\r\n    \r\n    conn = jaydebeapi.connect(&#39;sajdbc4.jar&#39;, connectionString,[userName, Password])\r\n\r\nI tried adding jar files to the directory, and referring directly to the paths in `$CLASSPATH` neither changed the error. \r\n\r\nOriginally, I was trying to connect to a [Sybase][2] database, but I&#39;d settle for anything at this point. \r\n\r\nFull Error Text: \r\n\r\n        File &quot;H:\\Data-Sources\\Connection-Examples\\Sybase\\jayBeaOnly.py&quot;, line 2, in &lt;module&gt;\r\n        conn = jaydebeapi.connect(&quot;org.hsqldb.jdbcDriver&quot;,\r\n        File &quot;C:\\Users\\username\\AppData\\Roaming\\Python\\Python39\\site-packages\\jaydebeapi\\__init__.py&quot;, line 412, in connect\r\n        jconn = _jdbc_connect(jclassname, url, driver_args, jars, libs)\r\n        File &quot;C:\\Users\\username\\AppData\\Roaming\\Python\\Python39\\site-packages\\jaydebeapi\\__init__.py&quot;, line 221, in _jdbc_connect_jpype\r\n    jpype.JClass(jclassname)\r\n        File &quot;C:\\Users\\username\\AppData\\Roaming\\Python\\Python39\\site-packages\\jpype\\_jclass.py&quot;, line 99, in __new__\r\n    return _jpype._getClass(jc)\r\n        TypeError: Class org.hsqldb.jdbcDriver is not found\r\n\r\npython 3.9;\r\n\r\nWindows 10; \r\n\r\nJayDeBeApi 1.2.3;\r\n\r\nopenjdk version &quot;1.8.0_332&quot;\r\n\r\n  [1]: https://pypi.org/project/JayDeBeApi/\r\n  [2]: https://infocenter.sybase.com/help/index.jsp?topic=/com.sybase.infocenter.dc01776.1600/doc/html/san1357754910584.html\r\n\r\n","title":"jaydebeapi.connect always returning: &quot;TypeError: Class sajdbc4.jar is not found&quot;","body":"<p>I am trying to use the <a href=\"https://pypi.org/project/JayDeBeApi/\" rel=\"nofollow noreferrer\">jaydebeapi</a> python package to create a jdbc database connection, but no matter what argument I put in the <code>connect</code> method I get the same error: &quot;TypeError: Class [first_argurment_str] is not found&quot;</p>\n<pre><code>import jaydebeapi\n\nconn = jaydebeapi.connect('sajdbc4.jar', connectionString,[userName, Password])\n</code></pre>\n<p>I tried adding jar files to the directory, and referring directly to the paths in <code>$CLASSPATH</code> neither changed the error.</p>\n<p>Originally, I was trying to connect to a <a href=\"https://infocenter.sybase.com/help/index.jsp?topic=/com.sybase.infocenter.dc01776.1600/doc/html/san1357754910584.html\" rel=\"nofollow noreferrer\">Sybase</a> database, but I'd settle for anything at this point.</p>\n<p>Full Error Text:</p>\n<pre><code>    File &quot;H:\\Data-Sources\\Connection-Examples\\Sybase\\jayBeaOnly.py&quot;, line 2, in &lt;module&gt;\n    conn = jaydebeapi.connect(&quot;org.hsqldb.jdbcDriver&quot;,\n    File &quot;C:\\Users\\username\\AppData\\Roaming\\Python\\Python39\\site-packages\\jaydebeapi\\__init__.py&quot;, line 412, in connect\n    jconn = _jdbc_connect(jclassname, url, driver_args, jars, libs)\n    File &quot;C:\\Users\\username\\AppData\\Roaming\\Python\\Python39\\site-packages\\jaydebeapi\\__init__.py&quot;, line 221, in _jdbc_connect_jpype\njpype.JClass(jclassname)\n    File &quot;C:\\Users\\username\\AppData\\Roaming\\Python\\Python39\\site-packages\\jpype\\_jclass.py&quot;, line 99, in __new__\nreturn _jpype._getClass(jc)\n    TypeError: Class org.hsqldb.jdbcDriver is not found\n</code></pre>\n<p>python 3.9;</p>\n<p>Windows 10;</p>\n<p>JayDeBeApi 1.2.3;</p>\n<p>openjdk version &quot;1.8.0_332&quot;</p>\n"},{"tags":["java","hibernate"],"comments":[{"owner":{"account_id":9571720,"reputation":6305,"user_id":7109162,"accept_rate":84,"display_name":"XtremeBaumer"},"score":3,"creation_date":1669042050,"post_id":74520539,"comment_id":131546674,"body_markdown":"`session.createQuery(&quot;FROM customers&quot;)` your entity is not called `customers` it is called `QLKH_DTO`","body":"<code>session.createQuery(&quot;FROM customers&quot;)</code> your entity is not called <code>customers</code> it is called <code>QLKH_DTO</code>"},{"owner":{"account_id":22634806,"reputation":117,"user_id":16811742,"display_name":"Ni No"},"score":0,"creation_date":1669042121,"post_id":74520539,"comment_id":131546708,"body_markdown":"The QLKH_DTO mapping to &quot;customers&quot; in database","body":"The QLKH_DTO mapping to &quot;customers&quot; in database"},{"owner":{"account_id":9571720,"reputation":6305,"user_id":7109162,"accept_rate":84,"display_name":"XtremeBaumer"},"score":0,"creation_date":1669042156,"post_id":74520539,"comment_id":131546724,"body_markdown":"Hibernate doesn&#39;t care about what its called in the database. It cares about your code","body":"Hibernate doesn&#39;t care about what its called in the database. It cares about your code"},{"owner":{"account_id":22634806,"reputation":117,"user_id":16811742,"display_name":"Ni No"},"score":0,"creation_date":1669042358,"post_id":74520539,"comment_id":131546818,"body_markdown":"oh thanks it work,such a dump question","body":"oh thanks it work,such a dump question"},{"owner":{"account_id":3193335,"reputation":111,"user_id":12420532,"display_name":"kvardekkvar"},"score":0,"creation_date":1686756115,"post_id":74520539,"comment_id":134843565,"body_markdown":"For those who google the error message: In my case, entity class wasn&#39;t added to session factory, like`.addAnnotatedClass(User.class)`","body":"For those who google the error message: In my case, entity class wasn&#39;t added to session factory, like<code>.addAnnotatedClass(User.class)</code>"}],"answers":[{"comments":[{"owner":{"account_id":22634806,"reputation":117,"user_id":16811742,"display_name":"Ni No"},"score":0,"creation_date":1669265783,"post_id":74520843,"comment_id":131606557,"body_markdown":"change session.createQuery(&quot;FROM customers&quot;)  to session.createQuery(&quot;FROM QLKH_DTO&quot;) as the entity name is QLKH_DTO","body":"change session.createQuery(&quot;FROM customers&quot;)  to session.createQuery(&quot;FROM QLKH_DTO&quot;) as the entity name is QLKH_DTO"}],"tags":[],"owner":{"account_id":22634806,"reputation":117,"user_id":16811742,"display_name":"Ni No"},"comment_count":1,"down_vote_count":1,"up_vote_count":9,"is_accepted":true,"score":8,"last_activity_date":1669213341,"creation_date":1669042631,"answer_id":74520843,"question_id":74520539,"body_markdown":"XtremeBauumer answered it in the comments:\r\n\r\n&gt; session.createQuery(&quot;FROM customers&quot;) your entity is not called customers it is called QLKH_DTO\r\n \r\n&gt; Hibernate doesn&#39;t care about what its called in the database. It cares about your code","title":"org.hibernate.query.sqm.UnknownEntityException: Could not resolve root entity","body":"<p>XtremeBauumer answered it in the comments:</p>\n<blockquote>\n<p>session.createQuery(&quot;FROM customers&quot;) your entity is not called customers it is called QLKH_DTO</p>\n</blockquote>\n<blockquote>\n<p>Hibernate doesn't care about what its called in the database. It cares about your code</p>\n</blockquote>\n"}],"owner":{"account_id":22634806,"reputation":117,"user_id":16811742,"display_name":"Ni No"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":16799,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":74520843,"answer_count":1,"score":1,"last_activity_date":1669213341,"creation_date":1669041208,"question_id":74520539,"body_markdown":"It work in another example but this one it not.I&#39;m copy code and edit line from line but it keep showing the error.i dont know what wrong with the QLKH_DTO class\r\nIm using netbean 15 and hibernate 6.\r\nThe entity class\r\n`\r\n```\r\n\r\npackage DTO;\r\n\r\nimport jakarta.persistence.Column;\r\nimport jakarta.persistence.Entity;\r\nimport jakarta.persistence.GeneratedValue;\r\nimport jakarta.persistence.GenerationType;\r\nimport jakarta.persistence.Id;\r\nimport jakarta.persistence.Table;\r\n\r\n\r\n@Entity\r\n@Table(name = &quot;customers&quot;, catalog = &quot;market&quot;)\r\n\r\npublic class QLKH_DTO implements java.io.Serializable {\r\n    private Integer CustomerID;\r\n    private String Password;\r\n    private String Fullname; \r\n    private String Address;\r\n    private String City;\r\n    \r\n    public QLKH_DTO(){}\r\n     public QLKH_DTO(String Password,String Fullname, String Address, String City) {\r\n        this.Password = Password;\r\n        this.Fullname = Fullname;\r\n        this.Address = Address;\r\n        this.City = City;\r\n    }\r\n     \r\n    @Id\r\n    @GeneratedValue(strategy =GenerationType.IDENTITY)\r\n    \r\n    @Column(name = &quot;CustomerID&quot;)\r\n    public Integer getCustomerID() {\r\n        return CustomerID;\r\n    }\r\n\r\n    public void setCustomerID(Integer CustomerID) {\r\n        this.CustomerID = CustomerID;\r\n    }\r\n    @Column(name = &quot;Password&quot;)\r\n    public String getPassword() {\r\n        return Password;\r\n    }\r\n\r\n    public void setPassword(String PassWord) {\r\n        this.Password = PassWord;\r\n    }\r\n    @Column(name = &quot;Fullname&quot;)\r\n    public String getFullname() {\r\n        return Fullname;\r\n    }\r\n\r\n    public void setFullname(String FullName) {\r\n        this.Fullname = FullName;\r\n    }\r\n    @Column(name = &quot;Address&quot;, length = 20)\r\n    public String getAddress() {\r\n        return Address;\r\n    }\r\n\r\n    public void setAddress(String Address) {\r\n        this.Address = Address;\r\n    }\r\n    @Column(name = &quot;City&quot;, length = 20)\r\n    public String getCity() {\r\n        return City;\r\n    }\r\n\r\n    public void setCity(String City) {\r\n        this.City = City;\r\n    }\r\n   \r\n}\r\n\r\n```\r\n`\r\nThe test class\r\n`\r\n```\r\n\r\npackage GUI.QLKH;\r\n\r\n\r\nimport java.util.Iterator;\r\nimport java.util.List;\r\n \r\nimport org.hibernate.HibernateException;\r\nimport org.hibernate.Session;\r\nimport org.hibernate.SessionFactory;\r\n \r\nimport DTO.QLKH_DTO;\r\nimport utils.HibernateUtil;\r\n \r\npublic class QLKH {\r\n    private static SessionFactory factory;\r\n \r\n    public static void main(String[] args) {\r\n        // get session factory\r\n        factory = HibernateUtil.getSessionFactory();\r\n \r\n        // create manageEmployee object\r\n        QLKH Customer = new QLKH();\r\n \r\n        \r\n        System.out.println(&quot;List down all the customers:&quot;);\r\n        Customer.listCustomers();\r\n}\r\n     public void listCustomers() {\r\n        Session session = factory.openSession();\r\n        try {\r\n            List customers = session.createQuery(&quot;FROM customers&quot;).list();\r\n            for (Iterator iterator = customers.iterator(); iterator.hasNext();) {\r\n                QLKH_DTO customer = (QLKH_DTO) iterator.next();\r\n                System.out.print(&quot;ID &quot; + customer.getCustomerID());\r\n                System.out.print(&quot;Password &quot; + customer.getPassword());\r\n                System.out.print(&quot;Fullname &quot; + customer.getFullname());\r\n                System.out.println(&quot;Address &quot; + customer.getAddress());\r\n                System.out.println(&quot;City &quot; + customer.getCity());\r\n            }\r\n        } catch (HibernateException e) {\r\n            \r\n        } finally {\r\n            session.close();\r\n        }\r\n    }}\r\n```\r\n`\r\n\r\nThe HibernateUtill Class\r\n`\r\n```\r\npackage utils;\r\n \r\nimport org.hibernate.SessionFactory;\r\nimport org.hibernate.boot.Metadata;\r\nimport org.hibernate.boot.MetadataSources;\r\nimport org.hibernate.boot.registry.StandardServiceRegistryBuilder;\r\nimport org.hibernate.service.ServiceRegistry;\r\n \r\npublic class HibernateUtil {\r\n    private static final SessionFactory sessionFactory = buildSessionFactory();\r\n    public static SessionFactory buildSessionFactory() {\r\n        try {\r\n            ServiceRegistry serviceRegistry;\r\n            serviceRegistry = new StandardServiceRegistryBuilder()\r\n                    .configure()\r\n                    .build();\r\n            Metadata metadata = new MetadataSources(serviceRegistry)                                     \r\n                        .getMetadataBuilder().build();\r\n            return metadata.getSessionFactoryBuilder().build();\r\n        } catch (Throwable ex) {\r\n        }\r\n        return sessionFactory;\r\n    }\r\n    public static SessionFactory getSessionFactory() {\r\n        return sessionFactory;\r\n    }\r\n}\r\n```\r\n`\r\nThe hibernate.cfg.xml\r\n`\r\n```\r\n&lt;?xml version = &quot;1.0&quot; encoding = &quot;utf-8&quot;?&gt;\r\n&lt;!DOCTYPE hibernate-configuration SYSTEM \r\n&quot;http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd&quot;&gt;\r\n\r\n&lt;hibernate-configuration&gt;\r\n   &lt;session-factory&gt;\r\n   \r\n      &lt;property name = &quot;hibernate.dialect&quot;&gt;\r\n         org.hibernate.dialect.MySQLDialect\r\n      &lt;/property&gt;\r\n   \r\n      &lt;property name = &quot;hibernate.connection.driver_class&quot;&gt;\r\n         com.mysql.jdbc.Driver\r\n      &lt;/property&gt;\r\n\r\n      &lt;!-- Assume students is the database name --&gt;\r\n   \r\n      &lt;property name = &quot;hibernate.connection.url&quot;&gt;\r\n          jdbc:mysql://localhost:3306/market\r\n      &lt;/property&gt;\r\n   \r\n      &lt;property name = &quot;hibernate.connection.username&quot;&gt;\r\n         root\r\n      &lt;/property&gt;\r\n   \r\n      &lt;property name = &quot;hibernate.connection.password&quot;&gt;\r\n         \r\n      &lt;/property&gt;\r\n    &lt;mapping class=&quot;DTO.QLKH_DTO&quot; /&gt;\r\n   &lt;/session-factory&gt;\r\n&lt;/hibernate-configuration&gt;\r\n```\r\n`\r\nThe sql\r\n`\r\n```\r\nCREATE TABLE `Customers` (\r\n  `CustomerID` int(10) NOT NULL auto_increment,\r\n  `Password` varchar(20) NOT NULL,\r\n  `Fullname` varchar(40) NOT NULL,\r\n  `Address` varchar(50) DEFAULT NULL,\r\n  `City` varchar(20) DEFAULT NULL,\r\n    PRIMARY KEY (CustomerID)\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8;\r\n\r\n--\r\n-- Dumping data for table `Customers`\r\n--\r\n\r\nINSERT INTO `Customers` (`CustomerID`, `Password`, `Fullname`, `Address`, `City`) VALUES\r\n(1, &#39;Abcd1234&#39;, &#39;John Smith&#39;, &#39;30 Broadway&#39;, &#39;London&#39;),\r\n(2, &#39;Abcd1234&#39;, &#39;Jonny English&#39;, &#39;99 River View&#39;, &#39;Reading&#39;),\r\n(3, &#39;Abcd1234&#39;, &#39;Elizabeth&#39;, &#39;23 Buckinghamshire&#39;, &#39;York&#39;),\r\n(4, &#39;Abcd1234&#39;, &#39;Beatrix&#39;, &#39;66 Royal Crescent&#39;, &#39;Bath&#39;);\r\n```\r\n`\r\nThe Error log\r\n`\r\n```\r\nNov 21, 2022 9:27:01 PM org.hibernate.Version logVersion\r\nINFO: HHH000412: Hibernate ORM core version 6.1.5.Final\r\nNov 21, 2022 9:27:07 PM org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl configure\r\nWARN: HHH10001002: Using built-in connection pool (not intended for production use)\r\nNov 21, 2022 9:27:07 PM org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl buildCreator\r\nINFO: HHH10001005: Loaded JDBC driver class: com.mysql.jdbc.Driver\r\nNov 21, 2022 9:27:07 PM org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl buildCreator\r\nINFO: HHH10001012: Connecting with JDBC URL [jdbc:mysql://localhost:3306/market]\r\nNov 21, 2022 9:27:07 PM org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl buildCreator\r\nINFO: HHH10001001: Connection properties: {password=****, user=root}\r\nNov 21, 2022 9:27:07 PM org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl buildCreator\r\nINFO: HHH10001003: Autocommit mode: false\r\nNov 21, 2022 9:27:07 PM org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl$PooledConnections &lt;init&gt;\r\nINFO: HHH10001115: Connection pool size: 20 (min=1)\r\nNov 21, 2022 9:27:09 PM org.hibernate.engine.jdbc.dialect.internal.DialectFactoryImpl logSelectedDialect\r\nINFO: HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect\r\nNov 21, 2022 9:27:13 PM org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator initiateService\r\nINFO: HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]\r\nList down all the customers:\r\nException in thread &quot;main&quot; java.lang.IllegalArgumentException: org.hibernate.query.sqm.UnknownEntityException: Could not resolve root entity &#39;customers&#39;\r\n\tat org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:138)\r\n\tat org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:175)\r\n\tat org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:182)\r\n\tat org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:761)\r\n\tat org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:663)\r\n\tat org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:127)\r\n\tat GUI.QLKH.QLKH.listCustomers(QLKH.java:32)\r\n\tat GUI.QLKH.QLKH.main(QLKH.java:27)\r\nCaused by: org.hibernate.query.sqm.UnknownEntityException: Could not resolve root entity &#39;customers&#39;\r\n\tat org.hibernate.query.hql.internal.SemanticQueryBuilder.visitRootEntity(SemanticQueryBuilder.java:1628)\r\n\tat org.hibernate.query.hql.internal.SemanticQueryBuilder.visitRootEntity(SemanticQueryBuilder.java:243)\r\n\tat org.hibernate.grammars.hql.HqlParser$RootEntityContext.accept(HqlParser.java:1873)\r\n\tat org.hibernate.query.hql.internal.SemanticQueryBuilder.visitEntityWithJoins(SemanticQueryBuilder.java:1548)\r\n\tat org.hibernate.query.hql.internal.SemanticQueryBuilder.visitFromClause(SemanticQueryBuilder.java:1539)\r\n\tat org.hibernate.query.hql.internal.SemanticQueryBuilder.visitQuery(SemanticQueryBuilder.java:833)\r\n\tat org.hibernate.query.hql.internal.SemanticQueryBuilder.visitQuerySpecExpression(SemanticQueryBuilder.java:629)\r\n\tat org.hibernate.query.hql.internal.SemanticQueryBuilder.visitQuerySpecExpression(SemanticQueryBuilder.java:243)\r\n\tat org.hibernate.grammars.hql.HqlParser$QuerySpecExpressionContext.accept(HqlParser.java:1218)\r\n\tat org.hibernate.query.hql.internal.SemanticQueryBuilder.visitSimpleQueryGroup(SemanticQueryBuilder.java:623)\r\n\tat org.hibernate.query.hql.internal.SemanticQueryBuilder.visitSimpleQueryGroup(SemanticQueryBuilder.java:243)\r\n\tat org.hibernate.grammars.hql.HqlParser$SimpleQueryGroupContext.accept(HqlParser.java:1131)\r\n\tat org.hibernate.query.hql.internal.SemanticQueryBuilder.visitSelectStatement(SemanticQueryBuilder.java:399)\r\n\tat org.hibernate.query.hql.internal.SemanticQueryBuilder.visitStatement(SemanticQueryBuilder.java:358)\r\n\tat org.hibernate.query.hql.internal.SemanticQueryBuilder.buildSemanticModel(SemanticQueryBuilder.java:285)\r\n\tat org.hibernate.query.hql.internal.StandardHqlTranslator.translate(StandardHqlTranslator.java:81)\r\n\tat org.hibernate.internal.AbstractSharedSessionContract.lambda$createQuery$2(AbstractSharedSessionContract.java:748)\r\n\tat org.hibernate.query.internal.QueryInterpretationCacheStandardImpl.createHqlInterpretation(QueryInterpretationCacheStandardImpl.java:141)\r\n\tat org.hibernate.query.internal.QueryInterpretationCacheStandardImpl.resolveHqlInterpretation(QueryInterpretationCacheStandardImpl.java:128)\r\n\tat org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:745)\r\n\t... 4 more\r\nCommand execution failed.\r\norg.apache.commons.exec.ExecuteException: Process exited with an error: 1 (Exit value: 1)\r\n    at org.apache.commons.exec.DefaultExecutor.executeInternal (DefaultExecutor.java:404)\r\n    at org.apache.commons.exec.DefaultExecutor.execute (DefaultExecutor.java:166)\r\n    at org.codehaus.mojo.exec.ExecMojo.executeCommandLine (ExecMojo.java:982)\r\n    at org.codehaus.mojo.exec.ExecMojo.executeCommandLine (ExecMojo.java:929)\r\n    at org.codehaus.mojo.exec.ExecMojo.execute (ExecMojo.java:457)\r\n    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo (DefaultBuildPluginManager.java:137)\r\n    at org.apache.maven.lifecycle.internal.MojoExecutor.doExecute2 (MojoExecutor.java:370)\r\n    at org.apache.maven.lifecycle.internal.MojoExecutor.doExecute (MojoExecutor.java:351)\r\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:215)\r\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:171)\r\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:163)\r\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:117)\r\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:81)\r\n    at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:56)\r\n    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:128)\r\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:294)\r\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:192)\r\n    at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:105)\r\n    at org.apache.maven.cli.MavenCli.execute (MavenCli.java:960)\r\n    at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:293)\r\n    at org.apache.maven.cli.MavenCli.main (MavenCli.java:196)\r\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\r\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:62)\r\n    at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\r\n    at java.lang.reflect.Method.invoke (Method.java:564)\r\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:282)\r\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:225)\r\n    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:406)\r\n```\r\n`\r\nIt look like the problem mostly in the entity class but i don&#39;t know where\r\nAnyhelp would be appreciate","title":"org.hibernate.query.sqm.UnknownEntityException: Could not resolve root entity","body":"<p>It work in another example but this one it not.I'm copy code and edit line from line but it keep showing the error.i dont know what wrong with the QLKH_DTO class\nIm using netbean 15 and hibernate 6.\nThe entity class\n`</p>\n<pre><code>\npackage DTO;\n\nimport jakarta.persistence.Column;\nimport jakarta.persistence.Entity;\nimport jakarta.persistence.GeneratedValue;\nimport jakarta.persistence.GenerationType;\nimport jakarta.persistence.Id;\nimport jakarta.persistence.Table;\n\n\n@Entity\n@Table(name = &quot;customers&quot;, catalog = &quot;market&quot;)\n\npublic class QLKH_DTO implements java.io.Serializable {\n    private Integer CustomerID;\n    private String Password;\n    private String Fullname; \n    private String Address;\n    private String City;\n    \n    public QLKH_DTO(){}\n     public QLKH_DTO(String Password,String Fullname, String Address, String City) {\n        this.Password = Password;\n        this.Fullname = Fullname;\n        this.Address = Address;\n        this.City = City;\n    }\n     \n    @Id\n    @GeneratedValue(strategy =GenerationType.IDENTITY)\n    \n    @Column(name = &quot;CustomerID&quot;)\n    public Integer getCustomerID() {\n        return CustomerID;\n    }\n\n    public void setCustomerID(Integer CustomerID) {\n        this.CustomerID = CustomerID;\n    }\n    @Column(name = &quot;Password&quot;)\n    public String getPassword() {\n        return Password;\n    }\n\n    public void setPassword(String PassWord) {\n        this.Password = PassWord;\n    }\n    @Column(name = &quot;Fullname&quot;)\n    public String getFullname() {\n        return Fullname;\n    }\n\n    public void setFullname(String FullName) {\n        this.Fullname = FullName;\n    }\n    @Column(name = &quot;Address&quot;, length = 20)\n    public String getAddress() {\n        return Address;\n    }\n\n    public void setAddress(String Address) {\n        this.Address = Address;\n    }\n    @Column(name = &quot;City&quot;, length = 20)\n    public String getCity() {\n        return City;\n    }\n\n    public void setCity(String City) {\n        this.City = City;\n    }\n   \n}\n\n</code></pre>\n<p><code>The test class</code></p>\n<pre><code>\npackage GUI.QLKH;\n\n\nimport java.util.Iterator;\nimport java.util.List;\n \nimport org.hibernate.HibernateException;\nimport org.hibernate.Session;\nimport org.hibernate.SessionFactory;\n \nimport DTO.QLKH_DTO;\nimport utils.HibernateUtil;\n \npublic class QLKH {\n    private static SessionFactory factory;\n \n    public static void main(String[] args) {\n        // get session factory\n        factory = HibernateUtil.getSessionFactory();\n \n        // create manageEmployee object\n        QLKH Customer = new QLKH();\n \n        \n        System.out.println(&quot;List down all the customers:&quot;);\n        Customer.listCustomers();\n}\n     public void listCustomers() {\n        Session session = factory.openSession();\n        try {\n            List customers = session.createQuery(&quot;FROM customers&quot;).list();\n            for (Iterator iterator = customers.iterator(); iterator.hasNext();) {\n                QLKH_DTO customer = (QLKH_DTO) iterator.next();\n                System.out.print(&quot;ID &quot; + customer.getCustomerID());\n                System.out.print(&quot;Password &quot; + customer.getPassword());\n                System.out.print(&quot;Fullname &quot; + customer.getFullname());\n                System.out.println(&quot;Address &quot; + customer.getAddress());\n                System.out.println(&quot;City &quot; + customer.getCity());\n            }\n        } catch (HibernateException e) {\n            \n        } finally {\n            session.close();\n        }\n    }}\n</code></pre>\n<p>`</p>\n<p>The HibernateUtill Class\n`</p>\n<pre><code>package utils;\n \nimport org.hibernate.SessionFactory;\nimport org.hibernate.boot.Metadata;\nimport org.hibernate.boot.MetadataSources;\nimport org.hibernate.boot.registry.StandardServiceRegistryBuilder;\nimport org.hibernate.service.ServiceRegistry;\n \npublic class HibernateUtil {\n    private static final SessionFactory sessionFactory = buildSessionFactory();\n    public static SessionFactory buildSessionFactory() {\n        try {\n            ServiceRegistry serviceRegistry;\n            serviceRegistry = new StandardServiceRegistryBuilder()\n                    .configure()\n                    .build();\n            Metadata metadata = new MetadataSources(serviceRegistry)                                     \n                        .getMetadataBuilder().build();\n            return metadata.getSessionFactoryBuilder().build();\n        } catch (Throwable ex) {\n        }\n        return sessionFactory;\n    }\n    public static SessionFactory getSessionFactory() {\n        return sessionFactory;\n    }\n}\n</code></pre>\n<p><code>The hibernate.cfg.xml</code></p>\n<pre><code>&lt;?xml version = &quot;1.0&quot; encoding = &quot;utf-8&quot;?&gt;\n&lt;!DOCTYPE hibernate-configuration SYSTEM \n&quot;http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd&quot;&gt;\n\n&lt;hibernate-configuration&gt;\n   &lt;session-factory&gt;\n   \n      &lt;property name = &quot;hibernate.dialect&quot;&gt;\n         org.hibernate.dialect.MySQLDialect\n      &lt;/property&gt;\n   \n      &lt;property name = &quot;hibernate.connection.driver_class&quot;&gt;\n         com.mysql.jdbc.Driver\n      &lt;/property&gt;\n\n      &lt;!-- Assume students is the database name --&gt;\n   \n      &lt;property name = &quot;hibernate.connection.url&quot;&gt;\n          jdbc:mysql://localhost:3306/market\n      &lt;/property&gt;\n   \n      &lt;property name = &quot;hibernate.connection.username&quot;&gt;\n         root\n      &lt;/property&gt;\n   \n      &lt;property name = &quot;hibernate.connection.password&quot;&gt;\n         \n      &lt;/property&gt;\n    &lt;mapping class=&quot;DTO.QLKH_DTO&quot; /&gt;\n   &lt;/session-factory&gt;\n&lt;/hibernate-configuration&gt;\n</code></pre>\n<p><code>The sql</code></p>\n<pre><code>CREATE TABLE `Customers` (\n  `CustomerID` int(10) NOT NULL auto_increment,\n  `Password` varchar(20) NOT NULL,\n  `Fullname` varchar(40) NOT NULL,\n  `Address` varchar(50) DEFAULT NULL,\n  `City` varchar(20) DEFAULT NULL,\n    PRIMARY KEY (CustomerID)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8;\n\n--\n-- Dumping data for table `Customers`\n--\n\nINSERT INTO `Customers` (`CustomerID`, `Password`, `Fullname`, `Address`, `City`) VALUES\n(1, 'Abcd1234', 'John Smith', '30 Broadway', 'London'),\n(2, 'Abcd1234', 'Jonny English', '99 River View', 'Reading'),\n(3, 'Abcd1234', 'Elizabeth', '23 Buckinghamshire', 'York'),\n(4, 'Abcd1234', 'Beatrix', '66 Royal Crescent', 'Bath');\n</code></pre>\n<p><code>The Error log</code></p>\n<pre><code>Nov 21, 2022 9:27:01 PM org.hibernate.Version logVersion\nINFO: HHH000412: Hibernate ORM core version 6.1.5.Final\nNov 21, 2022 9:27:07 PM org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl configure\nWARN: HHH10001002: Using built-in connection pool (not intended for production use)\nNov 21, 2022 9:27:07 PM org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl buildCreator\nINFO: HHH10001005: Loaded JDBC driver class: com.mysql.jdbc.Driver\nNov 21, 2022 9:27:07 PM org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl buildCreator\nINFO: HHH10001012: Connecting with JDBC URL [jdbc:mysql://localhost:3306/market]\nNov 21, 2022 9:27:07 PM org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl buildCreator\nINFO: HHH10001001: Connection properties: {password=****, user=root}\nNov 21, 2022 9:27:07 PM org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl buildCreator\nINFO: HHH10001003: Autocommit mode: false\nNov 21, 2022 9:27:07 PM org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl$PooledConnections &lt;init&gt;\nINFO: HHH10001115: Connection pool size: 20 (min=1)\nNov 21, 2022 9:27:09 PM org.hibernate.engine.jdbc.dialect.internal.DialectFactoryImpl logSelectedDialect\nINFO: HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect\nNov 21, 2022 9:27:13 PM org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator initiateService\nINFO: HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]\nList down all the customers:\nException in thread &quot;main&quot; java.lang.IllegalArgumentException: org.hibernate.query.sqm.UnknownEntityException: Could not resolve root entity 'customers'\n    at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:138)\n    at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:175)\n    at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:182)\n    at org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:761)\n    at org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:663)\n    at org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:127)\n    at GUI.QLKH.QLKH.listCustomers(QLKH.java:32)\n    at GUI.QLKH.QLKH.main(QLKH.java:27)\nCaused by: org.hibernate.query.sqm.UnknownEntityException: Could not resolve root entity 'customers'\n    at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitRootEntity(SemanticQueryBuilder.java:1628)\n    at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitRootEntity(SemanticQueryBuilder.java:243)\n    at org.hibernate.grammars.hql.HqlParser$RootEntityContext.accept(HqlParser.java:1873)\n    at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitEntityWithJoins(SemanticQueryBuilder.java:1548)\n    at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitFromClause(SemanticQueryBuilder.java:1539)\n    at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitQuery(SemanticQueryBuilder.java:833)\n    at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitQuerySpecExpression(SemanticQueryBuilder.java:629)\n    at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitQuerySpecExpression(SemanticQueryBuilder.java:243)\n    at org.hibernate.grammars.hql.HqlParser$QuerySpecExpressionContext.accept(HqlParser.java:1218)\n    at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitSimpleQueryGroup(SemanticQueryBuilder.java:623)\n    at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitSimpleQueryGroup(SemanticQueryBuilder.java:243)\n    at org.hibernate.grammars.hql.HqlParser$SimpleQueryGroupContext.accept(HqlParser.java:1131)\n    at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitSelectStatement(SemanticQueryBuilder.java:399)\n    at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitStatement(SemanticQueryBuilder.java:358)\n    at org.hibernate.query.hql.internal.SemanticQueryBuilder.buildSemanticModel(SemanticQueryBuilder.java:285)\n    at org.hibernate.query.hql.internal.StandardHqlTranslator.translate(StandardHqlTranslator.java:81)\n    at org.hibernate.internal.AbstractSharedSessionContract.lambda$createQuery$2(AbstractSharedSessionContract.java:748)\n    at org.hibernate.query.internal.QueryInterpretationCacheStandardImpl.createHqlInterpretation(QueryInterpretationCacheStandardImpl.java:141)\n    at org.hibernate.query.internal.QueryInterpretationCacheStandardImpl.resolveHqlInterpretation(QueryInterpretationCacheStandardImpl.java:128)\n    at org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:745)\n    ... 4 more\nCommand execution failed.\norg.apache.commons.exec.ExecuteException: Process exited with an error: 1 (Exit value: 1)\n    at org.apache.commons.exec.DefaultExecutor.executeInternal (DefaultExecutor.java:404)\n    at org.apache.commons.exec.DefaultExecutor.execute (DefaultExecutor.java:166)\n    at org.codehaus.mojo.exec.ExecMojo.executeCommandLine (ExecMojo.java:982)\n    at org.codehaus.mojo.exec.ExecMojo.executeCommandLine (ExecMojo.java:929)\n    at org.codehaus.mojo.exec.ExecMojo.execute (ExecMojo.java:457)\n    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo (DefaultBuildPluginManager.java:137)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.doExecute2 (MojoExecutor.java:370)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.doExecute (MojoExecutor.java:351)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:215)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:171)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:163)\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:117)\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:81)\n    at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:56)\n    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:128)\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:294)\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:192)\n    at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:105)\n    at org.apache.maven.cli.MavenCli.execute (MavenCli.java:960)\n    at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:293)\n    at org.apache.maven.cli.MavenCli.main (MavenCli.java:196)\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:62)\n    at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke (Method.java:564)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:282)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:225)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:406)\n</code></pre>\n<p>`\nIt look like the problem mostly in the entity class but i don't know where\nAnyhelp would be appreciate</p>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":3430916,"reputation":3799,"user_id":3059385,"accept_rate":40,"display_name":"Christopher Schneider"},"score":0,"creation_date":1694200203,"post_id":67691575,"comment_id":135864968,"body_markdown":"Anyone reading this today, I strongly believe _every bean_ should be in a`@Configuration` class. `@ComponentScan` is brittle and unclear. Move a component to a new package, for instance, and you may not notice the bean is no longer created. This can/will result in issues that only occur at runtime. If everything is in a configuration class, refactoring is safe. Any invalid package names will be caught by the compiler or your IDE will automatically update package names. Any non-trivial project should use `@Configuration`.","body":"Anyone reading this today, I strongly believe <i>every bean</i> should be in a<code>@Configuration</code> class. <code>@ComponentScan</code> is brittle and unclear. Move a component to a new package, for instance, and you may not notice the bean is no longer created. This can/will result in issues that only occur at runtime. If everything is in a configuration class, refactoring is safe. Any invalid package names will be caught by the compiler or your IDE will automatically update package names. Any non-trivial project should use <code>@Configuration</code>."}],"answers":[{"tags":[],"owner":{"account_id":1063012,"reputation":71986,"user_id":1064245,"accept_rate":82,"display_name":"M A"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1621959143,"creation_date":1621959143,"answer_id":67691811,"question_id":67691575,"body_markdown":"&gt;What would be the benefit of having the @Configuration class? Or is the @Configuration mostly useful for some edge cases that I have missed?\r\n\r\nI think what you&#39;re asking is the difference between `@Bean` annotated methods, and annotating a `@Component` class. In this case, https://stackoverflow.com/questions/10604298/spring-component-versus-bean should really help clarify that. The main difference is `@Bean` allows you to decouple the bean definition from the class itself. Your class can be a simple POJO with no Spring annotation/code in it. It can also be a third-party class.","title":"When should you use @Configuration instead of @Service/@Controller/@Component for defining beans","body":"<blockquote>\n<p>What would be the benefit of having the @Configuration class? Or is the @Configuration mostly useful for some edge cases that I have missed?</p>\n</blockquote>\n<p>I think what you're asking is the difference between <code>@Bean</code> annotated methods, and annotating a <code>@Component</code> class. In this case, <a href=\"https://stackoverflow.com/questions/10604298/spring-component-versus-bean\">Spring: @Component versus @Bean</a> should really help clarify that. The main difference is <code>@Bean</code> allows you to decouple the bean definition from the class itself. Your class can be a simple POJO with no Spring annotation/code in it. It can also be a third-party class.</p>\n"},{"tags":[],"owner":{"account_id":10214167,"reputation":213,"user_id":7540379,"display_name":"Axella Geraldinc"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1622000348,"creation_date":1622000348,"answer_id":67698213,"question_id":67691575,"body_markdown":"I&#39;m answering based on my experience at work, so here it goes\r\n\r\n### @Configuration ###\r\nWhen you utilize a 3rd party library (most of the time we do) and we need to have that library as a singleton, then we declare it as bean using `@Bean` inside our `@Configuration`, because we can&#39;t annotate a 3rd party library using `@Component` right?\r\n\r\n### @Component (and other stereotype annotations) ###\r\nUsing this annotation make your codes more readable and simple. Because there are some cases that your class will have many dependencies, defining it using `@Bean` inside `@Configuration` class will need you to inject those dependencies &quot;manually&quot; one by one through -for example- constructor.\r\n\r\nIn my opinion, as long as you can achieve your objective by marking your class with `@Component` or other stereotype annotation, you should do that for the sake of readability and maintainability.","title":"When should you use @Configuration instead of @Service/@Controller/@Component for defining beans","body":"<p>I'm answering based on my experience at work, so here it goes</p>\n<h3>@Configuration</h3>\n<p>When you utilize a 3rd party library (most of the time we do) and we need to have that library as a singleton, then we declare it as bean using <code>@Bean</code> inside our <code>@Configuration</code>, because we can't annotate a 3rd party library using <code>@Component</code> right?</p>\n<h3>@Component (and other stereotype annotations)</h3>\n<p>Using this annotation make your codes more readable and simple. Because there are some cases that your class will have many dependencies, defining it using <code>@Bean</code> inside <code>@Configuration</code> class will need you to inject those dependencies &quot;manually&quot; one by one through -for example- constructor.</p>\n<p>In my opinion, as long as you can achieve your objective by marking your class with <code>@Component</code> or other stereotype annotation, you should do that for the sake of readability and maintainability.</p>\n"},{"tags":[],"owner":{"account_id":14613517,"reputation":132,"user_id":10554317,"display_name":"Oleksandr  Bereziuk"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1622005547,"creation_date":1622001769,"answer_id":67698350,"question_id":67691575,"body_markdown":"Using @Configuration makes the project much more manageable - because you can always quickly refer to the one (or several) dedicated places to figure out the whole picture of dependencies between your beans, instead of hopping back and forth between classes marked with @Component-family annotations.\r\nIt is not a big difference for simple projects, but in case of complex projects and complex beans it helps a lot, especially when you have a non-trivial logic of instantiation. \r\n\r\nPlus, you might narrow component scan scope (so startup time) using a limited number of well-know configuration classes.\r\n\r\nAdditionally, @Component family beans most often are injected as @Autowired,\r\n**which is antipattern itself**, while @Configuration is dealing mostly with constructor injection\r\n\r\nShort, but very good related article:\r\nhttps://dzone.com/articles/spring-di-patterns-the-good-the-bad-and-the-ugly","title":"When should you use @Configuration instead of @Service/@Controller/@Component for defining beans","body":"<p>Using @Configuration makes the project much more manageable - because you can always quickly refer to the one (or several) dedicated places to figure out the whole picture of dependencies between your beans, instead of hopping back and forth between classes marked with @Component-family annotations.\nIt is not a big difference for simple projects, but in case of complex projects and complex beans it helps a lot, especially when you have a non-trivial logic of instantiation.</p>\n<p>Plus, you might narrow component scan scope (so startup time) using a limited number of well-know configuration classes.</p>\n<p>Additionally, @Component family beans most often are injected as @Autowired,\n<strong>which is antipattern itself</strong>, while @Configuration is dealing mostly with constructor injection</p>\n<p>Short, but very good related article:\n<a href=\"https://dzone.com/articles/spring-di-patterns-the-good-the-bad-and-the-ugly\" rel=\"nofollow noreferrer\">https://dzone.com/articles/spring-di-patterns-the-good-the-bad-and-the-ugly</a></p>\n"},{"tags":[],"owner":{"account_id":8343385,"reputation":409,"user_id":13387301,"display_name":"ropa8"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1622022523,"creation_date":1622003102,"answer_id":67698510,"question_id":67691575,"body_markdown":"I had the same question in my mind before and searched a lot about it. According to my searches and own experiences, I think below link can help you.\r\n\r\nhttps://www.javahabit.com/2018/12/30/spring-bean-vs-component/\r\n\r\n**Important parts of the link:**\r\n\r\nA simple way to decide between `@Component` and `@Bean` is that\r\n\r\n - if you want to use third-party classes or jar then use `@Bean`.\r\n - If you are writing your own classes for your application then use\r\n    Component.\r\n - If you want to use a third party class or jar that is not written\r\n   using Spring Component then use `@Bean`.\r\n\r\n\r\nHope to be helpful.","title":"When should you use @Configuration instead of @Service/@Controller/@Component for defining beans","body":"<p>I had the same question in my mind before and searched a lot about it. According to my searches and own experiences, I think below link can help you.</p>\n<p><a href=\"https://www.javahabit.com/2018/12/30/spring-bean-vs-component/\" rel=\"nofollow noreferrer\">https://www.javahabit.com/2018/12/30/spring-bean-vs-component/</a></p>\n<p><strong>Important parts of the link:</strong></p>\n<p>A simple way to decide between <code>@Component</code> and <code>@Bean</code> is that</p>\n<ul>\n<li>if you want to use third-party classes or jar then use <code>@Bean</code>.</li>\n<li>If you are writing your own classes for your application then use\nComponent.</li>\n<li>If you want to use a third party class or jar that is not written\nusing Spring Component then use <code>@Bean</code>.</li>\n</ul>\n<p>Hope to be helpful.</p>\n"},{"tags":[],"owner":{"account_id":4912982,"reputation":14853,"user_id":3957754,"accept_rate":50,"display_name":"JRichardsz"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1669213300,"creation_date":1622004336,"answer_id":67698655,"question_id":67691575,"body_markdown":"### short answer\r\n\r\n- **@Component** in a java class is to tell to spring: Register me **automatically** at the startup in your context so any other class could use me using dependency injection: **@Autowire**\r\n- **@Configuration** and **@Bean** are used to add **manually** a java class to the spring context at the startup. Commonly @Bean is used when you can&#39;t annotate a class with some annotation. Sample: Libraries not compatible with spring, old libraries or just any class that requires more than a simple instantation.\r\n\r\n### long answer\r\n\r\nIn spring all is related to dependency injection. Spring allow us to register our awesome classes manually or automatically. \r\n\r\nSo if you have a java class (Foo.java) with an awesome method (doSomething) that you need to use in any part of your spring project and you want to avoid the manually instantation, you need to annotate this java class with **@Component**. \r\n\r\n    @Component\r\n    public class Foo {\r\n    ....\r\n    }\r\n\r\nAfter that you can use Foo.java in any class of you your spring project:\r\n\r\n    public class Bar { \r\n    ....\r\n    @Autowire\r\n    Foo foo;\r\n\r\n    public void hello( ) {\r\n      foo.doSomething\r\n    }\r\n\r\nBut if Foo.java is inside of a library, is not compatible with spring, is an old library or just a simple instantation is not enough, **@Configuration** and **@Bean** comes to rescue\r\n\r\n    @Configuration\r\n    public class Application { \r\n    ....\r\n    @Bean\r\n    public Foo configureFoo() {\r\n      //load some crazy configuration\r\n      //some crazy algorithm\r\n      return new Foo(crazyConfig, param1,param2,etc)\r\n    }\r\n\r\n","title":"When should you use @Configuration instead of @Service/@Controller/@Component for defining beans","body":"<h3>short answer</h3>\n<ul>\n<li><strong>@Component</strong> in a java class is to tell to spring: Register me <strong>automatically</strong> at the startup in your context so any other class could use me using dependency injection: <strong>@Autowire</strong></li>\n<li><strong>@Configuration</strong> and <strong>@Bean</strong> are used to add <strong>manually</strong> a java class to the spring context at the startup. Commonly @Bean is used when you can't annotate a class with some annotation. Sample: Libraries not compatible with spring, old libraries or just any class that requires more than a simple instantation.</li>\n</ul>\n<h3>long answer</h3>\n<p>In spring all is related to dependency injection. Spring allow us to register our awesome classes manually or automatically.</p>\n<p>So if you have a java class (Foo.java) with an awesome method (doSomething) that you need to use in any part of your spring project and you want to avoid the manually instantation, you need to annotate this java class with <strong>@Component</strong>.</p>\n<pre><code>@Component\npublic class Foo {\n....\n}\n</code></pre>\n<p>After that you can use Foo.java in any class of you your spring project:</p>\n<pre><code>public class Bar { \n....\n@Autowire\nFoo foo;\n\npublic void hello( ) {\n  foo.doSomething\n}\n</code></pre>\n<p>But if Foo.java is inside of a library, is not compatible with spring, is an old library or just a simple instantation is not enough, <strong>@Configuration</strong> and <strong>@Bean</strong> comes to rescue</p>\n<pre><code>@Configuration\npublic class Application { \n....\n@Bean\npublic Foo configureFoo() {\n  //load some crazy configuration\n  //some crazy algorithm\n  return new Foo(crazyConfig, param1,param2,etc)\n}\n</code></pre>\n"}],"owner":{"account_id":19594795,"reputation":121,"user_id":14341091,"display_name":"Fredrik Folkesson"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5492,"favorite_count":0,"down_vote_count":1,"up_vote_count":4,"accepted_answer_id":67698655,"answer_count":5,"score":3,"last_activity_date":1669213300,"creation_date":1621958278,"question_id":67691575,"body_markdown":"I am trying to understand the Spring Framework better and my question is basically:\r\nWhat is the benefit of the @Configuration annotation compared to @Service/@Controller/@Repository (or @Component if it is none of the other 3)\r\n\r\nAs I understand the @Configuration is meant to be a source of beans, but by just marking my classes with for example @Service it becomes a bean and will be picked up by the component scanning?\r\n\r\nAs I understand it I could either have a @Configuration class that has methods that create a couple of beans (say some services) or just have the classes annotated with @Service directly.\r\n\r\nWhat would be the benefit of having the @Configuration class? Or is the @Configuration mostly useful for some edge cases that I have missed?\r\n\r\nI read somewhere that the @Value annotation can be used in a @Configuration annotated class, but I can see in our codebase that we use it in other places, that are not @Configuration marked, so that does not seem to be required\r\n\r\nI&#39;ve been told there is a thread here:\r\nhttps://stackoverflow.com/questions/39174669/what-is-the-difference-between-configuration-and-component-in-spring\r\n\r\nBut I feel that it only starts explaining what the difference is between the annotations, not WHEN/What the benefit of using one over the other is.\r\n\r\nThanks!","title":"When should you use @Configuration instead of @Service/@Controller/@Component for defining beans","body":"<p>I am trying to understand the Spring Framework better and my question is basically:\nWhat is the benefit of the @Configuration annotation compared to @Service/@Controller/@Repository (or @Component if it is none of the other 3)</p>\n<p>As I understand the @Configuration is meant to be a source of beans, but by just marking my classes with for example @Service it becomes a bean and will be picked up by the component scanning?</p>\n<p>As I understand it I could either have a @Configuration class that has methods that create a couple of beans (say some services) or just have the classes annotated with @Service directly.</p>\n<p>What would be the benefit of having the @Configuration class? Or is the @Configuration mostly useful for some edge cases that I have missed?</p>\n<p>I read somewhere that the @Value annotation can be used in a @Configuration annotated class, but I can see in our codebase that we use it in other places, that are not @Configuration marked, so that does not seem to be required</p>\n<p>I've been told there is a thread here:\n<a href=\"https://stackoverflow.com/questions/39174669/what-is-the-difference-between-configuration-and-component-in-spring\">What is the difference between @Configuration and @Component in Spring?</a></p>\n<p>But I feel that it only starts explaining what the difference is between the annotations, not WHEN/What the benefit of using one over the other is.</p>\n<p>Thanks!</p>\n"},{"tags":["java","spring","spring-boot","hibernate-validator"],"comments":[{"owner":{"account_id":22066749,"reputation":3758,"user_id":16328516,"display_name":"TriS"},"score":0,"creation_date":1669194995,"post_id":74543673,"comment_id":131586976,"body_markdown":"I cannot see the  createUser method in UserService. Do you have it?","body":"I cannot see the  createUser method in UserService. Do you have it?"},{"owner":{"account_id":19847496,"reputation":41,"user_id":14538782,"display_name":"smhylc"},"score":0,"creation_date":1669197451,"post_id":74543673,"comment_id":131587902,"body_markdown":"@Tris hello yes ı have. I wanted to write as short as possible, so I removed the unnecessary parts. I have now edited it again.","body":"@Tris hello yes ı have. I wanted to write as short as possible, so I removed the unnecessary parts. I have now edited it again."},{"owner":{"account_id":22066749,"reputation":3758,"user_id":16328516,"display_name":"TriS"},"score":0,"creation_date":1669201446,"post_id":74543673,"comment_id":131589307,"body_markdown":"I see that you are applying validation to User which is an entity object, did you try with the validation in DTO object UserRequestDTO which you actually get in REST layer. There is no point going to DAO layer if the request is not valid. The code which might be causing issue &#39;User u = userRepository.save(UserMapper.INSTANCE.entityToDto(userRequestDTO));&#39;","body":"I see that you are applying validation to User which is an entity object, did you try with the validation in DTO object UserRequestDTO which you actually get in REST layer. There is no point going to DAO layer if the request is not valid. The code which might be causing issue &#39;User u = userRepository.save(UserMapper.INSTANCE.entityToDto(userRequ&zwnj;&#8203;estDTO));&#39;"},{"owner":{"account_id":19847496,"reputation":41,"user_id":14538782,"display_name":"smhylc"},"score":0,"creation_date":1669211849,"post_id":74543673,"comment_id":131593033,"body_markdown":"@Tris As you mentioned, the User object is in my Entity layer. However, I was getting UserDTO in the controller. \n\nFor this reason, since there was no control in UserDTO, &quot;Null&quot; was coming to the validation section when transferring data between layers.\n\nFor this reason, the program was giving Null error while running. \n\nI removed all annotations from the user entity class and transferred all validation annotations to &quot;userdto&quot;. \n\nThe problem was solved in this way.","body":"@Tris As you mentioned, the User object is in my Entity layer. However, I was getting UserDTO in the controller.   For this reason, since there was no control in UserDTO, &quot;Null&quot; was coming to the validation section when transferring data between layers.  For this reason, the program was giving Null error while running.   I removed all annotations from the user entity class and transferred all validation annotations to &quot;userdto&quot;.   The problem was solved in this way."}],"answers":[{"comments":[{"owner":{"account_id":19847496,"reputation":41,"user_id":14538782,"display_name":"smhylc"},"score":0,"creation_date":1669200313,"post_id":74545283,"comment_id":131588932,"body_markdown":"Thank you for your valuable time but we have already done the same things. \n\nThe only difference between the codes is that I created it in an external class and you created it nested. \n\nIf you look at my codes I shared above, the userservice is already marked as @autowired. \n\nValidator does not see the repository or service layer I added in it. The problem is exactly here.  \n\nThank you for your time, but I already wrote the same code, please review my code again, you will see that we are doing the same thing. \n\nThe result is the same, nothing has changed.","body":"Thank you for your valuable time but we have already done the same things.   The only difference between the codes is that I created it in an external class and you created it nested.   If you look at my codes I shared above, the userservice is already marked as @autowired.   Validator does not see the repository or service layer I added in it. The problem is exactly here.    Thank you for your time, but I already wrote the same code, please review my code again, you will see that we are doing the same thing.   The result is the same, nothing has changed."},{"owner":{"account_id":6676840,"reputation":2927,"user_id":5151202,"display_name":"times29"},"score":0,"creation_date":1669201718,"post_id":74545283,"comment_id":131589408,"body_markdown":"Hi @smhsmh, I added a configuration bean that I have also used in my projects. Could you try again with said config bean?","body":"Hi @smhsmh, I added a configuration bean that I have also used in my projects. Could you try again with said config bean?"},{"owner":{"account_id":19847496,"reputation":41,"user_id":14538782,"display_name":"smhylc"},"score":0,"creation_date":1669201941,"post_id":74545283,"comment_id":131589501,"body_markdown":"Hi @Times Is there a special way to add it or should I create a configuration package and then add it directly?","body":"Hi @Times Is there a special way to add it or should I create a configuration package and then add it directly?"},{"owner":{"account_id":6676840,"reputation":2927,"user_id":5151202,"display_name":"times29"},"score":0,"creation_date":1669202128,"post_id":74545283,"comment_id":131589566,"body_markdown":"I have a package named `config` where I place all my `@Configuration` beans but it is up to you. If you have all your validation logic in a `validation` package you could also place it there. All that matters is that the class is annotated with `@Configuration` and that the `LocalValidatorFactoryBean` is declared as a `@Bean` there :)","body":"I have a package named <code>config</code> where I place all my <code>@Configuration</code> beans but it is up to you. If you have all your validation logic in a <code>validation</code> package you could also place it there. All that matters is that the class is annotated with <code>@Configuration</code> and that the <code>LocalValidatorFactoryBean</code> is declared as a <code>@Bean</code> there :)"},{"owner":{"account_id":480584,"reputation":8228,"user_id":893898,"accept_rate":42,"display_name":"Hantsy"},"score":0,"creation_date":1669203355,"post_id":74545283,"comment_id":131589993,"body_markdown":"LocalValidatorFactoryBean  is configured automatically in Spring Boot.","body":"LocalValidatorFactoryBean  is configured automatically in Spring Boot."},{"owner":{"account_id":6676840,"reputation":2927,"user_id":5151202,"display_name":"times29"},"score":0,"creation_date":1669645171,"post_id":74545283,"comment_id":131682717,"body_markdown":"@Hantsy yet it was needed to make it work. You sure about this? ;)","body":"@Hantsy yet it was needed to make it work. You sure about this? ;)"},{"owner":{"account_id":480584,"reputation":8228,"user_id":893898,"accept_rate":42,"display_name":"Hantsy"},"score":0,"creation_date":1669646574,"post_id":74545283,"comment_id":131683228,"body_markdown":"@Times I am 100% sure it is not required. Check my example link and research yourself.","body":"@Times I am 100% sure it is not required. Check my example link and research yourself."}],"tags":[],"owner":{"account_id":6676840,"reputation":2927,"user_id":5151202,"display_name":"times29"},"comment_count":7,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1669201678,"creation_date":1669199185,"answer_id":74545283,"question_id":74543673,"body_markdown":"It seems that the autowiring of your `UserService` does not work correctly which leads to a NPE when the validator tries to call the `findUserByUserEmail` on your `UserService`. Try the following validator:\r\n```java\r\n@Documented\r\n@Target(FIELD)\r\n@Retention(RUNTIME)\r\n@Constraint(validatedBy = UniqueEmail.Validator.class)\r\npublic @interface UniqueEmail {\r\n\r\n    String message() default &quot;There is already a user with this email!&quot;;\r\n\r\n    Class&lt;?&gt;[] groups() default {};\r\n\r\n    Class&lt;? extends Payload&gt;[] payload() default {};\r\n\r\n    class Validator implements ConstraintValidator&lt;UniqueEmail, String&gt; {\r\n\r\n        @Autowired\r\n        private UserService userService;\r\n\r\n        @Override\r\n        public void initialize(UniqueEmail constraintAnnotation) {}\r\n\r\n        @Override\r\n        public boolean isValid(String email, ConstraintValidatorContext context) {\r\n            return value != null &amp;&amp; !userService.findUserByUserEmail(value);\r\n        }\r\n\r\n    }\r\n}\r\n```\r\nMake sure to define a `LocalValidatorFactoryBean` as well:\r\n```java\r\n@Configuration\r\npublic class ValidationConfiguration {\r\n\r\n    @Bean\r\n    @Primary\r\n    LocalValidatorFactoryBean localValidatorFactoryBean() {\r\n        return new LocalValidatorFactoryBean();\r\n    }\r\n\r\n}\r\n```\r\n\r\nFor me, this apporach worked at several places.\r\n\r\nBy the way, I strongly recommend using exists queries instead of find queries and then checking if the object is not null. With your way, you load the whole entity from the database just to check if it is present. It is much more performant if you let your JPA provider execute a SQL exists query instead. You can write exists queries in your repository as follows:\r\n```java\r\npublic interface UserRepository extends JpaRepository&lt;User,Long&gt; {\r\n\r\n   boolean existsByEmail(String email);\r\n\r\n   boolean existsByUsername(String email);\r\n\r\n}\r\n```\r\n\r\nFor more information check the [Spring Reference](https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#appendix.query.method.subject) or this [Baeldung article](https://www.baeldung.com/spring-data-exists-query).","title":"ConstraintValidator is not working (how can I do it?)","body":"<p>It seems that the autowiring of your <code>UserService</code> does not work correctly which leads to a NPE when the validator tries to call the <code>findUserByUserEmail</code> on your <code>UserService</code>. Try the following validator:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Documented\n@Target(FIELD)\n@Retention(RUNTIME)\n@Constraint(validatedBy = UniqueEmail.Validator.class)\npublic @interface UniqueEmail {\n\n    String message() default &quot;There is already a user with this email!&quot;;\n\n    Class&lt;?&gt;[] groups() default {};\n\n    Class&lt;? extends Payload&gt;[] payload() default {};\n\n    class Validator implements ConstraintValidator&lt;UniqueEmail, String&gt; {\n\n        @Autowired\n        private UserService userService;\n\n        @Override\n        public void initialize(UniqueEmail constraintAnnotation) {}\n\n        @Override\n        public boolean isValid(String email, ConstraintValidatorContext context) {\n            return value != null &amp;&amp; !userService.findUserByUserEmail(value);\n        }\n\n    }\n}\n</code></pre>\n<p>Make sure to define a <code>LocalValidatorFactoryBean</code> as well:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\npublic class ValidationConfiguration {\n\n    @Bean\n    @Primary\n    LocalValidatorFactoryBean localValidatorFactoryBean() {\n        return new LocalValidatorFactoryBean();\n    }\n\n}\n</code></pre>\n<p>For me, this apporach worked at several places.</p>\n<p>By the way, I strongly recommend using exists queries instead of find queries and then checking if the object is not null. With your way, you load the whole entity from the database just to check if it is present. It is much more performant if you let your JPA provider execute a SQL exists query instead. You can write exists queries in your repository as follows:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public interface UserRepository extends JpaRepository&lt;User,Long&gt; {\n\n   boolean existsByEmail(String email);\n\n   boolean existsByUsername(String email);\n\n}\n</code></pre>\n<p>For more information check the <a href=\"https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#appendix.query.method.subject\" rel=\"nofollow noreferrer\">Spring Reference</a> or this <a href=\"https://www.baeldung.com/spring-data-exists-query\" rel=\"nofollow noreferrer\">Baeldung article</a>.</p>\n"},{"tags":[],"owner":{"account_id":480584,"reputation":8228,"user_id":893898,"accept_rate":42,"display_name":"Hantsy"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1669203040,"creation_date":1669203040,"answer_id":74546085,"question_id":74543673,"body_markdown":"I created an example project based on your code fragments in your original post. \r\n\r\nBut I slightly changed the implementation of ConstraintValidator.\r\n\r\n```java\r\n@RequiredArgsConstructor\r\nclass UniqueEmailValidator implements ConstraintValidator&lt;UniqueEmail, String&gt; {\r\n    private final UserAccountRepository userAccounts;\r\n\r\n    @Override\r\n    public void initialize(UniqueEmail constraintAnnotation) {\r\n    }\r\n\r\n    @Override\r\n    public boolean isValid(String value, ConstraintValidatorContext context) {\r\n        if (StringUtils.hasText(value)) {\r\n            return !userAccounts.existsByEmail(value);\r\n        }\r\n\r\n        // empty or blank text, skip to use @NotBlank @NotEmpty to validate it.\r\n        return true;\r\n    }\r\n}\r\n```\r\n\r\nAnd I added a simple test to verify it. \r\n\r\n```java\r\n@Test\r\npublic void testSaveUserAccount() throws Exception {\r\n        when(userAccounts.existsByEmail(anyString())).thenReturn(true);\r\n\r\n        var body = objectMapper.writeValueAsBytes(new CreateUserAccountCommand(&quot;foo@bar.com&quot;, &quot;test&quot;));\r\n        mockMvc.perform(post(&quot;/users&quot;).contentType(MediaType.APPLICATION_JSON).content(body))\r\n                .andExpect(status().isBadRequest());\r\n\r\n        verify(userAccounts, atLeastOnce()).existsByEmail(anyString());\r\n        verifyNoMoreInteractions(userAccounts);\r\n}\r\n```\r\n\r\nRun the tests in IDE, you can the constraints violations in the console like this.\r\n\r\n```bash\r\n[Field error in object &#39;createUserAccountCommand&#39; on field &#39;email&#39;: \r\nrejected value [foo@bar.com]; \r\ncodes [UniqueEmail.createUserAccountCommand.email,UniqueEmail.email,UniqueEmail.java.lang.String,UniqueEmail];\r\n arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [createUserAccountCommand.email,email]; \r\narguments []; default message [email]]; \r\ndefault message [There is already user with this email!]] ]\r\n```\r\n\r\nCheck [my example project](https://github.com/hantsy/spring-puzzles/tree/master/custom-validator) from my Github.","title":"ConstraintValidator is not working (how can I do it?)","body":"<p>I created an example project based on your code fragments in your original post.</p>\n<p>But I slightly changed the implementation of ConstraintValidator.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@RequiredArgsConstructor\nclass UniqueEmailValidator implements ConstraintValidator&lt;UniqueEmail, String&gt; {\n    private final UserAccountRepository userAccounts;\n\n    @Override\n    public void initialize(UniqueEmail constraintAnnotation) {\n    }\n\n    @Override\n    public boolean isValid(String value, ConstraintValidatorContext context) {\n        if (StringUtils.hasText(value)) {\n            return !userAccounts.existsByEmail(value);\n        }\n\n        // empty or blank text, skip to use @NotBlank @NotEmpty to validate it.\n        return true;\n    }\n}\n</code></pre>\n<p>And I added a simple test to verify it.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Test\npublic void testSaveUserAccount() throws Exception {\n        when(userAccounts.existsByEmail(anyString())).thenReturn(true);\n\n        var body = objectMapper.writeValueAsBytes(new CreateUserAccountCommand(&quot;foo@bar.com&quot;, &quot;test&quot;));\n        mockMvc.perform(post(&quot;/users&quot;).contentType(MediaType.APPLICATION_JSON).content(body))\n                .andExpect(status().isBadRequest());\n\n        verify(userAccounts, atLeastOnce()).existsByEmail(anyString());\n        verifyNoMoreInteractions(userAccounts);\n}\n</code></pre>\n<p>Run the tests in IDE, you can the constraints violations in the console like this.</p>\n<pre class=\"lang-bash prettyprint-override\"><code>[Field error in object 'createUserAccountCommand' on field 'email': \nrejected value [foo@bar.com]; \ncodes [UniqueEmail.createUserAccountCommand.email,UniqueEmail.email,UniqueEmail.java.lang.String,UniqueEmail];\n arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [createUserAccountCommand.email,email]; \narguments []; default message [email]]; \ndefault message [There is already user with this email!]] ]\n</code></pre>\n<p>Check <a href=\"https://github.com/hantsy/spring-puzzles/tree/master/custom-validator\" rel=\"nofollow noreferrer\">my example project</a> from my Github.</p>\n"},{"comments":[{"owner":{"account_id":6676840,"reputation":2927,"user_id":5151202,"display_name":"times29"},"score":0,"creation_date":1669645270,"post_id":74548052,"comment_id":131682753,"body_markdown":"This is generally a good approach as you can stop processing a request earlier in comparison to when the entity is persisted. You might have already executed several requests before the validation was triggered. Glad I could help :)","body":"This is generally a good approach as you can stop processing a request earlier in comparison to when the entity is persisted. You might have already executed several requests before the validation was triggered. Glad I could help :)"}],"tags":[],"owner":{"account_id":19847496,"reputation":41,"user_id":14538782,"display_name":"smhylc"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669212186,"creation_date":1669212186,"answer_id":74548052,"question_id":74543673,"body_markdown":"Solution for my side \r\n\r\nı have user entity class I removed all validation annotations from the pure entity class. \r\n\r\n    \r\n    @Entity\r\n    @Getter\r\n    @Setter\r\n    @Table(name = &quot;users&quot;)\r\n    @NoArgsConstructor\r\n    @AllArgsConstructor\r\n    public class User {\r\n    \r\n    \t@Id\r\n    \t@GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    \tprivate Long userid;\r\n    \tprivate String username;\r\n    \tprivate String userDisplayName;\r\n    \tprivate String email;\r\n    \tprivate String password;\r\n    \r\n    }\r\n\r\n\r\n\r\n\r\n\r\nUserDTO -&gt; I put all the properties related to validation in the DTO class and requested the DTO data from the client in the controller layer. \r\n\r\n\r\n\r\n    @Getter\r\n    @Setter\r\n    public class UserRequestDTO implements Serializable {\r\n    \r\n    \r\n    \t@NotNull\r\n    \t@NotEmpty\r\n    \t@Size(min = 2,max = 20)\r\n    \tprivate String username;\r\n    \r\n    \r\n    \t@NotNull\r\n    \t@NotEmpty\r\n    \t@Size(min = 2,max = 20)\r\n    \t@UsernameControl\r\n    \tprivate String email;\r\n    \r\n    \r\n    \r\n    \t@NotNull\r\n    \t@NotEmpty\r\n    \tprivate String userDisplayName;\r\n    \r\n    \t@Column\r\n    \t@NotNull\r\n    \t@NotEmpty\r\n    \tprivate String password;\r\n    \r\n    }\r\n\r\n\r\n\r\n\r\n\r\n**thanks to these 2 wonderful people for their ideas and for helping me solve the problem**:[Hantsy][1] and [Times][2]\r\n\r\n\r\n  [1]: https://stackoverflow.com/users/893898/hantsy\r\n  [2]: https://stackoverflow.com/users/5151202/times","title":"ConstraintValidator is not working (how can I do it?)","body":"<p>Solution for my side</p>\n<p>ı have user entity class I removed all validation annotations from the pure entity class.</p>\n<pre><code>@Entity\n@Getter\n@Setter\n@Table(name = &quot;users&quot;)\n@NoArgsConstructor\n@AllArgsConstructor\npublic class User {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long userid;\n    private String username;\n    private String userDisplayName;\n    private String email;\n    private String password;\n\n}\n</code></pre>\n<p>UserDTO -&gt; I put all the properties related to validation in the DTO class and requested the DTO data from the client in the controller layer.</p>\n<pre><code>@Getter\n@Setter\npublic class UserRequestDTO implements Serializable {\n\n\n    @NotNull\n    @NotEmpty\n    @Size(min = 2,max = 20)\n    private String username;\n\n\n    @NotNull\n    @NotEmpty\n    @Size(min = 2,max = 20)\n    @UsernameControl\n    private String email;\n\n\n\n    @NotNull\n    @NotEmpty\n    private String userDisplayName;\n\n    @Column\n    @NotNull\n    @NotEmpty\n    private String password;\n\n}\n</code></pre>\n<p><strong>thanks to these 2 wonderful people for their ideas and for helping me solve the problem</strong>:<a href=\"https://stackoverflow.com/users/893898/hantsy\">Hantsy</a> and <a href=\"https://stackoverflow.com/users/5151202/times\">Times</a></p>\n"}],"owner":{"account_id":19847496,"reputation":41,"user_id":14538782,"display_name":"smhylc"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2179,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":74545283,"answer_count":3,"score":2,"last_activity_date":1669213264,"creation_date":1669191691,"question_id":74543673,"body_markdown":"I will try to explain it as simple as I can.  I have one entity class, one service, one repository. \r\n\r\n\r\n\r\nUser.class\r\n\r\n```java\r\n@NotNull\r\n@NotEmpty\r\n@UniqueEmail\r\nprivate String email;\r\n```\r\n\r\n\r\nUserRepo\r\n\r\n\r\n```java\r\npublic interface UserRepository extends JpaRepository&lt;User,Long&gt; {\r\n\r\n   boolean findByEmail(String email);\r\n\r\n}\r\n```\r\n\r\n\r\nUserService \r\n\r\n```java\r\n@Service\r\npublic class UserService {\r\n\r\n\tprivate final UserRepository userRepository;\r\n\r\n\tPasswordEncoder passwordEncoder;\r\n\r\n\tpublic UserService(UserRepository userRepository) {\r\n\t\tthis.userRepository = userRepository;\r\n\t\tthis.passwordEncoder = new BCryptPasswordEncoder();\r\n\r\n\t}\r\n\r\n\r\n\tpublic UserResponseDTO createUser(UserRequestDTO userRequestDTO){\r\n\t\tuserRequestDTO.setPassword(passwordEncoder.encode(userRequestDTO.getPassword()));\r\n\t\tUser u = userRepository.save(UserMapper.INSTANCE.entityToDto(userRequestDTO));\r\n\t\treturn UserMapper.INSTANCE.toEntity(u);\r\n\t}\r\n\r\n\tpublic boolean findUserByUserName(String email){\r\n\r\n\t\tif(userRepository.findByUsername(email)){\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\r\n\t}\r\n\r\n\tpublic boolean findUserByUserEmail(String email){\r\n\r\n\t\tif(userRepository.findByEmail(email)){\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t}\r\n\r\n}\r\n```\r\n\r\nUserController\r\n\r\n\r\n```java\r\n@CrossOrigin\r\n@RestController\r\npublic class UserController {\r\n\r\n\r\n   private final String endPointName = &quot;api&quot;;\r\n\r\n\r\n   @Autowired\r\n   private UserService userService;\r\n\r\n\r\n   @ResponseStatus(HttpStatus.CREATED)\r\n   @PostMapping(path = endPointName+&quot;/addUser&quot;, consumes = &quot;application/json&quot;)\r\n   public GenericResponseMessage addUser(@Valid @RequestBody UserRequestDTO userRequestDTO){\r\n\r\n      userService.createUser(userRequestDTO);\r\n      return new GenericResponseMessage(&quot;ok&quot;);\r\n\r\n   }\r\n\r\n}\r\n```\r\n\r\n\r\n\r\nValidator Annotation \r\n\r\n\r\n```java\r\n@Constraint(validatedBy = UniqueEmailValidator.class)\r\n@Retention(RetentionPolicy.RUNTIME)\r\n@Target({ ElementType.FIELD })\r\npublic @interface UniqueEmail {\r\n\r\n   public String message() default &quot;There is already user with this email!&quot;;\r\n\r\n   public Class&lt;?&gt;[] groups() default {};\r\n\r\n   public Class&lt;? extends Payload&gt;[] payload() default{};\r\n\r\n}\r\n```\r\n\r\nUniqueEmailValidator class \r\n\r\n\r\n```java\r\n@Component\r\npublic class UniqueEmailValidator implements ConstraintValidator&lt;UniqueEmail, String&gt; {\r\n\r\n   @Autowired\r\n   private UserService userService;\r\n\r\n   @Override\r\n   public boolean isValid(String value, ConstraintValidatorContext context) {\r\n      return value != null &amp;&amp; !userService.findUserByUserEmail(value);\r\n   }\r\n\r\n}\r\n```\r\n\r\n**[API ERROR][1]**\r\n\r\n```json\r\n{\r\n     &quot;timestamp&quot;: &quot;2022-11-23T08:51:07.717+00:00&quot;,\r\n     &quot;status&quot;: 500,\r\n     &quot;error&quot;: &quot;Internal Server Error&quot;,\r\n     &quot;trace&quot;: &quot;javax.validation.ValidationException: HV000028: Unexpected exception during isValid call.\\n\\tat org.hibernate.validator.internal.engine.constraintvalidation.ConstraintTree.validateSingleConstraint(ConstraintTree.java:186)\\n\\tat org.hibernate.validator.internal.engine.constraintvalidation.SimpleConstraintTree.validateConstraints(SimpleConstraintTree.java:62)\\n\\tat org.hibernate.validator.internal.engine.constraintvalidation.ConstraintTree.validateConstraints(ConstraintTree.java:75)\\n\\tat org.hibernate.validator.internal.metadata.core.MetaConstraint.doValidateConstraint(MetaConstraint.java:130)\\n\\tat org.hibernate.validator.internal.metadata.core.MetaConstraint.validateConstraint(MetaConstraint.java:123)\\n\\tat org.hibernate.validator.internal.engine.ValidatorImpl.validateMetaConstraint(ValidatorImpl.java:555)\\n\\tat bla bla bla&quot;,\r\n     &quot;message&quot;: &quot;HV000028: Unexpected exception during isValid call.&quot;,\r\n     &quot;path&quot;: &quot;/api/addUser&quot;\r\n}\r\n```\r\n\r\n\r\n\r\nINTELLIJ ERROR: \r\n\r\n\r\n    java.lang.NullPointerException: null\r\n\tat mywebapp.demowebapp.constraint.UniqueEmailValidator.isValid(UniqueEmailValidator.java:22) ~[main/:na]\r\n\tat mywebapp.demowebapp.constraint.UniqueEmailValidator.isValid(UniqueEmailValidator.java:13) ~[main/:na]\r\n\tat org.hibernate.validator.internal.engine.constraintvalidation.ConstraintTree.validateSingleConstraint(ConstraintTree.java:180) ~[hibernate-validator-6.2.5.Final.jar:6.2.5.Final]\r\n\tat org.hibernate.validator.internal.engine.constraintvalidation.SimpleConstraintTree.validateConstraints(SimpleConstraintTree.java:62) ~[hibernate-validator-6.2.5.Final.jar:6.2.5.Final]\r\n\tat org.hibernate.validator.internal.engine.constraintvalidation.ConstraintTree.validateConstraints(ConstraintTree.java:75) ~[hibernate-validator-6.2.5.Final.jar:6.2.5.Final]\r\n\tat org.hibernate.validator.internal.metadata.core.MetaConstraint.doValidateConstraint(MetaConstraint.java:130) ~[hibernate-validator-6.2.5.Final.jar:6.2.5.Final]\r\n\tat org.hibernate.validator.internal.metadata.core.MetaConstraint.validateConstraint(MetaConstraint.java:123) ~[hibernate-validator-6.2.5.Final.jar:6.2.5.Final]\r\n\tat org.hibernate.validator.internal.engine.ValidatorImpl.validateMetaConstraint(ValidatorImpl.java:555) ~[hibernate-validator-6.2.5.Final.jar:6.2.5.Final]\r\n\tat org.hibernate.validator.internal.engine.ValidatorImpl.validateConstraintsForSingleDefaultGroupElement(ValidatorImpl.java:518) ~[hibernate-validator-6.2.5.Final.jar:6.2.5.Final]\r\n\tat org.hibernate.validator.internal.engine.ValidatorImpl.validateConstraintsForDefaultGroup(ValidatorImpl.java:488) ~[hibernate-validator-6.2.5.Final.jar:6.2.5.Final]\r\n\tat org.hibernate.validator.internal.engine.ValidatorImpl.validateConstraintsForCurrentGroup(ValidatorImpl.java:450) ~[hibernate-validator-6.2.5.Final.jar:6.2.5.Final]\r\n\tat org.hibernate.validator.internal.engine.ValidatorImpl.validateInContext(ValidatorImpl.java:400) ~[hibernate-validator-6.2.5.Final.jar:6.2.5.Final]\r\n\tat org.hibernate.validator.internal.engine.ValidatorImpl.validate(ValidatorImpl.java:172) ~[hibernate-validator-6.2.5.Final.jar:6.2.5.Final]\r\n\tat org.hibernate.cfg.beanvalidation.BeanValidationEventListener.validate(BeanValidationEventListener.java:116) ~[hibernate-core-5.6.12.Final.jar:5.6.12.Final]\r\n\tat org.hibernate.cfg.beanvalidation.BeanValidationEventListener.onPreInsert(BeanValidationEventListener.java:80) ~[hibernate-core-5.6.12.Final.jar:5.6.12.Final]\r\n\tat org.hibernate.action.internal.EntityIdentityInsertAction.preInsert(EntityIdentityInsertAction.java:188) ~[hibernate-core-5.6.12.Final.jar:5.6.12.Final]\r\n\tat org.hibernate.action.internal.EntityIdentityInsertAction.execute(EntityIdentityInsertAction.java:78) ~[hibernate-core-5.6.12.Final.jar:5.6.12.Final]\r\n\tat org.hibernate.engine.spi.ActionQueue.execute(ActionQueue.java:645) ~[hibernate-core-5.6.12.Final.jar:5.6.12.Final]\r\n\tat org.hibernate.engine.spi.ActionQueue.addResolvedEntityInsertAction(ActionQueue.java:282) ~[hibernate-core-5.6.12.Final.jar:5.6.12.Final]\r\n\tat org.hibernate.engine.spi.ActionQueue.addInsertAction(ActionQueue.java:263) ~[hibernate-core-5.6.12.Final.jar:5.6.12.Final]\r\n\tat org.hibernate.engine.spi.ActionQueue.addAction(ActionQueue.java:317) ~[hibernate-core-5.6.12.Final.jar:5.6.12.Final]\r\n\tat org.hibernate.event.internal.AbstractSaveEventListener.addInsertAction(AbstractSaveEventListener.java:330) ~[hibernate-core-5.6.12.Final.jar:5.6.12.Final]\r\n\tat org.hibernate.event.internal.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:287) ~[hibernate-core-5.6.12.Final.jar:5.6.12.Final]\r\n\tat org.hibernate.event.internal.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:193) ~[hibernate-core-5.6.12.Final.jar:5.6.12.Final]\r\n\tat org.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:123) ~[hibernate-core-5.6.12.Final.jar:5.6.12.Final]\r\n\tat org.hibernate.event.internal.DefaultPersistEventListener.entityIsTransient(DefaultPersistEventListener.java:185) ~[hibernate-core-5.6.12.Final.jar:5.6.12.Final]\r\n\tat org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:128) ~[hibernate-core-5.6.12.Final.jar:5.6.12.Final]\r\n\tat org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:55) ~[hibernate-core-5.6.12.Final.jar:5.6.12.Final]\r\n\tat org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107) ~[hibernate-core-5.6.12.Final.jar:5.6.12.Final]\r\n\tat org.hibernate.internal.SessionImpl.firePersist(SessionImpl.java:756) ~[hibernate-core-5.6.12.Final.jar:5.6.12.Final]\r\n\tat org.hibernate.internal.SessionImpl.persist(SessionImpl.java:742) ~[hibernate-core-5.6.12.Final.jar:5.6.12.Final]\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:na]\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:566) ~[na:na]\r\n\tat org.springframework.orm.jpa.ExtendedEntityManagerCreator$ExtendedEntityManagerInvocationHandler.invoke(ExtendedEntityManagerCreator.java:362) ~[spring-orm-5.3.23.jar:5.3.23]\r\n\tat com.sun.proxy.$Proxy105.persist(Unknown Source) ~[na:na]\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:na]\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:566) ~[na:na]\r\n\tat org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:311) ~[spring-orm-5.3.23.jar:5.3.23]\r\n\tat com.sun.proxy.$Proxy105.persist(Unknown Source) ~[na:na]\r\n\tat org.springframework.data.jpa.repository.support.SimpleJpaRepository.save(SimpleJpaRepository.java:666) ~[spring-data-jpa-2.7.5.jar:2.7.5]\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:na]\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:566) ~[na:na]\r\n\tat org.springframework.data.repository.core.support.RepositoryMethodInvoker$RepositoryFragmentMethodInvoker.lambda$new$0(RepositoryMethodInvoker.java:289) ~[spring-data-commons-2.7.5.jar:2.7.5]\r\n\tat org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:137) ~[spring-data-commons-2.7.5.jar:2.7.5]\r\n\tat org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:121) ~[spring-data-commons-2.7.5.jar:2.7.5]\r\n\tat org.springframework.data.repository.core.support.RepositoryComposition$RepositoryFragments.invoke(RepositoryComposition.java:530) ~[spring-data-commons-2.7.5.jar:2.7.5]\r\n\tat org.springframework.data.repository.core.support.RepositoryComposition.invoke(RepositoryComposition.java:286) ~[spring-data-commons-2.7.5.jar:2.7.5]\r\n\tat org.springframework.data.repository.core.support.RepositoryFactorySupport$ImplementationMethodExecutionInterceptor.invoke(RepositoryFactorySupport.java:640) ~[spring-data-commons-2.7.5.jar:2.7.5]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.3.23.jar:5.3.23]\r\n\tat org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164) ~[spring-data-commons-2.7.5.jar:2.7.5]\r\n\tat org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:139) ~[spring-data-commons-2.7.5.jar:2.7.5]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.3.23.jar:5.3.23]\r\n\tat org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:81) ~[spring-data-commons-2.7.5.jar:2.7.5]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.3.23.jar:5.3.23]\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123) ~[spring-tx-5.3.23.jar:5.3.23]\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388) ~[spring-tx-5.3.23.jar:5.3.23]\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-5.3.23.jar:5.3.23]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.3.23.jar:5.3.23]\r\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137) ~[spring-tx-5.3.23.jar:5.3.23]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.3.23.jar:5.3.23]\r\n\tat org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:174) ~[spring-data-jpa-2.7.5.jar:2.7.5]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.3.23.jar:5.3.23]\r\n\tat org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97) ~[spring-aop-5.3.23.jar:5.3.23]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.3.23.jar:5.3.23]\r\n\tat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215) ~[spring-aop-5.3.23.jar:5.3.23]\r\n\tat com.sun.proxy.$Proxy109.save(Unknown Source) ~[na:na]\r\n\tat mywebapp.demowebapp.service.UserService.createUser(UserService.java:35) ~[main/:na]\r\n\tat mywebapp.demowebapp.controller.UserController.addUser(UserController.java:32) ~[main/:na]\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:na]\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:566) ~[na:na]\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-5.3.23.jar:5.3.23]\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-5.3.23.jar:5.3.23]\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117) ~[spring-webmvc-5.3.23.jar:5.3.23]\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.3.23.jar:5.3.23]\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808) ~[spring-webmvc-5.3.23.jar:5.3.23]\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.3.23.jar:5.3.23]\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1071) ~[spring-webmvc-5.3.23.jar:5.3.23]\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:964) ~[spring-webmvc-5.3.23.jar:5.3.23]\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.3.23.jar:5.3.23]\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909) ~[spring-webmvc-5.3.23.jar:5.3.23]\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:696) ~[tomcat-embed-core-9.0.68.jar:4.0.FR]\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.3.23.jar:5.3.23]\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:779) ~[tomcat-embed-core-9.0.68.jar:4.0.FR]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.68.jar:9.0.68]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.23.jar:5.3.23]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.23.jar:5.3.23]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.23.jar:5.3.23]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.23.jar:5.3.23]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.23.jar:5.3.23]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.23.jar:5.3.23]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:360) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:893) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1789) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\r\n\tat java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]\r\n\r\n\r\n\r\nI added `@Component` annotation **but it did not work.**\r\n\r\nI edit and try `@Valid` annotation `@Valited` ***but it did not work***.\r\n\r\nI add\r\n\r\n&quot;spring.jpa.properties.javax.persistence.validation.mode = none&quot; \r\n\r\nin application.properties file. If I add this, **the error goes away but the &quot;validation&quot; in the whole system is disabled.**\r\n\r\n\r\nIf I remove\r\n\r\n**&quot;spring.jpa.properties.javax.persistence.validation.mode = none&quot;** \r\n\r\nall validations like @NotNull, @NotEmpty, @Pattern etc are working except the annotation I created. \r\n\r\nBut if I add\r\n\r\n**&quot;spring.jpa.properties.javax.persistence.validation.mode = none&quot;**\r\n\r\nall of them are disabled, and the data is entered into the database without any checks. \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/ue8N1.png","title":"ConstraintValidator is not working (how can I do it?)","body":"<p>I will try to explain it as simple as I can.  I have one entity class, one service, one repository.</p>\n<p>User.class</p>\n<pre class=\"lang-java prettyprint-override\"><code>@NotNull\n@NotEmpty\n@UniqueEmail\nprivate String email;\n</code></pre>\n<p>UserRepo</p>\n<pre class=\"lang-java prettyprint-override\"><code>public interface UserRepository extends JpaRepository&lt;User,Long&gt; {\n\n   boolean findByEmail(String email);\n\n}\n</code></pre>\n<p>UserService</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Service\npublic class UserService {\n\n    private final UserRepository userRepository;\n\n    PasswordEncoder passwordEncoder;\n\n    public UserService(UserRepository userRepository) {\n        this.userRepository = userRepository;\n        this.passwordEncoder = new BCryptPasswordEncoder();\n\n    }\n\n\n    public UserResponseDTO createUser(UserRequestDTO userRequestDTO){\n        userRequestDTO.setPassword(passwordEncoder.encode(userRequestDTO.getPassword()));\n        User u = userRepository.save(UserMapper.INSTANCE.entityToDto(userRequestDTO));\n        return UserMapper.INSTANCE.toEntity(u);\n    }\n\n    public boolean findUserByUserName(String email){\n\n        if(userRepository.findByUsername(email)){\n            return true;\n        }\n\n        return false;\n\n    }\n\n    public boolean findUserByUserEmail(String email){\n\n        if(userRepository.findByEmail(email)){\n            return true;\n        }\n\n        return false;\n    }\n\n}\n</code></pre>\n<p>UserController</p>\n<pre class=\"lang-java prettyprint-override\"><code>@CrossOrigin\n@RestController\npublic class UserController {\n\n\n   private final String endPointName = &quot;api&quot;;\n\n\n   @Autowired\n   private UserService userService;\n\n\n   @ResponseStatus(HttpStatus.CREATED)\n   @PostMapping(path = endPointName+&quot;/addUser&quot;, consumes = &quot;application/json&quot;)\n   public GenericResponseMessage addUser(@Valid @RequestBody UserRequestDTO userRequestDTO){\n\n      userService.createUser(userRequestDTO);\n      return new GenericResponseMessage(&quot;ok&quot;);\n\n   }\n\n}\n</code></pre>\n<p>Validator Annotation</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Constraint(validatedBy = UniqueEmailValidator.class)\n@Retention(RetentionPolicy.RUNTIME)\n@Target({ ElementType.FIELD })\npublic @interface UniqueEmail {\n\n   public String message() default &quot;There is already user with this email!&quot;;\n\n   public Class&lt;?&gt;[] groups() default {};\n\n   public Class&lt;? extends Payload&gt;[] payload() default{};\n\n}\n</code></pre>\n<p>UniqueEmailValidator class</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Component\npublic class UniqueEmailValidator implements ConstraintValidator&lt;UniqueEmail, String&gt; {\n\n   @Autowired\n   private UserService userService;\n\n   @Override\n   public boolean isValid(String value, ConstraintValidatorContext context) {\n      return value != null &amp;&amp; !userService.findUserByUserEmail(value);\n   }\n\n}\n</code></pre>\n<p><strong><a href=\"https://i.stack.imgur.com/ue8N1.png\" rel=\"nofollow noreferrer\">API ERROR</a></strong></p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n     &quot;timestamp&quot;: &quot;2022-11-23T08:51:07.717+00:00&quot;,\n     &quot;status&quot;: 500,\n     &quot;error&quot;: &quot;Internal Server Error&quot;,\n     &quot;trace&quot;: &quot;javax.validation.ValidationException: HV000028: Unexpected exception during isValid call.\\n\\tat org.hibernate.validator.internal.engine.constraintvalidation.ConstraintTree.validateSingleConstraint(ConstraintTree.java:186)\\n\\tat org.hibernate.validator.internal.engine.constraintvalidation.SimpleConstraintTree.validateConstraints(SimpleConstraintTree.java:62)\\n\\tat org.hibernate.validator.internal.engine.constraintvalidation.ConstraintTree.validateConstraints(ConstraintTree.java:75)\\n\\tat org.hibernate.validator.internal.metadata.core.MetaConstraint.doValidateConstraint(MetaConstraint.java:130)\\n\\tat org.hibernate.validator.internal.metadata.core.MetaConstraint.validateConstraint(MetaConstraint.java:123)\\n\\tat org.hibernate.validator.internal.engine.ValidatorImpl.validateMetaConstraint(ValidatorImpl.java:555)\\n\\tat bla bla bla&quot;,\n     &quot;message&quot;: &quot;HV000028: Unexpected exception during isValid call.&quot;,\n     &quot;path&quot;: &quot;/api/addUser&quot;\n}\n</code></pre>\n<p>INTELLIJ ERROR:</p>\n<pre><code>java.lang.NullPointerException: null\nat mywebapp.demowebapp.constraint.UniqueEmailValidator.isValid(UniqueEmailValidator.java:22) ~[main/:na]\nat mywebapp.demowebapp.constraint.UniqueEmailValidator.isValid(UniqueEmailValidator.java:13) ~[main/:na]\nat org.hibernate.validator.internal.engine.constraintvalidation.ConstraintTree.validateSingleConstraint(ConstraintTree.java:180) ~[hibernate-validator-6.2.5.Final.jar:6.2.5.Final]\nat org.hibernate.validator.internal.engine.constraintvalidation.SimpleConstraintTree.validateConstraints(SimpleConstraintTree.java:62) ~[hibernate-validator-6.2.5.Final.jar:6.2.5.Final]\nat org.hibernate.validator.internal.engine.constraintvalidation.ConstraintTree.validateConstraints(ConstraintTree.java:75) ~[hibernate-validator-6.2.5.Final.jar:6.2.5.Final]\nat org.hibernate.validator.internal.metadata.core.MetaConstraint.doValidateConstraint(MetaConstraint.java:130) ~[hibernate-validator-6.2.5.Final.jar:6.2.5.Final]\nat org.hibernate.validator.internal.metadata.core.MetaConstraint.validateConstraint(MetaConstraint.java:123) ~[hibernate-validator-6.2.5.Final.jar:6.2.5.Final]\nat org.hibernate.validator.internal.engine.ValidatorImpl.validateMetaConstraint(ValidatorImpl.java:555) ~[hibernate-validator-6.2.5.Final.jar:6.2.5.Final]\nat org.hibernate.validator.internal.engine.ValidatorImpl.validateConstraintsForSingleDefaultGroupElement(ValidatorImpl.java:518) ~[hibernate-validator-6.2.5.Final.jar:6.2.5.Final]\nat org.hibernate.validator.internal.engine.ValidatorImpl.validateConstraintsForDefaultGroup(ValidatorImpl.java:488) ~[hibernate-validator-6.2.5.Final.jar:6.2.5.Final]\nat org.hibernate.validator.internal.engine.ValidatorImpl.validateConstraintsForCurrentGroup(ValidatorImpl.java:450) ~[hibernate-validator-6.2.5.Final.jar:6.2.5.Final]\nat org.hibernate.validator.internal.engine.ValidatorImpl.validateInContext(ValidatorImpl.java:400) ~[hibernate-validator-6.2.5.Final.jar:6.2.5.Final]\nat org.hibernate.validator.internal.engine.ValidatorImpl.validate(ValidatorImpl.java:172) ~[hibernate-validator-6.2.5.Final.jar:6.2.5.Final]\nat org.hibernate.cfg.beanvalidation.BeanValidationEventListener.validate(BeanValidationEventListener.java:116) ~[hibernate-core-5.6.12.Final.jar:5.6.12.Final]\nat org.hibernate.cfg.beanvalidation.BeanValidationEventListener.onPreInsert(BeanValidationEventListener.java:80) ~[hibernate-core-5.6.12.Final.jar:5.6.12.Final]\nat org.hibernate.action.internal.EntityIdentityInsertAction.preInsert(EntityIdentityInsertAction.java:188) ~[hibernate-core-5.6.12.Final.jar:5.6.12.Final]\nat org.hibernate.action.internal.EntityIdentityInsertAction.execute(EntityIdentityInsertAction.java:78) ~[hibernate-core-5.6.12.Final.jar:5.6.12.Final]\nat org.hibernate.engine.spi.ActionQueue.execute(ActionQueue.java:645) ~[hibernate-core-5.6.12.Final.jar:5.6.12.Final]\nat org.hibernate.engine.spi.ActionQueue.addResolvedEntityInsertAction(ActionQueue.java:282) ~[hibernate-core-5.6.12.Final.jar:5.6.12.Final]\nat org.hibernate.engine.spi.ActionQueue.addInsertAction(ActionQueue.java:263) ~[hibernate-core-5.6.12.Final.jar:5.6.12.Final]\nat org.hibernate.engine.spi.ActionQueue.addAction(ActionQueue.java:317) ~[hibernate-core-5.6.12.Final.jar:5.6.12.Final]\nat org.hibernate.event.internal.AbstractSaveEventListener.addInsertAction(AbstractSaveEventListener.java:330) ~[hibernate-core-5.6.12.Final.jar:5.6.12.Final]\nat org.hibernate.event.internal.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:287) ~[hibernate-core-5.6.12.Final.jar:5.6.12.Final]\nat org.hibernate.event.internal.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:193) ~[hibernate-core-5.6.12.Final.jar:5.6.12.Final]\nat org.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:123) ~[hibernate-core-5.6.12.Final.jar:5.6.12.Final]\nat org.hibernate.event.internal.DefaultPersistEventListener.entityIsTransient(DefaultPersistEventListener.java:185) ~[hibernate-core-5.6.12.Final.jar:5.6.12.Final]\nat org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:128) ~[hibernate-core-5.6.12.Final.jar:5.6.12.Final]\nat org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:55) ~[hibernate-core-5.6.12.Final.jar:5.6.12.Final]\nat org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107) ~[hibernate-core-5.6.12.Final.jar:5.6.12.Final]\nat org.hibernate.internal.SessionImpl.firePersist(SessionImpl.java:756) ~[hibernate-core-5.6.12.Final.jar:5.6.12.Final]\nat org.hibernate.internal.SessionImpl.persist(SessionImpl.java:742) ~[hibernate-core-5.6.12.Final.jar:5.6.12.Final]\nat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\nat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:na]\nat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\nat java.base/java.lang.reflect.Method.invoke(Method.java:566) ~[na:na]\nat org.springframework.orm.jpa.ExtendedEntityManagerCreator$ExtendedEntityManagerInvocationHandler.invoke(ExtendedEntityManagerCreator.java:362) ~[spring-orm-5.3.23.jar:5.3.23]\nat com.sun.proxy.$Proxy105.persist(Unknown Source) ~[na:na]\nat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\nat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:na]\nat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\nat java.base/java.lang.reflect.Method.invoke(Method.java:566) ~[na:na]\nat org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:311) ~[spring-orm-5.3.23.jar:5.3.23]\nat com.sun.proxy.$Proxy105.persist(Unknown Source) ~[na:na]\nat org.springframework.data.jpa.repository.support.SimpleJpaRepository.save(SimpleJpaRepository.java:666) ~[spring-data-jpa-2.7.5.jar:2.7.5]\nat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\nat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:na]\nat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\nat java.base/java.lang.reflect.Method.invoke(Method.java:566) ~[na:na]\nat org.springframework.data.repository.core.support.RepositoryMethodInvoker$RepositoryFragmentMethodInvoker.lambda$new$0(RepositoryMethodInvoker.java:289) ~[spring-data-commons-2.7.5.jar:2.7.5]\nat org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:137) ~[spring-data-commons-2.7.5.jar:2.7.5]\nat org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:121) ~[spring-data-commons-2.7.5.jar:2.7.5]\nat org.springframework.data.repository.core.support.RepositoryComposition$RepositoryFragments.invoke(RepositoryComposition.java:530) ~[spring-data-commons-2.7.5.jar:2.7.5]\nat org.springframework.data.repository.core.support.RepositoryComposition.invoke(RepositoryComposition.java:286) ~[spring-data-commons-2.7.5.jar:2.7.5]\nat org.springframework.data.repository.core.support.RepositoryFactorySupport$ImplementationMethodExecutionInterceptor.invoke(RepositoryFactorySupport.java:640) ~[spring-data-commons-2.7.5.jar:2.7.5]\nat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.3.23.jar:5.3.23]\nat org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164) ~[spring-data-commons-2.7.5.jar:2.7.5]\nat org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:139) ~[spring-data-commons-2.7.5.jar:2.7.5]\nat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.3.23.jar:5.3.23]\nat org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:81) ~[spring-data-commons-2.7.5.jar:2.7.5]\nat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.3.23.jar:5.3.23]\nat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123) ~[spring-tx-5.3.23.jar:5.3.23]\nat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388) ~[spring-tx-5.3.23.jar:5.3.23]\nat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-5.3.23.jar:5.3.23]\nat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.3.23.jar:5.3.23]\nat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137) ~[spring-tx-5.3.23.jar:5.3.23]\nat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.3.23.jar:5.3.23]\nat org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:174) ~[spring-data-jpa-2.7.5.jar:2.7.5]\nat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.3.23.jar:5.3.23]\nat org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97) ~[spring-aop-5.3.23.jar:5.3.23]\nat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.3.23.jar:5.3.23]\nat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215) ~[spring-aop-5.3.23.jar:5.3.23]\nat com.sun.proxy.$Proxy109.save(Unknown Source) ~[na:na]\nat mywebapp.demowebapp.service.UserService.createUser(UserService.java:35) ~[main/:na]\nat mywebapp.demowebapp.controller.UserController.addUser(UserController.java:32) ~[main/:na]\nat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\nat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:na]\nat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\nat java.base/java.lang.reflect.Method.invoke(Method.java:566) ~[na:na]\nat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-5.3.23.jar:5.3.23]\nat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-5.3.23.jar:5.3.23]\nat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117) ~[spring-webmvc-5.3.23.jar:5.3.23]\nat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.3.23.jar:5.3.23]\nat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808) ~[spring-webmvc-5.3.23.jar:5.3.23]\nat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.3.23.jar:5.3.23]\nat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1071) ~[spring-webmvc-5.3.23.jar:5.3.23]\nat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:964) ~[spring-webmvc-5.3.23.jar:5.3.23]\nat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.3.23.jar:5.3.23]\nat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909) ~[spring-webmvc-5.3.23.jar:5.3.23]\nat javax.servlet.http.HttpServlet.service(HttpServlet.java:696) ~[tomcat-embed-core-9.0.68.jar:4.0.FR]\nat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.3.23.jar:5.3.23]\nat javax.servlet.http.HttpServlet.service(HttpServlet.java:779) ~[tomcat-embed-core-9.0.68.jar:4.0.FR]\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\nat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.68.jar:9.0.68]\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\nat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.23.jar:5.3.23]\nat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.23.jar:5.3.23]\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\nat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.23.jar:5.3.23]\nat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.23.jar:5.3.23]\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\nat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.23.jar:5.3.23]\nat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.23.jar:5.3.23]\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\nat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\nat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\nat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\nat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\nat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\nat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\nat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:360) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\nat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\nat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\nat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:893) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\nat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1789) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\nat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\nat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\nat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\nat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\nat java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]\n</code></pre>\n<p>I added <code>@Component</code> annotation <strong>but it did not work.</strong></p>\n<p>I edit and try <code>@Valid</code> annotation <code>@Valited</code> <em><strong>but it did not work</strong></em>.</p>\n<p>I add</p>\n<p>&quot;spring.jpa.properties.javax.persistence.validation.mode = none&quot;</p>\n<p>in application.properties file. If I add this, <strong>the error goes away but the &quot;validation&quot; in the whole system is disabled.</strong></p>\n<p>If I remove</p>\n<p><strong>&quot;spring.jpa.properties.javax.persistence.validation.mode = none&quot;</strong></p>\n<p>all validations like @NotNull, @NotEmpty, @Pattern etc are working except the annotation I created.</p>\n<p>But if I add</p>\n<p><strong>&quot;spring.jpa.properties.javax.persistence.validation.mode = none&quot;</strong></p>\n<p>all of them are disabled, and the data is entered into the database without any checks.</p>\n"},{"tags":["java","hibernate","jpa","repository","persistence"],"answers":[{"comments":[{"owner":{"account_id":26470931,"reputation":41,"user_id":20111572,"display_name":"Matheus Hoffmann"},"score":0,"creation_date":1669214073,"post_id":74548295,"comment_id":131593997,"body_markdown":"It doesn&#39;t solve it, because I get the exception &quot;detached entity passed to persist hibernate&quot;.\nIf you try the .merge() of success, but continue doing the select.","body":"It doesn&#39;t solve it, because I get the exception &quot;detached entity passed to persist hibernate&quot;. If you try the .merge() of success, but continue doing the select."},{"owner":{"account_id":19496972,"reputation":2160,"user_id":14263933,"display_name":"aatwork"},"score":0,"creation_date":1669215750,"post_id":74548295,"comment_id":131594696,"body_markdown":"you need to make select under transactional context. otherwise JPA will always fetch the state from db.","body":"you need to make select under transactional context. otherwise JPA will always fetch the state from db."},{"owner":{"account_id":26470931,"reputation":41,"user_id":20111572,"display_name":"Matheus Hoffmann"},"score":0,"creation_date":1669216527,"post_id":74548295,"comment_id":131595001,"body_markdown":"I changed it to do everything inside a method annotated with @Transactional, but it didn&#39;t work.\n\nI believe it doesn&#39;t work because the select I do is in a database view that already has several unions with several tables to make it easier. Then with this view I assemble my list with the id filled in.","body":"I changed it to do everything inside a method annotated with @Transactional, but it didn&#39;t work.  I believe it doesn&#39;t work because the select I do is in a database view that already has several unions with several tables to make it easier. Then with this view I assemble my list with the id filled in."},{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":0,"creation_date":1669221783,"post_id":74548295,"comment_id":131597056,"body_markdown":"While you may be in a context, it seems like your query isn&#39;t returning managed entities, so JPA doesn&#39;t know about them. If you can, rework your query so it goes through JPA constructs and returns entities it manages within the context and it then won&#39;t have to requery for the data to determine they exist (and the deltas).","body":"While you may be in a context, it seems like your query isn&#39;t returning managed entities, so JPA doesn&#39;t know about them. If you can, rework your query so it goes through JPA constructs and returns entities it manages within the context and it then won&#39;t have to requery for the data to determine they exist (and the deltas)."}],"tags":[],"owner":{"account_id":19496972,"reputation":2160,"user_id":14263933,"display_name":"aatwork"},"comment_count":4,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1669213256,"creation_date":1669213256,"answer_id":74548295,"question_id":74548182,"body_markdown":"You need to avoid making a call to repository.save() then. You can use JPA EnityManager.\r\n\r\n    list.forEach(item -&gt; entityManager.persist(item));","title":"Avoid select before update in Hibernate/Repository save - Java","body":"<p>You need to avoid making a call to repository.save() then. You can use JPA EnityManager.</p>\n<pre><code>list.forEach(item -&gt; entityManager.persist(item));\n</code></pre>\n"}],"owner":{"account_id":26470931,"reputation":41,"user_id":20111572,"display_name":"Matheus Hoffmann"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":255,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1669213256,"creation_date":1669212717,"question_id":74548182,"body_markdown":"I already do a select in the database (oracle) before starting the process to have the data recovered.\r\n\r\nThen I see if it exists and assemble the objects according to the returned id.\r\n\r\nWhen doing the repository.save() of my list, I&#39;m doing a select before each update and I don&#39;t want that because it&#39;s taking too long to execute, because I already guaranteed initially with the select that the data is in the database.\r\n\r\nIs it possible for me to add some configuration that never selects before the update?\r\n\r\nI already tried using the @SelectBeforeUpdate(false) notation inside my entities, but it didn&#39;t make any difference.","title":"Avoid select before update in Hibernate/Repository save - Java","body":"<p>I already do a select in the database (oracle) before starting the process to have the data recovered.</p>\n<p>Then I see if it exists and assemble the objects according to the returned id.</p>\n<p>When doing the repository.save() of my list, I'm doing a select before each update and I don't want that because it's taking too long to execute, because I already guaranteed initially with the select that the data is in the database.</p>\n<p>Is it possible for me to add some configuration that never selects before the update?</p>\n<p>I already tried using the @SelectBeforeUpdate(false) notation inside my entities, but it didn't make any difference.</p>\n"},{"tags":["java","multithreading"],"comments":[{"owner":{"account_id":4698323,"reputation":6170,"user_id":3802631,"accept_rate":86,"display_name":"Jan B."},"score":0,"creation_date":1485642672,"post_id":41915413,"comment_id":71012484,"body_markdown":"Following this logic you just need to increase the number of threads by ``n`` to reduce the total processing time by ``1/n``.","body":"Following this logic you just need to increase the number of threads by <code>n</code> to reduce the total processing time by <code>1&#47;n</code>."},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1485648806,"post_id":41915413,"comment_id":71014004,"body_markdown":"The network isn&#39;t multi-threaded. You can use as many threads as you like but once you saturate the network, that&#39;s it, no further improvement possible.","body":"The network isn&#39;t multi-threaded. You can use as many threads as you like but once you saturate the network, that&#39;s it, no further improvement possible."}],"answers":[{"tags":[],"owner":{"account_id":3509196,"reputation":16493,"user_id":2933977,"display_name":"stdunbar"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1485641830,"creation_date":1485641830,"answer_id":41915454,"question_id":41915413,"body_markdown":"No, you shouldn&#39;t get x/5 seconds.  You are not thinking about the fact that you are getting 5 times the number of records in the same amount of time.  It&#39;s about throughput, not about time.","title":"Reading from Database through multiple threads in java","body":"<p>No, you shouldn't get x/5 seconds.  You are not thinking about the fact that you are getting 5 times the number of records in the same amount of time.  It's about throughput, not about time.</p>\n"},{"tags":[],"owner":{"account_id":404649,"reputation":57192,"user_id":773113,"accept_rate":72,"display_name":"Mike Nakis"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1669213203,"creation_date":1485642182,"answer_id":41915500,"question_id":41915413,"body_markdown":"Your database presumably lies on a single disk; that disk is connected to a motherboard using a single data cable; if the database server is on a network, then it is connected to that network using a single network cable; so, there is just one path that all that data has to pass through before it can arrive at your different threads and be processed.\r\n\r\nThe result is, of course, bad performance.\r\n\r\nThe lesson to take home is this:\r\n\r\n&gt; Massive I/O from the same device can never be improved by multithreading.\r\n\r\nTo put it in different terms: parallelism never increases performance when the bottleneck is the transferring of the data, and all the data come from a single sequential source.\r\n\r\nIf you had 5 different databases stored on 5 different disks, that would work better.\r\n\r\nIf transferring the data was only taking half of the total time, and the other half of the time was consumed in doing computations with the data, then you would be able to halve the total time by desynchronizing the transferring from the processing, but that would require only 2 threads. (And halving the total time would be the best that you could achieve: more threads would not increase performance.)\r\n\r\n------------------\r\n\r\nAs for why reading 20 thousand records appears to perform almost as bad as reading 20 million records, I am not sure why this is happening, but it could be due to a silly implementation of the database system that you are using.\r\n\r\nWhat ***may*** be happening is that your database system is implementing the `offset` and `limit` clauses on the database driver, meaning that it implements them on the client instead of on the server. If this is in fact what is happening, then all 20 million records are being sent from the server to the client each time, and then the `offset` and `limit` clauses on the client throw most of them away and only give you the 20 thousand that you asked for.\r\n\r\nYou might think that you should be able to trick the system to work correctly by turning the query into a subquery nested inside another query, but my experience when I tried this a long time ago with some database system that I do not remember anymore is that it would result in an error saying that `offset` and `limit` cannot appear in a subquery, they must always appear in a top-level query.  (Precisely because the database driver needed to be able to do its incredibly counter-productive filtering on the client.)\r\n\r\nAnother approach would be to assign an incrementing unique integer id to each row which has no gaps in the numbering, so that you can `select ... where unique_id &gt;= start and unique_id &lt;= (start + 20000)` which will definitely be executed on the server rather than on the client.\r\n\r\nHowever, as I wrote above, this will probably not allow you to achieve any increase in performance by parallelizing things, because you will still have to wait for a total of 20 million rows to be transmitted from the server to the client, and it does not matter whether this is done in one go or in 1000 gos of 20 thousand rows each. You cannot have two stream of rows simultaneously flying down a single wire.\r\n","title":"Reading from Database through multiple threads in java","body":"<p>Your database presumably lies on a single disk; that disk is connected to a motherboard using a single data cable; if the database server is on a network, then it is connected to that network using a single network cable; so, there is just one path that all that data has to pass through before it can arrive at your different threads and be processed.</p>\n<p>The result is, of course, bad performance.</p>\n<p>The lesson to take home is this:</p>\n<blockquote>\n<p>Massive I/O from the same device can never be improved by multithreading.</p>\n</blockquote>\n<p>To put it in different terms: parallelism never increases performance when the bottleneck is the transferring of the data, and all the data come from a single sequential source.</p>\n<p>If you had 5 different databases stored on 5 different disks, that would work better.</p>\n<p>If transferring the data was only taking half of the total time, and the other half of the time was consumed in doing computations with the data, then you would be able to halve the total time by desynchronizing the transferring from the processing, but that would require only 2 threads. (And halving the total time would be the best that you could achieve: more threads would not increase performance.)</p>\n<hr />\n<p>As for why reading 20 thousand records appears to perform almost as bad as reading 20 million records, I am not sure why this is happening, but it could be due to a silly implementation of the database system that you are using.</p>\n<p>What <em><strong>may</strong></em> be happening is that your database system is implementing the <code>offset</code> and <code>limit</code> clauses on the database driver, meaning that it implements them on the client instead of on the server. If this is in fact what is happening, then all 20 million records are being sent from the server to the client each time, and then the <code>offset</code> and <code>limit</code> clauses on the client throw most of them away and only give you the 20 thousand that you asked for.</p>\n<p>You might think that you should be able to trick the system to work correctly by turning the query into a subquery nested inside another query, but my experience when I tried this a long time ago with some database system that I do not remember anymore is that it would result in an error saying that <code>offset</code> and <code>limit</code> cannot appear in a subquery, they must always appear in a top-level query.  (Precisely because the database driver needed to be able to do its incredibly counter-productive filtering on the client.)</p>\n<p>Another approach would be to assign an incrementing unique integer id to each row which has no gaps in the numbering, so that you can <code>select ... where unique_id &gt;= start and unique_id &lt;= (start + 20000)</code> which will definitely be executed on the server rather than on the client.</p>\n<p>However, as I wrote above, this will probably not allow you to achieve any increase in performance by parallelizing things, because you will still have to wait for a total of 20 million rows to be transmitted from the server to the client, and it does not matter whether this is done in one go or in 1000 gos of 20 thousand rows each. You cannot have two stream of rows simultaneously flying down a single wire.</p>\n"},{"tags":[],"owner":{"account_id":100270,"reputation":127154,"user_id":270371,"accept_rate":33,"display_name":"davidxxx"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1485643208,"creation_date":1485642876,"answer_id":41915594,"question_id":41915413,"body_markdown":"I will not repeat what Mike Nakis says as it is true and well explained : \r\n\r\n&gt; I/O from a physical disk cannot be improved by multithreading\r\n\r\n\r\nNevertheless I would like to add something.\r\n\r\nWhen you execute a query like that :\r\n   \r\n     select * from tableName order by colname limit 20000 offset start*20000.\r\n\r\nfrom the client side you may handle the result of the query that you could improve by using multiple threads.&lt;br&gt;\r\n\r\nBut from the database side you have not the hand on the processing of the query and the Vertica database is probably designed to execute your query by performing parallel tasks according to the machine possibilities.&lt;br&gt;\r\n\r\nSo from the client side you may split the execution of your query in one, two or three parallel threads, it should not change many things finally as a professional database is designed to optimize the response time according to the number of requests it receives and machine possibilities.&lt;br&gt;\r\n\r\n\r\n","title":"Reading from Database through multiple threads in java","body":"<p>I will not repeat what Mike Nakis says as it is true and well explained : </p>\n\n<blockquote>\n  <p>I/O from a physical disk cannot be improved by multithreading</p>\n</blockquote>\n\n<p>Nevertheless I would like to add something.</p>\n\n<p>When you execute a query like that :</p>\n\n<pre><code> select * from tableName order by colname limit 20000 offset start*20000.\n</code></pre>\n\n<p>from the client side you may handle the result of the query that you could improve by using multiple threads.<br></p>\n\n<p>But from the database side you have not the hand on the processing of the query and the Vertica database is probably designed to execute your query by performing parallel tasks according to the machine possibilities.<br></p>\n\n<p>So from the client side you may split the execution of your query in one, two or three parallel threads, it should not change many things finally as a professional database is designed to optimize the response time according to the number of requests it receives and machine possibilities.<br></p>\n"},{"tags":[],"owner":{"account_id":17717155,"reputation":527,"user_id":12863192,"display_name":"Ishan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1635949714,"creation_date":1635949714,"answer_id":69826633,"question_id":41915413,"body_markdown":"In my opinion, the following is a good solution.  It has worked for us to stream and process millions of records without much of a memory and processing overhead.\r\n```\r\nPreparedStatement pstmt = conn.prepareStatement(sql, ResultSet.TYPE_FORWARD_ONLY, ResultSet.CONCUR_READ_ONLY);\r\npstmt.setFetchSize(Integer.MIN_VALUE);\r\nResultSet rs = pstmt.executeQuery();\r\nwhile(rs.next()) {\r\n\t// Do the thing\r\n}\r\n```\r\nUsing `OFFSET x LIMIT 20000` will result in the same query being executed again and again.  For 20 million records and for 20K records per execution, the query will get executed 1000 times.\r\n`OFFSET 0 LIMIT 20000` will perform well, but `OFFSET 19980000 LIMIT 20000` itself will take a lot of time.  As the query will be executed fully and then from the top it will have to ignore 19980000 records and give the last 20000.\r\n\r\nBut using the `ResultSet.TYPE_FORWARD_ONLY, ResultSet.CONCUR_READ_ONLY` options and setting the fetch size to `Integer.MIN_VALUE` will result in the query being executed only ONCE and the records will be streamed in chunks, and can be processed in a single thread.","title":"Reading from Database through multiple threads in java","body":"<p>In my opinion, the following is a good solution.  It has worked for us to stream and process millions of records without much of a memory and processing overhead.</p>\n<pre><code>PreparedStatement pstmt = conn.prepareStatement(sql, ResultSet.TYPE_FORWARD_ONLY, ResultSet.CONCUR_READ_ONLY);\npstmt.setFetchSize(Integer.MIN_VALUE);\nResultSet rs = pstmt.executeQuery();\nwhile(rs.next()) {\n    // Do the thing\n}\n</code></pre>\n<p>Using <code>OFFSET x LIMIT 20000</code> will result in the same query being executed again and again.  For 20 million records and for 20K records per execution, the query will get executed 1000 times.\n<code>OFFSET 0 LIMIT 20000</code> will perform well, but <code>OFFSET 19980000 LIMIT 20000</code> itself will take a lot of time.  As the query will be executed fully and then from the top it will have to ignore 19980000 records and give the last 20000.</p>\n<p>But using the <code>ResultSet.TYPE_FORWARD_ONLY, ResultSet.CONCUR_READ_ONLY</code> options and setting the fetch size to <code>Integer.MIN_VALUE</code> will result in the query being executed only ONCE and the records will be streamed in chunks, and can be processed in a single thread.</p>\n"}],"owner":{"account_id":6943198,"reputation":19,"user_id":5328738,"display_name":"Parikh"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4638,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":4,"score":1,"last_activity_date":1669213203,"creation_date":1485641534,"question_id":41915413,"body_markdown":"I am reading data from vertica database using multiple threads in java. \r\nI have around 20 million records and I am opening 5 different threads having select queries like this....\r\n\r\n    start = threadnum;\r\n\r\n    while (start*20000&lt;=totalRecords){\r\n\r\n        select * from tableName order by colname limit 20000 offset start*20000.\r\n\r\n        start +=5;\r\n\r\n    }\r\n\r\nThe above query assigns 20K distinct records to read from db to each thread.\r\nfor eg the first thread will read first 20k records then 20K records starting from 100 000 position,etc\r\n\r\nBut I am not getting performance improvement. In fact using a single thread if it takes x seconds to read 20 million records then it is taking almost x seconds for each thread to read from database.\r\nShouldn&#39;t there be some improvement from x seconds (was expecting x/5 seconds)?\r\n\r\nCan anybody pinpoint what is going wrong?","title":"Reading from Database through multiple threads in java","body":"<p>I am reading data from vertica database using multiple threads in java. \nI have around 20 million records and I am opening 5 different threads having select queries like this....</p>\n\n<pre><code>start = threadnum;\n\nwhile (start*20000&lt;=totalRecords){\n\n    select * from tableName order by colname limit 20000 offset start*20000.\n\n    start +=5;\n\n}\n</code></pre>\n\n<p>The above query assigns 20K distinct records to read from db to each thread.\nfor eg the first thread will read first 20k records then 20K records starting from 100 000 position,etc</p>\n\n<p>But I am not getting performance improvement. In fact using a single thread if it takes x seconds to read 20 million records then it is taking almost x seconds for each thread to read from database.\nShouldn't there be some improvement from x seconds (was expecting x/5 seconds)?</p>\n\n<p>Can anybody pinpoint what is going wrong?</p>\n"},{"tags":["java","algorithm","sorting","arraylist","comparator"],"comments":[{"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"score":1,"creation_date":1669188504,"post_id":74543041,"comment_id":131585089,"body_markdown":"[This page](https://www.baeldung.com/java-8-comparator-comparing) has a pretty reasonable explanation of how to do this.","body":"<a href=\"https://www.baeldung.com/java-8-comparator-comparing\" rel=\"nofollow noreferrer\">This page</a> has a pretty reasonable explanation of how to do this."}],"answers":[{"comments":[{"owner":{"account_id":23543440,"reputation":1,"user_id":17587281,"display_name":"DARA Solutions"},"score":0,"creation_date":1669195503,"post_id":74544202,"comment_id":131587149,"body_markdown":"Thanks! But I need to use ListComparator class in Main.","body":"Thanks! But I need to use ListComparator class in Main."}],"tags":[],"owner":{"account_id":9596641,"reputation":873,"user_id":7125557,"display_name":"dimirsen Z"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669194532,"creation_date":1669194532,"answer_id":74544202,"question_id":74543041,"body_markdown":"Looks like you need to sort the array or list based on the modulus (the function Math.abs()).\r\n    \r\n        String[] ss = {&quot;-5&quot;, &quot;-12&quot;, &quot;0&quot;, &quot;20&quot;, &quot;9&quot;, &quot;-20&quot;, &quot;37&quot;};\r\n        List&lt;String&gt; strings = Arrays.asList(ss);\r\n        Collections.sort(strings, new Comparator&lt;String&gt;() {\r\n            @Override\r\n            public int compare(String o1, String o2) {\r\n                int intA = Integer.parseInt(o1);\r\n                int intB = Integer.parseInt(o2);\r\n                return Integer.compare(Math.abs(intA), Math.abs(intB));\r\n            }\r\n        });\r\n    ","title":"How to sort items of List in ascending order of function in java?","body":"<p>Looks like you need to sort the array or list based on the modulus (the function Math.abs()).</p>\n<pre><code>    String[] ss = {&quot;-5&quot;, &quot;-12&quot;, &quot;0&quot;, &quot;20&quot;, &quot;9&quot;, &quot;-20&quot;, &quot;37&quot;};\n    List&lt;String&gt; strings = Arrays.asList(ss);\n    Collections.sort(strings, new Comparator&lt;String&gt;() {\n        @Override\n        public int compare(String o1, String o2) {\n            int intA = Integer.parseInt(o1);\n            int intB = Integer.parseInt(o2);\n            return Integer.compare(Math.abs(intA), Math.abs(intB));\n        }\n    });\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23543440,"reputation":1,"user_id":17587281,"display_name":"DARA Solutions"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669213151,"creation_date":1669195824,"answer_id":74544490,"question_id":74543041,"body_markdown":"I resolved this by returning \r\n\r\n    return calculatedA &gt; calculatedB ? -1 : (calculatedA &lt; calculatedB) ? 1 : 0;\r\n\r\nand after I used Collections.sort():\r\n\r\n    public void sort(List&lt;String&gt; sourceList) {\r\n        Collections.sort(sourceList, new ListComparator());\r\n        Collections.reverse(sourceList);\r\n    }\r\n\r\nI tried to use this in order to get it in ascending order but it can&#39;t help:\r\n\r\n    return calculatedA &gt; calculatedB ? 1 : (calculatedA &lt; calculatedB) ? -1 : 0;\r\n    \r\nAny idea how to get it in ascending order, so that I don&#39;t use         `Collections.reverse(sourceList);` ?\r\n\r\n\r\n\r\n\r\n","title":"How to sort items of List in ascending order of function in java?","body":"<p>I resolved this by returning</p>\n<pre><code>return calculatedA &gt; calculatedB ? -1 : (calculatedA &lt; calculatedB) ? 1 : 0;\n</code></pre>\n<p>and after I used Collections.sort():</p>\n<pre><code>public void sort(List&lt;String&gt; sourceList) {\n    Collections.sort(sourceList, new ListComparator());\n    Collections.reverse(sourceList);\n}\n</code></pre>\n<p>I tried to use this in order to get it in ascending order but it can't help:</p>\n<pre><code>return calculatedA &gt; calculatedB ? 1 : (calculatedA &lt; calculatedB) ? -1 : 0;\n</code></pre>\n<p>Any idea how to get it in ascending order, so that I don't use         <code>Collections.reverse(sourceList);</code> ?</p>\n"}],"owner":{"account_id":23543440,"reputation":1,"user_id":17587281,"display_name":"DARA Solutions"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":65,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1669213151,"creation_date":1669187997,"question_id":74543041,"body_markdown":"Input: \r\n```\r\n[&quot;-5&quot;, &quot;-12&quot;, &quot;0&quot;, &quot;20&quot;, &quot;9&quot;, &quot;-20&quot;, &quot;37&quot;]\r\n```\r\nOutput: \r\n```\r\n[&quot;0&quot;, &quot;-5&quot;, &quot;9&quot;, &quot;-12&quot;, &quot;-20&quot;, &quot;20&quot;, &quot;37&quot;]\r\n```\r\n\r\nWhat logic should I use in order to get minimum of function result?\r\n\r\nI have a class with function which compares 2 items (int) and returns min of them: \r\n\r\n```\r\nclass ListComparator implements Comparator&lt;String&gt; {\r\n    @Override\r\n    public int compare(String a, String b) {\r\n        int intA = Integer.parseInt(a);\r\n        int intB = Integer.parseInt(b);\r\n        int calculatedA = calc(intA);\r\n        int calculatedB = calc(intB);\r\n        return (calculatedA &lt; calculatedB) ? intA : intB;\r\n    }\r\n\r\n    private int calc(int x) {\r\n        double form = Math.pow(5*x, 2) + 3;\r\n        int result = (int) form;\r\n        return result;\r\n    }\r\n}\r\n```\r\n\r\n```\r\n```\r\n","title":"How to sort items of List in ascending order of function in java?","body":"<p>Input:</p>\n<pre><code>[&quot;-5&quot;, &quot;-12&quot;, &quot;0&quot;, &quot;20&quot;, &quot;9&quot;, &quot;-20&quot;, &quot;37&quot;]\n</code></pre>\n<p>Output:</p>\n<pre><code>[&quot;0&quot;, &quot;-5&quot;, &quot;9&quot;, &quot;-12&quot;, &quot;-20&quot;, &quot;20&quot;, &quot;37&quot;]\n</code></pre>\n<p>What logic should I use in order to get minimum of function result?</p>\n<p>I have a class with function which compares 2 items (int) and returns min of them:</p>\n<pre><code>class ListComparator implements Comparator&lt;String&gt; {\n    @Override\n    public int compare(String a, String b) {\n        int intA = Integer.parseInt(a);\n        int intB = Integer.parseInt(b);\n        int calculatedA = calc(intA);\n        int calculatedB = calc(intB);\n        return (calculatedA &lt; calculatedB) ? intA : intB;\n    }\n\n    private int calc(int x) {\n        double form = Math.pow(5*x, 2) + 3;\n        int result = (int) form;\n        return result;\n    }\n}\n</code></pre>\n<pre><code></code></pre>\n"},{"tags":["java","postgresql","jpa","spring-data-jpa","spring-data"],"answers":[{"tags":[],"owner":{"account_id":8069490,"reputation":1385,"user_id":6082685,"accept_rate":73,"display_name":"Geha"},"comment_count":0,"down_vote_count":0,"up_vote_count":18,"is_accepted":true,"score":18,"last_activity_date":1511645439,"creation_date":1511645439,"answer_id":47490701,"question_id":47490199,"body_markdown":"I&#39;ve found solution:\r\n\r\n    @Query(value = &quot;SELECT nextval(&#39;item_id_seq&#39;)&quot;, nativeQuery =\r\n                true)\r\n        Long getNextSeriesId();\r\n\r\nMy mistake was that I used oracle syntax instead of postgreSQL, which I am using.","title":"Getting next value from sequence with jpa repository in postgreSQL","body":"<p>I've found solution:</p>\n\n<pre><code>@Query(value = \"SELECT nextval('item_id_seq')\", nativeQuery =\n            true)\n    Long getNextSeriesId();\n</code></pre>\n\n<p>My mistake was that I used oracle syntax instead of postgreSQL, which I am using.</p>\n"}],"owner":{"account_id":8069490,"reputation":1385,"user_id":6082685,"accept_rate":73,"display_name":"Geha"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":19351,"favorite_count":0,"down_vote_count":1,"up_vote_count":11,"accepted_answer_id":47490701,"answer_count":1,"score":10,"last_activity_date":1669213052,"creation_date":1511641446,"question_id":47490199,"body_markdown":"I&#39;ve seen the similar question, but in my situation it doesn&#39;t work.\r\nI need to get the next value of the sequence.\r\n\r\nModel class:\r\n    \r\n    @Entity\r\n    @Table(name = &quot;item&quot;)\r\n    public class Item {\r\n        @Id\r\n        @SequenceGenerator(name = &quot;id_seq&quot;, sequenceName = &quot;item_id_seq&quot;, allocationSize = 1)\r\n        @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = &quot;id_seq&quot;)\r\n        @Column(name = &quot;id&quot;, updatable = false)\r\n        protected Long id;\r\n    }\r\n\r\nJpa Repository:\r\n\r\n    public interface ItemRepository extends JpaRepository&lt;Item, Long&gt; {\r\n        List&lt;Item&gt; findFirst10ByOrderByPublicationDateDesc();\r\n    \r\n        @Query(value = &quot;SELECT item_id_seq.nextval FROM item&quot;, nativeQuery = \r\n        true)\r\n        Long getNextSeriesId();\r\n    }\r\n\r\nI would appreciate any help.","title":"Getting next value from sequence with jpa repository in postgreSQL","body":"<p>I've seen the similar question, but in my situation it doesn't work.\nI need to get the next value of the sequence.</p>\n\n<p>Model class:</p>\n\n<pre><code>@Entity\n@Table(name = \"item\")\npublic class Item {\n    @Id\n    @SequenceGenerator(name = \"id_seq\", sequenceName = \"item_id_seq\", allocationSize = 1)\n    @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = \"id_seq\")\n    @Column(name = \"id\", updatable = false)\n    protected Long id;\n}\n</code></pre>\n\n<p>Jpa Repository:</p>\n\n<pre><code>public interface ItemRepository extends JpaRepository&lt;Item, Long&gt; {\n    List&lt;Item&gt; findFirst10ByOrderByPublicationDateDesc();\n\n    @Query(value = \"SELECT item_id_seq.nextval FROM item\", nativeQuery = \n    true)\n    Long getNextSeriesId();\n}\n</code></pre>\n\n<p>I would appreciate any help.</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9362,"page":861,"page_size":100}
