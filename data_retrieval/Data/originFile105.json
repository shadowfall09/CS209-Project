{"items":[{"tags":["java","spring-boot","rocketmq"],"answers":[{"tags":[],"owner":{"account_id":1934432,"reputation":1,"user_id":1743058,"display_name":"Francis Lee"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698030775,"creation_date":1698030775,"answer_id":77342461,"question_id":76785960,"body_markdown":"there are something you can check it\r\n1. check consumer online or not. go to controller panel\r\n[enter image description here][1]\r\n   \r\n2. if online , check topic, consumer group, nameserver address right or not.\r\n\r\n3. check ~/logs/rocketmqlogs/rocketmq_client.log to see consumer&#39;s log\r\n\r\nafter thos checks still fail, message me","title":"rocketMQ producer can send messages, but the consumer cannot consume messages","body":"<p>there are something you can check it</p>\n<ol>\n<li><p>check consumer online or not. go to controller panel\n[enter image description here][1]</p>\n</li>\n<li><p>if online , check topic, consumer group, nameserver address right or not.</p>\n</li>\n<li><p>check ~/logs/rocketmqlogs/rocketmq_client.log to see consumer's log</p>\n</li>\n</ol>\n<p>after thos checks still fail, message me</p>\n"},{"tags":[],"owner":{"account_id":19769854,"reputation":15,"user_id":14990784,"display_name":"wang heng"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698144930,"creation_date":1698144930,"answer_id":77351487,"question_id":76785960,"body_markdown":"I have the same issue like this, the message status is NOT_COMSUME_YET or NOT_ONLINE\r\n\r\nI resolve this issue by change producer group same with consumer group.\r\n\r\nhope it will help you.","title":"rocketMQ producer can send messages, but the consumer cannot consume messages","body":"<p>I have the same issue like this, the message status is NOT_COMSUME_YET or NOT_ONLINE</p>\n<p>I resolve this issue by change producer group same with consumer group.</p>\n<p>hope it will help you.</p>\n"}],"owner":{"account_id":29109276,"reputation":1,"user_id":22299389,"display_name":"JessieJ"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":109,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1698144930,"creation_date":1690532109,"question_id":76785960,"body_markdown":"- My rocketMQ producer can send messages to the queue, but the consumer cannot consume messages in a timely manner. Sometimes it will be delayed for about 10 seconds, and most of the time it will not consume messages at all.\r\n- I checked the rocketMQ control panel, and the unconsumed messages look like this:\r\n[messages look like](https://i.stack.imgur.com/6KnE6.png)\r\n- My application.yml is:\r\n\r\n```\r\nrocketmq:\r\n  name-server: 127.0.0.1:9876\r\n  producer:\r\n    group: ProducerGroup\r\n  consumer:\r\n    group: ConsumerGroup\r\n    topic: MyTopic\r\n```\r\n\r\n- My maven dependencies are as follows：\r\n\r\n```\r\n&lt;properties&gt;\r\n    &lt;java.version&gt;11&lt;/java.version&gt;\r\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n    &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\r\n&lt;/properties&gt;\r\n\r\n&lt;parent&gt;\r\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n    &lt;version&gt;2.5.12&lt;/version&gt;\r\n&lt;/parent&gt;\r\n....\r\n&lt;dependency&gt;\r\n     &lt;groupId&gt;org.apache.rocketmq&lt;/groupId&gt;\r\n     &lt;artifactId&gt;rocketmq-spring-boot-starter&lt;/artifactId&gt;\r\n     &lt;version&gt;2.2.1&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\n- My producer side code is as follows:\r\n\r\n```\r\nimport org.apache.rocketmq.client.exception.MQClientException;\r\nimport org.apache.rocketmq.client.producer.DefaultMQProducer;\r\nimport org.apache.rocketmq.common.message.Message;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.beans.factory.annotation.Value;\r\nimport org.springframework.stereotype.Component;\r\n\r\n@Component\r\npublic class RocketMQProducer {\r\n\r\n    private DefaultMQProducer producer;\r\n\r\n    @Autowired\r\n    public RocketMQProducer(@Value(&quot;${rocketmq.producer.group}&quot;) String producerGroup,\r\n                            @Value(&quot;${rocketmq.name-server}&quot;) String nameServerAddress) {\r\n        producer = new DefaultMQProducer(producerGroup);\r\n        producer.setNamesrvAddr(nameServerAddress);\r\n        try {\r\n            producer.start(); \r\n        } catch (MQClientException e) {\r\n            System.out.println(&quot;RocketMQProducer is wrong： &quot;);\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\n    public void sendMessages(String topic, String tags, String message) {\r\n        try {\r\n            Message mqMessage = new Message(topic, tags, message.getBytes());\r\n            producer.send(mqMessage);\r\n            System.out.println(&quot;Message sent to queue: &quot; + message);\r\n        } catch (Exception e) {\r\n            System.out.println(&quot;RocketMQProducer sendMessages() is wrong： &quot;);\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n    public void shutdown() {\r\n        producer.shutdown();\r\n    }\r\n}\r\n\r\n```\r\n- Next, I called the sendMessages method of the producer in the NettyClientHandler code，redundant code omitted：\r\n\r\n```\r\n@Component\r\npublic class NettyClientHandler extends ChannelInboundHandlerAdapter {\r\n\r\n\r\n    @Autowired\r\n    private RocketMQProducer rocketMQProducer;\r\n\r\n    @Value(&quot;${rocketmq.consumer.topic}&quot;)\r\n    private String topic;\r\n\r\n\r\n    @Override\r\n    public void channelActive(ChannelHandlerContext ctx) throws Exception {\r\n        LogUtil.log(&quot;Client,channelActive&quot;);\r\n    }\r\n\r\n    @Override\r\n    public void channelRead(ChannelHandlerContext ctx, Object msg) throws Exception {\r\n        LogUtil.log(&quot;Client,Received a message from the server&quot;);\r\n\r\n        if (msg instanceof ByteBuf) { \r\n            ByteBuf byteBuf = (ByteBuf) msg;\r\n\r\n            String message = byteBuf.toString(StandardCharsets.UTF_8);\r\n\r\n            rocketMQProducer.sendMessages(topic, &quot;&quot;, message);\r\n\r\n            System.out.println(&quot;Received message: &quot; + message);\r\n        }\r\n    }\r\n\r\n    \r\n}\r\n```\r\n- My consumer side code is as follows:\r\n\r\n```\r\n@Service\r\npublic class RocketMQCommonConsumerListener implements CommandLineRunner {\r\n\r\n    @Autowired\r\n    private subway.service.Service service;\r\n\r\n    @Value(&quot;${rocketmq.consumer.group}&quot;)\r\n    private String consumerGroup;\r\n\r\n    @Value(&quot;${rocketmq.name-server}&quot;)\r\n    private String nameServerAddress;\r\n\r\n    @Value(&quot;${rocketmq.consumer.topic}&quot;)\r\n    private String topic;\r\n\r\n\r\n    public void consumeMessages() {\r\n        DefaultMQPushConsumer consumer = new DefaultMQPushConsumer(consumerGroup);\r\n        consumer.setNamesrvAddr(nameServerAddress);\r\n        consumer.setConsumeFromWhere(ConsumeFromWhere.CONSUME_FROM_FIRST_OFFSET);\r\n\r\n        System.out.println(&quot;consume_step1&quot;);\r\n        try {\r\n            consumer.subscribe(topic, &quot;*&quot;);\r\n            System.out.println(&quot;consume_step2&quot;);\r\n            consumer.registerMessageListener(new MessageListenerOrderly() {\r\n                @Override\r\n                public ConsumeOrderlyStatus consumeMessage(List&lt;MessageExt&gt; messages, ConsumeOrderlyContext context) {\r\n                    StringBuilder sb = new StringBuilder();\r\n                    boolean needMerge = true;\r\n                    System.out.print(&quot;consume_step3, &quot;);\r\n                    long threadId = Thread.currentThread().getId();\r\n                    System.out.println(&quot;Current Thread ID: &quot; + threadId);\r\n                    for (MessageExt message : messages) {\r\n                        String str = new String(message.getBody());\r\n                        System.out.println(&quot;RocketMQ received message：&quot; + str);\r\n\r\n                     }\r\n\r\n                    return ConsumeOrderlyStatus.SUCCESS;\r\n                }\r\n            });\r\n            consumer.start();\r\n        } catch (MQClientException e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\n\r\n    private void handleJson(String json) {\r\n       \r\n        System.out.println(&quot;json data is :&quot;);\r\n        System.out.println(json);\r\n        System.out.println(&quot;\\t\\t\\t============\\t\\t\\t\\n&quot;);\r\n    }\r\n\r\n    @Async(&quot;taskExecutor&quot;)\r\n    @Override\r\n    public void run(String... args){\r\n        consumeMessages();\r\n    }\r\n}\r\n```\r\n\r\n\r\n\r\nI have modified it according to chatGPT3.5, and searched for answers on the Internet, but none of them can be solved. This question has troubled me for a long time, I am looking forward to the answer.","title":"rocketMQ producer can send messages, but the consumer cannot consume messages","body":"<ul>\n<li>My rocketMQ producer can send messages to the queue, but the consumer cannot consume messages in a timely manner. Sometimes it will be delayed for about 10 seconds, and most of the time it will not consume messages at all.</li>\n<li>I checked the rocketMQ control panel, and the unconsumed messages look like this:\n<a href=\"https://i.stack.imgur.com/6KnE6.png\" rel=\"nofollow noreferrer\">messages look like</a></li>\n<li>My application.yml is:</li>\n</ul>\n<pre><code>rocketmq:\n  name-server: 127.0.0.1:9876\n  producer:\n    group: ProducerGroup\n  consumer:\n    group: ConsumerGroup\n    topic: MyTopic\n</code></pre>\n<ul>\n<li>My maven dependencies are as follows：</li>\n</ul>\n<pre><code>&lt;properties&gt;\n    &lt;java.version&gt;11&lt;/java.version&gt;\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n    &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\n&lt;/properties&gt;\n\n&lt;parent&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n    &lt;version&gt;2.5.12&lt;/version&gt;\n&lt;/parent&gt;\n....\n&lt;dependency&gt;\n     &lt;groupId&gt;org.apache.rocketmq&lt;/groupId&gt;\n     &lt;artifactId&gt;rocketmq-spring-boot-starter&lt;/artifactId&gt;\n     &lt;version&gt;2.2.1&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<ul>\n<li>My producer side code is as follows:</li>\n</ul>\n<pre><code>import org.apache.rocketmq.client.exception.MQClientException;\nimport org.apache.rocketmq.client.producer.DefaultMQProducer;\nimport org.apache.rocketmq.common.message.Message;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.beans.factory.annotation.Value;\nimport org.springframework.stereotype.Component;\n\n@Component\npublic class RocketMQProducer {\n\n    private DefaultMQProducer producer;\n\n    @Autowired\n    public RocketMQProducer(@Value(&quot;${rocketmq.producer.group}&quot;) String producerGroup,\n                            @Value(&quot;${rocketmq.name-server}&quot;) String nameServerAddress) {\n        producer = new DefaultMQProducer(producerGroup);\n        producer.setNamesrvAddr(nameServerAddress);\n        try {\n            producer.start(); \n        } catch (MQClientException e) {\n            System.out.println(&quot;RocketMQProducer is wrong： &quot;);\n            e.printStackTrace();\n        }\n    }\n\n    public void sendMessages(String topic, String tags, String message) {\n        try {\n            Message mqMessage = new Message(topic, tags, message.getBytes());\n            producer.send(mqMessage);\n            System.out.println(&quot;Message sent to queue: &quot; + message);\n        } catch (Exception e) {\n            System.out.println(&quot;RocketMQProducer sendMessages() is wrong： &quot;);\n            e.printStackTrace();\n        }\n    }\n    public void shutdown() {\n        producer.shutdown();\n    }\n}\n\n</code></pre>\n<ul>\n<li>Next, I called the sendMessages method of the producer in the NettyClientHandler code，redundant code omitted：</li>\n</ul>\n<pre><code>@Component\npublic class NettyClientHandler extends ChannelInboundHandlerAdapter {\n\n\n    @Autowired\n    private RocketMQProducer rocketMQProducer;\n\n    @Value(&quot;${rocketmq.consumer.topic}&quot;)\n    private String topic;\n\n\n    @Override\n    public void channelActive(ChannelHandlerContext ctx) throws Exception {\n        LogUtil.log(&quot;Client,channelActive&quot;);\n    }\n\n    @Override\n    public void channelRead(ChannelHandlerContext ctx, Object msg) throws Exception {\n        LogUtil.log(&quot;Client,Received a message from the server&quot;);\n\n        if (msg instanceof ByteBuf) { \n            ByteBuf byteBuf = (ByteBuf) msg;\n\n            String message = byteBuf.toString(StandardCharsets.UTF_8);\n\n            rocketMQProducer.sendMessages(topic, &quot;&quot;, message);\n\n            System.out.println(&quot;Received message: &quot; + message);\n        }\n    }\n\n    \n}\n</code></pre>\n<ul>\n<li>My consumer side code is as follows:</li>\n</ul>\n<pre><code>@Service\npublic class RocketMQCommonConsumerListener implements CommandLineRunner {\n\n    @Autowired\n    private subway.service.Service service;\n\n    @Value(&quot;${rocketmq.consumer.group}&quot;)\n    private String consumerGroup;\n\n    @Value(&quot;${rocketmq.name-server}&quot;)\n    private String nameServerAddress;\n\n    @Value(&quot;${rocketmq.consumer.topic}&quot;)\n    private String topic;\n\n\n    public void consumeMessages() {\n        DefaultMQPushConsumer consumer = new DefaultMQPushConsumer(consumerGroup);\n        consumer.setNamesrvAddr(nameServerAddress);\n        consumer.setConsumeFromWhere(ConsumeFromWhere.CONSUME_FROM_FIRST_OFFSET);\n\n        System.out.println(&quot;consume_step1&quot;);\n        try {\n            consumer.subscribe(topic, &quot;*&quot;);\n            System.out.println(&quot;consume_step2&quot;);\n            consumer.registerMessageListener(new MessageListenerOrderly() {\n                @Override\n                public ConsumeOrderlyStatus consumeMessage(List&lt;MessageExt&gt; messages, ConsumeOrderlyContext context) {\n                    StringBuilder sb = new StringBuilder();\n                    boolean needMerge = true;\n                    System.out.print(&quot;consume_step3, &quot;);\n                    long threadId = Thread.currentThread().getId();\n                    System.out.println(&quot;Current Thread ID: &quot; + threadId);\n                    for (MessageExt message : messages) {\n                        String str = new String(message.getBody());\n                        System.out.println(&quot;RocketMQ received message：&quot; + str);\n\n                     }\n\n                    return ConsumeOrderlyStatus.SUCCESS;\n                }\n            });\n            consumer.start();\n        } catch (MQClientException e) {\n            e.printStackTrace();\n        }\n    }\n\n\n    private void handleJson(String json) {\n       \n        System.out.println(&quot;json data is :&quot;);\n        System.out.println(json);\n        System.out.println(&quot;\\t\\t\\t============\\t\\t\\t\\n&quot;);\n    }\n\n    @Async(&quot;taskExecutor&quot;)\n    @Override\n    public void run(String... args){\n        consumeMessages();\n    }\n}\n</code></pre>\n<p>I have modified it according to chatGPT3.5, and searched for answers on the Internet, but none of them can be solved. This question has troubled me for a long time, I am looking forward to the answer.</p>\n"},{"tags":["java","sql-server","nativequery","hibernate-native-query"],"comments":[{"owner":{"account_id":17972905,"reputation":5290,"user_id":13061224,"display_name":"siggemannen"},"score":0,"creation_date":1698147034,"post_id":77351306,"comment_id":136365612,"body_markdown":"That depends entirely on what queries are generated in java hibernate vs. view. But usually native queries allows to extract maximum performance if you know how to write good sql","body":"That depends entirely on what queries are generated in java hibernate vs. view. But usually native queries allows to extract maximum performance if you know how to write good sql"}],"owner":{"account_id":3168101,"reputation":247,"user_id":2677653,"accept_rate":21,"display_name":"Thomas"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":19,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1698143846,"answer_count":0,"score":0,"last_activity_date":1698143188,"creation_date":1698143188,"question_id":77351306,"body_markdown":"i&#39;m using some native query (in java hibernate) which selects data from some tables.\r\n\r\nmy idea is to use views (MS SQL) instead of native query. \r\n\r\nCan someone explain to me which is more performant ... are there any big differents?\r\n\r\nthanks &amp; best regards\r\n\r\n\r\n","title":"nativ query (java) vs view in DB - performance","body":"<p>i'm using some native query (in java hibernate) which selects data from some tables.</p>\n<p>my idea is to use views (MS SQL) instead of native query.</p>\n<p>Can someone explain to me which is more performant ... are there any big differents?</p>\n<p>thanks &amp; best regards</p>\n"},{"tags":["java","spring","spring-webflux","reactive-programming","spring-webclient"],"owner":{"account_id":18570348,"reputation":89,"user_id":13532297,"display_name":"pwflamy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1698142981,"creation_date":1698142981,"question_id":77351287,"body_markdown":"I have a Spring WebClient which built by method:\r\n\r\n```\r\npublic static WebClient build(ReactorResourceFactory factory) {\r\n        final ConnectionProvider fixedPool = ConnectionProvider\r\n            .builder(&quot;CustomClient&quot;)\r\n            .maxConnections(1000)\r\n            .pendingAcquireMaxCount(-1) // keep the backwards compatibility\r\n            .pendingAcquireTimeout(Duration.ofMillis(1000))\r\n            .maxIdleTime(Duration.ofSeconds(5))\r\n            .maxLifeTime(Duration.ofHours(1))\r\n            .build();\r\n        final LoopResources loop = LoopResources.create(&quot;CustomClient&quot;, 1, 4, true);\r\n        factory.setUseGlobalResources(false);\r\n        factory.setConnectionProvider(fixedPool);\r\n        factory.setLoopResources(loop);\r\n        Function&lt;? super TcpClient, ? extends TcpClient&gt; finalMapper = tcp -&gt; tcp\r\n            .doOnConnected(conn -&gt; conn\r\n                .addHandlerLast(new ReadTimeoutHandler(500, TimeUnit.MILLISECONDS))\r\n                .addHandlerLast(new WriteTimeoutHandler(500, TimeUnit.MILLISECONDS)\r\n                ))\r\n            .option(ChannelOption.CONNECT_TIMEOUT_MILLIS, 1500));\r\n        Function&lt;HttpClient, HttpClient&gt; mapper = c -&gt; c.tcpConfiguration(finalMapper)\r\n            .compress(true)\r\n            .keepAlive(true)\r\n            .disableRetry(true);\r\n        ClientHttpConnector connector = new ReactorClientHttpConnector(factory, mapper);\r\n        return WebClient.builder().clientConnector(connector).build();\r\n    }\r\n```\r\nSometimes this client produce ReadTimeoutException even if other side send successful response. This most often occurs when the serviceA makes a large number of calls simultaneously (30-50 requests within 10-50ms). As a result, in the logs I observe the following situation (ServiceA do request to ServiceB):\r\n\r\nServiceA\r\n```\r\nOct 24, 2023 @ 12:16:08.946 INFO request in 0.585 secs\r\nOct 24, 2023 @ 12:16:08.939 [CustomClient-epoll-3] WARN reactor.netty.http.client.HttpClientConnect ||  &gt;&gt; [0eac89ee-1, L:/&lt;ip&gt;:56790 - R:&lt;host&gt;/&lt;ip&gt;:443] The connection observed an error\r\nOct 24, 2023 @ 12:16:08.939 io.netty.handler.timeout.ReadTimeoutException: null\r\n```\r\nServiceB\r\n```\r\nOct 24, 2023 @ 12:16:08.568 INFO Last successful response to ServiceA \r\n```\r\nAs I understand ServiceB sucessfully handled all requests, but WebClient in ServiceA for some reason didn&#39;t process the responses and throw ReadTimeoutException.\r\n\r\nQuestions:\r\n\r\n 1. How Spring WebClient works under the hood? What happens when we call ```retrive()``` and at what point in time does the countdown for ReadTimeoutException begin?\r\n 2. How to fix this problem? Did timeout throw due to lack of threads in LoopResources or what?\r\n\r\n ","title":"How Spring WebClient work inside and reason of ReadTimeoutException","body":"<p>I have a Spring WebClient which built by method:</p>\n<pre><code>public static WebClient build(ReactorResourceFactory factory) {\n        final ConnectionProvider fixedPool = ConnectionProvider\n            .builder(&quot;CustomClient&quot;)\n            .maxConnections(1000)\n            .pendingAcquireMaxCount(-1) // keep the backwards compatibility\n            .pendingAcquireTimeout(Duration.ofMillis(1000))\n            .maxIdleTime(Duration.ofSeconds(5))\n            .maxLifeTime(Duration.ofHours(1))\n            .build();\n        final LoopResources loop = LoopResources.create(&quot;CustomClient&quot;, 1, 4, true);\n        factory.setUseGlobalResources(false);\n        factory.setConnectionProvider(fixedPool);\n        factory.setLoopResources(loop);\n        Function&lt;? super TcpClient, ? extends TcpClient&gt; finalMapper = tcp -&gt; tcp\n            .doOnConnected(conn -&gt; conn\n                .addHandlerLast(new ReadTimeoutHandler(500, TimeUnit.MILLISECONDS))\n                .addHandlerLast(new WriteTimeoutHandler(500, TimeUnit.MILLISECONDS)\n                ))\n            .option(ChannelOption.CONNECT_TIMEOUT_MILLIS, 1500));\n        Function&lt;HttpClient, HttpClient&gt; mapper = c -&gt; c.tcpConfiguration(finalMapper)\n            .compress(true)\n            .keepAlive(true)\n            .disableRetry(true);\n        ClientHttpConnector connector = new ReactorClientHttpConnector(factory, mapper);\n        return WebClient.builder().clientConnector(connector).build();\n    }\n</code></pre>\n<p>Sometimes this client produce ReadTimeoutException even if other side send successful response. This most often occurs when the serviceA makes a large number of calls simultaneously (30-50 requests within 10-50ms). As a result, in the logs I observe the following situation (ServiceA do request to ServiceB):</p>\n<p>ServiceA</p>\n<pre><code>Oct 24, 2023 @ 12:16:08.946 INFO request in 0.585 secs\nOct 24, 2023 @ 12:16:08.939 [CustomClient-epoll-3] WARN reactor.netty.http.client.HttpClientConnect ||  &gt;&gt; [0eac89ee-1, L:/&lt;ip&gt;:56790 - R:&lt;host&gt;/&lt;ip&gt;:443] The connection observed an error\nOct 24, 2023 @ 12:16:08.939 io.netty.handler.timeout.ReadTimeoutException: null\n</code></pre>\n<p>ServiceB</p>\n<pre><code>Oct 24, 2023 @ 12:16:08.568 INFO Last successful response to ServiceA \n</code></pre>\n<p>As I understand ServiceB sucessfully handled all requests, but WebClient in ServiceA for some reason didn't process the responses and throw ReadTimeoutException.</p>\n<p>Questions:</p>\n<ol>\n<li>How Spring WebClient works under the hood? What happens when we call <code>retrive()</code> and at what point in time does the countdown for ReadTimeoutException begin?</li>\n<li>How to fix this problem? Did timeout throw due to lack of threads in LoopResources or what?</li>\n</ol>\n"},{"tags":["java","oop","jvm","polymorphism"],"comments":[{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":0,"creation_date":1697754366,"post_id":77326628,"comment_id":136323069,"body_markdown":"Here is a similar question and answer, _https://stackoverflow.com/a/24884434/17758716_.","body":"Here is a similar question and answer, <i><a href=\"https://stackoverflow.com/a/24884434/17758716\">stackoverflow.com/a/24884434/17758716</a></i>."},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1697796021,"post_id":77326628,"comment_id":136327616,"body_markdown":"You can not name a method `do` in Java at all. Besides that, the compiled code will invoke the method having a double parameter *with a double value*. Any necessary conversion of parameter values will happen *before* the method invocation, in other words, there will be no `int` at the method invocation. So, yes, the JVM will take the exact method parameters, but there wouldn’t be any option to do it differently anyway.","body":"You can not name a method <code>do</code> in Java at all. Besides that, the compiled code will invoke the method having a double parameter <i>with a double value</i>. Any necessary conversion of parameter values will happen <i>before</i> the method invocation, in other words, there will be no <code>int</code> at the method invocation. So, yes, the JVM will take the exact method parameters, but there wouldn’t be any option to do it differently anyway."}],"answers":[{"tags":[],"owner":{"account_id":15565119,"reputation":48,"user_id":11229141,"display_name":"Qifeng Li"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1698142884,"creation_date":1697745617,"answer_id":77326760,"question_id":77326628,"body_markdown":"In java, integer and double are two different types. The ONLY way to override a method in Java is to have the exact same signature:\r\n\r\n    class Parent() {\r\n      public void method(double a); //1\r\n      public void method(int a, double b); //2\r\n    }\r\n\r\n    class Child() extends Parent {\r\n      public void method(int a); //Not an override\r\n      public void method(String a); //Not an override\r\n      @Override\r\n      public void method(double a); //Overrides 1\r\n\r\n      public void method(double a, int b); //Not and override (order is wrong)\r\n      @Override\r\n      public void method(int a, double b); //Overrides 2\r\n    }\r\n\r\nThe method signature is a combination of the method name, the type of arguments, and order of those types (if multiple arguments). \r\n\r\nFor your question, I have tailored your code to match my example. \r\n\r\n    Parent child = new child(); \r\n    child.method(10);\r\n\r\nThe compiler only knows that object `child` is of type `Parent`. Thus it treats it as a parent. It DOES NOT know that `child` is actually of type `Child`, a subtype of `Parent`. \r\n\r\nWhen you call `child.method(10)`, the compiler sees `Parent.method(10)`. Since 10 can be both an integer and a double, it calls the parent method. \r\n\r\nI added `method(String a)` to the child. \r\nIf you call `child.method(&quot;10&quot;)`, again it sees `Parent.method(&quot;10&quot;)`. The problem here is that Parent has no `method(String a)` so the compiler will complain. \r\n\r\nThe only way to make this call the child method is to specify the parent as type Child. \r\n\r\n    Parent child = new child(); \r\n    ((Child) child).method(10);","title":"Declaring a method do(int in) in a superclass and a method do(double in) in a subclass","body":"<p>In java, integer and double are two different types. The ONLY way to override a method in Java is to have the exact same signature:</p>\n<pre><code>class Parent() {\n  public void method(double a); //1\n  public void method(int a, double b); //2\n}\n\nclass Child() extends Parent {\n  public void method(int a); //Not an override\n  public void method(String a); //Not an override\n  @Override\n  public void method(double a); //Overrides 1\n\n  public void method(double a, int b); //Not and override (order is wrong)\n  @Override\n  public void method(int a, double b); //Overrides 2\n}\n</code></pre>\n<p>The method signature is a combination of the method name, the type of arguments, and order of those types (if multiple arguments).</p>\n<p>For your question, I have tailored your code to match my example.</p>\n<pre><code>Parent child = new child(); \nchild.method(10);\n</code></pre>\n<p>The compiler only knows that object <code>child</code> is of type <code>Parent</code>. Thus it treats it as a parent. It DOES NOT know that <code>child</code> is actually of type <code>Child</code>, a subtype of <code>Parent</code>.</p>\n<p>When you call <code>child.method(10)</code>, the compiler sees <code>Parent.method(10)</code>. Since 10 can be both an integer and a double, it calls the parent method.</p>\n<p>I added <code>method(String a)</code> to the child.\nIf you call <code>child.method(&quot;10&quot;)</code>, again it sees <code>Parent.method(&quot;10&quot;)</code>. The problem here is that Parent has no <code>method(String a)</code> so the compiler will complain.</p>\n<p>The only way to make this call the child method is to specify the parent as type Child.</p>\n<pre><code>Parent child = new child(); \n((Child) child).method(10);\n</code></pre>\n"}],"owner":{"account_id":17653933,"reputation":3,"user_id":12813900,"display_name":"abh77"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":52,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77326760,"answer_count":1,"score":0,"last_activity_date":1698142884,"creation_date":1697744331,"question_id":77326628,"body_markdown":"I am reviewing some importants rules in Java.\r\n\r\nMy questions are : \r\nDeclaring a method do(double in) in a superclass and a method do(int in) in a subclass.\r\nIs the method do(int in) in the subclass is considered an overrided method of the superclass method do(double in), as an int can be put in a double, or is it considered as an overloaded method ?\r\n\r\nI ask this question because this code : \r\n\r\n`\r\nSuperclass subclass = new Subclass()\r\nsubclass.do(10);\r\n`\r\nThis code will call the superclass method.\r\n\r\nI know that in the compile time, the compiler will put in the bytecode the compatible method present in the superclass and as it founds the do(double in) in the superclass which is a compatible one.\r\n\r\nBut why when the jvm will do the method implementation binding it doesn&#39;t take the method in the sub class, as the object is a Subclass ?\r\n\r\nDoes the jvm take the exact method signature found in the bytecode ?\r\n\r\nI hope i am clear, sorry for my english.\r\n\r\nI was expecting this code : \r\n`\r\nSuperclass subclass = new Subclass()\r\nsubclass.do(10);\r\n`\r\ncalls the subclass methode do(int in).","title":"Declaring a method do(int in) in a superclass and a method do(double in) in a subclass","body":"<p>I am reviewing some importants rules in Java.</p>\n<p>My questions are :\nDeclaring a method do(double in) in a superclass and a method do(int in) in a subclass.\nIs the method do(int in) in the subclass is considered an overrided method of the superclass method do(double in), as an int can be put in a double, or is it considered as an overloaded method ?</p>\n<p>I ask this question because this code :</p>\n<p><code>Superclass subclass = new Subclass() subclass.do(10);</code>\nThis code will call the superclass method.</p>\n<p>I know that in the compile time, the compiler will put in the bytecode the compatible method present in the superclass and as it founds the do(double in) in the superclass which is a compatible one.</p>\n<p>But why when the jvm will do the method implementation binding it doesn't take the method in the sub class, as the object is a Subclass ?</p>\n<p>Does the jvm take the exact method signature found in the bytecode ?</p>\n<p>I hope i am clear, sorry for my english.</p>\n<p>I was expecting this code :\n<code>Superclass subclass = new Subclass() subclass.do(10);</code>\ncalls the subclass methode do(int in).</p>\n"},{"tags":["java","spring","sockets","spring-boot-3"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1698141641,"post_id":77351089,"comment_id":136364635,"body_markdown":"What is the usecase for this? There is still suppor tin the test packages but that is intended for test support not production support.","body":"What is the usecase for this? There is still suppor tin the test packages but that is intended for test support not production support."},{"owner":{"account_id":15716927,"reputation":97,"user_id":11340909,"display_name":"shalabh"},"score":0,"creation_date":1698142194,"post_id":77351089,"comment_id":136364735,"body_markdown":"I am working on migration from spring boot 2 to 3. The application finds free ports using SocketUtils, which are used to establish web socket connection and other use cases.","body":"I am working on migration from spring boot 2 to 3. The application finds free ports using SocketUtils, which are used to establish web socket connection and other use cases."},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1698142348,"post_id":77351089,"comment_id":136364756,"body_markdown":"That doesn&#39;t really answer my question but please add it to your question as well instead of just a comment. Is this during regular usage or during testing was more of the question.","body":"That doesn&#39;t really answer my question but please add it to your question as well instead of just a comment. Is this during regular usage or during testing was more of the question."},{"owner":{"account_id":1888781,"reputation":2007,"user_id":1707427,"display_name":"S&#246;ren"},"score":0,"creation_date":1698147128,"post_id":77351089,"comment_id":136365627,"body_markdown":"So, your code has a bug. But instead of fixing the bug, you want to keep it. Why?","body":"So, your code has a bug. But instead of fixing the bug, you want to keep it. Why?"}],"answers":[{"tags":[],"owner":{"account_id":11250085,"reputation":401,"user_id":8251447,"display_name":"Akjun"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1698142346,"creation_date":1698142346,"answer_id":77351214,"question_id":77351089,"body_markdown":"Another alternative is to use Java&#39;s **ServerSocket** class to find available TCP ports.\r\nHere&#39;s a code snippet how you can do it, HTH.\r\n\r\n    import java.net.ServerSocket;\r\n\r\n    private static boolean isPortAvailable(int port) {\r\n        try (ServerSocket serverSocket = new ServerSocket(port)) {\r\n            return true;\r\n        } catch (IOException e) {\r\n            // Port is not available\r\n            return false;\r\n        }\r\n\r\n","title":"How to find free ports after SocketUtils has been deprecated in spring boot 3?","body":"<p>Another alternative is to use Java's <strong>ServerSocket</strong> class to find available TCP ports.\nHere's a code snippet how you can do it, HTH.</p>\n<pre><code>import java.net.ServerSocket;\n\nprivate static boolean isPortAvailable(int port) {\n    try (ServerSocket serverSocket = new ServerSocket(port)) {\n        return true;\n    } catch (IOException e) {\n        // Port is not available\n        return false;\n    }\n</code></pre>\n"}],"owner":{"account_id":15716927,"reputation":97,"user_id":11340909,"display_name":"shalabh"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":51,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77351214,"answer_count":1,"score":1,"last_activity_date":1698142346,"creation_date":1698141235,"question_id":77351089,"body_markdown":"```org.springframwork.util.SocketUtils``` has been deprecated in spring boot 3. Please provide a code snippet on how to find free ports within a specified range. \r\n\r\nI am interested in alternate solutions for ```SocketUtils.findAvailableTcpPorts(requestedNumberOfPorts, minimumPortValue, maximumPortValue)``` which would return any requested no. of ports from a specified range and ```SocketUtils.findAvailableTcpPort(minimumPortValue, maximumPortValue)```","title":"How to find free ports after SocketUtils has been deprecated in spring boot 3?","body":"<p><code>org.springframwork.util.SocketUtils</code> has been deprecated in spring boot 3. Please provide a code snippet on how to find free ports within a specified range.</p>\n<p>I am interested in alternate solutions for <code>SocketUtils.findAvailableTcpPorts(requestedNumberOfPorts, minimumPortValue, maximumPortValue)</code> which would return any requested no. of ports from a specified range and <code>SocketUtils.findAvailableTcpPort(minimumPortValue, maximumPortValue)</code></p>\n"},{"tags":["java","windows-7","jar"],"comments":[{"owner":{"account_id":184870,"reputation":118711,"user_id":421195,"accept_rate":83,"display_name":"paulsm4"},"score":1,"creation_date":1323895186,"post_id":8511063,"comment_id":10536431,"body_markdown":"It *sounds* like you&#39;re doing everything right.  Please take a look at my link below.  And please make sure 1) &quot;c:\\Program files\\java\\jre7\\bin\\javaw.exe&quot; is the correct path, and 2) that path is also defined correctly under &quot;HKLM, Software, Java&quot; in your registry.","body":"It <i>sounds</i> like you&#39;re doing everything right.  Please take a look at my link below.  And please make sure 1) &quot;c:\\Program files\\java\\jre7\\bin\\javaw.exe&quot; is the correct path, and 2) that path is also defined correctly under &quot;HKLM, Software, Java&quot; in your registry."},{"owner":{"account_id":391817,"reputation":3557,"user_id":752695,"display_name":"Brian Minton"},"score":0,"creation_date":1386019427,"post_id":8511063,"comment_id":30356432,"body_markdown":"the ftype command also needs to be run as an administrator.","body":"the ftype command also needs to be run as an administrator."},{"owner":{"account_id":9104,"reputation":33420,"user_id":16673,"accept_rate":89,"display_name":"Suma"},"score":0,"creation_date":1437637287,"post_id":8511063,"comment_id":51115362,"body_markdown":"possible duplicate of [Running Jar file in Windows](http://stackoverflow.com/questions/394616/running-jar-file-in-windows)","body":"possible duplicate of <a href=\"http://stackoverflow.com/questions/394616/running-jar-file-in-windows\">Running Jar file in Windows</a>"},{"owner":{"account_id":3162752,"reputation":2021,"user_id":2673386,"accept_rate":75,"display_name":"EntangledLoops"},"score":0,"creation_date":1440181837,"post_id":8511063,"comment_id":52183617,"body_markdown":"The real answer is that you need to use something like [packr](https://github.com/libgdx/packr) or [one-jar](http://one-jar.sourceforge.net/) that will extract and execute your code for the user, or build to a JNLP file which Java now properly associates.","body":"The real answer is that you need to use something like <a href=\"https://github.com/libgdx/packr\" rel=\"nofollow noreferrer\">packr</a> or <a href=\"http://one-jar.sourceforge.net/\" rel=\"nofollow noreferrer\">one-jar</a> that will extract and execute your code for the user, or build to a JNLP file which Java now properly associates."},{"owner":{"account_id":2305944,"reputation":529,"user_id":2025229,"display_name":"BoyBlueSky"},"score":0,"creation_date":1455305106,"post_id":8511063,"comment_id":58447248,"body_markdown":"Having the issue myself, I created an application to do just this. It locates the java installation, runs the appropriate executable (JavaW.exe), and directs it to the JAR file. &#39;Really simple coding but also really handy too. The link may be found in my comment below. =) http://stackoverflow.com/questions/8511063/how-to-run-jar-file-by-double-click-on-windows-7-64/35369918#35369918","body":"Having the issue myself, I created an application to do just this. It locates the java installation, runs the appropriate executable (JavaW.exe), and directs it to the JAR file. &#39;Really simple coding but also really handy too. The link may be found in my comment below. =) <a href=\"http://stackoverflow.com/questions/8511063/how-to-run-jar-file-by-double-click-on-windows-7-64/35369918#35369918\" title=\"how to run jar file by double click on windows 7 64\">stackoverflow.com/questions/8511063/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":184870,"reputation":118711,"user_id":421195,"accept_rate":83,"display_name":"paulsm4"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1401659380,"creation_date":1323894222,"answer_id":8511139,"question_id":8511063,"body_markdown":"http://www.wikihow.com/Run-a-.Jar-Java-File\r\n\r\n1. Assuming you&#39;ve loaded the Java JRE and/or Java SDK, then\r\n2. To do associations, go to &quot;*My Computer*&quot;, click on one of your drives (`C:` for instance).\r\n3. When it is shown, choose &quot;Tools&quot; &#187;&#187; &quot;Folder options&quot; (or Properties... it&#39;s in different places depending on the Windows version).\r\n4. Open Windows Explorer (just open any folder) to get the &quot;Tools&quot; -&gt; &quot;Folder options&quot; window.\r\n5. When you get the &quot;Folder options&quot; window, click on the tab &quot;File types&quot;. You should be able to either edit or add JAR files (`.jar` extension)\r\n6. Change the program used to open JAR files. In the file select window, go to the folder where the JRE is installed (should be `C:/Program Files/Java/...`, mark &quot;Always open with&quot;, and select the `javaw.exe` file.","title":"How to run .jar file by double click on Windows 7 64-bit?","body":"<p><a href=\"http://www.wikihow.com/Run-a-.Jar-Java-File\" rel=\"nofollow\">http://www.wikihow.com/Run-a-.Jar-Java-File</a></p>\n\n<ol>\n<li>Assuming you've loaded the Java JRE and/or Java SDK, then</li>\n<li>To do associations, go to \"<em>My Computer</em>\", click on one of your drives (<code>C:</code> for instance).</li>\n<li>When it is shown, choose \"Tools\" »» \"Folder options\" (or Properties... it's in different places depending on the Windows version).</li>\n<li>Open Windows Explorer (just open any folder) to get the \"Tools\" -> \"Folder options\" window.</li>\n<li>When you get the \"Folder options\" window, click on the tab \"File types\". You should be able to either edit or add JAR files (<code>.jar</code> extension)</li>\n<li>Change the program used to open JAR files. In the file select window, go to the folder where the JRE is installed (should be <code>C:/Program Files/Java/...</code>, mark \"Always open with\", and select the <code>javaw.exe</code> file.</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":139377,"reputation":3663,"user_id":344927,"accept_rate":100,"display_name":"stratwine"},"down_vote_count":10,"up_vote_count":50,"is_accepted":true,"score":40,"last_activity_date":1398530543,"creation_date":1323894915,"answer_id":8511277,"question_id":8511063,"body_markdown":"What is listed in right-click-&gt; Open With ?\r\nIs some other program listed as the default program ? Is a Java Runtime listed ? If a Java Runtime is listed, you can open with it, and make it the default program to run with.\r\n\r\nie,\r\n&lt;pre&gt;\r\nRight Click -&gt;  Properties -&gt; Change -&gt; C:\\Program Files\\Java\\jre7\\bin\\javaw.exe\r\n&lt;/pre&gt;","title":"How to run .jar file by double click on Windows 7 64-bit?","body":"<p>What is listed in right-click-> Open With ?\nIs some other program listed as the default program ? Is a Java Runtime listed ? If a Java Runtime is listed, you can open with it, and make it the default program to run with.</p>\n\n<p>ie,</p>\n\n<pre>\nRight Click ->  Properties -> Change -> C:\\Program Files\\Java\\jre7\\bin\\javaw.exe\n</pre>\n"},{"tags":[],"owner":{"account_id":1332615,"reputation":181,"user_id":1276154,"display_name":"unpopular"},"down_vote_count":2,"up_vote_count":18,"is_accepted":false,"score":16,"last_activity_date":1401659519,"creation_date":1332013165,"answer_id":9753103,"question_id":8511063,"body_markdown":"For Windows 7:\r\n\r\n1. Start *&quot;Control Panel&quot;*\r\n2. Click *&quot;Default Programs&quot;*\r\n3. Click *&quot;Associate a file type or protocol with a specific program&quot;*\r\n4. Double click `.jar`\r\n5. Browse `C:\\Program Files\\Java\\jre7\\bin\\javaw.exe`\r\n6. Click the button Open\r\n7. Click the button OK\r\n","title":"How to run .jar file by double click on Windows 7 64-bit?","body":"<p>For Windows 7:</p>\n\n<ol>\n<li>Start <em>\"Control Panel\"</em></li>\n<li>Click <em>\"Default Programs\"</em></li>\n<li>Click <em>\"Associate a file type or protocol with a specific program\"</em></li>\n<li>Double click <code>.jar</code></li>\n<li>Browse <code>C:\\Program Files\\Java\\jre7\\bin\\javaw.exe</code></li>\n<li>Click the button Open</li>\n<li>Click the button OK</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":1731432,"reputation":69,"user_id":1584968,"display_name":"Rachael"},"down_vote_count":1,"up_vote_count":7,"is_accepted":false,"score":6,"last_activity_date":1344434933,"creation_date":1344434933,"answer_id":11866305,"question_id":8511063,"body_markdown":"I had the same problem with .jar files not opening on a double click. It turned out that I had two versions of Java installed (Java 6 and 7). Uninstalling Java 6 from Control Panel-&gt; Uninstall a Program was what finally allowed .jar files to open on a double click without using the command window.","title":"How to run .jar file by double click on Windows 7 64-bit?","body":"<p>I had the same problem with .jar files not opening on a double click. It turned out that I had two versions of Java installed (Java 6 and 7). Uninstalling Java 6 from Control Panel-> Uninstall a Program was what finally allowed .jar files to open on a double click without using the command window.</p>\n"},{"tags":[],"owner":{"account_id":112989,"reputation":9768,"user_id":297823,"accept_rate":100,"display_name":"Dariusz Woźniak"},"down_vote_count":6,"up_vote_count":27,"is_accepted":false,"score":21,"last_activity_date":1698142104,"creation_date":1356134125,"answer_id":13998710,"question_id":8511063,"body_markdown":"You may also run it from the [Command Prompt (cmd)][1]:\r\n\r\n    java.exe -jar file.jar\r\n\r\nI know this is not an answer for the double-click, but it might save time for some.\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Cmd.exe","title":"How to run .jar file by double click on Windows 7 64-bit?","body":"<p>You may also run it from the <a href=\"https://en.wikipedia.org/wiki/Cmd.exe\" rel=\"nofollow noreferrer\">Command Prompt (cmd)</a>:</p>\n<pre><code>java.exe -jar file.jar\n</code></pre>\n<p>I know this is not an answer for the double-click, but it might save time for some.</p>\n"},{"tags":[],"owner":{"account_id":31848,"reputation":43488,"user_id":87796,"accept_rate":93,"display_name":"P.Brian.Mackey"},"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1401659688,"creation_date":1385052109,"answer_id":20126847,"question_id":8511063,"body_markdown":"If you try [**unpopular**&#39;s answer][1]:\r\n\r\n&gt; For Windows 7:\r\n&gt; \r\n&gt; 1. Start *&quot;Control Panel&quot;*\r\n&gt; 2. Click *&quot;Default Programs&quot;*\r\n&gt; 3. Click *&quot;Associate a file type or protocol with a specific program&quot;*\r\n&gt; 4. Double click `.jar`\r\n&gt; 5. Browse `C:\\Program Files\\Java\\jre7\\bin\\javaw.exe`\r\n&gt; 6. Click the button Open\r\n&gt; 7. Click the button OK\r\n\r\nAnd jar files **still fail to open** (in my case it was like I never double clicked):  \r\nopen the **Command Prompt** (to be safe with admin rights enabled) and type the following commands:\r\n\r\n`java -version` This should return a version so you can safely assume java is installed.\r\n\r\nThen run\r\n\r\n`java -jar &quot;PATHTOFILE\\FILENAME.JAR&quot;`\r\n\r\nRead through the output generated.  You may discover an error message.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/8511063/how-to-run-jar-file-by-double-click-on-windows-7-64/9753103#9753103","title":"How to run .jar file by double click on Windows 7 64-bit?","body":"<p>If you try <a href=\"https://stackoverflow.com/questions/8511063/how-to-run-jar-file-by-double-click-on-windows-7-64/9753103#9753103\"><strong>unpopular</strong>'s answer</a>:</p>\n\n<blockquote>\n  <p>For Windows 7:</p>\n  \n  <ol>\n  <li>Start <em>\"Control Panel\"</em></li>\n  <li>Click <em>\"Default Programs\"</em></li>\n  <li>Click <em>\"Associate a file type or protocol with a specific program\"</em></li>\n  <li>Double click <code>.jar</code></li>\n  <li>Browse <code>C:\\Program Files\\Java\\jre7\\bin\\javaw.exe</code></li>\n  <li>Click the button Open</li>\n  <li>Click the button OK</li>\n  </ol>\n</blockquote>\n\n<p>And jar files <strong>still fail to open</strong> (in my case it was like I never double clicked):<br>\nopen the <strong>Command Prompt</strong> (to be safe with admin rights enabled) and type the following commands:</p>\n\n<p><code>java -version</code> This should return a version so you can safely assume java is installed.</p>\n\n<p>Then run</p>\n\n<p><code>java -jar \"PATHTOFILE\\FILENAME.JAR\"</code></p>\n\n<p>Read through the output generated.  You may discover an error message.</p>\n"},{"tags":[],"owner":{"account_id":83626,"reputation":3880,"user_id":234309,"display_name":"Aaron Thoma"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1424401401,"creation_date":1424401401,"answer_id":28620991,"question_id":8511063,"body_markdown":"[Installing][1] the newest JRE fixed this for me.\r\n\r\n(Even though I had a JDK and JRE(s) installed before.)\r\n\r\n\r\n  [1]: http://java.com/download","title":"How to run .jar file by double click on Windows 7 64-bit?","body":"<p><a href=\"http://java.com/download\" rel=\"nofollow\">Installing</a> the newest JRE fixed this for me.</p>\n\n<p>(Even though I had a JDK and JRE(s) installed before.)</p>\n"},{"tags":[],"owner":{"account_id":5907840,"reputation":945,"user_id":4648976,"accept_rate":75,"display_name":"mustangDC"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1431673518,"creation_date":1431673518,"answer_id":30253506,"question_id":8511063,"body_markdown":"Your problem might also be inside your Java code setting, I mean, if your program somehow could not realize the main class/main file (**entry point**), it will not launch the the program/.jar (specially application built on IDE&#39;s). To solve that on an IDE :\r\n\r\n - ***Right Click the project &gt; Properties &gt; Run &gt; Browse Main Class &gt; OK.***\r\n - ***Clean and Rebuild***\r\n\r\nTry running it now. Hope it helps\r\n\r\n ","title":"How to run .jar file by double click on Windows 7 64-bit?","body":"<p>Your problem might also be inside your Java code setting, I mean, if your program somehow could not realize the main class/main file (<strong>entry point</strong>), it will not launch the the program/.jar (specially application built on IDE's). To solve that on an IDE :</p>\n\n<ul>\n<li><strong><em>Right Click the project > Properties > Run > Browse Main Class > OK.</em></strong></li>\n<li><strong><em>Clean and Rebuild</em></strong></li>\n</ul>\n\n<p>Try running it now. Hope it helps</p>\n"},{"tags":[],"owner":{"account_id":3544418,"reputation":1233,"user_id":2960744,"display_name":"AshUK"},"down_vote_count":0,"up_vote_count":60,"is_accepted":false,"score":60,"last_activity_date":1433154967,"creation_date":1433154967,"answer_id":30571306,"question_id":8511063,"body_markdown":"If you have previously used the right click and opened with \\path\\to\\your\\javaw.exe then you will need to **remove** the following registry key.\r\n\r\n`[-HKEY_CURRENT_USER\\Software\\Microsoft\\Windows\\CurrentVersion\\Explorer\\FileExts\\.jar]`\r\n\r\nThen run\r\n\r\n    C:\\&gt;assoc .jar=jarfile\r\n    C:\\&gt;ftype jarfile=&quot;C:\\path\\to\\your\\javaw.exe&quot; -jar &quot;%1&quot; %*\r\n","title":"How to run .jar file by double click on Windows 7 64-bit?","body":"<p>If you have previously used the right click and opened with \\path\\to\\your\\javaw.exe then you will need to <strong>remove</strong> the following registry key.</p>\n\n<p><code>[-HKEY_CURRENT_USER\\Software\\Microsoft\\Windows\\CurrentVersion\\Explorer\\FileExts\\.jar]</code></p>\n\n<p>Then run</p>\n\n<pre><code>C:\\&gt;assoc .jar=jarfile\nC:\\&gt;ftype jarfile=\"C:\\path\\to\\your\\javaw.exe\" -jar \"%1\" %*\n</code></pre>\n"},{"tags":[],"owner":{"account_id":365876,"reputation":2759,"user_id":711061,"accept_rate":66,"display_name":"Mauro Sampietro"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1438160955,"creation_date":1438160955,"answer_id":31695999,"question_id":8511063,"body_markdown":"It&#39;s not a file association problem since you can launch the application correctly through command line.\r\n\r\nThe problem is when you double click on an associated file the application starts and runs with the file&#39;s path as base execution path. Any relative path will be computed from the file path and everything you try to load will probably be missing.\r\n\r\nNothing happens, even if you surround all of your entry point code with try/catch(Exception) because java s throwing Throwables and not Exceptions: to fix this in your java entry point surround the content of the main method with a try/catch(Throwable) (base class for Exception and Error) and debug.\r\n\r\n","title":"How to run .jar file by double click on Windows 7 64-bit?","body":"<p>It's not a file association problem since you can launch the application correctly through command line.</p>\n\n<p>The problem is when you double click on an associated file the application starts and runs with the file's path as base execution path. Any relative path will be computed from the file path and everything you try to load will probably be missing.</p>\n\n<p>Nothing happens, even if you surround all of your entry point code with try/catch(Exception) because java s throwing Throwables and not Exceptions: to fix this in your java entry point surround the content of the main method with a try/catch(Throwable) (base class for Exception and Error) and debug.</p>\n"},{"tags":[],"owner":{"account_id":5131675,"reputation":368,"user_id":4111643,"accept_rate":100,"display_name":"CodeMonkey"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1449004930,"creation_date":1449004930,"answer_id":34030427,"question_id":8511063,"body_markdown":"I had the problem that windows was blocking it from running (Windows 10 Pro). Right click icon&gt; properties&gt; in the bottom right corner it might tell you &quot;Windows has blocked the functionality........&quot; next to it there is a check box labeled &quot;Unblock&quot;&gt; uncheck the box&gt; apply&gt; option to block goes away and then you can run it. ","title":"How to run .jar file by double click on Windows 7 64-bit?","body":"<p>I had the problem that windows was blocking it from running (Windows 10 Pro). Right click icon> properties> in the bottom right corner it might tell you \"Windows has blocked the functionality........\" next to it there is a check box labeled \"Unblock\"> uncheck the box> apply> option to block goes away and then you can run it. </p>\n"},{"tags":[],"owner":{"account_id":2305944,"reputation":529,"user_id":2025229,"display_name":"BoyBlueSky"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1455302495,"creation_date":1455302495,"answer_id":35369918,"question_id":8511063,"body_markdown":"I created a project, JAR_Runnr, for precisely this. =)\r\n\r\nhttp://projects.killerapplets.com/JAR_Runner/","title":"How to run .jar file by double click on Windows 7 64-bit?","body":"<p>I created a project, JAR_Runnr, for precisely this. =)</p>\n\n<p><a href=\"http://projects.killerapplets.com/JAR_Runner/\" rel=\"nofollow\">http://projects.killerapplets.com/JAR_Runner/</a></p>\n"},{"tags":[],"owner":{"account_id":7556535,"reputation":1528,"user_id":5735939,"accept_rate":57,"display_name":"darecoder"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1465221403,"creation_date":1465221403,"answer_id":37659393,"question_id":8511063,"body_markdown":"change the default application for JAR files from java.exe to javaw.exe from your JAVA_HOME/bin folder.\r\n\r\nThis is because, java.exe is console application only, but JAR file needs a window rendered execution. Since javaw.exe is a window application, it is preferred for the execution of JAR files.\r\n\r\nAn alternative to this is that to some extent you can use command prompt to run your JAR files by simply using **java** keyword with **-jar** attrib.","title":"How to run .jar file by double click on Windows 7 64-bit?","body":"<p>change the default application for JAR files from java.exe to javaw.exe from your JAVA_HOME/bin folder.</p>\n\n<p>This is because, java.exe is console application only, but JAR file needs a window rendered execution. Since javaw.exe is a window application, it is preferred for the execution of JAR files.</p>\n\n<p>An alternative to this is that to some extent you can use command prompt to run your JAR files by simply using <strong>java</strong> keyword with <strong>-jar</strong> attrib.</p>\n"},{"tags":[],"owner":{"account_id":8317671,"reputation":4009,"user_id":6250402,"display_name":"hong4rc"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1525141669,"creation_date":1525140518,"answer_id":50110541,"question_id":8511063,"body_markdown":"This is my way:  \r\n\r\n1. Create file bat (example openJar.bat).\r\n\r\n        @echo off\r\n        start javaw -jar &quot;%1&quot; %*\r\n        exit\r\n\r\n2. Cut it and paste to C:\\Program Files\\Java\\&lt;your jre&gt;\\bin (this step is unnecessary, but you should it).  \r\n3. Right click jar file &gt; Properties &gt; Choose open with (Change button ) and select your file bat.  \r\n4. Double click your jar file to test it.\r\n","title":"How to run .jar file by double click on Windows 7 64-bit?","body":"<p>This is my way:  </p>\n\n<ol>\n<li><p>Create file bat (example openJar.bat).</p>\n\n<pre><code>@echo off\nstart javaw -jar \"%1\" %*\nexit\n</code></pre></li>\n<li><p>Cut it and paste to C:\\Program Files\\Java\\\\bin (this step is unnecessary, but you should it).  </p></li>\n<li>Right click jar file > Properties > Choose open with (Change button ) and select your file bat.  </li>\n<li>Double click your jar file to test it.</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":6339143,"reputation":107,"user_id":4921678,"display_name":"Ange Kouakou"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1533713293,"creation_date":1533713293,"answer_id":51740881,"question_id":8511063,"body_markdown":"Had to try this:\r\n\r\n 1. Open command prompt as admin\r\n 2. Move to the file folder using `cd` command\r\n 3. Type `java.exe -jar *filename*.jar`\r\n 4. Press enter\r\n\r\nThe app should pop right after that.","title":"How to run .jar file by double click on Windows 7 64-bit?","body":"<p>Had to try this:</p>\n\n<ol>\n<li>Open command prompt as admin</li>\n<li>Move to the file folder using <code>cd</code> command</li>\n<li>Type <code>java.exe -jar *filename*.jar</code></li>\n<li>Press enter</li>\n</ol>\n\n<p>The app should pop right after that.</p>\n"},{"tags":[],"owner":{"account_id":344453,"reputation":2995,"user_id":676779,"display_name":"ePandit"},"down_vote_count":0,"up_vote_count":19,"is_accepted":false,"score":19,"last_activity_date":1540350760,"creation_date":1540350760,"answer_id":52960565,"question_id":8511063,"body_markdown":"I tried all above steps to resolve the problem but nothing worked. I had installed both JDK and JRE.\r\n\r\nIn my case, one jar file was being opened by double click while other was not being opened. I examined those files and the probable reason was that which was being opened, was created using JAVA SE 6 and the one not being opened was created using JAVA SE 7. Although, the problematic jar file was being run via command prompt (java -jar myfile.jar).\r\n\r\nI tried Right Click -&gt;  Properties -&gt; Change to javaw.exe with both in JDK\\bin directory and JRE\\bin directory.\r\n\r\nI was finally able to fix the problem by changing javaw.exe path (from JDK\\bin to JRE\\bin) in registry editor.\r\n\r\nGo to **HKEY_CLASSES_ROOT\\jarfile\\shell\\open\\command**, the value was,\r\n\r\n    &quot;C:\\Program Files\\Java\\jdk-11.0.1\\bin\\javaw.exe&quot; -jar &quot;%1&quot; %*\r\n\r\nI changed it to,\r\n\r\n    &quot;C:\\Program Files\\Java\\jre1.8.0_191\\bin\\javaw.exe&quot; -jar &quot;%1&quot; %*\r\n\r\nand it worked. Now the jar file can be opened by double click.\r\n\r\n","title":"How to run .jar file by double click on Windows 7 64-bit?","body":"<p>I tried all above steps to resolve the problem but nothing worked. I had installed both JDK and JRE.</p>\n\n<p>In my case, one jar file was being opened by double click while other was not being opened. I examined those files and the probable reason was that which was being opened, was created using JAVA SE 6 and the one not being opened was created using JAVA SE 7. Although, the problematic jar file was being run via command prompt (java -jar myfile.jar).</p>\n\n<p>I tried Right Click ->  Properties -> Change to javaw.exe with both in JDK\\bin directory and JRE\\bin directory.</p>\n\n<p>I was finally able to fix the problem by changing javaw.exe path (from JDK\\bin to JRE\\bin) in registry editor.</p>\n\n<p>Go to <strong>HKEY_CLASSES_ROOT\\jarfile\\shell\\open\\command</strong>, the value was,</p>\n\n<pre><code>\"C:\\Program Files\\Java\\jdk-11.0.1\\bin\\javaw.exe\" -jar \"%1\" %*\n</code></pre>\n\n<p>I changed it to,</p>\n\n<pre><code>\"C:\\Program Files\\Java\\jre1.8.0_191\\bin\\javaw.exe\" -jar \"%1\" %*\n</code></pre>\n\n<p>and it worked. Now the jar file can be opened by double click.</p>\n"},{"tags":[],"owner":{"account_id":1068744,"reputation":1275,"user_id":1068538,"accept_rate":69,"display_name":"Dush"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1559015823,"creation_date":1559013703,"answer_id":56334577,"question_id":8511063,"body_markdown":"I had this same issue, and searched the internet for a solution and none of the suggestions didn’t not open by double clicking the `.jar` file.\r\n\r\nIn my case the reason is I have multiple JDK &amp; JRE versions installed on my computer. Since I am a software developer working with several different versions for different clients I need to use multiple JDKs in my PC (Windows 10 Pro). So I do not want to change the system variables (i.e. `JAVA_HOME`, `JRE_HOME` or `PATH`), instead I use command prompt to run java in user process whenever I wanted to use a different version.\r\n\r\nWhen installing JDK it registers the `.jar` file association with latest version we installed in the PC. If you right click on the .jar icon and select properties, it will show that file opens with “Java(TM) Platform SE Binary”.  If we look at the registry key: `HKEY_CLASSES_ROOT\\jarfile\\shell\\open\\command`, it will point to latest JDK version.\r\n\r\nIt is not a good idea (sometimes annoying) to change the registry key every time I want to run an app build from a different version.\r\n\r\nSo in my situation it is impossible to just double click the `.jar` file to execute it. But instead I found a work around solution myself. \r\n\r\n**Scenario:**\r\n\r\nMultiple JDKs (1.7, 1.8, 9.0, 10.0, 11.0, and 12.0)are installed in the PC, so the latest installed was 12.0.\r\n\r\n**Problem**\r\n\r\nWant to double click an executable `.jar` developed using JDK 1.8 and didn’t work\r\n\r\n**This is my work around solution:**\r\n\r\n 1. Create a shortcut for the `.jar` file that you want to open.  \r\n 2. Right click the shortcut icon and select properties -&gt; Shortcut tab \r\n 3. Change the text in the target (for example `&quot;D:\\Dev\\JavaApp1.8.jar&quot;`) \r\n    To \r\n\r\n    &quot;`C:\\Program Files\\Java\\jdk1.8.0\\bin\\javaw.exe`&quot; `-jar`\r\n        &quot;`D:\\Dev\\JavaApp1.8.jar`&quot; \r\n\r\n 4. Then click ok Double click the shortcut.\r\n\r\nIt should now open the app.","title":"How to run .jar file by double click on Windows 7 64-bit?","body":"<p>I had this same issue, and searched the internet for a solution and none of the suggestions didn’t not open by double clicking the <code>.jar</code> file.</p>\n\n<p>In my case the reason is I have multiple JDK &amp; JRE versions installed on my computer. Since I am a software developer working with several different versions for different clients I need to use multiple JDKs in my PC (Windows 10 Pro). So I do not want to change the system variables (i.e. <code>JAVA_HOME</code>, <code>JRE_HOME</code> or <code>PATH</code>), instead I use command prompt to run java in user process whenever I wanted to use a different version.</p>\n\n<p>When installing JDK it registers the <code>.jar</code> file association with latest version we installed in the PC. If you right click on the .jar icon and select properties, it will show that file opens with “Java(TM) Platform SE Binary”.  If we look at the registry key: <code>HKEY_CLASSES_ROOT\\jarfile\\shell\\open\\command</code>, it will point to latest JDK version.</p>\n\n<p>It is not a good idea (sometimes annoying) to change the registry key every time I want to run an app build from a different version.</p>\n\n<p>So in my situation it is impossible to just double click the <code>.jar</code> file to execute it. But instead I found a work around solution myself. </p>\n\n<p><strong>Scenario:</strong></p>\n\n<p>Multiple JDKs (1.7, 1.8, 9.0, 10.0, 11.0, and 12.0)are installed in the PC, so the latest installed was 12.0.</p>\n\n<p><strong>Problem</strong></p>\n\n<p>Want to double click an executable <code>.jar</code> developed using JDK 1.8 and didn’t work</p>\n\n<p><strong>This is my work around solution:</strong></p>\n\n<ol>\n<li>Create a shortcut for the <code>.jar</code> file that you want to open.  </li>\n<li>Right click the shortcut icon and select properties -> Shortcut tab </li>\n<li><p>Change the text in the target (for example <code>\"D:\\Dev\\JavaApp1.8.jar\"</code>) \nTo </p>\n\n<p>\"<code>C:\\Program Files\\Java\\jdk1.8.0\\bin\\javaw.exe</code>\" <code>-jar</code>\n    \"<code>D:\\Dev\\JavaApp1.8.jar</code>\" </p></li>\n<li><p>Then click ok Double click the shortcut.</p></li>\n</ol>\n\n<p>It should now open the app.</p>\n"},{"tags":[],"owner":{"account_id":11389854,"reputation":6022,"user_id":8370915,"display_name":"invzbl3"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1565717886,"creation_date":1565710413,"answer_id":57481070,"question_id":8511063,"body_markdown":"I had the same issue: \r\n*if I doubleclick on a jar executable file, and my Java application does not start.*\r\n\r\nSo  tried to change manually also registry key, but it didn&#39;t help me. Tried to reinstall JDK newer/older without any result. (I have several versions of Java) \r\n\r\nAnd I&#39;ve solved it only using jarfix program. Jarfix automatically fixed .jar association problem on Windows system. (check regedit: `PC\\HKEY_CLASSES_ROOT\\jarfile\\shell\\open\\command`) \r\n\r\nWhat says Johann Nepomuk L&#246;fflmann:\r\n\r\n&gt; The root cause for the problem above is, that a program has stolen the\r\n&gt; .jar association. If you have installed the Java Runtime Environment\r\n&gt; the first time, the file type called &quot;jar&quot; is assigned to javaw.exe\r\n&gt; correctly. &quot;jar&quot; is an abbreviation for &quot;java archive&quot; and javaw.exe\r\n&gt; is the correct program to execute a .jar. However, on Windows any\r\n&gt; program can steal a file type at any time even if it is already\r\n&gt; associated with a program. Many zip/unzip programs prefer to do this,\r\n&gt; because a jar is stored in the .zip format.  If you doubleclick on a\r\n&gt; .jar, your pack program opens the file, rather than javaw runs the\r\n&gt; program, because your pack program ignores the meta information which\r\n&gt; are also stored in a .jar. In the Oracle bug database there is the\r\n&gt; low-priority report 4912211 &quot;add mechanism to restore hijacked .jar\r\n&gt; and .jnlp file extensions&quot;, but it has been closed as &quot;Closed, Will\r\n&gt; Not Fix&quot;.\r\n&gt; \r\n&gt; You may also miss the file connection with .jar if you are using a\r\n&gt; free OpenJDK without an installer.\r\n\r\n*Notice:*\r\nmy OS is Windows 10, but logic is the same for 7, 8 and so on.\r\n\r\nHelpful links:   \r\nhttps://windowsreport.com/jar-files-not-opening-windows-10/\r\nhttps://johann.loefflmann.net/en/software/jarfix/index.html ","title":"How to run .jar file by double click on Windows 7 64-bit?","body":"<p>I had the same issue: \n<em>if I doubleclick on a jar executable file, and my Java application does not start.</em></p>\n\n<p>So  tried to change manually also registry key, but it didn't help me. Tried to reinstall JDK newer/older without any result. (I have several versions of Java) </p>\n\n<p>And I've solved it only using jarfix program. Jarfix automatically fixed .jar association problem on Windows system. (check regedit: <code>PC\\HKEY_CLASSES_ROOT\\jarfile\\shell\\open\\command</code>) </p>\n\n<p>What says Johann Nepomuk Löfflmann:</p>\n\n<blockquote>\n  <p>The root cause for the problem above is, that a program has stolen the\n  .jar association. If you have installed the Java Runtime Environment\n  the first time, the file type called \"jar\" is assigned to javaw.exe\n  correctly. \"jar\" is an abbreviation for \"java archive\" and javaw.exe\n  is the correct program to execute a .jar. However, on Windows any\n  program can steal a file type at any time even if it is already\n  associated with a program. Many zip/unzip programs prefer to do this,\n  because a jar is stored in the .zip format.  If you doubleclick on a\n  .jar, your pack program opens the file, rather than javaw runs the\n  program, because your pack program ignores the meta information which\n  are also stored in a .jar. In the Oracle bug database there is the\n  low-priority report 4912211 \"add mechanism to restore hijacked .jar\n  and .jnlp file extensions\", but it has been closed as \"Closed, Will\n  Not Fix\".</p>\n  \n  <p>You may also miss the file connection with .jar if you are using a\n  free OpenJDK without an installer.</p>\n</blockquote>\n\n<p><em>Notice:</em>\nmy OS is Windows 10, but logic is the same for 7, 8 and so on.</p>\n\n<p>Helpful links:<br>\n<a href=\"https://windowsreport.com/jar-files-not-opening-windows-10/\" rel=\"nofollow noreferrer\">https://windowsreport.com/jar-files-not-opening-windows-10/</a>\n<a href=\"https://johann.loefflmann.net/en/software/jarfix/index.html\" rel=\"nofollow noreferrer\">https://johann.loefflmann.net/en/software/jarfix/index.html</a> </p>\n"},{"tags":[],"owner":{"account_id":28175457,"reputation":21,"user_id":21533296,"display_name":"Seco"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684403030,"creation_date":1684403030,"answer_id":76279559,"question_id":8511063,"body_markdown":"\r\n\r\nTo run jar file by double click (in windows): Open cmd and write:\r\n\r\n    assoc .jar\r\n\r\nyou should get:\r\n\r\n    .jar=jarfile\r\n\r\nthen write:\r\n\r\n    ftype jarfile\r\n\r\nyou should get something like this:\r\n\r\n    jarfile=&quot;C:\\Program Files\\Java\\jdk-20\\bin\\javaw.exe&quot; -jar &quot;%1&quot; &quot;%*&quot;\r\n\r\nthen write this:\r\n\r\n    ftype JARFile=&quot;C:\\Program Files\\Java\\jdk-20\\bin\\javaw.exe&quot; -jar --module-path &quot;C:\\Program Files\\Java\\javafx-sdk-20\\lib&quot; --add-modules javafx.controls,javafx.fxml &quot;%%1&quot; &quot;%%*&quot;\r\n\r\nReplace JARFile path with your path to javaw.exe, and modul-path with your path to javafx lib. If you are using NetBeans, Eclipse or IntelliJ, after -jar those are VM arguments/options you had to write to run it from application. You can write/copy it to notepad and save it with extension .bat (anyName.bat) right click and run it as administrator. Now if you write again:\r\n\r\n    ftype jarfile\r\n\r\nyou should get:\r\n\r\n    jarfile=&quot;C:\\Program Files\\Java\\jdk-20\\bin\\javaw.exe&quot; -jar --module-path &quot;C:\\Program Files\\Java\\javafx-sdk-20\\lib&quot; --add-modules javafx.controls,javafx.fxml &quot;%1&quot; &quot;%*&quot;\r\n\r\nand it should work, on your computer. Notice double % and then single. The percent signs are doubled to escape them, because a single percent has a special meaning within a batch file. More about it here: https://ss64.com/nt/ftype.html\r\n","title":"How to run .jar file by double click on Windows 7 64-bit?","body":"<p>To run jar file by double click (in windows): Open cmd and write:</p>\n<pre><code>assoc .jar\n</code></pre>\n<p>you should get:</p>\n<pre><code>.jar=jarfile\n</code></pre>\n<p>then write:</p>\n<pre><code>ftype jarfile\n</code></pre>\n<p>you should get something like this:</p>\n<pre><code>jarfile=&quot;C:\\Program Files\\Java\\jdk-20\\bin\\javaw.exe&quot; -jar &quot;%1&quot; &quot;%*&quot;\n</code></pre>\n<p>then write this:</p>\n<pre><code>ftype JARFile=&quot;C:\\Program Files\\Java\\jdk-20\\bin\\javaw.exe&quot; -jar --module-path &quot;C:\\Program Files\\Java\\javafx-sdk-20\\lib&quot; --add-modules javafx.controls,javafx.fxml &quot;%%1&quot; &quot;%%*&quot;\n</code></pre>\n<p>Replace JARFile path with your path to javaw.exe, and modul-path with your path to javafx lib. If you are using NetBeans, Eclipse or IntelliJ, after -jar those are VM arguments/options you had to write to run it from application. You can write/copy it to notepad and save it with extension .bat (anyName.bat) right click and run it as administrator. Now if you write again:</p>\n<pre><code>ftype jarfile\n</code></pre>\n<p>you should get:</p>\n<pre><code>jarfile=&quot;C:\\Program Files\\Java\\jdk-20\\bin\\javaw.exe&quot; -jar --module-path &quot;C:\\Program Files\\Java\\javafx-sdk-20\\lib&quot; --add-modules javafx.controls,javafx.fxml &quot;%1&quot; &quot;%*&quot;\n</code></pre>\n<p>and it should work, on your computer. Notice double % and then single. The percent signs are doubled to escape them, because a single percent has a special meaning within a batch file. More about it here: <a href=\"https://ss64.com/nt/ftype.html\" rel=\"nofollow noreferrer\">https://ss64.com/nt/ftype.html</a></p>\n"}],"owner":{"account_id":288885,"reputation":1415,"user_id":589554,"accept_rate":60,"display_name":"coder"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":551003,"favorite_count":0,"down_vote_count":0,"up_vote_count":89,"accepted_answer_id":8511277,"answer_count":19,"score":89,"last_activity_date":1698142104,"creation_date":1323893840,"question_id":8511063,"body_markdown":"Running a .jar file in a command line works fine, but i am not able to run any .jar file by double clicking on my Windows 7 (64). It seems nothing happens after the double click.\r\n\r\nI tried the `ftype` hint, no success:\r\n\r\n    ftype jarfile=&quot;C:\\Program Files\\Java\\jre7\\bin\\javaw.exe&quot; -jar &quot;%1&quot; %*\r\n\r\nI reinstalled the JDK 7 64-bit, no success.\r\n\r\nAny idea?","title":"How to run .jar file by double click on Windows 7 64-bit?","body":"<p>Running a .jar file in a command line works fine, but i am not able to run any .jar file by double clicking on my Windows 7 (64). It seems nothing happens after the double click.</p>\n\n<p>I tried the <code>ftype</code> hint, no success:</p>\n\n<pre><code>ftype jarfile=\"C:\\Program Files\\Java\\jre7\\bin\\javaw.exe\" -jar \"%1\" %*\n</code></pre>\n\n<p>I reinstalled the JDK 7 64-bit, no success.</p>\n\n<p>Any idea?</p>\n"},{"tags":["java","spring-boot","tomcat10"],"answers":[{"tags":[],"owner":{"account_id":3635036,"reputation":1118,"user_id":3030340,"display_name":"Az.MaYo"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1697531281,"creation_date":1697531281,"answer_id":77307296,"question_id":77307186,"body_markdown":"When you define context parameters in a Context configuration like you&#39;ve done in your /opt/tomcat/conf/Catalina/web1/ROOT.xml, those parameters are specific to the Tomcat context and aren&#39;t automatically available to your Spring Boot application. To make these context parameters available in your Spring Boot application, you can access them through the ServletContext during application startup. Here&#39;s how you can load them in your Spring Boot application:\r\n\r\n 1. Create a ServletContextListener in your Spring Boot application.\r\n    This listener will be called when the application starts.\r\n\r\n\r\n        import javax.servlet.ServletContextEvent;\r\n        import javax.servlet.ServletContextListener;\r\n        \r\n        public class ContextParamListener implements ServletContextListener {\r\n    \r\n        @Override\r\n        public void contextInitialized(ServletContextEvent servletContextEvent) {\r\n            // Access the ServletContext and retrieve context parameters\r\n            String website = servletContextEvent.getServletContext().getInitParameter(&quot;website&quot;);\r\n            String log4j2Config = servletContextEvent.getServletContext().getInitParameter(&quot;log4j2.configurationFile&quot;);\r\n    \r\n            // Store these values in a place accessible to your application\r\n            // For example, you can store them in Environment properties or Spring Boot configuration.\r\n            // You can set them as System properties or as Spring Boot application properties.\r\n            System.setProperty(&quot;website&quot;, website);\r\n            System.setProperty(&quot;log4j2.configurationFile&quot;, log4j2Config);\r\n        }\r\n    \r\n        @Override\r\n        public void contextDestroyed(ServletContextEvent servletContextEvent) {\r\n            // Cleanup if needed\r\n        }\r\n        }\r\n\r\n\r\n\r\n 2. Now, in your @PropertySource annotation, you can access the context\r\n    parameters you&#39;ve stored as system properties:\r\n\r\n    @PropertySource(ignoreResourceNotFound = true, value = {\r\n    &quot;classpath:/environment/default.properties&quot;,\r\n    &quot;classpath:/environment/${website}.properties&quot;,\r\n    &quot;classpath:/environment/log4j2-${log4j2.configurationFile}.xml&quot;})\r\n\r\n\r\nBy setting the context parameters as system properties in the ContextParamListener, you can make them available for configuration in your Spring Boot application. This approach allows you to access context parameters defined in Tomcat within your Spring Boot application during startup.\r\n","title":"Servlet Context Initialization Parameter not Accessible in Spring Boot","body":"<p>When you define context parameters in a Context configuration like you've done in your /opt/tomcat/conf/Catalina/web1/ROOT.xml, those parameters are specific to the Tomcat context and aren't automatically available to your Spring Boot application. To make these context parameters available in your Spring Boot application, you can access them through the ServletContext during application startup. Here's how you can load them in your Spring Boot application:</p>\n<ol>\n<li><p>Create a ServletContextListener in your Spring Boot application.\nThis listener will be called when the application starts.</p>\n<pre><code>import javax.servlet.ServletContextEvent;\nimport javax.servlet.ServletContextListener;\n\npublic class ContextParamListener implements ServletContextListener {\n\n@Override\npublic void contextInitialized(ServletContextEvent servletContextEvent) {\n    // Access the ServletContext and retrieve context parameters\n    String website = servletContextEvent.getServletContext().getInitParameter(&quot;website&quot;);\n    String log4j2Config = servletContextEvent.getServletContext().getInitParameter(&quot;log4j2.configurationFile&quot;);\n\n    // Store these values in a place accessible to your application\n    // For example, you can store them in Environment properties or Spring Boot configuration.\n    // You can set them as System properties or as Spring Boot application properties.\n    System.setProperty(&quot;website&quot;, website);\n    System.setProperty(&quot;log4j2.configurationFile&quot;, log4j2Config);\n}\n\n@Override\npublic void contextDestroyed(ServletContextEvent servletContextEvent) {\n    // Cleanup if needed\n}\n}\n</code></pre>\n</li>\n<li><p>Now, in your @PropertySource annotation, you can access the context\nparameters you've stored as system properties:</p>\n<p>@PropertySource(ignoreResourceNotFound = true, value = {\n&quot;classpath:/environment/default.properties&quot;,\n&quot;classpath:/environment/${website}.properties&quot;,\n&quot;classpath:/environment/log4j2-${log4j2.configurationFile}.xml&quot;})</p>\n</li>\n</ol>\n<p>By setting the context parameters as system properties in the ContextParamListener, you can make them available for configuration in your Spring Boot application. This approach allows you to access context parameters defined in Tomcat within your Spring Boot application during startup.</p>\n"},{"tags":[],"owner":{"account_id":7112428,"reputation":327,"user_id":5439836,"accept_rate":43,"display_name":"mooor"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1698141774,"creation_date":1698141774,"answer_id":77351149,"question_id":77307186,"body_markdown":"Finally I managed to pass the servlet context init params at the right stage.\r\n\r\nThe trick was to run the application as a .war file inside a standalone Tomcat container and override the `onStartup(ServletContext servletContext)` method in my `Application.java`, which subclasses the `SpringBootServletInitializer`. There, I read the expected servlet context params and pass them directly to the `System.setProperty(key, value)` method.\r\n\r\nThe clue here is in the `jakarta.servlet.ServletContainerInitializer` interface and it&#39;s Spring implementation `org.springframework.web.SpringServletContainerInitializer`. It scans all implementations of the `org.springframework.web.WebApplicationInitializer` and executes their `onStartup(ServletContext servletContext)` methods. \r\n\r\nIt only works this way with a standalone servlet container (servlet context loaded first, then passed to the `onStartup` hook of the spring boot application).\r\n\r\nTo overcome this problem when starting a spring boot application with an embedded servlet container, one has to use VM Options.\r\n\r\nHope this will help someone in the future.","title":"Servlet Context Initialization Parameter not Accessible in Spring Boot","body":"<p>Finally I managed to pass the servlet context init params at the right stage.</p>\n<p>The trick was to run the application as a .war file inside a standalone Tomcat container and override the <code>onStartup(ServletContext servletContext)</code> method in my <code>Application.java</code>, which subclasses the <code>SpringBootServletInitializer</code>. There, I read the expected servlet context params and pass them directly to the <code>System.setProperty(key, value)</code> method.</p>\n<p>The clue here is in the <code>jakarta.servlet.ServletContainerInitializer</code> interface and it's Spring implementation <code>org.springframework.web.SpringServletContainerInitializer</code>. It scans all implementations of the <code>org.springframework.web.WebApplicationInitializer</code> and executes their <code>onStartup(ServletContext servletContext)</code> methods.</p>\n<p>It only works this way with a standalone servlet container (servlet context loaded first, then passed to the <code>onStartup</code> hook of the spring boot application).</p>\n<p>To overcome this problem when starting a spring boot application with an embedded servlet container, one has to use VM Options.</p>\n<p>Hope this will help someone in the future.</p>\n"}],"owner":{"account_id":7112428,"reputation":327,"user_id":5439836,"accept_rate":43,"display_name":"mooor"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":74,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77351149,"answer_count":2,"score":0,"last_activity_date":1698141774,"creation_date":1697530229,"question_id":77307186,"body_markdown":"I&#39;m running a Spring Boot(3.1.0) application inside a standalone Tomcat Server (10.12) where I defined a set of Context Parameters in `/opt/tomcat/conf/Catalina/web1/ROOT.xml` as follows:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n      &lt;Context path=&quot;&quot; docBase=&quot;/var/www/web1&quot;&gt;\r\n        &lt;Valve className=&quot;org.apache.catalina.valves.rewrite.RewriteValve&quot;\r\n           resourcePath=&quot;rewrite.config&quot;/&gt;\r\n        &lt;WatchedResource&gt;WEB-INF/rewrite.config&lt;/WatchedResource&gt;\r\n        &lt;Parameter name=&quot;website&quot; value=&quot;web1-dev&quot; override=&quot;false&quot;/&gt;\r\n        &lt;Parameter name=&quot;logging.file.name&quot; value=&quot;web&quot; override=&quot;false&quot;/&gt;\r\n        &lt;Parameter name=&quot;log4j2.configurationFile&quot; value=&quot;log4j2-dev.xml&quot; override=&quot;false&quot;/&gt;\r\n      &lt;/Context&gt;\r\n\r\nFor instance, the `website` parameter should be dynamically used in the Property Configuration class:\r\n\r\n    @PropertySource(ignoreResourceNotFound = true, value =\r\n        {&quot;classpath:/enviroment/default.properties&quot;,\r\n         &quot;classpath:/enviroment/${website}.properties&quot;,\r\n\r\nThe Application however doesn&#39;t seem to see them during the startup phase. I&#39;ve also tried to declare them in the `application.yml` file:\r\n\r\n    server.servlet.context-parameters.log4j2.configurationFile=log4j2-dev.xml\r\n\r\nbut it still doesn&#39;t make any difference. It doesn&#39;t matter if I run the app locally with an embedded Tomcat or as WAR within the standalone Container.\r\n\r\nWhat should I do to make these params visible/accessible to my Spring Boot app at the startup time?\r\n\r\nThe parameters are actually listed in the Spring Actuator /env endpoint:\r\n\r\n    {\r\n     &quot;activeProfiles&quot;:[\r\n      \r\n     ],\r\n      &quot;propertySources&quot;:[\r\n      {\r\n         &quot;name&quot;:&quot;servletContextInitParams&quot;,\r\n         &quot;properties&quot;:{\r\n            &quot;contextConfigLocation&quot;:{\r\n               &quot;value&quot;:&quot;******&quot;\r\n            },\r\n            &quot;website&quot;:{\r\n               &quot;value&quot;:&quot;******&quot;\r\n            },\r\n            &quot;log4j2.configurationFile&quot;:{\r\n               &quot;value&quot;:&quot;******&quot;\r\n            },\r\n            &quot;logging.file.name&quot;:{\r\n               &quot;value&quot;:&quot;******&quot;\r\n            }\r\n         }\r\n      },\r\n\r\nMy idea was to read the params from the `ServletContext` in the `onStartup` method in the main `Application.java` class, since it extends `SpringBootServletInitializer` and then directly pass it to the system properties, e.g. System.setProperty(&quot;website&quot;, &quot;web1&quot;). The problem is that the `onStartup` never gets executed.\r\n\r\nSide note:\r\nThere are two applications (web1, web2) running parallel on the same server, both are using the same code base. I could eventually move two out of there parameters to the `application.yml` since both apps currently use the same value on each stage (dev, staging, prod) but at least the `logging.file.name` should differ from one another.\r\n\r\nAny help much appreciated!","title":"Servlet Context Initialization Parameter not Accessible in Spring Boot","body":"<p>I'm running a Spring Boot(3.1.0) application inside a standalone Tomcat Server (10.12) where I defined a set of Context Parameters in <code>/opt/tomcat/conf/Catalina/web1/ROOT.xml</code> as follows:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n  &lt;Context path=&quot;&quot; docBase=&quot;/var/www/web1&quot;&gt;\n    &lt;Valve className=&quot;org.apache.catalina.valves.rewrite.RewriteValve&quot;\n       resourcePath=&quot;rewrite.config&quot;/&gt;\n    &lt;WatchedResource&gt;WEB-INF/rewrite.config&lt;/WatchedResource&gt;\n    &lt;Parameter name=&quot;website&quot; value=&quot;web1-dev&quot; override=&quot;false&quot;/&gt;\n    &lt;Parameter name=&quot;logging.file.name&quot; value=&quot;web&quot; override=&quot;false&quot;/&gt;\n    &lt;Parameter name=&quot;log4j2.configurationFile&quot; value=&quot;log4j2-dev.xml&quot; override=&quot;false&quot;/&gt;\n  &lt;/Context&gt;\n</code></pre>\n<p>For instance, the <code>website</code> parameter should be dynamically used in the Property Configuration class:</p>\n<pre><code>@PropertySource(ignoreResourceNotFound = true, value =\n    {&quot;classpath:/enviroment/default.properties&quot;,\n     &quot;classpath:/enviroment/${website}.properties&quot;,\n</code></pre>\n<p>The Application however doesn't seem to see them during the startup phase. I've also tried to declare them in the <code>application.yml</code> file:</p>\n<pre><code>server.servlet.context-parameters.log4j2.configurationFile=log4j2-dev.xml\n</code></pre>\n<p>but it still doesn't make any difference. It doesn't matter if I run the app locally with an embedded Tomcat or as WAR within the standalone Container.</p>\n<p>What should I do to make these params visible/accessible to my Spring Boot app at the startup time?</p>\n<p>The parameters are actually listed in the Spring Actuator /env endpoint:</p>\n<pre><code>{\n &quot;activeProfiles&quot;:[\n  \n ],\n  &quot;propertySources&quot;:[\n  {\n     &quot;name&quot;:&quot;servletContextInitParams&quot;,\n     &quot;properties&quot;:{\n        &quot;contextConfigLocation&quot;:{\n           &quot;value&quot;:&quot;******&quot;\n        },\n        &quot;website&quot;:{\n           &quot;value&quot;:&quot;******&quot;\n        },\n        &quot;log4j2.configurationFile&quot;:{\n           &quot;value&quot;:&quot;******&quot;\n        },\n        &quot;logging.file.name&quot;:{\n           &quot;value&quot;:&quot;******&quot;\n        }\n     }\n  },\n</code></pre>\n<p>My idea was to read the params from the <code>ServletContext</code> in the <code>onStartup</code> method in the main <code>Application.java</code> class, since it extends <code>SpringBootServletInitializer</code> and then directly pass it to the system properties, e.g. System.setProperty(&quot;website&quot;, &quot;web1&quot;). The problem is that the <code>onStartup</code> never gets executed.</p>\n<p>Side note:\nThere are two applications (web1, web2) running parallel on the same server, both are using the same code base. I could eventually move two out of there parameters to the <code>application.yml</code> since both apps currently use the same value on each stage (dev, staging, prod) but at least the <code>logging.file.name</code> should differ from one another.</p>\n<p>Any help much appreciated!</p>\n"},{"tags":["java","android","google-play","keytool"],"comments":[{"owner":{"account_id":50585,"reputation":39940,"user_id":150978,"accept_rate":78,"display_name":"Robert"},"score":0,"creation_date":1698141124,"post_id":77350974,"comment_id":136364542,"body_markdown":"Please do not post error messages/stack traces as screenshot, just copy and paste the text into your question.","body":"Please do not post error messages/stack traces as screenshot, just copy and paste the text into your question."}],"owner":{"account_id":22386084,"reputation":1,"user_id":16598873,"display_name":"Alex"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1698141081,"creation_date":1698140238,"question_id":77350974,"body_markdown":"To publish an application to Google Play, you need to export and download the key from Java Keystore.\r\n\r\nI executed the specified command and got encryption_public_key.pem: \r\n`keytool -export -rfc -keystore upload-keystore.jks -alias upload -file upload_certificate.pem`\r\n\r\nAfter that I executed the command: `java -jar pepk.jar --keystore=foo.keystore --alias=foo --output=output.zip --include-cert --rsa-aes-encryption --encryption-key-path=/path/to/encryption_public_key.pem`\r\n\r\nAnd got an error\r\n(https://i.stack.imgur.com/QovjD.png)\r\n\r\nError when exporting the key for Google Play","title":"Error when exporting the key for Google Play","body":"<p>To publish an application to Google Play, you need to export and download the key from Java Keystore.</p>\n<p>I executed the specified command and got encryption_public_key.pem:\n<code>keytool -export -rfc -keystore upload-keystore.jks -alias upload -file upload_certificate.pem</code></p>\n<p>After that I executed the command: <code>java -jar pepk.jar --keystore=foo.keystore --alias=foo --output=output.zip --include-cert --rsa-aes-encryption --encryption-key-path=/path/to/encryption_public_key.pem</code></p>\n<p>And got an error\n(<a href=\"https://i.stack.imgur.com/QovjD.png\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/QovjD.png</a>)</p>\n<p>Error when exporting the key for Google Play</p>\n"},{"tags":["java","sqlite","database-connection"],"comments":[{"owner":{"account_id":265988,"reputation":13467,"user_id":553308,"display_name":"Andrew T Finnell"},"score":2,"creation_date":1313622967,"post_id":7100597,"comment_id":8503525,"body_markdown":"Are you really checking if it exists or if a connection has already been opened?","body":"Are you really checking if it exists or if a connection has already been opened?"},{"owner":{"account_id":310749,"reputation":419,"user_id":623906,"accept_rate":61,"display_name":"SunyGirl"},"score":0,"creation_date":1313623301,"post_id":7100597,"comment_id":8503593,"body_markdown":"No just to check if this database file(with name dbName) already exists or not!","body":"No just to check if this database file(with name dbName) already exists or not!"},{"owner":{"account_id":15188,"reputation":15038,"user_id":31818,"display_name":"seh"},"score":1,"creation_date":1313623446,"post_id":7100597,"comment_id":8503620,"body_markdown":"Note that the slash after &quot;sqlite:&quot; and before the file path is not necessary with several of the SQLite JDBC drivers I&#39;ve used.","body":"Note that the slash after &quot;sqlite:&quot; and before the file path is not necessary with several of the SQLite JDBC drivers I&#39;ve used."}],"answers":[{"tags":[],"owner":{"account_id":287824,"reputation":38852,"user_id":587884,"accept_rate":86,"display_name":"Heisenbug"},"down_vote_count":0,"up_vote_count":14,"is_accepted":true,"score":14,"last_activity_date":1313622583,"creation_date":1313622583,"answer_id":7100626,"question_id":7100597,"body_markdown":"    public static void databaseConnect(String dbName) throws Exception {\r\n    \r\n       File file = new File (dbName);\r\n    \r\n      if(file.exists()) //here&#39;s how to check\r\n         {\r\n             System.out.print(&quot;This database name already exists&quot;);\r\n         }\r\n         else{\r\n    \r\n               Class.forName(&quot;SQLite.JDBCDriver&quot;).newInstance();            \r\n               conn = DriverManager.getConnection(&quot;jdbc:sqlite:/&quot;+ dbName);\r\n               stat = conn.createStatement(); \r\n    \r\n         }\r\n\r\n","title":"How do I check whether a SQLite database file exists using Java?","body":"<pre><code>public static void databaseConnect(String dbName) throws Exception {\n\n   File file = new File (dbName);\n\n  if(file.exists()) //here's how to check\n     {\n         System.out.print(\"This database name already exists\");\n     }\n     else{\n\n           Class.forName(\"SQLite.JDBCDriver\").newInstance();            \n           conn = DriverManager.getConnection(\"jdbc:sqlite:/\"+ dbName);\n           stat = conn.createStatement(); \n\n     }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15188,"reputation":15038,"user_id":31818,"display_name":"seh"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1313623044,"creation_date":1313623044,"answer_id":7100678,"question_id":7100597,"body_markdown":"Assuming that your `dbName` parameter indicates the path to the SQLite file (&quot;-wal&quot; and &quot;-shm&quot; companion files notwithstanding), you can use the Java `java.io.File` class and [its `exists()` predicate][1]:\r\n\r\n    final File f = new File(dbName);\r\n    if (f.exists())\r\n    {\r\n      if (f.isDirectory())\r\n      {\r\n        // Warn about the designated name being a directory.\r\n      }\r\n      else\r\n      {\r\n        // Warn about the designated name already existing as a file.\r\n      }\r\n    }\r\n\r\nOther checks could be warranted too, such as whether the process has the privilege to create the file, though ultimately SQLite will do a better job [ensuring that all its requirements can be fulfilled][2].\r\n\r\n\r\n  [1]: http://%E2%80%A2%09comotion/src/comotion/transformation/Transformation.java\r\n  [2]: http://www.sqlite.org/wal.html#readonly","title":"How do I check whether a SQLite database file exists using Java?","body":"<p>Assuming that your <code>dbName</code> parameter indicates the path to the SQLite file (\"-wal\" and \"-shm\" companion files notwithstanding), you can use the Java <code>java.io.File</code> class and <a href=\"http://%E2%80%A2%09comotion/src/comotion/transformation/Transformation.java\" rel=\"nofollow\">its <code>exists()</code> predicate</a>:</p>\n\n<pre><code>final File f = new File(dbName);\nif (f.exists())\n{\n  if (f.isDirectory())\n  {\n    // Warn about the designated name being a directory.\n  }\n  else\n  {\n    // Warn about the designated name already existing as a file.\n  }\n}\n</code></pre>\n\n<p>Other checks could be warranted too, such as whether the process has the privilege to create the file, though ultimately SQLite will do a better job <a href=\"http://www.sqlite.org/wal.html#readonly\" rel=\"nofollow\">ensuring that all its requirements can be fulfilled</a>.</p>\n"},{"tags":[],"owner":{"account_id":420171,"reputation":191,"user_id":797737,"display_name":"Eriksberger"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1313623069,"creation_date":1313623069,"answer_id":7100683,"question_id":7100597,"body_markdown":"Something like this?\r\n\r\n    public boolean databaseExist()\r\n    {\r\n    \tFile dbFile = new File(DB_PATH + DB_NAME);\r\n    \treturn dbFile.exists();\r\n    }","title":"How do I check whether a SQLite database file exists using Java?","body":"<p>Something like this?</p>\n\n<pre><code>public boolean databaseExist()\n{\n    File dbFile = new File(DB_PATH + DB_NAME);\n    return dbFile.exists();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3817719,"reputation":1,"user_id":3166643,"display_name":"faridlab"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1395814891,"creation_date":1395814891,"answer_id":22653020,"question_id":7100597,"body_markdown":"late, may it help :\r\n\r\n\r\n    public boolean didPackageCreate() {\r\n\r\n        File dbfile = this.getDatabasePath(&quot;app.db&quot;);\r\n        if(dbfile.exists()){\r\n            // db exist\r\n        }else{\r\n           // db doesn&#39;t exist\r\n        }\r\n    }\r\n","title":"How do I check whether a SQLite database file exists using Java?","body":"<p>late, may it help :</p>\n\n<pre><code>public boolean didPackageCreate() {\n\n    File dbfile = this.getDatabasePath(\"app.db\");\n    if(dbfile.exists()){\n        // db exist\n    }else{\n       // db doesn't exist\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1746219,"reputation":109,"user_id":1596379,"accept_rate":80,"display_name":"n0manarmy"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1488977400,"creation_date":1488977400,"answer_id":42671867,"question_id":7100597,"body_markdown":"I&#39;ve found that the best way to do this is to instead check the size of the file. If you execute:\r\n\r\n`return new File(DB_NAME).exists()` should equal True.\r\n\r\nYou should get a true back because it will create it. Instead check to make sure the file size is greater than 0. At least in this case you know there&#39;s data in the file without attaching and querying for results.\r\n\r\nInstead do:\r\n\r\n`return new File(DB_NAME).length() &gt; 0`","title":"How do I check whether a SQLite database file exists using Java?","body":"<p>I've found that the best way to do this is to instead check the size of the file. If you execute:</p>\n\n<p><code>return new File(DB_NAME).exists()</code> should equal True.</p>\n\n<p>You should get a true back because it will create it. Instead check to make sure the file size is greater than 0. At least in this case you know there's data in the file without attaching and querying for results.</p>\n\n<p>Instead do:</p>\n\n<p><code>return new File(DB_NAME).length() &gt; 0</code></p>\n"},{"tags":[],"owner":{"account_id":10894074,"reputation":11,"user_id":8550166,"display_name":"NoggetGump"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1565342843,"creation_date":1565341164,"answer_id":57426698,"question_id":7100597,"body_markdown":"You can do something like this, I&#39;m guessing you think you are creating a new file in your directory when you do &quot;new File(name)&quot;, for what I&#39;ve red, but that is not what is happening.\r\n\r\n        public static void databaseConnect(String dbName) throws Exception {\r\n\r\n          // new File(filename) does not create a new \r\n          // file in your file system\r\n          File file = new File (dbName);\r\n\r\n          if (file.exists()) \r\n          { // the file already existed and the program will enter this block\r\n            System.out.print(&quot;Do something&quot;);\r\n          }\r\n          else \r\n          { //the file did not exist and you can send your error msg\r\n            System.out.print(&quot;Do something else&quot;); \r\n          } \r\n        }\r\n\r\nI misinterpreted your question a few times, my bad, but I think that&#39;s it.","title":"How do I check whether a SQLite database file exists using Java?","body":"<p>You can do something like this, I'm guessing you think you are creating a new file in your directory when you do \"new File(name)\", for what I've red, but that is not what is happening.</p>\n\n<pre><code>    public static void databaseConnect(String dbName) throws Exception {\n\n      // new File(filename) does not create a new \n      // file in your file system\n      File file = new File (dbName);\n\n      if (file.exists()) \n      { // the file already existed and the program will enter this block\n        System.out.print(\"Do something\");\n      }\n      else \n      { //the file did not exist and you can send your error msg\n        System.out.print(\"Do something else\"); \n      } \n    }\n</code></pre>\n\n<p>I misinterpreted your question a few times, my bad, but I think that's it.</p>\n"},{"tags":[],"owner":{"account_id":14080848,"reputation":111,"user_id":10171933,"display_name":"Paloma Escribano"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698141054,"creation_date":1698141054,"answer_id":77351068,"question_id":7100597,"body_markdown":"To this day I believe this is the simplest way to achieve this. The couchbase lite database is created locally, so if it already exists, you add it to the config and create a Database instance to start working with it. \r\n\r\nHere is the documentation: https://docs.couchbase.com/couchbase-lite/current/java/database.html#lbl-find-db-loc\r\n\r\n    import com.couchbase.lite.*;\r\n \r\n\r\n     private static Database openOrCreateDatabase(String dbName) throws CouchbaseLiteException {\r\n            DatabaseConfiguration config = new DatabaseConfiguration();\r\n            File file=new File(config.getDirectory());\r\n            if (!Database.exists(dbName,file)){\r\n                System.out.println(&quot;Database created: &quot;+dbName);\r\n                return new Database(dbName, config);\r\n            }else{\r\n                config.setDirectory(&quot;../../&quot;+dbName+&quot;.cblite2&quot;); //path to your cblite folder\r\n                return new Database(dbName, config);\r\n            }\r\n        }","title":"How do I check whether a SQLite database file exists using Java?","body":"<p>To this day I believe this is the simplest way to achieve this. The couchbase lite database is created locally, so if it already exists, you add it to the config and create a Database instance to start working with it.</p>\n<p>Here is the documentation: <a href=\"https://docs.couchbase.com/couchbase-lite/current/java/database.html#lbl-find-db-loc\" rel=\"nofollow noreferrer\">https://docs.couchbase.com/couchbase-lite/current/java/database.html#lbl-find-db-loc</a></p>\n<pre><code>import com.couchbase.lite.*;\n\n\n private static Database openOrCreateDatabase(String dbName) throws CouchbaseLiteException {\n        DatabaseConfiguration config = new DatabaseConfiguration();\n        File file=new File(config.getDirectory());\n        if (!Database.exists(dbName,file)){\n            System.out.println(&quot;Database created: &quot;+dbName);\n            return new Database(dbName, config);\n        }else{\n            config.setDirectory(&quot;../../&quot;+dbName+&quot;.cblite2&quot;); //path to your cblite folder\n            return new Database(dbName, config);\n        }\n    }\n</code></pre>\n"}],"owner":{"account_id":310749,"reputation":419,"user_id":623906,"accept_rate":61,"display_name":"SunyGirl"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":17375,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"accepted_answer_id":7100626,"answer_count":7,"score":8,"last_activity_date":1698141054,"creation_date":1313622353,"question_id":7100597,"body_markdown":"I get the name of database file from a user, and I want to check if that file already exists. If it does exist, I want to show an error message to user, but I don&#39;t know how to check if the file exists. \r\n\r\n    public static void databaseConnect(String dbName) throws Exception\r\n    {\r\n      if (/*same name exists*/) // How do I check this?\r\n      {\r\n        System.out.print(&quot;This database name already exists&quot;);\r\n      }\r\n      else\r\n      {\r\n        Class.forName(&quot;SQLite.JDBCDriver&quot;).newInstance();\t\t    \r\n        conn = DriverManager.getConnection(&quot;jdbc:sqlite:/&quot;+ dbName);\r\n        stat = conn.createStatement(); \r\n      }\t\r\n    }","title":"How do I check whether a SQLite database file exists using Java?","body":"<p>I get the name of database file from a user, and I want to check if that file already exists. If it does exist, I want to show an error message to user, but I don't know how to check if the file exists. </p>\n\n<pre><code>public static void databaseConnect(String dbName) throws Exception\n{\n  if (/*same name exists*/) // How do I check this?\n  {\n    System.out.print(\"This database name already exists\");\n  }\n  else\n  {\n    Class.forName(\"SQLite.JDBCDriver\").newInstance();           \n    conn = DriverManager.getConnection(\"jdbc:sqlite:/\"+ dbName);\n    stat = conn.createStatement(); \n  } \n}\n</code></pre>\n"},{"tags":["java","spring","spring-boot","spring-security","http-status-code-403"],"comments":[{"owner":{"account_id":3345025,"reputation":35,"user_id":2810351,"accept_rate":33,"display_name":"user2810351"},"score":0,"creation_date":1698137164,"post_id":77349885,"comment_id":136363831,"body_markdown":"@BlackBear, It is already there. Please refer the 1st code snippet.","body":"@BlackBear, It is already there. Please refer the 1st code snippet."},{"owner":{"account_id":6463892,"reputation":15974,"user_id":5277820,"accept_rate":68,"display_name":"dur"},"score":0,"creation_date":1698146432,"post_id":77349885,"comment_id":136365516,"body_markdown":"Show your request and your repsonse with headers. For example a sreenshot of your dev tool in your browser (F12).","body":"Show your request and your repsonse with headers. For example a sreenshot of your dev tool in your browser (F12)."}],"owner":{"account_id":3345025,"reputation":35,"user_id":2810351,"accept_rate":33,"display_name":"user2810351"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":223,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1698141041,"creation_date":1698128199,"question_id":77349885,"body_markdown":"I am building an application using Spring Boot + Spring Security. I implemented a JWT token based authentication flow and used it to authenticate an endpoint. But I am getting **403 Forbidden** error to the endpoint even if I sent it with a valid barer token.\r\n\r\nThis is my **Security config filerChain**:\r\n\r\n    @Configuration\r\n    public class SecurityConfig {\r\n    \r\n        @Autowired\r\n        private JwtAuthFilter authFilter;\r\n    \r\n        @Bean\r\n        public UserDetailsService userDetailsService() {\r\n            return new UserInfoService();\r\n        }\r\n    \r\n        @Bean\r\n        public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\r\n            http\r\n                    .authorizeHttpRequests((authorize) -&gt; authorize\r\n                            .requestMatchers(HttpMethod.GET,&quot;/api/auth/welcome&quot;,&quot;/api/auth/user&quot;,\r\n                            &quot;/api/auth/generateToken&quot;).permitAll()\r\n                            .requestMatchers(&quot;/api/auth/user/**&quot;).authenticated()\r\n                            .requestMatchers(&quot;/api/auth/admin/**&quot;).authenticated()\r\n                    )\r\n                    .csrf(AbstractHttpConfigurer::disable)\r\n                    .sessionManagement(sessionConfigure -&gt; sessionConfigure.sessionCreationPolicy(SessionCreationPolicy.STATELESS))\r\n                    .authenticationProvider(authenticationProvider())\r\n                    .addFilterBefore(authFilter, UsernamePasswordAuthenticationFilter.class);\r\n            return http.build();\r\n        }\r\n    \r\n        @Bean\r\n        public PasswordEncoder passwordEncoder() {\r\n            return new BCryptPasswordEncoder();\r\n        }\r\n    \r\n        @Bean\r\n        public AuthenticationProvider authenticationProvider() {\r\n            DaoAuthenticationProvider authenticationProvider = new DaoAuthenticationProvider();\r\n            authenticationProvider.setUserDetailsService(userDetailsService());\r\n            authenticationProvider.setPasswordEncoder(passwordEncoder());\r\n            return authenticationProvider;\r\n        }\r\n    \r\n        @Bean\r\n        public AuthenticationManager authenticationManager(AuthenticationConfiguration config) throws Exception {\r\n            return config.getAuthenticationManager();\r\n        }\r\n    \r\n    }\r\n    \r\nThis is my custom **JwtAuthFilter class**:\r\n    \r\n    @Component\r\n    public class JwtAuthFilter extends OncePerRequestFilter {\r\n    \r\n        @Autowired\r\n        private JwtUtil jwtUtil;\r\n    \r\n        @Autowired\r\n        private UserInfoService userDetailsService;\r\n    \r\n        @Override\r\n        protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain)\r\n                throws ServletException, IOException {\r\n            String authHeader = request.getHeader(&quot;Authorization&quot;);\r\n            String token = null;\r\n            String username = null;\r\n            if (authHeader != null &amp;&amp; authHeader.startsWith(&quot;Bearer &quot;)) {\r\n                token = authHeader.substring(7);\r\n                username = jwtUtil.extractUsername(token);\r\n            }\r\n    \r\n            if (username != null &amp;&amp; SecurityContextHolder.getContext().getAuthentication() == null) {\r\n                UserDetails userDetails = userDetailsService.loadUserByUsername(username);\r\n                if (jwtUtil.validateToken(token, userDetails)) {\r\n                    UsernamePasswordAuthenticationToken authToken = new UsernamePasswordAuthenticationToken(userDetails, null, userDetails.getAuthorities());\r\n                    authToken.setDetails(new WebAuthenticationDetailsSource().buildDetails(request));\r\n                    SecurityContextHolder.getContext().setAuthentication(authToken);\r\n                }\r\n            }\r\n            filterChain.doFilter(request, response);\r\n        }\r\n    }\r\n\r\nThis is my **controller endpoint** to validate the token and allow access. It also has &quot;`@RequestMapping(value = &quot;/api/auth&quot;)`&quot; in controller level.\r\n\r\n    @GetMapping(&quot;/user/profile&quot;)\r\n    @PreAuthorize(&quot;hasAuthority(&#39;ROLE_USER&#39;)&quot;)\r\n    public String userProfile() {\r\n        return &quot;Welcome to User Profile&quot;;\r\n    }\r\n\r\n\r\n\r\nI added `.csrf(AbstractHttpConfigurer::disable)` later but it is not helping the issue it seems. I enabled the trace logs and it is giving below output.\r\n\r\n    2023-10-24T14:11:44.623+08:00 DEBUG 30772 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/auth/user/profile\r\n    2023-10-24T14:11:44.624+08:00 TRACE 30772 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/12)\r\n    2023-10-24T14:11:44.624+08:00 TRACE 30772 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/12)\r\n    2023-10-24T14:11:44.625+08:00 TRACE 30772 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/12)\r\n    2023-10-24T14:11:44.626+08:00 TRACE 30772 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/12)\r\n    2023-10-24T14:11:44.626+08:00 TRACE 30772 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (5/12)\r\n    2023-10-24T14:11:44.627+08:00 TRACE 30772 --- [nio-8080-exec-1] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern=&#39;/logout&#39;, GET], Ant [pattern=&#39;/logout&#39;, POST], Ant [pattern=&#39;/logout&#39;, PUT], Ant [pattern=&#39;/logout&#39;, DELETE]]\r\n    2023-10-24T14:11:44.627+08:00 TRACE 30772 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking JwtAuthFilter (6/12)\r\n    2023-10-24T14:11:44.627+08:00 TRACE 30772 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (7/12)\r\n    2023-10-24T14:11:44.627+08:00 TRACE 30772 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (8/12)\r\n    2023-10-24T14:11:44.627+08:00 TRACE 30772 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (9/12)\r\n    2023-10-24T14:11:44.628+08:00 TRACE 30772 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking SessionManagementFilter (10/12)\r\n    2023-10-24T14:11:44.628+08:00 TRACE 30772 --- [nio-8080-exec-1] .s.s.w.c.SupplierDeferredSecurityContext : Created SecurityContextImpl [Null authentication]\r\n    2023-10-24T14:11:44.628+08:00 TRACE 30772 --- [nio-8080-exec-1] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to AnonymousAuthenticationToken [Principal=anonymousUser, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ANONYMOUS]]\r\n    2023-10-24T14:11:44.628+08:00 DEBUG 30772 --- [nio-8080-exec-1] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id BB998829C20374B7D9198E768C5030F0\r\n    2023-10-24T14:11:44.628+08:00 TRACE 30772 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (11/12)\r\n    2023-10-24T14:11:44.628+08:00 TRACE 30772 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (12/12)\r\n    2023-10-24T14:11:44.628+08:00 TRACE 30772 --- [nio-8080-exec-1] estMatcherDelegatingAuthorizationManager : Authorizing SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@2390265d]\r\n    2023-10-24T14:11:44.632+08:00 TRACE 30772 --- [nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to org.john.choicemaker.controller.AuthController#userProfile()\r\n    2023-10-24T14:11:44.633+08:00 TRACE 30772 --- [nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to org.john.choicemaker.controller.AuthController#userProfile()\r\n    2023-10-24T14:11:44.633+08:00 TRACE 30772 --- [nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to org.john.choicemaker.controller.AuthController#userProfile()\r\n    2023-10-24T14:11:44.633+08:00 TRACE 30772 --- [nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to org.john.choicemaker.controller.AuthController#userProfile()\r\n    2023-10-24T14:11:44.633+08:00 TRACE 30772 --- [nio-8080-exec-1] estMatcherDelegatingAuthorizationManager : Checking authorization on SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@2390265d] using org.springframework.security.authorization.AuthenticatedAuthorizationManager@1b6e83c8\r\n    2023-10-24T14:11:44.633+08:00 TRACE 30772 --- [nio-8080-exec-1] o.s.s.w.a.ExceptionTranslationFilter     : Sending AnonymousAuthenticationToken [Principal=anonymousUser, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ANONYMOUS]] to authentication entry point since access is denied\r\n    \r\n    org.springframework.security.access.AccessDeniedException: Access Denied\r\n    \tat org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:98) ~[spring-security-web-6.1.5.jar:6.1.5]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.5.jar:6.1.5]\r\n    \tat org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126) ~[spring-security-web-6.1.5.jar:6.1.5]\r\n    \tat org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120) ~[spring-security-web-6.1.5.jar:6.1.5]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.5.jar:6.1.5]\r\n    \tat org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131) ~[spring-security-web-6.1.5.jar:6.1.5]\r\n    \tat org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85) ~[spring-security-web-6.1.5.jar:6.1.5]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.5.jar:6.1.5]\r\n    \tat org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100) ~[spring-security-web-6.1.5.jar:6.1.5]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.5.jar:6.1.5]\r\n    \tat org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179) ~[spring-security-web-6.1.5.jar:6.1.5]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.5.jar:6.1.5]\r\n    \tat org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-6.1.5.jar:6.1.5]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.5.jar:6.1.5]\r\n    \tat org.john.choicemaker.util.JwtAuthFilter.doFilterInternal(JwtAuthFilter.java:46) ~[classes/:na]\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.13.jar:6.0.13]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.5.jar:6.1.5]\r\n    \tat org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.1.5.jar:6.1.5]\r\n    \tat org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.1.5.jar:6.1.5]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.5.jar:6.1.5]\r\n    \tat org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.1.5.jar:6.1.5]\r\n    \tat org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.1.5.jar:6.1.5]\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.13.jar:6.0.13]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.5.jar:6.1.5]\r\n    \tat org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.1.5.jar:6.1.5]\r\n    \tat org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.1.5.jar:6.1.5]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.5.jar:6.1.5]\r\n    \tat org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.1.5.jar:6.1.5]\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.13.jar:6.0.13]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.5.jar:6.1.5]\r\n    \tat org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.1.5.jar:6.1.5]\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.13.jar:6.0.13]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.5.jar:6.1.5]\r\n    \tat org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.1.5.jar:6.1.5]\r\n    \tat org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.1.5.jar:6.1.5]\r\n    \tat org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352) ~[spring-web-6.0.13.jar:6.0.13]\r\n    \tat org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268) ~[spring-web-6.0.13.jar:6.0.13]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n    \tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.0.13.jar:6.0.13]\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.13.jar:6.0.13]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n    \tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.0.13.jar:6.0.13]\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.13.jar:6.0.13]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n    \tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.0.13.jar:6.0.13]\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.13.jar:6.0.13]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n    \tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n    \tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n    \tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n    \tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n    \tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n    \tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n    \tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n    \tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n    \tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n    \tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n    \tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n    \tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n    \tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n    \tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n    \tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n    \tat java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\r\n    \r\n    2023-10-24T14:11:44.636+08:00 DEBUG 30772 --- [nio-8080-exec-1] o.s.s.w.a.Http403ForbiddenEntryPoint     : Pre-authenticated entry point called. Rejecting access\r\n\r\n","title":"Spring security filter-chain is not working as expected to authenticate requests","body":"<p>I am building an application using Spring Boot + Spring Security. I implemented a JWT token based authentication flow and used it to authenticate an endpoint. But I am getting <strong>403 Forbidden</strong> error to the endpoint even if I sent it with a valid barer token.</p>\n<p>This is my <strong>Security config filerChain</strong>:</p>\n<pre><code>@Configuration\npublic class SecurityConfig {\n\n    @Autowired\n    private JwtAuthFilter authFilter;\n\n    @Bean\n    public UserDetailsService userDetailsService() {\n        return new UserInfoService();\n    }\n\n    @Bean\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n        http\n                .authorizeHttpRequests((authorize) -&gt; authorize\n                        .requestMatchers(HttpMethod.GET,&quot;/api/auth/welcome&quot;,&quot;/api/auth/user&quot;,\n                        &quot;/api/auth/generateToken&quot;).permitAll()\n                        .requestMatchers(&quot;/api/auth/user/**&quot;).authenticated()\n                        .requestMatchers(&quot;/api/auth/admin/**&quot;).authenticated()\n                )\n                .csrf(AbstractHttpConfigurer::disable)\n                .sessionManagement(sessionConfigure -&gt; sessionConfigure.sessionCreationPolicy(SessionCreationPolicy.STATELESS))\n                .authenticationProvider(authenticationProvider())\n                .addFilterBefore(authFilter, UsernamePasswordAuthenticationFilter.class);\n        return http.build();\n    }\n\n    @Bean\n    public PasswordEncoder passwordEncoder() {\n        return new BCryptPasswordEncoder();\n    }\n\n    @Bean\n    public AuthenticationProvider authenticationProvider() {\n        DaoAuthenticationProvider authenticationProvider = new DaoAuthenticationProvider();\n        authenticationProvider.setUserDetailsService(userDetailsService());\n        authenticationProvider.setPasswordEncoder(passwordEncoder());\n        return authenticationProvider;\n    }\n\n    @Bean\n    public AuthenticationManager authenticationManager(AuthenticationConfiguration config) throws Exception {\n        return config.getAuthenticationManager();\n    }\n\n}\n</code></pre>\n<p>This is my custom <strong>JwtAuthFilter class</strong>:</p>\n<pre><code>@Component\npublic class JwtAuthFilter extends OncePerRequestFilter {\n\n    @Autowired\n    private JwtUtil jwtUtil;\n\n    @Autowired\n    private UserInfoService userDetailsService;\n\n    @Override\n    protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain)\n            throws ServletException, IOException {\n        String authHeader = request.getHeader(&quot;Authorization&quot;);\n        String token = null;\n        String username = null;\n        if (authHeader != null &amp;&amp; authHeader.startsWith(&quot;Bearer &quot;)) {\n            token = authHeader.substring(7);\n            username = jwtUtil.extractUsername(token);\n        }\n\n        if (username != null &amp;&amp; SecurityContextHolder.getContext().getAuthentication() == null) {\n            UserDetails userDetails = userDetailsService.loadUserByUsername(username);\n            if (jwtUtil.validateToken(token, userDetails)) {\n                UsernamePasswordAuthenticationToken authToken = new UsernamePasswordAuthenticationToken(userDetails, null, userDetails.getAuthorities());\n                authToken.setDetails(new WebAuthenticationDetailsSource().buildDetails(request));\n                SecurityContextHolder.getContext().setAuthentication(authToken);\n            }\n        }\n        filterChain.doFilter(request, response);\n    }\n}\n</code></pre>\n<p>This is my <strong>controller endpoint</strong> to validate the token and allow access. It also has &quot;<code>@RequestMapping(value = &quot;/api/auth&quot;)</code>&quot; in controller level.</p>\n<pre><code>@GetMapping(&quot;/user/profile&quot;)\n@PreAuthorize(&quot;hasAuthority('ROLE_USER')&quot;)\npublic String userProfile() {\n    return &quot;Welcome to User Profile&quot;;\n}\n</code></pre>\n<p>I added <code>.csrf(AbstractHttpConfigurer::disable)</code> later but it is not helping the issue it seems. I enabled the trace logs and it is giving below output.</p>\n<pre><code>2023-10-24T14:11:44.623+08:00 DEBUG 30772 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/auth/user/profile\n2023-10-24T14:11:44.624+08:00 TRACE 30772 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/12)\n2023-10-24T14:11:44.624+08:00 TRACE 30772 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/12)\n2023-10-24T14:11:44.625+08:00 TRACE 30772 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/12)\n2023-10-24T14:11:44.626+08:00 TRACE 30772 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/12)\n2023-10-24T14:11:44.626+08:00 TRACE 30772 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (5/12)\n2023-10-24T14:11:44.627+08:00 TRACE 30772 --- [nio-8080-exec-1] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]\n2023-10-24T14:11:44.627+08:00 TRACE 30772 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking JwtAuthFilter (6/12)\n2023-10-24T14:11:44.627+08:00 TRACE 30772 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (7/12)\n2023-10-24T14:11:44.627+08:00 TRACE 30772 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (8/12)\n2023-10-24T14:11:44.627+08:00 TRACE 30772 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (9/12)\n2023-10-24T14:11:44.628+08:00 TRACE 30772 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking SessionManagementFilter (10/12)\n2023-10-24T14:11:44.628+08:00 TRACE 30772 --- [nio-8080-exec-1] .s.s.w.c.SupplierDeferredSecurityContext : Created SecurityContextImpl [Null authentication]\n2023-10-24T14:11:44.628+08:00 TRACE 30772 --- [nio-8080-exec-1] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to AnonymousAuthenticationToken [Principal=anonymousUser, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ANONYMOUS]]\n2023-10-24T14:11:44.628+08:00 DEBUG 30772 --- [nio-8080-exec-1] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id BB998829C20374B7D9198E768C5030F0\n2023-10-24T14:11:44.628+08:00 TRACE 30772 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (11/12)\n2023-10-24T14:11:44.628+08:00 TRACE 30772 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (12/12)\n2023-10-24T14:11:44.628+08:00 TRACE 30772 --- [nio-8080-exec-1] estMatcherDelegatingAuthorizationManager : Authorizing SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@2390265d]\n2023-10-24T14:11:44.632+08:00 TRACE 30772 --- [nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to org.john.choicemaker.controller.AuthController#userProfile()\n2023-10-24T14:11:44.633+08:00 TRACE 30772 --- [nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to org.john.choicemaker.controller.AuthController#userProfile()\n2023-10-24T14:11:44.633+08:00 TRACE 30772 --- [nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to org.john.choicemaker.controller.AuthController#userProfile()\n2023-10-24T14:11:44.633+08:00 TRACE 30772 --- [nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to org.john.choicemaker.controller.AuthController#userProfile()\n2023-10-24T14:11:44.633+08:00 TRACE 30772 --- [nio-8080-exec-1] estMatcherDelegatingAuthorizationManager : Checking authorization on SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@2390265d] using org.springframework.security.authorization.AuthenticatedAuthorizationManager@1b6e83c8\n2023-10-24T14:11:44.633+08:00 TRACE 30772 --- [nio-8080-exec-1] o.s.s.w.a.ExceptionTranslationFilter     : Sending AnonymousAuthenticationToken [Principal=anonymousUser, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ANONYMOUS]] to authentication entry point since access is denied\n\norg.springframework.security.access.AccessDeniedException: Access Denied\n    at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:98) ~[spring-security-web-6.1.5.jar:6.1.5]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.5.jar:6.1.5]\n    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126) ~[spring-security-web-6.1.5.jar:6.1.5]\n    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120) ~[spring-security-web-6.1.5.jar:6.1.5]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.5.jar:6.1.5]\n    at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131) ~[spring-security-web-6.1.5.jar:6.1.5]\n    at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85) ~[spring-security-web-6.1.5.jar:6.1.5]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.5.jar:6.1.5]\n    at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100) ~[spring-security-web-6.1.5.jar:6.1.5]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.5.jar:6.1.5]\n    at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179) ~[spring-security-web-6.1.5.jar:6.1.5]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.5.jar:6.1.5]\n    at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-6.1.5.jar:6.1.5]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.5.jar:6.1.5]\n    at org.john.choicemaker.util.JwtAuthFilter.doFilterInternal(JwtAuthFilter.java:46) ~[classes/:na]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.13.jar:6.0.13]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.5.jar:6.1.5]\n    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.1.5.jar:6.1.5]\n    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.1.5.jar:6.1.5]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.5.jar:6.1.5]\n    at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.1.5.jar:6.1.5]\n    at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.1.5.jar:6.1.5]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.13.jar:6.0.13]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.5.jar:6.1.5]\n    at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.1.5.jar:6.1.5]\n    at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.1.5.jar:6.1.5]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.5.jar:6.1.5]\n    at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.1.5.jar:6.1.5]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.13.jar:6.0.13]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.5.jar:6.1.5]\n    at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.1.5.jar:6.1.5]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.13.jar:6.0.13]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.5.jar:6.1.5]\n    at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.1.5.jar:6.1.5]\n    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.1.5.jar:6.1.5]\n    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352) ~[spring-web-6.0.13.jar:6.0.13]\n    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268) ~[spring-web-6.0.13.jar:6.0.13]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.0.13.jar:6.0.13]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.13.jar:6.0.13]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.0.13.jar:6.0.13]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.13.jar:6.0.13]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.0.13.jar:6.0.13]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.13.jar:6.0.13]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\n\n2023-10-24T14:11:44.636+08:00 DEBUG 30772 --- [nio-8080-exec-1] o.s.s.w.a.Http403ForbiddenEntryPoint     : Pre-authenticated entry point called. Rejecting access\n</code></pre>\n"},{"tags":["java","android-studio","intellij-idea","import","executable-jar"],"comments":[{"owner":{"account_id":28411028,"reputation":416,"user_id":21734429,"display_name":"romanv-jb"},"score":0,"creation_date":1696419979,"post_id":77219778,"comment_id":136149956,"body_markdown":"Which Build System your Project uses (Maven, Gradle, etc)?\nHow the dependency is declared? How are you building the JAR?","body":"Which Build System your Project uses (Maven, Gradle, etc)? How the dependency is declared? How are you building the JAR?"},{"owner":{"account_id":3617612,"reputation":1422,"user_id":3017105,"accept_rate":64,"display_name":"iSofia"},"score":0,"creation_date":1696438845,"post_id":77219778,"comment_id":136154103,"body_markdown":"@romanv-jb, I&#39;ve added the requested info into the original post. I hope it&#39;s helpful towards analyzing the problem.","body":"@romanv-jb, I&#39;ve added the requested info into the original post. I hope it&#39;s helpful towards analyzing the problem."},{"owner":{"account_id":36734,"reputation":392117,"user_id":104891,"display_name":"CrazyCoder"},"score":1,"creation_date":1697210939,"post_id":77219778,"comment_id":136255610,"body_markdown":"Please see https://stackoverflow.com/a/6511351/104891. Native library has to be extracted and loaded from the file system. It cannot work from the jar file directly.","body":"Please see <a href=\"https://stackoverflow.com/a/6511351/104891\">stackoverflow.com/a/6511351/104891</a>. Native library has to be extracted and loaded from the file system. It cannot work from the jar file directly."}],"answers":[{"tags":[],"owner":{"account_id":28411028,"reputation":416,"user_id":21734429,"display_name":"romanv-jb"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698141026,"creation_date":1698141026,"answer_id":77351063,"question_id":77219778,"body_markdown":"As stated in the comments you have either add the library&#39;s source code or add it as a [Maven Dependency][1].\r\n\r\n\r\n  [1]: https://www.jetbrains.com/help/idea/library.html#download-libraries-from-maven","title":"JAR file compiled on IntelliJ not working in Android Studio","body":"<p>As stated in the comments you have either add the library's source code or add it as a <a href=\"https://www.jetbrains.com/help/idea/library.html#download-libraries-from-maven\" rel=\"nofollow noreferrer\">Maven Dependency</a>.</p>\n"}],"owner":{"account_id":3617612,"reputation":1422,"user_id":3017105,"accept_rate":64,"display_name":"iSofia"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":55,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1698141026,"creation_date":1696309442,"question_id":77219778,"body_markdown":"My Java application imports the **Xerial SQLite JDBC library v3.43.0.0** to perform some CRUD functions, and it works as expected. However, I want to export this class as a JAR file and use it in my Android mobile app. The basic functionalities of the JAR file appear to work as expected after being imported into the Android app. However, SQLite functions fail with this error:\r\n\r\n    java.lang.UnsatisfiedLinkError: dlopen failed: library &quot;libsqlitejdbc.so&quot; not found\r\n\r\nSQLite CRUD functions work correctly in the Android app as well, but not when invoked by the class functions within the JAR.\r\n\r\nAny help would be much appreciated. TIA.\r\n\r\n___\r\n\r\n**@romanv-jb**\r\n\r\nThis is an IntelliJ build in Java:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n\r\nThe module settings:\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\nThe artifacts settings:\r\n\r\n[![enter image description here][3]][3]\r\n\r\n\r\nAnd the project structure:\r\n\r\n[![enter image description here][4]][4]\r\n\r\n___\r\n\r\n**QUESTION:** Is it even possible for a JAR module to read/write to Android files or SQLite databases?\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/b5poJ.png\r\n  [2]: https://i.stack.imgur.com/rA2FJ.png\r\n  [3]: https://i.stack.imgur.com/70UwA.png\r\n  [4]: https://i.stack.imgur.com/IvOl2.png","title":"JAR file compiled on IntelliJ not working in Android Studio","body":"<p>My Java application imports the <strong>Xerial SQLite JDBC library v3.43.0.0</strong> to perform some CRUD functions, and it works as expected. However, I want to export this class as a JAR file and use it in my Android mobile app. The basic functionalities of the JAR file appear to work as expected after being imported into the Android app. However, SQLite functions fail with this error:</p>\n<pre><code>java.lang.UnsatisfiedLinkError: dlopen failed: library &quot;libsqlitejdbc.so&quot; not found\n</code></pre>\n<p>SQLite CRUD functions work correctly in the Android app as well, but not when invoked by the class functions within the JAR.</p>\n<p>Any help would be much appreciated. TIA.</p>\n<hr />\n<p><strong>@romanv-jb</strong></p>\n<p>This is an IntelliJ build in Java:</p>\n<p><a href=\"https://i.stack.imgur.com/b5poJ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/b5poJ.png\" alt=\"enter image description here\" /></a></p>\n<p>The module settings:</p>\n<p><a href=\"https://i.stack.imgur.com/rA2FJ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/rA2FJ.png\" alt=\"enter image description here\" /></a></p>\n<p>The artifacts settings:</p>\n<p><a href=\"https://i.stack.imgur.com/70UwA.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/70UwA.png\" alt=\"enter image description here\" /></a></p>\n<p>And the project structure:</p>\n<p><a href=\"https://i.stack.imgur.com/IvOl2.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/IvOl2.png\" alt=\"enter image description here\" /></a></p>\n<hr />\n<p><strong>QUESTION:</strong> Is it even possible for a JAR module to read/write to Android files or SQLite databases?</p>\n"},{"tags":["java","spring-boot","properties","yaml","mapping"],"answers":[{"tags":[],"owner":{"account_id":8884226,"reputation":514,"user_id":6633045,"display_name":"phuongnq1995"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1698139912,"creation_date":1698139912,"answer_id":77350938,"question_id":77350630,"body_markdown":"`api` key is your map, not the root class. Try this\r\nApplication.yml\r\n```\r\nup-properties:\r\n  api:\r\n    foo:\r\n      up-check:\r\n        url: ${foo.baseUrl}/up\r\n        enabled: true\r\n        version: ${foo.version}\r\n    bar:\r\n      up-check:\r\n        url: ${bar.baseUrl}/up\r\n        enabled: true\r\n        version: ${bar.version}\r\n    baz:\r\n      up-check:\r\n        url: ${baz.baseUrl}/up\r\n        enabled: true\r\n        version: ${baz.version}\r\n```\r\n\r\n```\r\n@ConfigurationProperties(prefix = &quot;up-properties&quot;)\r\npublic class UpProperties {\r\n\r\n    private Map&lt;String, ApiProperty&gt; api;\r\n\r\n    public static class ApiProperty {\r\n        private HealthCheck upCheck;\r\n    }\r\n\r\n    public static class HealthCheck {\r\n        private boolean enabled;\r\n        private String version;\r\n        private String url;\r\n    }\r\n}\r\n```","title":"Spring Boot - @ConfigurationProperties with nested properties of unknown name","body":"<p><code>api</code> key is your map, not the root class. Try this\nApplication.yml</p>\n<pre><code>up-properties:\n  api:\n    foo:\n      up-check:\n        url: ${foo.baseUrl}/up\n        enabled: true\n        version: ${foo.version}\n    bar:\n      up-check:\n        url: ${bar.baseUrl}/up\n        enabled: true\n        version: ${bar.version}\n    baz:\n      up-check:\n        url: ${baz.baseUrl}/up\n        enabled: true\n        version: ${baz.version}\n</code></pre>\n<pre><code>@ConfigurationProperties(prefix = &quot;up-properties&quot;)\npublic class UpProperties {\n\n    private Map&lt;String, ApiProperty&gt; api;\n\n    public static class ApiProperty {\n        private HealthCheck upCheck;\n    }\n\n    public static class HealthCheck {\n        private boolean enabled;\n        private String version;\n        private String url;\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":25271615,"reputation":5,"user_id":20500971,"display_name":"Adr4m"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77350938,"answer_count":1,"score":0,"last_activity_date":1698139912,"creation_date":1698136837,"question_id":77350630,"body_markdown":"I have a website with microservice architecture. I want one of my services to be able to check if all the others are up. To do so, I configure for all my services there &#39;up-check&#39; url, their name, if the check is enabled, and maybe a version.\r\nFor instance I have three services : foo, bar, baz, the configuration would be as follow (other properties are ommited)\r\n\r\n```yaml\r\napi:\r\n    foo:\r\n        up-check:\r\n            url: ${foo.baseUrl}/up\r\n            enabled: true\r\n            version: ${foo.version}\r\n    bar:\r\n        up-check:\r\n            url: ${bar.baseUrl}/up\r\n            enabled: true\r\n            version: ${bar.version}\r\n    baz:\r\n        up-check:\r\n            url: ${baz.baseUrl}/up\r\n            enabled: true\r\n            version: ${baz.version}\r\n```\r\n\r\nOn spring side I know want to map these properties to an object as follow (getters, setters and constructors are ommited):\r\n\r\n```java\r\n@ConfigurationProperties(prefix = &quot;api&quot;)\r\npublic class UpProperties {\r\n\r\n    private Map&lt;String, ApiProperty&gt; api;\r\n\r\n    public static class ApiProperty {\r\n        private HealthCheck upCheck;\r\n    }\r\n\r\n    public static class HealthCheck {\r\n        private boolean enabled;\r\n        private String version;\r\n        private String url;\r\n    }\r\n}\r\n```\r\n\r\nAs you can see, I want to be able my `UpProperties` to map any new service I would plug in the property file without changing anything, so I don&#39;t want the name of the api to be hardcoded (no `foo`, no `bar` and no `baz`)\r\n\r\n&gt; _Edit: I don&#39;t know if it&#39;s clear enough, but I want my `api` map to be as follow_\r\n&gt; ```\r\n&gt; foo: ApiProperty(url, enabled, version)\r\n&gt; bar: ApiProperty(url, enabled, version)\r\n&gt; baz: ApiProperty(url, enabled, version)\r\n&gt; ```\r\n\r\nBut no matter what I try to change, the map `api` won&#39;t be populated, what did I do wrong?\r\n\r\nThanks in advance","title":"Spring Boot - @ConfigurationProperties with nested properties of unknown name","body":"<p>I have a website with microservice architecture. I want one of my services to be able to check if all the others are up. To do so, I configure for all my services there 'up-check' url, their name, if the check is enabled, and maybe a version.\nFor instance I have three services : foo, bar, baz, the configuration would be as follow (other properties are ommited)</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>api:\n    foo:\n        up-check:\n            url: ${foo.baseUrl}/up\n            enabled: true\n            version: ${foo.version}\n    bar:\n        up-check:\n            url: ${bar.baseUrl}/up\n            enabled: true\n            version: ${bar.version}\n    baz:\n        up-check:\n            url: ${baz.baseUrl}/up\n            enabled: true\n            version: ${baz.version}\n</code></pre>\n<p>On spring side I know want to map these properties to an object as follow (getters, setters and constructors are ommited):</p>\n<pre class=\"lang-java prettyprint-override\"><code>@ConfigurationProperties(prefix = &quot;api&quot;)\npublic class UpProperties {\n\n    private Map&lt;String, ApiProperty&gt; api;\n\n    public static class ApiProperty {\n        private HealthCheck upCheck;\n    }\n\n    public static class HealthCheck {\n        private boolean enabled;\n        private String version;\n        private String url;\n    }\n}\n</code></pre>\n<p>As you can see, I want to be able my <code>UpProperties</code> to map any new service I would plug in the property file without changing anything, so I don't want the name of the api to be hardcoded (no <code>foo</code>, no <code>bar</code> and no <code>baz</code>)</p>\n<blockquote>\n<p><em>Edit: I don't know if it's clear enough, but I want my <code>api</code> map to be as follow</em></p>\n<pre><code>foo: ApiProperty(url, enabled, version)\nbar: ApiProperty(url, enabled, version)\nbaz: ApiProperty(url, enabled, version)\n</code></pre>\n</blockquote>\n<p>But no matter what I try to change, the map <code>api</code> won't be populated, what did I do wrong?</p>\n<p>Thanks in advance</p>\n"},{"tags":["java","postgresql","apache-spark"],"comments":[{"owner":{"account_id":1017255,"reputation":1526,"user_id":1028537,"display_name":"Chris"},"score":0,"creation_date":1698138920,"post_id":77349790,"comment_id":136364148,"body_markdown":"although I&#39;ve answered the likely issue it&#39;d be good if you mention the version of Spark being used and the full stack trace, I _assume_ somewhere in there it will refer to your source code in oldAddress where you use sparkSession.","body":"although I&#39;ve answered the likely issue it&#39;d be good if you mention the version of Spark being used and the full stack trace, I <i>assume</i> somewhere in there it will refer to your source code in oldAddress where you use sparkSession."},{"owner":{"account_id":65292,"reputation":544,"user_id":192263,"display_name":"ariels"},"score":0,"creation_date":1698176514,"post_id":77349790,"comment_id":136371418,"body_markdown":"Spark stacktraces can be _very_ voluminous.  Unfortunately the entire stacktrace can contain information.  There will probably be additional lines &quot;caused by&quot; that contain further stack traces.  Please try to attach all of them, or at least go over them and look for some reference to your code.","body":"Spark stacktraces can be <i>very</i> voluminous.  Unfortunately the entire stacktrace can contain information.  There will probably be additional lines &quot;caused by&quot; that contain further stack traces.  Please try to attach all of them, or at least go over them and look for some reference to your code."}],"answers":[{"tags":[],"owner":{"account_id":1017255,"reputation":1526,"user_id":1028537,"display_name":"Chris"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1698138828,"creation_date":1698138828,"answer_id":77350825,"question_id":77349790,"body_markdown":"You cannot create new Dataset&#39;s or use the SparkContext/SparkSession from executors, they only exist on the driver node.\r\n\r\nYour foreach is being passed to executors where you are trying to create another dataset, the function which is captured includes the reference to the SparkSession.\r\n\r\nTo perform lookups across databases using Spark you need to create the two Dataset&#39;s first and then join them.","title":"DB call in each row of dataset&lt;row&gt; in java","body":"<p>You cannot create new Dataset's or use the SparkContext/SparkSession from executors, they only exist on the driver node.</p>\n<p>Your foreach is being passed to executors where you are trying to create another dataset, the function which is captured includes the reference to the SparkSession.</p>\n<p>To perform lookups across databases using Spark you need to create the two Dataset's first and then join them.</p>\n"}],"owner":{"account_id":28753147,"reputation":3,"user_id":22020741,"display_name":"helloooo"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":36,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":77350825,"answer_count":1,"score":-1,"last_activity_date":1698138828,"creation_date":1698126892,"question_id":77349790,"body_markdown":"hi I&#39;m trying to db call in each of dataset&lt;row&gt; in java. But it keeps to occur this error.\r\n\r\nmy question are two things:\r\n   1. Is this a unusual way of db call?\r\n   2. Does it exist other solution?\r\n\r\nThis is the code I tried:\r\n\r\n```\r\npublic class SparkSql implements Serializable{\r\n\r\n     public void wordAddress(String word) {\r\n\r\n      Dataset&lt;Row&gt; recent =sparkSession.read().format(&quot;jdbc&quot;)\r\n                           .option(&quot;url&quot;,&quot;jdbc:postgresql://&quot;+ip+&quot;:&quot;+port+&quot;/&quot;+db )\r\n\t\t           .option(&quot;driver&quot;,&quot;org.postgresql.Driver&quot;)\r\n\t\t           .option(&quot;query&quot;, sql)\r\n\t\t           .option(&quot;user&quot;, user)\r\n\t\t\t   .option(&quot;password&quot;, passwd)\r\n\t\t           .load();\r\n     recent.foreach(x-&gt;{\r\n    \t\tString temp = x.get(1).toString();\r\n    \t\tDataset&lt;Row&gt; old = this.oldAddress(temp); --&gt;another DB call in the method like above \r\n                System.out.println(old.count())\r\n```\r\nThis is the error log:\r\n\r\n```\r\nERROR] 14:06:53.789 Exception in task 0.0 in stage 0.0 (TID 0)\r\njava.lang.NullPointerException\r\n\tat org.apache.spark.sql.execution.aggregate.HashAggregateExec.&lt;init&gt;(HashAggregateExec.scala:87)\r\n\tat org.apache.spark.sql.execution.aggregate.AggUtils$.createAggregate(AggUtils.scala:41)\r\n\tat org.apache.spark.sql.execution.aggregate.AggUtils$.planAggregateWithoutDistinct(AggUtils.scala:92)\r\n\tat org.apache.spark.sql.execution.SparkStrategies$Aggregation$.apply(SparkStrategies.scala:419)\r\n\tat org.apache.spark.sql.catalyst.planning.QueryPlanner$$anonfun$1.apply(QueryPlanner.scala:63)\r\n\tat org.apache.spark.sql.catalyst.planning.QueryPlanner$$anonfun$1.apply(QueryPlanner.scala:63)\r\n\tat scala.collection.Iterator$$anon$12.nextCur(Iterator.scala:435)\r\n```\r\n","title":"DB call in each row of dataset&lt;row&gt; in java","body":"<p>hi I'm trying to db call in each of dataset in java. But it keeps to occur this error.</p>\n<p>my question are two things:</p>\n<ol>\n<li>Is this a unusual way of db call?</li>\n<li>Does it exist other solution?</li>\n</ol>\n<p>This is the code I tried:</p>\n<pre><code>public class SparkSql implements Serializable{\n\n     public void wordAddress(String word) {\n\n      Dataset&lt;Row&gt; recent =sparkSession.read().format(&quot;jdbc&quot;)\n                           .option(&quot;url&quot;,&quot;jdbc:postgresql://&quot;+ip+&quot;:&quot;+port+&quot;/&quot;+db )\n                   .option(&quot;driver&quot;,&quot;org.postgresql.Driver&quot;)\n                   .option(&quot;query&quot;, sql)\n                   .option(&quot;user&quot;, user)\n               .option(&quot;password&quot;, passwd)\n                   .load();\n     recent.foreach(x-&gt;{\n            String temp = x.get(1).toString();\n            Dataset&lt;Row&gt; old = this.oldAddress(temp); --&gt;another DB call in the method like above \n                System.out.println(old.count())\n</code></pre>\n<p>This is the error log:</p>\n<pre><code>ERROR] 14:06:53.789 Exception in task 0.0 in stage 0.0 (TID 0)\njava.lang.NullPointerException\n    at org.apache.spark.sql.execution.aggregate.HashAggregateExec.&lt;init&gt;(HashAggregateExec.scala:87)\n    at org.apache.spark.sql.execution.aggregate.AggUtils$.createAggregate(AggUtils.scala:41)\n    at org.apache.spark.sql.execution.aggregate.AggUtils$.planAggregateWithoutDistinct(AggUtils.scala:92)\n    at org.apache.spark.sql.execution.SparkStrategies$Aggregation$.apply(SparkStrategies.scala:419)\n    at org.apache.spark.sql.catalyst.planning.QueryPlanner$$anonfun$1.apply(QueryPlanner.scala:63)\n    at org.apache.spark.sql.catalyst.planning.QueryPlanner$$anonfun$1.apply(QueryPlanner.scala:63)\n    at scala.collection.Iterator$$anon$12.nextCur(Iterator.scala:435)\n</code></pre>\n"},{"tags":["java","android","apk","reverse-engineering","apktool"],"comments":[{"owner":{"account_id":402229,"reputation":93994,"user_id":769265,"display_name":"David Wasser"},"score":1,"creation_date":1693761169,"post_id":77032247,"comment_id":135800094,"body_markdown":"What do you mean by decompile/recompile? An APK is signed, if you modify the APK, the signature checksum will not match. This is by design. You cannot alter an APK like that.","body":"What do you mean by decompile/recompile? An APK is signed, if you modify the APK, the signature checksum will not match. This is by design. You cannot alter an APK like that."},{"owner":{"account_id":50585,"reputation":39940,"user_id":150978,"accept_rate":78,"display_name":"Robert"},"score":0,"creation_date":1693763774,"post_id":77032247,"comment_id":135800443,"body_markdown":"The APK signature is a cryptographic signature without known vulnerability. Therefore the only way to create an identical signature is to be in possession of the private key used to sign the APK. This means you would need to get the private key of the app developer which only the app develoe has or may be also Google in their app signing HSM.","body":"The APK signature is a cryptographic signature without known vulnerability. Therefore the only way to create an identical signature is to be in possession of the private key used to sign the APK. This means you would need to get the private key of the app developer which only the app develoe has or may be also Google in their app signing HSM."},{"owner":{"account_id":18203305,"reputation":45,"user_id":13247077,"display_name":"Qasim Malik"},"score":0,"creation_date":1693836297,"post_id":77032247,"comment_id":135809001,"body_markdown":"@DavidWasser if that&#39;s the case, then how do people mod apps? like WhatsApp, Instagram, etc","body":"@DavidWasser if that&#39;s the case, then how do people mod apps? like WhatsApp, Instagram, etc"},{"owner":{"account_id":18203305,"reputation":45,"user_id":13247077,"display_name":"Qasim Malik"},"score":0,"creation_date":1693836328,"post_id":77032247,"comment_id":135809006,"body_markdown":"@Robert how do people mob apps than?","body":"@Robert how do people mob apps than?"},{"owner":{"account_id":50585,"reputation":39940,"user_id":150978,"accept_rate":78,"display_name":"Robert"},"score":0,"creation_date":1693839016,"post_id":77032247,"comment_id":135809577,"body_markdown":"People mod apps by simply ignoring the certificate and after recompiling the app resign it with a self-generated key. Most apps don&#39;t check if the signature is the one they expect to be signed with. Note that resigning the app will &quot;disconnect&quot; the app from Play Store which means all in-app purchases are not possible.","body":"People mod apps by simply ignoring the certificate and after recompiling the app resign it with a self-generated key. Most apps don&#39;t check if the signature is the one they expect to be signed with. Note that resigning the app will &quot;disconnect&quot; the app from Play Store which means all in-app purchases are not possible."},{"owner":{"account_id":18203305,"reputation":45,"user_id":13247077,"display_name":"Qasim Malik"},"score":0,"creation_date":1693839387,"post_id":77032247,"comment_id":135809642,"body_markdown":"@Robert so I am trying to change the name of an App but after recompiling, it crashes, which means it is checking for the original signature,","body":"@Robert so I am trying to change the name of an App but after recompiling, it crashes, which means it is checking for the original signature,"},{"owner":{"account_id":18203305,"reputation":45,"user_id":13247077,"display_name":"Qasim Malik"},"score":0,"creation_date":1693839457,"post_id":77032247,"comment_id":135809651,"body_markdown":"is that right? if yes than what could be the possible solution to achieve the desired result,\nwhich is to stop it from crashing after recompiling it.","body":"is that right? if yes than what could be the possible solution to achieve the desired result, which is to stop it from crashing after recompiling it."},{"owner":{"account_id":402229,"reputation":93994,"user_id":769265,"display_name":"David Wasser"},"score":0,"creation_date":1693839478,"post_id":77032247,"comment_id":135809655,"body_markdown":"@QasimMalik I don&#39;t understand your question. Only the author of an app (or the holder of the private key from the certificate that was used to sign the app) can modify that app. The author creates a new version and signs it with the same certificate that was used to sign the app before. This generates a new signed APK which can be installed over the existing installation.","body":"@QasimMalik I don&#39;t understand your question. Only the author of an app (or the holder of the private key from the certificate that was used to sign the app) can modify that app. The author creates a new version and signs it with the same certificate that was used to sign the app before. This generates a new signed APK which can be installed over the existing installation."},{"owner":{"account_id":402229,"reputation":93994,"user_id":769265,"display_name":"David Wasser"},"score":0,"creation_date":1693839578,"post_id":77032247,"comment_id":135809677,"body_markdown":"I&#39;ll ask again, what do you mean by recompiling? And how does it crash? We need more details?","body":"I&#39;ll ask again, what do you mean by recompiling? And how does it crash? We need more details?"},{"owner":{"account_id":402229,"reputation":93994,"user_id":769265,"display_name":"David Wasser"},"score":0,"creation_date":1693839633,"post_id":77032247,"comment_id":135809687,"body_markdown":"Also, what do you mean by &quot;change the name of the app&quot;? Do you have the source code? Is this your app? How are you &quot;changing the name&quot;?","body":"Also, what do you mean by &quot;change the name of the app&quot;? Do you have the source code? Is this your app? How are you &quot;changing the name&quot;?"},{"owner":{"account_id":18203305,"reputation":45,"user_id":13247077,"display_name":"Qasim Malik"},"score":0,"creation_date":1693839776,"post_id":77032247,"comment_id":135809720,"body_markdown":"@DavidWasser Yes this is exactly what I do to upload my apps on Play Store but you know there exist mob versions of many famous apps, Do you have any idea how they decompile, make changes, and recompile the apps and still get it working?","body":"@DavidWasser Yes this is exactly what I do to upload my apps on Play Store but you know there exist mob versions of many famous apps, Do you have any idea how they decompile, make changes, and recompile the apps and still get it working?"},{"owner":{"account_id":18203305,"reputation":45,"user_id":13247077,"display_name":"Qasim Malik"},"score":0,"creation_date":1693839875,"post_id":77032247,"comment_id":135809740,"body_markdown":"@DavidWasser no the app is not mine, i have an apk of an app whose name is in Chinese language and I want to change the name to English.","body":"@DavidWasser no the app is not mine, i have an apk of an app whose name is in Chinese language and I want to change the name to English."},{"owner":{"account_id":402229,"reputation":93994,"user_id":769265,"display_name":"David Wasser"},"score":0,"creation_date":1693839921,"post_id":77032247,"comment_id":135809746,"body_markdown":"And how is it crashing? What is the exception and stacktrace from logcat?","body":"And how is it crashing? What is the exception and stacktrace from logcat?"},{"owner":{"account_id":18203305,"reputation":45,"user_id":13247077,"display_name":"Qasim Malik"},"score":0,"creation_date":1693840062,"post_id":77032247,"comment_id":135809780,"body_markdown":"@DavidWasser  Do you know we can modify the design (XML) and even logic (sometimes) of an app if we only have an apk. This is how reverse engineering works.","body":"@DavidWasser  Do you know we can modify the design (XML) and even logic (sometimes) of an app if we only have an apk. This is how reverse engineering works."},{"owner":{"account_id":18203305,"reputation":45,"user_id":13247077,"display_name":"Qasim Malik"},"score":0,"creation_date":1693840160,"post_id":77032247,"comment_id":135809797,"body_markdown":"@DavidWasser I do not have the source code, I don&#39;t have the stack trace. \nyou need to understand how it works","body":"@DavidWasser I do not have the source code, I don&#39;t have the stack trace.  you need to understand how it works"},{"owner":{"account_id":402229,"reputation":93994,"user_id":769265,"display_name":"David Wasser"},"score":0,"creation_date":1693840235,"post_id":77032247,"comment_id":135809812,"body_markdown":"You are missing the point of my question. You say that the app &quot;crashes&quot;. If it crashes, it should be logging the reason for the crash including stacktrace to logcat. Look in the logcat when the app crashes and copy that into your question.","body":"You are missing the point of my question. You say that the app &quot;crashes&quot;. If it crashes, it should be logging the reason for the crash including stacktrace to logcat. Look in the logcat when the app crashes and copy that into your question."},{"owner":{"account_id":18203305,"reputation":45,"user_id":13247077,"display_name":"Qasim Malik"},"score":0,"creation_date":1693840259,"post_id":77032247,"comment_id":135809817,"body_markdown":"@DavidWasser if we have apk, we can change its extension to .zip and change its XML files (which include strings file) so we can change the name of any app without the source code","body":"@DavidWasser if we have apk, we can change its extension to .zip and change its XML files (which include strings file) so we can change the name of any app without the source code"},{"owner":{"account_id":18203305,"reputation":45,"user_id":13247077,"display_name":"Qasim Malik"},"score":0,"creation_date":1693840338,"post_id":77032247,"comment_id":135809834,"body_markdown":"@DavidWasser I got your point but how can I get the logs from an apk?\nhope you are getting my point.","body":"@DavidWasser I got your point but how can I get the logs from an apk? hope you are getting my point."},{"owner":{"account_id":402229,"reputation":93994,"user_id":769265,"display_name":"David Wasser"},"score":0,"creation_date":1693840421,"post_id":77032247,"comment_id":135809845,"body_markdown":"No, you don&#39;t get the logs from APK! You put the APK on the device, run the app and it crashes. You get the logs from the device. You say the app is crashing after you modify it. I assume you mean that you put the modified APK on the device and run it and it crashes. If not, please explain what you are doing.","body":"No, you don&#39;t get the logs from APK! You put the APK on the device, run the app and it crashes. You get the logs from the device. You say the app is crashing after you modify it. I assume you mean that you put the modified APK on the device and run it and it crashes. If not, please explain what you are doing."},{"owner":{"account_id":18203305,"reputation":45,"user_id":13247077,"display_name":"Qasim Malik"},"score":0,"creation_date":1693840762,"post_id":77032247,"comment_id":135809923,"body_markdown":"@DavidWasser do you have any experience with reverse engineering? I think you are overqualified for this question and i am unable to clear my point, if that&#39;s the case please tell me if I have only an apk file, randomly downloaded from a website into my android device, and when I installs it and try to open the installed app, it crashes, can I get the crash logs? i am not using any IDE, nothing just an apk file downloaded from the internet.","body":"@DavidWasser do you have any experience with reverse engineering? I think you are overqualified for this question and i am unable to clear my point, if that&#39;s the case please tell me if I have only an apk file, randomly downloaded from a website into my android device, and when I installs it and try to open the installed app, it crashes, can I get the crash logs? i am not using any IDE, nothing just an apk file downloaded from the internet."},{"owner":{"account_id":18203305,"reputation":45,"user_id":13247077,"display_name":"Qasim Malik"},"score":0,"creation_date":1693841605,"post_id":77032247,"comment_id":135810060,"body_markdown":"@DavidWasser leave it, I don&#39;t need help anymore &#129315;","body":"@DavidWasser leave it, I don&#39;t need help anymore 🤣"},{"owner":{"account_id":50585,"reputation":39940,"user_id":150978,"accept_rate":78,"display_name":"Robert"},"score":0,"creation_date":1694001000,"post_id":77032247,"comment_id":135833081,"body_markdown":"Seems like you don&#39;t know the `adb logcat` command, the most basic command for retrieving log of all apps running on Android (unless the app has been built to not log anything to logcat).","body":"Seems like you don&#39;t know the <code>adb logcat</code> command, the most basic command for retrieving log of all apps running on Android (unless the app has been built to not log anything to logcat)."}],"answers":[{"tags":[],"owner":{"account_id":26553090,"reputation":1,"user_id":20182110,"display_name":"Serella"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698138760,"creation_date":1698138760,"answer_id":77350816,"question_id":77032247,"body_markdown":"Use Apk Editor and Apktool-M on mobile to change the name","title":"Recompile an apk without changing the signature","body":"<p>Use Apk Editor and Apktool-M on mobile to change the name</p>\n"}],"owner":{"account_id":18203305,"reputation":45,"user_id":13247077,"display_name":"Qasim Malik"},"comment_count":22,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":287,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1698138760,"creation_date":1693743604,"question_id":77032247,"body_markdown":"I am trying to change the name of the app using its APK, but the problem is when I decompile\\recompile it (using apkeasytool) and install it, it crashes.\r\nThis behavior could be because when the app starts it somehow checks if the app is compiled with the original signature.\r\n\r\nI have tried to see the app logic on Jadx but still, many method names and strings are encoded.\r\nI know this is a way to protect APKs from repack but I know this can be cracked I am learning about Frida and let&#39;s see if I can crack that.\r\nAnd if you have any suggestions please feel free to tell me.","title":"Recompile an apk without changing the signature","body":"<p>I am trying to change the name of the app using its APK, but the problem is when I decompile\\recompile it (using apkeasytool) and install it, it crashes.\nThis behavior could be because when the app starts it somehow checks if the app is compiled with the original signature.</p>\n<p>I have tried to see the app logic on Jadx but still, many method names and strings are encoded.\nI know this is a way to protect APKs from repack but I know this can be cracked I am learning about Frida and let's see if I can crack that.\nAnd if you have any suggestions please feel free to tell me.</p>\n"},{"tags":["java","locking","file-locking"],"comments":[{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":1,"creation_date":1698132913,"post_id":77350213,"comment_id":136363127,"body_markdown":"File locks are between processes. These multiple locks are all in the same process. Your test is invalid and you are misusing the feature.","body":"File locks are between processes. These multiple locks are all in the same process. Your test is invalid and you are misusing the feature."},{"owner":{"account_id":8967970,"reputation":404,"user_id":6687749,"display_name":"delx"},"score":0,"creation_date":1698133056,"post_id":77350213,"comment_id":136363158,"body_markdown":"As you see in my description, I&#39;m using two different Java processes.","body":"As you see in my description, I&#39;m using two different Java processes."},{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1698133191,"post_id":77350213,"comment_id":136363184,"body_markdown":"Yes, in the case that works. In the case that doesn&#39;t, you are using a `while` loop,which is *ipso facto* in the same process.","body":"Yes, in the case that works. In the case that doesn&#39;t, you are using a <code>while</code> loop,which is <i>ipso facto</i> in the same process."},{"owner":{"account_id":8967970,"reputation":404,"user_id":6687749,"display_name":"delx"},"score":0,"creation_date":1698133338,"post_id":77350213,"comment_id":136363202,"body_markdown":"Inside a single process, i.e. inside the while loop, a lock is acquired and released again. This should be fine, right? Thanks.","body":"Inside a single process, i.e. inside the while loop, a lock is acquired and released again. This should be fine, right? Thanks."},{"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"score":2,"creation_date":1698134491,"post_id":77350213,"comment_id":136363381,"body_markdown":"What does `tempFile.delete()` return? Maybe this fails, and the locking is not the cause of your issue.","body":"What does <code>tempFile.delete()</code> return? Maybe this fails, and the locking is not the cause of your issue."},{"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"score":0,"creation_date":1698134585,"post_id":77350213,"comment_id":136363392,"body_markdown":"I suggest rewriting this to use `Path` instead of `File`, as it will properly throw exceptions instead of returning false if something goes wrong. You can get a `FileChannel` using one of the static `FileChannel.open` methods.","body":"I suggest rewriting this to use <code>Path</code> instead of <code>File</code>, as it will properly throw exceptions instead of returning false if something goes wrong. You can get a <code>FileChannel</code> using one of the static <code>FileChannel.open</code> methods."},{"owner":{"account_id":8967970,"reputation":404,"user_id":6687749,"display_name":"delx"},"score":0,"creation_date":1698135334,"post_id":77350213,"comment_id":136363526,"body_markdown":"I checked the return value of `testFile.delete()` and it is always true.","body":"I checked the return value of <code>testFile.delete()</code> and it is always true."}],"answers":[{"tags":[],"owner":{"account_id":8967970,"reputation":404,"user_id":6687749,"display_name":"delx"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1698134566,"creation_date":1698134566,"answer_id":77350405,"question_id":77350213,"body_markdown":"I found a solution myself. I needed to add the following code inside the code block of the if-clause `if (lock == null)`:\r\n\r\n```\r\nchannel.close();\r\nrac.close();\r\n```\r\n\r\nWith that change, it works flawlessly. I hope this answer will save same hours as it would have for me!","title":"Java&#39;s FileLock allows to lock twice","body":"<p>I found a solution myself. I needed to add the following code inside the code block of the if-clause <code>if (lock == null)</code>:</p>\n<pre><code>channel.close();\nrac.close();\n</code></pre>\n<p>With that change, it works flawlessly. I hope this answer will save same hours as it would have for me!</p>\n"}],"owner":{"account_id":8967970,"reputation":404,"user_id":6687749,"display_name":"delx"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":54,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1698138379,"creation_date":1698132555,"question_id":77350213,"body_markdown":"In Java on Ubuntu, I&#39;m using a FileLock to lock a file. The problem regularly happens on a server that runs on Debian. To make it easily reproducible, I wrote a minimal sample application (see below). As you can see, the application first locks a lock file, and then once the lock was retrieved successfully, it creates a test file. It will delete the test file again before the lock is released. Because of the locking, it should never happen that the test file already exists immediately after successfully receiving the lock. However, when running this application twice (simultaneously), and due to the System.gc() call (which I needed to add to reproduce the server problem), the lock seems to be granted twice. This does not make sense.\r\n\r\nI tested the code using an old version of Java (OpenJDK 11) and a new version of Java (OpenJDK 21). They deliver the same result.\r\n\r\nSee the following code:\r\n\r\n```\r\npublic static void main(String[] args) throws Exception {\r\n    Random rand = new Random();\r\n    \r\n    while (true) {\r\n        File lockFile = new File(&quot;/tmp/lock-file&quot;);\r\n        if (!lockFile.exists()) {\r\n            lockFile.createNewFile();\r\n        }\r\n        \r\n        RandomAccessFile rac = new RandomAccessFile(lockFile, &quot;rw&quot;);\r\n        FileChannel channel = rac.getChannel();\r\n        FileLock lock = channel.tryLock();\r\n\r\n        if (lock == null) {\r\n            System.out.println(&quot;Could not get lock&quot;);\r\n        } else {\r\n            System.out.println(&quot;Got lock&quot;);\r\n\r\n            File testFile = new File(&quot;/tmp/test-file&quot;);\r\n            if (testFile.exists()) {\r\n                throw new Exception(&quot;FILE MUST NOT EXIST. LOCK PROBLEM.&quot;);\r\n            }\r\n            \r\n            testFile.createNewFile();\r\n            \r\n            // This helped to reproduce the server problem\r\n            System.gc();\r\n            \r\n            Thread.sleep(rand.nextInt(4));\r\n            \r\n            testFile.delete();\r\n            \r\n            if (!lock.isValid()) {\r\n                throw new Exception(&quot;Lock is not valid anymore!&quot;);\r\n            }\r\n            \r\n            lock.release();\r\n            channel.close();\r\n            rac.close();\r\n        }\r\n        \r\n        Thread.sleep(rand.nextInt(4));\r\n    }\r\n}\r\n```\r\n\r\nOutput of the first instance of the application:\r\n```none\r\njava -jar test.jar\r\nGot lock\r\nGot lock\r\nGot lock\r\n```\r\n\r\nOutput of the second instance of the application:\r\n```none\r\njava -jar test.jar\r\nGot lock\r\nGot lock\r\nCould not get lock\r\nGot lock\r\nException in thread &quot;main&quot; java.lang.Exception: FILE MUST NOT EXIST. LOCK PROBLEM.\r\n\tat test.Test.main(Test.java:44)\r\n```\r\n\r\nI tried to use file locking in Java and I would have expected that a file cannot be locked twice by two processes. However, it seems that Java allows to lock files twice and that is a problem for me. Any idea what&#39;s wrong?\r\n","title":"Java&#39;s FileLock allows to lock twice","body":"<p>In Java on Ubuntu, I'm using a FileLock to lock a file. The problem regularly happens on a server that runs on Debian. To make it easily reproducible, I wrote a minimal sample application (see below). As you can see, the application first locks a lock file, and then once the lock was retrieved successfully, it creates a test file. It will delete the test file again before the lock is released. Because of the locking, it should never happen that the test file already exists immediately after successfully receiving the lock. However, when running this application twice (simultaneously), and due to the System.gc() call (which I needed to add to reproduce the server problem), the lock seems to be granted twice. This does not make sense.</p>\n<p>I tested the code using an old version of Java (OpenJDK 11) and a new version of Java (OpenJDK 21). They deliver the same result.</p>\n<p>See the following code:</p>\n<pre><code>public static void main(String[] args) throws Exception {\n    Random rand = new Random();\n    \n    while (true) {\n        File lockFile = new File(&quot;/tmp/lock-file&quot;);\n        if (!lockFile.exists()) {\n            lockFile.createNewFile();\n        }\n        \n        RandomAccessFile rac = new RandomAccessFile(lockFile, &quot;rw&quot;);\n        FileChannel channel = rac.getChannel();\n        FileLock lock = channel.tryLock();\n\n        if (lock == null) {\n            System.out.println(&quot;Could not get lock&quot;);\n        } else {\n            System.out.println(&quot;Got lock&quot;);\n\n            File testFile = new File(&quot;/tmp/test-file&quot;);\n            if (testFile.exists()) {\n                throw new Exception(&quot;FILE MUST NOT EXIST. LOCK PROBLEM.&quot;);\n            }\n            \n            testFile.createNewFile();\n            \n            // This helped to reproduce the server problem\n            System.gc();\n            \n            Thread.sleep(rand.nextInt(4));\n            \n            testFile.delete();\n            \n            if (!lock.isValid()) {\n                throw new Exception(&quot;Lock is not valid anymore!&quot;);\n            }\n            \n            lock.release();\n            channel.close();\n            rac.close();\n        }\n        \n        Thread.sleep(rand.nextInt(4));\n    }\n}\n</code></pre>\n<p>Output of the first instance of the application:</p>\n<pre class=\"lang-none prettyprint-override\"><code>java -jar test.jar\nGot lock\nGot lock\nGot lock\n</code></pre>\n<p>Output of the second instance of the application:</p>\n<pre class=\"lang-none prettyprint-override\"><code>java -jar test.jar\nGot lock\nGot lock\nCould not get lock\nGot lock\nException in thread &quot;main&quot; java.lang.Exception: FILE MUST NOT EXIST. LOCK PROBLEM.\n    at test.Test.main(Test.java:44)\n</code></pre>\n<p>I tried to use file locking in Java and I would have expected that a file cannot be locked twice by two processes. However, it seems that Java allows to lock files twice and that is a problem for me. Any idea what's wrong?</p>\n"},{"tags":["java","spring","junit","mockito"],"comments":[{"owner":{"account_id":1310169,"reputation":3813,"user_id":1258319,"accept_rate":81,"display_name":"Julian"},"score":1,"creation_date":1692387705,"post_id":76930616,"comment_id":135621209,"body_markdown":"pls show us your test","body":"pls show us your test"}],"answers":[{"tags":[],"owner":{"account_id":7217252,"reputation":97,"user_id":5509227,"display_name":"mumubin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698137921,"creation_date":1698137921,"answer_id":77350743,"question_id":76930616,"body_markdown":"Try this mock code\r\n\r\n    when(transactionTemplate.execute(any())).thenAnswer(invocation -&gt; {\r\n            TransactionCallbackWithoutResult transactionCallbackWithoutResult = (TransactionCallbackWithoutResult)invocation.getArguments()[0];\r\n            transactionCallbackWithoutResult.doInTransaction(new SimpleTransactionStatus());\r\n            return null;\r\n        });","title":"Junit Unit Test For a Method That Includes TransactionTemplate","body":"<p>Try this mock code</p>\n<pre><code>when(transactionTemplate.execute(any())).thenAnswer(invocation -&gt; {\n        TransactionCallbackWithoutResult transactionCallbackWithoutResult = (TransactionCallbackWithoutResult)invocation.getArguments()[0];\n        transactionCallbackWithoutResult.doInTransaction(new SimpleTransactionStatus());\n        return null;\n    });\n</code></pre>\n"}],"owner":{"account_id":17999351,"reputation":1,"user_id":13081617,"display_name":"Omer Can KAPLAN"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":93,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1698137921,"creation_date":1692371774,"question_id":76930616,"body_markdown":"I have a method that includes transactionTemplate in it. My test works when I run debug mode but not when executed directly.\r\n\r\nMy test works when I run debug mode because I think transactional operation is done while working debug mode. But when I just run it works wrong. How can I overcome this problem?\r\n\r\nThis is my method:\r\n\r\n    @Override\r\n    public void saveAndUpdate(DataDictionaryDTO input) {\r\n        try {\r\n            transactionTemplate.execute(new TransactionCallbackWithoutResult() {\r\n                protected void doInTransactionWithoutResult(TransactionStatus status) {\r\n                    DataDictionaryEntity ent = null;\r\n                    if (NullUtils.isNotNullOrZero(input.getId())) {\r\n                        ent = dataDictionaryRepository.findById(input.getId()).orElse(null);\r\n                    }\r\n                    dataDictionaryRepository.save(dataDictionaryDTOMapper.map(input, ent));\r\n                }\r\n            });\r\n        }\r\n        catch (DataIntegrityViolationException e) {\r\n            throw new UserFriendlyException(&quot;there.is.already.such.a.value&quot;);\r\n        }\r\n    }","title":"Junit Unit Test For a Method That Includes TransactionTemplate","body":"<p>I have a method that includes transactionTemplate in it. My test works when I run debug mode but not when executed directly.</p>\n<p>My test works when I run debug mode because I think transactional operation is done while working debug mode. But when I just run it works wrong. How can I overcome this problem?</p>\n<p>This is my method:</p>\n<pre><code>@Override\npublic void saveAndUpdate(DataDictionaryDTO input) {\n    try {\n        transactionTemplate.execute(new TransactionCallbackWithoutResult() {\n            protected void doInTransactionWithoutResult(TransactionStatus status) {\n                DataDictionaryEntity ent = null;\n                if (NullUtils.isNotNullOrZero(input.getId())) {\n                    ent = dataDictionaryRepository.findById(input.getId()).orElse(null);\n                }\n                dataDictionaryRepository.save(dataDictionaryDTOMapper.map(input, ent));\n            }\n        });\n    }\n    catch (DataIntegrityViolationException e) {\n        throw new UserFriendlyException(&quot;there.is.already.such.a.value&quot;);\n    }\n}\n</code></pre>\n"},{"tags":["java","footer","aspose","aspose.words"],"answers":[{"tags":[],"owner":{"account_id":11398698,"reputation":1809,"user_id":8356224,"display_name":"Alexey Noskov"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1698127787,"creation_date":1698127787,"answer_id":77349853,"question_id":77347085,"body_markdown":"Yes, you are right, in MS Word document headers/footers are defined per section. Each section in MS Word document can have 3 types of header and footer - `First`, `Primary` and `Even` pages. In your case it is required to split document by pages, you can achieve this using [Document.ExtractPages][1]. For example see the following code:\r\n``` java\r\nDocument doc = new Document(&quot;C:\\\\Temp\\\\in.docx&quot;);\r\n\r\n// Clone source document.\r\nDocument result = (Document)doc.deepClone(false);\r\n\r\n// Split and rejoin document by pages.\r\nfor (int i = 0; i &lt; doc.getPageCount(); i++)\r\n{\r\n    Document page = doc.extractPages(i, 1);\r\n    // Remove old Header/Footer\r\n    for (Section s : page.getSections())\r\n    {\r\n        s.getHeadersFooters().clear();\r\n        s.getPageSetup().setOddAndEvenPagesHeaderFooter(false);\r\n        s.getPageSetup().setDifferentFirstPageHeaderFooter(false);\r\n    }\r\n    // Add new header to the first section of page.\r\n    DocumentBuilder pageBuilder = new DocumentBuilder(page);\r\n    pageBuilder.moveToHeaderFooter(HeaderFooterType.HEADER_PRIMARY);\r\n    pageBuilder.write(&quot;This is specific header for &quot; + i + &quot; page&quot;);\r\n\r\n    result.appendDocument(page, ImportFormatMode.USE_DESTINATION_STYLES);\r\n}\r\n\r\nresult.save(&quot;C:\\\\Temp\\\\out.docx&quot;);\r\n```\r\n\r\n\r\n  [1]: https://reference.aspose.com/words/java/com.aspose.words/document/#extractPages-int-int","title":"Aspose Word custom Footer for each page","body":"<p>Yes, you are right, in MS Word document headers/footers are defined per section. Each section in MS Word document can have 3 types of header and footer - <code>First</code>, <code>Primary</code> and <code>Even</code> pages. In your case it is required to split document by pages, you can achieve this using <a href=\"https://reference.aspose.com/words/java/com.aspose.words/document/#extractPages-int-int\" rel=\"nofollow noreferrer\">Document.ExtractPages</a>. For example see the following code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Document doc = new Document(&quot;C:\\\\Temp\\\\in.docx&quot;);\n\n// Clone source document.\nDocument result = (Document)doc.deepClone(false);\n\n// Split and rejoin document by pages.\nfor (int i = 0; i &lt; doc.getPageCount(); i++)\n{\n    Document page = doc.extractPages(i, 1);\n    // Remove old Header/Footer\n    for (Section s : page.getSections())\n    {\n        s.getHeadersFooters().clear();\n        s.getPageSetup().setOddAndEvenPagesHeaderFooter(false);\n        s.getPageSetup().setDifferentFirstPageHeaderFooter(false);\n    }\n    // Add new header to the first section of page.\n    DocumentBuilder pageBuilder = new DocumentBuilder(page);\n    pageBuilder.moveToHeaderFooter(HeaderFooterType.HEADER_PRIMARY);\n    pageBuilder.write(&quot;This is specific header for &quot; + i + &quot; page&quot;);\n\n    result.appendDocument(page, ImportFormatMode.USE_DESTINATION_STYLES);\n}\n\nresult.save(&quot;C:\\\\Temp\\\\out.docx&quot;);\n</code></pre>\n"}],"owner":{"account_id":5185022,"reputation":399,"user_id":4149648,"accept_rate":70,"display_name":"Vytautas Arminas"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":50,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77349853,"answer_count":1,"score":0,"last_activity_date":1698137796,"creation_date":1698080533,"question_id":77347085,"body_markdown":"What would be the correct approach to set specific Footer/Header per page using Aspose.Word library (in Java)? Consider the Document which has different number of Sections and Pages. \r\n\r\nI did some tries with the Document having 2 Pages in Section 1 and singe page for rest sections. As far as I understood the document should have equal number of sections and pages in order to set custom Footer per page. \r\n\r\nI suppose the part of final solution is here https://stackoverflow.com/questions/30098635/adding-seperate-header-footer-in-each-page-using-dom-in-aspose-words\r\n\r\nHowever, this code does not work correct as all footer texts get be written on the single page&#39;s footer. Moreover the number of recognised pages is higher that actual is.\r\n\r\n**Update 2023-10-24**\r\n\r\nThis is the method which should add custom footer, but nothing really is added to footer.\r\n\r\n    private void addCustomFooter() {\r\n            var collector = new LayoutCollector(builder.getDocument());\r\n            NodeCollection&lt;Paragraph&gt; paragraphs = builder.getDocument().getChildNodes(NodeType.PARAGRAPH, true);\r\n            log.info(&quot;Paragraphs total count={}&quot;, paragraphs.getCount());\r\n            int pageIndex = 1;\r\n            for (final Paragraph para : paragraphs) {\r\n                if (collector.getStartPageIndex(para) == pageIndex) {\r\n                    log.info(&quot;Paragraph, pageIndex={}&quot;, pageIndex);\r\n                    builder.moveTo(para.appendChild(new Run(builder.getDocument())));\r\n                    builder.insertBreak(BreakType.SECTION_BREAK_CONTINUOUS);\r\n                    pageIndex++;\r\n                }\r\n            }\r\n            pageIndex = 1;\r\n            \r\n            for (final Section section : builder.getDocument().getSections()) {\r\n                log.info(&quot;Section. pageIndex={}&quot;, pageIndex);\r\n                var headerFooterType = HeaderFooterType.FOOTER_PRIMARY;\r\n                HeaderFooter footer = section.getHeadersFooters().getByHeaderFooterType(headerFooterType);\r\n                if (footer == null) {\r\n                    footer = new HeaderFooter(builder.getDocument(), headerFooterType);\r\n                    section.getHeadersFooters().add(footer);\r\n                }\r\n                builder.moveToSection(builder.getDocument().getSections().indexOf(section));\r\n                builder.moveToHeaderFooter(headerFooterType);\r\n                builder.write(&quot;Page: &quot; + pageIndex);\r\n                pageIndex++;\r\n            }\r\n        }","title":"Aspose Word custom Footer for each page","body":"<p>What would be the correct approach to set specific Footer/Header per page using Aspose.Word library (in Java)? Consider the Document which has different number of Sections and Pages.</p>\n<p>I did some tries with the Document having 2 Pages in Section 1 and singe page for rest sections. As far as I understood the document should have equal number of sections and pages in order to set custom Footer per page.</p>\n<p>I suppose the part of final solution is here <a href=\"https://stackoverflow.com/questions/30098635/adding-seperate-header-footer-in-each-page-using-dom-in-aspose-words\">Adding seperate header/footer in each page using DOM in aspose.words</a></p>\n<p>However, this code does not work correct as all footer texts get be written on the single page's footer. Moreover the number of recognised pages is higher that actual is.</p>\n<p><strong>Update 2023-10-24</strong></p>\n<p>This is the method which should add custom footer, but nothing really is added to footer.</p>\n<pre><code>private void addCustomFooter() {\n        var collector = new LayoutCollector(builder.getDocument());\n        NodeCollection&lt;Paragraph&gt; paragraphs = builder.getDocument().getChildNodes(NodeType.PARAGRAPH, true);\n        log.info(&quot;Paragraphs total count={}&quot;, paragraphs.getCount());\n        int pageIndex = 1;\n        for (final Paragraph para : paragraphs) {\n            if (collector.getStartPageIndex(para) == pageIndex) {\n                log.info(&quot;Paragraph, pageIndex={}&quot;, pageIndex);\n                builder.moveTo(para.appendChild(new Run(builder.getDocument())));\n                builder.insertBreak(BreakType.SECTION_BREAK_CONTINUOUS);\n                pageIndex++;\n            }\n        }\n        pageIndex = 1;\n        \n        for (final Section section : builder.getDocument().getSections()) {\n            log.info(&quot;Section. pageIndex={}&quot;, pageIndex);\n            var headerFooterType = HeaderFooterType.FOOTER_PRIMARY;\n            HeaderFooter footer = section.getHeadersFooters().getByHeaderFooterType(headerFooterType);\n            if (footer == null) {\n                footer = new HeaderFooter(builder.getDocument(), headerFooterType);\n                section.getHeadersFooters().add(footer);\n            }\n            builder.moveToSection(builder.getDocument().getSections().indexOf(section));\n            builder.moveToHeaderFooter(headerFooterType);\n            builder.write(&quot;Page: &quot; + pageIndex);\n            pageIndex++;\n        }\n    }\n</code></pre>\n"},{"tags":["java","spring-boot","spring-test"],"owner":{"account_id":17734392,"reputation":41,"user_id":12876120,"display_name":"Simon"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":27,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1698137685,"creation_date":1698137685,"question_id":77350711,"body_markdown":"I have the following configuration class:\r\n```\r\n@ConfigurationProperties(prefix = &quot;xyz&quot;)\r\n@Validated\r\npublic class AppConfiguration {\r\n    @NotNull\r\n    private Path path;\r\n}\r\n```\r\nAnd I&#39;m trying to create the test configuration like that:\r\n```\r\n@TestConfiguration\r\npublic class TestConfig {\r\n        @Bean\r\n        @Primary\r\n        public AppConfiguration testConfig() {\r\n            var configuration = new AppConfiguration();\r\n            configuration.setPath(path);\r\n            return configuration;\r\n    }\r\n}\r\n```\r\nThe `path` points to the temporary test dir so I can&#39;t set it in property file.\r\n\r\nThis worked fine until I added @Validated to my test. Then I realised Spring first creates my test configuration bean but later it still attempts to do the biding and fails since in my test `application.yml` there is no `xyz` therefore the `path` is null and validation exception is raised.\r\nIf I add to application.yml:\r\n```\r\nxyz:\r\n   path: dummy\r\n```\r\nThis &quot;dummy&quot; value will override the `path` I set in test configuration.\r\n\r\nIs there any way to tell Spring not to do the configuration properties binding during test and just use the bean from `@TestConfiguration` as is? \r\nOr maybe there is better way to do approach this?","title":"Prevent configuration properties binding in Spring test","body":"<p>I have the following configuration class:</p>\n<pre><code>@ConfigurationProperties(prefix = &quot;xyz&quot;)\n@Validated\npublic class AppConfiguration {\n    @NotNull\n    private Path path;\n}\n</code></pre>\n<p>And I'm trying to create the test configuration like that:</p>\n<pre><code>@TestConfiguration\npublic class TestConfig {\n        @Bean\n        @Primary\n        public AppConfiguration testConfig() {\n            var configuration = new AppConfiguration();\n            configuration.setPath(path);\n            return configuration;\n    }\n}\n</code></pre>\n<p>The <code>path</code> points to the temporary test dir so I can't set it in property file.</p>\n<p>This worked fine until I added @Validated to my test. Then I realised Spring first creates my test configuration bean but later it still attempts to do the biding and fails since in my test <code>application.yml</code> there is no <code>xyz</code> therefore the <code>path</code> is null and validation exception is raised.\nIf I add to application.yml:</p>\n<pre><code>xyz:\n   path: dummy\n</code></pre>\n<p>This &quot;dummy&quot; value will override the <code>path</code> I set in test configuration.</p>\n<p>Is there any way to tell Spring not to do the configuration properties binding during test and just use the bean from <code>@TestConfiguration</code> as is?\nOr maybe there is better way to do approach this?</p>\n"},{"tags":["java","google-cloud-storage","cdi","google-cloud-run","quarkus-native"],"answers":[{"tags":[],"owner":{"account_id":1741536,"reputation":1569,"user_id":1592796,"accept_rate":92,"display_name":"devrys"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1698137662,"creation_date":1698137008,"answer_id":77350644,"question_id":77307083,"body_markdown":"I&#39;ve been able to make it work, it seems the dependency `com.google.cloud:google-cloud-nio` mixes up something when building a native application.\r\n\r\nThe solution in my case is to move this dependency to the Maven test scope. I also include the [Quarkus Google Cloud Storage extension][1] in compile scope instead of having my own CDI producer for `Storage`.\r\n\r\nFor Quarkus unit tests with `@QuarkusTest` I now use a CDI alternative (with Quarkus&#39; `@Mock` annotation) in `src/test/java` that uses the `LocalStorageHelper` as before:\r\n\r\n```java\r\n@ApplicationScoped\r\npublic class GcpStorageAlternative {\r\n\r\n\t@Mock\r\n\t@Produces\r\n\t@ApplicationScoped\r\n\tpublic Storage getTestStorage() {\r\n\t\treturn LocalStorageHelper.customOptions(true)\r\n\t\t\t\t\t\t\t\t .getService();\r\n\t}\r\n}\r\n```\r\n\r\n\r\n  [1]: https://quarkus.io/extensions/io.quarkiverse.googlecloudservices/quarkus-google-cloud-storage","title":"Quarkus native and Google Cloud Storage: &quot;Your default credentials were not found&quot; when injecting Storage via Producer","body":"<p>I've been able to make it work, it seems the dependency <code>com.google.cloud:google-cloud-nio</code> mixes up something when building a native application.</p>\n<p>The solution in my case is to move this dependency to the Maven test scope. I also include the <a href=\"https://quarkus.io/extensions/io.quarkiverse.googlecloudservices/quarkus-google-cloud-storage\" rel=\"nofollow noreferrer\">Quarkus Google Cloud Storage extension</a> in compile scope instead of having my own CDI producer for <code>Storage</code>.</p>\n<p>For Quarkus unit tests with <code>@QuarkusTest</code> I now use a CDI alternative (with Quarkus' <code>@Mock</code> annotation) in <code>src/test/java</code> that uses the <code>LocalStorageHelper</code> as before:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@ApplicationScoped\npublic class GcpStorageAlternative {\n\n    @Mock\n    @Produces\n    @ApplicationScoped\n    public Storage getTestStorage() {\n        return LocalStorageHelper.customOptions(true)\n                                 .getService();\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":1741536,"reputation":1569,"user_id":1592796,"accept_rate":92,"display_name":"devrys"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":227,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77350644,"answer_count":1,"score":0,"last_activity_date":1698137662,"creation_date":1697529271,"question_id":77307083,"body_markdown":"In my Quarkus service project I&#39;m using Google Cloud Storage (GCS) to read from and write to GCS buckets. Recently I have refactored the code regarding GCS access to be able to unit test my service via Google&#39;s fake implementation of `LocalStorageHelper`.\r\n\r\nHere is my CDI producer class that yields an implementation of interface `Storage` for both unit test mode or everything else:\r\n```\r\n@Slf4j\r\n@ApplicationScoped\r\npublic class GcpStorageProducer {\r\n\r\n    // Contains my custom Quarkus configuration items, used for GCP project ID here\r\n\t@Inject AppRuntime runtime;\r\n\r\n\t@Produces\r\n\t@ApplicationScoped\r\n\t@IfBuildProfile(&quot;test&quot;) // Enabled for tests\r\n\tpublic Storage testStorage() {\r\n\t\tlog.info(&quot;Producing GCS service bean for unit test environment&quot;);\r\n\t\treturn LocalStorageHelper.getOptions()\r\n\t\t\t\t\t\t\t\t .getService();\r\n\t}\r\n\r\n\t@Produces\r\n\t@DefaultBean\r\n\t@ApplicationScoped\r\n\tpublic Storage realStorage() throws IOException { // Default storage when not in tests\r\n\t\tlog.info(&quot;Producing GCS service bean with GCP project {}&quot;, runtime.gcpProject());\r\n\t\tGoogleCredentials credentials = GoogleCredentials.getApplicationDefault();\r\n\t\tif (credentials.createScopedRequired()) {\r\n\t\t\tcredentials = credentials.createScoped(&quot;https://www.googleapis.com/auth/devstorage.read_write&quot;);\r\n\t\t}\r\n\t\treturn StorageOptions.newBuilder()\r\n\t\t\t\t\t\t\t .setProjectId(runtime.gcpProject())\r\n\t\t\t\t\t\t\t .setCredentials(credentials)\r\n\t\t\t\t\t\t\t .build()\r\n\t\t\t\t\t\t\t .getService();\r\n\t}\r\n}\r\n```\r\n\r\nThe injection point is trivial:\r\n```\r\n@Inject Storage storage;\r\n```\r\n\r\nThis works as expected in unit tests and in Quarkus JVM mode both locally and on Google Cloud Run. **However**, in native mode compiled with JDK 17 and Mandrel 23.0.1.2-Final on Google Cloud Run this solution yields the exception\r\n\r\n`java.io.IOException: Your default credentials were not found. To set up Application Default Credentials for your environment, see https://cloud.google.com/docs/authentication/external/set-up-adc.`\r\n\r\nI tested without explicit credential setting but that lead to similar results.\r\n\r\nTo my surprise the code before refactoring with inline `Storage` service instantiation works both in native and JVM mode on Cloud Run, it looks as follows like in every guide you find online or at Google GCS docs but is not testable (at least I think):\r\n```\r\n// ... some code before\r\nStorage storage = StorageOptions.newBuilder()\r\n\t\t\t\t\t\t\t\t.setProjectId(runtime.gcpProject())\r\n\t\t\t\t\t\t\t\t.build()\r\n\t\t\t\t\t\t\t\t.getService();\r\nBlob objectToLoad = storage.get(runtime.sourceBucketName(), filename);\r\n// ... some code after\r\n```\r\n\r\nHow are the &quot;Application Default Credentials&quot; not detected when using injection with native binary in Cloud Run?\r\n","title":"Quarkus native and Google Cloud Storage: &quot;Your default credentials were not found&quot; when injecting Storage via Producer","body":"<p>In my Quarkus service project I'm using Google Cloud Storage (GCS) to read from and write to GCS buckets. Recently I have refactored the code regarding GCS access to be able to unit test my service via Google's fake implementation of <code>LocalStorageHelper</code>.</p>\n<p>Here is my CDI producer class that yields an implementation of interface <code>Storage</code> for both unit test mode or everything else:</p>\n<pre><code>@Slf4j\n@ApplicationScoped\npublic class GcpStorageProducer {\n\n    // Contains my custom Quarkus configuration items, used for GCP project ID here\n    @Inject AppRuntime runtime;\n\n    @Produces\n    @ApplicationScoped\n    @IfBuildProfile(&quot;test&quot;) // Enabled for tests\n    public Storage testStorage() {\n        log.info(&quot;Producing GCS service bean for unit test environment&quot;);\n        return LocalStorageHelper.getOptions()\n                                 .getService();\n    }\n\n    @Produces\n    @DefaultBean\n    @ApplicationScoped\n    public Storage realStorage() throws IOException { // Default storage when not in tests\n        log.info(&quot;Producing GCS service bean with GCP project {}&quot;, runtime.gcpProject());\n        GoogleCredentials credentials = GoogleCredentials.getApplicationDefault();\n        if (credentials.createScopedRequired()) {\n            credentials = credentials.createScoped(&quot;https://www.googleapis.com/auth/devstorage.read_write&quot;);\n        }\n        return StorageOptions.newBuilder()\n                             .setProjectId(runtime.gcpProject())\n                             .setCredentials(credentials)\n                             .build()\n                             .getService();\n    }\n}\n</code></pre>\n<p>The injection point is trivial:</p>\n<pre><code>@Inject Storage storage;\n</code></pre>\n<p>This works as expected in unit tests and in Quarkus JVM mode both locally and on Google Cloud Run. <strong>However</strong>, in native mode compiled with JDK 17 and Mandrel 23.0.1.2-Final on Google Cloud Run this solution yields the exception</p>\n<p><code>java.io.IOException: Your default credentials were not found. To set up Application Default Credentials for your environment, see https://cloud.google.com/docs/authentication/external/set-up-adc.</code></p>\n<p>I tested without explicit credential setting but that lead to similar results.</p>\n<p>To my surprise the code before refactoring with inline <code>Storage</code> service instantiation works both in native and JVM mode on Cloud Run, it looks as follows like in every guide you find online or at Google GCS docs but is not testable (at least I think):</p>\n<pre><code>// ... some code before\nStorage storage = StorageOptions.newBuilder()\n                                .setProjectId(runtime.gcpProject())\n                                .build()\n                                .getService();\nBlob objectToLoad = storage.get(runtime.sourceBucketName(), filename);\n// ... some code after\n</code></pre>\n<p>How are the &quot;Application Default Credentials&quot; not detected when using injection with native binary in Cloud Run?</p>\n"},{"tags":["java","jakarta-mail","gmail-api","multipart"],"answers":[{"tags":[],"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698137460,"creation_date":1698137460,"answer_id":77350682,"question_id":77350622,"body_markdown":"You have to wrap the whole thing in an &quot;alternative&quot; Part:\r\n\r\n```\r\nMimeMessage mimeMessage = ...;\r\nMimeMultipart content = new MimeMultipart(&quot;alternative&quot;);\r\n\r\nMimeBodyPart plain = new MimeBodyPart();\r\nplain.setContent(..., &quot;text/plain&quot;);\r\ncontent.addBodyPart(plain);\r\n\r\nMimeBodyPart html = new MimeBodyPart();\r\nhtml.setContent(..., &quot;text/html&quot;);\r\ncontent.addBodyPart(html);\r\n\r\nMimeBodyPart attachment = new MimeBodyPart();\r\nattachment.setFileName(...);\r\nattachment.setDataHandler(...);\r\ncontent.addBodyPart(attachment);\r\n\r\nmimeMessage.setContent(content);\r\n","title":"Gmail API doesn&#39;t recognize my attchments as attachments but as multipart/mixed why?","body":"<p>You have to wrap the whole thing in an &quot;alternative&quot; Part:</p>\n<pre><code>MimeMessage mimeMessage = ...;\nMimeMultipart content = new MimeMultipart(&quot;alternative&quot;);\n\nMimeBodyPart plain = new MimeBodyPart();\nplain.setContent(..., &quot;text/plain&quot;);\ncontent.addBodyPart(plain);\n\nMimeBodyPart html = new MimeBodyPart();\nhtml.setContent(..., &quot;text/html&quot;);\ncontent.addBodyPart(html);\n\nMimeBodyPart attachment = new MimeBodyPart();\nattachment.setFileName(...);\nattachment.setDataHandler(...);\ncontent.addBodyPart(attachment);\n\nmimeMessage.setContent(content);\n</code></pre>\n"}],"owner":{"account_id":29741146,"reputation":1,"user_id":22793393,"display_name":"Mr12"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":20,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1698137544,"creation_date":1698136753,"question_id":77350622,"body_markdown":"My method of sending mail with attachments works, however, the API doesn&#39;t recognize my attachments as attachments but as multipart/mixed.\r\nIt&#39;s annoying because I need the id of my attachments for the rest of my application.\r\n\r\n```none\r\n{\r\n\t&quot;folder&quot;: [\r\n\t\t&quot;SENT&quot;\r\n\t],\r\n\t&quot;sender&quot;: &quot;-----------&quot;,\r\n\t&quot;recipientTo&quot;: [\r\n\t\t&quot;---------&quot;\r\n\t],\r\n\t&quot;recipientCc&quot;: [\r\n\t\t&quot;---------&quot;\r\n\t],\r\n\t&quot;recipientBcc&quot;: [\r\n\t\t&quot;&quot;\r\n\t],\r\n\t&quot;subject&quot;: &quot;test attachment&quot;,\r\n\t&quot;body&quot;: &quot;Contenu du mail avec &lt;strong&gt;balise&lt;/strong&gt; &lt;span style=&#39;color:red;&#39;&gt;HTML&lt;/span&gt; Morbi molestie mattis lobortis.&lt;br&gt; Donec blandit euismod eleifend. Aenean eleifend ullamcorper aliquam. Suspendisse aliquam gravida sapien, ut elementum elit. Quisque porttitor efficitur nunc tincidunt dignissim. Sed sollicitudin iaculis enim. Donec at purus quis leo lacinia aliquam.&quot;,\r\n\t&quot;hasAttachments&quot;: false,\r\n\t**&quot;contentType&quot;: &quot;multipart/mixed&quot;,**\r\n\t&quot;receivedDateTime&quot;: &quot;2023-10-24T07:57:00.000+00:00&quot;,\r\n\t&quot;read&quot;: true\r\n}\r\n```\r\n\r\nI have the impression that I&#39;m adding my attachments correctly.\r\n\r\n```java\r\nprivate MimeMessage createMimeMessageWithAttachments(final MailObjectRequestPayload mail) throws MessagingException, IOException {\r\n\r\n    final List&lt;MultipartFile&gt; attachments = mail.getAttachment();\r\n\r\n    // Create a new MimeMessage\r\n    final Session session = Session.getDefaultInstance(new Properties());\r\n    final MimeMessage mimeMessage = new MimeMessage(session);\r\n\r\n    // Set the email subject, content, and recipients\r\n    mimeMessage.setSubject(mail.getSubject());\r\n\r\n    final Multipart multipart = new MimeMultipart();\r\n\r\n    final MimeBodyPart htmlPart = new MimeBodyPart();\r\n    htmlPart.setContent(mail.getBody(),&quot;text/html&quot;);\r\n    multipart.addBodyPart(htmlPart);\r\n\r\n    for (MultipartFile attachment : attachments) {\r\n\r\n        final MimeBodyPart attachmentPart = new MimeBodyPart();\r\n        ByteArrayDataSource source = new ByteArrayDataSource(attachment.getBytes(), attachment.getContentType());\r\n        attachmentPart.setDataHandler(new DataHandler(source));\r\n        attachmentPart.setFileName(attachment.getOriginalFilename());\r\n\r\n        // add the file to the multipart\r\n        multipart.addBodyPart(attachmentPart);\r\n    }\r\n\r\n    mimeMessage.setContent(multipart);\r\n    return mimeMessage;\r\n}\r\n```\r\n\r\n","title":"Gmail API doesn&#39;t recognize my attchments as attachments but as multipart/mixed why?","body":"<p>My method of sending mail with attachments works, however, the API doesn't recognize my attachments as attachments but as multipart/mixed.\nIt's annoying because I need the id of my attachments for the rest of my application.</p>\n<pre class=\"lang-none prettyprint-override\"><code>{\n    &quot;folder&quot;: [\n        &quot;SENT&quot;\n    ],\n    &quot;sender&quot;: &quot;-----------&quot;,\n    &quot;recipientTo&quot;: [\n        &quot;---------&quot;\n    ],\n    &quot;recipientCc&quot;: [\n        &quot;---------&quot;\n    ],\n    &quot;recipientBcc&quot;: [\n        &quot;&quot;\n    ],\n    &quot;subject&quot;: &quot;test attachment&quot;,\n    &quot;body&quot;: &quot;Contenu du mail avec &lt;strong&gt;balise&lt;/strong&gt; &lt;span style='color:red;'&gt;HTML&lt;/span&gt; Morbi molestie mattis lobortis.&lt;br&gt; Donec blandit euismod eleifend. Aenean eleifend ullamcorper aliquam. Suspendisse aliquam gravida sapien, ut elementum elit. Quisque porttitor efficitur nunc tincidunt dignissim. Sed sollicitudin iaculis enim. Donec at purus quis leo lacinia aliquam.&quot;,\n    &quot;hasAttachments&quot;: false,\n    **&quot;contentType&quot;: &quot;multipart/mixed&quot;,**\n    &quot;receivedDateTime&quot;: &quot;2023-10-24T07:57:00.000+00:00&quot;,\n    &quot;read&quot;: true\n}\n</code></pre>\n<p>I have the impression that I'm adding my attachments correctly.</p>\n<pre class=\"lang-java prettyprint-override\"><code>private MimeMessage createMimeMessageWithAttachments(final MailObjectRequestPayload mail) throws MessagingException, IOException {\n\n    final List&lt;MultipartFile&gt; attachments = mail.getAttachment();\n\n    // Create a new MimeMessage\n    final Session session = Session.getDefaultInstance(new Properties());\n    final MimeMessage mimeMessage = new MimeMessage(session);\n\n    // Set the email subject, content, and recipients\n    mimeMessage.setSubject(mail.getSubject());\n\n    final Multipart multipart = new MimeMultipart();\n\n    final MimeBodyPart htmlPart = new MimeBodyPart();\n    htmlPart.setContent(mail.getBody(),&quot;text/html&quot;);\n    multipart.addBodyPart(htmlPart);\n\n    for (MultipartFile attachment : attachments) {\n\n        final MimeBodyPart attachmentPart = new MimeBodyPart();\n        ByteArrayDataSource source = new ByteArrayDataSource(attachment.getBytes(), attachment.getContentType());\n        attachmentPart.setDataHandler(new DataHandler(source));\n        attachmentPart.setFileName(attachment.getOriginalFilename());\n\n        // add the file to the multipart\n        multipart.addBodyPart(attachmentPart);\n    }\n\n    mimeMessage.setContent(multipart);\n    return mimeMessage;\n}\n</code></pre>\n"},{"tags":["java","android","bluetooth-lowenergy","uwb"],"comments":[{"owner":{"account_id":11064381,"reputation":1063,"user_id":8124605,"display_name":"Risto"},"score":0,"creation_date":1698146679,"post_id":77350306,"comment_id":136365564,"body_markdown":"The Android documentation provides information in both languages: [Ultra-wideband](https://source.android.com/docs/core/connect/uwb?hl=en)\n[Ultra-wideband (UWB) communication](https://developer.android.com/guide/topics/connectivity/uwb)","body":"The Android documentation provides information in both languages: <a href=\"https://source.android.com/docs/core/connect/uwb?hl=en\" rel=\"nofollow noreferrer\">Ultra-wideband</a> <a href=\"https://developer.android.com/guide/topics/connectivity/uwb\" rel=\"nofollow noreferrer\">Ultra-wideband (UWB) communication</a>"}],"owner":{"account_id":17343697,"reputation":1,"user_id":12563754,"display_name":"miuni_"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1698137373,"creation_date":1698133605,"question_id":77350306,"body_markdown":"I am currently facing a problem where my users update their phones and UWB turns on and it interferes with my ble scanning app. I want to write a function that tells them to turn it off and navigate them to the settings page where it is located. I cannot find any docs about this UWB library using java. My app is written in java and I have only found stuff related to kotlin.\r\n\r\nI tried the following:\r\n\r\n    PackageManager packageManager = getActivity().getPackageManager();\r\n        if (packageManager != null){\r\n            if (packageManager.hasSystemFeature(&quot;android.hardware.uwb&quot;)){\r\n\r\n            }\r\n        }\r\n\r\nbut I don&#39;t know how to go further than this.","title":"Check if UWB is turned on on devices that support it","body":"<p>I am currently facing a problem where my users update their phones and UWB turns on and it interferes with my ble scanning app. I want to write a function that tells them to turn it off and navigate them to the settings page where it is located. I cannot find any docs about this UWB library using java. My app is written in java and I have only found stuff related to kotlin.</p>\n<p>I tried the following:</p>\n<pre><code>PackageManager packageManager = getActivity().getPackageManager();\n    if (packageManager != null){\n        if (packageManager.hasSystemFeature(&quot;android.hardware.uwb&quot;)){\n\n        }\n    }\n</code></pre>\n<p>but I don't know how to go further than this.</p>\n"},{"tags":["java","spring","spring-boot","authentication","spring-security"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1698135647,"post_id":77349978,"comment_id":136363583,"body_markdown":"Both Spring MVC and SPring Security have CORS support and configuration, you are using Spring Security but are configuring CORS support for Spring MVC.","body":"Both Spring MVC and SPring Security have CORS support and configuration, you are using Spring Security but are configuring CORS support for Spring MVC."}],"owner":{"account_id":3350252,"reputation":199,"user_id":2814446,"accept_rate":43,"display_name":"CodeIntro"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1698137209,"creation_date":1698129656,"question_id":77349978,"body_markdown":"I have created an Spring Boot application with Spring security and hit on an issue related to filter-chain. \r\n\r\nHere is the **filter-chain**:\r\n\r\n    @Configuration\r\n    public class SecurityConfig {\r\n    \r\n        @Autowired\r\n        private JwtAuthFilter authFilter;\r\n    \r\n        @Bean\r\n        public UserDetailsService userDetailsService() {\r\n            return new UserInfoService();\r\n        }\r\n    \r\n        @Bean\r\n        public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\r\n            http\r\n                    .authorizeHttpRequests((authorize) -&gt; authorize\r\n                            .requestMatchers(&quot;/api/auth/user&quot;, &quot;/api/auth/generateToken&quot;).permitAll()\r\n                            .requestMatchers(&quot;/api/auth/user/**&quot;).authenticated()\r\n                            .requestMatchers(&quot;/api/auth/admin/**&quot;).authenticated()\r\n                    )\r\n                    .csrf(AbstractHttpConfigurer::disable)\r\n                    .sessionManagement(sessionConfigure -&gt; sessionConfigure.sessionCreationPolicy(SessionCreationPolicy.STATELESS))\r\n                    .authenticationProvider(authenticationProvider())\r\n                    .addFilterBefore(authFilter, UsernamePasswordAuthenticationFilter.class);\r\n            return http.build();\r\n        }\r\n    \r\n        @Bean\r\n        public PasswordEncoder passwordEncoder() {\r\n            return new BCryptPasswordEncoder();\r\n        }\r\n    \r\n        @Bean\r\n        public AuthenticationProvider authenticationProvider() {\r\n            DaoAuthenticationProvider authenticationProvider = new DaoAuthenticationProvider();\r\n            authenticationProvider.setUserDetailsService(userDetailsService());\r\n            authenticationProvider.setPasswordEncoder(passwordEncoder());\r\n            return authenticationProvider;\r\n        }\r\n    \r\n        @Bean\r\n        public AuthenticationManager authenticationManager(AuthenticationConfiguration config) throws Exception {\r\n            return config.getAuthenticationManager();\r\n        }\r\n    \r\n    }\r\n\r\nI also have added a **CORS config** as well to support React frontend.\r\n\r\n    @Configuration\r\n    public class CorsConfig {\r\n        @Bean\r\n        public WebMvcConfigurer corsConfigure() {\r\n            return new WebMvcConfigurer() {\r\n                @Override\r\n                public void addCorsMappings(CorsRegistry registry) {\r\n                    registry.addMapping(&quot;/api/**&quot;)\r\n                            .allowedOrigins(&quot;*&quot;)\r\n                            .allowedMethods(&quot;GET&quot;, &quot;POST&quot;, &quot;PUT&quot;);\r\n                }\r\n            };\r\n        }\r\n    }\r\n\r\nThis is my **endpoint**:\r\n\r\n    @Autowired\r\n    private AuthenticationManager authenticationManager;\r\n\r\n    @PostMapping(&quot;/api/auth/generateToken&quot;)\r\n        public String authenticateAndGetToken(@RequestBody AuthenticationRequest authRequest) {\r\n            Authentication authentication = authenticationManager\r\n                    .authenticate(new UsernamePasswordAuthenticationToken(authRequest.getUsername(),\r\n                            authRequest.getPassword()));\r\n            if (authentication.isAuthenticated()) {\r\n                return jwtUtil.generateToken(authRequest.getUsername());\r\n            } else {\r\n                throw new UsernameNotFoundException(&quot;invalid user request !&quot;);\r\n            }\r\n        }\r\n\r\nHere I remove this authentication code snippet and add just a string return, it will work as expected. I am struggling with the connection between that and this. Help would be highly appreciated. ","title":"POST endpoint not getting permitted even added to the filterchain","body":"<p>I have created an Spring Boot application with Spring security and hit on an issue related to filter-chain.</p>\n<p>Here is the <strong>filter-chain</strong>:</p>\n<pre><code>@Configuration\npublic class SecurityConfig {\n\n    @Autowired\n    private JwtAuthFilter authFilter;\n\n    @Bean\n    public UserDetailsService userDetailsService() {\n        return new UserInfoService();\n    }\n\n    @Bean\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n        http\n                .authorizeHttpRequests((authorize) -&gt; authorize\n                        .requestMatchers(&quot;/api/auth/user&quot;, &quot;/api/auth/generateToken&quot;).permitAll()\n                        .requestMatchers(&quot;/api/auth/user/**&quot;).authenticated()\n                        .requestMatchers(&quot;/api/auth/admin/**&quot;).authenticated()\n                )\n                .csrf(AbstractHttpConfigurer::disable)\n                .sessionManagement(sessionConfigure -&gt; sessionConfigure.sessionCreationPolicy(SessionCreationPolicy.STATELESS))\n                .authenticationProvider(authenticationProvider())\n                .addFilterBefore(authFilter, UsernamePasswordAuthenticationFilter.class);\n        return http.build();\n    }\n\n    @Bean\n    public PasswordEncoder passwordEncoder() {\n        return new BCryptPasswordEncoder();\n    }\n\n    @Bean\n    public AuthenticationProvider authenticationProvider() {\n        DaoAuthenticationProvider authenticationProvider = new DaoAuthenticationProvider();\n        authenticationProvider.setUserDetailsService(userDetailsService());\n        authenticationProvider.setPasswordEncoder(passwordEncoder());\n        return authenticationProvider;\n    }\n\n    @Bean\n    public AuthenticationManager authenticationManager(AuthenticationConfiguration config) throws Exception {\n        return config.getAuthenticationManager();\n    }\n\n}\n</code></pre>\n<p>I also have added a <strong>CORS config</strong> as well to support React frontend.</p>\n<pre><code>@Configuration\npublic class CorsConfig {\n    @Bean\n    public WebMvcConfigurer corsConfigure() {\n        return new WebMvcConfigurer() {\n            @Override\n            public void addCorsMappings(CorsRegistry registry) {\n                registry.addMapping(&quot;/api/**&quot;)\n                        .allowedOrigins(&quot;*&quot;)\n                        .allowedMethods(&quot;GET&quot;, &quot;POST&quot;, &quot;PUT&quot;);\n            }\n        };\n    }\n}\n</code></pre>\n<p>This is my <strong>endpoint</strong>:</p>\n<pre><code>@Autowired\nprivate AuthenticationManager authenticationManager;\n\n@PostMapping(&quot;/api/auth/generateToken&quot;)\n    public String authenticateAndGetToken(@RequestBody AuthenticationRequest authRequest) {\n        Authentication authentication = authenticationManager\n                .authenticate(new UsernamePasswordAuthenticationToken(authRequest.getUsername(),\n                        authRequest.getPassword()));\n        if (authentication.isAuthenticated()) {\n            return jwtUtil.generateToken(authRequest.getUsername());\n        } else {\n            throw new UsernameNotFoundException(&quot;invalid user request !&quot;);\n        }\n    }\n</code></pre>\n<p>Here I remove this authentication code snippet and add just a string return, it will work as expected. I am struggling with the connection between that and this. Help would be highly appreciated.</p>\n"},{"tags":["java","http","spring-webclient"],"comments":[{"owner":{"account_id":4688171,"reputation":11056,"user_id":3795036,"accept_rate":88,"display_name":"K.Nicholas"},"score":0,"creation_date":1698029499,"post_id":77335568,"comment_id":136349056,"body_markdown":"I worked in this once and it&#39;s not really an easy answer in WebFlux. You would have to read the entire response, write it to the DB, then create a new Flux to pass along. Do you know the response will fit in memory when multiplied by concurrent requests?","body":"I worked in this once and it&#39;s not really an easy answer in WebFlux. You would have to read the entire response, write it to the DB, then create a new Flux to pass along. Do you know the response will fit in memory when multiplied by concurrent requests?"},{"owner":{"account_id":11336024,"reputation":122,"user_id":8311849,"display_name":"Yusuf Erdoğan"},"score":0,"creation_date":1698041696,"post_id":77335568,"comment_id":136349961,"body_markdown":"I didn&#39;t suggest database because of this memory problems. But customer wants this. I think they will spend more money","body":"I didn&#39;t suggest database because of this memory problems. But customer wants this. I think they will spend more money"},{"owner":{"account_id":4688171,"reputation":11056,"user_id":3795036,"accept_rate":88,"display_name":"K.Nicholas"},"score":0,"creation_date":1698067409,"post_id":77335568,"comment_id":136354441,"body_markdown":"I don&#39;t have the code I sorted out. It&#39;s around SO if you dig.","body":"I don&#39;t have the code I sorted out. It&#39;s around SO if you dig."}],"answers":[{"tags":[],"owner":{"account_id":11336024,"reputation":122,"user_id":8311849,"display_name":"Yusuf Erdoğan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1698136574,"creation_date":1698136574,"answer_id":77350604,"question_id":77335568,"body_markdown":"I solved the problem. \r\nFirstly **changed response type with Mono** in the client interface.\r\n\r\n**Old code:**\r\n```\r\n@PostExchange(&quot;/login&quot;)\r\nLoginClientResponse login(@RequestBody LoginClientRequest loginClientRequest);\r\n``` \r\n\r\n**New code:**\r\n```\r\n@PostExchange(&quot;/login&quot;)\r\nMono&lt;LoginClientResponse&gt; login(@RequestBody LoginClientRequest loginClientRequest);\r\n``` \r\nI also had to change service too. We should use **doOnSuccess** or **doOrNext** and must **subscribe** this process. \r\n\r\n**Old service:**\r\n```\r\nfinal var loginClientResponse = loginClient.login(loginClientRequest);\r\nfinal var token = loginClientResponse.token();\r\n```\r\n\r\nNew Service:\r\n```\r\nfinal var loginClientResponse = loginClient.login(loginClientRequest);\r\n    loginClientResponse.doOnSuccess(response-&gt;{\r\n    log.info(&quot;Token is successfully retrieved for user: &#39;{}&#39;.&quot;, \r\n    loginRequest.username());\r\n    final var token = response.token();\r\n      //do login things..\r\n    }).subscribe();\r\n\r\n```\r\nFinally I changed log filter with this code;\r\n\r\n```\r\npublic ExchangeFilterFunction logFilter() {\r\n      return ExchangeFilterFunction.ofRequestProcessor(clientRequest -&gt; \r\n      {\r\n          log.info(&quot;Request: {}&quot;,clientRequest.method() + &quot; &quot; + \r\n          clientRequest.url());\r\n          return Mono.just(clientRequest);\r\n      })\r\n      .andThen(ExchangeFilterFunction.ofResponseProcessor(clientResponse -&gt; \r\n         clientResponse.bodyToMono(String.class)\r\n        .doOnNext(responseBody -&gt; \r\n           {\r\n             log.info(&quot;Response Body: {}&quot; , responseBody);\r\n             // log request and response anywhere \r\n           }\r\n       ).thenReturn(clientResponse)));\r\n    }\r\n```\r\nEverything works fine. ","title":"WebClient Logging Inbound and Outbound Traffice Problem","body":"<p>I solved the problem.\nFirstly <strong>changed response type with Mono</strong> in the client interface.</p>\n<p><strong>Old code:</strong></p>\n<pre><code>@PostExchange(&quot;/login&quot;)\nLoginClientResponse login(@RequestBody LoginClientRequest loginClientRequest);\n</code></pre>\n<p><strong>New code:</strong></p>\n<pre><code>@PostExchange(&quot;/login&quot;)\nMono&lt;LoginClientResponse&gt; login(@RequestBody LoginClientRequest loginClientRequest);\n</code></pre>\n<p>I also had to change service too. We should use <strong>doOnSuccess</strong> or <strong>doOrNext</strong> and must <strong>subscribe</strong> this process.</p>\n<p><strong>Old service:</strong></p>\n<pre><code>final var loginClientResponse = loginClient.login(loginClientRequest);\nfinal var token = loginClientResponse.token();\n</code></pre>\n<p>New Service:</p>\n<pre><code>final var loginClientResponse = loginClient.login(loginClientRequest);\n    loginClientResponse.doOnSuccess(response-&gt;{\n    log.info(&quot;Token is successfully retrieved for user: '{}'.&quot;, \n    loginRequest.username());\n    final var token = response.token();\n      //do login things..\n    }).subscribe();\n\n</code></pre>\n<p>Finally I changed log filter with this code;</p>\n<pre><code>public ExchangeFilterFunction logFilter() {\n      return ExchangeFilterFunction.ofRequestProcessor(clientRequest -&gt; \n      {\n          log.info(&quot;Request: {}&quot;,clientRequest.method() + &quot; &quot; + \n          clientRequest.url());\n          return Mono.just(clientRequest);\n      })\n      .andThen(ExchangeFilterFunction.ofResponseProcessor(clientResponse -&gt; \n         clientResponse.bodyToMono(String.class)\n        .doOnNext(responseBody -&gt; \n           {\n             log.info(&quot;Response Body: {}&quot; , responseBody);\n             // log request and response anywhere \n           }\n       ).thenReturn(clientResponse)));\n    }\n</code></pre>\n<p>Everything works fine.</p>\n"}],"owner":{"account_id":11336024,"reputation":122,"user_id":8311849,"display_name":"Yusuf Erdoğan"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":50,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77350604,"answer_count":1,"score":0,"last_activity_date":1698136630,"creation_date":1697883858,"question_id":77335568,"body_markdown":"I have a problem with WebClient. I am using [Http Interface][1] with WebClient and I must log inbound/outbound traffic into database. I wrote this log filter but some services throw `NullPointerException`. I tried `subscribe` instead of `block` bot not working. I have tried many more things but I cannot solve this problem. Can you help me?\r\n\r\nSpring boot version: 3.1.1\r\n\r\nHere is my filter;\r\n```java\r\npublic ExchangeFilterFunction logFilter() {\r\n\r\n    return (request, next) -&gt;\r\n        next.exchange(request)\r\n            .publishOn(Schedulers.boundedElastic())\r\n            .doOnNext(\r\n                clientResponse -&gt; {\r\n                  clientResponse\r\n                      .bodyToMono(String.class)\r\n                      .doOnNext(\r\n                          clientResponseAsString -&gt; {\r\n                            try {\r\n                              // save request and response to database\r\n                            } catch (Exception e) {\r\n                              log.error(\r\n                                  &quot;Something went wrong in saveOutboundLog method&quot;, e.getCause());\r\n                            }\r\n                          })\r\n                      .block();\r\n                });\r\n  }\r\n```\r\nMy client bean;\r\n```java\r\n@Bean\r\npublic BaseApiClient client(HttpClient httpClient) {\r\n    final var webClient =\r\n        WebClient.builder()\r\n            .codecs(\r\n                clientCodecConfigurer -&gt;\r\n                    clientCodecConfigurer.defaultCodecs().maxInMemorySize(32 * 1024 * 1024))\r\n            .baseUrl(clientProperties.getBaseUrl())\r\n            .clientConnector(new ReactorClientHttpConnector(httpClient))\r\n            .filter(logFilter())\r\n            .build();\r\n    final var factory =\r\n        HttpServiceProxyFactory.builder(WebClientAdapter.forClient(webClient))\r\n            .blockTimeout(Duration.ofSeconds(60))\r\n            .build();\r\n    return factory.createClient(MyClient.class);\r\n  }\r\n```\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-framework/reference/web/webflux-http-interface-client.html","title":"WebClient Logging Inbound and Outbound Traffice Problem","body":"<p>I have a problem with WebClient. I am using <a href=\"https://docs.spring.io/spring-framework/reference/web/webflux-http-interface-client.html\" rel=\"nofollow noreferrer\">Http Interface</a> with WebClient and I must log inbound/outbound traffic into database. I wrote this log filter but some services throw <code>NullPointerException</code>. I tried <code>subscribe</code> instead of <code>block</code> bot not working. I have tried many more things but I cannot solve this problem. Can you help me?</p>\n<p>Spring boot version: 3.1.1</p>\n<p>Here is my filter;</p>\n<pre class=\"lang-java prettyprint-override\"><code>public ExchangeFilterFunction logFilter() {\n\n    return (request, next) -&gt;\n        next.exchange(request)\n            .publishOn(Schedulers.boundedElastic())\n            .doOnNext(\n                clientResponse -&gt; {\n                  clientResponse\n                      .bodyToMono(String.class)\n                      .doOnNext(\n                          clientResponseAsString -&gt; {\n                            try {\n                              // save request and response to database\n                            } catch (Exception e) {\n                              log.error(\n                                  &quot;Something went wrong in saveOutboundLog method&quot;, e.getCause());\n                            }\n                          })\n                      .block();\n                });\n  }\n</code></pre>\n<p>My client bean;</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Bean\npublic BaseApiClient client(HttpClient httpClient) {\n    final var webClient =\n        WebClient.builder()\n            .codecs(\n                clientCodecConfigurer -&gt;\n                    clientCodecConfigurer.defaultCodecs().maxInMemorySize(32 * 1024 * 1024))\n            .baseUrl(clientProperties.getBaseUrl())\n            .clientConnector(new ReactorClientHttpConnector(httpClient))\n            .filter(logFilter())\n            .build();\n    final var factory =\n        HttpServiceProxyFactory.builder(WebClientAdapter.forClient(webClient))\n            .blockTimeout(Duration.ofSeconds(60))\n            .build();\n    return factory.createClient(MyClient.class);\n  }\n</code></pre>\n"},{"tags":["java","properties","record","spring-boot-3"],"answers":[{"tags":[],"owner":{"account_id":6567873,"reputation":51,"user_id":5076855,"display_name":"YosriN"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1698136625,"creation_date":1698136625,"answer_id":77350610,"question_id":77348093,"body_markdown":"I found a way to fix the issue, so instead of using the @Autowired annotation of Spring with @Value, I injected the values via the constructor, and it works perfectly.                                                                                                    \r\n                                                                                                      \r\n `@RequiredArgsConstructor\r\npublic class SecurityConfig  {\r\n//\t@Value(&quot;${cors-allowed-origins.url-origins}&quot;)\r\n\tprivate final CrosAllowedOrigins allowedOrigins;`","title":"springboot 3 application yml properties @value","body":"<p>I found a way to fix the issue, so instead of using the @Autowired annotation of Spring with @Value, I injected the values via the constructor, and it works perfectly.</p>\n<p><code>@RequiredArgsConstructor public class SecurityConfig  { //  @Value(&quot;${cors-allowed-origins.url-origins}&quot;) private final CrosAllowedOrigins allowedOrigins;</code></p>\n"}],"owner":{"account_id":6567873,"reputation":51,"user_id":5076855,"display_name":"YosriN"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":51,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1698136625,"creation_date":1698092297,"question_id":77348093,"body_markdown":"in my application.yml I have the following\r\n```\r\ncors-allowed-origins:\r\n  url-origins:\r\n     - http://host.docker.internal:81/\r\n     - http://localhost:8081/*\r\n     - http://digitale.com/\r\n     - http://share.com/\r\n```\r\nth record\r\n```\r\n@ConfigurationProperties( &quot;cors-allowed-origins&quot; )\r\npublic record CrosAllowedOrigins(List&lt;String&gt; urlOrigins) {\r\n\r\n}\r\n\r\nCould you please help me out or even tell me what s wrong thanks\r\n```\r\n\r\nin the class where I injected the values\r\n```\r\npublic class SecurityConfig {\r\n\t@Value(&quot;${cors-allowed-origins.url-origins}&quot;)\r\n\tprivate List&lt;String&gt; allowedOrigins;\r\n```\r\nand I have alredy enabled the properties in the main class \r\n\r\n```\r\n @EnableConfigurationProperties({ CrosAllowedOrigins.class})\r\n```\r\nit builds perfectly but when I run the app I get this error :\r\n```\r\nCaused by: java.lang.IllegalArgumentException: Could not resolve placeholder &#39;cors-allowed-origins.url-origins&#39; in value &quot;${cors-allowed-origins.url-origins}&quot;\r\n\tat org.springframework.util.PropertyPlaceholderHelper.parseStringValue(PropertyPlaceholderHelper.java:180) ~[spring-core-6.0.13.jar:6.0.13]\r\n\tat org.springframework.util.PropertyPlaceholderHelper.replacePlaceholders(PropertyPlaceholderHelper.java:126) ~[spring-core-6.0.13.jar:6.0.13]\r\n\tat org.springframework.core.env.AbstractPropertyResolver.doResolvePlaceholders(AbstractPropertyResolver.java:239) ~[spring-core-6.0.13.jar:6.0.13]\r\n\tat org.springframework.core.env.AbstractPropertyResolver.resolveRequiredPlaceholders(AbstractPropertyResolver.java:210) ~[spring-core-6.0.13.jar:6.0.13]\r\n\tat org.springframework.context.support.PropertySourcesPlaceholderConfigurer.lambda$processProperties$0(PropertySourcesPlaceholderConfigurer.java:200) ~[spring-context-6.0.13.jar:6.0.13]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.resolveEmbeddedValue(AbstractBeanFactory.java:918) ~[spring-beans-6.0.13.jar:6.0.13]\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1358) ~[spring-beans-6.0.13.jar:6.0.13]\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1337) ~[spring-beans-6.0.13.jar:6.0.13]\r\n\tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:764) ~[spring-beans-6.0.13.jar:6.0.13]\r\n\tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:747) ~[spring-beans-6.0.13.jar:6.0.13]\r\n\tat org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:145) ~[spring-beans-6.0.13.jar:6.0.13]\r\n\tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:492) ~[spring-beans-6.0.13.jar:6.0.13]\r\n\t... 17 common frames omitted\r\n```","title":"springboot 3 application yml properties @value","body":"<p>in my application.yml I have the following</p>\n<pre><code>cors-allowed-origins:\n  url-origins:\n     - http://host.docker.internal:81/\n     - http://localhost:8081/*\n     - http://digitale.com/\n     - http://share.com/\n</code></pre>\n<p>th record</p>\n<pre><code>@ConfigurationProperties( &quot;cors-allowed-origins&quot; )\npublic record CrosAllowedOrigins(List&lt;String&gt; urlOrigins) {\n\n}\n\nCould you please help me out or even tell me what s wrong thanks\n</code></pre>\n<p>in the class where I injected the values</p>\n<pre><code>public class SecurityConfig {\n    @Value(&quot;${cors-allowed-origins.url-origins}&quot;)\n    private List&lt;String&gt; allowedOrigins;\n</code></pre>\n<p>and I have alredy enabled the properties in the main class</p>\n<pre><code> @EnableConfigurationProperties({ CrosAllowedOrigins.class})\n</code></pre>\n<p>it builds perfectly but when I run the app I get this error :</p>\n<pre><code>Caused by: java.lang.IllegalArgumentException: Could not resolve placeholder 'cors-allowed-origins.url-origins' in value &quot;${cors-allowed-origins.url-origins}&quot;\n    at org.springframework.util.PropertyPlaceholderHelper.parseStringValue(PropertyPlaceholderHelper.java:180) ~[spring-core-6.0.13.jar:6.0.13]\n    at org.springframework.util.PropertyPlaceholderHelper.replacePlaceholders(PropertyPlaceholderHelper.java:126) ~[spring-core-6.0.13.jar:6.0.13]\n    at org.springframework.core.env.AbstractPropertyResolver.doResolvePlaceholders(AbstractPropertyResolver.java:239) ~[spring-core-6.0.13.jar:6.0.13]\n    at org.springframework.core.env.AbstractPropertyResolver.resolveRequiredPlaceholders(AbstractPropertyResolver.java:210) ~[spring-core-6.0.13.jar:6.0.13]\n    at org.springframework.context.support.PropertySourcesPlaceholderConfigurer.lambda$processProperties$0(PropertySourcesPlaceholderConfigurer.java:200) ~[spring-context-6.0.13.jar:6.0.13]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.resolveEmbeddedValue(AbstractBeanFactory.java:918) ~[spring-beans-6.0.13.jar:6.0.13]\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1358) ~[spring-beans-6.0.13.jar:6.0.13]\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1337) ~[spring-beans-6.0.13.jar:6.0.13]\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:764) ~[spring-beans-6.0.13.jar:6.0.13]\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:747) ~[spring-beans-6.0.13.jar:6.0.13]\n    at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:145) ~[spring-beans-6.0.13.jar:6.0.13]\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:492) ~[spring-beans-6.0.13.jar:6.0.13]\n    ... 17 common frames omitted\n</code></pre>\n"},{"tags":["java","android","file-upload"],"comments":[{"owner":{"account_id":39846,"reputation":991133,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"score":0,"creation_date":1698067406,"post_id":77345132,"comment_id":136354440,"body_markdown":"Delete `getImageFilePath()`. Use the `Uri` correctly. For example, you can hand that `Uri` to your favorite image-loading library, such as Glide, Picasso, or Coil. Or, you can [create an `ImageStreamRequestBody`](https://stackoverflow.com/a/56308643/115145) to use with OkHttp/Retrofit, if your goal is to upload the images.","body":"Delete <code>getImageFilePath()</code>. Use the <code>Uri</code> correctly. For example, you can hand that <code>Uri</code> to your favorite image-loading library, such as Glide, Picasso, or Coil. Or, you can <a href=\"https://stackoverflow.com/a/56308643/115145\">create an <code>ImageStreamRequestBody</code></a> to use with OkHttp/Retrofit, if your goal is to upload the images."}],"answers":[{"tags":[],"owner":{"account_id":18459504,"reputation":597,"user_id":13447372,"display_name":"uyarc"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1698135376,"creation_date":1698135376,"answer_id":77350496,"question_id":77345132,"body_markdown":"I change;\r\n\r\n    Intent intent = new Intent();\r\n                    intent.setType(&quot;image/*&quot;);\r\n                    intent.putExtra(Intent.EXTRA_ALLOW_MULTIPLE, true);\r\n                    intent.setAction(Intent.ACTION_OPEN_DOCUMENT);\r\n                    startActivityForResult(Intent.createChooser(intent,&quot;Select Picture&quot;), PICK_IMAGE_MULTIPLE);\r\n                    photoAlert.dismiss();\r\n\r\nI change open scanner for gallery  ACTION_GET_CONTENT to ACTION_OPEN_DOCUMENT. It solve my problem.","title":"What is the difference between getting multi image from gallery and files folder Android 9?","body":"<p>I change;</p>\n<pre><code>Intent intent = new Intent();\n                intent.setType(&quot;image/*&quot;);\n                intent.putExtra(Intent.EXTRA_ALLOW_MULTIPLE, true);\n                intent.setAction(Intent.ACTION_OPEN_DOCUMENT);\n                startActivityForResult(Intent.createChooser(intent,&quot;Select Picture&quot;), PICK_IMAGE_MULTIPLE);\n                photoAlert.dismiss();\n</code></pre>\n<p>I change open scanner for gallery  ACTION_GET_CONTENT to ACTION_OPEN_DOCUMENT. It solve my problem.</p>\n"}],"owner":{"account_id":18459504,"reputation":597,"user_id":13447372,"display_name":"uyarc"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77350496,"answer_count":1,"score":0,"last_activity_date":1698135376,"creation_date":1698063266,"question_id":77345132,"body_markdown":"I use ;\r\n\r\n    @Override\r\n        protected void onActivityResult(int requestCode, int resultCode, Intent data) {\r\n            try {\r\n                if(requestCode == PICK_IMAGE_MULTIPLE &amp;&amp; resultCode == RESULT_OK  &amp;&amp; data != null) {\r\n                    if(imagePathList==null){\r\n                        imagePathList = new ArrayList&lt;&gt;();\r\n                    }\r\n                    if(data.getData() != null) {\r\n                        Uri imgUri = data.getData();\r\n                        getImageFilePath(imgUri);\r\n                    } else if(data.getClipData() != null) {\r\n                        int count = data.getClipData().getItemCount();\r\n                        for (int i=0; i&lt;count; i++) {\r\n                            Uri imageUri = data.getClipData().getItemAt(i).getUri();\r\n                            getImageFilePath(imageUri);\r\n                        }\r\n                    }\r\n                }\r\n                if (requestCode == REQUEST_IMAGE_CAPTURE &amp;&amp; resultCode == RESULT_OK) {\r\n                    galleryAddPic();\r\n                }\r\n            } catch (Exception e) {\r\n                Toast.makeText(this, &quot;Something went wrong&quot;, Toast.LENGTH_LONG)\r\n                        .show();\r\n            }\r\n            super.onActivityResult(requestCode, resultCode, data);\r\n        }\r\nAnd;\r\n\r\n    public void getImageFilePath(Uri uri) {\r\n    \r\n            File file = new File(uri.getPath());\r\n            String[] filePath = file.getPath().split(&quot;:&quot;);\r\n            String imageId = filePath[filePath.length - 1];\r\n            Cursor cursor = getContentResolver().query(android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI, null, MediaStore.Images.Media._ID + &quot; = ? &quot;, new String[]{imageId}, null);\r\n            if (cursor != null) {\r\n                cursor.moveToFirst();\r\n                imagePath = cursor.getString(cursor.getColumnIndex(MediaStore.Images.Media.DATA));// this is work for only get image from files folder\r\n                if (!imagePathList.contains(imagePath)) {\r\n                    imagePathList.add(imagePath);\r\n                    addView(imagePath);\r\n                    buttonSendImages.setVisibility(View.VISIBLE);\r\n                }\r\n                cursor.close();\r\n            }\r\n        }\r\n\r\nWhen ı use ;\r\n\r\n`imagePath = cursor.getString(cursor.getColumnIndex(MediaStore.Images.Media.DATA))`;\r\n\r\nto get multi image from gallery folder ı got &quot;android.database.CursorIndexOutOfBoundsException: Index 0 requested, with a size of 0&quot; error. But this is work fine when ı use getting image from files folder.\r\nHow can ı fix this problem?","title":"What is the difference between getting multi image from gallery and files folder Android 9?","body":"<p>I use ;</p>\n<pre><code>@Override\n    protected void onActivityResult(int requestCode, int resultCode, Intent data) {\n        try {\n            if(requestCode == PICK_IMAGE_MULTIPLE &amp;&amp; resultCode == RESULT_OK  &amp;&amp; data != null) {\n                if(imagePathList==null){\n                    imagePathList = new ArrayList&lt;&gt;();\n                }\n                if(data.getData() != null) {\n                    Uri imgUri = data.getData();\n                    getImageFilePath(imgUri);\n                } else if(data.getClipData() != null) {\n                    int count = data.getClipData().getItemCount();\n                    for (int i=0; i&lt;count; i++) {\n                        Uri imageUri = data.getClipData().getItemAt(i).getUri();\n                        getImageFilePath(imageUri);\n                    }\n                }\n            }\n            if (requestCode == REQUEST_IMAGE_CAPTURE &amp;&amp; resultCode == RESULT_OK) {\n                galleryAddPic();\n            }\n        } catch (Exception e) {\n            Toast.makeText(this, &quot;Something went wrong&quot;, Toast.LENGTH_LONG)\n                    .show();\n        }\n        super.onActivityResult(requestCode, resultCode, data);\n    }\n</code></pre>\n<p>And;</p>\n<pre><code>public void getImageFilePath(Uri uri) {\n\n        File file = new File(uri.getPath());\n        String[] filePath = file.getPath().split(&quot;:&quot;);\n        String imageId = filePath[filePath.length - 1];\n        Cursor cursor = getContentResolver().query(android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI, null, MediaStore.Images.Media._ID + &quot; = ? &quot;, new String[]{imageId}, null);\n        if (cursor != null) {\n            cursor.moveToFirst();\n            imagePath = cursor.getString(cursor.getColumnIndex(MediaStore.Images.Media.DATA));// this is work for only get image from files folder\n            if (!imagePathList.contains(imagePath)) {\n                imagePathList.add(imagePath);\n                addView(imagePath);\n                buttonSendImages.setVisibility(View.VISIBLE);\n            }\n            cursor.close();\n        }\n    }\n</code></pre>\n<p>When ı use ;</p>\n<p><code>imagePath = cursor.getString(cursor.getColumnIndex(MediaStore.Images.Media.DATA))</code>;</p>\n<p>to get multi image from gallery folder ı got &quot;android.database.CursorIndexOutOfBoundsException: Index 0 requested, with a size of 0&quot; error. But this is work fine when ı use getting image from files folder.\nHow can ı fix this problem?</p>\n"},{"tags":["java","jax-rs","cxf","apache-tomee","java-17"],"owner":{"account_id":1745002,"reputation":817,"user_id":1595433,"display_name":"Charles Jourdan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1698135354,"creation_date":1698071404,"question_id":77346085,"body_markdown":"During my java migration (8 to 17), I experienced some problems with Tomee plus 8.0.15 (inderectly Apache CXF, cxf shade 3.5.5).\r\n\r\nIn my application, I use **multipart/form-data** in some requests, because some forms send classic values (like String, Long) and a file. The main problem is that Tomee don&#39;t use the class [MultipartProvider][0] which is in charge to split the **form-data** body and provide the correct values in parameters. Instead of that, it fill the first variable with the all content of the request.\r\n\r\nExample of my resource, using the [recommended way by Apache CXF][1].\r\n\r\n```java\r\n// imports ...\r\n\r\n@Path(&quot;/test&quot;)\r\n@Stateless\r\npublic class MyResource {\r\n  // ...\r\n\r\n  @POST\r\n  @Path(&quot;/{id}&quot;)\r\n  @Consumes(&quot;multipart/form-data&quot;)\r\n  public Response edit(\r\n    @PathParam(&quot;id&quot;) Long id, \r\n    @Multipart(&quot;name&quot;) String name,\r\n    @Multipart(&quot;file&quot;) Attachment image\r\n  ) {\r\n\r\n    // DOING some stuff with name\r\n\r\n    return Response.ok().build();\r\n  }\r\n\r\n  // ...\r\n}\r\n```\r\n\r\nAfter some hours of debugging, I found the reason. The method [MultipartProvider#isSupported][2] is clearly called but the result is false. It is essentially due to `AnnotationUtils.getAnnotation(anns, Multipart.class)` that returns false.\r\n\r\nWhen I inpect `Annotation[] anns` variable, it is not really a table of Annotation but rather Java Proxy. So when `getAnnotation` checks type of the annotation, the result is false.\r\n\r\nSo my questions are :\r\n\r\n1. What can i do to have all things work without changing my method signature ?\r\n2. Why Annotation are Proxy ?\r\n3. Is it a configuration, compilation or library problem ?\r\n\r\nThanks for reading and hope you understood me.\r\n\r\n**NB :** I knew the solution with `MultivaluedMap` or `MultipartBody`.\r\n\r\nInformations about environnement:\r\n\r\n```\r\nJDK used : openjdk\r\nJava version : 17\r\nGradle version : 7.3.3\r\nTomee version : 8.0.15 (Plus version)\r\nGradle dependencies : Nothing about apache cxf that can be entered in conflict with Tomee.\r\n```\r\n\r\n[0]: https://github.com/apache/cxf/blob/3.5.x-fixes/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/provider/MultipartProvider.java\r\n[1]: https://cxf.apache.org/docs/jax-rs-multiparts.html\r\n[2]: https://github.com/apache/cxf/blob/081c9b002f338036b3c2d272632fcda3b4b7ce79/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/provider/MultipartProvider.java#L125C23-L125C23","title":"Tomee MultipartProvider didn&#39;t consider body as readable","body":"<p>During my java migration (8 to 17), I experienced some problems with Tomee plus 8.0.15 (inderectly Apache CXF, cxf shade 3.5.5).</p>\n<p>In my application, I use <strong>multipart/form-data</strong> in some requests, because some forms send classic values (like String, Long) and a file. The main problem is that Tomee don't use the class <a href=\"https://github.com/apache/cxf/blob/3.5.x-fixes/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/provider/MultipartProvider.java\" rel=\"nofollow noreferrer\">MultipartProvider</a> which is in charge to split the <strong>form-data</strong> body and provide the correct values in parameters. Instead of that, it fill the first variable with the all content of the request.</p>\n<p>Example of my resource, using the <a href=\"https://cxf.apache.org/docs/jax-rs-multiparts.html\" rel=\"nofollow noreferrer\">recommended way by Apache CXF</a>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>// imports ...\n\n@Path(&quot;/test&quot;)\n@Stateless\npublic class MyResource {\n  // ...\n\n  @POST\n  @Path(&quot;/{id}&quot;)\n  @Consumes(&quot;multipart/form-data&quot;)\n  public Response edit(\n    @PathParam(&quot;id&quot;) Long id, \n    @Multipart(&quot;name&quot;) String name,\n    @Multipart(&quot;file&quot;) Attachment image\n  ) {\n\n    // DOING some stuff with name\n\n    return Response.ok().build();\n  }\n\n  // ...\n}\n</code></pre>\n<p>After some hours of debugging, I found the reason. The method <a href=\"https://github.com/apache/cxf/blob/081c9b002f338036b3c2d272632fcda3b4b7ce79/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/provider/MultipartProvider.java#L125C23-L125C23\" rel=\"nofollow noreferrer\">MultipartProvider#isSupported</a> is clearly called but the result is false. It is essentially due to <code>AnnotationUtils.getAnnotation(anns, Multipart.class)</code> that returns false.</p>\n<p>When I inpect <code>Annotation[] anns</code> variable, it is not really a table of Annotation but rather Java Proxy. So when <code>getAnnotation</code> checks type of the annotation, the result is false.</p>\n<p>So my questions are :</p>\n<ol>\n<li>What can i do to have all things work without changing my method signature ?</li>\n<li>Why Annotation are Proxy ?</li>\n<li>Is it a configuration, compilation or library problem ?</li>\n</ol>\n<p>Thanks for reading and hope you understood me.</p>\n<p><strong>NB :</strong> I knew the solution with <code>MultivaluedMap</code> or <code>MultipartBody</code>.</p>\n<p>Informations about environnement:</p>\n<pre><code>JDK used : openjdk\nJava version : 17\nGradle version : 7.3.3\nTomee version : 8.0.15 (Plus version)\nGradle dependencies : Nothing about apache cxf that can be entered in conflict with Tomee.\n</code></pre>\n"},{"tags":["java","javafx"],"comments":[{"owner":{"account_id":21741636,"reputation":1166,"user_id":16048914,"display_name":"David Weber"},"score":1,"creation_date":1698128340,"post_id":77349666,"comment_id":136362373,"body_markdown":"I would do it the same way. Easy and readable. You can use different Scenes too, but IMO this makes the code only more unreadable. Domain/Subject complexity is something you can not avoid. Technical complexity you can influence. Plus in the past, I ran into some strange behaviour while changing Scenes while using multiple Scenes in a single Stage.","body":"I would do it the same way. Easy and readable. You can use different Scenes too, but IMO this makes the code only more unreadable. Domain/Subject complexity is something you can not avoid. Technical complexity you can influence. Plus in the past, I ran into some strange behaviour while changing Scenes while using multiple Scenes in a single Stage."},{"owner":{"account_id":2819940,"reputation":12538,"user_id":2423906,"accept_rate":100,"display_name":"SedJ601"},"score":1,"creation_date":1698131595,"post_id":77349666,"comment_id":136362878,"body_markdown":"[Here](https://stackoverflow.com/a/75514636/2423906) is one idea.  My guess is that `spSubScene.getChildren().add(overviewSubsceneController.getVBoxRoot());` is `Bpane.setCenter(loader.load());` in your case.","body":"<a href=\"https://stackoverflow.com/a/75514636/2423906\">Here</a> is one idea.  My guess is that <code>spSubScene.getChildren().add(overviewSubsceneController.getV&zwnj;&#8203;BoxRoot());</code> is <code>Bpane.setCenter(loader.load());</code> in your case."},{"owner":{"account_id":16016495,"reputation":565,"user_id":11559075,"display_name":"Salah"},"score":0,"creation_date":1698132170,"post_id":77349666,"comment_id":136362984,"body_markdown":"Thank you guys for your instructions , appreciate that","body":"Thank you guys for your instructions , appreciate that"},{"owner":{"account_id":322981,"reputation":310744,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":2,"creation_date":1698132244,"post_id":77349666,"comment_id":136362998,"body_markdown":"If you’ve figured out a solution, you can post and accept an Answer to your own Question.","body":"If you’ve figured out a solution, you can post and accept an Answer to your own Question."},{"owner":{"account_id":16016495,"reputation":565,"user_id":11559075,"display_name":"Salah"},"score":0,"creation_date":1698132270,"post_id":77349666,"comment_id":136363006,"body_markdown":"if someone want&#39;s to make an answer i will accept it","body":"if someone want&#39;s to make an answer i will accept it"}],"answers":[{"tags":[],"owner":{"account_id":16016495,"reputation":565,"user_id":11559075,"display_name":"Salah"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1698134955,"creation_date":1698134955,"answer_id":77350442,"question_id":77349666,"body_markdown":"Okey guys , as they said in the comments, the best way is to make it simple where you could have a bordpane or any node you want then you could just whenever a user click the button just load the fxml file and Set new View to the center of  the BorderPane.  \r\nyou can check this answer [here][1]\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/75512717/javafx-change-anchorpanes-inside-window-when-button-is-pressed/75514636#75514636","title":"What&#39;s The Best Approach To Make Navigation Sidebar In Javafx?","body":"<p>Okey guys , as they said in the comments, the best way is to make it simple where you could have a bordpane or any node you want then you could just whenever a user click the button just load the fxml file and Set new View to the center of  the BorderPane.<br />\nyou can check this answer <a href=\"https://stackoverflow.com/questions/75512717/javafx-change-anchorpanes-inside-window-when-button-is-pressed/75514636#75514636\">here</a></p>\n"}],"owner":{"account_id":16016495,"reputation":565,"user_id":11559075,"display_name":"Salah"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":59,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77350442,"answer_count":1,"score":1,"last_activity_date":1698134955,"creation_date":1698124678,"question_id":77349666,"body_markdown":"I&#39;m trying to make a simple application where i want to have the sidebar navigation fixed and once  i click on when of the buttons of the sidebar the content just change in the center of the borderpane.\r\nyou can see the image below :\r\n[![enter image description here][1]][1]\r\n\r\n\r\nAnd the structure of the simple project:\r\n[![enter image description here][2]][2]\r\nAnd the code for HomeController : \r\n\r\n``` \r\npackage com.example.sidebarnav.Controllers;\r\n\r\nimport javafx.fxml.FXMLLoader;\r\nimport javafx.fxml.Initializable;\r\nimport javafx.scene.Scene;\r\nimport javafx.scene.control.Button;\r\nimport javafx.scene.layout.BorderPane;\r\nimport javafx.scene.text.Text;\r\nimport javafx.stage.Stage;\r\n\r\nimport java.net.URL;\r\nimport java.util.ResourceBundle;\r\n\r\npublic class HomeController implements Initializable {\r\n    public Button btnStock;\r\n    public BorderPane Bpane;\r\n    public Button btnClients;\r\n    public Text text;\r\n    public String Active=&quot;home&quot;;\r\n\r\n    @Override\r\n    public void initialize(URL url, ResourceBundle resourceBundle) {\r\n        // event on click Stock button\r\n        btnStock.setOnAction(event -&gt; {\r\n            Active = &quot;Stock&quot;;\r\n            showStock();\r\n        });\r\n\r\n        // event on click Clients button\r\n        btnClients.setOnAction(event -&gt; {\r\n            Active = &quot;Clients&quot;;\r\n\r\n            showClients();\r\n        });\r\n\r\n    }\r\n\r\n    public  void  showStock(){\r\n        Bpane.setCenter(text);\r\n        FXMLLoader loader = new FXMLLoader(getClass().getResource(&quot;/Fxml/Stock.fxml&quot;));\r\n\r\n        try{\r\n            Bpane.setCenter(loader.load());\r\n\r\n        }catch(Exception e){\r\n            e.printStackTrace();\r\n        }\r\n\r\n    }\r\n    public  void  showClients(){\r\n        Bpane.setCenter(text);\r\n        FXMLLoader loader = new FXMLLoader(getClass().getResource(&quot;/Fxml/Clients.fxml&quot;));\r\n\r\n        try{\r\n            Bpane.setCenter(loader.load());\r\n\r\n        }catch(Exception e){\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\n\r\n}\r\n\r\n``` \r\nAny Suggestion would be Appreciated.\r\n\r\n  [1]: https://i.stack.imgur.com/l8vOa.png\r\n  [2]: https://i.stack.imgur.com/lsS9D.png","title":"What&#39;s The Best Approach To Make Navigation Sidebar In Javafx?","body":"<p>I'm trying to make a simple application where i want to have the sidebar navigation fixed and once  i click on when of the buttons of the sidebar the content just change in the center of the borderpane.\nyou can see the image below :\n<a href=\"https://i.stack.imgur.com/l8vOa.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/l8vOa.png\" alt=\"enter image description here\" /></a></p>\n<p>And the structure of the simple project:\n<a href=\"https://i.stack.imgur.com/lsS9D.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/lsS9D.png\" alt=\"enter image description here\" /></a>\nAnd the code for HomeController :</p>\n<pre><code>package com.example.sidebarnav.Controllers;\n\nimport javafx.fxml.FXMLLoader;\nimport javafx.fxml.Initializable;\nimport javafx.scene.Scene;\nimport javafx.scene.control.Button;\nimport javafx.scene.layout.BorderPane;\nimport javafx.scene.text.Text;\nimport javafx.stage.Stage;\n\nimport java.net.URL;\nimport java.util.ResourceBundle;\n\npublic class HomeController implements Initializable {\n    public Button btnStock;\n    public BorderPane Bpane;\n    public Button btnClients;\n    public Text text;\n    public String Active=&quot;home&quot;;\n\n    @Override\n    public void initialize(URL url, ResourceBundle resourceBundle) {\n        // event on click Stock button\n        btnStock.setOnAction(event -&gt; {\n            Active = &quot;Stock&quot;;\n            showStock();\n        });\n\n        // event on click Clients button\n        btnClients.setOnAction(event -&gt; {\n            Active = &quot;Clients&quot;;\n\n            showClients();\n        });\n\n    }\n\n    public  void  showStock(){\n        Bpane.setCenter(text);\n        FXMLLoader loader = new FXMLLoader(getClass().getResource(&quot;/Fxml/Stock.fxml&quot;));\n\n        try{\n            Bpane.setCenter(loader.load());\n\n        }catch(Exception e){\n            e.printStackTrace();\n        }\n\n    }\n    public  void  showClients(){\n        Bpane.setCenter(text);\n        FXMLLoader loader = new FXMLLoader(getClass().getResource(&quot;/Fxml/Clients.fxml&quot;));\n\n        try{\n            Bpane.setCenter(loader.load());\n\n        }catch(Exception e){\n            e.printStackTrace();\n        }\n    }\n\n\n}\n\n</code></pre>\n<p>Any Suggestion would be Appreciated.</p>\n"},{"tags":["java","instrumentation","byte-buddy"],"comments":[{"owner":{"account_id":1284143,"reputation":43090,"user_id":1237575,"accept_rate":96,"display_name":"Rafael Winterhalter"},"score":0,"creation_date":1698356285,"post_id":77350421,"comment_id":136398802,"body_markdown":"You should be looking into.Java agents and class redefinition. Byte Buddy supports this via its AgentBuilder","body":"You should be looking into.Java agents and class redefinition. Byte Buddy supports this via its AgentBuilder"}],"owner":{"account_id":2683108,"reputation":89,"user_id":2318030,"display_name":"S-Kerrigan"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":31,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1698134727,"creation_date":1698134727,"question_id":77350421,"body_markdown":"Our project require programmatically specific logic and i wanted will write it via Byte-Buddy. So, me need know, how class can be transformed many times with save changes between iterations?\r\n\r\nP.S. Multiple transforms me need because only in runtime can be possible know all specific-criterias and depending on it will be need some of transformations\r\n\r\n\r\n\r\n\r\nPsedo-code:\r\n\r\n```\r\n\r\n\r\npublic class Adapter {\r\n    public void methodM1() {\r\n        System.out.println(&quot;simple method m1 test&quot;);\r\n    }\r\n    public void methodM2() {\r\n        System.out.println(&quot;simple method m2 test&quot;);\r\n    }\r\n}\r\n\r\npublic class InterceptorM1 {\r\n    @RuntimeType\r\n    public static Object intercept(@AllArguments Object[] allArguments) {\r\n        System.out.println(&quot;method from swapping m1&quot;);\r\n        return null;\r\n    }\r\n}\r\n\r\npublic class InterceptorM2 {\r\n    @RuntimeType\r\n    public static Object intercept(@AllArguments Object[] allArguments) {\r\n        System.out.println(&quot;method from swapping m2&quot;);\r\n        return null;\r\n    }\r\n}\r\n\r\npublic void example() throws NoSuchMethodException, InvocationTargetException, InstantiationException, IllegalAccessException {\r\n    Class&lt;?&gt; clazz = Adapter.class;\r\n\r\n    new ByteBuddy()\r\n            .subclass(Adapter.class)\r\n            .method(named(&quot;methodM1&quot;))\r\n            .intercept(MethodDelegation.to(InterceptorM1.class))\r\n            .make()\r\n            .load(getClass().getClassLoader(), ClassLoadingStrategy.Default.WRAPPER)\r\n            .getLoaded();\r\n\r\n    Class&lt;?&gt; dynamicType = new ByteBuddy()\r\n            .subclass(Adapter.class)\r\n            .method(named(&quot;methodM2&quot;))\r\n            .intercept(MethodDelegation.to(InterceptorM2.class))\r\n            .make()\r\n            .load(getClass().getClassLoader(), ClassLoadingStrategy.Default.WRAPPER)\r\n            .getLoaded();\r\n\r\n    Adapter adapter = (Adapter) dynamicType.getDeclaredConstructor().newInstance();\r\n    adapter.methodM1();\r\n    adapter.methodM2();\r\n\r\n}\r\n\r\n```\r\n\r\nCurrent result in console:\r\n\r\n\r\n```\r\nsimple method m1 test\r\nmethod from swapping m2\r\n```\r\n\r\nWhat i want get:\r\n\r\n\r\n```\r\nmethod from swapping m1\r\nmethod from swapping m2\r\n```\r\n\r\nI found this examples, but I don’t have a complete understanding:\r\n\r\nhttps://github.com/raphw/byte-buddy/blob/master/byte-buddy-dep/src/test/java/net/bytebuddy/ByteBuddyTutorialExamplesTest.java","title":"How use already transformed version of class in new tranformation by Byte-Buddy","body":"<p>Our project require programmatically specific logic and i wanted will write it via Byte-Buddy. So, me need know, how class can be transformed many times with save changes between iterations?</p>\n<p>P.S. Multiple transforms me need because only in runtime can be possible know all specific-criterias and depending on it will be need some of transformations</p>\n<p>Psedo-code:</p>\n<pre><code>\n\npublic class Adapter {\n    public void methodM1() {\n        System.out.println(&quot;simple method m1 test&quot;);\n    }\n    public void methodM2() {\n        System.out.println(&quot;simple method m2 test&quot;);\n    }\n}\n\npublic class InterceptorM1 {\n    @RuntimeType\n    public static Object intercept(@AllArguments Object[] allArguments) {\n        System.out.println(&quot;method from swapping m1&quot;);\n        return null;\n    }\n}\n\npublic class InterceptorM2 {\n    @RuntimeType\n    public static Object intercept(@AllArguments Object[] allArguments) {\n        System.out.println(&quot;method from swapping m2&quot;);\n        return null;\n    }\n}\n\npublic void example() throws NoSuchMethodException, InvocationTargetException, InstantiationException, IllegalAccessException {\n    Class&lt;?&gt; clazz = Adapter.class;\n\n    new ByteBuddy()\n            .subclass(Adapter.class)\n            .method(named(&quot;methodM1&quot;))\n            .intercept(MethodDelegation.to(InterceptorM1.class))\n            .make()\n            .load(getClass().getClassLoader(), ClassLoadingStrategy.Default.WRAPPER)\n            .getLoaded();\n\n    Class&lt;?&gt; dynamicType = new ByteBuddy()\n            .subclass(Adapter.class)\n            .method(named(&quot;methodM2&quot;))\n            .intercept(MethodDelegation.to(InterceptorM2.class))\n            .make()\n            .load(getClass().getClassLoader(), ClassLoadingStrategy.Default.WRAPPER)\n            .getLoaded();\n\n    Adapter adapter = (Adapter) dynamicType.getDeclaredConstructor().newInstance();\n    adapter.methodM1();\n    adapter.methodM2();\n\n}\n\n</code></pre>\n<p>Current result in console:</p>\n<pre><code>simple method m1 test\nmethod from swapping m2\n</code></pre>\n<p>What i want get:</p>\n<pre><code>method from swapping m1\nmethod from swapping m2\n</code></pre>\n<p>I found this examples, but I don’t have a complete understanding:</p>\n<p><a href=\"https://github.com/raphw/byte-buddy/blob/master/byte-buddy-dep/src/test/java/net/bytebuddy/ByteBuddyTutorialExamplesTest.java\" rel=\"nofollow noreferrer\">https://github.com/raphw/byte-buddy/blob/master/byte-buddy-dep/src/test/java/net/bytebuddy/ByteBuddyTutorialExamplesTest.java</a></p>\n"},{"tags":["java","arrays","loops","object","hashmap"],"comments":[{"owner":{"account_id":247613,"reputation":284087,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":1,"creation_date":1698096976,"post_id":77348426,"comment_id":136359763,"body_markdown":"Your code is  replacing *every* item in the animal array with the newest `zooAnimals.get(key)` every time your outer for loop runs. Walk through it in your mind to see this is so. Myself, I would filter the map using a stream, and then have the stream create an array.","body":"Your code is  replacing <i>every</i> item in the animal array with the newest <code>zooAnimals.get(key)</code> every time your outer for loop runs. Walk through it in your mind to see this is so. Myself, I would filter the map using a stream, and then have the stream create an array."},{"owner":{"account_id":5175809,"reputation":1054,"user_id":4142984,"accept_rate":83,"display_name":"Gyro Gearloose"},"score":0,"creation_date":1698097579,"post_id":77348426,"comment_id":136359826,"body_markdown":"What your code does is replace *unconditionally* every entry of animalArray with the last &quot;Brown&quot; animal. If after a dog, you had a bear, also brown, all entries would be &quot;Bear&quot;. Surely not what you want to accomplish. Have a beer and try again.","body":"What your code does is replace <i>unconditionally</i> every entry of animalArray with the last &quot;Brown&quot; animal. If after a dog, you had a bear, also brown, all entries would be &quot;Bear&quot;. Surely not what you want to accomplish. Have a beer and try again."},{"owner":{"account_id":247613,"reputation":284087,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":0,"creation_date":1698097671,"post_id":77348426,"comment_id":136359839,"body_markdown":"tea or coffee, not beer","body":"tea or coffee, not beer"},{"owner":{"account_id":5175809,"reputation":1054,"user_id":4142984,"accept_rate":83,"display_name":"Gyro Gearloose"},"score":0,"creation_date":1698097788,"post_id":77348426,"comment_id":136359855,"body_markdown":"@HovercraftFullOfEels &quot;tea or coffee, not beer&quot;, let&#39;s call it a creative break ;-) .","body":"@HovercraftFullOfEels &quot;tea or coffee, not beer&quot;, let&#39;s call it a creative break ;-) ."}],"answers":[{"tags":[],"owner":{"account_id":8305547,"reputation":140,"user_id":6242707,"accept_rate":50,"display_name":"higz555"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1698134707,"creation_date":1698098730,"answer_id":77348552,"question_id":77348426,"body_markdown":"```\r\nif(zooAnimals .get(key).getColor().equals(&quot;Brown&quot;){\r\n\tfor(int i=0; i &lt; animalArray.length; i++) {\r\n\t\tanimalArray[i] = zooAnimals.get(key);\r\n\t}\r\n}\r\n```\r\n\r\nYou have your for-loop defined inside the colour check condition.\r\n1. The last matched animal is only being stored as you are overriding the array each time the condition is met. Example: `animalArray[0]` will be assigned a value every time `zooAnimals.get(key).getColor().equals(&quot;Brown&quot;)` is true\r\n2. The for-loop is iterating 10 times each time the condition is met assigning values to array at index 0-9\r\n\r\n\r\n```\r\n\r\nint index=0;\r\nfor(String key: zooAnimals .keySet()){\r\n\tif(zooAnimals .get(key).getColor().equals(&quot;Brown&quot;){\r\n\t\tanimalArray[index] = zooAnimals.get(key);\r\n\t\tindex++;\r\n\t}\r\n}\t\t\r\n```","title":"Fill an array with matches from a HashMap in Java","body":"<pre><code>if(zooAnimals .get(key).getColor().equals(&quot;Brown&quot;){\n    for(int i=0; i &lt; animalArray.length; i++) {\n        animalArray[i] = zooAnimals.get(key);\n    }\n}\n</code></pre>\n<p>You have your for-loop defined inside the colour check condition.</p>\n<ol>\n<li>The last matched animal is only being stored as you are overriding the array each time the condition is met. Example: <code>animalArray[0]</code> will be assigned a value every time <code>zooAnimals.get(key).getColor().equals(&quot;Brown&quot;)</code> is true</li>\n<li>The for-loop is iterating 10 times each time the condition is met assigning values to array at index 0-9</li>\n</ol>\n<pre><code>\nint index=0;\nfor(String key: zooAnimals .keySet()){\n    if(zooAnimals .get(key).getColor().equals(&quot;Brown&quot;){\n        animalArray[index] = zooAnimals.get(key);\n        index++;\n    }\n}       \n</code></pre>\n"},{"tags":[],"owner":{"account_id":247613,"reputation":284087,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1698109261,"creation_date":1698099716,"answer_id":77348601,"question_id":77348426,"body_markdown":"You can more simply use streams to solve this problem:\r\n\r\n```\r\nString color = &quot;brown&quot;;\r\nAnimal[] animals = zooAnimals\r\n\t\t.values()  // get a collection of the map&#39;s values \r\n\t\t.stream()  // convert it into a stream\t\t\r\n\t\t// filter stream to gather only animals of a certain color\r\n\t\t.filter(animal -&gt; animal.getColor().equalsIgnoreCase(color))\r\n\t\t.toArray(Animal[]::new); // collect the stream into an array of animals\r\n```\r\n\r\nHere is a runnable example:\r\n\r\n```\r\nimport java.util.Arrays;\r\nimport java.util.HashMap;\r\nimport java.util.Map;\r\n\r\npublic class TestAnimals {\r\n    public static void main(String[] args) {\r\n        Map&lt;String, Animal&gt; zooAnimals = new HashMap&lt;&gt;();\r\n\r\n        // fill a map with a bunch of animals\r\n        zooAnimals.put(&quot;Lion&quot;, new Animal(&quot;Lion&quot;, &quot;Yellow&quot;));\r\n        zooAnimals.put(&quot;Tiger&quot;, new Animal(&quot;Tiger&quot;, &quot;Orange&quot;));\r\n        zooAnimals.put(&quot;Bear&quot;, new Animal(&quot;Bear&quot;, &quot;Brown&quot;));\r\n        zooAnimals.put(&quot;Penguin&quot;, new Animal(&quot;Penguin&quot;, &quot;Black&quot;));\r\n        zooAnimals.put(&quot;Panda&quot;, new Animal(&quot;Panda&quot;, &quot;Black and White&quot;));\r\n        zooAnimals.put(&quot;Polar Bear&quot;, new Animal(&quot;Polar Bear&quot;, &quot;White&quot;));\r\n        zooAnimals.put(&quot;Giraffe&quot;, new Animal(&quot;Giraffe&quot;, &quot;Yellow&quot;));\r\n        zooAnimals.put(&quot;Elephant&quot;, new Animal(&quot;Elephant&quot;, &quot;Gray&quot;));\r\n        zooAnimals.put(&quot;Horse&quot;, new Animal(&quot;Zebra&quot;, &quot;Brown&quot;));\r\n        zooAnimals.put(&quot;Monkey&quot;, new Animal(&quot;Monkey&quot;, &quot;Brown&quot;));\r\n        zooAnimals.put(&quot;Kangaroo&quot;, new Animal(&quot;Kangaroo&quot;, &quot;Brown&quot;));\r\n        zooAnimals.put(&quot;Koala&quot;, new Animal(&quot;Koala&quot;, &quot;Gray&quot;));\r\n        zooAnimals.put(&quot;Crocodile&quot;, new Animal(&quot;Crocodile&quot;, &quot;Green&quot;));\r\n        zooAnimals.put(&quot;Snake&quot;, new Animal(&quot;Snake&quot;, &quot;Green&quot;));\r\n        zooAnimals.put(&quot;Turtle&quot;, new Animal(&quot;Turtle&quot;, &quot;Green&quot;));\r\n\r\n        Animal[] brownAnimals = getAnimalsByColor(zooAnimals, &quot;Brown&quot;);\r\n\r\n        System.out.println(Arrays.toString(brownAnimals));\r\n    }\r\n\r\n    public static Animal[] getAnimalsByColor(Map&lt;String, Animal&gt; zooAnimals, String color) {\r\n        Animal[] animals = zooAnimals.values().stream()\r\n                .filter(animal -&gt; animal.getColor().equalsIgnoreCase(color))\r\n                .toArray(Animal[]::new);\r\n        return animals;\r\n    }\r\n}\r\n```\r\n```\r\nclass Animal {\r\n    private String name;\r\n    private String color;\r\n\r\n    public Animal(String name, String color) {\r\n        this.name = name;\r\n        this.color = color;\r\n    }\r\n\r\n    // getters\r\n    public String getName() {\r\n        return name;\r\n    }\r\n\r\n    public String getColor() {\r\n        return color;\r\n    }\r\n\r\n    // tostring\r\n    @Override\r\n    public String toString() {\r\n        return &quot;Name: &quot; + name + &quot;, Color: &quot; + color;\r\n    }\r\n\r\n}\r\n```","title":"Fill an array with matches from a HashMap in Java","body":"<p>You can more simply use streams to solve this problem:</p>\n<pre><code>String color = &quot;brown&quot;;\nAnimal[] animals = zooAnimals\n        .values()  // get a collection of the map's values \n        .stream()  // convert it into a stream      \n        // filter stream to gather only animals of a certain color\n        .filter(animal -&gt; animal.getColor().equalsIgnoreCase(color))\n        .toArray(Animal[]::new); // collect the stream into an array of animals\n</code></pre>\n<p>Here is a runnable example:</p>\n<pre><code>import java.util.Arrays;\nimport java.util.HashMap;\nimport java.util.Map;\n\npublic class TestAnimals {\n    public static void main(String[] args) {\n        Map&lt;String, Animal&gt; zooAnimals = new HashMap&lt;&gt;();\n\n        // fill a map with a bunch of animals\n        zooAnimals.put(&quot;Lion&quot;, new Animal(&quot;Lion&quot;, &quot;Yellow&quot;));\n        zooAnimals.put(&quot;Tiger&quot;, new Animal(&quot;Tiger&quot;, &quot;Orange&quot;));\n        zooAnimals.put(&quot;Bear&quot;, new Animal(&quot;Bear&quot;, &quot;Brown&quot;));\n        zooAnimals.put(&quot;Penguin&quot;, new Animal(&quot;Penguin&quot;, &quot;Black&quot;));\n        zooAnimals.put(&quot;Panda&quot;, new Animal(&quot;Panda&quot;, &quot;Black and White&quot;));\n        zooAnimals.put(&quot;Polar Bear&quot;, new Animal(&quot;Polar Bear&quot;, &quot;White&quot;));\n        zooAnimals.put(&quot;Giraffe&quot;, new Animal(&quot;Giraffe&quot;, &quot;Yellow&quot;));\n        zooAnimals.put(&quot;Elephant&quot;, new Animal(&quot;Elephant&quot;, &quot;Gray&quot;));\n        zooAnimals.put(&quot;Horse&quot;, new Animal(&quot;Zebra&quot;, &quot;Brown&quot;));\n        zooAnimals.put(&quot;Monkey&quot;, new Animal(&quot;Monkey&quot;, &quot;Brown&quot;));\n        zooAnimals.put(&quot;Kangaroo&quot;, new Animal(&quot;Kangaroo&quot;, &quot;Brown&quot;));\n        zooAnimals.put(&quot;Koala&quot;, new Animal(&quot;Koala&quot;, &quot;Gray&quot;));\n        zooAnimals.put(&quot;Crocodile&quot;, new Animal(&quot;Crocodile&quot;, &quot;Green&quot;));\n        zooAnimals.put(&quot;Snake&quot;, new Animal(&quot;Snake&quot;, &quot;Green&quot;));\n        zooAnimals.put(&quot;Turtle&quot;, new Animal(&quot;Turtle&quot;, &quot;Green&quot;));\n\n        Animal[] brownAnimals = getAnimalsByColor(zooAnimals, &quot;Brown&quot;);\n\n        System.out.println(Arrays.toString(brownAnimals));\n    }\n\n    public static Animal[] getAnimalsByColor(Map&lt;String, Animal&gt; zooAnimals, String color) {\n        Animal[] animals = zooAnimals.values().stream()\n                .filter(animal -&gt; animal.getColor().equalsIgnoreCase(color))\n                .toArray(Animal[]::new);\n        return animals;\n    }\n}\n</code></pre>\n<pre><code>class Animal {\n    private String name;\n    private String color;\n\n    public Animal(String name, String color) {\n        this.name = name;\n        this.color = color;\n    }\n\n    // getters\n    public String getName() {\n        return name;\n    }\n\n    public String getColor() {\n        return color;\n    }\n\n    // tostring\n    @Override\n    public String toString() {\n        return &quot;Name: &quot; + name + &quot;, Color: &quot; + color;\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":24323906,"reputation":128,"user_id":18263761,"display_name":"ilia"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698099886,"creation_date":1698099886,"answer_id":77348611,"question_id":77348426,"body_markdown":"I assume you have all right in the Animal class  \r\n\r\n \r\n\r\n     // a List to store animals\r\n        List&lt;Animal&gt; animalList = new ArrayList&lt;&gt;();   \r\n    \r\n     // Sort HashMap to find animals with the specified color\r\n        for (Animal animal : zooAnimals.keyset()) {\r\n            if (animal.getColor().equals(&quot;Brown&quot;)) {\r\n                animalList.add(animal);\r\n            }\r\n        }\r\n\r\n    //then if you want convert list to array\r\n    Animal[] animalArray = animalList.toArray(new Animal[animalList.size()]);\r\n\r\nLet me know if it works\r\n","title":"Fill an array with matches from a HashMap in Java","body":"<p>I assume you have all right in the Animal class</p>\n<pre><code> // a List to store animals\n    List&lt;Animal&gt; animalList = new ArrayList&lt;&gt;();   \n\n // Sort HashMap to find animals with the specified color\n    for (Animal animal : zooAnimals.keyset()) {\n        if (animal.getColor().equals(&quot;Brown&quot;)) {\n            animalList.add(animal);\n        }\n    }\n\n//then if you want convert list to array\nAnimal[] animalArray = animalList.toArray(new Animal[animalList.size()]);\n</code></pre>\n<p>Let me know if it works</p>\n"},{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698117596,"creation_date":1698105217,"answer_id":77348841,"question_id":77348426,"body_markdown":"&gt; _&quot;... I have a HashMap of animals. I have to create a separate Array and find the animals from the HashMap that are a certain color. All of the matches will get put into the Array. ...&quot;_\r\n\r\nUse the _[Map#values](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/Map.html#values())_ method, instead.\r\n\r\n```java\r\nAnimal[] animalArray = new Animal[0];\r\n\r\nfor (Animal a : zooAnimals.values())\r\n    if (a.getColor().equals(&quot;Brown&quot;)) {\r\n        animalArray = Arrays.copyOf(animalArray, animalArray.length + 1);\r\n        animalArray[animalArray.length - 1] = a;\r\n    }\r\n```\r\n\r\nOptionally, use a _[stream](https://docs.oracle.com/javase/tutorial/collections/streams/index.html)_.\r\n\r\n```java\r\nAnimal[] animalArray\r\n    = zooAnimals.values()\r\n                .stream()\r\n                .filter(x -&gt; x.getColor().equals(&quot;Brown&quot;))\r\n                .toArray(Animal[]::new);\r\n```","title":"Fill an array with matches from a HashMap in Java","body":"<blockquote>\n<p><em>&quot;... I have a HashMap of animals. I have to create a separate Array and find the animals from the HashMap that are a certain color. All of the matches will get put into the Array. ...&quot;</em></p>\n</blockquote>\n<p>Use the <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/Map.html#values()\" rel=\"nofollow noreferrer\">Map#values</a></em> method, instead.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Animal[] animalArray = new Animal[0];\n\nfor (Animal a : zooAnimals.values())\n    if (a.getColor().equals(&quot;Brown&quot;)) {\n        animalArray = Arrays.copyOf(animalArray, animalArray.length + 1);\n        animalArray[animalArray.length - 1] = a;\n    }\n</code></pre>\n<p>Optionally, use a <em><a href=\"https://docs.oracle.com/javase/tutorial/collections/streams/index.html\" rel=\"nofollow noreferrer\">stream</a></em>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Animal[] animalArray\n    = zooAnimals.values()\n                .stream()\n                .filter(x -&gt; x.getColor().equals(&quot;Brown&quot;))\n                .toArray(Animal[]::new);\n</code></pre>\n"}],"owner":{"account_id":29738285,"reputation":3,"user_id":22791216,"display_name":"chalcedony"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":98,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":77348552,"answer_count":4,"score":-1,"last_activity_date":1698134707,"creation_date":1698096573,"question_id":77348426,"body_markdown":"It&#39;s for a homework assignment so I have to use an Array. I understand using an ArrayList would be the easier solution, but unfortunately I can&#39;t.\r\n\r\nI have a HashMap of animals. I have to create a separate Array and find the animals from the HashMap that are a certain color. All of the matches will get put into the Array.\r\n\r\n```\r\n//This Hashmap is already filled with Animals\r\nzooAnimals = new HashMap&lt;&gt;();\r\n//This array needs to be filled with the matches\r\nAnimal[] animalArray = new Animal[10];\r\n\r\nfor(String key: zooAnimals .keySet()){\r\n  for(int i=0; i &lt; animalArray.length; i++) {\r\n    if(zooAnimals .get(key).getColor().equals(&quot;Brown&quot;){\r\n      animalArray[i] = zooAnimals.get(key);\r\n    }\r\n  }\r\n}\r\n```\r\n\r\n\r\n\r\n\r\nWith my current code, my Array is being being repeatedly filled with the same animal which is the last match from zooAnimals. how do I get it to move onto the next Array index once the match is found? For example my array is just like:\r\n\r\nDog\r\nDog\r\nDog\r\nDog\r\nDog\r\nDog\r\nDog\r\nDog\r\nDog\r\nDog\r\n","title":"Fill an array with matches from a HashMap in Java","body":"<p>It's for a homework assignment so I have to use an Array. I understand using an ArrayList would be the easier solution, but unfortunately I can't.</p>\n<p>I have a HashMap of animals. I have to create a separate Array and find the animals from the HashMap that are a certain color. All of the matches will get put into the Array.</p>\n<pre><code>//This Hashmap is already filled with Animals\nzooAnimals = new HashMap&lt;&gt;();\n//This array needs to be filled with the matches\nAnimal[] animalArray = new Animal[10];\n\nfor(String key: zooAnimals .keySet()){\n  for(int i=0; i &lt; animalArray.length; i++) {\n    if(zooAnimals .get(key).getColor().equals(&quot;Brown&quot;){\n      animalArray[i] = zooAnimals.get(key);\n    }\n  }\n}\n</code></pre>\n<p>With my current code, my Array is being being repeatedly filled with the same animal which is the last match from zooAnimals. how do I get it to move onto the next Array index once the match is found? For example my array is just like:</p>\n<p>Dog\nDog\nDog\nDog\nDog\nDog\nDog\nDog\nDog\nDog</p>\n"},{"tags":["java","spring","authentication","spring-security"],"answers":[{"tags":[],"owner":{"account_id":25804254,"reputation":774,"user_id":19546048,"display_name":"DingHao"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698111787,"creation_date":1698111787,"answer_id":77349066,"question_id":77348335,"body_markdown":"you need enable formLogin:\r\n\r\n    http.formLogin(Customizer.withDefaults())","title":"Spring security login request giving a 404","body":"<p>you need enable formLogin:</p>\n<pre><code>http.formLogin(Customizer.withDefaults())\n</code></pre>\n"},{"tags":[],"owner":{"account_id":18964200,"reputation":1,"user_id":13839000,"display_name":"dohv"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698133877,"creation_date":1698133877,"answer_id":77350329,"question_id":77348335,"body_markdown":"Try this,\r\n\r\n    @Autowired\r\n    private CustomUserDetailsService customUserDetailsService;\r\n    \r\n    @Bean\r\n    public VeireAuthenticationProvider authenticationProvider() {\r\n    \r\n           VeireAuthenticationProvider authProvider = new VeireAuthenticationProvider();\r\n           authProvider.setUserDetailsService(customUserDetailsService);\r\n           return authProvider;\r\n    }\r\n\r\nin your security filter add authentication provider\r\n\r\n     http.authenticationProvider(authenticationProvider());","title":"Spring security login request giving a 404","body":"<p>Try this,</p>\n<pre><code>@Autowired\nprivate CustomUserDetailsService customUserDetailsService;\n\n@Bean\npublic VeireAuthenticationProvider authenticationProvider() {\n\n       VeireAuthenticationProvider authProvider = new VeireAuthenticationProvider();\n       authProvider.setUserDetailsService(customUserDetailsService);\n       return authProvider;\n}\n</code></pre>\n<p>in your security filter add authentication provider</p>\n<pre><code> http.authenticationProvider(authenticationProvider());\n</code></pre>\n"}],"owner":{"account_id":8305547,"reputation":140,"user_id":6242707,"accept_rate":50,"display_name":"higz555"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1698133877,"creation_date":1698095316,"question_id":77348335,"body_markdown":"I&#39;m trying to implement a custom authentication mechanism using Spring security.\r\n\r\nI have created my own implementation of the `UserDetailsService` which fetches the User\r\n\r\n\r\n```\r\n@Component\r\npublic class CustomUserDetailsService implements UserDetailsService {\r\n\r\n...\r\n\r\n    @Override\r\n    public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException {\r\n        AccountResponse accountResponse = this.userService.getAccount(username);\r\n        CustomUserDetails userDetails = new CustomUserDetails();\r\n        userDetails.setUsername(accountResponse.getAccountId());\r\n        return userDetails;\r\n    }\r\n}\r\n```\r\n\r\nThen I have created an implementation of the `AuthenticationProvider` which calls another method to do the password checking and returns a `UsernamePasswordAuthenticationToken` if passwords match\r\n\r\n```\r\n@Component\r\npublic class VeireAuthenticationProvider implements AuthenticationProvider {\r\n\r\n...\r\n    @Override\r\n    public Authentication authenticate(Authentication authentication) throws AuthenticationException {\r\n        String username = authentication.getName();\r\n        String password = authentication.getCredentials().toString();\r\n\r\n        UserDetails userDetails = this.customUserDetailsService.loadUserByUsername(username);\r\n        boolean authenticated =\r\n                this.authenticationService.authenticate(userDetails.getUsername(), password);\r\n        if (authenticated) {\r\n            return new UsernamePasswordAuthenticationToken(userDetails, password, userDetails.getAuthorities());\r\n        } else {\r\n            ...\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public boolean supports(Class&lt;?&gt; authentication) {\r\n        return true;\r\n    }\r\n}\r\n```\r\n\r\nAnd here is my security filter:\r\n\r\n```\r\n    @Bean\r\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\r\n        http.csrf().disable()\r\n                .authorizeHttpRequests()\r\n                .requestMatchers(&quot;/login&quot;)\r\n                .permitAll()\r\n                .anyRequest()\r\n                .authenticated();\r\n        return http.build();\r\n```\r\n\r\nI&#39;m trying to utilize Spring&#39;s internal login API but for some reason I am getting a 404 on making a POST request to `http://localhost:8080/context-path/login` with username and password in the request body","title":"Spring security login request giving a 404","body":"<p>I'm trying to implement a custom authentication mechanism using Spring security.</p>\n<p>I have created my own implementation of the <code>UserDetailsService</code> which fetches the User</p>\n<pre><code>@Component\npublic class CustomUserDetailsService implements UserDetailsService {\n\n...\n\n    @Override\n    public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException {\n        AccountResponse accountResponse = this.userService.getAccount(username);\n        CustomUserDetails userDetails = new CustomUserDetails();\n        userDetails.setUsername(accountResponse.getAccountId());\n        return userDetails;\n    }\n}\n</code></pre>\n<p>Then I have created an implementation of the <code>AuthenticationProvider</code> which calls another method to do the password checking and returns a <code>UsernamePasswordAuthenticationToken</code> if passwords match</p>\n<pre><code>@Component\npublic class VeireAuthenticationProvider implements AuthenticationProvider {\n\n...\n    @Override\n    public Authentication authenticate(Authentication authentication) throws AuthenticationException {\n        String username = authentication.getName();\n        String password = authentication.getCredentials().toString();\n\n        UserDetails userDetails = this.customUserDetailsService.loadUserByUsername(username);\n        boolean authenticated =\n                this.authenticationService.authenticate(userDetails.getUsername(), password);\n        if (authenticated) {\n            return new UsernamePasswordAuthenticationToken(userDetails, password, userDetails.getAuthorities());\n        } else {\n            ...\n        }\n    }\n\n    @Override\n    public boolean supports(Class&lt;?&gt; authentication) {\n        return true;\n    }\n}\n</code></pre>\n<p>And here is my security filter:</p>\n<pre><code>    @Bean\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n        http.csrf().disable()\n                .authorizeHttpRequests()\n                .requestMatchers(&quot;/login&quot;)\n                .permitAll()\n                .anyRequest()\n                .authenticated();\n        return http.build();\n</code></pre>\n<p>I'm trying to utilize Spring's internal login API but for some reason I am getting a 404 on making a POST request to <code>http://localhost:8080/context-path/login</code> with username and password in the request body</p>\n"},{"tags":["java","json","jackson"],"comments":[{"owner":{"display_name":"user1531971"},"score":1,"creation_date":1459979652,"post_id":36462971,"comment_id":60537954,"body_markdown":"I&#39;ve used gson for this, which forces you to create a class that defines the json, including any other classes. That is, we don&#39;t want to accept this label as a string, but rather tell the serializer what sort of object it is.","body":"I&#39;ve used gson for this, which forces you to create a class that defines the json, including any other classes. That is, we don&#39;t want to accept this label as a string, but rather tell the serializer what sort of object it is."},{"owner":{"account_id":1716117,"reputation":934,"user_id":1573133,"accept_rate":25,"display_name":"user1573133"},"score":0,"creation_date":1460041814,"post_id":36462971,"comment_id":60570460,"body_markdown":"thx jdv. gson has not been used in this project so far. will review.","body":"thx jdv. gson has not been used in this project so far. will review."},{"owner":{"display_name":"user1531971"},"score":0,"creation_date":1460060720,"post_id":36462971,"comment_id":60582277,"body_markdown":"Oh, I assumed Jackson has the same functionality, which according to the answer you have accepted, seems to be the case -- a class and annotations for mapping JSON &lt;-&gt; objects.","body":"Oh, I assumed Jackson has the same functionality, which according to the answer you have accepted, seems to be the case -- a class and annotations for mapping JSON &lt;-&gt; objects."}],"answers":[{"tags":[],"owner":{"account_id":2848514,"reputation":10922,"user_id":2446208,"accept_rate":69,"display_name":"blacktide"},"down_vote_count":0,"up_vote_count":8,"is_accepted":true,"score":8,"last_activity_date":1460044108,"creation_date":1459980884,"answer_id":36463287,"question_id":36462971,"body_markdown":"There doesn&#39;t seem to be a way to configure `ObjectMapper` to handle this behavior by default. The solution is to create a custom [`JsonDeserializer`](http://fasterxml.github.io/jackson-databind/javadoc/2.3.0/com/fasterxml/jackson/databind/JsonDeserializer.html?is-external=true):\r\n\r\n    public class Wrapper {\r\n        public Delivery delivery;\r\n    }\r\n\r\n    public class Delivery {\r\n        @JsonDeserialize(using = ProviderResponseDeserializer.class)\r\n        public ProviderResponse providerResponse;\r\n    }\r\n\r\n    public class ProviderResponse {\r\n        public String sqsRequestId;\r\n        public String sqsMessageId;\r\n    }\r\n\r\n    public class ProviderResponseDeserializer extends JsonDeserializer&lt;ProviderResponse&gt; {\r\n        private static final ObjectMapper mapper = new ObjectMapper();\r\n\r\n        @Override\r\n        public ProviderResponse deserialize(JsonParser jsonParser, DeserializationContext deserializationContext) throws IOException, JsonProcessingException {\r\n            return mapper.readValue(jsonParser.getText(), ProviderResponse.class);\r\n        }\r\n    }\r\n\r\nThen you can deserialize the JSON by using your `ObjectMapper`:\r\n\r\n    ObjectMapper mapper = new ObjectMapper();\r\n    Wrapper wrapper = mapper.readValue(JSON, Wrapper.class);","title":"JSON to Java object deserialization with escaped properties","body":"<p>There doesn't seem to be a way to configure <code>ObjectMapper</code> to handle this behavior by default. The solution is to create a custom <a href=\"http://fasterxml.github.io/jackson-databind/javadoc/2.3.0/com/fasterxml/jackson/databind/JsonDeserializer.html?is-external=true\" rel=\"noreferrer\"><code>JsonDeserializer</code></a>:</p>\n\n<pre><code>public class Wrapper {\n    public Delivery delivery;\n}\n\npublic class Delivery {\n    @JsonDeserialize(using = ProviderResponseDeserializer.class)\n    public ProviderResponse providerResponse;\n}\n\npublic class ProviderResponse {\n    public String sqsRequestId;\n    public String sqsMessageId;\n}\n\npublic class ProviderResponseDeserializer extends JsonDeserializer&lt;ProviderResponse&gt; {\n    private static final ObjectMapper mapper = new ObjectMapper();\n\n    @Override\n    public ProviderResponse deserialize(JsonParser jsonParser, DeserializationContext deserializationContext) throws IOException, JsonProcessingException {\n        return mapper.readValue(jsonParser.getText(), ProviderResponse.class);\n    }\n}\n</code></pre>\n\n<p>Then you can deserialize the JSON by using your <code>ObjectMapper</code>:</p>\n\n<pre><code>ObjectMapper mapper = new ObjectMapper();\nWrapper wrapper = mapper.readValue(JSON, Wrapper.class);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7826453,"reputation":3061,"user_id":5917837,"accept_rate":29,"display_name":"mantri"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1499671139,"creation_date":1499671139,"answer_id":45005926,"question_id":36462971,"body_markdown":"I faced this similar issue. This gets resolved if we define a constructor in `ProviderResponse` which takes a single string argument (which is actually json) and then map the json in the constructor to the instance of `ProviderResponse` and use this temp instance to initialise the properties.\r\n\r\n    public class Wrapper {\r\n        public Delivery delivery;\r\n    }\r\n\r\n    public class Delivery {\r\n        public ProviderResponse providerResponse;\r\n    }\r\n\r\n    public class ProviderResponse {\r\n        public String sqsRequestId;\r\n        public String sqsMessageId;\r\n    \r\n        private static ObjectMapper objMapper = new ObjectMapper();\r\n    \r\n        public ProviderResponse(String json) {\r\n            ProviderResponse temp = objMapper.readValue(json, ProviderResponse.class);\r\n            this.sqsMessageId = temp.sqsMessageId;\r\n            this.sqsRequestId = temp.sqsRequestId;\r\n        }\r\n    }\r\n\r\nThe key is to keep the `ObjectMapper` instance and the its usage somewhere in your utility class and use it from there.\r\n\r\n ","title":"JSON to Java object deserialization with escaped properties","body":"<p>I faced this similar issue. This gets resolved if we define a constructor in <code>ProviderResponse</code> which takes a single string argument (which is actually json) and then map the json in the constructor to the instance of <code>ProviderResponse</code> and use this temp instance to initialise the properties.</p>\n\n<pre><code>public class Wrapper {\n    public Delivery delivery;\n}\n\npublic class Delivery {\n    public ProviderResponse providerResponse;\n}\n\npublic class ProviderResponse {\n    public String sqsRequestId;\n    public String sqsMessageId;\n\n    private static ObjectMapper objMapper = new ObjectMapper();\n\n    public ProviderResponse(String json) {\n        ProviderResponse temp = objMapper.readValue(json, ProviderResponse.class);\n        this.sqsMessageId = temp.sqsMessageId;\n        this.sqsRequestId = temp.sqsRequestId;\n    }\n}\n</code></pre>\n\n<p>The key is to keep the <code>ObjectMapper</code> instance and the its usage somewhere in your utility class and use it from there.</p>\n"},{"tags":[],"owner":{"account_id":9344202,"reputation":268,"user_id":6935912,"display_name":"Lakitu Lakitutu"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698133003,"creation_date":1698133003,"answer_id":77350254,"question_id":36462971,"body_markdown":"Although @blacktide solution looks fine I have found it not working for me. Maybe because of Scala not Java, maybe because of library versions. @blacktide code causes StackOverflow for me. I used intermediate wrapper class to avoid the issue.\r\nTested for &quot;com.fasterxml.jackson.module&quot; %% &quot;jackson-module-scala&quot; % &quot;2.11.3&quot;.\r\n\r\n    import com.fasterxml.jackson.annotation.JsonProperty\r\n    import com.fasterxml.jackson.core.JsonParser\r\n    import com.fasterxml.jackson.databind.{DeserializationContext, JsonDeserializer, ObjectMapper}\r\n    import com.fasterxml.jackson.databind.annotation.JsonDeserialize\r\n    \r\n    final case class Wrapper(@JsonProperty(&quot;delivery&quot;) delivery:Delivery)\r\n    \r\n    final case class Delivery(@JsonProperty(&quot;providerResponse&quot;) providerResponseWrapper: ProviderResponseWrapper) // field name provided to be read as &quot;providerResponse&quot;\r\n    \r\n    @JsonDeserialize(using = classOf[ProviderResponseWrapperDeserializer])\r\n    final case class ProviderResponseWrapper(@JsonProperty(&quot;providerResponse&quot;) providerResponse: ProviderResponse)\r\n    \r\n    final case class ProviderResponse(@JsonProperty(&quot;sqsRequestId&quot;) sqsRequestId: String, @JsonProperty(&quot;sqsMessageId&quot;) sqsMessageId: String)\r\n    \r\n    final case class ProviderResponseWrapperDeserializer() extends JsonDeserializer[ProviderResponseWrapper] {\r\n      override def deserialize(jsonParser: JsonParser, deserializationContext: DeserializationContext): ProviderResponseWrapper =\r\n        ProviderResponseWrapper(new ObjectMapper().readValue(jsonParser.getText, classOf[ProviderResponse])) // mapper may be moved to the object\r\n    }\r\n\r\nIt outputs:\r\n\r\n    Wrapper(Delivery(ProviderResponseWrapper(ProviderResponse(308ee0c6-7d51-57b0-a472-af8e6c41be0b,88dd59eb-c34d-4e4d-bb27-7e0d226daa2a))))\r\n\r\nPlease pay attention to provide proper name for providerResponseWrapper using annotation.","title":"JSON to Java object deserialization with escaped properties","body":"<p>Although @blacktide solution looks fine I have found it not working for me. Maybe because of Scala not Java, maybe because of library versions. @blacktide code causes StackOverflow for me. I used intermediate wrapper class to avoid the issue.\nTested for &quot;com.fasterxml.jackson.module&quot; %% &quot;jackson-module-scala&quot; % &quot;2.11.3&quot;.</p>\n<pre><code>import com.fasterxml.jackson.annotation.JsonProperty\nimport com.fasterxml.jackson.core.JsonParser\nimport com.fasterxml.jackson.databind.{DeserializationContext, JsonDeserializer, ObjectMapper}\nimport com.fasterxml.jackson.databind.annotation.JsonDeserialize\n\nfinal case class Wrapper(@JsonProperty(&quot;delivery&quot;) delivery:Delivery)\n\nfinal case class Delivery(@JsonProperty(&quot;providerResponse&quot;) providerResponseWrapper: ProviderResponseWrapper) // field name provided to be read as &quot;providerResponse&quot;\n\n@JsonDeserialize(using = classOf[ProviderResponseWrapperDeserializer])\nfinal case class ProviderResponseWrapper(@JsonProperty(&quot;providerResponse&quot;) providerResponse: ProviderResponse)\n\nfinal case class ProviderResponse(@JsonProperty(&quot;sqsRequestId&quot;) sqsRequestId: String, @JsonProperty(&quot;sqsMessageId&quot;) sqsMessageId: String)\n\nfinal case class ProviderResponseWrapperDeserializer() extends JsonDeserializer[ProviderResponseWrapper] {\n  override def deserialize(jsonParser: JsonParser, deserializationContext: DeserializationContext): ProviderResponseWrapper =\n    ProviderResponseWrapper(new ObjectMapper().readValue(jsonParser.getText, classOf[ProviderResponse])) // mapper may be moved to the object\n}\n</code></pre>\n<p>It outputs:</p>\n<pre><code>Wrapper(Delivery(ProviderResponseWrapper(ProviderResponse(308ee0c6-7d51-57b0-a472-af8e6c41be0b,88dd59eb-c34d-4e4d-bb27-7e0d226daa2a))))\n</code></pre>\n<p>Please pay attention to provide proper name for providerResponseWrapper using annotation.</p>\n"}],"owner":{"account_id":1716117,"reputation":934,"user_id":1573133,"accept_rate":25,"display_name":"user1573133"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6996,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"accepted_answer_id":36463287,"answer_count":3,"score":8,"last_activity_date":1698133003,"creation_date":1459979261,"question_id":36462971,"body_markdown":"I need to convert the following JSON to Java object. The property `providerResponse` in the JSON contains map of properties but they are escaped and wrapped in doubleQuotes. As a result, it does not deserialize the property `providerResponse` into a Java object (it comes as `String`). I use `objectMapper.readValue(msgStr, classType)` to deserialize the JSON. The message is generated by AWS for SNS delivery status notifications and I don&#39;t have control to change the JSON message. Is it possible to configure `ObjectMapper` to unescape the property and deserialize into a Java object instead of `String`?\r\n\r\n    {  \r\n       &quot;delivery&quot;:{  \r\n          &quot;providerResponse&quot;:&quot;{\\&quot;sqsRequestId\\&quot;:\\&quot;308ee0c6-7d51-57b0-a472-af8e6c41be0b\\&quot;,\\&quot;sqsMessageId\\&quot;:\\&quot;88dd59eb-c34d-4e4d-bb27-7e0d226daa2a\\&quot;}&quot;\r\n       }\r\n    }\r\n\r\n    @JsonProperty(&quot;providerResponse&quot;)\r\n    private String providerResponse;","title":"JSON to Java object deserialization with escaped properties","body":"<p>I need to convert the following JSON to Java object. The property <code>providerResponse</code> in the JSON contains map of properties but they are escaped and wrapped in doubleQuotes. As a result, it does not deserialize the property <code>providerResponse</code> into a Java object (it comes as <code>String</code>). I use <code>objectMapper.readValue(msgStr, classType)</code> to deserialize the JSON. The message is generated by AWS for SNS delivery status notifications and I don't have control to change the JSON message. Is it possible to configure <code>ObjectMapper</code> to unescape the property and deserialize into a Java object instead of <code>String</code>?</p>\n\n<pre><code>{  \n   \"delivery\":{  \n      \"providerResponse\":\"{\\\"sqsRequestId\\\":\\\"308ee0c6-7d51-57b0-a472-af8e6c41be0b\\\",\\\"sqsMessageId\\\":\\\"88dd59eb-c34d-4e4d-bb27-7e0d226daa2a\\\"}\"\n   }\n}\n\n@JsonProperty(\"providerResponse\")\nprivate String providerResponse;\n</code></pre>\n"},{"tags":["java","apache-flink","guice"],"comments":[{"owner":{"account_id":1547313,"reputation":82154,"user_id":1440565,"accept_rate":59,"display_name":"Code-Apprentice"},"score":0,"creation_date":1698094206,"post_id":77348160,"comment_id":136359400,"body_markdown":"Is Flink complaining because you initialize `object` to `null` in the declaration and doesn&#39;t even get to the `init()` method? I think your assumption that the varialbe is getting &quot;reset&quot; needs to be tested. Maybe you should add some `System.out.println` statements, at least if there is a way for you to view this output, to trace the execution. Does the error occur while executing `init()` or does it happen before that? (IDK what Flink is, but I&#39;m just looking at the code here as you posted it.)","body":"Is Flink complaining because you initialize <code>object</code> to <code>null</code> in the declaration and doesn&#39;t even get to the <code>init()</code> method? I think your assumption that the varialbe is getting &quot;reset&quot; needs to be tested. Maybe you should add some <code>System.out.println</code> statements, at least if there is a way for you to view this output, to trace the execution. Does the error occur while executing <code>init()</code> or does it happen before that? (IDK what Flink is, but I&#39;m just looking at the code here as you posted it.)"},{"owner":{"account_id":1547313,"reputation":82154,"user_id":1440565,"accept_rate":59,"display_name":"Code-Apprentice"},"score":0,"creation_date":1698094326,"post_id":77348160,"comment_id":136359418,"body_markdown":"With that said, why are you using a `static` field at all here? Can you do this with a non-static member field instead? Remember that a `static` field is associated with the class and not with any specific instance. Generally, `static` should only be used when you have a value that logically belongs with the class.","body":"With that said, why are you using a <code>static</code> field at all here? Can you do this with a non-static member field instead? Remember that a <code>static</code> field is associated with the class and not with any specific instance. Generally, <code>static</code> should only be used when you have a value that logically belongs with the class."},{"owner":{"account_id":1259633,"reputation":1751,"user_id":1218317,"accept_rate":87,"display_name":"ritratt"},"score":0,"creation_date":1698094410,"post_id":77348160,"comment_id":136359431,"body_markdown":"With Flink, you cannot inject non-serializable objects into jobs. You have to get/build them during the job. I&#39;m essentially trying to build a singleton cache and fetching it in a Flink job.","body":"With Flink, you cannot inject non-serializable objects into jobs. You have to get/build them during the job. I&#39;m essentially trying to build a singleton cache and fetching it in a Flink job."},{"owner":{"account_id":1547313,"reputation":82154,"user_id":1440565,"accept_rate":59,"display_name":"Code-Apprentice"},"score":0,"creation_date":1698094567,"post_id":77348160,"comment_id":136359454,"body_markdown":"I don&#39;t understand how that means the field has to be static. You could just as easily make it non-static, right?","body":"I don&#39;t understand how that means the field has to be static. You could just as easily make it non-static, right?"},{"owner":{"account_id":1259633,"reputation":1751,"user_id":1218317,"accept_rate":87,"display_name":"ritratt"},"score":0,"creation_date":1698095433,"post_id":77348160,"comment_id":136359577,"body_markdown":"Check some examples on how to build a singleton from scratch. That&#39;ll answer your question about why it has to be static.","body":"Check some examples on how to build a singleton from scratch. That&#39;ll answer your question about why it has to be static."},{"owner":{"account_id":1547313,"reputation":82154,"user_id":1440565,"accept_rate":59,"display_name":"Code-Apprentice"},"score":0,"creation_date":1698095865,"post_id":77348160,"comment_id":136359629,"body_markdown":"But you aren&#39;t building a singleton from scratch here. Instead, you are using a dependency injection container. Also, `SomeClass` is the singleton, not `MyClass`, so you don&#39;t need a `static` field in `MyClass`.","body":"But you aren&#39;t building a singleton from scratch here. Instead, you are using a dependency injection container. Also, <code>SomeClass</code> is the singleton, not <code>MyClass</code>, so you don&#39;t need a <code>static</code> field in <code>MyClass</code>."},{"owner":{"account_id":1547313,"reputation":82154,"user_id":1440565,"accept_rate":59,"display_name":"Code-Apprentice"},"score":1,"creation_date":1698095922,"post_id":77348160,"comment_id":136359635,"body_markdown":"On top of that `getStuff()` is declared to return an object of type `SomeClass`, but there is no `return`.","body":"On top of that <code>getStuff()</code> is declared to return an object of type <code>SomeClass</code>, but there is no <code>return</code>."}],"answers":[{"tags":[],"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698132585,"creation_date":1698132585,"answer_id":77350216,"question_id":77348160,"body_markdown":"There&#39;s a better way to inject into static fields using Guice:\r\n\r\n```\r\npublic class MyModule extends AbstractModule {\r\n  @Override\r\n  protected void configure() {\r\n    bind(SomeClass.class).in(Scopes.SINGLETON);\r\n    requestStaticInjection(MyClass.class);\r\n  }\r\n}\r\n\r\nclass MyClass {\r\n  @Inject private static SomeClass object;\r\n  // no init method needed\r\n}\r\n```\r\n\r\nHowever, it would be even better if you can omit the `static` field altogether:\r\n\r\n```\r\npublic class MyModule extends AbstractModule {\r\n  @Override\r\n  protected void configure() {\r\n    bind(SomeClass.class).in(Scopes.SINGLETON);\r\n    bind(MyClass.class);\r\n  }\r\n}\r\n\r\nclass MyClass {\r\n  private final SomeClass object;\r\n  \r\n  @Inject \r\n  MyClass(SomeClass object) {\r\n    this.object = object;\r\n  }\r\n}\r\n```\r\n\r\nNow you can request `MyClass` instances either by injecting them or requesting them directly from the `injector`, and they will all have access to the same `SomeClass` instance.","title":"Initialized static variable becomes null","body":"<p>There's a better way to inject into static fields using Guice:</p>\n<pre><code>public class MyModule extends AbstractModule {\n  @Override\n  protected void configure() {\n    bind(SomeClass.class).in(Scopes.SINGLETON);\n    requestStaticInjection(MyClass.class);\n  }\n}\n\nclass MyClass {\n  @Inject private static SomeClass object;\n  // no init method needed\n}\n</code></pre>\n<p>However, it would be even better if you can omit the <code>static</code> field altogether:</p>\n<pre><code>public class MyModule extends AbstractModule {\n  @Override\n  protected void configure() {\n    bind(SomeClass.class).in(Scopes.SINGLETON);\n    bind(MyClass.class);\n  }\n}\n\nclass MyClass {\n  private final SomeClass object;\n  \n  @Inject \n  MyClass(SomeClass object) {\n    this.object = object;\n  }\n}\n</code></pre>\n<p>Now you can request <code>MyClass</code> instances either by injecting them or requesting them directly from the <code>injector</code>, and they will all have access to the same <code>SomeClass</code> instance.</p>\n"}],"owner":{"account_id":1259633,"reputation":1751,"user_id":1218317,"accept_rate":87,"display_name":"ritratt"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":62,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"answer_count":1,"score":-1,"last_activity_date":1698132585,"creation_date":1698093148,"question_id":77348160,"body_markdown":"I have a simple class like so:\r\n\r\n```\r\nclass MyClass {\r\n  private static SomeClass object = null;\r\n\r\n  public void init(Someclass injectedObject) {\r\n    object = injectedObject;\r\n  }\r\n}\r\n```\r\n\r\nI init this class in my Guice module:\r\n```\r\npublic class MyModule extends AbstractModule {\r\n\r\n  @Provides @Singleton\r\n  public SomeClass getStuff() {\r\n    SomeClass injectObject = new SomeClass();\r\n    MyClass.init(injectObject);\r\n  }\r\n\r\n}\r\n```\r\n\r\nBut when I package the my jar and submit it as a job to Flink runtime, I get an error saying `NullPointerException: object in MyClass in null`\r\n\r\nI have even tried adding this to my method:\r\n```\r\npublic static void main(String[] args) {\r\n  // Guice stuff\r\n}\r\n\r\npublic void doStuff() {\r\n  MyClass.init(injectedObject);\r\n}\r\n```\r\n\r\nAm I missing something? Why is an initialized variable getting reset to null in Flink runtime?","title":"Initialized static variable becomes null","body":"<p>I have a simple class like so:</p>\n<pre><code>class MyClass {\n  private static SomeClass object = null;\n\n  public void init(Someclass injectedObject) {\n    object = injectedObject;\n  }\n}\n</code></pre>\n<p>I init this class in my Guice module:</p>\n<pre><code>public class MyModule extends AbstractModule {\n\n  @Provides @Singleton\n  public SomeClass getStuff() {\n    SomeClass injectObject = new SomeClass();\n    MyClass.init(injectObject);\n  }\n\n}\n</code></pre>\n<p>But when I package the my jar and submit it as a job to Flink runtime, I get an error saying <code>NullPointerException: object in MyClass in null</code></p>\n<p>I have even tried adding this to my method:</p>\n<pre><code>public static void main(String[] args) {\n  // Guice stuff\n}\n\npublic void doStuff() {\n  MyClass.init(injectedObject);\n}\n</code></pre>\n<p>Am I missing something? Why is an initialized variable getting reset to null in Flink runtime?</p>\n"},{"tags":["java","android","kotlin","unity-game-engine","gradle"],"owner":{"account_id":22136541,"reputation":69,"user_id":16387207,"display_name":"eichan114"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":100,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1698132549,"creation_date":1698132549,"question_id":77350212,"body_markdown":"My app has Unity embedded via Uaal. Originally it was a Java only codebase, but I wanted to start using more modern language features so I&#39;m trying to gradually migrate parts of it to Kotlin.\r\n\r\nTo start, I used InteliJ&#39;s automated Java to Kotlin conversion on some of the files. After fixing some Kotlin syntax errors from the conversion and trying to build, I got errors like this:\r\n\r\n```\r\nCaused by: org.gradle.workers.internal.DefaultWorkerExecutor$WorkExecutionException: A failure occurred while executing com.android.build.gradle.internal.tasks.CheckDuplicatesRunnable\r\n\r\nCaused by: java.lang.RuntimeException: Duplicate class kotlin.ArrayIntrinsicsKt found in modules jetified-kotlin-stdlib (kotlin-stdlib.jar) and jetified-kotlin-stdlib-1.8.22 (org.jetbrains.kotlin:kotlin-stdlib:1.8.22)\r\n\r\nCaused by: org.gradle.workers.internal.DefaultWorkerExecutor$WorkExecutionException: A failure occurred while executing com.android.build.gradle.internal.tasks.MergeJavaResWorkAction\r\n\r\nCaused by: com.android.builder.merge.DuplicateRelativeFileException: 2 files found with path &#39;kotlin/annotation/annotation.kotlin_builtins&#39; from inputs:\r\n\r\nCaused by: com.android.builder.merge.DuplicateRelativeFileException: 2 files found with path &#39;kotlin/annotation/annotation.kotlin_builtins&#39;.\r\n```\r\n\r\n```\r\nDuplicate class kotlin.ArrayIntrinsicsKt found in modules jetified-kotlin-stdlib (kotlin-stdlib.jar) and jetified-kotlin-stdlib-1.8.22 (org.jetbrains.kotlin:kotlin-stdlib:1.8.22)\r\nDuplicate class kotlin.BuilderInference found in modules jetified-kotlin-stdlib (kotlin-stdlib.jar) and jetified-kotlin-stdlib-1.8.22 (org.jetbrains.kotlin:kotlin-stdlib:1.8.22)\r\nDuplicate class kotlin.CharCodeJVMKt found in modules jetified-kotlin-stdlib (kotlin-stdlib.jar) and jetified-kotlin-stdlib-1.8.22 (org.jetbrains.kotlin:kotlin-stdlib:1.8.22)\r\nDuplicate class kotlin.CharCodeKt found in modules jetified-kotlin-stdlib (kotlin-stdlib.jar) and jetified-kotlin-stdlib-1.8.22 (org.jetbrains.kotlin:kotlin-stdlib:1.8.22)\r\nDuplicate class kotlin.DeepRecursiveFunction found in modules jetified-kotlin-stdlib (kotlin-stdlib.jar) and jetified-kotlin-stdlib-1.8.22 (org.jetbrains.kotlin:kotlin-stdlib:1.8.22)\r\nDuplicate class kotlin.DeepRecursiveKt found in modules jetified-kotlin-stdlib (kotlin-stdlib.jar) and jetified-kotlin-stdlib-1.8.22 (org.jetbrains.kotlin:kotlin-stdlib:1.8.22)\r\nDuplicate class kotlin.DeepRecursiveScope found in modules jetified-kotlin-stdlib (kotlin-stdlib.jar) and jetified-kotlin-stdlib-1.8.22 (org.jetbrains.kotlin:kotlin-stdlib:1.8.22)\r\nDuplicate class kotlin.DeepRecursiveScopeImpl found in modules jetified-kotlin-stdlib (kotlin-stdlib.jar) and jetified-kotlin-stdlib-1.8.22 (org.jetbrains.kotlin:kotlin-stdlib:1.8.22)\r\nDuplicate class kotlin.DeepRecursiveScopeImpl$crossFunctionCompletion$$inlined$Continuation$1 found in modules jetified-kotlin-stdlib (kotlin-stdlib.jar) and jetified-kotlin-stdlib-1.8.22 (org.jetbrains.kotlin:kotlin-stdlib:1.8.22)\r\nDuplicate class kotlin.Deprecated found in modules jetified-kotlin-stdlib (kotlin-stdlib.jar) and jetified-kotlin-stdlib-1.8.22 (org.jetbrains.kotlin:kotlin-stdlib:1.8.22)\r\nDuplicate class kotlin.DeprecatedSinceKotlin found in modules jetified-kotlin-stdlib (kotlin-stdlib.jar) and jetified-kotlin-stdlib-1.8.22 (org.jetbrains.kotlin:kotlin-stdlib:1.8.22)\r\nDuplicate class kotlin.DeprecationLevel found in modules jetified-kotlin-stdlib (kotlin-stdlib.jar) and jetified-kotlin-stdlib-1.8.22 (org.jetbrains.kotlin:kotlin-stdlib:1.8.22)\r\nDuplicate class kotlin.DslMarker found in modules jetified-kotlin-stdlib (kotlin-stdlib.jar) and jetified-kotlin-stdlib-1.8.22 (org.jetbrains.kotlin:kotlin-stdlib:1.8.22)\r\nDuplicate class kotlin.ExceptionsKt found in modules jetified-kotlin-stdlib (kotlin-stdlib.jar) and jetified-kotlin-stdlib-1.8.22 (org.jetbrains.kotlin:kotlin-stdlib:1.8.22)\r\nDuplicate class kotlin.ExceptionsKt__ExceptionsKt found in modules jetified-kotlin-stdlib (kotlin-stdlib.jar) and jetified-kotlin-stdlib-1.8.22 (org.jetbrains.kotlin:kotlin-stdlib:1.8.22)\r\nDuplicate class kotlin.ExperimentalMultiplatform found in modules jetified-kotlin-stdlib (kotlin-stdlib.jar) and jetified-kotlin-stdlib-1.8.22 (org.jetbrains.kotlin:kotlin-stdlib:1.8.22)\r\nDuplicate class kotlin.ExperimentalStdlibApi found in modules jetified-kotlin-stdlib (kotlin-stdlib.jar) and jetified-kotlin-stdlib-1.8.22 (org.jetbrains.kotlin:kotlin-stdlib:1.8.22)\r\nDuplicate class kotlin.ExperimentalUnsignedTypes found in modules jetified-kotlin-stdlib (kotlin-stdlib.jar) and jetified-kotlin-stdlib-1.8.22 (org.jetbrains.kotlin:kotlin-stdlib:1.8.22)\r\nDuplicate class kotlin.ExtensionFunctionType found in modules jetified-kotlin-stdlib (kotlin-stdlib.jar) and jetified-kotlin-stdlib-1.8.22 (org.jetbrains.kotlin:kotlin-stdlib:1.8.22)\r\nDuplicate class kotlin.Function found in modules jetified-kotlin-stdlib (kotlin-stdlib.jar) and jetified-kotlin-stdlib-1.8.22 (org.jetbrains.kotlin:kotlin-stdlib:1.8.22)\r\nDuplicate class kotlin.HashCodeKt found in modules jetified-kotlin-stdlib (kotlin-stdlib.jar) and jetified-kotlin-stdlib-1.8.22 (org.jetbrains.kotlin:kotlin-stdlib:1.8.22)\r\nDuplicate class kotlin.InitializedLazyImpl found in modules jetified-kotlin-stdlib (kotlin-stdlib.jar) and jetified-kotlin-stdlib-1.8.22 (org.jetbrains.kotlin:kotlin-stdlib:1.8.22)\r\nDuplicate class kotlin.KotlinNothingValueException found in modules jetified-kotlin-stdlib (kotlin-stdlib.jar) and jetified-kotlin-stdlib-1.8.22 (org.jetbrains.kotlin:kotlin-stdlib:1.8.22)\r\nDuplicate class kotlin.KotlinNullPointerException found in modules jetified-kotlin-stdlib (kotlin-stdlib.jar) and jetified-kotlin-stdlib-1.8.22 (org.jetbrains.kotlin:kotlin-stdlib:1.8.22)\r\nDuplicate class kotlin.KotlinVersion found in modules jetified-kotlin-stdlib (kotlin-stdlib.jar) and jetified-kotlin-stdlib-1.8.22 (org.jetbrains.kotlin:kotlin-stdlib:1.8.22)........................\r\n```\r\n\r\n## What I&#39;ve tried\r\n - https://stackoverflow.com/questions/75263047/duplicate-class-in-kotlin-android\r\n - https://youtrack.jetbrains.com/issue/KT-54136/Duplicated-classes-cause-build-failure-if-a-dependency-to-kotlin-stdlib-specified-in-an-android-project\r\n - https://github.com/facebook/react-native/issues/35979\r\n etc...\r\n\r\n## Enviroment\r\n- SDK Java11.0.21\r\n- Android GradlePlugin Version 7.2.2\r\n- Gradle Version 7.6.3\r\n- TargetSDK 34\r\n- min SDK 24\r\n\r\nprojectRoot\r\n```\r\n// Top-level build file where you can add configuration options common to all sub-projects/modules.\r\n\r\nplugins {\r\n    id &#39;com.android.application&#39; version &#39;7.2.2&#39; apply false\r\n    id &#39;com.android.library&#39; version &#39;7.2.2&#39; apply false\r\n    id &#39;org.jetbrains.kotlin.android&#39; version &#39;1.8.0&#39; apply false\r\n}\r\n\r\next {\r\n    defaultTargetSdkVersion = 33\r\n}\r\n\r\ntask clean(type: Delete) {\r\n    delete rootProject.buildDir\r\n}\r\n```\r\n\r\napp\r\n```\r\napply plugin: &#39;com.android.application&#39;\r\napply plugin: &#39;org.jetbrains.kotlin.android&#39;\r\n\r\ndependencies {\r\n    implementation project(&#39;:unityLibrary&#39;)\r\n    implementation fileTree(dir: project(&#39;:unityLibrary&#39;).getProjectDir().toString() + (&#39;\\\\libs&#39;), include: [&#39;*.jar&#39;])\r\n    implementation fileTree(dir: &#39;libs&#39;, include: [&#39;*.jar&#39;])\r\n    implementation &#39;androidx.appcompat:appcompat:1.3.1&#39;\r\n    implementation &#39;androidx.constraintlayout:constraintlayout:2.1.4&#39;\r\n    implementation &#39;com.google.android.material:material:1.4.0&#39;\r\n    implementation &#39;io.reactivex.rxjava3:rxandroid:3.0.2&#39;\r\n    implementation &#39;io.reactivex.rxjava3:rxjava:3.1.8&#39;\r\n    implementation project(path: &#39;:unityLibrary&#39;)\r\n    implementation &#39;androidx.media3:media3-common:1.1.1&#39;\r\n    implementation &#39;androidx.core:core-ktx:+&#39;\r\n    testImplementation &#39;junit:junit:4.13.1&#39;\r\n    androidTestImplementation &#39;androidx.test.ext:junit:1.1.1&#39;\r\n}\r\n\r\n\r\nandroid {\r\n\r\n    compileSdk 34\r\n\r\n    defaultConfig {\r\n        applicationId &#39;com.Flamers.Memoria&#39;\r\n        minSdk 24\r\n        targetSdk 34\r\n        ndk {\r\n            abiFilters &quot;armeabi-v7a&quot;, &quot;arm64-v8a&quot;\r\n        }\r\n        versionCode 20\r\n        versionName &#39;1.16.1&#39;\r\n        testInstrumentationRunner &#39;androidx.test.runner.AndroidJUnitRunner&#39;\r\n        signingConfig signingConfigs.debug\r\n    }\r\n\r\n    configurations.all {\r\n        resolutionStrategy {\r\n            force &#39;androidx.test:core:1.5.0&#39;\r\n        }\r\n    }\r\n\r\n    buildTypes {\r\n        release {\r\n            minifyEnabled true\r\n            shrinkResources true\r\n            proguardFiles getDefaultProguardFile(&#39;proguard-android-optimize.txt&#39;), &#39;proguard-rules.pro&#39;\r\n        }\r\n    }\r\n\r\n    viewBinding {\r\n        enabled = true\r\n    }\r\n\r\n    buildToolsVersion &#39;33.0.0&#39;\r\n    namespace &#39;com.unity.mynativeapp&#39;\r\n    kotlinOptions {\r\n        jvmTarget = &#39;11&#39;\r\n    }\r\n}\r\n```\r\n\r\nunitylibrary\r\n```\r\napply plugin: &#39;com.android.library&#39;\r\n\r\n\r\ndependencies {\r\n    implementation fileTree(dir: &#39;libs&#39;, include: [&#39;*.jar&#39;])\r\n    implementation(name: &#39;bugsnag-plugin-android-anr-release&#39;, ext:&#39;aar&#39;)\r\n    implementation(name: &#39;bugsnag-android-release&#39;, ext:&#39;aar&#39;)\r\n    implementation(name: &#39;bugsnag-android-unity-release&#39;, ext:&#39;aar&#39;)\r\n    implementation(name: &#39;OVRPlugin&#39;, ext:&#39;aar&#39;)\r\n    implementation(name: &#39;tobservicelib&#39;, ext:&#39;aar&#39;)\r\n    implementation(name: &#39;audioinaec&#39;, ext:&#39;aar&#39;)\r\n    implementation(name: &#39;bugsnag-android-ndk-release&#39;, ext:&#39;aar&#39;)\r\n    implementation project(&#39;xrmanifest.androidlib&#39;)\r\n\r\n}\r\n\r\nandroid {\r\n    ndkPath &quot;C:/Program Files/Unity/Hub/Editor/2022.3.10f1/Editor/Data/PlaybackEngines/AndroidPlayer/NDK&quot;\r\n\r\n    compileSdkVersion 33\r\n    buildToolsVersion &#39;32.0.0&#39;\r\n\r\n    compileOptions {\r\n        sourceCompatibility JavaVersion.VERSION_11\r\n        targetCompatibility JavaVersion.VERSION_11\r\n    }\r\n\r\n    defaultConfig {\r\n        minSdkVersion 24\r\n        targetSdk 34\r\n        ndk {\r\n            abiFilters &#39;armeabi-v7a&#39;, &#39;arm64-v8a&#39;\r\n        }\r\n        versionCode 20\r\n        versionName &#39;1.16.0&#39;\r\n        consumerProguardFiles &#39;proguard-unity.txt&#39;\r\n    }\r\n\r\n    lintOptions {\r\n        abortOnError false\r\n    }\r\n\r\n    aaptOptions {\r\n        noCompress = [&#39;.unity3d&#39;, &#39;.ress&#39;, &#39;.resource&#39;, &#39;.obb&#39;, &#39;.bundle&#39;, &#39;.unityexp&#39;] + unityStreamingAssets.tokenize(&#39;, &#39;)\r\n        ignoreAssetsPattern = &quot;!.svn:!.git:!.ds_store:!*.scc:!CVS:!thumbs.db:!picasa.ini:!*~&quot;\r\n    }\r\n\r\n    packagingOptions {\r\n        doNotStrip &#39;*/armeabi-v7a/*.so&#39;\r\n        doNotStrip &#39;*/arm64-v8a/*.so&#39;\r\n    }\r\n}\r\n\r\ndef getSdkDir() {\r\n    Properties local = new Properties()\r\n    local.load(new FileInputStream(&quot;${rootDir}/local.properties&quot;))\r\n    return local.getProperty(&#39;sdk.dir&#39;)\r\n}\r\n\r\ndef BuildIl2Cpp(String workingDir, String configuration, String architecture, String abi, String[] staticLibraries) {\r\n    def commandLineArgs = []\r\n    commandLineArgs.add(&quot;--compile-cpp&quot;)\r\n    commandLineArgs.add(&quot;--platform=Android&quot;)\r\n    commandLineArgs.add(&quot;--architecture=&quot; + architecture)\r\n    commandLineArgs.add(&quot;--outputpath=&quot; + workingDir + &quot;/src/main/jniLibs/&quot; + abi + &quot;/libil2cpp.so&quot;)\r\n    commandLineArgs.add(&quot;--baselib-directory=&quot; + workingDir + &quot;/src/main/jniStaticLibs/&quot; + abi)\r\n    commandLineArgs.add(&quot;--incremental-g-c-time-slice=3&quot;)\r\n    commandLineArgs.add(&quot;--configuration=&quot; + configuration)\r\n    commandLineArgs.add(&quot;--dotnetprofile=unityaot-linux&quot;)\r\n    commandLineArgs.add(&quot;--profiler-report&quot;)\r\n    commandLineArgs.add(&quot;--profiler-output-file=&quot; + workingDir + &quot;/build/il2cpp_&quot;+ abi + &quot;_&quot; + configuration + &quot;/il2cpp_conv.traceevents&quot;)\r\n    commandLineArgs.add(&quot;--print-command-line&quot;)\r\n    commandLineArgs.add(&quot;--data-folder=&quot; + workingDir + &quot;/src/main/Il2CppOutputProject/Source/il2cppOutput/data&quot;)\r\n    commandLineArgs.add(&quot;--generatedcppdir=&quot; + workingDir + &quot;/src/main/Il2CppOutputProject/Source/il2cppOutput&quot;)\r\n    commandLineArgs.add(&quot;--cachedirectory=&quot; + workingDir + &quot;/build/il2cpp_&quot;+ abi + &quot;_&quot; + configuration + &quot;/il2cpp_cache&quot;)\r\n    commandLineArgs.add(&quot;--tool-chain-path=&quot; + android.ndkDirectory)\r\n    staticLibraries.eachWithIndex {fileName, i-&gt;\r\n        commandLineArgs.add(&quot;--additional-libraries=&quot; + workingDir + &quot;/src/main/jniStaticLibs/&quot; + abi + &quot;/&quot; + fileName)\r\n    }\r\n    def executableExtension = &quot;&quot;\r\n    if (org.gradle.internal.os.OperatingSystem.current().isWindows()) {\r\n        executableExtension = &quot;.exe&quot;\r\n        commandLineArgs = commandLineArgs*.replace(&#39;\\&quot;&#39;, &#39;\\\\\\&quot;&#39;)\r\n    }\r\n    exec {\r\n        executable workingDir + &quot;/src/main/Il2CppOutputProject/IL2CPP/build/deploy/il2cpp&quot; + executableExtension\r\n        args commandLineArgs\r\n        environment &quot;ANDROID_SDK_ROOT&quot;, getSdkDir()\r\n    }\r\n    delete workingDir + &quot;/src/main/jniLibs/&quot; + abi + &quot;/libil2cpp.sym.so&quot;\r\n    ant.move(file: workingDir + &quot;/src/main/jniLibs/&quot; + abi + &quot;/libil2cpp.dbg.so&quot;, tofile: workingDir + &quot;/symbols/&quot; + abi + &quot;/libil2cpp.so&quot;)\r\n}\r\n\r\nandroid {\r\n    task BuildIl2CppTask {\r\n        doLast {\r\n              BuildIl2Cpp(projectDir.toString().replaceAll(&#39;\\\\\\\\&#39;, &#39;/&#39;), &#39;Release&#39;, &#39;armv7&#39;, &#39;armeabi-v7a&#39;, [  ] as String[]);\r\n              BuildIl2Cpp(projectDir.toString().replaceAll(&#39;\\\\\\\\&#39;, &#39;/&#39;), &#39;Release&#39;, &#39;arm64&#39;, &#39;arm64-v8a&#39;, [  ] as String[]);\r\n        }\r\n    }\r\n    afterEvaluate {\r\n        if (project(&#39;:unityLibrary&#39;).tasks.findByName(&#39;mergeDebugJniLibFolders&#39;))\r\n            project(&#39;:unityLibrary&#39;).mergeDebugJniLibFolders.dependsOn BuildIl2CppTask\r\n        if (project(&#39;:unityLibrary&#39;).tasks.findByName(&#39;mergeReleaseJniLibFolders&#39;))\r\n            project(&#39;:unityLibrary&#39;).mergeReleaseJniLibFolders.dependsOn BuildIl2CppTask\r\n    }\r\n    sourceSets {\r\n        main {\r\n            jni.srcDirs = [&quot;src/main/Il2CppOutputProject&quot;]\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nAny help getting past this build error would be greatly appreciated!","title":"Build failure with Duplicate class error after partially migrating Java project to Kotlin","body":"<p>My app has Unity embedded via Uaal. Originally it was a Java only codebase, but I wanted to start using more modern language features so I'm trying to gradually migrate parts of it to Kotlin.</p>\n<p>To start, I used InteliJ's automated Java to Kotlin conversion on some of the files. After fixing some Kotlin syntax errors from the conversion and trying to build, I got errors like this:</p>\n<pre><code>Caused by: org.gradle.workers.internal.DefaultWorkerExecutor$WorkExecutionException: A failure occurred while executing com.android.build.gradle.internal.tasks.CheckDuplicatesRunnable\n\nCaused by: java.lang.RuntimeException: Duplicate class kotlin.ArrayIntrinsicsKt found in modules jetified-kotlin-stdlib (kotlin-stdlib.jar) and jetified-kotlin-stdlib-1.8.22 (org.jetbrains.kotlin:kotlin-stdlib:1.8.22)\n\nCaused by: org.gradle.workers.internal.DefaultWorkerExecutor$WorkExecutionException: A failure occurred while executing com.android.build.gradle.internal.tasks.MergeJavaResWorkAction\n\nCaused by: com.android.builder.merge.DuplicateRelativeFileException: 2 files found with path 'kotlin/annotation/annotation.kotlin_builtins' from inputs:\n\nCaused by: com.android.builder.merge.DuplicateRelativeFileException: 2 files found with path 'kotlin/annotation/annotation.kotlin_builtins'.\n</code></pre>\n<pre><code>Duplicate class kotlin.ArrayIntrinsicsKt found in modules jetified-kotlin-stdlib (kotlin-stdlib.jar) and jetified-kotlin-stdlib-1.8.22 (org.jetbrains.kotlin:kotlin-stdlib:1.8.22)\nDuplicate class kotlin.BuilderInference found in modules jetified-kotlin-stdlib (kotlin-stdlib.jar) and jetified-kotlin-stdlib-1.8.22 (org.jetbrains.kotlin:kotlin-stdlib:1.8.22)\nDuplicate class kotlin.CharCodeJVMKt found in modules jetified-kotlin-stdlib (kotlin-stdlib.jar) and jetified-kotlin-stdlib-1.8.22 (org.jetbrains.kotlin:kotlin-stdlib:1.8.22)\nDuplicate class kotlin.CharCodeKt found in modules jetified-kotlin-stdlib (kotlin-stdlib.jar) and jetified-kotlin-stdlib-1.8.22 (org.jetbrains.kotlin:kotlin-stdlib:1.8.22)\nDuplicate class kotlin.DeepRecursiveFunction found in modules jetified-kotlin-stdlib (kotlin-stdlib.jar) and jetified-kotlin-stdlib-1.8.22 (org.jetbrains.kotlin:kotlin-stdlib:1.8.22)\nDuplicate class kotlin.DeepRecursiveKt found in modules jetified-kotlin-stdlib (kotlin-stdlib.jar) and jetified-kotlin-stdlib-1.8.22 (org.jetbrains.kotlin:kotlin-stdlib:1.8.22)\nDuplicate class kotlin.DeepRecursiveScope found in modules jetified-kotlin-stdlib (kotlin-stdlib.jar) and jetified-kotlin-stdlib-1.8.22 (org.jetbrains.kotlin:kotlin-stdlib:1.8.22)\nDuplicate class kotlin.DeepRecursiveScopeImpl found in modules jetified-kotlin-stdlib (kotlin-stdlib.jar) and jetified-kotlin-stdlib-1.8.22 (org.jetbrains.kotlin:kotlin-stdlib:1.8.22)\nDuplicate class kotlin.DeepRecursiveScopeImpl$crossFunctionCompletion$$inlined$Continuation$1 found in modules jetified-kotlin-stdlib (kotlin-stdlib.jar) and jetified-kotlin-stdlib-1.8.22 (org.jetbrains.kotlin:kotlin-stdlib:1.8.22)\nDuplicate class kotlin.Deprecated found in modules jetified-kotlin-stdlib (kotlin-stdlib.jar) and jetified-kotlin-stdlib-1.8.22 (org.jetbrains.kotlin:kotlin-stdlib:1.8.22)\nDuplicate class kotlin.DeprecatedSinceKotlin found in modules jetified-kotlin-stdlib (kotlin-stdlib.jar) and jetified-kotlin-stdlib-1.8.22 (org.jetbrains.kotlin:kotlin-stdlib:1.8.22)\nDuplicate class kotlin.DeprecationLevel found in modules jetified-kotlin-stdlib (kotlin-stdlib.jar) and jetified-kotlin-stdlib-1.8.22 (org.jetbrains.kotlin:kotlin-stdlib:1.8.22)\nDuplicate class kotlin.DslMarker found in modules jetified-kotlin-stdlib (kotlin-stdlib.jar) and jetified-kotlin-stdlib-1.8.22 (org.jetbrains.kotlin:kotlin-stdlib:1.8.22)\nDuplicate class kotlin.ExceptionsKt found in modules jetified-kotlin-stdlib (kotlin-stdlib.jar) and jetified-kotlin-stdlib-1.8.22 (org.jetbrains.kotlin:kotlin-stdlib:1.8.22)\nDuplicate class kotlin.ExceptionsKt__ExceptionsKt found in modules jetified-kotlin-stdlib (kotlin-stdlib.jar) and jetified-kotlin-stdlib-1.8.22 (org.jetbrains.kotlin:kotlin-stdlib:1.8.22)\nDuplicate class kotlin.ExperimentalMultiplatform found in modules jetified-kotlin-stdlib (kotlin-stdlib.jar) and jetified-kotlin-stdlib-1.8.22 (org.jetbrains.kotlin:kotlin-stdlib:1.8.22)\nDuplicate class kotlin.ExperimentalStdlibApi found in modules jetified-kotlin-stdlib (kotlin-stdlib.jar) and jetified-kotlin-stdlib-1.8.22 (org.jetbrains.kotlin:kotlin-stdlib:1.8.22)\nDuplicate class kotlin.ExperimentalUnsignedTypes found in modules jetified-kotlin-stdlib (kotlin-stdlib.jar) and jetified-kotlin-stdlib-1.8.22 (org.jetbrains.kotlin:kotlin-stdlib:1.8.22)\nDuplicate class kotlin.ExtensionFunctionType found in modules jetified-kotlin-stdlib (kotlin-stdlib.jar) and jetified-kotlin-stdlib-1.8.22 (org.jetbrains.kotlin:kotlin-stdlib:1.8.22)\nDuplicate class kotlin.Function found in modules jetified-kotlin-stdlib (kotlin-stdlib.jar) and jetified-kotlin-stdlib-1.8.22 (org.jetbrains.kotlin:kotlin-stdlib:1.8.22)\nDuplicate class kotlin.HashCodeKt found in modules jetified-kotlin-stdlib (kotlin-stdlib.jar) and jetified-kotlin-stdlib-1.8.22 (org.jetbrains.kotlin:kotlin-stdlib:1.8.22)\nDuplicate class kotlin.InitializedLazyImpl found in modules jetified-kotlin-stdlib (kotlin-stdlib.jar) and jetified-kotlin-stdlib-1.8.22 (org.jetbrains.kotlin:kotlin-stdlib:1.8.22)\nDuplicate class kotlin.KotlinNothingValueException found in modules jetified-kotlin-stdlib (kotlin-stdlib.jar) and jetified-kotlin-stdlib-1.8.22 (org.jetbrains.kotlin:kotlin-stdlib:1.8.22)\nDuplicate class kotlin.KotlinNullPointerException found in modules jetified-kotlin-stdlib (kotlin-stdlib.jar) and jetified-kotlin-stdlib-1.8.22 (org.jetbrains.kotlin:kotlin-stdlib:1.8.22)\nDuplicate class kotlin.KotlinVersion found in modules jetified-kotlin-stdlib (kotlin-stdlib.jar) and jetified-kotlin-stdlib-1.8.22 (org.jetbrains.kotlin:kotlin-stdlib:1.8.22)........................\n</code></pre>\n<h2>What I've tried</h2>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/75263047/duplicate-class-in-kotlin-android\">Duplicate class in Kotlin Android</a></li>\n<li><a href=\"https://youtrack.jetbrains.com/issue/KT-54136/Duplicated-classes-cause-build-failure-if-a-dependency-to-kotlin-stdlib-specified-in-an-android-project\" rel=\"nofollow noreferrer\">https://youtrack.jetbrains.com/issue/KT-54136/Duplicated-classes-cause-build-failure-if-a-dependency-to-kotlin-stdlib-specified-in-an-android-project</a></li>\n<li><a href=\"https://github.com/facebook/react-native/issues/35979\" rel=\"nofollow noreferrer\">https://github.com/facebook/react-native/issues/35979</a>\netc...</li>\n</ul>\n<h2>Enviroment</h2>\n<ul>\n<li>SDK Java11.0.21</li>\n<li>Android GradlePlugin Version 7.2.2</li>\n<li>Gradle Version 7.6.3</li>\n<li>TargetSDK 34</li>\n<li>min SDK 24</li>\n</ul>\n<p>projectRoot</p>\n<pre><code>// Top-level build file where you can add configuration options common to all sub-projects/modules.\n\nplugins {\n    id 'com.android.application' version '7.2.2' apply false\n    id 'com.android.library' version '7.2.2' apply false\n    id 'org.jetbrains.kotlin.android' version '1.8.0' apply false\n}\n\next {\n    defaultTargetSdkVersion = 33\n}\n\ntask clean(type: Delete) {\n    delete rootProject.buildDir\n}\n</code></pre>\n<p>app</p>\n<pre><code>apply plugin: 'com.android.application'\napply plugin: 'org.jetbrains.kotlin.android'\n\ndependencies {\n    implementation project(':unityLibrary')\n    implementation fileTree(dir: project(':unityLibrary').getProjectDir().toString() + ('\\\\libs'), include: ['*.jar'])\n    implementation fileTree(dir: 'libs', include: ['*.jar'])\n    implementation 'androidx.appcompat:appcompat:1.3.1'\n    implementation 'androidx.constraintlayout:constraintlayout:2.1.4'\n    implementation 'com.google.android.material:material:1.4.0'\n    implementation 'io.reactivex.rxjava3:rxandroid:3.0.2'\n    implementation 'io.reactivex.rxjava3:rxjava:3.1.8'\n    implementation project(path: ':unityLibrary')\n    implementation 'androidx.media3:media3-common:1.1.1'\n    implementation 'androidx.core:core-ktx:+'\n    testImplementation 'junit:junit:4.13.1'\n    androidTestImplementation 'androidx.test.ext:junit:1.1.1'\n}\n\n\nandroid {\n\n    compileSdk 34\n\n    defaultConfig {\n        applicationId 'com.Flamers.Memoria'\n        minSdk 24\n        targetSdk 34\n        ndk {\n            abiFilters &quot;armeabi-v7a&quot;, &quot;arm64-v8a&quot;\n        }\n        versionCode 20\n        versionName '1.16.1'\n        testInstrumentationRunner 'androidx.test.runner.AndroidJUnitRunner'\n        signingConfig signingConfigs.debug\n    }\n\n    configurations.all {\n        resolutionStrategy {\n            force 'androidx.test:core:1.5.0'\n        }\n    }\n\n    buildTypes {\n        release {\n            minifyEnabled true\n            shrinkResources true\n            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'\n        }\n    }\n\n    viewBinding {\n        enabled = true\n    }\n\n    buildToolsVersion '33.0.0'\n    namespace 'com.unity.mynativeapp'\n    kotlinOptions {\n        jvmTarget = '11'\n    }\n}\n</code></pre>\n<p>unitylibrary</p>\n<pre><code>apply plugin: 'com.android.library'\n\n\ndependencies {\n    implementation fileTree(dir: 'libs', include: ['*.jar'])\n    implementation(name: 'bugsnag-plugin-android-anr-release', ext:'aar')\n    implementation(name: 'bugsnag-android-release', ext:'aar')\n    implementation(name: 'bugsnag-android-unity-release', ext:'aar')\n    implementation(name: 'OVRPlugin', ext:'aar')\n    implementation(name: 'tobservicelib', ext:'aar')\n    implementation(name: 'audioinaec', ext:'aar')\n    implementation(name: 'bugsnag-android-ndk-release', ext:'aar')\n    implementation project('xrmanifest.androidlib')\n\n}\n\nandroid {\n    ndkPath &quot;C:/Program Files/Unity/Hub/Editor/2022.3.10f1/Editor/Data/PlaybackEngines/AndroidPlayer/NDK&quot;\n\n    compileSdkVersion 33\n    buildToolsVersion '32.0.0'\n\n    compileOptions {\n        sourceCompatibility JavaVersion.VERSION_11\n        targetCompatibility JavaVersion.VERSION_11\n    }\n\n    defaultConfig {\n        minSdkVersion 24\n        targetSdk 34\n        ndk {\n            abiFilters 'armeabi-v7a', 'arm64-v8a'\n        }\n        versionCode 20\n        versionName '1.16.0'\n        consumerProguardFiles 'proguard-unity.txt'\n    }\n\n    lintOptions {\n        abortOnError false\n    }\n\n    aaptOptions {\n        noCompress = ['.unity3d', '.ress', '.resource', '.obb', '.bundle', '.unityexp'] + unityStreamingAssets.tokenize(', ')\n        ignoreAssetsPattern = &quot;!.svn:!.git:!.ds_store:!*.scc:!CVS:!thumbs.db:!picasa.ini:!*~&quot;\n    }\n\n    packagingOptions {\n        doNotStrip '*/armeabi-v7a/*.so'\n        doNotStrip '*/arm64-v8a/*.so'\n    }\n}\n\ndef getSdkDir() {\n    Properties local = new Properties()\n    local.load(new FileInputStream(&quot;${rootDir}/local.properties&quot;))\n    return local.getProperty('sdk.dir')\n}\n\ndef BuildIl2Cpp(String workingDir, String configuration, String architecture, String abi, String[] staticLibraries) {\n    def commandLineArgs = []\n    commandLineArgs.add(&quot;--compile-cpp&quot;)\n    commandLineArgs.add(&quot;--platform=Android&quot;)\n    commandLineArgs.add(&quot;--architecture=&quot; + architecture)\n    commandLineArgs.add(&quot;--outputpath=&quot; + workingDir + &quot;/src/main/jniLibs/&quot; + abi + &quot;/libil2cpp.so&quot;)\n    commandLineArgs.add(&quot;--baselib-directory=&quot; + workingDir + &quot;/src/main/jniStaticLibs/&quot; + abi)\n    commandLineArgs.add(&quot;--incremental-g-c-time-slice=3&quot;)\n    commandLineArgs.add(&quot;--configuration=&quot; + configuration)\n    commandLineArgs.add(&quot;--dotnetprofile=unityaot-linux&quot;)\n    commandLineArgs.add(&quot;--profiler-report&quot;)\n    commandLineArgs.add(&quot;--profiler-output-file=&quot; + workingDir + &quot;/build/il2cpp_&quot;+ abi + &quot;_&quot; + configuration + &quot;/il2cpp_conv.traceevents&quot;)\n    commandLineArgs.add(&quot;--print-command-line&quot;)\n    commandLineArgs.add(&quot;--data-folder=&quot; + workingDir + &quot;/src/main/Il2CppOutputProject/Source/il2cppOutput/data&quot;)\n    commandLineArgs.add(&quot;--generatedcppdir=&quot; + workingDir + &quot;/src/main/Il2CppOutputProject/Source/il2cppOutput&quot;)\n    commandLineArgs.add(&quot;--cachedirectory=&quot; + workingDir + &quot;/build/il2cpp_&quot;+ abi + &quot;_&quot; + configuration + &quot;/il2cpp_cache&quot;)\n    commandLineArgs.add(&quot;--tool-chain-path=&quot; + android.ndkDirectory)\n    staticLibraries.eachWithIndex {fileName, i-&gt;\n        commandLineArgs.add(&quot;--additional-libraries=&quot; + workingDir + &quot;/src/main/jniStaticLibs/&quot; + abi + &quot;/&quot; + fileName)\n    }\n    def executableExtension = &quot;&quot;\n    if (org.gradle.internal.os.OperatingSystem.current().isWindows()) {\n        executableExtension = &quot;.exe&quot;\n        commandLineArgs = commandLineArgs*.replace('\\&quot;', '\\\\\\&quot;')\n    }\n    exec {\n        executable workingDir + &quot;/src/main/Il2CppOutputProject/IL2CPP/build/deploy/il2cpp&quot; + executableExtension\n        args commandLineArgs\n        environment &quot;ANDROID_SDK_ROOT&quot;, getSdkDir()\n    }\n    delete workingDir + &quot;/src/main/jniLibs/&quot; + abi + &quot;/libil2cpp.sym.so&quot;\n    ant.move(file: workingDir + &quot;/src/main/jniLibs/&quot; + abi + &quot;/libil2cpp.dbg.so&quot;, tofile: workingDir + &quot;/symbols/&quot; + abi + &quot;/libil2cpp.so&quot;)\n}\n\nandroid {\n    task BuildIl2CppTask {\n        doLast {\n              BuildIl2Cpp(projectDir.toString().replaceAll('\\\\\\\\', '/'), 'Release', 'armv7', 'armeabi-v7a', [  ] as String[]);\n              BuildIl2Cpp(projectDir.toString().replaceAll('\\\\\\\\', '/'), 'Release', 'arm64', 'arm64-v8a', [  ] as String[]);\n        }\n    }\n    afterEvaluate {\n        if (project(':unityLibrary').tasks.findByName('mergeDebugJniLibFolders'))\n            project(':unityLibrary').mergeDebugJniLibFolders.dependsOn BuildIl2CppTask\n        if (project(':unityLibrary').tasks.findByName('mergeReleaseJniLibFolders'))\n            project(':unityLibrary').mergeReleaseJniLibFolders.dependsOn BuildIl2CppTask\n    }\n    sourceSets {\n        main {\n            jni.srcDirs = [&quot;src/main/Il2CppOutputProject&quot;]\n        }\n    }\n}\n</code></pre>\n<p>Any help getting past this build error would be greatly appreciated!</p>\n"},{"tags":["java","git","rebase","git-commit","jgit"],"comments":[{"owner":{"account_id":2837108,"reputation":27339,"user_id":2437508,"accept_rate":25,"display_name":"eftshift0"},"score":0,"creation_date":1698127407,"post_id":77349707,"comment_id":136362236,"body_markdown":"If that commit existed in that repo that you are working on, then it has been garbage collected. Rebased commits do _not_ link to their original commits (other than perhaps in the comment.... _as a comment_, so no real link there) so it&#39;s no surprise that commit might have ended up in `/dev/null`, so to speak.","body":"If that commit existed in that repo that you are working on, then it has been garbage collected. Rebased commits do <i>not</i> link to their original commits (other than perhaps in the comment.... <i>as a comment</i>, so no real link there) so it&#39;s no surprise that commit might have ended up in <code>&#47;dev&#47;null</code>, so to speak."},{"owner":{"account_id":29739800,"reputation":1,"user_id":22792323,"display_name":"Simon Africa"},"score":0,"creation_date":1698132510,"post_id":77349707,"comment_id":136363052,"body_markdown":"Just for this situation, if you want to get the historical commit information code remotely, what is the way to get it?","body":"Just for this situation, if you want to get the historical commit information code remotely, what is the way to get it?"},{"owner":{"account_id":2837108,"reputation":27339,"user_id":2437508,"accept_rate":25,"display_name":"eftshift0"},"score":0,"creation_date":1698154492,"post_id":77349707,"comment_id":136367062,"body_markdown":"Like, that commit is still reachable through a remote repo? I would _assume_ you still need the information in the local repo for jgit to be able to use it so, you need to *fetch that commit from the remote*, then you should ready to go.","body":"Like, that commit is still reachable through a remote repo? I would <i>assume</i> you still need the information in the local repo for jgit to be able to use it so, you need to <i>fetch that commit from the remote</i>, then you should ready to go."},{"owner":{"account_id":29739800,"reputation":1,"user_id":22792323,"display_name":"Simon Africa"},"score":0,"creation_date":1698241078,"post_id":77349707,"comment_id":136380143,"body_markdown":"The git fetch command will only obtain all commit information in the current state of the remote warehouse. It will not obtain the commit history before the rebase operation. When you perform a git rebase operation on a branch, Git takes every commit on that branch since the upstream branch and reapplies them on the upstream branch, generating a new, identical set of changes. This means that rebase creates new commits and replaces old commits, and these old commits are only deleted by the garbage collector when no other references point to them.","body":"The git fetch command will only obtain all commit information in the current state of the remote warehouse. It will not obtain the commit history before the rebase operation. When you perform a git rebase operation on a branch, Git takes every commit on that branch since the upstream branch and reapplies them on the upstream branch, generating a new, identical set of changes. This means that rebase creates new commits and replaces old commits, and these old commits are only deleted by the garbage collector when no other references point to them."},{"owner":{"account_id":2837108,"reputation":27339,"user_id":2437508,"accept_rate":25,"display_name":"eftshift0"},"score":0,"creation_date":1698259811,"post_id":77349707,"comment_id":136384059,"body_markdown":"I know everything you are saying there.... However, rebasing _locally_ won&#39;t remove _automagically_ those original commits from a remote branch if they were already there, unless you force-pushef, under normal conditions. Did you force-push after rebasing? I don&#39;t know. Even if you did, is there another reference in the remote repo that might expose the old commit? I don&#39;t know. Is there? Let me try again: *if the commit is reachable from a remote repo*, you will still need to fetch to be able to use it on the local repo.","body":"I know everything you are saying there.... However, rebasing <i>locally</i> won&#39;t remove <i>automagically</i> those original commits from a remote branch if they were already there, unless you force-pushef, under normal conditions. Did you force-push after rebasing? I don&#39;t know. Even if you did, is there another reference in the remote repo that might expose the old commit? I don&#39;t know. Is there? Let me try again: <i>if the commit is reachable from a remote repo</i>, you will still need to fetch to be able to use it on the local repo."},{"owner":{"account_id":2837108,"reputation":27339,"user_id":2437508,"accept_rate":25,"display_name":"eftshift0"},"score":0,"creation_date":1698259948,"post_id":77349707,"comment_id":136384089,"body_markdown":"Even if the commit is not reachable on a remote repo where it _used_ to be, you might still get away with it if you have access to the repo and create a reference to that commit *if it hasn&#39;t been garbage collected*. Of course, that&#39;s the kind of things you can do with a repo you hold yourself.... With providers like GitHub and such, I don&#39;t know what trickery might be used to get a reference to an _old_ history of a branch.","body":"Even if the commit is not reachable on a remote repo where it <i>used</i> to be, you might still get away with it if you have access to the repo and create a reference to that commit <i>if it hasn&#39;t been garbage collected</i>. Of course, that&#39;s the kind of things you can do with a repo you hold yourself.... With providers like GitHub and such, I don&#39;t know what trickery might be used to get a reference to an <i>old</i> history of a branch."}],"owner":{"account_id":29739800,"reputation":1,"user_id":22792323,"display_name":"Simon Africa"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1698132335,"creation_date":1698125429,"question_id":77349707,"body_markdown":"A branch has been rebased or reseted, and I want to get the code version of a certain commit before rebase. When I query the commit, an error will be reported\r\n\r\n`org.eclipse.jgit.errors.MissingObjectException: Missing commit b83a1c25a8a630f293fe18090cff1f9a640f0246\r\n\tat org.eclipse.jgit.internal.storage.file.WindowCursor.open(WindowCursor.java:145)\r\n\tat org.eclipse.jgit.revwalk.RevWalk.getCachedBytes(RevWalk.java:1164)\r\n\tat org.eclipse.jgit.revwalk.RevCommit.parseHeaders(RevCommit.java:151)\r\n\tat org.eclipse.jgit.revwalk.RevWalk.markStart(RevWalk.java:325)\r\n\tat org.eclipse.jgit.api.LogCommand.add(LogCommand.java:343)\r\n\tat org.eclipse.jgit.api.LogCommand.add(LogCommand.java:180)\r\n\t`\r\n\r\nThis is part of my code\r\n\r\n    ObjectId objectId = git.getRepository().resolve(currentCommitId);\r\n            if (objectId == null) {\r\n                logger.error(&quot;current commitId is null ，commitId:{}&quot;, currentCommitId);\r\n            }\r\n            RevCommit currentCommit = git.log().add(objectId).setMaxCount(1).call().iterator().next();\r\n\r\n            String baseMasterCommit = &quot;&quot;;\r\n            baseMasterCommit = this.getBaseMasterCommit(git, currentCommit, currentCommitId, baseMasterCommit);\r\n\r\nI tried using git reflog, but after changing the server, the git reflog operation could not find any commit information.","title":"How does Jgit obtain the code diff information of the historical commitid that has been rebased?","body":"<p>A branch has been rebased or reseted, and I want to get the code version of a certain commit before rebase. When I query the commit, an error will be reported</p>\n<p><code>org.eclipse.jgit.errors.MissingObjectException: Missing commit b83a1c25a8a630f293fe18090cff1f9a640f0246 at org.eclipse.jgit.internal.storage.file.WindowCursor.open(WindowCursor.java:145) at org.eclipse.jgit.revwalk.RevWalk.getCachedBytes(RevWalk.java:1164) at org.eclipse.jgit.revwalk.RevCommit.parseHeaders(RevCommit.java:151) at org.eclipse.jgit.revwalk.RevWalk.markStart(RevWalk.java:325) at org.eclipse.jgit.api.LogCommand.add(LogCommand.java:343) at org.eclipse.jgit.api.LogCommand.add(LogCommand.java:180) </code></p>\n<p>This is part of my code</p>\n<pre><code>ObjectId objectId = git.getRepository().resolve(currentCommitId);\n        if (objectId == null) {\n            logger.error(&quot;current commitId is null ，commitId:{}&quot;, currentCommitId);\n        }\n        RevCommit currentCommit = git.log().add(objectId).setMaxCount(1).call().iterator().next();\n\n        String baseMasterCommit = &quot;&quot;;\n        baseMasterCommit = this.getBaseMasterCommit(git, currentCommit, currentCommitId, baseMasterCommit);\n</code></pre>\n<p>I tried using git reflog, but after changing the server, the git reflog operation could not find any commit information.</p>\n"},{"tags":["java","json","game-engine","game-development"],"comments":[{"owner":{"account_id":1937019,"reputation":4428,"user_id":1744230,"accept_rate":100,"display_name":"QBrute"},"score":0,"creation_date":1698132113,"post_id":77350146,"comment_id":136362971,"body_markdown":"Does this answer your question? [How to parse JSON in Java](https://stackoverflow.com/questions/2591098/how-to-parse-json-in-java)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/2591098/how-to-parse-json-in-java\">How to parse JSON in Java</a>"},{"owner":{"account_id":6653984,"reputation":3303,"user_id":5135157,"accept_rate":74,"display_name":"Absinthe"},"score":0,"creation_date":1698333272,"post_id":77350146,"comment_id":136394852,"body_markdown":"So what&#39;s the actual problem?","body":"So what&#39;s the actual problem?"}],"owner":{"account_id":29740633,"reputation":1,"user_id":22792968,"display_name":"Zenpex"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":23,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1698131605,"creation_date":1698131605,"question_id":77350146,"body_markdown":"How can I read them from a json file that looks like or similar to\r\n\r\n[{\r\n    &quot;id&quot;: 1,\r\n    &quot;name&quot;: &quot;Key&quot;,\r\n    &quot;x&quot;: &quot;Milan Kundera&quot;,\r\n    &quot;y&quot;: &quot;The Unbearable Lightness of Being&quot;\r\n    }\r\n}]\r\n\r\n\r\n \r\n\r\n\r\n\r\n\r\n\r\n\r\nHow I currently handle objects and it doesn&#39;t seem to efficient \r\n\r\n```\r\npublic class SuperObject {\r\n\t\r\n\tpublic BufferedImage image;\r\n\tpublic String name;\r\n\tpublic boolean collision = false;\r\n\tpublic int worldX, worldY;\r\n\t\r\n\t/* Draws the images to the screen */\r\n\t\r\n\tpublic void draw(Graphics2D g2, GamePanel gp) {\r\n\t\tint screenX = worldX - gp.player.worldX + gp.player.screenX;\r\n\t\tint screenY = worldY - gp.player.worldY + gp.player.screenY;\r\n\t\t\r\n\t\t\r\n\t\tif (worldX + gp.tileSize &gt; gp.player.worldX - gp.player.screenX &amp;&amp; \r\n\t\t\tworldX - gp.tileSize &lt; gp.player.worldX + gp.player.screenX &amp;&amp;\r\n\t\t\tworldY + gp.tileSize &gt; gp.player.worldY - gp.player.screenY &amp;&amp;\r\n\t\t\tworldY - gp.tileSize &lt; gp.player.worldY + gp.player.screenY) {\r\n\t\t\t\r\n\t\tg2.drawImage(image, screenX, screenY, gp.tileSize, gp.tileSize, null);\t\r\n\t\t\r\n\t\t}\t\r\n\t}\r\n}\r\n```\r\n\r\nand for my individual object class, I will take a key for example\r\n\r\n\r\n```\r\npublic Key() {\r\n\t\t\r\n\t\tname = &quot;Key&quot;;\r\n\t\ttry {\r\n\t\t\timage = ImageIO.read(getClass().getResourceAsStream(&quot;/objects/key.png&quot;));\r\n\t\t\r\n\t\t}catch(IOException e) {\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t}\r\n\r\n}\r\n```\r\n\r\nand to place them on the screen/map or however you want to look at it I have been using this method\r\n\r\n\r\n```\r\npublic class AssetSetter {\r\n\t\r\n\tGamePanel gp;\r\n\t\r\n\tpublic AssetSetter(GamePanel gp) {\r\n\t\tthis.gp = gp;\r\n\t}\r\n\t\r\n\tpublic void setObject() {\r\n\t\tgp.obj[0] = new Key();\r\n\t\tgp.obj[0].worldX = 23 * gp.tileSize;\r\n\t\tgp.obj[0].worldY = 7 * gp.tileSize;\r\n\t\t\r\n\t\tgp.obj[1] = new Key();\r\n\t\tgp.obj[1].worldX = 23 * gp.tileSize;\r\n\t\tgp.obj[1].worldY = 40 * gp.tileSize;\r\n\t\t\r\n\t\tgp.obj[1] = new Key();\r\n\t\tgp.obj[1].worldX = 37 * gp.tileSize;\r\n\t\tgp.obj[1].worldY = 7 * gp.tileSize;\r\n\t}\r\n\r\n}\r\n```","title":"How can I set objects/items in my 2D game using cfg or json files instead of my current method?","body":"<p>How can I read them from a json file that looks like or similar to</p>\n<p>[{\n&quot;id&quot;: 1,\n&quot;name&quot;: &quot;Key&quot;,\n&quot;x&quot;: &quot;Milan Kundera&quot;,\n&quot;y&quot;: &quot;The Unbearable Lightness of Being&quot;\n}\n}]</p>\n<p>How I currently handle objects and it doesn't seem to efficient</p>\n<pre><code>public class SuperObject {\n    \n    public BufferedImage image;\n    public String name;\n    public boolean collision = false;\n    public int worldX, worldY;\n    \n    /* Draws the images to the screen */\n    \n    public void draw(Graphics2D g2, GamePanel gp) {\n        int screenX = worldX - gp.player.worldX + gp.player.screenX;\n        int screenY = worldY - gp.player.worldY + gp.player.screenY;\n        \n        \n        if (worldX + gp.tileSize &gt; gp.player.worldX - gp.player.screenX &amp;&amp; \n            worldX - gp.tileSize &lt; gp.player.worldX + gp.player.screenX &amp;&amp;\n            worldY + gp.tileSize &gt; gp.player.worldY - gp.player.screenY &amp;&amp;\n            worldY - gp.tileSize &lt; gp.player.worldY + gp.player.screenY) {\n            \n        g2.drawImage(image, screenX, screenY, gp.tileSize, gp.tileSize, null);  \n        \n        }   \n    }\n}\n</code></pre>\n<p>and for my individual object class, I will take a key for example</p>\n<pre><code>public Key() {\n        \n        name = &quot;Key&quot;;\n        try {\n            image = ImageIO.read(getClass().getResourceAsStream(&quot;/objects/key.png&quot;));\n        \n        }catch(IOException e) {\n            e.printStackTrace();\n        }\n    }\n\n}\n</code></pre>\n<p>and to place them on the screen/map or however you want to look at it I have been using this method</p>\n<pre><code>public class AssetSetter {\n    \n    GamePanel gp;\n    \n    public AssetSetter(GamePanel gp) {\n        this.gp = gp;\n    }\n    \n    public void setObject() {\n        gp.obj[0] = new Key();\n        gp.obj[0].worldX = 23 * gp.tileSize;\n        gp.obj[0].worldY = 7 * gp.tileSize;\n        \n        gp.obj[1] = new Key();\n        gp.obj[1].worldX = 23 * gp.tileSize;\n        gp.obj[1].worldY = 40 * gp.tileSize;\n        \n        gp.obj[1] = new Key();\n        gp.obj[1].worldX = 37 * gp.tileSize;\n        gp.obj[1].worldY = 7 * gp.tileSize;\n    }\n\n}\n</code></pre>\n"},{"tags":["java","spring","spring-boot","docker","visual-studio-code"],"comments":[{"owner":{"account_id":476019,"reputation":14699,"user_id":886697,"accept_rate":92,"display_name":"Stanislav Bashkyrtsev"},"score":0,"creation_date":1697788285,"post_id":77329103,"comment_id":136326209,"body_markdown":"You mean _test_ containers? They run a docker container too. How do they slow down the build?","body":"You mean <i>test</i> containers? They run a docker container too. How do they slow down the build?"},{"owner":{"account_id":19081660,"reputation":520,"user_id":13933721,"display_name":"Mr. Kenneth"},"score":0,"creation_date":1697788519,"post_id":77329103,"comment_id":136326253,"body_markdown":"I mean **Dev Containers: Add Dev Container Configuration Files** when I do `ctrl + shift + p`  I feel it is slow in general. Also need to reinstall vscode plugins inside docker container.","body":"I mean <b>Dev Containers: Add Dev Container Configuration Files</b> when I do <code>ctrl + shift + p</code>  I feel it is slow in general. Also need to reinstall vscode plugins inside docker container."},{"owner":{"account_id":1100252,"reputation":10087,"user_id":1092818,"display_name":"crizzis"},"score":0,"creation_date":1697795117,"post_id":77329103,"comment_id":136327437,"body_markdown":"What do you mean by &#39;vscode-&gt;maven will always target/execute in container?&#39; Did you expect `VSCode-&gt;maven` to `docker exec` into your container?","body":"What do you mean by &#39;vscode-&gt;maven will always target/execute in container?&#39; Did you expect <code>VSCode-&gt;maven</code> to <code>docker exec</code> into your container?"},{"owner":{"account_id":19081660,"reputation":520,"user_id":13933721,"display_name":"Mr. Kenneth"},"score":0,"creation_date":1698037672,"post_id":77329103,"comment_id":136349580,"body_markdown":"@crizzis. Yes hopefully.","body":"@crizzis. Yes hopefully."},{"owner":{"account_id":25311208,"reputation":7305,"user_id":19133920,"display_name":"JialeDu"},"score":0,"creation_date":1698128406,"post_id":77329103,"comment_id":136362380,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.\n\nPlease see [how to ask](https://stackoverflow.com/help/how-to-ask).\n\n[minimal reproducible example](https://stackoverflow.com/help/minimal-reproducible-example)","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.  Please see <a href=\"https://stackoverflow.com/help/how-to-ask\">how to ask</a>.  <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}],"owner":{"account_id":19081660,"reputation":520,"user_id":13933721,"display_name":"Mr. Kenneth"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":86,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1698131266,"creation_date":1697787482,"question_id":77329103,"body_markdown":"First, I don&#39;t want to use devcontainers since it is slow.(at least for me)\r\n\r\nI got a working docker-compose/Dockerfile for spring boot but I am unable to use vscode&#39;s maven to execute it inside container. \r\n\r\nCurrent status:\r\n\r\n 1. Run maven&#39;s clean\r\n 2. in window&#39;s host&#39;s terminal, automatically runs: `&quot;c:\\...\\project\\mvnw.cmd&quot; clean -f &quot;c:\\...\\project\\pom.mxl&quot;`. \r\n\r\nI don&#39;t want the current state since\r\n 1. In my windows PC, I am using old version of JAVA\r\n 2. I want to use the specific JAVA version inside container (what if I have another project that uses newer or older version of JAVA)\r\n\r\nWhat I would like is either of the following:\r\n\r\n 1. Click maven&#39;s clean runs: `docker exec &lt;container&gt; /../project/mvnw clean`\r\n 2. Somehow change the java_home target of vscode to use docker container/image (maybe via settings.json, idk)\r\n\r\nBelow are the relevant files and settings:\r\n\r\ndocker-compose.yml\r\n\r\n```\r\nversion: &quot;3.8&quot;\r\nservices:\r\n  app:\r\n    container_name: springbootapp-app\r\n    # restart: always\r\n    build: ./docker\r\n    ports:\r\n      - &quot;8080:8080&quot;\r\n      - &quot;5005:5005&quot; # for debugger in container\r\n    tty: true\r\n    volumes:\r\n      - ./project:/var/www/project:cached\r\n      - ./docker/$ENTRY_POINT:/usr/local/bin/entrypoint.sh:cached\r\n      - ./.m2:/root/.m2\r\n```\r\n\r\nDockerfile\r\n```\r\nFROM openjdk:17-jdk-slim-buster\r\n\r\n# WORKDIR\r\nWORKDIR /var/www/project\r\n\r\n#Start application\r\nENTRYPOINT [&quot;/usr/local/bin/entrypoint.sh&quot;]\r\nCMD [&quot;bash&quot;]\r\n```\r\n\r\nentrypoint\r\n```\r\n#!/bin/sh\r\n# You can set here anything you need before starting the spring boot application\r\n\r\nclear\r\nexport JAVA_TOOL_OPTIONS=-Dspring-boot.run.jvmArguments=-agentlib:jdwp=transport=dt_socket,server=y,suspend=n,address=*:5005\r\n./mvnw spring-boot:run # run spring boot on load\r\n```\r\n\r\nWith this setup, containers are up, spring-boot is executed indefinitely, can create crud in windows project and is directly mounted to container, etc. But when I want to use the maven lifecycle (clean, test) it always targets the `pom` file in the Windows host instead of container pom. Is there any `settings.json` option that I can update so that vscode-&gt;maven will always target/execute in container?\r\n\r\nNote: I feel that I also need to change the `JAVA_HOME` to target the java inside the docker container but not important as of now.\r\n","title":"How to use maven lifecycle inside docker","body":"<p>First, I don't want to use devcontainers since it is slow.(at least for me)</p>\n<p>I got a working docker-compose/Dockerfile for spring boot but I am unable to use vscode's maven to execute it inside container.</p>\n<p>Current status:</p>\n<ol>\n<li>Run maven's clean</li>\n<li>in window's host's terminal, automatically runs: <code>&quot;c:\\...\\project\\mvnw.cmd&quot; clean -f &quot;c:\\...\\project\\pom.mxl&quot;</code>.</li>\n</ol>\n<p>I don't want the current state since</p>\n<ol>\n<li>In my windows PC, I am using old version of JAVA</li>\n<li>I want to use the specific JAVA version inside container (what if I have another project that uses newer or older version of JAVA)</li>\n</ol>\n<p>What I would like is either of the following:</p>\n<ol>\n<li>Click maven's clean runs: <code>docker exec &lt;container&gt; /../project/mvnw clean</code></li>\n<li>Somehow change the java_home target of vscode to use docker container/image (maybe via settings.json, idk)</li>\n</ol>\n<p>Below are the relevant files and settings:</p>\n<p>docker-compose.yml</p>\n<pre><code>version: &quot;3.8&quot;\nservices:\n  app:\n    container_name: springbootapp-app\n    # restart: always\n    build: ./docker\n    ports:\n      - &quot;8080:8080&quot;\n      - &quot;5005:5005&quot; # for debugger in container\n    tty: true\n    volumes:\n      - ./project:/var/www/project:cached\n      - ./docker/$ENTRY_POINT:/usr/local/bin/entrypoint.sh:cached\n      - ./.m2:/root/.m2\n</code></pre>\n<p>Dockerfile</p>\n<pre><code>FROM openjdk:17-jdk-slim-buster\n\n# WORKDIR\nWORKDIR /var/www/project\n\n#Start application\nENTRYPOINT [&quot;/usr/local/bin/entrypoint.sh&quot;]\nCMD [&quot;bash&quot;]\n</code></pre>\n<p>entrypoint</p>\n<pre><code>#!/bin/sh\n# You can set here anything you need before starting the spring boot application\n\nclear\nexport JAVA_TOOL_OPTIONS=-Dspring-boot.run.jvmArguments=-agentlib:jdwp=transport=dt_socket,server=y,suspend=n,address=*:5005\n./mvnw spring-boot:run # run spring boot on load\n</code></pre>\n<p>With this setup, containers are up, spring-boot is executed indefinitely, can create crud in windows project and is directly mounted to container, etc. But when I want to use the maven lifecycle (clean, test) it always targets the <code>pom</code> file in the Windows host instead of container pom. Is there any <code>settings.json</code> option that I can update so that vscode-&gt;maven will always target/execute in container?</p>\n<p>Note: I feel that I also need to change the <code>JAVA_HOME</code> to target the java inside the docker container but not important as of now.</p>\n"},{"tags":["java","netbeans","x11","xming"],"comments":[{"owner":{"account_id":441392,"reputation":3406,"user_id":831460,"accept_rate":50,"display_name":"Marek Puchalski"},"score":3,"creation_date":1592981290,"post_id":62548186,"comment_id":110615644,"body_markdown":"Can you please provide the stack trace as text, not as a picture?","body":"Can you please provide the stack trace as text, not as a picture?"},{"owner":{"account_id":74542,"reputation":3561,"user_id":214143,"display_name":"Jason Aller"},"score":1,"creation_date":1593038429,"post_id":62548186,"comment_id":110643623,"body_markdown":"Please don&#39;t use images to include text. Images of text are not searchable, we can&#39;t copy from them to help you, and they aren&#39;t accessible. Please replace them with the text they contain, or augment them with the text they contain.","body":"Please don&#39;t use images to include text. Images of text are not searchable, we can&#39;t copy from them to help you, and they aren&#39;t accessible. Please replace them with the text they contain, or augment them with the text they contain."},{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1687690122,"post_id":62548186,"comment_id":134969148,"body_markdown":"You must read, and report, your error messages accurately. You have it 100% wrong. The X11 DISPLAY variable was *not* set, and this is the problem. The only problem.","body":"You must read, and report, your error messages accurately. You have it 100% wrong. The X11 DISPLAY variable was <i>not</i> set, and this is the problem. The only problem."}],"answers":[{"tags":[],"owner":{"account_id":16399776,"reputation":11,"user_id":11846147,"display_name":"andzun"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1603961675,"creation_date":1603961675,"answer_id":64587758,"question_id":62548186,"body_markdown":"The solution is in the error message: No X11 DISPLAY variable was set, but this program performed an operation which requires it. \r\n\r\nfirst set the DISPLAY variable with this command, than run your program\r\n\r\n    export DISPLAY=yourRemoteHostHere:0.0","title":"How to set &quot;X11 DISPLAY variable was set&quot;?","body":"<p>The solution is in the error message: No X11 DISPLAY variable was set, but this program performed an operation which requires it.</p>\n<p>first set the DISPLAY variable with this command, than run your program</p>\n<pre><code>export DISPLAY=yourRemoteHostHere:0.0\n</code></pre>\n"}],"owner":{"account_id":18918992,"reputation":9,"user_id":13803413,"display_name":"donabela"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":14515,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1698131215,"creation_date":1592975993,"question_id":62548186,"body_markdown":"I&#39;m trying to remote into my raspberry with netbeans in Windows 10, but there is a report like this picture. I have received the following error, and I do not understand it. I see that some X11 DISPLAY variable needs to be set, but what value should I give it and how? I ever to trying with XMING but still same.\r\n\r\nHow can I fix this?\r\n\r\n&gt; Connecting to 192.168.137.75:22\r\ncmd : cd &#39;/home/pi/NetBeansProjects//Gcrypt&#39;; &#39;/usr/bin/java&#39;  -Dfile.encoding=UTF-8   -jar /home/pi/NetBeansProjects//Gcrypt/dist/Gcrypt.jar \r\nException in thread &quot;AWT-EventQueue-0&quot; \r\njava.awt.HeadlessException: \r\nNo X11 DISPLAY variable was set, but this program performed an operation which requires it.\r\nat `java.awt.GraphicsEnvironment.checkHeadless`(GraphicsEnvironment.java:204)\r\nat `java.awt.Window.&lt;init&gt;`(Window.java:536)\r\nat `java.awt.Frame.&lt;init&gt;`(Frame.java:420)\r\nat `java.awt.Frame.&lt;init&gt;`(Frame.java:385)\r\nat `javax.swing.JFrame.&lt;init&gt;`(JFrame.java:189)\r\nat `gui.Main.&lt;init&gt;`(Main.java:21)\r\nat `gui.Main$4.run`(Main.java:162)\r\nat `java.awt.event.InvocationEvent.dispatch`(InvocationEvent.java:311)\r\nat `java.awt.EventQueue.dispatchEventImpl`(EventQueue.java:756)\r\n\tat `java.awt.EventQueue.access$500`(EventQueue.java:97)\r\n\tat `java.awt.EventQueue$3.run`(EventQueue.java:709)\r\n\tat `java.awt.EventQueue$3.run`(EventQueue.java:703)\r\nat `java.security.AccessController.doPrivileged`(Native Method)\r\nat `java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege`(ProtectionDomain.java:76)\r\nat `java.awt.EventQueue.dispatchEvent`(EventQueue.java:726)\r\n\tat `java.awt.EventDispatchThread.pumpOneEventForFilters`(EventDispatchThread.java:201)\r\nat `java.awt.EventDispatchThread.pumpEventsForFilter`(EventDispatchThread.java:116)\r\nat `java.awt.EventDispatchThread.pumpEventsForHierarchy`(EventDispatchThread.java:105)\r\nat `java.awt.EventDispatchThread.pumpEvents`(EventDispatchThread.java:101)\r\n\tat `java.awt.EventDispatchThread.pumpEvents`(EventDispatchThread.java:93)\r\nat `java.awt.EventDispatchThread.run`(EventDispatchThread.java:82)\r\n","title":"How to set &quot;X11 DISPLAY variable was set&quot;?","body":"<p>I'm trying to remote into my raspberry with netbeans in Windows 10, but there is a report like this picture. I have received the following error, and I do not understand it. I see that some X11 DISPLAY variable needs to be set, but what value should I give it and how? I ever to trying with XMING but still same.</p>\n<p>How can I fix this?</p>\n<blockquote>\n<p>Connecting to 192.168.137.75:22\ncmd : cd '/home/pi/NetBeansProjects//Gcrypt'; '/usr/bin/java'  -Dfile.encoding=UTF-8   -jar /home/pi/NetBeansProjects//Gcrypt/dist/Gcrypt.jar\nException in thread &quot;AWT-EventQueue-0&quot;\njava.awt.HeadlessException:\nNo X11 DISPLAY variable was set, but this program performed an operation which requires it.\nat <code>java.awt.GraphicsEnvironment.checkHeadless</code>(GraphicsEnvironment.java:204)\nat <code>java.awt.Window.&lt;init&gt;</code>(Window.java:536)\nat <code>java.awt.Frame.&lt;init&gt;</code>(Frame.java:420)\nat <code>java.awt.Frame.&lt;init&gt;</code>(Frame.java:385)\nat <code>javax.swing.JFrame.&lt;init&gt;</code>(JFrame.java:189)\nat <code>gui.Main.&lt;init&gt;</code>(Main.java:21)\nat <code>gui.Main$4.run</code>(Main.java:162)\nat <code>java.awt.event.InvocationEvent.dispatch</code>(InvocationEvent.java:311)\nat <code>java.awt.EventQueue.dispatchEventImpl</code>(EventQueue.java:756)\nat <code>java.awt.EventQueue.access$500</code>(EventQueue.java:97)\nat <code>java.awt.EventQueue$3.run</code>(EventQueue.java:709)\nat <code>java.awt.EventQueue$3.run</code>(EventQueue.java:703)\nat <code>java.security.AccessController.doPrivileged</code>(Native Method)\nat <code>java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege</code>(ProtectionDomain.java:76)\nat <code>java.awt.EventQueue.dispatchEvent</code>(EventQueue.java:726)\nat <code>java.awt.EventDispatchThread.pumpOneEventForFilters</code>(EventDispatchThread.java:201)\nat <code>java.awt.EventDispatchThread.pumpEventsForFilter</code>(EventDispatchThread.java:116)\nat <code>java.awt.EventDispatchThread.pumpEventsForHierarchy</code>(EventDispatchThread.java:105)\nat <code>java.awt.EventDispatchThread.pumpEvents</code>(EventDispatchThread.java:101)\nat <code>java.awt.EventDispatchThread.pumpEvents</code>(EventDispatchThread.java:93)\nat <code>java.awt.EventDispatchThread.run</code>(EventDispatchThread.java:82)</p>\n</blockquote>\n"},{"tags":["java","apache-spark"],"answers":[{"tags":[],"owner":{"account_id":4766511,"reputation":1175,"user_id":3852499,"display_name":"SanthoshPrasad"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1483961768,"creation_date":1483961417,"answer_id":41547053,"question_id":41543758,"body_markdown":"After converting your input dataframe to datset using encoder/schema,  for doing map operation you no need to convert back Dataset to RDD you can do the map on Dataset it self, the below code may be useful for you\r\n\r\n\r\n    Dataset&lt;InputType&gt; inputDataSet =someDataFrame.as(Encoders.bean(InputType.class))\r\n\r\n\tDataset&lt;OutputType&gt; outputDataSet=inputDataSet.map(new MapFunction&lt;InputType, OutputType&gt;() {\r\n\t\t\t\t@Override\r\n\t\t\t\tpublic OutputType call(InputType  value) throws Exception {\r\n\t\t\t\t\t// TODO Auto-generated method stub\r\n\t\t\t\t\tval someOutPutVal:OutputType=null;\r\n\t\t\t\t\treturn someOutPutVal;\r\n\t\t\t\t}\r\n\t\t\t}, Encoders.bean(OutputType.class));","title":"How&#160;to&#160;convert&#160;javaRDD&#160;to&#160;dataset","body":"<p>After converting your input dataframe to datset using encoder/schema,  for doing map operation you no need to convert back Dataset to RDD you can do the map on Dataset it self, the below code may be useful for you</p>\n\n<pre><code>Dataset&lt;InputType&gt; inputDataSet =someDataFrame.as(Encoders.bean(InputType.class))\n\nDataset&lt;OutputType&gt; outputDataSet=inputDataSet.map(new MapFunction&lt;InputType, OutputType&gt;() {\n            @Override\n            public OutputType call(InputType  value) throws Exception {\n                // TODO Auto-generated method stub\n                val someOutPutVal:OutputType=null;\n                return someOutPutVal;\n            }\n        }, Encoders.bean(OutputType.class));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3519487,"reputation":919,"user_id":2942154,"display_name":"marilena.oita"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1492587349,"creation_date":1492587349,"answer_id":43489368,"question_id":41543758,"body_markdown":"If you really want to follow the transformation using the Person.class, then you need to define a pojo: create a new java class named Person only with getters and setters, hashcode, and equals, toString() methods for the fields that you want to include in your Person object. Is as simple as that, then you can apply `spark.createDataFrame(peopleRDD, Person.class);`\r\n\r\nOr: when you get all fields, package that directly into one Person.\r\n\r\n `public String call(Row row) {}` ... create a Person object here directly:\r\n \r\n\r\n    public Person call(Row row) {}  \r\n\r\nthen you will have a `JavaRDD&lt;Person&gt; resultRDD` .. directly. ","title":"How&#160;to&#160;convert&#160;javaRDD&#160;to&#160;dataset","body":"<p>If you really want to follow the transformation using the Person.class, then you need to define a pojo: create a new java class named Person only with getters and setters, hashcode, and equals, toString() methods for the fields that you want to include in your Person object. Is as simple as that, then you can apply <code>spark.createDataFrame(peopleRDD, Person.class);</code></p>\n\n<p>Or: when you get all fields, package that directly into one Person.</p>\n\n<p><code>public String call(Row row) {}</code> ... create a Person object here directly:</p>\n\n<pre><code>public Person call(Row row) {}  \n</code></pre>\n\n<p>then you will have a <code>JavaRDD&lt;Person&gt; resultRDD</code> .. directly. </p>\n"}],"owner":{"account_id":8691082,"reputation":41,"user_id":6503950,"display_name":"yufan zhang"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":10566,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":2,"score":4,"last_activity_date":1698131215,"creation_date":1483950249,"question_id":41543758,"body_markdown":"\r\nI try to use spark read the data from the Oracle database into dataset, then convert the dataset into javaRDD for map operation, my code can only store the dataset Spark official documents show: http://spark.apache.org/docs/latest/sql-programming-guide.html#inferring-the-schema-using-reflection\r\n \r\n----------\r\n\r\n\r\n    //&#160;Apply&#160;a&#160;schema&#160;to&#160;an&#160;RDD&#160;of&#160;JavaBeans&#160;to&#160;get&#160;a&#160;DataFrame\r\n    Dataset&lt;Row&gt;&#160;peopleDF&#160;=&#160;spark.createDataFrame(peopleRDD,&#160;Person.class);\r\n\r\nOur Data is **read from Oracle**, how to define the&#160;Person.class, to store to convert the rdd to dataset? Or how to using Java directly take map operation for dataset?\r\nWhat&#160;should&#160;I&#160;do&#160;when&#160;my&#160;code&#160;is&#160;like&#160;this\r\n\r\n    import java.math.BigDecimal;\r\n    import java.util.Properties;\r\n    import java.util.Random;\r\n    import org.apache.commons.lang.StringUtils;\r\n    import org.apache.spark.SparkConf;\r\n    import org.apache.spark.api.java.JavaRDD;\r\n    import org.apache.spark.api.java.function.Function;\r\n    import org.apache.spark.sql.Dataset;\r\n    import org.apache.spark.sql.Row;\r\n    import org.apache.spark.sql.SaveMode;\r\n    import org.apache.spark.sql.SparkSession;\r\n    public class FlatMapTest {\r\n    \tpublic static void main(String[] args) {\r\n    \t\tSparkConf conf = new SparkConf();\r\n    \t\tconf.set(&quot;spark.sql.warehouse.dir&quot;, &quot;./spark-warehouse&quot;);\r\n    \t\tSparkSession spark = SparkSession.builder().master(&quot;local[3]&quot;).config(conf)\r\n    \t\t\t\t.appName(&quot;Java Spark SQL data sources example&quot;).getOrCreate();\r\n    \r\n    \t\tjdbcDataSource(spark);\r\n    \r\n    \t}\r\n    \r\n    \tpublic static void jdbcDataSource(SparkSession spark) {\r\n    \t\t// 连接到数据库，获得DF对象,DF对象封装了数据库的表信息数据\r\n    \t\tDataset&lt;Row&gt; jdbcDF = spark.read().format(&quot;jdbc&quot;)\r\n    \t\t\t\t.option(&quot;driver&quot;, &quot;oracle.jdbc.driver.OracleDriver&quot;)\r\n    \t\t\t\t.option(&quot;url&quot;, &quot;jdbc:oracle:thin:@192.168.101.207:1521:orcl&quot;)\r\n    \t\t\t\t.option(&quot;dbtable&quot;, &quot;datamask&quot;)\r\n    \t\t\t\t.option(&quot;user&quot;, &quot;scott&quot;)\r\n    \t\t\t\t.option(&quot;password&quot;, &quot;tiger&quot;).load();\r\n    \t\t/*\r\n    \t\t * 创建临时表 datamask\r\n    \t\t */\r\n    \t\tjdbcDF.createOrReplaceTempView(&quot;datamask&quot;);\r\n    \t\tDataset&lt;Row&gt; sqlDF = spark.sql(&quot;select * from datamask&quot;);\r\n    \t\t\r\n    \t\t\r\n    \t\tJavaRDD&lt;Object&gt; resultRDD = sqlDF.toJavaRDD().map(\r\n    \t\t\t\tnew Function&lt;Row, Object&gt;() {\r\n    \r\n    \t\t\t\t\tpublic String call(Row row) throws Exception {\r\n    \t\t\t\t\t\tRandom ran = new Random(); \r\n    \t\t\t\t\t\tint r = ran.nextInt(9001) + 1000;\r\n    \t\t\t\t\t\t/*\r\n    \t\t\t\t\t\t * 将每个字段的后4位替换为随机数，替换规则可以自己设定\r\n    \t\t\t\t\t\t */\r\n    \t\t\t\t\t\tString userName = row.getAs(&quot;USER_NAME&quot;);\r\n    \t\t\t\t\t\tuserName = StringUtils.replace(userName,\r\n    \t\t\t\t\t\t\t\tStringUtils.right(userName, 4), &quot;&quot; + r);\r\n    \r\n    \t\t\t\t\t\tString loginName = row.getAs(&quot;LOGIN_NAME&quot;);// LOGIN_NAME为数据库字段名，下同\r\n    \t\t\t\t\t\tloginName = StringUtils.replace(loginName,\r\n    \t\t\t\t\t\t\t\tStringUtils.right(loginName, 4), &quot;&quot; + r);\r\n    \t\t\t\t\t\tString countyCode = row.getAs(&quot;COUNTY_CODE&quot;);\r\n    \t\t\t\t\t\tcountyCode = StringUtils.replace(countyCode,\r\n    \t\t\t\t\t\t\t\tStringUtils.right(countyCode, 4), &quot;&quot; + r);\r\n    \t\t\t\t\t\tString passwd = row.getAs(&quot;PASSWORD&quot;);\r\n    \t\t\t\t\t\tpasswd = StringUtils.replace(passwd,\r\n    \t\t\t\t\t\t\t\tStringUtils.right(passwd, 4), &quot;&quot; + r);\r\n    \t\t\t\t\t\tString areaId = row.getAs(&quot;AREA_ID&quot;);\r\n    \t\t\t\t\t\tareaId = StringUtils.replace(areaId,\r\n    \t\t\t\t\t\t\t\tStringUtils.right(areaId, 4), &quot;&quot; + r);\r\n    \t\t\t\t\t\tString cityNo = row.getAs(&quot;CITY_NO&quot;);\r\n    \t\t\t\t\t\tcityNo = StringUtils.replace(cityNo,\r\n    \t\t\t\t\t\t\t\tStringUtils.right(cityNo, 4), &quot;&quot; + r);\r\n    \t\t\t\t\t\tString cardID = row.getAs(&quot;CARD_ID&quot;);\r\n    \t\t\t\t\t\tcardID = StringUtils.replace(cardID,\r\n    \t\t\t\t\t\t\t\tStringUtils.right(cardID, 4), &quot;&quot; + r);\r\n    \t\t\t\t\t\tString mobile = row.getAs(&quot;MOBILE&quot;);\r\n    \t\t\t\t\t\tmobile = StringUtils.replace(mobile,\r\n    \t\t\t\t\t\t\t\tStringUtils.right(mobile, 4), &quot;&quot; + r);\r\n    \t\t\t\t\t\tString email = row.getAs(&quot;EMAIL&quot;);\r\n    \t\t\t\t\t\temail = StringUtils.replace(email,\r\n    \t\t\t\t\t\t\t\tStringUtils.right(email, 4), &quot;&quot; + r);\r\n    \t\t\t\t\t\tBigDecimal big = row.getAs(&quot;QQ&quot;);\r\n    \t\t\t\t\t\tString qq = big.toString();\r\n    \t\t\t\t\t\tqq = StringUtils.replace(qq, StringUtils.right(qq, 4),\r\n    \t\t\t\t\t\t\t\t&quot;&quot; + r);\r\n    \t\t\t\t\t\tString addr = row.getAs(&quot;ADDR&quot;);\r\n    \t\t\t\t\t\taddr = StringUtils.replace(addr,\r\n    \t\t\t\t\t\t\t\tStringUtils.right(addr, 4), &quot;&quot; + r);\r\n    \t\t\t\t\t\tString birthday = row.getAs(&quot;BIRTHDAY&quot;);\r\n    \t\t\t\t\t\tbirthday = StringUtils.replace(birthday,\r\n    \t\t\t\t\t\t\t\tStringUtils.right(birthday, 4), &quot;&quot; + r);\r\n    \t\t\t\t\t\tString birthday1 = row.getAs(&quot;BIRTHDAY1&quot;);\r\n    \t\t\t\t\t\tbirthday1 = StringUtils.replace(birthday1,\r\n    \t\t\t\t\t\t\t\tStringUtils.right(birthday1, 4), &quot;&quot; + r);\r\n    \t\t\t\t\t\tString codeId = row.getAs(&quot;CODE_ID&quot;);\r\n    \t\t\t\t\t\tcodeId = StringUtils.replace(codeId,\r\n    \t\t\t\t\t\t\t\tStringUtils.right(codeId, 4), &quot;&quot; + r);\r\n    \t\t\t\t\t\tString deptNo = row.getAs(&quot;DEPT_NO&quot;);\r\n    \t\t\t\t\t\tdeptNo = StringUtils.replace(deptNo,\r\n    \t\t\t\t\t\t\t\tStringUtils.right(deptNo, 4), &quot;&quot; + r);\r\n    \t\t\t\t\t\tString newCode = row.getAs(&quot;NEW_CODE&quot;);\r\n    \t\t\t\t\t\tnewCode = StringUtils.replace(newCode,\r\n    \t\t\t\t\t\t\t\tStringUtils.right(newCode, 4), &quot;&quot; + r);\r\n    \t\t\t\t\t\tString oldCode = row.getAs(&quot;OLD_CODE&quot;);\r\n    \t\t\t\t\t\toldCode = StringUtils.replace(oldCode,\r\n    \t\t\t\t\t\t\t\tStringUtils.right(oldCode, 4), &quot;&quot; + r);\r\n    \t\t\t\t\t\treturn loginName + &quot;,&quot; + countyCode + &quot;,&quot; + passwd\r\n    \t\t\t\t\t\t\t\t+ &quot;,&quot; + areaId + &quot;,&quot; + cityNo + &quot;,&quot; + cardID\r\n    \t\t\t\t\t\t\t\t+ &quot;,&quot; + mobile + &quot;,&quot; + email + &quot;,&quot; + qq + &quot;,&quot;\r\n    \t\t\t\t\t\t\t\t+ addr + &quot;,&quot; + birthday + &quot;,&quot; + &quot;,&quot; + birthday1\r\n    \t\t\t\t\t\t\t\t+ &quot;,&quot; + codeId + &quot;,&quot; + deptNo + &quot;,&quot; + newCode\r\n    \t\t\t\t\t\t\t\t+ &quot;,&quot; + oldCode;\r\n    \t\t\t\t\t}\r\n    \r\n    \t\t\t\t});\r\n    \t\tDataset&lt;Row&gt; peopleDF = spark.createDataFrame(resultRDD, Object.class);\r\n    \r\n    \t\tString url2 = &quot;jdbc:oracle:thin:@192.168.101.207:1521:orcl&quot;;  \r\n    \t\tProperties connectionProperties2 = new Properties();  \r\n    \t\tconnectionProperties2.setProperty(&quot;user&quot;, &quot;scott&quot;);// 设置用户名  \r\n    \t\tconnectionProperties2.setProperty(&quot;password&quot;, &quot;tiger&quot;);// 设置密码  \r\n    \t\tString table2 = &quot;masked1&quot;;\r\n    \r\n    \t\tpeopleDF.write().mode(SaveMode.Append)  \r\n    \t\t.jdbc(url2, table2, connectionProperties2); \r\n    \r\n    \t}\r\n    }\r\n\r\n","title":"How&#160;to&#160;convert&#160;javaRDD&#160;to&#160;dataset","body":"<p>I try to use spark read the data from the Oracle database into dataset, then convert the dataset into javaRDD for map operation, my code can only store the dataset Spark official documents show: <a href=\"http://spark.apache.org/docs/latest/sql-programming-guide.html#inferring-the-schema-using-reflection\" rel=\"nofollow noreferrer\">http://spark.apache.org/docs/latest/sql-programming-guide.html#inferring-the-schema-using-reflection</a></p>\n\n<hr>\n\n<pre><code>// Apply a schema to an RDD of JavaBeans to get a DataFrame\nDataset&lt;Row&gt; peopleDF = spark.createDataFrame(peopleRDD, Person.class);\n</code></pre>\n\n<p>Our Data is <strong>read from Oracle</strong>, how to define the Person.class, to store to convert the rdd to dataset? Or how to using Java directly take map operation for dataset?\nWhat should I do when my code is like this</p>\n\n<pre><code>import java.math.BigDecimal;\nimport java.util.Properties;\nimport java.util.Random;\nimport org.apache.commons.lang.StringUtils;\nimport org.apache.spark.SparkConf;\nimport org.apache.spark.api.java.JavaRDD;\nimport org.apache.spark.api.java.function.Function;\nimport org.apache.spark.sql.Dataset;\nimport org.apache.spark.sql.Row;\nimport org.apache.spark.sql.SaveMode;\nimport org.apache.spark.sql.SparkSession;\npublic class FlatMapTest {\n    public static void main(String[] args) {\n        SparkConf conf = new SparkConf();\n        conf.set(\"spark.sql.warehouse.dir\", \"./spark-warehouse\");\n        SparkSession spark = SparkSession.builder().master(\"local[3]\").config(conf)\n                .appName(\"Java Spark SQL data sources example\").getOrCreate();\n\n        jdbcDataSource(spark);\n\n    }\n\n    public static void jdbcDataSource(SparkSession spark) {\n        // 连接到数据库，获得DF对象,DF对象封装了数据库的表信息数据\n        Dataset&lt;Row&gt; jdbcDF = spark.read().format(\"jdbc\")\n                .option(\"driver\", \"oracle.jdbc.driver.OracleDriver\")\n                .option(\"url\", \"jdbc:oracle:thin:@192.168.101.207:1521:orcl\")\n                .option(\"dbtable\", \"datamask\")\n                .option(\"user\", \"scott\")\n                .option(\"password\", \"tiger\").load();\n        /*\n         * 创建临时表 datamask\n         */\n        jdbcDF.createOrReplaceTempView(\"datamask\");\n        Dataset&lt;Row&gt; sqlDF = spark.sql(\"select * from datamask\");\n\n\n        JavaRDD&lt;Object&gt; resultRDD = sqlDF.toJavaRDD().map(\n                new Function&lt;Row, Object&gt;() {\n\n                    public String call(Row row) throws Exception {\n                        Random ran = new Random(); \n                        int r = ran.nextInt(9001) + 1000;\n                        /*\n                         * 将每个字段的后4位替换为随机数，替换规则可以自己设定\n                         */\n                        String userName = row.getAs(\"USER_NAME\");\n                        userName = StringUtils.replace(userName,\n                                StringUtils.right(userName, 4), \"\" + r);\n\n                        String loginName = row.getAs(\"LOGIN_NAME\");// LOGIN_NAME为数据库字段名，下同\n                        loginName = StringUtils.replace(loginName,\n                                StringUtils.right(loginName, 4), \"\" + r);\n                        String countyCode = row.getAs(\"COUNTY_CODE\");\n                        countyCode = StringUtils.replace(countyCode,\n                                StringUtils.right(countyCode, 4), \"\" + r);\n                        String passwd = row.getAs(\"PASSWORD\");\n                        passwd = StringUtils.replace(passwd,\n                                StringUtils.right(passwd, 4), \"\" + r);\n                        String areaId = row.getAs(\"AREA_ID\");\n                        areaId = StringUtils.replace(areaId,\n                                StringUtils.right(areaId, 4), \"\" + r);\n                        String cityNo = row.getAs(\"CITY_NO\");\n                        cityNo = StringUtils.replace(cityNo,\n                                StringUtils.right(cityNo, 4), \"\" + r);\n                        String cardID = row.getAs(\"CARD_ID\");\n                        cardID = StringUtils.replace(cardID,\n                                StringUtils.right(cardID, 4), \"\" + r);\n                        String mobile = row.getAs(\"MOBILE\");\n                        mobile = StringUtils.replace(mobile,\n                                StringUtils.right(mobile, 4), \"\" + r);\n                        String email = row.getAs(\"EMAIL\");\n                        email = StringUtils.replace(email,\n                                StringUtils.right(email, 4), \"\" + r);\n                        BigDecimal big = row.getAs(\"QQ\");\n                        String qq = big.toString();\n                        qq = StringUtils.replace(qq, StringUtils.right(qq, 4),\n                                \"\" + r);\n                        String addr = row.getAs(\"ADDR\");\n                        addr = StringUtils.replace(addr,\n                                StringUtils.right(addr, 4), \"\" + r);\n                        String birthday = row.getAs(\"BIRTHDAY\");\n                        birthday = StringUtils.replace(birthday,\n                                StringUtils.right(birthday, 4), \"\" + r);\n                        String birthday1 = row.getAs(\"BIRTHDAY1\");\n                        birthday1 = StringUtils.replace(birthday1,\n                                StringUtils.right(birthday1, 4), \"\" + r);\n                        String codeId = row.getAs(\"CODE_ID\");\n                        codeId = StringUtils.replace(codeId,\n                                StringUtils.right(codeId, 4), \"\" + r);\n                        String deptNo = row.getAs(\"DEPT_NO\");\n                        deptNo = StringUtils.replace(deptNo,\n                                StringUtils.right(deptNo, 4), \"\" + r);\n                        String newCode = row.getAs(\"NEW_CODE\");\n                        newCode = StringUtils.replace(newCode,\n                                StringUtils.right(newCode, 4), \"\" + r);\n                        String oldCode = row.getAs(\"OLD_CODE\");\n                        oldCode = StringUtils.replace(oldCode,\n                                StringUtils.right(oldCode, 4), \"\" + r);\n                        return loginName + \",\" + countyCode + \",\" + passwd\n                                + \",\" + areaId + \",\" + cityNo + \",\" + cardID\n                                + \",\" + mobile + \",\" + email + \",\" + qq + \",\"\n                                + addr + \",\" + birthday + \",\" + \",\" + birthday1\n                                + \",\" + codeId + \",\" + deptNo + \",\" + newCode\n                                + \",\" + oldCode;\n                    }\n\n                });\n        Dataset&lt;Row&gt; peopleDF = spark.createDataFrame(resultRDD, Object.class);\n\n        String url2 = \"jdbc:oracle:thin:@192.168.101.207:1521:orcl\";  \n        Properties connectionProperties2 = new Properties();  \n        connectionProperties2.setProperty(\"user\", \"scott\");// 设置用户名  \n        connectionProperties2.setProperty(\"password\", \"tiger\");// 设置密码  \n        String table2 = \"masked1\";\n\n        peopleDF.write().mode(SaveMode.Append)  \n        .jdbc(url2, table2, connectionProperties2); \n\n    }\n}\n</code></pre>\n"},{"tags":["java","ansible","environment-variables"],"comments":[{"owner":{"account_id":27447899,"reputation":51,"user_id":20941018,"display_name":"Timur Gadiev"},"score":0,"creation_date":1698094046,"post_id":77314750,"comment_id":136359376,"body_markdown":"I believe, you should take a look at [this answer](https://stackoverflow.com/questions/35988567/ansible-doesnt-load-profile).","body":"I believe, you should take a look at <a href=\"https://stackoverflow.com/questions/35988567/ansible-doesnt-load-profile\">this answer</a>."}],"answers":[{"tags":[],"owner":{"account_id":4390047,"reputation":161,"user_id":3578776,"accept_rate":20,"display_name":"grizzo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1698130915,"creation_date":1698130915,"answer_id":77350082,"question_id":77314750,"body_markdown":"I&#39;ve eventually solved this by writing the env variables in a .bash_profile file on the host machine.\r\n\r\n    - name: Set environmental variables\r\n      become: yes\r\n      blockinfile:\r\n        path: &quot;/[path]/.bash_profile&quot;\r\n        state: present\r\n        block: |\r\n          export JAVA_HOME=&quot;{{path_to_jdk}}&quot;\r\n          export PATH=$PATH:JAVA_HOME/bin:$PATH\r\n\r\nAnd then used the env vars for a specific task that I needed to run:\r\n\r\n    - name: Perform task\r\n      shell: source /[path]/.bash_profile &amp;&amp; command.sh\r\n      args:\r\n        executable: /bin/bash\r\n        become: true\r\n\r\nThis probably doesn&#39;t permanently set these env variables for the rest of the playbook&#39;s tasks but it might be viable for one or two tasks.\r\n\r\n        \r\n\r\n","title":"Executable not found after setting environmental variables in Ansible Playbook","body":"<p>I've eventually solved this by writing the env variables in a .bash_profile file on the host machine.</p>\n<pre><code>- name: Set environmental variables\n  become: yes\n  blockinfile:\n    path: &quot;/[path]/.bash_profile&quot;\n    state: present\n    block: |\n      export JAVA_HOME=&quot;{{path_to_jdk}}&quot;\n      export PATH=$PATH:JAVA_HOME/bin:$PATH\n</code></pre>\n<p>And then used the env vars for a specific task that I needed to run:</p>\n<pre><code>- name: Perform task\n  shell: source /[path]/.bash_profile &amp;&amp; command.sh\n  args:\n    executable: /bin/bash\n    become: true\n</code></pre>\n<p>This probably doesn't permanently set these env variables for the rest of the playbook's tasks but it might be viable for one or two tasks.</p>\n"}],"owner":{"account_id":4390047,"reputation":161,"user_id":3578776,"accept_rate":20,"display_name":"grizzo"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77350082,"answer_count":1,"score":0,"last_activity_date":1698130915,"creation_date":1697618502,"question_id":77314750,"body_markdown":"I need to deploy a bunch of machines from Ansible, these machines need to execute a suite of programs that run on the JVM and one hard requisite is that **I need to deploy the JDK** **from a tar.gz** without leveraging RedHat&#39;s repositories.\r\n\r\nSo I need to define an environment variable to the JDK&#39;s folder on my hosts and I tried to achieve this with these tasks:\r\n\r\n```\r\n- name: Set JDK environment variables\r\n  become: yes\r\n  lineinfile: \r\n    path: /etc/profile\r\n    state: present\r\n    line:&quot;{{item}}&quot;\r\n  with_items:\r\n    - &#39;export JAVA_HOME=&quot;{{java_dir}}&quot;&#39;\r\n    - &#39;export PATH=$PATH;$JAVA_HOME/bin:$PATH&#39;\r\n\r\n- name: Reload environment variables\r\n  shell:\r\n    cmd: source /etc/profile\r\n```\r\n\r\nAt this point the variables seem to be correctly set on the system, because if I login into any of the machines the `java --version` command works.\r\n\r\nNow when the playbook tries to execute a task that needs to be run from the JVM I get this error:\r\n\r\n```\r\nfatal: [hostname]: FAILED! =&gt; {\r\n    &quot;changed&quot;: true,\r\n    &quot;cmd&quot;: [\r\n        &quot;./kafka-storage.sh&quot;,\r\n        &quot;random-uuid&quot;\r\n    ],\r\n    .....\r\n    .....\r\n    .....\r\n}\r\n\r\nSTDERR:\r\n\r\n/opt/kafka/bin/kafka-run-class.sh line 346: exec : java: not found\r\n\r\nMSG:\r\n\r\nnon-zero return code\r\n```\r\n\r\nPlease keep in mind this playbook used to install the JDK from the internal repositories and everything worked flawlessly so this can&#39;t be the fault of Kafka&#39;s executable.\r\n\r\nI tried to make sure that they can be seen from Ansible I also perform this task that adds this path to the user&#39;s home that Ansible is operating with:\r\n\r\n```\r\n- name: Set JDK environment for next tasks\r\n  become: yes\r\n  lineinfile: \r\n    path: /home/user/.bashrc\r\n    state: present\r\n    line:&quot;{{item}}&quot;\r\n  with_items:\r\n    - &#39;export JAVA_HOME=&quot;{{java_dir}}&quot;&#39;\r\n    - &#39;export PATH=$PATH;$JAVA_HOME/bin:$PATH&#39;\r\n```\r\n\r\nBut still the Kafka executable can&#39;t find Java&#39;s folder.","title":"Executable not found after setting environmental variables in Ansible Playbook","body":"<p>I need to deploy a bunch of machines from Ansible, these machines need to execute a suite of programs that run on the JVM and one hard requisite is that <strong>I need to deploy the JDK</strong> <strong>from a tar.gz</strong> without leveraging RedHat's repositories.</p>\n<p>So I need to define an environment variable to the JDK's folder on my hosts and I tried to achieve this with these tasks:</p>\n<pre><code>- name: Set JDK environment variables\n  become: yes\n  lineinfile: \n    path: /etc/profile\n    state: present\n    line:&quot;{{item}}&quot;\n  with_items:\n    - 'export JAVA_HOME=&quot;{{java_dir}}&quot;'\n    - 'export PATH=$PATH;$JAVA_HOME/bin:$PATH'\n\n- name: Reload environment variables\n  shell:\n    cmd: source /etc/profile\n</code></pre>\n<p>At this point the variables seem to be correctly set on the system, because if I login into any of the machines the <code>java --version</code> command works.</p>\n<p>Now when the playbook tries to execute a task that needs to be run from the JVM I get this error:</p>\n<pre><code>fatal: [hostname]: FAILED! =&gt; {\n    &quot;changed&quot;: true,\n    &quot;cmd&quot;: [\n        &quot;./kafka-storage.sh&quot;,\n        &quot;random-uuid&quot;\n    ],\n    .....\n    .....\n    .....\n}\n\nSTDERR:\n\n/opt/kafka/bin/kafka-run-class.sh line 346: exec : java: not found\n\nMSG:\n\nnon-zero return code\n</code></pre>\n<p>Please keep in mind this playbook used to install the JDK from the internal repositories and everything worked flawlessly so this can't be the fault of Kafka's executable.</p>\n<p>I tried to make sure that they can be seen from Ansible I also perform this task that adds this path to the user's home that Ansible is operating with:</p>\n<pre><code>- name: Set JDK environment for next tasks\n  become: yes\n  lineinfile: \n    path: /home/user/.bashrc\n    state: present\n    line:&quot;{{item}}&quot;\n  with_items:\n    - 'export JAVA_HOME=&quot;{{java_dir}}&quot;'\n    - 'export PATH=$PATH;$JAVA_HOME/bin:$PATH'\n</code></pre>\n<p>But still the Kafka executable can't find Java's folder.</p>\n"},{"tags":["java","list"],"comments":[{"owner":{"account_id":956558,"reputation":30924,"user_id":981744,"display_name":"Erwin Bolwidt"},"score":3,"creation_date":1500901802,"post_id":45281454,"comment_id":77525397,"body_markdown":"`ListUtils` is not a standard Java API class. Are you referring to the apache-commons ListUtils class? If so, please edit your question to make that clear.","body":"<code>ListUtils</code> is not a standard Java API class. Are you referring to the apache-commons ListUtils class? If so, please edit your question to make that clear."},{"owner":{"account_id":956558,"reputation":30924,"user_id":981744,"display_name":"Erwin Bolwidt"},"score":0,"creation_date":1500901879,"post_id":45281454,"comment_id":77525470,"body_markdown":"@Bit Who says that this OP is using Guava? Your duplicate is a question that specifically asks about Guava and the answer is also using Guava","body":"@Bit Who says that this OP is using Guava? Your duplicate is a question that specifically asks about Guava and the answer is also using Guava"},{"owner":{"account_id":536567,"reputation":7838,"user_id":905488,"display_name":"Mick Mnemonic"},"score":0,"creation_date":1500901911,"post_id":45281454,"comment_id":77525496,"body_markdown":"@ErwinBolwidt, the dupe also has a native Java 8 solution.","body":"@ErwinBolwidt, the dupe also has a native Java 8 solution."},{"owner":{"account_id":956558,"reputation":30924,"user_id":981744,"display_name":"Erwin Bolwidt"},"score":0,"creation_date":1500902017,"post_id":45281454,"comment_id":77525573,"body_markdown":"@MickMnemonic The dupe is providing answers how to create Iterables, not Lists as this OP is asking.","body":"@MickMnemonic The dupe is providing answers how to create Iterables, not Lists as this OP is asking."},{"owner":{"account_id":536567,"reputation":7838,"user_id":905488,"display_name":"Mick Mnemonic"},"score":0,"creation_date":1500902204,"post_id":45281454,"comment_id":77525735,"body_markdown":"A `List` is an `Iterable`, right? There isn&#39;t really a difference in the context of this question.","body":"A <code>List</code> is an <code>Iterable</code>, right? There isn&#39;t really a difference in the context of this question."},{"owner":{"account_id":956558,"reputation":30924,"user_id":981744,"display_name":"Erwin Bolwidt"},"score":1,"creation_date":1500902249,"post_id":45281454,"comment_id":77525769,"body_markdown":"@MickMnemonic An Animal is a Cat too?","body":"@MickMnemonic An Animal is a Cat too?"},{"owner":{"account_id":536567,"reputation":7838,"user_id":905488,"display_name":"Mick Mnemonic"},"score":0,"creation_date":1500902346,"post_id":45281454,"comment_id":77525844,"body_markdown":"This is a duplicate of [Combine multiple Collections into a single logical Collection?](https://stackoverflow.com/questions/4896662/combine-multiple-collections-into-a-single-logical-collection). It was already closed as a dupe once, but for some reason reopened.","body":"This is a duplicate of <a href=\"https://stackoverflow.com/questions/4896662/combine-multiple-collections-into-a-single-logical-collection\">Combine multiple Collections into a single logical Collection?</a>. It was already closed as a dupe once, but for some reason reopened."},{"owner":{"account_id":956558,"reputation":30924,"user_id":981744,"display_name":"Erwin Bolwidt"},"score":1,"creation_date":1500902564,"post_id":45281454,"comment_id":77525991,"body_markdown":"@MickMnemonic No it is not. I didn&#39;t reopen it - I think Ghostcat did himself after he realized this isn&#39;t a correct duplicate. If someone asks how to combine Lists without mentioning a particular library, then a question that asks and is answered how to combine Iterables using Guava is **not** a correct duplicate.","body":"@MickMnemonic No it is not. I didn&#39;t reopen it - I think Ghostcat did himself after he realized this isn&#39;t a correct duplicate. If someone asks how to combine Lists without mentioning a particular library, then a question that asks and is answered how to combine Iterables using Guava is <b>not</b> a correct duplicate."},{"owner":{"account_id":536567,"reputation":7838,"user_id":905488,"display_name":"Mick Mnemonic"},"score":0,"creation_date":1500902980,"post_id":45281454,"comment_id":77526281,"body_markdown":"@ErwinBolwidt, again, if you look at the answers in the linked question, only one of them uses Guava, and there are native Java 8/7 solutions as well. The question is also the first Google hit for &quot;Combine multiple lists in Java&quot;. I don&#39;t see how this question is not a duplicate. Maybe you can write an answer to prove me wrong?","body":"@ErwinBolwidt, again, if you look at the answers in the linked question, only one of them uses Guava, and there are native Java 8/7 solutions as well. The question is also the first Google hit for &quot;Combine multiple lists in Java&quot;. I don&#39;t see how this question is not a duplicate. Maybe you can write an answer to prove me wrong?"},{"owner":{"account_id":7651254,"reputation":1257,"user_id":6743127,"accept_rate":100,"display_name":"Fabian R&#246;ling"},"score":0,"creation_date":1500917355,"post_id":45281454,"comment_id":77535523,"body_markdown":"@ErwinBolwidt I didn&#39;t know that it&#39;s not standard Java. I use an Eclipse version from a company intranet page, adjusted to my needs. I don&#39;t know all details of it. Tomorrow I&#39;ll look at the import.","body":"@ErwinBolwidt I didn&#39;t know that it&#39;s not standard Java. I use an Eclipse version from a company intranet page, adjusted to my needs. I don&#39;t know all details of it. Tomorrow I&#39;ll look at the import."},{"owner":{"account_id":7651254,"reputation":1257,"user_id":6743127,"accept_rate":100,"display_name":"Fabian R&#246;ling"},"score":0,"creation_date":1500967172,"post_id":45281454,"comment_id":77554455,"body_markdown":"Yes, it is the import from Apache.","body":"Yes, it is the import from Apache."},{"owner":{"account_id":7651254,"reputation":1257,"user_id":6743127,"accept_rate":100,"display_name":"Fabian R&#246;ling"},"score":1,"creation_date":1500976408,"post_id":45281454,"comment_id":77560996,"body_markdown":"Since people seem to have come to the conclusion now that this is not a duplicate question, can someone please tell me why it&#39;s still considered a bad question? It has two downvotes.","body":"Since people seem to have come to the conclusion now that this is not a duplicate question, can someone please tell me why it&#39;s still considered a bad question? It has two downvotes."},{"owner":{"account_id":7651254,"reputation":1257,"user_id":6743127,"accept_rate":100,"display_name":"Fabian R&#246;ling"},"score":0,"creation_date":1509625359,"post_id":45281454,"comment_id":81098608,"body_markdown":"My first &quot;popular question&quot; badge and the question in question has a negative score. Something is weird here...","body":"My first &quot;popular question&quot; badge and the question in question has a negative score. Something is weird here..."},{"owner":{"account_id":7651254,"reputation":1257,"user_id":6743127,"accept_rate":100,"display_name":"Fabian R&#246;ling"},"score":0,"creation_date":1512629516,"post_id":45281454,"comment_id":82337494,"body_markdown":"And now it&#39;s a &quot;notable question&quot; with negative score.","body":"And now it&#39;s a &quot;notable question&quot; with negative score."},{"owner":{"account_id":7651254,"reputation":1257,"user_id":6743127,"accept_rate":100,"display_name":"Fabian R&#246;ling"},"score":2,"creation_date":1544087186,"post_id":45281454,"comment_id":94154119,"body_markdown":"And one year later it&#39;s at +11. There are some very weird voting behaviours on this site…","body":"And one year later it&#39;s at +11. There are some very weird voting behaviours on this site…"}],"answers":[{"tags":[],"owner":{"account_id":9604388,"reputation":39,"user_id":7130845,"display_name":"Khan.N"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1500902203,"creation_date":1500902203,"answer_id":45281706,"question_id":45281454,"body_markdown":"Use an ArrayList to list down all your Lists....\r\n\r\n    ArrayList&lt;String&gt; arrl = new ArrayList&lt;String&gt;();\r\n    List&lt;String&gt; list1 = new ArrayList&lt;String&gt;();\r\n        list.add(&quot;one&quot;);\r\n        list.add(&quot;two&quot;);\r\n    List&lt;String&gt; list2 = new ArrayList&lt;String&gt;();\r\n        list.add(&quot;one1&quot;);\r\n        list.add(&quot;two2&quot;);\r\n        arrl.addAll(list1);\r\n    arrl.addAll(list2);\r\n        System.out.println(&quot;After Copy: &quot;+arrl);\r\n\r\nThats it your list will be made","title":"Combine multiple lists in Java","body":"<p>Use an ArrayList to list down all your Lists....</p>\n\n<pre><code>ArrayList&lt;String&gt; arrl = new ArrayList&lt;String&gt;();\nList&lt;String&gt; list1 = new ArrayList&lt;String&gt;();\n    list.add(\"one\");\n    list.add(\"two\");\nList&lt;String&gt; list2 = new ArrayList&lt;String&gt;();\n    list.add(\"one1\");\n    list.add(\"two2\");\n    arrl.addAll(list1);\narrl.addAll(list2);\n    System.out.println(\"After Copy: \"+arrl);\n</code></pre>\n\n<p>Thats it your list will be made</p>\n"},{"tags":[],"owner":{"account_id":6280390,"reputation":3711,"user_id":4881608,"display_name":"Pallavi Sonal"},"down_vote_count":0,"up_vote_count":159,"is_accepted":true,"score":159,"last_activity_date":1500902274,"creation_date":1500902274,"answer_id":45281737,"question_id":45281454,"body_markdown":"Java 8 has an easy way of doing it with the help of [Stream API][1] shown in the code below. We have basically created a stream with all the lists , and then as we need the individual contents of the lists, there is a need to flatten it with `flatMap` and finally collect the elements in a `List`.\r\n \r\n\r\n    List&lt;Integer&gt;list1=Arrays.asList(1,2,3);\r\n    List&lt;Integer&gt;list2=Arrays.asList(4,5,6);\r\n    List&lt;Integer&gt;list3=Arrays.asList(7,8,9);\r\n    List&lt;Integer&gt;list4=Arrays.asList(10,0,-1);\r\n    List&lt;Integer&gt; newList = Stream.of(list1, list2, list3,list4)\r\n                                          .flatMap(Collection::stream)\r\n                                          .collect(Collectors.toList());       \r\n     System.out.println(newList); // prints [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 0, -1]\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html","title":"Combine multiple lists in Java","body":"<p>Java 8 has an easy way of doing it with the help of <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html\" rel=\"noreferrer\">Stream API</a> shown in the code below. We have basically created a stream with all the lists , and then as we need the individual contents of the lists, there is a need to flatten it with <code>flatMap</code> and finally collect the elements in a <code>List</code>.</p>\n\n<pre><code>List&lt;Integer&gt;list1=Arrays.asList(1,2,3);\nList&lt;Integer&gt;list2=Arrays.asList(4,5,6);\nList&lt;Integer&gt;list3=Arrays.asList(7,8,9);\nList&lt;Integer&gt;list4=Arrays.asList(10,0,-1);\nList&lt;Integer&gt; newList = Stream.of(list1, list2, list3,list4)\n                                      .flatMap(Collection::stream)\n                                      .collect(Collectors.toList());       \n System.out.println(newList); // prints [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 0, -1]\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6714862,"reputation":16230,"user_id":5176992,"display_name":"Eritrean"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1500904832,"creation_date":1500904832,"answer_id":45282613,"question_id":45281454,"body_markdown":"You can write your own methods to merge two or more lists. Example:\r\n\r\n    import java.util.ArrayList;\r\n    import java.util.Arrays;\r\n    import java.util.List;\r\n    import java.util.stream.Collectors;\r\n    import java.util.stream.Stream;\r\n\r\n    public class Test{ \r\n        public static void main(String[] args) {\r\n            List&lt;Integer&gt;list1 = Arrays.asList(1,2,3);\r\n            List&lt;Integer&gt;list2 = Arrays.asList(4,5,6);\r\n            List&lt;Integer&gt;list3 = Arrays.asList(7,8,9);\r\n            List&lt;Integer&gt;list4 = Arrays.asList(10,0,-1);\r\n            \r\n            System.out.println(combineMyLists(list1,list2,list3,list4));\r\n            System.out.println(&quot;----------------------&quot;);\r\n            System.out.println(combineMyLists2(list1,list2,list3,list4));\r\n        } \r\n        private static List&lt;Integer&gt; combineMyLists(List&lt;Integer&gt;... args) {\r\n            List&lt;Integer&gt; combinedList = new ArrayList&lt;&gt;();\r\n            for(List&lt;Integer&gt; list : args){\r\n                for(Integer i: list){\r\n                   combinedList.add(i);\r\n                }\r\n            }\r\n            return combinedList;\r\n        }\r\n        private static List&lt;Integer&gt; combineMyLists2(List&lt;Integer&gt;... args) {\r\n            List&lt;Integer&gt; combinedList = Stream.of(args).flatMap(i -&gt; i.stream()).collect(Collectors.toList());   ;\r\n            return combinedList;\r\n        }\r\n    }","title":"Combine multiple lists in Java","body":"<p>You can write your own methods to merge two or more lists. Example:</p>\n\n<pre><code>import java.util.ArrayList;\nimport java.util.Arrays;\nimport java.util.List;\nimport java.util.stream.Collectors;\nimport java.util.stream.Stream;\n\npublic class Test{ \n    public static void main(String[] args) {\n        List&lt;Integer&gt;list1 = Arrays.asList(1,2,3);\n        List&lt;Integer&gt;list2 = Arrays.asList(4,5,6);\n        List&lt;Integer&gt;list3 = Arrays.asList(7,8,9);\n        List&lt;Integer&gt;list4 = Arrays.asList(10,0,-1);\n\n        System.out.println(combineMyLists(list1,list2,list3,list4));\n        System.out.println(\"----------------------\");\n        System.out.println(combineMyLists2(list1,list2,list3,list4));\n    } \n    private static List&lt;Integer&gt; combineMyLists(List&lt;Integer&gt;... args) {\n        List&lt;Integer&gt; combinedList = new ArrayList&lt;&gt;();\n        for(List&lt;Integer&gt; list : args){\n            for(Integer i: list){\n               combinedList.add(i);\n            }\n        }\n        return combinedList;\n    }\n    private static List&lt;Integer&gt; combineMyLists2(List&lt;Integer&gt;... args) {\n        List&lt;Integer&gt; combinedList = Stream.of(args).flatMap(i -&gt; i.stream()).collect(Collectors.toList());   ;\n        return combinedList;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1575780,"reputation":10830,"user_id":1462282,"accept_rate":100,"display_name":"Sahil Chhabra"},"down_vote_count":0,"up_vote_count":25,"is_accepted":false,"score":25,"last_activity_date":1537358762,"creation_date":1537358762,"answer_id":52405494,"question_id":45281454,"body_markdown":"Adding other alternatives:\r\n\r\n**OPTION 1:**\r\n\r\n    List&lt;Integer&gt; joinedList = joinLists(list1, list2, list3, list4);\r\n    \r\n    public static &lt;T&gt; List&lt;T&gt; joinLists(List&lt;T&gt;... lists) {\r\n            return Arrays.stream(lists).flatMap(Collection::stream).collect(Collectors.toList()); \r\n    }\r\n\r\n**OPTION 2:**\r\n\r\n    List&lt;Integer&gt; joinedList = new ArrayList&lt;&gt;();\r\n    Stream.of(list1, list2, list3, list4).forEach(joinedList::addAll);\r\n\r\n","title":"Combine multiple lists in Java","body":"<p>Adding other alternatives:</p>\n\n<p><strong>OPTION 1:</strong></p>\n\n<pre><code>List&lt;Integer&gt; joinedList = joinLists(list1, list2, list3, list4);\n\npublic static &lt;T&gt; List&lt;T&gt; joinLists(List&lt;T&gt;... lists) {\n        return Arrays.stream(lists).flatMap(Collection::stream).collect(Collectors.toList()); \n}\n</code></pre>\n\n<p><strong>OPTION 2:</strong></p>\n\n<pre><code>List&lt;Integer&gt; joinedList = new ArrayList&lt;&gt;();\nStream.of(list1, list2, list3, list4).forEach(joinedList::addAll);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4876099,"reputation":421,"user_id":4455546,"display_name":"Clement Cherlin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686849511,"creation_date":1685981359,"answer_id":76408228,"question_id":45281454,"body_markdown":"If concatenating many lists, or large lists, the origin lists have an efficient `toArray()` implementation, and the destination list has a way to request an explicit size, and an efficient `addAll()` implementation, you can save a lot of time over a simple `toList()`. `ArrayList`, probably the most commonly used List, has all three of these qualities.\r\n\r\nCalling the sized `ArrayList` constructor performs a single allocation, and using `addAll()` eliminates the need to inefficiently copy elements into the destination List one at a time. \r\n\r\n```java\r\n    @SafeVarargs\r\n    public static &lt;T&gt; List&lt;T&gt; concatListsJava8(List&lt;T&gt;... lists) {\r\n        int totalSize = Math.toIntExact(\r\n                Arrays.stream(lists)\r\n                .mapToLong(List::size)\r\n                .sum());\r\n\r\n        List&lt;T&gt; newList = new ArrayList&lt;&gt;(totalSize);\r\n\r\n        Arrays.asList(lists).forEach(newList::addAll);\r\n\r\n        return newList;\r\n    }\r\n\r\n    public static &lt;T&gt; List&lt;T&gt; concatListsJava5(List&lt;T&gt;... lists) {\r\n        final int numLists = lists.length;\r\n        int totalSize = 0;\r\n        for (int i = 0; i &lt; numLists; ++i) {\r\n            totalSize += lists[i].size();\r\n            if (totalSize &lt; 0) {\r\n                throw new ArithmeticException(&quot;integer overflow&quot;);\r\n            }\r\n        }\r\n\r\n        List&lt;T&gt; newList = new ArrayList&lt;T&gt;(totalSize);\r\n\r\n        for (int i = 0; i &lt; numLists; ++i) {\r\n            newList.addAll(lists[i]);\r\n        }\r\n        return newList;\r\n    }\r\n```","title":"Combine multiple lists in Java","body":"<p>If concatenating many lists, or large lists, the origin lists have an efficient <code>toArray()</code> implementation, and the destination list has a way to request an explicit size, and an efficient <code>addAll()</code> implementation, you can save a lot of time over a simple <code>toList()</code>. <code>ArrayList</code>, probably the most commonly used List, has all three of these qualities.</p>\n<p>Calling the sized <code>ArrayList</code> constructor performs a single allocation, and using <code>addAll()</code> eliminates the need to inefficiently copy elements into the destination List one at a time.</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @SafeVarargs\n    public static &lt;T&gt; List&lt;T&gt; concatListsJava8(List&lt;T&gt;... lists) {\n        int totalSize = Math.toIntExact(\n                Arrays.stream(lists)\n                .mapToLong(List::size)\n                .sum());\n\n        List&lt;T&gt; newList = new ArrayList&lt;&gt;(totalSize);\n\n        Arrays.asList(lists).forEach(newList::addAll);\n\n        return newList;\n    }\n\n    public static &lt;T&gt; List&lt;T&gt; concatListsJava5(List&lt;T&gt;... lists) {\n        final int numLists = lists.length;\n        int totalSize = 0;\n        for (int i = 0; i &lt; numLists; ++i) {\n            totalSize += lists[i].size();\n            if (totalSize &lt; 0) {\n                throw new ArithmeticException(&quot;integer overflow&quot;);\n            }\n        }\n\n        List&lt;T&gt; newList = new ArrayList&lt;T&gt;(totalSize);\n\n        for (int i = 0; i &lt; numLists; ++i) {\n            newList.addAll(lists[i]);\n        }\n        return newList;\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2691023,"reputation":16196,"user_id":2324388,"accept_rate":41,"display_name":"Marian Kl&#252;hspies"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698130698,"creation_date":1698130698,"answer_id":77350065,"question_id":45281454,"body_markdown":"There is another possibility doing **double brace initialization**\r\n\r\n```\r\nvar combinedList = new ArrayList&lt;&gt;() {{\r\n    addAll(List.of(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;));\r\n    addAll(List.of(&quot;d&quot;, &quot;e&quot;, &quot;f&quot;));\r\n    addAll(List.of(&quot;g&quot;, &quot;h&quot;, &quot;i&quot;));\r\n\r\n    add(&quot;j);\r\n}};\r\n```\r\n\r\nIt&#39;s considered an anti-pattern **(depending on how you use it)**, but I still think there are some use cases where it is valid and **makes your life easier** (**tests, static configurations, manual constructing of JSON schemas, etc**).\r\n\r\nYou can read more about it here https://www.baeldung.com/java-double-brace-initialization\r\n\r\nand here is a description of the potential **memory leak case**, although I do not know if it is a relict of the past or still a thing with newer GC versions https://stackoverflow.com/a/27521360/2324388","title":"Combine multiple lists in Java","body":"<p>There is another possibility doing <strong>double brace initialization</strong></p>\n<pre><code>var combinedList = new ArrayList&lt;&gt;() {{\n    addAll(List.of(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;));\n    addAll(List.of(&quot;d&quot;, &quot;e&quot;, &quot;f&quot;));\n    addAll(List.of(&quot;g&quot;, &quot;h&quot;, &quot;i&quot;));\n\n    add(&quot;j);\n}};\n</code></pre>\n<p>It's considered an anti-pattern <strong>(depending on how you use it)</strong>, but I still think there are some use cases where it is valid and <strong>makes your life easier</strong> (<strong>tests, static configurations, manual constructing of JSON schemas, etc</strong>).</p>\n<p>You can read more about it here <a href=\"https://www.baeldung.com/java-double-brace-initialization\" rel=\"nofollow noreferrer\">https://www.baeldung.com/java-double-brace-initialization</a></p>\n<p>and here is a description of the potential <strong>memory leak case</strong>, although I do not know if it is a relict of the past or still a thing with newer GC versions <a href=\"https://stackoverflow.com/a/27521360/2324388\">https://stackoverflow.com/a/27521360/2324388</a></p>\n"}],"owner":{"account_id":7651254,"reputation":1257,"user_id":6743127,"accept_rate":100,"display_name":"Fabian R&#246;ling"},"comment_count":15,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":141443,"favorite_count":0,"down_vote_count":4,"up_vote_count":81,"accepted_answer_id":45281737,"answer_count":6,"score":77,"last_activity_date":1698130698,"creation_date":1500901563,"question_id":45281454,"body_markdown":"If I want to make two lists into one in Java, I can use `ListUtils.union(List list1,List list2)`. But what if I want to combine multiple lists?\r\n\r\nThis works:\r\n\r\n    import org.apache.commons.collections.ListUtils;\r\n    List&lt;Integer&gt;list1=Arrays.asList(1,2,3);\r\n    List&lt;Integer&gt;list2=Arrays.asList(4,5,6);\r\n    List&lt;Integer&gt;list3=Arrays.asList(7,8,9);\r\n    List&lt;Integer&gt;list4=Arrays.asList(10,0,-1);\r\n    System.out.println(ListUtils.union(ListUtils.union(list1, list2),ListUtils.union(list3, list4)));\r\n\r\nBut it doesn&#39;t really look like the best solution, neither is it particularly great to read. Sadly `ListUtils.union(list1,list2,list3,list4)` doesn&#39;t work. Using `addAll` multiple times and creating its own list just for that with duplicates of all the entries also doesn&#39;t seem ideal to me. So what can I do instead?","title":"Combine multiple lists in Java","body":"<p>If I want to make two lists into one in Java, I can use <code>ListUtils.union(List list1,List list2)</code>. But what if I want to combine multiple lists?</p>\n\n<p>This works:</p>\n\n<pre><code>import org.apache.commons.collections.ListUtils;\nList&lt;Integer&gt;list1=Arrays.asList(1,2,3);\nList&lt;Integer&gt;list2=Arrays.asList(4,5,6);\nList&lt;Integer&gt;list3=Arrays.asList(7,8,9);\nList&lt;Integer&gt;list4=Arrays.asList(10,0,-1);\nSystem.out.println(ListUtils.union(ListUtils.union(list1, list2),ListUtils.union(list3, list4)));\n</code></pre>\n\n<p>But it doesn't really look like the best solution, neither is it particularly great to read. Sadly <code>ListUtils.union(list1,list2,list3,list4)</code> doesn't work. Using <code>addAll</code> multiple times and creating its own list just for that with duplicates of all the entries also doesn't seem ideal to me. So what can I do instead?</p>\n"},{"tags":["java","time"],"comments":[{"owner":{"account_id":401843,"reputation":89758,"user_id":768644,"display_name":"rzwitserloot"},"score":6,"creation_date":1695959296,"post_id":77199321,"comment_id":136095695,"body_markdown":"j.u.Calendar is obsolete. And for good reason - broken in subtle ways, a non-java-like API, names that lie (an instance represents, well, not a calendar). Use `java.time`.","body":"j.u.Calendar is obsolete. And for good reason - broken in subtle ways, a non-java-like API, names that lie (an instance represents, well, not a calendar). Use <code>java.time</code>."},{"owner":{"account_id":12885913,"reputation":1275,"user_id":9319403,"display_name":"peter zhang"},"score":0,"creation_date":1695965988,"post_id":77199321,"comment_id":136096169,"body_markdown":"@rzwitserloot all my co-workers are using  Calendar, they just copy code from old repository. i need to find the reason of bug to let then not use Calendar","body":"@rzwitserloot all my co-workers are using  Calendar, they just copy code from old repository. i need to find the reason of bug to let then not use Calendar"},{"owner":{"account_id":322981,"reputation":310744,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":1,"creation_date":1695973495,"post_id":77199321,"comment_id":136097192,"body_markdown":"`GMT+8` is an offset, not a time zone. Is there a [real time zone](https://en.m.wikipedia.org/wiki/List_of_tz_database_time_zones) you have in mind?","body":"<code>GMT+8</code> is an offset, not a time zone. Is there a <a href=\"https://en.m.wikipedia.org/wiki/List_of_tz_database_time_zones\" rel=\"nofollow noreferrer\">real time zone</a> you have in mind?"},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":1,"creation_date":1695980480,"post_id":77199321,"comment_id":136098349,"body_markdown":"There is probably some reason why the old, confusing and cumbersome `Calendar` class would behave like that. That struggle definitely is not worth taking. Use [java.time, the modern Java date and time API](https://docs.oracle.com/javase/tutorial/datetime/index.html) instead. It supplanted `Calendar` and the other old classes a decade ago. `Instant.ofEpochMilli(1_695_957_557_093L) .atZone(ZoneId.of(&quot;GMT+8&quot;)) .truncatedTo(ChronoUnit.DAYS) .toInstant() .toEpochMilli()` yields your desired 1 695 916 800 000. Also when you repeat the operation.","body":"There is probably some reason why the old, confusing and cumbersome <code>Calendar</code> class would behave like that. That struggle definitely is not worth taking. Use <a href=\"https://docs.oracle.com/javase/tutorial/datetime/index.html\" rel=\"nofollow noreferrer\">java.time, the modern Java date and time API</a> instead. It supplanted <code>Calendar</code> and the other old classes a decade ago. <code>Instant.ofEpochMilli(1_695_957_557_093L) .atZone(ZoneId.of(&quot;GMT+8&quot;)) .truncatedTo(ChronoUnit.DAYS) .toInstant() .toEpochMilli()</code> yields your desired 1 695 916 800 000. Also when you repeat the operation."},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":1,"creation_date":1695980484,"post_id":77199321,"comment_id":136098350,"body_markdown":"Next tip, don’t play around with millisecond counts. Use proper date-time objects. Your code will be much clearer.","body":"Next tip, don’t play around with millisecond counts. Use proper date-time objects. Your code will be much clearer."},{"owner":{"account_id":401843,"reputation":89758,"user_id":768644,"display_name":"rzwitserloot"},"score":2,"creation_date":1695986175,"post_id":77199321,"comment_id":136099285,"body_markdown":"@peterzhang: Summarizing your point: &quot;I have a problem. Please explain the problem so I can explain to my team that there&#39;s a problem&quot;. You already know there&#39;s a problem, why do you need to first figure out how to make calendar work? If you do that, they&#39;ll just &#39;fix it&#39; for now, and you&#39;ll be back here with another esoteric question about calendars with all the comments yelling at you to stop using obsolete API. Just get it over with and move _right now_.","body":"@peterzhang: Summarizing your point: &quot;I have a problem. Please explain the problem so I can explain to my team that there&#39;s a problem&quot;. You already know there&#39;s a problem, why do you need to first figure out how to make calendar work? If you do that, they&#39;ll just &#39;fix it&#39; for now, and you&#39;ll be back here with another esoteric question about calendars with all the comments yelling at you to stop using obsolete API. Just get it over with and move <i>right now</i>."},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":2,"creation_date":1696008394,"post_id":77199321,"comment_id":136103739,"body_markdown":"*i need to find the reason of bug* The reason for the bug is that `Calendar` is too confusing to work with.","body":"<i>i need to find the reason of bug</i> The reason for the bug is that <code>Calendar</code> is too confusing to work with."},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":2,"creation_date":1698131622,"post_id":77199321,"comment_id":136362888,"body_markdown":"*&quot;all my co-workers are using Calendar&quot;* - Tell them to stop.  You can borrow my megaphone if you like.  Or ... convince your manager that it is time to start doing formal code reviews, using code quality tools on your code-base, writing testcases, and all of the other things that happen / don&#39;t happen if cowboy developers are not whipped into line.  The reason not to use `Calendar` is patently obvious.  It is buggy, obsolete and (as far as most developers are concerned) deprecated.  Irrespective of this particular bug you have run into!!  There are many references to back this up.","body":"<i>&quot;all my co-workers are using Calendar&quot;</i> - Tell them to stop.  You can borrow my megaphone if you like.  Or ... convince your manager that it is time to start doing formal code reviews, using code quality tools on your code-base, writing testcases, and all of the other things that happen / don&#39;t happen if cowboy developers are not whipped into line.  The reason not to use <code>Calendar</code> is patently obvious.  It is buggy, obsolete and (as far as most developers are concerned) deprecated.  Irrespective of this particular bug you have run into!!  There are many references to back this up."}],"answers":[{"tags":[],"owner":{"account_id":322981,"reputation":310744,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1698130620,"creation_date":1698127419,"answer_id":77349826,"question_id":77199321,"body_markdown":"# tl;dr\r\n\r\nUse *java.time* classes, not `Calendar`. \r\n\r\n```java\r\nInstant\r\n.ofEpochMilli( 1_695_957_557_093L )\r\n.atZone( ZoneId.of( &quot;Asia/Manila&quot; ) )\r\n.toLocalDate()\r\n.atStartOfDay( ZoneId.of( &quot;Asia/Manila&quot; ) )\r\n.toInstant()\r\n.toEpochMilli() \r\n```\r\n\r\n&gt; 1695916800000\r\n\r\n\r\n# Details\r\n\r\n&gt;GMT+8 timezone\r\n\r\nThat is an offset-from-UTC, not a time zone. \r\n\r\n - An offset is merely a number of hours-minutes-seconds ahead/behind the temporal meridian of UTC. \r\n - A time zone is much more. A time zone is a named history of the past, present, and future changes to the offset used by the people of a particular region as decided by their politicians. \r\n\r\nA time zone has a name in the format of `Continent/Region`, such as `Europe/Paris` or `America/Edmonton`.\r\n\r\n&gt;my computer default time zone is UTC\r\n\r\nI strongly recommend you write your code in such a way that the default time zone is irrelevant. \r\n\r\nFYI, the default host OS’ default time zone does not directly apply to Java. The JVM keeps [its own current default][1] time zone. That default *may* have been picked up from the host OS, but not necessarily. Any code in any thread of any app within the JVM can instantly change the JVM’s current default time zone.\r\n\r\n&gt;`Calendar calendar = Calendar…`\r\n\r\nYou are using *terrible* date-time classes that were years ago supplanted by the modern *java.time* classes defined in JSR 310. Sun Microsystems, Oracle, and the JCP community all gave up on those legacy classes, and so should you. \r\n\r\nInstead use only *java.time* classes.\r\n\r\n&gt; 1695957557093L\r\n\r\nI will assume this number is meant to be a count of milliseconds since the epoch reference of first moment of 1970 as seen in UTC (an offset of zero).  But you really should document the meaning of such a number to declare (a) which granularity, (b) [which epoch reference][2]. \r\n\r\n    Instant instant = Instant.ofEpochMilli( 1_695_957_557_093L ) ;\r\n\r\nThe [`Instant`][3] class represents a moment as seen in UTC. It has a resolution of [nanoseconds][4], finer than your milliseconds. To generate text in standard [ISO 8601][5] format, call `toString`.\r\n\r\n    String output = instant.toString() ;\r\n\r\n```none\r\n2023-09-29T03:19:17.093Z\r\n```\r\n\r\nIf you *really* want to use a hard-coded offset of eight hours ahead of UTC, instantiate a `ZoneOffset`. \r\n\r\n    ZoneOffset offset = ZoneOffset.ofHours( 8 ) ;\r\n\r\nApply that to our `Instant` to get an `OffsetDateTime` object.\r\n\r\n    OffsetDateTime odt = instant.atOffset( offset ) ;\r\n\r\n```none\r\nodt.toString() =&gt; 2023-09-29T11:19:17.093+08:00\r\n```\r\n\r\nBut you really should be using a time zone rather than an offset. Politicians frequently change the offset for their jurisdiction. By using a time zone, and keeping the [tzdata][6] of your JVM up-to-date, you will be soft-coding the offset, adjusting automatically per the whims of the politicians. \r\n\r\n    ZoneId z = ZoneId.of( &quot;Asia/Manila&quot; ) ;\r\n    ZonedDateTime zdt = instant.atZone( z ) ;\r\n\r\n```none\r\nzdt.toString() =&gt; 2023-09-29T11:19:17.093+08:00[Asia/Manila]\r\n```\r\n\r\nApparently you want the first moment of the day. But you assume the day starts at 00:00. That is not always the case. Some dates in some zones start at another time, such as 01:00. So let *java.time*  determine the first moment.\r\n\r\nFirst extract [the date][7].\r\n\r\n    LocalDate ld = zdt.toLocalDate() ;\r\n\r\n```none\r\nld.toString() =&gt; 2023-09-29\r\n```\r\n\r\nThen determine the first moment. \r\n\r\n    ZonedDateTime zdtStartOfDay = ld.atStartOfDay( z ) ;\r\n\r\n```none\r\nzdtStartOfDay.toString() =&gt; 2023-09-29T00:00+08:00[Asia/Manila]\r\n```\r\n\r\nLastly you want to know the count of milliseconds since 1970-01-01T00:00Z for that moment. To do that, extract an `Instant` object.\r\n\r\n    Instant instantStartOfDay = zdtStartOfDay.toInstant() ;\r\n\r\n```none\r\ninstantStartOfDay.toString() =&gt; 2023-09-28T16:00:00Z\r\n```\r\n\r\nInterrogate for the count of milliseconds.\r\n\r\n    long millisecondsSinceEpoch = instantStartOfDay.toEpochMilli() ;\r\n\r\n```none\r\nmillisecondsSinceEpoch  =&gt; 1695916800000\r\n```\r\n\r\nBy the way, I recommend you *not* track time by these count-of-milliseconds. Such a number is easily confused (granularity, epoch reference). And such a number cannot be read by humans, so otherwise obvious mistakes in values can slip by unnoticed. Instead, when storing and exchanging such date-time values, use standard [ISO 8601][5] formats in text.\r\n\r\nSee all this [code run at Ideone.com][8].\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/time/ZoneId.html#systemDefault()\r\n  [2]: https://en.wikipedia.org/wiki/Epoch_(computing)#Notable_epoch_dates_in_computing\r\n  [3]: https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/time/Instant.html\r\n  [4]: https://en.wikipedia.org/wiki/Nanosecond\r\n  [5]: https://en.wikipedia.org/wiki/ISO_8601\r\n  [6]: https://en.wikipedia.org/wiki/Tz_database\r\n  [7]: https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/time/LocalDate.html\r\n  [8]: https://ideone.com/D2KoZn","title":"Java Calendar not work as expected when set time to 0 a.m","body":"<h1>tl;dr</h1>\n<p>Use <em>java.time</em> classes, not <code>Calendar</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Instant\n.ofEpochMilli( 1_695_957_557_093L )\n.atZone( ZoneId.of( &quot;Asia/Manila&quot; ) )\n.toLocalDate()\n.atStartOfDay( ZoneId.of( &quot;Asia/Manila&quot; ) )\n.toInstant()\n.toEpochMilli() \n</code></pre>\n<blockquote>\n<p>1695916800000</p>\n</blockquote>\n<h1>Details</h1>\n<blockquote>\n<p>GMT+8 timezone</p>\n</blockquote>\n<p>That is an offset-from-UTC, not a time zone.</p>\n<ul>\n<li>An offset is merely a number of hours-minutes-seconds ahead/behind the temporal meridian of UTC.</li>\n<li>A time zone is much more. A time zone is a named history of the past, present, and future changes to the offset used by the people of a particular region as decided by their politicians.</li>\n</ul>\n<p>A time zone has a name in the format of <code>Continent/Region</code>, such as <code>Europe/Paris</code> or <code>America/Edmonton</code>.</p>\n<blockquote>\n<p>my computer default time zone is UTC</p>\n</blockquote>\n<p>I strongly recommend you write your code in such a way that the default time zone is irrelevant.</p>\n<p>FYI, the default host OS’ default time zone does not directly apply to Java. The JVM keeps <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/time/ZoneId.html#systemDefault()\" rel=\"nofollow noreferrer\">its own current default</a> time zone. That default <em>may</em> have been picked up from the host OS, but not necessarily. Any code in any thread of any app within the JVM can instantly change the JVM’s current default time zone.</p>\n<blockquote>\n<p><code>Calendar calendar = Calendar…</code></p>\n</blockquote>\n<p>You are using <em>terrible</em> date-time classes that were years ago supplanted by the modern <em>java.time</em> classes defined in JSR 310. Sun Microsystems, Oracle, and the JCP community all gave up on those legacy classes, and so should you.</p>\n<p>Instead use only <em>java.time</em> classes.</p>\n<blockquote>\n<p>1695957557093L</p>\n</blockquote>\n<p>I will assume this number is meant to be a count of milliseconds since the epoch reference of first moment of 1970 as seen in UTC (an offset of zero).  But you really should document the meaning of such a number to declare (a) which granularity, (b) <a href=\"https://en.wikipedia.org/wiki/Epoch_(computing)#Notable_epoch_dates_in_computing\" rel=\"nofollow noreferrer\">which epoch reference</a>.</p>\n<pre><code>Instant instant = Instant.ofEpochMilli( 1_695_957_557_093L ) ;\n</code></pre>\n<p>The <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/time/Instant.html\" rel=\"nofollow noreferrer\"><code>Instant</code></a> class represents a moment as seen in UTC. It has a resolution of <a href=\"https://en.wikipedia.org/wiki/Nanosecond\" rel=\"nofollow noreferrer\">nanoseconds</a>, finer than your milliseconds. To generate text in standard <a href=\"https://en.wikipedia.org/wiki/ISO_8601\" rel=\"nofollow noreferrer\">ISO 8601</a> format, call <code>toString</code>.</p>\n<pre><code>String output = instant.toString() ;\n</code></pre>\n<pre class=\"lang-none prettyprint-override\"><code>2023-09-29T03:19:17.093Z\n</code></pre>\n<p>If you <em>really</em> want to use a hard-coded offset of eight hours ahead of UTC, instantiate a <code>ZoneOffset</code>.</p>\n<pre><code>ZoneOffset offset = ZoneOffset.ofHours( 8 ) ;\n</code></pre>\n<p>Apply that to our <code>Instant</code> to get an <code>OffsetDateTime</code> object.</p>\n<pre><code>OffsetDateTime odt = instant.atOffset( offset ) ;\n</code></pre>\n<pre class=\"lang-none prettyprint-override\"><code>odt.toString() =&gt; 2023-09-29T11:19:17.093+08:00\n</code></pre>\n<p>But you really should be using a time zone rather than an offset. Politicians frequently change the offset for their jurisdiction. By using a time zone, and keeping the <a href=\"https://en.wikipedia.org/wiki/Tz_database\" rel=\"nofollow noreferrer\">tzdata</a> of your JVM up-to-date, you will be soft-coding the offset, adjusting automatically per the whims of the politicians.</p>\n<pre><code>ZoneId z = ZoneId.of( &quot;Asia/Manila&quot; ) ;\nZonedDateTime zdt = instant.atZone( z ) ;\n</code></pre>\n<pre class=\"lang-none prettyprint-override\"><code>zdt.toString() =&gt; 2023-09-29T11:19:17.093+08:00[Asia/Manila]\n</code></pre>\n<p>Apparently you want the first moment of the day. But you assume the day starts at 00:00. That is not always the case. Some dates in some zones start at another time, such as 01:00. So let <em>java.time</em>  determine the first moment.</p>\n<p>First extract <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/time/LocalDate.html\" rel=\"nofollow noreferrer\">the date</a>.</p>\n<pre><code>LocalDate ld = zdt.toLocalDate() ;\n</code></pre>\n<pre class=\"lang-none prettyprint-override\"><code>ld.toString() =&gt; 2023-09-29\n</code></pre>\n<p>Then determine the first moment.</p>\n<pre><code>ZonedDateTime zdtStartOfDay = ld.atStartOfDay( z ) ;\n</code></pre>\n<pre class=\"lang-none prettyprint-override\"><code>zdtStartOfDay.toString() =&gt; 2023-09-29T00:00+08:00[Asia/Manila]\n</code></pre>\n<p>Lastly you want to know the count of milliseconds since 1970-01-01T00:00Z for that moment. To do that, extract an <code>Instant</code> object.</p>\n<pre><code>Instant instantStartOfDay = zdtStartOfDay.toInstant() ;\n</code></pre>\n<pre class=\"lang-none prettyprint-override\"><code>instantStartOfDay.toString() =&gt; 2023-09-28T16:00:00Z\n</code></pre>\n<p>Interrogate for the count of milliseconds.</p>\n<pre><code>long millisecondsSinceEpoch = instantStartOfDay.toEpochMilli() ;\n</code></pre>\n<pre class=\"lang-none prettyprint-override\"><code>millisecondsSinceEpoch  =&gt; 1695916800000\n</code></pre>\n<p>By the way, I recommend you <em>not</em> track time by these count-of-milliseconds. Such a number is easily confused (granularity, epoch reference). And such a number cannot be read by humans, so otherwise obvious mistakes in values can slip by unnoticed. Instead, when storing and exchanging such date-time values, use standard <a href=\"https://en.wikipedia.org/wiki/ISO_8601\" rel=\"nofollow noreferrer\">ISO 8601</a> formats in text.</p>\n<p>See all this <a href=\"https://ideone.com/D2KoZn\" rel=\"nofollow noreferrer\">code run at Ideone.com</a>.</p>\n"}],"owner":{"account_id":12885913,"reputation":1275,"user_id":9319403,"display_name":"peter zhang"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":95,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"accepted_answer_id":77349826,"answer_count":1,"score":-1,"last_activity_date":1698130620,"creation_date":1695958731,"question_id":77199321,"body_markdown":"my computer default time zone is UTC, and i write a function to formate time to 0 a.m. in GMT+8 timezone. it works well for a long time. recently i find if call this function twice, it will reduce one day time. the problem function first set time then set timeZone. if first set timeZone then set time, it will work properly. i dont know why.\r\n```java\r\nimport java.util.Calendar;\r\nimport java.util.Date;\r\nimport java.util.TimeZone;\r\n\r\npublic class Test {\r\n    private static final String DEFAULT_TIME_ZONE = &quot;GMT&quot;;\r\n    private static final String GMT_8_TIME_ZONE = &quot;GMT+8&quot;;\r\n\r\n    /**\r\n     * first set time, then set time zone\r\n     */\r\n    public static long formatTimeToGmt8Zero(Long time) {\r\n        Calendar calendar = Calendar.getInstance(TimeZone.getTimeZone(DEFAULT_TIME_ZONE));\r\n        calendar.setTime(new Date(time));\r\n        calendar.setTimeZone(TimeZone.getTimeZone(GMT_8_TIME_ZONE));\r\n        calendar.set(Calendar.HOUR_OF_DAY, 0);\r\n        calendar.set(Calendar.MINUTE, 0);\r\n        calendar.set(Calendar.SECOND, 0);\r\n        calendar.set(Calendar.MILLISECOND, 0);\r\n        return calendar.getTimeInMillis();\r\n    }\r\n\r\n    /**\r\n     * first set time zone, then set time\r\n     */\r\n    public static long formatTimeToGmt8Zero2(Long time) {\r\n        Calendar calendar = Calendar.getInstance(TimeZone.getTimeZone(DEFAULT_TIME_ZONE));\r\n        calendar.setTimeZone(TimeZone.getTimeZone(GMT_8_TIME_ZONE));\r\n        calendar.setTime(new Date(time));\r\n        calendar.set(Calendar.HOUR_OF_DAY, 0);\r\n        calendar.set(Calendar.MINUTE, 0);\r\n        calendar.set(Calendar.SECOND, 0);\r\n        calendar.set(Calendar.MILLISECOND, 0);\r\n        return calendar.getTimeInMillis();\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        Long beginTime = 1695957557093L;//Fri Sep 29 2023 03:19:17 GMT+0000\r\n        long time1 = formatTimeToGmt8Zero(beginTime);\r\n        long time2 = formatTimeToGmt8Zero(time1);\r\n        //formatTimeToGmt8Zero beginTime:1695957557093,time1:1695916800000,time2:1695830400000\r\n        System.out.println(&quot;formatTimeToGmt8Zero beginTime:&quot; + beginTime + &quot;,time1:&quot; + time1 + &quot;,time2:&quot; + time2);\r\n        time1 = formatTimeToGmt8Zero2(beginTime);\r\n        time2 = formatTimeToGmt8Zero2(time1);\r\n        //formatTimeToGmt8Zero2 beginTime:1695957557093,time1:1695916800000,time2:1695916800000\r\n        System.out.println(&quot;formatTimeToGmt8Zero2 beginTime:&quot; + beginTime + &quot;,time1:&quot; + time1 + &quot;,time2:&quot; + time2);\r\n\r\n    }\r\n}\r\n```\r\n\r\nSee this [code run at Ideone.com](https://ideone.com/uKZWVT). ","title":"Java Calendar not work as expected when set time to 0 a.m","body":"<p>my computer default time zone is UTC, and i write a function to formate time to 0 a.m. in GMT+8 timezone. it works well for a long time. recently i find if call this function twice, it will reduce one day time. the problem function first set time then set timeZone. if first set timeZone then set time, it will work properly. i dont know why.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.Calendar;\nimport java.util.Date;\nimport java.util.TimeZone;\n\npublic class Test {\n    private static final String DEFAULT_TIME_ZONE = &quot;GMT&quot;;\n    private static final String GMT_8_TIME_ZONE = &quot;GMT+8&quot;;\n\n    /**\n     * first set time, then set time zone\n     */\n    public static long formatTimeToGmt8Zero(Long time) {\n        Calendar calendar = Calendar.getInstance(TimeZone.getTimeZone(DEFAULT_TIME_ZONE));\n        calendar.setTime(new Date(time));\n        calendar.setTimeZone(TimeZone.getTimeZone(GMT_8_TIME_ZONE));\n        calendar.set(Calendar.HOUR_OF_DAY, 0);\n        calendar.set(Calendar.MINUTE, 0);\n        calendar.set(Calendar.SECOND, 0);\n        calendar.set(Calendar.MILLISECOND, 0);\n        return calendar.getTimeInMillis();\n    }\n\n    /**\n     * first set time zone, then set time\n     */\n    public static long formatTimeToGmt8Zero2(Long time) {\n        Calendar calendar = Calendar.getInstance(TimeZone.getTimeZone(DEFAULT_TIME_ZONE));\n        calendar.setTimeZone(TimeZone.getTimeZone(GMT_8_TIME_ZONE));\n        calendar.setTime(new Date(time));\n        calendar.set(Calendar.HOUR_OF_DAY, 0);\n        calendar.set(Calendar.MINUTE, 0);\n        calendar.set(Calendar.SECOND, 0);\n        calendar.set(Calendar.MILLISECOND, 0);\n        return calendar.getTimeInMillis();\n    }\n\n    public static void main(String[] args) {\n        Long beginTime = 1695957557093L;//Fri Sep 29 2023 03:19:17 GMT+0000\n        long time1 = formatTimeToGmt8Zero(beginTime);\n        long time2 = formatTimeToGmt8Zero(time1);\n        //formatTimeToGmt8Zero beginTime:1695957557093,time1:1695916800000,time2:1695830400000\n        System.out.println(&quot;formatTimeToGmt8Zero beginTime:&quot; + beginTime + &quot;,time1:&quot; + time1 + &quot;,time2:&quot; + time2);\n        time1 = formatTimeToGmt8Zero2(beginTime);\n        time2 = formatTimeToGmt8Zero2(time1);\n        //formatTimeToGmt8Zero2 beginTime:1695957557093,time1:1695916800000,time2:1695916800000\n        System.out.println(&quot;formatTimeToGmt8Zero2 beginTime:&quot; + beginTime + &quot;,time1:&quot; + time1 + &quot;,time2:&quot; + time2);\n\n    }\n}\n</code></pre>\n<p>See this <a href=\"https://ideone.com/uKZWVT\" rel=\"nofollow noreferrer\">code run at Ideone.com</a>.</p>\n"},{"tags":["java","selenium-webdriver","webdriver","webdriverwait"],"answers":[{"tags":[],"owner":{"account_id":13688997,"reputation":658,"user_id":9877340,"display_name":"kenneth"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698130566,"creation_date":1698130566,"answer_id":77350053,"question_id":77348359,"body_markdown":"Have you tried using the `.ignoring` method?\r\n\r\n    new WebDriverWait(driver, 10)\r\n        .pollingEvery(Duration.ofSeconds(1))\r\n        .ignoring(TimeoutException.class)\r\n        .until(wd -&gt; isElementPresent());\r\n    \r\n    return isElementPresent()\r\n\r\nOtherwise you should try the `try-catch` method, which allows for more flexibility:\r\n\r\n    try {\r\n        WebDriverWait wait = new WebDriverWait(driver, 10); // Wait for up to 10 seconds\r\n        WebElement element = wait.until(ExpectedConditions.visibilityOfElementLocated(By.id(&quot;yourElementId&quot;)));\r\n        \r\n        // Perform actions on the element\r\n    } catch (TimeoutException e) {\r\n        // Handle the TimeoutException (e.g., log an error, take a screenshot, or report the issue)\r\n        System.out.println(&quot;TimeoutException occurred: Element was not found within the specified timeout.&quot;);\r\n    }","title":"Using WebDriverWait to only check till timeout, without exception","body":"<p>Have you tried using the <code>.ignoring</code> method?</p>\n<pre><code>new WebDriverWait(driver, 10)\n    .pollingEvery(Duration.ofSeconds(1))\n    .ignoring(TimeoutException.class)\n    .until(wd -&gt; isElementPresent());\n\nreturn isElementPresent()\n</code></pre>\n<p>Otherwise you should try the <code>try-catch</code> method, which allows for more flexibility:</p>\n<pre><code>try {\n    WebDriverWait wait = new WebDriverWait(driver, 10); // Wait for up to 10 seconds\n    WebElement element = wait.until(ExpectedConditions.visibilityOfElementLocated(By.id(&quot;yourElementId&quot;)));\n    \n    // Perform actions on the element\n} catch (TimeoutException e) {\n    // Handle the TimeoutException (e.g., log an error, take a screenshot, or report the issue)\n    System.out.println(&quot;TimeoutException occurred: Element was not found within the specified timeout.&quot;);\n}\n</code></pre>\n"}],"owner":{"account_id":5955699,"reputation":659,"user_id":4682461,"accept_rate":25,"display_name":"golu"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":52,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1698130566,"creation_date":1698095571,"question_id":77348359,"body_markdown":"I am trying to use WebDriverWait for condition to be true. If it&#39;s not true after timeout, continue - instead of timeout exception.\r\n\r\n    new WebDriverWait(driver, 10)\r\n        .pollingEvery(Duration.ofSeconds(1))\r\n        .until(wd -&gt; isElementPresent());\r\n    \r\n    return isElementPresent()\r\n\r\nBasically, this element can show up after few seconds delay, and not guaranteed to be there.\r\n\r\n- If element is becomes present, return true immediately\r\n- If element is not present, wait up-to 10 seconds, and return false\r\n\r\nCan I achieve this with WebDriverWait?","title":"Using WebDriverWait to only check till timeout, without exception","body":"<p>I am trying to use WebDriverWait for condition to be true. If it's not true after timeout, continue - instead of timeout exception.</p>\n<pre><code>new WebDriverWait(driver, 10)\n    .pollingEvery(Duration.ofSeconds(1))\n    .until(wd -&gt; isElementPresent());\n\nreturn isElementPresent()\n</code></pre>\n<p>Basically, this element can show up after few seconds delay, and not guaranteed to be there.</p>\n<ul>\n<li>If element is becomes present, return true immediately</li>\n<li>If element is not present, wait up-to 10 seconds, and return false</li>\n</ul>\n<p>Can I achieve this with WebDriverWait?</p>\n"},{"tags":["java","spring","hibernate","annotations","entity"],"comments":[{"owner":{"account_id":6482269,"reputation":13098,"user_id":5024726,"display_name":"Matt"},"score":2,"creation_date":1602422316,"post_id":64304416,"comment_id":113709145,"body_markdown":"Try the JPA [`@Transient`](https://jakarta.ee/specifications/persistence/2.2/apidocs/javax/persistence/Transient.html) annotation.","body":"Try the JPA <a href=\"https://jakarta.ee/specifications/persistence/2.2/apidocs/javax/persistence/Transient.html\" rel=\"nofollow noreferrer\"><code>@Transient</code></a> annotation."}],"answers":[{"tags":[],"owner":{"account_id":1625750,"reputation":5627,"user_id":1501345,"accept_rate":60,"display_name":"Amit Kumar Lal"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1602422485,"creation_date":1602422485,"answer_id":64304478,"question_id":64304416,"body_markdown":"transient is a Java keyword which marks a member variable not to be serialized when it is persisted to streams of bytes.\r\n\r\n`@Transient` annotation in JPA or Hibernate is used to indicate that a field is not to be persisted or ignore fields to save in the database. @Transient exist in javax. persistence package. It is used to annotate a property or field of an entity class, mapped superclass, or embeddable class.\r\n\r\nhence mark the Field as `@Transient`.","title":"Make certain fields in entity not be saved to the database","body":"<p>transient is a Java keyword which marks a member variable not to be serialized when it is persisted to streams of bytes.</p>\n<p><code>@Transient</code> annotation in JPA or Hibernate is used to indicate that a field is not to be persisted or ignore fields to save in the database. @Transient exist in javax. persistence package. It is used to annotate a property or field of an entity class, mapped superclass, or embeddable class.</p>\n<p>hence mark the Field as <code>@Transient</code>.</p>\n"},{"tags":[],"owner":{"account_id":29740578,"reputation":1,"user_id":22792924,"display_name":"arcs"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698130085,"creation_date":1698130085,"answer_id":77350010,"question_id":64304416,"body_markdown":"@Column(insertable=false, updatable=false)\r\nprivate transient Long width;\r\n\r\nuse this transient keyword to prevent these fields from being persisted into your DB, it works.","title":"Make certain fields in entity not be saved to the database","body":"<p>@Column(insertable=false, updatable=false)\nprivate transient Long width;</p>\n<p>use this transient keyword to prevent these fields from being persisted into your DB, it works.</p>\n"}],"owner":{"account_id":3288795,"reputation":1355,"user_id":5673289,"accept_rate":50,"display_name":"trzczy"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4742,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":64304478,"answer_count":2,"score":0,"last_activity_date":1698130085,"creation_date":1602422102,"question_id":64304416,"body_markdown":"I am learning Spring and Hibernate. I prepared the entity of an image. The fields are succesfullu saved to the database as column names, but I need that some of properties to exist in the entity but not be saved to database. But the actually are being saved. I tried to remove a @Column annotation or use `@Column(insertable=false, updatable=false)` but not succeed. Always got the columns in the database with null value. So how to prevent Spring and Hibernate from create columns of certain fields. I am trying to do it with the fields `size`, `width` and `height`.\r\n\r\n*Code of the entity:*\r\n\r\n    package tk.trzczy.gallery.domain;\r\n    \r\n    import javax.persistence.*;\r\n    import java.awt.*;\r\n    import java.util.Date;\r\n    \r\n    import com.fasterxml.jackson.annotation.JsonIgnore;\r\n    import com.fasterxml.jackson.annotation.JsonProperty;\r\n    \r\n    @Entity\r\n    @Table(name = &quot;images&quot;)\r\n    public class Image {\r\n        @Id\r\n        @SequenceGenerator(name = &quot;mySeqGen6&quot;, sequenceName = &quot;mySeq6&quot;, initialValue = 11, allocationSize = 100)\r\n        @GeneratedValue(generator = &quot;mySeqGen6&quot;)\r\n        private Integer id;\r\n    \r\n        @Column(nullable = false, length = 300)\r\n        private String title;\r\n    \r\n        @Column(nullable = false)\r\n        private String url;\r\n    \r\n        @Column(insertable=false, updatable=false)\r\n        private Long width;\r\n    \r\n        @Column(insertable=false, updatable=false)\r\n        private Long height;\r\n    \r\n        @Column(insertable=false, updatable=false)\r\n        private Dimension size;\r\n    \r\n        @ManyToOne(cascade=CascadeType.PERSIST,fetch=FetchType.EAGER)\r\n        @JoinColumn(name=&quot;image_category_id&quot;)\r\n        private ImageCategory imageCategory;\r\n    \r\n        @Column(name=&quot;datecreated&quot;, columnDefinition=&quot;TIMESTAMP DEFAULT CURRENT_TIMESTAMP&quot;)\r\n        private Date dateCreated;\r\n    \r\n        @PrePersist\r\n        protected void onCreate() {\r\n            dateCreated = new Date();\r\n        }\r\n    \r\n        @JsonIgnore\r\n        public Integer getId() {\r\n            return id;\r\n        }\r\n    \r\n        @JsonProperty\r\n        public void setId(Integer id) {\r\n            this.id = id;\r\n        }\r\n        public String getTitle() {\r\n            return title;\r\n        }\r\n        public void setTitle(String title) {\r\n            this.title = title;\r\n        }\r\n        public String getUrl() {\r\n            return url;\r\n        }\r\n        public void setUrl(String url) {\r\n            this.url = url;\r\n        }\r\n    \r\n        @JsonIgnore\r\n        public Date getDateCreated() {\r\n            return dateCreated;\r\n        }\r\n    \r\n        @JsonProperty\r\n        public void setDateCreated(Date dateCreated) {\r\n            this.dateCreated = dateCreated;\r\n        }\r\n    \r\n        public Image() {}\r\n    \r\n        public Image(Integer id, String title, String url) {\r\n            this.id = id;\r\n            this.title = title;\r\n            this.url = url;\r\n        }\r\n    \r\n        @Override\r\n        public String toString() {\r\n            return &quot;Post{&quot; +\r\n                    &quot;id=&quot; + id +\r\n                    &quot;, title=&#39;&quot; + title + &#39;\\&#39;&#39; +\r\n                    &quot;, url=&#39;&quot; + url + &#39;\\&#39;&#39; +\r\n                    &quot;, date=&quot; + dateCreated +\r\n                    &#39;}&#39;;\r\n        }\r\n    \r\n        @JsonIgnore\r\n        public ImageCategory getImageCategory() {\r\n            return imageCategory;\r\n        }\r\n    \r\n        @JsonProperty\r\n        public void setImageCategory(ImageCategory imageCategory) {\r\n            this.imageCategory = imageCategory;\r\n        }\r\n    \r\n        public long getWidth() {\r\n            return width;\r\n        }\r\n    \r\n        public void setWidth(long width) {\r\n            this.width = width;\r\n        }\r\n    \r\n        public long getHeight() {\r\n            return height;\r\n        }\r\n    \r\n        public void setHeight(long height) {\r\n            this.height = height;\r\n        }\r\n    \r\n        public Dimension getSize() {\r\n            return size;\r\n        }\r\n    \r\n        public void setSize(Dimension size) {\r\n            this.size=size;\r\n        }\r\n    }\r\n\r\n\r\n\r\n*pom.xml*\r\n\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n    \t\t xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    \t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    \t&lt;groupId&gt;tk.trzczy&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;\r\n    \t&lt;version&gt;0.0.1&lt;/version&gt;\r\n    \t&lt;packaging&gt;war&lt;/packaging&gt;\r\n    \r\n    \r\n    \t&lt;properties&gt;\r\n    \t\t&lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n    \t\t&lt;aspect.version&gt;1.9.2&lt;/aspect.version&gt;\r\n    \t\t&lt;jackson.version&gt;2.9.8&lt;/jackson.version&gt;\r\n    \t\t&lt;hibernate.version&gt;5.4.2.Final&lt;/hibernate.version&gt;\r\n    \t\t&lt;hibernate.validator.version&gt;5.2.1.Final&lt;/hibernate.validator.version&gt;\r\n    \t\t&lt;c3p0.version&gt;0.9.5.2&lt;/c3p0.version&gt;\r\n    \t&lt;/properties&gt;\r\n    \r\n    \t&lt;dependencies&gt;\r\n    \r\n    \t\t&lt;!-- servlets and jps --&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;javax.servlet&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;jstl&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;1.2&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;javax.servlet&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;javax.servlet-api&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;4.0.1&lt;/version&gt;\r\n    \t\t\t&lt;scope&gt;provided&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.apache.tiles&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;tiles-extras&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;3.0.8&lt;/version&gt;\r\n    \t\t\t&lt;exclusions&gt;\r\n    \t\t\t\t&lt;exclusion&gt;\r\n    \t\t\t\t\t&lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n    \t\t\t\t\t&lt;artifactId&gt;jcl-over-slf4j&lt;/artifactId&gt;\r\n    \t\t\t\t&lt;/exclusion&gt;\r\n    \t\t\t\t&lt;exclusion&gt;\r\n    \t\t\t\t\t&lt;groupId&gt;jboss&lt;/groupId&gt;\r\n    \t\t\t\t\t&lt;artifactId&gt;javassist&lt;/artifactId&gt;\r\n    \t\t\t\t&lt;/exclusion&gt;\r\n    \t\t\t&lt;/exclusions&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;commons-fileupload&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;commons-fileupload&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;1.3.3&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;commons-io&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;1.3.2&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \r\n    \t\t&lt;!--hibernate--&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;${hibernate.version}&lt;/version&gt;\r\n    \t\t\t&lt;exclusions&gt;\r\n    \t\t\t\t&lt;exclusion&gt;\r\n    \t\t\t\t\t&lt;groupId&gt;org.javassist&lt;/groupId&gt;\r\n    \t\t\t\t\t&lt;artifactId&gt;javassist&lt;/artifactId&gt;\r\n    \t\t\t\t&lt;/exclusion&gt;\r\n    \t\t\t&lt;/exclusions&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;hibernate-entitymanager&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;${hibernate.version}&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;!-- Hibernate-C3P0 Integration --&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;hibernate-c3p0&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;${hibernate.version}&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \r\n    \t\t&lt;!-- c3p0 --&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;com.mchange&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;c3p0&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;${c3p0.version}&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;hibernate-validator&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;${hibernate.validator.version}&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \r\n    \r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;mysql&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;5.1.34&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \r\n    \t\t&lt;!-- for rest services --&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;${jackson.version}&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;javax.servlet.jsp&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;javax.servlet.jsp-api&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;2.3.3&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \r\n    \t\t&lt;!-- For Aop --&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.aspectj&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;aspectjrt&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;${aspect.version}&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.aspectj&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;aspectjweaver&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;${aspect.version}&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \r\n    \t\t&lt;!-- To Send Email --&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;com.sun.mail&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;javax.mail&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;1.5.4&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \r\n    \r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-security-core&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;5.2.0.RELEASE&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;5.2.0.RELEASE&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-tx&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;5.2.0.RELEASE&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-orm&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;5.2.0.RELEASE&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-security-web&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;5.2.0.RELEASE&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-security-config&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;5.2.0.RELEASE&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \r\n    \t\t&lt;!--logging--&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;log4j-core&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;2.8.2&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;log4j-api&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;2.8.2&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \r\n    \t\t&lt;!-- https://mvnrepository.com/artifact/org.apache.logging.log4j/log4j-web --&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;log4j-web&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;2.13.3&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \r\n    \r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;slf4j-simple&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;1.7.30&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \r\n    \t\t&lt;!-- PostgreSQL --&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.postgresql&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;postgresql&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;42.2.16&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-context-support&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;5.1.3.RELEASE&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;!-- https://mvnrepository.com/artifact/org.springframework.security/spring-security-taglibs --&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-security-taglibs&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;5.1.2.RELEASE&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-context&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;5.2.7.RELEASE&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;!-- https://mvnrepository.com/artifact/org.apache.maven.plugins/maven-war-plugin --&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;3.2.2&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;!-- https://mvnrepository.com/artifact/org.apache.maven.plugins/maven-surefire-plugin --&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;2.22.1&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-web&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;5.2.0.RELEASE&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;!-- https://mvnrepository.com/artifact/org.springframework.data/spring-data-rest-core --&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.data&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-data-rest-core&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;3.3.4.RELEASE&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \r\n    \t&lt;/dependencies&gt;\r\n    \r\n    \t&lt;build&gt;\r\n    \t\t&lt;!-- To define the plugin version in your parent POM --&gt;\r\n    \t\t&lt;pluginManagement&gt;\r\n    \t\t\t&lt;plugins&gt;\r\n    \t\t\t\t&lt;plugin&gt;\r\n    \t\t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n    \t\t\t\t\t&lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n    \t\t\t\t\t&lt;version&gt;2.22.1&lt;/version&gt;\r\n    \t\t\t\t&lt;/plugin&gt;\r\n    \t\t\t&lt;/plugins&gt;\r\n    \t\t&lt;/pluginManagement&gt;\r\n    \t\t&lt;plugins&gt;\r\n    \t\t\t&lt;!-- To use the plugin goals in your POM or parent POM --&gt;\r\n    \r\n    \t\t\t&lt;plugin&gt;\r\n    \t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n    \t\t\t\t&lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n    \t\t\t\t&lt;configuration&gt;\r\n    \t\t\t\t\t&lt;source&gt;1.8&lt;/source&gt;\r\n    \t\t\t\t\t&lt;target&gt;1.8&lt;/target&gt;\r\n    \t\t\t\t&lt;/configuration&gt;\r\n    \t\t\t&lt;/plugin&gt;\r\n    \r\n    \r\n    \r\n    \t\t\t&lt;plugin&gt;\r\n    \t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n    \t\t\t&lt;/plugin&gt;\r\n    \t\t&lt;/plugins&gt;\r\n    \t&lt;/build&gt;\r\n    &lt;/project&gt;","title":"Make certain fields in entity not be saved to the database","body":"<p>I am learning Spring and Hibernate. I prepared the entity of an image. The fields are succesfullu saved to the database as column names, but I need that some of properties to exist in the entity but not be saved to database. But the actually are being saved. I tried to remove a @Column annotation or use <code>@Column(insertable=false, updatable=false)</code> but not succeed. Always got the columns in the database with null value. So how to prevent Spring and Hibernate from create columns of certain fields. I am trying to do it with the fields <code>size</code>, <code>width</code> and <code>height</code>.</p>\n<p><em>Code of the entity:</em></p>\n<pre><code>package tk.trzczy.gallery.domain;\n\nimport javax.persistence.*;\nimport java.awt.*;\nimport java.util.Date;\n\nimport com.fasterxml.jackson.annotation.JsonIgnore;\nimport com.fasterxml.jackson.annotation.JsonProperty;\n\n@Entity\n@Table(name = &quot;images&quot;)\npublic class Image {\n    @Id\n    @SequenceGenerator(name = &quot;mySeqGen6&quot;, sequenceName = &quot;mySeq6&quot;, initialValue = 11, allocationSize = 100)\n    @GeneratedValue(generator = &quot;mySeqGen6&quot;)\n    private Integer id;\n\n    @Column(nullable = false, length = 300)\n    private String title;\n\n    @Column(nullable = false)\n    private String url;\n\n    @Column(insertable=false, updatable=false)\n    private Long width;\n\n    @Column(insertable=false, updatable=false)\n    private Long height;\n\n    @Column(insertable=false, updatable=false)\n    private Dimension size;\n\n    @ManyToOne(cascade=CascadeType.PERSIST,fetch=FetchType.EAGER)\n    @JoinColumn(name=&quot;image_category_id&quot;)\n    private ImageCategory imageCategory;\n\n    @Column(name=&quot;datecreated&quot;, columnDefinition=&quot;TIMESTAMP DEFAULT CURRENT_TIMESTAMP&quot;)\n    private Date dateCreated;\n\n    @PrePersist\n    protected void onCreate() {\n        dateCreated = new Date();\n    }\n\n    @JsonIgnore\n    public Integer getId() {\n        return id;\n    }\n\n    @JsonProperty\n    public void setId(Integer id) {\n        this.id = id;\n    }\n    public String getTitle() {\n        return title;\n    }\n    public void setTitle(String title) {\n        this.title = title;\n    }\n    public String getUrl() {\n        return url;\n    }\n    public void setUrl(String url) {\n        this.url = url;\n    }\n\n    @JsonIgnore\n    public Date getDateCreated() {\n        return dateCreated;\n    }\n\n    @JsonProperty\n    public void setDateCreated(Date dateCreated) {\n        this.dateCreated = dateCreated;\n    }\n\n    public Image() {}\n\n    public Image(Integer id, String title, String url) {\n        this.id = id;\n        this.title = title;\n        this.url = url;\n    }\n\n    @Override\n    public String toString() {\n        return &quot;Post{&quot; +\n                &quot;id=&quot; + id +\n                &quot;, title='&quot; + title + '\\'' +\n                &quot;, url='&quot; + url + '\\'' +\n                &quot;, date=&quot; + dateCreated +\n                '}';\n    }\n\n    @JsonIgnore\n    public ImageCategory getImageCategory() {\n        return imageCategory;\n    }\n\n    @JsonProperty\n    public void setImageCategory(ImageCategory imageCategory) {\n        this.imageCategory = imageCategory;\n    }\n\n    public long getWidth() {\n        return width;\n    }\n\n    public void setWidth(long width) {\n        this.width = width;\n    }\n\n    public long getHeight() {\n        return height;\n    }\n\n    public void setHeight(long height) {\n        this.height = height;\n    }\n\n    public Dimension getSize() {\n        return size;\n    }\n\n    public void setSize(Dimension size) {\n        this.size=size;\n    }\n}\n</code></pre>\n<p><em>pom.xml</em></p>\n<pre><code>&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;groupId&gt;tk.trzczy&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1&lt;/version&gt;\n    &lt;packaging&gt;war&lt;/packaging&gt;\n\n\n    &lt;properties&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n        &lt;aspect.version&gt;1.9.2&lt;/aspect.version&gt;\n        &lt;jackson.version&gt;2.9.8&lt;/jackson.version&gt;\n        &lt;hibernate.version&gt;5.4.2.Final&lt;/hibernate.version&gt;\n        &lt;hibernate.validator.version&gt;5.2.1.Final&lt;/hibernate.validator.version&gt;\n        &lt;c3p0.version&gt;0.9.5.2&lt;/c3p0.version&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencies&gt;\n\n        &lt;!-- servlets and jps --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\n            &lt;artifactId&gt;jstl&lt;/artifactId&gt;\n            &lt;version&gt;1.2&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\n            &lt;artifactId&gt;javax.servlet-api&lt;/artifactId&gt;\n            &lt;version&gt;4.0.1&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.tiles&lt;/groupId&gt;\n            &lt;artifactId&gt;tiles-extras&lt;/artifactId&gt;\n            &lt;version&gt;3.0.8&lt;/version&gt;\n            &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n                    &lt;artifactId&gt;jcl-over-slf4j&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;jboss&lt;/groupId&gt;\n                    &lt;artifactId&gt;javassist&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n            &lt;/exclusions&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;commons-fileupload&lt;/groupId&gt;\n            &lt;artifactId&gt;commons-fileupload&lt;/artifactId&gt;\n            &lt;version&gt;1.3.3&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\n            &lt;artifactId&gt;commons-io&lt;/artifactId&gt;\n            &lt;version&gt;1.3.2&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;!--hibernate--&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n            &lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\n            &lt;version&gt;${hibernate.version}&lt;/version&gt;\n            &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;org.javassist&lt;/groupId&gt;\n                    &lt;artifactId&gt;javassist&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n            &lt;/exclusions&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n            &lt;artifactId&gt;hibernate-entitymanager&lt;/artifactId&gt;\n            &lt;version&gt;${hibernate.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;!-- Hibernate-C3P0 Integration --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n            &lt;artifactId&gt;hibernate-c3p0&lt;/artifactId&gt;\n            &lt;version&gt;${hibernate.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- c3p0 --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.mchange&lt;/groupId&gt;\n            &lt;artifactId&gt;c3p0&lt;/artifactId&gt;\n            &lt;version&gt;${c3p0.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n            &lt;artifactId&gt;hibernate-validator&lt;/artifactId&gt;\n            &lt;version&gt;${hibernate.validator.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;mysql&lt;/groupId&gt;\n            &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\n            &lt;version&gt;5.1.34&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- for rest services --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n            &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\n            &lt;version&gt;${jackson.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.servlet.jsp&lt;/groupId&gt;\n            &lt;artifactId&gt;javax.servlet.jsp-api&lt;/artifactId&gt;\n            &lt;version&gt;2.3.3&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- For Aop --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.aspectj&lt;/groupId&gt;\n            &lt;artifactId&gt;aspectjrt&lt;/artifactId&gt;\n            &lt;version&gt;${aspect.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.aspectj&lt;/groupId&gt;\n            &lt;artifactId&gt;aspectjweaver&lt;/artifactId&gt;\n            &lt;version&gt;${aspect.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- To Send Email --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.sun.mail&lt;/groupId&gt;\n            &lt;artifactId&gt;javax.mail&lt;/artifactId&gt;\n            &lt;version&gt;1.5.4&lt;/version&gt;\n        &lt;/dependency&gt;\n\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-security-core&lt;/artifactId&gt;\n            &lt;version&gt;5.2.0.RELEASE&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;\n            &lt;version&gt;5.2.0.RELEASE&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-tx&lt;/artifactId&gt;\n            &lt;version&gt;5.2.0.RELEASE&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-orm&lt;/artifactId&gt;\n            &lt;version&gt;5.2.0.RELEASE&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-security-web&lt;/artifactId&gt;\n            &lt;version&gt;5.2.0.RELEASE&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-security-config&lt;/artifactId&gt;\n            &lt;version&gt;5.2.0.RELEASE&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;!--logging--&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\n            &lt;artifactId&gt;log4j-core&lt;/artifactId&gt;\n            &lt;version&gt;2.8.2&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\n            &lt;artifactId&gt;log4j-api&lt;/artifactId&gt;\n            &lt;version&gt;2.8.2&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- https://mvnrepository.com/artifact/org.apache.logging.log4j/log4j-web --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\n            &lt;artifactId&gt;log4j-web&lt;/artifactId&gt;\n            &lt;version&gt;2.13.3&lt;/version&gt;\n        &lt;/dependency&gt;\n\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n            &lt;artifactId&gt;slf4j-simple&lt;/artifactId&gt;\n            &lt;version&gt;1.7.30&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- PostgreSQL --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\n            &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\n            &lt;version&gt;42.2.16&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-context-support&lt;/artifactId&gt;\n            &lt;version&gt;5.1.3.RELEASE&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;!-- https://mvnrepository.com/artifact/org.springframework.security/spring-security-taglibs --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-security-taglibs&lt;/artifactId&gt;\n            &lt;version&gt;5.1.2.RELEASE&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-context&lt;/artifactId&gt;\n            &lt;version&gt;5.2.7.RELEASE&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;!-- https://mvnrepository.com/artifact/org.apache.maven.plugins/maven-war-plugin --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\n            &lt;version&gt;3.2.2&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;!-- https://mvnrepository.com/artifact/org.apache.maven.plugins/maven-surefire-plugin --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n            &lt;version&gt;2.22.1&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-web&lt;/artifactId&gt;\n            &lt;version&gt;5.2.0.RELEASE&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;!-- https://mvnrepository.com/artifact/org.springframework.data/spring-data-rest-core --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.data&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-data-rest-core&lt;/artifactId&gt;\n            &lt;version&gt;3.3.4.RELEASE&lt;/version&gt;\n        &lt;/dependency&gt;\n\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;!-- To define the plugin version in your parent POM --&gt;\n        &lt;pluginManagement&gt;\n            &lt;plugins&gt;\n                &lt;plugin&gt;\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                    &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n                    &lt;version&gt;2.22.1&lt;/version&gt;\n                &lt;/plugin&gt;\n            &lt;/plugins&gt;\n        &lt;/pluginManagement&gt;\n        &lt;plugins&gt;\n            &lt;!-- To use the plugin goals in your POM or parent POM --&gt;\n\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;source&gt;1.8&lt;/source&gt;\n                    &lt;target&gt;1.8&lt;/target&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n\n\n\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n"},{"tags":["java","excel","apache-poi","xssf","poi-hssf"],"answers":[{"tags":[],"owner":{"account_id":350017,"reputation":47555,"user_id":685641,"display_name":"Gagravarr"},"down_vote_count":0,"up_vote_count":15,"is_accepted":true,"score":15,"last_activity_date":1427210668,"creation_date":1427210668,"answer_id":29236544,"question_id":29236294,"body_markdown":"Don&#39;t create an empty file and try to read it, that won&#39;t work. An empty zero byte file is not valid, and can&#39;t be loaded Instead, have POI create an new file for you, which you will write later.\r\n\r\nChange the code:\r\n\r\n    if(xlFile.exists() &amp;&amp; !xlFile.isDirectory())\r\n        xlFile.delete(); //delete if file already exists.\r\n    xlFile.createNewFile();\r\n\r\n    inStream = new FileInputStream(xlFile);          \r\n    workbook =  WorkbookFactory.create(inStream);\r\n\r\nTo instead be:\r\n\r\n    if(xlFile.exists() &amp;&amp; !xlFile.isDirectory())\r\n        xlFile.delete(); //delete if file already exists.\r\n\r\n    if (xlFile.toString().endsWith(&quot;.xls&quot;) {\r\n       workbook = new HSSFWorkbook();\r\n    } else {\r\n       workbook = new XSSFWorkbook();\r\n    }\r\n\r\nAlso, if you do want to read an existing file, don&#39;t use a stream if you have a file! See [this bit of the POI docs](http://poi.apache.org/spreadsheet/quick-guide.html#FileInputStream) for why not.","title":"Getting error &quot;Your InputStream was neither an OLE2 stream, nor an OOXML stream&quot; when created file through apache POI","body":"<p>Don't create an empty file and try to read it, that won't work. An empty zero byte file is not valid, and can't be loaded Instead, have POI create an new file for you, which you will write later.</p>\n\n<p>Change the code:</p>\n\n<pre><code>if(xlFile.exists() &amp;&amp; !xlFile.isDirectory())\n    xlFile.delete(); //delete if file already exists.\nxlFile.createNewFile();\n\ninStream = new FileInputStream(xlFile);          \nworkbook =  WorkbookFactory.create(inStream);\n</code></pre>\n\n<p>To instead be:</p>\n\n<pre><code>if(xlFile.exists() &amp;&amp; !xlFile.isDirectory())\n    xlFile.delete(); //delete if file already exists.\n\nif (xlFile.toString().endsWith(\".xls\") {\n   workbook = new HSSFWorkbook();\n} else {\n   workbook = new XSSFWorkbook();\n}\n</code></pre>\n\n<p>Also, if you do want to read an existing file, don't use a stream if you have a file! See <a href=\"http://poi.apache.org/spreadsheet/quick-guide.html#FileInputStream\" rel=\"noreferrer\">this bit of the POI docs</a> for why not.</p>\n"},{"tags":[],"owner":{"account_id":14972420,"reputation":11,"user_id":10808832,"display_name":"Harsh Shiyani"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1698130055,"creation_date":1698130055,"answer_id":77350008,"question_id":29236294,"body_markdown":"You do not need to choose the implementation classes based on the file extension described in the accepted answer.\r\n\r\nIf you are working with XLSX (Excel 2007+ format), you should include the `poi-ooxml` dependency in your project. If you are working with XLS (Excel 97-2003 format), you should include the `poi` dependency.\r\n\r\nFor XLSX (Excel 2007+):\r\n\r\n    &lt;dependency&gt;\r\n    \t&lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;poi-ooxml&lt;/artifactId&gt;\r\n    \t&lt;version&gt;5.2.4&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nAt the end to work with xlsx and xls, you need two dependencies\r\n\r\n**First** \r\n\r\n    &lt;dependency&gt;\r\n     \t&lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\r\n      \t&lt;artifactId&gt;poi&lt;/artifactId&gt;\r\n       \t&lt;version&gt;5.2.4&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n**Second**\r\n\r\n    &lt;dependency&gt;\r\n       \t&lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\r\n       \t&lt;artifactId&gt;poi-ooxml&lt;/artifactId&gt;\r\n       \t&lt;version&gt;5.2.4&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n","title":"Getting error &quot;Your InputStream was neither an OLE2 stream, nor an OOXML stream&quot; when created file through apache POI","body":"<p>You do not need to choose the implementation classes based on the file extension described in the accepted answer.</p>\n<p>If you are working with XLSX (Excel 2007+ format), you should include the <code>poi-ooxml</code> dependency in your project. If you are working with XLS (Excel 97-2003 format), you should include the <code>poi</code> dependency.</p>\n<p>For XLSX (Excel 2007+):</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\n    &lt;artifactId&gt;poi-ooxml&lt;/artifactId&gt;\n    &lt;version&gt;5.2.4&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>At the end to work with xlsx and xls, you need two dependencies</p>\n<p><strong>First</strong></p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\n    &lt;artifactId&gt;poi&lt;/artifactId&gt;\n    &lt;version&gt;5.2.4&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p><strong>Second</strong></p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\n    &lt;artifactId&gt;poi-ooxml&lt;/artifactId&gt;\n    &lt;version&gt;5.2.4&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"}],"owner":{"account_id":5656226,"reputation":291,"user_id":4475334,"accept_rate":47,"display_name":"For Testing"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":79632,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"accepted_answer_id":29236544,"answer_count":2,"score":8,"last_activity_date":1698130055,"creation_date":1427210109,"question_id":29236294,"body_markdown":"  I am trying to check if my excel file already exists. If it doesn&#39;t exists, I want to create a new one and if it exists I will delete it and create a new one. I wrote following program but I am getting error at line - workbook= WorkbookFactory.create(instream); \r\n\r\nThe error is-&gt;\r\njava.lang.IllegalArgumentException: Your InputStream was neither an OLE2 stream, nor an OOXML stream\r\n\tat org.apache.poi.ss.usermodel.WorkbookFactory.create(WorkbookFactory.java:89)\r\n\tat tryIng.main(tryIng.java:84)\r\n\r\n\r\nHere is a program -&gt;\r\n\r\n     try {\r\n    \t\t\t\tString filePath= &quot;C:/Users/pritik/Desktop/t1.xlsx&quot;;\r\n    \t\t\t\tFile file = new File(filePath);\r\n    \t\t\t\tfilePath= file.getAbsolutePath(); \r\n    \t\t\t\txlFile = new File(filePath);\r\n    \t\t\t\t\r\n    \t\t\t\tif(xlFile.exists() &amp;&amp; !xlFile.isDirectory())\r\n    \t\t\t\t\txlFile.delete(); //delete if file already exists.\r\n    \t\t\t\txlFile.createNewFile();\r\n    \t\t\t\t\r\n    \t\t    \tinStream = new FileInputStream(xlFile);\r\n    \t\t    \tworkbook =  WorkbookFactory.create(inStream);  // I get error at this line\r\n    \t\t    \tString sheetName=&quot;NewSheet&quot;;\r\n    \t\t    \tSheet sheet = workbook.createSheet(sheetName);\r\n    \t\t     \tFileOutputStream fOut = new FileOutputStream(xlFile);\r\n    \t\t     \t\r\n    \t\t    \tint i,j;\r\n    \t\t     \txRows = xTS.length;\r\n    \t\t    \txCols = xTS[0].length;\r\n    \t\t    \tfor(i =0;i&lt;xRows;i++)\r\n    \t\t    \t{\r\n    \t\t    \t\trow = sheet.createRow(i);\r\n    \t\t    \t\tfor(j=0;j&lt;xCols;j++)\r\n    \t\t    \t\t{\r\n    \t\t    \t\t\tcell = row.createCell(j);\r\n    \t\t    \t\t\tcell.setCellType(Cell.CELL_TYPE_STRING);\r\n    \t\t    \t\t\tcell.setCellValue(xTS[i][j]);\r\n    \t\t    \t\t} \r\n    \t\t    \t} \r\n    \t\t    \tworkbook.write(fOut);\r\n    \t\t\t\tfOut.flush();\r\n    \t\t\t\tfOut.close();\r\n    \t\t} catch (Exception e) {\r\n    \t\t\t// TODO Auto-generated catch block\r\n    \t\t\te.printStackTrace();\r\n    \t\t}   ","title":"Getting error &quot;Your InputStream was neither an OLE2 stream, nor an OOXML stream&quot; when created file through apache POI","body":"<p>I am trying to check if my excel file already exists. If it doesn't exists, I want to create a new one and if it exists I will delete it and create a new one. I wrote following program but I am getting error at line - workbook= WorkbookFactory.create(instream); </p>\n\n<p>The error is->\njava.lang.IllegalArgumentException: Your InputStream was neither an OLE2 stream, nor an OOXML stream\n    at org.apache.poi.ss.usermodel.WorkbookFactory.create(WorkbookFactory.java:89)\n    at tryIng.main(tryIng.java:84)</p>\n\n<p>Here is a program -></p>\n\n<pre><code> try {\n                String filePath= \"C:/Users/pritik/Desktop/t1.xlsx\";\n                File file = new File(filePath);\n                filePath= file.getAbsolutePath(); \n                xlFile = new File(filePath);\n\n                if(xlFile.exists() &amp;&amp; !xlFile.isDirectory())\n                    xlFile.delete(); //delete if file already exists.\n                xlFile.createNewFile();\n\n                inStream = new FileInputStream(xlFile);\n                workbook =  WorkbookFactory.create(inStream);  // I get error at this line\n                String sheetName=\"NewSheet\";\n                Sheet sheet = workbook.createSheet(sheetName);\n                FileOutputStream fOut = new FileOutputStream(xlFile);\n\n                int i,j;\n                xRows = xTS.length;\n                xCols = xTS[0].length;\n                for(i =0;i&lt;xRows;i++)\n                {\n                    row = sheet.createRow(i);\n                    for(j=0;j&lt;xCols;j++)\n                    {\n                        cell = row.createCell(j);\n                        cell.setCellType(Cell.CELL_TYPE_STRING);\n                        cell.setCellValue(xTS[i][j]);\n                    } \n                } \n                workbook.write(fOut);\n                fOut.flush();\n                fOut.close();\n        } catch (Exception e) {\n            // TODO Auto-generated catch block\n            e.printStackTrace();\n        }   \n</code></pre>\n"},{"tags":["java","javafx","java-20","javafx-19"],"comments":[{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":2,"creation_date":1694262260,"post_id":77071875,"comment_id":135870077,"body_markdown":"What do you think `chk_active.isSelected()` is going to do?","body":"What do you think <code>chk_active.isSelected()</code> is going to do?"},{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":3,"creation_date":1694262301,"post_id":77071875,"comment_id":135870080,"body_markdown":"Off-topic: please use proper naming conventions when posting code on a public site","body":"Off-topic: please use proper naming conventions when posting code on a public site"},{"owner":{"account_id":29234450,"reputation":17,"user_id":22397364,"display_name":"Rashid"},"score":0,"creation_date":1694263000,"post_id":77071875,"comment_id":135870151,"body_markdown":"@James_D - it&#39;s a mistake and I correct that mistake to `chk_active.setSelected(true)`  .","body":"@James_D - it&#39;s a mistake and I correct that mistake to <code>chk_active.setSelected(true)</code>  ."},{"owner":{"account_id":81822,"reputation":204250,"user_id":230513,"accept_rate":100,"display_name":"trashgod"},"score":0,"creation_date":1694264399,"post_id":77071875,"comment_id":135870286,"body_markdown":"Note that [`initialize()`](https://openjfx.io/javadoc/17/javafx.fxml/javafx/fxml/Initializable.html) is invoked _after_ the controller has been processed, but _before_  the `load()` method returns. Some updates may need to be scheduled for later processing on the JavaFX Application Thread.","body":"Note that <a href=\"https://openjfx.io/javadoc/17/javafx.fxml/javafx/fxml/Initializable.html\" rel=\"nofollow noreferrer\"><code>initialize()</code></a> is invoked <i>after</i> the controller has been processed, but <i>before</i>  the <code>load()</code> method returns. Some updates may need to be scheduled for later processing on the JavaFX Application Thread."}],"answers":[{"tags":[],"owner":{"account_id":21741636,"reputation":1166,"user_id":16048914,"display_name":"David Weber"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1698129622,"creation_date":1698129622,"answer_id":77349975,"question_id":77071875,"body_markdown":"**Preface** \r\n\r\nPut system.outs in you method and check If they really are not executed. I think they are executed.\r\n\r\n**Solution**\r\n\r\nInitialize is called after the controller creation is finished. Your Scene is not displayed yet. \r\n\r\nPut your code in `Platform.runLater()`, this will put the execution in the future. \r\n\r\nIf this does not work, set the size of the stage to &quot;+1&quot; and after that again to &quot;-1&quot; (for width and height). This triggers the renderer. \r\n\r\nIf this does not work again, post a working  minimal example of your code.","title":"Some functions and code not invoked in initialize method in JavaFx","body":"<p><strong>Preface</strong></p>\n<p>Put system.outs in you method and check If they really are not executed. I think they are executed.</p>\n<p><strong>Solution</strong></p>\n<p>Initialize is called after the controller creation is finished. Your Scene is not displayed yet.</p>\n<p>Put your code in <code>Platform.runLater()</code>, this will put the execution in the future.</p>\n<p>If this does not work, set the size of the stage to &quot;+1&quot; and after that again to &quot;-1&quot; (for width and height). This triggers the renderer.</p>\n<p>If this does not work again, post a working  minimal example of your code.</p>\n"}],"owner":{"account_id":29234450,"reputation":17,"user_id":22397364,"display_name":"Rashid"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77349975,"answer_count":1,"score":0,"last_activity_date":1698129622,"creation_date":1694256541,"question_id":77071875,"body_markdown":"I tried to build a JavaFX application. In the controller some function in initialize method is not invoked.\r\n\r\nFor example:\r\n\r\n```java\r\n@Override\r\npublic void initialize(URL location, ResourceBundle resources) {\r\n    txt_name.requestFocus();\r\n    btn_update.setVisible(false);\r\n    btn_delete.setVisible(false);\r\n    chk_active.setSelected(true);\r\n    clear();\r\n    listner_txtbx();\r\n    setTable();\r\n    Populate_Table();\r\n}\r\n```\r\nIn the above code, CheckBox selection code and Populate_table method are not invoked and all other methods and codes are invoked.\r\n\r\nThis is the controller file\r\n\r\n```java\r\npublic class BrandController implements Initializable {\r\n    public TextField txt_id;\r\n    public TextField txt_name;\r\n    public TextField txt_remarks;\r\n    public Button btn_save;\r\n    public Button btn_update;\r\n    public Button btn_delete;\r\n    public Button btn_clear;\r\n    public CheckBox chk_active;\r\n    public TableView tbl_brand;\r\n    public TableColumn col_slno;\r\n    public TableColumn col_id;\r\n    public TableColumn col_name;\r\n    public TableColumn col_remarks;\r\n    public TableColumn col_status;\r\n    public Button btn_Close;\r\n    private Stage stage_brand;\r\n    ObservableList&lt;obj_Brand&gt; tblData = FXCollections.observableArrayList();\r\n    DBMysql db = new DBMysql();\r\n\r\n    @Override\r\n    public void initialize(URL location, ResourceBundle resources) {\r\n        txt_name.requestFocus();\r\n        btn_update.setVisible(false);\r\n        btn_delete.setVisible(false);\r\n        chk_active.setSelected(true);\r\n        clear();\r\n        listner_txtbx();\r\n        setTable();\r\n        Populate_Table();\r\n    }\r\n\r\n    private void clear(){\r\n        txt_name.clear();\r\n        txt_remarks.clear();\r\n        setCode();\r\n        txt_name.requestFocus();\r\n\r\n    }\r\n\r\n    private void Populate_Table(){\r\n        System.out.println(&quot;inside table&quot;);\r\n        tblData.clear();\r\n        int status;\r\n        if(chk_active.isSelected()){status=1;}else{status=0;}\r\n        try {\r\n            Statement st = db.con.createStatement();\r\n            System.out.println(&quot;select * from &quot; + db.schema + &quot;.tbl_brand where status =&quot; +status+ &quot;&quot;);\r\n            ResultSet rs = st.executeQuery(&quot;select * from &quot; + db.schema + &quot;.tbl_brand where status =&quot; +status+ &quot;&quot;);\r\n            while (rs.next()) {\r\n                tblData.add(new obj_BrandBuilder().setCode(rs.getString(&quot;code&quot;)).setName(rs.getString(&quot;name&quot;)).setRemarks(rs.getString(&quot;remarks&quot;)).setStatus(rs.getString(&quot;status&quot;)).createObj_Brand());\r\n            }\r\n            st.close();\r\n        } catch (SQLException ex) {\r\n            Logger.getLogger(BrandController.class.getName()).log(Level.SEVERE, null, ex);\r\n        }\r\n    }\r\n```\r\nI tried the Populate_Table method using a Button On Action method and the code is working, but it&#39;s not invoked in the initialize method.\r\n\r\nHow can I fix this?\r\n","title":"Some functions and code not invoked in initialize method in JavaFx","body":"<p>I tried to build a JavaFX application. In the controller some function in initialize method is not invoked.</p>\n<p>For example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Override\npublic void initialize(URL location, ResourceBundle resources) {\n    txt_name.requestFocus();\n    btn_update.setVisible(false);\n    btn_delete.setVisible(false);\n    chk_active.setSelected(true);\n    clear();\n    listner_txtbx();\n    setTable();\n    Populate_Table();\n}\n</code></pre>\n<p>In the above code, CheckBox selection code and Populate_table method are not invoked and all other methods and codes are invoked.</p>\n<p>This is the controller file</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class BrandController implements Initializable {\n    public TextField txt_id;\n    public TextField txt_name;\n    public TextField txt_remarks;\n    public Button btn_save;\n    public Button btn_update;\n    public Button btn_delete;\n    public Button btn_clear;\n    public CheckBox chk_active;\n    public TableView tbl_brand;\n    public TableColumn col_slno;\n    public TableColumn col_id;\n    public TableColumn col_name;\n    public TableColumn col_remarks;\n    public TableColumn col_status;\n    public Button btn_Close;\n    private Stage stage_brand;\n    ObservableList&lt;obj_Brand&gt; tblData = FXCollections.observableArrayList();\n    DBMysql db = new DBMysql();\n\n    @Override\n    public void initialize(URL location, ResourceBundle resources) {\n        txt_name.requestFocus();\n        btn_update.setVisible(false);\n        btn_delete.setVisible(false);\n        chk_active.setSelected(true);\n        clear();\n        listner_txtbx();\n        setTable();\n        Populate_Table();\n    }\n\n    private void clear(){\n        txt_name.clear();\n        txt_remarks.clear();\n        setCode();\n        txt_name.requestFocus();\n\n    }\n\n    private void Populate_Table(){\n        System.out.println(&quot;inside table&quot;);\n        tblData.clear();\n        int status;\n        if(chk_active.isSelected()){status=1;}else{status=0;}\n        try {\n            Statement st = db.con.createStatement();\n            System.out.println(&quot;select * from &quot; + db.schema + &quot;.tbl_brand where status =&quot; +status+ &quot;&quot;);\n            ResultSet rs = st.executeQuery(&quot;select * from &quot; + db.schema + &quot;.tbl_brand where status =&quot; +status+ &quot;&quot;);\n            while (rs.next()) {\n                tblData.add(new obj_BrandBuilder().setCode(rs.getString(&quot;code&quot;)).setName(rs.getString(&quot;name&quot;)).setRemarks(rs.getString(&quot;remarks&quot;)).setStatus(rs.getString(&quot;status&quot;)).createObj_Brand());\n            }\n            st.close();\n        } catch (SQLException ex) {\n            Logger.getLogger(BrandController.class.getName()).log(Level.SEVERE, null, ex);\n        }\n    }\n</code></pre>\n<p>I tried the Populate_Table method using a Button On Action method and the code is working, but it's not invoked in the initialize method.</p>\n<p>How can I fix this?</p>\n"},{"tags":["java","spring","spring-security","http-headers","spring-test"],"answers":[{"tags":[],"owner":{"account_id":4668137,"reputation":6228,"user_id":9681755,"display_name":"Dirk Deyne"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1687279537,"creation_date":1687279537,"answer_id":76516830,"question_id":76516612,"body_markdown":"something like...\r\n\r\n```java\r\npublic SecurityFilterChain filterChain(HttpSecurity http) {\r\n  http.headers(headers -&gt; \r\n     headers.xssProtection(\r\n        xss -&gt; xss.headerValue(XXssProtectionHeaderWriter.HeaderValue.ENABLED_MODE_BLOCK)\r\n     ).contentSecurityPolicy(\r\n\t\tcps -&gt; cps.policyDirectives(&quot;script-src &#39;self&#39; .....&quot;)\r\n\t));\r\n  return http.build();\r\n}\r\n```\r\n\r\nref: [documentation exploits headers](https://docs.spring.io/spring-security/reference/6.1-SNAPSHOT/servlet/exploits/headers.html#servlet-headers-csp)","title":"Headers configuration in Spring Security 6 for automated testing","body":"<p>something like...</p>\n<pre class=\"lang-java prettyprint-override\"><code>public SecurityFilterChain filterChain(HttpSecurity http) {\n  http.headers(headers -&gt; \n     headers.xssProtection(\n        xss -&gt; xss.headerValue(XXssProtectionHeaderWriter.HeaderValue.ENABLED_MODE_BLOCK)\n     ).contentSecurityPolicy(\n        cps -&gt; cps.policyDirectives(&quot;script-src 'self' .....&quot;)\n    ));\n  return http.build();\n}\n</code></pre>\n<p>ref: <a href=\"https://docs.spring.io/spring-security/reference/6.1-SNAPSHOT/servlet/exploits/headers.html#servlet-headers-csp\" rel=\"noreferrer\">documentation exploits headers</a></p>\n"}],"owner":{"account_id":4420200,"reputation":4708,"user_id":3877746,"accept_rate":100,"display_name":"Boni Garc&#237;a"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2103,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76516830,"answer_count":1,"score":1,"last_activity_date":1698129189,"creation_date":1687277560,"question_id":76516612,"body_markdown":"I am using the following configuration code for an automated test using Spring Security:\r\n\r\n```\r\n    @TestConfiguration\r\n    public static class SecurityConfiguration {\r\n        @Bean\r\n        public SecurityFilterChain filterChain(HttpSecurity http)\r\n                throws Exception {\r\n            http.headers().xssProtection().and()\r\n                    .contentSecurityPolicy(&quot;default-src &#39;self&#39;&quot;);\r\n            return http.build();\r\n        }\r\n    }\r\n```\r\n\r\nRecently, I&#39;m getting several warnings because these methods are marked as deprecated:\r\n\r\n```\r\nThe method xssProtection() from the type HeadersConfigurer&lt;HttpSecurity&gt; has been deprecated since version 6.1 and marked for removal\r\nThe method headers() from the type HttpSecurity has been deprecated since version 6.1 and marked for removal\r\nThe method contentSecurityPolicy(String) from the type HeadersConfigurer&lt;HttpSecurity&gt; has been deprecated since version 6.1 and marked for removal\r\nThe method and() from the type HeadersConfigurer&lt;HttpSecurity&gt;.XXssConfig has been deprecated since version 6.1 and marked for removal\r\n```\r\n\r\nDoes anybody know how to make the same configuration using the new configurer/customizer API? \r\n\r\n","title":"Headers configuration in Spring Security 6 for automated testing","body":"<p>I am using the following configuration code for an automated test using Spring Security:</p>\n<pre><code>    @TestConfiguration\n    public static class SecurityConfiguration {\n        @Bean\n        public SecurityFilterChain filterChain(HttpSecurity http)\n                throws Exception {\n            http.headers().xssProtection().and()\n                    .contentSecurityPolicy(&quot;default-src 'self'&quot;);\n            return http.build();\n        }\n    }\n</code></pre>\n<p>Recently, I'm getting several warnings because these methods are marked as deprecated:</p>\n<pre><code>The method xssProtection() from the type HeadersConfigurer&lt;HttpSecurity&gt; has been deprecated since version 6.1 and marked for removal\nThe method headers() from the type HttpSecurity has been deprecated since version 6.1 and marked for removal\nThe method contentSecurityPolicy(String) from the type HeadersConfigurer&lt;HttpSecurity&gt; has been deprecated since version 6.1 and marked for removal\nThe method and() from the type HeadersConfigurer&lt;HttpSecurity&gt;.XXssConfig has been deprecated since version 6.1 and marked for removal\n</code></pre>\n<p>Does anybody know how to make the same configuration using the new configurer/customizer API?</p>\n"},{"tags":["java","javafx"],"comments":[{"owner":{"account_id":322981,"reputation":310744,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1698124807,"post_id":77349591,"comment_id":136361982,"body_markdown":"Please put more effort into your writing when posting here. This site is meant to be more like Wikipedia, less like a casual chatroom. Use proper case, punctuation, and complete sentences. Avoid chit-chat. I re-wrote your post this time, to make it intelligible.","body":"Please put more effort into your writing when posting here. This site is meant to be more like Wikipedia, less like a casual chatroom. Use proper case, punctuation, and complete sentences. Avoid chit-chat. I re-wrote your post this time, to make it intelligible."},{"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"score":3,"creation_date":1698124833,"post_id":77349591,"comment_id":136361990,"body_markdown":"A strong reference in JavaFX is the same thing as a strong reference in plain Java. It means code can still access the object via a reference (e.g., field). With listeners, you only have to remove them if the listener captures a reference to an object that you don&#39;t want the listener to keep alive. There&#39;s also `WeakListener` / `WeakEventHandler`, though that makes your implementation slightly more complex, and should only be a cautionary measure.","body":"A strong reference in JavaFX is the same thing as a strong reference in plain Java. It means code can still access the object via a reference (e.g., field). With listeners, you only have to remove them if the listener captures a reference to an object that you don&#39;t want the listener to keep alive. There&#39;s also <code>WeakListener</code> / <code>WeakEventHandler</code>, though that makes your implementation slightly more complex, and should only be a cautionary measure."},{"owner":{"account_id":1180113,"reputation":152325,"user_id":1155209,"display_name":"jewelsea"},"score":0,"creation_date":1698177562,"post_id":77349591,"comment_id":136371615,"body_markdown":"Off topic: A tool like [grammarly](https://www.grammarly.com) can help address issues that Basil brings up in his comment.  I recommend it.","body":"Off topic: A tool like <a href=\"https://www.grammarly.com\" rel=\"nofollow noreferrer\">grammarly</a> can help address issues that Basil brings up in his comment.  I recommend it."}],"answers":[{"tags":[],"owner":{"account_id":21741636,"reputation":1166,"user_id":16048914,"display_name":"David Weber"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698129031,"creation_date":1698129031,"answer_id":77349930,"question_id":77349591,"body_markdown":"This depends on your code architecture. \r\n\r\nYour controller object reference will exist until you set it manually to null or until Javas garbage collector removes it (because it is not needed anymore). Same for the listeners.\r\n\r\nYour best bet is to test it by yourself in your application. Just use System.outs and check if the button exists and try to click the button programatically in code. \r\n\r\nThere should be a method called `button.fire()` or `button.click()`.","title":"Listeners &amp; Memory leaks in JavaFX","body":"<p>This depends on your code architecture.</p>\n<p>Your controller object reference will exist until you set it manually to null or until Javas garbage collector removes it (because it is not needed anymore). Same for the listeners.</p>\n<p>Your best bet is to test it by yourself in your application. Just use System.outs and check if the button exists and try to click the button programatically in code.</p>\n<p>There should be a method called <code>button.fire()</code> or <code>button.click()</code>.</p>\n"}],"owner":{"account_id":29569552,"reputation":13,"user_id":22662117,"display_name":"Fever_Dream"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":53,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1698129031,"creation_date":1698123071,"question_id":77349591,"body_markdown":"I am practicing JavaFX.\r\n\r\nDo I need to manage listeners manually (attach and detach them from objects) to avoid memory leaks?\r\n\r\nThe context: I have a stage with a main scene. let&#39;s call it a hub. This hub is responsible for changing scenes via changing the container of the scenes (an anchor pane). Every time the change happens I clear the container, and set the controller of the deleted scene to null.\r\n\r\nAn example :\r\n\r\nLet&#39;s say I have a listener in the first scene. The listener listens for button clicks then I wanted to change the scene. Will the listener be active even after I have no references to the button or the scene? \r\n\r\n\r\n```\r\n button.setOnMouseClicked(event-&gt;{\r\n        System.out.println(&quot;clicked&quot;);\r\n    });\r\n```\r\n\r\nHere =&gt; I load the fxml files based on a path given by clicking on a button that corresponds to a specific scene.\r\n\r\n```\r\n  public void load_FXML_file(String path){\r\n\r\n        Thread load=new Thread(() -&gt; {\r\n            try{\r\n                FXMLLoader loader=new FXMLLoader(getClass().getResource(path));\r\n                AtomicReference&lt;AnchorPane&gt; layout=new AtomicReference&lt;&gt;();\r\n                layout.set(loader.load());\r\n\r\n                if(path.contains(&quot;Subjects&quot;)){\r\n                    subjects_view_controller=loader.getController();\r\n                }\r\n                else if(path.contains(&quot;Formation&quot;)){\r\n                    formationHubController=loader.getController();\r\n                }\r\n                \r\n                Platform.runLater(() -&gt; {\r\n                    load(layout.get(),path);\r\n                });\r\n\r\n            }catch (Exception e){\r\n                e.printStackTrace();\r\n            }\r\n\r\n        });\r\n        load.start();\r\n\r\n    }\r\n```\r\nThis is where the scene change happens =&gt; \r\n\r\n```\r\npublic void load(AnchorPane selected_window,String path){\r\n\r\n    if(formationHubController!=null &amp;&amp; !path.contains(&quot;Formation&quot;)){\r\n        formationHubController.stop_timer();\r\n        formationHubController=null;\r\n    }\r\n    else if(subjects_view_controller!=null &amp;&amp; !path.contains(&quot;Subjects&quot;)){\r\n        subjects_view_controller.remove_data();\r\n        subjects_view_controller=null;\r\n    }\r\n\r\n\r\n\r\n    FadeIn fadeIn=new FadeIn();\r\n    if(Container.getChildren().size()!=0){\r\n        FadeOut fadeOut=new FadeOut(Container.getChildren().get(0));\r\n        fadeOut.play();\r\n        fadeOut.setOnFinished(Event-&gt;{\r\n            Container.getChildren().clear();\r\n            Container.getChildren().add(selected_window);\r\n            fadeIn.setNode(selected_window);\r\n            fadeIn.play();\r\n\r\n        });\r\n\r\n    }\r\n    else{\r\n\r\n        Container.getChildren().clear();\r\n        Container.getChildren().add(selected_window);\r\n\r\n        fadeIn.setNode(selected_window);\r\n        fadeIn.play();\r\n    }\r\n\r\n}\r\n```\r\n\r\n… and that&#39;s it.\r\n\r\n\r\nAnd please give me a summary on what is considered a strong reference in JavaFX.  \r\n","title":"Listeners &amp; Memory leaks in JavaFX","body":"<p>I am practicing JavaFX.</p>\n<p>Do I need to manage listeners manually (attach and detach them from objects) to avoid memory leaks?</p>\n<p>The context: I have a stage with a main scene. let's call it a hub. This hub is responsible for changing scenes via changing the container of the scenes (an anchor pane). Every time the change happens I clear the container, and set the controller of the deleted scene to null.</p>\n<p>An example :</p>\n<p>Let's say I have a listener in the first scene. The listener listens for button clicks then I wanted to change the scene. Will the listener be active even after I have no references to the button or the scene?</p>\n<pre><code> button.setOnMouseClicked(event-&gt;{\n        System.out.println(&quot;clicked&quot;);\n    });\n</code></pre>\n<p>Here =&gt; I load the fxml files based on a path given by clicking on a button that corresponds to a specific scene.</p>\n<pre><code>  public void load_FXML_file(String path){\n\n        Thread load=new Thread(() -&gt; {\n            try{\n                FXMLLoader loader=new FXMLLoader(getClass().getResource(path));\n                AtomicReference&lt;AnchorPane&gt; layout=new AtomicReference&lt;&gt;();\n                layout.set(loader.load());\n\n                if(path.contains(&quot;Subjects&quot;)){\n                    subjects_view_controller=loader.getController();\n                }\n                else if(path.contains(&quot;Formation&quot;)){\n                    formationHubController=loader.getController();\n                }\n                \n                Platform.runLater(() -&gt; {\n                    load(layout.get(),path);\n                });\n\n            }catch (Exception e){\n                e.printStackTrace();\n            }\n\n        });\n        load.start();\n\n    }\n</code></pre>\n<p>This is where the scene change happens =&gt;</p>\n<pre><code>public void load(AnchorPane selected_window,String path){\n\n    if(formationHubController!=null &amp;&amp; !path.contains(&quot;Formation&quot;)){\n        formationHubController.stop_timer();\n        formationHubController=null;\n    }\n    else if(subjects_view_controller!=null &amp;&amp; !path.contains(&quot;Subjects&quot;)){\n        subjects_view_controller.remove_data();\n        subjects_view_controller=null;\n    }\n\n\n\n    FadeIn fadeIn=new FadeIn();\n    if(Container.getChildren().size()!=0){\n        FadeOut fadeOut=new FadeOut(Container.getChildren().get(0));\n        fadeOut.play();\n        fadeOut.setOnFinished(Event-&gt;{\n            Container.getChildren().clear();\n            Container.getChildren().add(selected_window);\n            fadeIn.setNode(selected_window);\n            fadeIn.play();\n\n        });\n\n    }\n    else{\n\n        Container.getChildren().clear();\n        Container.getChildren().add(selected_window);\n\n        fadeIn.setNode(selected_window);\n        fadeIn.play();\n    }\n\n}\n</code></pre>\n<p>… and that's it.</p>\n<p>And please give me a summary on what is considered a strong reference in JavaFX.</p>\n"},{"tags":["java","android","kotlin","crash"],"comments":[{"owner":{"account_id":14722107,"reputation":5143,"user_id":10632369,"display_name":"tomerpacific"},"score":1,"creation_date":1698129373,"post_id":77349926,"comment_id":136362521,"body_markdown":"Where exactly is this crash coming from your code? Please share it with us.","body":"Where exactly is this crash coming from your code? Please share it with us."},{"owner":{"account_id":25669279,"reputation":1,"user_id":19433797,"display_name":"Vương Quốc Th&#224;nh"},"score":0,"creation_date":1698131108,"post_id":77349926,"comment_id":136362805,"body_markdown":"No exactly code for this crash. It&#39;s all from Firebase Crashlytics.","body":"No exactly code for this crash. It&#39;s all from Firebase Crashlytics."}],"owner":{"account_id":25669279,"reputation":1,"user_id":19433797,"display_name":"Vương Quốc Th&#224;nh"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1698129030,"creation_date":1698128931,"question_id":77349926,"body_markdown":"    Fatal Exception: java.lang.NullPointerException: Attempt to invoke virtual method &#39;void androidx.fragment.app.Fragment.v3(int, int, int, int)&#39; on a null object reference\r\n           at androidx.fragment.app.BackStackRecord.executePopOps(BackStackRecord.java:487)\r\n           at androidx.fragment.app.FragmentManager.executeOps(FragmentManager.java:2401)\r\n           at androidx.fragment.app.FragmentManager.executeOpsTogether(FragmentManager.java:2162)\r\n           at androidx.fragment.app.FragmentManager.removeRedundantOperationsAndExecute(FragmentManager.java:2100)\r\n           at androidx.fragment.app.FragmentManager.execPendingActions(FragmentManager.java:2002)\r\n           at androidx.fragment.app.FragmentManager$5.run(FragmentManager.java:524)\r\n           at android.os.Handler.handleCallback(Handler.java:883)\r\n           at android.os.Handler.dispatchMessage(Handler.java:100)\r\n           at android.os.Looper.loop(Looper.java:237)\r\n           at android.app.ActivityThread.main(ActivityThread.java:8107)\r\n           at java.lang.reflect.Method.invoke(Method.java)\r\n           at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:496)\r\n           at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1100)\r\n\r\n\r\nNobody can help me? \r\nandroidx.fragment.app.Fragment.v3 is androidx.fragment.app.Fragment.setAnimations\r\n\r\nBut it&#39;s a system function, I can&#39;t change it.\r\n\r\nI have no idea for fix this error.","title":"androidx.fragment.app.BackStackRecord.executePopOps","body":"<pre><code>Fatal Exception: java.lang.NullPointerException: Attempt to invoke virtual method 'void androidx.fragment.app.Fragment.v3(int, int, int, int)' on a null object reference\n       at androidx.fragment.app.BackStackRecord.executePopOps(BackStackRecord.java:487)\n       at androidx.fragment.app.FragmentManager.executeOps(FragmentManager.java:2401)\n       at androidx.fragment.app.FragmentManager.executeOpsTogether(FragmentManager.java:2162)\n       at androidx.fragment.app.FragmentManager.removeRedundantOperationsAndExecute(FragmentManager.java:2100)\n       at androidx.fragment.app.FragmentManager.execPendingActions(FragmentManager.java:2002)\n       at androidx.fragment.app.FragmentManager$5.run(FragmentManager.java:524)\n       at android.os.Handler.handleCallback(Handler.java:883)\n       at android.os.Handler.dispatchMessage(Handler.java:100)\n       at android.os.Looper.loop(Looper.java:237)\n       at android.app.ActivityThread.main(ActivityThread.java:8107)\n       at java.lang.reflect.Method.invoke(Method.java)\n       at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:496)\n       at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1100)\n</code></pre>\n<p>Nobody can help me?\nandroidx.fragment.app.Fragment.v3 is androidx.fragment.app.Fragment.setAnimations</p>\n<p>But it's a system function, I can't change it.</p>\n<p>I have no idea for fix this error.</p>\n"},{"tags":["java","initialization","abstract-class","final"],"answers":[{"tags":[],"owner":{"account_id":13804530,"reputation":402,"user_id":9963783,"display_name":"c.abate"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1588298953,"creation_date":1588298953,"answer_id":61535774,"question_id":61535194,"body_markdown":"I hope I am understanding your question correctly..\r\n\r\nUsually, when a property of a class is always held in a field, it is more concise to use an abstract constructor. For example, consider the two following scenarios....\r\n\r\n```java\r\n// Scenario 1:\r\nabstract class AClass {\r\n    final int field;\r\n    public AClass(int f) {\r\n        field = f;\r\n    }\r\n\r\n    public int getField() {\r\n        return field;\r\n    }\r\n}\r\n\r\nclass Class1 extends AClass {\r\n    public Class1(int f) {\r\n        super(f);\r\n    }\r\n\r\n    // Class Unique Code...\r\n}\r\n\r\nclass Class2 extends AClass {\r\n    public Class2(int f) {\r\n        super(f);\r\n    }\r\n\r\n    // Class Unique Code...\r\n}\r\n\r\n\r\n// Scenario 2:\r\nabstract class AClass {\r\n    public abstract int getField();\r\n}\r\n\r\nclass Class1 extends AClass {\r\n    final int field;\r\n\r\n    public Class1(int f) {\r\n        field = f;\r\n    }\r\n\r\n\r\n    @Override\r\n    public int getField() {\r\n        return field;\r\n    }\r\n    \r\n    // Class Unique Code...\r\n}\r\n\r\n\r\nclass Class2 extends AClass {\r\n    final int field;\r\n\r\n    public Class2(int f) {\r\n        field = f;\r\n    }\r\n\r\n\r\n    @Override\r\n    public int getField() {\r\n        return field;\r\n    }\r\n    \r\n    // Class Unique Code...\r\n}\r\n\r\n```\r\n\r\nScenario 1 is shorter since the getter logic for `field` only needs to be specified once. Whereas in scenario 2, the getter logic must be overridden by both subclasses. I find scenario 2 to be redundant... why write the same code twice when you can use java inheritance to your advantage. \r\n\r\n\r\nAs a final note, I usually don&#39;t hold functions in fields unless totally necessary. Whenever you have a function in a field, it&#39;s usually a sign that an abstract function can be applied.\r\n\r\nHere is your original code with my advice applied...\r\n\r\n```java\r\npublic abstract class MyAbstractClass&lt;T&gt; {\r\n    private final String type;\r\n\r\n    protected MyAbstractClass(String t) {\r\n        type = t;\r\n    }\r\n\r\n    protected abstract T applyFactoryFunction(String value);\r\n\r\n    public T doSomething(String value) { ... }\r\n}\r\n\r\n```\r\n\r\nHope this helped!\r\n\r\n","title":"Abstract class constructor param vs. abstract method for final data","body":"<p>I hope I am understanding your question correctly..</p>\n\n<p>Usually, when a property of a class is always held in a field, it is more concise to use an abstract constructor. For example, consider the two following scenarios....</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>// Scenario 1:\nabstract class AClass {\n    final int field;\n    public AClass(int f) {\n        field = f;\n    }\n\n    public int getField() {\n        return field;\n    }\n}\n\nclass Class1 extends AClass {\n    public Class1(int f) {\n        super(f);\n    }\n\n    // Class Unique Code...\n}\n\nclass Class2 extends AClass {\n    public Class2(int f) {\n        super(f);\n    }\n\n    // Class Unique Code...\n}\n\n\n// Scenario 2:\nabstract class AClass {\n    public abstract int getField();\n}\n\nclass Class1 extends AClass {\n    final int field;\n\n    public Class1(int f) {\n        field = f;\n    }\n\n\n    @Override\n    public int getField() {\n        return field;\n    }\n\n    // Class Unique Code...\n}\n\n\nclass Class2 extends AClass {\n    final int field;\n\n    public Class2(int f) {\n        field = f;\n    }\n\n\n    @Override\n    public int getField() {\n        return field;\n    }\n\n    // Class Unique Code...\n}\n\n</code></pre>\n\n<p>Scenario 1 is shorter since the getter logic for <code>field</code> only needs to be specified once. Whereas in scenario 2, the getter logic must be overridden by both subclasses. I find scenario 2 to be redundant... why write the same code twice when you can use java inheritance to your advantage. </p>\n\n<p>As a final note, I usually don't hold functions in fields unless totally necessary. Whenever you have a function in a field, it's usually a sign that an abstract function can be applied.</p>\n\n<p>Here is your original code with my advice applied...</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>public abstract class MyAbstractClass&lt;T&gt; {\n    private final String type;\n\n    protected MyAbstractClass(String t) {\n        type = t;\n    }\n\n    protected abstract T applyFactoryFunction(String value);\n\n    public T doSomething(String value) { ... }\n}\n\n</code></pre>\n\n<p>Hope this helped!</p>\n"},{"tags":[],"owner":{"account_id":293519,"reputation":1904,"user_id":596855,"accept_rate":89,"display_name":"Andreas Presthammer"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698128818,"creation_date":1698128818,"answer_id":77349920,"question_id":61535194,"body_markdown":"The two approaches seem to be functionally equivalent.\r\n\r\nThe most significant difference is probably in how the code is read by other maintainers of this code. I _believe_ the approch using an overriding abstract method is *less surprising* than the one passing a function to the base class. That _might_ be a strike against the function-passing approach. But in the end, it really falls down to which patterns the team maintaining this code is comfortable with.","title":"Abstract class constructor param vs. abstract method for final data","body":"<p>The two approaches seem to be functionally equivalent.</p>\n<p>The most significant difference is probably in how the code is read by other maintainers of this code. I <em>believe</em> the approch using an overriding abstract method is <em>less surprising</em> than the one passing a function to the base class. That <em>might</em> be a strike against the function-passing approach. But in the end, it really falls down to which patterns the team maintaining this code is comfortable with.</p>\n"}],"owner":{"account_id":1390639,"reputation":23879,"user_id":1321564,"accept_rate":71,"display_name":"Benjamin M"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":579,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1698128818,"creation_date":1588294067,"question_id":61535194,"body_markdown":"What are the pros/cons of using the abstract class constructor vs. an abstract method for passing **final data** to an abstract class?\r\n\r\nPass via constructor:\r\n```java\r\npublic abstract class MyAbstractClass&lt;T&gt; {\r\n  private final String type;\r\n  private final Function&lt;String, T&gt; factoryFn;\r\n\r\n  protected MyAbstractClass(String type, Function&lt;String, T&gt; factoryFn) {\r\n    this.type = type;\r\n    this.factoryFn = factoryFn;\r\n  }\r\n\r\n  public T doSomething(String value) { ... }\r\n}\r\n```\r\n\r\nPass via abstract method:\r\n```java\r\npublic abstract class MyAbstractClass&lt;T&gt; {\r\n  abstract String getType();\r\n\r\n  abstract T getFactoryFn(String value);\r\n\r\n  public T doSomething(String value) { ... }\r\n}\r\n```\r\n\r\nI&#39;m aware that the abstract methods can potentially be misused, because it doesn&#39;t enforce to always return the same value.\r\n\r\nBut apart from that, is it just a matter of personal preference, or are there any real (dis)advantages for using one over the other?\r\n\r\n","title":"Abstract class constructor param vs. abstract method for final data","body":"<p>What are the pros/cons of using the abstract class constructor vs. an abstract method for passing <strong>final data</strong> to an abstract class?</p>\n\n<p>Pass via constructor:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>public abstract class MyAbstractClass&lt;T&gt; {\n  private final String type;\n  private final Function&lt;String, T&gt; factoryFn;\n\n  protected MyAbstractClass(String type, Function&lt;String, T&gt; factoryFn) {\n    this.type = type;\n    this.factoryFn = factoryFn;\n  }\n\n  public T doSomething(String value) { ... }\n}\n</code></pre>\n\n<p>Pass via abstract method:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>public abstract class MyAbstractClass&lt;T&gt; {\n  abstract String getType();\n\n  abstract T getFactoryFn(String value);\n\n  public T doSomething(String value) { ... }\n}\n</code></pre>\n\n<p>I'm aware that the abstract methods can potentially be misused, because it doesn't enforce to always return the same value.</p>\n\n<p>But apart from that, is it just a matter of personal preference, or are there any real (dis)advantages for using one over the other?</p>\n"},{"tags":["java","android","location","fusedlocationproviderapi"],"answers":[{"tags":[],"owner":{"account_id":174936,"reputation":1667,"user_id":404597,"display_name":"ehartwell"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1667230680,"creation_date":1667230680,"answer_id":74265689,"question_id":72449697,"body_markdown":"Android Location reports speed in m/sec. 15 m/sec = 54 kph.","title":"Fused location provider - Location.getSpeed() is very low","body":"<p>Android Location reports speed in m/sec. 15 m/sec = 54 kph.</p>\n"}],"owner":{"account_id":13718455,"reputation":37,"user_id":9899052,"display_name":"Daniel Martinek"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":373,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74265689,"answer_count":1,"score":0,"last_activity_date":1698128471,"creation_date":1654007460,"question_id":72449697,"body_markdown":"In my app I want to track the distance traveled.&lt;br&gt;\r\nI wanted to check whether the user is moving or not.&lt;br&gt;\r\nI tried to look at the speed values, but ```location.getSpeed()``` is always a lot lower than the real speed.\r\n\r\n```\r\nfusedLocationClient = LocationServices.getFusedLocationProviderClient(this);\r\n\r\nlocationRequest = LocationRequest.create();\r\nlocationRequest.setInterval(1000);\r\nlocationRequest.setSmallestDisplacement(0);\r\nlocationRequest.setPriority(LocationRequest.PRIORITY_HIGH_ACCURACY);\r\nlocationRequest.setWaitForAccurateLocation(true);\r\n\r\nlocationCallback = new LocationCallback()\r\n{\r\n   @Override\r\n   public void onLocationResult(@NonNull LocationResult locationResult)\r\n   {\r\n      for (Location location : locationResult.getLocations())\r\n      {\r\n         //OTHER CODE\r\n         //...\r\n\r\n         System.out.println(location.getSpeed());\r\n\r\n         //OTHER CODE\r\n         //...\r\n      }\r\n   }\r\n};\r\n\r\nfusedLocationClient.requestLocationUpdates(locationRequest, locationCallback, Looper.myLooper());\r\n```\r\n\r\nThe values I get don&#39;t make any sense.&lt;br&gt;\r\nOf course, when I stand still I get really small values.&lt;br&gt;\r\nBut when I walk I get values around 1.&lt;br&gt;\r\nAnd when I&#39;m in a car I get values around 10-15 even though I&#39;m actually going cca 50km/h.\r\n\r\nAm I doing something wrong, or is this normal?","title":"Fused location provider - Location.getSpeed() is very low","body":"<p>In my app I want to track the distance traveled.<br>\nI wanted to check whether the user is moving or not.<br>\nI tried to look at the speed values, but <code>location.getSpeed()</code> is always a lot lower than the real speed.</p>\n<pre><code>fusedLocationClient = LocationServices.getFusedLocationProviderClient(this);\n\nlocationRequest = LocationRequest.create();\nlocationRequest.setInterval(1000);\nlocationRequest.setSmallestDisplacement(0);\nlocationRequest.setPriority(LocationRequest.PRIORITY_HIGH_ACCURACY);\nlocationRequest.setWaitForAccurateLocation(true);\n\nlocationCallback = new LocationCallback()\n{\n   @Override\n   public void onLocationResult(@NonNull LocationResult locationResult)\n   {\n      for (Location location : locationResult.getLocations())\n      {\n         //OTHER CODE\n         //...\n\n         System.out.println(location.getSpeed());\n\n         //OTHER CODE\n         //...\n      }\n   }\n};\n\nfusedLocationClient.requestLocationUpdates(locationRequest, locationCallback, Looper.myLooper());\n</code></pre>\n<p>The values I get don't make any sense.<br>\nOf course, when I stand still I get really small values.<br>\nBut when I walk I get values around 1.<br>\nAnd when I'm in a car I get values around 10-15 even though I'm actually going cca 50km/h.</p>\n<p>Am I doing something wrong, or is this normal?</p>\n"},{"tags":["java","azure","azure-blob-storage","azure-java-sdk"],"comments":[{"owner":{"account_id":24745827,"reputation":308,"user_id":18632018,"display_name":"Julian H&#252;ppauff"},"score":1,"creation_date":1667987195,"post_id":74371737,"comment_id":131296649,"body_markdown":"Did you have a look at the documentation? https://learn.microsoft.com/en-us/java/api/overview/azure/storage-blob-readme?view=azure-java-stable","body":"Did you have a look at the documentation? <a href=\"https://learn.microsoft.com/en-us/java/api/overview/azure/storage-blob-readme?view=azure-java-stable\" rel=\"nofollow noreferrer\">learn.microsoft.com/en-us/java/api/overview/azure/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":25323437,"reputation":5142,"user_id":19144428,"display_name":"Venkatesan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1668516097,"creation_date":1668516097,"answer_id":74445815,"question_id":74371737,"body_markdown":"***I tried in my environment and got successfully uploaded file with timestamp in azure blob storage:***\r\n\r\n**Code:**\r\n\r\n    package  com.blobs.quickstart;\r\n    import  org.apache.commons.lang3.time.StopWatch;\r\n    import  com.azure.storage.blob.*;\r\n    import  com.azure.storage.blob.BlobServiceClient;\r\n   \r\n    public  class  App\r\n    {\r\n    public  static  void  main( String[] args )\r\n    {\r\n    String  connectStr = &quot;&lt; Connection string &gt;&quot;;\r\n    BlobServiceClient  blobServiceClient = new  BlobServiceClientBuilder().connectionString(connectStr).buildClient();\r\n    String  containerName = &quot;test&quot;;\r\n    BlobContainerClient  containerClient = blobServiceClient.getBlobContainerClient(containerName);\r\n    String  localPath = &quot;path of your file&quot;;\r\n    BlobClient  blobClient = containerClient.getBlobClient(&quot;barcode.docx&quot;);\r\n    StopWatch  watch = new  StopWatch();\r\n    watch.start();\r\n    System.out.println(&quot;\\nUploading to Blob storage as blob:\\n\\t&quot; + blobClient.getBlobUrl());\r\n    blobClient.uploadFromFile(localPath);\r\n    watch.stop();\r\n    System.out.println(&quot;Time Elapsed: &quot; + watch.getTime());\r\n    }\r\n    }\r\n\r\n**Console:**\r\n\r\n![enter image description here](https://i.stack.imgur.com/gakjf.png)\r\n\r\n**Portal:**\r\n\r\n![enter image description here](https://i.stack.imgur.com/QrUf5.png)\r\n\r\n**Reference:**\r\nhttps://learn.microsoft.com/en-us/azure/storage/blobs/storage-quickstart-blobs-java?tabs=powershell%2Cmanaged-identity%2Croles-azure-portal%2Csign-in-azure-cli\r\n\r\n","title":"Upload a file to Azure Blob storage using Java","body":"<p><em><strong>I tried in my environment and got successfully uploaded file with timestamp in azure blob storage:</strong></em></p>\n<p><strong>Code:</strong></p>\n<pre><code>package  com.blobs.quickstart;\nimport  org.apache.commons.lang3.time.StopWatch;\nimport  com.azure.storage.blob.*;\nimport  com.azure.storage.blob.BlobServiceClient;\n\npublic  class  App\n{\npublic  static  void  main( String[] args )\n{\nString  connectStr = &quot;&lt; Connection string &gt;&quot;;\nBlobServiceClient  blobServiceClient = new  BlobServiceClientBuilder().connectionString(connectStr).buildClient();\nString  containerName = &quot;test&quot;;\nBlobContainerClient  containerClient = blobServiceClient.getBlobContainerClient(containerName);\nString  localPath = &quot;path of your file&quot;;\nBlobClient  blobClient = containerClient.getBlobClient(&quot;barcode.docx&quot;);\nStopWatch  watch = new  StopWatch();\nwatch.start();\nSystem.out.println(&quot;\\nUploading to Blob storage as blob:\\n\\t&quot; + blobClient.getBlobUrl());\nblobClient.uploadFromFile(localPath);\nwatch.stop();\nSystem.out.println(&quot;Time Elapsed: &quot; + watch.getTime());\n}\n}\n</code></pre>\n<p><strong>Console:</strong></p>\n<p><img src=\"https://i.stack.imgur.com/gakjf.png\" alt=\"enter image description here\" /></p>\n<p><strong>Portal:</strong></p>\n<p><img src=\"https://i.stack.imgur.com/QrUf5.png\" alt=\"enter image description here\" /></p>\n<p><strong>Reference:</strong>\n<a href=\"https://learn.microsoft.com/en-us/azure/storage/blobs/storage-quickstart-blobs-java?tabs=powershell%2Cmanaged-identity%2Croles-azure-portal%2Csign-in-azure-cli\" rel=\"nofollow noreferrer\">https://learn.microsoft.com/en-us/azure/storage/blobs/storage-quickstart-blobs-java?tabs=powershell%2Cmanaged-identity%2Croles-azure-portal%2Csign-in-azure-cli</a></p>\n"}],"owner":{"account_id":22359963,"reputation":11,"user_id":16576631,"display_name":"Pratik Dey"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2986,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1698128435,"creation_date":1667981872,"question_id":74371737,"body_markdown":"How to upload a file to Azure Blob storage using Azure Java SDK and also print the timestamp after uploading the file?","title":"Upload a file to Azure Blob storage using Java","body":"<p>How to upload a file to Azure Blob storage using Azure Java SDK and also print the timestamp after uploading the file?</p>\n"},{"tags":["java","postgresql","scala","jdbc"],"comments":[{"owner":{"account_id":7034556,"reputation":12325,"user_id":5389127,"display_name":"Ga&#235;l J"},"score":0,"creation_date":1698124638,"post_id":77347918,"comment_id":136361957,"body_markdown":"Could you show us a SQL query that works for inserting in Postgresql? Then we can help you run it from Java/Scala `PreparedStatement`.","body":"Could you show us a SQL query that works for inserting in Postgresql? Then we can help you run it from Java/Scala <code>PreparedStatement</code>."},{"owner":{"account_id":7649507,"reputation":63,"user_id":5798848,"display_name":"Pelab"},"score":0,"creation_date":1698127456,"post_id":77347918,"comment_id":136362241,"body_markdown":"Hi @Gaei J,  Thanks for replying. Below is the SQL Query\n\nINSERT INTO etl.data_refresh_snapshot\nselect l.logdate::timestamp-l.enddate::timestamp as job_run_duration from (some nested query)","body":"Hi @Gaei J,  Thanks for replying. Below is the SQL Query  INSERT INTO etl.data_refresh_snapshot select l.logdate::timestamp-l.enddate::timestamp as job_run_duration from (some nested query)"}],"answers":[{"tags":[],"owner":{"account_id":9727861,"reputation":2565,"user_id":7214091,"display_name":"Gast&#243;n Schabas"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1698127723,"creation_date":1698127723,"answer_id":77349847,"question_id":77347918,"body_markdown":"Seems like you are using JDBC without any library. If that is the case, the postgresql JDBC driver has the class [PGInterval](https://javadoc.io/static/org.postgresql/postgresql/42.2.3.jre7/org/postgresql/util/PGInterval.html#PGInterval(int,%20int,%20int,%20int,%20int,%20double)). \r\n\r\nInstead of `setTime`, you have to use `setObject` and pass an instance of `PGInterval` as the parameter. Based on your example, you should write something like\r\n\r\n```scala\r\nval sql = &quot;INSERT into etl.mls_refresh_snapshot(job_name, job_type, job_frequency, source_table_name, source_count, target_count, job_run_duration, started_at, ended_at)&quot;\r\n\r\nval statement : PreparedStatement = conn.prepareStatement(sql)\r\n\r\nval pgInterval = new PGInterval(1,1,1,1,1,1,1)\r\nstatement.setObject(6, pgInterval)\r\n```\r\n\r\nIn case you need to to a select and get the value of that column, you have to do the following\r\n\r\n```scala\r\nval result = statement.executeQuery(&quot;SELECT job_name, job_type, job_frequency, source_table_name, source_count, target_count, job_run_duration, started_at, ended_at FROM etl.mls_refresh_snapshot&quot;)\r\nresult.next()\r\nval interval: PGInterval = result.getObject(6, classOf[PGInterval])\r\n```\r\n\r\n-------------------\r\n\r\nHere you have basic but complete example of how to create a table, insert an interval value and fetch it from the table\r\n\r\n- `build.sbt`\r\n\r\n```scala\r\nlibraryDependencies ++= Seq(\r\n  &quot;com.dimafeng&quot; %% &quot;testcontainers-scala-scalatest&quot; % &quot;0.41.0&quot; % Test,\r\n  &quot;com.dimafeng&quot; %% &quot;testcontainers-scala-postgresql&quot; % &quot;0.41.0&quot; % Test,\r\n  &quot;org.postgresql&quot; % &quot;postgresql&quot; % &quot;42.5.4&quot;\r\n)\r\n```\r\n\r\n- `src/test/scala/PostgresqlContainerTest.scala`\r\n\r\n```scala\r\nimport com.dimafeng.testcontainers.PostgreSQLContainer\r\nimport com.dimafeng.testcontainers.scalatest.TestContainerForAll\r\nimport org.postgresql.util.PGInterval\r\nimport org.scalatest.funsuite.AsyncFunSuite\r\nimport org.scalatest.matchers.should.Matchers\r\nimport org.testcontainers.utility.DockerImageName\r\n\r\nimport java.sql.{DriverManager, PreparedStatement, Statement}\r\n\r\nclass PostgresqlContainerTest\r\n    extends AsyncFunSuite\r\n    with Matchers\r\n    with TestContainerForAll {\r\n\r\n  override val containerDef =\r\n    PostgreSQLContainer.Def(DockerImageName.parse(&quot;postgres:15.4-alpine3.18&quot;))\r\n\r\n  test(&quot;CRUD for interval type column&quot;) {\r\n    withContainers { pgContainer =&gt;\r\n      // load driver\r\n      Class.forName(pgContainer.driverClassName)\r\n\r\n      // connect\r\n      val connection = DriverManager.getConnection(\r\n        pgContainer.jdbcUrl,\r\n        pgContainer.username,\r\n        pgContainer.password\r\n      )\r\n\r\n      // create table with interval column\r\n      val stmt: Statement = connection.createStatement\r\n      val sql = &quot;CREATE TABLE interval_table (interval_column Interval)&quot;\r\n      stmt.executeUpdate(sql)\r\n\r\n      val years = 1\r\n      val months = 4\r\n      val days = 3\r\n      val hours = 3\r\n      val minutes = 22\r\n      val seconds = 42\r\n\r\n      // create the PGInterval object\r\n      val pgInterval: PGInterval =\r\n        new PGInterval(years, months, days, hours, minutes, seconds)\r\n\r\n      // insert into table with interval value\r\n      val preparedStatement: PreparedStatement = connection.prepareStatement(\r\n        &quot;INSERT INTO interval_table(interval_column) VALUES (?)&quot;\r\n      )\r\n\r\n      // set the value using `setObject` and using `PGInterval` as parameter\r\n      preparedStatement.setObject(1, pgInterval)\r\n      preparedStatement.executeUpdate()\r\n\r\n      // query the record saved before\r\n      val select = connection.createStatement()\r\n      val result =\r\n        select.executeQuery(&quot;SELECT interval_column FROM interval_table&quot;)\r\n      result.next()\r\n\r\n      // get the interval value from the column\r\n      val interval: PGInterval = result.getObject(1, classOf[PGInterval])\r\n\r\n      // assert the expected values\r\n      interval.getYears should be(years)\r\n      interval.getMonths should be(months)\r\n      interval.getDays should be(days)\r\n      interval.getHours should be(hours)\r\n      interval.getMinutes should be(minutes)\r\n      interval.getSeconds should be(seconds)\r\n    }\r\n  }\r\n}\r\n```","title":"how to insert interval value to postgres using scala","body":"<p>Seems like you are using JDBC without any library. If that is the case, the postgresql JDBC driver has the class <a href=\"https://javadoc.io/static/org.postgresql/postgresql/42.2.3.jre7/org/postgresql/util/PGInterval.html#PGInterval(int,%20int,%20int,%20int,%20int,%20double)\" rel=\"nofollow noreferrer\">PGInterval</a>.</p>\n<p>Instead of <code>setTime</code>, you have to use <code>setObject</code> and pass an instance of <code>PGInterval</code> as the parameter. Based on your example, you should write something like</p>\n<pre class=\"lang-scala prettyprint-override\"><code>val sql = &quot;INSERT into etl.mls_refresh_snapshot(job_name, job_type, job_frequency, source_table_name, source_count, target_count, job_run_duration, started_at, ended_at)&quot;\n\nval statement : PreparedStatement = conn.prepareStatement(sql)\n\nval pgInterval = new PGInterval(1,1,1,1,1,1,1)\nstatement.setObject(6, pgInterval)\n</code></pre>\n<p>In case you need to to a select and get the value of that column, you have to do the following</p>\n<pre class=\"lang-scala prettyprint-override\"><code>val result = statement.executeQuery(&quot;SELECT job_name, job_type, job_frequency, source_table_name, source_count, target_count, job_run_duration, started_at, ended_at FROM etl.mls_refresh_snapshot&quot;)\nresult.next()\nval interval: PGInterval = result.getObject(6, classOf[PGInterval])\n</code></pre>\n<hr />\n<p>Here you have basic but complete example of how to create a table, insert an interval value and fetch it from the table</p>\n<ul>\n<li><code>build.sbt</code></li>\n</ul>\n<pre class=\"lang-scala prettyprint-override\"><code>libraryDependencies ++= Seq(\n  &quot;com.dimafeng&quot; %% &quot;testcontainers-scala-scalatest&quot; % &quot;0.41.0&quot; % Test,\n  &quot;com.dimafeng&quot; %% &quot;testcontainers-scala-postgresql&quot; % &quot;0.41.0&quot; % Test,\n  &quot;org.postgresql&quot; % &quot;postgresql&quot; % &quot;42.5.4&quot;\n)\n</code></pre>\n<ul>\n<li><code>src/test/scala/PostgresqlContainerTest.scala</code></li>\n</ul>\n<pre class=\"lang-scala prettyprint-override\"><code>import com.dimafeng.testcontainers.PostgreSQLContainer\nimport com.dimafeng.testcontainers.scalatest.TestContainerForAll\nimport org.postgresql.util.PGInterval\nimport org.scalatest.funsuite.AsyncFunSuite\nimport org.scalatest.matchers.should.Matchers\nimport org.testcontainers.utility.DockerImageName\n\nimport java.sql.{DriverManager, PreparedStatement, Statement}\n\nclass PostgresqlContainerTest\n    extends AsyncFunSuite\n    with Matchers\n    with TestContainerForAll {\n\n  override val containerDef =\n    PostgreSQLContainer.Def(DockerImageName.parse(&quot;postgres:15.4-alpine3.18&quot;))\n\n  test(&quot;CRUD for interval type column&quot;) {\n    withContainers { pgContainer =&gt;\n      // load driver\n      Class.forName(pgContainer.driverClassName)\n\n      // connect\n      val connection = DriverManager.getConnection(\n        pgContainer.jdbcUrl,\n        pgContainer.username,\n        pgContainer.password\n      )\n\n      // create table with interval column\n      val stmt: Statement = connection.createStatement\n      val sql = &quot;CREATE TABLE interval_table (interval_column Interval)&quot;\n      stmt.executeUpdate(sql)\n\n      val years = 1\n      val months = 4\n      val days = 3\n      val hours = 3\n      val minutes = 22\n      val seconds = 42\n\n      // create the PGInterval object\n      val pgInterval: PGInterval =\n        new PGInterval(years, months, days, hours, minutes, seconds)\n\n      // insert into table with interval value\n      val preparedStatement: PreparedStatement = connection.prepareStatement(\n        &quot;INSERT INTO interval_table(interval_column) VALUES (?)&quot;\n      )\n\n      // set the value using `setObject` and using `PGInterval` as parameter\n      preparedStatement.setObject(1, pgInterval)\n      preparedStatement.executeUpdate()\n\n      // query the record saved before\n      val select = connection.createStatement()\n      val result =\n        select.executeQuery(&quot;SELECT interval_column FROM interval_table&quot;)\n      result.next()\n\n      // get the interval value from the column\n      val interval: PGInterval = result.getObject(1, classOf[PGInterval])\n\n      // assert the expected values\n      interval.getYears should be(years)\n      interval.getMonths should be(months)\n      interval.getDays should be(days)\n      interval.getHours should be(hours)\n      interval.getMinutes should be(minutes)\n      interval.getSeconds should be(seconds)\n    }\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":7649507,"reputation":63,"user_id":5798848,"display_name":"Pelab"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":65,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77349847,"answer_count":1,"score":0,"last_activity_date":1698127723,"creation_date":1698090119,"question_id":77347918,"body_markdown":"I am using the below code to insert data to interval data type of a postgres table but I am getting some error.\r\n\r\n```\r\nvar tm1 =  LocalDateTime.now()\r\nvar tm2 =  LocalDateTime.now()\r\n\r\nvar milliseconds = tm1.until(tm2, ChronoUnit.MILLIS)\r\n\r\nvar seconds = (milliseconds / 1000) % 60\r\nvar minutes = (milliseconds / (1000*60)) % 60\r\nvar hours   = (milliseconds / (1000*60*60)) % 24\r\nvar milisec = milliseconds - ((seconds * 1000) + (minutes * 60 * 1000) + (hours * 60 *60 * 1000))\r\n\r\nvar secondsNew = if (seconds.toString().length() == 1) &quot;0&quot; + seconds else seconds\r\nvar minutesNew = if (minutes.toString().length() == 1) &quot;0&quot; + minutes else minutes\r\nvar hoursNew = if (hours.toString().length() == 1) &quot;0&quot; + hours else hours\r\nvar milisecNew = if (milisec.toString().length() == 1) milisec + &quot;00&quot;  else if (milisec.toString().length() == 2)  milisec + &quot;0&quot; else milisec\r\n\r\nvar timeString = &quot;%s:%s:%s&quot;.format(hoursNew, minutesNew, secondsNew)\r\nvar duration = LocalTime.parse(timeString)\r\n\r\nvar tm = Time.valueOf(DateTimeFormatter.ofPattern(&quot;HH:mm:ss&quot;).format(duration))\r\n\r\n==&gt; insertion\r\n\r\nsql = &quot;INSERT into etl.mls_refresh_snapshot(job_name,job_type,job_frequency,\r\nsource_table_name,source_count,target_count,job_run_duration,started_at,ended_at) VALUES(?,?,?,?,?,?::interval,?,?)&quot;\r\n\r\nvar statement : PreparedStatement = conn.prepareStatement(sql)\r\nstatement.setTime(6,Time.valueOf(DateTimeFormatter.ofPattern(&quot;HH:mm:ss.SSS&quot;).format(duration)))\r\n.......\r\nError :: java.lang.NumberFormatException: For input string: &quot;18.000&quot;\r\n```\r\n\r\nIf I change the format to miliseconds =&gt;\r\n\r\n```\r\nvar timeString = &quot;%s:%s:%s.%s&quot;.format(hoursNew, minutesNew, secondsNew, milisecNew)\r\nvar duration = LocalTime.parse(timeString)\r\nvar tm = Time.valueOf(DateTimeFormatter.ofPattern(&quot;HH:mm:ss.SSS&quot;).format(duration))\r\n\r\nI am getting ERROR: invalid input syntax for type interval: &quot;00:02:07+05:30&quot;\r\n```\r\n\r\nPlease help me out on this !!!","title":"how to insert interval value to postgres using scala","body":"<p>I am using the below code to insert data to interval data type of a postgres table but I am getting some error.</p>\n<pre><code>var tm1 =  LocalDateTime.now()\nvar tm2 =  LocalDateTime.now()\n\nvar milliseconds = tm1.until(tm2, ChronoUnit.MILLIS)\n\nvar seconds = (milliseconds / 1000) % 60\nvar minutes = (milliseconds / (1000*60)) % 60\nvar hours   = (milliseconds / (1000*60*60)) % 24\nvar milisec = milliseconds - ((seconds * 1000) + (minutes * 60 * 1000) + (hours * 60 *60 * 1000))\n\nvar secondsNew = if (seconds.toString().length() == 1) &quot;0&quot; + seconds else seconds\nvar minutesNew = if (minutes.toString().length() == 1) &quot;0&quot; + minutes else minutes\nvar hoursNew = if (hours.toString().length() == 1) &quot;0&quot; + hours else hours\nvar milisecNew = if (milisec.toString().length() == 1) milisec + &quot;00&quot;  else if (milisec.toString().length() == 2)  milisec + &quot;0&quot; else milisec\n\nvar timeString = &quot;%s:%s:%s&quot;.format(hoursNew, minutesNew, secondsNew)\nvar duration = LocalTime.parse(timeString)\n\nvar tm = Time.valueOf(DateTimeFormatter.ofPattern(&quot;HH:mm:ss&quot;).format(duration))\n\n==&gt; insertion\n\nsql = &quot;INSERT into etl.mls_refresh_snapshot(job_name,job_type,job_frequency,\nsource_table_name,source_count,target_count,job_run_duration,started_at,ended_at) VALUES(?,?,?,?,?,?::interval,?,?)&quot;\n\nvar statement : PreparedStatement = conn.prepareStatement(sql)\nstatement.setTime(6,Time.valueOf(DateTimeFormatter.ofPattern(&quot;HH:mm:ss.SSS&quot;).format(duration)))\n.......\nError :: java.lang.NumberFormatException: For input string: &quot;18.000&quot;\n</code></pre>\n<p>If I change the format to miliseconds =&gt;</p>\n<pre><code>var timeString = &quot;%s:%s:%s.%s&quot;.format(hoursNew, minutesNew, secondsNew, milisecNew)\nvar duration = LocalTime.parse(timeString)\nvar tm = Time.valueOf(DateTimeFormatter.ofPattern(&quot;HH:mm:ss.SSS&quot;).format(duration))\n\nI am getting ERROR: invalid input syntax for type interval: &quot;00:02:07+05:30&quot;\n</code></pre>\n<p>Please help me out on this !!!</p>\n"},{"tags":["java","spring-boot","port","clean-architecture","hexagonal-architecture"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1695804777,"post_id":77185806,"comment_id":136071887,"body_markdown":"And what if you need to be able to switch? Say you have a service that writes directly to the database and another one that writes to Kafka (RabbitMQ whatever). How would you switch that in a class based scenario?","body":"And what if you need to be able to switch? Say you have a service that writes directly to the database and another one that writes to Kafka (RabbitMQ whatever). How would you switch that in a class based scenario?"},{"owner":{"account_id":6496722,"reputation":123,"user_id":5029103,"display_name":"Ilias Mertzanidis"},"score":0,"creation_date":1695805303,"post_id":77185806,"comment_id":136071988,"body_markdown":"But still you would have to write a new service and a somehow make sure that this specific new service is called at the specific KafkaConsumer, right?","body":"But still you would have to write a new service and a somehow make sure that this specific new service is called at the specific KafkaConsumer, right?"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":2,"creation_date":1695805329,"post_id":77185806,"comment_id":136071992,"body_markdown":"Yes but using qualifiers that could be a matter of simple configuration instead of code changes.","body":"Yes but using qualifiers that could be a matter of simple configuration instead of code changes."},{"owner":{"account_id":6496722,"reputation":123,"user_id":5029103,"display_name":"Ilias Mertzanidis"},"score":0,"creation_date":1695814307,"post_id":77185806,"comment_id":136073774,"body_markdown":"Nice, but still one would have to change the naming of the called Port in the Controller, so that the qualifier works right? So you would still have to change the existing code or am I missing something. \nPlease post your opinion here unterneath in form of code so that we could speak on a concrete example. Thank you.","body":"Nice, but still one would have to change the naming of the called Port in the Controller, so that the qualifier works right? So you would still have to change the existing code or am I missing something.  Please post your opinion here unterneath in form of code so that we could speak on a concrete example. Thank you."},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1695823691,"post_id":77185806,"comment_id":136075843,"body_markdown":"No as you could enable just 1 which would be automatically injected. There are various options. But this starts to feel like an opinionated answer.","body":"No as you could enable just 1 which would be automatically injected. There are various options. But this starts to feel like an opinionated answer."},{"owner":{"account_id":6496722,"reputation":123,"user_id":5029103,"display_name":"Ilias Mertzanidis"},"score":0,"creation_date":1695844751,"post_id":77185806,"comment_id":136079852,"body_markdown":"Hey Deinum thanks a lot, in contrary. It was quite helpful your posts!","body":"Hey Deinum thanks a lot, in contrary. It was quite helpful your posts!"}],"answers":[{"tags":[],"owner":{"account_id":947184,"reputation":48994,"user_id":974186,"accept_rate":79,"display_name":"Ren&#233; Link"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1698127638,"creation_date":1698038219,"answer_id":77342760,"question_id":77185806,"body_markdown":"&gt; I am just wandering what is hier the exact benefit of having just an interface? What would be the difference if the Kafka consumer and the Controller use directly the CreateOrderService?\r\n\r\nYou can test it more easily, because you need less effort to create a mock.\r\n\r\n    class OrderControllerTest {\r\n    \r\n        private String customerId;\r\n    \r\n        @Test\r\n        void createOrder() {\r\n            CreateOrderPort createOrderPortMock = customerId -&gt; OrderControllerTest.this.customerId = customerId;\r\n            OrderController orderController = new OrderController(createOrderPortMock);\r\n    \r\n            orderController.createOrder(&quot;1234&quot;);\r\n    \r\n            assertEquals(&quot;1234&quot;, customerId);\r\n        }\r\n    }\r\n\r\nIn a more complex scenario you might want to create a mock class that implements the input port\r\nor you might want to create a dedicated class for better readability.\r\n\r\n    class OrderControllerTest {\r\n\r\n        class CreateOrderPortMock implements CreateOrderPort {\r\n\r\n            private String customerId;\r\n\r\n            @Override\r\n            public void createOrder(String customerId) {\r\n                this.customerId = customerId;\r\n            }\r\n\r\n            public void assertCreateOrderInvoked(String expectedCustomerId){\r\n                assertEquals(expectedCustomerId, this.customerId);\r\n            }\r\n        }\r\n\r\n\r\n        @Test\r\n        void createOrder() {\r\n            CreateOrderPortMock createOrderPortMock = new CreateOrderPortMock();\r\n            OrderController orderController = new OrderController(createOrderPortMock);\r\n\r\n            orderController.createOrder(&quot;1234&quot;);\r\n\r\n            createOrderPortMock.assertCreateOrderInvoked(&quot;1234&quot;);\r\n        }\r\n    }\r\n\r\nSure, one might argue that you can also just extend the real implementation and override the method. But this\r\nmight be tricky, because of constructor args that the real implementation needs in order to be created. When\r\nyou use the real implementation you have to deal with the real implementations dependencies. \r\n\r\n    public class CreateOrderService implements CreateOrderPort {\r\n    \r\n        private OrderRepository orderRepository;\r\n    \r\n        public CreateOrderService(OrderRepository orderRepository) {\r\n            this.orderRepository = Objects.requireNonNull(orderRepository);\r\n        }\r\n    \r\n        public void createOrder(String customerId){\r\n            orderRepository.save(new Order(customerId));\r\n        }\r\n    }\r\n\r\nIf the real implementation does checks in the constructor or executes some logic, you need to satisfy all these\r\npreconditions in order to create a mock just to override the createOrder method. If you do so your test is bound\r\nto all of those preconditions. This means that it will break even if it has nothing to do with the things it made\r\nit break. E.g. if someone changes the constructor logic your &quot;create order controller&quot; test would break.\r\n\r\nFinally, if you use an interface you don&#39;t need fancy mocking frameworks that use cglib proxies or anything else\r\nto just mock the simple input port. So you have less dependencies and less trouble if some libraries (and transitive dependencies) are updated. \r\n\r\nI usually try to introduce as less dependencies as necessary. Even if my project uses Mockito I do not use Mockito in all tests. Some tests don&#39;t need Mockito and if they don&#39;t really need it I don&#39;t see the need to use it. Some might argue that you should just use it if you already depend on it, but if an api changes I have less code to update. Think about the migration from Junit4 to JUnit5 or javax.persistence that is now jakarta.persistence. APIs will change for whatever reasons and we should be prepared.\r\n\r\n\r\n","title":"What is the exact benefits on using Ports/Adapters in hexagonal architecture?","body":"<blockquote>\n<p>I am just wandering what is hier the exact benefit of having just an interface? What would be the difference if the Kafka consumer and the Controller use directly the CreateOrderService?</p>\n</blockquote>\n<p>You can test it more easily, because you need less effort to create a mock.</p>\n<pre><code>class OrderControllerTest {\n\n    private String customerId;\n\n    @Test\n    void createOrder() {\n        CreateOrderPort createOrderPortMock = customerId -&gt; OrderControllerTest.this.customerId = customerId;\n        OrderController orderController = new OrderController(createOrderPortMock);\n\n        orderController.createOrder(&quot;1234&quot;);\n\n        assertEquals(&quot;1234&quot;, customerId);\n    }\n}\n</code></pre>\n<p>In a more complex scenario you might want to create a mock class that implements the input port\nor you might want to create a dedicated class for better readability.</p>\n<pre><code>class OrderControllerTest {\n\n    class CreateOrderPortMock implements CreateOrderPort {\n\n        private String customerId;\n\n        @Override\n        public void createOrder(String customerId) {\n            this.customerId = customerId;\n        }\n\n        public void assertCreateOrderInvoked(String expectedCustomerId){\n            assertEquals(expectedCustomerId, this.customerId);\n        }\n    }\n\n\n    @Test\n    void createOrder() {\n        CreateOrderPortMock createOrderPortMock = new CreateOrderPortMock();\n        OrderController orderController = new OrderController(createOrderPortMock);\n\n        orderController.createOrder(&quot;1234&quot;);\n\n        createOrderPortMock.assertCreateOrderInvoked(&quot;1234&quot;);\n    }\n}\n</code></pre>\n<p>Sure, one might argue that you can also just extend the real implementation and override the method. But this\nmight be tricky, because of constructor args that the real implementation needs in order to be created. When\nyou use the real implementation you have to deal with the real implementations dependencies.</p>\n<pre><code>public class CreateOrderService implements CreateOrderPort {\n\n    private OrderRepository orderRepository;\n\n    public CreateOrderService(OrderRepository orderRepository) {\n        this.orderRepository = Objects.requireNonNull(orderRepository);\n    }\n\n    public void createOrder(String customerId){\n        orderRepository.save(new Order(customerId));\n    }\n}\n</code></pre>\n<p>If the real implementation does checks in the constructor or executes some logic, you need to satisfy all these\npreconditions in order to create a mock just to override the createOrder method. If you do so your test is bound\nto all of those preconditions. This means that it will break even if it has nothing to do with the things it made\nit break. E.g. if someone changes the constructor logic your &quot;create order controller&quot; test would break.</p>\n<p>Finally, if you use an interface you don't need fancy mocking frameworks that use cglib proxies or anything else\nto just mock the simple input port. So you have less dependencies and less trouble if some libraries (and transitive dependencies) are updated.</p>\n<p>I usually try to introduce as less dependencies as necessary. Even if my project uses Mockito I do not use Mockito in all tests. Some tests don't need Mockito and if they don't really need it I don't see the need to use it. Some might argue that you should just use it if you already depend on it, but if an api changes I have less code to update. Think about the migration from Junit4 to JUnit5 or javax.persistence that is now jakarta.persistence. APIs will change for whatever reasons and we should be prepared.</p>\n"}],"owner":{"account_id":6496722,"reputation":123,"user_id":5029103,"display_name":"Ilias Mertzanidis"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":87,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1698127638,"creation_date":1695803735,"question_id":77185806,"body_markdown":"Lets say we have a typical implementation of the ports/adapter pattern:\r\n\r\n```\r\n@RestController\r\nprivate class OrderController {\r\n\r\n    private final CreateOrderPort createOrderPort;\r\n    \r\n    @PostMapping\r\n    void createOrder(String customerId) {\r\n        createOrderPort.createOrder(customerId);\r\n    }\r\n}\r\n\r\n\r\nprivate class KafkaConsumer {\r\n\r\n    private final CreateOrderPort createOrderPort;\r\n    \r\n    @PostMapping\r\n    public void createOrder(CreateOrderEvent event) {\r\n        createOrderPort.createOrder(event.getCustomerId());\r\n    }\r\n}\r\n\r\npublic interface CreateOrderPort {\r\n    void createOrder(String customerId);\r\n}\r\n\r\n@Service\r\npublic class CreateOrderService implements CreateOrderPort {\r\n    public void createOrder(String customerId){\r\n        orderRepository.save(new Order(customerId));\r\n    }\r\n}\r\n```\r\n\r\nI am just wandering what is hier the exact benefit of having just an interface?\r\nWhat would be the difference if the Kafka consumer and the Controller use directly the CreateOrderService?\r\n\r\n```\r\n@RestController\r\nprivate class OrderController {\r\n\r\n    private final CreateOrderService createOrderService;\r\n    \r\n    @PostMapping\r\n    void createOrder(String customerId) {\r\n        createOrderService.createOrder(customerId);\r\n    }\r\n}\r\n\r\n\r\nprivate class KafkaConsumer {\r\n\r\n    private final CreateOrderService createOrderService;\r\n    \r\n    @PostMapping\r\n    public void createOrder(CreateOrderEvent event) {\r\n        createOrderService.createOrder(event.getCustomerId());\r\n    }\r\n}\r\n\r\n@Service\r\npublic class CreateOrderService{\r\n    public void createOrder(String customerId){\r\n        orderRepository.save(new Order(customerId));\r\n    }\r\n}\r\n```\r\n\r\nWe would still have the separation between the technical details (adapter or boundary) and the business details (core or domain). And if somethings change in the service that wouldn have any affect in the technical layer.\r\n\r\n\r\n","title":"What is the exact benefits on using Ports/Adapters in hexagonal architecture?","body":"<p>Lets say we have a typical implementation of the ports/adapter pattern:</p>\n<pre><code>@RestController\nprivate class OrderController {\n\n    private final CreateOrderPort createOrderPort;\n    \n    @PostMapping\n    void createOrder(String customerId) {\n        createOrderPort.createOrder(customerId);\n    }\n}\n\n\nprivate class KafkaConsumer {\n\n    private final CreateOrderPort createOrderPort;\n    \n    @PostMapping\n    public void createOrder(CreateOrderEvent event) {\n        createOrderPort.createOrder(event.getCustomerId());\n    }\n}\n\npublic interface CreateOrderPort {\n    void createOrder(String customerId);\n}\n\n@Service\npublic class CreateOrderService implements CreateOrderPort {\n    public void createOrder(String customerId){\n        orderRepository.save(new Order(customerId));\n    }\n}\n</code></pre>\n<p>I am just wandering what is hier the exact benefit of having just an interface?\nWhat would be the difference if the Kafka consumer and the Controller use directly the CreateOrderService?</p>\n<pre><code>@RestController\nprivate class OrderController {\n\n    private final CreateOrderService createOrderService;\n    \n    @PostMapping\n    void createOrder(String customerId) {\n        createOrderService.createOrder(customerId);\n    }\n}\n\n\nprivate class KafkaConsumer {\n\n    private final CreateOrderService createOrderService;\n    \n    @PostMapping\n    public void createOrder(CreateOrderEvent event) {\n        createOrderService.createOrder(event.getCustomerId());\n    }\n}\n\n@Service\npublic class CreateOrderService{\n    public void createOrder(String customerId){\n        orderRepository.save(new Order(customerId));\n    }\n}\n</code></pre>\n<p>We would still have the separation between the technical details (adapter or boundary) and the business details (core or domain). And if somethings change in the service that wouldn have any affect in the technical layer.</p>\n"},{"tags":["java","swing","jtable","rowsorter"],"comments":[{"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"score":1,"creation_date":1698070545,"post_id":77345855,"comment_id":136355196,"body_markdown":"By calling `table.setAutoCreateRowSorter(true);` you tell the `JTable` to take all the necessary steps to enableautomatic row sorting. More details (from the user of the row sorting perspective) can be found at https://docs.oracle.com/javase/tutorial/uiswing/components/table.html#sorting . For all the nitty-gritty details: you will probably have to trace this in the source code yourself. IMHO this process is to complex for a simple answer.","body":"By calling <code>table.setAutoCreateRowSorter(true);</code> you tell the <code>JTable</code> to take all the necessary steps to enableautomatic row sorting. More details (from the user of the row sorting perspective) can be found at <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/components/table.html#sorting\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/tutorial/uiswing/components/&hellip;</a> . For all the nitty-gritty details: you will probably have to trace this in the source code yourself. IMHO this process is to complex for a simple answer."},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":0,"creation_date":1698071854,"post_id":77345855,"comment_id":136355523,"body_markdown":"*when I click the column header* - doesn&#39;t your question give the answer? The setAutoCreatRowSorter() method would a MouseListener to the table header to implement the sorting functionality. What is the point of this question? Why would you invoke this method if you don&#39;t want automatic sorting?","body":"<i>when I click the column header</i> - doesn&#39;t your question give the answer? The setAutoCreatRowSorter() method would a MouseListener to the table header to implement the sorting functionality. What is the point of this question? Why would you invoke this method if you don&#39;t want automatic sorting?"},{"owner":{"account_id":27653344,"reputation":17,"user_id":21107761,"display_name":"Kk Lee"},"score":0,"creation_date":1698073725,"post_id":77345855,"comment_id":136355938,"body_markdown":"Yes, can you tell me what method of what listener will be called? I can&#39;t find the relevant implementation in the java source code.","body":"Yes, can you tell me what method of what listener will be called? I can&#39;t find the relevant implementation in the java source code."},{"owner":{"account_id":31180,"reputation":29173,"user_id":85421,"display_name":"user85421"},"score":0,"creation_date":1698075496,"post_id":77345855,"comment_id":136356248,"body_markdown":"I think the question is not clear, maybe you add some additional information to it, or try re-phrasing it - as it is now, it is not clear (since obviously the table is being sorted since a `RowSorter` gets added to it as set by `setAutoCreateRowSorter()`)","body":"I think the question is not clear, maybe you add some additional information to it, or try re-phrasing it - as it is now, it is not clear (since obviously the table is being sorted since a <code>RowSorter</code> gets added to it as set by <code>setAutoCreateRowSorter()</code>)"},{"owner":{"account_id":27653344,"reputation":17,"user_id":21107761,"display_name":"Kk Lee"},"score":0,"creation_date":1698075671,"post_id":77345855,"comment_id":136356281,"body_markdown":"Maybe it will be clearer if I ask another question: When I click on the column header, what method will be automatically triggered?","body":"Maybe it will be clearer if I ask another question: When I click on the column header, what method will be automatically triggered?"},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":0,"creation_date":1698076579,"post_id":77345855,"comment_id":136356448,"body_markdown":"*what method will be automatically triggered?* -  Why do you care? What problem are you attempting to solve?","body":"<i>what method will be automatically triggered?</i> -  Why do you care? What problem are you attempting to solve?"},{"owner":{"account_id":27653344,"reputation":17,"user_id":21107761,"display_name":"Kk Lee"},"score":0,"creation_date":1698076753,"post_id":77345855,"comment_id":136356477,"body_markdown":"I don&#39;t want to solve any actual problem, I am just very curious, because I carefully checked the java source code and did not solve this doubt. I don&#39;t even know what the event source is: `JTable`, `JTableHeader`, or something else?","body":"I don&#39;t want to solve any actual problem, I am just very curious, because I carefully checked the java source code and did not solve this doubt. I don&#39;t even know what the event source is: <code>JTable</code>, <code>JTableHeader</code>, or something else?"},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":0,"creation_date":1698078930,"post_id":77345855,"comment_id":136356890,"body_markdown":"1) Step through the code using the debugger of your IDE, or 2) Read the API for the DefaultRowSorter to figure out which methods you think should be invoked.","body":"1) Step through the code using the debugger of your IDE, or 2) Read the API for the DefaultRowSorter to figure out which methods you think should be invoked."}],"answers":[{"tags":[],"owner":{"account_id":7421543,"reputation":2880,"user_id":5645656,"accept_rate":100,"display_name":"Cardinal System"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1698073549,"creation_date":1698069614,"answer_id":77345873,"question_id":77345855,"body_markdown":"You are calling [`JTable#setAutoCreateRowSorter(boolean)`][1], which makes the table automatically create row sorters for each column based on the column type (see [`JTable.getColumnClass(int)`][2]).\r\n\r\nIf you do not want the table to sort when you click a column header, then do not call `setAutoCreateRowSorter`.\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/javax/swing/JTable.html#setAutoCreateRowSorter-boolean-\r\n  [2]: https://docs.oracle.com/javase/8/docs/api/javax/swing/JTable.html#getColumnClass-int-","title":"Why does clicking on the header automatically sort the table?","body":"<p>You are calling <a href=\"https://docs.oracle.com/javase/8/docs/api/javax/swing/JTable.html#setAutoCreateRowSorter-boolean-\" rel=\"nofollow noreferrer\"><code>JTable#setAutoCreateRowSorter(boolean)</code></a>, which makes the table automatically create row sorters for each column based on the column type (see <a href=\"https://docs.oracle.com/javase/8/docs/api/javax/swing/JTable.html#getColumnClass-int-\" rel=\"nofollow noreferrer\"><code>JTable.getColumnClass(int)</code></a>).</p>\n<p>If you do not want the table to sort when you click a column header, then do not call <code>setAutoCreateRowSorter</code>.</p>\n"},{"tags":[],"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1698127448,"creation_date":1698079826,"answer_id":77347013,"question_id":77345855,"body_markdown":"The necessary objects that are involved in table sorting are:\r\n\r\n* [`JTable`](https://github.com/openjdk/jdk17u/blob/master/src/java.desktop/share/classes/javax/swing/JTable.java). No matter which `JTable` constructor you call the effective constructor is [`JTable(TableModel, TableColumnModel, ListSelectionModel)`](https://github.com/openjdk/jdk17u/blob/master/src/java.desktop/share/classes/javax/swing/JTable.java#L679)\r\n* [`JTableHeader`](https://github.com/openjdk/jdk17u/blob/master/src/java.desktop/share/classes/javax/swing/table/JTableHeader.java). An object of this class is constructed when executing [`JTable.initializeLocalVars()`](https://github.com/openjdk/jdk17u/blob/master/src/java.desktop/share/classes/javax/swing/JTable.java#L5608) which is called from the `JTable` constructor\r\n* a [`BasicTableHeaderUI`](https://github.com/openjdk/jdk17u/blob/master/src/java.desktop/share/classes/javax/swing/plaf/basic/BasicTableHeaderUI.java) is constructed in the `JTableHeader` constructor (during the call to `JTableHeader.updateUI()`)\r\n* [`BasicTableHeaderUI.MouseInputHandler`](https://github.com/openjdk/jdk17u/blob/master/src/java.desktop/share/classes/javax/swing/plaf/basic/BasicTableHeaderUI.java#L107) which handles mouse input for the `BasicTableHeaderUI`. An instance of this class is constructed from the calls originating in `JTableHeader.updateUI()` and is added as a mouse listener to the `JTableHeader`\r\n* [`TableRowSorter`](https://github.com/openjdk/jdk17u/blob/master/src/java.desktop/share/classes/javax/swing/table/TableRowSorter.java) - the `JTable` creates an instance of this class when you call `setAutoCreateRowSorter(true)`\r\n\r\nThe [`BasicTableHeaderUI.MouseInputHandler.mouseClicked()`](https://github.com/openjdk/jdk17u/blob/master/src/java.desktop/share/classes/javax/swing/plaf/basic/BasicTableHeaderUI.java#L117) is the method that gets called when you click in the table header.\r\n\r\nAfter some checks this method calls `RowSorter.toggleSortOrder(int column)` which informs the `TableRowSorter` that it should change the sorting.\r\n\r\nNote that sorting the table doesn&#39;t sort the table model! The `TableRowSorter` internally maintains two arrays to convert from (sorted) view row index to model row index and from model row index to (sorted) view row index.\r\n\r\nIn the unsorted state these arrays map index 0 to index 0, index 1 to index 1 etc.\r\n\r\nWhen sorting these arrays are shuffled.\r\n\r\n---\r\nFinal note: this post mentions the class `BasicTableHeaderUI`. Depending on the LAF that your application uses it could be a different class (for example the `WindowsTableHeaderUI` if your application uses the Windows LAF).","title":"Why does clicking on the header automatically sort the table?","body":"<p>The necessary objects that are involved in table sorting are:</p>\n<ul>\n<li><a href=\"https://github.com/openjdk/jdk17u/blob/master/src/java.desktop/share/classes/javax/swing/JTable.java\" rel=\"nofollow noreferrer\"><code>JTable</code></a>. No matter which <code>JTable</code> constructor you call the effective constructor is <a href=\"https://github.com/openjdk/jdk17u/blob/master/src/java.desktop/share/classes/javax/swing/JTable.java#L679\" rel=\"nofollow noreferrer\"><code>JTable(TableModel, TableColumnModel, ListSelectionModel)</code></a></li>\n<li><a href=\"https://github.com/openjdk/jdk17u/blob/master/src/java.desktop/share/classes/javax/swing/table/JTableHeader.java\" rel=\"nofollow noreferrer\"><code>JTableHeader</code></a>. An object of this class is constructed when executing <a href=\"https://github.com/openjdk/jdk17u/blob/master/src/java.desktop/share/classes/javax/swing/JTable.java#L5608\" rel=\"nofollow noreferrer\"><code>JTable.initializeLocalVars()</code></a> which is called from the <code>JTable</code> constructor</li>\n<li>a <a href=\"https://github.com/openjdk/jdk17u/blob/master/src/java.desktop/share/classes/javax/swing/plaf/basic/BasicTableHeaderUI.java\" rel=\"nofollow noreferrer\"><code>BasicTableHeaderUI</code></a> is constructed in the <code>JTableHeader</code> constructor (during the call to <code>JTableHeader.updateUI()</code>)</li>\n<li><a href=\"https://github.com/openjdk/jdk17u/blob/master/src/java.desktop/share/classes/javax/swing/plaf/basic/BasicTableHeaderUI.java#L107\" rel=\"nofollow noreferrer\"><code>BasicTableHeaderUI.MouseInputHandler</code></a> which handles mouse input for the <code>BasicTableHeaderUI</code>. An instance of this class is constructed from the calls originating in <code>JTableHeader.updateUI()</code> and is added as a mouse listener to the <code>JTableHeader</code></li>\n<li><a href=\"https://github.com/openjdk/jdk17u/blob/master/src/java.desktop/share/classes/javax/swing/table/TableRowSorter.java\" rel=\"nofollow noreferrer\"><code>TableRowSorter</code></a> - the <code>JTable</code> creates an instance of this class when you call <code>setAutoCreateRowSorter(true)</code></li>\n</ul>\n<p>The <a href=\"https://github.com/openjdk/jdk17u/blob/master/src/java.desktop/share/classes/javax/swing/plaf/basic/BasicTableHeaderUI.java#L117\" rel=\"nofollow noreferrer\"><code>BasicTableHeaderUI.MouseInputHandler.mouseClicked()</code></a> is the method that gets called when you click in the table header.</p>\n<p>After some checks this method calls <code>RowSorter.toggleSortOrder(int column)</code> which informs the <code>TableRowSorter</code> that it should change the sorting.</p>\n<p>Note that sorting the table doesn't sort the table model! The <code>TableRowSorter</code> internally maintains two arrays to convert from (sorted) view row index to model row index and from model row index to (sorted) view row index.</p>\n<p>In the unsorted state these arrays map index 0 to index 0, index 1 to index 1 etc.</p>\n<p>When sorting these arrays are shuffled.</p>\n<hr />\n<p>Final note: this post mentions the class <code>BasicTableHeaderUI</code>. Depending on the LAF that your application uses it could be a different class (for example the <code>WindowsTableHeaderUI</code> if your application uses the Windows LAF).</p>\n"}],"owner":{"account_id":27653344,"reputation":17,"user_id":21107761,"display_name":"Kk Lee"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":81,"favorite_count":0,"down_vote_count":4,"up_vote_count":0,"closed_date":1698149209,"accepted_answer_id":77347013,"answer_count":2,"score":-4,"last_activity_date":1698127448,"creation_date":1698069480,"question_id":77345855,"body_markdown":"This is my code:\r\n```\r\nimport java.awt.*;\r\nimport javax.swing.*;\r\npublic class TableTest\r\n{\r\n   public static void main(String[] args)\r\n   {\r\n      EventQueue.invokeLater(() -&gt;\r\n         {\r\n            var frame = new PlanetTableFrame();\r\n            frame.setTitle(&quot;TableTest&quot;);\r\n            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n            frame.setVisible(true);\r\n         });\r\n   }\r\n}\r\nclass PlanetTableFrame extends JFrame\r\n{\r\n   private String[] columnNames = { &quot;Planet&quot;, &quot;Radius&quot;, &quot;Moons&quot;, &quot;Gaseous&quot;, &quot;Color&quot; };\r\n   private Object[][] cells = \r\n   { \r\n      { &quot;Mercury&quot;, 2440.0, 0, false, Color.YELLOW },\r\n      { &quot;Venus&quot;, 6052.0, 0, false, Color.YELLOW }, \r\n      { &quot;Earth&quot;, 6378.0, 1, false, Color.BLUE },\r\n      { &quot;Mars&quot;, 3397.0, 2, false, Color.RED }, \r\n      { &quot;Jupiter&quot;, 71492.0, 16, true, Color.ORANGE },\r\n      { &quot;Saturn&quot;, 60268.0, 18, true, Color.ORANGE },\r\n      { &quot;Uranus&quot;, 25559.0, 17, true, Color.BLUE }, \r\n      { &quot;Neptune&quot;, 24766.0, 8, true, Color.BLUE },\r\n      { &quot;Pluto&quot;, 1137.0, 1, false, Color.BLACK } \r\n   };\r\n   public PlanetTableFrame()\r\n   {\r\n      var table = new JTable(cells, columnNames);\r\n      table.setAutoCreateRowSorter(true);\r\n      add(new JScrollPane(table), BorderLayout.CENTER);\r\n   }\r\n}\r\n```\r\n\r\nRunning the program, when I click on the column header, the rows are automatically sorted.\r\n\r\nI want to know why: when I click the column header, what happens inside the Swing component (what method is triggered)? I just clicked the table header and did not change the model content. Why does it automatically sort?","title":"Why does clicking on the header automatically sort the table?","body":"<p>This is my code:</p>\n<pre><code>import java.awt.*;\nimport javax.swing.*;\npublic class TableTest\n{\n   public static void main(String[] args)\n   {\n      EventQueue.invokeLater(() -&gt;\n         {\n            var frame = new PlanetTableFrame();\n            frame.setTitle(&quot;TableTest&quot;);\n            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n            frame.setVisible(true);\n         });\n   }\n}\nclass PlanetTableFrame extends JFrame\n{\n   private String[] columnNames = { &quot;Planet&quot;, &quot;Radius&quot;, &quot;Moons&quot;, &quot;Gaseous&quot;, &quot;Color&quot; };\n   private Object[][] cells = \n   { \n      { &quot;Mercury&quot;, 2440.0, 0, false, Color.YELLOW },\n      { &quot;Venus&quot;, 6052.0, 0, false, Color.YELLOW }, \n      { &quot;Earth&quot;, 6378.0, 1, false, Color.BLUE },\n      { &quot;Mars&quot;, 3397.0, 2, false, Color.RED }, \n      { &quot;Jupiter&quot;, 71492.0, 16, true, Color.ORANGE },\n      { &quot;Saturn&quot;, 60268.0, 18, true, Color.ORANGE },\n      { &quot;Uranus&quot;, 25559.0, 17, true, Color.BLUE }, \n      { &quot;Neptune&quot;, 24766.0, 8, true, Color.BLUE },\n      { &quot;Pluto&quot;, 1137.0, 1, false, Color.BLACK } \n   };\n   public PlanetTableFrame()\n   {\n      var table = new JTable(cells, columnNames);\n      table.setAutoCreateRowSorter(true);\n      add(new JScrollPane(table), BorderLayout.CENTER);\n   }\n}\n</code></pre>\n<p>Running the program, when I click on the column header, the rows are automatically sorted.</p>\n<p>I want to know why: when I click the column header, what happens inside the Swing component (what method is triggered)? I just clicked the table header and did not change the model content. Why does it automatically sort?</p>\n"},{"tags":["java","apache","javafx","ftp","apache-commons-fileupload"],"answers":[{"tags":[],"owner":{"account_id":453710,"reputation":192083,"user_id":850848,"accept_rate":80,"display_name":"Martin Prikryl"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698126094,"creation_date":1437395426,"answer_id":31516567,"question_id":31515891,"body_markdown":"The `CopyStreamException` has a &quot;cause&quot; exception. Check that using the `.getCause()`, to see what went wrong.\r\n\r\nSee the [`Util.copyStream` method](https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/io/Util.html#copyStream(java.io.InputStream,java.io.OutputStream,int,long,org.apache.commons.net.io.CopyStreamListener,boolean)):\r\n\r\n    public static final long copyStream(InputStream source, OutputStream dest,\r\n                                        int bufferSize, long streamSize,\r\n                                        CopyStreamListener listener,\r\n                                        boolean flush)\r\n    throws CopyStreamException\r\n    {\r\n        int bytes;\r\n        long total = 0;\r\n        byte[] buffer = new byte[bufferSize &gt;= 0 ? bufferSize : DEFAULT_COPY_BUFFER_SIZE];\r\n\r\n        try\r\n        {\r\n            while ((bytes = source.read(buffer)) != -1)\r\n            {\r\n                 ....\r\n            }\r\n        }\r\n        catch (IOException e)\r\n        {\r\n            throw new CopyStreamException(&quot;IOException caught while copying.&quot;,\r\n                                          total, e);\r\n        }\r\n\r\n        return total;\r\n    }\r\n\r\nSomewhere in your `uploadSingleFile` function, do\r\n\r\n    try\r\n    {\r\n         ftpClient.storeFile(...)\r\n    }\r\n    catch (Exception e)\r\n    {\r\n         e.printStackTrace();\r\n         if (e.getCause() != null)\r\n         { \r\n             e.getCause().printStackTrace();\r\n         }\r\n    }\r\n\r\n*I do not know Java, so the code may not be 100% correct.*\r\n\r\nSee also [Getting full string stack trace including inner exception](https://stackoverflow.com/q/1292858/850848).","title":"Java FTP using Apache commons throws &quot;IOException caught while copying&quot;","body":"<p>The <code>CopyStreamException</code> has a &quot;cause&quot; exception. Check that using the <code>.getCause()</code>, to see what went wrong.</p>\n<p>See the <a href=\"https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/io/Util.html#copyStream(java.io.InputStream,java.io.OutputStream,int,long,org.apache.commons.net.io.CopyStreamListener,boolean)\" rel=\"nofollow noreferrer\"><code>Util.copyStream</code> method</a>:</p>\n<pre><code>public static final long copyStream(InputStream source, OutputStream dest,\n                                    int bufferSize, long streamSize,\n                                    CopyStreamListener listener,\n                                    boolean flush)\nthrows CopyStreamException\n{\n    int bytes;\n    long total = 0;\n    byte[] buffer = new byte[bufferSize &gt;= 0 ? bufferSize : DEFAULT_COPY_BUFFER_SIZE];\n\n    try\n    {\n        while ((bytes = source.read(buffer)) != -1)\n        {\n             ....\n        }\n    }\n    catch (IOException e)\n    {\n        throw new CopyStreamException(&quot;IOException caught while copying.&quot;,\n                                      total, e);\n    }\n\n    return total;\n}\n</code></pre>\n<p>Somewhere in your <code>uploadSingleFile</code> function, do</p>\n<pre><code>try\n{\n     ftpClient.storeFile(...)\n}\ncatch (Exception e)\n{\n     e.printStackTrace();\n     if (e.getCause() != null)\n     { \n         e.getCause().printStackTrace();\n     }\n}\n</code></pre>\n<p><em>I do not know Java, so the code may not be 100% correct.</em></p>\n<p>See also <a href=\"https://stackoverflow.com/q/1292858/850848\">Getting full string stack trace including inner exception</a>.</p>\n"}],"owner":{"account_id":3586790,"reputation":593,"user_id":2993787,"accept_rate":86,"display_name":"Nepal12"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":6599,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1698126094,"creation_date":1437393400,"question_id":31515891,"body_markdown":"I have made a JavaFX application which includes uploading large files (&gt; 1GB) to a server. Every time I got the same error on same place. Any Suggestions what am I doing wrong here.\r\n \r\n   \r\n\r\n    ftpclient.connect(server, port);\r\n    ftpclient.login(ftpuser, ftppass);\r\n    ftpclient.enterLocalPassiveMode();\r\n    ftpclient.setKeepAlive(true);\r\n    ftpclient.setControlKeepAliveTimeout(3000);\r\n       \r\n    Task&lt;Void&gt; copyMnt = new Task&lt;Void&gt;() {\r\n    @Override\r\n    protected Void call(){\r\n      try {                              \r\n          new Thread(new FTPHandler(ftpclient, source , dest)).run();\r\n      } catch (IOException ex) {\r\n         Logger.getLogger(MyAppController.class.getName()).log(Level.SEVERE, null, ex); \r\n      }\r\n     return null;\r\n      }\r\n    };\r\n \r\n\r\n    new Thread(copyMnt).start();\r\n\r\n\r\nNow on the FTPHandler Class \r\n\r\n    // The constructor will set the ftpclient, source and destinations.\r\n    @Override\r\n    \r\n    public void run() {\r\n        try {\r\n            uploadDirectory(this.getClient(), this.getDest(), this.getSrc(), &quot;&quot;);\r\n        } catch (IOException ex) {\r\n            Logger.getLogger(FTPHandler.class.getName()).log(Level.SEVERE, null, ex);\r\n        }\r\n    }\r\n    \r\n    public static void uploadDirectory(FTPClient ftpClient,\r\n            String remoteDirPath, String localParentDir, String remoteParentDir)\r\n            throws IOException {\r\n\r\n        File localDir = new File(localParentDir);\r\n        File[] subFiles = localDir.listFiles();\r\n        if (subFiles != null &amp;&amp; subFiles.length &gt; 0) {\r\n            for (File item : subFiles) {\r\n                String remoteFilePath = remoteDirPath + &quot;/&quot; + remoteParentDir\r\n                        + &quot;/&quot; + item.getName();\r\n                if (remoteParentDir.equals(&quot;&quot;)) {\r\n                    remoteFilePath = remoteDirPath + &quot;/&quot; + item.getName();\r\n                }\r\n\r\n                if (item.isFile()) {\r\n                    // upload the file\r\n                    String localFilePath = item.getAbsolutePath();\r\n                    java.util.Date date= new java.util.Date();\r\n                    \r\n                    System.out.println(new Timestamp(date.getTime()) + &quot;  : Uploading :: &quot; + localFilePath + &quot; to &quot; + remoteFilePath);\r\n                    boolean uploaded = uploadSingleFile(ftpClient,\r\n                            localFilePath, remoteFilePath);\r\n                    if (uploaded) {\r\n                        System.out.println(&quot;Success : &quot;\r\n                                + remoteFilePath);\r\n                    } else {\r\n                        System.out.println(&quot;Failed : &quot;\r\n                                + localFilePath);\r\n                    }\r\n                } else {\r\n                    // create directory on the server\r\n                    boolean created = ftpClient.makeDirectory(remoteFilePath);\r\n                    if (created) {\r\n                        System.out.println(&quot;CREATED the directory: &quot;\r\n                                + remoteFilePath);\r\n                    } else {\r\n                        System.out.println(&quot;COULD NOT create the directory: &quot;\r\n                                + remoteFilePath);\r\n                    }\r\n\r\n                    // upload the sub directory\r\n                    String parent = remoteParentDir + &quot;/&quot; + item.getName();\r\n                    if (remoteParentDir.equals(&quot;&quot;)) {\r\n                        parent = item.getName();\r\n                    }\r\n\r\n                    localParentDir = item.getAbsolutePath();\r\n                    uploadDirectory(ftpClient, remoteDirPath, localParentDir,\r\n                            parent);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\nEvery time I am uploading the files (files are of different types like .iso, .dat etc), The first few files (upload sequence is like first few hundred files are smaller i.e less than few MBs then Last 10 files are more than 1 GB big)will be successfully uploaded (i.e all smaller files and 2 of the last 10 files) but when it starts uploading the third big file I get following exception.\r\n\r\n    SEVERE: null\r\n    org.apache.commons.net.io.CopyStreamException: IOException caught while copying.\r\n    \tat org.apache.commons.net.io.Util.copyStream(Util.java:134)\r\n    \tat org.apache.commons.net.ftp.FTPClient._storeFile(FTPClient.java:653)\r\n    \tat org.apache.commons.net.ftp.FTPClient.__storeFile(FTPClient.java:624)\r\n    \tat org.apache.commons.net.ftp.FTPClient.storeFile(FTPClient.java:1976)\r\n\r\n  ","title":"Java FTP using Apache commons throws &quot;IOException caught while copying&quot;","body":"<p>I have made a JavaFX application which includes uploading large files (> 1GB) to a server. Every time I got the same error on same place. Any Suggestions what am I doing wrong here.</p>\n\n<pre><code>ftpclient.connect(server, port);\nftpclient.login(ftpuser, ftppass);\nftpclient.enterLocalPassiveMode();\nftpclient.setKeepAlive(true);\nftpclient.setControlKeepAliveTimeout(3000);\n\nTask&lt;Void&gt; copyMnt = new Task&lt;Void&gt;() {\n@Override\nprotected Void call(){\n  try {                              \n      new Thread(new FTPHandler(ftpclient, source , dest)).run();\n  } catch (IOException ex) {\n     Logger.getLogger(MyAppController.class.getName()).log(Level.SEVERE, null, ex); \n  }\n return null;\n  }\n};\n\n\nnew Thread(copyMnt).start();\n</code></pre>\n\n<p>Now on the FTPHandler Class </p>\n\n<pre><code>// The constructor will set the ftpclient, source and destinations.\n@Override\n\npublic void run() {\n    try {\n        uploadDirectory(this.getClient(), this.getDest(), this.getSrc(), \"\");\n    } catch (IOException ex) {\n        Logger.getLogger(FTPHandler.class.getName()).log(Level.SEVERE, null, ex);\n    }\n}\n\npublic static void uploadDirectory(FTPClient ftpClient,\n        String remoteDirPath, String localParentDir, String remoteParentDir)\n        throws IOException {\n\n    File localDir = new File(localParentDir);\n    File[] subFiles = localDir.listFiles();\n    if (subFiles != null &amp;&amp; subFiles.length &gt; 0) {\n        for (File item : subFiles) {\n            String remoteFilePath = remoteDirPath + \"/\" + remoteParentDir\n                    + \"/\" + item.getName();\n            if (remoteParentDir.equals(\"\")) {\n                remoteFilePath = remoteDirPath + \"/\" + item.getName();\n            }\n\n            if (item.isFile()) {\n                // upload the file\n                String localFilePath = item.getAbsolutePath();\n                java.util.Date date= new java.util.Date();\n\n                System.out.println(new Timestamp(date.getTime()) + \"  : Uploading :: \" + localFilePath + \" to \" + remoteFilePath);\n                boolean uploaded = uploadSingleFile(ftpClient,\n                        localFilePath, remoteFilePath);\n                if (uploaded) {\n                    System.out.println(\"Success : \"\n                            + remoteFilePath);\n                } else {\n                    System.out.println(\"Failed : \"\n                            + localFilePath);\n                }\n            } else {\n                // create directory on the server\n                boolean created = ftpClient.makeDirectory(remoteFilePath);\n                if (created) {\n                    System.out.println(\"CREATED the directory: \"\n                            + remoteFilePath);\n                } else {\n                    System.out.println(\"COULD NOT create the directory: \"\n                            + remoteFilePath);\n                }\n\n                // upload the sub directory\n                String parent = remoteParentDir + \"/\" + item.getName();\n                if (remoteParentDir.equals(\"\")) {\n                    parent = item.getName();\n                }\n\n                localParentDir = item.getAbsolutePath();\n                uploadDirectory(ftpClient, remoteDirPath, localParentDir,\n                        parent);\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>Every time I am uploading the files (files are of different types like .iso, .dat etc), The first few files (upload sequence is like first few hundred files are smaller i.e less than few MBs then Last 10 files are more than 1 GB big)will be successfully uploaded (i.e all smaller files and 2 of the last 10 files) but when it starts uploading the third big file I get following exception.</p>\n\n<pre><code>SEVERE: null\norg.apache.commons.net.io.CopyStreamException: IOException caught while copying.\n    at org.apache.commons.net.io.Util.copyStream(Util.java:134)\n    at org.apache.commons.net.ftp.FTPClient._storeFile(FTPClient.java:653)\n    at org.apache.commons.net.ftp.FTPClient.__storeFile(FTPClient.java:624)\n    at org.apache.commons.net.ftp.FTPClient.storeFile(FTPClient.java:1976)\n</code></pre>\n"},{"tags":["java","ftp","upload","ftp-client","apache-commons-net"],"answers":[{"tags":[],"owner":{"account_id":453710,"reputation":192083,"user_id":850848,"accept_rate":80,"display_name":"Martin Prikryl"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1698125992,"creation_date":1537965164,"answer_id":52517855,"question_id":52517649,"body_markdown":"- reconnect your FTP session (if it was broken too);\r\n- test size of remote file to determine how many bytes made it all the way through to the remote disk (e.g. using [`FTPClient.mlistFile`](https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTPClient.html#mlistFile(java.lang.String)) or `SIZE` command – See https://stackoverflow.com/q/29198422/850848);\r\n- seek the &quot;input stream&quot; back to that point (though `InputStream` does not support seeking, so you will have to use a different stream implementation – or reopen the `InputStream` and [`skip`](https://docs.oracle.com/javase/8/docs/api/java/io/InputStream.html#skip-long-) to the position);\r\n- call `FTPClient.appendFile`.","title":"Java Apache FTP client - Resume broken upload","body":"<ul>\n<li>reconnect your FTP session (if it was broken too);</li>\n<li>test size of remote file to determine how many bytes made it all the way through to the remote disk (e.g. using <a href=\"https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTPClient.html#mlistFile(java.lang.String)\" rel=\"nofollow noreferrer\"><code>FTPClient.mlistFile</code></a> or <code>SIZE</code> command – See <a href=\"https://stackoverflow.com/q/29198422/850848\">How to get info of an FTPFile</a>);</li>\n<li>seek the &quot;input stream&quot; back to that point (though <code>InputStream</code> does not support seeking, so you will have to use a different stream implementation – or reopen the <code>InputStream</code> and <a href=\"https://docs.oracle.com/javase/8/docs/api/java/io/InputStream.html#skip-long-\" rel=\"nofollow noreferrer\"><code>skip</code></a> to the position);</li>\n<li>call <code>FTPClient.appendFile</code>.</li>\n</ul>\n"}],"owner":{"account_id":7219924,"reputation":910,"user_id":5955376,"accept_rate":100,"display_name":"nllsdfx"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":522,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":52517855,"answer_count":1,"score":1,"last_activity_date":1698125992,"creation_date":1537964461,"question_id":52517649,"body_markdown":"I need to implement resuming of upload in my FTP client, if something went wrong. `ftp` in the example below is Apache [`FTPClient`][1].\r\n\r\n    public boolean upload(InputStream localFile, String remoteName, boolean createNew) {\r\n\r\n        if (StringUtils.isBlank(remoteName)) {\r\n            log.warn(&quot;Error while uploading file: localFile or remoteName is null&quot;);\r\n            return false;\r\n        }\r\n\r\n        synchronized (this) {\r\n            try {\r\n\r\n                if (createNew) {\r\n                    return ftp.storeFile(remoteName, localFile);\r\n                } else {\r\n                    return ftp.appendFile(remoteName, localFile); //todo is it right?\r\n                }\r\n            } catch (Exception ex) {\r\n                log.error(ex.getMessage(), ex);\r\n                return false;\r\n            }\r\n        }\r\n\r\n    }\r\n\r\nSo if `ftp.storeFile` crashes (not all bytes were sent e.g.), how can I continue uploading using the same `InputStream`?\r\n\r\n\r\n  [1]: https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTPClient.html","title":"Java Apache FTP client - Resume broken upload","body":"<p>I need to implement resuming of upload in my FTP client, if something went wrong. <code>ftp</code> in the example below is Apache <a href=\"https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTPClient.html\" rel=\"nofollow noreferrer\"><code>FTPClient</code></a>.</p>\n\n<pre><code>public boolean upload(InputStream localFile, String remoteName, boolean createNew) {\n\n    if (StringUtils.isBlank(remoteName)) {\n        log.warn(\"Error while uploading file: localFile or remoteName is null\");\n        return false;\n    }\n\n    synchronized (this) {\n        try {\n\n            if (createNew) {\n                return ftp.storeFile(remoteName, localFile);\n            } else {\n                return ftp.appendFile(remoteName, localFile); //todo is it right?\n            }\n        } catch (Exception ex) {\n            log.error(ex.getMessage(), ex);\n            return false;\n        }\n    }\n\n}\n</code></pre>\n\n<p>So if <code>ftp.storeFile</code> crashes (not all bytes were sent e.g.), how can I continue uploading using the same <code>InputStream</code>?</p>\n"},{"tags":["java","ftp","apache-commons-net"],"answers":[{"tags":[],"owner":{"account_id":92839,"reputation":8676,"user_id":254252,"display_name":"Christopher Creutzig"},"down_vote_count":2,"up_vote_count":30,"is_accepted":true,"score":28,"last_activity_date":1336395242,"creation_date":1336395242,"answer_id":10482449,"question_id":10482204,"body_markdown":"`listFiles(String pathName)` should work just fine for a single file.","title":"Checking file existence on FTP server","body":"<p><code>listFiles(String pathName)</code> should work just fine for a single file.</p>\n"},{"tags":[],"owner":{"account_id":453710,"reputation":192083,"user_id":850848,"accept_rate":80,"display_name":"Martin Prikryl"},"down_vote_count":0,"up_vote_count":18,"is_accepted":false,"score":18,"last_activity_date":1698125960,"creation_date":1523965567,"answer_id":49877234,"question_id":10482204,"body_markdown":"Using a full path to a file in [`listFiles`](https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTPClient.html#listFiles(java.lang.String)) (or [`mlistDir`](https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTPClient.html#mlistDir(java.lang.String))) call, as the accepted answer shows, should indeed work:\r\n\r\n    String remotePath = &quot;/remote/path/file.txt&quot;;\r\n    FTPFile[] remoteFiles = ftpClient.listFiles(remotePath);\r\n    if (remoteFiles.length &gt; 0)\r\n    {\r\n    \tSystem.out.println(&quot;File &quot; + remoteFiles[0].getName() + &quot; exists&quot;);\r\n    }\r\n    else\r\n    {\r\n    \tSystem.out.println(&quot;File &quot; + remotePath + &quot; does not exists&quot;);\r\n    }\r\n\r\nThe [RFC 959](https://datatracker.ietf.org/doc/html/rfc959) in the section 4.1.3 in the part about the `LIST` command says:\r\n\r\n&gt; If the pathname specifies a file then the server should send current information on the file.\r\n\r\nThough if you are going to check for many files, this will be rather ineffective. A use of the `LIST` command actually involves several commands, waiting for their responses, and mainly, opening a data connection. Opening a new TCP/IP connection is a costly operation, even more so, when an encryption is used (what is a must these days).\r\n\r\nAlso `LIST` command is even more ineffective for testing an existence of a folder, as it results in a transfer of a complete folder contents.\r\n\r\n---\r\n\r\nMore efficient is to use [`mlistFile`](https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTPClient.html#mlistFile(java.lang.String)) (`MLST` command), if the server supports it:\r\n\r\n    String remotePath = &quot;/remote/path/file.txt&quot;;\r\n    FTPFile remoteFile = ftpClient.mlistFile(remotePath);\r\n    if (remoteFile != null)\r\n    {\r\n    \tSystem.out.println(&quot;File &quot; + remoteFile.getName() + &quot; exists&quot;);\r\n    }\r\n    else\r\n    {\r\n    \tSystem.out.println(&quot;File &quot; + remotePath + &quot; does not exists&quot;);\r\n    }\r\n\r\nThis method *can* be used to test an existence of a directory.\r\n\r\n`MLST` command does not use a separate connection (contrary to `LIST`).\r\n\r\n---\r\n\r\nIf the server does not support `MLST` command, you can *abuse* [`getModificationTime`](https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTPClient.html#getModificationTime(java.lang.String)) (`MDTM` command) or [`getSize`](https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTPClient.html#getSize(java.lang.String)) (`SIZE` command):\r\n\r\n    String timestamp = ftpClient.getModificationTime(remotePath);\r\n    if (timestamp != null)\r\n    {\r\n    \tSystem.out.println(&quot;File &quot; + remotePath + &quot; exists&quot;);\r\n    }\r\n    else\r\n    {\r\n    \tSystem.out.println(&quot;File &quot; + remotePath + &quot; does not exists&quot;);\r\n    }\r\n\r\nThis method *cannot* be used to test an existence of a directory.\r\n","title":"Checking file existence on FTP server","body":"<p>Using a full path to a file in <a href=\"https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTPClient.html#listFiles(java.lang.String)\" rel=\"nofollow noreferrer\"><code>listFiles</code></a> (or <a href=\"https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTPClient.html#mlistDir(java.lang.String)\" rel=\"nofollow noreferrer\"><code>mlistDir</code></a>) call, as the accepted answer shows, should indeed work:</p>\n<pre><code>String remotePath = &quot;/remote/path/file.txt&quot;;\nFTPFile[] remoteFiles = ftpClient.listFiles(remotePath);\nif (remoteFiles.length &gt; 0)\n{\n    System.out.println(&quot;File &quot; + remoteFiles[0].getName() + &quot; exists&quot;);\n}\nelse\n{\n    System.out.println(&quot;File &quot; + remotePath + &quot; does not exists&quot;);\n}\n</code></pre>\n<p>The <a href=\"https://datatracker.ietf.org/doc/html/rfc959\" rel=\"nofollow noreferrer\">RFC 959</a> in the section 4.1.3 in the part about the <code>LIST</code> command says:</p>\n<blockquote>\n<p>If the pathname specifies a file then the server should send current information on the file.</p>\n</blockquote>\n<p>Though if you are going to check for many files, this will be rather ineffective. A use of the <code>LIST</code> command actually involves several commands, waiting for their responses, and mainly, opening a data connection. Opening a new TCP/IP connection is a costly operation, even more so, when an encryption is used (what is a must these days).</p>\n<p>Also <code>LIST</code> command is even more ineffective for testing an existence of a folder, as it results in a transfer of a complete folder contents.</p>\n<hr />\n<p>More efficient is to use <a href=\"https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTPClient.html#mlistFile(java.lang.String)\" rel=\"nofollow noreferrer\"><code>mlistFile</code></a> (<code>MLST</code> command), if the server supports it:</p>\n<pre><code>String remotePath = &quot;/remote/path/file.txt&quot;;\nFTPFile remoteFile = ftpClient.mlistFile(remotePath);\nif (remoteFile != null)\n{\n    System.out.println(&quot;File &quot; + remoteFile.getName() + &quot; exists&quot;);\n}\nelse\n{\n    System.out.println(&quot;File &quot; + remotePath + &quot; does not exists&quot;);\n}\n</code></pre>\n<p>This method <em>can</em> be used to test an existence of a directory.</p>\n<p><code>MLST</code> command does not use a separate connection (contrary to <code>LIST</code>).</p>\n<hr />\n<p>If the server does not support <code>MLST</code> command, you can <em>abuse</em> <a href=\"https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTPClient.html#getModificationTime(java.lang.String)\" rel=\"nofollow noreferrer\"><code>getModificationTime</code></a> (<code>MDTM</code> command) or <a href=\"https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTPClient.html#getSize(java.lang.String)\" rel=\"nofollow noreferrer\"><code>getSize</code></a> (<code>SIZE</code> command):</p>\n<pre><code>String timestamp = ftpClient.getModificationTime(remotePath);\nif (timestamp != null)\n{\n    System.out.println(&quot;File &quot; + remotePath + &quot; exists&quot;);\n}\nelse\n{\n    System.out.println(&quot;File &quot; + remotePath + &quot; does not exists&quot;);\n}\n</code></pre>\n<p>This method <em>cannot</em> be used to test an existence of a directory.</p>\n"},{"tags":[],"owner":{"account_id":14411145,"reputation":55,"user_id":10409913,"display_name":"Aadi"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1562329110,"creation_date":1562329110,"answer_id":56902936,"question_id":10482204,"body_markdown":"The accepted answer did not work for me.\r\n\r\nCode did not work:\r\n\r\n    String remotePath = &quot;/remote/path/file.txt&quot;;\r\n    FTPFile[] remoteFiles = ftpClient.listFiles(remotePath);\r\n\r\nInstead, this works for me:\r\n\r\n    ftpClient.changeWorkingDirectory(&quot;/remote/path&quot;);\r\n    FTPFile[] remoteFiles = ftpClient.listFiles(&quot;file.txt&quot;);","title":"Checking file existence on FTP server","body":"<p>The accepted answer did not work for me.</p>\n\n<p>Code did not work:</p>\n\n<pre><code>String remotePath = \"/remote/path/file.txt\";\nFTPFile[] remoteFiles = ftpClient.listFiles(remotePath);\n</code></pre>\n\n<p>Instead, this works for me:</p>\n\n<pre><code>ftpClient.changeWorkingDirectory(\"/remote/path\");\nFTPFile[] remoteFiles = ftpClient.listFiles(\"file.txt\");\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16724199,"reputation":62,"user_id":12088191,"display_name":"A1 paper"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1659075951,"creation_date":1659075951,"answer_id":73162416,"question_id":10482204,"body_markdown":"    public boolean isDirectory(String dstPath) throws IOException {\r\n        return ftpsClient.changeWorkingDirectory(dstPath);\r\n    }\r\n\r\n    public boolean exists(String dstPath) throws IOException {\r\n        if (isDirectory(dstPath)) {\r\n            return true;\r\n        }\r\n        FTPFile[] remoteFiles = ftpsClient.listFiles(dstPath);\r\n        return remoteFiles != null &amp;&amp; remoteFiles.length &gt; 0;\r\n    }","title":"Checking file existence on FTP server","body":"<pre><code>public boolean isDirectory(String dstPath) throws IOException {\n    return ftpsClient.changeWorkingDirectory(dstPath);\n}\n\npublic boolean exists(String dstPath) throws IOException {\n    if (isDirectory(dstPath)) {\n        return true;\n    }\n    FTPFile[] remoteFiles = ftpsClient.listFiles(dstPath);\n    return remoteFiles != null &amp;&amp; remoteFiles.length &gt; 0;\n}\n</code></pre>\n"}],"owner":{"account_id":983997,"reputation":7005,"user_id":1002972,"accept_rate":61,"display_name":"manash"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":36389,"favorite_count":0,"down_vote_count":0,"up_vote_count":22,"accepted_answer_id":10482449,"answer_count":4,"score":22,"last_activity_date":1698125960,"creation_date":1336394201,"question_id":10482204,"body_markdown":"Is there an efficient way to check the existence of a file on a FTP server? I&#39;m using Apache Commons Net. I know that I can use the `listNames` method of `FTPClient` to get all the files in a specific directory and then I can go over this list to check if a given file exists, but I don&#39;t think it&#39;s efficient especially when the server contains a lot of files.\r\n","title":"Checking file existence on FTP server","body":"<p>Is there an efficient way to check the existence of a file on a FTP server? I'm using Apache Commons Net. I know that I can use the <code>listNames</code> method of <code>FTPClient</code> to get all the files in a specific directory and then I can go over this list to check if a given file exists, but I don't think it's efficient especially when the server contains a lot of files.</p>\n"},{"tags":["java","android","ftp","apache-commons-net"],"answers":[{"tags":[],"owner":{"account_id":453710,"reputation":192083,"user_id":850848,"accept_rate":80,"display_name":"Martin Prikryl"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1698125938,"creation_date":1517223397,"answer_id":48499587,"question_id":48499334,"body_markdown":"Your server does not support `SYST` command, that the `FTPClient` needs to decide how to parse a response of `LIST` command.\r\n\r\nSolutions are:\r\n\r\n- If your server supports `MLSD` command, use [`mlistDir`](https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTPClient.html#mlistDir()) instead of `listFiles`.\r\n- Or use `System.setProperty` to set `FTP_SYSTEM_TYPE_DEFAULT` or `FTP_SYSTEM_TYPE` to suggest what directory listing format your server is using.","title":"Getting &quot;Unable to determine system type - response: 500 Unknow command&quot; when listing files on ESP8266 with Apache Commons Net","body":"<p>Your server does not support <code>SYST</code> command, that the <code>FTPClient</code> needs to decide how to parse a response of <code>LIST</code> command.</p>\n<p>Solutions are:</p>\n<ul>\n<li>If your server supports <code>MLSD</code> command, use <a href=\"https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTPClient.html#mlistDir()\" rel=\"nofollow noreferrer\"><code>mlistDir</code></a> instead of <code>listFiles</code>.</li>\n<li>Or use <code>System.setProperty</code> to set <code>FTP_SYSTEM_TYPE_DEFAULT</code> or <code>FTP_SYSTEM_TYPE</code> to suggest what directory listing format your server is using.</li>\n</ul>\n"}],"owner":{"account_id":6045183,"reputation":41,"user_id":9047297,"display_name":"istimbi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2875,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":48499587,"answer_count":1,"score":3,"last_activity_date":1698125938,"creation_date":1517222652,"question_id":48499334,"body_markdown":"I try to connect to FTP server in `ESP8266`. Connection is successful, but I can&#39;t get list of files on the server. \r\n\r\nMy code is:\r\n\r\n    FTPClient mFtpClient = new FTPClient();\r\n    mFtpClient.setConnectTimeout(10000);\r\n    mFtpClient.connect(InetAddress.getByName(ip));\r\n    status = mFtpClient.login(userName, pass);\r\n    Log.e(&quot;isFTPConnected&quot;, String.valueOf(status));\r\n    if (FTPReply.isPositiveCompletion(mFtpClient.getReplyCode())) {\r\n        mFtpClient.setFileType(FTP.BINARY_FILE_TYPE);\r\n        mFtpClient.enterLocalPassiveMode();\r\n        FTPFile[] mFileArray = mFtpClient.listFiles();\r\n        Log.e(&quot;Size&quot;, String.valueOf(mFileArray.length));\r\n    }\r\n\r\n**In logical I get the error :** \r\n\r\n&gt;java.io.IOException: Unable to determine system type - response: 500 Unknow command. \r\n\r\nI use Apache Commons Net FTP library. So what is wrong in my code? From `FileZilla` Windows client, I can connect. May be the reason is that in ESP is SPIFF file system? Or another one reason? \r\n\r\nThanks for answers, and interest!\r\n","title":"Getting &quot;Unable to determine system type - response: 500 Unknow command&quot; when listing files on ESP8266 with Apache Commons Net","body":"<p>I try to connect to FTP server in <code>ESP8266</code>. Connection is successful, but I can't get list of files on the server. </p>\n\n<p>My code is:</p>\n\n<pre><code>FTPClient mFtpClient = new FTPClient();\nmFtpClient.setConnectTimeout(10000);\nmFtpClient.connect(InetAddress.getByName(ip));\nstatus = mFtpClient.login(userName, pass);\nLog.e(\"isFTPConnected\", String.valueOf(status));\nif (FTPReply.isPositiveCompletion(mFtpClient.getReplyCode())) {\n    mFtpClient.setFileType(FTP.BINARY_FILE_TYPE);\n    mFtpClient.enterLocalPassiveMode();\n    FTPFile[] mFileArray = mFtpClient.listFiles();\n    Log.e(\"Size\", String.valueOf(mFileArray.length));\n}\n</code></pre>\n\n<p><strong>In logical I get the error :</strong> </p>\n\n<blockquote>\n  <p>java.io.IOException: Unable to determine system type - response: 500 Unknow command. </p>\n</blockquote>\n\n<p>I use Apache Commons Net FTP library. So what is wrong in my code? From <code>FileZilla</code> Windows client, I can connect. May be the reason is that in ESP is SPIFF file system? Or another one reason? </p>\n\n<p>Thanks for answers, and interest!</p>\n"},{"tags":["java","ftp","ftp-client","apache-commons-net"],"answers":[{"tags":[],"owner":{"account_id":453710,"reputation":192083,"user_id":850848,"accept_rate":80,"display_name":"Martin Prikryl"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1698125912,"creation_date":1540360350,"answer_id":52961854,"question_id":52952749,"body_markdown":"The **active** mode is the default.\r\n\r\nDocumentation for [`FTPClient` constructor](https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTPClient.html#%3Cinit%3E()) says:\r\n\r\n&gt; Default FTPClient constructor. Creates a new FTPClient instance with the **data connection mode set to `ACTIVE_LOCAL_DATA_CONNECTION_MODE`** , the file type set to `FTP.ASCII_FILE_TYPE` , the file format set to FTP.NON_PRINT_TEXT_FORMAT , the file structure set to `FTP.FILE_STRUCTURE` , and the transfer mode set to `FTP.STREAM_TRANSFER_MODE` .\r\n\r\n","title":"Does Apache Commons Net FTPClient use passive or active mode by default?","body":"<p>The <strong>active</strong> mode is the default.</p>\n<p>Documentation for <a href=\"https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTPClient.html#%3Cinit%3E()\" rel=\"nofollow noreferrer\"><code>FTPClient</code> constructor</a> says:</p>\n<blockquote>\n<p>Default FTPClient constructor. Creates a new FTPClient instance with the <strong>data connection mode set to <code>ACTIVE_LOCAL_DATA_CONNECTION_MODE</code></strong> , the file type set to <code>FTP.ASCII_FILE_TYPE</code> , the file format set to FTP.NON_PRINT_TEXT_FORMAT , the file structure set to <code>FTP.FILE_STRUCTURE</code> , and the transfer mode set to <code>FTP.STREAM_TRANSFER_MODE</code> .</p>\n</blockquote>\n"}],"owner":{"account_id":4719079,"reputation":1173,"user_id":3817503,"accept_rate":50,"display_name":"goe"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2479,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":52961854,"answer_count":1,"score":1,"last_activity_date":1698125912,"creation_date":1540308505,"question_id":52952749,"body_markdown":"The app I&#39;m working with uses `FTPClient` class from Apache Commons Net to connect and transfer files to a FTP server. I&#39;m trying to establish if it&#39;s doing that in a passive or active mode by default and I can&#39;t see any references in the app&#39;s code or in the library itself.\r\n\r\nAny ideas?","title":"Does Apache Commons Net FTPClient use passive or active mode by default?","body":"<p>The app I'm working with uses <code>FTPClient</code> class from Apache Commons Net to connect and transfer files to a FTP server. I'm trying to establish if it's doing that in a passive or active mode by default and I can't see any references in the app's code or in the library itself.</p>\n\n<p>Any ideas?</p>\n"},{"tags":["java","spring"],"answers":[{"tags":[],"owner":{"account_id":14207111,"reputation":332,"user_id":10263321,"display_name":"Aleson"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698111840,"creation_date":1698111840,"answer_id":77349071,"question_id":77349015,"body_markdown":"Hi yes circular reference is discouraged because it indicates some bad design in the system. Although in your case I think you can declare your PasswordEncoder Bean in another class, that should fix it.","title":"Relying upon circular reference is discouraged and they are prohibited by default in spring boot application","body":"<p>Hi yes circular reference is discouraged because it indicates some bad design in the system. Although in your case I think you can declare your PasswordEncoder Bean in another class, that should fix it.</p>\n"},{"tags":[],"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698124699,"creation_date":1698124699,"answer_id":77349669,"question_id":77349015,"body_markdown":"It is impossible to create either a `UserServiceImpl` or a `SecurityConfiguration` object without having already created the other:\r\n\r\n* To create a `UserServiceImpl` Spring needs to call its constructor `UserServiceImpl(UserRepository userRepository, PasswordEncoder passwordEncoder)` which it can only do after it has created a `PasswordEncoder` object.\r\n\r\n* To create a `PasswordEncoder` object Spring has to call `SecurityConfiguration.passwordEncoder()` which it can only do after it has created a `SecurityConfiguration` object.\r\n\r\n* To create a `SecurityConfiguration` Spring needs to call its constructor `SecurityConfiguration(UserService userService)` which it can only do after it has created a `UserServiceImpl` object.\r\n\r\nYou can solve this problem by defining both the `PasswordEncoder` and the `UserServiceImpl` as beans in the `SecurityConfiguration`:\r\n\r\n    public class SecurityConfiguration {\r\n    \r\n        @Bean\r\n        public UserService userService(UserRepository userRepository, PasswordEncoder passwordEncoder) {\r\n            return new UserServiceImpl(userRepository, passwordEncoder);\r\n        }\r\n    \r\n        @Bean\r\n        public PasswordEncoder passwordEncoder() {\r\n            return new BCryptPasswordEncoder();\r\n        }\r\n    }\r\n\r\n","title":"Relying upon circular reference is discouraged and they are prohibited by default in spring boot application","body":"<p>It is impossible to create either a <code>UserServiceImpl</code> or a <code>SecurityConfiguration</code> object without having already created the other:</p>\n<ul>\n<li><p>To create a <code>UserServiceImpl</code> Spring needs to call its constructor <code>UserServiceImpl(UserRepository userRepository, PasswordEncoder passwordEncoder)</code> which it can only do after it has created a <code>PasswordEncoder</code> object.</p>\n</li>\n<li><p>To create a <code>PasswordEncoder</code> object Spring has to call <code>SecurityConfiguration.passwordEncoder()</code> which it can only do after it has created a <code>SecurityConfiguration</code> object.</p>\n</li>\n<li><p>To create a <code>SecurityConfiguration</code> Spring needs to call its constructor <code>SecurityConfiguration(UserService userService)</code> which it can only do after it has created a <code>UserServiceImpl</code> object.</p>\n</li>\n</ul>\n<p>You can solve this problem by defining both the <code>PasswordEncoder</code> and the <code>UserServiceImpl</code> as beans in the <code>SecurityConfiguration</code>:</p>\n<pre><code>public class SecurityConfiguration {\n\n    @Bean\n    public UserService userService(UserRepository userRepository, PasswordEncoder passwordEncoder) {\n        return new UserServiceImpl(userRepository, passwordEncoder);\n    }\n\n    @Bean\n    public PasswordEncoder passwordEncoder() {\n        return new BCryptPasswordEncoder();\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":26966524,"reputation":1,"user_id":20533297,"display_name":"Mohammed Alsherif"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":589,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1698124699,"creation_date":1698110291,"question_id":77349015,"body_markdown":"Hello guys Im new to using spring I&#39;m trying to create a login registration page but I&#39;m facing this error. The dependencies of some of the beans in the application context form a cycle:\r\n\r\n    ┌─────┐\r\n    |  securityConfiguration defined in file \r\n    [C:\\Users\\hp\\Documents\\workspace-spring-tool-suite-4-     \r\n    4.20.0.RELEASE\\springboot-registeration-login-3\\target\\classes\\net\\javaguides\\springboot\\config\\SecurityConfiguration.class]\r\n    ↑     ↓\r\n    |  userServiceImpl defined in file \r\n    [C:\\Users\\hp\\Documents\\workspace-spring-tool-suite-4- 4.20.0.    \r\n    RELEASE\\springboot-registeration-login-3\\target\\classes\\net\\javaguides\\springboot\\service\\UserServiceImpl.class]\r\n    └─────┘\r\n\r\n\r\nAction:\r\n\r\nRelying upon circular references is discouraged and they are prohibited by default. Update your application to remove the dependency cycle between beans. As a last resort, it may be possible to break the cycle automatically by setting spring.main.allow-circular-references to true.\r\n\r\n\r\n\r\nThat&#39;s my userservice implementation part for password encoder:\r\n    private final UserRepository userRepository;\r\n    private final PasswordEncoder passwordEncoder;\r\n\r\n    @Autowired\r\n    public UserServiceImpl(UserRepository userRepository, PasswordEncoder passwordEncoder) {\r\n    this.userRepository = userRepository;\r\n    this.passwordEncoder = passwordEncoder;\r\n\t    }``\r\n\r\nand thats for the security config: \r\n    public class SecurityConfiguration {\r\n\r\n\tprivate final UserService userService;\r\n\r\n    public SecurityConfiguration(UserService userService) {\r\n        this.userService = userService;\r\n    }\r\n\r\n    @Bean\r\n    public PasswordEncoder passwordEncoder() {\r\n        return new BCryptPasswordEncoder();\r\n    }\r\n\r\nI have tried allowing circular dependency but Im getting this error Despite circular references being allowed, the dependency cycle between beans could not be broken. Update your application to remove the dependency cycle.","title":"Relying upon circular reference is discouraged and they are prohibited by default in spring boot application","body":"<p>Hello guys Im new to using spring I'm trying to create a login registration page but I'm facing this error. The dependencies of some of the beans in the application context form a cycle:</p>\n<pre><code>┌─────┐\n|  securityConfiguration defined in file \n[C:\\Users\\hp\\Documents\\workspace-spring-tool-suite-4-     \n4.20.0.RELEASE\\springboot-registeration-login-3\\target\\classes\\net\\javaguides\\springboot\\config\\SecurityConfiguration.class]\n↑     ↓\n|  userServiceImpl defined in file \n[C:\\Users\\hp\\Documents\\workspace-spring-tool-suite-4- 4.20.0.    \nRELEASE\\springboot-registeration-login-3\\target\\classes\\net\\javaguides\\springboot\\service\\UserServiceImpl.class]\n└─────┘\n</code></pre>\n<p>Action:</p>\n<p>Relying upon circular references is discouraged and they are prohibited by default. Update your application to remove the dependency cycle between beans. As a last resort, it may be possible to break the cycle automatically by setting spring.main.allow-circular-references to true.</p>\n<p>That's my userservice implementation part for password encoder:\nprivate final UserRepository userRepository;\nprivate final PasswordEncoder passwordEncoder;</p>\n<pre><code>@Autowired\npublic UserServiceImpl(UserRepository userRepository, PasswordEncoder passwordEncoder) {\nthis.userRepository = userRepository;\nthis.passwordEncoder = passwordEncoder;\n    }``\n</code></pre>\n<p>and thats for the security config:\npublic class SecurityConfiguration {</p>\n<pre><code>private final UserService userService;\n\npublic SecurityConfiguration(UserService userService) {\n    this.userService = userService;\n}\n\n@Bean\npublic PasswordEncoder passwordEncoder() {\n    return new BCryptPasswordEncoder();\n}\n</code></pre>\n<p>I have tried allowing circular dependency but Im getting this error Despite circular references being allowed, the dependency cycle between beans could not be broken. Update your application to remove the dependency cycle.</p>\n"},{"tags":["java","kotlin","google-drive-api"],"answers":[{"tags":[],"owner":{"account_id":2323954,"reputation":41,"user_id":2077212,"display_name":"xeno"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698122303,"creation_date":1698122303,"answer_id":77349552,"question_id":77349551,"body_markdown":"The file returned from `service.files().get(fileId).execute()` includes a lot of fields, and some of them must be un-writable.\r\n\r\n[![Debug picture][1]][1]\r\n\r\nI managed to fix this error by just creating an empty File and setting trashed\r\n\r\n```\r\n        val file = com.google.api.services.drive.model.File()\r\n        file.setTrashed(true)\r\n        service.files().update(fileId, file).execute()\r\n```\r\n\r\n  [1]: https://i.stack.imgur.com/Eu7bI.png","title":"Google Drive API Java: Getting error when trying to move file to trash","body":"<p>The file returned from <code>service.files().get(fileId).execute()</code> includes a lot of fields, and some of them must be un-writable.</p>\n<p><a href=\"https://i.stack.imgur.com/Eu7bI.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Eu7bI.png\" alt=\"Debug picture\" /></a></p>\n<p>I managed to fix this error by just creating an empty File and setting trashed</p>\n<pre><code>        val file = com.google.api.services.drive.model.File()\n        file.setTrashed(true)\n        service.files().update(fileId, file).execute()\n</code></pre>\n"}],"owner":{"account_id":2323954,"reputation":41,"user_id":2077212,"display_name":"xeno"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"closed_date":1698136346,"answer_count":1,"score":-1,"last_activity_date":1698122303,"creation_date":1698122303,"question_id":77349551,"body_markdown":"I am trying to move a file to trash using the Java Google Drive API. Here&#39;s what I&#39;ve tried doing:\r\n\r\nThe code:\r\n\r\n```\r\n        val file = service.files().get(fileId).execute()\r\n        file.setTrashed(true)\r\n        service.files().update(fileId, file).execute()\r\n```\r\n\r\n\r\n\r\nThe error:\r\n\r\n```\r\nException in thread &quot;main&quot; com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden\r\nPOST https://www.googleapis.com/drive/v3/files/0B0XJAu1tqe0ZT01ZSzRLb3Zfa3c\r\n{\r\n  &quot;code&quot;: 403,\r\n  &quot;errors&quot;: [\r\n    {\r\n      &quot;domain&quot;: &quot;global&quot;,\r\n      &quot;message&quot;: &quot;The resource body includes fields which are not directly writable.&quot;,\r\n      &quot;reason&quot;: &quot;fieldNotWritable&quot;\r\n    }\r\n  ],\r\n  &quot;message&quot;: &quot;The resource body includes fields which are not directly writable.&quot;\r\n}\r\n\tat com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)\r\n\tat com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)\r\n\tat com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)\r\n\tat com.google.api.client.googleapis.services.AbstractGoogleClientRequest$1.interceptResponse(AbstractGoogleClientRequest.java:439)\r\n\tat com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)\r\n\tat com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:525)\r\n\tat com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:466)\r\n\tat com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:576)\r\n\tat DriveQuickstart.main(DriveQuickstart.kt:97)\r\n```","title":"Google Drive API Java: Getting error when trying to move file to trash","body":"<p>I am trying to move a file to trash using the Java Google Drive API. Here's what I've tried doing:</p>\n<p>The code:</p>\n<pre><code>        val file = service.files().get(fileId).execute()\n        file.setTrashed(true)\n        service.files().update(fileId, file).execute()\n</code></pre>\n<p>The error:</p>\n<pre><code>Exception in thread &quot;main&quot; com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden\nPOST https://www.googleapis.com/drive/v3/files/0B0XJAu1tqe0ZT01ZSzRLb3Zfa3c\n{\n  &quot;code&quot;: 403,\n  &quot;errors&quot;: [\n    {\n      &quot;domain&quot;: &quot;global&quot;,\n      &quot;message&quot;: &quot;The resource body includes fields which are not directly writable.&quot;,\n      &quot;reason&quot;: &quot;fieldNotWritable&quot;\n    }\n  ],\n  &quot;message&quot;: &quot;The resource body includes fields which are not directly writable.&quot;\n}\n    at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)\n    at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)\n    at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)\n    at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$1.interceptResponse(AbstractGoogleClientRequest.java:439)\n    at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)\n    at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:525)\n    at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:466)\n    at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:576)\n    at DriveQuickstart.main(DriveQuickstart.kt:97)\n</code></pre>\n"},{"tags":["java","reactjs","spring","cookies","cross-domain"],"comments":[{"owner":{"account_id":948440,"reputation":3485,"user_id":975164,"accept_rate":80,"display_name":"Irfanullah Jan"},"score":0,"creation_date":1650555654,"post_id":71957161,"comment_id":127151133,"body_markdown":"This may help https://stackoverflow.com/questions/20035101/why-does-my-javascript-code-receive-a-no-access-control-allow-origin-header-i","body":"This may help <a href=\"https://stackoverflow.com/questions/20035101/why-does-my-javascript-code-receive-a-no-access-control-allow-origin-header-i\" title=\"why does my javascript code receive a no access control allow origin header i\">stackoverflow.com/questions/20035101/&hellip;</a>"},{"owner":{"account_id":11168499,"reputation":87,"user_id":8196323,"display_name":"TasteMyBomb"},"score":0,"creation_date":1650557455,"post_id":71957161,"comment_id":127151842,"body_markdown":"@IrfanullahJan thanks for the reply, but the headers are fine. The cookie is not setting up.","body":"@IrfanullahJan thanks for the reply, but the headers are fine. The cookie is not setting up."}],"answers":[{"tags":[],"owner":{"account_id":29739962,"reputation":1,"user_id":22792450,"display_name":"CoderChaubey"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698121538,"creation_date":1698121538,"answer_id":77349513,"question_id":71957161,"body_markdown":"use this and see whether it works or not make sure to create a different java class and in your application.properties write app.client.url=&quot;localhost your url&quot;\r\n\r\n    @Component\r\n@Order(Ordered.HIGHEST_PRECEDENCE)\r\npublic class SimpleCorsFilter implements Filter {\r\n\r\n    @Value(&quot;${app.client.url}&quot;)\r\n    private String clientAppUrl = &quot;&quot;;\r\n\r\n    public SimpleCorsFilter() {\r\n    }\r\n\r\n    @Override\r\n    public void doFilter(ServletRequest req, ServletResponse res, FilterChain chain) throws IOException, ServletException {\r\n        HttpServletResponse response = (HttpServletResponse) res;\r\n        HttpServletRequest request = (HttpServletRequest) req;\r\n        Map&lt;String, String&gt; map = new HashMap&lt;&gt;();\r\n        String originHeader = request.getHeader(&quot;origin&quot;);\r\n        response.setHeader(&quot;Access-Control-Allow-Origin&quot;, originHeader);\r\n        response.setHeader(&quot;Access-Control-Allow-Methods&quot;, &quot;POST, GET, PUT, OPTIONS, DELETE&quot;);\r\n        response.setHeader(&quot;Access-Control-Max-Age&quot;, &quot;3600&quot;);\r\n        response.setHeader(&quot;Access-Control-Allow-Headers&quot;, &quot;*&quot;);\r\n\r\n        if (&quot;OPTIONS&quot;.equalsIgnoreCase(request.getMethod())) {\r\n            response.setStatus(HttpServletResponse.SC_OK);\r\n        } else {\r\n            chain.doFilter(req, res);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public void init(FilterConfig filterConfig) {\r\n    }\r\n\r\n    @Override\r\n    public void destroy() {\r\n    }\r\n}","title":"Issue regarding JWT token and CORS in Spring and React","body":"<p>use this and see whether it works or not make sure to create a different java class and in your application.properties write app.client.url=&quot;localhost your url&quot;</p>\n<pre><code>@Component\n</code></pre>\n<p>@Order(Ordered.HIGHEST_PRECEDENCE)\npublic class SimpleCorsFilter implements Filter {</p>\n<pre><code>@Value(&quot;${app.client.url}&quot;)\nprivate String clientAppUrl = &quot;&quot;;\n\npublic SimpleCorsFilter() {\n}\n\n@Override\npublic void doFilter(ServletRequest req, ServletResponse res, FilterChain chain) throws IOException, ServletException {\n    HttpServletResponse response = (HttpServletResponse) res;\n    HttpServletRequest request = (HttpServletRequest) req;\n    Map&lt;String, String&gt; map = new HashMap&lt;&gt;();\n    String originHeader = request.getHeader(&quot;origin&quot;);\n    response.setHeader(&quot;Access-Control-Allow-Origin&quot;, originHeader);\n    response.setHeader(&quot;Access-Control-Allow-Methods&quot;, &quot;POST, GET, PUT, OPTIONS, DELETE&quot;);\n    response.setHeader(&quot;Access-Control-Max-Age&quot;, &quot;3600&quot;);\n    response.setHeader(&quot;Access-Control-Allow-Headers&quot;, &quot;*&quot;);\n\n    if (&quot;OPTIONS&quot;.equalsIgnoreCase(request.getMethod())) {\n        response.setStatus(HttpServletResponse.SC_OK);\n    } else {\n        chain.doFilter(req, res);\n    }\n}\n\n@Override\npublic void init(FilterConfig filterConfig) {\n}\n\n@Override\npublic void destroy() {\n}\n</code></pre>\n<p>}</p>\n"}],"owner":{"account_id":11168499,"reputation":87,"user_id":8196323,"display_name":"TasteMyBomb"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":973,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1698121538,"creation_date":1650555369,"question_id":71957161,"body_markdown":"I am trying to create a spring boot application that uses a token authentication method. I wanted to go easy so I used this repo https://www.bezkoder.com/spring-boot-login-example-mysql/ as inspiration. No SQL problems. My code is exactly the same as that one there. \r\n\r\nWhen I am doing requests in POSTMAN everything works fine and nothing is wrong. \r\nWhen I am doing a request in the front end, I get a CORS error that I miss a header or some sort. I fixed that by adding the following class in the project\r\n\r\n    @Configuration\r\n    @EnableWebMvc\r\n    public class WebConfig implements WebMvcConfigurer {\r\n    \r\n        @Override\r\n        public void addCorsMappings(CorsRegistry registry) {\r\n            registry\r\n                    .addMapping(&quot;/**&quot;)\r\n                    .allowCredentials(true)\r\n                    .allowedHeaders(&quot;*&quot;)\r\n                    .allowedOrigins(&quot;http://localhost:3000&quot;);\r\n        }\r\n    }\r\n\r\nAt that point, I get the `set-cookie` header with the correct value, but the cookie is not set. I have also added the `withCredentials: true` in the header request in AXIOS. Can someone explain to me what is going on and show a solution to this problem using React as frontend? \r\n\r\nMany thanks! ","title":"Issue regarding JWT token and CORS in Spring and React","body":"<p>I am trying to create a spring boot application that uses a token authentication method. I wanted to go easy so I used this repo <a href=\"https://www.bezkoder.com/spring-boot-login-example-mysql/\" rel=\"nofollow noreferrer\">https://www.bezkoder.com/spring-boot-login-example-mysql/</a> as inspiration. No SQL problems. My code is exactly the same as that one there.</p>\n<p>When I am doing requests in POSTMAN everything works fine and nothing is wrong.\nWhen I am doing a request in the front end, I get a CORS error that I miss a header or some sort. I fixed that by adding the following class in the project</p>\n<pre><code>@Configuration\n@EnableWebMvc\npublic class WebConfig implements WebMvcConfigurer {\n\n    @Override\n    public void addCorsMappings(CorsRegistry registry) {\n        registry\n                .addMapping(&quot;/**&quot;)\n                .allowCredentials(true)\n                .allowedHeaders(&quot;*&quot;)\n                .allowedOrigins(&quot;http://localhost:3000&quot;);\n    }\n}\n</code></pre>\n<p>At that point, I get the <code>set-cookie</code> header with the correct value, but the cookie is not set. I have also added the <code>withCredentials: true</code> in the header request in AXIOS. Can someone explain to me what is going on and show a solution to this problem using React as frontend?</p>\n<p>Many thanks!</p>\n"},{"tags":["java","corba","jacorb"],"answers":[{"tags":[],"owner":{"account_id":7235311,"reputation":922,"user_id":5520794,"display_name":"vavasthi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1553612091,"creation_date":1553612091,"answer_id":55360146,"question_id":55359919,"body_markdown":"I think orbd has a -port option. So you should just say `orbd -port 9999`. The default port is 1049.\r\n","title":"How to specify port range used by JDK&#39;s orbd.exe (Object Request Broker Daemon)?","body":"<p>I think orbd has a -port option. So you should just say <code>orbd -port 9999</code>. The default port is 1049.</p>\n"}],"owner":{"account_id":7599521,"reputation":396,"user_id":5764628,"display_name":"Florian S."},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":353,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1698121244,"creation_date":1553611409,"question_id":55359919,"body_markdown":"We have a legacy application that is using CORBA for communiction between two Java processes on different machines. We are using the ORBD.exe from JDK as a Object Request Broker. In all existing environments there were no restrictions regarding the used ports between these two machines.\r\nThis application has now to be installed at another customer and they refused to open up all ports between the two workstations that are communicating via CORBA. Is there a way to configure ORBD.exe in a way that is uses only a range of let&#39;s say 20 ports?\r\nI searched around a little bit and found out that JacORB for example provides parameters for that (jacorb.net.socket_factory.port.min / jacorb.net.socket_factory.port.max) but regarding https://docs.oracle.com/javase/1.5.0/docs/guide/idl/orbd.html ORBD.exe seems only to allow the specification of the port where the name server is listening for new connections (-ORBInitialPort, default 1050) and another port which&#39;s usage I don&#39;t understand (-port, default 1049). Is that correct?","title":"How to specify port range used by JDK&#39;s orbd.exe (Object Request Broker Daemon)?","body":"<p>We have a legacy application that is using CORBA for communiction between two Java processes on different machines. We are using the ORBD.exe from JDK as a Object Request Broker. In all existing environments there were no restrictions regarding the used ports between these two machines.\nThis application has now to be installed at another customer and they refused to open up all ports between the two workstations that are communicating via CORBA. Is there a way to configure ORBD.exe in a way that is uses only a range of let's say 20 ports?\nI searched around a little bit and found out that JacORB for example provides parameters for that (jacorb.net.socket_factory.port.min / jacorb.net.socket_factory.port.max) but regarding <a href=\"https://docs.oracle.com/javase/1.5.0/docs/guide/idl/orbd.html\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/1.5.0/docs/guide/idl/orbd.html</a> ORBD.exe seems only to allow the specification of the port where the name server is listening for new connections (-ORBInitialPort, default 1050) and another port which's usage I don't understand (-port, default 1049). Is that correct?</p>\n"},{"tags":["java","string","fuzzy"],"comments":[{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1698042632,"post_id":77343032,"comment_id":136350105,"body_markdown":"if the middle name is included, the user isn&#39;t using the code correctly. Validate the firstname that it doesn&#39;t contain spaces (for instance), add null checks, ...","body":"if the middle name is included, the user isn&#39;t using the code correctly. Validate the firstname that it doesn&#39;t contain spaces (for instance), add null checks, ..."},{"owner":{"account_id":6651855,"reputation":224830,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":3,"creation_date":1698043248,"post_id":77343032,"comment_id":136350180,"body_markdown":"If a user enters their middle name in a place where their first name is expected, that&#39;s on *them*. It&#39;s like asking the user for their age and a 10yo says they are 30. You *cannot* reliably catch these cases.","body":"If a user enters their middle name in a place where their first name is expected, that&#39;s on <i>them</i>. It&#39;s like asking the user for their age and a 10yo says they are 30. You <i>cannot</i> reliably catch these cases."},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":1,"creation_date":1698047616,"post_id":77343032,"comment_id":136350840,"body_markdown":"It is better to exclude bad data at source than to allow it into your processing and then have to compensate for it.  Validate the user details and reject them if (for example) the user has entered a name with an embedded space where a space is not allowed.   The problem with fuzzy matching is that it is more complicated and it can give you false matches and mismatches.","body":"It is better to exclude bad data at source than to allow it into your processing and then have to compensate for it.  Validate the user details and reject them if (for example) the user has entered a name with an embedded space where a space is not allowed.   The problem with fuzzy matching is that it is more complicated and it can give you false matches and mismatches."}],"answers":[{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1698118157,"creation_date":1698118157,"answer_id":77349365,"question_id":77343032,"body_markdown":"&gt; _&quot;... it may fail in scenarios where the middle name is included in the first name or other similar combinations. ...&quot;_\r\n\r\nConcatenate the values.\r\n\r\n```java\r\nboolean compareString(String x, String y, String z) {\r\n    String a = x + &#39; &#39; + y + &#39; &#39; + z,\r\n           b = this.x + &#39; &#39; + this.y + &#39; &#39; + this.z;\r\n    return a.equalsIgnoreCase(b);\r\n\r\n}\r\n```","title":"How can plain string comparison be made less error prone?","body":"<blockquote>\n<p><em>&quot;... it may fail in scenarios where the middle name is included in the first name or other similar combinations. ...&quot;</em></p>\n</blockquote>\n<p>Concatenate the values.</p>\n<pre class=\"lang-java prettyprint-override\"><code>boolean compareString(String x, String y, String z) {\n    String a = x + ' ' + y + ' ' + z,\n           b = this.x + ' ' + this.y + ' ' + this.z;\n    return a.equalsIgnoreCase(b);\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11250085,"reputation":401,"user_id":8251447,"display_name":"Akjun"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1698119322,"creation_date":1698119322,"answer_id":77349417,"question_id":77343032,"body_markdown":"IMHO, you may utilize the Apache Commons Text library for fuzzy string matching.\r\nThe trick here is to calculate the matching score between the string you compare and use it to benchmark the similarity.\r\n\r\n \r\n    import org.apache.commons.text.similarity.FuzzyScore;\r\n    \r\n    private boolean compareNames(String firstName, String middleName, String lastName) {\r\n        // Initialize a FuzzyScore object with a matching threshold\r\n        FuzzyScore fuzzyScore = new FuzzyScore(0.8); // Adjust the threshold as needed\r\n\r\n    // Calculate matching scores for names\r\n    int firstNameScore = fuzzyScore.fuzzyScore(firstName, textToCompare);\r\n    int middleNameScore = fuzzyScore.fuzzyScore(middleName, textToCompare);\r\n    int lastNameScore = fuzzyScore.fuzzyScore(lastName, textToCompare);\r\n\r\n    // Check if the scores meet the threshold\r\n    return firstNameScore &gt;= fuzzyScore.getThreshold() &amp;&amp; middleNameScore &gt;= fuzzyScore.getThreshold() &amp;&amp; lastNameScore &gt;= fuzzyScore.getThreshold();\r\n    }\r\n\r\nYou may adjust the threshold according to your scenario. Hope this might give you an idea to kick start.","title":"How can plain string comparison be made less error prone?","body":"<p>IMHO, you may utilize the Apache Commons Text library for fuzzy string matching.\nThe trick here is to calculate the matching score between the string you compare and use it to benchmark the similarity.</p>\n<pre><code>import org.apache.commons.text.similarity.FuzzyScore;\n\nprivate boolean compareNames(String firstName, String middleName, String lastName) {\n    // Initialize a FuzzyScore object with a matching threshold\n    FuzzyScore fuzzyScore = new FuzzyScore(0.8); // Adjust the threshold as needed\n\n// Calculate matching scores for names\nint firstNameScore = fuzzyScore.fuzzyScore(firstName, textToCompare);\nint middleNameScore = fuzzyScore.fuzzyScore(middleName, textToCompare);\nint lastNameScore = fuzzyScore.fuzzyScore(lastName, textToCompare);\n\n// Check if the scores meet the threshold\nreturn firstNameScore &gt;= fuzzyScore.getThreshold() &amp;&amp; middleNameScore &gt;= fuzzyScore.getThreshold() &amp;&amp; lastNameScore &gt;= fuzzyScore.getThreshold();\n}\n</code></pre>\n<p>You may adjust the threshold according to your scenario. Hope this might give you an idea to kick start.</p>\n"}],"owner":{"account_id":20354547,"reputation":29,"user_id":14930379,"display_name":"NotACat"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":62,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1698119322,"creation_date":1698042558,"question_id":77343032,"body_markdown":"I have a method that compares a person&#39;s name with other person&#39;s details. However, it may fail in scenarios where the middle name is included in the first name or other similar combinations.\r\n\r\nI&#39;m exploring potential solutions and would like to know if applying fuzzy logic is an appropriate approach, or if there&#39;s a simpler and more effective solution available. Thanks.\r\n\r\n```\r\nprivate boolean compareString(String compareFirstName, String compareMiddleName, String compareLastName) {\r\n    return firstName.equalsIgnoreCase(compareFirstName) &amp;&amp; \r\nmiddleName.equalsIgnoreCase(compareMiddleName) &amp;&amp;\r\nlastName.equalsIgnoreCase(compareLastName);\r\n\r\n}\r\n```\r\n\r\n","title":"How can plain string comparison be made less error prone?","body":"<p>I have a method that compares a person's name with other person's details. However, it may fail in scenarios where the middle name is included in the first name or other similar combinations.</p>\n<p>I'm exploring potential solutions and would like to know if applying fuzzy logic is an appropriate approach, or if there's a simpler and more effective solution available. Thanks.</p>\n<pre><code>private boolean compareString(String compareFirstName, String compareMiddleName, String compareLastName) {\n    return firstName.equalsIgnoreCase(compareFirstName) &amp;&amp; \nmiddleName.equalsIgnoreCase(compareMiddleName) &amp;&amp;\nlastName.equalsIgnoreCase(compareLastName);\n\n}\n</code></pre>\n"},{"tags":["java","web-services","cxf","integration-testing","ws-security"],"answers":[{"tags":[],"owner":{"account_id":4619916,"reputation":1892,"user_id":3745288,"display_name":"Colm O hEigeartaigh"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1600954857,"creation_date":1439459053,"answer_id":31984736,"question_id":31962342,"body_markdown":"Do you have the cxf-rt-ws-security jar on the classpath?\r\n\r\nColm.","title":"org.apache.cxf.ws.policy.PolicyException: None of the policy alternatives can be satisfied","body":"<p>Do you have the cxf-rt-ws-security jar on the classpath?</p>\n<p>Colm.</p>\n"},{"tags":[],"owner":{"account_id":2459621,"reputation":1003,"user_id":2144057,"accept_rate":71,"display_name":"Kamil Roman"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1439849455,"creation_date":1439849455,"answer_id":32060516,"question_id":31962342,"body_markdown":"Finally solved this by adding WSS4JOutInterceptor. It seems that in JBoss this interceptor is added automatically...\r\n\r\n\r\n    Client client = ClientProxy.getClient(myService);\r\n    Endpoint endpoint = client.getEndpoint()\r\n    endpoint.getOutInterceptors().add(new WSS4JOutInterceptor())","title":"org.apache.cxf.ws.policy.PolicyException: None of the policy alternatives can be satisfied","body":"<p>Finally solved this by adding WSS4JOutInterceptor. It seems that in JBoss this interceptor is added automatically...</p>\n\n<pre><code>Client client = ClientProxy.getClient(myService);\nEndpoint endpoint = client.getEndpoint()\nendpoint.getOutInterceptors().add(new WSS4JOutInterceptor())\n</code></pre>\n"},{"tags":[],"owner":{"account_id":133153,"reputation":1517,"user_id":334300,"accept_rate":54,"display_name":"Chetan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1479458355,"creation_date":1479458355,"answer_id":40672604,"question_id":31962342,"body_markdown":"If the Policy defined in the WSDL file is non standard, then CXF will not be able resolve it.Hence the error. \r\n\r\nThere are two way - \r\nEither you can ignore it (if its okay to ignore)\r\nor provide an alternate provider.\r\n\r\nTo ignore - create an instance of IgnorablePolicyInterceptorProvider and register it.\r\n\r\nBelow is example for ignoring NtlmAuthentication policy if defined in your WSDL.\r\nNote: NtlmAuthentication should be handled differently than setting soap header.\r\n\r\n\r\n    Client client = ClientProxy.getClient(port);\r\n                      Bus bus = client.getBus();\r\n                      PolicyInterceptorProviderRegistry pipr = bus.getExtension(PolicyInterceptorProviderRegistry.class);\r\n    \r\n    QName ntmlIgnore = new QName(&quot;http://schemas.microsoft.com/ws/06/2004/policy/http&quot;, &quot;NtlmAuthentication&quot;);\r\n    interceptorRegProvider.register(new IgnorablePolicyInterceptorProvider(ntmlIgnore));","title":"org.apache.cxf.ws.policy.PolicyException: None of the policy alternatives can be satisfied","body":"<p>If the Policy defined in the WSDL file is non standard, then CXF will not be able resolve it.Hence the error. </p>\n\n<p>There are two way - \nEither you can ignore it (if its okay to ignore)\nor provide an alternate provider.</p>\n\n<p>To ignore - create an instance of IgnorablePolicyInterceptorProvider and register it.</p>\n\n<p>Below is example for ignoring NtlmAuthentication policy if defined in your WSDL.\nNote: NtlmAuthentication should be handled differently than setting soap header.</p>\n\n<pre><code>Client client = ClientProxy.getClient(port);\n                  Bus bus = client.getBus();\n                  PolicyInterceptorProviderRegistry pipr = bus.getExtension(PolicyInterceptorProviderRegistry.class);\n\nQName ntmlIgnore = new QName(\"http://schemas.microsoft.com/ws/06/2004/policy/http\", \"NtlmAuthentication\");\ninterceptorRegProvider.register(new IgnorablePolicyInterceptorProvider(ntmlIgnore));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7812311,"reputation":2813,"user_id":5908154,"accept_rate":10,"display_name":"Abhishek Galoda"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1493198465,"creation_date":1493198465,"answer_id":43630012,"question_id":31962342,"body_markdown":"Answer given by Chetan works, however, if you are getting error for multiple  policies you need to add them in a Set\r\n\r\n \r\n\r\n        org.apache.cxf.endpoint.Client client = \r\n        org.apache.cxf.frontend.ClientProxy.getClient(port);\r\n\t\torg.apache.cxf.endpoint.Endpoint cxfEndpoint = client.getEndpoint();\r\n\t \r\n\r\n\t\tBus bus = client.getBus();\r\n\t\tPolicyInterceptorProviderRegistry reg = bus.getExtension(PolicyInterceptorProviderRegistry.class);\r\n\t\tSet &lt;QName&gt; set = new HashSet&lt;&gt;();\r\n\t\tset.add(new QName(&quot;http://schemas.xmlsoap.org/ws/2005/07/securitypolicy&quot;, &quot;IncludeTimestamp&quot;) );\r\n\t\tset.add(new QName(&quot;http://schemas.xmlsoap.org/ws/2005/07/securitypolicy&quot;, &quot;TransportBinding&quot;));\r\n\t\treg.register(new IgnorablePolicyInterceptorProvider(set));\r\n \t\t\r\n[This link explains the solution in detail][1]\r\n\r\n\r\n  [1]: http://littlebigextra.com/fix-org-apache-cxf-ws-policy-policyexception-policy-alternatives-can-not-satisfied/","title":"org.apache.cxf.ws.policy.PolicyException: None of the policy alternatives can be satisfied","body":"<p>Answer given by Chetan works, however, if you are getting error for multiple  policies you need to add them in a Set</p>\n\n<pre><code>    org.apache.cxf.endpoint.Client client = \n    org.apache.cxf.frontend.ClientProxy.getClient(port);\n    org.apache.cxf.endpoint.Endpoint cxfEndpoint = client.getEndpoint();\n\n\n    Bus bus = client.getBus();\n    PolicyInterceptorProviderRegistry reg = bus.getExtension(PolicyInterceptorProviderRegistry.class);\n    Set &lt;QName&gt; set = new HashSet&lt;&gt;();\n    set.add(new QName(\"http://schemas.xmlsoap.org/ws/2005/07/securitypolicy\", \"IncludeTimestamp\") );\n    set.add(new QName(\"http://schemas.xmlsoap.org/ws/2005/07/securitypolicy\", \"TransportBinding\"));\n    reg.register(new IgnorablePolicyInterceptorProvider(set));\n</code></pre>\n\n<p><a href=\"http://littlebigextra.com/fix-org-apache-cxf-ws-policy-policyexception-policy-alternatives-can-not-satisfied/\" rel=\"nofollow noreferrer\">This link explains the solution in detail</a></p>\n"},{"tags":[],"owner":{"account_id":22929,"reputation":1492,"user_id":57033,"accept_rate":80,"display_name":"hello_earth"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1557055194,"creation_date":1557055194,"answer_id":55991386,"question_id":31962342,"body_markdown":"My own two cents : in my own special scenario (JAX-WS, WS-Security, WS-SecurityPolicy), this error was occuring when doing client.getConduit(), like below:\n\n    org.apache.cxf.endpoint.Client client = ClientProxy.getClient(port);\n    HTTPConduit conduit = (HTTPConduit) client.getConduit();\n\nThe above code was running without throwing any exceptions (although I had other problems later), when using Apache CXF 2.7.18 - I started to have problems with assertion builder when upgrading to Apache CXF 3.0.16. Now cxt-rt-ws-security JAR WAS on the classpath, but it seems that WSS4J in this version of CXF was split into multiple JARs, therefore I had to include wss4j-policy JAR from the CXF downloaded bundle to the classpath. \n\nThe error remained the same, but at least a long string of WARNings from assertion builder disappeared (No assertion builder for type T registered), being replaced now by:\n\n&gt; 13:45:55,723  WARN WSSecurityPolicyLoader,main:112 - Could not load or register WS-SecurityPolicy related classes. Please check that (the correct version of) Apache WSS4J is on the classpath: org/apache/wss4j/dom/handler/WSHandler\n&gt;\n&gt;13:45:55,753  WARN WSSecurityPolicyLoader,main:112 - Could not load or register WS-SecurityPolicy related classes. Please check that (the correct version of) Apache WSS4J is on the classpath: org/apache/cxf/ws/security/wss4j/PolicyBasedWSS4JInInterceptor\n\nTo make the story short, I received other warnings (I was finding the JARs by doing a blind grep inside the lib directory of the CXF bundle, and including them one by one),  \nand ended up including all wss4j-*.jar files\n\nAnd the call to getConduit() now passes at least. Whew.","title":"org.apache.cxf.ws.policy.PolicyException: None of the policy alternatives can be satisfied","body":"<p>My own two cents : in my own special scenario (JAX-WS, WS-Security, WS-SecurityPolicy), this error was occuring when doing client.getConduit(), like below:</p>\n<pre><code>org.apache.cxf.endpoint.Client client = ClientProxy.getClient(port);\nHTTPConduit conduit = (HTTPConduit) client.getConduit();\n</code></pre>\n<p>The above code was running without throwing any exceptions (although I had other problems later), when using Apache CXF 2.7.18 - I started to have problems with assertion builder when upgrading to Apache CXF 3.0.16. Now cxt-rt-ws-security JAR WAS on the classpath, but it seems that WSS4J in this version of CXF was split into multiple JARs, therefore I had to include wss4j-policy JAR from the CXF downloaded bundle to the classpath.</p>\n<p>The error remained the same, but at least a long string of WARNings from assertion builder disappeared (No assertion builder for type T registered), being replaced now by:</p>\n<blockquote>\n<p>13:45:55,723  WARN WSSecurityPolicyLoader,main:112 - Could not load or register WS-SecurityPolicy related classes. Please check that (the correct version of) Apache WSS4J is on the classpath: org/apache/wss4j/dom/handler/WSHandler</p>\n<p>13:45:55,753  WARN WSSecurityPolicyLoader,main:112 - Could not load or register WS-SecurityPolicy related classes. Please check that (the correct version of) Apache WSS4J is on the classpath: org/apache/cxf/ws/security/wss4j/PolicyBasedWSS4JInInterceptor</p>\n</blockquote>\n<p>To make the story short, I received other warnings (I was finding the JARs by doing a blind grep inside the lib directory of the CXF bundle, and including them one by one),<br />\nand ended up including all wss4j-*.jar files</p>\n<p>And the call to getConduit() now passes at least. Whew.</p>\n"},{"tags":[],"owner":{"account_id":19688332,"reputation":11,"user_id":14413857,"display_name":"Sergey Manman"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1662385434,"creation_date":1662385434,"answer_id":73610348,"question_id":31962342,"body_markdown":"If you are using Spring Boot, you can disable policy check like this: \r\n\r\n```\r\n    @Bean(name = Bus.DEFAULT_BUS_ID)\r\n    public SpringBus springBus() {\r\n        SpringBus springBus = new SpringBus();\r\n        var e = new PolicyEngineBPDefinitionParser.PolicyEngineConfig(springBus);\r\n        e.setEnabled(false);\r\n        springBus.getFeatures().add(e);\r\n    }\r\n```","title":"org.apache.cxf.ws.policy.PolicyException: None of the policy alternatives can be satisfied","body":"<p>If you are using Spring Boot, you can disable policy check like this:</p>\n<pre><code>    @Bean(name = Bus.DEFAULT_BUS_ID)\n    public SpringBus springBus() {\n        SpringBus springBus = new SpringBus();\n        var e = new PolicyEngineBPDefinitionParser.PolicyEngineConfig(springBus);\n        e.setEnabled(false);\n        springBus.getFeatures().add(e);\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":29739741,"reputation":1,"user_id":22792280,"display_name":"Ash"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698118316,"creation_date":1698118316,"answer_id":77349372,"question_id":31962342,"body_markdown":"    bus.getExtension(PolicyEngine.class).setEnabled(false);","title":"org.apache.cxf.ws.policy.PolicyException: None of the policy alternatives can be satisfied","body":"<pre><code>bus.getExtension(PolicyEngine.class).setEnabled(false);\n</code></pre>\n"}],"owner":{"account_id":2459621,"reputation":1003,"user_id":2144057,"accept_rate":71,"display_name":"Kamil Roman"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":19728,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":32060516,"answer_count":7,"score":3,"last_activity_date":1698118316,"creation_date":1439374655,"question_id":31962342,"body_markdown":"I would like to write a simple integration test with JUnit and Apache CXF to test some WS-Security-enabled services. While I try to run my code:\r\n\r\n    MyService myService = new myWsService(MY_SERVICE_WSDL).getMyWs()\r\n    Client client = ClientProxy.getClient(myService);\r\n    Map&lt;String, Object&gt; ctx = ((BindingProvider) myService).getRequestContext();\r\n    ctx.put(&quot;ws-security.callback-handler&quot;, new KeystorePasswordCallback());\r\n    ctx.put(&quot;ws-security.signature.crypto&quot;, new MyMerlinImpl());\r\n\r\nWhere MyMerlinImpl simply passes required Merln.* property values in overridden `loadProperties` method,\r\n\r\nI get:\r\n\r\n    sie 12, 2015 11:52:10 AM org.apache.cxf.ws.policy.AssertionBuilderRegistryImpl handleNoRegisteredBuilder\r\n    WARNING: No assertion builder for type {http://docs.oasis-open.org/ws-sx/ws-securitypolicy/200702}AsymmetricBinding registered.\r\n    sie 12, 2015 11:52:10 AM org.apache.cxf.ws.policy.AssertionBuilderRegistryImpl handleNoRegisteredBuilder\r\n    WARNING: No assertion builder for type {http://docs.oasis-open.org/ws-sx/ws-securitypolicy/200702}InitiatorToken registered.\r\n    sie 12, 2015 11:52:10 AM org.apache.cxf.ws.policy.AssertionBuilderRegistryImpl handleNoRegisteredBuilder\r\n    WARNING: No assertion builder for type {http://docs.oasis-open.org/ws-sx/ws-securitypolicy/200702}X509Token registered.\r\n    sie 12, 2015 11:52:10 AM org.apache.cxf.ws.policy.AssertionBuilderRegistryImpl handleNoRegisteredBuilder\r\n    WARNING: No assertion builder for type {http://docs.oasis-open.org/ws-sx/ws-securitypolicy/200702}WssX509V1Token11 registered.\r\n    sie 12, 2015 11:52:10 AM org.apache.cxf.ws.policy.AssertionBuilderRegistryImpl handleNoRegisteredBuilder\r\n    WARNING: No assertion builder for type {http://docs.oasis-open.org/ws-sx/ws-securitypolicy/200702}RequireIssuerSerialReference registered.\r\n    sie 12, 2015 11:52:10 AM org.apache.cxf.ws.policy.AssertionBuilderRegistryImpl handleNoRegisteredBuilder\r\n    WARNING: No assertion builder for type {http://docs.oasis-open.org/ws-sx/ws-securitypolicy/200702}RecipientToken registered.\r\n    sie 12, 2015 11:52:10 AM org.apache.cxf.ws.policy.AssertionBuilderRegistryImpl handleNoRegisteredBuilder\r\n    WARNING: No assertion builder for type {http://docs.oasis-open.org/ws-sx/ws-securitypolicy/200702}AlgorithmSuite registered.\r\n    sie 12, 2015 11:52:10 AM org.apache.cxf.ws.policy.AssertionBuilderRegistryImpl handleNoRegisteredBuilder\r\n    WARNING: No assertion builder for type {http://docs.oasis-open.org/ws-sx/ws-securitypolicy/200702}Basic256Sha256 registered.\r\n    sie 12, 2015 11:52:10 AM org.apache.cxf.ws.policy.AssertionBuilderRegistryImpl handleNoRegisteredBuilder\r\n    WARNING: No assertion builder for type {http://docs.oasis-open.org/ws-sx/ws-securitypolicy/200702}InclusiveC14N registered.\r\n    sie 12, 2015 11:52:10 AM org.apache.cxf.ws.policy.AssertionBuilderRegistryImpl handleNoRegisteredBuilder\r\n    WARNING: No assertion builder for type {http://docs.oasis-open.org/ws-sx/ws-securitypolicy/200702}Layout registered.\r\n    sie 12, 2015 11:52:10 AM org.apache.cxf.ws.policy.AssertionBuilderRegistryImpl handleNoRegisteredBuilder\r\n    WARNING: No assertion builder for type {http://docs.oasis-open.org/ws-sx/ws-securitypolicy/200702}Strict registered.\r\n    sie 12, 2015 11:52:10 AM org.apache.cxf.ws.policy.AssertionBuilderRegistryImpl handleNoRegisteredBuilder\r\n    WARNING: No assertion builder for type {http://docs.oasis-open.org/ws-sx/ws-securitypolicy/200702}OnlySignEntireHeadersAndBody registered.\r\n    sie 12, 2015 11:52:10 AM org.apache.cxf.ws.policy.AssertionBuilderRegistryImpl handleNoRegisteredBuilder\r\n    WARNING: No assertion builder for type {http://docs.oasis-open.org/ws-sx/ws-securitypolicy/200702}SignedParts registered.\r\n    sie 12, 2015 11:52:10 AM org.apache.cxf.ws.policy.AssertionBuilderRegistryImpl handleNoRegisteredBuilder\r\n    WARNING: No assertion builder for type {http://docs.oasis-open.org/ws-sx/ws-securitypolicy/200702}Wss11 registered.\r\n    sie 12, 2015 11:52:10 AM org.apache.cxf.ws.policy.AssertionBuilderRegistryImpl handleNoRegisteredBuilder\r\n    WARNING: No assertion builder for type {http://docs.oasis-open.org/ws-sx/ws-securitypolicy/200702}MustSupportRefIssuerSerial registered.\r\n    \r\n    org.apache.cxf.ws.policy.PolicyException: None of the policy alternatives can be satisfied.\r\n\r\nWhat am I doing wrong? These seem to be rather standard policies... In fact, I use the same code on a JBoss EAP 6.1 WS client and it works well.","title":"org.apache.cxf.ws.policy.PolicyException: None of the policy alternatives can be satisfied","body":"<p>I would like to write a simple integration test with JUnit and Apache CXF to test some WS-Security-enabled services. While I try to run my code:</p>\n\n<pre><code>MyService myService = new myWsService(MY_SERVICE_WSDL).getMyWs()\nClient client = ClientProxy.getClient(myService);\nMap&lt;String, Object&gt; ctx = ((BindingProvider) myService).getRequestContext();\nctx.put(\"ws-security.callback-handler\", new KeystorePasswordCallback());\nctx.put(\"ws-security.signature.crypto\", new MyMerlinImpl());\n</code></pre>\n\n<p>Where MyMerlinImpl simply passes required Merln.* property values in overridden <code>loadProperties</code> method,</p>\n\n<p>I get:</p>\n\n<pre><code>sie 12, 2015 11:52:10 AM org.apache.cxf.ws.policy.AssertionBuilderRegistryImpl handleNoRegisteredBuilder\nWARNING: No assertion builder for type {http://docs.oasis-open.org/ws-sx/ws-securitypolicy/200702}AsymmetricBinding registered.\nsie 12, 2015 11:52:10 AM org.apache.cxf.ws.policy.AssertionBuilderRegistryImpl handleNoRegisteredBuilder\nWARNING: No assertion builder for type {http://docs.oasis-open.org/ws-sx/ws-securitypolicy/200702}InitiatorToken registered.\nsie 12, 2015 11:52:10 AM org.apache.cxf.ws.policy.AssertionBuilderRegistryImpl handleNoRegisteredBuilder\nWARNING: No assertion builder for type {http://docs.oasis-open.org/ws-sx/ws-securitypolicy/200702}X509Token registered.\nsie 12, 2015 11:52:10 AM org.apache.cxf.ws.policy.AssertionBuilderRegistryImpl handleNoRegisteredBuilder\nWARNING: No assertion builder for type {http://docs.oasis-open.org/ws-sx/ws-securitypolicy/200702}WssX509V1Token11 registered.\nsie 12, 2015 11:52:10 AM org.apache.cxf.ws.policy.AssertionBuilderRegistryImpl handleNoRegisteredBuilder\nWARNING: No assertion builder for type {http://docs.oasis-open.org/ws-sx/ws-securitypolicy/200702}RequireIssuerSerialReference registered.\nsie 12, 2015 11:52:10 AM org.apache.cxf.ws.policy.AssertionBuilderRegistryImpl handleNoRegisteredBuilder\nWARNING: No assertion builder for type {http://docs.oasis-open.org/ws-sx/ws-securitypolicy/200702}RecipientToken registered.\nsie 12, 2015 11:52:10 AM org.apache.cxf.ws.policy.AssertionBuilderRegistryImpl handleNoRegisteredBuilder\nWARNING: No assertion builder for type {http://docs.oasis-open.org/ws-sx/ws-securitypolicy/200702}AlgorithmSuite registered.\nsie 12, 2015 11:52:10 AM org.apache.cxf.ws.policy.AssertionBuilderRegistryImpl handleNoRegisteredBuilder\nWARNING: No assertion builder for type {http://docs.oasis-open.org/ws-sx/ws-securitypolicy/200702}Basic256Sha256 registered.\nsie 12, 2015 11:52:10 AM org.apache.cxf.ws.policy.AssertionBuilderRegistryImpl handleNoRegisteredBuilder\nWARNING: No assertion builder for type {http://docs.oasis-open.org/ws-sx/ws-securitypolicy/200702}InclusiveC14N registered.\nsie 12, 2015 11:52:10 AM org.apache.cxf.ws.policy.AssertionBuilderRegistryImpl handleNoRegisteredBuilder\nWARNING: No assertion builder for type {http://docs.oasis-open.org/ws-sx/ws-securitypolicy/200702}Layout registered.\nsie 12, 2015 11:52:10 AM org.apache.cxf.ws.policy.AssertionBuilderRegistryImpl handleNoRegisteredBuilder\nWARNING: No assertion builder for type {http://docs.oasis-open.org/ws-sx/ws-securitypolicy/200702}Strict registered.\nsie 12, 2015 11:52:10 AM org.apache.cxf.ws.policy.AssertionBuilderRegistryImpl handleNoRegisteredBuilder\nWARNING: No assertion builder for type {http://docs.oasis-open.org/ws-sx/ws-securitypolicy/200702}OnlySignEntireHeadersAndBody registered.\nsie 12, 2015 11:52:10 AM org.apache.cxf.ws.policy.AssertionBuilderRegistryImpl handleNoRegisteredBuilder\nWARNING: No assertion builder for type {http://docs.oasis-open.org/ws-sx/ws-securitypolicy/200702}SignedParts registered.\nsie 12, 2015 11:52:10 AM org.apache.cxf.ws.policy.AssertionBuilderRegistryImpl handleNoRegisteredBuilder\nWARNING: No assertion builder for type {http://docs.oasis-open.org/ws-sx/ws-securitypolicy/200702}Wss11 registered.\nsie 12, 2015 11:52:10 AM org.apache.cxf.ws.policy.AssertionBuilderRegistryImpl handleNoRegisteredBuilder\nWARNING: No assertion builder for type {http://docs.oasis-open.org/ws-sx/ws-securitypolicy/200702}MustSupportRefIssuerSerial registered.\n\norg.apache.cxf.ws.policy.PolicyException: None of the policy alternatives can be satisfied.\n</code></pre>\n\n<p>What am I doing wrong? These seem to be rather standard policies... In fact, I use the same code on a JBoss EAP 6.1 WS client and it works well.</p>\n"},{"tags":["java","android"],"owner":{"account_id":122280,"reputation":13986,"user_id":315998,"accept_rate":88,"display_name":"stealthcopter"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":50,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1698117910,"creation_date":1697911643,"question_id":77337223,"body_markdown":"I have a livewallpaper application that implements a DreamService following the guide [here][1] and I am infrequently seeing crash reports come in with the following `ClassCastException` being thrown when it is launched:\r\n\r\n```\r\nException java.lang.RuntimeException:\r\n  at android.app.ActivityThread.performLaunchActivity (ActivityThread.java:4169)\r\n  at android.app.ActivityThread.handleLaunchActivity (ActivityThread.java:4325)\r\n  at android.app.servertransaction.LaunchActivityItem.execute (LaunchActivityItem.java:101)\r\n  at android.app.servertransaction.TransactionExecutor.executeCallbacks (TransactionExecutor.java:135)\r\n  at android.app.servertransaction.TransactionExecutor.execute (TransactionExecutor.java:95)\r\n  at android.app.ActivityThread$H.handleMessage (ActivityThread.java:2574)\r\n  at android.os.Handler.dispatchMessage (Handler.java:106)\r\n  at android.os.Looper.loopOnce (Looper.java:226)\r\n  at android.os.Looper.loop (Looper.java:313)\r\n  at android.app.ActivityThread.main (ActivityThread.java:8762)\r\n  at java.lang.reflect.Method.invoke\r\n  at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run (RuntimeInit.java:604)\r\n  at com.android.internal.os.ZygoteInit.main (ZygoteInit.java:1067)\r\nCaused by java.lang.ClassCastException: android.os.BinderProxy cannot be cast to android.service.dreams.DreamService$DreamActivityCallback\r\n  at android.service.dreams.DreamActivity.onCreate (DreamActivity.java:63)\r\n  at android.app.Activity.performCreate (Activity.java:8591)\r\n  at android.app.Activity.performCreate (Activity.java:8570)\r\n  at android.app.Instrumentation.callActivityOnCreate (Instrumentation.java:1384)\r\n  at android.app.ActivityThread.performLaunchActivity (ActivityThread.java:4150)\r\n```\r\n\r\nIt appears to be only specific Samsung phones causing this, is there anything I can do to fix this, or is this a bug in Samsung code? Thanks\r\n\r\n\r\n  [1]: https://android-developers.googleblog.com/2012/12/daydream-interactive-screen-savers.html","title":"Android Dream/Screensaver crashing infrequently on some devices","body":"<p>I have a livewallpaper application that implements a DreamService following the guide <a href=\"https://android-developers.googleblog.com/2012/12/daydream-interactive-screen-savers.html\" rel=\"nofollow noreferrer\">here</a> and I am infrequently seeing crash reports come in with the following <code>ClassCastException</code> being thrown when it is launched:</p>\n<pre><code>Exception java.lang.RuntimeException:\n  at android.app.ActivityThread.performLaunchActivity (ActivityThread.java:4169)\n  at android.app.ActivityThread.handleLaunchActivity (ActivityThread.java:4325)\n  at android.app.servertransaction.LaunchActivityItem.execute (LaunchActivityItem.java:101)\n  at android.app.servertransaction.TransactionExecutor.executeCallbacks (TransactionExecutor.java:135)\n  at android.app.servertransaction.TransactionExecutor.execute (TransactionExecutor.java:95)\n  at android.app.ActivityThread$H.handleMessage (ActivityThread.java:2574)\n  at android.os.Handler.dispatchMessage (Handler.java:106)\n  at android.os.Looper.loopOnce (Looper.java:226)\n  at android.os.Looper.loop (Looper.java:313)\n  at android.app.ActivityThread.main (ActivityThread.java:8762)\n  at java.lang.reflect.Method.invoke\n  at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run (RuntimeInit.java:604)\n  at com.android.internal.os.ZygoteInit.main (ZygoteInit.java:1067)\nCaused by java.lang.ClassCastException: android.os.BinderProxy cannot be cast to android.service.dreams.DreamService$DreamActivityCallback\n  at android.service.dreams.DreamActivity.onCreate (DreamActivity.java:63)\n  at android.app.Activity.performCreate (Activity.java:8591)\n  at android.app.Activity.performCreate (Activity.java:8570)\n  at android.app.Instrumentation.callActivityOnCreate (Instrumentation.java:1384)\n  at android.app.ActivityThread.performLaunchActivity (ActivityThread.java:4150)\n</code></pre>\n<p>It appears to be only specific Samsung phones causing this, is there anything I can do to fix this, or is this a bug in Samsung code? Thanks</p>\n"},{"tags":["java","android","jar-signing","android-keystore"],"answers":[{"tags":[],"owner":{"account_id":289930,"reputation":3657,"user_id":591182,"accept_rate":68,"display_name":"AWT"},"down_vote_count":0,"up_vote_count":7,"is_accepted":true,"score":7,"last_activity_date":1398196066,"creation_date":1398196066,"answer_id":23228801,"question_id":23224091,"body_markdown":"Ok, after a bit of digging, here&#39;s what I found...\r\n\r\nWhen instrumenting a previously signed application, but using a new keystore to sign it, there is a problem.  Specifically, we end up with multiple signing manifests in \\meta-inf that all point to the same set of files.  The app fails to install with the error INSTALL_PARSE_FAILED_NO_CERTIFICATES.\r\n\r\nIf you look at the signing manifest, you see two files:\r\n\r\n![once-signed apk file][1]\r\n\r\nNow, we modify classes.dex and sign the app with our own keystore:\r\n\r\n    jarsigner -verbose -sigalg SHA1withRSA -digestalg SHA1 -keystore android_new_sample.keystore AndroidWorld-release-final.apk asample\r\n    Enter Passphrase for keystore: mypass\r\n     updating: META-INF/ASAMPLE.SF\r\n     updating: META-INF/ASAMPLE.RSA\r\n      signing: assets/x.js\r\n      signing: assets/xx.css\r\n      signing: assets/special_offers.html\r\n      signing: res/layout/displayjourneylist.xml\r\n      signing: res/layout/journey_row.xml\r\n      signing: res/layout/login.xml\r\n      signing: res/layout/searchjourney.xml\r\n      signing: res/layout/settings.xml\r\n      signing: res/layout/webview.xml\r\n      signing: res/layout/window_title.xml\r\n      signing: res/menu/option_menu.xml\r\n      signing: AndroidManifest.xml\r\n      signing: resources.arsc\r\n      signing: res/drawable-hdpi/header.png\r\n      signing: res/drawable-hdpi/ic_launcher.png\r\n      signing: res/drawable-ldpi/header.png\r\n      signing: res/drawable-ldpi/ic_launcher.png\r\n      signing: res/drawable-mdpi/header.png\r\n      signing: res/drawable-mdpi/ic_launcher.png\r\n      signing: classes.dex\r\n      signing: assets/xxx.properties\r\n\r\nNo problems so far, we have all of the new signatures added to the manifest.  However, attempting to verify the integrity of this apk now fails:\r\n\r\n    jarsigner.exe -verify -verbose -certs C:\\apk\\AndroidWorld-release-signed.apk\r\n    jarsigner: java.lang.SecurityException: invalid SHA1 signature file digest for classes.dex\r\n\r\nThe reason is that we now have duplicate signing information in \\meta-inf:\r\n\r\n![twice-signed apk file][2]\r\n\r\nSo classes.dex has 2 different signatures, one in Asample.sf, and one in Cert.sf:\r\n\r\n    Name: classes.dex (ASample.cf) \r\n    SHA1-Digest: mTf659/NTkTqqsAEZc3gTlbRpW8=\r\n\r\n    Name: classes.dex (Cert.sf)\r\n    SHA1-Digest: hkAsCEcLyM52Q6gq2uQIqc/7Gh8=\r\n\r\nThis causes verification and installation to fail.  If I delete Cert.rsa and Cert.sf from the archive, it will verify and install.  So the solution was to modify the zipfile and remove the original signing cert, leaving only my own.\r\n\r\n  [1]: http://i.stack.imgur.com/iNZ5B.png\r\n  [2]: http://i.stack.imgur.com/gYeiO.png","title":"INSTALL_PARSE_FAILED_NO_CERTIFICATES failure installing modified apk file (invalid SHA1 signature), even after signing with jarsigner","body":"<p>Ok, after a bit of digging, here's what I found...</p>\n\n<p>When instrumenting a previously signed application, but using a new keystore to sign it, there is a problem.  Specifically, we end up with multiple signing manifests in \\meta-inf that all point to the same set of files.  The app fails to install with the error INSTALL_PARSE_FAILED_NO_CERTIFICATES.</p>\n\n<p>If you look at the signing manifest, you see two files:</p>\n\n<p><img src=\"https://i.stack.imgur.com/iNZ5B.png\" alt=\"once-signed apk file\"></p>\n\n<p>Now, we modify classes.dex and sign the app with our own keystore:</p>\n\n<pre><code>jarsigner -verbose -sigalg SHA1withRSA -digestalg SHA1 -keystore android_new_sample.keystore AndroidWorld-release-final.apk asample\nEnter Passphrase for keystore: mypass\n updating: META-INF/ASAMPLE.SF\n updating: META-INF/ASAMPLE.RSA\n  signing: assets/x.js\n  signing: assets/xx.css\n  signing: assets/special_offers.html\n  signing: res/layout/displayjourneylist.xml\n  signing: res/layout/journey_row.xml\n  signing: res/layout/login.xml\n  signing: res/layout/searchjourney.xml\n  signing: res/layout/settings.xml\n  signing: res/layout/webview.xml\n  signing: res/layout/window_title.xml\n  signing: res/menu/option_menu.xml\n  signing: AndroidManifest.xml\n  signing: resources.arsc\n  signing: res/drawable-hdpi/header.png\n  signing: res/drawable-hdpi/ic_launcher.png\n  signing: res/drawable-ldpi/header.png\n  signing: res/drawable-ldpi/ic_launcher.png\n  signing: res/drawable-mdpi/header.png\n  signing: res/drawable-mdpi/ic_launcher.png\n  signing: classes.dex\n  signing: assets/xxx.properties\n</code></pre>\n\n<p>No problems so far, we have all of the new signatures added to the manifest.  However, attempting to verify the integrity of this apk now fails:</p>\n\n<pre><code>jarsigner.exe -verify -verbose -certs C:\\apk\\AndroidWorld-release-signed.apk\njarsigner: java.lang.SecurityException: invalid SHA1 signature file digest for classes.dex\n</code></pre>\n\n<p>The reason is that we now have duplicate signing information in \\meta-inf:</p>\n\n<p><img src=\"https://i.stack.imgur.com/gYeiO.png\" alt=\"twice-signed apk file\"></p>\n\n<p>So classes.dex has 2 different signatures, one in Asample.sf, and one in Cert.sf:</p>\n\n<pre><code>Name: classes.dex (ASample.cf) \nSHA1-Digest: mTf659/NTkTqqsAEZc3gTlbRpW8=\n\nName: classes.dex (Cert.sf)\nSHA1-Digest: hkAsCEcLyM52Q6gq2uQIqc/7Gh8=\n</code></pre>\n\n<p>This causes verification and installation to fail.  If I delete Cert.rsa and Cert.sf from the archive, it will verify and install.  So the solution was to modify the zipfile and remove the original signing cert, leaving only my own.</p>\n"},{"tags":[],"owner":{"account_id":7182083,"reputation":104,"user_id":5485600,"display_name":"Eilir"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1529451234,"creation_date":1529451234,"answer_id":50938260,"question_id":23224091,"body_markdown":"I have delete the file CERT.SF/CERT.RSA/MANIFEST.MF,and re-sign,and it goes well.","title":"INSTALL_PARSE_FAILED_NO_CERTIFICATES failure installing modified apk file (invalid SHA1 signature), even after signing with jarsigner","body":"<p>I have delete the file CERT.SF/CERT.RSA/MANIFEST.MF,and re-sign,and it goes well.</p>\n"},{"tags":[],"owner":{"account_id":128729,"reputation":4814,"user_id":326792,"accept_rate":85,"display_name":"Taha Jahangir"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698117778,"creation_date":1698117778,"answer_id":77349349,"question_id":23224091,"body_markdown":"On android 11+, use `apksigner` instead of `jarsigner` (use `apksigner` after `zipalign`).","title":"INSTALL_PARSE_FAILED_NO_CERTIFICATES failure installing modified apk file (invalid SHA1 signature), even after signing with jarsigner","body":"<p>On android 11+, use <code>apksigner</code> instead of <code>jarsigner</code> (use <code>apksigner</code> after <code>zipalign</code>).</p>\n"}],"owner":{"account_id":289930,"reputation":3657,"user_id":591182,"accept_rate":68,"display_name":"AWT"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5909,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":23228801,"answer_count":3,"score":5,"last_activity_date":1698117778,"creation_date":1398181262,"question_id":23224091,"body_markdown":"I know there are a lot of other people experiencing the INSTALL_PARSE_FAILED_NO_CERTIFICATES error when they forget to sign their apk.  This is not the problem I&#39;m describing.  I will detail what I&#39;m doing in several steps.\r\n\r\nI have a zipaligned, signed apk file (AndroidWorld.apk).  I can install this no problem.  So far, so good.\r\n\r\nNext, I decompile the apk with apktool.  Also, so far so good.\r\n\r\nAfter that, I use asmdex to modify the classes.dex file and inject some method logging.  At this point, if I were to repackage the apk and attempt to install, it would definitely fail, since the signature of classes.dex no longer matches what&#39;s in the signing manifest.  I realize that.  So I repackage the apk, zipalign it, and then sign it with my own keystore:\r\n\r\n    jarsigner -verbose -sigalg MD5withRSA -digestalg SHA1 -keystore &quot;android_new_sample.keystore&quot; -storepass mypass &quot;C:\\apk\\AndroidWorld-release.apk&quot; asample\r\n    Signing with keystore android_sample.keystore alias asample\r\n       adding: META-INF/MANIFEST.MF\r\n       adding: META-INF/ASAMPLE.SF\r\n       adding: META-INF/ASAMPLE.RSA\r\n      signing: assets/x.js\r\n      signing: assets/x.css\r\n      signing: assets/special_offers.html\r\n      signing: res/layout/displayjourneylist.xml\r\n      signing: res/layout/journey_row.xml\r\n      signing: res/layout/login.xml\r\n      signing: res/layout/searchjourney.xml\r\n      signing: res/layout/settings.xml\r\n      signing: res/layout/webview.xml\r\n      signing: res/layout/window_title.xml\r\n      signing: res/menu/option_menu.xml\r\n      signing: AndroidManifest.xml\r\n      signing: resources.arsc\r\n      signing: res/drawable-hdpi/header.png\r\n      signing: res/drawable-hdpi/ic_launcher.png\r\n      signing: res/drawable-ldpi/header.png\r\n      signing: res/drawable-ldpi/ic_launcher.png\r\n      signing: res/drawable-mdpi/header.png\r\n      signing: res/drawable-mdpi/ic_launcher.png\r\n      signing: classes.dex\r\n      signing: assets/x-runtime.properties\r\n            1 file(s) copied.\r\n\r\nNo complaints there, right?  It looks like classes.dex has been signed and it didn&#39;t complain.  But now, if I check the integrity of the signed apk with jarsigner -verify, it is not happy:\r\n\r\n    jarsigner.exe -verify -verbose -certs C:\\apk\\AndroidWorld-release-signed.apk\r\n    jarsigner: java.lang.SecurityException: invalid SHA1 signature file digest for classes.dex\r\n\r\nI have made sure to uninstall the existing app on the device, but attempting to install this apk still gives me the INSTALL_PARSE_FAILED_NO_CERTIFICATES message.  I have tried this with Java JDK 1.6 and 1.7, since I know there were some changes to jarsigner between those versions (http://developer.android.com/tools/publishing/app-signing.html).  As you can see, I am specifying the sigalg and digestalg flags when signing.\r\n\r\nAnother weird quirk - if I use a debug keystore, all of this works fine.","title":"INSTALL_PARSE_FAILED_NO_CERTIFICATES failure installing modified apk file (invalid SHA1 signature), even after signing with jarsigner","body":"<p>I know there are a lot of other people experiencing the INSTALL_PARSE_FAILED_NO_CERTIFICATES error when they forget to sign their apk.  This is not the problem I'm describing.  I will detail what I'm doing in several steps.</p>\n\n<p>I have a zipaligned, signed apk file (AndroidWorld.apk).  I can install this no problem.  So far, so good.</p>\n\n<p>Next, I decompile the apk with apktool.  Also, so far so good.</p>\n\n<p>After that, I use asmdex to modify the classes.dex file and inject some method logging.  At this point, if I were to repackage the apk and attempt to install, it would definitely fail, since the signature of classes.dex no longer matches what's in the signing manifest.  I realize that.  So I repackage the apk, zipalign it, and then sign it with my own keystore:</p>\n\n<pre><code>jarsigner -verbose -sigalg MD5withRSA -digestalg SHA1 -keystore \"android_new_sample.keystore\" -storepass mypass \"C:\\apk\\AndroidWorld-release.apk\" asample\nSigning with keystore android_sample.keystore alias asample\n   adding: META-INF/MANIFEST.MF\n   adding: META-INF/ASAMPLE.SF\n   adding: META-INF/ASAMPLE.RSA\n  signing: assets/x.js\n  signing: assets/x.css\n  signing: assets/special_offers.html\n  signing: res/layout/displayjourneylist.xml\n  signing: res/layout/journey_row.xml\n  signing: res/layout/login.xml\n  signing: res/layout/searchjourney.xml\n  signing: res/layout/settings.xml\n  signing: res/layout/webview.xml\n  signing: res/layout/window_title.xml\n  signing: res/menu/option_menu.xml\n  signing: AndroidManifest.xml\n  signing: resources.arsc\n  signing: res/drawable-hdpi/header.png\n  signing: res/drawable-hdpi/ic_launcher.png\n  signing: res/drawable-ldpi/header.png\n  signing: res/drawable-ldpi/ic_launcher.png\n  signing: res/drawable-mdpi/header.png\n  signing: res/drawable-mdpi/ic_launcher.png\n  signing: classes.dex\n  signing: assets/x-runtime.properties\n        1 file(s) copied.\n</code></pre>\n\n<p>No complaints there, right?  It looks like classes.dex has been signed and it didn't complain.  But now, if I check the integrity of the signed apk with jarsigner -verify, it is not happy:</p>\n\n<pre><code>jarsigner.exe -verify -verbose -certs C:\\apk\\AndroidWorld-release-signed.apk\njarsigner: java.lang.SecurityException: invalid SHA1 signature file digest for classes.dex\n</code></pre>\n\n<p>I have made sure to uninstall the existing app on the device, but attempting to install this apk still gives me the INSTALL_PARSE_FAILED_NO_CERTIFICATES message.  I have tried this with Java JDK 1.6 and 1.7, since I know there were some changes to jarsigner between those versions (<a href=\"http://developer.android.com/tools/publishing/app-signing.html\" rel=\"noreferrer\">http://developer.android.com/tools/publishing/app-signing.html</a>).  As you can see, I am specifying the sigalg and digestalg flags when signing.</p>\n\n<p>Another weird quirk - if I use a debug keystore, all of this works fine.</p>\n"},{"tags":["java","rest","aws-lambda","amazon-lex"],"comments":[{"owner":{"account_id":6201789,"reputation":1940,"user_id":4831297,"display_name":"s.hesse"},"score":1,"creation_date":1518968211,"post_id":48849608,"comment_id":84710189,"body_markdown":"Did you change the URL before uploading it to Lambda? Because it points to localhost in your example.. If you have a local API running, you have to make it public (e.g. by using again Lambda or another service, e.g. EC2).","body":"Did you change the URL before uploading it to Lambda? Because it points to localhost in your example.. If you have a local API running, you have to make it public (e.g. by using again Lambda or another service, e.g. EC2)."},{"owner":{"account_id":8340404,"reputation":1477,"user_id":6265883,"display_name":"J. Parashar"},"score":0,"creation_date":1519020649,"post_id":48849608,"comment_id":84723904,"body_markdown":"@ s.hesse You are right, but that might not be the case here, as it has been handled. @Kanika logs might be helpful, if you can share.","body":"@ s.hesse You are right, but that might not be the case here, as it has been handled. @Kanika logs might be helpful, if you can share."},{"owner":{"account_id":12798232,"reputation":191,"user_id":9260382,"display_name":"Kanika Agarwal"},"score":0,"creation_date":1519026459,"post_id":48849608,"comment_id":84725990,"body_markdown":"@ s.hesse  i hosted my api on EC2 and it worked with lex. Thanks a lot :) . One more thing, the computation time is very high(58 sec) for a single call. Is there any other way (except increasing computation resources) to make this more efficient","body":"@ s.hesse  i hosted my api on EC2 and it worked with lex. Thanks a lot :) . One more thing, the computation time is very high(58 sec) for a single call. Is there any other way (except increasing computation resources) to make this more efficient"},{"owner":{"account_id":1827029,"reputation":781,"user_id":1659442,"accept_rate":17,"display_name":"Rahul Singh"},"score":0,"creation_date":1563338057,"post_id":48849608,"comment_id":100661217,"body_markdown":"@kanika did you find, why it is taking so much time and your fix was just to change the hostname is it?","body":"@kanika did you find, why it is taking so much time and your fix was just to change the hostname is it?"},{"owner":{"account_id":13540458,"reputation":4811,"user_id":9768291,"display_name":"payne"},"score":0,"creation_date":1581351159,"post_id":48849608,"comment_id":106394378,"body_markdown":"@KanikaAgarwal maybe the warmup time is included?","body":"@KanikaAgarwal maybe the warmup time is included?"},{"owner":{"account_id":442995,"reputation":5799,"user_id":833960,"accept_rate":69,"display_name":"MattG"},"score":0,"creation_date":1599611811,"post_id":48849608,"comment_id":112824668,"body_markdown":"@KanikaAgarwal was this ever resolved, if so, can you put your answer in","body":"@KanikaAgarwal was this ever resolved, if so, can you put your answer in"}],"answers":[{"tags":[],"owner":{"account_id":12975674,"reputation":71,"user_id":9379778,"display_name":"Charith Prasanna"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1632927428,"creation_date":1632927428,"answer_id":69378817,"question_id":48849608,"body_markdown":"use ngrok and generate a http url for application running port.","title":"Calling external Rest API from a Lambda function in java","body":"<p>use ngrok and generate a http url for application running port.</p>\n"}],"owner":{"account_id":12798232,"reputation":191,"user_id":9260382,"display_name":"Kanika Agarwal"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":11160,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1698116961,"creation_date":1518940711,"question_id":48849608,"body_markdown":"I am trying to write a lambda function that takes information from lex input, and calls a rest api, passing that information as a parameter, returns a string, which i then want to send to lex as a response. It works as expected when run in eclipse, but when i upload the jar to amazon lambda, it is giving no error, but the output string is null.\r\n\r\n    public class LambdaFunctionHandler implements RequestHandler&lt;Map&lt;String,Object&gt;, Object&gt; {\r\n\r\n\r\n    @Override\r\n    public Object handleRequest(Map&lt;String,Object&gt; input, Context context) {\r\n\r\n    \tValidationHook.LexRequest lexRequest= LexRequestFactory.createLexRequest(input);\r\n    \tString orgbotcommand = lexRequest.getCommand()+&quot;%20&quot;+lexRequest.getType()+&quot;%20&quot;+lexRequest.getNew_variable();\r\n    \tlexRequest.setOrgbotcommand(orgbotcommand);\r\n    \t\r\n    \ttry {\r\n\t\t  \tURL url = new URL(&quot;http://localhost:8080/mindtuit/execute?command=&quot;+orgbotcommand);\r\n\t\t\tHttpURLConnection conn = (HttpURLConnection) url.openConnection();\r\n\t\t\tconn.setRequestMethod(&quot;GET&quot;);\r\n\t\t\tconn.setRequestProperty(&quot;Accept&quot;, &quot;application/json&quot;);\r\n\r\n\t\t\tif (conn.getResponseCode() != 200) {\r\n\t\t\t\tthrow new RuntimeException(&quot;Failed : HTTP error code : &quot;\r\n\t\t\t\t\t\t+ conn.getResponseCode());\r\n\t\t\t}\r\n\r\n\t\t\tBufferedReader br = new BufferedReader(new InputStreamReader(\r\n\t\t\t\t(conn.getInputStream())));\r\n\r\n\t\t\tString output;\r\n\t\t\tSystem.out.println(&quot;Output from Server .... \\n&quot;);\r\n\t\t\twhile ((output = br.readLine()) != null) {\r\n\t\t\t\tSystem.out.println(output);\r\n\t\t\t\tlexRequest.setResponse(output);\r\n\r\n\t\t\t}\r\n\t\t\tSystem.out.println(lexRequest.getResponse());\r\n\r\n\t\t\tconn.disconnect();\r\n\r\n\t\t  } catch (MalformedURLException e) {\r\n\r\n\t\t\te.printStackTrace();\r\n\r\n\t\t  } catch (IOException e) {\r\n\r\n\t\t\te.printStackTrace();\r\n\r\n\t\t  }\r\n\r\n\t\t\r\n\r\n    \tString content = String.format(&quot;command recieved by %s is %s,response is %s &quot;,lexRequest.getBotName(),lexRequest.getOrgbotcommand(),lexRequest.getResponse());\r\n\t\t\t\t\r\n    \tMessage message = new Message(&quot;PlainText&quot;,content);\r\n    \tDialogAction dialogAction = new DialogAction(&quot;Close&quot;, &quot;Fulfilled&quot;, message );\r\n    \tSystem.out.println(dialogAction);\r\n    \t\r\n        return new LexRespond(dialogAction);\r\n    }\r\n\r\n}\r\n\r\n","title":"Calling external Rest API from a Lambda function in java","body":"<p>I am trying to write a lambda function that takes information from lex input, and calls a rest api, passing that information as a parameter, returns a string, which i then want to send to lex as a response. It works as expected when run in eclipse, but when i upload the jar to amazon lambda, it is giving no error, but the output string is null.</p>\n\n<pre><code>public class LambdaFunctionHandler implements RequestHandler&lt;Map&lt;String,Object&gt;, Object&gt; {\n\n\n@Override\npublic Object handleRequest(Map&lt;String,Object&gt; input, Context context) {\n\n    ValidationHook.LexRequest lexRequest= LexRequestFactory.createLexRequest(input);\n    String orgbotcommand = lexRequest.getCommand()+\"%20\"+lexRequest.getType()+\"%20\"+lexRequest.getNew_variable();\n    lexRequest.setOrgbotcommand(orgbotcommand);\n\n    try {\n        URL url = new URL(\"http://localhost:8080/mindtuit/execute?command=\"+orgbotcommand);\n        HttpURLConnection conn = (HttpURLConnection) url.openConnection();\n        conn.setRequestMethod(\"GET\");\n        conn.setRequestProperty(\"Accept\", \"application/json\");\n\n        if (conn.getResponseCode() != 200) {\n            throw new RuntimeException(\"Failed : HTTP error code : \"\n                    + conn.getResponseCode());\n        }\n\n        BufferedReader br = new BufferedReader(new InputStreamReader(\n            (conn.getInputStream())));\n\n        String output;\n        System.out.println(\"Output from Server .... \\n\");\n        while ((output = br.readLine()) != null) {\n            System.out.println(output);\n            lexRequest.setResponse(output);\n\n        }\n        System.out.println(lexRequest.getResponse());\n\n        conn.disconnect();\n\n      } catch (MalformedURLException e) {\n\n        e.printStackTrace();\n\n      } catch (IOException e) {\n\n        e.printStackTrace();\n\n      }\n\n\n\n    String content = String.format(\"command recieved by %s is %s,response is %s \",lexRequest.getBotName(),lexRequest.getOrgbotcommand(),lexRequest.getResponse());\n\n    Message message = new Message(\"PlainText\",content);\n    DialogAction dialogAction = new DialogAction(\"Close\", \"Fulfilled\", message );\n    System.out.println(dialogAction);\n\n    return new LexRespond(dialogAction);\n}\n</code></pre>\n\n<p>}</p>\n"},{"tags":["java","math","biginteger","square-root"],"comments":[{"owner":{"account_id":4119005,"reputation":85,"user_id":3379886,"accept_rate":50,"display_name":"hoyah_hayoh"},"score":0,"creation_date":1434401528,"post_id":30854722,"comment_id":49752917,"body_markdown":"This might help: http://www.java-examples.com/find-square-root-biginteger-example","body":"This might help: <a href=\"http://www.java-examples.com/find-square-root-biginteger-example\" rel=\"nofollow noreferrer\">java-examples.com/find-square-root-biginteger-example</a>"},{"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":2,"creation_date":1434401576,"post_id":30854722,"comment_id":49752942,"body_markdown":"Relevant: Guava&#39;s [`BigIntegerMath.sqrt`](http://google.github.io/guava/releases/18.0/api/docs/com/google/common/math/BigIntegerMath.html#sqrt(java.math.BigInteger,%20java.math.RoundingMode))","body":"Relevant: Guava&#39;s <a href=\"http://google.github.io/guava/releases/18.0/api/docs/com/google/common/math/BigIntegerMath.html#sqrt(java.math.BigInteger,%20java.math.RoundingMode)\" rel=\"nofollow noreferrer\"><code>BigIntegerMath.sqrt</code></a>"},{"owner":{"account_id":1888343,"reputation":176597,"user_id":1707091,"display_name":"rgettman"},"score":0,"creation_date":1434401618,"post_id":30854722,"comment_id":49752968,"body_markdown":"Are you attempting to find the `n`th root because you need that value, or do you just need to know if it&#39;s a perfect power?","body":"Are you attempting to find the <code>n</code>th root because you need that value, or do you just need to know if it&#39;s a perfect power?"},{"owner":{"account_id":4119005,"reputation":85,"user_id":3379886,"accept_rate":50,"display_name":"hoyah_hayoh"},"score":0,"creation_date":1434401661,"post_id":30854722,"comment_id":49752985,"body_markdown":"There is a similar question: http://stackoverflow.com/questions/4407839/how-can-i-find-the-square-root-of-a-java-biginteger","body":"There is a similar question: <a href=\"http://stackoverflow.com/questions/4407839/how-can-i-find-the-square-root-of-a-java-biginteger\" title=\"how can i find the square root of a java biginteger\">stackoverflow.com/questions/4407839/&hellip;</a>"},{"owner":{"account_id":6179231,"reputation":2698,"user_id":4815264,"accept_rate":87,"display_name":"James McDowell"},"score":0,"creation_date":1434401692,"post_id":30854722,"comment_id":49753000,"body_markdown":"Thanks Louis. Just what I needed for the sqrt part. I also need to determine if it is a cube too.","body":"Thanks Louis. Just what I needed for the sqrt part. I also need to determine if it is a cube too."},{"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":0,"creation_date":1434401979,"post_id":30854722,"comment_id":49753127,"body_markdown":"http://www.hackersdelight.org/hdcodetxt/icbrt.c.txt has algorithms for the integer cube root.  I&#39;d just translate those to `BigInteger`.","body":"<a href=\"http://www.hackersdelight.org/hdcodetxt/icbrt.c.txt\" rel=\"nofollow noreferrer\">hackersdelight.org/hdcodetxt/icbrt.c.txt</a> has algorithms for the integer cube root.  I&#39;d just translate those to <code>BigInteger</code>."},{"owner":{"account_id":6025982,"reputation":4032,"user_id":4731679,"display_name":"Edward Doolittle"},"score":1,"creation_date":1434402429,"post_id":30854722,"comment_id":49753354,"body_markdown":"Newton&#39;s method for nth roots is here: https://en.wikipedia.org/wiki/Nth_root_algorithm","body":"Newton&#39;s method for nth roots is here: <a href=\"https://en.wikipedia.org/wiki/Nth_root_algorithm\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Nth_root_algorithm</a>"}],"answers":[{"tags":[],"owner":{"account_id":6179231,"reputation":2698,"user_id":4815264,"accept_rate":87,"display_name":"James McDowell"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1434406582,"creation_date":1434406582,"answer_id":30855888,"question_id":30854722,"body_markdown":"I solved the problem with this function I got from Newton&#39;s formula\r\n\r\n    public boolean perfectPower(BigDecimal a, double n){\r\n        BigDecimal[] x = new BigDecimal[40];\r\n        x[0] = BigDecimal.ONE;\r\n        int digits = a.toString().length();\r\n        System.out.println(digits);\r\n        int roundTo = digits + 1;\r\n        for(int k = 1; k &lt; 40; k++){\r\n            x[k] = (x[k - 1]\r\n                    .multiply(BigDecimal.valueOf((int)n - 1))\r\n                    .add(a\r\n                            .divide(x[k - 1]\r\n                            .pow((int)n - 1), new MathContext(roundTo, RoundingMode.HALF_EVEN))))\r\n                    .multiply(BigDecimal.valueOf(1/n));\r\n        }\r\n        String str = x[39].toString();\r\n        return str.substring(str.indexOf(&quot;.&quot;) + 1, str.indexOf(&quot;.&quot;) + 6).equals(&quot;00000&quot;);\r\n    }","title":"Nth root of BigInteger","body":"<p>I solved the problem with this function I got from Newton's formula</p>\n\n<pre><code>public boolean perfectPower(BigDecimal a, double n){\n    BigDecimal[] x = new BigDecimal[40];\n    x[0] = BigDecimal.ONE;\n    int digits = a.toString().length();\n    System.out.println(digits);\n    int roundTo = digits + 1;\n    for(int k = 1; k &lt; 40; k++){\n        x[k] = (x[k - 1]\n                .multiply(BigDecimal.valueOf((int)n - 1))\n                .add(a\n                        .divide(x[k - 1]\n                        .pow((int)n - 1), new MathContext(roundTo, RoundingMode.HALF_EVEN))))\n                .multiply(BigDecimal.valueOf(1/n));\n    }\n    String str = x[39].toString();\n    return str.substring(str.indexOf(\".\") + 1, str.indexOf(\".\") + 6).equals(\"00000\");\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":466379,"reputation":17103,"user_id":871096,"accept_rate":52,"display_name":"Robert Dodier"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1434421637,"creation_date":1434421637,"answer_id":30857861,"question_id":30854722,"body_markdown":"Factor the number and look at how many distinct factors there are. If there are is only one, it is a perfect n&#39;th power, where n is the multiplicity of the factor. There may be more efficient methods but this is guaranteed to work.","title":"Nth root of BigInteger","body":"<p>Factor the number and look at how many distinct factors there are. If there are is only one, it is a perfect n'th power, where n is the multiplicity of the factor. There may be more efficient methods but this is guaranteed to work.</p>\n"},{"tags":[],"owner":{"account_id":2968584,"reputation":50561,"user_id":2521214,"accept_rate":71,"display_name":"Spektre"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1621319281,"creation_date":1434455616,"answer_id":30866812,"question_id":30854722,"body_markdown":"For starters you can use **binary search** it is easy to implement let:\r\n\r\n- `x` be your bigint\r\n- `n` the n-th power you want to check\r\n\r\nso you want to check if there is `y` such that `y^n=x` and for starters assume `x&gt;=0` The algorithm is like this:\r\n\r\n1. **first compute `y` limit `ymax`**\r\n\r\n   I would use `2^(log2(x)/n)` which is the number with `(bits used for x)/n` so `ymax^n` has the same amount of bits as `x`. So first count the bits of `x` and then divide it by `n`\r\n\r\n       for (ymax=1,i=1;i&lt;=x;i&lt;&lt;=1) ymax++; ymax=(ymax/n);\r\n\r\n   now `ymax` is the number of bits the `y` need to be tested up to\r\n\r\n2. **bin search**\r\n\r\n        for(m=1&lt;&lt;ymax,y=0;m;m&gt;&gt;=1)\r\n         {\r\n         y|=m;\r\n         if (integer_pow(y,n)&gt;x) y^=m;\r\n         }\r\n        return (integer_pow(y,n)==x);\r\n\r\n   the `integer_pow(y,n)` can be done by binary powering or with single for loop for small `n`\r\n\r\n3. **add handling the sign**\r\n\r\n   if `(x&lt;0)` then `n` must be odd obviously and `y&lt;0` so if not return false else negate `x` and also the final `y` result.\r\n\r\n**[edit1] Here some simple C++ example:**\r\n\r\n&lt;!-- language: cpp --&gt;\r\n\r\n    bool is_root(DWORD &amp;y,DWORD x,DWORD n) // y=x^(1/n) return true if perfect nth root\r\n    \t{\r\n    \tDWORD i,p,m; y=x;\r\n    \tif (n==0) { y=0; return (x==0); }\r\n    \tif (n==1) { y=x; return (x!=0); }\r\n    \tfor (i=1,m=1;m&lt;x;i++,m&lt;&lt;=1); m=1&lt;&lt;(i/n); // compute the y limit\r\n    \tfor (y=0;m;m&gt;&gt;=1) // bin search through y\r\n    \t\t{\r\n    \t\ty|=m;\r\n    \t\tfor (p=y,i=1;i&lt;n;i++) p*=y; // p=y^n\r\n    \t\tif (p&gt;x) y^=m; // this is xor not power!!!\r\n    \t\t}\r\n    \tfor (p=y,i=1;i&lt;n;i++) p*=y; // p=y^n\r\n    \treturn (p==x);\r\n    \t}\r\n\r\nso just convert the `DWORD` to your bigint datatype as you can see you need only basic arithmetic and bit operations like `+,&lt;,==,&lt;&lt;,&gt;&gt;,|,^` (the last is XOR not power)\r\n\r\nThere are also other possibilities to do this for some inspiration check this (and all sublinks in there):\r\n\r\n- [Power by squaring for negative exponents](https://stackoverflow.com/a/30962495/2521214)\r\n\r\nSo for example you can get even rid of the `*` operations (like I did in the 16T sqrt sublink presented in one of the sublinks (title: ... one cycle only)) Which is a huge speed up on bigints. \r\n","title":"Nth root of BigInteger","body":"<p>For starters you can use <strong>binary search</strong> it is easy to implement let:</p>\n<ul>\n<li><code>x</code> be your bigint</li>\n<li><code>n</code> the n-th power you want to check</li>\n</ul>\n<p>so you want to check if there is <code>y</code> such that <code>y^n=x</code> and for starters assume <code>x&gt;=0</code> The algorithm is like this:</p>\n<ol>\n<li><p><strong>first compute <code>y</code> limit <code>ymax</code></strong></p>\n<p>I would use <code>2^(log2(x)/n)</code> which is the number with <code>(bits used for x)/n</code> so <code>ymax^n</code> has the same amount of bits as <code>x</code>. So first count the bits of <code>x</code> and then divide it by <code>n</code></p>\n<pre><code>for (ymax=1,i=1;i&lt;=x;i&lt;&lt;=1) ymax++; ymax=(ymax/n);\n</code></pre>\n<p>now <code>ymax</code> is the number of bits the <code>y</code> need to be tested up to</p>\n</li>\n<li><p><strong>bin search</strong></p>\n<pre><code> for(m=1&lt;&lt;ymax,y=0;m;m&gt;&gt;=1)\n  {\n  y|=m;\n  if (integer_pow(y,n)&gt;x) y^=m;\n  }\n return (integer_pow(y,n)==x);\n</code></pre>\n<p>the <code>integer_pow(y,n)</code> can be done by binary powering or with single for loop for small <code>n</code></p>\n</li>\n<li><p><strong>add handling the sign</strong></p>\n<p>if <code>(x&lt;0)</code> then <code>n</code> must be odd obviously and <code>y&lt;0</code> so if not return false else negate <code>x</code> and also the final <code>y</code> result.</p>\n</li>\n</ol>\n<p><strong>[edit1] Here some simple C++ example:</strong></p>\n<pre class=\"lang-cpp prettyprint-override\"><code>bool is_root(DWORD &amp;y,DWORD x,DWORD n) // y=x^(1/n) return true if perfect nth root\n    {\n    DWORD i,p,m; y=x;\n    if (n==0) { y=0; return (x==0); }\n    if (n==1) { y=x; return (x!=0); }\n    for (i=1,m=1;m&lt;x;i++,m&lt;&lt;=1); m=1&lt;&lt;(i/n); // compute the y limit\n    for (y=0;m;m&gt;&gt;=1) // bin search through y\n        {\n        y|=m;\n        for (p=y,i=1;i&lt;n;i++) p*=y; // p=y^n\n        if (p&gt;x) y^=m; // this is xor not power!!!\n        }\n    for (p=y,i=1;i&lt;n;i++) p*=y; // p=y^n\n    return (p==x);\n    }\n</code></pre>\n<p>so just convert the <code>DWORD</code> to your bigint datatype as you can see you need only basic arithmetic and bit operations like <code>+,&lt;,==,&lt;&lt;,&gt;&gt;,|,^</code> (the last is XOR not power)</p>\n<p>There are also other possibilities to do this for some inspiration check this (and all sublinks in there):</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/a/30962495/2521214\">Power by squaring for negative exponents</a></li>\n</ul>\n<p>So for example you can get even rid of the <code>*</code> operations (like I did in the 16T sqrt sublink presented in one of the sublinks (title: ... one cycle only)) Which is a huge speed up on bigints.</p>\n"},{"tags":[],"owner":{"account_id":202016,"reputation":17471,"user_id":448810,"accept_rate":100,"display_name":"user448810"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1434461416,"creation_date":1434461416,"answer_id":30869049,"question_id":30854722,"body_markdown":"Newton&#39;s method works perfectly well with integers; here we compute the largest number &lt;em&gt;s&lt;/em&gt; for which &lt;em&gt;s&lt;sup&gt;&lt;small&gt;k&lt;/small&gt;&lt;/sup&gt;&lt;/em&gt; does not exceed &lt;em&gt;n&lt;/em&gt;, assuming both &lt;em&gt;k&lt;/em&gt; and &lt;em&gt;n&lt;/em&gt; are positive:\r\n\r\n    function iroot(k, n)\r\n        k1 := k - 1\r\n        s := n + 1\r\n        u := n\r\n        while u &lt; s\r\n            s := u\r\n            u := ((u * k1) + n // (u ** k1)) // k\r\n        return s\r\n\r\nFor instance, `iroot(4, 624)` returns 4 and `iroot(4, 625)` returns 5. Then you can perform the exponentiation and check the result:\r\n\r\n    function perfectPower(k, n)\r\n        return (k ** iroot(k, n)) == n\r\n\r\nFor instance, `perfectPower(2, 625)` and `perfectPower(4, 625)` are both true, but `perfectPower(3, 625)` is false.\r\n\r\nI&#39;ll leave it to you to translate to Java BigInteger.","title":"Nth root of BigInteger","body":"<p>Newton's method works perfectly well with integers; here we compute the largest number <em>s</em> for which <em>s<sup>k</sup></em> does not exceed <em>n</em>, assuming both <em>k</em> and <em>n</em> are positive:</p>\n\n<pre><code>function iroot(k, n)\n    k1 := k - 1\n    s := n + 1\n    u := n\n    while u &lt; s\n        s := u\n        u := ((u * k1) + n // (u ** k1)) // k\n    return s\n</code></pre>\n\n<p>For instance, <code>iroot(4, 624)</code> returns 4 and <code>iroot(4, 625)</code> returns 5. Then you can perform the exponentiation and check the result:</p>\n\n<pre><code>function perfectPower(k, n)\n    return (k ** iroot(k, n)) == n\n</code></pre>\n\n<p>For instance, <code>perfectPower(2, 625)</code> and <code>perfectPower(4, 625)</code> are both true, but <code>perfectPower(3, 625)</code> is false.</p>\n\n<p>I'll leave it to you to translate to Java BigInteger.</p>\n"},{"tags":[],"owner":{"account_id":11769813,"reputation":9,"user_id":8613175,"display_name":"Anthony Overmars"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1656501539,"creation_date":1656501331,"answer_id":72800466,"question_id":30854722,"body_markdown":"Here&#39;s a BigInteger version for the Kth Root of N.\r\nI have also included a power function.\r\n\r\n    //\t\tInput the N, Kth root. Returns N ^ 1/K\r\n\r\n        public static BigInteger Ith_Root(BigInteger N, BigInteger K) {\r\n\r\n            BigInteger K1 = K.subtract(BigInteger.ONE);\r\n            BigInteger S  = N.add(BigInteger.ONE);\r\n            BigInteger U  = N;\r\n            while (U.compareTo(S)==-1) {\r\n                S = U;\r\n                U = (U.multiply(K1).add(N.divide(pow(U,K1)))).divide(K);\r\n            }\r\n            String str=&quot;&quot;+N+&quot;^1/&quot;+K+&quot;=&quot;+S;System.out.println(str);\r\n           return S;   \r\n        } \r\n        \r\n\tpublic static BigInteger pow(BigInteger base, BigInteger exponent) {\r\n\t\t  BigInteger result = BigInteger.ONE;\r\n\t\t  while (exponent.signum() &gt; 0) {\r\n\t\t    if (exponent.testBit(0)) result = result.multiply(base);\r\n\t\t    base = base.multiply(base);\r\n\t\t    exponent = exponent.shiftRight(1);\r\n\t\t  }\r\n\t\t  return result;\r\n\t\t}\r\n","title":"Nth root of BigInteger","body":"<p>Here's a BigInteger version for the Kth Root of N.\nI have also included a power function.</p>\n<pre><code>//      Input the N, Kth root. Returns N ^ 1/K\n\n    public static BigInteger Ith_Root(BigInteger N, BigInteger K) {\n\n        BigInteger K1 = K.subtract(BigInteger.ONE);\n        BigInteger S  = N.add(BigInteger.ONE);\n        BigInteger U  = N;\n        while (U.compareTo(S)==-1) {\n            S = U;\n            U = (U.multiply(K1).add(N.divide(pow(U,K1)))).divide(K);\n        }\n        String str=&quot;&quot;+N+&quot;^1/&quot;+K+&quot;=&quot;+S;System.out.println(str);\n       return S;   \n    } \n    \npublic static BigInteger pow(BigInteger base, BigInteger exponent) {\n      BigInteger result = BigInteger.ONE;\n      while (exponent.signum() &gt; 0) {\n        if (exponent.testBit(0)) result = result.multiply(base);\n        base = base.multiply(base);\n        exponent = exponent.shiftRight(1);\n      }\n      return result;\n    }\n</code></pre>\n"}],"owner":{"account_id":6179231,"reputation":2698,"user_id":4815264,"accept_rate":87,"display_name":"James McDowell"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5422,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"accepted_answer_id":30869049,"answer_count":5,"score":7,"last_activity_date":1698115947,"creation_date":1434401305,"question_id":30854722,"body_markdown":"I&#39;m using a BigInteger object. With normal ints or longs, I can use Math.pow(number, 1/nth root) to get the nth root. However, this will not work with a BigInteger. Is there a way I can do this? \r\n\r\nI do not actually need the root, just to know if it is a perfect power.\r\nI&#39;m using this to figure out if the given BigInteger is a perfect square/cube/etc.","title":"Nth root of BigInteger","body":"<p>I'm using a BigInteger object. With normal ints or longs, I can use Math.pow(number, 1/nth root) to get the nth root. However, this will not work with a BigInteger. Is there a way I can do this? </p>\n\n<p>I do not actually need the root, just to know if it is a perfect power.\nI'm using this to figure out if the given BigInteger is a perfect square/cube/etc.</p>\n"},{"tags":["javascript","java","maven","gwt","maven-plugin"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1697840389,"post_id":77333555,"comment_id":136334824,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"answers":[{"tags":[],"owner":{"account_id":2168226,"reputation":1449,"user_id":1920835,"display_name":"Robert Newton"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1698114202,"creation_date":1698114202,"answer_id":77349178,"question_id":77333555,"body_markdown":"In your pom.xml, you add a &lt;code&gt;&amp;lt;configuration&amp;gt;&lt;/code&gt; node.  For example:\r\n\r\n\r\n        &lt;plugin&gt;\r\n          &lt;groupId&gt;net.ltgt.gwt.maven&lt;/groupId&gt;\r\n          &lt;artifactId&gt;gwt-maven-plugin&lt;/artifactId&gt;\r\n          &lt;version&gt;1.0.0&lt;/version&gt;\r\n          &lt;extensions&gt;true&lt;/extensions&gt;\r\n          &lt;configuration&gt;\r\n            &lt;sourceLevel&gt;${maven.compiler.release}&lt;/sourceLevel&gt;\r\n            &lt;moduleName&gt;${gwtModule}&lt;/moduleName&gt;\r\n            &lt;failOnError&gt;true&lt;/failOnError&gt;\r\n            &lt;logLevel&gt;${gwt.logLevel}&lt;/logLevel&gt;\r\n            &lt;style&gt;${gwt.style}&lt;/style&gt;\r\n            &lt;draftCompile&gt;${gwt.draftCompile}&lt;/draftCompile&gt;\r\n            &lt;localWorkers&gt;${gwt.localWorkers}&lt;/localWorkers&gt;\r\n            &lt;startupUrls&gt;${gwtRunTargetUrl}&lt;/startupUrls&gt;\r\n            &lt;codeserverArgs&gt;\r\n              &lt;arg&gt;-bindAddress&lt;/arg&gt; &lt;arg&gt;0.0.0.0&lt;/arg&gt;\r\n            &lt;/codeserverArgs&gt;\r\n            &lt;devmodeArgs&gt;\r\n              &lt;devmodeArg&gt; -bindAddress 0.0.0.0 &lt;/devmodeArg&gt;\r\n            &lt;/devmodeArgs&gt;\r\n            &lt;jvmArgs&gt;\r\n              &lt;jvmArg&gt; -Xss4M &lt;/jvmArg&gt;\r\n              &lt;jvmArg&gt; -Dorg.eclipse.jetty.LEVEL=INFO &lt;/jvmArg&gt;\r\n              &lt;jvmArg&gt; -Dorg.eclipse.jetty.util.log.class=org.eclipse.jetty.util.log.StdErrLog \r\n            &lt;/jvmArgs&gt;\r\n          &lt;/configuration&gt;\r\n        &lt;/plugin&gt;\r\n\r\nIn my example, some configuration values have been defined earlier in the properties section of the pom.xml.  E.g.\r\n\r\n    &lt;properties&gt;\r\n      &lt;gwtRunTargetUrl&gt;app.html&lt;/gwtRunTargetUrl&gt;\r\n      &lt;gwtModuleName&gt;foo.WebFormApp&lt;/gwtModuleName&gt;\r\n      &lt;gwtModuleShortName&gt;WebFormApp&lt;/gwtModuleShortName&gt;\r\n      &lt;gwt.localWorkers&gt;2&lt;/gwt.localWorkers&gt;\r\n      &lt;gwt.draftCompile&gt;false&lt;/gwt.draftCompile&gt;\r\n      &lt;gwt.style&gt;OBFUSCATED&lt;/gwt.style&gt;  &lt;!-- OBFUSCATED/PRETTY/DETAILED --&gt;\r\n      &lt;gwt.logLevel&gt;INFO&lt;/gwt.logLevel&gt;\r\n    &lt;/properties&gt;\r\n","title":"New GWT Maven plugin how pass parameters to compiler?","body":"<p>In your pom.xml, you add a <code>&lt;configuration&gt;</code> node.  For example:</p>\n<pre><code>    &lt;plugin&gt;\n      &lt;groupId&gt;net.ltgt.gwt.maven&lt;/groupId&gt;\n      &lt;artifactId&gt;gwt-maven-plugin&lt;/artifactId&gt;\n      &lt;version&gt;1.0.0&lt;/version&gt;\n      &lt;extensions&gt;true&lt;/extensions&gt;\n      &lt;configuration&gt;\n        &lt;sourceLevel&gt;${maven.compiler.release}&lt;/sourceLevel&gt;\n        &lt;moduleName&gt;${gwtModule}&lt;/moduleName&gt;\n        &lt;failOnError&gt;true&lt;/failOnError&gt;\n        &lt;logLevel&gt;${gwt.logLevel}&lt;/logLevel&gt;\n        &lt;style&gt;${gwt.style}&lt;/style&gt;\n        &lt;draftCompile&gt;${gwt.draftCompile}&lt;/draftCompile&gt;\n        &lt;localWorkers&gt;${gwt.localWorkers}&lt;/localWorkers&gt;\n        &lt;startupUrls&gt;${gwtRunTargetUrl}&lt;/startupUrls&gt;\n        &lt;codeserverArgs&gt;\n          &lt;arg&gt;-bindAddress&lt;/arg&gt; &lt;arg&gt;0.0.0.0&lt;/arg&gt;\n        &lt;/codeserverArgs&gt;\n        &lt;devmodeArgs&gt;\n          &lt;devmodeArg&gt; -bindAddress 0.0.0.0 &lt;/devmodeArg&gt;\n        &lt;/devmodeArgs&gt;\n        &lt;jvmArgs&gt;\n          &lt;jvmArg&gt; -Xss4M &lt;/jvmArg&gt;\n          &lt;jvmArg&gt; -Dorg.eclipse.jetty.LEVEL=INFO &lt;/jvmArg&gt;\n          &lt;jvmArg&gt; -Dorg.eclipse.jetty.util.log.class=org.eclipse.jetty.util.log.StdErrLog \n        &lt;/jvmArgs&gt;\n      &lt;/configuration&gt;\n    &lt;/plugin&gt;\n</code></pre>\n<p>In my example, some configuration values have been defined earlier in the properties section of the pom.xml.  E.g.</p>\n<pre><code>&lt;properties&gt;\n  &lt;gwtRunTargetUrl&gt;app.html&lt;/gwtRunTargetUrl&gt;\n  &lt;gwtModuleName&gt;foo.WebFormApp&lt;/gwtModuleName&gt;\n  &lt;gwtModuleShortName&gt;WebFormApp&lt;/gwtModuleShortName&gt;\n  &lt;gwt.localWorkers&gt;2&lt;/gwt.localWorkers&gt;\n  &lt;gwt.draftCompile&gt;false&lt;/gwt.draftCompile&gt;\n  &lt;gwt.style&gt;OBFUSCATED&lt;/gwt.style&gt;  &lt;!-- OBFUSCATED/PRETTY/DETAILED --&gt;\n  &lt;gwt.logLevel&gt;INFO&lt;/gwt.logLevel&gt;\n&lt;/properties&gt;\n</code></pre>\n"}],"owner":{"account_id":29718847,"reputation":3,"user_id":22776679,"display_name":"Jose"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":25,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77349178,"answer_count":1,"score":0,"last_activity_date":1698114202,"creation_date":1697832755,"question_id":77333555,"body_markdown":"glad to ask you.\r\n\r\nI am trying to migrate my old GWT eclipse project to the new GWT Maven Pulgin (not Mojos&#39;s).\r\nI want to know how this new pluging maganes the GWT compiler parameters like draftCompile and localWorkers, I have it not  clear. Thank you in advice.\r\n\r\nI tried the goal mvn gwt:compile -DdraftCompile=true, but I want to add this flag in the POM XML file.","title":"New GWT Maven plugin how pass parameters to compiler?","body":"<p>glad to ask you.</p>\n<p>I am trying to migrate my old GWT eclipse project to the new GWT Maven Pulgin (not Mojos's).\nI want to know how this new pluging maganes the GWT compiler parameters like draftCompile and localWorkers, I have it not  clear. Thank you in advice.</p>\n<p>I tried the goal mvn gwt:compile -DdraftCompile=true, but I want to add this flag in the POM XML file.</p>\n"},{"tags":["java","spring","http","whitelist","spring-resttemplate"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1698123963,"post_id":77349116,"comment_id":136361899,"body_markdown":"Configure a proxy which contains your whitelist.","body":"Configure a proxy which contains your whitelist."},{"owner":{"account_id":449256,"reputation":2122,"user_id":843943,"accept_rate":75,"display_name":"Grim"},"score":0,"creation_date":1698124065,"post_id":77349116,"comment_id":136361907,"body_markdown":"Is this a whitebox or blackbox test? In a blackbox-test you like to track every tcp connection and decide based on the tracked connections if the test failed or passed. In a whitebox-test you do not care if the behaviour does abusive things on the network as long as it does not touch blacklisted urls.","body":"Is this a whitebox or blackbox test? In a blackbox-test you like to track every tcp connection and decide based on the tracked connections if the test failed or passed. In a whitebox-test you do not care if the behaviour does abusive things on the network as long as it does not touch blacklisted urls."},{"owner":{"account_id":449256,"reputation":2122,"user_id":843943,"accept_rate":75,"display_name":"Grim"},"score":0,"creation_date":1698124195,"post_id":77349116,"comment_id":136361921,"body_markdown":"It looks like a integraion-test. Am I right?","body":"It looks like a integraion-test. Am I right?"},{"owner":{"account_id":13076598,"reputation":1,"user_id":11916174,"display_name":"Patrick Young"},"score":0,"creation_date":1698124686,"post_id":77349116,"comment_id":136361964,"body_markdown":"I ended up solving this issue just using a profile to ensure that the beans that don&#39;t work on the restricted network don&#39;t get loaded, thanks for the responses though","body":"I ended up solving this issue just using a profile to ensure that the beans that don&#39;t work on the restricted network don&#39;t get loaded, thanks for the responses though"}],"owner":{"account_id":13076598,"reputation":1,"user_id":11916174,"display_name":"Patrick Young"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1698112669,"creation_date":1698112669,"question_id":77349116,"body_markdown":"I have a slightly strange use case where my application can run on two different types of networks one of which is extremely restricted and I have encountered issues where the application works on the unrestricted network but fails to run on the restricted one.\r\n\r\nThis is because this application makes queries to third party rest apis using various methods (eg rest templates and other third party libraries)\r\n\r\nSo I want to be able to capture this in tests to make sure that the use cases that I want to run on the restricted network are able to run. Note not all use cases of the app need to be ran on the restricted network.\r\n\r\nBasically my idea is to be able to have a whitelist of urls that I know the restricted network is able to access.\r\n\r\nI have tried adding an interceptor to my rest templates and this works but only for the rest APIs that I have implemented myself, for the third party libraries it doesn&#39;t work. (Example of a third party library I am currently using org.kohsuke.github-api)\r\n\r\nAlso please note I am not using spring boot for this application.\r\n\r\n","title":"Java Spring Framework Is there a way to only allow the application to make network requests to specific urls","body":"<p>I have a slightly strange use case where my application can run on two different types of networks one of which is extremely restricted and I have encountered issues where the application works on the unrestricted network but fails to run on the restricted one.</p>\n<p>This is because this application makes queries to third party rest apis using various methods (eg rest templates and other third party libraries)</p>\n<p>So I want to be able to capture this in tests to make sure that the use cases that I want to run on the restricted network are able to run. Note not all use cases of the app need to be ran on the restricted network.</p>\n<p>Basically my idea is to be able to have a whitelist of urls that I know the restricted network is able to access.</p>\n<p>I have tried adding an interceptor to my rest templates and this works but only for the rest APIs that I have implemented myself, for the third party libraries it doesn't work. (Example of a third party library I am currently using org.kohsuke.github-api)</p>\n<p>Also please note I am not using spring boot for this application.</p>\n"},{"tags":["java","homebrew","distutils","python-3.12"],"answers":[{"tags":[],"owner":{"account_id":66106,"reputation":322,"user_id":194128,"display_name":"aaron blythe"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698112617,"creation_date":1698112617,"answer_id":77349112,"question_id":77349101,"body_markdown":"After a fair bit of reading of bugs and documentation it appears the best way around this is to:\r\n\r\n    brew install python-setuptools\r\n\r\nthen attempt to re-run:\r\n\r\n    brew install openjdk\r\n\r\nthen don&#39;t forget to symlink, something to the effect of:\r\n\r\n    sudo ln -sfn /Users/&lt;changeme&gt;/homebrew/opt/openjdk/libexec/openjdk.jdk /Library/Java/JavaVirtualMachines/openjdk.jdk\r\n\r\nAs shown in the homebrew documentation: https://formulae.brew.sh/formula/openjdk ","title":"&#39;brew install openjdk&#39; fails after python 3.12","body":"<p>After a fair bit of reading of bugs and documentation it appears the best way around this is to:</p>\n<pre><code>brew install python-setuptools\n</code></pre>\n<p>then attempt to re-run:</p>\n<pre><code>brew install openjdk\n</code></pre>\n<p>then don't forget to symlink, something to the effect of:</p>\n<pre><code>sudo ln -sfn /Users/&lt;changeme&gt;/homebrew/opt/openjdk/libexec/openjdk.jdk /Library/Java/JavaVirtualMachines/openjdk.jdk\n</code></pre>\n<p>As shown in the homebrew documentation: <a href=\"https://formulae.brew.sh/formula/openjdk\" rel=\"nofollow noreferrer\">https://formulae.brew.sh/formula/openjdk</a></p>\n"}],"owner":{"account_id":66106,"reputation":322,"user_id":194128,"display_name":"aaron blythe"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":99,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1698112617,"creation_date":1698112395,"question_id":77349101,"body_markdown":"When trying to install openjdk from homebrew I am getting the following error:\r\n\r\n\r\n```\r\n==&gt; Installing openjdk@17 dependency: glib\r\n==&gt; Patching\r\n==&gt; Applying hardcoded-paths.diff\r\npatching file &#39;gio/xdgmime/xdgmime.c&#39;\r\npatching file &#39;glib/gutils.c&#39;\r\n==&gt; meson setup build --default-library=both --localstatedir=/Users/aaronblythe/homebrew/var -Dgio_module_dir=/Users/aaronblythe/homebrew/lib/gio/modules -Dbsymbolic_functions=false -Ddtrace=false -Druntime_dir=/Users/aaronblythe/homebrew/var\r\n==&gt; meson compile -C build --verbose\r\nLast 15 lines from /Users/aaronblythe/Library/Logs/Homebrew/glib/02.meson:\r\nModuleNotFoundError: No module named &#39;distutils&#39;\r\n[5/1358] /private/tmp/glib-20231023-14634-16y3dzi/glib-2.78.0/tools/gen-visibility-macros.py 2.78.0 versions-macros ../glib/gversionmacros.h.in glib/gversionmacros.h\r\n[6/1358] /private/tmp/glib-20231023-14634-16y3dzi/glib-2.78.0/tools/gen-visibility-macros.py 2.78.0 visibility-macros GLIB glib/glib-visibility.h\r\n[7/1358] /private/tmp/glib-20231023-14634-16y3dzi/glib-2.78.0/tools/gen-visibility-macros.py 2.78.0 visibility-macros GOBJECT gobject/gobject-visibility.h\r\n[8/1358] /Users/aaronblythe/homebrew/opt/meson/bin/meson --internal exe --capture gobject/glib-enumtypes.h -- /Users/aaronblythe/homebrew/opt/python@3.12/bin/python3.12 gobject/glib-mkenums --template ../gobject/glib-enumtypes.h.template ../gobject/../glib/gunicode.h\r\n[9/1358] /private/tmp/glib-20231023-14634-16y3dzi/glib-2.78.0/tools/gen-visibility-macros.py 2.78.0 visibility-macros GMODULE gmodule/gmodule-visibility.h\r\n[10/1358] clang -Iglib/tests/getpwuid-preload.dylib.p -Iglib/tests -I../glib/tests -fcolor-diagnostics -Wall -Winvalid-pch -Wextra -Wpedantic -std=gnu99 -O3 -D_GNU_SOURCE -fno-strict-aliasing -DG_DISABLE_CAST_CHECKS -Wimplicit-fallthrough -Wmisleading-indentation -Wmissing-field-initializers -Wnonnull -Wunused -Wno-unused-parameter -Wno-cast-function-type -Wno-pedantic -Wno-format-zero-length -Wno-variadic-macros -Werror=format=2 -Werror=init-self -Werror=missing-include-dirs -Werror=pointer-arith -Werror=unused-result -Wstrict-prototypes -Wno-bad-function-cast -Werror=implicit-function-declaration -Werror=missing-prototypes -Werror=pointer-sign -Wno-string-plus-int -MD -MQ glib/tests/getpwuid-preload.dylib.p/getpwuid-preload.c.o -MF glib/tests/getpwuid-preload.dylib.p/getpwuid-preload.c.o.d -o glib/tests/getpwuid-preload.dylib.p/getpwuid-preload.c.o -c ../glib/tests/getpwuid-preload.c\r\n[11/1358] clang -Iglib/libcharset/libcharset.a.p -Iglib/libcharset -I../glib/libcharset -I. -I.. -fvisibility=hidden -fcolor-diagnostics -Wall -Winvalid-pch -Wextra -Wpedantic -std=gnu99 -O3 -D_GNU_SOURCE -fno-strict-aliasing -DG_DISABLE_CAST_CHECKS -Wimplicit-fallthrough -Wmisleading-indentation -Wmissing-field-initializers -Wnonnull -Wunused -Wno-unused-parameter -Wno-cast-function-type -Wno-pedantic -Wno-format-zero-length -Wno-variadic-macros -Werror=format=2 -Werror=init-self -Werror=missing-include-dirs -Werror=pointer-arith -Werror=unused-result -Wstrict-prototypes -Wno-bad-function-cast -Werror=implicit-function-declaration -Werror=missing-prototypes -Werror=pointer-sign -Wno-string-plus-int &#39;-DGLIB_CHARSETALIAS_DIR=&quot;/Users/aaronblythe/homebrew/Cellar/glib/2.78.0/lib&quot;&#39; -MD -MQ glib/libcharset/libcharset.a.p/localcharset.c.o -MF glib/libcharset/libcharset.a.p/localcharset.c.o.d -o glib/libcharset/libcharset.a.p/localcharset.c.o -c ../glib/libcharset/localcharset.c\r\n[12/1358] clang -Igio/xdgmime/libxdgmime.a.p -Igio/xdgmime -I../gio/xdgmime -I. -I.. -fvisibility=hidden -fcolor-diagnostics -Wall -Winvalid-pch -Wextra -Wpedantic -std=gnu99 -O3 -D_GNU_SOURCE -fno-strict-aliasing -DG_DISABLE_CAST_CHECKS -Wimplicit-fallthrough -Wmisleading-indentation -Wmissing-field-initializers -Wnonnull -Wunused -Wno-unused-parameter -Wno-cast-function-type -Wno-pedantic -Wno-format-zero-length -Wno-variadic-macros -Werror=format=2 -Werror=init-self -Werror=missing-include-dirs -Werror=pointer-arith -Werror=unused-result -Wstrict-prototypes -Wno-bad-function-cast -Werror=implicit-function-declaration -Werror=missing-prototypes -Werror=pointer-sign -Wno-string-plus-int -DHAVE_CONFIG_H -DXDG_PREFIX=_gio_xdg -MD -MQ gio/xdgmime/libxdgmime.a.p/xdgmimealias.c.o -MF gio/xdgmime/libxdgmime.a.p/xdgmimealias.c.o.d -o gio/xdgmime/libxdgmime.a.p/xdgmimealias.c.o -c ../gio/xdgmime/xdgmimealias.c\r\n[13/1358] clang -Igio/xdgmime/libxdgmime.a.p -Igio/xdgmime -I../gio/xdgmime -I. -I.. -fvisibility=hidden -fcolor-diagnostics -Wall -Winvalid-pch -Wextra -Wpedantic -std=gnu99 -O3 -D_GNU_SOURCE -fno-strict-aliasing -DG_DISABLE_CAST_CHECKS -Wimplicit-fallthrough -Wmisleading-indentation -Wmissing-field-initializers -Wnonnull -Wunused -Wno-unused-parameter -Wno-cast-function-type -Wno-pedantic -Wno-format-zero-length -Wno-variadic-macros -Werror=format=2 -Werror=init-self -Werror=missing-include-dirs -Werror=pointer-arith -Werror=unused-result -Wstrict-prototypes -Wno-bad-function-cast -Werror=implicit-function-declaration -Werror=missing-prototypes -Werror=pointer-sign -Wno-string-plus-int -DHAVE_CONFIG_H -DXDG_PREFIX=_gio_xdg -MD -MQ gio/xdgmime/libxdgmime.a.p/xdgmimeglob.c.o -MF gio/xdgmime/libxdgmime.a.p/xdgmimeglob.c.o.d -o gio/xdgmime/libxdgmime.a.p/xdgmimeglob.c.o -c ../gio/xdgmime/xdgmimeglob.c\r\n[14/1358] clang -Igio/xdgmime/libxdgmime.a.p -Igio/xdgmime -I../gio/xdgmime -I. -I.. -fvisibility=hidden -fcolor-diagnostics -Wall -Winvalid-pch -Wextra -Wpedantic -std=gnu99 -O3 -D_GNU_SOURCE -fno-strict-aliasing -DG_DISABLE_CAST_CHECKS -Wimplicit-fallthrough -Wmisleading-indentation -Wmissing-field-initializers -Wnonnull -Wunused -Wno-unused-parameter -Wno-cast-function-type -Wno-pedantic -Wno-format-zero-length -Wno-variadic-macros -Werror=format=2 -Werror=init-self -Werror=missing-include-dirs -Werror=pointer-arith -Werror=unused-result -Wstrict-prototypes -Wno-bad-function-cast -Werror=implicit-function-declaration -Werror=missing-prototypes -Werror=pointer-sign -Wno-string-plus-int -DHAVE_CONFIG_H -DXDG_PREFIX=_gio_xdg -MD -MQ gio/xdgmime/libxdgmime.a.p/xdgmime.c.o -MF gio/xdgmime/libxdgmime.a.p/xdgmime.c.o.d -o gio/xdgmime/libxdgmime.a.p/xdgmime.c.o -c ../gio/xdgmime/xdgmime.c\r\n[15/1358] clang -Igio/xdgmime/libxdgmime.a.p -Igio/xdgmime -I../gio/xdgmime -I. -I.. -fvisibility=hidden -fcolor-diagnostics -Wall -Winvalid-pch -Wextra -Wpedantic -std=gnu99 -O3 -D_GNU_SOURCE -fno-strict-aliasing -DG_DISABLE_CAST_CHECKS -Wimplicit-fallthrough -Wmisleading-indentation -Wmissing-field-initializers -Wnonnull -Wunused -Wno-unused-parameter -Wno-cast-function-type -Wno-pedantic -Wno-format-zero-length -Wno-variadic-macros -Werror=format=2 -Werror=init-self -Werror=missing-include-dirs -Werror=pointer-arith -Werror=unused-result -Wstrict-prototypes -Wno-bad-function-cast -Werror=implicit-function-declaration -Werror=missing-prototypes -Werror=pointer-sign -Wno-string-plus-int -DHAVE_CONFIG_H -DXDG_PREFIX=_gio_xdg -MD -MQ gio/xdgmime/libxdgmime.a.p/xdgmimecache.c.o -MF gio/xdgmime/libxdgmime.a.p/xdgmimecache.c.o.d -o gio/xdgmime/libxdgmime.a.p/xdgmimecache.c.o -c ../gio/xdgmime/xdgmimecache.c\r\nninja: build stopped: subcommand failed.\r\nINFO: autodetecting backend as ninja\r\nINFO: calculating backend command to run: /Users/aaronblythe/homebrew/Library/Homebrew/shims/mac/super/ninja -C /private/tmp/glib-20231023-14634-16y3dzi/glib-2.78.0/build -v\r\n\r\nDo not report this issue to Homebrew/brew or Homebrew/homebrew-core!\r\n```\r\n\r\nIt appears that distutils has been deprecated and removed: https://peps.python.org/pep-0632/#:~:text=In%20Python%203.12%2C%20distutils%20will,process%20that%20currently%20use%20distutils\r\n\r\n\r\nI have tried this with multiple versions of openjdk and get similar errors.","title":"&#39;brew install openjdk&#39; fails after python 3.12","body":"<p>When trying to install openjdk from homebrew I am getting the following error:</p>\n<pre><code>==&gt; Installing openjdk@17 dependency: glib\n==&gt; Patching\n==&gt; Applying hardcoded-paths.diff\npatching file 'gio/xdgmime/xdgmime.c'\npatching file 'glib/gutils.c'\n==&gt; meson setup build --default-library=both --localstatedir=/Users/aaronblythe/homebrew/var -Dgio_module_dir=/Users/aaronblythe/homebrew/lib/gio/modules -Dbsymbolic_functions=false -Ddtrace=false -Druntime_dir=/Users/aaronblythe/homebrew/var\n==&gt; meson compile -C build --verbose\nLast 15 lines from /Users/aaronblythe/Library/Logs/Homebrew/glib/02.meson:\nModuleNotFoundError: No module named 'distutils'\n[5/1358] /private/tmp/glib-20231023-14634-16y3dzi/glib-2.78.0/tools/gen-visibility-macros.py 2.78.0 versions-macros ../glib/gversionmacros.h.in glib/gversionmacros.h\n[6/1358] /private/tmp/glib-20231023-14634-16y3dzi/glib-2.78.0/tools/gen-visibility-macros.py 2.78.0 visibility-macros GLIB glib/glib-visibility.h\n[7/1358] /private/tmp/glib-20231023-14634-16y3dzi/glib-2.78.0/tools/gen-visibility-macros.py 2.78.0 visibility-macros GOBJECT gobject/gobject-visibility.h\n[8/1358] /Users/aaronblythe/homebrew/opt/meson/bin/meson --internal exe --capture gobject/glib-enumtypes.h -- /Users/aaronblythe/homebrew/opt/python@3.12/bin/python3.12 gobject/glib-mkenums --template ../gobject/glib-enumtypes.h.template ../gobject/../glib/gunicode.h\n[9/1358] /private/tmp/glib-20231023-14634-16y3dzi/glib-2.78.0/tools/gen-visibility-macros.py 2.78.0 visibility-macros GMODULE gmodule/gmodule-visibility.h\n[10/1358] clang -Iglib/tests/getpwuid-preload.dylib.p -Iglib/tests -I../glib/tests -fcolor-diagnostics -Wall -Winvalid-pch -Wextra -Wpedantic -std=gnu99 -O3 -D_GNU_SOURCE -fno-strict-aliasing -DG_DISABLE_CAST_CHECKS -Wimplicit-fallthrough -Wmisleading-indentation -Wmissing-field-initializers -Wnonnull -Wunused -Wno-unused-parameter -Wno-cast-function-type -Wno-pedantic -Wno-format-zero-length -Wno-variadic-macros -Werror=format=2 -Werror=init-self -Werror=missing-include-dirs -Werror=pointer-arith -Werror=unused-result -Wstrict-prototypes -Wno-bad-function-cast -Werror=implicit-function-declaration -Werror=missing-prototypes -Werror=pointer-sign -Wno-string-plus-int -MD -MQ glib/tests/getpwuid-preload.dylib.p/getpwuid-preload.c.o -MF glib/tests/getpwuid-preload.dylib.p/getpwuid-preload.c.o.d -o glib/tests/getpwuid-preload.dylib.p/getpwuid-preload.c.o -c ../glib/tests/getpwuid-preload.c\n[11/1358] clang -Iglib/libcharset/libcharset.a.p -Iglib/libcharset -I../glib/libcharset -I. -I.. -fvisibility=hidden -fcolor-diagnostics -Wall -Winvalid-pch -Wextra -Wpedantic -std=gnu99 -O3 -D_GNU_SOURCE -fno-strict-aliasing -DG_DISABLE_CAST_CHECKS -Wimplicit-fallthrough -Wmisleading-indentation -Wmissing-field-initializers -Wnonnull -Wunused -Wno-unused-parameter -Wno-cast-function-type -Wno-pedantic -Wno-format-zero-length -Wno-variadic-macros -Werror=format=2 -Werror=init-self -Werror=missing-include-dirs -Werror=pointer-arith -Werror=unused-result -Wstrict-prototypes -Wno-bad-function-cast -Werror=implicit-function-declaration -Werror=missing-prototypes -Werror=pointer-sign -Wno-string-plus-int '-DGLIB_CHARSETALIAS_DIR=&quot;/Users/aaronblythe/homebrew/Cellar/glib/2.78.0/lib&quot;' -MD -MQ glib/libcharset/libcharset.a.p/localcharset.c.o -MF glib/libcharset/libcharset.a.p/localcharset.c.o.d -o glib/libcharset/libcharset.a.p/localcharset.c.o -c ../glib/libcharset/localcharset.c\n[12/1358] clang -Igio/xdgmime/libxdgmime.a.p -Igio/xdgmime -I../gio/xdgmime -I. -I.. -fvisibility=hidden -fcolor-diagnostics -Wall -Winvalid-pch -Wextra -Wpedantic -std=gnu99 -O3 -D_GNU_SOURCE -fno-strict-aliasing -DG_DISABLE_CAST_CHECKS -Wimplicit-fallthrough -Wmisleading-indentation -Wmissing-field-initializers -Wnonnull -Wunused -Wno-unused-parameter -Wno-cast-function-type -Wno-pedantic -Wno-format-zero-length -Wno-variadic-macros -Werror=format=2 -Werror=init-self -Werror=missing-include-dirs -Werror=pointer-arith -Werror=unused-result -Wstrict-prototypes -Wno-bad-function-cast -Werror=implicit-function-declaration -Werror=missing-prototypes -Werror=pointer-sign -Wno-string-plus-int -DHAVE_CONFIG_H -DXDG_PREFIX=_gio_xdg -MD -MQ gio/xdgmime/libxdgmime.a.p/xdgmimealias.c.o -MF gio/xdgmime/libxdgmime.a.p/xdgmimealias.c.o.d -o gio/xdgmime/libxdgmime.a.p/xdgmimealias.c.o -c ../gio/xdgmime/xdgmimealias.c\n[13/1358] clang -Igio/xdgmime/libxdgmime.a.p -Igio/xdgmime -I../gio/xdgmime -I. -I.. -fvisibility=hidden -fcolor-diagnostics -Wall -Winvalid-pch -Wextra -Wpedantic -std=gnu99 -O3 -D_GNU_SOURCE -fno-strict-aliasing -DG_DISABLE_CAST_CHECKS -Wimplicit-fallthrough -Wmisleading-indentation -Wmissing-field-initializers -Wnonnull -Wunused -Wno-unused-parameter -Wno-cast-function-type -Wno-pedantic -Wno-format-zero-length -Wno-variadic-macros -Werror=format=2 -Werror=init-self -Werror=missing-include-dirs -Werror=pointer-arith -Werror=unused-result -Wstrict-prototypes -Wno-bad-function-cast -Werror=implicit-function-declaration -Werror=missing-prototypes -Werror=pointer-sign -Wno-string-plus-int -DHAVE_CONFIG_H -DXDG_PREFIX=_gio_xdg -MD -MQ gio/xdgmime/libxdgmime.a.p/xdgmimeglob.c.o -MF gio/xdgmime/libxdgmime.a.p/xdgmimeglob.c.o.d -o gio/xdgmime/libxdgmime.a.p/xdgmimeglob.c.o -c ../gio/xdgmime/xdgmimeglob.c\n[14/1358] clang -Igio/xdgmime/libxdgmime.a.p -Igio/xdgmime -I../gio/xdgmime -I. -I.. -fvisibility=hidden -fcolor-diagnostics -Wall -Winvalid-pch -Wextra -Wpedantic -std=gnu99 -O3 -D_GNU_SOURCE -fno-strict-aliasing -DG_DISABLE_CAST_CHECKS -Wimplicit-fallthrough -Wmisleading-indentation -Wmissing-field-initializers -Wnonnull -Wunused -Wno-unused-parameter -Wno-cast-function-type -Wno-pedantic -Wno-format-zero-length -Wno-variadic-macros -Werror=format=2 -Werror=init-self -Werror=missing-include-dirs -Werror=pointer-arith -Werror=unused-result -Wstrict-prototypes -Wno-bad-function-cast -Werror=implicit-function-declaration -Werror=missing-prototypes -Werror=pointer-sign -Wno-string-plus-int -DHAVE_CONFIG_H -DXDG_PREFIX=_gio_xdg -MD -MQ gio/xdgmime/libxdgmime.a.p/xdgmime.c.o -MF gio/xdgmime/libxdgmime.a.p/xdgmime.c.o.d -o gio/xdgmime/libxdgmime.a.p/xdgmime.c.o -c ../gio/xdgmime/xdgmime.c\n[15/1358] clang -Igio/xdgmime/libxdgmime.a.p -Igio/xdgmime -I../gio/xdgmime -I. -I.. -fvisibility=hidden -fcolor-diagnostics -Wall -Winvalid-pch -Wextra -Wpedantic -std=gnu99 -O3 -D_GNU_SOURCE -fno-strict-aliasing -DG_DISABLE_CAST_CHECKS -Wimplicit-fallthrough -Wmisleading-indentation -Wmissing-field-initializers -Wnonnull -Wunused -Wno-unused-parameter -Wno-cast-function-type -Wno-pedantic -Wno-format-zero-length -Wno-variadic-macros -Werror=format=2 -Werror=init-self -Werror=missing-include-dirs -Werror=pointer-arith -Werror=unused-result -Wstrict-prototypes -Wno-bad-function-cast -Werror=implicit-function-declaration -Werror=missing-prototypes -Werror=pointer-sign -Wno-string-plus-int -DHAVE_CONFIG_H -DXDG_PREFIX=_gio_xdg -MD -MQ gio/xdgmime/libxdgmime.a.p/xdgmimecache.c.o -MF gio/xdgmime/libxdgmime.a.p/xdgmimecache.c.o.d -o gio/xdgmime/libxdgmime.a.p/xdgmimecache.c.o -c ../gio/xdgmime/xdgmimecache.c\nninja: build stopped: subcommand failed.\nINFO: autodetecting backend as ninja\nINFO: calculating backend command to run: /Users/aaronblythe/homebrew/Library/Homebrew/shims/mac/super/ninja -C /private/tmp/glib-20231023-14634-16y3dzi/glib-2.78.0/build -v\n\nDo not report this issue to Homebrew/brew or Homebrew/homebrew-core!\n</code></pre>\n<p>It appears that distutils has been deprecated and removed: <a href=\"https://peps.python.org/pep-0632/#:%7E:text=In%20Python%203.12%2C%20distutils%20will,process%20that%20currently%20use%20distutils\" rel=\"nofollow noreferrer\">https://peps.python.org/pep-0632/#:~:text=In%20Python%203.12%2C%20distutils%20will,process%20that%20currently%20use%20distutils</a></p>\n<p>I have tried this with multiple versions of openjdk and get similar errors.</p>\n"},{"tags":["java","gradle","annotations"],"owner":{"account_id":12553517,"reputation":733,"user_id":9134162,"display_name":"jdoej"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":20,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1698111865,"creation_date":1698111865,"question_id":77349072,"body_markdown":"I&#39;m trying to specify a local project as an annotation processor for an annotation (which I also declared in that project).\r\n\r\nIN the base projects dependencies I&#39;ve tried a bunch of things, including defining it like this:\r\n\r\n\r\n    implementation project(&#39;:ToolsProject&#39;)\r\n    annotationProcessor project(&#39;:ToolsProject.AutoLog:AutoLogProcessor&#39;)\r\n\r\nI can&#39;t seem to figure out the notation to directly point the annotationProcessor command to the package within the local project","title":"Correctly Specifying an annotation processor with Gradle","body":"<p>I'm trying to specify a local project as an annotation processor for an annotation (which I also declared in that project).</p>\n<p>IN the base projects dependencies I've tried a bunch of things, including defining it like this:</p>\n<pre><code>implementation project(':ToolsProject')\nannotationProcessor project(':ToolsProject.AutoLog:AutoLogProcessor')\n</code></pre>\n<p>I can't seem to figure out the notation to directly point the annotationProcessor command to the package within the local project</p>\n"},{"tags":["java","spring-boot","junit5"],"answers":[{"tags":[],"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"down_vote_count":0,"up_vote_count":22,"is_accepted":true,"score":22,"last_activity_date":1698110401,"creation_date":1558589494,"answer_id":56268589,"question_id":56268274,"body_markdown":"From [&#167;5.2.1 of the JUnit 5 User Guide][1]:\r\n\r\n&gt;...\r\n&gt;\r\n&gt;Multiple extensions can be registered together like this:\r\n&gt;\r\n&gt;     @ExtendWith({ DatabaseExtension.class, WebServerExtension.class })\r\n&gt;     class MyFirstTests {\r\n&gt;         // ...\r\n&gt;     }\r\n&gt;\r\n&gt;As an alternative, multiple extensions can be registered separately like this:\r\n&gt;\r\n&gt;     @ExtendWith(DatabaseExtension.class)\r\n&gt;     @ExtendWith(WebServerExtension.class)\r\n&gt;     class MySecondTests {\r\n&gt;         // ...\r\n&gt;     }\r\n&gt;&gt;_Extension Registration Order_\r\n&gt;&gt;\r\n&gt;&gt;Extensions registered declaratively via `@ExtendWith` at the class level, method level, or parameter level will be executed in the order in which they are declared in the source code. For example, the execution of tests in both `MyFirstTests` and `MySecondTests` will be extended by the `DatabaseExtension` and `WebServerExtension`, **in exactly that order**.\r\n\r\n  [1]: https://junit.org/junit5/docs/current/user-guide/#extensions-registration-declarative","title":"Order of multiple extensions in JUnit 5","body":"<p>From <a href=\"https://junit.org/junit5/docs/current/user-guide/#extensions-registration-declarative\" rel=\"nofollow noreferrer\">§5.2.1 of the JUnit 5 User Guide</a>:</p>\n<blockquote>\n<p>...</p>\n<p>Multiple extensions can be registered together like this:</p>\n<pre><code>@ExtendWith({ DatabaseExtension.class, WebServerExtension.class })\nclass MyFirstTests {\n    // ...\n}\n</code></pre>\n<p>As an alternative, multiple extensions can be registered separately like this:</p>\n<pre><code>@ExtendWith(DatabaseExtension.class)\n@ExtendWith(WebServerExtension.class)\nclass MySecondTests {\n    // ...\n}\n</code></pre>\n<blockquote>\n<p><em>Extension Registration Order</em></p>\n<p>Extensions registered declaratively via <code>@ExtendWith</code> at the class level, method level, or parameter level will be executed in the order in which they are declared in the source code. For example, the execution of tests in both <code>MyFirstTests</code> and <code>MySecondTests</code> will be extended by the <code>DatabaseExtension</code> and <code>WebServerExtension</code>, <strong>in exactly that order</strong>.</p>\n</blockquote>\n</blockquote>\n"}],"owner":{"account_id":341185,"reputation":16364,"user_id":671639,"accept_rate":69,"display_name":"BetaRide"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9302,"favorite_count":0,"down_vote_count":0,"up_vote_count":13,"accepted_answer_id":56268589,"answer_count":1,"score":13,"last_activity_date":1698110401,"creation_date":1558587267,"question_id":56268274,"body_markdown":"If I use more than one extension with JUnit 5, whats the order? Ideally the order int the `@ExtendsWith` annotation is respected, but I could not find any documentation about that.\r\n\r\nExample:\r\n\r\n    @ExtendWith({SpringExtension.class, InitH2.class})\r\n    public class VmRepositoryIntegrationTest {\r\n      // Test implemenations\r\n    }\r\n\r\nSo in this example I need Spring to set up the DB connection before I cann initialize the DB.\r\n\r\n","title":"Order of multiple extensions in JUnit 5","body":"<p>If I use more than one extension with JUnit 5, whats the order? Ideally the order int the <code>@ExtendsWith</code> annotation is respected, but I could not find any documentation about that.</p>\n\n<p>Example:</p>\n\n<pre><code>@ExtendWith({SpringExtension.class, InitH2.class})\npublic class VmRepositoryIntegrationTest {\n  // Test implemenations\n}\n</code></pre>\n\n<p>So in this example I need Spring to set up the DB connection before I cann initialize the DB.</p>\n"},{"tags":["java","eclipse","selenium","webdriver"],"comments":[{"owner":{"account_id":2524092,"reputation":280,"user_id":2193781,"display_name":"CheryJose"},"score":0,"creation_date":1364093121,"post_id":15591180,"comment_id":22112664,"body_markdown":"I can write and give you c# code for this will it help you?","body":"I can write and give you c# code for this will it help you?"},{"owner":{"account_id":2344875,"reputation":1183,"user_id":2055400,"accept_rate":75,"display_name":"Sridevi Yedidha"},"score":0,"creation_date":1364096565,"post_id":15591180,"comment_id":22113241,"body_markdown":"Are you using junit framework. Let me know. I can give you the code.","body":"Are you using junit framework. Let me know. I can give you the code."}],"answers":[{"tags":[],"owner":{"account_id":2534603,"reputation":207,"user_id":2202069,"display_name":"ShacharW"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1364076102,"creation_date":1364076102,"answer_id":15592592,"question_id":15591180,"body_markdown":"1. driver = webdriver.Firefox();\r\n2. Load the Excel file (you can use [this][1])\r\n3. In the rows loop, add this code: driver.get(&lt; cell URL&gt;);\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/1516144/read-write-excel-file-in-java","title":"Visit links from excel file using selenium web driver","body":"<ol>\n<li>driver = webdriver.Firefox();</li>\n<li>Load the Excel file (you can use <a href=\"https://stackoverflow.com/questions/1516144/read-write-excel-file-in-java\">this</a>)</li>\n<li>In the rows loop, add this code: driver.get(&lt; cell URL>);</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":1696244,"reputation":2249,"user_id":1557584,"display_name":"HemChe"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1364184114,"creation_date":1364184114,"answer_id":15607423,"question_id":15591180,"body_markdown":"In your code you have used the following statement to compare two strings.\r\n\r\n    if(url==urlnew)\r\n\r\nUse the below code. it will work.\r\n\r\n    if(url.equals(urlnew))\r\n\r\nFor more information on String comparision, check [this][1] link.\r\n\r\n\r\n  [1]: http://www.java-samples.com/showtutorial.php?tutorialid=221","title":"Visit links from excel file using selenium web driver","body":"<p>In your code you have used the following statement to compare two strings.</p>\n\n<pre><code>if(url==urlnew)\n</code></pre>\n\n<p>Use the below code. it will work.</p>\n\n<pre><code>if(url.equals(urlnew))\n</code></pre>\n\n<p>For more information on String comparision, check <a href=\"http://www.java-samples.com/showtutorial.php?tutorialid=221\" rel=\"nofollow\">this</a> link.</p>\n"}],"owner":{"account_id":2421058,"reputation":59,"user_id":2113990,"display_name":"Mitesh Hatkar"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":8168,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1698109325,"creation_date":1364067224,"question_id":15591180,"body_markdown":"I have an Excel file where all my links are stored in one single column. One Link on each row. For E.g:\r\n\r\nwww.example.com&lt;br&gt;\r\nwww.test.com&lt;br&gt;\r\nwww.demo.com\r\n\r\nand so on. What I want to do is visit each link and open it in Firefox. Get the link in address bar and compare it with link in excel cell. If both are same them set the string &quot;Pass&quot; in next cell otherwise set string &quot;Fail&quot;. How do I do This. Can you please give me a sample code? I am using selenium web driver with java.\r\n\r\nHere is what I tried:\r\n\r\n    try {\r\n        FileInputStream file=new FileInputStream(new File(path));\r\n        FileOutputStream outFile=new FileOutputStream(new File(path));\r\n        HSSFWorkbook workbook=new HSSFWorkbook(file);\r\n        HSSFSheet sheet=workbook.getSheetAt(0);\r\n        HSSFCell cell=null;\t    \r\n        int s=sheet.getLastRowNum()+1;\r\n        for(int i=0; i&lt;s; i++){\r\n            cell=sheet.getRow(i).getCell(0);\r\n            String url=cell.toString();\r\n            driver.get(url);\r\n            Thread.sleep(10000);\r\n            String urlnew=driver.getCurrentUrl().toString();\r\n            HSSFRow row=sheet.getRow(i);\r\n            HSSFCell cellresult=row.createCell(1);\r\n            if(url==urlnew){\r\n                cellresult.setCellValue(&quot;Pass&quot;);\r\n            }else{\r\n                cellresult.setCellValue(&quot;fail&quot;);\r\n            }\r\n            workbook.write(outFile);\r\n        }    \r\n        file.close();  \r\n        outFile.close();\r\n    } ","title":"Visit links from excel file using selenium web driver","body":"<p>I have an Excel file where all my links are stored in one single column. One Link on each row. For E.g:</p>\n\n<p>www.example.com<br>\nwww.test.com<br>\nwww.demo.com</p>\n\n<p>and so on. What I want to do is visit each link and open it in Firefox. Get the link in address bar and compare it with link in excel cell. If both are same them set the string \"Pass\" in next cell otherwise set string \"Fail\". How do I do This. Can you please give me a sample code? I am using selenium web driver with java.</p>\n\n<p>Here is what I tried:</p>\n\n<pre><code>try {\n    FileInputStream file=new FileInputStream(new File(path));\n    FileOutputStream outFile=new FileOutputStream(new File(path));\n    HSSFWorkbook workbook=new HSSFWorkbook(file);\n    HSSFSheet sheet=workbook.getSheetAt(0);\n    HSSFCell cell=null;     \n    int s=sheet.getLastRowNum()+1;\n    for(int i=0; i&lt;s; i++){\n        cell=sheet.getRow(i).getCell(0);\n        String url=cell.toString();\n        driver.get(url);\n        Thread.sleep(10000);\n        String urlnew=driver.getCurrentUrl().toString();\n        HSSFRow row=sheet.getRow(i);\n        HSSFCell cellresult=row.createCell(1);\n        if(url==urlnew){\n            cellresult.setCellValue(\"Pass\");\n        }else{\n            cellresult.setCellValue(\"fail\");\n        }\n        workbook.write(outFile);\n    }    \n    file.close();  \n    outFile.close();\n} \n</code></pre>\n"},{"tags":["java","ssl","tomcat"],"comments":[{"owner":{"account_id":8362430,"reputation":856,"user_id":6280255,"display_name":"Just another Java programmer"},"score":0,"creation_date":1697719979,"post_id":77323909,"comment_id":136317020,"body_markdown":"Is the whole certificate chain available in the keystore?","body":"Is the whole certificate chain available in the keystore?"},{"owner":{"account_id":19950129,"reputation":601,"user_id":14619971,"display_name":"jkfe"},"score":0,"creation_date":1697720950,"post_id":77323909,"comment_id":136317233,"body_markdown":"@Just another Java programmer Not sure what you exactly mean by chain. But when I run the cmd ```keytool -list -keystore mycert.jks```, it opens a lot of information about the cert (owner, issuer, certificate fingerprints with SHA codes, Signature algorithm name, Subject Public Key Algorithm, Alias name, validity period, CertificatePolicies, SubjectAlternativeName, SubjectKeyIdentifier...). Seems to be ok.","body":"@Just another Java programmer Not sure what you exactly mean by chain. But when I run the cmd <code>keytool -list -keystore mycert.jks</code>, it opens a lot of information about the cert (owner, issuer, certificate fingerprints with SHA codes, Signature algorithm name, Subject Public Key Algorithm, Alias name, validity period, CertificatePolicies, SubjectAlternativeName, SubjectKeyIdentifier...). Seems to be ok."},{"owner":{"account_id":26746848,"reputation":226,"user_id":20346807,"display_name":"Joan"},"score":0,"creation_date":1697721115,"post_id":77323909,"comment_id":136317266,"body_markdown":"Is the certificate coming from a valid certification authority? This may be the issue..","body":"Is the certificate coming from a valid certification authority? This may be the issue.."},{"owner":{"account_id":19950129,"reputation":601,"user_id":14619971,"display_name":"jkfe"},"score":0,"creation_date":1697721282,"post_id":77323909,"comment_id":136317322,"body_markdown":"@Joan What do you mean by valid and how to know it is valid? Is that a specific configuration that needs to be done? The certification authority is certainly a provider that can be trusted as it provides several certs for other of the corp apps.","body":"@Joan What do you mean by valid and how to know it is valid? Is that a specific configuration that needs to be done? The certification authority is certainly a provider that can be trusted as it provides several certs for other of the corp apps."},{"owner":{"account_id":26746848,"reputation":226,"user_id":20346807,"display_name":"Joan"},"score":0,"creation_date":1697721413,"post_id":77323909,"comment_id":136317359,"body_markdown":"Can you share the certificate information that you&#39;re seeing in the browser (The General TAB?","body":"Can you share the certificate information that you&#39;re seeing in the browser (The General TAB?"},{"owner":{"account_id":19950129,"reputation":601,"user_id":14619971,"display_name":"jkfe"},"score":0,"creation_date":1697721906,"post_id":77323909,"comment_id":136317477,"body_markdown":"@Joan I updated the question adding what I see in the browser General Tab","body":"@Joan I updated the question adding what I see in the browser General Tab"},{"owner":{"account_id":13796,"reputation":19353,"user_id":27905,"display_name":"nitind"},"score":1,"creation_date":1697722340,"post_id":77323909,"comment_id":136317577,"body_markdown":"It looks like it might be invalid because it&#39;s not *trusted*. Was it issued by an authority the browser already trusts? It looks like it&#39;s self-signed, which would mean no. Secure means encrypted *and* trusted.","body":"It looks like it might be invalid because it&#39;s not <i>trusted</i>. Was it issued by an authority the browser already trusts? It looks like it&#39;s self-signed, which would mean no. Secure means encrypted <i>and</i> trusted."},{"owner":{"account_id":19950129,"reputation":601,"user_id":14619971,"display_name":"jkfe"},"score":0,"creation_date":1697722595,"post_id":77323909,"comment_id":136317621,"body_markdown":"@nitind How do I check if it was issued by an authority the browser trusts? Also, how do I check if it was self-signed?","body":"@nitind How do I check if it was issued by an authority the browser trusts? Also, how do I check if it was self-signed?"},{"owner":{"account_id":15168430,"reputation":173,"user_id":10945276,"display_name":"roediGERhard"},"score":0,"creation_date":1697725462,"post_id":77323909,"comment_id":136318256,"body_markdown":"if it is self-signed, the shown issuer of the cert should be self-signed or something like this. Regarding the browser: well, it depends on the used browser. e.g. in firefox I think they are visible with the url: about:preferences#privacy look for the subsection &quot;Certificates&quot; there should be a button &quot;view certificates&quot; which should list them.","body":"if it is self-signed, the shown issuer of the cert should be self-signed or something like this. Regarding the browser: well, it depends on the used browser. e.g. in firefox I think they are visible with the url: about:preferences#privacy look for the subsection &quot;Certificates&quot; there should be a button &quot;view certificates&quot; which should list them."},{"owner":{"account_id":19950129,"reputation":601,"user_id":14619971,"display_name":"jkfe"},"score":0,"creation_date":1697726152,"post_id":77323909,"comment_id":136318411,"body_markdown":"@roediGERhard Looks like the certificate is indeed self-signed. I was using Chrome. Now opened it on Firefox which gave a better clue. It says: xx.xx.xxx.x uses an invalid security certificate. The certificate is not trusted because it is self-signed. Error code: MOZILLA_PKIX_ERROR_SELF_SIGNED_CERT. View certificate.","body":"@roediGERhard Looks like the certificate is indeed self-signed. I was using Chrome. Now opened it on Firefox which gave a better clue. It says: xx.xx.xxx.x uses an invalid security certificate. The certificate is not trusted because it is self-signed. Error code: MOZILLA_PKIX_ERROR_SELF_SIGNED_CERT. View certificate."},{"owner":{"account_id":15168430,"reputation":173,"user_id":10945276,"display_name":"roediGERhard"},"score":0,"creation_date":1697795922,"post_id":77323909,"comment_id":136327594,"body_markdown":"there you have it. So either your proper certificate is not used by tomcat or...? btw: why do you use tomcat to do the ssl stuff? I always use an apache in front as reverse proxy to do the stuff.","body":"there you have it. So either your proper certificate is not used by tomcat or...? btw: why do you use tomcat to do the ssl stuff? I always use an apache in front as reverse proxy to do the stuff."},{"owner":{"account_id":19950129,"reputation":601,"user_id":14619971,"display_name":"jkfe"},"score":0,"creation_date":1698095198,"post_id":77323909,"comment_id":136359535,"body_markdown":"@roediGERhard I added UPDATE 2 to the question with more details. Noted that the Issuer name is incorrect. It shows myservername (which is the private key alias) instead of the certification authority cetificate name.","body":"@roediGERhard I added UPDATE 2 to the question with more details. Noted that the Issuer name is incorrect. It shows myservername (which is the private key alias) instead of the certification authority cetificate name."}],"answers":[{"tags":[],"owner":{"account_id":3421244,"reputation":35863,"user_id":2868801,"display_name":"dave_thompson_085"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1698108746,"creation_date":1698107928,"answer_id":77348940,"question_id":77323909,"body_markdown":"Meta: this is no longer ontopic, though years ago it was, and I&#39;ve seen many similar Qs, but can&#39;t easily find a good dupe.\r\n\r\nSo close and yet ... not.\r\n\r\nThe canonical pure-Java sequence to get a cert-and-key for an SSL/TLS server, including an HTTPS server like Tomcat, is:\r\n\r\n1A. generate keypair with `keytool -genkey[pair]`; this also generates a dummy self-signed certificate for the generated keypair and the &#39;dname&#39; (subject name and also issuer name) you enter, plus some other parameters you could have specified but didn&#39;t (see below)\r\n\r\n1B. create CSR with `keytool -certreq`\r\n\r\nYou did these correctly.\r\n\r\n&amp;zwnj;2. submit CSR to CA along with other information as needed (usually but not necessarily proof of domain &#39;ownership&#39;) and get back at least a server aka end-entity cert; usually the CA also supplies any needed root and intermediate aka &#39;chain&#39; cert(s).\r\n\r\nYour CA apparently didn&#39;t give you the chain, but when you opened it in cryptext.dll (which is the default action for doubleclick .cer on Windows) both the intermediate and root were found in your Windows store. It is common for an enterprise with an in-house CA and domain-joined or otherwise centrally-managed Windows workstations -- especially if the in-house CA is the one provided by Windows AD -- to &#39;push&#39; their CA root to all machines; it is less common but possible to push the intermediate(s), or that(those) might be cached from previous accesses by this machine to (intranet) server(s) using in-house cert(s). \r\n\r\nThus you dealt with this correctly.\r\n\r\n3A. `keytool -import[cert]` the root and intermediate(s) (if any), from the top down, to the _same_ keystore under _different_ (unique) alias(es)\r\n\r\n3B. `keytool -import[cert]` the server cert to the same keystore and same alias as used in 1A and 1B. This replaces the dummy self-signed cert created in 1A by the CA-issued one and also builds its certification path using the cert(s) imported in 3A.\r\n\r\n**You did 3A but not 3B**; as a result the dummy self-signed cert created in 1A remains in place and is used, and since it indeed is not valid it is correctly rejected by the browser. **You need to do 3B** (and bounce your Tomcat if it is already running).\r\n\r\nA variant method is that some CAs provide the end-entity cert PLUS the chain cert(s) in a package using either a PKCS7 format usually labelled p7b or p7c, or a simpler PEM-sequence format. Yours didn&#39;t, but given you have the chain certs in your Windows store the &#39;cert export wizard&#39; can create the PKCS7 format; just select the P7B button and tick the &#39;include all certs&#39; box. In this case 3A and 3B can be replaced by a single step:\r\n\r\n3&#39;. import the p7b/c package or PEM-sequence of (all) certs to the same keystore and alias as 1A and 1B. This both replaces the dummy self-signed cert and builds the certification path from the input, thereby ending up with essentially the same result.\r\n\r\nFinally, note that SSL/TLS certificates are _usually_ issued as valid for a domain-style name or set of such names, not an IPaddress. Public CAs require the name be a _real_ domain name i.e. registered in public DNS, but inhouse CAs like the one you used can accept other names if they want, like NetBIOS names. A cert _can_ allow both name(s) and IPaddress(es); look at the Subject Alternative Name field in the cryptext.dll viewer or `keytool -printcert` or `keytool -list -v` on the keystore. \r\n\r\nIf your CA gave you an IPaddress-capable cert `https://&lt;ipaddr&gt;` will work, but if it gave you a name-only cert you must use `https://&lt;name&gt;` and not `https://&lt;ipaddr&gt;`. ","title":"SSL installation on Tomcat - Certificate is not valid","body":"<p>Meta: this is no longer ontopic, though years ago it was, and I've seen many similar Qs, but can't easily find a good dupe.</p>\n<p>So close and yet ... not.</p>\n<p>The canonical pure-Java sequence to get a cert-and-key for an SSL/TLS server, including an HTTPS server like Tomcat, is:</p>\n<p>1A. generate keypair with <code>keytool -genkey[pair]</code>; this also generates a dummy self-signed certificate for the generated keypair and the 'dname' (subject name and also issuer name) you enter, plus some other parameters you could have specified but didn't (see below)</p>\n<p>1B. create CSR with <code>keytool -certreq</code></p>\n<p>You did these correctly.</p>\n<p>‌2. submit CSR to CA along with other information as needed (usually but not necessarily proof of domain 'ownership') and get back at least a server aka end-entity cert; usually the CA also supplies any needed root and intermediate aka 'chain' cert(s).</p>\n<p>Your CA apparently didn't give you the chain, but when you opened it in cryptext.dll (which is the default action for doubleclick .cer on Windows) both the intermediate and root were found in your Windows store. It is common for an enterprise with an in-house CA and domain-joined or otherwise centrally-managed Windows workstations -- especially if the in-house CA is the one provided by Windows AD -- to 'push' their CA root to all machines; it is less common but possible to push the intermediate(s), or that(those) might be cached from previous accesses by this machine to (intranet) server(s) using in-house cert(s).</p>\n<p>Thus you dealt with this correctly.</p>\n<p>3A. <code>keytool -import[cert]</code> the root and intermediate(s) (if any), from the top down, to the <em>same</em> keystore under <em>different</em> (unique) alias(es)</p>\n<p>3B. <code>keytool -import[cert]</code> the server cert to the same keystore and same alias as used in 1A and 1B. This replaces the dummy self-signed cert created in 1A by the CA-issued one and also builds its certification path using the cert(s) imported in 3A.</p>\n<p><strong>You did 3A but not 3B</strong>; as a result the dummy self-signed cert created in 1A remains in place and is used, and since it indeed is not valid it is correctly rejected by the browser. <strong>You need to do 3B</strong> (and bounce your Tomcat if it is already running).</p>\n<p>A variant method is that some CAs provide the end-entity cert PLUS the chain cert(s) in a package using either a PKCS7 format usually labelled p7b or p7c, or a simpler PEM-sequence format. Yours didn't, but given you have the chain certs in your Windows store the 'cert export wizard' can create the PKCS7 format; just select the P7B button and tick the 'include all certs' box. In this case 3A and 3B can be replaced by a single step:</p>\n<p>3'. import the p7b/c package or PEM-sequence of (all) certs to the same keystore and alias as 1A and 1B. This both replaces the dummy self-signed cert and builds the certification path from the input, thereby ending up with essentially the same result.</p>\n<p>Finally, note that SSL/TLS certificates are <em>usually</em> issued as valid for a domain-style name or set of such names, not an IPaddress. Public CAs require the name be a <em>real</em> domain name i.e. registered in public DNS, but inhouse CAs like the one you used can accept other names if they want, like NetBIOS names. A cert <em>can</em> allow both name(s) and IPaddress(es); look at the Subject Alternative Name field in the cryptext.dll viewer or <code>keytool -printcert</code> or <code>keytool -list -v</code> on the keystore.</p>\n<p>If your CA gave you an IPaddress-capable cert <code>https://&lt;ipaddr&gt;</code> will work, but if it gave you a name-only cert you must use <code>https://&lt;name&gt;</code> and not <code>https://&lt;ipaddr&gt;</code>.</p>\n"}],"owner":{"account_id":19950129,"reputation":601,"user_id":14619971,"display_name":"jkfe"},"comment_count":12,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":90,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77348940,"answer_count":1,"score":0,"last_activity_date":1698108746,"creation_date":1697719843,"question_id":77323909,"body_markdown":"I have a java/angular application installed in a tomcat windows corp server.\r\n\r\nThe application is accessed remotely using http just fine.\r\n\r\nNow I need to install ssl to it.\r\n\r\nI already have the certificate from the certification authority and generated the mycert.jks file.\r\n\r\nThen placed that file in the tomcat \\conf folder and configured tomcat server.xml connector like this:\r\n\r\n```\r\n&lt;Connector port=&quot;xxx&quot; maxHttpHeaderSize=&quot;8192&quot; maxThreads=&quot;100&quot;\r\n           minSpareThreads=&quot;25&quot; maxSpareThreads=&quot;75&quot;\r\n           enableLookups=&quot;false&quot; disableUploadTimeout=&quot;true&quot;\r\n           acceptCount=&quot;100&quot; scheme=&quot;https&quot; secure=&quot;true&quot;\r\n           SSLEnabled=&quot;true&quot; clientAuth=&quot;false&quot;\r\n           sslProtocol=&quot;TLS&quot; keyAlias=&quot;myalias&quot;\r\n           keystoreFile=&quot;conf\\mycert.jks&quot;\r\n           keystorePass=&quot;mypass&quot; /&gt;\r\n```\r\n\r\nNow when I access the application remotely (https://10.10.100.10/myapp), the application loads fine in the browser, but I&#39;m getting a ```Not secure - Certificate is not valid``` message.\r\n\r\nWhen I click the ```Certificate is not valid``` message it opens the certificate details.\r\n\r\nThe information there is correct (Issued To - Common Name, Validity Period...).\r\n\r\nSo it means the server can correctly find my certificate.\r\n\r\nThe validity period has not expired. So it is ok also.\r\n\r\nThe date/time on the server is also correct.\r\n\r\nWhat else can it be?\r\n\r\nUPDATE\r\n\r\nAdding data seen when &quot;Certificate is not valid&quot; message is clicked on the browser:\r\n\r\n```\r\nIssued To\r\nCommon Name (CN)\tmycn\r\nOrganization (O)\tmyorg\r\nOrganizational Unit (OU)\t&lt;Not Part Of Certificate&gt;\r\n\r\nIssued By\r\nCommon Name (CN)\tmycn\r\nOrganization (O)\tmyorg\r\nOrganizational Unit (OU)\t&lt;Not Part Of Certificate&gt;\r\n\r\nValidity Period\r\nIssued On\tTuesday, September 26, 2023 at 9:38:18AM\r\nExpires On\tMonday, December 25, 2023 at 9:38:18AM\r\n\r\nFingerprints\r\nSHA-256 Fingerprint\tXX XX XX XX XX XX...\r\nSHA-1 Fingerprint\tXX XX XX XX XX XX...\r\n```\r\n\r\nUPDATE 2:\r\n\r\nI tried it this other way, but still getting the same error message.\r\n\r\nGenerated the .jks using this command:\r\n\r\n```\r\nkeytool -genkey -alias myservername -keyalg RSA -keysize 2048 -keystore myservername.jks -dname &quot;CN=myservername, O=MyOrg, L=, ST=, C=&quot; &amp;&amp; keytool -certreq -alias myservername -file myservername.csr -keystore myservername.jks\r\n```\r\n\r\nIt generated a myservername.csr file and a myservername.jks file.\r\n\r\nThen, I ran this command\r\n\r\n```keytool -list -keystore myservername.jks```\r\n\r\nand got this result:\r\n\r\n```\r\nmyservername, Oct 20, 2023, PrivateKeyEntry,\r\nCertificate fingerprint (SHA-256): xxxxxxxx\r\n```\r\n\r\nThen I sent the myservername.csr file to the certificate authority and they sent me back this:\r\n\r\n```\r\n-----BEGIN CERTIFICATE-----\r\nxxxxxxx\r\n-----END CERTIFICATE-----\r\n```\r\n\r\nI pasted that into a myservername.cer file.\r\n\r\nI double click the myservername.cer and went to certificate path tab and I see this:\r\nrootcertname &gt; intermediatecertname &gt; myservername\r\n\r\nmyservername is the alias I choose in the first command above.\r\n\r\nThen I clicked rootcertname &gt; view certificate &gt; details &gt; copy to file &gt; next &gt; Base 64 encoded x.509 (cer)\r\n\r\nIt generated rootcertname.cer\r\n\r\nThen I clicked intermediatecertname &gt; view certificate &gt; details &gt; copy to file &gt; next &gt; Base 64 encoded x.509 (cer)\r\n\r\nIt generated intermediatecertname.cer\r\n\r\nThen I imported both certificates to the keystore like this:\r\n\r\n```\r\nkeytool -keystore myservername.jks -import -alias root -trustcacerts -file rootcertname.cer\r\nkeytool -keystore myservername.jks -import -alias intermediate -trustcacerts -file intermediatecertname.cer\r\n```\r\n\r\nThen I ran this command again to list the certificates in the keystore:\r\n\r\n```\r\nkeytool -list -keystore myservername.jks\r\n```\r\n\r\nand got this result:\r\n\r\n```\r\nintermediate, Oct 23, 2023, trustedCertEntry,\r\nCertificate fingerprint (SHA-256): xxxx\r\nroot, Oct 23, 2023, trustedCertEntry,\r\nCertificate fingerprint (SHA-256): xxx\r\nmyservername, Oct 20, 2023, PrivateKeyEntry,\r\nCertificate fingerprint (SHA-256): xxxx\r\n```\r\n\r\nSo it has the privatekey (generated in the first command above) plus the root and intermediate certificates from the Certification Authority.\r\n\r\nCopied myservername.jks to Tomcat \\conf folder.\r\n\r\nTomcat server.xml connector is configured as previously informed.\r\n\t   \r\nBut when I access the application on the browser using https I still get the same error message:\r\n```Not secure - Certificate is not valid```\r\n\r\nIMPORTANT:\r\nNoticed that when I click View Certificate in the Issuer name it says &quot;myservername&quot; (which is the private key alias). Instead, it should display the Certification Authority certificate name.\r\n\r\n","title":"SSL installation on Tomcat - Certificate is not valid","body":"<p>I have a java/angular application installed in a tomcat windows corp server.</p>\n<p>The application is accessed remotely using http just fine.</p>\n<p>Now I need to install ssl to it.</p>\n<p>I already have the certificate from the certification authority and generated the mycert.jks file.</p>\n<p>Then placed that file in the tomcat \\conf folder and configured tomcat server.xml connector like this:</p>\n<pre><code>&lt;Connector port=&quot;xxx&quot; maxHttpHeaderSize=&quot;8192&quot; maxThreads=&quot;100&quot;\n           minSpareThreads=&quot;25&quot; maxSpareThreads=&quot;75&quot;\n           enableLookups=&quot;false&quot; disableUploadTimeout=&quot;true&quot;\n           acceptCount=&quot;100&quot; scheme=&quot;https&quot; secure=&quot;true&quot;\n           SSLEnabled=&quot;true&quot; clientAuth=&quot;false&quot;\n           sslProtocol=&quot;TLS&quot; keyAlias=&quot;myalias&quot;\n           keystoreFile=&quot;conf\\mycert.jks&quot;\n           keystorePass=&quot;mypass&quot; /&gt;\n</code></pre>\n<p>Now when I access the application remotely (<a href=\"https://10.10.100.10/myapp\" rel=\"nofollow noreferrer\">https://10.10.100.10/myapp</a>), the application loads fine in the browser, but I'm getting a <code>Not secure - Certificate is not valid</code> message.</p>\n<p>When I click the <code>Certificate is not valid</code> message it opens the certificate details.</p>\n<p>The information there is correct (Issued To - Common Name, Validity Period...).</p>\n<p>So it means the server can correctly find my certificate.</p>\n<p>The validity period has not expired. So it is ok also.</p>\n<p>The date/time on the server is also correct.</p>\n<p>What else can it be?</p>\n<p>UPDATE</p>\n<p>Adding data seen when &quot;Certificate is not valid&quot; message is clicked on the browser:</p>\n<pre><code>Issued To\nCommon Name (CN)    mycn\nOrganization (O)    myorg\nOrganizational Unit (OU)    &lt;Not Part Of Certificate&gt;\n\nIssued By\nCommon Name (CN)    mycn\nOrganization (O)    myorg\nOrganizational Unit (OU)    &lt;Not Part Of Certificate&gt;\n\nValidity Period\nIssued On   Tuesday, September 26, 2023 at 9:38:18AM\nExpires On  Monday, December 25, 2023 at 9:38:18AM\n\nFingerprints\nSHA-256 Fingerprint XX XX XX XX XX XX...\nSHA-1 Fingerprint   XX XX XX XX XX XX...\n</code></pre>\n<p>UPDATE 2:</p>\n<p>I tried it this other way, but still getting the same error message.</p>\n<p>Generated the .jks using this command:</p>\n<pre><code>keytool -genkey -alias myservername -keyalg RSA -keysize 2048 -keystore myservername.jks -dname &quot;CN=myservername, O=MyOrg, L=, ST=, C=&quot; &amp;&amp; keytool -certreq -alias myservername -file myservername.csr -keystore myservername.jks\n</code></pre>\n<p>It generated a myservername.csr file and a myservername.jks file.</p>\n<p>Then, I ran this command</p>\n<p><code>keytool -list -keystore myservername.jks</code></p>\n<p>and got this result:</p>\n<pre><code>myservername, Oct 20, 2023, PrivateKeyEntry,\nCertificate fingerprint (SHA-256): xxxxxxxx\n</code></pre>\n<p>Then I sent the myservername.csr file to the certificate authority and they sent me back this:</p>\n<pre><code>-----BEGIN CERTIFICATE-----\nxxxxxxx\n-----END CERTIFICATE-----\n</code></pre>\n<p>I pasted that into a myservername.cer file.</p>\n<p>I double click the myservername.cer and went to certificate path tab and I see this:\nrootcertname &gt; intermediatecertname &gt; myservername</p>\n<p>myservername is the alias I choose in the first command above.</p>\n<p>Then I clicked rootcertname &gt; view certificate &gt; details &gt; copy to file &gt; next &gt; Base 64 encoded x.509 (cer)</p>\n<p>It generated rootcertname.cer</p>\n<p>Then I clicked intermediatecertname &gt; view certificate &gt; details &gt; copy to file &gt; next &gt; Base 64 encoded x.509 (cer)</p>\n<p>It generated intermediatecertname.cer</p>\n<p>Then I imported both certificates to the keystore like this:</p>\n<pre><code>keytool -keystore myservername.jks -import -alias root -trustcacerts -file rootcertname.cer\nkeytool -keystore myservername.jks -import -alias intermediate -trustcacerts -file intermediatecertname.cer\n</code></pre>\n<p>Then I ran this command again to list the certificates in the keystore:</p>\n<pre><code>keytool -list -keystore myservername.jks\n</code></pre>\n<p>and got this result:</p>\n<pre><code>intermediate, Oct 23, 2023, trustedCertEntry,\nCertificate fingerprint (SHA-256): xxxx\nroot, Oct 23, 2023, trustedCertEntry,\nCertificate fingerprint (SHA-256): xxx\nmyservername, Oct 20, 2023, PrivateKeyEntry,\nCertificate fingerprint (SHA-256): xxxx\n</code></pre>\n<p>So it has the privatekey (generated in the first command above) plus the root and intermediate certificates from the Certification Authority.</p>\n<p>Copied myservername.jks to Tomcat \\conf folder.</p>\n<p>Tomcat server.xml connector is configured as previously informed.</p>\n<p>But when I access the application on the browser using https I still get the same error message:\n<code>Not secure - Certificate is not valid</code></p>\n<p>IMPORTANT:\nNoticed that when I click View Certificate in the Issuer name it says &quot;myservername&quot; (which is the private key alias). Instead, it should display the Certification Authority certificate name.</p>\n"},{"tags":["java","android","guava","proguard"],"comments":[{"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":0,"creation_date":1328219326,"post_id":9120338,"comment_id":11460541,"body_markdown":"This is more a Proguard question than anything else, I think?","body":"This is more a Proguard question than anything else, I think?"},{"owner":{"account_id":285894,"reputation":176,"user_id":584821,"display_name":"Slinkkay"},"score":0,"creation_date":1328222772,"post_id":9120338,"comment_id":11461565,"body_markdown":"More of a guava question actually. Something in Guava is causing that Class to throw a warning. The answer listed should resolve the issue.","body":"More of a guava question actually. Something in Guava is causing that Class to throw a warning. The answer listed should resolve the issue."},{"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":0,"creation_date":1328222817,"post_id":9120338,"comment_id":11461578,"body_markdown":"Ah.  I was paying more attention to the first part of the issue: &quot;a configuration that will obfuscate and optimize.&quot;","body":"Ah.  I was paying more attention to the first part of the issue: &quot;a configuration that will obfuscate and optimize.&quot;"},{"owner":{"account_id":69527,"reputation":40466,"user_id":202214,"display_name":"Kevin Bourrillion"},"score":1,"creation_date":1328230520,"post_id":9120338,"comment_id":11463322,"body_markdown":"Yeah, two-part questions are quite annoying, but in this case, both parts are about proguard.","body":"Yeah, two-part questions are quite annoying, but in this case, both parts are about proguard."}],"answers":[{"tags":[],"owner":{"account_id":14008,"reputation":3782,"user_id":28465,"display_name":"Chris Povirk"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1328220351,"creation_date":1328220351,"answer_id":9120710,"question_id":9120338,"body_markdown":"[This message][1] suggests the following workaround:\r\n\r\n    -dontwarn com.google.common.collect.MinMaxPriorityQueue \r\n\r\nI&#39;d like to think that Proguard could be changed to make this unnecessary, but we haven&#39;t checked with its owners.\r\n\r\n  [1]: http://groups.google.com/group/guava-discuss/msg/e51f9d9fd17867e9","title":"ProGuard configuration for Guava with obfuscation and optimization","body":"<p><a href=\"http://groups.google.com/group/guava-discuss/msg/e51f9d9fd17867e9\" rel=\"noreferrer\">This message</a> suggests the following workaround:</p>\n\n<pre><code>-dontwarn com.google.common.collect.MinMaxPriorityQueue \n</code></pre>\n\n<p>I'd like to think that Proguard could be changed to make this unnecessary, but we haven't checked with its owners.</p>\n"},{"tags":[],"owner":{"account_id":360372,"reputation":61,"user_id":702340,"display_name":"Martin Buchholz"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1333764061,"creation_date":1333764061,"answer_id":10051128,"question_id":9120338,"body_markdown":"guava&#39;s jar files were produced by a java compiler that (unlike javac) kept extra references to private inlined constants in the constant pool of referencing classes in the same source file, which fails only with proguard 4.7, which appears to optimize away the private constant definitions, without optimizing away the references.  Future guava jar files will not have such constant pool references, but there&#39;s probably a bug in proguard 4.7 that does not manifest with jar files produced by standard javac.","title":"ProGuard configuration for Guava with obfuscation and optimization","body":"<p>guava's jar files were produced by a java compiler that (unlike javac) kept extra references to private inlined constants in the constant pool of referencing classes in the same source file, which fails only with proguard 4.7, which appears to optimize away the private constant definitions, without optimizing away the references.  Future guava jar files will not have such constant pool references, but there's probably a bug in proguard 4.7 that does not manifest with jar files produced by standard javac.</p>\n"},{"tags":[],"owner":{"account_id":22705,"reputation":80387,"user_id":56285,"accept_rate":81,"display_name":"Jonik"},"down_vote_count":0,"up_vote_count":43,"is_accepted":false,"score":43,"last_activity_date":1423387771,"creation_date":1388933983,"answer_id":20935044,"question_id":9120338,"body_markdown":"As of **Guava 17.0**, this is what I needed in ProGuard config: \r\n\r\n    -dontwarn javax.annotation.**\r\n    -dontwarn javax.inject.**\r\n    -dontwarn sun.misc.Unsafe\r\n\r\nOtherwise build fails with warnings like:\r\n\r\n    Warning: com.google.common.base.Absent: \r\n       can&#39;t find referenced class javax.annotation.Nullable\r\n\r\n(That&#39;s because Guava uses annotations [that are not part of Android runtime][1] (android.jar). In this case it&#39;s fine to just mute the warnings.)\r\n\r\nIf you are using [Gradle as the build tool][3], the above `proguard-project.txt` and the following in `build.gradle` produces an optimised and obfuscated APK while using Guava.\r\n\r\n    buildTypes {\r\n        release {\r\n            minifyEnabled true\r\n            proguardFile file(&#39;proguard-project.txt&#39;)\r\n            proguardFile getDefaultProguardFile(&#39;proguard-android-optimize.txt&#39;)\r\n        }\r\n    }\r\n\r\n\r\n----------\r\n\r\n\r\n**Alternatively** you can [include dependecy to jsr305.jar][2] in `build.gradle` dependencies: \r\n\r\n    compile &#39;com.google.code.findbugs:jsr305:2.0.2&#39;\r\n\r\n...with only `-dontwarn sun.misc.Unsafe` in ProGuard config, but I preferred using `-dontwarn` also for the `javax` stuff.\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/7003061/56285\r\n  [2]: https://code.google.com/p/guava-libraries/wiki/UsingProGuardWithGuava\r\n  [3]: http://tools.android.com/tech-docs/new-build-system/user-guide","title":"ProGuard configuration for Guava with obfuscation and optimization","body":"<p>As of <strong>Guava 17.0</strong>, this is what I needed in ProGuard config: </p>\n\n<pre><code>-dontwarn javax.annotation.**\n-dontwarn javax.inject.**\n-dontwarn sun.misc.Unsafe\n</code></pre>\n\n<p>Otherwise build fails with warnings like:</p>\n\n<pre><code>Warning: com.google.common.base.Absent: \n   can't find referenced class javax.annotation.Nullable\n</code></pre>\n\n<p>(That's because Guava uses annotations <a href=\"https://stackoverflow.com/a/7003061/56285\">that are not part of Android runtime</a> (android.jar). In this case it's fine to just mute the warnings.)</p>\n\n<p>If you are using <a href=\"http://tools.android.com/tech-docs/new-build-system/user-guide\" rel=\"noreferrer\">Gradle as the build tool</a>, the above <code>proguard-project.txt</code> and the following in <code>build.gradle</code> produces an optimised and obfuscated APK while using Guava.</p>\n\n<pre><code>buildTypes {\n    release {\n        minifyEnabled true\n        proguardFile file('proguard-project.txt')\n        proguardFile getDefaultProguardFile('proguard-android-optimize.txt')\n    }\n}\n</code></pre>\n\n<hr>\n\n<p><strong>Alternatively</strong> you can <a href=\"https://code.google.com/p/guava-libraries/wiki/UsingProGuardWithGuava\" rel=\"noreferrer\">include dependecy to jsr305.jar</a> in <code>build.gradle</code> dependencies: </p>\n\n<pre><code>compile 'com.google.code.findbugs:jsr305:2.0.2'\n</code></pre>\n\n<p>...with only <code>-dontwarn sun.misc.Unsafe</code> in ProGuard config, but I preferred using <code>-dontwarn</code> also for the <code>javax</code> stuff.</p>\n"},{"tags":[],"owner":{"account_id":163375,"reputation":60245,"user_id":385478,"accept_rate":85,"display_name":"Graham Borland"},"down_vote_count":0,"up_vote_count":18,"is_accepted":false,"score":18,"last_activity_date":1451298536,"creation_date":1451298200,"answer_id":34491696,"question_id":9120338,"body_markdown":"Now that [Guava 19.0 is released][1], I found that I had to add these rules.\r\n\r\n&lt;!-- language: none --&gt;\r\n\r\n    -keep class com.google.j2objc.annotations.** { *; }\r\n    -dontwarn   com.google.j2objc.annotations.**\r\n    -keep class java.lang.ClassValue { *; }\r\n    -dontwarn   java.lang.ClassValue\r\n    -keep class org.codehaus.mojo.animal_sniffer.IgnoreJRERequirement { *; }\r\n    -dontwarn   org.codehaus.mojo.animal_sniffer.IgnoreJRERequirement\r\n\r\n\r\n  [1]: https://github.com/google/guava/wiki/Release19","title":"ProGuard configuration for Guava with obfuscation and optimization","body":"<p>Now that <a href=\"https://github.com/google/guava/wiki/Release19\">Guava 19.0 is released</a>, I found that I had to add these rules.</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>-keep class com.google.j2objc.annotations.** { *; }\n-dontwarn   com.google.j2objc.annotations.**\n-keep class java.lang.ClassValue { *; }\n-dontwarn   java.lang.ClassValue\n-keep class org.codehaus.mojo.animal_sniffer.IgnoreJRERequirement { *; }\n-dontwarn   org.codehaus.mojo.animal_sniffer.IgnoreJRERequirement\n</code></pre>\n"},{"tags":[],"owner":{"account_id":187257,"reputation":13472,"user_id":425183,"accept_rate":55,"display_name":"Ognyan"},"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1492613426,"creation_date":1492613426,"answer_id":43499157,"question_id":9120338,"body_markdown":"For Guava 20.0 you need to add **also**:\r\n\r\n    # Guava 20.0\r\n    -dontwarn com.google.errorprone.annotations.CanIgnoreReturnValue\r\n    -dontwarn com.google.errorprone.annotations.concurrent.LazyInit\r\n    -dontwarn com.google.errorprone.annotations.ForOverride","title":"ProGuard configuration for Guava with obfuscation and optimization","body":"<p>For Guava 20.0 you need to add <strong>also</strong>:</p>\n\n<pre><code># Guava 20.0\n-dontwarn com.google.errorprone.annotations.CanIgnoreReturnValue\n-dontwarn com.google.errorprone.annotations.concurrent.LazyInit\n-dontwarn com.google.errorprone.annotations.ForOverride\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1897044,"reputation":8954,"user_id":1713757,"display_name":"Geng  Jiawen"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1494998896,"creation_date":1494998896,"answer_id":44016312,"question_id":9120338,"body_markdown":"Total proguard rule for guava 20.0. For now the latest [guava 21][1] does not support android.\r\n\r\n    -dontwarn com.google.common.base.**\r\n    -keep class com.google.common.base.** {*;}\r\n    -dontwarn com.google.errorprone.annotations.**\r\n    -keep class com.google.errorprone.annotations.** {*;}\r\n    -dontwarn   com.google.j2objc.annotations.**\r\n    -keep class com.google.j2objc.annotations.** { *; }\r\n    -dontwarn   java.lang.ClassValue\r\n    -keep class java.lang.ClassValue { *; }\r\n    -dontwarn   org.codehaus.mojo.animal_sniffer.IgnoreJRERequirement\r\n    -keep class org.codehaus.mojo.animal_sniffer.IgnoreJRERequirement { *; }\r\n\r\n\r\n  [1]: https://github.com/google/guava/wiki/Release21","title":"ProGuard configuration for Guava with obfuscation and optimization","body":"<p>Total proguard rule for guava 20.0. For now the latest <a href=\"https://github.com/google/guava/wiki/Release21\" rel=\"noreferrer\">guava 21</a> does not support android.</p>\n\n<pre><code>-dontwarn com.google.common.base.**\n-keep class com.google.common.base.** {*;}\n-dontwarn com.google.errorprone.annotations.**\n-keep class com.google.errorprone.annotations.** {*;}\n-dontwarn   com.google.j2objc.annotations.**\n-keep class com.google.j2objc.annotations.** { *; }\n-dontwarn   java.lang.ClassValue\n-keep class java.lang.ClassValue { *; }\n-dontwarn   org.codehaus.mojo.animal_sniffer.IgnoreJRERequirement\n-keep class org.codehaus.mojo.animal_sniffer.IgnoreJRERequirement { *; }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1033857,"reputation":17546,"user_id":1041641,"accept_rate":67,"display_name":"TmTron"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1509278614,"creation_date":1509278614,"answer_id":46999943,"question_id":9120338,"body_markdown":"These proguard-rules worked for me: guava `23.3-android`\r\n\r\n    -dontwarn sun.misc.Unsafe\r\n    -dontwarn com.google.common.collect.MinMaxPriorityQueue\r\n    -dontwarn com.google.common.util.concurrent.FuturesGetChecked**\r\n    -dontwarn javax.lang.model.element.Modifier","title":"ProGuard configuration for Guava with obfuscation and optimization","body":"<p>These proguard-rules worked for me: guava <code>23.3-android</code></p>\n\n<pre><code>-dontwarn sun.misc.Unsafe\n-dontwarn com.google.common.collect.MinMaxPriorityQueue\n-dontwarn com.google.common.util.concurrent.FuturesGetChecked**\n-dontwarn javax.lang.model.element.Modifier\n</code></pre>\n"},{"tags":[],"owner":{"account_id":69410,"reputation":751,"user_id":201939,"accept_rate":75,"display_name":"developer_7"},"down_vote_count":0,"up_vote_count":22,"is_accepted":false,"score":22,"last_activity_date":1511968057,"creation_date":1511968057,"answer_id":47555897,"question_id":9120338,"body_markdown":"I had to add the following lines to my proguard rules file when upgrading from 23.4-android to 23.5-android:\r\n\r\n    -dontwarn afu.org.checkerframework.**\r\n    -dontwarn org.checkerframework.**\r\n\r\nThe proguard warnings that I saw from the update (before adding new rules) are listed below for reference:\r\n\r\n    Warning: afu.org.checkerframework.checker.experimental.tainting_qual.qual.Untainted: can&#39;t find referenced class afu.com.sun.source.tree.Tree$Kind\r\n    Warning: afu.org.checkerframework.checker.experimental.tainting_qual.qual.Untainted: can&#39;t find referenced class afu.com.sun.source.tree.Tree\r\n    Warning: afu.org.checkerframework.checker.experimental.tainting_qual.qual.Untainted: can&#39;t find referenced class afu.com.sun.source.tree.Tree$Kind\r\n    Warning: afu.org.checkerframework.checker.experimental.tainting_qual.qual.Untainted: can&#39;t find referenced class afu.com.sun.source.tree.Tree$Kind\r\n    Warning: afu.org.checkerframework.checker.fenum.qual.FenumBottom: can&#39;t find referenced class afu.com.sun.source.tree.Tree$Kind\r\n    Warning: afu.org.checkerframework.checker.fenum.qual.FenumBottom: can&#39;t find referenced class afu.com.sun.source.tree.Tree\r\n    Warning: afu.org.checkerframework.checker.fenum.qual.FenumBottom: can&#39;t find referenced class afu.com.sun.source.tree.Tree$Kind\r\n    Warning: afu.org.checkerframework.checker.formatter.qual.FormatBottom: can&#39;t find referenced class afu.com.sun.source.tree.Tree$Kind\r\n    Warning: afu.org.checkerframework.checker.formatter.qual.FormatBottom: can&#39;t find referenced class afu.com.sun.source.tree.Tree\r\n    Warning: afu.org.checkerframework.checker.formatter.qual.FormatBottom: can&#39;t find referenced class afu.com.sun.source.tree.Tree$Kind\r\n    Warning: afu.org.checkerframework.checker.guieffect.qual.AlwaysSafe: can&#39;t find referenced class afu.com.sun.source.tree.Tree$Kind\r\n    Warning: afu.org.checkerframework.checker.guieffect.qual.AlwaysSafe: can&#39;t find referenced class afu.com.sun.source.tree.Tree\r\n    Warning: afu.org.checkerframework.checker.guieffect.qual.AlwaysSafe: can&#39;t find referenced class afu.com.sun.source.tree.Tree$Kind\r\n    Warning: afu.org.checkerframework.checker.i18n.qual.Localized: can&#39;t find referenced class afu.com.sun.source.tree.Tree$Kind\r\n    Warning: afu.org.checkerframework.checker.i18n.qual.Localized: can&#39;t find referenced class afu.com.sun.source.tree.Tree\r\n    Warning: afu.org.checkerframework.checker.i18n.qual.Localized: can&#39;t find referenced class afu.com.sun.source.tree.Tree$Kind\r\n    Warning: afu.org.checkerframework.checker.i18n.qual.Localized: can&#39;t find referenced class afu.com.sun.source.tree.Tree$Kind\r\n    Warning: afu.org.checkerframework.checker.i18n.qual.Localized: can&#39;t find referenced class afu.com.sun.source.tree.Tree$Kind\r\n    Warning: afu.org.checkerframework.checker.i18n.qual.Localized: can&#39;t find referenced class afu.com.sun.source.tree.Tree$Kind\r\n    Warning: afu.org.checkerframework.checker.i18n.qual.Localized: can&#39;t find referenced class afu.com.sun.source.tree.Tree$Kind\r\n    Warning: afu.org.checkerframework.checker.i18n.qual.Localized: can&#39;t find referenced class afu.com.sun.source.tree.Tree$Kind\r\n    Warning: afu.org.checkerframework.checker.i18nformatter.qual.I18nFormatBottom: can&#39;t find referenced class afu.com.sun.source.tree.Tree$Kind\r\n    Warning: afu.org.checkerframework.checker.i18nformatter.qual.I18nFormatBottom: can&#39;t find referenced class afu.com.sun.source.tree.Tree\r\n    Warning: afu.org.checkerframework.checker.i18nformatter.qual.I18nFormatBottom: can&#39;t find referenced class afu.com.sun.source.tree.Tree$Kind\r\n    Warning: afu.org.checkerframework.checker.initialization.qual.FBCBottom: can&#39;t find referenced class afu.com.sun.source.tree.Tree$Kind\r\n    Warning: afu.org.checkerframework.checker.initialization.qual.FBCBottom: can&#39;t find referenced class afu.com.sun.source.tree.Tree\r\n    Warning: afu.org.checkerframework.checker.initialization.qual.FBCBottom: can&#39;t find referenced class afu.com.sun.source.tree.Tree$Kind\r\n    Warning: afu.org.checkerframework.checker.interning.qual.Interned: can&#39;t find referenced class afu.org.checkerframework.framework.type.AnnotatedTypeMirror$AnnotatedPrimitiveType\r\n    Warning: afu.org.checkerframework.checker.interning.qual.Interned: can&#39;t find referenced class afu.org.checkerframework.framework.type.AnnotatedTypeMirror\r\n    Warning: afu.org.checkerframework.checker.interning.qual.Interned: can&#39;t find referenced class afu.com.sun.source.tree.LiteralTree\r\n    Warning: afu.org.checkerframework.checker.interning.qual.Interned: can&#39;t find referenced class afu.org.checkerframework.framework.type.AnnotatedTypeMirror$AnnotatedPrimitiveType\r\n    Warning: afu.org.checkerframework.checker.nullness.qual.KeyForBottom: can&#39;t find referenced class afu.com.sun.source.tree.Tree$Kind\r\n    Warning: afu.org.checkerframework.checker.nullness.qual.KeyForBottom: can&#39;t find referenced class afu.com.sun.source.tree.Tree\r\n    Warning: afu.org.checkerframework.checker.nullness.qual.KeyForBottom: can&#39;t find referenced class afu.com.sun.source.tree.Tree$Kind\r\n    Warning: afu.org.checkerframework.checker.nullness.qual.NonNull: can&#39;t find referenced class afu.org.checkerframework.framework.type.AnnotatedTypeMirror$AnnotatedPrimitiveType\r\n    Warning: afu.org.checkerframework.checker.nullness.qual.NonNull: can&#39;t find referenced class afu.org.checkerframework.framework.type.AnnotatedTypeMirror\r\n    Warning: afu.org.checkerframework.checker.nullness.qual.NonNull: can&#39;t find referenced class afu.org.checkerframework.framework.type.AnnotatedTypeMirror$AnnotatedNoType\r\n    Warning: afu.org.checkerframework.checker.nullness.qual.NonNull: can&#39;t find referenced class afu.com.sun.source.tree.Tree$Kind\r\n    Warning: afu.org.checkerframework.checker.nullness.qual.NonNull: can&#39;t find referenced class afu.com.sun.source.tree.Tree\r\n    Warning: afu.org.checkerframework.checker.nullness.qual.NonNull: can&#39;t find referenced class javax.lang.model.type.TypeKind\r\n    Warning: afu.org.checkerframework.checker.nullness.qual.NonNull: can&#39;t find referenced class afu.org.checkerframework.framework.type.AnnotatedTypeMirror$AnnotatedPrimitiveType\r\n    Warning: afu.org.checkerframework.checker.nullness.qual.NonNull: can&#39;t find referenced class afu.org.checkerframework.framework.type.AnnotatedTypeMirror$AnnotatedNoType\r\n    Warning: afu.org.checkerframework.checker.nullness.qual.NonNull: can&#39;t find referenced class afu.com.sun.source.tree.Tree$Kind\r\n    Warning: afu.org.checkerframework.checker.nullness.qual.NonNull: can&#39;t find referenced class afu.com.sun.source.tree.Tree$Kind\r\n    Warning: afu.org.checkerframework.checker.nullness.qual.NonNull: can&#39;t find referenced class afu.com.sun.source.tree.Tree$Kind\r\n    Warning: afu.org.checkerframework.checker.nullness.qual.NonNull: can&#39;t find referenced class afu.com.sun.source.tree.Tree$Kind\r\n    Warning: afu.org.checkerframework.checker.nullness.qual.NonNull: can&#39;t find referenced class afu.com.sun.source.tree.Tree$Kind\r\n    Warning: afu.org.checkerframework.checker.nullness.qual.NonNull: can&#39;t find referenced class afu.com.sun.source.tree.Tree$Kind\r\n    Warning: afu.org.checkerframework.checker.nullness.qual.NonNull: can&#39;t find referenced class afu.com.sun.source.tree.Tree$Kind\r\n    Warning: afu.org.checkerframework.checker.nullness.qual.NonNull: can&#39;t find referenced class afu.com.sun.source.tree.Tree$Kind\r\n    Warning: afu.org.checkerframework.checker.nullness.qual.NonNull: can&#39;t find referenced class afu.com.sun.source.tree.Tree$Kind\r\n    Warning: afu.org.checkerframework.checker.nullness.qual.NonNull: can&#39;t find referenced class afu.com.sun.source.tree.Tree$Kind\r\n    Warning: afu.org.checkerframework.checker.nullness.qual.Nullable: can&#39;t find referenced class afu.com.sun.source.tree.Tree$Kind\r\n    Warning: afu.org.checkerframework.checker.nullness.qual.Nullable: can&#39;t find referenced class afu.com.sun.source.tree.Tree\r\n    Warning: afu.org.checkerframework.checker.nullness.qual.Nullable: can&#39;t find referenced class afu.com.sun.source.tree.Tree$Kind\r\n    Warning: afu.org.checkerframework.checker.oigj.qual.Mutable: can&#39;t find referenced class afu.com.sun.source.tree.Tree$Kind\r\n    Warning: afu.org.checkerframework.checker.oigj.qual.Mutable: can&#39;t find referenced class afu.com.sun.source.tree.Tree\r\n    Warning: afu.org.checkerframework.checker.oigj.qual.Mutable: can&#39;t find referenced class afu.com.sun.source.tree.Tree$Kind\r\n    Warning: afu.org.checkerframework.checker.oigj.qual.Mutable: can&#39;t find referenced class javax.lang.model.type.TypeKind\r\n    Warning: afu.org.checkerframework.checker.oigj.qual.OIGJMutabilityBottom: can&#39;t find referenced class afu.com.sun.source.tree.Tree$Kind\r\n    Warning: afu.org.checkerframework.checker.oigj.qual.OIGJMutabilityBottom: can&#39;t find referenced class afu.com.sun.source.tree.Tree\r\n    Warning: afu.org.checkerframework.checker.oigj.qual.OIGJMutabilityBottom: can&#39;t find referenced class afu.org.checkerframework.framework.type.AnnotatedTypeMirror$AnnotatedPrimitiveType\r\n    Warning: afu.org.checkerframework.checker.oigj.qual.OIGJMutabilityBottom: can&#39;t find referenced class afu.org.checkerframework.framework.type.AnnotatedTypeMirror\r\n    Warning: afu.org.checkerframework.checker.oigj.qual.OIGJMutabilityBottom: can&#39;t find referenced class afu.com.sun.source.tree.Tree$Kind\r\n    Warning: afu.org.checkerframework.checker.oigj.qual.OIGJMutabilityBottom: can&#39;t find referenced class afu.com.sun.source.tree.Tree$Kind\r\n    Warning: afu.org.checkerframework.checker.oigj.qual.OIGJMutabilityBottom: can&#39;t find referenced class afu.com.sun.source.tree.Tree$Kind\r\n    Warning: afu.org.checkerframework.checker.oigj.qual.OIGJMutabilityBottom: can&#39;t find referenced class afu.com.sun.source.tree.Tree$Kind\r\n    Warning: afu.org.checkerframework.checker.oigj.qual.OIGJMutabilityBottom: can&#39;t find referenced class afu.com.sun.source.tree.Tree$Kind\r\n    Warning: afu.org.checkerframework.checker.oigj.qual.OIGJMutabilityBottom: can&#39;t find referenced class afu.com.sun.source.tree.Tree$Kind\r\n    Warning: afu.org.checkerframework.checker.oigj.qual.OIGJMutabilityBottom: can&#39;t find referenced class afu.org.checkerframework.framework.type.AnnotatedTypeMirror$AnnotatedPrimitiveType\r\n    Warning: afu.org.checkerframework.checker.regex.classic.qual.RegexBottom: can&#39;t find referenced class afu.com.sun.source.tree.Tree$Kind\r\n    Warning: afu.org.checkerframework.checker.regex.classic.qual.RegexBottom: can&#39;t find referenced class afu.com.sun.source.tree.Tree\r\n    Warning: afu.org.checkerframework.checker.regex.classic.qual.RegexBottom: can&#39;t find referenced class afu.com.sun.source.tree.Tree$Kind\r\n    Warning: afu.org.checkerframework.checker.signature.qual.SignatureBottom: can&#39;t find referenced class afu.com.sun.source.tree.Tree$Kind\r\n    Warning: afu.org.checkerframework.checker.signature.qual.SignatureBottom: can&#39;t find referenced class afu.com.sun.source.tree.Tree\r\n    Warning: afu.org.checkerframework.checker.signature.qual.SignatureBottom: can&#39;t find referenced class afu.com.sun.source.tree.Tree$Kind\r\n    Warning: afu.org.checkerframework.checker.tainting.classic.qual.Untainted: can&#39;t find referenced class afu.com.sun.source.tree.Tree$Kind\r\n    Warning: afu.org.checkerframework.checker.tainting.classic.qual.Untainted: can&#39;t find referenced class afu.com.sun.source.tree.Tree\r\n    Warning: afu.org.checkerframework.checker.tainting.classic.qual.Untainted: can&#39;t find referenced class afu.com.sun.source.tree.Tree$Kind\r\n    Warning: afu.org.checkerframework.checker.tainting.classic.qual.Untainted: can&#39;t find referenced class afu.com.sun.source.tree.Tree$Kind\r\n    Warning: afu.org.checkerframework.checker.units.qual.UnitsRelations: can&#39;t find referenced class afu.org.checkerframework.checker.units.UnitsRelations\r\n    Warning: afu.org.checkerframework.common.aliasing.qual.MaybeAliased: can&#39;t find referenced class afu.com.sun.source.tree.Tree$Kind\r\n    Warning: afu.org.checkerframework.common.aliasing.qual.MaybeAliased: can&#39;t find referenced class afu.com.sun.source.tree.Tree\r\n    Warning: afu.org.checkerframework.common.aliasing.qual.MaybeAliased: can&#39;t find referenced class afu.com.sun.source.tree.Tree$Kind\r\n    Warning: afu.org.checkerframework.common.reflection.qual.ClassValBottom: can&#39;t find referenced class afu.com.sun.source.tree.Tree$Kind\r\n    Warning: afu.org.checkerframework.common.reflection.qual.ClassValBottom: can&#39;t find referenced class afu.com.sun.source.tree.Tree\r\n    Warning: afu.org.checkerframework.common.reflection.qual.ClassValBottom: can&#39;t find referenced class afu.com.sun.source.tree.Tree$Kind\r\n    Warning: afu.org.checkerframework.common.reflection.qual.MethodValBottom: can&#39;t find referenced class afu.com.sun.source.tree.Tree$Kind\r\n    Warning: afu.org.checkerframework.common.reflection.qual.MethodValBottom: can&#39;t find referenced class afu.com.sun.source.tree.Tree\r\n    Warning: afu.org.checkerframework.common.reflection.qual.MethodValBottom: can&#39;t find referenced class afu.com.sun.source.tree.Tree$Kind\r\n    Warning: afu.org.checkerframework.common.value.qual.BottomVal: can&#39;t find referenced class afu.com.sun.source.tree.Tree$Kind\r\n    Warning: afu.org.checkerframework.common.value.qual.BottomVal: can&#39;t find referenced class afu.com.sun.source.tree.Tree\r\n    Warning: afu.org.checkerframework.common.value.qual.BottomVal: can&#39;t find referenced class afu.com.sun.source.tree.Tree$Kind\r\n    Warning: afu.org.checkerframework.framework.qual.ImplicitFor: can&#39;t find referenced class afu.com.sun.source.tree.Tree$Kind\r\n    Warning: afu.org.checkerframework.framework.qual.ImplicitFor: can&#39;t find referenced class afu.com.sun.source.tree.Tree\r\n    Warning: afu.org.checkerframework.framework.qual.ImplicitFor: can&#39;t find referenced class afu.com.sun.source.tree.Tree$Kind\r\n    Warning: afu.org.checkerframework.framework.qual.ImplicitFor: can&#39;t find referenced class afu.com.sun.source.tree.Tree\r\n    Warning: afu.org.checkerframework.framework.qual.ImplicitFor: can&#39;t find referenced class javax.lang.model.type.TypeKind\r\n    Warning: afu.org.checkerframework.framework.qual.ImplicitFor: can&#39;t find referenced class afu.org.checkerframework.framework.type.AnnotatedTypeMirror\r\n    Warning: org.checkerframework.checker.interning.qual.Interned: can&#39;t find referenced class javax.lang.model.type.TypeKind\r\n    Warning: org.checkerframework.checker.interning.qual.Interned: can&#39;t find referenced class javax.lang.model.type.TypeKind\r\n    Warning: org.checkerframework.checker.interning.qual.Interned: can&#39;t find referenced class javax.lang.model.type.TypeKind\r\n    Warning: org.checkerframework.checker.interning.qual.Interned: can&#39;t find referenced class javax.lang.model.type.TypeKind\r\n    Warning: org.checkerframework.checker.interning.qual.Interned: can&#39;t find referenced class javax.lang.model.type.TypeKind\r\n    Warning: org.checkerframework.checker.interning.qual.Interned: can&#39;t find referenced class javax.lang.model.type.TypeKind\r\n    Warning: org.checkerframework.checker.interning.qual.Interned: can&#39;t find referenced class javax.lang.model.type.TypeKind\r\n    Warning: org.checkerframework.checker.interning.qual.Interned: can&#39;t find referenced class javax.lang.model.type.TypeKind\r\n    Warning: org.checkerframework.checker.lock.qual.GuardedBy: can&#39;t find referenced class javax.lang.model.type.TypeKind\r\n    Warning: org.checkerframework.checker.lock.qual.GuardedBy: can&#39;t find referenced class javax.lang.model.type.TypeKind\r\n    Warning: org.checkerframework.checker.lock.qual.GuardedBy: can&#39;t find referenced class javax.lang.model.type.TypeKind\r\n    Warning: org.checkerframework.checker.lock.qual.GuardedBy: can&#39;t find referenced class javax.lang.model.type.TypeKind\r\n    Warning: org.checkerframework.checker.lock.qual.GuardedBy: can&#39;t find referenced class javax.lang.model.type.TypeKind\r\n    Warning: org.checkerframework.checker.lock.qual.GuardedBy: can&#39;t find referenced class javax.lang.model.type.TypeKind\r\n    Warning: org.checkerframework.checker.lock.qual.GuardedBy: can&#39;t find referenced class javax.lang.model.type.TypeKind\r\n    Warning: org.checkerframework.checker.lock.qual.GuardedBy: can&#39;t find referenced class javax.lang.model.type.TypeKind\r\n    Warning: org.checkerframework.checker.nullness.qual.NonNull: can&#39;t find referenced class javax.lang.model.type.TypeKind\r\n    Warning: org.checkerframework.checker.nullness.qual.NonNull: can&#39;t find referenced class javax.lang.model.type.TypeKind\r\n    Warning: org.checkerframework.checker.nullness.qual.NonNull: can&#39;t find referenced class javax.lang.model.type.TypeKind\r\n    Warning: org.checkerframework.checker.nullness.qual.NonNull: can&#39;t find referenced class javax.lang.model.type.TypeKind\r\n    Warning: org.checkerframework.checker.nullness.qual.NonNull: can&#39;t find referenced class javax.lang.model.type.TypeKind\r\n    Warning: org.checkerframework.checker.nullness.qual.NonNull: can&#39;t find referenced class javax.lang.model.type.TypeKind\r\n    Warning: org.checkerframework.checker.nullness.qual.NonNull: can&#39;t find referenced class javax.lang.model.type.TypeKind\r\n    Warning: org.checkerframework.checker.nullness.qual.NonNull: can&#39;t find referenced class javax.lang.model.type.TypeKind\r\n    Warning: org.checkerframework.checker.nullness.qual.NonNull: can&#39;t find referenced class javax.lang.model.type.TypeKind\r\n    Warning: org.checkerframework.checker.units.qual.UnitsRelations: can&#39;t find referenced class org.checkerframework.checker.units.UnitsRelations\r\n    Warning: org.checkerframework.framework.qual.ImplicitFor: can&#39;t find referenced class javax.lang.model.type.TypeKind\r\n\r\nFor those interested, the full ruleset I have for guava currently is:\r\n\r\n    # Guava (official)\r\n    ## Not yet defined: follow https://github.com/google/guava/issues/2117\r\n    # Guava (unofficial)\r\n    ## https://github.com/google/guava/issues/2926#issuecomment-325455128\r\n    ## https://stackoverflow.com/questions/9120338/proguard-configuration-for-guava-with-obfuscation-and-optimization\r\n    -dontwarn com.google.common.base.**\r\n    -dontwarn com.google.errorprone.annotations.**\r\n    -dontwarn com.google.j2objc.annotations.**\r\n    -dontwarn java.lang.ClassValue\r\n    -dontwarn org.codehaus.mojo.animal_sniffer.IgnoreJRERequirement\r\n    # Added for guava 23.5-android\r\n    -dontwarn afu.org.checkerframework.**\r\n    -dontwarn org.checkerframework.**","title":"ProGuard configuration for Guava with obfuscation and optimization","body":"<p>I had to add the following lines to my proguard rules file when upgrading from 23.4-android to 23.5-android:</p>\n\n<pre><code>-dontwarn afu.org.checkerframework.**\n-dontwarn org.checkerframework.**\n</code></pre>\n\n<p>The proguard warnings that I saw from the update (before adding new rules) are listed below for reference:</p>\n\n<pre><code>Warning: afu.org.checkerframework.checker.experimental.tainting_qual.qual.Untainted: can't find referenced class afu.com.sun.source.tree.Tree$Kind\nWarning: afu.org.checkerframework.checker.experimental.tainting_qual.qual.Untainted: can't find referenced class afu.com.sun.source.tree.Tree\nWarning: afu.org.checkerframework.checker.experimental.tainting_qual.qual.Untainted: can't find referenced class afu.com.sun.source.tree.Tree$Kind\nWarning: afu.org.checkerframework.checker.experimental.tainting_qual.qual.Untainted: can't find referenced class afu.com.sun.source.tree.Tree$Kind\nWarning: afu.org.checkerframework.checker.fenum.qual.FenumBottom: can't find referenced class afu.com.sun.source.tree.Tree$Kind\nWarning: afu.org.checkerframework.checker.fenum.qual.FenumBottom: can't find referenced class afu.com.sun.source.tree.Tree\nWarning: afu.org.checkerframework.checker.fenum.qual.FenumBottom: can't find referenced class afu.com.sun.source.tree.Tree$Kind\nWarning: afu.org.checkerframework.checker.formatter.qual.FormatBottom: can't find referenced class afu.com.sun.source.tree.Tree$Kind\nWarning: afu.org.checkerframework.checker.formatter.qual.FormatBottom: can't find referenced class afu.com.sun.source.tree.Tree\nWarning: afu.org.checkerframework.checker.formatter.qual.FormatBottom: can't find referenced class afu.com.sun.source.tree.Tree$Kind\nWarning: afu.org.checkerframework.checker.guieffect.qual.AlwaysSafe: can't find referenced class afu.com.sun.source.tree.Tree$Kind\nWarning: afu.org.checkerframework.checker.guieffect.qual.AlwaysSafe: can't find referenced class afu.com.sun.source.tree.Tree\nWarning: afu.org.checkerframework.checker.guieffect.qual.AlwaysSafe: can't find referenced class afu.com.sun.source.tree.Tree$Kind\nWarning: afu.org.checkerframework.checker.i18n.qual.Localized: can't find referenced class afu.com.sun.source.tree.Tree$Kind\nWarning: afu.org.checkerframework.checker.i18n.qual.Localized: can't find referenced class afu.com.sun.source.tree.Tree\nWarning: afu.org.checkerframework.checker.i18n.qual.Localized: can't find referenced class afu.com.sun.source.tree.Tree$Kind\nWarning: afu.org.checkerframework.checker.i18n.qual.Localized: can't find referenced class afu.com.sun.source.tree.Tree$Kind\nWarning: afu.org.checkerframework.checker.i18n.qual.Localized: can't find referenced class afu.com.sun.source.tree.Tree$Kind\nWarning: afu.org.checkerframework.checker.i18n.qual.Localized: can't find referenced class afu.com.sun.source.tree.Tree$Kind\nWarning: afu.org.checkerframework.checker.i18n.qual.Localized: can't find referenced class afu.com.sun.source.tree.Tree$Kind\nWarning: afu.org.checkerframework.checker.i18n.qual.Localized: can't find referenced class afu.com.sun.source.tree.Tree$Kind\nWarning: afu.org.checkerframework.checker.i18nformatter.qual.I18nFormatBottom: can't find referenced class afu.com.sun.source.tree.Tree$Kind\nWarning: afu.org.checkerframework.checker.i18nformatter.qual.I18nFormatBottom: can't find referenced class afu.com.sun.source.tree.Tree\nWarning: afu.org.checkerframework.checker.i18nformatter.qual.I18nFormatBottom: can't find referenced class afu.com.sun.source.tree.Tree$Kind\nWarning: afu.org.checkerframework.checker.initialization.qual.FBCBottom: can't find referenced class afu.com.sun.source.tree.Tree$Kind\nWarning: afu.org.checkerframework.checker.initialization.qual.FBCBottom: can't find referenced class afu.com.sun.source.tree.Tree\nWarning: afu.org.checkerframework.checker.initialization.qual.FBCBottom: can't find referenced class afu.com.sun.source.tree.Tree$Kind\nWarning: afu.org.checkerframework.checker.interning.qual.Interned: can't find referenced class afu.org.checkerframework.framework.type.AnnotatedTypeMirror$AnnotatedPrimitiveType\nWarning: afu.org.checkerframework.checker.interning.qual.Interned: can't find referenced class afu.org.checkerframework.framework.type.AnnotatedTypeMirror\nWarning: afu.org.checkerframework.checker.interning.qual.Interned: can't find referenced class afu.com.sun.source.tree.LiteralTree\nWarning: afu.org.checkerframework.checker.interning.qual.Interned: can't find referenced class afu.org.checkerframework.framework.type.AnnotatedTypeMirror$AnnotatedPrimitiveType\nWarning: afu.org.checkerframework.checker.nullness.qual.KeyForBottom: can't find referenced class afu.com.sun.source.tree.Tree$Kind\nWarning: afu.org.checkerframework.checker.nullness.qual.KeyForBottom: can't find referenced class afu.com.sun.source.tree.Tree\nWarning: afu.org.checkerframework.checker.nullness.qual.KeyForBottom: can't find referenced class afu.com.sun.source.tree.Tree$Kind\nWarning: afu.org.checkerframework.checker.nullness.qual.NonNull: can't find referenced class afu.org.checkerframework.framework.type.AnnotatedTypeMirror$AnnotatedPrimitiveType\nWarning: afu.org.checkerframework.checker.nullness.qual.NonNull: can't find referenced class afu.org.checkerframework.framework.type.AnnotatedTypeMirror\nWarning: afu.org.checkerframework.checker.nullness.qual.NonNull: can't find referenced class afu.org.checkerframework.framework.type.AnnotatedTypeMirror$AnnotatedNoType\nWarning: afu.org.checkerframework.checker.nullness.qual.NonNull: can't find referenced class afu.com.sun.source.tree.Tree$Kind\nWarning: afu.org.checkerframework.checker.nullness.qual.NonNull: can't find referenced class afu.com.sun.source.tree.Tree\nWarning: afu.org.checkerframework.checker.nullness.qual.NonNull: can't find referenced class javax.lang.model.type.TypeKind\nWarning: afu.org.checkerframework.checker.nullness.qual.NonNull: can't find referenced class afu.org.checkerframework.framework.type.AnnotatedTypeMirror$AnnotatedPrimitiveType\nWarning: afu.org.checkerframework.checker.nullness.qual.NonNull: can't find referenced class afu.org.checkerframework.framework.type.AnnotatedTypeMirror$AnnotatedNoType\nWarning: afu.org.checkerframework.checker.nullness.qual.NonNull: can't find referenced class afu.com.sun.source.tree.Tree$Kind\nWarning: afu.org.checkerframework.checker.nullness.qual.NonNull: can't find referenced class afu.com.sun.source.tree.Tree$Kind\nWarning: afu.org.checkerframework.checker.nullness.qual.NonNull: can't find referenced class afu.com.sun.source.tree.Tree$Kind\nWarning: afu.org.checkerframework.checker.nullness.qual.NonNull: can't find referenced class afu.com.sun.source.tree.Tree$Kind\nWarning: afu.org.checkerframework.checker.nullness.qual.NonNull: can't find referenced class afu.com.sun.source.tree.Tree$Kind\nWarning: afu.org.checkerframework.checker.nullness.qual.NonNull: can't find referenced class afu.com.sun.source.tree.Tree$Kind\nWarning: afu.org.checkerframework.checker.nullness.qual.NonNull: can't find referenced class afu.com.sun.source.tree.Tree$Kind\nWarning: afu.org.checkerframework.checker.nullness.qual.NonNull: can't find referenced class afu.com.sun.source.tree.Tree$Kind\nWarning: afu.org.checkerframework.checker.nullness.qual.NonNull: can't find referenced class afu.com.sun.source.tree.Tree$Kind\nWarning: afu.org.checkerframework.checker.nullness.qual.NonNull: can't find referenced class afu.com.sun.source.tree.Tree$Kind\nWarning: afu.org.checkerframework.checker.nullness.qual.Nullable: can't find referenced class afu.com.sun.source.tree.Tree$Kind\nWarning: afu.org.checkerframework.checker.nullness.qual.Nullable: can't find referenced class afu.com.sun.source.tree.Tree\nWarning: afu.org.checkerframework.checker.nullness.qual.Nullable: can't find referenced class afu.com.sun.source.tree.Tree$Kind\nWarning: afu.org.checkerframework.checker.oigj.qual.Mutable: can't find referenced class afu.com.sun.source.tree.Tree$Kind\nWarning: afu.org.checkerframework.checker.oigj.qual.Mutable: can't find referenced class afu.com.sun.source.tree.Tree\nWarning: afu.org.checkerframework.checker.oigj.qual.Mutable: can't find referenced class afu.com.sun.source.tree.Tree$Kind\nWarning: afu.org.checkerframework.checker.oigj.qual.Mutable: can't find referenced class javax.lang.model.type.TypeKind\nWarning: afu.org.checkerframework.checker.oigj.qual.OIGJMutabilityBottom: can't find referenced class afu.com.sun.source.tree.Tree$Kind\nWarning: afu.org.checkerframework.checker.oigj.qual.OIGJMutabilityBottom: can't find referenced class afu.com.sun.source.tree.Tree\nWarning: afu.org.checkerframework.checker.oigj.qual.OIGJMutabilityBottom: can't find referenced class afu.org.checkerframework.framework.type.AnnotatedTypeMirror$AnnotatedPrimitiveType\nWarning: afu.org.checkerframework.checker.oigj.qual.OIGJMutabilityBottom: can't find referenced class afu.org.checkerframework.framework.type.AnnotatedTypeMirror\nWarning: afu.org.checkerframework.checker.oigj.qual.OIGJMutabilityBottom: can't find referenced class afu.com.sun.source.tree.Tree$Kind\nWarning: afu.org.checkerframework.checker.oigj.qual.OIGJMutabilityBottom: can't find referenced class afu.com.sun.source.tree.Tree$Kind\nWarning: afu.org.checkerframework.checker.oigj.qual.OIGJMutabilityBottom: can't find referenced class afu.com.sun.source.tree.Tree$Kind\nWarning: afu.org.checkerframework.checker.oigj.qual.OIGJMutabilityBottom: can't find referenced class afu.com.sun.source.tree.Tree$Kind\nWarning: afu.org.checkerframework.checker.oigj.qual.OIGJMutabilityBottom: can't find referenced class afu.com.sun.source.tree.Tree$Kind\nWarning: afu.org.checkerframework.checker.oigj.qual.OIGJMutabilityBottom: can't find referenced class afu.com.sun.source.tree.Tree$Kind\nWarning: afu.org.checkerframework.checker.oigj.qual.OIGJMutabilityBottom: can't find referenced class afu.org.checkerframework.framework.type.AnnotatedTypeMirror$AnnotatedPrimitiveType\nWarning: afu.org.checkerframework.checker.regex.classic.qual.RegexBottom: can't find referenced class afu.com.sun.source.tree.Tree$Kind\nWarning: afu.org.checkerframework.checker.regex.classic.qual.RegexBottom: can't find referenced class afu.com.sun.source.tree.Tree\nWarning: afu.org.checkerframework.checker.regex.classic.qual.RegexBottom: can't find referenced class afu.com.sun.source.tree.Tree$Kind\nWarning: afu.org.checkerframework.checker.signature.qual.SignatureBottom: can't find referenced class afu.com.sun.source.tree.Tree$Kind\nWarning: afu.org.checkerframework.checker.signature.qual.SignatureBottom: can't find referenced class afu.com.sun.source.tree.Tree\nWarning: afu.org.checkerframework.checker.signature.qual.SignatureBottom: can't find referenced class afu.com.sun.source.tree.Tree$Kind\nWarning: afu.org.checkerframework.checker.tainting.classic.qual.Untainted: can't find referenced class afu.com.sun.source.tree.Tree$Kind\nWarning: afu.org.checkerframework.checker.tainting.classic.qual.Untainted: can't find referenced class afu.com.sun.source.tree.Tree\nWarning: afu.org.checkerframework.checker.tainting.classic.qual.Untainted: can't find referenced class afu.com.sun.source.tree.Tree$Kind\nWarning: afu.org.checkerframework.checker.tainting.classic.qual.Untainted: can't find referenced class afu.com.sun.source.tree.Tree$Kind\nWarning: afu.org.checkerframework.checker.units.qual.UnitsRelations: can't find referenced class afu.org.checkerframework.checker.units.UnitsRelations\nWarning: afu.org.checkerframework.common.aliasing.qual.MaybeAliased: can't find referenced class afu.com.sun.source.tree.Tree$Kind\nWarning: afu.org.checkerframework.common.aliasing.qual.MaybeAliased: can't find referenced class afu.com.sun.source.tree.Tree\nWarning: afu.org.checkerframework.common.aliasing.qual.MaybeAliased: can't find referenced class afu.com.sun.source.tree.Tree$Kind\nWarning: afu.org.checkerframework.common.reflection.qual.ClassValBottom: can't find referenced class afu.com.sun.source.tree.Tree$Kind\nWarning: afu.org.checkerframework.common.reflection.qual.ClassValBottom: can't find referenced class afu.com.sun.source.tree.Tree\nWarning: afu.org.checkerframework.common.reflection.qual.ClassValBottom: can't find referenced class afu.com.sun.source.tree.Tree$Kind\nWarning: afu.org.checkerframework.common.reflection.qual.MethodValBottom: can't find referenced class afu.com.sun.source.tree.Tree$Kind\nWarning: afu.org.checkerframework.common.reflection.qual.MethodValBottom: can't find referenced class afu.com.sun.source.tree.Tree\nWarning: afu.org.checkerframework.common.reflection.qual.MethodValBottom: can't find referenced class afu.com.sun.source.tree.Tree$Kind\nWarning: afu.org.checkerframework.common.value.qual.BottomVal: can't find referenced class afu.com.sun.source.tree.Tree$Kind\nWarning: afu.org.checkerframework.common.value.qual.BottomVal: can't find referenced class afu.com.sun.source.tree.Tree\nWarning: afu.org.checkerframework.common.value.qual.BottomVal: can't find referenced class afu.com.sun.source.tree.Tree$Kind\nWarning: afu.org.checkerframework.framework.qual.ImplicitFor: can't find referenced class afu.com.sun.source.tree.Tree$Kind\nWarning: afu.org.checkerframework.framework.qual.ImplicitFor: can't find referenced class afu.com.sun.source.tree.Tree\nWarning: afu.org.checkerframework.framework.qual.ImplicitFor: can't find referenced class afu.com.sun.source.tree.Tree$Kind\nWarning: afu.org.checkerframework.framework.qual.ImplicitFor: can't find referenced class afu.com.sun.source.tree.Tree\nWarning: afu.org.checkerframework.framework.qual.ImplicitFor: can't find referenced class javax.lang.model.type.TypeKind\nWarning: afu.org.checkerframework.framework.qual.ImplicitFor: can't find referenced class afu.org.checkerframework.framework.type.AnnotatedTypeMirror\nWarning: org.checkerframework.checker.interning.qual.Interned: can't find referenced class javax.lang.model.type.TypeKind\nWarning: org.checkerframework.checker.interning.qual.Interned: can't find referenced class javax.lang.model.type.TypeKind\nWarning: org.checkerframework.checker.interning.qual.Interned: can't find referenced class javax.lang.model.type.TypeKind\nWarning: org.checkerframework.checker.interning.qual.Interned: can't find referenced class javax.lang.model.type.TypeKind\nWarning: org.checkerframework.checker.interning.qual.Interned: can't find referenced class javax.lang.model.type.TypeKind\nWarning: org.checkerframework.checker.interning.qual.Interned: can't find referenced class javax.lang.model.type.TypeKind\nWarning: org.checkerframework.checker.interning.qual.Interned: can't find referenced class javax.lang.model.type.TypeKind\nWarning: org.checkerframework.checker.interning.qual.Interned: can't find referenced class javax.lang.model.type.TypeKind\nWarning: org.checkerframework.checker.lock.qual.GuardedBy: can't find referenced class javax.lang.model.type.TypeKind\nWarning: org.checkerframework.checker.lock.qual.GuardedBy: can't find referenced class javax.lang.model.type.TypeKind\nWarning: org.checkerframework.checker.lock.qual.GuardedBy: can't find referenced class javax.lang.model.type.TypeKind\nWarning: org.checkerframework.checker.lock.qual.GuardedBy: can't find referenced class javax.lang.model.type.TypeKind\nWarning: org.checkerframework.checker.lock.qual.GuardedBy: can't find referenced class javax.lang.model.type.TypeKind\nWarning: org.checkerframework.checker.lock.qual.GuardedBy: can't find referenced class javax.lang.model.type.TypeKind\nWarning: org.checkerframework.checker.lock.qual.GuardedBy: can't find referenced class javax.lang.model.type.TypeKind\nWarning: org.checkerframework.checker.lock.qual.GuardedBy: can't find referenced class javax.lang.model.type.TypeKind\nWarning: org.checkerframework.checker.nullness.qual.NonNull: can't find referenced class javax.lang.model.type.TypeKind\nWarning: org.checkerframework.checker.nullness.qual.NonNull: can't find referenced class javax.lang.model.type.TypeKind\nWarning: org.checkerframework.checker.nullness.qual.NonNull: can't find referenced class javax.lang.model.type.TypeKind\nWarning: org.checkerframework.checker.nullness.qual.NonNull: can't find referenced class javax.lang.model.type.TypeKind\nWarning: org.checkerframework.checker.nullness.qual.NonNull: can't find referenced class javax.lang.model.type.TypeKind\nWarning: org.checkerframework.checker.nullness.qual.NonNull: can't find referenced class javax.lang.model.type.TypeKind\nWarning: org.checkerframework.checker.nullness.qual.NonNull: can't find referenced class javax.lang.model.type.TypeKind\nWarning: org.checkerframework.checker.nullness.qual.NonNull: can't find referenced class javax.lang.model.type.TypeKind\nWarning: org.checkerframework.checker.nullness.qual.NonNull: can't find referenced class javax.lang.model.type.TypeKind\nWarning: org.checkerframework.checker.units.qual.UnitsRelations: can't find referenced class org.checkerframework.checker.units.UnitsRelations\nWarning: org.checkerframework.framework.qual.ImplicitFor: can't find referenced class javax.lang.model.type.TypeKind\n</code></pre>\n\n<p>For those interested, the full ruleset I have for guava currently is:</p>\n\n<pre><code># Guava (official)\n## Not yet defined: follow https://github.com/google/guava/issues/2117\n# Guava (unofficial)\n## https://github.com/google/guava/issues/2926#issuecomment-325455128\n## https://stackoverflow.com/questions/9120338/proguard-configuration-for-guava-with-obfuscation-and-optimization\n-dontwarn com.google.common.base.**\n-dontwarn com.google.errorprone.annotations.**\n-dontwarn com.google.j2objc.annotations.**\n-dontwarn java.lang.ClassValue\n-dontwarn org.codehaus.mojo.animal_sniffer.IgnoreJRERequirement\n# Added for guava 23.5-android\n-dontwarn afu.org.checkerframework.**\n-dontwarn org.checkerframework.**\n</code></pre>\n"},{"tags":[],"owner":{"account_id":145567,"reputation":17881,"user_id":355456,"accept_rate":70,"display_name":"Hong"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1512581868,"creation_date":1512581868,"answer_id":47680287,"question_id":9120338,"body_markdown":"I just want to share what is actually working now for my app with the following in build.gradle:\r\n\r\n&gt; compile &#39;com.google.guava:guava:23.5-android&#39;\r\n\r\nThe following is in proguard-project.txt to deal with Guava.  It is essentially the combination of TimTron&#39;s answer and develper_7&#39;s tip:\r\n\r\n    -dontwarn sun.misc.Unsafe\r\n    -dontwarn com.google.common.collect.MinMaxPriorityQueue\r\n    -dontwarn com.google.common.util.concurrent.FuturesGetChecked**\r\n    -dontwarn javax.lang.model.element.Modifier\r\n    -dontwarn afu.org.checkerframework.**\r\n    -dontwarn org.checkerframework.**","title":"ProGuard configuration for Guava with obfuscation and optimization","body":"<p>I just want to share what is actually working now for my app with the following in build.gradle:</p>\n\n<blockquote>\n  <p>compile 'com.google.guava:guava:23.5-android'</p>\n</blockquote>\n\n<p>The following is in proguard-project.txt to deal with Guava.  It is essentially the combination of TimTron's answer and develper_7's tip:</p>\n\n<pre><code>-dontwarn sun.misc.Unsafe\n-dontwarn com.google.common.collect.MinMaxPriorityQueue\n-dontwarn com.google.common.util.concurrent.FuturesGetChecked**\n-dontwarn javax.lang.model.element.Modifier\n-dontwarn afu.org.checkerframework.**\n-dontwarn org.checkerframework.**\n</code></pre>\n"},{"tags":[],"owner":{"account_id":108317,"reputation":7165,"user_id":287575,"accept_rate":68,"display_name":"ashughes"},"down_vote_count":0,"up_vote_count":21,"is_accepted":false,"score":21,"last_activity_date":1698104903,"creation_date":1526329216,"answer_id":50338429,"question_id":9120338,"body_markdown":"**Edit (2023.10.23):** Looks like Guava started including Proguard configurations in version [32.0.0][1] (related [commit][2])!\r\n\r\n---\r\n\r\nOne of the engineers who built R8 (Stephan Herhut) listed the following rules for the latest Guava (`25.0-android`) in [this session from Google I/O 2018][3]:\r\n\r\n    -dontwarn afu.org.checkerframework.**\r\n    -dontwarn org.checkerframework.**\r\n    -dontwarn com.google.errorprone.**\r\n    -dontwarn sun.misc.Unsafe\r\n    -dontwarn java.lang.ClassValue\r\n\r\nThe video also includes a short explanation of the rules (first 3 are static analysis annotation frameworks, last 2 are unavailable classes on Android which are protected by runtime checks in Guava).\r\n\r\nI spoke with Stephan after the session and he said these will hopefully be included in the Guava documentation in the future or better yet in the `consumerProguardFiles` of future Guava releases. Here&#39;s hoping!\r\n\r\n\r\n  [1]: https://github.com/google/guava/releases/tag/v32.0.0\r\n  [2]: https://github.com/google/guava/commit/aeba1e1b2d7f34bc972c74c9eccb1b2826e88514\r\n  [3]: https://youtu.be/x9T5EYE-QWQ?t=21m50s","title":"ProGuard configuration for Guava with obfuscation and optimization","body":"<p><strong>Edit (2023.10.23):</strong> Looks like Guava started including Proguard configurations in version <a href=\"https://github.com/google/guava/releases/tag/v32.0.0\" rel=\"nofollow noreferrer\">32.0.0</a> (related <a href=\"https://github.com/google/guava/commit/aeba1e1b2d7f34bc972c74c9eccb1b2826e88514\" rel=\"nofollow noreferrer\">commit</a>)!</p>\n<hr />\n<p>One of the engineers who built R8 (Stephan Herhut) listed the following rules for the latest Guava (<code>25.0-android</code>) in <a href=\"https://youtu.be/x9T5EYE-QWQ?t=21m50s\" rel=\"nofollow noreferrer\">this session from Google I/O 2018</a>:</p>\n<pre><code>-dontwarn afu.org.checkerframework.**\n-dontwarn org.checkerframework.**\n-dontwarn com.google.errorprone.**\n-dontwarn sun.misc.Unsafe\n-dontwarn java.lang.ClassValue\n</code></pre>\n<p>The video also includes a short explanation of the rules (first 3 are static analysis annotation frameworks, last 2 are unavailable classes on Android which are protected by runtime checks in Guava).</p>\n<p>I spoke with Stephan after the session and he said these will hopefully be included in the Guava documentation in the future or better yet in the <code>consumerProguardFiles</code> of future Guava releases. Here's hoping!</p>\n"}],"owner":{"account_id":1185834,"reputation":1549,"user_id":1159819,"accept_rate":62,"display_name":"user1159819"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":18806,"favorite_count":0,"down_vote_count":0,"up_vote_count":38,"answer_count":10,"score":38,"last_activity_date":1698104903,"creation_date":1328218402,"question_id":9120338,"body_markdown":"Looking for a ProGuard configuration for Guava that will obfuscate and optimize, as the default one that is provided on the website does not. \r\n\r\nNot only that I cannot get it to export my apk, I keep getting:\r\n\r\n    Warning: com.google.common.collect.MinMaxPriorityQueue: \r\n        can&#39;t find referenced field &#39;int UNSET_EXPECTED_SIZE&#39; in class  \r\n        com.google.common.collect.MinMaxPriorityQueue$Builder\r\n    You should check if you need to specify additional program jars.","title":"ProGuard configuration for Guava with obfuscation and optimization","body":"<p>Looking for a ProGuard configuration for Guava that will obfuscate and optimize, as the default one that is provided on the website does not. </p>\n\n<p>Not only that I cannot get it to export my apk, I keep getting:</p>\n\n<pre><code>Warning: com.google.common.collect.MinMaxPriorityQueue: \n    can't find referenced field 'int UNSET_EXPECTED_SIZE' in class  \n    com.google.common.collect.MinMaxPriorityQueue$Builder\nYou should check if you need to specify additional program jars.\n</code></pre>\n"},{"tags":["java","selenium","selenium-webdriver","geckodriver"],"comments":[{"owner":{"account_id":8070470,"reputation":15179,"user_id":6083423,"accept_rate":82,"display_name":"Life is complex"},"score":2,"creation_date":1622059493,"post_id":67561490,"comment_id":119684751,"body_markdown":"After doing a lot of code and issue reviews for *Geckodriver,* *Firefox* and *Selenium*.  I have determined that the effort to do what you need is difficult.  You could edit the source code *capabilities.rs* to remove the *.temp_dir* call, but it seems that you might have to change code in *Firefox* also to prevent the .temp_dir* from being created.   I also noted that *Selenium* is moving away from copying and using profiles in ver 4, which is in beta.  So fixing the issue in the current version might require more effort when the new versions are released.","body":"After doing a lot of code and issue reviews for <i>Geckodriver,</i> <i>Firefox</i> and <i>Selenium</i>.  I have determined that the effort to do what you need is difficult.  You could edit the source code <i>capabilities.rs</i> to remove the <i>.temp_dir</i> call, but it seems that you might have to change code in <i>Firefox</i> also to prevent the .temp_dir* from being created.   I also noted that <i>Selenium</i> is moving away from copying and using profiles in ver 4, which is in beta.  So fixing the issue in the current version might require more effort when the new versions are released."},{"owner":{"account_id":8070470,"reputation":15179,"user_id":6083423,"accept_rate":82,"display_name":"Life is complex"},"score":1,"creation_date":1622059859,"post_id":67561490,"comment_id":119684892,"body_markdown":"I also noted that multiple users have complained to *Selenium* about the issue that you&#39;re trying to resolve.  The overseers at  *Selenium* either tell the users to contact *Mozilla* for support or tell them to try ver 4, which doesn&#39;t use profiles.  I have found that there needs to better documentation on setting preferences under *Selenium* for *Firefox*, *Chrome* and *Edge*.","body":"I also noted that multiple users have complained to <i>Selenium</i> about the issue that you&#39;re trying to resolve.  The overseers at  <i>Selenium</i> either tell the users to contact <i>Mozilla</i> for support or tell them to try ver 4, which doesn&#39;t use profiles.  I have found that there needs to better documentation on setting preferences under <i>Selenium</i> for <i>Firefox</i>, <i>Chrome</i> and <i>Edge</i>."},{"owner":{"account_id":8070470,"reputation":15179,"user_id":6083423,"accept_rate":82,"display_name":"Life is complex"},"score":1,"creation_date":1622060233,"post_id":67561490,"comment_id":119685005,"body_markdown":"My best recommendation would be to either move to *Selenium ver 4 (BETA)*, which doesn&#39;t use profiles. (I&#39;m unsure about the *temp_dir* thing in that code base) OR downgrade your *Geckodriver*, *Firefox* and *Selenium* to what worked before you upgraded.","body":"My best recommendation would be to either move to <i>Selenium ver 4 (BETA)</i>, which doesn&#39;t use profiles. (I&#39;m unsure about the <i>temp_dir</i> thing in that code base) OR downgrade your <i>Geckodriver</i>, <i>Firefox</i> and <i>Selenium</i> to what worked before you upgraded."},{"owner":{"account_id":15164959,"reputation":436,"user_id":10946747,"display_name":"alpha1"},"score":0,"creation_date":1622072453,"post_id":67561490,"comment_id":119688252,"body_markdown":"@Lifeiscomplex thanks so much for your effort! The thing about Selenium version 4 is that I think it was in beta since 2018 so I would be concerned whether we we&#39;ll see official release any time in near future. Regarding profiles being depreciated in Selenium 4 that is interesting and I would love to learn more. I could not find official documentation on this specific feature and whether there is any copying of original profiles in v4. Downgrading Selenium is not an option because a big chunk of the code is written around version 3 that if I downgrade it will cause much more issues. Thanks!","body":"@Lifeiscomplex thanks so much for your effort! The thing about Selenium version 4 is that I think it was in beta since 2018 so I would be concerned whether we we&#39;ll see official release any time in near future. Regarding profiles being depreciated in Selenium 4 that is interesting and I would love to learn more. I could not find official documentation on this specific feature and whether there is any copying of original profiles in v4. Downgrading Selenium is not an option because a big chunk of the code is written around version 3 that if I downgrade it will cause much more issues. Thanks!"},{"owner":{"account_id":8070470,"reputation":15179,"user_id":6083423,"accept_rate":82,"display_name":"Life is complex"},"score":0,"creation_date":1622075674,"post_id":67561490,"comment_id":119688724,"body_markdown":"So I assume that your issues happened when you upgraded either *Geckodriver* or *Firefox*.  I also assume that you cannot downgrade either of these applications to their previous state.   Concerning *Selenium 4* the release notes for the latest have this - (1) Only give deprecation warning if Profile is being used in options (2) Deprecate using a Firefox profile in Options.  I cannot find anything on creating the temp_dir in the release notes.","body":"So I assume that your issues happened when you upgraded either <i>Geckodriver</i> or <i>Firefox</i>.  I also assume that you cannot downgrade either of these applications to their previous state.   Concerning <i>Selenium 4</i> the release notes for the latest have this - (1) Only give deprecation warning if Profile is being used in options (2) Deprecate using a Firefox profile in Options.  I cannot find anything on creating the temp_dir in the release notes."}],"answers":[{"tags":[],"owner":{"account_id":18134642,"reputation":19,"user_id":13189348,"display_name":"Sravan Chaitanya Kurivella"},"down_vote_count":2,"up_vote_count":2,"is_accepted":false,"score":0,"last_activity_date":1621444068,"creation_date":1621439387,"answer_id":67606625,"question_id":67561490,"body_markdown":"The new driver by default creates a new profile if no options are set. To use a existing profile, one way to do this is to set the system property `webdriver.firefox.profile` before creating the firefox driver. A small code snippet that can create a firefox driver (given you have locations for geckodriver, and the firefox profile):\r\n\r\n\r\n    System.setProperty(&quot;webdriver.gecko.driver&quot;,&quot;path_to_gecko_driver&quot;);\r\n    System.setProperty(&quot;webdriver.firefox.profile&quot;, &quot;path_to_firefox_profile&quot;);\r\n    WebDriver driver = new FirefoxDriver();\r\n\r\nYou could even set these system properties using the env. variables and skip defining them everywhere. \r\n\r\nAnother way to do this is to use the FirefoxOptions class which allows you to configure a lot of options. To start with, take a look at `org.openqa.selenium.firefox.FirefoxDriver` and `org.openqa.selenium.firefox.FirefoxOptions`. A small example:\r\n\r\n    FirefoxOptions options = new FirefoxOptions();\r\n    options.setProfile(new FirefoxProfile(new File(&quot;path_to_your_profile&quot;)));\r\n    WebDriver driver = new FirefoxDriver(options);\r\n\r\n\r\nHope this is helpful.\r\n\r\n","title":"How to Prevent Selenium 3.0 (Geckodriver) from Creating Temporary Firefox Profiles?","body":"<p>The new driver by default creates a new profile if no options are set. To use a existing profile, one way to do this is to set the system property <code>webdriver.firefox.profile</code> before creating the firefox driver. A small code snippet that can create a firefox driver (given you have locations for geckodriver, and the firefox profile):</p>\n<pre><code>System.setProperty(&quot;webdriver.gecko.driver&quot;,&quot;path_to_gecko_driver&quot;);\nSystem.setProperty(&quot;webdriver.firefox.profile&quot;, &quot;path_to_firefox_profile&quot;);\nWebDriver driver = new FirefoxDriver();\n</code></pre>\n<p>You could even set these system properties using the env. variables and skip defining them everywhere.</p>\n<p>Another way to do this is to use the FirefoxOptions class which allows you to configure a lot of options. To start with, take a look at <code>org.openqa.selenium.firefox.FirefoxDriver</code> and <code>org.openqa.selenium.firefox.FirefoxOptions</code>. A small example:</p>\n<pre><code>FirefoxOptions options = new FirefoxOptions();\noptions.setProfile(new FirefoxProfile(new File(&quot;path_to_your_profile&quot;)));\nWebDriver driver = new FirefoxDriver(options);\n</code></pre>\n<p>Hope this is helpful.</p>\n"},{"tags":[],"owner":{"account_id":19744724,"reputation":624,"user_id":14457440,"display_name":"Arjun"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1691526342,"creation_date":1621517920,"answer_id":67621480,"question_id":67561490,"body_markdown":"You can create firefox [profile][1] which will be clean and name it as **SELENIUM**\r\n\r\nSo When initializing the Webdriver get the profile which you have already created through the code, so that it wont create any new temp profiles all the time.\r\n\r\n \r\n\r\n    ProfilesIni allProfiles = new ProfilesIni();\r\n    FirefoxProfile desiredProfile = allProfiles.getProfile(&quot;SELENIUM&quot;);\r\n    WebDriver driver = new FirefoxDriver(desiredProfile);\r\n\r\nThat way, you assure that this profile will be used anytime you do the tests.\r\n\r\n-Arjun\r\n\r\n\r\n  [1]: http://kb.mozillazine.org/Creating_a_new_Firefox_profile_on_Windows","title":"How to Prevent Selenium 3.0 (Geckodriver) from Creating Temporary Firefox Profiles?","body":"<p>You can create firefox <a href=\"http://kb.mozillazine.org/Creating_a_new_Firefox_profile_on_Windows\" rel=\"nofollow noreferrer\">profile</a> which will be clean and name it as <strong>SELENIUM</strong></p>\n<p>So When initializing the Webdriver get the profile which you have already created through the code, so that it wont create any new temp profiles all the time.</p>\n<pre><code>ProfilesIni allProfiles = new ProfilesIni();\nFirefoxProfile desiredProfile = allProfiles.getProfile(&quot;SELENIUM&quot;);\nWebDriver driver = new FirefoxDriver(desiredProfile);\n</code></pre>\n<p>That way, you assure that this profile will be used anytime you do the tests.</p>\n<p>-Arjun</p>\n"},{"tags":[],"owner":{"account_id":21200314,"reputation":220,"user_id":15591112,"display_name":"Vaibhav Atray"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1621750786,"creation_date":1621750786,"answer_id":67656756,"question_id":67561490,"body_markdown":"You can handle this by using -- \r\n\r\n        FirefoxProfile profile = new FirefoxProfile(new File(&quot;D:\\\\Selenium Profile...&quot;));                  \r\n\r\n        WebDriver driver = new FirefoxDriver(profile);\r\n\r\nThere is one more option but it inherits all the cookies, cache contents, etc. of the previous uses of the profile let’s see how it will be --\r\n\r\n        System.setProperty(&quot;webdriver.firefox.profile&quot;, &quot;MySeleniumProfile&quot;);\r\n\r\n        WebDriver driver = new FirefoxDriver(...);\r\n\r\nHope this answers your question in short.","title":"How to Prevent Selenium 3.0 (Geckodriver) from Creating Temporary Firefox Profiles?","body":"<p>You can handle this by using --</p>\n<pre><code>    FirefoxProfile profile = new FirefoxProfile(new File(&quot;D:\\\\Selenium Profile...&quot;));                  \n\n    WebDriver driver = new FirefoxDriver(profile);\n</code></pre>\n<p>There is one more option but it inherits all the cookies, cache contents, etc. of the previous uses of the profile let’s see how it will be --</p>\n<pre><code>    System.setProperty(&quot;webdriver.firefox.profile&quot;, &quot;MySeleniumProfile&quot;);\n\n    WebDriver driver = new FirefoxDriver(...);\n</code></pre>\n<p>Hope this answers your question in short.</p>\n"},{"tags":[],"owner":{"account_id":8070470,"reputation":15179,"user_id":6083423,"accept_rate":82,"display_name":"Life is complex"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1691526276,"creation_date":1621990107,"answer_id":67697236,"question_id":67561490,"body_markdown":"## UPDATED POST 05-30-2021 ##\r\n\r\n----------\r\n**This is the hardest question that I have every tried to answer on Stack Overflow.  Because it involved the interactions of several code bases written in multiple languages (Java, Rust and C++). This complexity made the question potentially unsolvable.**\r\n\r\n***My last crack at this likely unsolvable question:***\r\n\r\nWithin the code in your question you are modifying the file *user.js* This file is still used by *Selenium*. \r\n\r\n```\r\npublic FirefoxProfile() {\r\n    this(null);\r\n  }\r\n\r\n  /**\r\n   * Constructs a firefox profile from an existing profile directory.\r\n   * &lt;p&gt;\r\n   * Users who need this functionality should consider using a named profile.\r\n   *\r\n   * @param profileDir The profile directory to use as a model.\r\n   */\r\n  public FirefoxProfile(File profileDir) {\r\n    this(null, profileDir);\r\n  }\r\n\r\n  @Beta\r\n  protected FirefoxProfile(Reader defaultsReader, File profileDir) {\r\n    if (defaultsReader == null) {\r\n      defaultsReader = onlyOverrideThisIfYouKnowWhatYouAreDoing();\r\n    }\r\n\r\n    additionalPrefs = new Preferences(defaultsReader);\r\n\r\n    model = profileDir;\r\n    verifyModel(model);\r\n\r\n    File prefsInModel = new File(model, &quot;user.js&quot;);\r\n    if (prefsInModel.exists()) {\r\n      StringReader reader = new StringReader(&quot;{\\&quot;frozen\\&quot;: {}, \\&quot;mutable\\&quot;: {}}&quot;);\r\n      Preferences existingPrefs = new Preferences(reader, prefsInModel);\r\n      acceptUntrustedCerts = getBooleanPreference(existingPrefs, ACCEPT_UNTRUSTED_CERTS_PREF, true);\r\n      untrustedCertIssuer = getBooleanPreference(existingPrefs, ASSUME_UNTRUSTED_ISSUER_PREF, true);\r\n      existingPrefs.addTo(additionalPrefs);\r\n    } else {\r\n      acceptUntrustedCerts = true;\r\n      untrustedCertIssuer = true;\r\n    }\r\n\r\n    // This is not entirely correct but this is not stored in the profile\r\n    // so for now will always be set to false.\r\n    loadNoFocusLib = false;\r\n\r\n    try {\r\n      defaultsReader.close();\r\n    } catch (IOException e) {\r\n      throw new WebDriverException(e);\r\n    }\r\n  }\r\n```\r\n\r\nSo in theory you should be able to modify *capabilities.rs* in the *geckodriver* source code.  That file contains the *temp_dir*. \r\n\r\nAs I stated this in only a theory, because when I looked at the Firefox source, which has *temp_dir* spread throughout the code base.\r\n\r\n\r\n## ORIGINAL POST 05-26-2021 ##\r\n\r\n----------\r\n\r\nI&#39;m not sure that you can prevent Selenium from creating a temporary Firefox Profile.  \r\n\r\nFrom the [gecko documents][1]: \r\n\r\n&quot;Profiles are created in the systems temporary folder. This is also where the encoded profile is extracted when profile is provided. ***By default geckodriver will create a new profile in this location***.&quot;\r\n\r\n\r\nThe only solution that I see at the moment would require you modify the Geckodriver source files to prevent the creation of temporary folders/profiles.\r\n\r\nI&#39;m currently looking at the source.  These files might be the correct ones, but I need to look at the source more:\r\n\r\n- https://searchfox.org/mozilla-central/source/browser/app/profile/firefox.js\r\n\r\n- https://searchfox.org/mozilla-central/source/testing/mozbase/mozprofile/mozprofile/profile.py\r\n\r\n\r\nHere are some other files that need to be combed through:\r\n\r\nhttps://searchfox.org/mozilla-central/search?q=tempfile&amp;path=\r\n\r\n\r\n----------\r\n\r\nThis looks promising: \r\n\r\nhttps://searchfox.org/mozilla-central/source/testing/geckodriver/doc/Profiles.md\r\n\r\n&quot;geckodriver uses [profiles] to instrument Firefox’ behaviour.  The\r\nuser will usually rely on geckodriver to generate a temporary,\r\nthrowaway profile.  These profiles are deleted when the WebDriver\r\nsession expires.\r\n\r\nIn cases where the user needs to use custom, prepared profiles,\r\ngeckodriver will make modifications to the profile that ensures\r\ncorrect behaviour.  See [_Automation preferences_] below on the\r\nprecedence of user-defined preferences in this case.\r\n\r\nCustom profiles can be provided two different ways:\r\n\r\n  **1. by appending `--profile /some/location` to the [`args` capability],\r\n     which will instruct geckodriver to use the profile _in-place_;**\r\n\r\n\r\nI found this question on trying to do this: https://stackoverflow.com/questions/67512994/how-do-i-use-an-existing-profile-in-place-with-selenium-webdriver\r\n\r\nAlso here is an issue that was raised in selenium on Github concerning the temp directory. https://github.com/SeleniumHQ/selenium/issues/8645\r\n\r\n\r\n----------\r\nLooking through the source of [geckodriver v0.29.1][3] I found a file where the profile is loaded. \r\n\r\n\r\nsource: capabilities.rs\r\n\r\n```rs\r\n   fn load_profile(options: &amp;Capabilities) -&gt; WebDriverResult&lt;Option&lt;Profile&gt;&gt; {\r\n        if let Some(profile_json) = options.get(&quot;profile&quot;) {\r\n            let profile_base64 = profile_json.as_str().ok_or_else(|| {\r\n                WebDriverError::new(ErrorStatus::InvalidArgument, &quot;Profile is not a string&quot;)\r\n            })?;\r\n            let profile_zip = &amp;*base64::decode(profile_base64)?;\r\n\r\n            // Create an emtpy profile directory\r\n            let profile = Profile::new()?;\r\n            unzip_buffer(\r\n                profile_zip,\r\n                profile\r\n                    .temp_dir\r\n                    .as_ref()\r\n                    .expect(&quot;Profile doesn&#39;t have a path&quot;)\r\n                    .path(),\r\n            )?;\r\n\r\n            Ok(Some(profile))\r\n        } else {\r\n            Ok(None)\r\n        }\r\n    }\r\n\r\n```\r\n\r\nsource: marionette.rs\r\n```rs\r\n    fn start_browser(&amp;mut self, port: u16, options: FirefoxOptions) -&gt; WebDriverResult&lt;()&gt; {\r\n        let binary = options.binary.ok_or_else(|| {\r\n            WebDriverError::new(\r\n                ErrorStatus::SessionNotCreated,\r\n                &quot;Expected browser binary location, but unable to find \\\r\n             binary in default location, no \\\r\n             &#39;moz:firefoxOptions.binary&#39; capability provided, and \\\r\n             no binary flag set on the command line&quot;,\r\n            )\r\n        })?;\r\n\r\n        let is_custom_profile = options.profile.is_some();\r\n\r\n        let mut profile = match options.profile {\r\n            Some(x) =&gt; x,\r\n            None =&gt; Profile::new()?,\r\n        };\r\n\r\n        self.set_prefs(port, &amp;mut profile, is_custom_profile, options.prefs)\r\n            .map_err(|e| {\r\n                WebDriverError::new(\r\n                    ErrorStatus::SessionNotCreated,\r\n                    format!(&quot;Failed to set preferences: {}&quot;, e),\r\n                )\r\n            })?;\r\n\r\n        let mut runner = FirefoxRunner::new(&amp;binary, profile);\r\n\r\n        runner.arg(&quot;--marionette&quot;);\r\n        if self.settings.jsdebugger {\r\n            runner.arg(&quot;--jsdebugger&quot;);\r\n        }\r\n        if let Some(args) = options.args.as_ref() {\r\n            runner.args(args);\r\n        }\r\n\r\n        // https://developer.mozilla.org/docs/Environment_variables_affecting_crash_reporting\r\n        runner\r\n            .env(&quot;MOZ_CRASHREPORTER&quot;, &quot;1&quot;)\r\n            .env(&quot;MOZ_CRASHREPORTER_NO_REPORT&quot;, &quot;1&quot;)\r\n            .env(&quot;MOZ_CRASHREPORTER_SHUTDOWN&quot;, &quot;1&quot;);\r\n\r\n        let browser_proc = runner.start().map_err(|e| {\r\n            WebDriverError::new(\r\n                ErrorStatus::SessionNotCreated,\r\n                format!(&quot;Failed to start browser {}: {}&quot;, binary.display(), e),\r\n            )\r\n        })?;\r\n        self.browser = Some(Browser::Host(browser_proc));\r\n\r\n        Ok(())\r\n    }\r\n\r\n    pub fn set_prefs(\r\n        &amp;self,\r\n        port: u16,\r\n        profile: &amp;mut Profile,\r\n        custom_profile: bool,\r\n        extra_prefs: Vec&lt;(String, Pref)&gt;,\r\n    ) -&gt; WebDriverResult&lt;()&gt; {\r\n        let prefs = profile.user_prefs().map_err(|_| {\r\n            WebDriverError::new(\r\n                ErrorStatus::UnknownError,\r\n                &quot;Unable to read profile preferences file&quot;,\r\n            )\r\n        })?;\r\n\r\n        for &amp;(ref name, ref value) in prefs::DEFAULT.iter() {\r\n            if !custom_profile || !prefs.contains_key(name) {\r\n                prefs.insert((*name).to_string(), (*value).clone());\r\n            }\r\n        }\r\n\r\n        prefs.insert_slice(&amp;extra_prefs[..]);\r\n\r\n        if self.settings.jsdebugger {\r\n            prefs.insert(&quot;devtools.browsertoolbox.panel&quot;, Pref::new(&quot;jsdebugger&quot;));\r\n            prefs.insert(&quot;devtools.debugger.remote-enabled&quot;, Pref::new(true));\r\n            prefs.insert(&quot;devtools.chrome.enabled&quot;, Pref::new(true));\r\n            prefs.insert(&quot;devtools.debugger.prompt-connection&quot;, Pref::new(false));\r\n        }\r\n\r\n        prefs.insert(&quot;marionette.log.level&quot;, logging::max_level().into());\r\n        prefs.insert(&quot;marionette.port&quot;, Pref::new(port));\r\n\r\n        prefs.write().map_err(|e| {\r\n            WebDriverError::new(\r\n                ErrorStatus::UnknownError,\r\n                format!(&quot;Unable to write Firefox profile: {}&quot;, e),\r\n            )\r\n        })\r\n    }\r\n}\r\n```\r\n\r\nAfter looking through the gecko source it looks like *mozprofile::profile::Profile* is coming from FireFox and not geckodriver\r\n\r\n----------\r\n\r\nIt seems that you might have issues with profiles when you migrate to Selenium 4. \r\n\r\nref: https://github.com/SeleniumHQ/selenium/issues/9417\r\n\r\n\r\n*For Selenium 4 we have deprecated the use of profiles as there are other mechanisms that we can do to make the start up faster.\r\nPlease use the Options class to set preferences that you need and if you need to use an addon use the driver.install_addon(&quot;path/to/addon&quot;)\r\nyou can install selenium 4, which is in beta, via pip install selenium --pre*\r\n\r\n\r\n----------\r\nI noted in your code you were writing to *user.js*, which is a custom file for FireFox.  Have you considered creating on these files manually outside of Gecko? \r\n\r\n\r\nAlso have you looked at [mozprofile][2]?\r\n\r\n\r\n  [1]: https://developer.mozilla.org/en-US/docs/Web/WebDriver/Capabilities/firefoxOptions\r\n  [2]: https://firefox-source-docs.mozilla.org/mozbase/mozprofile.html\r\n  [3]: http://github.com/mozilla/geckodriver/releases/tag/v0.29.1","title":"How to Prevent Selenium 3.0 (Geckodriver) from Creating Temporary Firefox Profiles?","body":"<h2>UPDATED POST 05-30-2021</h2>\n<hr />\n<p><strong>This is the hardest question that I have every tried to answer on Stack Overflow.  Because it involved the interactions of several code bases written in multiple languages (Java, Rust and C++). This complexity made the question potentially unsolvable.</strong></p>\n<p><em><strong>My last crack at this likely unsolvable question:</strong></em></p>\n<p>Within the code in your question you are modifying the file <em>user.js</em> This file is still used by <em>Selenium</em>.</p>\n<pre><code>public FirefoxProfile() {\n    this(null);\n  }\n\n  /**\n   * Constructs a firefox profile from an existing profile directory.\n   * &lt;p&gt;\n   * Users who need this functionality should consider using a named profile.\n   *\n   * @param profileDir The profile directory to use as a model.\n   */\n  public FirefoxProfile(File profileDir) {\n    this(null, profileDir);\n  }\n\n  @Beta\n  protected FirefoxProfile(Reader defaultsReader, File profileDir) {\n    if (defaultsReader == null) {\n      defaultsReader = onlyOverrideThisIfYouKnowWhatYouAreDoing();\n    }\n\n    additionalPrefs = new Preferences(defaultsReader);\n\n    model = profileDir;\n    verifyModel(model);\n\n    File prefsInModel = new File(model, &quot;user.js&quot;);\n    if (prefsInModel.exists()) {\n      StringReader reader = new StringReader(&quot;{\\&quot;frozen\\&quot;: {}, \\&quot;mutable\\&quot;: {}}&quot;);\n      Preferences existingPrefs = new Preferences(reader, prefsInModel);\n      acceptUntrustedCerts = getBooleanPreference(existingPrefs, ACCEPT_UNTRUSTED_CERTS_PREF, true);\n      untrustedCertIssuer = getBooleanPreference(existingPrefs, ASSUME_UNTRUSTED_ISSUER_PREF, true);\n      existingPrefs.addTo(additionalPrefs);\n    } else {\n      acceptUntrustedCerts = true;\n      untrustedCertIssuer = true;\n    }\n\n    // This is not entirely correct but this is not stored in the profile\n    // so for now will always be set to false.\n    loadNoFocusLib = false;\n\n    try {\n      defaultsReader.close();\n    } catch (IOException e) {\n      throw new WebDriverException(e);\n    }\n  }\n</code></pre>\n<p>So in theory you should be able to modify <em>capabilities.rs</em> in the <em>geckodriver</em> source code.  That file contains the <em>temp_dir</em>.</p>\n<p>As I stated this in only a theory, because when I looked at the Firefox source, which has <em>temp_dir</em> spread throughout the code base.</p>\n<h2>ORIGINAL POST 05-26-2021</h2>\n<hr />\n<p>I'm not sure that you can prevent Selenium from creating a temporary Firefox Profile.</p>\n<p>From the <a href=\"https://developer.mozilla.org/en-US/docs/Web/WebDriver/Capabilities/firefoxOptions\" rel=\"nofollow noreferrer\">gecko documents</a>:</p>\n<p>&quot;Profiles are created in the systems temporary folder. This is also where the encoded profile is extracted when profile is provided. <em><strong>By default geckodriver will create a new profile in this location</strong></em>.&quot;</p>\n<p>The only solution that I see at the moment would require you modify the Geckodriver source files to prevent the creation of temporary folders/profiles.</p>\n<p>I'm currently looking at the source.  These files might be the correct ones, but I need to look at the source more:</p>\n<ul>\n<li><p><a href=\"https://searchfox.org/mozilla-central/source/browser/app/profile/firefox.js\" rel=\"nofollow noreferrer\">https://searchfox.org/mozilla-central/source/browser/app/profile/firefox.js</a></p>\n</li>\n<li><p><a href=\"https://searchfox.org/mozilla-central/source/testing/mozbase/mozprofile/mozprofile/profile.py\" rel=\"nofollow noreferrer\">https://searchfox.org/mozilla-central/source/testing/mozbase/mozprofile/mozprofile/profile.py</a></p>\n</li>\n</ul>\n<p>Here are some other files that need to be combed through:</p>\n<p><a href=\"https://searchfox.org/mozilla-central/search?q=tempfile&amp;path=\" rel=\"nofollow noreferrer\">https://searchfox.org/mozilla-central/search?q=tempfile&amp;path=</a></p>\n<hr />\n<p>This looks promising:</p>\n<p><a href=\"https://searchfox.org/mozilla-central/source/testing/geckodriver/doc/Profiles.md\" rel=\"nofollow noreferrer\">https://searchfox.org/mozilla-central/source/testing/geckodriver/doc/Profiles.md</a></p>\n<p>&quot;geckodriver uses [profiles] to instrument Firefox’ behaviour.  The\nuser will usually rely on geckodriver to generate a temporary,\nthrowaway profile.  These profiles are deleted when the WebDriver\nsession expires.</p>\n<p>In cases where the user needs to use custom, prepared profiles,\ngeckodriver will make modifications to the profile that ensures\ncorrect behaviour.  See [<em>Automation preferences</em>] below on the\nprecedence of user-defined preferences in this case.</p>\n<p>Custom profiles can be provided two different ways:</p>\n<p><strong>1. by appending <code>--profile /some/location</code> to the [<code>args</code> capability],\nwhich will instruct geckodriver to use the profile <em>in-place</em>;</strong></p>\n<p>I found this question on trying to do this: <a href=\"https://stackoverflow.com/questions/67512994/how-do-i-use-an-existing-profile-in-place-with-selenium-webdriver\">how do I use an existing profile in-place with Selenium Webdriver?</a></p>\n<p>Also here is an issue that was raised in selenium on Github concerning the temp directory. <a href=\"https://github.com/SeleniumHQ/selenium/issues/8645\" rel=\"nofollow noreferrer\">https://github.com/SeleniumHQ/selenium/issues/8645</a></p>\n<hr />\n<p>Looking through the source of <a href=\"http://github.com/mozilla/geckodriver/releases/tag/v0.29.1\" rel=\"nofollow noreferrer\">geckodriver v0.29.1</a> I found a file where the profile is loaded.</p>\n<p>source: capabilities.rs</p>\n<pre class=\"lang-rs prettyprint-override\"><code>   fn load_profile(options: &amp;Capabilities) -&gt; WebDriverResult&lt;Option&lt;Profile&gt;&gt; {\n        if let Some(profile_json) = options.get(&quot;profile&quot;) {\n            let profile_base64 = profile_json.as_str().ok_or_else(|| {\n                WebDriverError::new(ErrorStatus::InvalidArgument, &quot;Profile is not a string&quot;)\n            })?;\n            let profile_zip = &amp;*base64::decode(profile_base64)?;\n\n            // Create an emtpy profile directory\n            let profile = Profile::new()?;\n            unzip_buffer(\n                profile_zip,\n                profile\n                    .temp_dir\n                    .as_ref()\n                    .expect(&quot;Profile doesn't have a path&quot;)\n                    .path(),\n            )?;\n\n            Ok(Some(profile))\n        } else {\n            Ok(None)\n        }\n    }\n\n</code></pre>\n<p>source: marionette.rs</p>\n<pre class=\"lang-rs prettyprint-override\"><code>    fn start_browser(&amp;mut self, port: u16, options: FirefoxOptions) -&gt; WebDriverResult&lt;()&gt; {\n        let binary = options.binary.ok_or_else(|| {\n            WebDriverError::new(\n                ErrorStatus::SessionNotCreated,\n                &quot;Expected browser binary location, but unable to find \\\n             binary in default location, no \\\n             'moz:firefoxOptions.binary' capability provided, and \\\n             no binary flag set on the command line&quot;,\n            )\n        })?;\n\n        let is_custom_profile = options.profile.is_some();\n\n        let mut profile = match options.profile {\n            Some(x) =&gt; x,\n            None =&gt; Profile::new()?,\n        };\n\n        self.set_prefs(port, &amp;mut profile, is_custom_profile, options.prefs)\n            .map_err(|e| {\n                WebDriverError::new(\n                    ErrorStatus::SessionNotCreated,\n                    format!(&quot;Failed to set preferences: {}&quot;, e),\n                )\n            })?;\n\n        let mut runner = FirefoxRunner::new(&amp;binary, profile);\n\n        runner.arg(&quot;--marionette&quot;);\n        if self.settings.jsdebugger {\n            runner.arg(&quot;--jsdebugger&quot;);\n        }\n        if let Some(args) = options.args.as_ref() {\n            runner.args(args);\n        }\n\n        // https://developer.mozilla.org/docs/Environment_variables_affecting_crash_reporting\n        runner\n            .env(&quot;MOZ_CRASHREPORTER&quot;, &quot;1&quot;)\n            .env(&quot;MOZ_CRASHREPORTER_NO_REPORT&quot;, &quot;1&quot;)\n            .env(&quot;MOZ_CRASHREPORTER_SHUTDOWN&quot;, &quot;1&quot;);\n\n        let browser_proc = runner.start().map_err(|e| {\n            WebDriverError::new(\n                ErrorStatus::SessionNotCreated,\n                format!(&quot;Failed to start browser {}: {}&quot;, binary.display(), e),\n            )\n        })?;\n        self.browser = Some(Browser::Host(browser_proc));\n\n        Ok(())\n    }\n\n    pub fn set_prefs(\n        &amp;self,\n        port: u16,\n        profile: &amp;mut Profile,\n        custom_profile: bool,\n        extra_prefs: Vec&lt;(String, Pref)&gt;,\n    ) -&gt; WebDriverResult&lt;()&gt; {\n        let prefs = profile.user_prefs().map_err(|_| {\n            WebDriverError::new(\n                ErrorStatus::UnknownError,\n                &quot;Unable to read profile preferences file&quot;,\n            )\n        })?;\n\n        for &amp;(ref name, ref value) in prefs::DEFAULT.iter() {\n            if !custom_profile || !prefs.contains_key(name) {\n                prefs.insert((*name).to_string(), (*value).clone());\n            }\n        }\n\n        prefs.insert_slice(&amp;extra_prefs[..]);\n\n        if self.settings.jsdebugger {\n            prefs.insert(&quot;devtools.browsertoolbox.panel&quot;, Pref::new(&quot;jsdebugger&quot;));\n            prefs.insert(&quot;devtools.debugger.remote-enabled&quot;, Pref::new(true));\n            prefs.insert(&quot;devtools.chrome.enabled&quot;, Pref::new(true));\n            prefs.insert(&quot;devtools.debugger.prompt-connection&quot;, Pref::new(false));\n        }\n\n        prefs.insert(&quot;marionette.log.level&quot;, logging::max_level().into());\n        prefs.insert(&quot;marionette.port&quot;, Pref::new(port));\n\n        prefs.write().map_err(|e| {\n            WebDriverError::new(\n                ErrorStatus::UnknownError,\n                format!(&quot;Unable to write Firefox profile: {}&quot;, e),\n            )\n        })\n    }\n}\n</code></pre>\n<p>After looking through the gecko source it looks like <em>mozprofile::profile::Profile</em> is coming from FireFox and not geckodriver</p>\n<hr />\n<p>It seems that you might have issues with profiles when you migrate to Selenium 4.</p>\n<p>ref: <a href=\"https://github.com/SeleniumHQ/selenium/issues/9417\" rel=\"nofollow noreferrer\">https://github.com/SeleniumHQ/selenium/issues/9417</a></p>\n<p><em>For Selenium 4 we have deprecated the use of profiles as there are other mechanisms that we can do to make the start up faster.\nPlease use the Options class to set preferences that you need and if you need to use an addon use the driver.install_addon(&quot;path/to/addon&quot;)\nyou can install selenium 4, which is in beta, via pip install selenium --pre</em></p>\n<hr />\n<p>I noted in your code you were writing to <em>user.js</em>, which is a custom file for FireFox.  Have you considered creating on these files manually outside of Gecko?</p>\n<p>Also have you looked at <a href=\"https://firefox-source-docs.mozilla.org/mozbase/mozprofile.html\" rel=\"nofollow noreferrer\">mozprofile</a>?</p>\n"},{"tags":[],"owner":{"account_id":16830943,"reputation":31,"user_id":12168932,"display_name":"hiep le"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1691526305,"creation_date":1640638694,"answer_id":70500365,"question_id":67561490,"body_markdown":"Thanks to source code provided in answer of **Life is complex** in [link](https://stackoverflow.com/a/67697236/12168932)!. I have the chance to look through geckodriver source.\r\n\r\nEXPLANATION\r\n===========\r\n\r\nI believe that the reason you could not find out any **rust_tmp** in source because it is generated randomly by **Profile::new()** function.\r\n\r\nWhen I look deeper in code structure, I saw that **browser.rs** is the place where the browser is actually loaded which is called through **marionette.rs**. If you noticing carefully, **LocalBrowser::new** method will be called whenever a new session is initialized and the profile will be loaded in that state also. Then by checking **browser.rs** file, there will be a block code line 60 - 70 used to actually generate profile for new session instance. Now, what need to do is modifying this path to load your custom profile.\r\n\r\nSHORT ANSWER\r\n============\r\n\r\nDownloading zip file of **geckodriver-0.30.0**, extracting it by your prefer zip program :P\r\n\r\nLooking on **src/browser.rs** of geckodriver source, in line 60 - 70, hoping you will see something like this:\r\n```rs\r\n        let is_custom_profile = options.profile.is_some();\r\n\r\n        let mut profile = match options.profile {\r\n            Some(x) =&gt; x,\r\n            None =&gt; Profile::new()?,\r\n        };\r\n```\r\n\r\nChange it to your prefer folder ( hoping you know some rust code ), example:\r\n```rs\r\n        /*\r\n        let mut profile = match options.profile {\r\n            Some(x) =&gt; x,\r\n            None =&gt; Profile::new()?,\r\n        };\r\n        */\r\n        let path = std::path::Path::new(&quot;path-to-profile&quot;);\r\n        let mut profile = Profile::new_from_path(path)?;\r\n```\r\n\r\nRe-compile with prefer rust compiler, example:\r\n```\r\nCargo build\r\n```\r\n\r\nNOTE\r\n====\r\n\r\nHoping this info will help you someway. This is not comprehensive but hoping it is good enough hint for you like it is possible to write some extra code to load profile from env or pass from argument, it is possible but I&#39;m not rust developer so too lazy for providing one in here.\r\n\r\nThe above solution is work fine for me and I could load and use directly my profile from that. Btw, I work on **Archlinux** with rust info: **cargo 1.57.0**.\r\n\r\nTBH, this is first time I push comment on stackoverflow, so feel free to correct me if I&#39;m wrong or produce unclear answer :P\r\n\r\nUpdate\r\n======\r\n\r\n1. I worked in **geckodriver 0.30.0** which will not be the same as **geckodriver 0.29.1** mentioned by **Life is complex**. But the change between 2 versions just be split action, so the similar modify path in version 0.29.1 will be included in method **MarionetteHandler::start_browser** in file **src/marionette.rs**.\r\n\r\n2. Since my starting point is **Life is complex** [ answer](https://stackoverflow.com/a/67697236/12168932), please looking through it for more information.","title":"How to Prevent Selenium 3.0 (Geckodriver) from Creating Temporary Firefox Profiles?","body":"<p>Thanks to source code provided in answer of <strong>Life is complex</strong> in <a href=\"https://stackoverflow.com/a/67697236/12168932\">link</a>!. I have the chance to look through geckodriver source.</p>\n<h1>EXPLANATION</h1>\n<p>I believe that the reason you could not find out any <strong>rust_tmp</strong> in source because it is generated randomly by <strong>Profile::new()</strong> function.</p>\n<p>When I look deeper in code structure, I saw that <strong>browser.rs</strong> is the place where the browser is actually loaded which is called through <strong>marionette.rs</strong>. If you noticing carefully, <strong>LocalBrowser::new</strong> method will be called whenever a new session is initialized and the profile will be loaded in that state also. Then by checking <strong>browser.rs</strong> file, there will be a block code line 60 - 70 used to actually generate profile for new session instance. Now, what need to do is modifying this path to load your custom profile.</p>\n<h1>SHORT ANSWER</h1>\n<p>Downloading zip file of <strong>geckodriver-0.30.0</strong>, extracting it by your prefer zip program :P</p>\n<p>Looking on <strong>src/browser.rs</strong> of geckodriver source, in line 60 - 70, hoping you will see something like this:</p>\n<pre class=\"lang-rs prettyprint-override\"><code>        let is_custom_profile = options.profile.is_some();\n\n        let mut profile = match options.profile {\n            Some(x) =&gt; x,\n            None =&gt; Profile::new()?,\n        };\n</code></pre>\n<p>Change it to your prefer folder ( hoping you know some rust code ), example:</p>\n<pre class=\"lang-rs prettyprint-override\"><code>        /*\n        let mut profile = match options.profile {\n            Some(x) =&gt; x,\n            None =&gt; Profile::new()?,\n        };\n        */\n        let path = std::path::Path::new(&quot;path-to-profile&quot;);\n        let mut profile = Profile::new_from_path(path)?;\n</code></pre>\n<p>Re-compile with prefer rust compiler, example:</p>\n<pre><code>Cargo build\n</code></pre>\n<h1>NOTE</h1>\n<p>Hoping this info will help you someway. This is not comprehensive but hoping it is good enough hint for you like it is possible to write some extra code to load profile from env or pass from argument, it is possible but I'm not rust developer so too lazy for providing one in here.</p>\n<p>The above solution is work fine for me and I could load and use directly my profile from that. Btw, I work on <strong>Archlinux</strong> with rust info: <strong>cargo 1.57.0</strong>.</p>\n<p>TBH, this is first time I push comment on stackoverflow, so feel free to correct me if I'm wrong or produce unclear answer :P</p>\n<h1>Update</h1>\n<ol>\n<li><p>I worked in <strong>geckodriver 0.30.0</strong> which will not be the same as <strong>geckodriver 0.29.1</strong> mentioned by <strong>Life is complex</strong>. But the change between 2 versions just be split action, so the similar modify path in version 0.29.1 will be included in method <strong>MarionetteHandler::start_browser</strong> in file <strong>src/marionette.rs</strong>.</p>\n</li>\n<li><p>Since my starting point is <strong>Life is complex</strong> <a href=\"https://stackoverflow.com/a/67697236/12168932\"> answer</a>, please looking through it for more information.</p>\n</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":285900,"reputation":442,"user_id":584829,"accept_rate":75,"display_name":"Young"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691526327,"creation_date":1673676610,"answer_id":75116150,"question_id":67561490,"body_markdown":"I&#39;ve come up with a solution that 1) works with Selenium 4.7.0--however, I don&#39;t see why it wouldn&#39;t work with 3.x as well, 2) allows the user to pass in an existing Firefox profile dynamically via an environment variable--and if this environment variable doesn&#39;t exist, simply acts &quot;normally&quot;, and 3) if you do not want a temporary copy of the profile directory, simply do not pass the source profile directory to Selenium.\r\n\r\nI downloaded [Geckodriver 0.32.0][1] and made it so that you simply need to provide the Firefox profile directory via the environment variable `FIREFOX_PROFILE_DIR`. For example, in C#, before you create the FirefoxDriver, call:\r\n\r\n    Environment.SetEnvironmentVariable(&quot;FIREFOX_PROFILE_DIR&quot;, myProfileDir);\r\n\r\nThe change to Rust is in `browser.rs`, line 88, replacing:\r\n\r\n&lt;!-- language-all: rs --&gt;\r\n        let mut profile = match options.profile {\r\n            ProfileType::Named =&gt; None,\r\n            ProfileType::Path(x) =&gt; Some(x),\r\n            ProfileType::Temporary =&gt; Some(Profile::new(profile_root)?),\r\n        };\r\n\r\nwith:\r\n\r\n        let mut profile = if let Ok(profile_dir) = std::env::var(&quot;FIREFOX_PROFILE_DIR&quot;) {\r\n            Some(Profile::new_from_path(Path::new(&amp;profile_dir))?)\r\n        } else {\r\n            match options.profile {\r\n                ProfileType::Named =&gt; None,\r\n                ProfileType::Path(x) =&gt; Some(x),\r\n                ProfileType::Temporary =&gt; Some(Profile::new(profile_root)?),\r\n            }\r\n        };\r\n\r\nYou may refer to my [Git commit][2] to see the diff against the original Geckodriver code.\r\n\r\n\r\n  [1]: https://github.com/mozilla/geckodriver/archive/refs/tags/v0.32.0.zip\r\n  [2]: https://github.com/young-zhang/geckodriver-0.32.0/compare/master...profile-no-copy","title":"How to Prevent Selenium 3.0 (Geckodriver) from Creating Temporary Firefox Profiles?","body":"<p>I've come up with a solution that 1) works with Selenium 4.7.0--however, I don't see why it wouldn't work with 3.x as well, 2) allows the user to pass in an existing Firefox profile dynamically via an environment variable--and if this environment variable doesn't exist, simply acts &quot;normally&quot;, and 3) if you do not want a temporary copy of the profile directory, simply do not pass the source profile directory to Selenium.</p>\n<p>I downloaded <a href=\"https://github.com/mozilla/geckodriver/archive/refs/tags/v0.32.0.zip\" rel=\"nofollow noreferrer\">Geckodriver 0.32.0</a> and made it so that you simply need to provide the Firefox profile directory via the environment variable <code>FIREFOX_PROFILE_DIR</code>. For example, in C#, before you create the FirefoxDriver, call:</p>\n<pre><code>Environment.SetEnvironmentVariable(&quot;FIREFOX_PROFILE_DIR&quot;, myProfileDir);\n</code></pre>\n<p>The change to Rust is in <code>browser.rs</code>, line 88, replacing:</p>\n\n<pre class=\"lang-rs prettyprint-override\"><code>    let mut profile = match options.profile {\n        ProfileType::Named =&gt; None,\n        ProfileType::Path(x) =&gt; Some(x),\n        ProfileType::Temporary =&gt; Some(Profile::new(profile_root)?),\n    };\n</code></pre>\n<p>with:</p>\n<pre class=\"lang-rs prettyprint-override\"><code>    let mut profile = if let Ok(profile_dir) = std::env::var(&quot;FIREFOX_PROFILE_DIR&quot;) {\n        Some(Profile::new_from_path(Path::new(&amp;profile_dir))?)\n    } else {\n        match options.profile {\n            ProfileType::Named =&gt; None,\n            ProfileType::Path(x) =&gt; Some(x),\n            ProfileType::Temporary =&gt; Some(Profile::new(profile_root)?),\n        }\n    };\n</code></pre>\n<p>You may refer to my <a href=\"https://github.com/young-zhang/geckodriver-0.32.0/compare/master...profile-no-copy\" rel=\"nofollow noreferrer\">Git commit</a> to see the diff against the original Geckodriver code.</p>\n"}],"owner":{"account_id":15164959,"reputation":436,"user_id":10946747,"display_name":"alpha1"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2537,"favorite_count":0,"down_vote_count":0,"up_vote_count":15,"answer_count":6,"score":15,"last_activity_date":1698104902,"creation_date":1621198383,"question_id":67561490,"body_markdown":"I&#39;m running the latest version of *Selenium WebDriver* with [Geckodriver][1]. I want to prevent *Selenium* from creating temporary Firefox Profiles in the temporary files directory when launching a new instance of *WebDriver*. Instead I want to use the original Firefox Profile directly. This has double benefit. First, it saves time (it takes significant amount of time for the profile to be copied to the temporary directory). Second, it ensures that cookies created during session are saved to the original profile. Before Selenium started relying on *Geckodriver* I was able to [solve this problem][2] by editing the class `FirefoxProfile.class` in `SeleniumHQ` as seen below:\r\n\r\n    public File layoutOnDisk() {\r\n\r\n     File profileDir;\r\n\r\n     if (this.disableTempProfileCreation) {\r\n      profileDir = this.model;\r\n      return profileDir;\r\n    \r\n      } else {\r\n\r\n       try {\r\n        profileDir = TemporaryFilesystem.getDefaultTmpFS().createTempDir(&quot;ABC&quot;, &quot;XYZ&quot;);\r\n        File userPrefs = new File(profileDir, &quot;user.js&quot;);\r\n        this.copyModel(this.model, profileDir);\r\n        this.installExtensions(profileDir);\r\n        this.deleteLockFiles(profileDir);\r\n        this.deleteExtensionsCacheIfItExists(profileDir);\r\n        this.updateUserPrefs(userPrefs);\r\n        return profileDir;\r\n        } catch (IOException var3) {\r\n       throw new UnableToCreateProfileException(var3);\r\n      }\r\n     }\r\n    }\r\n\r\nThis would stop Selenium from creating a temporary Firefox Profile when the parameter `disableTempProfileCreation` was set to true.\r\n\r\nHowever, now that Selenium is being controlled by *Geckodriver* this solution no longer works as the creation (and launch) of Firefox Profile is controlled by `Geckodriver.exe` (which is written in `Rust` language). How can I achieve the same objective with *Geckodriver*? I don&#39;t mind editing the source code. I&#39;m using Java.\r\n\r\nThanks\r\n\r\n\r\n**Important Update:**\r\n\r\nI would like to thank everyone for taking the time to respond to this question. However, as stated in some of the comments, *the first 3 answers do not address the question at all* - for two reasons. First of all, using an existing Firefox Profile will not prevent `Geckodriver` from copying the original profile to a temporary directory (as indicated in the OP and clearly stated by one or more of the commentators below). Second, even if it did it is not compatible with Selenium 3.0. \r\n\r\nI&#39;m really not sure why 3 out of 4 answer repeat the exact same answer with the exact same mistake. Did they read the question? The only answer the even attempts to address the question at hand is the answer by @Life is complex however it is incomplete. Thanks.\r\n\r\n\r\n  [1]: https://github.com/mozilla/geckodriver/releases/tag/v0.29.1\r\n  [2]: https://github.com/seleniumhq/selenium-google-code-issue-archive/issues/1954","title":"How to Prevent Selenium 3.0 (Geckodriver) from Creating Temporary Firefox Profiles?","body":"<p>I'm running the latest version of <em>Selenium WebDriver</em> with <a href=\"https://github.com/mozilla/geckodriver/releases/tag/v0.29.1\" rel=\"noreferrer\">Geckodriver</a>. I want to prevent <em>Selenium</em> from creating temporary Firefox Profiles in the temporary files directory when launching a new instance of <em>WebDriver</em>. Instead I want to use the original Firefox Profile directly. This has double benefit. First, it saves time (it takes significant amount of time for the profile to be copied to the temporary directory). Second, it ensures that cookies created during session are saved to the original profile. Before Selenium started relying on <em>Geckodriver</em> I was able to <a href=\"https://github.com/seleniumhq/selenium-google-code-issue-archive/issues/1954\" rel=\"noreferrer\">solve this problem</a> by editing the class <code>FirefoxProfile.class</code> in <code>SeleniumHQ</code> as seen below:</p>\n<pre><code>public File layoutOnDisk() {\n\n File profileDir;\n\n if (this.disableTempProfileCreation) {\n  profileDir = this.model;\n  return profileDir;\n\n  } else {\n\n   try {\n    profileDir = TemporaryFilesystem.getDefaultTmpFS().createTempDir(&quot;ABC&quot;, &quot;XYZ&quot;);\n    File userPrefs = new File(profileDir, &quot;user.js&quot;);\n    this.copyModel(this.model, profileDir);\n    this.installExtensions(profileDir);\n    this.deleteLockFiles(profileDir);\n    this.deleteExtensionsCacheIfItExists(profileDir);\n    this.updateUserPrefs(userPrefs);\n    return profileDir;\n    } catch (IOException var3) {\n   throw new UnableToCreateProfileException(var3);\n  }\n }\n}\n</code></pre>\n<p>This would stop Selenium from creating a temporary Firefox Profile when the parameter <code>disableTempProfileCreation</code> was set to true.</p>\n<p>However, now that Selenium is being controlled by <em>Geckodriver</em> this solution no longer works as the creation (and launch) of Firefox Profile is controlled by <code>Geckodriver.exe</code> (which is written in <code>Rust</code> language). How can I achieve the same objective with <em>Geckodriver</em>? I don't mind editing the source code. I'm using Java.</p>\n<p>Thanks</p>\n<p><strong>Important Update:</strong></p>\n<p>I would like to thank everyone for taking the time to respond to this question. However, as stated in some of the comments, <em>the first 3 answers do not address the question at all</em> - for two reasons. First of all, using an existing Firefox Profile will not prevent <code>Geckodriver</code> from copying the original profile to a temporary directory (as indicated in the OP and clearly stated by one or more of the commentators below). Second, even if it did it is not compatible with Selenium 3.0.</p>\n<p>I'm really not sure why 3 out of 4 answer repeat the exact same answer with the exact same mistake. Did they read the question? The only answer the even attempts to address the question at hand is the answer by @Life is complex however it is incomplete. Thanks.</p>\n"},{"tags":["java","android","firebase-realtime-database","firebase-storage"],"comments":[{"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1698134190,"post_id":77348568,"comment_id":136363323,"body_markdown":"I&#39;m not sure I understand.\nWhat exactly in this code doesn&#39;t work the way you expect?\nTell us what is wrong with shared code. Do you have any errors?","body":"I&#39;m not sure I understand. What exactly in this code doesn&#39;t work the way you expect? Tell us what is wrong with shared code. Do you have any errors?"}],"owner":{"account_id":29579771,"reputation":11,"user_id":22669827,"display_name":"Mohamed Hossam"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":23,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1698101202,"creation_date":1698099011,"question_id":77348568,"body_markdown":"I have a list in my firebase database contains download urls from firebase storage.\r\n\r\nNow I want to append this list with some data, but I can&#39;t do that.\r\n\r\nMy data in firebase with this structure:\r\n\r\n![this structure][1]\r\n\r\n  [1]: https://i.stack.imgur.com/BYMxo.png\r\nthis is my code\r\n```\r\nprivate void uploadExtrasToStorage(String cert_num, List&lt;Uri&gt; list) {\r\n    StorageReference sRef = FirebaseStorage.getInstance()\r\n            .getReference(&quot;Certificates&quot;).child(cert_num);\r\n    dialog.startDialog();\r\n    for (Uri uri : list) {\r\n        StorageReference mRef = sRef.child(System.currentTimeMillis() +\r\n                &quot;.&quot; + Tools.getFileExtn(getApplicationContext(), uri));\r\n        mRef.putFile(uri).addOnCompleteListener(new OnCompleteListener&lt;UploadTask.TaskSnapshot&gt;() {\r\n            @Override\r\n            public void onComplete(@NonNull Task&lt;UploadTask.TaskSnapshot&gt; task) {\r\n                if (task.isSuccessful()) {\r\n                    Log.d(&quot;Upload&quot;, &quot;Uploading successfull&quot;);\r\n                    mRef.getDownloadUrl().addOnSuccessListener(new OnSuccessListener&lt;Uri&gt;() {\r\n                        @Override\r\n                        public void onSuccess(Uri uri) {\r\n                            urls.add(uri.toString());\r\n                            DatabaseReference dbRef = FirebaseDatabase\r\n                                    .getInstance().getReference(&quot;Database&quot;)\r\n                                    .child(&quot;Certificates&quot;);\r\n                            dbRef.addListenerForSingleValueEvent(new ValueEventListener() {\r\n                                @Override\r\n                                public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                                    if (snapshot.exists()) {\r\n                                        for (DataSnapshot ds : snapshot.getChildren()) {\r\n                                            Modal modal = ds.getValue(Modal.class);\r\n                                            if (modal != null) {\r\n                                                if (modal.getCert_num().equals(cert_num)) {\r\n                                                    model = modal;\r\n                                                    oldUrls = model.getList();\r\n                                                    break;\r\n                                                }\r\n                                            } else {\r\n                                                Log.e(&quot;Error&quot;, &quot;Modal object is null&quot;);\r\n                                            }\r\n                                        }\r\n                                        newUrls = Tools.mergeLists(oldUrls, urls);\r\n                                        Log.d(&quot;myList (old)&quot;, oldUrls + &quot;&quot;);\r\n                                        Log.d(&quot;myListSize (old)&quot;, oldUrls.size() + &quot;&quot;);\r\n                                        Log.d(&quot;myList (urls)&quot;, urls + &quot;&quot;);\r\n                                        Log.d(&quot;myListSize (urls)&quot;, urls.size() + &quot;&quot;);\r\n                                        Log.d(&quot;myList&quot;, newUrls + &quot;&quot;);\r\n                                        Log.e(&quot;myList CURRENT&quot;, newUrls.size() + &quot;&quot;);\r\n                                    }\r\n                                }\r\n                                @Override\r\n                                public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n                                }\r\n                            });\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n        });\r\n    }\r\n}\r\n```\r\nhow can I achieve that?","title":"add data to exist list in realtime database in firebase in android","body":"<p>I have a list in my firebase database contains download urls from firebase storage.</p>\n<p>Now I want to append this list with some data, but I can't do that.</p>\n<p>My data in firebase with this structure:</p>\n<p><img src=\"https://i.stack.imgur.com/BYMxo.png\" alt=\"this structure\" /></p>\n<p>this is my code</p>\n<pre><code>private void uploadExtrasToStorage(String cert_num, List&lt;Uri&gt; list) {\n    StorageReference sRef = FirebaseStorage.getInstance()\n            .getReference(&quot;Certificates&quot;).child(cert_num);\n    dialog.startDialog();\n    for (Uri uri : list) {\n        StorageReference mRef = sRef.child(System.currentTimeMillis() +\n                &quot;.&quot; + Tools.getFileExtn(getApplicationContext(), uri));\n        mRef.putFile(uri).addOnCompleteListener(new OnCompleteListener&lt;UploadTask.TaskSnapshot&gt;() {\n            @Override\n            public void onComplete(@NonNull Task&lt;UploadTask.TaskSnapshot&gt; task) {\n                if (task.isSuccessful()) {\n                    Log.d(&quot;Upload&quot;, &quot;Uploading successfull&quot;);\n                    mRef.getDownloadUrl().addOnSuccessListener(new OnSuccessListener&lt;Uri&gt;() {\n                        @Override\n                        public void onSuccess(Uri uri) {\n                            urls.add(uri.toString());\n                            DatabaseReference dbRef = FirebaseDatabase\n                                    .getInstance().getReference(&quot;Database&quot;)\n                                    .child(&quot;Certificates&quot;);\n                            dbRef.addListenerForSingleValueEvent(new ValueEventListener() {\n                                @Override\n                                public void onDataChange(@NonNull DataSnapshot snapshot) {\n                                    if (snapshot.exists()) {\n                                        for (DataSnapshot ds : snapshot.getChildren()) {\n                                            Modal modal = ds.getValue(Modal.class);\n                                            if (modal != null) {\n                                                if (modal.getCert_num().equals(cert_num)) {\n                                                    model = modal;\n                                                    oldUrls = model.getList();\n                                                    break;\n                                                }\n                                            } else {\n                                                Log.e(&quot;Error&quot;, &quot;Modal object is null&quot;);\n                                            }\n                                        }\n                                        newUrls = Tools.mergeLists(oldUrls, urls);\n                                        Log.d(&quot;myList (old)&quot;, oldUrls + &quot;&quot;);\n                                        Log.d(&quot;myListSize (old)&quot;, oldUrls.size() + &quot;&quot;);\n                                        Log.d(&quot;myList (urls)&quot;, urls + &quot;&quot;);\n                                        Log.d(&quot;myListSize (urls)&quot;, urls.size() + &quot;&quot;);\n                                        Log.d(&quot;myList&quot;, newUrls + &quot;&quot;);\n                                        Log.e(&quot;myList CURRENT&quot;, newUrls.size() + &quot;&quot;);\n                                    }\n                                }\n                                @Override\n                                public void onCancelled(@NonNull DatabaseError error) {\n\n                                }\n                            });\n                        }\n                    });\n                }\n            }\n        });\n    }\n}\n</code></pre>\n<p>how can I achieve that?</p>\n"},{"tags":["java","reactjs","spring-boot","spring-security","cors"],"comments":[{"owner":{"account_id":2399674,"reputation":2691,"user_id":2097675,"display_name":"JJF"},"score":0,"creation_date":1698084848,"post_id":77347432,"comment_id":136357879,"body_markdown":"Did you do any research to try to figure out what the problem might be?","body":"Did you do any research to try to figure out what the problem might be?"},{"owner":{"account_id":29737222,"reputation":13,"user_id":22790454,"display_name":"Lucas"},"score":0,"creation_date":1698085052,"post_id":77347432,"comment_id":136357908,"body_markdown":"Yes, but we couldn&#39;t find out why","body":"Yes, but we couldn&#39;t find out why"}],"answers":[{"tags":[],"owner":{"account_id":3156367,"reputation":520,"user_id":2668689,"accept_rate":67,"display_name":"Digao"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698086526,"creation_date":1698084771,"answer_id":77347455,"question_id":77347432,"body_markdown":"the error message is self-explanatory. It is a CORS error. You need to configure the api side to include the Access-Control-Allow-Origin header in its responses. The value of this header should be the origin of the requesting site, or * to allow any origin. ","title":"Why my login endpoint can&#39;t be accessed by any request?","body":"<p>the error message is self-explanatory. It is a CORS error. You need to configure the api side to include the Access-Control-Allow-Origin header in its responses. The value of this header should be the origin of the requesting site, or * to allow any origin.</p>\n"},{"tags":[],"owner":{"account_id":29738622,"reputation":16,"user_id":22791454,"display_name":"Ana Luiza Elert"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1698100866,"creation_date":1698100866,"answer_id":77348662,"question_id":77347432,"body_markdown":"I may have the solution!\r\nIn your AuthenticationManager you have two methods to configure cors.\r\nYou can have only one:\r\n\r\n    @RestController\r\n    @CrossOrigin(origins = &quot;*&quot;)\r\n    @RequestMapping(&quot;/login&quot;)\r\n    public class AuthenticationController {\r\n    @Autowired\r\n    AuthenticationManager authenticationManager;\r\n\r\n    @PostMapping\r\n    public ResponseEntity&lt;?&gt; login(\r\n            @RequestBody Login login,\r\n            HttpServletResponse response)\r\n    {\r\n\r\n        SecurityContextRepository securityContextRepository = new \r\n    HttpSessionSecurityContextRepository();\r\n        UsernamePasswordAuthenticationToken token =\r\n                new UsernamePasswordAuthenticationToken(login.getUsername(), \r\n    login.getPassword());\r\n        Authentication authentication = authenticationManager.authenticate(token);\r\n\r\n        if(authentication.isAuthenticated()){\r\n            User user = (User) authentication.getPrincipal();\r\n            Cookie cookie = CookieUtil.generateCookie(user);\r\n            response.addCookie(cookie);\r\n            return ResponseEntity.ok(authentication.getPrincipal());\r\n        }\r\n\r\n        return ResponseEntity.status(401).build();\r\n\r\n    }\r\n    }","title":"Why my login endpoint can&#39;t be accessed by any request?","body":"<p>I may have the solution!\nIn your AuthenticationManager you have two methods to configure cors.\nYou can have only one:</p>\n<pre><code>@RestController\n@CrossOrigin(origins = &quot;*&quot;)\n@RequestMapping(&quot;/login&quot;)\npublic class AuthenticationController {\n@Autowired\nAuthenticationManager authenticationManager;\n\n@PostMapping\npublic ResponseEntity&lt;?&gt; login(\n        @RequestBody Login login,\n        HttpServletResponse response)\n{\n\n    SecurityContextRepository securityContextRepository = new \nHttpSessionSecurityContextRepository();\n    UsernamePasswordAuthenticationToken token =\n            new UsernamePasswordAuthenticationToken(login.getUsername(), \nlogin.getPassword());\n    Authentication authentication = authenticationManager.authenticate(token);\n\n    if(authentication.isAuthenticated()){\n        User user = (User) authentication.getPrincipal();\n        Cookie cookie = CookieUtil.generateCookie(user);\n        response.addCookie(cookie);\n        return ResponseEntity.ok(authentication.getPrincipal());\n    }\n\n    return ResponseEntity.status(401).build();\n\n}\n}\n</code></pre>\n"}],"owner":{"account_id":29737222,"reputation":13,"user_id":22790454,"display_name":"Lucas"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":82,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77348662,"answer_count":2,"score":1,"last_activity_date":1698100866,"creation_date":1698084516,"question_id":77347432,"body_markdown":"So, my friend has a problem with her login page. When she tries to make a request to her api, it just makes an error in the front-end and in the api nothing happens.\r\n\r\nThis is the error that appears on the console:\r\nAccess to XMLHttpRequest at &#39;http://localhost:8082/login&#39; from origin &#39;http://localhost:3000&#39; has been blocked by CORS policy: Response to preflight request doesn&#39;t pass access control check: No &#39;Access-Control-Allow-Origin&#39; header is present on the requested resource.\r\nAuthenticationService.js:10 AxiosError {message: &#39;Network Error&#39;, name: &#39;AxiosError&#39;, code: &#39;ERR_NETWORK&#39;, config: {…}, request: XMLHttpRequest, …}\r\n\r\nThis is the login endpoint\r\n\r\n    @Controller\r\n    @CrossOrigin(\r\n        origins = &quot;http://localhost:3000&quot;,\r\n        allowCredentials = &quot;true&quot;\r\n    )\r\n    @RequestMapping(&quot;/login&quot;)\r\n    public class AuthenticationController {\r\n\r\n    @Autowired\r\n    AuthenticationManager authenticationManager;\r\n\r\n    private static final Logger logger = LoggerFactory.getLogger(AuthenticationController.class);\r\n\r\n    @PostMapping\r\n    public ResponseEntity&lt;?&gt; login(\r\n            @RequestBody Login login,\r\n            HttpServletRequest request,\r\n            HttpServletResponse response\r\n    ){\r\n        logger.debug(&quot;Received login request for username: {}&quot;, login.getUsername());\r\n        System.out.println(&quot;AuthenticationCOntroller&quot;);\r\n        SecurityContextRepository securityContextRepository = new HttpSessionSecurityContextRepository();\r\n        UsernamePasswordAuthenticationToken token =\r\n                new UsernamePasswordAuthenticationToken(login.getUsername(), login.getPassword());\r\n        Authentication authentication = authenticationManager.authenticate(token);\r\n\r\n        if(authentication.isAuthenticated()){\r\n            User user = (User) authentication.getPrincipal();\r\n            Cookie cookie = CookieUtil.generateCookie(user);\r\n            response.addCookie(cookie);\r\n            return ResponseEntity.ok(authentication.getPrincipal());\r\n        }\r\n    }\r\n\r\nThis is her github links:\r\n[API](https://github.com/AnaLuizaElert/API---trump)\r\n[Front-end](https://github.com/AnaLuizaElert/Front-end---trump)\r\n\r\nShe tried to refactor all her code and it still gets an error doing login.","title":"Why my login endpoint can&#39;t be accessed by any request?","body":"<p>So, my friend has a problem with her login page. When she tries to make a request to her api, it just makes an error in the front-end and in the api nothing happens.</p>\n<p>This is the error that appears on the console:\nAccess to XMLHttpRequest at 'http://localhost:8082/login' from origin 'http://localhost:3000' has been blocked by CORS policy: Response to preflight request doesn't pass access control check: No 'Access-Control-Allow-Origin' header is present on the requested resource.\nAuthenticationService.js:10 AxiosError {message: 'Network Error', name: 'AxiosError', code: 'ERR_NETWORK', config: {…}, request: XMLHttpRequest, …}</p>\n<p>This is the login endpoint</p>\n<pre><code>@Controller\n@CrossOrigin(\n    origins = &quot;http://localhost:3000&quot;,\n    allowCredentials = &quot;true&quot;\n)\n@RequestMapping(&quot;/login&quot;)\npublic class AuthenticationController {\n\n@Autowired\nAuthenticationManager authenticationManager;\n\nprivate static final Logger logger = LoggerFactory.getLogger(AuthenticationController.class);\n\n@PostMapping\npublic ResponseEntity&lt;?&gt; login(\n        @RequestBody Login login,\n        HttpServletRequest request,\n        HttpServletResponse response\n){\n    logger.debug(&quot;Received login request for username: {}&quot;, login.getUsername());\n    System.out.println(&quot;AuthenticationCOntroller&quot;);\n    SecurityContextRepository securityContextRepository = new HttpSessionSecurityContextRepository();\n    UsernamePasswordAuthenticationToken token =\n            new UsernamePasswordAuthenticationToken(login.getUsername(), login.getPassword());\n    Authentication authentication = authenticationManager.authenticate(token);\n\n    if(authentication.isAuthenticated()){\n        User user = (User) authentication.getPrincipal();\n        Cookie cookie = CookieUtil.generateCookie(user);\n        response.addCookie(cookie);\n        return ResponseEntity.ok(authentication.getPrincipal());\n    }\n}\n</code></pre>\n<p>This is her github links:\n<a href=\"https://github.com/AnaLuizaElert/API---trump\" rel=\"nofollow noreferrer\">API</a>\n<a href=\"https://github.com/AnaLuizaElert/Front-end---trump\" rel=\"nofollow noreferrer\">Front-end</a></p>\n<p>She tried to refactor all her code and it still gets an error doing login.</p>\n"},{"tags":["java","spring","spring-security","jhipster","matcher"],"answers":[{"tags":[],"owner":{"account_id":391480,"reputation":2912,"user_id":752167,"display_name":"Matt C"},"down_vote_count":0,"up_vote_count":110,"is_accepted":true,"score":110,"last_activity_date":1698099829,"creation_date":1426544071,"answer_id":29087933,"question_id":28907030,"body_markdown":"Take a look at [Spring Data REST + Spring Security](https://github.com/spring-projects/spring-data-examples/tree/master/rest/security) which has \r\n\r\n    http\r\n      .httpBasic().and()\r\n      .authorizeRequests()\r\n        .antMatchers(HttpMethod.POST, &quot;/employees&quot;).hasRole(&quot;ADMIN&quot;)\r\n        .antMatchers(HttpMethod.PUT, &quot;/employees/**&quot;).hasRole(&quot;ADMIN&quot;)\r\n        .antMatchers(HttpMethod.PATCH, &quot;/employees/**&quot;).hasRole(&quot;ADMIN&quot;);\r\n","title":"Spring Security - Authorize Request for certain URL &amp; HTTP-Method using HttpSecurity","body":"<p>Take a look at <a href=\"https://github.com/spring-projects/spring-data-examples/tree/master/rest/security\" rel=\"nofollow noreferrer\">Spring Data REST + Spring Security</a> which has</p>\n<pre><code>http\n  .httpBasic().and()\n  .authorizeRequests()\n    .antMatchers(HttpMethod.POST, &quot;/employees&quot;).hasRole(&quot;ADMIN&quot;)\n    .antMatchers(HttpMethod.PUT, &quot;/employees/**&quot;).hasRole(&quot;ADMIN&quot;)\n    .antMatchers(HttpMethod.PATCH, &quot;/employees/**&quot;).hasRole(&quot;ADMIN&quot;);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6460167,"reputation":711,"user_id":5004280,"display_name":"Patrick"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1456449871,"creation_date":1456449871,"answer_id":35641700,"question_id":28907030,"body_markdown":"I know this question is a bit old but I don&#39;t believe disabling csrf support is an acceptable answer.  I had this same problem but don&#39;t feel good able using csrf.disable().  Instead I added the following line at the bottom of the page inside the form tags.\r\n\r\n    &lt;input type=&quot;hidden&quot; name=&quot;${_csrf.parameterName}&quot; value=&quot;${_csrf.token}&quot; /&gt;\r\n\r\n","title":"Spring Security - Authorize Request for certain URL &amp; HTTP-Method using HttpSecurity","body":"<p>I know this question is a bit old but I don't believe disabling csrf support is an acceptable answer.  I had this same problem but don't feel good able using csrf.disable().  Instead I added the following line at the bottom of the page inside the form tags.</p>\n\n<pre><code>&lt;input type=\"hidden\" name=\"${_csrf.parameterName}\" value=\"${_csrf.token}\" /&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"down_vote_count":0,"up_vote_count":33,"is_accepted":false,"score":33,"last_activity_date":1698100667,"creation_date":1669836394,"answer_id":74633151,"question_id":28907030,"body_markdown":"# TL;DR\r\n\r\nSince [**Spring 6.0**][SpringNew] release configuration methods &lt;del&gt;`antMatchers()`&lt;/del&gt;, &lt;del&gt;`mvcMathcers()`&lt;/del&gt; and &lt;del&gt;`regexMatchers()`&lt;/del&gt; have been **removed** from the API.\r\n\r\nAnd several flavors of `requestMatchers()` method has been provided as a replacement.\r\n\r\n&gt; [gh-11939][deprecated matcher methods] - **Remove deprecated** antMatchers, mvcMatchers, regexMatchers helper methods from Java Configuration. **Instead, use** `requestMatchers` or `HttpSecurity#securityMatchers`.\r\n\r\nAlso, an overloaded method `authorizeHttpRequests()` was introduced to replace **Deprecated** &lt;del&gt;`authorizeRequests()`&lt;/del&gt;.\r\n\r\nEven if you&#39;re using an earlier Spring version in your project and not going to update to *Spring 6* very soon, `antMatchers()` **isn&#39;t** the best tool you can choose for securing requests to your application.\r\n\r\nWhile applying security rules using `antMatchers()` you need to be very careful because if you secure let&#39;s say path `&quot;/foo&quot;` these restrictions **wouldn&#39;t** be applied to other aliases of this path like `&quot;/foo/&quot;`, `&quot;/foo.thml&quot;`. As a consequence, it&#39;s very easy to misconfigure security rules and **introduce a vulnerability** (*for instance, a path that is supposed to be accessible only for Admins becomes available for any authenticated user, it&#39;s surprising that none of the answers above mentions this*).\r\n\r\n# Spring 6.0 - [`requestMatchers()`][requestMatcher httpMethod]\r\n\r\nAccording to the documentation, the recommended way to restrict access to certain URL since `5.8` is to use [`HttpSecurity.authorizeHttpRequests()`][authorizeHttp], which as well as its predecessor comes in two flavors:\r\n\r\n* A parameterless version, which returns an object responsible for configuring the requests (*to be precise, an instance of [this][request Config] lengthy-name class*). So we can chain `requestMatchers()` calls directly on it.\r\n\r\n* And the second one expecting an instance of the `Customizer` interface which allow to apply enhanced DSL (*domain-specific language*), by using lambda expressions. See [*this post*][lambda DSL], it uses outdated matching methods but nicely illustrates the key idea of Lambda DSL, which makes the configuration more intuitive to read by visually grouping configuration options and eliminates the need to use method `and()`.\r\n\r\nWhich version of `authorizeHttpRequests()` to use is a *stylistic choice* (both are valid and supported in `6.0`).\r\n\r\nNow `requestMatchers()` are coming into play, this method has four overloaded versions which can replace any of the removed matching methods:\r\n\r\n* [`requestMatchers( String ... )`][matcher paths] - expects a varargs of `String` patterns. This matcher uses the same rules for matching as Spring MVC. I.e. it would act in the same way as old `mvcMatchers()`, so that pattern `/foo` would match all existing aliases of that path like `&quot;/foo&quot;`, `&quot;/foo/&quot;`, `&quot;/foo.html&quot;`. All other versions of `requestMatchers()` have the same matching behavior, it eliminates the possibility of misconfiguration, which was an Achilles&#39; heel of `antMatchers()`. **Note** that the corresponding restriction (`hasRole()`, `access()`, etc.) would be applied to any matching request regardless of its HttpMethod.\r\n\r\n*Example:*\r\n\r\n```\r\n.requestMatchers(&quot;/foo/*&quot;).hasRole(&quot;ADMIN&quot;) // only authenticated user with role ADMIN can access path /foo/something\r\n.requestMatchers(&quot;/bar/*&quot;, &quot;/baz/*&quot;).hasRole(&quot;ADMIN&quot;) // only authenticated requests to paths /foo/something and /baz/something  are allowed\r\n```\r\n\r\n* [`requestMatchers( HttpMethod )`][matcher HttpMethod] - expects an `HttpMethod` as argument. The corresponding restriction (`hasRole()`, `access()`, etc.) would be applied to any request handled by the current `SecurityFilterChain` having specified HttpMethod. If `null` provided as an argument, any request would match.\r\n\r\n*Example:*\r\n\r\n```\r\n.requestMatchers(HttpMethod.POST, &quot;/bar/**&quot;).hasAnyRole(&quot;USER&quot;, &quot;ADMIN&quot;) // any authenticated POST-requests should from an ADMIN or USER are allowed\r\n```\r\n\r\n* [`requestMatchers( HttpMethod, String ... )`][matcher paths &amp; HttpMethod] - this method combines the previous two, it allows to specify an `HttpMethod` and one or more `String` patterns.\r\n\r\n*Example:*\r\n\r\n```\r\n.requestMatchers(HttpMethod.POST, &quot;/bar/**&quot;).hasAnyRole(&quot;USER&quot;, &quot;ADMIN&quot;) // any POST-request should be authenticatd\r\n.requestMatchers(HttpMethod.DELETE, &quot;/baz/**&quot;).hasRole( &quot;ADMIN&quot;) // only ADMINs can issue DELETE-requests to these paths\r\n```\r\n\r\n* [`requestMatchers( RequestMatcher ... )`][matcher] - the last version is probably the most flexible one, it allows to provide an arbitrary number of combines [`RequestMatcher`][requestMatcher] instances. We don&#39;t need to implement this interface ourself (unless there&#39;s special need), there are several implementations available out of the box including `RegexRequestMatcher` (which can be used to replace outdated `regexMatchers()`).\r\n\r\n*Example:*\r\n\r\n```\r\n.requestMatchers(new RegexRequestMatcher(&quot;/foo/bar&quot;, &quot;POST&quot;)).authenticated()\r\n```\r\n\r\n# Example - Addressing the Original problem\r\n\r\n&gt; I would like to allow `POST` requests only to the `&quot;/api/subscription&quot;` path.\r\n\r\nFor that we would need to use this flavor of [`requestMatchers(HttpMethod, String...)`][matcher paths &amp; HttpMethod] which allows to specify HTTP-method and pattern for path `&quot;/api/subscription&quot;`.\r\n\r\n**Reminder:** &lt;del&gt;`WebSecurityConfigureAdapter`&lt;/del&gt; is [deprecated][config adapter] since Spring Security `5.7` release, and now `HttpSecurity` is being configured through `SecurityFilterChain` which should be defined as Bean.\r\n\r\nHere&#39;s how we can secure requests to paths defined in the question using Spring 6 and lambda DSL:\r\n\r\n```java\r\n@Configuration\r\npublic class SecurityConfig {\r\n    \r\n    @Bean\r\n    public SecurityFilterChain securityFilterChain(HttpSecurity http) {\r\n        \r\n        return http\r\n            // other configuration options\r\n            .authorizeHttpRequests(authCustomizer -&gt; authCustomizer\r\n                .requestMatchers(HttpMethod.POST, &quot;/api/subscriptions&quot;).permitAll()\r\n                .requestMatchers(\r\n                    &quot;/api/register&quot;, &quot;/api/register&quot;, &quot;/api/authenticate&quot;\r\n                ).permitAll()\r\n                .requestMatchers(&quot;/api/logs/**&quot;).hasAuthority(AuthoritiesConstants.ADMIN)\r\n                .requestMatchers(&quot;/api/**&quot;).authenticated()\r\n            )\r\n            .build();\r\n    }\r\n}\r\n```\r\n\r\n&lt;h3&gt;Note&lt;/h3&gt;\r\n\r\n* Security rules are being evaluated from top to bottom, the first matching rule would be applied. Make sure that rules are declared in the proper order.\r\n\r\n* Apply **deny-by-default** policy. While an application evolves, new paths get introduced, and there&#39;s a possibility that during these changes your colleagues might forget to update security restrictions and some end point would appear to be unprotected. To avoid that in each `SecurityFilterChain` (*we can declare more than one filter chain, to configure different parts of the system and specify their order*) as the last constraint you can introduce a matcher that encompasses all unspecified URLs governed by this `SecurityFilterChain` like `&quot;/foo/**&quot;` (i.e. all paths under /foo) applying either `authenticated()` or `denyAll()`. And `SecurityFilterChain` which would be considered as the last one to handle the request should cut out request to all unspecified URLs from the root with `requestMatchers(&quot;/**&quot;).denyAll()`. That configuration would prevent both unauthenticated access and disclosing what paths are valid in your system. If a newly introduced endpoint is not accessible (*for instance it should be permitted for non-authorize request*) would be obvious for your colleague immediately during development process. It&#39;s way safer to specify what should be open and keep everything else closed by default.\r\n\r\n# Spring 5.7 and Earlier\r\n\r\nAs I&#39;ve said at beginning even with an Spring version `antMatchers()` because by using them you can end up with intoducing Broken access control valnarability.\r\n\r\nHere&#39;s one more related link: [*Deprecate trailing slash match*][git deprecate trailing slash match].\r\n\r\nInstead consider applying either [`mvcMathcers()`][oldMatcher mvc] which as it name suggests uses Spring MVC matching rules, or regex-based [`regexMatchers()`][oldMatcher regex]. Both `mvcMathcers()` and `regexMatchers()` have an overloaded version that allows specifing an HTTP-method.\r\n\r\nHere how to secure the API from the question using `mvcMathcers()` and Spring Security 5.2 Lambda DSL:\r\n\r\n```\r\n@Configuration\r\npublic class SecurityConfig {\r\n    \r\n    @Bean\r\n    public SecurityFilterChain securityFilterChain1(HttpSecurity http) {\r\n        \r\n        return http\r\n            // other configuration options\r\n            .authorizeRequests(authCustomizer -&gt; authCustomizer\r\n                .mvcMatchers(\r\n                    &quot;/api/register&quot;, &quot;/api/register&quot;, &quot;/api/authenticate&quot;\r\n                ).permitAll()\r\n                .mvcMatchers(&quot;/api/logs/**&quot;).hasAuthority(AuthoritiesConstants.ADMIN)\r\n                .mvcMatchers(HttpMethod.POST, &quot;/api/subscriptions&quot;).permitAll()\r\n                .mvcMatchers(&quot;/api/**&quot;).authenticated()\r\n                .regexMatchers(&quot;/**&quot;).denyAll()\r\n            )\r\n            .build();\r\n    }\r\n}\r\n```\r\n\r\n\r\n\r\n\r\n   [SpringNew]: https://docs.spring.io/spring-security/reference/6.0/whats-new.html\r\n\r\n   [deprecated matcher methods]: https://github.com/spring-projects/spring-security/issues/11939\r\n\r\n   [git deprecate trailing slash match]: https://github.com/spring-projects/spring-framework/issues/28552\r\n\r\n   [requestMatcher httpMethod]: https://docs.spring.io/spring-security/site/docs/current/api/org/springframework/security/config/annotation/web/AbstractRequestMatcherRegistry.html#requestMatchers(java.lang.String...)\r\n\r\n   [authorizeHttp]: https://docs.spring.io/spring-security/site/docs/current/api/org/springframework/security/config/annotation/web/builders/HttpSecurity.html#authorizeHttpRequests(org.springframework.security.config.Customizer)\r\n\r\n   [lambda DSL]: https://spring.io/blog/2019/11/21/spring-security-lambda-dsl\r\n\r\n   [request Config]: https://docs.spring.io/spring-security/site/docs/current/api/org/springframework/security/config/annotation/web/configurers/AuthorizeHttpRequestsConfigurer.AuthorizationManagerRequestMatcherRegistry.html\r\n\r\n   [matcher paths]: https://docs.spring.io/spring-security/site/docs/current/api/org/springframework/security/config/annotation/web/AbstractRequestMatcherRegistry.html#requestMatchers(java.lang.String...)\r\n\r\n   [matcher HttpMethod]: https://docs.spring.io/spring-security/site/docs/current/api/org/springframework/security/config/annotation/web/AbstractRequestMatcherRegistry.html#requestMatchers(org.springframework.http.HttpMethod)\r\n\r\n   [matcher paths &amp; HttpMethod]: https://docs.spring.io/spring-security/site/docs/current/api/org/springframework/security/config/annotation/web/AbstractRequestMatcherRegistry.html#requestMatchers(org.springframework.http.HttpMethod,java.lang.String...)\r\n\r\n   [matcher]: https://docs.spring.io/spring-security/site/docs/current/api/org/springframework/security/config/annotation/web/AbstractRequestMatcherRegistry.html#requestMatchers(org.springframework.security.web.util.matcher.RequestMatcher...)\r\n\r\n   [requestMatcher]: https://docs.spring.io/spring-security/site/docs/current/api/org/springframework/security/web/util/matcher/RequestMatcher.html\r\n\r\n   [oldMatcher mvc]: https://docs.spring.io/spring-security/site/docs/5.3.9.RELEASE/api/\r\n\r\n   [oldMatcher regex]: https://docs.spring.io/spring-security/site/docs/5.3.9.RELEASE/api/\r\n\r\n   [config adapter]: https://spring.io/blog/2022/02/21/spring-security-without-the-websecurityconfigureradapter","title":"Spring Security - Authorize Request for certain URL &amp; HTTP-Method using HttpSecurity","body":"<h1>TL;DR</h1>\n<p>Since <a href=\"https://docs.spring.io/spring-security/reference/6.0/whats-new.html\" rel=\"nofollow noreferrer\"><strong>Spring 6.0</strong></a> release configuration methods <del><code>antMatchers()</code></del>, <del><code>mvcMathcers()</code></del> and <del><code>regexMatchers()</code></del> have been <strong>removed</strong> from the API.</p>\n<p>And several flavors of <code>requestMatchers()</code> method has been provided as a replacement.</p>\n<blockquote>\n<p><a href=\"https://github.com/spring-projects/spring-security/issues/11939\" rel=\"nofollow noreferrer\">gh-11939</a> - <strong>Remove deprecated</strong> antMatchers, mvcMatchers, regexMatchers helper methods from Java Configuration. <strong>Instead, use</strong> <code>requestMatchers</code> or <code>HttpSecurity#securityMatchers</code>.</p>\n</blockquote>\n<p>Also, an overloaded method <code>authorizeHttpRequests()</code> was introduced to replace <strong>Deprecated</strong> <del><code>authorizeRequests()</code></del>.</p>\n<p>Even if you're using an earlier Spring version in your project and not going to update to <em>Spring 6</em> very soon, <code>antMatchers()</code> <strong>isn't</strong> the best tool you can choose for securing requests to your application.</p>\n<p>While applying security rules using <code>antMatchers()</code> you need to be very careful because if you secure let's say path <code>&quot;/foo&quot;</code> these restrictions <strong>wouldn't</strong> be applied to other aliases of this path like <code>&quot;/foo/&quot;</code>, <code>&quot;/foo.thml&quot;</code>. As a consequence, it's very easy to misconfigure security rules and <strong>introduce a vulnerability</strong> (<em>for instance, a path that is supposed to be accessible only for Admins becomes available for any authenticated user, it's surprising that none of the answers above mentions this</em>).</p>\n<h1>Spring 6.0 - <a href=\"https://docs.spring.io/spring-security/site/docs/current/api/org/springframework/security/config/annotation/web/AbstractRequestMatcherRegistry.html#requestMatchers(java.lang.String...)\" rel=\"nofollow noreferrer\"><code>requestMatchers()</code></a></h1>\n<p>According to the documentation, the recommended way to restrict access to certain URL since <code>5.8</code> is to use <a href=\"https://docs.spring.io/spring-security/site/docs/current/api/org/springframework/security/config/annotation/web/builders/HttpSecurity.html#authorizeHttpRequests(org.springframework.security.config.Customizer)\" rel=\"nofollow noreferrer\"><code>HttpSecurity.authorizeHttpRequests()</code></a>, which as well as its predecessor comes in two flavors:</p>\n<ul>\n<li><p>A parameterless version, which returns an object responsible for configuring the requests (<em>to be precise, an instance of <a href=\"https://docs.spring.io/spring-security/site/docs/current/api/org/springframework/security/config/annotation/web/configurers/AuthorizeHttpRequestsConfigurer.AuthorizationManagerRequestMatcherRegistry.html\" rel=\"nofollow noreferrer\">this</a> lengthy-name class</em>). So we can chain <code>requestMatchers()</code> calls directly on it.</p>\n</li>\n<li><p>And the second one expecting an instance of the <code>Customizer</code> interface which allow to apply enhanced DSL (<em>domain-specific language</em>), by using lambda expressions. See <a href=\"https://spring.io/blog/2019/11/21/spring-security-lambda-dsl\" rel=\"nofollow noreferrer\"><em>this post</em></a>, it uses outdated matching methods but nicely illustrates the key idea of Lambda DSL, which makes the configuration more intuitive to read by visually grouping configuration options and eliminates the need to use method <code>and()</code>.</p>\n</li>\n</ul>\n<p>Which version of <code>authorizeHttpRequests()</code> to use is a <em>stylistic choice</em> (both are valid and supported in <code>6.0</code>).</p>\n<p>Now <code>requestMatchers()</code> are coming into play, this method has four overloaded versions which can replace any of the removed matching methods:</p>\n<ul>\n<li><a href=\"https://docs.spring.io/spring-security/site/docs/current/api/org/springframework/security/config/annotation/web/AbstractRequestMatcherRegistry.html#requestMatchers(java.lang.String...)\" rel=\"nofollow noreferrer\"><code>requestMatchers( String ... )</code></a> - expects a varargs of <code>String</code> patterns. This matcher uses the same rules for matching as Spring MVC. I.e. it would act in the same way as old <code>mvcMatchers()</code>, so that pattern <code>/foo</code> would match all existing aliases of that path like <code>&quot;/foo&quot;</code>, <code>&quot;/foo/&quot;</code>, <code>&quot;/foo.html&quot;</code>. All other versions of <code>requestMatchers()</code> have the same matching behavior, it eliminates the possibility of misconfiguration, which was an Achilles' heel of <code>antMatchers()</code>. <strong>Note</strong> that the corresponding restriction (<code>hasRole()</code>, <code>access()</code>, etc.) would be applied to any matching request regardless of its HttpMethod.</li>\n</ul>\n<p><em>Example:</em></p>\n<pre><code>.requestMatchers(&quot;/foo/*&quot;).hasRole(&quot;ADMIN&quot;) // only authenticated user with role ADMIN can access path /foo/something\n.requestMatchers(&quot;/bar/*&quot;, &quot;/baz/*&quot;).hasRole(&quot;ADMIN&quot;) // only authenticated requests to paths /foo/something and /baz/something  are allowed\n</code></pre>\n<ul>\n<li><a href=\"https://docs.spring.io/spring-security/site/docs/current/api/org/springframework/security/config/annotation/web/AbstractRequestMatcherRegistry.html#requestMatchers(org.springframework.http.HttpMethod)\" rel=\"nofollow noreferrer\"><code>requestMatchers( HttpMethod )</code></a> - expects an <code>HttpMethod</code> as argument. The corresponding restriction (<code>hasRole()</code>, <code>access()</code>, etc.) would be applied to any request handled by the current <code>SecurityFilterChain</code> having specified HttpMethod. If <code>null</code> provided as an argument, any request would match.</li>\n</ul>\n<p><em>Example:</em></p>\n<pre><code>.requestMatchers(HttpMethod.POST, &quot;/bar/**&quot;).hasAnyRole(&quot;USER&quot;, &quot;ADMIN&quot;) // any authenticated POST-requests should from an ADMIN or USER are allowed\n</code></pre>\n<ul>\n<li><a href=\"https://docs.spring.io/spring-security/site/docs/current/api/org/springframework/security/config/annotation/web/AbstractRequestMatcherRegistry.html#requestMatchers(org.springframework.http.HttpMethod,java.lang.String...)\" rel=\"nofollow noreferrer\"><code>requestMatchers( HttpMethod, String ... )</code></a> - this method combines the previous two, it allows to specify an <code>HttpMethod</code> and one or more <code>String</code> patterns.</li>\n</ul>\n<p><em>Example:</em></p>\n<pre><code>.requestMatchers(HttpMethod.POST, &quot;/bar/**&quot;).hasAnyRole(&quot;USER&quot;, &quot;ADMIN&quot;) // any POST-request should be authenticatd\n.requestMatchers(HttpMethod.DELETE, &quot;/baz/**&quot;).hasRole( &quot;ADMIN&quot;) // only ADMINs can issue DELETE-requests to these paths\n</code></pre>\n<ul>\n<li><a href=\"https://docs.spring.io/spring-security/site/docs/current/api/org/springframework/security/config/annotation/web/AbstractRequestMatcherRegistry.html#requestMatchers(org.springframework.security.web.util.matcher.RequestMatcher...)\" rel=\"nofollow noreferrer\"><code>requestMatchers( RequestMatcher ... )</code></a> - the last version is probably the most flexible one, it allows to provide an arbitrary number of combines <a href=\"https://docs.spring.io/spring-security/site/docs/current/api/org/springframework/security/web/util/matcher/RequestMatcher.html\" rel=\"nofollow noreferrer\"><code>RequestMatcher</code></a> instances. We don't need to implement this interface ourself (unless there's special need), there are several implementations available out of the box including <code>RegexRequestMatcher</code> (which can be used to replace outdated <code>regexMatchers()</code>).</li>\n</ul>\n<p><em>Example:</em></p>\n<pre><code>.requestMatchers(new RegexRequestMatcher(&quot;/foo/bar&quot;, &quot;POST&quot;)).authenticated()\n</code></pre>\n<h1>Example - Addressing the Original problem</h1>\n<blockquote>\n<p>I would like to allow <code>POST</code> requests only to the <code>&quot;/api/subscription&quot;</code> path.</p>\n</blockquote>\n<p>For that we would need to use this flavor of <a href=\"https://docs.spring.io/spring-security/site/docs/current/api/org/springframework/security/config/annotation/web/AbstractRequestMatcherRegistry.html#requestMatchers(org.springframework.http.HttpMethod,java.lang.String...)\" rel=\"nofollow noreferrer\"><code>requestMatchers(HttpMethod, String...)</code></a> which allows to specify HTTP-method and pattern for path <code>&quot;/api/subscription&quot;</code>.</p>\n<p><strong>Reminder:</strong> <del><code>WebSecurityConfigureAdapter</code></del> is <a href=\"https://spring.io/blog/2022/02/21/spring-security-without-the-websecurityconfigureradapter\" rel=\"nofollow noreferrer\">deprecated</a> since Spring Security <code>5.7</code> release, and now <code>HttpSecurity</code> is being configured through <code>SecurityFilterChain</code> which should be defined as Bean.</p>\n<p>Here's how we can secure requests to paths defined in the question using Spring 6 and lambda DSL:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\npublic class SecurityConfig {\n    \n    @Bean\n    public SecurityFilterChain securityFilterChain(HttpSecurity http) {\n        \n        return http\n            // other configuration options\n            .authorizeHttpRequests(authCustomizer -&gt; authCustomizer\n                .requestMatchers(HttpMethod.POST, &quot;/api/subscriptions&quot;).permitAll()\n                .requestMatchers(\n                    &quot;/api/register&quot;, &quot;/api/register&quot;, &quot;/api/authenticate&quot;\n                ).permitAll()\n                .requestMatchers(&quot;/api/logs/**&quot;).hasAuthority(AuthoritiesConstants.ADMIN)\n                .requestMatchers(&quot;/api/**&quot;).authenticated()\n            )\n            .build();\n    }\n}\n</code></pre>\n<h3>Note</h3>\n<ul>\n<li><p>Security rules are being evaluated from top to bottom, the first matching rule would be applied. Make sure that rules are declared in the proper order.</p>\n</li>\n<li><p>Apply <strong>deny-by-default</strong> policy. While an application evolves, new paths get introduced, and there's a possibility that during these changes your colleagues might forget to update security restrictions and some end point would appear to be unprotected. To avoid that in each <code>SecurityFilterChain</code> (<em>we can declare more than one filter chain, to configure different parts of the system and specify their order</em>) as the last constraint you can introduce a matcher that encompasses all unspecified URLs governed by this <code>SecurityFilterChain</code> like <code>&quot;/foo/**&quot;</code> (i.e. all paths under /foo) applying either <code>authenticated()</code> or <code>denyAll()</code>. And <code>SecurityFilterChain</code> which would be considered as the last one to handle the request should cut out request to all unspecified URLs from the root with <code>requestMatchers(&quot;/**&quot;).denyAll()</code>. That configuration would prevent both unauthenticated access and disclosing what paths are valid in your system. If a newly introduced endpoint is not accessible (<em>for instance it should be permitted for non-authorize request</em>) would be obvious for your colleague immediately during development process. It's way safer to specify what should be open and keep everything else closed by default.</p>\n</li>\n</ul>\n<h1>Spring 5.7 and Earlier</h1>\n<p>As I've said at beginning even with an Spring version <code>antMatchers()</code> because by using them you can end up with intoducing Broken access control valnarability.</p>\n<p>Here's one more related link: <a href=\"https://github.com/spring-projects/spring-framework/issues/28552\" rel=\"nofollow noreferrer\"><em>Deprecate trailing slash match</em></a>.</p>\n<p>Instead consider applying either <a href=\"https://docs.spring.io/spring-security/site/docs/5.3.9.RELEASE/api/\" rel=\"nofollow noreferrer\"><code>mvcMathcers()</code></a> which as it name suggests uses Spring MVC matching rules, or regex-based <a href=\"https://docs.spring.io/spring-security/site/docs/5.3.9.RELEASE/api/\" rel=\"nofollow noreferrer\"><code>regexMatchers()</code></a>. Both <code>mvcMathcers()</code> and <code>regexMatchers()</code> have an overloaded version that allows specifing an HTTP-method.</p>\n<p>Here how to secure the API from the question using <code>mvcMathcers()</code> and Spring Security 5.2 Lambda DSL:</p>\n<pre><code>@Configuration\npublic class SecurityConfig {\n    \n    @Bean\n    public SecurityFilterChain securityFilterChain1(HttpSecurity http) {\n        \n        return http\n            // other configuration options\n            .authorizeRequests(authCustomizer -&gt; authCustomizer\n                .mvcMatchers(\n                    &quot;/api/register&quot;, &quot;/api/register&quot;, &quot;/api/authenticate&quot;\n                ).permitAll()\n                .mvcMatchers(&quot;/api/logs/**&quot;).hasAuthority(AuthoritiesConstants.ADMIN)\n                .mvcMatchers(HttpMethod.POST, &quot;/api/subscriptions&quot;).permitAll()\n                .mvcMatchers(&quot;/api/**&quot;).authenticated()\n                .regexMatchers(&quot;/**&quot;).denyAll()\n            )\n            .build();\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":1612170,"reputation":5977,"user_id":1490806,"accept_rate":86,"display_name":"Ignasi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":121922,"favorite_count":0,"down_vote_count":0,"up_vote_count":55,"accepted_answer_id":29087933,"answer_count":3,"score":55,"last_activity_date":1698100667,"creation_date":1425673459,"question_id":28907030,"body_markdown":"Is there any way to authorize a `POST` http-request to a specific URL using `org.springframework.security.config.annotation.web.builders.HttpSecurity` ? \r\n\r\nI&#39;m using `HttpSecurity` as:\r\n\r\n \r\n\r\n        @Override\r\n        protected void configure(HttpSecurity http) throws Exception {\r\n            http\r\n                .addFilterAfter(new CsrfCookieGeneratorFilter(), CsrfFilter.class)\r\n                .exceptionHandling()\r\n                .authenticationEntryPoint(authenticationEntryPoint)\r\n            .and()\r\n                .rememberMe()\r\n                .rememberMeServices(rememberMeServices)\r\n                .key(env.getProperty(&quot;jhipster.security.rememberme.key&quot;))\r\n            .and()\r\n                .formLogin()\r\n                .loginProcessingUrl(&quot;/api/authentication&quot;)\r\n                .successHandler(ajaxAuthenticationSuccessHandler)\r\n                .failureHandler(ajaxAuthenticationFailureHandler)\r\n                .usernameParameter(&quot;j_username&quot;)\r\n                .passwordParameter(&quot;j_password&quot;)\r\n                .permitAll()\r\n            .and()\r\n                .logout()\r\n                .logoutUrl(&quot;/api/logout&quot;)\r\n                .logoutSuccessHandler(ajaxLogoutSuccessHandler)\r\n                .deleteCookies(&quot;JSESSIONID&quot;)\r\n                .permitAll()\r\n            .and()\r\n                .headers()\r\n                .frameOptions()\r\n                .disable()\r\n                .authorizeRequests()\r\n                    .antMatchers(&quot;/api/register&quot;).permitAll()\r\n                    .antMatchers(&quot;/api/activate&quot;).permitAll()\r\n                    .antMatchers(&quot;/api/authenticate&quot;).permitAll()\r\n                    .antMatchers(&quot;/api/logs/**&quot;).hasAuthority(AuthoritiesConstants.ADMIN)\r\n                    .antMatchers(&quot;/api/subscriptions&quot;).permitAll()\r\n                    .antMatchers(&quot;/api/**&quot;).authenticated();\r\n    }\r\n\r\nI would like to allow only `POST` requests to the path `&quot;/api/subscription&quot;`.","title":"Spring Security - Authorize Request for certain URL &amp; HTTP-Method using HttpSecurity","body":"<p>Is there any way to authorize a <code>POST</code> http-request to a specific URL using <code>org.springframework.security.config.annotation.web.builders.HttpSecurity</code> ?</p>\n<p>I'm using <code>HttpSecurity</code> as:</p>\n<pre><code>    @Override\n    protected void configure(HttpSecurity http) throws Exception {\n        http\n            .addFilterAfter(new CsrfCookieGeneratorFilter(), CsrfFilter.class)\n            .exceptionHandling()\n            .authenticationEntryPoint(authenticationEntryPoint)\n        .and()\n            .rememberMe()\n            .rememberMeServices(rememberMeServices)\n            .key(env.getProperty(&quot;jhipster.security.rememberme.key&quot;))\n        .and()\n            .formLogin()\n            .loginProcessingUrl(&quot;/api/authentication&quot;)\n            .successHandler(ajaxAuthenticationSuccessHandler)\n            .failureHandler(ajaxAuthenticationFailureHandler)\n            .usernameParameter(&quot;j_username&quot;)\n            .passwordParameter(&quot;j_password&quot;)\n            .permitAll()\n        .and()\n            .logout()\n            .logoutUrl(&quot;/api/logout&quot;)\n            .logoutSuccessHandler(ajaxLogoutSuccessHandler)\n            .deleteCookies(&quot;JSESSIONID&quot;)\n            .permitAll()\n        .and()\n            .headers()\n            .frameOptions()\n            .disable()\n            .authorizeRequests()\n                .antMatchers(&quot;/api/register&quot;).permitAll()\n                .antMatchers(&quot;/api/activate&quot;).permitAll()\n                .antMatchers(&quot;/api/authenticate&quot;).permitAll()\n                .antMatchers(&quot;/api/logs/**&quot;).hasAuthority(AuthoritiesConstants.ADMIN)\n                .antMatchers(&quot;/api/subscriptions&quot;).permitAll()\n                .antMatchers(&quot;/api/**&quot;).authenticated();\n}\n</code></pre>\n<p>I would like to allow only <code>POST</code> requests to the path <code>&quot;/api/subscription&quot;</code>.</p>\n"},{"tags":["java","rest","jpa","glassfish","eclipselink"],"comments":[{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":1,"creation_date":1444757614,"post_id":33104232,"comment_id":54032496,"body_markdown":"Joined inheritance will by default use a &#39;type&#39; field to determine the entity class to use, as does json/xml marshalling.  You have a type field, but populated it with &quot;Miss&#39; which can&#39;t be converted to a class.  see http://stackoverflow.com/questions/8942945/eclipselink-moxy-inheritance-and-attribute-name-oveloading-based-on-type for custom strategies or https://www.eclipse.org/eclipselink/documentation/2.4/moxy/type_level003.htm if you can change the JSON being posted","body":"Joined inheritance will by default use a &#39;type&#39; field to determine the entity class to use, as does json/xml marshalling.  You have a type field, but populated it with &quot;Miss&#39; which can&#39;t be converted to a class.  see <a href=\"http://stackoverflow.com/questions/8942945/eclipselink-moxy-inheritance-and-attribute-name-oveloading-based-on-type\" title=\"eclipselink moxy inheritance and attribute name oveloading based on type\">stackoverflow.com/questions/8942945/&hellip;</a> for custom strategies or <a href=\"https://www.eclipse.org/eclipselink/documentation/2.4/moxy/type_level003.htm\" rel=\"nofollow noreferrer\">eclipse.org/eclipselink/documentation/2.4/moxy/&hellip;</a> if you can change the JSON being posted"},{"owner":{"account_id":3037621,"reputation":1008,"user_id":2575318,"accept_rate":89,"display_name":"ammerzon"},"score":0,"creation_date":1444807612,"post_id":33104232,"comment_id":54051499,"body_markdown":"I renamed the attribute to throwingType which solved my problem. Could you please post your comment as answer so I can mark it as answer.","body":"I renamed the attribute to throwingType which solved my problem. Could you please post your comment as answer so I can mark it as answer."},{"owner":{"account_id":3037621,"reputation":1008,"user_id":2575318,"accept_rate":89,"display_name":"ammerzon"},"score":2,"creation_date":1444807856,"post_id":33104232,"comment_id":54051651,"body_markdown":"Is there any explanation why EclipseLink fails and Hibernate not?","body":"Is there any explanation why EclipseLink fails and Hibernate not?"},{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":0,"creation_date":1444827555,"post_id":33104232,"comment_id":54064225,"body_markdown":"Hibernate does not bother with a type field when using joined inheritance in the database, as it can use query joining mechanisms.  EclipseLink does use the type under the belief it is more efficient to filter out unneeded joins, and also has to contend with JSON/XML where joins aren&#39;t possible.","body":"Hibernate does not bother with a type field when using joined inheritance in the database, as it can use query joining mechanisms.  EclipseLink does use the type under the belief it is more efficient to filter out unneeded joins, and also has to contend with JSON/XML where joins aren&#39;t possible."}],"answers":[{"tags":[],"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1444827686,"creation_date":1444827686,"answer_id":33126041,"question_id":33104232,"body_markdown":"Joined inheritance will by default use a &#39;type&#39; field to determine the entity class to use, as does json/xml marshalling. You have a type field, but populated it with &quot;Miss&#39; which can&#39;t be converted to a class.\r\n\r\n See https://stackoverflow.com/questions/8942945/eclipselink-moxy-inheritance-and-attribute-name-oveloading-based-on-type for custom strategies or https://www.eclipse.org/eclipselink/documentation/2.4/moxy/type_level003.htm if you can change the JSON being posted.\r\n\r\nThe type field within JPA is somewhat discussed here http://www.coderanch.com/t/489497/ORM/databases/InheritanceType-JOINED-DiscriminatorColumn\r\nand here\r\nhttps://en.wikibooks.org/wiki/Java_Persistence/Inheritance#No_class_discriminator_column_2\r\n\r\n","title":"EclipseLink: Missing class for indicator field value of typ","body":"<p>Joined inheritance will by default use a 'type' field to determine the entity class to use, as does json/xml marshalling. You have a type field, but populated it with \"Miss' which can't be converted to a class.</p>\n\n<p>See <a href=\"https://stackoverflow.com/questions/8942945/eclipselink-moxy-inheritance-and-attribute-name-oveloading-based-on-type\">eclipselink/Moxy : inheritance and attribute name oveloading based on type</a> for custom strategies or <a href=\"https://www.eclipse.org/eclipselink/documentation/2.4/moxy/type_level003.htm\" rel=\"nofollow noreferrer\">https://www.eclipse.org/eclipselink/documentation/2.4/moxy/type_level003.htm</a> if you can change the JSON being posted.</p>\n\n<p>The type field within JPA is somewhat discussed here <a href=\"http://www.coderanch.com/t/489497/ORM/databases/InheritanceType-JOINED-DiscriminatorColumn\" rel=\"nofollow noreferrer\">http://www.coderanch.com/t/489497/ORM/databases/InheritanceType-JOINED-DiscriminatorColumn</a>\nand here\n<a href=\"https://en.wikibooks.org/wiki/Java_Persistence/Inheritance#No_class_discriminator_column_2\" rel=\"nofollow noreferrer\">https://en.wikibooks.org/wiki/Java_Persistence/Inheritance#No_class_discriminator_column_2</a></p>\n"},{"tags":[],"owner":{"account_id":1273280,"reputation":669,"user_id":1229080,"accept_rate":56,"display_name":"Alex Wade"},"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1466105920,"creation_date":1466105920,"answer_id":37868028,"question_id":33104232,"body_markdown":"You will get this error if you use a field named &quot;type&quot;.","title":"EclipseLink: Missing class for indicator field value of typ","body":"<p>You will get this error if you use a field named \"type\".</p>\n"},{"tags":[],"owner":{"account_id":11934710,"reputation":21,"user_id":8733632,"display_name":"Stefan Uhlig"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698098400,"creation_date":1697789050,"answer_id":77329254,"question_id":33104232,"body_markdown":"Eclipselink found a record with the mentioned inheritance discriminator value &quot;Miss&quot;. You need to specify a inherited class, which defines that type with @DiscriminatorValue(value = &quot;Miss&quot;). \r\n\r\nIf you have many such undefined types, it is questionable if inheritance is a good decision. You may consider to change your model to an aggregation, where you aggregate the inherited entity in the inherited class and define a &quot;type&quot; field as a normal column in the inherited class.\r\n\r\nIf you do not need the inherited type &quot;Miss&quot; at all, you may catch the DescriptorException / PersistenceException.","title":"EclipseLink: Missing class for indicator field value of typ","body":"<p>Eclipselink found a record with the mentioned inheritance discriminator value &quot;Miss&quot;. You need to specify a inherited class, which defines that type with @DiscriminatorValue(value = &quot;Miss&quot;).</p>\n<p>If you have many such undefined types, it is questionable if inheritance is a good decision. You may consider to change your model to an aggregation, where you aggregate the inherited entity in the inherited class and define a &quot;type&quot; field as a normal column in the inherited class.</p>\n<p>If you do not need the inherited type &quot;Miss&quot; at all, you may catch the DescriptorException / PersistenceException.</p>\n"}],"owner":{"account_id":3037621,"reputation":1008,"user_id":2575318,"accept_rate":89,"display_name":"ammerzon"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":11412,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"accepted_answer_id":33126041,"answer_count":3,"score":8,"last_activity_date":1698098400,"creation_date":1444743594,"question_id":33104232,"body_markdown":"My application runs on Payara and provides a REST API but when I try to create an object with a POST request I get the following exception: \r\n\r\n    Exception [EclipseLink-43] (Eclipse Persistence Services - 2.6.0.payara-p1): org.eclipse.persistence.exceptions.DescriptorException\r\n    Exception Description: Missing class for indicator field value [Miss] of type [class java.lang.String].\r\n    Descriptor: XMLDescriptor(at.htl.handballinheritance.entity.Throw --&gt; [DatabaseTable(event), DatabaseTable(dataObject)])\r\n\t  at org.eclipse.persistence.exceptions.DescriptorException.missingClassForIndicatorFieldValue(DescriptorException.java:940)\r\n\t  at org.eclipse.persistence.internal.oxm.QNameInheritancePolicy.classFromRow(QNameInheritancePolicy.java:278)\r\n      ...\r\n[Full Stacktrace][1]\r\n\r\nOn the contrary everything is fine and no errors occur when I am executing the program on Wildfly which uses Hibernate.\r\n\r\nEntities:\r\n    \r\n    @Entity\r\n    @Inheritance(strategy = InheritanceType.JOINED)\r\n    @XmlRootElement\r\n    public abstract class Event extends DataObject implements Serializable {\r\n        ... \r\n    }\r\n\r\n    @Entity\r\n    public class Throw extends Event implements Serializable {\r\n\r\n        @Enumerated(EnumType.STRING)\r\n        @NotNull\r\n        private ThrowingType type;\r\n\r\n        ...\r\n    }\r\n\r\n    public enum ThrowingType {\r\n        Goal, Miss\r\n    }\r\n\r\n REST API:\r\n\r\n    @POST\r\n    public Response create(Throw entity) {\r\n        em.persist(entity);\r\n        return Response.created(URI.create(&quot;...&quot;)).build();\r\n    }\r\n\r\nI think that Eclipselink has problems to unmarshal my json. Do I need any additional annotation?\r\n\r\n  [1]: http://pastebin.ca/3195093","title":"EclipseLink: Missing class for indicator field value of typ","body":"<p>My application runs on Payara and provides a REST API but when I try to create an object with a POST request I get the following exception: </p>\n\n<pre><code>Exception [EclipseLink-43] (Eclipse Persistence Services - 2.6.0.payara-p1): org.eclipse.persistence.exceptions.DescriptorException\nException Description: Missing class for indicator field value [Miss] of type [class java.lang.String].\nDescriptor: XMLDescriptor(at.htl.handballinheritance.entity.Throw --&gt; [DatabaseTable(event), DatabaseTable(dataObject)])\n  at org.eclipse.persistence.exceptions.DescriptorException.missingClassForIndicatorFieldValue(DescriptorException.java:940)\n  at org.eclipse.persistence.internal.oxm.QNameInheritancePolicy.classFromRow(QNameInheritancePolicy.java:278)\n  ...\n</code></pre>\n\n<p><a href=\"http://pastebin.ca/3195093\" rel=\"noreferrer\">Full Stacktrace</a></p>\n\n<p>On the contrary everything is fine and no errors occur when I am executing the program on Wildfly which uses Hibernate.</p>\n\n<p>Entities:</p>\n\n<pre><code>@Entity\n@Inheritance(strategy = InheritanceType.JOINED)\n@XmlRootElement\npublic abstract class Event extends DataObject implements Serializable {\n    ... \n}\n\n@Entity\npublic class Throw extends Event implements Serializable {\n\n    @Enumerated(EnumType.STRING)\n    @NotNull\n    private ThrowingType type;\n\n    ...\n}\n\npublic enum ThrowingType {\n    Goal, Miss\n}\n</code></pre>\n\n<p>REST API:</p>\n\n<pre><code>@POST\npublic Response create(Throw entity) {\n    em.persist(entity);\n    return Response.created(URI.create(\"...\")).build();\n}\n</code></pre>\n\n<p>I think that Eclipselink has problems to unmarshal my json. Do I need any additional annotation?</p>\n"},{"tags":["java","ocsp"],"answers":[{"tags":[],"owner":{"account_id":16394206,"reputation":79,"user_id":11842231,"display_name":"langio"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1698097856,"creation_date":1698097856,"answer_id":77348504,"question_id":77347107,"body_markdown":"Read deeper into [this spec][1], and found this matrix: [![enter image description here][2]][2]\r\n\r\nSo, PKIXParameters has a `revocationEnabled` property that is set to `true` by default, but there is also an `ocsp.enable` property that is set to `false` by default. This configuration will only cause CRL revocation to occur. \r\n\r\nSetting `ocsp.enable` to `true` via: `Security.setProperty(&quot;ocsp.enable&quot;, &quot;true&quot;);` fixed the issue.\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/technotes/guides/security/certpath/CertPathProgGuide.html\r\n  [2]: https://i.stack.imgur.com/IyR9z.png","title":"PKIXRevocationChecker does not use OCSP Responder URL set in Certificate","body":"<p>Read deeper into <a href=\"https://docs.oracle.com/javase/8/docs/technotes/guides/security/certpath/CertPathProgGuide.html\" rel=\"nofollow noreferrer\">this spec</a>, and found this matrix: <a href=\"https://i.stack.imgur.com/IyR9z.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/IyR9z.png\" alt=\"enter image description here\" /></a></p>\n<p>So, PKIXParameters has a <code>revocationEnabled</code> property that is set to <code>true</code> by default, but there is also an <code>ocsp.enable</code> property that is set to <code>false</code> by default. This configuration will only cause CRL revocation to occur.</p>\n<p>Setting <code>ocsp.enable</code> to <code>true</code> via: <code>Security.setProperty(&quot;ocsp.enable&quot;, &quot;true&quot;);</code> fixed the issue.</p>\n"}],"owner":{"account_id":16394206,"reputation":79,"user_id":11842231,"display_name":"langio"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":26,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":77348504,"answer_count":1,"score":-1,"last_activity_date":1698097856,"creation_date":1698080736,"question_id":77347107,"body_markdown":"I am trying to perform certificate validation with JAVA&#39;s `CertPathValidator`, but am having difficulty with the revocation validation.\r\n\r\nThe certificate I am trying to validate has the OCSP URL encoded within it, but for some reason `PKIXRevocationChecker` does not load this URL.\r\n\r\nI took a look at how the `PKIXRevocationChecker` is initialized and found that it will only check from `Security.getProperty(&quot;ocsp.responderURL&quot;)` if one has not been manually configured.\r\n\r\nIs this the intended behavior of the library? I would think that the library should automatically use the OCSP responder URL if it is provided in the certificate being validated.\r\n\r\nFrom the spec (https://docs.oracle.com/javase/8/docs/technotes/guides/security/jsse/ocsp.html): \r\n\r\n&gt; By default, the location of the OCSP responder is determined implicitly from the certificate being validated. The property is used when the Authority Information Access extension (defined in RFC 5280) is absent from the certificate or when it requires overriding.\r\n","title":"PKIXRevocationChecker does not use OCSP Responder URL set in Certificate","body":"<p>I am trying to perform certificate validation with JAVA's <code>CertPathValidator</code>, but am having difficulty with the revocation validation.</p>\n<p>The certificate I am trying to validate has the OCSP URL encoded within it, but for some reason <code>PKIXRevocationChecker</code> does not load this URL.</p>\n<p>I took a look at how the <code>PKIXRevocationChecker</code> is initialized and found that it will only check from <code>Security.getProperty(&quot;ocsp.responderURL&quot;)</code> if one has not been manually configured.</p>\n<p>Is this the intended behavior of the library? I would think that the library should automatically use the OCSP responder URL if it is provided in the certificate being validated.</p>\n<p>From the spec (<a href=\"https://docs.oracle.com/javase/8/docs/technotes/guides/security/jsse/ocsp.html\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/8/docs/technotes/guides/security/jsse/ocsp.html</a>):</p>\n<blockquote>\n<p>By default, the location of the OCSP responder is determined implicitly from the certificate being validated. The property is used when the Authority Information Access extension (defined in RFC 5280) is absent from the certificate or when it requires overriding.</p>\n</blockquote>\n"},{"tags":["java","maven","selenium-webdriver","selenium-chromedriver"],"comments":[{"owner":{"account_id":476019,"reputation":14699,"user_id":886697,"accept_rate":92,"display_name":"Stanislav Bashkyrtsev"},"score":0,"creation_date":1698097826,"post_id":77348491,"comment_id":136359858,"body_markdown":"What&#39;s going to be the difference between 2 configurations - sounds like it&#39;s just about different params that need to be passed to Selenium?","body":"What&#39;s going to be the difference between 2 configurations - sounds like it&#39;s just about different params that need to be passed to Selenium?"},{"owner":{"account_id":20310722,"reputation":143,"user_id":14897868,"display_name":"Kyle"},"score":0,"creation_date":1698098084,"post_id":77348491,"comment_id":136359884,"body_markdown":"Yeah mostly params, cucumber options, driver options etc","body":"Yeah mostly params, cucumber options, driver options etc"},{"owner":{"account_id":476019,"reputation":14699,"user_id":886697,"accept_rate":92,"display_name":"Stanislav Bashkyrtsev"},"score":0,"creation_date":1698098690,"post_id":77348491,"comment_id":136359949,"body_markdown":"So you just need to pass params to the code that initializes all of that. And the code is going to be shared across all the tests, right? If you use surefire plugin to start tests (would be used in case of JUnit/TestNG) the way to pass options is through `&lt;configuration&gt;&lt;argLine&gt;...&lt;/argLine&gt;&lt;/configuration&gt;`. BTW, how far are you in writing those tests? Do you already have a lot of those?","body":"So you just need to pass params to the code that initializes all of that. And the code is going to be shared across all the tests, right? If you use surefire plugin to start tests (would be used in case of JUnit/TestNG) the way to pass options is through <code>&lt;configuration&gt;&lt;argLine&gt;...&lt;&#47;argLine&gt;&lt;&#47;configuration&gt;</code>. BTW, how far are you in writing those tests? Do you already have a lot of those?"},{"owner":{"account_id":20310722,"reputation":143,"user_id":14897868,"display_name":"Kyle"},"score":0,"creation_date":1698098809,"post_id":77348491,"comment_id":136359965,"body_markdown":"I’ve got surefire installed ! I’ve three tests but I’m more concerned about getting my framework in order before expanding coverage. And yeah all tests when running locally will use the same arguments","body":"I’ve got surefire installed ! I’ve three tests but I’m more concerned about getting my framework in order before expanding coverage. And yeah all tests when running locally will use the same arguments"},{"owner":{"account_id":20310722,"reputation":143,"user_id":14897868,"display_name":"Kyle"},"score":0,"creation_date":1698099311,"post_id":77348491,"comment_id":136360018,"body_markdown":"The docker one will contain a few more steps as I need to build the container and then run the command in the container. \n\nI could also have shell scripts and use Executions on the maven plug-in in the POM. But again it’s the what’s the “correct” way. What’s the standard most follow?","body":"The docker one will contain a few more steps as I need to build the container and then run the command in the container.   I could also have shell scripts and use Executions on the maven plug-in in the POM. But again it’s the what’s the “correct” way. What’s the standard most follow?"},{"owner":{"account_id":476019,"reputation":14699,"user_id":886697,"accept_rate":92,"display_name":"Stanislav Bashkyrtsev"},"score":0,"creation_date":1698099313,"post_id":77348491,"comment_id":136360019,"body_markdown":"Ok.. Since you&#39;re not far from the start yet, maybe you could reconsider your stack, so I&#39;ll just comment here and you feel free to ignore. First, Cucumber and any other given-when-then frameworks are too cumbersome, and I don&#39;t think there are many who still use them. I&#39;d use JUnit instead. Then.. Google has been developing Puppeteer for in-browser testing, and then Microsoft lured away the team and now developing Playwright, I&#39;m not sure if it makes sense to keep using Selenium.","body":"Ok.. Since you&#39;re not far from the start yet, maybe you could reconsider your stack, so I&#39;ll just comment here and you feel free to ignore. First, Cucumber and any other given-when-then frameworks are too cumbersome, and I don&#39;t think there are many who still use them. I&#39;d use JUnit instead. Then.. Google has been developing Puppeteer for in-browser testing, and then Microsoft lured away the team and now developing Playwright, I&#39;m not sure if it makes sense to keep using Selenium."},{"owner":{"account_id":476019,"reputation":14699,"user_id":886697,"accept_rate":92,"display_name":"Stanislav Bashkyrtsev"},"score":0,"creation_date":1698099396,"post_id":77348491,"comment_id":136360028,"body_markdown":"As for the Docker - it probably makes sense to run mvn inside Docker. But I&#39;m not sure what you want to do with it, so I&#39;ll also mention Testcontainers - it&#39;s a way to start a docker container from Java. Used e.g. when you want to start a DB and run tests against that DB.","body":"As for the Docker - it probably makes sense to run mvn inside Docker. But I&#39;m not sure what you want to do with it, so I&#39;ll also mention Testcontainers - it&#39;s a way to start a docker container from Java. Used e.g. when you want to start a DB and run tests against that DB."},{"owner":{"account_id":20310722,"reputation":143,"user_id":14897868,"display_name":"Kyle"},"score":0,"creation_date":1698099491,"post_id":77348491,"comment_id":136360037,"body_markdown":"Unfortunately I’m going to have to stay in selenium as it’s a QA repo. I’m tasked with moving all tests which are in selenium to a more robust and “standard” way of working. Which is why I’m defining lots of correct ways, adding linters etc. Then I’ll pull across the tests into the new framework which has been setup correctly","body":"Unfortunately I’m going to have to stay in selenium as it’s a QA repo. I’m tasked with moving all tests which are in selenium to a more robust and “standard” way of working. Which is why I’m defining lots of correct ways, adding linters etc. Then I’ll pull across the tests into the new framework which has been setup correctly"},{"owner":{"account_id":20310722,"reputation":143,"user_id":14897868,"display_name":"Kyle"},"score":0,"creation_date":1698099600,"post_id":77348491,"comment_id":136360049,"body_markdown":"The docker will be used as I want to schedule the tests to run automatically. I don’t want them running on my local PC, they’ll probably run at night in a docker container, which is hosted on aws or something then spun back down. So I’ve results in the morning","body":"The docker will be used as I want to schedule the tests to run automatically. I don’t want them running on my local PC, they’ll probably run at night in a docker container, which is hosted on aws or something then spun back down. So I’ve results in the morning"},{"owner":{"account_id":476019,"reputation":14699,"user_id":886697,"accept_rate":92,"display_name":"Stanislav Bashkyrtsev"},"score":0,"creation_date":1698099698,"post_id":77348491,"comment_id":136360060,"body_markdown":"Ah, for scheduling jobs remotely you can take a look at CI servers/services like GitHub Actions, Jenkins, etc. Those will give you an ability to schedule, run manually, run on a push to the repository, and then can also visualize/see the details from within browser.","body":"Ah, for scheduling jobs remotely you can take a look at CI servers/services like GitHub Actions, Jenkins, etc. Those will give you an ability to schedule, run manually, run on a push to the repository, and then can also visualize/see the details from within browser."},{"owner":{"account_id":20310722,"reputation":143,"user_id":14897868,"display_name":"Kyle"},"score":0,"creation_date":1698100031,"post_id":77348491,"comment_id":136360086,"body_markdown":"Yeah it’s currently set to run via Jenkins albeit locally for now until i get it running on a hosted docker container.","body":"Yeah it’s currently set to run via Jenkins albeit locally for now until i get it running on a hosted docker container."},{"owner":{"account_id":476019,"reputation":14699,"user_id":886697,"accept_rate":92,"display_name":"Stanislav Bashkyrtsev"},"score":0,"creation_date":1698100227,"post_id":77348491,"comment_id":136360102,"body_markdown":"If you set up a remote Jenkins, you won&#39;t have to bother running the tests in a container - Jenkins is capable of installing Java and Maven on its own. Jenkins itself however can run in a container if needed..","body":"If you set up a remote Jenkins, you won&#39;t have to bother running the tests in a container - Jenkins is capable of installing Java and Maven on its own. Jenkins itself however can run in a container if needed.."}],"owner":{"account_id":20310722,"reputation":143,"user_id":14897868,"display_name":"Kyle"},"comment_count":12,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1698097540,"creation_date":1698097540,"question_id":77348491,"body_markdown":"I come from a JavaScript background so getting my head round some Java particulars.\r\n\r\nI’m using selenium and Java with Maven as my framework.\r\n\r\nIn JS we’d have scripts within the package.json for example\r\n\r\n    Test-local\r\n    Test-headless\r\nThese scripts would point to a config file that contained the chromedriver options etc etc.\r\n\r\nI know I can’t do that in Java selenium.\r\n\r\nAm I best placed creating classes that contain the difference between local runs/headless runs/docker runs\r\n\r\nAnd then calling the command like\r\n\r\n    mvn test -Dtest=fully.qualified.package.ClassName\r\n\r\n\r\nOr is there some other way I’ve totally missed?\r\n\r\nThanks\r\n\r\n ","title":"Is there a ‘correct’ way to store maven test commands?","body":"<p>I come from a JavaScript background so getting my head round some Java particulars.</p>\n<p>I’m using selenium and Java with Maven as my framework.</p>\n<p>In JS we’d have scripts within the package.json for example</p>\n<pre><code>Test-local\nTest-headless\n</code></pre>\n<p>These scripts would point to a config file that contained the chromedriver options etc etc.</p>\n<p>I know I can’t do that in Java selenium.</p>\n<p>Am I best placed creating classes that contain the difference between local runs/headless runs/docker runs</p>\n<p>And then calling the command like</p>\n<pre><code>mvn test -Dtest=fully.qualified.package.ClassName\n</code></pre>\n<p>Or is there some other way I’ve totally missed?</p>\n<p>Thanks</p>\n"},{"tags":["java","spring","casting","annotations","property-placeholder"],"comments":[{"owner":{"account_id":195331,"reputation":275388,"user_id":438154,"accept_rate":98,"display_name":"Sotirios Delimanolis"},"score":0,"creation_date":1363202292,"post_id":15394351,"comment_id":21761214,"body_markdown":"Is the exception for the first try or the second?","body":"Is the exception for the first try or the second?"},{"owner":{"account_id":67541,"reputation":60858,"user_id":197606,"accept_rate":85,"display_name":"Ben"},"score":0,"creation_date":1363202355,"post_id":15394351,"comment_id":21761257,"body_markdown":"@SotiriosDelimanolis The first","body":"@SotiriosDelimanolis The first"},{"owner":{"account_id":1467713,"reputation":409,"user_id":1380111,"display_name":"Dudelilama"},"score":0,"creation_date":1456821581,"post_id":15394351,"comment_id":59111840,"body_markdown":"If you ever come across such a problem, it&#39;s most obviously, that you forgot to define the right PropertySource. You&#39;ll need:\n    @Bean\n    public static PropertySourcesPlaceholderConfigurer propertySourcesPlaceholderConfigurer() {\n        return new PropertySourcesPlaceholderConfigurer();\n    }","body":"If you ever come across such a problem, it&#39;s most obviously, that you forgot to define the right PropertySource. You&#39;ll need:     @Bean     public static PropertySourcesPlaceholderConfigurer propertySourcesPlaceholderConfigurer() {         return new PropertySourcesPlaceholderConfigurer();     }"},{"owner":{"account_id":2219078,"reputation":2030,"user_id":1959005,"accept_rate":55,"display_name":"Poutrathor"},"score":1,"creation_date":1588788556,"post_id":15394351,"comment_id":109037145,"body_markdown":"it can also be caused by improper encoding of properties files (java expects ISO 8859-1)","body":"it can also be caused by improper encoding of properties files (java expects ISO 8859-1)"},{"owner":{"account_id":414265,"reputation":426,"user_id":788388,"display_name":"ununiform"},"score":1,"creation_date":1624392783,"post_id":15394351,"comment_id":120345818,"body_markdown":"Missing curly brace on end of property place holder caused this error for me :/","body":"Missing curly brace on end of property place holder caused this error for me :/"}],"answers":[{"tags":[],"owner":{"account_id":1898502,"reputation":1075,"user_id":1714910,"accept_rate":50,"display_name":"Piero Divasto"},"down_vote_count":4,"up_vote_count":44,"is_accepted":false,"score":40,"last_activity_date":1553054893,"creation_date":1363203328,"answer_id":15394806,"question_id":15394351,"body_markdown":"I was looking for the answer on internet and I found the following\r\n\r\n    @Value(&quot;#{new java.text.SimpleDateFormat(&#39;${aDateFormat}&#39;).parse(&#39;${aDateStr}&#39;)}&quot;)\r\n    Date myDate;\r\n\r\nSo in your case you could try with this\r\n\r\n    @Value(&quot;#{new Integer(&#39;${api.orders.pingFrequency}&#39;)}&quot;)\r\n    private Integer pingFrequency;","title":"@Value annotation type casting to Integer from String","body":"<p>I was looking for the answer on internet and I found the following</p>\n\n<pre><code>@Value(\"#{new java.text.SimpleDateFormat('${aDateFormat}').parse('${aDateStr}')}\")\nDate myDate;\n</code></pre>\n\n<p>So in your case you could try with this</p>\n\n<pre><code>@Value(\"#{new Integer('${api.orders.pingFrequency}')}\")\nprivate Integer pingFrequency;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":195331,"reputation":275388,"user_id":438154,"accept_rate":98,"display_name":"Sotirios Delimanolis"},"down_vote_count":1,"up_vote_count":69,"is_accepted":true,"score":68,"last_activity_date":1582776934,"creation_date":1363203490,"answer_id":15394872,"question_id":15394351,"body_markdown":"Assuming you have a properties file on your classpath that contains \r\n\r\n    api.orders.pingFrequency=4\r\n\r\n\r\nI tried inside a `@Controller`\r\n\r\n    @Controller\r\n    public class MyController {    \t\r\n        @Value(&quot;${api.orders.pingFrequency}&quot;)\r\n        private Integer pingFrequency;\r\n        ...\r\n    }\r\n\r\nWith my servlet context containing :\r\n\r\n    &lt;context:property-placeholder location=&quot;classpath:myprops.properties&quot; /&gt;\r\n\r\nIt worked perfectly. \r\n\r\nSo either your property is not an integer type, you don&#39;t have the property placeholder configured correctly, or you are using the wrong property key.\r\n\r\nI tried running with an invalid property value, `4123;`. The exception I got is \r\n\r\n    java.lang.NumberFormatException: For input string: &quot;4123;&quot;\r\n\r\nwhich makes me think the value of your property is \r\n\r\n    api.orders.pingFrequency=(java.lang.Integer)${api.orders.pingFrequency}","title":"@Value annotation type casting to Integer from String","body":"<p>Assuming you have a properties file on your classpath that contains </p>\n\n<pre><code>api.orders.pingFrequency=4\n</code></pre>\n\n<p>I tried inside a <code>@Controller</code></p>\n\n<pre><code>@Controller\npublic class MyController {     \n    @Value(\"${api.orders.pingFrequency}\")\n    private Integer pingFrequency;\n    ...\n}\n</code></pre>\n\n<p>With my servlet context containing :</p>\n\n<pre><code>&lt;context:property-placeholder location=\"classpath:myprops.properties\" /&gt;\n</code></pre>\n\n<p>It worked perfectly. </p>\n\n<p>So either your property is not an integer type, you don't have the property placeholder configured correctly, or you are using the wrong property key.</p>\n\n<p>I tried running with an invalid property value, <code>4123;</code>. The exception I got is </p>\n\n<pre><code>java.lang.NumberFormatException: For input string: \"4123;\"\n</code></pre>\n\n<p>which makes me think the value of your property is </p>\n\n<pre><code>api.orders.pingFrequency=(java.lang.Integer)${api.orders.pingFrequency}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3037349,"reputation":71,"user_id":3613419,"display_name":"aJaY"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1417949029,"creation_date":1417948677,"answer_id":27341777,"question_id":15394351,"body_markdown":"If you want to convert a **property** to an **integer** from properties file there are **2** solutions which I found:\r\n\r\nGiven scenario: **customer.properties** contains **customer.id = 100** as a field and you want to access it in spring configuration file as **integer**.The property **customerId** is declared as type **int** in the Bean **Customer**\r\n\r\nSolution 1:\r\n           \r\n&lt;!-- begin snippet: js hide: false --&gt;\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n    &lt;property name=&quot;customerId&quot; value=&quot;#{T(java.lang.Integer).parseInt(&#39;${customer.id}&#39;)}&quot; /&gt;\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n  In the above line, the **string** value from properties file is converted to **int** type.\r\n\r\nsolution 2: Use some other extension inplace of **propeties**.For Ex.- If your properties file name is \r\n            **customer.properties** then make it **customer.details** and in the configuration file use the below code\r\n            \r\n\r\n&lt;!-- begin snippet: js hide: false --&gt;\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n    &lt;property name=&quot;customerId&quot;  \tvalue=&quot;${customer.id}&quot; /&gt;\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n           \r\n             ","title":"@Value annotation type casting to Integer from String","body":"<p>If you want to convert a <strong>property</strong> to an <strong>integer</strong> from properties file there are <strong>2</strong> solutions which I found:</p>\n\n<p>Given scenario: <strong>customer.properties</strong> contains <strong>customer.id = 100</strong> as a field and you want to access it in spring configuration file as <strong>integer</strong>.The property <strong>customerId</strong> is declared as type <strong>int</strong> in the Bean <strong>Customer</strong></p>\n\n<p>Solution 1:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;property name=\"customerId\" value=\"#{T(java.lang.Integer).parseInt('${customer.id}')}\" /&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>In the above line, the <strong>string</strong> value from properties file is converted to <strong>int</strong> type.</p>\n\n<p>solution 2: Use some other extension inplace of <strong>propeties</strong>.For Ex.- If your properties file name is \n            <strong>customer.properties</strong> then make it <strong>customer.details</strong> and in the configuration file use the below code</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;property name=\"customerId\"  \tvalue=\"${customer.id}\" /&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"},{"tags":[],"owner":{"account_id":351598,"reputation":147,"user_id":688182,"display_name":"this"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1432044559,"creation_date":1432044559,"answer_id":30328059,"question_id":15394351,"body_markdown":"I had the exact same situation. It was caused by not having a [PropertySourcesPlaceholderConfigurer][1] in the Spring context, which resolves values against the `@Value` annotation inside of classes.\r\n\r\nInclude a property placeholder to solve the problem, no need to use Spring expressions for integers (the property file does not have to exist if you use `ignore-resource-not-found=&quot;true&quot;`):\r\n\r\n    &lt;context:property-placeholder location=&quot;/path/to/my/app.properties&quot;\r\n        ignore-resource-not-found=&quot;true&quot; /&gt;\r\n\r\n  [1]: http://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/context/support/PropertySourcesPlaceholderConfigurer.html","title":"@Value annotation type casting to Integer from String","body":"<p>I had the exact same situation. It was caused by not having a <a href=\"http://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/context/support/PropertySourcesPlaceholderConfigurer.html\" rel=\"noreferrer\">PropertySourcesPlaceholderConfigurer</a> in the Spring context, which resolves values against the <code>@Value</code> annotation inside of classes.</p>\n\n<p>Include a property placeholder to solve the problem, no need to use Spring expressions for integers (the property file does not have to exist if you use <code>ignore-resource-not-found=\"true\"</code>):</p>\n\n<pre><code>&lt;context:property-placeholder location=\"/path/to/my/app.properties\"\n    ignore-resource-not-found=\"true\" /&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2375051,"reputation":7605,"user_id":2078672,"accept_rate":20,"display_name":"Saurabh"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1456748397,"creation_date":1456748397,"answer_id":35699401,"question_id":15394351,"body_markdown":"I had the same issue I solved using this. Refer this https://stackoverflow.com/questions/27957364/spring-mvc-value-annotation-to-get-int-value-defined-in-properties-file\r\n\r\n    @Value(#{propertyfileId.propertyName})\r\n\r\n works","title":"@Value annotation type casting to Integer from String","body":"<p>I had the same issue I solved using this. Refer this <a href=\"https://stackoverflow.com/questions/27957364/spring-mvc-value-annotation-to-get-int-value-defined-in-properties-file\">Spring MVC: @Value annotation to get int value defined in *.properties file</a></p>\n\n<pre><code>@Value(#{propertyfileId.propertyName})\n</code></pre>\n\n<p>works</p>\n"},{"tags":[],"owner":{"account_id":5519117,"reputation":331,"user_id":4382726,"display_name":"Gabriel Villacis"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1475501137,"creation_date":1475501137,"answer_id":39832782,"question_id":15394351,"body_markdown":"This problem also occurs when you have 2 resources with the same file name; say &quot;configurations.properties&quot; within 2 different jar or directory path configured within the classpath. For example:\r\n\r\nYou have your &quot;configurations.properties&quot; in your process or web application (jar, war or ear). But another dependency (jar) have the same file &quot;configurations.properties&quot; in the same path. Then I suppose that Spring have no idea (@_@?) where to get the property and just sends the property name declared within the @Value annotation.","title":"@Value annotation type casting to Integer from String","body":"<p>This problem also occurs when you have 2 resources with the same file name; say \"configurations.properties\" within 2 different jar or directory path configured within the classpath. For example:</p>\n\n<p>You have your \"configurations.properties\" in your process or web application (jar, war or ear). But another dependency (jar) have the same file \"configurations.properties\" in the same path. Then I suppose that Spring have no idea (@_@?) where to get the property and just sends the property name declared within the @Value annotation.</p>\n"},{"tags":[],"owner":{"account_id":1489715,"reputation":2281,"user_id":1397115,"accept_rate":67,"display_name":"Krystian"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1482070489,"creation_date":1482070489,"answer_id":41209175,"question_id":15394351,"body_markdown":"In my case, the problem was that my POST request was sent to the same url as GET (with get parameters using &quot;?..=..&quot;) and that parameters had the same name as form parameters. Probably Spring is merging them into an array and parsing was throwing error.","title":"@Value annotation type casting to Integer from String","body":"<p>In my case, the problem was that my POST request was sent to the same url as GET (with get parameters using \"?..=..\") and that parameters had the same name as form parameters. Probably Spring is merging them into an array and parsing was throwing error.</p>\n"},{"tags":[],"owner":{"account_id":7869650,"reputation":353,"user_id":5947404,"display_name":"V N"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1490301188,"creation_date":1490301188,"answer_id":42986435,"question_id":15394351,"body_markdown":"If you are using @Configuation then instantiate below static bean. If not static @Configutation is instantiated very early and and the BeanPostProcessors responsible for resolving annotations like @Value, @Autowired etc, cannot act on it. Refer [here][1]\r\n\r\n    @Bean\r\n    public static PropertySourcesPlaceholderConfigurer propertyConfigurer() {\r\n       return new PropertySourcesPlaceholderConfigurer();\r\n    }\r\n\r\n\r\n  [1]: https://www.javacodegeeks.com/2013/07/spring-bean-and-propertyplaceholderconfigurer.html","title":"@Value annotation type casting to Integer from String","body":"<p>If you are using @Configuation then instantiate below static bean. If not static @Configutation is instantiated very early and and the BeanPostProcessors responsible for resolving annotations like @Value, @Autowired etc, cannot act on it. Refer <a href=\"https://www.javacodegeeks.com/2013/07/spring-bean-and-propertyplaceholderconfigurer.html\" rel=\"noreferrer\">here</a></p>\n\n<pre><code>@Bean\npublic static PropertySourcesPlaceholderConfigurer propertyConfigurer() {\n   return new PropertySourcesPlaceholderConfigurer();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13257112,"reputation":11,"user_id":9572808,"display_name":"warhead"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1522378845,"creation_date":1522378845,"answer_id":49567818,"question_id":15394351,"body_markdown":"when use @Value, you should add @PropertySource annotation on Class, or specify properties holder in spring&#39;s xml file.\r\neg.\r\n\r\n    @Component\r\n    @PropertySource(&quot;classpath:config.properties&quot;)\r\n    public class BusinessClass{\r\n       @Value(&quot;${user.name}&quot;)\r\n       private String name;\r\n       @Value(&quot;${user.age}&quot;)\r\n       private int age;\r\n       @Value(&quot;${user.registed:false}&quot;)\r\n       private boolean registed;\r\n    }\r\n\r\nconfig.properties\r\n\r\n    user.name=test\r\n    user.age=20\r\n    user.registed=true\r\n\r\nthis works!\r\n\r\nOf course, you can use placeholder xml configuration instead of annotation.\r\nspring.xml\r\n\r\n    &lt;context:property-placeholder location=&quot;classpath:config.properties&quot;/&gt;","title":"@Value annotation type casting to Integer from String","body":"<p>when use @Value, you should add @PropertySource annotation on Class, or specify properties holder in spring's xml file.\neg.</p>\n\n<pre><code>@Component\n@PropertySource(\"classpath:config.properties\")\npublic class BusinessClass{\n   @Value(\"${user.name}\")\n   private String name;\n   @Value(\"${user.age}\")\n   private int age;\n   @Value(\"${user.registed:false}\")\n   private boolean registed;\n}\n</code></pre>\n\n<p>config.properties</p>\n\n<pre><code>user.name=test\nuser.age=20\nuser.registed=true\n</code></pre>\n\n<p>this works!</p>\n\n<p>Of course, you can use placeholder xml configuration instead of annotation.\nspring.xml</p>\n\n<pre><code>&lt;context:property-placeholder location=\"classpath:config.properties\"/&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9094789,"reputation":3313,"user_id":6769119,"display_name":"Mukundhan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1594627936,"creation_date":1594627936,"answer_id":62871732,"question_id":15394351,"body_markdown":"Since using the **@Value(&quot;new Long(&quot;myconfig&quot;)&quot;)** with cast could **throw error** on **startup** if the **config is not found** or if not in the same expected **number format**\r\n\r\nWe used the following approach and is working as expected with fail safe check.\r\n\r\n\r\n    @Configuration()\r\n    public class MyConfiguration {\r\n    \r\n       Long DEFAULT_MAX_IDLE_TIMEOUT = 5l;\r\n    \r\n       @Value(&quot;db.timeoutInString&quot;)\r\n       private String timeout;\r\n    \r\n       public Long getTimout() {\r\n            final Long timoutVal = StringUtil.parseLong(timeout);\r\n            if (null == timoutVal) {\r\n                return DEFAULT_MAX_IDLE_TIMEOUT;\r\n            }\r\n            return timoutVal;\r\n        }\r\n    }\r\n       \r\n\r\n","title":"@Value annotation type casting to Integer from String","body":"<p>Since using the <strong>@Value(&quot;new Long(&quot;myconfig&quot;)&quot;)</strong> with cast could <strong>throw error</strong> on <strong>startup</strong> if the <strong>config is not found</strong> or if not in the same expected <strong>number format</strong></p>\n<p>We used the following approach and is working as expected with fail safe check.</p>\n<pre><code>@Configuration()\npublic class MyConfiguration {\n\n   Long DEFAULT_MAX_IDLE_TIMEOUT = 5l;\n\n   @Value(&quot;db.timeoutInString&quot;)\n   private String timeout;\n\n   public Long getTimout() {\n        final Long timoutVal = StringUtil.parseLong(timeout);\n        if (null == timoutVal) {\n            return DEFAULT_MAX_IDLE_TIMEOUT;\n        }\n        return timoutVal;\n    }\n}\n   \n</code></pre>\n"}],"owner":{"account_id":67541,"reputation":60858,"user_id":197606,"accept_rate":85,"display_name":"Ben"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":182121,"favorite_count":0,"down_vote_count":0,"up_vote_count":87,"accepted_answer_id":15394872,"answer_count":10,"score":87,"last_activity_date":1698096290,"creation_date":1363201852,"question_id":15394351,"body_markdown":"I&#39;m trying to cast the output of a value to an integer:\r\n\r\n    @Value(&quot;${api.orders.pingFrequency}&quot;)\r\n    private Integer pingFrequency;\r\n\r\nThe above throws the error \r\n\r\n    org.springframework.beans.TypeMismatchException: \r\n        Failed to convert value of type &#39;java.lang.String&#39; to required type &#39;java.lang.Integer&#39;; \r\n    nested exception is java.lang.NumberFormatException: \r\n        For input string: &quot;(java.lang.Integer)${api.orders.pingFrequency}&quot;\r\n\r\nI&#39;ve also tried `@Value(&quot;(java.lang.Integer)${api.orders.pingFrequency}&quot;)`\r\n\r\nGoogle doesn&#39;t appear to say much on the subject.  I&#39;d like to always be dealing with an integer instead of having to parse this value everywhere it&#39;s used.\r\n\r\n**Workaround**\r\n\r\nI realize a workaround may be to use a setter method to run the conversion for me, but if Spring can do it I&#39;d rather learn something about Spring.","title":"@Value annotation type casting to Integer from String","body":"<p>I'm trying to cast the output of a value to an integer:</p>\n\n<pre><code>@Value(\"${api.orders.pingFrequency}\")\nprivate Integer pingFrequency;\n</code></pre>\n\n<p>The above throws the error </p>\n\n<pre><code>org.springframework.beans.TypeMismatchException: \n    Failed to convert value of type 'java.lang.String' to required type 'java.lang.Integer'; \nnested exception is java.lang.NumberFormatException: \n    For input string: \"(java.lang.Integer)${api.orders.pingFrequency}\"\n</code></pre>\n\n<p>I've also tried <code>@Value(\"(java.lang.Integer)${api.orders.pingFrequency}\")</code></p>\n\n<p>Google doesn't appear to say much on the subject.  I'd like to always be dealing with an integer instead of having to parse this value everywhere it's used.</p>\n\n<p><strong>Workaround</strong></p>\n\n<p>I realize a workaround may be to use a setter method to run the conversion for me, but if Spring can do it I'd rather learn something about Spring.</p>\n"},{"tags":["java","logging","slf4j","logback"],"answers":[{"tags":[],"owner":{"account_id":1653169,"reputation":9535,"user_id":1523342,"accept_rate":91,"display_name":"mthmulders"},"down_vote_count":0,"up_vote_count":38,"is_accepted":true,"score":38,"last_activity_date":1698095489,"creation_date":1439194040,"answer_id":31914558,"question_id":31914337,"body_markdown":"I think you&#39;re looking for the `%M` pattern.\r\nSee the [Logback docs](https://logback.qos.ch/manual/layouts.html#method)\r\nfor all patterns that you could use.\r\nNote, however, that these docs also say:\r\n\r\n&gt; Generating the method name is not particularly fast. Thus, its use should be avoided unless execution speed is not an issue.","title":"Logback - Print out method name that called the log method","body":"<p>I think you're looking for the <code>%M</code> pattern.\nSee the <a href=\"https://logback.qos.ch/manual/layouts.html#method\" rel=\"nofollow noreferrer\">Logback docs</a>\nfor all patterns that you could use.\nNote, however, that these docs also say:</p>\n<blockquote>\n<p>Generating the method name is not particularly fast. Thus, its use should be avoided unless execution speed is not an issue.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":2800556,"reputation":2198,"user_id":2408879,"display_name":"makata"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1631031442,"creation_date":1631031442,"answer_id":69091569,"question_id":31914337,"body_markdown":" This is a sample appender that logs method name and line number:\r\n  \r\n\r\n     &lt;appender name=&quot;STDOUT&quot; class=&quot;ch.qos.logback.core.ConsoleAppender&quot;&gt;\r\n            &lt;encoder class=&quot;ch.qos.logback.classic.encoder.PatternLayoutEncoder&quot;&gt;\r\n                &lt;pattern&gt;%d{HH:mm:ss.SSS} %green([%thread]) %highlight(%-5level) (%logger{50}.%M\\(%line\\)) - (%msg%n)\r\n                &lt;/pattern&gt;\r\n            &lt;/encoder&gt;\r\n      &lt;/appender&gt;","title":"Logback - Print out method name that called the log method","body":"<p>This is a sample appender that logs method name and line number:</p>\n<pre><code> &lt;appender name=&quot;STDOUT&quot; class=&quot;ch.qos.logback.core.ConsoleAppender&quot;&gt;\n        &lt;encoder class=&quot;ch.qos.logback.classic.encoder.PatternLayoutEncoder&quot;&gt;\n            &lt;pattern&gt;%d{HH:mm:ss.SSS} %green([%thread]) %highlight(%-5level) (%logger{50}.%M\\(%line\\)) - (%msg%n)\n            &lt;/pattern&gt;\n        &lt;/encoder&gt;\n  &lt;/appender&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13512904,"reputation":98,"user_id":9748566,"display_name":"PhilKes"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1696171264,"creation_date":1696171264,"answer_id":77210950,"question_id":31914337,"body_markdown":"For anyone looking for a more current solution, I wrote a **maven-plugin** addressing this issue, while not generating any performance issues either:\r\nhttps://github.com/PhilKes/slf4j-caller-info-maven-plugin\r\n\r\nThis plugin **injects the class name, optionally also the method name and source code line number into all SLF4J log statements at compile time** (see [configuration](https://github.com/PhilKes/slf4j-caller-info-maven-plugin#configuration)).\r\nAll you need to do is to add the `callerInformation` MDC parameter to your log-pattern (see [Code Example](https://github.com/PhilKes/slf4j-caller-info-maven-plugin#code-example)) and add the plugin in your `pom.xml`:\r\n```xml\r\n&lt;plugin&gt;\r\n &lt;groupId&gt;io.github.philkes&lt;/groupId&gt;\r\n &lt;artifactId&gt;slf4j-caller-info-maven-plugin&lt;/artifactId&gt;\r\n &lt;version&gt;1.1.0&lt;/version&gt;\r\n &lt;executions&gt;\r\n   &lt;execution&gt;\r\n     &lt;goals&gt;\r\n        &lt;goal&gt;inject&lt;/goal&gt;\r\n     &lt;/goals&gt;\r\n   &lt;/execution&gt;\r\n &lt;/executions&gt;\r\n&lt;/plugin&gt;\r\n```","title":"Logback - Print out method name that called the log method","body":"<p>For anyone looking for a more current solution, I wrote a <strong>maven-plugin</strong> addressing this issue, while not generating any performance issues either:\n<a href=\"https://github.com/PhilKes/slf4j-caller-info-maven-plugin\" rel=\"nofollow noreferrer\">https://github.com/PhilKes/slf4j-caller-info-maven-plugin</a></p>\n<p>This plugin <strong>injects the class name, optionally also the method name and source code line number into all SLF4J log statements at compile time</strong> (see <a href=\"https://github.com/PhilKes/slf4j-caller-info-maven-plugin#configuration\" rel=\"nofollow noreferrer\">configuration</a>).\nAll you need to do is to add the <code>callerInformation</code> MDC parameter to your log-pattern (see <a href=\"https://github.com/PhilKes/slf4j-caller-info-maven-plugin#code-example\" rel=\"nofollow noreferrer\">Code Example</a>) and add the plugin in your <code>pom.xml</code>:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;plugin&gt;\n &lt;groupId&gt;io.github.philkes&lt;/groupId&gt;\n &lt;artifactId&gt;slf4j-caller-info-maven-plugin&lt;/artifactId&gt;\n &lt;version&gt;1.1.0&lt;/version&gt;\n &lt;executions&gt;\n   &lt;execution&gt;\n     &lt;goals&gt;\n        &lt;goal&gt;inject&lt;/goal&gt;\n     &lt;/goals&gt;\n   &lt;/execution&gt;\n &lt;/executions&gt;\n&lt;/plugin&gt;\n</code></pre>\n"}],"owner":{"account_id":5303874,"reputation":5062,"user_id":4464702,"accept_rate":96,"display_name":"randers"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":31728,"favorite_count":0,"down_vote_count":0,"up_vote_count":20,"accepted_answer_id":31914558,"answer_count":3,"score":20,"last_activity_date":1698095489,"creation_date":1439193306,"question_id":31914337,"body_markdown":"In my example, I have the following code:\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    package com.example.somepackage;\r\n    \r\n    public class Example {\r\n        public static void main(String[] args) {\r\n            org.slf4j.Logger logger = org.slf4j.LoggerFactory.getLogger(Example.class);\r\n            logger.info(&quot;Example message.&quot;);\r\n        }\r\n    }\r\n\r\nI want it to output to the console like this minimal example:\r\n\r\n&lt;!-- language: none --&gt;\r\n\r\n    com.example.somepackage.Example.main Example message.\r\n\r\nThe only thing I need is either:\r\n\r\n* a pattern to put into the `logback.xml` file or\r\n* instructions on further code I need to add to my example code scenario\r\n\r\nIf extra code is used instead of a XML configuration pattern, please also provide information on how to pair these two, so one can still use patterns for time, log level, etc. in addition to the method name being printed out.","title":"Logback - Print out method name that called the log method","body":"<p>In my example, I have the following code:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>package com.example.somepackage;\n\npublic class Example {\n    public static void main(String[] args) {\n        org.slf4j.Logger logger = org.slf4j.LoggerFactory.getLogger(Example.class);\n        logger.info(\"Example message.\");\n    }\n}\n</code></pre>\n\n<p>I want it to output to the console like this minimal example:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>com.example.somepackage.Example.main Example message.\n</code></pre>\n\n<p>The only thing I need is either:</p>\n\n<ul>\n<li>a pattern to put into the <code>logback.xml</code> file or</li>\n<li>instructions on further code I need to add to my example code scenario</li>\n</ul>\n\n<p>If extra code is used instead of a XML configuration pattern, please also provide information on how to pair these two, so one can still use patterns for time, log level, etc. in addition to the method name being printed out.</p>\n"},{"tags":["java","rest","rest-assured","form-data"],"comments":[{"owner":{"account_id":26528740,"reputation":367,"user_id":20161294,"display_name":"v-g"},"score":0,"creation_date":1698349571,"post_id":77344343,"comment_id":136397831,"body_markdown":"Can you specify which type of error you get with java rest-assured code?","body":"Can you specify which type of error you get with java rest-assured code?"}],"owner":{"account_id":29733956,"reputation":1,"user_id":22787923,"display_name":"Arvind Katiyar"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1698095291,"creation_date":1698056017,"question_id":77344343,"body_markdown":"curl cmd as below : \r\n\r\n```\r\ncurl -X &#39;POST&#39; `\\\r\n`&#39;``https://api.shared-tst.tanonprod.aegon.io/platform-api-gateway/plan-application/restservices/uploadMultipleDocs``&#39; `\\\r\n`-H &#39;accept: `*`/`*`&#39; `\\\r\n`-H &#39;Content-Type: multipart/form-data&#39; `\\\r\n`-F &#39;files=@Site issue.docx;type=application/vnd.openxmlformats-officedocument.wordprocessingml.document&#39; `\\\r\n`-F &#39;docs=[{&quot;fileName&quot;:&quot;Site issue&quot;,&quot;docTypeCode&quot;:&quot;1321&quot;}]&#39; `\\\r\n`-F &#39;accountNumber=683082   00001&#39; `\\\r\n`-F &#39;userId=akatiyar&#39;`\r\n```\r\n        response= RestAssured.given().contentType(&quot;multipart/form-data&quot;).multiPart(\r\n       &quot;file&quot;,new File(&quot;data\\\\UploadFile\\\\Site issue.docx&quot;)).\r\n       param(&quot;docs&quot;,&quot;[{\\&quot;fileName\\&quot;:\\&quot;Site issue\\&quot;,\\&quot;docTypeCode\\&quot;:\\&quot;1321\\&quot;}]&quot;).\r\n       param(&quot;accountNumber&quot;,accountNumber).param(&quot;userId&quot;, userId).log().all().\r\n       when(). post(endpoint).then().log().all().extract().response();   \r\n    response = RestAssured.given().contentType(&quot;multipart/form-data&quot;).multiPart(&quot;retest&quot;,\r\n          &quot;data\\\\UploadFile\\\\Site issue.docx&quot;).formParam(&quot;accountNumber&quot;,\r\n           accountNumber).formParam(&quot;userId&quot;, userId). formParam(&quot;files&quot;,\r\n           &quot;@Site issue.docx;type=application/vnd.openxmlformats-\r\n                    officedocument.wordprocessingml.document)formParam&quot;\r\n       ).formParam(&quot;docs&quot;,&quot;[{\\&quot;fileName\\&quot;:\\&quot;Site issue\\&quot;,\\&quot;docTypeCode\\&quot;:\\&quot;1321\\&quot;}]&quot;).\r\n       log().all().when(). post(endpoint).then().log().all().extract().response();","title":"Need to make rest assured API post call with Java for this curl cmd","body":"<p>curl cmd as below :</p>\n<pre><code>curl -X 'POST' `\\\n`'``https://api.shared-tst.tanonprod.aegon.io/platform-api-gateway/plan-application/restservices/uploadMultipleDocs``' `\\\n`-H 'accept: `*`/`*`' `\\\n`-H 'Content-Type: multipart/form-data' `\\\n`-F 'files=@Site issue.docx;type=application/vnd.openxmlformats-officedocument.wordprocessingml.document' `\\\n`-F 'docs=[{&quot;fileName&quot;:&quot;Site issue&quot;,&quot;docTypeCode&quot;:&quot;1321&quot;}]' `\\\n`-F 'accountNumber=683082   00001' `\\\n`-F 'userId=akatiyar'`\n</code></pre>\n<pre><code>    response= RestAssured.given().contentType(&quot;multipart/form-data&quot;).multiPart(\n   &quot;file&quot;,new File(&quot;data\\\\UploadFile\\\\Site issue.docx&quot;)).\n   param(&quot;docs&quot;,&quot;[{\\&quot;fileName\\&quot;:\\&quot;Site issue\\&quot;,\\&quot;docTypeCode\\&quot;:\\&quot;1321\\&quot;}]&quot;).\n   param(&quot;accountNumber&quot;,accountNumber).param(&quot;userId&quot;, userId).log().all().\n   when(). post(endpoint).then().log().all().extract().response();   \nresponse = RestAssured.given().contentType(&quot;multipart/form-data&quot;).multiPart(&quot;retest&quot;,\n      &quot;data\\\\UploadFile\\\\Site issue.docx&quot;).formParam(&quot;accountNumber&quot;,\n       accountNumber).formParam(&quot;userId&quot;, userId). formParam(&quot;files&quot;,\n       &quot;@Site issue.docx;type=application/vnd.openxmlformats-\n                officedocument.wordprocessingml.document)formParam&quot;\n   ).formParam(&quot;docs&quot;,&quot;[{\\&quot;fileName\\&quot;:\\&quot;Site issue\\&quot;,\\&quot;docTypeCode\\&quot;:\\&quot;1321\\&quot;}]&quot;).\n   log().all().when(). post(endpoint).then().log().all().extract().response();\n</code></pre>\n"},{"tags":["java","selenium","google-chrome","selenium-webdriver","selenium-chromedriver"],"comments":[{"owner":{"account_id":10079574,"reputation":1734,"user_id":7450414,"display_name":"AndiCover"},"score":0,"creation_date":1575811883,"post_id":59235723,"comment_id":104683486,"body_markdown":"How are you compiling your project? Commandline or an IDE?","body":"How are you compiling your project? Commandline or an IDE?"},{"owner":{"account_id":2869735,"reputation":448,"user_id":2463341,"accept_rate":44,"display_name":"Vinnie"},"score":0,"creation_date":1575813183,"post_id":59235723,"comment_id":104683831,"body_markdown":"Since you are using Windows, for setProperty() shouldn&#39;t you be using chromedriver.exe rather than just chromedriver?","body":"Since you are using Windows, for setProperty() shouldn&#39;t you be using chromedriver.exe rather than just chromedriver?"},{"owner":{"account_id":17052317,"reputation":1,"user_id":12337678,"display_name":"Yoni Kuki"},"score":0,"creation_date":1575893988,"post_id":59235723,"comment_id":104707307,"body_markdown":"i am using eclipse","body":"i am using eclipse"}],"answers":[{"tags":[],"owner":{"account_id":15980640,"reputation":11,"user_id":11532384,"display_name":"MhmtMelek"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1575813721,"creation_date":1575813721,"answer_id":59236135,"question_id":59235723,"body_markdown":"Can you change\n\n `System.setProperty(&quot;Webdriver.Chrome.driver&quot;,&quot;/C:/Users/shale/Downloads/chromedriver_win321/chromedriver&quot;); \n`\n\nto\n\n    System.setProperty(&quot;Webdriver.Chrome.driver&quot;,&quot;/C:/Users/shale/Downloads/chromedriver_win321/chromedriver.exe&quot;); \n","title":"WebDriver and ChromeDriver cannot be resolved to a type","body":"<p>Can you change</p>\n\n<p><code>System.setProperty(\"Webdriver.Chrome.driver\",\"/C:/Users/shale/Downloads/chromedriver_win321/chromedriver\");\n</code></p>\n\n<p>to</p>\n\n<pre><code>System.setProperty(\"Webdriver.Chrome.driver\",\"/C:/Users/shale/Downloads/chromedriver_win321/chromedriver.exe\"); \n</code></pre>\n"},{"tags":[],"owner":{"account_id":14819013,"reputation":1289,"user_id":10701990,"display_name":"Nitin"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1575815409,"creation_date":1575815409,"answer_id":59236404,"question_id":59235723,"body_markdown":"You are getting the error because you have not added the selenium dependencies to your classpath.\r\n\r\nI strongly advice you to use a dependency management tool such as Maven or Gradle to do this.\r\n\r\nHowever, if you would still want to add all the dependencies, then the following dependencies would be required (you may try to have only the chrome dependencies and give it a go)\r\n\r\n[![Resolved Dependencies][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/U6RPD.png\r\n\r\nYou should also change\r\n```java\r\nSystem.setProperty(&quot;Webdriver.Chrome.driver&quot;,&quot;/C:/Users/shale/Downloads/chromedriver_win321/chromedriver&quot;);\r\n``` \r\n\r\nto\r\n```java\r\nSystem.setProperty(&quot;webdriver.chrome.driver&quot;,&quot;C:/Users/shale/Downloads/chromedriver_win321/chromedriver.exe&quot;);\r\n```\r\n\r\n(The case of the property matters).","title":"WebDriver and ChromeDriver cannot be resolved to a type","body":"<p>You are getting the error because you have not added the selenium dependencies to your classpath.</p>\n\n<p>I strongly advice you to use a dependency management tool such as Maven or Gradle to do this.</p>\n\n<p>However, if you would still want to add all the dependencies, then the following dependencies would be required (you may try to have only the chrome dependencies and give it a go)</p>\n\n<p><a href=\"https://i.stack.imgur.com/U6RPD.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/U6RPD.png\" alt=\"Resolved Dependencies\"></a></p>\n\n<p>You should also change</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>System.setProperty(\"Webdriver.Chrome.driver\",\"/C:/Users/shale/Downloads/chromedriver_win321/chromedriver\");\n</code></pre>\n\n<p>to</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>System.setProperty(\"webdriver.chrome.driver\",\"C:/Users/shale/Downloads/chromedriver_win321/chromedriver.exe\");\n</code></pre>\n\n<p>(The case of the property matters).</p>\n"},{"tags":[],"owner":{"account_id":8557915,"reputation":117,"user_id":6412779,"display_name":"Dish"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1575871037,"creation_date":1575871037,"answer_id":59243245,"question_id":59235723,"body_markdown":"It should be  System.setProperty(&quot;Webdriver.chrome.driver&quot;,&quot;/C:/Users/shale/Downloads/chromedriver_win321/chromedriver.exe&quot;); in setProperty().\r\n\r\nAlso please add all the required jar files.","title":"WebDriver and ChromeDriver cannot be resolved to a type","body":"<p>It should be  System.setProperty(\"Webdriver.chrome.driver\",\"/C:/Users/shale/Downloads/chromedriver_win321/chromedriver.exe\"); in setProperty().</p>\n\n<p>Also please add all the required jar files.</p>\n"},{"tags":[],"owner":{"account_id":10049107,"reputation":186627,"user_id":7429447,"accept_rate":86,"display_name":"undetected Selenium"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1575890226,"creation_date":1575890226,"answer_id":59247731,"question_id":59235723,"body_markdown":"This error message...\r\n\r\n\tException in thread &quot;main&quot; java.lang.Error: Unresolved compilation problems:\r\n\tWebDriver cannot be resolved to a type\r\n\tChromeDriver cannot be resolved to a type\r\n\r\n...implies that _WebDriver_ and _ChromeDriver_ wasn&#39;t resolved at **compiletime**.\r\n\r\n\r\n----------\r\n\r\n\r\nSeems your `imports` are good to go. However, as you are using [tag:windows] OS you need to take care of a few things as follows:\r\n\r\n- In the `System.setProperty()` line, you need to replace `Webdriver.Chrome.driver` with **`webdriver.chrome.driver`**.\r\n- You need to provide the _absolute path_ of the **chromedriver** removing the initial _back slash_ i.e. **`/`** before `C:`.\r\n- You can also provide the _absolute path_ of the **chromedriver** escaping the forward slash i.e. **`\\\\`**.\r\n- You need to provide the extension of the **chromedriver** binary, i.e. **`exe`**.\r\n- So effectively, the line of code will be:\r\n\r\n\t\tSystem.setProperty(&quot;webdriver.chrome.driver&quot;,&quot;C\\\\Users\\\\shale\\\\Downloads\\\\chromedriver_win321\\\\chromedriver.exe&quot;);\r\n\r\n&gt;You can find a relevant discussion in [java.lang.Error: Unresolved compilation problems : WebDriver/ChromeDriver cannot be resolved to a type error while executing selenium tests](https://stackoverflow.com/questions/50111517/java-lang-error-unresolved-compilation-problems-webdriver-chromedriver-cannot/50114884#50114884)","title":"WebDriver and ChromeDriver cannot be resolved to a type","body":"<p>This error message...</p>\n\n<pre><code>Exception in thread \"main\" java.lang.Error: Unresolved compilation problems:\nWebDriver cannot be resolved to a type\nChromeDriver cannot be resolved to a type\n</code></pre>\n\n<p>...implies that <em>WebDriver</em> and <em>ChromeDriver</em> wasn't resolved at <strong>compiletime</strong>.</p>\n\n<hr>\n\n<p>Seems your <code>imports</code> are good to go. However, as you are using <a href=\"/questions/tagged/windows\" class=\"post-tag\" title=\"show questions tagged &#39;windows&#39;\" rel=\"tag\">windows</a> OS you need to take care of a few things as follows:</p>\n\n<ul>\n<li>In the <code>System.setProperty()</code> line, you need to replace <code>Webdriver.Chrome.driver</code> with <strong><code>webdriver.chrome.driver</code></strong>.</li>\n<li>You need to provide the <em>absolute path</em> of the <strong>chromedriver</strong> removing the initial <em>back slash</em> i.e. <strong><code>/</code></strong> before <code>C:</code>.</li>\n<li>You can also provide the <em>absolute path</em> of the <strong>chromedriver</strong> escaping the forward slash i.e. <strong><code>\\\\</code></strong>.</li>\n<li>You need to provide the extension of the <strong>chromedriver</strong> binary, i.e. <strong><code>exe</code></strong>.</li>\n<li><p>So effectively, the line of code will be:</p>\n\n<pre><code>System.setProperty(\"webdriver.chrome.driver\",\"C\\\\Users\\\\shale\\\\Downloads\\\\chromedriver_win321\\\\chromedriver.exe\");\n</code></pre></li>\n</ul>\n\n<blockquote>\n  <p>You can find a relevant discussion in <a href=\"https://stackoverflow.com/questions/50111517/java-lang-error-unresolved-compilation-problems-webdriver-chromedriver-cannot/50114884#50114884\">java.lang.Error: Unresolved compilation problems : WebDriver/ChromeDriver cannot be resolved to a type error while executing selenium tests</a></p>\n</blockquote>\n"}],"owner":{"account_id":17052317,"reputation":1,"user_id":12337678,"display_name":"Yoni Kuki"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":8512,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":4,"score":0,"last_activity_date":1698094910,"creation_date":1575810627,"question_id":59235723,"body_markdown":"I know this is a very frequently asked question but i have tried so many fixes to this problem (including: downloading java and eclipse again) and none of the fixes worked.\r\ni am asking for very specific and simplified help because i am new to this subject and i don&#39;t understand a lot.\r\n\r\ni get an error in the imports and in the chromedriver and webdriver.\r\n\r\nthis is the code:\r\n\r\n    package firstPackage;\r\n    \r\n    import org.openqa.selenium.WebDriver;\r\n    import org.openqa.selenium.chrome.ChromeDriver;\r\n    \r\n    public class FirstScript {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tSystem.setProperty(&quot;Webdriver.Chrome.driver&quot;,&quot;/C:/Users/shale/Downloads/chromedriver_win321/chromedriver&quot;);\r\n    \t\t\r\n    \t\tWebDriver driver = new ChromeDriver();\r\n    \t\tdriver.get(&quot;http://www.google.com&quot;);\r\n    \r\n    \t}\r\n    \r\n    }\r\n\r\n[ here is the project with all of the selenium jars that i downloaded from their site][1]\r\n[here is where the chromedrivere.exe file is stored][2]\r\n\r\n[![Output][3]][3]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/h6cWZ.png\r\n  [2]: https://i.stack.imgur.com/v1o4Z.png\r\n  [3]: https://i.stack.imgur.com/bDgGP.png","title":"WebDriver and ChromeDriver cannot be resolved to a type","body":"<p>I know this is a very frequently asked question but i have tried so many fixes to this problem (including: downloading java and eclipse again) and none of the fixes worked.\ni am asking for very specific and simplified help because i am new to this subject and i don't understand a lot.</p>\n\n<p>i get an error in the imports and in the chromedriver and webdriver.</p>\n\n<p>this is the code:</p>\n\n<pre><code>package firstPackage;\n\nimport org.openqa.selenium.WebDriver;\nimport org.openqa.selenium.chrome.ChromeDriver;\n\npublic class FirstScript {\n\n    public static void main(String[] args) {\n        System.setProperty(\"Webdriver.Chrome.driver\",\"/C:/Users/shale/Downloads/chromedriver_win321/chromedriver\");\n\n        WebDriver driver = new ChromeDriver();\n        driver.get(\"http://www.google.com\");\n\n    }\n\n}\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/h6cWZ.png\" rel=\"nofollow noreferrer\"> here is the project with all of the selenium jars that i downloaded from their site</a>\n<a href=\"https://i.stack.imgur.com/v1o4Z.png\" rel=\"nofollow noreferrer\">here is where the chromedrivere.exe file is stored</a></p>\n\n<p><a href=\"https://i.stack.imgur.com/bDgGP.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/bDgGP.png\" alt=\"Output\"></a></p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":1063012,"reputation":71986,"user_id":1064245,"accept_rate":82,"display_name":"M A"},"score":2,"creation_date":1423654637,"post_id":28453372,"comment_id":45233789,"body_markdown":"What do you mean by a bug? Is it a compiler error? An exception?...","body":"What do you mean by a bug? Is it a compiler error? An exception?..."},{"owner":{"account_id":2524075,"reputation":36076,"user_id":2193767,"accept_rate":78,"display_name":"TheLostMind"},"score":1,"creation_date":1423654777,"post_id":28453372,"comment_id":45233873,"body_markdown":"If I am not wrong, you will get a `StackOverflowError` you are calling `randomSentence()` recursively.","body":"If I am not wrong, you will get a <code>StackOverflowError</code> you are calling <code>randomSentence()</code> recursively."},{"owner":{"account_id":2883526,"reputation":2320,"user_id":3439993,"accept_rate":33,"display_name":"Deltharis"},"score":0,"creation_date":1423654852,"post_id":28453372,"comment_id":45233914,"body_markdown":"That would be the case if randomSentence returned something. As is it shouldn&#39;t compile...","body":"That would be the case if randomSentence returned something. As is it shouldn&#39;t compile..."},{"owner":{"account_id":3629749,"reputation":24734,"user_id":3026283,"accept_rate":90,"display_name":"H&#233;ctor"},"score":0,"creation_date":1423654884,"post_id":28453372,"comment_id":45233933,"body_markdown":"This code do nothing.","body":"This code do nothing."},{"owner":{"account_id":5205859,"reputation":39,"user_id":4163827,"display_name":"Jessica"},"score":0,"creation_date":1423655011,"post_id":28453372,"comment_id":45234013,"body_markdown":"Just edited the post to include the error I am receiving","body":"Just edited the post to include the error I am receiving"},{"owner":{"account_id":2883526,"reputation":2320,"user_id":3439993,"accept_rate":33,"display_name":"Deltharis"},"score":1,"creation_date":1423655346,"post_id":28453372,"comment_id":45234174,"body_markdown":"You&#39;re never going to finish your program if you ask about compile errors here. Try to solve problems yourself, do some debugging.","body":"You&#39;re never going to finish your program if you ask about compile errors here. Try to solve problems yourself, do some debugging."}],"answers":[{"tags":[],"owner":{"account_id":5532486,"reputation":459,"user_id":4392037,"display_name":"Francesco Palmiotto"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1423655032,"creation_date":1423655032,"answer_id":28453530,"question_id":28453372,"body_markdown":"This is the most evident error:\r\n\r\n    public static void randomSentence() {\r\n    \r\n        System.out.print(randomSentence());\r\n    \r\n    }\r\n\r\nYou call the method recursively.\r\n\r\nFurthermore, the program is full of conceptual errors, you need to study the OO programming paradigm better.","title":"Writing a random sentence generator in Java","body":"<p>This is the most evident error:</p>\n\n<pre><code>public static void randomSentence() {\n\n    System.out.print(randomSentence());\n\n}\n</code></pre>\n\n<p>You call the method recursively.</p>\n\n<p>Furthermore, the program is full of conceptual errors, you need to study the OO programming paradigm better.</p>\n"},{"tags":[],"owner":{"account_id":2524075,"reputation":36076,"user_id":2193767,"accept_rate":78,"display_name":"TheLostMind"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1458248402,"creation_date":1423655152,"answer_id":28453573,"question_id":28453372,"body_markdown":"Ok. The **first** issue :\r\n\r\n`System.out.print(randomSentence());` \r\n\r\n`randomSentence()` returns `void`, So basically there is *nothing* for `print()` to print. \r\n\r\n**Next** --&gt; even if you happen to fix this issue. You are calling `randomSentence()` *recursively* and you will get a `StackOverflowError`. Kindly check your design / code.\r\n","title":"Writing a random sentence generator in Java","body":"<p>Ok. The <strong>first</strong> issue :</p>\n\n<p><code>System.out.print(randomSentence());</code> </p>\n\n<p><code>randomSentence()</code> returns <code>void</code>, So basically there is <em>nothing</em> for <code>print()</code> to print. </p>\n\n<p><strong>Next</strong> --> even if you happen to fix this issue. You are calling <code>randomSentence()</code> <em>recursively</em> and you will get a <code>StackOverflowError</code>. Kindly check your design / code.</p>\n"}],"owner":{"account_id":5205859,"reputation":39,"user_id":4163827,"display_name":"Jessica"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":8708,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":2,"score":0,"last_activity_date":1698094910,"creation_date":1423654597,"question_id":28453372,"body_markdown":"I am trying to create a program that generates random sentences in English (according to general English syntax rules). \r\n\r\nI keep getting a bug with my subroutine `randomSentence()`. What have I missed? Also any suggestions on how I can simplify everything?\r\n\r\nThe error I am receiving is:\r\n\r\n    Exception in thread &quot;main&quot; java.lang.Error: Unresolved compilation problem: \r\n\tThe method print(boolean) in the type PrintStream is not applicable for the arguments (void)\r\n    at SentenceGenerator.randomSentence(SentenceGenerator.java:80)\r\n    at SentenceGenerator.main(SentenceGenerator.java:86)\r\n\r\nCode:\r\n\r\n    import java.util.ArrayList;\r\n    import java.util.Random;\r\n\r\n    public class SentenceGenerator {\r\n\t\r\n\t    private StringData[] stringData;\r\n        // An array containing all of the possible words. This is a nested class.\r\n\t\r\n\t\t/**\r\n     \t* An object of this type holds the word that will be randomly chosen and printed\r\n     \t*/\r\n\t\tpublic class StringData {\r\n\t\t\tString[] conjunction = {&quot;and&quot;, &quot;or&quot;, &quot;but&quot;, &quot;because&quot;};\r\n\t\t\tString[] proper_noun = {&quot;red&quot;, &quot;Jane&quot;, &quot;Richard Nixon&quot;, &quot;Miss America&quot;};\r\n\t\t\tString[] common_noun = {&quot;man&quot;, &quot;woman&quot;, &quot;fish&quot;, &quot;elephant&quot;, &quot;unicorn&quot;};\r\n\t\t\tString[] determiner = {&quot;a&quot;, &quot;the&quot;, &quot;every&quot;, &quot;some&quot;};\r\n\t\t \tString[] adjective = {&quot;big&quot;, &quot;tiny&quot;, &quot;pretty&quot;, &quot;bald&quot;};\r\n\t\t \tString[] intransitive_verb = {&quot;runs&quot;, &quot;jumps&quot;, &quot;talks&quot;, &quot;sleeps&quot;};\r\n\t\t \tString[] transitive_verb = {&quot;loves&quot;, &quot;hates&quot;, &quot;sees&quot;, &quot;knows&quot;, &quot;looks for&quot;, &quot;finds&quot;};\r\n\t\t \r\n\t\t\t//find out how many words there are in each list\r\n\t\t\tint conjunctionLength = conjunction.length;\r\n\t\t\tint proper_nounLength = proper_noun.length;\r\n\t\t\tint common_nounLength = common_noun.length;\r\n\t\t\tint determinerLength = determiner.length;\r\n\t\t\tint adjectiveLength = adjective.length;\r\n\t\t\tint intransitive_verbLength = intransitive_verb.length;\r\n\t\t\tint transitive_verbLength = transitive_verb.length;\r\n\t\t\t\r\n\t\t\t//Generate random numbers\r\n\t\t\tint rand1 = (int) (Math.random()*conjunctionLength);\r\n\t\t\tint rand2 = (int) (Math.random()*proper_nounLength);\r\n\t\t\tint rand3 = (int) (Math.random()*common_nounLength);\r\n\t\t\tint rand4 = (int) (Math.random()*determinerLength);\r\n\t\t\tint rand5 = (int) (Math.random()*adjectiveLength);\r\n\t\t\tint rand6 = (int) (Math.random()*intransitive_verbLength);\r\n\t\t\tint rand7 = (int) (Math.random()*transitive_verbLength);\r\n\t\t\t\r\n\t\t\tString word1 = conjunction[rand1];\r\n\t\t\tString word2 = proper_noun[rand2];\r\n\t\t\tString word3 = common_noun[rand3];\r\n\t\t\tString word4 = determiner[rand4];\r\n\t\t\tString word5 = adjective[rand5];\r\n\t\t\tString word6 = intransitive_verb[rand6];\r\n\t\t\tString word7 = transitive_verb[rand7];\r\n\t\t}\r\n\t\r\n\t \r\n\t\tstatic void Sentence() {\r\n\t\t\tString sentence() = SimpleSentence();\r\n\t\t}\r\n\t \r\n\t \t/**\r\n      \t * subroutine that defines how SimpleSentence is put together, nesting NounPhrase and VerbPhrase subroutines\r\n      \t */\r\n\t\t\r\n\t\tpublic static String SimpleSentence() {\r\n\t\t\tString simple_sentence = NounPhrase() + VerbPhrase();\r\n\t\t\treturn &quot;&quot;;\r\n\t\t}\r\n\t \r\n\t\t/**\r\n     \t * subroutine that defines the nested variable NounPhrase\r\n     \t */\r\n\t\tpublic static String NounPhrase() {\r\n\t\t\tString noun_phrase = proper_noun[word2], determiner[word4], common_noun[word3]; \r\n\t\t\treturn &quot;&quot;;\r\n\t\t}\r\n\t\r\n\t\t/**\r\n     \t * subroutine that defines the nested variable VerbPhrase\r\n     \t */\r\n\t\tstatic void VerbPhrase() {\r\n\t\t\tString verb_phrase = intransitive_verb[word6], transitive_verb[word7], NounPhrase();\r\n\t\t}\r\n\t\r\n\t\t/**\r\n     \t * Final subroutine that prints out the random sentence\r\n     \t */\r\n\t\tpublic static void randomSentence() {\r\n\t\t\tSystem.out.print(randomSentence());\r\n\t\t}\r\n\t\r\n\t\tpublic static void main(String[] args) {\r\n\t    \twhile (true) {\r\n\t        \trandomSentence();\r\n\t        \tSystem.out.println(&quot;.\\n\\n&quot;);\r\n\t        \ttry {\r\n\t            \tThread.sleep(3000);\r\n\t        \t}\r\n\t        \tcatch (InterruptedException e) {}\r\n\t     \t}\r\n\t\t}\r\n\t}\r\n\t\r\n\t\r\n\t\r\n\r\n\r\n","title":"Writing a random sentence generator in Java","body":"<p>I am trying to create a program that generates random sentences in English (according to general English syntax rules). </p>\n\n<p>I keep getting a bug with my subroutine <code>randomSentence()</code>. What have I missed? Also any suggestions on how I can simplify everything?</p>\n\n<p>The error I am receiving is:</p>\n\n<pre><code>Exception in thread \"main\" java.lang.Error: Unresolved compilation problem: \nThe method print(boolean) in the type PrintStream is not applicable for the arguments (void)\nat SentenceGenerator.randomSentence(SentenceGenerator.java:80)\nat SentenceGenerator.main(SentenceGenerator.java:86)\n</code></pre>\n\n<p>Code:</p>\n\n<pre><code>import java.util.ArrayList;\nimport java.util.Random;\n\npublic class SentenceGenerator {\n\n    private StringData[] stringData;\n    // An array containing all of the possible words. This is a nested class.\n\n    /**\n    * An object of this type holds the word that will be randomly chosen and printed\n    */\n    public class StringData {\n        String[] conjunction = {\"and\", \"or\", \"but\", \"because\"};\n        String[] proper_noun = {\"red\", \"Jane\", \"Richard Nixon\", \"Miss America\"};\n        String[] common_noun = {\"man\", \"woman\", \"fish\", \"elephant\", \"unicorn\"};\n        String[] determiner = {\"a\", \"the\", \"every\", \"some\"};\n        String[] adjective = {\"big\", \"tiny\", \"pretty\", \"bald\"};\n        String[] intransitive_verb = {\"runs\", \"jumps\", \"talks\", \"sleeps\"};\n        String[] transitive_verb = {\"loves\", \"hates\", \"sees\", \"knows\", \"looks for\", \"finds\"};\n\n        //find out how many words there are in each list\n        int conjunctionLength = conjunction.length;\n        int proper_nounLength = proper_noun.length;\n        int common_nounLength = common_noun.length;\n        int determinerLength = determiner.length;\n        int adjectiveLength = adjective.length;\n        int intransitive_verbLength = intransitive_verb.length;\n        int transitive_verbLength = transitive_verb.length;\n\n        //Generate random numbers\n        int rand1 = (int) (Math.random()*conjunctionLength);\n        int rand2 = (int) (Math.random()*proper_nounLength);\n        int rand3 = (int) (Math.random()*common_nounLength);\n        int rand4 = (int) (Math.random()*determinerLength);\n        int rand5 = (int) (Math.random()*adjectiveLength);\n        int rand6 = (int) (Math.random()*intransitive_verbLength);\n        int rand7 = (int) (Math.random()*transitive_verbLength);\n\n        String word1 = conjunction[rand1];\n        String word2 = proper_noun[rand2];\n        String word3 = common_noun[rand3];\n        String word4 = determiner[rand4];\n        String word5 = adjective[rand5];\n        String word6 = intransitive_verb[rand6];\n        String word7 = transitive_verb[rand7];\n    }\n\n\n    static void Sentence() {\n        String sentence() = SimpleSentence();\n    }\n\n    /**\n     * subroutine that defines how SimpleSentence is put together, nesting NounPhrase and VerbPhrase subroutines\n     */\n\n    public static String SimpleSentence() {\n        String simple_sentence = NounPhrase() + VerbPhrase();\n        return \"\";\n    }\n\n    /**\n     * subroutine that defines the nested variable NounPhrase\n     */\n    public static String NounPhrase() {\n        String noun_phrase = proper_noun[word2], determiner[word4], common_noun[word3]; \n        return \"\";\n    }\n\n    /**\n     * subroutine that defines the nested variable VerbPhrase\n     */\n    static void VerbPhrase() {\n        String verb_phrase = intransitive_verb[word6], transitive_verb[word7], NounPhrase();\n    }\n\n    /**\n     * Final subroutine that prints out the random sentence\n     */\n    public static void randomSentence() {\n        System.out.print(randomSentence());\n    }\n\n    public static void main(String[] args) {\n        while (true) {\n            randomSentence();\n            System.out.println(\".\\n\\n\");\n            try {\n                Thread.sleep(3000);\n            }\n            catch (InterruptedException e) {}\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java","stripe-payments","payment-gateway"],"answers":[{"tags":[],"owner":{"account_id":24416201,"reputation":746,"user_id":18343043,"display_name":"Tarzan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1688562199,"creation_date":1688562199,"answer_id":76620622,"question_id":76620292,"body_markdown":"It seems you&#39;re using this [sample](https://github.com/stripe-samples/accept-a-payment/blob/35522cd579683355314105f822[…]nt-flow/server/java/src/main/java/com/stripe/sample/Server.java), which relies on a lot external dependencies and is using the Spark framework.\r\n\r\nIt&#39;s always easier to use a framework to build an API rather than reinventing the wheel. In your case, you might not need one, this is why you need to look at the docs (e.g. [accept a payment](https://stripe.com/docs/payments/accept-a-payment?platform=web&amp;ui=elements)) and use the server-side part in your jsp controller and the front-end part  in the webviews.","title":"How to use Stripe payment gateway with java 1.8 and tomcat 7.0 without maven or any other framework","body":"<p>It seems you're using this <a href=\"https://github.com/stripe-samples/accept-a-payment/blob/35522cd579683355314105f822%5B%E2%80%A6%5Dnt-flow/server/java/src/main/java/com/stripe/sample/Server.java\" rel=\"nofollow noreferrer\">sample</a>, which relies on a lot external dependencies and is using the Spark framework.</p>\n<p>It's always easier to use a framework to build an API rather than reinventing the wheel. In your case, you might not need one, this is why you need to look at the docs (e.g. <a href=\"https://stripe.com/docs/payments/accept-a-payment?platform=web&amp;ui=elements\" rel=\"nofollow noreferrer\">accept a payment</a>) and use the server-side part in your jsp controller and the front-end part  in the webviews.</p>\n"},{"tags":[],"owner":{"account_id":555095,"reputation":1782,"user_id":1262187,"accept_rate":18,"display_name":"simar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698094289,"creation_date":1688562987,"answer_id":76620729,"question_id":76620292,"body_markdown":"Maven or gradle just gives option not to bother you with sub-dependencies. But you can do it at your own.\r\n\r\n\r\nThe problem looks like stripe has public api and implementation in separate libraries\r\n\r\nThe public part the API\r\n    \r\n    https://mvnrepository.com/artifact/com.stripe/stripe-java\r\nThe runtime part implementation\r\n    \r\n    https://mvnrepository.com/artifact/com.stripe/stripe-core\r\n\r\n\r\nThe sub-dependencies are on same page below. There is section \r\n\r\n    **Runtime Dependencies**\r\n\r\nFollow the link and download jar files from section &quot;Files&quot; and add them to classpath directory. \r\n\r\n","title":"How to use Stripe payment gateway with java 1.8 and tomcat 7.0 without maven or any other framework","body":"<p>Maven or gradle just gives option not to bother you with sub-dependencies. But you can do it at your own.</p>\n<p>The problem looks like stripe has public api and implementation in separate libraries</p>\n<p>The public part the API</p>\n<pre><code>https://mvnrepository.com/artifact/com.stripe/stripe-java\n</code></pre>\n<p>The runtime part implementation</p>\n<pre><code>https://mvnrepository.com/artifact/com.stripe/stripe-core\n</code></pre>\n<p>The sub-dependencies are on same page below. There is section</p>\n<pre><code>**Runtime Dependencies**\n</code></pre>\n<p>Follow the link and download jar files from section &quot;Files&quot; and add them to classpath directory.</p>\n"}],"owner":{"account_id":17506534,"reputation":1,"user_id":12695631,"display_name":"Shubham sahane Official"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":129,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1698094289,"creation_date":1688559867,"question_id":76620292,"body_markdown":"I am completely beginner in stripe. \r\nI just want to add stripe payment gateway with java servlet  and jsp but I&#39;m unable to find any tutorial for beginner.\r\nAnother important thing is that i want to run it on tomcat server localy from eclipse.\r\ni have added stripe jar\r\n\r\nanother thing can we use stripe without spark because i have added spark jar in project library but it giving error.\r\n\r\nAnswer should contain imp points =&gt; select item from jsp page (by now) &gt; what code should we write to handle that request in java (strictly no framework) &gt; how to get response of success or fail with api .&gt;if successful show alert else fail alert and redirect to item bying page .\r\n\r\nremember: java 1.8, mysql 5.7, tomcat 7.0 , eclipse Kepler, run localy on localhost:8080 \r\n\r\nin answer :\r\na if any video tutorial\r\n+ jsp code \r\n+ java code(no framework)","title":"How to use Stripe payment gateway with java 1.8 and tomcat 7.0 without maven or any other framework","body":"<p>I am completely beginner in stripe.\nI just want to add stripe payment gateway with java servlet  and jsp but I'm unable to find any tutorial for beginner.\nAnother important thing is that i want to run it on tomcat server localy from eclipse.\ni have added stripe jar</p>\n<p>another thing can we use stripe without spark because i have added spark jar in project library but it giving error.</p>\n<p>Answer should contain imp points =&gt; select item from jsp page (by now) &gt; what code should we write to handle that request in java (strictly no framework) &gt; how to get response of success or fail with api .&gt;if successful show alert else fail alert and redirect to item bying page .</p>\n<p>remember: java 1.8, mysql 5.7, tomcat 7.0 , eclipse Kepler, run localy on localhost:8080</p>\n<p>in answer :\na if any video tutorial</p>\n<ul>\n<li>jsp code</li>\n<li>java code(no framework)</li>\n</ul>\n"},{"tags":["java","android","kotlin","chromebook"],"comments":[{"owner":{"account_id":7421543,"reputation":2880,"user_id":5645656,"accept_rate":100,"display_name":"Cardinal System"},"score":0,"creation_date":1698075891,"post_id":77346366,"comment_id":136356336,"body_markdown":"How does this pertain to java, kotlin, or android?","body":"How does this pertain to java, kotlin, or android?"}],"owner":{"account_id":27500680,"reputation":11,"user_id":20984449,"display_name":"Dinesh B"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":50,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1698094278,"creation_date":1698073936,"question_id":77346366,"body_markdown":"Chromebook Version: Version 118.0.5993.86 (Official Build) (64-bit).\r\n\r\nIssue: When performing screen sharing on a Chromebook, the shared screen appears reversed.\r\n\r\nIssue: When using the Media Projection API to capture screenshots on a Chromebook, the captured images also appear reversed.\r\n\r\n\r\nIs the problem of the screen appearing reversed during screen sharing and when using the Media Projection API to capture screenshots still present in the latest Chromebook version release?\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/HBKNu.png","title":"Screen appearing reversed during screen sharing and when using the Media Projection API","body":"<p>Chromebook Version: Version 118.0.5993.86 (Official Build) (64-bit).</p>\n<p>Issue: When performing screen sharing on a Chromebook, the shared screen appears reversed.</p>\n<p>Issue: When using the Media Projection API to capture screenshots on a Chromebook, the captured images also appear reversed.</p>\n<p>Is the problem of the screen appearing reversed during screen sharing and when using the Media Projection API to capture screenshots still present in the latest Chromebook version release?</p>\n<p><a href=\"https://i.stack.imgur.com/HBKNu.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/HBKNu.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","methods","output-parameter"],"comments":[{"owner":{"account_id":18835,"reputation":82182,"user_id":43582,"accept_rate":83,"display_name":"Bombe"},"score":7,"creation_date":1252569876,"post_id":1403921,"comment_id":1245472,"body_markdown":"That example is wrong. Java does not have output parameters.","body":"That example is wrong. Java does not have output parameters."},{"owner":{"account_id":28583,"reputation":20628,"user_id":76465,"accept_rate":93,"display_name":"Chathuranga Chandrasekara"},"score":0,"creation_date":1252570705,"post_id":1403921,"comment_id":1245526,"body_markdown":"@ Bombe : http://www.javapractices.com/topic/TopicAction.do?Id=37","body":"@ Bombe : <a href=\"http://www.javapractices.com/topic/TopicAction.do?Id=37\" rel=\"nofollow noreferrer\">javapractices.com/topic/TopicAction.do?Id=37</a>"},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":6,"creation_date":1252575291,"post_id":1403921,"comment_id":1245862,"body_markdown":"@Chathuranga: take a closer look at the example.  It is using a StringBuilder not a String!!","body":"@Chathuranga: take a closer look at the example.  It is using a StringBuilder not a String!!"},{"owner":{"account_id":31180,"reputation":29173,"user_id":85421,"display_name":"user85421"},"score":0,"creation_date":1252586090,"post_id":1403921,"comment_id":1246641,"body_markdown":"Is this String object the java.lang.String? (which is immutable)","body":"Is this String object the java.lang.String? (which is immutable)"},{"owner":{"account_id":235144,"reputation":1821,"user_id":501765,"display_name":"t&#246;rzsm&#243;kus"},"score":0,"creation_date":1697465479,"post_id":1403921,"comment_id":136279879,"body_markdown":"Does this answer your question? [Does Java have something like C#&#39;s ref and out keywords?](https://stackoverflow.com/questions/2806545/does-java-have-something-like-cs-ref-and-out-keywords)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/2806545/does-java-have-something-like-cs-ref-and-out-keywords\">Does Java have something like C#&#39;s ref and out keywords?</a>"}],"answers":[{"tags":[],"owner":{"account_id":41545,"reputation":52021,"user_id":120808,"accept_rate":90,"display_name":"Adam Batkin"},"down_vote_count":1,"up_vote_count":29,"is_accepted":true,"score":28,"last_activity_date":1252569853,"creation_date":1252569518,"answer_id":1403937,"question_id":1403921,"body_markdown":"Something isn&#39;t right in your example.\r\n\r\n    class Foo {\r\n\r\n        public static void main(String[] args) {\r\n            String x = &quot;foo&quot;;\r\n            getString(x);\r\n            System.out.println(x);\r\n        }\r\n\r\n        public static void getString(String output){\r\n            output = &quot;Hello World&quot;\r\n        }\r\n    }\r\n\r\nIn the above program, the string &quot;foo&quot; will be output, *not* &quot;Hello World&quot;.\r\n\r\nSome types are mutable, in which case you can modify an object passed into a function. For immutable types (such as `String`), you would have to build some sort of wrapper class that you can pass around instead:\r\n\r\n    class Holder&lt;T&gt; {\r\n        public Holder(T value) {\r\n            this.value = value;\r\n        }\r\n        public T value;\r\n    }\r\n\r\nThen you can instead pass around the holder:\r\n\r\n    public static void main(String[] args) {\r\n        String x = &quot;foo&quot;;\r\n        Holder&lt;String&gt; h = new Holder(x);\r\n        getString(h);\r\n        System.out.println(h.value);\r\n    }\r\n\r\n    public static void getString(Holder&lt;String&gt; output){\r\n        output.value = &quot;Hello World&quot;\r\n    }\r\n","title":"Output Parameters in Java","body":"<p>Something isn't right in your example.</p>\n\n<pre><code>class Foo {\n\n    public static void main(String[] args) {\n        String x = \"foo\";\n        getString(x);\n        System.out.println(x);\n    }\n\n    public static void getString(String output){\n        output = \"Hello World\"\n    }\n}\n</code></pre>\n\n<p>In the above program, the string \"foo\" will be output, <em>not</em> \"Hello World\".</p>\n\n<p>Some types are mutable, in which case you can modify an object passed into a function. For immutable types (such as <code>String</code>), you would have to build some sort of wrapper class that you can pass around instead:</p>\n\n<pre><code>class Holder&lt;T&gt; {\n    public Holder(T value) {\n        this.value = value;\n    }\n    public T value;\n}\n</code></pre>\n\n<p>Then you can instead pass around the holder:</p>\n\n<pre><code>public static void main(String[] args) {\n    String x = \"foo\";\n    Holder&lt;String&gt; h = new Holder(x);\n    getString(h);\n    System.out.println(h.value);\n}\n\npublic static void getString(Holder&lt;String&gt; output){\n    output.value = \"Hello World\"\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":39415,"reputation":12303,"user_id":113662,"accept_rate":93,"display_name":"Tadeusz Kopec for Ukraine"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1252569858,"creation_date":1252569858,"answer_id":1403960,"question_id":1403921,"body_markdown":"This functionality has one big disadvantage - it doesn&#39;t work. Function parameters are local to function and assigning to them doesn&#39;t have any impact outside the function.  \r\nOn the other hand \r\n\r\n    void getString(StringBuilder builder) {\r\n        builder.delete(0, builder.length());\r\n        builder.append(&quot;hello world&quot;);\r\n    }\r\n\r\nwill work, but I see no advantages of doing this (except when you need to return more than one value).","title":"Output Parameters in Java","body":"<p>This functionality has one big disadvantage - it doesn't work. Function parameters are local to function and assigning to them doesn't have any impact outside the function.<br>\nOn the other hand </p>\n\n<pre><code>void getString(StringBuilder builder) {\n    builder.delete(0, builder.length());\n    builder.append(\"hello world\");\n}\n</code></pre>\n\n<p>will work, but I see no advantages of doing this (except when you need to return more than one value).</p>\n"},{"tags":[],"owner":{"account_id":18835,"reputation":82182,"user_id":43582,"accept_rate":83,"display_name":"Bombe"},"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1252569927,"creation_date":1252569927,"answer_id":1403966,"question_id":1403921,"body_markdown":"That example is wrong, Java does not have output parameters.\r\n\r\nOne thing you could do to emulate this behaviour is:\r\n\r\n    public void doSomething(String[] output) {\r\n        output[0] = &quot;Hello World!&quot;;\r\n    }\r\n\r\nBut IMHO this sucks on multiple levels. :)\r\n\r\nIf you want a method to return something, make it return it. If you need to return multiple objects, create a container class to put these objects into and return that.","title":"Output Parameters in Java","body":"<p>That example is wrong, Java does not have output parameters.</p>\n\n<p>One thing you could do to emulate this behaviour is:</p>\n\n<pre><code>public void doSomething(String[] output) {\n    output[0] = \"Hello World!\";\n}\n</code></pre>\n\n<p>But IMHO this sucks on multiple levels. :)</p>\n\n<p>If you want a method to return something, make it return it. If you need to return multiple objects, create a container class to put these objects into and return that.</p>\n"},{"tags":[],"owner":{"account_id":46216,"reputation":12227,"user_id":136452,"accept_rate":100,"display_name":"Curd"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1252569953,"creation_date":1252569953,"answer_id":1403968,"question_id":1403921,"body_markdown":"Sometimes this mechanism can avoid creation of a new object.\r\n\r\nExample:\r\nIf an appropriate object exists anyhow, it is faster to pass it to the method and get some field changed.\r\n\r\nThis is more efficient than creating a new object inside the called method, and returning and assigning its reference (producing garbage that needs to be collected sometime).\r\n\r\n","title":"Output Parameters in Java","body":"<p>Sometimes this mechanism can avoid creation of a new object.</p>\n\n<p>Example:\nIf an appropriate object exists anyhow, it is faster to pass it to the method and get some field changed.</p>\n\n<p>This is more efficient than creating a new object inside the called method, and returning and assigning its reference (producing garbage that needs to be collected sometime).</p>\n"},{"tags":[],"owner":{"account_id":38289,"reputation":1410,"user_id":109813,"display_name":"Xr."},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1252570488,"creation_date":1252570488,"answer_id":1403995,"question_id":1403921,"body_markdown":"String are immutable, you cannot use Java&#39;s pseudo output parameters with immutable objects.\r\n\r\nAlso, the scope of *output* is limited to the *getString* method. If you change the *output* variable, the caller won&#39;t see a thing.\r\n\r\nWhat you can do, however, is change the **state** of the parameter. Consider the following example:\r\n\r\n    void handle(Request r) {\r\n        doStuff(r.getContent());\r\n        r.changeState(&quot;foobar&quot;);\r\n        r.setHandled();\r\n    }\r\n\r\nIf you have a manager calling multiple handles with a single Request, you can change the state of the Request to allow further processing (by other handlers) on a modified content. The manager could also decide to stop processing.\r\n\r\nAdvantages:\r\n\r\n  * You don&#39;t need to return a special object containing the new content and whether the processing should stop. That object would only be used once and creating the object waste memory and processing power.\r\n  * You don&#39;t have to create another Request object and let the garbage collector get rid of the now obsolete old reference.\r\n  * In some cases, you **can&#39;t** create a new object. For example, because that object was created using a factory, and you don&#39;t have access to it, or because the object had listeners and you don&#39;t know how to tell the objects that were listening to the old Request that they should instead listen to the new Request.","title":"Output Parameters in Java","body":"<p>String are immutable, you cannot use Java's pseudo output parameters with immutable objects.</p>\n\n<p>Also, the scope of <em>output</em> is limited to the <em>getString</em> method. If you change the <em>output</em> variable, the caller won't see a thing.</p>\n\n<p>What you can do, however, is change the <strong>state</strong> of the parameter. Consider the following example:</p>\n\n<pre><code>void handle(Request r) {\n    doStuff(r.getContent());\n    r.changeState(\"foobar\");\n    r.setHandled();\n}\n</code></pre>\n\n<p>If you have a manager calling multiple handles with a single Request, you can change the state of the Request to allow further processing (by other handlers) on a modified content. The manager could also decide to stop processing.</p>\n\n<p>Advantages:</p>\n\n<ul>\n<li>You don't need to return a special object containing the new content and whether the processing should stop. That object would only be used once and creating the object waste memory and processing power.</li>\n<li>You don't have to create another Request object and let the garbage collector get rid of the now obsolete old reference.</li>\n<li>In some cases, you <strong>can't</strong> create a new object. For example, because that object was created using a factory, and you don't have access to it, or because the object had listeners and you don't know how to tell the objects that were listening to the old Request that they should instead listen to the new Request.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":56276,"reputation":2094,"user_id":168548,"display_name":"Davide Consonni"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1252585070,"creation_date":1252585070,"answer_id":1404937,"question_id":1403921,"body_markdown":"in my opinion, this is useful when you have more than one result in a function.","title":"Output Parameters in Java","body":"<p>in my opinion, this is useful when you have more than one result in a function.</p>\n"},{"tags":[],"owner":{"account_id":267968,"reputation":183,"user_id":556460,"display_name":"plinyar"},"down_vote_count":2,"up_vote_count":5,"is_accepted":false,"score":3,"last_activity_date":1698075005,"creation_date":1293572927,"answer_id":4549783,"question_id":1403921,"body_markdown":"I disagree with Jesper&#39;s [comment][1]: &quot;In my opinion, this is a really ugly and bad way to return more than one result&quot;.\r\nIn .NET there is a interesting construct that utilize the output parameters:\r\n\r\n    bool IDictionary.TryGet(key, out value);\r\n\r\nI find it very usefull and elegant. And it is the most convenient way to aks if an item is in collection and return it at the same time. With it you may write:\r\n\r\n    object obj;\r\n    if (myList.TryGet(theKey, out obj))\r\n    {\r\n      ... work with the obj;\r\n    }\r\n\r\n\r\nI constantly scold my developers if I see old-style code like:\r\n\r\n    if (myList.Contains(theKey))\r\n    {\r\n      obj = myList.Get(theKey);\r\n    }\r\n\r\nYou see, it cuts the performance in half. In Java there is no way to differentiate null value of an existing item from non-existance of an item in a Map in one call. Sometimes this is necessary.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/1403921/output-parameters-in-java/4549783#comment1247310_1404937","title":"Output Parameters in Java","body":"<p>I disagree with Jesper's <a href=\"https://stackoverflow.com/questions/1403921/output-parameters-in-java/4549783#comment1247310_1404937\">comment</a>: &quot;In my opinion, this is a really ugly and bad way to return more than one result&quot;.\nIn .NET there is a interesting construct that utilize the output parameters:</p>\n<pre><code>bool IDictionary.TryGet(key, out value);\n</code></pre>\n<p>I find it very usefull and elegant. And it is the most convenient way to aks if an item is in collection and return it at the same time. With it you may write:</p>\n<pre><code>object obj;\nif (myList.TryGet(theKey, out obj))\n{\n  ... work with the obj;\n}\n</code></pre>\n<p>I constantly scold my developers if I see old-style code like:</p>\n<pre><code>if (myList.Contains(theKey))\n{\n  obj = myList.Get(theKey);\n}\n</code></pre>\n<p>You see, it cuts the performance in half. In Java there is no way to differentiate null value of an existing item from non-existance of an item in a Map in one call. Sometimes this is necessary.</p>\n"},{"tags":[],"owner":{"account_id":1729626,"reputation":21,"user_id":1583493,"display_name":"bvrwoo_3376"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1344395403,"creation_date":1344395403,"answer_id":11857129,"question_id":1403921,"body_markdown":"Actually, it is impossible to have out parameters in java but you can make a work around making the method take on a de-reference for the immutable String and primitives by either writing a generic class where the immutable is the generic with the value and setter and getter or by using an array where element 0 (1 in length) is the value provided it is instantiate first because there are situations where you need to return more than one value where having to write a class just to return them where the class is only used there is just a waste of text and not really re-usable.\r\n\r\nNow being a C/C++ and also .Net (mono or MS), it urges me that java does not support at least a de-reference for primitives; so, I resort to the array instead.\r\n\r\nHere is an example. Let&#39;s say you need to create a function (method) to check whether the index is valid in the array but you also want to return the remainding length after the index is validated. Let&#39;s call it in c as &#39;bool validate_index(int index, int arr_len, int&amp;rem)&#39;. A way to do this in java would be &#39;Boolean validate_index(int index, int arr_len, int[] rem1)&#39;. rem1 just means the array hold 1 element.\r\n\r\n    public static Boolean validate_index(int index, int arr_len, int[] rem1)\r\n    {\r\n        if (index &lt; 0 || arr_len &lt;= 0) return false;\r\n\r\n        Boolean retVal = (index &gt;= 0 &amp;&amp; index &lt; arr_len);\r\n\r\n        if (retVal &amp;&amp; rem1 != null) rem1[0] = (arr_len - (index + 1));\r\n        \r\n        return retVal;\r\n           \r\n    }\r\n \r\nNow if we use this we can get both the Boolean return and the remainder.\r\n\r\n     public static void main(String[] args)\r\n     {\r\n        int[] ints = int[]{1, 2, 3, 4, 5, 6};\r\n        int[] aRem = int[]{-1};\r\n        //because we can only scapegoat the de-ref we need to instantiate it first.\r\n        Boolean result = validate_index(3, ints.length, aRem);\r\n        \r\n        System.out.println(&quot;Validation = &quot; + result.toString());\r\n        System.out.println(&quot;Remainding elements equals &quot; + aRem[0].toString());\r\n        \r\n     }\r\n\r\nputs: Validation = True\r\nputs: Remainding elements equals 2\r\n\r\nArray elements always either point to the object on the stack or the address of the object on the heap. So using it as a de-references is absolutely possible even for arrays by making it a double array instantiating it as myArrayPointer = new Class&lt;?&gt;[1][] then passing it in because sometimes you don&#39;t know what the length of the array will until the call going through an algorithm like &#39;Boolean tryToGetArray&lt;T&gt;(SomeObject o, T[][] ppArray)&#39; which would be the same as in c/c++ as &#39;template&lt;typename T&gt; bool tryToGetArray (SomeObject* p, T** ppArray)&#39; or C# &#39;bool tryToGetArray&lt;T&gt;(SomeObject o, ref T[] array)&#39;.\r\nIt works and it works well as long as the [][] or [] is instantiate in memory first with at least one element.\r\n\r\n\r\n\r\n\r\n\r\n","title":"Output Parameters in Java","body":"<p>Actually, it is impossible to have out parameters in java but you can make a work around making the method take on a de-reference for the immutable String and primitives by either writing a generic class where the immutable is the generic with the value and setter and getter or by using an array where element 0 (1 in length) is the value provided it is instantiate first because there are situations where you need to return more than one value where having to write a class just to return them where the class is only used there is just a waste of text and not really re-usable.</p>\n\n<p>Now being a C/C++ and also .Net (mono or MS), it urges me that java does not support at least a de-reference for primitives; so, I resort to the array instead.</p>\n\n<p>Here is an example. Let's say you need to create a function (method) to check whether the index is valid in the array but you also want to return the remainding length after the index is validated. Let's call it in c as 'bool validate_index(int index, int arr_len, int&amp;rem)'. A way to do this in java would be 'Boolean validate_index(int index, int arr_len, int[] rem1)'. rem1 just means the array hold 1 element.</p>\n\n<pre><code>public static Boolean validate_index(int index, int arr_len, int[] rem1)\n{\n    if (index &lt; 0 || arr_len &lt;= 0) return false;\n\n    Boolean retVal = (index &gt;= 0 &amp;&amp; index &lt; arr_len);\n\n    if (retVal &amp;&amp; rem1 != null) rem1[0] = (arr_len - (index + 1));\n\n    return retVal;\n\n}\n</code></pre>\n\n<p>Now if we use this we can get both the Boolean return and the remainder.</p>\n\n<pre><code> public static void main(String[] args)\n {\n    int[] ints = int[]{1, 2, 3, 4, 5, 6};\n    int[] aRem = int[]{-1};\n    //because we can only scapegoat the de-ref we need to instantiate it first.\n    Boolean result = validate_index(3, ints.length, aRem);\n\n    System.out.println(\"Validation = \" + result.toString());\n    System.out.println(\"Remainding elements equals \" + aRem[0].toString());\n\n }\n</code></pre>\n\n<p>puts: Validation = True\nputs: Remainding elements equals 2</p>\n\n<p>Array elements always either point to the object on the stack or the address of the object on the heap. So using it as a de-references is absolutely possible even for arrays by making it a double array instantiating it as myArrayPointer = new Class[1][] then passing it in because sometimes you don't know what the length of the array will until the call going through an algorithm like 'Boolean tryToGetArray(SomeObject o, T[][] ppArray)' which would be the same as in c/c++ as 'template bool tryToGetArray (SomeObject* p, T** ppArray)' or C# 'bool tryToGetArray(SomeObject o, ref T[] array)'.\nIt works and it works well as long as the [][] or [] is instantiate in memory first with at least one element.</p>\n"}],"owner":{"account_id":28583,"reputation":20628,"user_id":76465,"accept_rate":93,"display_name":"Chathuranga Chandrasekara"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":34046,"favorite_count":0,"down_vote_count":2,"up_vote_count":9,"accepted_answer_id":1403937,"answer_count":8,"score":7,"last_activity_date":1698094241,"creation_date":1252569324,"question_id":1403921,"body_markdown":"With a third party API I observed the following.\r\n\r\nInstead of using,\r\n\r\n    public static string getString(){\r\n       return &quot;Hello World&quot;;\r\n    }\r\n\r\nit uses something like\r\n\r\n    public static void getString(String output){\r\n       \r\n    }\r\n\r\nand I am getting the &quot;output&quot; string assigned.\r\n\r\nI am curious about the reason of implementing such functionality. What are the advantages of using such output parameters?","title":"Output Parameters in Java","body":"<p>With a third party API I observed the following.</p>\n\n<p>Instead of using,</p>\n\n<pre><code>public static string getString(){\n   return \"Hello World\";\n}\n</code></pre>\n\n<p>it uses something like</p>\n\n<pre><code>public static void getString(String output){\n\n}\n</code></pre>\n\n<p>and I am getting the \"output\" string assigned.</p>\n\n<p>I am curious about the reason of implementing such functionality. What are the advantages of using such output parameters?</p>\n"},{"tags":["java","ssl","tomcat"],"comments":[{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1698121750,"post_id":77348009,"comment_id":136361741,"body_markdown":"Your steps after signing are not correct. You should have imported the entire signed certificate chain under the alias of the private key entry. At present you don&#39;t have a signed certificate at all, just the original self-signed one. But that&#39;s not the problem here.","body":"Your steps after signing are not correct. You should have imported the entire signed certificate chain under the alias of the private key entry. At present you don&#39;t have a signed certificate at all, just the original self-signed one. But that&#39;s not the problem here."}],"answers":[{"tags":[],"owner":{"account_id":3701398,"reputation":116662,"user_id":3081018,"display_name":"Steffen Ullrich"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1698093125,"creation_date":1698093125,"answer_id":77348158,"question_id":77348009,"body_markdown":"&gt; It is __not a network issue__ because if I configure server.xml to access it again using http (instead of https), the application opens normally.\r\n\r\nHTTP and HTTPS use different default ports. HTTP is using port 80, HTTPS port 443. What you describe sounds like a firewall allowing access to port 80 but dropping attempts to access port 443. \r\n\r\nWhile nothing is known about your network environment there are cloud environments which by default block almost anything, including port 443. To allow access one need to actively change the firewall settings to allow access. Note that there might be also multiple firewalls involved in this, like a firewall on the system itself but also firewalls somewhere between the client and server system.","title":"SSL on Tomcat ERR_CONNECTION_TIMED_OUT","body":"<blockquote>\n<p>It is <strong>not a network issue</strong> because if I configure server.xml to access it again using http (instead of https), the application opens normally.</p>\n</blockquote>\n<p>HTTP and HTTPS use different default ports. HTTP is using port 80, HTTPS port 443. What you describe sounds like a firewall allowing access to port 80 but dropping attempts to access port 443.</p>\n<p>While nothing is known about your network environment there are cloud environments which by default block almost anything, including port 443. To allow access one need to actively change the firewall settings to allow access. Note that there might be also multiple firewalls involved in this, like a firewall on the system itself but also firewalls somewhere between the client and server system.</p>\n"}],"owner":{"account_id":19950129,"reputation":601,"user_id":14619971,"display_name":"jkfe"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77348158,"answer_count":1,"score":1,"last_activity_date":1698093892,"creation_date":1698091158,"question_id":77348009,"body_markdown":"I need to configure a Java Angular application to use SSL.\r\n\r\nThis is how I&#39;m doing.\r\n\r\nGenerated the .jks using this command:\r\n\r\n```\r\nkeytool -genkey -alias myservername -keyalg RSA -keysize 2048 -keystore myservername.jks -dname &quot;CN=myservername, O=MyOrg, L=, ST=, C=&quot; &amp;&amp; keytool -certreq -alias myservername -file myservername.csr -keystore myservername.jks\r\n```\r\n\r\nIt generated a myservername.csr file and a myservername.jks file.\r\n\r\nThen, I ran this command\r\n\r\n```keytool -list -keystore myservername.jks```\r\n\r\nand got this result:\r\n\r\n```\r\nmyservername, Oct 20, 2023, PrivateKeyEntry,\r\nCertificate fingerprint (SHA-256): xxxxxxxx\r\n```\r\n\r\nThen I sent the myservername.csr file to the certificate authority and they sent me back this:\r\n\r\n```\r\n-----BEGIN CERTIFICATE-----\r\nxxxxxxx\r\n-----END CERTIFICATE-----\r\n```\r\n\r\nI pasted that into a myservername.cer file.\r\n\r\nI double click the myservername.cer and went to certificate path tab and I see this:\r\nrootcertname &gt; intermediatecertname &gt; myservername\r\n\r\nmyservername is the alias I choose in the first command above.\r\n\r\nThen I clicked rootcertname &gt; view certificate &gt; details &gt; copy to file &gt; next &gt; Base 64 encoded x.509 (cer)\r\n\r\nIt generated rootcertname.cer\r\n\r\nThen I clicked intermediatecertname &gt; view certificate &gt; details &gt; copy to file &gt; next &gt; Base 64 encoded x.509 (cer)\r\n\r\nIt generated intermediatecertname.cer\r\n\r\nThen I imported both certificates to the keystore like this:\r\n\r\n```\r\nkeytool -keystore myservername.jks -import -alias intermediate -trustcacerts -file intermediatecertname.cer\r\nkeytool -keystore myservername.jks -import -alias root -trustcacerts -file rootcertname.cer\r\n```\r\n\r\nThen I ran this command again to list the certificates in the keystore:\r\n\r\n```\r\nkeytool -list -keystore myservername.jks\r\n```\r\n\r\nand got this result:\r\n\r\n```\r\nintermediate, Oct 23, 2023, trustedCertEntry,\r\nCertificate fingerprint (SHA-256): xxxx\r\nroot, Oct 23, 2023, trustedCertEntry,\r\nCertificate fingerprint (SHA-256): xxx\r\nmyservername, Oct 20, 2023, PrivateKeyEntry,\r\nCertificate fingerprint (SHA-256): xxxx\r\n```\r\n\r\nSo it has the privatekey (generated in the first command above) plus the root and intermediate certificates from the Certification Authority.\r\n\r\nCopied myservername.jks to Tomcat \\conf folder.\r\n\r\nAnd configured Tomcat server.xml connector as follows:\r\n\r\n```\r\n&lt;Connector port=&quot;8443&quot; protocol=&quot;HTTP/1.1&quot; SSLEnabled=&quot;true&quot;\r\n           maxThreads=&quot;150&quot; scheme=&quot;https&quot; secure=&quot;true&quot;\r\n           keystoreFile=&quot;conf\\myservername.jks&quot;\r\n           keystorePass=&quot;mypass&quot;\r\n           keystoreType=&quot;JKS&quot; /&gt;\r\n```\r\n\t\t   \r\nBut when I access the application on the browser using https I the following error message:\r\n\r\n```ERR_CONNECTION_TIMED_OUT```\r\n\r\nIt is not a network issue because if I configure server.xml to access it again using http (instead of https), the application opens normally.\r\n\r\n","title":"SSL on Tomcat ERR_CONNECTION_TIMED_OUT","body":"<p>I need to configure a Java Angular application to use SSL.</p>\n<p>This is how I'm doing.</p>\n<p>Generated the .jks using this command:</p>\n<pre><code>keytool -genkey -alias myservername -keyalg RSA -keysize 2048 -keystore myservername.jks -dname &quot;CN=myservername, O=MyOrg, L=, ST=, C=&quot; &amp;&amp; keytool -certreq -alias myservername -file myservername.csr -keystore myservername.jks\n</code></pre>\n<p>It generated a myservername.csr file and a myservername.jks file.</p>\n<p>Then, I ran this command</p>\n<p><code>keytool -list -keystore myservername.jks</code></p>\n<p>and got this result:</p>\n<pre><code>myservername, Oct 20, 2023, PrivateKeyEntry,\nCertificate fingerprint (SHA-256): xxxxxxxx\n</code></pre>\n<p>Then I sent the myservername.csr file to the certificate authority and they sent me back this:</p>\n<pre><code>-----BEGIN CERTIFICATE-----\nxxxxxxx\n-----END CERTIFICATE-----\n</code></pre>\n<p>I pasted that into a myservername.cer file.</p>\n<p>I double click the myservername.cer and went to certificate path tab and I see this:\nrootcertname &gt; intermediatecertname &gt; myservername</p>\n<p>myservername is the alias I choose in the first command above.</p>\n<p>Then I clicked rootcertname &gt; view certificate &gt; details &gt; copy to file &gt; next &gt; Base 64 encoded x.509 (cer)</p>\n<p>It generated rootcertname.cer</p>\n<p>Then I clicked intermediatecertname &gt; view certificate &gt; details &gt; copy to file &gt; next &gt; Base 64 encoded x.509 (cer)</p>\n<p>It generated intermediatecertname.cer</p>\n<p>Then I imported both certificates to the keystore like this:</p>\n<pre><code>keytool -keystore myservername.jks -import -alias intermediate -trustcacerts -file intermediatecertname.cer\nkeytool -keystore myservername.jks -import -alias root -trustcacerts -file rootcertname.cer\n</code></pre>\n<p>Then I ran this command again to list the certificates in the keystore:</p>\n<pre><code>keytool -list -keystore myservername.jks\n</code></pre>\n<p>and got this result:</p>\n<pre><code>intermediate, Oct 23, 2023, trustedCertEntry,\nCertificate fingerprint (SHA-256): xxxx\nroot, Oct 23, 2023, trustedCertEntry,\nCertificate fingerprint (SHA-256): xxx\nmyservername, Oct 20, 2023, PrivateKeyEntry,\nCertificate fingerprint (SHA-256): xxxx\n</code></pre>\n<p>So it has the privatekey (generated in the first command above) plus the root and intermediate certificates from the Certification Authority.</p>\n<p>Copied myservername.jks to Tomcat \\conf folder.</p>\n<p>And configured Tomcat server.xml connector as follows:</p>\n<pre><code>&lt;Connector port=&quot;8443&quot; protocol=&quot;HTTP/1.1&quot; SSLEnabled=&quot;true&quot;\n           maxThreads=&quot;150&quot; scheme=&quot;https&quot; secure=&quot;true&quot;\n           keystoreFile=&quot;conf\\myservername.jks&quot;\n           keystorePass=&quot;mypass&quot;\n           keystoreType=&quot;JKS&quot; /&gt;\n</code></pre>\n<p>But when I access the application on the browser using https I the following error message:</p>\n<p><code>ERR_CONNECTION_TIMED_OUT</code></p>\n<p>It is not a network issue because if I configure server.xml to access it again using http (instead of https), the application opens normally.</p>\n"},{"tags":["java","spring","websocket"],"owner":{"account_id":2602712,"reputation":1273,"user_id":4776486,"accept_rate":40,"display_name":"voipp"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":15,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1698093812,"creation_date":1698093812,"question_id":77348221,"body_markdown":"I have a simple websocket controller:\r\n```\r\n    @MessageMapping(&quot;/v1/send&quot;)\r\n    @SendToUser(destinations = &quot;/topic/history&quot;, broadcast = false)\r\n    public String send(@Valid MessageRequest message, Principal principal) {\r\n        String userId = principal.getName();\r\n        updateMdcAndInfo(String.format(&quot;SEND: %s&quot;, message), userId, Constants.METHOD_SEND_MESSAGE);\r\n\r\n        simpleMessageTemplate.convertAndSendToUser(userId, Topic.MESSAGES.getTopic(), Collections.singletonList(message));\r\n\r\n        return &quot;foo&quot;;\r\n    }\r\n```\r\n\r\nI want to log all inbound\\outbound messages. Implemented **ChannelInterceptor** with methods **postSend**, **postReceive** but only inboundChannel messages are logged.\r\n\r\nHow can I log both inboundChannel\\OutboundChannel messages ?","title":"How to log spring websocket packets?","body":"<p>I have a simple websocket controller:</p>\n<pre><code>    @MessageMapping(&quot;/v1/send&quot;)\n    @SendToUser(destinations = &quot;/topic/history&quot;, broadcast = false)\n    public String send(@Valid MessageRequest message, Principal principal) {\n        String userId = principal.getName();\n        updateMdcAndInfo(String.format(&quot;SEND: %s&quot;, message), userId, Constants.METHOD_SEND_MESSAGE);\n\n        simpleMessageTemplate.convertAndSendToUser(userId, Topic.MESSAGES.getTopic(), Collections.singletonList(message));\n\n        return &quot;foo&quot;;\n    }\n</code></pre>\n<p>I want to log all inbound\\outbound messages. Implemented <strong>ChannelInterceptor</strong> with methods <strong>postSend</strong>, <strong>postReceive</strong> but only inboundChannel messages are logged.</p>\n<p>How can I log both inboundChannel\\OutboundChannel messages ?</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":1281728,"reputation":73126,"user_id":1235698,"accept_rate":100,"display_name":"Marcin Orlowski"},"score":0,"creation_date":1669071319,"post_id":74525474,"comment_id":131555772,"body_markdown":"There&#39;s demo app included in project repo - you can check if your project setup matches.","body":"There&#39;s demo app included in project repo - you can check if your project setup matches."},{"owner":{"account_id":483434,"reputation":25487,"user_id":898478,"accept_rate":86,"display_name":"m0skit0"},"score":0,"creation_date":1669072628,"post_id":74525474,"comment_id":131556009,"body_markdown":"Did you gradle sync after changing the build.gradle? Does the sync inform of any errors?","body":"Did you gradle sync after changing the build.gradle? Does the sync inform of any errors?"},{"owner":{"account_id":12321651,"reputation":3,"user_id":9019362,"display_name":"Sionach"},"score":0,"creation_date":1669104459,"post_id":74525474,"comment_id":131561659,"body_markdown":"I have synced after including the dependency, but the result is the same.","body":"I have synced after including the dependency, but the result is the same."},{"owner":{"account_id":12321651,"reputation":3,"user_id":9019362,"display_name":"Sionach"},"score":0,"creation_date":1669140850,"post_id":74525474,"comment_id":131575246,"body_markdown":"I have done it without success.\nI attach the content of my files.","body":"I have done it without success. I attach the content of my files."},{"owner":{"account_id":12321651,"reputation":3,"user_id":9019362,"display_name":"Sionach"},"score":0,"creation_date":1669141919,"post_id":74525474,"comment_id":131575596,"body_markdown":"I imagine that there is something wrong in these files that I have attached in the question. Due to the fact that I have create a new project, I add these three files and I receive the same error: &quot;Could not find com.smarteist.autoimageslider.SliderView&quot;","body":"I imagine that there is something wrong in these files that I have attached in the question. Due to the fact that I have create a new project, I add these three files and I receive the same error: &quot;Could not find com.smarteist.autoimageslider.SliderView&quot;"}],"answers":[{"tags":[],"owner":{"account_id":12321651,"reputation":3,"user_id":9019362,"display_name":"Sionach"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1669414520,"creation_date":1669414520,"answer_id":74578245,"question_id":74525474,"body_markdown":"I have found the solution. \r\nThe problem was that I was adding the implementation text line in the gradle:app but I should have added it in the setting.gradle. \r\nI hope my answer can help other people who find the same problem.\r\nRegards!","title":"Cannot resolve class com.smarteist.autoimageslider.SliderView in Android Studio","body":"<p>I have found the solution.\nThe problem was that I was adding the implementation text line in the gradle:app but I should have added it in the setting.gradle.\nI hope my answer can help other people who find the same problem.\nRegards!</p>\n"}],"owner":{"account_id":12321651,"reputation":3,"user_id":9019362,"display_name":"Sionach"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":888,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74578245,"answer_count":1,"score":0,"last_activity_date":1698093750,"creation_date":1669069111,"question_id":74525474,"body_markdown":"I try to use the library &quot;com.github.smarteist:autoimageslider:1.4.0&quot;, but I cannot.\r\n\r\nSteps to reproduce the behavior:\r\n\r\n1. I add the dependency: implementation &#39;com.github.smarteist:autoimageslider:1.4.0&#39; into build.gradle(:app).\r\n\r\n2. I add jcenter(), maven { url &#39;https://jitpack.io&#39; } into build:gradle(Project).\r\n\r\n3. I have synced the project.\r\n\r\n4. I put the example inside the &lt;androidx.coordinatorlayout.widget.CoordinatorLayout&gt; label.\r\n\r\n![enter image description here](https://i.stack.imgur.com/9qUjH.png)\r\n\r\n5. I received the error: &quot;Cannot resolve class com.smarteist.autoimageslider.SliderView&quot;.\r\n\r\nI am using compileSdk 32, minSdk 21\r\nCan you help me?\r\n\r\nThanks in advance.\r\n\r\nfile build.gradle:module\r\n\r\n    \r\n    buildscript {\r\n        repositories {\r\n            google()\r\n            mavenCentral()\r\n            maven { url &#39;https://jitpack.io&#39; }\r\n        }\r\n        dependencies {\r\n            classpath &#39;com.google.gms:google-services:4.3.14&#39;\r\n        }\r\n    }\r\n    plugins {\r\n        id &#39;com.android.application&#39; version &#39;7.2.1&#39; apply false\r\n        id &#39;com.android.library&#39; version &#39;7.2.1&#39; apply false\r\n    }\r\n    \r\n    task clean(type: Delete) {\r\n        delete rootProject.buildDir\r\n    }\r\n\r\nFile build.gradle:app\r\n\r\n    \r\n       plugins {\r\n        id &#39;com.android.application&#39;\r\n        id &#39;com.google.gms.google-services&#39;\r\n    }\r\n    \r\n    android {\r\n        compileSdk 32\r\n    \r\n        defaultConfig {\r\n            applicationId &quot;com.socialtravel&quot;\r\n            minSdk 21\r\n            targetSdk 32\r\n            versionCode 1\r\n            versionName &quot;1.0&quot;\r\n    \r\n            testInstrumentationRunner &quot;androidx.test.runner.AndroidJUnitRunner&quot;\r\n        }\r\n    \r\n        buildTypes {\r\n            release {\r\n                minifyEnabled false\r\n                proguardFiles getDefaultProguardFile(&#39;proguard-android-optimize.txt&#39;), &#39;proguard-rules.pro&#39;\r\n            }\r\n        }\r\n        compileOptions {\r\n            sourceCompatibility JavaVersion.VERSION_1_8\r\n            targetCompatibility JavaVersion.VERSION_1_8\r\n        }\r\n        buildFeatures {\r\n            viewBinding true\r\n        }\r\n    }\r\n    \r\n    dependencies {\r\n        implementation fileTree(dir: &#39;libs&#39;, include: [&#39;*.jar&#39;])\r\n        implementation &#39;androidx.appcompat:appcompat:1.5.1&#39;\r\n        implementation &#39;com.google.android.material:material:1.7.0&#39;\r\n        implementation &#39;androidx.constraintlayout:constraintlayout:2.1.4&#39;\r\n        implementation &#39;com.google.android.material:material:1.7.0&#39;\r\n        implementation &#39;androidx.annotation:annotation:1.5.0&#39;\r\n        implementation &#39;androidx.lifecycle:lifecycle-livedata-ktx:2.5.1&#39;\r\n        implementation &#39;androidx.lifecycle:lifecycle-viewmodel-ktx:2.5.1&#39;\r\n        implementation &#39;io.github.florent37:shapeofview:1.4.7&#39;\r\n        implementation &#39;de.hdodenhof:circleimageview:3.1.0&#39;\r\n        implementation platform(&#39;com.google.firebase:firebase-bom:30.2.0&#39;)\r\n        implementation &#39;com.google.firebase:firebase-analytics&#39;\r\n        implementation &#39;com.google.firebase:firebase-auth&#39;\r\n        implementation &#39;com.google.firebase:firebase-firestore&#39;\r\n        implementation &#39;com.google.android.gms:play-services-auth:20.4.0&#39;\r\n        implementation &#39;androidx.coordinatorlayout:coordinatorlayout:1.2.0&#39;\r\n        implementation &#39;com.google.firebase:firebase-storage:20.1.0&#39;\r\n        implementation(&#39;id.zelory:compressor:2.1.0&#39;) {\r\n            exclude module: &#39;unspecified&#39;\r\n        }\r\n        implementation &#39;com.squareup.picasso:picasso:2.5.2&#39;\r\n        implementation &#39;com.firebaseui:firebase-ui-firestore:8.0.2&#39;\r\n        implementation &#39;com.github.d-max:spots-dialog:1.1@aar&#39;\r\n        testImplementation &#39;junit:junit:4.13.2&#39;\r\n        androidTestImplementation &#39;androidx.test.ext:junit:1.1.4&#39;\r\n        androidTestImplementation &#39;androidx.test.espresso:espresso-core:3.5.0&#39;\r\n        implementation &#39;com.github.smarteist:Android-Image-Slider:1.4.0&#39;\r\n    } \r\n\r\nAnd the activity xml file:\r\n\r\n        &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;androidx.coordinatorlayout.widget.CoordinatorLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n        xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;\r\n        tools:context=&quot;.activities.PostDetailActivity&quot;&gt;\r\n    \r\n        &lt;LinearLayout\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;match_parent&quot;\r\n            android:orientation=&quot;vertical&quot;&gt;\r\n    \r\n            &lt;com.smarteist.autoimageslider.SliderView\r\n                android:id=&quot;@+id/imageSlider&quot;\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;300dp&quot;\r\n                app:sliderAnimationDuration=&quot;600&quot;\r\n                app:sliderAutoCycleDirection=&quot;back_and_forth&quot;\r\n                app:sliderAutoCycleEnabled=&quot;true&quot;\r\n                app:sliderIndicatorAnimationDuration=&quot;600&quot;\r\n                app:sliderIndicatorGravity=&quot;center_horizontal|bottom&quot;\r\n                app:sliderIndicatorMargin=&quot;15dp&quot;\r\n                app:sliderIndicatorOrientation=&quot;horizontal&quot;\r\n                app:sliderIndicatorPadding=&quot;3dp&quot;\r\n                app:sliderIndicatorRadius=&quot;2dp&quot;\r\n                app:sliderIndicatorSelectedColor=&quot;#5A5A5A&quot;\r\n                app:sliderIndicatorUnselectedColor=&quot;#FFF&quot;\r\n                app:sliderScrollTimeInSec=&quot;1&quot;\r\n                app:sliderStartAutoCycle=&quot;true&quot; /&gt;\r\n    \r\n    \r\n        &lt;/LinearLayout&gt;\r\n    \r\n    \r\n    &lt;/androidx.coordinatorlayout.widget.CoordinatorLayout&gt;\r\n\r\nI have created a new project, I add these three files and I receive the same error: &quot;Could not find com.smarteist.autoimageslider.SliderView&quot;","title":"Cannot resolve class com.smarteist.autoimageslider.SliderView in Android Studio","body":"<p>I try to use the library &quot;com.github.smarteist:autoimageslider:1.4.0&quot;, but I cannot.</p>\n<p>Steps to reproduce the behavior:</p>\n<ol>\n<li><p>I add the dependency: implementation 'com.github.smarteist:autoimageslider:1.4.0' into build.gradle(:app).</p>\n</li>\n<li><p>I add jcenter(), maven { url 'https://jitpack.io' } into build:gradle(Project).</p>\n</li>\n<li><p>I have synced the project.</p>\n</li>\n<li><p>I put the example inside the &lt;androidx.coordinatorlayout.widget.CoordinatorLayout&gt; label.</p>\n</li>\n</ol>\n<p><img src=\"https://i.stack.imgur.com/9qUjH.png\" alt=\"enter image description here\" /></p>\n<ol start=\"5\">\n<li>I received the error: &quot;Cannot resolve class com.smarteist.autoimageslider.SliderView&quot;.</li>\n</ol>\n<p>I am using compileSdk 32, minSdk 21\nCan you help me?</p>\n<p>Thanks in advance.</p>\n<p>file build.gradle:module</p>\n<pre><code>buildscript {\n    repositories {\n        google()\n        mavenCentral()\n        maven { url 'https://jitpack.io' }\n    }\n    dependencies {\n        classpath 'com.google.gms:google-services:4.3.14'\n    }\n}\nplugins {\n    id 'com.android.application' version '7.2.1' apply false\n    id 'com.android.library' version '7.2.1' apply false\n}\n\ntask clean(type: Delete) {\n    delete rootProject.buildDir\n}\n</code></pre>\n<p>File build.gradle:app</p>\n<pre><code>   plugins {\n    id 'com.android.application'\n    id 'com.google.gms.google-services'\n}\n\nandroid {\n    compileSdk 32\n\n    defaultConfig {\n        applicationId &quot;com.socialtravel&quot;\n        minSdk 21\n        targetSdk 32\n        versionCode 1\n        versionName &quot;1.0&quot;\n\n        testInstrumentationRunner &quot;androidx.test.runner.AndroidJUnitRunner&quot;\n    }\n\n    buildTypes {\n        release {\n            minifyEnabled false\n            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'\n        }\n    }\n    compileOptions {\n        sourceCompatibility JavaVersion.VERSION_1_8\n        targetCompatibility JavaVersion.VERSION_1_8\n    }\n    buildFeatures {\n        viewBinding true\n    }\n}\n\ndependencies {\n    implementation fileTree(dir: 'libs', include: ['*.jar'])\n    implementation 'androidx.appcompat:appcompat:1.5.1'\n    implementation 'com.google.android.material:material:1.7.0'\n    implementation 'androidx.constraintlayout:constraintlayout:2.1.4'\n    implementation 'com.google.android.material:material:1.7.0'\n    implementation 'androidx.annotation:annotation:1.5.0'\n    implementation 'androidx.lifecycle:lifecycle-livedata-ktx:2.5.1'\n    implementation 'androidx.lifecycle:lifecycle-viewmodel-ktx:2.5.1'\n    implementation 'io.github.florent37:shapeofview:1.4.7'\n    implementation 'de.hdodenhof:circleimageview:3.1.0'\n    implementation platform('com.google.firebase:firebase-bom:30.2.0')\n    implementation 'com.google.firebase:firebase-analytics'\n    implementation 'com.google.firebase:firebase-auth'\n    implementation 'com.google.firebase:firebase-firestore'\n    implementation 'com.google.android.gms:play-services-auth:20.4.0'\n    implementation 'androidx.coordinatorlayout:coordinatorlayout:1.2.0'\n    implementation 'com.google.firebase:firebase-storage:20.1.0'\n    implementation('id.zelory:compressor:2.1.0') {\n        exclude module: 'unspecified'\n    }\n    implementation 'com.squareup.picasso:picasso:2.5.2'\n    implementation 'com.firebaseui:firebase-ui-firestore:8.0.2'\n    implementation 'com.github.d-max:spots-dialog:1.1@aar'\n    testImplementation 'junit:junit:4.13.2'\n    androidTestImplementation 'androidx.test.ext:junit:1.1.4'\n    androidTestImplementation 'androidx.test.espresso:espresso-core:3.5.0'\n    implementation 'com.github.smarteist:Android-Image-Slider:1.4.0'\n} \n</code></pre>\n<p>And the activity xml file:</p>\n<pre><code>    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;androidx.coordinatorlayout.widget.CoordinatorLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    tools:context=&quot;.activities.PostDetailActivity&quot;&gt;\n\n    &lt;LinearLayout\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;match_parent&quot;\n        android:orientation=&quot;vertical&quot;&gt;\n\n        &lt;com.smarteist.autoimageslider.SliderView\n            android:id=&quot;@+id/imageSlider&quot;\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;300dp&quot;\n            app:sliderAnimationDuration=&quot;600&quot;\n            app:sliderAutoCycleDirection=&quot;back_and_forth&quot;\n            app:sliderAutoCycleEnabled=&quot;true&quot;\n            app:sliderIndicatorAnimationDuration=&quot;600&quot;\n            app:sliderIndicatorGravity=&quot;center_horizontal|bottom&quot;\n            app:sliderIndicatorMargin=&quot;15dp&quot;\n            app:sliderIndicatorOrientation=&quot;horizontal&quot;\n            app:sliderIndicatorPadding=&quot;3dp&quot;\n            app:sliderIndicatorRadius=&quot;2dp&quot;\n            app:sliderIndicatorSelectedColor=&quot;#5A5A5A&quot;\n            app:sliderIndicatorUnselectedColor=&quot;#FFF&quot;\n            app:sliderScrollTimeInSec=&quot;1&quot;\n            app:sliderStartAutoCycle=&quot;true&quot; /&gt;\n\n\n    &lt;/LinearLayout&gt;\n\n\n&lt;/androidx.coordinatorlayout.widget.CoordinatorLayout&gt;\n</code></pre>\n<p>I have created a new project, I add these three files and I receive the same error: &quot;Could not find com.smarteist.autoimageslider.SliderView&quot;</p>\n"},{"tags":["java","string","format","language-lawyer"],"comments":[{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":4,"creation_date":1697996046,"post_id":77341016,"comment_id":136346386,"body_markdown":"[`String::format`](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html#format(java.lang.String,java.lang.Object...)) is a static method, expecting the format template as 1st argument and the parameters as varargs (`Stirng.format(&quot;name: %s, age: %d&quot;, &quot;bob&quot;, 42)`). Did you mean instance-method [`String::formatted`](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html#formatted(java.lang.Object...)) (`&quot;name: %s, age: %d&quot;.formatted(&quot;bob&quot;, 42)`)?","body":"<a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html#format(java.lang.String,java.lang.Object...)\" rel=\"nofollow noreferrer\"><code>String::format</code></a> is a static method, expecting the format template as 1st argument and the parameters as varargs (<code>Stirng.format(&quot;name: %s, age: %d&quot;, &quot;bob&quot;, 42)</code>). Did you mean instance-method <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html#formatted(java.lang.Object...)\" rel=\"nofollow noreferrer\"><code>String::formatted</code></a> (<code>&quot;name: %s, age: %d&quot;.formatted(&quot;bob&quot;, 42)</code>)?"},{"owner":{"account_id":18559672,"reputation":300,"user_id":13523946,"display_name":"notAPPP"},"score":0,"creation_date":1697996156,"post_id":77341016,"comment_id":136346398,"body_markdown":"String.format(&quot;name: %s, age: %d&quot;,&quot;bob&quot;, 42), format on string workis with {}","body":"String.format(&quot;name: %s, age: %d&quot;,&quot;bob&quot;, 42), format on string workis with {}"},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":2,"creation_date":1697997913,"post_id":77341016,"comment_id":136346619,"body_markdown":"Turn on all compiler warnings, and pay attention to them.  The compiler will point out the problem.","body":"Turn on all compiler warnings, and pay attention to them.  The compiler will point out the problem."}],"answers":[{"tags":[],"owner":{"account_id":107921,"reputation":6806,"user_id":286704,"accept_rate":87,"display_name":"Marcx"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697996272,"creation_date":1697996272,"answer_id":77341035,"question_id":77341016,"body_markdown":"`String.format` is a static Method, you should call it this way.\r\n\r\n    String s = String.format(&quot;name: %s, age: %d&quot;, &quot;bob&quot;, 42);\r\n\r\nFirst param is the original string, then you can add multiple parameters as arguments. \r\n","title":"String.format ignores everything but first argument","body":"<p><code>String.format</code> is a static Method, you should call it this way.</p>\n<pre><code>String s = String.format(&quot;name: %s, age: %d&quot;, &quot;bob&quot;, 42);\n</code></pre>\n<p>First param is the original string, then you can add multiple parameters as arguments.</p>\n"},{"tags":[],"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1697997212,"creation_date":1697996511,"answer_id":77341057,"question_id":77341016,"body_markdown":"The method [`String.format(String format, Object... args)` (`docs.oracle.com`)][stringFormatDocs] is a static method; we use it like this:\r\n\r\n    String s1 = String.format(&quot;name: %s, age: %d&quot;, &quot;bob&quot;, 42);\r\n\r\nAlternatively we can use the instance-method [`String.formatted(Object... args)`, which was introduced with Java 15 (`docs.oracle.com`)][stringFormattedDocs]:\r\n\r\n    String s2 = &quot;name: %s, age: %d&quot;.formatted(&quot;bob&quot;, 42);\r\n\r\n[&lt;kbd&gt;`JDoodle` demo&lt;/kbd&gt;][jDoodle]\r\n\r\n[stringFormatDocs]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html#format(java.lang.String,java.lang.Object...)\r\n\r\n[stringFormattedDocs]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html#formatted(java.lang.Object...)\r\n\r\n[jDoodle]: https://www.jdoodle.com/ia/OVz","title":"String.format ignores everything but first argument","body":"<p>The method <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html#format(java.lang.String,java.lang.Object...)\" rel=\"noreferrer\"><code>String.format(String format, Object... args)</code> (<code>docs.oracle.com</code>)</a> is a static method; we use it like this:</p>\n<pre><code>String s1 = String.format(&quot;name: %s, age: %d&quot;, &quot;bob&quot;, 42);\n</code></pre>\n<p>Alternatively we can use the instance-method <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html#formatted(java.lang.Object...)\" rel=\"noreferrer\"><code>String.formatted(Object... args)</code>, which was introduced with Java 15 (<code>docs.oracle.com</code>)</a>:</p>\n<pre><code>String s2 = &quot;name: %s, age: %d&quot;.formatted(&quot;bob&quot;, 42);\n</code></pre>\n<p><a href=\"https://www.jdoodle.com/ia/OVz\" rel=\"noreferrer\"><kbd><code>JDoodle</code> demo</kbd></a></p>\n"},{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698022939,"creation_date":1698022939,"answer_id":77342198,"question_id":77341016,"body_markdown":"The _[String#format](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/String.html#format(java.lang.String,java.lang.Object...))_ method is useful for multi-line _String_ literals.\r\n\r\n```java\r\nString.format(&quot;name: %s, &quot; +\r\n              &quot;age: %d&quot;, &quot;bob&quot;, 42);\r\n```\r\n\r\nAnd, the _[String#formatted](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/String.html#formatted(java.lang.Object...))_ method is just convenient, considering you don&#39;t specify _String_.\\\r\nIt was added in _Java 15_.\r\n\r\n```java\r\n&quot;name: %s, age: %d&quot;.formatted(&quot;bob&quot;, 42)\r\n```","title":"String.format ignores everything but first argument","body":"<p>The <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/String.html#format(java.lang.String,java.lang.Object...)\" rel=\"nofollow noreferrer\">String#format</a></em> method is useful for multi-line <em>String</em> literals.</p>\n<pre class=\"lang-java prettyprint-override\"><code>String.format(&quot;name: %s, &quot; +\n              &quot;age: %d&quot;, &quot;bob&quot;, 42);\n</code></pre>\n<p>And, the <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/String.html#formatted(java.lang.Object...)\" rel=\"nofollow noreferrer\">String#formatted</a></em> method is just convenient, considering you don't specify <em>String</em>.<br />\nIt was added in <em>Java 15</em>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>&quot;name: %s, age: %d&quot;.formatted(&quot;bob&quot;, 42)\n</code></pre>\n"}],"owner":{"account_id":39208,"reputation":251220,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":124,"favorite_count":0,"down_vote_count":4,"up_vote_count":0,"answer_count":3,"score":-4,"last_activity_date":1698093538,"creation_date":1697995906,"question_id":77341016,"body_markdown":"Java&#39;s `String` type has a `format` method, but calling it ignores everything inside the template and only returns the first argument.\r\n\r\n```\r\nString s = &quot;name: %s, age: %d&quot;.format(&quot;bob&quot;, 42);\r\nassertEquals(&quot;name: bob, age: 42&quot;, s); // fails, s.equals(&quot;bob&quot;)\r\n```\r\n\r\nEven with an empty template, the first argument is returned:\r\n\r\n```\r\ns = &quot;&quot;.format(&quot;alice&quot;, 21); // returns &quot;alice&quot;\r\n```\r\n\r\nJava 8 and Java 11 both exhibit the same problematic behavior.\r\n\r\nThe same code works in Python:\r\n\r\n```python\r\ns = &#39;name: {}, age: {}&#39;.format(&#39;bob&#39;, 42)\r\ns == &#39;name: bob, age: 42&#39; # True\r\n```\r\n\r\nWhy is that? There&#39;s no compilation error and the program runs without exception. It is very not obvious why it behaves this way. How to properly use the `format` method of a string?\r\n\r\nI read somewhere that in object-oriented languages, the object is the first argument of a method. Does that play a role here?\r\n","title":"String.format ignores everything but first argument","body":"<p>Java's <code>String</code> type has a <code>format</code> method, but calling it ignores everything inside the template and only returns the first argument.</p>\n<pre><code>String s = &quot;name: %s, age: %d&quot;.format(&quot;bob&quot;, 42);\nassertEquals(&quot;name: bob, age: 42&quot;, s); // fails, s.equals(&quot;bob&quot;)\n</code></pre>\n<p>Even with an empty template, the first argument is returned:</p>\n<pre><code>s = &quot;&quot;.format(&quot;alice&quot;, 21); // returns &quot;alice&quot;\n</code></pre>\n<p>Java 8 and Java 11 both exhibit the same problematic behavior.</p>\n<p>The same code works in Python:</p>\n<pre class=\"lang-py prettyprint-override\"><code>s = 'name: {}, age: {}'.format('bob', 42)\ns == 'name: bob, age: 42' # True\n</code></pre>\n<p>Why is that? There's no compilation error and the program runs without exception. It is very not obvious why it behaves this way. How to properly use the <code>format</code> method of a string?</p>\n<p>I read somewhere that in object-oriented languages, the object is the first argument of a method. Does that play a role here?</p>\n"},{"tags":["java","steam-web-api"],"answers":[{"tags":[],"owner":{"account_id":5789751,"reputation":63,"user_id":4567690,"display_name":"Azriel Gridfen"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1443597694,"creation_date":1443597694,"answer_id":32860181,"question_id":32300321,"body_markdown":"Have you read steam API docs? There&#39;s no trade accept function, so I assume you can&#39;t accept trades via API.\r\nYour option is to check SteamBot&#39;s (though it is written in C#) trade functions  and think about straight http requests to steam site (with proper steam authentication I believe). I myself writing a bot currently, and single thing that stops me now - accepting trades.","title":"Accept Trade Offer from Steam using Web-API &amp; Java","body":"<p>Have you read steam API docs? There's no trade accept function, so I assume you can't accept trades via API.\nYour option is to check SteamBot's (though it is written in C#) trade functions  and think about straight http requests to steam site (with proper steam authentication I believe). I myself writing a bot currently, and single thing that stops me now - accepting trades.</p>\n"},{"tags":[],"owner":{"account_id":8289916,"reputation":1,"user_id":6231922,"display_name":"Stas Nilobop"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698093077,"creation_date":1698093077,"answer_id":77348152,"question_id":32300321,"body_markdown":"[Java Steam Trade Library](https://github.com/wonderf/steam-trade-library)\r\nDeveloped Lib for send and accept trades in Steam","title":"Accept Trade Offer from Steam using Web-API &amp; Java","body":"<p><a href=\"https://github.com/wonderf/steam-trade-library\" rel=\"nofollow noreferrer\">Java Steam Trade Library</a>\nDeveloped Lib for send and accept trades in Steam</p>\n"}],"owner":{"account_id":4835682,"reputation":3612,"user_id":3902473,"accept_rate":48,"display_name":"Momo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5027,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1698093077,"creation_date":1440962932,"question_id":32300321,"body_markdown":"I have a Java Steam Trade Bot that reads through pending Trade Offers from Steam and declines them based on requirements. I am using the official Web API (using the API Key from http://steamcommunity.com/dev/apikey) to communicate requests to Steam. The variable `trade` is from my own API Interface (which I have debugged and works for declining offers).\r\n\r\n`SteamPlug.steamRequest(method, query);` is just a basic HTTP requester:\r\n\r\n    public static String steamRequest(String method, String query) {\r\n        try {\r\n            URL obj = new URL(query);\r\n            HttpURLConnection con = (HttpURLConnection) obj.openConnection();\r\n\r\n            con.setRequestMethod(method);\r\n\r\n            int responseCode = con.getResponseCode();\r\n\r\n            if (responseCode != 200 &amp;&amp; responseCode != 201) {\r\n                return &quot;ERR&quot; + responseCode;\r\n            }\r\n\r\n            BufferedReader in = new BufferedReader(\r\n                    new InputStreamReader(con.getInputStream()));\r\n            String inputLine;\r\n            StringBuilder response = new StringBuilder();\r\n\r\n            while ((inputLine = in.readLine()) != null) {\r\n                response.append(inputLine);\r\n            }\r\n            in.close();\r\n\r\n            return response.toString();\r\n        } catch (MalformedURLException | ProtocolException e) {\r\n            e.printStackTrace();\r\n        } catch (IOException e) {\r\n            // Ignored\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\nThis is how it declines trade offers:\r\n\r\n    SteamPlug.steamRequest(\r\n              &quot;POST&quot;,\r\n              &quot;http://api.steampowered.com/IEconService/DeclineTradeOffer/v0001/?key=&quot; \r\n              + SteamPlug.API_KEY + &quot;&amp;tradeofferid=&quot; + trade.getTradeOfferId()\r\n    );\r\n\r\nWhat I am trying to do is accepting trades as well. I have tried this:\r\n\r\n    SteamPlug.steamRequest(\r\n              &quot;POST&quot;,\r\n              &quot;https://steamcommunity.com/tradeoffer/&quot; + trade.getTradeOfferId() + &quot;/accept?key=&quot;\r\n              + SteamPlug.API_KEY\r\n    );\r\n\r\nBut I receive a `411 Length Required` response.\r\n\r\n**I believe I can accept offers by using a Steam session authentification, but is it possible to accept a Trade Offer using only the user&#39;s Web-API key?**","title":"Accept Trade Offer from Steam using Web-API &amp; Java","body":"<p>I have a Java Steam Trade Bot that reads through pending Trade Offers from Steam and declines them based on requirements. I am using the official Web API (using the API Key from <a href=\"http://steamcommunity.com/dev/apikey\" rel=\"nofollow\">http://steamcommunity.com/dev/apikey</a>) to communicate requests to Steam. The variable <code>trade</code> is from my own API Interface (which I have debugged and works for declining offers).</p>\n\n<p><code>SteamPlug.steamRequest(method, query);</code> is just a basic HTTP requester:</p>\n\n<pre><code>public static String steamRequest(String method, String query) {\n    try {\n        URL obj = new URL(query);\n        HttpURLConnection con = (HttpURLConnection) obj.openConnection();\n\n        con.setRequestMethod(method);\n\n        int responseCode = con.getResponseCode();\n\n        if (responseCode != 200 &amp;&amp; responseCode != 201) {\n            return \"ERR\" + responseCode;\n        }\n\n        BufferedReader in = new BufferedReader(\n                new InputStreamReader(con.getInputStream()));\n        String inputLine;\n        StringBuilder response = new StringBuilder();\n\n        while ((inputLine = in.readLine()) != null) {\n            response.append(inputLine);\n        }\n        in.close();\n\n        return response.toString();\n    } catch (MalformedURLException | ProtocolException e) {\n        e.printStackTrace();\n    } catch (IOException e) {\n        // Ignored\n    }\n\n    return null;\n}\n</code></pre>\n\n<p>This is how it declines trade offers:</p>\n\n<pre><code>SteamPlug.steamRequest(\n          \"POST\",\n          \"http://api.steampowered.com/IEconService/DeclineTradeOffer/v0001/?key=\" \n          + SteamPlug.API_KEY + \"&amp;tradeofferid=\" + trade.getTradeOfferId()\n);\n</code></pre>\n\n<p>What I am trying to do is accepting trades as well. I have tried this:</p>\n\n<pre><code>SteamPlug.steamRequest(\n          \"POST\",\n          \"https://steamcommunity.com/tradeoffer/\" + trade.getTradeOfferId() + \"/accept?key=\"\n          + SteamPlug.API_KEY\n);\n</code></pre>\n\n<p>But I receive a <code>411 Length Required</code> response.</p>\n\n<p><strong>I believe I can accept offers by using a Steam session authentification, but is it possible to accept a Trade Offer using only the user's Web-API key?</strong></p>\n"},{"tags":["python","java","maven","junit","graalvm"],"comments":[{"owner":{"account_id":372682,"reputation":22426,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1698091088,"post_id":77347629,"comment_id":136358890,"body_markdown":"There is no question in this post.","body":"There is no question in this post."},{"owner":{"account_id":29699400,"reputation":3,"user_id":22761917,"display_name":"Eshgin Hasanov"},"score":0,"creation_date":1698092139,"post_id":77347629,"comment_id":136359046,"body_markdown":"I am sorry for forgetting the question. I added.","body":"I am sorry for forgetting the question. I added."},{"owner":{"account_id":125486,"reputation":2868,"user_id":321302,"accept_rate":100,"display_name":"Steves"},"score":0,"creation_date":1698095243,"post_id":77347629,"comment_id":136359545,"body_markdown":"Are you running the tests from IntelliJ or from command line using Maven? Try both. Which JDK are you using OpenJDK 21 or GraalVM for JDK 21?","body":"Are you running the tests from IntelliJ or from command line using Maven? Try both. Which JDK are you using OpenJDK 21 or GraalVM for JDK 21?"},{"owner":{"account_id":29699400,"reputation":3,"user_id":22761917,"display_name":"Eshgin Hasanov"},"score":0,"creation_date":1698098599,"post_id":77347629,"comment_id":136359943,"body_markdown":"I have tried both. I am using GraalVM for JDK 21.","body":"I have tried both. I am using GraalVM for JDK 21."},{"owner":{"account_id":21994,"reputation":73798,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"score":0,"creation_date":1698130620,"post_id":77347629,"comment_id":136362715,"body_markdown":"It looks like the actual problem is with Java module visibility and not your code as such","body":"It looks like the actual problem is with Java module visibility and not your code as such"},{"owner":{"account_id":8416486,"reputation":165,"user_id":6316763,"accept_rate":100,"display_name":"newlearner"},"score":0,"creation_date":1698360761,"post_id":77347629,"comment_id":136399289,"body_markdown":"@EshginHasanov I believe you need to use `Jython`so you can access your `python` function from `Java` methods and you also need to run your `python` code in `Jython` as well","body":"@EshginHasanov I believe you need to use <code>Jython</code>so you can access your <code>python</code> function from <code>Java</code> methods and you also need to run your <code>python</code> code in <code>Jython</code> as well"},{"owner":{"account_id":8416486,"reputation":165,"user_id":6316763,"accept_rate":100,"display_name":"newlearner"},"score":0,"creation_date":1698360974,"post_id":77347629,"comment_id":136399321,"body_markdown":"@EshginHasanov you can check out this link : https://stackoverflow.com/questions/8898765/calling-python-in-java","body":"@EshginHasanov you can check out this link : <a href=\"https://stackoverflow.com/questions/8898765/calling-python-in-java\" title=\"calling python in java\">stackoverflow.com/questions/8898765/calling-python-in-java</a>"}],"owner":{"account_id":29699400,"reputation":3,"user_id":22761917,"display_name":"Eshgin Hasanov"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":62,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1698092110,"creation_date":1698086779,"question_id":77347629,"body_markdown":"In GraalPy project, where I translate Java codes into Python, I have encountered an error when performing unit testing. When the entire code consists of Java code, JUnit performs successfully, even when Java code is combined with Python, in methods which call the constructor not using Python code, unit test passes:\r\n\r\n```\r\nPoint(int x, int y) {\r\n     this(x, y, false);\r\n}\r\n```\r\n\r\nHowever, when JUnit tries to test the methods which uses the constructor where Python file is called, it throws an &quot;IllegalAccessError&quot;. I believe I have successfully integrated Python with Java as when I am testing inside &quot;public static void main&quot; I get the results I want. The contents of some files are below.\r\n\r\nThe content of src/main/java/my/pack/Point.java file with pure Java code in which JUnit succeeds:\r\n\r\n```\r\npackage my.pack;\r\n\r\nimport java.lang.Math;\r\n\r\nclass Point {\r\n    int x;\r\n    int y;\r\n\r\n    Point(int x, int y) {\r\n        this(x, y, false);\r\n    }\r\n\r\n    static final double EPS = 0.0001;\r\n\r\n    Point(double r, double a/* ngle */, boolean polar) {\r\n        double x = polar ? r * Math.cos(a) : r;\r\n        double y = polar ? r * Math.sin(a) : a;\r\n        this.x = (int) x;\r\n        this.y = (int) y;\r\n        if (Math.abs(this.x - x) &gt;= EPS || Math.abs(this.y - y) &gt;= EPS) {\r\n            throw new IllegalArgumentException(&quot;Likely not integers!&quot;);\r\n        }\r\n    }\r\n\r\n    int getX() {\r\n        return x;\r\n    }\r\n\r\n    int getY() {\r\n        return y;\r\n    }\r\n\r\n    public String toString() {\r\n        return &quot;(&quot; + x + &quot;, &quot; + y + &quot;)&quot;;\r\n    }\r\n}\r\n\r\n```\r\n\r\nsrc/test/java/my/pack/PointTest.java file:\r\n\r\n```\r\npackage my.pack;\r\n\r\nimport org.junit.Test;\r\nimport static org.junit.Assert.assertEquals;\r\n\r\npublic class PointTest {\r\n    @Test\r\n    public void testIntegers() {\r\n        Point p = new Point(1, 2, false);\r\n        assertEquals(1, p.getX());\r\n        assertEquals(2, p.getY());\r\n    }\r\n\r\n    @Test\r\n    public void testDoublesWorking() {\r\n        Point p = new Point(Math.sqrt(2), Math.PI / 4, true);\r\n        assertEquals(1, p.getX());\r\n        assertEquals(1, p.getY());\r\n    }\r\n\r\n    @Test(expected = IllegalArgumentException.class)\r\n    public void testDoublesNotWorking() {\r\n        new Point(Math.sqrt(2), Math.PI / 2, true);\r\n    }\r\n\r\n    @Test\r\n    public void testToString() {\r\n        Point p = new Point(1, 2, false);\r\n        assertEquals(&quot;(1, 2)&quot;, p.toString());\r\n    }\r\n}\r\n\r\n```\r\n\r\nThe content of src/main/java/my/pack/Point.java file with pure Java code in which JUnit fails:\r\n\r\n```\r\npackage my.pack;\r\n\r\nimport org.graalvm.polyglot.*;\r\n\r\nimport java.io.IOException;\r\nimport java.nio.file.Files;\r\nimport java.nio.file.Paths;\r\nimport java.util.Set;\r\n\r\npublic class Point {\r\n    int x;\r\n    int y;\r\n\r\n    String string = new String(&quot;&quot;);\r\n    static final double EPS = 0.0001;\r\n\r\n    public Point(int x, int y) {\r\n        this.x = x;\r\n        this.y = y;\r\n    }\r\n    public Point(double r, double a, boolean polar) {\r\n        try (Context context = Context.newBuilder().allowAllAccess(true).build()) {\r\n            // Load the Python script from the Python file\r\n            Source source = Source.newBuilder(&quot;python&quot;, Paths.get(&quot;src/main/resources/Point.py&quot;).toFile()).build();\r\n            context.eval(source);\r\n\r\n            // Access the Point class defined in Python\r\n            Value pointClass = context.getBindings(&quot;python&quot;).getMember(&quot;Point&quot;);\r\n\r\n            try {\r\n                String polOrNot = &quot;&quot;;\r\n                if (polar)\r\n                {\r\n                    polOrNot = &quot;True&quot;;\r\n                } else {\r\n                    polOrNot = &quot;False&quot;;\r\n                }\r\n                Value pointInstance = pointClass.newInstance(r, a, polOrNot);\r\n                // Call methods on the Python Point instance\r\n                int newX = pointInstance.getMember(&quot;getX&quot;).execute().asInt();\r\n                int newY = pointInstance.getMember(&quot;getY&quot;).execute().asInt();\r\n                String toStringResult = pointInstance.getMember(&quot;toString&quot;).execute().asString();\r\n                System.out.print(&quot;New x: &quot;);\r\n                System.out.println(newX);\r\n                System.out.print(&quot;New y: &quot;);\r\n                System.out.println(newY);\r\n                // Update the x and y values from Python\r\n                this.x = newX;\r\n                this.y = newY;\r\n                this.string = toStringResult;\r\n            } catch (PolyglotException e) {\r\n                throw new IllegalArgumentException(&quot;Likely not integers!&quot;);\r\n            }\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n    public int getX() {\r\n        return x;\r\n    }\r\n\r\n    public int getY() {\r\n        return y;\r\n    }\r\n\r\n    public String toString() {\r\n        return &quot;(&quot; + x + &quot;, &quot; + y + &quot;)&quot;;\r\n    }\r\n\r\n    public static void main(String[] args) throws IOException {\r\n        System.out.println(&quot;Testing &#39;testIntegers()&#39; method of &#39;PointTest&#39; class:&quot;);\r\n        Point p1 = new Point(1, 2);\r\n        System.out.println(&quot;Expected: 1 -- Result: &quot; + p1.getX());\r\n        System.out.println(&quot;Expected: 2 -- Result: &quot; + p1.getY());\r\n\r\n        System.out.println(&quot;\\n---------------------------------------\\n&quot;);\r\n\r\n        System.out.println(&quot;Testing &#39;testDoublesWorking()&#39; method of &#39;PointTest&#39; class:&quot;);\r\n        Point p2 = new Point(Math.sqrt(2), Math.PI / 4, true);\r\n        System.out.println(&quot;Expected: 1 -- Result: &quot; + p2.getX());\r\n        System.out.println(&quot;Expected: 1 -- Result: &quot; + p2.getY());\r\n\r\n        System.out.println(&quot;\\n---------------------------------------\\n&quot;);\r\n\r\n        System.out.println(&quot;Testing &#39;testToString() &#39; method of &#39;PointTest&#39; class:&quot;);\r\n        Point p3 = new Point(1, 2);\r\n        System.out.println(&quot;Expected: (1, 2) -- Result: &quot; + p3.toString());\r\n\r\n        System.out.println(&quot;\\n---------------------------------------\\n&quot;);\r\n\r\n        System.out.println(&quot;Testing &#39;testDoublesNotWorking()&#39; method of &#39;PointTest&#39; class (Error expected):&quot;);\r\n        Point p4 = new Point(Math.sqrt(2), Math.PI / 2, true);\r\n\r\n\r\n        System.out.println(&quot;\\n---------------------------------------\\n&quot;);\r\n    }\r\n}\r\n\r\n```\r\n\r\nPoint.py file:\r\n```\r\nimport math\r\n\r\nclass Point:\r\n    EPS = 0.0001\r\n\r\n    def __init__(self, r, a, polar=False):\r\n        if(polar == &quot;False&quot;):\r\n            polar = False\r\n        else:\r\n            polar = True\r\n        x = r * math.cos(a) if polar else r\r\n        y = r * math.sin(a) if polar else a\r\n        self.x = int(x)\r\n        self.y = int(y)\r\n        if abs(self.x - x) &gt;= Point.EPS or abs(self.y - y) &gt;= Point.EPS:\r\n            raise ValueError(&quot;Likely not integers!&quot;)\r\n\r\n    def getX(self):\r\n        return self.x\r\n\r\n    def getY(self):\r\n        return self.y\r\n\r\n    def toString(self):\r\n        return f&quot;({self.x}, {self.y})&quot;\r\n```\r\n\r\nError:\r\n\r\n```\r\njava.lang.Exception: Unexpected exception, expected&lt;java.lang.IllegalArgumentException&gt; but was&lt;java.lang.IllegalAccessError&gt;\r\n\r\n\tat org.junit.internal.runners.statements.ExpectException.evaluate(ExpectException.java:30)\r\n\tat org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)\r\n\tat org.junit.runners.BlockJUnit4ClassRunner$1.evaluate(BlockJUnit4ClassRunner.java:100)\r\n\tat org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:366)\r\n\tat org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:103)\r\n\tat org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:63)\r\n\tat org.junit.runners.ParentRunner$4.run(ParentRunner.java:331)\r\n\tat org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:79)\r\n\tat org.junit.runners.ParentRunner.runChildren(ParentRunner.java:329)\r\n\tat org.junit.runners.ParentRunner.access$100(ParentRunner.java:66)\r\n\tat org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:293)\r\n\tat org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)\r\n\tat org.junit.runners.ParentRunner.run(ParentRunner.java:413)\r\n\tat org.junit.runner.JUnitCore.run(JUnitCore.java:137)\r\n\tat com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:69)\r\n\tat com.intellij.rt.junit.IdeaTestRunner$Repeater$1.execute(IdeaTestRunner.java:38)\r\n\tat com.intellij.rt.execution.junit.TestsRepeater.repeat(TestsRepeater.java:11)\r\n\tat com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35)\r\n\tat com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:232)\r\n\tat com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:55)\r\nCaused by: java.lang.IllegalAccessError: superclass access check failed: class com.oracle.truffle.polyglot.PolyglotImpl (in unnamed module @0x6fc6f14e) cannot access class org.graalvm.polyglot.impl.AbstractPolyglotImpl (in module org.graalvm.polyglot) because module org.graalvm.polyglot does not export org.graalvm.polyglot.impl to unnamed module @0x6fc6f14e\r\n\tat java.base/java.lang.ClassLoader.defineClass1(Native Method)\r\n```\r\n\r\n\r\n\r\nThe pom.xml file:\r\n`\r\n```\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    &lt;groupId&gt;org.example&lt;/groupId&gt;\r\n    &lt;artifactId&gt;embedding&lt;/artifactId&gt;\r\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n    &lt;repositories&gt;\r\n    &lt;/repositories&gt;\r\n\r\n    &lt;properties&gt;\r\n        &lt;!-- Select the GraalVM version to use. --&gt;\r\n        &lt;graalvm.version&gt;23.1.0&lt;/graalvm.version&gt;\r\n    &lt;/properties&gt;\r\n\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.graalvm.polyglot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;polyglot&lt;/artifactId&gt;\r\n            &lt;version&gt;${graalvm.version}&lt;/version&gt;\r\n            &lt;type&gt;jar&lt;/type&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.graalvm.polyglot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;python&lt;/artifactId&gt;\r\n            &lt;version&gt;${graalvm.version}&lt;/version&gt;\r\n            &lt;type&gt;pom&lt;/type&gt;\r\n        &lt;/dependency&gt;\r\n\r\n\r\n         &lt;dependency&gt;\r\n             &lt;groupId&gt;org.graalvm.polyglot&lt;/groupId&gt;\r\n             &lt;artifactId&gt;tools&lt;/artifactId&gt;\r\n             &lt;version&gt;${graalvm.version}&lt;/version&gt;\r\n             &lt;type&gt;pom&lt;/type&gt;\r\n         &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;junit&lt;/groupId&gt;\r\n            &lt;artifactId&gt;junit&lt;/artifactId&gt;\r\n            &lt;version&gt;4.13.2&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n\r\n    &lt;build&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;3.8.1&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;source&gt;11&lt;/source&gt;\r\n                    &lt;target&gt;11&lt;/target&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;3.1.2&lt;/version&gt;\r\n            &lt;/plugin&gt;\r\n\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\r\n                &lt;artifactId&gt;exec-maven-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;3.1.0&lt;/version&gt;\r\n                &lt;executions&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;goals&gt;\r\n                            &lt;goal&gt;exec&lt;/goal&gt;\r\n                        &lt;/goals&gt;\r\n                    &lt;/execution&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;id&gt;no-runtime-compilation&lt;/id&gt;\r\n                        &lt;goals&gt;\r\n                            &lt;goal&gt;exec&lt;/goal&gt;\r\n                        &lt;/goals&gt;\r\n                        &lt;configuration&gt;\r\n                            &lt;executable&gt;${java.home}/bin/java&lt;/executable&gt;\r\n                            &lt;arguments&gt;\r\n                                &lt;argument&gt;--module-path&lt;/argument&gt;\r\n                                &lt;modulepath/&gt;\r\n                                &lt;argument&gt;-m&lt;/argument&gt;\r\n                                &lt;argument&gt;my.pack.Point&lt;/argument&gt;\r\n                            &lt;/arguments&gt;\r\n                        &lt;/configuration&gt;\r\n                    &lt;/execution&gt;\r\n                &lt;/executions&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;executable&gt;${java.home}/bin/java&lt;/executable&gt;\r\n                    &lt;arguments&gt;\r\n                        &lt;argument&gt;--module-path&lt;/argument&gt;\r\n                        &lt;modulepath/&gt;\r\n                        &lt;argument&gt;-m&lt;/argument&gt;\r\n                        &lt;argument&gt;my.pack.Point&lt;/argument&gt;\r\n                    &lt;/arguments&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n\r\n            &lt;plugin&gt;\r\n                &lt;artifactId&gt;maven-jlink-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;3.1.0&lt;/version&gt;\r\n                &lt;extensions&gt;true&lt;/extensions&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;ignoreSigningInformation&gt;true&lt;/ignoreSigningInformation&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n\r\n    &lt;profiles&gt;\r\n        &lt;profile&gt;\r\n            &lt;id&gt;native&lt;/id&gt;\r\n            &lt;build&gt;\r\n                &lt;plugins&gt;\r\n                    &lt;plugin&gt;\r\n                        &lt;groupId&gt;org.graalvm.buildtools&lt;/groupId&gt;\r\n                        &lt;artifactId&gt;native-maven-plugin&lt;/artifactId&gt;\r\n                        &lt;version&gt;0.9.25&lt;/version&gt;\r\n                        &lt;extensions&gt;true&lt;/extensions&gt;\r\n                        &lt;executions&gt;\r\n                            &lt;execution&gt;\r\n                                &lt;id&gt;build-native&lt;/id&gt;\r\n                                &lt;goals&gt;\r\n                                    &lt;goal&gt;compile-no-fork&lt;/goal&gt;\r\n                                &lt;/goals&gt;\r\n                                &lt;phase&gt;package&lt;/phase&gt;\r\n                            &lt;/execution&gt;\r\n                        &lt;/executions&gt;\r\n                        &lt;configuration&gt;\r\n                            &lt;imageName&gt;${project.artifactId}&lt;/imageName&gt;\r\n                            &lt;mainClass&gt;my.pack.Point&lt;/mainClass&gt;\r\n                            &lt;buildArgs&gt;\r\n                                &lt;buildArg&gt;--no-fallback&lt;/buildArg&gt;\r\n                                &lt;buildArg&gt;-J-Xmx20g&lt;/buildArg&gt;\r\n                            &lt;/buildArgs&gt;\r\n                        &lt;/configuration&gt;\r\n                    &lt;/plugin&gt;\r\n                &lt;/plugins&gt;\r\n            &lt;/build&gt;\r\n        &lt;/profile&gt;\r\n\r\n        &lt;profile&gt;\r\n            &lt;id&gt;not-graalvm-jdk&lt;/id&gt;\r\n            &lt;activation&gt;\r\n                &lt;file&gt;\r\n                    &lt;missing&gt;${java.home}/lib/graalvm&lt;/missing&gt;\r\n                &lt;/file&gt;\r\n            &lt;/activation&gt;\r\n\r\n            &lt;build&gt;\r\n                &lt;plugins&gt;\r\n                    &lt;plugin&gt;\r\n                        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                        &lt;artifactId&gt;maven-dependency-plugin&lt;/artifactId&gt;\r\n                        &lt;version&gt;3.6.0&lt;/version&gt;\r\n                        &lt;executions&gt;\r\n                            &lt;execution&gt;\r\n                                &lt;id&gt;copy-dependencies&lt;/id&gt;\r\n                                &lt;phase&gt;process-resources&lt;/phase&gt;\r\n                                &lt;goals&gt;\r\n                                    &lt;goal&gt;copy&lt;/goal&gt;\r\n                                &lt;/goals&gt;\r\n                                &lt;configuration&gt;\r\n                                    &lt;outputDirectory&gt;\r\n                                        ${project.build.directory}/compiler\r\n                                    &lt;/outputDirectory&gt;\r\n                                    &lt;artifactItems&gt;\r\n                                        &lt;artifactItem&gt;\r\n                                            &lt;groupId&gt;org.graalvm.sdk&lt;/groupId&gt;\r\n                                            &lt;artifactId&gt;collections&lt;/artifactId&gt;\r\n                                            &lt;version&gt;${graalvm.version}&lt;/version&gt;\r\n                                            &lt;type&gt;jar&lt;/type&gt;\r\n                                            &lt;destFileName&gt;collections.jar&lt;/destFileName&gt;\r\n                                        &lt;/artifactItem&gt;\r\n                                        &lt;artifactItem&gt;\r\n                                            &lt;groupId&gt;org.graalvm.sdk&lt;/groupId&gt;\r\n                                            &lt;artifactId&gt;word&lt;/artifactId&gt;\r\n                                            &lt;version&gt;${graalvm.version}&lt;/version&gt;\r\n                                            &lt;type&gt;jar&lt;/type&gt;\r\n                                            &lt;destFileName&gt;word.jar&lt;/destFileName&gt;\r\n                                        &lt;/artifactItem&gt;\r\n                                        &lt;artifactItem&gt;\r\n                                            &lt;groupId&gt;org.graalvm.truffle&lt;/groupId&gt;\r\n                                            &lt;artifactId&gt;truffle-compiler&lt;/artifactId&gt;\r\n                                            &lt;version&gt;${graalvm.version}&lt;/version&gt;\r\n                                            &lt;type&gt;jar&lt;/type&gt;\r\n                                            &lt;destFileName&gt;truffle-compiler.jar&lt;/destFileName&gt;\r\n                                        &lt;/artifactItem&gt;\r\n                                        &lt;artifactItem&gt;\r\n                                            &lt;groupId&gt;org.graalvm.compiler&lt;/groupId&gt;\r\n                                            &lt;artifactId&gt;compiler&lt;/artifactId&gt;\r\n                                            &lt;version&gt;${graalvm.version}&lt;/version&gt;\r\n                                            &lt;type&gt;jar&lt;/type&gt;\r\n                                            &lt;destFileName&gt;compiler.jar&lt;/destFileName&gt;\r\n                                        &lt;/artifactItem&gt;\r\n                                    &lt;/artifactItems&gt;\r\n                                &lt;/configuration&gt;\r\n                            &lt;/execution&gt;\r\n                        &lt;/executions&gt;\r\n                    &lt;/plugin&gt;\r\n\r\n                    &lt;plugin&gt;\r\n                        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                        &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n                        &lt;version&gt;3.1.2&lt;/version&gt;\r\n                        &lt;configuration&gt;\r\n                            &lt;argLine&gt;\r\n                                -XX:+UnlockExperimentalVMOptions\r\n                                -XX:+EnableJVMCI\r\n                                --upgrade-module-path=${project.build.directory}/compiler\r\n                            &lt;/argLine&gt;\r\n                        &lt;/configuration&gt;\r\n                    &lt;/plugin&gt;\r\n\r\n                    &lt;plugin&gt;\r\n                        &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\r\n                        &lt;artifactId&gt;exec-maven-plugin&lt;/artifactId&gt;\r\n                        &lt;version&gt;1.6.0&lt;/version&gt;\r\n                        &lt;executions&gt;\r\n                            &lt;execution&gt;\r\n                                &lt;id&gt;default-cli&lt;/id&gt;\r\n                                &lt;goals&gt;\r\n                                    &lt;goal&gt;exec&lt;/goal&gt;\r\n                                &lt;/goals&gt;\r\n                                &lt;configuration&gt;\r\n                                    &lt;executable&gt;${java.home}/bin/java&lt;/executable&gt;\r\n                                    &lt;arguments&gt;\r\n                                        &lt;argument&gt;--module-path&lt;/argument&gt;\r\n                                        &lt;modulepath/&gt;\r\n                                        &lt;argument&gt;-XX:+UnlockExperimentalVMOptions&lt;/argument&gt;\r\n                                        &lt;argument&gt;-XX:+EnableJVMCI&lt;/argument&gt;\r\n                                        &lt;argument&gt;--upgrade-module-path=${project.build.directory}/compiler/&lt;/argument&gt;\r\n                                        &lt;argument&gt;-m&lt;/argument&gt;\r\n                                        &lt;argument&gt;embedding&lt;/argument&gt;\r\n                                    &lt;/arguments&gt;\r\n                                &lt;/configuration&gt;\r\n                            &lt;/execution&gt;\r\n                            &lt;execution&gt;\r\n                                &lt;id&gt;no-runtime-compilation&lt;/id&gt;\r\n                                &lt;goals&gt;\r\n                                    &lt;goal&gt;exec&lt;/goal&gt;\r\n                                &lt;/goals&gt;\r\n                                &lt;configuration&gt;\r\n                                    &lt;executable&gt;${java.home}/bin/java&lt;/executable&gt;\r\n                                    &lt;arguments&gt;\r\n                                        &lt;argument&gt;--module-path&lt;/argument&gt;\r\n                                        &lt;modulepath/&gt;\r\n                                        &lt;argument&gt;-m&lt;/argument&gt;\r\n                                        &lt;argument&gt;my.pack.Point&lt;/argument&gt;\r\n                                    &lt;/arguments&gt;\r\n                                &lt;/configuration&gt;\r\n                            &lt;/execution&gt;\r\n                        &lt;/executions&gt;\r\n                    &lt;/plugin&gt;\r\n                &lt;/plugins&gt;\r\n            &lt;/build&gt;\r\n        &lt;/profile&gt;\r\n\r\n    &lt;/profiles&gt;\r\n\r\n&lt;/project&gt;\r\n\r\n\r\n````\r\n\r\nIntellij does not recognize\r\n\r\n```\r\n&lt;plugin&gt;\r\n       &lt;artifactId&gt;maven-jlink-plugin&lt;/artifactId&gt;\r\n       &lt;version&gt;3.1.0&lt;/version&gt;\r\n       &lt;extensions&gt;true&lt;/extensions&gt;\r\n       &lt;configuration&gt;\r\n             &lt;ignoreSigningInformation&gt;true&lt;/ignoreSigningInformation&gt;\r\n       &lt;/configuration&gt;\r\n&lt;/plugin&gt;\r\n```\r\n\r\n\r\nWhere does the problem that prevents unit tests from performing successfully in all cases stem from? How can I resolve this problem?","title":"JUnit can test Java methods using constructor with only Java code, but fails when Java methods use constructor calling Python code","body":"<p>In GraalPy project, where I translate Java codes into Python, I have encountered an error when performing unit testing. When the entire code consists of Java code, JUnit performs successfully, even when Java code is combined with Python, in methods which call the constructor not using Python code, unit test passes:</p>\n<pre><code>Point(int x, int y) {\n     this(x, y, false);\n}\n</code></pre>\n<p>However, when JUnit tries to test the methods which uses the constructor where Python file is called, it throws an &quot;IllegalAccessError&quot;. I believe I have successfully integrated Python with Java as when I am testing inside &quot;public static void main&quot; I get the results I want. The contents of some files are below.</p>\n<p>The content of src/main/java/my/pack/Point.java file with pure Java code in which JUnit succeeds:</p>\n<pre><code>package my.pack;\n\nimport java.lang.Math;\n\nclass Point {\n    int x;\n    int y;\n\n    Point(int x, int y) {\n        this(x, y, false);\n    }\n\n    static final double EPS = 0.0001;\n\n    Point(double r, double a/* ngle */, boolean polar) {\n        double x = polar ? r * Math.cos(a) : r;\n        double y = polar ? r * Math.sin(a) : a;\n        this.x = (int) x;\n        this.y = (int) y;\n        if (Math.abs(this.x - x) &gt;= EPS || Math.abs(this.y - y) &gt;= EPS) {\n            throw new IllegalArgumentException(&quot;Likely not integers!&quot;);\n        }\n    }\n\n    int getX() {\n        return x;\n    }\n\n    int getY() {\n        return y;\n    }\n\n    public String toString() {\n        return &quot;(&quot; + x + &quot;, &quot; + y + &quot;)&quot;;\n    }\n}\n\n</code></pre>\n<p>src/test/java/my/pack/PointTest.java file:</p>\n<pre><code>package my.pack;\n\nimport org.junit.Test;\nimport static org.junit.Assert.assertEquals;\n\npublic class PointTest {\n    @Test\n    public void testIntegers() {\n        Point p = new Point(1, 2, false);\n        assertEquals(1, p.getX());\n        assertEquals(2, p.getY());\n    }\n\n    @Test\n    public void testDoublesWorking() {\n        Point p = new Point(Math.sqrt(2), Math.PI / 4, true);\n        assertEquals(1, p.getX());\n        assertEquals(1, p.getY());\n    }\n\n    @Test(expected = IllegalArgumentException.class)\n    public void testDoublesNotWorking() {\n        new Point(Math.sqrt(2), Math.PI / 2, true);\n    }\n\n    @Test\n    public void testToString() {\n        Point p = new Point(1, 2, false);\n        assertEquals(&quot;(1, 2)&quot;, p.toString());\n    }\n}\n\n</code></pre>\n<p>The content of src/main/java/my/pack/Point.java file with pure Java code in which JUnit fails:</p>\n<pre><code>package my.pack;\n\nimport org.graalvm.polyglot.*;\n\nimport java.io.IOException;\nimport java.nio.file.Files;\nimport java.nio.file.Paths;\nimport java.util.Set;\n\npublic class Point {\n    int x;\n    int y;\n\n    String string = new String(&quot;&quot;);\n    static final double EPS = 0.0001;\n\n    public Point(int x, int y) {\n        this.x = x;\n        this.y = y;\n    }\n    public Point(double r, double a, boolean polar) {\n        try (Context context = Context.newBuilder().allowAllAccess(true).build()) {\n            // Load the Python script from the Python file\n            Source source = Source.newBuilder(&quot;python&quot;, Paths.get(&quot;src/main/resources/Point.py&quot;).toFile()).build();\n            context.eval(source);\n\n            // Access the Point class defined in Python\n            Value pointClass = context.getBindings(&quot;python&quot;).getMember(&quot;Point&quot;);\n\n            try {\n                String polOrNot = &quot;&quot;;\n                if (polar)\n                {\n                    polOrNot = &quot;True&quot;;\n                } else {\n                    polOrNot = &quot;False&quot;;\n                }\n                Value pointInstance = pointClass.newInstance(r, a, polOrNot);\n                // Call methods on the Python Point instance\n                int newX = pointInstance.getMember(&quot;getX&quot;).execute().asInt();\n                int newY = pointInstance.getMember(&quot;getY&quot;).execute().asInt();\n                String toStringResult = pointInstance.getMember(&quot;toString&quot;).execute().asString();\n                System.out.print(&quot;New x: &quot;);\n                System.out.println(newX);\n                System.out.print(&quot;New y: &quot;);\n                System.out.println(newY);\n                // Update the x and y values from Python\n                this.x = newX;\n                this.y = newY;\n                this.string = toStringResult;\n            } catch (PolyglotException e) {\n                throw new IllegalArgumentException(&quot;Likely not integers!&quot;);\n            }\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n    }\n    public int getX() {\n        return x;\n    }\n\n    public int getY() {\n        return y;\n    }\n\n    public String toString() {\n        return &quot;(&quot; + x + &quot;, &quot; + y + &quot;)&quot;;\n    }\n\n    public static void main(String[] args) throws IOException {\n        System.out.println(&quot;Testing 'testIntegers()' method of 'PointTest' class:&quot;);\n        Point p1 = new Point(1, 2);\n        System.out.println(&quot;Expected: 1 -- Result: &quot; + p1.getX());\n        System.out.println(&quot;Expected: 2 -- Result: &quot; + p1.getY());\n\n        System.out.println(&quot;\\n---------------------------------------\\n&quot;);\n\n        System.out.println(&quot;Testing 'testDoublesWorking()' method of 'PointTest' class:&quot;);\n        Point p2 = new Point(Math.sqrt(2), Math.PI / 4, true);\n        System.out.println(&quot;Expected: 1 -- Result: &quot; + p2.getX());\n        System.out.println(&quot;Expected: 1 -- Result: &quot; + p2.getY());\n\n        System.out.println(&quot;\\n---------------------------------------\\n&quot;);\n\n        System.out.println(&quot;Testing 'testToString() ' method of 'PointTest' class:&quot;);\n        Point p3 = new Point(1, 2);\n        System.out.println(&quot;Expected: (1, 2) -- Result: &quot; + p3.toString());\n\n        System.out.println(&quot;\\n---------------------------------------\\n&quot;);\n\n        System.out.println(&quot;Testing 'testDoublesNotWorking()' method of 'PointTest' class (Error expected):&quot;);\n        Point p4 = new Point(Math.sqrt(2), Math.PI / 2, true);\n\n\n        System.out.println(&quot;\\n---------------------------------------\\n&quot;);\n    }\n}\n\n</code></pre>\n<p>Point.py file:</p>\n<pre><code>import math\n\nclass Point:\n    EPS = 0.0001\n\n    def __init__(self, r, a, polar=False):\n        if(polar == &quot;False&quot;):\n            polar = False\n        else:\n            polar = True\n        x = r * math.cos(a) if polar else r\n        y = r * math.sin(a) if polar else a\n        self.x = int(x)\n        self.y = int(y)\n        if abs(self.x - x) &gt;= Point.EPS or abs(self.y - y) &gt;= Point.EPS:\n            raise ValueError(&quot;Likely not integers!&quot;)\n\n    def getX(self):\n        return self.x\n\n    def getY(self):\n        return self.y\n\n    def toString(self):\n        return f&quot;({self.x}, {self.y})&quot;\n</code></pre>\n<p>Error:</p>\n<pre><code>java.lang.Exception: Unexpected exception, expected&lt;java.lang.IllegalArgumentException&gt; but was&lt;java.lang.IllegalAccessError&gt;\n\n    at org.junit.internal.runners.statements.ExpectException.evaluate(ExpectException.java:30)\n    at org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)\n    at org.junit.runners.BlockJUnit4ClassRunner$1.evaluate(BlockJUnit4ClassRunner.java:100)\n    at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:366)\n    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:103)\n    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:63)\n    at org.junit.runners.ParentRunner$4.run(ParentRunner.java:331)\n    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:79)\n    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:329)\n    at org.junit.runners.ParentRunner.access$100(ParentRunner.java:66)\n    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:293)\n    at org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)\n    at org.junit.runners.ParentRunner.run(ParentRunner.java:413)\n    at org.junit.runner.JUnitCore.run(JUnitCore.java:137)\n    at com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:69)\n    at com.intellij.rt.junit.IdeaTestRunner$Repeater$1.execute(IdeaTestRunner.java:38)\n    at com.intellij.rt.execution.junit.TestsRepeater.repeat(TestsRepeater.java:11)\n    at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35)\n    at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:232)\n    at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:55)\nCaused by: java.lang.IllegalAccessError: superclass access check failed: class com.oracle.truffle.polyglot.PolyglotImpl (in unnamed module @0x6fc6f14e) cannot access class org.graalvm.polyglot.impl.AbstractPolyglotImpl (in module org.graalvm.polyglot) because module org.graalvm.polyglot does not export org.graalvm.polyglot.impl to unnamed module @0x6fc6f14e\n    at java.base/java.lang.ClassLoader.defineClass1(Native Method)\n</code></pre>\n<p>The pom.xml file:\n`</p>\n<pre><code>&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;groupId&gt;org.example&lt;/groupId&gt;\n    &lt;artifactId&gt;embedding&lt;/artifactId&gt;\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n    &lt;repositories&gt;\n    &lt;/repositories&gt;\n\n    &lt;properties&gt;\n        &lt;!-- Select the GraalVM version to use. --&gt;\n        &lt;graalvm.version&gt;23.1.0&lt;/graalvm.version&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.graalvm.polyglot&lt;/groupId&gt;\n            &lt;artifactId&gt;polyglot&lt;/artifactId&gt;\n            &lt;version&gt;${graalvm.version}&lt;/version&gt;\n            &lt;type&gt;jar&lt;/type&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.graalvm.polyglot&lt;/groupId&gt;\n            &lt;artifactId&gt;python&lt;/artifactId&gt;\n            &lt;version&gt;${graalvm.version}&lt;/version&gt;\n            &lt;type&gt;pom&lt;/type&gt;\n        &lt;/dependency&gt;\n\n\n         &lt;dependency&gt;\n             &lt;groupId&gt;org.graalvm.polyglot&lt;/groupId&gt;\n             &lt;artifactId&gt;tools&lt;/artifactId&gt;\n             &lt;version&gt;${graalvm.version}&lt;/version&gt;\n             &lt;type&gt;pom&lt;/type&gt;\n         &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;junit&lt;/groupId&gt;\n            &lt;artifactId&gt;junit&lt;/artifactId&gt;\n            &lt;version&gt;4.13.2&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.8.1&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;source&gt;11&lt;/source&gt;\n                    &lt;target&gt;11&lt;/target&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.1.2&lt;/version&gt;\n            &lt;/plugin&gt;\n\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\n                &lt;artifactId&gt;exec-maven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.1.0&lt;/version&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;exec&lt;/goal&gt;\n                        &lt;/goals&gt;\n                    &lt;/execution&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;no-runtime-compilation&lt;/id&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;exec&lt;/goal&gt;\n                        &lt;/goals&gt;\n                        &lt;configuration&gt;\n                            &lt;executable&gt;${java.home}/bin/java&lt;/executable&gt;\n                            &lt;arguments&gt;\n                                &lt;argument&gt;--module-path&lt;/argument&gt;\n                                &lt;modulepath/&gt;\n                                &lt;argument&gt;-m&lt;/argument&gt;\n                                &lt;argument&gt;my.pack.Point&lt;/argument&gt;\n                            &lt;/arguments&gt;\n                        &lt;/configuration&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n                &lt;configuration&gt;\n                    &lt;executable&gt;${java.home}/bin/java&lt;/executable&gt;\n                    &lt;arguments&gt;\n                        &lt;argument&gt;--module-path&lt;/argument&gt;\n                        &lt;modulepath/&gt;\n                        &lt;argument&gt;-m&lt;/argument&gt;\n                        &lt;argument&gt;my.pack.Point&lt;/argument&gt;\n                    &lt;/arguments&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n\n            &lt;plugin&gt;\n                &lt;artifactId&gt;maven-jlink-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.1.0&lt;/version&gt;\n                &lt;extensions&gt;true&lt;/extensions&gt;\n                &lt;configuration&gt;\n                    &lt;ignoreSigningInformation&gt;true&lt;/ignoreSigningInformation&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n    &lt;profiles&gt;\n        &lt;profile&gt;\n            &lt;id&gt;native&lt;/id&gt;\n            &lt;build&gt;\n                &lt;plugins&gt;\n                    &lt;plugin&gt;\n                        &lt;groupId&gt;org.graalvm.buildtools&lt;/groupId&gt;\n                        &lt;artifactId&gt;native-maven-plugin&lt;/artifactId&gt;\n                        &lt;version&gt;0.9.25&lt;/version&gt;\n                        &lt;extensions&gt;true&lt;/extensions&gt;\n                        &lt;executions&gt;\n                            &lt;execution&gt;\n                                &lt;id&gt;build-native&lt;/id&gt;\n                                &lt;goals&gt;\n                                    &lt;goal&gt;compile-no-fork&lt;/goal&gt;\n                                &lt;/goals&gt;\n                                &lt;phase&gt;package&lt;/phase&gt;\n                            &lt;/execution&gt;\n                        &lt;/executions&gt;\n                        &lt;configuration&gt;\n                            &lt;imageName&gt;${project.artifactId}&lt;/imageName&gt;\n                            &lt;mainClass&gt;my.pack.Point&lt;/mainClass&gt;\n                            &lt;buildArgs&gt;\n                                &lt;buildArg&gt;--no-fallback&lt;/buildArg&gt;\n                                &lt;buildArg&gt;-J-Xmx20g&lt;/buildArg&gt;\n                            &lt;/buildArgs&gt;\n                        &lt;/configuration&gt;\n                    &lt;/plugin&gt;\n                &lt;/plugins&gt;\n            &lt;/build&gt;\n        &lt;/profile&gt;\n\n        &lt;profile&gt;\n            &lt;id&gt;not-graalvm-jdk&lt;/id&gt;\n            &lt;activation&gt;\n                &lt;file&gt;\n                    &lt;missing&gt;${java.home}/lib/graalvm&lt;/missing&gt;\n                &lt;/file&gt;\n            &lt;/activation&gt;\n\n            &lt;build&gt;\n                &lt;plugins&gt;\n                    &lt;plugin&gt;\n                        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                        &lt;artifactId&gt;maven-dependency-plugin&lt;/artifactId&gt;\n                        &lt;version&gt;3.6.0&lt;/version&gt;\n                        &lt;executions&gt;\n                            &lt;execution&gt;\n                                &lt;id&gt;copy-dependencies&lt;/id&gt;\n                                &lt;phase&gt;process-resources&lt;/phase&gt;\n                                &lt;goals&gt;\n                                    &lt;goal&gt;copy&lt;/goal&gt;\n                                &lt;/goals&gt;\n                                &lt;configuration&gt;\n                                    &lt;outputDirectory&gt;\n                                        ${project.build.directory}/compiler\n                                    &lt;/outputDirectory&gt;\n                                    &lt;artifactItems&gt;\n                                        &lt;artifactItem&gt;\n                                            &lt;groupId&gt;org.graalvm.sdk&lt;/groupId&gt;\n                                            &lt;artifactId&gt;collections&lt;/artifactId&gt;\n                                            &lt;version&gt;${graalvm.version}&lt;/version&gt;\n                                            &lt;type&gt;jar&lt;/type&gt;\n                                            &lt;destFileName&gt;collections.jar&lt;/destFileName&gt;\n                                        &lt;/artifactItem&gt;\n                                        &lt;artifactItem&gt;\n                                            &lt;groupId&gt;org.graalvm.sdk&lt;/groupId&gt;\n                                            &lt;artifactId&gt;word&lt;/artifactId&gt;\n                                            &lt;version&gt;${graalvm.version}&lt;/version&gt;\n                                            &lt;type&gt;jar&lt;/type&gt;\n                                            &lt;destFileName&gt;word.jar&lt;/destFileName&gt;\n                                        &lt;/artifactItem&gt;\n                                        &lt;artifactItem&gt;\n                                            &lt;groupId&gt;org.graalvm.truffle&lt;/groupId&gt;\n                                            &lt;artifactId&gt;truffle-compiler&lt;/artifactId&gt;\n                                            &lt;version&gt;${graalvm.version}&lt;/version&gt;\n                                            &lt;type&gt;jar&lt;/type&gt;\n                                            &lt;destFileName&gt;truffle-compiler.jar&lt;/destFileName&gt;\n                                        &lt;/artifactItem&gt;\n                                        &lt;artifactItem&gt;\n                                            &lt;groupId&gt;org.graalvm.compiler&lt;/groupId&gt;\n                                            &lt;artifactId&gt;compiler&lt;/artifactId&gt;\n                                            &lt;version&gt;${graalvm.version}&lt;/version&gt;\n                                            &lt;type&gt;jar&lt;/type&gt;\n                                            &lt;destFileName&gt;compiler.jar&lt;/destFileName&gt;\n                                        &lt;/artifactItem&gt;\n                                    &lt;/artifactItems&gt;\n                                &lt;/configuration&gt;\n                            &lt;/execution&gt;\n                        &lt;/executions&gt;\n                    &lt;/plugin&gt;\n\n                    &lt;plugin&gt;\n                        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                        &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n                        &lt;version&gt;3.1.2&lt;/version&gt;\n                        &lt;configuration&gt;\n                            &lt;argLine&gt;\n                                -XX:+UnlockExperimentalVMOptions\n                                -XX:+EnableJVMCI\n                                --upgrade-module-path=${project.build.directory}/compiler\n                            &lt;/argLine&gt;\n                        &lt;/configuration&gt;\n                    &lt;/plugin&gt;\n\n                    &lt;plugin&gt;\n                        &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\n                        &lt;artifactId&gt;exec-maven-plugin&lt;/artifactId&gt;\n                        &lt;version&gt;1.6.0&lt;/version&gt;\n                        &lt;executions&gt;\n                            &lt;execution&gt;\n                                &lt;id&gt;default-cli&lt;/id&gt;\n                                &lt;goals&gt;\n                                    &lt;goal&gt;exec&lt;/goal&gt;\n                                &lt;/goals&gt;\n                                &lt;configuration&gt;\n                                    &lt;executable&gt;${java.home}/bin/java&lt;/executable&gt;\n                                    &lt;arguments&gt;\n                                        &lt;argument&gt;--module-path&lt;/argument&gt;\n                                        &lt;modulepath/&gt;\n                                        &lt;argument&gt;-XX:+UnlockExperimentalVMOptions&lt;/argument&gt;\n                                        &lt;argument&gt;-XX:+EnableJVMCI&lt;/argument&gt;\n                                        &lt;argument&gt;--upgrade-module-path=${project.build.directory}/compiler/&lt;/argument&gt;\n                                        &lt;argument&gt;-m&lt;/argument&gt;\n                                        &lt;argument&gt;embedding&lt;/argument&gt;\n                                    &lt;/arguments&gt;\n                                &lt;/configuration&gt;\n                            &lt;/execution&gt;\n                            &lt;execution&gt;\n                                &lt;id&gt;no-runtime-compilation&lt;/id&gt;\n                                &lt;goals&gt;\n                                    &lt;goal&gt;exec&lt;/goal&gt;\n                                &lt;/goals&gt;\n                                &lt;configuration&gt;\n                                    &lt;executable&gt;${java.home}/bin/java&lt;/executable&gt;\n                                    &lt;arguments&gt;\n                                        &lt;argument&gt;--module-path&lt;/argument&gt;\n                                        &lt;modulepath/&gt;\n                                        &lt;argument&gt;-m&lt;/argument&gt;\n                                        &lt;argument&gt;my.pack.Point&lt;/argument&gt;\n                                    &lt;/arguments&gt;\n                                &lt;/configuration&gt;\n                            &lt;/execution&gt;\n                        &lt;/executions&gt;\n                    &lt;/plugin&gt;\n                &lt;/plugins&gt;\n            &lt;/build&gt;\n        &lt;/profile&gt;\n\n    &lt;/profiles&gt;\n\n&lt;/project&gt;\n\n\n</code></pre>\n<p>Intellij does not recognize</p>\n<pre><code>&lt;plugin&gt;\n       &lt;artifactId&gt;maven-jlink-plugin&lt;/artifactId&gt;\n       &lt;version&gt;3.1.0&lt;/version&gt;\n       &lt;extensions&gt;true&lt;/extensions&gt;\n       &lt;configuration&gt;\n             &lt;ignoreSigningInformation&gt;true&lt;/ignoreSigningInformation&gt;\n       &lt;/configuration&gt;\n&lt;/plugin&gt;\n</code></pre>\n<p>Where does the problem that prevents unit tests from performing successfully in all cases stem from? How can I resolve this problem?</p>\n"},{"tags":["java","validation","security","input","checkmarx"],"comments":[{"owner":{"account_id":446457,"reputation":5228,"user_id":839513,"accept_rate":57,"display_name":"baruchiro"},"score":1,"creation_date":1588920722,"post_id":61667472,"comment_id":109090932,"body_markdown":"As Checkmarx says, there is a flow from `cosn` to `logException` (but you say the method is `log.error`). You saying that you added sanitation in `HomeAction.java` but we don&#39;t know if this sanitation is in the vulnerable flow.","body":"As Checkmarx says, there is a flow from <code>cosn</code> to <code>logException</code> (but you say the method is <code>log.error</code>). You saying that you added sanitation in <code>HomeAction.java</code> but we don&#39;t know if this sanitation is in the vulnerable flow."},{"owner":{"account_id":192739,"reputation":546,"user_id":434047,"accept_rate":81,"display_name":"Harry"},"score":0,"creation_date":1588944720,"post_id":61667472,"comment_id":109102441,"body_markdown":"@baruchiro Sorry for not adding the complete code for the method. Edited the post. Thanks","body":"@baruchiro Sorry for not adding the complete code for the method. Edited the post. Thanks"}],"answers":[{"tags":[],"owner":{"account_id":11011978,"reputation":83,"user_id":8089025,"display_name":"A.Stern"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1588945660,"creation_date":1588945660,"answer_id":61680643,"question_id":61667472,"body_markdown":"You can sanitise strings for XSS attacks using [Jsoup][1] there is a `clean()` method for this. You would do something like this to sanitise the input:\r\n\r\n    String sanitizedInput = Jsoup.clean(originalInput, &quot;&quot;, Whitelist.none(), new OutputSettings().prettyPrint(false));\r\n\r\n\r\n  [1]: https://github.com/jhy/jsoup","title":"Sanitize/validate variable to avoid cross-site-scripting attack","body":"<p>You can sanitise strings for XSS attacks using <a href=\"https://github.com/jhy/jsoup\" rel=\"nofollow noreferrer\">Jsoup</a> there is a <code>clean()</code> method for this. You would do something like this to sanitise the input:</p>\n\n<pre><code>String sanitizedInput = Jsoup.clean(originalInput, \"\", Whitelist.none(), new OutputSettings().prettyPrint(false));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4986912,"reputation":37,"user_id":4010225,"display_name":"mystery"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1589448652,"creation_date":1589448652,"answer_id":61793925,"question_id":61667472,"body_markdown":"Checkmarx defines a set of sanitizers that you can check in the system. \r\n\r\nBased on your source code snippets; i assume that;\r\ni) you are appending &#39;cosn&#39; to &#39;message&#39;\r\nii) application is web-based in nature (in view of the request.getParameter)\r\niii) message is been displayed to the console or log to a file.\r\n\r\nYou could consider using Google Guava or Apache Commons Test to html escape the input.\r\n\r\n```\r\nimport com.google.common.html.HtmlEscapers;\r\n\r\npublic void testGuavaHtmlEscapers(){\r\n    String badInput = &quot;&lt;script&gt; alert me! &lt;script&gt;&quot;;\r\n    String escapedLocation = HtmlEscapers.htmlEscaper().escape(badInput);\r\n    System.out.println(&quot;&lt;h1&gt; Location: &quot; + escapedLocation + &quot;&lt;h1&gt;&quot;);\r\n}\r\n```\r\n\r\n```\r\nimport static org.apache.commons.text.StringEscapeUtils.escapeHtml4;\r\n\r\npublic void testHtmlEscapers(){\r\n    String badInput = &quot;&lt;script&gt; alert me! &lt;script&gt;&quot;;\r\n    System.out.println(escapeHtml4(badInput));\r\n}\r\n```\r\n\r\nI would also consider if there is sensitive information, that i should mask e.g., using String.replace.\r\n\r\n```\r\npublic void testReplace(){\r\n    String email = &quot;some-email@domail.com&quot;;\r\n    String masked = email.replaceAll(&quot;(?&lt;=.).(?=[^@]*?.@)&quot;, &quot;*&quot;);\r\n    System.out.println(masked);\r\n}\r\n```\r\n\r\nAbove 3 sanitization methods will work similarly.","title":"Sanitize/validate variable to avoid cross-site-scripting attack","body":"<p>Checkmarx defines a set of sanitizers that you can check in the system. </p>\n\n<p>Based on your source code snippets; i assume that;\ni) you are appending 'cosn' to 'message'\nii) application is web-based in nature (in view of the request.getParameter)\niii) message is been displayed to the console or log to a file.</p>\n\n<p>You could consider using Google Guava or Apache Commons Test to html escape the input.</p>\n\n<pre><code>import com.google.common.html.HtmlEscapers;\n\npublic void testGuavaHtmlEscapers(){\n    String badInput = \"&lt;script&gt; alert me! &lt;script&gt;\";\n    String escapedLocation = HtmlEscapers.htmlEscaper().escape(badInput);\n    System.out.println(\"&lt;h1&gt; Location: \" + escapedLocation + \"&lt;h1&gt;\");\n}\n</code></pre>\n\n<pre><code>import static org.apache.commons.text.StringEscapeUtils.escapeHtml4;\n\npublic void testHtmlEscapers(){\n    String badInput = \"&lt;script&gt; alert me! &lt;script&gt;\";\n    System.out.println(escapeHtml4(badInput));\n}\n</code></pre>\n\n<p>I would also consider if there is sensitive information, that i should mask e.g., using String.replace.</p>\n\n<pre><code>public void testReplace(){\n    String email = \"some-email@domail.com\";\n    String masked = email.replaceAll(\"(?&lt;=.).(?=[^@]*?.@)\", \"*\");\n    System.out.println(masked);\n}\n</code></pre>\n\n<p>Above 3 sanitization methods will work similarly.</p>\n"},{"tags":[],"owner":{"account_id":8789642,"reputation":14456,"user_id":6570042,"display_name":"Gabor Lengyel"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1589765107,"creation_date":1589765107,"answer_id":61861045,"question_id":61667472,"body_markdown":"This is likely a false positive (technically, &quot;not exploitable&quot; in Checkmarx) with regard to XSS, depending on how you process and display logs. If logs are ever displayed in a browser as html, it might be vulnerable to blind XSS from this applications point of view, but it would be a vulnerability in whatever component displays logs as html, and not in the code above.\r\n\r\n**Contrary to other answers, you should not encode the message here.** Whatever technology you use for logging will of course have to encode it properly for its own use (like for example if it&#39;s stored as JSON, data will have to be JSON-encoded), but that has nothing to do with XSS, or with this problem at all.\r\n\r\nThis is just raw data, and you can store raw data as is. If you encode it here, you will have a hard time displaying it in any other way. For example if you apply html encoding, you can only display it in html (or you have to decode, which will negate any effect). It doesn&#39;t make sense. XSS would arise if you displayed these logs in a browser - in which case whatever displays it would have to encode it properly, but that&#39;s not the case here.\r\n\r\nNote though that it can still be a log injection vulnerability. Make sure that whatever way you store logs, that log store **does* apply necessary encoding. If it&#39;s a text file, you probably want to remove newlines so that fake lines cannot be added to the log. If it&#39;s json, you will want to encode to json, and so on. But that&#39;s a feature of your log facility, and not the code above.\r\n","title":"Sanitize/validate variable to avoid cross-site-scripting attack","body":"<p>This is likely a false positive (technically, \"not exploitable\" in Checkmarx) with regard to XSS, depending on how you process and display logs. If logs are ever displayed in a browser as html, it might be vulnerable to blind XSS from this applications point of view, but it would be a vulnerability in whatever component displays logs as html, and not in the code above.</p>\n\n<p><strong>Contrary to other answers, you should not encode the message here.</strong> Whatever technology you use for logging will of course have to encode it properly for its own use (like for example if it's stored as JSON, data will have to be JSON-encoded), but that has nothing to do with XSS, or with this problem at all.</p>\n\n<p>This is just raw data, and you can store raw data as is. If you encode it here, you will have a hard time displaying it in any other way. For example if you apply html encoding, you can only display it in html (or you have to decode, which will negate any effect). It doesn't make sense. XSS would arise if you displayed these logs in a browser - in which case whatever displays it would have to encode it properly, but that's not the case here.</p>\n\n<p>Note though that it can still be a log injection vulnerability. Make sure that whatever way you store logs, that log store **does* apply necessary encoding. If it's a text file, you probably want to remove newlines so that fake lines cannot be added to the log. If it's json, you will want to encode to json, and so on. But that's a feature of your log facility, and not the code above.</p>\n"},{"tags":[],"owner":{"account_id":26062704,"reputation":1,"user_id":19763726,"display_name":"Влад Банар"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1698091991,"creation_date":1698091991,"answer_id":77348063,"question_id":61667472,"body_markdown":"Encode.forHtml() worked for me","title":"Sanitize/validate variable to avoid cross-site-scripting attack","body":"<p>Encode.forHtml() worked for me</p>\n"}],"owner":{"account_id":192739,"reputation":546,"user_id":434047,"accept_rate":81,"display_name":"Harry"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":23413,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":4,"score":1,"last_activity_date":1698091991,"creation_date":1588884483,"question_id":61667472,"body_markdown":"I get this issue with CheckMarx security scan:\r\n  \r\n\r\n&gt; Method `exec` at **line 69** of\r\n&gt; `web\\src\\main\\java\\abc\\web\\actions\\HomeAction.java` gets user input for\r\n&gt; the `CNF_KEY_COSN` element. This element’s value then flows through the\r\n&gt; code without being properly sanitized or validated and is eventually\r\n&gt; displayed to the user in method `logException` at **line 905** of\r\n&gt; `web\\src\\main\\java\\gov\\abc\\external\\info\\ServiceHelper.java`. This may\r\n&gt; enable a *Cross-Site-Scripting* attack.\r\n\r\n**Line 69** of `HomeAction.java`:\r\n\r\n    String cosn = (String) request.getParameter(CNF_KEY_CON);\r\n\r\n**Line 905** in `ServiceHelper.java` just logs the error:\r\n\r\n    private static void logException(InfoServiceException exception, String message) {\r\n\t\tString newMessage = message + &quot;: &quot; + exception.getMessageForLogging();\r\n\t\ttry {\r\n\t\t\tlog.error(newMessage, exception);\r\n\t\t} catch (Exception e) {\r\n\t\t\t// fallback to console\r\n\t\t\tSystem.out.println(&quot;error logging exception -&gt;&quot;);\r\n\t\t\te.printStackTrace(System.out);\r\n\t\t\tSystem.out.println(&quot;exception -&gt;&quot;);\r\n\t\t\tSystem.out.print(newMessage);\r\n\t\t\tif (exception != null) exception.printStackTrace(System.out);\r\n\t\t}\r\n\t}\r\n\r\nChanged another block of code in `HomeAction.java` to:\r\n\r\n    if(cosn!= null &amp;&amp; cosn.matches(&quot;[0-9a-zA-Z_]+&quot;)) {\r\n      ...\r\n    }\r\n\r\nBut that didn&#39;t help. How do I validate/sanitize/encode **Line 69**. Any help is much appreciated.\r\n\r\nThanks\r\n\r\n","title":"Sanitize/validate variable to avoid cross-site-scripting attack","body":"<p>I get this issue with CheckMarx security scan:</p>\n\n<blockquote>\n  <p>Method <code>exec</code> at <strong>line 69</strong> of\n  <code>web\\src\\main\\java\\abc\\web\\actions\\HomeAction.java</code> gets user input for\n  the <code>CNF_KEY_COSN</code> element. This element’s value then flows through the\n  code without being properly sanitized or validated and is eventually\n  displayed to the user in method <code>logException</code> at <strong>line 905</strong> of\n  <code>web\\src\\main\\java\\gov\\abc\\external\\info\\ServiceHelper.java</code>. This may\n  enable a <em>Cross-Site-Scripting</em> attack.</p>\n</blockquote>\n\n<p><strong>Line 69</strong> of <code>HomeAction.java</code>:</p>\n\n<pre><code>String cosn = (String) request.getParameter(CNF_KEY_CON);\n</code></pre>\n\n<p><strong>Line 905</strong> in <code>ServiceHelper.java</code> just logs the error:</p>\n\n<pre><code>private static void logException(InfoServiceException exception, String message) {\n    String newMessage = message + \": \" + exception.getMessageForLogging();\n    try {\n        log.error(newMessage, exception);\n    } catch (Exception e) {\n        // fallback to console\n        System.out.println(\"error logging exception -&gt;\");\n        e.printStackTrace(System.out);\n        System.out.println(\"exception -&gt;\");\n        System.out.print(newMessage);\n        if (exception != null) exception.printStackTrace(System.out);\n    }\n}\n</code></pre>\n\n<p>Changed another block of code in <code>HomeAction.java</code> to:</p>\n\n<pre><code>if(cosn!= null &amp;&amp; cosn.matches(\"[0-9a-zA-Z_]+\")) {\n  ...\n}\n</code></pre>\n\n<p>But that didn't help. How do I validate/sanitize/encode <strong>Line 69</strong>. Any help is much appreciated.</p>\n\n<p>Thanks</p>\n"},{"tags":["java","loops","error-handling","while-loop","sublimetext3"],"comments":[{"owner":{"account_id":5175809,"reputation":1054,"user_id":4142984,"accept_rate":83,"display_name":"Gyro Gearloose"},"score":2,"creation_date":1698092086,"post_id":77348038,"comment_id":136359038,"body_markdown":"Theoretically, this can&#39;t be done, see https://en.wikipedia.org/wiki/Halting_problem . In practice, just put a counter into your application and abort if the counter exceeds your expected outcome. And throw an Exception so you can get a hint on what is going wrong.","body":"Theoretically, this can&#39;t be done, see <a href=\"https://en.wikipedia.org/wiki/Halting_problem\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Halting_problem</a> . In practice, just put a counter into your application and abort if the counter exceeds your expected outcome. And throw an Exception so you can get a hint on what is going wrong."},{"owner":{"account_id":431024,"reputation":21718,"user_id":814803,"display_name":"OdatNurd"},"score":0,"creation_date":1698094279,"post_id":77348038,"comment_id":136359411,"body_markdown":"As far as the Sublime aspect goes, it retains the state of windows across restarts, which includes not only the list of open files but also unsaved changes. If your output file is open and massively large, then Sublime will attempt to re-open it (or worse, if you modify the content, store the entire thing as unsaved changes); so maybe delete the output file from disk before restarting or such. Hard to say based on your description.","body":"As far as the Sublime aspect goes, it retains the state of windows across restarts, which includes not only the list of open files but also unsaved changes. If your output file is open and massively large, then Sublime will attempt to re-open it (or worse, if you modify the content, store the entire thing as unsaved changes); so maybe delete the output file from disk before restarting or such. Hard to say based on your description."}],"owner":{"account_id":17359487,"reputation":9,"user_id":13244121,"display_name":"Hideki Namikawa"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1698091574,"creation_date":1698091574,"question_id":77348038,"body_markdown":"I use Java with Sublime and print the output in a separate file instead of in the terminal. When I run into infinite loops, too much is printed into the file and the system sort of hangs, and sublime starts throwing notifications to reload the file on disk. When I reload, the code editing is slow until I reopen Sublime.\r\n\r\nHow do I avoid these crashes from infinite loops in cases where I miss them completely?\r\n\r\nThis is my boiler plate btw.\r\n\r\n    import java.io.*;\r\n    import java.util.*;\r\n    public class testing {\r\n    \tpublic static class Task {\r\n    \t\tpublic void solve(Scanner sc, PrintWriter pw) throws IOException {\r\n    \t\t\t\r\n\t\t}\r\n\t}\r\n\tpublic static void main(String... args) throws IOException {\r\n\t\tScanner sc = new Scanner(new FileReader(System.getenv(&quot;INPUT&quot;)));\r\n\t\tPrintWriter pw = new PrintWriter(new BufferedOutputStream(new FileOutputStream(System.getenv(&quot;OUTPUT&quot;))));\r\n\t\t// Scanner sc = new Scanner(System.in);\r\n\t\t// PrintWriter pw = new PrintWriter(new BufferedOutputStream(System.out));\r\n\t\tTask t = new Task();\r\n\t\tint T = sc.nextInt();\r\n\t\twhile (T-- &gt; 0)\r\n\t\t\tt.solve(sc, pw);\r\n\t\tpw.close();\r\n\t}\r\n\r\n    }\r\n\r\n    class Scanner {\r\n    \tprivate StringTokenizer st;\r\n    \tprivate BufferedReader br;\r\n    \tpublic Scanner(InputStream s) {\r\n    \t\tbr = new BufferedReader(new InputStreamReader(s));\r\n    \t}\r\n    \tpublic Scanner(FileReader s) throws FileNotFoundException {\r\n    \t\tbr = new BufferedReader(s);\r\n    \t}\r\n    \tpublic String next() throws IOException {\r\n    \t\twhile (st == null || !st.hasMoreTokens()) {\r\n    \t\t\tString line = br.readLine();\r\n    \t\t\tif (line == null) {\r\n    \t\t\t\treturn null;\r\n    \t\t\t}\r\n    \t\t\tst = new StringTokenizer(line);\r\n    \t\t}\r\n    \t\treturn st.nextToken();\r\n    \t}\r\n\r\n\tpublic int nextInt() throws IOException {\r\n\t\tString token = next();\r\n\t\tif (token == null) {\r\n\t\t\t// Handle the case where there&#39;s no more input\r\n\t\t\t// You can throw an exception, return a default value, or handle it as needed.\r\n\t\t\treturn 0;\r\n\t\t}\r\n\t\treturn Integer.parseInt(token);\r\n\t}\r\n\tpublic long nextLong() throws IOException {\r\n\t\treturn Long.parseLong(next());\r\n\t}\r\n\tpublic String nextLine() throws IOException {\r\n\t\treturn br.readLine();\r\n\t}\r\n\tpublic double nextDouble() throws IOException {\r\n\t\treturn Double.parseDouble(next());\r\n\t}\r\n\tpublic int[] readIntArray(int n) throws IOException {\r\n\t\tint[] arr = new int[n];\r\n\t\tfor (int i = 0; i &lt; n; i++)\r\n\t\t\tarr[i] = nextInt();\r\n\t\treturn arr;\r\n\t}\r\n\tpublic long[] readLongArray(int n) throws IOException {\r\n\t\tlong[] arr = new long[n];\r\n\t\tfor (int i = 0; i &lt; n; i++)\r\n\t\t\tarr[i] = nextLong();\r\n\t\treturn arr;\r\n\t}\r\n\r\n\tpublic boolean ready() throws IOException {\r\n\t\treturn br.ready();\r\n\t}\r\n\tpublic void trace(int[] arr) {\r\n\t\tSystem.err.println(Arrays.toString(arr));\r\n\t}\r\n\tpublic void trace(Integer[] arr) {\r\n\t\tSystem.err.println(Arrays.toString(arr));\r\n\t}\r\n\tpublic void trace(long[] arr) {\r\n\t\tSystem.err.println(Arrays.toString(arr));\r\n\t}\r\n\tpublic void trace(Long[] arr) {\r\n\t\tSystem.err.println(Arrays.toString(arr));\r\n\t}\r\n\tpublic void trace(char[] arr) {\r\n\t\tSystem.err.println(Arrays.toString(arr));\r\n\t}\r\n\tpublic void trace(Character[] arr) {\r\n\t\tSystem.err.println(Arrays.toString(arr));\r\n\t}\r\n\tpublic void trace(Collection&lt;?&gt; collection) {\r\n\t\tSystem.err.println(collection);\r\n\t}\r\n\tpublic void trace(Map&lt;?, ?&gt; map) {\r\n\t\tSystem.err.println(map);\r\n\t}\r\n\tpublic void trace(int a, int... b) {\r\n\t\tSystem.err.print(a + &quot; &quot;);\r\n\t\tfor (int i = 0; i &lt; b.length - 1; i++) {\r\n\t\t\tSystem.err.print(b[i] + &quot; &quot;);\r\n\t\t}\r\n\t\tSystem.err.println(b[b.length - 1]);\r\n\t}\r\n\tpublic void trace(double a, double... b) {\r\n\t\tSystem.err.print(a + &quot; &quot;);\r\n\t\tfor (int i = 0; i &lt; b.length - 1; i++) {\r\n\t\t\tSystem.err.print(b[i] + &quot; &quot;);\r\n\t\t}\r\n\t\tSystem.err.println(b[b.length - 1]);\r\n\t}\r\n\tpublic void trace(long a, long... b) {\r\n\t\tSystem.err.print(a + &quot; &quot;);\r\n\t\tfor (int i = 0; i &lt; b.length - 1; i++) {\r\n\t\t\tSystem.err.print(b[i] + &quot; &quot;);\r\n\t\t}\r\n\t\tSystem.err.println(b[b.length - 1]);\r\n\t}\r\n\tpublic void trace(char a, char... b) {\r\n\t\tSystem.err.print(a + &quot; &quot;);\r\n\t\tfor (int i = 0; i &lt; b.length - 1; i++) {\r\n\t\t\tSystem.err.print(b[i] + &quot; &quot;);\r\n\t\t}\r\n\t\tSystem.err.println(b[b.length - 1]);\r\n\t}\r\n    }\r\n\r\n","title":"How to avoid system hang because of infinite loop?","body":"<p>I use Java with Sublime and print the output in a separate file instead of in the terminal. When I run into infinite loops, too much is printed into the file and the system sort of hangs, and sublime starts throwing notifications to reload the file on disk. When I reload, the code editing is slow until I reopen Sublime.</p>\n<p>How do I avoid these crashes from infinite loops in cases where I miss them completely?</p>\n<p>This is my boiler plate btw.</p>\n<pre><code>import java.io.*;\nimport java.util.*;\npublic class testing {\n    public static class Task {\n        public void solve(Scanner sc, PrintWriter pw) throws IOException {\n            \n    }\n}\npublic static void main(String... args) throws IOException {\n    Scanner sc = new Scanner(new FileReader(System.getenv(&quot;INPUT&quot;)));\n    PrintWriter pw = new PrintWriter(new BufferedOutputStream(new FileOutputStream(System.getenv(&quot;OUTPUT&quot;))));\n    // Scanner sc = new Scanner(System.in);\n    // PrintWriter pw = new PrintWriter(new BufferedOutputStream(System.out));\n    Task t = new Task();\n    int T = sc.nextInt();\n    while (T-- &gt; 0)\n        t.solve(sc, pw);\n    pw.close();\n}\n\n}\n\nclass Scanner {\n    private StringTokenizer st;\n    private BufferedReader br;\n    public Scanner(InputStream s) {\n        br = new BufferedReader(new InputStreamReader(s));\n    }\n    public Scanner(FileReader s) throws FileNotFoundException {\n        br = new BufferedReader(s);\n    }\n    public String next() throws IOException {\n        while (st == null || !st.hasMoreTokens()) {\n            String line = br.readLine();\n            if (line == null) {\n                return null;\n            }\n            st = new StringTokenizer(line);\n        }\n        return st.nextToken();\n    }\n\npublic int nextInt() throws IOException {\n    String token = next();\n    if (token == null) {\n        // Handle the case where there's no more input\n        // You can throw an exception, return a default value, or handle it as needed.\n        return 0;\n    }\n    return Integer.parseInt(token);\n}\npublic long nextLong() throws IOException {\n    return Long.parseLong(next());\n}\npublic String nextLine() throws IOException {\n    return br.readLine();\n}\npublic double nextDouble() throws IOException {\n    return Double.parseDouble(next());\n}\npublic int[] readIntArray(int n) throws IOException {\n    int[] arr = new int[n];\n    for (int i = 0; i &lt; n; i++)\n        arr[i] = nextInt();\n    return arr;\n}\npublic long[] readLongArray(int n) throws IOException {\n    long[] arr = new long[n];\n    for (int i = 0; i &lt; n; i++)\n        arr[i] = nextLong();\n    return arr;\n}\n\npublic boolean ready() throws IOException {\n    return br.ready();\n}\npublic void trace(int[] arr) {\n    System.err.println(Arrays.toString(arr));\n}\npublic void trace(Integer[] arr) {\n    System.err.println(Arrays.toString(arr));\n}\npublic void trace(long[] arr) {\n    System.err.println(Arrays.toString(arr));\n}\npublic void trace(Long[] arr) {\n    System.err.println(Arrays.toString(arr));\n}\npublic void trace(char[] arr) {\n    System.err.println(Arrays.toString(arr));\n}\npublic void trace(Character[] arr) {\n    System.err.println(Arrays.toString(arr));\n}\npublic void trace(Collection&lt;?&gt; collection) {\n    System.err.println(collection);\n}\npublic void trace(Map&lt;?, ?&gt; map) {\n    System.err.println(map);\n}\npublic void trace(int a, int... b) {\n    System.err.print(a + &quot; &quot;);\n    for (int i = 0; i &lt; b.length - 1; i++) {\n        System.err.print(b[i] + &quot; &quot;);\n    }\n    System.err.println(b[b.length - 1]);\n}\npublic void trace(double a, double... b) {\n    System.err.print(a + &quot; &quot;);\n    for (int i = 0; i &lt; b.length - 1; i++) {\n        System.err.print(b[i] + &quot; &quot;);\n    }\n    System.err.println(b[b.length - 1]);\n}\npublic void trace(long a, long... b) {\n    System.err.print(a + &quot; &quot;);\n    for (int i = 0; i &lt; b.length - 1; i++) {\n        System.err.print(b[i] + &quot; &quot;);\n    }\n    System.err.println(b[b.length - 1]);\n}\npublic void trace(char a, char... b) {\n    System.err.print(a + &quot; &quot;);\n    for (int i = 0; i &lt; b.length - 1; i++) {\n        System.err.print(b[i] + &quot; &quot;);\n    }\n    System.err.println(b[b.length - 1]);\n}\n}\n</code></pre>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9927,"page":105,"page_size":100}
