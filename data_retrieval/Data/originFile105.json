{"items":[{"tags":["java","class","object","abstract"],"comments":[{"owner":{"account_id":2345668,"reputation":13002,"user_id":2055998,"accept_rate":68,"display_name":"PM 77-1"},"score":6,"creation_date":1698177958,"post_id":77355098,"comment_id":136371687,"body_markdown":"Why not to have  `rank` as class variable? Then you would not need sub-classing.","body":"Why not to have  <code>rank</code> as class variable? Then you would not need sub-classing."},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1698251200,"post_id":77355098,"comment_id":136382418,"body_markdown":"Based on your reply to the answer, I suggest you look into the [Decorator Pattern](https://www.google.com/search?q=decorator+pattern+java)","body":"Based on your reply to the answer, I suggest you look into the <a href=\"https://www.google.com/search?q=decorator+pattern+java\" rel=\"nofollow noreferrer\">Decorator Pattern</a>"}],"answers":[{"comments":[{"owner":{"account_id":93689,"reputation":415951,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"score":1,"creation_date":1698201509,"post_id":77356296,"comment_id":136373967,"body_markdown":"...and they can be demoted.","body":"...and they can be demoted."},{"owner":{"account_id":18327006,"reputation":121,"user_id":13346423,"display_name":"tmsnvk"},"score":0,"creation_date":1698217264,"post_id":77356296,"comment_id":136375476,"body_markdown":"Hi Basil,\nThanks, this is reasonable and I thought about it. I forgot to mention that the three types of Fighters can fight different missions, so for example Juniors can only do Mission A, Mediors A and B, and Seniors A, B, C. The MissionTypes are stored in enums. Currently these types are stored in static variables in each Fighter class. If I followed your example, I would have to store one list and set the MissionTypes in the constructor. This sounds and seems reasonable by me, however, I was warned against using too much logic in constructors. What&#39;s your take on this? Cheers, T","body":"Hi Basil, Thanks, this is reasonable and I thought about it. I forgot to mention that the three types of Fighters can fight different missions, so for example Juniors can only do Mission A, Mediors A and B, and Seniors A, B, C. The MissionTypes are stored in enums. Currently these types are stored in static variables in each Fighter class. If I followed your example, I would have to store one list and set the MissionTypes in the constructor. This sounds and seems reasonable by me, however, I was warned against using too much logic in constructors. What&#39;s your take on this? Cheers, T"},{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1698611726,"post_id":77356296,"comment_id":136424494,"body_markdown":"@tmsnvk Constructors should indeed be kept simple. However, data validation of inputs is a legitimate function for a constructor if it can be kept simple (if not simple, use a builder). When validating an assigned mission, use an [exhaustive `switch` statement](https://openjdk.org/jeps/441) with a case for each rank. If the mission is wrong for that rank, throw an illegal argument exception. Tip: You can use `EnumSet` to keep a set of missions appropriate for each rank; call `Set#contains`.","body":"@tmsnvk Constructors should indeed be kept simple. However, data validation of inputs is a legitimate function for a constructor if it can be kept simple (if not simple, use a builder). When validating an assigned mission, use an <a href=\"https://openjdk.org/jeps/441\" rel=\"nofollow noreferrer\">exhaustive <code>switch</code> statement</a> with a case for each rank. If the mission is wrong for that rank, throw an illegal argument exception. Tip: You can use <code>EnumSet</code> to keep a set of missions appropriate for each rank; call <code>Set#contains</code>."},{"owner":{"account_id":18327006,"reputation":121,"user_id":13346423,"display_name":"tmsnvk"},"score":0,"creation_date":1698685508,"post_id":77356296,"comment_id":136433881,"body_markdown":"Thanks @BasilBourque for your detailed explanations, much appreciated!","body":"Thanks @BasilBourque for your detailed explanations, much appreciated!"}],"tags":[],"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"comment_count":4,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1698202143,"creation_date":1698200681,"answer_id":77356296,"question_id":77355098,"body_markdown":"[As Commented][1], it sounds like *rank* should simply be a property of your `Fighter` class. \r\n\r\nYou should not use inheritance unless the subclasses have additional data or behavior beyond that of the superclass.\r\n\r\nHere is an entire example class. We define `Rank` as an enum with three named constant objects, your three levels of rank. We have a getter as well as a setter method for you to alter the rank field on an instance. \r\n\r\n```java\r\npackage work.basil.example;\r\n\r\nimport java.util.Objects;\r\n\r\npublic final class Fighter\r\n{\r\n    // Member fields\r\n    private String name;\r\n    private Rank rank;\r\n\r\n    enum Rank { JUNIOR, MEDIOR, SENIOR; }\r\n\r\n    // Constructor\r\n    public Fighter ( String name ,\r\n                     Rank rank )\r\n    {\r\n        this.name = name;\r\n        this.rank = rank;\r\n    }\r\n\r\n    // Accessors\r\n    public String getName ( )\r\n    {\r\n        return name;\r\n    }\r\n\r\n    public void setName ( final String name )\r\n    {\r\n       this.name = name ;\r\n    }\r\n\r\n    public Rank getRank ( )\r\n    {\r\n        return rank;\r\n    }\r\n\r\n    public void setRank ( final Rank rank )\r\n    {\r\n        this.rank = rank;\r\n    }\r\n\r\n    // `Object` overrides.\r\n    @Override\r\n    public boolean equals ( Object obj )\r\n    {\r\n        if ( obj == this ) return true;\r\n        if ( obj == null || obj.getClass ( ) != this.getClass ( ) ) return false;\r\n        var that = ( Fighter ) obj;\r\n        return Objects.equals ( this.name , that.name ) &amp;&amp;\r\n                Objects.equals ( this.rank , that.rank );\r\n    }\r\n\r\n    @Override\r\n    public int hashCode ( )\r\n    {\r\n        return Objects.hash ( name , rank );\r\n    }\r\n\r\n    @Override\r\n    public String toString ( )\r\n    {\r\n        return &quot;Fighter[&quot; +\r\n                &quot;name=&quot; + name + &quot;, &quot; +\r\n                &quot;rank=&quot; + rank + &#39;]&#39;;\r\n    }\r\n}\r\n```\r\n\r\nUsage:\r\n\r\n    Fighter alice = new Fighter ( &quot;Alice&quot; , Fighter.Rank.MEDIOR ) ;\r\n    alice.setRank( Rank.SENIOR ) ;  // Alice earned a promotion.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/77355098/is-there-an-elegant-way-to-recreate-an-object-when-i-need-to-change-its-type/77356296#comment136371687_77355098","title":"Is there an elegant way to recreate an object when I need to change its type?","body":"<p><a href=\"https://stackoverflow.com/questions/77355098/is-there-an-elegant-way-to-recreate-an-object-when-i-need-to-change-its-type/77356296#comment136371687_77355098\">As Commented</a>, it sounds like <em>rank</em> should simply be a property of your <code>Fighter</code> class.</p>\n<p>You should not use inheritance unless the subclasses have additional data or behavior beyond that of the superclass.</p>\n<p>Here is an entire example class. We define <code>Rank</code> as an enum with three named constant objects, your three levels of rank. We have a getter as well as a setter method for you to alter the rank field on an instance.</p>\n<pre class=\"lang-java prettyprint-override\"><code>package work.basil.example;\n\nimport java.util.Objects;\n\npublic final class Fighter\n{\n    // Member fields\n    private String name;\n    private Rank rank;\n\n    enum Rank { JUNIOR, MEDIOR, SENIOR; }\n\n    // Constructor\n    public Fighter ( String name ,\n                     Rank rank )\n    {\n        this.name = name;\n        this.rank = rank;\n    }\n\n    // Accessors\n    public String getName ( )\n    {\n        return name;\n    }\n\n    public void setName ( final String name )\n    {\n       this.name = name ;\n    }\n\n    public Rank getRank ( )\n    {\n        return rank;\n    }\n\n    public void setRank ( final Rank rank )\n    {\n        this.rank = rank;\n    }\n\n    // `Object` overrides.\n    @Override\n    public boolean equals ( Object obj )\n    {\n        if ( obj == this ) return true;\n        if ( obj == null || obj.getClass ( ) != this.getClass ( ) ) return false;\n        var that = ( Fighter ) obj;\n        return Objects.equals ( this.name , that.name ) &amp;&amp;\n                Objects.equals ( this.rank , that.rank );\n    }\n\n    @Override\n    public int hashCode ( )\n    {\n        return Objects.hash ( name , rank );\n    }\n\n    @Override\n    public String toString ( )\n    {\n        return &quot;Fighter[&quot; +\n                &quot;name=&quot; + name + &quot;, &quot; +\n                &quot;rank=&quot; + rank + ']';\n    }\n}\n</code></pre>\n<p>Usage:</p>\n<pre><code>Fighter alice = new Fighter ( &quot;Alice&quot; , Fighter.Rank.MEDIOR ) ;\nalice.setRank( Rank.SENIOR ) ;  // Alice earned a promotion.\n</code></pre>\n"}],"owner":{"account_id":18327006,"reputation":121,"user_id":13346423,"display_name":"tmsnvk"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":94,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77356296,"answer_count":1,"score":1,"last_activity_date":1698202143,"creation_date":1698177724,"question_id":77355098,"body_markdown":"A practice task of mine is about having Fighters taking part in Missions and an aggregator class that can count/filter/keep track of Fighters and Missions.\r\n\r\nI have a Fighter abstract class and three different types of fighters (Junior, Medior and Senior) that inherit this abstract class with a number of fields.\r\n\r\nThe programme should be able to promote fighters to a higher rank - a Junior to Medior and a Medior to Senior. I understand it is not possible to change an object&#39;s type after it has been initialised, but is there a better / more elegant solution than my current one? i.e. I create a new object of a higher level fighter, copy the original object&#39;s data into it and then just delete the original object.","title":"Is there an elegant way to recreate an object when I need to change its type?","body":"<p>A practice task of mine is about having Fighters taking part in Missions and an aggregator class that can count/filter/keep track of Fighters and Missions.</p>\n<p>I have a Fighter abstract class and three different types of fighters (Junior, Medior and Senior) that inherit this abstract class with a number of fields.</p>\n<p>The programme should be able to promote fighters to a higher rank - a Junior to Medior and a Medior to Senior. I understand it is not possible to change an object's type after it has been initialised, but is there a better / more elegant solution than my current one? i.e. I create a new object of a higher level fighter, copy the original object's data into it and then just delete the original object.</p>\n"},{"tags":["java","visual-studio-code","hide","visibility"],"comments":[{"owner":{"account_id":13770793,"reputation":25892,"user_id":9938317,"display_name":"rioV8"},"score":0,"creation_date":1667289975,"post_id":74272910,"comment_id":131127897,"body_markdown":"that will give you **1** line of code extra, a huge win, if you set the font size a point smaller you have the same result, then your next question would be that you can&#39;t see the editor menu and you cant close tabs","body":"that will give you <b>1</b> line of code extra, a huge win, if you set the font size a point smaller you have the same result, then your next question would be that you can&#39;t see the editor menu and you cant close tabs"},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1667298527,"post_id":74272910,"comment_id":131130209,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."},{"owner":{"account_id":13782932,"reputation":31,"user_id":19489276,"display_name":"Jacob"},"score":0,"creation_date":1667385174,"post_id":74272910,"comment_id":131152939,"body_markdown":"Well, I&#39;d still like that extra line of code.","body":"Well, I&#39;d still like that extra line of code."},{"owner":{"account_id":25311208,"reputation":7305,"user_id":19133920,"display_name":"JialeDu"},"score":1,"creation_date":1669365032,"post_id":74272910,"comment_id":131629669,"body_markdown":"You can turn on [**Zen Mode**](https://code.visualstudio.com/docs/getstarted/userinterface#_zen-mode) using `View: Toggle Zen Mode` in the command palette. Does this work for you?","body":"You can turn on <a href=\"https://code.visualstudio.com/docs/getstarted/userinterface#_zen-mode\" rel=\"nofollow noreferrer\"><b>Zen Mode</b></a> using <code>View: Toggle Zen Mode</code> in the command palette. Does this work for you?"}],"answers":[{"comments":[{"owner":{"account_id":13782932,"reputation":31,"user_id":19489276,"display_name":"Jacob"},"score":0,"creation_date":1667385104,"post_id":74273021,"comment_id":131152914,"body_markdown":"The breadcrumbs are already disabled. All that achieves is to hide the path visible on the toolbar but does not hide the toolbar itself.","body":"The breadcrumbs are already disabled. All that achieves is to hide the path visible on the toolbar but does not hide the toolbar itself."},{"owner":{"account_id":23654794,"reputation":39,"user_id":17683245,"display_name":"Muhammad Zarith"},"score":0,"creation_date":1667448902,"post_id":74273021,"comment_id":131171048,"body_markdown":"i dont think you can hide the group editor itself","body":"i dont think you can hide the group editor itself"}],"tags":[],"owner":{"account_id":23654794,"reputation":39,"user_id":17683245,"display_name":"Muhammad Zarith"},"comment_count":2,"down_vote_count":2,"up_vote_count":2,"is_accepted":false,"score":0,"last_activity_date":1667289619,"creation_date":1667289619,"answer_id":74273021,"question_id":74272910,"body_markdown":"Go to **File** &gt; **Preferences** &gt; **Settings** &gt; in the search box type **Breadcrumbs** &gt; untick **Breadcrumbs: Enabled**\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/xPVjO.png","title":"How to hide the VS Code bar with file name, breadcrumbs, and action buttons?","body":"<p>Go to <strong>File</strong> &gt; <strong>Preferences</strong> &gt; <strong>Settings</strong> &gt; in the search box type <strong>Breadcrumbs</strong> &gt; untick <strong>Breadcrumbs: Enabled</strong></p>\n<p><a href=\"https://i.stack.imgur.com/xPVjO.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/xPVjO.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":[],"owner":{"account_id":15396644,"reputation":25775,"user_id":11107541,"display_name":"starball"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1698201977,"creation_date":1688442532,"answer_id":76609290,"question_id":74272910,"body_markdown":"### VS Code 1.84 answer\r\n\r\nIt&#39;s coming. You can thank [Benjamin Simmonds](https://github.com/benibenj) for their Pull Request, [Allow to hide editor title section entirely (tabs, breadcrumbs) (#33607) #195222](https://github.com/microsoft/vscode/pull/195222), which got merged and is scheduled for the October 2023 release. It changes the `workbench.editor.showTabs` setting from a boolean to an enum, which you can set to `&quot;none&quot;`, which purportedly causes tabs and breadcrumbs to both be hidden. Setting it to `&quot;single&quot;` will cause only the breadcrumbs to be shown.\r\n\r\nIf you can&#39;t wait, then the new feature is available in the latest VS Code Insiders.\r\n\r\nFor Zen Mode, use the `zenMode.showTabs` setting.\r\n\r\n### Pre-VS-Code-1.84 answer\r\n\r\nThis feature doesn&#39;t exist at the time of this writing. You can get part of what you&#39;re looking for with the following settings in a [settings.json file](https://code.visualstudio.com/docs/getstarted/settings#_settingsjson):\r\n\r\n```json\r\n&quot;workbench.editor.showTabs&quot;: false,\r\n&quot;breadcrumbs.enabled&quot;: false,\r\n```\r\n\r\nThe full feature is covered by this feature-request issue ticket: [Allow to hide editor title section entirely (tabs, breadcrumbs) #33607](https://github.com/microsoft/vscode/issues/33607). Give it a thumbs up to show support for it, subscribe to it to get notified about discussion and updates. Please avoid making noisy comments like &quot;+1&quot; / &quot;bump&quot;.\r\n\r\nIn that issue ticket, people suggest other workarounds such as:\r\n\r\n- [Using extensions to customize the CSS of the VS Code installation](https://github.com/microsoft/vscode/issues/33607#issuecomment-1221462235) (see also [this](https://github.com/microsoft/vscode/issues/33607#issuecomment-1663235122))\r\n- [Manually deleting the DOM elements using devtools every time](https://github.com/microsoft/vscode/issues/33607#issuecomment-423894998)\r\n\r\nFor Zen Mode, use the `zenMode.hideTabs` setting.","title":"How to hide the VS Code bar with file name, breadcrumbs, and action buttons?","body":"<h3>VS Code 1.84 answer</h3>\n<p>It's coming. You can thank <a href=\"https://github.com/benibenj\" rel=\"nofollow noreferrer\">Benjamin Simmonds</a> for their Pull Request, <a href=\"https://github.com/microsoft/vscode/pull/195222\" rel=\"nofollow noreferrer\">Allow to hide editor title section entirely (tabs, breadcrumbs) (#33607) #195222</a>, which got merged and is scheduled for the October 2023 release. It changes the <code>workbench.editor.showTabs</code> setting from a boolean to an enum, which you can set to <code>&quot;none&quot;</code>, which purportedly causes tabs and breadcrumbs to both be hidden. Setting it to <code>&quot;single&quot;</code> will cause only the breadcrumbs to be shown.</p>\n<p>If you can't wait, then the new feature is available in the latest VS Code Insiders.</p>\n<p>For Zen Mode, use the <code>zenMode.showTabs</code> setting.</p>\n<h3>Pre-VS-Code-1.84 answer</h3>\n<p>This feature doesn't exist at the time of this writing. You can get part of what you're looking for with the following settings in a <a href=\"https://code.visualstudio.com/docs/getstarted/settings#_settingsjson\" rel=\"nofollow noreferrer\">settings.json file</a>:</p>\n<pre class=\"lang-json prettyprint-override\"><code>&quot;workbench.editor.showTabs&quot;: false,\n&quot;breadcrumbs.enabled&quot;: false,\n</code></pre>\n<p>The full feature is covered by this feature-request issue ticket: <a href=\"https://github.com/microsoft/vscode/issues/33607\" rel=\"nofollow noreferrer\">Allow to hide editor title section entirely (tabs, breadcrumbs) #33607</a>. Give it a thumbs up to show support for it, subscribe to it to get notified about discussion and updates. Please avoid making noisy comments like &quot;+1&quot; / &quot;bump&quot;.</p>\n<p>In that issue ticket, people suggest other workarounds such as:</p>\n<ul>\n<li><a href=\"https://github.com/microsoft/vscode/issues/33607#issuecomment-1221462235\" rel=\"nofollow noreferrer\">Using extensions to customize the CSS of the VS Code installation</a> (see also <a href=\"https://github.com/microsoft/vscode/issues/33607#issuecomment-1663235122\" rel=\"nofollow noreferrer\">this</a>)</li>\n<li><a href=\"https://github.com/microsoft/vscode/issues/33607#issuecomment-423894998\" rel=\"nofollow noreferrer\">Manually deleting the DOM elements using devtools every time</a></li>\n</ul>\n<p>For Zen Mode, use the <code>zenMode.hideTabs</code> setting.</p>\n"}],"owner":{"account_id":13782932,"reputation":31,"user_id":19489276,"display_name":"Jacob"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":558,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":2,"score":3,"last_activity_date":1698201977,"creation_date":1667288954,"question_id":74272910,"body_markdown":"I&#39;d like to hide the toolbar visible in the screenshot:\r\n\r\n[![enter image description here](https://i.stack.imgur.com/bi0YN.png)](https://i.stack.imgur.com/bi0YN.png)\r\n\r\nI can hide the menu bar by going into full-screen mode, but I haven&#39;t been able to get rid of the bar with the file name, run button, split, etc.\r\n\r\nIs that possible?\r\n\r\nI tried to look in settings but all you can do apparently is disable the various icons (like the breadcrumbs) and what I&#39;d like is for the bar to disappear completely so that I see more of the code.","title":"How to hide the VS Code bar with file name, breadcrumbs, and action buttons?","body":"<p>I'd like to hide the toolbar visible in the screenshot:</p>\n<p><a href=\"https://i.stack.imgur.com/bi0YN.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/bi0YN.png\" alt=\"enter image description here\" /></a></p>\n<p>I can hide the menu bar by going into full-screen mode, but I haven't been able to get rid of the bar with the file name, run button, split, etc.</p>\n<p>Is that possible?</p>\n<p>I tried to look in settings but all you can do apparently is disable the various icons (like the breadcrumbs) and what I'd like is for the bar to disappear completely so that I see more of the code.</p>\n"},{"tags":["java","file","lambda"],"comments":[{"owner":{"account_id":43861,"reputation":59786,"user_id":128397,"accept_rate":82,"display_name":"Daniel Pryden"},"score":0,"creation_date":1460863494,"post_id":36671152,"comment_id":60935647,"body_markdown":"What&#39;s wrong with doing an ordinary `for` loop? It&#39;s simple, clear, and already works.","body":"What&#39;s wrong with doing an ordinary <code>for</code> loop? It&#39;s simple, clear, and already works."}],"answers":[{"tags":[],"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1698200832,"creation_date":1460852515,"answer_id":36671329,"question_id":36671152,"body_markdown":"The problem is that the signature for `forEachOrdered` requires a `Consumer` and a `Consumer` does not declare that its `accept` method can throw any checked exceptions.\r\n\r\n[JLS 11.2.3][1] says:\r\n\r\n&gt; It is a compile-time error if a lambda body can throw some exception class E when E is a checked exception class and E is not a subclass of some class declared in the throws clause of the function type targeted by the lambda expression. \r\n\r\nTherefore, the `IOException` must be caught by the lambda itself.  The recommended solutions&lt;sup&gt;1&lt;/sup&gt; are: \r\n\r\n  - catch and handle it within the lambda, or\r\n  - catch it in the lambda and rethrow it wrapped in an unchecked exception, then catch / handle the wrapped exception at the outer level.  @Hank D&#39;s answer illustrates this.\r\n\r\nThe problem with handling the IOException within the lambda is that the &quot;for each&quot; will continue running.\r\n\r\n---------------------\r\n\r\n&lt;sup&gt;1 - There is also the &quot;sneaky throw&quot; approach where you call a special method that subverts the Java rules and throws a checked exception without letting on.  But it is &quot;nasty&quot;, and I&#39;m not sure it would directly help here.  You would need to catch the `IOException` and sneakily rethrow it in the lambda.&lt;/sup&gt;\r\n\r\n  [1]: http://docs.oracle.com/javase/specs/jls/se8/html/jls-11.html#jls-11.2.3","title":"error: unreported exception IOException; must be caught or declared to be thrown in stream()","body":"<p>The problem is that the signature for <code>forEachOrdered</code> requires a <code>Consumer</code> and a <code>Consumer</code> does not declare that its <code>accept</code> method can throw any checked exceptions.</p>\n<p><a href=\"http://docs.oracle.com/javase/specs/jls/se8/html/jls-11.html#jls-11.2.3\" rel=\"nofollow noreferrer\">JLS 11.2.3</a> says:</p>\n<blockquote>\n<p>It is a compile-time error if a lambda body can throw some exception class E when E is a checked exception class and E is not a subclass of some class declared in the throws clause of the function type targeted by the lambda expression.</p>\n</blockquote>\n<p>Therefore, the <code>IOException</code> must be caught by the lambda itself.  The recommended solutions<sup>1</sup> are:</p>\n<ul>\n<li>catch and handle it within the lambda, or</li>\n<li>catch it in the lambda and rethrow it wrapped in an unchecked exception, then catch / handle the wrapped exception at the outer level.  @Hank D's answer illustrates this.</li>\n</ul>\n<p>The problem with handling the IOException within the lambda is that the &quot;for each&quot; will continue running.</p>\n<hr />\n<p><sup>1 - There is also the &quot;sneaky throw&quot; approach where you call a special method that subverts the Java rules and throws a checked exception without letting on.  But it is &quot;nasty&quot;, and I'm not sure it would directly help here.  You would need to catch the <code>IOException</code> and sneakily rethrow it in the lambda.</sup></p>\n"},{"tags":[],"owner":{"account_id":4264083,"reputation":6317,"user_id":3487617,"display_name":"Hank D"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1460862853,"creation_date":1460858028,"answer_id":36671864,"question_id":36671152,"body_markdown":"You could catch the `IOException` and rethrow it wrapped in an UncheckedIOException, like this:\r\n\r\n    .forEachOrdered(x-&gt; {\r\n         try{\r\n             writer.write(x.getName()));\r\n         } catch (IOException e) {\r\n             throw new UncheckedIOException(e);\r\n         }\r\n    }\r\n\r\nThe stream will not continue processing if an IOException is thrown.\r\n\r\nOutside of the stream, you should then change your catch to \r\n \r\n        } catch (IOException | UncheckedIOException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\nYou might create convenience functional types that take care of the try/catch for you, something like \r\n\r\n    @FunctionalInterface\r\n    public interface CheckedIOConsumer&lt;T&gt; {\r\n\r\n        void accept(T t) throws IOException;\r\n\r\n        static &lt;T&gt; Consumer&lt;T&gt; toUnchecked(CheckedIOConsumer&lt;T&gt; consumer) {\r\n            return t -&gt; {\r\n                try {\r\n                    consumer.accept(t);\r\n                } catch (IOException e) {\r\n                    throw new UncheckedIOException(e);\r\n                }\r\n            };\r\n        }\r\n    }\r\n\r\nwhich would make your terminal function\r\n\r\n    .forEachOrdered(toUnchecked(x -&gt; writer.write(x.getName())));","title":"error: unreported exception IOException; must be caught or declared to be thrown in stream()","body":"<p>You could catch the <code>IOException</code> and rethrow it wrapped in an UncheckedIOException, like this:</p>\n\n<pre><code>.forEachOrdered(x-&gt; {\n     try{\n         writer.write(x.getName()));\n     } catch (IOException e) {\n         throw new UncheckedIOException(e);\n     }\n}\n</code></pre>\n\n<p>The stream will not continue processing if an IOException is thrown.</p>\n\n<p>Outside of the stream, you should then change your catch to </p>\n\n<pre><code>    } catch (IOException | UncheckedIOException e) {\n        e.printStackTrace();\n    }\n</code></pre>\n\n<p>You might create convenience functional types that take care of the try/catch for you, something like </p>\n\n<pre><code>@FunctionalInterface\npublic interface CheckedIOConsumer&lt;T&gt; {\n\n    void accept(T t) throws IOException;\n\n    static &lt;T&gt; Consumer&lt;T&gt; toUnchecked(CheckedIOConsumer&lt;T&gt; consumer) {\n        return t -&gt; {\n            try {\n                consumer.accept(t);\n            } catch (IOException e) {\n                throw new UncheckedIOException(e);\n            }\n        };\n    }\n}\n</code></pre>\n\n<p>which would make your terminal function</p>\n\n<pre><code>.forEachOrdered(toUnchecked(x -&gt; writer.write(x.getName())));\n</code></pre>\n"}],"owner":{"account_id":7935495,"reputation":23,"user_id":6214546,"display_name":"Caio"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1149,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"closed_date":1695795158,"accepted_answer_id":36671329,"answer_count":2,"score":1,"last_activity_date":1698200832,"creation_date":1460850737,"question_id":36671152,"body_markdown":"I&#39;m trying to write a File and here is the code: \r\n\r\n    \tpublic static void writeFile(File f, int n) throws IOException{\r\n\t\t//reads n teams which go to next phase\r\n\r\n\t\ttry(BufferedWriter writer = new BufferedWriter(new FileWriter(f))){\r\n\t\t\ttable.stream()\r\n\t\t\t .sorted()\r\n\t\t\t .limit(n)\r\n\t\t\t .forEachOrdered(x-&gt;writer.write(x.getName()));\r\n\t\t\t/*for(int i=0;i&lt;n;i++){\r\n\t\t\t\twriter.write(table.get(i).getName());\r\n\t\t\t\twriter.newLine();\r\n\t\t\t}*/ this if uncommented works great!\r\n\t\t}catch (IOException e){\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t}\r\n\r\nand I get this error when I try to compile:\r\n\r\nCounter.java:123: error: unreported exception IOException; must be caught or declared to be thrown\r\n\t\t\t .forEachOrdered(x-&gt;writer.write(x.getName()));\r\n\r\n\r\nMy doubt:  Even if I declare the IOException in the method I am using the .forEachOrdered() I can&#39;t use it because the method which I define inside the .forEachOrdered() (which is a Consumer) doesn&#39;t declare it? I don&#39;t know if I am clear, but maybe you could infer something just looking at the code. Thanks.\r\n\r\nNote: the table is a declared static list with Teams.","title":"error: unreported exception IOException; must be caught or declared to be thrown in stream()","body":"<p>I'm trying to write a File and here is the code: </p>\n\n<pre><code>    public static void writeFile(File f, int n) throws IOException{\n    //reads n teams which go to next phase\n\n    try(BufferedWriter writer = new BufferedWriter(new FileWriter(f))){\n        table.stream()\n         .sorted()\n         .limit(n)\n         .forEachOrdered(x-&gt;writer.write(x.getName()));\n        /*for(int i=0;i&lt;n;i++){\n            writer.write(table.get(i).getName());\n            writer.newLine();\n        }*/ this if uncommented works great!\n    }catch (IOException e){\n        e.printStackTrace();\n    }\n}\n</code></pre>\n\n<p>and I get this error when I try to compile:</p>\n\n<p>Counter.java:123: error: unreported exception IOException; must be caught or declared to be thrown\n             .forEachOrdered(x->writer.write(x.getName()));</p>\n\n<p>My doubt:  Even if I declare the IOException in the method I am using the .forEachOrdered() I can't use it because the method which I define inside the .forEachOrdered() (which is a Consumer) doesn't declare it? I don't know if I am clear, but maybe you could infer something just looking at the code. Thanks.</p>\n\n<p>Note: the table is a declared static list with Teams.</p>\n"},{"tags":["java","spring-boot","intellij-idea","aws-lambda"],"answers":[{"tags":[],"owner":{"account_id":27494768,"reputation":218,"user_id":20979453,"display_name":"Jacky Liu - JetBrains"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1698052773,"creation_date":1697795857,"answer_id":77329997,"question_id":77305135,"body_markdown":"This post just tends to be something that helps but not fully solve your problem.\r\n\r\nI tried this tutorial https://blog.jetbrains.com/idea/2022/02/aws-in-intellij-idea/#lambda and https://docs.aws.amazon.com/toolkit-for-jetbrains/latest/userguide/create-new-lambda.html but choose Java for the project. After creation, the class is a bit different from Spring&#39;s sample:\r\n\r\n```\r\npackage helloworld;\r\n\r\nimport java.io.BufferedReader;\r\nimport java.io.IOException;\r\nimport java.io.InputStreamReader;\r\nimport java.net.URL;\r\nimport java.util.HashMap;\r\nimport java.util.Map;\r\nimport java.util.stream.Collectors;\r\n\r\nimport com.amazonaws.services.lambda.runtime.Context;\r\nimport com.amazonaws.services.lambda.runtime.RequestHandler;\r\nimport com.amazonaws.services.lambda.runtime.events.APIGatewayProxyRequestEvent;\r\nimport com.amazonaws.services.lambda.runtime.events.APIGatewayProxyResponseEvent;\r\n\r\n/**\r\n * Handler for requests to Lambda function.\r\n */\r\npublic class App implements RequestHandler&lt;APIGatewayProxyRequestEvent, APIGatewayProxyResponseEvent&gt; {\r\n\r\n    public APIGatewayProxyResponseEvent handleRequest(final APIGatewayProxyRequestEvent input, final Context context) {\r\n        Map&lt;String, String&gt; headers = new HashMap&lt;&gt;();\r\n        headers.put(&quot;Content-Type&quot;, &quot;application/json&quot;);\r\n        headers.put(&quot;X-Custom-Header&quot;, &quot;application/json&quot;);\r\n\r\n        APIGatewayProxyResponseEvent response = new APIGatewayProxyResponseEvent()\r\n                .withHeaders(headers);\r\n        try {\r\n            final String pageContents = this.getPageContents(&quot;https://checkip.amazonaws.com&quot;);\r\n            String output = String.format(&quot;{ \\&quot;message\\&quot;: \\&quot;hello world\\&quot;, \\&quot;location\\&quot;: \\&quot;%s\\&quot; }&quot;, pageContents);\r\n\r\n            return response\r\n                    .withStatusCode(200)\r\n                    .withBody(output);\r\n        } catch (IOException e) {\r\n            return response\r\n                    .withBody(&quot;{}&quot;)\r\n                    .withStatusCode(500);\r\n        }\r\n    }\r\n\r\n    private String getPageContents(String address) throws IOException{\r\n        URL url = new URL(address);\r\n        try(BufferedReader br = new BufferedReader(new InputStreamReader(url.openStream()))) {\r\n            return br.lines().collect(Collectors.joining(System.lineSeparator()));\r\n        }\r\n    }\r\n}\r\n\r\n```\r\n\r\nThis is the run dialog:\r\n\r\n[![enter image description here][1]][1]\r\n\r\nSo I think your project should input **Handler** like `example.FunctionConfiguration`, however, I can&#39;t build the spring sample project successfully as I&#39;m really new to AWS Lamda, and there are some errors in the log.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/TV7ld.png","title":"Cannot find handler &#39;org.springframework.cloud.function.adapter.aws.FunctionInvoker::handleRequest&#39; in project","body":"<p>This post just tends to be something that helps but not fully solve your problem.</p>\n<p>I tried this tutorial <a href=\"https://blog.jetbrains.com/idea/2022/02/aws-in-intellij-idea/#lambda\" rel=\"nofollow noreferrer\">https://blog.jetbrains.com/idea/2022/02/aws-in-intellij-idea/#lambda</a> and <a href=\"https://docs.aws.amazon.com/toolkit-for-jetbrains/latest/userguide/create-new-lambda.html\" rel=\"nofollow noreferrer\">https://docs.aws.amazon.com/toolkit-for-jetbrains/latest/userguide/create-new-lambda.html</a> but choose Java for the project. After creation, the class is a bit different from Spring's sample:</p>\n<pre><code>package helloworld;\n\nimport java.io.BufferedReader;\nimport java.io.IOException;\nimport java.io.InputStreamReader;\nimport java.net.URL;\nimport java.util.HashMap;\nimport java.util.Map;\nimport java.util.stream.Collectors;\n\nimport com.amazonaws.services.lambda.runtime.Context;\nimport com.amazonaws.services.lambda.runtime.RequestHandler;\nimport com.amazonaws.services.lambda.runtime.events.APIGatewayProxyRequestEvent;\nimport com.amazonaws.services.lambda.runtime.events.APIGatewayProxyResponseEvent;\n\n/**\n * Handler for requests to Lambda function.\n */\npublic class App implements RequestHandler&lt;APIGatewayProxyRequestEvent, APIGatewayProxyResponseEvent&gt; {\n\n    public APIGatewayProxyResponseEvent handleRequest(final APIGatewayProxyRequestEvent input, final Context context) {\n        Map&lt;String, String&gt; headers = new HashMap&lt;&gt;();\n        headers.put(&quot;Content-Type&quot;, &quot;application/json&quot;);\n        headers.put(&quot;X-Custom-Header&quot;, &quot;application/json&quot;);\n\n        APIGatewayProxyResponseEvent response = new APIGatewayProxyResponseEvent()\n                .withHeaders(headers);\n        try {\n            final String pageContents = this.getPageContents(&quot;https://checkip.amazonaws.com&quot;);\n            String output = String.format(&quot;{ \\&quot;message\\&quot;: \\&quot;hello world\\&quot;, \\&quot;location\\&quot;: \\&quot;%s\\&quot; }&quot;, pageContents);\n\n            return response\n                    .withStatusCode(200)\n                    .withBody(output);\n        } catch (IOException e) {\n            return response\n                    .withBody(&quot;{}&quot;)\n                    .withStatusCode(500);\n        }\n    }\n\n    private String getPageContents(String address) throws IOException{\n        URL url = new URL(address);\n        try(BufferedReader br = new BufferedReader(new InputStreamReader(url.openStream()))) {\n            return br.lines().collect(Collectors.joining(System.lineSeparator()));\n        }\n    }\n}\n\n</code></pre>\n<p>This is the run dialog:</p>\n<p><a href=\"https://i.stack.imgur.com/TV7ld.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/TV7ld.png\" alt=\"enter image description here\" /></a></p>\n<p>So I think your project should input <strong>Handler</strong> like <code>example.FunctionConfiguration</code>, however, I can't build the spring sample project successfully as I'm really new to AWS Lamda, and there are some errors in the log.</p>\n"},{"tags":[],"owner":{"account_id":2375014,"reputation":1,"user_id":2078642,"display_name":"Eugene"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698200591,"creation_date":1698200591,"answer_id":77356292,"question_id":77305135,"body_markdown":"This is AWS Toolkit for IntelliJ&#39;s problem. The plugin is only accepting the handler if it is in your project source root. so you can&#39;t use Spring Cloud Function&#39;s `handleRequest`.\r\n\r\nTo solve that, as answered above, you need to implement or extend requestHandler. For example :\r\n\r\n```\r\npublic class HandlerWrapper extends FunctionInvoker{\r\n\tpublic void invokerWrapper(InputStream input, OutputStream output, Context context) throws IOException {\r\n\t\tthis.handleRequest(input, output, context);\r\n\t}\r\n}\r\n```\r\n\r\nThen set `HandlerWrapper::invokerWrapper` as a handler.","title":"Cannot find handler &#39;org.springframework.cloud.function.adapter.aws.FunctionInvoker::handleRequest&#39; in project","body":"<p>This is AWS Toolkit for IntelliJ's problem. The plugin is only accepting the handler if it is in your project source root. so you can't use Spring Cloud Function's <code>handleRequest</code>.</p>\n<p>To solve that, as answered above, you need to implement or extend requestHandler. For example :</p>\n<pre><code>public class HandlerWrapper extends FunctionInvoker{\n    public void invokerWrapper(InputStream input, OutputStream output, Context context) throws IOException {\n        this.handleRequest(input, output, context);\n    }\n}\n</code></pre>\n<p>Then set <code>HandlerWrapper::invokerWrapper</code> as a handler.</p>\n"}],"owner":{"account_id":9361051,"reputation":23,"user_id":6947360,"display_name":"javi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":76,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1698200591,"creation_date":1697493065,"question_id":77305135,"body_markdown":"I am trying to run/debug a lambda application locally but my intellij keeps giving this error.\r\n\r\nMy AWS Lambda configuration looks like -&gt;\r\n[![enter image description here][1]][1]\r\n\r\n\r\nError in Intellij : \r\n[![enter image description here][2]][2]\r\n\r\n\r\nI am using springboot 3.1, java 17 and using the springframework.cloud dependency in my gradle file.\r\n```implementation group: &#39;org.springframework.cloud&#39;, name: &#39;spring-cloud-function-adapter-aws&#39;, version: &#39;3.+&#39;```\r\n\r\nI am following this doc to create the lambda application-&gt; https://docs.spring.io/spring-cloud-function/docs/current/reference/html/aws.html\r\n\r\n\r\nIs there any missing configuration?  What am I doing wrong here? :(\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/ZjN6S.png\r\n  [2]: https://i.stack.imgur.com/Dg2Co.png","title":"Cannot find handler &#39;org.springframework.cloud.function.adapter.aws.FunctionInvoker::handleRequest&#39; in project","body":"<p>I am trying to run/debug a lambda application locally but my intellij keeps giving this error.</p>\n<p>My AWS Lambda configuration looks like -&gt;\n<a href=\"https://i.stack.imgur.com/ZjN6S.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ZjN6S.png\" alt=\"enter image description here\" /></a></p>\n<p>Error in Intellij :\n<a href=\"https://i.stack.imgur.com/Dg2Co.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Dg2Co.png\" alt=\"enter image description here\" /></a></p>\n<p>I am using springboot 3.1, java 17 and using the springframework.cloud dependency in my gradle file.\n<code>implementation group: 'org.springframework.cloud', name: 'spring-cloud-function-adapter-aws', version: '3.+'</code></p>\n<p>I am following this doc to create the lambda application-&gt; <a href=\"https://docs.spring.io/spring-cloud-function/docs/current/reference/html/aws.html\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-cloud-function/docs/current/reference/html/aws.html</a></p>\n<p>Is there any missing configuration?  What am I doing wrong here? :(</p>\n"},{"tags":["java","swing","user-interface","netbeans","jlabel"],"comments":[{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":0,"creation_date":1698199146,"post_id":77356158,"comment_id":136373806,"body_markdown":"You&#39;re mixing heavy-weight AWT components, such as `java.awt.Label`, with Swing GUI&#39;s. Don&#39;t do this. Use only `javax.swing.JLabel`s, not `java.awt.Label`s.","body":"You&#39;re mixing heavy-weight AWT components, such as <code>java.awt.Label</code>, with Swing GUI&#39;s. Don&#39;t do this. Use only <code>javax.swing.JLabel</code>s, not <code>java.awt.Label</code>s."}],"answers":[{"tags":[],"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1698200463,"creation_date":1698199492,"answer_id":77356244,"question_id":77356158,"body_markdown":"You&#39;re not just adding JLabels; you&#39;re also adding `java.awt.Label` components:\r\n\r\n```\r\nprivate java.awt.Label resultAmountLabel;\r\n```\r\n\r\nDon&#39;t do this. Don&#39;t mix heavy-weight AWT components, such as Labels, with light weight Swing GUI&#39;s. Instead, every `java.awt.Label` should be declared and initialized as a `javax.swing.JLabel`.\r\n\r\nThe same is true for Button. Instead of,\r\n```\r\nsearchButton = new java.awt.Button();\r\n```\r\nand \r\n```\r\nprivate java.awt.Button searchButton;\r\n```\r\n\r\nYou should do:\r\n\r\n```\r\nsearchButton = new javax.swing.JButton();\r\n```\r\nand \r\n```\r\nprivate javax.swing.JButton searchButton;\r\n```\r\n\r\nNote that it is OK to use non-component `java.awt` classes, such as those for Font, Color, layout managers, and such.\r\nThis is likely happening because you are choosing the wrong components with your NetBeans GUI builder, and will have to be more careful.\r\n\r\nOr even better, learn to create GUI&#39;s without use of a GUI builder. ","title":"JLabel Not Showing up when i run the program, but shows in my GUI builder in NetBeans","body":"<p>You're not just adding JLabels; you're also adding <code>java.awt.Label</code> components:</p>\n<pre><code>private java.awt.Label resultAmountLabel;\n</code></pre>\n<p>Don't do this. Don't mix heavy-weight AWT components, such as Labels, with light weight Swing GUI's. Instead, every <code>java.awt.Label</code> should be declared and initialized as a <code>javax.swing.JLabel</code>.</p>\n<p>The same is true for Button. Instead of,</p>\n<pre><code>searchButton = new java.awt.Button();\n</code></pre>\n<p>and</p>\n<pre><code>private java.awt.Button searchButton;\n</code></pre>\n<p>You should do:</p>\n<pre><code>searchButton = new javax.swing.JButton();\n</code></pre>\n<p>and</p>\n<pre><code>private javax.swing.JButton searchButton;\n</code></pre>\n<p>Note that it is OK to use non-component <code>java.awt</code> classes, such as those for Font, Color, layout managers, and such.\nThis is likely happening because you are choosing the wrong components with your NetBeans GUI builder, and will have to be more careful.</p>\n<p>Or even better, learn to create GUI's without use of a GUI builder.</p>\n"}],"owner":{"account_id":29747029,"reputation":3,"user_id":22797799,"display_name":"Yash Savani"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":31,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77356244,"answer_count":1,"score":0,"last_activity_date":1698200463,"creation_date":1698197336,"question_id":77356158,"body_markdown":"I am using Java GUI builder in NetBeans(drag and drop), and I added JLabels, Text Fields and Buttons in a container. However, only Text Fields and Buttons are showing up and not JLabels. \r\n\r\n\r\n\r\n```\r\n/*\r\n * Click nbfs://nbhost/SystemFileSystem/Templates/Licenses/license-default.txt to change this license\r\n * Click nbfs://nbhost/SystemFileSystem/Templates/GUIForms/JPanel.java to edit this template\r\n */\r\npackage View;\r\n\r\n/**\r\n *\r\n * @author Yash\r\n */\r\npublic class ModifyTransactionPanel extends javax.swing.JPanel {\r\n\r\n    private MainFrame mainFrame;\r\n    /**\r\n     * Creates new form HomePanel\r\n     */\r\n    public ModifyTransactionPanel(MainFrame mainFrame) {\r\n        this.mainFrame = mainFrame;\r\n        initComponents();\r\n    }\r\n\r\n    /**\r\n     * This method is called from within the constructor to initialize the form.\r\n     * WARNING: Do NOT modify this code. The content of this method is always\r\n     * regenerated by the Form Editor.\r\n     */\r\n    @SuppressWarnings(&quot;unchecked&quot;)\r\n    // &lt;editor-fold defaultstate=&quot;collapsed&quot; desc=&quot;Generated Code&quot;&gt;                          \r\n    private void initComponents() {\r\n\r\n        menuPanel = new javax.swing.JPanel();\r\n        menuItems = new javax.swing.JPanel();\r\n        backButton = new javax.swing.JButton();\r\n        logoutButton = new javax.swing.JButton();\r\n        exitButton = new javax.swing.JButton();\r\n        expenseTrackerLogoContainer = new javax.swing.JPanel();\r\n        expenseTrackerLogo = new javax.swing.JLabel();\r\n        modifyTransactionPanelContainer = new javax.swing.JPanel();\r\n        addIncomeTitleLabel = new javax.swing.JLabel();\r\n        searchBar = new javax.swing.JTextField();\r\n        searchButton = new java.awt.Button();\r\n        searchTransactionIDButton = new java.awt.Label();\r\n        searchResultContainer = new javax.swing.JPanel();\r\n        resultTransactionID = new java.awt.Label();\r\n        resultTransactionTypeLabel = new java.awt.Label();\r\n        resultTransactionIDLabel = new java.awt.Label();\r\n        resultNameLabel = new java.awt.Label();\r\n        resultName = new javax.swing.JTextField();\r\n        resultDateLabel = new java.awt.Label();\r\n        resultDate = new javax.swing.JTextField();\r\n        resultCategoryLabel = new java.awt.Label();\r\n        resultCategory = new javax.swing.JTextField();\r\n        resultAmountLabel = new java.awt.Label();\r\n        resultAmount = new javax.swing.JTextField();\r\n        updateTransactionButton = new java.awt.Button();\r\n        addIncomeButton1 = new java.awt.Button();\r\n\r\n        setLayout(new org.netbeans.lib.awtextra.AbsoluteLayout());\r\n\r\n        menuPanel.setBackground(new java.awt.Color(0, 0, 0));\r\n        menuPanel.setLayout(new org.netbeans.lib.awtextra.AbsoluteLayout());\r\n\r\n        menuItems.setBackground(new java.awt.Color(0, 0, 0));\r\n        menuItems.setFont(new java.awt.Font(&quot;Arial&quot;, 0, 14)); // NOI18N\r\n        menuItems.setLayout(new java.awt.GridLayout(3, 0));\r\n\r\n        backButton.setBackground(new java.awt.Color(0, 0, 0));\r\n        backButton.setFont(new java.awt.Font(&quot;Arial&quot;, 0, 18)); // NOI18N\r\n        backButton.setForeground(new java.awt.Color(255, 255, 255));\r\n        backButton.setText(&quot;Back&quot;);\r\n        backButton.setBorder(null);\r\n        backButton.setBorderPainted(false);\r\n        backButton.setCursor(new java.awt.Cursor(java.awt.Cursor.HAND_CURSOR));\r\n        menuItems.add(backButton);\r\n\r\n        logoutButton.setBackground(new java.awt.Color(0, 0, 0));\r\n        logoutButton.setFont(new java.awt.Font(&quot;Arial&quot;, 0, 18)); // NOI18N\r\n        logoutButton.setForeground(new java.awt.Color(255, 255, 255));\r\n        logoutButton.setText(&quot;Logout&quot;);\r\n        logoutButton.setBorder(null);\r\n        logoutButton.setBorderPainted(false);\r\n        logoutButton.setCursor(new java.awt.Cursor(java.awt.Cursor.HAND_CURSOR));\r\n        menuItems.add(logoutButton);\r\n\r\n        exitButton.setBackground(new java.awt.Color(0, 0, 0));\r\n        exitButton.setFont(new java.awt.Font(&quot;Arial&quot;, 0, 18)); // NOI18N\r\n        exitButton.setForeground(new java.awt.Color(255, 255, 255));\r\n        exitButton.setText(&quot;Exit&quot;);\r\n        exitButton.setBorder(null);\r\n        exitButton.setBorderPainted(false);\r\n        exitButton.setCursor(new java.awt.Cursor(java.awt.Cursor.HAND_CURSOR));\r\n        exitButton.addActionListener(new java.awt.event.ActionListener() {\r\n            public void actionPerformed(java.awt.event.ActionEvent evt) {\r\n                exitButtonActionPerformed(evt);\r\n            }\r\n        });\r\n        menuItems.add(exitButton);\r\n\r\n        menuPanel.add(menuItems, new org.netbeans.lib.awtextra.AbsoluteConstraints(0, 270, 370, 730));\r\n\r\n        expenseTrackerLogo.setIcon(new javax.swing.ImageIcon(getClass().getResource(&quot;/expenseTrackerLogo.jpg&quot;))); // NOI18N\r\n        expenseTrackerLogo.setOpaque(true);\r\n\r\n        javax.swing.GroupLayout expenseTrackerLogoContainerLayout = new javax.swing.GroupLayout(expenseTrackerLogoContainer);\r\n        expenseTrackerLogoContainer.setLayout(expenseTrackerLogoContainerLayout);\r\n        expenseTrackerLogoContainerLayout.setHorizontalGroup(\r\n            expenseTrackerLogoContainerLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)\r\n            .addComponent(expenseTrackerLogo, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)\r\n        );\r\n        expenseTrackerLogoContainerLayout.setVerticalGroup(\r\n            expenseTrackerLogoContainerLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)\r\n            .addComponent(expenseTrackerLogo, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)\r\n        );\r\n\r\n        menuPanel.add(expenseTrackerLogoContainer, new org.netbeans.lib.awtextra.AbsoluteConstraints(0, 0, 370, 270));\r\n\r\n        add(menuPanel, new org.netbeans.lib.awtextra.AbsoluteConstraints(0, 0, 370, 1000));\r\n\r\n        modifyTransactionPanelContainer.setBackground(new java.awt.Color(255, 255, 255));\r\n        modifyTransactionPanelContainer.setForeground(new java.awt.Color(0, 0, 0));\r\n\r\n        addIncomeTitleLabel.setBackground(new java.awt.Color(255, 255, 255));\r\n        addIncomeTitleLabel.setFont(new java.awt.Font(&quot;Arial&quot;, 1, 36)); // NOI18N\r\n        addIncomeTitleLabel.setForeground(new java.awt.Color(0, 0, 0));\r\n        addIncomeTitleLabel.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);\r\n        addIncomeTitleLabel.setText(&quot;ModifyTransaction&quot;);\r\n\r\n        searchBar.setBackground(new java.awt.Color(255, 255, 255));\r\n        searchBar.setFont(new java.awt.Font(&quot;Arial&quot;, 0, 14)); // NOI18N\r\n\r\n        searchButton.setBackground(new java.awt.Color(0, 0, 0));\r\n        searchButton.setCursor(new java.awt.Cursor(java.awt.Cursor.HAND_CURSOR));\r\n        searchButton.setFont(new java.awt.Font(&quot;Arial&quot;, 0, 18)); // NOI18N\r\n        searchButton.setForeground(new java.awt.Color(255, 255, 255));\r\n        searchButton.setLabel(&quot;Search&quot;);\r\n        searchButton.setName(&quot;&quot;); // NOI18N\r\n        searchButton.addActionListener(new java.awt.event.ActionListener() {\r\n            public void actionPerformed(java.awt.event.ActionEvent evt) {\r\n                searchButtonActionPerformed(evt);\r\n            }\r\n        });\r\n\r\n        searchTransactionIDButton.setFont(new java.awt.Font(&quot;Arial&quot;, 0, 20)); // NOI18N\r\n        searchTransactionIDButton.setText(&quot;Search Transaction ID&quot;);\r\n\r\n        searchResultContainer.setBackground(new java.awt.Color(255, 255, 255));\r\n        searchResultContainer.setForeground(new java.awt.Color(255, 255, 255));\r\n\r\n        resultTransactionID.setAlignment(java.awt.Label.CENTER);\r\n        resultTransactionID.setFont(new java.awt.Font(&quot;Arial&quot;, 1, 20)); // NOI18N\r\n        resultTransactionID.setText(&quot;INC000001&quot;);\r\n\r\n        resultTransactionTypeLabel.setFont(new java.awt.Font(&quot;Arial&quot;, 1, 20)); // NOI18N\r\n        resultTransactionTypeLabel.setText(&quot;(Income)&quot;);\r\n\r\n        resultTransactionIDLabel.setFont(new java.awt.Font(&quot;Arial&quot;, 0, 20)); // NOI18N\r\n        resultTransactionIDLabel.setText(&quot;Transaction ID:&quot;);\r\n\r\n        resultNameLabel.setFont(new java.awt.Font(&quot;Arial&quot;, 0, 20)); // NOI18N\r\n        resultNameLabel.setText(&quot;Income Name&quot;);\r\n\r\n        resultName.setBackground(new java.awt.Color(255, 255, 255));\r\n        resultName.setFont(new java.awt.Font(&quot;Arial&quot;, 0, 14)); // NOI18N\r\n\r\n        resultDateLabel.setFont(new java.awt.Font(&quot;Arial&quot;, 0, 20)); // NOI18N\r\n        resultDateLabel.setText(&quot;Date (in dd/mm/yyyy format)&quot;);\r\n\r\n        resultDate.setBackground(new java.awt.Color(255, 255, 255));\r\n        resultDate.setFont(new java.awt.Font(&quot;Arial&quot;, 0, 14)); // NOI18N\r\n\r\n        resultCategoryLabel.setFont(new java.awt.Font(&quot;Arial&quot;, 0, 20)); // NOI18N\r\n        resultCategoryLabel.setText(&quot;Category&quot;);\r\n\r\n        resultCategory.setBackground(new java.awt.Color(255, 255, 255));\r\n        resultCategory.setFont(new java.awt.Font(&quot;Arial&quot;, 0, 14)); // NOI18N\r\n\r\n        resultAmountLabel.setFont(new java.awt.Font(&quot;Arial&quot;, 0, 20)); // NOI18N\r\n        resultAmountLabel.setText(&quot;Amount&quot;);\r\n\r\n        resultAmount.setBackground(new java.awt.Color(255, 255, 255));\r\n        resultAmount.setFont(new java.awt.Font(&quot;Arial&quot;, 0, 14)); // NOI18N\r\n\r\n        updateTransactionButton.setBackground(new java.awt.Color(0, 0, 0));\r\n        updateTransactionButton.setCursor(new java.awt.Cursor(java.awt.Cursor.HAND_CURSOR));\r\n        updateTransactionButton.setFont(new java.awt.Font(&quot;Arial&quot;, 0, 18)); // NOI18N\r\n        updateTransactionButton.setForeground(new java.awt.Color(255, 255, 255));\r\n        updateTransactionButton.setLabel(&quot;Update&quot;);\r\n        updateTransactionButton.setName(&quot;&quot;); // NOI18N\r\n        updateTransactionButton.addActionListener(new java.awt.event.ActionListener() {\r\n            public void actionPerformed(java.awt.event.ActionEvent evt) {\r\n                updateTransactionButtonActionPerformed(evt);\r\n            }\r\n        });\r\n\r\n        addIncomeButton1.setBackground(new java.awt.Color(0, 0, 0));\r\n        addIncomeButton1.setCursor(new java.awt.Cursor(java.awt.Cursor.HAND_CURSOR));\r\n        addIncomeButton1.setFont(new java.awt.Font(&quot;Arial&quot;, 0, 18)); // NOI18N\r\n        addIncomeButton1.setForeground(new java.awt.Color(255, 255, 255));\r\n        addIncomeButton1.setLabel(&quot;Delete&quot;);\r\n        addIncomeButton1.setName(&quot;&quot;); // NOI18N\r\n        addIncomeButton1.addActionListener(new java.awt.event.ActionListener() {\r\n            public void actionPerformed(java.awt.event.ActionEvent evt) {\r\n                addIncomeButton1ActionPerformed(evt);\r\n            }\r\n        });\r\n\r\n        javax.swing.GroupLayout searchResultContainerLayout = new javax.swing.GroupLayout(searchResultContainer);\r\n        searchResultContainer.setLayout(searchResultContainerLayout);\r\n        searchResultContainerLayout.setHorizontalGroup(\r\n            searchResultContainerLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)\r\n            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, searchResultContainerLayout.createSequentialGroup()\r\n                .addGap(48, 48, 48)\r\n                .addComponent(updateTransactionButton, javax.swing.GroupLayout.PREFERRED_SIZE, 157, javax.swing.GroupLayout.PREFERRED_SIZE)\r\n                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 94, Short.MAX_VALUE)\r\n                .addGroup(searchResultContainerLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)\r\n                    .addComponent(addIncomeButton1, javax.swing.GroupLayout.Alignment.TRAILING, javax.swing.GroupLayout.PREFERRED_SIZE, 157, javax.swing.GroupLayout.PREFERRED_SIZE)\r\n                    .addComponent(resultTransactionTypeLabel, javax.swing.GroupLayout.Alignment.TRAILING, javax.swing.GroupLayout.PREFERRED_SIZE, 145, javax.swing.GroupLayout.PREFERRED_SIZE))\r\n                .addGap(43, 43, 43))\r\n            .addGroup(searchResultContainerLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)\r\n                .addGroup(searchResultContainerLayout.createSequentialGroup()\r\n                    .addGap(46, 46, 46)\r\n                    .addGroup(searchResultContainerLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)\r\n                        .addGroup(searchResultContainerLayout.createSequentialGroup()\r\n                            .addComponent(resultTransactionIDLabel, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)\r\n                            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)\r\n                            .addComponent(resultTransactionID, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))\r\n                        .addComponent(resultAmount, javax.swing.GroupLayout.DEFAULT_SIZE, 406, Short.MAX_VALUE)\r\n                        .addComponent(resultAmountLabel, javax.swing.GroupLayout.DEFAULT_SIZE, 406, Short.MAX_VALUE)\r\n                        .addComponent(resultCategory, javax.swing.GroupLayout.DEFAULT_SIZE, 406, Short.MAX_VALUE)\r\n                        .addComponent(resultCategoryLabel, javax.swing.GroupLayout.DEFAULT_SIZE, 406, Short.MAX_VALUE)\r\n                        .addComponent(resultDate, javax.swing.GroupLayout.DEFAULT_SIZE, 406, Short.MAX_VALUE)\r\n                        .addComponent(resultDateLabel, javax.swing.GroupLayout.DEFAULT_SIZE, 406, Short.MAX_VALUE)\r\n                        .addComponent(resultName, javax.swing.GroupLayout.DEFAULT_SIZE, 406, Short.MAX_VALUE)\r\n                        .addComponent(resultNameLabel, javax.swing.GroupLayout.DEFAULT_SIZE, 406, Short.MAX_VALUE))\r\n                    .addContainerGap(47, Short.MAX_VALUE)))\r\n        );\r\n        searchResultContainerLayout.setVerticalGroup(\r\n            searchResultContainerLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)\r\n            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, searchResultContainerLayout.createSequentialGroup()\r\n                .addGap(20, 20, 20)\r\n                .addComponent(resultTransactionTypeLabel, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)\r\n                .addGap(441, 441, 441)\r\n                .addGroup(searchResultContainerLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)\r\n                    .addComponent(updateTransactionButton, javax.swing.GroupLayout.PREFERRED_SIZE, 42, javax.swing.GroupLayout.PREFERRED_SIZE)\r\n                    .addComponent(addIncomeButton1, javax.swing.GroupLayout.PREFERRED_SIZE, 42, javax.swing.GroupLayout.PREFERRED_SIZE))\r\n                .addGap(30, 30, 30))\r\n            .addGroup(searchResultContainerLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)\r\n                .addGroup(searchResultContainerLayout.createSequentialGroup()\r\n                    .addGap(22, 22, 22)\r\n                    .addGroup(searchResultContainerLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)\r\n                        .addComponent(resultTransactionIDLabel, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)\r\n                        .addComponent(resultTransactionID, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))\r\n                    .addGap(28, 28, 28)\r\n                    .addComponent(resultNameLabel, javax.swing.GroupLayout.PREFERRED_SIZE, 27, Short.MAX_VALUE)\r\n                    .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)\r\n                    .addComponent(resultName, javax.swing.GroupLayout.DEFAULT_SIZE, 35, Short.MAX_VALUE)\r\n                    .addGap(18, 18, 18)\r\n                    .addComponent(resultDateLabel, javax.swing.GroupLayout.PREFERRED_SIZE, 27, Short.MAX_VALUE)\r\n                    .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)\r\n                    .addComponent(resultDate, javax.swing.GroupLayout.DEFAULT_SIZE, 36, Short.MAX_VALUE)\r\n                    .addGap(24, 24, 24)\r\n                    .addComponent(resultCategoryLabel, javax.swing.GroupLayout.PREFERRED_SIZE, 27, Short.MAX_VALUE)\r\n                    .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)\r\n                    .addComponent(resultCategory, javax.swing.GroupLayout.DEFAULT_SIZE, 36, Short.MAX_VALUE)\r\n                    .addGap(23, 23, 23)\r\n                    .addComponent(resultAmountLabel, javax.swing.GroupLayout.DEFAULT_SIZE, 35, Short.MAX_VALUE)\r\n                    .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)\r\n                    .addComponent(resultAmount, javax.swing.GroupLayout.DEFAULT_SIZE, 34, Short.MAX_VALUE)\r\n                    .addGap(121, 121, 121)))\r\n        );\r\n\r\n        javax.swing.GroupLayout modifyTransactionPanelContainerLayout = new javax.swing.GroupLayout(modifyTransactionPanelContainer);\r\n        modifyTransactionPanelContainer.setLayout(modifyTransactionPanelContainerLayout);\r\n        modifyTransactionPanelContainerLayout.setHorizontalGroup(\r\n            modifyTransactionPanelContainerLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)\r\n            .addGroup(modifyTransactionPanelContainerLayout.createSequentialGroup()\r\n                .addContainerGap(374, Short.MAX_VALUE)\r\n                .addGroup(modifyTransactionPanelContainerLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)\r\n                    .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, modifyTransactionPanelContainerLayout.createSequentialGroup()\r\n                        .addGroup(modifyTransactionPanelContainerLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)\r\n                            .addComponent(searchTransactionIDButton, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)\r\n                            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, modifyTransactionPanelContainerLayout.createSequentialGroup()\r\n                                .addComponent(searchBar, javax.swing.GroupLayout.PREFERRED_SIZE, 250, javax.swing.GroupLayout.PREFERRED_SIZE)\r\n                                .addGap(24, 24, 24)\r\n                                .addComponent(searchButton, javax.swing.GroupLayout.PREFERRED_SIZE, 132, javax.swing.GroupLayout.PREFERRED_SIZE)))\r\n                        .addGap(350, 350, 350))\r\n                    .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, modifyTransactionPanelContainerLayout.createSequentialGroup()\r\n                        .addComponent(addIncomeTitleLabel, javax.swing.GroupLayout.PREFERRED_SIZE, 355, javax.swing.GroupLayout.PREFERRED_SIZE)\r\n                        .addGap(374, 374, 374))))\r\n            .addGroup(modifyTransactionPanelContainerLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)\r\n                .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, modifyTransactionPanelContainerLayout.createSequentialGroup()\r\n                    .addContainerGap(327, Short.MAX_VALUE)\r\n                    .addComponent(searchResultContainer, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)\r\n                    .addContainerGap(304, Short.MAX_VALUE)))\r\n        );\r\n        modifyTransactionPanelContainerLayout.setVerticalGroup(\r\n            modifyTransactionPanelContainerLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)\r\n            .addGroup(modifyTransactionPanelContainerLayout.createSequentialGroup()\r\n                .addGap(90, 90, 90)\r\n                .addComponent(addIncomeTitleLabel, javax.swing.GroupLayout.PREFERRED_SIZE, 87, javax.swing.GroupLayout.PREFERRED_SIZE)\r\n                .addGap(37, 37, 37)\r\n                .addComponent(searchTransactionIDButton, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)\r\n                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)\r\n                .addGroup(modifyTransactionPanelContainerLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)\r\n                    .addComponent(searchBar, javax.swing.GroupLayout.DEFAULT_SIZE, 35, Short.MAX_VALUE)\r\n                    .addComponent(searchButton, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))\r\n                .addGap(713, 713, 713))\r\n            .addGroup(modifyTransactionPanelContainerLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)\r\n                .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, modifyTransactionPanelContainerLayout.createSequentialGroup()\r\n                    .addContainerGap(309, Short.MAX_VALUE)\r\n                    .addComponent(searchResultContainer, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)\r\n                    .addContainerGap(130, Short.MAX_VALUE)))\r\n        );\r\n\r\n        add(modifyTransactionPanelContainer, new org.netbeans.lib.awtextra.AbsoluteConstraints(370, 0, 1130, 1000));\r\n    }// &lt;/editor-fold&gt;                        \r\n\r\n    private void exitButtonActionPerformed(java.awt.event.ActionEvent evt) {                                           \r\n        // TODO add your handling code here:\r\n        System.exit(0);\r\n    }                                          \r\n\r\n    private void updateTransactionButtonActionPerformed(java.awt.event.ActionEvent evt) {                                                        \r\n        // TODO add your handling code here:\r\n        mainFrame.showTransactionPanel();\r\n    }                                                       \r\n\r\n    private void searchButtonActionPerformed(java.awt.event.ActionEvent evt) {                                             \r\n        // TODO add your handling code here:\r\n    }                                            \r\n\r\n    private void addIncomeButton1ActionPerformed(java.awt.event.ActionEvent evt) {                                                 \r\n        // TODO add your handling code here:\r\n    }                                                \r\n\r\n\r\n    // Variables declaration - do not modify                     \r\n    private java.awt.Button addIncomeButton1;\r\n    private javax.swing.JLabel addIncomeTitleLabel;\r\n    private javax.swing.JButton backButton;\r\n    private javax.swing.JButton exitButton;\r\n    private javax.swing.JLabel expenseTrackerLogo;\r\n    private javax.swing.JPanel expenseTrackerLogoContainer;\r\n    private javax.swing.JButton logoutButton;\r\n    private javax.swing.JPanel menuItems;\r\n    private javax.swing.JPanel menuPanel;\r\n    private javax.swing.JPanel modifyTransactionPanelContainer;\r\n    private javax.swing.JTextField resultAmount;\r\n    private java.awt.Label resultAmountLabel;\r\n    private javax.swing.JTextField resultCategory;\r\n    private java.awt.Label resultCategoryLabel;\r\n    private javax.swing.JTextField resultDate;\r\n    private java.awt.Label resultDateLabel;\r\n    private javax.swing.JTextField resultName;\r\n    private java.awt.Label resultNameLabel;\r\n    private java.awt.Label resultTransactionID;\r\n    private java.awt.Label resultTransactionIDLabel;\r\n    private java.awt.Label resultTransactionTypeLabel;\r\n    private javax.swing.JTextField searchBar;\r\n    private java.awt.Button searchButton;\r\n    private javax.swing.JPanel searchResultContainer;\r\n    private java.awt.Label searchTransactionIDButton;\r\n    private java.awt.Button updateTransactionButton;\r\n    // End of variables declaration                   \r\n}\r\n\r\n```\r\n\r\n[Here is the design:](https://i.stack.imgur.com/0oJQA.png)\r\n\r\n[Here is what it looks like when i run it:](https://i.stack.imgur.com/cxjyW.png)\r\n\r\n\r\n\r\nI tried checking if the visitiblity for everything is true, and it was true","title":"JLabel Not Showing up when i run the program, but shows in my GUI builder in NetBeans","body":"<p>I am using Java GUI builder in NetBeans(drag and drop), and I added JLabels, Text Fields and Buttons in a container. However, only Text Fields and Buttons are showing up and not JLabels.</p>\n<pre><code>/*\n * Click nbfs://nbhost/SystemFileSystem/Templates/Licenses/license-default.txt to change this license\n * Click nbfs://nbhost/SystemFileSystem/Templates/GUIForms/JPanel.java to edit this template\n */\npackage View;\n\n/**\n *\n * @author Yash\n */\npublic class ModifyTransactionPanel extends javax.swing.JPanel {\n\n    private MainFrame mainFrame;\n    /**\n     * Creates new form HomePanel\n     */\n    public ModifyTransactionPanel(MainFrame mainFrame) {\n        this.mainFrame = mainFrame;\n        initComponents();\n    }\n\n    /**\n     * This method is called from within the constructor to initialize the form.\n     * WARNING: Do NOT modify this code. The content of this method is always\n     * regenerated by the Form Editor.\n     */\n    @SuppressWarnings(&quot;unchecked&quot;)\n    // &lt;editor-fold defaultstate=&quot;collapsed&quot; desc=&quot;Generated Code&quot;&gt;                          \n    private void initComponents() {\n\n        menuPanel = new javax.swing.JPanel();\n        menuItems = new javax.swing.JPanel();\n        backButton = new javax.swing.JButton();\n        logoutButton = new javax.swing.JButton();\n        exitButton = new javax.swing.JButton();\n        expenseTrackerLogoContainer = new javax.swing.JPanel();\n        expenseTrackerLogo = new javax.swing.JLabel();\n        modifyTransactionPanelContainer = new javax.swing.JPanel();\n        addIncomeTitleLabel = new javax.swing.JLabel();\n        searchBar = new javax.swing.JTextField();\n        searchButton = new java.awt.Button();\n        searchTransactionIDButton = new java.awt.Label();\n        searchResultContainer = new javax.swing.JPanel();\n        resultTransactionID = new java.awt.Label();\n        resultTransactionTypeLabel = new java.awt.Label();\n        resultTransactionIDLabel = new java.awt.Label();\n        resultNameLabel = new java.awt.Label();\n        resultName = new javax.swing.JTextField();\n        resultDateLabel = new java.awt.Label();\n        resultDate = new javax.swing.JTextField();\n        resultCategoryLabel = new java.awt.Label();\n        resultCategory = new javax.swing.JTextField();\n        resultAmountLabel = new java.awt.Label();\n        resultAmount = new javax.swing.JTextField();\n        updateTransactionButton = new java.awt.Button();\n        addIncomeButton1 = new java.awt.Button();\n\n        setLayout(new org.netbeans.lib.awtextra.AbsoluteLayout());\n\n        menuPanel.setBackground(new java.awt.Color(0, 0, 0));\n        menuPanel.setLayout(new org.netbeans.lib.awtextra.AbsoluteLayout());\n\n        menuItems.setBackground(new java.awt.Color(0, 0, 0));\n        menuItems.setFont(new java.awt.Font(&quot;Arial&quot;, 0, 14)); // NOI18N\n        menuItems.setLayout(new java.awt.GridLayout(3, 0));\n\n        backButton.setBackground(new java.awt.Color(0, 0, 0));\n        backButton.setFont(new java.awt.Font(&quot;Arial&quot;, 0, 18)); // NOI18N\n        backButton.setForeground(new java.awt.Color(255, 255, 255));\n        backButton.setText(&quot;Back&quot;);\n        backButton.setBorder(null);\n        backButton.setBorderPainted(false);\n        backButton.setCursor(new java.awt.Cursor(java.awt.Cursor.HAND_CURSOR));\n        menuItems.add(backButton);\n\n        logoutButton.setBackground(new java.awt.Color(0, 0, 0));\n        logoutButton.setFont(new java.awt.Font(&quot;Arial&quot;, 0, 18)); // NOI18N\n        logoutButton.setForeground(new java.awt.Color(255, 255, 255));\n        logoutButton.setText(&quot;Logout&quot;);\n        logoutButton.setBorder(null);\n        logoutButton.setBorderPainted(false);\n        logoutButton.setCursor(new java.awt.Cursor(java.awt.Cursor.HAND_CURSOR));\n        menuItems.add(logoutButton);\n\n        exitButton.setBackground(new java.awt.Color(0, 0, 0));\n        exitButton.setFont(new java.awt.Font(&quot;Arial&quot;, 0, 18)); // NOI18N\n        exitButton.setForeground(new java.awt.Color(255, 255, 255));\n        exitButton.setText(&quot;Exit&quot;);\n        exitButton.setBorder(null);\n        exitButton.setBorderPainted(false);\n        exitButton.setCursor(new java.awt.Cursor(java.awt.Cursor.HAND_CURSOR));\n        exitButton.addActionListener(new java.awt.event.ActionListener() {\n            public void actionPerformed(java.awt.event.ActionEvent evt) {\n                exitButtonActionPerformed(evt);\n            }\n        });\n        menuItems.add(exitButton);\n\n        menuPanel.add(menuItems, new org.netbeans.lib.awtextra.AbsoluteConstraints(0, 270, 370, 730));\n\n        expenseTrackerLogo.setIcon(new javax.swing.ImageIcon(getClass().getResource(&quot;/expenseTrackerLogo.jpg&quot;))); // NOI18N\n        expenseTrackerLogo.setOpaque(true);\n\n        javax.swing.GroupLayout expenseTrackerLogoContainerLayout = new javax.swing.GroupLayout(expenseTrackerLogoContainer);\n        expenseTrackerLogoContainer.setLayout(expenseTrackerLogoContainerLayout);\n        expenseTrackerLogoContainerLayout.setHorizontalGroup(\n            expenseTrackerLogoContainerLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)\n            .addComponent(expenseTrackerLogo, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)\n        );\n        expenseTrackerLogoContainerLayout.setVerticalGroup(\n            expenseTrackerLogoContainerLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)\n            .addComponent(expenseTrackerLogo, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)\n        );\n\n        menuPanel.add(expenseTrackerLogoContainer, new org.netbeans.lib.awtextra.AbsoluteConstraints(0, 0, 370, 270));\n\n        add(menuPanel, new org.netbeans.lib.awtextra.AbsoluteConstraints(0, 0, 370, 1000));\n\n        modifyTransactionPanelContainer.setBackground(new java.awt.Color(255, 255, 255));\n        modifyTransactionPanelContainer.setForeground(new java.awt.Color(0, 0, 0));\n\n        addIncomeTitleLabel.setBackground(new java.awt.Color(255, 255, 255));\n        addIncomeTitleLabel.setFont(new java.awt.Font(&quot;Arial&quot;, 1, 36)); // NOI18N\n        addIncomeTitleLabel.setForeground(new java.awt.Color(0, 0, 0));\n        addIncomeTitleLabel.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);\n        addIncomeTitleLabel.setText(&quot;ModifyTransaction&quot;);\n\n        searchBar.setBackground(new java.awt.Color(255, 255, 255));\n        searchBar.setFont(new java.awt.Font(&quot;Arial&quot;, 0, 14)); // NOI18N\n\n        searchButton.setBackground(new java.awt.Color(0, 0, 0));\n        searchButton.setCursor(new java.awt.Cursor(java.awt.Cursor.HAND_CURSOR));\n        searchButton.setFont(new java.awt.Font(&quot;Arial&quot;, 0, 18)); // NOI18N\n        searchButton.setForeground(new java.awt.Color(255, 255, 255));\n        searchButton.setLabel(&quot;Search&quot;);\n        searchButton.setName(&quot;&quot;); // NOI18N\n        searchButton.addActionListener(new java.awt.event.ActionListener() {\n            public void actionPerformed(java.awt.event.ActionEvent evt) {\n                searchButtonActionPerformed(evt);\n            }\n        });\n\n        searchTransactionIDButton.setFont(new java.awt.Font(&quot;Arial&quot;, 0, 20)); // NOI18N\n        searchTransactionIDButton.setText(&quot;Search Transaction ID&quot;);\n\n        searchResultContainer.setBackground(new java.awt.Color(255, 255, 255));\n        searchResultContainer.setForeground(new java.awt.Color(255, 255, 255));\n\n        resultTransactionID.setAlignment(java.awt.Label.CENTER);\n        resultTransactionID.setFont(new java.awt.Font(&quot;Arial&quot;, 1, 20)); // NOI18N\n        resultTransactionID.setText(&quot;INC000001&quot;);\n\n        resultTransactionTypeLabel.setFont(new java.awt.Font(&quot;Arial&quot;, 1, 20)); // NOI18N\n        resultTransactionTypeLabel.setText(&quot;(Income)&quot;);\n\n        resultTransactionIDLabel.setFont(new java.awt.Font(&quot;Arial&quot;, 0, 20)); // NOI18N\n        resultTransactionIDLabel.setText(&quot;Transaction ID:&quot;);\n\n        resultNameLabel.setFont(new java.awt.Font(&quot;Arial&quot;, 0, 20)); // NOI18N\n        resultNameLabel.setText(&quot;Income Name&quot;);\n\n        resultName.setBackground(new java.awt.Color(255, 255, 255));\n        resultName.setFont(new java.awt.Font(&quot;Arial&quot;, 0, 14)); // NOI18N\n\n        resultDateLabel.setFont(new java.awt.Font(&quot;Arial&quot;, 0, 20)); // NOI18N\n        resultDateLabel.setText(&quot;Date (in dd/mm/yyyy format)&quot;);\n\n        resultDate.setBackground(new java.awt.Color(255, 255, 255));\n        resultDate.setFont(new java.awt.Font(&quot;Arial&quot;, 0, 14)); // NOI18N\n\n        resultCategoryLabel.setFont(new java.awt.Font(&quot;Arial&quot;, 0, 20)); // NOI18N\n        resultCategoryLabel.setText(&quot;Category&quot;);\n\n        resultCategory.setBackground(new java.awt.Color(255, 255, 255));\n        resultCategory.setFont(new java.awt.Font(&quot;Arial&quot;, 0, 14)); // NOI18N\n\n        resultAmountLabel.setFont(new java.awt.Font(&quot;Arial&quot;, 0, 20)); // NOI18N\n        resultAmountLabel.setText(&quot;Amount&quot;);\n\n        resultAmount.setBackground(new java.awt.Color(255, 255, 255));\n        resultAmount.setFont(new java.awt.Font(&quot;Arial&quot;, 0, 14)); // NOI18N\n\n        updateTransactionButton.setBackground(new java.awt.Color(0, 0, 0));\n        updateTransactionButton.setCursor(new java.awt.Cursor(java.awt.Cursor.HAND_CURSOR));\n        updateTransactionButton.setFont(new java.awt.Font(&quot;Arial&quot;, 0, 18)); // NOI18N\n        updateTransactionButton.setForeground(new java.awt.Color(255, 255, 255));\n        updateTransactionButton.setLabel(&quot;Update&quot;);\n        updateTransactionButton.setName(&quot;&quot;); // NOI18N\n        updateTransactionButton.addActionListener(new java.awt.event.ActionListener() {\n            public void actionPerformed(java.awt.event.ActionEvent evt) {\n                updateTransactionButtonActionPerformed(evt);\n            }\n        });\n\n        addIncomeButton1.setBackground(new java.awt.Color(0, 0, 0));\n        addIncomeButton1.setCursor(new java.awt.Cursor(java.awt.Cursor.HAND_CURSOR));\n        addIncomeButton1.setFont(new java.awt.Font(&quot;Arial&quot;, 0, 18)); // NOI18N\n        addIncomeButton1.setForeground(new java.awt.Color(255, 255, 255));\n        addIncomeButton1.setLabel(&quot;Delete&quot;);\n        addIncomeButton1.setName(&quot;&quot;); // NOI18N\n        addIncomeButton1.addActionListener(new java.awt.event.ActionListener() {\n            public void actionPerformed(java.awt.event.ActionEvent evt) {\n                addIncomeButton1ActionPerformed(evt);\n            }\n        });\n\n        javax.swing.GroupLayout searchResultContainerLayout = new javax.swing.GroupLayout(searchResultContainer);\n        searchResultContainer.setLayout(searchResultContainerLayout);\n        searchResultContainerLayout.setHorizontalGroup(\n            searchResultContainerLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)\n            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, searchResultContainerLayout.createSequentialGroup()\n                .addGap(48, 48, 48)\n                .addComponent(updateTransactionButton, javax.swing.GroupLayout.PREFERRED_SIZE, 157, javax.swing.GroupLayout.PREFERRED_SIZE)\n                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 94, Short.MAX_VALUE)\n                .addGroup(searchResultContainerLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)\n                    .addComponent(addIncomeButton1, javax.swing.GroupLayout.Alignment.TRAILING, javax.swing.GroupLayout.PREFERRED_SIZE, 157, javax.swing.GroupLayout.PREFERRED_SIZE)\n                    .addComponent(resultTransactionTypeLabel, javax.swing.GroupLayout.Alignment.TRAILING, javax.swing.GroupLayout.PREFERRED_SIZE, 145, javax.swing.GroupLayout.PREFERRED_SIZE))\n                .addGap(43, 43, 43))\n            .addGroup(searchResultContainerLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)\n                .addGroup(searchResultContainerLayout.createSequentialGroup()\n                    .addGap(46, 46, 46)\n                    .addGroup(searchResultContainerLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)\n                        .addGroup(searchResultContainerLayout.createSequentialGroup()\n                            .addComponent(resultTransactionIDLabel, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)\n                            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)\n                            .addComponent(resultTransactionID, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))\n                        .addComponent(resultAmount, javax.swing.GroupLayout.DEFAULT_SIZE, 406, Short.MAX_VALUE)\n                        .addComponent(resultAmountLabel, javax.swing.GroupLayout.DEFAULT_SIZE, 406, Short.MAX_VALUE)\n                        .addComponent(resultCategory, javax.swing.GroupLayout.DEFAULT_SIZE, 406, Short.MAX_VALUE)\n                        .addComponent(resultCategoryLabel, javax.swing.GroupLayout.DEFAULT_SIZE, 406, Short.MAX_VALUE)\n                        .addComponent(resultDate, javax.swing.GroupLayout.DEFAULT_SIZE, 406, Short.MAX_VALUE)\n                        .addComponent(resultDateLabel, javax.swing.GroupLayout.DEFAULT_SIZE, 406, Short.MAX_VALUE)\n                        .addComponent(resultName, javax.swing.GroupLayout.DEFAULT_SIZE, 406, Short.MAX_VALUE)\n                        .addComponent(resultNameLabel, javax.swing.GroupLayout.DEFAULT_SIZE, 406, Short.MAX_VALUE))\n                    .addContainerGap(47, Short.MAX_VALUE)))\n        );\n        searchResultContainerLayout.setVerticalGroup(\n            searchResultContainerLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)\n            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, searchResultContainerLayout.createSequentialGroup()\n                .addGap(20, 20, 20)\n                .addComponent(resultTransactionTypeLabel, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)\n                .addGap(441, 441, 441)\n                .addGroup(searchResultContainerLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)\n                    .addComponent(updateTransactionButton, javax.swing.GroupLayout.PREFERRED_SIZE, 42, javax.swing.GroupLayout.PREFERRED_SIZE)\n                    .addComponent(addIncomeButton1, javax.swing.GroupLayout.PREFERRED_SIZE, 42, javax.swing.GroupLayout.PREFERRED_SIZE))\n                .addGap(30, 30, 30))\n            .addGroup(searchResultContainerLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)\n                .addGroup(searchResultContainerLayout.createSequentialGroup()\n                    .addGap(22, 22, 22)\n                    .addGroup(searchResultContainerLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)\n                        .addComponent(resultTransactionIDLabel, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)\n                        .addComponent(resultTransactionID, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))\n                    .addGap(28, 28, 28)\n                    .addComponent(resultNameLabel, javax.swing.GroupLayout.PREFERRED_SIZE, 27, Short.MAX_VALUE)\n                    .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)\n                    .addComponent(resultName, javax.swing.GroupLayout.DEFAULT_SIZE, 35, Short.MAX_VALUE)\n                    .addGap(18, 18, 18)\n                    .addComponent(resultDateLabel, javax.swing.GroupLayout.PREFERRED_SIZE, 27, Short.MAX_VALUE)\n                    .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)\n                    .addComponent(resultDate, javax.swing.GroupLayout.DEFAULT_SIZE, 36, Short.MAX_VALUE)\n                    .addGap(24, 24, 24)\n                    .addComponent(resultCategoryLabel, javax.swing.GroupLayout.PREFERRED_SIZE, 27, Short.MAX_VALUE)\n                    .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)\n                    .addComponent(resultCategory, javax.swing.GroupLayout.DEFAULT_SIZE, 36, Short.MAX_VALUE)\n                    .addGap(23, 23, 23)\n                    .addComponent(resultAmountLabel, javax.swing.GroupLayout.DEFAULT_SIZE, 35, Short.MAX_VALUE)\n                    .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)\n                    .addComponent(resultAmount, javax.swing.GroupLayout.DEFAULT_SIZE, 34, Short.MAX_VALUE)\n                    .addGap(121, 121, 121)))\n        );\n\n        javax.swing.GroupLayout modifyTransactionPanelContainerLayout = new javax.swing.GroupLayout(modifyTransactionPanelContainer);\n        modifyTransactionPanelContainer.setLayout(modifyTransactionPanelContainerLayout);\n        modifyTransactionPanelContainerLayout.setHorizontalGroup(\n            modifyTransactionPanelContainerLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)\n            .addGroup(modifyTransactionPanelContainerLayout.createSequentialGroup()\n                .addContainerGap(374, Short.MAX_VALUE)\n                .addGroup(modifyTransactionPanelContainerLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)\n                    .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, modifyTransactionPanelContainerLayout.createSequentialGroup()\n                        .addGroup(modifyTransactionPanelContainerLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)\n                            .addComponent(searchTransactionIDButton, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)\n                            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, modifyTransactionPanelContainerLayout.createSequentialGroup()\n                                .addComponent(searchBar, javax.swing.GroupLayout.PREFERRED_SIZE, 250, javax.swing.GroupLayout.PREFERRED_SIZE)\n                                .addGap(24, 24, 24)\n                                .addComponent(searchButton, javax.swing.GroupLayout.PREFERRED_SIZE, 132, javax.swing.GroupLayout.PREFERRED_SIZE)))\n                        .addGap(350, 350, 350))\n                    .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, modifyTransactionPanelContainerLayout.createSequentialGroup()\n                        .addComponent(addIncomeTitleLabel, javax.swing.GroupLayout.PREFERRED_SIZE, 355, javax.swing.GroupLayout.PREFERRED_SIZE)\n                        .addGap(374, 374, 374))))\n            .addGroup(modifyTransactionPanelContainerLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)\n                .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, modifyTransactionPanelContainerLayout.createSequentialGroup()\n                    .addContainerGap(327, Short.MAX_VALUE)\n                    .addComponent(searchResultContainer, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)\n                    .addContainerGap(304, Short.MAX_VALUE)))\n        );\n        modifyTransactionPanelContainerLayout.setVerticalGroup(\n            modifyTransactionPanelContainerLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)\n            .addGroup(modifyTransactionPanelContainerLayout.createSequentialGroup()\n                .addGap(90, 90, 90)\n                .addComponent(addIncomeTitleLabel, javax.swing.GroupLayout.PREFERRED_SIZE, 87, javax.swing.GroupLayout.PREFERRED_SIZE)\n                .addGap(37, 37, 37)\n                .addComponent(searchTransactionIDButton, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)\n                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)\n                .addGroup(modifyTransactionPanelContainerLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)\n                    .addComponent(searchBar, javax.swing.GroupLayout.DEFAULT_SIZE, 35, Short.MAX_VALUE)\n                    .addComponent(searchButton, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))\n                .addGap(713, 713, 713))\n            .addGroup(modifyTransactionPanelContainerLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)\n                .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, modifyTransactionPanelContainerLayout.createSequentialGroup()\n                    .addContainerGap(309, Short.MAX_VALUE)\n                    .addComponent(searchResultContainer, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)\n                    .addContainerGap(130, Short.MAX_VALUE)))\n        );\n\n        add(modifyTransactionPanelContainer, new org.netbeans.lib.awtextra.AbsoluteConstraints(370, 0, 1130, 1000));\n    }// &lt;/editor-fold&gt;                        \n\n    private void exitButtonActionPerformed(java.awt.event.ActionEvent evt) {                                           \n        // TODO add your handling code here:\n        System.exit(0);\n    }                                          \n\n    private void updateTransactionButtonActionPerformed(java.awt.event.ActionEvent evt) {                                                        \n        // TODO add your handling code here:\n        mainFrame.showTransactionPanel();\n    }                                                       \n\n    private void searchButtonActionPerformed(java.awt.event.ActionEvent evt) {                                             \n        // TODO add your handling code here:\n    }                                            \n\n    private void addIncomeButton1ActionPerformed(java.awt.event.ActionEvent evt) {                                                 \n        // TODO add your handling code here:\n    }                                                \n\n\n    // Variables declaration - do not modify                     \n    private java.awt.Button addIncomeButton1;\n    private javax.swing.JLabel addIncomeTitleLabel;\n    private javax.swing.JButton backButton;\n    private javax.swing.JButton exitButton;\n    private javax.swing.JLabel expenseTrackerLogo;\n    private javax.swing.JPanel expenseTrackerLogoContainer;\n    private javax.swing.JButton logoutButton;\n    private javax.swing.JPanel menuItems;\n    private javax.swing.JPanel menuPanel;\n    private javax.swing.JPanel modifyTransactionPanelContainer;\n    private javax.swing.JTextField resultAmount;\n    private java.awt.Label resultAmountLabel;\n    private javax.swing.JTextField resultCategory;\n    private java.awt.Label resultCategoryLabel;\n    private javax.swing.JTextField resultDate;\n    private java.awt.Label resultDateLabel;\n    private javax.swing.JTextField resultName;\n    private java.awt.Label resultNameLabel;\n    private java.awt.Label resultTransactionID;\n    private java.awt.Label resultTransactionIDLabel;\n    private java.awt.Label resultTransactionTypeLabel;\n    private javax.swing.JTextField searchBar;\n    private java.awt.Button searchButton;\n    private javax.swing.JPanel searchResultContainer;\n    private java.awt.Label searchTransactionIDButton;\n    private java.awt.Button updateTransactionButton;\n    // End of variables declaration                   \n}\n\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/0oJQA.png\" rel=\"nofollow noreferrer\">Here is the design:</a></p>\n<p><a href=\"https://i.stack.imgur.com/cxjyW.png\" rel=\"nofollow noreferrer\">Here is what it looks like when i run it:</a></p>\n<p>I tried checking if the visitiblity for everything is true, and it was true</p>\n"},{"tags":["java","random","java-17"],"comments":[{"owner":{"account_id":8321997,"reputation":522,"user_id":6253321,"accept_rate":82,"display_name":"cpp beginner"},"score":0,"creation_date":1659288565,"post_id":73185029,"comment_id":129254082,"body_markdown":"I&#39;m fairly sure the answer is that you can&#39;t. The API also doesn&#39;t allow you to create efficient, thread-safe implementations (https://stackoverflow.com/questions/73021220/thread-safe-randomgenerator-in-java-17) - i.e. `ThreadLocalRandom` is now considered &quot;legacy&quot;, but no suitable replacement has been added for the problem `ThreadLocalRandom` was introduced to solve. I&#39;m really struggling to understand how this class was considered good enough for inclusion in the JDK.","body":"I&#39;m fairly sure the answer is that you can&#39;t. The API also doesn&#39;t allow you to create efficient, thread-safe implementations (<a href=\"https://stackoverflow.com/questions/73021220/thread-safe-randomgenerator-in-java-17\" title=\"thread safe randomgenerator in java 17\">stackoverflow.com/questions/73021220/&hellip;</a>) - i.e. <code>ThreadLocalRandom</code> is now considered &quot;legacy&quot;, but no suitable replacement has been added for the problem <code>ThreadLocalRandom</code> was introduced to solve. I&#39;m really struggling to understand how this class was considered good enough for inclusion in the JDK."},{"owner":{"account_id":8321997,"reputation":522,"user_id":6253321,"accept_rate":82,"display_name":"cpp beginner"},"score":0,"creation_date":1659288885,"post_id":73185029,"comment_id":129254150,"body_markdown":"Yes I&#39;ve read the source code too, but that&#39;s an implementation detail, not part of the public API. i.e. that approach could break in the next version of Java. What I really want to understand is why there isn&#39;t a `isLongSeedSupported` method on the interface.","body":"Yes I&#39;ve read the source code too, but that&#39;s an implementation detail, not part of the public API. i.e. that approach could break in the next version of Java. What I really want to understand is why there isn&#39;t a <code>isLongSeedSupported</code> method on the interface."},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":2,"creation_date":1659298937,"post_id":73185029,"comment_id":129256237,"body_markdown":"Some methods of RandomGeneratorFactory hint whether a seed would be effective.  I’m not certain, but I think if isHardware or isStochastic returns true, a seed is not used.  I think if isStatistical returns true or period() returns a nonzero value, the instance likely uses a seed.","body":"Some methods of RandomGeneratorFactory hint whether a seed would be effective.  I’m not certain, but I think if isHardware or isStochastic returns true, a seed is not used.  I think if isStatistical returns true or period() returns a nonzero value, the instance likely uses a seed."},{"owner":{"account_id":8321997,"reputation":522,"user_id":6253321,"accept_rate":82,"display_name":"cpp beginner"},"score":0,"creation_date":1659299907,"post_id":73185029,"comment_id":129256381,"body_markdown":"Those rules certainly seem to work for the 13 factories I&#39;m getting from `RandomGeneratorFactory.all()`. The only one that doesn&#39;t support a seed is `SecureRandom` and the other 12 have `isHardware=false`, `isStochastic=false`, `isStatistical=true` and `period&gt;0`. Such a bizarre API though.","body":"Those rules certainly seem to work for the 13 factories I&#39;m getting from <code>RandomGeneratorFactory.all()</code>. The only one that doesn&#39;t support a seed is <code>SecureRandom</code> and the other 12 have <code>isHardware=false</code>, <code>isStochastic=false</code>, <code>isStatistical=true</code> and <code>period&gt;0</code>. Such a bizarre API though."},{"owner":{"account_id":1416522,"reputation":91364,"user_id":3553087,"display_name":"Brian Goetz"},"score":4,"creation_date":1659540505,"post_id":73185029,"comment_id":129319716,"body_markdown":"Look at `SplittableRandom`, which is designed to go hand in hand with parallel decomposition.","body":"Look at <code>SplittableRandom</code>, which is designed to go hand in hand with parallel decomposition."},{"owner":{"account_id":8321997,"reputation":522,"user_id":6253321,"accept_rate":82,"display_name":"cpp beginner"},"score":0,"creation_date":1659577227,"post_id":73185029,"comment_id":129329623,"body_markdown":"Thanks, that does help as I can use the constructor of `SplittableRandom` with a `long` seed (which I wasn&#39;t aware of before). Although, as `SplittableRandom` is also now described as &quot;legacy&quot; (https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/random/package-summary.html#algorithms), it does feel a bit odd that it&#39;s still necessary.","body":"Thanks, that does help as I can use the constructor of <code>SplittableRandom</code> with a <code>long</code> seed (which I wasn&#39;t aware of before). Although, as <code>SplittableRandom</code> is also now described as &quot;legacy&quot; (<a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/random/package-summary.html#algorithms\" rel=\"nofollow noreferrer\">docs.oracle.com/en/java/javase/17/docs/api/java.base/java/u&zwnj;&#8203;til/&hellip;</a>), it does feel a bit odd that it&#39;s still necessary."}],"answers":[{"tags":[],"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1698200342,"creation_date":1698198195,"answer_id":77356191,"question_id":73185029,"body_markdown":"Probably, this is not the answer you want, but I became curious after reading your question and thought: Why not just probe the generator in question? Hence, I created a little scratch file with a heuristic approach:\r\n\r\n```java\r\nimport java.util.List;\r\nimport java.util.random.RandomGenerator;\r\nimport java.util.random.RandomGeneratorFactory;\r\n\r\nimport static java.util.stream.Collectors.toList;\r\n\r\nclass RandomGeneratorTool_73185029 {\r\n  public static void main(String[] args) {\r\n    RandomGeneratorFactory.all()\r\n      .map(factory -&gt; String.format(&quot;%-21s -&gt; %sseedable&quot;, factory.name(), isSeedable(factory) ? &quot;&quot; : &quot;not &quot;))\r\n      .forEach(System.out::println);\r\n  }\r\n\r\n  public static boolean isSeedable(RandomGeneratorFactory&lt;RandomGenerator&gt; factory) {\r\n    final int ROUNDS = 3, NUMBERS_PER_ROUND = 100, SEED = 123;\r\n    List&lt;Integer&gt;[] randomNumbers = new List[ROUNDS];\r\n    for (int round = 0; round &lt; ROUNDS; round++) {\r\n      randomNumbers[round] = factory.create(SEED).ints(NUMBERS_PER_ROUND).boxed().collect(toList());\r\n      if (round &gt; 0 &amp;&amp; !randomNumbers[round - 1].equals(randomNumbers[round]))\r\n        return false;\r\n    }\r\n    return true;\r\n  }\r\n}\r\n```\r\n\r\nOn JDK 21, this prints:\r\n\r\n```none\r\nL32X64MixRandom       -&gt; seedable\r\nL128X128MixRandom     -&gt; seedable\r\nL64X128MixRandom      -&gt; seedable\r\nSecureRandom          -&gt; not seedable\r\nL128X1024MixRandom    -&gt; seedable\r\nL64X128StarStarRandom -&gt; seedable\r\nXoshiro256PlusPlus    -&gt; seedable\r\nL64X256MixRandom      -&gt; seedable\r\nRandom                -&gt; seedable\r\nXoroshiro128PlusPlus  -&gt; seedable\r\nL128X256MixRandom     -&gt; seedable\r\nSplittableRandom      -&gt; seedable\r\nL64X1024MixRandom     -&gt; seedable\r\n```\r\n","title":"Seeded RandomGenerators in Java 17","body":"<p>Probably, this is not the answer you want, but I became curious after reading your question and thought: Why not just probe the generator in question? Hence, I created a little scratch file with a heuristic approach:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.List;\nimport java.util.random.RandomGenerator;\nimport java.util.random.RandomGeneratorFactory;\n\nimport static java.util.stream.Collectors.toList;\n\nclass RandomGeneratorTool_73185029 {\n  public static void main(String[] args) {\n    RandomGeneratorFactory.all()\n      .map(factory -&gt; String.format(&quot;%-21s -&gt; %sseedable&quot;, factory.name(), isSeedable(factory) ? &quot;&quot; : &quot;not &quot;))\n      .forEach(System.out::println);\n  }\n\n  public static boolean isSeedable(RandomGeneratorFactory&lt;RandomGenerator&gt; factory) {\n    final int ROUNDS = 3, NUMBERS_PER_ROUND = 100, SEED = 123;\n    List&lt;Integer&gt;[] randomNumbers = new List[ROUNDS];\n    for (int round = 0; round &lt; ROUNDS; round++) {\n      randomNumbers[round] = factory.create(SEED).ints(NUMBERS_PER_ROUND).boxed().collect(toList());\n      if (round &gt; 0 &amp;&amp; !randomNumbers[round - 1].equals(randomNumbers[round]))\n        return false;\n    }\n    return true;\n  }\n}\n</code></pre>\n<p>On JDK 21, this prints:</p>\n<pre class=\"lang-none prettyprint-override\"><code>L32X64MixRandom       -&gt; seedable\nL128X128MixRandom     -&gt; seedable\nL64X128MixRandom      -&gt; seedable\nSecureRandom          -&gt; not seedable\nL128X1024MixRandom    -&gt; seedable\nL64X128StarStarRandom -&gt; seedable\nXoshiro256PlusPlus    -&gt; seedable\nL64X256MixRandom      -&gt; seedable\nRandom                -&gt; seedable\nXoroshiro128PlusPlus  -&gt; seedable\nL128X256MixRandom     -&gt; seedable\nSplittableRandom      -&gt; seedable\nL64X1024MixRandom     -&gt; seedable\n</code></pre>\n"}],"owner":{"account_id":8321997,"reputation":522,"user_id":6253321,"accept_rate":82,"display_name":"cpp beginner"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":502,"favorite_count":0,"down_vote_count":0,"up_vote_count":13,"answer_count":1,"score":13,"last_activity_date":1698200342,"creation_date":1659284976,"question_id":73185029,"body_markdown":"Java 17 has introduced a new [`RandomGeneratorFactory`](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/random/RandomGeneratorFactory.html) class for instantiating random number generators. The `create(long)` method is described as\r\n\r\n&gt; Create an instance of `RandomGenerator` based on algorithm chosen providing a starting long seed. If long seed is not supported by an algorithm then the no argument form of create is used.\r\n\r\nHowever there doesn&#39;t seem to be a method of `RandomGeneratorFactory` that can be used to determine if a `long` seed is supported. How is it possible to use the new API to obtain an instance of `RandomGenerator` that is guaranteed to be created using a supplied `long` seed?  ","title":"Seeded RandomGenerators in Java 17","body":"<p>Java 17 has introduced a new <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/random/RandomGeneratorFactory.html\" rel=\"noreferrer\"><code>RandomGeneratorFactory</code></a> class for instantiating random number generators. The <code>create(long)</code> method is described as</p>\n<blockquote>\n<p>Create an instance of <code>RandomGenerator</code> based on algorithm chosen providing a starting long seed. If long seed is not supported by an algorithm then the no argument form of create is used.</p>\n</blockquote>\n<p>However there doesn't seem to be a method of <code>RandomGeneratorFactory</code> that can be used to determine if a <code>long</code> seed is supported. How is it possible to use the new API to obtain an instance of <code>RandomGenerator</code> that is guaranteed to be created using a supplied <code>long</code> seed?</p>\n"},{"tags":["java","json","junit","jsonpath","hamcrest"],"answers":[{"comments":[{"owner":{"account_id":1911255,"reputation":454,"user_id":1725013,"display_name":"Adam Kučera"},"score":0,"creation_date":1496383806,"post_id":44307545,"comment_id":75648875,"body_markdown":"It might return the JsonArray because it cannot ensure, that there will be only one value matching the expression.","body":"It might return the JsonArray because it cannot ensure, that there will be only one value matching the expression."}],"tags":[],"owner":{"account_id":1911255,"reputation":454,"user_id":1725013,"display_name":"Adam Kučera"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1496320069,"creation_date":1496320069,"answer_id":44307545,"question_id":44306797,"body_markdown":"In the further investigation, I actually found that jsonPath somehow converts the obtained `true` value to a `JsonArray` with one item and therefore it is not possible to match it with `is(true)` matcher. I am not sure why JsonPath does so.\r\n\r\nI found the following working workaround using `hasItem` matcher instead:\r\n\r\n    .andExpect(jsonPath(&quot;$.trips[?(@.employee.login==&#39;joe&#39;)].employee.contractor&quot;, hasItem(true)))\r\n    .andExpect(jsonPath(&quot;$.trips[?(@.employee.login==&#39;joe&#39;)].employee.contractor&quot;, not(hasItem(false))))","title":"Matching Boolean true value using jsonPath","body":"<p>In the further investigation, I actually found that jsonPath somehow converts the obtained <code>true</code> value to a <code>JsonArray</code> with one item and therefore it is not possible to match it with <code>is(true)</code> matcher. I am not sure why JsonPath does so.</p>\n\n<p>I found the following working workaround using <code>hasItem</code> matcher instead:</p>\n\n<pre><code>.andExpect(jsonPath(\"$.trips[?(@.employee.login=='joe')].employee.contractor\", hasItem(true)))\n.andExpect(jsonPath(\"$.trips[?(@.employee.login=='joe')].employee.contractor\", not(hasItem(false))))\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1810495,"reputation":2544,"user_id":1646676,"accept_rate":40,"display_name":"Neil"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698200093,"creation_date":1698200093,"answer_id":77356273,"question_id":44306797,"body_markdown":"You can use ==0 for true or ==1 for false\r\n\r\n   \r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n    {\r\n      MyArray: [\r\n        {\r\n          IsTrueOrFalse: true,\r\n          Item: &quot;1st Item&quot;\r\n        },\r\n        {\r\n          IsTrueOrFalse: false,\r\n          Item: &quot;2nd Item&quot;\r\n        }\r\n      ]\r\n    }\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n$..MyArray[?(@.CheckIfTrueOrFalse==0)].Item returns [ &quot;1st Item&quot; ]","title":"Matching Boolean true value using jsonPath","body":"<p>You can use ==0 for true or ==1 for false</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>{\n  MyArray: [\n    {\n      IsTrueOrFalse: true,\n      Item: \"1st Item\"\n    },\n    {\n      IsTrueOrFalse: false,\n      Item: \"2nd Item\"\n    }\n  ]\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n<p>$..MyArray[?(@.CheckIfTrueOrFalse==0)].Item returns [ &quot;1st Item&quot; ]</p>\n"}],"owner":{"account_id":1911255,"reputation":454,"user_id":1725013,"display_name":"Adam Kučera"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6485,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":44307545,"answer_count":2,"score":4,"last_activity_date":1698200093,"creation_date":1496317964,"question_id":44306797,"body_markdown":"I am trying to write a JUnit test, which checks the value of received JSON. I access these values in the JSON using jsonPath. I want to check if a value is `true`. For simple jsonPaths, it works for me, but when I write more complex jsonPath query, it does not and I am getting this Assertion Error:\r\n\r\n    Expected: is &lt;true&gt;\r\n    but: was &lt;[true]&gt;\r\n\r\n**My JSON:**\r\n\r\n    {...\r\n    ,&quot;trips&quot;:\r\n      [\r\n        {...\r\n        ,&quot;employee&quot;:{&quot;name&quot;:&quot;Ordinary Joe&quot;,&quot;login&quot;:&quot;joe&quot;,&quot;contractor&quot;:true}\r\n        ,...\r\n        },\r\n        ...\r\n      ],\r\n     ...\r\n    }\r\n\r\n**Problematic assertion**\r\n\r\n    .andExpect(jsonPath(&quot;$.trips[?(@.employee.login==&#39;joe&#39;)].employee.contractor&quot;, is(true)));\r\n\r\n**What I&#39;ve tried**\r\n\r\nI tried to match the value also with `new Boolean(true)`, `boolean[]` array with one `true` value and after examination of `is()` matcher also with `String.valueOf(true)` however it also did not match.\r\n\r\n**My question**\r\n\r\nHow should I correctly match this `true` value? What exactly these `[]` braces mean in the test output?","title":"Matching Boolean true value using jsonPath","body":"<p>I am trying to write a JUnit test, which checks the value of received JSON. I access these values in the JSON using jsonPath. I want to check if a value is <code>true</code>. For simple jsonPaths, it works for me, but when I write more complex jsonPath query, it does not and I am getting this Assertion Error:</p>\n\n<pre><code>Expected: is &lt;true&gt;\nbut: was &lt;[true]&gt;\n</code></pre>\n\n<p><strong>My JSON:</strong></p>\n\n<pre><code>{...\n,\"trips\":\n  [\n    {...\n    ,\"employee\":{\"name\":\"Ordinary Joe\",\"login\":\"joe\",\"contractor\":true}\n    ,...\n    },\n    ...\n  ],\n ...\n}\n</code></pre>\n\n<p><strong>Problematic assertion</strong></p>\n\n<pre><code>.andExpect(jsonPath(\"$.trips[?(@.employee.login=='joe')].employee.contractor\", is(true)));\n</code></pre>\n\n<p><strong>What I've tried</strong></p>\n\n<p>I tried to match the value also with <code>new Boolean(true)</code>, <code>boolean[]</code> array with one <code>true</code> value and after examination of <code>is()</code> matcher also with <code>String.valueOf(true)</code> however it also did not match.</p>\n\n<p><strong>My question</strong></p>\n\n<p>How should I correctly match this <code>true</code> value? What exactly these <code>[]</code> braces mean in the test output?</p>\n"},{"tags":["java","spring","oracle","hibernate"],"comments":[{"owner":{"account_id":2792262,"reputation":163877,"user_id":2402272,"accept_rate":85,"display_name":"John Bollinger"},"score":1,"creation_date":1698149595,"post_id":77351912,"comment_id":136366065,"body_markdown":"The first thing I notice is that you&#39;re trying to set values for a bunch of named parameters that do not actually appear in the query text.  Since your debug log seems to show parameters being successfully bound, I conclude that you have not shown us the code that is actually erroring.","body":"The first thing I notice is that you&#39;re trying to set values for a bunch of named parameters that do not actually appear in the query text.  Since your debug log seems to show parameters being successfully bound, I conclude that you have not shown us the code that is actually erroring."},{"owner":{"account_id":23171414,"reputation":195,"user_id":17270610,"display_name":"dynamo"},"score":1,"creation_date":1698150383,"post_id":77351912,"comment_id":136366192,"body_markdown":"ah my bad, i copied over the re-formatted query i was running in sql dev. thats it fixed now","body":"ah my bad, i copied over the re-formatted query i was running in sql dev. thats it fixed now"},{"owner":{"account_id":449256,"reputation":2120,"user_id":843943,"accept_rate":75,"display_name":"Grim"},"score":0,"creation_date":1698155601,"post_id":77351912,"comment_id":136367369,"body_markdown":"Have you tried to use addRoot instead of addEntity? Just a wild guess.","body":"Have you tried to use addRoot instead of addEntity? Just a wild guess."},{"owner":{"account_id":23171414,"reputation":195,"user_id":17270610,"display_name":"dynamo"},"score":0,"creation_date":1698156498,"post_id":77351912,"comment_id":136367604,"body_markdown":"@Grim added it and didnt work sadly","body":"@Grim added it and didnt work sadly"},{"owner":{"account_id":2792262,"reputation":163877,"user_id":2402272,"accept_rate":85,"display_name":"John Bollinger"},"score":0,"creation_date":1698157310,"post_id":77351912,"comment_id":136367778,"body_markdown":"Just to be clear: do you confirm that entity-based access via the Hibernate session or a JPA EntityManager works correctly for entities mapped to this table?","body":"Just to be clear: do you confirm that entity-based access via the Hibernate session or a JPA EntityManager works correctly for entities mapped to this table?"},{"owner":{"account_id":23171414,"reputation":195,"user_id":17270610,"display_name":"dynamo"},"score":0,"creation_date":1698157461,"post_id":77351912,"comment_id":136367818,"body_markdown":"@JohnBollinger yeah it works fine for other queries. It just happens to be this query that doesnt work. I managed to get it to run without errors but it brings back an empty list which isnt correct so not exactly much further - using a named query in my hbm.xml mapping - can post if youd like to see","body":"@JohnBollinger yeah it works fine for other queries. It just happens to be this query that doesnt work. I managed to get it to run without errors but it brings back an empty list which isnt correct so not exactly much further - using a named query in my hbm.xml mapping - can post if youd like to see"},{"owner":{"account_id":2792262,"reputation":163877,"user_id":2402272,"accept_rate":85,"display_name":"John Bollinger"},"score":0,"creation_date":1698157997,"post_id":77351912,"comment_id":136367935,"body_markdown":"You seem to be querying the table of a polymorphic entity hierarchy mapped using the single-table strategy.  Does the `SELECT` list contain all the columns that are mapped to *any* of the polymorphic entity classes involved?  Because the error message could indicate that an expected column is missing from the results, as opposed to one of those named in the query being wrong.  You need at least all the columns required by any of the concrete entity types that are actually selected.","body":"You seem to be querying the table of a polymorphic entity hierarchy mapped using the single-table strategy.  Does the <code>SELECT</code> list contain all the columns that are mapped to <i>any</i> of the polymorphic entity classes involved?  Because the error message could indicate that an expected column is missing from the results, as opposed to one of those named in the query being wrong.  You need at least all the columns required by any of the concrete entity types that are actually selected."},{"owner":{"account_id":23171414,"reputation":195,"user_id":17270610,"display_name":"dynamo"},"score":1,"creation_date":1698158613,"post_id":77351912,"comment_id":136368054,"body_markdown":"there is a subclass `AbstractNumericDataPoint` which has the field private `DataPointDetails dataPointDetails;` - this is mapped in the xml mapping but it isnt a column in the table `DATA_POINT` - it is in another table `DATA_POINT_NUMERIC` - could this be causing the issue? i have updated the end of my post with more of the mapping xml file","body":"there is a subclass <code>AbstractNumericDataPoint</code> which has the field private <code>DataPointDetails dataPointDetails;</code> - this is mapped in the xml mapping but it isnt a column in the table <code>DATA_POINT</code> - it is in another table <code>DATA_POINT_NUMERIC</code> - could this be causing the issue? i have updated the end of my post with more of the mapping xml file"}],"answers":[{"comments":[{"owner":{"account_id":23171414,"reputation":195,"user_id":17270610,"display_name":"dynamo"},"score":0,"creation_date":1698225413,"post_id":77356261,"comment_id":136376987,"body_markdown":"Hey, this was really useful and did help but i ended up figuring out that i needed to have the proxy=&quot;...&quot; attribute on my subclasses within the hbm.xml file.","body":"Hey, this was really useful and did help but i ended up figuring out that i needed to have the proxy=&quot;...&quot; attribute on my subclasses within the hbm.xml file."}],"tags":[],"owner":{"account_id":2792262,"reputation":163877,"user_id":2402272,"accept_rate":85,"display_name":"John Bollinger"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1698199791,"creation_date":1698199791,"answer_id":77356261,"question_id":77351912,"body_markdown":"You are selecting entities from a polymorphic entity hierarchy that is mapped using the table-per-class strategy.  To do this successfully with a native SQL query you will need to properly (outer) join all the tables for all the classes in the whole polymorphic hierarchy.  Otherwise, your result set does not contain all the columns needed to construct the wanted result entities.\r\n\r\nThat could get pretty nasty if you have many classes in the hierarchy.  It&#39;s unclear, however, why you are writing this as an SQL query instead of an HQL query.  With HQL, Hibernate would construct the needed join and fill in all the needed column names for you. Something along these lines, for example:\r\n```\r\n        Query q = getSession().createQuery(\r\n            &quot;from DataPoint as p1\r\n             where p1.name = :name\r\n                 and p1.product = :product\r\n                 and p1.networkObject.id = :networkObject\r\n                 and p1.dateEffective = (\r\n                     select max(p2.dateEffective) \r\n                     from DataPoint as p2 \r\n                     where p2.name = :name \r\n                         and p2.product = :product \r\n                         and p2.networkObject.id = :networkObject \r\n                         and p2.dateEffective &lt;= :gasDay\r\n                 ) \r\n             order by p1.id&quot;)\r\n                .setParameter(&quot;name&quot;, name)\r\n                .setParameter(&quot;gasDay&quot;, convertToDate(date))\r\n                .setParameter(&quot;networkObject&quot;, networkObject)\r\n                .setParameter(&quot;product&quot;, product.name().toString());\r\n    \r\n        List&lt;DataPoint&gt; compositionDataPoints = (List&lt;DataPoint&gt;) q.getResultList();\r\n```\r\nThat does make some assumptions about your entity classes and their mappings, so you may need to adjust it.\r\n\r\nAlso, Hibernate can do correlated subqueries, but you don&#39;t need one in this case because all the correlated columns are already constrained to specific values.  In the above example, therefore, I&#39;ve converted your correlated subquery into an uncorrelated one.","title":"Hibernate query invalid column name error","body":"<p>You are selecting entities from a polymorphic entity hierarchy that is mapped using the table-per-class strategy.  To do this successfully with a native SQL query you will need to properly (outer) join all the tables for all the classes in the whole polymorphic hierarchy.  Otherwise, your result set does not contain all the columns needed to construct the wanted result entities.</p>\n<p>That could get pretty nasty if you have many classes in the hierarchy.  It's unclear, however, why you are writing this as an SQL query instead of an HQL query.  With HQL, Hibernate would construct the needed join and fill in all the needed column names for you. Something along these lines, for example:</p>\n<pre><code>        Query q = getSession().createQuery(\n            &quot;from DataPoint as p1\n             where p1.name = :name\n                 and p1.product = :product\n                 and p1.networkObject.id = :networkObject\n                 and p1.dateEffective = (\n                     select max(p2.dateEffective) \n                     from DataPoint as p2 \n                     where p2.name = :name \n                         and p2.product = :product \n                         and p2.networkObject.id = :networkObject \n                         and p2.dateEffective &lt;= :gasDay\n                 ) \n             order by p1.id&quot;)\n                .setParameter(&quot;name&quot;, name)\n                .setParameter(&quot;gasDay&quot;, convertToDate(date))\n                .setParameter(&quot;networkObject&quot;, networkObject)\n                .setParameter(&quot;product&quot;, product.name().toString());\n    \n        List&lt;DataPoint&gt; compositionDataPoints = (List&lt;DataPoint&gt;) q.getResultList();\n</code></pre>\n<p>That does make some assumptions about your entity classes and their mappings, so you may need to adjust it.</p>\n<p>Also, Hibernate can do correlated subqueries, but you don't need one in this case because all the correlated columns are already constrained to specific values.  In the above example, therefore, I've converted your correlated subquery into an uncorrelated one.</p>\n"}],"owner":{"account_id":23171414,"reputation":195,"user_id":17270610,"display_name":"dynamo"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":87,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1698199791,"creation_date":1698149194,"question_id":77351912,"body_markdown":"I am trying to get a query working within my application. The query runs fine in sqlDeveloper and brings back the expected data. When i run it through my application, it dies and i get the error:\r\n\r\n```\r\nCaused by: java.sql.SQLException: Invalid column name\r\n```\r\n\r\nthis is the query itself - i have formatted the string for the query to make it more readable for this post\r\n```\r\n\t@SuppressWarnings(&quot;unchecked&quot;)\r\n\t@Override\r\n\tpublic List&lt;DataPoint&gt; findEffectiveByNetworkObjectAndNameAndProduct(NetworkObject&lt;Long&gt; networkObject, String name, Product product, LocalDate date) {\r\n\t\tQuery q = getSession().createSQLQuery(\r\n\t\t    &quot;select c1.ID, c1.NETWORK_OBJECT_ID, c1.NAME, c1.PRODUCT, c1.DESCRIPTION, c1.DATE_EFFECTIVE, c1.DATA_POINT_TYPE\r\n\t\t\t\tfrom DATA_POINT c1 \r\n\t\t\t\twhere c1.NAME = :name\r\n\t\t\t\tand c1.PRODUCT = :product\r\n\t\t\t\tand c1.NETWORK_OBJECT_ID = :networkObject\r\n\t\t\t\tand c1.DATE_EFFECTIVE = \r\n\t\t\t\t\t(select max(c2.DATE_EFFECTIVE) \r\n\t\t\t\t\tfrom DATA_POINT c2 \r\n\t\t\t\t\twhere c2.NAME = c1.NAME \r\n\t\t\t\t\tand c2.PRODUCT = c1.PRODUCT \r\n\t\t\t\t\tand c2.NETWORK_OBJECT_ID = c1.NETWORK_OBJECT_ID \r\n\t\t\t\t\tand c2.DATE_EFFECTIVE &lt;= :gasDay) \r\n\t\t\t\torder by c1.ID\r\n\t\t\t&quot;)\r\n\t\t\t    .addEntity(AbstractDataPoint.class)\r\n\t\t\t    .setParameter(&quot;name&quot;, name)\r\n\t\t\t    .setParameter(&quot;gasDay&quot;, convertToDate(date))\r\n\t\t\t    .setParameter(&quot;networkObject&quot;, networkObject)\r\n\t\t\t    .setParameter(&quot;product&quot;, product.name().toString());\r\n\t\t\r\n\t\r\n\t\tList&lt;DataPoint&gt; compositionDataPoints = (List&lt;DataPoint&gt;) q.getResultList();\r\n\r\n\t\treturn compositionDataPoints ;\r\n\t}\r\n ```\r\n\r\nHere is the relevant mapping i have done \r\n```\r\n&lt;hibernate-mapping default-access=&quot;field&quot;&gt;\r\n    &lt;typedef name=&quot;Product&quot; class=&quot;com.application.core.dao.hibernate.usertype.EnumUserType&quot;&gt;\r\n        &lt;param name=&quot;enumClassName&quot;&gt;com.application.data.domain.datapoint.Product&lt;/param&gt;\r\n    &lt;/typedef&gt;\r\n    &lt;typedef name=&quot;Unit&quot; class=&quot;com.application.core.dao.hibernate.usertype.EnumUserType&quot;&gt;\r\n        &lt;param name=&quot;enumClassName&quot;&gt;com.application.data.domain.measurement.Unit&lt;/param&gt;\r\n    &lt;/typedef&gt;\r\n    &lt;class table=&quot;DATA_POINT&quot; \r\n        name=&quot;com.application.data.domain.datapoint.AbstractDataPoint&quot; \r\n        proxy=&quot;com.application.data.domain.datapoint.DataPoint&quot;\r\n        abstract=&quot;true&quot;\r\n    &gt;\r\n        &lt;id name=&quot;id&quot; type=&quot;java.lang.Long&quot;&gt;\r\n            &lt;column name=&quot;ID&quot; precision=&quot;20&quot; scale=&quot;0&quot; not-null=&quot;true&quot; /&gt;\r\n            &lt;generator class=&quot;sequence&quot;&gt;\r\n                &lt;param name=&quot;sequence&quot;&gt;DATA_POINT_ID_SEQ&lt;/param&gt;\r\n            &lt;/generator&gt;\r\n        &lt;/id&gt;\r\n        &lt;discriminator column=&quot;DATA_POINT_TYPE&quot; type=&quot;java.lang.String&quot; /&gt;\r\n        &lt;property name=&quot;name&quot; type=&quot;string&quot;&gt;\r\n            &lt;column name=&quot;NAME&quot; length=&quot;64&quot; not-null=&quot;true&quot; /&gt;\r\n        &lt;/property&gt;\r\n        &lt;property name=&quot;product&quot; type=&quot;Product&quot;&gt;\r\n            &lt;column name=&quot;PRODUCT&quot; length=&quot;16&quot; not-null=&quot;false&quot; /&gt;\r\n        &lt;/property&gt;\r\n        &lt;property name=&quot;description&quot; type=&quot;java.lang.String&quot;&gt;\r\n            &lt;column name=&quot;DESCRIPTION&quot; length=&quot;128&quot; not-null=&quot;true&quot; /&gt;\r\n        &lt;/property&gt;\r\n        &lt;many-to-one name=&quot;networkObject&quot; class=&quot;com.application.network.domain.AbstractNetworkObject&quot;&gt;\r\n            &lt;column name=&quot;NETWORK_OBJECT_ID&quot; not-null=&quot;false&quot;/&gt;\r\n        &lt;/many-to-one&gt;\r\n        &lt;property name=&quot;dateEffective&quot; type=&quot;LocalDate&quot;&gt;\r\n            &lt;column name=&quot;DATE_EFFECTIVE&quot; not-null=&quot;true&quot; /&gt;\r\n        &lt;/property&gt;\r\n```\r\n\r\nThese are the exact column names in the corresponding table in oracle\r\n\r\n``` ID, NETWORK_OBJECT_ID, NAME, PRODUCT, DESCRIPTION, DATE_EFFECTIVE, DATA_POINT_TYPE ```\r\n\r\nI have also enabled tracing in my logging for more info on hibernate stuff = hoping it would give me the exact invalid column name but it doesnt. \r\n\r\nYou can see though, that 2 of the columns are not returned (PRODUCT and DATE_EFFECTIVE)\r\n\r\n```\r\nselect c1.ID, c1.NETWORK_OBJECT_ID, c1.NAME, c1.PRODUCT, c1.DESCRIPTION, c1.DATE_EFFECTIVE, c1.DATA_POINT_TYPE from DATA_POINT c1 where c1.NAME = ? and c1.PRODUCT = ? and c1.NETWORK_OBJECT_ID = ? and c1.DATE_EFFECTIVE= (select max(c2.DATE_EFFECTIVE) from DATA_POINT c2 where c2.NAME = c1.NAME and c2.PRODUCT = c1.PRODUCT and c2.NETWORK_OBJECT_ID = c1.NETWORK_OBJECT_ID and c2.DATE_EFFECTIVE &lt;= ?) order by c1.ID\r\nbinding parameter [1] as [VARCHAR] - [DAILY_COMPOSITION]\r\nbinding parameter [2] as [VARCHAR] - [GAS]\r\nbinding parameter [3] as [BIGINT] - [1]\r\nbinding parameter [4] as [TIMESTAMP] - [Sun Oct 01 00:00:00 UTC 2023]\r\nextracted value ([ID] : [BIGINT]) - [10]\r\nextracted value ([ID] : [BIGINT]) - [11]\r\nextracted value ([DATA_POINT_TYPE] : [VARCHAR]) - [C2]\r\nextracted value ([NAME] : [VARCHAR]) - [DAILY_COMPOSITION]\r\nextracted value ([DESCRIPTION] : [VARCHAR]) - [BP Beachfield DAILY_COMPOSITION C2]\r\nextracted value ([NETWORK_OBJECT_ID] : [BIGINT]) - [1]\r\nInvalid column name\r\n ```\r\n\r\nhere is the full stacktrace - not sure if this is an oracle or hibernate issue as you can see there is the error `OracleStatement.getColumnIndex`\r\n\r\nany more info needed, let me know\r\n```\r\nAn error occurred during execution of handler: com.web.mvc.composition.ViewMonthlyGasDeliveryCompositionController#display(WebRequest, ViewMonthlyGasDeliveryCompositionSearchCriteria)\r\norg.springframework.orm.hibernate5.HibernateJdbcException: JDBC exception on Hibernate data access: SQLException for SQL [select c1.ID, c1.NETWORK_OBJECT_ID, c1.NAME, c1.PRODUCT, c1.DESCRIPTION, c1.DATE_EFFECTIVE, c1.DATA_POINT_TYPE from DATA_POINT c1 where c1.NAME = ? and c1.PRODUCT = ? and c1.NETWORK_OBJECT_ID = ? and c1.DATE_EFFECTIVE= (select max(c2.DATE_EFFECTIVE) from DATA_POINT c2 where c2.NAME = c1.NAME and c2.PRODUCT = c1.PRODUCT and c2.NETWORK_OBJECT_ID = c1.NETWORK_OBJECT_ID and c2.DATE_EFFECTIVE &lt;= ?) order by c1.ID]; SQL state [99999]; error code [17006]; could not execute query; nested exception is org.hibernate.exception.GenericJDBCException: could not execute query\r\n\tat org.springframework.orm.hibernate5.SessionFactoryUtils.convertHibernateAccessException(SessionFactoryUtils.java:252)\r\n\tat org.springframework.orm.hibernate5.HibernateExceptionTranslator.convertHibernateAccessException(HibernateExceptionTranslator.java:102)\r\n\tat org.springframework.orm.hibernate5.HibernateExceptionTranslator.translateExceptionIfPossible(HibernateExceptionTranslator.java:77)\r\n\tat org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)\r\n\tat org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:242)\r\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:154)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\r\n\tat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:212)\r\n\tat com.sun.proxy.$Proxy104.findEffectiveByNetworkObjectAndNameAndProduct(Unknown Source)\r\n\tat com.application.data.domain.datapoint.DataPointManagerImpl.getCompositionDataPoints(DataPointManagerImpl.java:43)\r\n\tat com.application.network.domain.AbstractNetworkObject.getCompositionDataPoints(AbstractNetworkObject.java:46)\r\n\tat com.application.network.domain.AbstractMeteredPoint.createMonthlyGasData(AbstractMeteredPoint.java:412)\r\n\tat com.application.composition.domain.CompositionDataRootImpl.getDeliveryPointTotalGasData(CompositionDataRootImpl.java:415)\r\n\tat com.service.composition.CompositionServiceImpl.getMonthlyTotalCommingledGasData_aroundBody68(CompositionServiceImpl.java:1263)\r\n\tat com.service.composition.CompositionServiceImpl$AjcClosure69.run(CompositionServiceImpl.java:1)\r\n\tat org.springframework.transaction.aspectj.AbstractTransactionAspect.ajc$around$org_springframework_transaction_aspectj_AbstractTransactionAspect$1$2a73e96cproceed(AbstractTransactionAspect.aj:67)\r\n\tat org.springframework.transaction.aspectj.AbstractTransactionAspect$AbstractTransactionAspect$1.proceedWithInvocation(AbstractTransactionAspect.aj:73)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:367)\r\n\tat org.springframework.transaction.aspectj.AbstractTransactionAspect.ajc$around$org_springframework_transaction_aspectj_AbstractTransactionAspect$1$2a73e96c(AbstractTransactionAspect.aj:71)\r\n\tat com.service.composition.CompositionServiceImpl.getMonthlyTotalCommingledGasData(CompositionServiceImpl.java:1252)\r\n\tat com.web.mvc.composition.ViewMonthlyGasDeliveryCompositionController.display(ViewMonthlyGasDeliveryCompositionController.java:122)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:190)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:138)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:105)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:878)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:792)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1043)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:943)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898)\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:529)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:623)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:320)\r\n\tat org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:126)\r\n\tat org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:90)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)\r\n\tat org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:118)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)\r\n\tat org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:137)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)\r\n\tat org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:111)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)\r\n\tat org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:158)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)\r\n\tat org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)\r\n\tat org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:200)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)\r\n\tat org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:116)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)\r\n\tat org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:92)\r\n\tat org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:77)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)\r\n\tat org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:56)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)\r\n\tat org.springframework.security.web.session.ConcurrentSessionFilter.doFilter(ConcurrentSessionFilter.java:152)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)\r\n\tat org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:105)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)\r\n\tat org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:215)\r\n\tat org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:178)\r\n\tat org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358)\r\n\tat org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)\r\n\tat org.springframework.orm.hibernate5.support.OpenSessionInViewFilter.doFilterInternal(OpenSessionInViewFilter.java:156)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)\r\n\tat org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:673)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Thread.java:829)\r\nCaused by: org.hibernate.exception.GenericJDBCException: could not execute query\r\n\tat org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:42)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:113)\r\n\tat org.hibernate.loader.Loader.doList(Loader.java:2871)\r\n\tat org.hibernate.loader.Loader.doList(Loader.java:2850)\r\n\tat org.hibernate.loader.Loader.listIgnoreQueryCache(Loader.java:2682)\r\n\tat org.hibernate.loader.Loader.list(Loader.java:2677)\r\n\tat org.hibernate.loader.custom.CustomLoader.list(CustomLoader.java:338)\r\n\tat org.hibernate.internal.SessionImpl.listCustomQuery(SessionImpl.java:2186)\r\n\tat org.hibernate.internal.AbstractSharedSessionContract.list(AbstractSharedSessionContract.java:1204)\r\n\tat org.hibernate.query.internal.NativeQueryImpl.doList(NativeQueryImpl.java:177)\r\n\tat org.hibernate.query.internal.AbstractProducedQuery.list(AbstractProducedQuery.java:1617)\r\n\tat com.application.data.dao.hibernate.CompositionDataPointHibernateDao.findEffectiveByNetworkObjectAndNameAndProduct(CompositionDataPointHibernateDao.java:55)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:344)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:139)\r\n\t... 93 more\r\nCaused by: java.sql.SQLException: Invalid column name\r\n\tat oracle.jdbc.driver.OracleStatement.getColumnIndex(OracleStatement.java:3757)\r\n\tat oracle.jdbc.driver.InsensitiveScrollableResultSet.findColumn(InsensitiveScrollableResultSet.java:264)\r\n\tat oracle.jdbc.driver.GeneratedResultSet.getString(GeneratedResultSet.java:594)\r\n\tat org.apache.commons.dbcp.DelegatingResultSet.getString(DelegatingResultSet.java:263)\r\n\tat org.apache.commons.dbcp.DelegatingResultSet.getString(DelegatingResultSet.java:263)\r\n\tat com.application.core.dao.hibernate.usertype.EnumUserType.nullSafeGet(EnumUserType.java:60)\r\n\tat org.hibernate.type.CustomType.nullSafeGet(CustomType.java:119)\r\n\tat org.hibernate.type.AbstractType.hydrate(AbstractType.java:91)\r\n\tat org.hibernate.type.ComponentType.hydrate(ComponentType.java:670)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.hydrate(AbstractEntityPersister.java:3214)\r\n\tat org.hibernate.loader.Loader.loadFromResultSet(Loader.java:1887)\r\n\tat org.hibernate.loader.Loader.hydrateEntityState(Loader.java:1811)\r\n\tat org.hibernate.loader.Loader.instanceNotYetLoaded(Loader.java:1784)\r\n\tat org.hibernate.loader.Loader.getRow(Loader.java:1624)\r\n\tat org.hibernate.loader.Loader.getRowFromResultSet(Loader.java:748)\r\n\tat org.hibernate.loader.Loader.getRowsFromResultSet(Loader.java:1047)\r\n\tat org.hibernate.loader.Loader.processResultSet(Loader.java:998)\r\n\tat org.hibernate.loader.Loader.doQuery(Loader.java:967)\r\n\tat org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:357)\r\n\tat org.hibernate.loader.Loader.doList(Loader.java:2868)\r\n\t... 110 more\r\n ```\r\n\r\nEDITED:\r\n\r\ndecided to try and get some more info from the query. added `List results = query.list();`  - this returns an empty list. so it isnt even bringing anything back from the sql statement - does this give anyone an idea?\r\n\r\n```\r\npublic List&lt;CompositionDataPoint&gt; findEffectiveByNetworkObjectAndNameAndProduct(NetworkObject&lt;Long&gt; networkObject, String name, Product product, LocalDate date) \r\n\t{ \r\n\t\tSQLQuery query = (SQLQuery) getSession().getNamedQuery(&quot;findCompositionDataPointsApplicableOnDate&quot;)\r\n\t\t\t.setParameter(&quot;gasDay&quot;, convertToDate(date)) \r\n\t\t\t.setParameter(&quot;name&quot;, name)\r\n\t\t\t.setParameter(&quot;product&quot;, product)\r\n\t\t\t.setParameter(&quot;networkObject&quot;, networkObject); \r\n\t\t\r\n\t\tList results = query.list();\r\n\t\tlog.info(results);\r\n\t\t\r\n\t\treturn (List&lt;CompositionDataPoint&gt;) query.list(); \r\n\t }\r\n```\r\n\r\nMore of the DataPoint.hbm.xml file \r\n\r\n```\r\n        &lt;property name=&quot;dateEffective&quot; type=&quot;LocalDate&quot;&gt;\r\n            &lt;column name=&quot;DATE_EFFECTIVE&quot; not-null=&quot;true&quot; /&gt;\r\n        &lt;/property&gt;\r\n        &lt;subclass abstract=&quot;true&quot;\r\n            extends=&quot;com.application.data.domain.datapoint.AbstractDataPoint&quot;\r\n            name=&quot;com.application.data.domain.datapoint.AbstractNumericDataPoint&quot;\r\n            proxy=&quot;com.application.data.domain.datapoint.NumericDataPoint&quot; \r\n        &gt;\r\n            &lt;join table=&quot;DATA_POINT_NUMERIC&quot;&gt;\r\n                &lt;key column=&quot;DATA_POINT_ID&quot; /&gt;\r\n                &lt;component name=&quot;dataPointDetails&quot;&gt;\r\n                    &lt;property name=&quot;unit&quot; type=&quot;Unit&quot;&gt;\r\n                        &lt;column name=&quot;UNIT&quot; length=&quot;16&quot; not-null=&quot;true&quot; /&gt;\r\n                    &lt;/property&gt;\r\n                    &lt;property name=&quot;warningMinimum&quot; type=&quot;RTNumber&quot;&gt;\r\n                        &lt;column name=&quot;WARNING_MINIMUM&quot; not-null=&quot;true&quot; /&gt;\r\n                    &lt;/property&gt;\r\n                    &lt;property name=&quot;warningMaximum&quot; type=&quot;RTNumber&quot;&gt;\r\n                        &lt;column name=&quot;WARNING_MAXIMUM&quot; not-null=&quot;true&quot; /&gt;\r\n                    &lt;/property&gt;\r\n                    &lt;property name=&quot;failureMinimum&quot; type=&quot;RTNumber&quot;&gt;\r\n                        &lt;column name=&quot;FAILURE_MINIMUM&quot; not-null=&quot;true&quot; /&gt;\r\n                    &lt;/property&gt;\r\n                    &lt;property name=&quot;failureMaximum&quot; type=&quot;RTNumber&quot;&gt;\r\n                        &lt;column name=&quot;FAILURE_MAXIMUM&quot; not-null=&quot;true&quot; /&gt;\r\n                    &lt;/property&gt;\r\n                &lt;/component&gt;\r\n            &lt;/join&gt;\r\n```","title":"Hibernate query invalid column name error","body":"<p>I am trying to get a query working within my application. The query runs fine in sqlDeveloper and brings back the expected data. When i run it through my application, it dies and i get the error:</p>\n<pre><code>Caused by: java.sql.SQLException: Invalid column name\n</code></pre>\n<p>this is the query itself - i have formatted the string for the query to make it more readable for this post</p>\n<pre><code>    @SuppressWarnings(&quot;unchecked&quot;)\n    @Override\n    public List&lt;DataPoint&gt; findEffectiveByNetworkObjectAndNameAndProduct(NetworkObject&lt;Long&gt; networkObject, String name, Product product, LocalDate date) {\n        Query q = getSession().createSQLQuery(\n            &quot;select c1.ID, c1.NETWORK_OBJECT_ID, c1.NAME, c1.PRODUCT, c1.DESCRIPTION, c1.DATE_EFFECTIVE, c1.DATA_POINT_TYPE\n                from DATA_POINT c1 \n                where c1.NAME = :name\n                and c1.PRODUCT = :product\n                and c1.NETWORK_OBJECT_ID = :networkObject\n                and c1.DATE_EFFECTIVE = \n                    (select max(c2.DATE_EFFECTIVE) \n                    from DATA_POINT c2 \n                    where c2.NAME = c1.NAME \n                    and c2.PRODUCT = c1.PRODUCT \n                    and c2.NETWORK_OBJECT_ID = c1.NETWORK_OBJECT_ID \n                    and c2.DATE_EFFECTIVE &lt;= :gasDay) \n                order by c1.ID\n            &quot;)\n                .addEntity(AbstractDataPoint.class)\n                .setParameter(&quot;name&quot;, name)\n                .setParameter(&quot;gasDay&quot;, convertToDate(date))\n                .setParameter(&quot;networkObject&quot;, networkObject)\n                .setParameter(&quot;product&quot;, product.name().toString());\n        \n    \n        List&lt;DataPoint&gt; compositionDataPoints = (List&lt;DataPoint&gt;) q.getResultList();\n\n        return compositionDataPoints ;\n    }\n</code></pre>\n<p>Here is the relevant mapping i have done</p>\n<pre><code>&lt;hibernate-mapping default-access=&quot;field&quot;&gt;\n    &lt;typedef name=&quot;Product&quot; class=&quot;com.application.core.dao.hibernate.usertype.EnumUserType&quot;&gt;\n        &lt;param name=&quot;enumClassName&quot;&gt;com.application.data.domain.datapoint.Product&lt;/param&gt;\n    &lt;/typedef&gt;\n    &lt;typedef name=&quot;Unit&quot; class=&quot;com.application.core.dao.hibernate.usertype.EnumUserType&quot;&gt;\n        &lt;param name=&quot;enumClassName&quot;&gt;com.application.data.domain.measurement.Unit&lt;/param&gt;\n    &lt;/typedef&gt;\n    &lt;class table=&quot;DATA_POINT&quot; \n        name=&quot;com.application.data.domain.datapoint.AbstractDataPoint&quot; \n        proxy=&quot;com.application.data.domain.datapoint.DataPoint&quot;\n        abstract=&quot;true&quot;\n    &gt;\n        &lt;id name=&quot;id&quot; type=&quot;java.lang.Long&quot;&gt;\n            &lt;column name=&quot;ID&quot; precision=&quot;20&quot; scale=&quot;0&quot; not-null=&quot;true&quot; /&gt;\n            &lt;generator class=&quot;sequence&quot;&gt;\n                &lt;param name=&quot;sequence&quot;&gt;DATA_POINT_ID_SEQ&lt;/param&gt;\n            &lt;/generator&gt;\n        &lt;/id&gt;\n        &lt;discriminator column=&quot;DATA_POINT_TYPE&quot; type=&quot;java.lang.String&quot; /&gt;\n        &lt;property name=&quot;name&quot; type=&quot;string&quot;&gt;\n            &lt;column name=&quot;NAME&quot; length=&quot;64&quot; not-null=&quot;true&quot; /&gt;\n        &lt;/property&gt;\n        &lt;property name=&quot;product&quot; type=&quot;Product&quot;&gt;\n            &lt;column name=&quot;PRODUCT&quot; length=&quot;16&quot; not-null=&quot;false&quot; /&gt;\n        &lt;/property&gt;\n        &lt;property name=&quot;description&quot; type=&quot;java.lang.String&quot;&gt;\n            &lt;column name=&quot;DESCRIPTION&quot; length=&quot;128&quot; not-null=&quot;true&quot; /&gt;\n        &lt;/property&gt;\n        &lt;many-to-one name=&quot;networkObject&quot; class=&quot;com.application.network.domain.AbstractNetworkObject&quot;&gt;\n            &lt;column name=&quot;NETWORK_OBJECT_ID&quot; not-null=&quot;false&quot;/&gt;\n        &lt;/many-to-one&gt;\n        &lt;property name=&quot;dateEffective&quot; type=&quot;LocalDate&quot;&gt;\n            &lt;column name=&quot;DATE_EFFECTIVE&quot; not-null=&quot;true&quot; /&gt;\n        &lt;/property&gt;\n</code></pre>\n<p>These are the exact column names in the corresponding table in oracle</p>\n<p><code>ID, NETWORK_OBJECT_ID, NAME, PRODUCT, DESCRIPTION, DATE_EFFECTIVE, DATA_POINT_TYPE</code></p>\n<p>I have also enabled tracing in my logging for more info on hibernate stuff = hoping it would give me the exact invalid column name but it doesnt.</p>\n<p>You can see though, that 2 of the columns are not returned (PRODUCT and DATE_EFFECTIVE)</p>\n<pre><code>select c1.ID, c1.NETWORK_OBJECT_ID, c1.NAME, c1.PRODUCT, c1.DESCRIPTION, c1.DATE_EFFECTIVE, c1.DATA_POINT_TYPE from DATA_POINT c1 where c1.NAME = ? and c1.PRODUCT = ? and c1.NETWORK_OBJECT_ID = ? and c1.DATE_EFFECTIVE= (select max(c2.DATE_EFFECTIVE) from DATA_POINT c2 where c2.NAME = c1.NAME and c2.PRODUCT = c1.PRODUCT and c2.NETWORK_OBJECT_ID = c1.NETWORK_OBJECT_ID and c2.DATE_EFFECTIVE &lt;= ?) order by c1.ID\nbinding parameter [1] as [VARCHAR] - [DAILY_COMPOSITION]\nbinding parameter [2] as [VARCHAR] - [GAS]\nbinding parameter [3] as [BIGINT] - [1]\nbinding parameter [4] as [TIMESTAMP] - [Sun Oct 01 00:00:00 UTC 2023]\nextracted value ([ID] : [BIGINT]) - [10]\nextracted value ([ID] : [BIGINT]) - [11]\nextracted value ([DATA_POINT_TYPE] : [VARCHAR]) - [C2]\nextracted value ([NAME] : [VARCHAR]) - [DAILY_COMPOSITION]\nextracted value ([DESCRIPTION] : [VARCHAR]) - [BP Beachfield DAILY_COMPOSITION C2]\nextracted value ([NETWORK_OBJECT_ID] : [BIGINT]) - [1]\nInvalid column name\n</code></pre>\n<p>here is the full stacktrace - not sure if this is an oracle or hibernate issue as you can see there is the error <code>OracleStatement.getColumnIndex</code></p>\n<p>any more info needed, let me know</p>\n<pre><code>An error occurred during execution of handler: com.web.mvc.composition.ViewMonthlyGasDeliveryCompositionController#display(WebRequest, ViewMonthlyGasDeliveryCompositionSearchCriteria)\norg.springframework.orm.hibernate5.HibernateJdbcException: JDBC exception on Hibernate data access: SQLException for SQL [select c1.ID, c1.NETWORK_OBJECT_ID, c1.NAME, c1.PRODUCT, c1.DESCRIPTION, c1.DATE_EFFECTIVE, c1.DATA_POINT_TYPE from DATA_POINT c1 where c1.NAME = ? and c1.PRODUCT = ? and c1.NETWORK_OBJECT_ID = ? and c1.DATE_EFFECTIVE= (select max(c2.DATE_EFFECTIVE) from DATA_POINT c2 where c2.NAME = c1.NAME and c2.PRODUCT = c1.PRODUCT and c2.NETWORK_OBJECT_ID = c1.NETWORK_OBJECT_ID and c2.DATE_EFFECTIVE &lt;= ?) order by c1.ID]; SQL state [99999]; error code [17006]; could not execute query; nested exception is org.hibernate.exception.GenericJDBCException: could not execute query\n    at org.springframework.orm.hibernate5.SessionFactoryUtils.convertHibernateAccessException(SessionFactoryUtils.java:252)\n    at org.springframework.orm.hibernate5.HibernateExceptionTranslator.convertHibernateAccessException(HibernateExceptionTranslator.java:102)\n    at org.springframework.orm.hibernate5.HibernateExceptionTranslator.translateExceptionIfPossible(HibernateExceptionTranslator.java:77)\n    at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)\n    at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:242)\n    at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:154)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:212)\n    at com.sun.proxy.$Proxy104.findEffectiveByNetworkObjectAndNameAndProduct(Unknown Source)\n    at com.application.data.domain.datapoint.DataPointManagerImpl.getCompositionDataPoints(DataPointManagerImpl.java:43)\n    at com.application.network.domain.AbstractNetworkObject.getCompositionDataPoints(AbstractNetworkObject.java:46)\n    at com.application.network.domain.AbstractMeteredPoint.createMonthlyGasData(AbstractMeteredPoint.java:412)\n    at com.application.composition.domain.CompositionDataRootImpl.getDeliveryPointTotalGasData(CompositionDataRootImpl.java:415)\n    at com.service.composition.CompositionServiceImpl.getMonthlyTotalCommingledGasData_aroundBody68(CompositionServiceImpl.java:1263)\n    at com.service.composition.CompositionServiceImpl$AjcClosure69.run(CompositionServiceImpl.java:1)\n    at org.springframework.transaction.aspectj.AbstractTransactionAspect.ajc$around$org_springframework_transaction_aspectj_AbstractTransactionAspect$1$2a73e96cproceed(AbstractTransactionAspect.aj:67)\n    at org.springframework.transaction.aspectj.AbstractTransactionAspect$AbstractTransactionAspect$1.proceedWithInvocation(AbstractTransactionAspect.aj:73)\n    at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:367)\n    at org.springframework.transaction.aspectj.AbstractTransactionAspect.ajc$around$org_springframework_transaction_aspectj_AbstractTransactionAspect$1$2a73e96c(AbstractTransactionAspect.aj:71)\n    at com.service.composition.CompositionServiceImpl.getMonthlyTotalCommingledGasData(CompositionServiceImpl.java:1252)\n    at com.web.mvc.composition.ViewMonthlyGasDeliveryCompositionController.display(ViewMonthlyGasDeliveryCompositionController.java:122)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:566)\n    at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:190)\n    at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:138)\n    at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:105)\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:878)\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:792)\n    at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\n    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1043)\n    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:943)\n    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)\n    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:529)\n    at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)\n    at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:320)\n    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:126)\n    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:90)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)\n    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:118)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)\n    at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:137)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)\n    at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:111)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)\n    at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:158)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)\n    at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)\n    at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:200)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)\n    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:116)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)\n    at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:92)\n    at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:77)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)\n    at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:56)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)\n    at org.springframework.security.web.session.ConcurrentSessionFilter.doFilter(ConcurrentSessionFilter.java:152)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)\n    at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:105)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)\n    at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:215)\n    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:178)\n    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358)\n    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)\n    at org.springframework.orm.hibernate5.support.OpenSessionInViewFilter.doFilterInternal(OpenSessionInViewFilter.java:156)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)\n    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)\n    at org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:673)\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)\n    at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)\n    at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)\n    at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)\n    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)\n    at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\n    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\n    at java.base/java.lang.Thread.run(Thread.java:829)\nCaused by: org.hibernate.exception.GenericJDBCException: could not execute query\n    at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:42)\n    at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:113)\n    at org.hibernate.loader.Loader.doList(Loader.java:2871)\n    at org.hibernate.loader.Loader.doList(Loader.java:2850)\n    at org.hibernate.loader.Loader.listIgnoreQueryCache(Loader.java:2682)\n    at org.hibernate.loader.Loader.list(Loader.java:2677)\n    at org.hibernate.loader.custom.CustomLoader.list(CustomLoader.java:338)\n    at org.hibernate.internal.SessionImpl.listCustomQuery(SessionImpl.java:2186)\n    at org.hibernate.internal.AbstractSharedSessionContract.list(AbstractSharedSessionContract.java:1204)\n    at org.hibernate.query.internal.NativeQueryImpl.doList(NativeQueryImpl.java:177)\n    at org.hibernate.query.internal.AbstractProducedQuery.list(AbstractProducedQuery.java:1617)\n    at com.application.data.dao.hibernate.CompositionDataPointHibernateDao.findEffectiveByNetworkObjectAndNameAndProduct(CompositionDataPointHibernateDao.java:55)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:566)\n    at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:344)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n    at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:139)\n    ... 93 more\nCaused by: java.sql.SQLException: Invalid column name\n    at oracle.jdbc.driver.OracleStatement.getColumnIndex(OracleStatement.java:3757)\n    at oracle.jdbc.driver.InsensitiveScrollableResultSet.findColumn(InsensitiveScrollableResultSet.java:264)\n    at oracle.jdbc.driver.GeneratedResultSet.getString(GeneratedResultSet.java:594)\n    at org.apache.commons.dbcp.DelegatingResultSet.getString(DelegatingResultSet.java:263)\n    at org.apache.commons.dbcp.DelegatingResultSet.getString(DelegatingResultSet.java:263)\n    at com.application.core.dao.hibernate.usertype.EnumUserType.nullSafeGet(EnumUserType.java:60)\n    at org.hibernate.type.CustomType.nullSafeGet(CustomType.java:119)\n    at org.hibernate.type.AbstractType.hydrate(AbstractType.java:91)\n    at org.hibernate.type.ComponentType.hydrate(ComponentType.java:670)\n    at org.hibernate.persister.entity.AbstractEntityPersister.hydrate(AbstractEntityPersister.java:3214)\n    at org.hibernate.loader.Loader.loadFromResultSet(Loader.java:1887)\n    at org.hibernate.loader.Loader.hydrateEntityState(Loader.java:1811)\n    at org.hibernate.loader.Loader.instanceNotYetLoaded(Loader.java:1784)\n    at org.hibernate.loader.Loader.getRow(Loader.java:1624)\n    at org.hibernate.loader.Loader.getRowFromResultSet(Loader.java:748)\n    at org.hibernate.loader.Loader.getRowsFromResultSet(Loader.java:1047)\n    at org.hibernate.loader.Loader.processResultSet(Loader.java:998)\n    at org.hibernate.loader.Loader.doQuery(Loader.java:967)\n    at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:357)\n    at org.hibernate.loader.Loader.doList(Loader.java:2868)\n    ... 110 more\n</code></pre>\n<p>EDITED:</p>\n<p>decided to try and get some more info from the query. added <code>List results = query.list();</code>  - this returns an empty list. so it isnt even bringing anything back from the sql statement - does this give anyone an idea?</p>\n<pre><code>public List&lt;CompositionDataPoint&gt; findEffectiveByNetworkObjectAndNameAndProduct(NetworkObject&lt;Long&gt; networkObject, String name, Product product, LocalDate date) \n    { \n        SQLQuery query = (SQLQuery) getSession().getNamedQuery(&quot;findCompositionDataPointsApplicableOnDate&quot;)\n            .setParameter(&quot;gasDay&quot;, convertToDate(date)) \n            .setParameter(&quot;name&quot;, name)\n            .setParameter(&quot;product&quot;, product)\n            .setParameter(&quot;networkObject&quot;, networkObject); \n        \n        List results = query.list();\n        log.info(results);\n        \n        return (List&lt;CompositionDataPoint&gt;) query.list(); \n     }\n</code></pre>\n<p>More of the DataPoint.hbm.xml file</p>\n<pre><code>        &lt;property name=&quot;dateEffective&quot; type=&quot;LocalDate&quot;&gt;\n            &lt;column name=&quot;DATE_EFFECTIVE&quot; not-null=&quot;true&quot; /&gt;\n        &lt;/property&gt;\n        &lt;subclass abstract=&quot;true&quot;\n            extends=&quot;com.application.data.domain.datapoint.AbstractDataPoint&quot;\n            name=&quot;com.application.data.domain.datapoint.AbstractNumericDataPoint&quot;\n            proxy=&quot;com.application.data.domain.datapoint.NumericDataPoint&quot; \n        &gt;\n            &lt;join table=&quot;DATA_POINT_NUMERIC&quot;&gt;\n                &lt;key column=&quot;DATA_POINT_ID&quot; /&gt;\n                &lt;component name=&quot;dataPointDetails&quot;&gt;\n                    &lt;property name=&quot;unit&quot; type=&quot;Unit&quot;&gt;\n                        &lt;column name=&quot;UNIT&quot; length=&quot;16&quot; not-null=&quot;true&quot; /&gt;\n                    &lt;/property&gt;\n                    &lt;property name=&quot;warningMinimum&quot; type=&quot;RTNumber&quot;&gt;\n                        &lt;column name=&quot;WARNING_MINIMUM&quot; not-null=&quot;true&quot; /&gt;\n                    &lt;/property&gt;\n                    &lt;property name=&quot;warningMaximum&quot; type=&quot;RTNumber&quot;&gt;\n                        &lt;column name=&quot;WARNING_MAXIMUM&quot; not-null=&quot;true&quot; /&gt;\n                    &lt;/property&gt;\n                    &lt;property name=&quot;failureMinimum&quot; type=&quot;RTNumber&quot;&gt;\n                        &lt;column name=&quot;FAILURE_MINIMUM&quot; not-null=&quot;true&quot; /&gt;\n                    &lt;/property&gt;\n                    &lt;property name=&quot;failureMaximum&quot; type=&quot;RTNumber&quot;&gt;\n                        &lt;column name=&quot;FAILURE_MAXIMUM&quot; not-null=&quot;true&quot; /&gt;\n                    &lt;/property&gt;\n                &lt;/component&gt;\n            &lt;/join&gt;\n</code></pre>\n"},{"tags":["java","excel","apache-poi"],"comments":[{"owner":{"account_id":1458820,"reputation":7821,"user_id":1373711,"accept_rate":83,"display_name":"JHS"},"score":0,"creation_date":1371755672,"post_id":17221882,"comment_id":24949523,"body_markdown":"I feel that the website generated excel file does not have defined cells. All the data is in 1 cell of the excel file.","body":"I feel that the website generated excel file does not have defined cells. All the data is in 1 cell of the excel file."},{"owner":{"account_id":2912600,"reputation":917,"user_id":2496503,"accept_rate":61,"display_name":"user2496503"},"score":0,"creation_date":1371755907,"post_id":17221882,"comment_id":24949652,"body_markdown":"so what can i do for the solution? please can you help me?","body":"so what can i do for the solution? please can you help me?"},{"owner":{"account_id":1458820,"reputation":7821,"user_id":1373711,"accept_rate":83,"display_name":"JHS"},"score":1,"creation_date":1371755996,"post_id":17221882,"comment_id":24949699,"body_markdown":"Instead of (cell.getRichStringCellValue().getString().trim().equals(&quot;GET&quot;) use (cell.getRichStringCellValue().getString().trim().contains(&quot;GET&quot;)","body":"Instead of (cell.getRichStringCellValue().getString().trim().equals(&quot;GE&zwnj;&#8203;T&quot;) use (cell.getRichStringCellValue().getString().trim().contains(&quot;&zwnj;&#8203;GET&quot;)"},{"owner":{"account_id":2912600,"reputation":917,"user_id":2496503,"accept_rate":61,"display_name":"user2496503"},"score":0,"creation_date":1371756058,"post_id":17221882,"comment_id":24949740,"body_markdown":"i have tried it my dear ;(","body":"i have tried it my dear ;("},{"owner":{"account_id":2912600,"reputation":917,"user_id":2496503,"accept_rate":61,"display_name":"user2496503"},"score":0,"creation_date":1371756222,"post_id":17221882,"comment_id":24949830,"body_markdown":"also can you please give me any idea i want to delete all the rows that will contain the specific string i want to delete please?","body":"also can you please give me any idea i want to delete all the rows that will contain the specific string i want to delete please?"},{"owner":{"account_id":2257141,"reputation":2906,"user_id":1988097,"accept_rate":53,"display_name":"Darius X."},"score":0,"creation_date":1371757209,"post_id":17221882,"comment_id":24950357,"body_markdown":"When you read the generated Excel file, use log/sysout/debug to see the value of each cell.","body":"When you read the generated Excel file, use log/sysout/debug to see the value of each cell."},{"owner":{"account_id":2912600,"reputation":917,"user_id":2496503,"accept_rate":61,"display_name":"user2496503"},"score":0,"creation_date":1371758098,"post_id":17221882,"comment_id":24950859,"body_markdown":"Can you please explain a bit more how please","body":"Can you please explain a bit more how please"}],"answers":[{"comments":[{"owner":{"account_id":2890357,"reputation":1,"user_id":2479298,"display_name":"mahimahimahi"},"score":0,"creation_date":1371837152,"post_id":17236694,"comment_id":24983544,"body_markdown":"@user2496503 What was wrong with it? what errors were thrown? also, can you show an example of the automatic xls file that was returned.","body":"@user2496503 What was wrong with it? what errors were thrown? also, can you show an example of the automatic xls file that was returned."}],"tags":[],"owner":{"account_id":2890357,"reputation":1,"user_id":2479298,"display_name":"mahimahimahi"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1371822971,"creation_date":1371821885,"answer_id":17236694,"question_id":17221882,"body_markdown":"There are two bugs I noticed in your code. First, you write the file every time you remove a row which is inefficient. Second, you only search the FIRST string-cell in the row, and if the first string-cell in the row isn&#39;t the correct one, you break.  If your automatically generated file saves numbers or blank cells as strings (possible), then this will cause a difference between your hand generated excel file and the one you created with the script. I would suggest removing the second break statement. To clean up the code, I would rewrite the whole if block as follows:\r\n\r\n    if(cell.getCellType() == Cell.CELL_TYPE_STRING &amp;&amp; cell.getStringCellValue().equals(&quot;GET&quot;)){\r\n        sheet.removeRow(row);\r\n        break;\r\n    } else {\r\n        System.out.print(&quot;Not Found! &quot;);\r\n    }\r\n\r\nThe if statement works because of short circuiting. This will save you a whole lot of time if you are new to apache poi. :)\r\n\r\nAfter we have removed the rows, we should then write the file.\r\nPlace the following after the whole for block:\r\n\r\n    try (FileOutputStream fileOut = new FileOutputStream(&quot;C:/juni.xls&quot;)) {\r\n        wb.write(fileOut);\r\n    }\r\n\r\nI&#39;m assuming that sheet.removeRow(row) will work in an enhanced for loop. If it doesn&#39;t, you may need to fix it or make your code work in a while loop. Hint:  while((row = sheet.getRow(i)) != null ){  }","title":"Find a Specific String in Excel File using Apache POI API","body":"<p>There are two bugs I noticed in your code. First, you write the file every time you remove a row which is inefficient. Second, you only search the FIRST string-cell in the row, and if the first string-cell in the row isn't the correct one, you break.  If your automatically generated file saves numbers or blank cells as strings (possible), then this will cause a difference between your hand generated excel file and the one you created with the script. I would suggest removing the second break statement. To clean up the code, I would rewrite the whole if block as follows:</p>\n\n<pre><code>if(cell.getCellType() == Cell.CELL_TYPE_STRING &amp;&amp; cell.getStringCellValue().equals(\"GET\")){\n    sheet.removeRow(row);\n    break;\n} else {\n    System.out.print(\"Not Found! \");\n}\n</code></pre>\n\n<p>The if statement works because of short circuiting. This will save you a whole lot of time if you are new to apache poi. :)</p>\n\n<p>After we have removed the rows, we should then write the file.\nPlace the following after the whole for block:</p>\n\n<pre><code>try (FileOutputStream fileOut = new FileOutputStream(\"C:/juni.xls\")) {\n    wb.write(fileOut);\n}\n</code></pre>\n\n<p>I'm assuming that sheet.removeRow(row) will work in an enhanced for loop. If it doesn't, you may need to fix it or make your code work in a while loop. Hint:  while((row = sheet.getRow(i)) != null ){  }</p>\n"}],"owner":{"account_id":2912600,"reputation":917,"user_id":2496503,"accept_rate":61,"display_name":"user2496503"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":8780,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1698199505,"creation_date":1371755550,"question_id":17221882,"body_markdown":" I&#39;m new to Apache POI API for reading MS Office Documents but somehow good at Java. I just want to search a specific String from an Excel File! I&#39;m doing in this way:\r\n\r\n       private void processExcelFile(File f_path) throws Exception{\r\n        File path=f_path;\r\n        \r\n        try{\r\n                \r\n            FileInputStream is=new FileInputStream(path);\r\n            \r\n            HSSFWorkbook wb = new HSSFWorkbook(is);\r\n            HSSFSheet sheet = wb.getSheetAt(0);\r\n            \r\n            int rowcount_post=0;\r\n            int rowcount_304=0;\r\n            \r\n                    for(Row row: sheet){\r\n                        for(Cell cell : row){\r\n                            \r\n                            if (cell.getCellType() == Cell.CELL_TYPE_STRING){\r\n                                    if (cell.getRichStringCellValue().getString().trim().equals(&quot;GET&quot;)){\r\n                                            rowcount_post=row.getRowNum();\r\n                                         \r\n                                            HSSFRow removingRow = sheet.getRow(rowcount_post);\r\n                                                \r\n                                                if (removingRow != null) {\r\n                                                sheet.removeRow(removingRow);\r\n                                                }\r\n                                                \r\n                                         try (FileOutputStream fileOut = new FileOutputStream(&quot;C:/juni.xls&quot;)) {\r\n                                            wb.write(fileOut);\r\n                                        }\r\n                                        break;\r\n                                    }\r\n                                    else{\r\n                                        System.out.print(&quot;NOT FOUND&quot;);\r\n                                        \r\n                                    }\r\n                                    \r\n                                  \r\n                            break;\r\n                            }\r\n                              \r\n                        }\r\n                    }\r\n                   \r\n        }\r\n        catch(Exception e){\r\n               JOptionPane.showMessageDialog(this,e.getMessage(),&quot;Error&quot;,JOptionPane.ERROR_MESSAGE);\r\n        }\r\n    }\r\n\r\nAll is working fine! Except that I have a Web Generated Log file. So I have to search it for some Strings and then I have to delete the line containing that string.\r\n\r\nThe problem is that it only works for the Excel Files I&#39;m creating by my hand but not for computer generated (AUTOMATIC LOG FILE) file. Suppose that I have to search a string &quot;POST&quot; it will only find in the file generated by me but not in the file generated by the website. Is it any Encoding problem I mean the text encoded or whatever!\r\n\r\n Please suggest me a solution for this.","title":"Find a Specific String in Excel File using Apache POI API","body":"<p>I'm new to Apache POI API for reading MS Office Documents but somehow good at Java. I just want to search a specific String from an Excel File! I'm doing in this way:</p>\n<pre><code>   private void processExcelFile(File f_path) throws Exception{\n    File path=f_path;\n    \n    try{\n            \n        FileInputStream is=new FileInputStream(path);\n        \n        HSSFWorkbook wb = new HSSFWorkbook(is);\n        HSSFSheet sheet = wb.getSheetAt(0);\n        \n        int rowcount_post=0;\n        int rowcount_304=0;\n        \n                for(Row row: sheet){\n                    for(Cell cell : row){\n                        \n                        if (cell.getCellType() == Cell.CELL_TYPE_STRING){\n                                if (cell.getRichStringCellValue().getString().trim().equals(&quot;GET&quot;)){\n                                        rowcount_post=row.getRowNum();\n                                     \n                                        HSSFRow removingRow = sheet.getRow(rowcount_post);\n                                            \n                                            if (removingRow != null) {\n                                            sheet.removeRow(removingRow);\n                                            }\n                                            \n                                     try (FileOutputStream fileOut = new FileOutputStream(&quot;C:/juni.xls&quot;)) {\n                                        wb.write(fileOut);\n                                    }\n                                    break;\n                                }\n                                else{\n                                    System.out.print(&quot;NOT FOUND&quot;);\n                                    \n                                }\n                                \n                              \n                        break;\n                        }\n                          \n                    }\n                }\n               \n    }\n    catch(Exception e){\n           JOptionPane.showMessageDialog(this,e.getMessage(),&quot;Error&quot;,JOptionPane.ERROR_MESSAGE);\n    }\n}\n</code></pre>\n<p>All is working fine! Except that I have a Web Generated Log file. So I have to search it for some Strings and then I have to delete the line containing that string.</p>\n<p>The problem is that it only works for the Excel Files I'm creating by my hand but not for computer generated (AUTOMATIC LOG FILE) file. Suppose that I have to search a string &quot;POST&quot; it will only find in the file generated by me but not in the file generated by the website. Is it any Encoding problem I mean the text encoded or whatever!</p>\n<p>Please suggest me a solution for this.</p>\n"},{"tags":["java","spring","asynchronous","spring-cloud","spring-cloud-feign"],"comments":[{"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"score":0,"creation_date":1698223143,"post_id":77356226,"comment_id":136376525,"body_markdown":"The method name says it&#39;s async, but it&#39;s not. The call to `bookClient.getBook(id)` is done synchronously, and its result is set as the value of the future. When this method ends, the future is always completed - either successfully or exceptionally.","body":"The method name says it&#39;s async, but it&#39;s not. The call to <code>bookClient.getBook(id)</code> is done synchronously, and its result is set as the value of the future. When this method ends, the future is always completed - either successfully or exceptionally."},{"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"score":0,"creation_date":1698223267,"post_id":77356226,"comment_id":136376557,"body_markdown":"Note that you should checkout structured concurrency (preview feature in Java 21). It allows you to create seemingly unrelated futures, but cancel other still running futures if one of them fails. You won&#39;t be able to use that right now, but it&#39;s worth considering when it becomes stable.","body":"Note that you should checkout structured concurrency (preview feature in Java 21). It allows you to create seemingly unrelated futures, but cancel other still running futures if one of them fails. You won&#39;t be able to use that right now, but it&#39;s worth considering when it becomes stable."}],"owner":{"account_id":7674521,"reputation":31,"user_id":17269768,"display_name":"vunhatchuong"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1698198964,"creation_date":1698198964,"question_id":77356226,"body_markdown":"When my service is called, I have 2 `@Async` FeignClient APIs getBookAsync, getAuthorAsync to check things:\r\n\r\n```java\r\n@Async\r\npublic CompletableFuture&lt;JsonNode&gt; getBookAsync(Long id) {\r\n    CompletableFuture&lt;JsonNode&gt; future = new CompletableFuture&lt;&gt;();\r\n    try {\r\n        future.complete(bookClient.getBook(id));\r\n    } catch (Exception e) {\r\n        future.completeExceptionally(e);\r\n    }\r\n    return future; }\r\n```\r\n\r\n`getAuthorAsync` is the same as above.\r\n\r\nThen if both of the checks is correct, I will save the record it:\r\n\r\n```java\r\nCompletableFuture.allOf(bookFuture, authorFuture)\r\n    .thenRun(() -&gt; recordRepository.save(record));\r\n```\r\n\r\nI want to throw the error that `bookClient.getBook(id)` thrown **immediately** in the **main thread** if there&#39;s one because there&#39;s no reason to check author if book already failed.\r\n\r\nThe error will be handle by a global exception handler.","title":"How to throw exception in main thread when CompletableFuture finished exceptionally immediately","body":"<p>When my service is called, I have 2 <code>@Async</code> FeignClient APIs getBookAsync, getAuthorAsync to check things:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Async\npublic CompletableFuture&lt;JsonNode&gt; getBookAsync(Long id) {\n    CompletableFuture&lt;JsonNode&gt; future = new CompletableFuture&lt;&gt;();\n    try {\n        future.complete(bookClient.getBook(id));\n    } catch (Exception e) {\n        future.completeExceptionally(e);\n    }\n    return future; }\n</code></pre>\n<p><code>getAuthorAsync</code> is the same as above.</p>\n<p>Then if both of the checks is correct, I will save the record it:</p>\n<pre class=\"lang-java prettyprint-override\"><code>CompletableFuture.allOf(bookFuture, authorFuture)\n    .thenRun(() -&gt; recordRepository.save(record));\n</code></pre>\n<p>I want to throw the error that <code>bookClient.getBook(id)</code> thrown <strong>immediately</strong> in the <strong>main thread</strong> if there's one because there's no reason to check author if book already failed.</p>\n<p>The error will be handle by a global exception handler.</p>\n"},{"tags":["java","mule","imap","mulesoft","mule-component"],"comments":[{"owner":{"account_id":372682,"reputation":22461,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1698171499,"post_id":77353675,"comment_id":136370553,"body_markdown":"The application is not using Mule features or connectors. This is purely a Java programming issue. You should remove mule* tags and add the java tag.","body":"The application is not using Mule features or connectors. This is purely a Java programming issue. You should remove mule* tags and add the java tag."},{"owner":{"account_id":372682,"reputation":22461,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1698178579,"post_id":77353675,"comment_id":136371793,"body_markdown":"On second look, it seems that your application is trying to use newer versions of libraries already provided by Mule 3.9. Which exact version of Mule 3.9 are you using? Can you use the versions provided by Mule instead?","body":"On second look, it seems that your application is trying to use newer versions of libraries already provided by Mule 3.9. Which exact version of Mule 3.9 are you using? Can you use the versions provided by Mule instead?"},{"owner":{"account_id":16605749,"reputation":21,"user_id":12000282,"display_name":"Mahesh A R"},"score":0,"creation_date":1698196294,"post_id":77353675,"comment_id":136373623,"body_markdown":"Good morning Aled, the standalone Java program works fine, where as when we deploy it as a mule component where we are trying to call through a flow, only then this issue arises..","body":"Good morning Aled, the standalone Java program works fine, where as when we deploy it as a mule component where we are trying to call through a flow, only then this issue arises.."},{"owner":{"account_id":372682,"reputation":22461,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1698197740,"post_id":77353675,"comment_id":136373706,"body_markdown":"See my second comment.","body":"See my second comment."}],"owner":{"account_id":16605749,"reputation":21,"user_id":12000282,"display_name":"Mahesh A R"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1698196322,"creation_date":1698163174,"question_id":77353675,"body_markdown":"We get below error, when we are trying to access our outlook mail which is hosted on Azure Cloud\r\n```\r\n    2023-10-24 20:58:30,087 [INFO] mail.test | Cron Job TokenValidityPoll Called\r\n-&gt;-&gt; Not provider of jakarta.mail.util.StreamProvider was found\r\n     java.lang.IllegalStateException: Not provider of jakarta.mail.util.StreamProvider was found\r\n            at jakarta.mail.util.FactoryFinder.find(FactoryFinder.java:61)\r\n            at jakarta.mail.util.StreamProvider.provider(StreamProvider.java:199)\r\n            at jakarta.mail.Session.&lt;init&gt;(Session.java:256)\r\n        at jakarta.mail.Session.getInstance(Session.java:326)\r\n        at com.test.AzureMailFetcher.imapAuthenticationAttempt(AzureMailFetcher.java:143)\r\n```\r\n\r\n\r\nOur code on line 143 is like below (line number marked inside code as comment **)\r\n\r\n    private static Store imapAuthenticationAttempt(IAuthenticationResult result) throws MessagingException {\r\n        String accessToken = result.accessToken();\r\n        Properties props = new Properties();\r\n        props.put(&quot;mail.imap.sasl.enable&quot;, &quot;true&quot;);\r\n        props.put(&quot;mail.imap.sasl.mechanisms&quot;, &quot;XOAUTH2&quot;);\r\n        props.put(&quot;mail.imap.auth.login.disable&quot;, &quot;true&quot;);\r\n        props.put(&quot;mail.imap.auth.plain.disable&quot;, &quot;true&quot;);\r\n        props.put(&quot;mail.imap.ssl.enable&quot;, &quot;true&quot;);\r\n        Session session = Session.getInstance(props); // This is line number 143 ***\r\n     Store store = session.getStore(&quot;imap&quot;);\r\n\r\n\r\nThe other important fact is that when we are trying to run through a normal java program we are able to make it work. But when we attached it as a mule component, then it started to fail. We are very sure it could be a because of the library incompatibility. But we are not sure, which library is causing this problem. We tried adding and removing few libraries, but yet no result.\r\n\r\nI also tried using eclipse angus library, it resolved this problem but produce a new issue. So I reverted back\r\n\r\nBelow are dependencies in my project.\r\n\t\t\r\n]\t\r\n\r\n    &lt;dependency&gt;\r\n    \t\t    &lt;groupId&gt;com.microsoft.azure&lt;/groupId&gt;\r\n    \t\t    &lt;artifactId&gt;msal4j&lt;/artifactId&gt;\r\n    \t\t    &lt;version&gt;1.13.8&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n\t\t\r\n\t\t&lt;dependency&gt;\r\n\t\t    &lt;groupId&gt;jakarta.mail&lt;/groupId&gt;\r\n\t\t    &lt;artifactId&gt;jakarta.mail-api&lt;/artifactId&gt;\r\n\t\t    &lt;version&gt;2.1.2&lt;/version&gt;\r\n\t\t    &lt;exclusions&gt;\r\n\t            &lt;exclusion&gt;\r\n\t                &lt;artifactId&gt;activation&lt;/artifactId&gt;\r\n\t                &lt;groupId&gt;jakarta.activation&lt;/groupId&gt;\r\n\t            &lt;/exclusion&gt;\r\n\t        &lt;/exclusions&gt;\t\t    \r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t   &lt;groupId&gt;com.sun.mail&lt;/groupId&gt;\r\n\t\t   &lt;artifactId&gt;jakarta.mail&lt;/artifactId&gt;\r\n\t\t   &lt;version&gt;2.0.1&lt;/version&gt;\r\n\t        &lt;exclusions&gt;\r\n\t            &lt;exclusion&gt;\r\n\t                &lt;artifactId&gt;activation&lt;/artifactId&gt;\r\n\t                &lt;groupId&gt;jakarta.activation&lt;/groupId&gt;\r\n\t            &lt;/exclusion&gt;\r\n\t        &lt;/exclusions&gt;\t\t   \r\n\t\t&lt;/dependency&gt;\r\n\r\n\r\nWe use jdk 1.8\r\n\r\nCan any one help? Hopefully @aled any suggestions?\r\n\r\n","title":"Getting an error while trying to read mail through IMAP in mule esb 3.9","body":"<p>We get below error, when we are trying to access our outlook mail which is hosted on Azure Cloud</p>\n<pre><code>    2023-10-24 20:58:30,087 [INFO] mail.test | Cron Job TokenValidityPoll Called\n-&gt;-&gt; Not provider of jakarta.mail.util.StreamProvider was found\n     java.lang.IllegalStateException: Not provider of jakarta.mail.util.StreamProvider was found\n            at jakarta.mail.util.FactoryFinder.find(FactoryFinder.java:61)\n            at jakarta.mail.util.StreamProvider.provider(StreamProvider.java:199)\n            at jakarta.mail.Session.&lt;init&gt;(Session.java:256)\n        at jakarta.mail.Session.getInstance(Session.java:326)\n        at com.test.AzureMailFetcher.imapAuthenticationAttempt(AzureMailFetcher.java:143)\n</code></pre>\n<p>Our code on line 143 is like below (line number marked inside code as comment **)</p>\n<pre><code>private static Store imapAuthenticationAttempt(IAuthenticationResult result) throws MessagingException {\n    String accessToken = result.accessToken();\n    Properties props = new Properties();\n    props.put(&quot;mail.imap.sasl.enable&quot;, &quot;true&quot;);\n    props.put(&quot;mail.imap.sasl.mechanisms&quot;, &quot;XOAUTH2&quot;);\n    props.put(&quot;mail.imap.auth.login.disable&quot;, &quot;true&quot;);\n    props.put(&quot;mail.imap.auth.plain.disable&quot;, &quot;true&quot;);\n    props.put(&quot;mail.imap.ssl.enable&quot;, &quot;true&quot;);\n    Session session = Session.getInstance(props); // This is line number 143 ***\n Store store = session.getStore(&quot;imap&quot;);\n</code></pre>\n<p>The other important fact is that when we are trying to run through a normal java program we are able to make it work. But when we attached it as a mule component, then it started to fail. We are very sure it could be a because of the library incompatibility. But we are not sure, which library is causing this problem. We tried adding and removing few libraries, but yet no result.</p>\n<p>I also tried using eclipse angus library, it resolved this problem but produce a new issue. So I reverted back</p>\n<p>Below are dependencies in my project.</p>\n<p>]</p>\n<pre><code>&lt;dependency&gt;\n            &lt;groupId&gt;com.microsoft.azure&lt;/groupId&gt;\n            &lt;artifactId&gt;msal4j&lt;/artifactId&gt;\n            &lt;version&gt;1.13.8&lt;/version&gt;\n        &lt;/dependency&gt;\n    \n    &lt;dependency&gt;\n        &lt;groupId&gt;jakarta.mail&lt;/groupId&gt;\n        &lt;artifactId&gt;jakarta.mail-api&lt;/artifactId&gt;\n        &lt;version&gt;2.1.2&lt;/version&gt;\n        &lt;exclusions&gt;\n            &lt;exclusion&gt;\n                &lt;artifactId&gt;activation&lt;/artifactId&gt;\n                &lt;groupId&gt;jakarta.activation&lt;/groupId&gt;\n            &lt;/exclusion&gt;\n        &lt;/exclusions&gt;           \n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n       &lt;groupId&gt;com.sun.mail&lt;/groupId&gt;\n       &lt;artifactId&gt;jakarta.mail&lt;/artifactId&gt;\n       &lt;version&gt;2.0.1&lt;/version&gt;\n        &lt;exclusions&gt;\n            &lt;exclusion&gt;\n                &lt;artifactId&gt;activation&lt;/artifactId&gt;\n                &lt;groupId&gt;jakarta.activation&lt;/groupId&gt;\n            &lt;/exclusion&gt;\n        &lt;/exclusions&gt;          \n    &lt;/dependency&gt;\n</code></pre>\n<p>We use jdk 1.8</p>\n<p>Can any one help? Hopefully @aled any suggestions?</p>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":1473276,"reputation":111009,"user_id":1384297,"accept_rate":100,"display_name":"Andy Wilkinson"},"score":0,"creation_date":1497775048,"post_id":44608339,"comment_id":76212726,"body_markdown":"A couple of things to check. 1) Is your development profile active when you are using DevTools? 2) Does it work with a fully-qualified path in application.yml?","body":"A couple of things to check. 1) Is your development profile active when you are using DevTools? 2) Does it work with a fully-qualified path in application.yml?"}],"answers":[{"tags":[],"owner":{"account_id":6528415,"reputation":469,"user_id":5050401,"display_name":"LAXIT KUMAR"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1525864557,"creation_date":1525864557,"answer_id":50252050,"question_id":44608339,"body_markdown":"I had similar problem. &lt;br&gt;\r\n\r\nI added ````spring.resources.static-location=file:../frontend/build```` in ````application.properties````\r\n\r\nUse can also add absolute path&lt;br&gt;\r\n\r\n````spring.resources.static-location=file:/User/XYZ/Desktop/frontend/build````","title":"spring.resources.static-locations not working with devtools","body":"<p>I had similar problem. <br></p>\n\n<p>I added <code>spring.resources.static-location=file:../frontend/build</code> in <code>application.properties</code></p>\n\n<p>Use can also add absolute path<br></p>\n\n<p><code>spring.resources.static-location=file:/User/XYZ/Desktop/frontend/build</code></p>\n"},{"tags":[],"owner":{"account_id":11392182,"reputation":11,"user_id":8351784,"display_name":"Ramesh Panthangi"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1545342216,"creation_date":1545332570,"answer_id":53874565,"question_id":44608339,"body_markdown":"Configure InternalResourceViewResolver to resolve static resources too:\r\n\r\n    public ViewResolver viewResolver() {\r\n        InternalResourceViewResolver viewResolver = new InternalResourceViewResolver();\r\n        viewResolver.setPrefix(&quot;/WEB-INF/classes/static/&quot;);\r\n    \tviewResolver.setSuffix(&quot;&quot;);\r\n        return viewResolver;\r\n    }","title":"spring.resources.static-locations not working with devtools","body":"<p>Configure InternalResourceViewResolver to resolve static resources too:</p>\n\n<pre><code>public ViewResolver viewResolver() {\n    InternalResourceViewResolver viewResolver = new InternalResourceViewResolver();\n    viewResolver.setPrefix(\"/WEB-INF/classes/static/\");\n    viewResolver.setSuffix(\"\");\n    return viewResolver;\n}\n</code></pre>\n"}],"owner":{"account_id":10037707,"reputation":649,"user_id":7421700,"display_name":"Evan"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":9988,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":2,"score":3,"last_activity_date":1698195635,"creation_date":1497725982,"question_id":44608339,"body_markdown":"I have a project with the following structure (just like [spring.io][1]):\r\n\r\n    ├── frontend\r\n    │&#160;&#160; ├── dist\r\n    │&#160;&#160; |   ├── app.js\r\n    │&#160;&#160; |   ├── vendor.js\r\n    │&#160;&#160; |   ├── style.css\r\n    │&#160;&#160; |   ├── index.html\r\n    │&#160;&#160; ├── node_modules\r\n    │&#160;&#160; ├── src\r\n    │&#160;&#160; ├── package.json\r\n    │&#160;&#160; ├── pom.xml\r\n    ├── site\r\n    │&#160;&#160; ├── src\r\n    │&#160;&#160; ├── pom.xml\r\n\r\n`frontend` is a NodeJS project and `site` is a Spring Boot project.\r\n\r\nAll files inside `frontend/dist` (including html) are autogenerated by webpack. In order to access\r\nthem from Spring Boot app I&#39;ve configured development profile.\r\n\r\n**application.yml**\r\n\r\n    spring:\r\n      profiles: development\r\n      resources:\r\n        static-locations:\r\n          - file:../frontend/dist/\r\n\r\nAll works just fine. But when I add [spring-boot-devtools][2] into the site project classpath I get 404 for any file inside `dist` folder.\r\n\r\n    http://localhost:8080/ -&gt; 404\r\n    http://localhost:8080/app.js -&gt; 404\r\n\r\nAgain, no devtools - no problem.\r\n\r\nAlso if I replace static-locations with addResourceHandlers it works too (no matter with or without devtools).\r\n\r\n    public void addResourceHandlers(ResourceHandlerRegistry registry) {\r\n        registry.addResourceHandler(&quot;/**&quot;)\r\n                .addResourceLocations(&quot;file:/full/path/to/frontend/dist/&quot;);\r\n    }\r\n\r\nIs this a devtools bug or my fault?\r\n\r\n---\r\n\r\n**UPDATE:**\r\n\r\nOk thanks to @AndyWilkinson I&#39;ve figured out the cause of the problem. I work in IntelliJ and use run configurations to set env variables. Here is the resulting command line:\r\n\r\n    /usr/lib/jvm/java-8-oracle/bin/java -bla-bla-bla -Didea.version=2017.1.3 -T 2 -Dspring.profiles.active=dev spring-boot:run\r\n\r\nBut if devtools is in the project classpath Spring Boot ignores them:\r\n\r\n    Could not find key &#39;spring.profiles.active&#39; in any property source\r\n    No active profile set, falling back to default profiles: default\r\n\r\nNow if I simply remove devtools from pom.xml\r\n\r\n    The following profiles are active: dev\r\n    Activated profiles dev\r\n\r\n... wow, it works again.\r\n\r\nThe possible workaround is to set active profile directly through application.yml.\r\n\r\n    spring:\r\n      profiles:\r\n        active: dev\r\n    \r\n    ---\r\n    \r\n    spring:\r\n      profiles: dev\r\n      resources:\r\n        static-locations:\r\n          - file:../frontend/dist/\r\n\r\n.. but i don&#39;t like it because it&#39;s inconvenient.\r\n\r\nSo because devtools is such a pain I think I&#39;ll prefer to use F5 as before.\r\n\r\n  [1]: https://github.com/spring-io/sagan\r\n  [2]: https://github.com/spring-projects/spring-boot/tree/master/spring-boot-devtools\r\n","title":"spring.resources.static-locations not working with devtools","body":"<p>I have a project with the following structure (just like <a href=\"https://github.com/spring-io/sagan\" rel=\"nofollow noreferrer\">spring.io</a>):</p>\n\n<pre><code>├── frontend\n│   ├── dist\n│   |   ├── app.js\n│   |   ├── vendor.js\n│   |   ├── style.css\n│   |   ├── index.html\n│   ├── node_modules\n│   ├── src\n│   ├── package.json\n│   ├── pom.xml\n├── site\n│   ├── src\n│   ├── pom.xml\n</code></pre>\n\n<p><code>frontend</code> is a NodeJS project and <code>site</code> is a Spring Boot project.</p>\n\n<p>All files inside <code>frontend/dist</code> (including html) are autogenerated by webpack. In order to access\nthem from Spring Boot app I've configured development profile.</p>\n\n<p><strong>application.yml</strong></p>\n\n<pre><code>spring:\n  profiles: development\n  resources:\n    static-locations:\n      - file:../frontend/dist/\n</code></pre>\n\n<p>All works just fine. But when I add <a href=\"https://github.com/spring-projects/spring-boot/tree/master/spring-boot-devtools\" rel=\"nofollow noreferrer\">spring-boot-devtools</a> into the site project classpath I get 404 for any file inside <code>dist</code> folder.</p>\n\n<pre><code>http://localhost:8080/ -&gt; 404\nhttp://localhost:8080/app.js -&gt; 404\n</code></pre>\n\n<p>Again, no devtools - no problem.</p>\n\n<p>Also if I replace static-locations with addResourceHandlers it works too (no matter with or without devtools).</p>\n\n<pre><code>public void addResourceHandlers(ResourceHandlerRegistry registry) {\n    registry.addResourceHandler(\"/**\")\n            .addResourceLocations(\"file:/full/path/to/frontend/dist/\");\n}\n</code></pre>\n\n<p>Is this a devtools bug or my fault?</p>\n\n<hr>\n\n<p><strong>UPDATE:</strong></p>\n\n<p>Ok thanks to @AndyWilkinson I've figured out the cause of the problem. I work in IntelliJ and use run configurations to set env variables. Here is the resulting command line:</p>\n\n<pre><code>/usr/lib/jvm/java-8-oracle/bin/java -bla-bla-bla -Didea.version=2017.1.3 -T 2 -Dspring.profiles.active=dev spring-boot:run\n</code></pre>\n\n<p>But if devtools is in the project classpath Spring Boot ignores them:</p>\n\n<pre><code>Could not find key 'spring.profiles.active' in any property source\nNo active profile set, falling back to default profiles: default\n</code></pre>\n\n<p>Now if I simply remove devtools from pom.xml</p>\n\n<pre><code>The following profiles are active: dev\nActivated profiles dev\n</code></pre>\n\n<p>... wow, it works again.</p>\n\n<p>The possible workaround is to set active profile directly through application.yml.</p>\n\n<pre><code>spring:\n  profiles:\n    active: dev\n\n---\n\nspring:\n  profiles: dev\n  resources:\n    static-locations:\n      - file:../frontend/dist/\n</code></pre>\n\n<p>.. but i don't like it because it's inconvenient.</p>\n\n<p>So because devtools is such a pain I think I'll prefer to use F5 as before.</p>\n"},{"tags":["java","spring-webflux","flux"],"comments":[{"owner":{"account_id":4688171,"reputation":11056,"user_id":3795036,"accept_rate":88,"display_name":"K.Nicholas"},"score":0,"creation_date":1697900133,"post_id":77336474,"comment_id":136338843,"body_markdown":"This is not acceptable `Flux.fromIterable(requests)` -- `reason: no instance(s) of type variable(s) T exist so that Flux&lt;String&gt; conforms to Iterable&lt;? extends T&gt;` Why would I want to look at an example that doesn&#39;t compile?","body":"This is not acceptable <code>Flux.fromIterable(requests)</code> -- <code>reason: no instance(s) of type variable(s) T exist so that Flux&lt;String&gt; conforms to Iterable&lt;? extends T&gt;</code> Why would I want to look at an example that doesn&#39;t compile?"},{"owner":{"account_id":4072209,"reputation":12687,"user_id":3344829,"accept_rate":67,"display_name":"Saravana"},"score":0,"creation_date":1697904370,"post_id":77336474,"comment_id":136339277,"body_markdown":"this is not an actual code, I just wrote to demonstrate my issue","body":"this is not an actual code, I just wrote to demonstrate my issue"},{"owner":{"account_id":78088,"reputation":35600,"user_id":222467,"accept_rate":67,"display_name":"Igor Artamonov"},"score":0,"creation_date":1697904389,"post_id":77336474,"comment_id":136339281,"body_markdown":"can your `invokeEndpoint` return a `Tuple2` and then aggregate on it?","body":"can your <code>invokeEndpoint</code> return a <code>Tuple2</code> and then aggregate on it?"},{"owner":{"account_id":4072209,"reputation":12687,"user_id":3344829,"accept_rate":67,"display_name":"Saravana"},"score":0,"creation_date":1697904426,"post_id":77336474,"comment_id":136339284,"body_markdown":"no, it can&#39;t return a `Tuple`","body":"no, it can&#39;t return a <code>Tuple</code>"},{"owner":{"account_id":78088,"reputation":35600,"user_id":222467,"accept_rate":67,"display_name":"Igor Artamonov"},"score":0,"creation_date":1697909105,"post_id":77336474,"comment_id":136339750,"body_markdown":"ok, can you wrap the result in a Tuple with the source?","body":"ok, can you wrap the result in a Tuple with the source?"},{"owner":{"account_id":4072209,"reputation":12687,"user_id":3344829,"accept_rate":67,"display_name":"Saravana"},"score":0,"creation_date":1697914246,"post_id":77336474,"comment_id":136340264,"body_markdown":"sorry, I&#39;m not getting, can you post the code?","body":"sorry, I&#39;m not getting, can you post the code?"},{"owner":{"account_id":4688171,"reputation":11056,"user_id":3795036,"accept_rate":88,"display_name":"K.Nicholas"},"score":0,"creation_date":1697920915,"post_id":77336474,"comment_id":136340823,"body_markdown":"@Saravana - Bogus question. No need to wrap a Flux in a Flux even in &#39;demo&#39; code. No need to aggregate the Flux and put it as the last entry. By definition there is no last entry in a Flux. Bogus question.","body":"@Saravana - Bogus question. No need to wrap a Flux in a Flux even in &#39;demo&#39; code. No need to aggregate the Flux and put it as the last entry. By definition there is no last entry in a Flux. Bogus question."},{"owner":{"account_id":78088,"reputation":35600,"user_id":222467,"accept_rate":67,"display_name":"Igor Artamonov"},"score":0,"creation_date":1697949341,"post_id":77336474,"comment_id":136342431,"body_markdown":"@Saravana I mean `flatMap(req -&gt; invokeEndpoint(req).zipWith(Mono.just(req)))`","body":"@Saravana I mean <code>flatMap(req -&gt; invokeEndpoint(req).zipWith(Mono.just(req)))</code>"},{"owner":{"account_id":4072209,"reputation":12687,"user_id":3344829,"accept_rate":67,"display_name":"Saravana"},"score":0,"creation_date":1697959036,"post_id":77336474,"comment_id":136342949,"body_markdown":"@IgorArtamonov I can create a `Tuple2`, I need to return the actual response from the endpoint, and the aggregated response in the same Flux, for ex in the below code I would need to return `[1,2,3,4,5,55]`","body":"@IgorArtamonov I can create a <code>Tuple2</code>, I need to return the actual response from the endpoint, and the aggregated response in the same Flux, for ex in the below code I would need to return <code>[1,2,3,4,5,55]</code>"},{"owner":{"account_id":78088,"reputation":35600,"user_id":222467,"accept_rate":67,"display_name":"Igor Artamonov"},"score":0,"creation_date":1697986593,"post_id":77336474,"comment_id":136345352,"body_markdown":"ah, I misread that you need original request and aggregated response. if it&#39;s just response you don&#39;t need the Tuple of course and you can aggregate as is","body":"ah, I misread that you need original request and aggregated response. if it&#39;s just response you don&#39;t need the Tuple of course and you can aggregate as is"},{"owner":{"account_id":78088,"reputation":35600,"user_id":222467,"accept_rate":67,"display_name":"Igor Artamonov"},"score":0,"creation_date":1697987301,"post_id":77336474,"comment_id":136345416,"body_markdown":"take a look at the answer. in fact I used the `Tuples` anyway, but for a bit different purpose.","body":"take a look at the answer. in fact I used the <code>Tuples</code> anyway, but for a bit different purpose."}],"answers":[{"comments":[{"owner":{"account_id":4072209,"reputation":12687,"user_id":3344829,"accept_rate":67,"display_name":"Saravana"},"score":0,"creation_date":1697929859,"post_id":77337432,"comment_id":136341464,"body_markdown":"I need to return both the actual and aggregated response, i.e. `[1,2,3,4,5,55]`, above code would just return `55`.","body":"I need to return both the actual and aggregated response, i.e. <code>[1,2,3,4,5,55]</code>, above code would just return <code>55</code>."}],"tags":[],"owner":{"account_id":13095640,"reputation":264,"user_id":9461648,"display_name":"kokodyn"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697915527,"creation_date":1697915527,"answer_id":77337432,"question_id":77336474,"body_markdown":"Consider below code. Heavy endpoint is called once per every request. Responses are agregated at the end.\r\n\r\n    @Test\r\n    void test() {\r\n        Flux.fromIterable(Arrays.asList(1, 2, 3, 4, 5))\r\n            .flatMap(this::invokeEndpoint, 10)\r\n            .flatMap(response -&gt; sendOriginalResponse(response).thenReturn(response))\r\n            .reduce(Integer::sum)\r\n            .as(StepVerifier::create)\r\n            .expectNext(55)\r\n            .verifyComplete();\r\n    }\r\n\r\n    private Mono&lt;Integer&gt; sendOriginalResponse(Integer response) {\r\n        return Mono.just(1)\r\n            .doOnNext(i -&gt; System.out.println(&quot;sending original response &quot; + response));\r\n    }\r\n\r\n    private Mono&lt;Integer&gt; invokeEndpoint(Integer i) {\r\n        return Mono.just(i * i).delayElement(Duration.ofSeconds(5))\r\n            .doOnNext(x -&gt; System.out.println(&quot;invoke heavy endpoint for &quot; + i));\r\n    }","title":"Spring WebFlux cache result Flux and reuse it","body":"<p>Consider below code. Heavy endpoint is called once per every request. Responses are agregated at the end.</p>\n<pre><code>@Test\nvoid test() {\n    Flux.fromIterable(Arrays.asList(1, 2, 3, 4, 5))\n        .flatMap(this::invokeEndpoint, 10)\n        .flatMap(response -&gt; sendOriginalResponse(response).thenReturn(response))\n        .reduce(Integer::sum)\n        .as(StepVerifier::create)\n        .expectNext(55)\n        .verifyComplete();\n}\n\nprivate Mono&lt;Integer&gt; sendOriginalResponse(Integer response) {\n    return Mono.just(1)\n        .doOnNext(i -&gt; System.out.println(&quot;sending original response &quot; + response));\n}\n\nprivate Mono&lt;Integer&gt; invokeEndpoint(Integer i) {\n    return Mono.just(i * i).delayElement(Duration.ofSeconds(5))\n        .doOnNext(x -&gt; System.out.println(&quot;invoke heavy endpoint for &quot; + i));\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":4072209,"reputation":12687,"user_id":3344829,"accept_rate":67,"display_name":"Saravana"},"score":0,"creation_date":1698166442,"post_id":77340498,"comment_id":136369715,"body_markdown":"thanks @Igor, this approach may not help, since the reduce operation will be a synchronous, each element wont be streamed as and when received from endpoint method, rather it would be accumulated and streamed at once. What I&#39;m trying to achieve is stream the data as soon as received, accumulate the streamed data as a very last element","body":"thanks @Igor, this approach may not help, since the reduce operation will be a synchronous, each element wont be streamed as and when received from endpoint method, rather it would be accumulated and streamed at once. What I&#39;m trying to achieve is stream the data as soon as received, accumulate the streamed data as a very last element"},{"owner":{"account_id":78088,"reputation":35600,"user_id":222467,"accept_rate":67,"display_name":"Igor Artamonov"},"score":0,"creation_date":1698175106,"post_id":77340498,"comment_id":136371205,"body_markdown":"it&#39;s not synchronous but it&#39;s an aggregation indeed, as it seemed that that&#39;s what you asked for","body":"it&#39;s not synchronous but it&#39;s an aggregation indeed, as it seemed that that&#39;s what you asked for"},{"owner":{"account_id":78088,"reputation":35600,"user_id":222467,"accept_rate":67,"display_name":"Igor Artamonov"},"score":0,"creation_date":1698175272,"post_id":77340498,"comment_id":136371223,"body_markdown":"but if you want to produce the inputs before the aggregation result and don&#39;t keep them in memory I guess you can use `scan` instead of `reduce`","body":"but if you want to produce the inputs before the aggregation result and don&#39;t keep them in memory I guess you can use <code>scan</code> instead of <code>reduce</code>"},{"owner":{"account_id":4072209,"reputation":12687,"user_id":3344829,"accept_rate":67,"display_name":"Saravana"},"score":0,"creation_date":1698176037,"post_id":77340498,"comment_id":136371352,"body_markdown":"with `scan` or `reduce` redundant calls are made to the endpoint","body":"with <code>scan</code> or <code>reduce</code> redundant calls are made to the endpoint"},{"owner":{"account_id":4072209,"reputation":12687,"user_id":3344829,"accept_rate":67,"display_name":"Saravana"},"score":0,"creation_date":1698176257,"post_id":77340498,"comment_id":136371381,"body_markdown":"I got it now, let me try. Thanks","body":"I got it now, let me try. Thanks"},{"owner":{"account_id":78088,"reputation":35600,"user_id":222467,"accept_rate":67,"display_name":"Igor Artamonov"},"score":1,"creation_date":1698178131,"post_id":77340498,"comment_id":136371713,"body_markdown":"yeah, I&#39;m not sure yet how it could look like with `scan`, I guess it would require some additional steps, but it&#39;s probably the way that could solve your problem","body":"yeah, I&#39;m not sure yet how it could look like with <code>scan</code>, I guess it would require some additional steps, but it&#39;s probably the way that could solve your problem"},{"owner":{"account_id":78088,"reputation":35600,"user_id":222467,"accept_rate":67,"display_name":"Igor Artamonov"},"score":0,"creation_date":1698195046,"post_id":77340498,"comment_id":136373553,"body_markdown":"@Saravana see an update with `scan` version","body":"@Saravana see an update with <code>scan</code> version"}],"tags":[],"owner":{"account_id":78088,"reputation":35600,"user_id":222467,"accept_rate":67,"display_name":"Igor Artamonov"},"comment_count":7,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1698195029,"creation_date":1697987240,"answer_id":77340498,"question_id":77336474,"body_markdown":"You can just keep the original value during the aggregation step, i.e. process them as pairs, and then concat both sides at the last step:\r\n\r\n    private Flux&lt;Integer&gt; getResponse(List&lt;String&gt; requests){\r\n       Flux&lt;Integer&gt; data = Flux.fromIterable(requests)\r\n          .flatMap(this::invokeEndpoint, 10);\r\n       return aggregate(data))\r\n          .flatMapMany(Flux::fromIterable);\r\n    }\r\n    \r\n    private Mono&lt;List&lt;Integer&gt;&gt; aggregate(Flux&lt;Integer&gt; res){\r\n       return res\r\n           .map((a) -&gt; Tuples.of(Arrays.asList(a), a)) \r\n           .reduce((a, b) -&gt; {\r\n               List&lt;Integer&gt; all = new ArrayList(a.getT1());\r\n               all.addAll(b.getT1());\r\n               Tuples.of(all, a.getT2() + b.getT2());\r\n           })\r\n           .map(ab -&gt; { \r\n               List&lt;Integer&gt; all = new ArrayList(ab.getT1());\r\n               all.add(ab.getT2());\r\n               all;\r\n           });\r\n    }\r\n\r\nUPDATE: turns out the data needs to be produces as it comes in, followed by the aggregated result at the last item.\r\n\r\nIn this case a `scan` can be useful. But the main problem is that an addition message must be added at the last step. There are few ways, but it seems that in any case you have to keep it somewhere outside of the Flux flow.\r\n\r\nOne way is to utilize `doOnNext` and then `concat` it, like:\r\n\r\n    private Flux&lt;Integer&gt; aggregate(Flux&lt;Integer&gt; res){\r\n       Tuple2&lt;Integer, Integer&gt; last = null\r\n       return res\r\n           .scan(Tuples.of(0, 0), (a, b) -&gt; {\r\n               Tuples.of(b, a.getT1() + b);\r\n           })\r\n           .skip(1)\r\n           .doOnNext((a) -&gt; { last = a; })\r\n           .map(a -&gt; { a.getT1(); })\r\n           .concatWith(Mono.fromCallable { last.getT2() })\r\n    }\r\n\r\nI&#39;m not sure that `doOnNext` is a very reactor-like code, though. \r\n\r\nSo it could be also using the `materialize` and handling the `onComplete` signal to produce the aggregated value:\r\n\r\n    private Flux&lt;Integer&gt; aggregate(Flux&lt;Integer&gt; res){\r\n       Tuple2&lt;Integer, Integer&gt; last = null\r\n       return res\r\n           .scan(Tuples.of(0, 0), (a, b) -&gt; {\r\n               Tuples.of(b, a.getT1() + b);\r\n           })\r\n           .skip(1)\r\n           .materialize() \r\n           .handle((s, t) -&gt; {\r\n              if (t.getType() == SignalType.ON_NEXT) {\r\n                  last = t.get();\r\n                  s.next(t.get().getT1());\r\n              } else if (t.getType() == SignalType.ON_COMPLETE) {\r\n                  if (last != null) {\r\n                      s.next(last.getT2())\r\n                  }\r\n                  s.complete()\r\n              } else if (t.type == SignalType.ON_ERROR) {\r\n                  s.error(t.getThrowable())\r\n              }\r\n           })\r\n    }\r\n","title":"Spring WebFlux cache result Flux and reuse it","body":"<p>You can just keep the original value during the aggregation step, i.e. process them as pairs, and then concat both sides at the last step:</p>\n<pre><code>private Flux&lt;Integer&gt; getResponse(List&lt;String&gt; requests){\n   Flux&lt;Integer&gt; data = Flux.fromIterable(requests)\n      .flatMap(this::invokeEndpoint, 10);\n   return aggregate(data))\n      .flatMapMany(Flux::fromIterable);\n}\n\nprivate Mono&lt;List&lt;Integer&gt;&gt; aggregate(Flux&lt;Integer&gt; res){\n   return res\n       .map((a) -&gt; Tuples.of(Arrays.asList(a), a)) \n       .reduce((a, b) -&gt; {\n           List&lt;Integer&gt; all = new ArrayList(a.getT1());\n           all.addAll(b.getT1());\n           Tuples.of(all, a.getT2() + b.getT2());\n       })\n       .map(ab -&gt; { \n           List&lt;Integer&gt; all = new ArrayList(ab.getT1());\n           all.add(ab.getT2());\n           all;\n       });\n}\n</code></pre>\n<p>UPDATE: turns out the data needs to be produces as it comes in, followed by the aggregated result at the last item.</p>\n<p>In this case a <code>scan</code> can be useful. But the main problem is that an addition message must be added at the last step. There are few ways, but it seems that in any case you have to keep it somewhere outside of the Flux flow.</p>\n<p>One way is to utilize <code>doOnNext</code> and then <code>concat</code> it, like:</p>\n<pre><code>private Flux&lt;Integer&gt; aggregate(Flux&lt;Integer&gt; res){\n   Tuple2&lt;Integer, Integer&gt; last = null\n   return res\n       .scan(Tuples.of(0, 0), (a, b) -&gt; {\n           Tuples.of(b, a.getT1() + b);\n       })\n       .skip(1)\n       .doOnNext((a) -&gt; { last = a; })\n       .map(a -&gt; { a.getT1(); })\n       .concatWith(Mono.fromCallable { last.getT2() })\n}\n</code></pre>\n<p>I'm not sure that <code>doOnNext</code> is a very reactor-like code, though.</p>\n<p>So it could be also using the <code>materialize</code> and handling the <code>onComplete</code> signal to produce the aggregated value:</p>\n<pre><code>private Flux&lt;Integer&gt; aggregate(Flux&lt;Integer&gt; res){\n   Tuple2&lt;Integer, Integer&gt; last = null\n   return res\n       .scan(Tuples.of(0, 0), (a, b) -&gt; {\n           Tuples.of(b, a.getT1() + b);\n       })\n       .skip(1)\n       .materialize() \n       .handle((s, t) -&gt; {\n          if (t.getType() == SignalType.ON_NEXT) {\n              last = t.get();\n              s.next(t.get().getT1());\n          } else if (t.getType() == SignalType.ON_COMPLETE) {\n              if (last != null) {\n                  s.next(last.getT2())\n              }\n              s.complete()\n          } else if (t.type == SignalType.ON_ERROR) {\n              s.error(t.getThrowable())\n          }\n       })\n}\n</code></pre>\n"}],"owner":{"account_id":4072209,"reputation":12687,"user_id":3344829,"accept_rate":67,"display_name":"Saravana"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":103,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1698195029,"creation_date":1697899219,"question_id":77336474,"body_markdown":"I have a use case where I need to cache the flux response and reuse it\r\n\r\nFor ex. here the, `invokeEndpoint` calls an external endpoint to get a response. Once I get the response I need to send the original response received and `aggregate`d response.\r\n\r\nWith the below code, the aggregate method also make the same endpoint call, which I&#39;m trying to avoid since the request is heavy to get the response.\r\n\r\nI tried using `cache` and `share` on the `data`, but it doesn&#39;t seem to working, I see redundant calls are being made which I&#39;m trying to avoid.\r\n\r\n    private Flux&lt;Integer&gt; getResponse(List&lt;String&gt; requests){\r\n       Flux&lt;Integer&gt; data = Flux.fromIterable(requests)\r\n          .flatMap(this::invokeEndpoint, 10);\r\n       //   .share(); // no luck\r\n       //   .cache(); // no luck\r\n       return Flux.concat(data, aggregate(data));\r\n    }\r\n    \r\n    private Mono&lt;Integer&gt; aggregate(Flux&lt;Integer&gt; res){\r\n       return res.reduce((a, b) -&gt; a + b); //redundant call\r\n    }\r\n\r\n\r\nThe documentation is not helping much, any idea how can we cache and reuse the Flux?","title":"Spring WebFlux cache result Flux and reuse it","body":"<p>I have a use case where I need to cache the flux response and reuse it</p>\n<p>For ex. here the, <code>invokeEndpoint</code> calls an external endpoint to get a response. Once I get the response I need to send the original response received and <code>aggregate</code>d response.</p>\n<p>With the below code, the aggregate method also make the same endpoint call, which I'm trying to avoid since the request is heavy to get the response.</p>\n<p>I tried using <code>cache</code> and <code>share</code> on the <code>data</code>, but it doesn't seem to working, I see redundant calls are being made which I'm trying to avoid.</p>\n<pre><code>private Flux&lt;Integer&gt; getResponse(List&lt;String&gt; requests){\n   Flux&lt;Integer&gt; data = Flux.fromIterable(requests)\n      .flatMap(this::invokeEndpoint, 10);\n   //   .share(); // no luck\n   //   .cache(); // no luck\n   return Flux.concat(data, aggregate(data));\n}\n\nprivate Mono&lt;Integer&gt; aggregate(Flux&lt;Integer&gt; res){\n   return res.reduce((a, b) -&gt; a + b); //redundant call\n}\n</code></pre>\n<p>The documentation is not helping much, any idea how can we cache and reuse the Flux?</p>\n"},{"tags":["java","swing","jscrollpane","graphics2d","visual-glitch"],"comments":[{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":1,"creation_date":1698107467,"post_id":77348727,"comment_id":136360772,"body_markdown":"_&quot;... I added a button that just triggers a `repaint()` ...&quot;_, have it repaint whenever the _JScrollPane_ view port is adjusted, or zoomed.","body":"<i>&quot;... I added a button that just triggers a <code>repaint()</code> ...&quot;</i>, have it repaint whenever the <i>JScrollPane</i> view port is adjusted, or zoomed."},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1698108574,"post_id":77348727,"comment_id":136360868,"body_markdown":"@Reilas That definitely answers half of my question. Ty vm! If you are able to answer the other half, I would encourage you to post your full response as an answer, and I would accept it if it meets my needs.","body":"@Reilas That definitely answers half of my question. Ty vm! If you are able to answer the other half, I would encourage you to post your full response as an answer, and I would accept it if it meets my needs."},{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":0,"creation_date":1698108676,"post_id":77348727,"comment_id":136360874,"body_markdown":"What is the other half of your question?","body":"What is the other half of your question?"},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1698108771,"post_id":77348727,"comment_id":136360885,"body_markdown":"@Reilas The why of how this occurs. I don&#39;t want to just slap on quick fixes without understanding why I am doing it and why they are necessary. If I was ok with that, I would be coding in JavaScript :P","body":"@Reilas The why of how this occurs. I don&#39;t want to just slap on quick fixes without understanding why I am doing it and why they are necessary. If I was ok with that, I would be coding in JavaScript :P"},{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":1,"creation_date":1698109785,"post_id":77348727,"comment_id":136360957,"body_markdown":"`gui.drawingAreaScrollPane.getViewport().getViewRect();` might be your first mistake, maybe, instead, look at the clipping rectangle of the `Graphics` context. `if (!(dontUse instanceof Graphics2D g))` is also pointless, I think since 1.3 or 4 your guaranteed to get a `Graphics2D` instance","body":"<code>gui.drawingAreaScrollPane.getViewport().getViewRect();</code> might be your first mistake, maybe, instead, look at the clipping rectangle of the <code>Graphics</code> context. <code>if (!(dontUse instanceof Graphics2D g))</code> is also pointless, I think since 1.3 or 4 your guaranteed to get a <code>Graphics2D</code> instance"},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1698111996,"post_id":77348727,"comment_id":136361099,"body_markdown":"@MadProgrammer I don&#39;t fully understand - I see a method called `getClipBounds`, which appears to be what you are talking about. What does that give me over my original way?","body":"@MadProgrammer I don&#39;t fully understand - I see a method called <code>getClipBounds</code>, which appears to be what you are talking about. What does that give me over my original way?"},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1698112358,"post_id":77348727,"comment_id":136361117,"body_markdown":"@MadProgrammer WOW, so that fixed it. Why on earth? Do you have any insight why?","body":"@MadProgrammer WOW, so that fixed it. Why on earth? Do you have any insight why?"},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":1,"creation_date":1698112845,"post_id":77348727,"comment_id":136361144,"body_markdown":"The clip rectangle is how Swing paints only a part of the component for efficiency. For example if you use repaint(?, ?, ?, ?) you can create your own clipping area. Compare the Rectangle you calculate with your original method with the clipping area used by Swing to see what the difference is. Note, when I tried the suggestion it still didn&#39;t work for me, but maybe I didn&#39;t change it correctly.","body":"The clip rectangle is how Swing paints only a part of the component for efficiency. For example if you use repaint(?, ?, ?, ?) you can create your own clipping area. Compare the Rectangle you calculate with your original method with the clipping area used by Swing to see what the difference is. Note, when I tried the suggestion it still didn&#39;t work for me, but maybe I didn&#39;t change it correctly."},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1698113119,"post_id":77348727,"comment_id":136361163,"body_markdown":"@camickr I switched `final Rectangle rectangle  = gui.drawingAreaScrollPane.getViewport().getViewRect();` to be `final Rectangle rectangle  = g.getClipBounds();`, and it worked fine for me.","body":"@camickr I switched <code>final Rectangle rectangle  = gui.drawingAreaScrollPane.getViewport().getViewRect();</code> to be <code>final Rectangle rectangle  = g.getClipBounds();</code>, and it worked fine for me."},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1698113215,"post_id":77348727,"comment_id":136361170,"body_markdown":"@camickr And based on what you are saying, I actually have written a lot redundant code. Am I understanding you correctly here? Or is the way I did it (`g.drawImage...`) still the correct way? Or am I misinterpreting you entirely?","body":"@camickr And based on what you are saying, I actually have written a lot redundant code. Am I understanding you correctly here? Or is the way I did it (<code>g.drawImage...</code>) still the correct way? Or am I misinterpreting you entirely?"},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":1,"creation_date":1698116092,"post_id":77348727,"comment_id":136361374,"body_markdown":"1) Yes, that is how I changed my code. 2) When I drag the vertical scrollbar down it seems to paint correctly. However when I drag it up I sometimes see a square where the top part of the square is not painted. Sometimes it self corrects when I do down/up again. Not sure what is happening. 3) I never really understand how zooming works so I have no suggestions. 4) I was just trying to state that even though you were calculating a rectangle the size of the viewport the clip rectangle is only a few pixels high so only a small area of the viewport is repainted. You still need to scale the image.","body":"1) Yes, that is how I changed my code. 2) When I drag the vertical scrollbar down it seems to paint correctly. However when I drag it up I sometimes see a square where the top part of the square is not painted. Sometimes it self corrects when I do down/up again. Not sure what is happening. 3) I never really understand how zooming works so I have no suggestions. 4) I was just trying to state that even though you were calculating a rectangle the size of the viewport the clip rectangle is only a few pixels high so only a small area of the viewport is repainted. You still need to scale the image."},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":2,"creation_date":1698116253,"post_id":77348727,"comment_id":136361388,"body_markdown":"Maybe you can use the scale() and translate() methods of the Graphics2D class to simplify the code. Or maybe use an AffineTransform. I think that is what I see in other postings.","body":"Maybe you can use the scale() and translate() methods of the Graphics2D class to simplify the code. Or maybe use an AffineTransform. I think that is what I see in other postings."},{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":1,"creation_date":1698117790,"post_id":77348727,"comment_id":136361485,"body_markdown":"First, `JScrollPane` is very optimised, you really don&#39;t want to mess with it.  Second, as has been stated, the coordinates between the view rect and the component may be different, since they are different component contexts - you&#39;re basically reaching out side of the component&#39;s own context and trying to use to use a different components context - not a good idea","body":"First, <code>JScrollPane</code> is very optimised, you really don&#39;t want to mess with it.  Second, as has been stated, the coordinates between the view rect and the component may be different, since they are different component contexts - you&#39;re basically reaching out side of the component&#39;s own context and trying to use to use a different components context - not a good idea"},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1698117876,"post_id":77348727,"comment_id":136361496,"body_markdown":"@camickr Oh, sometimes, the visual defect only shows up if you scroll right or left. In the example I posted above, it actually only shows up for me if I do it right to left. So I scroll down, then right. As for zoom, really, I am just using `Graphics::drawImage` to do my zooming. I provide the scale at which I am doing this as method parameters. The scale is influenced by my JSpinner-set value.","body":"@camickr Oh, sometimes, the visual defect only shows up if you scroll right or left. In the example I posted above, it actually only shows up for me if I do it right to left. So I scroll down, then right. As for zoom, really, I am just using <code>Graphics::drawImage</code> to do my zooming. I provide the scale at which I am doing this as method parameters. The scale is influenced by my JSpinner-set value."},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1698118751,"post_id":77348727,"comment_id":136361559,"body_markdown":"@MadProgrammer So, I understand how what I did was a bad practice. But I&#39;m still lost on how your strategy ended up solving things. Ultimately, we both provide rectangles, and they both seem to be covering the same areas and with the same x/y coordinates. So what changed between them that caused different behaviour?","body":"@MadProgrammer So, I understand how what I did was a bad practice. But I&#39;m still lost on how your strategy ended up solving things. Ultimately, we both provide rectangles, and they both seem to be covering the same areas and with the same x/y coordinates. So what changed between them that caused different behaviour?"},{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":1,"creation_date":1698120757,"post_id":77348727,"comment_id":136361667,"body_markdown":"@davidalayachew The view rectangles are providing different offsets - the clip will be within the components coordinate context, the view rect from the `JScrollPane` will be within it&#39;s - different contexts","body":"@davidalayachew The view rectangles are providing different offsets - the clip will be within the components coordinate context, the view rect from the <code>JScrollPane</code> will be within it&#39;s - different contexts"},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1698123151,"post_id":77348727,"comment_id":136361838,"body_markdown":"@MadProgrammer Maybe the word context means something that I am not understanding then. Yes, the offsets are different, and the rectangles have different contexts (which I am interpreting to mean that they have different backgrounds from which they came from). But ultimately, they both ended up creating the same image. The only difference is that one creates unpleasant visual artifacts until the `JComponent` has repainted and revalidated itself. So my question is, if the final image being created is the same upon repaint, what is the significance of context that it would influence this?","body":"@MadProgrammer Maybe the word context means something that I am not understanding then. Yes, the offsets are different, and the rectangles have different contexts (which I am interpreting to mean that they have different backgrounds from which they came from). But ultimately, they both ended up creating the same image. The only difference is that one creates unpleasant visual artifacts until the <code>JComponent</code> has repainted and revalidated itself. So my question is, if the final image being created is the same upon repaint, what is the significance of context that it would influence this?"},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1698123252,"post_id":77348727,"comment_id":136361849,"body_markdown":"@MadProgrammer I&#39;m just not seeing the connection between what context would give me and what would cause this problem to be solved. But of course, I am starting to think that you are saying words that I don&#39;t understand the full meaning of either. You may need to ELI5 this to me.","body":"@MadProgrammer I&#39;m just not seeing the connection between what context would give me and what would cause this problem to be solved. But of course, I am starting to think that you are saying words that I don&#39;t understand the full meaning of either. You may need to ELI5 this to me."},{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":1,"creation_date":1698128121,"post_id":77348727,"comment_id":136362332,"body_markdown":"@davidalayachew So, a component has two &quot;contexts&quot; in reference to it&#39;s location, the local &quot;context&quot; and it&#39;s external &quot;context&quot;, so when painting, you use the &quot;local&quot; context, where the `0x0` is the top/left position of the component (as opposed to it&#39;s external context, which the parent uses to position the component - not try and mix the contexts, it messes things up :P","body":"@davidalayachew So, a component has two &quot;contexts&quot; in reference to it&#39;s location, the local &quot;context&quot; and it&#39;s external &quot;context&quot;, so when painting, you use the &quot;local&quot; context, where the <code>0x0</code> is the top/left position of the component (as opposed to it&#39;s external context, which the parent uses to position the component - not try and mix the contexts, it messes things up :P"},{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":1,"creation_date":1698136279,"post_id":77348727,"comment_id":136363703,"body_markdown":"I should say “coordinate context”, so a “local” context will have the top/left corner at 0x0, where as the “container” or “external” context will have the top/left corner be the position within its parent container. Graphics/custom painting  are defined in the “local coordinate context”","body":"I should say “coordinate context”, so a “local” context will have the top/left corner at 0x0, where as the “container” or “external” context will have the top/left corner be the position within its parent container. Graphics/custom painting  are defined in the “local coordinate context”"},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1698181632,"post_id":77348727,"comment_id":136372231,"body_markdown":"@MadProgrammer Ok, so I now understand about contexts. But if you look at my code, I am essentially recreating a local context from an external context. I am offsetting and transforming my coordinates from the external rectangle to recreate the local. Obviously unideal, and I firmly agree that it is a bad practice that I intend to fix ASAP.","body":"@MadProgrammer Ok, so I now understand about contexts. But if you look at my code, I am essentially recreating a local context from an external context. I am offsetting and transforming my coordinates from the external rectangle to recreate the local. Obviously unideal, and I firmly agree that it is a bad practice that I intend to fix ASAP."},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1698181639,"post_id":77348727,"comment_id":136372233,"body_markdown":"@MadProgrammer But that does not answer my question. Ultimately, I am seeing that I end up with the exact same rectangle -- either because it was created that way, or I manually massaged it into shape. My question remains -- if the resulting rectangle is the same, why is it working with one method when it wasn&#39;t with the other? Does Rectangle have some hidden properties that I do not know about?","body":"@MadProgrammer But that does not answer my question. Ultimately, I am seeing that I end up with the exact same rectangle -- either because it was created that way, or I manually massaged it into shape. My question remains -- if the resulting rectangle is the same, why is it working with one method when it wasn&#39;t with the other? Does Rectangle have some hidden properties that I do not know about?"},{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":1,"creation_date":1698184154,"post_id":77348727,"comment_id":136372573,"body_markdown":"@davidalayachew *&quot;I am offsetting and transforming my coordinates from the external rectangle to recreate the local&quot;* and that seems wrong to me, because the `Graphics` context is already translated to the represent the local context. You don&#39;t seem to be translating the external coordinate context to the local context (so that the `x/y` position is relative to the `0x0` position of the component itself)","body":"@davidalayachew <i>&quot;I am offsetting and transforming my coordinates from the external rectangle to recreate the local&quot;</i> and that seems wrong to me, because the <code>Graphics</code> context is already translated to the represent the local context. You don&#39;t seem to be translating the external coordinate context to the local context (so that the <code>x&#47;y</code> position is relative to the <code>0x0</code> position of the component itself)"},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1698187014,"post_id":77348727,"comment_id":136372915,"body_markdown":"@MadProgrammer Ok, if that is the case, maybe that is where my problem is. I&#39;ll dig into that another time. Still, ty for the help.","body":"@MadProgrammer Ok, if that is the case, maybe that is where my problem is. I&#39;ll dig into that another time. Still, ty for the help."},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1698273753,"post_id":77348727,"comment_id":136386037,"body_markdown":"@MadProgrammer in my shock and surprise, I overlooked something that camickr just pointed out -- while I managed to &quot;translate&quot; the x and y coordinates from the external context into the local one, I completely neglected to notice that the width and height are actually completely different between the old way that I started with and the clip bounds that you pointed out. I am pretty sure that that was what I was missing. But I will delve further into that another time to confirm.","body":"@MadProgrammer in my shock and surprise, I overlooked something that camickr just pointed out -- while I managed to &quot;translate&quot; the x and y coordinates from the external context into the local one, I completely neglected to notice that the width and height are actually completely different between the old way that I started with and the clip bounds that you pointed out. I am pretty sure that that was what I was missing. But I will delve further into that another time to confirm."},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1698273963,"post_id":77348727,"comment_id":136386059,"body_markdown":"One thing I am noticing though -- for me, I was struggling to understand the problem because I wanted to understand exactly how the break occurred. I&#39;m slowly starting to realize that I don&#39;t need to delve into the realms of undefined behaviour and all the ways that my code could break. I should instead just stick to above mentioned best practices and not try to understand every single edge case of it until needed (as in, I need to use the edge case, and therefore, I need to understand it). Thank you to both you and @camickr for all of the help!","body":"One thing I am noticing though -- for me, I was struggling to understand the problem because I wanted to understand exactly how the break occurred. I&#39;m slowly starting to realize that I don&#39;t need to delve into the realms of undefined behaviour and all the ways that my code could break. I should instead just stick to above mentioned best practices and not try to understand every single edge case of it until needed (as in, I need to use the edge case, and therefore, I need to understand it). Thank you to both you and @camickr for all of the help!"}],"answers":[{"comments":[{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1698272569,"post_id":77356022,"comment_id":136385908,"body_markdown":"Hey, thank you for posting this. First off, I actually made a couple of mistakes. As you pointed out, while I &quot;converted&quot; the x and y coordinates to be equivalent across contexts, the height and width are different. In my surprise to see that the suggested solution worked, I forgot to check height and width.","body":"Hey, thank you for posting this. First off, I actually made a couple of mistakes. As you pointed out, while I &quot;converted&quot; the x and y coordinates to be equivalent across contexts, the height and width are different. In my surprise to see that the suggested solution worked, I forgot to check height and width."},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1698272659,"post_id":77356022,"comment_id":136385919,"body_markdown":"As for the poor organization, you are right on the money. I am still not great at that, as you have seen from several of my other questions that you have answered. This is my first time delving into custom painting, so I will refactor my solution to follow the protocols for custom painting that you pointed out.","body":"As for the poor organization, you are right on the money. I am still not great at that, as you have seen from several of my other questions that you have answered. This is my first time delving into custom painting, so I will refactor my solution to follow the protocols for custom painting that you pointed out."},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1698272860,"post_id":77356022,"comment_id":136385940,"body_markdown":"As for your simplification, I feel like I originally started out with that, but then switched away from it because of performance problems. I may have made a premature decision however. I will experiment with this and give it a shot.","body":"As for your simplification, I feel like I originally started out with that, but then switched away from it because of performance problems. I may have made a premature decision however. I will experiment with this and give it a shot."},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1698273245,"post_id":77356022,"comment_id":136385979,"body_markdown":"Also LOL on the `getPreferredSize`. I actually spent a very long time trying to figure out how on earth I could accomplish doing a zoom. The best that I could think of was to recreate whatever component, but bigger. I then tried to find the simplest `JComponent` I could find, and ended up landing on `Box.Filler`. In retrospect, setting the size of `setPreferredSize` is mind-numbingly obvious that my lack of creativity here amazes me LOL.","body":"Also LOL on the <code>getPreferredSize</code>. I actually spent a very long time trying to figure out how on earth I could accomplish doing a zoom. The best that I could think of was to recreate whatever component, but bigger. I then tried to find the simplest <code>JComponent</code> I could find, and ended up landing on <code>Box.Filler</code>. In retrospect, setting the size of <code>setPreferredSize</code> is mind-numbingly obvious that my lack of creativity here amazes me LOL."},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1698273256,"post_id":77356022,"comment_id":136385980,"body_markdown":"Though, in my defense, I recall seeing somewhere that someone said resizing `Box.Filler` in particular was discouraged. Doesn&#39;t change the fact that I should have tried it before trying whatever I was doing LOL","body":"Though, in my defense, I recall seeing somewhere that someone said resizing <code>Box.Filler</code> in particular was discouraged. Doesn&#39;t change the fact that I should have tried it before trying whatever I was doing LOL"},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1698273355,"post_id":77356022,"comment_id":136385990,"body_markdown":"I do not understand point 5 however. Can you go into more detail?","body":"I do not understand point 5 however. Can you go into more detail?"},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1698273530,"post_id":77356022,"comment_id":136386012,"body_markdown":"Otherwise though, thanks for the insight! You, @MadProgrammer, and a couple others consistently do a lot for us junior devs learning Swing. The time and effort you all put into this is appreciated.","body":"Otherwise though, thanks for the insight! You, @MadProgrammer, and a couple others consistently do a lot for us junior devs learning Swing. The time and effort you all put into this is appreciated."},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":1,"creation_date":1698278349,"post_id":77356022,"comment_id":136386418,"body_markdown":"*I do not understand point 5* - how do you change the text/icon in a JLabel? Do you create a new JLabel? No, you invoke the setText(...) or setIcon(...) method. So when youi want to change the zoom factor do you create a new drawing panel? No, you invoke a method on the drawing panel to set the zoom parameter. See: https://stackoverflow.com/a/52571767/131872 as a simple example. It does a rotation, not a zoom, buy you should get the idea.","body":"<i>I do not understand point 5</i> - how do you change the text/icon in a JLabel? Do you create a new JLabel? No, you invoke the setText(...) or setIcon(...) method. So when youi want to change the zoom factor do you create a new drawing panel? No, you invoke a method on the drawing panel to set the zoom parameter. See: <a href=\"https://stackoverflow.com/a/52571767/131872\">stackoverflow.com/a/52571767/131872</a> as a simple example. It does a rotation, not a zoom, buy you should get the idea."},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":1,"creation_date":1698278353,"post_id":77356022,"comment_id":136386420,"body_markdown":"Note it is NOT a complete example because it does not implement the `getPreferredSize()` method to consider how the size of the image changes as the angle of rotation changes. It does demonstes the concept of responding to an event to change a property of the class.","body":"Note it is NOT a complete example because it does not implement the <code>getPreferredSize()</code> method to consider how the size of the image changes as the angle of rotation changes. It does demonstes the concept of responding to an event to change a property of the class."},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1698284611,"post_id":77356022,"comment_id":136386919,"body_markdown":"Perfect, ty vm. In that case, this answer meets my needs, and I now understand what to do. Ty again!","body":"Perfect, ty vm. In that case, this answer meets my needs, and I now understand what to do. Ty again!"},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1698284876,"post_id":77356022,"comment_id":136386946,"body_markdown":"Oh, and about the code not working -- I am developing using JDK 21. Really, I am using the beta version of JDK 22, but everything I am doing should work just fine with JDK 21. My compile command is `javac --enable-preview --source 21 GUI.java`. My run command is `java --enable-preview GUI`.","body":"Oh, and about the code not working -- I am developing using JDK 21. Really, I am using the beta version of JDK 22, but everything I am doing should work just fine with JDK 21. My compile command is <code>javac --enable-preview --source 21 GUI.java</code>. My run command is <code>java --enable-preview GUI</code>."}],"tags":[],"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"comment_count":11,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1698193761,"creation_date":1698193761,"answer_id":77356022,"question_id":77348727,"body_markdown":"The more I look at your code the more confused I am. I must admit I don&#39;t recognize half of the coding constructs you are using. \r\n\r\nHowever, from what I do understand, it appears to me you don&#39;t understand the basics of how custom painting works. You should read the Swing tutorial on [Custom Painting](https://docs.oracle.com/javase/tutorial/uiswing/painting/index.html) for a basic example. \r\n\r\nSome tips:\r\n\r\n1. the code for the painting should be self contained in a class. \r\n2. you pass parameters to the class to control the painting. Parameters such as rows, columns, image, zoom factor. \r\n3. the paintComponent method will directly reference the above parameters. \r\n4. you override the `getPreferredSize()` method to control the size of your component. This method would likely reference your image and the zoom factor. The way you currenlty set the size buy creating a new Box.Filler is unique to say the least.\r\n5. the code for your ActionListeners should not be recreating the drawing panel. Instead you just invoke a method on the panel to update a property and then invoke revalidate() and repaint().\r\n\r\nBecause you don&#39;t follow the standard coding conventions the code becomes overly complex (to me anyway). I can&#39;t think of any good reasons for the code to be structured this way.\r\n\r\nI am still confused about your claim that using:\r\n\r\n    //final Rectangle rectangle  = gui.drawingAreaScrollPane.getViewport().getViewRect();\r\n    final Rectangle rectangle  = g.getClipBounds(); \r\n\r\nfixes the problem. As I stated earlier it did not fix the problem for me.\r\n\r\nDid you try displaying the Rectangle in both cases to compare the values? Do you understand what the differences mean? I&#39;m not understanding your discussion with MadProgrammer about the &quot;context&quot;. In both cases the Rectangle uses the proper x/y location relative to (0, 0) of the components. The difference is that your approach uses a larger area since the width/height values will be the size of the viewport, not the size of the scroll distance. \r\n\r\nIn any case I downloaded your code again and retested. The strangest thing is that your original code now works (after I made a couple of coding changes since your syntax doesn&#39;t work for me with JDK11). \r\n\r\nI also simplified the drawImage statement to just use:\r\n\r\n    g.drawImage(gui.image, 0, 0, image.getWidth() * gui.screenToImagePixelRatio, image.getHeight() * gui.screenToImagePixelRatio, null);\r\n\r\nand it still works for me. \r\n\r\nSo for what its worth here is the version of the code I&#39;m testing on Windows 11, JDK11 that works:\r\n\r\n    import javax.imageio.*;\r\n    import javax.imageio.event.*;\r\n    import javax.swing.*;\r\n    import javax.swing.border.*;\r\n    import javax.swing.colorchooser.*;\r\n    import javax.swing.filechooser.FileNameExtensionFilter;\r\n    import java.awt.AlphaComposite;\r\n    import java.awt.BorderLayout;\r\n    import java.awt.Color;\r\n    import java.awt.Dimension;\r\n    import java.awt.GridLayout;\r\n    import java.awt.Graphics;\r\n    import java.awt.Graphics2D;\r\n    import java.awt.Point;\r\n    import java.awt.Rectangle;\r\n    import java.awt.event.*;\r\n    import java.awt.geom.*;\r\n    import java.awt.image.*;\r\n    import java.io.File;\r\n    import java.time.format.DateTimeFormatter;\r\n    import java.time.LocalDateTime;\r\n    import java.util.*;\r\n    import java.util.concurrent.*;\r\n    import java.util.function.*;\r\n    import java.util.stream.*;\r\n    \r\n    public class GUI\r\n    {\r\n    \r\n       private static final Function&lt;String, Border&gt; TITLED_BORDER =\r\n          title -&gt;\r\n             BorderFactory\r\n                .createTitledBorder\r\n                (\r\n                   null,\r\n                   title,\r\n                   TitledBorder.CENTER,\r\n                   TitledBorder.TOP\r\n                )\r\n                ;\r\n    \r\n       private static final Color CLEAR = new Color(0, 0, 0, 0);\r\n       private static final Point OFF_SCREEN = new Point(-1, -1);\r\n    \r\n       public static final int ARBITRARY_VIEW_BUFFER = 200;\r\n       private static final int MIN_PEN_SIZE = 1;\r\n       private static final int MAX_PEN_SIZE = 10;\r\n       private static final int MIN_SCREEN_TO_IMAGE_PIXEL_RATIO = 1;\r\n       private static final int MAX_SCREEN_TO_IMAGE_PIXEL_RATIO = 30;\r\n       private static final int DEFAULT_IMAGE_PIXEL_ROWS = 26;\r\n       private static final int DEFAULT_IMAGE_PIXEL_COLUMNS = 24;\r\n    \r\n       private final JFrame frame;\r\n       private final JScrollPane drawingAreaScrollPane = new JScrollPane();\r\n    \r\n       private BufferedImage image;\r\n       private Color transparencyColor = Color.WHITE;\r\n       private Color cursorColor = Color.BLACK;\r\n       private Color gridLinesColor = Color.GRAY;\r\n       private boolean hasGridLines = true;\r\n       private int penSize = 1;\r\n       private int screenToImagePixelRatio = 10;\r\n    \r\n       public static void main(final String[] args)\r\n       {\r\n       \r\n          final BufferedImage image = new BufferedImage(20, 20, BufferedImage.TYPE_INT_ARGB);\r\n       \r\n          IntStream\r\n             .range(0, 20)\r\n             .forEach(i -&gt; image.setRGB(i, i, Color.RED.getRGB()))\r\n             ;\r\n    \r\n          new GUI(image);\r\n       \r\n       }\r\n    \r\n       public GUI()\r\n       {\r\n       \r\n          this(DEFAULT_IMAGE_PIXEL_ROWS, DEFAULT_IMAGE_PIXEL_COLUMNS);\r\n       \r\n       }\r\n    \r\n       public GUI(final int numImagePixelRows, final int numImagePixelColumns)\r\n       {\r\n       \r\n          this(new BufferedImage(numImagePixelColumns, numImagePixelRows, BufferedImage.TYPE_INT_ARGB));\r\n       \r\n       }\r\n    \r\n       public GUI(final BufferedImage image)\r\n       {\r\n       \r\n          Objects.requireNonNull(image);\r\n       \r\n          try\r\n          {\r\n          \r\n             UIManager.setLookAndFeel(UIManager.getCrossPlatformLookAndFeelClassName());\r\n    \r\n          }\r\n          \r\n          catch (Exception e)\r\n          {\r\n          \r\n             throw new RuntimeException(e);\r\n          \r\n          }\r\n       \r\n          INITALIZING_METADATA_INSTANCE_FIELDS:\r\n          {\r\n          \r\n             this.image = image;\r\n          \r\n          }\r\n    \r\n          this.frame = new JFrame();\r\n       \r\n          this.frame.setTitle(&quot;Paint&quot;);\r\n          this.frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);\r\n       \r\n          this.frame.add(this.createMainPanel());\r\n       \r\n          this.frame.pack();\r\n          this.frame.setLocationByPlatform(true);\r\n          this.frame.setVisible(true);\r\n       \r\n       }\r\n    \r\n       private JPanel createMainPanel()\r\n       {\r\n       \r\n          final JPanel mainPanel = new JPanel(new BorderLayout());\r\n       \r\n          mainPanel.add(this.createCenterPanel(),   BorderLayout.CENTER);\r\n       \r\n          return mainPanel;\r\n       \r\n       }\r\n    \r\n       private JPanel createCenterPanel()\r\n       {\r\n       \r\n          final GUI gui = this; //useful when trying to differentiate between different this&#39;.\r\n       \r\n          final JPanel mainPanel;\r\n       \r\n          CREATE_MAIN_PANEL:\r\n          {\r\n    \r\n             mainPanel = new JPanel();\r\n             mainPanel.setLayout(new BorderLayout());\r\n          \r\n          }\r\n       \r\n          final JPanel drawingPanel;\r\n       \r\n          final Runnable UPDATE_DRAWING_PANEL_BORDER_TEXT;\r\n          final Runnable RECREATE_DRAWING_AREA_FRESH;\r\n          final Runnable REPAINT_DRAWING_PANEL;\r\n       \r\n          final BiFunction&lt;Point, Integer, Point&gt; originalToZoomed =\r\n             (original, ratio) -&gt;\r\n                new Point(original.x * ratio, original.y * ratio)\r\n                ;\r\n       \r\n          final BiFunction&lt;Point, Integer, Point&gt; zoomedToOriginal =\r\n             (zoomed, ratio) -&gt;\r\n                new Point\r\n                (\r\n                   (zoomed.x - (zoomed.x % ratio)) / ratio,\r\n                   (zoomed.y - (zoomed.y % ratio)) / ratio\r\n                )\r\n                ;\r\n    \r\n          CREATE_DRAWING_PANEL:\r\n          {\r\n    \r\n             SET_UP_DRAWING_PANEL:\r\n             {\r\n    \r\n                drawingPanel = new JPanel();\r\n    \r\n                drawingPanel.setLayout(new BoxLayout(drawingPanel, BoxLayout.PAGE_AXIS));\r\n    \r\n                drawingPanel.add(Box.createRigidArea(new Dimension(123, 456)));\r\n    \r\n             }\r\n    \r\n             REPAINT_DRAWING_PANEL =\r\n                () -&gt;\r\n                {\r\n    \r\n                   drawingPanel.repaint();\r\n                   drawingPanel.revalidate();\r\n    \r\n                }\r\n                ;\r\n    \r\n             RECREATE_DRAWING_AREA_FRESH =\r\n                () -&gt;\r\n                {\r\n    \r\n                   final var thingToFocus = drawingPanel;\r\n    \r\n                   drawingPanel.removeAll();\r\n    \r\n                   final Dimension drawingArea = gui.deriveDrawingAreaDimensions();\r\n    \r\n                   final IntUnaryOperator quantize =\r\n                      num -&gt;\r\n                         num - (num % gui.screenToImagePixelRatio)\r\n                         ;\r\n    \r\n                   final Box.Filler box =\r\n                      new Box.Filler(drawingArea, drawingArea, drawingArea)\r\n                      {\r\n    \r\n                         @Override\r\n                         protected void paintComponent(final Graphics dontUse)\r\n                         {\r\n    \r\n                            super.paintComponent(dontUse);\r\n    \r\n    /*\r\n                            if (!(dontUse instanceof Graphics2D g))\r\n                            {\r\n    \r\n                               throw new RuntimeException(&quot;Unknown graphics type = &quot; + dontUse);\r\n    \r\n                            }\r\n    */\r\n    \t\t\t\t\t\tGraphics2D g = (Graphics2D)dontUse;\r\n    \r\n                            DRAW_DRAWN_PIXELS:\r\n                            {\r\n    \r\n                               final Rectangle rectangle  = gui.drawingAreaScrollPane.getViewport().getViewRect();\r\n    //                           final Rectangle rectangle  = g.getClipBounds();\r\n    \r\n                               //We are only drawing a subsection because we may be working with GIGANTIC images.\r\n                               //If we attempt to draw the whole image, performance will drop like a rock.\r\n                               CALCULATE_SUBSECTION_TO_DRAW:\r\n                               {\r\n    \r\n                                  final int x = rectangle.x;\r\n                                  final int y = rectangle.y;\r\n                                  final int width = Math.min(rectangle.width, drawingArea.width);\r\n                                  final int height = Math.min(rectangle.height, drawingArea.height);\r\n    \r\n                                  g.setBackground(gui.transparencyColor);\r\n                                  g.clearRect(rectangle.x, rectangle.y, width, height);\r\n    \r\n                               }\r\n    \r\n                               DRAW_SUBSECTION_OF_IMAGE:\r\n                               {\r\n    \r\n                                  final int originalImageX;\r\n                                  final int zoomedInImageX;\r\n                                  final int originalImageY;\r\n                                  final int zoomedInImageY;\r\n    \r\n                                  CALCULATE_ORIGINAL_POSITION:\r\n                                  {\r\n    \r\n                                     final int quantizedX = quantize.applyAsInt(rectangle.x);\r\n                                     final int quantizedY = quantize.applyAsInt(rectangle.y);\r\n    \r\n                                     zoomedInImageX = Math.max(quantizedX, 0);\r\n                                     originalImageX = zoomedInImageX / gui.screenToImagePixelRatio;\r\n    \r\n                                     zoomedInImageY = Math.max(quantizedY, 0);\r\n                                     originalImageY = zoomedInImageY / gui.screenToImagePixelRatio;\r\n    \r\n                                  }\r\n    \r\n                                  final int zoomedInImageWidth;\r\n                                  final int originalImageWidth;\r\n                                  final int zoomedInImageHeight;\r\n                                  final int originalImageHeight;\r\n    \r\n                                  CALCULATE_ORIGINAL_DIMENSION:\r\n                                  {\r\n    \r\n                                     final int minWidth = Math.min(rectangle.width, drawingArea.width);\r\n                                     final int quantizedMinWidth = quantize.applyAsInt(minWidth);\r\n                                     final int potentialWidth = quantizedMinWidth + gui.screenToImagePixelRatio;\r\n                                     zoomedInImageWidth = Math.min(drawingArea.width, potentialWidth);\r\n                                     originalImageWidth = zoomedInImageWidth / gui.screenToImagePixelRatio;\r\n    \r\n                                     final int minHeight = Math.min(rectangle.height, drawingArea.height);\r\n                                     final int quantizedMinHeight = quantize.applyAsInt(minHeight);\r\n                                     final int potentialHeight = quantizedMinHeight + gui.screenToImagePixelRatio;\r\n                                     zoomedInImageHeight = Math.min(drawingArea.height, potentialHeight);\r\n                                     originalImageHeight = zoomedInImageHeight / gui.screenToImagePixelRatio;\r\n    \r\n                                  }\r\n    \r\n                                  g.setPaint(gui.cursorColor);\r\n    \r\n    //                              System.out.println(zoomedInImageX + &quot; -- &quot; + zoomedInImageY + &quot; -- &quot; + zoomedInImageWidth + &quot; -- &quot; + zoomedInImageHeight + &quot; ---- &quot; + originalImageX + &quot; -- &quot; + originalImageY + &quot; -- &quot; + originalImageWidth + &quot; -- &quot; + originalImageHeight + &quot; ----- &quot; + rectangle + &quot; - &quot; + drawingArea);\r\n    \r\n    \t\t\t\t\t\t\t\tg.drawImage(gui.image, 0, 0, image.getWidth() * gui.screenToImagePixelRatio, image.getHeight() * gui.screenToImagePixelRatio, null);\r\n    /*\r\n                                  g\r\n                                     .drawImage\r\n                                     (\r\n                                        gui.image,\r\n                                        zoomedInImageX,\r\n                                        zoomedInImageY,\r\n                                        zoomedInImageX + zoomedInImageWidth,\r\n                                        zoomedInImageY + zoomedInImageHeight,\r\n                                        originalImageX,\r\n                                        originalImageY,\r\n                                        originalImageX + originalImageWidth,\r\n                                        originalImageY + originalImageHeight,\r\n                                        //gui.transparencyColor,\r\n                                        null\r\n                                     )\r\n                                     ;\r\n    */\r\n                               }\r\n    \r\n                               DRAW_GRID_LINES:\r\n                               {\r\n    \r\n                                  if (gui.hasGridLines &amp;&amp; gui.screenToImagePixelRatio &gt; 1)\r\n                                  {\r\n    \r\n                                     g.setPaint(gui.gridLinesColor);\r\n                                     g.setStroke(new java.awt.BasicStroke(1));\r\n    \r\n                                     IntStream\r\n                                        .range(rectangle.y, rectangle.y + rectangle.height)\r\n                                        .forEach\r\n                                        (\r\n                                           eachIndex -&gt;\r\n                                           {\r\n    \r\n                                              if (eachIndex % gui.screenToImagePixelRatio == 0)\r\n                                              {\r\n    \r\n                                                 g\r\n                                                    .drawLine\r\n                                                    (\r\n                                                       rectangle.x,\r\n                                                       eachIndex,\r\n                                                       rectangle.x + rectangle.width,\r\n                                                       eachIndex\r\n                                                    )\r\n                                                    ;\r\n    \r\n                                              }\r\n    \r\n                                           }\r\n                                        )\r\n                                        ;\r\n    \r\n                                     IntStream\r\n                                        .rangeClosed(rectangle.x, rectangle.x + rectangle.width)\r\n                                        .forEach\r\n                                        (\r\n                                           eachIndex -&gt;\r\n                                           {\r\n    \r\n                                              if (eachIndex % gui.screenToImagePixelRatio == 0)\r\n                                              {\r\n    \r\n                                                 g\r\n                                                    .drawLine\r\n                                                    (\r\n                                                       eachIndex,\r\n                                                       rectangle.y,\r\n                                                       eachIndex,\r\n                                                       rectangle.y + rectangle.height\r\n                                                    )\r\n                                                    ;\r\n    \r\n                                              }\r\n    \r\n                                           }\r\n                                        )\r\n                                        ;\r\n    \r\n                                  }\r\n    \r\n                               }\r\n    \r\n                            }\r\n    \r\n                            // gui.drawingAreaScrollPane.repaint();\r\n                            // gui.drawingAreaScrollPane.revalidate();\r\n                         \r\n                         }\r\n                      \r\n                      }\r\n                      ;\r\n                \r\n                   box.setBorder(BorderFactory.createLineBorder(Color.BLACK, 1));\r\n                \r\n                   drawingPanel.add(Box.createHorizontalGlue());\r\n                   drawingPanel.add(box);\r\n                   drawingPanel.add(Box.createHorizontalGlue());\r\n                \r\n                   REPAINT_DRAWING_PANEL.run();\r\n                \r\n                }\r\n                ;\r\n          \r\n             RECREATE_DRAWING_AREA_FRESH.run();\r\n          \r\n          }\r\n       \r\n          final JPanel drawingSettingsPanel;\r\n       \r\n          CREATE_DRAWING_SETTINGS_PANEL:\r\n          {\r\n          \r\n             drawingSettingsPanel = new JPanel();\r\n             drawingSettingsPanel.setLayout(new BoxLayout(drawingSettingsPanel, BoxLayout.LINE_AXIS));\r\n          \r\n             final JSpinner screenToImagePixelRatioDropDownMenu;\r\n          \r\n             SCREEN_TO_IMAGE_PIXEL_RATIO_DROP_DOWN_MENU:\r\n             {\r\n             \r\n                screenToImagePixelRatioDropDownMenu =\r\n                   new JSpinner\r\n                   (\r\n                      new SpinnerNumberModel\r\n                      (\r\n                         this.screenToImagePixelRatio,\r\n                         MIN_SCREEN_TO_IMAGE_PIXEL_RATIO,\r\n                         MAX_SCREEN_TO_IMAGE_PIXEL_RATIO,\r\n                         1\r\n                      )\r\n                   )\r\n                   ;\r\n             \r\n                screenToImagePixelRatioDropDownMenu\r\n                   .addChangeListener\r\n                   (\r\n                      event -&gt;\r\n                      {\r\n                      \r\n    /*\r\n                         if (!(screenToImagePixelRatioDropDownMenu.getValue() instanceof Integer iii))\r\n                         {\r\n    \r\n                            throw new IllegalStateException();\r\n    \r\n                         }\r\n    */\r\n                         int iii = ((Integer)screenToImagePixelRatioDropDownMenu.getValue()).intValue();\r\n                         this.screenToImagePixelRatio = iii;\r\n    \r\n                         RECREATE_DRAWING_AREA_FRESH.run();\r\n    \r\n                      }\r\n                   );\r\n    \r\n             }\r\n    \r\n             final JCheckBox hasGridLinesCheckBox;\r\n          \r\n             HAS_GRID_LINES_CHECK_BOX:\r\n             {\r\n             \r\n                hasGridLinesCheckBox = new JCheckBox();\r\n                hasGridLinesCheckBox.setText(&quot;Activate Grid Lines&quot;);\r\n                hasGridLinesCheckBox.setSelected(true);\r\n                hasGridLinesCheckBox\r\n                   .addActionListener\r\n                   (\r\n                      event -&gt;\r\n                      {\r\n                      \r\n                         this.hasGridLines = hasGridLinesCheckBox.isSelected();\r\n                      \r\n                         REPAINT_DRAWING_PANEL.run();\r\n                      \r\n                      }\r\n                   )\r\n                   ;\r\n             \r\n             }\r\n             \r\n             final JButton repaint = new JButton(&quot;REPAINT&quot;);\r\n             repaint.addActionListener(event -&gt; REPAINT_DRAWING_PANEL.run());\r\n          \r\n             drawingSettingsPanel.add(Box.createHorizontalGlue());\r\n             drawingSettingsPanel.add(screenToImagePixelRatioDropDownMenu);\r\n             drawingSettingsPanel.add(new JLabel(&quot;SCREEN pixels = 1 IMAGE pixel&quot;));\r\n             drawingSettingsPanel.add(Box.createHorizontalStrut(10));\r\n             drawingSettingsPanel.add(hasGridLinesCheckBox);\r\n             drawingSettingsPanel.add(Box.createHorizontalStrut(10));\r\n             drawingSettingsPanel.add(repaint);\r\n             drawingSettingsPanel.add(Box.createHorizontalGlue());\r\n          \r\n          }\r\n       \r\n          CREATE_CENTERED_DRAWING_PANEL:\r\n          {\r\n          \r\n             final JPanel centeredDrawingPanel = new JPanel();\r\n             centeredDrawingPanel.setLayout(new BoxLayout(centeredDrawingPanel, BoxLayout.PAGE_AXIS));\r\n             centeredDrawingPanel.add(Box.createVerticalGlue());\r\n             centeredDrawingPanel.add(drawingPanel);\r\n             centeredDrawingPanel.add(Box.createVerticalGlue());\r\n          \r\n             UPDATE_DRAWING_PANEL_BORDER_TEXT =\r\n                () -&gt;\r\n                   this.drawingAreaScrollPane\r\n                      .setBorder\r\n                      (\r\n                         BorderFactory\r\n                            .createCompoundBorder\r\n                            (\r\n                               TITLED_BORDER\r\n                                  .apply\r\n                                  (\r\n                                     &quot;Drawing Area -- &quot;\r\n                                     + gui.image.getHeight()\r\n                                     + &quot; rows and &quot;\r\n                                     + gui.image.getWidth()\r\n                                     + &quot; columns&quot;\r\n                                  ),\r\n                               BorderFactory.createLineBorder(Color.BLACK, 1)\r\n                            )\r\n                      )\r\n                      ;\r\n          \r\n             UPDATE_DRAWING_PANEL_BORDER_TEXT.run();\r\n          \r\n             this.drawingAreaScrollPane.setViewportView(centeredDrawingPanel);\r\n          \r\n          }\r\n       \r\n          mainPanel.add(drawingSettingsPanel, BorderLayout.NORTH);\r\n          mainPanel.add(this.drawingAreaScrollPane, BorderLayout.CENTER);\r\n       \r\n          return mainPanel;\r\n       \r\n       }\r\n    \r\n       private static void print(final String text)\r\n       {\r\n       \r\n          System.out.println(LocalDateTime.now() + &quot; -- &quot; + text);\r\n       \r\n       }\r\n    \r\n       private Dimension deriveDrawingAreaDimensions()\r\n       {\r\n       \r\n          return\r\n             new Dimension\r\n             (\r\n                this.image.getWidth() * this.screenToImagePixelRatio,\r\n                this.image.getHeight() * this.screenToImagePixelRatio\r\n             )\r\n             ;\r\n       \r\n       }\r\n    \r\n    }\r\n\r\nNote: just because it works doesn&#39;t mean I think you should use it. I believe the code should be restructured to better follow Swing custom painting conventions.","title":"Why are there these weird visual artifacts when scrolling my BufferedImage? And how do I prevent them from happening?","body":"<p>The more I look at your code the more confused I am. I must admit I don't recognize half of the coding constructs you are using.</p>\n<p>However, from what I do understand, it appears to me you don't understand the basics of how custom painting works. You should read the Swing tutorial on <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/painting/index.html\" rel=\"nofollow noreferrer\">Custom Painting</a> for a basic example.</p>\n<p>Some tips:</p>\n<ol>\n<li>the code for the painting should be self contained in a class.</li>\n<li>you pass parameters to the class to control the painting. Parameters such as rows, columns, image, zoom factor.</li>\n<li>the paintComponent method will directly reference the above parameters.</li>\n<li>you override the <code>getPreferredSize()</code> method to control the size of your component. This method would likely reference your image and the zoom factor. The way you currenlty set the size buy creating a new Box.Filler is unique to say the least.</li>\n<li>the code for your ActionListeners should not be recreating the drawing panel. Instead you just invoke a method on the panel to update a property and then invoke revalidate() and repaint().</li>\n</ol>\n<p>Because you don't follow the standard coding conventions the code becomes overly complex (to me anyway). I can't think of any good reasons for the code to be structured this way.</p>\n<p>I am still confused about your claim that using:</p>\n<pre><code>//final Rectangle rectangle  = gui.drawingAreaScrollPane.getViewport().getViewRect();\nfinal Rectangle rectangle  = g.getClipBounds(); \n</code></pre>\n<p>fixes the problem. As I stated earlier it did not fix the problem for me.</p>\n<p>Did you try displaying the Rectangle in both cases to compare the values? Do you understand what the differences mean? I'm not understanding your discussion with MadProgrammer about the &quot;context&quot;. In both cases the Rectangle uses the proper x/y location relative to (0, 0) of the components. The difference is that your approach uses a larger area since the width/height values will be the size of the viewport, not the size of the scroll distance.</p>\n<p>In any case I downloaded your code again and retested. The strangest thing is that your original code now works (after I made a couple of coding changes since your syntax doesn't work for me with JDK11).</p>\n<p>I also simplified the drawImage statement to just use:</p>\n<pre><code>g.drawImage(gui.image, 0, 0, image.getWidth() * gui.screenToImagePixelRatio, image.getHeight() * gui.screenToImagePixelRatio, null);\n</code></pre>\n<p>and it still works for me.</p>\n<p>So for what its worth here is the version of the code I'm testing on Windows 11, JDK11 that works:</p>\n<pre><code>import javax.imageio.*;\nimport javax.imageio.event.*;\nimport javax.swing.*;\nimport javax.swing.border.*;\nimport javax.swing.colorchooser.*;\nimport javax.swing.filechooser.FileNameExtensionFilter;\nimport java.awt.AlphaComposite;\nimport java.awt.BorderLayout;\nimport java.awt.Color;\nimport java.awt.Dimension;\nimport java.awt.GridLayout;\nimport java.awt.Graphics;\nimport java.awt.Graphics2D;\nimport java.awt.Point;\nimport java.awt.Rectangle;\nimport java.awt.event.*;\nimport java.awt.geom.*;\nimport java.awt.image.*;\nimport java.io.File;\nimport java.time.format.DateTimeFormatter;\nimport java.time.LocalDateTime;\nimport java.util.*;\nimport java.util.concurrent.*;\nimport java.util.function.*;\nimport java.util.stream.*;\n\npublic class GUI\n{\n\n   private static final Function&lt;String, Border&gt; TITLED_BORDER =\n      title -&gt;\n         BorderFactory\n            .createTitledBorder\n            (\n               null,\n               title,\n               TitledBorder.CENTER,\n               TitledBorder.TOP\n            )\n            ;\n\n   private static final Color CLEAR = new Color(0, 0, 0, 0);\n   private static final Point OFF_SCREEN = new Point(-1, -1);\n\n   public static final int ARBITRARY_VIEW_BUFFER = 200;\n   private static final int MIN_PEN_SIZE = 1;\n   private static final int MAX_PEN_SIZE = 10;\n   private static final int MIN_SCREEN_TO_IMAGE_PIXEL_RATIO = 1;\n   private static final int MAX_SCREEN_TO_IMAGE_PIXEL_RATIO = 30;\n   private static final int DEFAULT_IMAGE_PIXEL_ROWS = 26;\n   private static final int DEFAULT_IMAGE_PIXEL_COLUMNS = 24;\n\n   private final JFrame frame;\n   private final JScrollPane drawingAreaScrollPane = new JScrollPane();\n\n   private BufferedImage image;\n   private Color transparencyColor = Color.WHITE;\n   private Color cursorColor = Color.BLACK;\n   private Color gridLinesColor = Color.GRAY;\n   private boolean hasGridLines = true;\n   private int penSize = 1;\n   private int screenToImagePixelRatio = 10;\n\n   public static void main(final String[] args)\n   {\n   \n      final BufferedImage image = new BufferedImage(20, 20, BufferedImage.TYPE_INT_ARGB);\n   \n      IntStream\n         .range(0, 20)\n         .forEach(i -&gt; image.setRGB(i, i, Color.RED.getRGB()))\n         ;\n\n      new GUI(image);\n   \n   }\n\n   public GUI()\n   {\n   \n      this(DEFAULT_IMAGE_PIXEL_ROWS, DEFAULT_IMAGE_PIXEL_COLUMNS);\n   \n   }\n\n   public GUI(final int numImagePixelRows, final int numImagePixelColumns)\n   {\n   \n      this(new BufferedImage(numImagePixelColumns, numImagePixelRows, BufferedImage.TYPE_INT_ARGB));\n   \n   }\n\n   public GUI(final BufferedImage image)\n   {\n   \n      Objects.requireNonNull(image);\n   \n      try\n      {\n      \n         UIManager.setLookAndFeel(UIManager.getCrossPlatformLookAndFeelClassName());\n\n      }\n      \n      catch (Exception e)\n      {\n      \n         throw new RuntimeException(e);\n      \n      }\n   \n      INITALIZING_METADATA_INSTANCE_FIELDS:\n      {\n      \n         this.image = image;\n      \n      }\n\n      this.frame = new JFrame();\n   \n      this.frame.setTitle(&quot;Paint&quot;);\n      this.frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);\n   \n      this.frame.add(this.createMainPanel());\n   \n      this.frame.pack();\n      this.frame.setLocationByPlatform(true);\n      this.frame.setVisible(true);\n   \n   }\n\n   private JPanel createMainPanel()\n   {\n   \n      final JPanel mainPanel = new JPanel(new BorderLayout());\n   \n      mainPanel.add(this.createCenterPanel(),   BorderLayout.CENTER);\n   \n      return mainPanel;\n   \n   }\n\n   private JPanel createCenterPanel()\n   {\n   \n      final GUI gui = this; //useful when trying to differentiate between different this'.\n   \n      final JPanel mainPanel;\n   \n      CREATE_MAIN_PANEL:\n      {\n\n         mainPanel = new JPanel();\n         mainPanel.setLayout(new BorderLayout());\n      \n      }\n   \n      final JPanel drawingPanel;\n   \n      final Runnable UPDATE_DRAWING_PANEL_BORDER_TEXT;\n      final Runnable RECREATE_DRAWING_AREA_FRESH;\n      final Runnable REPAINT_DRAWING_PANEL;\n   \n      final BiFunction&lt;Point, Integer, Point&gt; originalToZoomed =\n         (original, ratio) -&gt;\n            new Point(original.x * ratio, original.y * ratio)\n            ;\n   \n      final BiFunction&lt;Point, Integer, Point&gt; zoomedToOriginal =\n         (zoomed, ratio) -&gt;\n            new Point\n            (\n               (zoomed.x - (zoomed.x % ratio)) / ratio,\n               (zoomed.y - (zoomed.y % ratio)) / ratio\n            )\n            ;\n\n      CREATE_DRAWING_PANEL:\n      {\n\n         SET_UP_DRAWING_PANEL:\n         {\n\n            drawingPanel = new JPanel();\n\n            drawingPanel.setLayout(new BoxLayout(drawingPanel, BoxLayout.PAGE_AXIS));\n\n            drawingPanel.add(Box.createRigidArea(new Dimension(123, 456)));\n\n         }\n\n         REPAINT_DRAWING_PANEL =\n            () -&gt;\n            {\n\n               drawingPanel.repaint();\n               drawingPanel.revalidate();\n\n            }\n            ;\n\n         RECREATE_DRAWING_AREA_FRESH =\n            () -&gt;\n            {\n\n               final var thingToFocus = drawingPanel;\n\n               drawingPanel.removeAll();\n\n               final Dimension drawingArea = gui.deriveDrawingAreaDimensions();\n\n               final IntUnaryOperator quantize =\n                  num -&gt;\n                     num - (num % gui.screenToImagePixelRatio)\n                     ;\n\n               final Box.Filler box =\n                  new Box.Filler(drawingArea, drawingArea, drawingArea)\n                  {\n\n                     @Override\n                     protected void paintComponent(final Graphics dontUse)\n                     {\n\n                        super.paintComponent(dontUse);\n\n/*\n                        if (!(dontUse instanceof Graphics2D g))\n                        {\n\n                           throw new RuntimeException(&quot;Unknown graphics type = &quot; + dontUse);\n\n                        }\n*/\n                        Graphics2D g = (Graphics2D)dontUse;\n\n                        DRAW_DRAWN_PIXELS:\n                        {\n\n                           final Rectangle rectangle  = gui.drawingAreaScrollPane.getViewport().getViewRect();\n//                           final Rectangle rectangle  = g.getClipBounds();\n\n                           //We are only drawing a subsection because we may be working with GIGANTIC images.\n                           //If we attempt to draw the whole image, performance will drop like a rock.\n                           CALCULATE_SUBSECTION_TO_DRAW:\n                           {\n\n                              final int x = rectangle.x;\n                              final int y = rectangle.y;\n                              final int width = Math.min(rectangle.width, drawingArea.width);\n                              final int height = Math.min(rectangle.height, drawingArea.height);\n\n                              g.setBackground(gui.transparencyColor);\n                              g.clearRect(rectangle.x, rectangle.y, width, height);\n\n                           }\n\n                           DRAW_SUBSECTION_OF_IMAGE:\n                           {\n\n                              final int originalImageX;\n                              final int zoomedInImageX;\n                              final int originalImageY;\n                              final int zoomedInImageY;\n\n                              CALCULATE_ORIGINAL_POSITION:\n                              {\n\n                                 final int quantizedX = quantize.applyAsInt(rectangle.x);\n                                 final int quantizedY = quantize.applyAsInt(rectangle.y);\n\n                                 zoomedInImageX = Math.max(quantizedX, 0);\n                                 originalImageX = zoomedInImageX / gui.screenToImagePixelRatio;\n\n                                 zoomedInImageY = Math.max(quantizedY, 0);\n                                 originalImageY = zoomedInImageY / gui.screenToImagePixelRatio;\n\n                              }\n\n                              final int zoomedInImageWidth;\n                              final int originalImageWidth;\n                              final int zoomedInImageHeight;\n                              final int originalImageHeight;\n\n                              CALCULATE_ORIGINAL_DIMENSION:\n                              {\n\n                                 final int minWidth = Math.min(rectangle.width, drawingArea.width);\n                                 final int quantizedMinWidth = quantize.applyAsInt(minWidth);\n                                 final int potentialWidth = quantizedMinWidth + gui.screenToImagePixelRatio;\n                                 zoomedInImageWidth = Math.min(drawingArea.width, potentialWidth);\n                                 originalImageWidth = zoomedInImageWidth / gui.screenToImagePixelRatio;\n\n                                 final int minHeight = Math.min(rectangle.height, drawingArea.height);\n                                 final int quantizedMinHeight = quantize.applyAsInt(minHeight);\n                                 final int potentialHeight = quantizedMinHeight + gui.screenToImagePixelRatio;\n                                 zoomedInImageHeight = Math.min(drawingArea.height, potentialHeight);\n                                 originalImageHeight = zoomedInImageHeight / gui.screenToImagePixelRatio;\n\n                              }\n\n                              g.setPaint(gui.cursorColor);\n\n//                              System.out.println(zoomedInImageX + &quot; -- &quot; + zoomedInImageY + &quot; -- &quot; + zoomedInImageWidth + &quot; -- &quot; + zoomedInImageHeight + &quot; ---- &quot; + originalImageX + &quot; -- &quot; + originalImageY + &quot; -- &quot; + originalImageWidth + &quot; -- &quot; + originalImageHeight + &quot; ----- &quot; + rectangle + &quot; - &quot; + drawingArea);\n\n                                g.drawImage(gui.image, 0, 0, image.getWidth() * gui.screenToImagePixelRatio, image.getHeight() * gui.screenToImagePixelRatio, null);\n/*\n                              g\n                                 .drawImage\n                                 (\n                                    gui.image,\n                                    zoomedInImageX,\n                                    zoomedInImageY,\n                                    zoomedInImageX + zoomedInImageWidth,\n                                    zoomedInImageY + zoomedInImageHeight,\n                                    originalImageX,\n                                    originalImageY,\n                                    originalImageX + originalImageWidth,\n                                    originalImageY + originalImageHeight,\n                                    //gui.transparencyColor,\n                                    null\n                                 )\n                                 ;\n*/\n                           }\n\n                           DRAW_GRID_LINES:\n                           {\n\n                              if (gui.hasGridLines &amp;&amp; gui.screenToImagePixelRatio &gt; 1)\n                              {\n\n                                 g.setPaint(gui.gridLinesColor);\n                                 g.setStroke(new java.awt.BasicStroke(1));\n\n                                 IntStream\n                                    .range(rectangle.y, rectangle.y + rectangle.height)\n                                    .forEach\n                                    (\n                                       eachIndex -&gt;\n                                       {\n\n                                          if (eachIndex % gui.screenToImagePixelRatio == 0)\n                                          {\n\n                                             g\n                                                .drawLine\n                                                (\n                                                   rectangle.x,\n                                                   eachIndex,\n                                                   rectangle.x + rectangle.width,\n                                                   eachIndex\n                                                )\n                                                ;\n\n                                          }\n\n                                       }\n                                    )\n                                    ;\n\n                                 IntStream\n                                    .rangeClosed(rectangle.x, rectangle.x + rectangle.width)\n                                    .forEach\n                                    (\n                                       eachIndex -&gt;\n                                       {\n\n                                          if (eachIndex % gui.screenToImagePixelRatio == 0)\n                                          {\n\n                                             g\n                                                .drawLine\n                                                (\n                                                   eachIndex,\n                                                   rectangle.y,\n                                                   eachIndex,\n                                                   rectangle.y + rectangle.height\n                                                )\n                                                ;\n\n                                          }\n\n                                       }\n                                    )\n                                    ;\n\n                              }\n\n                           }\n\n                        }\n\n                        // gui.drawingAreaScrollPane.repaint();\n                        // gui.drawingAreaScrollPane.revalidate();\n                     \n                     }\n                  \n                  }\n                  ;\n            \n               box.setBorder(BorderFactory.createLineBorder(Color.BLACK, 1));\n            \n               drawingPanel.add(Box.createHorizontalGlue());\n               drawingPanel.add(box);\n               drawingPanel.add(Box.createHorizontalGlue());\n            \n               REPAINT_DRAWING_PANEL.run();\n            \n            }\n            ;\n      \n         RECREATE_DRAWING_AREA_FRESH.run();\n      \n      }\n   \n      final JPanel drawingSettingsPanel;\n   \n      CREATE_DRAWING_SETTINGS_PANEL:\n      {\n      \n         drawingSettingsPanel = new JPanel();\n         drawingSettingsPanel.setLayout(new BoxLayout(drawingSettingsPanel, BoxLayout.LINE_AXIS));\n      \n         final JSpinner screenToImagePixelRatioDropDownMenu;\n      \n         SCREEN_TO_IMAGE_PIXEL_RATIO_DROP_DOWN_MENU:\n         {\n         \n            screenToImagePixelRatioDropDownMenu =\n               new JSpinner\n               (\n                  new SpinnerNumberModel\n                  (\n                     this.screenToImagePixelRatio,\n                     MIN_SCREEN_TO_IMAGE_PIXEL_RATIO,\n                     MAX_SCREEN_TO_IMAGE_PIXEL_RATIO,\n                     1\n                  )\n               )\n               ;\n         \n            screenToImagePixelRatioDropDownMenu\n               .addChangeListener\n               (\n                  event -&gt;\n                  {\n                  \n/*\n                     if (!(screenToImagePixelRatioDropDownMenu.getValue() instanceof Integer iii))\n                     {\n\n                        throw new IllegalStateException();\n\n                     }\n*/\n                     int iii = ((Integer)screenToImagePixelRatioDropDownMenu.getValue()).intValue();\n                     this.screenToImagePixelRatio = iii;\n\n                     RECREATE_DRAWING_AREA_FRESH.run();\n\n                  }\n               );\n\n         }\n\n         final JCheckBox hasGridLinesCheckBox;\n      \n         HAS_GRID_LINES_CHECK_BOX:\n         {\n         \n            hasGridLinesCheckBox = new JCheckBox();\n            hasGridLinesCheckBox.setText(&quot;Activate Grid Lines&quot;);\n            hasGridLinesCheckBox.setSelected(true);\n            hasGridLinesCheckBox\n               .addActionListener\n               (\n                  event -&gt;\n                  {\n                  \n                     this.hasGridLines = hasGridLinesCheckBox.isSelected();\n                  \n                     REPAINT_DRAWING_PANEL.run();\n                  \n                  }\n               )\n               ;\n         \n         }\n         \n         final JButton repaint = new JButton(&quot;REPAINT&quot;);\n         repaint.addActionListener(event -&gt; REPAINT_DRAWING_PANEL.run());\n      \n         drawingSettingsPanel.add(Box.createHorizontalGlue());\n         drawingSettingsPanel.add(screenToImagePixelRatioDropDownMenu);\n         drawingSettingsPanel.add(new JLabel(&quot;SCREEN pixels = 1 IMAGE pixel&quot;));\n         drawingSettingsPanel.add(Box.createHorizontalStrut(10));\n         drawingSettingsPanel.add(hasGridLinesCheckBox);\n         drawingSettingsPanel.add(Box.createHorizontalStrut(10));\n         drawingSettingsPanel.add(repaint);\n         drawingSettingsPanel.add(Box.createHorizontalGlue());\n      \n      }\n   \n      CREATE_CENTERED_DRAWING_PANEL:\n      {\n      \n         final JPanel centeredDrawingPanel = new JPanel();\n         centeredDrawingPanel.setLayout(new BoxLayout(centeredDrawingPanel, BoxLayout.PAGE_AXIS));\n         centeredDrawingPanel.add(Box.createVerticalGlue());\n         centeredDrawingPanel.add(drawingPanel);\n         centeredDrawingPanel.add(Box.createVerticalGlue());\n      \n         UPDATE_DRAWING_PANEL_BORDER_TEXT =\n            () -&gt;\n               this.drawingAreaScrollPane\n                  .setBorder\n                  (\n                     BorderFactory\n                        .createCompoundBorder\n                        (\n                           TITLED_BORDER\n                              .apply\n                              (\n                                 &quot;Drawing Area -- &quot;\n                                 + gui.image.getHeight()\n                                 + &quot; rows and &quot;\n                                 + gui.image.getWidth()\n                                 + &quot; columns&quot;\n                              ),\n                           BorderFactory.createLineBorder(Color.BLACK, 1)\n                        )\n                  )\n                  ;\n      \n         UPDATE_DRAWING_PANEL_BORDER_TEXT.run();\n      \n         this.drawingAreaScrollPane.setViewportView(centeredDrawingPanel);\n      \n      }\n   \n      mainPanel.add(drawingSettingsPanel, BorderLayout.NORTH);\n      mainPanel.add(this.drawingAreaScrollPane, BorderLayout.CENTER);\n   \n      return mainPanel;\n   \n   }\n\n   private static void print(final String text)\n   {\n   \n      System.out.println(LocalDateTime.now() + &quot; -- &quot; + text);\n   \n   }\n\n   private Dimension deriveDrawingAreaDimensions()\n   {\n   \n      return\n         new Dimension\n         (\n            this.image.getWidth() * this.screenToImagePixelRatio,\n            this.image.getHeight() * this.screenToImagePixelRatio\n         )\n         ;\n   \n   }\n\n}\n</code></pre>\n<p>Note: just because it works doesn't mean I think you should use it. I believe the code should be restructured to better follow Swing custom painting conventions.</p>\n"}],"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"comment_count":26,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":97,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77356022,"answer_count":1,"score":0,"last_activity_date":1698193761,"creation_date":1698102382,"question_id":77348727,"body_markdown":"I am creating an application that involves drawing a `BufferedImage` to a `JComponent` using `Graphics2D` in a `paintComponent(Graphics)` method.\r\n\r\nI added the ability to zoom in and out of the image. The `JComponent` I am drawing to is contained within a `JScrollPane`. If the image becomes zoomed in enough, scrollbars appear.\r\n\r\nWhenever I scroll the `JScrollPane`, I get weird visual artifacts.\r\n\r\nHere is the zoomed out version of my image.\r\n\r\n[![Zoomed out version of the image][1]][1]\r\n\r\nHere is the zoomed in version of my image, with no visual artifacts.\r\n\r\n[![Zoomed in version of the image][2]][2]\r\n\r\nAnd here is what it looks like when I scroll down a bit, and then to the right.\r\n\r\n[![Zoomed in version of the image with weird visual artifacts][3]][3]\r\n\r\nUpon discovering this, I added a button that just triggers a `repaint()` and `revalidate()` call on the relevant `JComponent`. Doing that fixed it.\r\n\r\nBEFORE PRESSING THE REPAINT BUTTON ON THE TOP RIGHT\r\n\r\n[![Before pressing REPAINT][4]][4]\r\n\r\nAFTER PRESSING THE REPAINT BUTTON ON THE TOP RIGHT\r\n\r\n[![After pressing REPAINT][5]][5]\r\n\r\nHere is the relevant portion of the code that handles painting the `BufferedImage` to the `JComponent`.\r\n\r\n```java\r\n@Override\r\nprotected void paintComponent(final Graphics dontUse)\r\n{\r\n\r\n   super.paintComponent(dontUse);\r\n\r\n   if (!(dontUse instanceof Graphics2D g))\r\n   {\r\n   \r\n      throw new RuntimeException(&quot;Unknown graphics type = &quot; + dontUse);\r\n   \r\n   }\r\n\r\n   DRAW_DRAWN_PIXELS:\r\n   {\r\n   \r\n      final Rectangle rectangle  = gui.drawingAreaScrollPane.getViewport().getViewRect();\r\n   \r\n      //We are only drawing a subsection because we may be working with GIGANTIC images.\r\n      //If we attempt to draw the whole image, performance will drop like a rock.\r\n      CALCULATE_SUBSECTION_TO_DRAW:\r\n      {\r\n      \r\n         final int x = rectangle.x;\r\n         final int y = rectangle.y;\r\n         final int width = Math.min(rectangle.width, drawingArea.width);\r\n         final int height = Math.min(rectangle.height, drawingArea.height);\r\n      \r\n         g.setBackground(gui.transparencyColor);\r\n         g.clearRect(rectangle.x, rectangle.y, width, height);\r\n      \r\n      }\r\n   \r\n      DRAW_SUBSECTION_OF_IMAGE:\r\n      {\r\n      \r\n         final int originalImageX;\r\n         final int zoomedInImageX;\r\n         final int originalImageY;\r\n         final int zoomedInImageY;\r\n      \r\n         CALCULATE_ORIGINAL_POSITION:\r\n         {\r\n         \r\n            final int quantizedX = quantize.applyAsInt(rectangle.x);\r\n            final int quantizedY = quantize.applyAsInt(rectangle.y);\r\n         \r\n            zoomedInImageX = Math.max(quantizedX, 0);\r\n            originalImageX = zoomedInImageX / gui.screenToImagePixelRatio;\r\n         \r\n            zoomedInImageY = Math.max(quantizedY, 0);\r\n            originalImageY = zoomedInImageY / gui.screenToImagePixelRatio;\r\n         \r\n         }\r\n      \r\n         final int zoomedInImageWidth;\r\n         final int originalImageWidth;\r\n         final int zoomedInImageHeight;\r\n         final int originalImageHeight;\r\n      \r\n         CALCULATE_ORIGINAL_DIMENSION:\r\n         {\r\n         \r\n            final int minWidth = Math.min(rectangle.width, drawingArea.width);\r\n            final int quantizedMinWidth = quantize.applyAsInt(minWidth);\r\n            final int potentialWidth = quantizedMinWidth + gui.screenToImagePixelRatio;\r\n            zoomedInImageWidth = Math.min(drawingArea.width, potentialWidth);\r\n            originalImageWidth = zoomedInImageWidth / gui.screenToImagePixelRatio;\r\n         \r\n            final int minHeight = Math.min(rectangle.height, drawingArea.height);\r\n            final int quantizedMinHeight = quantize.applyAsInt(minHeight);\r\n            final int potentialHeight = quantizedMinHeight + gui.screenToImagePixelRatio;\r\n            zoomedInImageHeight = Math.min(drawingArea.height, potentialHeight);\r\n            originalImageHeight = zoomedInImageHeight / gui.screenToImagePixelRatio;\r\n         \r\n         }\r\n      \r\n         g.setPaint(gui.cursorColor);\r\n      \r\n         System.out.println(zoomedInImageX + &quot; -- &quot; + zoomedInImageY + &quot; -- &quot; + zoomedInImageWidth + &quot; -- &quot; + zoomedInImageHeight + &quot; ---- &quot; + originalImageX + &quot; -- &quot; + originalImageY + &quot; -- &quot; + originalImageWidth + &quot; -- &quot; + originalImageHeight + &quot; ----- &quot; + rectangle + &quot; - &quot; + drawingArea);\r\n      \r\n         g\r\n            .drawImage\r\n            (\r\n               gui.image,\r\n               zoomedInImageX,\r\n               zoomedInImageY,\r\n               zoomedInImageX + zoomedInImageWidth,\r\n               zoomedInImageY + zoomedInImageHeight,\r\n               originalImageX,\r\n               originalImageY,\r\n               originalImageX + originalImageWidth,\r\n               originalImageY + originalImageHeight,\r\n               //gui.transparencyColor,\r\n               null\r\n            )\r\n            ;\r\n      \r\n      }\r\n   \r\n      DRAW_GRID_LINES:\r\n      {\r\n      \r\n         if (gui.hasGridLines &amp;&amp; gui.screenToImagePixelRatio &gt; 1)\r\n         {\r\n         \r\n            g.setPaint(gui.gridLinesColor);\r\n            g.setStroke(new java.awt.BasicStroke(1));\r\n         \r\n            IntStream\r\n               .range(rectangle.y, rectangle.y + rectangle.height)\r\n               .forEach\r\n               (\r\n                  eachIndex -&gt;\r\n                  {\r\n                  \r\n                     if (eachIndex % gui.screenToImagePixelRatio == 0)\r\n                     {\r\n                     \r\n                        g\r\n                           .drawLine\r\n                           (\r\n                              rectangle.x,\r\n                              eachIndex,\r\n                              rectangle.x + rectangle.width,\r\n                              eachIndex\r\n                           )\r\n                           ;\r\n                     \r\n                     }\r\n                  \r\n                  }\r\n               )\r\n               ;\r\n         \r\n            IntStream\r\n               .rangeClosed(rectangle.x, rectangle.x + rectangle.width)\r\n               .forEach\r\n               (\r\n                  eachIndex -&gt;\r\n                  {\r\n                  \r\n                     if (eachIndex % gui.screenToImagePixelRatio == 0)\r\n                     {\r\n                     \r\n                        g\r\n                           .drawLine\r\n                           (\r\n                              eachIndex,\r\n                              rectangle.y,\r\n                              eachIndex,\r\n                              rectangle.y + rectangle.height\r\n                           )\r\n                           ;\r\n                     \r\n                     }\r\n                  \r\n                  }\r\n               )\r\n               ;\r\n         \r\n         }\r\n      \r\n      }\r\n   \r\n   }\r\n\r\n   // gui.drawingAreaScrollPane.repaint();\r\n   // gui.drawingAreaScrollPane.revalidate();\r\n\r\n}\r\n\r\n```\r\n\r\nAnd here is a complete runnable example.\r\n\r\n```java\r\n\r\nimport javax.imageio.*;\r\nimport javax.imageio.event.*;\r\nimport javax.swing.*;\r\nimport javax.swing.border.*;\r\nimport javax.swing.colorchooser.*;\r\nimport javax.swing.filechooser.FileNameExtensionFilter;\r\nimport java.awt.AlphaComposite;\r\nimport java.awt.BorderLayout;\r\nimport java.awt.Color;\r\nimport java.awt.Dimension;\r\nimport java.awt.GridLayout;\r\nimport java.awt.Graphics;\r\nimport java.awt.Graphics2D;\r\nimport java.awt.Point;\r\nimport java.awt.Rectangle;\r\nimport java.awt.event.*;\r\nimport java.awt.geom.*;\r\nimport java.awt.image.*;\r\nimport java.io.File;\r\nimport java.time.format.DateTimeFormatter;\r\nimport java.time.LocalDateTime;\r\nimport java.util.*;\r\nimport java.util.concurrent.*;\r\nimport java.util.function.*;\r\nimport java.util.stream.*;\r\n\r\npublic class GUI\r\n{\r\n\r\n   private static final Function&lt;String, Border&gt; TITLED_BORDER =\r\n      title -&gt;\r\n         BorderFactory\r\n            .createTitledBorder\r\n            (\r\n               null,\r\n               title,\r\n               TitledBorder.CENTER,\r\n               TitledBorder.TOP\r\n            )\r\n            ;\r\n\r\n   private static final Color CLEAR = new Color(0, 0, 0, 0);\r\n   private static final Point OFF_SCREEN = new Point(-1, -1);\r\n\r\n   public static final int ARBITRARY_VIEW_BUFFER = 200;\r\n   private static final int MIN_PEN_SIZE = 1;\r\n   private static final int MAX_PEN_SIZE = 10;\r\n   private static final int MIN_SCREEN_TO_IMAGE_PIXEL_RATIO = 1;\r\n   private static final int MAX_SCREEN_TO_IMAGE_PIXEL_RATIO = 30;\r\n   private static final int DEFAULT_IMAGE_PIXEL_ROWS = 26;\r\n   private static final int DEFAULT_IMAGE_PIXEL_COLUMNS = 24;\r\n\r\n   private final JFrame frame;\r\n   private final JScrollPane drawingAreaScrollPane = new JScrollPane();\r\n\r\n   private BufferedImage image;\r\n   private Color transparencyColor = Color.WHITE;\r\n   private Color cursorColor = Color.BLACK;\r\n   private Color gridLinesColor = Color.GRAY;\r\n   private boolean hasGridLines = true;\r\n   private int penSize = 1;\r\n   private int screenToImagePixelRatio = 10;\r\n\r\n   public static void main(final String[] args)\r\n   {\r\n   \r\n      final BufferedImage image = new BufferedImage(20, 20, BufferedImage.TYPE_INT_ARGB);\r\n   \r\n      IntStream\r\n         .range(0, 20)\r\n         .forEach(i -&gt; image.setRGB(i, i, Color.RED.getRGB()))\r\n         ;\r\n   \r\n      new GUI(image);\r\n   \r\n   }\r\n\r\n   public GUI()\r\n   {\r\n   \r\n      this(DEFAULT_IMAGE_PIXEL_ROWS, DEFAULT_IMAGE_PIXEL_COLUMNS);\r\n   \r\n   }\r\n\r\n   public GUI(final int numImagePixelRows, final int numImagePixelColumns)\r\n   {\r\n   \r\n      this(new BufferedImage(numImagePixelColumns, numImagePixelRows, BufferedImage.TYPE_INT_ARGB));\r\n   \r\n   }\r\n\r\n   public GUI(final BufferedImage image)\r\n   {\r\n   \r\n      Objects.requireNonNull(image);\r\n   \r\n      try\r\n      {\r\n      \r\n         UIManager.setLookAndFeel(UIManager.getCrossPlatformLookAndFeelClassName());\r\n      \r\n      }\r\n      \r\n      catch (Exception e)\r\n      {\r\n      \r\n         throw new RuntimeException(e);\r\n      \r\n      }\r\n   \r\n      INITALIZING_METADATA_INSTANCE_FIELDS:\r\n      {\r\n      \r\n         this.image = image;\r\n      \r\n      }\r\n   \r\n      this.frame = new JFrame();\r\n   \r\n      this.frame.setTitle(&quot;Paint&quot;);\r\n      this.frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);\r\n   \r\n      this.frame.add(this.createMainPanel());\r\n   \r\n      this.frame.pack();\r\n      this.frame.setLocationByPlatform(true);\r\n      this.frame.setVisible(true);\r\n   \r\n   }\r\n\r\n   private JPanel createMainPanel()\r\n   {\r\n   \r\n      final JPanel mainPanel = new JPanel(new BorderLayout());\r\n   \r\n      mainPanel.add(this.createCenterPanel(),   BorderLayout.CENTER);\r\n   \r\n      return mainPanel;\r\n   \r\n   }\r\n\r\n   private JPanel createCenterPanel()\r\n   {\r\n   \r\n      final GUI gui = this; //useful when trying to differentiate between different this&#39;.\r\n   \r\n      final JPanel mainPanel;\r\n   \r\n      CREATE_MAIN_PANEL:\r\n      {\r\n      \r\n         mainPanel = new JPanel();\r\n         mainPanel.setLayout(new BorderLayout());\r\n      \r\n      }\r\n   \r\n      final JPanel drawingPanel;\r\n   \r\n      final Runnable UPDATE_DRAWING_PANEL_BORDER_TEXT;\r\n      final Runnable RECREATE_DRAWING_AREA_FRESH;\r\n      final Runnable REPAINT_DRAWING_PANEL;\r\n   \r\n      final BiFunction&lt;Point, Integer, Point&gt; originalToZoomed =\r\n         (original, ratio) -&gt;\r\n            new Point(original.x * ratio, original.y * ratio)\r\n            ;\r\n   \r\n      final BiFunction&lt;Point, Integer, Point&gt; zoomedToOriginal =\r\n         (zoomed, ratio) -&gt;\r\n            new Point\r\n            (\r\n               (zoomed.x - (zoomed.x % ratio)) / ratio,\r\n               (zoomed.y - (zoomed.y % ratio)) / ratio\r\n            )\r\n            ;\r\n   \r\n      CREATE_DRAWING_PANEL:\r\n      {\r\n      \r\n         SET_UP_DRAWING_PANEL:\r\n         {\r\n         \r\n            drawingPanel = new JPanel();\r\n         \r\n            drawingPanel.setLayout(new BoxLayout(drawingPanel, BoxLayout.PAGE_AXIS));\r\n         \r\n            drawingPanel.add(Box.createRigidArea(new Dimension(123, 456)));\r\n         \r\n         }\r\n      \r\n         REPAINT_DRAWING_PANEL =\r\n            () -&gt;\r\n            {\r\n            \r\n               drawingPanel.repaint();\r\n               drawingPanel.revalidate();\r\n            \r\n            }\r\n            ;\r\n      \r\n         RECREATE_DRAWING_AREA_FRESH =\r\n            () -&gt;\r\n            {\r\n            \r\n               final var thingToFocus = drawingPanel;\r\n            \r\n               drawingPanel.removeAll();\r\n            \r\n               final Dimension drawingArea = gui.deriveDrawingAreaDimensions();\r\n            \r\n               final IntUnaryOperator quantize =\r\n                  num -&gt;\r\n                     num - (num % gui.screenToImagePixelRatio)\r\n                     ;\r\n            \r\n               final Box.Filler box =\r\n                  new Box.Filler(drawingArea, drawingArea, drawingArea)\r\n                  {\r\n                  \r\n                     @Override\r\n                     protected void paintComponent(final Graphics dontUse)\r\n                     {\r\n                     \r\n                        super.paintComponent(dontUse);\r\n                     \r\n                        if (!(dontUse instanceof Graphics2D g))\r\n                        {\r\n                        \r\n                           throw new RuntimeException(&quot;Unknown graphics type = &quot; + dontUse);\r\n                        \r\n                        }\r\n                     \r\n                        DRAW_DRAWN_PIXELS:\r\n                        {\r\n                        \r\n                           final Rectangle rectangle  = gui.drawingAreaScrollPane.getViewport().getViewRect();\r\n                        \r\n                           //We are only drawing a subsection because we may be working with GIGANTIC images.\r\n                           //If we attempt to draw the whole image, performance will drop like a rock.\r\n                           CALCULATE_SUBSECTION_TO_DRAW:\r\n                           {\r\n                           \r\n                              final int x = rectangle.x;\r\n                              final int y = rectangle.y;\r\n                              final int width = Math.min(rectangle.width, drawingArea.width);\r\n                              final int height = Math.min(rectangle.height, drawingArea.height);\r\n                           \r\n                              g.setBackground(gui.transparencyColor);\r\n                              g.clearRect(rectangle.x, rectangle.y, width, height);\r\n                           \r\n                           }\r\n                        \r\n                           DRAW_SUBSECTION_OF_IMAGE:\r\n                           {\r\n                           \r\n                              final int originalImageX;\r\n                              final int zoomedInImageX;\r\n                              final int originalImageY;\r\n                              final int zoomedInImageY;\r\n                           \r\n                              CALCULATE_ORIGINAL_POSITION:\r\n                              {\r\n                              \r\n                                 final int quantizedX = quantize.applyAsInt(rectangle.x);\r\n                                 final int quantizedY = quantize.applyAsInt(rectangle.y);\r\n                              \r\n                                 zoomedInImageX = Math.max(quantizedX, 0);\r\n                                 originalImageX = zoomedInImageX / gui.screenToImagePixelRatio;\r\n                              \r\n                                 zoomedInImageY = Math.max(quantizedY, 0);\r\n                                 originalImageY = zoomedInImageY / gui.screenToImagePixelRatio;\r\n                              \r\n                              }\r\n                           \r\n                              final int zoomedInImageWidth;\r\n                              final int originalImageWidth;\r\n                              final int zoomedInImageHeight;\r\n                              final int originalImageHeight;\r\n                           \r\n                              CALCULATE_ORIGINAL_DIMENSION:\r\n                              {\r\n                              \r\n                                 final int minWidth = Math.min(rectangle.width, drawingArea.width);\r\n                                 final int quantizedMinWidth = quantize.applyAsInt(minWidth);\r\n                                 final int potentialWidth = quantizedMinWidth + gui.screenToImagePixelRatio;\r\n                                 zoomedInImageWidth = Math.min(drawingArea.width, potentialWidth);\r\n                                 originalImageWidth = zoomedInImageWidth / gui.screenToImagePixelRatio;\r\n                              \r\n                                 final int minHeight = Math.min(rectangle.height, drawingArea.height);\r\n                                 final int quantizedMinHeight = quantize.applyAsInt(minHeight);\r\n                                 final int potentialHeight = quantizedMinHeight + gui.screenToImagePixelRatio;\r\n                                 zoomedInImageHeight = Math.min(drawingArea.height, potentialHeight);\r\n                                 originalImageHeight = zoomedInImageHeight / gui.screenToImagePixelRatio;\r\n                              \r\n                              }\r\n                           \r\n                              g.setPaint(gui.cursorColor);\r\n                           \r\n                              System.out.println(zoomedInImageX + &quot; -- &quot; + zoomedInImageY + &quot; -- &quot; + zoomedInImageWidth + &quot; -- &quot; + zoomedInImageHeight + &quot; ---- &quot; + originalImageX + &quot; -- &quot; + originalImageY + &quot; -- &quot; + originalImageWidth + &quot; -- &quot; + originalImageHeight + &quot; ----- &quot; + rectangle + &quot; - &quot; + drawingArea);\r\n                           \r\n                              g\r\n                                 .drawImage\r\n                                 (\r\n                                    gui.image,\r\n                                    zoomedInImageX,\r\n                                    zoomedInImageY,\r\n                                    zoomedInImageX + zoomedInImageWidth,\r\n                                    zoomedInImageY + zoomedInImageHeight,\r\n                                    originalImageX,\r\n                                    originalImageY,\r\n                                    originalImageX + originalImageWidth,\r\n                                    originalImageY + originalImageHeight,\r\n                                    //gui.transparencyColor,\r\n                                    null\r\n                                 )\r\n                                 ;\r\n                           \r\n                           }\r\n                        \r\n                           DRAW_GRID_LINES:\r\n                           {\r\n                           \r\n                              if (gui.hasGridLines &amp;&amp; gui.screenToImagePixelRatio &gt; 1)\r\n                              {\r\n                              \r\n                                 g.setPaint(gui.gridLinesColor);\r\n                                 g.setStroke(new java.awt.BasicStroke(1));\r\n                              \r\n                                 IntStream\r\n                                    .range(rectangle.y, rectangle.y + rectangle.height)\r\n                                    .forEach\r\n                                    (\r\n                                       eachIndex -&gt;\r\n                                       {\r\n                                       \r\n                                          if (eachIndex % gui.screenToImagePixelRatio == 0)\r\n                                          {\r\n                                          \r\n                                             g\r\n                                                .drawLine\r\n                                                (\r\n                                                   rectangle.x,\r\n                                                   eachIndex,\r\n                                                   rectangle.x + rectangle.width,\r\n                                                   eachIndex\r\n                                                )\r\n                                                ;\r\n                                          \r\n                                          }\r\n                                       \r\n                                       }\r\n                                    )\r\n                                    ;\r\n                              \r\n                                 IntStream\r\n                                    .rangeClosed(rectangle.x, rectangle.x + rectangle.width)\r\n                                    .forEach\r\n                                    (\r\n                                       eachIndex -&gt;\r\n                                       {\r\n                                       \r\n                                          if (eachIndex % gui.screenToImagePixelRatio == 0)\r\n                                          {\r\n                                          \r\n                                             g\r\n                                                .drawLine\r\n                                                (\r\n                                                   eachIndex,\r\n                                                   rectangle.y,\r\n                                                   eachIndex,\r\n                                                   rectangle.y + rectangle.height\r\n                                                )\r\n                                                ;\r\n                                          \r\n                                          }\r\n                                       \r\n                                       }\r\n                                    )\r\n                                    ;\r\n                              \r\n                              }\r\n                           \r\n                           }\r\n                        \r\n                        }\r\n                     \r\n                        // gui.drawingAreaScrollPane.repaint();\r\n                        // gui.drawingAreaScrollPane.revalidate();\r\n                     \r\n                     }\r\n                  \r\n                  }\r\n                  ;\r\n            \r\n               box.setBorder(BorderFactory.createLineBorder(Color.BLACK, 1));\r\n            \r\n               drawingPanel.add(Box.createHorizontalGlue());\r\n               drawingPanel.add(box);\r\n               drawingPanel.add(Box.createHorizontalGlue());\r\n            \r\n               REPAINT_DRAWING_PANEL.run();\r\n            \r\n            }\r\n            ;\r\n      \r\n         RECREATE_DRAWING_AREA_FRESH.run();\r\n      \r\n      }\r\n   \r\n      final JPanel drawingSettingsPanel;\r\n   \r\n      CREATE_DRAWING_SETTINGS_PANEL:\r\n      {\r\n      \r\n         drawingSettingsPanel = new JPanel();\r\n         drawingSettingsPanel.setLayout(new BoxLayout(drawingSettingsPanel, BoxLayout.LINE_AXIS));\r\n      \r\n         final JSpinner screenToImagePixelRatioDropDownMenu;\r\n      \r\n         SCREEN_TO_IMAGE_PIXEL_RATIO_DROP_DOWN_MENU:\r\n         {\r\n         \r\n            screenToImagePixelRatioDropDownMenu =\r\n               new JSpinner\r\n               (\r\n                  new SpinnerNumberModel\r\n                  (\r\n                     this.screenToImagePixelRatio,\r\n                     MIN_SCREEN_TO_IMAGE_PIXEL_RATIO,\r\n                     MAX_SCREEN_TO_IMAGE_PIXEL_RATIO,\r\n                     1\r\n                  )\r\n               )\r\n               ;\r\n         \r\n            screenToImagePixelRatioDropDownMenu\r\n               .addChangeListener\r\n               (\r\n                  event -&gt;\r\n                  {\r\n                  \r\n                     if (!(screenToImagePixelRatioDropDownMenu.getValue() instanceof Integer iii))\r\n                     {\r\n                     \r\n                        throw new IllegalStateException();\r\n                     \r\n                     }\r\n                  \r\n                     this.screenToImagePixelRatio = iii;\r\n                  \r\n                     RECREATE_DRAWING_AREA_FRESH.run();\r\n                  \r\n                  }\r\n               );\r\n         \r\n         }\r\n      \r\n         final JCheckBox hasGridLinesCheckBox;\r\n      \r\n         HAS_GRID_LINES_CHECK_BOX:\r\n         {\r\n         \r\n            hasGridLinesCheckBox = new JCheckBox();\r\n            hasGridLinesCheckBox.setText(&quot;Activate Grid Lines&quot;);\r\n            hasGridLinesCheckBox.setSelected(true);\r\n            hasGridLinesCheckBox\r\n               .addActionListener\r\n               (\r\n                  event -&gt;\r\n                  {\r\n                  \r\n                     this.hasGridLines = hasGridLinesCheckBox.isSelected();\r\n                  \r\n                     REPAINT_DRAWING_PANEL.run();\r\n                  \r\n                  }\r\n               )\r\n               ;\r\n         \r\n         }\r\n         \r\n         final JButton repaint = new JButton(&quot;REPAINT&quot;);\r\n         repaint.addActionListener(event -&gt; REPAINT_DRAWING_PANEL.run());\r\n      \r\n         drawingSettingsPanel.add(Box.createHorizontalGlue());\r\n         drawingSettingsPanel.add(screenToImagePixelRatioDropDownMenu);\r\n         drawingSettingsPanel.add(new JLabel(&quot;SCREEN pixels = 1 IMAGE pixel&quot;));\r\n         drawingSettingsPanel.add(Box.createHorizontalStrut(10));\r\n         drawingSettingsPanel.add(hasGridLinesCheckBox);\r\n         drawingSettingsPanel.add(Box.createHorizontalStrut(10));\r\n         drawingSettingsPanel.add(repaint);\r\n         drawingSettingsPanel.add(Box.createHorizontalGlue());\r\n      \r\n      }\r\n   \r\n      CREATE_CENTERED_DRAWING_PANEL:\r\n      {\r\n      \r\n         final JPanel centeredDrawingPanel = new JPanel();\r\n         centeredDrawingPanel.setLayout(new BoxLayout(centeredDrawingPanel, BoxLayout.PAGE_AXIS));\r\n         centeredDrawingPanel.add(Box.createVerticalGlue());\r\n         centeredDrawingPanel.add(drawingPanel);\r\n         centeredDrawingPanel.add(Box.createVerticalGlue());\r\n      \r\n         UPDATE_DRAWING_PANEL_BORDER_TEXT =\r\n            () -&gt;\r\n               this.drawingAreaScrollPane\r\n                  .setBorder\r\n                  (\r\n                     BorderFactory\r\n                        .createCompoundBorder\r\n                        (\r\n                           TITLED_BORDER\r\n                              .apply\r\n                              (\r\n                                 &quot;Drawing Area -- &quot;\r\n                                 + gui.image.getHeight()\r\n                                 + &quot; rows and &quot;\r\n                                 + gui.image.getWidth()\r\n                                 + &quot; columns&quot;\r\n                              ),\r\n                           BorderFactory.createLineBorder(Color.BLACK, 1)\r\n                        )\r\n                  )\r\n                  ;\r\n      \r\n         UPDATE_DRAWING_PANEL_BORDER_TEXT.run();\r\n      \r\n         this.drawingAreaScrollPane.setViewportView(centeredDrawingPanel);\r\n      \r\n      }\r\n   \r\n      mainPanel.add(drawingSettingsPanel, BorderLayout.NORTH);\r\n      mainPanel.add(this.drawingAreaScrollPane, BorderLayout.CENTER);\r\n   \r\n      return mainPanel;\r\n   \r\n   }\r\n\r\n   private static void print(final String text)\r\n   {\r\n   \r\n      System.out.println(LocalDateTime.now() + &quot; -- &quot; + text);\r\n   \r\n   }\r\n\r\n   private Dimension deriveDrawingAreaDimensions()\r\n   {\r\n   \r\n      return\r\n         new Dimension\r\n         (\r\n            this.image.getWidth() * this.screenToImagePixelRatio,\r\n            this.image.getHeight() * this.screenToImagePixelRatio\r\n         )\r\n         ;\r\n   \r\n   }\r\n\r\n}\r\n\r\n```\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Mm2Nn.png\r\n  [2]: https://i.stack.imgur.com/mjKVd.png\r\n  [3]: https://i.stack.imgur.com/rqams.png\r\n  [4]: https://i.stack.imgur.com/Xybm4.png\r\n  [5]: https://i.stack.imgur.com/6rRhC.png","title":"Why are there these weird visual artifacts when scrolling my BufferedImage? And how do I prevent them from happening?","body":"<p>I am creating an application that involves drawing a <code>BufferedImage</code> to a <code>JComponent</code> using <code>Graphics2D</code> in a <code>paintComponent(Graphics)</code> method.</p>\n<p>I added the ability to zoom in and out of the image. The <code>JComponent</code> I am drawing to is contained within a <code>JScrollPane</code>. If the image becomes zoomed in enough, scrollbars appear.</p>\n<p>Whenever I scroll the <code>JScrollPane</code>, I get weird visual artifacts.</p>\n<p>Here is the zoomed out version of my image.</p>\n<p><a href=\"https://i.stack.imgur.com/Mm2Nn.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Mm2Nn.png\" alt=\"Zoomed out version of the image\" /></a></p>\n<p>Here is the zoomed in version of my image, with no visual artifacts.</p>\n<p><a href=\"https://i.stack.imgur.com/mjKVd.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/mjKVd.png\" alt=\"Zoomed in version of the image\" /></a></p>\n<p>And here is what it looks like when I scroll down a bit, and then to the right.</p>\n<p><a href=\"https://i.stack.imgur.com/rqams.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/rqams.png\" alt=\"Zoomed in version of the image with weird visual artifacts\" /></a></p>\n<p>Upon discovering this, I added a button that just triggers a <code>repaint()</code> and <code>revalidate()</code> call on the relevant <code>JComponent</code>. Doing that fixed it.</p>\n<p>BEFORE PRESSING THE REPAINT BUTTON ON THE TOP RIGHT</p>\n<p><a href=\"https://i.stack.imgur.com/Xybm4.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Xybm4.png\" alt=\"Before pressing REPAINT\" /></a></p>\n<p>AFTER PRESSING THE REPAINT BUTTON ON THE TOP RIGHT</p>\n<p><a href=\"https://i.stack.imgur.com/6rRhC.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/6rRhC.png\" alt=\"After pressing REPAINT\" /></a></p>\n<p>Here is the relevant portion of the code that handles painting the <code>BufferedImage</code> to the <code>JComponent</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Override\nprotected void paintComponent(final Graphics dontUse)\n{\n\n   super.paintComponent(dontUse);\n\n   if (!(dontUse instanceof Graphics2D g))\n   {\n   \n      throw new RuntimeException(&quot;Unknown graphics type = &quot; + dontUse);\n   \n   }\n\n   DRAW_DRAWN_PIXELS:\n   {\n   \n      final Rectangle rectangle  = gui.drawingAreaScrollPane.getViewport().getViewRect();\n   \n      //We are only drawing a subsection because we may be working with GIGANTIC images.\n      //If we attempt to draw the whole image, performance will drop like a rock.\n      CALCULATE_SUBSECTION_TO_DRAW:\n      {\n      \n         final int x = rectangle.x;\n         final int y = rectangle.y;\n         final int width = Math.min(rectangle.width, drawingArea.width);\n         final int height = Math.min(rectangle.height, drawingArea.height);\n      \n         g.setBackground(gui.transparencyColor);\n         g.clearRect(rectangle.x, rectangle.y, width, height);\n      \n      }\n   \n      DRAW_SUBSECTION_OF_IMAGE:\n      {\n      \n         final int originalImageX;\n         final int zoomedInImageX;\n         final int originalImageY;\n         final int zoomedInImageY;\n      \n         CALCULATE_ORIGINAL_POSITION:\n         {\n         \n            final int quantizedX = quantize.applyAsInt(rectangle.x);\n            final int quantizedY = quantize.applyAsInt(rectangle.y);\n         \n            zoomedInImageX = Math.max(quantizedX, 0);\n            originalImageX = zoomedInImageX / gui.screenToImagePixelRatio;\n         \n            zoomedInImageY = Math.max(quantizedY, 0);\n            originalImageY = zoomedInImageY / gui.screenToImagePixelRatio;\n         \n         }\n      \n         final int zoomedInImageWidth;\n         final int originalImageWidth;\n         final int zoomedInImageHeight;\n         final int originalImageHeight;\n      \n         CALCULATE_ORIGINAL_DIMENSION:\n         {\n         \n            final int minWidth = Math.min(rectangle.width, drawingArea.width);\n            final int quantizedMinWidth = quantize.applyAsInt(minWidth);\n            final int potentialWidth = quantizedMinWidth + gui.screenToImagePixelRatio;\n            zoomedInImageWidth = Math.min(drawingArea.width, potentialWidth);\n            originalImageWidth = zoomedInImageWidth / gui.screenToImagePixelRatio;\n         \n            final int minHeight = Math.min(rectangle.height, drawingArea.height);\n            final int quantizedMinHeight = quantize.applyAsInt(minHeight);\n            final int potentialHeight = quantizedMinHeight + gui.screenToImagePixelRatio;\n            zoomedInImageHeight = Math.min(drawingArea.height, potentialHeight);\n            originalImageHeight = zoomedInImageHeight / gui.screenToImagePixelRatio;\n         \n         }\n      \n         g.setPaint(gui.cursorColor);\n      \n         System.out.println(zoomedInImageX + &quot; -- &quot; + zoomedInImageY + &quot; -- &quot; + zoomedInImageWidth + &quot; -- &quot; + zoomedInImageHeight + &quot; ---- &quot; + originalImageX + &quot; -- &quot; + originalImageY + &quot; -- &quot; + originalImageWidth + &quot; -- &quot; + originalImageHeight + &quot; ----- &quot; + rectangle + &quot; - &quot; + drawingArea);\n      \n         g\n            .drawImage\n            (\n               gui.image,\n               zoomedInImageX,\n               zoomedInImageY,\n               zoomedInImageX + zoomedInImageWidth,\n               zoomedInImageY + zoomedInImageHeight,\n               originalImageX,\n               originalImageY,\n               originalImageX + originalImageWidth,\n               originalImageY + originalImageHeight,\n               //gui.transparencyColor,\n               null\n            )\n            ;\n      \n      }\n   \n      DRAW_GRID_LINES:\n      {\n      \n         if (gui.hasGridLines &amp;&amp; gui.screenToImagePixelRatio &gt; 1)\n         {\n         \n            g.setPaint(gui.gridLinesColor);\n            g.setStroke(new java.awt.BasicStroke(1));\n         \n            IntStream\n               .range(rectangle.y, rectangle.y + rectangle.height)\n               .forEach\n               (\n                  eachIndex -&gt;\n                  {\n                  \n                     if (eachIndex % gui.screenToImagePixelRatio == 0)\n                     {\n                     \n                        g\n                           .drawLine\n                           (\n                              rectangle.x,\n                              eachIndex,\n                              rectangle.x + rectangle.width,\n                              eachIndex\n                           )\n                           ;\n                     \n                     }\n                  \n                  }\n               )\n               ;\n         \n            IntStream\n               .rangeClosed(rectangle.x, rectangle.x + rectangle.width)\n               .forEach\n               (\n                  eachIndex -&gt;\n                  {\n                  \n                     if (eachIndex % gui.screenToImagePixelRatio == 0)\n                     {\n                     \n                        g\n                           .drawLine\n                           (\n                              eachIndex,\n                              rectangle.y,\n                              eachIndex,\n                              rectangle.y + rectangle.height\n                           )\n                           ;\n                     \n                     }\n                  \n                  }\n               )\n               ;\n         \n         }\n      \n      }\n   \n   }\n\n   // gui.drawingAreaScrollPane.repaint();\n   // gui.drawingAreaScrollPane.revalidate();\n\n}\n\n</code></pre>\n<p>And here is a complete runnable example.</p>\n<pre class=\"lang-java prettyprint-override\"><code>\nimport javax.imageio.*;\nimport javax.imageio.event.*;\nimport javax.swing.*;\nimport javax.swing.border.*;\nimport javax.swing.colorchooser.*;\nimport javax.swing.filechooser.FileNameExtensionFilter;\nimport java.awt.AlphaComposite;\nimport java.awt.BorderLayout;\nimport java.awt.Color;\nimport java.awt.Dimension;\nimport java.awt.GridLayout;\nimport java.awt.Graphics;\nimport java.awt.Graphics2D;\nimport java.awt.Point;\nimport java.awt.Rectangle;\nimport java.awt.event.*;\nimport java.awt.geom.*;\nimport java.awt.image.*;\nimport java.io.File;\nimport java.time.format.DateTimeFormatter;\nimport java.time.LocalDateTime;\nimport java.util.*;\nimport java.util.concurrent.*;\nimport java.util.function.*;\nimport java.util.stream.*;\n\npublic class GUI\n{\n\n   private static final Function&lt;String, Border&gt; TITLED_BORDER =\n      title -&gt;\n         BorderFactory\n            .createTitledBorder\n            (\n               null,\n               title,\n               TitledBorder.CENTER,\n               TitledBorder.TOP\n            )\n            ;\n\n   private static final Color CLEAR = new Color(0, 0, 0, 0);\n   private static final Point OFF_SCREEN = new Point(-1, -1);\n\n   public static final int ARBITRARY_VIEW_BUFFER = 200;\n   private static final int MIN_PEN_SIZE = 1;\n   private static final int MAX_PEN_SIZE = 10;\n   private static final int MIN_SCREEN_TO_IMAGE_PIXEL_RATIO = 1;\n   private static final int MAX_SCREEN_TO_IMAGE_PIXEL_RATIO = 30;\n   private static final int DEFAULT_IMAGE_PIXEL_ROWS = 26;\n   private static final int DEFAULT_IMAGE_PIXEL_COLUMNS = 24;\n\n   private final JFrame frame;\n   private final JScrollPane drawingAreaScrollPane = new JScrollPane();\n\n   private BufferedImage image;\n   private Color transparencyColor = Color.WHITE;\n   private Color cursorColor = Color.BLACK;\n   private Color gridLinesColor = Color.GRAY;\n   private boolean hasGridLines = true;\n   private int penSize = 1;\n   private int screenToImagePixelRatio = 10;\n\n   public static void main(final String[] args)\n   {\n   \n      final BufferedImage image = new BufferedImage(20, 20, BufferedImage.TYPE_INT_ARGB);\n   \n      IntStream\n         .range(0, 20)\n         .forEach(i -&gt; image.setRGB(i, i, Color.RED.getRGB()))\n         ;\n   \n      new GUI(image);\n   \n   }\n\n   public GUI()\n   {\n   \n      this(DEFAULT_IMAGE_PIXEL_ROWS, DEFAULT_IMAGE_PIXEL_COLUMNS);\n   \n   }\n\n   public GUI(final int numImagePixelRows, final int numImagePixelColumns)\n   {\n   \n      this(new BufferedImage(numImagePixelColumns, numImagePixelRows, BufferedImage.TYPE_INT_ARGB));\n   \n   }\n\n   public GUI(final BufferedImage image)\n   {\n   \n      Objects.requireNonNull(image);\n   \n      try\n      {\n      \n         UIManager.setLookAndFeel(UIManager.getCrossPlatformLookAndFeelClassName());\n      \n      }\n      \n      catch (Exception e)\n      {\n      \n         throw new RuntimeException(e);\n      \n      }\n   \n      INITALIZING_METADATA_INSTANCE_FIELDS:\n      {\n      \n         this.image = image;\n      \n      }\n   \n      this.frame = new JFrame();\n   \n      this.frame.setTitle(&quot;Paint&quot;);\n      this.frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);\n   \n      this.frame.add(this.createMainPanel());\n   \n      this.frame.pack();\n      this.frame.setLocationByPlatform(true);\n      this.frame.setVisible(true);\n   \n   }\n\n   private JPanel createMainPanel()\n   {\n   \n      final JPanel mainPanel = new JPanel(new BorderLayout());\n   \n      mainPanel.add(this.createCenterPanel(),   BorderLayout.CENTER);\n   \n      return mainPanel;\n   \n   }\n\n   private JPanel createCenterPanel()\n   {\n   \n      final GUI gui = this; //useful when trying to differentiate between different this'.\n   \n      final JPanel mainPanel;\n   \n      CREATE_MAIN_PANEL:\n      {\n      \n         mainPanel = new JPanel();\n         mainPanel.setLayout(new BorderLayout());\n      \n      }\n   \n      final JPanel drawingPanel;\n   \n      final Runnable UPDATE_DRAWING_PANEL_BORDER_TEXT;\n      final Runnable RECREATE_DRAWING_AREA_FRESH;\n      final Runnable REPAINT_DRAWING_PANEL;\n   \n      final BiFunction&lt;Point, Integer, Point&gt; originalToZoomed =\n         (original, ratio) -&gt;\n            new Point(original.x * ratio, original.y * ratio)\n            ;\n   \n      final BiFunction&lt;Point, Integer, Point&gt; zoomedToOriginal =\n         (zoomed, ratio) -&gt;\n            new Point\n            (\n               (zoomed.x - (zoomed.x % ratio)) / ratio,\n               (zoomed.y - (zoomed.y % ratio)) / ratio\n            )\n            ;\n   \n      CREATE_DRAWING_PANEL:\n      {\n      \n         SET_UP_DRAWING_PANEL:\n         {\n         \n            drawingPanel = new JPanel();\n         \n            drawingPanel.setLayout(new BoxLayout(drawingPanel, BoxLayout.PAGE_AXIS));\n         \n            drawingPanel.add(Box.createRigidArea(new Dimension(123, 456)));\n         \n         }\n      \n         REPAINT_DRAWING_PANEL =\n            () -&gt;\n            {\n            \n               drawingPanel.repaint();\n               drawingPanel.revalidate();\n            \n            }\n            ;\n      \n         RECREATE_DRAWING_AREA_FRESH =\n            () -&gt;\n            {\n            \n               final var thingToFocus = drawingPanel;\n            \n               drawingPanel.removeAll();\n            \n               final Dimension drawingArea = gui.deriveDrawingAreaDimensions();\n            \n               final IntUnaryOperator quantize =\n                  num -&gt;\n                     num - (num % gui.screenToImagePixelRatio)\n                     ;\n            \n               final Box.Filler box =\n                  new Box.Filler(drawingArea, drawingArea, drawingArea)\n                  {\n                  \n                     @Override\n                     protected void paintComponent(final Graphics dontUse)\n                     {\n                     \n                        super.paintComponent(dontUse);\n                     \n                        if (!(dontUse instanceof Graphics2D g))\n                        {\n                        \n                           throw new RuntimeException(&quot;Unknown graphics type = &quot; + dontUse);\n                        \n                        }\n                     \n                        DRAW_DRAWN_PIXELS:\n                        {\n                        \n                           final Rectangle rectangle  = gui.drawingAreaScrollPane.getViewport().getViewRect();\n                        \n                           //We are only drawing a subsection because we may be working with GIGANTIC images.\n                           //If we attempt to draw the whole image, performance will drop like a rock.\n                           CALCULATE_SUBSECTION_TO_DRAW:\n                           {\n                           \n                              final int x = rectangle.x;\n                              final int y = rectangle.y;\n                              final int width = Math.min(rectangle.width, drawingArea.width);\n                              final int height = Math.min(rectangle.height, drawingArea.height);\n                           \n                              g.setBackground(gui.transparencyColor);\n                              g.clearRect(rectangle.x, rectangle.y, width, height);\n                           \n                           }\n                        \n                           DRAW_SUBSECTION_OF_IMAGE:\n                           {\n                           \n                              final int originalImageX;\n                              final int zoomedInImageX;\n                              final int originalImageY;\n                              final int zoomedInImageY;\n                           \n                              CALCULATE_ORIGINAL_POSITION:\n                              {\n                              \n                                 final int quantizedX = quantize.applyAsInt(rectangle.x);\n                                 final int quantizedY = quantize.applyAsInt(rectangle.y);\n                              \n                                 zoomedInImageX = Math.max(quantizedX, 0);\n                                 originalImageX = zoomedInImageX / gui.screenToImagePixelRatio;\n                              \n                                 zoomedInImageY = Math.max(quantizedY, 0);\n                                 originalImageY = zoomedInImageY / gui.screenToImagePixelRatio;\n                              \n                              }\n                           \n                              final int zoomedInImageWidth;\n                              final int originalImageWidth;\n                              final int zoomedInImageHeight;\n                              final int originalImageHeight;\n                           \n                              CALCULATE_ORIGINAL_DIMENSION:\n                              {\n                              \n                                 final int minWidth = Math.min(rectangle.width, drawingArea.width);\n                                 final int quantizedMinWidth = quantize.applyAsInt(minWidth);\n                                 final int potentialWidth = quantizedMinWidth + gui.screenToImagePixelRatio;\n                                 zoomedInImageWidth = Math.min(drawingArea.width, potentialWidth);\n                                 originalImageWidth = zoomedInImageWidth / gui.screenToImagePixelRatio;\n                              \n                                 final int minHeight = Math.min(rectangle.height, drawingArea.height);\n                                 final int quantizedMinHeight = quantize.applyAsInt(minHeight);\n                                 final int potentialHeight = quantizedMinHeight + gui.screenToImagePixelRatio;\n                                 zoomedInImageHeight = Math.min(drawingArea.height, potentialHeight);\n                                 originalImageHeight = zoomedInImageHeight / gui.screenToImagePixelRatio;\n                              \n                              }\n                           \n                              g.setPaint(gui.cursorColor);\n                           \n                              System.out.println(zoomedInImageX + &quot; -- &quot; + zoomedInImageY + &quot; -- &quot; + zoomedInImageWidth + &quot; -- &quot; + zoomedInImageHeight + &quot; ---- &quot; + originalImageX + &quot; -- &quot; + originalImageY + &quot; -- &quot; + originalImageWidth + &quot; -- &quot; + originalImageHeight + &quot; ----- &quot; + rectangle + &quot; - &quot; + drawingArea);\n                           \n                              g\n                                 .drawImage\n                                 (\n                                    gui.image,\n                                    zoomedInImageX,\n                                    zoomedInImageY,\n                                    zoomedInImageX + zoomedInImageWidth,\n                                    zoomedInImageY + zoomedInImageHeight,\n                                    originalImageX,\n                                    originalImageY,\n                                    originalImageX + originalImageWidth,\n                                    originalImageY + originalImageHeight,\n                                    //gui.transparencyColor,\n                                    null\n                                 )\n                                 ;\n                           \n                           }\n                        \n                           DRAW_GRID_LINES:\n                           {\n                           \n                              if (gui.hasGridLines &amp;&amp; gui.screenToImagePixelRatio &gt; 1)\n                              {\n                              \n                                 g.setPaint(gui.gridLinesColor);\n                                 g.setStroke(new java.awt.BasicStroke(1));\n                              \n                                 IntStream\n                                    .range(rectangle.y, rectangle.y + rectangle.height)\n                                    .forEach\n                                    (\n                                       eachIndex -&gt;\n                                       {\n                                       \n                                          if (eachIndex % gui.screenToImagePixelRatio == 0)\n                                          {\n                                          \n                                             g\n                                                .drawLine\n                                                (\n                                                   rectangle.x,\n                                                   eachIndex,\n                                                   rectangle.x + rectangle.width,\n                                                   eachIndex\n                                                )\n                                                ;\n                                          \n                                          }\n                                       \n                                       }\n                                    )\n                                    ;\n                              \n                                 IntStream\n                                    .rangeClosed(rectangle.x, rectangle.x + rectangle.width)\n                                    .forEach\n                                    (\n                                       eachIndex -&gt;\n                                       {\n                                       \n                                          if (eachIndex % gui.screenToImagePixelRatio == 0)\n                                          {\n                                          \n                                             g\n                                                .drawLine\n                                                (\n                                                   eachIndex,\n                                                   rectangle.y,\n                                                   eachIndex,\n                                                   rectangle.y + rectangle.height\n                                                )\n                                                ;\n                                          \n                                          }\n                                       \n                                       }\n                                    )\n                                    ;\n                              \n                              }\n                           \n                           }\n                        \n                        }\n                     \n                        // gui.drawingAreaScrollPane.repaint();\n                        // gui.drawingAreaScrollPane.revalidate();\n                     \n                     }\n                  \n                  }\n                  ;\n            \n               box.setBorder(BorderFactory.createLineBorder(Color.BLACK, 1));\n            \n               drawingPanel.add(Box.createHorizontalGlue());\n               drawingPanel.add(box);\n               drawingPanel.add(Box.createHorizontalGlue());\n            \n               REPAINT_DRAWING_PANEL.run();\n            \n            }\n            ;\n      \n         RECREATE_DRAWING_AREA_FRESH.run();\n      \n      }\n   \n      final JPanel drawingSettingsPanel;\n   \n      CREATE_DRAWING_SETTINGS_PANEL:\n      {\n      \n         drawingSettingsPanel = new JPanel();\n         drawingSettingsPanel.setLayout(new BoxLayout(drawingSettingsPanel, BoxLayout.LINE_AXIS));\n      \n         final JSpinner screenToImagePixelRatioDropDownMenu;\n      \n         SCREEN_TO_IMAGE_PIXEL_RATIO_DROP_DOWN_MENU:\n         {\n         \n            screenToImagePixelRatioDropDownMenu =\n               new JSpinner\n               (\n                  new SpinnerNumberModel\n                  (\n                     this.screenToImagePixelRatio,\n                     MIN_SCREEN_TO_IMAGE_PIXEL_RATIO,\n                     MAX_SCREEN_TO_IMAGE_PIXEL_RATIO,\n                     1\n                  )\n               )\n               ;\n         \n            screenToImagePixelRatioDropDownMenu\n               .addChangeListener\n               (\n                  event -&gt;\n                  {\n                  \n                     if (!(screenToImagePixelRatioDropDownMenu.getValue() instanceof Integer iii))\n                     {\n                     \n                        throw new IllegalStateException();\n                     \n                     }\n                  \n                     this.screenToImagePixelRatio = iii;\n                  \n                     RECREATE_DRAWING_AREA_FRESH.run();\n                  \n                  }\n               );\n         \n         }\n      \n         final JCheckBox hasGridLinesCheckBox;\n      \n         HAS_GRID_LINES_CHECK_BOX:\n         {\n         \n            hasGridLinesCheckBox = new JCheckBox();\n            hasGridLinesCheckBox.setText(&quot;Activate Grid Lines&quot;);\n            hasGridLinesCheckBox.setSelected(true);\n            hasGridLinesCheckBox\n               .addActionListener\n               (\n                  event -&gt;\n                  {\n                  \n                     this.hasGridLines = hasGridLinesCheckBox.isSelected();\n                  \n                     REPAINT_DRAWING_PANEL.run();\n                  \n                  }\n               )\n               ;\n         \n         }\n         \n         final JButton repaint = new JButton(&quot;REPAINT&quot;);\n         repaint.addActionListener(event -&gt; REPAINT_DRAWING_PANEL.run());\n      \n         drawingSettingsPanel.add(Box.createHorizontalGlue());\n         drawingSettingsPanel.add(screenToImagePixelRatioDropDownMenu);\n         drawingSettingsPanel.add(new JLabel(&quot;SCREEN pixels = 1 IMAGE pixel&quot;));\n         drawingSettingsPanel.add(Box.createHorizontalStrut(10));\n         drawingSettingsPanel.add(hasGridLinesCheckBox);\n         drawingSettingsPanel.add(Box.createHorizontalStrut(10));\n         drawingSettingsPanel.add(repaint);\n         drawingSettingsPanel.add(Box.createHorizontalGlue());\n      \n      }\n   \n      CREATE_CENTERED_DRAWING_PANEL:\n      {\n      \n         final JPanel centeredDrawingPanel = new JPanel();\n         centeredDrawingPanel.setLayout(new BoxLayout(centeredDrawingPanel, BoxLayout.PAGE_AXIS));\n         centeredDrawingPanel.add(Box.createVerticalGlue());\n         centeredDrawingPanel.add(drawingPanel);\n         centeredDrawingPanel.add(Box.createVerticalGlue());\n      \n         UPDATE_DRAWING_PANEL_BORDER_TEXT =\n            () -&gt;\n               this.drawingAreaScrollPane\n                  .setBorder\n                  (\n                     BorderFactory\n                        .createCompoundBorder\n                        (\n                           TITLED_BORDER\n                              .apply\n                              (\n                                 &quot;Drawing Area -- &quot;\n                                 + gui.image.getHeight()\n                                 + &quot; rows and &quot;\n                                 + gui.image.getWidth()\n                                 + &quot; columns&quot;\n                              ),\n                           BorderFactory.createLineBorder(Color.BLACK, 1)\n                        )\n                  )\n                  ;\n      \n         UPDATE_DRAWING_PANEL_BORDER_TEXT.run();\n      \n         this.drawingAreaScrollPane.setViewportView(centeredDrawingPanel);\n      \n      }\n   \n      mainPanel.add(drawingSettingsPanel, BorderLayout.NORTH);\n      mainPanel.add(this.drawingAreaScrollPane, BorderLayout.CENTER);\n   \n      return mainPanel;\n   \n   }\n\n   private static void print(final String text)\n   {\n   \n      System.out.println(LocalDateTime.now() + &quot; -- &quot; + text);\n   \n   }\n\n   private Dimension deriveDrawingAreaDimensions()\n   {\n   \n      return\n         new Dimension\n         (\n            this.image.getWidth() * this.screenToImagePixelRatio,\n            this.image.getHeight() * this.screenToImagePixelRatio\n         )\n         ;\n   \n   }\n\n}\n\n</code></pre>\n"},{"tags":["java","apache-spark"],"comments":[{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":1,"creation_date":1697598209,"post_id":77313243,"comment_id":136298647,"body_markdown":"It&#39;s impossible to parse a date reliably if you don&#39;t know the format.","body":"It&#39;s impossible to parse a date reliably if you don&#39;t know the format."},{"owner":{"account_id":25571017,"reputation":1,"user_id":19351373,"display_name":"Harsha"},"score":0,"creation_date":1697600605,"post_id":77313243,"comment_id":136298812,"body_markdown":"The format is &quot;yyyy-MM-dd hh:mm:ss.SSS&quot;","body":"The format is &quot;yyyy-MM-dd hh:mm:ss.SSS&quot;"},{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":0,"creation_date":1697600989,"post_id":77313243,"comment_id":136298836,"body_markdown":"Your question says that&#39;s the target format.","body":"Your question says that&#39;s the target format."},{"owner":{"account_id":9154396,"reputation":4513,"user_id":6807769,"display_name":"Vincent Doba"},"score":0,"creation_date":1697616490,"post_id":77313243,"comment_id":136300797,"body_markdown":"Is the input column containing the timestamp of type string ? You can answer that by using `.printSchema()` method on your dataframe.","body":"Is the input column containing the timestamp of type string ? You can answer that by using <code>.printSchema()</code> method on your dataframe."},{"owner":{"account_id":9154396,"reputation":4513,"user_id":6807769,"display_name":"Vincent Doba"},"score":0,"creation_date":1697616620,"post_id":77313243,"comment_id":136300816,"body_markdown":"Does this answer your question? [Pyspark Convert String to Date timestamp Column consisting two different formats](https://stackoverflow.com/questions/67149306/pyspark-convert-string-to-date-timestamp-column-consisting-two-different-formats)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/67149306/pyspark-convert-string-to-date-timestamp-column-consisting-two-different-formats\">Pyspark Convert String to Date timestamp Column consisting two different formats</a>"},{"owner":{"account_id":25571017,"reputation":1,"user_id":19351373,"display_name":"Harsha"},"score":0,"creation_date":1697618350,"post_id":77313243,"comment_id":136301144,"body_markdown":"Yes @VincentDoba but the data will be stored as string , but I have to again compare the string with other two timestamps, does spark supports that ?","body":"Yes @VincentDoba but the data will be stored as string , but I have to again compare the string with other two timestamps, does spark supports that ?"}],"answers":[{"tags":[],"owner":{"account_id":13426838,"reputation":2431,"user_id":9687910,"display_name":"chlebek"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698193645,"creation_date":1698193645,"answer_id":77356016,"question_id":77313243,"body_markdown":"    select to_timestamp(datetime,  &quot;yyyy-MM-dd hh:mm:ss.SSS&quot;) from\r\n    (\r\n    \tselect nvl(to_timestamp(datetime, &quot;yyyy/MM/dd&#39; &#39;HH:mm:ss.SSS&quot;),to_timestamp(datetime, &quot;dd-MM-yyyy&#39; &#39;HH:mm:ss.SSS&quot;)) as datetime\r\n    \tfrom\r\n    \t(\r\n    \t select &quot;2017/08/01 02:25:59.000&quot; as datetime\r\n    \t union all\r\n    \t select &quot;01-08-2017 02:30:59.000&quot; as datetime \r\n    \t) a\r\n    ) b;\r\n\r\n","title":"Spark - Convert timestamp format of a column to another format","body":"<pre><code>select to_timestamp(datetime,  &quot;yyyy-MM-dd hh:mm:ss.SSS&quot;) from\n(\n    select nvl(to_timestamp(datetime, &quot;yyyy/MM/dd' 'HH:mm:ss.SSS&quot;),to_timestamp(datetime, &quot;dd-MM-yyyy' 'HH:mm:ss.SSS&quot;)) as datetime\n    from\n    (\n     select &quot;2017/08/01 02:25:59.000&quot; as datetime\n     union all\n     select &quot;01-08-2017 02:30:59.000&quot; as datetime \n    ) a\n) b;\n</code></pre>\n"}],"owner":{"account_id":25571017,"reputation":1,"user_id":19351373,"display_name":"Harsha"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":62,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1698193645,"creation_date":1697597802,"question_id":77313243,"body_markdown":"I am having a timestamp column which could be of any format like &quot;dd-MM-yyyy hh:mm:ss.SSS&quot; or &quot;yyyy/MM/DD hh:mm:ss.SSS&quot;. I need to convert this to timestamp to a format like &quot;yyyy-MM-dd hh:mm:ss.SSS&quot; so that I can compare that  timestamp whether it is in Between two other timestamps","title":"Spark - Convert timestamp format of a column to another format","body":"<p>I am having a timestamp column which could be of any format like &quot;dd-MM-yyyy hh:mm:ss.SSS&quot; or &quot;yyyy/MM/DD hh:mm:ss.SSS&quot;. I need to convert this to timestamp to a format like &quot;yyyy-MM-dd hh:mm:ss.SSS&quot; so that I can compare that  timestamp whether it is in Between two other timestamps</p>\n"},{"tags":["java","microservices","reactive-programming","quarkus","mutiny"],"owner":{"account_id":12651180,"reputation":1,"user_id":9195276,"display_name":"Daifaityr234"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":31,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1698192614,"creation_date":1698192614,"question_id":77355977,"body_markdown":"I have read the answer below from Clement on fetching a list of results from an external service using Uni vs Multi: https://stackoverflow.com/questions/67495287/uni-combine-all-unis-v-s-multi-onitem-transformtomultiandconcatenate\r\n\r\nCurrently my code looks like this, where uniResponses only has two events:\r\n\r\n```\r\nuniResponses = requests.stream().map(event -&gt; client.create(event)).toList();\r\nreturn uni.onItem()\r\n.call(() -&gt; Uni.combine().all().unis(uniResponses).discardItems());\r\n```\r\n\r\nI have had problems with getting all responses from the external service after the fact. How can I ensure that both event responses are populated, but done in a non-blocking fashion?\r\n\r\nThe event responses are handled by a EventResponseListener, which has a process method, and pushes the response object to CosmosDB repo\r\n\r\n```\r\nprotected Uni&lt;Void&gt; process(final ResponseEvent event){\r\n\r\nfinal ResponseData data = event.getData);\r\nreturn repo.getResponseObjectByIdAsync(data.getId())\r\n.onFailure(ConcurrentModificationException.class)\r\n.retry().withBackOff(Duration.ofSeconds(2)).withJitter(0.3).atMost(2)\r\n.onItem()\r\n.transformToUni(item -&gt; {\r\nreturn repo.patch(item.getId(), item.getDerivedId(), item.getResponses())\r\n.onFailure(ConcurrentModificationException.class)\r\n.retry().withBackOff(Duration.ofSeconds(2)).withJitter(0.3).atMost(2)\r\n.onItem()\r\n.transformToUni(responseService::sendUpdate).replaceWithVoid();\r\n});\r\n```\r\nwhere the responses array would have two response objects\r\n\r\n```\r\nResponseObject(Outcome SUCCESS), ResponseObject(Outcome SUCCESS)\r\n```\r\n\r\nbut instead have only one response object due to concurrency issues\r\n\r\n```\r\nResponseObject(Outcome IN_PROGRESS)\r\n```","title":"Converting Uni.combine().all().unis() approach to transformToUniAndConcatenate","body":"<p>I have read the answer below from Clement on fetching a list of results from an external service using Uni vs Multi: <a href=\"https://stackoverflow.com/questions/67495287/uni-combine-all-unis-v-s-multi-onitem-transformtomultiandconcatenate\">Uni.combine().all().unis() v.s. Multi..onItem().transformToMultiAndConcatenate().collect()</a></p>\n<p>Currently my code looks like this, where uniResponses only has two events:</p>\n<pre><code>uniResponses = requests.stream().map(event -&gt; client.create(event)).toList();\nreturn uni.onItem()\n.call(() -&gt; Uni.combine().all().unis(uniResponses).discardItems());\n</code></pre>\n<p>I have had problems with getting all responses from the external service after the fact. How can I ensure that both event responses are populated, but done in a non-blocking fashion?</p>\n<p>The event responses are handled by a EventResponseListener, which has a process method, and pushes the response object to CosmosDB repo</p>\n<pre><code>protected Uni&lt;Void&gt; process(final ResponseEvent event){\n\nfinal ResponseData data = event.getData);\nreturn repo.getResponseObjectByIdAsync(data.getId())\n.onFailure(ConcurrentModificationException.class)\n.retry().withBackOff(Duration.ofSeconds(2)).withJitter(0.3).atMost(2)\n.onItem()\n.transformToUni(item -&gt; {\nreturn repo.patch(item.getId(), item.getDerivedId(), item.getResponses())\n.onFailure(ConcurrentModificationException.class)\n.retry().withBackOff(Duration.ofSeconds(2)).withJitter(0.3).atMost(2)\n.onItem()\n.transformToUni(responseService::sendUpdate).replaceWithVoid();\n});\n</code></pre>\n<p>where the responses array would have two response objects</p>\n<pre><code>ResponseObject(Outcome SUCCESS), ResponseObject(Outcome SUCCESS)\n</code></pre>\n<p>but instead have only one response object due to concurrency issues</p>\n<pre><code>ResponseObject(Outcome IN_PROGRESS)\n</code></pre>\n"},{"tags":["java","spring","spring-cloud","spring-cloud-loadbalancer"],"comments":[{"owner":{"account_id":1368060,"reputation":24601,"user_id":2730527,"display_name":"spencergibb"},"score":0,"creation_date":1698335649,"post_id":77350946,"comment_id":136395359,"body_markdown":"See the note here https://docs.spring.io/spring-cloud-commons/docs/current/reference/html/#switching-between-the-load-balancing-algorithms and how to customize loadbalancer configuration here https://docs.spring.io/spring-cloud-commons/docs/current/reference/html/#custom-loadbalancer-configuration","body":"See the note here <a href=\"https://docs.spring.io/spring-cloud-commons/docs/current/reference/html/#switching-between-the-load-balancing-algorithms\" rel=\"nofollow noreferrer\">docs.spring.io/spring-cloud-commons/docs/current/reference/h&zwnj;&#8203;tml/&hellip;</a> and how to customize loadbalancer configuration here <a href=\"https://docs.spring.io/spring-cloud-commons/docs/current/reference/html/#custom-loadbalancer-configuration\" rel=\"nofollow noreferrer\">docs.spring.io/spring-cloud-commons/docs/current/reference/h&zwnj;&#8203;tml/&hellip;</a>"}],"owner":{"account_id":28480293,"reputation":95,"user_id":21794356,"display_name":"Emiya Elien"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":21,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1698192329,"creation_date":1698140010,"question_id":77350946,"body_markdown":"I&#39;m using `spring-cloud-starter-openfeign` and `spring-cloud-starter-loadbalancer` in a demo project, here is the project&#39;s structor\r\n\r\n```\r\nproject\r\n   |-common\r\n   |-service-a\r\n   |-service-b\r\n```\r\n\r\nI define 2 feign-clients for service-a and service-b in common, and common will be depended by them, here are the clients&#39; code\r\n\r\n```java\r\n// Here are two simple service-client, these two clients will be\r\n// implemented by their controller. For example, service-a will have a\r\n// controller class [ServiceAController implements FeignClientServiceA]\r\n// so on as the service-b\r\n\r\n\r\n@FeignClient(&quot;service-a&quot;)\r\npublic interface FeignClientServiceA {\r\n    // This method is simply log the ${str} and return\r\n    @GetMapping(&quot;/echo/{str}&quot;)\r\n    String echo(@PathVariable String str);\r\n    \r\n    // This method will log the ${str} and then\r\n    // call another client&#39;s echo method with param ${str}\r\n    @GetMapping(&quot;/echo-rest/{str}&quot;)\r\n    String echoRest(@PathVariable String str);\r\n}\r\n\r\n// Similar as service-a\r\n@FeignClient(&quot;service-b&quot;)\r\npublic interface FeignClientServiceB {\r\n    @GetMapping(&quot;/echo/{str}&quot;)\r\n    String echo(@PathVariable String str);\r\n    \r\n    @GetMapping(&quot;/echo-rest/{str}&quot;)\r\n    String echoRest(@PathVariable String str);\r\n}\r\n```\r\n\r\nIn this case, when I start the Application of service-a and service-b, it goes on well when send request to /echo/{str} and /echo-rest/{str} both a and b. But when I try to define my customize LoadBalancer, I got error.\r\n\r\n```java\r\n@Configuration\r\npublic class CustomizeConfiguration {\r\n    @Bean\r\n    @ConditionalOnMissingBean\r\n    public CustomizeLoadBalancer reactorServiceInstanceLoadBalancer(Environment environment,\r\n                                                                                   LoadBalancerClientFactory loadBalancerClientFactory) {\r\n        String name = environment.getProperty(LoadBalancerClientFactory.PROPERTY_NAME);\r\n        return new CustomizeLoadBalancer(loadBalancerClientFactory.getLazyProvider(name, ServiceInstanceListSupplier.class),\r\n                name);\r\n    }\r\n}\r\n```\r\n\r\nThe `CustomizeLoadBalancer` is a completely copy of `RoundBobinLoadBalancer` and do some log. But when I started the Application of service-a and send request `/echo-rest/{str}`, I got an error\r\n\r\n```log\r\njava.lang.NullPointerException: Cannot invoke &quot;Object.hashCode()&quot; because &quot;key&quot; is null\r\n\tat java.base/java.util.concurrent.ConcurrentHashMap.get(ConcurrentHashMap.java:936) ~[na:na]\r\n\tat java.base/java.util.concurrent.ConcurrentHashMap.containsKey(ConcurrentHashMap.java:964) ~[na:na]\r\n\tat org.springframework.cloud.context.named.NamedContextFactory.getContext(NamedContextFactory.java:119) ~[spring-cloud-context-4.0.4.jar:4.0.4]\r\n\tat org.springframework.cloud.context.named.NamedContextFactory.getProvider(NamedContextFactory.java:212) ~[spring-cloud-context-4.0.4.jar:4.0.4]\r\n\tat org.springframework.cloud.context.named.ClientFactoryObjectProvider.delegate(ClientFactoryObjectProvider.java:115) ~[spring-cloud-context-4.0.4.jar:4.0.4]\r\n\tat org.springframework.cloud.context.named.ClientFactoryObjectProvider.getIfAvailable(ClientFactoryObjectProvider.java:64) ~[spring-cloud-context-4.0.4.jar:4.0.4]\r\n\tat com.example.loadbalancer.config.CustomizeLoadBalancer.choose(CustomizeLoadBalancer.java:40) ~[classes/:na]\r\n\tat com.example.loadbalancer.config.CustomizeLoadBalancer.choose(CustomizeLoadBalancer.java:17) ~[classes/:na]\r\n\tat org.springframework.cloud.loadbalancer.blocking.client.BlockingLoadBalancerClient.choose(BlockingLoadBalancerClient.java:163) ~[spring-cloud-loadbalancer-4.0.4.jar:4.0.4]\r\n\tat org.springframework.cloud.openfeign.loadbalancer.FeignBlockingLoadBalancerClient.execute(FeignBlockingLoadBalancerClient.java:118) ~[spring-cloud-openfeign-core-4.0.4.jar:4.0.4]\r\n\tat feign.SynchronousMethodHandler.executeAndDecode(SynchronousMethodHandler.java:100) ~[feign-core-12.4.jar:na]\r\n\tat feign.SynchronousMethodHandler.invoke(SynchronousMethodHandler.java:70) ~[feign-core-12.4.jar:na]\r\n\tat feign.ReflectiveFeign$FeignInvocationHandler.invoke(ReflectiveFeign.java:96) ~[feign-core-12.4.jar:na]\r\n\tat jdk.proxy2/jdk.proxy2.$Proxy84.echo(Unknown Source) ~[na:na]\r\n\tat com.example.loadbalancer.controller.ServiceAController.echoRest(ServiceAController.java:32) ~[classes/:na]\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-6.0.13.jar:6.0.13]\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-6.0.13.jar:6.0.13]\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.0.13.jar:6.0.13]\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884) ~[spring-webmvc-6.0.13.jar:6.0.13]\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797) ~[spring-webmvc-6.0.13.jar:6.0.13]\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.0.13.jar:6.0.13]\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1081) ~[spring-webmvc-6.0.13.jar:6.0.13]\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:974) ~[spring-webmvc-6.0.13.jar:6.0.13]\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1011) ~[spring-webmvc-6.0.13.jar:6.0.13]\r\n\tat org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903) ~[spring-webmvc-6.0.13.jar:6.0.13]\r\n```\r\n\r\nI got the cause, the expression `String name = environment.getProperty(LoadBalancerClientFactory.PROPERTY_NAME);` is null, and then I start to set breakpoint and compare the source and customize loadbalancer, and finally I find the clue\r\n\r\nThe expression will goes to `PropertySourcePropertyResolver#getProperty`, I check the propertySourceList inside, and found the difference.\r\n\r\nDefaultly, the `propertySourceList` will have 16 size, but after I inject my CustomizeLoadBalancer and replace the source, it turns to 15. \r\n\r\nThe lacking one is `MapPropertySource {name=&#39;loadbalancer&#39;}`, in service-a project, it contains one mapping `loadbalancer.client.name -&gt; service-b`\r\n\r\nI don&#39;t known what was happened cause the decrease, why the replace will cause a &#39;catastrophic&#39; result? Is there any solution?","title":"How to define customize LoadBalancer class correctly and register it to Spring context in springcloud-loadbalancer?","body":"<p>I'm using <code>spring-cloud-starter-openfeign</code> and <code>spring-cloud-starter-loadbalancer</code> in a demo project, here is the project's structor</p>\n<pre><code>project\n   |-common\n   |-service-a\n   |-service-b\n</code></pre>\n<p>I define 2 feign-clients for service-a and service-b in common, and common will be depended by them, here are the clients' code</p>\n<pre class=\"lang-java prettyprint-override\"><code>// Here are two simple service-client, these two clients will be\n// implemented by their controller. For example, service-a will have a\n// controller class [ServiceAController implements FeignClientServiceA]\n// so on as the service-b\n\n\n@FeignClient(&quot;service-a&quot;)\npublic interface FeignClientServiceA {\n    // This method is simply log the ${str} and return\n    @GetMapping(&quot;/echo/{str}&quot;)\n    String echo(@PathVariable String str);\n    \n    // This method will log the ${str} and then\n    // call another client's echo method with param ${str}\n    @GetMapping(&quot;/echo-rest/{str}&quot;)\n    String echoRest(@PathVariable String str);\n}\n\n// Similar as service-a\n@FeignClient(&quot;service-b&quot;)\npublic interface FeignClientServiceB {\n    @GetMapping(&quot;/echo/{str}&quot;)\n    String echo(@PathVariable String str);\n    \n    @GetMapping(&quot;/echo-rest/{str}&quot;)\n    String echoRest(@PathVariable String str);\n}\n</code></pre>\n<p>In this case, when I start the Application of service-a and service-b, it goes on well when send request to /echo/{str} and /echo-rest/{str} both a and b. But when I try to define my customize LoadBalancer, I got error.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\npublic class CustomizeConfiguration {\n    @Bean\n    @ConditionalOnMissingBean\n    public CustomizeLoadBalancer reactorServiceInstanceLoadBalancer(Environment environment,\n                                                                                   LoadBalancerClientFactory loadBalancerClientFactory) {\n        String name = environment.getProperty(LoadBalancerClientFactory.PROPERTY_NAME);\n        return new CustomizeLoadBalancer(loadBalancerClientFactory.getLazyProvider(name, ServiceInstanceListSupplier.class),\n                name);\n    }\n}\n</code></pre>\n<p>The <code>CustomizeLoadBalancer</code> is a completely copy of <code>RoundBobinLoadBalancer</code> and do some log. But when I started the Application of service-a and send request <code>/echo-rest/{str}</code>, I got an error</p>\n<pre><code>java.lang.NullPointerException: Cannot invoke &quot;Object.hashCode()&quot; because &quot;key&quot; is null\n    at java.base/java.util.concurrent.ConcurrentHashMap.get(ConcurrentHashMap.java:936) ~[na:na]\n    at java.base/java.util.concurrent.ConcurrentHashMap.containsKey(ConcurrentHashMap.java:964) ~[na:na]\n    at org.springframework.cloud.context.named.NamedContextFactory.getContext(NamedContextFactory.java:119) ~[spring-cloud-context-4.0.4.jar:4.0.4]\n    at org.springframework.cloud.context.named.NamedContextFactory.getProvider(NamedContextFactory.java:212) ~[spring-cloud-context-4.0.4.jar:4.0.4]\n    at org.springframework.cloud.context.named.ClientFactoryObjectProvider.delegate(ClientFactoryObjectProvider.java:115) ~[spring-cloud-context-4.0.4.jar:4.0.4]\n    at org.springframework.cloud.context.named.ClientFactoryObjectProvider.getIfAvailable(ClientFactoryObjectProvider.java:64) ~[spring-cloud-context-4.0.4.jar:4.0.4]\n    at com.example.loadbalancer.config.CustomizeLoadBalancer.choose(CustomizeLoadBalancer.java:40) ~[classes/:na]\n    at com.example.loadbalancer.config.CustomizeLoadBalancer.choose(CustomizeLoadBalancer.java:17) ~[classes/:na]\n    at org.springframework.cloud.loadbalancer.blocking.client.BlockingLoadBalancerClient.choose(BlockingLoadBalancerClient.java:163) ~[spring-cloud-loadbalancer-4.0.4.jar:4.0.4]\n    at org.springframework.cloud.openfeign.loadbalancer.FeignBlockingLoadBalancerClient.execute(FeignBlockingLoadBalancerClient.java:118) ~[spring-cloud-openfeign-core-4.0.4.jar:4.0.4]\n    at feign.SynchronousMethodHandler.executeAndDecode(SynchronousMethodHandler.java:100) ~[feign-core-12.4.jar:na]\n    at feign.SynchronousMethodHandler.invoke(SynchronousMethodHandler.java:70) ~[feign-core-12.4.jar:na]\n    at feign.ReflectiveFeign$FeignInvocationHandler.invoke(ReflectiveFeign.java:96) ~[feign-core-12.4.jar:na]\n    at jdk.proxy2/jdk.proxy2.$Proxy84.echo(Unknown Source) ~[na:na]\n    at com.example.loadbalancer.controller.ServiceAController.echoRest(ServiceAController.java:32) ~[classes/:na]\n    at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]\n    at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]\n    at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-6.0.13.jar:6.0.13]\n    at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-6.0.13.jar:6.0.13]\n    at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.0.13.jar:6.0.13]\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884) ~[spring-webmvc-6.0.13.jar:6.0.13]\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797) ~[spring-webmvc-6.0.13.jar:6.0.13]\n    at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.0.13.jar:6.0.13]\n    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1081) ~[spring-webmvc-6.0.13.jar:6.0.13]\n    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:974) ~[spring-webmvc-6.0.13.jar:6.0.13]\n    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1011) ~[spring-webmvc-6.0.13.jar:6.0.13]\n    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903) ~[spring-webmvc-6.0.13.jar:6.0.13]\n</code></pre>\n<p>I got the cause, the expression <code>String name = environment.getProperty(LoadBalancerClientFactory.PROPERTY_NAME);</code> is null, and then I start to set breakpoint and compare the source and customize loadbalancer, and finally I find the clue</p>\n<p>The expression will goes to <code>PropertySourcePropertyResolver#getProperty</code>, I check the propertySourceList inside, and found the difference.</p>\n<p>Defaultly, the <code>propertySourceList</code> will have 16 size, but after I inject my CustomizeLoadBalancer and replace the source, it turns to 15.</p>\n<p>The lacking one is <code>MapPropertySource {name='loadbalancer'}</code>, in service-a project, it contains one mapping <code>loadbalancer.client.name -&gt; service-b</code></p>\n<p>I don't known what was happened cause the decrease, why the replace will cause a 'catastrophic' result? Is there any solution?</p>\n"},{"tags":["java","multithreading","connection-pooling","amazon-sqs"],"answers":[{"tags":[],"owner":{"account_id":5739360,"reputation":755,"user_id":4532512,"accept_rate":86,"display_name":"Hakuna Matata"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1598425399,"creation_date":1598425399,"answer_id":63592211,"question_id":63576023,"body_markdown":"First of all dont create new threads for each and every message thats the bad idea.\r\nCreate one thread which keep poll your SQS and then send the retrieved data for further process to another thread using workstealing threadpool or some other pools. \r\n\r\nHere is the pseudo code,\r\n\r\n\r\n   \r\n\r\n    public final class AsyncThreadUtils {\r\n    \r\n        private static final ExecutorService WORKER_SERVICE = Executors.newWorkStealingPool();\r\n    \r\n        private AsyncThreadUtils() {\r\n        }\r\n    \r\n        public static void addTask(Runnable asyncThread) {\r\n            WORKER_SERVICE.submit(asyncThread);\r\n        }\r\n    \r\n        public static void stopAllThreads() throws InterruptedException {\r\n            if (!WORKER_SERVICE.isShutdown() || !WORKER_SERVICE.isTerminated()) {\r\n                WORKER_SERVICE.awaitTermination(0, TimeUnit.NANOSECONDS);\r\n                WORKER_SERVICE.shutdownNow();\r\n            }\r\n        }\r\n    }        \r\n    class DataConsumer implements Runnable {\r\n            while(true) {\r\n                // Get the message from SQS\r\n                // If data received then give it to another thread for processing\r\n                AsyncThreadUtils.addTask(data -&gt; { \r\n                       // Process goes here.\r\n    });\r\n                // sleep for some time like 400ms\r\n            }\r\n        }\r\n         \r\n            // Initiate above thread during the bootup of your program.\r\n            Thread sqsDataConsumer = new Thread(new DataConsumer())\r\n           sqsDataConsumer.start();\r\n\r\nBefore shutdown of your java process call the shutdown method of threadpool.\r\n","title":"java.lang.IllegalStateException: Connection pool shut down. How to handle a connection pool exception inside multithread application?","body":"<p>First of all dont create new threads for each and every message thats the bad idea.\nCreate one thread which keep poll your SQS and then send the retrieved data for further process to another thread using workstealing threadpool or some other pools.</p>\n<p>Here is the pseudo code,</p>\n<pre><code>public final class AsyncThreadUtils {\n\n    private static final ExecutorService WORKER_SERVICE = Executors.newWorkStealingPool();\n\n    private AsyncThreadUtils() {\n    }\n\n    public static void addTask(Runnable asyncThread) {\n        WORKER_SERVICE.submit(asyncThread);\n    }\n\n    public static void stopAllThreads() throws InterruptedException {\n        if (!WORKER_SERVICE.isShutdown() || !WORKER_SERVICE.isTerminated()) {\n            WORKER_SERVICE.awaitTermination(0, TimeUnit.NANOSECONDS);\n            WORKER_SERVICE.shutdownNow();\n        }\n    }\n}        \nclass DataConsumer implements Runnable {\n        while(true) {\n            // Get the message from SQS\n            // If data received then give it to another thread for processing\n            AsyncThreadUtils.addTask(data -&gt; { \n                   // Process goes here.\n});\n            // sleep for some time like 400ms\n        }\n    }\n     \n        // Initiate above thread during the bootup of your program.\n        Thread sqsDataConsumer = new Thread(new DataConsumer())\n       sqsDataConsumer.start();\n</code></pre>\n<p>Before shutdown of your java process call the shutdown method of threadpool.</p>\n"}],"owner":{"account_id":16847710,"reputation":11,"user_id":12181527,"display_name":"Divya Kumar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":8502,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1698192110,"creation_date":1598348209,"question_id":63576023,"body_markdown":"My application is creating multithread to read messages from SQS here\r\n\r\n```\r\n\r\nnew Thread(() -&gt; {\r\n\t\t\twhile (true) {\r\n\t\t\t\treadMessages();\r\n\t\t\t}\r\n\t\t});\r\n```\r\nThe readMessage  method has functionality like this\r\n\r\n```\r\n public void readMessages() {\r\n       ........\r\n\r\n       Object messages = new ArrayList();\r\n       try {\r\n          slingshotMessage = (new ReceiveMessageRequest()).withQueueUrl(this.queueUrl)\r\n                            .withWaitTimeSeconds(this.subProps.getWaitTimeSeconds())\r\n                          .withVisibilityTimeout(this.subProps.getVisibilityTimeoutSeconds())\r\n                         .withMaxNumberOfMessages(this.subProps.getMaxNumberMessages());\r\n           messages = this.sqs.receiveMessage(slingshotMessage).getMessages();\r\n           \r\n        } catch (Exception var6) {\r\n            log.error(&quot;An error occurred while reading messages for subscriber: &#39;&quot; + this.subProps.getSubscriberName() + &quot;&#39; queueUrl: &#39;&quot; + this.queueUrl + &quot;&#39;&quot;, var6);\r\n        }\r\n\r\n}\r\n```\r\n\r\nI see the exception is raised at `this.sqs.receiveMessage` inside read message() function. I am catching the exception here but when an error is thrown the log pile up with the repeated exception saying \r\n\r\n```\r\n\r\njava.lang.IllegalStateException: Connection pool shut down\r\n\tat org.apache.http.util.Asserts.check(Asserts.java:34) ~[httpcore-4.4.12.jar:4.4.12]\r\n\tat org.apache.http.pool.AbstractConnPool.lease(AbstractConnPool.java:196) ~[httpcore-4.4.12.jar:4.4.12]\r\n\tat org.apache.http.impl.conn.PoolingHttpClientConnectionManager.requestConnection(PoolingHttpClientConnectionManager.java:268) ~[httpclient-4.5.10.jar:4.5.10]\r\n\tat jdk.internal.reflect.GeneratedMethodAccessor14.invoke(Unknown Source) ~[na:na]\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:566) ~[na:na]\r\n\tat com.amazonaws.http.conn.ClientConnectionManagerFactory$Handler.invoke(ClientConnectionManagerFactory.java:76) ~[aws-java-sdk-core-1.11.408.jar:na]\r\n\tat com.amazonaws.http.conn.$Proxy37.requestConnection(Unknown Source) ~[na:na]\r\n\tat org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:176) ~[httpclient-4.5.10.jar:4.5.10]\r\n\tat org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:186) ~[httpclient-4.5.10.jar:4.5.10]\r\n\tat org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185) ~[httpclient-4.5.10.jar:4.5.10]\r\n\tat org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:83) ~[httpclient-4.5.10.jar:4.5.10]\r\n\tat org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56) ~[httpclient-4.5.10.jar:4.5.10]\r\n\tat com.amazonaws.http.apache.client.impl.SdkHttpClient.execute(SdkHttpClient.java:72) ~[aws-java-sdk-core-1.11.408.jar:na]\r\n\tat com.amazonaws.http.AmazonHttpClient$RequestExecutor.executeOneRequest(AmazonHttpClient.java:1256) ~[aws-java-sdk-core-1.11.408.jar:na]\r\n\tat com.amazonaws.http.AmazonHttpClient$RequestExecutor.executeHelper(AmazonHttpClient.java:1072) ~[aws-java-sdk-core-1.11.408.jar:na]\r\n\tat com.amazonaws.http.AmazonHttpClient$RequestExecutor.doExecute(AmazonHttpClient.java:745) ~[aws-java-sdk-core-1.11.408.jar:na]\r\n\tat com.amazonaws.http.AmazonHttpClient$RequestExecutor.executeWithTimer(AmazonHttpClient.java:719) ~[aws-java-sdk-core-1.11.408.jar:na]\r\n\tat com.amazonaws.http.AmazonHttpClient$RequestExecutor.execute(AmazonHttpClient.java:701) ~[aws-java-sdk-core-1.11.408.jar:na]\r\n\tat com.amazonaws.http.AmazonHttpClient$RequestExecutor.access$500(AmazonHttpClient.java:669) ~[aws-java-sdk-core-1.11.408.jar:na]\r\n\tat com.amazonaws.http.AmazonHttpClient$RequestExecutionBuilderImpl.execute(AmazonHttpClient.java:651) ~[aws-java-sdk-core-1.11.408.jar:na]\r\n\tat com.amazonaws.http.AmazonHttpClient.execute(AmazonHttpClient.java:515) ~[aws-java-sdk-core-1.11.408.jar:na]\r\n\tat com.amazonaws.services.sqs.AmazonSQSClient.doInvoke(AmazonSQSClient.java:2147) ~[aws-java-sdk-sqs-1.11.415.jar:na]\r\n\tat com.amazonaws.services.sqs.AmazonSQSClient.invoke(AmazonSQSClient.java:2116) ~[aws-java-sdk-sqs-1.11.415.jar:na]\r\n\tat com.amazonaws.services.sqs.AmazonSQSClient.invoke(AmazonSQSClient.java:2105) ~[aws-java-sdk-sqs-1.11.415.jar:na]\r\n\tat com.amazonaws.services.sqs.AmazonSQSClient.executeReceiveMessage(AmazonSQSClient.java:1559) ~[aws-java-sdk-sqs-1.11.415.jar:na]\r\n\tat com.amazonaws.services.sqs.AmazonSQSClient.receiveMessage(AmazonSQSClient.java:1530) ~[aws-java-sdk-sqs-1.11.415.jar:na]\r\n\tat com.lmig.global.reuse.slingshot.subscriber.aws.AwsSubscriber.readMessages(AwsSubscriber.java:63) ~[slingshot-1.3.37-B3-RELEASE.jar:1.3.37-B3-RELEASE]\r\n\tat com.lmig.global.reuse.slingshot.subscriber.Subscriber.lambda$newSubThread$0(Subscriber.java:61) ~[slingshot-1.3.37-B3-RELEASE.jar:1.3.37-B3-RELEASE]\r\n\tat java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]```\r\n```\r\nSo my questions are\r\n\r\n1. Is there a way how to solve connection pool exception?\r\n2. As this is inside a newthread lambda it keeps on creating the thread, Is there a way I can silently exit with required stack trace and not piling up with the same error on logs.","title":"java.lang.IllegalStateException: Connection pool shut down. How to handle a connection pool exception inside multithread application?","body":"<p>My application is creating multithread to read messages from SQS here</p>\n<pre><code>\nnew Thread(() -&gt; {\n            while (true) {\n                readMessages();\n            }\n        });\n</code></pre>\n<p>The readMessage  method has functionality like this</p>\n<pre><code> public void readMessages() {\n       ........\n\n       Object messages = new ArrayList();\n       try {\n          slingshotMessage = (new ReceiveMessageRequest()).withQueueUrl(this.queueUrl)\n                            .withWaitTimeSeconds(this.subProps.getWaitTimeSeconds())\n                          .withVisibilityTimeout(this.subProps.getVisibilityTimeoutSeconds())\n                         .withMaxNumberOfMessages(this.subProps.getMaxNumberMessages());\n           messages = this.sqs.receiveMessage(slingshotMessage).getMessages();\n           \n        } catch (Exception var6) {\n            log.error(&quot;An error occurred while reading messages for subscriber: '&quot; + this.subProps.getSubscriberName() + &quot;' queueUrl: '&quot; + this.queueUrl + &quot;'&quot;, var6);\n        }\n\n}\n</code></pre>\n<p>I see the exception is raised at <code>this.sqs.receiveMessage</code> inside read message() function. I am catching the exception here but when an error is thrown the log pile up with the repeated exception saying</p>\n<pre><code>\njava.lang.IllegalStateException: Connection pool shut down\n    at org.apache.http.util.Asserts.check(Asserts.java:34) ~[httpcore-4.4.12.jar:4.4.12]\n    at org.apache.http.pool.AbstractConnPool.lease(AbstractConnPool.java:196) ~[httpcore-4.4.12.jar:4.4.12]\n    at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.requestConnection(PoolingHttpClientConnectionManager.java:268) ~[httpclient-4.5.10.jar:4.5.10]\n    at jdk.internal.reflect.GeneratedMethodAccessor14.invoke(Unknown Source) ~[na:na]\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\n    at java.base/java.lang.reflect.Method.invoke(Method.java:566) ~[na:na]\n    at com.amazonaws.http.conn.ClientConnectionManagerFactory$Handler.invoke(ClientConnectionManagerFactory.java:76) ~[aws-java-sdk-core-1.11.408.jar:na]\n    at com.amazonaws.http.conn.$Proxy37.requestConnection(Unknown Source) ~[na:na]\n    at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:176) ~[httpclient-4.5.10.jar:4.5.10]\n    at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:186) ~[httpclient-4.5.10.jar:4.5.10]\n    at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185) ~[httpclient-4.5.10.jar:4.5.10]\n    at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:83) ~[httpclient-4.5.10.jar:4.5.10]\n    at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56) ~[httpclient-4.5.10.jar:4.5.10]\n    at com.amazonaws.http.apache.client.impl.SdkHttpClient.execute(SdkHttpClient.java:72) ~[aws-java-sdk-core-1.11.408.jar:na]\n    at com.amazonaws.http.AmazonHttpClient$RequestExecutor.executeOneRequest(AmazonHttpClient.java:1256) ~[aws-java-sdk-core-1.11.408.jar:na]\n    at com.amazonaws.http.AmazonHttpClient$RequestExecutor.executeHelper(AmazonHttpClient.java:1072) ~[aws-java-sdk-core-1.11.408.jar:na]\n    at com.amazonaws.http.AmazonHttpClient$RequestExecutor.doExecute(AmazonHttpClient.java:745) ~[aws-java-sdk-core-1.11.408.jar:na]\n    at com.amazonaws.http.AmazonHttpClient$RequestExecutor.executeWithTimer(AmazonHttpClient.java:719) ~[aws-java-sdk-core-1.11.408.jar:na]\n    at com.amazonaws.http.AmazonHttpClient$RequestExecutor.execute(AmazonHttpClient.java:701) ~[aws-java-sdk-core-1.11.408.jar:na]\n    at com.amazonaws.http.AmazonHttpClient$RequestExecutor.access$500(AmazonHttpClient.java:669) ~[aws-java-sdk-core-1.11.408.jar:na]\n    at com.amazonaws.http.AmazonHttpClient$RequestExecutionBuilderImpl.execute(AmazonHttpClient.java:651) ~[aws-java-sdk-core-1.11.408.jar:na]\n    at com.amazonaws.http.AmazonHttpClient.execute(AmazonHttpClient.java:515) ~[aws-java-sdk-core-1.11.408.jar:na]\n    at com.amazonaws.services.sqs.AmazonSQSClient.doInvoke(AmazonSQSClient.java:2147) ~[aws-java-sdk-sqs-1.11.415.jar:na]\n    at com.amazonaws.services.sqs.AmazonSQSClient.invoke(AmazonSQSClient.java:2116) ~[aws-java-sdk-sqs-1.11.415.jar:na]\n    at com.amazonaws.services.sqs.AmazonSQSClient.invoke(AmazonSQSClient.java:2105) ~[aws-java-sdk-sqs-1.11.415.jar:na]\n    at com.amazonaws.services.sqs.AmazonSQSClient.executeReceiveMessage(AmazonSQSClient.java:1559) ~[aws-java-sdk-sqs-1.11.415.jar:na]\n    at com.amazonaws.services.sqs.AmazonSQSClient.receiveMessage(AmazonSQSClient.java:1530) ~[aws-java-sdk-sqs-1.11.415.jar:na]\n    at com.lmig.global.reuse.slingshot.subscriber.aws.AwsSubscriber.readMessages(AwsSubscriber.java:63) ~[slingshot-1.3.37-B3-RELEASE.jar:1.3.37-B3-RELEASE]\n    at com.lmig.global.reuse.slingshot.subscriber.Subscriber.lambda$newSubThread$0(Subscriber.java:61) ~[slingshot-1.3.37-B3-RELEASE.jar:1.3.37-B3-RELEASE]\n    at java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]```\n</code></pre>\n<p>So my questions are</p>\n<ol>\n<li>Is there a way how to solve connection pool exception?</li>\n<li>As this is inside a newthread lambda it keeps on creating the thread, Is there a way I can silently exit with required stack trace and not piling up with the same error on logs.</li>\n</ol>\n"},{"tags":["java","selenium-webdriver","automation","automated-tests"],"comments":[{"owner":{"account_id":93689,"reputation":415951,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"score":0,"creation_date":1698191549,"post_id":77355916,"comment_id":136373303,"body_markdown":"Did you mean `public LoginPage loginPage = new LoginPage(myWebDriver);`?","body":"Did you mean <code>public LoginPage loginPage = new LoginPage(myWebDriver);</code>?"},{"owner":{"account_id":29746619,"reputation":1,"user_id":22797492,"display_name":"Ilham Nuswantoro Aji"},"score":0,"creation_date":1698192382,"post_id":77355916,"comment_id":136373374,"body_markdown":"@Bohemian no, only this code\n`public LoginPage loginPage;`","body":"@Bohemian no, only this code <code>public LoginPage loginPage;</code>"},{"owner":{"account_id":29746619,"reputation":1,"user_id":22797492,"display_name":"Ilham Nuswantoro Aji"},"score":0,"creation_date":1698192459,"post_id":77355916,"comment_id":136373378,"body_markdown":"and got error message\n**java.lang.NullPointerException: Cannot invoke &quot;pages.LoginPage.setUsername(String)&quot; because &quot;this.loginPage&quot; is null**","body":"and got error message <b>java.lang.NullPointerException: Cannot invoke &quot;pages.LoginPage.setUsername(String)&quot; because &quot;this.loginPage&quot; is null</b>"},{"owner":{"account_id":93689,"reputation":415951,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"score":0,"creation_date":1698192591,"post_id":77355916,"comment_id":136373392,"body_markdown":"yes, because you haven&#39;t initialised `loginPage`. Somewhere, you must execute `myLoginTest.loginPage = new LoginPage(myWebDriver);`","body":"yes, because you haven&#39;t initialised <code>loginPage</code>. Somewhere, you must execute <code>myLoginTest.loginPage = new LoginPage(myWebDriver);</code>"}],"owner":{"account_id":29746619,"reputation":1,"user_id":22797492,"display_name":"Ilham Nuswantoro Aji"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1698191421,"creation_date":1698191421,"question_id":77355916,"body_markdown":"Look at this code\r\n\r\n**LoginTest.java**\r\n```\r\npublic class LoginTest extends BaseTest{\r\n    public LoginPage loginPage;\r\n    @Test\r\n    public void successLogin(){\r\n        loginPage.setUsername(&quot;174172****&quot;);\r\n        loginPage.setPassword(&quot;********&quot;);\r\n        WelcomePage welcomePage = loginPage.clickBtn();\r\n        assertTrue(welcomePage.setWelcomeAlert().contains(&quot;WELCOME&quot;),\r\n                &quot;Alert text is incorrect&quot;);\r\n    }\r\n}\r\n```\r\n\r\n**LoginPage.java**\r\n```\r\npublic class LoginPage {\r\n    private WebDriver driver;\r\n    private By usernameField = By.id(&quot;username&quot;);\r\n    private By passwordField = By.id(&quot;password&quot;);\r\n    private By loginBtn = By.xpath(&quot;//button[normalize-space()=&#39;Login&#39;]&quot;);\r\n    public LoginPage(WebDriver driver){\r\n        this.driver = driver;\r\n    }\r\n    public void setUsername(String username){\r\n        driver.findElement(usernameField).sendKeys(username);\r\n    }\r\n    public void setPassword(String password){\r\n        driver.findElement(passwordField).sendKeys(password);\r\n    }\r\n    public WelcomePage clickBtn(){\r\n        driver.findElement(loginBtn).click();\r\n        return new WelcomePage(driver);\r\n    }\r\n}\r\n```\r\n\r\nI started to learn Selenium Java and I tried to make a automation script for Login, but I faced error like this\r\n[error_mssg](https://i.stack.imgur.com/81hAn.png)\r\nAnyone can help me to solve this?\r\n\r\ni tried to add this code to **LoginTest.java**\r\n`public LoginPage loginPage;`\r\nbut I don&#39;t know if that&#39;s the right code or no","title":"Selenium Java : java.lang.NullPointerException: Cannot invoke &quot;pages.LoginPage.setUsername(String)&quot; because &quot;this.loginPage&quot; is null","body":"<p>Look at this code</p>\n<p><strong>LoginTest.java</strong></p>\n<pre><code>public class LoginTest extends BaseTest{\n    public LoginPage loginPage;\n    @Test\n    public void successLogin(){\n        loginPage.setUsername(&quot;174172****&quot;);\n        loginPage.setPassword(&quot;********&quot;);\n        WelcomePage welcomePage = loginPage.clickBtn();\n        assertTrue(welcomePage.setWelcomeAlert().contains(&quot;WELCOME&quot;),\n                &quot;Alert text is incorrect&quot;);\n    }\n}\n</code></pre>\n<p><strong>LoginPage.java</strong></p>\n<pre><code>public class LoginPage {\n    private WebDriver driver;\n    private By usernameField = By.id(&quot;username&quot;);\n    private By passwordField = By.id(&quot;password&quot;);\n    private By loginBtn = By.xpath(&quot;//button[normalize-space()='Login']&quot;);\n    public LoginPage(WebDriver driver){\n        this.driver = driver;\n    }\n    public void setUsername(String username){\n        driver.findElement(usernameField).sendKeys(username);\n    }\n    public void setPassword(String password){\n        driver.findElement(passwordField).sendKeys(password);\n    }\n    public WelcomePage clickBtn(){\n        driver.findElement(loginBtn).click();\n        return new WelcomePage(driver);\n    }\n}\n</code></pre>\n<p>I started to learn Selenium Java and I tried to make a automation script for Login, but I faced error like this\n<a href=\"https://i.stack.imgur.com/81hAn.png\" rel=\"nofollow noreferrer\">error_mssg</a>\nAnyone can help me to solve this?</p>\n<p>i tried to add this code to <strong>LoginTest.java</strong>\n<code>public LoginPage loginPage;</code>\nbut I don't know if that's the right code or no</p>\n"},{"tags":["java","spring","spring-security"],"answers":[{"comments":[{"owner":{"account_id":4878213,"reputation":153,"user_id":3932696,"accept_rate":62,"display_name":"Waseem Akhtar"},"score":0,"creation_date":1448725383,"post_id":33970239,"comment_id":55702552,"body_markdown":"Well that was something i didn&#39;t know about spring-security. Just one more thing, in practical situation would that be alright if we tell the user that the account is locked, even with wrong password, who is trying to authenticate ???","body":"Well that was something i didn&#39;t know about spring-security. Just one more thing, in practical situation would that be alright if we tell the user that the account is locked, even with wrong password, who is trying to authenticate ???"},{"owner":{"account_id":104911,"reputation":119222,"user_id":280244,"accept_rate":81,"display_name":"Ralph"},"score":1,"creation_date":1448729524,"post_id":33970239,"comment_id":55703962,"body_markdown":"@Waseem Akhtar: I am not in the position to justify your second question: &quot;Is it good practice...&quot;, but IMHO you are right. -- Anyway the good thing of Spring (security) is, that you just need to have a look at the code to answer such question like yours, that is at least the way I did.","body":"@Waseem Akhtar: I am not in the position to justify your second question: &quot;Is it good practice...&quot;, but IMHO you are right. -- Anyway the good thing of Spring (security) is, that you just need to have a look at the code to answer such question like yours, that is at least the way I did."},{"owner":{"account_id":1666502,"reputation":1120,"user_id":1533783,"display_name":"Khalid Habib"},"score":0,"creation_date":1567593318,"post_id":33970239,"comment_id":102006569,"body_markdown":"also check this answer here https://stackoverflow.com/a/56202422/1533783","body":"also check this answer here <a href=\"https://stackoverflow.com/a/56202422/1533783\">stackoverflow.com/a/56202422/1533783</a>"}],"tags":[],"owner":{"account_id":104911,"reputation":119222,"user_id":280244,"accept_rate":81,"display_name":"Ralph"},"comment_count":3,"down_vote_count":0,"up_vote_count":12,"is_accepted":true,"score":12,"last_activity_date":1448707460,"creation_date":1448706270,"answer_id":33970239,"question_id":33969890,"body_markdown":"You asked:\r\n&gt;Spring Security : LockedException is thrown instead of BadCredentialsException, why?\r\n\r\nIt is because spring security will first check that the account exist and is valid, and after that it checks the password.\r\n\r\n\r\nMore concrete: it is done in `AbstractUserDetailsAuthenticationProvider.authenticate`. In an **very brief** description the method works this way:\r\n\r\n    user = retrieveUser(username, (UsernamePasswordAuthenticationToken) authentication);\r\n    ...\r\n    preAuthenticationChecks.check(user);\r\n    additionalAuthenticationChecks(user, (UsernamePasswordAuthenticationToken) authentication);\r\n    ...\r\n    postAuthenticationChecks.check(user);\r\n\r\n\r\n- `retrieveUser` - load the user\r\n- `preAuthenticationChecks.check(user);` - `DefaultPreAuthenticationChecks`: check for locked...\r\n- `additionalAuthenticationChecks` - checks the password\r\n- `postAuthenticationChecks.check(user);` - `DefaultPostAuthenticationChecks` check for not expired credentials\r\n\r\n\r\nThe good point is, that `preAuthenticationChecks` and `postAuthenticationChecks` are references to the Interface `UserDetailsChecker` so you can change them. Just implement your own two `UserDetailsChecker`, the one Null-Implementation for pre, and one for post that checks everything:\r\n\r\n - `!user.isAccountNonLocked()`\r\n - `!user.isEnabled()`\r\n - `!user.isAccountNonExpired()`\r\n - `!user.isCredentialsNonExpired()`\r\n","title":"Spring Security : LockedException is thrown instead of BadCredentialsException, why?","body":"<p>You asked:</p>\n\n<blockquote>\n  <p>Spring Security : LockedException is thrown instead of BadCredentialsException, why?</p>\n</blockquote>\n\n<p>It is because spring security will first check that the account exist and is valid, and after that it checks the password.</p>\n\n<p>More concrete: it is done in <code>AbstractUserDetailsAuthenticationProvider.authenticate</code>. In an <strong>very brief</strong> description the method works this way:</p>\n\n<pre><code>user = retrieveUser(username, (UsernamePasswordAuthenticationToken) authentication);\n...\npreAuthenticationChecks.check(user);\nadditionalAuthenticationChecks(user, (UsernamePasswordAuthenticationToken) authentication);\n...\npostAuthenticationChecks.check(user);\n</code></pre>\n\n<ul>\n<li><code>retrieveUser</code> - load the user</li>\n<li><code>preAuthenticationChecks.check(user);</code> - <code>DefaultPreAuthenticationChecks</code>: check for locked...</li>\n<li><code>additionalAuthenticationChecks</code> - checks the password</li>\n<li><code>postAuthenticationChecks.check(user);</code> - <code>DefaultPostAuthenticationChecks</code> check for not expired credentials</li>\n</ul>\n\n<p>The good point is, that <code>preAuthenticationChecks</code> and <code>postAuthenticationChecks</code> are references to the Interface <code>UserDetailsChecker</code> so you can change them. Just implement your own two <code>UserDetailsChecker</code>, the one Null-Implementation for pre, and one for post that checks everything:</p>\n\n<ul>\n<li><code>!user.isAccountNonLocked()</code></li>\n<li><code>!user.isEnabled()</code></li>\n<li><code>!user.isAccountNonExpired()</code></li>\n<li><code>!user.isCredentialsNonExpired()</code></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":5268071,"reputation":21,"user_id":4207302,"display_name":"Oliver Lu"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1674042619,"creation_date":1674042619,"answer_id":75158819,"question_id":33969890,"body_markdown":"I got this exception when there are more than one user with the same credential (name , email etc.) it the database. It was a test anyway. After I deleted those duplications everything&#39;s ok.","title":"Spring Security : LockedException is thrown instead of BadCredentialsException, why?","body":"<p>I got this exception when there are more than one user with the same credential (name , email etc.) it the database. It was a test anyway. After I deleted those duplications everything's ok.</p>\n"},{"tags":[],"owner":{"account_id":7082410,"reputation":117,"user_id":5420342,"accept_rate":43,"display_name":"Udhaya"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698189946,"creation_date":1698189946,"answer_id":77355857,"question_id":33969890,"body_markdown":"If you are tried in the way by implementing `org.springframework.security.core.userdetails.UserDetails` in your `User.class` and overridded the below methods, then please make sure you return true instead false. Because by deafult they coming with false which means we are telling that all the accounts are locked. \r\n\r\n    import java.util.Collection;\r\n    \r\n    import javax.persistence.Entity;\r\n    import javax.persistence.GeneratedValue;\r\n    import javax.persistence.GenerationType;\r\n    import javax.persistence.Id;\r\n    import javax.persistence.Table;\r\n    \r\n    import org.springframework.security.core.GrantedAuthority;\r\n    import org.springframework.security.core.userdetails.UserDetails;\r\n    \r\n    import lombok.AllArgsConstructor;\r\n    import lombok.Data;\r\n    import lombok.NoArgsConstructor;\r\n    \r\n    @Data\r\n    @AllArgsConstructor\r\n    @NoArgsConstructor\r\n    @Entity(name = &quot;user&quot;)\r\n    @Table(name = &quot;user_master&quot;)\r\n    public class User implements UserDetails {\r\n    \r\n    \t@Id\r\n    \t@GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    \tprivate Integer id;\r\n    \tprivate String email;\r\n    \tprivate String password;\r\n    \tprivate String firstName;\r\n    \tprivate String lastName;\r\n    \tprivate String username;\r\n    \r\n    \t@Override\r\n    \tpublic Collection&lt;? extends GrantedAuthority&gt; getAuthorities() {    \t\t\r\n    \t\treturn null;\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic boolean isAccountNonExpired() {    \t\t\r\n    \t\treturn true;\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic boolean isAccountNonLocked() {\r\n    \t\treturn true;\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic boolean isCredentialsNonExpired() {\r\n    \t\treturn true;\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic boolean isEnabled() {\r\n    \t\treturn true;\r\n    \t}\r\n    }","title":"Spring Security : LockedException is thrown instead of BadCredentialsException, why?","body":"<p>If you are tried in the way by implementing <code>org.springframework.security.core.userdetails.UserDetails</code> in your <code>User.class</code> and overridded the below methods, then please make sure you return true instead false. Because by deafult they coming with false which means we are telling that all the accounts are locked.</p>\n<pre><code>import java.util.Collection;\n\nimport javax.persistence.Entity;\nimport javax.persistence.GeneratedValue;\nimport javax.persistence.GenerationType;\nimport javax.persistence.Id;\nimport javax.persistence.Table;\n\nimport org.springframework.security.core.GrantedAuthority;\nimport org.springframework.security.core.userdetails.UserDetails;\n\nimport lombok.AllArgsConstructor;\nimport lombok.Data;\nimport lombok.NoArgsConstructor;\n\n@Data\n@AllArgsConstructor\n@NoArgsConstructor\n@Entity(name = &quot;user&quot;)\n@Table(name = &quot;user_master&quot;)\npublic class User implements UserDetails {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Integer id;\n    private String email;\n    private String password;\n    private String firstName;\n    private String lastName;\n    private String username;\n\n    @Override\n    public Collection&lt;? extends GrantedAuthority&gt; getAuthorities() {            \n        return null;\n    }\n\n    @Override\n    public boolean isAccountNonExpired() {          \n        return true;\n    }\n\n    @Override\n    public boolean isAccountNonLocked() {\n        return true;\n    }\n\n    @Override\n    public boolean isCredentialsNonExpired() {\n        return true;\n    }\n\n    @Override\n    public boolean isEnabled() {\n        return true;\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":4878213,"reputation":153,"user_id":3932696,"accept_rate":62,"display_name":"Waseem Akhtar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":13321,"favorite_count":0,"down_vote_count":0,"up_vote_count":9,"accepted_answer_id":33970239,"answer_count":3,"score":9,"last_activity_date":1698189946,"creation_date":1448703849,"question_id":33969890,"body_markdown":"&gt; Using Spring Security 4.0.2.RELEASE\r\n\r\nFor basic user authentication using spring-security framework, I implemented spring-security `DaoAuthenticationProvider`\r\n\r\nWhen user tries to login with correct username, **incorrect** password and user&#39;s **account is already locked**, then i expected that spring-security authentication module would be throwing `BadCredentialsException` But instead it throws `LockedException`\r\n\r\nMy Questions are\r\n\r\n 1. why spring-security is processing the user for further authentication while the credentials specially password is incorrect ?\r\n 2. Is it good practice to show message in application that &quot;User is Locked&quot; even if the password for the user is invalid ?\r\n 3. How do i manage to generate/catch `BadCredentialsException` for invalid password and locked user ?\r\n\r\nAny help would be appreciated. Authentication Provider implementation code is \r\n\r\n    @Component(&quot;authenticationProvider&quot;)\r\n    public class LoginAuthenticationProvider extends DaoAuthenticationProvider {\r\n\r\n\t    @Autowired\r\n\t    UserDAO userDAO;\r\n\r\n\t    @Autowired\r\n\t    @Qualifier(&quot;userDetailsService&quot;)\r\n\t    @Override\r\n\t    public void setUserDetailsService(UserDetailsService userDetailsService) {\r\n\t\t    super.setUserDetailsService(userDetailsService);\r\n\t    }\r\n\r\n\t    @Override\r\n\t    public Authentication authenticate(Authentication authentication) throws AuthenticationException {\r\n\t\t    try {\r\n\t\t\t    Authentication auth = super.authenticate(authentication);\r\n\t\t\t    // if reach here, means login success, else exception will be thrown\r\n\r\n\t\t\t    // reset the user attempts\r\n\t\t\t    userDAO.resetPasswordRetryAttempts(authentication.getName());\r\n\r\n\t\t\t    return auth;\r\n\t\t    } catch (BadCredentialsException ex) {\r\n\t\t\t    // invalid login, update user attempts\r\n\t\t\t    userDAO.updatePasswordRetryAttempts(authentication.getName(), PropertyUtils.getLoginAttemptsLimit());\r\n\t\t\t    throw ex;\r\n\t\t    } catch (LockedException ex) {\r\n\t\t\t    // this user is locked\r\n\t\t\t    throw ex;\r\n\t\t    } catch (AccountExpiredException ex) {\r\n\t\t\t    // this user is expired\r\n\t\t\t    throw ex;\r\n\t\t    } catch (Exception ex) {\r\n\t\t\t    ex.printStackTrace();\r\n\t\t\t    throw ex;\r\n\t\t    }\r\n\t    }\r\n\r\n    }\r\n","title":"Spring Security : LockedException is thrown instead of BadCredentialsException, why?","body":"<blockquote>\n  <p>Using Spring Security 4.0.2.RELEASE</p>\n</blockquote>\n\n<p>For basic user authentication using spring-security framework, I implemented spring-security <code>DaoAuthenticationProvider</code></p>\n\n<p>When user tries to login with correct username, <strong>incorrect</strong> password and user's <strong>account is already locked</strong>, then i expected that spring-security authentication module would be throwing <code>BadCredentialsException</code> But instead it throws <code>LockedException</code></p>\n\n<p>My Questions are</p>\n\n<ol>\n<li>why spring-security is processing the user for further authentication while the credentials specially password is incorrect ?</li>\n<li>Is it good practice to show message in application that \"User is Locked\" even if the password for the user is invalid ?</li>\n<li>How do i manage to generate/catch <code>BadCredentialsException</code> for invalid password and locked user ?</li>\n</ol>\n\n<p>Any help would be appreciated. Authentication Provider implementation code is </p>\n\n<pre><code>@Component(\"authenticationProvider\")\npublic class LoginAuthenticationProvider extends DaoAuthenticationProvider {\n\n    @Autowired\n    UserDAO userDAO;\n\n    @Autowired\n    @Qualifier(\"userDetailsService\")\n    @Override\n    public void setUserDetailsService(UserDetailsService userDetailsService) {\n        super.setUserDetailsService(userDetailsService);\n    }\n\n    @Override\n    public Authentication authenticate(Authentication authentication) throws AuthenticationException {\n        try {\n            Authentication auth = super.authenticate(authentication);\n            // if reach here, means login success, else exception will be thrown\n\n            // reset the user attempts\n            userDAO.resetPasswordRetryAttempts(authentication.getName());\n\n            return auth;\n        } catch (BadCredentialsException ex) {\n            // invalid login, update user attempts\n            userDAO.updatePasswordRetryAttempts(authentication.getName(), PropertyUtils.getLoginAttemptsLimit());\n            throw ex;\n        } catch (LockedException ex) {\n            // this user is locked\n            throw ex;\n        } catch (AccountExpiredException ex) {\n            // this user is expired\n            throw ex;\n        } catch (Exception ex) {\n            ex.printStackTrace();\n            throw ex;\n        }\n    }\n\n}\n</code></pre>\n"},{"tags":["javascript","java","jquery","scanning"],"comments":[{"owner":{"account_id":4829578,"reputation":4682,"user_id":3898076,"accept_rate":72,"display_name":"Naman Gala"},"score":0,"creation_date":1440583842,"post_id":32223688,"comment_id":52330193,"body_markdown":"Java and JavaScript are two different language.","body":"Java and JavaScript are two different language."},{"owner":{"account_id":6336860,"reputation":27,"user_id":4920021,"display_name":"krishnanunni r"},"score":0,"creation_date":1440649863,"post_id":32223688,"comment_id":52362936,"body_markdown":"yeah i know..But my ultimate aim is to detect a scanner in client side..So for that it will better to use javascript or jquery na?After scanning from client side ,the scanned document should saved in server.For that it will better to use java.Leave the java part.I just want a code to detect scanner in  my app..Please help me.","body":"yeah i know..But my ultimate aim is to detect a scanner in client side..So for that it will better to use javascript or jquery na?After scanning from client side ,the scanned document should saved in server.For that it will better to use java.Leave the java part.I just want a code to detect scanner in  my app..Please help me."},{"owner":{"account_id":93815,"reputation":1372,"user_id":256480,"display_name":"Rachel"},"score":1,"creation_date":1441951605,"post_id":32223688,"comment_id":52891334,"body_markdown":"Try Dynamic Web TWAIN SDK for accessing scanners in JavaScript Online demo: http://www.dynamsoft.com/Demo/DWT/online_demo_scan.aspx","body":"Try Dynamic Web TWAIN SDK for accessing scanners in JavaScript Online demo: <a href=\"http://www.dynamsoft.com/Demo/DWT/online_demo_scan.aspx\" rel=\"nofollow noreferrer\">dynamsoft.com/Demo/DWT/online_demo_scan.aspx</a>"},{"owner":{"account_id":49071,"reputation":8690,"user_id":145976,"accept_rate":40,"display_name":"Charlie"},"score":0,"creation_date":1629433648,"post_id":32223688,"comment_id":121690668,"body_markdown":"Be warry of these JS libraries that require apps to be installed; they are a security liability.","body":"Be warry of these JS libraries that require apps to be installed; they are a security liability."}],"answers":[{"comments":[{"owner":{"account_id":11418201,"reputation":139,"user_id":8370465,"display_name":"Srk95"},"score":0,"creation_date":1611231813,"post_id":38986705,"comment_id":116387332,"body_markdown":"But the biggest disadvantage of Scanner.js is, it does not work on Linux and Mac systems at all. Windows freak!","body":"But the biggest disadvantage of Scanner.js is, it does not work on Linux and Mac systems at all. Windows freak!"},{"owner":{"account_id":4735510,"reputation":344,"user_id":3830014,"display_name":"Scanner.js Receipt Invoice OCR"},"score":0,"creation_date":1611284745,"post_id":38986705,"comment_id":116407850,"body_markdown":"Support for more OS will be added under one condition: there is enough demand.","body":"Support for more OS will be added under one condition: there is enough demand."},{"owner":{"account_id":11418201,"reputation":139,"user_id":8370465,"display_name":"Srk95"},"score":0,"creation_date":1611291415,"post_id":38986705,"comment_id":116409063,"body_markdown":"I feel that it goes hand in hand. If you feature it, demand will automatically overwhelm.","body":"I feel that it goes hand in hand. If you feature it, demand will automatically overwhelm."},{"owner":{"account_id":9744969,"reputation":124,"user_id":7225267,"display_name":"Sujjad A"},"score":0,"creation_date":1614171112,"post_id":38986705,"comment_id":117303104,"body_markdown":"How about the license of Asprise scanner.js is it open source","body":"How about the license of Asprise scanner.js is it open source"},{"owner":{"account_id":32248,"reputation":1939,"user_id":89256,"accept_rate":49,"display_name":"Samuel"},"score":0,"creation_date":1614736633,"post_id":38986705,"comment_id":117474435,"body_markdown":"from their website it costs between $3,000 to $130,000 depending on the option you choose","body":"from their website it costs between $3,000 to $130,000 depending on the option you choose"},{"owner":{"account_id":471778,"reputation":380,"user_id":879785,"display_name":"flysakura"},"score":2,"creation_date":1642759935,"post_id":38986705,"comment_id":125162868,"body_markdown":"Dynamic Web TWAIN supports Linux and Mac systems. @Srk95","body":"Dynamic Web TWAIN supports Linux and Mac systems. @Srk95"}],"tags":[],"owner":{"account_id":4735510,"reputation":344,"user_id":3830014,"display_name":"Scanner.js Receipt Invoice OCR"},"comment_count":6,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1471396261,"creation_date":1471396261,"answer_id":38986705,"question_id":32223688,"body_markdown":"Chrome 42 is supported by [Scanner.js][1]. You may try out scanner.js&#39;s [html5/JavaScript web browser based scanning demo][2] here.\r\n\r\nScanner.js supports both [NPAPI browsers (like Chrome 44 and lower, IE, Firefox, Opera) and Non-NPAPI browsers (Chrome 45+, Edge)][3].\r\n\r\nWhen running Scanner.js from NPAPI browsers, it attempts to use a Java applet so that no software is required to install. As for non-NPAPI browsers, scan app is required.\r\n\r\n\r\n  [1]: http://asprise.com/document-scan-upload-image-browser/direct-to-server-php-asp.net-overview.html\r\n  [2]: http://asprise.com/document-scan-upload-image-browser/javascript-web-scanner.js-demos.html\r\n  [3]: http://asprise.com/scan/scannerjs/docs/html/intro-scannerjs-sdk-library.html#browsers-supported","title":"how can i access scanner and scan document using java, jquery or javascript","body":"<p>Chrome 42 is supported by <a href=\"http://asprise.com/document-scan-upload-image-browser/direct-to-server-php-asp.net-overview.html\" rel=\"nofollow\">Scanner.js</a>. You may try out scanner.js's <a href=\"http://asprise.com/document-scan-upload-image-browser/javascript-web-scanner.js-demos.html\" rel=\"nofollow\">html5/JavaScript web browser based scanning demo</a> here.</p>\n\n<p>Scanner.js supports both <a href=\"http://asprise.com/scan/scannerjs/docs/html/intro-scannerjs-sdk-library.html#browsers-supported\" rel=\"nofollow\">NPAPI browsers (like Chrome 44 and lower, IE, Firefox, Opera) and Non-NPAPI browsers (Chrome 45+, Edge)</a>.</p>\n\n<p>When running Scanner.js from NPAPI browsers, it attempts to use a Java applet so that no software is required to install. As for non-NPAPI browsers, scan app is required.</p>\n"},{"tags":[],"owner":{"account_id":323781,"reputation":11805,"user_id":644010,"accept_rate":73,"display_name":"yushulx"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1642985015,"creation_date":1642985015,"answer_id":70827871,"question_id":32223688,"body_markdown":"There are two ways to make JavaScript work for scanning documents:\r\n- JavaScript API provided by web browser. For example, in ChromeOS, you can easily use JavaScript API to access scanner.\r\n- Establish a communication mechanism between scanner service and web client JavaScript API. For example, Dynamic Web TWAIN runs a service to access document scanners and transfer document images to JavaScript via websocket.","title":"how can i access scanner and scan document using java, jquery or javascript","body":"<p>There are two ways to make JavaScript work for scanning documents:</p>\n<ul>\n<li>JavaScript API provided by web browser. For example, in ChromeOS, you can easily use JavaScript API to access scanner.</li>\n<li>Establish a communication mechanism between scanner service and web client JavaScript API. For example, Dynamic Web TWAIN runs a service to access document scanners and transfer document images to JavaScript via websocket.</li>\n</ul>\n"}],"owner":{"account_id":6336860,"reputation":27,"user_id":4920021,"display_name":"krishnanunni r"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":9140,"favorite_count":0,"down_vote_count":2,"up_vote_count":2,"answer_count":2,"score":0,"last_activity_date":1698188460,"creation_date":1440583685,"question_id":32223688,"body_markdown":"How can i access scanner and scan document using java, jquery or javascript.Please give me a solution..\r\n\r\nI have tried with aspire scanner.js .But while using with chrome version 42, it shows like no longer support java extention.\r\n\r\nI would like to implement scanning for web applications.\r\n\r\nPlease let me know if there any solution..\r\n\r\nThanks in advance","title":"how can i access scanner and scan document using java, jquery or javascript","body":"<p>How can i access scanner and scan document using java, jquery or javascript.Please give me a solution..</p>\n\n<p>I have tried with aspire scanner.js .But while using with chrome version 42, it shows like no longer support java extention.</p>\n\n<p>I would like to implement scanning for web applications.</p>\n\n<p>Please let me know if there any solution..</p>\n\n<p>Thanks in advance</p>\n"},{"tags":["java","spring-boot"],"owner":{"account_id":5773,"reputation":3320,"user_id":9458,"accept_rate":67,"display_name":"F&#225;bio"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1698188126,"creation_date":1698087747,"question_id":77347719,"body_markdown":"I upgraded a working project from Spring Boot 2.7 to 3.1 and the tests stopped working.\r\n\r\nAll the test classes are set up like:\r\n\r\n    @SpringBootTest\r\n    @AutoConfigureMockMvc\r\n    class MyTest {\r\n    ...\r\n\r\nI also tried adding `@ImportAutoConfiguration(MessageSourceAutoConfiguration.class)` to the test class to no avail.\r\n\r\nThe code fails when the `@RestControllerAdvice` tries to read any i18n message during a call to *MockMvc*:\r\n\r\n    org.springframework.context.NoSuchMessageException: No message found under code &#39;fimPeriodoApuracao.null&#39; for locale &#39;en&#39;.\r\n\tat org.springframework.context.support.DelegatingMessageSource.getMessage(DelegatingMessageSource.java:76) ~[spring-context-6.0.12.jar:6.0.12]\r\n\r\nThe message is autowired on the RestControllerAdvice:\r\n\r\n\t@Autowired\r\n    public ExceptionController(MessageSource messageSource) {\r\n        this.messageSource = messageSource;\r\n    }\r\n\r\nThis project has only the main *application.properties* and *message.properties* inside the *resources* directory in the main directory. There is no test configuration.","title":"NoSuchMessageException on Spring Boot tests","body":"<p>I upgraded a working project from Spring Boot 2.7 to 3.1 and the tests stopped working.</p>\n<p>All the test classes are set up like:</p>\n<pre><code>@SpringBootTest\n@AutoConfigureMockMvc\nclass MyTest {\n...\n</code></pre>\n<p>I also tried adding <code>@ImportAutoConfiguration(MessageSourceAutoConfiguration.class)</code> to the test class to no avail.</p>\n<p>The code fails when the <code>@RestControllerAdvice</code> tries to read any i18n message during a call to <em>MockMvc</em>:</p>\n<pre><code>org.springframework.context.NoSuchMessageException: No message found under code 'fimPeriodoApuracao.null' for locale 'en'.\nat org.springframework.context.support.DelegatingMessageSource.getMessage(DelegatingMessageSource.java:76) ~[spring-context-6.0.12.jar:6.0.12]\n</code></pre>\n<p>The message is autowired on the RestControllerAdvice:</p>\n<pre><code>@Autowired\npublic ExceptionController(MessageSource messageSource) {\n    this.messageSource = messageSource;\n}\n</code></pre>\n<p>This project has only the main <em>application.properties</em> and <em>message.properties</em> inside the <em>resources</em> directory in the main directory. There is no test configuration.</p>\n"},{"tags":["java","generics","type-inference"],"comments":[{"owner":{"account_id":7561989,"reputation":331,"user_id":5739235,"accept_rate":50,"display_name":"Aaronmacaron"},"score":0,"creation_date":1698175117,"post_id":77354373,"comment_id":136371206,"body_markdown":"No this does not work. I tried to add all missing Information and cast everything I could but it does not help","body":"No this does not work. I tried to add all missing Information and cast everything I could but it does not help"}],"answers":[{"comments":[{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":2,"creation_date":1698186495,"post_id":77355427,"comment_id":136372855,"body_markdown":"Excellent answer.","body":"Excellent answer."}],"tags":[],"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1698187330,"creation_date":1698182134,"answer_id":77355427,"question_id":77354373,"body_markdown":"Java lambdas (`(arg1, arg2) -&gt; code;`) are somewhat weirdly type inferred. Inference goes inside out, then outside in, then inside out again.\r\n\r\nThe reason is that java&#39;s functional typing system is based off of so-called functional interfaces. You don&#39;t, in java, just have an expression of type `(int, int) -&gt; String`.\r\n\r\nThat explains why in java you can write `listOfStrings.sort(Comparator.comparing(x -&gt; x.length()));`. Because, think about that line for a moment: How in the blazes is java allowing you to write `x.length()` there? j.l.Object doesn&#39;t have `length()`. Why does `x`? We never mentioned what type `x` is.\r\n\r\nThat&#39;s because java resolves inside-out first: Okay, we have a lambda. It will represent some type but we don&#39;t __yet__ know what. For now we know: It&#39;s a lambda, and, it takes 1 argument.\r\n\r\nSo then `javac` scans Comparator.comparing and finds a few overloads. It can immediately eliminate some. Eventually only one remains: It takes a `Function&lt;T, U&gt;`, and returns a `Comparator&lt;T&gt;`. Okay, so I guess for now we go with `T t -&gt; t.length()`. That isn&#39;t much help. Yet. We keep going: That is passed to `.sort`, which requires a `Comparator&lt;E&gt;`. That just kicks the can down the road; replacing one typevar with another, not useful. Let&#39;s keep going: That `sort` method is called on a on a `List&lt;String&gt;`. aha! Only a `Comparator&lt;String&gt;` is valid there, so I guess E is string! So let&#39;s apply that all the way  back down - we go with `String t -&gt; t.length()`. And that, finally, &#39;fits&#39;. So java compiles this whole thing interpreting `x -&gt; x.length()` as &#39;a `Function&lt;String, Comparable-to-self&gt;`. And then re-scans that lambda to ensure it makes sense in that context. Only now could e.g. a typo in `length()` be found as &#39;hey, that&#39;s not a method strings have&#39;.\r\n\r\nThe problem with your code snippet that doesn&#39;t compile is that the compiler is limited in how far it can take this inside-out-outside-in process. It has to go too far and gives up. (It&#39;s a lot more complicated than this, but, you need to fully grok large swathes of the JLS to go any further).\r\n\r\nAdd some casts to &#39;help&#39; the compiler and it works again:\r\n\r\n```\r\nComparator&lt;Edge&gt; myComparator = Comparator.comparing(e -&gt; e.a.x()).thenComparing(Comparator.&lt;Edge&gt;comparing(e -&gt; e.b.x()));\r\n```\r\n\r\nOr add a `(Comparator&lt;Edge&gt;)` cast. The reason your other snippet does work is the local variable types serve as that &#39;type hint&#39;.\r\n","title":"Why does Comparator.thenComparing() work when storing the comparators in variables but not when inlineing them?","body":"<p>Java lambdas (<code>(arg1, arg2) -&gt; code;</code>) are somewhat weirdly type inferred. Inference goes inside out, then outside in, then inside out again.</p>\n<p>The reason is that java's functional typing system is based off of so-called functional interfaces. You don't, in java, just have an expression of type <code>(int, int) -&gt; String</code>.</p>\n<p>That explains why in java you can write <code>listOfStrings.sort(Comparator.comparing(x -&gt; x.length()));</code>. Because, think about that line for a moment: How in the blazes is java allowing you to write <code>x.length()</code> there? j.l.Object doesn't have <code>length()</code>. Why does <code>x</code>? We never mentioned what type <code>x</code> is.</p>\n<p>That's because java resolves inside-out first: Okay, we have a lambda. It will represent some type but we don't <strong>yet</strong> know what. For now we know: It's a lambda, and, it takes 1 argument.</p>\n<p>So then <code>javac</code> scans Comparator.comparing and finds a few overloads. It can immediately eliminate some. Eventually only one remains: It takes a <code>Function&lt;T, U&gt;</code>, and returns a <code>Comparator&lt;T&gt;</code>. Okay, so I guess for now we go with <code>T t -&gt; t.length()</code>. That isn't much help. Yet. We keep going: That is passed to <code>.sort</code>, which requires a <code>Comparator&lt;E&gt;</code>. That just kicks the can down the road; replacing one typevar with another, not useful. Let's keep going: That <code>sort</code> method is called on a on a <code>List&lt;String&gt;</code>. aha! Only a <code>Comparator&lt;String&gt;</code> is valid there, so I guess E is string! So let's apply that all the way  back down - we go with <code>String t -&gt; t.length()</code>. And that, finally, 'fits'. So java compiles this whole thing interpreting <code>x -&gt; x.length()</code> as 'a <code>Function&lt;String, Comparable-to-self&gt;</code>. And then re-scans that lambda to ensure it makes sense in that context. Only now could e.g. a typo in <code>length()</code> be found as 'hey, that's not a method strings have'.</p>\n<p>The problem with your code snippet that doesn't compile is that the compiler is limited in how far it can take this inside-out-outside-in process. It has to go too far and gives up. (It's a lot more complicated than this, but, you need to fully grok large swathes of the JLS to go any further).</p>\n<p>Add some casts to 'help' the compiler and it works again:</p>\n<pre><code>Comparator&lt;Edge&gt; myComparator = Comparator.comparing(e -&gt; e.a.x()).thenComparing(Comparator.&lt;Edge&gt;comparing(e -&gt; e.b.x()));\n</code></pre>\n<p>Or add a <code>(Comparator&lt;Edge&gt;)</code> cast. The reason your other snippet does work is the local variable types serve as that 'type hint'.</p>\n"}],"owner":{"account_id":7561989,"reputation":331,"user_id":5739235,"accept_rate":50,"display_name":"Aaronmacaron"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":53,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"closed_date":1698187990,"accepted_answer_id":77355427,"answer_count":1,"score":1,"last_activity_date":1698188001,"creation_date":1698170102,"question_id":77354373,"body_markdown":"I have two comparators which I chain using `thenCompare()`:\r\n\r\n    Comparator&lt;Edge&gt; byAX = Comparator.comparing(e -&gt; e.a.x());\r\n    Comparator&lt;Edge&gt; byBX = Comparator.comparing(e -&gt; e.b.x());\r\n    Comparator&lt;Edge&gt; myComparator = byAX.thenComparing(byBX);\r\n\r\nThis works perfectly fine.\r\n\r\nHowever, if I inline this code by replacing byAX and byBX with their corresponding definitions, the code no longer compiles:\r\n\r\n    Comparator&lt;Edge&gt; myComparator = Comparator.comparing(e -&gt; e.a.x()).thenComparing(Comparator.comparing(e -&gt; e.b.x()));\r\n\r\nIn my understanding I could omit the second `Comparator.comaring()` and the code should be equivalent but this does not work either:\r\n\r\n    Comparator&lt;Edge&gt; myComparator = Comparator.comparing(e -&gt; e.a.x()).thenComparing(e -&gt; e.b.x());\r\n\r\nI get these compiler errors:\r\n\r\n    java: cannot find symbol\r\n      symbol:   variable a\r\n      location: variable e of type java.lang.Object\r\n    \r\n    java: cannot find symbol\r\n      symbol:   variable b\r\n      location: variable e of type java.lang.Object\r\n    \r\n    java: incompatible types: no instance(s) of type variable(s) U exist so that java.util.Comparator&lt;java.lang.Object&gt; conforms to java.util.Comparator&lt;CompGeom.Edge&gt;\r\n\r\nFrom the error message I gather that this has something to do with generics and how type inference works but I don&#39;t understand what exactly is going on here. Could somebody please explain?","title":"Why does Comparator.thenComparing() work when storing the comparators in variables but not when inlineing them?","body":"<p>I have two comparators which I chain using <code>thenCompare()</code>:</p>\n<pre><code>Comparator&lt;Edge&gt; byAX = Comparator.comparing(e -&gt; e.a.x());\nComparator&lt;Edge&gt; byBX = Comparator.comparing(e -&gt; e.b.x());\nComparator&lt;Edge&gt; myComparator = byAX.thenComparing(byBX);\n</code></pre>\n<p>This works perfectly fine.</p>\n<p>However, if I inline this code by replacing byAX and byBX with their corresponding definitions, the code no longer compiles:</p>\n<pre><code>Comparator&lt;Edge&gt; myComparator = Comparator.comparing(e -&gt; e.a.x()).thenComparing(Comparator.comparing(e -&gt; e.b.x()));\n</code></pre>\n<p>In my understanding I could omit the second <code>Comparator.comaring()</code> and the code should be equivalent but this does not work either:</p>\n<pre><code>Comparator&lt;Edge&gt; myComparator = Comparator.comparing(e -&gt; e.a.x()).thenComparing(e -&gt; e.b.x());\n</code></pre>\n<p>I get these compiler errors:</p>\n<pre><code>java: cannot find symbol\n  symbol:   variable a\n  location: variable e of type java.lang.Object\n\njava: cannot find symbol\n  symbol:   variable b\n  location: variable e of type java.lang.Object\n\njava: incompatible types: no instance(s) of type variable(s) U exist so that java.util.Comparator&lt;java.lang.Object&gt; conforms to java.util.Comparator&lt;CompGeom.Edge&gt;\n</code></pre>\n<p>From the error message I gather that this has something to do with generics and how type inference works but I don't understand what exactly is going on here. Could somebody please explain?</p>\n"},{"tags":["java","spring","spring-boot","docker","docker-compose"],"answers":[{"comments":[{"owner":{"account_id":8915876,"reputation":3560,"user_id":6654475,"accept_rate":100,"display_name":"Francislainy Campos"},"score":0,"creation_date":1698155299,"post_id":77352631,"comment_id":136367274,"body_markdown":"I initially tried with localhost, but I get the same error. Seeing other tutorials, I then changed it to db.","body":"I initially tried with localhost, but I get the same error. Seeing other tutorials, I then changed it to db."},{"owner":{"account_id":3106498,"reputation":107,"user_id":2629156,"display_name":"Huong"},"score":0,"creation_date":1698156886,"post_id":77352631,"comment_id":136367691,"body_markdown":"It is strange. As far as I know, if you are running your Spring Boot app within Docker Compose, you can use `db` as the host. Docker Compose is able to resolve the service name `db`. Alternatively, you can configure `/etc/hosts` to resolve `db` to localhost.","body":"It is strange. As far as I know, if you are running your Spring Boot app within Docker Compose, you can use <code>db</code> as the host. Docker Compose is able to resolve the service name <code>db</code>. Alternatively, you can configure <code>&#47;etc&#47;hosts</code> to resolve <code>db</code> to localhost."},{"owner":{"account_id":3106498,"reputation":107,"user_id":2629156,"display_name":"Huong"},"score":0,"creation_date":1698157585,"post_id":77352631,"comment_id":136367845,"body_markdown":"I think the issue comes from your IntelliJ since it is quite common to run a container like you have configured. Please check your IntelliJ configuration again. Refer to https://www.jetbrains.com/help/idea/docker-compose.html","body":"I think the issue comes from your IntelliJ since it is quite common to run a container like you have configured. Please check your IntelliJ configuration again. Refer to <a href=\"https://www.jetbrains.com/help/idea/docker-compose.html\" rel=\"nofollow noreferrer\">jetbrains.com/help/idea/docker-compose.html</a>"},{"owner":{"account_id":8915876,"reputation":3560,"user_id":6654475,"accept_rate":100,"display_name":"Francislainy Campos"},"score":0,"creation_date":1698158425,"post_id":77352631,"comment_id":136368014,"body_markdown":"Intellij is able to run the docker compose file. However, I think the issue may perhaps be on how I&#39;m running the application. I&#39;m running the compose file, then pressing the run button from IntelliJ, but perhaps I should be doing something else, not sure.","body":"Intellij is able to run the docker compose file. However, I think the issue may perhaps be on how I&#39;m running the application. I&#39;m running the compose file, then pressing the run button from IntelliJ, but perhaps I should be doing something else, not sure."}],"tags":[],"owner":{"account_id":3106498,"reputation":107,"user_id":2629156,"display_name":"Huong"},"comment_count":4,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698154975,"creation_date":1698154975,"answer_id":77352631,"question_id":77352369,"body_markdown":"The configuration should be `url: jdbc:postgresql://localhost:5432/desafio_stone_docker`. I assume your computer was unable to resolve the domain `db`.","title":"Dockerise Spring Boot to connect to local Postgres database using Docker Compose file. Fatal: Database does not exist","body":"<p>The configuration should be <code>url: jdbc:postgresql://localhost:5432/desafio_stone_docker</code>. I assume your computer was unable to resolve the domain <code>db</code>.</p>\n"}],"owner":{"account_id":8915876,"reputation":3560,"user_id":6654475,"accept_rate":100,"display_name":"Francislainy Campos"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":78,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1698187570,"creation_date":1698153162,"question_id":77352369,"body_markdown":"I am using Spring Boot 3.1.5, Java 17 and Maven. \r\n\r\nIt’s my first time trying to dockerise a Spring boot application which also uses a Postgres database, so I’m trying to how to this with docker compose, even though Docker is not really something I&#39;m very experienced with. I went through some tutorials and this is what I have:\r\n\r\n`docker-compose.yml`\r\n\r\n```\r\nversion: &#39;3.8&#39;\r\nservices:\r\n  db:\r\n    image: postgres:alpine\r\n    ports:\r\n      - &quot;5432:5432&quot;\r\n    restart: always\r\n    environment:\r\n      POSTGRES_USER: postgres\r\n      POSTGRES_PASSWORD: postgres\r\n      POSTGRES_DB: desafio_stone_docker\r\n    container_name: db\r\n```\r\n\r\n`application-dev.yml`\r\n\r\n```\r\nspring:\r\n  datasource:\r\n    url: jdbc:postgresql://db:5432/desafio_stone_docker\r\n    username: postgres\r\n    password: postgres\r\n  sql:\r\n    init:\r\n      mode: always\r\n```\r\n\r\n`application.yml`\r\n\r\n```\r\nspring:\r\n  datasource:\r\n    url: jdbc:postgresql://db:5432/desafio_stone_docker\r\n    username: postgres\r\n    password:\r\n  profiles:\r\n    active: dev\r\n  jpa:\r\n    properties:\r\n      hibernate:\r\n        dialect: org.hibernate.dialect.PostgreSQLDialect\r\n        format_sql: true\r\n    hibernate:\r\n      ddl-auto: update\r\n    show-sql: false\r\n```\r\n\r\nI have docker running and I can see the parameters as configured, which can be seen below:\r\n\r\n[![enter image description here][1]][1]\r\n\r\nPS: I don&#39;t have a Dockerfile as I understand this is not needed for the newer versions of Spring Boot when working with Docker compose.\r\n\r\nOnce I have both my docker-compose and application running through IntelliJ, I get an error saying my database does not exist.\r\n\r\n```\r\nCaused by: org.postgresql.util.PSQLException: FATAL: database &quot;desafio_stone_docker&quot; does not exist.\r\n```\r\n\r\nI  believe this is probably caused by connection issues between the host and my docker machine as IntelliJ may be talking to the host only, but I’m not sure what I’m missing to have this fixed. It’s probably something obvious, but I&#39;ve tried a lot and I really don&#39;t know.\r\n\r\nPS: I&#39;m trying to do this taking as a basis this tutorial:\r\nhttps://www.youtube.com/watch?v=_Gdb-jK3Sr4\r\n\r\nThank you very much.\r\n\r\n**UPDATE**\r\n\r\nI went through this [other tutorial][2] from the same Spring advocate and tried to remove the properties  from my yml files, leaving everything up to docker compose to manage. However, I still get the very same error.\r\n\r\n`pom.xml`\r\n\r\n```\r\n   &lt;dependency&gt;\r\n       &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n         &lt;artifactId&gt;spring-boot-docker-compose&lt;/artifactId&gt;\r\n   &lt;/dependency&gt;\r\n```\r\n\r\n`application.properties`\r\n\r\n```\r\nspring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect\r\nspring.jpa.generate-ddl=true\r\n```\r\n\r\n`compose.yml`\r\n\r\n```\r\nversion: &#39;3.8&#39;\r\n\r\nservices:\r\n  db:\r\n    image: postgres:alpine\r\n    ports:\r\n      - &quot;5432:5432&quot;\r\n    environment:\r\n      POSTGRES_USER: postgres\r\n      POSTGRES_PASSWORD: postgres\r\n      POSTGRES_DB: desafio_stone_docker\r\n```\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/b89r8.png\r\n  [2]: https://www.youtube.com/watch?v=lS1GwdIfk0c&amp;t=15s","title":"Dockerise Spring Boot to connect to local Postgres database using Docker Compose file. Fatal: Database does not exist","body":"<p>I am using Spring Boot 3.1.5, Java 17 and Maven.</p>\n<p>It’s my first time trying to dockerise a Spring boot application which also uses a Postgres database, so I’m trying to how to this with docker compose, even though Docker is not really something I'm very experienced with. I went through some tutorials and this is what I have:</p>\n<p><code>docker-compose.yml</code></p>\n<pre><code>version: '3.8'\nservices:\n  db:\n    image: postgres:alpine\n    ports:\n      - &quot;5432:5432&quot;\n    restart: always\n    environment:\n      POSTGRES_USER: postgres\n      POSTGRES_PASSWORD: postgres\n      POSTGRES_DB: desafio_stone_docker\n    container_name: db\n</code></pre>\n<p><code>application-dev.yml</code></p>\n<pre><code>spring:\n  datasource:\n    url: jdbc:postgresql://db:5432/desafio_stone_docker\n    username: postgres\n    password: postgres\n  sql:\n    init:\n      mode: always\n</code></pre>\n<p><code>application.yml</code></p>\n<pre><code>spring:\n  datasource:\n    url: jdbc:postgresql://db:5432/desafio_stone_docker\n    username: postgres\n    password:\n  profiles:\n    active: dev\n  jpa:\n    properties:\n      hibernate:\n        dialect: org.hibernate.dialect.PostgreSQLDialect\n        format_sql: true\n    hibernate:\n      ddl-auto: update\n    show-sql: false\n</code></pre>\n<p>I have docker running and I can see the parameters as configured, which can be seen below:</p>\n<p><a href=\"https://i.stack.imgur.com/b89r8.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/b89r8.png\" alt=\"enter image description here\" /></a></p>\n<p>PS: I don't have a Dockerfile as I understand this is not needed for the newer versions of Spring Boot when working with Docker compose.</p>\n<p>Once I have both my docker-compose and application running through IntelliJ, I get an error saying my database does not exist.</p>\n<pre><code>Caused by: org.postgresql.util.PSQLException: FATAL: database &quot;desafio_stone_docker&quot; does not exist.\n</code></pre>\n<p>I  believe this is probably caused by connection issues between the host and my docker machine as IntelliJ may be talking to the host only, but I’m not sure what I’m missing to have this fixed. It’s probably something obvious, but I've tried a lot and I really don't know.</p>\n<p>PS: I'm trying to do this taking as a basis this tutorial:\n<a href=\"https://www.youtube.com/watch?v=_Gdb-jK3Sr4\" rel=\"nofollow noreferrer\">https://www.youtube.com/watch?v=_Gdb-jK3Sr4</a></p>\n<p>Thank you very much.</p>\n<p><strong>UPDATE</strong></p>\n<p>I went through this <a href=\"https://www.youtube.com/watch?v=lS1GwdIfk0c&amp;t=15s\" rel=\"nofollow noreferrer\">other tutorial</a> from the same Spring advocate and tried to remove the properties  from my yml files, leaving everything up to docker compose to manage. However, I still get the very same error.</p>\n<p><code>pom.xml</code></p>\n<pre><code>   &lt;dependency&gt;\n       &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n         &lt;artifactId&gt;spring-boot-docker-compose&lt;/artifactId&gt;\n   &lt;/dependency&gt;\n</code></pre>\n<p><code>application.properties</code></p>\n<pre><code>spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect\nspring.jpa.generate-ddl=true\n</code></pre>\n<p><code>compose.yml</code></p>\n<pre><code>version: '3.8'\n\nservices:\n  db:\n    image: postgres:alpine\n    ports:\n      - &quot;5432:5432&quot;\n    environment:\n      POSTGRES_USER: postgres\n      POSTGRES_PASSWORD: postgres\n      POSTGRES_DB: desafio_stone_docker\n</code></pre>\n"},{"tags":["java","date-formatting","java-time"],"comments":[{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":4,"creation_date":1636165474,"post_id":69860992,"comment_id":123491245,"body_markdown":"`LocalDate` has not format associated with, so *&quot;They are all in the format dd-MM-yyyy&quot;* is actually a invalid statement.  You&#39;re getting `..` because the `MMM` format is using `Jan.`, which is probably coming from the localisation","body":"<code>LocalDate</code> has not format associated with, so <i>&quot;They are all in the format dd-MM-yyyy&quot;</i> is actually a invalid statement.  You&#39;re getting <code>..</code> because the <code>MMM</code> format is using <code>Jan.</code>, which is probably coming from the localisation"},{"owner":{"account_id":23253051,"reputation":81,"user_id":17340506,"display_name":"powqmnbvc21"},"score":0,"creation_date":1636165595,"post_id":69860992,"comment_id":123491266,"body_markdown":"Okay and how i could fix that? When I make dd.MMMyyyy some of my variables got a point and are for example 01.Jan.2000 and other are for example 02.Feb2000 they dont got a Point :(","body":"Okay and how i could fix that? When I make dd.MMMyyyy some of my variables got a point and are for example 01.Jan.2000 and other are for example 02.Feb2000 they dont got a Point :("},{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":1,"creation_date":1636165765,"post_id":69860992,"comment_id":123491284,"body_markdown":"`System.out.println(DateTimeFormatter.ofPattern(&quot;dd.MMM.yyyy&quot;).format(LocalDate.now()));` prints `06.Nov.2021` so I suspect that it&#39;s coming from the default localisation","body":"<code>System.out.println(DateTimeFormatter.ofPattern(&quot;dd.MMM.yyyy&quot;&zwnj;&#8203;).format(LocalDate.n&zwnj;&#8203;ow()));</code> prints <code>06.Nov.2021</code> so I suspect that it&#39;s coming from the default localisation"},{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":1,"creation_date":1636165949,"post_id":69860992,"comment_id":123491309,"body_markdown":"`DateTimeFormatter.ofPattern(&quot;dd.MMM.yyyy&quot;, Locale.CANADA).format(LocalDate.now())` will print `06.Nov..2021` is it&#39;s coming from the localisation been used by the JVM.  I found that using `Locale.ENGLISH` will print `06.Nov.2021`, but this might not be desirable depending what you&#39;re trying to achieve, as you&#39;re locking yourself into","body":"<code>DateTimeFormatter.ofPattern(&quot;dd.MMM.yyyy&quot;, Locale.CANADA).format(LocalDate.now())</code> will print <code>06.Nov..2021</code> is it&#39;s coming from the localisation been used by the JVM.  I found that using <code>Locale.ENGLISH</code> will print <code>06.Nov.2021</code>, but this might not be desirable depending what you&#39;re trying to achieve, as you&#39;re locking yourself into"},{"owner":{"account_id":2179728,"reputation":73067,"user_id":10819573,"display_name":"Arvind Kumar Avinash"},"score":1,"creation_date":1636194872,"post_id":69860992,"comment_id":123494782,"body_markdown":"[Never use SimpleDateFormat or DateTimeFormatter without a Locale](https://stackoverflow.com/a/65544056/10819573).","body":"<a href=\"https://stackoverflow.com/a/65544056/10819573\">Never use SimpleDateFormat or DateTimeFormatter without a Locale</a>."}],"answers":[{"tags":[],"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"comment_count":0,"down_vote_count":0,"up_vote_count":8,"is_accepted":true,"score":8,"last_activity_date":1636211599,"creation_date":1636168842,"answer_id":69861206,"question_id":69860992,"body_markdown":"The cause of your problem is that the abbreviations for months are locale specific:\r\n\r\n  - In some locales there is a dot (period) to indicate abbreviations&lt;sup&gt;1&lt;/sup&gt;; `Locale.CANADA` for example.  In others there isn&#39;t; `Locale.ENGLISH` for example.\r\n  - In the locales where a dot indicates abbreviation, you may or may not find that there is dot when the name of months doesn&#39;t need abbreviating.  For example the name of the month May is only three letters, so `May.` indicating that this is an abbreviation would be illogical.\r\n\r\nThere are various ways to deal with this, including:\r\n\r\n1.  Don&#39;t fix it.  The output with doubled dots in some cases and not others is logically correct (by a certain logic)&lt;sup&gt;2&lt;/sup&gt;, even though it looks odd.\r\n\r\n2.  My preferred way would be to use a different output format.  *Don&#39;t use dot as a separator.*\r\n\r\n    Using dot characters as separators is ... unconventional ... and when you combine this with abbreviated month names, you get this awkward edge-case.\r\n\r\n    Sure there are ways to deal with this, but consider that other people might then run into an equivalent problem if they need to parse *your* dates in *their* code-base.\r\n\r\n3.  Hard wire your `DateTimeFormatter` to an existing `Locale` where there are no dots in the abbreviated names.\r\n\r\n    There is a theoretical risk that they may decide to change the abbreviations in a standard `Locale`.  But doubt that they would, because such a change is liable to break customer code which is implicitly locale dependent ... like yours would be.\r\n\r\n4.  Create a custom `Locale` and use that when creating the `DateTimeFormatter`.\r\n\r\n5.  Use `DateTimeFormatterBuilder` for create the formatter.  To deal with the month, use `appendText(TemporalField field, Map&lt;Long,String&gt; textLookup)` with a lookup table that contains *exactly* the abbreviations that you want to use.\r\n\r\n    Depending on how you &quot;append&quot; the other fields, your formatter can be totally or partially locale independent.\r\n\r\n------------\r\n\r\nOf these, 2. and 5. are the most &quot;correct&quot;, in my opinion.  Ole&#39;s [answer][1] illustrates these options with code.\r\n\r\n------------\r\n\r\n&lt;sup&gt;1 - See this article on American English grammar - [When you need periods after abbreviations](https://www.quickanddirtytips.com/education/grammar/when-you-need-periods-after-abbreviations).&lt;br&gt;\r\n2 - The problem would be convincing people that &quot;looks odd but is logical&quot; is better than &quot;looks nice but is illogical&quot;.  I don&#39;t think you would win this argument ...&lt;/sup&gt;\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/69861714/139985","title":"When I format a LocalDate to dd.MMM.YYYY I get 01.Jan..2000 with two dots","body":"<p>The cause of your problem is that the abbreviations for months are locale specific:</p>\n<ul>\n<li>In some locales there is a dot (period) to indicate abbreviations<sup>1</sup>; <code>Locale.CANADA</code> for example.  In others there isn't; <code>Locale.ENGLISH</code> for example.</li>\n<li>In the locales where a dot indicates abbreviation, you may or may not find that there is dot when the name of months doesn't need abbreviating.  For example the name of the month May is only three letters, so <code>May.</code> indicating that this is an abbreviation would be illogical.</li>\n</ul>\n<p>There are various ways to deal with this, including:</p>\n<ol>\n<li><p>Don't fix it.  The output with doubled dots in some cases and not others is logically correct (by a certain logic)<sup>2</sup>, even though it looks odd.</p>\n</li>\n<li><p>My preferred way would be to use a different output format.  <em>Don't use dot as a separator.</em></p>\n<p>Using dot characters as separators is ... unconventional ... and when you combine this with abbreviated month names, you get this awkward edge-case.</p>\n<p>Sure there are ways to deal with this, but consider that other people might then run into an equivalent problem if they need to parse <em>your</em> dates in <em>their</em> code-base.</p>\n</li>\n<li><p>Hard wire your <code>DateTimeFormatter</code> to an existing <code>Locale</code> where there are no dots in the abbreviated names.</p>\n<p>There is a theoretical risk that they may decide to change the abbreviations in a standard <code>Locale</code>.  But doubt that they would, because such a change is liable to break customer code which is implicitly locale dependent ... like yours would be.</p>\n</li>\n<li><p>Create a custom <code>Locale</code> and use that when creating the <code>DateTimeFormatter</code>.</p>\n</li>\n<li><p>Use <code>DateTimeFormatterBuilder</code> for create the formatter.  To deal with the month, use <code>appendText(TemporalField field, Map&lt;Long,String&gt; textLookup)</code> with a lookup table that contains <em>exactly</em> the abbreviations that you want to use.</p>\n<p>Depending on how you &quot;append&quot; the other fields, your formatter can be totally or partially locale independent.</p>\n</li>\n</ol>\n<hr />\n<p>Of these, 2. and 5. are the most &quot;correct&quot;, in my opinion.  Ole's <a href=\"https://stackoverflow.com/a/69861714/139985\">answer</a> illustrates these options with code.</p>\n<hr />\n<p><sup>1 - See this article on American English grammar - <a href=\"https://www.quickanddirtytips.com/education/grammar/when-you-need-periods-after-abbreviations\" rel=\"nofollow noreferrer\">When you need periods after abbreviations</a>.<br>\n2 - The problem would be convincing people that &quot;looks odd but is logical&quot; is better than &quot;looks nice but is illogical&quot;.  I don't think you would win this argument ...</sup></p>\n"},{"tags":[],"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1698173587,"creation_date":1636177188,"answer_id":69861714,"question_id":69860992,"body_markdown":"[Stephen C. has written an answer][1] that covers your options really well. As a supplement, since I agree that options 2 and 5 are the most correct, I would like to spell those two out.\r\n\r\n## Option 2: Use a different format\r\n\r\nLocalized date formats for most available locales are built into Java. These are generally under-used. We can save ourselves a lot if trouble by relying on Java to know how to format dates for our audience and their locale. I am using German as an example because it’s one of those locales that consistently includes dots both between the parts of the date and for abbreviation. The following should work for your locale too even if it’s not German (if you substitute `Locale.getDefault(Locale.Category.FORMAT)` or your users’ locale).\r\n\r\n\tprivate static final Locale LOCALE = Locale.GERMAN;\r\n\t\r\n\tprivate static final DateTimeFormatter DATE_FORMATTER\r\n\t\t\t= DateTimeFormatter.ofLocalizedDate(FormatStyle.MEDIUM)\r\n\t\t\t\t\t.withLocale(LOCALE);\r\n\r\nFor demonstration I am formatting a day of each month of the current year:\r\n\r\n\t\tLocalDate date = LocalDate.of(2021, Month.JANUARY, 16);\r\n\t\tfor (int i = 0; i &lt; 12; i++) {\r\n\t\t\tSystem.out.println(date.format(DATE_FORMATTER));\r\n\t\t\tdate = date.plusMonths(1).minusDays(1);\r\n\t\t}\r\n\r\nOutput is:\r\n\r\n    16.01.2021\r\n    15.02.2021\r\n    14.03.2021\r\n    13.04.2021\r\n    12.05.2021\r\n    11.06.2021\r\n    10.07.2021\r\n    09.08.2021\r\n    08.09.2021\r\n    07.10.2021\r\n    06.11.2021\r\n    05.12.2021\r\n\r\nFor German locale we got numeric months here. Other locales may give other results, for example month abbreviations.\r\n\r\nIf you want a longer format that doesn’t use numeric months, specify for example `FormatStyle.LONG` instead of `FormatStyle.MEDIUM`:\r\n\r\n\tprivate static final DateTimeFormatter DATE_FORMATTER\r\n\t\t\t= DateTimeFormatter.ofLocalizedDate(FormatStyle.LONG)\r\n\t\t\t\t\t.withLocale(LOCALE);\r\n\r\n    16. Januar 2021\r\n    15. Februar 2021\r\n    14. M&#228;rz 2021\r\n    13. April 2021\r\n    12. Mai 2021\r\n    11. Juni 2021\r\n    10. Juli 2021\r\n    9. August 2021\r\n    8. September 2021\r\n    7. Oktober 2021\r\n    6. November 2021\r\n    5. Dezember 2021\r\n\r\nI suggest that your users would be happy with one of the above.\r\n\r\n## Option 5: DateTimeFormatterBuilder.appendText(TemporalField, Map&lt;Long, String&gt;)\r\n\r\nIf your users tell you that they don’t want the localized formats above and they do want your format with month abbreviations and single dots — it’s getting longer, but the result is beautiful and everyone will be happy.\r\n\r\n\tprivate static final DateTimeFormatter DATE_FORMATTER = new DateTimeFormatterBuilder()\r\n\t\t\t.appendPattern(&quot;dd.&quot;)\r\n\t\t\t.appendText(ChronoField.MONTH_OF_YEAR, getMonthAbbreviations())\r\n\t\t\t.appendPattern(&quot;.uuuu&quot;)\r\n\t\t\t.toFormatter(LOCALE);\r\n\t\r\n\tprivate static Map&lt;Long, String&gt; getMonthAbbreviations() {\r\n\t\treturn Arrays.stream(Month.values())\r\n\t\t\t\t.collect(Collectors.toMap(m -&gt; Long.valueOf(m.getValue()),\r\n\t\t\t\t\t\tMyClass::getDisplayNameWithoutDot));\r\n\t}\r\n\t\r\n\tprivate static String getDisplayNameWithoutDot(Month m) {\r\n\t\treturn m.getDisplayName(TextStyle.SHORT, LOCALE)\r\n\t\t\t\t.replaceFirst(&quot;\\\\.$&quot;, &quot;&quot;);\r\n\t}\r\n\r\nOutput from the same loop as above:\r\n\r\n    16.Jan.2021\r\n    15.Feb.2021\r\n    14.M&#228;rz.2021\r\n    13.Apr.2021\r\n    12.Mai.2021\r\n    11.Juni.2021\r\n    10.Juli.2021\r\n    09.Aug.2021\r\n    08.Sep.2021\r\n    07.Okt.2021\r\n    06.Nov.2021\r\n    05.Dez.2021\r\n\r\nOne dot each time. The central trick is to use Java’s month abbreviation and remove the dot from it if there is one (`Jan.` becomes `Jan`) and use it as-is if there is no dot (`Mai` stays `Mai`). My `getDisplayNameWithoutDot` method does this. I am in turn using this method to build the map that the two-arg `appendText(TemporalField, Map&lt;Long, String&gt;)` method requires and uses for formatting.\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/69861206/642706","title":"When I format a LocalDate to dd.MMM.YYYY I get 01.Jan..2000 with two dots","body":"<p><a href=\"https://stackoverflow.com/a/69861206/642706\">Stephen C. has written an answer</a> that covers your options really well. As a supplement, since I agree that options 2 and 5 are the most correct, I would like to spell those two out.</p>\n<h2>Option 2: Use a different format</h2>\n<p>Localized date formats for most available locales are built into Java. These are generally under-used. We can save ourselves a lot if trouble by relying on Java to know how to format dates for our audience and their locale. I am using German as an example because it’s one of those locales that consistently includes dots both between the parts of the date and for abbreviation. The following should work for your locale too even if it’s not German (if you substitute <code>Locale.getDefault(Locale.Category.FORMAT)</code> or your users’ locale).</p>\n<pre><code>private static final Locale LOCALE = Locale.GERMAN;\n\nprivate static final DateTimeFormatter DATE_FORMATTER\n        = DateTimeFormatter.ofLocalizedDate(FormatStyle.MEDIUM)\n                .withLocale(LOCALE);\n</code></pre>\n<p>For demonstration I am formatting a day of each month of the current year:</p>\n<pre><code>    LocalDate date = LocalDate.of(2021, Month.JANUARY, 16);\n    for (int i = 0; i &lt; 12; i++) {\n        System.out.println(date.format(DATE_FORMATTER));\n        date = date.plusMonths(1).minusDays(1);\n    }\n</code></pre>\n<p>Output is:</p>\n<pre><code>16.01.2021\n15.02.2021\n14.03.2021\n13.04.2021\n12.05.2021\n11.06.2021\n10.07.2021\n09.08.2021\n08.09.2021\n07.10.2021\n06.11.2021\n05.12.2021\n</code></pre>\n<p>For German locale we got numeric months here. Other locales may give other results, for example month abbreviations.</p>\n<p>If you want a longer format that doesn’t use numeric months, specify for example <code>FormatStyle.LONG</code> instead of <code>FormatStyle.MEDIUM</code>:</p>\n<pre><code>private static final DateTimeFormatter DATE_FORMATTER\n        = DateTimeFormatter.ofLocalizedDate(FormatStyle.LONG)\n                .withLocale(LOCALE);\n\n16. Januar 2021\n15. Februar 2021\n14. März 2021\n13. April 2021\n12. Mai 2021\n11. Juni 2021\n10. Juli 2021\n9. August 2021\n8. September 2021\n7. Oktober 2021\n6. November 2021\n5. Dezember 2021\n</code></pre>\n<p>I suggest that your users would be happy with one of the above.</p>\n<h2>Option 5: DateTimeFormatterBuilder.appendText(TemporalField, Map&lt;Long, String&gt;)</h2>\n<p>If your users tell you that they don’t want the localized formats above and they do want your format with month abbreviations and single dots — it’s getting longer, but the result is beautiful and everyone will be happy.</p>\n<pre><code>private static final DateTimeFormatter DATE_FORMATTER = new DateTimeFormatterBuilder()\n        .appendPattern(&quot;dd.&quot;)\n        .appendText(ChronoField.MONTH_OF_YEAR, getMonthAbbreviations())\n        .appendPattern(&quot;.uuuu&quot;)\n        .toFormatter(LOCALE);\n\nprivate static Map&lt;Long, String&gt; getMonthAbbreviations() {\n    return Arrays.stream(Month.values())\n            .collect(Collectors.toMap(m -&gt; Long.valueOf(m.getValue()),\n                    MyClass::getDisplayNameWithoutDot));\n}\n\nprivate static String getDisplayNameWithoutDot(Month m) {\n    return m.getDisplayName(TextStyle.SHORT, LOCALE)\n            .replaceFirst(&quot;\\\\.$&quot;, &quot;&quot;);\n}\n</code></pre>\n<p>Output from the same loop as above:</p>\n<pre><code>16.Jan.2021\n15.Feb.2021\n14.März.2021\n13.Apr.2021\n12.Mai.2021\n11.Juni.2021\n10.Juli.2021\n09.Aug.2021\n08.Sep.2021\n07.Okt.2021\n06.Nov.2021\n05.Dez.2021\n</code></pre>\n<p>One dot each time. The central trick is to use Java’s month abbreviation and remove the dot from it if there is one (<code>Jan.</code> becomes <code>Jan</code>) and use it as-is if there is no dot (<code>Mai</code> stays <code>Mai</code>). My <code>getDisplayNameWithoutDot</code> method does this. I am in turn using this method to build the map that the two-arg <code>appendText(TemporalField, Map&lt;Long, String&gt;)</code> method requires and uses for formatting.</p>\n"},{"comments":[{"owner":{"account_id":204515,"reputation":11679,"user_id":452775,"accept_rate":63,"display_name":"Lii"},"score":1,"creation_date":1698174457,"post_id":77354661,"comment_id":136371082,"body_markdown":"I checked the code of `DateTimeFormatter`. It&#39;s pretty confusing but I found this: Apparently `L` triggers a &quot;stand-alone&quot; format, corresponding to [`TextStyle.SHORT_STANDALONE`](https://docs.oracle.com/javase/8/docs/api/java/time/format/TextStyle.html#SHORT_STANDALONE). The documentation says this: &quot;The difference between the &#39;standard&#39; and &#39;stand-alone&#39; forms is trickier to describe as there is no difference in English. However, in other languages there is a difference in the word used when the text is used alone.&quot; Maybe the final clue about the dots lies in the `FormatData_de_*` classes...","body":"I checked the code of <code>DateTimeFormatter</code>. It&#39;s pretty confusing but I found this: Apparently <code>L</code> triggers a &quot;stand-alone&quot; format, corresponding to <a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/format/TextStyle.html#SHORT_STANDALONE\" rel=\"nofollow noreferrer\"><code>TextStyle.SHORT_STANDALONE</code></a>. The documentation says this: &quot;The difference between the &#39;standard&#39; and &#39;stand-alone&#39; forms is trickier to describe as there is no difference in English. However, in other languages there is a difference in the word used when the text is used alone.&quot; Maybe the final clue about the dots lies in the <code>FormatData_de_*</code> classes..."}],"tags":[],"owner":{"account_id":39208,"reputation":251260,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1698186206,"creation_date":1698173094,"answer_id":77354661,"question_id":69860992,"body_markdown":"Don&#39;t use `MMM` but [`LLL` pattern letters](https://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html#patterns) to get the [`SHORT_STANDALONE` text style](https://docs.oracle.com/javase/8/docs/api/java/time/format/TextStyle.html#SHORT_STANDALONE):\r\n\r\n&gt; M/L     month-of-year               number/text       7; 07; Jul; July; J\r\n\r\n```\r\n@Test\r\nvoid formatLLL() {\r\n    final DateTimeFormatter format = DateTimeFormatter.ofPattern(&quot;dd.LLL.yyyy&quot;)\r\n            .withLocale(Locale.GERMAN);\r\n\r\n    assertEquals(\r\n            &quot;03.Dez.2017&quot;,\r\n            format.format(LocalDate.parse(&quot;2017-12-03&quot;)));\r\n}\r\n\r\n@Test\r\nvoid formatMMM() {\r\n    final DateTimeFormatter format = DateTimeFormatter.ofPattern(&quot;dd.MMM.yyyy&quot;)\r\n            .withLocale(Locale.GERMAN);\r\n\r\n    assertEquals(\r\n            &quot;03.Dez..2017&quot;,\r\n            format.format(LocalDate.parse(&quot;2017-12-03&quot;)));\r\n}\r\n```\r\n\r\n[`DateTimeFormatter` Patterns for Formatting and Parsing](https://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html#patterns):\r\n\r\n&gt; **Text**: The text style is determined based on the number of pattern letters used. Less than 4 pattern letters will use the short form. Exactly 4 pattern letters will use the full form. Exactly 5 pattern letters will use the narrow form. _Pattern letters &#39;L&#39;, &#39;c&#39;, and &#39;q&#39; specify the stand-alone form of the text styles_.\r\n&gt;\r\n&gt; **Number/Text**: If the count of pattern letters is 3 or greater, use the Text rules above. Otherwise use the Number rules above. ","title":"When I format a LocalDate to dd.MMM.YYYY I get 01.Jan..2000 with two dots","body":"<p>Don't use <code>MMM</code> but <a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html#patterns\" rel=\"nofollow noreferrer\"><code>LLL</code> pattern letters</a> to get the <a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/format/TextStyle.html#SHORT_STANDALONE\" rel=\"nofollow noreferrer\"><code>SHORT_STANDALONE</code> text style</a>:</p>\n<blockquote>\n<p>M/L     month-of-year               number/text       7; 07; Jul; July; J</p>\n</blockquote>\n<pre><code>@Test\nvoid formatLLL() {\n    final DateTimeFormatter format = DateTimeFormatter.ofPattern(&quot;dd.LLL.yyyy&quot;)\n            .withLocale(Locale.GERMAN);\n\n    assertEquals(\n            &quot;03.Dez.2017&quot;,\n            format.format(LocalDate.parse(&quot;2017-12-03&quot;)));\n}\n\n@Test\nvoid formatMMM() {\n    final DateTimeFormatter format = DateTimeFormatter.ofPattern(&quot;dd.MMM.yyyy&quot;)\n            .withLocale(Locale.GERMAN);\n\n    assertEquals(\n            &quot;03.Dez..2017&quot;,\n            format.format(LocalDate.parse(&quot;2017-12-03&quot;)));\n}\n</code></pre>\n<p><a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html#patterns\" rel=\"nofollow noreferrer\"><code>DateTimeFormatter</code> Patterns for Formatting and Parsing</a>:</p>\n<blockquote>\n<p><strong>Text</strong>: The text style is determined based on the number of pattern letters used. Less than 4 pattern letters will use the short form. Exactly 4 pattern letters will use the full form. Exactly 5 pattern letters will use the narrow form. <em>Pattern letters 'L', 'c', and 'q' specify the stand-alone form of the text styles</em>.</p>\n<p><strong>Number/Text</strong>: If the count of pattern letters is 3 or greater, use the Text rules above. Otherwise use the Number rules above.</p>\n</blockquote>\n"}],"owner":{"account_id":23253051,"reputation":81,"user_id":17340506,"display_name":"powqmnbvc21"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3610,"favorite_count":0,"down_vote_count":1,"up_vote_count":7,"accepted_answer_id":69861206,"answer_count":3,"score":6,"last_activity_date":1698186206,"creation_date":1636165331,"question_id":69860992,"body_markdown":"I am trying to format `LocalDate` variables to `dd.MMM.YYYY` with:\r\n\r\n```\r\nDateTimeFormatter.ofPattern(&quot;dd.MMM.yyyy&quot;)\r\n```\r\n\r\nThe problem is that more half the time I get two dots. For example `01-01-2000` goes to `01.Jan..2000`.\r\n\r\nI know why I have this problem, because of the three `M`s. When I use `dd.MM.yyyy` I get to `01.01.2000` without issue. The third `M` is the problem.\r\n\r\nHow can I fix this?","title":"When I format a LocalDate to dd.MMM.YYYY I get 01.Jan..2000 with two dots","body":"<p>I am trying to format <code>LocalDate</code> variables to <code>dd.MMM.YYYY</code> with:</p>\n<pre><code>DateTimeFormatter.ofPattern(&quot;dd.MMM.yyyy&quot;)\n</code></pre>\n<p>The problem is that more half the time I get two dots. For example <code>01-01-2000</code> goes to <code>01.Jan..2000</code>.</p>\n<p>I know why I have this problem, because of the three <code>M</code>s. When I use <code>dd.MM.yyyy</code> I get to <code>01.01.2000</code> without issue. The third <code>M</code> is the problem.</p>\n<p>How can I fix this?</p>\n"},{"tags":["java","date","simpledateformat","date-formatting"],"comments":[{"owner":{"account_id":182101,"reputation":48239,"user_id":416564,"accept_rate":100,"display_name":"Johan Sj&#246;berg"},"score":1,"creation_date":1298664008,"post_id":5121976,"comment_id":5744551,"body_markdown":"How about just using `dd` as format?","body":"How about just using <code>dd</code> as format?"},{"owner":{"account_id":111602,"reputation":8153,"user_id":294738,"accept_rate":67,"display_name":"M. Jessup"},"score":3,"creation_date":1298664167,"post_id":5121976,"comment_id":5744592,"body_markdown":"I&#39;m sure the API docs (http://download.oracle.com/javase/1.4.2/docs/api/java/text/SimpleDateFormat.html), would be happy to provide you an answer.","body":"I&#39;m sure the API docs (<a href=\"http://download.oracle.com/javase/1.4.2/docs/api/java/text/SimpleDateFormat.html\" rel=\"nofollow noreferrer\">download.oracle.com/javase/1.4.2/docs/api/java/text/&hellip;</a>), would be happy to provide you an answer."},{"owner":{"account_id":70258,"reputation":590444,"user_id":203907,"accept_rate":81,"display_name":"Bozho"},"score":1,"creation_date":1298664192,"post_id":5121976,"comment_id":5744602,"body_markdown":"what do you mean &quot;day&quot; - day of week, day of month. In your example the whole date is displayed. Please show the exact input and output you want.","body":"what do you mean &quot;day&quot; - day of week, day of month. In your example the whole date is displayed. Please show the exact input and output you want."},{"owner":{"account_id":295869,"reputation":73614,"user_id":600500,"accept_rate":54,"display_name":"Paŭlo Ebermann"},"score":2,"creation_date":1298665042,"post_id":5121976,"comment_id":5744778,"body_markdown":"At a general advise, better use the `-` notation only with dates in the ISO format (i.e. year-month-day). The dash was elected there since it was not used for any other date formats at the time, to avoid confusion, and now everyone is using his custom ordering with the dash ...","body":"At a general advise, better use the <code>-</code> notation only with dates in the ISO format (i.e. year-month-day). The dash was elected there since it was not used for any other date formats at the time, to avoid confusion, and now everyone is using his custom ordering with the dash ..."}],"answers":[{"comments":[{"owner":{"account_id":4711996,"reputation":938,"user_id":3812244,"accept_rate":91,"display_name":"AuroMetal"},"score":6,"creation_date":1459521803,"post_id":5122016,"comment_id":60338033,"body_markdown":"Beautiful solution! What I was looking for was: Monday, 04/04/2016. So in my case, `new SimpleDateFormat(&quot;EEEE, dd/MM/yyyy&quot;);` if it helps someone in the future.","body":"Beautiful solution! What I was looking for was: Monday, 04/04/2016. So in my case, <code>new SimpleDateFormat(&quot;EEEE, dd&#47;MM&#47;yyyy&quot;);</code> if it helps someone in the future."},{"owner":{"account_id":362929,"reputation":11172,"user_id":706387,"accept_rate":53,"display_name":"kosiara - Bartosz Kosarzycki"},"score":2,"creation_date":1528103113,"post_id":5122016,"comment_id":88363399,"body_markdown":"OK, it works. `EEEE` displays whole names of day of week - i.e. &#39;Monday&#39;, &#39;Tuesday&#39; etc.","body":"OK, it works. <code>EEEE</code> displays whole names of day of week - i.e. &#39;Monday&#39;, &#39;Tuesday&#39; etc."},{"owner":{"account_id":5350,"reputation":19178,"user_id":8563,"accept_rate":50,"display_name":"Nathan Feger"},"score":0,"creation_date":1561066121,"post_id":5122016,"comment_id":99953410,"body_markdown":"I hadn&#39;t really considered that this site would even be around, let alone java would finally get around to bailing on Date. It does technically answer the OPs question. However, I can probably add a new section on how the new java.time stuff works","body":"I hadn&#39;t really considered that this site would even be around, let alone java would finally get around to bailing on Date. It does technically answer the OPs question. However, I can probably add a new section on how the new java.time stuff works"},{"owner":{"account_id":236549,"reputation":2564,"user_id":504112,"accept_rate":55,"display_name":"gumuruh"},"score":0,"creation_date":1661321573,"post_id":5122016,"comment_id":129740663,"body_markdown":"nice nice... EEEE is the complete written day&#39;s name.","body":"nice nice... EEEE is the complete written day&#39;s name."}],"tags":[],"owner":{"account_id":5350,"reputation":19178,"user_id":8563,"accept_rate":50,"display_name":"Nathan Feger"},"comment_count":4,"down_vote_count":0,"up_vote_count":425,"is_accepted":true,"score":425,"last_activity_date":1457380569,"creation_date":1298664059,"answer_id":5122016,"question_id":5121976,"body_markdown":"This should display &#39;Tue&#39;:\r\n\r\n    new SimpleDateFormat(&quot;EEE&quot;).format(new Date());\r\n\r\nThis should display &#39;Tuesday&#39;:\r\n\r\n    new SimpleDateFormat(&quot;EEEE&quot;).format(new Date());\r\n\r\nThis should display &#39;T&#39;:\r\n\r\n    new SimpleDateFormat(&quot;EEEEE&quot;).format(new Date());\r\n\r\nSo your specific example would be:\r\n\r\n    new SimpleDateFormat(&quot;yyyy-MM-EEE&quot;).format(new Date());","title":"Is there a date format to display the day of the week in java?","body":"<p>This should display 'Tue':</p>\n\n<pre><code>new SimpleDateFormat(\"EEE\").format(new Date());\n</code></pre>\n\n<p>This should display 'Tuesday':</p>\n\n<pre><code>new SimpleDateFormat(\"EEEE\").format(new Date());\n</code></pre>\n\n<p>This should display 'T':</p>\n\n<pre><code>new SimpleDateFormat(\"EEEEE\").format(new Date());\n</code></pre>\n\n<p>So your specific example would be:</p>\n\n<pre><code>new SimpleDateFormat(\"yyyy-MM-EEE\").format(new Date());\n</code></pre>\n"},{"comments":[{"owner":{"account_id":5350,"reputation":19178,"user_id":8563,"accept_rate":50,"display_name":"Nathan Feger"},"score":5,"creation_date":1298664301,"post_id":5122037,"comment_id":5744629,"body_markdown":"seeing oracle in the url of the javadocs still feels strange.","body":"seeing oracle in the url of the javadocs still feels strange."},{"owner":{"account_id":4597208,"reputation":48209,"user_id":3728901,"accept_rate":58,"display_name":"Vy Do"},"score":0,"creation_date":1434191834,"post_id":5122037,"comment_id":49682039,"body_markdown":"We also use: `DateFormat df = new SimpleDateFormat(&quot;yyyy-MM-EEEEEEE&quot;);` for display long DayOfWeek.","body":"We also use: <code>DateFormat df = new SimpleDateFormat(&quot;yyyy-MM-EEEEEEE&quot;);</code> for display long DayOfWeek."}],"tags":[],"owner":{"account_id":2379,"reputation":49909,"user_id":3295,"accept_rate":62,"display_name":"toolkit"},"comment_count":2,"down_vote_count":1,"up_vote_count":21,"is_accepted":false,"score":20,"last_activity_date":1298664137,"creation_date":1298664137,"answer_id":5122037,"question_id":5121976,"body_markdown":"Yep - &#39;E&#39; does the trick\r\n\r\nhttp://download.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html\r\n\r\n    Date date = new Date();\r\n    DateFormat df = new SimpleDateFormat(&quot;yyyy-MM-E&quot;);\r\n    System.out.println(df.format(date));","title":"Is there a date format to display the day of the week in java?","body":"<p>Yep - 'E' does the trick</p>\n\n<p><a href=\"http://download.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html\" rel=\"noreferrer\">http://download.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html</a></p>\n\n<pre><code>Date date = new Date();\nDateFormat df = new SimpleDateFormat(\"yyyy-MM-E\");\nSystem.out.println(df.format(date));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":314918,"reputation":393,"user_id":630384,"display_name":"DHall"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1298664251,"creation_date":1298664251,"answer_id":5122054,"question_id":5121976,"body_markdown":"Use &quot;E&quot;\r\n\r\nSee the section on **Date and Time Patterns**:\r\n\r\n[JavaDocs for SimpleDateFormat][1]\r\n\r\n\r\n  [1]: http://download.oracle.com/javase/1.4.2/docs/api/java/text/SimpleDateFormat.html","title":"Is there a date format to display the day of the week in java?","body":"<p>Use \"E\"</p>\n\n<p>See the section on <strong>Date and Time Patterns</strong>:</p>\n\n<p><a href=\"http://download.oracle.com/javase/1.4.2/docs/api/java/text/SimpleDateFormat.html\" rel=\"nofollow\">JavaDocs for SimpleDateFormat</a></p>\n"},{"tags":[],"owner":{"account_id":3362691,"reputation":87,"user_id":2824143,"display_name":"user2824143"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1560240984,"creation_date":1380298057,"answer_id":19055383,"question_id":5121976,"body_markdown":"    SimpleDateFormat sdf=new SimpleDateFormat(&quot;EEE&quot;);\r\n\r\nEEE stands for day of week for example Thursday is displayed as Thu.\r\n","title":"Is there a date format to display the day of the week in java?","body":"<pre><code>SimpleDateFormat sdf=new SimpleDateFormat(\"EEE\");\n</code></pre>\n\n<p>EEE stands for day of week for example Thursday is displayed as Thu.</p>\n"},{"tags":[],"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1698185820,"creation_date":1517686535,"answer_id":48601230,"question_id":5121976,"body_markdown":"# tl;dr \r\n\r\n    LocalDate.of( 2018 , Month.JANUARY , 23 )\r\n             .format( DateTimeFormatter.ofPattern( &quot;uuuu-MM-EEE&quot; , Locale.US )  )\r\n\r\n\r\n\r\n# java.time\r\n\r\nThe modern approach uses the java.time classes.\r\n\r\n    LocalDate ld = LocalDate.of( 2018 , Month.JANUARY , 23 ) ;\r\n\r\nNote how we specify a `Locale` such as `Locale.CANADA_FRENCH` to determine the human language used to translate the name of the day. \r\n\r\n    DateTimeFormatter f = DateTimeFormatter.ofPattern( &quot;uuuu-MM-EEE&quot; , Locale.US ) ;\r\n    String output = ld.format( f ) ;\r\n\r\n# ISO 8601\r\n\r\nBy the way, you may be interested in the standard [ISO 8601 week][1] numbering scheme: `yyyy-Www-d`. \r\n\r\n&gt;2018-W01-2\r\n\r\nWeek # 1 has the first Thursday of the calendar-year. Week starts on a Monday. A year has either 52 or 53 weeks. The last/first few days of a calendar-year may land in the next/previous week-based-year. \r\n\r\nThe single digit on the end is day-of-week, 1-7 for Monday-Sunday.\r\n\r\nAdd the *ThreeTen-Extra* library class to your project for the `YearWeek` class. \r\n\r\n\r\n\r\n\r\n----------\r\n\r\n# About *java.time*\r\n\r\nThe [*java.time*](http://docs.oracle.com/javase/9/docs/api/java/time/package-summary.html) framework is built into Java 8 and later. These classes supplant the troublesome old [legacy](https://en.wikipedia.org/wiki/Legacy_system) date-time classes such as [`java.util.Date`](https://docs.oracle.com/javase/9/docs/api/java/util/Date.html), [`Calendar`](https://docs.oracle.com/javase/9/docs/api/java/util/Calendar.html), &amp; [`SimpleDateFormat`](http://docs.oracle.com/javase/9/docs/api/java/text/SimpleDateFormat.html).\r\n\r\nThe [*Joda-Time*](http://www.joda.org/joda-time/) project, now in [maintenance mode](https://en.wikipedia.org/wiki/Maintenance_mode), advises migration to the [java.time](http://docs.oracle.com/javase/9/docs/api/java/time/package-summary.html) classes.\r\n\r\nTo learn more, see the [*Oracle Tutorial*](http://docs.oracle.com/javase/tutorial/datetime/TOC.html). And search Stack Overflow for many examples and explanations. Specification is [JSR 310](https://jcp.org/en/jsr/detail?id=310).\r\n\r\nWhere to obtain the java.time classes? \r\n\r\n - [**Java SE 8**](https://en.wikipedia.org/wiki/Java_version_history#Java_SE_8), [**Java SE 9**](https://en.wikipedia.org/wiki/Java_version_history#Java_SE_9), and later\r\n  - Built-in. \r\n  - Part of the standard Java API with a bundled implementation.\r\n  - Java 9 adds some minor features and fixes.\r\n - [**Java SE 6**](https://en.wikipedia.org/wiki/Java_version_history#Java_SE_6) and [**Java SE 7**](https://en.wikipedia.org/wiki/Java_version_history#Java_SE_7)\r\n  - Much of the java.time functionality is back-ported to Java 6 &amp; 7 in [***ThreeTen-Backport***](http://www.threeten.org/threetenbp/).\r\n - [**Android**](https://en.wikipedia.org/wiki/Android_(operating_system))\r\n  - Later versions of Android bundle implementations of the java.time classes.\r\n  - For earlier Android, the [***ThreeTenABP***](https://github.com/JakeWharton/ThreeTenABP) project adapts *ThreeTen-Backport* (mentioned above). See [*How to use ThreeTenABP…*](http://stackoverflow.com/q/38922754/642706).\r\n\r\nThe [**ThreeTen-Extra**](http://www.threeten.org/threeten-extra/) project extends java.time with additional classes. This project is a proving ground for possible future additions to java.time. You may find some useful classes here such as [`Interval`](http://www.threeten.org/threeten-extra/apidocs/org/threeten/extra/Interval.html), [`YearWeek`](http://www.threeten.org/threeten-extra/apidocs/org/threeten/extra/YearWeek.html), [`YearQuarter`](http://www.threeten.org/threeten-extra/apidocs/org/threeten/extra/YearQuarter.html), and [more](http://www.threeten.org/threeten-extra/apidocs/index.html).\r\n\r\n\r\n\r\n\r\n  [1]: https://en.m.wikipedia.org/wiki/ISO_week_date","title":"Is there a date format to display the day of the week in java?","body":"<h1>tl;dr</h1>\n<pre><code>LocalDate.of( 2018 , Month.JANUARY , 23 )\n         .format( DateTimeFormatter.ofPattern( &quot;uuuu-MM-EEE&quot; , Locale.US )  )\n</code></pre>\n<h1>java.time</h1>\n<p>The modern approach uses the java.time classes.</p>\n<pre><code>LocalDate ld = LocalDate.of( 2018 , Month.JANUARY , 23 ) ;\n</code></pre>\n<p>Note how we specify a <code>Locale</code> such as <code>Locale.CANADA_FRENCH</code> to determine the human language used to translate the name of the day.</p>\n<pre><code>DateTimeFormatter f = DateTimeFormatter.ofPattern( &quot;uuuu-MM-EEE&quot; , Locale.US ) ;\nString output = ld.format( f ) ;\n</code></pre>\n<h1>ISO 8601</h1>\n<p>By the way, you may be interested in the standard <a href=\"https://en.m.wikipedia.org/wiki/ISO_week_date\" rel=\"nofollow noreferrer\">ISO 8601 week</a> numbering scheme: <code>yyyy-Www-d</code>.</p>\n<blockquote>\n<p>2018-W01-2</p>\n</blockquote>\n<p>Week # 1 has the first Thursday of the calendar-year. Week starts on a Monday. A year has either 52 or 53 weeks. The last/first few days of a calendar-year may land in the next/previous week-based-year.</p>\n<p>The single digit on the end is day-of-week, 1-7 for Monday-Sunday.</p>\n<p>Add the <em>ThreeTen-Extra</em> library class to your project for the <code>YearWeek</code> class.</p>\n<hr />\n<h1>About <em>java.time</em></h1>\n<p>The <a href=\"http://docs.oracle.com/javase/9/docs/api/java/time/package-summary.html\" rel=\"nofollow noreferrer\"><em>java.time</em></a> framework is built into Java 8 and later. These classes supplant the troublesome old <a href=\"https://en.wikipedia.org/wiki/Legacy_system\" rel=\"nofollow noreferrer\">legacy</a> date-time classes such as <a href=\"https://docs.oracle.com/javase/9/docs/api/java/util/Date.html\" rel=\"nofollow noreferrer\"><code>java.util.Date</code></a>, <a href=\"https://docs.oracle.com/javase/9/docs/api/java/util/Calendar.html\" rel=\"nofollow noreferrer\"><code>Calendar</code></a>, &amp; <a href=\"http://docs.oracle.com/javase/9/docs/api/java/text/SimpleDateFormat.html\" rel=\"nofollow noreferrer\"><code>SimpleDateFormat</code></a>.</p>\n<p>The <a href=\"http://www.joda.org/joda-time/\" rel=\"nofollow noreferrer\"><em>Joda-Time</em></a> project, now in <a href=\"https://en.wikipedia.org/wiki/Maintenance_mode\" rel=\"nofollow noreferrer\">maintenance mode</a>, advises migration to the <a href=\"http://docs.oracle.com/javase/9/docs/api/java/time/package-summary.html\" rel=\"nofollow noreferrer\">java.time</a> classes.</p>\n<p>To learn more, see the <a href=\"http://docs.oracle.com/javase/tutorial/datetime/TOC.html\" rel=\"nofollow noreferrer\"><em>Oracle Tutorial</em></a>. And search Stack Overflow for many examples and explanations. Specification is <a href=\"https://jcp.org/en/jsr/detail?id=310\" rel=\"nofollow noreferrer\">JSR 310</a>.</p>\n<p>Where to obtain the java.time classes?</p>\n<ul>\n<li><a href=\"https://en.wikipedia.org/wiki/Java_version_history#Java_SE_8\" rel=\"nofollow noreferrer\"><strong>Java SE 8</strong></a>, <a href=\"https://en.wikipedia.org/wiki/Java_version_history#Java_SE_9\" rel=\"nofollow noreferrer\"><strong>Java SE 9</strong></a>, and later</li>\n<li>Built-in.</li>\n<li>Part of the standard Java API with a bundled implementation.</li>\n<li>Java 9 adds some minor features and fixes.</li>\n<li><a href=\"https://en.wikipedia.org/wiki/Java_version_history#Java_SE_6\" rel=\"nofollow noreferrer\"><strong>Java SE 6</strong></a> and <a href=\"https://en.wikipedia.org/wiki/Java_version_history#Java_SE_7\" rel=\"nofollow noreferrer\"><strong>Java SE 7</strong></a></li>\n<li>Much of the java.time functionality is back-ported to Java 6 &amp; 7 in <a href=\"http://www.threeten.org/threetenbp/\" rel=\"nofollow noreferrer\"><em><strong>ThreeTen-Backport</strong></em></a>.</li>\n<li><a href=\"https://en.wikipedia.org/wiki/Android_(operating_system)\" rel=\"nofollow noreferrer\"><strong>Android</strong></a></li>\n<li>Later versions of Android bundle implementations of the java.time classes.</li>\n<li>For earlier Android, the <a href=\"https://github.com/JakeWharton/ThreeTenABP\" rel=\"nofollow noreferrer\"><em><strong>ThreeTenABP</strong></em></a> project adapts <em>ThreeTen-Backport</em> (mentioned above). See <a href=\"http://stackoverflow.com/q/38922754/642706\"><em>How to use ThreeTenABP…</em></a>.</li>\n</ul>\n<p>The <a href=\"http://www.threeten.org/threeten-extra/\" rel=\"nofollow noreferrer\"><strong>ThreeTen-Extra</strong></a> project extends java.time with additional classes. This project is a proving ground for possible future additions to java.time. You may find some useful classes here such as <a href=\"http://www.threeten.org/threeten-extra/apidocs/org/threeten/extra/Interval.html\" rel=\"nofollow noreferrer\"><code>Interval</code></a>, <a href=\"http://www.threeten.org/threeten-extra/apidocs/org/threeten/extra/YearWeek.html\" rel=\"nofollow noreferrer\"><code>YearWeek</code></a>, <a href=\"http://www.threeten.org/threeten-extra/apidocs/org/threeten/extra/YearQuarter.html\" rel=\"nofollow noreferrer\"><code>YearQuarter</code></a>, and <a href=\"http://www.threeten.org/threeten-extra/apidocs/index.html\" rel=\"nofollow noreferrer\">more</a>.</p>\n"},{"tags":[],"owner":{"account_id":11346465,"reputation":2311,"user_id":8580484,"display_name":"Sal Borrelli"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1560523211,"creation_date":1560523211,"answer_id":56600384,"question_id":5121976,"body_markdown":"I know the question is about getting the day of week as string (e.g. the short name), but for anybody who is looking for the numeric day of week (as I was), you can use the new &quot;u&quot; format string, supported since Java 7. For example:\r\n\r\n    new SimpleDateFormat(&quot;u&quot;).format(new Date());\r\n\r\nreturns today&#39;s day-of-week index, namely: 1 = Monday, 2 = Tuesday, ..., 7 = Sunday.","title":"Is there a date format to display the day of the week in java?","body":"<p>I know the question is about getting the day of week as string (e.g. the short name), but for anybody who is looking for the numeric day of week (as I was), you can use the new \"u\" format string, supported since Java 7. For example:</p>\n\n<pre><code>new SimpleDateFormat(\"u\").format(new Date());\n</code></pre>\n\n<p>returns today's day-of-week index, namely: 1 = Monday, 2 = Tuesday, ..., 7 = Sunday.</p>\n"}],"owner":{"account_id":294685,"reputation":7571,"user_id":598714,"accept_rate":66,"display_name":"rogerstone"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":236385,"favorite_count":0,"down_vote_count":0,"up_vote_count":173,"accepted_answer_id":5122016,"answer_count":6,"score":173,"last_activity_date":1698185820,"creation_date":1298663779,"question_id":5121976,"body_markdown":"I know of date formats such as &lt;br/&gt;\r\n`&quot;yyyy-mm-dd&quot;` -which displays date in format `2011-02-26`&lt;br/&gt;\r\n`&quot;yyyy-MMM-dd&quot;`-which displays date in format `2011-FEB-26`\r\n\r\nto be used in eg:\r\n\r\n    SimpleDateFormat formatter = new SimpleDateFormat(\r\n    \t\t\t\t&quot;yyyy/MMM/dd &quot;);\r\n\r\nI want a format which would help me display the day of the week like `2011-02-MON` or anything.  I just want the day of the week to be displayed in characters with the month and the year.  Can you tell me of a format like this?","title":"Is there a date format to display the day of the week in java?","body":"<p>I know of date formats such as <br/>\n<code>\"yyyy-mm-dd\"</code> -which displays date in format <code>2011-02-26</code><br/>\n<code>\"yyyy-MMM-dd\"</code>-which displays date in format <code>2011-FEB-26</code></p>\n\n<p>to be used in eg:</p>\n\n<pre><code>SimpleDateFormat formatter = new SimpleDateFormat(\n                \"yyyy/MMM/dd \");\n</code></pre>\n\n<p>I want a format which would help me display the day of the week like <code>2011-02-MON</code> or anything.  I just want the day of the week to be displayed in characters with the month and the year.  Can you tell me of a format like this?</p>\n"},{"tags":["java","maven","apache-pinot"],"comments":[{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":1,"creation_date":1698157527,"post_id":77352954,"comment_id":136367833,"body_markdown":"*apache-pinot-1.1.0-SNAPSHOT-bin is not a regular file (it may be a directory)* remove it by hand and try again","body":"<i>apache-pinot-1.1.0-SNAPSHOT-bin is not a regular file (it may be a directory)</i> remove it by hand and try again"},{"owner":{"account_id":11240816,"reputation":309,"user_id":8245191,"display_name":"Aditya Mahajan"},"score":0,"creation_date":1698159262,"post_id":77352954,"comment_id":136368209,"body_markdown":"I tried removing directory manually from build/apache-pinot-1.1.0-SNAPSHOT-bin folder, the error is still same.","body":"I tried removing directory manually from build/apache-pinot-1.1.0-SNAPSHOT-bin folder, the error is still same."},{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1698165763,"post_id":77352954,"comment_id":136369596,"body_markdown":"You should remove it from the folder mentioned in the error message","body":"You should remove it from the folder mentioned in the error message"},{"owner":{"account_id":11240816,"reputation":309,"user_id":8245191,"display_name":"Aditya Mahajan"},"score":0,"creation_date":1698825293,"post_id":77352954,"comment_id":136452875,"body_markdown":"I see this as folder ../build/apache-pinot-1.1.0-SNAPSHOT-bin, I did try removing apache-pinot-1.1.0-SNAPSHOT-bin, but it did not work.","body":"I see this as folder ../build/apache-pinot-1.1.0-SNAPSHOT-bin, I did try removing apache-pinot-1.1.0-SNAPSHOT-bin, but it did not work."}],"answers":[{"comments":[{"owner":{"account_id":11240816,"reputation":309,"user_id":8245191,"display_name":"Aditya Mahajan"},"score":0,"creation_date":1698825227,"post_id":77355658,"comment_id":136452866,"body_markdown":"I commented entire create-build-directory and it worked fine.","body":"I commented entire create-build-directory and it worked fine."}],"tags":[],"owner":{"account_id":10051478,"reputation":81,"user_id":7431162,"display_name":"Andr&#233;s S. Sanguino"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698185371,"creation_date":1698185371,"answer_id":77355658,"question_id":77352954,"body_markdown":"First of all, according to the [POM][1] you attached, it is composed of a bunch of modules, and the one where the problem is, seems to be the `pinot-distribution` one, and this is its [POM][2]:\r\n\r\n    &lt;module&gt;pinot-distribution&lt;/module&gt;\r\n\r\n**The [WARNING]**\r\n\r\nAs it can be seen in the logs you put, the execution that fails is `binary-release-assembly-pinot`. Guess that you are trying to create an assembly with the `maven-assembly-plugin` plugin, whose description is depicted in the [pinot-assembly.xml][3] file.\r\n\r\nThe problem I see here (the XML file) is that you are trying to create several assemblies:\r\n\r\n      &lt;formats&gt;\r\n        &lt;format&gt;tar.gz&lt;/format&gt;\r\n        &lt;format&gt;dir&lt;/format&gt;\r\n      &lt;/formats&gt;\r\n\r\nAnd the second one is suspicious (seems that the idea is just create a `tar.gz` file).\r\n\r\n&gt; Above this snippet you can see another usage of this\r\n&gt; `maven-assembly-plugin` plugin, named as\r\n&gt; `source-release-assembly-pinot`, whose assembly descriptor file is\r\n&gt; [pinot-source-assembly.xml][4], and looks like well formed.\r\n\r\n**The [ERROR]**\r\n\r\nAfter that, going back to the [pinot-distribution POM][2], there is another execution, with id `create-build-directory`, where you are trying to create a symbolic link (command `ln -sfn`), within the directory\r\n\r\n    ${project.basedir}/../build\r\n\r\nSo you have to consider where this directory is created / used, or maybe just not forcing it (`-f`), because it involves overwriting it.\r\n\r\n  [1]: https://github.com/apache/pinot/blob/master/pom.xml\r\n  [2]: https://github.com/apache/pinot/blob/master/pinot-distribution/pom.xml\r\n  [3]: https://github.com/apache/pinot/blob/master/pinot-distribution/pinot-assembly.xml\r\n  [4]: https://github.com/apache/pinot/blob/master/pinot-distribution/pinot-source-assembly.xml\r\n","title":"Why am I getting cannot overwrite directory error while trying to do mvn package install?","body":"<p>First of all, according to the <a href=\"https://github.com/apache/pinot/blob/master/pom.xml\" rel=\"nofollow noreferrer\">POM</a> you attached, it is composed of a bunch of modules, and the one where the problem is, seems to be the <code>pinot-distribution</code> one, and this is its <a href=\"https://github.com/apache/pinot/blob/master/pinot-distribution/pom.xml\" rel=\"nofollow noreferrer\">POM</a>:</p>\n<pre><code>&lt;module&gt;pinot-distribution&lt;/module&gt;\n</code></pre>\n<p><strong>The [WARNING]</strong></p>\n<p>As it can be seen in the logs you put, the execution that fails is <code>binary-release-assembly-pinot</code>. Guess that you are trying to create an assembly with the <code>maven-assembly-plugin</code> plugin, whose description is depicted in the <a href=\"https://github.com/apache/pinot/blob/master/pinot-distribution/pinot-assembly.xml\" rel=\"nofollow noreferrer\">pinot-assembly.xml</a> file.</p>\n<p>The problem I see here (the XML file) is that you are trying to create several assemblies:</p>\n<pre><code>  &lt;formats&gt;\n    &lt;format&gt;tar.gz&lt;/format&gt;\n    &lt;format&gt;dir&lt;/format&gt;\n  &lt;/formats&gt;\n</code></pre>\n<p>And the second one is suspicious (seems that the idea is just create a <code>tar.gz</code> file).</p>\n<blockquote>\n<p>Above this snippet you can see another usage of this\n<code>maven-assembly-plugin</code> plugin, named as\n<code>source-release-assembly-pinot</code>, whose assembly descriptor file is\n<a href=\"https://github.com/apache/pinot/blob/master/pinot-distribution/pinot-source-assembly.xml\" rel=\"nofollow noreferrer\">pinot-source-assembly.xml</a>, and looks like well formed.</p>\n</blockquote>\n<p><strong>The [ERROR]</strong></p>\n<p>After that, going back to the <a href=\"https://github.com/apache/pinot/blob/master/pinot-distribution/pom.xml\" rel=\"nofollow noreferrer\">pinot-distribution POM</a>, there is another execution, with id <code>create-build-directory</code>, where you are trying to create a symbolic link (command <code>ln -sfn</code>), within the directory</p>\n<pre><code>${project.basedir}/../build\n</code></pre>\n<p>So you have to consider where this directory is created / used, or maybe just not forcing it (<code>-f</code>), because it involves overwriting it.</p>\n"}],"owner":{"account_id":11240816,"reputation":309,"user_id":8245191,"display_name":"Aditya Mahajan"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":48,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":1,"score":-2,"last_activity_date":1698185371,"creation_date":1698157350,"question_id":77352954,"body_markdown":"I am using below command in windows 11, using git bash.\r\n\r\n`mvn install package -DskipTests -Pbin-dist -Drat.numUnapprovedLicenses=1000 -Dcheckstyle.skip -rf :pinot-distribution`\r\n\r\n[Here is pom.xml][1]\r\n\r\nI am getting following error. Can someone please help? \r\n\r\n```\r\n[INFO] --- maven-assembly-plugin:3.1.1:single (binary-release-assembly-pinot) @ pinot-distribution ---\r\n[INFO] Reading assembly descriptor: pinot-assembly.xml\r\n[INFO] Building tar: C:\\GitHubProjects\\pinot\\pinot-distribution\\target\\apache-pinot-1.1.0-SNAPSHOT-bin.tar.gz\r\n[INFO] Copying files to C:\\GitHubProjects\\pinot\\pinot-distribution\\target\\apache-pinot-1.1.0-SNAPSHOT-bin\r\n[WARNING] Assembly file: C:\\GitHubProjects\\pinot\\pinot-distribution\\target\\apache-pinot-1.1.0-SNAPSHOT-bin is not a regular file (it may be a directory). It cannot be attached to the project build for installation or deployment.\r\n[INFO]\r\n[INFO] --- exec-maven-plugin:1.5.0:exec (create-build-directory) @ pinot-distribution ---\r\n/usr/bin/ln: &#39;C:\\GitHubProjects\\pinot\\pinot-distribution/../build/apache-pinot-1.1.0-SNAPSHOT-bin&#39;: cannot overwrite directory\r\n[ERROR] Command execution failed.\r\norg.apache.commons.exec.ExecuteException: Process exited with an error: 1 (Exit value: 1)\r\n    at org.apache.commons.exec.DefaultExecutor.executeInternal (DefaultExecutor.java:404)\r\n    at org.apache.commons.exec.DefaultExecutor.execute (DefaultExecutor.java:166)\r\n    at org.codehaus.mojo.exec.ExecMojo.executeCommandLine (ExecMojo.java:764)\r\n    at org.codehaus.mojo.exec.ExecMojo.executeCommandLine (ExecMojo.java:711)\r\n    at org.codehaus.mojo.exec.ExecMojo.execute (ExecMojo.java:289)\r\n    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo (DefaultBuildPluginManager.java:137)\r\n\r\n```\r\n\r\n\r\n  [1]: https://github.com/apache/pinot/blob/master/pom.xml","title":"Why am I getting cannot overwrite directory error while trying to do mvn package install?","body":"<p>I am using below command in windows 11, using git bash.</p>\n<p><code>mvn install package -DskipTests -Pbin-dist -Drat.numUnapprovedLicenses=1000 -Dcheckstyle.skip -rf :pinot-distribution</code></p>\n<p><a href=\"https://github.com/apache/pinot/blob/master/pom.xml\" rel=\"nofollow noreferrer\">Here is pom.xml</a></p>\n<p>I am getting following error. Can someone please help?</p>\n<pre><code>[INFO] --- maven-assembly-plugin:3.1.1:single (binary-release-assembly-pinot) @ pinot-distribution ---\n[INFO] Reading assembly descriptor: pinot-assembly.xml\n[INFO] Building tar: C:\\GitHubProjects\\pinot\\pinot-distribution\\target\\apache-pinot-1.1.0-SNAPSHOT-bin.tar.gz\n[INFO] Copying files to C:\\GitHubProjects\\pinot\\pinot-distribution\\target\\apache-pinot-1.1.0-SNAPSHOT-bin\n[WARNING] Assembly file: C:\\GitHubProjects\\pinot\\pinot-distribution\\target\\apache-pinot-1.1.0-SNAPSHOT-bin is not a regular file (it may be a directory). It cannot be attached to the project build for installation or deployment.\n[INFO]\n[INFO] --- exec-maven-plugin:1.5.0:exec (create-build-directory) @ pinot-distribution ---\n/usr/bin/ln: 'C:\\GitHubProjects\\pinot\\pinot-distribution/../build/apache-pinot-1.1.0-SNAPSHOT-bin': cannot overwrite directory\n[ERROR] Command execution failed.\norg.apache.commons.exec.ExecuteException: Process exited with an error: 1 (Exit value: 1)\n    at org.apache.commons.exec.DefaultExecutor.executeInternal (DefaultExecutor.java:404)\n    at org.apache.commons.exec.DefaultExecutor.execute (DefaultExecutor.java:166)\n    at org.codehaus.mojo.exec.ExecMojo.executeCommandLine (ExecMojo.java:764)\n    at org.codehaus.mojo.exec.ExecMojo.executeCommandLine (ExecMojo.java:711)\n    at org.codehaus.mojo.exec.ExecMojo.execute (ExecMojo.java:289)\n    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo (DefaultBuildPluginManager.java:137)\n\n</code></pre>\n"},{"tags":["java","truevfs"],"owner":{"account_id":335122,"reputation":151,"user_id":1264042,"accept_rate":71,"display_name":"Isabi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":11,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1698185265,"creation_date":1698185265,"question_id":77355654,"body_markdown":"I&#39;m having an issue with adding a file into a zip with trueVFS. Here&#39;s a short code snippet:\r\n\r\n```\r\npackage org.example.zipper;\r\n\r\nimport java.io.File;\r\nimport java.io.IOException;\r\n\r\nimport net.java.truevfs.access.TFile;\r\nimport net.java.truevfs.access.TVFS;\r\n\r\npublic class Zipper {\r\n\r\n    /**\r\n     * @param args[0] path to file to be added to the zip\r\n     * @param args[1] path to zip file\r\n     * @throws IOException\r\n     */\r\n    public static void main(String[] args) throws IOException {\r\n        new Zipper().zip(args[0], args[1]);\r\n    }\r\n\r\n    public void zip(String filePath, String zipFilePath) throws IOException {\r\n        File source = new File(filePath);\r\n        TFile.cp(source, new TFile(zipFilePath + File.separator + source.getName()));\r\n        TVFS.umount();\r\n    }\r\n}\r\n```\r\n\r\nResults in the following exception (running with Java 11):\r\n\r\n```\r\nException in thread &quot;main&quot; java.util.ServiceConfigurationError: No key manager available for class net.java.truecommons.key.spec.common.AesPbeParameters.\r\n\tat net.java.truecommons.key.spec.AbstractKeyManagerMap.manager(AbstractKeyManagerMap.java:36)\r\n\tat net.java.truevfs.comp.zipdriver.AbstractKeyController.keyManager(AbstractKeyController.java:153)\r\n\tat net.java.truevfs.comp.zipdriver.AbstractKeyController.sync(AbstractKeyController.java:149)\r\n\tat net.java.truevfs.kernel.spec.FsDelegatingController.sync(FsDelegatingController.java:122)\r\n\tat net.java.truevfs.kernel.impl.FalsePositiveArchiveController.sync(FalsePositiveArchiveController.java:236)\r\n\tat net.java.truevfs.kernel.spec.FsSync$1SyncVisitor.visit(FsSync.java:66)\r\n\tat net.java.truevfs.kernel.spec.FsSync$1SyncVisitor.visit(FsSync.java:59)\r\n\tat net.java.truevfs.kernel.impl.DefaultManager$3.call(DefaultManager.java:129)\r\n\tat net.java.truevfs.kernel.impl.DefaultManager.accept(DefaultManager.java:141)\r\n\tat net.java.truevfs.kernel.spec.FsSync.run(FsSync.java:77)\r\n\tat net.java.truevfs.access.TVFS.sync(TVFS.java:177)\r\n\tat net.java.truevfs.access.TVFS.umount(TVFS.java:56)\r\n\tat org.example.zipper.Zipper.zip(Zipper.java:22)\r\n\tat org.example.zipper.Zipper.main(Zipper.java:16)\r\n```\r\n\r\nHaven&#39;t been able to find the cause for this and would be grateful for a hint.","title":"Adding a file to a zip with truevfs throws exception","body":"<p>I'm having an issue with adding a file into a zip with trueVFS. Here's a short code snippet:</p>\n<pre><code>package org.example.zipper;\n\nimport java.io.File;\nimport java.io.IOException;\n\nimport net.java.truevfs.access.TFile;\nimport net.java.truevfs.access.TVFS;\n\npublic class Zipper {\n\n    /**\n     * @param args[0] path to file to be added to the zip\n     * @param args[1] path to zip file\n     * @throws IOException\n     */\n    public static void main(String[] args) throws IOException {\n        new Zipper().zip(args[0], args[1]);\n    }\n\n    public void zip(String filePath, String zipFilePath) throws IOException {\n        File source = new File(filePath);\n        TFile.cp(source, new TFile(zipFilePath + File.separator + source.getName()));\n        TVFS.umount();\n    }\n}\n</code></pre>\n<p>Results in the following exception (running with Java 11):</p>\n<pre><code>Exception in thread &quot;main&quot; java.util.ServiceConfigurationError: No key manager available for class net.java.truecommons.key.spec.common.AesPbeParameters.\n    at net.java.truecommons.key.spec.AbstractKeyManagerMap.manager(AbstractKeyManagerMap.java:36)\n    at net.java.truevfs.comp.zipdriver.AbstractKeyController.keyManager(AbstractKeyController.java:153)\n    at net.java.truevfs.comp.zipdriver.AbstractKeyController.sync(AbstractKeyController.java:149)\n    at net.java.truevfs.kernel.spec.FsDelegatingController.sync(FsDelegatingController.java:122)\n    at net.java.truevfs.kernel.impl.FalsePositiveArchiveController.sync(FalsePositiveArchiveController.java:236)\n    at net.java.truevfs.kernel.spec.FsSync$1SyncVisitor.visit(FsSync.java:66)\n    at net.java.truevfs.kernel.spec.FsSync$1SyncVisitor.visit(FsSync.java:59)\n    at net.java.truevfs.kernel.impl.DefaultManager$3.call(DefaultManager.java:129)\n    at net.java.truevfs.kernel.impl.DefaultManager.accept(DefaultManager.java:141)\n    at net.java.truevfs.kernel.spec.FsSync.run(FsSync.java:77)\n    at net.java.truevfs.access.TVFS.sync(TVFS.java:177)\n    at net.java.truevfs.access.TVFS.umount(TVFS.java:56)\n    at org.example.zipper.Zipper.zip(Zipper.java:22)\n    at org.example.zipper.Zipper.main(Zipper.java:16)\n</code></pre>\n<p>Haven't been able to find the cause for this and would be grateful for a hint.</p>\n"},{"tags":["java","clamp"],"comments":[{"owner":{"account_id":148440,"reputation":54364,"user_id":360211,"accept_rate":76,"display_name":"weston"},"score":0,"creation_date":1369077179,"post_id":16656651,"comment_id":23960776,"body_markdown":"@LuiggiMendoza [HLSL](http://en.wikipedia.org/wiki/High-level_shader_language)","body":"@LuiggiMendoza <a href=\"http://en.wikipedia.org/wiki/High-level_shader_language\" rel=\"nofollow noreferrer\">HLSL</a>"},{"owner":{"account_id":123612,"reputation":48061,"user_id":318174,"accept_rate":71,"display_name":"Adam Gent"},"score":0,"creation_date":1369077223,"post_id":16656651,"comment_id":23960802,"body_markdown":"See http://stackoverflow.com/questions/2683442/where-can-i-find-the-clamp-function-in-net ?","body":"See <a href=\"http://stackoverflow.com/questions/2683442/where-can-i-find-the-clamp-function-in-net\" title=\"where can i find the clamp function in net\">stackoverflow.com/questions/2683442/&hellip;</a> ?"},{"owner":{"account_id":148440,"reputation":54364,"user_id":360211,"accept_rate":76,"display_name":"weston"},"score":1,"creation_date":1369077229,"post_id":16656651,"comment_id":23960805,"body_markdown":"@LuiggiMendoza Also [OpenGL](http://www.opengl.org/sdk/docs/manglsl/xhtml/clamp.xml)","body":"@LuiggiMendoza Also <a href=\"http://www.opengl.org/sdk/docs/manglsl/xhtml/clamp.xml\" rel=\"nofollow noreferrer\">OpenGL</a>"},{"owner":{"account_id":148440,"reputation":54364,"user_id":360211,"accept_rate":76,"display_name":"weston"},"score":0,"creation_date":1369077266,"post_id":16656651,"comment_id":23960828,"body_markdown":"@AdamGent thanks, but that&#39;s c#","body":"@AdamGent thanks, but that&#39;s c#"},{"owner":{"account_id":123612,"reputation":48061,"user_id":318174,"accept_rate":71,"display_name":"Adam Gent"},"score":0,"creation_date":1369077396,"post_id":16656651,"comment_id":23960908,"body_markdown":"@weston it looks pretty trivial to write your own (ie just translate the c#).","body":"@weston it looks pretty trivial to write your own (ie just translate the c#)."},{"owner":{"account_id":148440,"reputation":54364,"user_id":360211,"accept_rate":76,"display_name":"weston"},"score":1,"creation_date":1369077521,"post_id":16656651,"comment_id":23960959,"body_markdown":"@AdamGent It&#39;s clearly trivial to right my own function, I have the code right in the question there. I&#39;d rather use one that&#39;s built in, particularly because that would deal with all value datatypes probably.","body":"@AdamGent It&#39;s clearly trivial to right my own function, I have the code right in the question there. I&#39;d rather use one that&#39;s built in, particularly because that would deal with all value datatypes probably."},{"owner":{"account_id":123612,"reputation":48061,"user_id":318174,"accept_rate":71,"display_name":"Adam Gent"},"score":3,"creation_date":1369077772,"post_id":16656651,"comment_id":23961114,"body_markdown":"I don&#39;t really know your level of expertise java so it&#39;s hard for me to assume your knowledge. The c # uses Comparable to handle multiple data types.... Guess what you do in Java :)","body":"I don&#39;t really know your level of expertise java so it&#39;s hard for me to assume your knowledge. The c # uses Comparable to handle multiple data types.... Guess what you do in Java :)"}],"answers":[{"comments":[{"owner":{"account_id":5187045,"reputation":1064,"user_id":4151129,"accept_rate":100,"display_name":"Ben I."},"score":6,"creation_date":1692719102,"post_id":16656695,"comment_id":135661341,"body_markdown":"For future visitors: this is changing. See [Michael Berry&#39;s answer](https://stackoverflow.com/a/75707634/4151129).","body":"For future visitors: this is changing. See <a href=\"https://stackoverflow.com/a/75707634/4151129\">Michael Berry&#39;s answer</a>."}],"tags":[],"owner":{"account_id":46972,"reputation":356179,"user_id":139010,"accept_rate":81,"display_name":"Matt Ball"},"comment_count":1,"down_vote_count":7,"up_vote_count":207,"is_accepted":false,"score":200,"last_activity_date":1698184954,"creation_date":1369077262,"answer_id":16656695,"question_id":16656651,"body_markdown":"Edit, fall 2023: this answer is obsolete! Please see [this much-more-recent answer](https://stackoverflow.com/a/75707634/139010) for information as of Java 21.\r\n\r\n-----------\r\n\r\n&gt; Is there any built in function for clamping to a range?\r\n\r\nNo. ","title":"Does java have a clamp function?","body":"<p>Edit, fall 2023: this answer is obsolete! Please see <a href=\"https://stackoverflow.com/a/75707634/139010\">this much-more-recent answer</a> for information as of Java 21.</p>\n<hr />\n<blockquote>\n<p>Is there any built in function for clamping to a range?</p>\n</blockquote>\n<p>No.</p>\n"},{"tags":[],"owner":{"account_id":123612,"reputation":48061,"user_id":318174,"accept_rate":71,"display_name":"Adam Gent"},"comment_count":0,"down_vote_count":5,"up_vote_count":22,"is_accepted":false,"score":17,"last_activity_date":1431744640,"creation_date":1369078533,"answer_id":16657020,"question_id":16656651,"body_markdown":"Ported from [a .NET answer][1]:\r\n\r\n    public static &lt;T extends Comparable&lt;T&gt;&gt; T clamp(T val, T min, T max) {\r\n        if (val.compareTo(min) &lt; 0) return min;\r\n        else if (val.compareTo(max) &gt; 0) return max;\r\n        else return val;\r\n    }\r\n\r\n**Caution:** Unlike .NET, primitive types are not allowed in generics, which means they must be boxed/unboxed. When working with primitive types, such as `int` and `double`, this implementation will perform three box operations and one unbox operation.\r\n\r\n*Note: since it’s a port of [the .NET answer][1], I made this a community wiki post.*\r\n\r\n\r\n[1]: https://stackoverflow.com/questions/2683442/where-can-i-find-the-clamp-function-in-net","title":"Does java have a clamp function?","body":"<p>Ported from <a href=\"https://stackoverflow.com/questions/2683442/where-can-i-find-the-clamp-function-in-net\">a .NET answer</a>:</p>\n\n<pre><code>public static &lt;T extends Comparable&lt;T&gt;&gt; T clamp(T val, T min, T max) {\n    if (val.compareTo(min) &lt; 0) return min;\n    else if (val.compareTo(max) &gt; 0) return max;\n    else return val;\n}\n</code></pre>\n\n<p><strong>Caution:</strong> Unlike .NET, primitive types are not allowed in generics, which means they must be boxed/unboxed. When working with primitive types, such as <code>int</code> and <code>double</code>, this implementation will perform three box operations and one unbox operation.</p>\n\n<p><em>Note: since it’s a port of <a href=\"https://stackoverflow.com/questions/2683442/where-can-i-find-the-clamp-function-in-net\">the .NET answer</a>, I made this a community wiki post.</em></p>\n"},{"tags":[],"owner":{"account_id":148440,"reputation":54364,"user_id":360211,"accept_rate":76,"display_name":"weston"},"comment_count":0,"down_vote_count":0,"up_vote_count":56,"is_accepted":true,"score":56,"last_activity_date":1379599716,"creation_date":1369087613,"answer_id":16659144,"question_id":16656651,"body_markdown":"Having looked at the generic clamp method offered up in another answer, it is worth noting that this has [boxing/unboxing](http://docs.oracle.com/javase/tutorial/java/data/autoboxing.html) considerations for primitive types.\r\n\r\n    public static &lt;T extends Comparable&lt;T&gt;&gt; T clamp(T val, T min, T max) {...}\r\n\r\n    float clampedValue = clamp(value, 0f, 1f);\r\n\r\nThis will use the `Float` wrapper class, resulting in 3 box operations, one for each parameter, and 1 unbox operation for the returned type.\r\n\r\nTo avoid this, I would just stick to writing it long hand or use a non-generic function for the type you want:\r\n\r\n    public static float clamp(float val, float min, float max) {\r\n        return Math.max(min, Math.min(max, val));\r\n    }\r\n\r\nThen just overload with identical methods for every primitive type you require.","title":"Does java have a clamp function?","body":"<p>Having looked at the generic clamp method offered up in another answer, it is worth noting that this has <a href=\"http://docs.oracle.com/javase/tutorial/java/data/autoboxing.html\">boxing/unboxing</a> considerations for primitive types.</p>\n\n<pre><code>public static &lt;T extends Comparable&lt;T&gt;&gt; T clamp(T val, T min, T max) {...}\n\nfloat clampedValue = clamp(value, 0f, 1f);\n</code></pre>\n\n<p>This will use the <code>Float</code> wrapper class, resulting in 3 box operations, one for each parameter, and 1 unbox operation for the returned type.</p>\n\n<p>To avoid this, I would just stick to writing it long hand or use a non-generic function for the type you want:</p>\n\n<pre><code>public static float clamp(float val, float min, float max) {\n    return Math.max(min, Math.min(max, val));\n}\n</code></pre>\n\n<p>Then just overload with identical methods for every primitive type you require.</p>\n"},{"comments":[{"owner":{"account_id":93255,"reputation":8911,"user_id":255244,"accept_rate":93,"display_name":"Marty Neal"},"score":3,"creation_date":1594154886,"post_id":42968254,"comment_id":111026355,"body_markdown":"For those that use Apache commons lang3 and not Guava, there is the Range.fit method.\n\n`Range.between(0.0, 1.0).fit(0.5); // returns 0.5`","body":"For those that use Apache commons lang3 and not Guava, there is the Range.fit method.  <code>Range.between(0.0, 1.0).fit(0.5); &#47;&#47; returns 0.5</code>"},{"owner":{"account_id":295837,"reputation":1013,"user_id":600441,"display_name":"jgibson"},"score":0,"creation_date":1595279094,"post_id":42968254,"comment_id":111414518,"body_markdown":"They added this in 3.10: https://commons.apache.org/proper/commons-lang/changes-report.html#a3.10","body":"They added this in 3.10: <a href=\"https://commons.apache.org/proper/commons-lang/changes-report.html#a3.10\" rel=\"nofollow noreferrer\">commons.apache.org/proper/commons-lang/&hellip;</a>"}],"tags":[],"owner":{"account_id":39409,"reputation":47624,"user_id":113632,"accept_rate":84,"display_name":"dimo414"},"comment_count":2,"down_vote_count":0,"up_vote_count":27,"is_accepted":false,"score":27,"last_activity_date":1595281524,"creation_date":1490248568,"answer_id":42968254,"question_id":16656651,"body_markdown":"[Guava][2] includes [`Ints.constrainToRange()`](https://google.github.io/guava/releases/snapshot/api/docs/com/google/common/primitives/Ints.html#constrainToRange-int-int-int-) (and equivalent methods for the other primitives). From the [release notes][1]:\r\n\r\n&gt; added `constrainToRange([type] value, [type] min, [type] max)` methods which constrain the given value to the closed range defined by the `min` and `max` values. They return the value itself if it&#39;s within the range, the `min` if it&#39;s below the range and the `max` if it&#39;s above the range.\r\n\r\n  [1]: https://github.com/google/guava/wiki/Release21#commonprimitives\r\n  [2]: https://github.com/google/guava","title":"Does java have a clamp function?","body":"<p><a href=\"https://github.com/google/guava\" rel=\"noreferrer\">Guava</a> includes <a href=\"https://google.github.io/guava/releases/snapshot/api/docs/com/google/common/primitives/Ints.html#constrainToRange-int-int-int-\" rel=\"noreferrer\"><code>Ints.constrainToRange()</code></a> (and equivalent methods for the other primitives). From the <a href=\"https://github.com/google/guava/wiki/Release21#commonprimitives\" rel=\"noreferrer\">release notes</a>:</p>\n<blockquote>\n<p>added <code>constrainToRange([type] value, [type] min, [type] max)</code> methods which constrain the given value to the closed range defined by the <code>min</code> and <code>max</code> values. They return the value itself if it's within the range, the <code>min</code> if it's below the range and the <code>max</code> if it's above the range.</p>\n</blockquote>\n"},{"comments":[{"owner":{"account_id":1142146,"reputation":348,"user_id":1125721,"accept_rate":44,"display_name":"JSong"},"score":1,"creation_date":1539845577,"post_id":52080623,"comment_id":92650416,"body_markdown":"I like this one-liner. It&#39;s concise!","body":"I like this one-liner. It&#39;s concise!"},{"owner":{"account_id":12878435,"reputation":145,"user_id":9314261,"display_name":"Fire &#39;N Lightnin&#39;"},"score":3,"creation_date":1652374454,"post_id":52080623,"comment_id":127596547,"body_markdown":"I ran several thousand iterations of this, versus the original method provided by @weston and this seems to be taking about 3/4ths of the time to calculate. Definitely more efficient than using Min/Max functions.","body":"I ran several thousand iterations of this, versus the original method provided by @weston and this seems to be taking about 3/4ths of the time to calculate. Definitely more efficient than using Min/Max functions."}],"tags":[],"owner":{"account_id":3938431,"reputation":4754,"user_id":4289700,"display_name":"HugoTeixeira"},"comment_count":2,"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1535554823,"creation_date":1535554823,"answer_id":52080623,"question_id":16656651,"body_markdown":"Another not so pretty, but possible solution is to use the ternary operator, which is a shorthand for the `if-then-else` statement.\r\n\r\nSome Examples:\r\n\r\n    // value must be between MIN_VALUE and MAX_VALUE\r\n    value = value &gt; MAX_VALUE ? MAX_VALUE : value &lt; MIN_VALUE ? MIN_VALUE : value;\r\n\r\n    // value must be between 0 and 10\r\n    value = value &gt; 10 ? 10 : value &lt; 0 ? 0 : value;","title":"Does java have a clamp function?","body":"<p>Another not so pretty, but possible solution is to use the ternary operator, which is a shorthand for the <code>if-then-else</code> statement.</p>\n\n<p>Some Examples:</p>\n\n<pre><code>// value must be between MIN_VALUE and MAX_VALUE\nvalue = value &gt; MAX_VALUE ? MAX_VALUE : value &lt; MIN_VALUE ? MIN_VALUE : value;\n\n// value must be between 0 and 10\nvalue = value &gt; 10 ? 10 : value &lt; 0 ? 0 : value;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":264830,"reputation":70811,"user_id":551406,"accept_rate":95,"display_name":"Michael Berry"},"comment_count":0,"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1695135599,"creation_date":1678556408,"answer_id":75707634,"question_id":16656651,"body_markdown":"[Yes, it&#39;s built in from Java 21][1].\r\n\r\nOverloads are provided for float, double, int and long.\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Math.html#clamp(long,long,long)","title":"Does java have a clamp function?","body":"<p><a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Math.html#clamp(long,long,long)\" rel=\"nofollow noreferrer\">Yes, it's built in from Java 21</a>.</p>\n<p>Overloads are provided for float, double, int and long.</p>\n"},{"tags":[],"owner":{"account_id":1184720,"reputation":115,"user_id":1158918,"display_name":"mXaln"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1686042770,"creation_date":1686042770,"answer_id":76413099,"question_id":16656651,"body_markdown":"This may be unrelated to the question, but if someone&#39;s looking for the same feature in javafx or kotlin, as I was, here they are:\r\n\r\njavafx:\r\n\r\n```\r\nUtils.clamp(min, value, max)\r\n```\r\n\r\nkotlin:\r\n\r\n```\r\nvalue.coerceIn(min, max)\r\n```","title":"Does java have a clamp function?","body":"<p>This may be unrelated to the question, but if someone's looking for the same feature in javafx or kotlin, as I was, here they are:</p>\n<p>javafx:</p>\n<pre><code>Utils.clamp(min, value, max)\n</code></pre>\n<p>kotlin:</p>\n<pre><code>value.coerceIn(min, max)\n</code></pre>\n"}],"owner":{"account_id":148440,"reputation":54364,"user_id":360211,"accept_rate":76,"display_name":"weston"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":77891,"favorite_count":0,"down_vote_count":1,"up_vote_count":83,"accepted_answer_id":16659144,"answer_count":7,"score":82,"last_activity_date":1698184954,"creation_date":1369077091,"question_id":16656651,"body_markdown":"Suppose I have a `value`, I usually do this to &quot;clamp&quot; it to a range, here the range `[0..1]`. That is if it is below the range start, increase it to the range start, it above the range end, reduce it to the range end.\r\n\r\n    clampedValue = Math.max(0, Math.min(1, value));\r\n\r\nIs there any built in function for clamping to a range?","title":"Does java have a clamp function?","body":"<p>Suppose I have a <code>value</code>, I usually do this to \"clamp\" it to a range, here the range <code>[0..1]</code>. That is if it is below the range start, increase it to the range start, it above the range end, reduce it to the range end.</p>\n\n<pre><code>clampedValue = Math.max(0, Math.min(1, value));\n</code></pre>\n\n<p>Is there any built in function for clamping to a range?</p>\n"},{"tags":["java","intellij-idea","junit4"],"answers":[{"comments":[{"owner":{"account_id":2871026,"reputation":31449,"user_id":2464386,"accept_rate":84,"display_name":"ajb"},"score":7,"creation_date":1459403121,"post_id":36324599,"comment_id":60272734,"body_markdown":"If you&#39;re not sure whether the string will have `\\r` or not, another solution is to use `outContent.toString().trim().replace(&quot;\\r&quot;,&quot;&quot;)` as the actual string.  That is, remove all the `\\r` characters before comparing.","body":"If you&#39;re not sure whether the string will have <code>\\r</code> or not, another solution is to use <code>outContent.toString().trim().replace(&quot;\\r&quot;,&quot;&quot;)</code> as the actual string.  That is, remove all the <code>\\r</code> characters before comparing."},{"owner":{"account_id":1734438,"reputation":36275,"user_id":1587329,"accept_rate":94,"display_name":"serv-inc"},"score":0,"creation_date":1496853105,"post_id":36324599,"comment_id":75835148,"body_markdown":"Any way to debug this except by looking at it by hand?","body":"Any way to debug this except by looking at it by hand?"},{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1496854629,"post_id":36324599,"comment_id":75835977,"body_markdown":"There are 31 non printable characters, so I would say that if you really don&#39;t care about them, then just strip them all out. https://stackoverflow.com/questions/6198986/how-can-i-replace-non-printable-unicode-characters-in-java","body":"There are 31 non printable characters, so I would say that if you really don&#39;t care about them, then just strip them all out. <a href=\"https://stackoverflow.com/questions/6198986/how-can-i-replace-non-printable-unicode-characters-in-java\" title=\"how can i replace non printable unicode characters in java\">stackoverflow.com/questions/6198986/&hellip;</a>"}],"tags":[],"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"comment_count":3,"down_vote_count":0,"up_vote_count":34,"is_accepted":true,"score":34,"last_activity_date":1509559296,"creation_date":1459400866,"answer_id":36324599,"question_id":36324452,"body_markdown":"The visible characters are identical, but the non-printable characters are not. \r\n\r\nYou are comparing expected output containing CRLF (`\\r\\n`) to actual output with just LF (`\\n`). You can see that in IntelliJ above the right-hand side of both text areas. \r\n\r\nSimple solution is to replace the `\\n`&#39;s in your string with `\\r\\n`. Or remove `\\r` from the other. \r\n\r\n---\r\n\r\nIt is also worth noting that the parameter ordering is actually `(Object expected, Object actual)`, so the `outContent` should go second since that is the &quot;actual&quot; output.  ","title":"AssertEquals(String, String) ComparisonFailure when contents are identical","body":"<p>The visible characters are identical, but the non-printable characters are not. </p>\n\n<p>You are comparing expected output containing CRLF (<code>\\r\\n</code>) to actual output with just LF (<code>\\n</code>). You can see that in IntelliJ above the right-hand side of both text areas. </p>\n\n<p>Simple solution is to replace the <code>\\n</code>'s in your string with <code>\\r\\n</code>. Or remove <code>\\r</code> from the other. </p>\n\n<hr>\n\n<p>It is also worth noting that the parameter ordering is actually <code>(Object expected, Object actual)</code>, so the <code>outContent</code> should go second since that is the \"actual\" output.  </p>\n"},{"tags":[],"owner":{"account_id":14645,"reputation":14042,"user_id":30354,"accept_rate":100,"display_name":"Ulf Lindback"},"comment_count":0,"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1548841600,"creation_date":1548841600,"answer_id":54437556,"question_id":36324452,"body_markdown":"You can use AssertJ &quot;isEqualToNormalizingNewline&quot; as in:\r\n    \r\n    import static org.assertj.core.api.Assertions.assertThat;\r\n\r\n    ...\r\n\r\n    @Test\r\n    public void ingoreLineEndingCharacterTest() {\r\n        assertThat(&quot;First Line\\nSecond Line\\n&quot;).isEqualToNormalizingNewlines(&quot;First Line\\r\\nSecond Line\\r\\n&quot;);\r\n    }\r\n","title":"AssertEquals(String, String) ComparisonFailure when contents are identical","body":"<p>You can use AssertJ \"isEqualToNormalizingNewline\" as in:</p>\n\n<pre><code>import static org.assertj.core.api.Assertions.assertThat;\n\n...\n\n@Test\npublic void ingoreLineEndingCharacterTest() {\n    assertThat(\"First Line\\nSecond Line\\n\").isEqualToNormalizingNewlines(\"First Line\\r\\nSecond Line\\r\\n\");\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6813822,"reputation":939,"user_id":5418136,"display_name":"sbharti"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1634063920,"creation_date":1634063920,"answer_id":69545488,"question_id":36324452,"body_markdown":"The real issue is with System configuration of &quot;line separator&quot;, not with unit test or input / output. Likely code is run on Windows platform which has default line separator as CRLF or `\\r\\n`. Unix or Mac, however, have default line separator as LF or `\\n`. \r\n\r\nSimplest way to fix this could be setting default line separator in the IDE. For example, IntelliJ provides elegant way of fixing this IDE or Project wide, or for a file. See [IntelliJ : Configuring Line Separators﻿][1]. \r\n\r\n**IDE / Project wide** \r\n\r\n&gt; [![][2]][2]\r\n\r\n**File** \r\n\r\n&gt; [![][3]][3]\r\n\r\n\r\n  [1]: https://www.jetbrains.com/help/idea/configuring-line-endings-and-line-separators.html\r\n  [2]: https://i.stack.imgur.com/ILui4.png\r\n  [3]: https://i.stack.imgur.com/Rvm7A.png","title":"AssertEquals(String, String) ComparisonFailure when contents are identical","body":"<p>The real issue is with System configuration of &quot;line separator&quot;, not with unit test or input / output. Likely code is run on Windows platform which has default line separator as CRLF or <code>\\r\\n</code>. Unix or Mac, however, have default line separator as LF or <code>\\n</code>.</p>\n<p>Simplest way to fix this could be setting default line separator in the IDE. For example, IntelliJ provides elegant way of fixing this IDE or Project wide, or for a file. See <a href=\"https://www.jetbrains.com/help/idea/configuring-line-endings-and-line-separators.html\" rel=\"nofollow noreferrer\">IntelliJ : Configuring Line Separators﻿</a>.</p>\n<p><strong>IDE / Project wide</strong></p>\n<blockquote>\n<p><a href=\"https://i.stack.imgur.com/ILui4.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ILui4.png\" alt=\"\" /></a></p>\n</blockquote>\n<p><strong>File</strong></p>\n<blockquote>\n<p><a href=\"https://i.stack.imgur.com/Rvm7A.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Rvm7A.png\" alt=\"\" /></a></p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":15928516,"reputation":357,"user_id":14187109,"display_name":"Sergey Zh."},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1698184509,"creation_date":1698184509,"answer_id":77355599,"question_id":36324452,"body_markdown":"Using JUnit and Assertj, you can compare strings ignoring the line separator (`\\r, \\n, \\r\\n`)\r\n\r\n```Java \r\nimport static org.assertj.core.api.Assertions.assertThat;\r\n\r\n...\r\n\r\nassertThat(resultString).isEqualToIgnoringWhitespace(expectedString);\r\n```","title":"AssertEquals(String, String) ComparisonFailure when contents are identical","body":"<p>Using JUnit and Assertj, you can compare strings ignoring the line separator (<code>\\r, \\n, \\r\\n</code>)</p>\n<pre><code>import static org.assertj.core.api.Assertions.assertThat;\n\n...\n\nassertThat(resultString).isEqualToIgnoringWhitespace(expectedString);\n</code></pre>\n"}],"owner":{"account_id":1277134,"reputation":3151,"user_id":1232131,"accept_rate":62,"display_name":"Leonardo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":30254,"favorite_count":0,"down_vote_count":0,"up_vote_count":21,"accepted_answer_id":36324599,"answer_count":4,"score":21,"last_activity_date":1698184509,"creation_date":1459400039,"question_id":36324452,"body_markdown":"I&#39;m facing the following scenario:\r\n\r\nI have an app that spits everything out to the STDOUT (simple company test) and I&#39;m trying to JUnit this.\r\n\r\nMy problem is, when I run the application, it returns me in the Console:\r\n(copy and pasted from IntelliJ)\r\n\r\n    Id 1234 nao encontrado\r\n    123, R$ 441,00\r\n    321, R$ -8490,00\r\n    255, R$ 884,00\r\n\r\nPrint:\r\n\r\n[![enter image description here][1]][1]\r\n\r\nAnd my test is:\r\n\r\n    assertEquals(outContent.toString().trim(),&quot;Id 1234 nao encontrado\\n&quot; +\r\n                    &quot;123, R$ 441,00\\n&quot; +\r\n                    &quot;321, R$ -8490,00\\n&quot; +\r\n                    &quot;255, R$ 884,00&quot;);\r\n\r\nI&#39;m getting:\r\n\r\n    junit.framework.ComparisonFailure:  &lt;Click to see difference&gt;\r\n    \r\n    \r\n    \tat junit.framework.Assert.assertEquals(Assert.java:100)\r\n    \tat junit.framework.Assert.assertEquals(Assert.java:107)\r\n    \tat junit.framework.TestCase.assertEquals(TestCase.java:269)\r\n    \tat com.company.AccountManagerTest.testPrintAccountsBalance(AccountManagerTest.java:85)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n    \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    \tat java.lang.reflect.Method.invoke(Method.java:497)\r\n    \tat junit.framework.TestCase.runTest(TestCase.java:176)\r\n    \tat junit.framework.TestCase.runBare(TestCase.java:141)\r\n    \tat junit.framework.TestResult$1.protect(TestResult.java:122)\r\n    \tat junit.framework.TestResult.runProtected(TestResult.java:142)\r\n    \tat junit.framework.TestResult.run(TestResult.java:125)\r\n    \tat junit.framework.TestCase.run(TestCase.java:129)\r\n    \tat junit.framework.TestSuite.runTest(TestSuite.java:252)\r\n    \tat junit.framework.TestSuite.run(TestSuite.java:247)\r\n    \tat org.junit.internal.runners.JUnit38ClassRunner.run(JUnit38ClassRunner.java:86)\r\n    \tat org.junit.runner.JUnitCore.run(JUnitCore.java:137)\r\n    \tat com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:69)\r\n    \tat com.intellij.rt.execution.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:234)\r\n    \tat com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter.java:74)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n    \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    \tat java.lang.reflect.Method.invoke(Method.java:497)\r\n    \tat com.intellij.rt.execution.application.AppMain.main(AppMain.java:144)\r\n[![enter image description here][2]][2]\r\n\r\nSo, what I am doing wrong here ?\r\n\r\nTesting with JUnit4 and assertJ 2.4.0\r\n\r\n  [1]: http://i.stack.imgur.com/WUOsU.png\r\n  [2]: http://i.stack.imgur.com/zvBO2.png","title":"AssertEquals(String, String) ComparisonFailure when contents are identical","body":"<p>I'm facing the following scenario:</p>\n\n<p>I have an app that spits everything out to the STDOUT (simple company test) and I'm trying to JUnit this.</p>\n\n<p>My problem is, when I run the application, it returns me in the Console:\n(copy and pasted from IntelliJ)</p>\n\n<pre><code>Id 1234 nao encontrado\n123, R$ 441,00\n321, R$ -8490,00\n255, R$ 884,00\n</code></pre>\n\n<p>Print:</p>\n\n<p><a href=\"https://i.stack.imgur.com/WUOsU.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/WUOsU.png\" alt=\"enter image description here\"></a></p>\n\n<p>And my test is:</p>\n\n<pre><code>assertEquals(outContent.toString().trim(),\"Id 1234 nao encontrado\\n\" +\n                \"123, R$ 441,00\\n\" +\n                \"321, R$ -8490,00\\n\" +\n                \"255, R$ 884,00\");\n</code></pre>\n\n<p>I'm getting:</p>\n\n<pre><code>junit.framework.ComparisonFailure:  &lt;Click to see difference&gt;\n\n\n    at junit.framework.Assert.assertEquals(Assert.java:100)\n    at junit.framework.Assert.assertEquals(Assert.java:107)\n    at junit.framework.TestCase.assertEquals(TestCase.java:269)\n    at com.company.AccountManagerTest.testPrintAccountsBalance(AccountManagerTest.java:85)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:497)\n    at junit.framework.TestCase.runTest(TestCase.java:176)\n    at junit.framework.TestCase.runBare(TestCase.java:141)\n    at junit.framework.TestResult$1.protect(TestResult.java:122)\n    at junit.framework.TestResult.runProtected(TestResult.java:142)\n    at junit.framework.TestResult.run(TestResult.java:125)\n    at junit.framework.TestCase.run(TestCase.java:129)\n    at junit.framework.TestSuite.runTest(TestSuite.java:252)\n    at junit.framework.TestSuite.run(TestSuite.java:247)\n    at org.junit.internal.runners.JUnit38ClassRunner.run(JUnit38ClassRunner.java:86)\n    at org.junit.runner.JUnitCore.run(JUnitCore.java:137)\n    at com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:69)\n    at com.intellij.rt.execution.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:234)\n    at com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter.java:74)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:497)\n    at com.intellij.rt.execution.application.AppMain.main(AppMain.java:144)\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/zvBO2.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/zvBO2.png\" alt=\"enter image description here\"></a></p>\n\n<p>So, what I am doing wrong here ?</p>\n\n<p>Testing with JUnit4 and assertJ 2.4.0</p>\n"},{"tags":["java","junit5"],"answers":[{"comments":[{"owner":{"account_id":5534431,"reputation":43,"user_id":4418777,"display_name":"Vintux"},"score":0,"creation_date":1582280599,"post_id":60336415,"comment_id":106731174,"body_markdown":"Yeah, it works fine with lineSeparator(). I did not know line separator is different on Windows. Thanks","body":"Yeah, it works fine with lineSeparator(). I did not know line separator is different on Windows. Thanks"}],"tags":[],"owner":{"account_id":1713236,"reputation":22836,"user_id":1570854,"accept_rate":71,"display_name":"Lesiak"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1582280016,"creation_date":1582280016,"answer_id":60336415,"question_id":60336350,"body_markdown":"Make sure that your line separator is equal to `\\n` on your system.\r\nThis is not the case on Windows.\r\n\r\nTo fix the test, modify it to take system-specific separator into account\r\n```\r\nassertEquals(&quot;Hello World&quot; + System.lineSeparator(), outContent.toString());\r\n```","title":"Testing println output with JUnit","body":"<p>Make sure that your line separator is equal to <code>\\n</code> on your system.\nThis is not the case on Windows.</p>\n\n<p>To fix the test, modify it to take system-specific separator into account</p>\n\n<pre><code>assertEquals(\"Hello World\" + System.lineSeparator(), outContent.toString());\n</code></pre>\n"}],"owner":{"account_id":5534431,"reputation":43,"user_id":4418777,"display_name":"Vintux"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":345,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":60336415,"answer_count":1,"score":0,"last_activity_date":1698184022,"creation_date":1582279752,"question_id":60336350,"body_markdown":"I am testing a simple helloWorld class.\r\n\r\n```\r\npackage Codewars;\r\n\r\npublic class HelloWorld {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tSystem.out.println(&quot;Hello World&quot;);\r\n\t}\r\n\r\n}\r\n```\r\n\r\nAnd I have a test class as follows (based on the [answer][1] ):\r\n```\r\nimport static org.junit.jupiter.api.Assertions.*;\r\n\r\nimport java.io.ByteArrayOutputStream;\r\nimport java.io.PrintStream;\r\n\r\nimport org.junit.jupiter.api.AfterEach;\r\nimport org.junit.jupiter.api.BeforeEach;\r\nimport org.junit.jupiter.api.Test;\r\n\r\nclass helloWorldTest {\r\n\r\n\tprivate final ByteArrayOutputStream outContent = new ByteArrayOutputStream();\r\n\tprivate final PrintStream originalOut = System.out;\r\n\r\n\t@BeforeEach\r\n\tpublic void setUpStreams() {\r\n\t    System.setOut(new PrintStream(outContent));\r\n\t}\r\n\r\n\t@AfterEach\r\n\tpublic void restoreStreams() {\r\n\t    System.setOut(originalOut);\r\n\t}\r\n\t\r\n\t@Test\r\n\tvoid test() {\r\n\t\tHelloWorld.main(null);\r\n\t\tassertEquals(&quot;Hello World\\n&quot;, outContent.toString());\r\n\t}\r\n\r\n}\r\n```\r\n\r\nIt results in failure with error message as follows:\r\n```\r\norg.opentest4j.AssertionFailedError: expected: &lt;Hello World\r\n&gt; but was: &lt;Hello World\r\n&gt;\r\n\tat org.junit.jupiter.api@5.5.1/org.junit.jupiter.api.AssertionUtils.fail(AssertionUtils.java:55)\r\n\tat org.junit.jupiter.api@5.5.1/org.junit.jupiter.api.AssertionUtils.failNotEqual(AssertionUtils.java:62)\r\n\t...\r\n\r\n```\r\n\r\nIt seems like the strings are same and still the error is thrown?\r\n\r\nThank you in advance.\r\n\r\n  [1]: https://stackoverflow.com/a/1119559/4418777","title":"Testing println output with JUnit","body":"<p>I am testing a simple helloWorld class.</p>\n\n<pre><code>package Codewars;\n\npublic class HelloWorld {\n\n    public static void main(String[] args) {\n        System.out.println(\"Hello World\");\n    }\n\n}\n</code></pre>\n\n<p>And I have a test class as follows (based on the <a href=\"https://stackoverflow.com/a/1119559/4418777\">answer</a> ):</p>\n\n<pre><code>import static org.junit.jupiter.api.Assertions.*;\n\nimport java.io.ByteArrayOutputStream;\nimport java.io.PrintStream;\n\nimport org.junit.jupiter.api.AfterEach;\nimport org.junit.jupiter.api.BeforeEach;\nimport org.junit.jupiter.api.Test;\n\nclass helloWorldTest {\n\n    private final ByteArrayOutputStream outContent = new ByteArrayOutputStream();\n    private final PrintStream originalOut = System.out;\n\n    @BeforeEach\n    public void setUpStreams() {\n        System.setOut(new PrintStream(outContent));\n    }\n\n    @AfterEach\n    public void restoreStreams() {\n        System.setOut(originalOut);\n    }\n\n    @Test\n    void test() {\n        HelloWorld.main(null);\n        assertEquals(\"Hello World\\n\", outContent.toString());\n    }\n\n}\n</code></pre>\n\n<p>It results in failure with error message as follows:</p>\n\n<pre><code>org.opentest4j.AssertionFailedError: expected: &lt;Hello World\n&gt; but was: &lt;Hello World\n&gt;\n    at org.junit.jupiter.api@5.5.1/org.junit.jupiter.api.AssertionUtils.fail(AssertionUtils.java:55)\n    at org.junit.jupiter.api@5.5.1/org.junit.jupiter.api.AssertionUtils.failNotEqual(AssertionUtils.java:62)\n    ...\n\n</code></pre>\n\n<p>It seems like the strings are same and still the error is thrown?</p>\n\n<p>Thank you in advance.</p>\n"},{"tags":["java","android","saf","action-open-document-tree"],"comments":[{"owner":{"account_id":39846,"reputation":991173,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"score":0,"creation_date":1698168539,"post_id":77354190,"comment_id":136370050,"body_markdown":"&quot;None of them seem to be able to get the file path from the URI.&quot; -- there is no file path. Use the `Uri` itself. For example, you can use `ContentResolver` and `openOutputStream()` to get an `OutputStream` for use in writing content to the location identified by the `Uri`.","body":"&quot;None of them seem to be able to get the file path from the URI.&quot; -- there is no file path. Use the <code>Uri</code> itself. For example, you can use <code>ContentResolver</code> and <code>openOutputStream()</code> to get an <code>OutputStream</code> for use in writing content to the location identified by the <code>Uri</code>."}],"answers":[{"tags":[],"owner":{"account_id":15063667,"reputation":383,"user_id":10871558,"display_name":"Mohmmaed-Amleh"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698175619,"creation_date":1698175619,"answer_id":77354896,"question_id":77354190,"body_markdown":"when u want to insert a new document, the preferred way is to Use DownloadsFolder, on `api Q+(api 29)` there&#39;s a content provider that makes it easy .\r\n\r\nthis code will be compatible with all android version.\r\n\r\n&gt; Hint below android 10 u can use Document Folder ***for this solution*** but\r\n&gt; the recommended is to use `Downloads Folder`.\r\n\r\nthis is kotlin code convert it to java \r\n\r\n**if this helped pls upvote**\r\n\r\n    fun example() {\r\n          var filename = &quot;yourFileName_${System.currentTimeMillis()}.pdf&quot;\r\n\r\n            if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.Q) {\r\n                val uri = MediaStoreUtils.createDownloadUri(context, filename)\r\n\r\n                  if(uri == null){\r\n                     return\r\n                   }\r\n\r\n               try {\r\n                    context.contentResolver.openOutputStream(uri, &quot;w&quot;)?.use { outputStream -&gt;\r\n                       //write your file InputStream to the OutputStream\r\n                    }\r\n\r\n                } catch (e: IOException) {\r\n                    Log.e(TAG, e.printStackTrace().toString())\r\n                }\r\n            } else {\r\n                val downloadsFolder =\r\n                    Environment.getExternalStoragePublicDirectory(DIRECTORY_DOWNLOADS)\r\n\r\n                //re-generate the filename until we can confirm its uniqueness\r\n                while (File(downloadsFolder, filename).exists()) {\r\n                    filename = generateFilename(type.extension)\r\n                }\r\n\r\n                val file = File(downloadsFolder, filename)\r\n\r\n                try {\r\n                    file.outputStream().use { outputStream -&gt;\r\n                       //write your file InputStream to the OutputStream\r\n                    }\r\n                } catch (e: IOException) {\r\n                    Log.e(TAG, e.printStackTrace().toString())\r\n                }\r\n            }\r\n    }\r\n\r\n\r\n    @RequiresApi(Build.VERSION_CODES.Q)\r\n    fun createDownloadUri(context: Context, filename: String): Uri? {\r\n        val downloadsCollection =\r\n            MediaStore.Downloads.getContentUri(MediaStore.VOLUME_EXTERNAL_PRIMARY)\r\n\r\n            val newFileValues = ContentValues().apply {\r\n                put(MediaStore.Downloads.DISPLAY_NAME, filename)\r\n            }\r\n\r\n            // is better to execute off the main thread\r\n            // run on Background Thread (IO)\r\n            return context.contentResolver.insert(downloadsCollection, newFileValues)\r\n    }\r\n","title":"Android - how to save document files to Documents folder with SAF (Java)","body":"<p>when u want to insert a new document, the preferred way is to Use DownloadsFolder, on <code>api Q+(api 29)</code> there's a content provider that makes it easy .</p>\n<p>this code will be compatible with all android version.</p>\n<blockquote>\n<p>Hint below android 10 u can use Document Folder <em><strong>for this solution</strong></em> but\nthe recommended is to use <code>Downloads Folder</code>.</p>\n</blockquote>\n<p>this is kotlin code convert it to java</p>\n<p><strong>if this helped pls upvote</strong></p>\n<pre><code>fun example() {\n      var filename = &quot;yourFileName_${System.currentTimeMillis()}.pdf&quot;\n\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.Q) {\n            val uri = MediaStoreUtils.createDownloadUri(context, filename)\n\n              if(uri == null){\n                 return\n               }\n\n           try {\n                context.contentResolver.openOutputStream(uri, &quot;w&quot;)?.use { outputStream -&gt;\n                   //write your file InputStream to the OutputStream\n                }\n\n            } catch (e: IOException) {\n                Log.e(TAG, e.printStackTrace().toString())\n            }\n        } else {\n            val downloadsFolder =\n                Environment.getExternalStoragePublicDirectory(DIRECTORY_DOWNLOADS)\n\n            //re-generate the filename until we can confirm its uniqueness\n            while (File(downloadsFolder, filename).exists()) {\n                filename = generateFilename(type.extension)\n            }\n\n            val file = File(downloadsFolder, filename)\n\n            try {\n                file.outputStream().use { outputStream -&gt;\n                   //write your file InputStream to the OutputStream\n                }\n            } catch (e: IOException) {\n                Log.e(TAG, e.printStackTrace().toString())\n            }\n        }\n}\n\n\n@RequiresApi(Build.VERSION_CODES.Q)\nfun createDownloadUri(context: Context, filename: String): Uri? {\n    val downloadsCollection =\n        MediaStore.Downloads.getContentUri(MediaStore.VOLUME_EXTERNAL_PRIMARY)\n\n        val newFileValues = ContentValues().apply {\n            put(MediaStore.Downloads.DISPLAY_NAME, filename)\n        }\n\n        // is better to execute off the main thread\n        // run on Background Thread (IO)\n        return context.contentResolver.insert(downloadsCollection, newFileValues)\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1433045,"reputation":794,"user_id":1354997,"accept_rate":34,"display_name":"Pink Jazz"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698183928,"creation_date":1698183928,"answer_id":77355554,"question_id":77354190,"body_markdown":"I figured it out.\r\n\r\nInstead of using the `File` class I can use `DocumentFile` and do this:\r\n\r\n    final DocumentFile csvFile = pickedDir.createFile(&quot;text/csv&quot;, baseFileName);\r\n    if (csvFile != null) {\r\n        out = context.getContentResolver().openOutputStream(csvFile.getUri());\r\n    }\r\n\r\nDid not have to use the PickiT library to do this. For the PDF file, I use MIME type `application/pdf`.\r\n","title":"Android - how to save document files to Documents folder with SAF (Java)","body":"<p>I figured it out.</p>\n<p>Instead of using the <code>File</code> class I can use <code>DocumentFile</code> and do this:</p>\n<pre><code>final DocumentFile csvFile = pickedDir.createFile(&quot;text/csv&quot;, baseFileName);\nif (csvFile != null) {\n    out = context.getContentResolver().openOutputStream(csvFile.getUri());\n}\n</code></pre>\n<p>Did not have to use the PickiT library to do this. For the PDF file, I use MIME type <code>application/pdf</code>.</p>\n"}],"owner":{"account_id":1433045,"reputation":794,"user_id":1354997,"accept_rate":34,"display_name":"Pink Jazz"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":57,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1698183928,"creation_date":1698168348,"question_id":77354190,"body_markdown":"I am having trouble with an issue saving a PDF and CSV file to the Documents folder on Android. On two devices it seems to work (Samsung Galaxy Tab S8+ and Teclast M40 Plus), but on one device (Lenovo M10 Plus FHD 2nd Gen) it does not.\r\n\r\nI tried various solutions and libraries and **none seem to work**. None of them seem to be able to get the file path from the URI. \r\n\r\nThis is my attempt usng the pickiT library;\r\n\r\n    public void onActivityResult(int requestCode, int resultCode, Intent data) {\r\n        super.onActivityResult(requestCode, resultCode, data);\r\n\r\n        if (resultCode != RESULT_OK) {\r\n            Log.d(&quot;GraphActivity&quot;, &quot;Result OK&quot;);\r\n            return;\r\n        }\r\n        Uri treeUri = data.getData();\r\n        DocumentFile pickedDir = DocumentFile.fromTreeUri(this, treeUri);\r\n        grantUriPermission(getPackageName(), treeUri, Intent.FLAG_GRANT_READ_URI_PERMISSION | Intent.FLAG_GRANT_WRITE_URI_PERMISSION);\r\n        Uri docUri = DocumentsContract.buildDocumentUriUsingTree(treeUri,\r\n                DocumentsContract.getTreeDocumentId(treeUri));\r\n        String path = null;\r\n        int version = Build.VERSION.SDK_INT;\r\n            pickiT.getPath(docUri, version);\r\n            // Uri is from unknown provider\r\n    }\r\n\r\n    @Override\r\n    public void PickiTonCompleteListener(String path, boolean wasDriveFile, boolean wasUnknownProvider, boolean wasSuccessful, String Reason) {\r\n        Log.d(&quot;GraphActivity&quot;, &quot;Path is not null&quot;);\r\n        folder = new File(path);\r\n\r\n        String timestamp = new SimpleDateFormat(&quot;MM_dd_yy_hh.mm&quot;, Locale.getDefault()).format(new Date());\r\n\r\n        baseFilename = name + &quot; &quot; + timestamp;\r\n        filename = &quot;/&quot; + folder.toString() + &quot;/&quot; + baseFilename + &quot;.csv&quot;;\r\n\r\n        if (filename == null) {\r\n            Log.d(&quot;GraphAcitivty&quot;, &quot;Filename is null&quot;);\r\n        } else {\r\n            Log.d(&quot;GraphAcitivty&quot;, &quot;Filename is not null&quot;);\r\n        }\r\n\r\n        showSaveDialog();\r\n    }\r\n\r\nApparently `PickiTonCompleteListener` isn&#39;t even being called based on my print statements.  My activity does implement `PickiTCallbacks` but for some reason the callback isn&#39;t working.\r\n\r\nI wonder, is there any solution out there that works?","title":"Android - how to save document files to Documents folder with SAF (Java)","body":"<p>I am having trouble with an issue saving a PDF and CSV file to the Documents folder on Android. On two devices it seems to work (Samsung Galaxy Tab S8+ and Teclast M40 Plus), but on one device (Lenovo M10 Plus FHD 2nd Gen) it does not.</p>\n<p>I tried various solutions and libraries and <strong>none seem to work</strong>. None of them seem to be able to get the file path from the URI.</p>\n<p>This is my attempt usng the pickiT library;</p>\n<pre><code>public void onActivityResult(int requestCode, int resultCode, Intent data) {\n    super.onActivityResult(requestCode, resultCode, data);\n\n    if (resultCode != RESULT_OK) {\n        Log.d(&quot;GraphActivity&quot;, &quot;Result OK&quot;);\n        return;\n    }\n    Uri treeUri = data.getData();\n    DocumentFile pickedDir = DocumentFile.fromTreeUri(this, treeUri);\n    grantUriPermission(getPackageName(), treeUri, Intent.FLAG_GRANT_READ_URI_PERMISSION | Intent.FLAG_GRANT_WRITE_URI_PERMISSION);\n    Uri docUri = DocumentsContract.buildDocumentUriUsingTree(treeUri,\n            DocumentsContract.getTreeDocumentId(treeUri));\n    String path = null;\n    int version = Build.VERSION.SDK_INT;\n        pickiT.getPath(docUri, version);\n        // Uri is from unknown provider\n}\n\n@Override\npublic void PickiTonCompleteListener(String path, boolean wasDriveFile, boolean wasUnknownProvider, boolean wasSuccessful, String Reason) {\n    Log.d(&quot;GraphActivity&quot;, &quot;Path is not null&quot;);\n    folder = new File(path);\n\n    String timestamp = new SimpleDateFormat(&quot;MM_dd_yy_hh.mm&quot;, Locale.getDefault()).format(new Date());\n\n    baseFilename = name + &quot; &quot; + timestamp;\n    filename = &quot;/&quot; + folder.toString() + &quot;/&quot; + baseFilename + &quot;.csv&quot;;\n\n    if (filename == null) {\n        Log.d(&quot;GraphAcitivty&quot;, &quot;Filename is null&quot;);\n    } else {\n        Log.d(&quot;GraphAcitivty&quot;, &quot;Filename is not null&quot;);\n    }\n\n    showSaveDialog();\n}\n</code></pre>\n<p>Apparently <code>PickiTonCompleteListener</code> isn't even being called based on my print statements.  My activity does implement <code>PickiTCallbacks</code> but for some reason the callback isn't working.</p>\n<p>I wonder, is there any solution out there that works?</p>\n"},{"tags":["java","unit-testing","junit"],"comments":[{"owner":{"account_id":4905966,"reputation":1880,"user_id":3952702,"accept_rate":71,"display_name":"SME_Dev"},"score":1,"creation_date":1484563353,"post_id":41674408,"comment_id":70546312,"body_markdown":"Instead of `Assert.equals()`, `TestCase.equals()` does a good job at displaying the error position of a mismatching String. Just edit your import statements accordingly.","body":"Instead of <code>Assert.equals()</code>, <code>TestCase.equals()</code> does a good job at displaying the error position of a mismatching String. Just edit your import statements accordingly."},{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":1,"creation_date":1484564076,"post_id":41674408,"comment_id":70546726,"body_markdown":"Try comparing the length of your strings. It might be `\\r\\n` as some have suggested, or some other invisible discrepancy.","body":"Try comparing the length of your strings. It might be <code>\\r\\n</code> as some have suggested, or some other invisible discrepancy."}],"answers":[{"tags":[],"owner":{"account_id":10042576,"reputation":41,"user_id":7424972,"display_name":"Lieven Libberecht"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1484563268,"creation_date":1484563268,"answer_id":41674482,"question_id":41674408,"body_markdown":"Try using \\r\\n instead of \\n.\r\n\r\n    assertEquals(&quot;Quack\\r\\nI&#39;m flying!!\\r\\nI can&#39;t fly\\r\\nI&#39;m flying with a rocket&quot;, outContent.toString().trim());\r\n\r\n","title":"Java: test System output including &quot;new lines&quot; with assertEquals","body":"<p>Try using \\r\\n instead of \\n.</p>\n\n<pre><code>assertEquals(\"Quack\\r\\nI'm flying!!\\r\\nI can't fly\\r\\nI'm flying with a rocket\", outContent.toString().trim());\n</code></pre>\n"},{"comments":[{"owner":{"account_id":9082275,"reputation":2128,"user_id":6761698,"accept_rate":100,"display_name":"Wouter Vanherck"},"score":1,"creation_date":1484564070,"post_id":41674523,"comment_id":70546718,"body_markdown":"I&#39;m using Eclipse in Windows 10. Solved it","body":"I&#39;m using Eclipse in Windows 10. Solved it"}],"tags":[],"owner":{"account_id":2476506,"reputation":13,"user_id":4662382,"display_name":"rouce"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1484563416,"creation_date":1484563416,"answer_id":41674523,"question_id":41674408,"body_markdown":"Could it be, that you are on a Windows system and need to check for `\\r\\n` instead of just `\\n`","title":"Java: test System output including &quot;new lines&quot; with assertEquals","body":"<p>Could it be, that you are on a Windows system and need to check for <code>\\r\\n</code> instead of just <code>\\n</code></p>\n"},{"tags":[],"owner":{"account_id":947184,"reputation":49004,"user_id":974186,"accept_rate":79,"display_name":"Ren&#233; Link"},"comment_count":0,"down_vote_count":1,"up_vote_count":17,"is_accepted":true,"score":16,"last_activity_date":1484570525,"creation_date":1484570525,"answer_id":41676677,"question_id":41674408,"body_markdown":"In addition to the other answers if you are looking for a platform-independent way...\r\n\r\nA quick platform-independent solution can be to replace the line separators\r\n\r\n    String expected = &quot;Quack\\nI&#39;m flying!!\\nI can&#39;t fly\\nI&#39;m flying with a rocket&quot;\r\n                           .replaceAll(&quot;\\\\n|\\\\r\\\\n&quot;, System.getProperty(&quot;line.separator&quot;));\r\n    assertEquals(expected, outContent.toString().trim());\r\n\r\nor using a `PrintWriter` to build the expected string.\r\n\r\n    StringWriter expectedStringWriter = new StringWriter();\r\n    PrintWriter printWriter = new PrintWriter(expectedStringWriter);\r\n\r\n    printWriter.println(&quot;Quack&quot;);\r\n    printWriter.println(&quot;I&#39;m flying!!&quot;);\r\n    printWriter.println(&quot;I can&#39;t fly&quot;);\r\n    printWriter.println(&quot;I&#39;m flying with a rocket&quot;);\r\n    printWriter.close();\r\n\r\n    String expected = expectedStringWriter.toString();\r\n    assertEquals(expected, outContent.toString());\r\n\r\nor create an own assert class to re-use it\r\n\r\n    class MyAssert {\r\n        \r\n        public static void assertLinesEqual(String expectedString, String actualString){\r\n            BufferedReader expectedLinesReader = new BufferedReader(new StringReader(expectedString));\r\n            BufferedReader actualLinesReader = new BufferedReader(new StringReader(actualString));\r\n            \r\n            try {\r\n                int lineNumber = 0;\r\n                \r\n                String actualLine;\r\n                while((actualLine = actualLinesReader.readLine()) != null){\r\n                    String expectedLine = expectedLinesReader.readLine();\r\n                    Assert.assertEquals(&quot;Line &quot; + lineNumber, expectedLine, actualLine);\r\n                    lineNumber++;\r\n                }\r\n\r\n                if(expectedLinesReader.readLine() != null){\r\n                    Assert.fail(&quot;Actual string does not contain all expected lines&quot;);\r\n                }\r\n            } catch (IOException e) {\r\n                Assert.fail(e.getMessage());\r\n            } finally {\r\n                try {\r\n                    expectedLinesReader.close();\r\n                } catch (IOException e) {\r\n                    Assert.fail(e.getMessage());\r\n                }\r\n                try {\r\n                    actualLinesReader.close();\r\n                } catch (IOException e) {\r\n                    Assert.fail(e.getMessage());\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\nThen you can give a better problem description if the test fails. E.g.\r\n\r\n    MyAssert.assertLinesEqual(\r\n             &quot;Quack\\nI&#39;m flying!!\\nI can not fly\\nI&#39;m flying with a rocket\\n&quot;,\r\n             outContent.toString());\r\n\r\nwill output\r\n\r\n    org.junit.ComparisonFailure: Line 2 \r\n    Expected :I can not fly\r\n    Actual   :I can&#39;t fly\r\n","title":"Java: test System output including &quot;new lines&quot; with assertEquals","body":"<p>In addition to the other answers if you are looking for a platform-independent way...</p>\n\n<p>A quick platform-independent solution can be to replace the line separators</p>\n\n<pre><code>String expected = \"Quack\\nI'm flying!!\\nI can't fly\\nI'm flying with a rocket\"\n                       .replaceAll(\"\\\\n|\\\\r\\\\n\", System.getProperty(\"line.separator\"));\nassertEquals(expected, outContent.toString().trim());\n</code></pre>\n\n<p>or using a <code>PrintWriter</code> to build the expected string.</p>\n\n<pre><code>StringWriter expectedStringWriter = new StringWriter();\nPrintWriter printWriter = new PrintWriter(expectedStringWriter);\n\nprintWriter.println(\"Quack\");\nprintWriter.println(\"I'm flying!!\");\nprintWriter.println(\"I can't fly\");\nprintWriter.println(\"I'm flying with a rocket\");\nprintWriter.close();\n\nString expected = expectedStringWriter.toString();\nassertEquals(expected, outContent.toString());\n</code></pre>\n\n<p>or create an own assert class to re-use it</p>\n\n<pre><code>class MyAssert {\n\n    public static void assertLinesEqual(String expectedString, String actualString){\n        BufferedReader expectedLinesReader = new BufferedReader(new StringReader(expectedString));\n        BufferedReader actualLinesReader = new BufferedReader(new StringReader(actualString));\n\n        try {\n            int lineNumber = 0;\n\n            String actualLine;\n            while((actualLine = actualLinesReader.readLine()) != null){\n                String expectedLine = expectedLinesReader.readLine();\n                Assert.assertEquals(\"Line \" + lineNumber, expectedLine, actualLine);\n                lineNumber++;\n            }\n\n            if(expectedLinesReader.readLine() != null){\n                Assert.fail(\"Actual string does not contain all expected lines\");\n            }\n        } catch (IOException e) {\n            Assert.fail(e.getMessage());\n        } finally {\n            try {\n                expectedLinesReader.close();\n            } catch (IOException e) {\n                Assert.fail(e.getMessage());\n            }\n            try {\n                actualLinesReader.close();\n            } catch (IOException e) {\n                Assert.fail(e.getMessage());\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>Then you can give a better problem description if the test fails. E.g.</p>\n\n<pre><code>MyAssert.assertLinesEqual(\n         \"Quack\\nI'm flying!!\\nI can not fly\\nI'm flying with a rocket\\n\",\n         outContent.toString());\n</code></pre>\n\n<p>will output</p>\n\n<pre><code>org.junit.ComparisonFailure: Line 2 \nExpected :I can not fly\nActual   :I can't fly\n</code></pre>\n"},{"comments":[{"owner":{"display_name":"user4209634"},"score":1,"creation_date":1500637103,"post_id":41679852,"comment_id":77438885,"body_markdown":"what if you want to test the output because you are developping an app that runs on the command line ?","body":"what if you want to test the output because you are developping an app that runs on the command line ?"},{"owner":{"account_id":1663234,"reputation":138406,"user_id":1531124,"accept_rate":96,"display_name":"GhostCat"},"score":0,"creation_date":1500637275,"post_id":41679852,"comment_id":77438989,"body_markdown":"Simple: then you have a component that **creates** messages. That you test. Then you have a component responsible for taking messages and writing them somewhere, for example to stdout. That you test. And again - no need to test the *layout* of your messages by reading from stdout! Think &quot;segregation of concerns&quot; and &quot;single responsibility principle&quot;!","body":"Simple: then you have a component that <b>creates</b> messages. That you test. Then you have a component responsible for taking messages and writing them somewhere, for example to stdout. That you test. And again - no need to test the <i>layout</i> of your messages by reading from stdout! Think &quot;segregation of concerns&quot; and &quot;single responsibility principle&quot;!"},{"owner":{"display_name":"user4209634"},"score":0,"creation_date":1500638432,"post_id":41679852,"comment_id":77439816,"body_markdown":"this is fine for unit testing but how do you do an integration test that proves the following situation:  \n- print to an output buffer some text, says 10 lines\n- print some escape codes like &quot;move line up&quot; + &quot;clear line&quot; 4 times\n- print 3 other lines\nhow do you assert that the final output contains the text of the 9 final lines (10 + - 4 + 3) ?","body":"this is fine for unit testing but how do you do an integration test that proves the following situation:   - print to an output buffer some text, says 10 lines - print some escape codes like &quot;move line up&quot; + &quot;clear line&quot; 4 times - print 3 other lines how do you assert that the final output contains the text of the 9 final lines (10 + - 4 + 3) ?"},{"owner":{"account_id":1663234,"reputation":138406,"user_id":1531124,"accept_rate":96,"display_name":"GhostCat"},"score":0,"creation_date":1500641208,"post_id":41679852,"comment_id":77441951,"body_markdown":"Interesting point. I guess I would try to get a &quot;mock&quot; representing the thing that is written to. Something that records exactly what comes in.","body":"Interesting point. I guess I would try to get a &quot;mock&quot; representing the thing that is written to. Something that records exactly what comes in."}],"tags":[],"owner":{"account_id":1663234,"reputation":138406,"user_id":1531124,"accept_rate":96,"display_name":"GhostCat"},"comment_count":4,"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1484580928,"creation_date":1484580928,"answer_id":41679852,"question_id":41674408,"body_markdown":"So far **all** the other answers are technically correct; but still they are don&#39;t mention one core thing: it is simply bad practice to *capture* stdout/stderr and then do exact string matching; **assuming** that your class writes there. \r\n\r\nEven more when you are testing **multiple** method calls, and expect that some *final* output &quot;proves&quot; that all the methods were called, and so on.\r\n\r\nSo, yes, theoretically you can do things this way (for training/learning purposes); but the &quot;pattern&quot; that you are using here is simply spoken &quot;bad practice&quot;. What happens when you later decide to remove those print statements (because, well, production code **doesn&#39;t do** print statements). Then all your tests render worthless. Or when some other user changes one character in the strings going to stdout? \r\n\r\nThus: the real answer is to step back and consider what the real &quot;side effects&quot; could be that these method calls will cause; and look for better ways to verify them. ","title":"Java: test System output including &quot;new lines&quot; with assertEquals","body":"<p>So far <strong>all</strong> the other answers are technically correct; but still they are don't mention one core thing: it is simply bad practice to <em>capture</em> stdout/stderr and then do exact string matching; <strong>assuming</strong> that your class writes there. </p>\n\n<p>Even more when you are testing <strong>multiple</strong> method calls, and expect that some <em>final</em> output \"proves\" that all the methods were called, and so on.</p>\n\n<p>So, yes, theoretically you can do things this way (for training/learning purposes); but the \"pattern\" that you are using here is simply spoken \"bad practice\". What happens when you later decide to remove those print statements (because, well, production code <strong>doesn't do</strong> print statements). Then all your tests render worthless. Or when some other user changes one character in the strings going to stdout? </p>\n\n<p>Thus: the real answer is to step back and consider what the real \"side effects\" could be that these method calls will cause; and look for better ways to verify them. </p>\n"}],"owner":{"account_id":9082275,"reputation":2128,"user_id":6761698,"accept_rate":100,"display_name":"Wouter Vanherck"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":19948,"favorite_count":0,"down_vote_count":0,"up_vote_count":16,"accepted_answer_id":41676677,"answer_count":4,"score":16,"last_activity_date":1698183850,"creation_date":1484562997,"question_id":41674408,"body_markdown":"I&#39;m currently writing a Unit Test for the Strategy Design Pattern. I&#39;m comparing the System output with a string in the assertEquals method.The output looks the same but my test keeps failing.. . I&#39;m thinking that I&#39;m forgetting something to do with new lines or tabs?\r\n\r\nMy Unit Test:\r\n\r\n    import static org.junit.Assert.*;\r\n    \r\n    import java.io.ByteArrayOutputStream;\r\n    import java.io.PrintStream;\r\n    \r\n    import org.junit.After;\r\n    import org.junit.Before;\r\n    import org.junit.Test;\r\n    \r\n    public class MiniDuck1Test {\r\n    \t\r\n    \tprivate final ByteArrayOutputStream outContent = new ByteArrayOutputStream();\r\n    \tprivate final ByteArrayOutputStream errContent = new ByteArrayOutputStream();\r\n    \r\n    \t@Before\r\n    \tpublic void setUpStreams() {\r\n    \t    System.setOut(new PrintStream(outContent));\r\n    \t    System.setErr(new PrintStream(errContent));\r\n    \t}\r\n    \r\n    \t@After\r\n    \tpublic void cleanUpStreams() {\r\n    \t    System.setOut(null);\r\n    \t    System.setErr(null);\r\n    \t}\r\n    \r\n    \t@Test\r\n    \tpublic void testDuck1() {\t\t\r\n    \t\tDuck mallard = new MallardDuck();\r\n    \t\tmallard.performQuack();\r\n    \t\tmallard.performFly();\r\n       \r\n    \t\tDuck model = new ModelDuck();\r\n    \t\tmodel.performFly();\r\n    \t\tmodel.setFlyBehavior(new FlyRocketPowered());\r\n    \t\tmodel.performFly();\r\n    \t\t\r\n    \t\tassertEquals(&quot;Quack\\nI&#39;m flying!!\\nI can&#39;t fly\\nI&#39;m flying with a rocket&quot;, outContent.toString().trim());\r\n    \t}\r\n    }\r\n\r\nOutput (second and third line appear red):\r\n\r\n    Quack\r\n    I&#39;m flying!!\r\n    I can&#39;t fly\r\n    I&#39;m flying with a rocket\r\n\r\n**Edit:**\r\n\r\nThe quickest solution seemed to be adding an &quot;\\r&quot; in front of my &quot;\\n&quot;. Multiple answers informed me that this needs to be done for Windows. After applying this my assertEquals looked like:\r\n\r\n    assertEquals(&quot;Quack\\r\\nI&#39;m flying!!\\r\\nI can&#39;t fly\\r\\nI&#39;m flying with a rocket&quot;, outContent.toString().trim());\r\n\r\nAlso: I forgot to mention that most of the code came from the book: &quot;Head First Design Patterns&quot; by Eric Freeman, Elisabeth Robson, Bert Bates and Kathy Sierra.","title":"Java: test System output including &quot;new lines&quot; with assertEquals","body":"<p>I'm currently writing a Unit Test for the Strategy Design Pattern. I'm comparing the System output with a string in the assertEquals method.The output looks the same but my test keeps failing.. . I'm thinking that I'm forgetting something to do with new lines or tabs?</p>\n\n<p>My Unit Test:</p>\n\n<pre><code>import static org.junit.Assert.*;\n\nimport java.io.ByteArrayOutputStream;\nimport java.io.PrintStream;\n\nimport org.junit.After;\nimport org.junit.Before;\nimport org.junit.Test;\n\npublic class MiniDuck1Test {\n\n    private final ByteArrayOutputStream outContent = new ByteArrayOutputStream();\n    private final ByteArrayOutputStream errContent = new ByteArrayOutputStream();\n\n    @Before\n    public void setUpStreams() {\n        System.setOut(new PrintStream(outContent));\n        System.setErr(new PrintStream(errContent));\n    }\n\n    @After\n    public void cleanUpStreams() {\n        System.setOut(null);\n        System.setErr(null);\n    }\n\n    @Test\n    public void testDuck1() {       \n        Duck mallard = new MallardDuck();\n        mallard.performQuack();\n        mallard.performFly();\n\n        Duck model = new ModelDuck();\n        model.performFly();\n        model.setFlyBehavior(new FlyRocketPowered());\n        model.performFly();\n\n        assertEquals(\"Quack\\nI'm flying!!\\nI can't fly\\nI'm flying with a rocket\", outContent.toString().trim());\n    }\n}\n</code></pre>\n\n<p>Output (second and third line appear red):</p>\n\n<pre><code>Quack\nI'm flying!!\nI can't fly\nI'm flying with a rocket\n</code></pre>\n\n<p><strong>Edit:</strong></p>\n\n<p>The quickest solution seemed to be adding an \"\\r\" in front of my \"\\n\". Multiple answers informed me that this needs to be done for Windows. After applying this my assertEquals looked like:</p>\n\n<pre><code>assertEquals(\"Quack\\r\\nI'm flying!!\\r\\nI can't fly\\r\\nI'm flying with a rocket\", outContent.toString().trim());\n</code></pre>\n\n<p>Also: I forgot to mention that most of the code came from the book: \"Head First Design Patterns\" by Eric Freeman, Elisabeth Robson, Bert Bates and Kathy Sierra.</p>\n"},{"tags":["java","eclipse","selenium","automation","testng"],"comments":[{"owner":{"account_id":6074897,"reputation":2892,"user_id":4742570,"display_name":"jsheeran"},"score":0,"creation_date":1508139560,"post_id":46765098,"comment_id":80475550,"body_markdown":"You shouldn&#39;t need a `main()` method for your test code, and my guess is that trying to use one is bypassing TestNG entirely.","body":"You shouldn&#39;t need a <code>main()</code> method for your test code, and my guess is that trying to use one is bypassing TestNG entirely."},{"owner":{"account_id":3350095,"reputation":1616,"user_id":2814308,"accept_rate":87,"display_name":"SantiBailors"},"score":0,"creation_date":1508139637,"post_id":46765098,"comment_id":80475598,"body_markdown":"I&#39;m not sure a `@Test` method can have arguments. Anyway, when your test method would run, from where would it get the value for `args`? Added: they can but maybe you are not following the rules for that, http://testng.org/doc/documentation-main.html#test-methods (see 5.6).","body":"I&#39;m not sure a <code>@Test</code> method can have arguments. Anyway, when your test method would run, from where would it get the value for <code>args</code>? Added: they can but maybe you are not following the rules for that, <a href=\"http://testng.org/doc/documentation-main.html#test-methods\" rel=\"nofollow noreferrer\">testng.org/doc/documentation-main.html#test-methods</a> (see 5.6)."},{"owner":{"account_id":9862817,"reputation":5309,"user_id":7305183,"display_name":"Murthi"},"score":0,"creation_date":1508155440,"post_id":46765098,"comment_id":80484945,"body_markdown":"remove String array argument from main method and try. it may works","body":"remove String array argument from main method and try. it may works"}],"answers":[{"tags":[],"owner":{"account_id":6892359,"reputation":1,"user_id":5295357,"display_name":"Shefali Gupta"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1508141951,"creation_date":1508139764,"answer_id":46765246,"question_id":46765098,"body_markdown":" 1. Check whether Eclipse plugin for `TestNG` is present on your machine.\r\n 2. If not install latest from Help =&gt; Eclipse Marketplace.\r\n 3. Restart eclipse.\r\n","title":"TestNG not running test on eclipse","body":"<ol>\n<li>Check whether Eclipse plugin for <code>TestNG</code> is present on your machine.</li>\n<li>If not install latest from Help => Eclipse Marketplace.</li>\n<li>Restart eclipse.</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":10621254,"reputation":2629,"user_id":7822301,"accept_rate":56,"display_name":"Zakaria Shahed"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1508140495,"creation_date":1508140495,"answer_id":46765432,"question_id":46765098,"body_markdown":"I am Posted here a demo template for Your testng.You just need to take a class and declear webdriver. `@BeforeMethod` will execute before start any `@Test` then  `@AfterMethod`  Hope it will help you.\r\n\r\n \r\n\r\n    package stackoverflow;\r\n        import org.openqa.selenium.WebDriver;\r\n        import org.openqa.selenium.chrome.ChromeDriver;\r\n        import org.testng.annotations.*;\r\n        \r\n        public class DemoTestNGClass {\r\n            public static WebDriver driver;\r\n            @BeforeMethod\r\n            public void setUp1() throws Exception {\r\n        \r\n                driver= new ChromeDriver();\r\n        \r\n        \r\n            }\r\n            @Test\r\n            public void Homepage() throws InterruptedException {\r\n        //Your operation\r\n            }\r\n        \r\n            @Test\r\n            public void ListingPage() throws InterruptedException {\r\n        \r\n        //Your operation\r\n            }\r\n        \r\n            @AfterMethod\r\n            public void afterresult(){\r\n                driver.close();\r\n            }\r\n        \r\n        }\r\n\r\n\r\n\r\n\r\n","title":"TestNG not running test on eclipse","body":"<p>I am Posted here a demo template for Your testng.You just need to take a class and declear webdriver. <code>@BeforeMethod</code> will execute before start any <code>@Test</code> then  <code>@AfterMethod</code>  Hope it will help you.</p>\n\n<pre><code>package stackoverflow;\n    import org.openqa.selenium.WebDriver;\n    import org.openqa.selenium.chrome.ChromeDriver;\n    import org.testng.annotations.*;\n\n    public class DemoTestNGClass {\n        public static WebDriver driver;\n        @BeforeMethod\n        public void setUp1() throws Exception {\n\n            driver= new ChromeDriver();\n\n\n        }\n        @Test\n        public void Homepage() throws InterruptedException {\n    //Your operation\n        }\n\n        @Test\n        public void ListingPage() throws InterruptedException {\n\n    //Your operation\n        }\n\n        @AfterMethod\n        public void afterresult(){\n            driver.close();\n        }\n\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":29746218,"reputation":1,"user_id":22797217,"display_name":"Vitor Sartorelli"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698183678,"creation_date":1698183678,"answer_id":77355535,"question_id":46765098,"body_markdown":"I had this issue earlier.\r\n\r\nI just changed from\r\n\r\n    import org.junit.Test;\r\n\r\nto \r\n\r\n    import org.testng.annotations.Test;\r\n\r\nAnd it worked.","title":"TestNG not running test on eclipse","body":"<p>I had this issue earlier.</p>\n<p>I just changed from</p>\n<pre><code>import org.junit.Test;\n</code></pre>\n<p>to</p>\n<pre><code>import org.testng.annotations.Test;\n</code></pre>\n<p>And it worked.</p>\n"}],"owner":{"account_id":7282310,"reputation":99,"user_id":5551620,"accept_rate":43,"display_name":"Pikolo"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2939,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":46765432,"answer_count":3,"score":0,"last_activity_date":1698183678,"creation_date":1508139139,"question_id":46765098,"body_markdown":"Any idea why TestNG is not running my test?\r\nthis is the class code(java):\r\n\r\n    public class main {\r\n\t@Test\r\n\tpublic static void main(String[] args) throws AWTException, InterruptedException \r\n\r\nthis is the path on eclipse:\r\n[enter image description here][1]\r\n\r\nand this is the XML file:\r\n\r\n        &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;!DOCTYPE suite SYSTEM &quot;http://testng.org/testng-1.0.dtd&quot;&gt;\r\n    &lt;suite name=&quot;Suite&quot;&gt;\r\n      &lt;test name=&quot;Test&quot;&gt;\r\n    \t&lt;classes&gt;\r\n    \t\t&lt;class name=&quot;test.main&quot;/&gt;\r\n    \t&lt;/classes&gt;\r\n      &lt;/test&gt; &lt;!-- Test --&gt;\r\n    &lt;/suite&gt; &lt;!-- Suite --&gt;\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/0oIWq.png\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","title":"TestNG not running test on eclipse","body":"<p>Any idea why TestNG is not running my test?\nthis is the class code(java):</p>\n\n<pre><code>public class main {\n@Test\npublic static void main(String[] args) throws AWTException, InterruptedException \n</code></pre>\n\n<p>this is the path on eclipse:\n<a href=\"https://i.stack.imgur.com/0oIWq.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n\n<p>and this is the XML file:</p>\n\n<pre><code>    &lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;!DOCTYPE suite SYSTEM \"http://testng.org/testng-1.0.dtd\"&gt;\n&lt;suite name=\"Suite\"&gt;\n  &lt;test name=\"Test\"&gt;\n    &lt;classes&gt;\n        &lt;class name=\"test.main\"/&gt;\n    &lt;/classes&gt;\n  &lt;/test&gt; &lt;!-- Test --&gt;\n&lt;/suite&gt; &lt;!-- Suite --&gt;\n</code></pre>\n"},{"tags":["java","string","junit"],"comments":[{"owner":{"account_id":15586524,"reputation":1970,"user_id":11244881,"display_name":"SKumar"},"score":1,"creation_date":1596311030,"post_id":63209228,"comment_id":111773668,"body_markdown":"Can you try printing total length of both strings. If you are using windows, I feel this is happening due to \\r character. Can you try adding \\r\\n instead of \\n in your expected string ?","body":"Can you try printing total length of both strings. If you are using windows, I feel this is happening due to \\r character. Can you try adding \\r\\n instead of \\n in your expected string ?"},{"owner":{"account_id":11508061,"reputation":61,"user_id":8433734,"display_name":"Guillermo Siles Bonilla"},"score":0,"creation_date":1596311926,"post_id":63209228,"comment_id":111773912,"body_markdown":"@ArvindKumarAvinash I am using Eclipse.","body":"@ArvindKumarAvinash I am using Eclipse."},{"owner":{"account_id":11508061,"reputation":61,"user_id":8433734,"display_name":"Guillermo Siles Bonilla"},"score":0,"creation_date":1596311983,"post_id":63209228,"comment_id":111773926,"body_markdown":"@SKumar I also tried assertEquals(consoleOutput.length(), out.toString().length()); and no equals, first is 65 next 69. But you are right with \\r, adding it to every \\n solves the problem. If you want to make an answer explaining why this happens I will mark it as the solution :)","body":"@SKumar I also tried assertEquals(consoleOutput.length(), out.toString().length()); and no equals, first is 65 next 69. But you are right with \\r, adding it to every \\n solves the problem. If you want to make an answer explaining why this happens I will mark it as the solution :)"}],"answers":[{"tags":[],"owner":{"account_id":15586524,"reputation":1970,"user_id":11244881,"display_name":"SKumar"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1596312767,"creation_date":1596312767,"answer_id":63209625,"question_id":63209228,"body_markdown":"Line seperators are platform dependant. For example, For Windows, Line Separator means \\r\\n \r\n\r\n    \\r - carriage return\r\n    \\n - new line\r\n\r\nThe problem is that the expected String has \\n only while when the String gets generated using Scanner, it has \\r\\n. Due to this both strings were not equal.\r\n\r\nTo solve this issue, you can add platform independent line separator through\r\n\r\n    System.lineSeparator()\r\n\r\nUsing this will ensure, the code doesn&#39;t break in other operating systems.","title":"Practicing JUnit strange behavior comparing strings","body":"<p>Line seperators are platform dependant. For example, For Windows, Line Separator means \\r\\n</p>\n<pre><code>\\r - carriage return\n\\n - new line\n</code></pre>\n<p>The problem is that the expected String has \\n only while when the String gets generated using Scanner, it has \\r\\n. Due to this both strings were not equal.</p>\n<p>To solve this issue, you can add platform independent line separator through</p>\n<pre><code>System.lineSeparator()\n</code></pre>\n<p>Using this will ensure, the code doesn't break in other operating systems.</p>\n"}],"owner":{"account_id":11508061,"reputation":61,"user_id":8433734,"display_name":"Guillermo Siles Bonilla"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":141,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":63209625,"answer_count":1,"score":0,"last_activity_date":1698183605,"creation_date":1596309950,"question_id":63209228,"body_markdown":"I have been trying JUnit for the first time and I am facing a strange error:\r\n\r\nTests on method are okay, but when I tried my first test in the main method, it fails without reason. This is the code for the test:\r\n\r\n```\r\n    @Test\r\n\tpublic void MyTestMain1(){\r\n\t\tString input = &quot;1\\n2\\n2\\n&quot;;\t\t\r\n\t\t\r\n\t\tByteArrayInputStream in = new ByteArrayInputStream(input.getBytes());\r\n\t\tSystem.setIn(in);\r\n\t\t\r\n\t\tByteArrayOutputStream out = new ByteArrayOutputStream();\r\n\t\tSystem.setOut(new PrintStream(out));\r\n\t\t\r\n\t\tString [] args = {};\r\n\t\tDemo.main(args);\r\n\t\t\r\n\t\t// expected output:\r\n\t\tString consoleOutput = &quot;Enter side 1: \\n&quot;;\r\n\t\tconsoleOutput += &quot;Enter side 2: \\n&quot;;\r\n\t\tconsoleOutput += &quot;Enter side 3: \\n&quot;;\r\n\t\tconsoleOutput += &quot;This is a triangle.\\n&quot;;\r\n\t\t\r\n\t\tassertEquals(consoleOutput, out.toString());\r\n\t}\r\n```\r\n\r\nAnd here the code of my main class:\r\n\r\n```\r\npublic class Demo {\r\n\r\n    public static void main(String[] args) {\r\n        // Reading from System.in\r\n        Scanner reader = new Scanner(System.in);  \r\n        \r\n        System.out.println(&quot;Enter side 1: &quot;);\r\n        // Scans the next token of the input as an int.\r\n        int side_1 = reader.nextInt();\r\n        \r\n        System.out.println(&quot;Enter side 2: &quot;);\r\n        // Scans the next token of the input as an int.\r\n        int side_2 = reader.nextInt();\r\n        \r\n        System.out.println(&quot;Enter side 3: &quot;);\r\n        // Scans the next token of the input as an int.\r\n        int side_3 = reader.nextInt();\r\n        \r\n        if (isTriangle(side_1, side_2, side_3)) {\r\n            System.out.println(&quot;This is a triangle.&quot;);\r\n        }\r\n        else {\r\n            System.out.println(&quot;This is not a triangle.&quot;);\r\n        }\r\n        \r\n        reader.close();\r\n\r\n    }\r\n    \r\n    public static boolean isTriangle(double a, double b, double c) {\r\n        if ((a + b &gt; c) &amp;&amp;\r\n            (a + c &gt; b) &amp;&amp; // should be a + c &gt; b\r\n            (b + c &gt; a)) {\r\n            return true; \r\n        }\r\n        return false;\r\n    }\r\n\r\n}\r\n```\r\n\r\nIt is very simple, but it is failing and the reason is some strange hidden character that I don&#39;t know where is coming from.\r\n\r\nHere is the output by JUnit:\r\n\r\n[![][1]][1]\r\n\r\n[1]: https://i.stack.imgur.com/E0jF7.jpg\r\n\r\n\r\nAnd here what I see if I double click on it:\r\n\r\n[![enter image description here][2]][2]\r\n  \r\n[2]: https://i.stack.imgur.com/g3Evp.jpg\r\n\r\nIn the first image it appears to be an additional &quot;\\n&quot; but in the second one it doesn&#39;t appear. Also, if I add it manually then the same error will appear, though now the second image will be the one showing that there is an additional \\n.","title":"Practicing JUnit strange behavior comparing strings","body":"<p>I have been trying JUnit for the first time and I am facing a strange error:</p>\n<p>Tests on method are okay, but when I tried my first test in the main method, it fails without reason. This is the code for the test:</p>\n<pre><code>    @Test\n    public void MyTestMain1(){\n        String input = &quot;1\\n2\\n2\\n&quot;;     \n        \n        ByteArrayInputStream in = new ByteArrayInputStream(input.getBytes());\n        System.setIn(in);\n        \n        ByteArrayOutputStream out = new ByteArrayOutputStream();\n        System.setOut(new PrintStream(out));\n        \n        String [] args = {};\n        Demo.main(args);\n        \n        // expected output:\n        String consoleOutput = &quot;Enter side 1: \\n&quot;;\n        consoleOutput += &quot;Enter side 2: \\n&quot;;\n        consoleOutput += &quot;Enter side 3: \\n&quot;;\n        consoleOutput += &quot;This is a triangle.\\n&quot;;\n        \n        assertEquals(consoleOutput, out.toString());\n    }\n</code></pre>\n<p>And here the code of my main class:</p>\n<pre><code>public class Demo {\n\n    public static void main(String[] args) {\n        // Reading from System.in\n        Scanner reader = new Scanner(System.in);  \n        \n        System.out.println(&quot;Enter side 1: &quot;);\n        // Scans the next token of the input as an int.\n        int side_1 = reader.nextInt();\n        \n        System.out.println(&quot;Enter side 2: &quot;);\n        // Scans the next token of the input as an int.\n        int side_2 = reader.nextInt();\n        \n        System.out.println(&quot;Enter side 3: &quot;);\n        // Scans the next token of the input as an int.\n        int side_3 = reader.nextInt();\n        \n        if (isTriangle(side_1, side_2, side_3)) {\n            System.out.println(&quot;This is a triangle.&quot;);\n        }\n        else {\n            System.out.println(&quot;This is not a triangle.&quot;);\n        }\n        \n        reader.close();\n\n    }\n    \n    public static boolean isTriangle(double a, double b, double c) {\n        if ((a + b &gt; c) &amp;&amp;\n            (a + c &gt; b) &amp;&amp; // should be a + c &gt; b\n            (b + c &gt; a)) {\n            return true; \n        }\n        return false;\n    }\n\n}\n</code></pre>\n<p>It is very simple, but it is failing and the reason is some strange hidden character that I don't know where is coming from.</p>\n<p>Here is the output by JUnit:</p>\n<p><a href=\"https://i.stack.imgur.com/E0jF7.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/E0jF7.jpg\" alt=\"\" /></a></p>\n<p>And here what I see if I double click on it:</p>\n<p><a href=\"https://i.stack.imgur.com/g3Evp.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/g3Evp.jpg\" alt=\"enter image description here\" /></a></p>\n<p>In the first image it appears to be an additional &quot;\\n&quot; but in the second one it doesn't appear. Also, if I add it manually then the same error will appear, though now the second image will be the one showing that there is an additional \\n.</p>\n"},{"tags":["java","spring","maven","spring-boot","swagger"],"comments":[{"owner":{"account_id":7592904,"reputation":740,"user_id":5759983,"accept_rate":38,"display_name":"Alee"},"score":2,"creation_date":1488990636,"post_id":41718459,"comment_id":72478044,"body_markdown":"With Spring boot, you don&#39;t need the `@Configuration`. See more http://stackoverflow.com/questions/32449612/spring-boot-springbox-swagger-error","body":"With Spring boot, you don&#39;t need the <code>@Configuration</code>. See more <a href=\"http://stackoverflow.com/questions/32449612/spring-boot-springbox-swagger-error\" title=\"spring boot springbox swagger error\">stackoverflow.com/questions/32449612/&hellip;</a>"},{"owner":{"account_id":8763927,"reputation":1512,"user_id":6553042,"display_name":"fuat"},"score":0,"creation_date":1585934772,"post_id":41718459,"comment_id":107949196,"body_markdown":"just a hint : check endpoints if there was a duplicate value, this error will occur.","body":"just a hint : check endpoints if there was a duplicate value, this error will occur."}],"answers":[{"comments":[{"owner":{"account_id":1796566,"reputation":929,"user_id":1635855,"accept_rate":83,"display_name":"Wuaner"},"score":0,"creation_date":1522122194,"post_id":44672786,"comment_id":86012138,"body_markdown":"How can u using Swagger UI if just remove the @Configuration?","body":"How can u using Swagger UI if just remove the @Configuration?"},{"owner":{"account_id":1103179,"reputation":1695,"user_id":1095120,"display_name":"Nicholas Lu"},"score":0,"creation_date":1522131168,"post_id":44672786,"comment_id":86014997,"body_markdown":"@Wuaner Please see the step 2 of my updated answer.  you have to tell MVC where is the SwaggerCofig","body":"@Wuaner Please see the step 2 of my updated answer.  you have to tell MVC where is the SwaggerCofig"},{"owner":{"account_id":1796566,"reputation":929,"user_id":1635855,"accept_rate":83,"display_name":"Wuaner"},"score":0,"creation_date":1522203154,"post_id":44672786,"comment_id":86055821,"body_markdown":"Thank u for prompt response.","body":"Thank u for prompt response."}],"tags":[],"owner":{"account_id":1103179,"reputation":1695,"user_id":1095120,"display_name":"Nicholas Lu"},"comment_count":3,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1522131039,"creation_date":1498038948,"answer_id":44672786,"question_id":41718459,"body_markdown":"step 1: Remove the @Configuration in SwaggerConfig Class \r\n\r\nstep 2: put such code in /WEB-INF/jetty-dispatcher-servlet.xml\r\n\r\n    &lt;mvc:resources mapping=&quot;swagger-ui.html&quot; location=&quot;classpath:/META-INF/resources/&quot;/&gt;\r\n    &lt;mvc:resources mapping=&quot;/webjars/**&quot; location=&quot;classpath:/META-INF/resources/webjars/&quot;/&gt;\r\n\r\n    &lt;!-- Include a swagger configuration--&gt;\r\n    &lt;bean name=&quot;swaggerConfig&quot; class=&quot;com.exchangewalk.web.config.SwaggerConfig&quot;/&gt;\r\n\r\n\r\nThere are two contexts, the default spring context and the spring MVC context. If you&#39;re using the @configuration annotation, that gets picked up by the default spring context scanning which has no visibility of the RequestMappingHandlerMapping. That&#39;s why it&#39;s important that the SwaggerConfig is a bean defined in the MVC context.\r\n\r\nFor details, please refer: https://github.com/springfox/springfox/issues/462","title":"Spring Boot Swagger 2 Configuration Error creating bean with name &#39;documentationPluginsBootstrapper&#39;","body":"<p>step 1: Remove the @Configuration in SwaggerConfig Class </p>\n\n<p>step 2: put such code in /WEB-INF/jetty-dispatcher-servlet.xml</p>\n\n<pre><code>&lt;mvc:resources mapping=\"swagger-ui.html\" location=\"classpath:/META-INF/resources/\"/&gt;\n&lt;mvc:resources mapping=\"/webjars/**\" location=\"classpath:/META-INF/resources/webjars/\"/&gt;\n\n&lt;!-- Include a swagger configuration--&gt;\n&lt;bean name=\"swaggerConfig\" class=\"com.exchangewalk.web.config.SwaggerConfig\"/&gt;\n</code></pre>\n\n<p>There are two contexts, the default spring context and the spring MVC context. If you're using the @configuration annotation, that gets picked up by the default spring context scanning which has no visibility of the RequestMappingHandlerMapping. That's why it's important that the SwaggerConfig is a bean defined in the MVC context.</p>\n\n<p>For details, please refer: <a href=\"https://github.com/springfox/springfox/issues/462\" rel=\"nofollow noreferrer\">https://github.com/springfox/springfox/issues/462</a></p>\n"},{"tags":[],"owner":{"account_id":11196133,"reputation":169,"user_id":8214713,"display_name":"Dracarys"},"comment_count":0,"down_vote_count":1,"up_vote_count":17,"is_accepted":false,"score":16,"last_activity_date":1499305862,"creation_date":1499305862,"answer_id":44938568,"question_id":41718459,"body_markdown":"In SpringMVC, if you want to use Swagger2,you need add &#39;@EnableWebMvc&#39; in you config class,like this:\r\n\r\n\r\n    @Configuration\r\n    @EnableSwagger2\r\n    @EnableWebMvc\r\n    public class Swagger2Config {\r\n       ……\r\n    }","title":"Spring Boot Swagger 2 Configuration Error creating bean with name &#39;documentationPluginsBootstrapper&#39;","body":"<p>In SpringMVC, if you want to use Swagger2,you need add '@EnableWebMvc' in you config class,like this:</p>\n\n<pre><code>@Configuration\n@EnableSwagger2\n@EnableWebMvc\npublic class Swagger2Config {\n   ……\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15287379,"reputation":499,"user_id":11030016,"display_name":"Damian JK"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1614720935,"creation_date":1614720935,"answer_id":66447499,"question_id":41718459,"body_markdown":"I had this problem when in pom.xml were spring-boot both dependencies for webflux and web were added:\r\n```\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-webflux&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n```\r\nspring-boot-starter-webflux generated problem in that case. \r\nI used springfox:\r\n```\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;io.springfox&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;springfox-boot-starter&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;3.0.0&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n```\r\nFor me it was enough to eliminate webflux dependency, which was added accidentally, but maybe for someone this info will be useful.","title":"Spring Boot Swagger 2 Configuration Error creating bean with name &#39;documentationPluginsBootstrapper&#39;","body":"<p>I had this problem when in pom.xml were spring-boot both dependencies for webflux and web were added:</p>\n<pre><code>        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-webflux&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n</code></pre>\n<p>spring-boot-starter-webflux generated problem in that case.\nI used springfox:</p>\n<pre><code>        &lt;dependency&gt;\n            &lt;groupId&gt;io.springfox&lt;/groupId&gt;\n            &lt;artifactId&gt;springfox-boot-starter&lt;/artifactId&gt;\n            &lt;version&gt;3.0.0&lt;/version&gt;\n        &lt;/dependency&gt;\n</code></pre>\n<p>For me it was enough to eliminate webflux dependency, which was added accidentally, but maybe for someone this info will be useful.</p>\n"},{"comments":[{"owner":{"account_id":2871578,"reputation":1037,"user_id":2464815,"display_name":"Sasha Bond"},"score":0,"creation_date":1649792467,"post_id":68031630,"comment_id":126964673,"body_markdown":"that only switched from swagger3 to oas3, but did not resolve the issue.","body":"that only switched from swagger3 to oas3, but did not resolve the issue."}],"tags":[],"owner":{"account_id":12381428,"reputation":809,"user_id":9026870,"display_name":"Oleh Tatsiun"},"comment_count":1,"down_vote_count":0,"up_vote_count":17,"is_accepted":false,"score":17,"last_activity_date":1624003783,"creation_date":1624003783,"answer_id":68031630,"question_id":41718459,"body_markdown":"Fixed it with removing @Configuration annotation in SwaggerConfuguration class.\r\n\r\nOnly keep @EnableSwagger2 annotation\r\n\r\n    @EnableSwagger2\r\n    public class SwaggerConfiguration {\r\n    \r\n        @Bean\r\n        public Docket api() {\r\n            return new Docket(DocumentationType.SWAGGER_2)\r\n                    .select()\r\n                    .apis(RequestHandlerSelectors.any())\r\n                    .paths(PathSelectors.any())\r\n                    .build();\r\n        }\r\n    }\r\n\r\nP.S. My dependencies:\r\n\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;io.springfox&lt;/groupId&gt;\r\n                &lt;artifactId&gt;springfox-swagger2&lt;/artifactId&gt;\r\n                &lt;version&gt;2.6.1&lt;/version&gt;\r\n                &lt;scope&gt;compile&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;io.springfox&lt;/groupId&gt;\r\n                &lt;artifactId&gt;springfox-swagger-ui&lt;/artifactId&gt;\r\n                &lt;version&gt;2.6.1&lt;/version&gt;\r\n                &lt;scope&gt;compile&lt;/scope&gt;\r\n            &lt;/dependency&gt;","title":"Spring Boot Swagger 2 Configuration Error creating bean with name &#39;documentationPluginsBootstrapper&#39;","body":"<p>Fixed it with removing @Configuration annotation in SwaggerConfuguration class.</p>\n<p>Only keep @EnableSwagger2 annotation</p>\n<pre><code>@EnableSwagger2\npublic class SwaggerConfiguration {\n\n    @Bean\n    public Docket api() {\n        return new Docket(DocumentationType.SWAGGER_2)\n                .select()\n                .apis(RequestHandlerSelectors.any())\n                .paths(PathSelectors.any())\n                .build();\n    }\n}\n</code></pre>\n<p>P.S. My dependencies:</p>\n<pre><code>        &lt;dependency&gt;\n            &lt;groupId&gt;io.springfox&lt;/groupId&gt;\n            &lt;artifactId&gt;springfox-swagger2&lt;/artifactId&gt;\n            &lt;version&gt;2.6.1&lt;/version&gt;\n            &lt;scope&gt;compile&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.springfox&lt;/groupId&gt;\n            &lt;artifactId&gt;springfox-swagger-ui&lt;/artifactId&gt;\n            &lt;version&gt;2.6.1&lt;/version&gt;\n            &lt;scope&gt;compile&lt;/scope&gt;\n        &lt;/dependency&gt;\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1001055,"reputation":361,"user_id":1015890,"accept_rate":29,"display_name":"farhad"},"score":0,"creation_date":1657098831,"post_id":69370133,"comment_id":128726493,"body_markdown":"we need below dependency as well&lt;dependency&gt;\n    &lt;groupId&gt;io.springfox&lt;/groupId&gt;\n    &lt;artifactId&gt;springfox-swagger2&lt;/artifactId&gt;\n    &lt;version&gt;3.0.0&lt;/version&gt;\n&lt;/dependency&gt;","body":"we need below dependency as well&lt;dependency&gt;     &lt;groupId&gt;io.springfox&lt;/groupId&gt;     &lt;artifactId&gt;springfox-swagger2&lt;/artifactId&gt;     &lt;version&gt;3.0.0&lt;/version&gt; &lt;/dependency&gt;"}],"tags":[],"owner":{"account_id":22890064,"reputation":11,"user_id":17030326,"display_name":"vanpersieyolo"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1632887082,"creation_date":1632887082,"answer_id":69370133,"question_id":41718459,"body_markdown":"u need additional this dependency :\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n    &lt;dependency&gt;\r\n                &lt;groupId&gt;io.springfox&lt;/groupId&gt;\r\n                &lt;artifactId&gt;springfox-boot-starter&lt;/artifactId&gt;\r\n                &lt;version&gt;3.0.0&lt;/version&gt;\r\n       &lt;/dependency&gt;\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n","title":"Spring Boot Swagger 2 Configuration Error creating bean with name &#39;documentationPluginsBootstrapper&#39;","body":"<p>u need additional this dependency :</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;dependency&gt;\n            &lt;groupId&gt;io.springfox&lt;/groupId&gt;\n            &lt;artifactId&gt;springfox-boot-starter&lt;/artifactId&gt;\n            &lt;version&gt;3.0.0&lt;/version&gt;\n   &lt;/dependency&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"},{"tags":[],"owner":{"account_id":25999104,"reputation":1,"user_id":19709937,"display_name":"Efekan Aydemir"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677656678,"creation_date":1660206226,"answer_id":73317505,"question_id":41718459,"body_markdown":"![enter image description here][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/rIZmK.jpg\r\n\r\nAdd this plugin to your maven. \r\nWhen I was trying to run from jar, I was gettin this exception.\r\nThen I created jar with maven-&gt;install and run that jar, there is no error .\r\nHope it helps you\r\n\r\n    &lt;build&gt;\r\n    \t\t&lt;plugins&gt;\r\n    \t\t\t&lt;plugin&gt;\r\n    \t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n    \t\t\t&lt;/plugin&gt;\r\n    \t\t&lt;/plugins&gt;\r\n    \t&lt;/build&gt;\r\n\r\n","title":"Spring Boot Swagger 2 Configuration Error creating bean with name &#39;documentationPluginsBootstrapper&#39;","body":"<p><img src=\"https://i.stack.imgur.com/rIZmK.jpg\" alt=\"enter image description here\" /></p>\n<p>Add this plugin to your maven.\nWhen I was trying to run from jar, I was gettin this exception.\nThen I created jar with maven-&gt;install and run that jar, there is no error .\nHope it helps you</p>\n<pre><code>&lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":27370062,"reputation":11,"user_id":20876249,"display_name":"Raj"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1672431174,"creation_date":1672431116,"answer_id":74965461,"question_id":41718459,"body_markdown":"Removing  @Configuration fixed my issue but swagger stopped working for obvious reason","title":"Spring Boot Swagger 2 Configuration Error creating bean with name &#39;documentationPluginsBootstrapper&#39;","body":"<p>Removing  @Configuration fixed my issue but swagger stopped working for obvious reason</p>\n"},{"tags":[],"owner":{"account_id":29746175,"reputation":1,"user_id":22797184,"display_name":"Tae Ha Lee"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698183131,"creation_date":1698183090,"answer_id":77355494,"question_id":41718459,"body_markdown":"For those who are using Spring 3, springfox-swagger-ui and springfox-swagger2 are not working properly. I have tried to solve it but no success...\r\n\r\nSo, instead of using those 2 dependencies, you can use OpenAPI 3 and this is very simple guide that I found on internet. For me, it worked on 1st time.\r\n\r\nhttps://www.appsdeveloperblog.com/document-spring-rest-api-with-openapi-3swagger/\r\n\r\nHope you can solve this issue.","title":"Spring Boot Swagger 2 Configuration Error creating bean with name &#39;documentationPluginsBootstrapper&#39;","body":"<p>For those who are using Spring 3, springfox-swagger-ui and springfox-swagger2 are not working properly. I have tried to solve it but no success...</p>\n<p>So, instead of using those 2 dependencies, you can use OpenAPI 3 and this is very simple guide that I found on internet. For me, it worked on 1st time.</p>\n<p><a href=\"https://www.appsdeveloperblog.com/document-spring-rest-api-with-openapi-3swagger/\" rel=\"nofollow noreferrer\">https://www.appsdeveloperblog.com/document-spring-rest-api-with-openapi-3swagger/</a></p>\n<p>Hope you can solve this issue.</p>\n"}],"owner":{"account_id":6932589,"reputation":303,"user_id":5321637,"accept_rate":11,"display_name":"wegtis"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":92495,"favorite_count":0,"down_vote_count":0,"up_vote_count":25,"answer_count":8,"score":25,"last_activity_date":1698183131,"creation_date":1484739498,"question_id":41718459,"body_markdown":"I have problems with configuration of Swagger in my Spring Boot project.\r\nI was following the basic instruction for this, and somehow it doesn&#39;s work.\r\n\r\nHere it is:\r\npom.xml\r\n\r\n     &lt;!--SWAGGER--&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;io.springfox&lt;/groupId&gt;\r\n            &lt;artifactId&gt;springfox-swagger-ui&lt;/artifactId&gt;\r\n            &lt;version&gt;2.4.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;io.springfox&lt;/groupId&gt;\r\n            &lt;artifactId&gt;springfox-swagger2&lt;/artifactId&gt;\r\n            &lt;version&gt;2.4.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\nJava Swagger Config:\r\n\r\n    @Configuration\r\n    @EnableSwagger2\r\n    public class SwaggerConfig {\r\n    @Bean\r\n    public Docket api() {\r\n        return new Docket(DocumentationType.SWAGGER_2)\r\n                .select()\r\n                .apis(RequestHandlerSelectors.any())\r\n                .paths(PathSelectors.any())\r\n                .build();\r\n        }\r\n    }\r\n\r\nAnd i am getting this Exception:\r\n  \r\n\r\n    Exception in thread &quot;main&quot; org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;documentationPluginsBootstrapper&#39; defined in URL [jar:file:/C:/Users/Admin/.m2/repository/io/springfox/springfox-spring-web/2.4.0/springfox-spring-web-2.4.0.jar!/springfox/documentation/spring/web/plugins/DocumentationPluginsBootstrapper.class]: BeanPostProcessor before instantiation of bean failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration&#39;: Initialization of bean failed; nested exception is java.lang.NoSuchMethodError: org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration.setBeanFactory(Lorg/springframework/beans/factory/BeanFactory;)V\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:471)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:304)\r\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:228)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:300)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)\r\n\tat org.springframework.context.event.AbstractApplicationEventMulticaster.getApplicationListeners(AbstractApplicationEventMulticaster.java:165)\r\n\tat org.springframework.boot.SpringApplication$SpringApplicationEventMulticaster.getApplicationListeners(SpringApplication.java:1007)\r\n\tat org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:87)\r\n\tat org.springframework.boot.SpringApplication.handleError(SpringApplication.java:379)\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:367)\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:920)\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:909)\r\n\tat configuration.main.Application.main(Application.java:34)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat com.intellij.rt.execution.application.AppMain.main(AppMain.java:147)\r\n    Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration&#39;: Initialization of bean failed; nested exception is java.lang.NoSuchMethodError: org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration.setBeanFactory(Lorg/springframework/beans/factory/BeanFactory;)V\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:547)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:475)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:304)\r\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:228)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:300)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:195)\r\n\tat org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:354)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1094)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:989)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:504)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:475)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:304)\r\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:228)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:300)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)\r\n\tat org.springframework.aop.framework.autoproxy.BeanFactoryAdvisorRetrievalHelper.findAdvisorBeans(BeanFactoryAdvisorRetrievalHelper.java:92)\r\n\tat org.springframework.aop.framework.autoproxy.AbstractAdvisorAutoProxyCreator.findCandidateAdvisors(AbstractAdvisorAutoProxyCreator.java:101)\r\n\tat org.springframework.aop.aspectj.annotation.AnnotationAwareAspectJAutoProxyCreator.findCandidateAdvisors(AnnotationAwareAspectJAutoProxyCreator.java:85)\r\n\tat org.springframework.aop.aspectj.autoproxy.AspectJAwareAdvisorAutoProxyCreator.shouldSkip(AspectJAwareAdvisorAutoProxyCreator.java:103)\r\n\tat org.springframework.aop.framework.autoproxy.AbstractAutoProxyCreator.postProcessBeforeInstantiation(AbstractAutoProxyCreator.java:285)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsBeforeInstantiation(AbstractAutowireCapableBeanFactory.java:958)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.resolveBeforeInstantiation(AbstractAutowireCapableBeanFactory.java:930)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:465)\r\n\t... 17 more\r\n    Caused by: java.lang.NoSuchMethodError: org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration.setBeanFactory(Lorg/springframework/beans/factory/BeanFactory;)V\r\n\tat org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration$$EnhancerByCGLIB$$93593f67.setBeanFactory(&lt;generated&gt;)\r\n\tat org.springframework.context.annotation.ConfigurationClassPostProcessor$EnhancedConfigurationBeanPostProcessor.postProcessPropertyValues(ConfigurationClassPostProcessor.java:442)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1185)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:537)\r\n\t... 39 more\r\n\r\n","title":"Spring Boot Swagger 2 Configuration Error creating bean with name &#39;documentationPluginsBootstrapper&#39;","body":"<p>I have problems with configuration of Swagger in my Spring Boot project.\nI was following the basic instruction for this, and somehow it doesn's work.</p>\n\n<p>Here it is:\npom.xml</p>\n\n<pre><code> &lt;!--SWAGGER--&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;io.springfox&lt;/groupId&gt;\n        &lt;artifactId&gt;springfox-swagger-ui&lt;/artifactId&gt;\n        &lt;version&gt;2.4.0&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;io.springfox&lt;/groupId&gt;\n        &lt;artifactId&gt;springfox-swagger2&lt;/artifactId&gt;\n        &lt;version&gt;2.4.0&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n\n<p>Java Swagger Config:</p>\n\n<pre><code>@Configuration\n@EnableSwagger2\npublic class SwaggerConfig {\n@Bean\npublic Docket api() {\n    return new Docket(DocumentationType.SWAGGER_2)\n            .select()\n            .apis(RequestHandlerSelectors.any())\n            .paths(PathSelectors.any())\n            .build();\n    }\n}\n</code></pre>\n\n<p>And i am getting this Exception:</p>\n\n<pre><code>Exception in thread \"main\" org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'documentationPluginsBootstrapper' defined in URL [jar:file:/C:/Users/Admin/.m2/repository/io/springfox/springfox-spring-web/2.4.0/springfox-spring-web-2.4.0.jar!/springfox/documentation/spring/web/plugins/DocumentationPluginsBootstrapper.class]: BeanPostProcessor before instantiation of bean failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration': Initialization of bean failed; nested exception is java.lang.NoSuchMethodError: org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration.setBeanFactory(Lorg/springframework/beans/factory/BeanFactory;)V\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:471)\nat org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:304)\nat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:228)\nat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:300)\nat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)\nat org.springframework.context.event.AbstractApplicationEventMulticaster.getApplicationListeners(AbstractApplicationEventMulticaster.java:165)\nat org.springframework.boot.SpringApplication$SpringApplicationEventMulticaster.getApplicationListeners(SpringApplication.java:1007)\nat org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:87)\nat org.springframework.boot.SpringApplication.handleError(SpringApplication.java:379)\nat org.springframework.boot.SpringApplication.run(SpringApplication.java:367)\nat org.springframework.boot.SpringApplication.run(SpringApplication.java:920)\nat org.springframework.boot.SpringApplication.run(SpringApplication.java:909)\nat configuration.main.Application.main(Application.java:34)\nat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\nat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\nat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\nat java.lang.reflect.Method.invoke(Method.java:498)\nat com.intellij.rt.execution.application.AppMain.main(AppMain.java:147)\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration': Initialization of bean failed; nested exception is java.lang.NoSuchMethodError: org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration.setBeanFactory(Lorg/springframework/beans/factory/BeanFactory;)V\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:547)\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:475)\nat org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:304)\nat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:228)\nat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:300)\nat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:195)\nat org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:354)\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1094)\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:989)\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:504)\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:475)\nat org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:304)\nat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:228)\nat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:300)\nat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)\nat org.springframework.aop.framework.autoproxy.BeanFactoryAdvisorRetrievalHelper.findAdvisorBeans(BeanFactoryAdvisorRetrievalHelper.java:92)\nat org.springframework.aop.framework.autoproxy.AbstractAdvisorAutoProxyCreator.findCandidateAdvisors(AbstractAdvisorAutoProxyCreator.java:101)\nat org.springframework.aop.aspectj.annotation.AnnotationAwareAspectJAutoProxyCreator.findCandidateAdvisors(AnnotationAwareAspectJAutoProxyCreator.java:85)\nat org.springframework.aop.aspectj.autoproxy.AspectJAwareAdvisorAutoProxyCreator.shouldSkip(AspectJAwareAdvisorAutoProxyCreator.java:103)\nat org.springframework.aop.framework.autoproxy.AbstractAutoProxyCreator.postProcessBeforeInstantiation(AbstractAutoProxyCreator.java:285)\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsBeforeInstantiation(AbstractAutowireCapableBeanFactory.java:958)\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.resolveBeforeInstantiation(AbstractAutowireCapableBeanFactory.java:930)\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:465)\n... 17 more\nCaused by: java.lang.NoSuchMethodError: org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration.setBeanFactory(Lorg/springframework/beans/factory/BeanFactory;)V\nat org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration$$EnhancerByCGLIB$$93593f67.setBeanFactory(&lt;generated&gt;)\nat org.springframework.context.annotation.ConfigurationClassPostProcessor$EnhancedConfigurationBeanPostProcessor.postProcessPropertyValues(ConfigurationClassPostProcessor.java:442)\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1185)\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:537)\n... 39 more\n</code></pre>\n"},{"tags":["java","docker","docker-compose","cassandra","spring-data-cassandra"],"comments":[{"owner":{"account_id":1912742,"reputation":15070,"user_id":1726083,"display_name":"erik258"},"score":0,"creation_date":1698180646,"post_id":77355150,"comment_id":136372081,"body_markdown":"Does this answer your question? [dotnetcore console app : rabbitmq with docker Connection refused 127.0.0.1:5672](https://stackoverflow.com/questions/48361367/dotnetcore-console-app-rabbitmq-with-docker-connection-refused-127-0-0-15672)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/48361367/dotnetcore-console-app-rabbitmq-with-docker-connection-refused-127-0-0-15672\">dotnetcore console app : rabbitmq with docker Connection refused 127.0.0.1:5672</a>"},{"owner":{"account_id":1912742,"reputation":15070,"user_id":1726083,"display_name":"erik258"},"score":0,"creation_date":1698180730,"post_id":77355150,"comment_id":136372097,"body_markdown":"The duplicate is for a different port and service, but the solution will work if adjusted for yours.  TLDR: &quot;Connection refused: /127.0.0.1:9042&quot; each docker has its own localhost interface, so using 127.0.0.1 / aliases in docker containers is generally a mistake. In your case you should be connecting to `db`, the name of the container from docker-compose.","body":"The duplicate is for a different port and service, but the solution will work if adjusted for yours.  TLDR: &quot;Connection refused: /127.0.0.1:9042&quot; each docker has its own localhost interface, so using 127.0.0.1 / aliases in docker containers is generally a mistake. In your case you should be connecting to <code>db</code>, the name of the container from docker-compose."},{"owner":{"account_id":15069196,"reputation":704,"user_id":10875311,"display_name":"Akash Jain"},"score":0,"creation_date":1698182013,"post_id":77355150,"comment_id":136372290,"body_markdown":"that&#39;s the point even if i do specify `db` or `cassandra` (as it was previously) it always takes `127.0.0.1` not the one i specified, I&#39;m not understanding why?","body":"that&#39;s the point even if i do specify <code>db</code> or <code>cassandra</code> (as it was previously) it always takes <code>127.0.0.1</code> not the one i specified, I&#39;m not understanding why?"},{"owner":{"account_id":15069196,"reputation":704,"user_id":10875311,"display_name":"Akash Jain"},"score":0,"creation_date":1698182240,"post_id":77355150,"comment_id":136372315,"body_markdown":"i have edited with more information","body":"i have edited with more information"},{"owner":{"account_id":1912742,"reputation":15070,"user_id":1726083,"display_name":"erik258"},"score":0,"creation_date":1698182371,"post_id":77355150,"comment_id":136372329,"body_markdown":"then your configuration is incorrectly setting up the hosts.  Are you sure it&#39;s not supposed to be `contactpoints` vs `contact-points`?  Just a guess from https://docs.spring.io/spring-data/cassandra/docs/current/reference/html/#cassandra-connectors.xmlconfig","body":"then your configuration is incorrectly setting up the hosts.  Are you sure it&#39;s not supposed to be <code>contactpoints</code> vs <code>contact-points</code>?  Just a guess from <a href=\"https://docs.spring.io/spring-data/cassandra/docs/current/reference/html/#cassandra-connectors.xmlconfig\" rel=\"nofollow noreferrer\">docs.spring.io/spring-data/cassandra/docs/current/reference/&zwnj;&#8203;&hellip;</a>"},{"owner":{"account_id":15069196,"reputation":704,"user_id":10875311,"display_name":"Akash Jain"},"score":0,"creation_date":1698182574,"post_id":77355150,"comment_id":136372359,"body_markdown":"i would have agreed with you but when i run locally it works fine, without any errors","body":"i would have agreed with you but when i run locally it works fine, without any errors"},{"owner":{"account_id":1912742,"reputation":15070,"user_id":1726083,"display_name":"erik258"},"score":0,"creation_date":1698182640,"post_id":77355150,"comment_id":136372366,"body_markdown":"because locally cassandra is probably listening on 127.0.0.1 right?  so the default configuration works there.  I would be more interested if you could *break* it running outside docker by setting the host setting incorrectly","body":"because locally cassandra is probably listening on 127.0.0.1 right?  so the default configuration works there.  I would be more interested if you could <i>break</i> it running outside docker by setting the host setting incorrectly"},{"owner":{"account_id":15069196,"reputation":704,"user_id":10875311,"display_name":"Akash Jain"},"score":0,"creation_date":1698183022,"post_id":77355150,"comment_id":136372408,"body_markdown":"actually as i&#39;m running in windows so cassandra is not running locally but by docker, (https://spring.io/guides/gs/accessing-data-cassandra/) and when i do set the contact point incorrectly it stopped working giving the same error of not reaching contact point","body":"actually as i&#39;m running in windows so cassandra is not running locally but by docker, (<a href=\"https://spring.io/guides/gs/accessing-data-cassandra/\" rel=\"nofollow noreferrer\">spring.io/guides/gs/accessing-data-cassandra</a>) and when i do set the contact point incorrectly it stopped working giving the same error of not reaching contact point"}],"owner":{"account_id":15069196,"reputation":704,"user_id":10875311,"display_name":"Akash Jain"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":71,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1698182213,"creation_date":1698178375,"question_id":77355150,"body_markdown":"My application is dependent on Cassandra DB, so i have put all of them in a docker-compose file, now simply using plain docker as given [here](https://spring.io/guides/gs/accessing-data-cassandra/) i&#39;m able to run it fine locally but when i try using the same configuration in compose i keep getting the same error,\r\n\r\nmy compose file:\r\n```yaml\r\nversion: &quot;3.9&quot;\r\nservices:\r\n  myapplication:\r\n    image: eclipse-temurin:17.0.7_7-jre\r\n    working_dir: /root/app\r\n    restart: on-failure\r\n    command: sh -c &quot;java -jar -Dspring.profiles.active=docker /root/app/app.jar&quot;\r\n    depends_on:\r\n      - db\r\n    volumes:\r\n      - jar:/root/app/\r\n      - ./logs:/root/app/logs\r\n  db:\r\n    image: cassandra:5.0\r\n    restart: always\r\n    container_name: cassandra\r\n    environment:\r\n      CASSANDRA_CLUSTER_NAME: app\r\n    ports:\r\n      - &quot;9042:9042&quot;\r\n      - &quot;9160:9160&quot;\r\n      - &quot;7199:7199&quot;\r\n    volumes:\r\n      - cas_data:/var/lib/cassandra\r\nvolumes:\r\n  cas_data:\r\n    driver: local\r\nnetworks:\r\n  default:\r\n    name: my-application\r\n```\r\n\r\nand my property file is \r\n```properties\r\nspring.cassandra.schema-action=CREATE_IF_NOT_EXISTS\r\n#spring.cassandra.request.timeout=10s\r\n#spring.cassandra.connection.connect-timeout=10s\r\n#spring.cassandra.connection.init-query-timeout=20s\r\n#spring.cassandra.keyspace-name=app\r\n#spring.data.cassandra.port=9042\r\nspring.data.cassandra.contact-points=cassandra\r\nspring.cassandra.local-datacenter=datacenter1\r\n\r\n```\r\n\r\nI have tried to even hard code the contact-point but to no avail, I&#39;m able to access the cassandra in the compose container, but my application can&#39;t seem to access it. \r\n\r\nerror:\r\n```\r\nSuppressed: io.netty.channel.AbstractChannel$AnnotatedConnectException: Connection refused: /127.0.0.1:9042\r\n                Caused by: java.net.ConnectException: Connection refused\r\n                        at java.base/sun.nio.ch.Net.pollConnect(Native Method)\r\n                        at java.base/sun.nio.ch.Net.pollConnectNow(Unknown Source)\r\n                        at java.base/sun.nio.ch.SocketChannelImpl.finishConnect(Unknown Source)\r\n                        at io.netty.channel.socket.nio.NioSocketChannel.doFinishConnect(NioSocketChannel.java:337)\r\n                        at io.netty.channel.nio.AbstractNioChannel$AbstractNioUnsafe.finishConnect(AbstractNioChannel.java:334)\r\n                        at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:776)\r\n                        at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)\r\n                        at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)\r\n                        at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)\r\n                        at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)\r\n                        at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)\r\n                        at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\r\n                        at java.base/java.lang.Thread.run(Unknown Source)\r\n        Caused by: io.netty.channel.StacklessClosedChannelException: null\r\n                at io.netty.channel.AbstractChannel$AbstractUnsafe.flush0()(Unknown Source)\r\n```\r\n\r\nwhat&#39;s the cause of this issue and how can i resolve this?\r\n\r\n------\r\n**EDIT**\r\n\r\non top of the previous stacktrace, i will add another one as it comes at the top of the above error\r\n\r\n```\r\nCaused by: com.datastax.oss.driver.api.core.AllNodesFailedException: Could not reach any contact point, make sure you&#39;ve provided valid addresses (showing first 1 nodes, use getAllErrors() for more): Node(endPoint=/127.0.0.1:9042, hostId=null, hashCode=7b503e49): [com.datastax.oss.driver.api.core.connection.ConnectionInitException: [s0|control|connecting...] Protocol initialization request, step 1 (OPTIONS): failed to send request (io.netty.channel.StacklessClosedChannelException)]\r\n        at com.datastax.oss.driver.api.core.AllNodesFailedException.copy(AllNodesFailedException.java:141) ~[java-driver-core-4.15.0.jar!/:na]\r\n```\r\n\r\nI&#39;m giving correct contact point as i get this in the container\r\n```\r\n# nc -zv cassandra 9042\r\nConnection to cassandra (192.xxx.xxx.x) 9042 port [tcp/*] succeeded!\r\n\r\n```","title":"Docker compose : Cassandra not connecting to my application in same network","body":"<p>My application is dependent on Cassandra DB, so i have put all of them in a docker-compose file, now simply using plain docker as given <a href=\"https://spring.io/guides/gs/accessing-data-cassandra/\" rel=\"nofollow noreferrer\">here</a> i'm able to run it fine locally but when i try using the same configuration in compose i keep getting the same error,</p>\n<p>my compose file:</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>version: &quot;3.9&quot;\nservices:\n  myapplication:\n    image: eclipse-temurin:17.0.7_7-jre\n    working_dir: /root/app\n    restart: on-failure\n    command: sh -c &quot;java -jar -Dspring.profiles.active=docker /root/app/app.jar&quot;\n    depends_on:\n      - db\n    volumes:\n      - jar:/root/app/\n      - ./logs:/root/app/logs\n  db:\n    image: cassandra:5.0\n    restart: always\n    container_name: cassandra\n    environment:\n      CASSANDRA_CLUSTER_NAME: app\n    ports:\n      - &quot;9042:9042&quot;\n      - &quot;9160:9160&quot;\n      - &quot;7199:7199&quot;\n    volumes:\n      - cas_data:/var/lib/cassandra\nvolumes:\n  cas_data:\n    driver: local\nnetworks:\n  default:\n    name: my-application\n</code></pre>\n<p>and my property file is</p>\n<pre><code>spring.cassandra.schema-action=CREATE_IF_NOT_EXISTS\n#spring.cassandra.request.timeout=10s\n#spring.cassandra.connection.connect-timeout=10s\n#spring.cassandra.connection.init-query-timeout=20s\n#spring.cassandra.keyspace-name=app\n#spring.data.cassandra.port=9042\nspring.data.cassandra.contact-points=cassandra\nspring.cassandra.local-datacenter=datacenter1\n\n</code></pre>\n<p>I have tried to even hard code the contact-point but to no avail, I'm able to access the cassandra in the compose container, but my application can't seem to access it.</p>\n<p>error:</p>\n<pre><code>Suppressed: io.netty.channel.AbstractChannel$AnnotatedConnectException: Connection refused: /127.0.0.1:9042\n                Caused by: java.net.ConnectException: Connection refused\n                        at java.base/sun.nio.ch.Net.pollConnect(Native Method)\n                        at java.base/sun.nio.ch.Net.pollConnectNow(Unknown Source)\n                        at java.base/sun.nio.ch.SocketChannelImpl.finishConnect(Unknown Source)\n                        at io.netty.channel.socket.nio.NioSocketChannel.doFinishConnect(NioSocketChannel.java:337)\n                        at io.netty.channel.nio.AbstractNioChannel$AbstractNioUnsafe.finishConnect(AbstractNioChannel.java:334)\n                        at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:776)\n                        at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)\n                        at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)\n                        at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)\n                        at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)\n                        at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)\n                        at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\n                        at java.base/java.lang.Thread.run(Unknown Source)\n        Caused by: io.netty.channel.StacklessClosedChannelException: null\n                at io.netty.channel.AbstractChannel$AbstractUnsafe.flush0()(Unknown Source)\n</code></pre>\n<p>what's the cause of this issue and how can i resolve this?</p>\n<hr />\n<p><strong>EDIT</strong></p>\n<p>on top of the previous stacktrace, i will add another one as it comes at the top of the above error</p>\n<pre><code>Caused by: com.datastax.oss.driver.api.core.AllNodesFailedException: Could not reach any contact point, make sure you've provided valid addresses (showing first 1 nodes, use getAllErrors() for more): Node(endPoint=/127.0.0.1:9042, hostId=null, hashCode=7b503e49): [com.datastax.oss.driver.api.core.connection.ConnectionInitException: [s0|control|connecting...] Protocol initialization request, step 1 (OPTIONS): failed to send request (io.netty.channel.StacklessClosedChannelException)]\n        at com.datastax.oss.driver.api.core.AllNodesFailedException.copy(AllNodesFailedException.java:141) ~[java-driver-core-4.15.0.jar!/:na]\n</code></pre>\n<p>I'm giving correct contact point as i get this in the container</p>\n<pre><code># nc -zv cassandra 9042\nConnection to cassandra (192.xxx.xxx.x) 9042 port [tcp/*] succeeded!\n\n</code></pre>\n"},{"tags":["java","android","react-native","gradle","java-11"],"comments":[{"owner":{"account_id":12258252,"reputation":528,"user_id":8946720,"display_name":"Talha Akbar"},"score":0,"creation_date":1663567173,"post_id":73768537,"comment_id":130261342,"body_markdown":"Simply you need to install kotlin on Android Studio and do Gradle Sync again.","body":"Simply you need to install kotlin on Android Studio and do Gradle Sync again."}],"answers":[{"comments":[{"owner":{"account_id":18772229,"reputation":356,"user_id":13688812,"display_name":"Dhanush Raja"},"score":1,"creation_date":1663608807,"post_id":73769109,"comment_id":130275229,"body_markdown":"Hi thank you for the response, but I already have kotlin plugin installed. Also when I open the project on android studio, I&#39;m unable to gradle sync it. Isn&#39;t the issue related to changing the java version from 1.8 to 11?","body":"Hi thank you for the response, but I already have kotlin plugin installed. Also when I open the project on android studio, I&#39;m unable to gradle sync it. Isn&#39;t the issue related to changing the java version from 1.8 to 11?"}],"tags":[],"owner":{"account_id":12258252,"reputation":528,"user_id":8946720,"display_name":"Talha Akbar"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1663568164,"creation_date":1663567827,"answer_id":73769109,"question_id":73768537,"body_markdown":"I am facing the same issue where All Java packages were installed or synced perfectly but kotlin packages were not synced it throws an error of kotlin compilation.\r\n\r\nI install kotlin package on Android Studio by following [This][1].\r\n\r\n&gt; Android Studio → Preferences… →Plugins → Browse Repository → type “Kotlin” in search box → install\r\n\r\nAfter that, you need to remove the cache of this project from\r\n\r\n&gt; File -&gt; Invalidate caches -&gt; Invalidate and Restart.\r\n\r\nAfter that when your project is re-open and synced successfully then clean your project from `Build -&gt; Clean Project`.\r\n\r\n\r\n After that, all packages of kotlin were installed perfectly.\r\n\r\n\r\n  [1]: https://kotlinlang.org/docs/install-eap-plugin.html","title":"Task :react-native-gradle-plugin:compileKotlin FAILED, &#39;compileJava&#39; task (current target is 1.8) and &#39;compileKotlin&#39; task (current target is 11)","body":"<p>I am facing the same issue where All Java packages were installed or synced perfectly but kotlin packages were not synced it throws an error of kotlin compilation.</p>\n<p>I install kotlin package on Android Studio by following <a href=\"https://kotlinlang.org/docs/install-eap-plugin.html\" rel=\"nofollow noreferrer\">This</a>.</p>\n<blockquote>\n<p>Android Studio → Preferences… →Plugins → Browse Repository → type “Kotlin” in search box → install</p>\n</blockquote>\n<p>After that, you need to remove the cache of this project from</p>\n<blockquote>\n<p>File -&gt; Invalidate caches -&gt; Invalidate and Restart.</p>\n</blockquote>\n<p>After that when your project is re-open and synced successfully then clean your project from <code>Build -&gt; Clean Project</code>.</p>\n<p>After that, all packages of kotlin were installed perfectly.</p>\n"},{"comments":[{"owner":{"account_id":26792175,"reputation":126,"user_id":20385417,"display_name":"Nguyễn Minh Khoa"},"score":0,"creation_date":1698507217,"post_id":73777463,"comment_id":136415911,"body_markdown":"it even not related to question, it just a command to run react native app","body":"it even not related to question, it just a command to run react native app"}],"tags":[],"owner":{"account_id":18772229,"reputation":356,"user_id":13688812,"display_name":"Dhanush Raja"},"comment_count":1,"down_vote_count":5,"up_vote_count":1,"is_accepted":false,"score":-4,"last_activity_date":1666000696,"creation_date":1663610041,"answer_id":73777463,"question_id":73768537,"body_markdown":"Found the solution, not sure why it works though\r\n\r\ni used the following commands to start the build\r\n\r\n    npm start\r\n\r\nnow open another terminal and execute the following\r\n\r\n    npm run android\r\n\r\n**instead of** \r\n\r\n    npx react-native start\r\n\r\nand \r\n\r\n    npx react-native run-android\r\n\r\nwhere the latter is suggested by the official documentation ","title":"Task :react-native-gradle-plugin:compileKotlin FAILED, &#39;compileJava&#39; task (current target is 1.8) and &#39;compileKotlin&#39; task (current target is 11)","body":"<p>Found the solution, not sure why it works though</p>\n<p>i used the following commands to start the build</p>\n<pre><code>npm start\n</code></pre>\n<p>now open another terminal and execute the following</p>\n<pre><code>npm run android\n</code></pre>\n<p><strong>instead of</strong></p>\n<pre><code>npx react-native start\n</code></pre>\n<p>and</p>\n<pre><code>npx react-native run-android\n</code></pre>\n<p>where the latter is suggested by the official documentation</p>\n"},{"tags":[],"owner":{"account_id":23085569,"reputation":41,"user_id":17197148,"display_name":"bocoder"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1670441432,"creation_date":1670216270,"answer_id":74683546,"question_id":73768537,"body_markdown":"I changed gradle version and solved it.\r\n[Reference](https://bocoder.tistory.com/125)\r\n\r\n    //before\r\n    distributionUrl=https\\://services.gradle.org/distributions/gradle-6.9-bin.zip\r\n\r\n    //after\r\n    distributionUrl=https\\://services.gradle.org/distributions/gradle-7.5.1-all.zip\r\n","title":"Task :react-native-gradle-plugin:compileKotlin FAILED, &#39;compileJava&#39; task (current target is 1.8) and &#39;compileKotlin&#39; task (current target is 11)","body":"<p>I changed gradle version and solved it.\n<a href=\"https://bocoder.tistory.com/125\" rel=\"nofollow noreferrer\">Reference</a></p>\n<pre><code>//before\ndistributionUrl=https\\://services.gradle.org/distributions/gradle-6.9-bin.zip\n\n//after\ndistributionUrl=https\\://services.gradle.org/distributions/gradle-7.5.1-all.zip\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2820186,"reputation":39,"user_id":2424103,"display_name":"Sushil Mishra"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1698181990,"creation_date":1674598888,"answer_id":75227882,"question_id":73768537,"body_markdown":"I just installed jdk11 then run cd ./android/ &amp;&amp; ./gradlew clean That works for me\r\n\r\nWe have to take care **Gradle compatibility version with java version** for react-native or flutter both framework. You can take a look for checking compatible version in mentioned url\r\nhttps://docs.gradle.org/current/userguide/compatibility.html","title":"Task :react-native-gradle-plugin:compileKotlin FAILED, &#39;compileJava&#39; task (current target is 1.8) and &#39;compileKotlin&#39; task (current target is 11)","body":"<p>I just installed jdk11 then run cd ./android/ &amp;&amp; ./gradlew clean That works for me</p>\n<p>We have to take care <strong>Gradle compatibility version with java version</strong> for react-native or flutter both framework. You can take a look for checking compatible version in mentioned url\n<a href=\"https://docs.gradle.org/current/userguide/compatibility.html\" rel=\"nofollow noreferrer\">https://docs.gradle.org/current/userguide/compatibility.html</a></p>\n"},{"comments":[{"owner":{"account_id":988196,"reputation":4612,"user_id":1006201,"accept_rate":64,"display_name":"Ren"},"score":0,"creation_date":1677546889,"post_id":75323120,"comment_id":133355703,"body_markdown":"This only applies to react-native 0.70+","body":"This only applies to react-native 0.70+"},{"owner":{"account_id":12260125,"reputation":2919,"user_id":8948092,"display_name":"Petey"},"score":1,"creation_date":1678587149,"post_id":75323120,"comment_id":133562189,"body_markdown":"This fixed it for me when upgrading to Expo 48. Thanks!","body":"This fixed it for me when upgrading to Expo 48. Thanks!"}],"tags":[],"owner":{"account_id":27685128,"reputation":151,"user_id":21133031,"display_name":"Asif Khan"},"comment_count":2,"down_vote_count":0,"up_vote_count":15,"is_accepted":false,"score":15,"last_activity_date":1675589605,"creation_date":1675340610,"answer_id":75323120,"question_id":73768537,"body_markdown":"I had the same problem and to solve this problem I changed in gradle-wrapper.properties file \r\n\r\nbefore:\r\n\r\n```gradle\r\ndistributionUrl=https\\://services.gradle.org/distributions/gradle-7.3.3-all.zip\r\n```\r\n\r\nafter:\r\n\r\n```gradle\r\ndistributionUrl=https\\://services.gradle.org/distributions/gradle-7.5.1-all.zip\r\n```\r\n","title":"Task :react-native-gradle-plugin:compileKotlin FAILED, &#39;compileJava&#39; task (current target is 1.8) and &#39;compileKotlin&#39; task (current target is 11)","body":"<p>I had the same problem and to solve this problem I changed in gradle-wrapper.properties file</p>\n<p>before:</p>\n<pre><code>distributionUrl=https\\://services.gradle.org/distributions/gradle-7.3.3-all.zip\n</code></pre>\n<p>after:</p>\n<pre><code>distributionUrl=https\\://services.gradle.org/distributions/gradle-7.5.1-all.zip\n</code></pre>\n"},{"tags":[],"owner":{"account_id":20303877,"reputation":1,"user_id":14892642,"display_name":"Amos Weislib"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679998859,"creation_date":1679653308,"answer_id":75832429,"question_id":73768537,"body_markdown":"I hade the same issue using expo\r\n\r\nI removed the `eas.json` file, as `eas build` creates a new `eas.json` file\r\n\r\nIt worked for me.\r\n\r\n","title":"Task :react-native-gradle-plugin:compileKotlin FAILED, &#39;compileJava&#39; task (current target is 1.8) and &#39;compileKotlin&#39; task (current target is 11)","body":"<p>I hade the same issue using expo</p>\n<p>I removed the <code>eas.json</code> file, as <code>eas build</code> creates a new <code>eas.json</code> file</p>\n<p>It worked for me.</p>\n"},{"tags":[],"owner":{"account_id":21382554,"reputation":1,"user_id":15748229,"display_name":"Vit&#243;ria Souza"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1680367571,"creation_date":1680366754,"answer_id":75907466,"question_id":73768537,"body_markdown":"I had the same problem and to solve this problem I did:\r\n\r\n 1. Installed java 11 and uninstalled that java 8;\r\n 2. In `package.json` I prefixed the version with `^`, then `yarn install`. *(Update `react native` version `0.68.2` for `^0.68.2`)*\r\n\r\nReference: https://github.com/facebook/react-native/issues/34410","title":"Task :react-native-gradle-plugin:compileKotlin FAILED, &#39;compileJava&#39; task (current target is 1.8) and &#39;compileKotlin&#39; task (current target is 11)","body":"<p>I had the same problem and to solve this problem I did:</p>\n<ol>\n<li>Installed java 11 and uninstalled that java 8;</li>\n<li>In <code>package.json</code> I prefixed the version with <code>^</code>, then <code>yarn install</code>. <em>(Update <code>react native</code> version <code>0.68.2</code> for <code>^0.68.2</code>)</em></li>\n</ol>\n<p>Reference: <a href=\"https://github.com/facebook/react-native/issues/34410\" rel=\"nofollow noreferrer\">https://github.com/facebook/react-native/issues/34410</a></p>\n"}],"owner":{"account_id":18772229,"reputation":356,"user_id":13688812,"display_name":"Dhanush Raja"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":29106,"favorite_count":0,"down_vote_count":0,"up_vote_count":16,"answer_count":7,"score":16,"last_activity_date":1698181990,"creation_date":1663561990,"question_id":73768537,"body_markdown":"    info Running jetifier to migrate libraries to AndroidX. You can disable it using &quot;--no-jetifier&quot; flag.\r\n    Jetifier found 936 file(s) to forward-jetify. Using 12 workers...\r\n    info JS server already running.\r\n    info Installing the app...\r\n    \r\n    &gt; Task :react-native-gradle-plugin:compileKotlin FAILED\r\n    &#39;compileJava&#39; task (current target is 1.8) and &#39;compileKotlin&#39; task (current target is 11) jvm target compatibility should be set to the same Java version.\r\n    1 actionable task: 1 executed\r\n    \r\n    FAILURE: Build failed with an exception.\r\n    \r\n    * What went wrong:\r\n    Execution failed for task &#39;:react-native-gradle-plugin:compileKotlin&#39;.\r\n    &gt; Failed to query the value of task &#39;:react-native-gradle-plugin:compileKotlin&#39; property &#39;compilerRunner$kotlin_gradle_plugin&#39;.\r\n       &gt; Kotlin could not find the required JDK tools in the Java installation. Make sure Kotlin compilation is running on a JDK, not JRE.\r\n    \r\n    * Try:\r\n    &gt; Run with --stacktrace option to get the stack trace.\r\n    &gt; Run with --info or --debug option to get more log output.\r\n    &gt; Run with --scan to get full insights.\r\n    \r\n    * Get more help at https://help.gradle.org\r\n    \r\n    BUILD FAILED in 4s\r\n    \r\n    error Failed to install the app. Make sure you have the Android development environment set up: https://reactnative.dev/docs/environment-setup.\r\n    Error: Command failed: gradlew.bat app:installDebug -PreactNativeDevServerPort=8081\r\n    \r\n    FAILURE: Build failed with an exception.\r\n    \r\n    * What went wrong:\r\n    Execution failed for task &#39;:react-native-gradle-plugin:compileKotlin&#39;.\r\n    &gt; Failed to query the value of task &#39;:react-native-gradle-plugin:compileKotlin&#39; property &#39;compilerRunner$kotlin_gradle_plugin&#39;.\r\n       &gt; Kotlin could not find the required JDK tools in the Java installation. Make sure Kotlin compilation is running on a JDK, not JRE.\r\n    \r\n    * Try:\r\n    &gt; Run with --stacktrace option to get the stack trace.\r\n    &gt; Run with --info or --debug option to get more log output.\r\n    &gt; Run with --scan to get full insights.\r\n    \r\n    * Get more help at https://help.gradle.org\r\n    \r\n    BUILD FAILED in 4s\r\n    \r\n        at makeError (C:\\Users\\dhanp\\React native projects\\test3\\ProjectName\\node_modules\\execa\\index.js:174:9)\r\n        at C:\\Users\\dhanp\\React native projects\\test3\\ProjectName\\node_modules\\execa\\index.js:278:16\r\n        at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\r\n        at async runOnAllDevices (C:\\Users\\dhanp\\React native projects\\test3\\ProjectName\\node_modules\\@react-native-community\\cli-platform-android\\build\\commands\\runAndroid\\runOnAllDevices.js:109:5)\r\n        at async Command.handleAction (C:\\Users\\dhanp\\React native projects\\test3\\ProjectName\\node_modules\\@react-native-community\\cli\\build\\index.js:192:9)\r\n    info Run CLI with --verbose flag for more details\r\n\r\nI have seen solutions which involve changing the classpath() and distribution URL, but I have already done it.\r\n\r\nfrom my build.gradle file:\r\n\r\n    dependencies {\r\n            classpath(&quot;com.android.tools.build:gradle:7.2.1&quot;)\r\n            classpath(&quot;com.facebook.react:react-native-gradle-plugin&quot;)\r\n            classpath(&quot;de.undercouch:gradle-download-task:4.1.2&quot;)\r\n            // NOTE: Do not place your application dependencies here; they belong\r\n            // in the individual module build.gradle files\r\n        }\r\n\r\nfrom gradle-wrapper\r\n\r\n    distributionBase=GRADLE_USER_HOME\r\n    distributionPath=wrapper/dists\r\n    distributionUrl=https\\://services.gradle.org/distributions/gradle-7.4.2-all.zip\r\n    zipStoreBase=GRADLE_USER_HOME\r\n    zipStorePath=wrapper/dists\r\n\r\nNone of this fixes the error, additionally, i have noticed that running gradlew clean also provokes the same error\r\n\r\n    &gt; Task :react-native-gradle-plugin:compileKotlin FAILED\r\n    &#39;compileJava&#39; task (current target is 1.8) and &#39;compileKotlin&#39; task (current target is 11) jvm target compatibility should be set to the same Java version.\r\n    \r\n    FAILURE: Build failed with an exception.\r\n    \r\n    * What went wrong:\r\n    Execution failed for task &#39;:react-native-gradle-plugin:compileKotlin&#39;.\r\n    &gt; Failed to query the value of task &#39;:react-native-gradle-plugin:compileKotlin&#39; property &#39;compilerRunner$kotlin_gradle_plugin&#39;.\r\n       &gt; Kotlin could not find the required JDK tools in the Java installation. Make sure Kotlin compilation is running on a JDK, not JRE.\r\n    \r\n    * Try:\r\n    &gt; Run with --stacktrace option to get the stack trace.\r\n    &gt; Run with --info or --debug option to get more log output.\r\n    &gt; Run with --scan to get full insights.\r\n    \r\n    * Get more help at https://help.gradle.org\r\n    \r\n    BUILD FAILED in 4s\r\n    1 actionable task: 1 executed\r\n\r\nI have also tried adding the following piece of code to the build.gradle file\r\n\r\n    android {\r\n    compileOptions {\r\n    sourceCompatibility = JavaVersion.VERSION_11\r\n    targetCompatibility = JavaVersion.VERSION_11\r\n    }\r\n    \r\n    kotlinOptions {\r\n    jvmTarget = JavaVersion.VERSION_11.toString()\r\n    }\r\n    }\r\n\r\n\r\nkindly help me fix this, I used to use EXPO CLI previously and everything was working well, All of this happened in an attempt to learn the React-native CLI.","title":"Task :react-native-gradle-plugin:compileKotlin FAILED, &#39;compileJava&#39; task (current target is 1.8) and &#39;compileKotlin&#39; task (current target is 11)","body":"<pre><code>info Running jetifier to migrate libraries to AndroidX. You can disable it using &quot;--no-jetifier&quot; flag.\nJetifier found 936 file(s) to forward-jetify. Using 12 workers...\ninfo JS server already running.\ninfo Installing the app...\n\n&gt; Task :react-native-gradle-plugin:compileKotlin FAILED\n'compileJava' task (current target is 1.8) and 'compileKotlin' task (current target is 11) jvm target compatibility should be set to the same Java version.\n1 actionable task: 1 executed\n\nFAILURE: Build failed with an exception.\n\n* What went wrong:\nExecution failed for task ':react-native-gradle-plugin:compileKotlin'.\n&gt; Failed to query the value of task ':react-native-gradle-plugin:compileKotlin' property 'compilerRunner$kotlin_gradle_plugin'.\n   &gt; Kotlin could not find the required JDK tools in the Java installation. Make sure Kotlin compilation is running on a JDK, not JRE.\n\n* Try:\n&gt; Run with --stacktrace option to get the stack trace.\n&gt; Run with --info or --debug option to get more log output.\n&gt; Run with --scan to get full insights.\n\n* Get more help at https://help.gradle.org\n\nBUILD FAILED in 4s\n\nerror Failed to install the app. Make sure you have the Android development environment set up: https://reactnative.dev/docs/environment-setup.\nError: Command failed: gradlew.bat app:installDebug -PreactNativeDevServerPort=8081\n\nFAILURE: Build failed with an exception.\n\n* What went wrong:\nExecution failed for task ':react-native-gradle-plugin:compileKotlin'.\n&gt; Failed to query the value of task ':react-native-gradle-plugin:compileKotlin' property 'compilerRunner$kotlin_gradle_plugin'.\n   &gt; Kotlin could not find the required JDK tools in the Java installation. Make sure Kotlin compilation is running on a JDK, not JRE.\n\n* Try:\n&gt; Run with --stacktrace option to get the stack trace.\n&gt; Run with --info or --debug option to get more log output.\n&gt; Run with --scan to get full insights.\n\n* Get more help at https://help.gradle.org\n\nBUILD FAILED in 4s\n\n    at makeError (C:\\Users\\dhanp\\React native projects\\test3\\ProjectName\\node_modules\\execa\\index.js:174:9)\n    at C:\\Users\\dhanp\\React native projects\\test3\\ProjectName\\node_modules\\execa\\index.js:278:16\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async runOnAllDevices (C:\\Users\\dhanp\\React native projects\\test3\\ProjectName\\node_modules\\@react-native-community\\cli-platform-android\\build\\commands\\runAndroid\\runOnAllDevices.js:109:5)\n    at async Command.handleAction (C:\\Users\\dhanp\\React native projects\\test3\\ProjectName\\node_modules\\@react-native-community\\cli\\build\\index.js:192:9)\ninfo Run CLI with --verbose flag for more details\n</code></pre>\n<p>I have seen solutions which involve changing the classpath() and distribution URL, but I have already done it.</p>\n<p>from my build.gradle file:</p>\n<pre><code>dependencies {\n        classpath(&quot;com.android.tools.build:gradle:7.2.1&quot;)\n        classpath(&quot;com.facebook.react:react-native-gradle-plugin&quot;)\n        classpath(&quot;de.undercouch:gradle-download-task:4.1.2&quot;)\n        // NOTE: Do not place your application dependencies here; they belong\n        // in the individual module build.gradle files\n    }\n</code></pre>\n<p>from gradle-wrapper</p>\n<pre><code>distributionBase=GRADLE_USER_HOME\ndistributionPath=wrapper/dists\ndistributionUrl=https\\://services.gradle.org/distributions/gradle-7.4.2-all.zip\nzipStoreBase=GRADLE_USER_HOME\nzipStorePath=wrapper/dists\n</code></pre>\n<p>None of this fixes the error, additionally, i have noticed that running gradlew clean also provokes the same error</p>\n<pre><code>&gt; Task :react-native-gradle-plugin:compileKotlin FAILED\n'compileJava' task (current target is 1.8) and 'compileKotlin' task (current target is 11) jvm target compatibility should be set to the same Java version.\n\nFAILURE: Build failed with an exception.\n\n* What went wrong:\nExecution failed for task ':react-native-gradle-plugin:compileKotlin'.\n&gt; Failed to query the value of task ':react-native-gradle-plugin:compileKotlin' property 'compilerRunner$kotlin_gradle_plugin'.\n   &gt; Kotlin could not find the required JDK tools in the Java installation. Make sure Kotlin compilation is running on a JDK, not JRE.\n\n* Try:\n&gt; Run with --stacktrace option to get the stack trace.\n&gt; Run with --info or --debug option to get more log output.\n&gt; Run with --scan to get full insights.\n\n* Get more help at https://help.gradle.org\n\nBUILD FAILED in 4s\n1 actionable task: 1 executed\n</code></pre>\n<p>I have also tried adding the following piece of code to the build.gradle file</p>\n<pre><code>android {\ncompileOptions {\nsourceCompatibility = JavaVersion.VERSION_11\ntargetCompatibility = JavaVersion.VERSION_11\n}\n\nkotlinOptions {\njvmTarget = JavaVersion.VERSION_11.toString()\n}\n}\n</code></pre>\n<p>kindly help me fix this, I used to use EXPO CLI previously and everything was working well, All of this happened in an attempt to learn the React-native CLI.</p>\n"},{"tags":["java","random"],"comments":[{"owner":{"account_id":3597514,"reputation":117173,"user_id":3001761,"display_name":"jonrsharpe"},"score":0,"creation_date":1698178382,"post_id":77355140,"comment_id":136371761,"body_markdown":"Why would it matter that the _input_ is randomised? Testing things where the _output_ is non-deterministic is tricky, but in the test you control the input.","body":"Why would it matter that the <i>input</i> is randomised? Testing things where the <i>output</i> is non-deterministic is tricky, but in the test you control the input."},{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":0,"creation_date":1698178676,"post_id":77355140,"comment_id":136371800,"body_markdown":"Yes, I&#39;d say also that you should design a series of specific tests that show your method(s) are working.  Testing the output is imperative here.  You can also test random inputs, but basically there you&#39;re just checking that the code doesn&#39;t crash.","body":"Yes, I&#39;d say also that you should design a series of specific tests that show your method(s) are working.  Testing the output is imperative here.  You can also test random inputs, but basically there you&#39;re just checking that the code doesn&#39;t crash."},{"owner":{"account_id":29745762,"reputation":11,"user_id":22796869,"display_name":"Jules"},"score":1,"creation_date":1698178866,"post_id":77355140,"comment_id":136371838,"body_markdown":"@jonrsharpe i thought it mattered because in uni I was told that we shouldn&#39;t modify our code for testing and right now all the methods and fields which I had to access in order to test the class are private.. And I thought it wouldn&#39;t be good practice to change that and add a method to manually set the die&#39;s values","body":"@jonrsharpe i thought it mattered because in uni I was told that we shouldn&#39;t modify our code for testing and right now all the methods and fields which I had to access in order to test the class are private.. And I thought it wouldn&#39;t be good practice to change that and add a method to manually set the die&#39;s values"},{"owner":{"account_id":3597514,"reputation":117173,"user_id":3001761,"display_name":"jonrsharpe"},"score":0,"creation_date":1698179074,"post_id":77355140,"comment_id":136371873,"body_markdown":"So it&#39;s the _state_ that&#39;s random not the _inputs_? A [mre] would help people understand your actual situation, but refactoring so they _are_ inputs would make it more testable.","body":"So it&#39;s the <i>state</i> that&#39;s random not the <i>inputs</i>? A <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> would help people understand your actual situation, but refactoring so they <i>are</i> inputs would make it more testable."},{"owner":{"account_id":29745762,"reputation":11,"user_id":22796869,"display_name":"Jules"},"score":0,"creation_date":1698179964,"post_id":77355140,"comment_id":136371984,"body_markdown":"@jonrsharpe i added one :)","body":"@jonrsharpe i added one :)"},{"owner":{"account_id":384206,"reputation":50386,"user_id":740553,"accept_rate":46,"display_name":"Mike &#39;Pomax&#39; Kamermans"},"score":0,"creation_date":1698179972,"post_id":77355140,"comment_id":136371985,"body_markdown":"Usually the first step is to not use a true random number generator, but a seedable pseudorandom number generator, so you can write deterministic tests.","body":"Usually the first step is to not use a true random number generator, but a seedable pseudorandom number generator, so you can write deterministic tests."},{"owner":{"account_id":3597514,"reputation":117173,"user_id":3001761,"display_name":"jonrsharpe"},"score":1,"creation_date":1698180166,"post_id":77355140,"comment_id":136372007,"body_markdown":"_&quot;a ResultCalculator is called, it gets handed over Draw.dice &amp; Draw.dieValuesAsInt&quot;_ - which is just two arrays, so you can pass whatever you want without faking anything. You haven&#39;t actually included the thing you want to test.","body":"<i>&quot;a ResultCalculator is called, it gets handed over Draw.dice &amp; Draw.dieValuesAsInt&quot;</i> - which is just two arrays, so you can pass whatever you want without faking anything. You haven&#39;t actually included the thing you want to test."},{"owner":{"account_id":29745762,"reputation":11,"user_id":22796869,"display_name":"Jules"},"score":0,"creation_date":1698180594,"post_id":77355140,"comment_id":136372070,"body_markdown":"@jonrsharpe ah, I think I get it now. I thought I had to manipulate my Code but I can just create my own Array/List. thanks :)","body":"@jonrsharpe ah, I think I get it now. I thought I had to manipulate my Code but I can just create my own Array/List. thanks :)"}],"answers":[{"tags":[],"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1698181709,"creation_date":1698181709,"answer_id":77355397,"question_id":77355140,"body_markdown":"You have a few options:\r\n\r\n## Proper design\r\n\r\nGenerally &#39;generate randomness&#39; is one part of a larger scheme. A yahtzee game isn&#39;t just one tangled mess that accepts &#39;play game&#39; in one end, and an entire yahtzee game rolls out at the other end with everything in the middle a black box. If that&#39;s how your code works, fix it, that&#39;s not a good way to write software. Everything you want to test shouldn&#39;t just &#39;roll up some randomness&#39;. It should work deterministically.\r\n\r\nA method should not be, say:\r\n\r\n```\r\npublic List&lt;ValidPlays&gt; calculatePlays() {\r\n  int[] dice = new int[5];\r\n  for (int i = 0; i &lt; dice.length; i++) dice[i] = rollDie();\r\n\r\n  // calculate valid plays\r\n}\r\n```\r\n\r\nBecause that&#39;s one method conflating two unrelated jobs: The job of rolling dice, and the job of calculating valid plays. There should be only one method that does the random thing, and it will be trivial. It just rolls up n random dice. You can still test it:\r\n\r\n```\r\npublic int[] rollDice(int amount) {\r\n  int[] out = new int[amount];\r\n  for (int i = 0; i &lt; amount; i++) out[i] = rollDie();\r\n  return out;\r\n}\r\n```\r\n\r\nyou can test this by checking that e.g. `assertEquals(6, rollDice(6).length)`. You can roll 100 times and check that all values are within 1 and 6 (never less than 1, and never more than 6).\r\n\r\nAnd all other methods take in an array of dice, which for test purposes aren&#39;t rolled up but are passed in as constants by your test code.\r\n\r\n## Seed values\r\n\r\nThis is more advanced, but if a method&#39;s single task inherently involves taking some randomness as part of a larger process, then the above won&#39;t work. Imagine a method that takes in a bunch of student course lists (which courses a student is taking) and its job is to shuffle records so that the end result in certain ways looks like a realistic scenario and accurately represents how full each class is, but is anonymous in the sense that the end result cannot be used to determine which classes a student is actually taking.\r\n\r\nIt&#39;s a bit harder to just &#39;pass in the random&#39; to such a method.\r\n\r\n__So, instead, pass in `Random` itself.__\r\n\r\nAn instance of `Random` is an object you can pass as parameter same as any other object. So, allow that. If you want, you can make an override that takes no arguments and passes in `new Random()` instead.\r\n\r\nThis way, you can get the same stream of random data every time by making a random object with a constant seed value. Try it!\r\n\r\n```\r\npublic static void main(String[] args) throws Exception {\r\n  Random r = new Random(12345L);\r\n  System.out.println(r.nextInt(1000));\r\n  System.out.println(r.nextInt(1000));\r\n  System.out.println(r.nextInt(1000));\r\n  System.out.println(r.nextInt(1000));\r\n  System.out.println(r.nextInt(1000));\r\n  System.out.println(r.nextInt(1000));\r\n}\r\n```\r\n\r\nRun that app a few times. The exact same sequence of numbers comes out every time.\r\n","title":"How do I test code with randomized Input in Java","body":"<p>You have a few options:</p>\n<h2>Proper design</h2>\n<p>Generally 'generate randomness' is one part of a larger scheme. A yahtzee game isn't just one tangled mess that accepts 'play game' in one end, and an entire yahtzee game rolls out at the other end with everything in the middle a black box. If that's how your code works, fix it, that's not a good way to write software. Everything you want to test shouldn't just 'roll up some randomness'. It should work deterministically.</p>\n<p>A method should not be, say:</p>\n<pre><code>public List&lt;ValidPlays&gt; calculatePlays() {\n  int[] dice = new int[5];\n  for (int i = 0; i &lt; dice.length; i++) dice[i] = rollDie();\n\n  // calculate valid plays\n}\n</code></pre>\n<p>Because that's one method conflating two unrelated jobs: The job of rolling dice, and the job of calculating valid plays. There should be only one method that does the random thing, and it will be trivial. It just rolls up n random dice. You can still test it:</p>\n<pre><code>public int[] rollDice(int amount) {\n  int[] out = new int[amount];\n  for (int i = 0; i &lt; amount; i++) out[i] = rollDie();\n  return out;\n}\n</code></pre>\n<p>you can test this by checking that e.g. <code>assertEquals(6, rollDice(6).length)</code>. You can roll 100 times and check that all values are within 1 and 6 (never less than 1, and never more than 6).</p>\n<p>And all other methods take in an array of dice, which for test purposes aren't rolled up but are passed in as constants by your test code.</p>\n<h2>Seed values</h2>\n<p>This is more advanced, but if a method's single task inherently involves taking some randomness as part of a larger process, then the above won't work. Imagine a method that takes in a bunch of student course lists (which courses a student is taking) and its job is to shuffle records so that the end result in certain ways looks like a realistic scenario and accurately represents how full each class is, but is anonymous in the sense that the end result cannot be used to determine which classes a student is actually taking.</p>\n<p>It's a bit harder to just 'pass in the random' to such a method.</p>\n<p><strong>So, instead, pass in <code>Random</code> itself.</strong></p>\n<p>An instance of <code>Random</code> is an object you can pass as parameter same as any other object. So, allow that. If you want, you can make an override that takes no arguments and passes in <code>new Random()</code> instead.</p>\n<p>This way, you can get the same stream of random data every time by making a random object with a constant seed value. Try it!</p>\n<pre><code>public static void main(String[] args) throws Exception {\n  Random r = new Random(12345L);\n  System.out.println(r.nextInt(1000));\n  System.out.println(r.nextInt(1000));\n  System.out.println(r.nextInt(1000));\n  System.out.println(r.nextInt(1000));\n  System.out.println(r.nextInt(1000));\n  System.out.println(r.nextInt(1000));\n}\n</code></pre>\n<p>Run that app a few times. The exact same sequence of numbers comes out every time.</p>\n"}],"owner":{"account_id":29745762,"reputation":11,"user_id":22796869,"display_name":"Jules"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":72,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1698181709,"creation_date":1698178235,"question_id":77355140,"body_markdown":"I&#39;m writing a Yahtzee-style game and I&#39;m in the stage where I&#39;ve finished coding the ResultCalculator class, which takes the combination of dice and calculates, which results (Large Straight, Yahtzee...) are valid results. \r\n\r\nI can&#39;t figure out a good way to test it, since the input is randomized. Sure, I could manipulate the Draw class where the dice are rolled so that I can manually set the dies&#39; values but that doesn&#39;t seem very straightforward. Any ideas? How are classes like this getting tested in real life?\r\n\r\n```\r\npublic class Die {\r\n    private Value value;\r\n    private int valueAsInt;\r\n    private final Random random = new Random();\r\n\r\n    public void rollDie() {\r\n        int result = random.nextInt(1, 7);\r\n        value = switch (result) {\r\n            case 1 -&gt; Value.ONE;\r\n            case 2 -&gt; Value.TWO;\r\n            case 3 -&gt; Value.THREE;\r\n            case 4 -&gt; Value.FOUR;\r\n            case 5 -&gt; Value.FIVE;\r\n            case 6 -&gt; Value.SIX;\r\n        };\r\n        valueAsInt = result;\r\n    }\r\n\r\n\r\npublic class Draw {\r\n    private static final int NUMBER_OF_DICE = 5;\r\n    private final Die[] dice = new Die[NUMBER_OF_DICE];\r\n    private final ArrayList&lt;Integer&gt; dieValuesAsInt = new ArrayList&lt;&gt;();\r\n    private ArrayList&lt;Result&gt; results = new ArrayList&lt;&gt;();\r\n\r\n \r\n    private void rollDice() {\r\n        for (Die die : dice) {\r\n            die.rollDie();\r\n        }\r\n    }\r\n\r\n\r\n```\r\nThen a ResultCalculator is called, it gets handed over Draw.dice &amp; Draw.dieValuesAsInt","title":"How do I test code with randomized Input in Java","body":"<p>I'm writing a Yahtzee-style game and I'm in the stage where I've finished coding the ResultCalculator class, which takes the combination of dice and calculates, which results (Large Straight, Yahtzee...) are valid results.</p>\n<p>I can't figure out a good way to test it, since the input is randomized. Sure, I could manipulate the Draw class where the dice are rolled so that I can manually set the dies' values but that doesn't seem very straightforward. Any ideas? How are classes like this getting tested in real life?</p>\n<pre><code>public class Die {\n    private Value value;\n    private int valueAsInt;\n    private final Random random = new Random();\n\n    public void rollDie() {\n        int result = random.nextInt(1, 7);\n        value = switch (result) {\n            case 1 -&gt; Value.ONE;\n            case 2 -&gt; Value.TWO;\n            case 3 -&gt; Value.THREE;\n            case 4 -&gt; Value.FOUR;\n            case 5 -&gt; Value.FIVE;\n            case 6 -&gt; Value.SIX;\n        };\n        valueAsInt = result;\n    }\n\n\npublic class Draw {\n    private static final int NUMBER_OF_DICE = 5;\n    private final Die[] dice = new Die[NUMBER_OF_DICE];\n    private final ArrayList&lt;Integer&gt; dieValuesAsInt = new ArrayList&lt;&gt;();\n    private ArrayList&lt;Result&gt; results = new ArrayList&lt;&gt;();\n\n \n    private void rollDice() {\n        for (Die die : dice) {\n            die.rollDie();\n        }\n    }\n\n\n</code></pre>\n<p>Then a ResultCalculator is called, it gets handed over Draw.dice &amp; Draw.dieValuesAsInt</p>\n"},{"tags":["java","database","postgresql","spring-boot","jpql"],"owner":{"account_id":29743441,"reputation":1,"user_id":22795186,"display_name":"Done"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1698181311,"creation_date":1698163808,"question_id":77353749,"body_markdown":"I have a Spring Boot project. These are my 3 classes that represent the User, Group, and Membership(@ManyToMany relation between the user and the group with custom table) entities:\r\n\r\nUser.java\r\n\r\n```\r\n@Getter\r\n@Setter\r\n@Builder\r\n@AllArgsConstructor\r\n@Entity\r\n@Table(name = &quot;users&quot;)\r\npublic class User extends BaseEntity {\r\n\r\n    @Id\r\n    @GeneratedValue\r\n    @Column(name = &quot;id&quot;, nullable = false)\r\n    private Long id;\r\n\r\n    @Column(name = &quot;name&quot;)\r\n    private String name;\r\n\r\n    @OneToMany(mappedBy = &quot;member&quot;, cascade = {CascadeType.PERSIST, CascadeType.MERGE})\r\n    private Set&lt;Membership&gt; membership;\r\n}\r\n```\r\nGroup.java\r\n\r\n```\r\n@Getter\r\n@Setter\r\n@Builder\r\n@AllArgsConstructor\r\n@Entity\r\n@Table(name = &quot;groups&quot;)\r\npublic class Group extends BaseEntity {\r\n\r\n    @Id\r\n    @GeneratedValue\r\n    @Column(name = &quot;id&quot;, nullable = false)\r\n    private Long id;\r\n\r\n    private String name;\r\n\r\n    @OneToMany(\r\n            mappedBy = &quot;group&quot;,\r\n            cascade = {CascadeType.PERSIST, CascadeType.MERGE},\r\n            fetch = FetchType.EAGER\r\n    )\r\n    private Set&lt;Membership&gt; members;\r\n}\r\n```\r\n\r\nMembership.java\r\n\r\n```\r\n@AllArgsConstructor\r\n@NoArgsConstructor\r\n@Getter\r\n@Setter\r\n@Entity\r\npublic class Membership extends BaseEntity {\r\n\r\n    @Id\r\n    @GeneratedValue\r\n    private Long id;\r\n\r\n    @ManyToOne(cascade = {CascadeType.PERSIST, CascadeType.MERGE})\r\n    @JoinColumn(name = &quot;user_id&quot;)\r\n    private User member;\r\n\r\n    @ManyToOne(cascade = {CascadeType.PERSIST, CascadeType.MERGE})\r\n    @JoinColumn(name = &quot;group_id&quot;)\r\n    private Group group;\r\n\r\n    @ManyToOne(cascade = {CascadeType.PERSIST, CascadeType.MERGE})\r\n    @JoinColumn(name = &quot;role_id&quot;)\r\n    private Role role;\r\n```\r\nAnd the BaseEntity that I am extending on the 3 classes has a property deleted of type boolean that is used for soft deletion.\r\n\r\n\r\n\r\n\r\nThe problem I have is this:\r\n- When I remove a user from a group I get the membership row that represented the relationship between the user and the group and set the deleted flag to true. But when all of the users are removed from the group then the query that I have does not return that group anymore, but I want to be able to still see the group even though all of the members have been removed. This is the query I use:\r\n\r\n```\r\n@Query(&quot;&quot;&quot;\r\n        SELECT DISTINCT g FROM Group g\r\n        LEFT JOIN FETCH g.members m\r\n        WHERE m.deleted = false OR m IS NULL\r\n        &quot;&quot;&quot;)\r\n    Set&lt;Group&gt; findAllGroupsWithNonDeletedMembers(Sort sort);\r\n```\r\n\r\n- I tried with different queries but I could not make it work, and the same problem goes from the user side, if I remove the user from all the groups he is a part of then that user is no longer returned. This is the query I use for fetching the users:\r\n\r\n```\r\n@Query(&quot;&quot;&quot;\r\n       SELECT DISTINCT u FROM User u\r\n       LEFT JOIN u.membership m ON m.deleted = true\r\n       &quot;&quot;&quot;)\r\n    List&lt;User&gt; findAllUsersWithNonDeletedMemberships();\r\n```\r\n\r\nSo my question is, what kind of query should I write so that I can accomplish the result I want?\r\nThanks.","title":"JPA Query for filtering nested entity when fetching parent entity","body":"<p>I have a Spring Boot project. These are my 3 classes that represent the User, Group, and Membership(@ManyToMany relation between the user and the group with custom table) entities:</p>\n<p>User.java</p>\n<pre><code>@Getter\n@Setter\n@Builder\n@AllArgsConstructor\n@Entity\n@Table(name = &quot;users&quot;)\npublic class User extends BaseEntity {\n\n    @Id\n    @GeneratedValue\n    @Column(name = &quot;id&quot;, nullable = false)\n    private Long id;\n\n    @Column(name = &quot;name&quot;)\n    private String name;\n\n    @OneToMany(mappedBy = &quot;member&quot;, cascade = {CascadeType.PERSIST, CascadeType.MERGE})\n    private Set&lt;Membership&gt; membership;\n}\n</code></pre>\n<p>Group.java</p>\n<pre><code>@Getter\n@Setter\n@Builder\n@AllArgsConstructor\n@Entity\n@Table(name = &quot;groups&quot;)\npublic class Group extends BaseEntity {\n\n    @Id\n    @GeneratedValue\n    @Column(name = &quot;id&quot;, nullable = false)\n    private Long id;\n\n    private String name;\n\n    @OneToMany(\n            mappedBy = &quot;group&quot;,\n            cascade = {CascadeType.PERSIST, CascadeType.MERGE},\n            fetch = FetchType.EAGER\n    )\n    private Set&lt;Membership&gt; members;\n}\n</code></pre>\n<p>Membership.java</p>\n<pre><code>@AllArgsConstructor\n@NoArgsConstructor\n@Getter\n@Setter\n@Entity\npublic class Membership extends BaseEntity {\n\n    @Id\n    @GeneratedValue\n    private Long id;\n\n    @ManyToOne(cascade = {CascadeType.PERSIST, CascadeType.MERGE})\n    @JoinColumn(name = &quot;user_id&quot;)\n    private User member;\n\n    @ManyToOne(cascade = {CascadeType.PERSIST, CascadeType.MERGE})\n    @JoinColumn(name = &quot;group_id&quot;)\n    private Group group;\n\n    @ManyToOne(cascade = {CascadeType.PERSIST, CascadeType.MERGE})\n    @JoinColumn(name = &quot;role_id&quot;)\n    private Role role;\n</code></pre>\n<p>And the BaseEntity that I am extending on the 3 classes has a property deleted of type boolean that is used for soft deletion.</p>\n<p>The problem I have is this:</p>\n<ul>\n<li>When I remove a user from a group I get the membership row that represented the relationship between the user and the group and set the deleted flag to true. But when all of the users are removed from the group then the query that I have does not return that group anymore, but I want to be able to still see the group even though all of the members have been removed. This is the query I use:</li>\n</ul>\n<pre><code>@Query(&quot;&quot;&quot;\n        SELECT DISTINCT g FROM Group g\n        LEFT JOIN FETCH g.members m\n        WHERE m.deleted = false OR m IS NULL\n        &quot;&quot;&quot;)\n    Set&lt;Group&gt; findAllGroupsWithNonDeletedMembers(Sort sort);\n</code></pre>\n<ul>\n<li>I tried with different queries but I could not make it work, and the same problem goes from the user side, if I remove the user from all the groups he is a part of then that user is no longer returned. This is the query I use for fetching the users:</li>\n</ul>\n<pre><code>@Query(&quot;&quot;&quot;\n       SELECT DISTINCT u FROM User u\n       LEFT JOIN u.membership m ON m.deleted = true\n       &quot;&quot;&quot;)\n    List&lt;User&gt; findAllUsersWithNonDeletedMemberships();\n</code></pre>\n<p>So my question is, what kind of query should I write so that I can accomplish the result I want?\nThanks.</p>\n"},{"tags":["java","openjdk-21"],"comments":[{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":2,"creation_date":1698150004,"post_id":77351964,"comment_id":136366130,"body_markdown":"Based on [this documentation](https://docs.oracle.com/en/java/javase/21/core/virtual-threads.html#GUID-15BDB995-028A-45A7-B6E2-9BA15C2E0501), I doubt there is a number.  You aren’t supposed to try limit virtual threads based on any count, from what I can tell.  And you definitely should not use thread pools with virtual threads;  virtual threads are already inherently managed like a pool.","body":"Based on <a href=\"https://docs.oracle.com/en/java/javase/21/core/virtual-threads.html#GUID-15BDB995-028A-45A7-B6E2-9BA15C2E0501\" rel=\"nofollow noreferrer\">this documentation</a>, I doubt there is a number.  You aren’t supposed to try limit virtual threads based on any count, from what I can tell.  And you definitely should not use thread pools with virtual threads;  virtual threads are already inherently managed like a pool."},{"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"score":0,"creation_date":1698150401,"post_id":77351964,"comment_id":136366195,"body_markdown":"For reference, the OP&#39;s quote seems to be from https://blog.rockthejvm.com/ultimate-guide-to-java-virtual-threads/","body":"For reference, the OP&#39;s quote seems to be from <a href=\"https://blog.rockthejvm.com/ultimate-guide-to-java-virtual-threads/\" rel=\"nofollow noreferrer\">blog.rockthejvm.com/ultimate-guide-to-java-virtual-threads</a>"},{"owner":{"account_id":8052511,"reputation":35,"user_id":6070607,"display_name":"Vuong"},"score":0,"creation_date":1698202417,"post_id":77351964,"comment_id":136374040,"body_markdown":"@VGR I just want to manage platform thread not virtual thread","body":"@VGR I just want to manage platform thread not virtual thread"}],"answers":[{"tags":[],"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1698181204,"creation_date":1698152509,"answer_id":77352289,"question_id":77351964,"body_markdown":"It helps to read the official documentation of [`java.lang.Thread`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Thread.html):\r\n\r\n&gt; **Implementation Note:**\r\n&gt;\r\n&gt; In the JDK Reference Implementation, the virtual thread scheduler may be configured with the following system properties:\r\n&gt;\r\n&gt; | System properties | System property\tDescription |\r\n&gt; | ----------------- | --------------------------- |\r\n&gt; | `jdk.virtualThreadScheduler.parallelism` | The number of platform threads available for scheduling virtual threads. It defaults to the number of available processors. |\r\n&gt; | `jdk.virtualThreadScheduler.maxPoolSize` | The maximum number of platform threads available to the scheduler. It defaults to 256. |\r\n\r\nThat means that you can change the maximum pool size when starting your application with \r\n\r\n    java -Djdk.virtualThreadScheduler.maxPoolSize=512 other arguments ...","title":"JDK21 Manage Virtual Thread Executor Service","body":"<p>It helps to read the official documentation of <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Thread.html\" rel=\"nofollow noreferrer\"><code>java.lang.Thread</code></a>:</p>\n<blockquote>\n<p><strong>Implementation Note:</strong></p>\n<p>In the JDK Reference Implementation, the virtual thread scheduler may be configured with the following system properties:</p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th>System properties</th>\n<th>System property Description</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>jdk.virtualThreadScheduler.parallelism</code></td>\n<td>The number of platform threads available for scheduling virtual threads. It defaults to the number of available processors.</td>\n</tr>\n<tr>\n<td><code>jdk.virtualThreadScheduler.maxPoolSize</code></td>\n<td>The maximum number of platform threads available to the scheduler. It defaults to 256.</td>\n</tr>\n</tbody>\n</table>\n</div></blockquote>\n<p>That means that you can change the maximum pool size when starting your application with</p>\n<pre><code>java -Djdk.virtualThreadScheduler.maxPoolSize=512 other arguments ...\n</code></pre>\n"}],"owner":{"account_id":8052511,"reputation":35,"user_id":6070607,"display_name":"Vuong"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":168,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"accepted_answer_id":77352289,"answer_count":1,"score":-2,"last_activity_date":1698181204,"creation_date":1698149741,"question_id":77351964,"body_markdown":"I know that \r\n\r\n&gt; The JVM maintains a pool of platform threads, created and maintained\r\n&gt; by a dedicated ForkJoinPool. Initially, the number of platform threads\r\n&gt; equals the number of CPU cores, and it cannot increase more than 256.\r\n\r\nbut i don&#39;t find how to config number of thread for this pool. \r\n","title":"JDK21 Manage Virtual Thread Executor Service","body":"<p>I know that</p>\n<blockquote>\n<p>The JVM maintains a pool of platform threads, created and maintained\nby a dedicated ForkJoinPool. Initially, the number of platform threads\nequals the number of CPU cores, and it cannot increase more than 256.</p>\n</blockquote>\n<p>but i don't find how to config number of thread for this pool.</p>\n"},{"tags":["java","spring-boot","file","spring-mvc","multipartform-data"],"answers":[{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1698215013,"post_id":77354910,"comment_id":136375166,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/77354910/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":20327682,"reputation":23,"user_id":14910598,"display_name":"Khaled"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698175705,"creation_date":1698175705,"answer_id":77354910,"question_id":77354507,"body_markdown":"i found a solution even if i don&#39;t know if it is the best solution\r\n\r\n```\r\n  @PostMapping(&quot;/service&quot;)\r\n    public ResponseEntity&lt;byte[]&gt; proxyPost(ProxyExchange&lt;byte[]&gt; proxy,\r\n                                            @ModelAttribute ServiceDto serviceDto,\r\n                                            @RequestHeader(&quot;authorization&quot;) String authorizationHeader,\r\n                                            @RequestPart(&quot;file&quot;) MultipartFile file\r\n                                           ) throws Exception {\r\n\r\n        HttpHeaders headers = new HttpHeaders();\r\n        headers.setContentType(MediaType.MULTIPART_FORM_DATA);\r\n        proxy.headers(headers);\r\n        proxy.body(this.buildBody(file,serviceDto));\r\n        proxy.header(&quot;Authorization-getway&quot;,authorizationHeader);\r\n        return proxy.uri(dzOptServiceUri + &quot;/api/service/&quot;).post(response -&gt;\r\n             ResponseEntity.status(response.getStatusCode()) //\r\n                    .headers(response.getHeaders()) //\r\n                    .body(response.getBody())\r\n        );\r\n    }\r\n\r\n    private MultiValueMap&lt;String, Object&gt; buildBody(MultipartFile file,ServiceDto serviceDto) throws IOException {\r\n        MultiValueMap&lt;String, Object&gt; body = new LinkedMultiValueMap&lt;&gt;();\r\n        body.add(&quot;libelle&quot;, serviceDto.getLibelle());\r\n        body.add(&quot;definition&quot;, serviceDto.getDefinition());\r\n        body.add(&quot;path&quot;, serviceDto.getPath());\r\n        body.add(&quot;icone&quot;, serviceDto.getPath());\r\n\r\n        HttpHeaders headers = new HttpHeaders();\r\n        headers.setContentType(MediaType.MULTIPART_FORM_DATA);\r\n\r\n        // Ajouter un fichier au corps de la requ&#234;te\r\n        body.add(&quot;file&quot;, new org.springframework.core.io.ByteArrayResource(file.getBytes()) {\r\n            @Override\r\n            public String getFilename() {\r\n                return &quot;&quot;;\r\n            }\r\n        });\r\n\r\n        return body;\r\n    }\r\n```","title":"how perform ProxyExchange post multipart request?","body":"<p>i found a solution even if i don't know if it is the best solution</p>\n<pre><code>  @PostMapping(&quot;/service&quot;)\n    public ResponseEntity&lt;byte[]&gt; proxyPost(ProxyExchange&lt;byte[]&gt; proxy,\n                                            @ModelAttribute ServiceDto serviceDto,\n                                            @RequestHeader(&quot;authorization&quot;) String authorizationHeader,\n                                            @RequestPart(&quot;file&quot;) MultipartFile file\n                                           ) throws Exception {\n\n        HttpHeaders headers = new HttpHeaders();\n        headers.setContentType(MediaType.MULTIPART_FORM_DATA);\n        proxy.headers(headers);\n        proxy.body(this.buildBody(file,serviceDto));\n        proxy.header(&quot;Authorization-getway&quot;,authorizationHeader);\n        return proxy.uri(dzOptServiceUri + &quot;/api/service/&quot;).post(response -&gt;\n             ResponseEntity.status(response.getStatusCode()) //\n                    .headers(response.getHeaders()) //\n                    .body(response.getBody())\n        );\n    }\n\n    private MultiValueMap&lt;String, Object&gt; buildBody(MultipartFile file,ServiceDto serviceDto) throws IOException {\n        MultiValueMap&lt;String, Object&gt; body = new LinkedMultiValueMap&lt;&gt;();\n        body.add(&quot;libelle&quot;, serviceDto.getLibelle());\n        body.add(&quot;definition&quot;, serviceDto.getDefinition());\n        body.add(&quot;path&quot;, serviceDto.getPath());\n        body.add(&quot;icone&quot;, serviceDto.getPath());\n\n        HttpHeaders headers = new HttpHeaders();\n        headers.setContentType(MediaType.MULTIPART_FORM_DATA);\n\n        // Ajouter un fichier au corps de la requête\n        body.add(&quot;file&quot;, new org.springframework.core.io.ByteArrayResource(file.getBytes()) {\n            @Override\n            public String getFilename() {\n                return &quot;&quot;;\n            }\n        });\n\n        return body;\n    }\n</code></pre>\n"}],"owner":{"account_id":20327682,"reputation":23,"user_id":14910598,"display_name":"Khaled"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":78,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1698181173,"creation_date":1698171367,"question_id":77354507,"body_markdown":"please i need help ! \r\n\r\nI have tried to redirect multipart request using ProxyExchange, and I don&#39;t succeed.\r\n\r\nHas anyone done it before?\r\n\r\nthank u in advance \r\n\r\n```\r\n @PostMapping(&quot;/service&quot;)\r\n    public ResponseEntity&lt;byte[]&gt; proxyPost(ProxyExchange&lt;byte[]&gt; proxy, @RequestHeader(&quot;authorization&quot;) String authorizationHeader,@RequestPart(&quot;file&quot;) MultipartFile file) throws Exception {\r\n        proxy.header(&quot;Authorization-getway&quot;,authorizationHeader);\r\n\r\n        return proxy.uri(dzOptServiceUri.toString() + &quot;/api/service/&quot;).post(response -&gt; {\r\n            return ResponseEntity.status(response.getStatusCode()) //\r\n                    .headers(response.getHeaders()) //\r\n                    .header(&quot;Authorization-getway&quot;, authorizationHeader) //\r\n                    .body(response.getBody());\r\n\r\n        });\r\n    }\r\n```","title":"how perform ProxyExchange post multipart request?","body":"<p>please i need help !</p>\n<p>I have tried to redirect multipart request using ProxyExchange, and I don't succeed.</p>\n<p>Has anyone done it before?</p>\n<p>thank u in advance</p>\n<pre><code> @PostMapping(&quot;/service&quot;)\n    public ResponseEntity&lt;byte[]&gt; proxyPost(ProxyExchange&lt;byte[]&gt; proxy, @RequestHeader(&quot;authorization&quot;) String authorizationHeader,@RequestPart(&quot;file&quot;) MultipartFile file) throws Exception {\n        proxy.header(&quot;Authorization-getway&quot;,authorizationHeader);\n\n        return proxy.uri(dzOptServiceUri.toString() + &quot;/api/service/&quot;).post(response -&gt; {\n            return ResponseEntity.status(response.getStatusCode()) //\n                    .headers(response.getHeaders()) //\n                    .header(&quot;Authorization-getway&quot;, authorizationHeader) //\n                    .body(response.getBody());\n\n        });\n    }\n</code></pre>\n"},{"tags":["java","jdbc","h2","helidon"],"comments":[{"owner":{"account_id":463786,"reputation":668,"user_id":866889,"accept_rate":60,"display_name":"Dmitry Aleksandrov"},"score":0,"creation_date":1697804587,"post_id":77327500,"comment_id":136329171,"body_markdown":"Looks like you have not created the `test`db in H2? Did you verify this?","body":"Looks like you have not created the <code>test</code>db in H2? Did you verify this?"},{"owner":{"account_id":7352110,"reputation":253,"user_id":8728919,"accept_rate":50,"display_name":"swing1234"},"score":0,"creation_date":1697824937,"post_id":77327500,"comment_id":136332865,"body_markdown":"@DmitryAleksandrov could you please elaborate? I believe I am so in the following line: JdbcDataSource h2DataSource = new JdbcDataSource();","body":"@DmitryAleksandrov could you please elaborate? I believe I am so in the following line: JdbcDataSource h2DataSource = new JdbcDataSource();"},{"owner":{"account_id":463786,"reputation":668,"user_id":866889,"accept_rate":60,"display_name":"Dmitry Aleksandrov"},"score":0,"creation_date":1698163593,"post_id":77327500,"comment_id":136369197,"body_markdown":"No, I mean if the H2 database itself is created properly?","body":"No, I mean if the H2 database itself is created properly?"}],"answers":[{"tags":[],"owner":{"account_id":72101,"reputation":15566,"user_id":208288,"accept_rate":67,"display_name":"Laird Nelson"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698181124,"creation_date":1698181124,"answer_id":77355359,"question_id":77327500,"body_markdown":"In one VM, you started a database server [in webserver mode to support the console](https://www.h2database.com/html/tutorial.html#using_server):\r\n\r\n```\r\nthis.server = Server.createWebServer(&quot;-webPort&quot;, &quot;8082&quot;).start();\r\n```\r\n\r\nThen in another VM I think you attempt to connect to another, differently-named database which, being an [in-memory database](https://www.h2database.com/html/features.html#in_memory_databases), was never created:\r\n\r\n```\r\nmy.application.db.h2.url=jdbc:h2:mem:testdb\r\n```\r\n\r\nI suggest you read about [how H2 works](https://www.h2database.com/html/tutorial.html#using_server) in its excellent, comprehensive documentation.\r\n","title":"Helidon MP/Java/H2 database: H2 console cannot find database &#39;testdb&#39;","body":"<p>In one VM, you started a database server <a href=\"https://www.h2database.com/html/tutorial.html#using_server\" rel=\"nofollow noreferrer\">in webserver mode to support the console</a>:</p>\n<pre><code>this.server = Server.createWebServer(&quot;-webPort&quot;, &quot;8082&quot;).start();\n</code></pre>\n<p>Then in another VM I think you attempt to connect to another, differently-named database which, being an <a href=\"https://www.h2database.com/html/features.html#in_memory_databases\" rel=\"nofollow noreferrer\">in-memory database</a>, was never created:</p>\n<pre><code>my.application.db.h2.url=jdbc:h2:mem:testdb\n</code></pre>\n<p>I suggest you read about <a href=\"https://www.h2database.com/html/tutorial.html#using_server\" rel=\"nofollow noreferrer\">how H2 works</a> in its excellent, comprehensive documentation.</p>\n"}],"owner":{"account_id":7352110,"reputation":253,"user_id":8728919,"accept_rate":50,"display_name":"swing1234"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":71,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1698181124,"creation_date":1697757283,"question_id":77327500,"body_markdown":"I am building a simple Helidon MP (v 3.2.2) application that uses H2 db and makes queries on an Employee table. I am able to make rest calls to my table. However, I am having trouble getting the H2 console to work so that I can view my entity table.\r\n\r\n\r\nI am configuring my H2 database programmatically as shown below:\r\n\r\n```\r\n@ApplicationScoped\r\n@Named(&quot;myDs&quot;)\r\npublic class MyDataSource implements DataSource {\r\n\t\r\n\t@Override\r\n\tpublic Connection getConnection() throws SQLException {\r\n\t\t\tJdbcDataSource h2DataSource = new JdbcDataSource();\r\n\t\t\th2DataSource.setURL(config.getValue(&quot;my.application.db.h2.url&quot;, String.class));\r\n\t\t\th2DataSource.setUser(config.getValue(&quot;my.applicaton.db.h2.user&quot;, String.class));\r\n\t\t\th2DataSource.setPassword(config.getValue(&quot;my.application.db.h2.pass&quot;, String.class));\r\n\t\t\treturn h2DataSource.getConnection();\r\n    }\r\n}\r\n```\r\n\r\n(Reason for doing this programmatically is so that the DataSource class can support different types of databases (i.e H2, Oracle, etc).\r\n\r\n\r\nI am getting the db credentials from my local microprofile-config.properties file:\r\n\r\n```\r\nmy.application.db.h2.url=jdbc:h2:mem:testdb;INIT=RUNSCRIPT FROM &#39;classpath:employee.sql&#39;\r\nmy.applicaton.db.h2.user=sa\r\nmy.application.db.h2.pass=&quot;&quot;\r\n```\r\n\r\nemployee.sql:\r\n\r\n```\r\nCREATE TABLE IF NOT EXISTS EMPLOYEE (\r\n    ID INT NOT NULL PRIMARY KEY,\r\n    CREATED_BY VARCHAR(240) NOT NULL,\r\n    CREATION_DATE TIMESTAMP NOT NULL,\r\n    DEPT VARCHAR(64) NOT NULL,\r\n    LAST_UPDATE_DATE TIMESTAMP NOT NULL,\r\n    LAST_UPDATED_BY VARCHAR(240) NOT NULL,\r\n    NAME VARCHAR(64) NOT NULL\r\n);\r\n\r\ninsert into EMPLOYEE (ID, CREATED_BY, CREATION_DATE, DEPT, LAST_UPDATE_DATE, LAST_UPDATED_BY, NAME) values (1, &#39;John&#39;, CURRENT_TIMESTAMP, &#39;Accounting&#39;, CURRENT_TIMESTAMP, &#39;John&#39;, &#39;Manon&#39;);\r\ninsert into EMPLOYEE (ID, CREATED_BY, CREATION_DATE, DEPT, LAST_UPDATE_DATE, LAST_UPDATED_BY, NAME) values (2, &#39;John&#39;, CURRENT_TIMESTAMP, &#39;Support&#39;, CURRENT_TIMESTAMP, &#39;John&#39;, &#39;Tedmund&#39;);\r\n```\r\n\r\n\r\npersistence.xml:\r\n\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;persistence version=&quot;3.0&quot;\r\n             xmlns=&quot;https://jakarta.ee/xml/ns/persistence&quot;\r\n             xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n             xsi:schemaLocation=&quot;https://jakarta.ee/xml/ns/persistence\r\n                                 https://jakarta.ee/xml/ns/persistence/persistence_2_2.xsd&quot;&gt;\r\n    &lt;persistence-unit name=&quot;oalPu&quot; transaction-type=&quot;JTA&quot;&gt;\r\n        &lt;provider&gt;org.eclipse.persistence.jpa.PersistenceProvider&lt;/provider&gt;\r\n        &lt;jta-data-source&gt;myDs&lt;/jta-data-source&gt;\r\n        &lt;exclude-unlisted-classes&gt;false&lt;/exclude-unlisted-classes&gt;\r\n        &lt;properties&gt;\r\n            &lt;property name=&quot;eclipselink.target-server&quot; value=&quot;io.helidon.integrations.cdi.eclipselink.CDISEPlatform&quot;/&gt;\r\n        &lt;/properties&gt;\r\n    &lt;/persistence-unit&gt;\r\n&lt;/persistence&gt;\r\n```\r\n\r\n\r\nI also have a repository class that uses EntityManager, and a controller class as well.\r\nAnd finally, I have an H2Server class that should start H2 server on localhost:8082 so that I can actually view the employee table:\r\n\r\n```\r\n@ApplicationScoped\r\npublic class H2Server {\r\n\tprivate Server server;\r\n\tprivate Config config = ConfigProvider.getConfig();\r\n\r\n\tpublic void init(@Observes @Initialized(ApplicationScoped.class) Object o) throws SQLException {\r\n\t\tString dbType = config.getValue(&quot;my.application.db.type&quot;, String.class);\r\n\t\tif(dbType.equals(&quot;h2&quot;)) {\r\n\t\t\tlog.debug(&quot;STARTING H2&quot;);\r\n\t\t\tthis.server = Server.createWebServer(&quot;-webPort&quot;, &quot;8082&quot;).start();\r\n\t\t}\r\n\t}\r\n\r\n\t@PreDestroy\r\n\tpublic void destroy() {\r\n\t\tif(server != null)\r\n\t\t\tserver.stop();\r\n\t}\r\n}\r\n```\r\n\r\n\r\nWith this configuration, I am able to run my application and make REST calls to the employee table. However, I am unable to view the Employee table on the H2 server running on localhost:8082. When I enter the url, username, and password on the H2 console, I get the following error:\r\n\r\n```\r\nDatabase &quot;mem:testdb&quot; not found, either pre-create it or allow remote database creation (not recommended in secure environments) [90149-212] 90149/90149\r\n```\r\n\r\n\r\nI verified the jdbc url, username, and password on the H2 console are indeed correct.\r\nAny suggestions on how to make the H2 console work? ","title":"Helidon MP/Java/H2 database: H2 console cannot find database &#39;testdb&#39;","body":"<p>I am building a simple Helidon MP (v 3.2.2) application that uses H2 db and makes queries on an Employee table. I am able to make rest calls to my table. However, I am having trouble getting the H2 console to work so that I can view my entity table.</p>\n<p>I am configuring my H2 database programmatically as shown below:</p>\n<pre><code>@ApplicationScoped\n@Named(&quot;myDs&quot;)\npublic class MyDataSource implements DataSource {\n    \n    @Override\n    public Connection getConnection() throws SQLException {\n            JdbcDataSource h2DataSource = new JdbcDataSource();\n            h2DataSource.setURL(config.getValue(&quot;my.application.db.h2.url&quot;, String.class));\n            h2DataSource.setUser(config.getValue(&quot;my.applicaton.db.h2.user&quot;, String.class));\n            h2DataSource.setPassword(config.getValue(&quot;my.application.db.h2.pass&quot;, String.class));\n            return h2DataSource.getConnection();\n    }\n}\n</code></pre>\n<p>(Reason for doing this programmatically is so that the DataSource class can support different types of databases (i.e H2, Oracle, etc).</p>\n<p>I am getting the db credentials from my local microprofile-config.properties file:</p>\n<pre><code>my.application.db.h2.url=jdbc:h2:mem:testdb;INIT=RUNSCRIPT FROM 'classpath:employee.sql'\nmy.applicaton.db.h2.user=sa\nmy.application.db.h2.pass=&quot;&quot;\n</code></pre>\n<p>employee.sql:</p>\n<pre><code>CREATE TABLE IF NOT EXISTS EMPLOYEE (\n    ID INT NOT NULL PRIMARY KEY,\n    CREATED_BY VARCHAR(240) NOT NULL,\n    CREATION_DATE TIMESTAMP NOT NULL,\n    DEPT VARCHAR(64) NOT NULL,\n    LAST_UPDATE_DATE TIMESTAMP NOT NULL,\n    LAST_UPDATED_BY VARCHAR(240) NOT NULL,\n    NAME VARCHAR(64) NOT NULL\n);\n\ninsert into EMPLOYEE (ID, CREATED_BY, CREATION_DATE, DEPT, LAST_UPDATE_DATE, LAST_UPDATED_BY, NAME) values (1, 'John', CURRENT_TIMESTAMP, 'Accounting', CURRENT_TIMESTAMP, 'John', 'Manon');\ninsert into EMPLOYEE (ID, CREATED_BY, CREATION_DATE, DEPT, LAST_UPDATE_DATE, LAST_UPDATED_BY, NAME) values (2, 'John', CURRENT_TIMESTAMP, 'Support', CURRENT_TIMESTAMP, 'John', 'Tedmund');\n</code></pre>\n<p>persistence.xml:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;persistence version=&quot;3.0&quot;\n             xmlns=&quot;https://jakarta.ee/xml/ns/persistence&quot;\n             xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n             xsi:schemaLocation=&quot;https://jakarta.ee/xml/ns/persistence\n                                 https://jakarta.ee/xml/ns/persistence/persistence_2_2.xsd&quot;&gt;\n    &lt;persistence-unit name=&quot;oalPu&quot; transaction-type=&quot;JTA&quot;&gt;\n        &lt;provider&gt;org.eclipse.persistence.jpa.PersistenceProvider&lt;/provider&gt;\n        &lt;jta-data-source&gt;myDs&lt;/jta-data-source&gt;\n        &lt;exclude-unlisted-classes&gt;false&lt;/exclude-unlisted-classes&gt;\n        &lt;properties&gt;\n            &lt;property name=&quot;eclipselink.target-server&quot; value=&quot;io.helidon.integrations.cdi.eclipselink.CDISEPlatform&quot;/&gt;\n        &lt;/properties&gt;\n    &lt;/persistence-unit&gt;\n&lt;/persistence&gt;\n</code></pre>\n<p>I also have a repository class that uses EntityManager, and a controller class as well.\nAnd finally, I have an H2Server class that should start H2 server on localhost:8082 so that I can actually view the employee table:</p>\n<pre><code>@ApplicationScoped\npublic class H2Server {\n    private Server server;\n    private Config config = ConfigProvider.getConfig();\n\n    public void init(@Observes @Initialized(ApplicationScoped.class) Object o) throws SQLException {\n        String dbType = config.getValue(&quot;my.application.db.type&quot;, String.class);\n        if(dbType.equals(&quot;h2&quot;)) {\n            log.debug(&quot;STARTING H2&quot;);\n            this.server = Server.createWebServer(&quot;-webPort&quot;, &quot;8082&quot;).start();\n        }\n    }\n\n    @PreDestroy\n    public void destroy() {\n        if(server != null)\n            server.stop();\n    }\n}\n</code></pre>\n<p>With this configuration, I am able to run my application and make REST calls to the employee table. However, I am unable to view the Employee table on the H2 server running on localhost:8082. When I enter the url, username, and password on the H2 console, I get the following error:</p>\n<pre><code>Database &quot;mem:testdb&quot; not found, either pre-create it or allow remote database creation (not recommended in secure environments) [90149-212] 90149/90149\n</code></pre>\n<p>I verified the jdbc url, username, and password on the H2 console are indeed correct.\nAny suggestions on how to make the H2 console work?</p>\n"},{"tags":["java","kotlin","web","javalin"],"comments":[{"owner":{"account_id":12743722,"reputation":19966,"user_id":12567365,"display_name":"andrewJames"},"score":0,"creation_date":1675863516,"post_id":75381577,"comment_id":133018918,"body_markdown":"Your PDF is in the static files location, so you don&#39;t need any specific logic in a Javalin route. You can just use the static URL directly (no need for `getResourceAsStream`) . For example: `http://your-webapp-root/sample.pdf`. Or, within the app itself, just `/sample.pdf`. It&#39;s no different from a static CSS file, JS file, etc.","body":"Your PDF is in the static files location, so you don&#39;t need any specific logic in a Javalin route. You can just use the static URL directly (no need for <code>getResourceAsStream</code>) . For example: <code>http:&#47;&#47;your-webapp-root&#47;sample.pdf</code>. Or, within the app itself, just <code>&#47;sample.pdf</code>. It&#39;s no different from a static CSS file, JS file, etc."},{"owner":{"account_id":12743722,"reputation":19966,"user_id":12567365,"display_name":"andrewJames"},"score":0,"creation_date":1675863614,"post_id":75381577,"comment_id":133018961,"body_markdown":"(Just to check: You have configured the Javalin static file location, right?)","body":"(Just to check: You have configured the Javalin static file location, right?)"}],"answers":[{"tags":[],"owner":{"account_id":29745903,"reputation":11,"user_id":22796981,"display_name":"Maksim Klyuev"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698180950,"creation_date":1698180950,"answer_id":77355347,"question_id":75381577,"body_markdown":"You can add directory with static files to your Javalin app like this:\r\n```\r\n        Javalin app = Javalin.create(javalinConfig -&gt; {\r\n            javalinConfig.staticFiles.add(&quot;/static&quot;);//add() accepts path to directory with static files \r\n        }).start(7070);\r\n```\r\nNow you can simply redirect in the app.post function:\r\n```\r\n        app.post(&quot;/&quot;, ctx -&gt; ctx.redirect(&quot;/fileName.pdf&quot;));\r\n```\r\n&quot;/fileName.pdf&quot; - path to your file in &quot;static&quot; folder \r\n","title":"How to serve static file with Javalin","body":"<p>You can add directory with static files to your Javalin app like this:</p>\n<pre><code>        Javalin app = Javalin.create(javalinConfig -&gt; {\n            javalinConfig.staticFiles.add(&quot;/static&quot;);//add() accepts path to directory with static files \n        }).start(7070);\n</code></pre>\n<p>Now you can simply redirect in the app.post function:</p>\n<pre><code>        app.post(&quot;/&quot;, ctx -&gt; ctx.redirect(&quot;/fileName.pdf&quot;));\n</code></pre>\n<p>&quot;/fileName.pdf&quot; - path to your file in &quot;static&quot; folder</p>\n"}],"owner":{"account_id":27731554,"reputation":1,"user_id":21169946,"display_name":"vvv"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":391,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1698180950,"creation_date":1675832976,"question_id":75381577,"body_markdown":"Building a web app with Javalin. How do I display a PDF from my staticfiles folder in the app.post function? \r\n\r\nI can&#39;t use .getResourceAsStream because it has images, and the function couldn&#39;t parse it. I can serve html files using ctx.html but can&#39;t find similar for PDF. I can find it manually by typing the file name into the address bar but want to serve it automatically.","title":"How to serve static file with Javalin","body":"<p>Building a web app with Javalin. How do I display a PDF from my staticfiles folder in the app.post function?</p>\n<p>I can't use .getResourceAsStream because it has images, and the function couldn't parse it. I can serve html files using ctx.html but can't find similar for PDF. I can find it manually by typing the file name into the address bar but want to serve it automatically.</p>\n"},{"tags":["java","generics"],"comments":[{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":2,"creation_date":1698125002,"post_id":77346996,"comment_id":136362016,"body_markdown":"Poor title. Rewrite to summarize your specific technical issue.","body":"Poor title. Rewrite to summarize your specific technical issue."},{"owner":{"account_id":5175809,"reputation":1052,"user_id":4142984,"accept_rate":83,"display_name":"Gyro Gearloose"},"score":0,"creation_date":1698175399,"post_id":77346996,"comment_id":136371247,"body_markdown":"These are really three questions: 1) why does Code 2 not work is easily answered, but then there is 2) why does Code 1 work, and 3) HOW does Code 1 work. I have no ideas on 2) and 3).","body":"These are really three questions: 1) why does Code 2 not work is easily answered, but then there is 2) why does Code 1 work, and 3) HOW does Code 1 work. I have no ideas on 2) and 3)."},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1698182671,"post_id":77346996,"comment_id":136372370,"body_markdown":"Exception such as what?","body":"Exception such as what?"}],"answers":[{"comments":[{"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"score":1,"creation_date":1698082958,"post_id":77347191,"comment_id":136357598,"body_markdown":"It&#39;s not just about assigning to an `Integer` variable: if you invoke a method on the result - even a method found on `Object` - you&#39;ll get a `ClassCastException`: `c.convert(&quot;a&quot;).toString()` https://ideone.com/5Tsi0e","body":"It&#39;s not just about assigning to an <code>Integer</code> variable: if you invoke a method on the result - even a method found on <code>Object</code> - you&#39;ll get a <code>ClassCastException</code>: <code>c.convert(&quot;a&quot;).toString()</code> <a href=\"https://ideone.com/5Tsi0e\" rel=\"nofollow noreferrer\">ideone.com/5Tsi0e</a>"},{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":1,"creation_date":1698084439,"post_id":77347191,"comment_id":136357813,"body_markdown":"@AndyTurner Interesting. So in your example Java tries to call `Integer#toString()`, which is logical, and which obviously gives that exception. I bet `((Object) c.convert(&quot;a&quot;)) .toString()` would work.","body":"@AndyTurner Interesting. So in your example Java tries to call <code>Integer#toString()</code>, which is logical, and which obviously gives that exception. I bet <code>((Object) c.convert(&quot;a&quot;)) .toString()</code> would work."},{"owner":{"account_id":31180,"reputation":29173,"user_id":85421,"display_name":"user85421"},"score":1,"creation_date":1698084749,"post_id":77347191,"comment_id":136357864,"body_markdown":"@Ole actually the compiler is adding a `checkcast`, like if we had `Integer number = (Integer) c.convert(&quot;a&quot;);` (it is then calling `println(Object)`, that means, still calling `Object#toString`","body":"@Ole actually the compiler is adding a <code>checkcast</code>, like if we had <code>Integer number = (Integer) c.convert(&quot;a&quot;);</code> (it is then calling <code>println(Object)</code>, that means, still calling <code>Object#toString</code>"},{"owner":{"account_id":5175809,"reputation":1052,"user_id":4142984,"accept_rate":83,"display_name":"Gyro Gearloose"},"score":0,"creation_date":1698175044,"post_id":77347191,"comment_id":136371191,"body_markdown":"@AndyTurner so what does a cast to type (T) really do after type erasure and there is no T left at all? Cast to Object? Deffer the decision until the object is used, and than throw an error no matter what?","body":"@AndyTurner so what does a cast to type (T) really do after type erasure and there is no T left at all? Cast to Object? Deffer the decision until the object is used, and than throw an error no matter what?"},{"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"score":0,"creation_date":1698179723,"post_id":77347191,"comment_id":136371957,"body_markdown":"@GyroGearloose `(T)` is an unchecked cast: there is no bytecode instruction inserted for it, so nothing happens there at runtime. The cast is inserted at the call site; and no, it doesn&#39;t throw &quot;no matter what&quot;: OP has presented code where it doesn&#39;t throw; also, it doesn&#39;t throw if the call site cast succeeds.","body":"@GyroGearloose <code>(T)</code> is an unchecked cast: there is no bytecode instruction inserted for it, so nothing happens there at runtime. The cast is inserted at the call site; and no, it doesn&#39;t throw &quot;no matter what&quot;: OP has presented code where it doesn&#39;t throw; also, it doesn&#39;t throw if the call site cast succeeds."}],"tags":[],"owner":{"account_id":29064797,"reputation":51,"user_id":22264653,"display_name":"Mafinor"},"comment_count":5,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1698081681,"creation_date":1698081681,"answer_id":77347191,"question_id":77346996,"body_markdown":"In Java, the behavior of generics is closely tied to type erasure. Both of your Convert class versions are utilizing unchecked casts, which is not a good practice and can lead to issues like you&#39;re facing.\r\n\r\n\r\n    System.out.println(c.convert(&quot;a&quot;));\r\n\r\nIn this case, you are not assigning the output of c.convert(&quot;a&quot;) to an Integer variable. The method System.out.println(Object obj) will print the string representation of any object, so this code works without a problem. The result of c.convert(&quot;a&quot;) is actually an Object, and System.out.println has no issue with that.\r\n\r\n    Integer number = c.convert(&quot;a&quot;);\r\n\r\nIn this case, you&#39;re trying to force an assignment from Object (what convert method actually returns due to type erasure) to Integer. At runtime, Java attempts to cast the String &quot;a&quot; to Integer, which is not a valid operation, so a ClassCastException is thrown.\r\n\r\nFor the reference: https://docs.oracle.com/javase/tutorial/java/generics/index.html","title":"Generic in Java","body":"<p>In Java, the behavior of generics is closely tied to type erasure. Both of your Convert class versions are utilizing unchecked casts, which is not a good practice and can lead to issues like you're facing.</p>\n<pre><code>System.out.println(c.convert(&quot;a&quot;));\n</code></pre>\n<p>In this case, you are not assigning the output of c.convert(&quot;a&quot;) to an Integer variable. The method System.out.println(Object obj) will print the string representation of any object, so this code works without a problem. The result of c.convert(&quot;a&quot;) is actually an Object, and System.out.println has no issue with that.</p>\n<pre><code>Integer number = c.convert(&quot;a&quot;);\n</code></pre>\n<p>In this case, you're trying to force an assignment from Object (what convert method actually returns due to type erasure) to Integer. At runtime, Java attempts to cast the String &quot;a&quot; to Integer, which is not a valid operation, so a ClassCastException is thrown.</p>\n<p>For the reference: <a href=\"https://docs.oracle.com/javase/tutorial/java/generics/index.html\" rel=\"noreferrer\">https://docs.oracle.com/javase/tutorial/java/generics/index.html</a></p>\n"},{"tags":[],"owner":{"account_id":5175809,"reputation":1052,"user_id":4142984,"accept_rate":83,"display_name":"Gyro Gearloose"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698095540,"creation_date":1698093264,"answer_id":77348176,"question_id":77346996,"body_markdown":"Your &quot;convert&quot; doesn&#39;t change the structure of the data, just the pretended type.\r\n\r\nSo you cast your data from class String to class Integer, just *declaring* it would be an Integer.\r\n\r\nWithout changing the structure.\r\n\r\nYou can parse the String to make it an Integer, but just calling a *cat* to be a *dog* won&#39;t do the trick.\r\n\r\n---\r\n\r\nEdit: you can cast primitive types, but not Object s, not unless the objects are in the same hierarchy.\r\n\r\nHow should the compiler know how you would like to be two unrelated Objects to be converted?\r\n","title":"Generic in Java","body":"<p>Your &quot;convert&quot; doesn't change the structure of the data, just the pretended type.</p>\n<p>So you cast your data from class String to class Integer, just <em>declaring</em> it would be an Integer.</p>\n<p>Without changing the structure.</p>\n<p>You can parse the String to make it an Integer, but just calling a <em>cat</em> to be a <em>dog</em> won't do the trick.</p>\n<hr />\n<p>Edit: you can cast primitive types, but not Object s, not unless the objects are in the same hierarchy.</p>\n<p>How should the compiler know how you would like to be two unrelated Objects to be converted?</p>\n"},{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1698231189,"post_id":77355310,"comment_id":136378049,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/77355310/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":29702458,"reputation":1,"user_id":22764221,"display_name":"Hossein Rezaei"},"comment_count":1,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1698180474,"creation_date":1698180474,"answer_id":77355310,"question_id":77346996,"body_markdown":"in code1:\r\nbecause Erasure in Runtime RawType generic.\r\nin Code2:\r\nbecause Erasure in Runtime RawType generic cause uchecking cast\r\nand Integer can&#39;t cast to String \r\n","title":"Generic in Java","body":"<p>in code1:\nbecause Erasure in Runtime RawType generic.\nin Code2:\nbecause Erasure in Runtime RawType generic cause uchecking cast\nand Integer can't cast to String</p>\n"}],"owner":{"account_id":24578820,"reputation":13,"user_id":18484275,"display_name":"BrisS"},"comment_count":3,"delete_vote_count":1,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":142,"favorite_count":0,"down_vote_count":4,"up_vote_count":2,"closed_date":1698234046,"answer_count":3,"score":-2,"last_activity_date":1698180474,"creation_date":1698079682,"question_id":77346996,"body_markdown":"i have a test with generic in java. This is my code:\r\nCode 1:\r\n\r\n```\r\npublic class Main {\r\n    public static void main(String[] args) {\r\n        Convert&lt;String, Integer&gt; c = new Convert&lt;&gt;();\r\n//        Integer number = c.convert(&quot;a&quot;);\r\n        System.out.println(c.convert(&quot;a&quot;));\r\n    }\r\n\r\n    static class Convert&lt;E, T&gt; {\r\n        public T convert(E element) {\r\n            return (T) element;\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nand Code 2:\r\n\r\n```\r\npublic class Main {\r\n    public static void main(String[] args) {\r\n        Convert&lt;String, Integer&gt; c = new Convert&lt;&gt;();\r\n        Integer number = c.convert(&quot;a&quot;);\r\n        System.out.println(number);\r\n    }\r\n\r\n    static class Convert&lt;E, T&gt; {\r\n        public T convert(E element) {\r\n            return (T) element;\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n\r\n\r\nWhen I run code 1, output is &quot;a&quot;, but when I run code 2, it appear Exception.\r\nWhy code 1 still print &quot;a&quot;?","title":"Generic in Java","body":"<p>i have a test with generic in java. This is my code:\nCode 1:</p>\n<pre><code>public class Main {\n    public static void main(String[] args) {\n        Convert&lt;String, Integer&gt; c = new Convert&lt;&gt;();\n//        Integer number = c.convert(&quot;a&quot;);\n        System.out.println(c.convert(&quot;a&quot;));\n    }\n\n    static class Convert&lt;E, T&gt; {\n        public T convert(E element) {\n            return (T) element;\n        }\n    }\n}\n</code></pre>\n<p>and Code 2:</p>\n<pre><code>public class Main {\n    public static void main(String[] args) {\n        Convert&lt;String, Integer&gt; c = new Convert&lt;&gt;();\n        Integer number = c.convert(&quot;a&quot;);\n        System.out.println(number);\n    }\n\n    static class Convert&lt;E, T&gt; {\n        public T convert(E element) {\n            return (T) element;\n        }\n    }\n}\n</code></pre>\n<p>When I run code 1, output is &quot;a&quot;, but when I run code 2, it appear Exception.\nWhy code 1 still print &quot;a&quot;?</p>\n"},{"tags":["java","spring-boot","spring-cloud","spring-cloud-config","spring-boot-3"],"comments":[{"owner":{"account_id":1368060,"reputation":24601,"user_id":2730527,"display_name":"spencergibb"},"score":2,"creation_date":1698161720,"post_id":77353259,"comment_id":136368781,"body_markdown":"is there an error in the logs on the config server side? What version of spring cloud as 3.1.0 is only for boot.","body":"is there an error in the logs on the config server side? What version of spring cloud as 3.1.0 is only for boot."},{"owner":{"account_id":1956083,"reputation":4432,"user_id":1759063,"accept_rate":53,"display_name":"Eljah"},"score":0,"creation_date":1698180039,"post_id":77353259,"comment_id":136371994,"body_markdown":"@spencergibb we had that:","body":"@spencergibb we had that:"},{"owner":{"account_id":1956083,"reputation":4432,"user_id":1759063,"accept_rate":53,"display_name":"Eljah"},"score":0,"creation_date":1698180049,"post_id":77353259,"comment_id":136371997,"body_markdown":"implementation &#39;org.springframework.cloud:spring-cloud-starter-config:4.0.2&#39;\nimplementation &quot;org.springframework.cloud:spring-cloud-config-server:${springBootVersion}&quot;","body":"implementation &#39;org.springframework.cloud:spring-cloud-starter-config:4.0.2&zwnj;&#8203;&#39; implementation &quot;org.springframework.cloud:spring-cloud-config-server:${spri&zwnj;&#8203;ngBootVersion}&quot;"},{"owner":{"account_id":1368060,"reputation":24601,"user_id":2730527,"display_name":"spencergibb"},"score":1,"creation_date":1698235240,"post_id":77353259,"comment_id":136378872,"body_markdown":"It should be the same version as starter config, not boot version","body":"It should be the same version as starter config, not boot version"}],"owner":{"account_id":1956083,"reputation":4432,"user_id":1759063,"accept_rate":53,"display_name":"Eljah"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":43,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1698180075,"creation_date":1698160105,"question_id":77353259,"body_markdown":"We have a Spring Cloud Config, that is set up  via `application.yml`\r\n\r\n\r\n\r\n    server:\r\n      port: 8070\r\n    \r\n    management: #https://docs.spring.io/spring-boot/docs/current/reference/html/production-ready-monitoring.html\r\n      endpoints:\r\n        web:\r\n          exposure:\r\n            include: info,health,monitoring,refresh,env,mappings\r\n      security:\r\n        enabled: &quot;false&quot;\r\n      server:\r\n        port: 18070\r\n    \r\n    spring:\r\n      cloud:\r\n        config:\r\n          server:\r\n            jdbc:\r\n              sql: SELECT key,value FROM config.properties WHERE application=? AND profile=? AND label=?\r\n              order: 0\r\n      datasource:\r\n        url: jdbc:postgresql://@db.host@:5432/config_db\r\n        username: name\r\n        password: @db.name.pwd@\r\n        hikari:\r\n          connection-timeout: 5000\r\n          maximum-pool-size: 10\r\n          minimum-idle: 1\r\n          idle-timeout: 10000\r\n          data-source-properties: ApplicationName=config-server\r\n      profiles:\r\n        active: jdbc\r\n\r\nWhen the properties are requested, \r\n\r\n    GET /{application}/{profile}/{label}\r\n\r\nwe get `405` Http answer instead of `200` and value of the property we want to request.\r\n\r\nWhy changes with \r\n\r\n    Dockerfile\r\n    \r\n    build_artifacts:\r\n      extends: .gradle.build\r\n      -image: ${NEXUS_DEV_REGISTRY}/docker-remote/gradle:6.9.4-jdk11-focal\r\n      +image: ${NEXUS_DEV_REGISTRY}/docker-remote/gradle:7.5.0-jdk17-jammy\r\n    \r\n    build.gradle\r\n    \r\n    buildscript {\r\n        ext {\r\n            -springBootVersion = &#39;2.1.8.RELEASE&#39;\r\n            +springBootVersion = &#39;3.1.0&#39;\r\n        }\r\n\r\nSpring Cloud versions:\r\n\r\n    implementation &#39;org.springframework.cloud:spring-cloud-starter-config:4.0.2&#39;\r\n    implementation &quot;org.springframework.cloud:spring-cloud-config-server:${springBootVersion}&quot;\r\n\r\n","title":"After migration of java from 11 to 17 and Spring to 3.0 Spring Cloud Config doesn&#39;t work correctly for provideing properties for the services","body":"<p>We have a Spring Cloud Config, that is set up  via <code>application.yml</code></p>\n<pre><code>server:\n  port: 8070\n\nmanagement: #https://docs.spring.io/spring-boot/docs/current/reference/html/production-ready-monitoring.html\n  endpoints:\n    web:\n      exposure:\n        include: info,health,monitoring,refresh,env,mappings\n  security:\n    enabled: &quot;false&quot;\n  server:\n    port: 18070\n\nspring:\n  cloud:\n    config:\n      server:\n        jdbc:\n          sql: SELECT key,value FROM config.properties WHERE application=? AND profile=? AND label=?\n          order: 0\n  datasource:\n    url: jdbc:postgresql://@db.host@:5432/config_db\n    username: name\n    password: @db.name.pwd@\n    hikari:\n      connection-timeout: 5000\n      maximum-pool-size: 10\n      minimum-idle: 1\n      idle-timeout: 10000\n      data-source-properties: ApplicationName=config-server\n  profiles:\n    active: jdbc\n</code></pre>\n<p>When the properties are requested,</p>\n<pre><code>GET /{application}/{profile}/{label}\n</code></pre>\n<p>we get <code>405</code> Http answer instead of <code>200</code> and value of the property we want to request.</p>\n<p>Why changes with</p>\n<pre><code>Dockerfile\n\nbuild_artifacts:\n  extends: .gradle.build\n  -image: ${NEXUS_DEV_REGISTRY}/docker-remote/gradle:6.9.4-jdk11-focal\n  +image: ${NEXUS_DEV_REGISTRY}/docker-remote/gradle:7.5.0-jdk17-jammy\n\nbuild.gradle\n\nbuildscript {\n    ext {\n        -springBootVersion = '2.1.8.RELEASE'\n        +springBootVersion = '3.1.0'\n    }\n</code></pre>\n<p>Spring Cloud versions:</p>\n<pre><code>implementation 'org.springframework.cloud:spring-cloud-starter-config:4.0.2'\nimplementation &quot;org.springframework.cloud:spring-cloud-config-server:${springBootVersion}&quot;\n</code></pre>\n"},{"tags":["java","angular","firefox","waffle"],"owner":{"account_id":19950129,"reputation":601,"user_id":14619971,"display_name":"jkfe"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1698179703,"creation_date":1698178008,"question_id":77355122,"body_markdown":"I&#39;m working on a Java / Angular application using waffle authentication.\r\n\r\nWhen I access it in the Chrome browser it opens directly.\r\n\r\nBut when I access it in the firefox browser it opens a browser basic authentication window asking for username and password.\r\n\r\nHow to remove this authentication window from Firefox? The expected behavior is to open it directly like Chrome.\r\n\r\nNote: The issue only happens when I access the application installed in a remote server.\r\nWhen accessing in localhost dev environment, firefox doesn&#39;t display the basic authentication window.\r\n\r\nSecurityConfig.java\r\n\r\n```\r\n@Configuration\r\n@EnableWebSecurity\r\n@EnableGlobalMethodSecurity(securedEnabled = true)\r\npublic class SecurityConfig extends WebSecurityConfigurerAdapter {\r\n\t\r\n    @Autowired\r\n    private NegotiateSecurityFilter negotiateSecurityFilter;\r\n\r\n    @Autowired\r\n    private NegotiateSecurityFilterEntryPoint entryPoint;\r\n    \r\n    @Override\r\n    protected void configure(HttpSecurity http) throws Exception {    \t\r\n    \t\r\n    \t  http\r\n        \t\t.csrf().disable()\r\n                .authorizeRequests()\r\n                .anyRequest()\r\n                .authenticated()\r\n                .and()\r\n                .httpBasic()\r\n                .authenticationEntryPoint(entryPoint)\r\n                .and()\r\n                .addFilterBefore(negotiateSecurityFilter, BasicAuthenticationFilter.class)                \r\n                .headers()\r\n                .addHeaderWriter(new StaticHeadersWriter(&quot;Access-Control-Allow-Credentials&quot;, &quot;true&quot;));  \r\n    \t  \r\n          http.cors();   \r\n                \r\n    }\r\n\r\n    \r\n    @Override\r\n    @Autowired\r\n    protected void configure(AuthenticationManagerBuilder auth) throws Exception {    \t\r\n    \tauth.inMemoryAuthentication();\r\n    }\r\n    \r\n}\r\n```\r\n\r\nWaffleConfig.java\r\n\r\n```\r\n@Configuration\r\npublic class WaffleConfig {\r\n\r\n\t\r\n    @Bean\r\n    public WindowsAuthProviderImpl waffleWindowsAuthProvider() {\r\n        return new WindowsAuthProviderImpl();\r\n    }\r\n\r\n    @Bean\r\n    public NegotiateSecurityFilterProvider negotiateSecurityFilterProvider(\r\n            WindowsAuthProviderImpl windowsAuthProvider) {\r\n        return new NegotiateSecurityFilterProvider(windowsAuthProvider);\r\n    }\r\n\r\n    @Bean\r\n    public BasicSecurityFilterProvider basicSecurityFilterProvider(\r\n            WindowsAuthProviderImpl windowsAuthProvider) {\r\n        return new BasicSecurityFilterProvider(windowsAuthProvider);\r\n    }\r\n\r\n    @Bean\r\n    public SecurityFilterProviderCollection waffleSecurityFilterProviderCollection(\r\n            NegotiateSecurityFilterProvider negotiateSecurityFilterProvider,\r\n            BasicSecurityFilterProvider basicSecurityFilterProvider) {\r\n        SecurityFilterProvider[] securityFilterProviders =\r\n                {negotiateSecurityFilterProvider, basicSecurityFilterProvider};\r\n        return new SecurityFilterProviderCollection(securityFilterProviders);\r\n    }\r\n\r\n    @Bean\r\n    public NegotiateSecurityFilterEntryPoint negotiateSecurityFilterEntryPoint(\r\n            SecurityFilterProviderCollection securityFilterProviderCollection) {\r\n        NegotiateSecurityFilterEntryPoint negotiateSecurityFilterEntryPoint =\r\n                new NegotiateSecurityFilterEntryPoint();\r\n        negotiateSecurityFilterEntryPoint.setProvider(securityFilterProviderCollection);\r\n        return negotiateSecurityFilterEntryPoint;\r\n    }\r\n\r\n    @Bean\r\n    public NegotiateSecurityFilter waffleNegotiateSecurityFilter(\r\n            SecurityFilterProviderCollection securityFilterProviderCollection) {\r\n        NegotiateSecurityFilter negotiateSecurityFilter = new NegotiateSecurityFilter();\r\n        negotiateSecurityFilter.setProvider(securityFilterProviderCollection);\r\n        return negotiateSecurityFilter;\r\n    }\r\n    \r\n    @Bean\r\n    public FilterRegistrationBean waffleNegotiateSecurityFilterRegistration(\r\n            NegotiateSecurityFilter waffleNegotiateSecurityFilter) {\r\n        FilterRegistrationBean registrationBean = new FilterRegistrationBean();\r\n        registrationBean.setFilter(waffleNegotiateSecurityFilter);\r\n        registrationBean.setEnabled(false);\r\n        return registrationBean;\r\n    }\r\n\r\n}\r\n```\r\n\r\nI noticed one thing.\r\n\r\nWhen accessing via Firefox, the following message is added to the logs:\r\n\r\n```\r\nFilterSecurityInterceptor - Failed to authorize filter invocation [GET /myapiurl] with attributes [authenticated]\r\n```\r\n\r\nWhen accessing via Chrome, the message is this other:\r\n\r\n```\r\nFilterSecurityInterceptor - Authorized filter invocation [GET /myapiurl] with attributes [authenticated]\r\n```","title":"How to remove Firefox basic authentication window in a Java, Angular, Waffle application?","body":"<p>I'm working on a Java / Angular application using waffle authentication.</p>\n<p>When I access it in the Chrome browser it opens directly.</p>\n<p>But when I access it in the firefox browser it opens a browser basic authentication window asking for username and password.</p>\n<p>How to remove this authentication window from Firefox? The expected behavior is to open it directly like Chrome.</p>\n<p>Note: The issue only happens when I access the application installed in a remote server.\nWhen accessing in localhost dev environment, firefox doesn't display the basic authentication window.</p>\n<p>SecurityConfig.java</p>\n<pre><code>@Configuration\n@EnableWebSecurity\n@EnableGlobalMethodSecurity(securedEnabled = true)\npublic class SecurityConfig extends WebSecurityConfigurerAdapter {\n    \n    @Autowired\n    private NegotiateSecurityFilter negotiateSecurityFilter;\n\n    @Autowired\n    private NegotiateSecurityFilterEntryPoint entryPoint;\n    \n    @Override\n    protected void configure(HttpSecurity http) throws Exception {      \n        \n          http\n                .csrf().disable()\n                .authorizeRequests()\n                .anyRequest()\n                .authenticated()\n                .and()\n                .httpBasic()\n                .authenticationEntryPoint(entryPoint)\n                .and()\n                .addFilterBefore(negotiateSecurityFilter, BasicAuthenticationFilter.class)                \n                .headers()\n                .addHeaderWriter(new StaticHeadersWriter(&quot;Access-Control-Allow-Credentials&quot;, &quot;true&quot;));  \n          \n          http.cors();   \n                \n    }\n\n    \n    @Override\n    @Autowired\n    protected void configure(AuthenticationManagerBuilder auth) throws Exception {      \n        auth.inMemoryAuthentication();\n    }\n    \n}\n</code></pre>\n<p>WaffleConfig.java</p>\n<pre><code>@Configuration\npublic class WaffleConfig {\n\n    \n    @Bean\n    public WindowsAuthProviderImpl waffleWindowsAuthProvider() {\n        return new WindowsAuthProviderImpl();\n    }\n\n    @Bean\n    public NegotiateSecurityFilterProvider negotiateSecurityFilterProvider(\n            WindowsAuthProviderImpl windowsAuthProvider) {\n        return new NegotiateSecurityFilterProvider(windowsAuthProvider);\n    }\n\n    @Bean\n    public BasicSecurityFilterProvider basicSecurityFilterProvider(\n            WindowsAuthProviderImpl windowsAuthProvider) {\n        return new BasicSecurityFilterProvider(windowsAuthProvider);\n    }\n\n    @Bean\n    public SecurityFilterProviderCollection waffleSecurityFilterProviderCollection(\n            NegotiateSecurityFilterProvider negotiateSecurityFilterProvider,\n            BasicSecurityFilterProvider basicSecurityFilterProvider) {\n        SecurityFilterProvider[] securityFilterProviders =\n                {negotiateSecurityFilterProvider, basicSecurityFilterProvider};\n        return new SecurityFilterProviderCollection(securityFilterProviders);\n    }\n\n    @Bean\n    public NegotiateSecurityFilterEntryPoint negotiateSecurityFilterEntryPoint(\n            SecurityFilterProviderCollection securityFilterProviderCollection) {\n        NegotiateSecurityFilterEntryPoint negotiateSecurityFilterEntryPoint =\n                new NegotiateSecurityFilterEntryPoint();\n        negotiateSecurityFilterEntryPoint.setProvider(securityFilterProviderCollection);\n        return negotiateSecurityFilterEntryPoint;\n    }\n\n    @Bean\n    public NegotiateSecurityFilter waffleNegotiateSecurityFilter(\n            SecurityFilterProviderCollection securityFilterProviderCollection) {\n        NegotiateSecurityFilter negotiateSecurityFilter = new NegotiateSecurityFilter();\n        negotiateSecurityFilter.setProvider(securityFilterProviderCollection);\n        return negotiateSecurityFilter;\n    }\n    \n    @Bean\n    public FilterRegistrationBean waffleNegotiateSecurityFilterRegistration(\n            NegotiateSecurityFilter waffleNegotiateSecurityFilter) {\n        FilterRegistrationBean registrationBean = new FilterRegistrationBean();\n        registrationBean.setFilter(waffleNegotiateSecurityFilter);\n        registrationBean.setEnabled(false);\n        return registrationBean;\n    }\n\n}\n</code></pre>\n<p>I noticed one thing.</p>\n<p>When accessing via Firefox, the following message is added to the logs:</p>\n<pre><code>FilterSecurityInterceptor - Failed to authorize filter invocation [GET /myapiurl] with attributes [authenticated]\n</code></pre>\n<p>When accessing via Chrome, the message is this other:</p>\n<pre><code>FilterSecurityInterceptor - Authorized filter invocation [GET /myapiurl] with attributes [authenticated]\n</code></pre>\n"},{"tags":["java","nullable","option-type"],"comments":[{"owner":{"account_id":3452279,"reputation":37360,"user_id":2891664,"accept_rate":100,"display_name":"Radiodef"},"score":0,"creation_date":1467063336,"post_id":38062664,"comment_id":63566164,"body_markdown":"There is really nothing wrong with `if (optional.isPresent()) {...}`. `Optional` adds more semantic value than `null`, so mission accomplished. Readability and brevity are often a fine balance. &quot;Ugly&quot; and &quot;verbose&quot; are such exaggerations here.","body":"There is really nothing wrong with <code>if (optional.isPresent()) {...}</code>. <code>Optional</code> adds more semantic value than <code>null</code>, so mission accomplished. Readability and brevity are often a fine balance. &quot;Ugly&quot; and &quot;verbose&quot; are such exaggerations here."},{"owner":{"account_id":1573687,"reputation":7830,"user_id":4945535,"accept_rate":62,"display_name":"user140547"},"score":0,"creation_date":1467098612,"post_id":38062664,"comment_id":63576995,"body_markdown":"@Lii if you are interested in a more general case (different types of optionals and operations), please add it to your question. It is a different use case if you have the same types and same operations.","body":"@Lii if you are interested in a more general case (different types of optionals and operations), please add it to your question. It is a different use case if you have the same types and same operations."},{"owner":{"account_id":31180,"reputation":29173,"user_id":85421,"display_name":"user85421"},"score":1,"creation_date":1506753991,"post_id":38062664,"comment_id":79954911,"body_markdown":"this all seams like examples where the use of Optional itself is not the best solution...","body":"this all seams like examples where the use of Optional itself is not the best solution..."},{"owner":{"account_id":2787344,"reputation":14687,"user_id":2398375,"accept_rate":75,"display_name":"Vince"},"score":1,"creation_date":1506755092,"post_id":38062664,"comment_id":79955087,"body_markdown":"If an optional is empty, yet a value is expected, that&#39;s an error. Sounds like you should be throwing an exception. Using `null` with `Optional` is definitely a code smell, seeing how the purpose of `Optional` is to avoid the need to declare/check for null.","body":"If an optional is empty, yet a value is expected, that&#39;s an error. Sounds like you should be throwing an exception. Using <code>null</code> with <code>Optional</code> is definitely a code smell, seeing how the purpose of <code>Optional</code> is to avoid the need to declare/check for null."},{"owner":{"account_id":204515,"reputation":11679,"user_id":452775,"accept_rate":63,"display_name":"Lii"},"score":0,"creation_date":1506757007,"post_id":38062664,"comment_id":79955433,"body_markdown":"@VinceEmigh: That is a misunderstanding.","body":"@VinceEmigh: That is a misunderstanding."},{"owner":{"account_id":2787344,"reputation":14687,"user_id":2398375,"accept_rate":75,"display_name":"Vince"},"score":0,"creation_date":1506757402,"post_id":38062664,"comment_id":79955538,"body_markdown":"@Lii How is it a misunderstanding? Optional exists for values that may not be present. `orElse` exists for specifying a default value in such a case. Specifying `null` as the default value destroys the purpose of using `Optional`, as it would still require the null check (`ifPresent`) or blow up (`get`, which Brain himself mentioned should be avoided). If you *require* a value, how does using `Optional` make sense? Apparently the value *isn&#39;t* required, and the design is flawed... You should NEVER return `null` from an `Optional`. Mind elaborating on my misunderstanding?","body":"@Lii How is it a misunderstanding? Optional exists for values that may not be present. <code>orElse</code> exists for specifying a default value in such a case. Specifying <code>null</code> as the default value destroys the purpose of using <code>Optional</code>, as it would still require the null check (<code>ifPresent</code>) or blow up (<code>get</code>, which Brain himself mentioned should be avoided). If you <i>require</i> a value, how does using <code>Optional</code> make sense? Apparently the value <i>isn&#39;t</i> required, and the design is flawed... You should NEVER return <code>null</code> from an <code>Optional</code>. Mind elaborating on my misunderstanding?"},{"owner":{"account_id":204515,"reputation":11679,"user_id":452775,"accept_rate":63,"display_name":"Lii"},"score":0,"creation_date":1506778982,"post_id":38062664,"comment_id":79960815,"body_markdown":"Sorry for my much-too-brief response. I think there is clearly a value of using `Optional` here. For `getOptional` the absence of a value is a valid result. For `m1` this fact is expected and valid, and the action to be taken in that case is to return. There is no reason to throw an exception whatsoever, and the optional in the return type of `getOptional` makes the potential absence of a produced value clearly visible. (And `getOptional` might not be a method I can rewrite anyway.)","body":"Sorry for my much-too-brief response. I think there is clearly a value of using <code>Optional</code> here. For <code>getOptional</code> the absence of a value is a valid result. For <code>m1</code> this fact is expected and valid, and the action to be taken in that case is to return. There is no reason to throw an exception whatsoever, and the optional in the return type of <code>getOptional</code> makes the potential absence of a produced value clearly visible. (And <code>getOptional</code> might not be a method I can rewrite anyway.)"},{"owner":{"account_id":204515,"reputation":11679,"user_id":452775,"accept_rate":63,"display_name":"Lii"},"score":0,"creation_date":1661324432,"post_id":38062664,"comment_id":129741488,"body_markdown":"It is truly weird how some questions unexpectedly end up so popular! :)","body":"It is truly weird how some questions unexpectedly end up so popular! :)"}],"answers":[{"comments":[{"owner":{"account_id":204515,"reputation":11679,"user_id":452775,"accept_rate":63,"display_name":"Lii"},"score":4,"creation_date":1467059850,"post_id":38062699,"comment_id":63564604,"body_markdown":"My first thought was: &quot;Meh, then I&#39;m back to just using nullables.&quot; But on a second thought maybe this is not so bad! Because the potential absence of a value is still visible in the type of `getOptional`, and the nullable string is used in a small scope where it&#39;s very clear what&#39;s going on.","body":"My first thought was: &quot;Meh, then I&#39;m back to just using nullables.&quot; But on a second thought maybe this is not so bad! Because the potential absence of a value is still visible in the type of <code>getOptional</code>, and the nullable string is used in a small scope where it&#39;s very clear what&#39;s going on."},{"owner":{"account_id":204515,"reputation":11679,"user_id":452775,"accept_rate":63,"display_name":"Lii"},"score":0,"creation_date":1467062089,"post_id":38062699,"comment_id":63565625,"body_markdown":"Ah, now I&#39;ve tried it in some real code and I like it more and more! Already half a dozen pesky `get`s are gone from my code. Thank you!","body":"Ah, now I&#39;ve tried it in some real code and I like it more and more! Already half a dozen pesky <code>get</code>s are gone from my code. Thank you!"},{"owner":{"account_id":31180,"reputation":29173,"user_id":85421,"display_name":"user85421"},"score":0,"creation_date":1506754086,"post_id":38062699,"comment_id":79954922,"body_markdown":"really? and why not add one more level: `boolean noData = (o == null); if (noData) { return; }`","body":"really? and why not add one more level: <code>boolean noData = (o == null); if (noData) { return; }</code>"},{"owner":{"account_id":204515,"reputation":11679,"user_id":452775,"accept_rate":63,"display_name":"Lii"},"score":1,"creation_date":1506779307,"post_id":38062699,"comment_id":79960888,"body_markdown":"@CarlosHeuberger: Your comment sounds to me line some sort or irony, but I don&#39;t understand your intent. This is a good solution for my problem because: 1) I don&#39;t have to use `Optional.get` to get the value of `o` in the rest of the method. 2) The potential absence of a value is visible in the return type of the `getOptional` method. 3) There is no extra levels of nested blocks in the rest of the method resulting from the use of `Optinal.isPresent`. 4) Even though a nullable string is used it is only used in a very limited scope where the risk of mistakes is minimal.","body":"@CarlosHeuberger: Your comment sounds to me line some sort or irony, but I don&#39;t understand your intent. This is a good solution for my problem because: 1) I don&#39;t have to use <code>Optional.get</code> to get the value of <code>o</code> in the rest of the method. 2) The potential absence of a value is visible in the return type of the <code>getOptional</code> method. 3) There is no extra levels of nested blocks in the rest of the method resulting from the use of <code>Optinal.isPresent</code>. 4) Even though a nullable string is used it is only used in a very limited scope where the risk of mistakes is minimal."},{"owner":{"account_id":31180,"reputation":29173,"user_id":85421,"display_name":"user85421"},"score":1,"creation_date":1506782897,"post_id":38062699,"comment_id":79961916,"body_markdown":"@Lii Irony: `Optional` was introduced to avoid `null`; this is just going  back (IMHO)... obviously I do not know what the Optional is, where it comes from and what is intended to be done with it; my comments are only based on what was asked.","body":"@Lii Irony: <code>Optional</code> was introduced to avoid <code>null</code>; this is just going  back (IMHO)... obviously I do not know what the Optional is, where it comes from and what is intended to be done with it; my comments are only based on what was asked."},{"owner":{"account_id":447212,"reputation":3321,"user_id":840714,"accept_rate":62,"display_name":"Druckles"},"score":3,"creation_date":1528210316,"post_id":38062699,"comment_id":88415471,"body_markdown":"`Optional` was introduced to avoid *problems* with `null`; it allows you to make it clear in your method signature that you might return something nully. You can&#39;t stop people doing stupid things but you can try and help people stop making stupid mistakes.","body":"<code>Optional</code> was introduced to avoid <i>problems</i> with <code>null</code>; it allows you to make it clear in your method signature that you might return something nully. You can&#39;t stop people doing stupid things but you can try and help people stop making stupid mistakes."},{"owner":{"account_id":447212,"reputation":3321,"user_id":840714,"accept_rate":62,"display_name":"Druckles"},"score":0,"creation_date":1528210402,"post_id":38062699,"comment_id":88415515,"body_markdown":"An example to clarify: using an optional is safer than, `String o = getMysteriousThing(); o.length()`, and this solution is clearer than, `String o = getOptional().orElse(null); o.length()`.","body":"An example to clarify: using an optional is safer than, <code>String o = getMysteriousThing(); o.length()</code>, and this solution is clearer than, <code>String o = getOptional().orElse(null); o.length()</code>."}],"tags":[],"owner":{"account_id":303087,"reputation":8621,"user_id":611819,"accept_rate":100,"display_name":"dnault"},"comment_count":7,"down_vote_count":4,"up_vote_count":57,"is_accepted":true,"score":53,"last_activity_date":1467059478,"creation_date":1467059478,"answer_id":38062699,"question_id":38062664,"body_markdown":"You could use `orElse(null)`:\r\n\r\n    String o = getOptional().orElse(null);\r\n    if (o == null) {\r\n        return;\r\n    }\r\n\r\n","title":"How to return when an optional is empty?","body":"<p>You could use <code>orElse(null)</code>:</p>\n\n<pre><code>String o = getOptional().orElse(null);\nif (o == null) {\n    return;\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":204515,"reputation":11679,"user_id":452775,"accept_rate":63,"display_name":"Lii"},"score":0,"creation_date":1467059984,"post_id":38062725,"comment_id":63564673,"body_markdown":"Often the block of code to execute in the lambda is pretty large so this is not an option most of the time.","body":"Often the block of code to execute in the lambda is pretty large so this is not an option most of the time."},{"owner":{"account_id":1076053,"reputation":85188,"user_id":1281433,"accept_rate":43,"display_name":"Joshua Taylor"},"score":1,"creation_date":1467060192,"post_id":38062725,"comment_id":63564765,"body_markdown":"@Lii If it&#39;s a big block of code, then it&#39;s quite possible that it should be extracted into its own method, which could then easily be passed as a method reference.","body":"@Lii If it&#39;s a big block of code, then it&#39;s quite possible that it should be extracted into its own method, which could then easily be passed as a method reference."},{"owner":{"account_id":204515,"reputation":11679,"user_id":452775,"accept_rate":63,"display_name":"Lii"},"score":0,"creation_date":1467060861,"post_id":38062725,"comment_id":63565079,"body_markdown":"Heh, you suggest that I use both nesting and `get` calls when what I want is to avoid both! I think it&#39;s much clearer to start a method with a few checks of preconditions and then return if they fail. That makes it immediate clear to readers what happens if the checks fail, and it can save several levels of nesting for the whole remainder of the method.","body":"Heh, you suggest that I use both nesting and <code>get</code> calls when what I want is to avoid both! I think it&#39;s much clearer to start a method with a few checks of preconditions and then return if they fail. That makes it immediate clear to readers what happens if the checks fail, and it can save several levels of nesting for the whole remainder of the method."},{"owner":{"account_id":204515,"reputation":11679,"user_id":452775,"accept_rate":63,"display_name":"Lii"},"score":1,"creation_date":1467061159,"post_id":38062725,"comment_id":63565217,"body_markdown":"Your write: &quot;*except that it forces you to consider the case where the value is missing*&quot; But that thing alone is really very valuable, and maybe the main point of using optionals.","body":"Your write: &quot;<i>except that it forces you to consider the case where the value is missing</i>&quot; But that thing alone is really very valuable, and maybe the main point of using optionals."},{"owner":{"account_id":1076053,"reputation":85188,"user_id":1281433,"accept_rate":43,"display_name":"Joshua Taylor"},"score":1,"creation_date":1467061973,"post_id":38062725,"comment_id":63565575,"body_markdown":"@Lii Yes, forcing the programmer to handle the possibility of the value not being present is important.  But that&#39;s usually more like `String value = getOptional().orElse(&quot;default value&quot;);`  Afterward, we *always* have a string: either the one in the optional, or `&quot;default value&quot;`.  The point is that we need some String value that may or may not be present.  You&#39;re not doing any string processing when the optional doesn&#39;t have a value.  That&#39;s the difference.","body":"@Lii Yes, forcing the programmer to handle the possibility of the value not being present is important.  But that&#39;s usually more like <code>String value = getOptional().orElse(&quot;default value&quot;);</code>  Afterward, we <i>always</i> have a string: either the one in the optional, or <code>&quot;default value&quot;</code>.  The point is that we need some String value that may or may not be present.  You&#39;re not doing any string processing when the optional doesn&#39;t have a value.  That&#39;s the difference."}],"tags":[],"owner":{"account_id":1076053,"reputation":85188,"user_id":1281433,"accept_rate":43,"display_name":"Joshua Taylor"},"comment_count":5,"down_vote_count":1,"up_vote_count":11,"is_accepted":false,"score":10,"last_activity_date":1698179557,"creation_date":1467059568,"answer_id":38062725,"question_id":38062664,"body_markdown":"The ifPresent that you&#39;re using doesn&#39;t require you to create a new lambda, you can just use a method reference:\r\n\r\n    getOptional().ifPresent(System.out::println);\r\n\r\nThis doesn&#39;t really solve the case where you want to conditionalize on the presence of two optionals, though.  But as an alternative to \r\n\r\n&gt;     // And want to return if it&#39;s empty\r\n&gt;     if (!o.isPresent()) return;\r\n\r\nwhy not just reverse the condition, which works nicely in the nested case, too?  There&#39;s no need to make the return explicit:\r\n\r\n    if (o.isPresent()) {\r\n      System.out.println(o.get());\r\n      if (oo.isPresent()) {\r\n        System.out.println(oo.get());\r\n      }\r\n    }\r\n\r\nHowever, this kind of use case suggests that you&#39;re not really benefiting from Optional as opposed to a nullable value.  In general, if you&#39;re using isPresent and get, then Optional might not really be getting you all that much (except that it forces you to consider the case where the value is missing).  Using ifPresent, map, filter, and other &quot;more functional&quot; methods might be more typical uses for an Optional value.\r\n\r\n---\r\n\r\nBut in any case, please don&#39;t return null when you&#39;re promising an Optional.  Though it&#39;s perfectly legal to return null when an object is expected, the point of Optional is precisely to avoid having to check for null.  So don&#39;t do:\r\n\r\n&gt;     Optional&lt;String&gt; getOptional() {\r\n&gt;         return null;\r\n&gt;     }\r\n\r\nbut instead do:\r\n\r\n    Optional&lt;String&gt; getOptional() { \r\n      return Optional.empty();\r\n    }\r\n\r\nOtherwise you end up having to do:\r\n\r\n    Optional&lt;String&gt; o = getOptional();\r\n    if (o != null &amp;&amp; o.isPresent()) {\r\n      // ...\r\n    }\r\n\r\nwhich is really just doing the same kind of thing twice.  Use an Optional, or use a nullable value, but don&#39;t do both!\r\n\r\n","title":"How to return when an optional is empty?","body":"<p>The ifPresent that you're using doesn't require you to create a new lambda, you can just use a method reference:</p>\n<pre><code>getOptional().ifPresent(System.out::println);\n</code></pre>\n<p>This doesn't really solve the case where you want to conditionalize on the presence of two optionals, though.  But as an alternative to</p>\n<blockquote>\n<pre><code>// And want to return if it's empty\nif (!o.isPresent()) return;\n</code></pre>\n</blockquote>\n<p>why not just reverse the condition, which works nicely in the nested case, too?  There's no need to make the return explicit:</p>\n<pre><code>if (o.isPresent()) {\n  System.out.println(o.get());\n  if (oo.isPresent()) {\n    System.out.println(oo.get());\n  }\n}\n</code></pre>\n<p>However, this kind of use case suggests that you're not really benefiting from Optional as opposed to a nullable value.  In general, if you're using isPresent and get, then Optional might not really be getting you all that much (except that it forces you to consider the case where the value is missing).  Using ifPresent, map, filter, and other &quot;more functional&quot; methods might be more typical uses for an Optional value.</p>\n<hr />\n<p>But in any case, please don't return null when you're promising an Optional.  Though it's perfectly legal to return null when an object is expected, the point of Optional is precisely to avoid having to check for null.  So don't do:</p>\n<blockquote>\n<pre><code>Optional&lt;String&gt; getOptional() {\n    return null;\n}\n</code></pre>\n</blockquote>\n<p>but instead do:</p>\n<pre><code>Optional&lt;String&gt; getOptional() { \n  return Optional.empty();\n}\n</code></pre>\n<p>Otherwise you end up having to do:</p>\n<pre><code>Optional&lt;String&gt; o = getOptional();\nif (o != null &amp;&amp; o.isPresent()) {\n  // ...\n}\n</code></pre>\n<p>which is really just doing the same kind of thing twice.  Use an Optional, or use a nullable value, but don't do both!</p>\n"},{"comments":[{"owner":{"account_id":204515,"reputation":11679,"user_id":452775,"accept_rate":63,"display_name":"Lii"},"score":1,"creation_date":1467060200,"post_id":38062762,"comment_id":63564766,"body_markdown":"Hm. But then I have to pass all arguments to `m4` along to `doThing` also. And most of the time I don&#39;t wish to divide my solution into methods based on just that I&#39;m working with an optional.","body":"Hm. But then I have to pass all arguments to <code>m4</code> along to <code>doThing</code> also. And most of the time I don&#39;t wish to divide my solution into methods based on just that I&#39;m working with an optional."},{"owner":{"account_id":1076053,"reputation":85188,"user_id":1281433,"accept_rate":43,"display_name":"Joshua Taylor"},"score":1,"creation_date":1467062061,"post_id":38062762,"comment_id":63565608,"body_markdown":"@Lii No, you don&#39;t have to pass all of them;  you only have to pass the ones that **doThings** *needs*.  One of your concerns in the question was that some objects had a much larger scope than necessary.  By refactoring out to another method, and passing values to it, you can avoid the wider scopes.","body":"@Lii No, you don&#39;t have to pass all of them;  you only have to pass the ones that <b>doThings</b> <i>needs</i>.  One of your concerns in the question was that some objects had a much larger scope than necessary.  By refactoring out to another method, and passing values to it, you can avoid the wider scopes."},{"owner":{"account_id":1076053,"reputation":85188,"user_id":1281433,"accept_rate":43,"display_name":"Joshua Taylor"},"score":0,"creation_date":1467062161,"post_id":38062762,"comment_id":63565650,"body_markdown":"When it&#39;s just one value (the string), though; the `if (!o.isPresent()) return;` seems superfluous.  The whole `m4` method body could just be: `getOptional().ifPresent(this::doThings);`.","body":"When it&#39;s just one value (the string), though; the <code>if (!o.isPresent()) return;</code> seems superfluous.  The whole <code>m4</code> method body could just be: <code>getOptional().ifPresent(this::doThings);</code>."}],"tags":[],"owner":{"account_id":4505101,"reputation":22955,"user_id":3795501,"display_name":"Luka Jacobowitz"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1467059695,"creation_date":1467059695,"answer_id":38062762,"question_id":38062664,"body_markdown":"I don&#39;t think what you&#39;re asking is actually possible, but I would like to suggest just taking all of your code that works directly on your String and wrap it in a function. So your function becomes something like this:\r\n\r\n    void m4() {\r\n        Optional&lt;String&gt; o = getOptional();\r\n        if (!o.isPresent()) return;\r\n\r\n        doThings(o.get());\r\n    }\r\n\r\n    void doThings(String s){\r\n        System.out.println(s);\r\n        //do whatever else with the string.\r\n    }\r\n\r\nThis way you only have the String in scope and you don&#39;t have to call `.get()` everytime you want to access it.\r\n","title":"How to return when an optional is empty?","body":"<p>I don't think what you're asking is actually possible, but I would like to suggest just taking all of your code that works directly on your String and wrap it in a function. So your function becomes something like this:</p>\n\n<pre><code>void m4() {\n    Optional&lt;String&gt; o = getOptional();\n    if (!o.isPresent()) return;\n\n    doThings(o.get());\n}\n\nvoid doThings(String s){\n    System.out.println(s);\n    //do whatever else with the string.\n}\n</code></pre>\n\n<p>This way you only have the String in scope and you don't have to call <code>.get()</code> everytime you want to access it.</p>\n"},{"comments":[{"owner":{"account_id":204515,"reputation":11679,"user_id":452775,"accept_rate":63,"display_name":"Lii"},"score":0,"creation_date":1489483041,"post_id":38062819,"comment_id":72677880,"body_markdown":"See method `m5` in the example, it is meant to demonstrate why I don&#39;t want to do this. I think using `ifPresent` is okay when you do one short thing. But if you do a lot of things and/or have several optionals then the level of nesting quickly makes it ugly and hard to read.","body":"See method <code>m5</code> in the example, it is meant to demonstrate why I don&#39;t want to do this. I think using <code>ifPresent</code> is okay when you do one short thing. But if you do a lot of things and/or have several optionals then the level of nesting quickly makes it ugly and hard to read."},{"owner":{"account_id":31180,"reputation":29173,"user_id":85421,"display_name":"user85421"},"score":1,"creation_date":1506754394,"post_id":38062819,"comment_id":79954969,"body_markdown":"@Lii you can move/split long blocks in new methods, right?","body":"@Lii you can move/split long blocks in new methods, right?"},{"owner":{"account_id":204515,"reputation":11679,"user_id":452775,"accept_rate":63,"display_name":"Lii"},"score":0,"creation_date":1506755086,"post_id":38062819,"comment_id":79955084,"body_markdown":"@CarlosHeuberger: Yeah, but often I don&#39;t want to decide what methods to structure my program into based on only when I have to deal with an optional value. And often a method first tests a few preconditions and terminate if they don&#39;t hold. Sometimes those preconditions are that an optional value is not empty.","body":"@CarlosHeuberger: Yeah, but often I don&#39;t want to decide what methods to structure my program into based on only when I have to deal with an optional value. And often a method first tests a few preconditions and terminate if they don&#39;t hold. Sometimes those preconditions are that an optional value is not empty."},{"owner":{"account_id":31180,"reputation":29173,"user_id":85421,"display_name":"user85421"},"score":0,"creation_date":1506758433,"post_id":38062819,"comment_id":79955777,"body_markdown":"@Lii but you wrote &quot;...makes it ugly and hard to read&quot; - that should be a reason to decide how to structure your program and a way to do that is what I meant with my comment","body":"@Lii but you wrote &quot;...makes it ugly and hard to read&quot; - that should be a reason to decide how to structure your program and a way to do that is what I meant with my comment"}],"tags":[],"owner":{"account_id":435799,"reputation":22985,"user_id":822588,"accept_rate":94,"display_name":"Sleiman Jneidi"},"comment_count":4,"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1467059881,"creation_date":1467059881,"answer_id":38062819,"question_id":38062664,"body_markdown":"You can use `ifPresent` and `map` methods instead, if the function is void and you need to do side-effects you can use `ifPresent`,\r\n\r\n    optional.ifPresent(System.out::println); \r\n\r\nIf another method return relies on the Optional than that method might need to return an Optional as well and use the map method\r\n\r\n\r\n    Optional&lt;Integer&gt; getLength(){\r\n        Optional&lt;String&gt; hi = Optional.of(&quot;hi&quot;);\r\n        return hi.map(String::length)\r\n    }\r\n**Most** of the time when you call `isPresent` and `get`, you are misusing `Optional`.","title":"How to return when an optional is empty?","body":"<p>You can use <code>ifPresent</code> and <code>map</code> methods instead, if the function is void and you need to do side-effects you can use <code>ifPresent</code>,</p>\n\n<pre><code>optional.ifPresent(System.out::println); \n</code></pre>\n\n<p>If another method return relies on the Optional than that method might need to return an Optional as well and use the map method</p>\n\n<pre><code>Optional&lt;Integer&gt; getLength(){\n    Optional&lt;String&gt; hi = Optional.of(\"hi\");\n    return hi.map(String::length)\n}\n</code></pre>\n\n<p><strong>Most</strong> of the time when you call <code>isPresent</code> and <code>get</code>, you are misusing <code>Optional</code>.</p>\n"},{"comments":[{"owner":{"account_id":204515,"reputation":11679,"user_id":452775,"accept_rate":63,"display_name":"Lii"},"score":1,"creation_date":1553843290,"post_id":55405596,"comment_id":97543717,"body_markdown":"I agree than this is an interesting discussion! I think the functional approach that you suggesting is interesting and have its merits. But even after working quite a lot in functional languages I prefer the more imperative approach where you return early. It feels wrong to me that you would have to rely on library functions such as `flatMap` for simple control flow.","body":"I agree than this is an interesting discussion! I think the functional approach that you suggesting is interesting and have its merits. But even after working quite a lot in functional languages I prefer the more imperative approach where you return early. It feels wrong to me that you would have to rely on library functions such as <code>flatMap</code> for simple control flow."},{"owner":{"account_id":204515,"reputation":11679,"user_id":452775,"accept_rate":63,"display_name":"Lii"},"score":0,"creation_date":1553843423,"post_id":55405596,"comment_id":97543762,"body_markdown":"If you want to go further down the road of the functional approach then there are libraries for this, have a look at [this answer](https://stackoverflow.com/a/30787638/452775). Very interesting! But I prefer to avoid then most of the time.","body":"If you want to go further down the road of the functional approach then there are libraries for this, have a look at <a href=\"https://stackoverflow.com/a/30787638/452775\">this answer</a>. Very interesting! But I prefer to avoid then most of the time."},{"owner":{"account_id":12972203,"reputation":469,"user_id":9377527,"display_name":"mwdev"},"score":0,"creation_date":1553850744,"post_id":55405596,"comment_id":97546980,"body_markdown":"Thanks for the link - I heard Vavr is as close as it gets to Scala. There are some interesting talks, especially around exception handling in java streams:\n https://www.youtube.com/watch?v=zko8R_alQgw&amp;t=3s\nso you have things like Either, which you will know very well in principle. If someone doesn&#39;t want to pull the whole library just to use one tool, it&#39;s fairly easy to implement Either yourself, there is an example code in this talk:\nhttps://www.youtube.com/watch?v=vuFCTdywMtE&amp;t=37m25s","body":"Thanks for the link - I heard Vavr is as close as it gets to Scala. There are some interesting talks, especially around exception handling in java streams:  <a href=\"https://www.youtube.com/watch?v=zko8R_alQgw&amp;t=3s\" rel=\"nofollow noreferrer\">youtube.com/watch?v=zko8R_alQgw&amp;t=3s</a> so you have things like Either, which you will know very well in principle. If someone doesn&#39;t want to pull the whole library just to use one tool, it&#39;s fairly easy to implement Either yourself, there is an example code in this talk: <a href=\"https://www.youtube.com/watch?v=vuFCTdywMtE&amp;t=37m25s\" rel=\"nofollow noreferrer\">youtube.com/watch?v=vuFCTdywMtE&amp;t=37m25s</a>"},{"owner":{"account_id":12972203,"reputation":469,"user_id":9377527,"display_name":"mwdev"},"score":0,"creation_date":1553852029,"post_id":55405596,"comment_id":97547634,"body_markdown":"Some things are often a matter of personal preference on the style of coding you&#39;re comfortable with. I suppose, what matters is to understand the concepts and be consistent throughout the project.","body":"Some things are often a matter of personal preference on the style of coding you&#39;re comfortable with. I suppose, what matters is to understand the concepts and be consistent throughout the project."}],"tags":[],"owner":{"account_id":12972203,"reputation":469,"user_id":9377527,"display_name":"mwdev"},"comment_count":4,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1553850801,"creation_date":1553801692,"answer_id":55405596,"question_id":38062664,"body_markdown":"That&#39;s a great topic, we all love functional style of programming! \r\n\r\nOften when start an implementation of a method you are given an optional right at the top.\r\nAt this point you start wondering, what is the best you can do to handle an empty optional,\r\nit only makes sense to exit and stop processing if that&#39;s the case.\r\n\r\n\r\nSTEP 1 - Explore and anylyze\r\n\r\n    public void processMedia(String mediaClassName, String mediaName) {\r\n\r\n        // THAT MIGHT BE YOUR FIRST IDEA\r\n        MediaClass mediaClass = mediaClassFinder.find(mediaClassName).orElse(null); \r\n\r\n        // RETURNING ON NULL CONDITION LIKE THE BELOW CAN BE ALRIGHT,\r\n        // BUT POSSIBLY YOU CAN DO BETTER\r\n        if (mediaClass == null) {\r\n            return;\r\n        }\r\n        Optional&lt;Media&gt; media = mediaFinder.find(mediaClass.getId(), mediaName);\r\n\r\n        // do processing\r\n\r\n        // render the processed object\r\n    }\r\n\r\nSTEP 2\r\nThe best approach might be to extract various pieces of the implementation to a separate methods and chain them together in a functional style.\r\nAs a side effect of this exercise you will probably end up with much improved interface and structure of your application.\r\nThat&#39;s how refactoring works. Look below, there is no explicit null assignments and no extra return points anywhere. And the coding becomes fun.\r\n\r\n    public void processMedia(String mediaClassName, String mediaName) {\r\n        mediaClassFinder.find(mediaClassName)\r\n            .flatMap(mediaClass -&gt; mediaFinder.find(mediaClass.getId(), mediaName))\r\n            .map(this::compress)\r\n            .ifPresent(this::render);\r\n    }\r\n    private Media compress(Media media) {\r\n        // compress media implementation\r\n        return media;\r\n    }\r\n    private void render(Media media) {\r\n        // render media implementation\r\n    }\r\n\r\nI hope you liked my example :)","title":"How to return when an optional is empty?","body":"<p>That's a great topic, we all love functional style of programming! </p>\n\n<p>Often when start an implementation of a method you are given an optional right at the top.\nAt this point you start wondering, what is the best you can do to handle an empty optional,\nit only makes sense to exit and stop processing if that's the case.</p>\n\n<p>STEP 1 - Explore and anylyze</p>\n\n<pre><code>public void processMedia(String mediaClassName, String mediaName) {\n\n    // THAT MIGHT BE YOUR FIRST IDEA\n    MediaClass mediaClass = mediaClassFinder.find(mediaClassName).orElse(null); \n\n    // RETURNING ON NULL CONDITION LIKE THE BELOW CAN BE ALRIGHT,\n    // BUT POSSIBLY YOU CAN DO BETTER\n    if (mediaClass == null) {\n        return;\n    }\n    Optional&lt;Media&gt; media = mediaFinder.find(mediaClass.getId(), mediaName);\n\n    // do processing\n\n    // render the processed object\n}\n</code></pre>\n\n<p>STEP 2\nThe best approach might be to extract various pieces of the implementation to a separate methods and chain them together in a functional style.\nAs a side effect of this exercise you will probably end up with much improved interface and structure of your application.\nThat's how refactoring works. Look below, there is no explicit null assignments and no extra return points anywhere. And the coding becomes fun.</p>\n\n<pre><code>public void processMedia(String mediaClassName, String mediaName) {\n    mediaClassFinder.find(mediaClassName)\n        .flatMap(mediaClass -&gt; mediaFinder.find(mediaClass.getId(), mediaName))\n        .map(this::compress)\n        .ifPresent(this::render);\n}\nprivate Media compress(Media media) {\n    // compress media implementation\n    return media;\n}\nprivate void render(Media media) {\n    // render media implementation\n}\n</code></pre>\n\n<p>I hope you liked my example :)</p>\n"}],"owner":{"account_id":204515,"reputation":11679,"user_id":452775,"accept_rate":63,"display_name":"Lii"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":185604,"favorite_count":0,"down_vote_count":0,"up_vote_count":51,"accepted_answer_id":38062699,"answer_count":5,"score":51,"last_activity_date":1698179557,"creation_date":1467059326,"question_id":38062664,"body_markdown":"I love that [optionals][opt] are in the Java standard library now. But there is one basic problem that I keep running into that I haven&#39;t figured out how to solve in the best way (easiest to read and understand, prettiest, shortest):\r\n\r\n**How to return from a method when an optional is empty?**\r\n\r\nI am looking for a general solution that works for different combinations of numbers of optionals and sizes of code blocks.\r\n\r\nIn the following examples I&#39;ll try to show what I mean:\r\n\r\n    void m1() {\r\n        // When I get an optional:\r\n        Optional&lt;String&gt; o = getOptional();\r\n\r\n        // And want to return if it&#39;s empty\r\n        if (!o.isPresent()) return;\r\n        \r\n        // In the whole rest of the method I have to call Optional.get \r\n        // every time I want the value:\r\n        System.out.println(o.get());\r\n        \r\n        // Which is pretty ugly and verbose!\r\n    }\r\n\r\n    \r\n    void m2() {\r\n        // If I instead return null if a value is absent:\r\n        String s = getNullabe();\r\n        if (s == null) return;\r\n        \r\n        // Then I can use the value directly:\r\n        System.out.println(s);\r\n    }\r\n\r\nThis question is about how to get the good aspect of both the examples above: The type safely of the optional and the brevity of nullable types.\r\n\r\nThe rest of the examples illustrates this more.\r\n\r\n    void m3() {\r\n        // If I on the other hand want to throw on empty that&#39;s pretty and compact:\r\n        String s = getOptional()\r\n            .orElseThrow(IllegalStateException::new);\r\n        \r\n        System.out.println(s);\r\n    }\r\n    \r\n    void m4() {\r\n        Optional&lt;String&gt; o = getOptional();\r\n        if (!o.isPresent()) return;\r\n        \r\n        // I can of course declare a new variable for the un-optionalised string:\r\n        String s = o.get();\r\n\r\n        System.out.println(s);\r\n        \r\n        // But the old variable still remains in scope for the whole method \r\n        // which is ugly and annoying.\r\n        System.out.println(o.get());\r\n    }\r\n\r\n    \r\n    void m5() {\r\n        // This is compact and maybe pretty in some ways:\r\n        getOptional().ifPresent(s -&gt; {\r\n            System.out.println(s);\r\n\r\n            // But the extra level of nesting is annoying and it feels \r\n            // wrong to write all the code in a big lambda.\r\n            \r\n            getOtherOptional().ifPresent(i -&gt; {\r\n                // Also, more optional values makes it really weird and \r\n                // pretty hard to read,  while with nullables I would \r\n                // get no extra nesting, it would looks good and be \r\n                // easy to read.\r\n                System.out.println(&quot;i: &quot; + i);\r\n                \r\n                // It doesn&#39;t work in all cases either way.\r\n            });\r\n        });\r\n    }\r\n\r\n    \r\n    Optional&lt;String&gt; getOptional() {\r\n        throw new UnsupportedOperationException();\r\n    }\r\n\r\n    Optional&lt;Integer&gt; getOtherOptional() {\r\n        throw new UnsupportedOperationException();\r\n    }\r\n\r\n    String getNullabe() {\r\n        throw new UnsupportedOperationException();\r\n    }\r\n\r\n\r\nHow can I return from a method if an optional is empty, without having to use `get` in the rest of the method, without declaring an extra variable and without extra levels of block nesting?\r\n\r\nOr if it&#39;s not possible to get all that, what is the best way to handle this situation?\r\n\r\n[opt]: https://docs.oracle.com/javase/8/docs/api/java/util/Optional.html","title":"How to return when an optional is empty?","body":"<p>I love that <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Optional.html\" rel=\"noreferrer\">optionals</a> are in the Java standard library now. But there is one basic problem that I keep running into that I haven't figured out how to solve in the best way (easiest to read and understand, prettiest, shortest):</p>\n<p><strong>How to return from a method when an optional is empty?</strong></p>\n<p>I am looking for a general solution that works for different combinations of numbers of optionals and sizes of code blocks.</p>\n<p>In the following examples I'll try to show what I mean:</p>\n<pre><code>void m1() {\n    // When I get an optional:\n    Optional&lt;String&gt; o = getOptional();\n\n    // And want to return if it's empty\n    if (!o.isPresent()) return;\n    \n    // In the whole rest of the method I have to call Optional.get \n    // every time I want the value:\n    System.out.println(o.get());\n    \n    // Which is pretty ugly and verbose!\n}\n\n\nvoid m2() {\n    // If I instead return null if a value is absent:\n    String s = getNullabe();\n    if (s == null) return;\n    \n    // Then I can use the value directly:\n    System.out.println(s);\n}\n</code></pre>\n<p>This question is about how to get the good aspect of both the examples above: The type safely of the optional and the brevity of nullable types.</p>\n<p>The rest of the examples illustrates this more.</p>\n<pre><code>void m3() {\n    // If I on the other hand want to throw on empty that's pretty and compact:\n    String s = getOptional()\n        .orElseThrow(IllegalStateException::new);\n    \n    System.out.println(s);\n}\n\nvoid m4() {\n    Optional&lt;String&gt; o = getOptional();\n    if (!o.isPresent()) return;\n    \n    // I can of course declare a new variable for the un-optionalised string:\n    String s = o.get();\n\n    System.out.println(s);\n    \n    // But the old variable still remains in scope for the whole method \n    // which is ugly and annoying.\n    System.out.println(o.get());\n}\n\n\nvoid m5() {\n    // This is compact and maybe pretty in some ways:\n    getOptional().ifPresent(s -&gt; {\n        System.out.println(s);\n\n        // But the extra level of nesting is annoying and it feels \n        // wrong to write all the code in a big lambda.\n        \n        getOtherOptional().ifPresent(i -&gt; {\n            // Also, more optional values makes it really weird and \n            // pretty hard to read,  while with nullables I would \n            // get no extra nesting, it would looks good and be \n            // easy to read.\n            System.out.println(&quot;i: &quot; + i);\n            \n            // It doesn't work in all cases either way.\n        });\n    });\n}\n\n\nOptional&lt;String&gt; getOptional() {\n    throw new UnsupportedOperationException();\n}\n\nOptional&lt;Integer&gt; getOtherOptional() {\n    throw new UnsupportedOperationException();\n}\n\nString getNullabe() {\n    throw new UnsupportedOperationException();\n}\n</code></pre>\n<p>How can I return from a method if an optional is empty, without having to use <code>get</code> in the rest of the method, without declaring an extra variable and without extra levels of block nesting?</p>\n<p>Or if it's not possible to get all that, what is the best way to handle this situation?</p>\n"},{"tags":["java","gremlin","tinkerpop3"],"answers":[{"comments":[{"owner":{"account_id":2053237,"reputation":45626,"user_id":1831717,"display_name":"stephen mallette"},"score":0,"creation_date":1698180012,"post_id":77355233,"comment_id":136371992,"body_markdown":"were you using Neptune?","body":"were you using Neptune?"},{"owner":{"account_id":2053237,"reputation":45626,"user_id":1831717,"display_name":"stephen mallette"},"score":0,"creation_date":1698180484,"post_id":77355233,"comment_id":136372052,"body_markdown":"if so, [this post](https://aws.amazon.com/blogs/database/load-balance-graph-queries-using-the-amazon-neptune-gremlin-client/) \n might help also note that there was some discussion today on this point in the TinkerPop Discord Server...you may wish to join to keep an eye on the latest news.","body":"if so, <a href=\"https://aws.amazon.com/blogs/database/load-balance-graph-queries-using-the-amazon-neptune-gremlin-client/\" rel=\"nofollow noreferrer\">this post</a>   might help also note that there was some discussion today on this point in the TinkerPop Discord Server...you may wish to join to keep an eye on the latest news."},{"owner":{"account_id":12141537,"reputation":47,"user_id":8865148,"display_name":"rpg"},"score":0,"creation_date":1698204366,"post_id":77355233,"comment_id":136374178,"body_markdown":"thanks Stephen! I am using JanusGraph.","body":"thanks Stephen! I am using JanusGraph."}],"tags":[],"owner":{"account_id":2053237,"reputation":45626,"user_id":1831717,"display_name":"stephen mallette"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1698179427,"creation_date":1698179427,"answer_id":77355233,"question_id":77355124,"body_markdown":"There is no official support yet to run the drivers over HTTP. There is however future experimental support for HTTP that comes with a number of limitations like not being able to support sessions or transactions. This experimental support will first be available for [Java](https://github.com/apache/tinkerpop/blob/master/gremlin-driver/src/main/java/org/apache/tinkerpop/gremlin/driver/Channelizer.java#L256) and [Python](https://github.com/apache/tinkerpop/blob/master/gremlin-python/src/main/python/gremlin_python/driver/aiohttp/transport.py#L143) and is not yet in any release. You&#39;d have to build it yourself from the `master` branch of the GitHub repo until 3.7.1 releases. Note that even when 3.7.1 releases it will remain an experimental feature and likely stay so until the limitations can be addressed and more testing can be done. Further note that the driver would also have to work with a 3.7.1 compatible server as it took more than just driver changes to get this feature to work.","title":"Does gremlin provide/support client side HttpChannelizer implementation using java driver?","body":"<p>There is no official support yet to run the drivers over HTTP. There is however future experimental support for HTTP that comes with a number of limitations like not being able to support sessions or transactions. This experimental support will first be available for <a href=\"https://github.com/apache/tinkerpop/blob/master/gremlin-driver/src/main/java/org/apache/tinkerpop/gremlin/driver/Channelizer.java#L256\" rel=\"nofollow noreferrer\">Java</a> and <a href=\"https://github.com/apache/tinkerpop/blob/master/gremlin-python/src/main/python/gremlin_python/driver/aiohttp/transport.py#L143\" rel=\"nofollow noreferrer\">Python</a> and is not yet in any release. You'd have to build it yourself from the <code>master</code> branch of the GitHub repo until 3.7.1 releases. Note that even when 3.7.1 releases it will remain an experimental feature and likely stay so until the limitations can be addressed and more testing can be done. Further note that the driver would also have to work with a 3.7.1 compatible server as it took more than just driver changes to get this feature to work.</p>\n"}],"owner":{"account_id":12141537,"reputation":47,"user_id":8865148,"display_name":"rpg"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77355233,"answer_count":1,"score":0,"last_activity_date":1698179427,"creation_date":1698178069,"question_id":77355124,"body_markdown":"The websocket channelizer seems to be the default and only implementation available using the java driver https://tinkerpop.apache.org/javadocs/current/core/org/apache/tinkerpop/gremlin/driver/Channelizer.WebSocketChannelizer.html\r\n\r\nIs there an equivalent HTTP Channelizer which can be used from the client? I can see https://tinkerpop.apache.org/javadocs/current/full/org/apache/tinkerpop/gremlin/server/channel/HttpChannelizer.html which seems to be for use in the server as per the comments in the file.\r\n\r\nContext: load balancing with websockets don&#39;t work as expected due to persistent connections, e.g. adding a new server does not help with redistributing the load, as the connections to the existing servers are persistent. Any other alternatives to this issue other than moving to HTTP?","title":"Does gremlin provide/support client side HttpChannelizer implementation using java driver?","body":"<p>The websocket channelizer seems to be the default and only implementation available using the java driver <a href=\"https://tinkerpop.apache.org/javadocs/current/core/org/apache/tinkerpop/gremlin/driver/Channelizer.WebSocketChannelizer.html\" rel=\"nofollow noreferrer\">https://tinkerpop.apache.org/javadocs/current/core/org/apache/tinkerpop/gremlin/driver/Channelizer.WebSocketChannelizer.html</a></p>\n<p>Is there an equivalent HTTP Channelizer which can be used from the client? I can see <a href=\"https://tinkerpop.apache.org/javadocs/current/full/org/apache/tinkerpop/gremlin/server/channel/HttpChannelizer.html\" rel=\"nofollow noreferrer\">https://tinkerpop.apache.org/javadocs/current/full/org/apache/tinkerpop/gremlin/server/channel/HttpChannelizer.html</a> which seems to be for use in the server as per the comments in the file.</p>\n<p>Context: load balancing with websockets don't work as expected due to persistent connections, e.g. adding a new server does not help with redistributing the load, as the connections to the existing servers are persistent. Any other alternatives to this issue other than moving to HTTP?</p>\n"},{"tags":["java","firebase-realtime-database"],"answers":[{"comments":[{"owner":{"account_id":29549062,"reputation":47,"user_id":22646153,"display_name":"Abisay"},"score":0,"creation_date":1698121389,"post_id":77349442,"comment_id":136361716,"body_markdown":"I left the onCancelled as blank. But I&#39;ve add the &quot;throw error.toException();&quot;. Then how to not read the value from cache?","body":"I left the onCancelled as blank. But I&#39;ve add the &quot;throw error.toException();&quot;. Then how to not read the value from cache?"},{"owner":{"account_id":72426,"reputation":573804,"user_id":209103,"accept_rate":73,"display_name":"Frank van Puffelen"},"score":0,"creation_date":1698159098,"post_id":77349442,"comment_id":136368162,"body_markdown":"There is no way to not read the value form the cache. But if you just want the latest value **and if the client has an active connection to the server**, you can consider using `get` rather than the listener you do now. See https://firebase.google.com/docs/database/android/read-and-write#read_data_once --- Also see Also see [What should I do when someone answers my question?](https://stackoverflow.com/help/someone-answers)","body":"There is no way to not read the value form the cache. But if you just want the latest value <b>and if the client has an active connection to the server</b>, you can consider using <code>get</code> rather than the listener you do now. See <a href=\"https://firebase.google.com/docs/database/android/read-and-write#read_data_once\" rel=\"nofollow noreferrer\">firebase.google.com/docs/database/android/&hellip;</a> --- Also see Also see <a href=\"https://stackoverflow.com/help/someone-answers\">What should I do when someone answers my question?</a>"},{"owner":{"account_id":29549062,"reputation":47,"user_id":22646153,"display_name":"Abisay"},"score":0,"creation_date":1698165116,"post_id":77349442,"comment_id":136369481,"body_markdown":"I know what should I do when someone answers my question. I&#39;ve marked your answer as the answer on the other question by me  https://stackoverflow.com/questions/77346632/firebase-realtime-database-object-value-type/77346661?noredirect=1#comment136357466_77346661.  What do you expect? Any wrongdoings by me?","body":"I know what should I do when someone answers my question. I&#39;ve marked your answer as the answer on the other question by me  <a href=\"https://stackoverflow.com/questions/77346632/firebase-realtime-database-object-value-type/77346661?noredirect=1#comment136357466_77346661\" title=\"firebase realtime database object value type\">stackoverflow.com/questions/77346632/&hellip;</a>.  What do you expect? Any wrongdoings by me?"},{"owner":{"account_id":72426,"reputation":573804,"user_id":209103,"accept_rate":73,"display_name":"Frank van Puffelen"},"score":0,"creation_date":1698171111,"post_id":77349442,"comment_id":136370504,"body_markdown":"Did you read the rest of my comment and the link I provided?","body":"Did you read the rest of my comment and the link I provided?"},{"owner":{"account_id":29549062,"reputation":47,"user_id":22646153,"display_name":"Abisay"},"score":0,"creation_date":1698173796,"post_id":77349442,"comment_id":136370966,"body_markdown":"Yes, I read all of them. I got the point for the cache. You said to consider using get, but the listener is what I need. Then?","body":"Yes, I read all of them. I got the point for the cache. You said to consider using get, but the listener is what I need. Then?"},{"owner":{"account_id":72426,"reputation":573804,"user_id":209103,"accept_rate":73,"display_name":"Frank van Puffelen"},"score":0,"creation_date":1698178545,"post_id":77349442,"comment_id":136371786,"body_markdown":"If you use a listener, your `onDataChange` will first be called with the value from the cache, and then later with the value from the server (if that value is different),. There is no way to change this behavior.","body":"If you use a listener, your <code>onDataChange</code> will first be called with the value from the cache, and then later with the value from the server (if that value is different),. There is no way to change this behavior."},{"owner":{"account_id":29549062,"reputation":47,"user_id":22646153,"display_name":"Abisay"},"score":0,"creation_date":1698179018,"post_id":77349442,"comment_id":136371865,"body_markdown":"Have you read my answer on this question? I made the code to read last value with listener by removing first data `n[0]` then add the fist arrayList into another arrayList.  The second arrayList will store the data without the value from cache.","body":"Have you read my answer on this question? I made the code to read last value with listener by removing first data <code>n[0]</code> then add the fist arrayList into another arrayList.  The second arrayList will store the data without the value from cache."},{"owner":{"account_id":29549062,"reputation":47,"user_id":22646153,"display_name":"Abisay"},"score":0,"creation_date":1698179090,"post_id":77349442,"comment_id":136371876,"body_markdown":"Now my code works fine using listener and removing the first value from cache.","body":"Now my code works fine using listener and removing the first value from cache."},{"owner":{"account_id":72426,"reputation":573804,"user_id":209103,"accept_rate":73,"display_name":"Frank van Puffelen"},"score":0,"creation_date":1698183223,"post_id":77349442,"comment_id":136372436,"body_markdown":"Good to hear you got it working @Abisay &#128077;","body":"Good to hear you got it working @Abisay 👍"}],"tags":[],"owner":{"account_id":72426,"reputation":573804,"user_id":209103,"accept_rate":73,"display_name":"Frank van Puffelen"},"comment_count":9,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698119856,"creation_date":1698119856,"answer_id":77349442,"question_id":77349320,"body_markdown":"If you are running this code on Android **and** have caching enabled, it is expected that your `onDataChange` will first (pretty much instantly) get called with the value from the cache. \r\n\r\nIf the device has a connection to the server and if the value on the server has changed your `onDataChange` will be called again with the value from the server.\r\n\r\n---\r\n\r\nIf that is not the behavior you get, please edit your question to show what actually happens (for example by printing the offending value). That&#39;s also a good moment to implement `onCancelled`, which at its minimum should be:\r\n```\r\npublic void onCancelled(@NonNull DatabaseError error) {\r\n    throw error.toException();\r\n}\r\n```\r\n","title":"How to get the last data on firebase onDataChange?","body":"<p>If you are running this code on Android <strong>and</strong> have caching enabled, it is expected that your <code>onDataChange</code> will first (pretty much instantly) get called with the value from the cache.</p>\n<p>If the device has a connection to the server and if the value on the server has changed your <code>onDataChange</code> will be called again with the value from the server.</p>\n<hr />\n<p>If that is not the behavior you get, please edit your question to show what actually happens (for example by printing the offending value). That's also a good moment to implement <code>onCancelled</code>, which at its minimum should be:</p>\n<pre><code>public void onCancelled(@NonNull DatabaseError error) {\n    throw error.toException();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":29549062,"reputation":47,"user_id":22646153,"display_name":"Abisay"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1698179178,"creation_date":1698126790,"answer_id":77349785,"question_id":77349320,"body_markdown":"To make the arrayList not keeping the first data, the code need to be change like this:\r\n\r\n```\r\nmDose1.addValueEventListener(new ValueEventListener() {\r\n    public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n       int iDose = snapshot.getValue(Integer.class);\r\n       Sting sDose = String.valueof(iDose1);\r\n       arrayListA.add(sDose);\r\n       arrayListB.add(arrayListA.remove(0));\r\n    }\r\n    public void onCancelled(@NonNull DatabaseError error) {\r\n       throw error.toException();\r\n    }\r\n\r\n});\r\n```\r\nThen I print the `arrayListB.get(n)` from n = 1 then it works fine.\r\nI tried to print the `arrayListA.get(n)` from n = 1, but it won&#39;t show anything.","title":"How to get the last data on firebase onDataChange?","body":"<p>To make the arrayList not keeping the first data, the code need to be change like this:</p>\n<pre><code>mDose1.addValueEventListener(new ValueEventListener() {\n    public void onDataChange(@NonNull DataSnapshot snapshot) {\n       int iDose = snapshot.getValue(Integer.class);\n       Sting sDose = String.valueof(iDose1);\n       arrayListA.add(sDose);\n       arrayListB.add(arrayListA.remove(0));\n    }\n    public void onCancelled(@NonNull DatabaseError error) {\n       throw error.toException();\n    }\n\n});\n</code></pre>\n<p>Then I print the <code>arrayListB.get(n)</code> from n = 1 then it works fine.\nI tried to print the <code>arrayListA.get(n)</code> from n = 1, but it won't show anything.</p>\n"}],"owner":{"account_id":29549062,"reputation":47,"user_id":22646153,"display_name":"Abisay"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":53,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77349785,"answer_count":2,"score":1,"last_activity_date":1698179178,"creation_date":1698117247,"question_id":77349320,"body_markdown":"I want to get the last input data from firebase. But by using the ValueListener and onDataChange, the value that I got is the last data-1 (previous of the last).\r\n\r\nThis is the code:\r\n```\r\nmDose1.addValueEventListener(new ValueEventListener() {\r\n    public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n       int iDose = snapshot.getValue(Integer.class);\r\n    }\r\n    public void onCancelled(@NonNull DatabaseError error) {\r\n       throw error.toException();\r\n    }\r\n\r\n});\r\n```\r\nI couldn&#39;t find any ways to solve this by searching on the interner, or i might not understand of what I should search.\r\n\r\n//Edit\r\n\r\nThe real issue isn&#39;t with the ValueListener. The iDose could get the last data. But then when I add the iDose to an arrayList, the arrayList willprint the previous data. Why my arrayList get the previous data first?\r\n\r\nThis is the code:\r\n```\r\nmDose1.addValueEventListener(new ValueEventListener() {\r\n    public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n       int iDose = snapshot.getValue(Integer.class);\r\n       Sting sDose = String.valueof(iDose1);\r\n       jud.setText(sDose);\r\n       arrayList.add(iDose);\r\n    }\r\n    public void onCancelled(@NonNull DatabaseError error) {\r\n       throw error.toException();\r\n    }\r\n\r\n});\r\n```\r\n\r\nThe `jud.setText(sDose);` works fine by showing the last data. But the arrayList keeps showing the previous data.","title":"How to get the last data on firebase onDataChange?","body":"<p>I want to get the last input data from firebase. But by using the ValueListener and onDataChange, the value that I got is the last data-1 (previous of the last).</p>\n<p>This is the code:</p>\n<pre><code>mDose1.addValueEventListener(new ValueEventListener() {\n    public void onDataChange(@NonNull DataSnapshot snapshot) {\n       int iDose = snapshot.getValue(Integer.class);\n    }\n    public void onCancelled(@NonNull DatabaseError error) {\n       throw error.toException();\n    }\n\n});\n</code></pre>\n<p>I couldn't find any ways to solve this by searching on the interner, or i might not understand of what I should search.</p>\n<p>//Edit</p>\n<p>The real issue isn't with the ValueListener. The iDose could get the last data. But then when I add the iDose to an arrayList, the arrayList willprint the previous data. Why my arrayList get the previous data first?</p>\n<p>This is the code:</p>\n<pre><code>mDose1.addValueEventListener(new ValueEventListener() {\n    public void onDataChange(@NonNull DataSnapshot snapshot) {\n       int iDose = snapshot.getValue(Integer.class);\n       Sting sDose = String.valueof(iDose1);\n       jud.setText(sDose);\n       arrayList.add(iDose);\n    }\n    public void onCancelled(@NonNull DatabaseError error) {\n       throw error.toException();\n    }\n\n});\n</code></pre>\n<p>The <code>jud.setText(sDose);</code> works fine by showing the last data. But the arrayList keeps showing the previous data.</p>\n"},{"tags":["java","swing"],"comments":[{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1698173835,"post_id":77354653,"comment_id":136370976,"body_markdown":"Add a mention and a tag for the GUI framework. Swing, JavaFX, SWT, Vaadin?","body":"Add a mention and a tag for the GUI framework. Swing, JavaFX, SWT, Vaadin?"},{"owner":{"account_id":27998057,"reputation":13,"user_id":21382866,"display_name":"Paralyzer"},"score":0,"creation_date":1698175770,"post_id":77354653,"comment_id":136371306,"body_markdown":"I added as a tag.","body":"I added as a tag."},{"owner":{"account_id":6017640,"reputation":8919,"user_id":4725875,"display_name":"DevilsHnd - 退した"},"score":0,"creation_date":1698180960,"post_id":77354653,"comment_id":136372124,"body_markdown":"`if (javax.swing.SwingUtilities.isRightMouseButton(e)) {`","body":"<code>if (javax.swing.SwingUtilities.isRightMouseButton(e)) {</code>"}],"answers":[{"tags":[],"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1698178530,"creation_date":1698178530,"answer_id":77355167,"question_id":77354653,"body_markdown":"&gt;  opens pop-up menu with right-click.\r\n\r\nThe old way is to use a MouseListener to show the popup.\r\n\r\nThe newer way is to use the `setComponentPopup(...)` method:\r\n\r\n    import java.awt.*;\r\n    import java.awt.event.*;\r\n    import javax.swing.*;\r\n    import javax.swing.event.*;\r\n    \r\n    public class TableRightClick extends JPanel implements ActionListener\r\n    {\r\n    \tJPopupMenu popup;\r\n    \r\n    \tpublic TableRightClick()\r\n    \t{\r\n    \t\tpopup = new JPopupMenu();\r\n    \t\tJMenuItem menuItem = new JMenuItem(&quot;Click Me&quot;);\r\n    \t\tmenuItem.addActionListener( this );\r\n    \t\tpopup.add( menuItem );\r\n    \r\n    \t\tJTable table = new JTable(10, 5);\r\n    \t\ttable.setComponentPopupMenu( popup );\r\n    \t\tpopup.addPopupMenuListener(new PopupMenuListener()\r\n    \t\t{\r\n    \t\t\t@Override\r\n    \t\t\tpublic void popupMenuWillBecomeVisible(PopupMenuEvent e)\r\n    \t\t\t{\r\n    \t\t\t\tSwingUtilities.invokeLater(() -&gt;\r\n    \t\t\t\t{\r\n    \t\t\t\t\tPoint point = SwingUtilities.convertPoint(popup, new Point(0, 0), table);\r\n    \t\t\t\t\tint currentRow = table.rowAtPoint(point);\r\n    \t\t\t\t\tint currentColumn = table.columnAtPoint(point);\r\n    \t\t\t\t\ttable.changeSelection(currentRow, currentColumn, false, false);\r\n    \t\t\t\t});\r\n    \t\t\t}\r\n    \r\n    \t\t\t@Override\r\n    \t\t\tpublic void popupMenuWillBecomeInvisible(PopupMenuEvent e) {}\r\n    \r\n    \t\t\t@Override\r\n    \t\t\tpublic void popupMenuCanceled(PopupMenuEvent e) {}\r\n    \t\t});\r\n    /*\r\n    \t\t//  When using a MouseListener to show popup menu\r\n    \t\ttable.addMouseListener( new MouseAdapter()\r\n    \t\t{\r\n      \t\t\t@Override\r\n    \t\t\tpublic void mouseReleased(MouseEvent e)\r\n    \t\t\t{\r\n    \t\t\t\tif (e.isPopupTrigger())\r\n    \t\t\t\t{\r\n    \t\t\t\t\tJTable source = (JTable)e.getSource();\r\n    \t\t\t\t\tint row = source.rowAtPoint( e.getPoint() );\r\n    \t\t\t\t\tint column = source.columnAtPoint( e.getPoint() );\r\n    \r\n    \t\t\t\t\tsource.changeSelection(row, column, false, false);\r\n    \r\n    \t\t\t\t\tpopup.show(e.getComponent(), e.getX(), e.getY());\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\t});\r\n    */\r\n    \r\n    \t\ttable.setPreferredScrollableViewportSize(table.getPreferredSize());\r\n    \t\tadd( new JScrollPane(table) );\r\n    \t}\r\n    \r\n    \tpublic void actionPerformed(ActionEvent e)\r\n    \t{\r\n    \t\tComponent c = (Component)e.getSource();\r\n    \t\tJPopupMenu popup = (JPopupMenu)c.getParent();\r\n    \t\tJTable table = (JTable)popup.getInvoker();\r\n    \t\tSystem.out.println(table.getSelectedRow() + &quot; : &quot; + table.getSelectedColumn());\r\n    \t}\r\n    \r\n    \tprivate static void createAndShowGUI()\r\n    \t{\r\n    \t\tJFrame frame = new JFrame(&quot;Table Right Click&quot;);\r\n    \t\tframe.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n    \t\tframe.add(new TableRightClick());\r\n    \t\tframe.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);\r\n    \t\tframe.pack();\r\n    \t\tframe.setLocationByPlatform( true );\r\n    \t\tframe.setVisible( true );\r\n    \t}\r\n    \r\n    \tpublic static void main(String[] args) throws Exception\r\n    \t{\r\n    \t\tjava.awt.EventQueue.invokeLater( () -&gt; createAndShowGUI() );\r\n    \t}\r\n    }\r\n\r\n","title":"How can I select a new row when I right click?","body":"<blockquote>\n<p>opens pop-up menu with right-click.</p>\n</blockquote>\n<p>The old way is to use a MouseListener to show the popup.</p>\n<p>The newer way is to use the <code>setComponentPopup(...)</code> method:</p>\n<pre><code>import java.awt.*;\nimport java.awt.event.*;\nimport javax.swing.*;\nimport javax.swing.event.*;\n\npublic class TableRightClick extends JPanel implements ActionListener\n{\n    JPopupMenu popup;\n\n    public TableRightClick()\n    {\n        popup = new JPopupMenu();\n        JMenuItem menuItem = new JMenuItem(&quot;Click Me&quot;);\n        menuItem.addActionListener( this );\n        popup.add( menuItem );\n\n        JTable table = new JTable(10, 5);\n        table.setComponentPopupMenu( popup );\n        popup.addPopupMenuListener(new PopupMenuListener()\n        {\n            @Override\n            public void popupMenuWillBecomeVisible(PopupMenuEvent e)\n            {\n                SwingUtilities.invokeLater(() -&gt;\n                {\n                    Point point = SwingUtilities.convertPoint(popup, new Point(0, 0), table);\n                    int currentRow = table.rowAtPoint(point);\n                    int currentColumn = table.columnAtPoint(point);\n                    table.changeSelection(currentRow, currentColumn, false, false);\n                });\n            }\n\n            @Override\n            public void popupMenuWillBecomeInvisible(PopupMenuEvent e) {}\n\n            @Override\n            public void popupMenuCanceled(PopupMenuEvent e) {}\n        });\n/*\n        //  When using a MouseListener to show popup menu\n        table.addMouseListener( new MouseAdapter()\n        {\n            @Override\n            public void mouseReleased(MouseEvent e)\n            {\n                if (e.isPopupTrigger())\n                {\n                    JTable source = (JTable)e.getSource();\n                    int row = source.rowAtPoint( e.getPoint() );\n                    int column = source.columnAtPoint( e.getPoint() );\n\n                    source.changeSelection(row, column, false, false);\n\n                    popup.show(e.getComponent(), e.getX(), e.getY());\n                }\n            }\n        });\n*/\n\n        table.setPreferredScrollableViewportSize(table.getPreferredSize());\n        add( new JScrollPane(table) );\n    }\n\n    public void actionPerformed(ActionEvent e)\n    {\n        Component c = (Component)e.getSource();\n        JPopupMenu popup = (JPopupMenu)c.getParent();\n        JTable table = (JTable)popup.getInvoker();\n        System.out.println(table.getSelectedRow() + &quot; : &quot; + table.getSelectedColumn());\n    }\n\n    private static void createAndShowGUI()\n    {\n        JFrame frame = new JFrame(&quot;Table Right Click&quot;);\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        frame.add(new TableRightClick());\n        frame.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);\n        frame.pack();\n        frame.setLocationByPlatform( true );\n        frame.setVisible( true );\n    }\n\n    public static void main(String[] args) throws Exception\n    {\n        java.awt.EventQueue.invokeLater( () -&gt; createAndShowGUI() );\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":27998057,"reputation":13,"user_id":21382866,"display_name":"Paralyzer"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":43,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77355167,"answer_count":1,"score":1,"last_activity_date":1698178636,"creation_date":1698173052,"question_id":77354653,"body_markdown":"I&#39;m programming a database logger program. After the user clicks on a new row, I want to point to that row. In this way, user will can understand which in row when that opens pop-up menu with right-click.\r\n\r\nThis is my program&#39;s GUI:\r\n\r\n[![https://i.stack.imgur.com/HvXK4.png][1]][1]\r\n\r\nI tried below codes:\r\n\r\n    tbl_patika_list.addMouseListener(new MouseAdapter() {\r\n                @Override\r\n                public void mousePressed(MouseEvent e) {\r\n                    Point point = e.getPoint();\r\n                    int clickedRow = tbl_patika_list.rowAtPoint(point);\r\n                    tbl_patika_list.clearSelection();\r\n                    tbl_patika_list.setRowSelectionInterval(clickedRow,clickedRow);\r\n                }\r\n            });\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/HvXK4.png","title":"How can I select a new row when I right click?","body":"<p>I'm programming a database logger program. After the user clicks on a new row, I want to point to that row. In this way, user will can understand which in row when that opens pop-up menu with right-click.</p>\n<p>This is my program's GUI:</p>\n<p><a href=\"https://i.stack.imgur.com/HvXK4.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/HvXK4.png\" alt=\"https://i.stack.imgur.com/HvXK4.png\" /></a></p>\n<p>I tried below codes:</p>\n<pre><code>tbl_patika_list.addMouseListener(new MouseAdapter() {\n            @Override\n            public void mousePressed(MouseEvent e) {\n                Point point = e.getPoint();\n                int clickedRow = tbl_patika_list.rowAtPoint(point);\n                tbl_patika_list.clearSelection();\n                tbl_patika_list.setRowSelectionInterval(clickedRow,clickedRow);\n            }\n        });\n</code></pre>\n"},{"tags":["java","maven","jar","package","war"],"comments":[{"owner":{"account_id":3557625,"reputation":199021,"user_id":2970947,"display_name":"Elliott Frisch"},"score":0,"creation_date":1588085297,"post_id":61483057,"comment_id":108760887,"body_markdown":"That looks like an **old** version of maven. I&#39;m pretty sure the default central repo uses https now. What version of maven are you using?","body":"That looks like an <b>old</b> version of maven. I&#39;m pretty sure the default central repo uses https now. What version of maven are you using?"},{"owner":{"account_id":14871245,"reputation":347,"user_id":10738788,"display_name":"deepakbhavale67"},"score":0,"creation_date":1588085391,"post_id":61483057,"comment_id":108760944,"body_markdown":"@ElliottFrisch I am using Apache Maven 3.5.2 Could you please tell me the resolution?","body":"@ElliottFrisch I am using Apache Maven 3.5.2 Could you please tell me the resolution?"},{"owner":{"account_id":3557625,"reputation":199021,"user_id":2970947,"display_name":"Elliott Frisch"},"score":1,"creation_date":1588085648,"post_id":61483057,"comment_id":108761126,"body_markdown":"Try upgrading maven. The current release is [3.6.3](https://maven.apache.org/download.cgi) and &quot;http://central.maven.org/maven2/&quot; is now &quot;https://repo.maven.apache.org/maven2&quot;","body":"Try upgrading maven. The current release is <a href=\"https://maven.apache.org/download.cgi\" rel=\"nofollow noreferrer\">3.6.3</a> and &quot;<a href=\"http://central.maven.org/maven2/\" rel=\"nofollow noreferrer\">central.maven.org/maven2</a>&quot; is now &quot;<a href=\"https://repo.maven.apache.org/maven2\" rel=\"nofollow noreferrer\">repo.maven.apache.org/maven2</a>&quot;"},{"owner":{"account_id":888714,"reputation":34077,"user_id":927493,"accept_rate":61,"display_name":"J Fabian Meier"},"score":0,"creation_date":1588091546,"post_id":61483057,"comment_id":108764640,"body_markdown":"You are probably inside a company network and have a proxy problem.","body":"You are probably inside a company network and have a proxy problem."},{"owner":{"account_id":14871245,"reputation":347,"user_id":10738788,"display_name":"deepakbhavale67"},"score":0,"creation_date":1588141314,"post_id":61483057,"comment_id":108782093,"body_markdown":"@JFMeier Yes Exactly. How to resolve it ?","body":"@JFMeier Yes Exactly. How to resolve it ?"},{"owner":{"account_id":888714,"reputation":34077,"user_id":927493,"accept_rate":61,"display_name":"J Fabian Meier"},"score":0,"creation_date":1588144420,"post_id":61483057,"comment_id":108783383,"body_markdown":"You need to talk to the admin to find out how to configure the proxy.","body":"You need to talk to the admin to find out how to configure the proxy."}],"answers":[{"tags":[],"owner":{"account_id":1075370,"reputation":438,"user_id":1073649,"accept_rate":25,"display_name":"egore911"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1590661647,"creation_date":1590661647,"answer_id":62062480,"question_id":61483057,"body_markdown":"This failes likely due to an artifact downloaded earlier (in my case .m2/repository/org/geotools/geotools/19.1/geotools-19.1.pom) containing this as a specific repo, maybe even retrieved from a thirdparty repo.\r\n\r\nCheck your local artifacts for references to the repository, e.g. by this brute force approach:\r\n\r\n    grep -nr &quot;central.maven.org&quot; ~/.m2/repository/\r\n\r\nReplacing/removing the dependency solved the issue.","title":"How to resolve central.maven.org: Unknown host central.maven.org in Maven Project?","body":"<p>This failes likely due to an artifact downloaded earlier (in my case .m2/repository/org/geotools/geotools/19.1/geotools-19.1.pom) containing this as a specific repo, maybe even retrieved from a thirdparty repo.</p>\n\n<p>Check your local artifacts for references to the repository, e.g. by this brute force approach:</p>\n\n<pre><code>grep -nr \"central.maven.org\" ~/.m2/repository/\n</code></pre>\n\n<p>Replacing/removing the dependency solved the issue.</p>\n"}],"owner":{"account_id":14871245,"reputation":347,"user_id":10738788,"display_name":"deepakbhavale67"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":10310,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1698177800,"creation_date":1588085232,"question_id":61483057,"body_markdown":"Please find the below logs : \r\n```\r\n[ERROR] Failed to execute goal on project hospital: Could not resolve dependencies for project \r\ncom.project_name.test.web:hospital:war:0.0.1-SNAPSHOT: Failed to collect dependencies at \r\ncom.example.test:example-child:jar:1.1.12-SNAPSHOT: Failed to read artifact descriptor for \r\ncom.example.test:example-child:jar:1.1.12-SNAPSHOT: Could not transfer artifact \r\ncom.example.test:example-parent:pom:1.1.12-SNAPSHOT from/to maven-central\r\n(http://central.maven.org/maven2/): central.maven.org: Unknown host central.maven.org -&gt; [Help 1]\r\n```\r\nThanks in advance!","title":"How to resolve central.maven.org: Unknown host central.maven.org in Maven Project?","body":"<p>Please find the below logs : </p>\n\n<pre><code>[ERROR] Failed to execute goal on project hospital: Could not resolve dependencies for project \ncom.project_name.test.web:hospital:war:0.0.1-SNAPSHOT: Failed to collect dependencies at \ncom.example.test:example-child:jar:1.1.12-SNAPSHOT: Failed to read artifact descriptor for \ncom.example.test:example-child:jar:1.1.12-SNAPSHOT: Could not transfer artifact \ncom.example.test:example-parent:pom:1.1.12-SNAPSHOT from/to maven-central\n(http://central.maven.org/maven2/): central.maven.org: Unknown host central.maven.org -&gt; [Help 1]\n</code></pre>\n\n<p>Thanks in advance!</p>\n"},{"tags":["java","rabbitmq","jaxb","amqp","unmarshalling"],"owner":{"account_id":1749820,"reputation":1,"user_id":1599176,"display_name":"bkiyak"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1698176532,"creation_date":1698176532,"question_id":77354998,"body_markdown":"`I use jaxb unmarshaller in rabbitmq listener method with one quee multiple consumer . As you know jaxb unmarshaller is not thread safe so my unmarshalled object different from orginal message. How can i deal with this problem.\r\nThat&#39;s my code :\r\n`public class NotficationListener{\r\n@RabbitListener(queues = &quot;FASTQE0132&quot;, containerFactory = &quot;rabbitListenerContainerFactory&quot;)\r\n   \r\n```\r\n` public void handleMessage(final byte[] message) throws Throwable {\r\n        JAXBContext jbc = JAXBContext.newInstance(FastIstem.class);\r\n        Unmarshaller um = jbc.createUnmarshaller();\r\nFastIstem fastIstem=\r\n                (FastIstem) um.unmarshal(new ByteArrayInputStream(message));\r\n\r\n            synchronized (fastIstem) {\r\n                endPointServiceForInput.executeService(message,\r\n                        fastIstem, fastIslemTipModelList);//The method throws exception because the fastIstem values not equals to orginal message when i use multiple consumers.\r\n\r\n            }\r\n}\r\n}\r\n`\r\n\r\n```\r\n```\r\n`@Bean\r\n    public SimpleRabbitListenerContainerFactory rabbitListenerContainerFactory(ConnectionFactory connectionFactory) throws JAXBException {\r\n        SimpleRabbitListenerContainerFactory factory = new SimpleRabbitListenerContainerFactory();\r\n        factory.setConcurrentConsumers(10);\r\n        factory.setMaxConcurrentConsumers(20);\r\n        factory.setConsecutiveActiveTrigger(1);\r\n        factory.setConsecutiveIdleTrigger(1);\r\n        factory.setPrefetchCount(5000);\r\n        factory.setConnectionFactory(connectionFactory);\r\n        return factory;\r\n    }\r\n`\r\n```\r\nI tired use fastIstem object with synchronized block but is not working. Also i tired this codes but not working \r\n`public class Xml2Class {\r\n    private ThreadLocal&lt;Unmarshaller&gt; unmarshaller;\r\n\r\n    public Xml2Class(JAXBContext jaxb) {\r\n        this.unmarshaller = ThreadLocal.withInitial(() -&gt; safe(jaxb::createUnmarshaller));\r\n    }\r\n\r\n    public Object unmarshal(InputStream is) throws JAXBException {\r\n            return unmarshaller.get().unmarshal(is);\r\n    }\r\n\r\n    public Xml2Class() {\r\n        this(safe(() -&gt; JAXBContext.newInstance(FastIstem.class)));\r\n    }\r\n\r\n    private static &lt;T&gt; T safe(Callable&lt;T&gt; fn) {\r\n        try {\r\n            return fn.call();\r\n        } catch (RuntimeException e) {\r\n            throw e;\r\n        } catch (Exception e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n    }\r\n    static final JAXBContext context;\r\n\r\n    static {\r\n        try {\r\n            context = initContext();\r\n        } catch (JAXBException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n    }\r\n    private static JAXBContext initContext() throws JAXBException {\r\n        return JAXBContext.newInstance(FastIstem.class);\r\n    }\r\n\r\n}``","title":"Thread Safe JAXB unmarshaller in rabbitmq listener java","body":"<p><code>I use jaxb unmarshaller in rabbitmq listener method with one quee multiple consumer . As you know jaxb unmarshaller is not thread safe so my unmarshalled object different from orginal message. How can i deal with this problem. That's my code : </code>public class NotficationListener{\n@RabbitListener(queues = &quot;FASTQE0132&quot;, containerFactory = &quot;rabbitListenerContainerFactory&quot;)</p>\n<pre><code>` public void handleMessage(final byte[] message) throws Throwable {\n        JAXBContext jbc = JAXBContext.newInstance(FastIstem.class);\n        Unmarshaller um = jbc.createUnmarshaller();\nFastIstem fastIstem=\n                (FastIstem) um.unmarshal(new ByteArrayInputStream(message));\n\n            synchronized (fastIstem) {\n                endPointServiceForInput.executeService(message,\n                        fastIstem, fastIslemTipModelList);//The method throws exception because the fastIstem values not equals to orginal message when i use multiple consumers.\n\n            }\n}\n}\n`\n\n</code></pre>\n<pre><code>`@Bean\n    public SimpleRabbitListenerContainerFactory rabbitListenerContainerFactory(ConnectionFactory connectionFactory) throws JAXBException {\n        SimpleRabbitListenerContainerFactory factory = new SimpleRabbitListenerContainerFactory();\n        factory.setConcurrentConsumers(10);\n        factory.setMaxConcurrentConsumers(20);\n        factory.setConsecutiveActiveTrigger(1);\n        factory.setConsecutiveIdleTrigger(1);\n        factory.setPrefetchCount(5000);\n        factory.setConnectionFactory(connectionFactory);\n        return factory;\n    }\n`\n</code></pre>\n<p>I tired use fastIstem object with synchronized block but is not working. Also i tired this codes but not working\n`public class Xml2Class {\nprivate ThreadLocal unmarshaller;</p>\n<pre><code>public Xml2Class(JAXBContext jaxb) {\n    this.unmarshaller = ThreadLocal.withInitial(() -&gt; safe(jaxb::createUnmarshaller));\n}\n\npublic Object unmarshal(InputStream is) throws JAXBException {\n        return unmarshaller.get().unmarshal(is);\n}\n\npublic Xml2Class() {\n    this(safe(() -&gt; JAXBContext.newInstance(FastIstem.class)));\n}\n\nprivate static &lt;T&gt; T safe(Callable&lt;T&gt; fn) {\n    try {\n        return fn.call();\n    } catch (RuntimeException e) {\n        throw e;\n    } catch (Exception e) {\n        throw new RuntimeException(e);\n    }\n}\nstatic final JAXBContext context;\n\nstatic {\n    try {\n        context = initContext();\n    } catch (JAXBException e) {\n        throw new RuntimeException(e);\n    }\n}\nprivate static JAXBContext initContext() throws JAXBException {\n    return JAXBContext.newInstance(FastIstem.class);\n}\n</code></pre>\n<p>}``</p>\n"},{"tags":["java","maven","google-app-engine","deployment"],"comments":[{"owner":{"account_id":29745482,"reputation":1,"user_id":22796667,"display_name":"MuadDib"},"score":0,"creation_date":1699460287,"post_id":77354982,"comment_id":136535092,"body_markdown":"see https://stackoverflow.com/a/77244732/22796667 for a solution, i.e. migrating to Artifact Registry","body":"see <a href=\"https://stackoverflow.com/a/77244732/22796667\">stackoverflow.com/a/77244732/22796667</a> for a solution, i.e. migrating to Artifact Registry"}],"owner":{"account_id":29745482,"reputation":1,"user_id":22796667,"display_name":"MuadDib"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":67,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1698176412,"creation_date":1698176412,"question_id":77354982,"body_markdown":"Running in a Google App Engine deployment issue.\r\nSee [https://stackoverflow.com/questions/77181996/gcloud-build-failure-error-failed-to-initialize-analyzer-no-such-object/77354911#77354911](https://stackoverflow.com)\r\n\r\nGoogle App Engine deployments that used to work several months ago do not work any more with App Engine Standard / Java 17 / bundled APIs / Maven App Engine plugin 2.4.4 and 2.5.0 / gcloud 452.0.0.\r\n\r\nHere&#39;s the Cloud Build error:\r\n\r\n&lt;code&gt;Step #2 - &quot;build&quot;: ERROR: failed to initialize analyzer: getting previous image: getting config file for image &quot;eu.gcr.io/PROJECTID/app-engine-tmp/app/default/ttl-18h:latest&quot;: GET https://storage.googleapis.com/eu.artifacts.PROJECTID.appspot.com/containers/images/sha256:036aff03ac31731663e8aee494f16b733e1c56e31b329b9db470007802a361e7?access_token=REDACTED: unexpected status code 404 Not Found: NoSuchKeyThe specified key does not exist.No such object: eu.artifacts.PROJECTID.appspot.com/containers/images/sha256:036aff03ac31731663e8aee494f16b733e1c56e31b329b9db470007802a361e7\r\nFinished Step #2 - &quot;build&quot;\r\nERROR\r\nERROR: build step 2 &quot;eu.gcr.io/gae-runtimes/buildpacks/google-gae-22/java/builder:java_20231016_RC00&quot; failed: step exited with non-zero status: 1&lt;/code&gt;\r\n\r\nThis question is related to https://stackoverflow.com/questions/77181996/gcloud-build-failure-error-failed-to-initialize-analyzer-no-such-object/77354911#77354911\r\nThis is why I would like to try to pass the gcloud --no-cache flag to the Maven App Engine plugin.","title":"How to pass the gcloud --no-cache flag to the Maven App Engine plugin?","body":"<p>Running in a Google App Engine deployment issue.\nSee <a href=\"https://stackoverflow.com\">https://stackoverflow.com/questions/77181996/gcloud-build-failure-error-failed-to-initialize-analyzer-no-such-object/77354911#77354911</a></p>\n<p>Google App Engine deployments that used to work several months ago do not work any more with App Engine Standard / Java 17 / bundled APIs / Maven App Engine plugin 2.4.4 and 2.5.0 / gcloud 452.0.0.</p>\n<p>Here's the Cloud Build error:</p>\n<p><code>Step #2 - &quot;build&quot;: ERROR: failed to initialize analyzer: getting previous image: getting config file for image &quot;eu.gcr.io/PROJECTID/app-engine-tmp/app/default/ttl-18h:latest&quot;: GET <a href=\"https://storage.googleapis.com/eu.artifacts.PROJECTID.appspot.com/containers/images/sha256:036aff03ac31731663e8aee494f16b733e1c56e31b329b9db470007802a361e7?access_token=REDACTED\" rel=\"nofollow noreferrer\">https://storage.googleapis.com/eu.artifacts.PROJECTID.appspot.com/containers/images/sha256:036aff03ac31731663e8aee494f16b733e1c56e31b329b9db470007802a361e7?access_token=REDACTED</a>: unexpected status code 404 Not Found: NoSuchKeyThe specified key does not exist.No such object: eu.artifacts.PROJECTID.appspot.com/containers/images/sha256:036aff03ac31731663e8aee494f16b733e1c56e31b329b9db470007802a361e7\nFinished Step #2 - &quot;build&quot;\nERROR\nERROR: build step 2 &quot;eu.gcr.io/gae-runtimes/buildpacks/google-gae-22/java/builder:java_20231016_RC00&quot; failed: step exited with non-zero status: 1</code></p>\n<p>This question is related to <a href=\"https://stackoverflow.com/questions/77181996/gcloud-build-failure-error-failed-to-initialize-analyzer-no-such-object/77354911#77354911\">GCloud Build Failure: ERROR: failed to initialize analyzer, No such object</a>\nThis is why I would like to try to pass the gcloud --no-cache flag to the Maven App Engine plugin.</p>\n"},{"tags":["java","linux","gradle","build.gradle"],"answers":[{"tags":[],"owner":{"account_id":288740,"reputation":36435,"user_id":589329,"accept_rate":40,"display_name":"Vampire"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1698176081,"creation_date":1698176081,"answer_id":77354954,"question_id":77353676,"body_markdown":"Typically `/usr/lib/jvm/openjdk-11` contains a JDK on Linux.\r\n\r\nGradle when discovering toolchains looks at such typical places where JDKs are found and warns you that you might have a corrupted JDK there that misses important files.\r\n\r\nIf I should guess, that is a left-over of a not fully uninstalled JDK. If I were you, I&#39;d just delete that directory.","title":"gradle build not finding executable at expected location","body":"<p>Typically <code>/usr/lib/jvm/openjdk-11</code> contains a JDK on Linux.</p>\n<p>Gradle when discovering toolchains looks at such typical places where JDKs are found and warns you that you might have a corrupted JDK there that misses important files.</p>\n<p>If I should guess, that is a left-over of a not fully uninstalled JDK. If I were you, I'd just delete that directory.</p>\n"}],"owner":{"account_id":16653073,"reputation":93,"user_id":12035343,"display_name":"0jnats3"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":124,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1698176081,"creation_date":1698163180,"question_id":77353676,"body_markdown":"I am new to gradle. I am getting an warning message when using gradle build: \r\n```\r\ngradle build\r\nPath for java installation &#39;/usr/lib/jvm/openjdk-11&#39; (Common Linux Locations) does not contain a java executable\r\n\r\nBUILD SUCCESSFUL in 399ms\r\n3 actionable tasks: 3 up-to-date\r\n```\r\n\r\nThe build is successful, but is this an issue I should fix? \r\n\r\nSome info:\r\n\r\n\r\n1. usr/lib/jvm/openjdk-11 only contains a src.zip file, nothing else\r\n\r\n\r\n2. &#39;which java&#39; returns /usr/bin/java\r\n\r\n3. namei /usr/bin/java returns \r\n```\r\nf: /usr/bin/java\r\n d /\r\n d usr\r\n d bin\r\n l java -&gt; /etc/alternatives/java\r\n   d /\r\n   d etc\r\n   d alternatives\r\n   l java -&gt; /usr/lib/jvm/java-11-openjdk-amd64/bin/java\r\n     d /\r\n     d usr\r\n     d lib\r\n     d jvm\r\n     d java-11-openjdk-amd64\r\n     d bin\r\n     - java\r\n```\r\n\r\n4. echo $JAVA_HOME returns nothing\r\n\r\n5. echo $PATH returns ``` /usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin:/snap/bin:/opt/gradle/gradle-8.4/bin``` \r\n\r\n6. java -version returns ```openjdk version &quot;11.0.20.1&quot; 2023-08-24\r\nOpenJDK Runtime Environment (build 11.0.20.1+1-post-Ubuntu-0ubuntu122.04)\r\nOpenJDK 64-Bit Server VM (build 11.0.20.1+1-post-Ubuntu-0ubuntu122.04, mixed mode, sharing)```\r\n\r\n7. ChatGPT has given me a few erroneous solutions that just lead to the build failing so I won&#39;t mention those","title":"gradle build not finding executable at expected location","body":"<p>I am new to gradle. I am getting an warning message when using gradle build:</p>\n<pre><code>gradle build\nPath for java installation '/usr/lib/jvm/openjdk-11' (Common Linux Locations) does not contain a java executable\n\nBUILD SUCCESSFUL in 399ms\n3 actionable tasks: 3 up-to-date\n</code></pre>\n<p>The build is successful, but is this an issue I should fix?</p>\n<p>Some info:</p>\n<ol>\n<li><p>usr/lib/jvm/openjdk-11 only contains a src.zip file, nothing else</p>\n</li>\n<li><p>'which java' returns /usr/bin/java</p>\n</li>\n<li><p>namei /usr/bin/java returns</p>\n</li>\n</ol>\n<pre><code>f: /usr/bin/java\n d /\n d usr\n d bin\n l java -&gt; /etc/alternatives/java\n   d /\n   d etc\n   d alternatives\n   l java -&gt; /usr/lib/jvm/java-11-openjdk-amd64/bin/java\n     d /\n     d usr\n     d lib\n     d jvm\n     d java-11-openjdk-amd64\n     d bin\n     - java\n</code></pre>\n<ol start=\"4\">\n<li><p>echo $JAVA_HOME returns nothing</p>\n</li>\n<li><p>echo $PATH returns <code> /usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin:/snap/bin:/opt/gradle/gradle-8.4/bin</code></p>\n</li>\n<li><p>java -version returns <code>openjdk version &quot;11.0.20.1&quot; 2023-08-24 OpenJDK Runtime Environment (build 11.0.20.1+1-post-Ubuntu-0ubuntu122.04) OpenJDK 64-Bit Server VM (build 11.0.20.1+1-post-Ubuntu-0ubuntu122.04, mixed mode, sharing)</code></p>\n</li>\n<li><p>ChatGPT has given me a few erroneous solutions that just lead to the build failing so I won't mention those</p>\n</li>\n</ol>\n"},{"tags":["java","arrays","performance","sorting"],"comments":[{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":0,"creation_date":1698175924,"post_id":77354915,"comment_id":136371330,"body_markdown":"Try the _[Code Review](https://codereview.stackexchange.com/)_ forum.","body":"Try the <i><a href=\"https://codereview.stackexchange.com/\">Code Review</a></i> forum."},{"owner":{"account_id":26879596,"reputation":1092,"user_id":20460267,"display_name":"Simon Goater"},"score":0,"creation_date":1698181390,"post_id":77354915,"comment_id":136372181,"body_markdown":"Why do you merge if you do insertion sort?","body":"Why do you merge if you do insertion sort?"},{"owner":{"account_id":25292044,"reputation":3,"user_id":19117917,"display_name":"Preatorius"},"score":0,"creation_date":1698182235,"post_id":77354915,"comment_id":136372313,"body_markdown":"@simon-goater In order to merge the smallest blocks, but I figure that it is redundant.","body":"@simon-goater In order to merge the smallest blocks, but I figure that it is redundant."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1698680854,"post_id":77354915,"comment_id":136432901,"body_markdown":"Did you actually ask a question? I’m not sure. When you say you are “trying to understand the logic and workings of this method” you’re talking about the method you have written yourself? And aren’t you the one to decide which result is a “success”?","body":"Did you actually ask a question? I’m not sure. When you say you are “trying to understand the logic and workings of this method” you’re talking about the method you have written yourself? And aren’t you the one to decide which result is a “success”?"}],"owner":{"account_id":25292044,"reputation":3,"user_id":19117917,"display_name":"Preatorius"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1698175925,"creation_date":1698175780,"question_id":77354915,"body_markdown":"We were asked to improve the merge sort algorithm by introducing insertion sort to the code. We have been tasked with doing this by utilising a &quot;levels&quot; logic. Here is the exact description of the mentioned task:\r\n\r\n&gt; This parameter will be incremented by 1 inside the merge_sort before the two recursive calls. It will keep track of the level index of the recursion tree. You can set this parameter to 1 before calling merge_sort. Based on this, the index for the first level of the recursion tree becomes 1.\r\n\r\nThe usual method of merge sort + insertion sort suggested does not use &quot;levels&quot;\r\n\r\n(Provided by [Bernhard Barker](https://stackoverflow.com/users/1711796/bernhard-barker) under a [similar question as an answer](https://stackoverflow.com/questions/15057287/combining-mergesort-with-insertion-sort-to-make-it-more-efficient).)\r\n\r\n``` lang-java\r\nstatic final int THRESHOLD = 10;\r\nstatic void mergeSort(int f[],int lb, int ub){\r\n    if (ub - lb &lt;= THRESHOLD)\r\n        insertionSort(f, lb, ub);\r\n    else\r\n    {\r\n        int mid = (lb+ub)/2;\r\n        mergeSort(f,lb,mid);\r\n        mergeSort(f,mid,ub);\r\n        merge(f,lb,mid,ub);\r\n    }\r\n}\r\n``` \r\n\r\nThe improved merge sort method I have come up with is this:\r\n\r\n\r\n``` lang-java\r\npublic static void merge_sort_improved(int [] A, int p, int r, int level, int max_level)\r\n{\r\n    int q = (int) Math.floor((p + r) / 2);       \r\n    if (p &lt; r)\r\n    {\r\n\t\tif (level &gt;= max_level)\r\n\t\t\tinsertion_sort_2(A, p, r);\t\t\r\n\t\telse\r\n\t\t{\r\n\t\t\tlevel++;\r\n\t\t\tmerge_sort_improved(A, p, q, level, max_level);\r\n\t\t\tmerge_sort_improved(A, q + 1, r, level, max_level);\r\n\t\t}\r\n\t\tmerge(A, p, q, r);\r\n\t\tlevel--;\r\n    }\r\n}\r\n```\r\nHowever, I have observed during testing that this method takes longer than the implementation above in some cases but is faster in others.\r\n\r\nThe whole code:\r\n\r\n\r\n``` lang-java\r\n// import java.util.Arrays;\r\nimport java.util.Random;\r\n\r\npublic class ImprovedMergeSort {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tint array_size = 65536;\r\n\t\t// int array_size = 16;\r\n\t\tint[] array = new int[array_size];\r\n\t\tint[] array_2 = new int[array_size];\r\n\t\tint[] array_3 = new int[array_size];\r\n\r\n\t\tlong start_time, end_time, elapsed_time, min_elapsed_time;\r\n\t\tint best_max_level = 1;\r\n\r\n\t\tRandom rand = new Random();\r\n\t\trand.setSeed(System.currentTimeMillis());\r\n\r\n\t\tfor (int i = 0; i &lt; array_size; i++) {\r\n\t\t\tarray[i] = rand.nextInt(100);\r\n\t\t\tarray_2[i] = array[i];\r\n\t\t\tarray_3[i] = array[i];\r\n\t\t}\r\n\r\n\t\t// Running time of merge sort\r\n\t\tstart_time = System.nanoTime();\r\n\t\tmerge_sort(array, 0, array_size - 1);\r\n\t\tend_time = System.nanoTime();\r\n\t\t\r\n\t\telapsed_time = end_time - start_time;\r\n\t\t\r\n\t\tSystem.out.printf(&quot;Elapsed time in nanoseconds for original merge sort: %d\\n&quot;, elapsed_time);\r\n\r\n\t\t// part (d)\r\n\t\t// Running time of improved merge sort\r\n\t\tstart_time = System.nanoTime();\r\n\t\tmerge_sort_improved(array_2, 0, array_size - 1, 1, 13);\r\n\t\tend_time = System.nanoTime();\r\n\t\t\r\n\t\telapsed_time = end_time - start_time;\r\n\t\t\r\n\t\tSystem.out.printf(&quot;Elapsed time in nanoseconds for improved merge sort with max_level=13: %d\\n&quot;, elapsed_time);\r\n\t\t\r\n//\t\tstart_time = System.nanoTime();\r\n//\t\tmerge_sort_improved_2(array_2, 0, array_size - 1, 13);\r\n//\t\tend_time = System.nanoTime();\r\n//\t\t\r\n//\t\telapsed_time = end_time - start_time;\r\n//\t\t\r\n//\t\tSystem.out.printf(&quot;Elapsed time in nanoseconds for improved merge sort with max_level=13: %d\\n&quot;, elapsed_time);\r\n\r\n\t\t// part (e)\r\n\t\tmin_elapsed_time = 0;\r\n\t\t\r\n\t\tfor (int max_level = 1; max_level &lt;= 17; max_level++) {\r\n\t\t\t// copy the original array back to input array\r\n\t\t\tfor (int i = 0; i &lt; array_size; i++)\r\n\t\t\t\tarray[i] = array_3[i];\r\n\r\n\t\t\t// compute running time of merge sort improved here\r\n\t\t\tstart_time = System.nanoTime();\r\n\t\t\tmerge_sort_improved(array, 0, array_size - 1, 1, max_level);\r\n\t\t\tend_time = System.nanoTime();\r\n\t\t\t\r\n\t\t\telapsed_time = end_time - start_time;\r\n\t\t\t\r\n\t\t\tif ((max_level == 1) || (elapsed_time &lt; min_elapsed_time)) {\r\n\t\t\t\tmin_elapsed_time = elapsed_time;\r\n\t\t\t\tbest_max_level = max_level;\r\n\t\t\t}\r\n\r\n\t\t\tSystem.out.printf(&quot;Max level: %d, Elapsed time in nanoseconds: %d\\n&quot;, max_level, elapsed_time);\r\n\r\n\t\t}\r\n\r\n\t\tSystem.out.printf(&quot;Best max level: %d, Min elapsed time in nanoseconds: %d\\n&quot;, best_max_level,\r\n\t\t\t\tmin_elapsed_time);\r\n\r\n\t}\r\n\r\n\t// parts (b)-(d) implement improved merge sort here\r\n\tpublic static void merge_sort_improved(int [] A, int p, int r, int level, int max_level)\r\n\t{\r\n\t\tint q = (int) Math.floor((p + r) / 2);\r\n                \r\n        if (p &lt; r)\r\n        {\r\n\t\t\tif (level &gt;= max_level) {\r\n\t\t\t\tinsertion_sort_2(A, p, r);\r\n\t\t\t}\r\n\t\t\t\t\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tlevel++;\r\n\t\t\t\t// q = (int) Math.floor((p + r) / 2);\r\n\t\t\t\tmerge_sort_improved(A, p, q, level, max_level);\r\n\t\t\t\tmerge_sort_improved(A, q + 1, r, level, max_level);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tmerge(A, p, q, r);\r\n\t\t\tlevel--;\r\n        }\r\n\t}\r\n\t\r\n\tpublic static void merge_sort_improved_2(int[] A,int p, int r, int threshold){\r\n\t    if (r - p &lt;= threshold)\r\n\t        insertion_sort_2(A, p, r);\r\n\t\r\n\t    else\r\n\t    {\r\n\t        int q = (p + r) / 2;\r\n\t        merge_sort(A, p, q);\r\n\t        merge_sort(A, q, r);\r\n\t        merge(A, p, q, r);\r\n\t    }\r\n\t}\r\n\r\n\t// indices p and r can start from 0\r\n\tpublic static void merge_sort(int[] A, int p, int r) {\r\n\t\tint q;\r\n\r\n\t\tif (p &lt; r) {\r\n\t\t\tq = (int) Math.floor((p + r) / 2);\r\n\t\t\tmerge_sort(A, p, q);\r\n\t\t\tmerge_sort(A, q + 1, r);\r\n\t\t\tmerge(A, p, q, r);\r\n\t\t}\r\n\t}\r\n\r\n\tpublic static void merge(int[] A, int p, int q, int r) {\r\n\t\tint n1, n2;\r\n\t\tint i, j;\r\n\r\n\t\tn1 = q - p + 1;\r\n\t\tn2 = r - q;\r\n\r\n\t\tint[] L = new int[n1];\r\n\t\tint[] R = new int[n2];\r\n\r\n\t\tfor (i = 0; i &lt; n1; i++)\r\n\t\t\tL[i] = A[p + i];\r\n\r\n\t\tfor (i = 0; i &lt; n2; i++)\r\n\t\t\tR[i] = A[q + i + 1];\r\n\r\n\t\ti = 0;\r\n\t\tj = 0;\r\n\r\n\t\tfor (int k = p; k &lt;= r; k++) {\r\n\t\t\tif (i &gt;= n1) // the left array finished, copy from right array\r\n\t\t\t{\r\n\t\t\t\tA[k] = R[j];\r\n\t\t\t\tj++;\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tif (j &gt;= n2) // the right array finished, copy from left array\r\n\t\t\t{\r\n\t\t\t\tA[k] = L[i];\r\n\t\t\t\ti++;\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tif (L[i] &lt;= R[j]) {\r\n\t\t\t\tA[k] = L[i];\r\n\t\t\t\ti++;\r\n\t\t\t} else {\r\n\t\t\t\tA[k] = R[j];\r\n\t\t\t\tj++;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t// insertion sort algorithm\r\n\tpublic static void insertion_sort_2(int[] A, int start_index, int end_index) {\r\n\t\tint key;\r\n\t\tint i;\r\n\r\n\t\tfor (int j = start_index + 1; j &lt; end_index; j++) {\r\n\t\t\tkey = A[j];\r\n\r\n\t\t\t// insert A[j] into the sorted sequence A[starting_index..j-1]\r\n\t\t\ti = j - 1;\r\n\r\n\t\t\twhile ((i &gt;= 0) &amp;&amp; (A[i] &gt; key)) {\r\n\t\t\t\tA[i + 1] = A[i];\r\n\t\t\t\ti = i - 1;\r\n\t\t\t}\r\n\r\n\t\t\tA[i + 1] = key;\r\n\t\t}\r\n\t}\r\n\r\n\t// insertion sort algorithm\r\n\tpublic static void insertion_sort(int[] A) {\r\n\t\tint key;\r\n\t\tint i;\r\n\r\n\t\tfor (int j = 1; j &lt; A.length; j++) {\r\n\t\t\tkey = A[j];\r\n\r\n\t\t\t// insert A[j] into the sorted sequence A[1..j-1]\r\n\t\t\ti = j - 1;\r\n\r\n\t\t\twhile ((i &gt;= 0) &amp;&amp; (A[i] &gt; key)) {\r\n\t\t\t\tA[i + 1] = A[i];\r\n\t\t\t\ti = i - 1;\r\n\t\t\t}\r\n\r\n\t\t\tA[i + 1] = key;\r\n\t\t}\r\n\t}\r\n\r\n\t// prints the elements of the array A on the screen\r\n\tpublic static void print_array(int[] A) {\r\n\t\tSystem.out.printf(&quot;[&quot;);\r\n\t\tfor (int i = 0; i &lt; A.length - 1; i++) {\r\n\t\t\tSystem.out.printf(&quot;%d, &quot;, A[i]);\r\n\t\t}\r\n\r\n\t\tSystem.out.printf(&quot;%d]\\n&quot;, A[A.length - 1]);\r\n\r\n\t}\r\n\r\n}\r\n\r\n```\r\n\r\nAs I expected, it is faster than the &quot;default&quot; merge sort algorithm, and these are the results:\r\n\r\n\r\n```lang-text\r\nElapsed time in nanoseconds for original merge sort: 9551833\r\nElapsed time in nanoseconds for improved merge sort with max_level=13: 8766042\r\nMax level: 1, Elapsed time in nanoseconds: 868102916\r\nMax level: 2, Elapsed time in nanoseconds: 127934125\r\nMax level: 3, Elapsed time in nanoseconds: 100636084\r\nMax level: 4, Elapsed time in nanoseconds: 53176500\r\nMax level: 5, Elapsed time in nanoseconds: 40008875\r\nMax level: 6, Elapsed time in nanoseconds: 30925333\r\nMax level: 7, Elapsed time in nanoseconds: 18650458\r\nMax level: 8, Elapsed time in nanoseconds: 18098958\r\nMax level: 9, Elapsed time in nanoseconds: 7862125\r\nMax level: 10, Elapsed time in nanoseconds: 6666667\r\nMax level: 11, Elapsed time in nanoseconds: 3863416\r\nMax level: 12, Elapsed time in nanoseconds: 3646500\r\nMax level: 13, Elapsed time in nanoseconds: 2776000\r\nMax level: 14, Elapsed time in nanoseconds: 3010667\r\nMax level: 15, Elapsed time in nanoseconds: 3280834\r\nMax level: 16, Elapsed time in nanoseconds: 4677084\r\nMax level: 17, Elapsed time in nanoseconds: 5324667\r\nBest max level: 13, Min elapsed time in nanoseconds: 2776000\r\n```\r\n\r\nI&#39;m trying to understand the logic and workings of this method and wonder if I was successful at it, so any help would be greatly appreciated.","title":"Implementing an improved merge sort that uses insertion sort, with &quot;levels&quot; - Would this work correctly?","body":"<p>We were asked to improve the merge sort algorithm by introducing insertion sort to the code. We have been tasked with doing this by utilising a &quot;levels&quot; logic. Here is the exact description of the mentioned task:</p>\n<blockquote>\n<p>This parameter will be incremented by 1 inside the merge_sort before the two recursive calls. It will keep track of the level index of the recursion tree. You can set this parameter to 1 before calling merge_sort. Based on this, the index for the first level of the recursion tree becomes 1.</p>\n</blockquote>\n<p>The usual method of merge sort + insertion sort suggested does not use &quot;levels&quot;</p>\n<p>(Provided by <a href=\"https://stackoverflow.com/users/1711796/bernhard-barker\">Bernhard Barker</a> under a <a href=\"https://stackoverflow.com/questions/15057287/combining-mergesort-with-insertion-sort-to-make-it-more-efficient\">similar question as an answer</a>.)</p>\n<pre class=\"lang-java prettyprint-override\"><code>static final int THRESHOLD = 10;\nstatic void mergeSort(int f[],int lb, int ub){\n    if (ub - lb &lt;= THRESHOLD)\n        insertionSort(f, lb, ub);\n    else\n    {\n        int mid = (lb+ub)/2;\n        mergeSort(f,lb,mid);\n        mergeSort(f,mid,ub);\n        merge(f,lb,mid,ub);\n    }\n}\n</code></pre>\n<p>The improved merge sort method I have come up with is this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static void merge_sort_improved(int [] A, int p, int r, int level, int max_level)\n{\n    int q = (int) Math.floor((p + r) / 2);       \n    if (p &lt; r)\n    {\n        if (level &gt;= max_level)\n            insertion_sort_2(A, p, r);      \n        else\n        {\n            level++;\n            merge_sort_improved(A, p, q, level, max_level);\n            merge_sort_improved(A, q + 1, r, level, max_level);\n        }\n        merge(A, p, q, r);\n        level--;\n    }\n}\n</code></pre>\n<p>However, I have observed during testing that this method takes longer than the implementation above in some cases but is faster in others.</p>\n<p>The whole code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>// import java.util.Arrays;\nimport java.util.Random;\n\npublic class ImprovedMergeSort {\n\n    public static void main(String[] args) {\n        int array_size = 65536;\n        // int array_size = 16;\n        int[] array = new int[array_size];\n        int[] array_2 = new int[array_size];\n        int[] array_3 = new int[array_size];\n\n        long start_time, end_time, elapsed_time, min_elapsed_time;\n        int best_max_level = 1;\n\n        Random rand = new Random();\n        rand.setSeed(System.currentTimeMillis());\n\n        for (int i = 0; i &lt; array_size; i++) {\n            array[i] = rand.nextInt(100);\n            array_2[i] = array[i];\n            array_3[i] = array[i];\n        }\n\n        // Running time of merge sort\n        start_time = System.nanoTime();\n        merge_sort(array, 0, array_size - 1);\n        end_time = System.nanoTime();\n        \n        elapsed_time = end_time - start_time;\n        \n        System.out.printf(&quot;Elapsed time in nanoseconds for original merge sort: %d\\n&quot;, elapsed_time);\n\n        // part (d)\n        // Running time of improved merge sort\n        start_time = System.nanoTime();\n        merge_sort_improved(array_2, 0, array_size - 1, 1, 13);\n        end_time = System.nanoTime();\n        \n        elapsed_time = end_time - start_time;\n        \n        System.out.printf(&quot;Elapsed time in nanoseconds for improved merge sort with max_level=13: %d\\n&quot;, elapsed_time);\n        \n//      start_time = System.nanoTime();\n//      merge_sort_improved_2(array_2, 0, array_size - 1, 13);\n//      end_time = System.nanoTime();\n//      \n//      elapsed_time = end_time - start_time;\n//      \n//      System.out.printf(&quot;Elapsed time in nanoseconds for improved merge sort with max_level=13: %d\\n&quot;, elapsed_time);\n\n        // part (e)\n        min_elapsed_time = 0;\n        \n        for (int max_level = 1; max_level &lt;= 17; max_level++) {\n            // copy the original array back to input array\n            for (int i = 0; i &lt; array_size; i++)\n                array[i] = array_3[i];\n\n            // compute running time of merge sort improved here\n            start_time = System.nanoTime();\n            merge_sort_improved(array, 0, array_size - 1, 1, max_level);\n            end_time = System.nanoTime();\n            \n            elapsed_time = end_time - start_time;\n            \n            if ((max_level == 1) || (elapsed_time &lt; min_elapsed_time)) {\n                min_elapsed_time = elapsed_time;\n                best_max_level = max_level;\n            }\n\n            System.out.printf(&quot;Max level: %d, Elapsed time in nanoseconds: %d\\n&quot;, max_level, elapsed_time);\n\n        }\n\n        System.out.printf(&quot;Best max level: %d, Min elapsed time in nanoseconds: %d\\n&quot;, best_max_level,\n                min_elapsed_time);\n\n    }\n\n    // parts (b)-(d) implement improved merge sort here\n    public static void merge_sort_improved(int [] A, int p, int r, int level, int max_level)\n    {\n        int q = (int) Math.floor((p + r) / 2);\n                \n        if (p &lt; r)\n        {\n            if (level &gt;= max_level) {\n                insertion_sort_2(A, p, r);\n            }\n                \n            else\n            {\n                level++;\n                // q = (int) Math.floor((p + r) / 2);\n                merge_sort_improved(A, p, q, level, max_level);\n                merge_sort_improved(A, q + 1, r, level, max_level);\n            }\n            \n            merge(A, p, q, r);\n            level--;\n        }\n    }\n    \n    public static void merge_sort_improved_2(int[] A,int p, int r, int threshold){\n        if (r - p &lt;= threshold)\n            insertion_sort_2(A, p, r);\n    \n        else\n        {\n            int q = (p + r) / 2;\n            merge_sort(A, p, q);\n            merge_sort(A, q, r);\n            merge(A, p, q, r);\n        }\n    }\n\n    // indices p and r can start from 0\n    public static void merge_sort(int[] A, int p, int r) {\n        int q;\n\n        if (p &lt; r) {\n            q = (int) Math.floor((p + r) / 2);\n            merge_sort(A, p, q);\n            merge_sort(A, q + 1, r);\n            merge(A, p, q, r);\n        }\n    }\n\n    public static void merge(int[] A, int p, int q, int r) {\n        int n1, n2;\n        int i, j;\n\n        n1 = q - p + 1;\n        n2 = r - q;\n\n        int[] L = new int[n1];\n        int[] R = new int[n2];\n\n        for (i = 0; i &lt; n1; i++)\n            L[i] = A[p + i];\n\n        for (i = 0; i &lt; n2; i++)\n            R[i] = A[q + i + 1];\n\n        i = 0;\n        j = 0;\n\n        for (int k = p; k &lt;= r; k++) {\n            if (i &gt;= n1) // the left array finished, copy from right array\n            {\n                A[k] = R[j];\n                j++;\n                continue;\n            }\n\n            if (j &gt;= n2) // the right array finished, copy from left array\n            {\n                A[k] = L[i];\n                i++;\n                continue;\n            }\n\n            if (L[i] &lt;= R[j]) {\n                A[k] = L[i];\n                i++;\n            } else {\n                A[k] = R[j];\n                j++;\n            }\n        }\n    }\n\n    // insertion sort algorithm\n    public static void insertion_sort_2(int[] A, int start_index, int end_index) {\n        int key;\n        int i;\n\n        for (int j = start_index + 1; j &lt; end_index; j++) {\n            key = A[j];\n\n            // insert A[j] into the sorted sequence A[starting_index..j-1]\n            i = j - 1;\n\n            while ((i &gt;= 0) &amp;&amp; (A[i] &gt; key)) {\n                A[i + 1] = A[i];\n                i = i - 1;\n            }\n\n            A[i + 1] = key;\n        }\n    }\n\n    // insertion sort algorithm\n    public static void insertion_sort(int[] A) {\n        int key;\n        int i;\n\n        for (int j = 1; j &lt; A.length; j++) {\n            key = A[j];\n\n            // insert A[j] into the sorted sequence A[1..j-1]\n            i = j - 1;\n\n            while ((i &gt;= 0) &amp;&amp; (A[i] &gt; key)) {\n                A[i + 1] = A[i];\n                i = i - 1;\n            }\n\n            A[i + 1] = key;\n        }\n    }\n\n    // prints the elements of the array A on the screen\n    public static void print_array(int[] A) {\n        System.out.printf(&quot;[&quot;);\n        for (int i = 0; i &lt; A.length - 1; i++) {\n            System.out.printf(&quot;%d, &quot;, A[i]);\n        }\n\n        System.out.printf(&quot;%d]\\n&quot;, A[A.length - 1]);\n\n    }\n\n}\n\n</code></pre>\n<p>As I expected, it is faster than the &quot;default&quot; merge sort algorithm, and these are the results:</p>\n<pre class=\"lang-text prettyprint-override\"><code>Elapsed time in nanoseconds for original merge sort: 9551833\nElapsed time in nanoseconds for improved merge sort with max_level=13: 8766042\nMax level: 1, Elapsed time in nanoseconds: 868102916\nMax level: 2, Elapsed time in nanoseconds: 127934125\nMax level: 3, Elapsed time in nanoseconds: 100636084\nMax level: 4, Elapsed time in nanoseconds: 53176500\nMax level: 5, Elapsed time in nanoseconds: 40008875\nMax level: 6, Elapsed time in nanoseconds: 30925333\nMax level: 7, Elapsed time in nanoseconds: 18650458\nMax level: 8, Elapsed time in nanoseconds: 18098958\nMax level: 9, Elapsed time in nanoseconds: 7862125\nMax level: 10, Elapsed time in nanoseconds: 6666667\nMax level: 11, Elapsed time in nanoseconds: 3863416\nMax level: 12, Elapsed time in nanoseconds: 3646500\nMax level: 13, Elapsed time in nanoseconds: 2776000\nMax level: 14, Elapsed time in nanoseconds: 3010667\nMax level: 15, Elapsed time in nanoseconds: 3280834\nMax level: 16, Elapsed time in nanoseconds: 4677084\nMax level: 17, Elapsed time in nanoseconds: 5324667\nBest max level: 13, Min elapsed time in nanoseconds: 2776000\n</code></pre>\n<p>I'm trying to understand the logic and workings of this method and wonder if I was successful at it, so any help would be greatly appreciated.</p>\n"},{"tags":["java","spring-boot","flyway"],"answers":[{"tags":[],"owner":{"account_id":258438,"reputation":355,"user_id":540624,"display_name":"wmkoch"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1698175837,"creation_date":1698175837,"answer_id":77354925,"question_id":77353532,"body_markdown":"Is there a feature of Flyway 9.22.2 that you need? If not, I believe the issue is spring-boot-3.1.x only supports Flyway `9.16.3`. You can see a curated list of spring-boot dependency versions [here][1].\r\n\r\nAs a general rule, if the library you need is [specified in the curated spring-boot dependency list][1], you&#39;re better off using the version supplied by Spring because that version will have been vetted to work with that version of spring-boot. Assuming you don&#39;t need that specific version of Flyway, you can leverage the &quot;approved&quot; version from spring-boot by deleting the `&lt;version&gt;` tags in your pom.xml:\r\n\r\n```xml\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n  xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n  \r\n  &lt;!-- dependency versions will be inherited from the parent pom --&gt;\r\n  &lt;parent&gt;\r\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n    &lt;version&gt;3.1.5&lt;/version&gt;\r\n    &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n  &lt;/parent&gt;\r\n\r\n&lt;!-- Other aspects of the pom have been omitted for clarity --&gt;\r\n&lt;dependencies&gt;\r\n  &lt;dependency&gt;\r\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n  &lt;/dependency&gt;\r\n\r\n  &lt;dependency&gt;\r\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n  &lt;/dependency&gt;\r\n  \r\n  &lt;dependency&gt;\r\n    &lt;groupId&gt;com.mysql&lt;/groupId&gt;\r\n    &lt;artifactId&gt;mysql-connector-j&lt;/artifactId&gt;\r\n  &lt;/dependency&gt;\r\n\r\n  &lt;dependency&gt;\r\n    &lt;groupId&gt;org.flywaydb&lt;/groupId&gt;\r\n    &lt;artifactId&gt;flyway-mysql&lt;/artifactId&gt;\r\n  &lt;/dependency&gt;\r\n&lt;/dependencies&gt;\r\n```\r\n\r\nYou can also remove the `&lt;version&gt;` tag for the `mysql-connector-j` dependency as well.\r\n\r\nAlso, it looks like the Spring team is targeting [Flyway 9.22.x for spring-boot 3.2.0][2]\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-boot/docs/current/reference/html/dependency-versions.html\r\n  [2]: https://github.com/spring-projects/spring-boot/issues/37315","title":"Flyway problems configuration with Spring Boot 3.1.0","body":"<p>Is there a feature of Flyway 9.22.2 that you need? If not, I believe the issue is spring-boot-3.1.x only supports Flyway <code>9.16.3</code>. You can see a curated list of spring-boot dependency versions <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/dependency-versions.html\" rel=\"nofollow noreferrer\">here</a>.</p>\n<p>As a general rule, if the library you need is <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/dependency-versions.html\" rel=\"nofollow noreferrer\">specified in the curated spring-boot dependency list</a>, you're better off using the version supplied by Spring because that version will have been vetted to work with that version of spring-boot. Assuming you don't need that specific version of Flyway, you can leverage the &quot;approved&quot; version from spring-boot by deleting the <code>&lt;version&gt;</code> tags in your pom.xml:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n  xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n  \n  &lt;!-- dependency versions will be inherited from the parent pom --&gt;\n  &lt;parent&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n    &lt;version&gt;3.1.5&lt;/version&gt;\n    &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n  &lt;/parent&gt;\n\n&lt;!-- Other aspects of the pom have been omitted for clarity --&gt;\n&lt;dependencies&gt;\n  &lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n  &lt;/dependency&gt;\n\n  &lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n  &lt;/dependency&gt;\n  \n  &lt;dependency&gt;\n    &lt;groupId&gt;com.mysql&lt;/groupId&gt;\n    &lt;artifactId&gt;mysql-connector-j&lt;/artifactId&gt;\n  &lt;/dependency&gt;\n\n  &lt;dependency&gt;\n    &lt;groupId&gt;org.flywaydb&lt;/groupId&gt;\n    &lt;artifactId&gt;flyway-mysql&lt;/artifactId&gt;\n  &lt;/dependency&gt;\n&lt;/dependencies&gt;\n</code></pre>\n<p>You can also remove the <code>&lt;version&gt;</code> tag for the <code>mysql-connector-j</code> dependency as well.</p>\n<p>Also, it looks like the Spring team is targeting <a href=\"https://github.com/spring-projects/spring-boot/issues/37315\" rel=\"nofollow noreferrer\">Flyway 9.22.x for spring-boot 3.2.0</a></p>\n"}],"owner":{"account_id":29743733,"reputation":1,"user_id":22795401,"display_name":"Egor1705"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":297,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1698175837,"creation_date":1698162027,"question_id":77353532,"body_markdown":"I have come across with a problem of connection Flyway to my Spring Boot Application.\r\nOnce I launch my App I am getting this \r\n\r\nThe following method did not exist:\r\n\r\n    &#39;org.flywaydb.core.api.configuration.FluentConfiguration org.flywaydb.core.api.configuration.FluentConfiguration.oracleSqlplus(boolean)&#39;\r\n\r\nThe calling method&#39;s class, org.springframework.boot.autoconfigure.flyway.FlywayAutoConfiguration$FlywayConfiguration, was loaded from the following location:\r\n\r\n    jar:file:/C:/Users/user/.m2/repository/org/springframework/boot/spring-boot-autoconfigure/3.1.0/spring-boot-autoconfigure-3.1.0.jar!/org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class\r\n\r\nThe called method&#39;s class, org.flywaydb.core.api.configuration.FluentConfiguration, is available from the following locations:\r\n\r\n    jar:file:/C:/Users/user/.m2/repository/org/flywaydb/flyway-core/9.22.2/flyway-core-9.22.2.jar!/org/flywaydb/core/api/configuration/FluentConfiguration.class\r\n\r\nThe called method&#39;s class hierarchy was loaded from the following locations:\r\n\r\n    org.flywaydb.core.api.configuration.FluentConfiguration: file:/C:/Users/user/.m2/repository/org/flywaydb/flyway-core/9.22.2/flyway-core-9.22.2.jar\r\n\r\n\r\nAction:\r\n\r\nCorrect the classpath of your application so that it contains compatible versions of the classes org.springframework.boot.autoconfigure.flyway.FlywayAutoConfiguration$FlywayConfiguration and org.flywaydb.core.api.configuration.FluentConfiguration\r\n\r\n\r\n\r\n\r\nHere comes my POM:\r\n\r\n```\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n    &lt;version&gt;3.1.0&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n\r\n&lt;!-- https://mvnrepository.com/artifact/org.springframework.data/spring-data-jpa --&gt;\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n    &lt;version&gt;3.1.0&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n  \r\n  &lt;dependency&gt;\r\n    &lt;groupId&gt;com.mysql&lt;/groupId&gt;\r\n    &lt;artifactId&gt;mysql-connector-j&lt;/artifactId&gt;\r\n    &lt;version&gt;8.0.33&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n\r\n&lt;!-- https://mvnrepository.com/artifact/org.flywaydb/flyway-mysql --&gt;\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.flywaydb&lt;/groupId&gt;\r\n    &lt;artifactId&gt;flyway-mysql&lt;/artifactId&gt;\r\n    &lt;version&gt;9.22.2&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n\r\n```\r\n\r\n\r\nMaybe someone has faced with such issue and knows how to fix it? If I really need to correct the classpath of my application so that it contains compatible versions, could someone give me a tip how to do it?\r\nThanks in advance.\r\n\r\nIn the application.properties I have mentioned following:\r\n\r\n```\r\nspring.flyway.enabled = true\r\nspring.flyway.locations = classpath:db/migration\r\nspring.flyway.baselineOnMigrate = true \r\nspring.flyway.schemas= ...\r\nspring.flyway.url = ...\r\nspring.flyway.user= ...\r\nspring.flyway.password= ...\r\n```                                                                                                                             ","title":"Flyway problems configuration with Spring Boot 3.1.0","body":"<p>I have come across with a problem of connection Flyway to my Spring Boot Application.\nOnce I launch my App I am getting this</p>\n<p>The following method did not exist:</p>\n<pre><code>'org.flywaydb.core.api.configuration.FluentConfiguration org.flywaydb.core.api.configuration.FluentConfiguration.oracleSqlplus(boolean)'\n</code></pre>\n<p>The calling method's class, org.springframework.boot.autoconfigure.flyway.FlywayAutoConfiguration$FlywayConfiguration, was loaded from the following location:</p>\n<pre><code>jar:file:/C:/Users/user/.m2/repository/org/springframework/boot/spring-boot-autoconfigure/3.1.0/spring-boot-autoconfigure-3.1.0.jar!/org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class\n</code></pre>\n<p>The called method's class, org.flywaydb.core.api.configuration.FluentConfiguration, is available from the following locations:</p>\n<pre><code>jar:file:/C:/Users/user/.m2/repository/org/flywaydb/flyway-core/9.22.2/flyway-core-9.22.2.jar!/org/flywaydb/core/api/configuration/FluentConfiguration.class\n</code></pre>\n<p>The called method's class hierarchy was loaded from the following locations:</p>\n<pre><code>org.flywaydb.core.api.configuration.FluentConfiguration: file:/C:/Users/user/.m2/repository/org/flywaydb/flyway-core/9.22.2/flyway-core-9.22.2.jar\n</code></pre>\n<p>Action:</p>\n<p>Correct the classpath of your application so that it contains compatible versions of the classes org.springframework.boot.autoconfigure.flyway.FlywayAutoConfiguration$FlywayConfiguration and org.flywaydb.core.api.configuration.FluentConfiguration</p>\n<p>Here comes my POM:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n    &lt;version&gt;3.1.0&lt;/version&gt;\n&lt;/dependency&gt;\n\n&lt;!-- https://mvnrepository.com/artifact/org.springframework.data/spring-data-jpa --&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n    &lt;version&gt;3.1.0&lt;/version&gt;\n&lt;/dependency&gt;\n  \n  &lt;dependency&gt;\n    &lt;groupId&gt;com.mysql&lt;/groupId&gt;\n    &lt;artifactId&gt;mysql-connector-j&lt;/artifactId&gt;\n    &lt;version&gt;8.0.33&lt;/version&gt;\n&lt;/dependency&gt;\n\n&lt;!-- https://mvnrepository.com/artifact/org.flywaydb/flyway-mysql --&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.flywaydb&lt;/groupId&gt;\n    &lt;artifactId&gt;flyway-mysql&lt;/artifactId&gt;\n    &lt;version&gt;9.22.2&lt;/version&gt;\n&lt;/dependency&gt;\n\n</code></pre>\n<p>Maybe someone has faced with such issue and knows how to fix it? If I really need to correct the classpath of my application so that it contains compatible versions, could someone give me a tip how to do it?\nThanks in advance.</p>\n<p>In the application.properties I have mentioned following:</p>\n<pre><code>spring.flyway.enabled = true\nspring.flyway.locations = classpath:db/migration\nspring.flyway.baselineOnMigrate = true \nspring.flyway.schemas= ...\nspring.flyway.url = ...\nspring.flyway.user= ...\nspring.flyway.password= ...\n</code></pre>\n"},{"tags":["java","android","kotlin","passwords"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1698245798,"post_id":77354890,"comment_id":136381359,"body_markdown":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer.","body":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer."}],"owner":{"account_id":17057383,"reputation":109,"user_id":12341584,"display_name":"Haris Abdullah"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":21,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1698175544,"creation_date":1698175544,"question_id":77354890,"body_markdown":"I want to know how to implement Google Passkey but there is no so much implementation or the code available Online to learn.\r\nAlso, Android docs from google doesn&#39;t show how to code this in android.\r\n\r\n\r\n\r\nAnyone has useful links or the documentation or code to show how to use it in java/kotlin for android development.\r\n\r\n Thanks","title":"Google passKeys Implementation in Android java/Kotlin","body":"<p>I want to know how to implement Google Passkey but there is no so much implementation or the code available Online to learn.\nAlso, Android docs from google doesn't show how to code this in android.</p>\n<p>Anyone has useful links or the documentation or code to show how to use it in java/kotlin for android development.</p>\n<p>Thanks</p>\n"},{"tags":["java","spring-boot","jhipster"],"comments":[{"owner":{"account_id":25538,"reputation":8293,"user_id":65681,"accept_rate":73,"display_name":"Matt Raible"},"score":0,"creation_date":1698175646,"post_id":77354887,"comment_id":136371284,"body_markdown":"No. Spring Boot 3 is only supported by JHipster 8. You can install the v8 RC1 version using `npm i -g generator-jhipster`. You can try `jhipster upgrade` and see if it works. If it doesn&#39;t please enter an issue in the JHipster GitHub project.","body":"No. Spring Boot 3 is only supported by JHipster 8. You can install the v8 RC1 version using <code>npm i -g generator-jhipster</code>. You can try <code>jhipster upgrade</code> and see if it works. If it doesn&#39;t please enter an issue in the JHipster GitHub project."},{"owner":{"account_id":7030463,"reputation":96,"user_id":5386366,"display_name":"jelharou"},"score":0,"creation_date":1698178419,"post_id":77354887,"comment_id":136371767,"body_markdown":"It does work with Java 17","body":"It does work with Java 17"},{"owner":{"account_id":29745473,"reputation":1,"user_id":22796658,"display_name":"ppoornima"},"score":0,"creation_date":1698179328,"post_id":77354887,"comment_id":136371911,"body_markdown":"@MattRaible - I am able to install 8.0.0-rc.1 on my local machine. But I would like to add it in pom.xml. I tried this &lt;jhipster-dependencies.version&gt;8.0.0-rc.1&lt;/jhipster-dependencies.version&gt; but unable to get it to work. Is this version right?","body":"@MattRaible - I am able to install 8.0.0-rc.1 on my local machine. But I would like to add it in pom.xml. I tried this &lt;jhipster-dependencies.version&gt;8.0.0-rc.1&lt;/jhipster-dependen&zwnj;&#8203;cies.version&gt; but unable to get it to work. Is this version right?"},{"owner":{"account_id":25538,"reputation":8293,"user_id":65681,"accept_rate":73,"display_name":"Matt Raible"},"score":0,"creation_date":1698213276,"post_id":77354887,"comment_id":136374967,"body_markdown":"You can see the `jhipster-bom` versions at https://github.com/jhipster/jhipster-bom/releases.","body":"You can see the <code>jhipster-bom</code> versions at <a href=\"https://github.com/jhipster/jhipster-bom/releases\" rel=\"nofollow noreferrer\">github.com/jhipster/jhipster-bom/releases</a>."}],"owner":{"account_id":29745473,"reputation":1,"user_id":22796658,"display_name":"ppoornima"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":150,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1698175509,"creation_date":1698175509,"question_id":77354887,"body_markdown":"I am using JHipster 7.9.3 in my current project using Java 11, Spring Boot 2.7. We are now in the process of upgrading to Java 17, Spring Boot 3 and Spring Framework 6 and I see the following error.\r\n```\r\norg.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;openAPIDefaultGroupedOpenAPI&#39; defined in class path resource [tech/jhipster/config/apidoc/JHipsterSpringDocGroupsConfiguration.class]: Unsatisfied dependency expressed through method &#39;openAPIDefaultGroupedOpenAPI&#39; parameter 3: No qualifying bean of type &#39;org.springdoc.core.SpringDocConfigProperties&#39; available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}\r\n\r\n```\r\nAm I missing anything?. Any help is appreciated.","title":"Does JHipster 7.9.3 support Java 17, Spring boot 3 and Spring Framework 6?","body":"<p>I am using JHipster 7.9.3 in my current project using Java 11, Spring Boot 2.7. We are now in the process of upgrading to Java 17, Spring Boot 3 and Spring Framework 6 and I see the following error.</p>\n<pre><code>org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'openAPIDefaultGroupedOpenAPI' defined in class path resource [tech/jhipster/config/apidoc/JHipsterSpringDocGroupsConfiguration.class]: Unsatisfied dependency expressed through method 'openAPIDefaultGroupedOpenAPI' parameter 3: No qualifying bean of type 'org.springdoc.core.SpringDocConfigProperties' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}\n\n</code></pre>\n<p>Am I missing anything?. Any help is appreciated.</p>\n"},{"tags":["java","gradle","annotations"],"answers":[{"tags":[],"owner":{"account_id":288740,"reputation":36435,"user_id":589329,"accept_rate":40,"display_name":"Vampire"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698175467,"creation_date":1698175467,"answer_id":77354884,"question_id":77354641,"body_markdown":"What you declare there is a dependency, you cannot depend on a class, so it would just be `annotationProcessor project(&#39;:ToolsProject&#39;)`.\r\n\r\nBy default all annotation processors on the path are invoked I think and if you would want to restrict that, you do it with `jvmArg` on the respective `JavaCompile` task, using the parameter `-processor` with the classes you want to run as comma-separated list if you are not happy with the default discovery result.","title":"How do I use a local annoationProcessor","body":"<p>What you declare there is a dependency, you cannot depend on a class, so it would just be <code>annotationProcessor project(':ToolsProject')</code>.</p>\n<p>By default all annotation processors on the path are invoked I think and if you would want to restrict that, you do it with <code>jvmArg</code> on the respective <code>JavaCompile</code> task, using the parameter <code>-processor</code> with the classes you want to run as comma-separated list if you are not happy with the default discovery result.</p>\n"}],"owner":{"account_id":13755437,"reputation":21,"user_id":9926513,"display_name":"jdoe"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":17,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1698175467,"creation_date":1698172942,"question_id":77354641,"body_markdown":"Trying my hand at annotationProcessors of my own. I have a subproject located within my main project which has one.\r\n\r\nEvery example I see, the annotationProcessor goes down to the class level, I&#39;m trying to figure out how to do that with the local &#39;ToolsProject&#39; as well, was hoping I could chase the package through.\r\n\r\nAny advice? I&#39;ve been struggling with this for a while now \r\n\r\n    implementation project(&#39;:ToolsProject&#39;)\r\n    \r\n    annotationProcessor project(&#39;:ToolsProject.AutoLog:AutoLogProcessor&#39;)","title":"How do I use a local annoationProcessor","body":"<p>Trying my hand at annotationProcessors of my own. I have a subproject located within my main project which has one.</p>\n<p>Every example I see, the annotationProcessor goes down to the class level, I'm trying to figure out how to do that with the local 'ToolsProject' as well, was hoping I could chase the package through.</p>\n<p>Any advice? I've been struggling with this for a while now</p>\n<pre><code>implementation project(':ToolsProject')\n\nannotationProcessor project(':ToolsProject.AutoLog:AutoLogProcessor')\n</code></pre>\n"},{"tags":["java","macos"],"comments":[{"owner":{"account_id":1888690,"reputation":3005,"user_id":1707353,"accept_rate":91,"display_name":"Jeff Holt"},"score":1,"creation_date":1698172981,"post_id":77354630,"comment_id":136370807,"body_markdown":"&quot;it says&quot; You ought to include the attempts and messages resulting from the attempts. But I think you&#39;ll get more help at superuser or askdifferent. This is less of a coding problem than a configuration problem.","body":"&quot;it says&quot; You ought to include the attempts and messages resulting from the attempts. But I think you&#39;ll get more help at superuser or askdifferent. This is less of a coding problem than a configuration problem."},{"owner":{"account_id":24766862,"reputation":79,"user_id":18650662,"display_name":"Marcus Anthony"},"score":0,"creation_date":1698173044,"post_id":77354630,"comment_id":136370819,"body_markdown":"What did you mean? The attempt is shown in `brew install openjdk` and the messages are quoted below, the &quot;Warning&quot; part. Did I miss anything?","body":"What did you mean? The attempt is shown in <code>brew install openjdk</code> and the messages are quoted below, the &quot;Warning&quot; part. Did I miss anything?"},{"owner":{"account_id":24766862,"reputation":79,"user_id":18650662,"display_name":"Marcus Anthony"},"score":0,"creation_date":1698173069,"post_id":77354630,"comment_id":136370827,"body_markdown":"Thanks I&#39;ll check out superuser too.","body":"Thanks I&#39;ll check out superuser too."},{"owner":{"account_id":1888690,"reputation":3005,"user_id":1707353,"accept_rate":91,"display_name":"Jeff Holt"},"score":2,"creation_date":1698173173,"post_id":77354630,"comment_id":136370848,"body_markdown":"The attempt to find java. Not the attempt to install it. Seems pretty obvious that the antecedent of &quot;it&quot; in your statement is not the brew command but some other attempt to execute java or find all the javas that are installed. Those are the its that you haven&#39;t shown.","body":"The attempt to find java. Not the attempt to install it. Seems pretty obvious that the antecedent of &quot;it&quot; in your statement is not the brew command but some other attempt to execute java or find all the javas that are installed. Those are the its that you haven&#39;t shown."},{"owner":{"account_id":183966,"reputation":14630,"user_id":419705,"accept_rate":67,"display_name":"Roddy of the Frozen Peas"},"score":1,"creation_date":1698173561,"post_id":77354630,"comment_id":136370922,"body_markdown":"`brew info java` -- does that tell you where it&#39;s installed?","body":"<code>brew info java</code> -- does that tell you where it&#39;s installed?"},{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":1,"creation_date":1698173749,"post_id":77354630,"comment_id":136370952,"body_markdown":"Tip for future use: [*SDKMAN!*](https://sdkman.io/).","body":"Tip for future use: <a href=\"https://sdkman.io/\" rel=\"nofollow noreferrer\"><i>SDKMAN!</i></a>."},{"owner":{"account_id":24766862,"reputation":79,"user_id":18650662,"display_name":"Marcus Anthony"},"score":0,"creation_date":1698173835,"post_id":77354630,"comment_id":136370977,"body_markdown":"@RoddyoftheFrozenPeas thanks I found it! `/opt/homebrew/Cellar/openjdk/21`. I&#39;ll check out what JAVA_HOME exactly means and point it to a folder.","body":"@RoddyoftheFrozenPeas thanks I found it! <code>&#47;opt&#47;homebrew&#47;Cellar&#47;openjdk&#47;21</code>. I&#39;ll check out what JAVA_HOME exactly means and point it to a folder."}],"answers":[{"comments":[{"owner":{"account_id":372682,"reputation":22461,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1698176822,"post_id":77354877,"comment_id":136371464,"body_markdown":"brew info openjdk in my case gives an explanation that a keg is not symlinked nor added to the PATH. That probably clarifies the issue.","body":"brew info openjdk in my case gives an explanation that a keg is not symlinked nor added to the PATH. That probably clarifies the issue."},{"owner":{"account_id":183966,"reputation":14630,"user_id":419705,"accept_rate":67,"display_name":"Roddy of the Frozen Peas"},"score":0,"creation_date":1698180383,"post_id":77354877,"comment_id":136372031,"body_markdown":"@aled you can modify the answer if you think it is helpful for future readers","body":"@aled you can modify the answer if you think it is helpful for future readers"}],"tags":[],"owner":{"account_id":183966,"reputation":14630,"user_id":419705,"accept_rate":67,"display_name":"Roddy of the Frozen Peas"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698175392,"creation_date":1698175392,"answer_id":77354877,"question_id":77354630,"body_markdown":"Since you installed Java previously with homebrew, you can use the `brew info` command to see the details of your installation:\r\n\r\n```lang-none\r\n% brew info java\r\n\r\nopenjdk: stable 15.0.1 (bottled) [keg-only]\r\nDevelopment kit for the Java programming language\r\nhttps://openjdk.java.net/\r\n/usr/local/Cellar/openjdk/15.0.1 (614 files, 324.9MB)\r\n  Poured from bottle on 2020-12-09 at 09:06:07\r\nFrom: https://github.com/Homebrew/homebrew-core/blob/HEAD/Formula/openjdk.rb\r\nLicense: Cannot Represent\r\n```","title":"Cannot find java runtime on MacOS (M1 silicon) after installing openjdk","body":"<p>Since you installed Java previously with homebrew, you can use the <code>brew info</code> command to see the details of your installation:</p>\n<pre class=\"lang-none prettyprint-override\"><code>% brew info java\n\nopenjdk: stable 15.0.1 (bottled) [keg-only]\nDevelopment kit for the Java programming language\nhttps://openjdk.java.net/\n/usr/local/Cellar/openjdk/15.0.1 (614 files, 324.9MB)\n  Poured from bottle on 2020-12-09 at 09:06:07\nFrom: https://github.com/Homebrew/homebrew-core/blob/HEAD/Formula/openjdk.rb\nLicense: Cannot Represent\n</code></pre>\n"}],"owner":{"account_id":24766862,"reputation":79,"user_id":18650662,"display_name":"Marcus Anthony"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":66,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1698175392,"creation_date":1698172808,"question_id":77354630,"body_markdown":"I have installed openjdk@11 and openjdk (21) on MacOS.\r\nProof: when I typed `brew install openjdk` it says:\r\n```\r\nWarning: openjdk 21 is already installed and up-to-date.\r\nTo reinstall 21, run:\r\n  brew reinstall openjdk\r\n```\r\n\r\nHowever when I run `java --version` or whatever commands it says it cannot find the runtime. I think it is because the path is not set correctly. But I simply could not locate the runtime. I have checked the following places:\r\n\r\n```\r\n~/opt/\r\n/library/Java/JavaVirtualMachines\r\n/System/Library/\r\n```\r\n\r\nNothing is there. What did I miss?","title":"Cannot find java runtime on MacOS (M1 silicon) after installing openjdk","body":"<p>I have installed openjdk@11 and openjdk (21) on MacOS.\nProof: when I typed <code>brew install openjdk</code> it says:</p>\n<pre><code>Warning: openjdk 21 is already installed and up-to-date.\nTo reinstall 21, run:\n  brew reinstall openjdk\n</code></pre>\n<p>However when I run <code>java --version</code> or whatever commands it says it cannot find the runtime. I think it is because the path is not set correctly. But I simply could not locate the runtime. I have checked the following places:</p>\n<pre><code>~/opt/\n/library/Java/JavaVirtualMachines\n/System/Library/\n</code></pre>\n<p>Nothing is there. What did I miss?</p>\n"},{"tags":["java","spring-boot","intellij-idea","swagger","swagger-ui"],"comments":[{"owner":{"account_id":433481,"reputation":4842,"user_id":818832,"accept_rate":100,"display_name":"Peter"},"score":0,"creation_date":1561629309,"post_id":56788268,"comment_id":100131137,"body_markdown":"What do you mean by javadoc? \nI know javadoc but I don&#39;t understand how you could use javadoc to generate a  swagger/openapi specification?","body":"What do you mean by javadoc?  I know javadoc but I don&#39;t understand how you could use javadoc to generate a  swagger/openapi specification?"},{"owner":{"account_id":2589376,"reputation":322,"user_id":2244399,"display_name":"Aisultan"},"score":3,"creation_date":1561650100,"post_id":56788268,"comment_id":100143754,"body_markdown":"@petet I mean generate from comments on top of each controller method.","body":"@petet I mean generate from comments on top of each controller method."},{"owner":{"account_id":39252,"reputation":89842,"user_id":113116,"display_name":"Helen"},"score":1,"creation_date":1561664217,"post_id":56788268,"comment_id":100149685,"body_markdown":"Related: [Using Javadocs to generate Swagger document](https://stackoverflow.com/q/32340735/113116)","body":"Related: <a href=\"https://stackoverflow.com/q/32340735/113116\">Using Javadocs to generate Swagger document</a>"},{"owner":{"account_id":10309761,"reputation":944,"user_id":7605967,"display_name":"Keshavram Kuduwa"},"score":0,"creation_date":1695957277,"post_id":56788268,"comment_id":136095574,"body_markdown":"Does this answer your question? [Using Javadocs to generate Swagger document](https://stackoverflow.com/questions/32340735/using-javadocs-to-generate-swagger-document)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/32340735/using-javadocs-to-generate-swagger-document\">Using Javadocs to generate Swagger document</a>"}],"answers":[{"tags":[],"owner":{"account_id":266915,"reputation":2035,"user_id":554760,"display_name":"Magnus"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698174946,"creation_date":1698174946,"answer_id":77354846,"question_id":56788268,"body_markdown":"*Short answer* - **No, not really.**\r\n\r\n*Longer answer:* Swagger files contains much more information than the code - for example @ApiOperation as you already mentioned. \r\nI would recommend to stick with Swagger Maven Plugin that I assume you already use. Our team have tried to auto-generate clients to run API tests against the generated swagger file, and so far spring-fox and other solutions doesn&#39;t come close to swagger-maven-plugin or hand coding the file.\r\n\r\n","title":"How to generate Swagger UI from javadocs?","body":"<p><em>Short answer</em> - <strong>No, not really.</strong></p>\n<p><em>Longer answer:</em> Swagger files contains much more information than the code - for example @ApiOperation as you already mentioned.\nI would recommend to stick with Swagger Maven Plugin that I assume you already use. Our team have tried to auto-generate clients to run API tests against the generated swagger file, and so far spring-fox and other solutions doesn't come close to swagger-maven-plugin or hand coding the file.</p>\n"}],"owner":{"account_id":2589376,"reputation":322,"user_id":2244399,"display_name":"Aisultan"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2881,"favorite_count":0,"down_vote_count":0,"up_vote_count":10,"answer_count":1,"score":10,"last_activity_date":1698174946,"creation_date":1561628576,"question_id":56788268,"body_markdown":"I can generate swagger UI on my Spring boot application from `@Api` `@ApiOperation`, `@ApiResponses` annotations. \r\n\r\nThese annotations makes code a bit dirty. I wonder, how I can generate swagger documentation for my API-endpoints from javadocs.","title":"How to generate Swagger UI from javadocs?","body":"<p>I can generate swagger UI on my Spring boot application from <code>@Api</code> <code>@ApiOperation</code>, <code>@ApiResponses</code> annotations. </p>\n\n<p>These annotations makes code a bit dirty. I wonder, how I can generate swagger documentation for my API-endpoints from javadocs.</p>\n"},{"tags":["java","reactive-programming","project-reactor"],"comments":[{"owner":{"account_id":78088,"reputation":35600,"user_id":222467,"accept_rate":67,"display_name":"Igor Artamonov"},"score":0,"creation_date":1698157418,"post_id":77352712,"comment_id":136367810,"body_markdown":"How do you know it&#39;s the second `subscribe` output? Both are running at the same time so it can be output of the first as well","body":"How do you know it&#39;s the second <code>subscribe</code> output? Both are running at the same time so it can be output of the first as well"},{"owner":{"account_id":322960,"reputation":7711,"user_id":642680,"accept_rate":74,"display_name":"D-Dᴙum"},"score":0,"creation_date":1698158766,"post_id":77352712,"comment_id":136368092,"body_markdown":"@IgorArtamonov fair point but comment out the second subscription. The point is the outputs are different. this is just a test example.","body":"@IgorArtamonov fair point but comment out the second subscription. The point is the outputs are different. this is just a test example."},{"owner":{"account_id":78088,"reputation":35600,"user_id":222467,"accept_rate":67,"display_name":"Igor Artamonov"},"score":0,"creation_date":1698174631,"post_id":77352712,"comment_id":136371110,"body_markdown":"I see, just saying it&#39;s not clear from the output which subscription is producing it, because it can be any. I&#39;ve checked it and you&#39;re right, it&#39;s the second one.","body":"I see, just saying it&#39;s not clear from the output which subscription is producing it, because it can be any. I&#39;ve checked it and you&#39;re right, it&#39;s the second one."}],"answers":[{"tags":[],"owner":{"account_id":78088,"reputation":35600,"user_id":222467,"accept_rate":67,"display_name":"Igor Artamonov"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1698174943,"creation_date":1698174943,"answer_id":77354845,"question_id":77352712,"body_markdown":"That&#39;s because the `transformer` in `Mono` produces a new `Mono`, i.e., requesting only the first item from the Publisher. \r\n\r\nInternally it has:\r\n\r\n    Mono&lt;V&gt; transform(...) {\r\n       ...\r\n       from(transformer.apply(this))\r\n    }\r\n\r\nI suggest to start with Flux (or convert Mono to Flux). Like for your example:\r\n\r\n    static Function&lt;Flux&lt;CarrierDto&gt;, Flux&lt;Price&gt;&gt; transform = carrierDtoFlux -&gt;\r\n            carrierDtoFlux.map(CarrierDto::dailySeries)\r\n                    .flatMap(Flux::fromIterable)\r\n                    .map(daily -&gt; new Price(daily.date(), daily.price()));\r\n\r\n    Flux.just(dto)\r\n            .transform(transform)\r\n            .subscribe(price -&gt; System.out.println(String.format(&quot;Date: %s Price: %d&quot;, price.date(), price.price())));\r\n\r\n","title":"Reactive transform function not behaving as anticipated","body":"<p>That's because the <code>transformer</code> in <code>Mono</code> produces a new <code>Mono</code>, i.e., requesting only the first item from the Publisher.</p>\n<p>Internally it has:</p>\n<pre><code>Mono&lt;V&gt; transform(...) {\n   ...\n   from(transformer.apply(this))\n}\n</code></pre>\n<p>I suggest to start with Flux (or convert Mono to Flux). Like for your example:</p>\n<pre><code>static Function&lt;Flux&lt;CarrierDto&gt;, Flux&lt;Price&gt;&gt; transform = carrierDtoFlux -&gt;\n        carrierDtoFlux.map(CarrierDto::dailySeries)\n                .flatMap(Flux::fromIterable)\n                .map(daily -&gt; new Price(daily.date(), daily.price()));\n\nFlux.just(dto)\n        .transform(transform)\n        .subscribe(price -&gt; System.out.println(String.format(&quot;Date: %s Price: %d&quot;, price.date(), price.price())));\n</code></pre>\n"}],"owner":{"account_id":322960,"reputation":7711,"user_id":642680,"accept_rate":74,"display_name":"D-Dᴙum"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77354845,"answer_count":1,"score":0,"last_activity_date":1698174943,"creation_date":1698155526,"question_id":77352712,"body_markdown":"A reactor transform function I created does not give the same result when I extract the individual steps and execute them separately.\r\n\r\nI have DTO record that contains a List of type Price. \r\n```java\r\npublic record CarrierDto(MetaData metaData, List&lt;Daily&gt; dailySeries) {\r\n\r\n    public record MetaData(String name, String information) {};\r\n    public record Daily(String date, Integer price) {};\r\n}\r\n```\r\n\r\nI want to extract from a `Mono&lt;CarrierDto&gt;` a `Flux&lt;Daily&gt;` and then transform that to `Flux&lt;Price&gt;`.\r\n```java\r\n@Table(&quot;price&quot;)\r\npublic record Price (\r\n        @Column(&quot;p_date&quot;) String date,\r\n        @Column(&quot;p_price&quot;) Integer price) {\r\n}\r\n```\r\n\r\nTo do this transformation I have this function:\r\n```java\r\nstatic Function&lt;Mono&lt;CarrierDto&gt;, Flux&lt;Price&gt;&gt; transform = carrierDtoMono -&gt;\r\n            carrierDtoMono.map(CarrierDto::dailySeries)\r\n                    .flatMapMany(Flux::fromIterable)\r\n                    .map(daily -&gt; new Price(daily.date(), daily.price()));\r\n```\r\n\r\nHowever when I try to use this function only one price is given upon subscription. If I extract each individual step and execute ALL prices are provided. For example with this test class:\r\n```java\r\nimport reactor.core.publisher.Flux;\r\nimport reactor.core.publisher.Mono;\r\n\r\nimport java.util.Arrays;\r\nimport java.util.List;\r\nimport java.util.function.Function;\r\n\r\npublic class TestMain {\r\n\r\n    static Function&lt;Mono&lt;CarrierDto&gt;, Flux&lt;Price&gt;&gt; transform = carrierDtoMono -&gt;\r\n            carrierDtoMono.map(CarrierDto::dailySeries)\r\n                    .flatMapMany(Flux::fromIterable)\r\n                    .map(daily -&gt; new Price(daily.date(), daily.price()));\r\n\r\n    public static void main(String[] args) {\r\n        final CarrierDto dto = new CarrierDto(new CarrierDto.MetaData(&quot;Test&quot;, &quot;Test information&quot;),\r\n                Arrays.asList(new CarrierDto.Daily(&quot;2023-01-01&quot;, 100),\r\n                        new CarrierDto.Daily(&quot;2023-01-02&quot;, 101),\r\n                        new CarrierDto.Daily(&quot;2023-01-03&quot;, 102),\r\n                        new CarrierDto.Daily(&quot;2023-01-04&quot;, 103)));\r\n\r\n        System.out.println(&quot;Using Transform function.&quot;);\r\n        Mono.just(dto)\r\n                .transform(transform)\r\n                .subscribe(price -&gt; System.out.println(String.format(&quot;Date: %s Price: %d&quot;, price.date(), price.price())));\r\n\r\n        System.out.println(&quot;Without transform function.&quot;);\r\n\r\n        final Mono&lt;List&lt;CarrierDto.Daily&gt;&gt; monoDailySeries = Mono.just(dto).map(CarrierDto::dailySeries);\r\n        final Flux&lt;CarrierDto.Daily&gt; dailyFlux = monoDailySeries.flatMapMany(Flux::fromIterable);\r\n        final Flux&lt;Price&gt; priceFlux = dailyFlux.map(daily -&gt; new Price(daily.date(), daily.price()));\r\n\r\n        priceFlux.subscribe(price -&gt; System.out.println(String.format(&quot;Date: %s Price: %d&quot;, price.date(), price.price())));\r\n    }\r\n}\r\n```\r\nGives the result:\r\n```\r\nUsing Transform function.\r\nDate: 2023-01-01 Price: 100\r\nWithout transform function.\r\nDate: 2023-01-01 Price: 100\r\nDate: 2023-01-02 Price: 101\r\nDate: 2023-01-03 Price: 102\r\nDate: 2023-01-04 Price: 103\r\n```\r\n\r\nWhy is the result different?","title":"Reactive transform function not behaving as anticipated","body":"<p>A reactor transform function I created does not give the same result when I extract the individual steps and execute them separately.</p>\n<p>I have DTO record that contains a List of type Price.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public record CarrierDto(MetaData metaData, List&lt;Daily&gt; dailySeries) {\n\n    public record MetaData(String name, String information) {};\n    public record Daily(String date, Integer price) {};\n}\n</code></pre>\n<p>I want to extract from a <code>Mono&lt;CarrierDto&gt;</code> a <code>Flux&lt;Daily&gt;</code> and then transform that to <code>Flux&lt;Price&gt;</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Table(&quot;price&quot;)\npublic record Price (\n        @Column(&quot;p_date&quot;) String date,\n        @Column(&quot;p_price&quot;) Integer price) {\n}\n</code></pre>\n<p>To do this transformation I have this function:</p>\n<pre class=\"lang-java prettyprint-override\"><code>static Function&lt;Mono&lt;CarrierDto&gt;, Flux&lt;Price&gt;&gt; transform = carrierDtoMono -&gt;\n            carrierDtoMono.map(CarrierDto::dailySeries)\n                    .flatMapMany(Flux::fromIterable)\n                    .map(daily -&gt; new Price(daily.date(), daily.price()));\n</code></pre>\n<p>However when I try to use this function only one price is given upon subscription. If I extract each individual step and execute ALL prices are provided. For example with this test class:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import reactor.core.publisher.Flux;\nimport reactor.core.publisher.Mono;\n\nimport java.util.Arrays;\nimport java.util.List;\nimport java.util.function.Function;\n\npublic class TestMain {\n\n    static Function&lt;Mono&lt;CarrierDto&gt;, Flux&lt;Price&gt;&gt; transform = carrierDtoMono -&gt;\n            carrierDtoMono.map(CarrierDto::dailySeries)\n                    .flatMapMany(Flux::fromIterable)\n                    .map(daily -&gt; new Price(daily.date(), daily.price()));\n\n    public static void main(String[] args) {\n        final CarrierDto dto = new CarrierDto(new CarrierDto.MetaData(&quot;Test&quot;, &quot;Test information&quot;),\n                Arrays.asList(new CarrierDto.Daily(&quot;2023-01-01&quot;, 100),\n                        new CarrierDto.Daily(&quot;2023-01-02&quot;, 101),\n                        new CarrierDto.Daily(&quot;2023-01-03&quot;, 102),\n                        new CarrierDto.Daily(&quot;2023-01-04&quot;, 103)));\n\n        System.out.println(&quot;Using Transform function.&quot;);\n        Mono.just(dto)\n                .transform(transform)\n                .subscribe(price -&gt; System.out.println(String.format(&quot;Date: %s Price: %d&quot;, price.date(), price.price())));\n\n        System.out.println(&quot;Without transform function.&quot;);\n\n        final Mono&lt;List&lt;CarrierDto.Daily&gt;&gt; monoDailySeries = Mono.just(dto).map(CarrierDto::dailySeries);\n        final Flux&lt;CarrierDto.Daily&gt; dailyFlux = monoDailySeries.flatMapMany(Flux::fromIterable);\n        final Flux&lt;Price&gt; priceFlux = dailyFlux.map(daily -&gt; new Price(daily.date(), daily.price()));\n\n        priceFlux.subscribe(price -&gt; System.out.println(String.format(&quot;Date: %s Price: %d&quot;, price.date(), price.price())));\n    }\n}\n</code></pre>\n<p>Gives the result:</p>\n<pre><code>Using Transform function.\nDate: 2023-01-01 Price: 100\nWithout transform function.\nDate: 2023-01-01 Price: 100\nDate: 2023-01-02 Price: 101\nDate: 2023-01-03 Price: 102\nDate: 2023-01-04 Price: 103\n</code></pre>\n<p>Why is the result different?</p>\n"},{"tags":["java","spring","spring-boot","hotswap","spring-boot-devtools"],"answers":[{"tags":[],"owner":{"account_id":266915,"reputation":2035,"user_id":554760,"display_name":"Magnus"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698174381,"creation_date":1698174381,"answer_id":77354799,"question_id":56158560,"body_markdown":"I would like to recommend you to use IntelliJ Idea with the option &quot;Auto re-run tests&quot;\r\n\r\n[![Auto run tests][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/XeSJk.png\r\n\r\nWhich re-runs the tests automatically - it&#39;s not exactly what you asked for - but it&#39;s really helping.\r\n","title":"Spring boot - running integration tests in interactive mode","body":"<p>I would like to recommend you to use IntelliJ Idea with the option &quot;Auto re-run tests&quot;</p>\n<p><a href=\"https://i.stack.imgur.com/XeSJk.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/XeSJk.png\" alt=\"Auto run tests\" /></a></p>\n<p>Which re-runs the tests automatically - it's not exactly what you asked for - but it's really helping.</p>\n"}],"owner":{"account_id":2756819,"reputation":1123,"user_id":2374651,"accept_rate":57,"display_name":"samvel1024"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":429,"favorite_count":0,"down_vote_count":0,"up_vote_count":9,"answer_count":1,"score":9,"last_activity_date":1698174381,"creation_date":1557960124,"question_id":56158560,"body_markdown":"When developing a web application SpringBoot dev tools module is handy for speeding up the compile and run loop. However, I could not find any similar feature for integration tests.\r\n\r\nMore specifically, let&#39;s say I have an integration test (annotated with `@RunWith(SpringRunner.class)` and `@SpringBootTest`) which starts a web server on a random port and tests some of the REST endpoints. I&#39;d like to have an interactive test runner which will not kill the process when a test case fails. Instead, it will wait for changes in the code and will reload and rerun the tests if changes are detected (just like hot swapping in dev tools)\r\n\r\nMy searches for this feature were not successful, so I&#39;d like to know what will be the fastest way of implementing this feature. Considering Springs popularity is there a reason why there is no widely known way of doing this?\r\n\r\n**EDIT**\r\n\r\nDigging a little bit in the source code, I have found the following piece of code.\r\n\r\n    /**\r\n     * Default {@link RestartInitializer} that only enable initial restart when running a\r\n     * standard &quot;main&quot; method. Skips initialization when running &quot;fat&quot; jars (included\r\n     * exploded) or when running from a test.\r\n     *\r\n     * @author Phillip Webb\r\n     * @author Andy Wilkinson\r\n     * @since 1.3.0\r\n     */\r\n    public class DefaultRestartInitializer implements RestartInitializer {\r\n    \r\n    \tprivate static final Set&lt;String&gt; SKIPPED_STACK_ELEMENTS;\r\n    \r\n    \tstatic {\r\n    \t\tSet&lt;String&gt; skipped = new LinkedHashSet&lt;&gt;();\r\n    \t\tskipped.add(&quot;org.junit.runners.&quot;);\r\n    \t\tskipped.add(&quot;org.junit.platform.&quot;);\r\n    \t\tskipped.add(&quot;org.springframework.boot.test.&quot;);\r\n    \t\tskipped.add(&quot;cucumber.runtime.&quot;);\r\n    \t\tSKIPPED_STACK_ELEMENTS = Collections.unmodifiableSet(skipped);\r\n    \t}\r\n        ...\r\n\r\n\r\nFrom this, I understand that the author explicitly disabled support for testing. Can anyone explain this?\r\n\r\n","title":"Spring boot - running integration tests in interactive mode","body":"<p>When developing a web application SpringBoot dev tools module is handy for speeding up the compile and run loop. However, I could not find any similar feature for integration tests.</p>\n\n<p>More specifically, let's say I have an integration test (annotated with <code>@RunWith(SpringRunner.class)</code> and <code>@SpringBootTest</code>) which starts a web server on a random port and tests some of the REST endpoints. I'd like to have an interactive test runner which will not kill the process when a test case fails. Instead, it will wait for changes in the code and will reload and rerun the tests if changes are detected (just like hot swapping in dev tools)</p>\n\n<p>My searches for this feature were not successful, so I'd like to know what will be the fastest way of implementing this feature. Considering Springs popularity is there a reason why there is no widely known way of doing this?</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>Digging a little bit in the source code, I have found the following piece of code.</p>\n\n<pre><code>/**\n * Default {@link RestartInitializer} that only enable initial restart when running a\n * standard \"main\" method. Skips initialization when running \"fat\" jars (included\n * exploded) or when running from a test.\n *\n * @author Phillip Webb\n * @author Andy Wilkinson\n * @since 1.3.0\n */\npublic class DefaultRestartInitializer implements RestartInitializer {\n\n    private static final Set&lt;String&gt; SKIPPED_STACK_ELEMENTS;\n\n    static {\n        Set&lt;String&gt; skipped = new LinkedHashSet&lt;&gt;();\n        skipped.add(\"org.junit.runners.\");\n        skipped.add(\"org.junit.platform.\");\n        skipped.add(\"org.springframework.boot.test.\");\n        skipped.add(\"cucumber.runtime.\");\n        SKIPPED_STACK_ELEMENTS = Collections.unmodifiableSet(skipped);\n    }\n    ...\n</code></pre>\n\n<p>From this, I understand that the author explicitly disabled support for testing. Can anyone explain this?</p>\n"},{"tags":["java","debugging","intellij-idea"],"comments":[{"owner":{"account_id":44499,"reputation":23474,"user_id":130659,"accept_rate":100,"display_name":"AlBlue"},"score":2,"creation_date":1610026588,"post_id":65613084,"comment_id":116006563,"body_markdown":"This is an issue with hotspot and not your code as such. It may be that you&#39;re running on a newer version of Java than your version of IntelliJ is expecting/supporting, in which case, the answer is to upgrade your IntelliJ version or degrade your Java version.","body":"This is an issue with hotspot and not your code as such. It may be that you&#39;re running on a newer version of Java than your version of IntelliJ is expecting/supporting, in which case, the answer is to upgrade your IntelliJ version or degrade your Java version."},{"owner":{"account_id":20391122,"reputation":21,"user_id":14959031,"display_name":"Nakib Rahaman"},"score":0,"creation_date":1610634668,"post_id":65613084,"comment_id":116199116,"body_markdown":"It is not working yet.","body":"It is not working yet."},{"owner":{"account_id":2803497,"reputation":25202,"user_id":2411243,"display_name":"Zabuzard"},"score":0,"creation_date":1613430214,"post_id":65613084,"comment_id":117068145,"body_markdown":"What did you do? What was your version of Java and Intellij before, what is it now? Please be precise.","body":"What did you do? What was your version of Java and Intellij before, what is it now? Please be precise."},{"owner":{"account_id":17505775,"reputation":3076,"user_id":12695027,"display_name":"Scratte"},"score":0,"creation_date":1613513851,"post_id":65613084,"comment_id":117097039,"body_markdown":"[Gabriel Garc&#237;a Mu&#241;oz](https://stackoverflow.com/users/9812545) posted an [Answer](https://stackoverflow.com/a/66216314) saying &quot;&quot;This question is related to this one, check it out and let me know ;) https://stackoverflow.com/questions/54205486/how-to-avoid-sharing-is-only-supported-for-boot-loader-classes-because-bootstra&quot;","body":"<a href=\"https://stackoverflow.com/users/9812545\">Gabriel Garc&#237;a Mu&#241;oz</a> posted an <a href=\"https://stackoverflow.com/a/66216314\">Answer</a> saying &quot;&quot;This question is related to this one, check it out and let me know ;) <a href=\"https://stackoverflow.com/questions/54205486/how-to-avoid-sharing-is-only-supported-for-boot-loader-classes-because-bootstra\" title=\"how to avoid sharing is only supported for boot loader classes because bootstra\">stackoverflow.com/questions/54205486/&hellip;</a>&quot;"},{"owner":{"account_id":9376049,"reputation":3355,"user_id":7643517,"display_name":"Nolequen"},"score":0,"creation_date":1658240777,"post_id":65613084,"comment_id":128999546,"body_markdown":"Does this answer your question? [How to avoid &quot;Sharing is only supported for boot loader classes because bootstrap classpath has been appended&quot; warning during debug with Java 11?](https://stackoverflow.com/questions/54205486/how-to-avoid-sharing-is-only-supported-for-boot-loader-classes-because-bootstra)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/54205486/how-to-avoid-sharing-is-only-supported-for-boot-loader-classes-because-bootstra\">How to avoid &quot;Sharing is only supported for boot loader classes because bootstrap classpath has been appended&quot; warning during debug with Java 11?</a>"}],"answers":[{"comments":[{"owner":{"account_id":326356,"reputation":1087,"user_id":648076,"accept_rate":43,"display_name":"Patrik Lindstr&#246;m"},"score":1,"creation_date":1697473726,"post_id":69553230,"comment_id":136281465,"body_markdown":"No that did not work for me. But my error might come from known issue with mockito see&gt; https://github.com/mockito/mockito/issues/2590","body":"No that did not work for me. But my error might come from known issue with mockito see&gt; <a href=\"https://github.com/mockito/mockito/issues/2590\" rel=\"nofollow noreferrer\">github.com/mockito/mockito/issues/2590</a>"}],"tags":[],"owner":{"account_id":21705175,"reputation":11,"user_id":16017740,"display_name":"Tonevellah Technologies"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1635918971,"creation_date":1634118454,"answer_id":69553230,"question_id":65613084,"body_markdown":"It might be late but it can helps others out there!!!\r\n\r\nas the warning is specifying the bootstrap class path is appended, To Smash the warning follow these simple steps.\r\n\r\nClick on File Menu&gt;Settings, \r\nOn Search Text Area on the left, type Async Stack Trace, Click on it in the options to open\r\n\r\nUnCheck Instrument Agent, \r\nClick Apply then Ok.\r\n","title":"Java HotSpot(TM) 64-Bit Server VM warning: Sharing is only supported for boot loader classes because bootstrap classpath has been appended","body":"<p>It might be late but it can helps others out there!!!</p>\n<p>as the warning is specifying the bootstrap class path is appended, To Smash the warning follow these simple steps.</p>\n<p>Click on File Menu&gt;Settings,\nOn Search Text Area on the left, type Async Stack Trace, Click on it in the options to open</p>\n<p>UnCheck Instrument Agent,\nClick Apply then Ok.</p>\n"}],"owner":{"account_id":20391122,"reputation":21,"user_id":14959031,"display_name":"Nakib Rahaman"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":13193,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1698174305,"creation_date":1610025399,"question_id":65613084,"body_markdown":"The error message I got while trying to debug my code\r\n\r\n&gt; Java HotSpot(TM) 64-Bit Server VM warning: Sharing is only supported for boot loader classes because bootstrap classpath has been appended&quot;\r\n\r\n![[enter image description here][1]][1]\r\n\r\nWhat does it mean, why do I get it and how to get rid of it?\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/yuPIA.png\r\n\r\n","title":"Java HotSpot(TM) 64-Bit Server VM warning: Sharing is only supported for boot loader classes because bootstrap classpath has been appended","body":"<p>The error message I got while trying to debug my code</p>\n<blockquote>\n<p>Java HotSpot(TM) 64-Bit Server VM warning: Sharing is only supported for boot loader classes because bootstrap classpath has been appended&quot;</p>\n</blockquote>\n<p><img src=\"https://i.stack.imgur.com/yuPIA.png\" alt=\"enter image description here\" /></p>\n<p>What does it mean, why do I get it and how to get rid of it?</p>\n"},{"tags":["java","shapefile","netcdf-java"],"owner":{"account_id":13834621,"reputation":93,"user_id":9986511,"display_name":"Gabriel Menezes"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":11,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1698174033,"creation_date":1698174033,"question_id":77354752,"body_markdown":"More specificly, I have a nc4 of rainfall from NASA and I have a shapefile with regions of Brazil.\r\nI need to get the rainfall data for each region IN JAVA.\r\n\r\nI was reading about https://github.com/Unidata/netcdf-java library but could not find any sample of this scenario.","title":"How to extract nc4 data from a shapefile in Java?","body":"<p>More specificly, I have a nc4 of rainfall from NASA and I have a shapefile with regions of Brazil.\nI need to get the rainfall data for each region IN JAVA.</p>\n<p>I was reading about <a href=\"https://github.com/Unidata/netcdf-java\" rel=\"nofollow noreferrer\">https://github.com/Unidata/netcdf-java</a> library but could not find any sample of this scenario.</p>\n"},{"tags":["java","spring","multithreading","scheduled-tasks"],"comments":[{"owner":{"account_id":1317274,"reputation":1240,"user_id":1263867,"accept_rate":100,"display_name":"Koos Gadellaa"},"score":0,"creation_date":1473624886,"post_id":39440070,"comment_id":66202804,"body_markdown":"So, it starts at a certain time, and you want the others to start 10 seconds later? Then simply change the assignment to `end` to not use the calendar, but the previous end&#39;s value?","body":"So, it starts at a certain time, and you want the others to start 10 seconds later? Then simply change the assignment to <code>end</code> to not use the calendar, but the previous end&#39;s value?"},{"owner":{"account_id":57443,"reputation":105,"user_id":172092,"accept_rate":75,"display_name":"user172092"},"score":0,"creation_date":1473630003,"post_id":39440070,"comment_id":66204164,"body_markdown":"@KoosGadellaa I&#39;m looking for a way to have each task start 10 seconds after the previous one ran.  In the future I am going to expand it so the task may finish sooner than 10 seconds. If that happens, I want to schedule the next one for 10 seconds after the point the previous finished, so I don&#39;t want to rely on the scheduled time, but instead the time it _actually_ ran. Hopefully that makes sense.","body":"@KoosGadellaa I&#39;m looking for a way to have each task start 10 seconds after the previous one ran.  In the future I am going to expand it so the task may finish sooner than 10 seconds. If that happens, I want to schedule the next one for 10 seconds after the point the previous finished, so I don&#39;t want to rely on the scheduled time, but instead the time it <i>actually</i> ran. Hopefully that makes sense."}],"answers":[{"tags":[],"owner":{"account_id":1317274,"reputation":1240,"user_id":1263867,"accept_rate":100,"display_name":"Koos Gadellaa"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1473634165,"creation_date":1473634165,"answer_id":39441398,"question_id":39440070,"body_markdown":"So you don&#39;t know when the task will end, but 10 seconds later, you want the next task to run. So planning it can only be done when that task is done.\r\nSo, have a base abstract class, which does the plumbing.\r\n\r\n    public abstract class ScheduleTaskAfterRun&lt;T&gt; implements Runnable {\r\n        protected void executeContent();\r\n        private Runnable nextTask;\r\n        private taskScheduler; // init somehow, probably by constructor...\r\n\r\n        public void setNextTask(Runnable r) {\r\n            nextTask = r;\r\n        }\r\n        \r\n        @Override\r\n        public void run() {\r\n            executeContent();\r\n            scheduleNextTask();\r\n        }\r\n\r\n        private void scheduleNextTask() {\r\n            if(nextTask == null) {\r\n                System.out.println(&quot;No task to handle, finished!&quot;);\r\n                return;\r\n            }\r\n            Date end = new Date(Calendar.getInstance().getTimeInMillis() + 10000);\r\n            ScheduledFuture&lt;?&gt; future = taskScheduler.schedule(nextTask, end);\r\n        }\r\n    }\r\n            ","title":"Spring Task Scheduler consecutive tasks","body":"<p>So you don't know when the task will end, but 10 seconds later, you want the next task to run. So planning it can only be done when that task is done.\nSo, have a base abstract class, which does the plumbing.</p>\n\n<pre><code>public abstract class ScheduleTaskAfterRun&lt;T&gt; implements Runnable {\n    protected void executeContent();\n    private Runnable nextTask;\n    private taskScheduler; // init somehow, probably by constructor...\n\n    public void setNextTask(Runnable r) {\n        nextTask = r;\n    }\n\n    @Override\n    public void run() {\n        executeContent();\n        scheduleNextTask();\n    }\n\n    private void scheduleNextTask() {\n        if(nextTask == null) {\n            System.out.println(\"No task to handle, finished!\");\n            return;\n        }\n        Date end = new Date(Calendar.getInstance().getTimeInMillis() + 10000);\n        ScheduledFuture&lt;?&gt; future = taskScheduler.schedule(nextTask, end);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":57443,"reputation":105,"user_id":172092,"accept_rate":75,"display_name":"user172092"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1152,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":39441398,"answer_count":1,"score":-1,"last_activity_date":1698173766,"creation_date":1473623743,"question_id":39440070,"body_markdown":"I am new to using the Spring Task Scheduler for executing tasks, so this may be a basic question.  I have a list of items that I would like to process within a class that implements `Runnable`.  Here is my task class:\r\n\r\n    public class ProcessTask&lt;T&gt; implements Runnable {\r\n\r\n    private String item;\r\n\r\n    public ProcessTask(String item) {\r\n        System.out.println(&quot;Starting process for &quot; + item);\r\n        this.item = item;\r\n    }\r\n\r\n    @Override\r\n    public void run() {\r\n        System.out.println(&quot;Finishing task for &quot; + item);\r\n    }\r\n\r\n\r\nI would like to process a list of items, each one starting 10 seconds after the previous task started.  I understand I could just set each one to run 10 seconds after the previous one was scheduled, however I don&#39;t want to rely on that as other processes may cause a task to run prior to 10 seconds elapsing.\r\n\r\nSo in my main class, I have the following:\r\n\r\n            Date end = new Date(cal.getTimeInMillis() + 10000); // this is the time that the task should be fired off, the first one being 10 seconds after the current time\r\n\r\n        for(String item : items) {\r\n            Calendar cal = Calendar.getInstance();\r\n            cal.setTime(end);\r\n            System.out.println(&quot;Next task fires at &quot; + cal.getTime());\r\n            ProcessTask task = new ProcessTask(item);\r\n            ScheduledFuture&lt;?&gt; future = taskScheduler.schedule(task, end);\r\n\r\n            end = new Date(Calendar.getInstance().getTimeInMillis() + 10000);\r\n        }\r\n\r\nThe first task fires off 10 seconds after the code runs, which is great.  But then the rest of the items get scheduled immediately, not waiting 10 seconds.  I do understand why that happens - because `taskScheduler.schedule` is asynchronous so the for loop just continues and the rest of the items get scheduled for 10 seconds later.\r\n\r\nI tried having the main thread sleep for a second and check if the `ScheduledFuture` has completed before scheduling the next task, such as:\r\n\r\n    while(!future.isDone()) {\r\n         Thread.sleep(1000);\r\n         System.out.println(&quot;is future done: &quot; + future.isDone());\r\n    }\r\n\r\nIf I add this block immediately after `ScheduledFuture&lt;?&gt; future = taskScheduler.schedule(task, end);` in the above block, then  `future.isDone()` always returns false, and the `ProcessTask` `run()` method never gets called.\r\n\r\nIs there any way I can use the `ScheduledFuture` to determine if the previous task has ended, but if it hasn&#39;t, continue to wait?  Is there a better way overall to do this?  Thanks in advance.","title":"Spring Task Scheduler consecutive tasks","body":"<p>I am new to using the Spring Task Scheduler for executing tasks, so this may be a basic question.  I have a list of items that I would like to process within a class that implements <code>Runnable</code>.  Here is my task class:</p>\n\n<pre><code>public class ProcessTask&lt;T&gt; implements Runnable {\n\nprivate String item;\n\npublic ProcessTask(String item) {\n    System.out.println(\"Starting process for \" + item);\n    this.item = item;\n}\n\n@Override\npublic void run() {\n    System.out.println(\"Finishing task for \" + item);\n}\n</code></pre>\n\n<p>I would like to process a list of items, each one starting 10 seconds after the previous task started.  I understand I could just set each one to run 10 seconds after the previous one was scheduled, however I don't want to rely on that as other processes may cause a task to run prior to 10 seconds elapsing.</p>\n\n<p>So in my main class, I have the following:</p>\n\n<pre><code>        Date end = new Date(cal.getTimeInMillis() + 10000); // this is the time that the task should be fired off, the first one being 10 seconds after the current time\n\n    for(String item : items) {\n        Calendar cal = Calendar.getInstance();\n        cal.setTime(end);\n        System.out.println(\"Next task fires at \" + cal.getTime());\n        ProcessTask task = new ProcessTask(item);\n        ScheduledFuture&lt;?&gt; future = taskScheduler.schedule(task, end);\n\n        end = new Date(Calendar.getInstance().getTimeInMillis() + 10000);\n    }\n</code></pre>\n\n<p>The first task fires off 10 seconds after the code runs, which is great.  But then the rest of the items get scheduled immediately, not waiting 10 seconds.  I do understand why that happens - because <code>taskScheduler.schedule</code> is asynchronous so the for loop just continues and the rest of the items get scheduled for 10 seconds later.</p>\n\n<p>I tried having the main thread sleep for a second and check if the <code>ScheduledFuture</code> has completed before scheduling the next task, such as:</p>\n\n<pre><code>while(!future.isDone()) {\n     Thread.sleep(1000);\n     System.out.println(\"is future done: \" + future.isDone());\n}\n</code></pre>\n\n<p>If I add this block immediately after <code>ScheduledFuture&lt;?&gt; future = taskScheduler.schedule(task, end);</code> in the above block, then  <code>future.isDone()</code> always returns false, and the <code>ProcessTask</code> <code>run()</code> method never gets called.</p>\n\n<p>Is there any way I can use the <code>ScheduledFuture</code> to determine if the previous task has ended, but if it hasn't, continue to wait?  Is there a better way overall to do this?  Thanks in advance.</p>\n"},{"tags":["java","inner-classes","anonymous-class","local-class","nested-types"],"comments":[{"owner":{"account_id":8909811,"reputation":2612,"user_id":6650475,"display_name":"Andrew S"},"score":2,"creation_date":1698164001,"post_id":77353680,"comment_id":136369289,"body_markdown":"It depends on the [JDK version](https://stackoverflow.com/a/66320618/6650475).","body":"It depends on the <a href=\"https://stackoverflow.com/a/66320618/6650475\">JDK version</a>."},{"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"score":2,"creation_date":1698164329,"post_id":77353680,"comment_id":136369351,"body_markdown":"Note that those Oracle tutorials are all &quot;_written for JDK 8_&quot;. Quite a bit has changed since then (the current GA version is 21.0.1).","body":"Note that those Oracle tutorials are all &quot;<i>written for JDK 8</i>&quot;. Quite a bit has changed since then (the current GA version is 21.0.1)."}],"answers":[{"tags":[],"owner":{"account_id":5794488,"reputation":1356,"user_id":4570698,"display_name":"harsh pamnani"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1698173396,"creation_date":1698165373,"answer_id":77353911,"question_id":77353680,"body_markdown":"## Java 16+\r\n\r\nIt depends on which JDK you are using. The `interface`-inside-a-method feature was introduced in [JDK 16][1]. Ditto for `enum` and `record`. See [*JEP 395: Records*](https://openjdk.org/jeps/395).\r\n\r\nIf you are using IntelliJ, it will show you an error when JDK is set to 8. The error says: `Local interfaces are not supported at language level &#39;8&#39;`, and the suggestion is upgrade to JDK 16+.\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Java_version_history#Java_16\r\n  [2]: https://i.stack.imgur.com/Lic23.png","title":"Can we declare interface inside a method?","body":"<h2>Java 16+</h2>\n<p>It depends on which JDK you are using. The <code>interface</code>-inside-a-method feature was introduced in <a href=\"https://en.wikipedia.org/wiki/Java_version_history#Java_16\" rel=\"nofollow noreferrer\">JDK 16</a>. Ditto for <code>enum</code> and <code>record</code>. See <a href=\"https://openjdk.org/jeps/395\" rel=\"nofollow noreferrer\"><em>JEP 395: Records</em></a>.</p>\n<p>If you are using IntelliJ, it will show you an error when JDK is set to 8. The error says: <code>Local interfaces are not supported at language level '8'</code>, and the suggestion is upgrade to JDK 16+.</p>\n<p><a href=\"https://i.stack.imgur.com/Lic23.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Lic23.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":7405799,"reputation":625,"user_id":5634777,"accept_rate":38,"display_name":"kaka"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":64,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"accepted_answer_id":77353911,"answer_count":1,"score":1,"last_activity_date":1698173396,"creation_date":1698163212,"question_id":77353680,"body_markdown":"&quot;You cannot declare an interface inside a block; interfaces are inherently static&quot; This is sentence from https://docs.oracle.com/javase/tutorial/java/javaOO/localclasses.html#local-classes-are-similar-to-inner-classes\r\n\r\nHowever, I can declare an interface in the code below. I can also create an anonymous class by extending the interface.\r\n\r\n\tpublic void testing() {\r\n\t\t\r\n\t\tinterface LocalInterface {\r\n\t\t\tvoid prints();\r\n\t\t}\r\n\t\t\r\n\t\tLocalInterface localInterface = new LocalInterface() {\r\n\r\n\t\t\t@Override\r\n\t\t\tpublic void prints() {\r\n\t\t\t\tSystem.out.println(&quot;hello world&quot;);\r\n\t\t\t}};\r\n\t\t\tlocalInterface.prints();\r\n\t}","title":"Can we declare interface inside a method?","body":"<p>&quot;You cannot declare an interface inside a block; interfaces are inherently static&quot; This is sentence from <a href=\"https://docs.oracle.com/javase/tutorial/java/javaOO/localclasses.html#local-classes-are-similar-to-inner-classes\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/tutorial/java/javaOO/localclasses.html#local-classes-are-similar-to-inner-classes</a></p>\n<p>However, I can declare an interface in the code below. I can also create an anonymous class by extending the interface.</p>\n<pre><code>public void testing() {\n    \n    interface LocalInterface {\n        void prints();\n    }\n    \n    LocalInterface localInterface = new LocalInterface() {\n\n        @Override\n        public void prints() {\n            System.out.println(&quot;hello world&quot;);\n        }};\n        localInterface.prints();\n}\n</code></pre>\n"},{"tags":["java","http","apache-httpclient-4.x"],"answers":[{"tags":[],"owner":{"account_id":330601,"reputation":24990,"user_id":654801,"display_name":"sbridges"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1347237316,"creation_date":1347237316,"answer_id":12344150,"question_id":12344031,"body_markdown":"Multipart refers to encoding multiple documents in one body, see [this][1] for the definition.  For http, a multipart upload allows the client to send multiple documents with one post, for example uploading an image, and form fields in one request.\r\n\r\nMultipart does not refer to downloading a document in multiple chunks.\r\n\r\nYou can use [http ranges][2] to restart downloading if a network outage occurs.\r\n\r\n\r\n  [1]: http://www.w3.org/Protocols/rfc1341/7_2_Multipart.html\r\n  [2]: http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.35","title":"Java Multipart/post download","body":"<p>Multipart refers to encoding multiple documents in one body, see <a href=\"http://www.w3.org/Protocols/rfc1341/7_2_Multipart.html\" rel=\"noreferrer\">this</a> for the definition.  For http, a multipart upload allows the client to send multiple documents with one post, for example uploading an image, and form fields in one request.</p>\n\n<p>Multipart does not refer to downloading a document in multiple chunks.</p>\n\n<p>You can use <a href=\"http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.35\" rel=\"noreferrer\">http ranges</a> to restart downloading if a network outage occurs.</p>\n"}],"owner":{"account_id":988481,"reputation":343,"user_id":1006380,"accept_rate":85,"display_name":"Arjun Patel"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3923,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"accepted_answer_id":12344150,"answer_count":1,"score":-1,"last_activity_date":1698173361,"creation_date":1347235771,"question_id":12344031,"body_markdown":"I have few questions related to web technologies. From my reading ant looking at Apache and Netty documents I could not figure out few things about downloading a large file with HTTP multipart/post request.\r\n\r\n1. Is it possible to send HTTP request indicating request to download a file in smaller multipart (chunks)? \r\n\r\n2. How to download large file in multipart ? \r\n\r\nPlease correct me if I have not understood the &#39;multipart&#39; term itself. I know lot of people have faced this problem, where application (client) downloads files in smaller portion, so when network outage happens, application does not need to download whole file from the beginning again. Specially, when the file is not any media file.","title":"Java Multipart/post download","body":"<p>I have few questions related to web technologies. From my reading ant looking at Apache and Netty documents I could not figure out few things about downloading a large file with HTTP multipart/post request.</p>\n<ol>\n<li><p>Is it possible to send HTTP request indicating request to download a file in smaller multipart (chunks)?</p>\n</li>\n<li><p>How to download large file in multipart ?</p>\n</li>\n</ol>\n<p>Please correct me if I have not understood the 'multipart' term itself. I know lot of people have faced this problem, where application (client) downloads files in smaller portion, so when network outage happens, application does not need to download whole file from the beginning again. Specially, when the file is not any media file.</p>\n"},{"tags":["java","spring-jms"],"answers":[{"tags":[],"owner":{"account_id":1288095,"reputation":169336,"user_id":1240763,"display_name":"Gary Russell"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1686151061,"creation_date":1686151061,"answer_id":76424794,"question_id":76412989,"body_markdown":"Stopping the container just stops the container from listening, it does not close the consumer. You need to call `shutDown()` to close the consumer.\r\n\r\nhttps://stackoverflow.com/questions/73725269/not-able-to-stop-an-ibm-mq-jms-consumer-in-spring-boot/73731402#73731402","title":"JMS MessageListenerContainer.stop() called but subscriber count doesn&#39;t decrease","body":"<p>Stopping the container just stops the container from listening, it does not close the consumer. You need to call <code>shutDown()</code> to close the consumer.</p>\n<p><a href=\"https://stackoverflow.com/questions/73725269/not-able-to-stop-an-ibm-mq-jms-consumer-in-spring-boot/73731402#73731402\">Not able to stop an IBM MQ JMS consumer in Spring Boot</a></p>\n"}],"owner":{"account_id":9093156,"reputation":381,"user_id":8235572,"display_name":"Col"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76424794,"answer_count":1,"score":0,"last_activity_date":1698173198,"creation_date":1686042050,"question_id":76412989,"body_markdown":"I have a Spring Boot app which needs to dynamically subscribe and unsubscribe (non-durable) to a JMS topic. The subscription all works and so does the unsubscribe (according to the code) but the subscriber count on the JMS topic doesn&#39;t decrease. What is it I&#39;m missing/not understanding?\r\n\r\nHere&#39;s some stripped down code:\r\n\r\n```java\r\n@Component\r\n@Scope(&quot;prototype&quot;)\r\npublic class DataStreamController {\r\n\r\n    @Autowired\r\n    @Qualifier(&quot;pubsubNonDurableJmsListenerContainer&quot;)\r\n    private DefaultJmsListenerContainerFactory listenerContainerFactory;\r\n    @Autowired\r\n    private JmsListenerEndpointRegistry jmsListenerEndpointRegistry;\r\n    private DataStreamListener listener;\r\n    private String customer;\r\n    private final String uuidStream1 = UUID.randomUUID().toString();\r\n    private final String uuidStream2 = UUID.randomUUID().toString();\r\n\r\n    public DataStreamController(String customer, DataStreamListener listener) {\r\n        this.customer = customer;\r\n        this.listener = listener;\r\n    }\r\n\r\n    @PostConstruct\r\n    public void init() {\r\n        subscribeToTopics();\r\n    }\r\n\r\n    public void subscribeToTopics() {\r\n        SimpleJmsListenerEndpoint stream1TopicEndpoint = new SimpleJmsListenerEndpoint();\r\n        stream1TopicEndpoint.setDestination(&quot;stream1.&quot; + customer);\r\n        stream1TopicEndpoint.setId(uuidStream1);\r\n        stream1TopicEndPoint.setMessageListener(message -&gt;\r\n            onStream1(message);\r\n\r\n        SimpleJmsListenerEndpoint stream2TopicEndpoint = new SimpleJmsListenerEndpoint();\r\n        stream2TopicEndpoint.setDestination(&quot;stream2.&quot; + customer);\r\n        stream2TopicEndpoint.setId(uuidStream2);\r\n        stream2TopicEndPoint.setMessageListener(message -&gt;\r\n            onStream2(message);\r\n\r\n        jmsListenerEndpointRegistry.registerListenerContainer(stream1TopicEndpoint, listenerContainerFactory, true);\r\n        jmsListenerEndpointRegistry.registerListenerContainer(stream2TopicEndpoint, listenerContainerFactory, true);\r\n    }\r\n\r\n    public void onStream1(final Message message) {\r\n        // do some stuff\r\n        listener.onData(// json object);\r\n    }\r\n\r\n    public void onStream2(final Message message) {\r\n        // do some stuff\r\n        listener.onData(// json object);\r\n    }\r\n\r\n    public void close() {\r\n        jmsListenerEndpointRegistry.getListenerContainer(uuidStream1).stop();\r\n        jmsListenerEndpointRegistry.getListenerContainer(uuidStream2).stop();\r\n        logger.info(&quot;stream1 isRunning? &quot; + jmsListenerEndpointRegistry.getListenerContainer(uuidStream1).isRunning());\r\n        logger.info(&quot;stream2 isRunning? &quot; + jmsListenerEndpointRegistry.getListenerContainer(uuidStream2).isRunning());\r\n    }\r\n}\r\n```\r\n\r\nWhen calling `close()` my logs say: `stream1 isRunning? false` and yet (as stated earlier) the subscriber is still active.","title":"JMS MessageListenerContainer.stop() called but subscriber count doesn&#39;t decrease","body":"<p>I have a Spring Boot app which needs to dynamically subscribe and unsubscribe (non-durable) to a JMS topic. The subscription all works and so does the unsubscribe (according to the code) but the subscriber count on the JMS topic doesn't decrease. What is it I'm missing/not understanding?</p>\n<p>Here's some stripped down code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Component\n@Scope(&quot;prototype&quot;)\npublic class DataStreamController {\n\n    @Autowired\n    @Qualifier(&quot;pubsubNonDurableJmsListenerContainer&quot;)\n    private DefaultJmsListenerContainerFactory listenerContainerFactory;\n    @Autowired\n    private JmsListenerEndpointRegistry jmsListenerEndpointRegistry;\n    private DataStreamListener listener;\n    private String customer;\n    private final String uuidStream1 = UUID.randomUUID().toString();\n    private final String uuidStream2 = UUID.randomUUID().toString();\n\n    public DataStreamController(String customer, DataStreamListener listener) {\n        this.customer = customer;\n        this.listener = listener;\n    }\n\n    @PostConstruct\n    public void init() {\n        subscribeToTopics();\n    }\n\n    public void subscribeToTopics() {\n        SimpleJmsListenerEndpoint stream1TopicEndpoint = new SimpleJmsListenerEndpoint();\n        stream1TopicEndpoint.setDestination(&quot;stream1.&quot; + customer);\n        stream1TopicEndpoint.setId(uuidStream1);\n        stream1TopicEndPoint.setMessageListener(message -&gt;\n            onStream1(message);\n\n        SimpleJmsListenerEndpoint stream2TopicEndpoint = new SimpleJmsListenerEndpoint();\n        stream2TopicEndpoint.setDestination(&quot;stream2.&quot; + customer);\n        stream2TopicEndpoint.setId(uuidStream2);\n        stream2TopicEndPoint.setMessageListener(message -&gt;\n            onStream2(message);\n\n        jmsListenerEndpointRegistry.registerListenerContainer(stream1TopicEndpoint, listenerContainerFactory, true);\n        jmsListenerEndpointRegistry.registerListenerContainer(stream2TopicEndpoint, listenerContainerFactory, true);\n    }\n\n    public void onStream1(final Message message) {\n        // do some stuff\n        listener.onData(// json object);\n    }\n\n    public void onStream2(final Message message) {\n        // do some stuff\n        listener.onData(// json object);\n    }\n\n    public void close() {\n        jmsListenerEndpointRegistry.getListenerContainer(uuidStream1).stop();\n        jmsListenerEndpointRegistry.getListenerContainer(uuidStream2).stop();\n        logger.info(&quot;stream1 isRunning? &quot; + jmsListenerEndpointRegistry.getListenerContainer(uuidStream1).isRunning());\n        logger.info(&quot;stream2 isRunning? &quot; + jmsListenerEndpointRegistry.getListenerContainer(uuidStream2).isRunning());\n    }\n}\n</code></pre>\n<p>When calling <code>close()</code> my logs say: <code>stream1 isRunning? false</code> and yet (as stated earlier) the subscriber is still active.</p>\n"},{"tags":["java","jdbc","sap-ase","wildfly-10"],"answers":[{"comments":[{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1487412889,"post_id":42311453,"comment_id":71781590,"body_markdown":"The Wildfly documentation suggest to put your own modules under `WILDFLY_HOME\\modules`, the location `WILDFLY_HOME\\modules\\system\\layers\\base\\` is for Wildfly&#39;s own modules.","body":"The Wildfly documentation suggest to put your own modules under <code>WILDFLY_HOME\\modules</code>, the location `WILDFLY_HOME\\modules\\system\\layers\\base` is for Wildfly&#39;s own modules."},{"owner":{"account_id":1281523,"reputation":1546,"user_id":1235535,"accept_rate":71,"display_name":"Atul"},"score":0,"creation_date":1487541456,"post_id":42311453,"comment_id":71819124,"body_markdown":"@MarkRotteveel My suggestion will  Install a JDBC Driver as a Core Module of WildFly and it will be available globally.","body":"@MarkRotteveel My suggestion will  Install a JDBC Driver as a Core Module of WildFly and it will be available globally."},{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1487584526,"post_id":42311453,"comment_id":71834478,"body_markdown":"I don&#39;t use wildly daily, but rooting it in modules has the same effect afaik.","body":"I don&#39;t use wildly daily, but rooting it in modules has the same effect afaik."},{"owner":{"account_id":10276026,"reputation":3,"user_id":7582920,"display_name":"Florencia Rivadeneira"},"score":0,"creation_date":1487597983,"post_id":42311453,"comment_id":71843387,"body_markdown":"Thank to both, but the inconvenient persist","body":"Thank to both, but the inconvenient persist"},{"owner":{"account_id":1281523,"reputation":1546,"user_id":1235535,"accept_rate":71,"display_name":"Atul"},"score":0,"creation_date":1487607129,"post_id":42311453,"comment_id":71849758,"body_markdown":"@FlorenciaRivadeneira I use wildfly 9 with Oracle and Postgresql. Instructions are same but the directory path changes as per driver name. For Oracle, driver name is &quot;com.oracle.Driver&quot; so the ojdbc.jar goes under WILDFLY_HOME\\modules\\system\\layers\\base\\com\\oracle\\main directory.\nFor postgresql(enterprise) driver name is &quot;org.edb.Driver&quot; so edb-jdbc17.jar will go under WILDFLY_HOME\\modules\\system\\layers\\base\\org\\edb\\main directory.","body":"@FlorenciaRivadeneira I use wildfly 9 with Oracle and Postgresql. Instructions are same but the directory path changes as per driver name. For Oracle, driver name is &quot;com.oracle.Driver&quot; so the ojdbc.jar goes under WILDFLY_HOME\\modules\\system\\layers\\base\\com\\oracle\\main directory. For postgresql(enterprise) driver name is &quot;org.edb.Driver&quot; so edb-jdbc17.jar will go under WILDFLY_HOME\\modules\\system\\layers\\base\\org\\edb\\main directory."},{"owner":{"account_id":10276026,"reputation":3,"user_id":7582920,"display_name":"Florencia Rivadeneira"},"score":0,"creation_date":1488393047,"post_id":42311453,"comment_id":72214355,"body_markdown":"@Maverick thank you! It worked with the changes in the directory like you show in above answer!","body":"@Maverick thank you! It worked with the changes in the directory like you show in above answer!"}],"tags":[],"owner":{"account_id":1281523,"reputation":1546,"user_id":1235535,"accept_rate":71,"display_name":"Atul"},"comment_count":6,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1698075063,"creation_date":1487396029,"answer_id":42311453,"question_id":42307439,"body_markdown":"Make sure you have driver installed properly. Check that driver jar and module.xml file are present in WILDFLY_HOME\\modules\\system\\layers\\base\\com\\sybase\\main directory.\r\n\r\n**update value of name attribute**\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;  \r\n     &lt;module xmlns=&quot;urn:jboss:module:1.0&quot; name=&quot;com.sybase&quot;&gt;  \r\n       &lt;resources&gt;  \r\n         &lt;resource-root path=&quot;jconn3.jar&quot;/&gt;  \r\n       &lt;/resources&gt;  \r\n       &lt;dependencies&gt;  \r\n            &lt;module name=&quot;javax.api&quot;/&gt;\r\n            &lt;module name=&quot;javax.transaction.api&quot;/&gt;  \r\n      &lt;/dependencies&gt;  \r\n    &lt;/module&gt;  ","title":"WildFly jdbc connection with Sybase","body":"<p>Make sure you have driver installed properly. Check that driver jar and module.xml file are present in WILDFLY_HOME\\modules\\system\\layers\\base\\com\\sybase\\main directory.</p>\n<p><strong>update value of name attribute</strong></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;  \n &lt;module xmlns=&quot;urn:jboss:module:1.0&quot; name=&quot;com.sybase&quot;&gt;  \n   &lt;resources&gt;  \n     &lt;resource-root path=&quot;jconn3.jar&quot;/&gt;  \n   &lt;/resources&gt;  \n   &lt;dependencies&gt;  \n        &lt;module name=&quot;javax.api&quot;/&gt;\n        &lt;module name=&quot;javax.transaction.api&quot;/&gt;  \n  &lt;/dependencies&gt;  \n&lt;/module&gt;  \n</code></pre>\n"}],"owner":{"account_id":10276026,"reputation":3,"user_id":7582920,"display_name":"Florencia Rivadeneira"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2356,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":42311453,"answer_count":1,"score":0,"last_activity_date":1698172969,"creation_date":1487365834,"question_id":42307439,"body_markdown":"I&#39;m trying to migrate from Glassfish to WildFly 10, my app connects whit Sybase ASE database. I put jconn3.jar in WILDFLY_HOME\\modules\\system\\layers\\base\\com\\sybase\\sybase\\main, created the module.xml there with the following content:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;  \r\n    &lt;module xmlns=&quot;urn:jboss:module:1.0&quot; name=&quot;com.sybase.sybase&quot;&gt;  \r\n      &lt;resources&gt;  \r\n        &lt;resource-root path=&quot;jconn3.jar&quot;/&gt;  \r\n      &lt;/resources&gt;  \r\n      &lt;dependencies&gt;  \r\n        &lt;module name=&quot;javax.api&quot;/&gt;  \r\n      &lt;/dependencies&gt;  \r\n    &lt;/module&gt;  \r\n\r\nand inserted to the standalone.xml:\r\n\r\n    &lt;datasources&gt;\r\n        &lt;datasource jndi-name=&quot;java:jboss/datasources/ExampleDS&quot; pool-name=&quot;ExampleDS&quot; enabled=&quot;true&quot; use-java-context=&quot;true&quot;&gt;\r\n            &lt;connection-url&gt;jdbc:h2:mem:test;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE&lt;/connection-url&gt;\r\n            &lt;driver&gt;h2&lt;/driver&gt;\r\n            &lt;security&gt;\r\n                &lt;user-name&gt;sa&lt;/user-name&gt;\r\n                &lt;password&gt;sa&lt;/password&gt;\r\n            &lt;/security&gt;\r\n        &lt;/datasource&gt;\r\n    \t&lt;datasource jndi-name=&quot;java:jboss/datasources/FRAME_IBS&quot; pool-name=&quot;FRAME_IBS&quot; enabled=&quot;true&quot; use-java-context=&quot;true&quot;&gt;\r\n            &lt;connection-url&gt;jdbc:sybase:Tds:localhost:5000/Banksys;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE&lt;/connection-url&gt;\r\n            &lt;driver&gt;sybase&lt;/driver&gt;\r\n    \t\t&lt;pool&gt;\r\n                &lt;min-pool-size&gt;5&lt;/min-pool-size&gt;\r\n                &lt;max-pool-size&gt;100&lt;/max-pool-size&gt;\r\n                &lt;prefill&gt;true&lt;/prefill&gt;\r\n            &lt;/pool&gt;\r\n    \t\t&lt;driver-class&gt;\r\n                com.sybase.jdbc3.jdbc.SybDriver\r\n            &lt;/driver-class&gt;\r\n            &lt;security&gt;\r\n                &lt;user-name&gt;admin&lt;/user-name&gt;\r\n                &lt;password&gt;admin&lt;/password&gt;\r\n            &lt;/security&gt;\r\n        &lt;/datasource&gt;\r\n        &lt;drivers&gt;\r\n            &lt;driver name=&quot;h2&quot; module=&quot;com.h2database.h2&quot;&gt;\r\n                &lt;xa-datasource-class&gt;org.h2.jdbcx.JdbcDataSource&lt;/xa-datasource-class&gt;\r\n            &lt;/driver&gt;\r\n    \t\t&lt;driver name=&quot;sybase&quot; module=&quot;com.sybase.sybase&quot;&gt;\r\n    \t\t\t&lt;datasource-class&gt;com.sybase.jdbc3.jdbc.SybDataSource&lt;/datasource-class&gt;\r\n                &lt;xa-datasource-class&gt;com.sybase.jdbc3.jdbc.SybXADataSource&lt;/xa-datasource-class&gt;\r\n            &lt;/driver&gt;\r\n        &lt;/drivers&gt;\r\n    &lt;/datasources&gt;\r\n\r\nI got this error in server.log file when I started WF:\r\n\r\n    2017-02-17 12:48:56,297 ERROR [org.jboss.as.controller.management-operation] (Controller Boot Thread) WFLYCTL0013: Operation (&quot;add&quot;) failed - address: ([\r\n        (&quot;subsystem&quot; =&gt; &quot;datasources&quot;),\r\n        (&quot;data-source&quot; =&gt; &quot;FRAME_IBS&quot;)\r\n    ]) - failure description: {\r\n        &quot;WFLYCTL0412: Required services that are not installed:&quot; =&gt; [&quot;jboss.jdbc-driver.sybase&quot;],\r\n        &quot;WFLYCTL0180: Services with missing/unavailable dependencies&quot; =&gt; [\r\n            &quot;jboss.driver-demander.java:jboss/datasources/FRAME_IBS is missing [jboss.jdbc-driver.sybase]&quot;,\r\n            &quot;org.wildfly.data-source.FRAME_IBS is missing [jboss.jdbc-driver.sybase]&quot;\r\n        ]\r\n    }\r\n    2017-02-17 12:48:56,297 ERROR [org.jboss.as.controller.management-operation] (Controller Boot Thread) WFLYCTL0013: Operation (&quot;add&quot;) failed - address: ([\r\n        (&quot;subsystem&quot; =&gt; &quot;datasources&quot;),\r\n        (&quot;data-source&quot; =&gt; &quot;FRAME_IBS&quot;)\r\n    ]) - failure description: {\r\n        &quot;WFLYCTL0412: Required services that are not installed:&quot; =&gt; [\r\n            &quot;jboss.jdbc-driver.sybase&quot;,\r\n            &quot;jboss.jdbc-driver.sybase&quot;\r\n        ],\r\n        &quot;WFLYCTL0180: Services with missing/unavailable dependencies&quot; =&gt; [\r\n            &quot;jboss.driver-demander.java:jboss/datasources/FRAME_IBS is missing [jboss.jdbc-driver.sybase]&quot;,\r\n            &quot;org.wildfly.data-source.FRAME_IBS is missing [jboss.jdbc-driver.sybase]&quot;,\r\n            &quot;org.wildfly.data-source.FRAME_IBS is missing [jboss.jdbc-driver.sybase]&quot;\r\n        ]\r\n    }\r\n    2017-02-17 12:48:56,453 INFO  [org.jboss.as.controller] (Controller Boot Thread) WFLYCTL0183: Service status report\r\n    WFLYCTL0184:    New missing/unsatisfied dependencies:\r\n          service jboss.jdbc-driver.sybase (missing) dependents: [service org.wildfly.data-source.FRAME_IBS, service jboss.driver-demander.java:jboss/datasources/FRAME_IBS]\r\n\r\nI googled it and tried all that I found but still have this error. Please, help me. \r\nExcuse if my english it&#180;s not correct, it&#39;s not my native language.\r\n\r\nI rename module and move it to WILDFLY_HOME\\modules following Leozeo and Mark recommendations, and still have the same message. I remove my datasource from standalone.xml, run WF again, and I se this message:\r\n\r\n    ERROR [org.jboss.as.controller.management-operation] (ServerService Thread Pool -- 33) WFLYCTL0013: Operation (&quot;add&quot;) failed - address: ([\r\n        (&quot;subsystem&quot; =&gt; &quot;datasources&quot;),\r\n        (&quot;jdbc-driver&quot; =&gt; &quot;sybase&quot;)\r\n\r\nFile module.xml and .jar are both present now in WILDFLY_HOME\\modules","title":"WildFly jdbc connection with Sybase","body":"<p>I'm trying to migrate from Glassfish to WildFly 10, my app connects whit Sybase ASE database. I put jconn3.jar in WILDFLY_HOME\\modules\\system\\layers\\base\\com\\sybase\\sybase\\main, created the module.xml there with the following content:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;  \n&lt;module xmlns=&quot;urn:jboss:module:1.0&quot; name=&quot;com.sybase.sybase&quot;&gt;  \n  &lt;resources&gt;  \n    &lt;resource-root path=&quot;jconn3.jar&quot;/&gt;  \n  &lt;/resources&gt;  \n  &lt;dependencies&gt;  \n    &lt;module name=&quot;javax.api&quot;/&gt;  \n  &lt;/dependencies&gt;  \n&lt;/module&gt;  \n</code></pre>\n<p>and inserted to the standalone.xml:</p>\n<pre><code>&lt;datasources&gt;\n    &lt;datasource jndi-name=&quot;java:jboss/datasources/ExampleDS&quot; pool-name=&quot;ExampleDS&quot; enabled=&quot;true&quot; use-java-context=&quot;true&quot;&gt;\n        &lt;connection-url&gt;jdbc:h2:mem:test;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE&lt;/connection-url&gt;\n        &lt;driver&gt;h2&lt;/driver&gt;\n        &lt;security&gt;\n            &lt;user-name&gt;sa&lt;/user-name&gt;\n            &lt;password&gt;sa&lt;/password&gt;\n        &lt;/security&gt;\n    &lt;/datasource&gt;\n    &lt;datasource jndi-name=&quot;java:jboss/datasources/FRAME_IBS&quot; pool-name=&quot;FRAME_IBS&quot; enabled=&quot;true&quot; use-java-context=&quot;true&quot;&gt;\n        &lt;connection-url&gt;jdbc:sybase:Tds:localhost:5000/Banksys;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE&lt;/connection-url&gt;\n        &lt;driver&gt;sybase&lt;/driver&gt;\n        &lt;pool&gt;\n            &lt;min-pool-size&gt;5&lt;/min-pool-size&gt;\n            &lt;max-pool-size&gt;100&lt;/max-pool-size&gt;\n            &lt;prefill&gt;true&lt;/prefill&gt;\n        &lt;/pool&gt;\n        &lt;driver-class&gt;\n            com.sybase.jdbc3.jdbc.SybDriver\n        &lt;/driver-class&gt;\n        &lt;security&gt;\n            &lt;user-name&gt;admin&lt;/user-name&gt;\n            &lt;password&gt;admin&lt;/password&gt;\n        &lt;/security&gt;\n    &lt;/datasource&gt;\n    &lt;drivers&gt;\n        &lt;driver name=&quot;h2&quot; module=&quot;com.h2database.h2&quot;&gt;\n            &lt;xa-datasource-class&gt;org.h2.jdbcx.JdbcDataSource&lt;/xa-datasource-class&gt;\n        &lt;/driver&gt;\n        &lt;driver name=&quot;sybase&quot; module=&quot;com.sybase.sybase&quot;&gt;\n            &lt;datasource-class&gt;com.sybase.jdbc3.jdbc.SybDataSource&lt;/datasource-class&gt;\n            &lt;xa-datasource-class&gt;com.sybase.jdbc3.jdbc.SybXADataSource&lt;/xa-datasource-class&gt;\n        &lt;/driver&gt;\n    &lt;/drivers&gt;\n&lt;/datasources&gt;\n</code></pre>\n<p>I got this error in server.log file when I started WF:</p>\n<pre><code>2017-02-17 12:48:56,297 ERROR [org.jboss.as.controller.management-operation] (Controller Boot Thread) WFLYCTL0013: Operation (&quot;add&quot;) failed - address: ([\n    (&quot;subsystem&quot; =&gt; &quot;datasources&quot;),\n    (&quot;data-source&quot; =&gt; &quot;FRAME_IBS&quot;)\n]) - failure description: {\n    &quot;WFLYCTL0412: Required services that are not installed:&quot; =&gt; [&quot;jboss.jdbc-driver.sybase&quot;],\n    &quot;WFLYCTL0180: Services with missing/unavailable dependencies&quot; =&gt; [\n        &quot;jboss.driver-demander.java:jboss/datasources/FRAME_IBS is missing [jboss.jdbc-driver.sybase]&quot;,\n        &quot;org.wildfly.data-source.FRAME_IBS is missing [jboss.jdbc-driver.sybase]&quot;\n    ]\n}\n2017-02-17 12:48:56,297 ERROR [org.jboss.as.controller.management-operation] (Controller Boot Thread) WFLYCTL0013: Operation (&quot;add&quot;) failed - address: ([\n    (&quot;subsystem&quot; =&gt; &quot;datasources&quot;),\n    (&quot;data-source&quot; =&gt; &quot;FRAME_IBS&quot;)\n]) - failure description: {\n    &quot;WFLYCTL0412: Required services that are not installed:&quot; =&gt; [\n        &quot;jboss.jdbc-driver.sybase&quot;,\n        &quot;jboss.jdbc-driver.sybase&quot;\n    ],\n    &quot;WFLYCTL0180: Services with missing/unavailable dependencies&quot; =&gt; [\n        &quot;jboss.driver-demander.java:jboss/datasources/FRAME_IBS is missing [jboss.jdbc-driver.sybase]&quot;,\n        &quot;org.wildfly.data-source.FRAME_IBS is missing [jboss.jdbc-driver.sybase]&quot;,\n        &quot;org.wildfly.data-source.FRAME_IBS is missing [jboss.jdbc-driver.sybase]&quot;\n    ]\n}\n2017-02-17 12:48:56,453 INFO  [org.jboss.as.controller] (Controller Boot Thread) WFLYCTL0183: Service status report\nWFLYCTL0184:    New missing/unsatisfied dependencies:\n      service jboss.jdbc-driver.sybase (missing) dependents: [service org.wildfly.data-source.FRAME_IBS, service jboss.driver-demander.java:jboss/datasources/FRAME_IBS]\n</code></pre>\n<p>I googled it and tried all that I found but still have this error. Please, help me.\nExcuse if my english it´s not correct, it's not my native language.</p>\n<p>I rename module and move it to WILDFLY_HOME\\modules following Leozeo and Mark recommendations, and still have the same message. I remove my datasource from standalone.xml, run WF again, and I se this message:</p>\n<pre><code>ERROR [org.jboss.as.controller.management-operation] (ServerService Thread Pool -- 33) WFLYCTL0013: Operation (&quot;add&quot;) failed - address: ([\n    (&quot;subsystem&quot; =&gt; &quot;datasources&quot;),\n    (&quot;jdbc-driver&quot; =&gt; &quot;sybase&quot;)\n</code></pre>\n<p>File module.xml and .jar are both present now in WILDFLY_HOME\\modules</p>\n"},{"tags":["java","anylogic"],"comments":[{"owner":{"account_id":4196914,"reputation":8766,"user_id":3438111,"accept_rate":100,"display_name":"Felipe"},"score":0,"creation_date":1698173049,"post_id":77354621,"comment_id":136370822,"body_markdown":"that is correct to do... using the getParameter(&quot;name&quot;); is so unusual though, but valid","body":"that is correct to do... using the getParameter(&quot;name&quot;); is so unusual though, but valid"},{"owner":{"account_id":29745258,"reputation":1,"user_id":22796502,"display_name":"Nico Torres"},"score":0,"creation_date":1698173131,"post_id":77354621,"comment_id":136370842,"body_markdown":"but i need to do a bucle i dont know how to doit with Wait tool and where","body":"but i need to do a bucle i dont know how to doit with Wait tool and where"},{"owner":{"account_id":4196914,"reputation":8766,"user_id":3438111,"accept_rate":100,"display_name":"Felipe"},"score":0,"creation_date":1698173327,"post_id":77354621,"comment_id":136370875,"body_markdown":"dynamic event inside the agent... check help documentation on how to use it","body":"dynamic event inside the agent... check help documentation on how to use it"}],"owner":{"account_id":29745258,"reputation":1,"user_id":22796502,"display_name":"Nico Torres"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1698172800,"creation_date":1698172677,"question_id":77354621,"body_markdown":"In AnyLogic, I need to move an agent based on a condition that changes over time. For example, `agent.Type = a`. However, I need the agents that do not meet this condition to continue waiting, and this question needs to be asked repeatedly. I am not sure which tool to use, but I was thinking about using a wait. Can you please help me?\r\n```\r\nif ((int) agent.getParameter(&quot;Tipo&quot;)==1)\r\n    wait.free(agent);\r\n```    ","title":"Anylogic bucle wait","body":"<p>In AnyLogic, I need to move an agent based on a condition that changes over time. For example, <code>agent.Type = a</code>. However, I need the agents that do not meet this condition to continue waiting, and this question needs to be asked repeatedly. I am not sure which tool to use, but I was thinking about using a wait. Can you please help me?</p>\n<pre><code>if ((int) agent.getParameter(&quot;Tipo&quot;)==1)\n    wait.free(agent);\n</code></pre>\n"},{"tags":["java","java-time"],"comments":[{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":3,"creation_date":1698157428,"post_id":77352934,"comment_id":136367812,"body_markdown":"One issue with using LocalDateTime: it can be ambiguous. If you went with the first design, with a zone ID of &quot;Europe/London&quot;, and begin/end values of 2023-10-29T01:15:00 and 2023-10-29T01:45:00, is that a) half an hour; b) an hour and a half; c) invalid? (It could be any of them, because 1:15am and 1:45 am each happen twice this coming Sunday in London...)","body":"One issue with using LocalDateTime: it can be ambiguous. If you went with the first design, with a zone ID of &quot;Europe/London&quot;, and begin/end values of 2023-10-29T01:15:00 and 2023-10-29T01:45:00, is that a) half an hour; b) an hour and a half; c) invalid? (It could be any of them, because 1:15am and 1:45 am each happen twice this coming Sunday in London...)"},{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":2,"creation_date":1698157717,"post_id":77352934,"comment_id":136367875,"body_markdown":"Or use Instant if the job doesn&#39;t have an *inherent* time zone and you want to be able to report it in any time zone you want. It&#39;s hard to know what to advise without more context, really.","body":"Or use Instant if the job doesn&#39;t have an <i>inherent</i> time zone and you want to be able to report it in any time zone you want. It&#39;s hard to know what to advise without more context, really."},{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":3,"creation_date":1698157784,"post_id":77352934,"comment_id":136367896,"body_markdown":"If things are scheduled significantly in the future though, using Instant could create a problem: if the user has scheduled it to start at (say) 9am in a year&#39;s time, and the time zone rules change between now and then, if you&#39;ve only recorded an instant, then you could end up starting it at 10am or 8am. See https://codeblog.jonskeet.uk/2019/03/27/storing-utc-is-not-a-silver-bullet/ for more details. Life is complicated :(","body":"If things are scheduled significantly in the future though, using Instant could create a problem: if the user has scheduled it to start at (say) 9am in a year&#39;s time, and the time zone rules change between now and then, if you&#39;ve only recorded an instant, then you could end up starting it at 10am or 8am. See <a href=\"https://codeblog.jonskeet.uk/2019/03/27/storing-utc-is-not-a-silver-bullet/\" rel=\"nofollow noreferrer\">codeblog.jonskeet.uk/2019/03/27/&hellip;</a> for more details. Life is complicated :("},{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":1,"creation_date":1698164298,"post_id":77352934,"comment_id":136369347,"body_markdown":"`Instant.now()` is your friend here.","body":"<code>Instant.now()</code> is your friend here."}],"answers":[{"tags":[],"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1698159233,"creation_date":1698159233,"answer_id":77353161,"question_id":77352934,"body_markdown":"`LocalDateTime` represents more or less exactly what its name is. It represents human reckoning time concepts (so, years, months, days, hours - that sort of thing. In contrast to &#39;millis since some epoch&#39; which is computer reckoning time concepts).\r\n\r\n__And no timezone at all__. Thus, given a `LocalDateTime` object, it is __not possible__ to compare it to, say, an epoch-milli such as what you obtained from `System.currentTimeMillis()`, or another LDT object unless you can guarantee that it is sourced from the same timezone. Which, in your question&#39;s text, you _are not_ - it depends on whether the system started the job (in which case you get the system default tz. Which can also change!), or the user started it (in which case you get their tz). Thus, given 2 LDTs in your system you can&#39;t tell which one came before or after.\r\n\r\nYou don&#39;t even need to involve multiple TZs. All we need is daylight savings.\r\n\r\nLet&#39;s say I do something, here in Europe/Amsterdam: I start a job.\r\n\r\nYou use LDTs and dutifully log it:\r\n\r\n```\r\nZoneId getUserZone() {\r\n  return ZoneId.of(&quot;Europe/Amsterdam&quot;);\r\n}\r\n\r\nZoneId zone = getUserZone();\r\nLocalDateTime eventStamp = LocalDateTime.now(zone);\r\nlogSystem.write(eventStamp, &quot;User logged in&quot;);\r\n```\r\n\r\nHalf an hour later, I log out. Same code.\r\n\r\nA day later you check the log messages. And you witness this:\r\n\r\n```\r\n[2023-March-26 02:40] User logged in\r\n[2023-March-26 02:10] User logged out\r\n```\r\n\r\nWhat the WHAT NOW?? how the heck can the logout event be in the log file with an _earlier_ timestamp? For that matter, how come the log file&#39;s lexical order doesn&#39;t line up with the timestamp order? Did... did I invent a time machine?\r\n\r\nNo - daylight savings happened. The clocks were turned back an hour.\r\n\r\nLDTs don&#39;t store any of that.\r\n\r\n__They are therefore horrible things to use for exact time keeping__.\r\n\r\nThey represent off-the-cuff remarks such as &#39;I was born 14th of april 1975&#39;. Generally you don&#39;t follow up that question with &#39;oh, really? Well, which timezone then?&#39;. If I&#39;m born in New York, 23:00 on april 14th and I move to europe, I don&#39;t then start celebrating my birthday on the 15th. Even though if we do exact timezone bookkeeping I should; New York is 6 to 7 hours &#39;before&#39; europe, so when you were born, it was 05:00 in the morning on the __15th__ in europe.\r\n\r\nBe that as it may, you still don&#39;t update your birthdate. Hence, had you tracked &#39;born&#39; as a ZonedDateTime and then try to calculate the difference in years between `ZonedDateTime.now(&quot;Europe/Amsterdam&quot;)` and your birth date, then on the 15th, it&#39;d go up by one. Which would be wrong.\r\n\r\nThat&#39;s a semantic model (your birthday is stated in year, month, and date - and has no timezone component, and nobody acts like it does either) that says: Use `LocalDate` / `LDT` to represent me.\r\n\r\nIn contrast, let&#39;s say you make an appointment at a barber in Amsterdam for April 30th, 2026, 1 o&#39;clock in the afternoon. If you store that just as LocalDateTime `2026-04-30 13:00:00`, then if you aren&#39;t in Amsterdam any alarm clock or agenda system is going to mess up when trying to tell you how many hours until your barber appointment.\r\n\r\nIf you store it as epochmillis instead, that&#39;s __also__ wrong. Imagine (and this is not exotic _at all_, the EU already decided daylight saving&#39;s gotta go, there&#39;s just no timeline for it _yet_) the hammer comes down in the political chambers in NL &#39;starting with 2025 we shall remain on wintertime permanently&#39;. And let&#39;s say you have a clock that is ticking down the hours and minutes until your barber&#39;s appointment.\r\n\r\nThe moment that hammer slams down, that is the moment that clock should adjust &#39;hours until barber appointment&#39; down by 1 hour exactly. Because your appointment is __still__ &#39;1 o&#39;clock in amsterdam in the afternoon on april 30th 2026&#39;. But that&#39;s now going to be an hour earlier.\r\n\r\nHence, storing appointments screams: &quot;use ZonedDateTime&quot;. Because ZDT __will__ update properly (not as the hammer falls, but as the tzdata files get updated to reflect that political decision).\r\n\r\nlog events are on an exact moment in time. Therefore, the proper representation for then is __neither ZDT nor LDT__. It&#39;s `java.time.Instant`.\r\n\r\nHowever, converting Instants to ZDTs and back _for events that happened in the past) is generally safe. So, if Instant isn&#39;t on the table, ZDT is wrong semantically, but won&#39;t result in errors.\r\n\r\nInstants don&#39;t have a timezone either, but they do represent an exact moment in time. That makes them comparable (it doesn&#39;t matter that clocks move back and forth - instants don&#39;t &#39;do&#39; timezones at all, and everybody&#39;s java VMs all around the planet return the same `long` value, plus minus a few due to clocks not being exactly correct, when you call `System.currentTimeMillis()` or `Instant.now()`.\r\n\r\nWhen rendering log files to users, well, humans tend to be really bad at putting &#39;this log was written on 1698159191068. We like those years and such. But, the semantic concept you are storing __is an `Instant`__. So store that, and when rendering it to users, convert that instant to whatever is appropriate. For example, it&#39;s not crazy to turn that Instant into an LDT using the user&#39;s known timezone when showing the log to that user.","title":"Java LocalDateTime vs ZonedDateTime","body":"<p><code>LocalDateTime</code> represents more or less exactly what its name is. It represents human reckoning time concepts (so, years, months, days, hours - that sort of thing. In contrast to 'millis since some epoch' which is computer reckoning time concepts).</p>\n<p><strong>And no timezone at all</strong>. Thus, given a <code>LocalDateTime</code> object, it is <strong>not possible</strong> to compare it to, say, an epoch-milli such as what you obtained from <code>System.currentTimeMillis()</code>, or another LDT object unless you can guarantee that it is sourced from the same timezone. Which, in your question's text, you <em>are not</em> - it depends on whether the system started the job (in which case you get the system default tz. Which can also change!), or the user started it (in which case you get their tz). Thus, given 2 LDTs in your system you can't tell which one came before or after.</p>\n<p>You don't even need to involve multiple TZs. All we need is daylight savings.</p>\n<p>Let's say I do something, here in Europe/Amsterdam: I start a job.</p>\n<p>You use LDTs and dutifully log it:</p>\n<pre><code>ZoneId getUserZone() {\n  return ZoneId.of(&quot;Europe/Amsterdam&quot;);\n}\n\nZoneId zone = getUserZone();\nLocalDateTime eventStamp = LocalDateTime.now(zone);\nlogSystem.write(eventStamp, &quot;User logged in&quot;);\n</code></pre>\n<p>Half an hour later, I log out. Same code.</p>\n<p>A day later you check the log messages. And you witness this:</p>\n<pre><code>[2023-March-26 02:40] User logged in\n[2023-March-26 02:10] User logged out\n</code></pre>\n<p>What the WHAT NOW?? how the heck can the logout event be in the log file with an <em>earlier</em> timestamp? For that matter, how come the log file's lexical order doesn't line up with the timestamp order? Did... did I invent a time machine?</p>\n<p>No - daylight savings happened. The clocks were turned back an hour.</p>\n<p>LDTs don't store any of that.</p>\n<p><strong>They are therefore horrible things to use for exact time keeping</strong>.</p>\n<p>They represent off-the-cuff remarks such as 'I was born 14th of april 1975'. Generally you don't follow up that question with 'oh, really? Well, which timezone then?'. If I'm born in New York, 23:00 on april 14th and I move to europe, I don't then start celebrating my birthday on the 15th. Even though if we do exact timezone bookkeeping I should; New York is 6 to 7 hours 'before' europe, so when you were born, it was 05:00 in the morning on the <strong>15th</strong> in europe.</p>\n<p>Be that as it may, you still don't update your birthdate. Hence, had you tracked 'born' as a ZonedDateTime and then try to calculate the difference in years between <code>ZonedDateTime.now(&quot;Europe/Amsterdam&quot;)</code> and your birth date, then on the 15th, it'd go up by one. Which would be wrong.</p>\n<p>That's a semantic model (your birthday is stated in year, month, and date - and has no timezone component, and nobody acts like it does either) that says: Use <code>LocalDate</code> / <code>LDT</code> to represent me.</p>\n<p>In contrast, let's say you make an appointment at a barber in Amsterdam for April 30th, 2026, 1 o'clock in the afternoon. If you store that just as LocalDateTime <code>2026-04-30 13:00:00</code>, then if you aren't in Amsterdam any alarm clock or agenda system is going to mess up when trying to tell you how many hours until your barber appointment.</p>\n<p>If you store it as epochmillis instead, that's <strong>also</strong> wrong. Imagine (and this is not exotic <em>at all</em>, the EU already decided daylight saving's gotta go, there's just no timeline for it <em>yet</em>) the hammer comes down in the political chambers in NL 'starting with 2025 we shall remain on wintertime permanently'. And let's say you have a clock that is ticking down the hours and minutes until your barber's appointment.</p>\n<p>The moment that hammer slams down, that is the moment that clock should adjust 'hours until barber appointment' down by 1 hour exactly. Because your appointment is <strong>still</strong> '1 o'clock in amsterdam in the afternoon on april 30th 2026'. But that's now going to be an hour earlier.</p>\n<p>Hence, storing appointments screams: &quot;use ZonedDateTime&quot;. Because ZDT <strong>will</strong> update properly (not as the hammer falls, but as the tzdata files get updated to reflect that political decision).</p>\n<p>log events are on an exact moment in time. Therefore, the proper representation for then is <strong>neither ZDT nor LDT</strong>. It's <code>java.time.Instant</code>.</p>\n<p>However, converting Instants to ZDTs and back _for events that happened in the past) is generally safe. So, if Instant isn't on the table, ZDT is wrong semantically, but won't result in errors.</p>\n<p>Instants don't have a timezone either, but they do represent an exact moment in time. That makes them comparable (it doesn't matter that clocks move back and forth - instants don't 'do' timezones at all, and everybody's java VMs all around the planet return the same <code>long</code> value, plus minus a few due to clocks not being exactly correct, when you call <code>System.currentTimeMillis()</code> or <code>Instant.now()</code>.</p>\n<p>When rendering log files to users, well, humans tend to be really bad at putting 'this log was written on 1698159191068. We like those years and such. But, the semantic concept you are storing <strong>is an <code>Instant</code></strong>. So store that, and when rendering it to users, convert that instant to whatever is appropriate. For example, it's not crazy to turn that Instant into an LDT using the user's known timezone when showing the log to that user.</p>\n"},{"comments":[{"owner":{"account_id":1024933,"reputation":703,"user_id":1034461,"display_name":"horvoje"},"score":0,"creation_date":1698168376,"post_id":77353921,"comment_id":136370021,"body_markdown":"Thank you very much! My question is not so clear, I see now. It&#39;s not mixing two things - both are the same. 1st thing should be cron job which will run once daily at any time and reporting will say &quot;started job at&quot;, &quot;finished job at&quot;. 2nd thing is when one click &quot;run update now&quot; and the same job will run and will generate the same report. I have to sit and read everything here twice and decide for the best option.","body":"Thank you very much! My question is not so clear, I see now. It&#39;s not mixing two things - both are the same. 1st thing should be cron job which will run once daily at any time and reporting will say &quot;started job at&quot;, &quot;finished job at&quot;. 2nd thing is when one click &quot;run update now&quot; and the same job will run and will generate the same report. I have to sit and read everything here twice and decide for the best option."},{"owner":{"account_id":1024933,"reputation":703,"user_id":1034461,"display_name":"horvoje"},"score":0,"creation_date":1698168764,"post_id":77353921,"comment_id":136370090,"body_markdown":"Probably I&#39;ll calculate time spent on job and display it in reporting, but right now it&#39;s not so important.","body":"Probably I&#39;ll calculate time spent on job and display it in reporting, but right now it&#39;s not so important."}],"tags":[],"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1698172371,"creation_date":1698165434,"answer_id":77353921,"question_id":77352934,"body_markdown":"Sounds like your Question mixes two very different things:\r\n\r\n - Scheduling an appointment. \r\n - Tracking history, the moment something happened, a **specific point on the timeline**. \r\n\r\nIf you want to schedule your task for next Monday at 3 PM:\r\n\r\n    ZoneId z = ZoneId.of( &quot;America/Edmonton&quot; ) ;\r\n    LocalDate today = LocalDate.now( z ) ;\r\n    LocalDate nextMonday = today.with( TemporalAdjusters.next( DayOfWeek.MONDAY ) ) ;\r\n    LocalTime targetTime = LocalTime.of( 3 , 0 ) ;\r\n\r\nStore those three fields (`z`, `nextMonday`, `targetTime`) if you are not yet ready to determine a moment (or, alternatively, store the date and time together as a `LocalDateTime`). Politicians frequently change the offset of the time zone(s) under their jurisdiction, and often do so with little or no forewarning. So if performing the task at 3 PM is important, defer the determination of a moment. \r\n\r\nTo determine a moment:\r\n\r\n    ZonedDateTime zdt = ZonedDateTime.of( nextMonday , targetTime , z ) ;\r\n\r\nAdjust to UTC (an offset of zero). \r\n\r\n    Instant then = zdt.toInstant() ;\r\n\r\nDetermine time to elapse:\r\n\r\n    Duration d = Duration.between ( Instant.now() , then ) ;\r\n\r\n\r\nTo record when your sub-tasks actually run, capture the current moment. \r\n\r\n    Instant start = Instant.now() ;\r\n    …\r\n    Instant end = Instant.now() ;\r\n\r\nWhen writing out text such as to a log, simply call `Instant#toString` to generate text in standard ISO 8601 format. \r\n\r\nUse UTC (offset of zero) and `Instant` wherever you can. When wearing your “Programmer” hat, forget about your own parochial time zone. Think, log, and store in UTC. Keep a second clock in your office set to UTC. Apply time zones only (a) where required by business rules, and (b) for presentation to the user. ","title":"Java LocalDateTime vs ZonedDateTime","body":"<p>Sounds like your Question mixes two very different things:</p>\n<ul>\n<li>Scheduling an appointment.</li>\n<li>Tracking history, the moment something happened, a <strong>specific point on the timeline</strong>.</li>\n</ul>\n<p>If you want to schedule your task for next Monday at 3 PM:</p>\n<pre><code>ZoneId z = ZoneId.of( &quot;America/Edmonton&quot; ) ;\nLocalDate today = LocalDate.now( z ) ;\nLocalDate nextMonday = today.with( TemporalAdjusters.next( DayOfWeek.MONDAY ) ) ;\nLocalTime targetTime = LocalTime.of( 3 , 0 ) ;\n</code></pre>\n<p>Store those three fields (<code>z</code>, <code>nextMonday</code>, <code>targetTime</code>) if you are not yet ready to determine a moment (or, alternatively, store the date and time together as a <code>LocalDateTime</code>). Politicians frequently change the offset of the time zone(s) under their jurisdiction, and often do so with little or no forewarning. So if performing the task at 3 PM is important, defer the determination of a moment.</p>\n<p>To determine a moment:</p>\n<pre><code>ZonedDateTime zdt = ZonedDateTime.of( nextMonday , targetTime , z ) ;\n</code></pre>\n<p>Adjust to UTC (an offset of zero).</p>\n<pre><code>Instant then = zdt.toInstant() ;\n</code></pre>\n<p>Determine time to elapse:</p>\n<pre><code>Duration d = Duration.between ( Instant.now() , then ) ;\n</code></pre>\n<p>To record when your sub-tasks actually run, capture the current moment.</p>\n<pre><code>Instant start = Instant.now() ;\n…\nInstant end = Instant.now() ;\n</code></pre>\n<p>When writing out text such as to a log, simply call <code>Instant#toString</code> to generate text in standard ISO 8601 format.</p>\n<p>Use UTC (offset of zero) and <code>Instant</code> wherever you can. When wearing your “Programmer” hat, forget about your own parochial time zone. Think, log, and store in UTC. Keep a second clock in your office set to UTC. Apply time zones only (a) where required by business rules, and (b) for presentation to the user.</p>\n"}],"owner":{"account_id":1024933,"reputation":703,"user_id":1034461,"display_name":"horvoje"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":76,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1698172371,"creation_date":1698157271,"question_id":77352934,"body_markdown":"I&#39;m creating a backend service that should do some requests to third party services and make updates based on responses. Single job is made of thousands of tiny jobs. Exact time of `begin` and `end` of main job and also `begin` and `end` of each child job should be stored in a report.\r\nThe main job would be also available to run from web user interface which means other time zone depending on user logged in.\r\n\r\nInitial idea (and implementation) was to store `ZoneId` at the very beginning of a main job (the one from local server if job is started as a scheduled or the one from logged in user if user starts the job manually) and then use `LocalDateTime` to store `begin` and `end` of main job and child jobs. Or should I use `Instant` instead of `LocalDateTime` in that case?\r\n\r\n```\r\nprivate ZoneId zoneId;\r\nprivate LocalDateTime begin;\r\nprivate LocalDateTime end;\r\n```\r\n\r\nI&#39;m not sure is it the right way to go with `ZoneId` or should I use `ZonedDateTime` for each `begin` and `end` and forget about stand alone `ZoneId` property.\r\n\r\n\r\n```\r\nprivate ZonedDateTime begin;\r\nprivate ZonedDateTime end;\r\n```\r\n\r\n---\r\n\r\nEDIT: Just to give more information for future readers:\r\n\r\n**Case 1** will be cron job which will run once daily at some time (not so important which time, but each day the same time) and reporting will say &quot;started job at&quot;, &quot;finished job at&quot;.\r\n\r\n**Case 2** will be when one clicks &quot;run update now&quot; and the same job will run and will generate the same report.","title":"Java LocalDateTime vs ZonedDateTime","body":"<p>I'm creating a backend service that should do some requests to third party services and make updates based on responses. Single job is made of thousands of tiny jobs. Exact time of <code>begin</code> and <code>end</code> of main job and also <code>begin</code> and <code>end</code> of each child job should be stored in a report.\nThe main job would be also available to run from web user interface which means other time zone depending on user logged in.</p>\n<p>Initial idea (and implementation) was to store <code>ZoneId</code> at the very beginning of a main job (the one from local server if job is started as a scheduled or the one from logged in user if user starts the job manually) and then use <code>LocalDateTime</code> to store <code>begin</code> and <code>end</code> of main job and child jobs. Or should I use <code>Instant</code> instead of <code>LocalDateTime</code> in that case?</p>\n<pre><code>private ZoneId zoneId;\nprivate LocalDateTime begin;\nprivate LocalDateTime end;\n</code></pre>\n<p>I'm not sure is it the right way to go with <code>ZoneId</code> or should I use <code>ZonedDateTime</code> for each <code>begin</code> and <code>end</code> and forget about stand alone <code>ZoneId</code> property.</p>\n<pre><code>private ZonedDateTime begin;\nprivate ZonedDateTime end;\n</code></pre>\n<hr />\n<p>EDIT: Just to give more information for future readers:</p>\n<p><strong>Case 1</strong> will be cron job which will run once daily at some time (not so important which time, but each day the same time) and reporting will say &quot;started job at&quot;, &quot;finished job at&quot;.</p>\n<p><strong>Case 2</strong> will be when one clicks &quot;run update now&quot; and the same job will run and will generate the same report.</p>\n"},{"tags":["java","android","android-studio","kotlin","pdfdocument"],"comments":[{"owner":{"account_id":9172301,"reputation":4168,"user_id":6819340,"accept_rate":39,"display_name":"darshan"},"score":1,"creation_date":1629732340,"post_id":68894947,"comment_id":121758675,"body_markdown":"You are adding all the data on one page, check this answer : https://stackoverflow.com/a/28159511/6819340","body":"You are adding all the data on one page, check this answer : <a href=\"https://stackoverflow.com/a/28159511/6819340\">stackoverflow.com/a/28159511/6819340</a>"},{"owner":{"account_id":16740979,"reputation":2260,"user_id":12100652,"display_name":"Karunesh Palekar"},"score":0,"creation_date":1629742536,"post_id":68894947,"comment_id":121762313,"body_markdown":"https://youtu.be/jO7c9K2kj3w Refer to this video","body":"<a href=\"https://youtu.be/jO7c9K2kj3w\" rel=\"nofollow noreferrer\">youtu.be/jO7c9K2kj3w</a> Refer to this video"}],"owner":{"account_id":19765074,"reputation":33,"user_id":14473294,"display_name":"Devid John"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":708,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1698172368,"creation_date":1629731354,"question_id":68894947,"body_markdown":"I am creating pdf of my data using pdfDocument but I am able to create single page only..\r\nSometimes I am passing 1000 of data which needs multiple pages but I am unable to figure out how can I create next page once reaching the end of first page..\r\n\r\nHere is my code :\r\n\r\n    object PDFGenerator {\r\n        private const val TAG = &quot;PDFGenerator&quot;\r\n        var pageHeight = 1120\r\n        var pagewidth = 792\r\n    \r\n        var logoHeight = 50\r\n        var logoWidth = 50\r\n    \r\n        fun generatePDF(context: Context,\r\n            headerBuilder: HeaderBuilder,\r\n            outputFileName: String = &quot;GeneratedPDF&quot;,\r\n            logo: Bitmap,\r\n            tableTitle: TableTitleBuilder,\r\n            valueList: MutableList&lt;TableValuesBuilder&gt;) {\r\n    \r\n            val pdfDocument = PdfDocument()\r\n            Log.d(TAG, &quot;generatePDF: starting&quot;)\r\n    \r\n            val paint = Paint()\r\n            val title = Paint()\r\n    \r\n            val pageInfo = PageInfo.Builder(pagewidth, pageHeight, 100).create()\r\n            val myPage = pdfDocument.startPage(pageInfo)\r\n    \r\n            val canvas: Canvas = myPage.canvas\r\n            val scaledLogo = Bitmap.createScaledBitmap(logo, logoWidth, logoHeight, false);\r\n            canvas.drawBitmap(scaledLogo, 56F, 40F, paint)\r\n    \r\n            /**\r\n             * Configuring PDF Header\r\n             */\r\n            title.textSize = 26F\r\n            title.typeface = Typeface.create(Typeface.DEFAULT, Typeface.BOLD)\r\n            title.color = ContextCompat.getColor(context, R.color.brandTitle)\r\n            canvas.drawText(headerBuilder.title, 120F, 65F, title)\r\n            title.textSize = 18F\r\n            title.typeface = Typeface.create(Typeface.DEFAULT, Typeface.NORMAL)\r\n            title.color = ContextCompat.getColor(context, R.color.brandSubTitle)\r\n            canvas.drawText(headerBuilder.subTitle, 120F, 85F, title)\r\n    \r\n            /**\r\n             * Configuring table titles\r\n             */\r\n            var xTitlePos = 50F\r\n            val yTitlePos = 150F\r\n            title.typeface = Typeface.defaultFromStyle(Typeface.BOLD)\r\n            title.color = ContextCompat.getColor(context, R.color.titleText)\r\n            title.textSize = 25F\r\n            canvas.drawText(tableTitle.name1, xTitlePos, yTitlePos, title)\r\n            xTitlePos += 200F\r\n            canvas.drawText(tableTitle.name2, xTitlePos, yTitlePos, title)\r\n            xTitlePos += 200F\r\n            canvas.drawText(tableTitle.name3, xTitlePos, yTitlePos, title)\r\n            xTitlePos += 200F\r\n            canvas.drawText(tableTitle.name4, xTitlePos, yTitlePos, title)\r\n    \r\n            /**\r\n             * Inserting values in table\r\n             */\r\n            var xValuePos = 50F\r\n            var yValuePos = 185F\r\n            title.typeface = Typeface.defaultFromStyle(Typeface.NORMAL)\r\n            title.color = ContextCompat.getColor(context, R.color.valueText)\r\n            title.textSize = 25F\r\n            valueList.forEach {\r\n                canvas.drawText(it.value1, xValuePos, yValuePos, title)\r\n                xValuePos += 200F\r\n                canvas.drawText(it.value2, xValuePos, yValuePos, title)\r\n                xValuePos += 200F\r\n                canvas.drawText(it.value3, xValuePos, yValuePos, title)\r\n                xValuePos += 200F\r\n                canvas.drawText(it.value4, xValuePos, yValuePos, title)\r\n                xValuePos = 50F\r\n                yValuePos += 30F\r\n            }\r\n    \r\n            pdfDocument.finishPage(myPage)\r\n            val file = File(Environment.getExternalStorageDirectory(), &quot;$outputFileName.pdf&quot;)\r\n            Log.d(TAG, &quot;generatePDF: $file&quot;)\r\n            try {\r\n                pdfDocument.writeTo(FileOutputStream(file))\r\n                Toast.makeText(context, &quot;PDF file generated successfully.&quot;, Toast.LENGTH_SHORT).show()\r\n            } catch (e: IOException) {\r\n                e.printStackTrace()\r\n            }\r\n            pdfDocument.close()\r\n            Log.d(TAG, &quot;generatePDF: ending&quot;)\r\n        }\r\n    }\r\n\r\n\r\nhow I can generate next page once reaching the end of current page..\r\n\r\nThanks in Advance.","title":"Android PdfDocument multiple pages with Koltin","body":"<p>I am creating pdf of my data using pdfDocument but I am able to create single page only..\nSometimes I am passing 1000 of data which needs multiple pages but I am unable to figure out how can I create next page once reaching the end of first page..</p>\n<p>Here is my code :</p>\n<pre><code>object PDFGenerator {\n    private const val TAG = &quot;PDFGenerator&quot;\n    var pageHeight = 1120\n    var pagewidth = 792\n\n    var logoHeight = 50\n    var logoWidth = 50\n\n    fun generatePDF(context: Context,\n        headerBuilder: HeaderBuilder,\n        outputFileName: String = &quot;GeneratedPDF&quot;,\n        logo: Bitmap,\n        tableTitle: TableTitleBuilder,\n        valueList: MutableList&lt;TableValuesBuilder&gt;) {\n\n        val pdfDocument = PdfDocument()\n        Log.d(TAG, &quot;generatePDF: starting&quot;)\n\n        val paint = Paint()\n        val title = Paint()\n\n        val pageInfo = PageInfo.Builder(pagewidth, pageHeight, 100).create()\n        val myPage = pdfDocument.startPage(pageInfo)\n\n        val canvas: Canvas = myPage.canvas\n        val scaledLogo = Bitmap.createScaledBitmap(logo, logoWidth, logoHeight, false);\n        canvas.drawBitmap(scaledLogo, 56F, 40F, paint)\n\n        /**\n         * Configuring PDF Header\n         */\n        title.textSize = 26F\n        title.typeface = Typeface.create(Typeface.DEFAULT, Typeface.BOLD)\n        title.color = ContextCompat.getColor(context, R.color.brandTitle)\n        canvas.drawText(headerBuilder.title, 120F, 65F, title)\n        title.textSize = 18F\n        title.typeface = Typeface.create(Typeface.DEFAULT, Typeface.NORMAL)\n        title.color = ContextCompat.getColor(context, R.color.brandSubTitle)\n        canvas.drawText(headerBuilder.subTitle, 120F, 85F, title)\n\n        /**\n         * Configuring table titles\n         */\n        var xTitlePos = 50F\n        val yTitlePos = 150F\n        title.typeface = Typeface.defaultFromStyle(Typeface.BOLD)\n        title.color = ContextCompat.getColor(context, R.color.titleText)\n        title.textSize = 25F\n        canvas.drawText(tableTitle.name1, xTitlePos, yTitlePos, title)\n        xTitlePos += 200F\n        canvas.drawText(tableTitle.name2, xTitlePos, yTitlePos, title)\n        xTitlePos += 200F\n        canvas.drawText(tableTitle.name3, xTitlePos, yTitlePos, title)\n        xTitlePos += 200F\n        canvas.drawText(tableTitle.name4, xTitlePos, yTitlePos, title)\n\n        /**\n         * Inserting values in table\n         */\n        var xValuePos = 50F\n        var yValuePos = 185F\n        title.typeface = Typeface.defaultFromStyle(Typeface.NORMAL)\n        title.color = ContextCompat.getColor(context, R.color.valueText)\n        title.textSize = 25F\n        valueList.forEach {\n            canvas.drawText(it.value1, xValuePos, yValuePos, title)\n            xValuePos += 200F\n            canvas.drawText(it.value2, xValuePos, yValuePos, title)\n            xValuePos += 200F\n            canvas.drawText(it.value3, xValuePos, yValuePos, title)\n            xValuePos += 200F\n            canvas.drawText(it.value4, xValuePos, yValuePos, title)\n            xValuePos = 50F\n            yValuePos += 30F\n        }\n\n        pdfDocument.finishPage(myPage)\n        val file = File(Environment.getExternalStorageDirectory(), &quot;$outputFileName.pdf&quot;)\n        Log.d(TAG, &quot;generatePDF: $file&quot;)\n        try {\n            pdfDocument.writeTo(FileOutputStream(file))\n            Toast.makeText(context, &quot;PDF file generated successfully.&quot;, Toast.LENGTH_SHORT).show()\n        } catch (e: IOException) {\n            e.printStackTrace()\n        }\n        pdfDocument.close()\n        Log.d(TAG, &quot;generatePDF: ending&quot;)\n    }\n}\n</code></pre>\n<p>how I can generate next page once reaching the end of current page..</p>\n<p>Thanks in Advance.</p>\n"},{"tags":["java","jms","activemq-artemis"],"answers":[{"tags":[],"owner":{"account_id":11434008,"reputation":30715,"user_id":8381946,"display_name":"Justin Bertram"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1682346213,"creation_date":1682346213,"answer_id":76092930,"question_id":76091553,"body_markdown":"In ActiveMQ Artemis the redelivery policy is configured on the _broker_. See [the documentation][1] for more details on that. Configuring redelivery on the broker allows the same policy to be enforced across all protocols and clients rather than having to be individually configured.\r\n\r\nFor what it&#39;s worth, ActiveMQ Artemis supports the OpenWire protocol so you can continue to use the `org.apache.activemq:activemq-client:5.17.0` client if necessary.\r\n\r\n\r\n  [1]: https://activemq.apache.org/components/artemis/documentation/latest/undelivered-messages.html","title":"How to configure redelivery policy in ActiveMQ Artemis client?","body":"<p>In ActiveMQ Artemis the redelivery policy is configured on the <em>broker</em>. See <a href=\"https://activemq.apache.org/components/artemis/documentation/latest/undelivered-messages.html\" rel=\"nofollow noreferrer\">the documentation</a> for more details on that. Configuring redelivery on the broker allows the same policy to be enforced across all protocols and clients rather than having to be individually configured.</p>\n<p>For what it's worth, ActiveMQ Artemis supports the OpenWire protocol so you can continue to use the <code>org.apache.activemq:activemq-client:5.17.0</code> client if necessary.</p>\n"}],"owner":{"account_id":3298176,"reputation":7146,"user_id":2774914,"accept_rate":94,"display_name":"diziaq"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":277,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76092930,"answer_count":1,"score":0,"last_activity_date":1698172079,"creation_date":1682337019,"question_id":76091553,"body_markdown":"In the default client shipped with ActiveMQ &quot;Classic&quot; `org.apache.activemq:activemq-client:5.17.0`\r\nre-delivery policy is being configured like this\r\n\r\n    var connectionFactory = new ActiveMQConnectionFactory();\r\n    var policy = new RedeliveryPolicy();\r\n\r\n    // and apply necessary config via setters \r\n    // e.g. collisionAvoidance, maximumRedeliveries, redeliveryDelay\r\n\r\n    connectionFactory.setRedeliveryPolicy(policy);\r\n\r\n\r\nI would like to use the ActiveMQ Artemis client `org.apache.activemq:artemis-jms-client:2.22.0`,\r\nbut there is nothing similar in its Java classes API that could allow to do the same.\r\n\r\n**How to configure re-delivery policy in ActiveMQ Artemis?**","title":"How to configure redelivery policy in ActiveMQ Artemis client?","body":"<p>In the default client shipped with ActiveMQ &quot;Classic&quot; <code>org.apache.activemq:activemq-client:5.17.0</code>\nre-delivery policy is being configured like this</p>\n<pre><code>var connectionFactory = new ActiveMQConnectionFactory();\nvar policy = new RedeliveryPolicy();\n\n// and apply necessary config via setters \n// e.g. collisionAvoidance, maximumRedeliveries, redeliveryDelay\n\nconnectionFactory.setRedeliveryPolicy(policy);\n</code></pre>\n<p>I would like to use the ActiveMQ Artemis client <code>org.apache.activemq:artemis-jms-client:2.22.0</code>,\nbut there is nothing similar in its Java classes API that could allow to do the same.</p>\n<p><strong>How to configure re-delivery policy in ActiveMQ Artemis?</strong></p>\n"},{"tags":["java","datetime","java-time"],"comments":[{"owner":{"account_id":39208,"reputation":251260,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"score":0,"creation_date":1698170923,"post_id":77354374,"comment_id":136370478,"body_markdown":"&quot;15-Aug-2023&quot; is the same date in German and English (August is August).","body":"&quot;15-Aug-2023&quot; is the same date in German and English (August is August)."},{"owner":{"account_id":1399667,"reputation":347,"user_id":1328673,"accept_rate":22,"display_name":"MS13"},"score":0,"creation_date":1698171619,"post_id":77354374,"comment_id":136370572,"body_markdown":"yeah I know thats why i chose it and still doesn&#39;t work :)","body":"yeah I know thats why i chose it and still doesn&#39;t work :)"},{"owner":{"account_id":39208,"reputation":251260,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"score":1,"creation_date":1698172248,"post_id":77354374,"comment_id":136370665,"body_markdown":"https://stackoverflow.com/questions/69860992/when-i-format-a-localdate-to-dd-mmm-yyyy-i-get-01-jan-2000-with-two-dots this question is about formatting, but I guess the solution applies to parsing as well. TLDR: `Locale.GERMAN` requires the dots; you have to use a custom locale or overwrite the month abbreviations.","body":"<a href=\"https://stackoverflow.com/questions/69860992/when-i-format-a-localdate-to-dd-mmm-yyyy-i-get-01-jan-2000-with-two-dots\" title=\"when i format a localdate to dd mmm yyyy i get 01 jan 2000 with two dots\">stackoverflow.com/questions/69860992/&hellip;</a> this question is about formatting, but I guess the solution applies to parsing as well. TLDR: <code>Locale.GERMAN</code> requires the dots; you have to use a custom locale or overwrite the month abbreviations."},{"owner":{"account_id":39208,"reputation":251260,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"score":0,"creation_date":1698173901,"post_id":77354374,"comment_id":136370989,"body_markdown":"&quot;Mrz&quot; is a non-standard abbreviation. The standard abbreviation for month &quot;M&#228;rz&quot; is &quot;M&#228;r&quot;.","body":"&quot;Mrz&quot; is a non-standard abbreviation. The standard abbreviation for month &quot;M&#228;rz&quot; is &quot;M&#228;r&quot;."},{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":1,"creation_date":1698174010,"post_id":77354374,"comment_id":136371011,"body_markdown":"Suggestion: Educate the publisher of your data about exchanging date-time values as text using [ISO 8601](https://en.m.wikipedia.org/wiki/ISO_8601) standard formats only rather than localized text.","body":"Suggestion: Educate the publisher of your data about exchanging date-time values as text using <a href=\"https://en.m.wikipedia.org/wiki/ISO_8601\" rel=\"nofollow noreferrer\">ISO 8601</a> standard formats only rather than localized text."}],"answers":[{"comments":[{"owner":{"account_id":39208,"reputation":251260,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"score":1,"creation_date":1698172477,"post_id":77354548,"comment_id":136370704,"body_markdown":"The JavaDoc could be improved on this one. It&#39;s quite unclear what M does vs what L does (and why one gives a dot and the other doesn&#39;t)","body":"The JavaDoc could be improved on this one. It&#39;s quite unclear what M does vs what L does (and why one gives a dot and the other doesn&#39;t)"},{"owner":{"account_id":39574,"reputation":24267,"user_id":114226,"accept_rate":79,"display_name":"PeterMmm"},"score":0,"creation_date":1698172923,"post_id":77354548,"comment_id":136370797,"body_markdown":"`System.out.println(format.format(LocalDate.now()));` prints `24-Okt-2023`here. Ok, having openjdk version &quot;21&quot; 2023-09-19","body":"<code>System.out.println(format.format(LocalDate.now()));</code> prints <code>24-Okt-2023</code>here. Ok, having openjdk version &quot;21&quot; 2023-09-19"},{"owner":{"account_id":39208,"reputation":251260,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"score":0,"creation_date":1698173141,"post_id":77354548,"comment_id":136370844,"body_markdown":"Yes, I get that. The official JavaDoc should still be improved. This answer is fine.","body":"Yes, I get that. The official JavaDoc should still be improved. This answer is fine."},{"owner":{"account_id":1399667,"reputation":347,"user_id":1328673,"accept_rate":22,"display_name":"MS13"},"score":0,"creation_date":1698173436,"post_id":77354548,"comment_id":136370897,"body_markdown":"Still is not working for 31-Mrz-2034 same error. I dont&#39;t know how are they sending these dates !???","body":"Still is not working for 31-Mrz-2034 same error. I dont&#39;t know how are they sending these dates !???"},{"owner":{"account_id":39208,"reputation":251260,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"score":1,"creation_date":1698173548,"post_id":77354548,"comment_id":136370919,"body_markdown":"@MS13 because &quot;Mrz&quot; is not the &quot;correct&quot; (official?) abbreviation. It is &quot;M&#228;r&quot;. If you make up non-standard abbreviations, you must use a custom locale (or custom month-mapping; see linked q&amp;a under the question)","body":"@MS13 because &quot;Mrz&quot; is not the &quot;correct&quot; (official?) abbreviation. It is &quot;M&#228;r&quot;. If you make up non-standard abbreviations, you must use a custom locale (or custom month-mapping; see linked q&amp;a under the question)"}],"tags":[],"owner":{"account_id":39574,"reputation":24267,"user_id":114226,"accept_rate":79,"display_name":"PeterMmm"},"comment_count":5,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1698171871,"creation_date":1698171871,"answer_id":77354548,"question_id":77354374,"body_markdown":"This runs for me:\r\n\r\n    public class Main {\r\n        public static void main(String[] args)  {\r\n            String txt = &quot;15-Aug-2023&quot;;\r\n            DateTimeFormatter format =  new DateTimeFormatterBuilder()\r\n                    .appendPattern(&quot;dd-LLL-yyyy&quot;)\r\n                    .toFormatter(Locale.GERMAN);\r\n            System.out.println(LocalDate.parse(txt, format));\r\n        }\r\n    }\r\n\r\nPrints: 2023-08-15\r\n\r\nhttps://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html","title":"How can I parse ~german custom formatted dates in java?","body":"<p>This runs for me:</p>\n<pre><code>public class Main {\n    public static void main(String[] args)  {\n        String txt = &quot;15-Aug-2023&quot;;\n        DateTimeFormatter format =  new DateTimeFormatterBuilder()\n                .appendPattern(&quot;dd-LLL-yyyy&quot;)\n                .toFormatter(Locale.GERMAN);\n        System.out.println(LocalDate.parse(txt, format));\n    }\n}\n</code></pre>\n<p>Prints: 2023-08-15</p>\n<p><a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html</a></p>\n"}],"owner":{"account_id":1399667,"reputation":347,"user_id":1328673,"accept_rate":22,"display_name":"MS13"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":53,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1698211117,"answer_count":1,"score":0,"last_activity_date":1698171871,"creation_date":1698170103,"question_id":77354374,"body_markdown":"I want to parse to `LocalDate` the dates I receive in a format like this but with german months:\r\n\r\n - 15-Aug-2023 \r\n - 30-Mai-2024 \r\n - 13-Okt-2021\r\n - 31-Mrz-2034\r\n - 02-Dez-2013\r\n\r\nI simplified the code that should parse these formatted dates (months are in german) but still it doesnt&#39; work on jdk 11.0.7 and openjdk 11.0.13\r\n\r\n        public static void main(String args[]) {\r\n            String txt = &quot;15-Aug-2023&quot;;\r\n            DateTimeFormatter format =  new DateTimeFormatterBuilder()\r\n                    .appendPattern(&quot;dd-MMM-yyyy&quot;)\r\n                    .toFormatter(Locale.GERMAN);\r\n            LocalDate.parse(txt, format);\r\n        }\r\n\r\nthrows exception:\r\n\r\n&gt; Exception in thread &quot;main&quot; java.time.format.DateTimeParseException:\r\n&gt; Text &#39;15-Aug-2023&#39; could not be parsed at index 3\r\n\r\nWhat am I missing?\r\n\r\nPS just noticed that if I do:\r\n\r\n    System.out.println(format.format(LocalDate.now()));\r\n\r\nI get: \r\n\r\n&gt; 24-Okt.-2023\r\n\r\nHow can I overcome this unexpected dot?","title":"How can I parse ~german custom formatted dates in java?","body":"<p>I want to parse to <code>LocalDate</code> the dates I receive in a format like this but with german months:</p>\n<ul>\n<li>15-Aug-2023</li>\n<li>30-Mai-2024</li>\n<li>13-Okt-2021</li>\n<li>31-Mrz-2034</li>\n<li>02-Dez-2013</li>\n</ul>\n<p>I simplified the code that should parse these formatted dates (months are in german) but still it doesnt' work on jdk 11.0.7 and openjdk 11.0.13</p>\n<pre><code>    public static void main(String args[]) {\n        String txt = &quot;15-Aug-2023&quot;;\n        DateTimeFormatter format =  new DateTimeFormatterBuilder()\n                .appendPattern(&quot;dd-MMM-yyyy&quot;)\n                .toFormatter(Locale.GERMAN);\n        LocalDate.parse(txt, format);\n    }\n</code></pre>\n<p>throws exception:</p>\n<blockquote>\n<p>Exception in thread &quot;main&quot; java.time.format.DateTimeParseException:\nText '15-Aug-2023' could not be parsed at index 3</p>\n</blockquote>\n<p>What am I missing?</p>\n<p>PS just noticed that if I do:</p>\n<pre><code>System.out.println(format.format(LocalDate.now()));\n</code></pre>\n<p>I get:</p>\n<blockquote>\n<p>24-Okt.-2023</p>\n</blockquote>\n<p>How can I overcome this unexpected dot?</p>\n"},{"tags":["java","json","jsonpath","json-path-expression","jayway"],"comments":[{"owner":{"account_id":7887635,"reputation":175,"user_id":5959064,"display_name":"Mohammed Abdullah"},"score":0,"creation_date":1606661482,"post_id":63318501,"comment_id":115022079,"body_markdown":"It is working fine for Example 1...whereas for Example 2...it is retrieving value of innerBook1 category also...but ideally it should not.","body":"It is working fine for Example 1...whereas for Example 2...it is retrieving value of innerBook1 category also...but ideally it should not."},{"owner":{"account_id":7887635,"reputation":175,"user_id":5959064,"display_name":"Mohammed Abdullah"},"score":0,"creation_date":1606663921,"post_id":63318501,"comment_id":115022776,"body_markdown":"Yes...from Example 1...InnerBook1.category is ignoring but for Example 2 InnerBook1.category is including in response.","body":"Yes...from Example 1...InnerBook1.category is ignoring but for Example 2 InnerBook1.category is including in response."},{"owner":{"account_id":7887635,"reputation":175,"user_id":5959064,"display_name":"Mohammed Abdullah"},"score":0,"creation_date":1606664605,"post_id":63318501,"comment_id":115022939,"body_markdown":"Requirement is for both Examples ..need to retrieve only InnerBook category alone, because in Jpath Expression InnerBook1 not defined, because of Deep copy currently it is pulling value of innerBook1 category value also, Ideally it should not. I added Expected Results for Both Examples. Please look into it and if you find any solution, it will be really helpful","body":"Requirement is for both Examples ..need to retrieve only InnerBook category alone, because in Jpath Expression InnerBook1 not defined, because of Deep copy currently it is pulling value of innerBook1 category value also, Ideally it should not. I added Expected Results for Both Examples. Please look into it and if you find any solution, it will be really helpful"}],"answers":[{"comments":[{"owner":{"account_id":7887635,"reputation":175,"user_id":5959064,"display_name":"Mohammed Abdullah"},"score":0,"creation_date":1605537420,"post_id":64791953,"comment_id":114672862,"body_markdown":"Thanks for the answer it is working fine for array object, but it is  not working for Json object whereas innerBook is an Object not an array. Can you please provide Jpath expression to get both jsonobject as well as jsonarray;","body":"Thanks for the answer it is working fine for array object, but it is  not working for Json object whereas innerBook is an Object not an array. Can you please provide Jpath expression to get both jsonobject as well as jsonarray;"},{"owner":{"account_id":11301259,"reputation":18357,"user_id":8291949,"accept_rate":100,"display_name":"wp78de"},"score":0,"creation_date":1605547242,"post_id":64791953,"comment_id":114677355,"body_markdown":"@MohammedAbdullah Glad to hear there is some progress; can you provide an updated sample to avoid confusion?","body":"@MohammedAbdullah Glad to hear there is some progress; can you provide an updated sample to avoid confusion?"},{"owner":{"account_id":7887635,"reputation":175,"user_id":5959064,"display_name":"Mohammed Abdullah"},"score":0,"creation_date":1605549225,"post_id":64791953,"comment_id":114678195,"body_markdown":"Added JsonObject Example, can you please help out to retrieve value using single Jpath Expression.","body":"Added JsonObject Example, can you please help out to retrieve value using single Jpath Expression."},{"owner":{"account_id":11301259,"reputation":18357,"user_id":8291949,"accept_rate":100,"display_name":"wp78de"},"score":0,"creation_date":1605556397,"post_id":64791953,"comment_id":114681185,"body_markdown":"@MohammedAbdullah is this a theoretical question or do you use this somewhere?","body":"@MohammedAbdullah is this a theoretical question or do you use this somewhere?"},{"owner":{"account_id":11301259,"reputation":18357,"user_id":8291949,"accept_rate":100,"display_name":"wp78de"},"score":0,"creation_date":1606667361,"post_id":64791953,"comment_id":115023819,"body_markdown":"@MohammedAbdullah As hinted, I think you need to run two queries to handle varied input. The following filter could help you to determine if query 1 or 2 should be used: `$.store..book..[?(@.innerBook[1].category empty false)]`","body":"@MohammedAbdullah As hinted, I think you need to run two queries to handle varied input. The following filter could help you to determine if query 1 or 2 should be used: <code>$.store..book..[?(@.innerBook[1].category empty false)]</code>"},{"owner":{"account_id":7887635,"reputation":175,"user_id":5959064,"display_name":"Mohammed Abdullah"},"score":0,"creation_date":1606667633,"post_id":64791953,"comment_id":115023907,"body_markdown":"So its not possible to run in Single query, In My Current Application I can pass only one query(One JpathExpression) per Attribute.","body":"So its not possible to run in Single query, In My Current Application I can pass only one query(One JpathExpression) per Attribute."},{"owner":{"account_id":11301259,"reputation":18357,"user_id":8291949,"accept_rate":100,"display_name":"wp78de"},"score":0,"creation_date":1606668098,"post_id":64791953,"comment_id":115024023,"body_markdown":"Maybe someone else can suggest a oneliner but I don&#39;t see it right now. I might give it another try.","body":"Maybe someone else can suggest a oneliner but I don&#39;t see it right now. I might give it another try."}],"tags":[],"owner":{"account_id":11301259,"reputation":18357,"user_id":8291949,"accept_rate":100,"display_name":"wp78de"},"comment_count":7,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1606663762,"creation_date":1605118640,"answer_id":64791953,"question_id":63318501,"body_markdown":"A little late, however, we do not need to use recursive descent `..` after `innerBook` to walk the items in the array; with Jayway&#39;s we can use `innerBook[*].category` to retrieve the desired result for example 1:\r\n\r\n    $.store..book..innerBook[*].category\r\n\r\nExample 2 requires to remove the array accessor:\r\n\r\n    $.store..book..innerBook.category \r\n\r\nYou cannot have `innerBook` as array and object in one JSON since it wouldn&#39;t be valid. \r\n\r\nIf you have an API (or so) that serves JSON with an `innerbook` property of  array or object type (which would be a badly designed API since the whole point of an API is to have expected responses) you could either query both paths or make the access of categories depending on the existence of `innerBook1`:\r\n\r\n    $.store.book..innerBook[?(@.innerBook1)]..category\r\n\r\nWhich only returns for both examples\r\n\r\n    [\r\n       &quot;innerReference1&quot;,\r\n       &quot;innerBook1Ref1&quot;\r\n    ]\r\n\r\nTry it online [here][1].\r\n\r\n\r\n  [1]: https://jsonpath.herokuapp.com/","title":"Jayway JSONPath Expession for Both Object and Array","body":"<p>A little late, however, we do not need to use recursive descent <code>..</code> after <code>innerBook</code> to walk the items in the array; with Jayway's we can use <code>innerBook[*].category</code> to retrieve the desired result for example 1:</p>\n<pre><code>$.store..book..innerBook[*].category\n</code></pre>\n<p>Example 2 requires to remove the array accessor:</p>\n<pre><code>$.store..book..innerBook.category \n</code></pre>\n<p>You cannot have <code>innerBook</code> as array and object in one JSON since it wouldn't be valid.</p>\n<p>If you have an API (or so) that serves JSON with an <code>innerbook</code> property of  array or object type (which would be a badly designed API since the whole point of an API is to have expected responses) you could either query both paths or make the access of categories depending on the existence of <code>innerBook1</code>:</p>\n<pre><code>$.store.book..innerBook[?(@.innerBook1)]..category\n</code></pre>\n<p>Which only returns for both examples</p>\n<pre><code>[\n   &quot;innerReference1&quot;,\n   &quot;innerBook1Ref1&quot;\n]\n</code></pre>\n<p>Try it online <a href=\"https://jsonpath.herokuapp.com/\" rel=\"nofollow noreferrer\">here</a>.</p>\n"},{"comments":[{"owner":{"account_id":21103482,"reputation":317,"user_id":15512947,"display_name":"thalhamm"},"score":0,"creation_date":1698171566,"post_id":77348299,"comment_id":136370566,"body_markdown":"Related GH issue: https://github.com/json-path/JsonPath/issues/854","body":"Related GH issue: <a href=\"https://github.com/json-path/JsonPath/issues/854\" rel=\"nofollow noreferrer\">github.com/json-path/JsonPath/issues/854</a>"}],"tags":[],"owner":{"account_id":21103482,"reputation":317,"user_id":15512947,"display_name":"thalhamm"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1698171317,"creation_date":1698094801,"answer_id":77348299,"question_id":63318501,"body_markdown":"Maybe a simpler example would be the following. \r\n```\r\n[\r\n  {\r\n    &quot;title&quot;: &quot;The Doe&quot;,\r\n    &quot;author&quot;: {\r\n      &quot;name&quot;: &quot;John Doe&quot;\r\n    }\r\n  },\r\n  {\r\n    &quot;title&quot;: &quot;The Does&quot;,\r\n    &quot;author&quot;: [\r\n      {\r\n        &quot;name&quot;: &quot;John Doe&quot;\r\n      },\r\n      {\r\n        &quot;name&quot;: &quot;Jane Doe&quot;\r\n      }\r\n    ]\r\n  }\r\n]\r\n```\r\n\r\nI believe the JSON path we are looking for can return the names of all authors without a deep scan for name (i.e., `..name`)\r\n","title":"Jayway JSONPath Expession for Both Object and Array","body":"<p>Maybe a simpler example would be the following.</p>\n<pre><code>[\n  {\n    &quot;title&quot;: &quot;The Doe&quot;,\n    &quot;author&quot;: {\n      &quot;name&quot;: &quot;John Doe&quot;\n    }\n  },\n  {\n    &quot;title&quot;: &quot;The Does&quot;,\n    &quot;author&quot;: [\n      {\n        &quot;name&quot;: &quot;John Doe&quot;\n      },\n      {\n        &quot;name&quot;: &quot;Jane Doe&quot;\n      }\n    ]\n  }\n]\n</code></pre>\n<p>I believe the JSON path we are looking for can return the names of all authors without a deep scan for name (i.e., <code>..name</code>)</p>\n"},{"tags":[],"owner":{"account_id":13009011,"reputation":1105,"user_id":9402689,"display_name":"Raymond Choi"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698131615,"creation_date":1698131615,"answer_id":77350148,"question_id":63318501,"body_markdown":"It seems that JSONPath can&#39;t return your expected result using the same expression on both object and array.  You may try another JSON library _Josson_ because it handles both object and array with the same expression.\r\n\r\nhttps://github.com/octomix/josson\r\n\r\n__Example 1__\r\n\r\n    Josson ex1 = Josson.fromJsonString(\r\n        &quot;{&quot; +\r\n        &quot;    \\&quot;store\\&quot;: {&quot; +\r\n        &quot;        \\&quot;book\\&quot;: [&quot; +\r\n        &quot;        {&quot; +\r\n        &quot;                \\&quot;innerBook\\&quot;: [&quot; +\r\n        &quot;                    {&quot; +\r\n        &quot;                        \\&quot;category\\&quot;: \\&quot;innerReference1\\&quot;,&quot; +\r\n        &quot;                        \\&quot;author\\&quot;: \\&quot;Nigel Rees\\&quot;,&quot; +\r\n        &quot;                        \\&quot;innerBook1\\&quot;: [&quot; +\r\n        &quot;                            {&quot; +\r\n        &quot;                                \\&quot;category\\&quot;: \\&quot;innerBook1Ref1\\&quot;&quot; +\r\n        &quot;                            }&quot; +\r\n        &quot;                        ]&quot; +\r\n        &quot;                    },&quot; +\r\n        &quot;                    {&quot; +\r\n        &quot;                        \\&quot;category\\&quot;: \\&quot;innerReference2\\&quot;,&quot; +\r\n        &quot;                        \\&quot;author\\&quot;: \\&quot;Nigel Rees\\&quot;&quot; +\r\n        &quot;                    }&quot; +\r\n        &quot;                ]&quot; +\r\n        &quot;            }&quot; +\r\n        &quot;        ],&quot; +\r\n        &quot;        \\&quot;bicycle\\&quot;: {&quot; +\r\n        &quot;            \\&quot;color\\&quot;: \\&quot;red\\&quot;,&quot; +\r\n        &quot;            \\&quot;price\\&quot;: 19.95&quot; +\r\n        &quot;        }&quot; +\r\n        &quot;    },&quot; +\r\n        &quot;    \\&quot;expensive\\&quot;: 10&quot; +\r\n        &quot;}&quot;);\r\n\r\n_Query_\r\n\r\n    JsonNode node = ex1.getNode(&quot;store.book.innerBook.category&quot;);\r\n    System.out.println(node.toPrettyString());\r\n    //Output: [ &quot;innerReference1&quot;, &quot;innerReference2&quot; ]\r\n\r\n__Example 2__\r\n\r\n    Josson ex2 = Josson.fromJsonString(\r\n        &quot;{&quot; +\r\n        &quot;    \\&quot;store\\&quot;: {&quot; +\r\n        &quot;        \\&quot;book\\&quot;: [&quot; +\r\n        &quot;        {&quot; +\r\n        &quot;                \\&quot;innerBook\\&quot;: &quot; +\r\n        &quot;                    {&quot; +\r\n        &quot;                        \\&quot;category\\&quot;: \\&quot;innerReference1\\&quot;,&quot; +\r\n        &quot;                        \\&quot;author\\&quot;: \\&quot;Nigel Rees\\&quot;,&quot; +\r\n        &quot;                        \\&quot;innerBook1\\&quot;: [&quot; +\r\n        &quot;                            {&quot; +\r\n        &quot;                                \\&quot;category\\&quot;: \\&quot;innerBook1Ref1\\&quot;&quot; +\r\n        &quot;                            }&quot; +\r\n        &quot;                        ]&quot; +\r\n        &quot;                    }&quot; +\r\n        &quot;                &quot; +\r\n        &quot;            }&quot; +\r\n        &quot;        ],&quot; +\r\n        &quot;        \\&quot;bicycle\\&quot;: {&quot; +\r\n        &quot;            \\&quot;color\\&quot;: \\&quot;red\\&quot;,&quot; +\r\n        &quot;            \\&quot;price\\&quot;: 19.95&quot; +\r\n        &quot;        }&quot; +\r\n        &quot;    },&quot; +\r\n        &quot;    \\&quot;expensive\\&quot;: 10&quot; +\r\n        &quot;}&quot;);\r\n\r\n_Query_\r\n\r\n    JsonNode node = ex2.getNode(&quot;store.book.innerBook.category&quot;);\r\n    System.out.println(node.toPrettyString());\r\n    //Output: [ &quot;innerReference1&quot; ]\r\n\r\n__Example 3__\r\n\r\nSuggested by @thalhamm\r\n\r\n    Josson ex3 = Josson.fromJsonString(\r\n        &quot;[&quot; +\r\n        &quot;  {&quot; +\r\n        &quot;    \\&quot;title\\&quot;: \\&quot;The Doe\\&quot;,&quot; +\r\n        &quot;    \\&quot;author\\&quot;: {&quot; +\r\n        &quot;      \\&quot;name\\&quot;: \\&quot;John Doe\\&quot;&quot; +\r\n        &quot;    }&quot; +\r\n        &quot;  },&quot; +\r\n        &quot;  {&quot; +\r\n        &quot;    \\&quot;title\\&quot;: \\&quot;The Does\\&quot;,&quot; +\r\n        &quot;    \\&quot;author\\&quot;: [&quot; +\r\n        &quot;      {&quot; +\r\n        &quot;        \\&quot;name\\&quot;: \\&quot;John Doe\\&quot;&quot; +\r\n        &quot;      },&quot; +\r\n        &quot;      {&quot; +\r\n        &quot;        \\&quot;name\\&quot;: \\&quot;Jane Doe\\&quot;&quot; +\r\n        &quot;      }&quot; +\r\n        &quot;    ]&quot; +\r\n        &quot;  }&quot; +\r\n        &quot;]&quot;);\r\n\r\n_Query_\r\n\r\n    JsonNode node = ex3.getNode(&quot;author.name&quot;);\r\n    System.out.println(node.toPrettyString());\r\n    //Output: [ &quot;John Doe&quot;, &quot;John Doe&quot;, &quot;Jane Doe&quot; ]","title":"Jayway JSONPath Expession for Both Object and Array","body":"<p>It seems that JSONPath can't return your expected result using the same expression on both object and array.  You may try another JSON library <em>Josson</em> because it handles both object and array with the same expression.</p>\n<p><a href=\"https://github.com/octomix/josson\" rel=\"nofollow noreferrer\">https://github.com/octomix/josson</a></p>\n<p><strong>Example 1</strong></p>\n<pre><code>Josson ex1 = Josson.fromJsonString(\n    &quot;{&quot; +\n    &quot;    \\&quot;store\\&quot;: {&quot; +\n    &quot;        \\&quot;book\\&quot;: [&quot; +\n    &quot;        {&quot; +\n    &quot;                \\&quot;innerBook\\&quot;: [&quot; +\n    &quot;                    {&quot; +\n    &quot;                        \\&quot;category\\&quot;: \\&quot;innerReference1\\&quot;,&quot; +\n    &quot;                        \\&quot;author\\&quot;: \\&quot;Nigel Rees\\&quot;,&quot; +\n    &quot;                        \\&quot;innerBook1\\&quot;: [&quot; +\n    &quot;                            {&quot; +\n    &quot;                                \\&quot;category\\&quot;: \\&quot;innerBook1Ref1\\&quot;&quot; +\n    &quot;                            }&quot; +\n    &quot;                        ]&quot; +\n    &quot;                    },&quot; +\n    &quot;                    {&quot; +\n    &quot;                        \\&quot;category\\&quot;: \\&quot;innerReference2\\&quot;,&quot; +\n    &quot;                        \\&quot;author\\&quot;: \\&quot;Nigel Rees\\&quot;&quot; +\n    &quot;                    }&quot; +\n    &quot;                ]&quot; +\n    &quot;            }&quot; +\n    &quot;        ],&quot; +\n    &quot;        \\&quot;bicycle\\&quot;: {&quot; +\n    &quot;            \\&quot;color\\&quot;: \\&quot;red\\&quot;,&quot; +\n    &quot;            \\&quot;price\\&quot;: 19.95&quot; +\n    &quot;        }&quot; +\n    &quot;    },&quot; +\n    &quot;    \\&quot;expensive\\&quot;: 10&quot; +\n    &quot;}&quot;);\n</code></pre>\n<p><em>Query</em></p>\n<pre><code>JsonNode node = ex1.getNode(&quot;store.book.innerBook.category&quot;);\nSystem.out.println(node.toPrettyString());\n//Output: [ &quot;innerReference1&quot;, &quot;innerReference2&quot; ]\n</code></pre>\n<p><strong>Example 2</strong></p>\n<pre><code>Josson ex2 = Josson.fromJsonString(\n    &quot;{&quot; +\n    &quot;    \\&quot;store\\&quot;: {&quot; +\n    &quot;        \\&quot;book\\&quot;: [&quot; +\n    &quot;        {&quot; +\n    &quot;                \\&quot;innerBook\\&quot;: &quot; +\n    &quot;                    {&quot; +\n    &quot;                        \\&quot;category\\&quot;: \\&quot;innerReference1\\&quot;,&quot; +\n    &quot;                        \\&quot;author\\&quot;: \\&quot;Nigel Rees\\&quot;,&quot; +\n    &quot;                        \\&quot;innerBook1\\&quot;: [&quot; +\n    &quot;                            {&quot; +\n    &quot;                                \\&quot;category\\&quot;: \\&quot;innerBook1Ref1\\&quot;&quot; +\n    &quot;                            }&quot; +\n    &quot;                        ]&quot; +\n    &quot;                    }&quot; +\n    &quot;                &quot; +\n    &quot;            }&quot; +\n    &quot;        ],&quot; +\n    &quot;        \\&quot;bicycle\\&quot;: {&quot; +\n    &quot;            \\&quot;color\\&quot;: \\&quot;red\\&quot;,&quot; +\n    &quot;            \\&quot;price\\&quot;: 19.95&quot; +\n    &quot;        }&quot; +\n    &quot;    },&quot; +\n    &quot;    \\&quot;expensive\\&quot;: 10&quot; +\n    &quot;}&quot;);\n</code></pre>\n<p><em>Query</em></p>\n<pre><code>JsonNode node = ex2.getNode(&quot;store.book.innerBook.category&quot;);\nSystem.out.println(node.toPrettyString());\n//Output: [ &quot;innerReference1&quot; ]\n</code></pre>\n<p><strong>Example 3</strong></p>\n<p>Suggested by @thalhamm</p>\n<pre><code>Josson ex3 = Josson.fromJsonString(\n    &quot;[&quot; +\n    &quot;  {&quot; +\n    &quot;    \\&quot;title\\&quot;: \\&quot;The Doe\\&quot;,&quot; +\n    &quot;    \\&quot;author\\&quot;: {&quot; +\n    &quot;      \\&quot;name\\&quot;: \\&quot;John Doe\\&quot;&quot; +\n    &quot;    }&quot; +\n    &quot;  },&quot; +\n    &quot;  {&quot; +\n    &quot;    \\&quot;title\\&quot;: \\&quot;The Does\\&quot;,&quot; +\n    &quot;    \\&quot;author\\&quot;: [&quot; +\n    &quot;      {&quot; +\n    &quot;        \\&quot;name\\&quot;: \\&quot;John Doe\\&quot;&quot; +\n    &quot;      },&quot; +\n    &quot;      {&quot; +\n    &quot;        \\&quot;name\\&quot;: \\&quot;Jane Doe\\&quot;&quot; +\n    &quot;      }&quot; +\n    &quot;    ]&quot; +\n    &quot;  }&quot; +\n    &quot;]&quot;);\n</code></pre>\n<p><em>Query</em></p>\n<pre><code>JsonNode node = ex3.getNode(&quot;author.name&quot;);\nSystem.out.println(node.toPrettyString());\n//Output: [ &quot;John Doe&quot;, &quot;John Doe&quot;, &quot;Jane Doe&quot; ]\n</code></pre>\n"}],"owner":{"account_id":7887635,"reputation":175,"user_id":5959064,"display_name":"Mohammed Abdullah"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1101,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":3,"score":1,"last_activity_date":1698171317,"creation_date":1596908740,"question_id":63318501,"body_markdown":"I am having to trouble to retrieve value if parent element can be JSONArray as well as JSONObject. For that I used Deepcopy syntax to retrieve it. Now Problem is am getting additional values if child attribute exists in Inner Array also.\r\n\r\nEg: \r\nJpathExpression:\r\n\r\n    $.store..book..innerBook..category\r\n\r\nResult is :\r\n\r\n    [\r\n       &quot;innerReference1&quot;,\r\n       &quot;innerBook1Ref1&quot;,\r\n       &quot;innerReference2&quot;\r\n    ]\r\n\r\nExample 1 Expected Result is :\r\n\r\n    [\r\n       &quot;innerReference1&quot;,\r\n       &quot;innerReference2&quot;\r\n    ]\r\n\r\nExample 1: \r\n\r\n    {\r\n    \t&quot;store&quot;: {\r\n    \t\t&quot;book&quot;: [\r\n    \t\t{\r\n    \t\t\t\t&quot;innerBook&quot;: [\r\n    \t\t\t\t\t{\r\n    \t\t\t\t\t\t&quot;category&quot;: &quot;innerReference1&quot;,\r\n    \t\t\t\t\t\t&quot;author&quot;: &quot;Nigel Rees&quot;,\r\n    \t\t\t\t\t\t&quot;innerBook1&quot;: [\r\n    \t\t\t\t\t\t\t{\r\n    \t\t\t\t\t\t\t\t&quot;category&quot;: &quot;innerBook1Ref1&quot;\r\n    \t\t\t\t\t\t\t}\r\n    \t\t\t\t\t\t]\r\n    \t\t\t\t\t},\r\n    \t\t\t\t\t{\r\n    \t\t\t\t\t\t&quot;category&quot;: &quot;innerReference2&quot;,\r\n    \t\t\t\t\t\t&quot;author&quot;: &quot;Nigel Rees&quot;\r\n    \t\t\t\t\t}\r\n    \t\t\t\t]\r\n    \t\t\t}\r\n    \t\t],\r\n    \t\t&quot;bicycle&quot;: {\r\n    \t\t\t&quot;color&quot;: &quot;red&quot;,\r\n    \t\t\t&quot;price&quot;: 19.95\r\n    \t\t}\r\n    \t},\r\n    \t&quot;expensive&quot;: 10\r\n    }\r\n\r\nExample 2:\r\n\r\n    {\r\n        &quot;store&quot;: {\r\n            &quot;book&quot;: [\r\n            {\r\n                    &quot;innerBook&quot;: \r\n                        {\r\n                            &quot;category&quot;: &quot;innerReference1&quot;,\r\n                            &quot;author&quot;: &quot;Nigel Rees&quot;,\r\n                            &quot;innerBook1&quot;: [\r\n                                {\r\n                                    &quot;category&quot;: &quot;innerBook1Ref1&quot;\r\n                                }\r\n                            ]\r\n                        }\r\n                    \r\n                }\r\n            ],\r\n            &quot;bicycle&quot;: {\r\n                &quot;color&quot;: &quot;red&quot;,\r\n                &quot;price&quot;: 19.95\r\n            }\r\n        },\r\n        &quot;expensive&quot;: 10\r\n    }\r\n\r\nExample 2 Expected Result is :\r\n\r\n    [\r\n       &quot;innerReference1&quot;\r\n    ]","title":"Jayway JSONPath Expession for Both Object and Array","body":"<p>I am having to trouble to retrieve value if parent element can be JSONArray as well as JSONObject. For that I used Deepcopy syntax to retrieve it. Now Problem is am getting additional values if child attribute exists in Inner Array also.</p>\n<p>Eg:\nJpathExpression:</p>\n<pre><code>$.store..book..innerBook..category\n</code></pre>\n<p>Result is :</p>\n<pre><code>[\n   &quot;innerReference1&quot;,\n   &quot;innerBook1Ref1&quot;,\n   &quot;innerReference2&quot;\n]\n</code></pre>\n<p>Example 1 Expected Result is :</p>\n<pre><code>[\n   &quot;innerReference1&quot;,\n   &quot;innerReference2&quot;\n]\n</code></pre>\n<p>Example 1:</p>\n<pre><code>{\n    &quot;store&quot;: {\n        &quot;book&quot;: [\n        {\n                &quot;innerBook&quot;: [\n                    {\n                        &quot;category&quot;: &quot;innerReference1&quot;,\n                        &quot;author&quot;: &quot;Nigel Rees&quot;,\n                        &quot;innerBook1&quot;: [\n                            {\n                                &quot;category&quot;: &quot;innerBook1Ref1&quot;\n                            }\n                        ]\n                    },\n                    {\n                        &quot;category&quot;: &quot;innerReference2&quot;,\n                        &quot;author&quot;: &quot;Nigel Rees&quot;\n                    }\n                ]\n            }\n        ],\n        &quot;bicycle&quot;: {\n            &quot;color&quot;: &quot;red&quot;,\n            &quot;price&quot;: 19.95\n        }\n    },\n    &quot;expensive&quot;: 10\n}\n</code></pre>\n<p>Example 2:</p>\n<pre><code>{\n    &quot;store&quot;: {\n        &quot;book&quot;: [\n        {\n                &quot;innerBook&quot;: \n                    {\n                        &quot;category&quot;: &quot;innerReference1&quot;,\n                        &quot;author&quot;: &quot;Nigel Rees&quot;,\n                        &quot;innerBook1&quot;: [\n                            {\n                                &quot;category&quot;: &quot;innerBook1Ref1&quot;\n                            }\n                        ]\n                    }\n                \n            }\n        ],\n        &quot;bicycle&quot;: {\n            &quot;color&quot;: &quot;red&quot;,\n            &quot;price&quot;: 19.95\n        }\n    },\n    &quot;expensive&quot;: 10\n}\n</code></pre>\n<p>Example 2 Expected Result is :</p>\n<pre><code>[\n   &quot;innerReference1&quot;\n]\n</code></pre>\n"},{"tags":["java","oracle","connection","recover"],"answers":[{"comments":[{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1332147547,"post_id":9767173,"comment_id":12429163,"body_markdown":"&quot;The connections to the database server are being reset and the client is not notified by the database driver.&quot; What do you call the exception then?","body":"&quot;The connections to the database server are being reset and the client is not notified by the database driver.&quot; What do you call the exception then?"}],"tags":[],"owner":{"account_id":1181272,"reputation":11208,"user_id":1544250,"accept_rate":82,"display_name":"Korhan Ozturk"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1332146787,"creation_date":1332146787,"answer_id":9767173,"question_id":9766168,"body_markdown":"Followings could be the possibilities which could be causing the exception:\r\n\r\n 1. Network problem: That is the network between the database and application server causing  the physical connection to be dropped after a period of time. It&#39;s probably due to a firewall running behind the network which is configured to kill db connections after a specified period of time. You may consider a workaround to maintain the connection alive all the time simply by re-configuring your application server. For Tomcat, you may try adding `validationQuery=&quot;select &#39;validationQuery&#39; from dua`l in the Tomcat datasource conf file (context.xml)\r\n\r\n 2. The connections to the database server are being reset and the client is not notified by the database driver. The problem in this case is that the Oracle driver is discovering that it&#39;s socket to the DBMS somehow (firewall again, maybe?) has been closed by the other end. You may consider setting your connection timeout (in the pool) shorter than the network/DB server timeout as a solution. ","title":"java.sql.SQLException: Io exception: Broken pipe how to recover without restart?","body":"<p>Followings could be the possibilities which could be causing the exception:</p>\n\n<ol>\n<li><p>Network problem: That is the network between the database and application server causing  the physical connection to be dropped after a period of time. It's probably due to a firewall running behind the network which is configured to kill db connections after a specified period of time. You may consider a workaround to maintain the connection alive all the time simply by re-configuring your application server. For Tomcat, you may try adding <code>validationQuery=\"select 'validationQuery' from dua</code>l in the Tomcat datasource conf file (context.xml)</p></li>\n<li><p>The connections to the database server are being reset and the client is not notified by the database driver. The problem in this case is that the Oracle driver is discovering that it's socket to the DBMS somehow (firewall again, maybe?) has been closed by the other end. You may consider setting your connection timeout (in the pool) shorter than the network/DB server timeout as a solution. </p></li>\n</ol>\n"}],"owner":{"account_id":365724,"reputation":23438,"user_id":710818,"accept_rate":82,"display_name":"user710818"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":44351,"favorite_count":0,"down_vote_count":0,"up_vote_count":10,"accepted_answer_id":9767173,"answer_count":1,"score":10,"last_activity_date":1698171212,"creation_date":1332140336,"question_id":9766168,"body_markdown":"In my application I use connection to Oracle, when connection lost and I try to re-connect I receive exception:\r\n\r\n    java.sql.SQLException: Io exception: Broken pipe\r\n        at oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:124)\r\n        at oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:161)\r\n        at oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:273)\r\n        at oracle.jdbc.driver.T4CStatement.fetch(T4CStatement.java:540)\r\n        at oracle.jdbc.driver.OracleResultSetImpl.close_or_fetch_from_next(OracleResultSetImpl.java:264)\r\n        at oracle.jdbc.driver.OracleResultSetImpl.next(OracleResultSetImpl.java:196)\r\n\r\nFor recover I need to restart application, does it possible recover without restart?\r\nThanks.","title":"java.sql.SQLException: Io exception: Broken pipe how to recover without restart?","body":"<p>In my application I use connection to Oracle, when connection lost and I try to re-connect I receive exception:</p>\n\n<pre><code>java.sql.SQLException: Io exception: Broken pipe\n    at oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:124)\n    at oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:161)\n    at oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:273)\n    at oracle.jdbc.driver.T4CStatement.fetch(T4CStatement.java:540)\n    at oracle.jdbc.driver.OracleResultSetImpl.close_or_fetch_from_next(OracleResultSetImpl.java:264)\n    at oracle.jdbc.driver.OracleResultSetImpl.next(OracleResultSetImpl.java:196)\n</code></pre>\n\n<p>For recover I need to restart application, does it possible recover without restart?\nThanks.</p>\n"},{"tags":["java","javafx"],"comments":[{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":0,"creation_date":1509986392,"post_id":47140754,"comment_id":81233222,"body_markdown":"What is `root` here? Can you create a [MCVE]?","body":"What is <code>root</code> here? Can you create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>?"},{"owner":{"account_id":11132960,"reputation":51,"user_id":8172372,"display_name":"sp8n-4k"},"score":0,"creation_date":1509988566,"post_id":47140754,"comment_id":81234614,"body_markdown":"@James_D Sorry, the root is a stackpane, I changed the example to reflect that.","body":"@James_D Sorry, the root is a stackpane, I changed the example to reflect that."}],"answers":[{"tags":[],"owner":{"account_id":11132960,"reputation":51,"user_id":8172372,"display_name":"sp8n-4k"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1510329426,"creation_date":1510329426,"answer_id":47226681,"question_id":47140754,"body_markdown":"Mystery solved! Playing with the SplitPane&#39;s divider bindings seemed to be the solution. It isn&#39;t perfect, as sometimes the image is not flush with either top/bottom nor left/right edges depending on the width/height of the Stage, but it gets the job done.\r\n\r\n    Platform.runLater(() -&gt; {\r\n        image.fitWidthProperty().bind(splitPane.getDividers().get(0).positionProperty().multiply(splitPane.widthProperty()));\r\n        image.fitHeightProperty().bind(splitPane.getDividers().get(0).positionProperty().multiply(splitPane.heightProperty()));\r\n        imgWebCamCapturedImage.setPreserveRatio(true);\r\n    });","title":"Resize ImageView within SplitPane","body":"<p>Mystery solved! Playing with the SplitPane's divider bindings seemed to be the solution. It isn't perfect, as sometimes the image is not flush with either top/bottom nor left/right edges depending on the width/height of the Stage, but it gets the job done.</p>\n\n<pre><code>Platform.runLater(() -&gt; {\n    image.fitWidthProperty().bind(splitPane.getDividers().get(0).positionProperty().multiply(splitPane.widthProperty()));\n    image.fitHeightProperty().bind(splitPane.getDividers().get(0).positionProperty().multiply(splitPane.heightProperty()));\n    imgWebCamCapturedImage.setPreserveRatio(true);\n});\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11829169,"reputation":476,"user_id":9943190,"display_name":"maroc"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698171140,"creation_date":1698171140,"answer_id":77354491,"question_id":47140754,"body_markdown":"For anyone else looking for a way to resize an ImageView in a SplitPane, you can use a StackPane.\r\n\r\n        val iv = ImageView()\r\n        val vbox = VBox()\r\n        VBox.setVgrow(vbox, Priority.ALWAYS)\r\n        vbox.widthProperty().addListener { observable, oldValue, newValue -&gt;\r\n            iv.fitWidth = newValue.toDouble()\r\n        }\r\n        vbox.heightProperty().addListener { observable, oldValue, newValue -&gt;\r\n            iv.fitHeight = newValue.toDouble()\r\n        }\r\n        iv.isManaged = false\r\n        val stack = StackPane(vbox, iv)\r\n        val sp = SplitPane(VBox(), stack)\r\n\r\nThis creates a stack pane containing an empty VBox and an ImageView.  When the VBox is resized, the ImageView fit properties are changed to match the new size.  Since the image view &quot;isManaged&quot; is set to false, its size is ignored for deciding the layout allowing the split pane to be dragged to change the size of the VBox in the bottom of the stack.\r\n    ","title":"Resize ImageView within SplitPane","body":"<p>For anyone else looking for a way to resize an ImageView in a SplitPane, you can use a StackPane.</p>\n<pre><code>    val iv = ImageView()\n    val vbox = VBox()\n    VBox.setVgrow(vbox, Priority.ALWAYS)\n    vbox.widthProperty().addListener { observable, oldValue, newValue -&gt;\n        iv.fitWidth = newValue.toDouble()\n    }\n    vbox.heightProperty().addListener { observable, oldValue, newValue -&gt;\n        iv.fitHeight = newValue.toDouble()\n    }\n    iv.isManaged = false\n    val stack = StackPane(vbox, iv)\n    val sp = SplitPane(VBox(), stack)\n</code></pre>\n<p>This creates a stack pane containing an empty VBox and an ImageView.  When the VBox is resized, the ImageView fit properties are changed to match the new size.  Since the image view &quot;isManaged&quot; is set to false, its size is ignored for deciding the layout allowing the split pane to be dragged to change the size of the VBox in the bottom of the stack.</p>\n"}],"owner":{"account_id":11132960,"reputation":51,"user_id":8172372,"display_name":"sp8n-4k"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":389,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"accepted_answer_id":47226681,"answer_count":2,"score":1,"last_activity_date":1698171140,"creation_date":1509983308,"question_id":47140754,"body_markdown":"I have an ImageView wrapped in a StackPane that is added to the top section of a SplitPane. When I move the SplitPane&#39;s divider, I want the ImageView to resize to fit the allotted space, while also preserving the ImageView&#39;s size ratio. I have attempted to achieve this with the following code snippet:\r\n\r\n    Platform.runLater(() -&gt; {\r\n            image.fitHeightProperty().bind(stackpane.heightProperty());\r\n            image.fitWidthProperty().bind(stackpane.widthProperty());\r\n            image.setPreserveRatio(true);\r\n        });\r\n\r\nThe problem with this however is that the ImageView will only grow, but not shrink. How can I fix this?","title":"Resize ImageView within SplitPane","body":"<p>I have an ImageView wrapped in a StackPane that is added to the top section of a SplitPane. When I move the SplitPane's divider, I want the ImageView to resize to fit the allotted space, while also preserving the ImageView's size ratio. I have attempted to achieve this with the following code snippet:</p>\n\n<pre><code>Platform.runLater(() -&gt; {\n        image.fitHeightProperty().bind(stackpane.heightProperty());\n        image.fitWidthProperty().bind(stackpane.widthProperty());\n        image.setPreserveRatio(true);\n    });\n</code></pre>\n\n<p>The problem with this however is that the ImageView will only grow, but not shrink. How can I fix this?</p>\n"},{"tags":["java","algorithm","graph","subgraph"],"comments":[{"owner":{"account_id":53648,"reputation":19565,"user_id":160406,"accept_rate":51,"display_name":"Ollie Glass"},"score":1,"creation_date":1251563392,"post_id":1348783,"comment_id":1188011,"body_markdown":"Thank you all, especially MAK and Agor. I&#39;m going to start with a flood fill and breadth first search then take it from there.","body":"Thank you all, especially MAK and Agor. I&#39;m going to start with a flood fill and breadth first search then take it from there."}],"answers":[{"tags":[],"owner":{"account_id":45632,"reputation":3511,"user_id":134596,"accept_rate":83,"display_name":"oggy"},"comment_count":0,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1251486741,"creation_date":1251486741,"answer_id":1348814,"question_id":1348783,"body_markdown":"I&#39;m assuming you want to find all the (strongly) connected components? For that you can use [Tarjan&#39;s algorithm][1] (a variant of DFS)\r\n\r\n  [1]: http://en.wikipedia.org/wiki/Tarjan&#39;s_strongly_connected_components_algorithm\r\n","title":"Finding all disconnected subgraphs in a graph","body":"<p>I'm assuming you want to find all the (strongly) connected components? For that you can use <a href=\"http://en.wikipedia.org/wiki/Tarjan&#39;s_strongly_connected_components_algorithm\" rel=\"nofollow noreferrer\">Tarjan's algorithm</a> (a variant of DFS)</p>\n"},{"comments":[{"owner":{"account_id":7967908,"reputation":542,"user_id":7528024,"accept_rate":86,"display_name":"SumakuTension"},"score":0,"creation_date":1588775886,"post_id":1348864,"comment_id":109029662,"body_markdown":"Wow this was exactly what I needed. It&#39;s the fastest if you&#39;re not interested in specific subgraph segmentation etc. The only question is where to start the search in the graph, but that depends on the specific graph ofc.","body":"Wow this was exactly what I needed. It&#39;s the fastest if you&#39;re not interested in specific subgraph segmentation etc. The only question is where to start the search in the graph, but that depends on the specific graph ofc."}],"tags":[],"owner":{"account_id":24553,"reputation":15108,"user_id":62539,"accept_rate":88,"display_name":"MedicineMan"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1251487354,"creation_date":1251487354,"answer_id":1348864,"question_id":1348783,"body_markdown":"What about a breadth first search to find all connected nodes?  Once you have the list of connected nodes, you subtract this list from the list of all nodes.  You end up with a list of disconnected nodes","title":"Finding all disconnected subgraphs in a graph","body":"<p>What about a breadth first search to find all connected nodes?  Once you have the list of connected nodes, you subtract this list from the list of all nodes.  You end up with a list of disconnected nodes</p>\n"},{"comments":[{"owner":{"account_id":10611,"reputation":110117,"user_id":20128,"accept_rate":73,"display_name":"serg"},"score":0,"creation_date":1251491694,"post_id":1348993,"comment_id":1185168,"body_markdown":"ConnectivityInspector class should be what is needed.","body":"ConnectivityInspector class should be what is needed."},{"owner":{"account_id":48454,"reputation":12964,"user_id":143969,"accept_rate":91,"display_name":"aperkins"},"score":0,"creation_date":1251492942,"post_id":1348993,"comment_id":1185308,"body_markdown":"Having never had to do much other than prove existence/non-existence of cycles, I was not sure, so I simply linked to the library - it has been pretty solid for our project.","body":"Having never had to do much other than prove existence/non-existence of cycles, I was not sure, so I simply linked to the library - it has been pretty solid for our project."}],"tags":[],"owner":{"account_id":48454,"reputation":12964,"user_id":143969,"accept_rate":91,"display_name":"aperkins"},"comment_count":2,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1251488966,"creation_date":1251488966,"answer_id":1348993,"question_id":1348783,"body_markdown":"&lt;a href=&quot;http://jgrapht.sourceforge.net/&quot;&gt;JGraphT&lt;/a&gt; is a nice open source graphing library licensed under the LGPL license.  I have used it in the past to deal with graphs and detecting cycles within the graphs.  It is also fairly easy to use, and you can use &lt;a href=&quot;http://www.jgraph.com/&quot;&gt;JGraph&lt;/a&gt; to visualize the graphs.","title":"Finding all disconnected subgraphs in a graph","body":"<p><a href=\"http://jgrapht.sourceforge.net/\" rel=\"nofollow noreferrer\">JGraphT</a> is a nice open source graphing library licensed under the LGPL license.  I have used it in the past to deal with graphs and detecting cycles within the graphs.  It is also fairly easy to use, and you can use <a href=\"http://www.jgraph.com/\" rel=\"nofollow noreferrer\">JGraph</a> to visualize the graphs.</p>\n"},{"comments":[{"owner":{"account_id":53648,"reputation":19565,"user_id":160406,"accept_rate":51,"display_name":"Ollie Glass"},"score":2,"creation_date":1251563010,"post_id":1348995,"comment_id":1188001,"body_markdown":"Thanks, this a great place to start and a very practical answer.","body":"Thanks, this a great place to start and a very practical answer."}],"tags":[],"owner":{"account_id":42964,"reputation":26240,"user_id":125382,"accept_rate":91,"display_name":"MAK"},"comment_count":1,"down_vote_count":0,"up_vote_count":75,"is_accepted":true,"score":75,"last_activity_date":1251499272,"creation_date":1251489015,"answer_id":1348995,"question_id":1348783,"body_markdown":"I think what you are looking for is generally called a [Flood Fill][1]. It is up to you whether you traverse the graph through a BFS or a DFS. \r\n\r\nBasically you take an unlabeled (AKA uncoloured) node and assign a new label to it. You assign the same label to all nodes adjacent to that one, and so on to all nodes that are reachable from that node. \r\n\r\nWhen no more reachable nodes can be labeled, you start over by picking another unlabeled node. Notice that the fact that this new node is unlabeled implies that it is not reachable from our earlier node and is thus in a different disconnected component. \r\n\r\nWhen there are no more unlabeled nodes, the number of distinct labels you had to use is the number of components of the graph. The label for each node tells you which node is part of which component.\r\n\r\n\r\n  [1]: http://en.wikipedia.org/wiki/Flood_fill","title":"Finding all disconnected subgraphs in a graph","body":"<p>I think what you are looking for is generally called a <a href=\"http://en.wikipedia.org/wiki/Flood_fill\" rel=\"noreferrer\">Flood Fill</a>. It is up to you whether you traverse the graph through a BFS or a DFS. </p>\n\n<p>Basically you take an unlabeled (AKA uncoloured) node and assign a new label to it. You assign the same label to all nodes adjacent to that one, and so on to all nodes that are reachable from that node. </p>\n\n<p>When no more reachable nodes can be labeled, you start over by picking another unlabeled node. Notice that the fact that this new node is unlabeled implies that it is not reachable from our earlier node and is thus in a different disconnected component. </p>\n\n<p>When there are no more unlabeled nodes, the number of distinct labels you had to use is the number of components of the graph. The label for each node tells you which node is part of which component.</p>\n"},{"comments":[{"owner":{"account_id":53648,"reputation":19565,"user_id":160406,"accept_rate":51,"display_name":"Ollie Glass"},"score":0,"creation_date":1251563340,"post_id":1349017,"comment_id":1188009,"body_markdown":"Thanks, this is a self-education question and I appreciate the detail, I value your bringing the assumptions I made to light.\n\nI&#39;m working with undirected graphs and my goal to produce a method which takes one graph and returns a collection of all the subgraphs.","body":"Thanks, this is a self-education question and I appreciate the detail, I value your bringing the assumptions I made to light.  I&#39;m working with undirected graphs and my goal to produce a method which takes one graph and returns a collection of all the subgraphs."}],"tags":[],"owner":{"account_id":46320,"reputation":2425,"user_id":136774,"display_name":"agorenst"},"comment_count":1,"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1251489298,"creation_date":1251489298,"answer_id":1349017,"question_id":1348783,"body_markdown":"There are many facets of this question that are not fully explained, so I&#39;m going to give a somewhat exhaustive answer. My tendency to post walls-of-text notwithstanding. :/ Note also that I&#39;m assuming this is a homework question or self-education question, so I&#39;m not going to give a straight-up answer.\r\n\r\nThe two basic algorithms for detecting connectivity of a graph is [Depth First Search](http://en.wikipedia.org/wiki/Depth-first_search) and [Breadth First Search](http://en.wikipedia.org/wiki/Breadth-first_search). Those are really the 2 starting points you want to look at. Both will get you to the solution, but in different ways, and its hard to argue which is &quot;better&quot; without considering some pretty in-depth aspects of the problem. But let&#39;s move on.\r\n\r\nAs I mentioned before, you left out some important details, and I&#39;ll touch upon some possibilities here.\r\n\r\nIs your graph directed or undirected? and do you consider connectivity in the &quot;strong&quot; sense (in which case, see oggy&#39;s answer), or connectivity in the &quot;weak&quot; sense? Depending on your answer, you will have to approach your algorithm in a subtly different way. Note that, for an undirected graph, weak and strong connectivity are equivalent, so that&#39;s nice. But you&#39;ll have to keep the structure of the graph in mind regardless, while implementing or finding an algorithm.\r\n\r\nFurthermore, there is the question of what you mean by &quot;finding the subgraphs&quot; (paraphrase). Usually graph connectivity is a decision problem -- simply &quot;there is one connected graph&quot; or &quot;there are two or more sub-graphs (aka, it&#39;s disconnected)&quot;. Having an algorithm for that requires the least amount of bookwork, which is nice. :) The next step up would be the *count* of graphs, literally the number of them, and that bookwork is also not so bad. Penultimately, you may want a list of nodes in each sub-graph. Lastly, you may want to literally copy out the sub-graphs, edges and all (so the return type would be a list of graphs, I suppose, with an implied invariant that each graph is connected). None of these different result-types would require a different algorithm, but *will certainly* require a different approach to the bookwork.\r\n\r\nAll of this may seem like a ridiculous amount of overkill for what is a pretty basic question, but I thought I&#39;d just highlight all of the aspects involved in even such a simple graph question. As a sort of cliffhanger, note how none of this even yet touches upon runtime or memory usage! :)\r\n- Agor","title":"Finding all disconnected subgraphs in a graph","body":"<p>There are many facets of this question that are not fully explained, so I'm going to give a somewhat exhaustive answer. My tendency to post walls-of-text notwithstanding. :/ Note also that I'm assuming this is a homework question or self-education question, so I'm not going to give a straight-up answer.</p>\n\n<p>The two basic algorithms for detecting connectivity of a graph is <a href=\"http://en.wikipedia.org/wiki/Depth-first_search\" rel=\"noreferrer\">Depth First Search</a> and <a href=\"http://en.wikipedia.org/wiki/Breadth-first_search\" rel=\"noreferrer\">Breadth First Search</a>. Those are really the 2 starting points you want to look at. Both will get you to the solution, but in different ways, and its hard to argue which is \"better\" without considering some pretty in-depth aspects of the problem. But let's move on.</p>\n\n<p>As I mentioned before, you left out some important details, and I'll touch upon some possibilities here.</p>\n\n<p>Is your graph directed or undirected? and do you consider connectivity in the \"strong\" sense (in which case, see oggy's answer), or connectivity in the \"weak\" sense? Depending on your answer, you will have to approach your algorithm in a subtly different way. Note that, for an undirected graph, weak and strong connectivity are equivalent, so that's nice. But you'll have to keep the structure of the graph in mind regardless, while implementing or finding an algorithm.</p>\n\n<p>Furthermore, there is the question of what you mean by \"finding the subgraphs\" (paraphrase). Usually graph connectivity is a decision problem -- simply \"there is one connected graph\" or \"there are two or more sub-graphs (aka, it's disconnected)\". Having an algorithm for that requires the least amount of bookwork, which is nice. :) The next step up would be the <em>count</em> of graphs, literally the number of them, and that bookwork is also not so bad. Penultimately, you may want a list of nodes in each sub-graph. Lastly, you may want to literally copy out the sub-graphs, edges and all (so the return type would be a list of graphs, I suppose, with an implied invariant that each graph is connected). None of these different result-types would require a different algorithm, but <em>will certainly</em> require a different approach to the bookwork.</p>\n\n<p>All of this may seem like a ridiculous amount of overkill for what is a pretty basic question, but I thought I'd just highlight all of the aspects involved in even such a simple graph question. As a sort of cliffhanger, note how none of this even yet touches upon runtime or memory usage! :)\n- Agor</p>\n"},{"tags":[],"owner":{"account_id":51681,"reputation":13106,"user_id":154461,"accept_rate":90,"display_name":"harschware"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1268068980,"creation_date":1268068980,"answer_id":2403216,"question_id":1348783,"body_markdown":"I ran into a similar problem where I wanted all the weakly connected subgraphs of a directed graph.  I blogged about it [here][1].  I used the [JUNG][2] API and compare two approaches.  My first approach could be used as a template to solve your problem.\r\n\r\n[1]: http://harschware.blogspot.com/2010/02/converting-disconnected-graphs-to.html\r\n[2]: http://jung.sourceforge.net/","title":"Finding all disconnected subgraphs in a graph","body":"<p>I ran into a similar problem where I wanted all the weakly connected subgraphs of a directed graph.  I blogged about it <a href=\"http://harschware.blogspot.com/2010/02/converting-disconnected-graphs-to.html\" rel=\"nofollow noreferrer\">here</a>.  I used the <a href=\"http://jung.sourceforge.net/\" rel=\"nofollow noreferrer\">JUNG</a> API and compare two approaches.  My first approach could be used as a template to solve your problem.</p>\n"},{"tags":[],"owner":{"account_id":130027,"reputation":26123,"user_id":328989,"accept_rate":79,"display_name":"Datageek"},"comment_count":0,"down_vote_count":0,"up_vote_count":28,"is_accepted":false,"score":28,"last_activity_date":1626089054,"creation_date":1341779003,"answer_id":11386404,"question_id":1348783,"body_markdown":"Not a Java implementation but perhaps it will be useful for someone, here is how to do it in Python:\r\n```python\r\nimport networkx as nx\r\ng = nx.Graph()\r\n# add nodes/edges to graph\r\n\r\nd = list(nx.connected_components(g)) \r\n# d contains disconnected subgraphs\r\n# d[0] contains the biggest subgraph\r\n```\r\nMore information [here][1].\r\n\r\n\r\n  [1]: https://networkx.org/documentation/stable/reference/algorithms/generated/networkx.algorithms.components.connected_components.html#networkx.algorithms.components.connected_components","title":"Finding all disconnected subgraphs in a graph","body":"<p>Not a Java implementation but perhaps it will be useful for someone, here is how to do it in Python:</p>\n<pre class=\"lang-py prettyprint-override\"><code>import networkx as nx\ng = nx.Graph()\n# add nodes/edges to graph\n\nd = list(nx.connected_components(g)) \n# d contains disconnected subgraphs\n# d[0] contains the biggest subgraph\n</code></pre>\n<p>More information <a href=\"https://networkx.org/documentation/stable/reference/algorithms/generated/networkx.algorithms.components.connected_components.html#networkx.algorithms.components.connected_components\" rel=\"nofollow noreferrer\">here</a>.</p>\n"},{"tags":[],"owner":{"account_id":236301,"reputation":8390,"user_id":503688,"display_name":"yoyo"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1644711031,"creation_date":1644636812,"answer_id":71088779,"question_id":1348783,"body_markdown":"I probably should have found a standard algorithm ([Wikipedia](https://en.wikipedia.org/wiki/Component_(graph_theory)) has some suggestions), but I came up with this on my own and it worked well for my purposes. My C# implementation takes a couple seconds to process a graph with 40,000 nodes and 44,000 edges to find 160 subgraphs and 20,000 unconnected nodes. I used a HashSet to store each subgraph group, so testing group membership is approximately O(1), and the overall algorithm becomes O(E*C) where E is the number of edges and C is the number of connected components in the graph. Wikipedia mentions an O(N) algorithm, linear in the number of nodes, so I&#39;m sure mine is not maximally efficient, but it was plenty fast for my application. (Edit: I&#39;m also glossing over the cost of merging groups, so don&#39;t put too much weight on my complexity analysis.)\r\n\r\nLogic:\r\n\r\n```\r\nFor each edge A-&gt;B\r\n  If A is in a group and B is not, add B to group A\r\n  If A is not in a group and B is, add A to group B\r\n  If A and B are in different groups, merge the groups\r\n  If neither A or B is in a group, create new group containing A and B\r\n```\r\n\r\nPseudocode:\r\n\r\n```\r\ngraph = {nodes, edges}\r\ngroups = {}\r\nforeach edge A-&gt;B in graph.edges:\r\n\tgroupA = findgroup(A)\r\n\tgroupB = findgroup(B)\r\n\tif (groupA &amp;&amp; !groupB)\r\n\t\tgroupA.add(B)\r\n\telif (!groupA &amp;&amp; groupB)\r\n\t\tgroupB.add(A)\r\n\telif (groupA &amp;&amp; groupB)\r\n\t\tif (groupA != groupB)\r\n\t\t\tgroupA.union(groupB)\r\n\t\t\tgroups.delete(groupB)\r\n\telse\r\n\t\tgroups.add({A,B})\r\n```\r\n\r\n```\r\nfindgroup(node):\r\n\tfor group in groups:\r\n\t\tif group.contains(node):\r\n\t\t\treturn group\r\n\treturn null\r\n```\r\n\r\nNote that this won&#39;t capture any nodes that aren&#39;t involved in edges. For my particular purposes this was fine. If you want to get all the single-node groups you can do a final pass:\r\n\r\n```\r\nforeach node in graph.nodes:\r\n    group = findgroup(node)\r\n    if !group:\r\n        groups.add({node})\r\n```","title":"Finding all disconnected subgraphs in a graph","body":"<p>I probably should have found a standard algorithm (<a href=\"https://en.wikipedia.org/wiki/Component_(graph_theory)\" rel=\"nofollow noreferrer\">Wikipedia</a> has some suggestions), but I came up with this on my own and it worked well for my purposes. My C# implementation takes a couple seconds to process a graph with 40,000 nodes and 44,000 edges to find 160 subgraphs and 20,000 unconnected nodes. I used a HashSet to store each subgraph group, so testing group membership is approximately O(1), and the overall algorithm becomes O(E*C) where E is the number of edges and C is the number of connected components in the graph. Wikipedia mentions an O(N) algorithm, linear in the number of nodes, so I'm sure mine is not maximally efficient, but it was plenty fast for my application. (Edit: I'm also glossing over the cost of merging groups, so don't put too much weight on my complexity analysis.)</p>\n<p>Logic:</p>\n<pre><code>For each edge A-&gt;B\n  If A is in a group and B is not, add B to group A\n  If A is not in a group and B is, add A to group B\n  If A and B are in different groups, merge the groups\n  If neither A or B is in a group, create new group containing A and B\n</code></pre>\n<p>Pseudocode:</p>\n<pre><code>graph = {nodes, edges}\ngroups = {}\nforeach edge A-&gt;B in graph.edges:\n    groupA = findgroup(A)\n    groupB = findgroup(B)\n    if (groupA &amp;&amp; !groupB)\n        groupA.add(B)\n    elif (!groupA &amp;&amp; groupB)\n        groupB.add(A)\n    elif (groupA &amp;&amp; groupB)\n        if (groupA != groupB)\n            groupA.union(groupB)\n            groups.delete(groupB)\n    else\n        groups.add({A,B})\n</code></pre>\n<pre><code>findgroup(node):\n    for group in groups:\n        if group.contains(node):\n            return group\n    return null\n</code></pre>\n<p>Note that this won't capture any nodes that aren't involved in edges. For my particular purposes this was fine. If you want to get all the single-node groups you can do a final pass:</p>\n<pre><code>foreach node in graph.nodes:\n    group = findgroup(node)\n    if !group:\n        groups.add({node})\n</code></pre>\n"}],"owner":{"account_id":53648,"reputation":19565,"user_id":160406,"accept_rate":51,"display_name":"Ollie Glass"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":41573,"favorite_count":0,"down_vote_count":0,"up_vote_count":60,"accepted_answer_id":1348995,"answer_count":8,"score":60,"last_activity_date":1698171138,"creation_date":1251486419,"question_id":1348783,"body_markdown":"I have a graph which contains an unknown number of disconnected subgraphs. What&#39;s a good algorithm (or Java library) to find them all?","title":"Finding all disconnected subgraphs in a graph","body":"<p>I have a graph which contains an unknown number of disconnected subgraphs. What's a good algorithm (or Java library) to find them all?</p>\n"},{"tags":["java","spring","spring-boot","elasticsearch"],"comments":[{"owner":{"account_id":13798611,"reputation":37885,"user_id":9959152,"display_name":"Ryuzaki L"},"score":0,"creation_date":1563611830,"post_id":57123020,"comment_id":100763788,"body_markdown":"i think this is because of some version conflicts","body":"i think this is because of some version conflicts"}],"answers":[{"comments":[{"owner":{"account_id":11760910,"reputation":448,"user_id":8606979,"display_name":"sadeghpro"},"score":0,"creation_date":1563796025,"post_id":57143770,"comment_id":100805770,"body_markdown":"yes I see that but how to use snapshot version in gradle.","body":"yes I see that but how to use snapshot version in gradle."},{"owner":{"account_id":11760910,"reputation":448,"user_id":8606979,"display_name":"sadeghpro"},"score":0,"creation_date":1563796486,"post_id":57143770,"comment_id":100806026,"body_markdown":"I set snapshot repository and change version of library. gradle sync successfully but all imports of elasticsearch give error like ElasticsearchRepository","body":"I set snapshot repository and change version of library. gradle sync successfully but all imports of elasticsearch give error like ElasticsearchRepository"},{"owner":{"account_id":1642693,"reputation":1020,"user_id":1514845,"display_name":"Denis.Kipchakbaev"},"score":0,"creation_date":1563885917,"post_id":57143770,"comment_id":100842738,"body_markdown":"I think 6.8.1 is the maximum version you can use with snapshot release","body":"I think 6.8.1 is the maximum version you can use with snapshot release"},{"owner":{"account_id":11760910,"reputation":448,"user_id":8606979,"display_name":"sadeghpro"},"score":0,"creation_date":1563888079,"post_id":57143770,"comment_id":100843943,"body_markdown":"elasticsearch log said `Received message from unsupported version: [6.4.3] minimal compatible version is: [6.8.0]` then 6.8.1 is must work","body":"elasticsearch log said <code>Received message from unsupported version: [6.4.3] minimal compatible version is: [6.8.0]</code> then 6.8.1 is must work"}],"tags":[],"owner":{"account_id":1642693,"reputation":1020,"user_id":1514845,"display_name":"Denis.Kipchakbaev"},"comment_count":4,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1563790487,"creation_date":1563790487,"answer_id":57143770,"question_id":57123020,"body_markdown":"Elasticsearch 7.x still not supported by spring-data-elasticsearch.\r\nLast stable release is for Elasticsearch 6.2.2 as of July 2019\r\n\r\nSee compatibility matrix: https://github.com/spring-projects/spring-data-elasticsearch#maven-configuration","title":"spring data elasticsearch 7 class not found exception","body":"<p>Elasticsearch 7.x still not supported by spring-data-elasticsearch.\nLast stable release is for Elasticsearch 6.2.2 as of July 2019</p>\n\n<p>See compatibility matrix: <a href=\"https://github.com/spring-projects/spring-data-elasticsearch#maven-configuration\" rel=\"nofollow noreferrer\">https://github.com/spring-projects/spring-data-elasticsearch#maven-configuration</a></p>\n"},{"tags":[],"owner":{"account_id":302841,"reputation":390,"user_id":2521176,"display_name":"M&#225;rio de S&#225; Vera"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1641574219,"creation_date":1641574219,"answer_id":70624569,"question_id":57123020,"body_markdown":"The conflict I was having was related to Actuator : \r\n&lt;artifactId&gt;spring-boot-actuatorautoconfigure&lt;/artifactId&gt;\r\n\r\nAs soon as I removed that dependency ... all went fine ! FWIW","title":"spring data elasticsearch 7 class not found exception","body":"<p>The conflict I was having was related to Actuator :\nspring-boot-actuatorautoconfigure</p>\n<p>As soon as I removed that dependency ... all went fine ! FWIW</p>\n"}],"owner":{"account_id":11760910,"reputation":448,"user_id":8606979,"display_name":"sadeghpro"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":8301,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1698170740,"creation_date":1563611298,"question_id":57123020,"body_markdown":"I want to use spring data elasticsearch with elastic docker 7.2\r\n```\r\n    implementation &#39;org.springframework.boot:spring-boot-starter-data-elasticsearch&#39;\r\n```\r\nbut when spring boot app runs this error appears:\r\n```\r\n2019-07-20 12:35:38.564 ERROR 21804 --- [           main] .d.e.r.s.AbstractElasticsearchRepository : failed to load elasticsearch nodes : org.elasticsearch.client.transport.NoNodeAvailableException: None of the configured nodes are available: [{#transport#-1}{aD43cDv-QnG1e16fnU0dsQ}{localhost}{127.0.0.1:9300}]\r\n```\r\nand in elasticsearch log\r\n```\r\nReceived message from unsupported version: [6.4.3] minimal compatible version is: [6.8.0]\r\n```\r\nI use gradle then I add `ext[&#39;elasticsearch.version&#39;] = &#39;7.2.0&#39;` now error changes \r\n```\r\nCaused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.format.support.FormattingConversionService]: Factory method &#39;mvcConversionService&#39; threw exception; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;instagramUserRepo&#39;: Invocation of init method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.data.elasticsearch.repository.support.SimpleElasticsearchRepository]: Constructor threw exception; nested exception is java.lang.NoClassDefFoundError: org/elasticsearch/action/admin/indices/mapping/put/PutMappingResponse\r\n\tat org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:185) ~[spring-beans-5.1.8.RELEASE.jar:5.1.8.RELEASE]\r\n\tat org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:622) ~[spring-beans-5.1.8.RELEASE.jar:5.1.8.RELEASE]\r\n\t... 46 common frames omitted\r\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;instagramUserRepo&#39;: Invocation of init method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.data.elasticsearch.repository.support.SimpleElasticsearchRepository]: Constructor threw exception; nested exception is java.lang.NoClassDefFoundError: org/elasticsearch/action/admin/indices/mapping/put/PutMappingResponse\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1778) ~[spring-beans-5.1.8.RELEASE.jar:5.1.8.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:593) ~[spring-beans-5.1.8.RELEASE.jar:5.1.8.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:515) ~[spring-beans-5.1.8.RELEASE.jar:5.1.8.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320) ~[spring-beans-5.1.8.RELEASE.jar:5.1.8.RELEASE]\r\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222) ~[spring-beans-5.1.8.RELEASE.jar:5.1.8.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318) ~[spring-beans-5.1.8.RELEASE.jar:5.1.8.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:204) ~[spring-beans-5.1.8.RELEASE.jar:5.1.8.RELEASE]\r\n\tat org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1111) ~[spring-context-5.1.8.RELEASE.jar:5.1.8.RELEASE]\r\n\tat org.springframework.data.repository.support.Repositories.cacheRepositoryFactory(Repositories.java:97) ~[spring-data-commons-2.1.9.RELEASE.jar:2.1.9.RELEASE]\r\n\tat org.springframework.data.repository.support.Repositories.populateRepositoryFactoryInformation(Repositories.java:90) ~[spring-data-commons-2.1.9.RELEASE.jar:2.1.9.RELEASE]\r\n\tat org.springframework.data.repository.support.Repositories.&lt;init&gt;(Repositories.java:83) ~[spring-data-commons-2.1.9.RELEASE.jar:2.1.9.RELEASE]\r\n\tat org.springframework.data.repository.support.DomainClassConverter.setApplicationContext(DomainClassConverter.java:109) ~[spring-data-commons-2.1.9.RELEASE.jar:2.1.9.RELEASE]\r\n\tat org.springframework.data.web.config.SpringDataWebConfiguration.addFormatters(SpringDataWebConfiguration.java:131) ~[spring-data-commons-2.1.9.RELEASE.jar:2.1.9.RELEASE]\r\n\tat org.springframework.web.servlet.config.annotation.WebMvcConfigurerComposite.addFormatters(WebMvcConfigurerComposite.java:81) ~[spring-webmvc-5.1.8.RELEASE.jar:5.1.8.RELEASE]\r\n\tat org.springframework.web.servlet.config.annotation.DelegatingWebMvcConfiguration.addFormatters(DelegatingWebMvcConfiguration.java:78) ~[spring-webmvc-5.1.8.RELEASE.jar:5.1.8.RELEASE]\r\n\tat org.springframework.boot.autoconfigure.web.servlet.WebMvcAutoConfiguration$EnableWebMvcConfiguration.mvcConversionService(WebMvcAutoConfiguration.java:476) ~[spring-boot-autoconfigure-2.1.6.RELEASE.jar:2.1.6.RELEASE]\r\n\tat org.springframework.boot.autoconfigure.web.servlet.WebMvcAutoConfiguration$EnableWebMvcConfiguration$$EnhancerBySpringCGLIB$$1f0f7b64.CGLIB$mvcConversionService$1(&lt;generated&gt;) ~[spring-boot-autoconfigure-2.1.6.RELEASE.jar:2.1.6.RELEASE]\r\n\tat org.springframework.boot.autoconfigure.web.servlet.WebMvcAutoConfiguration$EnableWebMvcConfiguration$$EnhancerBySpringCGLIB$$1f0f7b64$$FastClassBySpringCGLIB$$60445fb2.invoke(&lt;generated&gt;) ~[spring-boot-autoconfigure-2.1.6.RELEASE.jar:2.1.6.RELEASE]\r\n\tat org.springframework.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:244) ~[spring-core-5.1.8.RELEASE.jar:5.1.8.RELEASE]\r\n\tat org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:363) ~[spring-context-5.1.8.RELEASE.jar:5.1.8.RELEASE]\r\n\tat org.springframework.boot.autoconfigure.web.servlet.WebMvcAutoConfiguration$EnableWebMvcConfiguration$$EnhancerBySpringCGLIB$$1f0f7b64.mvcConversionService(&lt;generated&gt;) ~[spring-boot-autoconfigure-2.1.6.RELEASE.jar:2.1.6.RELEASE]\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_212]\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_212]\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_212]\r\n\tat java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_212]\r\n\tat org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:154) ~[spring-beans-5.1.8.RELEASE.jar:5.1.8.RELEASE]\r\n\t... 47 common frames omitted\r\nCaused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.data.elasticsearch.repository.support.SimpleElasticsearchRepository]: Constructor threw exception; nested exception is java.lang.NoClassDefFoundError: org/elasticsearch/action/admin/indices/mapping/put/PutMappingResponse\r\n\tat org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:184) ~[spring-beans-5.1.8.RELEASE.jar:5.1.8.RELEASE]\r\n\tat org.springframework.data.repository.core.support.RepositoryFactorySupport.lambda$getTargetRepositoryViaReflection$3(RepositoryFactorySupport.java:513) ~[spring-data-commons-2.1.9.RELEASE.jar:2.1.9.RELEASE]\r\n\tat java.util.Optional.map(Optional.java:215) ~[na:1.8.0_212]\r\n\tat org.springframework.data.repository.core.support.RepositoryFactorySupport.getTargetRepositoryViaReflection(RepositoryFactorySupport.java:513) ~[spring-data-commons-2.1.9.RELEASE.jar:2.1.9.RELEASE]\r\n\tat org.springframework.data.repository.core.support.RepositoryFactorySupport.getTargetRepositoryViaReflection(RepositoryFactorySupport.java:498) ~[spring-data-commons-2.1.9.RELEASE.jar:2.1.9.RELEASE]\r\n\tat org.springframework.data.elasticsearch.repository.support.ElasticsearchRepositoryFactory.getTargetRepository(ElasticsearchRepositoryFactory.java:74) ~[spring-data-elasticsearch-3.1.9.RELEASE.jar:3.1.9.RELEASE]\r\n\tat org.springframework.data.repository.core.support.RepositoryFactorySupport.getRepository(RepositoryFactorySupport.java:305) ~[spring-data-commons-2.1.9.RELEASE.jar:2.1.9.RELEASE]\r\n\tat org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.lambda$afterPropertiesSet$5(RepositoryFactoryBeanSupport.java:297) ~[spring-data-commons-2.1.9.RELEASE.jar:2.1.9.RELEASE]\r\n\tat org.springframework.data.util.Lazy.getNullable(Lazy.java:211) ~[spring-data-commons-2.1.9.RELEASE.jar:2.1.9.RELEASE]\r\n\tat org.springframework.data.util.Lazy.get(Lazy.java:94) ~[spring-data-commons-2.1.9.RELEASE.jar:2.1.9.RELEASE]\r\n\tat org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.afterPropertiesSet(RepositoryFactoryBeanSupport.java:300) ~[spring-data-commons-2.1.9.RELEASE.jar:2.1.9.RELEASE]\r\n\tat org.springframework.data.elasticsearch.repository.support.ElasticsearchRepositoryFactoryBean.afterPropertiesSet(ElasticsearchRepositoryFactoryBean.java:67) ~[spring-data-elasticsearch-3.1.9.RELEASE.jar:3.1.9.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1837) ~[spring-beans-5.1.8.RELEASE.jar:5.1.8.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1774) ~[spring-beans-5.1.8.RELEASE.jar:5.1.8.RELEASE]\r\n\t... 72 common frames omitted\r\nCaused by: java.lang.NoClassDefFoundError: org/elasticsearch/action/admin/indices/mapping/put/PutMappingResponse\r\n\tat org.springframework.data.elasticsearch.core.ElasticsearchTemplate.putMapping(ElasticsearchTemplate.java:249) ~[spring-data-elasticsearch-3.1.9.RELEASE.jar:3.1.9.RELEASE]\r\n\tat org.springframework.data.elasticsearch.core.ElasticsearchTemplate.putMapping(ElasticsearchTemplate.java:233) ~[spring-data-elasticsearch-3.1.9.RELEASE.jar:3.1.9.RELEASE]\r\n\tat org.springframework.data.elasticsearch.core.ElasticsearchTemplate.putMapping(ElasticsearchTemplate.java:228) ~[spring-data-elasticsearch-3.1.9.RELEASE.jar:3.1.9.RELEASE]\r\n\tat org.springframework.data.elasticsearch.repository.support.AbstractElasticsearchRepository.putMapping(AbstractElasticsearchRepository.java:100) ~[spring-data-elasticsearch-3.1.9.RELEASE.jar:3.1.9.RELEASE]\r\n\tat org.springframework.data.elasticsearch.repository.support.AbstractElasticsearchRepository.&lt;init&gt;(AbstractElasticsearchRepository.java:88) ~[spring-data-elasticsearch-3.1.9.RELEASE.jar:3.1.9.RELEASE]\r\n\tat org.springframework.data.elasticsearch.repository.support.SimpleElasticsearchRepository.&lt;init&gt;(SimpleElasticsearchRepository.java:36) ~[spring-data-elasticsearch-3.1.9.RELEASE.jar:3.1.9.RELEASE]\r\n\tat sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) ~[na:1.8.0_212]\r\n\tat sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62) ~[na:1.8.0_212]\r\n\tat sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45) ~[na:1.8.0_212]\r\n\tat java.lang.reflect.Constructor.newInstance(Constructor.java:423) ~[na:1.8.0_212]\r\n\tat org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:172) ~[spring-beans-5.1.8.RELEASE.jar:5.1.8.RELEASE]\r\n\t... 85 common frames omitted\r\nCaused by: java.lang.ClassNotFoundException: org.elasticsearch.action.admin.indices.mapping.put.PutMappingResponse\r\n\tat java.net.URLClassLoader.findClass(URLClassLoader.java:382) ~[na:1.8.0_212]\r\n\tat java.lang.ClassLoader.loadClass(ClassLoader.java:424) ~[na:1.8.0_212]\r\n\tat sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:349) ~[na:1.8.0_212]\r\n\tat java.lang.ClassLoader.loadClass(ClassLoader.java:357) ~[na:1.8.0_212]\r\n\t... 96 common frames omitted\r\n```\r\nI test elasticsearch.version=6.8.1 too but nothing change.\r\nIs there any possible way to use spring-boot-starter-data-elasticsearch with elasticsearch 7.2.0","title":"spring data elasticsearch 7 class not found exception","body":"<p>I want to use spring data elasticsearch with elastic docker 7.2</p>\n\n<pre><code>    implementation 'org.springframework.boot:spring-boot-starter-data-elasticsearch'\n</code></pre>\n\n<p>but when spring boot app runs this error appears:</p>\n\n<pre><code>2019-07-20 12:35:38.564 ERROR 21804 --- [           main] .d.e.r.s.AbstractElasticsearchRepository : failed to load elasticsearch nodes : org.elasticsearch.client.transport.NoNodeAvailableException: None of the configured nodes are available: [{#transport#-1}{aD43cDv-QnG1e16fnU0dsQ}{localhost}{127.0.0.1:9300}]\n</code></pre>\n\n<p>and in elasticsearch log</p>\n\n<pre><code>Received message from unsupported version: [6.4.3] minimal compatible version is: [6.8.0]\n</code></pre>\n\n<p>I use gradle then I add <code>ext['elasticsearch.version'] = '7.2.0'</code> now error changes </p>\n\n<pre><code>Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.format.support.FormattingConversionService]: Factory method 'mvcConversionService' threw exception; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'instagramUserRepo': Invocation of init method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.data.elasticsearch.repository.support.SimpleElasticsearchRepository]: Constructor threw exception; nested exception is java.lang.NoClassDefFoundError: org/elasticsearch/action/admin/indices/mapping/put/PutMappingResponse\n    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:185) ~[spring-beans-5.1.8.RELEASE.jar:5.1.8.RELEASE]\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:622) ~[spring-beans-5.1.8.RELEASE.jar:5.1.8.RELEASE]\n    ... 46 common frames omitted\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'instagramUserRepo': Invocation of init method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.data.elasticsearch.repository.support.SimpleElasticsearchRepository]: Constructor threw exception; nested exception is java.lang.NoClassDefFoundError: org/elasticsearch/action/admin/indices/mapping/put/PutMappingResponse\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1778) ~[spring-beans-5.1.8.RELEASE.jar:5.1.8.RELEASE]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:593) ~[spring-beans-5.1.8.RELEASE.jar:5.1.8.RELEASE]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:515) ~[spring-beans-5.1.8.RELEASE.jar:5.1.8.RELEASE]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320) ~[spring-beans-5.1.8.RELEASE.jar:5.1.8.RELEASE]\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222) ~[spring-beans-5.1.8.RELEASE.jar:5.1.8.RELEASE]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318) ~[spring-beans-5.1.8.RELEASE.jar:5.1.8.RELEASE]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:204) ~[spring-beans-5.1.8.RELEASE.jar:5.1.8.RELEASE]\n    at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1111) ~[spring-context-5.1.8.RELEASE.jar:5.1.8.RELEASE]\n    at org.springframework.data.repository.support.Repositories.cacheRepositoryFactory(Repositories.java:97) ~[spring-data-commons-2.1.9.RELEASE.jar:2.1.9.RELEASE]\n    at org.springframework.data.repository.support.Repositories.populateRepositoryFactoryInformation(Repositories.java:90) ~[spring-data-commons-2.1.9.RELEASE.jar:2.1.9.RELEASE]\n    at org.springframework.data.repository.support.Repositories.&lt;init&gt;(Repositories.java:83) ~[spring-data-commons-2.1.9.RELEASE.jar:2.1.9.RELEASE]\n    at org.springframework.data.repository.support.DomainClassConverter.setApplicationContext(DomainClassConverter.java:109) ~[spring-data-commons-2.1.9.RELEASE.jar:2.1.9.RELEASE]\n    at org.springframework.data.web.config.SpringDataWebConfiguration.addFormatters(SpringDataWebConfiguration.java:131) ~[spring-data-commons-2.1.9.RELEASE.jar:2.1.9.RELEASE]\n    at org.springframework.web.servlet.config.annotation.WebMvcConfigurerComposite.addFormatters(WebMvcConfigurerComposite.java:81) ~[spring-webmvc-5.1.8.RELEASE.jar:5.1.8.RELEASE]\n    at org.springframework.web.servlet.config.annotation.DelegatingWebMvcConfiguration.addFormatters(DelegatingWebMvcConfiguration.java:78) ~[spring-webmvc-5.1.8.RELEASE.jar:5.1.8.RELEASE]\n    at org.springframework.boot.autoconfigure.web.servlet.WebMvcAutoConfiguration$EnableWebMvcConfiguration.mvcConversionService(WebMvcAutoConfiguration.java:476) ~[spring-boot-autoconfigure-2.1.6.RELEASE.jar:2.1.6.RELEASE]\n    at org.springframework.boot.autoconfigure.web.servlet.WebMvcAutoConfiguration$EnableWebMvcConfiguration$$EnhancerBySpringCGLIB$$1f0f7b64.CGLIB$mvcConversionService$1(&lt;generated&gt;) ~[spring-boot-autoconfigure-2.1.6.RELEASE.jar:2.1.6.RELEASE]\n    at org.springframework.boot.autoconfigure.web.servlet.WebMvcAutoConfiguration$EnableWebMvcConfiguration$$EnhancerBySpringCGLIB$$1f0f7b64$$FastClassBySpringCGLIB$$60445fb2.invoke(&lt;generated&gt;) ~[spring-boot-autoconfigure-2.1.6.RELEASE.jar:2.1.6.RELEASE]\n    at org.springframework.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:244) ~[spring-core-5.1.8.RELEASE.jar:5.1.8.RELEASE]\n    at org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:363) ~[spring-context-5.1.8.RELEASE.jar:5.1.8.RELEASE]\n    at org.springframework.boot.autoconfigure.web.servlet.WebMvcAutoConfiguration$EnableWebMvcConfiguration$$EnhancerBySpringCGLIB$$1f0f7b64.mvcConversionService(&lt;generated&gt;) ~[spring-boot-autoconfigure-2.1.6.RELEASE.jar:2.1.6.RELEASE]\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_212]\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_212]\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_212]\n    at java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_212]\n    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:154) ~[spring-beans-5.1.8.RELEASE.jar:5.1.8.RELEASE]\n    ... 47 common frames omitted\nCaused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.data.elasticsearch.repository.support.SimpleElasticsearchRepository]: Constructor threw exception; nested exception is java.lang.NoClassDefFoundError: org/elasticsearch/action/admin/indices/mapping/put/PutMappingResponse\n    at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:184) ~[spring-beans-5.1.8.RELEASE.jar:5.1.8.RELEASE]\n    at org.springframework.data.repository.core.support.RepositoryFactorySupport.lambda$getTargetRepositoryViaReflection$3(RepositoryFactorySupport.java:513) ~[spring-data-commons-2.1.9.RELEASE.jar:2.1.9.RELEASE]\n    at java.util.Optional.map(Optional.java:215) ~[na:1.8.0_212]\n    at org.springframework.data.repository.core.support.RepositoryFactorySupport.getTargetRepositoryViaReflection(RepositoryFactorySupport.java:513) ~[spring-data-commons-2.1.9.RELEASE.jar:2.1.9.RELEASE]\n    at org.springframework.data.repository.core.support.RepositoryFactorySupport.getTargetRepositoryViaReflection(RepositoryFactorySupport.java:498) ~[spring-data-commons-2.1.9.RELEASE.jar:2.1.9.RELEASE]\n    at org.springframework.data.elasticsearch.repository.support.ElasticsearchRepositoryFactory.getTargetRepository(ElasticsearchRepositoryFactory.java:74) ~[spring-data-elasticsearch-3.1.9.RELEASE.jar:3.1.9.RELEASE]\n    at org.springframework.data.repository.core.support.RepositoryFactorySupport.getRepository(RepositoryFactorySupport.java:305) ~[spring-data-commons-2.1.9.RELEASE.jar:2.1.9.RELEASE]\n    at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.lambda$afterPropertiesSet$5(RepositoryFactoryBeanSupport.java:297) ~[spring-data-commons-2.1.9.RELEASE.jar:2.1.9.RELEASE]\n    at org.springframework.data.util.Lazy.getNullable(Lazy.java:211) ~[spring-data-commons-2.1.9.RELEASE.jar:2.1.9.RELEASE]\n    at org.springframework.data.util.Lazy.get(Lazy.java:94) ~[spring-data-commons-2.1.9.RELEASE.jar:2.1.9.RELEASE]\n    at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.afterPropertiesSet(RepositoryFactoryBeanSupport.java:300) ~[spring-data-commons-2.1.9.RELEASE.jar:2.1.9.RELEASE]\n    at org.springframework.data.elasticsearch.repository.support.ElasticsearchRepositoryFactoryBean.afterPropertiesSet(ElasticsearchRepositoryFactoryBean.java:67) ~[spring-data-elasticsearch-3.1.9.RELEASE.jar:3.1.9.RELEASE]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1837) ~[spring-beans-5.1.8.RELEASE.jar:5.1.8.RELEASE]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1774) ~[spring-beans-5.1.8.RELEASE.jar:5.1.8.RELEASE]\n    ... 72 common frames omitted\nCaused by: java.lang.NoClassDefFoundError: org/elasticsearch/action/admin/indices/mapping/put/PutMappingResponse\n    at org.springframework.data.elasticsearch.core.ElasticsearchTemplate.putMapping(ElasticsearchTemplate.java:249) ~[spring-data-elasticsearch-3.1.9.RELEASE.jar:3.1.9.RELEASE]\n    at org.springframework.data.elasticsearch.core.ElasticsearchTemplate.putMapping(ElasticsearchTemplate.java:233) ~[spring-data-elasticsearch-3.1.9.RELEASE.jar:3.1.9.RELEASE]\n    at org.springframework.data.elasticsearch.core.ElasticsearchTemplate.putMapping(ElasticsearchTemplate.java:228) ~[spring-data-elasticsearch-3.1.9.RELEASE.jar:3.1.9.RELEASE]\n    at org.springframework.data.elasticsearch.repository.support.AbstractElasticsearchRepository.putMapping(AbstractElasticsearchRepository.java:100) ~[spring-data-elasticsearch-3.1.9.RELEASE.jar:3.1.9.RELEASE]\n    at org.springframework.data.elasticsearch.repository.support.AbstractElasticsearchRepository.&lt;init&gt;(AbstractElasticsearchRepository.java:88) ~[spring-data-elasticsearch-3.1.9.RELEASE.jar:3.1.9.RELEASE]\n    at org.springframework.data.elasticsearch.repository.support.SimpleElasticsearchRepository.&lt;init&gt;(SimpleElasticsearchRepository.java:36) ~[spring-data-elasticsearch-3.1.9.RELEASE.jar:3.1.9.RELEASE]\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) ~[na:1.8.0_212]\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62) ~[na:1.8.0_212]\n    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45) ~[na:1.8.0_212]\n    at java.lang.reflect.Constructor.newInstance(Constructor.java:423) ~[na:1.8.0_212]\n    at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:172) ~[spring-beans-5.1.8.RELEASE.jar:5.1.8.RELEASE]\n    ... 85 common frames omitted\nCaused by: java.lang.ClassNotFoundException: org.elasticsearch.action.admin.indices.mapping.put.PutMappingResponse\n    at java.net.URLClassLoader.findClass(URLClassLoader.java:382) ~[na:1.8.0_212]\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:424) ~[na:1.8.0_212]\n    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:349) ~[na:1.8.0_212]\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:357) ~[na:1.8.0_212]\n    ... 96 common frames omitted\n</code></pre>\n\n<p>I test elasticsearch.version=6.8.1 too but nothing change.\nIs there any possible way to use spring-boot-starter-data-elasticsearch with elasticsearch 7.2.0</p>\n"},{"tags":["java","json","json-query"],"comments":[{"owner":{"account_id":6482565,"reputation":67,"user_id":5019132,"accept_rate":14,"display_name":"Ashutosh Dalai"},"score":0,"creation_date":1526293923,"post_id":50328144,"comment_id":87672211,"body_markdown":"Please add comma after  &quot;@type&quot;: &quot;Segment&quot; .","body":"Please add comma after  &quot;@type&quot;: &quot;Segment&quot; ."},{"owner":{"account_id":6077505,"reputation":8407,"user_id":4744359,"display_name":"UninformedUser"},"score":0,"creation_date":1526294133,"post_id":50328144,"comment_id":87672341,"body_markdown":"Where is your current query? What did you try? Do you hope somebody will do your home work?","body":"Where is your current query? What did you try? Do you hope somebody will do your home work?"},{"owner":{"account_id":436264,"reputation":3362,"user_id":823321,"display_name":"sɐunıɔןɐqɐp"},"score":1,"creation_date":1526294276,"post_id":50328144,"comment_id":87672425,"body_markdown":"@AshutoshDalai: You can edit your own question and add it by yourself. I would also recommend adding a better description of your issue.","body":"@AshutoshDalai: You can edit your own question and add it by yourself. I would also recommend adding a better description of your issue."},{"owner":{"account_id":6482565,"reputation":67,"user_id":5019132,"accept_rate":14,"display_name":"Ashutosh Dalai"},"score":0,"creation_date":1526295138,"post_id":50328144,"comment_id":87672882,"body_markdown":"@AKSW, Below is my expression\n\n$..vehicleCode[?($..vehicleLease==&quot;AS PER LAW OF ENFORCMENT&quot;)]","body":"@AKSW, Below is my expression  $..vehicleCode[?($..vehicleLease==&quot;AS PER LAW OF ENFORCMENT&quot;)]"},{"owner":{"account_id":8633322,"reputation":218433,"user_id":6464308,"display_name":"Laurenz Albe"},"score":0,"creation_date":1526327909,"post_id":50328144,"comment_id":87692374,"body_markdown":"Clarify the question, incorporate the comment","body":"Clarify the question, incorporate the comment"}],"answers":[{"tags":[],"owner":{"account_id":13009011,"reputation":1105,"user_id":9402689,"display_name":"Raymond Choi"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698170569,"creation_date":1698170569,"answer_id":77354434,"question_id":50328144,"body_markdown":"JSON library _Josson_ is able to solve this question with its query language expression.\r\n\r\nhttps://github.com/octomix/josson\r\n\r\n__Deserialization__\r\n\r\n    Josson josson = Josson.fromJsonString(\r\n        &quot;{&quot; +\r\n        &quot;  \\&quot;StateOffers\\&quot; : [ [ {&quot; +\r\n        &quot;    \\&quot;vehicleCode\\&quot; : 242214214,&quot; +\r\n        &quot;    \\&quot;vehiclePart\\&quot; : [ {&quot; +\r\n        &quot;      \\&quot;@type\\&quot; : \\&quot;vehiclePart\\&quot;,&quot; +\r\n        &quot;      \\&quot;segments\\&quot; : [ {&quot; +\r\n        &quot;        \\&quot;@type\\&quot; : \\&quot;Segment\\&quot;,&quot; +\r\n        &quot;        \\&quot;segmentOfferInformation\\&quot; : {&quot; +\r\n        &quot;          \\&quot;vehicleMiles\\&quot; : 771,&quot; +\r\n        &quot;          \\&quot;awardFare\\&quot; : false&quot; +\r\n        &quot;        },&quot; +\r\n        &quot;        \\&quot;vehicleLease\\&quot; : \\&quot;AS PER LAW OF ENFORCMENT\\&quot;&quot; +\r\n        &quot;      } ],&quot; +\r\n        &quot;      \\&quot;stops\\&quot; : 0&quot; +\r\n        &quot;    } ]&quot; +\r\n        &quot;  }, {&quot; +\r\n        &quot;    \\&quot;vehicleCode\\&quot; : 242214215,&quot; +\r\n        &quot;    \\&quot;vehiclePart\\&quot; : [ {&quot; +\r\n        &quot;      \\&quot;@type\\&quot; : \\&quot;vehiclePart\\&quot;,&quot; +\r\n        &quot;      \\&quot;segments\\&quot; : [ {&quot; +\r\n        &quot;        \\&quot;@type\\&quot; : \\&quot;Segment\\&quot;,&quot; +\r\n        &quot;        \\&quot;segmentOfferInformation\\&quot; : {&quot; +\r\n        &quot;          \\&quot;vehicleMiles\\&quot; : 771,&quot; +\r\n        &quot;          \\&quot;awardFare\\&quot; : false&quot; +\r\n        &quot;        },&quot; +\r\n        &quot;        \\&quot;vehicleLease\\&quot; : \\&quot;MY RULE MY WORLD\\&quot;&quot; +\r\n        &quot;      } ],&quot; +\r\n        &quot;      \\&quot;stops\\&quot; : 0&quot; +\r\n        &quot;    } ]&quot; +\r\n        &quot;  } ] ]&quot; +\r\n        &quot;}&quot;);\r\n\r\n__Query__\r\n\r\n    Integer vehicleCode= josson.getInteger(\r\n            &quot;StateOffers.flatten()&quot; +\r\n            &quot;.[vehiclePart.segments[vehicleLease = &#39;AS PER LAW OF ENFORCMENT&#39;]]&quot; +\r\n            &quot;.vehicleCode&quot;);\r\n    System.out.println(vehicleCode);\r\n    //Output: 242214214","title":"Json query String for getting value with Condition","body":"<p>JSON library <em>Josson</em> is able to solve this question with its query language expression.</p>\n<p><a href=\"https://github.com/octomix/josson\" rel=\"nofollow noreferrer\">https://github.com/octomix/josson</a></p>\n<p><strong>Deserialization</strong></p>\n<pre><code>Josson josson = Josson.fromJsonString(\n    &quot;{&quot; +\n    &quot;  \\&quot;StateOffers\\&quot; : [ [ {&quot; +\n    &quot;    \\&quot;vehicleCode\\&quot; : 242214214,&quot; +\n    &quot;    \\&quot;vehiclePart\\&quot; : [ {&quot; +\n    &quot;      \\&quot;@type\\&quot; : \\&quot;vehiclePart\\&quot;,&quot; +\n    &quot;      \\&quot;segments\\&quot; : [ {&quot; +\n    &quot;        \\&quot;@type\\&quot; : \\&quot;Segment\\&quot;,&quot; +\n    &quot;        \\&quot;segmentOfferInformation\\&quot; : {&quot; +\n    &quot;          \\&quot;vehicleMiles\\&quot; : 771,&quot; +\n    &quot;          \\&quot;awardFare\\&quot; : false&quot; +\n    &quot;        },&quot; +\n    &quot;        \\&quot;vehicleLease\\&quot; : \\&quot;AS PER LAW OF ENFORCMENT\\&quot;&quot; +\n    &quot;      } ],&quot; +\n    &quot;      \\&quot;stops\\&quot; : 0&quot; +\n    &quot;    } ]&quot; +\n    &quot;  }, {&quot; +\n    &quot;    \\&quot;vehicleCode\\&quot; : 242214215,&quot; +\n    &quot;    \\&quot;vehiclePart\\&quot; : [ {&quot; +\n    &quot;      \\&quot;@type\\&quot; : \\&quot;vehiclePart\\&quot;,&quot; +\n    &quot;      \\&quot;segments\\&quot; : [ {&quot; +\n    &quot;        \\&quot;@type\\&quot; : \\&quot;Segment\\&quot;,&quot; +\n    &quot;        \\&quot;segmentOfferInformation\\&quot; : {&quot; +\n    &quot;          \\&quot;vehicleMiles\\&quot; : 771,&quot; +\n    &quot;          \\&quot;awardFare\\&quot; : false&quot; +\n    &quot;        },&quot; +\n    &quot;        \\&quot;vehicleLease\\&quot; : \\&quot;MY RULE MY WORLD\\&quot;&quot; +\n    &quot;      } ],&quot; +\n    &quot;      \\&quot;stops\\&quot; : 0&quot; +\n    &quot;    } ]&quot; +\n    &quot;  } ] ]&quot; +\n    &quot;}&quot;);\n</code></pre>\n<p><strong>Query</strong></p>\n<pre><code>Integer vehicleCode= josson.getInteger(\n        &quot;StateOffers.flatten()&quot; +\n        &quot;.[vehiclePart.segments[vehicleLease = 'AS PER LAW OF ENFORCMENT']]&quot; +\n        &quot;.vehicleCode&quot;);\nSystem.out.println(vehicleCode);\n//Output: 242214214\n</code></pre>\n"}],"owner":{"account_id":6482565,"reputation":67,"user_id":5019132,"accept_rate":14,"display_name":"Ashutosh Dalai"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":176,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1698170569,"creation_date":1526293733,"question_id":50328144,"body_markdown":"I want to get the value of `vehicleCode`element where `vehicleLease` is `AS PER LAW OF ENFORCMENT`.\r\n\r\nCould someone please help me with JSON query ?\r\n\r\nPlease find JSON data below.\r\n\r\n        {\r\n     \t&quot;StateOffers&quot;: [\r\n     \t\t[{\r\n     \t\t\t\t&quot;vehicleCode&quot;: 242214214,\r\n     \t\t\t\t&quot;vehiclePart&quot;: [{\r\n     \t\t\t\t\t\t&quot;@type&quot;: &quot;vehiclePart&quot;,\r\n     \t\t\t\t\t\t&quot;segments&quot;: [{\r\n     \t\t\t\t\t\t\t\t&quot;@type&quot;: &quot;Segment&quot;\r\n     \t\t\t\t\t\t\t\t&quot;segmentOfferInformation&quot;: {\r\n     \t\t\t\t\t\t\t\t\t&quot;vehicleMiles&quot;: 771,\r\n     \t\t\t\t\t\t\t\t\t&quot;awardFare&quot;: false\r\n     \t\t\t\t\t\t\t\t},\r\n     \t\t\t\t\t\t\t\t&quot;vehicleLease&quot;: &quot;AS PER LAW OF ENFORCMENT&quot;\r\n     \t\t\t\t\t\t\t}\r\n     \t\t\t\t\t\t],\r\n     \t\t\t\t\t\t&quot;stops&quot;: 0\r\n     \t\t\t\t\t}\r\n     \t\t\t\t]\r\n     \t\t\t}, {\r\n     \t\t\t\t&quot;vehicleCode&quot;: 242214214,\r\n     \t\t\t\t&quot;vehiclePart&quot;: [{\r\n     \t\t\t\t\t\t&quot;@type&quot;: &quot;vehiclePart&quot;,\r\n     \t\t\t\t\t\t&quot;segments&quot;: [{\r\n     \t\t\t\t\t\t\t\t&quot;@type&quot;: &quot;Segment&quot;\r\n     \t\t\t\t\t\t\t\t&quot;segmentOfferInformation&quot;: {\r\n     \t\t\t\t\t\t\t\t\t&quot;vehicleMiles&quot;: 771,\r\n     \t\t\t\t\t\t\t\t\t&quot;awardFare&quot;: false\r\n     \t\t\t\t\t\t\t\t},\r\n     \t\t\t\t\t\t\t\t&quot;vehicleLease&quot;: &quot;MY RULE MY WORLD&quot;\r\n     \t\t\t\t\t\t\t}\r\n     \t\t\t\t\t\t],\r\n     \t\t\t\t\t\t&quot;stops&quot;: 0\r\n     \t\t\t\t\t}\r\n     \t\t\t\t]\r\n     \t\t\t}\r\n     \t\t]\r\n     \t]\r\n     }\r\n\r\nThis is the expression I have tried:\r\n\r\n    $..vehicleCode[?($..vehicleLease==&quot;AS PER LAW OF ENFORCMENT&quot;)","title":"Json query String for getting value with Condition","body":"<p>I want to get the value of <code>vehicleCode</code>element where <code>vehicleLease</code> is <code>AS PER LAW OF ENFORCMENT</code>.</p>\n\n<p>Could someone please help me with JSON query ?</p>\n\n<p>Please find JSON data below.</p>\n\n<pre><code>    {\n    \"StateOffers\": [\n        [{\n                \"vehicleCode\": 242214214,\n                \"vehiclePart\": [{\n                        \"@type\": \"vehiclePart\",\n                        \"segments\": [{\n                                \"@type\": \"Segment\"\n                                \"segmentOfferInformation\": {\n                                    \"vehicleMiles\": 771,\n                                    \"awardFare\": false\n                                },\n                                \"vehicleLease\": \"AS PER LAW OF ENFORCMENT\"\n                            }\n                        ],\n                        \"stops\": 0\n                    }\n                ]\n            }, {\n                \"vehicleCode\": 242214214,\n                \"vehiclePart\": [{\n                        \"@type\": \"vehiclePart\",\n                        \"segments\": [{\n                                \"@type\": \"Segment\"\n                                \"segmentOfferInformation\": {\n                                    \"vehicleMiles\": 771,\n                                    \"awardFare\": false\n                                },\n                                \"vehicleLease\": \"MY RULE MY WORLD\"\n                            }\n                        ],\n                        \"stops\": 0\n                    }\n                ]\n            }\n        ]\n    ]\n }\n</code></pre>\n\n<p>This is the expression I have tried:</p>\n\n<pre><code>$..vehicleCode[?($..vehicleLease==\"AS PER LAW OF ENFORCMENT\")\n</code></pre>\n"},{"tags":["java","hibernate","caching","ehcache"],"comments":[{"owner":{"account_id":4181375,"reputation":5121,"user_id":3426309,"display_name":"Andrey B. Panfilov"},"score":0,"creation_date":1673776625,"post_id":75124069,"comment_id":132569793,"body_markdown":"have you tried calling `entityManagerFactory.getCache().evict(MyEntity.class)`?","body":"have you tried calling <code>entityManagerFactory.getCache().evict(MyEntity.class)</code>?"},{"owner":{"account_id":26434968,"reputation":45,"user_id":20080481,"display_name":"User01"},"score":0,"creation_date":1673778455,"post_id":75124069,"comment_id":132570042,"body_markdown":"I&#39;m afraid this will work on the service&#39; local cache only, the other services (on other servers) will not be affected! I&#39;ll try it though just to be certain.","body":"I&#39;m afraid this will work on the service&#39; local cache only, the other services (on other servers) will not be affected! I&#39;ll try it though just to be certain."},{"owner":{"account_id":4181375,"reputation":5121,"user_id":3426309,"display_name":"Andrey B. Panfilov"},"score":0,"creation_date":1673778920,"post_id":75124069,"comment_id":132570104,"body_markdown":"it internally calls `net.sf.ehcache.event.RegisteredEventListeners#notifyRemoveAll`, so, if it does not affect remote caches that means your cache setup is broken.","body":"it internally calls <code>net.sf.ehcache.event.RegisteredEventListeners#notifyRemoveAl&zwnj;&#8203;l</code>, so, if it does not affect remote caches that means your cache setup is broken."}],"owner":{"account_id":26434968,"reputation":45,"user_id":20080481,"display_name":"User01"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":138,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1698170516,"creation_date":1673774596,"question_id":75124069,"body_markdown":"I&#39;m working on a Java Spring project where we have micro services architecture, each service has an internal cache of type hibernate second level cache implemented by Ehcache region factory, to insure data consistency between the different caches we use the Ehcache integration with JMS.\r\nThis is working so far, but how can I send manually a signal to the topic the caches queues are superscribed to, this signal should evict a specific cache region?\r\nwhat is the nature and structure of such message in Java?","title":"Hibernate 2nd level cache eviction","body":"<p>I'm working on a Java Spring project where we have micro services architecture, each service has an internal cache of type hibernate second level cache implemented by Ehcache region factory, to insure data consistency between the different caches we use the Ehcache integration with JMS.\nThis is working so far, but how can I send manually a signal to the topic the caches queues are superscribed to, this signal should evict a specific cache region?\nwhat is the nature and structure of such message in Java?</p>\n"},{"tags":["java","kotlin","selenium-webdriver","selenium-chromedriver"],"answers":[{"tags":[],"owner":{"account_id":3775103,"reputation":128,"user_id":3136143,"display_name":"attila-fazekas"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698170471,"creation_date":1698170471,"answer_id":77354419,"question_id":77347132,"body_markdown":"This is because you are mixing up different Selenium library versions. In fact, you do not need `devtools` and `selenium-chrome-driver` dependencies. Just use the `selenium-java` one and that will pull all the dependencies. \r\nFurthermore, version 4.6.0 introduced [Selenium Manager][1], so you can skip pointing to the driver executable&#39;s location, the manager will download the right one based on your browser version. \r\nAlso, if you can use Java 11, with the latest version of Selenium (4.14), I believe, due to [this change][2] you can skip adding the `--remote-allow-origins=*` argument.\r\n\r\nSo you can simplify your code to:\r\n\r\n    val driver = ChromeDriver()\r\n    driver[&quot;https://www.garfieldtech.com/ip.php&quot;]\r\n\r\n  [1]: https://www.selenium.dev/blog/2022/introducing-selenium-manager/\r\n  [2]: https://github.com/SeleniumHQ/selenium/commit/9b35af2814ffe92c62f323ffe1d344fe19a296b1\r\n","title":"Selenium HTTP client calls CdpEndpointFinder with missing method?","body":"<p>This is because you are mixing up different Selenium library versions. In fact, you do not need <code>devtools</code> and <code>selenium-chrome-driver</code> dependencies. Just use the <code>selenium-java</code> one and that will pull all the dependencies.\nFurthermore, version 4.6.0 introduced <a href=\"https://www.selenium.dev/blog/2022/introducing-selenium-manager/\" rel=\"nofollow noreferrer\">Selenium Manager</a>, so you can skip pointing to the driver executable's location, the manager will download the right one based on your browser version.\nAlso, if you can use Java 11, with the latest version of Selenium (4.14), I believe, due to <a href=\"https://github.com/SeleniumHQ/selenium/commit/9b35af2814ffe92c62f323ffe1d344fe19a296b1\" rel=\"nofollow noreferrer\">this change</a> you can skip adding the <code>--remote-allow-origins=*</code> argument.</p>\n<p>So you can simplify your code to:</p>\n<pre><code>val driver = ChromeDriver()\ndriver[&quot;https://www.garfieldtech.com/ip.php&quot;]\n</code></pre>\n"}],"owner":{"account_id":300011,"reputation":504,"user_id":606925,"display_name":"Crell"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1698170471,"creation_date":1698081016,"question_id":77347132,"body_markdown":"I am trying to use Selenium with Kotlin.  (I&#39;m still new to both.)  I am getting the above error when I try to connect to a site.  (It&#39;s a trivial page for testing.)\r\n\r\nMy `settings.gradle.kts` file (relevant portions):\r\n\r\n```\r\nplugins {\r\n    kotlin(&quot;jvm&quot;) version &quot;1.9.0&quot;\r\n    application\r\n}\r\n\r\nrepositories {\r\n    mavenCentral()\r\n}\r\n\r\ndependencies {\r\n    testImplementation(kotlin(&quot;test&quot;))\r\n    implementation(&quot;org.seleniumhq.selenium:selenium-java:4.8.1&quot;)\r\n    implementation(&quot;org.seleniumhq.selenium:selenium-devtools:4.0.0-rc-1&quot;)\r\n\r\n    implementation(&quot;org.seleniumhq.selenium:selenium-chrome-driver:4.14.1&quot;)\r\n\r\n    // Some library required log4j, but wasn&#39;t installing it as a dependency. So, manual.\r\n    implementation(&quot;org.apache.logging.log4j:log4j-core:2.21.0&quot;)\r\n    implementation(&quot;org.apache.logging.log4j:log4j-api:2.21.0&quot;)\r\n    testImplementation(&quot;org.apache.logging.log4j:log4j-slf4j2-impl:2.21.0&quot;)\r\n\r\n}\r\n```\r\n\r\nMy code (simplified example):\r\n\r\n```\r\nval driverLocation = &quot;/path/to/chromedriver&quot;\r\n\r\nSystem.setProperty(&quot;webdriver.chrome.driver&quot;, driverLocation);\r\n\r\nval options = ChromeOptions()\r\noptions.addArguments(&quot;--remote-allow-origins=*&quot;)\r\nval driver = ChromeDriver(options)\r\n\r\n// It dies on this line.\r\ndriver.get(&quot;https://www.garfieldtech.com/ip.php&quot;)\r\n```\r\n\r\nThe full error message:\r\n\r\n```\r\nException in thread &quot;main&quot; java.lang.NoSuchMethodError: &#39;org.openqa.selenium.remote.http.HttpClient org.openqa.selenium.devtools.CdpEndpointFinder.getHttpClient(org.openqa.selenium.remote.http.HttpClient$Factory, java.net.URI)&#39;\r\n```\r\n\r\nSure enough, if I click through in my IDE to `ChromeDriver`, the IDE calls out the `getHttpClient` method on this line is not defined:\r\n\r\n```\r\nreportedUri.map(uri -&gt; CdpEndpointFinder.getHttpClient(factory, uri));\r\n```\r\n\r\nIt feels like some kind of version mismatch, but I would expect the build system to catch that and warn me of an incompatibility.  What am I doing wrong here?","title":"Selenium HTTP client calls CdpEndpointFinder with missing method?","body":"<p>I am trying to use Selenium with Kotlin.  (I'm still new to both.)  I am getting the above error when I try to connect to a site.  (It's a trivial page for testing.)</p>\n<p>My <code>settings.gradle.kts</code> file (relevant portions):</p>\n<pre><code>plugins {\n    kotlin(&quot;jvm&quot;) version &quot;1.9.0&quot;\n    application\n}\n\nrepositories {\n    mavenCentral()\n}\n\ndependencies {\n    testImplementation(kotlin(&quot;test&quot;))\n    implementation(&quot;org.seleniumhq.selenium:selenium-java:4.8.1&quot;)\n    implementation(&quot;org.seleniumhq.selenium:selenium-devtools:4.0.0-rc-1&quot;)\n\n    implementation(&quot;org.seleniumhq.selenium:selenium-chrome-driver:4.14.1&quot;)\n\n    // Some library required log4j, but wasn't installing it as a dependency. So, manual.\n    implementation(&quot;org.apache.logging.log4j:log4j-core:2.21.0&quot;)\n    implementation(&quot;org.apache.logging.log4j:log4j-api:2.21.0&quot;)\n    testImplementation(&quot;org.apache.logging.log4j:log4j-slf4j2-impl:2.21.0&quot;)\n\n}\n</code></pre>\n<p>My code (simplified example):</p>\n<pre><code>val driverLocation = &quot;/path/to/chromedriver&quot;\n\nSystem.setProperty(&quot;webdriver.chrome.driver&quot;, driverLocation);\n\nval options = ChromeOptions()\noptions.addArguments(&quot;--remote-allow-origins=*&quot;)\nval driver = ChromeDriver(options)\n\n// It dies on this line.\ndriver.get(&quot;https://www.garfieldtech.com/ip.php&quot;)\n</code></pre>\n<p>The full error message:</p>\n<pre><code>Exception in thread &quot;main&quot; java.lang.NoSuchMethodError: 'org.openqa.selenium.remote.http.HttpClient org.openqa.selenium.devtools.CdpEndpointFinder.getHttpClient(org.openqa.selenium.remote.http.HttpClient$Factory, java.net.URI)'\n</code></pre>\n<p>Sure enough, if I click through in my IDE to <code>ChromeDriver</code>, the IDE calls out the <code>getHttpClient</code> method on this line is not defined:</p>\n<pre><code>reportedUri.map(uri -&gt; CdpEndpointFinder.getHttpClient(factory, uri));\n</code></pre>\n<p>It feels like some kind of version mismatch, but I would expect the build system to catch that and warn me of an incompatibility.  What am I doing wrong here?</p>\n"},{"tags":["java","casting","integer","double"],"comments":[{"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"score":2,"creation_date":1698169786,"post_id":77354067,"comment_id":136370271,"body_markdown":"Why do you print `cast` so many times? Do you expect it to change?","body":"Why do you print <code>cast</code> so many times? Do you expect it to change?"},{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":0,"creation_date":1698175616,"post_id":77354067,"comment_id":136371279,"body_markdown":"Use the _[BigDecimal](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/math/BigDecimal.html)_ class.","body":"Use the <i><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/math/BigDecimal.html\" rel=\"nofollow noreferrer\">BigDecimal</a></i> class."},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1698183816,"post_id":77354067,"comment_id":136372529,"body_markdown":"None of these values is exact in the first place.","body":"None of these values is exact in the first place."},{"owner":{"account_id":16935133,"reputation":21,"user_id":14560808,"display_name":"Evloution78"},"score":0,"creation_date":1698196760,"post_id":77354067,"comment_id":136373648,"body_markdown":"@AndyTurner I mean, no, but Then I thought maybe it was a weird compile error so I better print it lots of times to make sure I get consistent results.","body":"@AndyTurner I mean, no, but Then I thought maybe it was a weird compile error so I better print it lots of times to make sure I get consistent results."},{"owner":{"account_id":16935133,"reputation":21,"user_id":14560808,"display_name":"Evloution78"},"score":0,"creation_date":1698197162,"post_id":77354067,"comment_id":136373667,"body_markdown":"@user207421 I understand that, was just giving examples of casting and ran into that and have never run into that before","body":"@user207421 I understand that, was just giving examples of casting and ran into that and have never run into that before"}],"answers":[{"tags":[],"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1698169677,"creation_date":1698169677,"answer_id":77354331,"question_id":77354067,"body_markdown":"This has nothing to do with casting to `int`.\r\n\r\nIf you print the value of `a`:\r\n\r\n```\r\ndouble a = 5.9999999999999999;\r\nSystem.out.println(a);\r\n```\r\n\r\nIt prints `6.0`.\r\n\r\nThis is because double has finite precision, and cannot represent the literal value exactly.","title":"What are the rounding rules of Java Explicit Cast from Double to Int","body":"<p>This has nothing to do with casting to <code>int</code>.</p>\n<p>If you print the value of <code>a</code>:</p>\n<pre><code>double a = 5.9999999999999999;\nSystem.out.println(a);\n</code></pre>\n<p>It prints <code>6.0</code>.</p>\n<p>This is because double has finite precision, and cannot represent the literal value exactly.</p>\n"},{"tags":[],"owner":{"account_id":1888343,"reputation":176617,"user_id":1707091,"display_name":"rgettman"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1698169964,"creation_date":1698169964,"answer_id":77354362,"question_id":77354067,"body_markdown":"Casting conversions that involve a narrowing primitive conversion from a floating point type to an integral type will round to zero, according to the [JLS Section 5.1.3][1]:\r\n\r\n&gt; A narrowing conversion of a floating-point number to an integral type T takes two steps:\r\n&gt; 1. In the first step, the floating-point number is converted either to a long, if T is long, or to an int, if T is byte, short, char, or int, as follows:\r\n&gt; - If the floating-point number is NaN (&#167;4.2.3), the result of the first step of the conversion is an int or long 0.\r\n&gt; - Otherwise, if the floating-point number is not an infinity, the floating-point value is rounded to an integer value V using the round toward zero rounding policy (&#167;4.2.4).\r\n\r\nSo why does `double a = 5.9999999999999999;` seemingly round up?  The `double` literal has to be converted to a `double` value first.  This is covered by the Floating-Point Literals section of the [JLS (3.10.2)][2]:\r\n\r\n&gt; _The details of proper input conversion from a Unicode string representation of a floating-point number to the internal IEEE 754 binary floating-point representation are described for the methods valueOf of class Float and class Double of the package java.lang._\r\n\r\nOk, let&#39;s go to [`valueOf` for `Double`][3]:\r\n\r\n&gt; [The string value] is regarded as representing an exact decimal value in the usual &quot;computerized scientific notation&quot; or as an exact hexadecimal value; this exact numerical value is then conceptually converted to an &quot;infinitely precise&quot; binary value that is then rounded to type `double` by the usual **round-to-nearest rule** of IEEE 754 floating-point arithmetic, which includes preserving the sign of a zero value.\r\n\r\n&lt;sub&gt;(bold emphasis mine)&lt;/sub&gt;\r\n\r\nAt 16 digits of precision beyond the decimal point (you have 17 include `5`), you are pushing the limits of precision for a `double` literal.  At this point, `5.9999999999999999` is closer to `6` than the next lower `double` value.\r\n\r\nSo, 6 is displayed because your floating point literal gets rounded _up_ to `6.0` as a `double` _before_ it gets cast to an `int`, and `6.0` cast to an `int` is the 6 you see printed.\r\n\r\nOther values you have don&#39;t get rounded all the way up to `6.0` as `double` literals, so the cast to `int` brings it all the way down to 5.\r\n\r\n[1]: https://docs.oracle.com/javase/specs/jls/se17/html/jls-5.html#jls-5.1.3\r\n[2]: https://docs.oracle.com/javase/specs/jls/se17/html/jls-3.html#jls-3.10.2\r\n[3]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Double.html#valueOf(java.lang.String)","title":"What are the rounding rules of Java Explicit Cast from Double to Int","body":"<p>Casting conversions that involve a narrowing primitive conversion from a floating point type to an integral type will round to zero, according to the <a href=\"https://docs.oracle.com/javase/specs/jls/se17/html/jls-5.html#jls-5.1.3\" rel=\"nofollow noreferrer\">JLS Section 5.1.3</a>:</p>\n<blockquote>\n<p>A narrowing conversion of a floating-point number to an integral type T takes two steps:</p>\n<ol>\n<li>In the first step, the floating-point number is converted either to a long, if T is long, or to an int, if T is byte, short, char, or int, as follows:</li>\n</ol>\n<ul>\n<li>If the floating-point number is NaN (§4.2.3), the result of the first step of the conversion is an int or long 0.</li>\n<li>Otherwise, if the floating-point number is not an infinity, the floating-point value is rounded to an integer value V using the round toward zero rounding policy (§4.2.4).</li>\n</ul>\n</blockquote>\n<p>So why does <code>double a = 5.9999999999999999;</code> seemingly round up?  The <code>double</code> literal has to be converted to a <code>double</code> value first.  This is covered by the Floating-Point Literals section of the <a href=\"https://docs.oracle.com/javase/specs/jls/se17/html/jls-3.html#jls-3.10.2\" rel=\"nofollow noreferrer\">JLS (3.10.2)</a>:</p>\n<blockquote>\n<p><em>The details of proper input conversion from a Unicode string representation of a floating-point number to the internal IEEE 754 binary floating-point representation are described for the methods valueOf of class Float and class Double of the package java.lang.</em></p>\n</blockquote>\n<p>Ok, let's go to <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Double.html#valueOf(java.lang.String)\" rel=\"nofollow noreferrer\"><code>valueOf</code> for <code>Double</code></a>:</p>\n<blockquote>\n<p>[The string value] is regarded as representing an exact decimal value in the usual &quot;computerized scientific notation&quot; or as an exact hexadecimal value; this exact numerical value is then conceptually converted to an &quot;infinitely precise&quot; binary value that is then rounded to type <code>double</code> by the usual <strong>round-to-nearest rule</strong> of IEEE 754 floating-point arithmetic, which includes preserving the sign of a zero value.</p>\n</blockquote>\n<p><sub>(bold emphasis mine)</sub></p>\n<p>At 16 digits of precision beyond the decimal point (you have 17 include <code>5</code>), you are pushing the limits of precision for a <code>double</code> literal.  At this point, <code>5.9999999999999999</code> is closer to <code>6</code> than the next lower <code>double</code> value.</p>\n<p>So, 6 is displayed because your floating point literal gets rounded <em>up</em> to <code>6.0</code> as a <code>double</code> <em>before</em> it gets cast to an <code>int</code>, and <code>6.0</code> cast to an <code>int</code> is the 6 you see printed.</p>\n<p>Other values you have don't get rounded all the way up to <code>6.0</code> as <code>double</code> literals, so the cast to <code>int</code> brings it all the way down to 5.</p>\n"}],"owner":{"account_id":16935133,"reputation":21,"user_id":14560808,"display_name":"Evloution78"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":52,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1698169964,"creation_date":1698167141,"question_id":77354067,"body_markdown":"Ran into a weird quirk when demonistrating Java explicit type casting today and was wondering why this happens.\r\n\r\nIf I convert a double into an int, and my number is .9 up to 16 precision, it will round up. (See comments in code) If I make it 15 precision it rounds down. \r\n\r\nSimilarly, if I make my number .8... it will still round down.\r\n\r\n```\r\n        double a = 5.9999999999999999;// 16 precision rounds to 6\r\n        double a1 = 5.8888888888888888; // 16 precision rounds to 5\r\n        double b = 5.999999999999999;// 15 precision rounds to 5\r\n        double c = 5.111111111111111111111111111111111111111; //rounds to 5\r\n        int cast = (int)a;\r\n        for (int i = 0 ; i &lt; 1000000 ; i++){\r\n            System.out.print(cast);\r\n        }\r\n```\r\n\r\n\r\n\r\nInitially thought I was overflowing the int, but it doesn&#39;t appear that is the case. \r\n\r\nAny thoughts? ","title":"What are the rounding rules of Java Explicit Cast from Double to Int","body":"<p>Ran into a weird quirk when demonistrating Java explicit type casting today and was wondering why this happens.</p>\n<p>If I convert a double into an int, and my number is .9 up to 16 precision, it will round up. (See comments in code) If I make it 15 precision it rounds down.</p>\n<p>Similarly, if I make my number .8... it will still round down.</p>\n<pre><code>        double a = 5.9999999999999999;// 16 precision rounds to 6\n        double a1 = 5.8888888888888888; // 16 precision rounds to 5\n        double b = 5.999999999999999;// 15 precision rounds to 5\n        double c = 5.111111111111111111111111111111111111111; //rounds to 5\n        int cast = (int)a;\n        for (int i = 0 ; i &lt; 1000000 ; i++){\n            System.out.print(cast);\n        }\n</code></pre>\n<p>Initially thought I was overflowing the int, but it doesn't appear that is the case.</p>\n<p>Any thoughts?</p>\n"},{"tags":["java","cassandra","micrometer","spring-micrometer"],"comments":[{"owner":{"account_id":944144,"reputation":5341,"user_id":971735,"display_name":"Jonatan Ivanov"},"score":0,"creation_date":1698275777,"post_id":77353073,"comment_id":136386224,"body_markdown":"Have you tried not using the global but injecting an instance?","body":"Have you tried not using the global but injecting an instance?"},{"owner":{"account_id":12908744,"reputation":3232,"user_id":9335205,"accept_rate":50,"display_name":"JGleason"},"score":0,"creation_date":1699545045,"post_id":77353073,"comment_id":136548158,"body_markdown":"@JonatanIvanov any chance you can provide a gist of what you mean?","body":"@JonatanIvanov any chance you can provide a gist of what you mean?"},{"owner":{"account_id":944144,"reputation":5341,"user_id":971735,"display_name":"Jonatan Ivanov"},"score":0,"creation_date":1699899341,"post_id":77353073,"comment_id":136586181,"body_markdown":"Please look into the Micrometer docs. Instead of using `Metrics.globalRegistry`, you should use `private final MeterRegistry registry` and inject it from the ctor.","body":"Please look into the Micrometer docs. Instead of using <code>Metrics.globalRegistry</code>, you should use <code>private final MeterRegistry registry</code> and inject it from the ctor."}],"owner":{"account_id":12908744,"reputation":3232,"user_id":9335205,"accept_rate":50,"display_name":"JGleason"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1698169697,"creation_date":1698158434,"question_id":77353073,"body_markdown":"I am trying to follow the directions [here][1] and I have the following \r\n\r\n```java\r\n@Configuration\r\n@EnableConfigurationProperties(CassandraProperties.class)\r\npublic class CassandraMetricsConfig {\r\n    @Bean\r\n    public DriverConfigLoaderBuilderCustomizer configLoaderBuilderCustomizer(CassandraProperties cassandraProperties) {\r\n        return builder -&gt; {\r\n            System.out.println(&quot;Builder is getting called &quot;+cassandraProperties.getSessionMetrics()+&quot; &quot;+cassandraProperties.getNodeMetrics()+&quot;\\n&quot;);\r\n            builder.withStringList(METRICS_SESSION_ENABLED, cassandraProperties.getSessionMetrics());\r\n            builder.withStringList(METRICS_NODE_ENABLED, cassandraProperties.getNodeMetrics());\r\n        };\r\n    }\r\n\r\n    @Bean\r\n    @ConditionalOnClass(MeterRegistry.class)\r\n    public CqlSessionBuilderCustomizer meterRegistryBuilderCustomizer(final ObjectProvider&lt;MeterRegistry&gt; meterRegistry) {\r\n        System.out.println(&quot;Yeah we got there&quot;);\r\n        return sessionBuilder -&gt;\r\n                sessionBuilder.withMetricRegistry(\r\n                        meterRegistry.getIfAvailable(\r\n                                () -&gt; Metrics.globalRegistry\r\n                        )\r\n                );\r\n    }\r\n\r\n    @Bean\r\n    @Primary\r\n    public CqlSession session() {\r\n        return CqlSession.builder()\r\n                .withMetricRegistry(Metrics.globalRegistry)\r\n                .withKeyspace(&quot;test&quot;).build();\r\n    }\r\n}\r\n@ConfigurationProperties(&quot;cassandra&quot;)\r\npublic class CassandraProperties {\r\n    public CassandraProperties(List&lt;String&gt; sessionMetrics, List&lt;String&gt; nodeMetrics) {\r\n        this.sessionMetrics = sessionMetrics;\r\n        this.nodeMetrics = nodeMetrics;\r\n    }\r\n    private List&lt;String&gt; sessionMetrics;\r\n\r\n    private List&lt;String&gt; nodeMetrics;\r\n\r\n    protected List&lt;String&gt; getSessionMetrics() {\r\n        return sessionMetrics;\r\n    }\r\n\r\n    protected List&lt;String&gt; getNodeMetrics() {\r\n        return nodeMetrics;\r\n    }\r\n}\r\n```\r\n```yaml\r\ncassandra:\r\n  session-metrics:\r\n    - cql-requests\r\n    - connected-nodes\r\n  node-metrics:\r\n    - pool.open-connections\r\n    - pool.in-flight\r\n\r\n```\r\n\r\nThen I have the following scala controller\r\n\r\n```scala\r\n  @RequestMapping(Array(&quot;/&quot;))\r\n  def index(): String = {\r\n    session.execute(&quot;DESC keyspaces;&quot;)\r\n      .forEach(\r\n        (row) =&gt; println(\r\n          row.getString(&quot;keyspace_name&quot;)\r\n        )\r\n      )\r\n    val sb: StringBuilder = new StringBuilder()\r\n    val registry = session.getMetrics\r\n      .orElseThrow(() =&gt; new IllegalStateException(&quot;Metrics are disabled&quot;))\r\n      .getRegistry\r\n\r\n    registry\r\n      .getMeters\r\n      .forEach(\r\n        (key, meter) =&gt; {\r\n          sb.append(key)\r\n        }\r\n      )\r\n    sb.toString()\r\n  }\r\n}\r\n```\r\n\r\nBut when I run and hit the endpoint I get...\r\n\r\n&gt; 2023-10-24T10:31:24.124-04:00 ERROR 1172 --- [nio-8080-exec-1]\r\n&gt; o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for\r\n&gt; servlet [dispatcherServlet] in context with path [] threw exception\r\n&gt; [Request processing failed: java.lang.IllegalStateException: Metrics\r\n&gt; are disabled] with root cause\r\n&gt; \r\n&gt; java.lang.IllegalStateException: Metrics are disabled\r\n\r\nI also tried just using the global registry but that returns empty\r\n\r\n```scala\r\n    Metrics.globalRegistry.getMeters.forEach(\r\n        meter =&gt; {\r\n          System.out.println(&quot;Meter is &quot; + meter.getId.toString)\r\n          sb.append(meter.getId.toString)\r\n          sb.append(&quot;\\n&quot;)\r\n        }\r\n      )\r\n```\r\n\r\n\r\n  [1]: https://docs.datastax.com/en/developer/java-driver/4.13/manual/core/metrics/","title":"Why are micrometer metrics not showing up after the registry is added to the Cassandra driver","body":"<p>I am trying to follow the directions <a href=\"https://docs.datastax.com/en/developer/java-driver/4.13/manual/core/metrics/\" rel=\"nofollow noreferrer\">here</a> and I have the following</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\n@EnableConfigurationProperties(CassandraProperties.class)\npublic class CassandraMetricsConfig {\n    @Bean\n    public DriverConfigLoaderBuilderCustomizer configLoaderBuilderCustomizer(CassandraProperties cassandraProperties) {\n        return builder -&gt; {\n            System.out.println(&quot;Builder is getting called &quot;+cassandraProperties.getSessionMetrics()+&quot; &quot;+cassandraProperties.getNodeMetrics()+&quot;\\n&quot;);\n            builder.withStringList(METRICS_SESSION_ENABLED, cassandraProperties.getSessionMetrics());\n            builder.withStringList(METRICS_NODE_ENABLED, cassandraProperties.getNodeMetrics());\n        };\n    }\n\n    @Bean\n    @ConditionalOnClass(MeterRegistry.class)\n    public CqlSessionBuilderCustomizer meterRegistryBuilderCustomizer(final ObjectProvider&lt;MeterRegistry&gt; meterRegistry) {\n        System.out.println(&quot;Yeah we got there&quot;);\n        return sessionBuilder -&gt;\n                sessionBuilder.withMetricRegistry(\n                        meterRegistry.getIfAvailable(\n                                () -&gt; Metrics.globalRegistry\n                        )\n                );\n    }\n\n    @Bean\n    @Primary\n    public CqlSession session() {\n        return CqlSession.builder()\n                .withMetricRegistry(Metrics.globalRegistry)\n                .withKeyspace(&quot;test&quot;).build();\n    }\n}\n@ConfigurationProperties(&quot;cassandra&quot;)\npublic class CassandraProperties {\n    public CassandraProperties(List&lt;String&gt; sessionMetrics, List&lt;String&gt; nodeMetrics) {\n        this.sessionMetrics = sessionMetrics;\n        this.nodeMetrics = nodeMetrics;\n    }\n    private List&lt;String&gt; sessionMetrics;\n\n    private List&lt;String&gt; nodeMetrics;\n\n    protected List&lt;String&gt; getSessionMetrics() {\n        return sessionMetrics;\n    }\n\n    protected List&lt;String&gt; getNodeMetrics() {\n        return nodeMetrics;\n    }\n}\n</code></pre>\n<pre class=\"lang-yaml prettyprint-override\"><code>cassandra:\n  session-metrics:\n    - cql-requests\n    - connected-nodes\n  node-metrics:\n    - pool.open-connections\n    - pool.in-flight\n\n</code></pre>\n<p>Then I have the following scala controller</p>\n<pre class=\"lang-scala prettyprint-override\"><code>  @RequestMapping(Array(&quot;/&quot;))\n  def index(): String = {\n    session.execute(&quot;DESC keyspaces;&quot;)\n      .forEach(\n        (row) =&gt; println(\n          row.getString(&quot;keyspace_name&quot;)\n        )\n      )\n    val sb: StringBuilder = new StringBuilder()\n    val registry = session.getMetrics\n      .orElseThrow(() =&gt; new IllegalStateException(&quot;Metrics are disabled&quot;))\n      .getRegistry\n\n    registry\n      .getMeters\n      .forEach(\n        (key, meter) =&gt; {\n          sb.append(key)\n        }\n      )\n    sb.toString()\n  }\n}\n</code></pre>\n<p>But when I run and hit the endpoint I get...</p>\n<blockquote>\n<p>2023-10-24T10:31:24.124-04:00 ERROR 1172 --- [nio-8080-exec-1]\no.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for\nservlet [dispatcherServlet] in context with path [] threw exception\n[Request processing failed: java.lang.IllegalStateException: Metrics\nare disabled] with root cause</p>\n<p>java.lang.IllegalStateException: Metrics are disabled</p>\n</blockquote>\n<p>I also tried just using the global registry but that returns empty</p>\n<pre class=\"lang-scala prettyprint-override\"><code>    Metrics.globalRegistry.getMeters.forEach(\n        meter =&gt; {\n          System.out.println(&quot;Meter is &quot; + meter.getId.toString)\n          sb.append(meter.getId.toString)\n          sb.append(&quot;\\n&quot;)\n        }\n      )\n</code></pre>\n"},{"tags":["java","methods"],"comments":[{"owner":{"account_id":7373320,"reputation":17364,"user_id":5612858,"display_name":"Arnaud"},"score":3,"creation_date":1636038707,"post_id":69841442,"comment_id":123455992,"body_markdown":"`char` primitives are written inside single-quotes, like `&#39;a&#39;`. Also, you compare with `==` , not just `=` which is for assigning a value.","body":"<code>char</code> primitives are written inside single-quotes, like <code>&#39;a&#39;</code>. Also, you compare with <code>==</code> , not just <code>=</code> which is for assigning a value."},{"owner":{"account_id":2360785,"reputation":11123,"user_id":2067492,"display_name":"matt"},"score":1,"creation_date":1636038778,"post_id":69841442,"comment_id":123456019,"body_markdown":"You need to use &#39;==&#39; for comparison &#39;=&#39; is an assignment. Also, string.charAt(v) = &quot;u&quot; ? Should v be i?","body":"You need to use &#39;==&#39; for comparison &#39;=&#39; is an assignment. Also, string.charAt(v) = &quot;u&quot; ? Should v be i?"},{"owner":{"account_id":1713236,"reputation":22836,"user_id":1570854,"accept_rate":71,"display_name":"Lesiak"},"score":1,"creation_date":1636038853,"post_id":69841442,"comment_id":123456054,"body_markdown":"You cannot reference local variables of one function (`vowels` in `main`) in another function (`countVowels`)","body":"You cannot reference local variables of one function (<code>vowels</code> in <code>main</code>) in another function (<code>countVowels</code>)"},{"owner":{"account_id":21825332,"reputation":1219,"user_id":16120911,"display_name":"sittsering"},"score":2,"creation_date":1636038941,"post_id":69841442,"comment_id":123456094,"body_markdown":"you are not even calling your function `countVowels()`","body":"you are not even calling your function <code>countVowels()</code>"},{"owner":{"display_name":"user17329175"},"score":0,"creation_date":1636039786,"post_id":69841442,"comment_id":123456473,"body_markdown":"@sittsering yah, that is the only problem, callong the method class","body":"@sittsering yah, that is the only problem, callong the method class"},{"owner":{"account_id":18243171,"reputation":19300,"user_id":13279831,"display_name":"Nowhere Man"},"score":0,"creation_date":1636039923,"post_id":69841442,"comment_id":123456535,"body_markdown":"You should have tried to compile your code.","body":"You should have tried to compile your code."}],"answers":[{"tags":[],"owner":{"account_id":6338626,"reputation":2513,"user_id":4921317,"accept_rate":91,"display_name":"Gatusko"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1636039141,"creation_date":1636039141,"answer_id":69841583,"question_id":69841442,"body_markdown":"A lot of wrong things in your code. \r\n\r\nIn Java you represent a char with single quotes example &#39;a&#39; &#39;b&#39;, etc.\r\n\r\nString is double quotes and is an Object &quot;a&quot;, &quot;b&quot;. \r\n\r\n\r\nYou can&#39;t compare a Char with a String. \r\n\r\nYou need to comapre char with char. \r\n\r\n    string.charAt(i) == &#39;a&#39;\r\n\r\nand missing the double equals. ","title":"Count all Vowels in a String","body":"<p>A lot of wrong things in your code.</p>\n<p>In Java you represent a char with single quotes example 'a' 'b', etc.</p>\n<p>String is double quotes and is an Object &quot;a&quot;, &quot;b&quot;.</p>\n<p>You can't compare a Char with a String.</p>\n<p>You need to comapre char with char.</p>\n<pre><code>string.charAt(i) == 'a'\n</code></pre>\n<p>and missing the double equals.</p>\n"},{"comments":[{"owner":{"display_name":"user17329175"},"score":0,"creation_date":1636041419,"post_id":69841858,"comment_id":123457200,"body_markdown":"so for the the variable to have return value, the void must replace with int or any?\nalso, i already getting the idea because of the comparison","body":"so for the the variable to have return value, the void must replace with int or any? also, i already getting the idea because of the comparison"},{"owner":{"account_id":21825332,"reputation":1219,"user_id":16120911,"display_name":"sittsering"},"score":0,"creation_date":1636048925,"post_id":69841858,"comment_id":123460344,"body_markdown":"yes, it depends on the type of value you are returning. since `vowels` is int type, we use `int` as return type.","body":"yes, it depends on the type of value you are returning. since <code>vowels</code> is int type, we use <code>int</code> as return type."}],"tags":[],"owner":{"account_id":21825332,"reputation":1219,"user_id":16120911,"display_name":"sittsering"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1636040758,"creation_date":1636040282,"answer_id":69841858,"question_id":69841442,"body_markdown":"Most of the issues have been answered by others, remaining few left. \r\n&lt;br&gt;Which are, you are not calling your function `countVowels()` and you have declare your variable `vowels` in `main` method, not in your function `countVowels()` .&lt;br&gt;\r\nMethods with return value:\r\n````\r\nimport java.util.Scanner;\r\npublic class Main\r\n{\r\n    public static void main(String[] args) {\r\n        Scanner input = new Scanner(System.in);\r\n        System.out.println(&quot;Enter String: &quot;);\r\n        String string = input.nextLine(); \r\n        string=string.toLowerCase();\r\n        int vowels = countVowels(string); // calling function which returns a value.\r\n        System.out.println(&quot;Vowels: &quot;+ vowels);\r\n    }\r\n    public static int countVowels(String string)\r\n    {\r\n        int i,vowels=0;\r\n        for (i=0;i&lt;string.length();i++)\r\n        {\r\n            if (string.charAt(i) == &#39;a&#39; || string.charAt(i) == &#39;e&#39; || string.charAt(i) == &#39;i&#39; || string.charAt(i) == &#39;o&#39; || string.charAt(i) == &#39;u&#39;)\r\n            {\r\n                vowels++; \r\n            }\r\n        }\r\n        return vowels;\r\n    }\r\n}\r\n````\r\nMethods without return value:\r\n````\r\nimport java.util.Scanner;\r\npublic class Main\r\n{\r\n    public static void main(String[] args) {\r\n        .... // same code as above\r\n        countVowels(string);  // calling funtion, this doesnt return value      \r\n    }\r\n    public static void countVowels(String string)\r\n    {\r\n        int i,vowels=0;\r\n        for (i=0;i&lt;string.length();i++)\r\n        {\r\n            .... // same code as above\r\n        }\r\n        System.out.println(&quot;Vowels: &quot;+ vowels);\r\n    }\r\n}\r\n````\r\n","title":"Count all Vowels in a String","body":"<p>Most of the issues have been answered by others, remaining few left.\n<br>Which are, you are not calling your function <code>countVowels()</code> and you have declare your variable <code>vowels</code> in <code>main</code> method, not in your function <code>countVowels()</code> .<br>\nMethods with return value:</p>\n<pre><code>import java.util.Scanner;\npublic class Main\n{\n    public static void main(String[] args) {\n        Scanner input = new Scanner(System.in);\n        System.out.println(&quot;Enter String: &quot;);\n        String string = input.nextLine(); \n        string=string.toLowerCase();\n        int vowels = countVowels(string); // calling function which returns a value.\n        System.out.println(&quot;Vowels: &quot;+ vowels);\n    }\n    public static int countVowels(String string)\n    {\n        int i,vowels=0;\n        for (i=0;i&lt;string.length();i++)\n        {\n            if (string.charAt(i) == 'a' || string.charAt(i) == 'e' || string.charAt(i) == 'i' || string.charAt(i) == 'o' || string.charAt(i) == 'u')\n            {\n                vowels++; \n            }\n        }\n        return vowels;\n    }\n}\n</code></pre>\n<p>Methods without return value:</p>\n<pre><code>import java.util.Scanner;\npublic class Main\n{\n    public static void main(String[] args) {\n        .... // same code as above\n        countVowels(string);  // calling funtion, this doesnt return value      \n    }\n    public static void countVowels(String string)\n    {\n        int i,vowels=0;\n        for (i=0;i&lt;string.length();i++)\n        {\n            .... // same code as above\n        }\n        System.out.println(&quot;Vowels: &quot;+ vowels);\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"display_name":"user17329175"},"score":0,"creation_date":1636040741,"post_id":69841932,"comment_id":123456894,"body_markdown":"yah, my fault. I already answer my question, May I ask if it is now correct","body":"yah, my fault. I already answer my question, May I ask if it is now correct"},{"owner":{"account_id":16145881,"reputation":441,"user_id":11655642,"display_name":"shockwave"},"score":0,"creation_date":1636040908,"post_id":69841932,"comment_id":123456973,"body_markdown":"It looks proper.","body":"It looks proper."}],"tags":[],"owner":{"account_id":16145881,"reputation":441,"user_id":11655642,"display_name":"shockwave"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1636040571,"creation_date":1636040571,"answer_id":69841932,"question_id":69841442,"body_markdown":"You need to fix following issues,\r\n1. The scope of variable `vowels` is set to method level so it is not available outside `main` method\r\n2. The method `countVowels` is never invoked\r\n3. Assignment operator `=` is used in place of comparison `==`\r\n4. String literal is used `&quot; &quot;` in place of char `&#39; &#39;`\r\n","title":"Count all Vowels in a String","body":"<p>You need to fix following issues,</p>\n<ol>\n<li>The scope of variable <code>vowels</code> is set to method level so it is not available outside <code>main</code> method</li>\n<li>The method <code>countVowels</code> is never invoked</li>\n<li>Assignment operator <code>=</code> is used in place of comparison <code>==</code></li>\n<li>String literal is used <code>&quot; &quot;</code> in place of char <code>' '</code></li>\n</ol>\n"},{"tags":[],"owner":{"display_name":"user17329175"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1636040677,"creation_date":1636040677,"answer_id":69841965,"question_id":69841442,"body_markdown":"My code above has many problems. \r\n\r\nFirst, the main class not even calling the method class `(countVowels)`\r\n\r\nSecond, I used double quote `&quot; &quot;` and calling it `char`. String uses `&quot; &quot;` and char uses `&#39; &#39;`\r\n\r\nThird, I used single `=` instead of `==`\r\n\r\nBelow is the refined code\r\n\r\n    import java.util.Scanner;\r\n    public class Main\r\n    {\r\n    \tpublic static void main(String[] args) {\r\n    \t \r\n    \t\tScanner input = new Scanner(System.in);\r\n            System.out.println(&quot;Enter String: &quot;);\r\n            String string = input.nextLine(); \r\n    \r\n            string=string.toLowerCase();\r\n            countVowels(string);\r\n            \r\n    \t}\r\n        public static void countVowels(String string) //method class, dito yung parang procedure nung pagbibilang ng vowels\r\n        {\r\n            int v;\r\n            int vowels = 0;\r\n            for (v=0;v&lt;string.length();v++)\r\n            {\r\n                if (string.charAt(v) == &#39;a&#39; || string.charAt(v) == &#39;e&#39; || string.charAt(v) == &#39;i&#39; || string.charAt(v) == &#39;o&#39; || string.charAt(v) == &#39;u&#39;)\r\n                {\r\n                    vowels++; \r\n                }\r\n                \r\n            }\r\n            System.out.println(&quot;Vowels: &quot;+ vowels);\r\n            \r\n            \r\n    \t}\r\n    }","title":"Count all Vowels in a String","body":"<p>My code above has many problems.</p>\n<p>First, the main class not even calling the method class <code>(countVowels)</code></p>\n<p>Second, I used double quote <code>&quot; &quot;</code> and calling it <code>char</code>. String uses <code>&quot; &quot;</code> and char uses <code>' '</code></p>\n<p>Third, I used single <code>=</code> instead of <code>==</code></p>\n<p>Below is the refined code</p>\n<pre><code>import java.util.Scanner;\npublic class Main\n{\n    public static void main(String[] args) {\n     \n        Scanner input = new Scanner(System.in);\n        System.out.println(&quot;Enter String: &quot;);\n        String string = input.nextLine(); \n\n        string=string.toLowerCase();\n        countVowels(string);\n        \n    }\n    public static void countVowels(String string) //method class, dito yung parang procedure nung pagbibilang ng vowels\n    {\n        int v;\n        int vowels = 0;\n        for (v=0;v&lt;string.length();v++)\n        {\n            if (string.charAt(v) == 'a' || string.charAt(v) == 'e' || string.charAt(v) == 'i' || string.charAt(v) == 'o' || string.charAt(v) == 'u')\n            {\n                vowels++; \n            }\n            \n        }\n        System.out.println(&quot;Vowels: &quot;+ vowels);\n        \n        \n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1689973,"reputation":37330,"user_id":1552534,"display_name":"WJS"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1636044909,"creation_date":1636044909,"answer_id":69843030,"question_id":69841442,"body_markdown":"If you&#39;re interested in an alternative method, try this.\r\n- stream the characters to be processed one at a time.\r\n- filter those that are contained in the string of vowels.\r\n- and count those that are passed through.\r\n```\r\nString str = &quot;To be or not to be, that is the question.&quot;;\r\nlong count = str.chars().filter(ch-&gt;&quot;aeiou&quot;.contains((char)ch+&quot;&quot;)).count();\t\r\nSystem.out.println(count);\r\n```\r\nPrints\r\n```\r\n13","title":"Count all Vowels in a String","body":"<p>If you're interested in an alternative method, try this.</p>\n<ul>\n<li>stream the characters to be processed one at a time.</li>\n<li>filter those that are contained in the string of vowels.</li>\n<li>and count those that are passed through.</li>\n</ul>\n<pre><code>String str = &quot;To be or not to be, that is the question.&quot;;\nlong count = str.chars().filter(ch-&gt;&quot;aeiou&quot;.contains((char)ch+&quot;&quot;)).count(); \nSystem.out.println(count);\n</code></pre>\n<p>Prints</p>\n<pre><code>13\n</code></pre>\n"},{"comments":[{"owner":{"account_id":23794816,"reputation":884,"user_id":17805827,"display_name":"Zaheer Ansari"},"score":0,"creation_date":1698209376,"post_id":77354211,"comment_id":136374609,"body_markdown":"It would do the work, but this much is not required for the solution.","body":"It would do the work, but this much is not required for the solution."},{"owner":{"account_id":16285373,"reputation":1,"user_id":11760276,"display_name":"Arijit"},"score":0,"creation_date":1698320486,"post_id":77354211,"comment_id":136391938,"body_markdown":"I agree and if you see the start of my answer, I have stated that it is not the most straighforward solution. However my purpose was to show that, if you are given  different or complex lookup requirement, this map concept would be faster and more elegant  than using switch or loop type solution.","body":"I agree and if you see the start of my answer, I have stated that it is not the most straighforward solution. However my purpose was to show that, if you are given  different or complex lookup requirement, this map concept would be faster and more elegant  than using switch or loop type solution."}],"tags":[],"owner":{"account_id":16285373,"reputation":1,"user_id":11760276,"display_name":"Arijit"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698169162,"creation_date":1698168567,"answer_id":77354211,"question_id":69841442,"body_markdown":"   I have tried a different approach ( it is definitely not the most starightforward solution one like using switch statements etc )\r\n\r\nI have used linkedHasMap and then, stored the key and values ( based on each key as per the input string, we will store the count . If the key appears only once, their count will remain 1 else it will get incremented).\r\n\r\nOnce the linked has map is populated, I have iterated over the linkedhashmap and summed up the getValue for any vowel keys . \r\n\r\nHope, this gives a different food of thought on these kind of problems\r\n\r\n     import java.util.*;\r\n     class Main {\r\n     public static int  countVowelConsonants(String inpStr) {\r\n        Map&lt;Character,Integer&gt; inpCount = new LinkedHashMap&lt;&gt;();\r\n        int totalVowel =0;\r\n        for ( char c : inpStr.toCharArray())\r\n        {\r\n            inpCount.put(c,inpCount.containsKey(c)?inpCount.get(c)+1:1);\r\n        }\r\n\r\n        for (Map.Entry&lt;Character,Integer&gt; iterator : inpCount.entrySet())\r\n        {\r\n            if (iterator.getKey()==&#39;a&#39;||iterator.getKey()==&#39;e&#39;||iterator.getKey()==&#39;i&#39;||iterator.getKey()==&#39;o&#39;||iterator.getKey()==&#39;u&#39;)\r\n            {\r\n                totalVowel = totalVowel + iterator.getValue();\r\n\r\n        }\r\n        }\r\n        return totalVowel;\r\n    }\r\n\r\n    public static void main(String[] args)\r\n    {\r\n        \r\n        String inpstr = &quot;StackOverFlow&quot;;              \r\n        System.out.println(countVowelConsonants(inpstr.toLowerCase()));\r\n\r\n    }\r\n    }","title":"Count all Vowels in a String","body":"<p>I have tried a different approach ( it is definitely not the most starightforward solution one like using switch statements etc )</p>\n<p>I have used linkedHasMap and then, stored the key and values ( based on each key as per the input string, we will store the count . If the key appears only once, their count will remain 1 else it will get incremented).</p>\n<p>Once the linked has map is populated, I have iterated over the linkedhashmap and summed up the getValue for any vowel keys .</p>\n<p>Hope, this gives a different food of thought on these kind of problems</p>\n<pre><code> import java.util.*;\n class Main {\n public static int  countVowelConsonants(String inpStr) {\n    Map&lt;Character,Integer&gt; inpCount = new LinkedHashMap&lt;&gt;();\n    int totalVowel =0;\n    for ( char c : inpStr.toCharArray())\n    {\n        inpCount.put(c,inpCount.containsKey(c)?inpCount.get(c)+1:1);\n    }\n\n    for (Map.Entry&lt;Character,Integer&gt; iterator : inpCount.entrySet())\n    {\n        if (iterator.getKey()=='a'||iterator.getKey()=='e'||iterator.getKey()=='i'||iterator.getKey()=='o'||iterator.getKey()=='u')\n        {\n            totalVowel = totalVowel + iterator.getValue();\n\n    }\n    }\n    return totalVowel;\n}\n\npublic static void main(String[] args)\n{\n    \n    String inpstr = &quot;StackOverFlow&quot;;              \n    System.out.println(countVowelConsonants(inpstr.toLowerCase()));\n\n}\n}\n</code></pre>\n"}],"owner":{"display_name":"user17329175"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":942,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":6,"score":1,"last_activity_date":1698169162,"creation_date":1636038633,"question_id":69841442,"body_markdown":"I am working on a program that counts the number of vowels in a string but I am getting an error:\r\n\r\n    import java.util.Scanner;\r\n    public class Main\r\n    {\r\n    \tpublic static void main(String[] args) {\r\n    \t    int vowels = 0;\r\n    \t    \r\n    \t    \r\n    \t\tScanner input = new Scanner(System.in);\r\n            System.out.println(&quot;Enter String: &quot;);\r\n            String string = input.nextLine(); \r\n    \r\n            string=string.toLowerCase();\r\n            System.out.println(&quot;Vowels: &quot;+ vowels);\r\n    \t}\r\n        public static void countVowels(String string)\r\n        {\r\n            int i;\r\n            for (i=0;i&lt;string.length();i++)\r\n            {\r\n                if (string.charAt(i) = &quot;a&quot; || string.charAt(i) = &quot;e&quot; || string.charAt(i) = &quot;i&quot; || string.charAt(i) = &quot;o&quot; || string.charAt(v) = &quot;u&quot;)\r\n                {\r\n                    vowels++; \r\n                }\r\n            }\r\n    \t}\r\n    }\r\n    \r\n     \r\nOh and I want to ask what it means to have methods without return value/with return value. Not sure if the code above has return value.","title":"Count all Vowels in a String","body":"<p>I am working on a program that counts the number of vowels in a string but I am getting an error:</p>\n<pre><code>import java.util.Scanner;\npublic class Main\n{\n    public static void main(String[] args) {\n        int vowels = 0;\n        \n        \n        Scanner input = new Scanner(System.in);\n        System.out.println(&quot;Enter String: &quot;);\n        String string = input.nextLine(); \n\n        string=string.toLowerCase();\n        System.out.println(&quot;Vowels: &quot;+ vowels);\n    }\n    public static void countVowels(String string)\n    {\n        int i;\n        for (i=0;i&lt;string.length();i++)\n        {\n            if (string.charAt(i) = &quot;a&quot; || string.charAt(i) = &quot;e&quot; || string.charAt(i) = &quot;i&quot; || string.charAt(i) = &quot;o&quot; || string.charAt(v) = &quot;u&quot;)\n            {\n                vowels++; \n            }\n        }\n    }\n}\n\n \n</code></pre>\n<p>Oh and I want to ask what it means to have methods without return value/with return value. Not sure if the code above has return value.</p>\n"},{"tags":["java","spring-boot","spring-data-redis","redis-cache"],"owner":{"account_id":29718864,"reputation":3,"user_id":22776692,"display_name":"let_there_be_peace"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":62,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1698168719,"creation_date":1698142193,"question_id":77351201,"body_markdown":"While working on `spring boot` application I added `@Cacheable` annotation in service layer. I was trying to store `org.json.simple.JSONObject` to `java.util.List&lt;&gt;` object. Without the `@Cacheable` annotation process is working fine. But not with it.\r\n\r\n\r\n\r\n**Code** *(service)*:\r\n\r\n```\r\n@Cacheable(value = &quot;EmployeeDetail&quot;)\r\n\t@Override\r\n\tpublic List&lt;JSONObject&gt; getAllRecords() {\r\n\r\n\t\r\n\t\tList&lt;EmployeeDetail&gt; list =  empService.fetchAll();\r\n\t\tList&lt;JSONObject&gt; arr=null;\r\n\t\tJSONObject obj = null;\r\n\t\tif(list!=null &amp;&amp; list.size()&gt;0) {\r\n\t\t\tarr = new ArrayList&lt;JSONObject&gt;();\r\n\t\t\tfor(EmployeeDetail emp:list) {\r\n\t\t\t\tobj = new JSONObject();\r\n\t\t\t\tString ID = emp.getId()+&quot;&quot;;\r\n\t\t\t\tString firstName = emp.getFirstName();\r\n\t\t\t\tString maidenName = emp.getMaidenName()==null?&quot;&quot;:emp.getMaidenName();\r\n\t\t\t\tString lastName = emp.getLastName()==null?&quot;&quot;:emp.getLastName();\r\n\t\t\t\tString FullName = firstName+&quot; &quot;+maidenName+&quot; &quot;+lastName;\r\n\t\t\t\tString Salary = emp.getSalary();\r\n\t\t\t\tString Address = emp.getAddress();\r\n\t\t\t\tString Gender = emp.getGender();\r\n\t\t\t\tobj.put(&quot;ID&quot;, ID);\r\n\t\t\t\tobj.put(&quot;Full Name&quot;, FullName);\r\n\t\t\t\tobj.put(&quot;Salary&quot;, Salary);\r\n\t\t\t\tobj.put(&quot;Address&quot;, Address);\r\n\t\t\t\tobj.put(&quot;Gender&quot;, Gender);\r\n\t\t\t\t\r\n\t\t\t\tarr.add(obj);\r\n\t\t\t}\r\n\t\t\r\n\t\t}\r\n\t\treturn arr;\r\n}\r\n```\r\n\t\r\n\r\n\r\n\r\n**code** *(controller)*\r\n\r\n```\r\n@GetMapping(value=&quot;getAll&quot;)\r\n\tpublic \tList&lt;JSONObject&gt; fetch(){\r\n\t\tList&lt;JSONObject&gt; obj =  service.getAllRecords();\r\n\t\treturn obj;\r\n\r\n}\r\n```\r\n\r\n\r\n**application.properties**\r\n\r\n```\r\nserver.port = 1122\r\nspring.datasource.url=jdbc:mysql://localhost:3306/kitchoemployee?createDatabaseIfNotExist=true\r\nspring.datasource.username=root\r\nspring.datasource.password=root\r\n\r\nspring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQLDialect\r\nspring.jpa.generate-ddl=true\r\nspring.jpa.hibernate.ddl-auto=update\r\nspring.datasource.driver-class-name=com.mysql.jdbc.Driver\r\nspring.jpa.show-sql=true\r\nspring.jpa.hibernate.naming.implicit-strategy = org.hibernate.boot.model.naming.ImplicitNamingStrategyLegacyJpaImpl\r\nspring.jpa.hibernate.naming.physical-strategy = org.hibernate.boot.model.naming.PhysicalNamingStrategyStandardImpl\r\n\r\n\r\nspring.cache.type=redis\r\nspring.redis.host=localhost\r\nspring.redis.port=6379\r\n\r\nspring.cache.redis.key-prefix=emp-\r\n#spring.cache.redis.time-to-live=60000\r\nspring.cache.redis.use-key-prefix=true\r\n```\r\n\r\nI am getting below error in response:\r\n\r\n`java.lang.ClassCastException: org.json.simple.JSONObject cannot be cast to java.util.List\r\n        at com.kitcho.service.KitchoServiceImpl$$EnhancerBySpringCGLIB$$c9dae2fe.getAllRecords(&lt;generated&gt;) ~[classes!/:0.0.1-SNAPSHOT]\r\n        at com.kitcho.controller.MyController.fetch(MyController.java:139) ~[classes!/:0.0.1-SNAPSHOT]\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_212]\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_212]`\r\n\r\nhowever when I comment the `@Cacheable` annotation code runs fine.I am using `JsonObject` because for some reasons, UI developers want this format with &quot;Full Name&quot; with space in between.\r\n\r\nWhat is the issue. How can I resolve it. I want to keep using Caching.","title":"getting class cast exception when using redis cache","body":"<p>While working on <code>spring boot</code> application I added <code>@Cacheable</code> annotation in service layer. I was trying to store <code>org.json.simple.JSONObject</code> to <code>java.util.List&lt;&gt;</code> object. Without the <code>@Cacheable</code> annotation process is working fine. But not with it.</p>\n<p><strong>Code</strong> <em>(service)</em>:</p>\n<pre><code>@Cacheable(value = &quot;EmployeeDetail&quot;)\n    @Override\n    public List&lt;JSONObject&gt; getAllRecords() {\n\n    \n        List&lt;EmployeeDetail&gt; list =  empService.fetchAll();\n        List&lt;JSONObject&gt; arr=null;\n        JSONObject obj = null;\n        if(list!=null &amp;&amp; list.size()&gt;0) {\n            arr = new ArrayList&lt;JSONObject&gt;();\n            for(EmployeeDetail emp:list) {\n                obj = new JSONObject();\n                String ID = emp.getId()+&quot;&quot;;\n                String firstName = emp.getFirstName();\n                String maidenName = emp.getMaidenName()==null?&quot;&quot;:emp.getMaidenName();\n                String lastName = emp.getLastName()==null?&quot;&quot;:emp.getLastName();\n                String FullName = firstName+&quot; &quot;+maidenName+&quot; &quot;+lastName;\n                String Salary = emp.getSalary();\n                String Address = emp.getAddress();\n                String Gender = emp.getGender();\n                obj.put(&quot;ID&quot;, ID);\n                obj.put(&quot;Full Name&quot;, FullName);\n                obj.put(&quot;Salary&quot;, Salary);\n                obj.put(&quot;Address&quot;, Address);\n                obj.put(&quot;Gender&quot;, Gender);\n                \n                arr.add(obj);\n            }\n        \n        }\n        return arr;\n}\n</code></pre>\n<p><strong>code</strong> <em>(controller)</em></p>\n<pre><code>@GetMapping(value=&quot;getAll&quot;)\n    public  List&lt;JSONObject&gt; fetch(){\n        List&lt;JSONObject&gt; obj =  service.getAllRecords();\n        return obj;\n\n}\n</code></pre>\n<p><strong>application.properties</strong></p>\n<pre><code>server.port = 1122\nspring.datasource.url=jdbc:mysql://localhost:3306/kitchoemployee?createDatabaseIfNotExist=true\nspring.datasource.username=root\nspring.datasource.password=root\n\nspring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQLDialect\nspring.jpa.generate-ddl=true\nspring.jpa.hibernate.ddl-auto=update\nspring.datasource.driver-class-name=com.mysql.jdbc.Driver\nspring.jpa.show-sql=true\nspring.jpa.hibernate.naming.implicit-strategy = org.hibernate.boot.model.naming.ImplicitNamingStrategyLegacyJpaImpl\nspring.jpa.hibernate.naming.physical-strategy = org.hibernate.boot.model.naming.PhysicalNamingStrategyStandardImpl\n\n\nspring.cache.type=redis\nspring.redis.host=localhost\nspring.redis.port=6379\n\nspring.cache.redis.key-prefix=emp-\n#spring.cache.redis.time-to-live=60000\nspring.cache.redis.use-key-prefix=true\n</code></pre>\n<p>I am getting below error in response:</p>\n<p><code>java.lang.ClassCastException: org.json.simple.JSONObject cannot be cast to java.util.List at com.kitcho.service.KitchoServiceImpl$$EnhancerBySpringCGLIB$$c9dae2fe.getAllRecords(&lt;generated&gt;) ~[classes!/:0.0.1-SNAPSHOT] at com.kitcho.controller.MyController.fetch(MyController.java:139) ~[classes!/:0.0.1-SNAPSHOT] at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_212] at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_212]</code></p>\n<p>however when I comment the <code>@Cacheable</code> annotation code runs fine.I am using <code>JsonObject</code> because for some reasons, UI developers want this format with &quot;Full Name&quot; with space in between.</p>\n<p>What is the issue. How can I resolve it. I want to keep using Caching.</p>\n"},{"tags":["java","mockito","spy"],"answers":[{"comments":[{"owner":{"account_id":10511728,"reputation":13,"user_id":7747208,"display_name":"Toralf Schneider"},"score":0,"creation_date":1698216910,"post_id":77354180,"comment_id":136375420,"body_markdown":"Damn, I really missed the obvious on this one, didn&#39;t I?","body":"Damn, I really missed the obvious on this one, didn&#39;t I?"}],"tags":[],"owner":{"account_id":204659,"reputation":37559,"user_id":453005,"accept_rate":100,"display_name":"DwB"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1698168273,"creation_date":1698168273,"answer_id":77354180,"question_id":77354050,"body_markdown":"Your test is wrong;\r\nyou are attempting to use the Mock object (named list) as a Spy object (which is named spyList).\r\n\r\nTry this:\r\n```Java\r\nspyList.add(&quot;test&quot;);\r\nMockito.verify(spyList).add(&quot;test&quot;);\r\n```\r\n","title":"Mockito verify works on mock but not on spy","body":"<p>Your test is wrong;\nyou are attempting to use the Mock object (named list) as a Spy object (which is named spyList).</p>\n<p>Try this:</p>\n<pre><code>spyList.add(&quot;test&quot;);\nMockito.verify(spyList).add(&quot;test&quot;);\n</code></pre>\n"}],"owner":{"account_id":10511728,"reputation":13,"user_id":7747208,"display_name":"Toralf Schneider"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77354180,"answer_count":1,"score":0,"last_activity_date":1698168273,"creation_date":1698166922,"question_id":77354050,"body_markdown":"I have a problem with mockito#spy it does not work.\r\nI have boiled down the problem to this:\r\n\r\n    var list = (ArrayList&lt;String&gt;) Mockito.mock(ArrayList.class);\r\n    var spyList = Mockito.spy(list);\r\n\r\n    list.add(&quot;test&quot;);\r\n    Mockito.verify(spyList).add(&quot;test&quot;);\r\n\r\nHowerver, if I verify on the Mock itself, it does work:\r\n\r\n    var list = (ArrayList&lt;String&gt;) Mockito.mock(ArrayList.class);\r\n    //var spyList = Mockito.spy(list);\r\n\r\n    list.add(&quot;test&quot;);\r\n    Mockito.verify(list).add(&quot;test&quot;);\r\n\r\nI want to use spy on a real object of course, but for the sake of finding my problem, I am using a mock for now.\r\n\r\nI am using Junit 5.7.1 and Mockito 3.3.3. Those are pretty much set in stone I&#39;m afraid.\r\n\r\nAny suggestion what could be the problem?","title":"Mockito verify works on mock but not on spy","body":"<p>I have a problem with mockito#spy it does not work.\nI have boiled down the problem to this:</p>\n<pre><code>var list = (ArrayList&lt;String&gt;) Mockito.mock(ArrayList.class);\nvar spyList = Mockito.spy(list);\n\nlist.add(&quot;test&quot;);\nMockito.verify(spyList).add(&quot;test&quot;);\n</code></pre>\n<p>Howerver, if I verify on the Mock itself, it does work:</p>\n<pre><code>var list = (ArrayList&lt;String&gt;) Mockito.mock(ArrayList.class);\n//var spyList = Mockito.spy(list);\n\nlist.add(&quot;test&quot;);\nMockito.verify(list).add(&quot;test&quot;);\n</code></pre>\n<p>I want to use spy on a real object of course, but for the sake of finding my problem, I am using a mock for now.</p>\n<p>I am using Junit 5.7.1 and Mockito 3.3.3. Those are pretty much set in stone I'm afraid.</p>\n<p>Any suggestion what could be the problem?</p>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":10235034,"reputation":10879,"user_id":7554328,"display_name":"Darren Forsythe"},"score":0,"creation_date":1530985409,"post_id":51225325,"comment_id":89431384,"body_markdown":"Possible duplicate of [How to display auto-configuration report when running a Spring Boot application](https://stackoverflow.com/questions/47101743/how-to-display-auto-configuration-report-when-running-a-spring-boot-application)","body":"Possible duplicate of <a href=\"https://stackoverflow.com/questions/47101743/how-to-display-auto-configuration-report-when-running-a-spring-boot-application\">How to display auto-configuration report when running a Spring Boot application</a>"},{"owner":{"account_id":2557734,"reputation":1911,"user_id":2219361,"accept_rate":88,"display_name":"Taoufik Mohdit"},"score":0,"creation_date":1658923762,"post_id":51225325,"comment_id":129171716,"body_markdown":"One of these 2 command line arguments can be used for this purpose: `--debug` or `--trace`","body":"One of these 2 command line arguments can be used for this purpose: <code>--debug</code> or <code>--trace</code>"}],"answers":[{"comments":[{"owner":{"account_id":5004368,"reputation":1213,"user_id":5113941,"accept_rate":25,"display_name":"Oren Bochman"},"score":2,"creation_date":1530986342,"post_id":51225501,"comment_id":89431616,"body_markdown":"thanks I just added to the application.yml:\n\ndebug: true","body":"thanks I just added to the application.yml:  debug: true"},{"owner":{"account_id":3140342,"reputation":550,"user_id":2655908,"accept_rate":50,"display_name":"Net Dawg"},"score":0,"creation_date":1631825653,"post_id":51225501,"comment_id":122334838,"body_markdown":"@Igor - For command Line - have Spring Boot Application implement `CommandLineRunner`.  This will pickup the properties from `applications.properties`.","body":"@Igor - For command Line - have Spring Boot Application implement <code>CommandLineRunner</code>.  This will pickup the properties from <code>applications.properties</code>."}],"tags":[],"owner":{"account_id":9589141,"reputation":929,"user_id":7120711,"display_name":"Joe Doe"},"comment_count":2,"down_vote_count":1,"up_vote_count":57,"is_accepted":true,"score":56,"last_activity_date":1698167754,"creation_date":1530984919,"answer_id":51225501,"question_id":51225325,"body_markdown":"Adding `debug=true` to the `application.properties` or \r\n`debug: true` in the `application.yml`, file should help. You&#39;ll get more detailed logging. \r\n\r\nGenerally, if you want to see more fine-grained log messages from all members of a given package, you can set that by adding a line such as:\r\n\r\n`logging.level.&lt;package_name&gt;=&lt;LOGGING_LEVEL&gt;`\r\n\r\nfor example:\r\n\r\n`logging.level.org.springframework.context=DEBUG`\r\n\r\nThese log messages may be helpful in finding the core of the problem (in this case why a given exception was thrown).","title":"Spring Boot requests: to &quot;re-run your application with &#39;debug&#39; enabled&quot; - how do I?","body":"<p>Adding <code>debug=true</code> to the <code>application.properties</code> or\n<code>debug: true</code> in the <code>application.yml</code>, file should help. You'll get more detailed logging.</p>\n<p>Generally, if you want to see more fine-grained log messages from all members of a given package, you can set that by adding a line such as:</p>\n<p><code>logging.level.&lt;package_name&gt;=&lt;LOGGING_LEVEL&gt;</code></p>\n<p>for example:</p>\n<p><code>logging.level.org.springframework.context=DEBUG</code></p>\n<p>These log messages may be helpful in finding the core of the problem (in this case why a given exception was thrown).</p>\n"},{"tags":[],"owner":{"account_id":466219,"reputation":1230,"user_id":870834,"accept_rate":90,"display_name":"ADJ"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1647405613,"creation_date":1647405613,"answer_id":71491879,"question_id":51225325,"body_markdown":"@Joe Doe&#39;s answer gives much more details, but in brief:\r\n\r\nAdd below in your application.yml:\r\n\r\n    debug: true","title":"Spring Boot requests: to &quot;re-run your application with &#39;debug&#39; enabled&quot; - how do I?","body":"<p>@Joe Doe's answer gives much more details, but in brief:</p>\n<p>Add below in your application.yml:</p>\n<pre><code>debug: true\n</code></pre>\n"},{"comments":[{"owner":{"account_id":16963771,"reputation":521,"user_id":12270243,"display_name":"Damonio"},"score":0,"creation_date":1660580375,"post_id":72497572,"comment_id":129560569,"body_markdown":"Op asked how he can he run the application with debug enabled, randomly saying that changing the port solved your issue does not help the question asked. Changing the port should only be done if there is a port already in use exception of if you intend to use your application in a different port other than the default","body":"Op asked how he can he run the application with debug enabled, randomly saying that changing the port solved your issue does not help the question asked. Changing the port should only be done if there is a port already in use exception of if you intend to use your application in a different port other than the default"}],"tags":[],"owner":{"account_id":25470420,"reputation":1,"user_id":19268712,"display_name":"Sujit Kate"},"comment_count":1,"down_vote_count":4,"up_vote_count":0,"is_accepted":false,"score":-4,"last_activity_date":1654339214,"creation_date":1654323642,"answer_id":72497572,"question_id":51225325,"body_markdown":"For me its solved my changing port number in `application.properties` in `src/main`\r\n\r\n```\r\nserver.port=9090\r\n```","title":"Spring Boot requests: to &quot;re-run your application with &#39;debug&#39; enabled&quot; - how do I?","body":"<p>For me its solved my changing port number in <code>application.properties</code> in <code>src/main</code></p>\n<pre><code>server.port=9090\n</code></pre>\n"}],"owner":{"account_id":5004368,"reputation":1213,"user_id":5113941,"accept_rate":25,"display_name":"Oren Bochman"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":70078,"favorite_count":0,"down_vote_count":1,"up_vote_count":41,"accepted_answer_id":51225501,"answer_count":3,"score":40,"last_activity_date":1698167754,"creation_date":1530983587,"question_id":51225325,"body_markdown":"I am getting a myriad of exceptions trying to run my spring boot project in Eclipse. What they have in common is a &quot;re-run your application with &#39;debug&#39; enabled&quot; How exactly is this done?\r\n\r\n* A maven setting ?\r\n* Use the debugger ?\r\n* A command line argument ?\r\n* A vm argument ?\r\n* A spring application settings ?\r\n\r\nI tried a few to no avail. Your assistance much appreciated! ","title":"Spring Boot requests: to &quot;re-run your application with &#39;debug&#39; enabled&quot; - how do I?","body":"<p>I am getting a myriad of exceptions trying to run my spring boot project in Eclipse. What they have in common is a \"re-run your application with 'debug' enabled\" How exactly is this done?</p>\n\n<ul>\n<li>A maven setting ?</li>\n<li>Use the debugger ?</li>\n<li>A command line argument ?</li>\n<li>A vm argument ?</li>\n<li>A spring application settings ?</li>\n</ul>\n\n<p>I tried a few to no avail. Your assistance much appreciated! </p>\n"},{"tags":["java","spring-data-jpa"],"owner":{"account_id":27562228,"reputation":13,"user_id":21035083,"display_name":"Tyali Nexi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":15,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1698167350,"creation_date":1698167350,"question_id":77354082,"body_markdown":"The idea is to have the same Repository to query all the types of the contracts that come from different tables. Here, I used 3 tables to explain the problem :\r\n\r\nI have this JPA entity\r\n\r\n```java\r\n@Entity\r\n@Data\r\n@AllArgsConstructor\r\n@NoArgsConstructor\r\npublic class ContractEntity {\r\n\r\n  @Id\r\n  @Column(name = &quot;c_reference&quot;)\r\n  private String cReference;\r\n\r\n  @Column(name = &quot;c_number&quot;)\r\n  private String cNumber;\r\n\r\n  @Column(name = &quot;c_index&quot;)\r\n  private Integer cIndex;\r\n}\r\n\r\n```\r\n\r\nAnd the Spring Boot Repository class is\r\n\r\n```java\r\n@Repository\r\npublic interface ContractClientRepository\r\n    extends CrudRepository&lt;ContractEntity, String&gt; {\r\n  // mssql native query\r\n  @Query(\r\n      value =\r\n          &quot;&quot;&quot;\r\n              SELECT co_reference AS c_reference, null AS c_number, 1 AS c_index\r\n              FROM contract10, client ...\r\n              WHERE ...\r\n                AND email = :email\r\n\r\n              UNION\r\n\r\n              SELECT contract_reference AS c_reference, null AS c_number, 2 AS c_index\r\n              FROM contract20, client ...\r\n              WHERE ...\r\n                AND email = :email\r\n\r\n              UNION\r\n\r\n              SELECT ref AS c_reference, null AS c_number, role AS c_index\r\n              FROM contract30, client ...\r\n              WHERE ...\r\n                AND email = :email\r\n                 &quot;&quot;&quot;,\r\n      nativeQuery = true)\r\n  List&lt;ContractEntity&gt; findByEmail(@Param(&quot;email&quot;) String email);\r\n}\r\n```\r\n\r\nThe code works well, but I have strange behavior due to a problem in data:\r\n\r\n```\r\ncontract10\r\nc_reference|c_number|c_index\r\n00AAAABBBBB|null    |null   \r\n```\r\n\r\n```\r\ncontract30\r\nc_reference|c_number|c_index\r\n00AAAABBBBB|123456  |4\r\n```\r\n\r\nWhen the same reference is found twice on the tables contract10 and contract30, the repository returns a list of 2 objects with the same objet. For my case it was `[{00AAAABBBBB, null, null}, {00AAAABBBBB, null, null}]` instead of `[{00AAAABBBBB, null, null}, {00AAAABBBBB, 123456, 4}]`!\r\n\r\nHow can I do to fix this ?\r\n","title":"Strange Behaviour Spring Jpa with native query and union select","body":"<p>The idea is to have the same Repository to query all the types of the contracts that come from different tables. Here, I used 3 tables to explain the problem :</p>\n<p>I have this JPA entity</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Entity\n@Data\n@AllArgsConstructor\n@NoArgsConstructor\npublic class ContractEntity {\n\n  @Id\n  @Column(name = &quot;c_reference&quot;)\n  private String cReference;\n\n  @Column(name = &quot;c_number&quot;)\n  private String cNumber;\n\n  @Column(name = &quot;c_index&quot;)\n  private Integer cIndex;\n}\n\n</code></pre>\n<p>And the Spring Boot Repository class is</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Repository\npublic interface ContractClientRepository\n    extends CrudRepository&lt;ContractEntity, String&gt; {\n  // mssql native query\n  @Query(\n      value =\n          &quot;&quot;&quot;\n              SELECT co_reference AS c_reference, null AS c_number, 1 AS c_index\n              FROM contract10, client ...\n              WHERE ...\n                AND email = :email\n\n              UNION\n\n              SELECT contract_reference AS c_reference, null AS c_number, 2 AS c_index\n              FROM contract20, client ...\n              WHERE ...\n                AND email = :email\n\n              UNION\n\n              SELECT ref AS c_reference, null AS c_number, role AS c_index\n              FROM contract30, client ...\n              WHERE ...\n                AND email = :email\n                 &quot;&quot;&quot;,\n      nativeQuery = true)\n  List&lt;ContractEntity&gt; findByEmail(@Param(&quot;email&quot;) String email);\n}\n</code></pre>\n<p>The code works well, but I have strange behavior due to a problem in data:</p>\n<pre><code>contract10\nc_reference|c_number|c_index\n00AAAABBBBB|null    |null   \n</code></pre>\n<pre><code>contract30\nc_reference|c_number|c_index\n00AAAABBBBB|123456  |4\n</code></pre>\n<p>When the same reference is found twice on the tables contract10 and contract30, the repository returns a list of 2 objects with the same objet. For my case it was <code>[{00AAAABBBBB, null, null}, {00AAAABBBBB, null, null}]</code> instead of <code>[{00AAAABBBBB, null, null}, {00AAAABBBBB, 123456, 4}]</code>!</p>\n<p>How can I do to fix this ?</p>\n"},{"tags":["java","spring-boot","asynchronous","completable-future"],"comments":[{"owner":{"account_id":14576370,"reputation":335,"user_id":10528125,"display_name":"janardhan sharma"},"score":0,"creation_date":1602502284,"post_id":64316073,"comment_id":113731518,"body_markdown":"Can you elaborate what you were expecting and what you got ?","body":"Can you elaborate what you were expecting and what you got ?"},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1602503511,"post_id":64316073,"comment_id":113732116,"body_markdown":"Don’t manipulate a list from actions that may be executed by different threads. Collect a list of result values after the jobs have been completed. Like in [this answer](https://stackoverflow.com/a/59111717/2711488).","body":"Don’t manipulate a list from actions that may be executed by different threads. Collect a list of result values after the jobs have been completed. Like in <a href=\"https://stackoverflow.com/a/59111717/2711488\">this answer</a>."},{"owner":{"account_id":1244574,"reputation":13277,"user_id":1206301,"accept_rate":10,"display_name":"Alexei Kaigorodov"},"score":0,"creation_date":1602515784,"post_id":64316073,"comment_id":113738315,"body_markdown":"it is because you do.not wait when listAll is completed","body":"it is because you do.not wait when listAll is completed"},{"owner":{"account_id":3658432,"reputation":21,"user_id":3048852,"display_name":"Aoon"},"score":0,"creation_date":1602517834,"post_id":64316073,"comment_id":113739351,"body_markdown":"@janardhansharma I expect to get `listAll` contains 10 lists but I randomly get it.","body":"@janardhansharma I expect to get <code>listAll</code> contains 10 lists but I randomly get it."},{"owner":{"account_id":3658432,"reputation":21,"user_id":3048852,"display_name":"Aoon"},"score":0,"creation_date":1602517893,"post_id":64316073,"comment_id":113739374,"body_markdown":"@Holger seems right but let me try, thanks for sharing this","body":"@Holger seems right but let me try, thanks for sharing this"},{"owner":{"account_id":3658432,"reputation":21,"user_id":3048852,"display_name":"Aoon"},"score":0,"creation_date":1602517920,"post_id":64316073,"comment_id":113739386,"body_markdown":"@AlexeiKaigorodov what do you mean?","body":"@AlexeiKaigorodov what do you mean?"},{"owner":{"account_id":1244574,"reputation":13277,"user_id":1206301,"accept_rate":10,"display_name":"Alexei Kaigorodov"},"score":0,"creation_date":1602523503,"post_id":64316073,"comment_id":113741705,"body_markdown":"add the line where you get the size of listAll","body":"add the line where you get the size of listAll"}],"answers":[{"tags":[],"owner":{"account_id":8199180,"reputation":890,"user_id":6171025,"display_name":"divilipir"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1602499497,"creation_date":1602499497,"answer_id":64316302,"question_id":64316073,"body_markdown":"Use `synchronizedList` instead of `ArrayList`,because `ArrayList` not thread-safe\r\n\r\n\r\n    List&lt;Bclass&gt; listAll = Collections.synchronizedList( new ArrayList() );","title":"Lost some request from CompletableFuture.allOf","body":"<p>Use <code>synchronizedList</code> instead of <code>ArrayList</code>,because <code>ArrayList</code> not thread-safe</p>\n<pre><code>List&lt;Bclass&gt; listAll = Collections.synchronizedList( new ArrayList() );\n</code></pre>\n"}],"owner":{"account_id":3658432,"reputation":21,"user_id":3048852,"display_name":"Aoon"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":387,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1698167310,"creation_date":1602498639,"question_id":64316073,"body_markdown":"The problem is I have to call an API one by one, so I use CompleableFunction as below\r\n\r\n```\r\nList&lt;CompletableFuture&lt;Void&gt;&gt; completableFutures = new ArrayList&lt;&gt;();\r\nList&lt;Bclass&gt; listAll = new ArrayList&lt;&gt;();\r\n\r\nfor (SthClass e : result) {\r\n  CompletableFuture&lt;Void&gt; future = CompletableFuture.supplyAsync(() -&gt; fundInService.doRetryTransaction(retryTransactionRequestDto), threadConfiguration.getAsyncExecutor())\r\n                            .thenAccept((result) -&gt; {\r\n                                Aclass a = new Aclass();\r\n\r\n                                listAll.add(a);\r\n                            });\r\n  completableFutures.add(future);\r\n}\r\n\r\nCompletableFuture&lt;Void&gt; allFutures = CompletableFuture.allOf(completableFutures.toArray(new CompletableFuture[0]));\r\nallFutures.get();\r\n```\r\n\r\nI got a random size of listAll from allFutures\r\n\r\nI don&#39;t know what happened to this code, new to Java\r\n","title":"Lost some request from CompletableFuture.allOf","body":"<p>The problem is I have to call an API one by one, so I use CompleableFunction as below</p>\n<pre><code>List&lt;CompletableFuture&lt;Void&gt;&gt; completableFutures = new ArrayList&lt;&gt;();\nList&lt;Bclass&gt; listAll = new ArrayList&lt;&gt;();\n\nfor (SthClass e : result) {\n  CompletableFuture&lt;Void&gt; future = CompletableFuture.supplyAsync(() -&gt; fundInService.doRetryTransaction(retryTransactionRequestDto), threadConfiguration.getAsyncExecutor())\n                            .thenAccept((result) -&gt; {\n                                Aclass a = new Aclass();\n\n                                listAll.add(a);\n                            });\n  completableFutures.add(future);\n}\n\nCompletableFuture&lt;Void&gt; allFutures = CompletableFuture.allOf(completableFutures.toArray(new CompletableFuture[0]));\nallFutures.get();\n</code></pre>\n<p>I got a random size of listAll from allFutures</p>\n<p>I don't know what happened to this code, new to Java</p>\n"},{"tags":["java","spring-boot","bucket4j"],"owner":{"account_id":9195436,"reputation":1,"user_id":6834317,"display_name":"deepti arora"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":137,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1698166880,"creation_date":1698166880,"question_id":77354043,"body_markdown":"We are writing APIs in microservice based architecture. Since one perticular API does lot of computation and consume a lot of resources, we want to rate limit this API. We have used bucket4j to rate limit the API with token bucket algorithm. But we want to implement leaky bucket algorithm. \r\n\r\nDoes bucket4j support leaky bucket algorithm ? If yes can someone please provide me an example showing that. If no then what will be other possible solution? Should I simply try using blocking queue of Java ? Any implementation example will be of great help\r\n","title":"Implementing leaky bucket using bucket4j to rate limit an API","body":"<p>We are writing APIs in microservice based architecture. Since one perticular API does lot of computation and consume a lot of resources, we want to rate limit this API. We have used bucket4j to rate limit the API with token bucket algorithm. But we want to implement leaky bucket algorithm.</p>\n<p>Does bucket4j support leaky bucket algorithm ? If yes can someone please provide me an example showing that. If no then what will be other possible solution? Should I simply try using blocking queue of Java ? Any implementation example will be of great help</p>\n"},{"tags":["java","jasper-reports","dynamic-reports"],"owner":{"account_id":2190938,"reputation":147,"user_id":1938018,"accept_rate":12,"display_name":"Eyvind Almqvist"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1698166409,"creation_date":1698145904,"question_id":77351573,"body_markdown":"The problem is that the subreport gets the margins of the parent report. The sub report contains an ImageBuilder, which builds an image of a static PDF-file. This image is placed between the header and footer from the parent report. I first set these margins in the parent report:\r\n\r\n    final MarginBuilder PAGE_MARGIN = margin(20).setLeft(50).setRight(90).setBottom(15).setTop(40);\r\n    reportBuilder.setPageMargin(PAGE_MARGIN);\r\n\r\nI then try to set small margins in the sub report with MarginBuilder, but it does not work.  How can I make this work, so the subreport does not get the same margins as the parent report? Here is my code for the sub report:\r\n\r\n   \r\n\r\n    private void createImage(final JasperReportBuilder parentReportBuilder, byte[] contentOfStaticPDF) {\r\n\t\tJasperReportBuilder reportBuilderForSubreport = report();\r\n\t\tfinal int PAGE_WIDTH = 450;\r\n\t\tImageBuilder imageBuilder = cmp.image(getContentAsInputStream(contentOfStaticPDF));\r\n\t\timageBuilder.setFixedWidth(PAGE_WIDTH);\r\n\t\timageBuilder.setStretchType(StretchType.CONTAINER_HEIGHT);\r\n\t\tMarginBuilder marginBuilder= margin();\r\n\t\tint margin=1;\r\n\t\tmarginBuilder.setLeft(margin);\r\n\t\tmarginBuilder.setRight(margin);\r\n\t\treportBuilderForSubreport.setPageMargin(marginBuilder);\r\n\t\treportBuilderForSubreport.detail(imageBuilder);\r\n\t\treportBuilderForSubreport.detail(cmp.pageBreak());\r\n\t\tSubreportBuilder subreport = cmp.subreport(reportBuilderForSubreport).setDataSource(createFakeDataSource());\r\n\t\tparentReportBuilder.detail(subreport);\r\n    }","title":"How to set margins in a subreport using DynamicReports?","body":"<p>The problem is that the subreport gets the margins of the parent report. The sub report contains an ImageBuilder, which builds an image of a static PDF-file. This image is placed between the header and footer from the parent report. I first set these margins in the parent report:</p>\n<pre><code>final MarginBuilder PAGE_MARGIN = margin(20).setLeft(50).setRight(90).setBottom(15).setTop(40);\nreportBuilder.setPageMargin(PAGE_MARGIN);\n</code></pre>\n<p>I then try to set small margins in the sub report with MarginBuilder, but it does not work.  How can I make this work, so the subreport does not get the same margins as the parent report? Here is my code for the sub report:</p>\n<pre><code>private void createImage(final JasperReportBuilder parentReportBuilder, byte[] contentOfStaticPDF) {\n    JasperReportBuilder reportBuilderForSubreport = report();\n    final int PAGE_WIDTH = 450;\n    ImageBuilder imageBuilder = cmp.image(getContentAsInputStream(contentOfStaticPDF));\n    imageBuilder.setFixedWidth(PAGE_WIDTH);\n    imageBuilder.setStretchType(StretchType.CONTAINER_HEIGHT);\n    MarginBuilder marginBuilder= margin();\n    int margin=1;\n    marginBuilder.setLeft(margin);\n    marginBuilder.setRight(margin);\n    reportBuilderForSubreport.setPageMargin(marginBuilder);\n    reportBuilderForSubreport.detail(imageBuilder);\n    reportBuilderForSubreport.detail(cmp.pageBreak());\n    SubreportBuilder subreport = cmp.subreport(reportBuilderForSubreport).setDataSource(createFakeDataSource());\n    parentReportBuilder.detail(subreport);\n}\n</code></pre>\n"},{"tags":["java","amazon-web-services","garbage-collection","amazon-cloudwatch","aws-fargate"],"comments":[{"owner":{"account_id":22397,"reputation":417280,"user_id":55159,"accept_rate":79,"display_name":"Quassnoi"},"score":0,"creation_date":1697693148,"post_id":77318646,"comment_id":136312357,"body_markdown":"What metric exactly are you referring to when talking about &quot;memory increase&quot;? VMZ? RSS? Some kind of internal Java metric?","body":"What metric exactly are you referring to when talking about &quot;memory increase&quot;? VMZ? RSS? Some kind of internal Java metric?"},{"owner":{"account_id":9983364,"reputation":96,"user_id":7385500,"display_name":"stackhouse"},"score":0,"creation_date":1697809008,"post_id":77318646,"comment_id":136329986,"body_markdown":"in our task definition, we simply set the &#39;memory&#39; property (https://docs.aws.amazon.com/AmazonECS/latest/developerguide/task_definition_parameters.html). Also in the task definition, we set the Java jvm parameter -XX:MaxRAMPercentage=75.0 which sets the maximum Java heap size to be equal to 75% of the available memory.  The task runs a Linux container but we&#39;re not specifying anything about RSS or VSZ.","body":"in our task definition, we simply set the &#39;memory&#39; property (<a href=\"https://docs.aws.amazon.com/AmazonECS/latest/developerguide/task_definition_parameters.html\" rel=\"nofollow noreferrer\">docs.aws.amazon.com/AmazonECS/latest/developerguide/&hellip;</a>). Also in the task definition, we set the Java jvm parameter -XX:MaxRAMPercentage=75.0 which sets the maximum Java heap size to be equal to 75% of the available memory.  The task runs a Linux container but we&#39;re not specifying anything about RSS or VSZ."},{"owner":{"account_id":22397,"reputation":417280,"user_id":55159,"accept_rate":79,"display_name":"Quassnoi"},"score":0,"creation_date":1697809130,"post_id":77318646,"comment_id":136330012,"body_markdown":"&quot;When the memory usage gets to about 90%&quot;: how do you know it happens? where exactly are you looking?","body":"&quot;When the memory usage gets to about 90%&quot;: how do you know it happens? where exactly are you looking?"}],"answers":[{"tags":[],"owner":{"account_id":4304270,"reputation":4868,"user_id":3517132,"display_name":"nathanpeck"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698165432,"creation_date":1698165432,"answer_id":77353920,"question_id":77318646,"body_markdown":"If you send an HTTP request to `${ECS_CONTAINER_METADATA_URI_V4}/task/stats` it will give you the current live stats for your containers. See: https://docs.aws.amazon.com/AmazonECS/latest/developerguide/task-metadata-endpoint-v4-fargate.html\r\n\r\nRun a tiny sidecar container in your task that is marked as `essential: true` so that if it stops then the task is stopped and replaced. Inside of that sidecar run a little bash script that runs forever and checks the task stats to see if memory utilization has exceeded your threshold. If it has then the script exits. When the script exits the sidecar container will exit and the task will be marked as unhealthy in ECS and replaced.","title":"Relaunch Fargate Task Before Stop the World Garbage Collection","body":"<p>If you send an HTTP request to <code>${ECS_CONTAINER_METADATA_URI_V4}/task/stats</code> it will give you the current live stats for your containers. See: <a href=\"https://docs.aws.amazon.com/AmazonECS/latest/developerguide/task-metadata-endpoint-v4-fargate.html\" rel=\"nofollow noreferrer\">https://docs.aws.amazon.com/AmazonECS/latest/developerguide/task-metadata-endpoint-v4-fargate.html</a></p>\n<p>Run a tiny sidecar container in your task that is marked as <code>essential: true</code> so that if it stops then the task is stopped and replaced. Inside of that sidecar run a little bash script that runs forever and checks the task stats to see if memory utilization has exceeded your threshold. If it has then the script exits. When the script exits the sidecar container will exit and the task will be marked as unhealthy in ECS and replaced.</p>\n"}],"owner":{"account_id":9983364,"reputation":96,"user_id":7385500,"display_name":"stackhouse"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1698165432,"creation_date":1697652260,"question_id":77318646,"body_markdown":"I have an ECS service with multiple tasks running a Java web application.  We have a memory leak which causes the memory on each task to increase over time. When the memory usage gets to about 90%, Java runs a full / stop the world garbage collection that can pause the task for upwards of 10 seconds. Our long term solution is to fix the leak.  In the meantime, I&#39;d like to relaunch the task when it&#39;s memory usage surpasses 75%. How can I trigger a healthy Fargate TASK to relaunch when the task&#39;s memory exceeds 75%?  ","title":"Relaunch Fargate Task Before Stop the World Garbage Collection","body":"<p>I have an ECS service with multiple tasks running a Java web application.  We have a memory leak which causes the memory on each task to increase over time. When the memory usage gets to about 90%, Java runs a full / stop the world garbage collection that can pause the task for upwards of 10 seconds. Our long term solution is to fix the leak.  In the meantime, I'd like to relaunch the task when it's memory usage surpasses 75%. How can I trigger a healthy Fargate TASK to relaunch when the task's memory exceeds 75%?</p>\n"},{"tags":["java","unit-testing","testing"],"answers":[{"comments":[{"owner":{"account_id":1925103,"reputation":30437,"user_id":1735756,"accept_rate":65,"display_name":"Haifeng Zhang"},"score":0,"creation_date":1487262757,"post_id":42256244,"comment_id":71715687,"body_markdown":"Michael, thanks for your reply. I have thought about this but it is not convenient to run all tests automatically. Unfortunately, it is impossible to separate the test classes files into a different package. +1 for you","body":"Michael, thanks for your reply. I have thought about this but it is not convenient to run all tests automatically. Unfortunately, it is impossible to separate the test classes files into a different package. +1 for you"}],"tags":[],"owner":{"account_id":1686851,"reputation":7640,"user_id":1549950,"accept_rate":69,"display_name":"Michael Lihs"},"comment_count":1,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1487179610,"creation_date":1487179610,"answer_id":42256244,"question_id":42255972,"body_markdown":"I guess what the author means is that instead of\r\n\r\n    package my.package;\r\n\r\n    class TestableClass {\r\n         private String property;\r\n    }\r\n\r\nYou can change the visibility to\r\n\r\n    package my.package;\r\n\r\n    class TestableClass {\r\n        String property;\r\n    }\r\n\r\nWith the second implementation you can access the property from a test in the package `my.package` like\r\n\r\n    package my.package;\r\n\r\n    class TestableClassTest {\r\n        // ...\r\n    }\r\n\r\nAt the same time, a subclass cannot access the property - that&#39;s the benefit comapred to `protected`.","title":"How can we test package-private class?","body":"<p>I guess what the author means is that instead of</p>\n\n<pre><code>package my.package;\n\nclass TestableClass {\n     private String property;\n}\n</code></pre>\n\n<p>You can change the visibility to</p>\n\n<pre><code>package my.package;\n\nclass TestableClass {\n    String property;\n}\n</code></pre>\n\n<p>With the second implementation you can access the property from a test in the package <code>my.package</code> like</p>\n\n<pre><code>package my.package;\n\nclass TestableClassTest {\n    // ...\n}\n</code></pre>\n\n<p>At the same time, a subclass cannot access the property - that's the benefit comapred to <code>protected</code>.</p>\n"},{"comments":[{"owner":{"account_id":1925103,"reputation":30437,"user_id":1735756,"accept_rate":65,"display_name":"Haifeng Zhang"},"score":0,"creation_date":1487262829,"post_id":42256510,"comment_id":71715751,"body_markdown":"it makes sense and probbabliy it is the only way to do test on the package-private classes. thanks! +1","body":"it makes sense and probbabliy it is the only way to do test on the package-private classes. thanks! +1"},{"owner":{"account_id":4737034,"reputation":3166,"user_id":3831137,"accept_rate":90,"display_name":"THIS USER NEEDS HELP"},"score":1,"creation_date":1497478049,"post_id":42256510,"comment_id":76101462,"body_markdown":"My current setting follows `src.main.java.myrootpackage.first.MyClass.java` and `src.test.java.myrootpackage.first.test.MyClassTest.java`, but the test class can&#39;t find the source class. If I remove the `test` and put the test case under `src.test.java.myrootpackage.first.MyClassTest.java` then it works.","body":"My current setting follows <code>src.main.java.myrootpackage.first.MyClass.java</code> and <code>src.test.java.myrootpackage.first.test.MyClassTest.java</code>, but the test class can&#39;t find the source class. If I remove the <code>test</code> and put the test case under <code>src.test.java.myrootpackage.first.MyClassTest.java</code> then it works."},{"owner":{"account_id":7655262,"reputation":7506,"user_id":5802417,"display_name":"Michael Gantman"},"score":1,"creation_date":1497782587,"post_id":42256510,"comment_id":76214642,"body_markdown":"You are correct, if your method that you want to test is defined as protected (or package private i.e. no keyword) then your test class must be in the same package. in your settings part of the path &quot;src.main.java&quot; and &quot;src.test.java&quot; are not part of the package. So, you had your class in package &quot;myrootpackage.first&quot; and your testing class in &quot;myrootpackage.first.test&quot;. Once you moved your testing class in &quot;myrootpackage.first&quot; it sees the protected or package private members of your class. Also you can see the package in the first line of your class &quot;package myrootpackage.first&quot;","body":"You are correct, if your method that you want to test is defined as protected (or package private i.e. no keyword) then your test class must be in the same package. in your settings part of the path &quot;src.main.java&quot; and &quot;src.test.java&quot; are not part of the package. So, you had your class in package &quot;myrootpackage.first&quot; and your testing class in &quot;myrootpackage.first.test&quot;. Once you moved your testing class in &quot;myrootpackage.first&quot; it sees the protected or package private members of your class. Also you can see the package in the first line of your class &quot;package myrootpackage.first&quot;"},{"owner":{"account_id":7655262,"reputation":7506,"user_id":5802417,"display_name":"Michael Gantman"},"score":0,"creation_date":1497782611,"post_id":42256510,"comment_id":76214648,"body_markdown":"For both your class and your testing class those must be the same","body":"For both your class and your testing class those must be the same"},{"owner":{"account_id":133593,"reputation":6983,"user_id":335062,"accept_rate":56,"display_name":"codebased"},"score":0,"creation_date":1568804612,"post_id":42256510,"comment_id":102389573,"body_markdown":"In C# package-protected are internal and  you can easily expose the same to your test project, simply by typing [assembly:InternalsVisibleTo(&quot;MyTests&quot;)] into your actual code package project. I wish if Java has one too. If you read further on page 75 Joshua says &quot;Luckily, it isn’t necessary either because\ntests can be made to run as part of the package being tested, thus gaining access to its package-private elements.&quot; I think there is no possibilities at this stage.","body":"In C# package-protected are internal and  you can easily expose the same to your test project, simply by typing [assembly:InternalsVisibleTo(&quot;MyTests&quot;)] into your actual code package project. I wish if Java has one too. If you read further on page 75 Joshua says &quot;Luckily, it isn’t necessary either because tests can be made to run as part of the package being tested, thus gaining access to its package-private elements.&quot; I think there is no possibilities at this stage."},{"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1576466439,"post_id":42256510,"comment_id":104896191,"body_markdown":"This answer is very misleading and confusing. The tested class might be src/main/java/pkg1/pkg2/MyClass.java, and the test code would be in src/test/java/pkg1/pkg2/MyClassTest.java. The answer adds a &#39;.MyClass.&#39; which is wrong, uses the same word in different contexts (&#39;root&#39;), those dots don&#39;t make sense, and the directory structure is non-conventional.","body":"This answer is very misleading and confusing. The tested class might be src/main/java/pkg1/pkg2/MyClass.java, and the test code would be in src/test/java/pkg1/pkg2/MyClassTest.java. The answer adds a &#39;.MyClass.&#39; which is wrong, uses the same word in different contexts (&#39;root&#39;), those dots don&#39;t make sense, and the directory structure is non-conventional."}],"tags":[],"owner":{"account_id":7655262,"reputation":7506,"user_id":5802417,"display_name":"Michael Gantman"},"comment_count":6,"down_vote_count":1,"up_vote_count":26,"is_accepted":false,"score":25,"last_activity_date":1576472306,"creation_date":1487180509,"answer_id":42256510,"question_id":42255972,"body_markdown":"Basically it means that your tester class should reside in the same package as your tested class. That would make your tested class and all package protected members and methods accessible to your testing class. The classes may be located under different roots: your tested class may be under `src/main/java/myrootpackage/first/second/MyClass.java` and your testing class may be located under `src/test/java/myrootpackage/first/second/MyClassTester.java`.","title":"How can we test package-private class?","body":"<p>Basically it means that your tester class should reside in the same package as your tested class. That would make your tested class and all package protected members and methods accessible to your testing class. The classes may be located under different roots: your tested class may be under <code>src/main/java/myrootpackage/first/second/MyClass.java</code> and your testing class may be located under <code>src/test/java/myrootpackage/first/second/MyClassTester.java</code>.</p>\n"},{"tags":[],"owner":{"account_id":1024963,"reputation":1197,"user_id":1034484,"display_name":"martin"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698165111,"creation_date":1698165111,"answer_id":77353884,"question_id":42255972,"body_markdown":"If you want to hide details (that are required for your tests) of your class, you could use [lombok][1] to easily generate an appropriate getter-Method with package-level access, which would allow reading (from test classes in same package) but prevent mutation (everywhere) of a certain field.\r\n\r\n    public class SimpleRetryStrategy implements RetryStrategy {\r\n        @Getter(AccessLevel.PACKAGE)\r\n        private final int maxRetries;\r\n\r\n\r\n  [1]: https://projectlombok.org/features/GetterSetter","title":"How can we test package-private class?","body":"<p>If you want to hide details (that are required for your tests) of your class, you could use <a href=\"https://projectlombok.org/features/GetterSetter\" rel=\"nofollow noreferrer\">lombok</a> to easily generate an appropriate getter-Method with package-level access, which would allow reading (from test classes in same package) but prevent mutation (everywhere) of a certain field.</p>\n<pre><code>public class SimpleRetryStrategy implements RetryStrategy {\n    @Getter(AccessLevel.PACKAGE)\n    private final int maxRetries;\n</code></pre>\n"}],"owner":{"account_id":1925103,"reputation":30437,"user_id":1735756,"accept_rate":65,"display_name":"Haifeng Zhang"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":12872,"favorite_count":0,"down_vote_count":0,"up_vote_count":27,"answer_count":3,"score":27,"last_activity_date":1698165111,"creation_date":1487178796,"question_id":42255972,"body_markdown":"I am reading book `Effective Java`, in `Item 13: Minimize the accessibility of classes and members`, it mentioned that:\r\n&gt; To facilitate testing, you may be tempted to make a class, interface, or member more accessible. This is fine up to a point. it is acceptable to make a private member of a public class package-private in order to test it, but it is not acceptable to raise the accessibility any higher than that. In other words, it is not acceptable to make a class, interface, or member a part of packages&#39;s exported API to facilitate testing.\r\n\r\nI know we should encapsulate members, hiding information from clients, we can test them by accessing the class with setters and getters, but\r\nHow should I understand make class package-private accessible, if so How to test it?","title":"How can we test package-private class?","body":"<p>I am reading book <code>Effective Java</code>, in <code>Item 13: Minimize the accessibility of classes and members</code>, it mentioned that:</p>\n\n<blockquote>\n  <p>To facilitate testing, you may be tempted to make a class, interface, or member more accessible. This is fine up to a point. it is acceptable to make a private member of a public class package-private in order to test it, but it is not acceptable to raise the accessibility any higher than that. In other words, it is not acceptable to make a class, interface, or member a part of packages's exported API to facilitate testing.</p>\n</blockquote>\n\n<p>I know we should encapsulate members, hiding information from clients, we can test them by accessing the class with setters and getters, but\nHow should I understand make class package-private accessible, if so How to test it?</p>\n"},{"tags":["java","java-stream"],"comments":[{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":3,"creation_date":1668775563,"post_id":74483362,"comment_id":131494188,"body_markdown":"What’s wrong with `.filter(animal -&gt; animal.getColor().equals(Colors.GREEN))`? Is it really about the ten characters you save with the hypothetical `.filter(Colors.GREEN::equals, Animal::getColor)`? Then just use `.filter(a -&gt; a.getColor().equals(Colors.GREEN))`, case closed.","body":"What’s wrong with <code>.filter(animal -&gt; animal.getColor().equals(Colors.GREEN))</code>? Is it really about the ten characters you save with the hypothetical <code>.filter(Colors.GREEN::equals, Animal::getColor)</code>? Then just use <code>.filter(a -&gt; a.getColor().equals(Colors.GREEN))</code>, case closed."},{"owner":{"account_id":249169,"reputation":19388,"user_id":525036,"accept_rate":25,"display_name":"Didier L"},"score":0,"creation_date":1668791956,"post_id":74483362,"comment_id":131500139,"body_markdown":"Reminds me of a question of my own – [Is there a convenience method to create a Predicate that tests if a field equals a given value?](https://stackoverflow.com/questions/33300011/is-there-a-convenience-method-to-create-a-predicate-that-tests-if-a-field-equals).","body":"Reminds me of a question of my own – <a href=\"https://stackoverflow.com/questions/33300011/is-there-a-convenience-method-to-create-a-predicate-that-tests-if-a-field-equals\">Is there a convenience method to create a Predicate that tests if a field equals a given value?</a>."}],"answers":[{"tags":[],"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1668728587,"creation_date":1668728257,"answer_id":74483384,"question_id":74483362,"body_markdown":"`filter` accepts a Predicate, whose function can only return a boolean. [There&#39;s no other method signature.](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/stream/Stream.html)\r\n\r\nIf you want to filter by all green animals, you&#39;d use \r\n\r\n```\r\nanimalStream\r\n    .filter(a -&gt; Colors.GREEN.equals(a.getColor()))\r\n```\r\n\r\nor \r\n\r\n```\r\nPredicate&lt;Animal&gt; isGreen = (a) -&gt; Colors.GREEN.equals(a.getColor());\r\nStream&lt;Animal&gt; greenAnimals = animalStream.filter(isGreen);\r\n```\r\n\r\nDon&#39;t use `map` unless you want a `Stream&lt;COLOR&gt;`\r\n\r\n&gt; join multiple mapping functions\r\n\r\nYou can chain them, rather than join - `.stream().map().map()`, but as you discovered, this does not preserve the original type. ","title":"Stream map on filter","body":"<p><code>filter</code> accepts a Predicate, whose function can only return a boolean. <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/stream/Stream.html\" rel=\"nofollow noreferrer\">There's no other method signature.</a></p>\n<p>If you want to filter by all green animals, you'd use</p>\n<pre><code>animalStream\n    .filter(a -&gt; Colors.GREEN.equals(a.getColor()))\n</code></pre>\n<p>or</p>\n<pre><code>Predicate&lt;Animal&gt; isGreen = (a) -&gt; Colors.GREEN.equals(a.getColor());\nStream&lt;Animal&gt; greenAnimals = animalStream.filter(isGreen);\n</code></pre>\n<p>Don't use <code>map</code> unless you want a <code>Stream&lt;COLOR&gt;</code></p>\n<blockquote>\n<p>join multiple mapping functions</p>\n</blockquote>\n<p>You can chain them, rather than join - <code>.stream().map().map()</code>, but as you discovered, this does not preserve the original type.</p>\n"},{"comments":[{"owner":{"account_id":23010429,"reputation":215,"user_id":17133024,"display_name":"Dario Viva"},"score":0,"creation_date":1668729366,"post_id":74483419,"comment_id":131483858,"body_markdown":"Hey John StreamEx looks promising. But I searched for a more general solution. This one only works when the filter is an equals. I will edit the question to make this clear.","body":"Hey John StreamEx looks promising. But I searched for a more general solution. This one only works when the filter is an equals. I will edit the question to make this clear."}],"tags":[],"owner":{"account_id":26377,"reputation":352197,"user_id":68587,"accept_rate":95,"display_name":"John Kugelman"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1668728566,"creation_date":1668728566,"answer_id":74483419,"question_id":74483362,"body_markdown":"[StreamEx](https://github.com/amaembo/streamex), a library that provides extended stream methods and classes, has [`filterBy`](http://amaembo.github.io/streamex/javadoc/one/util/streamex/StreamEx.html#filterBy(java.util.function.Function,K)):\r\n\r\n&gt; ```\r\n&gt; public &lt;K&gt; StreamEx&lt;T&gt; filterBy​(Function&lt;? super T,​? extends K&gt; mapper, K value)\r\n&gt; ```\r\n&gt; Returns a stream consisting of the elements of this stream for which the supplied mapper function returns the given value.\r\n&gt;\r\n&gt; This method behaves like `filter(t -&gt; Objects.equals(value, mapper.apply(t)))`.","title":"Stream map on filter","body":"<p><a href=\"https://github.com/amaembo/streamex\" rel=\"nofollow noreferrer\">StreamEx</a>, a library that provides extended stream methods and classes, has <a href=\"http://amaembo.github.io/streamex/javadoc/one/util/streamex/StreamEx.html#filterBy(java.util.function.Function,K)\" rel=\"nofollow noreferrer\"><code>filterBy</code></a>:</p>\n<blockquote>\n<pre><code>public &lt;K&gt; StreamEx&lt;T&gt; filterBy​(Function&lt;? super T,​? extends K&gt; mapper, K value)\n</code></pre>\n<p>Returns a stream consisting of the elements of this stream for which the supplied mapper function returns the given value.</p>\n<p>This method behaves like <code>filter(t -&gt; Objects.equals(value, mapper.apply(t)))</code>.</p>\n</blockquote>\n"},{"comments":[{"owner":{"account_id":249169,"reputation":19388,"user_id":525036,"accept_rate":25,"display_name":"Didier L"},"score":1,"creation_date":1668791886,"post_id":74485224,"comment_id":131500100,"body_markdown":"In the scope of this question, using `mapMulti()` does not provide any advantage. As you can see in your own answer, the _older_ approach is more readable, and I doubt it would be less efficient (maybe even more). OP is not asking about mapping and filtering at the same time.","body":"In the scope of this question, using <code>mapMulti()</code> does not provide any advantage. As you can see in your own answer, the <i>older</i> approach is more readable, and I doubt it would be less efficient (maybe even more). OP is not asking about mapping and filtering at the same time."},{"owner":{"account_id":9763630,"reputation":16595,"user_id":7237884,"display_name":"Panagiotis Bougioukos"},"score":1,"creation_date":1668799209,"post_id":74485224,"comment_id":131502169,"body_markdown":"@DidierL I don&#39;t agree, the answer seems to fulfil the question and SO is always a good place to learn new ways to handle problems. OP tried to inform us about a new alternative way which was introduced lately with new java version.","body":"@DidierL I don&#39;t agree, the answer seems to fulfil the question and SO is always a good place to learn new ways to handle problems. OP tried to inform us about a new alternative way which was introduced lately with new java version."},{"owner":{"account_id":23010429,"reputation":215,"user_id":17133024,"display_name":"Dario Viva"},"score":2,"creation_date":1668806336,"post_id":74485224,"comment_id":131503927,"body_markdown":"I am very sorry, but I already knew this method, and that was not what I was asking about.","body":"I am very sorry, but I already knew this method, and that was not what I was asking about."},{"owner":{"account_id":4647011,"reputation":41835,"user_id":3764965,"accept_rate":94,"display_name":"Nikolas Charalambidis"},"score":0,"creation_date":1668933132,"post_id":74485224,"comment_id":131522833,"body_markdown":"@DidierL: The authors of questions are requested to post a minimal and reproducible code. It can, however, lead to omitting the context of where and how is the code snippet used. There are situations where `mapMulti` is a good solution, especially for streaming where you need to perform some complex logic. That&#39;s why I have provided aside from this option also a description of the pros/cons suggesting when `mapMulti` shall be used.","body":"@DidierL: The authors of questions are requested to post a minimal and reproducible code. It can, however, lead to omitting the context of where and how is the code snippet used. There are situations where <code>mapMulti</code> is a good solution, especially for streaming where you need to perform some complex logic. That&#39;s why I have provided aside from this option also a description of the pros/cons suggesting when <code>mapMulti</code> shall be used."},{"owner":{"account_id":249169,"reputation":19388,"user_id":525036,"accept_rate":25,"display_name":"Didier L"},"score":0,"creation_date":1668956764,"post_id":74485224,"comment_id":131526909,"body_markdown":"I’m not saying `mapMulti` is never useful, I’m saying it isn’t in the scope of this question. In fact, your pros are not relevant here since OP explicitly said in the question that they do not want to perform a `map`, they only need some kind of `filter`. You are simply not answering the question.","body":"I’m not saying <code>mapMulti</code> is never useful, I’m saying it isn’t in the scope of this question. In fact, your pros are not relevant here since OP explicitly said in the question that they do not want to perform a <code>map</code>, they only need some kind of <code>filter</code>. You are simply not answering the question."}],"tags":[],"owner":{"account_id":4647011,"reputation":41835,"user_id":3764965,"accept_rate":94,"display_name":"Nikolas Charalambidis"},"comment_count":5,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1668749273,"creation_date":1668748761,"answer_id":74485224,"question_id":74483362,"body_markdown":"&lt;h3&gt;Java 16&lt;/h3&gt;\r\n\r\nYes, there is a solution using [`Stream#mapMulti`][1] as of Java 16.\r\n\r\n```java\r\nanimalStream\r\n    .mapMulti((animal, consumer) -&gt; {\r\n\t    if (Colors.GREEN.equals(animal.getColor())) {  // condition\r\n\t    \tconsumer.accept(animal);                   // qualify the instance\r\n\t    }\r\n    })\r\n    ...                                                // further operations\r\n```\r\n\r\nThe provided `Consumer&lt;R&gt;` accepts the instance that is qualified based on your criteria. \r\n\r\n**Pros**: The performance-wise advantage of this imperative approach is that you don&#39;t necessarily invoke the two `Stream` operations but just one, for example, a combination of `Stream#map` and `Stream#filter` can be substituted. Though the biggest advantage is that `Consumer#accept` can be invoked as many times as you want, so you can effectively increase a number of entries in a `Stream`.\r\n\r\n**Cons**: However, you lost a bit of the declarative approach and if used only as on the snippet without further processing, it&#39;s worth using rather a simple for-loop or sticking with the `filter` operation (see below):\r\n\r\n&lt;h3&gt;Older Java versions&lt;/h3&gt;\r\n\r\nSimply write the condition down to `Stream#filter`, it&#39;s a correct Stream usage:\r\n\r\n```java\r\nanimalStream\r\n\t .filter(animal -&gt; Colors.GREEN.equals(animal.getColor()))\r\n     ...\r\n```\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/16/docs/api/java.base/java/util/stream/Stream.html#mapMulti(java.util.function.BiConsumer)","title":"Stream map on filter","body":"<h3>Java 16</h3>\n<p>Yes, there is a solution using <a href=\"https://docs.oracle.com/en/java/javase/16/docs/api/java.base/java/util/stream/Stream.html#mapMulti(java.util.function.BiConsumer)\" rel=\"nofollow noreferrer\"><code>Stream#mapMulti</code></a> as of Java 16.</p>\n<pre class=\"lang-java prettyprint-override\"><code>animalStream\n    .mapMulti((animal, consumer) -&gt; {\n        if (Colors.GREEN.equals(animal.getColor())) {  // condition\n            consumer.accept(animal);                   // qualify the instance\n        }\n    })\n    ...                                                // further operations\n</code></pre>\n<p>The provided <code>Consumer&lt;R&gt;</code> accepts the instance that is qualified based on your criteria.</p>\n<p><strong>Pros</strong>: The performance-wise advantage of this imperative approach is that you don't necessarily invoke the two <code>Stream</code> operations but just one, for example, a combination of <code>Stream#map</code> and <code>Stream#filter</code> can be substituted. Though the biggest advantage is that <code>Consumer#accept</code> can be invoked as many times as you want, so you can effectively increase a number of entries in a <code>Stream</code>.</p>\n<p><strong>Cons</strong>: However, you lost a bit of the declarative approach and if used only as on the snippet without further processing, it's worth using rather a simple for-loop or sticking with the <code>filter</code> operation (see below):</p>\n<h3>Older Java versions</h3>\n<p>Simply write the condition down to <code>Stream#filter</code>, it's a correct Stream usage:</p>\n<pre class=\"lang-java prettyprint-override\"><code>animalStream\n     .filter(animal -&gt; Colors.GREEN.equals(animal.getColor()))\n     ...\n</code></pre>\n"},{"comments":[{"owner":{"account_id":23010429,"reputation":215,"user_id":17133024,"display_name":"Dario Viva"},"score":0,"creation_date":1668806601,"post_id":74485550,"comment_id":131503985,"body_markdown":"short and simple, pretty much exactly what I was looked for, except for the missing varargs part. But like you I also doubt that that’s possible. One could just omit the Generic type or use a Wildcard generic &lt;?&gt;. But I strongly doubt that a library would use that.","body":"short and simple, pretty much exactly what I was looked for, except for the missing varargs part. But like you I also doubt that that’s possible. One could just omit the Generic type or use a Wildcard generic &lt;?&gt;. But I strongly doubt that a library would use that."},{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":0,"creation_date":1668806678,"post_id":74485550,"comment_id":131504003,"body_markdown":"Wildcards wouldn&#39;t help. You can&#39;t pass anything but null into a `Function&lt;?, ?&gt;`.","body":"Wildcards wouldn&#39;t help. You can&#39;t pass anything but null into a <code>Function&lt;?, ?&gt;</code>."}],"tags":[],"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1668752777,"creation_date":1668751887,"answer_id":74485550,"question_id":74483362,"body_markdown":"You can use Guava&#39;s [`Predicates.compose()`][1], or create your own:\r\n\r\n    public static &lt;A, B&gt; Predicate&lt;A&gt; compose(\r\n            Predicate&lt;B&gt; predicate, Function&lt;A, ? extends B&gt; function) {\r\n        return a -&gt; predicate.test(function.apply(a));\r\n    }\r\n\r\nNow just pass that into your filter:\r\n\r\n    animalStream.filter(compose(Colors.GREEN::equals, Animal::getColor))\r\n\r\nAs for the varargs concept, I doubt that&#39;s possible under Java&#39;s generics, unless they&#39;re all of the same type, in which case you&#39;d just `apply()` each in a loop or reduce them with `Function.andThen()`.\r\n\r\n  [1]: https://www.javadoc.io/doc/com.google.guava/guava/latest/com/google/common/base/Predicates.html#compose(com.google.common.base.Predicate,com.google.common.base.Function)","title":"Stream map on filter","body":"<p>You can use Guava's <a href=\"https://www.javadoc.io/doc/com.google.guava/guava/latest/com/google/common/base/Predicates.html#compose(com.google.common.base.Predicate,com.google.common.base.Function)\" rel=\"nofollow noreferrer\"><code>Predicates.compose()</code></a>, or create your own:</p>\n<pre><code>public static &lt;A, B&gt; Predicate&lt;A&gt; compose(\n        Predicate&lt;B&gt; predicate, Function&lt;A, ? extends B&gt; function) {\n    return a -&gt; predicate.test(function.apply(a));\n}\n</code></pre>\n<p>Now just pass that into your filter:</p>\n<pre><code>animalStream.filter(compose(Colors.GREEN::equals, Animal::getColor))\n</code></pre>\n<p>As for the varargs concept, I doubt that's possible under Java's generics, unless they're all of the same type, in which case you'd just <code>apply()</code> each in a loop or reduce them with <code>Function.andThen()</code>.</p>\n"},{"comments":[{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1668777873,"post_id":74489897,"comment_id":131494989,"body_markdown":"This is an unnecessary complication. Why defer the construction of the actual `Predicate` from the `of` method to the `MultiPred` constructor and further to the entirely unnecessary `BiFunction … predicateProducer `? There isn’t even a point in having `MultiPred` as return type, as it doesn’t offer anything the `Predicate` doesn’t already have, just unnecessary wrapping. Change the return types of the factory methods to `Predicate&lt;T&gt;` and change the `return` statements of the `of` methods to `return t -&gt; predicate.test(keyExtractor.apply(t));` and you can remove half of this code.","body":"This is an unnecessary complication. Why defer the construction of the actual <code>Predicate</code> from the <code>of</code> method to the <code>MultiPred</code> constructor and further to the entirely unnecessary <code>BiFunction … predicateProducer </code>? There isn’t even a point in having <code>MultiPred</code> as return type, as it doesn’t offer anything the <code>Predicate</code> doesn’t already have, just unnecessary wrapping. Change the return types of the factory methods to <code>Predicate&lt;T&gt;</code> and change the <code>return</code> statements of the <code>of</code> methods to <code>return t -&gt; predicate.test(keyExtractor.apply(t));</code> and you can remove half of this code."},{"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"score":0,"creation_date":1668782118,"post_id":74489897,"comment_id":131496534,"body_markdown":"@Holger I see, but you have to admit that such `Predicate` can help to resolve type inference issues while chaining predicates without casting. For instance this would fail to compile `filter(Animal::canFly.or(Animal::canSwim).or(...))`, conversely this would compile since implementation has tells what should be the type `filter(MultiPred.of(...).or(Animal::canFly).or(Animal::canSwim))`.","body":"@Holger I see, but you have to admit that such <code>Predicate</code> can help to resolve type inference issues while chaining predicates without casting. For instance this would fail to compile <code>filter(Animal::canFly.or(Animal::canSwim).or(...))</code>, conversely this would compile since implementation has tells what should be the type <code>filter(MultiPred.of(...).or(Animal::canFly).or(Animal::canSw&zwnj;&#8203;im))</code>."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1668782175,"post_id":74489897,"comment_id":131496567,"body_markdown":"And how it that different if `MultiPred.of(...)` just returns `Predicate`?","body":"And how it that different if <code>MultiPred.of(...)</code> just returns <code>Predicate</code>?"},{"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"score":0,"creation_date":1668782213,"post_id":74489897,"comment_id":131496585,"body_markdown":"@Holger And it&#39;s also can help to avoid accessing the same property multiple times like in the following scenario: `filter(a -&gt; a.getColor() == Color.WHITE || a.getColor() == Color.GREEN)`. Because it&#39;s allows to specify multiple `Predicate`s that would be chained together and used to evaluate the value returned by the *keyExtractor*. Which is a slight advantage. That said, I agree that this thing is an unnecessary complicated, and not suitable for practical use, but the problem itself is slightly contrived.","body":"@Holger And it&#39;s also can help to avoid accessing the same property multiple times like in the following scenario: <code>filter(a -&gt; a.getColor() == Color.WHITE || a.getColor() == Color.GREEN)</code>. Because it&#39;s allows to specify multiple <code>Predicate</code>s that would be chained together and used to evaluate the value returned by the <i>keyExtractor</i>. Which is a slight advantage. That said, I agree that this thing is an unnecessary complicated, and not suitable for practical use, but the problem itself is slightly contrived."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1668782352,"post_id":74489897,"comment_id":131496643,"body_markdown":"You are missing the point. I didn’t object your static factory methods nor their parameters, I just said, those factory methods can simply return `Predicate`. Then, the static factory methods are all you need. There is no reason for `MultiPred` to implement `Predicate` nor wrap a `Predicate`. If you keep the four static methods and remove the obsolete rest, you have half the code.","body":"You are missing the point. I didn’t object your static factory methods nor their parameters, I just said, those factory methods can simply return <code>Predicate</code>. Then, the static factory methods are all you need. There is no reason for <code>MultiPred</code> to implement <code>Predicate</code> nor wrap a <code>Predicate</code>. If you keep the four static methods and remove the obsolete rest, you have half the code."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1668784452,"post_id":74489897,"comment_id":131497407,"body_markdown":"To demonstrate that it works if all unnecessary things are removed, https://ideone.com/6sNBP3","body":"To demonstrate that it works if all unnecessary things are removed, <a href=\"https://ideone.com/6sNBP3\" rel=\"nofollow noreferrer\">ideone.com/6sNBP3</a>"},{"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"score":0,"creation_date":1668785020,"post_id":74489897,"comment_id":131497620,"body_markdown":"@Holger Sorry for dumb comments. I&#39;ve got your point, I&#39;ve followed your advice and implemented this functionality as static. And I also observed that, in a nutshell, that&#39;s precisely what `@shmosel` was proposing, approved his answer.","body":"@Holger Sorry for dumb comments. I&#39;ve got your point, I&#39;ve followed your advice and implemented this functionality as static. And I also observed that, in a nutshell, that&#39;s precisely what <code>@shmosel</code> was proposing, approved his answer."},{"owner":{"account_id":23010429,"reputation":215,"user_id":17133024,"display_name":"Dario Viva"},"score":0,"creation_date":1668806736,"post_id":74489897,"comment_id":131504017,"body_markdown":"thank you all for all this Information. I will have a look at this. But from a user perspective its quite a lot. That’s why I accepted the way shorter Answer from @shmosel.","body":"thank you all for all this Information. I will have a look at this. But from a user perspective its quite a lot. That’s why I accepted the way shorter Answer from @shmosel."}],"tags":[],"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"comment_count":8,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1668784772,"creation_date":1668775529,"answer_id":74489897,"question_id":74483362,"body_markdown":"Operation `Stream.filter()` expects a `Predicate` which is a *function* producing a `boolean` result. This definition of the `filter` is very intuitive and self-contained, and there are no other flavors of filter (*and I doubt if they will appear in the future*).\r\n\r\nHowever, you can create your implementation of `Predicate` and give it all the behavior you need. And as a Predicate, it would be eligible to be used in the `filter`.\r\n\r\nBefore introducing the implementation, I&#39;ll show some of the capabilities that can be given to such custom `Predicate`.\r\n\r\n```\r\nStream&lt;Animal&gt; greenAnimals = animalStream\r\n    .filter(\r\n        MultiPred.ofOr(Animal::getColor, Color.WHITE::equals, Color.GREEN::equals)\r\n            .or(\r\n                MultiPred.of(Animal::getType, AnimalType.CARNIVORE::equals)\r\n                .and(Animal::canFly) // we can chain custom Predicates with regular ones\r\n            )\r\n            .or(\r\n                MultiPred.of(Animal::getType, AnimalType.HERBIVORE::equals)\r\n                .and(MultiPred.of(Animal::getColor, Color.PURPLE::equals)\r\n                    .or(Animal::canSwim)\r\n                )\r\n            )\r\n    );\r\n```\r\n\r\nHere&#39;s a dummy class `Animal` and enums used in the example above:\r\n\r\n    public class Animal {\r\n        private AnimalType type;\r\n        private boolean canSwim;\r\n        private boolean canFly;\r\n        private Color color;\r\n        \r\n        // getters\r\n    }\r\n    \r\n    public enum AnimalType {\r\n        CARNIVORE, HERBIVORE\r\n    }\r\n    \r\n    public enum Color {\r\n        GREEN, WHITE, PURPLE\r\n    }\r\n\r\n# Implementation\r\n\r\nYou can provide a custom `Predicate` with any capabilities you require.\r\n\r\nThe following predicate expects exposes methods expecting a *keyExtractor* function and a predicate, or a group of predicates that has to be chained with either logical OR `||`, or logical AND `&amp;&amp;`.\r\n\r\n    public class MultiPred&lt;T, K&gt; implements Predicate&lt;T&gt; {\r\n\r\n        private final BiFunction&lt;Function&lt;T, K&gt;, Predicate&lt;K&gt;, Predicate&lt;T&gt;&gt;\r\n            predicateProducer = (f, p) -&gt; t -&gt; p.test(f.apply(t));\r\n        \r\n        private final Predicate&lt;T&gt; p;\r\n        \r\n        private MultiPred(Function&lt;T, K&gt; keyExtractor,\r\n                          Predicate&lt;K&gt; predicate) {\r\n            \r\n            this.p = predicateProducer.apply(keyExtractor, predicate);\r\n        }\r\n        \r\n        @SafeVarargs\r\n        public static &lt;T, K&gt; MultiPred&lt;T, K&gt; ofAnd(Function&lt;T, K&gt; keyExtractor,\r\n                                                   Predicate&lt;K&gt;... predicates) {\r\n            \r\n            return of(keyExtractor, k -&gt; true, Predicate::and, predicates);\r\n        }\r\n        \r\n        @SafeVarargs\r\n        public static &lt;T, K&gt; MultiPred&lt;T, K&gt; ofOr(Function&lt;T, K&gt; keyExtractor,\r\n                                                  Predicate&lt;K&gt;... predicates) {\r\n            \r\n            return of(keyExtractor, k -&gt; false, Predicate::or, predicates);\r\n        }\r\n        \r\n        @SafeVarargs\r\n        public static &lt;T, K&gt; MultiPred&lt;T, K&gt; of(Function&lt;T, K&gt; keyExtractor,\r\n                                                Predicate&lt;K&gt; identity,\r\n                                                BinaryOperator&lt;Predicate&lt;K&gt;&gt; op,\r\n                                                Predicate&lt;K&gt;... predicates) {\r\n            \r\n            Objects.requireNonNull(predicates);\r\n            \r\n            Predicate&lt;K&gt; predicate = Arrays.stream(predicates).reduce(identity, op);\r\n            \r\n            return new MultiPred&lt;&gt;(keyExtractor, predicate);\r\n        }\r\n        \r\n        public static &lt;T, K&gt; MultiPred&lt;T, K&gt; of(Function&lt;T, K&gt; keyExtractor,\r\n                                                Predicate&lt;K&gt; predicate) {\r\n            \r\n            Objects.requireNonNull(keyExtractor);\r\n            Objects.requireNonNull(predicate);\r\n        \r\n            return new MultiPred&lt;&gt;(keyExtractor, predicate);\r\n        }\r\n        \r\n        @Override\r\n        public boolean test(T t) {\r\n            Objects.requireNonNull(t);\r\n            return p.test(t);\r\n        }\r\n        \r\n        @Override\r\n        public Predicate&lt;T&gt; and(Predicate&lt;? super T&gt; other) {\r\n            Objects.requireNonNull(other);\r\n            return p.and(other);\r\n        }\r\n        \r\n        @Override\r\n        public Predicate&lt;T&gt; negate() {\r\n            return p.negate();\r\n        }\r\n        \r\n        @Override\r\n        public Predicate&lt;T&gt; or(Predicate&lt;? super T&gt; other) {\r\n            Objects.requireNonNull(other);\r\n            return p.or(other);\r\n        }\r\n    }\r\n\r\n# Utility Class for constructing Predicates\r\n\r\nThe logic from the class above can materialized as a utility class exposing a bunch `static` method for generating `Predicate`s. It would preserve all the capacities shown in usage example at the beginning.\r\n\r\n*(Credits for this idea belong to @Holger and @shmosel, since he [posted](https://stackoverflow.com/a/74485550/17949945) the static method producing a predicate earlier, hence the code shown below should be considered as built on the answer by @shmosel)*\r\n\r\n    public static class MultiPred {\r\n    \r\n        private MultiPred() {}\r\n    \r\n        @SafeVarargs\r\n        public static &lt;T, K&gt; Predicate&lt;T&gt; ofAnd(Function&lt;T, K&gt; keyExtractor,\r\n                                                Predicate&lt;K&gt;... predicates) {\r\n            \r\n            return of(keyExtractor, k -&gt; true, Predicate::and, predicates);\r\n        }\r\n        \r\n        @SafeVarargs\r\n        public static &lt;T, K&gt; Predicate&lt;T&gt; ofOr(Function&lt;T, K&gt; keyExtractor,\r\n                                               Predicate&lt;K&gt;... predicates) {\r\n            \r\n            return of(keyExtractor, k -&gt; false, Predicate::or, predicates);\r\n        }\r\n        \r\n        @SafeVarargs\r\n        public static &lt;T, K&gt; Predicate&lt;T&gt; of(Function&lt;T, K&gt; keyExtractor,\r\n                                             Predicate&lt;K&gt; identity,\r\n                                             BinaryOperator&lt;Predicate&lt;K&gt;&gt; op,\r\n                                             Predicate&lt;K&gt;... predicates) {\r\n            \r\n            Objects.requireNonNull(predicates);\r\n            \r\n            Predicate&lt;K&gt; predicate = Arrays.stream(predicates).reduce(identity, op);\r\n            \r\n            return getPredicateProducer(keyExtractor, predicate);\r\n        }\r\n        \r\n        public static &lt;T, K&gt; Predicate&lt;T&gt; of(Function&lt;T, K&gt; keyExtractor,\r\n                                             Predicate&lt;K&gt; predicate) {\r\n            \r\n            Objects.requireNonNull(keyExtractor);\r\n            Objects.requireNonNull(predicate);\r\n            \r\n            return getPredicateProducer(keyExtractor, predicate);\r\n        }\r\n        \r\n        private static &lt;T, K&gt; Predicate&lt;T&gt; getPredicateProducer(Function&lt;T, K&gt; keyExtractor,\r\n                                                                Predicate&lt;K&gt; predicate) {\r\n            return t -&gt; predicate.test(keyExtractor.apply(t));\r\n        }\r\n    }","title":"Stream map on filter","body":"<p>Operation <code>Stream.filter()</code> expects a <code>Predicate</code> which is a <em>function</em> producing a <code>boolean</code> result. This definition of the <code>filter</code> is very intuitive and self-contained, and there are no other flavors of filter (<em>and I doubt if they will appear in the future</em>).</p>\n<p>However, you can create your implementation of <code>Predicate</code> and give it all the behavior you need. And as a Predicate, it would be eligible to be used in the <code>filter</code>.</p>\n<p>Before introducing the implementation, I'll show some of the capabilities that can be given to such custom <code>Predicate</code>.</p>\n<pre><code>Stream&lt;Animal&gt; greenAnimals = animalStream\n    .filter(\n        MultiPred.ofOr(Animal::getColor, Color.WHITE::equals, Color.GREEN::equals)\n            .or(\n                MultiPred.of(Animal::getType, AnimalType.CARNIVORE::equals)\n                .and(Animal::canFly) // we can chain custom Predicates with regular ones\n            )\n            .or(\n                MultiPred.of(Animal::getType, AnimalType.HERBIVORE::equals)\n                .and(MultiPred.of(Animal::getColor, Color.PURPLE::equals)\n                    .or(Animal::canSwim)\n                )\n            )\n    );\n</code></pre>\n<p>Here's a dummy class <code>Animal</code> and enums used in the example above:</p>\n<pre><code>public class Animal {\n    private AnimalType type;\n    private boolean canSwim;\n    private boolean canFly;\n    private Color color;\n    \n    // getters\n}\n\npublic enum AnimalType {\n    CARNIVORE, HERBIVORE\n}\n\npublic enum Color {\n    GREEN, WHITE, PURPLE\n}\n</code></pre>\n<h1>Implementation</h1>\n<p>You can provide a custom <code>Predicate</code> with any capabilities you require.</p>\n<p>The following predicate expects exposes methods expecting a <em>keyExtractor</em> function and a predicate, or a group of predicates that has to be chained with either logical OR <code>||</code>, or logical AND <code>&amp;&amp;</code>.</p>\n<pre><code>public class MultiPred&lt;T, K&gt; implements Predicate&lt;T&gt; {\n\n    private final BiFunction&lt;Function&lt;T, K&gt;, Predicate&lt;K&gt;, Predicate&lt;T&gt;&gt;\n        predicateProducer = (f, p) -&gt; t -&gt; p.test(f.apply(t));\n    \n    private final Predicate&lt;T&gt; p;\n    \n    private MultiPred(Function&lt;T, K&gt; keyExtractor,\n                      Predicate&lt;K&gt; predicate) {\n        \n        this.p = predicateProducer.apply(keyExtractor, predicate);\n    }\n    \n    @SafeVarargs\n    public static &lt;T, K&gt; MultiPred&lt;T, K&gt; ofAnd(Function&lt;T, K&gt; keyExtractor,\n                                               Predicate&lt;K&gt;... predicates) {\n        \n        return of(keyExtractor, k -&gt; true, Predicate::and, predicates);\n    }\n    \n    @SafeVarargs\n    public static &lt;T, K&gt; MultiPred&lt;T, K&gt; ofOr(Function&lt;T, K&gt; keyExtractor,\n                                              Predicate&lt;K&gt;... predicates) {\n        \n        return of(keyExtractor, k -&gt; false, Predicate::or, predicates);\n    }\n    \n    @SafeVarargs\n    public static &lt;T, K&gt; MultiPred&lt;T, K&gt; of(Function&lt;T, K&gt; keyExtractor,\n                                            Predicate&lt;K&gt; identity,\n                                            BinaryOperator&lt;Predicate&lt;K&gt;&gt; op,\n                                            Predicate&lt;K&gt;... predicates) {\n        \n        Objects.requireNonNull(predicates);\n        \n        Predicate&lt;K&gt; predicate = Arrays.stream(predicates).reduce(identity, op);\n        \n        return new MultiPred&lt;&gt;(keyExtractor, predicate);\n    }\n    \n    public static &lt;T, K&gt; MultiPred&lt;T, K&gt; of(Function&lt;T, K&gt; keyExtractor,\n                                            Predicate&lt;K&gt; predicate) {\n        \n        Objects.requireNonNull(keyExtractor);\n        Objects.requireNonNull(predicate);\n    \n        return new MultiPred&lt;&gt;(keyExtractor, predicate);\n    }\n    \n    @Override\n    public boolean test(T t) {\n        Objects.requireNonNull(t);\n        return p.test(t);\n    }\n    \n    @Override\n    public Predicate&lt;T&gt; and(Predicate&lt;? super T&gt; other) {\n        Objects.requireNonNull(other);\n        return p.and(other);\n    }\n    \n    @Override\n    public Predicate&lt;T&gt; negate() {\n        return p.negate();\n    }\n    \n    @Override\n    public Predicate&lt;T&gt; or(Predicate&lt;? super T&gt; other) {\n        Objects.requireNonNull(other);\n        return p.or(other);\n    }\n}\n</code></pre>\n<h1>Utility Class for constructing Predicates</h1>\n<p>The logic from the class above can materialized as a utility class exposing a bunch <code>static</code> method for generating <code>Predicate</code>s. It would preserve all the capacities shown in usage example at the beginning.</p>\n<p><em>(Credits for this idea belong to @Holger and @shmosel, since he <a href=\"https://stackoverflow.com/a/74485550/17949945\">posted</a> the static method producing a predicate earlier, hence the code shown below should be considered as built on the answer by @shmosel)</em></p>\n<pre><code>public static class MultiPred {\n\n    private MultiPred() {}\n\n    @SafeVarargs\n    public static &lt;T, K&gt; Predicate&lt;T&gt; ofAnd(Function&lt;T, K&gt; keyExtractor,\n                                            Predicate&lt;K&gt;... predicates) {\n        \n        return of(keyExtractor, k -&gt; true, Predicate::and, predicates);\n    }\n    \n    @SafeVarargs\n    public static &lt;T, K&gt; Predicate&lt;T&gt; ofOr(Function&lt;T, K&gt; keyExtractor,\n                                           Predicate&lt;K&gt;... predicates) {\n        \n        return of(keyExtractor, k -&gt; false, Predicate::or, predicates);\n    }\n    \n    @SafeVarargs\n    public static &lt;T, K&gt; Predicate&lt;T&gt; of(Function&lt;T, K&gt; keyExtractor,\n                                         Predicate&lt;K&gt; identity,\n                                         BinaryOperator&lt;Predicate&lt;K&gt;&gt; op,\n                                         Predicate&lt;K&gt;... predicates) {\n        \n        Objects.requireNonNull(predicates);\n        \n        Predicate&lt;K&gt; predicate = Arrays.stream(predicates).reduce(identity, op);\n        \n        return getPredicateProducer(keyExtractor, predicate);\n    }\n    \n    public static &lt;T, K&gt; Predicate&lt;T&gt; of(Function&lt;T, K&gt; keyExtractor,\n                                         Predicate&lt;K&gt; predicate) {\n        \n        Objects.requireNonNull(keyExtractor);\n        Objects.requireNonNull(predicate);\n        \n        return getPredicateProducer(keyExtractor, predicate);\n    }\n    \n    private static &lt;T, K&gt; Predicate&lt;T&gt; getPredicateProducer(Function&lt;T, K&gt; keyExtractor,\n                                                            Predicate&lt;K&gt; predicate) {\n        return t -&gt; predicate.test(keyExtractor.apply(t));\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":934481,"reputation":7402,"user_id":2911357,"accept_rate":84,"display_name":"Michele Mariotti"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698164369,"creation_date":1698164369,"answer_id":77353816,"question_id":74483362,"body_markdown":"I&#39;m a little late, but this has not been proposed yet.\r\n\r\nStreamEx has been already mentioned, but its usage may vary ;)\r\n\r\n    greenAnimals = StreamEx.of(animalStream)\r\n        .mapToEntry(Animal::getColor)\r\n        .filterValues(Colors.GREEN::equals)\r\n        .keys();\r\n\r\n    animalWithMotherStream = StreamEx.of(animalStream)\r\n        .mapToEntry(Animal::getMother)\r\n        .removeValues(Optional::isEmpty)\r\n        .keys();\r\n\r\nThe general approach is to map an implicit &#39;Entry&#39; from the streamed objects themselves (as keys) AND a property of those objects (as values).\r\nThen you can use whatever you want on the values and finally return the keys.","title":"Stream map on filter","body":"<p>I'm a little late, but this has not been proposed yet.</p>\n<p>StreamEx has been already mentioned, but its usage may vary ;)</p>\n<pre><code>greenAnimals = StreamEx.of(animalStream)\n    .mapToEntry(Animal::getColor)\n    .filterValues(Colors.GREEN::equals)\n    .keys();\n\nanimalWithMotherStream = StreamEx.of(animalStream)\n    .mapToEntry(Animal::getMother)\n    .removeValues(Optional::isEmpty)\n    .keys();\n</code></pre>\n<p>The general approach is to map an implicit 'Entry' from the streamed objects themselves (as keys) AND a property of those objects (as values).\nThen you can use whatever you want on the values and finally return the keys.</p>\n"}],"owner":{"account_id":23010429,"reputation":215,"user_id":17133024,"display_name":"Dario Viva"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":242,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":74485550,"answer_count":6,"score":5,"last_activity_date":1698164369,"creation_date":1668728071,"question_id":74483362,"body_markdown":"When you have a Stream of Objects you can filter on them pretty elegantly.\r\n```java\r\nswimmingAnimalStream = animalStream\r\n    .filter(Animal::canSwim);\r\n```\r\nWhen you have slightly more complex filters instead of using Method references you have to use Lambdas.\r\n```java\r\ngreenAnimals = animalStream\r\n    .filter(animal -&gt; animal.getColor().equals(Colors.GREEN));\r\n```\r\nIs there a way to map the value before filtering on it, but still have the complete object after the filter?\r\nSo the fallowing is not what I want:\r\n```java\r\nanimalStream\r\n    .map(Animal::getColor)\r\n    .filter(Colors.GREEN::equals)\r\n```\r\nWith this I would be left with color information only.\r\nWhat I also would like to avoid is extracting the method. I am looking for a more streamlined way of doing this. Something like this for example:\r\n```java\r\nanimalStream\r\n    .filter(Colors.GREEN::equals, Animal::getColor);\r\n```\r\nThe method signature of this filter method would look like this.\r\n```java\r\n&lt;MAPPED&gt; Stream&lt;T&gt; filter(Predicate&lt;MAPPED&gt; filter, Function&lt;? super T, MAPPED&gt; mappingFunction);\r\n```\r\nEven better would be a version where you could join multiple mapping functions. On the fly one could maybe use a varargs for the mappingFunction. But I honestly don’t know how that would be possible with Generics. But that’s a different story.\r\n\r\nThe solution should also be able to use whatever Predicate that one could imagine. Equals is just an Example. Another example would be to check if a field from the object is present.\r\n\r\n```java\r\nanimalWithMotherStream = animalStream\r\n    .filter(Optional::isPresent, Animal::getMother);\r\n```\r\nDoes anyone now a cleaner Solution, or a library that does this already?","title":"Stream map on filter","body":"<p>When you have a Stream of Objects you can filter on them pretty elegantly.</p>\n<pre class=\"lang-java prettyprint-override\"><code>swimmingAnimalStream = animalStream\n    .filter(Animal::canSwim);\n</code></pre>\n<p>When you have slightly more complex filters instead of using Method references you have to use Lambdas.</p>\n<pre class=\"lang-java prettyprint-override\"><code>greenAnimals = animalStream\n    .filter(animal -&gt; animal.getColor().equals(Colors.GREEN));\n</code></pre>\n<p>Is there a way to map the value before filtering on it, but still have the complete object after the filter?\nSo the fallowing is not what I want:</p>\n<pre class=\"lang-java prettyprint-override\"><code>animalStream\n    .map(Animal::getColor)\n    .filter(Colors.GREEN::equals)\n</code></pre>\n<p>With this I would be left with color information only.\nWhat I also would like to avoid is extracting the method. I am looking for a more streamlined way of doing this. Something like this for example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>animalStream\n    .filter(Colors.GREEN::equals, Animal::getColor);\n</code></pre>\n<p>The method signature of this filter method would look like this.</p>\n<pre class=\"lang-java prettyprint-override\"><code>&lt;MAPPED&gt; Stream&lt;T&gt; filter(Predicate&lt;MAPPED&gt; filter, Function&lt;? super T, MAPPED&gt; mappingFunction);\n</code></pre>\n<p>Even better would be a version where you could join multiple mapping functions. On the fly one could maybe use a varargs for the mappingFunction. But I honestly don’t know how that would be possible with Generics. But that’s a different story.</p>\n<p>The solution should also be able to use whatever Predicate that one could imagine. Equals is just an Example. Another example would be to check if a field from the object is present.</p>\n<pre class=\"lang-java prettyprint-override\"><code>animalWithMotherStream = animalStream\n    .filter(Optional::isPresent, Animal::getMother);\n</code></pre>\n<p>Does anyone now a cleaner Solution, or a library that does this already?</p>\n"},{"tags":["java","multithreading","thread-synchronization"],"comments":[{"owner":{"account_id":9463219,"reputation":9357,"user_id":7036419,"display_name":"Maurice Perry"},"score":0,"creation_date":1698151712,"post_id":77352091,"comment_id":136366440,"body_markdown":"I&#39;m afraid you need a little more than an `Object` to do what you want to do","body":"I&#39;m afraid you need a little more than an <code>Object</code> to do what you want to do"},{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":0,"creation_date":1698152289,"post_id":77352091,"comment_id":136366543,"body_markdown":"`can I make the gama thread wait until beta finishes` One way to do that is just use a single thread.  If you want sequential semantics like this, a single thread of execution does that naturally.","body":"<code>can I make the gama thread wait until beta finishes</code> One way to do that is just use a single thread.  If you want sequential semantics like this, a single thread of execution does that naturally."},{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":0,"creation_date":1698152442,"post_id":77352091,"comment_id":136366583,"body_markdown":"P.S. I don&#39;t like your one space indentation.  Please use at least two spaces.  I prefer three myself.","body":"P.S. I don&#39;t like your one space indentation.  Please use at least two spaces.  I prefer three myself."},{"owner":{"account_id":4643732,"reputation":425,"user_id":5146920,"accept_rate":40,"display_name":"ot954"},"score":0,"creation_date":1698154474,"post_id":77352091,"comment_id":136367055,"body_markdown":"The reason for using multiple thread is time interval of execution of test() will be different.","body":"The reason for using multiple thread is time interval of execution of test() will be different."},{"owner":{"account_id":422870,"reputation":25925,"user_id":801894,"display_name":"Solomon Slow"},"score":0,"creation_date":1698156950,"post_id":77352091,"comment_id":136367709,"body_markdown":"Are you saying that each of the two threads is `synchronized` on the same `sharedLock` object at the same time? That seems unlikely. What makes you think they both are synchronized on the same object at the same time? Can you expand your example to something that other people can try out for themselves? http://sscce.org/","body":"Are you saying that each of the two threads is <code>synchronized</code> on the same <code>sharedLock</code> object at the same time? That seems unlikely. What makes you think they both are synchronized on the same object at the same time? Can you expand your example to something that other people can try out for themselves? <a href=\"http://sscce.org/\" rel=\"nofollow noreferrer\">sscce.org</a>"},{"owner":{"account_id":4643732,"reputation":425,"user_id":5146920,"accept_rate":40,"display_name":"ot954"},"score":0,"creation_date":1698158171,"post_id":77352091,"comment_id":136367969,"body_markdown":"I am not sure about that. What I know for sure is that if both thread were operating on the same shared space then this would work. But I have two different instances and that is my question- how can I share lock between threads started by different instances","body":"I am not sure about that. What I know for sure is that if both thread were operating on the same shared space then this would work. But I have two different instances and that is my question- how can I share lock between threads started by different instances"},{"owner":{"account_id":422870,"reputation":25925,"user_id":801894,"display_name":"Solomon Slow"},"score":0,"creation_date":1698158240,"post_id":77352091,"comment_id":136367980,"body_markdown":"P.S., You said, &quot;how can I make the gama thread wait until...?&quot; IMO, saying, &quot;wait&quot; to talk about `synchronized` blocks is a red flag. If one thread has to wait for to enter a synchronized block, that&#39;s a necessary evil, not desirable behavior. You should always try to minimize that wait. When `synchronized` (or `ReentrantLock`) appears in your code, it sends a message to other programmers: It says, &quot;This protects shared data from corruption.&quot; If you want to tell other programmers, &quot;This thread must wait until...&quot; then you should use something else (probably from `java.util.concurrent`.)","body":"P.S., You said, &quot;how can I make the gama thread wait until...?&quot; IMO, saying, &quot;wait&quot; to talk about <code>synchronized</code> blocks is a red flag. If one thread has to wait for to enter a synchronized block, that&#39;s a necessary evil, not desirable behavior. You should always try to minimize that wait. When <code>synchronized</code> (or <code>ReentrantLock</code>) appears in your code, it sends a message to other programmers: It says, &quot;This protects shared data from corruption.&quot; If you want to tell other programmers, &quot;This thread must wait until...&quot; then you should use something else (probably from <code>java.util.concurrent</code>.)"},{"owner":{"account_id":422870,"reputation":25925,"user_id":801894,"display_name":"Solomon Slow"},"score":0,"creation_date":1698158498,"post_id":77352091,"comment_id":136368036,"body_markdown":"Re, &quot;how can I share lock between threads started by different instances?&quot; Your code already _appears_ (from what we can see of it) to do that. Your `run` method clearly passes the same argument to `beta.start` and `gama.start`. If both of those `start` methods look like the one that you showed, then they&#39;re both `synchronized` on the same shared lock. Like I said above, if you could amend your question with an example that other people here could run and demonstrate the problem for themselves, then you would be more likely to get a helpful answer.","body":"Re, &quot;how can I share lock between threads started by different instances?&quot; Your code already <i>appears</i> (from what we can see of it) to do that. Your <code>run</code> method clearly passes the same argument to <code>beta.start</code> and <code>gama.start</code>. If both of those <code>start</code> methods look like the one that you showed, then they&#39;re both <code>synchronized</code> on the same shared lock. Like I said above, if you could amend your question with an example that other people here could run and demonstrate the problem for themselves, then you would be more likely to get a helpful answer."},{"owner":{"account_id":4643732,"reputation":425,"user_id":5146920,"accept_rate":40,"display_name":"ot954"},"score":0,"creation_date":1698159787,"post_id":77352091,"comment_id":136368330,"body_markdown":"Sorry but if they both are synchronized on the same shared lock, should not only one thread execute start() at a time? I have added the implementation of the start() method for both classes.","body":"Sorry but if they both are synchronized on the same shared lock, should not only one thread execute start() at a time? I have added the implementation of the start() method for both classes."}],"answers":[{"comments":[{"owner":{"account_id":4643732,"reputation":425,"user_id":5146920,"accept_rate":40,"display_name":"ot954"},"score":0,"creation_date":1698154176,"post_id":77352269,"comment_id":136366985,"body_markdown":"I tried, but it doesn&#39;t work. I can see logs of gama thread while beta thread is still executing test()","body":"I tried, but it doesn&#39;t work. I can see logs of gama thread while beta thread is still executing test()"},{"owner":{"account_id":9463219,"reputation":9357,"user_id":7036419,"display_name":"Maurice Perry"},"score":0,"creation_date":1698154386,"post_id":77352269,"comment_id":136367029,"body_markdown":"The problem is elsewhere then","body":"The problem is elsewhere then"},{"owner":{"account_id":422870,"reputation":25925,"user_id":801894,"display_name":"Solomon Slow"},"score":0,"creation_date":1698157096,"post_id":77352269,"comment_id":136367738,"body_markdown":"Could you explain how your example would function differently from OP&#39;s example? What would `acquire`ing and then `release`ing a shared `Semaphore` make your program do differently from OP&#39;s code that enters and leaves a block that is `synchronized` on a shared `Object`?","body":"Could you explain how your example would function differently from OP&#39;s example? What would <code>acquire</code>ing and then <code>release</code>ing a shared <code>Semaphore</code> make your program do differently from OP&#39;s code that enters and leaves a block that is <code>synchronized</code> on a shared <code>Object</code>?"}],"tags":[],"owner":{"account_id":9463219,"reputation":9357,"user_id":7036419,"display_name":"Maurice Perry"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698152352,"creation_date":1698152352,"answer_id":77352269,"question_id":77352091,"body_markdown":"Try a semaphore:\r\n\r\n\r\n    public static void start(Semaphore sharedLock) {\r\n        Thread t = new Thread(() -&gt; {\r\n            while (true) {\r\n                try {\r\n                    sharedLock.acquire();\r\n                    test();\r\n                    sharedLock.release();\r\n                    TimeUnit.SECONDS.sleep(3);\r\n                } catch (InterruptedException e) {\r\n                    Thread.currentThread().interrupt();\r\n                }\r\n            }\r\n        });\r\n        t.start();\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        Semaphore semaphore = new Semaphore(1);\r\n        start(semaphore);\r\n        start(semaphore);\r\n    }\r\n","title":"How to share lock between threads started by instances of different classes in Java?","body":"<p>Try a semaphore:</p>\n<pre><code>public static void start(Semaphore sharedLock) {\n    Thread t = new Thread(() -&gt; {\n        while (true) {\n            try {\n                sharedLock.acquire();\n                test();\n                sharedLock.release();\n                TimeUnit.SECONDS.sleep(3);\n            } catch (InterruptedException e) {\n                Thread.currentThread().interrupt();\n            }\n        }\n    });\n    t.start();\n}\n\npublic static void main(String[] args) {\n    Semaphore semaphore = new Semaphore(1);\n    start(semaphore);\n    start(semaphore);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":422870,"reputation":25925,"user_id":801894,"display_name":"Solomon Slow"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698163881,"creation_date":1698163881,"answer_id":77353759,"question_id":77352091,"body_markdown":"&gt; I have added the implementation of the `start()` method for both classes.&quot;\r\n \r\nActually, no. You added the `test` methods. But no matter because...\r\n\r\n&gt; Only one thread should be able to execute test() at a time. So if beta thread calls start() first then it should print 1 to 20 and then gama thread execute start()\r\n\r\nYour `beta.test()` method doesn&#39;t print anything. It creates a new `ScheduledExecutorService`, and it submits a task to it. The scheduled executor performs that task in a completely different thread, and the task makes no reference whatever to the `sharedLock` object.\r\n","title":"How to share lock between threads started by instances of different classes in Java?","body":"<blockquote>\n<p>I have added the implementation of the <code>start()</code> method for both classes.&quot;</p>\n</blockquote>\n<p>Actually, no. You added the <code>test</code> methods. But no matter because...</p>\n<blockquote>\n<p>Only one thread should be able to execute test() at a time. So if beta thread calls start() first then it should print 1 to 20 and then gama thread execute start()</p>\n</blockquote>\n<p>Your <code>beta.test()</code> method doesn't print anything. It creates a new <code>ScheduledExecutorService</code>, and it submits a task to it. The scheduled executor performs that task in a completely different thread, and the task makes no reference whatever to the <code>sharedLock</code> object.</p>\n"}],"owner":{"account_id":4643732,"reputation":425,"user_id":5146920,"accept_rate":40,"display_name":"ot954"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":88,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1698163881,"creation_date":1698150902,"question_id":77352091,"body_markdown":"I tried creating a shared lock in the Application class and passing it to the method parameter that creates a thread and uses this lock. I want a thread created by an instance of a class to synchronize with a thread created by an instance of another class.\r\n\r\nClass Alpha has a start(Object sharedLock) which creates a new thread.\r\n````\r\n\r\npublic abstract class Alpha {\r\n   public abstract void test();\r\n\r\n   public void start(Object sharedLock) {\r\n      Thread t = new Thread(() -&gt; {\r\n         while(true) {\r\n            synchronized(sharedLock) {\r\n               test();\r\n            }\r\n            try {\r\n               TimeUnit.SECONDS.sleep(db.timeInterval)\r\n            } catch(InterruptedException e) {\r\n                 Thread.currentThread().interrupt();\r\n            }\r\n        }\r\n      })\r\n   }\r\n}\r\n\r\n````\r\nClass Alpha has two base classes Beta and Gama, which invokes start() method from Application class. Below is the code snippet\r\n````\r\n@Override\r\npublic void run(String... args) {\r\n    beta.start(sharedLock);\r\n    gama.start(sharedLock)\r\n}\r\n````\r\ntest() is overridden in child classes - beta and gama.\r\n\r\nAnd here is the implementation of test()\r\n````\r\npublic class Beta extends Aplha {\r\n   @Override\r\n   public void test() {\r\n      ScheduledExecutorService executor = Executors.newScheduledThreadPool(1);\r\n      final int[] count = {1};\r\n   \r\n      Runnable task = new Runnable() {\r\n         @Override\r\n         public void run() {\r\n            System.out.println(count[0]);\r\n            count[0]++;\r\n\r\n            if (count[0] &gt; 20) {\r\n               executor.shutdown();\r\n            }\r\n         }\r\n      }\r\n      executor.scheduledAtFixedRate(task, 0, 1, TimeUnit.SECONDS);\r\n   }\r\n}\r\n\r\npublic class Gama extends Alpha {\r\n   @Override\r\n   public void test() {\r\n      System.out.println(&quot;Gama thread&quot;)\r\n   }\r\n}\r\n````\r\nOnly one thread should be able to execute test() at a time. So if beta thread calls start() first then it should print 1 to 20 and then gama thread execute start()\r\n\r\nAlso, when a thread is seeping, the other thread can execute by having access to lock\r\n\r\nHow can I achieve this behaviour?","title":"How to share lock between threads started by instances of different classes in Java?","body":"<p>I tried creating a shared lock in the Application class and passing it to the method parameter that creates a thread and uses this lock. I want a thread created by an instance of a class to synchronize with a thread created by an instance of another class.</p>\n<p>Class Alpha has a start(Object sharedLock) which creates a new thread.</p>\n<pre><code>\npublic abstract class Alpha {\n   public abstract void test();\n\n   public void start(Object sharedLock) {\n      Thread t = new Thread(() -&gt; {\n         while(true) {\n            synchronized(sharedLock) {\n               test();\n            }\n            try {\n               TimeUnit.SECONDS.sleep(db.timeInterval)\n            } catch(InterruptedException e) {\n                 Thread.currentThread().interrupt();\n            }\n        }\n      })\n   }\n}\n\n</code></pre>\n<p>Class Alpha has two base classes Beta and Gama, which invokes start() method from Application class. Below is the code snippet</p>\n<pre><code>@Override\npublic void run(String... args) {\n    beta.start(sharedLock);\n    gama.start(sharedLock)\n}\n</code></pre>\n<p>test() is overridden in child classes - beta and gama.</p>\n<p>And here is the implementation of test()</p>\n<pre><code>public class Beta extends Aplha {\n   @Override\n   public void test() {\n      ScheduledExecutorService executor = Executors.newScheduledThreadPool(1);\n      final int[] count = {1};\n   \n      Runnable task = new Runnable() {\n         @Override\n         public void run() {\n            System.out.println(count[0]);\n            count[0]++;\n\n            if (count[0] &gt; 20) {\n               executor.shutdown();\n            }\n         }\n      }\n      executor.scheduledAtFixedRate(task, 0, 1, TimeUnit.SECONDS);\n   }\n}\n\npublic class Gama extends Alpha {\n   @Override\n   public void test() {\n      System.out.println(&quot;Gama thread&quot;)\n   }\n}\n</code></pre>\n<p>Only one thread should be able to execute test() at a time. So if beta thread calls start() first then it should print 1 to 20 and then gama thread execute start()</p>\n<p>Also, when a thread is seeping, the other thread can execute by having access to lock</p>\n<p>How can I achieve this behaviour?</p>\n"},{"tags":["java","micronaut","testcontainers","testcontainers-junit5"],"comments":[{"owner":{"account_id":19255478,"reputation":8414,"user_id":14072498,"display_name":"Roar S."},"score":0,"creation_date":1698164968,"post_id":77352776,"comment_id":136369459,"body_markdown":"When having `init.sql` in folder `src/test/resources/`,the file will end up in folder target/test-classes after build, and you&#39;ll use `classpath:init.sql` . Normally, you would create a folder called e.g. scripts inside folder `resources`, then use `classpath:scripts/init.sql` BR","body":"When having <code>init.sql</code> in folder <code>src&#47;test&#47;resources&#47;</code>,the file will end up in folder target/test-classes after build, and you&#39;ll use <code>classpath:init.sql</code> . Normally, you would create a folder called e.g. scripts inside folder <code>resources</code>, then use <code>classpath:scripts&#47;init.sql</code> BR"},{"owner":{"account_id":4906768,"reputation":3,"user_id":3953299,"display_name":"Heavyrage"},"score":0,"creation_date":1698166324,"post_id":77352776,"comment_id":136369697,"body_markdown":"Thanks for the hint, but no success doing this. As already said in the thread, I tried every form of declaration I thought of, same result each time.","body":"Thanks for the hint, but no success doing this. As already said in the thread, I tried every form of declaration I thought of, same result each time."},{"owner":{"account_id":19255478,"reputation":8414,"user_id":14072498,"display_name":"Roar S."},"score":0,"creation_date":1698166552,"post_id":77352776,"comment_id":136369733,"body_markdown":"Can you verify that the file is copied to target/test-classes after build ? BR","body":"Can you verify that the file is copied to target/test-classes after build ? BR"},{"owner":{"account_id":4906768,"reputation":3,"user_id":3953299,"display_name":"Heavyrage"},"score":0,"creation_date":1698167140,"post_id":77352776,"comment_id":136369836,"body_markdown":"Indeed it is (target/test-classes/scripts/init.sql) ! I can&#39;t really understand why it is not found by the ScriptUtils class. I took a look at the sources of the Testcontainers dependency and it uses &quot;Thread.currentThread().getContextClassLoader().getResource(initScriptPath)&quot; to find for the resource. Any idea why it is not resolved as supposed?","body":"Indeed it is (target/test-classes/scripts/init.sql) ! I can&#39;t really understand why it is not found by the ScriptUtils class. I took a look at the sources of the Testcontainers dependency and it uses &quot;Thread.currentThread().getContextClassLoader().getResource(&zwnj;&#8203;initScriptPath)&quot; to find for the resource. Any idea why it is not resolved as supposed?"}],"owner":{"account_id":4906768,"reputation":3,"user_id":3953299,"display_name":"Heavyrage"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":113,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1698163786,"creation_date":1698156016,"question_id":77352776,"body_markdown":"I am stuck on this since two days, while I am trying to implement the Test-resources capability of Micronaut framework.\r\n\r\nHere is the content of my application-test.properties : \r\n\r\n```\r\ndatasources.default.dialect=MYSQL\r\ndatasources.default.driverClassName=com.mysql.cj.jdbc.Driver\r\ndatasources.default.schema-generate=CREATE_DROP\r\n\r\ntest-resources.containers.mysql.image-name=mysql:8.1.0\r\ntest-resources.containers.mysql.db-name=testDB\r\ntest-resources.containers.mysql.username=dbuser\r\ntest-resources.containers.mysql.password=&quot;mypassword&quot;\r\ntest-resources.containers.mysql.init-script-path=&quot;src/test/resources/init.sql&quot;\r\n```\r\n\r\nMy `pom.xml` is declaring the common micronaut dependencies (generated from the Micronaut Launch app).\r\n\r\nAnyway, I always have the following error when trying the `mvn clean test` command.\r\n\r\n\r\n```\r\n[test-resources-service] 15:33:37.784 [default-nioEventLoopGroup-1-3] INFO  tc.mysql:8.1.0 - Container is started (JDBC URL: jdbc:mysql://localhost:53931/testDB)\r\n[test-resources-service] 15:33:37.785 [default-nioEventLoopGroup-1-3] WARN  org.testcontainers.ext.ScriptUtils - Could not load classpath init script: &quot;src/test/resources/init.sql&quot;\r\n[test-resources-service] 15:33:37.785 [default-nioEventLoopGroup-1-3] ERROR tc.mysql:8.1.0 - Could not start container\r\norg.testcontainers.ext.ScriptUtils$ScriptLoadException: Could not load classpath init script: &quot;src/test/resources/init.sql&quot;. Resource not found.\r\n        at org.testcontainers.ext.ScriptUtils.runInitScript(ScriptUtils.java:347)\r\n        at org.testcontainers.containers.JdbcDatabaseContainer.runInitScriptIfRequired(JdbcDatabaseContainer.java:332)\r\n        at org.testcontainers.containers.JdbcDatabaseContainer.containerIsStarted(JdbcDatabaseContainer.java:187)\r\n        at org.testcontainers.containers.GenericContainer.containerIsStarted(GenericContainer.java:712)\r\n        at org.testcontainers.containers.GenericContainer.tryStart(GenericContainer.java:532)\r\n        at org.testcontainers.containers.GenericContainer.lambda$doStart$0(GenericContainer.java:344)\r\n        at org.rnorth.ducttape.unreliables.Unreliables.retryUntilSuccess(Unreliables.java:81)\r\n        at org.testcontainers.containers.GenericContainer.doStart(GenericContainer.java:334)\r\n        at org.testcontainers.containers.GenericContainer.start(GenericContainer.java:322)\r\n        at io.micronaut.testresources.testcontainers.TestContainers.getOrCreate(TestContainers.java:80)\r\n        at io.micronaut.testresources.testcontainers.AbstractTestContainersProvider.resolve(AbstractTestContainersProvider.java:100)\r\n        at io.micronaut.testresources.server.TestResourcesController.resolve(TestResourcesController.java:90)\r\n```\r\n\r\nIn the Micronaut documentation it is mentioned that it has to be a file in the `classpath`.\r\n[Micronaut Test-Resources doc](https://micronaut-projects.github.io/micronaut-test-resources/snapshot/guide/#modules-databases)\r\n\r\nMy guess here is that the classpth does not use the same root as my java project.\r\n\r\nI tried different values for `test-resources.containers.mysql.init-script-path`. \r\n- Relative path using the project root as reference\r\n- Absolute path (not sure it is the best solution, but at least it confirmed that even an absolute path couldn&#39;t be resolved)\r\n- using the `classpath:` prefix for the relative path of the init script (ex : classpath:src/test/resources/init.sql&quot;)\r\n- using the declaration from the Testcontainers documentation ([init script in Classpath](https://java.testcontainers.org/modules/databases/jdbc/#using-a-classpath-init-script) &amp; [init script from a file](https://java.testcontainers.org/modules/databases/jdbc/#using-an-init-script-from-a-file)\r\n\r\nNone of them even worked.\r\n\r\nAnyway I am sure the other part of the Test-Resources module are working well because when I don&#39;t declare an init script, the database is used but none of the expected tables are present.\r\n\r\nAm I doing something wrong or missing something in the configuration?\r\n\r\nEdit : I am using the standard controller and CrudRepository from Micronaut. I just found appealing to use the Test-Resource for integration purpose.","title":"org.testcontainers.ext.ScriptUtils$ScriptLoadException: Could not load classpath init script with Micronaut project using Test-Resources","body":"<p>I am stuck on this since two days, while I am trying to implement the Test-resources capability of Micronaut framework.</p>\n<p>Here is the content of my application-test.properties :</p>\n<pre><code>datasources.default.dialect=MYSQL\ndatasources.default.driverClassName=com.mysql.cj.jdbc.Driver\ndatasources.default.schema-generate=CREATE_DROP\n\ntest-resources.containers.mysql.image-name=mysql:8.1.0\ntest-resources.containers.mysql.db-name=testDB\ntest-resources.containers.mysql.username=dbuser\ntest-resources.containers.mysql.password=&quot;mypassword&quot;\ntest-resources.containers.mysql.init-script-path=&quot;src/test/resources/init.sql&quot;\n</code></pre>\n<p>My <code>pom.xml</code> is declaring the common micronaut dependencies (generated from the Micronaut Launch app).</p>\n<p>Anyway, I always have the following error when trying the <code>mvn clean test</code> command.</p>\n<pre><code>[test-resources-service] 15:33:37.784 [default-nioEventLoopGroup-1-3] INFO  tc.mysql:8.1.0 - Container is started (JDBC URL: jdbc:mysql://localhost:53931/testDB)\n[test-resources-service] 15:33:37.785 [default-nioEventLoopGroup-1-3] WARN  org.testcontainers.ext.ScriptUtils - Could not load classpath init script: &quot;src/test/resources/init.sql&quot;\n[test-resources-service] 15:33:37.785 [default-nioEventLoopGroup-1-3] ERROR tc.mysql:8.1.0 - Could not start container\norg.testcontainers.ext.ScriptUtils$ScriptLoadException: Could not load classpath init script: &quot;src/test/resources/init.sql&quot;. Resource not found.\n        at org.testcontainers.ext.ScriptUtils.runInitScript(ScriptUtils.java:347)\n        at org.testcontainers.containers.JdbcDatabaseContainer.runInitScriptIfRequired(JdbcDatabaseContainer.java:332)\n        at org.testcontainers.containers.JdbcDatabaseContainer.containerIsStarted(JdbcDatabaseContainer.java:187)\n        at org.testcontainers.containers.GenericContainer.containerIsStarted(GenericContainer.java:712)\n        at org.testcontainers.containers.GenericContainer.tryStart(GenericContainer.java:532)\n        at org.testcontainers.containers.GenericContainer.lambda$doStart$0(GenericContainer.java:344)\n        at org.rnorth.ducttape.unreliables.Unreliables.retryUntilSuccess(Unreliables.java:81)\n        at org.testcontainers.containers.GenericContainer.doStart(GenericContainer.java:334)\n        at org.testcontainers.containers.GenericContainer.start(GenericContainer.java:322)\n        at io.micronaut.testresources.testcontainers.TestContainers.getOrCreate(TestContainers.java:80)\n        at io.micronaut.testresources.testcontainers.AbstractTestContainersProvider.resolve(AbstractTestContainersProvider.java:100)\n        at io.micronaut.testresources.server.TestResourcesController.resolve(TestResourcesController.java:90)\n</code></pre>\n<p>In the Micronaut documentation it is mentioned that it has to be a file in the <code>classpath</code>.\n<a href=\"https://micronaut-projects.github.io/micronaut-test-resources/snapshot/guide/#modules-databases\" rel=\"nofollow noreferrer\">Micronaut Test-Resources doc</a></p>\n<p>My guess here is that the classpth does not use the same root as my java project.</p>\n<p>I tried different values for <code>test-resources.containers.mysql.init-script-path</code>.</p>\n<ul>\n<li>Relative path using the project root as reference</li>\n<li>Absolute path (not sure it is the best solution, but at least it confirmed that even an absolute path couldn't be resolved)</li>\n<li>using the <code>classpath:</code> prefix for the relative path of the init script (ex : classpath:src/test/resources/init.sql&quot;)</li>\n<li>using the declaration from the Testcontainers documentation (<a href=\"https://java.testcontainers.org/modules/databases/jdbc/#using-a-classpath-init-script\" rel=\"nofollow noreferrer\">init script in Classpath</a> &amp; <a href=\"https://java.testcontainers.org/modules/databases/jdbc/#using-an-init-script-from-a-file\" rel=\"nofollow noreferrer\">init script from a file</a></li>\n</ul>\n<p>None of them even worked.</p>\n<p>Anyway I am sure the other part of the Test-Resources module are working well because when I don't declare an init script, the database is used but none of the expected tables are present.</p>\n<p>Am I doing something wrong or missing something in the configuration?</p>\n<p>Edit : I am using the standard controller and CrudRepository from Micronaut. I just found appealing to use the Test-Resource for integration purpose.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":1352170,"reputation":34246,"user_id":1291492,"accept_rate":100,"display_name":"ControlAltDel"},"score":1,"creation_date":1698162430,"post_id":77353516,"comment_id":136368949,"body_markdown":"You just have to remove all references to the object in the stack and the heap and the object will be unreachable and eligible for collection. The other way you can do this is use native resources / JNI (See Java.awt.Window.dispose for an example)","body":"You just have to remove all references to the object in the stack and the heap and the object will be unreachable and eligible for collection. The other way you can do this is use native resources / JNI (See Java.awt.Window.dispose for an example)"}],"answers":[{"tags":[],"owner":{"account_id":7421543,"reputation":2874,"user_id":5645656,"accept_rate":100,"display_name":"Cardinal System"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698161967,"creation_date":1698161967,"answer_id":77353524,"question_id":77353516,"body_markdown":"The JVM automatically frees memory. Read about [Java&#39;s garbage collector][1].\r\n\r\n\r\n  [1]: https://www.oracle.com/webfolder/technetwork/tutorials/obe/java/gc01/index.html","title":"Is there any way in Java to delete an element from the memory?","body":"<p>The JVM automatically frees memory. Read about <a href=\"https://www.oracle.com/webfolder/technetwork/tutorials/obe/java/gc01/index.html\" rel=\"nofollow noreferrer\">Java's garbage collector</a>.</p>\n"},{"tags":[],"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"comment_count":0,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1698162359,"creation_date":1698162359,"answer_id":77353580,"question_id":77353516,"body_markdown":"&gt; and the user presses cancel\r\n\r\nThat shouldn&#39;t be happening in an object&#39;s constructor anyway. A constructor is for constructing an object **only**.\r\n\r\nGet the input from the user first, and only invoke the constructor if they choose to proceed. If they press cancel, don&#39;t invoke the constructor.","title":"Is there any way in Java to delete an element from the memory?","body":"<blockquote>\n<p>and the user presses cancel</p>\n</blockquote>\n<p>That shouldn't be happening in an object's constructor anyway. A constructor is for constructing an object <strong>only</strong>.</p>\n<p>Get the input from the user first, and only invoke the constructor if they choose to proceed. If they press cancel, don't invoke the constructor.</p>\n"}],"owner":{"account_id":29723109,"reputation":1,"user_id":22779881,"display_name":"FireGoose&#39;s Empire"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":50,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":2,"score":-1,"last_activity_date":1698163182,"creation_date":1698161904,"question_id":77353516,"body_markdown":"Say that I want to create a class object with a *JOptionPane* dialog. In the constructor I assign the variables and other stuff, and the user presses cancel. Of course I want to delete that thing, because it is half made and could be buggy. Is there **any way** to do this in **java**?","title":"Is there any way in Java to delete an element from the memory?","body":"<p>Say that I want to create a class object with a <em>JOptionPane</em> dialog. In the constructor I assign the variables and other stuff, and the user presses cancel. Of course I want to delete that thing, because it is half made and could be buggy. Is there <strong>any way</strong> to do this in <strong>java</strong>?</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9812,"page":105,"page_size":100}
