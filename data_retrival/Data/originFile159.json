{"items":[{"tags":["java","spring-boot","kubernetes","jvm","java-11"],"comments":[{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":1,"creation_date":1695799384,"post_id":77185098,"comment_id":136070858,"body_markdown":"I suggest that you start by finding out why the pods were restarting.","body":"I suggest that you start by finding out why the pods were restarting."},{"owner":{"account_id":15064163,"reputation":13519,"user_id":10871900,"display_name":"dan1st is crying"},"score":0,"creation_date":1695803610,"post_id":77185098,"comment_id":136071630,"body_markdown":"Which kind of threads were reduced? Is it a specific thread pool?","body":"Which kind of threads were reduced? Is it a specific thread pool?"},{"owner":{"account_id":213468,"reputation":103494,"user_id":466862,"display_name":"Mark Rotteveel"},"score":2,"creation_date":1695803622,"post_id":77185098,"comment_id":136071636,"body_markdown":"Recent Java version obtain more information about their run environment when running in a container. It is possible that it uses/reports a lower CPU count because of the requests/limits you configured for your pod, this in turn may lead to libraries using a lower number of threads for thread pools and such. You may need to manually override this by instructing Java to assume a higher CPU count with `-XX:ActiveProcessorCount`, e.g, `-XX:ActiveProcessorCount=4` to assume four CPUs.","body":"Recent Java version obtain more information about their run environment when running in a container. It is possible that it uses/reports a lower CPU count because of the requests/limits you configured for your pod, this in turn may lead to libraries using a lower number of threads for thread pools and such. You may need to manually override this by instructing Java to assume a higher CPU count with <code>-XX:ActiveProcessorCount</code>, e.g, <code>-XX:ActiveProcessorCount=4</code> to assume four CPUs."},{"owner":{"account_id":213468,"reputation":103494,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1695803770,"post_id":77185098,"comment_id":136071667,"body_markdown":"Alternatively, find out if you can configure Undertow manually to use a higher thread count instead of deriving it from the CPU count.","body":"Alternatively, find out if you can configure Undertow manually to use a higher thread count instead of deriving it from the CPU count."},{"owner":{"account_id":20667761,"reputation":53,"user_id":15174185,"display_name":"Chaithra Shenoy"},"score":0,"creation_date":1695812426,"post_id":77185098,"comment_id":136073412,"body_markdown":"If I manually increase the undertow thread count will it not affect the performance of the application?","body":"If I manually increase the undertow thread count will it not affect the performance of the application?"},{"owner":{"account_id":15064163,"reputation":13519,"user_id":10871900,"display_name":"dan1st is crying"},"score":0,"creation_date":1695812506,"post_id":77185098,"comment_id":136073425,"body_markdown":"Changing the amount of threads will likely affect the performance of your application. But isn&#39;t that what you want?","body":"Changing the amount of threads will likely affect the performance of your application. But isn&#39;t that what you want?"},{"owner":{"account_id":20667761,"reputation":53,"user_id":15174185,"display_name":"Chaithra Shenoy"},"score":0,"creation_date":1695812707,"post_id":77185098,"comment_id":136073448,"body_markdown":"The configuration for requests/limits hasn&#39;t changed. It is the same as before migration.","body":"The configuration for requests/limits hasn&#39;t changed. It is the same as before migration."},{"owner":{"account_id":15064163,"reputation":13519,"user_id":10871900,"display_name":"dan1st is crying"},"score":0,"creation_date":1695812804,"post_id":77185098,"comment_id":136073473,"body_markdown":"The ideal configuration may be different with different Spring/Java versions.","body":"The ideal configuration may be different with different Spring/Java versions."},{"owner":{"account_id":20667761,"reputation":53,"user_id":15174185,"display_name":"Chaithra Shenoy"},"score":0,"creation_date":1695812854,"post_id":77185098,"comment_id":136073480,"body_markdown":"Is there any formula to see how many threads I can increase to? for now, the undertow threads are 16 which is a default value.","body":"Is there any formula to see how many threads I can increase to? for now, the undertow threads are 16 which is a default value."},{"owner":{"account_id":15064163,"reputation":13519,"user_id":10871900,"display_name":"dan1st is crying"},"score":1,"creation_date":1695812905,"post_id":77185098,"comment_id":136073493,"body_markdown":"I guess you need to try out different values and see what works best. There are formulas like `number of threads = number of cores * estimated IO time / estimated CPU time` but there are also some issues with that (i.e. at some point, you&#39;ll reach OS or memory limitations when creating too many threads)","body":"I guess you need to try out different values and see what works best. There are formulas like <code>number of threads = number of cores * estimated IO time &#47; estimated CPU time</code> but there are also some issues with that (i.e. at some point, you&#39;ll reach OS or memory limitations when creating too many threads)"},{"owner":{"account_id":20667761,"reputation":53,"user_id":15174185,"display_name":"Chaithra Shenoy"},"score":0,"creation_date":1695813008,"post_id":77185098,"comment_id":136073517,"body_markdown":"Is there a way to find the configuration for the Java version?\nWill the docker image also impact the CPU count?","body":"Is there a way to find the configuration for the Java version? Will the docker image also impact the CPU count?"},{"owner":{"account_id":15064163,"reputation":13519,"user_id":10871900,"display_name":"dan1st is crying"},"score":1,"creation_date":1695813090,"post_id":77185098,"comment_id":136073534,"body_markdown":"Try it and see what works best.","body":"Try it and see what works best."},{"owner":{"account_id":213468,"reputation":103494,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1695887024,"post_id":77185098,"comment_id":136084388,"body_markdown":"_&quot;The configuration for requests/limits hasn&#39;t changed.&quot;_. You upgraded from Java 8, and since - I believe - Java 10, Java will get more information about the container it&#39;s running in, and use that to calculate an estimate of the equivalent processor count, where previously it would likely use the actual processor count of the underlying machine. If a threadpool is configured using that processor count, you will now get a smaller thread pool.","body":"<i>&quot;The configuration for requests/limits hasn&#39;t changed.&quot;</i>. You upgraded from Java 8, and since - I believe - Java 10, Java will get more information about the container it&#39;s running in, and use that to calculate an estimate of the equivalent processor count, where previously it would likely use the actual processor count of the underlying machine. If a threadpool is configured using that processor count, you will now get a smaller thread pool."}],"owner":{"account_id":20667761,"reputation":53,"user_id":15174185,"display_name":"Chaithra Shenoy"},"comment_count":13,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":82,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695803470,"creation_date":1695796129,"question_id":77185098,"body_markdown":"I migrated the Application that was running in Java 8 and Spring Boot version 2.0.8.RELEASE to Java 11 and Spring Boot version 2.7.11.\r\n\r\nMigration was successful and the application is working fine but I could see the JVM threads were reduced a lot and also able to see the undertow server queue was high after migration and due to this, there was an increase in latency. Kubernetes pods were restarting during the high latency time the CPU usage was also high.","title":"JVM threads count decreased after Java 11 migration causing high latency","body":"<p>I migrated the Application that was running in Java 8 and Spring Boot version 2.0.8.RELEASE to Java 11 and Spring Boot version 2.7.11.</p>\n<p>Migration was successful and the application is working fine but I could see the JVM threads were reduced a lot and also able to see the undertow server queue was high after migration and due to this, there was an increase in latency. Kubernetes pods were restarting during the high latency time the CPU usage was also high.</p>\n"},{"tags":["java","constructor","initialization","base-class"],"comments":[{"owner":{"account_id":2139538,"reputation":42501,"user_id":1898563,"accept_rate":78,"display_name":"Michael"},"score":0,"creation_date":1695206749,"post_id":77141529,"comment_id":135992343,"body_markdown":"Try it where `id` is not constant - where it&#39;s passed in to `Foo`&#39;s constructor.","body":"Try it where <code>id</code> is not constant - where it&#39;s passed in to <code>Foo</code>&#39;s constructor."},{"owner":{"account_id":17835,"reputation":303895,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":4,"creation_date":1695207600,"post_id":77141529,"comment_id":135992516,"body_markdown":"Final fields are initialized very early and overridable methods at that point means you&#39;re basically calling a method on a not-fully-initialized object, so there&#39;s a good amount of risk there.","body":"Final fields are initialized very early and overridable methods at that point means you&#39;re basically calling a method on a not-fully-initialized object, so there&#39;s a good amount of risk there."},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1695231103,"post_id":77141529,"comment_id":135998069,"body_markdown":"A better idea is to remove `protected final String name` entirely.  Any code in Base that needs the name can just… call `calName()` as needed.  Much simpler and cleaner.","body":"A better idea is to remove <code>protected final String name</code> entirely.  Any code in Base that needs the name can just… call <code>calName()</code> as needed.  Much simpler and cleaner."}],"answers":[{"tags":[],"owner":{"account_id":9376049,"reputation":3355,"user_id":7643517,"display_name":"Nolequen"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695218862,"creation_date":1695212170,"answer_id":77142330,"question_id":77141529,"body_markdown":"No, it is not ok.\r\n\r\nCall to abstract method (as well as any kind of overridable method) during object construction is a bad idea.\r\n\r\nSuch calls may result in subtle bugs, as object initialization may happen before the method call.","title":"Is it ok to initialize final member in abstract base class using abtract method?","body":"<p>No, it is not ok.</p>\n<p>Call to abstract method (as well as any kind of overridable method) during object construction is a bad idea.</p>\n<p>Such calls may result in subtle bugs, as object initialization may happen before the method call.</p>\n"},{"tags":[],"owner":{"account_id":6996158,"reputation":63,"user_id":7006701,"display_name":"Y.F."},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695802922,"creation_date":1695802922,"answer_id":77185718,"question_id":77141529,"body_markdown":"Thanks for all your opinions. Now I&#39;ve got some idea about how to handle such situations.\r\n\r\n1. If the field can be constructed directly using default ctor and configured later, I can construct it in the base class as a final field and configure it during the derived constructing phase:\r\n\r\n        abstract class Base {\r\n            protected final Widget core = new Widget();\r\n            public void methodThatUsesCore() { core.display(); }\r\n        }\r\n        public final class Foo42 extends Base {\r\n            {\r\n                core.configure(42, &quot;jklmn&quot;);\r\n            }\r\n        }\r\n\r\n2. If the field has to be constructed with info provided by the derived class, I should put it into the derived class and add an abstract getter in the base class:\r\n\r\n        abstract class Base {\r\n            protected abstract Widget getCore();\r\n            public void methodThatUsesCore() { getCore().display(); }\r\n        }\r\n        public final class Foo42 extends Base {\r\n            private final Widget core = new Widget(42, &quot;jklmn&quot;);\r\n            @Override\r\n            protected Widget getCore() { return core; }\r\n        }\r\n\r\nIs it a reasonable design?","title":"Is it ok to initialize final member in abstract base class using abtract method?","body":"<p>Thanks for all your opinions. Now I've got some idea about how to handle such situations.</p>\n<ol>\n<li><p>If the field can be constructed directly using default ctor and configured later, I can construct it in the base class as a final field and configure it during the derived constructing phase:</p>\n<pre><code> abstract class Base {\n     protected final Widget core = new Widget();\n     public void methodThatUsesCore() { core.display(); }\n }\n public final class Foo42 extends Base {\n     {\n         core.configure(42, &quot;jklmn&quot;);\n     }\n }\n</code></pre>\n</li>\n<li><p>If the field has to be constructed with info provided by the derived class, I should put it into the derived class and add an abstract getter in the base class:</p>\n<pre><code> abstract class Base {\n     protected abstract Widget getCore();\n     public void methodThatUsesCore() { getCore().display(); }\n }\n public final class Foo42 extends Base {\n     private final Widget core = new Widget(42, &quot;jklmn&quot;);\n     @Override\n     protected Widget getCore() { return core; }\n }\n</code></pre>\n</li>\n</ol>\n<p>Is it a reasonable design?</p>\n"}],"owner":{"account_id":6996158,"reputation":63,"user_id":7006701,"display_name":"Y.F."},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":79,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":2,"score":0,"last_activity_date":1695802922,"creation_date":1695205759,"question_id":77141529,"body_markdown":"I wonder whether I could initialze a final field in an abstract base class with the result of an abtract method, which would be implemented by the derived class.\r\nI understand that derived ctor would call base ctor first, so I guarantee that the abtract method implementation would also depend only on defined-on-declaration final fields of the derived class.\r\nI try the following code and it seems working.\r\n\r\n```\r\nabstract class Base {\r\n    protected final String name = calName();\r\n    protected abstract String calName();\r\n}\r\n\r\npublic final class Foo extends Base {\r\n    private final String id = &quot;42&quot;;\r\n    @Override\r\n    protected String calName() {\r\n        return String.format(&quot;WithId%s&quot;, id);\r\n    }\r\n    public void display() {\r\n        System.out.printf(&quot;name: %s\\n&quot;, name);\r\n        System.out.printf(&quot;id:   %s\\n&quot;, id);\r\n    }\r\n    public static void main(String[] args) {\r\n        var foo = new Foo();\r\n        foo.display();\r\n    }\r\n}\r\n```\r\n\r\n\r\nSo is this a legit action in java, or is it a very bad idea?","title":"Is it ok to initialize final member in abstract base class using abtract method?","body":"<p>I wonder whether I could initialze a final field in an abstract base class with the result of an abtract method, which would be implemented by the derived class.\nI understand that derived ctor would call base ctor first, so I guarantee that the abtract method implementation would also depend only on defined-on-declaration final fields of the derived class.\nI try the following code and it seems working.</p>\n<pre><code>abstract class Base {\n    protected final String name = calName();\n    protected abstract String calName();\n}\n\npublic final class Foo extends Base {\n    private final String id = &quot;42&quot;;\n    @Override\n    protected String calName() {\n        return String.format(&quot;WithId%s&quot;, id);\n    }\n    public void display() {\n        System.out.printf(&quot;name: %s\\n&quot;, name);\n        System.out.printf(&quot;id:   %s\\n&quot;, id);\n    }\n    public static void main(String[] args) {\n        var foo = new Foo();\n        foo.display();\n    }\n}\n</code></pre>\n<p>So is this a legit action in java, or is it a very bad idea?</p>\n"},{"tags":["python","java","jmeter","traffic"],"answers":[{"tags":[],"owner":{"account_id":3460456,"reputation":162728,"user_id":2897748,"display_name":"Dmitri T"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695802768,"creation_date":1695802768,"answer_id":77185698,"question_id":77181967,"body_markdown":" 1. Check [jmeter.log file][1] for any suspicious entries \r\n 2. Check if your `response` variable contains the line you&#39;re looking for, you can print it to i.e. the aforementioned `jmeter.log` file with the following line of code:\r\n\r\n        log.info(response.toString());\r\n\r\n    and see what is being returned\r\n 3. [Since JMeter 3.1 it&#39;s recommended to use JSR223 Sampler and Groovy language for scripting][2] mainly for performance reasons. Moreover Groovy has some &quot;syntax sugar&quot; so your code can be shortened to something like:\r\n\r\n\t\tString response = &quot;python myscript.py&quot;.execute().text\r\n\t\t\r\n\t\tif (response.contains(&quot;ERROR-TRAFFIC&quot;)){\r\n\t\t    SampleResult.setResponseCode(&quot;500&quot;);\r\n\t\t    SampleResult.setSuccessful(false);\r\n\t\t}\r\n\r\n   More information on Groovy scripting in JMeter: [Apache Groovy: What Is Groovy Used For?][3]\r\n\r\n\r\n  [1]: https://jmeter.apache.org/usermanual/get-started.html#logging\r\n  [2]: https://jmeter.apache.org/usermanual/best-practices.html#bsh_scripting\r\n  [3]: https://www.blazemeter.com/blog/apache-groovy","title":"jmeter SampleResult.setSuccessful(false) not working","body":"<ol>\n<li><p>Check <a href=\"https://jmeter.apache.org/usermanual/get-started.html#logging\" rel=\"nofollow noreferrer\">jmeter.log file</a> for any suspicious entries</p>\n</li>\n<li><p>Check if your <code>response</code> variable contains the line you're looking for, you can print it to i.e. the aforementioned <code>jmeter.log</code> file with the following line of code:</p>\n<pre><code>log.info(response.toString());\n</code></pre>\n<p>and see what is being returned</p>\n</li>\n<li><p><a href=\"https://jmeter.apache.org/usermanual/best-practices.html#bsh_scripting\" rel=\"nofollow noreferrer\">Since JMeter 3.1 it's recommended to use JSR223 Sampler and Groovy language for scripting</a> mainly for performance reasons. Moreover Groovy has some &quot;syntax sugar&quot; so your code can be shortened to something like:</p>\n<pre><code>String response = &quot;python myscript.py&quot;.execute().text\n\nif (response.contains(&quot;ERROR-TRAFFIC&quot;)){\n    SampleResult.setResponseCode(&quot;500&quot;);\n    SampleResult.setSuccessful(false);\n}\n</code></pre>\n</li>\n</ol>\n<p>More information on Groovy scripting in JMeter: <a href=\"https://www.blazemeter.com/blog/apache-groovy\" rel=\"nofollow noreferrer\">Apache Groovy: What Is Groovy Used For?</a></p>\n"}],"owner":{"account_id":29540499,"reputation":11,"user_id":22639286,"display_name":"ing-95"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":57,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1695802768,"creation_date":1695746656,"question_id":77181967,"body_markdown":"I&#39;m using a loop of beanShell samplers starting threads and, for each thread, a python script is executed, that returns a particular string. I want the thread to fail if the returning string contains a specific error. \r\n\r\nHere my code:\r\n\r\n\r\n```\r\nimport java.io.BufferedReader;\r\nimport java.io.InputStreamReader;\r\n\r\nRuntime r = Runtime.getRuntime();\r\nProcess p = r.exec(&quot;python myscript.py&quot;);\r\np.waitFor();\r\nBufferedReader b = new BufferedReader(new InputStreamReader(p.getInputStream()));\r\nString line = &quot;&quot;;\r\nStringBuilder response = new StringBuilder();\r\nwhile ((line = b.readLine()) != null) {\r\n    response.append(line);\r\n    response.append(&quot;\\n&quot;);\r\n}\r\nb.close();\r\n\r\nif (response.toString().contains(&quot;ERROR-TRAFFIC&quot;)){\r\n    SampleResult.setResponseCode(&quot;500&quot;); \r\n    SampleResult.setSuccessful(false);\r\n}\r\n```\r\n\r\n\r\nUsing this code, if condition is correctly executed when the error is present, but in the traffic results I don&#39;t see any thread failure. Any hints ??\r\n","title":"jmeter SampleResult.setSuccessful(false) not working","body":"<p>I'm using a loop of beanShell samplers starting threads and, for each thread, a python script is executed, that returns a particular string. I want the thread to fail if the returning string contains a specific error.</p>\n<p>Here my code:</p>\n<pre><code>import java.io.BufferedReader;\nimport java.io.InputStreamReader;\n\nRuntime r = Runtime.getRuntime();\nProcess p = r.exec(&quot;python myscript.py&quot;);\np.waitFor();\nBufferedReader b = new BufferedReader(new InputStreamReader(p.getInputStream()));\nString line = &quot;&quot;;\nStringBuilder response = new StringBuilder();\nwhile ((line = b.readLine()) != null) {\n    response.append(line);\n    response.append(&quot;\\n&quot;);\n}\nb.close();\n\nif (response.toString().contains(&quot;ERROR-TRAFFIC&quot;)){\n    SampleResult.setResponseCode(&quot;500&quot;); \n    SampleResult.setSuccessful(false);\n}\n</code></pre>\n<p>Using this code, if condition is correctly executed when the error is present, but in the traffic results I don't see any thread failure. Any hints ??</p>\n"},{"tags":["java","maven","groovy","compiler-errors","lombok"],"answers":[{"tags":[],"owner":{"account_id":1367113,"reputation":22105,"user_id":1303324,"accept_rate":83,"display_name":"Krzysztof Atłasik"},"down_vote_count":1,"up_vote_count":17,"is_accepted":true,"score":16,"last_activity_date":1505650317,"creation_date":1505593605,"answer_id":46258158,"question_id":46257162,"body_markdown":"You shouldn&#39;t use Lombok for Groovy, it is intended to be used only with Java. \r\n\r\nGroovy has built-in annotation `@Canonical` which does what you want:\r\n\r\n * it creates useful equals, hashCode and toString methods\r\n * it creates no-arg and tuple constructor\r\n\r\nSo in your case use:\r\n\r\n    @Canonical\r\n    public class Rocket {}\r\n\r\nAdditionally you don&#39;t need to create getters and setters for fields in Groovy. If you add any field to your class, Groovy would [create getters and setters](http://groovy-lang.org/objectorientation.html#_fields_and_properties).","title":"Compilation error - Groovy and Lombok","body":"<p>You shouldn't use Lombok for Groovy, it is intended to be used only with Java. </p>\n\n<p>Groovy has built-in annotation <code>@Canonical</code> which does what you want:</p>\n\n<ul>\n<li>it creates useful equals, hashCode and toString methods</li>\n<li>it creates no-arg and tuple constructor</li>\n</ul>\n\n<p>So in your case use:</p>\n\n<pre><code>@Canonical\npublic class Rocket {}\n</code></pre>\n\n<p>Additionally you don't need to create getters and setters for fields in Groovy. If you add any field to your class, Groovy would <a href=\"http://groovy-lang.org/objectorientation.html#_fields_and_properties\" rel=\"noreferrer\">create getters and setters</a>.</p>\n"},{"tags":[],"owner":{"account_id":15326359,"reputation":661,"user_id":11057391,"display_name":"Saravanan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695801758,"creation_date":1695801758,"answer_id":77185617,"question_id":46257162,"body_markdown":"I was also having issue on using Lombok with groovy. (It wasn&#39;t generating any code) So I just changed my model class to `.java` and did the lombok stuff on the java class. Since we can intermix java and groovy code without any issue, I&#39;m now able to use it without any issue.","title":"Compilation error - Groovy and Lombok","body":"<p>I was also having issue on using Lombok with groovy. (It wasn't generating any code) So I just changed my model class to <code>.java</code> and did the lombok stuff on the java class. Since we can intermix java and groovy code without any issue, I'm now able to use it without any issue.</p>\n"}],"owner":{"account_id":2634858,"reputation":540,"user_id":2279856,"accept_rate":71,"display_name":"Arthur Kharkivskiy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5890,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"accepted_answer_id":46258158,"answer_count":2,"score":7,"last_activity_date":1695801758,"creation_date":1505586635,"question_id":46257162,"body_markdown":"Here is my Maven command\r\n\r\n    mvn clean compile test-compile test\r\nfor\r\n[this project][1]\r\n\r\nbut I am facing with\r\n \r\n[ERROR] no more tokens - could not parse error message: Groovy:unable to resolve class Delegate ,  unable to find class for annotation\r\n[ERROR] 12. ERROR in D:\\Projects\\lombok-groovy-example-master\\src\\main\\groovy\\prystasj\\lombok\\example\\groovy\\Rocket.groovy (at line 5)\r\n[ERROR] @Data\r\n\r\nmvn --version\r\n\r\n    Apache Maven 3.5.0 (ff8f5e7444045639af65f6095c62210b5713f426; 2017-04-03T22:39:06+03:00)\r\n\r\njava -version\r\n\r\n    java version &quot;1.8.0_144&quot;\r\n    Java(TM) SE Runtime Environment (build 1.8.0_144-b01)\r\n    Java HotSpot(TM) 64-Bit Server VM (build 25.144-b01, mixed mode)\r\n\r\n\r\n  [1]: https://github.com/prystasj/lombok-groovy-example\r\n\r\nCode from repository\r\n\r\n    &lt;properties&gt;\r\n        &lt;groovy.version&gt;2.0.5&lt;/groovy.version&gt;\r\n        &lt;java.version&gt;1.6&lt;/java.version&gt;\r\n        &lt;lombok.version&gt;0.11.4&lt;/lombok.version&gt;\r\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n        &lt;/properties&gt;\r\n\r\n        &lt;build&gt;\r\n        &lt;plugins&gt;\r\n        &lt;plugin&gt;\r\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n        &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n        &lt;version&gt;2.3.2&lt;/version&gt;\r\n        &lt;configuration&gt;\r\n        &lt;compilerId&gt;groovy-eclipse-compiler&lt;/compilerId&gt;\r\n        &lt;fork&gt;true&lt;/fork&gt;\r\n        &lt;verbose&gt;false&lt;/verbose&gt;\r\n        &lt;source&gt;${java.version}&lt;/source&gt;\r\n        &lt;target&gt;${java.version}&lt;/target&gt;\r\n        &lt;encoding&gt;${project.build.sourceEncoding}&lt;/encoding&gt;\r\n        &lt;compilerArguments&gt;\r\n        &lt;javaAgentClass&gt;lombok.core.Agent&lt;/javaAgentClass&gt;\r\n        &lt;/compilerArguments&gt;\r\n        &lt;/configuration&gt;\r\n        &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n        &lt;groupId&gt;org.codehaus.groovy&lt;/groupId&gt;\r\n        &lt;artifactId&gt;groovy-eclipse-compiler&lt;/artifactId&gt;\r\n        &lt;version&gt;2.7.0-01&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n        &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n        &lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n        &lt;version&gt;${lombok.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;//...\r\n    \r\nClass (file on git differs!)\r\n\r\n    @Data\r\n    public class Rocket {\r\n    }","title":"Compilation error - Groovy and Lombok","body":"<p>Here is my Maven command</p>\n\n<pre><code>mvn clean compile test-compile test\n</code></pre>\n\n<p>for\n<a href=\"https://github.com/prystasj/lombok-groovy-example\" rel=\"noreferrer\">this project</a></p>\n\n<p>but I am facing with</p>\n\n<p>[ERROR] no more tokens - could not parse error message: Groovy:unable to resolve class Delegate ,  unable to find class for annotation\n[ERROR] 12. ERROR in D:\\Projects\\lombok-groovy-example-master\\src\\main\\groovy\\prystasj\\lombok\\example\\groovy\\Rocket.groovy (at line 5)\n[ERROR] @Data</p>\n\n<p>mvn --version</p>\n\n<pre><code>Apache Maven 3.5.0 (ff8f5e7444045639af65f6095c62210b5713f426; 2017-04-03T22:39:06+03:00)\n</code></pre>\n\n<p>java -version</p>\n\n<pre><code>java version \"1.8.0_144\"\nJava(TM) SE Runtime Environment (build 1.8.0_144-b01)\nJava HotSpot(TM) 64-Bit Server VM (build 25.144-b01, mixed mode)\n</code></pre>\n\n<p>Code from repository</p>\n\n<pre><code>&lt;properties&gt;\n    &lt;groovy.version&gt;2.0.5&lt;/groovy.version&gt;\n    &lt;java.version&gt;1.6&lt;/java.version&gt;\n    &lt;lombok.version&gt;0.11.4&lt;/lombok.version&gt;\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n    &lt;/properties&gt;\n\n    &lt;build&gt;\n    &lt;plugins&gt;\n    &lt;plugin&gt;\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n    &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n    &lt;version&gt;2.3.2&lt;/version&gt;\n    &lt;configuration&gt;\n    &lt;compilerId&gt;groovy-eclipse-compiler&lt;/compilerId&gt;\n    &lt;fork&gt;true&lt;/fork&gt;\n    &lt;verbose&gt;false&lt;/verbose&gt;\n    &lt;source&gt;${java.version}&lt;/source&gt;\n    &lt;target&gt;${java.version}&lt;/target&gt;\n    &lt;encoding&gt;${project.build.sourceEncoding}&lt;/encoding&gt;\n    &lt;compilerArguments&gt;\n    &lt;javaAgentClass&gt;lombok.core.Agent&lt;/javaAgentClass&gt;\n    &lt;/compilerArguments&gt;\n    &lt;/configuration&gt;\n    &lt;dependencies&gt;\n    &lt;dependency&gt;\n    &lt;groupId&gt;org.codehaus.groovy&lt;/groupId&gt;\n    &lt;artifactId&gt;groovy-eclipse-compiler&lt;/artifactId&gt;\n    &lt;version&gt;2.7.0-01&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n    &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n    &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n    &lt;version&gt;${lombok.version}&lt;/version&gt;\n    &lt;/dependency&gt;//...\n</code></pre>\n\n<p>Class (file on git differs!)</p>\n\n<pre><code>@Data\npublic class Rocket {\n}\n</code></pre>\n"},{"tags":["java","android","string","split"],"answers":[{"tags":[],"owner":{"account_id":1190755,"reputation":48912,"user_id":1163607,"accept_rate":97,"display_name":"AllTooSir"},"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1367753135,"creation_date":1367752401,"answer_id":16383909,"question_id":16383898,"body_markdown":"Try with regex `\\[(.*?)\\]` to match the words. \r\n\r\n`\\[`: escaped `[` for literal match as it is a meta char.\r\n\r\n`(.*?)` : match everything in a non-greedy way.\r\n\r\n\r\nSample code:\r\n\r\n    Pattern p = Pattern.compile(&quot;\\\\[(.*?)\\\\]&quot;);\r\n    Matcher m = p.matcher(&quot;Where Are You [Employee Name]? your have a [Shift] shift.&quot;);\r\n    while(m.find()) {\r\n        System.out.println(m.group());\r\n    }","title":"Find words in string surrounded by &quot;[&quot; and &quot;]&quot;:","body":"<p>Try with regex <code>\\[(.*?)\\]</code> to match the words. </p>\n\n<p><code>\\[</code>: escaped <code>[</code> for literal match as it is a meta char.</p>\n\n<p><code>(.*?)</code> : match everything in a non-greedy way.</p>\n\n<p>Sample code:</p>\n\n<pre><code>Pattern p = Pattern.compile(\"\\\\[(.*?)\\\\]\");\nMatcher m = p.matcher(\"Where Are You [Employee Name]? your have a [Shift] shift.\");\nwhile(m.find()) {\n    System.out.println(m.group());\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":227022,"reputation":8243,"user_id":488434,"accept_rate":100,"display_name":"Ahmad Kayyali"},"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1367753008,"creation_date":1367752652,"answer_id":16383942,"question_id":16383898,"body_markdown":"Here you go Java regular expression that extract text between two brackets ***including white spaces***:\r\n\r\n\r\n    import java.util.regex.*;\r\n    \r\n    class Main\r\n    {\r\n      public static void main(String[] args)\r\n      {\r\n        String txt=&quot;[ Employee Name ]&quot;;\r\n    \r\n        String re1=&quot;.*?&quot;;\t\r\n        String re2=&quot;( )&quot;;\t\r\n        String re3=&quot;((?:[a-z][a-z]+))&quot;;\t// Word 1\r\n        String re4=&quot;( )&quot;;\t\r\n        String re5=&quot;((?:[a-z][a-z]+))&quot;;\t// Word 2\r\n        String re6=&quot;( )&quot;;\t\r\n    \r\n        Pattern p = Pattern.compile(re1+re2+re3+re4+re5+re6,Pattern.CASE_INSENSITIVE | Pattern.DOTALL);\r\n        Matcher m = p.matcher(txt);\r\n        if (m.find())\r\n        {\r\n            String ws1=m.group(1);\r\n            String word1=m.group(2);\r\n            String ws2=m.group(3);\r\n            String word2=m.group(4);\r\n            String ws3=m.group(5);\r\n            System.out.print(&quot;(&quot;+ws1.toString()+&quot;)&quot;+&quot;(&quot;+word1.toString()+&quot;)&quot;+&quot;(&quot;+ws2.toString()+&quot;)&quot;+&quot;(&quot;+word2.toString()+&quot;)&quot;+&quot;(&quot;+ws3.toString()+&quot;)&quot;+&quot;\\n&quot;);\r\n        }\r\n      }\r\n    }\r\n\r\nif you want to ignore white space remove `&quot;( )&quot;;`","title":"Find words in string surrounded by &quot;[&quot; and &quot;]&quot;:","body":"<p>Here you go Java regular expression that extract text between two brackets <strong><em>including white spaces</em></strong>:</p>\n\n<pre><code>import java.util.regex.*;\n\nclass Main\n{\n  public static void main(String[] args)\n  {\n    String txt=\"[ Employee Name ]\";\n\n    String re1=\".*?\";   \n    String re2=\"( )\";   \n    String re3=\"((?:[a-z][a-z]+))\"; // Word 1\n    String re4=\"( )\";   \n    String re5=\"((?:[a-z][a-z]+))\"; // Word 2\n    String re6=\"( )\";   \n\n    Pattern p = Pattern.compile(re1+re2+re3+re4+re5+re6,Pattern.CASE_INSENSITIVE | Pattern.DOTALL);\n    Matcher m = p.matcher(txt);\n    if (m.find())\n    {\n        String ws1=m.group(1);\n        String word1=m.group(2);\n        String ws2=m.group(3);\n        String word2=m.group(4);\n        String ws3=m.group(5);\n        System.out.print(\"(\"+ws1.toString()+\")\"+\"(\"+word1.toString()+\")\"+\"(\"+ws2.toString()+\")\"+\"(\"+word2.toString()+\")\"+\"(\"+ws3.toString()+\")\"+\"\\n\");\n    }\n  }\n}\n</code></pre>\n\n<p>if you want to ignore white space remove <code>\"( )\";</code></p>\n"},{"tags":[],"owner":{"account_id":2667845,"reputation":10491,"user_id":2305826,"accept_rate":89,"display_name":"MarsAtomic"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1367752890,"creation_date":1367752705,"answer_id":16383950,"question_id":16383898,"body_markdown":"Use a [StringBuilder](http://docs.oracle.com/javase/7/docs/api/java/lang/StringBuilder.html) (I assume you don&#39;t need synchronization).\r\n\r\nAs you suggested, `indexOf()` using your square bracket delimiters will give you a starting index and an ending index.  use substring(startIndex + 1, endIndex - 1) to get exactly the string you want.\r\n\r\nI&#39;m not sure what you meant by the end of the String, but `indexOf(&quot;[&quot;)` is the start and `indexOf(&quot;]&quot;)` is the end.","title":"Find words in string surrounded by &quot;[&quot; and &quot;]&quot;:","body":"<p>Use a <a href=\"http://docs.oracle.com/javase/7/docs/api/java/lang/StringBuilder.html\" rel=\"nofollow\">StringBuilder</a> (I assume you don't need synchronization).</p>\n\n<p>As you suggested, <code>indexOf()</code> using your square bracket delimiters will give you a starting index and an ending index.  use substring(startIndex + 1, endIndex - 1) to get exactly the string you want.</p>\n\n<p>I'm not sure what you meant by the end of the String, but <code>indexOf(\"[\")</code> is the start and <code>indexOf(\"]\")</code> is the end.</p>\n"},{"tags":[],"owner":{"account_id":348076,"reputation":5557,"user_id":682559,"accept_rate":100,"display_name":"Nicktar"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1367753132,"creation_date":1367752710,"answer_id":16383951,"question_id":16383898,"body_markdown":"That&#39;s pretty much the use case for a regular expression. \r\nTry `&quot;(\\\\[[\\\\w ]*\\\\])&quot;` as your expression.\r\n\r\n    Pattern p = Pattern.compile(&quot;(\\\\[[\\\\w ]*\\\\])&quot;);\r\n    Matcher m = p.matcher(&quot;Where Are You [Employee Name]? your have a [Shift] shift..&quot;);\r\n    \r\n    if (m.find()) {\r\n    \r\n        String found = m.group();\r\n    }\r\n\r\nWhat does this expression do?\r\n\r\n - First it defines a group (...) \r\n - Then it defines the starting point for that group. \\\\[ matches [ since [ itself is a &#39;keyword&#39; for regular expressions it has to be masked by \\ which is reserved in Java Strings and has to be masked by another \\\r\n - Then it defines the body of the group [\\\\w ]*... here the regexpression [] are used along with \\\\w (meaning \\w, meaning any letter, number or undescore) and a blank, meaning blank. The * means zero or more of the previous group.\r\n - Then it defines the endpoint of the group \\\\]\r\n - and closes the group )","title":"Find words in string surrounded by &quot;[&quot; and &quot;]&quot;:","body":"<p>That's pretty much the use case for a regular expression. \nTry <code>\"(\\\\[[\\\\w ]*\\\\])\"</code> as your expression.</p>\n\n<pre><code>Pattern p = Pattern.compile(\"(\\\\[[\\\\w ]*\\\\])\");\nMatcher m = p.matcher(\"Where Are You [Employee Name]? your have a [Shift] shift..\");\n\nif (m.find()) {\n\n    String found = m.group();\n}\n</code></pre>\n\n<p>What does this expression do?</p>\n\n<ul>\n<li>First it defines a group (...) </li>\n<li>Then it defines the starting point for that group. \\[ matches [ since [ itself is a 'keyword' for regular expressions it has to be masked by \\ which is reserved in Java Strings and has to be masked by another \\</li>\n<li>Then it defines the body of the group [\\w ]*... here the regexpression [] are used along with \\w (meaning \\w, meaning any letter, number or undescore) and a blank, meaning blank. The * means zero or more of the previous group.</li>\n<li>Then it defines the endpoint of the group \\]</li>\n<li>and closes the group )</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":2052678,"reputation":134073,"user_id":1831293,"accept_rate":91,"display_name":"Evgeniy Dorofeev"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1367753464,"creation_date":1367753464,"answer_id":16384064,"question_id":16383898,"body_markdown":"This is a Scanner base solution  \r\n\r\n\t\tScanner sc = new Scanner(&quot;Where Are You [Employee Name]? your have a [Shift] shift..&quot;);\r\n\t\tfor (String s; (s = sc.findWithinHorizon(&quot;(?&lt;=\\\\[).*?(?=\\\\])&quot;, 0)) != null;) {\r\n\t\t\tSystem.out.println(s);\r\n\t\t}\r\n\r\noutput\r\n\r\n    Employee Name\r\n    Shift\r\n\r\n","title":"Find words in string surrounded by &quot;[&quot; and &quot;]&quot;:","body":"<p>This is a Scanner base solution  </p>\n\n<pre><code>    Scanner sc = new Scanner(\"Where Are You [Employee Name]? your have a [Shift] shift..\");\n    for (String s; (s = sc.findWithinHorizon(\"(?&lt;=\\\\[).*?(?=\\\\])\", 0)) != null;) {\n        System.out.println(s);\n    }\n</code></pre>\n\n<p>output</p>\n\n<pre><code>Employee Name\nShift\n</code></pre>\n"}],"owner":{"account_id":1701242,"reputation":40799,"user_id":1561247,"accept_rate":74,"display_name":"Emil Adz"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3515,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":16384064,"answer_count":5,"score":3,"last_activity_date":1695801751,"creation_date":1367752312,"question_id":16383898,"body_markdown":"I need help with a simple task in java. I have the following sentence:\r\n\r\n&gt; Where Are You [Employee Name]?\r\nyour have a [Shift] shift..\r\n\r\nI need to extract the strings that are surrounded by `[` and `]` signs.\r\n\r\nI was thinking of using the `split` method with `&quot; &quot;` parameter and then find the single words, but I have a problem using that if the phrase I&#39;m looking for contains: `&quot; &quot;`. using `indexOf` might be an option as well, only I don&#39;t know what is the indication that I have reached the end of the `String`.\r\n\r\nWhat is the best way to perform this task?\r\nAny help would be appreciated.\r\n ","title":"Find words in string surrounded by &quot;[&quot; and &quot;]&quot;:","body":"<p>I need help with a simple task in java. I have the following sentence:</p>\n\n<blockquote>\n  <p>Where Are You [Employee Name]?\n  your have a [Shift] shift..</p>\n</blockquote>\n\n<p>I need to extract the strings that are surrounded by <code>[</code> and <code>]</code> signs.</p>\n\n<p>I was thinking of using the <code>split</code> method with <code>\" \"</code> parameter and then find the single words, but I have a problem using that if the phrase I'm looking for contains: <code>\" \"</code>. using <code>indexOf</code> might be an option as well, only I don't know what is the indication that I have reached the end of the <code>String</code>.</p>\n\n<p>What is the best way to perform this task?\nAny help would be appreciated.</p>\n"},{"tags":["java","ssl","certificate","keystore","truststore"],"comments":[{"owner":{"account_id":155770,"reputation":120153,"user_id":372643,"accept_rate":88,"display_name":"Bruno"},"score":1,"creation_date":1347879450,"post_id":12456079,"comment_id":16754185,"body_markdown":"Why don&#39;t you let the trust manager via the JSSE do all this for you?","body":"Why don&#39;t you let the trust manager via the JSSE do all this for you?"},{"owner":{"account_id":467686,"reputation":3232,"user_id":873229,"accept_rate":50,"display_name":"Ghetolay"},"score":0,"creation_date":1347880119,"post_id":12456079,"comment_id":16754397,"body_markdown":"Because my server is also accepting non cert-auth connection. I have to let it accept all connections first and then in some case validate the client&#39;s certificate if any.","body":"Because my server is also accepting non cert-auth connection. I have to let it accept all connections first and then in some case validate the client&#39;s certificate if any."},{"owner":{"account_id":155770,"reputation":120153,"user_id":372643,"accept_rate":88,"display_name":"Bruno"},"score":4,"creation_date":1347880944,"post_id":12456079,"comment_id":16754718,"body_markdown":"No, you just need to make the client certificate optional using the wantClientAuth option (instead of need).","body":"No, you just need to make the client certificate optional using the wantClientAuth option (instead of need)."},{"owner":{"account_id":467686,"reputation":3232,"user_id":873229,"accept_rate":50,"display_name":"Ghetolay"},"score":0,"creation_date":1347886178,"post_id":12456079,"comment_id":16756877,"body_markdown":"Actually it&#39;s how it work, but I thought it wasnt doing any validation on the client&#39;s certificate. I&#39;ve done some test after reading your comment and this is how its seems to work: If a valid client certificate is sent by the client, the connection is accepted and the request attribute X509Certificate is set with the valid certificate. If a invalid or no certificate are sent then the connection is still accepted but the request attribute is not set. Is this is right it means I just need to test the request attribute in order to know if the certificate is valid. Can you confirm this behavior?","body":"Actually it&#39;s how it work, but I thought it wasnt doing any validation on the client&#39;s certificate. I&#39;ve done some test after reading your comment and this is how its seems to work: If a valid client certificate is sent by the client, the connection is accepted and the request attribute X509Certificate is set with the valid certificate. If a invalid or no certificate are sent then the connection is still accepted but the request attribute is not set. Is this is right it means I just need to test the request attribute in order to know if the certificate is valid. Can you confirm this behavior?"},{"owner":{"account_id":155770,"reputation":120153,"user_id":372643,"accept_rate":88,"display_name":"Bruno"},"score":1,"creation_date":1347886329,"post_id":12456079,"comment_id":16756947,"body_markdown":"Yes, that&#39;s how it&#39;s meant to work when you configure the client-cert authentication to be optional. I think the connection would be rejected if the certificate isn&#39;t trusted (i.e. the client shouldn&#39;t send a cert at all if its cert isn&#39;t trusted).","body":"Yes, that&#39;s how it&#39;s meant to work when you configure the client-cert authentication to be optional. I think the connection would be rejected if the certificate isn&#39;t trusted (i.e. the client shouldn&#39;t send a cert at all if its cert isn&#39;t trusted)."},{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1347964822,"post_id":12456079,"comment_id":16782204,"body_markdown":"@Bruno That is correct. &#39;needClientAuth&#39; isn&#39;t actually part of RFC 2246 at all, it is a Java-ism and possibly an OpenSSL-ism as well. The idea is that if no valid certificate is supplied the server closes the connection, but it isn&#39;t properly specified anywhere that I am aware of, and I&#39;ve been looking for about 9 years. If it was part of RFC 2246 you would expect an alert of some kind to be generated.","body":"@Bruno That is correct. &#39;needClientAuth&#39; isn&#39;t actually part of RFC 2246 at all, it is a Java-ism and possibly an OpenSSL-ism as well. The idea is that if no valid certificate is supplied the server closes the connection, but it isn&#39;t properly specified anywhere that I am aware of, and I&#39;ve been looking for about 9 years. If it was part of RFC 2246 you would expect an alert of some kind to be generated."},{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1588717345,"post_id":12456079,"comment_id":109005919,"body_markdown":"How did you get the server certificate to sign the client certificate? CAs won&#39;t give you a signing certificate. Also *why*?","body":"How did you get the server certificate to sign the client certificate? CAs won&#39;t give you a signing certificate. Also <i>why</i>?"}],"answers":[{"tags":[],"owner":{"account_id":362387,"reputation":2296,"user_id":705553,"display_name":"Ted Shaw"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1347873888,"creation_date":1347873888,"answer_id":12456401,"question_id":12456079,"body_markdown":"Please check your certificate CRL or OCSP is accessible, you can find such information in certificate, such as \r\n\r\n    [1]CRL Distribution Point\r\n         Distribution Point Name:\r\n              Full Name:\r\n                   URL=http://crl.verisign.com/pca2-g2.crl\r\n\r\n","title":"Java/Keystore Verify Signed certificate","body":"<p>Please check your certificate CRL or OCSP is accessible, you can find such information in certificate, such as </p>\n\n<pre><code>[1]CRL Distribution Point\n     Distribution Point Name:\n          Full Name:\n               URL=http://crl.verisign.com/pca2-g2.crl\n</code></pre>\n"},{"tags":[],"owner":{"account_id":467686,"reputation":3232,"user_id":873229,"accept_rate":50,"display_name":"Ghetolay"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1620013628,"creation_date":1347888332,"answer_id":12460205,"question_id":12456079,"body_markdown":"Actually I don&#39;t need to do the validation myself. \r\n\r\nThe `SSLEngine` is already doing it. If a valid certificate is sent by the client you can get it using `getPeerCertificateChain()`: if no certificate or an invalid certificate is sent by the client `getPeerCertificateChain()` throws a exception. \r\n\r\nUsing Jetty (or any Java ServletContainer I guess) you just need to check the HttpServletRequest&#39;s attribute[&quot;javax.servlet.request.X509Certificate&quot;] to know if a valid certificate was sent by the client. \r\n\r\nI still don&#39;t know how to validate a certificate in Java but this solution is enough for me :) I don&#39;t need to do it myself anymore. Thanks to Bruno !","title":"Java/Keystore Verify Signed certificate","body":"<p>Actually I don't need to do the validation myself.</p>\n<p>The <code>SSLEngine</code> is already doing it. If a valid certificate is sent by the client you can get it using <code>getPeerCertificateChain()</code>: if no certificate or an invalid certificate is sent by the client <code>getPeerCertificateChain()</code> throws a exception.</p>\n<p>Using Jetty (or any Java ServletContainer I guess) you just need to check the HttpServletRequest's attribute[&quot;javax.servlet.request.X509Certificate&quot;] to know if a valid certificate was sent by the client.</p>\n<p>I still don't know how to validate a certificate in Java but this solution is enough for me :) I don't need to do it myself anymore. Thanks to Bruno !</p>\n"}],"owner":{"account_id":467686,"reputation":3232,"user_id":873229,"accept_rate":50,"display_name":"Ghetolay"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":10037,"favorite_count":0,"down_vote_count":1,"up_vote_count":5,"answer_count":2,"score":4,"last_activity_date":1695801695,"creation_date":1347872611,"question_id":12456079,"body_markdown":"I&#39;m working on a client-cert authentication between a embedded jetty server and a client. They both use keystore. The client certificate is signed by the server&#39;s certificate which is signed by a CA. Jetty use 2 method to authenticate a client certificate, javax.net.ssl.SSLEngine which seems to work and they also use the code above.\r\n\r\n    \r\n    List&lt;X509Certificate&gt; certList = Certificate chain sent by the client\r\n    KeyStore truststore = server&#39;s truststore\r\n    \r\n    //No use of CRL/OSCP/CRLDP\r\n    _crls = null;\r\n    _enableOCSP = false;\r\n    _enableCRLDP = false;\r\n\r\n    try{\r\n     X509CertSelector certSelect = new X509CertSelector();\r\n     certSelect.setCertificate((X509Certificate) certList.get(0));\r\n    \t\t\t\r\n     // Configure certification path builder parameters\r\n     PKIXBuilderParameters pbParams = new PKIXBuilderParameters(truststore, certSelect);\r\n     pbParams.addCertStore(CertStore.getInstance(&quot;Collection&quot;, new CollectionCertStoreParameters(certList)));\r\n    \r\n     // Set maximum certification path length\r\n     pbParams.setMaxPathLength(-1);\r\n    \r\n     // Enable revocation checking\r\n     pbParams.setRevocationEnabled(true);\r\n    \t\t\t\r\n     // Set static Certificate Revocation List\r\n     if (_crls != null &amp;&amp; !_crls.isEmpty())\r\n         pbParams.addCertStore(CertStore.getInstance(&quot;Collection&quot;, new CollectionCertStoreParameters(_crls)));\r\n    \r\n      // Enable On-Line Certificate Status Protocol (OCSP) support\r\n      if (_enableOCSP)\r\n          Security.setProperty(&quot;ocsp.enable&quot;,&quot;true&quot;);\r\n         \r\n      // Enable Certificate Revocation List Distribution Points (CRLDP) support\r\n      if (_enableCRLDP)\r\n          System.setProperty(&quot;com.sun.security.enableCRLDP&quot;,&quot;true&quot;);\r\n          \r\n     // Build certification path\r\n     CertPathBuilderResult buildResult = CertPathBuilder.getInstance(&quot;PKIX&quot;).build(pbParams);               \r\n    \r\n     // Validate certification path\r\n     CertPathValidator.getInstance(&quot;PKIX&quot;).validate(buildResult.getCertPath(),pbParams);\r\n    }catch(GeneralSecurityException gse){\r\n     ...\r\n    }\r\n\r\nOf course I must use this second way...\r\nSo let&#39;s concentrate on this code, is this a good way to verify a signed certificate ?\r\nHere is a dump of my keystores : \r\n\r\nClient Keystore :\r\n\r\n    Entry type: PrivateKeyEntry \r\n    Certificate chain length: 2\r\n    Certificate[1]: \r\n    Owner: EMAILADDRESS=truc@ok.com, CN=Servlet, OU=dev, O=Imbasoft, ST=Ile-de-France, C=FR \r\n    Issuer: EMAILADDRESS=contact@greenpacs.com, CN=Greenpacs, OU=dev, O=Imbasoft, L=Bondy, ST=Ile-de-France, C=FR \r\n    ...\r\n    \r\n    Certificate[2]: \r\n    Owner: EMAILADDRESS=contact@greenpacs.com, CN=Greenpacs, OU=dev, O=Imbasoft, L=Bondy, ST=Ile-de-France, C=FR\r\n    Issuer: EMAILADDRESS=ghetolay@imbasoft.com, CN=Greenpacs Certificate Authority, OU=dev, O=Imbasoft, ST=Ile-de-France, C=FR \r\n    ...\r\n\r\nServer truststore : \r\n\r\n    Entry type: trustedCertEntry\r\n\r\n    Owner: EMAILADDRESS=contact@greenpacs.com, CN=Greenpacs, OU=dev, O=Imbasoft, L=Bondy, ST=Ile-de-France, C=FR\r\n    Issuer: EMAILADDRESS=ghetolay@imbasoft.com, CN=Greenpacs Certificate Authority, OU=dev, O=Imbasoft, ST=Ile-de-France, C=FR\r\n\r\nI&#39;m not sure about these keystores but I tried with different one (adding the CA certificate to the client&#39;s certificate chain, adding certificate to the truststore) and the validation still fail. And with these keystores the first way of validation (SSLEngine) seems to work.\r\n\r\nThe debug output is too big to put it here but here is the stacktrace : \r\n\r\n    java.security.cert.CertPathValidatorException: Could not determine revocation status\r\n    \tat sun.security.provider.certpath.PKIXMasterCertPathValidator.validate(PKIXMasterCertPathValidator.java:153)\r\n    \tat sun.security.provider.certpath.PKIXCertPathValidator.doValidate(PKIXCertPathValidator.java:325)\r\n    \tat sun.security.provider.certpath.PKIXCertPathValidator.engineValidate(PKIXCertPathValidator.java:187)\r\n    \tat java.security.cert.CertPathValidator.validate(CertPathValidator.java:267)\r\n    \tat MainClass.main(MainClass.java:75)\r\n    Caused by: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\r\n    \tat sun.security.provider.certpath.SunCertPathBuilder.engineBuild(SunCertPathBuilder.java:197)\r\n    \tat java.security.cert.CertPathBuilder.build(CertPathBuilder.java:255)\r\n    \tat sun.security.provider.certpath.CrlRevocationChecker.buildToNewKey(CrlRevocationChecker.java:583)\r\n    \tat sun.security.provider.certpath.CrlRevocationChecker.verifyWithSeparateSigningKey(CrlRevocationChecker.java:459)\r\n    \tat sun.security.provider.certpath.CrlRevocationChecker.verifyRevocationStatus(CrlRevocationChecker.java:339)\r\n    \tat sun.security.provider.certpath.CrlRevocationChecker.verifyRevocationStatus(CrlRevocationChecker.java:248)\r\n    \tat sun.security.provider.certpath.CrlRevocationChecker.check(CrlRevocationChecker.java:189)\r\n    \tat sun.security.provider.certpath.PKIXMasterCertPathValidator.validate(PKIXMasterCertPathValidator.java:131)\r\n    \t... 4 more\r\n\r\nIf I disable the revocation or if I set the last certificate (instead of the first) as X509CertSelector the code work but I&#39;m not sure of what I&#39;m doing.\r\n\r\nI&#39;m starting to doubt about the jetty code but I&#39;m not an expert in certificate and SSL handshaking so it could also come from bad keystore/truststore. That&#39;s why I did not create a issue on jetty&#39;s board and asked here before, to be sure the code needs to be changed.\r\n\r\nAlso It could be useful to know how to validate a signed certificate in Java.","title":"Java/Keystore Verify Signed certificate","body":"<p>I'm working on a client-cert authentication between a embedded jetty server and a client. They both use keystore. The client certificate is signed by the server's certificate which is signed by a CA. Jetty use 2 method to authenticate a client certificate, javax.net.ssl.SSLEngine which seems to work and they also use the code above.</p>\n\n<pre><code>List&lt;X509Certificate&gt; certList = Certificate chain sent by the client\nKeyStore truststore = server's truststore\n\n//No use of CRL/OSCP/CRLDP\n_crls = null;\n_enableOCSP = false;\n_enableCRLDP = false;\n\ntry{\n X509CertSelector certSelect = new X509CertSelector();\n certSelect.setCertificate((X509Certificate) certList.get(0));\n\n // Configure certification path builder parameters\n PKIXBuilderParameters pbParams = new PKIXBuilderParameters(truststore, certSelect);\n pbParams.addCertStore(CertStore.getInstance(\"Collection\", new CollectionCertStoreParameters(certList)));\n\n // Set maximum certification path length\n pbParams.setMaxPathLength(-1);\n\n // Enable revocation checking\n pbParams.setRevocationEnabled(true);\n\n // Set static Certificate Revocation List\n if (_crls != null &amp;&amp; !_crls.isEmpty())\n     pbParams.addCertStore(CertStore.getInstance(\"Collection\", new CollectionCertStoreParameters(_crls)));\n\n  // Enable On-Line Certificate Status Protocol (OCSP) support\n  if (_enableOCSP)\n      Security.setProperty(\"ocsp.enable\",\"true\");\n\n  // Enable Certificate Revocation List Distribution Points (CRLDP) support\n  if (_enableCRLDP)\n      System.setProperty(\"com.sun.security.enableCRLDP\",\"true\");\n\n // Build certification path\n CertPathBuilderResult buildResult = CertPathBuilder.getInstance(\"PKIX\").build(pbParams);               \n\n // Validate certification path\n CertPathValidator.getInstance(\"PKIX\").validate(buildResult.getCertPath(),pbParams);\n}catch(GeneralSecurityException gse){\n ...\n}\n</code></pre>\n\n<p>Of course I must use this second way...\nSo let's concentrate on this code, is this a good way to verify a signed certificate ?\nHere is a dump of my keystores : </p>\n\n<p>Client Keystore :</p>\n\n<pre><code>Entry type: PrivateKeyEntry \nCertificate chain length: 2\nCertificate[1]: \nOwner: EMAILADDRESS=truc@ok.com, CN=Servlet, OU=dev, O=Imbasoft, ST=Ile-de-France, C=FR \nIssuer: EMAILADDRESS=contact@greenpacs.com, CN=Greenpacs, OU=dev, O=Imbasoft, L=Bondy, ST=Ile-de-France, C=FR \n...\n\nCertificate[2]: \nOwner: EMAILADDRESS=contact@greenpacs.com, CN=Greenpacs, OU=dev, O=Imbasoft, L=Bondy, ST=Ile-de-France, C=FR\nIssuer: EMAILADDRESS=ghetolay@imbasoft.com, CN=Greenpacs Certificate Authority, OU=dev, O=Imbasoft, ST=Ile-de-France, C=FR \n...\n</code></pre>\n\n<p>Server truststore : </p>\n\n<pre><code>Entry type: trustedCertEntry\n\nOwner: EMAILADDRESS=contact@greenpacs.com, CN=Greenpacs, OU=dev, O=Imbasoft, L=Bondy, ST=Ile-de-France, C=FR\nIssuer: EMAILADDRESS=ghetolay@imbasoft.com, CN=Greenpacs Certificate Authority, OU=dev, O=Imbasoft, ST=Ile-de-France, C=FR\n</code></pre>\n\n<p>I'm not sure about these keystores but I tried with different one (adding the CA certificate to the client's certificate chain, adding certificate to the truststore) and the validation still fail. And with these keystores the first way of validation (SSLEngine) seems to work.</p>\n\n<p>The debug output is too big to put it here but here is the stacktrace : </p>\n\n<pre><code>java.security.cert.CertPathValidatorException: Could not determine revocation status\n    at sun.security.provider.certpath.PKIXMasterCertPathValidator.validate(PKIXMasterCertPathValidator.java:153)\n    at sun.security.provider.certpath.PKIXCertPathValidator.doValidate(PKIXCertPathValidator.java:325)\n    at sun.security.provider.certpath.PKIXCertPathValidator.engineValidate(PKIXCertPathValidator.java:187)\n    at java.security.cert.CertPathValidator.validate(CertPathValidator.java:267)\n    at MainClass.main(MainClass.java:75)\nCaused by: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\n    at sun.security.provider.certpath.SunCertPathBuilder.engineBuild(SunCertPathBuilder.java:197)\n    at java.security.cert.CertPathBuilder.build(CertPathBuilder.java:255)\n    at sun.security.provider.certpath.CrlRevocationChecker.buildToNewKey(CrlRevocationChecker.java:583)\n    at sun.security.provider.certpath.CrlRevocationChecker.verifyWithSeparateSigningKey(CrlRevocationChecker.java:459)\n    at sun.security.provider.certpath.CrlRevocationChecker.verifyRevocationStatus(CrlRevocationChecker.java:339)\n    at sun.security.provider.certpath.CrlRevocationChecker.verifyRevocationStatus(CrlRevocationChecker.java:248)\n    at sun.security.provider.certpath.CrlRevocationChecker.check(CrlRevocationChecker.java:189)\n    at sun.security.provider.certpath.PKIXMasterCertPathValidator.validate(PKIXMasterCertPathValidator.java:131)\n    ... 4 more\n</code></pre>\n\n<p>If I disable the revocation or if I set the last certificate (instead of the first) as X509CertSelector the code work but I'm not sure of what I'm doing.</p>\n\n<p>I'm starting to doubt about the jetty code but I'm not an expert in certificate and SSL handshaking so it could also come from bad keystore/truststore. That's why I did not create a issue on jetty's board and asked here before, to be sure the code needs to be changed.</p>\n\n<p>Also It could be useful to know how to validate a signed certificate in Java.</p>\n"},{"tags":["java","spring","junit5"],"answers":[{"tags":[],"owner":{"account_id":8821600,"reputation":568,"user_id":15059968,"display_name":"Andrei Kulik"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695801220,"creation_date":1620146994,"answer_id":67388897,"question_id":67386221,"body_markdown":"I think you try to test a class that extends from the `CrudRepository` or `JpaRepository` interface. If it is true then unit tests don&#39;t have any sense, as you&#39;re not writing any implementation code yourself. You need to think about the integration test in this way.\r\nOr you can do it something like this:\r\n```java\r\n@DataJpaTest\r\npublic class ApplicationTests {\r\n\r\n    @Autowired\r\n    UserRepository usRepo;\r\n\r\n    @Test\r\n    public void name() {\r\n        usRepo.save(new MyEntity());\r\n    }\r\n}\r\n\r\n```","title":"Spring JUnit5 testing Repositories, Repo is null?","body":"<p>I think you try to test a class that extends from the <code>CrudRepository</code> or <code>JpaRepository</code> interface. If it is true then unit tests don't have any sense, as you're not writing any implementation code yourself. You need to think about the integration test in this way.\nOr you can do it something like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@DataJpaTest\npublic class ApplicationTests {\n\n    @Autowired\n    UserRepository usRepo;\n\n    @Test\n    public void name() {\n        usRepo.save(new MyEntity());\n    }\n}\n\n</code></pre>\n"}],"owner":{"account_id":20067767,"reputation":189,"user_id":14713134,"display_name":"Jefferey John Smith"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":619,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1695801220,"creation_date":1620136469,"question_id":67386221,"body_markdown":"I am trying to test my 3rd year project using JUnit5, I am trying to test the repositories. Alas, when I am trying to test I keep getting the same error. The error is as follows:\r\n\r\n    java.lang.NullPointerException: Cannot invoke &quot;CO3102.hw2.repositories.UserRepository.save(Object)&quot; because &quot;this.usRepo&quot; is null\r\n\tat CO3202.tests.ApplicationTests.name(ApplicationTests.java:19)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:64)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:564)\r\n\tat org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:688)\r\n\tat org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)\r\n\tat org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:149)\r\n\tat org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:140)\r\n\tat org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:84)\r\n\tat org.junit.jupiter.engine.execution.ExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(ExecutableInvoker.java:115)\r\n\tat org.junit.jupiter.engine.execution.ExecutableInvoker.lambda$invoke$0(ExecutableInvoker.java:105)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)\r\n\tat org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:104)\r\n\tat org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:98)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$6(TestMethodTestDescriptor.java:210)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:206)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:131)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:65)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:139)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:129)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:127)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:126)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:84)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:143)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:129)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:127)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:126)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:84)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:143)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:129)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:127)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:126)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:84)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:32)\r\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\r\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:51)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:108)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)\r\n\tat \r\n \r\n \r\n     org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:96)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:84)\r\n\tat org.eclipse.jdt.internal.junit5.runner.JUnit5TestReference.run(JUnit5TestReference.java:98)\r\n\tat org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:41)\r\n\tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:542)\r\n\tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:770)\r\n\tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:464)\r\n\tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:210)\r\n\r\nI can&#39;t quite understand why this isn&#39;t working. But here is my ApplicationTest.class\r\n\r\n    import static org.junit.jupiter.api.Assertions.*;\r\n     import org.springframework.boot.test.context.SpringBootTest;\r\n     import org.junit.jupiter.api.Test;\r\n     import org.springframework.beans.factory.annotation.Autowired;\r\n\r\n     import CO3102.hw2.domain.User;\r\n      import CO3102.hw2.repositories.UserRepository;\r\n     @SpringBootTest\r\n     class ApplicationTests {\r\n\t @Autowired\r\n\t UserRepository usRepo;\r\n\r\n\t    @Test\r\n\t    public void name() {\r\n\t    \tUser u = new User();\r\n\t    \tu.setEmail(&quot;fdssfs&quot;);\r\n\t    \tusRepo.save(u);\r\n\t    }\r\n\t@Test\r\n\tvoid test() {\r\n\t\tfail(&quot;Not yet implemented&quot;);\r\n\t}\r\n\r\n    }\r\n\r\nHere is my build.gradle\r\n\r\n    dependencies {\r\n    compile(&quot;org.springframework.boot:spring-boot-starter-data-jpa&quot;)\r\n    compile(&quot;javax.servlet:jstl:1.2&quot;)\r\n    compile group: &#39;javax.servlet&#39;, name: &#39;jstl&#39;, version: &#39;1.2&#39;\r\n    implementation &#39;org.springframework.boot:spring-boot-starter-security&#39;\r\n    implementation &#39;org.springframework.security:spring-security-test&#39;\r\n    compile group: &#39;org.springframework.security&#39;, name: &#39;spring-security-crypto&#39;, version: &#39;5.4.2&#39;\r\n    compile(&quot;org.springframework.boot:spring-boot-starter-mail&quot;)\r\n    compile group: &#39;mysql&#39;, name: &#39;mysql-connector-java&#39;, version: &#39;8.0.11&#39;\r\n    compile group: &#39;javax.servlet&#39;, name: &#39;jstl&#39;, version: &#39;1.2&#39;\r\n    runtime(&quot;mysql:mysql-connector-java&quot;)\r\n    compile(&quot;org.springframework.boot:spring-boot-starter-jdbc&quot;)\r\n    compile (&quot;org.springframework.boot:spring-boot-starter-web&quot;) \r\n    compile group: &#39;com.qasymphony.qtest&#39;, name: &#39;qtest-sdk-java&#39;, version: &#39;1.4.7&#39;    \r\n    compile(&quot;org.apache.tomcat.embed:tomcat-embed-jasper&quot;)\r\n    compile group: &#39;org.glassfish.jaxb&#39;, name: &#39;jaxb-runtime&#39;, version: &#39;2.3.3&#39;\r\n    providedRuntime(&quot;org.springframework.boot:spring-boot-starter-tomcat&quot;)\r\n    providedRuntime &#39;org.apache.tomcat.embed:tomcat-embed-jasper&#39;\r\n    compile group: &#39;tangrammer&#39;, name: &#39;java-net-http-client&#39;, version: &#39;0.1.2&#39;\r\n    implementation &#39;com.squareup.okhttp3:okhttp:3.14.6&#39;\r\n    compile group: &#39;com.google.code.gson&#39;, name: &#39;gson&#39;, version: &#39;2.8.5&#39;\r\n    testImplementation(&#39;org.springframework.boot:spring-boot-starter-test&#39;)\r\n    }\r\n\r\nI have tried the following:\r\n\r\n 1. AutoConfigureMockMvc\r\n 2. @DataJpaTest - this cannot be resolved to a type I have tried adding dependency and jar file.\r\n\r\nIf you could help or point me in the right direction I would be very grateful.\r\nThank you\r\n\r\n ","title":"Spring JUnit5 testing Repositories, Repo is null?","body":"<p>I am trying to test my 3rd year project using JUnit5, I am trying to test the repositories. Alas, when I am trying to test I keep getting the same error. The error is as follows:</p>\n<pre><code>java.lang.NullPointerException: Cannot invoke &quot;CO3102.hw2.repositories.UserRepository.save(Object)&quot; because &quot;this.usRepo&quot; is null\nat CO3202.tests.ApplicationTests.name(ApplicationTests.java:19)\nat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\nat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:64)\nat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\nat java.base/java.lang.reflect.Method.invoke(Method.java:564)\nat org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:688)\nat org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)\nat org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)\nat org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:149)\nat org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:140)\nat org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:84)\nat org.junit.jupiter.engine.execution.ExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(ExecutableInvoker.java:115)\nat org.junit.jupiter.engine.execution.ExecutableInvoker.lambda$invoke$0(ExecutableInvoker.java:105)\nat org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)\nat org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)\nat org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)\nat org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)\nat org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:104)\nat org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:98)\nat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$6(TestMethodTestDescriptor.java:210)\nat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\nat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:206)\nat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:131)\nat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:65)\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:139)\nat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:129)\nat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:127)\nat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:126)\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:84)\nat java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\nat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:143)\nat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:129)\nat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:127)\nat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:126)\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:84)\nat java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\nat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:143)\nat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:129)\nat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:127)\nat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:126)\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:84)\nat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:32)\nat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\nat org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:51)\nat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:108)\nat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)\nat org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)\nat org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)\nat \n\n\n org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)\nat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:96)\nat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:84)\nat org.eclipse.jdt.internal.junit5.runner.JUnit5TestReference.run(JUnit5TestReference.java:98)\nat org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:41)\nat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:542)\nat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:770)\nat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:464)\nat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:210)\n</code></pre>\n<p>I can't quite understand why this isn't working. But here is my ApplicationTest.class</p>\n<pre><code>import static org.junit.jupiter.api.Assertions.*;\n import org.springframework.boot.test.context.SpringBootTest;\n import org.junit.jupiter.api.Test;\n import org.springframework.beans.factory.annotation.Autowired;\n\n import CO3102.hw2.domain.User;\n  import CO3102.hw2.repositories.UserRepository;\n @SpringBootTest\n class ApplicationTests {\n @Autowired\n UserRepository usRepo;\n\n    @Test\n    public void name() {\n        User u = new User();\n        u.setEmail(&quot;fdssfs&quot;);\n        usRepo.save(u);\n    }\n@Test\nvoid test() {\n    fail(&quot;Not yet implemented&quot;);\n}\n\n}\n</code></pre>\n<p>Here is my build.gradle</p>\n<pre><code>dependencies {\ncompile(&quot;org.springframework.boot:spring-boot-starter-data-jpa&quot;)\ncompile(&quot;javax.servlet:jstl:1.2&quot;)\ncompile group: 'javax.servlet', name: 'jstl', version: '1.2'\nimplementation 'org.springframework.boot:spring-boot-starter-security'\nimplementation 'org.springframework.security:spring-security-test'\ncompile group: 'org.springframework.security', name: 'spring-security-crypto', version: '5.4.2'\ncompile(&quot;org.springframework.boot:spring-boot-starter-mail&quot;)\ncompile group: 'mysql', name: 'mysql-connector-java', version: '8.0.11'\ncompile group: 'javax.servlet', name: 'jstl', version: '1.2'\nruntime(&quot;mysql:mysql-connector-java&quot;)\ncompile(&quot;org.springframework.boot:spring-boot-starter-jdbc&quot;)\ncompile (&quot;org.springframework.boot:spring-boot-starter-web&quot;) \ncompile group: 'com.qasymphony.qtest', name: 'qtest-sdk-java', version: '1.4.7'    \ncompile(&quot;org.apache.tomcat.embed:tomcat-embed-jasper&quot;)\ncompile group: 'org.glassfish.jaxb', name: 'jaxb-runtime', version: '2.3.3'\nprovidedRuntime(&quot;org.springframework.boot:spring-boot-starter-tomcat&quot;)\nprovidedRuntime 'org.apache.tomcat.embed:tomcat-embed-jasper'\ncompile group: 'tangrammer', name: 'java-net-http-client', version: '0.1.2'\nimplementation 'com.squareup.okhttp3:okhttp:3.14.6'\ncompile group: 'com.google.code.gson', name: 'gson', version: '2.8.5'\ntestImplementation('org.springframework.boot:spring-boot-starter-test')\n}\n</code></pre>\n<p>I have tried the following:</p>\n<ol>\n<li>AutoConfigureMockMvc</li>\n<li>@DataJpaTest - this cannot be resolved to a type I have tried adding dependency and jar file.</li>\n</ol>\n<p>If you could help or point me in the right direction I would be very grateful.\nThank you</p>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":6232328,"reputation":1338,"user_id":4848659,"display_name":"Gimhani"},"score":0,"creation_date":1536312024,"post_id":52219311,"comment_id":91387091,"body_markdown":"spring framework comes with the idea of autowiring objects in place of creating objects in every occasion. As done in your code, it prevents extra code required.What do you mean by &#39;wrong&#39;?","body":"spring framework comes with the idea of autowiring objects in place of creating objects in every occasion. As done in your code, it prevents extra code required.What do you mean by &#39;wrong&#39;?"},{"owner":{"account_id":7757823,"reputation":1409,"user_id":5871514,"accept_rate":80,"display_name":"Tilak Raj"},"score":0,"creation_date":1536312089,"post_id":52219311,"comment_id":91387135,"body_markdown":"i mean , why would i go with the former one , why not the latter one? What&#39;s the benefit of doing th former one?","body":"i mean , why would i go with the former one , why not the latter one? What&#39;s the benefit of doing th former one?"},{"owner":{"account_id":7757823,"reputation":1409,"user_id":5871514,"accept_rate":80,"display_name":"Tilak Raj"},"score":0,"creation_date":1536312303,"post_id":52219311,"comment_id":91387288,"body_markdown":"@Gimhani see the update","body":"@Gimhani see the update"},{"owner":{"account_id":6232328,"reputation":1338,"user_id":4848659,"display_name":"Gimhani"},"score":1,"creation_date":1536312386,"post_id":52219311,"comment_id":91387342,"body_markdown":"you do not need to explicitly initialize the object using constructor when you use spring @Autowired. This comes specially handy when you are working on a big java application.","body":"you do not need to explicitly initialize the object using constructor when you use spring @Autowired. This comes specially handy when you are working on a big java application."},{"owner":{"account_id":212417,"reputation":43614,"user_id":465223,"accept_rate":75,"display_name":"dunni"},"score":0,"creation_date":1536322873,"post_id":52219311,"comment_id":91393571,"body_markdown":"You can read about the principle of the design pattern dependency injection at https://en.wikipedia.org/wiki/Dependency_injection.","body":"You can read about the principle of the design pattern dependency injection at <a href=\"https://en.wikipedia.org/wiki/Dependency_injection\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Dependency_injection</a>."}],"answers":[{"tags":[],"owner":{"account_id":1198039,"reputation":10944,"user_id":1169349,"display_name":"Reg"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1695800022,"creation_date":1536312393,"answer_id":52219490,"question_id":52219311,"body_markdown":"**I believe you are confusing Spring and the Java language.**\r\n\r\n`Autowire` has to do with &quot;Code injections&quot;. (Just like you described.) And is part of the Spring framework.\r\n\r\nHowever, the `import` (with a lowercase i) is part of the Java language. As you stated, it makes other code available to be used in the class where you added it. `import` will be used regardless if you are using the Spring framework. \r\n\r\n**Both of these statements have completely different purposes and are used with others.** \r\n\r\nFor example:\r\nThe class you are autowiring will also be imported (*if it is in a different Java package*). And you do not have to create an instance of it. In other words, you do not have to use the &#39;new&#39; keyword - the Spring framework will do that for you. (*nice right?*)\r\n\r\nBut that being said, there is also a `@Import` annotation in the Spring framework, which is used for importing Spring Configuration classes. I am guessing this is where the confusion originated. \r\n","title":"Autowired vs import","body":"<p><strong>I believe you are confusing Spring and the Java language.</strong></p>\n<p><code>Autowire</code> has to do with &quot;Code injections&quot;. (Just like you described.) And is part of the Spring framework.</p>\n<p>However, the <code>import</code> (with a lowercase i) is part of the Java language. As you stated, it makes other code available to be used in the class where you added it. <code>import</code> will be used regardless if you are using the Spring framework.</p>\n<p><strong>Both of these statements have completely different purposes and are used with others.</strong></p>\n<p>For example:\nThe class you are autowiring will also be imported (<em>if it is in a different Java package</em>). And you do not have to create an instance of it. In other words, you do not have to use the 'new' keyword - the Spring framework will do that for you. (<em>nice right?</em>)</p>\n<p>But that being said, there is also a <code>@Import</code> annotation in the Spring framework, which is used for importing Spring Configuration classes. I am guessing this is where the confusion originated.</p>\n"},{"tags":[],"owner":{"account_id":5896196,"reputation":740,"user_id":4641280,"display_name":"Damith"},"down_vote_count":0,"up_vote_count":7,"is_accepted":true,"score":7,"last_activity_date":1536312665,"creation_date":1536312665,"answer_id":52219580,"question_id":52219311,"body_markdown":"Its basically about object creation.\r\nWhen you Autowire something, that particular bean is managed by the spring context and only one instance of particular class will be constructed by spring context and that particular instance will be provided when you use Autowire for that class type Objects. \r\nBut when you import something into your class, that does not mean that you have an instance of that particular class; you have to initialize it on your own. And if you want to treat it as a singleton object, basically you will be writing whole code for it. \r\n\r\nAnd more over there are basic differences between them like if you want to access static variables in a class, you will not need an instance of that class. (you can access them by class reference) In that case you dont need to Autowire but you need Import statement.\r\n\r\nBut on the other hand if you are interested in experiencing power of spring, like Autowire Configurations and may be validate them and all those cool functionalities that spring provides, you need to make your class a component and Autowire as you want. \r\n","title":"Autowired vs import","body":"<p>Its basically about object creation.\nWhen you Autowire something, that particular bean is managed by the spring context and only one instance of particular class will be constructed by spring context and that particular instance will be provided when you use Autowire for that class type Objects. \nBut when you import something into your class, that does not mean that you have an instance of that particular class; you have to initialize it on your own. And if you want to treat it as a singleton object, basically you will be writing whole code for it. </p>\n\n<p>And more over there are basic differences between them like if you want to access static variables in a class, you will not need an instance of that class. (you can access them by class reference) In that case you dont need to Autowire but you need Import statement.</p>\n\n<p>But on the other hand if you are interested in experiencing power of spring, like Autowire Configurations and may be validate them and all those cool functionalities that spring provides, you need to make your class a component and Autowire as you want. </p>\n"}],"owner":{"account_id":7757823,"reputation":1409,"user_id":5871514,"accept_rate":80,"display_name":"Tilak Raj"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5009,"favorite_count":0,"down_vote_count":1,"up_vote_count":5,"accepted_answer_id":52219580,"answer_count":2,"score":4,"last_activity_date":1695800022,"creation_date":1536311781,"question_id":52219311,"body_markdown":"I am very new to spring boot and I am trying to grasp the concept of it. Now I came across @Autowired in it. I understood pretty much about it.\r\n\r\nLike, when you write @Autowired, things happen in two passes and in the second pass spring injects beans.\r\n\r\nNow, I have this example; \r\n\r\n    Class Abc {\r\n        \r\n        @Autowired\r\n        private Xyz xyz;\r\n        \r\n        PSVM(String...z) {\r\n            xyz.hello();\r\n        } \r\n    }\r\n\r\nImport basically imports the code into the file.\r\n\r\nSo,\r\n\r\n    Import com.tilak.Xyz;\r\n    \r\n    Class Abc {\r\n        private Xyz xyz;\r\n        \r\n        PSVM(String...z) {\r\n            xyz = new Xyz();\r\n            xyz.hello();\r\n        }\r\n    }\r\n\r\nWhy should/ shouldn&#39;t I go with the latter one? \r\n\r\nIs there any advantage in doing the first one? Where should I use the first one and where should I use the second one?","title":"Autowired vs import","body":"<p>I am very new to spring boot and I am trying to grasp the concept of it. Now I came across @Autowired in it. I understood pretty much about it.</p>\n\n<p>Like, when you write @Autowired, things happen in two passes and in the second pass spring injects beans.</p>\n\n<p>Now, I have this example; </p>\n\n<pre><code>Class Abc {\n\n    @Autowired\n    private Xyz xyz;\n\n    PSVM(String...z) {\n        xyz.hello();\n    } \n}\n</code></pre>\n\n<p>Import basically imports the code into the file.</p>\n\n<p>So,</p>\n\n<pre><code>Import com.tilak.Xyz;\n\nClass Abc {\n    private Xyz xyz;\n\n    PSVM(String...z) {\n        xyz = new Xyz();\n        xyz.hello();\n    }\n}\n</code></pre>\n\n<p>Why should/ shouldn't I go with the latter one? </p>\n\n<p>Is there any advantage in doing the first one? Where should I use the first one and where should I use the second one?</p>\n"},{"tags":["java","android","kotlin"],"answers":[{"tags":[],"owner":{"account_id":216120,"reputation":49213,"user_id":471160,"accept_rate":90,"display_name":"marcinj"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695799822,"creation_date":1695799822,"answer_id":77185420,"question_id":77184629,"body_markdown":"\r\nMost probably your app is starting a foreground service from the bacground and you are not calling startForeground() in your service onCreate() or onStartCommand on time. Your app has 5s period to call startForeground in your Service after you call Context.startForegroundService(). You can check if your service logic might have a bug causing startForeground to not be called in some scenarios. You can also add firebase logging to log the time of startForegroundService call and startForeground call, this will show in your crash report whether this is the actual problem.\r\n\r\nThis crash is quiet common and appears on various devices. It might be either a design problem in the android.\r\n\r\nsome references:\r\n\r\nhttps://developer.android.com/about/versions/oreo/android-8.0-changes.html#back-all\r\n\r\nhttps://issuetracker.google.com/issues/76112072","title":"AndroidRuntime: FATAL EXCEPTION:: startForegroundService() not allowed due to mAllowStartForeground","body":"<p>Most probably your app is starting a foreground service from the bacground and you are not calling startForeground() in your service onCreate() or onStartCommand on time. Your app has 5s period to call startForeground in your Service after you call Context.startForegroundService(). You can check if your service logic might have a bug causing startForeground to not be called in some scenarios. You can also add firebase logging to log the time of startForegroundService call and startForeground call, this will show in your crash report whether this is the actual problem.</p>\n<p>This crash is quiet common and appears on various devices. It might be either a design problem in the android.</p>\n<p>some references:</p>\n<p><a href=\"https://developer.android.com/about/versions/oreo/android-8.0-changes.html#back-all\" rel=\"nofollow noreferrer\">https://developer.android.com/about/versions/oreo/android-8.0-changes.html#back-all</a></p>\n<p><a href=\"https://issuetracker.google.com/issues/76112072\" rel=\"nofollow noreferrer\">https://issuetracker.google.com/issues/76112072</a></p>\n"}],"owner":{"account_id":26805586,"reputation":31,"user_id":20396942,"display_name":"Vijay Rathod"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":81,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1695799822,"creation_date":1695787574,"question_id":77184629,"body_markdown":"Can&#39;t reproduce manually, got those stats from Crashlytics. Not sure how we can deal with this crash, do you have any idea why this crash may happen?\r\n\r\n\r\nActual result\r\nThere are several types of exception grouped by the Android OS, but the reason looks exactly the same\r\n\r\n    Fatal Exception: android.app.RemoteServiceException: Context.startForegroundService() did not then call Service.startForeground(): ServiceRecord{bc3065 u0 com.bandlab.bandlab/com.bandlab.media.player.notification.MediaPlaybackService}\r\n           at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2269)\r\n           at android.os.Handler.dispatchMessage(Handler.java:106)\r\n           at android.os.Looper.loop(Looper.java:246)\r\n           at android.app.ActivityThread.main(ActivityThread.java:8653)\r\n           at java.lang.reflect.Method.invoke(Method.java)\r\n           at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:602)\r\n           at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1130)","title":"AndroidRuntime: FATAL EXCEPTION:: startForegroundService() not allowed due to mAllowStartForeground","body":"<p>Can't reproduce manually, got those stats from Crashlytics. Not sure how we can deal with this crash, do you have any idea why this crash may happen?</p>\n<p>Actual result\nThere are several types of exception grouped by the Android OS, but the reason looks exactly the same</p>\n<pre><code>Fatal Exception: android.app.RemoteServiceException: Context.startForegroundService() did not then call Service.startForeground(): ServiceRecord{bc3065 u0 com.bandlab.bandlab/com.bandlab.media.player.notification.MediaPlaybackService}\n       at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2269)\n       at android.os.Handler.dispatchMessage(Handler.java:106)\n       at android.os.Looper.loop(Looper.java:246)\n       at android.app.ActivityThread.main(ActivityThread.java:8653)\n       at java.lang.reflect.Method.invoke(Method.java)\n       at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:602)\n       at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1130)\n</code></pre>\n"},{"tags":["java","multithreading","synchronization","synchronized"],"comments":[{"owner":{"account_id":11683,"reputation":1438169,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":4,"creation_date":1231930964,"post_id":442564,"comment_id":264387,"body_markdown":"I&#39;d also like to point out that context is important - the &quot;Typically it is the lock on the instance itself&quot; bit is within a section about documenting a conditionally thread-safe class, when you&#39;re making the lock public. In other words, that sentence applies when you&#39;ve already made this decision.","body":"I&#39;d also like to point out that context is important - the &quot;Typically it is the lock on the instance itself&quot; bit is within a section about documenting a conditionally thread-safe class, when you&#39;re making the lock public. In other words, that sentence applies when you&#39;ve already made this decision."},{"owner":{"account_id":14630,"reputation":16827,"user_id":30316,"accept_rate":82,"display_name":"eljenso"},"score":0,"creation_date":1231934371,"post_id":442564,"comment_id":264477,"body_markdown":"In the absence of internal synch, and when external synch is needed, the lock is often the instance itself, Bloch basically says. So why wouldn&#39;t this be the case for internal synch with lock on &#39;this&#39; as well? (The importance of documentation is another issue.)","body":"In the absence of internal synch, and when external synch is needed, the lock is often the instance itself, Bloch basically says. So why wouldn&#39;t this be the case for internal synch with lock on &#39;this&#39; as well? (The importance of documentation is another issue.)"},{"owner":{"account_id":94310,"reputation":11924,"user_id":257568,"accept_rate":50,"display_name":"ArtemGr"},"score":0,"creation_date":1277454062,"post_id":442564,"comment_id":3198471,"body_markdown":"There is a tradeoff between extended granularity and extra CPU cache and bus requests overhead, because locking on an external Object will most probably require a separate cache line to be modified and exchanged between CPU caches (cf. MESIF and MOESI).","body":"There is a tradeoff between extended granularity and extra CPU cache and bus requests overhead, because locking on an external Object will most probably require a separate cache line to be modified and exchanged between CPU caches (cf. MESIF and MOESI)."},{"owner":{"account_id":8732367,"reputation":156,"user_id":6531984,"display_name":"Sgene9"},"score":2,"creation_date":1544048104,"post_id":442564,"comment_id":94142605,"body_markdown":"I think, in the world of defensive programming, you prevent bugs not by idiom but by code. When someone asks me a question, &quot;How optimized is your synchronization?&quot;, I want to say &quot;Very&quot; instead of &quot;Very, unless someone else doesn&#39;t follow the idiom&quot;.","body":"I think, in the world of defensive programming, you prevent bugs not by idiom but by code. When someone asks me a question, &quot;How optimized is your synchronization?&quot;, I want to say &quot;Very&quot; instead of &quot;Very, unless someone else doesn&#39;t follow the idiom&quot;."}],"answers":[{"tags":[],"owner":{"account_id":9867,"reputation":618181,"user_id":18393,"accept_rate":82,"display_name":"cletus"},"down_vote_count":6,"up_vote_count":97,"is_accepted":false,"score":91,"last_activity_date":1231937475,"creation_date":1231929777,"answer_id":442570,"question_id":442564,"body_markdown":"Well, firstly it should be pointed out that:\r\n\r\n    public void blah() {\r\n      synchronized (this) {\r\n        // do stuff\r\n      }\r\n    }\r\n\r\nis semantically equivalent to:\r\n\r\n    public synchronized void blah() {\r\n      // do stuff\r\n    }\r\n\r\nwhich is one reason not to use `synchronized(this)`.  You might argue that you can do stuff around the `synchronized(this)` block.  The usual reason is to try and avoid having to do the synchronized check at all, which leads to all sorts of concurrency problems, specifically the [double checked-locking problem][1], which just goes to show how difficult it can be to make a relatively simple check threadsafe.\r\n\r\nA private lock is a defensive mechanism, which is never a bad idea.\r\n\r\nAlso, as you alluded to, private locks can control granularity.  One set of operations on an object might be totally unrelated to another but `synchronized(this)` will mutually exclude access to all of them.\r\n\r\n`synchronized(this)` just really doesn&#39;t give you anything.\r\n\r\n\r\n  [1]: http://en.wikipedia.org/wiki/Double-checked_locking","title":"Avoid synchronized(this) in Java?","body":"<p>Well, firstly it should be pointed out that:</p>\n\n<pre><code>public void blah() {\n  synchronized (this) {\n    // do stuff\n  }\n}\n</code></pre>\n\n<p>is semantically equivalent to:</p>\n\n<pre><code>public synchronized void blah() {\n  // do stuff\n}\n</code></pre>\n\n<p>which is one reason not to use <code>synchronized(this)</code>.  You might argue that you can do stuff around the <code>synchronized(this)</code> block.  The usual reason is to try and avoid having to do the synchronized check at all, which leads to all sorts of concurrency problems, specifically the <a href=\"http://en.wikipedia.org/wiki/Double-checked_locking\" rel=\"noreferrer\">double checked-locking problem</a>, which just goes to show how difficult it can be to make a relatively simple check threadsafe.</p>\n\n<p>A private lock is a defensive mechanism, which is never a bad idea.</p>\n\n<p>Also, as you alluded to, private locks can control granularity.  One set of operations on an object might be totally unrelated to another but <code>synchronized(this)</code> will mutually exclude access to all of them.</p>\n\n<p><code>synchronized(this)</code> just really doesn't give you anything.</p>\n"},{"tags":[],"owner":{"account_id":15923,"reputation":28380,"user_id":34161,"accept_rate":83,"display_name":"Yoni Roit"},"down_vote_count":5,"up_vote_count":2,"is_accepted":false,"score":-3,"last_activity_date":1231929792,"creation_date":1231929792,"answer_id":442571,"question_id":442564,"body_markdown":"I think points one (somebody else using your lock) and two (all methods using the same lock needlessly) can happen in any fairly large application. Especially when there&#39;s no good communication between developers.\r\n\r\nIt&#39;s not cast in stone, it&#39;s mostly an issue of good practice and preventing errors.\r\n\r\n","title":"Avoid synchronized(this) in Java?","body":"<p>I think points one (somebody else using your lock) and two (all methods using the same lock needlessly) can happen in any fairly large application. Especially when there's no good communication between developers.</p>\n\n<p>It's not cast in stone, it's mostly an issue of good practice and preventing errors.</p>\n"},{"tags":[],"owner":{"account_id":19462,"reputation":102762,"user_id":45664,"accept_rate":91,"display_name":"Andrzej Doyle"},"down_vote_count":2,"up_vote_count":5,"is_accepted":false,"score":3,"last_activity_date":1231930244,"creation_date":1231930244,"answer_id":442580,"question_id":442564,"body_markdown":"No, you shouldn&#39;t *always*.  However, I tend to avoid it when there are multiple concerns on a particular object that only need to be threadsafe in respect to themselves.  For example, you might have a mutable data object that has &quot;label&quot; and &quot;parent&quot; fields; these need to be threadsafe, but changing one need not block the other from being written/read.  (In practice I would avoid this by declaring the fields volatile and/or using java.util.concurrent&#39;s AtomicFoo wrappers).\r\n\r\nSynchronization in general is a bit clumsy, as it slaps a big lock down rather than thinking exactly how threads might be allowed to work around each other.  Using &lt;code&gt;synchronized(this)&lt;/code&gt; is even clumsier and anti-social, as it&#39;s saying &quot;no-one may change *anything* on this class while I hold the lock&quot;.  How often do you actually need to do that?\r\n\r\nI would much rather have more granular locks; even if you do want to stop everything from changing (perhaps you&#39;re serialising the object), you can just acquire all of the locks to achieve the same thing, plus it&#39;s more explicit that way.  When you use &lt;code&gt;synchronized(this)&lt;/code&gt;, it&#39;s not clear exactly why you&#39;re synchronizing, or what the side effects might be.  If you use &lt;code&gt;synchronized(labelMonitor)&lt;/code&gt;, or even better &lt;code&gt;labelLock.getWriteLock().lock()&lt;/code&gt;, it&#39;s clear what you are doing and what the effects of your critical section are limited to.","title":"Avoid synchronized(this) in Java?","body":"<p>No, you shouldn't <em>always</em>.  However, I tend to avoid it when there are multiple concerns on a particular object that only need to be threadsafe in respect to themselves.  For example, you might have a mutable data object that has \"label\" and \"parent\" fields; these need to be threadsafe, but changing one need not block the other from being written/read.  (In practice I would avoid this by declaring the fields volatile and/or using java.util.concurrent's AtomicFoo wrappers).</p>\n\n<p>Synchronization in general is a bit clumsy, as it slaps a big lock down rather than thinking exactly how threads might be allowed to work around each other.  Using <code>synchronized(this)</code> is even clumsier and anti-social, as it's saying \"no-one may change <em>anything</em> on this class while I hold the lock\".  How often do you actually need to do that?</p>\n\n<p>I would much rather have more granular locks; even if you do want to stop everything from changing (perhaps you're serialising the object), you can just acquire all of the locks to achieve the same thing, plus it's more explicit that way.  When you use <code>synchronized(this)</code>, it's not clear exactly why you're synchronizing, or what the side effects might be.  If you use <code>synchronized(labelMonitor)</code>, or even better <code>labelLock.getWriteLock().lock()</code>, it's clear what you are doing and what the effects of your critical section are limited to.</p>\n"},{"tags":[],"owner":{"account_id":15611,"reputation":14858,"user_id":33165,"accept_rate":80,"display_name":"tcurdt"},"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1231931093,"creation_date":1231931093,"answer_id":442597,"question_id":442564,"body_markdown":"**Short answer**: You have to understand the difference and make choice depending on the code.\r\n\r\n**Long answer**: In general I would rather try to avoid *synchronize(this)* to reduce contention but private locks add complexity you have to be aware of. So use the right synchronization for the right job. If you are not so experienced with multi-threaded programming I would rather stick to instance locking and read up on this topic. (That said: just using *synchronize(this)* does not automatically make your class fully thread-safe.) This is a not an easy topic but once you get used to it, the answer whether to use *synchronize(this)* or not comes naturally.","title":"Avoid synchronized(this) in Java?","body":"<p><strong>Short answer</strong>: You have to understand the difference and make choice depending on the code.</p>\n\n<p><strong>Long answer</strong>: In general I would rather try to avoid <em>synchronize(this)</em> to reduce contention but private locks add complexity you have to be aware of. So use the right synchronization for the right job. If you are not so experienced with multi-threaded programming I would rather stick to instance locking and read up on this topic. (That said: just using <em>synchronize(this)</em> does not automatically make your class fully thread-safe.) This is a not an easy topic but once you get used to it, the answer whether to use <em>synchronize(this)</em> or not comes naturally.</p>\n"},{"tags":[],"owner":{"account_id":11708,"reputation":21399,"user_id":22704,"display_name":"Darron"},"down_vote_count":1,"up_vote_count":140,"is_accepted":true,"score":139,"last_activity_date":1461091208,"creation_date":1231931141,"answer_id":442601,"question_id":442564,"body_markdown":"I&#39;ll cover each point separately.\r\n\r\n1. \r\n\r\n&gt; Some evil code may steal your lock (very popular this one, also has an\r\n&gt; &quot;accidentally&quot; variant)\r\n\r\n  I&#39;m more worried about *accidentally*.  What it amounts to is that this use of `this` is part of your class&#39; exposed interface, and should be documented.  Sometimes the ability of other code to use your lock is desired.  This is true of things like `Collections.synchronizedMap` (see the javadoc).\r\n\r\n2. \r\n\r\n &gt; All synchronized methods within the same class use the exact same\r\n &gt; lock, which reduces throughput\r\n\r\n  This is overly simplistic thinking; just getting rid of `synchronized(this)` won&#39;t solve the problem.  Proper synchronization for throughput will take more thought.\r\n\r\n3. \r\n\r\n &gt; You are (unnecessarily) exposing too much information\r\n\r\n  This is a variant of #1.  Use of `synchronized(this)` is part of your interface.  If you don&#39;t want/need this exposed, don&#39;t do it.\r\n\r\n","title":"Avoid synchronized(this) in Java?","body":"<p>I'll cover each point separately.</p>\n\n<ol>\n<li><blockquote>\n  <p>Some evil code may steal your lock (very popular this one, also has an\n  \"accidentally\" variant)</p>\n</blockquote>\n\n<p>I'm more worried about <em>accidentally</em>.  What it amounts to is that this use of <code>this</code> is part of your class' exposed interface, and should be documented.  Sometimes the ability of other code to use your lock is desired.  This is true of things like <code>Collections.synchronizedMap</code> (see the javadoc).</p></li>\n<li><blockquote>\n  <p>All synchronized methods within the same class use the exact same\n  lock, which reduces throughput</p>\n</blockquote>\n\n<p>This is overly simplistic thinking; just getting rid of <code>synchronized(this)</code> won't solve the problem.  Proper synchronization for throughput will take more thought.</p></li>\n<li><blockquote>\n  <p>You are (unnecessarily) exposing too much information</p>\n</blockquote>\n\n<p>This is a variant of #1.  Use of <code>synchronized(this)</code> is part of your interface.  If you don't want/need this exposed, don't do it.</p></li>\n</ol>\n"},{"tags":[],"owner":{"account_id":22098,"reputation":1108,"user_id":54236,"display_name":"Harald Schilly"},"down_vote_count":2,"up_vote_count":2,"is_accepted":false,"score":0,"last_activity_date":1468775313,"creation_date":1231931780,"answer_id":442622,"question_id":442564,"body_markdown":"It depends on the task you want to do, but I wouldn&#39;t use it. Also, check if the thread-save-ness you want to accompish couldn&#39;t be done by synchronize(this) in the first place? There are also some nice [locks in the API][1] that might help you :)\r\n\r\n\r\n  [1]:http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/locks/package-summary.html","title":"Avoid synchronized(this) in Java?","body":"<p>It depends on the task you want to do, but I wouldn't use it. Also, check if the thread-save-ness you want to accompish couldn't be done by synchronize(this) in the first place? There are also some nice <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/locks/package-summary.html\" rel=\"nofollow noreferrer\">locks in the API</a> that might help you :)</p>\n"},{"tags":[],"owner":{"account_id":4797,"reputation":1533,"user_id":7400,"display_name":"Andreas Bakurov"},"down_vote_count":4,"up_vote_count":66,"is_accepted":false,"score":62,"last_activity_date":1562581283,"creation_date":1231932207,"answer_id":442638,"question_id":442564,"body_markdown":"While you are using synchronized(this) you are using the class instance as a lock itself. This means that while lock is acquired by *thread 1*, the *thread 2* should wait.\r\n\r\nSuppose the following code:\r\n\r\n  \r\n    public void method1() {\r\n        // do something ...\r\n        synchronized(this) {\r\n            a ++;      \r\n        }\r\n        // ................\r\n    }\r\n\r\n\r\n    public void method2() {\r\n        // do something ...\r\n        synchronized(this) {\r\n            b ++;      \r\n        }\r\n        // ................\r\n    }\r\n\r\nMethod 1 modifying the variable *a* and method 2 modifying the variable *b*, the concurrent modification of the same variable by two threads should be avoided and it is. BUT while *thread1* modifying *a* and *thread2* modifying *b* it can be performed without any race condition.\r\n\r\nUnfortunately, the above code will not allow this since we are using the same reference for a lock; This means that threads even if they are not in a race condition should wait and obviously the code sacrifices concurrency of the program.\r\n\r\nThe solution is to use *2* different locks for *two* different variables:\r\n\r\n\r\n    public class Test {\r\n    \t\r\n        private Object lockA = new Object();\r\n        private Object lockB = new Object();\r\n    \r\n        public void method1() {\r\n            // do something ...\r\n            synchronized(lockA) {\r\n                a ++;      \r\n            }\r\n            // ................\r\n        }\r\n    \r\n    \r\n        public void method2() {\r\n            // do something ...\r\n            synchronized(lockB) {\r\n                b ++;      \r\n            }\r\n            // ................\r\n        }\r\n    \t\r\n    }\r\n     \r\n\r\nThe above example uses more fine grained locks (2 locks instead one (*lockA*  and *lockB* for variables *a* and *b* respectively) and as a result allows better concurrency, on the other hand it became more complex than the first example ...","title":"Avoid synchronized(this) in Java?","body":"<p>While you are using synchronized(this) you are using the class instance as a lock itself. This means that while lock is acquired by <em>thread 1</em>, the <em>thread 2</em> should wait.</p>\n\n<p>Suppose the following code:</p>\n\n<pre><code>public void method1() {\n    // do something ...\n    synchronized(this) {\n        a ++;      \n    }\n    // ................\n}\n\n\npublic void method2() {\n    // do something ...\n    synchronized(this) {\n        b ++;      \n    }\n    // ................\n}\n</code></pre>\n\n<p>Method 1 modifying the variable <em>a</em> and method 2 modifying the variable <em>b</em>, the concurrent modification of the same variable by two threads should be avoided and it is. BUT while <em>thread1</em> modifying <em>a</em> and <em>thread2</em> modifying <em>b</em> it can be performed without any race condition.</p>\n\n<p>Unfortunately, the above code will not allow this since we are using the same reference for a lock; This means that threads even if they are not in a race condition should wait and obviously the code sacrifices concurrency of the program.</p>\n\n<p>The solution is to use <em>2</em> different locks for <em>two</em> different variables:</p>\n\n<pre><code>public class Test {\n\n    private Object lockA = new Object();\n    private Object lockB = new Object();\n\n    public void method1() {\n        // do something ...\n        synchronized(lockA) {\n            a ++;      \n        }\n        // ................\n    }\n\n\n    public void method2() {\n        // do something ...\n        synchronized(lockB) {\n            b ++;      \n        }\n        // ................\n    }\n\n}\n</code></pre>\n\n<p>The above example uses more fine grained locks (2 locks instead one (<em>lockA</em>  and <em>lockB</em> for variables <em>a</em> and <em>b</em> respectively) and as a result allows better concurrency, on the other hand it became more complex than the first example ...</p>\n"},{"tags":[],"owner":{"account_id":21831,"reputation":1232,"user_id":53369,"display_name":"Olivier"},"down_vote_count":0,"up_vote_count":15,"is_accepted":false,"score":15,"last_activity_date":1231944150,"creation_date":1231936055,"answer_id":442771,"question_id":442564,"body_markdown":"While I agree about not adhering blindly to dogmatic rules, does the &quot;lock stealing&quot; scenario seem so eccentric to you? A thread could indeed acquire the lock on your object &quot;externally&quot;(`synchronized(theObject) {...}`), blocking other threads waiting on synchronized instance methods.\r\n\r\nIf you don&#39;t believe in malicious code, consider that this code could come from third parties (for instance if you develop some sort of application server).\r\n\r\nThe &quot;accidental&quot; version seems less likely, but as they say, &quot;make something idiot-proof and someone will invent a better idiot&quot;.\r\n\r\nSo I agree with the it-depends-on-what-the-class-does school of thought.\r\n\r\n----------\r\n**Edit following eljenso&#39;s first 3 comments:**\r\n\r\nI&#39;ve never experienced the lock stealing problem but here is an imaginary scenario:\r\n\r\nLet&#39;s say your system is a servlet container, and the object we&#39;re considering is the `ServletContext` implementation. Its `getAttribute` method must be thread-safe, as context attributes are shared data; so you declare it as `synchronized`. Let&#39;s also imagine that you provide a public hosting service based on your container implementation.\r\n\r\nI&#39;m your customer and deploy my &quot;good&quot; servlet on your site. It happens that my code contains a call to `getAttribute`.\r\n\r\nA hacker, disguised as another customer, deploys his malicious servlet on your site. It contains the following code in the `init` method:\r\n\r\n&lt;pre&gt;\r\nsynchronized (this.getServletConfig().getServletContext()) {\r\n   while (true) {}\r\n}\r\n&lt;/pre&gt;\r\n\r\nAssuming we share the same servlet context (allowed by the spec as long as the two servlets are on the same virtual host), my call on `getAttribute` is locked forever. The hacker has achieved a DoS on my servlet.\r\n\r\nThis attack is not possible if `getAttribute` is synchronized on a private lock, because 3rd-party code cannot acquire this lock.\r\n\r\nI admit that the example is contrived and an oversimplistic view of how a servlet container works, but IMHO it proves the point.\r\n\r\nSo I would make my design choice based on security consideration: will I have complete control over the code that has access to the instances? What would be the consequence of a thread&#39;s holding a lock on an instance indefinitely?","title":"Avoid synchronized(this) in Java?","body":"<p>While I agree about not adhering blindly to dogmatic rules, does the \"lock stealing\" scenario seem so eccentric to you? A thread could indeed acquire the lock on your object \"externally\"(<code>synchronized(theObject) {...}</code>), blocking other threads waiting on synchronized instance methods.</p>\n\n<p>If you don't believe in malicious code, consider that this code could come from third parties (for instance if you develop some sort of application server).</p>\n\n<p>The \"accidental\" version seems less likely, but as they say, \"make something idiot-proof and someone will invent a better idiot\".</p>\n\n<p>So I agree with the it-depends-on-what-the-class-does school of thought.</p>\n\n<hr>\n\n<p><strong>Edit following eljenso's first 3 comments:</strong></p>\n\n<p>I've never experienced the lock stealing problem but here is an imaginary scenario:</p>\n\n<p>Let's say your system is a servlet container, and the object we're considering is the <code>ServletContext</code> implementation. Its <code>getAttribute</code> method must be thread-safe, as context attributes are shared data; so you declare it as <code>synchronized</code>. Let's also imagine that you provide a public hosting service based on your container implementation.</p>\n\n<p>I'm your customer and deploy my \"good\" servlet on your site. It happens that my code contains a call to <code>getAttribute</code>.</p>\n\n<p>A hacker, disguised as another customer, deploys his malicious servlet on your site. It contains the following code in the <code>init</code> method:</p>\n\n<pre>\nsynchronized (this.getServletConfig().getServletContext()) {\n   while (true) {}\n}\n</pre>\n\n<p>Assuming we share the same servlet context (allowed by the spec as long as the two servlets are on the same virtual host), my call on <code>getAttribute</code> is locked forever. The hacker has achieved a DoS on my servlet.</p>\n\n<p>This attack is not possible if <code>getAttribute</code> is synchronized on a private lock, because 3rd-party code cannot acquire this lock.</p>\n\n<p>I admit that the example is contrived and an oversimplistic view of how a servlet container works, but IMHO it proves the point.</p>\n\n<p>So I would make my design choice based on security consideration: will I have complete control over the code that has access to the instances? What would be the consequence of a thread's holding a lock on an instance indefinitely?</p>\n"},{"tags":[],"owner":{"account_id":1387,"reputation":32183,"user_id":1853,"accept_rate":94,"display_name":"serg10"},"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1231936980,"creation_date":1231936302,"answer_id":442783,"question_id":442564,"body_markdown":"**There seems a different consensus in the C# and Java camps on this.**  The majority of Java code I have seen uses:\r\n\r\n    // apply mutex to this instance\r\n    synchronized(this) {\r\n        // do work here\r\n    }\r\n\r\nwhereas the majority of C# code opts for the arguably safer:\r\n\r\n    // instance level lock object\r\n    private readonly object _syncObj = new object();\r\n\r\n    ...\r\n\r\n    // apply mutex to private instance level field (a System.Object usually)\r\n    lock(_syncObj)\r\n    {\r\n        // do work here\r\n    }\r\n\r\nThe C# idiom is certainly safer.  As mentioned previously, no malicious / accidental access to the lock can be made from outside the instance.  Java code has this risk too, **but it seems that the Java community has gravitated over time to the slightly less safe, but slightly more terse version.**  \r\n\r\nThat&#39;s not meant as a dig against Java, just a reflection of my experience working on both languages.","title":"Avoid synchronized(this) in Java?","body":"<p><strong>There seems a different consensus in the C# and Java camps on this.</strong>  The majority of Java code I have seen uses:</p>\n\n<pre><code>// apply mutex to this instance\nsynchronized(this) {\n    // do work here\n}\n</code></pre>\n\n<p>whereas the majority of C# code opts for the arguably safer:</p>\n\n<pre><code>// instance level lock object\nprivate readonly object _syncObj = new object();\n\n...\n\n// apply mutex to private instance level field (a System.Object usually)\nlock(_syncObj)\n{\n    // do work here\n}\n</code></pre>\n\n<p>The C# idiom is certainly safer.  As mentioned previously, no malicious / accidental access to the lock can be made from outside the instance.  Java code has this risk too, <strong>but it seems that the Java community has gravitated over time to the slightly less safe, but slightly more terse version.</strong>  </p>\n\n<p>That's not meant as a dig against Java, just a reflection of my experience working on both languages.</p>\n"},{"tags":[],"owner":{"account_id":3290,"reputation":19931,"user_id":4737,"accept_rate":52,"display_name":"jamesh"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1231943687,"creation_date":1231943687,"answer_id":443160,"question_id":442564,"body_markdown":"The `java.util.concurrent` package has vastly reduced the complexity of my thread safe code. I only have anecdotal evidence to go on, but most work I have seen with `synchronized(x)` appears to be re-implementing a Lock, Semaphore, or Latch, but using the lower-level monitors.\r\n\r\nWith this in mind, synchronizing using any of these mechanisms is analogous to synchronizing on an internal object, rather than leaking a lock. This is beneficial in that you have absolute certainty that you control the entry into the monitor by two or more threads.","title":"Avoid synchronized(this) in Java?","body":"<p>The <code>java.util.concurrent</code> package has vastly reduced the complexity of my thread safe code. I only have anecdotal evidence to go on, but most work I have seen with <code>synchronized(x)</code> appears to be re-implementing a Lock, Semaphore, or Latch, but using the lower-level monitors.</p>\n\n<p>With this in mind, synchronizing using any of these mechanisms is analogous to synchronizing on an internal object, rather than leaking a lock. This is beneficial in that you have absolute certainty that you control the entry into the monitor by two or more threads.</p>\n"},{"tags":[],"owner":{"account_id":20470,"reputation":21695,"user_id":48933,"accept_rate":90,"display_name":"Neil Coffey"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1231945188,"creation_date":1231945188,"answer_id":443260,"question_id":442564,"body_markdown":"If you&#39;ve decided that:\r\n\r\n - the thing you need to do is lock on\r\n   the current object; and\r\n - you want to\r\n   lock it with granularity smaller than\r\n   a whole method;\r\n\r\nthen I don&#39;t see the a taboo over synchronizezd(this).\r\n\r\nSome people deliberately use synchronized(this) (instead of marking the method synchronized) inside the whole contents of a method because they think it&#39;s &quot;clearer to the reader&quot; which object is actually being synchronized on. So long as people are making an informed choice (e.g. understand that by doing so they&#39;re actually inserting extra bytecodes into the method and this could have a knock-on effect on potential optimisations), I don&#39;t particularly see a problem with this. You should always document the concurrent behaviour of your program, so I don&#39;t see the &quot;&#39;synchronized&#39; publishes the behaviour&quot; argument as being so compelling.\r\n\r\nAs to the question of which object&#39;s lock you should use, I think there&#39;s nothing wrong with synchronizing on the current object **if this would be expected by the logic of what you&#39;re doing and how your class would typically be used**. For example, with a collection, the object that you would logically expect to lock is generally the collection itself.","title":"Avoid synchronized(this) in Java?","body":"<p>If you've decided that:</p>\n\n<ul>\n<li>the thing you need to do is lock on\nthe current object; and</li>\n<li>you want to\nlock it with granularity smaller than\na whole method;</li>\n</ul>\n\n<p>then I don't see the a taboo over synchronizezd(this).</p>\n\n<p>Some people deliberately use synchronized(this) (instead of marking the method synchronized) inside the whole contents of a method because they think it's \"clearer to the reader\" which object is actually being synchronized on. So long as people are making an informed choice (e.g. understand that by doing so they're actually inserting extra bytecodes into the method and this could have a knock-on effect on potential optimisations), I don't particularly see a problem with this. You should always document the concurrent behaviour of your program, so I don't see the \"'synchronized' publishes the behaviour\" argument as being so compelling.</p>\n\n<p>As to the question of which object's lock you should use, I think there's nothing wrong with synchronizing on the current object <strong>if this would be expected by the logic of what you're doing and how your class would typically be used</strong>. For example, with a collection, the object that you would logically expect to lock is generally the collection itself.</p>\n"},{"tags":[],"owner":{"account_id":166371,"reputation":422,"user_id":390442,"display_name":"Bart Prokop"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1279027167,"creation_date":1279024734,"answer_id":3237204,"question_id":442564,"body_markdown":"A good example for use synchronized(this).\r\n\r\n    // add listener\r\n    public final synchronized void addListener(IListener l) {listeners.add(l);}\r\n    // remove listener\r\n    public final synchronized void removeListener(IListener l) {listeners.remove(l);}\r\n    // routine that raise events\r\n    public void run() {\r\n       // some code here...\r\n       Set ls;\r\n       synchronized(this) {\r\n          ls = listeners.clone();\r\n       }\r\n       for (IListener l : ls) { l.processEvent(event); }\r\n       // some code here...\r\n    }\r\n\r\nAs you can see here, we use synchronize on this to easy cooperate of lengthly (possibly infinite loop of run method) with some synchronized methods there.\r\n\r\nOf course it can be very easily rewritten with using synchronized on private field. But sometimes, when we already have some design with synchronized methods (i.e. legacy class, we derive from, synchronized(this) can be the only solution).","title":"Avoid synchronized(this) in Java?","body":"<p>A good example for use synchronized(this).</p>\n\n<pre><code>// add listener\npublic final synchronized void addListener(IListener l) {listeners.add(l);}\n// remove listener\npublic final synchronized void removeListener(IListener l) {listeners.remove(l);}\n// routine that raise events\npublic void run() {\n   // some code here...\n   Set ls;\n   synchronized(this) {\n      ls = listeners.clone();\n   }\n   for (IListener l : ls) { l.processEvent(event); }\n   // some code here...\n}\n</code></pre>\n\n<p>As you can see here, we use synchronize on this to easy cooperate of lengthly (possibly infinite loop of run method) with some synchronized methods there.</p>\n\n<p>Of course it can be very easily rewritten with using synchronized on private field. But sometimes, when we already have some design with synchronized methods (i.e. legacy class, we derive from, synchronized(this) can be the only solution).</p>\n"},{"tags":[],"owner":{"account_id":558770,"reputation":16438,"user_id":755804,"accept_rate":20,"display_name":"18446744073709551615"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1361341612,"creation_date":1361341612,"answer_id":14973568,"question_id":442564,"body_markdown":"The reason not to synchronize on _this_ is that sometimes you need more than one lock (the second lock often gets removed after some additional thinking, but you still need it in the intermediate state). If you lock on _this_, you always have to remember which one of the two locks is _this_; if you lock on a private Object, the variable name tells you that.\r\n\r\nFrom the reader&#39;s viewpoint, if you see locking on _this_, you always have to answer the two questions: \r\n\r\n 1. what kind of access is protected by _this_?\r\n 2. is one lock really enough, didn&#39;t someone introduce a bug?\r\n\r\nAn example:\r\n\r\n    class BadObject {\r\n        private Something mStuff;\r\n        synchronized setStuff(Something stuff) {\r\n            mStuff = stuff;\r\n        }\r\n        synchronized getStuff(Something stuff) {\r\n            return mStuff;\r\n        }\r\n        private MyListener myListener = new MyListener() {\r\n            public void onMyEvent(...) {\r\n                setStuff(...);\r\n            }\r\n        }\r\n        synchronized void longOperation(MyListener l) {\r\n            ...\r\n            l.onMyEvent(...);\r\n            ...\r\n        }\r\n    }\r\n\r\nIf two threads begin `longOperation()` on two different instances of `BadObject`, they acquire \r\ntheir locks; when it&#39;s time to invoke `l.onMyEvent(...)`, we have a deadlock because neither of the threads may acquire the other object&#39;s lock.\r\n\r\nIn this example we may eliminate the deadlock by using two locks, one for short operations and one for long ones.","title":"Avoid synchronized(this) in Java?","body":"<p>The reason not to synchronize on <em>this</em> is that sometimes you need more than one lock (the second lock often gets removed after some additional thinking, but you still need it in the intermediate state). If you lock on <em>this</em>, you always have to remember which one of the two locks is <em>this</em>; if you lock on a private Object, the variable name tells you that.</p>\n\n<p>From the reader's viewpoint, if you see locking on <em>this</em>, you always have to answer the two questions: </p>\n\n<ol>\n<li>what kind of access is protected by <em>this</em>?</li>\n<li>is one lock really enough, didn't someone introduce a bug?</li>\n</ol>\n\n<p>An example:</p>\n\n<pre><code>class BadObject {\n    private Something mStuff;\n    synchronized setStuff(Something stuff) {\n        mStuff = stuff;\n    }\n    synchronized getStuff(Something stuff) {\n        return mStuff;\n    }\n    private MyListener myListener = new MyListener() {\n        public void onMyEvent(...) {\n            setStuff(...);\n        }\n    }\n    synchronized void longOperation(MyListener l) {\n        ...\n        l.onMyEvent(...);\n        ...\n    }\n}\n</code></pre>\n\n<p>If two threads begin <code>longOperation()</code> on two different instances of <code>BadObject</code>, they acquire \ntheir locks; when it's time to invoke <code>l.onMyEvent(...)</code>, we have a deadlock because neither of the threads may acquire the other object's lock.</p>\n\n<p>In this example we may eliminate the deadlock by using two locks, one for short operations and one for long ones.</p>\n"},{"tags":[],"owner":{"account_id":2461264,"reputation":350,"user_id":2145397,"display_name":"Roman"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1394728540,"creation_date":1373964632,"answer_id":17672039,"question_id":442564,"body_markdown":"As already said here synchronized block can use user-defined variable as lock object, when synchronized function uses only &quot;this&quot;. And of course you can manipulate with areas of your function which should be synchronized and so on.\r\n\r\nBut everyone says that no difference between synchronized function and block which covers whole function using &quot;this&quot; as lock object. That is not true, difference is in byte code which will be generated in both situations. In case of synchronized block usage should be allocated local variable which holds reference to &quot;this&quot;. And as result we will have a little bit larger size of function (not relevant if you have only few number of functions).\r\n\r\nMore detailed explanation of the difference you can find here:\r\nhttp://www.artima.com/insidejvm/ed2/threadsynchP.html\r\n\r\nAlso usage of synchronized block is not good due to following point of view:\r\n\r\n&gt; The synchronized keyword is very limited in one area: when exiting a synchronized block, all threads that are waiting for that lock must be unblocked, but only one of those threads gets to take the lock; all the others see that the lock is taken and go back to the blocked state. That&#39;s not just a lot of wasted processing cycles: often the context switch to unblock a thread also involves paging memory off the disk, and that&#39;s very, very, expensive.\r\n\r\nFor more details in this area I would recommend you read this article:\r\nhttp://java.dzone.com/articles/synchronized-considered","title":"Avoid synchronized(this) in Java?","body":"<p>As already said here synchronized block can use user-defined variable as lock object, when synchronized function uses only \"this\". And of course you can manipulate with areas of your function which should be synchronized and so on.</p>\n\n<p>But everyone says that no difference between synchronized function and block which covers whole function using \"this\" as lock object. That is not true, difference is in byte code which will be generated in both situations. In case of synchronized block usage should be allocated local variable which holds reference to \"this\". And as result we will have a little bit larger size of function (not relevant if you have only few number of functions).</p>\n\n<p>More detailed explanation of the difference you can find here:\n<a href=\"http://www.artima.com/insidejvm/ed2/threadsynchP.html\" rel=\"nofollow\">http://www.artima.com/insidejvm/ed2/threadsynchP.html</a></p>\n\n<p>Also usage of synchronized block is not good due to following point of view:</p>\n\n<blockquote>\n  <p>The synchronized keyword is very limited in one area: when exiting a synchronized block, all threads that are waiting for that lock must be unblocked, but only one of those threads gets to take the lock; all the others see that the lock is taken and go back to the blocked state. That's not just a lot of wasted processing cycles: often the context switch to unblock a thread also involves paging memory off the disk, and that's very, very, expensive.</p>\n</blockquote>\n\n<p>For more details in this area I would recommend you read this article:\n<a href=\"http://java.dzone.com/articles/synchronized-considered\" rel=\"nofollow\">http://java.dzone.com/articles/synchronized-considered</a></p>\n"},{"tags":[],"owner":{"account_id":1903805,"reputation":41397,"user_id":1719067,"accept_rate":73,"display_name":"Narendra Pathai"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1384933422,"creation_date":1384933422,"answer_id":20090123,"question_id":442564,"body_markdown":"A lock is used for either *visibility* or for protecting some data from *concurrent modification* which may lead to race.\r\n\r\nWhen you need to just make primitive type operations to be atomic there are available options like `AtomicInteger` and the likes.\r\n\r\nBut suppose you have two integers which are related to each other like `x` and `y` co-ordinates, which are related to each other and should be changed in an atomic manner. Then you would protect them using a same lock.\r\n\r\nA lock should only protect the state that is related to each other. No less and no more. If you use `synchronized(this)` in each method then even if the state of the class is unrelated all the threads will face contention even if updating unrelated state.\r\n\r\n    class Point{\r\n       private int x;\r\n       private int y;\r\n    \r\n       public Point(int x, int y){\r\n           this.x = x;\r\n           this.y = y;\r\n       }\r\n    \r\n       //mutating methods should be guarded by same lock\r\n       public synchronized void changeCoordinates(int x, int y){\r\n           this.x = x;\r\n           this.y = y;\r\n       }\r\n    }\r\n\r\nIn the above example I have only one method which mutates both `x` and `y` and not two different methods as `x` and `y` are related and if I had given two different methods for mutating `x` and `y` separately then it would not have been thread safe. \r\n\r\nThis example is just to demonstrate and not necessarily the way it should be implemented. The best way to do it would be to make it ***IMMUTABLE***.\r\n\r\nNow in opposition to `Point` example, there is an example of `TwoCounters` already provided by @Andreas where the state which is being protected by two different locks as the state is unrelated to each other.\r\n\r\nThe process of using different locks to protect unrelated states is called *Lock Striping or Lock Splitting*\r\n \r\n\r\n\r\n\r\n ","title":"Avoid synchronized(this) in Java?","body":"<p>A lock is used for either <em>visibility</em> or for protecting some data from <em>concurrent modification</em> which may lead to race.</p>\n\n<p>When you need to just make primitive type operations to be atomic there are available options like <code>AtomicInteger</code> and the likes.</p>\n\n<p>But suppose you have two integers which are related to each other like <code>x</code> and <code>y</code> co-ordinates, which are related to each other and should be changed in an atomic manner. Then you would protect them using a same lock.</p>\n\n<p>A lock should only protect the state that is related to each other. No less and no more. If you use <code>synchronized(this)</code> in each method then even if the state of the class is unrelated all the threads will face contention even if updating unrelated state.</p>\n\n<pre><code>class Point{\n   private int x;\n   private int y;\n\n   public Point(int x, int y){\n       this.x = x;\n       this.y = y;\n   }\n\n   //mutating methods should be guarded by same lock\n   public synchronized void changeCoordinates(int x, int y){\n       this.x = x;\n       this.y = y;\n   }\n}\n</code></pre>\n\n<p>In the above example I have only one method which mutates both <code>x</code> and <code>y</code> and not two different methods as <code>x</code> and <code>y</code> are related and if I had given two different methods for mutating <code>x</code> and <code>y</code> separately then it would not have been thread safe. </p>\n\n<p>This example is just to demonstrate and not necessarily the way it should be implemented. The best way to do it would be to make it <strong><em>IMMUTABLE</em></strong>.</p>\n\n<p>Now in opposition to <code>Point</code> example, there is an example of <code>TwoCounters</code> already provided by @Andreas where the state which is being protected by two different locks as the state is unrelated to each other.</p>\n\n<p>The process of using different locks to protect unrelated states is called <em>Lock Striping or Lock Splitting</em></p>\n"},{"tags":[],"owner":{"account_id":5277096,"reputation":41,"user_id":4213548,"display_name":"Sandesh Sadhale"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1415093076,"creation_date":1415092267,"answer_id":26731309,"question_id":442564,"body_markdown":"I think there is a good explanation on why each of these are vital techniques under your belt in a book called Java Concurrency In Practice by Brian Goetz. He makes one point very clear - you must use the same lock &quot;EVERYWHERE&quot; to protect the state of your object. Synchronised method and synchronising on an object often go hand in hand. E.g. Vector synchronises all its methods. If you have a handle to a vector object and are going to do &quot;put if absent&quot; then merely Vector synchronising its own individual methods isn&#39;t going to protect you from corruption of state. You need to synchronise using synchronised (vectorHandle). This will result in the SAME lock being acquired by every thread which has a handle to the vector and will protect overall state of the vector. This is called client side locking. We do know as a matter of fact vector does synchronised (this) / synchronises all its methods and hence synchronising on the object vectorHandle will result in proper synchronisation of vector objects state. Its foolish to believe that you are thread safe just because you are using a thread safe collection. This is precisely the reason ConcurrentHashMap explicitly introduced putIfAbsent method - to make such operations atomic.\r\n\r\nIn summary\r\n\r\n1. Synchronising at method level allows client side locking.\r\n2. If you have a private lock object - it makes client side locking impossible. This is fine if you know that your class doesn&#39;t have &quot;put if absent&quot; type of functionality.\r\n3. If you are designing a library - then synchronising on this or synchronising the method is often wiser. Because you are rarely in a position to decide how your class is going to be used.\r\n4. Had Vector used a private lock object - it would have been impossible to get &quot;put if absent&quot; right. The client code will never gain a handle to the private lock thus breaking the fundamental rule of using the EXACT SAME LOCK to protect its state.\r\n5. Synchronising on this or synchronised methods do have a problem as others have pointed out - someone could get a lock and never release it. All other threads would keep waiting for the lock to be released.\r\n6. So know what you are doing and adopt the one that&#39;s correct.\r\n7. Someone argued that having a private lock object gives you better granularity - e.g. if two operations are unrelated - they could be guarded by different locks resulting in better throughput. But this i think is design smell and not code smell - if two operations are completely unrelated why are they part of the SAME class? Why should a class club unrelated functionalities at all? May be a utility class? Hmmmm - some util providing string manipulation and calendar date formatting through the same instance?? ... doesn&#39;t make any sense to me at least!!","title":"Avoid synchronized(this) in Java?","body":"<p>I think there is a good explanation on why each of these are vital techniques under your belt in a book called Java Concurrency In Practice by Brian Goetz. He makes one point very clear - you must use the same lock \"EVERYWHERE\" to protect the state of your object. Synchronised method and synchronising on an object often go hand in hand. E.g. Vector synchronises all its methods. If you have a handle to a vector object and are going to do \"put if absent\" then merely Vector synchronising its own individual methods isn't going to protect you from corruption of state. You need to synchronise using synchronised (vectorHandle). This will result in the SAME lock being acquired by every thread which has a handle to the vector and will protect overall state of the vector. This is called client side locking. We do know as a matter of fact vector does synchronised (this) / synchronises all its methods and hence synchronising on the object vectorHandle will result in proper synchronisation of vector objects state. Its foolish to believe that you are thread safe just because you are using a thread safe collection. This is precisely the reason ConcurrentHashMap explicitly introduced putIfAbsent method - to make such operations atomic.</p>\n\n<p>In summary</p>\n\n<ol>\n<li>Synchronising at method level allows client side locking.</li>\n<li>If you have a private lock object - it makes client side locking impossible. This is fine if you know that your class doesn't have \"put if absent\" type of functionality.</li>\n<li>If you are designing a library - then synchronising on this or synchronising the method is often wiser. Because you are rarely in a position to decide how your class is going to be used.</li>\n<li>Had Vector used a private lock object - it would have been impossible to get \"put if absent\" right. The client code will never gain a handle to the private lock thus breaking the fundamental rule of using the EXACT SAME LOCK to protect its state.</li>\n<li>Synchronising on this or synchronised methods do have a problem as others have pointed out - someone could get a lock and never release it. All other threads would keep waiting for the lock to be released.</li>\n<li>So know what you are doing and adopt the one that's correct.</li>\n<li>Someone argued that having a private lock object gives you better granularity - e.g. if two operations are unrelated - they could be guarded by different locks resulting in better throughput. But this i think is design smell and not code smell - if two operations are completely unrelated why are they part of the SAME class? Why should a class club unrelated functionalities at all? May be a utility class? Hmmmm - some util providing string manipulation and calendar date formatting through the same instance?? ... doesn't make any sense to me at least!!</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":5981137,"reputation":17317,"user_id":4700156,"accept_rate":64,"display_name":"Rohit Singh"},"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1538674417,"creation_date":1473614809,"answer_id":39438754,"question_id":442564,"body_markdown":"It depends on the situation.   \r\nIf There is only one sharing entity or more than one.   \r\n\r\n**See full working example** [here][1]            \r\n\r\n\r\nA small introduction.  \r\n \r\n**Threads and shareable entities**        \r\nIt is possible for multiple threads to access same entity, for eg multiple connectionThreads sharing a single messageQueue. Since the threads run concurrently there may be a chance of overriding one&#39;s data by another which may be a messed up situation.   \r\nSo we need some way to ensure that shareable entity is accessed only by one thread at a time. (CONCURRENCY).  \r\n\r\n**Synchronized block**       \r\nsynchronized() block is a way to ensure concurrent access of shareable entity.  \r\nFirst, a small analogy      \r\nSuppose There are two-person P1, P2 (threads) a Washbasin (shareable entity) inside a washroom and there is a door (lock).      \r\nNow we want one person to use washbasin at a time.      \r\nAn approach is to lock the door by P1 when the door is locked P2 waits until p1 completes his work     \r\nP1 unlocks the door      \r\nthen only p1 can use washbasin.   \r\n\r\nsyntax.    \r\n\r\n    synchronized(this)\r\n    {\r\n      SHARED_ENTITY.....\r\n    }\r\n&quot;this&quot; provided the intrinsic lock associated with the class (Java developer designed Object class in such a way that each object can work as monitor).\r\nAbove approach works fine when there are only one shared entity and multiple threads (1: N).  \r\n  [![enter image description here][2]][2]\r\n**N shareable entities-M threads**      \r\nNow think of a situation when there is two washbasin inside a washroom and only one door. If we are using the previous approach, only p1 can use one washbasin at a time while p2 will wait outside. It is wastage of resource as no one is using B2 (washbasin).         \r\nA wiser approach would be to create a smaller room inside washroom and provide them one door per washbasin. In this way, P1 can access B1 and P2 can access B2 and vice-versa.  \r\n\r\n    washbasin1;  \r\n    washbasin2;\r\n    \r\n    Object lock1=new Object();\r\n    Object lock2=new Object();\r\n     \r\n      synchronized(lock1)\r\n      {\r\n        washbasin1;\r\n      }\r\n\r\n      synchronized(lock2)\r\n      {\r\n        washbasin2;\r\n      }\r\n\r\n[![enter image description here][3]][3]             \r\n[![enter image description here][4]][4]\r\n\r\n**See more on Threads**----&gt; [here][5]\r\n\r\n\r\n  [1]: https://github.com/rohitksingh/Multi-Threading\r\n  [2]: http://i.stack.imgur.com/jrbvI.png\r\n  [3]: http://i.stack.imgur.com/jqavZ.png\r\n  [4]: http://i.stack.imgur.com/Xeydw.png\r\n  [5]: https://github.com/rohitksingh/Multi-Threading/wiki","title":"Avoid synchronized(this) in Java?","body":"<p>It depends on the situation.<br>\nIf There is only one sharing entity or more than one.   </p>\n\n<p><strong>See full working example</strong> <a href=\"https://github.com/rohitksingh/Multi-Threading\" rel=\"noreferrer\">here</a>            </p>\n\n<p>A small introduction.  </p>\n\n<p><strong>Threads and shareable entities</strong><br>\nIt is possible for multiple threads to access same entity, for eg multiple connectionThreads sharing a single messageQueue. Since the threads run concurrently there may be a chance of overriding one's data by another which may be a messed up situation.<br>\nSo we need some way to ensure that shareable entity is accessed only by one thread at a time. (CONCURRENCY).  </p>\n\n<p><strong>Synchronized block</strong><br>\nsynchronized() block is a way to ensure concurrent access of shareable entity.<br>\nFirst, a small analogy<br>\nSuppose There are two-person P1, P2 (threads) a Washbasin (shareable entity) inside a washroom and there is a door (lock).<br>\nNow we want one person to use washbasin at a time.<br>\nAn approach is to lock the door by P1 when the door is locked P2 waits until p1 completes his work<br>\nP1 unlocks the door<br>\nthen only p1 can use washbasin.   </p>\n\n<p>syntax.    </p>\n\n<pre><code>synchronized(this)\n{\n  SHARED_ENTITY.....\n}\n</code></pre>\n\n<p>\"this\" provided the intrinsic lock associated with the class (Java developer designed Object class in such a way that each object can work as monitor).\nAbove approach works fine when there are only one shared entity and multiple threads (1: N).<br>\n  <a href=\"https://i.stack.imgur.com/jrbvI.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/jrbvI.png\" alt=\"enter image description here\"></a>\n<strong>N shareable entities-M threads</strong><br>\nNow think of a situation when there is two washbasin inside a washroom and only one door. If we are using the previous approach, only p1 can use one washbasin at a time while p2 will wait outside. It is wastage of resource as no one is using B2 (washbasin).<br>\nA wiser approach would be to create a smaller room inside washroom and provide them one door per washbasin. In this way, P1 can access B1 and P2 can access B2 and vice-versa.  </p>\n\n<pre><code>washbasin1;  \nwashbasin2;\n\nObject lock1=new Object();\nObject lock2=new Object();\n\n  synchronized(lock1)\n  {\n    washbasin1;\n  }\n\n  synchronized(lock2)\n  {\n    washbasin2;\n  }\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/jqavZ.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/jqavZ.png\" alt=\"enter image description here\"></a><br>\n<a href=\"https://i.stack.imgur.com/Xeydw.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/Xeydw.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong>See more on Threads</strong>----> <a href=\"https://github.com/rohitksingh/Multi-Threading/wiki\" rel=\"noreferrer\">here</a></p>\n"},{"tags":[],"owner":{"account_id":2139538,"reputation":42501,"user_id":1898563,"accept_rate":78,"display_name":"Michael"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1540802281,"creation_date":1540802281,"answer_id":53041597,"question_id":442564,"body_markdown":"This is really just supplementary to the other answers, but if your main objection to using private objects for locking is that it clutters your class with fields that are not related to the business logic then Project Lombok has [`@Synchronized`](https://projectlombok.org/features/Synchronized) to generate the boilerplate at compile-time:\r\n\r\n    @Synchronized\r\n    public int foo() {\r\n        return 0;\r\n    }\r\n\r\ncompiles to\r\n\r\n    private final Object $lock = new Object[0];\r\n\r\n    public int foo() {\r\n        synchronized($lock) {\r\n            return 0;\r\n        }\r\n    }\r\n ","title":"Avoid synchronized(this) in Java?","body":"<p>This is really just supplementary to the other answers, but if your main objection to using private objects for locking is that it clutters your class with fields that are not related to the business logic then Project Lombok has <a href=\"https://projectlombok.org/features/Synchronized\" rel=\"nofollow noreferrer\"><code>@Synchronized</code></a> to generate the boilerplate at compile-time:</p>\n\n<pre><code>@Synchronized\npublic int foo() {\n    return 0;\n}\n</code></pre>\n\n<p>compiles to</p>\n\n<pre><code>private final Object $lock = new Object[0];\n\npublic int foo() {\n    synchronized($lock) {\n        return 0;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11554857,"reputation":21,"user_id":8466347,"display_name":"Kolarč&#237;k V&#225;clav"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694420956,"creation_date":1542532626,"answer_id":53359380,"question_id":442564,"body_markdown":"I want to mention possible solution for atomic parts of source code. You can use a Hashmap with locks that use class names and line numbers.\r\n\r\n\t// Synchronization objects (locks)\r\n\tprivate static HashMap&lt;String, Object&gt; locks = new HashMap&lt;String, Object&gt;();\r\n    // Simple method\r\n\tprivate static Object atomic() {\r\n\t\tStackTraceElement [] stack = Thread.currentThread().getStackTrace(); // get execution point \r\n\t\tStackTraceElement exepoint = stack[2];\r\n        // creates unique key from class name and line number using execution point\r\n\t\tString key = String.format(&quot;%s#%d&quot;, exepoint.getClassName(), exepoint.getLineNumber()); \r\n\t\tObject lock = locks.get(key); // use old or create new lock\r\n\t\tif (lock == null) {\r\n\t\t\tlock = new Object();\r\n\t\t\tlocks.put(key, lock);\r\n\t\t}\r\n\t\treturn lock; // return reference to lock\r\n\t}\r\n    // Synchronized code\r\n    void dosomething1() {\r\n        // start commands\r\n\t\tsynchronized (atomic()) {\r\n            // atomic commands 1\r\n            ...\r\n        }\r\n        // other command\r\n    }\r\n    // Synchronized code\r\n    void dosomething2() {\r\n        // start commands\r\n\t\tsynchronized (atomic()) {\r\n            // atomic commands 2\r\n            ...\r\n        }\r\n        // other command\r\n    }","title":"Avoid synchronized(this) in Java?","body":"<p>I want to mention possible solution for atomic parts of source code. You can use a Hashmap with locks that use class names and line numbers.</p>\n<pre><code>// Synchronization objects (locks)\nprivate static HashMap&lt;String, Object&gt; locks = new HashMap&lt;String, Object&gt;();\n// Simple method\nprivate static Object atomic() {\n    StackTraceElement [] stack = Thread.currentThread().getStackTrace(); // get execution point \n    StackTraceElement exepoint = stack[2];\n    // creates unique key from class name and line number using execution point\n    String key = String.format(&quot;%s#%d&quot;, exepoint.getClassName(), exepoint.getLineNumber()); \n    Object lock = locks.get(key); // use old or create new lock\n    if (lock == null) {\n        lock = new Object();\n        locks.put(key, lock);\n    }\n    return lock; // return reference to lock\n}\n// Synchronized code\nvoid dosomething1() {\n    // start commands\n    synchronized (atomic()) {\n        // atomic commands 1\n        ...\n    }\n    // other command\n}\n// Synchronized code\nvoid dosomething2() {\n    // start commands\n    synchronized (atomic()) {\n        // atomic commands 2\n        ...\n    }\n    // other command\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9421037,"reputation":530,"user_id":9851598,"display_name":"surendrapanday"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1551140403,"creation_date":1551140403,"answer_id":54876721,"question_id":442564,"body_markdown":"Avoid using `synchronized(this)` as a locking mechanism: This locks the whole class instance and can cause deadlocks. In such cases, refactor the code to lock only a specific method or variable, that way whole class doesn&#39;t get locked. `Synchronised` can be used inside method level.   \r\nInstead of using `synchronized(this)`, below code shows how you could just lock a method.  \r\n     \r\n\r\n       public void foo() {\r\n    if(operation = null) {\r\n        synchronized(foo) { \r\n    if (operation == null) {\r\n     // enter your code that this method has to handle...\r\n              }\r\n            }\r\n          }\r\n        }","title":"Avoid synchronized(this) in Java?","body":"<p>Avoid using <code>synchronized(this)</code> as a locking mechanism: This locks the whole class instance and can cause deadlocks. In such cases, refactor the code to lock only a specific method or variable, that way whole class doesn't get locked. <code>Synchronised</code> can be used inside method level.<br>\nInstead of using <code>synchronized(this)</code>, below code shows how you could just lock a method.  </p>\n\n<pre><code>   public void foo() {\nif(operation = null) {\n    synchronized(foo) { \nif (operation == null) {\n // enter your code that this method has to handle...\n          }\n        }\n      }\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1597307,"reputation":2656,"user_id":1479080,"display_name":"Amit Mittal"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1563345152,"creation_date":1563344491,"answer_id":57069640,"question_id":442564,"body_markdown":"My two cents in 2019 even though this question could have been settled already.\r\n\r\nLocking on &#39;this&#39; is not bad if you know what you are doing but behind the scene locking on &#39;this&#39; is (which unfortunately what synchronized keyword in method definition allows).\r\n\r\nIf you actually want users of your class to be able to &#39;steal&#39; your lock (i.e. prevent other threads from dealing with it), you actually want all the synchronized methods to wait while another sync method is running and so on. \r\nIt should be intentional and well thought off (and hence documented to help your users understand it).\r\n\r\nTo further elaborate, in the reverse you must know what you are &#39;gaining&#39; (or &#39;losing&#39; out on) if you lock on a non accessible lock (nobody can &#39;steal&#39; your lock, you are in total control and so on...). \r\n\r\nThe problem for me is that synchronized keyword in the method definition signature makes it just too easy for programmers **not to think** about what to lock on which is a mighty important thing to think about if you don&#39;t want to run into problems in a multi-threaded program.\r\n\r\nOne can&#39;t argue that &#39;typically&#39; you don&#39;t want users of your class to be able to do these stuff or that &#39;typically&#39; you want...It depends on what functionality you are coding. You can&#39;t make a thumb rule as you can&#39;t predict all the use cases.\r\n\r\nConsider for e.g. the printwriter which uses an internal lock but then people struggle to use it from multiple threads if they don&#39;t want their output to interleave.\r\n\r\nShould your lock be accessible outside of the class or not is your decision as a programmer on the basis of what functionality the class has. It is part of the api. You can&#39;t move away for instance from synchronized(this) to synchronized(provateObjet) without risking breaking changes in the code using it.\r\n\r\nNote 1: I know you can achieve whatever synchronized(this) &#39;achieves&#39; by using a explicit lock object and exposing it but I think it is unnecessary if your behaviour is well documented and you actually know what locking on &#39;this&#39; means.\r\n\r\nNote 2: I don&#39;t concur with the argument that if some code is accidentally stealing your lock its a bug and you have to solve it. This in a way is same argument as saying I can make all my methods public even if they are not meant to be public. If someone is &#39;accidentally&#39; calling my intended to be private method its a bug. Why enable this accident in the first place!!! If ability to steal your lock is a problem for your class don&#39;t allow it. As simple as that.","title":"Avoid synchronized(this) in Java?","body":"<p>My two cents in 2019 even though this question could have been settled already.</p>\n\n<p>Locking on 'this' is not bad if you know what you are doing but behind the scene locking on 'this' is (which unfortunately what synchronized keyword in method definition allows).</p>\n\n<p>If you actually want users of your class to be able to 'steal' your lock (i.e. prevent other threads from dealing with it), you actually want all the synchronized methods to wait while another sync method is running and so on. \nIt should be intentional and well thought off (and hence documented to help your users understand it).</p>\n\n<p>To further elaborate, in the reverse you must know what you are 'gaining' (or 'losing' out on) if you lock on a non accessible lock (nobody can 'steal' your lock, you are in total control and so on...). </p>\n\n<p>The problem for me is that synchronized keyword in the method definition signature makes it just too easy for programmers <strong>not to think</strong> about what to lock on which is a mighty important thing to think about if you don't want to run into problems in a multi-threaded program.</p>\n\n<p>One can't argue that 'typically' you don't want users of your class to be able to do these stuff or that 'typically' you want...It depends on what functionality you are coding. You can't make a thumb rule as you can't predict all the use cases.</p>\n\n<p>Consider for e.g. the printwriter which uses an internal lock but then people struggle to use it from multiple threads if they don't want their output to interleave.</p>\n\n<p>Should your lock be accessible outside of the class or not is your decision as a programmer on the basis of what functionality the class has. It is part of the api. You can't move away for instance from synchronized(this) to synchronized(provateObjet) without risking breaking changes in the code using it.</p>\n\n<p>Note 1: I know you can achieve whatever synchronized(this) 'achieves' by using a explicit lock object and exposing it but I think it is unnecessary if your behaviour is well documented and you actually know what locking on 'this' means.</p>\n\n<p>Note 2: I don't concur with the argument that if some code is accidentally stealing your lock its a bug and you have to solve it. This in a way is same argument as saying I can make all my methods public even if they are not meant to be public. If someone is 'accidentally' calling my intended to be private method its a bug. Why enable this accident in the first place!!! If ability to steal your lock is a problem for your class don't allow it. As simple as that.</p>\n"},{"tags":[],"owner":{"account_id":218063,"reputation":3190,"user_id":474197,"accept_rate":46,"display_name":"HKTonyLee"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1652769633,"creation_date":1623094806,"answer_id":67877778,"question_id":442564,"body_markdown":"Let me put the conclusion first - locking on private fields does not work for slightly more complicated multi-threaded program. This is because multi-threading is a global problem. It is impossible to localize synchronization unless you write in a very defensive way (e.g. copy everything on passing to other threads).\r\n\r\n---\r\n\r\nHere is the long explanation:\r\n\r\nSynchronization includes 3 parts: Atomicity, Visibility and Ordering\r\n\r\nSynchronized block is very coarse level of synchronization. It enforces visibility and ordering just as what you expected. But for atomicity, it does not provide much protection. Atomicity requires global knowledge of the program rather than local knowledge. (And that makes multi-threading programming very hard)\r\n\r\nLet&#39;s say we have a class `Account` having method `deposit` and `withdraw`. They are both synchronized based on a private lock like this:\r\n\r\n```\r\nclass Account {\r\n    private Object lock = new Object();\r\n\r\n    void withdraw(int amount) {\r\n        synchronized(lock) {\r\n            // ...\r\n        }\r\n    }\r\n\r\n    void deposit(int amount) {\r\n        synchronized(lock) {\r\n            // ...\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nConsidering we need to implement a higher-level class which handles transfer, like this:\r\n\r\n```\r\nclass AccountManager {\r\n    void transfer(Account fromAcc, Account toAcc, int amount) {\r\n        if (fromAcc.getBalance() &gt; amount) {\r\n            fromAcc.setBalance(fromAcc.getBalance() - amount);\r\n            toAcc.setBalance(toAcc.getBalance + amount);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nAssuming we have 2 accounts now,\r\n\r\n```\r\nAccount john;\r\nAccount marry;\r\n```\r\n\r\nIf the `Account.deposit()` and `Account.withdraw()` are locked with internal lock only. That will cause problem when we have 2 threads working:\r\n\r\n```\r\n// Some thread\r\nvoid threadA() {\r\n    john.withdraw(500);\r\n}\r\n\r\n// Another thread\r\nvoid threadB() {\r\n    accountManager.transfer(john, marry, 100);\r\n}\r\n```\r\n\r\nBecause it is possible for both `threadA` and `threadB` run at the same time. And thread B finishes the conditional check, thread A withdraws, and thread B withdraws again. This means we can withdraw $100 from John even if his account has no enough money. This will break atomicity.\r\n\r\nYou may propose that: why not adding `withdraw()` and `deposit()` to `AccountManager` then? But under this proposal, we need to create a multi-thread safe `Map` which maps from different accounts to their locks. We need to delete the lock after execution (otherwise will leak memory). And we also need to ensure no other one accesses the `Account.withdraw()` directly. This will introduce a lots of subtle bugs.\r\n\r\nThe correct and most idiomatic way is to expose the lock in the `Account`. And let the `AccountManager` to use the lock. But in this case, why not just use the object itself then?\r\n\r\n```\r\nclass Account {\r\n    synchronized void withdraw(int amount) {\r\n        // ...\r\n    }\r\n\r\n    synchronized void deposit(int amount) {\r\n        // ...\r\n    }\r\n}\r\n\r\nclass AccountManager {\r\n    void transfer(Account fromAcc, Account toAcc, int amount) {\r\n        // Ensure locking order to prevent deadlock\r\n        Account firstLock = fromAcc.hashCode() &lt; toAcc.hashCode() ? fromAcc : toAcc;\r\n        Account secondLock = fromAcc.hashCode() &lt; toAcc.hashCode() ? toAcc : fromAcc;\r\n\r\n        synchronized(firstLock) {\r\n            synchronized(secondLock) {\r\n                if (fromAcc.getBalance() &gt; amount) {\r\n                    fromAcc.setBalance(fromAcc.getBalance() - amount);\r\n                    toAcc.setBalance(toAcc.getBalance + amount);\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nTo conclude in simple English, private lock does not work for slightly more complicated multi-threaded program.\r\n\r\n\r\n(Reposted from https://stackoverflow.com/a/67877650/474197)\r\n","title":"Avoid synchronized(this) in Java?","body":"<p>Let me put the conclusion first - locking on private fields does not work for slightly more complicated multi-threaded program. This is because multi-threading is a global problem. It is impossible to localize synchronization unless you write in a very defensive way (e.g. copy everything on passing to other threads).</p>\n<hr />\n<p>Here is the long explanation:</p>\n<p>Synchronization includes 3 parts: Atomicity, Visibility and Ordering</p>\n<p>Synchronized block is very coarse level of synchronization. It enforces visibility and ordering just as what you expected. But for atomicity, it does not provide much protection. Atomicity requires global knowledge of the program rather than local knowledge. (And that makes multi-threading programming very hard)</p>\n<p>Let's say we have a class <code>Account</code> having method <code>deposit</code> and <code>withdraw</code>. They are both synchronized based on a private lock like this:</p>\n<pre><code>class Account {\n    private Object lock = new Object();\n\n    void withdraw(int amount) {\n        synchronized(lock) {\n            // ...\n        }\n    }\n\n    void deposit(int amount) {\n        synchronized(lock) {\n            // ...\n        }\n    }\n}\n</code></pre>\n<p>Considering we need to implement a higher-level class which handles transfer, like this:</p>\n<pre><code>class AccountManager {\n    void transfer(Account fromAcc, Account toAcc, int amount) {\n        if (fromAcc.getBalance() &gt; amount) {\n            fromAcc.setBalance(fromAcc.getBalance() - amount);\n            toAcc.setBalance(toAcc.getBalance + amount);\n        }\n    }\n}\n</code></pre>\n<p>Assuming we have 2 accounts now,</p>\n<pre><code>Account john;\nAccount marry;\n</code></pre>\n<p>If the <code>Account.deposit()</code> and <code>Account.withdraw()</code> are locked with internal lock only. That will cause problem when we have 2 threads working:</p>\n<pre><code>// Some thread\nvoid threadA() {\n    john.withdraw(500);\n}\n\n// Another thread\nvoid threadB() {\n    accountManager.transfer(john, marry, 100);\n}\n</code></pre>\n<p>Because it is possible for both <code>threadA</code> and <code>threadB</code> run at the same time. And thread B finishes the conditional check, thread A withdraws, and thread B withdraws again. This means we can withdraw $100 from John even if his account has no enough money. This will break atomicity.</p>\n<p>You may propose that: why not adding <code>withdraw()</code> and <code>deposit()</code> to <code>AccountManager</code> then? But under this proposal, we need to create a multi-thread safe <code>Map</code> which maps from different accounts to their locks. We need to delete the lock after execution (otherwise will leak memory). And we also need to ensure no other one accesses the <code>Account.withdraw()</code> directly. This will introduce a lots of subtle bugs.</p>\n<p>The correct and most idiomatic way is to expose the lock in the <code>Account</code>. And let the <code>AccountManager</code> to use the lock. But in this case, why not just use the object itself then?</p>\n<pre><code>class Account {\n    synchronized void withdraw(int amount) {\n        // ...\n    }\n\n    synchronized void deposit(int amount) {\n        // ...\n    }\n}\n\nclass AccountManager {\n    void transfer(Account fromAcc, Account toAcc, int amount) {\n        // Ensure locking order to prevent deadlock\n        Account firstLock = fromAcc.hashCode() &lt; toAcc.hashCode() ? fromAcc : toAcc;\n        Account secondLock = fromAcc.hashCode() &lt; toAcc.hashCode() ? toAcc : fromAcc;\n\n        synchronized(firstLock) {\n            synchronized(secondLock) {\n                if (fromAcc.getBalance() &gt; amount) {\n                    fromAcc.setBalance(fromAcc.getBalance() - amount);\n                    toAcc.setBalance(toAcc.getBalance + amount);\n                }\n            }\n        }\n    }\n}\n</code></pre>\n<p>To conclude in simple English, private lock does not work for slightly more complicated multi-threaded program.</p>\n<p>(Reposted from <a href=\"https://stackoverflow.com/a/67877650/474197\">https://stackoverflow.com/a/67877650/474197</a>)</p>\n"},{"tags":[],"owner":{"account_id":9376049,"reputation":3355,"user_id":7643517,"display_name":"Nolequen"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695799735,"creation_date":1695799735,"answer_id":77185409,"question_id":442564,"body_markdown":"To add to what has been mentioned earlier, with the release of Java 21, which introduced Project Loom and Virtual Threads, it&#39;s advisable to avoid `synchronized` blocks.\r\n\r\nThis is because [JEP 444][1] and [JEP 425][2] tell us the following:\r\n\r\n    There are two scenarios in which a virtual thread cannot be unmounted during blocking operations because it is pinned to its carrier:\r\n      When it executes code inside a synchronized block or method, or\r\n      When it executes a native method or a foreign function.\r\n\r\nThus, a virtual thread does not release the operating system thread while working with a `synchronized` method or block.\r\n\r\n\r\n  [1]: https://openjdk.org/jeps/444\r\n  [2]: https://openjdk.org/jeps/425","title":"Avoid synchronized(this) in Java?","body":"<p>To add to what has been mentioned earlier, with the release of Java 21, which introduced Project Loom and Virtual Threads, it's advisable to avoid <code>synchronized</code> blocks.</p>\n<p>This is because <a href=\"https://openjdk.org/jeps/444\" rel=\"nofollow noreferrer\">JEP 444</a> and <a href=\"https://openjdk.org/jeps/425\" rel=\"nofollow noreferrer\">JEP 425</a> tell us the following:</p>\n<pre><code>There are two scenarios in which a virtual thread cannot be unmounted during blocking operations because it is pinned to its carrier:\n  When it executes code inside a synchronized block or method, or\n  When it executes a native method or a foreign function.\n</code></pre>\n<p>Thus, a virtual thread does not release the operating system thread while working with a <code>synchronized</code> method or block.</p>\n"}],"owner":{"account_id":14630,"reputation":16827,"user_id":30316,"accept_rate":82,"display_name":"eljenso"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":157374,"favorite_count":0,"down_vote_count":0,"up_vote_count":408,"accepted_answer_id":442601,"answer_count":23,"score":408,"last_activity_date":1695799735,"creation_date":1231929474,"question_id":442564,"body_markdown":"Whenever a question pops up on SO about Java synchronization, some people are very eager to point out that `synchronized(this)` should be avoided. Instead, they claim, a lock on a private reference is to be preferred.\r\n\r\nSome of the given reasons are:\r\n\r\n - [some *evil code* may steal your lock][1] (very popular this one, also has an &quot;accidentally&quot; variant)\r\n - [all synchronized methods within the same class use the exact same lock, which reduces throughput][2]\r\n - [you are (unnecessarily) exposing too much information][3]\r\n\r\nOther people, including me, argue that `synchronized(this)` is an idiom that is used a lot (also in Java libraries), is safe and well understood. It should not be avoided because you have a bug and you don&#39;t have a clue of what is going on in your multithreaded program. In other words: if it is applicable, then use it.\r\n\r\nI am interested in seeing some real-world examples (no foobar stuff) where avoiding a lock on `this` is preferable when `synchronized(this)` would also do the job.\r\n\r\nTherefore: **should you always avoid `synchronized(this)` and replace it with a lock on a private reference?**  \r\n\r\n---\r\n\r\nSome further info (updated as answers are given):\r\n\r\n - we are talking about instance synchronization\r\n - both implicit (`synchronized` methods) and explicit form of `synchronized(this)` are considered\r\n - if you quote Bloch or other authorities on the subject, don&#39;t leave out the parts you don&#39;t like (e.g. Effective Java, item on Thread Safety: *Typically it is the lock on the instance itself, but there are exceptions.)*\r\n - if you need granularity in your locking other than `synchronized(this)` provides, then `synchronized(this)` is not applicable so that&#39;s not the issue\r\n\r\n  [1]: https://stackoverflow.com/questions/416183/in-java-critical-sections-what-should-i-synchronize-on#416198\r\n  [2]: https://stackoverflow.com/questions/309631/what-cases-require-synchronized-method-access-in-java#309677\r\n  [3]: https://stackoverflow.com/questions/439302/allowing-a-method-to-lock-its-parent-object-in-java#439317","title":"Avoid synchronized(this) in Java?","body":"<p>Whenever a question pops up on SO about Java synchronization, some people are very eager to point out that <code>synchronized(this)</code> should be avoided. Instead, they claim, a lock on a private reference is to be preferred.</p>\n\n<p>Some of the given reasons are:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/416183/in-java-critical-sections-what-should-i-synchronize-on#416198\">some <em>evil code</em> may steal your lock</a> (very popular this one, also has an \"accidentally\" variant)</li>\n<li><a href=\"https://stackoverflow.com/questions/309631/what-cases-require-synchronized-method-access-in-java#309677\">all synchronized methods within the same class use the exact same lock, which reduces throughput</a></li>\n<li><a href=\"https://stackoverflow.com/questions/439302/allowing-a-method-to-lock-its-parent-object-in-java#439317\">you are (unnecessarily) exposing too much information</a></li>\n</ul>\n\n<p>Other people, including me, argue that <code>synchronized(this)</code> is an idiom that is used a lot (also in Java libraries), is safe and well understood. It should not be avoided because you have a bug and you don't have a clue of what is going on in your multithreaded program. In other words: if it is applicable, then use it.</p>\n\n<p>I am interested in seeing some real-world examples (no foobar stuff) where avoiding a lock on <code>this</code> is preferable when <code>synchronized(this)</code> would also do the job.</p>\n\n<p>Therefore: <strong>should you always avoid <code>synchronized(this)</code> and replace it with a lock on a private reference?</strong>  </p>\n\n<hr>\n\n<p>Some further info (updated as answers are given):</p>\n\n<ul>\n<li>we are talking about instance synchronization</li>\n<li>both implicit (<code>synchronized</code> methods) and explicit form of <code>synchronized(this)</code> are considered</li>\n<li>if you quote Bloch or other authorities on the subject, don't leave out the parts you don't like (e.g. Effective Java, item on Thread Safety: <em>Typically it is the lock on the instance itself, but there are exceptions.)</em></li>\n<li>if you need granularity in your locking other than <code>synchronized(this)</code> provides, then <code>synchronized(this)</code> is not applicable so that's not the issue</li>\n</ul>\n"},{"tags":["java","jms","activemq","spring-jms"],"comments":[{"owner":{"account_id":11434008,"reputation":30690,"user_id":8381946,"display_name":"Justin Bertram"},"score":0,"creation_date":1695751564,"post_id":77179751,"comment_id":136065475,"body_markdown":"Based on the stack-trace it looks like you&#39;re using the HTTP transport. Is that correct? If so, is there a particular reason you&#39;re using it? Could you use the normal TCP transport instead? It looks like your use of the HTTP transport is tied directly to the problem(s) you&#39;re experiencing.","body":"Based on the stack-trace it looks like you&#39;re using the HTTP transport. Is that correct? If so, is there a particular reason you&#39;re using it? Could you use the normal TCP transport instead? It looks like your use of the HTTP transport is tied directly to the problem(s) you&#39;re experiencing."},{"owner":{"account_id":157630,"reputation":17688,"user_id":375722,"display_name":"Tim Bish"},"score":0,"creation_date":1695759412,"post_id":77179751,"comment_id":136066805,"body_markdown":"Posting the connection URI you are using is usually a helpful addition.","body":"Posting the connection URI you are using is usually a helpful addition."},{"owner":{"account_id":10883371,"reputation":57,"user_id":8001604,"accept_rate":0,"display_name":"Prabhjot Sokhi"},"score":0,"creation_date":1695790766,"post_id":77179751,"comment_id":136069755,"body_markdown":"@JustinBertram we have 2 separate applications and there is a firewall in between, due to security reasons, we have to use HTTPS.","body":"@JustinBertram we have 2 separate applications and there is a firewall in between, due to security reasons, we have to use HTTPS."},{"owner":{"account_id":10883371,"reputation":57,"user_id":8001604,"accept_rate":0,"display_name":"Prabhjot Sokhi"},"score":0,"creation_date":1695790933,"post_id":77179751,"comment_id":136069772,"body_markdown":"@TimBish connection URI is as below activeMQ.brokerurl=https://dummy.dns.name.com:443/destination-name?useInactivityMonitor=false","body":"@TimBish connection URI is as below activeMQ.brokerurl=<a href=\"https://dummy.dns.name.com:443/destination-name?useInactivityMonitor=false\" rel=\"nofollow noreferrer\">dummy.dns.name.com:443/&hellip;</a>"},{"owner":{"account_id":11434008,"reputation":30690,"user_id":8381946,"display_name":"Justin Bertram"},"score":0,"creation_date":1695827961,"post_id":77179751,"comment_id":136076827,"body_markdown":"This looks like a bug in the HTTP transport so if you have no choice but to use it then I would recommend trying to upgrade since ActiveMQ 5.15.12 is over 3 years old now. That said, the HTTP transport isn&#39;t commonly used so an upgrade may not resolve the issue. You might also consider migrating to [ActiveMQ Artemis](https://activemq.apache.org/components/artemis/) (i.e. the next-generation broker from ActiveMQ) which also [supports HTTP](https://activemq.apache.org/components/artemis/documentation/latest/configuring-transports.html#configuring-netty-http).","body":"This looks like a bug in the HTTP transport so if you have no choice but to use it then I would recommend trying to upgrade since ActiveMQ 5.15.12 is over 3 years old now. That said, the HTTP transport isn&#39;t commonly used so an upgrade may not resolve the issue. You might also consider migrating to <a href=\"https://activemq.apache.org/components/artemis/\" rel=\"nofollow noreferrer\">ActiveMQ Artemis</a> (i.e. the next-generation broker from ActiveMQ) which also <a href=\"https://activemq.apache.org/components/artemis/documentation/latest/configuring-transports.html#configuring-netty-http\" rel=\"nofollow noreferrer\">supports HTTP</a>."},{"owner":{"account_id":10883371,"reputation":57,"user_id":8001604,"accept_rate":0,"display_name":"Prabhjot Sokhi"},"score":0,"creation_date":1695996320,"post_id":77179751,"comment_id":136101271,"body_markdown":"@JustinBertram is there any other option or workaround, as ActiveMQ is common between many services so an upgrade is not feasible as of now. Can you give more details or reason of this issue.","body":"@JustinBertram is there any other option or workaround, as ActiveMQ is common between many services so an upgrade is not feasible as of now. Can you give more details or reason of this issue."}],"owner":{"account_id":10883371,"reputation":57,"user_id":8001604,"accept_rate":0,"display_name":"Prabhjot Sokhi"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695799732,"creation_date":1695728991,"question_id":77179751,"body_markdown":"The application uses pooled JMS connection. On startup the application is working fine, but after a couple of days it is not able to send messages to ActiveMQ &quot;Classic.&quot; As soon as the application is restarted it connects again and works fine for the next couple of days.\r\n\r\nBelow is the error message:\r\nThe initial error is:\r\n```\r\n2023-09-18 00:03:15,051 ERROR c.n.v.r.i.l.BulkMessageStorageQueueListener [pool-7-thread-1] Exception in sending messages, rollbacking messages with size: 78\r\norg.springframework.jms.IllegalStateException: com.thoughtworks.xstream.InitializationException: Could not instantiate mapper : com.thoughtworks.xstream.mapper.EnumMapper; nested exception is javax.jms.IllegalStateException: com.thoughtworks.xstream.InitializationException: Could not instantiate mapper : com.thoughtworks.xstream.mapper.EnumMapper\r\n\tat org.springframework.jms.support.JmsUtils.convertJmsAccessException(JmsUtils.java:274) ~[spring-jms-5.2.5.RELEASE.jar:5.2.5.RELEASE]\r\n\tat org.springframework.jms.support.JmsAccessor.convertJmsAccessException(JmsAccessor.java:185) ~[spring-jms-5.2.5.RELEASE.jar:5.2.5.RELEASE]\r\n\tat org.springframework.jms.core.JmsTemplate.execute(JmsTemplate.java:507) ~[spring-jms-5.2.5.RELEASE.jar:5.2.5.RELEASE]\r\n\tat org.springframework.jms.core.JmsTemplate.send(JmsTemplate.java:584) ~[spring-jms-5.2.5.RELEASE.jar:5.2.5.RELEASE]\r\n\tat org.springframework.jms.core.JmsTemplate.convertAndSend(JmsTemplate.java:691) ~[spring-jms-5.2.5.RELEASE.jar:5.2.5.RELEASE]\r\n\tat com.project.xxx.BulkMessageSender.sendStatusMessage(BulkMessageSender.java:71) ~[classes/:04.17.02.35]\r\n\tat com.project.xxx.BulkMessageStorageQueueListener.lambda$setupConsumer$0(BulkMessageStorageQueueListener.java:113) ~[classes/:04.17.02.35]\r\n\tat java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) ~[?:?]\r\n\tat java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308) ~[?:1.8.0_222]\r\n\tat java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180) ~[?:?]\r\n\tat java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294) ~[?:?]\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) ~[?:1.8.0_222]\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) ~[?:?]\r\n\tat java.lang.Thread.run(Thread.java:748) ~[?:1.8.0_222]\r\nCaused by: javax.jms.IllegalStateException: com.thoughtworks.xstream.InitializationException: Could not instantiate mapper : com.thoughtworks.xstream.mapper.EnumMapper\r\n\tat org.apache.activemq.jms.pool.ConnectionPool.createSession(ConnectionPool.java:162) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.jms.pool.PooledConnection.createSession(PooledConnection.java:167) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\r\n\tat org.springframework.jms.support.JmsAccessor.createSession(JmsAccessor.java:208) ~[spring-jms-5.2.5.RELEASE.jar:5.2.5.RELEASE]\r\n\tat org.springframework.jms.core.JmsTemplate.execute(JmsTemplate.java:495) ~[spring-jms-5.2.5.RELEASE.jar:5.2.5.RELEASE]\r\n\t... 11 more\r\nCaused by: com.thoughtworks.xstream.InitializationException: Could not instantiate mapper : com.thoughtworks.xstream.mapper.EnumMapper\r\n\tat com.thoughtworks.xstream.XStream.buildMapperDynamically(XStream.java:646) ~[xstream-1.4.11.1.jar:1.4.11.1]\r\n\tat com.thoughtworks.xstream.XStream.buildMapper(XStream.java:616) ~[xstream-1.4.11.1.jar:1.4.11.1]\r\n\tat com.thoughtworks.xstream.XStream.&lt;init&gt;(XStream.java:587) ~[xstream-1.4.11.1.jar:1.4.11.1]\r\n\tat com.thoughtworks.xstream.XStream.&lt;init&gt;(XStream.java:515) ~[xstream-1.4.11.1.jar:1.4.11.1]\r\n\tat com.thoughtworks.xstream.XStream.&lt;init&gt;(XStream.java:484) ~[xstream-1.4.11.1.jar:1.4.11.1]\r\n\tat com.thoughtworks.xstream.XStream.&lt;init&gt;(XStream.java:430) ~[xstream-1.4.11.1.jar:1.4.11.1]\r\n\tat com.thoughtworks.xstream.XStream.&lt;init&gt;(XStream.java:369) ~[xstream-1.4.11.1.jar:1.4.11.1]\r\n\tat org.apache.activemq.transport.stomp.XStreamSupport.createXStream(XStreamSupport.java:31) ~[activemq-stomp-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.transport.xstream.XStreamWireFormat.createXStream(XStreamWireFormat.java:127) ~[activemq-http-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.transport.xstream.XStreamWireFormat.getXStream(XStreamWireFormat.java:113) ~[activemq-http-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.transport.xstream.XStreamWireFormat.marshalText(XStreamWireFormat.java:89) ~[activemq-http-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.transport.http.HttpClientTransport.oneway(HttpClientTransport.java:106) ~[activemq-http-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.transport.MutexTransport.oneway(MutexTransport.java:68) ~[activemq-client-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.transport.ResponseCorrelator.asyncRequest(ResponseCorrelator.java:81) ~[activemq-client-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.transport.ResponseCorrelator.request(ResponseCorrelator.java:86) ~[activemq-client-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.ActiveMQConnection.syncSendPacket(ActiveMQConnection.java:1392) ~[activemq-client-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.ActiveMQConnection.ensureConnectionInfoSent(ActiveMQConnection.java:1486) ~[activemq-client-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.ActiveMQConnection.createSession(ActiveMQConnection.java:329) ~[activemq-client-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.jms.pool.ConnectionPool.makeSession(ConnectionPool.java:112) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.jms.pool.ConnectionPool$1.makeObject(ConnectionPool.java:82) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.jms.pool.ConnectionPool$1.makeObject(ConnectionPool.java:78) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\r\n\tat org.apache.commons.pool2.impl.GenericKeyedObjectPool.create(GenericKeyedObjectPool.java:1041) ~[commons-pool2-2.7.0.jar:2.7.0]\r\n\tat org.apache.commons.pool2.impl.GenericKeyedObjectPool.borrowObject(GenericKeyedObjectPool.java:342) ~[commons-pool2-2.7.0.jar:2.7.0]\r\n\tat org.apache.commons.pool2.impl.GenericKeyedObjectPool.borrowObject(GenericKeyedObjectPool.java:265) ~[commons-pool2-2.7.0.jar:2.7.0]\r\n\tat org.apache.activemq.jms.pool.ConnectionPool.createSession(ConnectionPool.java:144) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.jms.pool.PooledConnection.createSession(PooledConnection.java:167) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\r\n\tat org.springframework.jms.support.JmsAccessor.createSession(JmsAccessor.java:208) ~[spring-jms-5.2.5.RELEASE.jar:5.2.5.RELEASE]\r\n\tat org.springframework.jms.core.JmsTemplate.execute(JmsTemplate.java:495) ~[spring-jms-5.2.5.RELEASE.jar:5.2.5.RELEASE]\r\n\t... 11 more\r\nCaused by: java.lang.ClassNotFoundException: com.thoughtworks.xstream.mapper.EnumMapper\r\n\tat com.thoughtworks.xstream.core.util.CompositeClassLoader.loadClass(CompositeClassLoader.java:148) ~[xstream-1.4.11.1.jar:1.4.11.1]\r\n\tat java.lang.Class.forName0(Native Method) ~[?:1.8.0_222]\r\n\tat java.lang.Class.forName(Class.java:348) ~[?:1.8.0_222]\r\n\tat com.thoughtworks.xstream.XStream.buildMapperDynamically(XStream.java:642) ~[xstream-1.4.11.1.jar:1.4.11.1]\r\n\tat com.thoughtworks.xstream.XStream.buildMapper(XStream.java:616) ~[xstream-1.4.11.1.jar:1.4.11.1]\r\n\tat com.thoughtworks.xstream.XStream.&lt;init&gt;(XStream.java:587) ~[xstream-1.4.11.1.jar:1.4.11.1]\r\n\tat com.thoughtworks.xstream.XStream.&lt;init&gt;(XStream.java:515) ~[xstream-1.4.11.1.jar:1.4.11.1]\r\n\tat com.thoughtworks.xstream.XStream.&lt;init&gt;(XStream.java:484) ~[xstream-1.4.11.1.jar:1.4.11.1]\r\n\tat com.thoughtworks.xstream.XStream.&lt;init&gt;(XStream.java:430) ~[xstream-1.4.11.1.jar:1.4.11.1]\r\n\tat com.thoughtworks.xstream.XStream.&lt;init&gt;(XStream.java:369) ~[xstream-1.4.11.1.jar:1.4.11.1]\r\n\tat org.apache.activemq.transport.stomp.XStreamSupport.createXStream(XStreamSupport.java:31) ~[activemq-stomp-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.transport.xstream.XStreamWireFormat.createXStream(XStreamWireFormat.java:127) ~[activemq-http-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.transport.xstream.XStreamWireFormat.getXStream(XStreamWireFormat.java:113) ~[activemq-http-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.transport.xstream.XStreamWireFormat.marshalText(XStreamWireFormat.java:89) ~[activemq-http-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.transport.http.HttpClientTransport.oneway(HttpClientTransport.java:106) ~[activemq-http-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.transport.MutexTransport.oneway(MutexTransport.java:68) ~[activemq-client-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.transport.ResponseCorrelator.asyncRequest(ResponseCorrelator.java:81) ~[activemq-client-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.transport.ResponseCorrelator.request(ResponseCorrelator.java:86) ~[activemq-client-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.ActiveMQConnection.syncSendPacket(ActiveMQConnection.java:1392) ~[activemq-client-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.ActiveMQConnection.ensureConnectionInfoSent(ActiveMQConnection.java:1486) ~[activemq-client-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.ActiveMQConnection.createSession(ActiveMQConnection.java:329) ~[activemq-client-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.jms.pool.ConnectionPool.makeSession(ConnectionPool.java:112) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.jms.pool.ConnectionPool$1.makeObject(ConnectionPool.java:82) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.jms.pool.ConnectionPool$1.makeObject(ConnectionPool.java:78) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\r\n\tat org.apache.commons.pool2.impl.GenericKeyedObjectPool.create(GenericKeyedObjectPool.java:1041) ~[commons-pool2-2.7.0.jar:2.7.0]\r\n\tat org.apache.commons.pool2.impl.GenericKeyedObjectPool.borrowObject(GenericKeyedObjectPool.java:342) ~[commons-pool2-2.7.0.jar:2.7.0]\r\n\tat org.apache.commons.pool2.impl.GenericKeyedObjectPool.borrowObject(GenericKeyedObjectPool.java:265) ~[commons-pool2-2.7.0.jar:2.7.0]\r\n\tat org.apache.activemq.jms.pool.ConnectionPool.createSession(ConnectionPool.java:144) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.jms.pool.PooledConnection.createSession(PooledConnection.java:167) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\r\n\tat org.springframework.jms.support.JmsAccessor.createSession(JmsAccessor.java:208) ~[spring-jms-5.2.5.RELEASE.jar:5.2.5.RELEASE]\r\n\tat org.springframework.jms.core.JmsTemplate.execute(JmsTemplate.java:495) ~[spring-jms-5.2.5.RELEASE.jar:5.2.5.RELEASE]\r\n\t... 11 more\r\n```\r\n\r\nAfter the below error is coming continuously until the application has not restarted.\r\n\r\n```\r\n2023-09-18 00:03:16,363 ERROR c.n.v.r.i.l.BulkMessageStorageQueueListener [pool-7-thread-1] Exception in sending messages, rollbacking messages with size: 94\r\norg.springframework.jms.UncategorizedJmsException: Uncategorized exception occurred during JMS processing; nested exception is javax.jms.JMSException: Error while attempting to add new Connection to the pool; nested exception is javax.jms.JMSException: Could not connect to broker URL: https://hostName:443/destination-name?useInactivityMonitor=false. Reason: java.lang.IllegalStateException: Illegal access: this web application instance has been stopped already. Could not load [org/apache/http/client/version.properties]. The following stack trace is thrown for debugging purposes as well as to attempt to terminate the thread which caused the illegal access.\r\n\tat org.springframework.jms.support.JmsUtils.convertJmsAccessException(JmsUtils.java:311) ~[spring-jms-5.2.5.RELEASE.jar:5.2.5.RELEASE]\r\n\tat org.springframework.jms.support.JmsAccessor.convertJmsAccessException(JmsAccessor.java:185) ~[spring-jms-5.2.5.RELEASE.jar:5.2.5.RELEASE]\r\n\tat org.springframework.jms.core.JmsTemplate.execute(JmsTemplate.java:507) ~[spring-jms-5.2.5.RELEASE.jar:5.2.5.RELEASE]\r\n\tat org.springframework.jms.core.JmsTemplate.send(JmsTemplate.java:584) ~[spring-jms-5.2.5.RELEASE.jar:5.2.5.RELEASE]\r\n\tat org.springframework.jms.core.JmsTemplate.convertAndSend(JmsTemplate.java:691) ~[spring-jms-5.2.5.RELEASE.jar:5.2.5.RELEASE]\r\n\tat com.project.xxx.BulkMessageSender.sendStatusMessage(BulkMessageSender.java:71) ~[classes/:04.17.02.35]\r\n\tat com.project.xxx.BulkMessageStorageQueueListener.lambda$setupConsumer$0(BulkMessageStorageQueueListener.java:113) ~[classes/:04.17.02.35]\r\n\tat java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) ~[?:?]\r\n\tat java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308) ~[?:1.8.0_222]\r\n\tat java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180) ~[?:?]\r\n\tat java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294) ~[?:?]\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) ~[?:1.8.0_222]\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) ~[?:?]\r\n\tat java.lang.Thread.run(Thread.java:748) ~[?:1.8.0_222]\r\nCaused by: javax.jms.JMSException: Error while attempting to add new Connection to the pool\r\n\tat org.apache.activemq.jms.pool.PooledConnectionFactory.createJmsException(PooledConnectionFactory.java:279) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.jms.pool.PooledConnectionFactory.createConnection(PooledConnectionFactory.java:230) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.jms.pool.PooledConnectionFactory.createConnection(PooledConnectionFactory.java:209) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\r\n\tat org.springframework.jms.support.JmsAccessor.createConnection(JmsAccessor.java:196) ~[spring-jms-5.2.5.RELEASE.jar:5.2.5.RELEASE]\r\n\tat org.springframework.jms.core.JmsTemplate.execute(JmsTemplate.java:494) ~[spring-jms-5.2.5.RELEASE.jar:5.2.5.RELEASE]\r\n\t... 11 more\r\nCaused by: javax.jms.JMSException: Could not connect to broker URL: https://hostName:443/destination-name?useInactivityMonitor=false. Reason: java.lang.IllegalStateException: Illegal access: this web application instance has been stopped already. Could not load [org/apache/http/client/version.properties]. The following stack trace is thrown for debugging purposes as well as to attempt to terminate the thread which caused the illegal access.\r\n\tat org.apache.activemq.util.JMSExceptionSupport.create(JMSExceptionSupport.java:36) ~[activemq-client-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.ActiveMQConnectionFactory.createActiveMQConnection(ActiveMQConnectionFactory.java:374) ~[activemq-client-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.ActiveMQConnectionFactory.createActiveMQConnection(ActiveMQConnectionFactory.java:304) ~[activemq-client-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.ActiveMQConnectionFactory.createConnection(ActiveMQConnectionFactory.java:244) ~[activemq-client-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.jms.pool.PooledConnectionFactory.createConnection(PooledConnectionFactory.java:288) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.jms.pool.PooledConnectionFactory$1.makeObject(PooledConnectionFactory.java:97) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.jms.pool.PooledConnectionFactory$1.makeObject(PooledConnectionFactory.java:94) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\r\n\tat org.apache.commons.pool2.impl.GenericKeyedObjectPool.create(GenericKeyedObjectPool.java:1041) ~[commons-pool2-2.7.0.jar:2.7.0]\r\n\tat org.apache.commons.pool2.impl.GenericKeyedObjectPool.addObject(GenericKeyedObjectPool.java:1238) ~[commons-pool2-2.7.0.jar:2.7.0]\r\n\tat org.apache.activemq.jms.pool.PooledConnectionFactory.createConnection(PooledConnectionFactory.java:226) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.jms.pool.PooledConnectionFactory.createConnection(PooledConnectionFactory.java:209) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\r\n\tat org.springframework.jms.support.JmsAccessor.createConnection(JmsAccessor.java:196) ~[spring-jms-5.2.5.RELEASE.jar:5.2.5.RELEASE]\r\n\tat org.springframework.jms.core.JmsTemplate.execute(JmsTemplate.java:494) ~[spring-jms-5.2.5.RELEASE.jar:5.2.5.RELEASE]\r\n\t... 11 more\r\nCaused by: java.lang.IllegalStateException: Illegal access: this web application instance has been stopped already. Could not load [org/apache/http/client/version.properties]. The following stack trace is thrown for debugging purposes as well as to attempt to terminate the thread which caused the illegal access.\r\n\tat org.apache.catalina.loader.WebappClassLoaderBase.checkStateForResourceLoading(WebappClassLoaderBase.java:1427) ~[?:?]\r\n\tat org.apache.catalina.loader.WebappClassLoaderBase.getResourceAsStream(WebappClassLoaderBase.java:1135) ~[?:?]\r\n\tat org.apache.http.util.VersionInfo.loadVersionInfo(VersionInfo.java:233) ~[httpcore-4.4.13.jar:4.4.13]\r\n\tat org.apache.http.util.VersionInfo.getUserAgent(VersionInfo.java:319) ~[httpcore-4.4.13.jar:4.4.13]\r\n\tat org.apache.http.impl.client.HttpClientBuilder.build(HttpClientBuilder.java:1057) ~[httpclient-4.5.12.jar:4.5.12]\r\n\tat org.apache.activemq.transport.http.HttpClientTransport.createHttpClient(HttpClientTransport.java:347) ~[activemq-http-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.transport.http.HttpClientTransport.getReceiveHttpClient(HttpClientTransport.java:233) ~[activemq-http-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.transport.http.HttpClientTransport.doStart(HttpClientTransport.java:250) ~[activemq-http-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.util.ServiceSupport.start(ServiceSupport.java:55) ~[activemq-client-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.transport.TransportFilter.start(TransportFilter.java:64) ~[activemq-client-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.transport.TransportFilter.start(TransportFilter.java:64) ~[activemq-client-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.ActiveMQConnectionFactory.createActiveMQConnection(ActiveMQConnectionFactory.java:354) ~[activemq-client-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.ActiveMQConnectionFactory.createActiveMQConnection(ActiveMQConnectionFactory.java:304) ~[activemq-client-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.ActiveMQConnectionFactory.createConnection(ActiveMQConnectionFactory.java:244) ~[activemq-client-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.jms.pool.PooledConnectionFactory.createConnection(PooledConnectionFactory.java:288) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.jms.pool.PooledConnectionFactory$1.makeObject(PooledConnectionFactory.java:97) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.jms.pool.PooledConnectionFactory$1.makeObject(PooledConnectionFactory.java:94) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\r\n\tat org.apache.commons.pool2.impl.GenericKeyedObjectPool.create(GenericKeyedObjectPool.java:1041) ~[commons-pool2-2.7.0.jar:2.7.0]\r\n\tat org.apache.commons.pool2.impl.GenericKeyedObjectPool.addObject(GenericKeyedObjectPool.java:1238) ~[commons-pool2-2.7.0.jar:2.7.0]\r\n\tat org.apache.activemq.jms.pool.PooledConnectionFactory.createConnection(PooledConnectionFactory.java:226) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.jms.pool.PooledConnectionFactory.createConnection(PooledConnectionFactory.java:209) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\r\n\tat org.springframework.jms.support.JmsAccessor.createConnection(JmsAccessor.java:196) ~[spring-jms-5.2.5.RELEASE.jar:5.2.5.RELEASE]\r\n\tat org.springframework.jms.core.JmsTemplate.execute(JmsTemplate.java:494) ~[spring-jms-5.2.5.RELEASE.jar:5.2.5.RELEASE]\r\n\t... 11 more\r\n```\r\n\r\nBelow is code for configuring the client application:\r\n```java\r\npublic class ActiveMQConfig {\r\n\r\n\tprivate static final Logger logger = LoggerFactory.getLogger(ActiveMQConfig.class);\r\n\r\n\t// Active Mq properties\r\n\r\n\t@Value(&quot;${activeMQ.broker.url}&quot;)\r\n\tprivate String brokerUrl;\r\n\r\n\t@Value(&quot;${jms.listener.concurrency}&quot;)\r\n\tprivate String concurrency;\r\n\t\r\n\t// The duration between attempts to redliver a message\r\n\t@Value(&quot;${jms.rollback.redelivery.delay:10000}&quot;)\r\n\tprivate int redeliveryDelay;\r\n\r\n\t// Maximum number of times a redlivery of a message will be attempted -1 is infinite\r\n\t@Value(&quot;${jms.rollback.maximum.redeliveries:-1}&quot;)\r\n\tprivate String maximumRedelivery;\r\n\r\n\t@Value(&quot;${message.activeMQ.pool.max.connections:10}&quot;)\r\n\tprivate int activeMqPoolMaxConnections;\r\n\r\n\t@Bean\r\n\tpublic JmsListenerContainerFactory jmsListenerContainerFactory(\r\n\t\t\t@Qualifier(&quot;jmsConnectionFactoryActiveMQ&quot;) ConnectionFactory connectionFactory,\r\n\t\t\tDefaultJmsListenerContainerFactoryConfigurer configurer) {\r\n\t\tDefaultJmsListenerContainerFactory factory = new DefaultJmsListenerContainerFactory();\r\n\t\tfactory.setConcurrency(concurrency);\r\n\t\tfactory.setSessionTransacted(true);\r\n\t\tfactory.setAutoStartup(false);\r\n\t\tfactory.setErrorHandler(errorHandler -&gt; logger.error(&quot;An error has occurred in the transaction: {}&quot;,\r\n\t\t\t\terrorHandler.getMessage()));\r\n\t\tconfigurer.configure(factory, connectionFactory);\r\n\t\treturn factory;\r\n\t}\r\n\r\n\t@Bean\r\n\t@Primary\r\n\tpublic ActiveMQConnectionFactory jmsConnectionFactoryActiveMQ() {\r\n\t\tActiveMQConnectionFactory connectionFactory = new ActiveMQConnectionFactory();\r\n\t\tconnectionFactory.setTrustAllPackages(true);\r\n\t\t\r\n\t\t// create re-delivery policy to configure re-attempt count and delay\r\n\t\t// when message is rolled back on queue in case of any exception\r\n\t\tRedeliveryPolicy redeliveryPolicy = new RedeliveryPolicy();\r\n\t\tredeliveryPolicy.setMaximumRedeliveries(Integer.parseInt(maximumRedelivery));\r\n\t\tredeliveryPolicy.setRedeliveryDelay(redeliveryDelay);\r\n\t\t\r\n\t\tconnectionFactory.setRedeliveryPolicy(redeliveryPolicy);\r\n\t\tconnectionFactory.setBrokerURL(brokerUrl);\r\n\r\n\t\treturn connectionFactory;\r\n\t}\r\n\r\n\t@Bean\r\n\tpublic JmsTemplate jmsTemplateActiveMQ(PooledConnectionFactory pooledConnectionFactory) {\r\n\t\tJmsTemplate jmsTemplate = new JmsTemplate();\r\n\t\tjmsTemplate.setPubSubDomain(false);\r\n\t\tjmsTemplate.setConnectionFactory(pooledConnectionFactory);\r\n\t\treturn jmsTemplate;\r\n\t}\r\n\r\n\t@Bean\r\n\tpublic PooledConnectionFactory pooledConnectionFactory(ActiveMQConnectionFactory connectionFactory) {\r\n\t\tPooledConnectionFactory pooledConnectionFactory = new PooledConnectionFactory();\r\n\t\tpooledConnectionFactory.setConnectionFactory(connectionFactory);\r\n\t\tpooledConnectionFactory.setMaxConnections(activeMqPoolMaxConnections);\r\n\t\treturn pooledConnectionFactory;\r\n\r\n\t}\r\n\r\n}\r\n```\r\nNote: \r\n\r\n - activeMqPoolMaxConnections is 10.   \r\n - Message inflow is not too high. It&#39;s like 400-500 messages.\r\n - We are also using `JMSXGroupID` to group messages (`message.setStringProperty(&quot;JMSXGroupID&quot;, groupId);`)\r\n - ActiveMQ connection url is `activeMQ.broker.url=https://dummy.dns.name.com/destination-name?useInactivityMonitor=false`","title":"Intermittently application is not able to send message on ActiceMQ &quot;Classic&quot; due to javax.jms.JMSException: Could not connect to broker URL","body":"<p>The application uses pooled JMS connection. On startup the application is working fine, but after a couple of days it is not able to send messages to ActiveMQ &quot;Classic.&quot; As soon as the application is restarted it connects again and works fine for the next couple of days.</p>\n<p>Below is the error message:\nThe initial error is:</p>\n<pre><code>2023-09-18 00:03:15,051 ERROR c.n.v.r.i.l.BulkMessageStorageQueueListener [pool-7-thread-1] Exception in sending messages, rollbacking messages with size: 78\norg.springframework.jms.IllegalStateException: com.thoughtworks.xstream.InitializationException: Could not instantiate mapper : com.thoughtworks.xstream.mapper.EnumMapper; nested exception is javax.jms.IllegalStateException: com.thoughtworks.xstream.InitializationException: Could not instantiate mapper : com.thoughtworks.xstream.mapper.EnumMapper\n    at org.springframework.jms.support.JmsUtils.convertJmsAccessException(JmsUtils.java:274) ~[spring-jms-5.2.5.RELEASE.jar:5.2.5.RELEASE]\n    at org.springframework.jms.support.JmsAccessor.convertJmsAccessException(JmsAccessor.java:185) ~[spring-jms-5.2.5.RELEASE.jar:5.2.5.RELEASE]\n    at org.springframework.jms.core.JmsTemplate.execute(JmsTemplate.java:507) ~[spring-jms-5.2.5.RELEASE.jar:5.2.5.RELEASE]\n    at org.springframework.jms.core.JmsTemplate.send(JmsTemplate.java:584) ~[spring-jms-5.2.5.RELEASE.jar:5.2.5.RELEASE]\n    at org.springframework.jms.core.JmsTemplate.convertAndSend(JmsTemplate.java:691) ~[spring-jms-5.2.5.RELEASE.jar:5.2.5.RELEASE]\n    at com.project.xxx.BulkMessageSender.sendStatusMessage(BulkMessageSender.java:71) ~[classes/:04.17.02.35]\n    at com.project.xxx.BulkMessageStorageQueueListener.lambda$setupConsumer$0(BulkMessageStorageQueueListener.java:113) ~[classes/:04.17.02.35]\n    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) ~[?:?]\n    at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308) ~[?:1.8.0_222]\n    at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180) ~[?:?]\n    at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294) ~[?:?]\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) ~[?:1.8.0_222]\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) ~[?:?]\n    at java.lang.Thread.run(Thread.java:748) ~[?:1.8.0_222]\nCaused by: javax.jms.IllegalStateException: com.thoughtworks.xstream.InitializationException: Could not instantiate mapper : com.thoughtworks.xstream.mapper.EnumMapper\n    at org.apache.activemq.jms.pool.ConnectionPool.createSession(ConnectionPool.java:162) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\n    at org.apache.activemq.jms.pool.PooledConnection.createSession(PooledConnection.java:167) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\n    at org.springframework.jms.support.JmsAccessor.createSession(JmsAccessor.java:208) ~[spring-jms-5.2.5.RELEASE.jar:5.2.5.RELEASE]\n    at org.springframework.jms.core.JmsTemplate.execute(JmsTemplate.java:495) ~[spring-jms-5.2.5.RELEASE.jar:5.2.5.RELEASE]\n    ... 11 more\nCaused by: com.thoughtworks.xstream.InitializationException: Could not instantiate mapper : com.thoughtworks.xstream.mapper.EnumMapper\n    at com.thoughtworks.xstream.XStream.buildMapperDynamically(XStream.java:646) ~[xstream-1.4.11.1.jar:1.4.11.1]\n    at com.thoughtworks.xstream.XStream.buildMapper(XStream.java:616) ~[xstream-1.4.11.1.jar:1.4.11.1]\n    at com.thoughtworks.xstream.XStream.&lt;init&gt;(XStream.java:587) ~[xstream-1.4.11.1.jar:1.4.11.1]\n    at com.thoughtworks.xstream.XStream.&lt;init&gt;(XStream.java:515) ~[xstream-1.4.11.1.jar:1.4.11.1]\n    at com.thoughtworks.xstream.XStream.&lt;init&gt;(XStream.java:484) ~[xstream-1.4.11.1.jar:1.4.11.1]\n    at com.thoughtworks.xstream.XStream.&lt;init&gt;(XStream.java:430) ~[xstream-1.4.11.1.jar:1.4.11.1]\n    at com.thoughtworks.xstream.XStream.&lt;init&gt;(XStream.java:369) ~[xstream-1.4.11.1.jar:1.4.11.1]\n    at org.apache.activemq.transport.stomp.XStreamSupport.createXStream(XStreamSupport.java:31) ~[activemq-stomp-5.15.12.jar:5.15.12]\n    at org.apache.activemq.transport.xstream.XStreamWireFormat.createXStream(XStreamWireFormat.java:127) ~[activemq-http-5.15.12.jar:5.15.12]\n    at org.apache.activemq.transport.xstream.XStreamWireFormat.getXStream(XStreamWireFormat.java:113) ~[activemq-http-5.15.12.jar:5.15.12]\n    at org.apache.activemq.transport.xstream.XStreamWireFormat.marshalText(XStreamWireFormat.java:89) ~[activemq-http-5.15.12.jar:5.15.12]\n    at org.apache.activemq.transport.http.HttpClientTransport.oneway(HttpClientTransport.java:106) ~[activemq-http-5.15.12.jar:5.15.12]\n    at org.apache.activemq.transport.MutexTransport.oneway(MutexTransport.java:68) ~[activemq-client-5.15.12.jar:5.15.12]\n    at org.apache.activemq.transport.ResponseCorrelator.asyncRequest(ResponseCorrelator.java:81) ~[activemq-client-5.15.12.jar:5.15.12]\n    at org.apache.activemq.transport.ResponseCorrelator.request(ResponseCorrelator.java:86) ~[activemq-client-5.15.12.jar:5.15.12]\n    at org.apache.activemq.ActiveMQConnection.syncSendPacket(ActiveMQConnection.java:1392) ~[activemq-client-5.15.12.jar:5.15.12]\n    at org.apache.activemq.ActiveMQConnection.ensureConnectionInfoSent(ActiveMQConnection.java:1486) ~[activemq-client-5.15.12.jar:5.15.12]\n    at org.apache.activemq.ActiveMQConnection.createSession(ActiveMQConnection.java:329) ~[activemq-client-5.15.12.jar:5.15.12]\n    at org.apache.activemq.jms.pool.ConnectionPool.makeSession(ConnectionPool.java:112) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\n    at org.apache.activemq.jms.pool.ConnectionPool$1.makeObject(ConnectionPool.java:82) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\n    at org.apache.activemq.jms.pool.ConnectionPool$1.makeObject(ConnectionPool.java:78) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\n    at org.apache.commons.pool2.impl.GenericKeyedObjectPool.create(GenericKeyedObjectPool.java:1041) ~[commons-pool2-2.7.0.jar:2.7.0]\n    at org.apache.commons.pool2.impl.GenericKeyedObjectPool.borrowObject(GenericKeyedObjectPool.java:342) ~[commons-pool2-2.7.0.jar:2.7.0]\n    at org.apache.commons.pool2.impl.GenericKeyedObjectPool.borrowObject(GenericKeyedObjectPool.java:265) ~[commons-pool2-2.7.0.jar:2.7.0]\n    at org.apache.activemq.jms.pool.ConnectionPool.createSession(ConnectionPool.java:144) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\n    at org.apache.activemq.jms.pool.PooledConnection.createSession(PooledConnection.java:167) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\n    at org.springframework.jms.support.JmsAccessor.createSession(JmsAccessor.java:208) ~[spring-jms-5.2.5.RELEASE.jar:5.2.5.RELEASE]\n    at org.springframework.jms.core.JmsTemplate.execute(JmsTemplate.java:495) ~[spring-jms-5.2.5.RELEASE.jar:5.2.5.RELEASE]\n    ... 11 more\nCaused by: java.lang.ClassNotFoundException: com.thoughtworks.xstream.mapper.EnumMapper\n    at com.thoughtworks.xstream.core.util.CompositeClassLoader.loadClass(CompositeClassLoader.java:148) ~[xstream-1.4.11.1.jar:1.4.11.1]\n    at java.lang.Class.forName0(Native Method) ~[?:1.8.0_222]\n    at java.lang.Class.forName(Class.java:348) ~[?:1.8.0_222]\n    at com.thoughtworks.xstream.XStream.buildMapperDynamically(XStream.java:642) ~[xstream-1.4.11.1.jar:1.4.11.1]\n    at com.thoughtworks.xstream.XStream.buildMapper(XStream.java:616) ~[xstream-1.4.11.1.jar:1.4.11.1]\n    at com.thoughtworks.xstream.XStream.&lt;init&gt;(XStream.java:587) ~[xstream-1.4.11.1.jar:1.4.11.1]\n    at com.thoughtworks.xstream.XStream.&lt;init&gt;(XStream.java:515) ~[xstream-1.4.11.1.jar:1.4.11.1]\n    at com.thoughtworks.xstream.XStream.&lt;init&gt;(XStream.java:484) ~[xstream-1.4.11.1.jar:1.4.11.1]\n    at com.thoughtworks.xstream.XStream.&lt;init&gt;(XStream.java:430) ~[xstream-1.4.11.1.jar:1.4.11.1]\n    at com.thoughtworks.xstream.XStream.&lt;init&gt;(XStream.java:369) ~[xstream-1.4.11.1.jar:1.4.11.1]\n    at org.apache.activemq.transport.stomp.XStreamSupport.createXStream(XStreamSupport.java:31) ~[activemq-stomp-5.15.12.jar:5.15.12]\n    at org.apache.activemq.transport.xstream.XStreamWireFormat.createXStream(XStreamWireFormat.java:127) ~[activemq-http-5.15.12.jar:5.15.12]\n    at org.apache.activemq.transport.xstream.XStreamWireFormat.getXStream(XStreamWireFormat.java:113) ~[activemq-http-5.15.12.jar:5.15.12]\n    at org.apache.activemq.transport.xstream.XStreamWireFormat.marshalText(XStreamWireFormat.java:89) ~[activemq-http-5.15.12.jar:5.15.12]\n    at org.apache.activemq.transport.http.HttpClientTransport.oneway(HttpClientTransport.java:106) ~[activemq-http-5.15.12.jar:5.15.12]\n    at org.apache.activemq.transport.MutexTransport.oneway(MutexTransport.java:68) ~[activemq-client-5.15.12.jar:5.15.12]\n    at org.apache.activemq.transport.ResponseCorrelator.asyncRequest(ResponseCorrelator.java:81) ~[activemq-client-5.15.12.jar:5.15.12]\n    at org.apache.activemq.transport.ResponseCorrelator.request(ResponseCorrelator.java:86) ~[activemq-client-5.15.12.jar:5.15.12]\n    at org.apache.activemq.ActiveMQConnection.syncSendPacket(ActiveMQConnection.java:1392) ~[activemq-client-5.15.12.jar:5.15.12]\n    at org.apache.activemq.ActiveMQConnection.ensureConnectionInfoSent(ActiveMQConnection.java:1486) ~[activemq-client-5.15.12.jar:5.15.12]\n    at org.apache.activemq.ActiveMQConnection.createSession(ActiveMQConnection.java:329) ~[activemq-client-5.15.12.jar:5.15.12]\n    at org.apache.activemq.jms.pool.ConnectionPool.makeSession(ConnectionPool.java:112) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\n    at org.apache.activemq.jms.pool.ConnectionPool$1.makeObject(ConnectionPool.java:82) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\n    at org.apache.activemq.jms.pool.ConnectionPool$1.makeObject(ConnectionPool.java:78) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\n    at org.apache.commons.pool2.impl.GenericKeyedObjectPool.create(GenericKeyedObjectPool.java:1041) ~[commons-pool2-2.7.0.jar:2.7.0]\n    at org.apache.commons.pool2.impl.GenericKeyedObjectPool.borrowObject(GenericKeyedObjectPool.java:342) ~[commons-pool2-2.7.0.jar:2.7.0]\n    at org.apache.commons.pool2.impl.GenericKeyedObjectPool.borrowObject(GenericKeyedObjectPool.java:265) ~[commons-pool2-2.7.0.jar:2.7.0]\n    at org.apache.activemq.jms.pool.ConnectionPool.createSession(ConnectionPool.java:144) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\n    at org.apache.activemq.jms.pool.PooledConnection.createSession(PooledConnection.java:167) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\n    at org.springframework.jms.support.JmsAccessor.createSession(JmsAccessor.java:208) ~[spring-jms-5.2.5.RELEASE.jar:5.2.5.RELEASE]\n    at org.springframework.jms.core.JmsTemplate.execute(JmsTemplate.java:495) ~[spring-jms-5.2.5.RELEASE.jar:5.2.5.RELEASE]\n    ... 11 more\n</code></pre>\n<p>After the below error is coming continuously until the application has not restarted.</p>\n<pre><code>2023-09-18 00:03:16,363 ERROR c.n.v.r.i.l.BulkMessageStorageQueueListener [pool-7-thread-1] Exception in sending messages, rollbacking messages with size: 94\norg.springframework.jms.UncategorizedJmsException: Uncategorized exception occurred during JMS processing; nested exception is javax.jms.JMSException: Error while attempting to add new Connection to the pool; nested exception is javax.jms.JMSException: Could not connect to broker URL: https://hostName:443/destination-name?useInactivityMonitor=false. Reason: java.lang.IllegalStateException: Illegal access: this web application instance has been stopped already. Could not load [org/apache/http/client/version.properties]. The following stack trace is thrown for debugging purposes as well as to attempt to terminate the thread which caused the illegal access.\n    at org.springframework.jms.support.JmsUtils.convertJmsAccessException(JmsUtils.java:311) ~[spring-jms-5.2.5.RELEASE.jar:5.2.5.RELEASE]\n    at org.springframework.jms.support.JmsAccessor.convertJmsAccessException(JmsAccessor.java:185) ~[spring-jms-5.2.5.RELEASE.jar:5.2.5.RELEASE]\n    at org.springframework.jms.core.JmsTemplate.execute(JmsTemplate.java:507) ~[spring-jms-5.2.5.RELEASE.jar:5.2.5.RELEASE]\n    at org.springframework.jms.core.JmsTemplate.send(JmsTemplate.java:584) ~[spring-jms-5.2.5.RELEASE.jar:5.2.5.RELEASE]\n    at org.springframework.jms.core.JmsTemplate.convertAndSend(JmsTemplate.java:691) ~[spring-jms-5.2.5.RELEASE.jar:5.2.5.RELEASE]\n    at com.project.xxx.BulkMessageSender.sendStatusMessage(BulkMessageSender.java:71) ~[classes/:04.17.02.35]\n    at com.project.xxx.BulkMessageStorageQueueListener.lambda$setupConsumer$0(BulkMessageStorageQueueListener.java:113) ~[classes/:04.17.02.35]\n    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) ~[?:?]\n    at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308) ~[?:1.8.0_222]\n    at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180) ~[?:?]\n    at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294) ~[?:?]\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) ~[?:1.8.0_222]\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) ~[?:?]\n    at java.lang.Thread.run(Thread.java:748) ~[?:1.8.0_222]\nCaused by: javax.jms.JMSException: Error while attempting to add new Connection to the pool\n    at org.apache.activemq.jms.pool.PooledConnectionFactory.createJmsException(PooledConnectionFactory.java:279) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\n    at org.apache.activemq.jms.pool.PooledConnectionFactory.createConnection(PooledConnectionFactory.java:230) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\n    at org.apache.activemq.jms.pool.PooledConnectionFactory.createConnection(PooledConnectionFactory.java:209) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\n    at org.springframework.jms.support.JmsAccessor.createConnection(JmsAccessor.java:196) ~[spring-jms-5.2.5.RELEASE.jar:5.2.5.RELEASE]\n    at org.springframework.jms.core.JmsTemplate.execute(JmsTemplate.java:494) ~[spring-jms-5.2.5.RELEASE.jar:5.2.5.RELEASE]\n    ... 11 more\nCaused by: javax.jms.JMSException: Could not connect to broker URL: https://hostName:443/destination-name?useInactivityMonitor=false. Reason: java.lang.IllegalStateException: Illegal access: this web application instance has been stopped already. Could not load [org/apache/http/client/version.properties]. The following stack trace is thrown for debugging purposes as well as to attempt to terminate the thread which caused the illegal access.\n    at org.apache.activemq.util.JMSExceptionSupport.create(JMSExceptionSupport.java:36) ~[activemq-client-5.15.12.jar:5.15.12]\n    at org.apache.activemq.ActiveMQConnectionFactory.createActiveMQConnection(ActiveMQConnectionFactory.java:374) ~[activemq-client-5.15.12.jar:5.15.12]\n    at org.apache.activemq.ActiveMQConnectionFactory.createActiveMQConnection(ActiveMQConnectionFactory.java:304) ~[activemq-client-5.15.12.jar:5.15.12]\n    at org.apache.activemq.ActiveMQConnectionFactory.createConnection(ActiveMQConnectionFactory.java:244) ~[activemq-client-5.15.12.jar:5.15.12]\n    at org.apache.activemq.jms.pool.PooledConnectionFactory.createConnection(PooledConnectionFactory.java:288) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\n    at org.apache.activemq.jms.pool.PooledConnectionFactory$1.makeObject(PooledConnectionFactory.java:97) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\n    at org.apache.activemq.jms.pool.PooledConnectionFactory$1.makeObject(PooledConnectionFactory.java:94) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\n    at org.apache.commons.pool2.impl.GenericKeyedObjectPool.create(GenericKeyedObjectPool.java:1041) ~[commons-pool2-2.7.0.jar:2.7.0]\n    at org.apache.commons.pool2.impl.GenericKeyedObjectPool.addObject(GenericKeyedObjectPool.java:1238) ~[commons-pool2-2.7.0.jar:2.7.0]\n    at org.apache.activemq.jms.pool.PooledConnectionFactory.createConnection(PooledConnectionFactory.java:226) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\n    at org.apache.activemq.jms.pool.PooledConnectionFactory.createConnection(PooledConnectionFactory.java:209) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\n    at org.springframework.jms.support.JmsAccessor.createConnection(JmsAccessor.java:196) ~[spring-jms-5.2.5.RELEASE.jar:5.2.5.RELEASE]\n    at org.springframework.jms.core.JmsTemplate.execute(JmsTemplate.java:494) ~[spring-jms-5.2.5.RELEASE.jar:5.2.5.RELEASE]\n    ... 11 more\nCaused by: java.lang.IllegalStateException: Illegal access: this web application instance has been stopped already. Could not load [org/apache/http/client/version.properties]. The following stack trace is thrown for debugging purposes as well as to attempt to terminate the thread which caused the illegal access.\n    at org.apache.catalina.loader.WebappClassLoaderBase.checkStateForResourceLoading(WebappClassLoaderBase.java:1427) ~[?:?]\n    at org.apache.catalina.loader.WebappClassLoaderBase.getResourceAsStream(WebappClassLoaderBase.java:1135) ~[?:?]\n    at org.apache.http.util.VersionInfo.loadVersionInfo(VersionInfo.java:233) ~[httpcore-4.4.13.jar:4.4.13]\n    at org.apache.http.util.VersionInfo.getUserAgent(VersionInfo.java:319) ~[httpcore-4.4.13.jar:4.4.13]\n    at org.apache.http.impl.client.HttpClientBuilder.build(HttpClientBuilder.java:1057) ~[httpclient-4.5.12.jar:4.5.12]\n    at org.apache.activemq.transport.http.HttpClientTransport.createHttpClient(HttpClientTransport.java:347) ~[activemq-http-5.15.12.jar:5.15.12]\n    at org.apache.activemq.transport.http.HttpClientTransport.getReceiveHttpClient(HttpClientTransport.java:233) ~[activemq-http-5.15.12.jar:5.15.12]\n    at org.apache.activemq.transport.http.HttpClientTransport.doStart(HttpClientTransport.java:250) ~[activemq-http-5.15.12.jar:5.15.12]\n    at org.apache.activemq.util.ServiceSupport.start(ServiceSupport.java:55) ~[activemq-client-5.15.12.jar:5.15.12]\n    at org.apache.activemq.transport.TransportFilter.start(TransportFilter.java:64) ~[activemq-client-5.15.12.jar:5.15.12]\n    at org.apache.activemq.transport.TransportFilter.start(TransportFilter.java:64) ~[activemq-client-5.15.12.jar:5.15.12]\n    at org.apache.activemq.ActiveMQConnectionFactory.createActiveMQConnection(ActiveMQConnectionFactory.java:354) ~[activemq-client-5.15.12.jar:5.15.12]\n    at org.apache.activemq.ActiveMQConnectionFactory.createActiveMQConnection(ActiveMQConnectionFactory.java:304) ~[activemq-client-5.15.12.jar:5.15.12]\n    at org.apache.activemq.ActiveMQConnectionFactory.createConnection(ActiveMQConnectionFactory.java:244) ~[activemq-client-5.15.12.jar:5.15.12]\n    at org.apache.activemq.jms.pool.PooledConnectionFactory.createConnection(PooledConnectionFactory.java:288) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\n    at org.apache.activemq.jms.pool.PooledConnectionFactory$1.makeObject(PooledConnectionFactory.java:97) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\n    at org.apache.activemq.jms.pool.PooledConnectionFactory$1.makeObject(PooledConnectionFactory.java:94) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\n    at org.apache.commons.pool2.impl.GenericKeyedObjectPool.create(GenericKeyedObjectPool.java:1041) ~[commons-pool2-2.7.0.jar:2.7.0]\n    at org.apache.commons.pool2.impl.GenericKeyedObjectPool.addObject(GenericKeyedObjectPool.java:1238) ~[commons-pool2-2.7.0.jar:2.7.0]\n    at org.apache.activemq.jms.pool.PooledConnectionFactory.createConnection(PooledConnectionFactory.java:226) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\n    at org.apache.activemq.jms.pool.PooledConnectionFactory.createConnection(PooledConnectionFactory.java:209) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\n    at org.springframework.jms.support.JmsAccessor.createConnection(JmsAccessor.java:196) ~[spring-jms-5.2.5.RELEASE.jar:5.2.5.RELEASE]\n    at org.springframework.jms.core.JmsTemplate.execute(JmsTemplate.java:494) ~[spring-jms-5.2.5.RELEASE.jar:5.2.5.RELEASE]\n    ... 11 more\n</code></pre>\n<p>Below is code for configuring the client application:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class ActiveMQConfig {\n\n    private static final Logger logger = LoggerFactory.getLogger(ActiveMQConfig.class);\n\n    // Active Mq properties\n\n    @Value(&quot;${activeMQ.broker.url}&quot;)\n    private String brokerUrl;\n\n    @Value(&quot;${jms.listener.concurrency}&quot;)\n    private String concurrency;\n    \n    // The duration between attempts to redliver a message\n    @Value(&quot;${jms.rollback.redelivery.delay:10000}&quot;)\n    private int redeliveryDelay;\n\n    // Maximum number of times a redlivery of a message will be attempted -1 is infinite\n    @Value(&quot;${jms.rollback.maximum.redeliveries:-1}&quot;)\n    private String maximumRedelivery;\n\n    @Value(&quot;${message.activeMQ.pool.max.connections:10}&quot;)\n    private int activeMqPoolMaxConnections;\n\n    @Bean\n    public JmsListenerContainerFactory jmsListenerContainerFactory(\n            @Qualifier(&quot;jmsConnectionFactoryActiveMQ&quot;) ConnectionFactory connectionFactory,\n            DefaultJmsListenerContainerFactoryConfigurer configurer) {\n        DefaultJmsListenerContainerFactory factory = new DefaultJmsListenerContainerFactory();\n        factory.setConcurrency(concurrency);\n        factory.setSessionTransacted(true);\n        factory.setAutoStartup(false);\n        factory.setErrorHandler(errorHandler -&gt; logger.error(&quot;An error has occurred in the transaction: {}&quot;,\n                errorHandler.getMessage()));\n        configurer.configure(factory, connectionFactory);\n        return factory;\n    }\n\n    @Bean\n    @Primary\n    public ActiveMQConnectionFactory jmsConnectionFactoryActiveMQ() {\n        ActiveMQConnectionFactory connectionFactory = new ActiveMQConnectionFactory();\n        connectionFactory.setTrustAllPackages(true);\n        \n        // create re-delivery policy to configure re-attempt count and delay\n        // when message is rolled back on queue in case of any exception\n        RedeliveryPolicy redeliveryPolicy = new RedeliveryPolicy();\n        redeliveryPolicy.setMaximumRedeliveries(Integer.parseInt(maximumRedelivery));\n        redeliveryPolicy.setRedeliveryDelay(redeliveryDelay);\n        \n        connectionFactory.setRedeliveryPolicy(redeliveryPolicy);\n        connectionFactory.setBrokerURL(brokerUrl);\n\n        return connectionFactory;\n    }\n\n    @Bean\n    public JmsTemplate jmsTemplateActiveMQ(PooledConnectionFactory pooledConnectionFactory) {\n        JmsTemplate jmsTemplate = new JmsTemplate();\n        jmsTemplate.setPubSubDomain(false);\n        jmsTemplate.setConnectionFactory(pooledConnectionFactory);\n        return jmsTemplate;\n    }\n\n    @Bean\n    public PooledConnectionFactory pooledConnectionFactory(ActiveMQConnectionFactory connectionFactory) {\n        PooledConnectionFactory pooledConnectionFactory = new PooledConnectionFactory();\n        pooledConnectionFactory.setConnectionFactory(connectionFactory);\n        pooledConnectionFactory.setMaxConnections(activeMqPoolMaxConnections);\n        return pooledConnectionFactory;\n\n    }\n\n}\n</code></pre>\n<p>Note:</p>\n<ul>\n<li>activeMqPoolMaxConnections is 10.</li>\n<li>Message inflow is not too high. It's like 400-500 messages.</li>\n<li>We are also using <code>JMSXGroupID</code> to group messages (<code>message.setStringProperty(&quot;JMSXGroupID&quot;, groupId);</code>)</li>\n<li>ActiveMQ connection url is <code>activeMQ.broker.url=https://dummy.dns.name.com/destination-name?useInactivityMonitor=false</code></li>\n</ul>\n"},{"tags":["java","compiler-errors","uncaught-exception","checked-exceptions"],"comments":[{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":2,"creation_date":1656140083,"post_id":72751842,"comment_id":128502964,"body_markdown":"Please note.  This intended to be a canonical Q&amp;A for this kind of question.  There are *many* (hundreds) of existing questions, but they either have &quot;too much code&quot; or the answers are too specific to the code.","body":"Please note.  This intended to be a canonical Q&amp;A for this kind of question.  There are <i>many</i> (hundreds) of existing questions, but they either have &quot;too much code&quot; or the answers are too specific to the code."}],"answers":[{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1695798890,"creation_date":1656139913,"answer_id":72751843,"question_id":72751842,"body_markdown":"First things first.  This a compilation error not a exception.  You should see it at compile time.  \r\n\r\n&lt;sup&gt;If you see it in a runtime exception message, that&#39;s probably because you are running some code with compilation errors in it.  Go back and fix the compilation errors.  Then find and set the setting in your IDE that prevents it generating &quot;.class&quot; files for source code with compilation errors.  (Save yourself future pain.)&lt;/sup&gt;\r\n\r\n-------------------\r\n\r\nThe short answer to the question is:\r\n\r\n - The error message is saying that the statement with this error is throwing (or propagating) a *checked exception*, and the exception (the `XXX`) is not being dealt with properly.\r\n\r\n - The solution is to deal with the exception by either:\r\n\r\n   - catching and handling it with a `try ... catch` statement, or\r\n   - declaring that the enclosing method or constructor `throws` it&lt;sup&gt;1&lt;/sup&gt;.\r\n\r\n&lt;sup&gt;1 - There are some edge-cases where you can&#39;t do that.  Read the rest of the answer!&lt;/sup&gt;\r\n\r\n-----------------------\r\n\r\nChecked versus unchecked exceptions\r\n-----------------------------------\r\n\r\nIn Java, exceptions are represented by classes that descend from the `java.lang.Throwable` class.  Exceptions are divided into two categories:\r\n\r\n  - *Checked exceptions* are `Throwable`, and `Exception` and its subclasses, apart from `RuntimeException` and its subclasses.\r\n  - *Unchecked exceptions* are all other exceptions; i.e. `Error` and its subclasses, and `RuntimeException` and its subclasses.\r\n\r\n(In the above, &quot;subclasses&quot; includes by direct and indirect subclasses.)\r\n\r\nThe distinction between checked and unchecked exceptions is that checked exceptions *must* be &quot;dealt with&quot; within the enclosing method or constructor that they occur, but unchecked exceptions need not be dealt with.\r\n\r\n(Q: How do you know if an exception is checked or not?  A: Find the javadoc for the exception&#39;s class, and look at its parent classes.)\r\n\r\nHow do you deal with a (checked) exception\r\n---------------------------------\r\n\r\nFrom the Java language perspective, there are two ways to deal with an exception that will &quot;satisfy&quot; the compiler:\r\n\r\n1.  You can catch the exception in a `try ... catch` statement.  For example:\r\n\r\n        public void doThings() {\r\n            try {\r\n                // do some things\r\n                if (someFlag) {\r\n                    throw new IOException(&quot;cannot read something&quot;);\r\n                }\r\n                // do more things\r\n            } catch (IOException ex) {\r\n                // deal with it    &lt;&lt;&lt;=== HERE\r\n            }\r\n        }\r\n\r\n    In the above, we put the statement that throws the (checked) `IOException` in the body of the `try`.  Then we wrote a `catch` clause to catch the exception.   (We could catch a superclass of `IOException` ... but in this case that would be `Exception` and catching `Exception` is a bad idea.)\r\n\r\n2.  You can declare that the enclosing method or constructor `throws` the exception\r\n\r\n        public void doThings() throws IOException {\r\n            // do some things\r\n            if (someFlag) {\r\n                throw new IOException(&quot;cannot read something&quot;);\r\n            }\r\n            // do more things\r\n        }  \r\n\r\n    In the above we have declared that `doThings()` throws `IOException`.  That means that any code that calls the `doThings()` method has to deal with the exception.  In short, we are passing the problem of dealing with the exception to the caller.\r\n\r\nWhich of these things is the correct thing to do?\r\n\r\nIt depends on the context.  However, a general principle is that you should deal with exceptions at a level in the code where you are able to deal with them appropriately.   And that in turn depends on what the exception handling code is going to do (at `HERE`).  Can it recover?  Can it abandon the current request?  Should it halt the application?\r\n\r\nSolving the problem\r\n-------------------\r\n\r\nTo recap.  The compilation error means that:\r\n\r\n  - your code has thrown a checked exception, or called some method or constructor that throws the checked exception, and\r\n  - it has not *dealt with* the exception by catching it or by declaring it as required by the Java language.\r\n\r\nYour solution process should be:\r\n\r\n  1.  Understand what the exception means, and why it *could* be thrown.  Read the javadoc for the exception and the method that throws the exception.\r\n  2.  Based on 1, read *your* code and decide on the correct way to deal with the possible exception.\r\n  3.  Based on 2, make the relevant changes to your code.\r\n\r\nExample: throwing and catching in the same method\r\n-----------------------------------\r\n\r\nConsider the following example from [this Q&amp;A](https://stackoverflow.com/questions/67867013)\r\n\r\n    public class Main {\r\n        static void t() throws IllegalAccessException {\r\n            try {\r\n               throw new IllegalAccessException(&quot;demo&quot;);\r\n            } catch (IllegalAccessException e){\r\n                System.out.println(e);\r\n            }\r\n        }\r\n    \r\n        public static void main(String[] args){\r\n            t();\r\n            System.out.println(&quot;hello&quot;);\r\n        }\r\n    }\r\n\r\nIf you have been following what we have said so far, you will realise that the `t()` will give the &quot;unreported exception&quot; compilation error.  In this case, the mistake is that `t` has been declared as `throws IllegalAccessException`.  In fact the exception does not propagate, because it has been caught within the method that threw it.  \r\n\r\nThe fix in this example will be to *remove* the `throws IllegalAccessException`.\r\n\r\nThe mini-lesson here is that `throws IllegalAccessException` is the method saying that the caller should *expect* the exception to propagate.  It doesn&#39;t actually mean that it will propagate.  And the flip-side is that if you *don&#39;t* expect the exception to propagate (e.g. because it wasn&#39;t thrown, or because it was caught and not rethrown) then the method&#39;s signature shouldn&#39;t say it is thrown! \r\n\r\n\r\nBad practice with exceptions\r\n----------------------------\r\n\r\nThere are a couple of things that you should avoid doing:\r\n\r\n  - Don&#39;t catch `Exception` (or `Throwable`) as a short cut for catching a list of exceptions.  If you do that, you are liable catch things that you don&#39;t expect (like an *unchecked* `NullPointerException`) and then attempt to recover when you shouldn&#39;t.\r\n  - Don&#39;t declare a method as `throws Exception`.  That forces the called to deal with (potentially) any checked exception ... which is a nightmare.\r\n  - Don&#39;t squash exceptions.  For example\r\n\r\n        try { \r\n            ...\r\n        } catch (NullPointerException ex) {\r\n            // It never happens ... ignoring this\r\n        }\r\n    \r\n    If you squash exceptions, you are liable to make the runtime errors that triggered them much harder to diagnose.  You are destroying the evidence.  \r\n\r\n    Note: just *believing* that the exception never happens (per the comment) doesn&#39;t necessarily make it a fact.\r\n\r\nEdge case: static initializers\r\n-----------------------------------\r\n\r\nThere some situations where dealing with checked exceptions is a problem.  One particular case is checked exceptions in `static` initializers.  For example:\r\n\r\n    private static final FileInputStream input = new FileInputStream(&quot;foo.txt&quot;);\r\n\r\nThe `FileInputStream` is declared as `throws FileNotFoundException` ... which is a checked exception.  But since the above is a field declaration, the syntax of the Java language, won&#39;t let us put the declaration inside a `try` ... `catch`.  And there is no appropriate (enclosing) method or constructor ... because this code is run when the *class* is initialized.\r\n\r\nOne solution is to use a `static` block; for example:\r\n\r\n    private static final FileInputStream input;\r\n\r\n    static {\r\n       FileInputStream temp = null;\r\n       try {\r\n           temp = new FileInputStream(&quot;foo.txt&quot;);\r\n       } catch (FileNotFoundException ex) {\r\n           // log the error rather than squashing it\r\n       }\r\n       input = temp;   // Note that we need a single point of assignment to &#39;input&#39;\r\n    }\r\n\r\n&lt;sup&gt;(There are better ways to handle the above scenario in practical code, but that&#39;s not the point of this example.)&lt;/sup&gt;\r\n\r\nEdge case: static blocks\r\n-----------------------------\r\n\r\nAs noted above, you can catch exceptions in static blocks.  But what we didn&#39;t mention is that you *must* catch checked exceptions *within* the block.  There is no enclosing context for a static block where checked exceptions could be caught.\r\n\r\nEdge case: lambdas\r\n------------------\r\n\r\nA lambda expression (typically) should not throw an unchecked exception.  This is not a restriction on lambdas *per se*.  Rather it is a consequence of the function interface that is used for the argument where you are supplying the argument.  Unless the function declares a checked exception, the lambda cannot throw one.   For example:\r\n\r\n    List&lt;Path&gt; paths = ...\r\n    try {\r\n        paths.forEach(p -&gt; Files.delete(p));\r\n    } catch (IOException ex) {\r\n        // log it ...\r\n    }\r\n\r\nEven though we appear to have caught `IOException`, the compiler will complain that:\r\n\r\n  - there is an uncaught exception in the lambda, AND\r\n  - the `catch` is catching an exception that is never thrown!\r\n\r\nIn fact, the exception needs to be caught in the lambda itself:\r\n\r\n    List&lt;Path&gt; paths = ...\r\n    paths.forEach(p -&gt; {\r\n                          try {\r\n                              Files.delete(p);\r\n                          } catch (IOException ex) {\r\n                              // log it ...\r\n                          }\r\n                       }\r\n                 );\r\n\r\n&lt;sup&gt;(The astute reader will notice that the two versions behave differently in the case that a `delete` throws an exception ...)&lt;/sup&gt;\r\n\r\nEdge case: two exceptions called Xyzzy\r\n--------------------------------------\r\n\r\nI have seen cases where a method has a `throws Xyzzy` clause, and the compiler *still complains* that `Xyzzy` must be &quot;caught or declared to be thrown&quot;.  For example: https://stackoverflow.com/questions/27100099.  \r\n\r\nIf you find yourself in this situation, look carefully at the fully qualified names of the exceptions. If the fully qualified names are different, then the exceptions are different.  (Believe what the compiler is saying and try to understand it.)\r\n\r\nMore Information\r\n----------------\r\n\r\nThe Oracle Java Tutorial:\r\n - [The catch or specify requirement](https://docs.oracle.com/javase/tutorial/essential/exceptions/catchOrDeclare.html)\r\n   ... also covers checked vs unchecked exceptions.\r\n - [Catching and handling exceptions](https://docs.oracle.com/javase/tutorial/essential/exceptions/handling.html)\r\n - [Specifying the exceptions thrown by a method](https://docs.oracle.com/javase/tutorial/essential/exceptions/declaring.html)\r\n\r\n","title":"What does &quot;error: unreported exception &lt;XXX&gt;; must be caught or declared to be thrown&quot; mean and how do I fix it?","body":"<p>First things first.  This a compilation error not a exception.  You should see it at compile time.</p>\n<p><sup>If you see it in a runtime exception message, that's probably because you are running some code with compilation errors in it.  Go back and fix the compilation errors.  Then find and set the setting in your IDE that prevents it generating &quot;.class&quot; files for source code with compilation errors.  (Save yourself future pain.)</sup></p>\n<hr />\n<p>The short answer to the question is:</p>\n<ul>\n<li><p>The error message is saying that the statement with this error is throwing (or propagating) a <em>checked exception</em>, and the exception (the <code>XXX</code>) is not being dealt with properly.</p>\n</li>\n<li><p>The solution is to deal with the exception by either:</p>\n<ul>\n<li>catching and handling it with a <code>try ... catch</code> statement, or</li>\n<li>declaring that the enclosing method or constructor <code>throws</code> it<sup>1</sup>.</li>\n</ul>\n</li>\n</ul>\n<p><sup>1 - There are some edge-cases where you can't do that.  Read the rest of the answer!</sup></p>\n<hr />\n<h2>Checked versus unchecked exceptions</h2>\n<p>In Java, exceptions are represented by classes that descend from the <code>java.lang.Throwable</code> class.  Exceptions are divided into two categories:</p>\n<ul>\n<li><em>Checked exceptions</em> are <code>Throwable</code>, and <code>Exception</code> and its subclasses, apart from <code>RuntimeException</code> and its subclasses.</li>\n<li><em>Unchecked exceptions</em> are all other exceptions; i.e. <code>Error</code> and its subclasses, and <code>RuntimeException</code> and its subclasses.</li>\n</ul>\n<p>(In the above, &quot;subclasses&quot; includes by direct and indirect subclasses.)</p>\n<p>The distinction between checked and unchecked exceptions is that checked exceptions <em>must</em> be &quot;dealt with&quot; within the enclosing method or constructor that they occur, but unchecked exceptions need not be dealt with.</p>\n<p>(Q: How do you know if an exception is checked or not?  A: Find the javadoc for the exception's class, and look at its parent classes.)</p>\n<h2>How do you deal with a (checked) exception</h2>\n<p>From the Java language perspective, there are two ways to deal with an exception that will &quot;satisfy&quot; the compiler:</p>\n<ol>\n<li><p>You can catch the exception in a <code>try ... catch</code> statement.  For example:</p>\n<pre><code>public void doThings() {\n    try {\n        // do some things\n        if (someFlag) {\n            throw new IOException(&quot;cannot read something&quot;);\n        }\n        // do more things\n    } catch (IOException ex) {\n        // deal with it    &lt;&lt;&lt;=== HERE\n    }\n}\n</code></pre>\n<p>In the above, we put the statement that throws the (checked) <code>IOException</code> in the body of the <code>try</code>.  Then we wrote a <code>catch</code> clause to catch the exception.   (We could catch a superclass of <code>IOException</code> ... but in this case that would be <code>Exception</code> and catching <code>Exception</code> is a bad idea.)</p>\n</li>\n<li><p>You can declare that the enclosing method or constructor <code>throws</code> the exception</p>\n<pre><code>public void doThings() throws IOException {\n    // do some things\n    if (someFlag) {\n        throw new IOException(&quot;cannot read something&quot;);\n    }\n    // do more things\n}  \n</code></pre>\n<p>In the above we have declared that <code>doThings()</code> throws <code>IOException</code>.  That means that any code that calls the <code>doThings()</code> method has to deal with the exception.  In short, we are passing the problem of dealing with the exception to the caller.</p>\n</li>\n</ol>\n<p>Which of these things is the correct thing to do?</p>\n<p>It depends on the context.  However, a general principle is that you should deal with exceptions at a level in the code where you are able to deal with them appropriately.   And that in turn depends on what the exception handling code is going to do (at <code>HERE</code>).  Can it recover?  Can it abandon the current request?  Should it halt the application?</p>\n<h2>Solving the problem</h2>\n<p>To recap.  The compilation error means that:</p>\n<ul>\n<li>your code has thrown a checked exception, or called some method or constructor that throws the checked exception, and</li>\n<li>it has not <em>dealt with</em> the exception by catching it or by declaring it as required by the Java language.</li>\n</ul>\n<p>Your solution process should be:</p>\n<ol>\n<li>Understand what the exception means, and why it <em>could</em> be thrown.  Read the javadoc for the exception and the method that throws the exception.</li>\n<li>Based on 1, read <em>your</em> code and decide on the correct way to deal with the possible exception.</li>\n<li>Based on 2, make the relevant changes to your code.</li>\n</ol>\n<h2>Example: throwing and catching in the same method</h2>\n<p>Consider the following example from <a href=\"https://stackoverflow.com/questions/67867013\">this Q&amp;A</a></p>\n<pre><code>public class Main {\n    static void t() throws IllegalAccessException {\n        try {\n           throw new IllegalAccessException(&quot;demo&quot;);\n        } catch (IllegalAccessException e){\n            System.out.println(e);\n        }\n    }\n\n    public static void main(String[] args){\n        t();\n        System.out.println(&quot;hello&quot;);\n    }\n}\n</code></pre>\n<p>If you have been following what we have said so far, you will realise that the <code>t()</code> will give the &quot;unreported exception&quot; compilation error.  In this case, the mistake is that <code>t</code> has been declared as <code>throws IllegalAccessException</code>.  In fact the exception does not propagate, because it has been caught within the method that threw it.</p>\n<p>The fix in this example will be to <em>remove</em> the <code>throws IllegalAccessException</code>.</p>\n<p>The mini-lesson here is that <code>throws IllegalAccessException</code> is the method saying that the caller should <em>expect</em> the exception to propagate.  It doesn't actually mean that it will propagate.  And the flip-side is that if you <em>don't</em> expect the exception to propagate (e.g. because it wasn't thrown, or because it was caught and not rethrown) then the method's signature shouldn't say it is thrown!</p>\n<h2>Bad practice with exceptions</h2>\n<p>There are a couple of things that you should avoid doing:</p>\n<ul>\n<li><p>Don't catch <code>Exception</code> (or <code>Throwable</code>) as a short cut for catching a list of exceptions.  If you do that, you are liable catch things that you don't expect (like an <em>unchecked</em> <code>NullPointerException</code>) and then attempt to recover when you shouldn't.</p>\n</li>\n<li><p>Don't declare a method as <code>throws Exception</code>.  That forces the called to deal with (potentially) any checked exception ... which is a nightmare.</p>\n</li>\n<li><p>Don't squash exceptions.  For example</p>\n<pre><code>try { \n    ...\n} catch (NullPointerException ex) {\n    // It never happens ... ignoring this\n}\n</code></pre>\n<p>If you squash exceptions, you are liable to make the runtime errors that triggered them much harder to diagnose.  You are destroying the evidence.</p>\n<p>Note: just <em>believing</em> that the exception never happens (per the comment) doesn't necessarily make it a fact.</p>\n</li>\n</ul>\n<h2>Edge case: static initializers</h2>\n<p>There some situations where dealing with checked exceptions is a problem.  One particular case is checked exceptions in <code>static</code> initializers.  For example:</p>\n<pre><code>private static final FileInputStream input = new FileInputStream(&quot;foo.txt&quot;);\n</code></pre>\n<p>The <code>FileInputStream</code> is declared as <code>throws FileNotFoundException</code> ... which is a checked exception.  But since the above is a field declaration, the syntax of the Java language, won't let us put the declaration inside a <code>try</code> ... <code>catch</code>.  And there is no appropriate (enclosing) method or constructor ... because this code is run when the <em>class</em> is initialized.</p>\n<p>One solution is to use a <code>static</code> block; for example:</p>\n<pre><code>private static final FileInputStream input;\n\nstatic {\n   FileInputStream temp = null;\n   try {\n       temp = new FileInputStream(&quot;foo.txt&quot;);\n   } catch (FileNotFoundException ex) {\n       // log the error rather than squashing it\n   }\n   input = temp;   // Note that we need a single point of assignment to 'input'\n}\n</code></pre>\n<p><sup>(There are better ways to handle the above scenario in practical code, but that's not the point of this example.)</sup></p>\n<h2>Edge case: static blocks</h2>\n<p>As noted above, you can catch exceptions in static blocks.  But what we didn't mention is that you <em>must</em> catch checked exceptions <em>within</em> the block.  There is no enclosing context for a static block where checked exceptions could be caught.</p>\n<h2>Edge case: lambdas</h2>\n<p>A lambda expression (typically) should not throw an unchecked exception.  This is not a restriction on lambdas <em>per se</em>.  Rather it is a consequence of the function interface that is used for the argument where you are supplying the argument.  Unless the function declares a checked exception, the lambda cannot throw one.   For example:</p>\n<pre><code>List&lt;Path&gt; paths = ...\ntry {\n    paths.forEach(p -&gt; Files.delete(p));\n} catch (IOException ex) {\n    // log it ...\n}\n</code></pre>\n<p>Even though we appear to have caught <code>IOException</code>, the compiler will complain that:</p>\n<ul>\n<li>there is an uncaught exception in the lambda, AND</li>\n<li>the <code>catch</code> is catching an exception that is never thrown!</li>\n</ul>\n<p>In fact, the exception needs to be caught in the lambda itself:</p>\n<pre><code>List&lt;Path&gt; paths = ...\npaths.forEach(p -&gt; {\n                      try {\n                          Files.delete(p);\n                      } catch (IOException ex) {\n                          // log it ...\n                      }\n                   }\n             );\n</code></pre>\n<p><sup>(The astute reader will notice that the two versions behave differently in the case that a <code>delete</code> throws an exception ...)</sup></p>\n<h2>Edge case: two exceptions called Xyzzy</h2>\n<p>I have seen cases where a method has a <code>throws Xyzzy</code> clause, and the compiler <em>still complains</em> that <code>Xyzzy</code> must be &quot;caught or declared to be thrown&quot;.  For example: <a href=\"https://stackoverflow.com/questions/27100099\">Unreported exception ...... must be caught or declared to be thrown; despite *thrown* keyword</a>.</p>\n<p>If you find yourself in this situation, look carefully at the fully qualified names of the exceptions. If the fully qualified names are different, then the exceptions are different.  (Believe what the compiler is saying and try to understand it.)</p>\n<h2>More Information</h2>\n<p>The Oracle Java Tutorial:</p>\n<ul>\n<li><a href=\"https://docs.oracle.com/javase/tutorial/essential/exceptions/catchOrDeclare.html\" rel=\"nofollow noreferrer\">The catch or specify requirement</a>\n... also covers checked vs unchecked exceptions.</li>\n<li><a href=\"https://docs.oracle.com/javase/tutorial/essential/exceptions/handling.html\" rel=\"nofollow noreferrer\">Catching and handling exceptions</a></li>\n<li><a href=\"https://docs.oracle.com/javase/tutorial/essential/exceptions/declaring.html\" rel=\"nofollow noreferrer\">Specifying the exceptions thrown by a method</a></li>\n</ul>\n"}],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2932,"favorite_count":0,"down_vote_count":1,"up_vote_count":6,"answer_count":1,"score":5,"last_activity_date":1695798890,"creation_date":1656139913,"question_id":72751842,"body_markdown":"New Java programmers frequently encounter errors phrased like this:\r\n\r\n    &quot;error: unreported exception &lt;XXX&gt;; must be caught or declared to be thrown&quot; \r\n\r\nwhere XXX is the name of some exception class.\r\n\r\nPlease explain:\r\n\r\n  - What the compilation error message is saying,\r\n  - the Java concepts behind this error, and \r\n  - how to fix it.","title":"What does &quot;error: unreported exception &lt;XXX&gt;; must be caught or declared to be thrown&quot; mean and how do I fix it?","body":"<p>New Java programmers frequently encounter errors phrased like this:</p>\n<pre><code>&quot;error: unreported exception &lt;XXX&gt;; must be caught or declared to be thrown&quot; \n</code></pre>\n<p>where XXX is the name of some exception class.</p>\n<p>Please explain:</p>\n<ul>\n<li>What the compilation error message is saying,</li>\n<li>the Java concepts behind this error, and</li>\n<li>how to fix it.</li>\n</ul>\n"},{"tags":["java","selenium-webdriver","slf4j"],"comments":[{"owner":{"account_id":27938804,"reputation":102,"user_id":21335232,"display_name":"Bhairu"},"score":0,"creation_date":1695802925,"post_id":77185310,"comment_id":136071499,"body_markdown":"There is no solution for this, coz many of the inbuilt selenium defined methods are only support to the 3.14 only, So I advocate you that again you have to switch back the 4.12 to 3.14. else if you want to continue with 4.12, build your code from scratch.","body":"There is no solution for this, coz many of the inbuilt selenium defined methods are only support to the 3.14 only, So I advocate you that again you have to switch back the 4.12 to 3.14. else if you want to continue with 4.12, build your code from scratch."}],"owner":{"account_id":29376912,"reputation":1,"user_id":22508250,"display_name":"Revathi Kamaraj"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":72,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695798667,"creation_date":1695798667,"question_id":77185310,"body_markdown":"I changed my scripts for the issue of HasInputDevice interface methods\r\nBecause of chromedriver 117, my scripts are not running.\r\nI changed my selenium version 3.141.59 to 4.12.0 to solve this issue\r\nBut now, HasInputDevice interface method issues are coming.\r\nI don&#39;t know, how to solve this\r\nplease help\r\nAnd some places showing compatibility error\r\nI used the pom.xml:\r\n```\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    &lt;groupId&gt;AIM&lt;/groupId&gt;\r\n    &lt;artifactId&gt;Aim&lt;/artifactId&gt;\r\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n    &lt;name&gt;Aim&lt;/name&gt;\r\n    &lt;!-- FIXME change it to the project&#39;s website --&gt;\r\n    &lt;url&gt;http://www.example.com&lt;/url&gt;\r\n    &lt;properties&gt;\r\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n        &lt;java.version&gt;12&lt;/java.version&gt;\r\n\t&lt;junit.version&gt;4.13.2&lt;/junit.version&gt;\r\n\t&lt;cucumber.version&gt;6.9.0&lt;/cucumber.version&gt;\r\n\t&lt;serenity.version&gt;2.4.48&lt;/serenity.version&gt;\r\n\t&lt;serenity.cucumber.version&gt;2.4.48&lt;/serenity.cucumber.version&gt;\r\n\t&lt;maven.compiler.version&gt;3.8.1&lt;/maven.compiler.version&gt;\r\n\t&lt;maven.surefire.version&gt;2.22.2&lt;/maven.surefire.version&gt;\r\n    &lt;/properties&gt;\r\n    &lt;!-- Dependencies and other sections here --&gt;\r\n    &lt;dependencies&gt;\r\n       &lt;dependency&gt;\r\n\t&lt;groupId&gt;io.cucumber&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;cucumber-java&lt;/artifactId&gt;\r\n\t&lt;version&gt;${cucumber.version}&lt;/version&gt;\r\n\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t&lt;/dependency&gt;\r\n\t&lt;dependency&gt;\r\n\t&lt;groupId&gt;io.cucumber&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;cucumber-junit&lt;/artifactId&gt;\r\n\t&lt;version&gt;${cucumber.version}&lt;/version&gt;\r\n\tscope&gt;test&lt;/scope&gt;\r\n\t&lt;/dependency&gt;\r\n\t&lt;dependency&gt;\r\n\t&lt;groupId&gt;junit&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;junit&lt;/artifactId&gt;\r\n\t&lt;version&gt;${junit.version}&lt;/version&gt;\r\n\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t&lt;/dependency&gt;\r\n\t&lt;dependency&gt;\r\n\t&lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;selenium-java&lt;/artifactId&gt;\r\n\t&lt;version&gt;4.12.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\t&lt;dependency&gt;\r\n\t&lt;groupId&gt;io.github.bonigarcia&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;webdrivermanager&lt;/artifactId&gt;\r\n\t&lt;version&gt;5.5.2&lt;/version&gt;\r\n\t&lt;/dependency&gt;\r\n\t&lt;dependency&gt;\r\n\t&lt;groupId&gt;tech.grasshopper&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;extentreports-cucumber6-adapter&lt;/artifactId&gt;\r\n\t&lt;version&gt;2.8.1&lt;/version&gt;\r\n\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t&lt;/dependency&gt;\r\n\t&lt;dependency&gt;\r\n\t&lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;poi&lt;/artifactId&gt;\r\n\t&lt;version&gt;4.1.2&lt;/version&gt;\r\n\t&lt;/dependency&gt;\r\n\t&lt;dependency&gt;\r\n\t&lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;poi-ooxml&lt;/artifactId&gt;\r\n\t&lt;version&gt;4.1.2&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n&lt;/project&gt;\t\r\n```\r\nI tried to use selenium 4.12.0. After that my scripts are launching the chrome itself.\r\nConsole error:\r\n```\r\n[INFO] -------------------------------------------------------\r\n12:03:55.789 [main] INFO  i.c.core.plugin.SerenityReporter - Running feature from file:///D:/Git/AIMe2e/src/test/resources/DealerAndIndirectFeatures/DRE_DealerAndIndirect.feature\r\n12:03:55.794 [main] WARN  i.c.core.plugin.SerenityReporter - Feature from file:///D:/Git/AIMe2e/src/test/resources/DealerAndIndirectFeatures/DRE_DealerAndIndirect.feature is not under the &#39;features&#39; directory. Requirements report will not be correctly generated!\r\ntestrunner.MyTestRunnerDirect_DealerAndIndirectcom.google.inject.ProvisionException: \r\nUnable to provision, see the following errors:\r\n1) [Guice/ErrorInjectingConstructor]: NoClassDefFoundError: \r\norg/openqa/selenium/interactions/HasInputDevices\r\n  at WebdriverCloseBrowser.&lt;init&gt;(WebdriverCloseBrowser.java:22)\r\n  while locating WebdriverCloseBrowser\r\n  at WebDriverModule.configure(WebDriverModule.java:20)\r\n  while locating CloseBrowser\r\nLearn more:\r\n  https://github.com/google/guice/wiki/ERROR_INJECTING_CONSTRUCTOR\r\n1 error\r\n======================\r\nFull classname legend:\r\n======================\r\nCloseBrowser:          &quot;net.thucydides.core.webdriver.CloseBrowser&quot;\r\nWebDriverModule:       &quot;net.thucydides.core.guice.webdriver.WebDriverModule&quot;\r\nWebdriverCloseBrowser: &quot;net.thucydides.core.webdriver.WebdriverCloseBrowser&quot;\r\n========================\r\nEnd of classname legend:\r\n========================\r\n[INFO] Running Direct-Ordering and delivery\r\n[INFO] Tests run: 0, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0 s - in Direct-Ordering and delivery\r\n[INFO] Running Direct-Stock Booking and Report Generation\r\n[INFO] Tests run: 0, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0 s - in Direct-Stock Booking and Report Generation\r\n[INFO] Running dealer indirect Scenario verification #3\r\n[INFO] Tests run: 0, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0 s - in dealer indirect Scenario verification #3\r\n[INFO] Running Direct-Configuration and Assortment&amp;Inventory page validation\r\n[INFO] Tests run: 0, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0 s - in Direct-Configuration and Assortment&amp;Inventory page validation\r\n[INFO] Running Drivus brand selection and validation\r\n[INFO] Tests run: 0, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0 s - in Drivus brand selection and validation\r\n[INFO] \r\n[INFO] Results:\r\n[INFO] \r\n[INFO] Tests run: 0, Failures: 0, Errors: 0, Skipped: 0\r\n[INFO] \r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] BUILD FAILURE\r\n[INFO] ------------------------------------------------------------------------\r\n```","title":"Script not running in selenium 4.12.0 showing HasInputDevice error","body":"<p>I changed my scripts for the issue of HasInputDevice interface methods\nBecause of chromedriver 117, my scripts are not running.\nI changed my selenium version 3.141.59 to 4.12.0 to solve this issue\nBut now, HasInputDevice interface method issues are coming.\nI don't know, how to solve this\nplease help\nAnd some places showing compatibility error\nI used the pom.xml:</p>\n<pre><code>&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;groupId&gt;AIM&lt;/groupId&gt;\n    &lt;artifactId&gt;Aim&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;Aim&lt;/name&gt;\n    &lt;!-- FIXME change it to the project's website --&gt;\n    &lt;url&gt;http://www.example.com&lt;/url&gt;\n    &lt;properties&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n        &lt;java.version&gt;12&lt;/java.version&gt;\n    &lt;junit.version&gt;4.13.2&lt;/junit.version&gt;\n    &lt;cucumber.version&gt;6.9.0&lt;/cucumber.version&gt;\n    &lt;serenity.version&gt;2.4.48&lt;/serenity.version&gt;\n    &lt;serenity.cucumber.version&gt;2.4.48&lt;/serenity.cucumber.version&gt;\n    &lt;maven.compiler.version&gt;3.8.1&lt;/maven.compiler.version&gt;\n    &lt;maven.surefire.version&gt;2.22.2&lt;/maven.surefire.version&gt;\n    &lt;/properties&gt;\n    &lt;!-- Dependencies and other sections here --&gt;\n    &lt;dependencies&gt;\n       &lt;dependency&gt;\n    &lt;groupId&gt;io.cucumber&lt;/groupId&gt;\n    &lt;artifactId&gt;cucumber-java&lt;/artifactId&gt;\n    &lt;version&gt;${cucumber.version}&lt;/version&gt;\n    &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n    &lt;groupId&gt;io.cucumber&lt;/groupId&gt;\n    &lt;artifactId&gt;cucumber-junit&lt;/artifactId&gt;\n    &lt;version&gt;${cucumber.version}&lt;/version&gt;\n    scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n    &lt;groupId&gt;junit&lt;/groupId&gt;\n    &lt;artifactId&gt;junit&lt;/artifactId&gt;\n    &lt;version&gt;${junit.version}&lt;/version&gt;\n    &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n    &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\n    &lt;artifactId&gt;selenium-java&lt;/artifactId&gt;\n    &lt;version&gt;4.12.0&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;dependency&gt;\n    &lt;groupId&gt;io.github.bonigarcia&lt;/groupId&gt;\n    &lt;artifactId&gt;webdrivermanager&lt;/artifactId&gt;\n    &lt;version&gt;5.5.2&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n    &lt;groupId&gt;tech.grasshopper&lt;/groupId&gt;\n    &lt;artifactId&gt;extentreports-cucumber6-adapter&lt;/artifactId&gt;\n    &lt;version&gt;2.8.1&lt;/version&gt;\n    &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n    &lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\n    &lt;artifactId&gt;poi&lt;/artifactId&gt;\n    &lt;version&gt;4.1.2&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n    &lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\n    &lt;artifactId&gt;poi-ooxml&lt;/artifactId&gt;\n    &lt;version&gt;4.1.2&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n&lt;/project&gt;  \n</code></pre>\n<p>I tried to use selenium 4.12.0. After that my scripts are launching the chrome itself.\nConsole error:</p>\n<pre><code>[INFO] -------------------------------------------------------\n12:03:55.789 [main] INFO  i.c.core.plugin.SerenityReporter - Running feature from file:///D:/Git/AIMe2e/src/test/resources/DealerAndIndirectFeatures/DRE_DealerAndIndirect.feature\n12:03:55.794 [main] WARN  i.c.core.plugin.SerenityReporter - Feature from file:///D:/Git/AIMe2e/src/test/resources/DealerAndIndirectFeatures/DRE_DealerAndIndirect.feature is not under the 'features' directory. Requirements report will not be correctly generated!\ntestrunner.MyTestRunnerDirect_DealerAndIndirectcom.google.inject.ProvisionException: \nUnable to provision, see the following errors:\n1) [Guice/ErrorInjectingConstructor]: NoClassDefFoundError: \norg/openqa/selenium/interactions/HasInputDevices\n  at WebdriverCloseBrowser.&lt;init&gt;(WebdriverCloseBrowser.java:22)\n  while locating WebdriverCloseBrowser\n  at WebDriverModule.configure(WebDriverModule.java:20)\n  while locating CloseBrowser\nLearn more:\n  https://github.com/google/guice/wiki/ERROR_INJECTING_CONSTRUCTOR\n1 error\n======================\nFull classname legend:\n======================\nCloseBrowser:          &quot;net.thucydides.core.webdriver.CloseBrowser&quot;\nWebDriverModule:       &quot;net.thucydides.core.guice.webdriver.WebDriverModule&quot;\nWebdriverCloseBrowser: &quot;net.thucydides.core.webdriver.WebdriverCloseBrowser&quot;\n========================\nEnd of classname legend:\n========================\n[INFO] Running Direct-Ordering and delivery\n[INFO] Tests run: 0, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0 s - in Direct-Ordering and delivery\n[INFO] Running Direct-Stock Booking and Report Generation\n[INFO] Tests run: 0, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0 s - in Direct-Stock Booking and Report Generation\n[INFO] Running dealer indirect Scenario verification #3\n[INFO] Tests run: 0, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0 s - in dealer indirect Scenario verification #3\n[INFO] Running Direct-Configuration and Assortment&amp;Inventory page validation\n[INFO] Tests run: 0, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0 s - in Direct-Configuration and Assortment&amp;Inventory page validation\n[INFO] Running Drivus brand selection and validation\n[INFO] Tests run: 0, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0 s - in Drivus brand selection and validation\n[INFO] \n[INFO] Results:\n[INFO] \n[INFO] Tests run: 0, Failures: 0, Errors: 0, Skipped: 0\n[INFO] \n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD FAILURE\n[INFO] ------------------------------------------------------------------------\n</code></pre>\n"},{"tags":["java","oracle","spring-boot","jdbctemplate","clob"],"comments":[{"owner":{"account_id":9007040,"reputation":303,"user_id":11934617,"display_name":"Pete Ythong"},"score":0,"creation_date":1695758839,"post_id":77182125,"comment_id":136066700,"body_markdown":"If you have any suggestions to improve my question, please let me know","body":"If you have any suggestions to improve my question, please let me know"},{"owner":{"account_id":17782616,"reputation":6789,"user_id":12913491,"display_name":"pmdba"},"score":1,"creation_date":1695764208,"post_id":77182125,"comment_id":136067520,"body_markdown":"PL/SQL (like your streaming function `test_clob`) has a size limit of 32K on CLOB variables.","body":"PL/SQL (like your streaming function <code>test_clob</code>) has a size limit of 32K on CLOB variables."},{"owner":{"account_id":9007040,"reputation":303,"user_id":11934617,"display_name":"Pete Ythong"},"score":0,"creation_date":1695796118,"post_id":77182125,"comment_id":136070337,"body_markdown":"@pmdba you&#39;re right, successfully tested with a smaller PDF, many thanks","body":"@pmdba you&#39;re right, successfully tested with a smaller PDF, many thanks"}],"answers":[{"tags":[],"owner":{"account_id":9007040,"reputation":303,"user_id":11934617,"display_name":"Pete Ythong"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695798591,"creation_date":1695798591,"answer_id":77185300,"question_id":77182125,"body_markdown":"As @pmdba mentioned my Problem was the size limitation. Clob limit with streaming function are 32kb resolves to this error.\r\n\r\n\r\njava.lang.ArrayIndexOutOfBoundsException: Index 32768 out of bounds for length 32768\r\n\r\nat oracle.sql.CharacterSet.convertJavaCharsToAL32UTF8Bytes(CharacterSet.java:1895)\r\nat oracle.jdbc.driver.DBConversion.javaCharsToCHARBytes(DBConversion.java:832)\r\nat oracle.jdbc.driver.DBConversion.javaCharsToCHARBytes(DBConversion.java:766)","title":"Can&#39;t query stored procedure with NamedParameterJdbcTemplate to submit CLOB","body":"<p>As @pmdba mentioned my Problem was the size limitation. Clob limit with streaming function are 32kb resolves to this error.</p>\n<p>java.lang.ArrayIndexOutOfBoundsException: Index 32768 out of bounds for length 32768</p>\n<p>at oracle.sql.CharacterSet.convertJavaCharsToAL32UTF8Bytes(CharacterSet.java:1895)\nat oracle.jdbc.driver.DBConversion.javaCharsToCHARBytes(DBConversion.java:832)\nat oracle.jdbc.driver.DBConversion.javaCharsToCHARBytes(DBConversion.java:766)</p>\n"}],"owner":{"account_id":9007040,"reputation":303,"user_id":11934617,"display_name":"Pete Ythong"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":47,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1695798591,"creation_date":1695748238,"question_id":77182125,"body_markdown":"I fire a SQL statement to start a procedure with only one input Parameter, a clob. But it doesn&#39;t work, and I don&#39;t know why.\r\n\r\nQuery:\r\n\r\n```\r\nprivate static final String ADD_DOCUMENTS =\r\n      &quot;select * from table(Test.test_clob(in_document_clob =&gt; :cblob))&quot;;\r\n```\r\n\r\nCalling the query:\r\n```\r\npublic void addDocuments(InputStream data, String name) throws IOException, SQLException {\r\n\r\n    byte[] byteArray = IOUtils.toByteArray(data);\r\n\r\n    SqlParameterSource paramSource = new MapSqlParameterSource().addValue(&quot;cblob&quot;,\r\n            new SqlLobValue(new ByteArrayInputStream(byteArray), byteArray.length, new DefaultLobHandler()), OracleTypes.CLOB);\r\n\r\n    final List&lt;SomeResponse&gt; query = this.template.query(ADD_DOCUMENTS, paramSource, new SomeResponseMapper(true));\r\n   \r\n  }\r\n```\r\n\r\nI know so far, it works with strings as input, but not with clob&#39;s.\r\n\r\nI&#39;m getting this error:\r\n\r\n&gt; java.lang.ArrayIndexOutOfBoundsException: Index 32768 out of bounds for length 32768\r\n&gt;\r\n&gt; at oracle.sql.CharacterSet.convertJavaCharsToAL32UTF8Bytes(CharacterSet.java:1895)  \r\n&gt; at oracle.jdbc.driver.DBConversion.javaCharsToCHARBytes(DBConversion.java:832)  \r\n&gt; at oracle.jdbc.driver.DBConversion.javaCharsToCHARBytes(DBConversion.java:766)\r\n\r\nWhen I try to call SqlLobValue without length param, I&#39;m getting this error:\r\n\r\n&gt; java.lang.IllegalArgumentException: Content type [[B] not supported for CLOB columns\r\n&gt;\r\n&gt; at org.springframework.jdbc.core.support.SqlLobValue.setTypeValue(SqlLobValue.java:204)  \r\n&gt; at org.springframework.jdbc.core.StatementCreatorUtils.setValue(Statement CreatorUtils.java:292)  \r\n\r\n\r\nMany thanks for your help.\r\n\r\n\r\nI tried to call when i try to call SqlLobValue without length param.\r\n","title":"Can&#39;t query stored procedure with NamedParameterJdbcTemplate to submit CLOB","body":"<p>I fire a SQL statement to start a procedure with only one input Parameter, a clob. But it doesn't work, and I don't know why.</p>\n<p>Query:</p>\n<pre><code>private static final String ADD_DOCUMENTS =\n      &quot;select * from table(Test.test_clob(in_document_clob =&gt; :cblob))&quot;;\n</code></pre>\n<p>Calling the query:</p>\n<pre><code>public void addDocuments(InputStream data, String name) throws IOException, SQLException {\n\n    byte[] byteArray = IOUtils.toByteArray(data);\n\n    SqlParameterSource paramSource = new MapSqlParameterSource().addValue(&quot;cblob&quot;,\n            new SqlLobValue(new ByteArrayInputStream(byteArray), byteArray.length, new DefaultLobHandler()), OracleTypes.CLOB);\n\n    final List&lt;SomeResponse&gt; query = this.template.query(ADD_DOCUMENTS, paramSource, new SomeResponseMapper(true));\n   \n  }\n</code></pre>\n<p>I know so far, it works with strings as input, but not with clob's.</p>\n<p>I'm getting this error:</p>\n<blockquote>\n<p>java.lang.ArrayIndexOutOfBoundsException: Index 32768 out of bounds for length 32768</p>\n<p>at oracle.sql.CharacterSet.convertJavaCharsToAL32UTF8Bytes(CharacterSet.java:1895)<br />\nat oracle.jdbc.driver.DBConversion.javaCharsToCHARBytes(DBConversion.java:832)<br />\nat oracle.jdbc.driver.DBConversion.javaCharsToCHARBytes(DBConversion.java:766)</p>\n</blockquote>\n<p>When I try to call SqlLobValue without length param, I'm getting this error:</p>\n<blockquote>\n<p>java.lang.IllegalArgumentException: Content type [[B] not supported for CLOB columns</p>\n<p>at org.springframework.jdbc.core.support.SqlLobValue.setTypeValue(SqlLobValue.java:204)<br />\nat org.springframework.jdbc.core.StatementCreatorUtils.setValue(Statement CreatorUtils.java:292)</p>\n</blockquote>\n<p>Many thanks for your help.</p>\n<p>I tried to call when i try to call SqlLobValue without length param.</p>\n"},{"tags":["java","spring","rest","tomcat"],"comments":[{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1695724198,"post_id":77179148,"comment_id":136059664,"body_markdown":"Vague title. Rewrite no summarize your specific technical issue.","body":"Vague title. Rewrite no summarize your specific technical issue."},{"owner":{"account_id":698222,"reputation":50202,"user_id":573032,"accept_rate":77,"display_name":"Roman C"},"score":0,"creation_date":1695725330,"post_id":77179148,"comment_id":136059916,"body_markdown":"There&#39;s a section Usage from the reference above.","body":"There&#39;s a section Usage from the reference above."},{"owner":{"account_id":8565752,"reputation":615,"user_id":6418277,"accept_rate":81,"display_name":"Gaetan L."},"score":0,"creation_date":1695726553,"post_id":77179148,"comment_id":136060132,"body_markdown":"@Roman C Yes even when I follow it I get a 404.","body":"@Roman C Yes even when I follow it I get a 404."},{"owner":{"account_id":698222,"reputation":50202,"user_id":573032,"accept_rate":77,"display_name":"Roman C"},"score":0,"creation_date":1695729674,"post_id":77179148,"comment_id":136060767,"body_markdown":"@GaetanL. The 404 error code is a common for web application. You should figure out a real case.","body":"@GaetanL. The 404 error code is a common for web application. You should figure out a real case."},{"owner":{"account_id":8565752,"reputation":615,"user_id":6418277,"accept_rate":81,"display_name":"Gaetan L."},"score":0,"creation_date":1695734666,"post_id":77179148,"comment_id":136061898,"body_markdown":"@Roman C Is there a way for me to know what URLs have been exposed (is that the correct term?) by the applicatin that is running?","body":"@Roman C Is there a way for me to know what URLs have been exposed (is that the correct term?) by the applicatin that is running?"},{"owner":{"account_id":698222,"reputation":50202,"user_id":573032,"accept_rate":77,"display_name":"Roman C"},"score":0,"creation_date":1695734917,"post_id":77179148,"comment_id":136061958,"body_markdown":"@GaetanL. No, in Spring you should figure out it yourself from the controller configuration.","body":"@GaetanL. No, in Spring you should figure out it yourself from the controller configuration."}],"answers":[{"tags":[],"owner":{"account_id":23576127,"reputation":1,"user_id":17615764,"display_name":"wangjinguang"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695780824,"creation_date":1695780824,"answer_id":77184319,"question_id":77179148,"body_markdown":"I downloaded that project and tried to run it with AppMain, and the result was the same as yours. However, if you execute **java -jar target/restdrill.jar** from the command line, it can be accessed correctly. You can try it out.","title":"How to access URL defined with @RequestMapping","body":"<p>I downloaded that project and tried to run it with AppMain, and the result was the same as yours. However, if you execute <strong>java -jar target/restdrill.jar</strong> from the command line, it can be accessed correctly. You can try it out.</p>\n"},{"tags":[],"owner":{"account_id":23351413,"reputation":40,"user_id":17424919,"display_name":"great-jin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695793672,"creation_date":1695787107,"answer_id":77184601,"question_id":77179148,"body_markdown":"I check the GitHub link that you post, the `/api/user` is defind in `UserAPIController`, you can comprehend it with all api prefix.\r\n\r\nThe method of `getUsers` that only defind the type to be `RequestMethod.GET`,\r\n consider to change to like this:\r\n\r\n```java\r\n@RequestMapping(value= &quot;getUsers&quot;, method = RequestMethod.GET)\r\npublic ResponseEntity&lt;List&lt;User&gt;&gt; getUsers() {\r\n\tSystem.out.println(&quot;Fetching all Users&quot;);\r\n\treturn new ResponseEntity&lt;List&lt;User&gt;&gt;(userRepo.getUsers(), HttpStatus.OK);\r\n}\r\n```\r\n\r\nor like this:\r\n```java\r\n@GetMapping(&quot;getUsers&quot;)\r\npublic ResponseEntity&lt;List&lt;User&gt;&gt; getUsers() {\r\n\tSystem.out.println(&quot;Fetching all Users&quot;);\r\n\treturn new ResponseEntity&lt;List&lt;User&gt;&gt;(userRepo.getUsers(), HttpStatus.OK);\r\n}\r\n```\r\n\r\nthen you can request to `/api/user/getUsers`","title":"How to access URL defined with @RequestMapping","body":"<p>I check the GitHub link that you post, the <code>/api/user</code> is defind in <code>UserAPIController</code>, you can comprehend it with all api prefix.</p>\n<p>The method of <code>getUsers</code> that only defind the type to be <code>RequestMethod.GET</code>,\nconsider to change to like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@RequestMapping(value= &quot;getUsers&quot;, method = RequestMethod.GET)\npublic ResponseEntity&lt;List&lt;User&gt;&gt; getUsers() {\n    System.out.println(&quot;Fetching all Users&quot;);\n    return new ResponseEntity&lt;List&lt;User&gt;&gt;(userRepo.getUsers(), HttpStatus.OK);\n}\n</code></pre>\n<p>or like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@GetMapping(&quot;getUsers&quot;)\npublic ResponseEntity&lt;List&lt;User&gt;&gt; getUsers() {\n    System.out.println(&quot;Fetching all Users&quot;);\n    return new ResponseEntity&lt;List&lt;User&gt;&gt;(userRepo.getUsers(), HttpStatus.OK);\n}\n</code></pre>\n<p>then you can request to <code>/api/user/getUsers</code></p>\n"}],"owner":{"account_id":8565752,"reputation":615,"user_id":6418277,"accept_rate":81,"display_name":"Gaetan L."},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":64,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"answer_count":2,"score":-3,"last_activity_date":1695798483,"creation_date":1695724098,"question_id":77179148,"body_markdown":"I want to learn how to program an API in Java/Spring so I downloaded this example on github: https://github.com/bobbrady/spring-rest-drill-bootless.\r\n\r\nThe app seems to run correctly, however every request I send to /api/user returns an error 404.\r\n\r\nFor example I&#39;m trying to access the `getUsers()` method, so from what I understand, in `UserApiController` there is an annotation `@RequestMapping(&quot;/api/user&quot;)`. So I&#39;m guessing that&#39;s the base URL, getUsers only specifies a method (get) and no mapping, so I assume I&#39;m supposed to send a GET request to `http://localhost:8080/api/user` with no parameters? But when I do so (in a browser or using Postman), a 404 is returned.","title":"How to access URL defined with @RequestMapping","body":"<p>I want to learn how to program an API in Java/Spring so I downloaded this example on github: <a href=\"https://github.com/bobbrady/spring-rest-drill-bootless\" rel=\"nofollow noreferrer\">https://github.com/bobbrady/spring-rest-drill-bootless</a>.</p>\n<p>The app seems to run correctly, however every request I send to /api/user returns an error 404.</p>\n<p>For example I'm trying to access the <code>getUsers()</code> method, so from what I understand, in <code>UserApiController</code> there is an annotation <code>@RequestMapping(&quot;/api/user&quot;)</code>. So I'm guessing that's the base URL, getUsers only specifies a method (get) and no mapping, so I assume I'm supposed to send a GET request to <code>http://localhost:8080/api/user</code> with no parameters? But when I do so (in a browser or using Postman), a 404 is returned.</p>\n"},{"tags":["java","java-8"],"comments":[{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":5,"creation_date":1695426111,"post_id":77161124,"comment_id":136027633,"body_markdown":"`Consumer&lt;Mathod&gt; nonStaticConsumer = Mathod::nonStaticMethod;`","body":"<code>Consumer&lt;Mathod&gt; nonStaticConsumer = Mathod::nonStaticMethod;</code>"},{"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"score":4,"creation_date":1695426357,"post_id":77161124,"comment_id":136027654,"body_markdown":"`() -&gt;` syntax is used for defining _lambda expressions_, `::` is used for defining _method references_. Don&#39;t mix them.","body":"<code>() -&gt;</code> syntax is used for defining <i>lambda expressions</i>, <code>::</code> is used for defining <i>method references</i>. Don&#39;t mix them."},{"owner":{"account_id":4695455,"reputation":71,"user_id":3800427,"display_name":"Juicy Jay"},"score":0,"creation_date":1695428858,"post_id":77161124,"comment_id":136027803,"body_markdown":"In case of second approach I still see an error not a statement, I have updated the description above. Please help me understand.","body":"In case of second approach I still see an error not a statement, I have updated the description above. Please help me understand."}],"answers":[{"tags":[],"owner":{"account_id":401843,"reputation":89768,"user_id":768644,"display_name":"rzwitserloot"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1695427593,"creation_date":1695427593,"answer_id":77161187,"question_id":77161124,"body_markdown":"```\r\nConsumer nonStaticConsumer = () -&gt; Mathod::nonStaticMethod;\r\n```\r\n\r\nHere you&#39;ve mixed syntax.\r\n\r\n```\r\nType::someMethod\r\n```\r\n\r\nis a different way of writing `x -&gt; Type.someMethod(x)` where the `x` grows or shrinks to account for the # of arguments required / that `someMethod` has, e.g. if it&#39;s `public void someMethod(int x, String a) {}`, `Type::someMethod` is short for `(x, a) -&gt; Type.someMethod(x, a)`.\r\n\r\nYou&#39;ve _also_ used the lambda-syntax arrow notation, so you&#39;ve combined the two.\r\n\r\n`() -&gt; Mathod::nonStaticMethod` thus says: Define a function. This function takes no arguments, and returns the result of evaluating `Mathod::nonStaticMethod`, which is itself a function (so, a function that takes in no arguments and returns a different function).\r\n\r\nAs with all lambdas (`-&gt;`) and method references (`::`), the compiler must take clues from the context to know which functional interface to adapt the lambda/MR to. In this case, you&#39;re providing a Consumer, and Consumers take in 1 argument and return nothing (`void`), hence, the compiler is taking the context clue of &#39;the thing to the right of the arrow is to be treated as `void`), which, naturally, isn&#39;t a functional interface. That explains the error &#39;void is not a functional Interface&#39;.\r\n\r\nWhat you presumably want is either one of these:\r\n\r\n```\r\nConsumer&lt;Mathod&gt; nonStaticConsumer = m -&gt; m.nonStaticMethod();\r\nConsumer&lt;Mathod&gt; nonStaticConsumer = Mathod::nonStaticMethod();\r\n```\r\n\r\nEither one works fine.\r\n","title":"Consumer Interface in Java","body":"<pre><code>Consumer nonStaticConsumer = () -&gt; Mathod::nonStaticMethod;\n</code></pre>\n<p>Here you've mixed syntax.</p>\n<pre><code>Type::someMethod\n</code></pre>\n<p>is a different way of writing <code>x -&gt; Type.someMethod(x)</code> where the <code>x</code> grows or shrinks to account for the # of arguments required / that <code>someMethod</code> has, e.g. if it's <code>public void someMethod(int x, String a) {}</code>, <code>Type::someMethod</code> is short for <code>(x, a) -&gt; Type.someMethod(x, a)</code>.</p>\n<p>You've <em>also</em> used the lambda-syntax arrow notation, so you've combined the two.</p>\n<p><code>() -&gt; Mathod::nonStaticMethod</code> thus says: Define a function. This function takes no arguments, and returns the result of evaluating <code>Mathod::nonStaticMethod</code>, which is itself a function (so, a function that takes in no arguments and returns a different function).</p>\n<p>As with all lambdas (<code>-&gt;</code>) and method references (<code>::</code>), the compiler must take clues from the context to know which functional interface to adapt the lambda/MR to. In this case, you're providing a Consumer, and Consumers take in 1 argument and return nothing (<code>void</code>), hence, the compiler is taking the context clue of 'the thing to the right of the arrow is to be treated as <code>void</code>), which, naturally, isn't a functional interface. That explains the error 'void is not a functional Interface'.</p>\n<p>What you presumably want is either one of these:</p>\n<pre><code>Consumer&lt;Mathod&gt; nonStaticConsumer = m -&gt; m.nonStaticMethod();\nConsumer&lt;Mathod&gt; nonStaticConsumer = Mathod::nonStaticMethod();\n</code></pre>\n<p>Either one works fine.</p>\n"},{"tags":[],"owner":{"account_id":370994,"reputation":35154,"user_id":719263,"accept_rate":100,"display_name":"Jean-Baptiste Yun&#232;s"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1695797478,"creation_date":1695648580,"answer_id":77173075,"question_id":77161124,"body_markdown":"There are several problems with your code.\r\n\r\n1. missing import\r\n2. `Consumer` is a generic class, you need to instanciate that generic.\r\nWhat could be the type argument of your `Consumer`? As you wanted to represent a call to instance method `nonStaticMethod()` then surely the type must be `Mathod`. So at least write `Consumer&lt;Mathod&gt;...`.\r\n3. When you want to use a function to represent a code to be catched by a functional interface you need either a lambda-expression or a method reference.\r\n\r\n    1. **lambda-expression**. `Consumer&lt;E&gt;` interface has the sole abstract method `void accept(E e)`. So you need a lambda that takes one argument and returns nothing (`void`). Something like `x -&gt; something_returning_void`. As you want to call `nonStaticMethod` you want `x -&gt; x.nonStaticMethod()`.\r\n    2. **method reference**. As `x -&gt; x.nonStaticMethod()` is a lambda that only call a method you can just use `Mathod::nonStaticMethod` (instance method reference).\r\n\r\n\r\nFull program could be (with calls):\r\n```\r\nimport java.util.function.*;\r\n\r\npublic class Mathod {\r\n\r\n  public static void taskDifferentiator() {\r\n    System.out.println(&quot;Static Method...&quot;);\r\n  }\r\n\r\n  public void nonStaticMethod() {\r\n    System.out.println(&quot;Non static method is called...&quot;);\r\n  }\r\n\r\n  public static void main(String args[]) {\r\n\r\n    Mathod m = new Mathod();\r\n\r\n    Consumer&lt;Mathod&gt; nonStaticConsumer1 = x -&gt; x.nonStaticMethod();\r\n    nonStaticConsumer1.accept(m);\r\n    Consumer&lt;Mathod&gt; nonStaticConsumer = Mathod::nonStaticMethod;\r\n    nonStaticConsumer.accept(m);\r\n    System.out.println(&quot;End of the program..&quot;);\r\n  }\r\n}\r\n```","title":"Consumer Interface in Java","body":"<p>There are several problems with your code.</p>\n<ol>\n<li><p>missing import</p>\n</li>\n<li><p><code>Consumer</code> is a generic class, you need to instanciate that generic.\nWhat could be the type argument of your <code>Consumer</code>? As you wanted to represent a call to instance method <code>nonStaticMethod()</code> then surely the type must be <code>Mathod</code>. So at least write <code>Consumer&lt;Mathod&gt;...</code>.</p>\n</li>\n<li><p>When you want to use a function to represent a code to be catched by a functional interface you need either a lambda-expression or a method reference.</p>\n<ol>\n<li><strong>lambda-expression</strong>. <code>Consumer&lt;E&gt;</code> interface has the sole abstract method <code>void accept(E e)</code>. So you need a lambda that takes one argument and returns nothing (<code>void</code>). Something like <code>x -&gt; something_returning_void</code>. As you want to call <code>nonStaticMethod</code> you want <code>x -&gt; x.nonStaticMethod()</code>.</li>\n<li><strong>method reference</strong>. As <code>x -&gt; x.nonStaticMethod()</code> is a lambda that only call a method you can just use <code>Mathod::nonStaticMethod</code> (instance method reference).</li>\n</ol>\n</li>\n</ol>\n<p>Full program could be (with calls):</p>\n<pre><code>import java.util.function.*;\n\npublic class Mathod {\n\n  public static void taskDifferentiator() {\n    System.out.println(&quot;Static Method...&quot;);\n  }\n\n  public void nonStaticMethod() {\n    System.out.println(&quot;Non static method is called...&quot;);\n  }\n\n  public static void main(String args[]) {\n\n    Mathod m = new Mathod();\n\n    Consumer&lt;Mathod&gt; nonStaticConsumer1 = x -&gt; x.nonStaticMethod();\n    nonStaticConsumer1.accept(m);\n    Consumer&lt;Mathod&gt; nonStaticConsumer = Mathod::nonStaticMethod;\n    nonStaticConsumer.accept(m);\n    System.out.println(&quot;End of the program..&quot;);\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":4695455,"reputation":71,"user_id":3800427,"display_name":"Juicy Jay"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":78,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1695797614,"creation_date":1695425914,"question_id":77161124,"body_markdown":"I am getting an warning at  `Mathod::nonStaticMethod`, &quot;`void is not a functional Interface`.\r\n\r\n`Mathod::nonStaticMethod;` shouldn&#39;t this work, is this not a method reference?\r\n\r\n```\r\npublic class Mathod {\r\n  public static void taskDifferentiator() {\r\n    System.out.println(&quot;Static Method...&quot;);\r\n  }\r\n  public void nonStaticMethod() {\r\n    System.out.println(&quot;Non static method is called...&quot;);\r\n  }\r\n  public static void main(String args[]) {\r\n    Consumer nonStaticConsumer = () -&gt; Mathod::nonStaticMethod;\r\n    System.out.println(&quot;End of the program..&quot;);\r\n  }\r\n}\r\n```\r\n\r\nIf I change the program below to, what&#39;s the issue with the line below `mathod::nonStaticMethod;`\r\n \r\n```\r\npublic class Mathod {\r\n  public void nonStaticMethod() {\r\n    System.out.println(&quot;Non static method is called...&quot;);\r\n  }\r\n  public static void main(String args[]) {\r\n    Mathod mathod = new Mathod();\r\n    mathod::nonStaticMethod; Error: Not a statement\r\n    System.out.println(&quot;End of the program..&quot;);\r\n  }\r\n}\r\n```\r\n\r\nSo  `Mathod mathod = new Mathod();\r\nmathod.nonStaticMethod();`\r\n and\r\n `mathod::nonstaticMethod;` are not the same. Am I correct?","title":"Consumer Interface in Java","body":"<p>I am getting an warning at  <code>Mathod::nonStaticMethod</code>, &quot;<code>void is not a functional Interface</code>.</p>\n<p><code>Mathod::nonStaticMethod;</code> shouldn't this work, is this not a method reference?</p>\n<pre><code>public class Mathod {\n  public static void taskDifferentiator() {\n    System.out.println(&quot;Static Method...&quot;);\n  }\n  public void nonStaticMethod() {\n    System.out.println(&quot;Non static method is called...&quot;);\n  }\n  public static void main(String args[]) {\n    Consumer nonStaticConsumer = () -&gt; Mathod::nonStaticMethod;\n    System.out.println(&quot;End of the program..&quot;);\n  }\n}\n</code></pre>\n<p>If I change the program below to, what's the issue with the line below <code>mathod::nonStaticMethod;</code></p>\n<pre><code>public class Mathod {\n  public void nonStaticMethod() {\n    System.out.println(&quot;Non static method is called...&quot;);\n  }\n  public static void main(String args[]) {\n    Mathod mathod = new Mathod();\n    mathod::nonStaticMethod; Error: Not a statement\n    System.out.println(&quot;End of the program..&quot;);\n  }\n}\n</code></pre>\n<p>So  <code>Mathod mathod = new Mathod(); mathod.nonStaticMethod();</code>\nand\n<code>mathod::nonstaticMethod;</code> are not the same. Am I correct?</p>\n"},{"tags":["java","hibernate","spring","maven-2"],"answers":[{"tags":[],"owner":{"account_id":49860,"reputation":10595,"user_id":148608,"display_name":"Espen"},"down_vote_count":1,"up_vote_count":3,"is_accepted":true,"score":2,"last_activity_date":1272886971,"creation_date":1272886971,"answer_id":2757759,"question_id":2757721,"body_markdown":"You should rather use Maven to select which Spring properties file to use depending on which environment you&#39;re building for.\r\n\r\nWhen you&#39;re testing in your IDE, you should just start the Spring container from the test without using Maven for anything else than managing your dependencies.","title":"PropertyPlaceholderConfigurer vs Filters -- Spring Beans","body":"<p>You should rather use Maven to select which Spring properties file to use depending on which environment you're building for.</p>\n\n<p>When you're testing in your IDE, you should just start the Spring container from the test without using Maven for anything else than managing your dependencies.</p>\n"},{"tags":[],"owner":{"account_id":26957,"reputation":564361,"user_id":70604,"display_name":"Pascal Thivent"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1272999737,"creation_date":1272999737,"answer_id":2768182,"question_id":2757721,"body_markdown":"For the record, here is what the author of the blog series the OP is following wrote in  [this comment][1]:\r\n\r\n&gt; I used to be a big fan of Spring’s\r\n&gt; `PropertyPlaceholderConfigurer` but ever\r\n&gt; since I started using maven I don’t\r\n&gt; find it as useful as maven’s filters,\r\n&gt; using either a filters file as\r\n&gt; explained here, or by having multiple\r\n&gt; profiles in the pom for the different\r\n&gt; deployment layers with each profile\r\n&gt; specifying the properties.\r\n&gt; \r\n&gt; The biggest gripe I have with the\r\n&gt; `PropertyPlaceholderConfigurer` is that\r\n&gt; you can only have one\r\n&gt; `PropertyPlaceholderConfigurer` bean.\r\n&gt; And it’s not well documented.\r\n&gt; \r\n&gt; With maven’s filter files you can have\r\n&gt; as many as you like.\r\n&gt; \r\n&gt; The other reason I prefer maven’s\r\n&gt; filters is that with them you can do a\r\n&gt; ‘mvn package’ and then poke around in\r\n&gt; the target directory and eyeball the\r\n&gt; filtered config files and see what it\r\n&gt; did. With Spring’s\r\n&gt; `PropertyPlaceholderConfigurer` you\r\n&gt; don’t find out what’s been substituted\r\n&gt; until the app is started.\r\n\r\nI second this opinion and prefer the filter approach over using the `PropertyPlaceholderConfigurer` and the Antrun plugin to copy say `test.properties` into `application.properties` when running my tests. And using filtered resources is well supported by all major IDEs (Eclipse, IntelliJ, NetBeans) so I don&#39;t see why I should not use it.\r\n\r\n  [1]: http://www.mysticcoders.com/blog/2009/03/09/5-days-of-wicket-day-1/#comment-1313","title":"PropertyPlaceholderConfigurer vs Filters -- Spring Beans","body":"<p>For the record, here is what the author of the blog series the OP is following wrote in  <a href=\"http://www.mysticcoders.com/blog/2009/03/09/5-days-of-wicket-day-1/#comment-1313\" rel=\"nofollow noreferrer\">this comment</a>:</p>\n\n<blockquote>\n  <p>I used to be a big fan of Spring’s\n  <code>PropertyPlaceholderConfigurer</code> but ever\n  since I started using maven I don’t\n  find it as useful as maven’s filters,\n  using either a filters file as\n  explained here, or by having multiple\n  profiles in the pom for the different\n  deployment layers with each profile\n  specifying the properties.</p>\n  \n  <p>The biggest gripe I have with the\n  <code>PropertyPlaceholderConfigurer</code> is that\n  you can only have one\n  <code>PropertyPlaceholderConfigurer</code> bean.\n  And it’s not well documented.</p>\n  \n  <p>With maven’s filter files you can have\n  as many as you like.</p>\n  \n  <p>The other reason I prefer maven’s\n  filters is that with them you can do a\n  ‘mvn package’ and then poke around in\n  the target directory and eyeball the\n  filtered config files and see what it\n  did. With Spring’s\n  <code>PropertyPlaceholderConfigurer</code> you\n  don’t find out what’s been substituted\n  until the app is started.</p>\n</blockquote>\n\n<p>I second this opinion and prefer the filter approach over using the <code>PropertyPlaceholderConfigurer</code> and the Antrun plugin to copy say <code>test.properties</code> into <code>application.properties</code> when running my tests. And using filtered resources is well supported by all major IDEs (Eclipse, IntelliJ, NetBeans) so I don't see why I should not use it.</p>\n"},{"tags":[],"owner":{"account_id":29391455,"reputation":1,"user_id":22519707,"display_name":"Fabiniao"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695796697,"creation_date":1695561266,"answer_id":77167249,"question_id":2757721,"body_markdown":"If you use this code:\r\n\r\n```xml\r\n&lt;context:property-placeholder&gt;&lt;/context:property-placeholder&gt;\r\n```\r\n\r\nBefore this code:\r\n\r\n```xml\r\n&lt;context:property-placeholder location=&quot;classpath:jdbc.properties&quot;\r\n&lt;/context:property-placeholder&gt;\r\n```\r\n\r\nYou will get:\r\n\r\n```\r\nCaused by: java.lang.IllegalArgumentException: Could not resolve\r\nplaceholder &#39;jdbc.driver&#39; in value &quot;${jdbc.driver}&quot;\r\n```\r\n\r\nThe statement include you use: \r\n\r\n```xml\r\n&lt;import &gt;&lt;/import&gt;\r\n```\r\n\r\nDelete it:\r\n\r\n```xml\r\n&lt;context:property-placeholder&gt;&lt;/context:property-placeholder&gt;\r\n```\r\n\r\n","title":"PropertyPlaceholderConfigurer vs Filters -- Spring Beans","body":"<p>If you use this code:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;context:property-placeholder&gt;&lt;/context:property-placeholder&gt;\n</code></pre>\n<p>Before this code:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;context:property-placeholder location=&quot;classpath:jdbc.properties&quot;\n&lt;/context:property-placeholder&gt;\n</code></pre>\n<p>You will get:</p>\n<pre><code>Caused by: java.lang.IllegalArgumentException: Could not resolve\nplaceholder 'jdbc.driver' in value &quot;${jdbc.driver}&quot;\n</code></pre>\n<p>The statement include you use:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;import &gt;&lt;/import&gt;\n</code></pre>\n<p>Delete it:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;context:property-placeholder&gt;&lt;/context:property-placeholder&gt;\n</code></pre>\n"}],"owner":{"account_id":115373,"reputation":2581,"user_id":302988,"accept_rate":91,"display_name":"John"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3512,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":2757759,"answer_count":3,"score":2,"last_activity_date":1695796697,"creation_date":1272886610,"question_id":2757721,"body_markdown":"I&#39;ve got a question regarding the difference between PropertyPlaceholderConfigurer (org.springframework.beans.factory.config.PropertyPlaceholderConfigurer) and normal filters defined in my pom.xml.\r\n\r\nI&#39;ve been looking at examples, and it seems that even though filters are defined and marked to be active by default in the pom.xml they still make use of PropertyPlaceholderConfigurer in Spring&#39;s applicationContext.xml.\r\n\r\nThis means that the pom.xml has a reference to a filter-LOCAL.properties while applicationContext.xml has a reference to application.properties and they both contain the same settings.\r\n\r\nWhy is that? Is that how it is supposed to be done? I&#39;m able to run the goal mvn jetty:run without the application.properties present, but if I add settings to the application.properties that differ from the filter-LOCAL.properties they don&#39;t seem to override.\r\n\r\nHere&#39;s an example of what I mean:\r\n\r\n**pom.xml**\r\n&lt;pre&gt;\r\n    &amp;lt;profiles&gt;  \r\n\t\t&amp;lt;profile&gt;  \r\n\t\t\t&amp;lt;id&gt;LOCAL&lt;/id&gt;  \r\n\t\t\t&amp;lt;activation&gt;  \r\n\t\t\t\t&amp;lt;activeByDefault&gt;true&lt;/activeByDefault&gt;  \r\n\t\t\t&amp;lt;/activation&gt;   \r\n\t\t\t&amp;lt;properties&gt;  \r\n\t\t\t\t&amp;lt;env&gt;LOCAL&lt;/env&gt;  \r\n\t\t\t&amp;lt;/properties&gt;  \r\n\t\t&amp;lt;/profile&gt;  \r\n\t&amp;lt;/profiles&gt;\r\n&lt;/pre&gt;\r\n\r\n**applicationContext.xml**\r\n&lt;pre&gt;\r\n    &amp;lt;bean id=&quot;propertyConfigurer&quot; class=&quot;org.springframework.beans.factory.config.PropertyPlaceholderConfigurer&quot;&gt;\r\n        &amp;lt;property name=&quot;locations&quot;&gt;\r\n            &amp;lt;list&gt;\r\n                &amp;lt;value&gt;classpath:application.properties&lt;/value&gt;\r\n            &amp;lt;/list&gt;\r\n        &amp;lt;/property&gt;\r\n        &amp;lt;property name=&quot;ignoreResourceNotFound&quot; value=&quot;true&quot;/&gt;\r\n    &amp;lt;/bean&gt;\r\n    \r\n    &amp;lt;bean id=&quot;dataSource&quot; class=&quot;org.apache.commons.dbcp.BasicDataSource&quot; destroy-method=&quot;close&quot;&gt;\r\n        &amp;lt;property name=&quot;driverClassName&quot; value=&quot;${jdbc.driver}&quot;/&gt;\r\n        &amp;lt;property name=&quot;url&quot; value=&quot;${jdbc.url}&quot;/&gt;\r\n        &amp;lt;property name=&quot;username&quot; value=&quot;${jdbc.username}&quot;/&gt;\r\n        &amp;lt;property name=&quot;password&quot; value=&quot;${jdbc.password}&quot;/&gt;\r\n    &amp;lt;/bean&gt;\r\n&lt;/pre&gt;\r\n\r\n**an example of the content of application.properties and filters-LOCAL.properties**\r\n&lt;pre&gt;\r\njdbc.driver=org.postgresql.Driver\r\njdbc.url=jdbc:postgresql://localhost/shoutbox_dev\r\njdbc.username=tester\r\njdbc.password=tester\r\n&lt;/pre&gt;\r\n\r\nCan I remove the propertyConfigurer from the applicationContext, create a PROD filter and disregard the application.properties file, or will that give me issues when deploying to the production server?","title":"PropertyPlaceholderConfigurer vs Filters -- Spring Beans","body":"<p>I've got a question regarding the difference between PropertyPlaceholderConfigurer (org.springframework.beans.factory.config.PropertyPlaceholderConfigurer) and normal filters defined in my pom.xml.</p>\n\n<p>I've been looking at examples, and it seems that even though filters are defined and marked to be active by default in the pom.xml they still make use of PropertyPlaceholderConfigurer in Spring's applicationContext.xml.</p>\n\n<p>This means that the pom.xml has a reference to a filter-LOCAL.properties while applicationContext.xml has a reference to application.properties and they both contain the same settings.</p>\n\n<p>Why is that? Is that how it is supposed to be done? I'm able to run the goal mvn jetty:run without the application.properties present, but if I add settings to the application.properties that differ from the filter-LOCAL.properties they don't seem to override.</p>\n\n<p>Here's an example of what I mean:</p>\n\n<p><strong>pom.xml</strong></p>\n\n<pre>\n    &lt;profiles>  \n        &lt;profile>  \n            &lt;id>LOCAL  \n            &lt;activation>  \n                &lt;activeByDefault>true  \n            &lt;/activation>   \n            &lt;properties>  \n                &lt;env>LOCAL  \n            &lt;/properties>  \n        &lt;/profile>  \n    &lt;/profiles>\n</pre>\n\n<p><strong>applicationContext.xml</strong></p>\n\n<pre>\n    &lt;bean id=\"propertyConfigurer\" class=\"org.springframework.beans.factory.config.PropertyPlaceholderConfigurer\">\n        &lt;property name=\"locations\">\n            &lt;list>\n                &lt;value>classpath:application.properties\n            &lt;/list>\n        &lt;/property>\n        &lt;property name=\"ignoreResourceNotFound\" value=\"true\"/>\n    &lt;/bean>\n\n    &lt;bean id=\"dataSource\" class=\"org.apache.commons.dbcp.BasicDataSource\" destroy-method=\"close\">\n        &lt;property name=\"driverClassName\" value=\"${jdbc.driver}\"/>\n        &lt;property name=\"url\" value=\"${jdbc.url}\"/>\n        &lt;property name=\"username\" value=\"${jdbc.username}\"/>\n        &lt;property name=\"password\" value=\"${jdbc.password}\"/>\n    &lt;/bean>\n</pre>\n\n<p><strong>an example of the content of application.properties and filters-LOCAL.properties</strong></p>\n\n<pre>\njdbc.driver=org.postgresql.Driver\njdbc.url=jdbc:postgresql://localhost/shoutbox_dev\njdbc.username=tester\njdbc.password=tester\n</pre>\n\n<p>Can I remove the propertyConfigurer from the applicationContext, create a PROD filter and disregard the application.properties file, or will that give me issues when deploying to the production server?</p>\n"},{"tags":["java","spring","encoding","spring-restcontroller"],"comments":[{"owner":{"account_id":29176687,"reputation":322,"user_id":22351796,"display_name":"Karsten"},"score":1,"creation_date":1695639090,"post_id":77171864,"comment_id":136046639,"body_markdown":"You say &#39;XML string&#39;. Generally putting XML into strings isn&#39;t a good idea as it results in encoding problems sooner or later. Use byte arrays instead. But I think your problem here is that your XML document is already serialized using UTF-8. The framework will return it as it is. Either let the framework do the encooding using JAXB or serialize it for yourself using the desired encoding.","body":"You say &#39;XML string&#39;. Generally putting XML into strings isn&#39;t a good idea as it results in encoding problems sooner or later. Use byte arrays instead. But I think your problem here is that your XML document is already serialized using UTF-8. The framework will return it as it is. Either let the framework do the encooding using JAXB or serialize it for yourself using the desired encoding."}],"answers":[{"tags":[],"owner":{"account_id":1956083,"reputation":4432,"user_id":1759063,"accept_rate":53,"display_name":"Eljah"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1695796584,"creation_date":1695796584,"answer_id":77185133,"question_id":77171864,"body_markdown":"It was fount, that XML was forcibly recoded to windows-1251 on the accepting side:\r\n\r\n    @Override\r\n    public T handleResponse(HttpResponse response) throws IOException {\r\n        StatusLine statusLine = response.getStatusLine();\r\n        if (statusLine.getStatusCode() != 200) {\r\n            LOGGER.error(&quot;Status code: &quot; + statusLine.getStatusCode());\r\n            throw new HttpResponseException(statusLine.getStatusCode(), statusLine.getReasonPhrase());\r\n        }\r\n\r\n        HttpEntity entity = response.getEntity();\r\n        if (entity == null) {\r\n            throw new ClientProtocolException(&quot;Response contains no content&quot;);\r\n        }\r\n\r\n        // only for logging\r\n        String xml = IOUtils.toString(entity.getContent(), &quot;windows-1251&quot;);\r\n        entity.getContent().close();\r\n        if (responseClass == GetUIProvidersResponse.class) {\r\n            LOGGER.info(&quot;Logging for getUIProviders is disabled&quot;);\r\n        } else {\r\n            LOGGER.info(xml);\r\n        }\r\n\r\n        return xmlMapper.readValue(xml, responseClass);\r\n    }\r\n\r\nfor making response to be encoded in true windows-1251 I had to update `DispatcherServlet` extension:\r\n\r\n\r\n\r\n\r\n    public class LoggableDispatcherServlet extends DispatcherServlet {\r\n        private static final Logger logger = LoggerFactory.getLogger(LoggableDispatcherServlet.class);\r\n    \r\n        public LoggableDispatcherServlet(WebApplicationContext webApplicationContext) {\r\n            super(webApplicationContext);\r\n        }\r\n    \r\n        @Override\r\n        protected void doDispatch(HttpServletRequest request, HttpServletResponse response) throws Exception {\r\n            if (!(request instanceof ContentCachingRequestWrapper)) {\r\n                request = new ContentCachingRequestWrapper(request);\r\n            }\r\n            if (!(response instanceof ContentCachingResponseWrapper)) {\r\n                response = new ContentCachingResponseWrapper(response);\r\n            }\r\n            HandlerExecutionChain handler = getHandler(request);\r\n    \r\n            try {\r\n                super.doDispatch(request, response);\r\n            } finally {\r\n                log(request, response, handler);\r\n                updateResponse(response);\r\n            }\r\n        }\r\n    \r\n    ....\r\n    \r\n        private void updateResponse(HttpServletResponse response) throws IOException {\r\n            ContentCachingResponseWrapper responseWrapper =\r\n                    WebUtils.getNativeResponse(response, ContentCachingResponseWrapper.class);\r\n    \r\n            String encoding = responseWrapper.getCharacterEncoding();\r\n            if (encoding.equals(&quot;windows-1251&quot;)) {\r\n                String responseString = new String(responseWrapper.getContentAsByteArray(),&quot;UTF-8&quot;);\r\n                responseWrapper.resetBuffer();\r\n                responseWrapper.getOutputStream().write(responseString.getBytes(&quot;windows-1251&quot;));\r\n                responseWrapper.copyBodyToResponse();\r\n            } else {\r\n                responseWrapper.copyBodyToResponse();\r\n            }\r\n        }\r\n    \r\n       ...\r\n    }","title":"How to force @RestController to encode body to specific encoding?","body":"<p>It was fount, that XML was forcibly recoded to windows-1251 on the accepting side:</p>\n<pre><code>@Override\npublic T handleResponse(HttpResponse response) throws IOException {\n    StatusLine statusLine = response.getStatusLine();\n    if (statusLine.getStatusCode() != 200) {\n        LOGGER.error(&quot;Status code: &quot; + statusLine.getStatusCode());\n        throw new HttpResponseException(statusLine.getStatusCode(), statusLine.getReasonPhrase());\n    }\n\n    HttpEntity entity = response.getEntity();\n    if (entity == null) {\n        throw new ClientProtocolException(&quot;Response contains no content&quot;);\n    }\n\n    // only for logging\n    String xml = IOUtils.toString(entity.getContent(), &quot;windows-1251&quot;);\n    entity.getContent().close();\n    if (responseClass == GetUIProvidersResponse.class) {\n        LOGGER.info(&quot;Logging for getUIProviders is disabled&quot;);\n    } else {\n        LOGGER.info(xml);\n    }\n\n    return xmlMapper.readValue(xml, responseClass);\n}\n</code></pre>\n<p>for making response to be encoded in true windows-1251 I had to update <code>DispatcherServlet</code> extension:</p>\n<pre><code>public class LoggableDispatcherServlet extends DispatcherServlet {\n    private static final Logger logger = LoggerFactory.getLogger(LoggableDispatcherServlet.class);\n\n    public LoggableDispatcherServlet(WebApplicationContext webApplicationContext) {\n        super(webApplicationContext);\n    }\n\n    @Override\n    protected void doDispatch(HttpServletRequest request, HttpServletResponse response) throws Exception {\n        if (!(request instanceof ContentCachingRequestWrapper)) {\n            request = new ContentCachingRequestWrapper(request);\n        }\n        if (!(response instanceof ContentCachingResponseWrapper)) {\n            response = new ContentCachingResponseWrapper(response);\n        }\n        HandlerExecutionChain handler = getHandler(request);\n\n        try {\n            super.doDispatch(request, response);\n        } finally {\n            log(request, response, handler);\n            updateResponse(response);\n        }\n    }\n\n....\n\n    private void updateResponse(HttpServletResponse response) throws IOException {\n        ContentCachingResponseWrapper responseWrapper =\n                WebUtils.getNativeResponse(response, ContentCachingResponseWrapper.class);\n\n        String encoding = responseWrapper.getCharacterEncoding();\n        if (encoding.equals(&quot;windows-1251&quot;)) {\n            String responseString = new String(responseWrapper.getContentAsByteArray(),&quot;UTF-8&quot;);\n            responseWrapper.resetBuffer();\n            responseWrapper.getOutputStream().write(responseString.getBytes(&quot;windows-1251&quot;));\n            responseWrapper.copyBodyToResponse();\n        } else {\n            responseWrapper.copyBodyToResponse();\n        }\n    }\n\n   ...\n}\n</code></pre>\n"}],"owner":{"account_id":1956083,"reputation":4432,"user_id":1759063,"accept_rate":53,"display_name":"Eljah"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77185133,"answer_count":1,"score":0,"last_activity_date":1695796584,"creation_date":1695637730,"question_id":77171864,"body_markdown":"I have a controller with `produces` set to\r\n\r\n    @RestController\r\n    @RequestMapping(consumes = MediaType.APPLICATION_XML_VALUE, produces = MediaType.APPLICATION_XML_VALUE) \r\n\r\nover RestController\r\n\r\n    @RequestMapping(value = &quot;/api/&quot;, method = RequestMethod.POST, produces = &quot;application/xml;charset=windows-1251&quot;)\r\n\r\nWith POSTman I get response like `&lt;tag field=&quot;РђР&#177;РѕРЅР&#181;РЅС‚ РЅР&#176;Р№РґР&#181;РЅ&quot;/&gt;` which looks like UTF-8 bytes being decoded to windows-1251 and then flushed to the HTTP response. \r\n\r\nBut in fact, I need just my UTF-8 String with the same characters, but just in windows-1251 encoding. What I should change in the body to make it flushed with the encoding I expect, not only changing the headers of the HTTP response?\r\n\r\n    \r\n\r\n","title":"How to force @RestController to encode body to specific encoding?","body":"<p>I have a controller with <code>produces</code> set to</p>\n<pre><code>@RestController\n@RequestMapping(consumes = MediaType.APPLICATION_XML_VALUE, produces = MediaType.APPLICATION_XML_VALUE) \n</code></pre>\n<p>over RestController</p>\n<pre><code>@RequestMapping(value = &quot;/api/&quot;, method = RequestMethod.POST, produces = &quot;application/xml;charset=windows-1251&quot;)\n</code></pre>\n<p>With POSTman I get response like <code>&lt;tag field=&quot;РђР±РѕРЅРµРЅС‚ РЅР°Р№РґРµРЅ&quot;/&gt;</code> which looks like UTF-8 bytes being decoded to windows-1251 and then flushed to the HTTP response.</p>\n<p>But in fact, I need just my UTF-8 String with the same characters, but just in windows-1251 encoding. What I should change in the body to make it flushed with the encoding I expect, not only changing the headers of the HTTP response?</p>\n"},{"tags":["java","maven","model-view-controller"],"comments":[{"owner":{"account_id":12695174,"reputation":45171,"user_id":9223839,"display_name":"Joakim Danielson"},"score":0,"creation_date":1567166533,"post_id":57726196,"comment_id":101892804,"body_markdown":"&quot;.lsp4xml\\cache\\http&quot; looks weird it should be &quot;.m2\\repository\\&quot; instead in your home directory","body":"&quot;.lsp4xml\\cache\\http&quot; looks weird it should be &quot;.m2\\repository\\&quot; instead in your home directory"},{"owner":{"account_id":15730864,"reputation":301,"user_id":11382435,"display_name":"digvijay bhandari"},"score":0,"creation_date":1567169188,"post_id":57726196,"comment_id":101894100,"body_markdown":"I agree, but its just like that, I dont know where its taking this path","body":"I agree, but its just like that, I dont know where its taking this path"},{"owner":{"account_id":15730864,"reputation":301,"user_id":11382435,"display_name":"digvijay bhandari"},"score":0,"creation_date":1567193537,"post_id":57726196,"comment_id":101904654,"body_markdown":"I tried the similar setup in my personal home laptop, having admin right, this folder &quot;C:\\Users\\Myacc\\.lsp4xml\\cache\\http\\maven.apache.org\\xsd&quot; was created already having xsd in it  ---and the code is working fine as well in this pc","body":"I tried the similar setup in my personal home laptop, having admin right, this folder &quot;C:\\Users\\Myacc\\.lsp4xml\\cache\\http\\maven.apache.org\\xsd&quot; was created already having xsd in it  ---and the code is working fine as well in this pc"},{"owner":{"account_id":15730864,"reputation":301,"user_id":11382435,"display_name":"digvijay bhandari"},"score":0,"creation_date":1567404359,"post_id":57726196,"comment_id":101940926,"body_markdown":"tried to copy this folder along with xsd in office pc, but no luck, still showing same error","body":"tried to copy this folder along with xsd in office pc, but no luck, still showing same error"}],"answers":[{"tags":[],"owner":{"account_id":184310,"reputation":140,"user_id":420269,"display_name":"Greg"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1567457690,"creation_date":1567457078,"answer_id":57762532,"question_id":57726196,"body_markdown":"For what it&#39;s worth I see same error (firewall related?) which I think is due to the XML parser LSP4XML - rather than a Maven issue. The useSystemProxies suggestion here worked for me: https://github.com/redhat-developer/vscode-xml/issues/134","title":"Error while downloading &#39;http://maven.apache.org/xsd/maven-4.0.0.xsd&#39; to C:\\Users\\Myacc\\.lsp4xml\\cache\\http\\maven.apache.org\\xsd\\maven-4.0.0.xsd.XML","body":"<p>For what it's worth I see same error (firewall related?) which I think is due to the XML parser LSP4XML - rather than a Maven issue. The useSystemProxies suggestion here worked for me: <a href=\"https://github.com/redhat-developer/vscode-xml/issues/134\" rel=\"nofollow noreferrer\">https://github.com/redhat-developer/vscode-xml/issues/134</a></p>\n"},{"tags":[],"owner":{"account_id":6862021,"reputation":103,"user_id":5275654,"display_name":"Sudhir"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1603220712,"creation_date":1603220712,"answer_id":64451776,"question_id":57726196,"body_markdown":"If anyone is still following for the solution.\r\n\r\nIssue: Admin Rights\r\n\r\nSolution: Run the eclipse in admin mode in Windows and issue will be resolved. ","title":"Error while downloading &#39;http://maven.apache.org/xsd/maven-4.0.0.xsd&#39; to C:\\Users\\Myacc\\.lsp4xml\\cache\\http\\maven.apache.org\\xsd\\maven-4.0.0.xsd.XML","body":"<p>If anyone is still following for the solution.</p>\n<p>Issue: Admin Rights</p>\n<p>Solution: Run the eclipse in admin mode in Windows and issue will be resolved.</p>\n"},{"tags":[],"owner":{"account_id":19743604,"reputation":51,"user_id":14456546,"display_name":"Chris Bahonda"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1603456387,"creation_date":1603456387,"answer_id":64500081,"question_id":57726196,"body_markdown":"Running eclipse as admin solves this issue pretty well","title":"Error while downloading &#39;http://maven.apache.org/xsd/maven-4.0.0.xsd&#39; to C:\\Users\\Myacc\\.lsp4xml\\cache\\http\\maven.apache.org\\xsd\\maven-4.0.0.xsd.XML","body":"<p>Running eclipse as admin solves this issue pretty well</p>\n"},{"tags":[],"owner":{"account_id":2655308,"reputation":519,"user_id":2296137,"accept_rate":0,"display_name":"AmitG"},"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1608145503,"creation_date":1608145503,"answer_id":65329604,"question_id":57726196,"body_markdown":"For the same problem, I found this solution.\r\nchanged http to https in below line in pom file. worked in eclipse. Not sure why.\r\n\r\n    &lt;project xmlns=&quot;https://maven.apache.org...","title":"Error while downloading &#39;http://maven.apache.org/xsd/maven-4.0.0.xsd&#39; to C:\\Users\\Myacc\\.lsp4xml\\cache\\http\\maven.apache.org\\xsd\\maven-4.0.0.xsd.XML","body":"<p>For the same problem, I found this solution.\nchanged http to https in below line in pom file. worked in eclipse. Not sure why.</p>\n<pre><code>&lt;project xmlns=&quot;https://maven.apache.org...\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5905702,"reputation":47,"user_id":4647581,"display_name":"osman akbacı"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1611502024,"creation_date":1611489641,"answer_id":65870282,"question_id":57726196,"body_markdown":"It is related to Admin rights. You can follow one of solutions to fix problem:\r\n\r\n 1. Open Eclipse as a administrator\r\n 2. You can replace https to http on pom.xml \r\n    `*https:*//maven.apache.org/xsd/maven-4.0.0.xsd`   =&gt; `**http:**//maven.apache.org/xsd/maven-4.0.0.xsd`\r\n\r\n\r\n","title":"Error while downloading &#39;http://maven.apache.org/xsd/maven-4.0.0.xsd&#39; to C:\\Users\\Myacc\\.lsp4xml\\cache\\http\\maven.apache.org\\xsd\\maven-4.0.0.xsd.XML","body":"<p>It is related to Admin rights. You can follow one of solutions to fix problem:</p>\n<ol>\n<li>Open Eclipse as a administrator</li>\n<li>You can replace https to http on pom.xml\n<code>*https:*//maven.apache.org/xsd/maven-4.0.0.xsd</code>   =&gt; <code>**http:**//maven.apache.org/xsd/maven-4.0.0.xsd</code></li>\n</ol>\n"},{"tags":[],"owner":{"account_id":1999775,"reputation":111,"user_id":1791101,"display_name":"Yogesh Gandhi"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1621958046,"creation_date":1621958046,"answer_id":67691511,"question_id":57726196,"body_markdown":"Changing https to http made it work\r\nNote the difference in xsi:schemLocation\r\n\r\nIncorrect:\r\n````\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n\txmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;https://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n````\r\nCorrect:\r\n````\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n\txmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n````","title":"Error while downloading &#39;http://maven.apache.org/xsd/maven-4.0.0.xsd&#39; to C:\\Users\\Myacc\\.lsp4xml\\cache\\http\\maven.apache.org\\xsd\\maven-4.0.0.xsd.XML","body":"<p>Changing https to http made it work\nNote the difference in xsi:schemLocation</p>\n<p>Incorrect:</p>\n<pre><code>&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;https://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n</code></pre>\n<p>Correct:</p>\n<pre><code>&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":27315455,"reputation":1,"user_id":20830007,"display_name":"Nguyễn Tuấn Hưng"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695795810,"creation_date":1695283422,"answer_id":77148293,"question_id":57726196,"body_markdown":"If you have tried many ways to fix the error but failed, and you are using corporate network, a possible reason could be your company has blocked the download of Maven.","title":"Error while downloading &#39;http://maven.apache.org/xsd/maven-4.0.0.xsd&#39; to C:\\Users\\Myacc\\.lsp4xml\\cache\\http\\maven.apache.org\\xsd\\maven-4.0.0.xsd.XML","body":"<p>If you have tried many ways to fix the error but failed, and you are using corporate network, a possible reason could be your company has blocked the download of Maven.</p>\n"}],"owner":{"account_id":15730864,"reputation":301,"user_id":11382435,"display_name":"digvijay bhandari"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":59195,"favorite_count":0,"down_vote_count":0,"up_vote_count":19,"answer_count":7,"score":19,"last_activity_date":1695795810,"creation_date":1567165734,"question_id":57726196,"body_markdown":"I am new to maven, \r\nI have installed apache-maven-3.6.1 \r\nusing it via visual studio code\r\nFirst creating workspace was throwing error due to maven was behind proxy\r\nI updated setting.xml in maven, added proxy and workscpace was created by vsc\r\n\r\nIts a fresh workspace, but the pom.xml is throwing error in first project tag as mentioned in title \r\n\r\n\r\n\r\n\r\nI searched and added the same settings.xml file in C:\\Users\\Myacc\\.m2 folder and checked\r\n\r\nI deleted the m2 folder and checked\r\n\r\nI executed mvn clean package in project directory\r\n\r\nnone of it worked\r\n\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n  xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt; \r\n\r\nthis the xml tag which is throwing error\r\n\r\nFrom browser I am able to access\r\nhttp://maven.apache.org/xsd/maven-4.0.0.xsd\r\n\r\nI could not find .lsp4xml\\cache\\http\\maven.apache.org , thought of keeping the xsd manually","title":"Error while downloading &#39;http://maven.apache.org/xsd/maven-4.0.0.xsd&#39; to C:\\Users\\Myacc\\.lsp4xml\\cache\\http\\maven.apache.org\\xsd\\maven-4.0.0.xsd.XML","body":"<p>I am new to maven, \nI have installed apache-maven-3.6.1 \nusing it via visual studio code\nFirst creating workspace was throwing error due to maven was behind proxy\nI updated setting.xml in maven, added proxy and workscpace was created by vsc</p>\n\n<p>Its a fresh workspace, but the pom.xml is throwing error in first project tag as mentioned in title </p>\n\n<p>I searched and added the same settings.xml file in C:\\Users\\Myacc.m2 folder and checked</p>\n\n<p>I deleted the m2 folder and checked</p>\n\n<p>I executed mvn clean package in project directory</p>\n\n<p>none of it worked</p>\n\n<p>http://maven.apache.org/xsd/maven-4.0.0.xsd\"> </p>\n\n<p>this the xml tag which is throwing error</p>\n\n<p>From browser I am able to access\n<a href=\"http://maven.apache.org/xsd/maven-4.0.0.xsd\" rel=\"noreferrer\">http://maven.apache.org/xsd/maven-4.0.0.xsd</a></p>\n\n<p>I could not find .lsp4xml\\cache\\http\\maven.apache.org , thought of keeping the xsd manually</p>\n"},{"tags":["java","android","android-recyclerview","android-adapter","notifydatasetchanged"],"comments":[{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":1,"creation_date":1695796792,"post_id":77185064,"comment_id":136070438,"body_markdown":"`adding new items in existing list so my recyclerview update automatically` Sorry, just dont believe that.","body":"<code>adding new items in existing list so my recyclerview update automatically</code> Sorry, just dont believe that."},{"owner":{"account_id":8876984,"reputation":183,"user_id":20731078,"display_name":"Deepak Parmar"},"score":0,"creation_date":1695805451,"post_id":77185064,"comment_id":136072022,"body_markdown":"i also do not believe that but practically it&#39;s working @blackapps","body":"i also do not believe that but practically it&#39;s working @blackapps"},{"owner":{"account_id":12721843,"reputation":16003,"user_id":9241978,"display_name":"Pawel"},"score":0,"creation_date":1695825319,"post_id":77185064,"comment_id":136076246,"body_markdown":"If you only append your list it will work if as long as your list is already large enough to be scrollable and you&#39;re not on the bottom of it. However you cannot rely on this behavior (since it&#39;s just a quirk of linearlayoutmanager implementation) and you should be notifying your list changes - preferably with a diff rather than datasetchanged.","body":"If you only append your list it will work if as long as your list is already large enough to be scrollable and you&#39;re not on the bottom of it. However you cannot rely on this behavior (since it&#39;s just a quirk of linearlayoutmanager implementation) and you should be notifying your list changes - preferably with a diff rather than datasetchanged."}],"owner":{"account_id":8876984,"reputation":183,"user_id":20731078,"display_name":"Deepak Parmar"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":21,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695795698,"creation_date":1695795698,"question_id":77185064,"body_markdown":"I am showing list of data by recyclerview. so when data is comming from web socket then adding new items in existing list so my recyclerview update automatically. i am not explicitly calling notifyDataSetChanged() so how it&#39;s updating?.\r\n\r\nIf i will adding items by any button click event so it require to call notifyDataSetChanged() method then data will update but when data is coming web socket so it not require to call notifyDataSetChanged() method and data will update automatically.","title":"Why android Recyclerview automatically update without adapter notifyDataSetChanged() method called? when data is coming from web socket background","body":"<p>I am showing list of data by recyclerview. so when data is comming from web socket then adding new items in existing list so my recyclerview update automatically. i am not explicitly calling notifyDataSetChanged() so how it's updating?.</p>\n<p>If i will adding items by any button click event so it require to call notifyDataSetChanged() method then data will update but when data is coming web socket so it not require to call notifyDataSetChanged() method and data will update automatically.</p>\n"},{"tags":["java","eclipse","maven","maven-3","pom.xml"],"comments":[{"owner":{"account_id":3004420,"reputation":1004,"user_id":2549202,"accept_rate":50,"display_name":"Vineet Kasat"},"score":1,"creation_date":1384233741,"post_id":19921311,"comment_id":29643417,"body_markdown":"Add an environment variable JAVA_HOME","body":"Add an environment variable JAVA_HOME"},{"owner":{"account_id":2138642,"reputation":2194,"user_id":1897838,"accept_rate":56,"display_name":"Y0gesh Gupta"},"score":0,"creation_date":1384235056,"post_id":19921311,"comment_id":29643813,"body_markdown":"Where should I add this environment variable?","body":"Where should I add this environment variable?"},{"owner":{"account_id":3004420,"reputation":1004,"user_id":2549202,"accept_rate":50,"display_name":"Vineet Kasat"},"score":0,"creation_date":1384235646,"post_id":19921311,"comment_id":29644024,"body_markdown":"Go to advance system settings (Windows) , there youwill find all the environment variables. Add JAVA_HOME with the value as path to your JDK","body":"Go to advance system settings (Windows) , there youwill find all the environment variables. Add JAVA_HOME with the value as path to your JDK"},{"owner":{"account_id":2138642,"reputation":2194,"user_id":1897838,"accept_rate":56,"display_name":"Y0gesh Gupta"},"score":0,"creation_date":1384245742,"post_id":19921311,"comment_id":29647810,"body_markdown":"I already have JAVA_HOME set up there.","body":"I already have JAVA_HOME set up there."}],"answers":[{"tags":[],"owner":{"account_id":158265,"reputation":2819,"user_id":376767,"display_name":"Sam Hanes"},"down_vote_count":0,"up_vote_count":16,"is_accepted":true,"score":16,"last_activity_date":1588862106,"creation_date":1384233622,"answer_id":19921467,"question_id":19921311,"body_markdown":"You&#39;ve specified a dependency on `jdk.tools:jdk.tools:jar` with a `&lt;systemPath&gt;` of `${JAVA_HOME}/lib/tools.jar`. `${JAVA_HOME}` is not a valid [Maven property]. The syntax to read the environment variable `JAVA_HOME` is `${env.JAVA_HOME}`. However, the same information is exposed as a [system property] named `java.home`, so `${java.home}` is the best solution.\r\n\r\n[Maven property]: http://books.sonatype.com/mvnref-book/reference/resource-filtering-sect-properties.html\r\n[system property]: http://docs.oracle.com/javase/tutorial/essential/environment/sysprop.html","title":"Pom.xml project build error","body":"<p>You've specified a dependency on <code>jdk.tools:jdk.tools:jar</code> with a <code>&lt;systemPath&gt;</code> of <code>${JAVA_HOME}/lib/tools.jar</code>. <code>${JAVA_HOME}</code> is not a valid <a href=\"http://books.sonatype.com/mvnref-book/reference/resource-filtering-sect-properties.html\" rel=\"nofollow noreferrer\">Maven property</a>. The syntax to read the environment variable <code>JAVA_HOME</code> is <code>${env.JAVA_HOME}</code>. However, the same information is exposed as a <a href=\"http://docs.oracle.com/javase/tutorial/essential/environment/sysprop.html\" rel=\"nofollow noreferrer\">system property</a> named <code>java.home</code>, so <code>${java.home}</code> is the best solution.</p>\n"},{"tags":[],"owner":{"account_id":9178740,"reputation":31,"user_id":6823446,"accept_rate":57,"display_name":"Doss"},"down_vote_count":4,"up_vote_count":0,"is_accepted":false,"score":-4,"last_activity_date":1473930420,"creation_date":1473876613,"answer_id":39497006,"question_id":19921311,"body_markdown":"Look for `tools.jar` which should be in `jdk/lib`, if not mean download latest jdk or add `tools.jar` to this location. This should fix the issue. ","title":"Pom.xml project build error","body":"<p>Look for <code>tools.jar</code> which should be in <code>jdk/lib</code>, if not mean download latest jdk or add <code>tools.jar</code> to this location. This should fix the issue. </p>\n"},{"tags":[],"owner":{"account_id":10211041,"reputation":1,"user_id":7538152,"display_name":"Kaihao Yang"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689041920,"creation_date":1689041920,"answer_id":76658350,"question_id":19921311,"body_markdown":"This is due to a lack of Maven property —— `JAVA_HOME` . You can add it to your pom.xml\r\n```\r\n    &lt;properties&gt;\r\n        &lt;!--  your java home  --&gt;\r\n        &lt;JAVA_HOME&gt;/opt/java/jdk1.8.0_202&lt;/JAVA_HOME&gt;\r\n    &lt;/properties&gt;\r\n```","title":"Pom.xml project build error","body":"<p>This is due to a lack of Maven property —— <code>JAVA_HOME</code> . You can add it to your pom.xml</p>\n<pre><code>    &lt;properties&gt;\n        &lt;!--  your java home  --&gt;\n        &lt;JAVA_HOME&gt;/opt/java/jdk1.8.0_202&lt;/JAVA_HOME&gt;\n    &lt;/properties&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17557703,"reputation":31,"user_id":12736822,"display_name":"fwhdzh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695795579,"creation_date":1695795579,"answer_id":77185051,"question_id":19921311,"body_markdown":"Sam Hanes&#39; answer is great. However, there are two points:\r\n1. ${java.home} represents the installation directory for **JRE**, which is sometimes different from the installation directory for **JDK**. And the tools.jar is usually at `&quot;INSTALLATION_DIRECOTRY_OF_JDK&quot;/lib/tools.jar`\r\n2. If you use `${env.JAVA_HOME}` and you are in linux, be sure that you have correctly exported `JAVA_HOME` environment variable. You can use `export` command in bash to see whether there is a line like `declare -x JAVA_HOME=....`. In particular, you should write your .bash_profile or .bash_rc like:\r\n```\r\n    export JAVA_HOME=THE_DIRECOTRY_OF_YOU_JDK\r\n    export PATH=&quot;$JAVA_HOME/bin:$PATH&quot;\r\n```\r\ninstead of \r\n```\r\n    JAVA_HOME=THE_DIRECOTRY_OF_YOU_JDK\r\n    PATH=&quot;$JAVA_HOME/bin:$PATH&quot;\r\n```\r\nIf you miss `export` in your .bash_profile or .bash_rc, you can still use `$JAVA_HOME` in your bash terminal. However, Maven cannot recognize what `env.JAVA_HOME` means.\r\n","title":"Pom.xml project build error","body":"<p>Sam Hanes' answer is great. However, there are two points:</p>\n<ol>\n<li>${java.home} represents the installation directory for <strong>JRE</strong>, which is sometimes different from the installation directory for <strong>JDK</strong>. And the tools.jar is usually at <code>&quot;INSTALLATION_DIRECOTRY_OF_JDK&quot;/lib/tools.jar</code></li>\n<li>If you use <code>${env.JAVA_HOME}</code> and you are in linux, be sure that you have correctly exported <code>JAVA_HOME</code> environment variable. You can use <code>export</code> command in bash to see whether there is a line like <code>declare -x JAVA_HOME=....</code>. In particular, you should write your .bash_profile or .bash_rc like:</li>\n</ol>\n<pre><code>    export JAVA_HOME=THE_DIRECOTRY_OF_YOU_JDK\n    export PATH=&quot;$JAVA_HOME/bin:$PATH&quot;\n</code></pre>\n<p>instead of</p>\n<pre><code>    JAVA_HOME=THE_DIRECOTRY_OF_YOU_JDK\n    PATH=&quot;$JAVA_HOME/bin:$PATH&quot;\n</code></pre>\n<p>If you miss <code>export</code> in your .bash_profile or .bash_rc, you can still use <code>$JAVA_HOME</code> in your bash terminal. However, Maven cannot recognize what <code>env.JAVA_HOME</code> means.</p>\n"}],"owner":{"account_id":2138642,"reputation":2194,"user_id":1897838,"accept_rate":56,"display_name":"Y0gesh Gupta"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":13984,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":19921467,"answer_count":4,"score":4,"last_activity_date":1695795579,"creation_date":1384232961,"question_id":19921311,"body_markdown":"I have imported maven projects in my eclipse, but I am getting the following error in pom.xml-\r\n\r\n&gt; Project build error:\r\n&gt; &#39;dependencyManagement.dependencies.dependency.systemPath&#39; for\r\n&gt; jdk.tools:jdk.tools:jar must specify an absolute path but is\r\n&gt; ${JAVA_HOME}/lib/tools.jar\r\n\r\nI am kind of new to maven, any help will be appreciated.","title":"Pom.xml project build error","body":"<p>I have imported maven projects in my eclipse, but I am getting the following error in pom.xml-</p>\n\n<blockquote>\n  <p>Project build error:\n  'dependencyManagement.dependencies.dependency.systemPath' for\n  jdk.tools:jdk.tools:jar must specify an absolute path but is\n  ${JAVA_HOME}/lib/tools.jar</p>\n</blockquote>\n\n<p>I am kind of new to maven, any help will be appreciated.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1695793973,"post_id":77184927,"comment_id":136070084,"body_markdown":"You have a semicolon after your if statement. Or to be more precise: Your if statements have empty bodies.","body":"You have a semicolon after your if statement. Or to be more precise: Your if statements have empty bodies."},{"owner":{"account_id":248321,"reputation":62665,"user_id":523612,"accept_rate":100,"display_name":"Karl Knechtel"},"score":1,"creation_date":1695795591,"post_id":77184927,"comment_id":136070268,"body_markdown":"@tgdavies I agree it&#39;s the same, algol-derived syntactical concept. But surely the best available duplicate for a question motivated by a semicolon after `if` in Java, is not a question motivated by a `for` loop in C?","body":"@tgdavies I agree it&#39;s the same, algol-derived syntactical concept. But surely the best available duplicate for a question motivated by a semicolon after <code>if</code> in Java, is not a question motivated by a <code>for</code> loop in C?"},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1695795928,"post_id":77184927,"comment_id":136070314,"body_markdown":"It was the best one I found. But perhaps I should have looked harder.","body":"It was the best one I found. But perhaps I should have looked harder."}],"answers":[{"tags":[],"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1695795208,"creation_date":1695794008,"answer_id":77184947,"question_id":77184927,"body_markdown":"    if (hours_used &lt;= 10);\r\n    {\r\n    // invalid if block\r\n    }\r\n\r\nThis is an invalid if block. The if block either ends at the first closing } (of the block) or the first &#39;;&#39; which is not in the if-block, depending on what comes first.\r\n\r\nEDIT: Technically, it isn&#39;t an if block, though it might seem to be one. As the if- ended at the first &#39;;&#39; encountered after the if statement, your code is identical to:\r\n\r\n    if ( hours_used &lt;= 10 ) {} // empty body of the if block\r\n    {\r\n      // your block\r\n    }\r\n\r\nRemove all those &#39;;&#39;s at the end of your if statements:\r\n\r\n    if (hours_used &lt;= 10)\r\n    {\r\n    // valid if block\r\n    }","title":"Extra Line is being printed","body":"<pre><code>if (hours_used &lt;= 10);\n{\n// invalid if block\n}\n</code></pre>\n<p>This is an invalid if block. The if block either ends at the first closing } (of the block) or the first ';' which is not in the if-block, depending on what comes first.</p>\n<p>EDIT: Technically, it isn't an if block, though it might seem to be one. As the if- ended at the first ';' encountered after the if statement, your code is identical to:</p>\n<pre><code>if ( hours_used &lt;= 10 ) {} // empty body of the if block\n{\n  // your block\n}\n</code></pre>\n<p>Remove all those ';'s at the end of your if statements:</p>\n<pre><code>if (hours_used &lt;= 10)\n{\n// valid if block\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1695794910,"creation_date":1695794910,"answer_id":77184997,"question_id":77184927,"body_markdown":"&gt; _&quot;... inside the case statemen I can type &#39;if&#39; but recieve an error when I type else. ...&quot;_\r\n\r\nThis is because you&#39;ve ended the _if-statement_ with a semi-colon.\r\n\r\n```java\r\nif (hours_used &gt; 10);\r\n{\r\n    additional_hours = hours_used - pack_a_time_lim;\r\n    additional_charge = additional_hours * pack_a_addtional_fee;\r\n    totalBill = package_a + additional_charge;\r\n\r\n    System.out.println(&quot;Your bill amounts to $&quot; + totalBill);\r\n}\r\n```\r\n\r\nThe following _Java_ tutorial outlines the _if_ and _else-if_ structure syntax.\\\r\n_[The if-then and if-then-else Statements (The Java&amp;trade; Tutorials &amp;gt; Learning the Java Language &amp;gt; Language Basics)](https://docs.oracle.com/javase/tutorial/java/nutsandbolts/if.html)_.\r\n\r\nHere is a re-factor.\r\n\r\n```java\r\nswitch (package_chosen) {\r\n    case &quot;c&quot; -&gt; {\r\n        System.out.println(&quot;Your bill amounts to $&quot; + package_c + &quot; per month.&quot;);\r\n    }\r\n    case &quot;a&quot; -&gt; {\r\n        System.out.println(&quot;How many hours of internet did you use?&quot;);\r\n        hours_used = scanner.nextInt();\r\n        \r\n        if (hours_used &lt;= 10)\r\n            System.out.println(&quot;Your bill amounts to $&quot; + package_a + &quot; per month.&quot;);\r\n        if (hours_used &gt; 10) {\r\n            additional_hours = hours_used - pack_a_time_lim;\r\n            additional_charge = additional_hours * pack_a_addtional_fee;\r\n            totalBill = package_a + additional_charge;\r\n\r\n            System.out.println(&quot;Your bill amounts to $&quot; + totalBill);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n&gt; _&quot;... Your bill amounts to $9.95 per month. **HOW DO I REMOVE THIS LINE** ...&quot;_\r\n\r\nYou&#39;re referring to the first _if-statement_.\r\n\r\n```java\r\nif (hours_used &lt;= 10)\r\n    System.out.println(&quot;Your bill amounts to $&quot; + package_a + &quot; per month.&quot;);\r\n```\r\n","title":"Extra Line is being printed","body":"<blockquote>\n<p><em>&quot;... inside the case statemen I can type 'if' but recieve an error when I type else. ...&quot;</em></p>\n</blockquote>\n<p>This is because you've ended the <em>if-statement</em> with a semi-colon.</p>\n<pre class=\"lang-java prettyprint-override\"><code>if (hours_used &gt; 10);\n{\n    additional_hours = hours_used - pack_a_time_lim;\n    additional_charge = additional_hours * pack_a_addtional_fee;\n    totalBill = package_a + additional_charge;\n\n    System.out.println(&quot;Your bill amounts to $&quot; + totalBill);\n}\n</code></pre>\n<p>The following <em>Java</em> tutorial outlines the <em>if</em> and <em>else-if</em> structure syntax.<br />\n<em><a href=\"https://docs.oracle.com/javase/tutorial/java/nutsandbolts/if.html\" rel=\"nofollow noreferrer\">The if-then and if-then-else Statements (The Java™ Tutorials &gt; Learning the Java Language &gt; Language Basics)</a></em>.</p>\n<p>Here is a re-factor.</p>\n<pre class=\"lang-java prettyprint-override\"><code>switch (package_chosen) {\n    case &quot;c&quot; -&gt; {\n        System.out.println(&quot;Your bill amounts to $&quot; + package_c + &quot; per month.&quot;);\n    }\n    case &quot;a&quot; -&gt; {\n        System.out.println(&quot;How many hours of internet did you use?&quot;);\n        hours_used = scanner.nextInt();\n        \n        if (hours_used &lt;= 10)\n            System.out.println(&quot;Your bill amounts to $&quot; + package_a + &quot; per month.&quot;);\n        if (hours_used &gt; 10) {\n            additional_hours = hours_used - pack_a_time_lim;\n            additional_charge = additional_hours * pack_a_addtional_fee;\n            totalBill = package_a + additional_charge;\n\n            System.out.println(&quot;Your bill amounts to $&quot; + totalBill);\n        }\n    }\n}\n</code></pre>\n<blockquote>\n<p><em>&quot;... Your bill amounts to $9.95 per month. <strong>HOW DO I REMOVE THIS LINE</strong> ...&quot;</em></p>\n</blockquote>\n<p>You're referring to the first <em>if-statement</em>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>if (hours_used &lt;= 10)\n    System.out.println(&quot;Your bill amounts to $&quot; + package_a + &quot; per month.&quot;);\n</code></pre>\n"}],"owner":{"account_id":29544335,"reputation":11,"user_id":22642294,"display_name":"Abothicon"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":58,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"closed_date":1695795348,"answer_count":2,"score":1,"last_activity_date":1695795208,"creation_date":1695793767,"question_id":77184927,"body_markdown":"    import java.util.Scanner;\r\n    \r\n    public class Interenet_service_provider {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\r\n    \t\tScanner scanner = new Scanner(System.in);\r\n    \t\t\r\n    \t\tString package_chosen;\r\n    \t\tint hours_used = 0;\r\n    \t\tint additional_hours = 0;\r\n    \t\tdouble additional_charge = 0;\r\n    \t\tdouble package_a = 9.95;\r\n    \t\tdouble package_b = 13.95;\r\n    \t\tdouble package_c = 19.95;\r\n    \t\tint pack_a_time_lim = 10;\r\n    \t\tint pack_b_time_lim = 20;\r\n    \t\tdouble pack_a_addtional_fee = 2.00;\r\n    \t\tdouble pack_b_addtional_fee = 1.00;\r\n    \t\tdouble totalBill = 0;\r\n    \t\t\r\n    \t\tSystem.out.println(&quot;What package do you have?&quot;);\r\n    \t\tpackage_chosen = scanner.nextLine();\r\n    \t\t\r\n    \t\tswitch (package_chosen)\r\n    \t\t{\r\n    \t\tcase (&quot;c&quot;):\r\n    \t\t\tSystem.out.println(&quot;Your bill amounts to $&quot; + package_c + &quot; per month.&quot;);\r\n    \t\t\tbreak;\r\n    \t\tcase (&quot;a&quot;):\r\n    \t\t\tSystem.out.println(&quot;How many hours of internet did you use?&quot;);\r\n    \t\t\thours_used = scanner.nextInt();\r\n    \t\t\t\r\n    \t\t\tif (hours_used &lt;= 10); \r\n    \t\t\t{\r\n    \t\t\t\tSystem.out.println(&quot;Your bill amounts to $&quot; + package_a + &quot; per month.&quot;);\r\n    \t\t\t}\r\n    \t\t\tif (hours_used &gt; 10);\r\n    \t\t\t{\r\n    \t\t\tadditional_hours = hours_used - pack_a_time_lim; \r\n    \t\t\tadditional_charge = additional_hours * pack_a_addtional_fee;\r\n    \t\t\ttotalBill = package_a + additional_charge;\r\n    \t\r\n    \t\t\tSystem.out.println(&quot;Your bill amounts to $&quot; + totalBill);\r\n    \t\t\t}\r\n    \t\t\tbreak;\r\n    \t\t\t}\r\n    \t\t}\r\n    }\r\n\r\n\t\t\r\n\t\r\nThis is my code, I am not done but I ran into the following issues:\r\ninside the case statemen I can type &#39;if&#39; but recieve an error when I type else. And if I do just put If twice then bothe statements print instead of one\t\r\n\r\ni.e\r\n\r\n    What package do you have?\r\n    a\r\n    How many hours of internet did you use?\r\n    11\r\n    Your bill amounts to $9.95 per month. **HOW DO I REMOVE THIS LINE**\r\n    Your bill amounts to $11.95\r\n\r\n\t\r\nI tried doing next.Line to skip a line but when I do that only the first statement prints, \r\n&quot;Your bill amounts to $9.95 per month.&quot; But in my case I want only the second statement to print\r\n\r\n","title":"Extra Line is being printed","body":"<pre><code>import java.util.Scanner;\n\npublic class Interenet_service_provider {\n\n    public static void main(String[] args) {\n    \n        Scanner scanner = new Scanner(System.in);\n        \n        String package_chosen;\n        int hours_used = 0;\n        int additional_hours = 0;\n        double additional_charge = 0;\n        double package_a = 9.95;\n        double package_b = 13.95;\n        double package_c = 19.95;\n        int pack_a_time_lim = 10;\n        int pack_b_time_lim = 20;\n        double pack_a_addtional_fee = 2.00;\n        double pack_b_addtional_fee = 1.00;\n        double totalBill = 0;\n        \n        System.out.println(&quot;What package do you have?&quot;);\n        package_chosen = scanner.nextLine();\n        \n        switch (package_chosen)\n        {\n        case (&quot;c&quot;):\n            System.out.println(&quot;Your bill amounts to $&quot; + package_c + &quot; per month.&quot;);\n            break;\n        case (&quot;a&quot;):\n            System.out.println(&quot;How many hours of internet did you use?&quot;);\n            hours_used = scanner.nextInt();\n            \n            if (hours_used &lt;= 10); \n            {\n                System.out.println(&quot;Your bill amounts to $&quot; + package_a + &quot; per month.&quot;);\n            }\n            if (hours_used &gt; 10);\n            {\n            additional_hours = hours_used - pack_a_time_lim; \n            additional_charge = additional_hours * pack_a_addtional_fee;\n            totalBill = package_a + additional_charge;\n    \n            System.out.println(&quot;Your bill amounts to $&quot; + totalBill);\n            }\n            break;\n            }\n        }\n}\n\n    \n</code></pre>\n<p>This is my code, I am not done but I ran into the following issues:\ninside the case statemen I can type 'if' but recieve an error when I type else. And if I do just put If twice then bothe statements print instead of one</p>\n<p>i.e</p>\n<pre><code>What package do you have?\na\nHow many hours of internet did you use?\n11\nYour bill amounts to $9.95 per month. **HOW DO I REMOVE THIS LINE**\nYour bill amounts to $11.95\n</code></pre>\n<p>I tried doing next.Line to skip a line but when I do that only the first statement prints,\n&quot;Your bill amounts to $9.95 per month.&quot; But in my case I want only the second statement to print</p>\n"},{"tags":["java","spring","spring-boot","spring-security"],"comments":[{"owner":{"account_id":24440940,"reputation":3122,"user_id":18364656,"display_name":"Andrei Lisa"},"score":0,"creation_date":1695800052,"post_id":77181444,"comment_id":136070990,"body_markdown":"Can you try to do what I wrote on my answer ?","body":"Can you try to do what I wrote on my answer ?"},{"owner":{"account_id":12260786,"reputation":215,"user_id":8948544,"display_name":"Karthik Sankaran"},"score":0,"creation_date":1695827137,"post_id":77181444,"comment_id":136076646,"body_markdown":"So, SO marked this as a duplicate ... and the linked answer helped resolve my issue.","body":"So, SO marked this as a duplicate ... and the linked answer helped resolve my issue."}],"answers":[{"tags":[],"owner":{"account_id":24440940,"reputation":3122,"user_id":18364656,"display_name":"Andrei Lisa"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1695795175,"creation_date":1695744070,"answer_id":77181650,"question_id":77181444,"body_markdown":"Just remove next two lines of code from `filterChain`:\r\n\r\n              \r\n    .requestMatchers(mvcMatcherBuilder.pattern(&quot;/login**&quot;)).permitAll()\r\n    .requestMatchers(mvcMatcherBuilder.pattern(&quot;/logout&quot;)).permitAll()\r\n\r\nBecause you have to declare it in `formLogin()` parameter.\r\n\r\nAlso be sure that you custom controller(login method) that is responsable to treat login look something like this\r\n\r\n    @Controller\r\n    class LoginController {\r\n    \t@GetMapping(&quot;/login&quot;)\r\n    \tString login() {\r\n    \t\treturn &quot;login&quot;;\r\n    \t}\r\n    }\r\n\r\nMore details about it you can find if you will read [documentation][1] \r\n\r\n\r\nAnd also add one more `requestMatchers`\r\n\r\n    .requestMatchers(mvcMatcherBuilder.pattern(&quot;/WEB-INF/**&quot;)).permitAll()\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-security/reference/servlet/authentication/passwords/form.html","title":"SecurityConfig results in TOO_MANY_REDIRECTS after migrating from Spring Boot 2.7 to Spring Boot 3.0","body":"<p>Just remove next two lines of code from <code>filterChain</code>:</p>\n<pre><code>.requestMatchers(mvcMatcherBuilder.pattern(&quot;/login**&quot;)).permitAll()\n.requestMatchers(mvcMatcherBuilder.pattern(&quot;/logout&quot;)).permitAll()\n</code></pre>\n<p>Because you have to declare it in <code>formLogin()</code> parameter.</p>\n<p>Also be sure that you custom controller(login method) that is responsable to treat login look something like this</p>\n<pre><code>@Controller\nclass LoginController {\n    @GetMapping(&quot;/login&quot;)\n    String login() {\n        return &quot;login&quot;;\n    }\n}\n</code></pre>\n<p>More details about it you can find if you will read <a href=\"https://docs.spring.io/spring-security/reference/servlet/authentication/passwords/form.html\" rel=\"nofollow noreferrer\">documentation</a></p>\n<p>And also add one more <code>requestMatchers</code></p>\n<pre><code>.requestMatchers(mvcMatcherBuilder.pattern(&quot;/WEB-INF/**&quot;)).permitAll()\n</code></pre>\n"}],"owner":{"account_id":12260786,"reputation":215,"user_id":8948544,"display_name":"Karthik Sankaran"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":87,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"closed_date":1695813485,"answer_count":1,"score":-1,"last_activity_date":1695795175,"creation_date":1695742431,"question_id":77181444,"body_markdown":"I am trying to migrate an existing project from Spring Boot 2.7 to Spring Boot 3.0 (3.0.11). As part of this change, I know I need to update the SecurityConfig I use for Spring Security.\r\nIn 2.7, I was able to successfully migrate from overriding ```configure``` (and extending ```WebSecurityConfigurerAdapter```) to creating a ```filterChain``` Bean. I also started making use of the new Lambda DSL syntax.\r\n\r\nThe 2.7 code that works looks something like:\r\n```\r\n    @Bean\r\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\r\n        http\r\n            .authorizeHttpRequests(authorizeRequests -&gt; {\r\n                authorizeRequests\r\n                    .antMatchers(&quot;/admin/**&quot;).hasAuthority(&quot;ADMIN&quot;)\r\n                    .antMatchers(\r\n                        &quot;/images/**&quot;, \r\n                        &quot;/js/**&quot;,\r\n                        &quot;/css/**&quot;,\r\n                        &quot;/login**&quot;,\r\n                        &quot;/logout&quot;,\r\n                        ...\r\n                    ).permitAll().anyRequest().authenticated();\r\n            }).formLogin(formLogin -&gt; {\r\n                formLogin\r\n                    .loginPage(&quot;/login&quot;)\r\n                    .permitAll();\r\n            }).logout().logoutUrl(&quot;/logout&quot;)\r\n                .permitAll();\r\n\r\n        return http.build();\r\n    }\r\n```\r\n\r\nI modified the code for Spring Boot 3.0 as follows:\r\n```\r\n    @Bean\r\n    public SecurityFilterChain filterChain(HttpSecurity http, HandlerMappingIntrospector introspector) throws Exception {\r\n        MvcRequestMatcher.Builder mvcMatcherBuilder = new MvcRequestMatcher.Builder(introspector);\r\n\r\n        http\r\n            .authorizeHttpRequests(authorizeRequests -&gt; {\r\n                authorizeRequests\r\n                    .requestMatchers(mvcMatcherBuilder.pattern(&quot;/admin/**&quot;)).hasAuthority(&quot;ADMIN&quot;)\r\n                    .requestMatchers(mvcMatcherBuilder.pattern(&quot;/images/**&quot;)).permitAll()\r\n                    .requestMatchers(mvcMatcherBuilder.pattern(&quot;/js/**&quot;)).permitAll()\r\n                    .requestMatchers(mvcMatcherBuilder.pattern(&quot;/css/**&quot;)).permitAll()\r\n                    .requestMatchers(mvcMatcherBuilder.pattern(&quot;/login**&quot;)).permitAll()\r\n                    .requestMatchers(mvcMatcherBuilder.pattern(&quot;/logout&quot;)).permitAll()\r\n                    \r\n                    .anyRequest().authenticated();\r\n            }).formLogin(formLogin -&gt; {\r\n                formLogin\r\n                    .loginPage(&quot;/login&quot;)\r\n                    .permitAll();\r\n            }).logout().logoutUrl(&quot;/logout&quot;)\r\n                .permitAll();\r\n\r\n        return http.build();\r\n    }\r\n```\r\n\r\nThis new code returns an ```ERR_TOO_MANY_REDIRECTS``` when I try to open the ```/login``` page in Google Chrome. From my understanding, this happens if the rules listed in my code above are not being properly parsed.\r\n\r\nThe endpoint of my login page is defined as:\r\n```\r\n@Controller\r\npublic class AppController {\r\n    ...\r\n    @RequestMapping(&quot;/login&quot;)\r\n\tpublic String getLoginPage(Model model) {\r\n\t\treturn &quot;login&quot;;\r\n\t}\r\n    ...\r\n}\r\n```\r\nThis points to my ```login.jsp``` page\r\n\r\nWhat am I doing wrong here and how can I get this to work in Spring Boot 3.0 .\r\nNOTE: I am aware of Spring Boot 3.1, but I don&#39;t want to upgrade until I can get everything working in 3.0 (according to the documentation, 3.1 should not have any breaking changes).","title":"SecurityConfig results in TOO_MANY_REDIRECTS after migrating from Spring Boot 2.7 to Spring Boot 3.0","body":"<p>I am trying to migrate an existing project from Spring Boot 2.7 to Spring Boot 3.0 (3.0.11). As part of this change, I know I need to update the SecurityConfig I use for Spring Security.\nIn 2.7, I was able to successfully migrate from overriding <code>configure</code> (and extending <code>WebSecurityConfigurerAdapter</code>) to creating a <code>filterChain</code> Bean. I also started making use of the new Lambda DSL syntax.</p>\n<p>The 2.7 code that works looks something like:</p>\n<pre><code>    @Bean\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n        http\n            .authorizeHttpRequests(authorizeRequests -&gt; {\n                authorizeRequests\n                    .antMatchers(&quot;/admin/**&quot;).hasAuthority(&quot;ADMIN&quot;)\n                    .antMatchers(\n                        &quot;/images/**&quot;, \n                        &quot;/js/**&quot;,\n                        &quot;/css/**&quot;,\n                        &quot;/login**&quot;,\n                        &quot;/logout&quot;,\n                        ...\n                    ).permitAll().anyRequest().authenticated();\n            }).formLogin(formLogin -&gt; {\n                formLogin\n                    .loginPage(&quot;/login&quot;)\n                    .permitAll();\n            }).logout().logoutUrl(&quot;/logout&quot;)\n                .permitAll();\n\n        return http.build();\n    }\n</code></pre>\n<p>I modified the code for Spring Boot 3.0 as follows:</p>\n<pre><code>    @Bean\n    public SecurityFilterChain filterChain(HttpSecurity http, HandlerMappingIntrospector introspector) throws Exception {\n        MvcRequestMatcher.Builder mvcMatcherBuilder = new MvcRequestMatcher.Builder(introspector);\n\n        http\n            .authorizeHttpRequests(authorizeRequests -&gt; {\n                authorizeRequests\n                    .requestMatchers(mvcMatcherBuilder.pattern(&quot;/admin/**&quot;)).hasAuthority(&quot;ADMIN&quot;)\n                    .requestMatchers(mvcMatcherBuilder.pattern(&quot;/images/**&quot;)).permitAll()\n                    .requestMatchers(mvcMatcherBuilder.pattern(&quot;/js/**&quot;)).permitAll()\n                    .requestMatchers(mvcMatcherBuilder.pattern(&quot;/css/**&quot;)).permitAll()\n                    .requestMatchers(mvcMatcherBuilder.pattern(&quot;/login**&quot;)).permitAll()\n                    .requestMatchers(mvcMatcherBuilder.pattern(&quot;/logout&quot;)).permitAll()\n                    \n                    .anyRequest().authenticated();\n            }).formLogin(formLogin -&gt; {\n                formLogin\n                    .loginPage(&quot;/login&quot;)\n                    .permitAll();\n            }).logout().logoutUrl(&quot;/logout&quot;)\n                .permitAll();\n\n        return http.build();\n    }\n</code></pre>\n<p>This new code returns an <code>ERR_TOO_MANY_REDIRECTS</code> when I try to open the <code>/login</code> page in Google Chrome. From my understanding, this happens if the rules listed in my code above are not being properly parsed.</p>\n<p>The endpoint of my login page is defined as:</p>\n<pre><code>@Controller\npublic class AppController {\n    ...\n    @RequestMapping(&quot;/login&quot;)\n    public String getLoginPage(Model model) {\n        return &quot;login&quot;;\n    }\n    ...\n}\n</code></pre>\n<p>This points to my <code>login.jsp</code> page</p>\n<p>What am I doing wrong here and how can I get this to work in Spring Boot 3.0 .\nNOTE: I am aware of Spring Boot 3.1, but I don't want to upgrade until I can get everything working in 3.0 (according to the documentation, 3.1 should not have any breaking changes).</p>\n"},{"tags":["java","hibernate","jpa","orm"],"comments":[{"owner":{"account_id":2366187,"reputation":60152,"user_id":2071828,"accept_rate":88,"display_name":"Boris the Spider"},"score":0,"creation_date":1418495452,"post_id":27462185,"comment_id":43360763,"body_markdown":"You are absolutely right. ORM is simply a name for the concept or mapping OO -&gt; RMDBS. JPA is the Java Persistence API, specified as part of the JavaEE spec. Hibernate is one of the implementations or that API. There are many versions of JPA and different versions of Hibernate implement different versions of the JPA API.","body":"You are absolutely right. ORM is simply a name for the concept or mapping OO -&gt; RMDBS. JPA is the Java Persistence API, specified as part of the JavaEE spec. Hibernate is one of the implementations or that API. There are many versions of JPA and different versions of Hibernate implement different versions of the JPA API."},{"owner":{"account_id":422964,"reputation":33652,"user_id":802050,"accept_rate":89,"display_name":"M Sach"},"score":3,"creation_date":1418495518,"post_id":27462185,"comment_id":43360787,"body_markdown":"I am not sure why it received negative vote that too with in 5 seconds of posting. Would appreciate if downvoter can give me feedback so that i can improve next time","body":"I am not sure why it received negative vote that too with in 5 seconds of posting. Would appreciate if downvoter can give me feedback so that i can improve next time"},{"owner":{"account_id":422964,"reputation":33652,"user_id":802050,"accept_rate":89,"display_name":"M Sach"},"score":0,"creation_date":1418495645,"post_id":27462185,"comment_id":43360816,"body_markdown":"@BoristheSpider Thanx. Am i correct about JPA too ?","body":"@BoristheSpider Thanx. Am i correct about JPA too ?"},{"owner":{"account_id":2366187,"reputation":60152,"user_id":2071828,"accept_rate":88,"display_name":"Boris the Spider"},"score":1,"creation_date":1418496069,"post_id":27462185,"comment_id":43360935,"body_markdown":"Mostly there. JPA isn&#39;t a &quot;high level&quot; API, it&#39;s just a specification of an ORM framework. It&#39;s very similar to the Java Servlet API or the Java Transaction API etc - all part of JavaEE. iBATIS isn&#39;t a JPA implementation.","body":"Mostly there. JPA isn&#39;t a &quot;high level&quot; API, it&#39;s just a specification of an ORM framework. It&#39;s very similar to the Java Servlet API or the Java Transaction API etc - all part of JavaEE. iBATIS isn&#39;t a JPA implementation."},{"owner":{"account_id":6901499,"reputation":518,"user_id":5300967,"display_name":"Vladimir Vaschenko"},"score":0,"creation_date":1444712513,"post_id":27462185,"comment_id":54004713,"body_markdown":"So, what is the question here?","body":"So, what is the question here?"},{"owner":{"account_id":22001,"reputation":3378,"user_id":53915,"accept_rate":88,"display_name":"Arthur"},"score":6,"creation_date":1465374447,"post_id":27462185,"comment_id":62869242,"body_markdown":"&quot;I am not sure if i am right about JPA vs ORM&quot; Implies **Am I right about JPA vs ORM?** So I think there is a question, Some people just like to downvote I think.","body":"&quot;I am not sure if i am right about JPA vs ORM&quot; Implies <b>Am I right about JPA vs ORM?</b> So I think there is a question, Some people just like to downvote I think."}],"answers":[{"tags":[],"owner":{"account_id":175930,"reputation":2593,"user_id":406290,"accept_rate":43,"display_name":"Kevin Hooke"},"down_vote_count":0,"up_vote_count":56,"is_accepted":false,"score":56,"last_activity_date":1633629230,"creation_date":1444695195,"answer_id":33092172,"question_id":27462185,"body_markdown":"1. ORM is the approach of taking object-oriented data and mapping to a relational data store (e.g. tables in a RDBMS)\r\n\r\n2. JPA is the Java EE standard specification for ORM in Java EE.\r\n\r\n3. The reference implementation for JPA is EclipseLink. If you don&#39;t explictly configure a provider, EclipseLink is used under the covers.\r\n\r\n4. Hibernate is another implementation of the JPA specification, in that you can use the standard JPA APIs and configure your application to use Hibernate as the provider of the spec under the covers.\r\n\r\n5. Hibernate also provides a superset of the ORM features beyond what is specified in the JPA spec. Meaning, that while it provides an implementation of the JPA API, it also provides more features beyond what JPA specifies.","title":"JPA vs ORM vs Hibernate?","body":"<ol>\n<li><p>ORM is the approach of taking object-oriented data and mapping to a relational data store (e.g. tables in a RDBMS)</p>\n</li>\n<li><p>JPA is the Java EE standard specification for ORM in Java EE.</p>\n</li>\n<li><p>The reference implementation for JPA is EclipseLink. If you don't explictly configure a provider, EclipseLink is used under the covers.</p>\n</li>\n<li><p>Hibernate is another implementation of the JPA specification, in that you can use the standard JPA APIs and configure your application to use Hibernate as the provider of the spec under the covers.</p>\n</li>\n<li><p>Hibernate also provides a superset of the ORM features beyond what is specified in the JPA spec. Meaning, that while it provides an implementation of the JPA API, it also provides more features beyond what JPA specifies.</p>\n</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":7594912,"reputation":71,"user_id":5761361,"display_name":"Miguel &#193;ngel"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1472751448,"creation_date":1472751448,"answer_id":39277725,"question_id":27462185,"body_markdown":"The only mistake you seemed to make in your understanding is \r\n&gt;Its the one step above ORM\r\n\r\nOne quick note, The libraries starting with javax.persistence are associated with JPA. You should prefer these over Hibernate Libraries whenever possible. Because these are Portable. However, you will get some extra features in Hibernate, and in those precise cases, please feel free to use Hibernate.","title":"JPA vs ORM vs Hibernate?","body":"<p>The only mistake you seemed to make in your understanding is </p>\n\n<blockquote>\n  <p>Its the one step above ORM</p>\n</blockquote>\n\n<p>One quick note, The libraries starting with javax.persistence are associated with JPA. You should prefer these over Hibernate Libraries whenever possible. Because these are Portable. However, you will get some extra features in Hibernate, and in those precise cases, please feel free to use Hibernate.</p>\n"},{"tags":[],"owner":{"account_id":23195966,"reputation":1,"user_id":17291602,"display_name":"ibrahim Bayburtlu"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695793539,"creation_date":1695793539,"answer_id":77184918,"question_id":27462185,"body_markdown":"Hibernate Object Relational Mapping is also known as object-relational mapping. Hibernate is actually an implementation of JPA. JPA is an API that allows us to perform ORM operations in Java. Thanks to Hibernate, we can establish a connection between objects and the table in the database. As a result of this installation, we perform insertion, deletion and update operations on the database.\r\n\r\nORM : it is tool for Object Relational Mapping","title":"JPA vs ORM vs Hibernate?","body":"<p>Hibernate Object Relational Mapping is also known as object-relational mapping. Hibernate is actually an implementation of JPA. JPA is an API that allows us to perform ORM operations in Java. Thanks to Hibernate, we can establish a connection between objects and the table in the database. As a result of this installation, we perform insertion, deletion and update operations on the database.</p>\n<p>ORM : it is tool for Object Relational Mapping</p>\n"}],"owner":{"account_id":422964,"reputation":33652,"user_id":802050,"accept_rate":89,"display_name":"M Sach"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":63474,"favorite_count":0,"down_vote_count":1,"up_vote_count":75,"answer_count":3,"score":74,"last_activity_date":1695793539,"creation_date":1418495115,"question_id":27462185,"body_markdown":"I have read about them through various resources. Importants ones are :-\r\n\r\n 1. Wikipedia article about each of them\r\n 2. https://stackoverflow.com/questions/9881611/whats-the-difference-between-jpa-and-hibernate\r\n\r\nHere is my understanding about whats the  difference b/w them. I am not sure if i am right about JPA vs ORM\r\n\r\n1. **ORM:** Object Relational Mapping is concept/process of converting the data from  Object oriented language to relational DB and vice versa\r\nFor example in   java its done with the help of reflection and jdbc.\r\n\r\n2. **Hibernate:** Its the implementation of above concept.\r\n\r\n3. **JPA:** Its the one step above ORM. Its high level API and specification so that different ORM tools can implement so that it provides\r\nthe flexibility to developer to change the implementation from one ORM to another (for example if application uses the JPA api and implementaion\r\nis hibernate. In future it can switch to IBatis if required. But on the other if application directly lock the implementation with\r\nHibernate without JPA platform, switiching is going to be herculean task)\r\n\r\nThere can be ORM implementation with/without JPA specification.For example as per this [link][1] under hibernate section only \r\nHibernate versions 3.2 and later provide an implementation for the Java Persistence API\r\n\r\n\r\n  [1]: http://en.wikipedia.org/wiki/Java_Persistence_API#Hibernate","title":"JPA vs ORM vs Hibernate?","body":"<p>I have read about them through various resources. Importants ones are :-</p>\n\n<ol>\n<li>Wikipedia article about each of them</li>\n<li><a href=\"https://stackoverflow.com/questions/9881611/whats-the-difference-between-jpa-and-hibernate\">What&#39;s the difference between JPA and Hibernate?</a></li>\n</ol>\n\n<p>Here is my understanding about whats the  difference b/w them. I am not sure if i am right about JPA vs ORM</p>\n\n<ol>\n<li><p><strong>ORM:</strong> Object Relational Mapping is concept/process of converting the data from  Object oriented language to relational DB and vice versa\nFor example in   java its done with the help of reflection and jdbc.</p></li>\n<li><p><strong>Hibernate:</strong> Its the implementation of above concept.</p></li>\n<li><p><strong>JPA:</strong> Its the one step above ORM. Its high level API and specification so that different ORM tools can implement so that it provides\nthe flexibility to developer to change the implementation from one ORM to another (for example if application uses the JPA api and implementaion\nis hibernate. In future it can switch to IBatis if required. But on the other if application directly lock the implementation with\nHibernate without JPA platform, switiching is going to be herculean task)</p></li>\n</ol>\n\n<p>There can be ORM implementation with/without JPA specification.For example as per this <a href=\"http://en.wikipedia.org/wiki/Java_Persistence_API#Hibernate\" rel=\"noreferrer\">link</a> under hibernate section only \nHibernate versions 3.2 and later provide an implementation for the Java Persistence API</p>\n"},{"tags":["java","spring","aop"],"comments":[{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1695728065,"post_id":77179612,"comment_id":136060456,"body_markdown":"not sure, but it&#39;s possible you have to make sure aop knows which method of which class it&#39;s applied on.","body":"not sure, but it&#39;s possible you have to make sure aop knows which method of which class it&#39;s applied on."},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1695728691,"post_id":77179612,"comment_id":136060571,"body_markdown":"And it should because? THe aspect isn&#39;t even scanned or created (no aspect in use for that matter) nor does your aspect contain a proper expression afaik.","body":"And it should because? THe aspect isn&#39;t even scanned or created (no aspect in use for that matter) nor does your aspect contain a proper expression afaik."},{"owner":{"account_id":29537935,"reputation":1,"user_id":22637206,"display_name":"Hubert Wajda"},"score":0,"creation_date":1695733076,"post_id":77179612,"comment_id":136061546,"body_markdown":"Yes, you&#39;re right, missing @ComponentScan(basePackages = &quot;com.example.demo&quot;) in AppConfig class. Thanks!","body":"Yes, you&#39;re right, missing @ComponentScan(basePackages = &quot;com.example.demo&quot;) in AppConfig class. Thanks!"}],"answers":[{"tags":[],"owner":{"account_id":29534919,"reputation":1,"user_id":22634694,"display_name":"OutOfMemory"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695793193,"creation_date":1695793193,"answer_id":77184894,"question_id":77179612,"body_markdown":"You coded a wrong pointcut expression。Spring does not know what class or witch package to find your [public String getName()] method.\r\nI googled a example you can reference。\r\n\r\n&gt; @Before(&quot;execution(public * com.wener.example.aop.execution.ExecutionService.add(..))&quot;)\r\n\r\n\r\n","title":"@Aspect in spring","body":"<p>You coded a wrong pointcut expression。Spring does not know what class or witch package to find your [public String getName()] method.\nI googled a example you can reference。</p>\n<blockquote>\n<p>@Before(&quot;execution(public * com.wener.example.aop.execution.ExecutionService.add(..))&quot;)</p>\n</blockquote>\n"}],"owner":{"account_id":29537935,"reputation":1,"user_id":22637206,"display_name":"Hubert Wajda"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":56,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1695793193,"creation_date":1695727725,"question_id":77179612,"body_markdown":"I try use `@Aspect` in spring application. I would like before executing method `getName()`, execute method `getNameAdvice()`. It helps me understand `@Aspect` in spring,  but I can&#39;t understand, why it doesn&#39;t work. Method `getNameAdvice()` just doesn&#39;t execute. Intelij see that method `getNameAdvice()`  for method `getName()`. It is very weird. \r\n\r\n```java\r\npackage com.example.demo;\r\n\r\nimport org.springframework.context.annotation.AnnotationConfigApplicationContext;\r\n\r\npublic class DemoApplication {\r\n\r\n\tpublic static void main(String[] args) {\r\n\r\n\t\tAnnotationConfigApplicationContext applicationContext = new AnnotationConfigApplicationContext(AppConfig.class);\r\n\t\tEmployee employee = applicationContext.getBean(Employee.class);\r\n\t\tSystem.out.println(employee.getName());\r\n\t}\r\n\r\n}\r\n```\r\n```java\r\npackage com.example.demo;\r\n\r\n\r\npublic class Employee {\r\n    String name;\r\n    public Employee(String name) {\r\n        this.name = name;\r\n    }\r\n    public String getName() {\r\n        return name;\r\n    }\r\n\r\n}\r\n```\r\n```java\r\npackage com.example.demo;\r\n\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.context.annotation.Configuration;\r\nimport org.springframework.context.annotation.EnableAspectJAutoProxy;\r\n\r\n@Configuration\r\n@EnableAspectJAutoProxy\r\npublic class AppConfig {\r\n    @Bean(name =&quot;employee&quot;)\r\n    public Employee employee(){\r\n        return new Employee(&quot;Jan&quot;);\r\n    }\r\n}\r\n```\r\n```java\r\npackage com.example.demo;\r\n\r\nimport org.aspectj.lang.annotation.Aspect;\r\nimport org.aspectj.lang.annotation.Before;\r\nimport org.springframework.stereotype.Component;\r\n\r\n@Component\r\n@Aspect\r\npublic class EmployeeAspect {\r\n\r\n    @Before(&quot;execution(public String getName())&quot;)\r\n    public void getNameAdvice(){\r\n        System.out.println(&quot;Executing Advice on getName()&quot;);\r\n    }\r\n}\r\n```","title":"@Aspect in spring","body":"<p>I try use <code>@Aspect</code> in spring application. I would like before executing method <code>getName()</code>, execute method <code>getNameAdvice()</code>. It helps me understand <code>@Aspect</code> in spring,  but I can't understand, why it doesn't work. Method <code>getNameAdvice()</code> just doesn't execute. Intelij see that method <code>getNameAdvice()</code>  for method <code>getName()</code>. It is very weird.</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.example.demo;\n\nimport org.springframework.context.annotation.AnnotationConfigApplicationContext;\n\npublic class DemoApplication {\n\n    public static void main(String[] args) {\n\n        AnnotationConfigApplicationContext applicationContext = new AnnotationConfigApplicationContext(AppConfig.class);\n        Employee employee = applicationContext.getBean(Employee.class);\n        System.out.println(employee.getName());\n    }\n\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>package com.example.demo;\n\n\npublic class Employee {\n    String name;\n    public Employee(String name) {\n        this.name = name;\n    }\n    public String getName() {\n        return name;\n    }\n\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>package com.example.demo;\n\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.context.annotation.EnableAspectJAutoProxy;\n\n@Configuration\n@EnableAspectJAutoProxy\npublic class AppConfig {\n    @Bean(name =&quot;employee&quot;)\n    public Employee employee(){\n        return new Employee(&quot;Jan&quot;);\n    }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>package com.example.demo;\n\nimport org.aspectj.lang.annotation.Aspect;\nimport org.aspectj.lang.annotation.Before;\nimport org.springframework.stereotype.Component;\n\n@Component\n@Aspect\npublic class EmployeeAspect {\n\n    @Before(&quot;execution(public String getName())&quot;)\n    public void getNameAdvice(){\n        System.out.println(&quot;Executing Advice on getName()&quot;);\n    }\n}\n</code></pre>\n"},{"tags":["java","indexoutofboundsexception"],"comments":[{"owner":{"display_name":"user2711811"},"score":2,"creation_date":1582133429,"post_id":60306062,"comment_id":106675378,"body_markdown":"Try `j&lt;num` in for loop.  Can&#39;t say about accessing `args` with `j` though.  Probably need to include how you would invoke this program i.e. parameters.","body":"Try <code>j&lt;num</code> in for loop.  Can&#39;t say about accessing <code>args</code> with <code>j</code> though.  Probably need to include how you would invoke this program i.e. parameters."},{"owner":{"account_id":17800403,"reputation":1,"user_id":12927319,"display_name":"theearner360"},"score":0,"creation_date":1587191741,"post_id":60306062,"comment_id":108417091,"body_markdown":"hi did you get this code working ?","body":"hi did you get this code working ?"}],"answers":[{"tags":[],"owner":{"account_id":11502933,"reputation":5909,"user_id":8430155,"display_name":"Harshal Parekh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1582134158,"creation_date":1582133738,"answer_id":60306177,"question_id":60306062,"body_markdown":"    for (j=0; j&lt;=num; j++)\r\n\r\nThis is wrong. It should be:\r\n\r\n    for (j = 0; j &lt; num; j++)\r\n\r\nWhy? Assume `num` is 5. Before this line you initialized `even` to 5. The indices of `even` would be 0, 1, 2, 3, 4. \r\n\r\nNow, with `j&lt;=num`, you are trying to access the index 5, which does not exist and hence the exception.\r\n\r\n\r\n----------\r\n\r\n\r\n    args[j]= Integer.toString(num);\r\n\r\nThis line will raise another exception. I am assuming you&#39;re only passing one parameter from the command line which is `args[0]`. This means the `args` array is of size 1 and you cannot add more elements to it.\r\n\r\nAlso, it is not a good practice to add/modify elements to the `args` array. You should create a new array for this. ","title":"Java code to generate comma separated values and sum","body":"<pre><code>for (j=0; j&lt;=num; j++)\n</code></pre>\n\n<p>This is wrong. It should be:</p>\n\n<pre><code>for (j = 0; j &lt; num; j++)\n</code></pre>\n\n<p>Why? Assume <code>num</code> is 5. Before this line you initialized <code>even</code> to 5. The indices of <code>even</code> would be 0, 1, 2, 3, 4. </p>\n\n<p>Now, with <code>j&lt;=num</code>, you are trying to access the index 5, which does not exist and hence the exception.</p>\n\n<hr>\n\n<pre><code>args[j]= Integer.toString(num);\n</code></pre>\n\n<p>This line will raise another exception. I am assuming you're only passing one parameter from the command line which is <code>args[0]</code>. This means the <code>args</code> array is of size 1 and you cannot add more elements to it.</p>\n\n<p>Also, it is not a good practice to add/modify elements to the <code>args</code> array. You should create a new array for this. </p>\n"},{"tags":[],"owner":{"account_id":18941843,"reputation":1,"user_id":13821697,"display_name":"Umapathy M"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1593211561,"creation_date":1593209037,"answer_id":62603416,"question_id":60306062,"body_markdown":"Please find the much simpler version of the Code by avoiding the `Integer.toString` and `String.join` to pass on the Arguments. Simple Integer `Arraylist` and adding the elements to will do the Trick.\r\n\r\n\r\n    package com.umapathy.java.learning.programs;\r\n    import java.util.ArrayList;\r\n    import java.util.List;\r\n    public class EvenSum \r\n    {\r\n\t\tpublic static void main(String[] args)\r\n\t{\t\r\n\t\tint num = 20; //Initialize the user-defined value for the loop execution\r\n\t    int sum = 0 ; //Initialize the Sum Value as 0\r\n\t\tList&lt;Integer&gt; evenlist = new ArrayList&lt;Integer&gt;(); //Define an integer \r\n        Array list\r\n\t\tfor (int i=2; i&lt;=num; i++) //Begin the loop from the value of 2 \r\n\t\t{\r\n          if(i%2==0) //Logic to find whether a given number is Even Number or not\r\n          {\r\n          sum = sum + i;  // If the logic returns true, Calculate the Sum Value \r\n          evenlist.add(i); // Add the Integer to the previous defined Integer \r\n                           // Arraylist by calling add method\r\n           }        \r\n\t\t}\r\n\t    System.out.println(evenlist); // Print the Output outside the loops\r\n\t\tSystem.out.println(sum);\r\n\t     }\r\n      }\r\n\r\n \r\n\r\nOutput Generated as follows:--\r\n\r\n    [2, 4, 6, 8, 10, 12, 14, 16, 18, 20] 110\r\n","title":"Java code to generate comma separated values and sum","body":"<p>Please find the much simpler version of the Code by avoiding the <code>Integer.toString</code> and <code>String.join</code> to pass on the Arguments. Simple Integer <code>Arraylist</code> and adding the elements to will do the Trick.</p>\n<pre><code>package com.umapathy.java.learning.programs;\nimport java.util.ArrayList;\nimport java.util.List;\npublic class EvenSum \n{\n    public static void main(String[] args)\n{   \n    int num = 20; //Initialize the user-defined value for the loop execution\n    int sum = 0 ; //Initialize the Sum Value as 0\n    List&lt;Integer&gt; evenlist = new ArrayList&lt;Integer&gt;(); //Define an integer \n    Array list\n    for (int i=2; i&lt;=num; i++) //Begin the loop from the value of 2 \n    {\n      if(i%2==0) //Logic to find whether a given number is Even Number or not\n      {\n      sum = sum + i;  // If the logic returns true, Calculate the Sum Value \n      evenlist.add(i); // Add the Integer to the previous defined Integer \n                       // Arraylist by calling add method\n       }        \n    }\n    System.out.println(evenlist); // Print the Output outside the loops\n    System.out.println(sum);\n     }\n  }\n</code></pre>\n<p>Output Generated as follows:--</p>\n<pre><code>[2, 4, 6, 8, 10, 12, 14, 16, 18, 20] 110\n</code></pre>\n"},{"tags":[],"owner":{"account_id":18960996,"reputation":1,"user_id":13836514,"display_name":"Billa"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1593490491,"creation_date":1593457391,"answer_id":62645022,"question_id":60306062,"body_markdown":"```\r\npackage javaApp;\r\n\r\npublic class EvenSum {\r\n\r\n    public static void main(String[] args) {\r\n        int num = 20;\r\n        int even[] = new int[num];\r\n        int sum = 0,j = 0;\r\n        String evennums = &quot;&quot;;\r\n        for(j=1; j&lt;=num; j++) {\r\n            if(j%2==0) {\r\n                sum=sum+j;\r\n                evennums=evennums+&quot;,&quot;+j;\r\n            }\r\n        }\r\n        evennums=evennums.replaceFirst(&quot;,&quot;,&quot;&quot;);\r\n        System.out.println(evennums);\r\n        System.out.println(sum);\r\n    }\r\n}\r\n```\r\n","title":"Java code to generate comma separated values and sum","body":"<pre><code>package javaApp;\n\npublic class EvenSum {\n\n    public static void main(String[] args) {\n        int num = 20;\n        int even[] = new int[num];\n        int sum = 0,j = 0;\n        String evennums = &quot;&quot;;\n        for(j=1; j&lt;=num; j++) {\n            if(j%2==0) {\n                sum=sum+j;\n                evennums=evennums+&quot;,&quot;+j;\n            }\n        }\n        evennums=evennums.replaceFirst(&quot;,&quot;,&quot;&quot;);\n        System.out.println(evennums);\n        System.out.println(sum);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15974771,"reputation":1023,"user_id":11527968,"display_name":"Jimmy"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1593496254,"creation_date":1593495461,"answer_id":62650929,"question_id":60306062,"body_markdown":"Why initialized the even array size if its actual length is unknown in initially. It&#39;s better to go with ArrayList in this case which have characteristic to grow dynamically.\r\n\r\n**Try in this way**\r\n\r\n        public static void main(String[] args) {\r\n        \t\tint num =  Integer.parseInt(args[0]);\r\n        \t\tList&lt;Integer&gt; evens = new ArrayList&lt;Integer&gt;();\r\n        \t\tint sum = 0;\t\t\t\t\r\n        \t\tfor (int j = 0; j &lt;= num; j++) {\r\n        \t\t\tif (j % 2 == 0) {\r\n        \t\t\t\tsum += j;\r\n        \t\t\t\tevens.add(j);\r\n        \t\t\t}\r\n        \t\t}\t\t\r\n        \t\tSystem.out.println(&quot;Even Numbers List : &quot;+evens);\r\n        \t\tSystem.out.println(&quot;Total Sum : &quot;+sum);\r\n          \r\n\r\n         // If you want an array of int instead of ArrayList you can convert ArrayList into int[] with following two lines\r\n\r\n               int evenArray[] = even.stream().mapToInt(x-&gt;x).toArray();        \t\t\r\n        \t   System.out.println(&quot;Even Numbers Array : &quot;+evenArray);\r\n\r\n        \t}","title":"Java code to generate comma separated values and sum","body":"<p>Why initialized the even array size if its actual length is unknown in initially. It's better to go with ArrayList in this case which have characteristic to grow dynamically.</p>\n<p><strong>Try in this way</strong></p>\n<pre><code>    public static void main(String[] args) {\n            int num =  Integer.parseInt(args[0]);\n            List&lt;Integer&gt; evens = new ArrayList&lt;Integer&gt;();\n            int sum = 0;                \n            for (int j = 0; j &lt;= num; j++) {\n                if (j % 2 == 0) {\n                    sum += j;\n                    evens.add(j);\n                }\n            }       \n            System.out.println(&quot;Even Numbers List : &quot;+evens);\n            System.out.println(&quot;Total Sum : &quot;+sum);\n      \n\n     // If you want an array of int instead of ArrayList you can convert ArrayList into int[] with following two lines\n\n           int evenArray[] = even.stream().mapToInt(x-&gt;x).toArray();                \n           System.out.println(&quot;Even Numbers Array : &quot;+evenArray);\n\n        }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":19319347,"reputation":1,"user_id":14123360,"display_name":"Madhu"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1597730328,"creation_date":1597729733,"answer_id":63462574,"question_id":60306062,"body_markdown":"    public static void main(String[] args) {\r\n    \t\t// TODO Auto-generated method stub\r\n    \t\t//System.out.println(&quot;Args: &quot;+args[0]);\r\n    \t\tint num = Integer.parseInt(args[0]);\r\n    \t\tint even[] = new int[num];\r\n    \t\tint sum = 0,j = 0;\r\n    \t\tString evennums = &quot;&quot;;\r\n    \t\t//Insert your code here\r\n    \t\tfor(j=0; j&lt;=num; j++) {\r\n    \t\t\tif(j%2==0) {\r\n    \t\t\t\t//even[j]=num;\r\n    \t\t\t\tsum=sum+j;\r\n    \t\t\t\tif(j!=0) evennums=evennums+&quot;,&quot;+j;\r\n    \r\n    \t\t\t}\r\n    \r\n    \t\t}    \r\n    \t\tevennums=evennums.substring(1);\r\n    \t\tSystem.out.println(evennums);\r\n    \t\tSystem.out.println(sum);\r\n    \t}\r\n\r\nAt time of running in eclipse follow below steps:\r\n\r\nRight click on class--&gt; Run AS --&gt; Run Configuration\r\nGo to Arguments tab and pass value as 10\r\nClick Run\r\nOutput: \r\n2,4,6,8,10 \r\n30","title":"Java code to generate comma separated values and sum","body":"<pre><code>public static void main(String[] args) {\n        // TODO Auto-generated method stub\n        //System.out.println(&quot;Args: &quot;+args[0]);\n        int num = Integer.parseInt(args[0]);\n        int even[] = new int[num];\n        int sum = 0,j = 0;\n        String evennums = &quot;&quot;;\n        //Insert your code here\n        for(j=0; j&lt;=num; j++) {\n            if(j%2==0) {\n                //even[j]=num;\n                sum=sum+j;\n                if(j!=0) evennums=evennums+&quot;,&quot;+j;\n\n            }\n\n        }    \n        evennums=evennums.substring(1);\n        System.out.println(evennums);\n        System.out.println(sum);\n    }\n</code></pre>\n<p>At time of running in eclipse follow below steps:</p>\n<p>Right click on class--&gt; Run AS --&gt; Run Configuration\nGo to Arguments tab and pass value as 10\nClick Run\nOutput:\n2,4,6,8,10\n30</p>\n"}],"owner":{"account_id":17800403,"reputation":1,"user_id":12927319,"display_name":"theearner360"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":8841,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":5,"score":0,"last_activity_date":1695791060,"creation_date":1582133298,"question_id":60306062,"body_markdown":"While running this code I am getting `ArrayIndexOutOfBoundsException`. \r\n\r\n    public class Evensum {\r\n    \r\n        public static void main(String[] args) {\r\n            int num = Integer.parseInt(args[0]);\r\n            int even[] = new int[num];\r\n            int sum = 0,j = 0;\r\n            String evennums = &quot;&quot;;\r\n            //Insert your code here\r\n             for(j=0; j&lt;=num; j++) {\r\n                if(num%2==0) {\r\n                    even[j]=num;\r\n                    sum=sum+num;\r\n                    args[j]= Integer.toString(num);\r\n                }\r\n                evennums=String.join(&quot;,&quot;, args);\r\n            }    \r\n            System.out.println(evennums);\r\n            System.out.println(sum);\r\n        }\r\n    }","title":"Java code to generate comma separated values and sum","body":"<p>While running this code I am getting <code>ArrayIndexOutOfBoundsException</code>. </p>\n\n<pre><code>public class Evensum {\n\n    public static void main(String[] args) {\n        int num = Integer.parseInt(args[0]);\n        int even[] = new int[num];\n        int sum = 0,j = 0;\n        String evennums = \"\";\n        //Insert your code here\n         for(j=0; j&lt;=num; j++) {\n            if(num%2==0) {\n                even[j]=num;\n                sum=sum+num;\n                args[j]= Integer.toString(num);\n            }\n            evennums=String.join(\",\", args);\n        }    \n        System.out.println(evennums);\n        System.out.println(sum);\n    }\n}\n</code></pre>\n"},{"tags":["java","spring","mongodb","spring-boot"],"comments":[{"owner":{"account_id":1616980,"reputation":616,"user_id":1494395,"accept_rate":0,"display_name":"Rajith Pemabandu"},"score":0,"creation_date":1491107506,"post_id":43164651,"comment_id":73403842,"body_markdown":"what is the exception are you getting.","body":"what is the exception are you getting."},{"owner":{"account_id":2113840,"reputation":13,"user_id":1878540,"accept_rate":0,"display_name":"GuoJing"},"score":0,"creation_date":1491108572,"post_id":43164651,"comment_id":73404009,"body_markdown":"@RajithPemabandu ***************************\nAPPLICATION FAILED TO START\n***************************\n\nDescription:\n\nField userPropsRepository in controller.UserController required a bean of type &#39;repository.UserPropsRepository&#39; that could not be found.\n\n\nAction:\n\nConsider defining a bean of type &#39;repository.UserPropsRepository&#39; in your configuration.","body":"@RajithPemabandu *************************** APPLICATION FAILED TO START ***************************  Description:  Field userPropsRepository in controller.UserController required a bean of type &#39;repository.UserPropsRepository&#39; that could not be found.   Action:  Consider defining a bean of type &#39;repository.UserPropsRepository&#39; in your configuration."},{"owner":{"account_id":1616980,"reputation":616,"user_id":1494395,"accept_rate":0,"display_name":"Rajith Pemabandu"},"score":0,"creation_date":1491109913,"post_id":43164651,"comment_id":73404221,"body_markdown":"have you considered my answer?","body":"have you considered my answer?"}],"answers":[{"tags":[],"owner":{"account_id":1616980,"reputation":616,"user_id":1494395,"accept_rate":0,"display_name":"Rajith Pemabandu"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1491109948,"creation_date":1491109061,"answer_id":43164784,"question_id":43164651,"body_markdown":"suppose you are missing @Repository annotation in the UserPropsRepository interface.\r\n\r\n\r\n       @repository(&quot;userPropsRepository&quot;)\r\n       public interface UserPropsRepository extends MongoRepository&lt;UserProps, String&gt; {\r\n        UserProps findOne(String id);\r\n        UserProps save(UserProps props);\r\n        UserProps update(UserProps props);\r\n        void delete(UserProps props);\r\n    }\r\n","title":"Java Consider defining a bean of type in your configuration exception when add mongoDB support","body":"<p>suppose you are missing @Repository annotation in the UserPropsRepository interface.</p>\n\n<pre><code>   @repository(\"userPropsRepository\")\n   public interface UserPropsRepository extends MongoRepository&lt;UserProps, String&gt; {\n    UserProps findOne(String id);\n    UserProps save(UserProps props);\n    UserProps update(UserProps props);\n    void delete(UserProps props);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2113840,"reputation":13,"user_id":1878540,"accept_rate":0,"display_name":"GuoJing"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1491148999,"creation_date":1491148999,"answer_id":43170446,"question_id":43164651,"body_markdown":"Problem solved.\r\n\r\n1. Change my project structure, move root Package and Model and Dao ... to com.example.model ...\r\n2. Move Application.java to root so it will scan components automatically\r\n\r\nRelated to this same problem and solution.\r\n\r\n[https://stackoverflow.com/questions/42907553/field-required-a-bean-of-type-that-could-not-be-found-error-spring-restful-ap][1]\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/42907553/field-required-a-bean-of-type-that-could-not-be-found-error-spring-restful-ap","title":"Java Consider defining a bean of type in your configuration exception when add mongoDB support","body":"<p>Problem solved.</p>\n\n<ol>\n<li>Change my project structure, move root Package and Model and Dao ... to com.example.model ...</li>\n<li>Move Application.java to root so it will scan components automatically</li>\n</ol>\n\n<p>Related to this same problem and solution.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/42907553/field-required-a-bean-of-type-that-could-not-be-found-error-spring-restful-ap\">&#39;Field required a bean of type that could not be found.&#39; error spring restful API using mongodb</a></p>\n"},{"tags":[],"owner":{"account_id":12808322,"reputation":186,"user_id":9267309,"display_name":"Gadhia Reema"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1544434503,"creation_date":1544434503,"answer_id":53702823,"question_id":43164651,"body_markdown":" - I changed my Spring Boot version to `2.1.1.RELEASE` and the issue was solved.\r\n - Cleared the `.mvn` folder and rebuild my project and the issue was \r\nresolved.","title":"Java Consider defining a bean of type in your configuration exception when add mongoDB support","body":"<ul>\n<li>I changed my Spring Boot version to <code>2.1.1.RELEASE</code> and the issue was solved.</li>\n<li>Cleared the <code>.mvn</code> folder and rebuild my project and the issue was \nresolved.</li>\n</ul>\n"}],"owner":{"account_id":2113840,"reputation":13,"user_id":1878540,"accept_rate":0,"display_name":"GuoJing"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":10022,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":3,"score":2,"last_activity_date":1695791060,"creation_date":1491107388,"question_id":43164651,"body_markdown":"I have a very simple Java Springboot project connect to the database. Still, I want a mongoDB connection and I could use mongoDB as well.\r\n\r\nI read lots of document and I can&#39;t make it work. And my commits code is:\r\n\r\nhttps://github.com/GuoJing/spb/commit/20c04ce38d43bb0ba229d0d3577fdccbd571062e\r\n\r\nIf adding @AutoWired annotation, application will not start. I think this should be same as official document.\r\n\r\nin src/main/java/controller/UserController.java\r\n\r\n    @Autowired\r\n    private UserPropsRepository userPropsRepository;\r\n\r\nHere is my project, could anybody help me?\r\n\r\nhttps://github.com/GuoJing/spb\r\n\r\nMy Exception is:\r\n\r\n    ***************************\r\n    APPLICATION FAILED TO START\r\n    ***************************\r\n    \r\n    Description:\r\n    \r\n    Field userPropsRepository in controller.UserController required a bean of type &#39;repository.UserPropsRepository&#39; that could not be found.\r\n    \r\n    \r\n    Action:\r\n    \r\n    Consider defining a bean of type &#39;repository.UserPropsRepository&#39; in your configuration.","title":"Java Consider defining a bean of type in your configuration exception when add mongoDB support","body":"<p>I have a very simple Java Springboot project connect to the database. Still, I want a mongoDB connection and I could use mongoDB as well.</p>\n\n<p>I read lots of document and I can't make it work. And my commits code is:</p>\n\n<p><a href=\"https://github.com/GuoJing/spb/commit/20c04ce38d43bb0ba229d0d3577fdccbd571062e\" rel=\"nofollow noreferrer\">https://github.com/GuoJing/spb/commit/20c04ce38d43bb0ba229d0d3577fdccbd571062e</a></p>\n\n<p>If adding @AutoWired annotation, application will not start. I think this should be same as official document.</p>\n\n<p>in src/main/java/controller/UserController.java</p>\n\n<pre><code>@Autowired\nprivate UserPropsRepository userPropsRepository;\n</code></pre>\n\n<p>Here is my project, could anybody help me?</p>\n\n<p><a href=\"https://github.com/GuoJing/spb\" rel=\"nofollow noreferrer\">https://github.com/GuoJing/spb</a></p>\n\n<p>My Exception is:</p>\n\n<pre><code>***************************\nAPPLICATION FAILED TO START\n***************************\n\nDescription:\n\nField userPropsRepository in controller.UserController required a bean of type 'repository.UserPropsRepository' that could not be found.\n\n\nAction:\n\nConsider defining a bean of type 'repository.UserPropsRepository' in your configuration.\n</code></pre>\n"},{"tags":["java","ubuntu","jenkins","jenkins-pipeline","cicd"],"comments":[{"owner":{"account_id":3755777,"reputation":499,"user_id":3122175,"accept_rate":92,"display_name":"D.T"},"score":0,"creation_date":1695789937,"post_id":77184706,"comment_id":136069672,"body_markdown":"It is just a simple java class, I don&#39;t think you need `-cp`. With java 11 and upper, just use command `java First.java`","body":"It is just a simple java class, I don&#39;t think you need <code>-cp</code>. With java 11 and upper, just use command <code>java First.java</code>"},{"owner":{"account_id":11941224,"reputation":23,"user_id":20384783,"display_name":"PRANIT BHOIR"},"score":0,"creation_date":1695790888,"post_id":77184706,"comment_id":136069766,"body_markdown":"Ohh It worked. I was first compiling my program and then running the java code because that is what normally we do.. Now I removed the compilation step and it worked successfully. Thanks mate.","body":"Ohh It worked. I was first compiling my program and then running the java code because that is what normally we do.. Now I removed the compilation step and it worked successfully. Thanks mate."},{"owner":{"account_id":3755777,"reputation":499,"user_id":3122175,"accept_rate":92,"display_name":"D.T"},"score":0,"creation_date":1695792220,"post_id":77184706,"comment_id":136069889,"body_markdown":"Glad it helps you","body":"Glad it helps you"}],"owner":{"account_id":11941224,"reputation":23,"user_id":20384783,"display_name":"PRANIT BHOIR"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695789508,"creation_date":1695789508,"question_id":77184706,"body_markdown":"This is my java code:\r\npranit@pranit-master:~/java_labs$ cat First.java\r\n```\r\npublic class First {\r\npublic static void main(String[] args) {\r\n    System.out.println(&quot;Hello&quot;);\r\n\r\n}\r\n}\r\n```\r\n\r\nThis is the build job I am running in jenkins for a java program. Below is the job console output.\r\n\r\n```\r\nStarted by user Anmol Bhoir\r\nRunning as SYSTEM\r\nBuilding in workspace /home/pranit/java_labs\r\n[java_labs] $ /bin/sh -xe /tmp/jenkins5091110815182762939.sh\r\n+ javac First.java\r\n**First.java:2: error: error while writing First: /home/pranit/java_labs/First.class\r\npublic class First {\r\n       ^\r\n1 error**\r\nBuild step &#39;Execute shell&#39; marked build as failure\r\nFinished: FAILURE\r\n```\r\n\r\nI&#39;m getting above error while running the java program in jenkins on ubuntu OS.\r\nBut the same program if i execute on Ubuntu, I dont get any issues. It is running fine only. \r\n\r\nPlease help me with this issue. Cannot proceed further because of this.\r\n\r\n\r\n\r\nI tried many solutions like giving classpath while running the java code using -cp option, but did not work.\r\neg.\r\n# javac -cp /usr/lib/jvm/java-17-openjdk-amd64/bin First.java\r\n\r\n","title":"Getting error while running java program in jenkins on ubuntu","body":"<p>This is my java code:\npranit@pranit-master:~/java_labs$ cat First.java</p>\n<pre><code>public class First {\npublic static void main(String[] args) {\n    System.out.println(&quot;Hello&quot;);\n\n}\n}\n</code></pre>\n<p>This is the build job I am running in jenkins for a java program. Below is the job console output.</p>\n<pre><code>Started by user Anmol Bhoir\nRunning as SYSTEM\nBuilding in workspace /home/pranit/java_labs\n[java_labs] $ /bin/sh -xe /tmp/jenkins5091110815182762939.sh\n+ javac First.java\n**First.java:2: error: error while writing First: /home/pranit/java_labs/First.class\npublic class First {\n       ^\n1 error**\nBuild step 'Execute shell' marked build as failure\nFinished: FAILURE\n</code></pre>\n<p>I'm getting above error while running the java program in jenkins on ubuntu OS.\nBut the same program if i execute on Ubuntu, I dont get any issues. It is running fine only.</p>\n<p>Please help me with this issue. Cannot proceed further because of this.</p>\n<p>I tried many solutions like giving classpath while running the java code using -cp option, but did not work.\neg.</p>\n<h1>javac -cp /usr/lib/jvm/java-17-openjdk-amd64/bin First.java</h1>\n"},{"tags":["java","java-20"],"comments":[{"owner":{"account_id":28104689,"reputation":512,"user_id":21473475,"display_name":"Arfur Narf"},"score":1,"creation_date":1680969455,"post_id":75966165,"comment_id":133985504,"body_markdown":"*Would simply new URI(filename).toURL()do the job in the last case?* I would say so, from reading the URI doc.  But it&#39;ll only take 5 minutes to try it and see,","body":"<i>Would simply new URI(filename).toURL()do the job in the last case?</i> I would say so, from reading the URI doc.  But it&#39;ll only take 5 minutes to try it and see,"},{"owner":{"account_id":19435569,"reputation":1567,"user_id":21105992,"display_name":"teapot418"},"score":1,"creation_date":1680969583,"post_id":75966165,"comment_id":133985533,"body_markdown":"If you want to construct a `file:` scheme URI, then File has a [toURI method](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/io/File.html#toURI()).","body":"If you want to construct a <code>file:</code> scheme URI, then File has a <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/io/File.html#toURI()\" rel=\"nofollow noreferrer\">toURI method</a>."},{"owner":{"account_id":19435569,"reputation":1567,"user_id":21105992,"display_name":"teapot418"},"score":1,"creation_date":1680969705,"post_id":75966165,"comment_id":133985554,"body_markdown":"The `context,spec` thing can probably be done by `URI.resolve()`?","body":"The <code>context,spec</code> thing can probably be done by <code>URI.resolve()</code>?"},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":2,"creation_date":1680994165,"post_id":75966165,"comment_id":133988489,"body_markdown":"Indeed, that very same javadoc states: &quot;The recommended way to manage the encoding and decoding of URLs is to use `URI`, and to convert between these two classes using `toURI()` and `URI.toURL()`.&quot;  So the answer to your first question is yes.  The answer to your second question, as teapot pointed out, is `new URI(context).resolve(spec).toURL()`.","body":"Indeed, that very same javadoc states: &quot;The recommended way to manage the encoding and decoding of URLs is to use <code>URI</code>, and to convert between these two classes using <code>toURI()</code> and <code>URI.toURL()</code>.&quot;  So the answer to your first question is yes.  The answer to your second question, as teapot pointed out, is <code>new URI(context).resolve(spec).toURL()</code>."},{"owner":{"account_id":207965,"reputation":3704,"user_id":458157,"accept_rate":75,"display_name":"gouessej"},"score":0,"creation_date":1681000462,"post_id":75966165,"comment_id":133988994,"body_markdown":"@ArfurNarf It&#39;s not so trivial because I can&#39;t test all possible special cases depending on file systems. Imagine that it works on a simple case but it doesn&#39;t work in another case because a special character isn&#39;t escaped. I would like to understand formally how to replace those calls once for all.","body":"@ArfurNarf It&#39;s not so trivial because I can&#39;t test all possible special cases depending on file systems. Imagine that it works on a simple case but it doesn&#39;t work in another case because a special character isn&#39;t escaped. I would like to understand formally how to replace those calls once for all."},{"owner":{"account_id":207965,"reputation":3704,"user_id":458157,"accept_rate":75,"display_name":"gouessej"},"score":0,"creation_date":1681001581,"post_id":75966165,"comment_id":133989058,"body_markdown":"@VGR Actually, your comment clarifies teapot418&#39;s suggestion. Thanks.","body":"@VGR Actually, your comment clarifies teapot418&#39;s suggestion. Thanks."},{"owner":{"account_id":207965,"reputation":3704,"user_id":458157,"accept_rate":75,"display_name":"gouessej"},"score":0,"creation_date":1681047031,"post_id":75966165,"comment_id":133992935,"body_markdown":"@VGR I obtain `java.lang.IllegalArgumentException: URI is not absolute` when I call `new URI(context).resolve(spec).toURL()`.","body":"@VGR I obtain <code>java.lang.IllegalArgumentException: URI is not absolute</code> when I call <code>new URI(context).resolve(spec).toURL()</code>."},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1681049050,"post_id":75966165,"comment_id":133993211,"body_markdown":"Yes, and [the method&#39;s documentation](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/net/URI.html#toURL()) tells you that you will get that exception.  Is there a reason you&#39;re using relative URIs?","body":"Yes, and <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/net/URI.html#toURL()\" rel=\"nofollow noreferrer\">the method&#39;s documentation</a> tells you that you will get that exception.  Is there a reason you&#39;re using relative URIs?"},{"owner":{"account_id":207965,"reputation":3704,"user_id":458157,"accept_rate":75,"display_name":"gouessej"},"score":0,"creation_date":1681060640,"post_id":75966165,"comment_id":133994775,"body_markdown":"@VGR It&#39;s a utility of the engine. At the beginning, it was used to work around some bugs or limitations of the URL class. I&#39;ll isolate the problem in a tiny unit test.","body":"@VGR It&#39;s a utility of the engine. At the beginning, it was used to work around some bugs or limitations of the URL class. I&#39;ll isolate the problem in a tiny unit test."},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1681129068,"post_id":75966165,"comment_id":134002637,"body_markdown":"If you are trying to make URLs out of relative filenames, I find myself wondering if you’re actually trying to access data built into your application.  If that is the case, you should not be creating URLs yourself at all;  you should use [Class.getResource](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/Class.html#getResource(java.lang.String)) for that.  You should never rely on relative filenames, since the current directory usually is not something you can control.","body":"If you are trying to make URLs out of relative filenames, I find myself wondering if you’re actually trying to access data built into your application.  If that is the case, you should not be creating URLs yourself at all;  you should use <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/Class.html#getResource(java.lang.String)\" rel=\"nofollow noreferrer\">Class.getResource</a> for that.  You should never rely on relative filenames, since the current directory usually is not something you can control."},{"owner":{"account_id":207965,"reputation":3704,"user_id":458157,"accept_rate":75,"display_name":"gouessej"},"score":0,"creation_date":1681166332,"post_id":75966165,"comment_id":134009914,"body_markdown":"The method is in a utility, it&#39;s used both for files on the local filesystem and files from the Internet.","body":"The method is in a utility, it&#39;s used both for files on the local filesystem and files from the Internet."},{"owner":{"account_id":80581,"reputation":3955,"user_id":227779,"accept_rate":38,"display_name":"Per Lundberg"},"score":0,"creation_date":1695754742,"post_id":75966165,"comment_id":136066022,"body_markdown":"@VGR Thanks for mentioning the `new URI(context).resolve(spec).toURL()` approach, appreciated. This may resolve my particular issue in another question (which was marked as a duplicate of this). I edited https://stackoverflow.com/a/75968141/227779 to include these details now, please help me verify that I understood you correct.","body":"@VGR Thanks for mentioning the <code>new URI(context).resolve(spec).toURL()</code> approach, appreciated. This may resolve my particular issue in another question (which was marked as a duplicate of this). I edited <a href=\"https://stackoverflow.com/a/75968141/227779\">stackoverflow.com/a/75968141/227779</a> to include these details now, please help me verify that I understood you correct."},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":1,"creation_date":1695755899,"post_id":75966165,"comment_id":136066224,"body_markdown":"@PerLundberg Looks good to me.","body":"@PerLundberg Looks good to me."}],"answers":[{"tags":[],"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"down_vote_count":0,"up_vote_count":16,"is_accepted":true,"score":16,"last_activity_date":1695789446,"creation_date":1680996912,"answer_id":75968141,"question_id":75966165,"body_markdown":"# tl;dr\r\n\r\n - To construct a URL, use [`URI::toURL`][1].\r\n - To construct a relative URL, first create the `URI` using the context URI and then call [`URI::resolve`](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/net/URI.html#resolve(java.lang.String)) with the URI you wish to make relative.\r\n - To construct a `file:` based URL, (1) call [`Path::toURI`][2], (2) then `URI::toURL`.\r\n\r\nEx: `URI uri = Paths.get( &quot;/Users/your_user_name/example.txt&quot; ).toUri() ;`\r\n\r\n# Details\r\n\r\nUnderstand that:\r\n\r\n - [`java.net.URL`][3] is an ancient class, dating from Java 1. That class does not encode or decode any URL components according to the [RFC 2396][4] escaping mechanism.\r\n - [`java.net.URI`][5] class came later, in Java 4. \r\n\r\nRead this note from the Java team, [Oracle: Quality Outreach Heads-up - JDK 20: Deprecate URL Public Constructors][6]. To quote:\r\n\r\n&gt;JDK 20 will deprecate all public constructors of java.net.URL. … To construct a URL, the [`URI::toURL`][1] alternative should instead be preferred. To construct a `file:` based URL, [`Path::toURI`][2] should be used prior to `URI::toURL`.\r\n\r\nAnd see the [note on constructor deprecation][7] within the Javadoc  of `URL` class.\r\n\r\nSee also the issue-tracker page, [JDK-8294241 Deprecate URL public constructors][8].\r\n\r\n## Example: File path URI\r\n\r\nFor working with files in modern Java, use [NIO.2][9] features. \r\n\r\nThe [`Paths`][10] class can produce a [`Path`][11] object. From there, ask that `Path` to [produce a `URI`][2]. \r\n\r\n```java\r\nPath path = Paths.get( &quot;/Users/your_user_name/example.txt&quot; ) ;\r\nURI uri = path.toUri () ;\r\nSystem.out.println ( &quot;uri = &quot; + uri );\r\n```\r\n\r\n&gt;uri = file:///Users/your_user_name/example.txt\r\n\r\nGoing [the other direction][12]:\r\n\r\n    Path path = Paths.get( uri ) ;\r\n\r\n\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/net/URI.html#toURL()\r\n  [2]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/nio/file/Path.html#toUri()\r\n  [3]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/net/URL.html#%3Cinit%3E(java.lang.String)\r\n  [4]: https://www.rfc-editor.org/rfc/rfc2396\r\n  [5]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/net/URI.html\r\n  [6]: https://inside.java/2023/02/15/quality-heads-up/\r\n  [7]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/net/URL.html#constructor-deprecation\r\n  [8]: https://bugs.openjdk.org/browse/JDK-8294241\r\n  [9]: https://docs.oracle.com/javase/8/docs/technotes/guides/io/index.html\r\n  [10]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/nio/file/Paths.html\r\n  [11]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/nio/file/Path.html\r\n  [12]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/nio/file/Paths.html#get(java.net.URI)","title":"How to replace the deprecated URL constructors in Java 20?","body":"<h1>tl;dr</h1>\n<ul>\n<li>To construct a URL, use <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/net/URI.html#toURL()\" rel=\"noreferrer\"><code>URI::toURL</code></a>.</li>\n<li>To construct a relative URL, first create the <code>URI</code> using the context URI and then call <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/net/URI.html#resolve(java.lang.String)\" rel=\"noreferrer\"><code>URI::resolve</code></a> with the URI you wish to make relative.</li>\n<li>To construct a <code>file:</code> based URL, (1) call <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/nio/file/Path.html#toUri()\" rel=\"noreferrer\"><code>Path::toURI</code></a>, (2) then <code>URI::toURL</code>.</li>\n</ul>\n<p>Ex: <code>URI uri = Paths.get( &quot;/Users/your_user_name/example.txt&quot; ).toUri() ;</code></p>\n<h1>Details</h1>\n<p>Understand that:</p>\n<ul>\n<li><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/net/URL.html#%3Cinit%3E(java.lang.String)\" rel=\"noreferrer\"><code>java.net.URL</code></a> is an ancient class, dating from Java 1. That class does not encode or decode any URL components according to the <a href=\"https://www.rfc-editor.org/rfc/rfc2396\" rel=\"noreferrer\">RFC 2396</a> escaping mechanism.</li>\n<li><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/net/URI.html\" rel=\"noreferrer\"><code>java.net.URI</code></a> class came later, in Java 4.</li>\n</ul>\n<p>Read this note from the Java team, <a href=\"https://inside.java/2023/02/15/quality-heads-up/\" rel=\"noreferrer\">Oracle: Quality Outreach Heads-up - JDK 20: Deprecate URL Public Constructors</a>. To quote:</p>\n<blockquote>\n<p>JDK 20 will deprecate all public constructors of java.net.URL. … To construct a URL, the <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/net/URI.html#toURL()\" rel=\"noreferrer\"><code>URI::toURL</code></a> alternative should instead be preferred. To construct a <code>file:</code> based URL, <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/nio/file/Path.html#toUri()\" rel=\"noreferrer\"><code>Path::toURI</code></a> should be used prior to <code>URI::toURL</code>.</p>\n</blockquote>\n<p>And see the <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/net/URL.html#constructor-deprecation\" rel=\"noreferrer\">note on constructor deprecation</a> within the Javadoc  of <code>URL</code> class.</p>\n<p>See also the issue-tracker page, <a href=\"https://bugs.openjdk.org/browse/JDK-8294241\" rel=\"noreferrer\">JDK-8294241 Deprecate URL public constructors</a>.</p>\n<h2>Example: File path URI</h2>\n<p>For working with files in modern Java, use <a href=\"https://docs.oracle.com/javase/8/docs/technotes/guides/io/index.html\" rel=\"noreferrer\">NIO.2</a> features.</p>\n<p>The <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/nio/file/Paths.html\" rel=\"noreferrer\"><code>Paths</code></a> class can produce a <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/nio/file/Path.html\" rel=\"noreferrer\"><code>Path</code></a> object. From there, ask that <code>Path</code> to <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/nio/file/Path.html#toUri()\" rel=\"noreferrer\">produce a <code>URI</code></a>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Path path = Paths.get( &quot;/Users/your_user_name/example.txt&quot; ) ;\nURI uri = path.toUri () ;\nSystem.out.println ( &quot;uri = &quot; + uri );\n</code></pre>\n<blockquote>\n<p>uri = file:///Users/your_user_name/example.txt</p>\n</blockquote>\n<p>Going <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/nio/file/Paths.html#get(java.net.URI)\" rel=\"noreferrer\">the other direction</a>:</p>\n<pre><code>Path path = Paths.get( uri ) ;\n</code></pre>\n"}],"owner":{"account_id":207965,"reputation":3704,"user_id":458157,"accept_rate":75,"display_name":"gouessej"},"comment_count":13,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7945,"favorite_count":0,"down_vote_count":3,"up_vote_count":7,"accepted_answer_id":75968141,"answer_count":1,"score":4,"last_activity_date":1695789446,"creation_date":1680968838,"question_id":75966165,"body_markdown":"[All URL constructors are deprecated in Java 20][1]. I replaced `new URL(protocol, host, file)` by `new URI(protocol, host, file, null).toURL()` as I have no query and no fragment but I don&#39;t know what to do with the others:\r\n\r\n    /home/gouessej/Documents/programmation/java/workspace/Ardor3D/ardor3d-core/src/main/java/com/ardor3d/util/UrlUtils.java:40: warning: [deprecation] URL(String) in URL has been deprecated\r\n            return new URL(new URL(url), relativeLoc);\r\n                           ^\r\n    /home/gouessej/Documents/programmation/java/workspace/Ardor3D/ardor3d-core/src/main/java/com/ardor3d/util/UrlUtils.java:40: warning: [deprecation] URL(URL,String) in URL has been deprecated\r\n            return new URL(new URL(url), relativeLoc);\r\n                   ^\r\n    /home/gouessej/Documents/programmation/java/workspace/Ardor3D/ardor3d-core/src/main/java/com/ardor3d/util/resource/SimpleResourceLocator.java:94: warning: [deprecation] URL(URL,String) in URL has been deprecated\r\n                final URL rVal = new URL(_baseDir.toURL(), spec);\r\n                                 ^\r\n    /home/gouessej/Documents/programmation/java/workspace/Ardor3D/ardor3d-audio/src/main/java/com/ardor3d/audio/FilenameURL.java:125: warning: [deprecation] URL(String) in URL has been deprecated\r\n                        url = new URL( filename );\r\n\r\nWould simply `new URI(filename).toURL()`do the job in the last case?\r\n\r\nWhen I compare the wording in the Java documentation, I understand that an URI scheme means more or less a URL protocol, an URI host is an URL host and an URL file matches with a URI path and an optional URI query. What are the exact equivalent of `new URL(spec)` and `new URL(context, spec)`?\r\n\r\n[I prepared some suggested changes][2] but it doesn&#39;t work, an IllegalArgumentException is thrown.\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/net/URL.html#constructor-deprecation\r\n  [2]: https://jogamp.org/cgit/ardor3d.git/commit/?id=f9690cba75a6bbf352ef9eadf66931a89bc2baa2","title":"How to replace the deprecated URL constructors in Java 20?","body":"<p><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/net/URL.html#constructor-deprecation\" rel=\"nofollow noreferrer\">All URL constructors are deprecated in Java 20</a>. I replaced <code>new URL(protocol, host, file)</code> by <code>new URI(protocol, host, file, null).toURL()</code> as I have no query and no fragment but I don't know what to do with the others:</p>\n<pre><code>/home/gouessej/Documents/programmation/java/workspace/Ardor3D/ardor3d-core/src/main/java/com/ardor3d/util/UrlUtils.java:40: warning: [deprecation] URL(String) in URL has been deprecated\n        return new URL(new URL(url), relativeLoc);\n                       ^\n/home/gouessej/Documents/programmation/java/workspace/Ardor3D/ardor3d-core/src/main/java/com/ardor3d/util/UrlUtils.java:40: warning: [deprecation] URL(URL,String) in URL has been deprecated\n        return new URL(new URL(url), relativeLoc);\n               ^\n/home/gouessej/Documents/programmation/java/workspace/Ardor3D/ardor3d-core/src/main/java/com/ardor3d/util/resource/SimpleResourceLocator.java:94: warning: [deprecation] URL(URL,String) in URL has been deprecated\n            final URL rVal = new URL(_baseDir.toURL(), spec);\n                             ^\n/home/gouessej/Documents/programmation/java/workspace/Ardor3D/ardor3d-audio/src/main/java/com/ardor3d/audio/FilenameURL.java:125: warning: [deprecation] URL(String) in URL has been deprecated\n                    url = new URL( filename );\n</code></pre>\n<p>Would simply <code>new URI(filename).toURL()</code>do the job in the last case?</p>\n<p>When I compare the wording in the Java documentation, I understand that an URI scheme means more or less a URL protocol, an URI host is an URL host and an URL file matches with a URI path and an optional URI query. What are the exact equivalent of <code>new URL(spec)</code> and <code>new URL(context, spec)</code>?</p>\n<p><a href=\"https://jogamp.org/cgit/ardor3d.git/commit/?id=f9690cba75a6bbf352ef9eadf66931a89bc2baa2\" rel=\"nofollow noreferrer\">I prepared some suggested changes</a> but it doesn't work, an IllegalArgumentException is thrown.</p>\n"},{"tags":["java","ios","appium"],"answers":[{"tags":[],"owner":{"account_id":19923575,"reputation":82,"user_id":14598823,"display_name":"Fransiskus Andika Setiawan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1645671225,"creation_date":1645671225,"answer_id":71246504,"question_id":71098626,"body_markdown":"You can try this:\r\n\r\nPut &quot;Keys.ENTER&quot; after sendKeys &quot;Apple&quot; + Keys.ENTER\r\n\r\n    ....\r\n    AppiumDriver iosDriver = new IOSDriver(new URL(driverUrl), cap);\r\n    ....\r\n    iosDriver.findElement(By.xpath(&quot;//*[@class=\\&quot;search mw-ui-background-icon-search\\&quot;]&quot;)).sendKeys(&quot;Apple&quot; + Keys.ENTER);","title":"IOSDriver cannot perform sendKey Enter on IOS Safari","body":"<p>You can try this:</p>\n<p>Put &quot;Keys.ENTER&quot; after sendKeys &quot;Apple&quot; + Keys.ENTER</p>\n<pre><code>....\nAppiumDriver iosDriver = new IOSDriver(new URL(driverUrl), cap);\n....\niosDriver.findElement(By.xpath(&quot;//*[@class=\\&quot;search mw-ui-background-icon-search\\&quot;]&quot;)).sendKeys(&quot;Apple&quot; + Keys.ENTER);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":25686400,"reputation":83,"user_id":19448419,"display_name":"HomeLander"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695789063,"creation_date":1695789063,"answer_id":77184687,"question_id":71098626,"body_markdown":"This would also work with javascript executor.\r\n\r\ndriver.execute_script(&quot;var a = document.getElementById(&#39;element_location_id&#39;); a.focus(); a.value=&#39;10&#39;;&quot;)\r\n","title":"IOSDriver cannot perform sendKey Enter on IOS Safari","body":"<p>This would also work with javascript executor.</p>\n<p>driver.execute_script(&quot;var a = document.getElementById('element_location_id'); a.focus(); a.value='10';&quot;)</p>\n"}],"owner":{"account_id":23541180,"reputation":1,"user_id":17585347,"display_name":"TLD"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":373,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1695789063,"creation_date":1644736421,"question_id":71098626,"body_markdown":"    My scenarios:\r\n    \r\n    1.Start Safari on Iphone\r\n    2.Navigate to &quot;https://ja.wikipedia.org/wiki/&quot;\r\n    3.Click on icon Search\r\n    4.Type text &quot;Apple&quot; and Enter\r\n\r\n[&gt; Step 4 Image &lt;][1]\r\n\r\n \r\n**I&#39;m using Java Appium.**\r\n**At step 4, Text &quot;Apple&quot; is typed BUT Enter Key cannot perform to send.**\r\n**Could someone help resolving this issue. My code:**\r\n\r\n        ....\r\n        AppiumDriver iosDriver = new IOSDriver(new URL(driverUrl), cap);\r\n        ....\r\n        iosDriver.findElement(By.xpath(&quot;//*[@class=\\&quot;search mw-ui-background-icon-search\\&quot;]&quot;)).sendKeys(&quot;Apple&quot;);\r\n        iosDriver.getKeyboard().pressKey(Keys.ENTER);\r\n\r\n  [1]: https://i.stack.imgur.com/HTDgd.png\r\n","title":"IOSDriver cannot perform sendKey Enter on IOS Safari","body":"<pre><code>My scenarios:\n\n1.Start Safari on Iphone\n2.Navigate to &quot;https://ja.wikipedia.org/wiki/&quot;\n3.Click on icon Search\n4.Type text &quot;Apple&quot; and Enter\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/HTDgd.png\" rel=\"nofollow noreferrer\">&gt; Step 4 Image &lt;</a></p>\n<p><strong>I'm using Java Appium.</strong>\n<strong>At step 4, Text &quot;Apple&quot; is typed BUT Enter Key cannot perform to send.</strong>\n<strong>Could someone help resolving this issue. My code:</strong></p>\n<pre><code>    ....\n    AppiumDriver iosDriver = new IOSDriver(new URL(driverUrl), cap);\n    ....\n    iosDriver.findElement(By.xpath(&quot;//*[@class=\\&quot;search mw-ui-background-icon-search\\&quot;]&quot;)).sendKeys(&quot;Apple&quot;);\n    iosDriver.getKeyboard().pressKey(Keys.ENTER);\n</code></pre>\n"},{"tags":["java","spring-boot"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1541487657,"post_id":53167040,"comment_id":93224069,"body_markdown":"You are using `@ConfigurationProperties` in a wrong way. You either use `@ConfigurationProperties` or `@Value` but not both. Remove the `@ConfigurationProperties` as it doesn&#39;t add anything here nor does your structure adhere to the conventions needed for this.","body":"You are using <code>@ConfigurationProperties</code> in a wrong way. You either use <code>@ConfigurationProperties</code> or <code>@Value</code> but not both. Remove the <code>@ConfigurationProperties</code> as it doesn&#39;t add anything here nor does your structure adhere to the conventions needed for this."}],"answers":[{"tags":[],"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"down_vote_count":0,"up_vote_count":13,"is_accepted":true,"score":13,"last_activity_date":1541487923,"creation_date":1541487923,"answer_id":53167184,"question_id":53167040,"body_markdown":"The problem is that you are using the `@ConfigurationProperties` in a wrong way. You use either `@ConfigurationProperties` or `@Value` but not both. \r\n\r\nThe solution either fix your class to be usable for `@ConfigurationProperties` or remove the `@ConfigurationProperties` annotation. \r\n\r\n    @Getter\r\n    @Setter\r\n    @Component\r\n    @ConfigurationProperties(prefix = &quot;simulator.geo&quot;,ignoreUnknownFields = false)\r\n    public class VendorSimulatorProperties {\r\n    \r\n        private String host = &quot;http://localhost:8080/&quot;;\r\n        private String b12;\r\n        private String b13;\r\n        private String b21;\r\n        private String c6;\r\n    \r\n    }\r\n\r\nYou need to fix the `prefix` it should be `simulator.geo` and your properties should be named after the keys in your file. You will also require setter next to the getter. However this will also need to change the rest of your configuration, to use the newly generated getters. \r\n\r\nFor you it is probably easier to remove `@ConfigurationProperties` as you weren&#39;t really using them in the first place. ","title":"SpringBoot 2 the elements were left unbound","body":"<p>The problem is that you are using the <code>@ConfigurationProperties</code> in a wrong way. You use either <code>@ConfigurationProperties</code> or <code>@Value</code> but not both. </p>\n\n<p>The solution either fix your class to be usable for <code>@ConfigurationProperties</code> or remove the <code>@ConfigurationProperties</code> annotation. </p>\n\n<pre><code>@Getter\n@Setter\n@Component\n@ConfigurationProperties(prefix = \"simulator.geo\",ignoreUnknownFields = false)\npublic class VendorSimulatorProperties {\n\n    private String host = \"http://localhost:8080/\";\n    private String b12;\n    private String b13;\n    private String b21;\n    private String c6;\n\n}\n</code></pre>\n\n<p>You need to fix the <code>prefix</code> it should be <code>simulator.geo</code> and your properties should be named after the keys in your file. You will also require setter next to the getter. However this will also need to change the rest of your configuration, to use the newly generated getters. </p>\n\n<p>For you it is probably easier to remove <code>@ConfigurationProperties</code> as you weren't really using them in the first place. </p>\n"},{"tags":[],"owner":{"account_id":469276,"reputation":23596,"user_id":875775,"display_name":"Tho"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1665852641,"creation_date":1623206291,"answer_id":67896790,"question_id":53167040,"body_markdown":"I got the same issue, but in my case, it&#39;s because I added `@AllArgsConstructor` but did not add `@NoArgsConstructor`. As the result, Spring was unable to create the config object (using the default constructor) so it just skips processing the configs and print out the warning.\r\n\r\n```java\r\n@Getter\r\n@Setter\r\n@AllArgsConstructor\r\n@NoArgsConstructor // need to add this if you have @AllArgsConstructor\r\npublic class ServerConfiguration {\r\n    private String host;\r\n    private int port;\r\n}\r\n```","title":"SpringBoot 2 the elements were left unbound","body":"<p>I got the same issue, but in my case, it's because I added <code>@AllArgsConstructor</code> but did not add <code>@NoArgsConstructor</code>. As the result, Spring was unable to create the config object (using the default constructor) so it just skips processing the configs and print out the warning.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Getter\n@Setter\n@AllArgsConstructor\n@NoArgsConstructor // need to add this if you have @AllArgsConstructor\npublic class ServerConfiguration {\n    private String host;\n    private int port;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":29543910,"reputation":1,"user_id":22641953,"display_name":"wasonCheung"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695788800,"creation_date":1695788800,"answer_id":77184679,"question_id":53167040,"body_markdown":"maybe you can try adding a Modifier &quot;static&quot; for your inner class.\r\nfor example:\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n    @Data\r\n    @Configuration\r\n    @ConfigurationProperties(prefix = &quot;pvs.support.cache&quot;)\r\n    public class CacheProperties {\r\n\r\n      List&lt;Item&gt; items = new ArrayList&lt;&gt;();\r\n\r\n      @Data\r\n      public static class Item {\r\n        /*缓存名*/\r\n        String name;\r\n\r\n        /*过期时长*/\r\n        @DurationUnit(ChronoUnit.SECONDS)\r\n        Duration ttl = Duration.ofSeconds(3600);\r\n      }\r\n    }\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n","title":"SpringBoot 2 the elements were left unbound","body":"<p>maybe you can try adding a Modifier &quot;static&quot; for your inner class.\nfor example:</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>@Data\n@Configuration\n@ConfigurationProperties(prefix = \"pvs.support.cache\")\npublic class CacheProperties {\n\n  List&lt;Item&gt; items = new ArrayList&lt;&gt;();\n\n  @Data\n  public static class Item {\n    /*缓存名*/\n    String name;\n\n    /*过期时长*/\n    @DurationUnit(ChronoUnit.SECONDS)\n    Duration ttl = Duration.ofSeconds(3600);\n  }\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}],"owner":{"account_id":14156612,"reputation":91,"user_id":10227107,"display_name":"runbird"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":51308,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"accepted_answer_id":53167184,"answer_count":3,"score":8,"last_activity_date":1695788800,"creation_date":1541487307,"question_id":53167040,"body_markdown":"i have a file application.yml  with my Spring Boot application which is not willing to run.\r\n\r\nAccording to logs the reason of The elements [simulator.geo.b12,simulator.geo.b13,simulator.geo.b21,simulator.geo.c6,simulator.geo.host] were left unbound. This property however is set in application.yml and compiler is even returning it&#39;s value.\r\n\r\nI&#39;ll really appreciate if someone could lend me a hand with that issue.\r\n\r\n    simulator:\r\n        geo:\r\n            host: http://localhost:8080/\r\n            b12: http://localhost:8080/geo/b12\r\n            b13: http://localhost:8080/geo/b13\r\n            b21: http://localhost:8080/geo/b21\r\n            c6: http://localhost:8080/geo/c6\r\n\r\nand java class\r\n\r\n    @Getter\r\n    @Configuration\r\n    @ConfigurationProperties(prefix = &quot;simulator&quot;,ignoreUnknownFields = false)\r\n    public class VendorSimulatorProperties {\r\n    \r\n    \t@Value(&quot;${simulator.geo.host:http://localhost:8080/}&quot;)\r\n    \tprivate String initUrl;\r\n    \t\r\n    \t@Value(&quot;${simulator.geo.b12}&quot;)\r\n    \tprivate String geoB12Url;\r\n    \t\r\n    \t@Value(&quot;${simulator.geo.b13}&quot;)\r\n    \tprivate String geoB13Url;\r\n    \r\n    \t@Value(&quot;${simulator.geo.b21}&quot;)\r\n    \tprivate String geoB21Url;\r\n    \r\n    \t@Value(&quot;${simulator.geo.c6}&quot;)\r\n    \tprivate String geoC6Url;\r\n    }\r\n\r\nwhen i start to run application, i got the error msg :\r\n\r\n    **************************\r\n    APPLICATION FAILED TO START\r\n    ***************************\r\n\r\n    Description:\r\n\r\n    Binding to target [Bindable@1c140c7c type = com.mathartsys.dlc.thirdparty.vendor.config.VendorSimulatorProperties$$EnhancerBySpringCGLIB$$eb0a550b, value = &#39;provided&#39;, annotations = array&lt;Annotation&gt;[@org.springframework.boot.context.properties.ConfigurationProperties(prefix=simulator, value=simulator, ignoreUnknownFields=false, ignoreInvalidFields=false)]] failed:\r\n    \r\n        Property: simulator.geo.b12\r\n        Value: http://localhost:8080/geo/b12\r\n        Origin: class path resource [config/application-dev.yml]:204:14\r\n        Reason: The elements [simulator.geo.b12,simulator.geo.b13,simulator.geo.b21,simulator.geo.c6,simulator.geo.host] were left unbound.\r\n        Property: simulator.geo.b13\r\n        Value: http://localhost:8080/geo/b13\r\n        Origin: class path resource [config/application-dev.yml]:205:14\r\n        Reason: The elements [simulator.geo.b12,simulator.geo.b13,simulator.geo.b21,simulator.geo.c6,simulator.geo.host] were left unbound.\r\n        Property: simulator.geo.b21\r\n        Value: http://localhost:8080/geo/b21\r\n        Origin: class path resource [config/application-dev.yml]:206:14\r\n        Reason: The elements [simulator.geo.b12,simulator.geo.b13,simulator.geo.b21,simulator.geo.c6,simulator.geo.host] were left unbound.\r\n        Property: simulator.geo.c6\r\n        Value: http://localhost:8080/geo/c6\r\n        Origin: class path resource [config/application-dev.yml]:207:13\r\n        Reason: The elements [simulator.geo.b12,simulator.geo.b13,simulator.geo.b21,simulator.geo.c6,simulator.geo.host] were left unbound.\r\n        Property: simulator.geo.host\r\n        Value: http://localhost:8080/\r\n        Origin: class path resource [config/application-dev.yml]:203:15\r\n        Reason: The elements [simulator.geo.b12,simulator.geo.b13,simulator.geo.b21,simulator.geo.c6,simulator.geo.host] were left unbound.\r\n\r\nthis problem had confuse me long time, i hope someone can give me some advice; \r\ni used springboot 2.0\r\nthanks ","title":"SpringBoot 2 the elements were left unbound","body":"<p>i have a file application.yml  with my Spring Boot application which is not willing to run.</p>\n\n<p>According to logs the reason of The elements [simulator.geo.b12,simulator.geo.b13,simulator.geo.b21,simulator.geo.c6,simulator.geo.host] were left unbound. This property however is set in application.yml and compiler is even returning it's value.</p>\n\n<p>I'll really appreciate if someone could lend me a hand with that issue.</p>\n\n<pre><code>simulator:\n    geo:\n        host: http://localhost:8080/\n        b12: http://localhost:8080/geo/b12\n        b13: http://localhost:8080/geo/b13\n        b21: http://localhost:8080/geo/b21\n        c6: http://localhost:8080/geo/c6\n</code></pre>\n\n<p>and java class</p>\n\n<pre><code>@Getter\n@Configuration\n@ConfigurationProperties(prefix = \"simulator\",ignoreUnknownFields = false)\npublic class VendorSimulatorProperties {\n\n    @Value(\"${simulator.geo.host:http://localhost:8080/}\")\n    private String initUrl;\n\n    @Value(\"${simulator.geo.b12}\")\n    private String geoB12Url;\n\n    @Value(\"${simulator.geo.b13}\")\n    private String geoB13Url;\n\n    @Value(\"${simulator.geo.b21}\")\n    private String geoB21Url;\n\n    @Value(\"${simulator.geo.c6}\")\n    private String geoC6Url;\n}\n</code></pre>\n\n<p>when i start to run application, i got the error msg :</p>\n\n<pre><code>**************************\nAPPLICATION FAILED TO START\n***************************\n\nDescription:\n\nBinding to target [Bindable@1c140c7c type = com.mathartsys.dlc.thirdparty.vendor.config.VendorSimulatorProperties$$EnhancerBySpringCGLIB$$eb0a550b, value = 'provided', annotations = array&lt;Annotation&gt;[@org.springframework.boot.context.properties.ConfigurationProperties(prefix=simulator, value=simulator, ignoreUnknownFields=false, ignoreInvalidFields=false)]] failed:\n\n    Property: simulator.geo.b12\n    Value: http://localhost:8080/geo/b12\n    Origin: class path resource [config/application-dev.yml]:204:14\n    Reason: The elements [simulator.geo.b12,simulator.geo.b13,simulator.geo.b21,simulator.geo.c6,simulator.geo.host] were left unbound.\n    Property: simulator.geo.b13\n    Value: http://localhost:8080/geo/b13\n    Origin: class path resource [config/application-dev.yml]:205:14\n    Reason: The elements [simulator.geo.b12,simulator.geo.b13,simulator.geo.b21,simulator.geo.c6,simulator.geo.host] were left unbound.\n    Property: simulator.geo.b21\n    Value: http://localhost:8080/geo/b21\n    Origin: class path resource [config/application-dev.yml]:206:14\n    Reason: The elements [simulator.geo.b12,simulator.geo.b13,simulator.geo.b21,simulator.geo.c6,simulator.geo.host] were left unbound.\n    Property: simulator.geo.c6\n    Value: http://localhost:8080/geo/c6\n    Origin: class path resource [config/application-dev.yml]:207:13\n    Reason: The elements [simulator.geo.b12,simulator.geo.b13,simulator.geo.b21,simulator.geo.c6,simulator.geo.host] were left unbound.\n    Property: simulator.geo.host\n    Value: http://localhost:8080/\n    Origin: class path resource [config/application-dev.yml]:203:15\n    Reason: The elements [simulator.geo.b12,simulator.geo.b13,simulator.geo.b21,simulator.geo.c6,simulator.geo.host] were left unbound.\n</code></pre>\n\n<p>this problem had confuse me long time, i hope someone can give me some advice; \ni used springboot 2.0\nthanks </p>\n"},{"tags":["java","sms"],"comments":[{"owner":{"account_id":352898,"reputation":963,"user_id":690258,"display_name":"Keshav Saharia"},"score":0,"creation_date":1335327046,"post_id":10309139,"comment_id":13269166,"body_markdown":"Google is actually a terrible resource for information on SMS gateways.","body":"Google is actually a terrible resource for information on SMS gateways."},{"owner":{"account_id":1259089,"reputation":730,"user_id":1217913,"display_name":"Willa"},"score":0,"creation_date":1486760858,"post_id":10309139,"comment_id":71502336,"body_markdown":"@KeshavSaharia how is google of any relevance here?","body":"@KeshavSaharia how is google of any relevance here?"}],"answers":[{"tags":[],"owner":{"account_id":406375,"reputation":5054,"user_id":775849,"display_name":"Jasonw"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1695788739,"creation_date":1335326505,"answer_id":10309193,"question_id":10309139,"body_markdown":"Since you chosen java as the language for your sms application, it should not be a big problem to work in linux and windows. Have you look into these java sms library?\r\n\r\n * [SMSLib][1]\r\n * [smppapi][2]\r\n\r\nThe library above should come with a lot of example application that explain on how to make calls to send or receive sms.\r\n\r\nYou can also try the these SMSC simulator\r\n\r\n * [SMSC simulator][3] from Logica \r\n * [smscsim][4] \r\n\r\n\r\n  [1]: http://smslib.org/\r\n  [2]: http://smppapi.sourceforge.net/\r\n  [3]: http://opensmpp.logica.com/CommonPart/Download/download2.html\r\n  [4]: http://code.google.com/p/smscsim/","title":"SMS Java Libraries","body":"<p>Since you chosen java as the language for your sms application, it should not be a big problem to work in linux and windows. Have you look into these java sms library?</p>\n<ul>\n<li><a href=\"http://smslib.org/\" rel=\"nofollow noreferrer\">SMSLib</a></li>\n<li><a href=\"http://smppapi.sourceforge.net/\" rel=\"nofollow noreferrer\">smppapi</a></li>\n</ul>\n<p>The library above should come with a lot of example application that explain on how to make calls to send or receive sms.</p>\n<p>You can also try the these SMSC simulator</p>\n<ul>\n<li><a href=\"http://opensmpp.logica.com/CommonPart/Download/download2.html\" rel=\"nofollow noreferrer\">SMSC simulator</a> from Logica</li>\n<li><a href=\"http://code.google.com/p/smscsim/\" rel=\"nofollow noreferrer\">smscsim</a></li>\n</ul>\n"}],"owner":{"account_id":1296553,"reputation":25,"user_id":1247468,"display_name":"Rona Walter Finiasi"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6325,"favorite_count":0,"down_vote_count":2,"up_vote_count":3,"closed_date":1548936026,"answer_count":1,"score":1,"last_activity_date":1695788739,"creation_date":1335325990,"question_id":10309139,"body_markdown":"I&#39;m working a java desktop application for sending and receiving messages.Any one can help me with free Java libraries that will help my program run well.I also need to document the library information.SMS Gateway and SMSC all up and running , I just need to create a application that will run on both linux or windows server that can send and receive messages.This project is concerning mLearning. ","title":"SMS Java Libraries","body":"<p>I'm working a java desktop application for sending and receiving messages.Any one can help me with free Java libraries that will help my program run well.I also need to document the library information.SMS Gateway and SMSC all up and running , I just need to create a application that will run on both linux or windows server that can send and receive messages.This project is concerning mLearning. </p>\n"},{"tags":["java","spring-boot","security"],"comments":[{"owner":{"account_id":24440940,"reputation":3122,"user_id":18364656,"display_name":"Andrei Lisa"},"score":0,"creation_date":1692894403,"post_id":76969716,"comment_id":135689361,"body_markdown":"what about Sonar Lint plugin, did you try it ?","body":"what about Sonar Lint plugin, did you try it ?"},{"owner":{"account_id":17893364,"reputation":94,"user_id":12999361,"display_name":"Sowik"},"score":0,"creation_date":1692902153,"post_id":76969716,"comment_id":135691021,"body_markdown":"OWASP Dependency Check checks if the versions of the dependencies have public vulnerabilities.","body":"OWASP Dependency Check checks if the versions of the dependencies have public vulnerabilities."},{"owner":{"account_id":17703195,"reputation":31,"user_id":12852415,"display_name":"Manu Bouzas"},"score":0,"creation_date":1692972910,"post_id":76969716,"comment_id":135702003,"body_markdown":"But not sql injections","body":"But not sql injections"},{"owner":{"account_id":17703195,"reputation":31,"user_id":12852415,"display_name":"Manu Bouzas"},"score":0,"creation_date":1692972942,"post_id":76969716,"comment_id":135702011,"body_markdown":"@AndreiLisa I tried, and not sql injections are detected","body":"@AndreiLisa I tried, and not sql injections are detected"},{"owner":{"account_id":24440940,"reputation":3122,"user_id":18364656,"display_name":"Andrei Lisa"},"score":0,"creation_date":1692973963,"post_id":76969716,"comment_id":135702275,"body_markdown":"[14538-reshift-security](https://plugins.jetbrains.com/plugin/14538-reshift-security)","body":"<a href=\"https://plugins.jetbrains.com/plugin/14538-reshift-security\" rel=\"nofollow noreferrer\">14538-reshift-security</a>"},{"owner":{"account_id":17703195,"reputation":31,"user_id":12852415,"display_name":"Manu Bouzas"},"score":1,"creation_date":1693312185,"post_id":76969716,"comment_id":135741412,"body_markdown":"@AndreiLisa Thanks, I just run reshift and sql injections are not detected :(","body":"@AndreiLisa Thanks, I just run reshift and sql injections are not detected :("}],"owner":{"account_id":17703195,"reputation":31,"user_id":12852415,"display_name":"Manu Bouzas"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":78,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1695788351,"creation_date":1692883243,"question_id":76969716,"body_markdown":"any recommendation to install and run locally any plugin on Intellij to avoid security vulnerabilities like SQL Injections, it is not an open source project, written in Java.\r\n\r\nThanks a lot","title":"Intellij Plugin to scan code security (locally)","body":"<p>any recommendation to install and run locally any plugin on Intellij to avoid security vulnerabilities like SQL Injections, it is not an open source project, written in Java.</p>\n<p>Thanks a lot</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":228170,"reputation":16153,"user_id":490315,"accept_rate":94,"display_name":"whirlwin"},"score":3,"creation_date":1305489489,"post_id":6010843,"comment_id":6946106,"body_markdown":"Or create a new class that holds the three objects. What are you using it for?","body":"Or create a new class that holds the three objects. What are you using it for?"}],"answers":[{"tags":[],"owner":{"account_id":101585,"reputation":107721,"user_id":273200,"accept_rate":100,"display_name":"Bala R"},"down_vote_count":0,"up_vote_count":71,"is_accepted":true,"score":71,"last_activity_date":1478717953,"creation_date":1305489535,"answer_id":6010861,"question_id":6010843,"body_markdown":"    public class Triplet&lt;T, U, V&gt; {\r\n\r\n        private final T first;\r\n        private final U second;\r\n        private final V third;\r\n\r\n        public Triplet(T first, U second, V third) {\r\n            this.first = first;\r\n            this.second = second;\r\n            this.third = third;\r\n        }\r\n    \r\n        public T getFirst() { return first; }\r\n        public U getSecond() { return second; }\r\n        public V getThird() { return third; }\r\n    }\r\n\r\nAnd to instantiate the list:\r\n\r\n    List&lt;Triplet&lt;String, Integer, Integer&gt;&gt; = new ArrayList&lt;&gt;();","title":"Java: how to store data triple in a list?","body":"<pre><code>public class Triplet&lt;T, U, V&gt; {\n\n    private final T first;\n    private final U second;\n    private final V third;\n\n    public Triplet(T first, U second, V third) {\n        this.first = first;\n        this.second = second;\n        this.third = third;\n    }\n\n    public T getFirst() { return first; }\n    public U getSecond() { return second; }\n    public V getThird() { return third; }\n}\n</code></pre>\n\n<p>And to instantiate the list:</p>\n\n<pre><code>List&lt;Triplet&lt;String, Integer, Integer&gt;&gt; = new ArrayList&lt;&gt;();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":686808,"reputation":1236,"user_id":547780,"accept_rate":38,"display_name":"AbuZubair"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1384652129,"creation_date":1346952157,"answer_id":12305256,"question_id":6010843,"body_markdown":"I seem to agree with whirlwin.\r\n\r\nThe general consensus, although I can&#39;t find the evidence now, stipulates that parametrized types should be no more than 2. This is why every class I can think of in the Java collections library has at max two parametrized types. \r\n\r\nCode becomes cluttered when you have three parametrized types. Just way too many &gt;,&lt; to deal with.\r\n\r\nI suggest what whirlwin said and create an object that holds the three specific types you need. ","title":"Java: how to store data triple in a list?","body":"<p>I seem to agree with whirlwin.</p>\n\n<p>The general consensus, although I can't find the evidence now, stipulates that parametrized types should be no more than 2. This is why every class I can think of in the Java collections library has at max two parametrized types. </p>\n\n<p>Code becomes cluttered when you have three parametrized types. Just way too many >,&lt; to deal with.</p>\n\n<p>I suggest what whirlwin said and create an object that holds the three specific types you need. </p>\n"},{"tags":[],"owner":{"account_id":106337,"reputation":30941,"user_id":283311,"accept_rate":76,"display_name":"Ken"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1429349082,"creation_date":1384651891,"answer_id":20026120,"question_id":6010843,"body_markdown":"If you expect track four or more objects together, look for something that scales.\r\n\r\nIf you were to decide you want the notion of a Triple, to get some ideas you can follow Sun&#39;s pattern for [javac.util.Pair][1]:\r\n\r\n    public class Pair&lt;A, B&gt; {\r\n    \r\n        public final A fst;\r\n        public final B snd;\r\n    \r\n        public Pair(A fst, B snd) {\r\n            this.fst = fst;\r\n            this.snd = snd;\r\n        }\r\n    \r\n        public String toString() {\r\n            return &quot;Pair[&quot; + fst + &quot;,&quot; + snd + &quot;]&quot;;\r\n        }\r\n    \r\n        private static boolean equals(Object x, Object y) {\r\n            return (x == null &amp;&amp; y == null) || (x != null &amp;&amp; x.equals(y));\r\n        }\r\n    \r\n        public boolean equals(Object other) {\r\n            return\r\n                other instanceof Pair&lt;?,?&gt; &amp;&amp;\r\n                equals(fst, ((Pair&lt;?,?&gt;)other).fst) &amp;&amp;\r\n                equals(snd, ((Pair&lt;?,?&gt;)other).snd);\r\n        }\r\n    \r\n        public int hashCode() {\r\n            if (fst == null) return (snd == null) ? 0 : snd.hashCode() + 1;\r\n            else if (snd == null) return fst.hashCode() + 2;\r\n            else return fst.hashCode() * 17 + snd.hashCode();\r\n        }\r\n    \r\n        public static &lt;A,B&gt; Pair&lt;A,B&gt; of(A a, B b) {\r\n            return new Pair&lt;A,B&gt;(a,b);\r\n        }\r\n    }\r\n\r\nor follow Google&#39;s [android.util.Pair][2]\r\n\r\n    public class Pair&lt;F, S&gt; {\r\n        public final F first;\r\n        public final S second;\r\n    \r\n        public Pair(F first, S second) {\r\n            this.first = first;\r\n            this.second = second;\r\n        }\r\n    \r\n        public boolean equals(Object o) {\r\n            if (o == this) return true;\r\n            if (!(o instanceof Pair)) return false;\r\n            final Pair&lt;F, S&gt; other;\r\n            try {\r\n                other = (Pair&lt;F, S&gt;) o;\r\n            } catch (ClassCastException e) {\r\n                return false;\r\n            }\r\n            return first.equals(other.first) &amp;&amp; second.equals(other.second);\r\n        }\r\n        \r\n        public int hashCode() {\r\n            int result = 17;\r\n            result = 31 * result + first.hashCode();\r\n            result = 31 * result + second.hashCode();\r\n            return result;\r\n        }\r\n        //...\r\n    }\r\n\r\n  [1]: http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/7-b147/com/sun/tools/javac/util/Pair.java\r\n  [2]: http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.2_r1.1/android/util/Pair.java","title":"Java: how to store data triple in a list?","body":"<p>If you expect track four or more objects together, look for something that scales.</p>\n\n<p>If you were to decide you want the notion of a Triple, to get some ideas you can follow Sun's pattern for <a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/7-b147/com/sun/tools/javac/util/Pair.java\" rel=\"nofollow\">javac.util.Pair</a>:</p>\n\n<pre><code>public class Pair&lt;A, B&gt; {\n\n    public final A fst;\n    public final B snd;\n\n    public Pair(A fst, B snd) {\n        this.fst = fst;\n        this.snd = snd;\n    }\n\n    public String toString() {\n        return \"Pair[\" + fst + \",\" + snd + \"]\";\n    }\n\n    private static boolean equals(Object x, Object y) {\n        return (x == null &amp;&amp; y == null) || (x != null &amp;&amp; x.equals(y));\n    }\n\n    public boolean equals(Object other) {\n        return\n            other instanceof Pair&lt;?,?&gt; &amp;&amp;\n            equals(fst, ((Pair&lt;?,?&gt;)other).fst) &amp;&amp;\n            equals(snd, ((Pair&lt;?,?&gt;)other).snd);\n    }\n\n    public int hashCode() {\n        if (fst == null) return (snd == null) ? 0 : snd.hashCode() + 1;\n        else if (snd == null) return fst.hashCode() + 2;\n        else return fst.hashCode() * 17 + snd.hashCode();\n    }\n\n    public static &lt;A,B&gt; Pair&lt;A,B&gt; of(A a, B b) {\n        return new Pair&lt;A,B&gt;(a,b);\n    }\n}\n</code></pre>\n\n<p>or follow Google's <a href=\"http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.2_r1.1/android/util/Pair.java\" rel=\"nofollow\">android.util.Pair</a></p>\n\n<pre><code>public class Pair&lt;F, S&gt; {\n    public final F first;\n    public final S second;\n\n    public Pair(F first, S second) {\n        this.first = first;\n        this.second = second;\n    }\n\n    public boolean equals(Object o) {\n        if (o == this) return true;\n        if (!(o instanceof Pair)) return false;\n        final Pair&lt;F, S&gt; other;\n        try {\n            other = (Pair&lt;F, S&gt;) o;\n        } catch (ClassCastException e) {\n            return false;\n        }\n        return first.equals(other.first) &amp;&amp; second.equals(other.second);\n    }\n\n    public int hashCode() {\n        int result = 17;\n        result = 31 * result + first.hashCode();\n        result = 31 * result + second.hashCode();\n        return result;\n    }\n    //...\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6019943,"reputation":165,"user_id":4727406,"display_name":"NikitaFeodonit"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1429359807,"creation_date":1429359807,"answer_id":29717306,"question_id":6010843,"body_markdown":"Based on [Triple][1] and [ImmutableTriple][2] without dependences of imports of Apache&#39;s code. L, M, and R types must implement interface Comparable.\r\n\r\nTriple.java\r\n\r\n    import java.io.Serializable;\r\n    \r\n    /**\r\n     * &lt;p&gt;A triple consisting of three elements.&lt;/p&gt;\r\n     * &lt;p/&gt;\r\n     * &lt;p&gt;This class is an abstract implementation defining the basic API. It refers to the elements as\r\n     * &#39;left&#39;, &#39;middle&#39; and &#39;right&#39;.&lt;/p&gt;\r\n     * &lt;p/&gt;\r\n     * &lt;p&gt;Subclass implementations may be mutable or immutable. However, there is no restriction on the\r\n     * type of the stored objects that may be stored. If mutable objects are stored in the triple, then\r\n     * the triple itself effectively becomes mutable.&lt;/p&gt;\r\n     *\r\n     * @param &lt;L&gt;\r\n     *         the left element type\r\n     * @param &lt;M&gt;\r\n     *         the middle element type\r\n     * @param &lt;R&gt;\r\n     *         the right element type\r\n     *\r\n     * @version $Id: Triple.java 1557584 2014-01-12 18:26:49Z britter $\r\n     * @since 3.2\r\n     */\r\n    public abstract class Triple&lt;L, M, R&gt;\r\n            implements Comparable&lt;Triple&lt;L, M, R&gt;&gt;, Serializable\r\n    {\r\n    \r\n        /**\r\n         * Serialization version\r\n         */\r\n        private static final long serialVersionUID = 1L;\r\n    \r\n    \r\n        /**\r\n         * &lt;p&gt;Obtains an immutable triple of from three objects inferring the generic types.&lt;/p&gt;\r\n         * &lt;p/&gt;\r\n         * &lt;p&gt;This factory allows the triple to be created using inference to obtain the generic\r\n         * types.&lt;/p&gt;\r\n         *\r\n         * @param &lt;L&gt;\r\n         *         the left element type\r\n         * @param &lt;M&gt;\r\n         *         the middle element type\r\n         * @param &lt;R&gt;\r\n         *         the right element type\r\n         * @param left\r\n         *         the left element, may be null\r\n         * @param middle\r\n         *         the middle element, may be null\r\n         * @param right\r\n         *         the right element, may be null\r\n         *\r\n         * @return a triple formed from the three parameters, not null\r\n         */\r\n        public static &lt;L, M, R&gt; Triple&lt;L, M, R&gt; of(\r\n                final L left,\r\n                final M middle,\r\n                final R right)\r\n        {\r\n            return new ImmutableTriple&lt;L, M, R&gt;(left, middle, right);\r\n        }\r\n    \r\n        //-----------------------------------------------------------------------\r\n    \r\n    \r\n        /**\r\n         * &lt;p&gt;Gets the left element from this triple.&lt;/p&gt;\r\n         *\r\n         * @return the left element, may be null\r\n         */\r\n        public abstract L getLeft();\r\n    \r\n        /**\r\n         * &lt;p&gt;Gets the middle element from this triple.&lt;/p&gt;\r\n         *\r\n         * @return the middle element, may be null\r\n         */\r\n        public abstract M getMiddle();\r\n    \r\n        /**\r\n         * &lt;p&gt;Gets the right element from this triple.&lt;/p&gt;\r\n         *\r\n         * @return the right element, may be null\r\n         */\r\n        public abstract R getRight();\r\n    \r\n        //-----------------------------------------------------------------------\r\n    \r\n    \r\n        /**\r\n         * &lt;p&gt;Compares the triple based on the left element, followed by the middle element, finally the\r\n         * right element. The types must be {@code Comparable}.&lt;/p&gt;\r\n         *\r\n         * @param other\r\n         *         the other triple, not null\r\n         *\r\n         * @return negative if this is less, zero if equal, positive if greater\r\n         */\r\n        @Override\r\n        public int compareTo(final Triple&lt;L, M, R&gt; other)\r\n        {\r\n            @SuppressWarnings(&quot;unchecked&quot;) // assume this can be done; if not throw CCE as per Javadoc\r\n            final Comparable&lt;Object&gt; comparableLeft = (Comparable&lt;Object&gt;) getLeft();\r\n            int cmpLeft = comparableLeft.compareTo(other.getLeft());\r\n    \r\n            if (cmpLeft != 0) {\r\n                return cmpLeft;\r\n            }\r\n    \r\n            @SuppressWarnings(&quot;unchecked&quot;) // assume this can be done; if not throw CCE as per Javadoc\r\n            final Comparable&lt;Object&gt; comparableMidle = (Comparable&lt;Object&gt;) getMiddle();\r\n            int cmpMidle = comparableMidle.compareTo(other.getMiddle());\r\n    \r\n            if (cmpMidle != 0) {\r\n                return cmpMidle;\r\n            }\r\n    \r\n            @SuppressWarnings(&quot;unchecked&quot;) // assume this can be done; if not throw CCE as per Javadoc\r\n            final Comparable&lt;Object&gt; comparableRight = (Comparable&lt;Object&gt;) getRight();\r\n            int cmpRight = comparableRight.compareTo(other.getRight());\r\n    \r\n            return cmpRight;\r\n        }\r\n    \r\n    \r\n        /**\r\n         * &lt;p&gt;Compares this triple to another based on the three elements.&lt;/p&gt;\r\n         *\r\n         * @param obj\r\n         *         the object to compare to, null returns false\r\n         *\r\n         * @return true if the elements of the triple are equal\r\n         */\r\n        @Override\r\n        public boolean equals(final Object obj)\r\n        {\r\n            if (obj == null) {\r\n                return false;\r\n            }\r\n            if (obj == this) {\r\n                return true;\r\n            }\r\n            if (obj instanceof Triple&lt;?, ?, ?&gt;) {\r\n                final Triple&lt;?, ?, ?&gt; other = (Triple&lt;?, ?, ?&gt;) obj;\r\n    \r\n    \r\n                return equals(getLeft(), other.getLeft()) &amp;&amp;\r\n                        equals(getMiddle(), other.getMiddle()) &amp;&amp;\r\n                        equals(getRight(), other.getRight());\r\n            }\r\n            return false;\r\n        }\r\n    \r\n    \r\n        private boolean equals(\r\n                final Object object1,\r\n                final Object object2)\r\n        {\r\n            return !(object1 == null || object2 == null) &amp;&amp;\r\n                    (object1 == object2 || object1.equals(object2));\r\n        }\r\n    \r\n    \r\n        /**\r\n         * &lt;p&gt;Returns a suitable hash code.&lt;/p&gt;\r\n         *\r\n         * @return the hash code\r\n         */\r\n        @Override\r\n        public int hashCode()\r\n        {\r\n            return (getLeft() == null ? 0 : getLeft().hashCode()) ^\r\n                    (getMiddle() == null ? 0 : getMiddle().hashCode()) ^\r\n                    (getRight() == null ? 0 : getRight().hashCode());\r\n        }\r\n    \r\n    \r\n        /**\r\n         * &lt;p&gt;Returns a String representation of this triple using the format {@code\r\n         * ($left, $middle, $right)}.&lt;/p&gt;\r\n         *\r\n         * @return a string describing this object, not null\r\n         */\r\n        @Override\r\n        public String toString()\r\n        {\r\n            return new StringBuilder().append(&#39;(&#39;)\r\n                    .append(getLeft())\r\n                    .append(&#39;,&#39;)\r\n                    .append(getMiddle())\r\n                    .append(&#39;,&#39;)\r\n                    .append(getRight())\r\n                    .append(&#39;)&#39;)\r\n                    .toString();\r\n        }\r\n    \r\n    \r\n        /**\r\n         * &lt;p&gt;Formats the receiver using the given format.&lt;/p&gt;\r\n         * &lt;p/&gt;\r\n         * &lt;p&gt;This uses {@link java.util.Formattable} to perform the formatting. Three variables may be\r\n         * used to embed the left and right elements. Use {@code %1$s} for the left element, {@code\r\n         * %2$s} for the middle and {@code %3$s} for the right element. The default format used by\r\n         * {@code toString()} is {@code (%1$s,%2$s,%3$s)}.&lt;/p&gt;\r\n         *\r\n         * @param format\r\n         *         the format string, optionally containing {@code %1$s}, {@code %2$s} and {@code %3$s},\r\n         *         not null\r\n         *\r\n         * @return the formatted string, not null\r\n         */\r\n        public String toString(final String format)\r\n        {\r\n            return String.format(format, getLeft(), getMiddle(), getRight());\r\n        }\r\n    }\r\n\r\nImmutableTriple.java\r\n\r\n    public final class ImmutableTriple&lt;L, M, R&gt; extends Triple&lt;L, M, R&gt; {\r\n    \r\n        /** Serialization version */\r\n        private static final long serialVersionUID = 1L;\r\n    \r\n        /** Left object */\r\n        public final L left;\r\n        /** Middle object */\r\n        public final M middle;\r\n        /** Right object */\r\n        public final R right;\r\n    \r\n        /**\r\n         * &lt;p&gt;Obtains an immutable triple of from three objects inferring the generic types.&lt;/p&gt;\r\n         *\r\n         * &lt;p&gt;This factory allows the triple to be created using inference to\r\n         * obtain the generic types.&lt;/p&gt;\r\n         *\r\n         * @param &lt;L&gt; the left element type\r\n         * @param &lt;M&gt; the middle element type\r\n         * @param &lt;R&gt; the right element type\r\n         * @param left  the left element, may be null\r\n         * @param middle  the middle element, may be null\r\n         * @param right  the right element, may be null\r\n         * @return a triple formed from the three parameters, not null\r\n         */\r\n        public static &lt;L, M, R&gt; ImmutableTriple&lt;L, M, R&gt; of(final L left, final M middle, final R right) {\r\n            return new ImmutableTriple&lt;L, M, R&gt;(left, middle, right);\r\n        }\r\n    \r\n        /**\r\n         * Create a new triple instance.\r\n         *\r\n         * @param left  the left value, may be null\r\n         * @param middle the middle value, may be null\r\n         * @param right  the right value, may be null\r\n         */\r\n        public ImmutableTriple(final L left, final M middle, final R right) {\r\n            super();\r\n            this.left = left;\r\n            this.middle = middle;\r\n            this.right = right;\r\n        }\r\n    \r\n        //-----------------------------------------------------------------------\r\n        /**\r\n         * {@inheritDoc}\r\n         */\r\n        @Override\r\n        public L getLeft() {\r\n            return left;\r\n        }\r\n    \r\n        /**\r\n         * {@inheritDoc}\r\n         */\r\n        @Override\r\n        public M getMiddle() {\r\n            return middle;\r\n        }\r\n    \r\n        /**\r\n         * {@inheritDoc}\r\n         */\r\n        @Override\r\n        public R getRight() {\r\n            return right;\r\n        }\r\n    }\r\n\r\n  [1]: http://commons.apache.org/proper/commons-lang/apidocs/src-html/org/apache/commons/lang3/tuple/Triple.html\r\n  [2]: https://commons.apache.org/proper/commons-lang/javadocs/api-3.3.2/src-html/org/apache/commons/lang3/tuple/ImmutableTriple.html\r\n\r\n\r\n","title":"Java: how to store data triple in a list?","body":"<p>Based on <a href=\"http://commons.apache.org/proper/commons-lang/apidocs/src-html/org/apache/commons/lang3/tuple/Triple.html\" rel=\"nofollow\">Triple</a> and <a href=\"https://commons.apache.org/proper/commons-lang/javadocs/api-3.3.2/src-html/org/apache/commons/lang3/tuple/ImmutableTriple.html\" rel=\"nofollow\">ImmutableTriple</a> without dependences of imports of Apache's code. L, M, and R types must implement interface Comparable.</p>\n\n<p>Triple.java</p>\n\n<pre><code>import java.io.Serializable;\n\n/**\n * &lt;p&gt;A triple consisting of three elements.&lt;/p&gt;\n * &lt;p/&gt;\n * &lt;p&gt;This class is an abstract implementation defining the basic API. It refers to the elements as\n * 'left', 'middle' and 'right'.&lt;/p&gt;\n * &lt;p/&gt;\n * &lt;p&gt;Subclass implementations may be mutable or immutable. However, there is no restriction on the\n * type of the stored objects that may be stored. If mutable objects are stored in the triple, then\n * the triple itself effectively becomes mutable.&lt;/p&gt;\n *\n * @param &lt;L&gt;\n *         the left element type\n * @param &lt;M&gt;\n *         the middle element type\n * @param &lt;R&gt;\n *         the right element type\n *\n * @version $Id: Triple.java 1557584 2014-01-12 18:26:49Z britter $\n * @since 3.2\n */\npublic abstract class Triple&lt;L, M, R&gt;\n        implements Comparable&lt;Triple&lt;L, M, R&gt;&gt;, Serializable\n{\n\n    /**\n     * Serialization version\n     */\n    private static final long serialVersionUID = 1L;\n\n\n    /**\n     * &lt;p&gt;Obtains an immutable triple of from three objects inferring the generic types.&lt;/p&gt;\n     * &lt;p/&gt;\n     * &lt;p&gt;This factory allows the triple to be created using inference to obtain the generic\n     * types.&lt;/p&gt;\n     *\n     * @param &lt;L&gt;\n     *         the left element type\n     * @param &lt;M&gt;\n     *         the middle element type\n     * @param &lt;R&gt;\n     *         the right element type\n     * @param left\n     *         the left element, may be null\n     * @param middle\n     *         the middle element, may be null\n     * @param right\n     *         the right element, may be null\n     *\n     * @return a triple formed from the three parameters, not null\n     */\n    public static &lt;L, M, R&gt; Triple&lt;L, M, R&gt; of(\n            final L left,\n            final M middle,\n            final R right)\n    {\n        return new ImmutableTriple&lt;L, M, R&gt;(left, middle, right);\n    }\n\n    //-----------------------------------------------------------------------\n\n\n    /**\n     * &lt;p&gt;Gets the left element from this triple.&lt;/p&gt;\n     *\n     * @return the left element, may be null\n     */\n    public abstract L getLeft();\n\n    /**\n     * &lt;p&gt;Gets the middle element from this triple.&lt;/p&gt;\n     *\n     * @return the middle element, may be null\n     */\n    public abstract M getMiddle();\n\n    /**\n     * &lt;p&gt;Gets the right element from this triple.&lt;/p&gt;\n     *\n     * @return the right element, may be null\n     */\n    public abstract R getRight();\n\n    //-----------------------------------------------------------------------\n\n\n    /**\n     * &lt;p&gt;Compares the triple based on the left element, followed by the middle element, finally the\n     * right element. The types must be {@code Comparable}.&lt;/p&gt;\n     *\n     * @param other\n     *         the other triple, not null\n     *\n     * @return negative if this is less, zero if equal, positive if greater\n     */\n    @Override\n    public int compareTo(final Triple&lt;L, M, R&gt; other)\n    {\n        @SuppressWarnings(\"unchecked\") // assume this can be done; if not throw CCE as per Javadoc\n        final Comparable&lt;Object&gt; comparableLeft = (Comparable&lt;Object&gt;) getLeft();\n        int cmpLeft = comparableLeft.compareTo(other.getLeft());\n\n        if (cmpLeft != 0) {\n            return cmpLeft;\n        }\n\n        @SuppressWarnings(\"unchecked\") // assume this can be done; if not throw CCE as per Javadoc\n        final Comparable&lt;Object&gt; comparableMidle = (Comparable&lt;Object&gt;) getMiddle();\n        int cmpMidle = comparableMidle.compareTo(other.getMiddle());\n\n        if (cmpMidle != 0) {\n            return cmpMidle;\n        }\n\n        @SuppressWarnings(\"unchecked\") // assume this can be done; if not throw CCE as per Javadoc\n        final Comparable&lt;Object&gt; comparableRight = (Comparable&lt;Object&gt;) getRight();\n        int cmpRight = comparableRight.compareTo(other.getRight());\n\n        return cmpRight;\n    }\n\n\n    /**\n     * &lt;p&gt;Compares this triple to another based on the three elements.&lt;/p&gt;\n     *\n     * @param obj\n     *         the object to compare to, null returns false\n     *\n     * @return true if the elements of the triple are equal\n     */\n    @Override\n    public boolean equals(final Object obj)\n    {\n        if (obj == null) {\n            return false;\n        }\n        if (obj == this) {\n            return true;\n        }\n        if (obj instanceof Triple&lt;?, ?, ?&gt;) {\n            final Triple&lt;?, ?, ?&gt; other = (Triple&lt;?, ?, ?&gt;) obj;\n\n\n            return equals(getLeft(), other.getLeft()) &amp;&amp;\n                    equals(getMiddle(), other.getMiddle()) &amp;&amp;\n                    equals(getRight(), other.getRight());\n        }\n        return false;\n    }\n\n\n    private boolean equals(\n            final Object object1,\n            final Object object2)\n    {\n        return !(object1 == null || object2 == null) &amp;&amp;\n                (object1 == object2 || object1.equals(object2));\n    }\n\n\n    /**\n     * &lt;p&gt;Returns a suitable hash code.&lt;/p&gt;\n     *\n     * @return the hash code\n     */\n    @Override\n    public int hashCode()\n    {\n        return (getLeft() == null ? 0 : getLeft().hashCode()) ^\n                (getMiddle() == null ? 0 : getMiddle().hashCode()) ^\n                (getRight() == null ? 0 : getRight().hashCode());\n    }\n\n\n    /**\n     * &lt;p&gt;Returns a String representation of this triple using the format {@code\n     * ($left, $middle, $right)}.&lt;/p&gt;\n     *\n     * @return a string describing this object, not null\n     */\n    @Override\n    public String toString()\n    {\n        return new StringBuilder().append('(')\n                .append(getLeft())\n                .append(',')\n                .append(getMiddle())\n                .append(',')\n                .append(getRight())\n                .append(')')\n                .toString();\n    }\n\n\n    /**\n     * &lt;p&gt;Formats the receiver using the given format.&lt;/p&gt;\n     * &lt;p/&gt;\n     * &lt;p&gt;This uses {@link java.util.Formattable} to perform the formatting. Three variables may be\n     * used to embed the left and right elements. Use {@code %1$s} for the left element, {@code\n     * %2$s} for the middle and {@code %3$s} for the right element. The default format used by\n     * {@code toString()} is {@code (%1$s,%2$s,%3$s)}.&lt;/p&gt;\n     *\n     * @param format\n     *         the format string, optionally containing {@code %1$s}, {@code %2$s} and {@code %3$s},\n     *         not null\n     *\n     * @return the formatted string, not null\n     */\n    public String toString(final String format)\n    {\n        return String.format(format, getLeft(), getMiddle(), getRight());\n    }\n}\n</code></pre>\n\n<p>ImmutableTriple.java</p>\n\n<pre><code>public final class ImmutableTriple&lt;L, M, R&gt; extends Triple&lt;L, M, R&gt; {\n\n    /** Serialization version */\n    private static final long serialVersionUID = 1L;\n\n    /** Left object */\n    public final L left;\n    /** Middle object */\n    public final M middle;\n    /** Right object */\n    public final R right;\n\n    /**\n     * &lt;p&gt;Obtains an immutable triple of from three objects inferring the generic types.&lt;/p&gt;\n     *\n     * &lt;p&gt;This factory allows the triple to be created using inference to\n     * obtain the generic types.&lt;/p&gt;\n     *\n     * @param &lt;L&gt; the left element type\n     * @param &lt;M&gt; the middle element type\n     * @param &lt;R&gt; the right element type\n     * @param left  the left element, may be null\n     * @param middle  the middle element, may be null\n     * @param right  the right element, may be null\n     * @return a triple formed from the three parameters, not null\n     */\n    public static &lt;L, M, R&gt; ImmutableTriple&lt;L, M, R&gt; of(final L left, final M middle, final R right) {\n        return new ImmutableTriple&lt;L, M, R&gt;(left, middle, right);\n    }\n\n    /**\n     * Create a new triple instance.\n     *\n     * @param left  the left value, may be null\n     * @param middle the middle value, may be null\n     * @param right  the right value, may be null\n     */\n    public ImmutableTriple(final L left, final M middle, final R right) {\n        super();\n        this.left = left;\n        this.middle = middle;\n        this.right = right;\n    }\n\n    //-----------------------------------------------------------------------\n    /**\n     * {@inheritDoc}\n     */\n    @Override\n    public L getLeft() {\n        return left;\n    }\n\n    /**\n     * {@inheritDoc}\n     */\n    @Override\n    public M getMiddle() {\n        return middle;\n    }\n\n    /**\n     * {@inheritDoc}\n     */\n    @Override\n    public R getRight() {\n        return right;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6819840,"reputation":4881,"user_id":5247331,"accept_rate":77,"display_name":"Vitaly Zinchenko"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1441815606,"creation_date":1441815606,"answer_id":32484678,"question_id":6010843,"body_markdown":"    public class Triple&lt;F, S, T&gt; {\r\n    \r\n        public final F first;\r\n        public final S second;\r\n        public final T third;\r\n    \r\n        public Triple(F first, S second, T third) {\r\n            this.first = first;\r\n            this.second = second;\r\n            this.third = third;\r\n        }\r\n    \r\n        @Override\r\n        public boolean equals(Object o) {\r\n            if (!(o instanceof Triple)) {\r\n                return false;\r\n            }\r\n            Triple&lt;?, ?, ?&gt; p = (Triple&lt;?, ?, ?&gt;) o;\r\n            return first.equals(p.first) &amp;&amp; second.equals(p.second) &amp;&amp; third.equals(p.third);\r\n        }\r\n    \r\n        private static boolean equals(Object x, Object y) {\r\n            return (x == null &amp;&amp; y == null) || (x != null &amp;&amp; x.equals(y));\r\n        }\r\n    \r\n        @Override\r\n        public int hashCode() {\r\n            return (first == null ? 0 : first.hashCode()) ^ (second == null ? 0 : second.hashCode()) ^ (third == null ? 0 : third.hashCode());\r\n        }\r\n        \r\n        public static &lt;F, S, T&gt; Triple &lt;F, S, T&gt; create(F f, S s, T t) {\r\n            return new Triple&lt;F, S, T&gt;(f, s, t);\r\n        }\r\n    }","title":"Java: how to store data triple in a list?","body":"<pre><code>public class Triple&lt;F, S, T&gt; {\n\n    public final F first;\n    public final S second;\n    public final T third;\n\n    public Triple(F first, S second, T third) {\n        this.first = first;\n        this.second = second;\n        this.third = third;\n    }\n\n    @Override\n    public boolean equals(Object o) {\n        if (!(o instanceof Triple)) {\n            return false;\n        }\n        Triple&lt;?, ?, ?&gt; p = (Triple&lt;?, ?, ?&gt;) o;\n        return first.equals(p.first) &amp;&amp; second.equals(p.second) &amp;&amp; third.equals(p.third);\n    }\n\n    private static boolean equals(Object x, Object y) {\n        return (x == null &amp;&amp; y == null) || (x != null &amp;&amp; x.equals(y));\n    }\n\n    @Override\n    public int hashCode() {\n        return (first == null ? 0 : first.hashCode()) ^ (second == null ? 0 : second.hashCode()) ^ (third == null ? 0 : third.hashCode());\n    }\n\n    public static &lt;F, S, T&gt; Triple &lt;F, S, T&gt; create(F f, S s, T t) {\n        return new Triple&lt;F, S, T&gt;(f, s, t);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":434020,"reputation":828,"user_id":819710,"display_name":"Moises Portillo"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1541685872,"creation_date":1541685872,"answer_id":53209356,"question_id":6010843,"body_markdown":"Kotlin has implemented a class called Triple:\r\n\r\n\r\n    /**\r\n     * Represents a triad of values\r\n    *\r\n    * There is no meaning attached to values in this class, it can be used for any purpose.\r\n    * Triple exhibits value semantics, i.e. two triples are equal if all three components are equal.\r\n    * An example of decomposing it into values:\r\n    * @sample samples.misc.Tuples.tripleDestructuring\r\n    *\r\n    * @param A type of the first value.\r\n    * @param B type of the second value.\r\n    * @param C type of the third value.\r\n    * @property first First value.\r\n    * @property second Second value.\r\n    * @property third Third value.\r\n    */\r\n\r\n    public data class Triple&lt;out A, out B, out C&gt;(\r\n       public val first: A,\r\n       public val second: B,\r\n       public val third: C\r\n    ) : Serializable {\r\n   \r\n       /**\r\n        * Returns string representation of the [Triple] including its [first],    [second] and [third] values.\r\n        */\r\n       public override fun toString(): String = &quot;($first, $second, $third)&quot;\r\n    }\r\n","title":"Java: how to store data triple in a list?","body":"<p>Kotlin has implemented a class called Triple:</p>\n\n<pre><code>/**\n * Represents a triad of values\n*\n* There is no meaning attached to values in this class, it can be used for any purpose.\n* Triple exhibits value semantics, i.e. two triples are equal if all three components are equal.\n* An example of decomposing it into values:\n* @sample samples.misc.Tuples.tripleDestructuring\n*\n* @param A type of the first value.\n* @param B type of the second value.\n* @param C type of the third value.\n* @property first First value.\n* @property second Second value.\n* @property third Third value.\n*/\n\npublic data class Triple&lt;out A, out B, out C&gt;(\n   public val first: A,\n   public val second: B,\n   public val third: C\n) : Serializable {\n\n   /**\n    * Returns string representation of the [Triple] including its [first],    [second] and [third] values.\n    */\n   public override fun toString(): String = \"($first, $second, $third)\"\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":67096,"reputation":24787,"user_id":196507,"accept_rate":90,"display_name":"lepe"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695787770,"creation_date":1695787770,"answer_id":77184635,"question_id":6010843,"body_markdown":"For those using Groovy, it can be simplified to:\r\n\r\n```groovy\r\n@Canonical\r\nclass Triple&lt;F,M,T&gt; {\r\n    final F first\r\n    final M middle\r\n    final T last\r\n}\r\n\r\n// Usage:\r\ndef triple = new Triple&lt;Integer, Double, String&gt;(100, 2.5, &quot;Hello&quot;)\r\nprintln triple.first        // Out: 100\r\nassert triple == new Triple&lt;Integer, Double, String&gt;(100, 2.50, &quot;Hello&quot;) // true\r\n```\r\n\r\n`@Canonical` annotation takes care of creating the constructor matching your fields and Groovy takes care of the rest.","title":"Java: how to store data triple in a list?","body":"<p>For those using Groovy, it can be simplified to:</p>\n<pre><code>@Canonical\nclass Triple&lt;F,M,T&gt; {\n    final F first\n    final M middle\n    final T last\n}\n\n// Usage:\ndef triple = new Triple&lt;Integer, Double, String&gt;(100, 2.5, &quot;Hello&quot;)\nprintln triple.first        // Out: 100\nassert triple == new Triple&lt;Integer, Double, String&gt;(100, 2.50, &quot;Hello&quot;) // true\n</code></pre>\n<p><code>@Canonical</code> annotation takes care of creating the constructor matching your fields and Groovy takes care of the rest.</p>\n"}],"owner":{"account_id":94058,"reputation":63514,"user_id":257022,"accept_rate":98,"display_name":"aneuryzm"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":63559,"favorite_count":0,"down_vote_count":0,"up_vote_count":44,"accepted_answer_id":6010861,"answer_count":7,"score":44,"last_activity_date":1695787770,"creation_date":1305489348,"question_id":6010843,"body_markdown":"What&#39;s the best way in java to store data triple in a list ?\r\n\r\n    [a, b, c]\r\n    [a, b, c]\r\n    ... \r\n\r\nI usually use HashMap for couples of data key + value.. should I go for HashMap + Arraylist ? or ArrayList + ArrayList ?\r\n\r\nthanks \r\n","title":"Java: how to store data triple in a list?","body":"<p>What's the best way in java to store data triple in a list ?</p>\n\n<pre><code>[a, b, c]\n[a, b, c]\n... \n</code></pre>\n\n<p>I usually use HashMap for couples of data key + value.. should I go for HashMap + Arraylist ? or ArrayList + ArrayList ?</p>\n\n<p>thanks </p>\n"},{"tags":["java","android","kotlin","android-studio"],"comments":[{"owner":{"account_id":238127,"reputation":86162,"user_id":506796,"accept_rate":83,"display_name":"Tenfour04"},"score":0,"creation_date":1695398513,"post_id":77159145,"comment_id":136023833,"body_markdown":"Is the file named `build.gradle` or `build.gradle.kts`?","body":"Is the file named <code>build.gradle</code> or <code>build.gradle.kts</code>?"},{"owner":{"account_id":26840344,"reputation":134,"user_id":20426969,"display_name":"Sarmad Ali"},"score":0,"creation_date":1695405928,"post_id":77159145,"comment_id":136025081,"body_markdown":"**https://developer.android.com/codelabs/camerax-getting-started#**. try to follow official documentation and see if you might have missed any part of it.","body":"<b><a href=\"https://developer.android.com/codelabs/camerax-getting-started#\" rel=\"nofollow noreferrer\">developer.android.com/codelabs/camerax-getting-started#</a></b>. try to follow official documentation and see if you might have missed any part of it."},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1695420449,"post_id":77159145,"comment_id":136027130,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."},{"owner":{"account_id":29510688,"reputation":1,"user_id":22615803,"display_name":"Arushi"},"score":0,"creation_date":1695491855,"post_id":77159145,"comment_id":136032837,"body_markdown":"File name is build.gradle.kts","body":"File name is build.gradle.kts"}],"answers":[{"tags":[],"owner":{"account_id":29520193,"reputation":857,"user_id":22623172,"display_name":"Vlad Guriev"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695712807,"creation_date":1695547819,"answer_id":77166457,"question_id":77159145,"body_markdown":"Gradle files are written in either Groovy or Kotlin. You&#39;ve mentioned in the comments that the file is named `build.gradle.kts`, i.e. it&#39;s written in Kotlin. Those written in Groovy are named `build.gradle`.\r\n\r\nHowever, `def camerax_version =&quot;1.2.2&quot;` from the question follows Groovy syntax. Replacing it with `val camerax_version = &quot;1.2.2&quot;` should solve the issue.","title":"Facing issue while trying to add cameraX dependency in Android Studio","body":"<p>Gradle files are written in either Groovy or Kotlin. You've mentioned in the comments that the file is named <code>build.gradle.kts</code>, i.e. it's written in Kotlin. Those written in Groovy are named <code>build.gradle</code>.</p>\n<p>However, <code>def camerax_version =&quot;1.2.2&quot;</code> from the question follows Groovy syntax. Replacing it with <code>val camerax_version = &quot;1.2.2&quot;</code> should solve the issue.</p>\n"}],"owner":{"account_id":29510688,"reputation":1,"user_id":22615803,"display_name":"Arushi"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":78,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1695787540,"creation_date":1695398312,"question_id":77159145,"body_markdown":"I am making an Android app. While trying to add cameraX dependency to my app, I am facing &quot;Unexpected tokens (use &#39;;&#39; to separate expressions on the same line)&quot; in the highlighted line. My code:\r\n~~~\r\n    def camerax_version =&quot;1.2.2&quot;\r\n    implementation (&quot;androidx.camera:camera-core:${camerax_version}&quot;)\r\n    implementation (&quot;androidx.camera:camera-camera2:${camerax_version}&quot;)\r\n    implementation (&quot;androidx.camera:camera-lifecycle:${camerax_version}&quot;)\r\n    implementation (&quot;androidx.camera:camera-video:${camerax_version}&quot;)\r\n\r\n    implementation (&quot;androidx.camera:camera-view:${camerax_version}&quot;)\r\n    implementation (&quot;androidx.camera:camera-extensions:${camerax_version}&quot;)\r\n~~~\r\n\r\nI have no idea why I am getting the issue. Any solution or insight would be helpful.","title":"Facing issue while trying to add cameraX dependency in Android Studio","body":"<p>I am making an Android app. While trying to add cameraX dependency to my app, I am facing &quot;Unexpected tokens (use ';' to separate expressions on the same line)&quot; in the highlighted line. My code:</p>\n<pre><code>    def camerax_version =&quot;1.2.2&quot;\n    implementation (&quot;androidx.camera:camera-core:${camerax_version}&quot;)\n    implementation (&quot;androidx.camera:camera-camera2:${camerax_version}&quot;)\n    implementation (&quot;androidx.camera:camera-lifecycle:${camerax_version}&quot;)\n    implementation (&quot;androidx.camera:camera-video:${camerax_version}&quot;)\n\n    implementation (&quot;androidx.camera:camera-view:${camerax_version}&quot;)\n    implementation (&quot;androidx.camera:camera-extensions:${camerax_version}&quot;)\n</code></pre>\n<p>I have no idea why I am getting the issue. Any solution or insight would be helpful.</p>\n"},{"tags":["java","android","location","android-geofence"],"owner":{"account_id":12694317,"reputation":1,"user_id":9223264,"display_name":"Jaspalsinh Gohil"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695787364,"creation_date":1695787364,"question_id":77184614,"body_markdown":"I have created a simple geofencing app that works fine when the app is in the foreground, but when the app \\`is in the background, I do not receive any notifications. I have started a foreground service and registered my geofences correctly. I have also granted my app the ACCESS_BACKGROUND_LOCATION permission. Any help would be appreciated.\r\n\r\n**here is MapsActivity.java Code**\r\n\r\n    public class MapsActivity extends FragmentActivity implements OnMapReadyCallback, GoogleMap.OnMapLongClickListener {\r\n    \r\n        private static final String TAG = &quot;MapsActivity&quot;;\r\n    \r\n        private GoogleMap mMap;\r\n        private GeofencingClient geofencingClient;\r\n        private GeofenceHelper geofenceHelper;\r\n    \r\n        private final float GEOFENCE_RADIUS = 30;\r\n        private final String GEOFENCE_ID = &quot;SOME_GEOFENCE_ID&quot;;\r\n    \r\n        private final int FINE_LOCATION_ACCESS_REQUEST_CODE = 10001;\r\n        private final int BACKGROUND_LOCATION_ACCESS_REQUEST_CODE = 10002;\r\n    \r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_maps);\r\n            // Obtain the SupportMapFragment and get notified when the map is ready to be used.\r\n            SupportMapFragment mapFragment = (SupportMapFragment) getSupportFragmentManager()\r\n                    .findFragmentById(R.id.map);\r\n            mapFragment.getMapAsync(this);\r\n    \r\n            geofencingClient = LocationServices.getGeofencingClient(this);\r\n            geofenceHelper = new GeofenceHelper(this);\r\n        }\r\n    \r\n    \r\n        /**\r\n         * Manipulates the map once available.\r\n         * This callback is triggered when the map is ready to be used.\r\n         * This is where we can add markers or lines, add listeners or move the camera. In this case,\r\n         * we just add a marker near Sydney, Australia.\r\n         * If Google Play services is not installed on the device, the user will be prompted to install\r\n         * it inside the SupportMapFragment. This method will only be triggered once the user has\r\n         * installed Google Play services and returned to the app.\r\n         */\r\n        @Override\r\n        public void onMapReady(GoogleMap googleMap) {\r\n            mMap = googleMap;\r\n    \r\n            // Add a marker in Sydney and move the camera\r\n            LatLng eiffel = new LatLng(48.8589, 2.29365);\r\n            mMap.moveCamera(CameraUpdateFactory.newLatLngZoom(eiffel, 16));\r\n    \r\n            enableUserLocation();\r\n    \r\n            mMap.setOnMapLongClickListener(this);\r\n        }\r\n    \r\n        private void enableUserLocation() {\r\n            if (ContextCompat.checkSelfPermission(this, Manifest.permission.ACCESS_FINE_LOCATION) == PackageManager.PERMISSION_GRANTED) {\r\n                mMap.setMyLocationEnabled(true);\r\n            } else {\r\n                //Ask for permission\r\n                if (ActivityCompat.shouldShowRequestPermissionRationale(this, Manifest.permission.ACCESS_FINE_LOCATION)) {\r\n                    //We need to show user a dialog for displaying why the permission is needed and then ask for the permission...\r\n                    ActivityCompat.requestPermissions(this, new String[]{Manifest.permission.ACCESS_FINE_LOCATION}, FINE_LOCATION_ACCESS_REQUEST_CODE);\r\n                } else {\r\n                    ActivityCompat.requestPermissions(this, new String[]{Manifest.permission.ACCESS_FINE_LOCATION}, FINE_LOCATION_ACCESS_REQUEST_CODE);\r\n                }\r\n            }\r\n        }\r\n    \r\n        @Override\r\n        public void onRequestPermissionsResult(int requestCode, @NonNull String[] permissions, @NonNull int[] grantResults) {\r\n            if (requestCode == FINE_LOCATION_ACCESS_REQUEST_CODE) {\r\n                if (grantResults.length &gt; 0 &amp;&amp; grantResults[0] == PackageManager.PERMISSION_GRANTED) {\r\n                    //We have the permission\r\n                    mMap.setMyLocationEnabled(true);\r\n                } else {\r\n                    //We do not have the permission..\r\n    \r\n                }\r\n            }\r\n    \r\n            if (requestCode == BACKGROUND_LOCATION_ACCESS_REQUEST_CODE) {\r\n                if (grantResults.length &gt; 0 &amp;&amp; grantResults[0] == PackageManager.PERMISSION_GRANTED) {\r\n                    //We have the permission\r\n                    Toast.makeText(this, &quot;You can add geofences...&quot;, Toast.LENGTH_SHORT).show();\r\n                } else {\r\n                    //We do not have the permission..\r\n                    Toast.makeText(this, &quot;Background location access is neccessary for geofences to trigger...&quot;, Toast.LENGTH_SHORT).show();\r\n                }\r\n            }\r\n        }\r\n    \r\n        @Override\r\n        public void onMapLongClick(LatLng latLng) {\r\n            if (Build.VERSION.SDK_INT &gt;= 29) {\r\n                //We need background permission\r\n                if (ContextCompat.checkSelfPermission(this, Manifest.permission.ACCESS_BACKGROUND_LOCATION) == PackageManager.PERMISSION_GRANTED) {\r\n                    handleMapLongClick(latLng);\r\n                } else {\r\n                    if (ActivityCompat.shouldShowRequestPermissionRationale(this, Manifest.permission.ACCESS_BACKGROUND_LOCATION)) {\r\n                        //We show a dialog and ask for permission\r\n                        ActivityCompat.requestPermissions(this, new String[]{Manifest.permission.ACCESS_BACKGROUND_LOCATION}, BACKGROUND_LOCATION_ACCESS_REQUEST_CODE);\r\n                    } else {\r\n                        ActivityCompat.requestPermissions(this, new String[]{Manifest.permission.ACCESS_BACKGROUND_LOCATION}, BACKGROUND_LOCATION_ACCESS_REQUEST_CODE);\r\n                    }\r\n                }\r\n    \r\n            } else {\r\n                handleMapLongClick(latLng);\r\n            }\r\n    \r\n        }\r\n    \r\n        private void handleMapLongClick(LatLng latLng) {\r\n            mMap.clear();\r\n            addMarker(latLng);\r\n            addCircle(latLng, GEOFENCE_RADIUS);\r\n            addGeofence(latLng, GEOFENCE_RADIUS);\r\n        }\r\n    \r\n        private void addGeofence(LatLng latLng, float radius) {\r\n    \r\n            Geofence geofence = geofenceHelper.getGeofence(GEOFENCE_ID, latLng, radius, Geofence.GEOFENCE_TRANSITION_ENTER | Geofence.GEOFENCE_TRANSITION_DWELL | Geofence.GEOFENCE_TRANSITION_EXIT);\r\n            GeofencingRequest geofencingRequest = geofenceHelper.getGeofencingRequest(geofence);\r\n            PendingIntent pendingIntent = geofenceHelper.getPendingIntent();\r\n    \r\n            geofencingClient.addGeofences(geofencingRequest, pendingIntent)\r\n                    .addOnSuccessListener(new OnSuccessListener&lt;Void&gt;() {\r\n                        @Override\r\n                        public void onSuccess(Void aVoid) {\r\n                            Log.d(TAG, &quot;onSuccess: Geofence Added...&quot;);\r\n                        }\r\n                    })\r\n                    .addOnFailureListener(new OnFailureListener() {\r\n                        @Override\r\n                        public void onFailure(@NonNull Exception e) {\r\n                            String errorMessage = geofenceHelper.getErrorString(e);\r\n                            Log.d(TAG, &quot;onFailure: &quot; + errorMessage);\r\n                        }\r\n                    });\r\n        }\r\n    \r\n        private void addMarker(LatLng latLng) {\r\n            MarkerOptions markerOptions = new MarkerOptions().position(latLng);\r\n            mMap.addMarker(markerOptions);\r\n        }\r\n    \r\n        private void addCircle(LatLng latLng, float radius) {\r\n            CircleOptions circleOptions = new CircleOptions();\r\n            circleOptions.center(latLng);\r\n            circleOptions.radius(radius);\r\n            circleOptions.strokeColor(Color.argb(255, 255, 0, 0));\r\n            circleOptions.fillColor(Color.argb(64, 255, 0, 0));\r\n            circleOptions.strokeWidth(4);\r\n            mMap.addCircle(circleOptions);\r\n        }\r\n    }\r\n\r\n**here is GeofenceBroadcastReceiver.java Code**\r\n\r\n    public class GeofenceBroadcastReceiver extends BroadcastReceiver {\r\n    \r\n        private static final String TAG = &quot;GeofenceBroadcastReceiv&quot;;\r\n    \r\n        @Override\r\n        public void onReceive(Context context, Intent intent) {\r\n            \r\n            NotificationHelper notificationHelper = new NotificationHelper(context);\r\n    \r\n            GeofencingEvent geofencingEvent = GeofencingEvent.fromIntent(intent);\r\n    \r\n            if (geofencingEvent.hasError()) {\r\n                Log.d(TAG, &quot;onReceive: Error receiving geofence event...&quot;);\r\n                return;\r\n            }\r\n    \r\n            List&lt;Geofence&gt; geofenceList = geofencingEvent.getTriggeringGeofences();\r\n            for (Geofence geofence : geofenceList) {\r\n                Log.d(TAG, &quot;onReceive: &quot; + geofence.getRequestId());\r\n            }\r\n    //        Location location = geofencingEvent.getTriggeringLocation();\r\n            int transitionType = geofencingEvent.getGeofenceTransition();\r\n    \r\n            switch (transitionType) {\r\n                case Geofence.GEOFENCE_TRANSITION_ENTER:\r\n                    Toast.makeText(context, &quot;GEOFENCE_TRANSITION_ENTER&quot;, Toast.LENGTH_SHORT).show();\r\n                    notificationHelper.sendHighPriorityNotification(&quot;GEOFENCE_TRANSITION_ENTER&quot;, &quot;&quot;, MapsActivity.class);\r\n                    break;\r\n                case Geofence.GEOFENCE_TRANSITION_DWELL:\r\n                    Toast.makeText(context, &quot;GEOFENCE_TRANSITION_DWELL&quot;, Toast.LENGTH_SHORT).show();\r\n                    notificationHelper.sendHighPriorityNotification(&quot;GEOFENCE_TRANSITION_DWELL&quot;, &quot;&quot;, MapsActivity.class);\r\n                    break;\r\n                case Geofence.GEOFENCE_TRANSITION_EXIT:\r\n                    Toast.makeText(context, &quot;GEOFENCE_TRANSITION_EXIT&quot;, Toast.LENGTH_SHORT).show();\r\n                    notificationHelper.sendHighPriorityNotification(&quot;GEOFENCE_TRANSITION_EXIT&quot;, &quot;&quot;, MapsActivity.class);\r\n                    break;\r\n            }\r\n    \r\n        }\r\n    }\r\n\r\n\r\n**here is GeofenceHelper.java Code**\r\n\r\n    public class GeofenceHelper extends ContextWrapper {\r\n    \r\n        private static final String TAG = &quot;GeofenceHelper&quot;;\r\n        PendingIntent pendingIntent;\r\n    \r\n        public GeofenceHelper(Context base) {\r\n            super(base);\r\n        }\r\n    \r\n        public GeofencingRequest getGeofencingRequest(Geofence geofence) {\r\n            return new GeofencingRequest.Builder()\r\n                    .addGeofence(geofence)\r\n                    .setInitialTrigger(GeofencingRequest.INITIAL_TRIGGER_ENTER)\r\n                    .build();\r\n        }\r\n    \r\n        public Geofence getGeofence(String ID, LatLng latLng, float radius, int transitionTypes) {\r\n            return new Geofence.Builder()\r\n                    .setCircularRegion(latLng.latitude, latLng.longitude, radius)\r\n                    .setRequestId(ID)\r\n                    .setTransitionTypes(transitionTypes)\r\n                    .setLoiteringDelay(5000)\r\n                    .setExpirationDuration(Geofence.NEVER_EXPIRE)\r\n                    .build();\r\n        }\r\n    \r\n        public PendingIntent getPendingIntent() {\r\n            if (pendingIntent != null) {\r\n                return pendingIntent;\r\n            }\r\n            Intent intent = new Intent(this, GeofenceBroadcastReceiver.class);\r\n            pendingIntent = PendingIntent.getBroadcast(this, 2607, intent, PendingIntent.FLAG_UPDATE_CURRENT | PendingIntent.FLAG_MUTABLE);\r\n    \r\n            return pendingIntent;\r\n        }\r\n    \r\n        public String getErrorString(Exception e) {\r\n            if (e instanceof ApiException) {\r\n                ApiException apiException = (ApiException) e;\r\n                switch (apiException.getStatusCode()) {\r\n                    case GeofenceStatusCodes\r\n                            .GEOFENCE_NOT_AVAILABLE:\r\n                        return &quot;GEOFENCE_NOT_AVAILABLE&quot;;\r\n                    case GeofenceStatusCodes\r\n                            .GEOFENCE_TOO_MANY_GEOFENCES:\r\n                        return &quot;GEOFENCE_TOO_MANY_GEOFENCES&quot;;\r\n                    case GeofenceStatusCodes\r\n                            .GEOFENCE_TOO_MANY_PENDING_INTENTS:\r\n                        return &quot;GEOFENCE_TOO_MANY_PENDING_INTENTS&quot;;\r\n                }\r\n            }\r\n            return e.getLocalizedMessage();\r\n        }\r\n    }\r\n\r\n\r\nWhen app is in background or kill I want receive notification that user enter or exit  Geofence area  so how can i do that.","title":"Geofencing notifications not working in the background in Android","body":"<p>I have created a simple geofencing app that works fine when the app is in the foreground, but when the app `is in the background, I do not receive any notifications. I have started a foreground service and registered my geofences correctly. I have also granted my app the ACCESS_BACKGROUND_LOCATION permission. Any help would be appreciated.</p>\n<p><strong>here is MapsActivity.java Code</strong></p>\n<pre><code>public class MapsActivity extends FragmentActivity implements OnMapReadyCallback, GoogleMap.OnMapLongClickListener {\n\n    private static final String TAG = &quot;MapsActivity&quot;;\n\n    private GoogleMap mMap;\n    private GeofencingClient geofencingClient;\n    private GeofenceHelper geofenceHelper;\n\n    private final float GEOFENCE_RADIUS = 30;\n    private final String GEOFENCE_ID = &quot;SOME_GEOFENCE_ID&quot;;\n\n    private final int FINE_LOCATION_ACCESS_REQUEST_CODE = 10001;\n    private final int BACKGROUND_LOCATION_ACCESS_REQUEST_CODE = 10002;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_maps);\n        // Obtain the SupportMapFragment and get notified when the map is ready to be used.\n        SupportMapFragment mapFragment = (SupportMapFragment) getSupportFragmentManager()\n                .findFragmentById(R.id.map);\n        mapFragment.getMapAsync(this);\n\n        geofencingClient = LocationServices.getGeofencingClient(this);\n        geofenceHelper = new GeofenceHelper(this);\n    }\n\n\n    /**\n     * Manipulates the map once available.\n     * This callback is triggered when the map is ready to be used.\n     * This is where we can add markers or lines, add listeners or move the camera. In this case,\n     * we just add a marker near Sydney, Australia.\n     * If Google Play services is not installed on the device, the user will be prompted to install\n     * it inside the SupportMapFragment. This method will only be triggered once the user has\n     * installed Google Play services and returned to the app.\n     */\n    @Override\n    public void onMapReady(GoogleMap googleMap) {\n        mMap = googleMap;\n\n        // Add a marker in Sydney and move the camera\n        LatLng eiffel = new LatLng(48.8589, 2.29365);\n        mMap.moveCamera(CameraUpdateFactory.newLatLngZoom(eiffel, 16));\n\n        enableUserLocation();\n\n        mMap.setOnMapLongClickListener(this);\n    }\n\n    private void enableUserLocation() {\n        if (ContextCompat.checkSelfPermission(this, Manifest.permission.ACCESS_FINE_LOCATION) == PackageManager.PERMISSION_GRANTED) {\n            mMap.setMyLocationEnabled(true);\n        } else {\n            //Ask for permission\n            if (ActivityCompat.shouldShowRequestPermissionRationale(this, Manifest.permission.ACCESS_FINE_LOCATION)) {\n                //We need to show user a dialog for displaying why the permission is needed and then ask for the permission...\n                ActivityCompat.requestPermissions(this, new String[]{Manifest.permission.ACCESS_FINE_LOCATION}, FINE_LOCATION_ACCESS_REQUEST_CODE);\n            } else {\n                ActivityCompat.requestPermissions(this, new String[]{Manifest.permission.ACCESS_FINE_LOCATION}, FINE_LOCATION_ACCESS_REQUEST_CODE);\n            }\n        }\n    }\n\n    @Override\n    public void onRequestPermissionsResult(int requestCode, @NonNull String[] permissions, @NonNull int[] grantResults) {\n        if (requestCode == FINE_LOCATION_ACCESS_REQUEST_CODE) {\n            if (grantResults.length &gt; 0 &amp;&amp; grantResults[0] == PackageManager.PERMISSION_GRANTED) {\n                //We have the permission\n                mMap.setMyLocationEnabled(true);\n            } else {\n                //We do not have the permission..\n\n            }\n        }\n\n        if (requestCode == BACKGROUND_LOCATION_ACCESS_REQUEST_CODE) {\n            if (grantResults.length &gt; 0 &amp;&amp; grantResults[0] == PackageManager.PERMISSION_GRANTED) {\n                //We have the permission\n                Toast.makeText(this, &quot;You can add geofences...&quot;, Toast.LENGTH_SHORT).show();\n            } else {\n                //We do not have the permission..\n                Toast.makeText(this, &quot;Background location access is neccessary for geofences to trigger...&quot;, Toast.LENGTH_SHORT).show();\n            }\n        }\n    }\n\n    @Override\n    public void onMapLongClick(LatLng latLng) {\n        if (Build.VERSION.SDK_INT &gt;= 29) {\n            //We need background permission\n            if (ContextCompat.checkSelfPermission(this, Manifest.permission.ACCESS_BACKGROUND_LOCATION) == PackageManager.PERMISSION_GRANTED) {\n                handleMapLongClick(latLng);\n            } else {\n                if (ActivityCompat.shouldShowRequestPermissionRationale(this, Manifest.permission.ACCESS_BACKGROUND_LOCATION)) {\n                    //We show a dialog and ask for permission\n                    ActivityCompat.requestPermissions(this, new String[]{Manifest.permission.ACCESS_BACKGROUND_LOCATION}, BACKGROUND_LOCATION_ACCESS_REQUEST_CODE);\n                } else {\n                    ActivityCompat.requestPermissions(this, new String[]{Manifest.permission.ACCESS_BACKGROUND_LOCATION}, BACKGROUND_LOCATION_ACCESS_REQUEST_CODE);\n                }\n            }\n\n        } else {\n            handleMapLongClick(latLng);\n        }\n\n    }\n\n    private void handleMapLongClick(LatLng latLng) {\n        mMap.clear();\n        addMarker(latLng);\n        addCircle(latLng, GEOFENCE_RADIUS);\n        addGeofence(latLng, GEOFENCE_RADIUS);\n    }\n\n    private void addGeofence(LatLng latLng, float radius) {\n\n        Geofence geofence = geofenceHelper.getGeofence(GEOFENCE_ID, latLng, radius, Geofence.GEOFENCE_TRANSITION_ENTER | Geofence.GEOFENCE_TRANSITION_DWELL | Geofence.GEOFENCE_TRANSITION_EXIT);\n        GeofencingRequest geofencingRequest = geofenceHelper.getGeofencingRequest(geofence);\n        PendingIntent pendingIntent = geofenceHelper.getPendingIntent();\n\n        geofencingClient.addGeofences(geofencingRequest, pendingIntent)\n                .addOnSuccessListener(new OnSuccessListener&lt;Void&gt;() {\n                    @Override\n                    public void onSuccess(Void aVoid) {\n                        Log.d(TAG, &quot;onSuccess: Geofence Added...&quot;);\n                    }\n                })\n                .addOnFailureListener(new OnFailureListener() {\n                    @Override\n                    public void onFailure(@NonNull Exception e) {\n                        String errorMessage = geofenceHelper.getErrorString(e);\n                        Log.d(TAG, &quot;onFailure: &quot; + errorMessage);\n                    }\n                });\n    }\n\n    private void addMarker(LatLng latLng) {\n        MarkerOptions markerOptions = new MarkerOptions().position(latLng);\n        mMap.addMarker(markerOptions);\n    }\n\n    private void addCircle(LatLng latLng, float radius) {\n        CircleOptions circleOptions = new CircleOptions();\n        circleOptions.center(latLng);\n        circleOptions.radius(radius);\n        circleOptions.strokeColor(Color.argb(255, 255, 0, 0));\n        circleOptions.fillColor(Color.argb(64, 255, 0, 0));\n        circleOptions.strokeWidth(4);\n        mMap.addCircle(circleOptions);\n    }\n}\n</code></pre>\n<p><strong>here is GeofenceBroadcastReceiver.java Code</strong></p>\n<pre><code>public class GeofenceBroadcastReceiver extends BroadcastReceiver {\n\n    private static final String TAG = &quot;GeofenceBroadcastReceiv&quot;;\n\n    @Override\n    public void onReceive(Context context, Intent intent) {\n        \n        NotificationHelper notificationHelper = new NotificationHelper(context);\n\n        GeofencingEvent geofencingEvent = GeofencingEvent.fromIntent(intent);\n\n        if (geofencingEvent.hasError()) {\n            Log.d(TAG, &quot;onReceive: Error receiving geofence event...&quot;);\n            return;\n        }\n\n        List&lt;Geofence&gt; geofenceList = geofencingEvent.getTriggeringGeofences();\n        for (Geofence geofence : geofenceList) {\n            Log.d(TAG, &quot;onReceive: &quot; + geofence.getRequestId());\n        }\n//        Location location = geofencingEvent.getTriggeringLocation();\n        int transitionType = geofencingEvent.getGeofenceTransition();\n\n        switch (transitionType) {\n            case Geofence.GEOFENCE_TRANSITION_ENTER:\n                Toast.makeText(context, &quot;GEOFENCE_TRANSITION_ENTER&quot;, Toast.LENGTH_SHORT).show();\n                notificationHelper.sendHighPriorityNotification(&quot;GEOFENCE_TRANSITION_ENTER&quot;, &quot;&quot;, MapsActivity.class);\n                break;\n            case Geofence.GEOFENCE_TRANSITION_DWELL:\n                Toast.makeText(context, &quot;GEOFENCE_TRANSITION_DWELL&quot;, Toast.LENGTH_SHORT).show();\n                notificationHelper.sendHighPriorityNotification(&quot;GEOFENCE_TRANSITION_DWELL&quot;, &quot;&quot;, MapsActivity.class);\n                break;\n            case Geofence.GEOFENCE_TRANSITION_EXIT:\n                Toast.makeText(context, &quot;GEOFENCE_TRANSITION_EXIT&quot;, Toast.LENGTH_SHORT).show();\n                notificationHelper.sendHighPriorityNotification(&quot;GEOFENCE_TRANSITION_EXIT&quot;, &quot;&quot;, MapsActivity.class);\n                break;\n        }\n\n    }\n}\n</code></pre>\n<p><strong>here is GeofenceHelper.java Code</strong></p>\n<pre><code>public class GeofenceHelper extends ContextWrapper {\n\n    private static final String TAG = &quot;GeofenceHelper&quot;;\n    PendingIntent pendingIntent;\n\n    public GeofenceHelper(Context base) {\n        super(base);\n    }\n\n    public GeofencingRequest getGeofencingRequest(Geofence geofence) {\n        return new GeofencingRequest.Builder()\n                .addGeofence(geofence)\n                .setInitialTrigger(GeofencingRequest.INITIAL_TRIGGER_ENTER)\n                .build();\n    }\n\n    public Geofence getGeofence(String ID, LatLng latLng, float radius, int transitionTypes) {\n        return new Geofence.Builder()\n                .setCircularRegion(latLng.latitude, latLng.longitude, radius)\n                .setRequestId(ID)\n                .setTransitionTypes(transitionTypes)\n                .setLoiteringDelay(5000)\n                .setExpirationDuration(Geofence.NEVER_EXPIRE)\n                .build();\n    }\n\n    public PendingIntent getPendingIntent() {\n        if (pendingIntent != null) {\n            return pendingIntent;\n        }\n        Intent intent = new Intent(this, GeofenceBroadcastReceiver.class);\n        pendingIntent = PendingIntent.getBroadcast(this, 2607, intent, PendingIntent.FLAG_UPDATE_CURRENT | PendingIntent.FLAG_MUTABLE);\n\n        return pendingIntent;\n    }\n\n    public String getErrorString(Exception e) {\n        if (e instanceof ApiException) {\n            ApiException apiException = (ApiException) e;\n            switch (apiException.getStatusCode()) {\n                case GeofenceStatusCodes\n                        .GEOFENCE_NOT_AVAILABLE:\n                    return &quot;GEOFENCE_NOT_AVAILABLE&quot;;\n                case GeofenceStatusCodes\n                        .GEOFENCE_TOO_MANY_GEOFENCES:\n                    return &quot;GEOFENCE_TOO_MANY_GEOFENCES&quot;;\n                case GeofenceStatusCodes\n                        .GEOFENCE_TOO_MANY_PENDING_INTENTS:\n                    return &quot;GEOFENCE_TOO_MANY_PENDING_INTENTS&quot;;\n            }\n        }\n        return e.getLocalizedMessage();\n    }\n}\n</code></pre>\n<p>When app is in background or kill I want receive notification that user enter or exit  Geofence area  so how can i do that.</p>\n"},{"tags":["java","spring","spring-boot","quartz-scheduler"],"answers":[{"tags":[],"owner":{"account_id":1743298,"reputation":347,"user_id":1594088,"display_name":"&#214;zg&#252;n"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1671104569,"creation_date":1671104569,"answer_id":74810984,"question_id":74803719,"body_markdown":"Try tagging your bean as `@Primary`.\r\n\r\nIf it doesnt work I or if you have multiple datasource beans, I provide below a solution for that specific case that worked for me.\r\n\r\nhttps://stackoverflow.com/questions/56167468/how-to-set-datasource-in-quartz-schedular-error-org-quartz-schedulerexception/74378516#74378516\r\n\r\nBasicaly instead of providing a spring datasource property, you define your datasource as a quartz specific datasource\r\n\r\n```\r\nspring:\r\n  datasource:\r\n    byq:\r\n      url: jdbc:oracle:thin:@//app-db/schema-name\r\n      driverClassName: oracle.jdbc.OracleDriver\r\n      username: ZZZ\r\n      password: XXX\r\n  quartz:\r\n    job-store-type: jdbc\r\n    wait-for-jobs-to-complete-on-shutdown: true\r\n    jdbc:\r\n      initialize-schema: never\r\n    properties:\r\n      org:\r\n        quartz:\r\n          dataSource:\r\n            quartzDataSource:\r\n              URL: jdbc:postgresql://scheduler-db/scheduler\r\n              driver: org.postgresql.Driver\r\n              user: ZZZ\r\n              password: XXX\r\n          jobStore:\r\n            dataSource: quartzDataSource\r\n            class: org.quartz.impl.jdbcjobstore.JobStoreTX\r\n            driverDelegateClass: org.quartz.impl.jdbcjobstore.PostgreSQLDelegate\r\n            tablePrefix: TB_QRTZ_\r\n```\r\n\r\nHope it helps","title":"org.quartz.SchedulerConfigException: DataSource name not set","body":"<p>Try tagging your bean as <code>@Primary</code>.</p>\n<p>If it doesnt work I or if you have multiple datasource beans, I provide below a solution for that specific case that worked for me.</p>\n<p><a href=\"https://stackoverflow.com/questions/56167468/how-to-set-datasource-in-quartz-schedular-error-org-quartz-schedulerexception/74378516#74378516\">How to set dataSource in quartz schedular. [ERROR] org.quartz.SchedulerException: Could not initialize DataSource: myDS</a></p>\n<p>Basicaly instead of providing a spring datasource property, you define your datasource as a quartz specific datasource</p>\n<pre><code>spring:\n  datasource:\n    byq:\n      url: jdbc:oracle:thin:@//app-db/schema-name\n      driverClassName: oracle.jdbc.OracleDriver\n      username: ZZZ\n      password: XXX\n  quartz:\n    job-store-type: jdbc\n    wait-for-jobs-to-complete-on-shutdown: true\n    jdbc:\n      initialize-schema: never\n    properties:\n      org:\n        quartz:\n          dataSource:\n            quartzDataSource:\n              URL: jdbc:postgresql://scheduler-db/scheduler\n              driver: org.postgresql.Driver\n              user: ZZZ\n              password: XXX\n          jobStore:\n            dataSource: quartzDataSource\n            class: org.quartz.impl.jdbcjobstore.JobStoreTX\n            driverDelegateClass: org.quartz.impl.jdbcjobstore.PostgreSQLDelegate\n            tablePrefix: TB_QRTZ_\n</code></pre>\n<p>Hope it helps</p>\n"},{"tags":[],"owner":{"account_id":29543709,"reputation":1,"user_id":22641804,"display_name":"Chamil Nimesh Perera"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695785770,"creation_date":1695785770,"answer_id":77184554,"question_id":74803719,"body_markdown":"You have configured as \r\n`org.quartz.jobStore.class: org.quartz.impl.jdbcjobstore.JobStoreTX`\r\n\r\nChange it to\r\n\r\n    org.quartz.jobStore.class: org.springframework.scheduling.quartz.LocalDataSourceJobStore\r\n\r\n","title":"org.quartz.SchedulerConfigException: DataSource name not set","body":"<p>You have configured as\n<code>org.quartz.jobStore.class: org.quartz.impl.jdbcjobstore.JobStoreTX</code></p>\n<p>Change it to</p>\n<pre><code>org.quartz.jobStore.class: org.springframework.scheduling.quartz.LocalDataSourceJobStore\n</code></pre>\n"}],"owner":{"account_id":3163862,"reputation":36940,"user_id":2674303,"accept_rate":62,"display_name":"gstackoverflow"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5340,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1695785770,"creation_date":1671048805,"question_id":74803719,"body_markdown":"After upgrading spring-boot(from `2.3.12.RELEASE` to `2.7.6`) and spring cloud(from `3.0.3` to `3.1.5`) I started to receive follwing error\r\n\r\n    Caused by: org.quartz.SchedulerConfigException: DataSource name not set.\r\n    \tat org.quartz.impl.jdbcjobstore.JobStoreSupport.initialize(JobStoreSupport.java:643)\r\n    \tat org.quartz.impl.jdbcjobstore.JobStoreTX.initialize(JobStoreTX.java:57)\r\n    \tat org.quartz.impl.StdSchedulerFactory.instantiate(StdSchedulerFactory.java:1368)\r\n    \tat org.quartz.impl.StdSchedulerFactory.getScheduler(StdSchedulerFactory.java:1579)\r\n    \tat org.springframework.scheduling.quartz.SchedulerFactoryBean.createScheduler(SchedulerFactoryBean.java:679)\r\n    \tat org.springframework.scheduling.quartz.SchedulerFactoryBean.prepareScheduler(SchedulerFactoryBean.java:616)\r\n    \tat org.springframework.scheduling.quartz.SchedulerFactoryBean.afterPropertiesSet(SchedulerFactoryBean.java:504)\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1863)\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1800)\r\n\r\nBased on this advice https://github.com/spring-projects/spring-framework/issues/27709#issuecomment-988526589\r\n\r\nI&#39;ve added \r\n\r\n    org.quartz.jobStore.class: org.quartz.impl.jdbcjobstore.JobStoreTX\r\n\r\nto my `application.yml`\r\n\r\nbut I still experienxe this error during tests execution.\r\n\r\nmy dependencies:\r\n    \r\n    &lt;/properties&gt;\r\n       &lt;spring-boot.version&gt;2.7.6&lt;/spring-boot.version&gt;\r\n       ...\r\n    &lt;/properties&gt;\r\n    &lt;dependencyManagement&gt;\r\n        &lt;dependencies&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-dependencies&lt;/artifactId&gt;\r\n                &lt;version&gt;${spring-boot.version}&lt;/version&gt;\r\n                &lt;type&gt;pom&lt;/type&gt;\r\n                &lt;scope&gt;import&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n     ...\r\n    &lt;dependencyManagement&gt;\r\n    &lt;dependency&gt;\r\n          &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n          &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n          &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n          &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n    \r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n          &lt;artifactId&gt;spring-boot-starter-oauth2-resource-server&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n    \r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n          &lt;artifactId&gt;spring-boot-starter-oauth2-client&lt;/artifactId&gt;\r\n          &lt;exclusions&gt;\r\n            &lt;exclusion&gt;\r\n              &lt;groupId&gt;com.nimbusds&lt;/groupId&gt;\r\n              &lt;artifactId&gt;oauth2-oidc-sdk&lt;/artifactId&gt;\r\n            &lt;/exclusion&gt;\r\n          &lt;/exclusions&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n          &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n    \r\n        &lt;!--         tracing --&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;io.opentracing.contrib&lt;/groupId&gt;\r\n          &lt;artifactId&gt;opentracing-spring-jaeger-web-starter&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n    \r\n        &lt;!-- for quartz logic --&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n          &lt;artifactId&gt;spring-boot-starter-quartz&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n    \r\n        &lt;!-- actuator &amp; metric--&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;io.micrometer&lt;/groupId&gt;\r\n          &lt;artifactId&gt;micrometer-registry-prometheus&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n    \r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n          &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n    \r\n     &lt;dependency&gt;\r\n          &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n          &lt;artifactId&gt;spring-cloud-starter-config&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n          &lt;artifactId&gt;spring-cloud-starter-bootstrap&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n          &lt;artifactId&gt;spring-cloud-starter-bus-kafka&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n    \r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n          &lt;artifactId&gt;spring-cloud-context&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n    \r\n        &lt;!-- test --&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n          &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n          &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n    \r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\r\n          &lt;artifactId&gt;spring-security-test&lt;/artifactId&gt;\r\n          &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n          &lt;artifactId&gt;spring-test&lt;/artifactId&gt;\r\n          &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        ...\r\nHow can I fix ? \r\n\r\n\r\nUpdate\r\n\r\n\r\nI also tried to add to my application yaml:\r\n\r\n    spring:\r\n      quartz:\r\n        properties:\r\n          org:\r\n            quartz:\r\n              jobStore:\r\n                class: org.springframework.scheduling.quartz.LocalDataSourceJobStore\r\n                driverDelegateClass: org.quartz.impl.jdbcjobstore.PostgreSQLDelegate\r\n                tablePrefix: TB_PR_QRTZ_\r\n\r\nand marked this beasn with `@QuartzDataSource`\r\n\r\n    @Bean\r\n    @QuartzDataSource\r\n    public DataSource testDataSource() {\r\n        DriverManagerDataSource dataSource = new DriverManagerDataSource();\r\n        dataSource.setDriverClassName(env.getProperty(&quot;spring.datasource.driverClassName&quot;));\r\n        dataSource.setUrl(TestContainersRunner.JDBC_URL);\r\n        dataSource.setUsername(env.getProperty(&quot;spring.datasource.username&quot;));\r\n        dataSource.setPassword(env.getProperty(&quot;spring.datasource.password&quot;));\r\n        return dataSource;\r\n    }\r\n\r\nBut still no luck\r\n","title":"org.quartz.SchedulerConfigException: DataSource name not set","body":"<p>After upgrading spring-boot(from <code>2.3.12.RELEASE</code> to <code>2.7.6</code>) and spring cloud(from <code>3.0.3</code> to <code>3.1.5</code>) I started to receive follwing error</p>\n<pre><code>Caused by: org.quartz.SchedulerConfigException: DataSource name not set.\n    at org.quartz.impl.jdbcjobstore.JobStoreSupport.initialize(JobStoreSupport.java:643)\n    at org.quartz.impl.jdbcjobstore.JobStoreTX.initialize(JobStoreTX.java:57)\n    at org.quartz.impl.StdSchedulerFactory.instantiate(StdSchedulerFactory.java:1368)\n    at org.quartz.impl.StdSchedulerFactory.getScheduler(StdSchedulerFactory.java:1579)\n    at org.springframework.scheduling.quartz.SchedulerFactoryBean.createScheduler(SchedulerFactoryBean.java:679)\n    at org.springframework.scheduling.quartz.SchedulerFactoryBean.prepareScheduler(SchedulerFactoryBean.java:616)\n    at org.springframework.scheduling.quartz.SchedulerFactoryBean.afterPropertiesSet(SchedulerFactoryBean.java:504)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1863)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1800)\n</code></pre>\n<p>Based on this advice <a href=\"https://github.com/spring-projects/spring-framework/issues/27709#issuecomment-988526589\" rel=\"nofollow noreferrer\">https://github.com/spring-projects/spring-framework/issues/27709#issuecomment-988526589</a></p>\n<p>I've added</p>\n<pre><code>org.quartz.jobStore.class: org.quartz.impl.jdbcjobstore.JobStoreTX\n</code></pre>\n<p>to my <code>application.yml</code></p>\n<p>but I still experienxe this error during tests execution.</p>\n<p>my dependencies:</p>\n<pre><code>&lt;/properties&gt;\n   &lt;spring-boot.version&gt;2.7.6&lt;/spring-boot.version&gt;\n   ...\n&lt;/properties&gt;\n&lt;dependencyManagement&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-dependencies&lt;/artifactId&gt;\n            &lt;version&gt;${spring-boot.version}&lt;/version&gt;\n            &lt;type&gt;pom&lt;/type&gt;\n            &lt;scope&gt;import&lt;/scope&gt;\n        &lt;/dependency&gt;\n ...\n&lt;dependencyManagement&gt;\n&lt;dependency&gt;\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-boot-starter-oauth2-resource-server&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-boot-starter-oauth2-client&lt;/artifactId&gt;\n      &lt;exclusions&gt;\n        &lt;exclusion&gt;\n          &lt;groupId&gt;com.nimbusds&lt;/groupId&gt;\n          &lt;artifactId&gt;oauth2-oidc-sdk&lt;/artifactId&gt;\n        &lt;/exclusion&gt;\n      &lt;/exclusions&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n    &lt;!--         tracing --&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;io.opentracing.contrib&lt;/groupId&gt;\n      &lt;artifactId&gt;opentracing-spring-jaeger-web-starter&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n    &lt;!-- for quartz logic --&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-boot-starter-quartz&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n    &lt;!-- actuator &amp; metric--&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;io.micrometer&lt;/groupId&gt;\n      &lt;artifactId&gt;micrometer-registry-prometheus&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-cloud-starter-config&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-cloud-starter-bootstrap&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-cloud-starter-bus-kafka&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-cloud-context&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n    &lt;!-- test --&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n      &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-security-test&lt;/artifactId&gt;\n      &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-test&lt;/artifactId&gt;\n      &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    ...\n</code></pre>\n<p>How can I fix ?</p>\n<p>Update</p>\n<p>I also tried to add to my application yaml:</p>\n<pre><code>spring:\n  quartz:\n    properties:\n      org:\n        quartz:\n          jobStore:\n            class: org.springframework.scheduling.quartz.LocalDataSourceJobStore\n            driverDelegateClass: org.quartz.impl.jdbcjobstore.PostgreSQLDelegate\n            tablePrefix: TB_PR_QRTZ_\n</code></pre>\n<p>and marked this beasn with <code>@QuartzDataSource</code></p>\n<pre><code>@Bean\n@QuartzDataSource\npublic DataSource testDataSource() {\n    DriverManagerDataSource dataSource = new DriverManagerDataSource();\n    dataSource.setDriverClassName(env.getProperty(&quot;spring.datasource.driverClassName&quot;));\n    dataSource.setUrl(TestContainersRunner.JDBC_URL);\n    dataSource.setUsername(env.getProperty(&quot;spring.datasource.username&quot;));\n    dataSource.setPassword(env.getProperty(&quot;spring.datasource.password&quot;));\n    return dataSource;\n}\n</code></pre>\n<p>But still no luck</p>\n"},{"tags":["java","spring-boot"],"owner":{"account_id":28902927,"reputation":1,"user_id":22137466,"display_name":"ham_ben"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":67,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695784934,"creation_date":1695768809,"question_id":77183841,"body_markdown":"I am trying to experiment Toxiproxy in a SpringBoot test (for a poc) to inject a latency and have this simple test class but the latency toxic I&#39;m setting does not seem to have any effect at all and I&#39;m not sure if I&#39;m missing something?\r\n\r\nI&#39;m basically trying to ping google.com and expecting a latency to delay the response (display of the line: \r\n\r\n```\r\nSystem.out.println(reachable); \r\n```\r\n\r\nbut it is immediately logging it.\r\n\r\nAny hints would be appreciated. \r\n\r\n```\r\n@Testcontainers\r\npublic class ToxiproxyTest {\r\n\r\n  @LocalServerPort\r\n  private int port;\r\n\r\n  // Toxiproxy container, which will be used as a TCP proxy\r\n  @Container\r\n  public static ToxiproxyContainer toxiproxy = new ToxiproxyContainer(&quot;ghcr.io/shopify/toxiproxy:2.5.0&quot;)\r\n      .withNetwork(Network.newNetwork());\r\n\r\n  private Proxy proxy;\r\n\r\n\r\n  @SneakyThrows\r\n  @BeforeEach\r\n  public void setUp() {\r\n    ToxiproxyClient toxiproxyClient = new ToxiproxyClient(toxiproxy.getHost(), toxiproxy.getControlPort());\r\n    proxy = toxiproxyClient.createProxy(&quot;proxy&quot;, toxiproxy.getHost() + &quot;:&quot; + port, &quot;www.google.com:80&quot;);\r\n  }\r\n\r\n  @SneakyThrows\r\n  @Test\r\n  public void testLatency() {\r\n    proxy.toxics().latency(&quot;latency&quot;, ToxicDirection.DOWNSTREAM, 200000L);\r\n\r\n    Process p1 = java.lang.Runtime.getRuntime().exec(&quot;ping -c 1 www.google.com&quot;);\r\n    int returnVal = p1.waitFor();\r\n    boolean reachable = (returnVal==0);\r\n    System.out.println(reachable);\r\n  }\r\n```\r\n","title":"Toxiproxy in Spring Boot test","body":"<p>I am trying to experiment Toxiproxy in a SpringBoot test (for a poc) to inject a latency and have this simple test class but the latency toxic I'm setting does not seem to have any effect at all and I'm not sure if I'm missing something?</p>\n<p>I'm basically trying to ping google.com and expecting a latency to delay the response (display of the line:</p>\n<pre><code>System.out.println(reachable); \n</code></pre>\n<p>but it is immediately logging it.</p>\n<p>Any hints would be appreciated.</p>\n<pre><code>@Testcontainers\npublic class ToxiproxyTest {\n\n  @LocalServerPort\n  private int port;\n\n  // Toxiproxy container, which will be used as a TCP proxy\n  @Container\n  public static ToxiproxyContainer toxiproxy = new ToxiproxyContainer(&quot;ghcr.io/shopify/toxiproxy:2.5.0&quot;)\n      .withNetwork(Network.newNetwork());\n\n  private Proxy proxy;\n\n\n  @SneakyThrows\n  @BeforeEach\n  public void setUp() {\n    ToxiproxyClient toxiproxyClient = new ToxiproxyClient(toxiproxy.getHost(), toxiproxy.getControlPort());\n    proxy = toxiproxyClient.createProxy(&quot;proxy&quot;, toxiproxy.getHost() + &quot;:&quot; + port, &quot;www.google.com:80&quot;);\n  }\n\n  @SneakyThrows\n  @Test\n  public void testLatency() {\n    proxy.toxics().latency(&quot;latency&quot;, ToxicDirection.DOWNSTREAM, 200000L);\n\n    Process p1 = java.lang.Runtime.getRuntime().exec(&quot;ping -c 1 www.google.com&quot;);\n    int returnVal = p1.waitFor();\n    boolean reachable = (returnVal==0);\n    System.out.println(reachable);\n  }\n</code></pre>\n"},{"tags":["java","spring","postgresql","spring-boot","hibernate"],"answers":[{"tags":[],"owner":{"account_id":20770313,"reputation":592,"user_id":15342125,"display_name":"Paul Bradbury"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1685889685,"creation_date":1685889685,"answer_id":76400929,"question_id":76400371,"body_markdown":"This is little bit tricky to get the internal docker server host, as `localhost`\r\n\r\nBut running and connecting `postgres` instance with `docker-compose.yml` with springboot `applications.yml` is the most straightforward. \r\n\r\n1. Check for all the running containers `docker ps -a`\r\n\r\n&gt; now you will the latest or your recent `docker-compose.yml` script one postgres, at the top\r\n\r\n[![screenshot-intellij][1]][1]\r\n\r\n2. Get the port number from the current container using \r\n\r\n&gt; `docker inspect &lt;container-name&gt;| grep &quot;IP&quot;`\r\n\r\n3. Put the IP in the `application.yml` or `application.properties` as connection string\r\n\r\n```yaml\r\nserver:\r\n  port: 8090\r\nspring:\r\n  datasource:\r\n    driver-class-name: org.postgresql.Driver\r\n    url: jdbc:postgresql://192.168.48.2:5432/database_name\r\n    username: postgres\r\n    password: postgres\r\n  # JPA properties\r\n  jpa:\r\n    hibernate:\r\n      ddl-auto: update # When you launch the application for the first time - switch &quot;none&quot; at &quot;create&quot;\r\n    properties:\r\n      hibernate:\r\n        dialect: org.hibernate.dialect.PostgreSQLDialect\r\n```\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/lkEZM.png","title":"FATAL: password authentication failed for user for my spring boot service","body":"<p>This is little bit tricky to get the internal docker server host, as <code>localhost</code></p>\n<p>But running and connecting <code>postgres</code> instance with <code>docker-compose.yml</code> with springboot <code>applications.yml</code> is the most straightforward.</p>\n<ol>\n<li>Check for all the running containers <code>docker ps -a</code></li>\n</ol>\n<blockquote>\n<p>now you will the latest or your recent <code>docker-compose.yml</code> script one postgres, at the top</p>\n</blockquote>\n<p><a href=\"https://i.stack.imgur.com/lkEZM.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/lkEZM.png\" alt=\"screenshot-intellij\" /></a></p>\n<ol start=\"2\">\n<li>Get the port number from the current container using</li>\n</ol>\n<blockquote>\n<p><code>docker inspect &lt;container-name&gt;| grep &quot;IP&quot;</code></p>\n</blockquote>\n<ol start=\"3\">\n<li>Put the IP in the <code>application.yml</code> or <code>application.properties</code> as connection string</li>\n</ol>\n<pre class=\"lang-yaml prettyprint-override\"><code>server:\n  port: 8090\nspring:\n  datasource:\n    driver-class-name: org.postgresql.Driver\n    url: jdbc:postgresql://192.168.48.2:5432/database_name\n    username: postgres\n    password: postgres\n  # JPA properties\n  jpa:\n    hibernate:\n      ddl-auto: update # When you launch the application for the first time - switch &quot;none&quot; at &quot;create&quot;\n    properties:\n      hibernate:\n        dialect: org.hibernate.dialect.PostgreSQLDialect\n</code></pre>\n"},{"tags":[],"owner":{"account_id":29511145,"reputation":1,"user_id":22616160,"display_name":"Mr.GoLangThang"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695783020,"creation_date":1695783020,"answer_id":77184415,"question_id":76400371,"body_markdown":"try this one:\r\n\r\n    docker compose down -v\r\n\r\nafter that:\r\n\r\n    docker compose up -d","title":"FATAL: password authentication failed for user for my spring boot service","body":"<p>try this one:</p>\n<pre><code>docker compose down -v\n</code></pre>\n<p>after that:</p>\n<pre><code>docker compose up -d\n</code></pre>\n"}],"owner":{"account_id":23943628,"reputation":86,"user_id":17936292,"display_name":"Bihi23"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":391,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":2,"score":0,"last_activity_date":1695783020,"creation_date":1685880932,"question_id":76400371,"body_markdown":"I&#39;m running a postgres container with the following config : \r\n```yml\r\nversion: &#39;3.8&#39;\r\n\r\nservices:\r\n  postgres:\r\n    container_name: mydb\r\n    image: postgres\r\n    environment:\r\n      POSTGRES_USER: ibrahim\r\n      POSTGRES_PASSWORD: password\r\n      PGDATA: /data/postgres\r\n    volumes:\r\n      - postgres:/data/postgres\r\n    ports:\r\n      - &quot;5432:5432&quot;\r\n    networks:\r\n      - postgres\r\n    restart: unless-stopped\r\n  pgadmin:\r\n    container_name: pgadmin1\r\n    image: dpage/pgadmin4\r\n    environment:\r\n      PGADMIN_DEFAULT_EMAIL: ${PGADMIN_DEFAULT_EMAIL:-pgadmin4@pgadmin.org}\r\n      PGADMIN_DEFAULT_PASSWORD: ${PGADMIN_DEFAULT_PASSWORD:-admin}\r\n      PGADMIN_CONFIG_SERVER_MODE: &#39;False&#39;\r\n    volumes:\r\n      - pgadmin:/var/lib/pgadmin\r\n    ports:\r\n      - &quot;5050:80&quot;\r\n    networks:\r\n      - postgres\r\n    restart: unless-stopped\r\n\r\nnetworks:\r\n  postgres:\r\n    driver: bridge\r\n\r\nvolumes:\r\n  postgres:\r\n  pgadmin:\r\n```\r\n\r\nI&#39;m trying to connect a spring boot service to this db using the following application.properties file : \r\n```java\r\nserver.port=8080\r\n\r\nspring.application.name=customer\r\n\r\nspring.datasource.url=jdbc:postgresql://localhost:5432/customer\r\nspring.datasource.username=ibrahim\r\nspring.datasource.password=password\r\nspring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect\r\n\r\nspring.jpa.hibernate.ddl-auto=create-drop\r\nspring.jpa.show-sql=true\r\n\r\nspring.jpa.properties.hibernate.format_sql=true\r\n\r\n```\r\n\r\nI got the following error : \r\n```bash\r\norg.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;entityManagerFactory&#39; defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Invocation of init method failed; nested exception is javax.persistence.PersistenceException: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.exception.GenericJDBCException: Unable to open JDBC Connection for DDL execution\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1804) ~[spring-beans-5.3.13.jar:5.3.13]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:620) ~[spring-beans-5.3.13.jar:5.3.13]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.13.jar:5.3.13]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.13.jar:5.3.13]\r\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.13.jar:5.3.13]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.13.jar:5.3.13]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.13.jar:5.3.13]\r\n\tat org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1154) ~[spring-context-5.3.13.jar:5.3.13]\r\n\tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:908) ~[spring-context-5.3.13.jar:5.3.13]\r\n\tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583) ~[spring-context-5.3.13.jar:5.3.13]\r\n\tat org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:145) ~[spring-boot-2.5.7.jar:2.5.7]\r\n\tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:765) ~[spring-boot-2.5.7.jar:2.5.7]\r\n\tat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:445) ~[spring-boot-2.5.7.jar:2.5.7]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:338) ~[spring-boot-2.5.7.jar:2.5.7]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1354) ~[spring-boot-2.5.7.jar:2.5.7]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1343) ~[spring-boot-2.5.7.jar:2.5.7]\r\n\tat org.bihi.customer.CustomerApplication.main(CustomerApplication.java:11) ~[classes/:na]\r\nCaused by: javax.persistence.PersistenceException: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.exception.GenericJDBCException: Unable to open JDBC Connection for DDL execution\r\n\tat org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:421) ~[spring-orm-5.3.13.jar:5.3.13]\r\n\tat org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396) ~[spring-orm-5.3.13.jar:5.3.13]\r\n\tat org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:341) ~[spring-orm-5.3.13.jar:5.3.13]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1863) ~[spring-beans-5.3.13.jar:5.3.13]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1800) ~[spring-beans-5.3.13.jar:5.3.13]\r\n\t... 16 common frames omitted\r\nCaused by: org.hibernate.exception.GenericJDBCException: Unable to open JDBC Connection for DDL execution\r\n\tat org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:47) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:113) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:99) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.DdlTransactionIsolatorNonJtaImpl.getIsolatedConnection(DdlTransactionIsolatorNonJtaImpl.java:69) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.jdbcStatement(GenerationTargetToDatabase.java:77) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:53) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.tool.schema.internal.SchemaDropperImpl.applySqlString(SchemaDropperImpl.java:375) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.tool.schema.internal.SchemaDropperImpl.applySqlStrings(SchemaDropperImpl.java:359) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.tool.schema.internal.SchemaDropperImpl.dropFromMetadata(SchemaDropperImpl.java:241) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.tool.schema.internal.SchemaDropperImpl.performDrop(SchemaDropperImpl.java:154) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:126) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:112) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:145) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:73) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.internal.SessionFactoryImpl.&lt;init&gt;(SessionFactoryImpl.java:318) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:468) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1259) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:58) ~[spring-orm-5.3.13.jar:5.3.13]\r\n\tat org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:365) ~[spring-orm-5.3.13.jar:5.3.13]\r\n\tat org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409) ~[spring-orm-5.3.13.jar:5.3.13]\r\n\t... 20 common frames omitted\r\nCaused by: org.postgresql.util.PSQLException: FATAL: password authentication failed for user &quot;ibrahim&quot;\r\n\tat org.postgresql.core.v3.ConnectionFactoryImpl.doAuthentication(ConnectionFactoryImpl.java:613) ~[postgresql-42.2.24.jar:42.2.24]\r\n\tat org.postgresql.core.v3.ConnectionFactoryImpl.tryConnect(ConnectionFactoryImpl.java:161) ~[postgresql-42.2.24.jar:42.2.24]\r\n\tat org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:213) ~[postgresql-42.2.24.jar:42.2.24]\r\n\tat org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:51) ~[postgresql-42.2.24.jar:42.2.24]\r\n\tat org.postgresql.jdbc.PgConnection.&lt;init&gt;(PgConnection.java:225) ~[postgresql-42.2.24.jar:42.2.24]\r\n\tat org.postgresql.Driver.makeConnection(Driver.java:465) ~[postgresql-42.2.24.jar:42.2.24]\r\n\tat org.postgresql.Driver.connect(Driver.java:264) ~[postgresql-42.2.24.jar:42.2.24]\r\n\tat com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:138) ~[HikariCP-4.0.3.jar:na]\r\n\tat com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:364) ~[HikariCP-4.0.3.jar:na]\r\n\tat com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:206) ~[HikariCP-4.0.3.jar:na]\r\n\tat com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:476) ~[HikariCP-4.0.3.jar:na]\r\n\tat com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:561) ~[HikariCP-4.0.3.jar:na]\r\n\tat com.zaxxer.hikari.pool.HikariPool.&lt;init&gt;(HikariPool.java:115) ~[HikariCP-4.0.3.jar:na]\r\n\tat com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:112) ~[HikariCP-4.0.3.jar:na]\r\n\tat org.hibernate.engine.jdbc.connections.internal.DatasourceConnectionProviderImpl.getConnection(DatasourceConnectionProviderImpl.java:122) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$ConnectionProviderJdbcConnectionAccess.obtainConnection(JdbcEnvironmentInitiator.java:180) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.DdlTransactionIsolatorNonJtaImpl.getIsolatedConnection(DdlTransactionIsolatorNonJtaImpl.java:43) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\t... 36 common frames omitted\r\n```\r\n\r\nI tried to update the pg_hba.conf and add this line : \r\n\r\n```\r\nhost all ibrahim 0.0.0.0/0 trust\r\n```\r\n\r\nBut still giving me same error after restarting services (app and postgres service), am I missing something ?\r\n\r\n(the app is not running on a container)","title":"FATAL: password authentication failed for user for my spring boot service","body":"<p>I'm running a postgres container with the following config :</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>version: '3.8'\n\nservices:\n  postgres:\n    container_name: mydb\n    image: postgres\n    environment:\n      POSTGRES_USER: ibrahim\n      POSTGRES_PASSWORD: password\n      PGDATA: /data/postgres\n    volumes:\n      - postgres:/data/postgres\n    ports:\n      - &quot;5432:5432&quot;\n    networks:\n      - postgres\n    restart: unless-stopped\n  pgadmin:\n    container_name: pgadmin1\n    image: dpage/pgadmin4\n    environment:\n      PGADMIN_DEFAULT_EMAIL: ${PGADMIN_DEFAULT_EMAIL:-pgadmin4@pgadmin.org}\n      PGADMIN_DEFAULT_PASSWORD: ${PGADMIN_DEFAULT_PASSWORD:-admin}\n      PGADMIN_CONFIG_SERVER_MODE: 'False'\n    volumes:\n      - pgadmin:/var/lib/pgadmin\n    ports:\n      - &quot;5050:80&quot;\n    networks:\n      - postgres\n    restart: unless-stopped\n\nnetworks:\n  postgres:\n    driver: bridge\n\nvolumes:\n  postgres:\n  pgadmin:\n</code></pre>\n<p>I'm trying to connect a spring boot service to this db using the following application.properties file :</p>\n<pre class=\"lang-java prettyprint-override\"><code>server.port=8080\n\nspring.application.name=customer\n\nspring.datasource.url=jdbc:postgresql://localhost:5432/customer\nspring.datasource.username=ibrahim\nspring.datasource.password=password\nspring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect\n\nspring.jpa.hibernate.ddl-auto=create-drop\nspring.jpa.show-sql=true\n\nspring.jpa.properties.hibernate.format_sql=true\n\n</code></pre>\n<p>I got the following error :</p>\n<pre class=\"lang-bash prettyprint-override\"><code>org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Invocation of init method failed; nested exception is javax.persistence.PersistenceException: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.exception.GenericJDBCException: Unable to open JDBC Connection for DDL execution\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1804) ~[spring-beans-5.3.13.jar:5.3.13]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:620) ~[spring-beans-5.3.13.jar:5.3.13]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.13.jar:5.3.13]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.13.jar:5.3.13]\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.13.jar:5.3.13]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.13.jar:5.3.13]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.13.jar:5.3.13]\n    at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1154) ~[spring-context-5.3.13.jar:5.3.13]\n    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:908) ~[spring-context-5.3.13.jar:5.3.13]\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583) ~[spring-context-5.3.13.jar:5.3.13]\n    at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:145) ~[spring-boot-2.5.7.jar:2.5.7]\n    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:765) ~[spring-boot-2.5.7.jar:2.5.7]\n    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:445) ~[spring-boot-2.5.7.jar:2.5.7]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:338) ~[spring-boot-2.5.7.jar:2.5.7]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1354) ~[spring-boot-2.5.7.jar:2.5.7]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1343) ~[spring-boot-2.5.7.jar:2.5.7]\n    at org.bihi.customer.CustomerApplication.main(CustomerApplication.java:11) ~[classes/:na]\nCaused by: javax.persistence.PersistenceException: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.exception.GenericJDBCException: Unable to open JDBC Connection for DDL execution\n    at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:421) ~[spring-orm-5.3.13.jar:5.3.13]\n    at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396) ~[spring-orm-5.3.13.jar:5.3.13]\n    at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:341) ~[spring-orm-5.3.13.jar:5.3.13]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1863) ~[spring-beans-5.3.13.jar:5.3.13]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1800) ~[spring-beans-5.3.13.jar:5.3.13]\n    ... 16 common frames omitted\nCaused by: org.hibernate.exception.GenericJDBCException: Unable to open JDBC Connection for DDL execution\n    at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:47) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:113) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:99) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.resource.transaction.backend.jdbc.internal.DdlTransactionIsolatorNonJtaImpl.getIsolatedConnection(DdlTransactionIsolatorNonJtaImpl.java:69) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.jdbcStatement(GenerationTargetToDatabase.java:77) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:53) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.tool.schema.internal.SchemaDropperImpl.applySqlString(SchemaDropperImpl.java:375) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.tool.schema.internal.SchemaDropperImpl.applySqlStrings(SchemaDropperImpl.java:359) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropFromMetadata(SchemaDropperImpl.java:241) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.tool.schema.internal.SchemaDropperImpl.performDrop(SchemaDropperImpl.java:154) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:126) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:112) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:145) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:73) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.internal.SessionFactoryImpl.&lt;init&gt;(SessionFactoryImpl.java:318) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:468) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1259) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:58) ~[spring-orm-5.3.13.jar:5.3.13]\n    at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:365) ~[spring-orm-5.3.13.jar:5.3.13]\n    at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409) ~[spring-orm-5.3.13.jar:5.3.13]\n    ... 20 common frames omitted\nCaused by: org.postgresql.util.PSQLException: FATAL: password authentication failed for user &quot;ibrahim&quot;\n    at org.postgresql.core.v3.ConnectionFactoryImpl.doAuthentication(ConnectionFactoryImpl.java:613) ~[postgresql-42.2.24.jar:42.2.24]\n    at org.postgresql.core.v3.ConnectionFactoryImpl.tryConnect(ConnectionFactoryImpl.java:161) ~[postgresql-42.2.24.jar:42.2.24]\n    at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:213) ~[postgresql-42.2.24.jar:42.2.24]\n    at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:51) ~[postgresql-42.2.24.jar:42.2.24]\n    at org.postgresql.jdbc.PgConnection.&lt;init&gt;(PgConnection.java:225) ~[postgresql-42.2.24.jar:42.2.24]\n    at org.postgresql.Driver.makeConnection(Driver.java:465) ~[postgresql-42.2.24.jar:42.2.24]\n    at org.postgresql.Driver.connect(Driver.java:264) ~[postgresql-42.2.24.jar:42.2.24]\n    at com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:138) ~[HikariCP-4.0.3.jar:na]\n    at com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:364) ~[HikariCP-4.0.3.jar:na]\n    at com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:206) ~[HikariCP-4.0.3.jar:na]\n    at com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:476) ~[HikariCP-4.0.3.jar:na]\n    at com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:561) ~[HikariCP-4.0.3.jar:na]\n    at com.zaxxer.hikari.pool.HikariPool.&lt;init&gt;(HikariPool.java:115) ~[HikariCP-4.0.3.jar:na]\n    at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:112) ~[HikariCP-4.0.3.jar:na]\n    at org.hibernate.engine.jdbc.connections.internal.DatasourceConnectionProviderImpl.getConnection(DatasourceConnectionProviderImpl.java:122) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$ConnectionProviderJdbcConnectionAccess.obtainConnection(JdbcEnvironmentInitiator.java:180) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.resource.transaction.backend.jdbc.internal.DdlTransactionIsolatorNonJtaImpl.getIsolatedConnection(DdlTransactionIsolatorNonJtaImpl.java:43) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    ... 36 common frames omitted\n</code></pre>\n<p>I tried to update the pg_hba.conf and add this line :</p>\n<pre><code>host all ibrahim 0.0.0.0/0 trust\n</code></pre>\n<p>But still giving me same error after restarting services (app and postgres service), am I missing something ?</p>\n<p>(the app is not running on a container)</p>\n"},{"tags":["java","eclipse","rule-engine","drools-kie-server"],"comments":[{"owner":{"account_id":3377022,"reputation":11135,"user_id":2834978,"display_name":"LMC"},"score":0,"creation_date":1694104765,"post_id":77059428,"comment_id":135850682,"body_markdown":"Why not using multiple when-then, one for each condition and print a different message. I assume it&#39;s for debugging.","body":"Why not using multiple when-then, one for each condition and print a different message. I assume it&#39;s for debugging."}],"answers":[{"tags":[],"owner":{"account_id":6853454,"reputation":13,"user_id":5269875,"display_name":"Dilan Madurapperuma"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695782658,"creation_date":1695782658,"answer_id":77184404,"question_id":77059428,"body_markdown":"You can have multiple rules like below :\r\n```\r\nrule &quot;Argus - Environmental Alert_Argus1&quot;\r\nagenda-group &quot;Argus&quot;\r\nwhen\r\n  ruletemplate:RuleTemplate(ParameterName==&quot;Temperatur&quot;,ParameterValue &gt; 2)\r\nthen\r\n  System.out.println(&quot;Rule 1 is triggered&quot;);\r\nend\r\n\r\n\r\nrule &quot;Argus - Environmental Alert_Argus2&quot;\r\nagenda-group &quot;Argus&quot;\r\nwhen\r\n ruletemplate:RuleTemplate(ParameterName==&quot;Humidity&quot;,ParameterValue &gt; 2)\r\nthen\r\n System.out.println(&quot;Rule 2 is triggered&quot;);\r\nend\r\n```\r\n\r\nOr you can refer the values in then like below : \r\n\r\n```\r\nrule &quot;Argus - Environmental Alert_Argus&quot; \r\nagenda-group &quot;Argus&quot; \r\nwhen  \r\n   ruletemplate:RuleTemplate(ParameterName==&quot;Temperatur&quot;,ParameterValue &gt; 2) ||             \r\n   ruletemplate:RuleTemplate(ParameterName==&quot;Humidity&quot;,ParameterValue &gt; 2) || \r\n   ruletemplate:RuleTemplate(ParameterName==&quot;Wind&quot;,ParameterValue &gt; 2) || \r\n   ruletemplate:RuleTemplate(ParameterName==&quot;Noise&quot;,ParameterValue &gt; 60)  \r\nthen \r\n   System.out.println(&quot;Rule is triggered, values : ParameterName :- &quot; + ruletemplate.getParameterName() + &quot;, ParameterValue :- &quot; + ruletemplate.getParameterValue()); \r\nend \r\n```\r\n","title":"how to find which drool rule&#39;s condition was triggered when a rule is fired?","body":"<p>You can have multiple rules like below :</p>\n<pre><code>rule &quot;Argus - Environmental Alert_Argus1&quot;\nagenda-group &quot;Argus&quot;\nwhen\n  ruletemplate:RuleTemplate(ParameterName==&quot;Temperatur&quot;,ParameterValue &gt; 2)\nthen\n  System.out.println(&quot;Rule 1 is triggered&quot;);\nend\n\n\nrule &quot;Argus - Environmental Alert_Argus2&quot;\nagenda-group &quot;Argus&quot;\nwhen\n ruletemplate:RuleTemplate(ParameterName==&quot;Humidity&quot;,ParameterValue &gt; 2)\nthen\n System.out.println(&quot;Rule 2 is triggered&quot;);\nend\n</code></pre>\n<p>Or you can refer the values in then like below :</p>\n<pre><code>rule &quot;Argus - Environmental Alert_Argus&quot; \nagenda-group &quot;Argus&quot; \nwhen  \n   ruletemplate:RuleTemplate(ParameterName==&quot;Temperatur&quot;,ParameterValue &gt; 2) ||             \n   ruletemplate:RuleTemplate(ParameterName==&quot;Humidity&quot;,ParameterValue &gt; 2) || \n   ruletemplate:RuleTemplate(ParameterName==&quot;Wind&quot;,ParameterValue &gt; 2) || \n   ruletemplate:RuleTemplate(ParameterName==&quot;Noise&quot;,ParameterValue &gt; 60)  \nthen \n   System.out.println(&quot;Rule is triggered, values : ParameterName :- &quot; + ruletemplate.getParameterName() + &quot;, ParameterValue :- &quot; + ruletemplate.getParameterValue()); \nend \n</code></pre>\n"}],"owner":{"account_id":26428235,"reputation":39,"user_id":20074826,"display_name":"zainab"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":31,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1695782658,"creation_date":1694088094,"question_id":77059428,"body_markdown":"**Assuming a drool rule is -** \r\n\r\n```\r\n   rule &quot;Argus - Environmental Alert_Argus&quot; \r\n   agenda-group &quot;Argus&quot; \r\n   when  \r\n      ruletemplate:RuleTemplate(ParameterName==&quot;Temperatur&quot;,ParameterValue &gt; 2) ||             \r\n      ruletemplate:RuleTemplate(ParameterName==&quot;Humidity&quot;,ParameterValue &gt; 2) || \r\n      ruletemplate:RuleTemplate(ParameterName==&quot;Wind&quot;,ParameterValue &gt; 2) || \r\n      ruletemplate:RuleTemplate(ParameterName==&quot;Noise&quot;,ParameterValue &gt; 60)  \r\n   then \r\n      println(&quot;Rule is triggered&quot;); \r\n      //do something\r\n   end \r\n```\r\n   \r\n\r\nFrom the above given Rule how to find which rule condition is triggered, is there any method which will return the triggered condition as well? ","title":"how to find which drool rule&#39;s condition was triggered when a rule is fired?","body":"<p><strong>Assuming a drool rule is -</strong></p>\n<pre><code>   rule &quot;Argus - Environmental Alert_Argus&quot; \n   agenda-group &quot;Argus&quot; \n   when  \n      ruletemplate:RuleTemplate(ParameterName==&quot;Temperatur&quot;,ParameterValue &gt; 2) ||             \n      ruletemplate:RuleTemplate(ParameterName==&quot;Humidity&quot;,ParameterValue &gt; 2) || \n      ruletemplate:RuleTemplate(ParameterName==&quot;Wind&quot;,ParameterValue &gt; 2) || \n      ruletemplate:RuleTemplate(ParameterName==&quot;Noise&quot;,ParameterValue &gt; 60)  \n   then \n      println(&quot;Rule is triggered&quot;); \n      //do something\n   end \n</code></pre>\n<p>From the above given Rule how to find which rule condition is triggered, is there any method which will return the triggered condition as well?</p>\n"},{"tags":["java","spring-boot","aop","schedule"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1695728541,"post_id":77179029,"comment_id":136060552,"body_markdown":"The error already tells you what to do. You have request (or session) scoped beans which you are accessing from a non web context (the scheduler).","body":"The error already tells you what to do. You have request (or session) scoped beans which you are accessing from a non web context (the scheduler)."}],"owner":{"account_id":28410440,"reputation":21,"user_id":21733922,"display_name":"Nghi Ho&#224;ng Đức"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695781406,"creation_date":1695723164,"question_id":77179029,"body_markdown":"I&#39;m having a Component in spring boot like this :\r\n\r\n\r\n```\r\n@Component\r\npublic class A{}\r\n@Scheduled(cron = &quot;0 * * * * ?&quot;)\r\npublic void B{\r\n.......\r\n List&lt;Database&gt; databases = databaseServiceImpl.getDatabases(a,b,c);\r\n}\r\n```\r\n\r\n\r\ndatabaseServiceImpl is a service which has structure like this\r\n\r\n\r\n```\r\n@Service\r\npublic class DatabaseServiceImpl{\r\n@Override\r\n  public Database getDatabases(a,b,c){\r\n}\r\n}\r\n```\r\n\r\n\r\nMethod getDatabases is going with an AOP method like this\r\n\r\n```\r\n @Before(&quot;execution(* .....DatabaseServiceImpl.*(..))&quot;)\r\n  public void getSystemType(JoinPoint joinPoint) {\r\n....\r\n}\r\n```\r\n\r\n\r\n\r\n\r\nAnd when I&#39;m running my spring boot project, there is an error:\r\n\r\n&gt; No thread-bound request found: Are you referring to request attributes\r\n&gt; outside of an actual web request, or processing a request outside of\r\n&gt; the originally receiving thread? If you are actually operating within\r\n&gt; a web request and still receive this message, your code is probably\r\n&gt; running outside of DispatcherServlet: In this case, use\r\n&gt; RequestContextListener or RequestContextFilter to expose the current\r\n&gt; request\r\n\r\n\r\nWhat should I do to solve this conflict, thank you so much","title":"Conflict when using annotation @Scheduled and @Before in spring boot","body":"<p>I'm having a Component in spring boot like this :</p>\n<pre><code>@Component\npublic class A{}\n@Scheduled(cron = &quot;0 * * * * ?&quot;)\npublic void B{\n.......\n List&lt;Database&gt; databases = databaseServiceImpl.getDatabases(a,b,c);\n}\n</code></pre>\n<p>databaseServiceImpl is a service which has structure like this</p>\n<pre><code>@Service\npublic class DatabaseServiceImpl{\n@Override\n  public Database getDatabases(a,b,c){\n}\n}\n</code></pre>\n<p>Method getDatabases is going with an AOP method like this</p>\n<pre><code> @Before(&quot;execution(* .....DatabaseServiceImpl.*(..))&quot;)\n  public void getSystemType(JoinPoint joinPoint) {\n....\n}\n</code></pre>\n<p>And when I'm running my spring boot project, there is an error:</p>\n<blockquote>\n<p>No thread-bound request found: Are you referring to request attributes\noutside of an actual web request, or processing a request outside of\nthe originally receiving thread? If you are actually operating within\na web request and still receive this message, your code is probably\nrunning outside of DispatcherServlet: In this case, use\nRequestContextListener or RequestContextFilter to expose the current\nrequest</p>\n</blockquote>\n<p>What should I do to solve this conflict, thank you so much</p>\n"},{"tags":["java","reactjs","spring","spring-boot"],"comments":[{"owner":{"account_id":106364,"reputation":159993,"user_id":283366,"accept_rate":100,"display_name":"Phil"},"score":1,"creation_date":1695715484,"post_id":77178065,"comment_id":136057936,"body_markdown":"Could it be because you&#39;re missing a `/` between `&#39;/photos/add&#39;` and `employeeEmail`?","body":"Could it be because you&#39;re missing a <code>&#47;</code> between <code>&#39;&#47;photos&#47;add&#39;</code> and <code>employeeEmail</code>?"},{"owner":{"account_id":2161358,"reputation":42669,"user_id":1915448,"accept_rate":96,"display_name":"g00glen00b"},"score":0,"creation_date":1695716296,"post_id":77178065,"comment_id":136058087,"body_markdown":"If you get a network error, it would be very helpful if you could share more information about the error (a screenshot of the devtools, ...). In addition it would be nice if you could simplify your code further so there aren&#39;t unknown variables for us (eg. provide a dummy `employeeEmail`, `month` and `year`).","body":"If you get a network error, it would be very helpful if you could share more information about the error (a screenshot of the devtools, ...). In addition it would be nice if you could simplify your code further so there aren&#39;t unknown variables for us (eg. provide a dummy <code>employeeEmail</code>, <code>month</code> and <code>year</code>)."},{"owner":{"account_id":29449413,"reputation":25,"user_id":22566131,"display_name":"Miguel Celos"},"score":0,"creation_date":1695717229,"post_id":77178065,"comment_id":136058267,"body_markdown":"I fixed the question adding in what you saw Phil, and included the error message I&#39;ve been getting in the browser as well. I&#39;ve ruled out possible errors with the API by using postman and from the file upload function of my app by logging the formData values, I&#39;m thinking it might be the api call that&#39;s giving me problems but I can&#39;t find any help online so far.","body":"I fixed the question adding in what you saw Phil, and included the error message I&#39;ve been getting in the browser as well. I&#39;ve ruled out possible errors with the API by using postman and from the file upload function of my app by logging the formData values, I&#39;m thinking it might be the api call that&#39;s giving me problems but I can&#39;t find any help online so far."}],"answers":[{"tags":[],"owner":{"account_id":27467013,"reputation":1,"user_id":20956548,"display_name":"Deidine"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1695727370,"creation_date":1695725331,"answer_id":77179292,"question_id":77178065,"body_markdown":"Your error occurs because you miss give some variable when you send it to Spring, \r\nand I don&#39;t know if you use axios instead of api.post but you should use it \r\n\r\n    let reqInstance = axios.create({\r\n    headers: {\r\n      Authorization : &#39;Bearer &#39;+localStorage.getItem(ACCESS_TOKEN)\r\n    //   Authorization : `Bearer ${localStorage.getItem(&quot;accessToken&quot;)}`\r\n      },\r\n    &#39;Content-Type&#39;: &#39;application/json&#39;,  });\r\n\r\n       getAll(url) {\r\n        return reqInstance.get(API_BASE_URL + url);\r\n    }\r\n\r\n","title":"Connecting my React Application to my Springboot API (Post)","body":"<p>Your error occurs because you miss give some variable when you send it to Spring,\nand I don't know if you use axios instead of api.post but you should use it</p>\n<pre><code>let reqInstance = axios.create({\nheaders: {\n  Authorization : 'Bearer '+localStorage.getItem(ACCESS_TOKEN)\n//   Authorization : `Bearer ${localStorage.getItem(&quot;accessToken&quot;)}`\n  },\n'Content-Type': 'application/json',  });\n\n   getAll(url) {\n    return reqInstance.get(API_BASE_URL + url);\n}\n</code></pre>\n"}],"owner":{"account_id":29449413,"reputation":25,"user_id":22566131,"display_name":"Miguel Celos"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":56,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"answer_count":1,"score":-1,"last_activity_date":1695777616,"creation_date":1695715232,"question_id":77178065,"body_markdown":"I&#39;m getting an **Axios Network Error when trying to upload a file** to my endpoint using my app, and the `App.js` re-renders upon every attempt. This is then sent to `mongodb`.\r\n\r\n**The error:**\r\n\r\n```bash\r\nnetwork error\r\nAxiosError:Network Error at XMLHttpRequest.handleError (http://localhost:3000/static/js/bundle.js:52506:14)\r\n```\r\n\r\n**My API call (react):**\r\n\r\n```javascript\r\n\r\nimport api from &quot;../../api/axiosConfig&quot;;\r\n//my axios import which contains base url + headers\r\n\r\nconst uploadHandler = async () =&gt; {\r\n  const formData = new FormData();\r\n  if (!image) {\r\n    console.log(&#39;No file selected&#39;);\r\n    return;\r\n  }\r\n  try {\r\n    formData.append(&#39;image&#39;, image);\r\n    for (const value of formData.values()) {\r\n      console.log(value);\r\n    }\r\n    const response = api.post(&#39;/photos/add/&#39; + employeeEmail + &#39;/&#39; + month + &#39;/&#39; + year, formData);\r\n    //api here is the base url\r\n    console.log(response);\r\n  } catch (err) {\r\n    console.error(err);\r\n  }\r\n};\r\n\r\n```\r\n**My axios config file**\r\n```\r\nimport axios from &#39;axios&#39;;\r\n\r\nexport default axios.create({\r\n    baseURL: &#39;http://localhost:8080&#39;,\r\n    headers: {&quot;ngrok-skip-browser-warning&quot;: &quot;true&quot;}\r\n});\r\n```\r\n**My Controller:**\r\n\r\n```java\r\n@Autowired\r\nPhotoService photoService;\r\n\r\n@PostMapping(&quot;/photos/add/{employeeEmail}/{month}/{year}&quot;)\r\npublic ResponseEntity&lt;Photo&gt; addPhoto(@PathVariable(&quot;employeeEmail&quot;) String employeeEmail, @PathVariable String month, @PathVariable String year, @RequestParam(&quot;image&quot;) MultipartFile image) throws IOException {\r\n  return new ResponseEntity&lt;Photo&gt;(photoService.addPhoto(employeeEmail, month, year, image), HttpStatus.CREATED);\r\n}\r\n```\r\n\r\nI&#39;ve tried following many tutorials and their formatting of how the url is called/formData is sent and I&#39;m very very new to react so I&#39;d like some help understanding where I made a mistake.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Epl7u.png","title":"Connecting my React Application to my Springboot API (Post)","body":"<p>I'm getting an <strong>Axios Network Error when trying to upload a file</strong> to my endpoint using my app, and the <code>App.js</code> re-renders upon every attempt. This is then sent to <code>mongodb</code>.</p>\n<p><strong>The error:</strong></p>\n<pre class=\"lang-bash prettyprint-override\"><code>network error\nAxiosError:Network Error at XMLHttpRequest.handleError (http://localhost:3000/static/js/bundle.js:52506:14)\n</code></pre>\n<p><strong>My API call (react):</strong></p>\n<pre class=\"lang-js prettyprint-override\"><code>\nimport api from &quot;../../api/axiosConfig&quot;;\n//my axios import which contains base url + headers\n\nconst uploadHandler = async () =&gt; {\n  const formData = new FormData();\n  if (!image) {\n    console.log('No file selected');\n    return;\n  }\n  try {\n    formData.append('image', image);\n    for (const value of formData.values()) {\n      console.log(value);\n    }\n    const response = api.post('/photos/add/' + employeeEmail + '/' + month + '/' + year, formData);\n    //api here is the base url\n    console.log(response);\n  } catch (err) {\n    console.error(err);\n  }\n};\n\n</code></pre>\n<p><strong>My axios config file</strong></p>\n<pre><code>import axios from 'axios';\n\nexport default axios.create({\n    baseURL: 'http://localhost:8080',\n    headers: {&quot;ngrok-skip-browser-warning&quot;: &quot;true&quot;}\n});\n</code></pre>\n<p><strong>My Controller:</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>@Autowired\nPhotoService photoService;\n\n@PostMapping(&quot;/photos/add/{employeeEmail}/{month}/{year}&quot;)\npublic ResponseEntity&lt;Photo&gt; addPhoto(@PathVariable(&quot;employeeEmail&quot;) String employeeEmail, @PathVariable String month, @PathVariable String year, @RequestParam(&quot;image&quot;) MultipartFile image) throws IOException {\n  return new ResponseEntity&lt;Photo&gt;(photoService.addPhoto(employeeEmail, month, year, image), HttpStatus.CREATED);\n}\n</code></pre>\n<p>I've tried following many tutorials and their formatting of how the url is called/formData is sent and I'm very very new to react so I'd like some help understanding where I made a mistake.</p>\n"},{"tags":["java","spring-mvc","swagger","spring-restcontroller","spring-rest"],"comments":[{"owner":{"account_id":6094808,"reputation":7041,"user_id":4755974,"display_name":"Veselin Davidov"},"score":0,"creation_date":1524128303,"post_id":49916772,"comment_id":86848984,"body_markdown":"Maybe add the media type to the resource so it knows it should use the byteArrayHttpMessageConverter?","body":"Maybe add the media type to the resource so it knows it should use the byteArrayHttpMessageConverter?"},{"owner":{"account_id":13398462,"reputation":103,"user_id":9668694,"display_name":"Aminos"},"score":0,"creation_date":1524129009,"post_id":49916772,"comment_id":86849432,"body_markdown":"are you talking about the byteArrayResource ? how can I do that?","body":"are you talking about the byteArrayResource ? how can I do that?"}],"answers":[{"tags":[],"owner":{"account_id":2623128,"reputation":775,"user_id":2270735,"accept_rate":50,"display_name":"Alberto"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1524128414,"creation_date":1524128414,"answer_id":49916893,"question_id":49916772,"body_markdown":"Try returning array of bytes:\r\n\r\n    @RequestMapping(value = &quot;/temp&quot;, method = RequestMethod.GET)\r\n    public @ResponseBody byte[] downloadDocument(\r\n            @RequestParam(value = &quot;id&quot;, required = true) Long idInscription) throws IOException {\r\n        FileInputStream signedFileInputStream = new FileInputStream(signedFilePAth);\r\n        byte[] doc = IOUtils.toByteArray(fis);\r\n        return doc;\r\n    }\r\n\r\nIOUtils is from `org.apache.commons.io.IOUtils`.","title":"return ByteArrayResource in spring restcontroller response","body":"<p>Try returning array of bytes:</p>\n\n<pre><code>@RequestMapping(value = \"/temp\", method = RequestMethod.GET)\npublic @ResponseBody byte[] downloadDocument(\n        @RequestParam(value = \"id\", required = true) Long idInscription) throws IOException {\n    FileInputStream signedFileInputStream = new FileInputStream(signedFilePAth);\n    byte[] doc = IOUtils.toByteArray(fis);\n    return doc;\n}\n</code></pre>\n\n<p>IOUtils is from <code>org.apache.commons.io.IOUtils</code>.</p>\n"},{"tags":[],"owner":{"account_id":2492679,"reputation":20748,"user_id":2169845,"accept_rate":91,"display_name":"zappee"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1524129544,"creation_date":1524129544,"answer_id":49917276,"question_id":49916772,"body_markdown":"It seems that the response content type definition is missing from your code.\r\n\r\nThe following code snippet returns with an image content which is displayed by web browser. It is a Jersy code but you can adopt it to Spring: \r\n\r\n    @GET\r\n    @Path(&quot;/{image-uuid}&quot;)\r\n    @Produces(&quot;images/jpg&quot;)\r\n    public Response getImage(@PathParam(&quot;uuid&quot;) final String uuid) throws IOException {\r\n        byte[] content = imageDao.getImage(uuid);\r\n        if (Objects.isNull(content )) {\r\n            throw new ImageNotFoundError(uuid);\r\n        }\r\n\r\n        ByteArrayInputStream stream = new ByteArrayInputStream(content);\r\n        return Response.ok(stream).build();\r\n    }\r\n","title":"return ByteArrayResource in spring restcontroller response","body":"<p>It seems that the response content type definition is missing from your code.</p>\n\n<p>The following code snippet returns with an image content which is displayed by web browser. It is a Jersy code but you can adopt it to Spring: </p>\n\n<pre><code>@GET\n@Path(\"/{image-uuid}\")\n@Produces(\"images/jpg\")\npublic Response getImage(@PathParam(\"uuid\") final String uuid) throws IOException {\n    byte[] content = imageDao.getImage(uuid);\n    if (Objects.isNull(content )) {\n        throw new ImageNotFoundError(uuid);\n    }\n\n    ByteArrayInputStream stream = new ByteArrayInputStream(content);\n    return Response.ok(stream).build();\n}\n</code></pre>\n"}],"owner":{"account_id":13398462,"reputation":103,"user_id":9668694,"display_name":"Aminos"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":16227,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1695776820,"creation_date":1524128036,"question_id":49916772,"body_markdown":"I&#39;m trying to download a file using my restController, but it always return this error : \r\n\r\n     java.io.FileNotFoundException: Byte array resource [resource loaded from byte array] cannot be resolved to URL\r\n\tat org.springframework.core.io.AbstractResource.getURL(AbstractResource.java:90) ~[spring-core-4.2.2.RELEASE.jar:4.2.2.RELEASE]\r\n\r\nthen it downloads a file that has something like this : \r\n\r\n      {&quot;byteArray&quot;:&quot;JVBERi0xLjQKJeL.... \r\n\r\nhere&#39;s my restController :\r\n\r\n    @Api(&quot;products&quot;)\r\n    @RestController\r\n    @RequestMapping(&quot;/v1/products&quot;)\r\n    public class DocumentApi extends storeApi {\r\n        @ApiOperation(&quot;GET download document&quot;)\r\n        @RequestMapping(value = &quot;/temp&quot;, method = RequestMethod.GET)\r\n        @ResponseStatus(code = HttpStatus.OK)\r\n        public ResponseEntity&lt;ByteArrayResource&gt; downloadDocument(\r\n            @RequestParam(value = &quot;id&quot;, required = true) Long idInscription) throws IOException {\r\n              String signedFilePAth = &quot;C:/APPLIS/signedTemp/5982312957957647037_signed.pdf&quot;\r\n              return ResponseEntity\r\n                     .ok()\r\n                     .contentLength(contentLength)\r\n                     .contentType(\r\n                         MediaType.parseMediaType(&quot;application/pdf&quot;))\r\n                     .body(new \r\n              ByteArrayResource(Files.readAllBytes(Paths.get(signedFilePAth))));\r\n        }\r\n    }\r\n\r\nand here&#39;s my spring configuration :\r\n\r\n    protected MappingJackson2HttpMessageConverter jacksonMessageConverter() {\r\n        MappingJackson2HttpMessageConverter messageConverter = new MappingJackson2HttpMessageConverter();\r\n        ObjectMapper mapper = new ObjectMapper();\r\n        mapper.configure(SerializationFeature.FAIL_ON_EMPTY_BEANS, false);\r\n        // Registering Hibernate4Module to support lazy objects\r\n        mapper.registerModule(new Hibernate4Module());\r\n        messageConverter.setObjectMapper(mapper);\r\n        return messageConverter;\r\n    }\r\n\r\n    public ByteArrayHttpMessageConverter byteArrayHttpMessageConverter() {\r\n        ByteArrayHttpMessageConverter arrayHttpMessageConverter = new ByteArrayHttpMessageConverter();\r\n        arrayHttpMessageConverter.setSupportedMediaTypes(getSupportedMediaTypes());\r\n        return arrayHttpMessageConverter;\r\n    }\r\n\r\n    private List&lt;MediaType&gt; getSupportedMediaTypes() {\r\n        List&lt;MediaType&gt; list = new ArrayList&lt;MediaType&gt;();\r\n        list.add(MediaType.APPLICATION_OCTET_STREAM);\r\n        list.add(MediaType.parseMediaType(&quot;application/pdf&quot;));\r\n        return list;\r\n    }\r\n\r\n    @Override\r\n    public void configureMessageConverters(List&lt;HttpMessageConverter&lt;?&gt;&gt; converters) {\r\n        converters.add(jacksonMessageConverter());\r\n        converters.add(byteArrayHttpMessageConverter());\r\n        super.configureMessageConverters(converters);\r\n    }\r\n\r\nwhat seems to be the problem ? how can i solve this ?\r\n\r\nnb : I don&#39;t know if this is related, but my swagger-ui.html doesn&#39;t work (it shows a blank page) while v2/api-docs/ works fine","title":"return ByteArrayResource in spring restcontroller response","body":"<p>I'm trying to download a file using my restController, but it always return this error : </p>\n\n<pre><code> java.io.FileNotFoundException: Byte array resource [resource loaded from byte array] cannot be resolved to URL\nat org.springframework.core.io.AbstractResource.getURL(AbstractResource.java:90) ~[spring-core-4.2.2.RELEASE.jar:4.2.2.RELEASE]\n</code></pre>\n\n<p>then it downloads a file that has something like this : </p>\n\n<pre><code>  {\"byteArray\":\"JVBERi0xLjQKJeL.... \n</code></pre>\n\n<p>here's my restController :</p>\n\n<pre><code>@Api(\"products\")\n@RestController\n@RequestMapping(\"/v1/products\")\npublic class DocumentApi extends storeApi {\n    @ApiOperation(\"GET download document\")\n    @RequestMapping(value = \"/temp\", method = RequestMethod.GET)\n    @ResponseStatus(code = HttpStatus.OK)\n    public ResponseEntity&lt;ByteArrayResource&gt; downloadDocument(\n        @RequestParam(value = \"id\", required = true) Long idInscription) throws IOException {\n          String signedFilePAth = \"C:/APPLIS/signedTemp/5982312957957647037_signed.pdf\"\n          return ResponseEntity\n                 .ok()\n                 .contentLength(contentLength)\n                 .contentType(\n                     MediaType.parseMediaType(\"application/pdf\"))\n                 .body(new \n          ByteArrayResource(Files.readAllBytes(Paths.get(signedFilePAth))));\n    }\n}\n</code></pre>\n\n<p>and here's my spring configuration :</p>\n\n<pre><code>protected MappingJackson2HttpMessageConverter jacksonMessageConverter() {\n    MappingJackson2HttpMessageConverter messageConverter = new MappingJackson2HttpMessageConverter();\n    ObjectMapper mapper = new ObjectMapper();\n    mapper.configure(SerializationFeature.FAIL_ON_EMPTY_BEANS, false);\n    // Registering Hibernate4Module to support lazy objects\n    mapper.registerModule(new Hibernate4Module());\n    messageConverter.setObjectMapper(mapper);\n    return messageConverter;\n}\n\npublic ByteArrayHttpMessageConverter byteArrayHttpMessageConverter() {\n    ByteArrayHttpMessageConverter arrayHttpMessageConverter = new ByteArrayHttpMessageConverter();\n    arrayHttpMessageConverter.setSupportedMediaTypes(getSupportedMediaTypes());\n    return arrayHttpMessageConverter;\n}\n\nprivate List&lt;MediaType&gt; getSupportedMediaTypes() {\n    List&lt;MediaType&gt; list = new ArrayList&lt;MediaType&gt;();\n    list.add(MediaType.APPLICATION_OCTET_STREAM);\n    list.add(MediaType.parseMediaType(\"application/pdf\"));\n    return list;\n}\n\n@Override\npublic void configureMessageConverters(List&lt;HttpMessageConverter&lt;?&gt;&gt; converters) {\n    converters.add(jacksonMessageConverter());\n    converters.add(byteArrayHttpMessageConverter());\n    super.configureMessageConverters(converters);\n}\n</code></pre>\n\n<p>what seems to be the problem ? how can i solve this ?</p>\n\n<p>nb : I don't know if this is related, but my swagger-ui.html doesn't work (it shows a blank page) while v2/api-docs/ works fine</p>\n"},{"tags":["java","netbeans","path","compilation","warnings"],"comments":[{"owner":{"account_id":2691224,"reputation":1066,"user_id":2324541,"display_name":"vvs"},"score":0,"creation_date":1612549478,"post_id":66068153,"comment_id":116810826,"body_markdown":"Consider reading up the modules feature. It seems recent version of java are throwing the warnings and suggesting that you use the modules feature in your code. http://tutorials.jenkov.com/java/modules.html","body":"Consider reading up the modules feature. It seems recent version of java are throwing the warnings and suggesting that you use the modules feature in your code. <a href=\"http://tutorials.jenkov.com/java/modules.html\" rel=\"nofollow noreferrer\">tutorials.jenkov.com/java/modules.html</a>"},{"owner":{"account_id":11989539,"reputation":131,"user_id":15153895,"display_name":"WeberEInc"},"score":0,"creation_date":1613257547,"post_id":66068153,"comment_id":117021427,"body_markdown":"Jens -thank you for your comment and your pitch for Java Modules, but this doesn&#39;t answer my specific question about this specific warning message and how I can go about resolving it.  Warning message should be easily decipherable - not cryptic without resource to resolve them.","body":"Jens -thank you for your comment and your pitch for Java Modules, but this doesn&#39;t answer my specific question about this specific warning message and how I can go about resolving it.  Warning message should be easily decipherable - not cryptic without resource to resolve them."},{"owner":{"account_id":2691224,"reputation":1066,"user_id":2324541,"display_name":"vvs"},"score":1,"creation_date":1613259736,"post_id":66068153,"comment_id":117021838,"body_markdown":"The warning is as with many system messages is indeed cryptic. Assume you are using - source 11 somewhere in the javac command used for the build. Please try adding - - release 11 and rerun the build. That should fix this","body":"The warning is as with many system messages is indeed cryptic. Assume you are using - source 11 somewhere in the javac command used for the build. Please try adding - - release 11 and rerun the build. That should fix this"},{"owner":{"account_id":11989539,"reputation":131,"user_id":15153895,"display_name":"WeberEInc"},"score":1,"creation_date":1613264015,"post_id":66068153,"comment_id":117022496,"body_markdown":"I stumbled on the issue and the fix!  While the new install changed the Java Platform in the Libraries properties to correctly point to JDK 15 as the new (Default), in the Sources area, towards the bottom, it left the Source/Binary Format still showing JDK 11.  Changing this manually to JDK 15 made the warning go away.  The warning message should have said something to the effect of &quot;Source/Binary Format&quot; does not match Library Java Platform - check corresponding versions.&quot;","body":"I stumbled on the issue and the fix!  While the new install changed the Java Platform in the Libraries properties to correctly point to JDK 15 as the new (Default), in the Sources area, towards the bottom, it left the Source/Binary Format still showing JDK 11.  Changing this manually to JDK 15 made the warning go away.  The warning message should have said something to the effect of &quot;Source/Binary Format&quot; does not match Library Java Platform - check corresponding versions.&quot;"},{"owner":{"account_id":2691224,"reputation":1066,"user_id":2324541,"display_name":"vvs"},"score":0,"creation_date":1613266402,"post_id":66068153,"comment_id":117022863,"body_markdown":"@WeberElnc The warning doesn&#39;t say about source format since in java it&#39;s a perfectly valid scenario to use a later version of jdk (15) and want to compile with compatibility level of an older version (11). Usually changing the version for compiling can be non trivial exercise especially if the source code uses classes or methods that have been deprecated in later versions. In such a case changing compile version would involve code rewrite.","body":"@WeberElnc The warning doesn&#39;t say about source format since in java it&#39;s a perfectly valid scenario to use a later version of jdk (15) and want to compile with compatibility level of an older version (11). Usually changing the version for compiling can be non trivial exercise especially if the source code uses classes or methods that have been deprecated in later versions. In such a case changing compile version would involve code rewrite."}],"answers":[{"tags":[],"owner":{"account_id":20032283,"reputation":1,"user_id":14684778,"display_name":"isilacar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1612549733,"creation_date":1612549733,"answer_id":66068678,"question_id":66068153,"body_markdown":"It is sometimes happened because of java updates. When the newer version is needed,it says you to remove the older version. If you didn&#39;t do that this cause come confusing. You can better use older versions to solve this problem. Maybe this can help you.","title":"Java warning: [options] system modules path not set in conjunction with -source 11","body":"<p>It is sometimes happened because of java updates. When the newer version is needed,it says you to remove the older version. If you didn't do that this cause come confusing. You can better use older versions to solve this problem. Maybe this can help you.</p>\n"},{"tags":[],"owner":{"account_id":11989539,"reputation":131,"user_id":15153895,"display_name":"WeberEInc"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1613264079,"creation_date":1613264079,"answer_id":66191460,"question_id":66068153,"body_markdown":"I stumbled on the issue and the fix! While the new install changed the Java Platform in the Libraries properties to correctly point to JDK 15 as the new (Default), in the Sources area, towards the bottom, it left the Source/Binary Format still showing JDK 11. Changing this manually to JDK 15 made the warning go away. The warning message should have said something to the effect of &quot;Source/Binary Format&quot; does not match Library Java Platform - check corresponding versions.&quot;","title":"Java warning: [options] system modules path not set in conjunction with -source 11","body":"<p>I stumbled on the issue and the fix! While the new install changed the Java Platform in the Libraries properties to correctly point to JDK 15 as the new (Default), in the Sources area, towards the bottom, it left the Source/Binary Format still showing JDK 11. Changing this manually to JDK 15 made the warning go away. The warning message should have said something to the effect of &quot;Source/Binary Format&quot; does not match Library Java Platform - check corresponding versions.&quot;</p>\n"},{"tags":[],"owner":{"account_id":9752053,"reputation":823,"user_id":8430632,"display_name":"Laszlo Sarvold"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1628151417,"creation_date":1628150688,"answer_id":68662778,"question_id":66068153,"body_markdown":"I had this exact same warning, which in my case ended up as an error and caused build to fail when runnning mvn commands. I was using jdk 16 and also had 11 installed. \r\nIn my case, nothing has fixed it except to fully uninstall java from my mac and reinstall the versions I needed from https://adoptopenjdk.net/. ","title":"Java warning: [options] system modules path not set in conjunction with -source 11","body":"<p>I had this exact same warning, which in my case ended up as an error and caused build to fail when runnning mvn commands. I was using jdk 16 and also had 11 installed.\nIn my case, nothing has fixed it except to fully uninstall java from my mac and reinstall the versions I needed from <a href=\"https://adoptopenjdk.net/\" rel=\"nofollow noreferrer\">https://adoptopenjdk.net/</a>.</p>\n"},{"tags":[],"owner":{"account_id":26546949,"reputation":1,"user_id":20176879,"display_name":"Morgan Iverson"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1665068659,"creation_date":1665068627,"answer_id":73976042,"question_id":66068153,"body_markdown":"You need to update your JAVA_HOME environment variable.\r\n\r\n**On Mac** update your `~/.bash_profile` or `~/.zshrc`. Make sure you have the version you want installed and make `-v##` the version you want to use. For example, \r\n\r\nTo use Java 11, \r\n```\r\nexport JAVA_HOME=`/usr/libexec/java_home -v11` \r\n```\r\n\r\nTo use Java 17, \r\n```\r\nexport JAVA_HOME=`/usr/libexec/java_home -v17` \r\n```\r\n\r\n**On Windows** change you system environment variable to your new java version. \r\n\r\n[Heres how! (Confluence)](https://confluence.atlassian.com/doc/setting-the-java_home-variable-in-windows-8895.html)","title":"Java warning: [options] system modules path not set in conjunction with -source 11","body":"<p>You need to update your JAVA_HOME environment variable.</p>\n<p><strong>On Mac</strong> update your <code>~/.bash_profile</code> or <code>~/.zshrc</code>. Make sure you have the version you want installed and make <code>-v##</code> the version you want to use. For example,</p>\n<p>To use Java 11,</p>\n<pre><code>export JAVA_HOME=`/usr/libexec/java_home -v11` \n</code></pre>\n<p>To use Java 17,</p>\n<pre><code>export JAVA_HOME=`/usr/libexec/java_home -v17` \n</code></pre>\n<p><strong>On Windows</strong> change you system environment variable to your new java version.</p>\n<p><a href=\"https://confluence.atlassian.com/doc/setting-the-java_home-variable-in-windows-8895.html\" rel=\"nofollow noreferrer\">Heres how! (Confluence)</a></p>\n"},{"tags":[],"owner":{"account_id":21851467,"reputation":682,"user_id":16143492,"display_name":"nineninesevenfour"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1695774780,"creation_date":1695774780,"answer_id":77184084,"question_id":66068153,"body_markdown":"I am posting a new anwser to this question, because I feel something important has been overlooked here before but should be pointed out to readers coming across in the future. Let&#39;s try to answer the actual question first and then give a more detailed explanation.\r\n\r\n&gt; What setting am I missing that wasn&#39;t properly updated as I&#39;ve updated my JDK and my IDE? Or am I completely looking in the wrong places?\r\n\r\nThis message is an output of `javac` (the Java compiler) and created (since JDK14) by default when the argument `-source` diverges from the version of the JDK from which `javac` was started. There is not one solution, you have to think first, if `-source` (and `-target` as well) are still up to date for your needs. That means:\r\n* *What is the JRE (or JDK) version I want/need to support my artifacts to run on?*\r\n\r\nRemark1: `-source` cannot be completely treated independently from `-target`, because the first one must be &lt;= the second one (you cannot develop sources against JDK 17 and run on JDK 8 for example - that would be cool, but is not supported).\r\n\r\nRemark2: In Maven the parameters are named `maven.compiler.source` and `maven.compiler.target`, in Gradle `sourceCompatibility` and `targetCompatibility`, I don&#39;t know for Ant (pls. check third link below).\r\n\r\nIf you want/need to __keep the current compatibility settings__ then you have basically \r\ntwo options:\r\n\r\n* (recommended) Replace `-source` and `-target` by **`--release`**. This option implicitly includes a check against the API version of the targeted JRE/JDK! Therefor the message goes away as well.\r\n* Add addtionally the **`--system`** option to `javac` pointing to a JDK of the same version as `--source`. Setting that parameter allows `javac` to take the API into account as well. It is roughly a replacement for `-bootclasspath` with the difference that it doesn&#39;t point to a &quot;rt.jar&quot;, but to the root directory, like `JAVA_HOME` would do. Think of it as a &quot;old JAVA_HOME&quot; option.\r\n\r\nIf you can **switch to a newer JDK/JRE** version for runtime entirely, of course `-source` and `-target` can be adapted accordingly (I&#39;d recommend to use `--release` instead anyway).\r\n\r\nThe actual problem (and that&#39;s why I am writing so much), is that neither `-source` nor `-target` include a check against the API, hence the warning. For example (without API check through `--release` or `--system`) it would be possible to compile with `-target 1.7` **and** reference `java.util.function.Consumer` at the same time, which has been added in JDK 8. You might not even notice locally (neither in CI), when running tests with the newer JDK. It just stops working in production.\r\n\r\nsee also:\r\n* https://docs.oracle.com/en/java/javase/20/docs/specs/man/javac.html#standard-options\r\n* https://stackoverflow.com/questions/59049980/maven-compiler-release-as-an-replacement-for-source-and-target\r\n* https://ant.apache.org/manual/Tasks/javac.html\r\n* https://maven.apache.org/plugins/maven-compiler-plugin/compile-mojo.html\r\n* https://docs.gradle.org/current/userguide/building_java_projects.html#sec:compiling_with_release","title":"Java warning: [options] system modules path not set in conjunction with -source 11","body":"<p>I am posting a new anwser to this question, because I feel something important has been overlooked here before but should be pointed out to readers coming across in the future. Let's try to answer the actual question first and then give a more detailed explanation.</p>\n<blockquote>\n<p>What setting am I missing that wasn't properly updated as I've updated my JDK and my IDE? Or am I completely looking in the wrong places?</p>\n</blockquote>\n<p>This message is an output of <code>javac</code> (the Java compiler) and created (since JDK14) by default when the argument <code>-source</code> diverges from the version of the JDK from which <code>javac</code> was started. There is not one solution, you have to think first, if <code>-source</code> (and <code>-target</code> as well) are still up to date for your needs. That means:</p>\n<ul>\n<li><em>What is the JRE (or JDK) version I want/need to support my artifacts to run on?</em></li>\n</ul>\n<p>Remark1: <code>-source</code> cannot be completely treated independently from <code>-target</code>, because the first one must be &lt;= the second one (you cannot develop sources against JDK 17 and run on JDK 8 for example - that would be cool, but is not supported).</p>\n<p>Remark2: In Maven the parameters are named <code>maven.compiler.source</code> and <code>maven.compiler.target</code>, in Gradle <code>sourceCompatibility</code> and <code>targetCompatibility</code>, I don't know for Ant (pls. check third link below).</p>\n<p>If you want/need to <strong>keep the current compatibility settings</strong> then you have basically\ntwo options:</p>\n<ul>\n<li>(recommended) Replace <code>-source</code> and <code>-target</code> by <strong><code>--release</code></strong>. This option implicitly includes a check against the API version of the targeted JRE/JDK! Therefor the message goes away as well.</li>\n<li>Add addtionally the <strong><code>--system</code></strong> option to <code>javac</code> pointing to a JDK of the same version as <code>--source</code>. Setting that parameter allows <code>javac</code> to take the API into account as well. It is roughly a replacement for <code>-bootclasspath</code> with the difference that it doesn't point to a &quot;rt.jar&quot;, but to the root directory, like <code>JAVA_HOME</code> would do. Think of it as a &quot;old JAVA_HOME&quot; option.</li>\n</ul>\n<p>If you can <strong>switch to a newer JDK/JRE</strong> version for runtime entirely, of course <code>-source</code> and <code>-target</code> can be adapted accordingly (I'd recommend to use <code>--release</code> instead anyway).</p>\n<p>The actual problem (and that's why I am writing so much), is that neither <code>-source</code> nor <code>-target</code> include a check against the API, hence the warning. For example (without API check through <code>--release</code> or <code>--system</code>) it would be possible to compile with <code>-target 1.7</code> <strong>and</strong> reference <code>java.util.function.Consumer</code> at the same time, which has been added in JDK 8. You might not even notice locally (neither in CI), when running tests with the newer JDK. It just stops working in production.</p>\n<p>see also:</p>\n<ul>\n<li><a href=\"https://docs.oracle.com/en/java/javase/20/docs/specs/man/javac.html#standard-options\" rel=\"nofollow noreferrer\">https://docs.oracle.com/en/java/javase/20/docs/specs/man/javac.html#standard-options</a></li>\n<li><a href=\"https://stackoverflow.com/questions/59049980/maven-compiler-release-as-an-replacement-for-source-and-target\">&quot;maven.compiler.release&quot; as an replacement for source and target?</a></li>\n<li><a href=\"https://ant.apache.org/manual/Tasks/javac.html\" rel=\"nofollow noreferrer\">https://ant.apache.org/manual/Tasks/javac.html</a></li>\n<li><a href=\"https://maven.apache.org/plugins/maven-compiler-plugin/compile-mojo.html\" rel=\"nofollow noreferrer\">https://maven.apache.org/plugins/maven-compiler-plugin/compile-mojo.html</a></li>\n<li><a href=\"https://docs.gradle.org/current/userguide/building_java_projects.html#sec:compiling_with_release\" rel=\"nofollow noreferrer\">https://docs.gradle.org/current/userguide/building_java_projects.html#sec:compiling_with_release</a></li>\n</ul>\n"}],"owner":{"account_id":11989539,"reputation":131,"user_id":15153895,"display_name":"WeberEInc"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7823,"favorite_count":0,"down_vote_count":1,"up_vote_count":7,"accepted_answer_id":66191460,"answer_count":5,"score":6,"last_activity_date":1695774780,"creation_date":1612547365,"question_id":66068153,"body_markdown":"This machine has had multiple version of Java JDK installed and multiple version of multiple IDEs (Netbeans, IntelliJ, Eclipse, etc.)  Most recently, I have added JDK 15.0.2 and Netbeans 12.2.  When trying to compile a simple &quot;Hello World&quot;, this is the output that results:\r\n\r\n    ant -f C:\\\\Data\\\\NetBeans\\\\grading\\\\TestGrading -Dnb.internal.action.name=run.single -Djavac.includes=testgrading/HelloWorld.java -Drun.class=HelloWorld run-single\r\n    \r\n    init:\r\n    \r\n    Deleting: C:\\Data\\NetBeans\\grading\\TestGrading\\build\\built-jar.properties\r\n    \r\n    deps-jar:\r\n    \r\n    Updating property file: C:\\Data\\NetBeans\\grading\\TestGrading\\build\\built-jar.properties\r\n    \r\n    Compiling 1 source file to C:\\Data\\NetBeans\\grading\\TestGrading\\build\\classes\r\n    \r\n    **warning: [options] system modules path not set in conjunction with -source 11**\r\n    \r\n    **1 warning**\r\n    \r\n    compile-single:\r\n    \r\n    run-single:\r\n    \r\n    Hello World!\r\n    \r\n    BUILD SUCCESSFUL (total time: 1 second)\r\n\r\nAs you can see, the file compiles and runs, but the warning is causing me concern.  I have not been able to find a similar warning in my searches... (all of the warnings refer to &quot;bootstrap class path not set&quot; instead of &quot;system modules path not set&quot;\r\n\r\nI have updated my Environment Variable to reflect the most current JDK with this entry:\r\nJAVA_HOME=C:\\Program Files\\Java\\jdk-15.0.2\r\n\r\nWhat setting am I missing that wasn&#39;t properly updated as I&#39;ve updated my JDK and my IDE?  Or am I completely looking in the wrong places?  Or do I need to fully uninstall previous versions and, if so, what will that do to previous code written using those previous versions that I&#39;d still like to retain?\r\n\r\nThanks in advance! \r\n","title":"Java warning: [options] system modules path not set in conjunction with -source 11","body":"<p>This machine has had multiple version of Java JDK installed and multiple version of multiple IDEs (Netbeans, IntelliJ, Eclipse, etc.)  Most recently, I have added JDK 15.0.2 and Netbeans 12.2.  When trying to compile a simple &quot;Hello World&quot;, this is the output that results:</p>\n<pre><code>ant -f C:\\\\Data\\\\NetBeans\\\\grading\\\\TestGrading -Dnb.internal.action.name=run.single -Djavac.includes=testgrading/HelloWorld.java -Drun.class=HelloWorld run-single\n\ninit:\n\nDeleting: C:\\Data\\NetBeans\\grading\\TestGrading\\build\\built-jar.properties\n\ndeps-jar:\n\nUpdating property file: C:\\Data\\NetBeans\\grading\\TestGrading\\build\\built-jar.properties\n\nCompiling 1 source file to C:\\Data\\NetBeans\\grading\\TestGrading\\build\\classes\n\n**warning: [options] system modules path not set in conjunction with -source 11**\n\n**1 warning**\n\ncompile-single:\n\nrun-single:\n\nHello World!\n\nBUILD SUCCESSFUL (total time: 1 second)\n</code></pre>\n<p>As you can see, the file compiles and runs, but the warning is causing me concern.  I have not been able to find a similar warning in my searches... (all of the warnings refer to &quot;bootstrap class path not set&quot; instead of &quot;system modules path not set&quot;</p>\n<p>I have updated my Environment Variable to reflect the most current JDK with this entry:\nJAVA_HOME=C:\\Program Files\\Java\\jdk-15.0.2</p>\n<p>What setting am I missing that wasn't properly updated as I've updated my JDK and my IDE?  Or am I completely looking in the wrong places?  Or do I need to fully uninstall previous versions and, if so, what will that do to previous code written using those previous versions that I'd still like to retain?</p>\n<p>Thanks in advance!</p>\n"},{"tags":["java","google-maps","jsf","primefaces"],"comments":[{"owner":{"account_id":10368273,"reputation":742,"user_id":10195307,"display_name":"BugsForBreakfast"},"score":0,"creation_date":1561481207,"post_id":56758017,"comment_id":100074813,"body_markdown":"Guys, in my search the best I have found to accomplish my requeriment is the following https://stackoverflow.com/questions/47492459/how-do-i-draw-a-route-along-an-existing-road-between-two-points what do you think? (see best answer there)","body":"Guys, in my search the best I have found to accomplish my requeriment is the following <a href=\"https://stackoverflow.com/questions/47492459/how-do-i-draw-a-route-along-an-existing-road-between-two-points\" title=\"how do i draw a route along an existing road between two points\">stackoverflow.com/questions/47492459/&hellip;</a> what do you think? (see best answer there)"},{"owner":{"account_id":10368273,"reputation":742,"user_id":10195307,"display_name":"BugsForBreakfast"},"score":0,"creation_date":1562159699,"post_id":56758017,"comment_id":100290722,"body_markdown":"I manage to adapt the above code to primefaces library components, I will post code later today for posteriority","body":"I manage to adapt the above code to primefaces library components, I will post code later today for posteriority"}],"owner":{"account_id":10368273,"reputation":742,"user_id":10195307,"display_name":"BugsForBreakfast"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":418,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695771856,"creation_date":1561478500,"question_id":56758017,"body_markdown":"I implemented gMap from https://www.primefaces.org/showcase/ui/data/gmap/geocode.xhtml and it&#39;s working as expected but I have a requirement to draw the route from user location to a point on map.\r\n\r\nI see that they (primefaces) have polylines https://www.primefaces.org/showcase/ui/data/gmap/polylines.xhtml but I&#39;m not sure if I should use that because it&#39;s probably not gonna be a good route, because it will ignore buildings and things like that between the 2 points right?.\r\n\r\nWhere can I find a guide or example to implement this requirement properly with primefaces usage?\r\n\r\n\r\n ","title":"How to implement Google maps draw route with primefaces gMap","body":"<p>I implemented gMap from <a href=\"https://www.primefaces.org/showcase/ui/data/gmap/geocode.xhtml\" rel=\"nofollow noreferrer\">https://www.primefaces.org/showcase/ui/data/gmap/geocode.xhtml</a> and it's working as expected but I have a requirement to draw the route from user location to a point on map.</p>\n\n<p>I see that they (primefaces) have polylines <a href=\"https://www.primefaces.org/showcase/ui/data/gmap/polylines.xhtml\" rel=\"nofollow noreferrer\">https://www.primefaces.org/showcase/ui/data/gmap/polylines.xhtml</a> but I'm not sure if I should use that because it's probably not gonna be a good route, because it will ignore buildings and things like that between the 2 points right?.</p>\n\n<p>Where can I find a guide or example to implement this requirement properly with primefaces usage?</p>\n"},{"tags":["java","android","soap","web-services","ksoap2"],"comments":[{"owner":{"account_id":662121,"reputation":1,"user_id":486574,"display_name":"DFDF"},"score":0,"creation_date":1288019559,"post_id":3092424,"comment_id":136068093,"body_markdown":"Here is a [tutorial on how to work with array of complex objects with KSOAP](https://seesharpgears.blogspot.com/2010/10/ksoap-android-web-service-tutorial-with.html). I found out by countless hours of debugging.","body":"Here is a <a href=\"https://seesharpgears.blogspot.com/2010/10/ksoap-android-web-service-tutorial-with.html\" rel=\"nofollow noreferrer\">tutorial on how to work with array of complex objects with KSOAP</a>. I found out by countless hours of debugging."}],"answers":[{"tags":[],"owner":{"account_id":109543,"reputation":4760,"user_id":290189,"accept_rate":80,"display_name":"mac"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1365676437,"creation_date":1288347062,"answer_id":4050881,"question_id":3092424,"body_markdown":"    SoapObject countryDetails = (SoapObject)envelope.getResponse();\r\n    System.out.println(countryDetails.toString());\r\n                      \r\n    ArrayList list = new ArrayList(countryDetails.getPropertyCount());\r\n    lv_arr = new String[countryDetails.getPropertyCount()];\r\n    for (int i = 0; i &lt; countryDetails.getPropertyCount(); i++) {\r\n        Object property = countryDetails.getProperty(i);\r\n        if (property instanceof SoapObject) {\r\n            SoapObject countryObj = (SoapObject) property;\r\n            String countryName = countryObj.getProperty(&quot;countryName&quot;).toString();\r\n            list.add(countryName );\r\n        }\r\n    }\r\n\r\nHope it should work","title":"Parsing ksoap2 response","body":"<pre><code>SoapObject countryDetails = (SoapObject)envelope.getResponse();\nSystem.out.println(countryDetails.toString());\n\nArrayList list = new ArrayList(countryDetails.getPropertyCount());\nlv_arr = new String[countryDetails.getPropertyCount()];\nfor (int i = 0; i &lt; countryDetails.getPropertyCount(); i++) {\n    Object property = countryDetails.getProperty(i);\n    if (property instanceof SoapObject) {\n        SoapObject countryObj = (SoapObject) property;\n        String countryName = countryObj.getProperty(\"countryName\").toString();\n        list.add(countryName );\n    }\n}\n</code></pre>\n\n<p>Hope it should work</p>\n"},{"tags":[],"owner":{"account_id":441634,"reputation":281,"user_id":831834,"accept_rate":7,"display_name":"Rooban Ponraj A"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1335345974,"creation_date":1334648333,"answer_id":10187104,"question_id":3092424,"body_markdown":"**For example your Response:**\r\n\r\n    anyType\r\n    {\r\n      FOO_DEALS=anyType\r\n      {\r\n           CATEGORY_LIST=anyType\r\n           {\r\n             CATEGORY=Books; \r\n             CATEGORY_URL=books_chennai; \r\n             CATEGORY_ICON=http://deals.foo.com/common/images/books.png; \r\n             CATEGORY_COUNT=1045; \r\n             TYPE=1; \r\n             SUPERTAG=Books; \r\n           };\r\n           CATEGORY_LIST=anyType\r\n           {\r\n               CATEGORY=Cameras;\r\n               CATEGORY_URL=cameras_chennai;\r\n               CATEGORY_ICON=http://deals.foo.com/common/images/cameras.png; \r\n               CATEGORY_COUNT=152; \r\n               SUPERTAG=Cameras; \r\n               TYPE=1; \r\n           }; \r\n       }; \r\n     }\r\n\r\n**For requesting and parsing do like this:**\r\n\r\n    SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);\r\n               // Add the input required by web service\r\n               request.addProperty(&quot;city&quot;,&quot;chennai&quot;);\r\n               request.addProperty(&quot;key&quot;,&quot;10000&quot;);\r\n    \r\n               SoapSerializationEnvelope envelope =new SoapSerializationEnvelope(SoapEnvelope.VER11);\r\n               envelope.setOutputSoapObject(request);\r\n    \r\n               // Make the soap call.\r\n               androidHttpTransport.call(SOAP_ACTION, envelope);\r\n    \r\n               // Get the SoapResult from the envelope body.\r\n               resultRequestSOAP = (SoapObject) envelope.bodyIn;\r\n    \r\n    \r\n               System.out.println(&quot;********Response : &quot;+resultRequestSOAP.toString());\r\n    \r\n               SoapObject root = (SoapObject) resultRequestSOAP.getProperty(0);\r\n               SoapObject s_deals = (SoapObject) root.getProperty(&quot;FOO_DEALS&quot;);\r\n    \r\n               StringBuilder stringBuilder = new StringBuilder();\r\n    \r\n               System.out.println(&quot;********Count : &quot;+ s_deals.getPropertyCount());\r\n    \r\n               for (int i = 0; i &lt; s_deals.getPropertyCount(); i++) \r\n               {\r\n                   Object property = s_deals.getProperty(i);\r\n                   if (property instanceof SoapObject)\r\n                   {\r\n                       SoapObject category_list = (SoapObject) property;\r\n                       String CATEGORY = category_list.getProperty(&quot;CATEGORY&quot;).toString();\r\n                       String CATEGORY_URL = category_list.getProperty(&quot;CATEGORY_URL&quot;).toString();\r\n                       String CATEGORY_ICON = category_list.getProperty(&quot;CATEGORY_ICON&quot;).toString();\r\n                       String CATEGORY_COUNT = category_list.getProperty(&quot;CATEGORY_COUNT&quot;).toString();\r\n                       String SUPERTAG = category_list.getProperty(&quot;SUPERTAG&quot;).toString();\r\n                       String TYPE = category_list.getProperty(&quot;TYPE&quot;).toString();\r\n                       stringBuilder.append\r\n                       (\r\n                            &quot;Row value of: &quot; +(i+1)+&quot;\\n&quot;+\r\n                            &quot;Category: &quot;+CATEGORY+&quot;\\n&quot;+\r\n                            &quot;Category URL: &quot;+CATEGORY_URL+&quot;\\n&quot;+\r\n                            &quot;Category_Icon: &quot;+CATEGORY_ICON+&quot;\\n&quot;+\r\n                            &quot;Category_Count: &quot;+CATEGORY_COUNT+&quot;\\n&quot;+\r\n                            &quot;SuperTag: &quot;+SUPERTAG+&quot;\\n&quot;+\r\n                            &quot;Type: &quot;+TYPE+&quot;\\n&quot;+\r\n                            &quot;******************************&quot;\r\n                       );                   \r\n                       stringBuilder.append(&quot;\\n&quot;);\r\n                   }\r\n               }","title":"Parsing ksoap2 response","body":"<p><strong>For example your Response:</strong></p>\n\n<pre><code>anyType\n{\n  FOO_DEALS=anyType\n  {\n       CATEGORY_LIST=anyType\n       {\n         CATEGORY=Books; \n         CATEGORY_URL=books_chennai; \n         CATEGORY_ICON=http://deals.foo.com/common/images/books.png; \n         CATEGORY_COUNT=1045; \n         TYPE=1; \n         SUPERTAG=Books; \n       };\n       CATEGORY_LIST=anyType\n       {\n           CATEGORY=Cameras;\n           CATEGORY_URL=cameras_chennai;\n           CATEGORY_ICON=http://deals.foo.com/common/images/cameras.png; \n           CATEGORY_COUNT=152; \n           SUPERTAG=Cameras; \n           TYPE=1; \n       }; \n   }; \n }\n</code></pre>\n\n<p><strong>For requesting and parsing do like this:</strong></p>\n\n<pre><code>SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);\n           // Add the input required by web service\n           request.addProperty(\"city\",\"chennai\");\n           request.addProperty(\"key\",\"10000\");\n\n           SoapSerializationEnvelope envelope =new SoapSerializationEnvelope(SoapEnvelope.VER11);\n           envelope.setOutputSoapObject(request);\n\n           // Make the soap call.\n           androidHttpTransport.call(SOAP_ACTION, envelope);\n\n           // Get the SoapResult from the envelope body.\n           resultRequestSOAP = (SoapObject) envelope.bodyIn;\n\n\n           System.out.println(\"********Response : \"+resultRequestSOAP.toString());\n\n           SoapObject root = (SoapObject) resultRequestSOAP.getProperty(0);\n           SoapObject s_deals = (SoapObject) root.getProperty(\"FOO_DEALS\");\n\n           StringBuilder stringBuilder = new StringBuilder();\n\n           System.out.println(\"********Count : \"+ s_deals.getPropertyCount());\n\n           for (int i = 0; i &lt; s_deals.getPropertyCount(); i++) \n           {\n               Object property = s_deals.getProperty(i);\n               if (property instanceof SoapObject)\n               {\n                   SoapObject category_list = (SoapObject) property;\n                   String CATEGORY = category_list.getProperty(\"CATEGORY\").toString();\n                   String CATEGORY_URL = category_list.getProperty(\"CATEGORY_URL\").toString();\n                   String CATEGORY_ICON = category_list.getProperty(\"CATEGORY_ICON\").toString();\n                   String CATEGORY_COUNT = category_list.getProperty(\"CATEGORY_COUNT\").toString();\n                   String SUPERTAG = category_list.getProperty(\"SUPERTAG\").toString();\n                   String TYPE = category_list.getProperty(\"TYPE\").toString();\n                   stringBuilder.append\n                   (\n                        \"Row value of: \" +(i+1)+\"\\n\"+\n                        \"Category: \"+CATEGORY+\"\\n\"+\n                        \"Category URL: \"+CATEGORY_URL+\"\\n\"+\n                        \"Category_Icon: \"+CATEGORY_ICON+\"\\n\"+\n                        \"Category_Count: \"+CATEGORY_COUNT+\"\\n\"+\n                        \"SuperTag: \"+SUPERTAG+\"\\n\"+\n                        \"Type: \"+TYPE+\"\\n\"+\n                        \"******************************\"\n                   );                   \n                   stringBuilder.append(\"\\n\");\n               }\n           }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1183313,"reputation":829,"user_id":1157744,"display_name":"mahasam"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1364759246,"creation_date":1364759246,"answer_id":15733751,"question_id":3092424,"body_markdown":"My Project it&#39;s work. Hope this hepls.\r\n\r\n\t    \tSoapObject requestx = new SoapObject(NAMESPACE, METHOD_NAME);\r\n\t    \t\r\n\t    \tSoapSerializationEnvelope envelopex = new SoapSerializationEnvelope(SoapEnvelope.VER11);\r\n\t    \tenvelopex.dotNet = true;\r\n\t    \tenvelopex.setOutputSoapObject(requestx);\r\n\t    \tHttpTransportSE httpTransportx = new HttpTransportSE(URL);\t    \t\r\n            \r\n\t        try  {                    \r\n\t        \thttpTransportx.call(SOAP_ACTION, envelopex);\r\n\t        \tSoapObject responsex = (SoapObject)envelopex.getResponse(); // not envelopex.bodyIn;\r\n\t        \t\r\n\t             int i=0;\r\n\t             int RCount=responsex.getPropertyCount();\r\n\t             int[] tbIDArray = new int[RCount+1];\r\n\t             int[] iMonthAarray = new int[RCount+1];\r\n\t             int[] iYearAarray = new int[RCount+1];\r\n\t             String[] sDetailAarray = new String[RCount+1];\r\n\t             \r\n                 for (i = 0; i &lt; RCount; i++) {\r\n                     Object property = responsex.getProperty(i);\r\n                     if (property instanceof SoapObject) {\r\n                         SoapObject info = (SoapObject) property;\r\n                         String tbID = info.getProperty(&quot;tbID&quot;).toString();\r\n                         String iMonth = info.getProperty(&quot;iMonth&quot;).toString();\r\n                         String iYear = info.getProperty(&quot;iYear&quot;).toString();\r\n                         String sDetail = info.getProperty(&quot;sDetail&quot;).toString();\r\n                         \r\n         \t            tbIDArray[i] =Integer.valueOf(tbID);\r\n         \t            iMonthAarray[i] =Integer.valueOf(iMonth);\r\n         \t            iYearAarray[i] =Integer.valueOf(iYear);\r\n         \t            sDetailAarray[i] =sDetail;\r\n                     }//if (property instanceof SoapObject) {\r\n                 }//for (i = 0; i &lt; RCount; i++) {\r\n                 \r\n\t             \r\n            }  catch (Exception exception)   {\r\n            \tMsgBox1(exception.toString() , &quot;Error&quot;);\r\n            }","title":"Parsing ksoap2 response","body":"<p>My Project it's work. Hope this hepls.</p>\n\n<pre><code>        SoapObject requestx = new SoapObject(NAMESPACE, METHOD_NAME);\n\n        SoapSerializationEnvelope envelopex = new SoapSerializationEnvelope(SoapEnvelope.VER11);\n        envelopex.dotNet = true;\n        envelopex.setOutputSoapObject(requestx);\n        HttpTransportSE httpTransportx = new HttpTransportSE(URL);          \n\n        try  {                    \n            httpTransportx.call(SOAP_ACTION, envelopex);\n            SoapObject responsex = (SoapObject)envelopex.getResponse(); // not envelopex.bodyIn;\n\n             int i=0;\n             int RCount=responsex.getPropertyCount();\n             int[] tbIDArray = new int[RCount+1];\n             int[] iMonthAarray = new int[RCount+1];\n             int[] iYearAarray = new int[RCount+1];\n             String[] sDetailAarray = new String[RCount+1];\n\n             for (i = 0; i &lt; RCount; i++) {\n                 Object property = responsex.getProperty(i);\n                 if (property instanceof SoapObject) {\n                     SoapObject info = (SoapObject) property;\n                     String tbID = info.getProperty(\"tbID\").toString();\n                     String iMonth = info.getProperty(\"iMonth\").toString();\n                     String iYear = info.getProperty(\"iYear\").toString();\n                     String sDetail = info.getProperty(\"sDetail\").toString();\n\n                    tbIDArray[i] =Integer.valueOf(tbID);\n                    iMonthAarray[i] =Integer.valueOf(iMonth);\n                    iYearAarray[i] =Integer.valueOf(iYear);\n                    sDetailAarray[i] =sDetail;\n                 }//if (property instanceof SoapObject) {\n             }//for (i = 0; i &lt; RCount; i++) {\n\n\n        }  catch (Exception exception)   {\n            MsgBox1(exception.toString() , \"Error\");\n        }\n</code></pre>\n"}],"owner":{"account_id":126556,"reputation":4194,"user_id":323128,"accept_rate":84,"display_name":"Maxim"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":19395,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":3,"score":4,"last_activity_date":1695770248,"creation_date":1277204378,"question_id":3092424,"body_markdown":"I use a ksoap2 lib for communicating from android client with SOAP web service. Great job was done by ksoap team, but the problem is, there is no any good example how to use it correct in different aspects. For instance I get in soap response following data:\r\n\r\n    anyType{\r\n        StatusSetting=anyType{Id=1; Name=Til afskrivning; LocationId=1; Editable=true; Default=true; Transcribed=false; }; \r\n        StatusSetting=anyType{Id=2; Name=Afskrevet; LocationId=1; Editable=false; Default=false; Transcribed=true; }; \r\n        ...\r\n    }\r\n\r\nIt&#39;s a complex object, or rather a collection of StatusSetting objects.\r\nWhen I try to get a property of SoapObject it&#39;s only 1 property with all that data as a string. It can&#39;t be parsed as json too. Unbelievable that nobody met same problem regarding to popularity android is gaining. Would be very cool to know if somebody solved this issue and how. \r\nThanks.\r\n","title":"Parsing ksoap2 response","body":"<p>I use a ksoap2 lib for communicating from android client with SOAP web service. Great job was done by ksoap team, but the problem is, there is no any good example how to use it correct in different aspects. For instance I get in soap response following data:</p>\n\n<pre><code>anyType{\n    StatusSetting=anyType{Id=1; Name=Til afskrivning; LocationId=1; Editable=true; Default=true; Transcribed=false; }; \n    StatusSetting=anyType{Id=2; Name=Afskrevet; LocationId=1; Editable=false; Default=false; Transcribed=true; }; \n    ...\n}\n</code></pre>\n\n<p>It's a complex object, or rather a collection of StatusSetting objects.\nWhen I try to get a property of SoapObject it's only 1 property with all that data as a string. It can't be parsed as json too. Unbelievable that nobody met same problem regarding to popularity android is gaining. Would be very cool to know if somebody solved this issue and how. \nThanks.</p>\n"},{"tags":["java","networking","udp"],"comments":[{"owner":{"account_id":28104689,"reputation":512,"user_id":21473475,"display_name":"Arfur Narf"},"score":0,"creation_date":1695770611,"post_id":26085225,"comment_id":136068127,"body_markdown":"Detecting that the last block has been received is about the same as detecting that any other block has been received (and assembled in order).  Which, if you don&#39;t have, means you have a really unreliable transfer program.","body":"Detecting that the last block has been received is about the same as detecting that any other block has been received (and assembled in order).  Which, if you don&#39;t have, means you have a really unreliable transfer program."}],"answers":[{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1411911924,"creation_date":1411911924,"answer_id":26085503,"question_id":26085225,"body_markdown":"UDP is an unreliable protocol.  Messages may be lost without either the sender or receiver being notified.  This is particularly likely if the sender sends a large number of messages in quick succession ... as your code is liable to do.\r\n\r\nSo I suspect that what is happening in your case is that the message that contains the &quot;done&quot; string is being lost.\r\n\r\n------------\r\n\r\nThere is no easy cure for this using UDP.  It would entail implementing flow control, message loss detection and retransmission ... at the application protocol level.  This is technically possible, but it is simpler to either switch to TCP, or look for an alternative *reliable* protocol. ","title":"Transfer File through UDP in Java. How to detect end of file at Server?","body":"<p>UDP is an unreliable protocol.  Messages may be lost without either the sender or receiver being notified.  This is particularly likely if the sender sends a large number of messages in quick succession ... as your code is liable to do.</p>\n\n<p>So I suspect that what is happening in your case is that the message that contains the \"done\" string is being lost.</p>\n\n<hr>\n\n<p>There is no easy cure for this using UDP.  It would entail implementing flow control, message loss detection and retransmission ... at the application protocol level.  This is technically possible, but it is simpler to either switch to TCP, or look for an alternative <em>reliable</em> protocol. </p>\n"},{"tags":[],"owner":{"account_id":5966995,"reputation":189,"user_id":4690527,"display_name":"Izzy Kiefer"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695769945,"creation_date":1695769945,"answer_id":77183890,"question_id":26085225,"body_markdown":"From the app that sends the file, Send a new packet after transferring your file. \r\nFor ex.\r\n\r\n    DatagramPacket dp = new DatagramPacket(&quot;[END OF UDP STREAM]&quot;.getBytes(), 19, ip, port);\r\n\r\nThen from the receiving end, detect if the packet is equal to the end string then break out of the loop that receives it.\r\n\r\n\r\n    if (Arrays.equals(&quot;[END OF UDP STREAM]&quot;.getBytes(), Arrays.copyOf(buff, 19)))\r\n    {\r\n        System.out.println(&quot;END OF STREAM DETECTED&quot;);\r\n        break;\r\n    }\r\n*buff being the byte[] array that buffers the datgram packet","title":"Transfer File through UDP in Java. How to detect end of file at Server?","body":"<p>From the app that sends the file, Send a new packet after transferring your file.\nFor ex.</p>\n<pre><code>DatagramPacket dp = new DatagramPacket(&quot;[END OF UDP STREAM]&quot;.getBytes(), 19, ip, port);\n</code></pre>\n<p>Then from the receiving end, detect if the packet is equal to the end string then break out of the loop that receives it.</p>\n<pre><code>if (Arrays.equals(&quot;[END OF UDP STREAM]&quot;.getBytes(), Arrays.copyOf(buff, 19)))\n{\n    System.out.println(&quot;END OF STREAM DETECTED&quot;);\n    break;\n}\n</code></pre>\n<p>*buff being the byte[] array that buffers the datgram packet</p>\n"}],"owner":{"account_id":5097515,"reputation":11,"user_id":4088315,"display_name":"L4mbd4"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3367,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1695769945,"creation_date":1411910225,"question_id":26085225,"body_markdown":"At Client I chunks buffer with `Arrays.CopyofRange()` from 1 `FileEvent` object:\r\n\r\n    byte[] data = outputStream.toByteArray();\r\n    for (int i = 0; i &lt;= data.length; i += incommingData.length) {             \r\n        byte[] forSent = new byte[0x3ff];\r\n        forSent = Arrays.copyOfRange(data, i, i + 1023);\r\n        DatagramPacket sendPacket = new DatagramPacket(forSent, forSent.length, ipAddress, PORT);\r\n        socket.send(sendPacket);\r\n        System.out.println(&quot;File sent from client : &quot; + i);\r\n    }\r\n    String done = &quot;Done&quot;;\r\n    DatagramPacket stringDone = new DatagramPacket(done.getBytes(), done.length(), ipAddress, PORT);\r\n    socket.send(stringDone);\r\n\r\nAnd at Server:\r\n\r\n    do {\r\n        byte[] incomingData = new byte[1024 * 1000 * 50];\r\n        incomingPacket = new DatagramPacket(incomingData, incomingData.length);\r\n        socket.receive(incomingPacket);\r\n        byte[] data ;\r\n        data = incomingPacket.getData();\r\n        result = Arrays.copyOfRange(data, 0, data.length);\r\n        System.out.println(&quot;Da nhan:&quot; + result.length);\r\n        message = new String(incomingPacket.getData(), 0, incomingPacket.getLength());\r\n        System.out.println(message);\r\n    } while ( !message.equals(&quot;Done&quot;));\r\n\r\nafter send all buffer, i send 1 String &quot;done&quot;. And at Server i check end of file by String &quot;done&quot;. But it not work, via UDP, how can i detect end of file transfer. Thanks!","title":"Transfer File through UDP in Java. How to detect end of file at Server?","body":"<p>At Client I chunks buffer with <code>Arrays.CopyofRange()</code> from 1 <code>FileEvent</code> object:</p>\n\n<pre><code>byte[] data = outputStream.toByteArray();\nfor (int i = 0; i &lt;= data.length; i += incommingData.length) {             \n    byte[] forSent = new byte[0x3ff];\n    forSent = Arrays.copyOfRange(data, i, i + 1023);\n    DatagramPacket sendPacket = new DatagramPacket(forSent, forSent.length, ipAddress, PORT);\n    socket.send(sendPacket);\n    System.out.println(\"File sent from client : \" + i);\n}\nString done = \"Done\";\nDatagramPacket stringDone = new DatagramPacket(done.getBytes(), done.length(), ipAddress, PORT);\nsocket.send(stringDone);\n</code></pre>\n\n<p>And at Server:</p>\n\n<pre><code>do {\n    byte[] incomingData = new byte[1024 * 1000 * 50];\n    incomingPacket = new DatagramPacket(incomingData, incomingData.length);\n    socket.receive(incomingPacket);\n    byte[] data ;\n    data = incomingPacket.getData();\n    result = Arrays.copyOfRange(data, 0, data.length);\n    System.out.println(\"Da nhan:\" + result.length);\n    message = new String(incomingPacket.getData(), 0, incomingPacket.getLength());\n    System.out.println(message);\n} while ( !message.equals(\"Done\"));\n</code></pre>\n\n<p>after send all buffer, i send 1 String \"done\". And at Server i check end of file by String \"done\". But it not work, via UDP, how can i detect end of file transfer. Thanks!</p>\n"},{"tags":["java","spring-boot","docker","spring-security","jwt"],"answers":[{"tags":[],"owner":{"account_id":10770525,"reputation":526,"user_id":7924110,"display_name":"Kenany"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1695769893,"creation_date":1695769893,"answer_id":77183886,"question_id":77182719,"body_markdown":"The `UsernamePasswordAuthenticationToken` constructor you used doesn&#39;t allow to pass authorities. There is another one with a third parameter for authorities (a list of `GrantedAuthority` you can use `SimpleGrantedAuthority` as implementation) see the documentation here:\r\n\r\nhttps://docs.spring.io/spring-security/site/docs/4.0.x/apidocs/org/springframework/security/authentication/UsernamePasswordAuthenticationToken.html#UsernamePasswordAuthenticationToken-java.lang.Object-java.lang.Object-\r\n\r\nSince you aren&#39;t passing user authorities correctly, Spring sees an authenticated user without roles.\r\n\r\nSo you should convert authorities from a list of strings to a list of GrantedAuthority and then pass it as a third constructor parameter. You can use the password as a second parameter.\r\n","title":"SpringSecurity AuthorizationFilter returning 403-Access Denied with user logged in","body":"<p>The <code>UsernamePasswordAuthenticationToken</code> constructor you used doesn't allow to pass authorities. There is another one with a third parameter for authorities (a list of <code>GrantedAuthority</code> you can use <code>SimpleGrantedAuthority</code> as implementation) see the documentation here:</p>\n<p><a href=\"https://docs.spring.io/spring-security/site/docs/4.0.x/apidocs/org/springframework/security/authentication/UsernamePasswordAuthenticationToken.html#UsernamePasswordAuthenticationToken-java.lang.Object-java.lang.Object-\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-security/site/docs/4.0.x/apidocs/org/springframework/security/authentication/UsernamePasswordAuthenticationToken.html#UsernamePasswordAuthenticationToken-java.lang.Object-java.lang.Object-</a></p>\n<p>Since you aren't passing user authorities correctly, Spring sees an authenticated user without roles.</p>\n<p>So you should convert authorities from a list of strings to a list of GrantedAuthority and then pass it as a third constructor parameter. You can use the password as a second parameter.</p>\n"}],"owner":{"account_id":26609502,"reputation":1,"user_id":20229880,"display_name":"Wolf Ganger"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":123,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77183886,"answer_count":1,"score":0,"last_activity_date":1695769893,"creation_date":1695754331,"question_id":77182719,"body_markdown":"I am using JWT for keeping the user authenticated between requests. The thing is that, after registering and logging successfully, building the token used for the rest of the requests, when I try to make a request which is not behind a &quot;.permitAll()&quot; the authorizationFilter says it denies the access when checking the authorization, even when the user logged has the authorities demanded\r\n\r\nThose are the console logs with the error:\r\n```\r\n2023-09-26T18:23:25.241Z TRACE 1 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking JWTAuthenticationFilter (6/13)\r\nbackend  | 2023-09-26T18:23:25.250Z  INFO 1 --- [nio-8080-exec-4] c.g.g.i.JWTAuthenticationFilter          : USUARIO: george\r\nbackend  | 2023-09-26T18:23:25.252Z  INFO 1 --- [nio-8080-exec-4] c.g.g.i.JWTAuthenticationFilter          : AUTORIDADES: [ROLE_USER]\r\nbackend  | 2023-09-26T18:23:25.252Z TRACE 1 --- [nio-8080-exec-4] .s.s.w.c.SupplierDeferredSecurityContext : Created SecurityContextImpl [Null authentication]\r\nbackend  | 2023-09-26T18:23:25.253Z TRACE 1 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking BasicAuthenticationFilter (7/13)\r\nbackend  | 2023-09-26T18:23:25.253Z TRACE 1 --- [nio-8080-exec-4] o.s.s.w.a.www.BasicAuthenticationFilter  : Did not process authentication request since failed to find username and password in Basic Authorization header        \r\nbackend  | 2023-09-26T18:23:25.253Z TRACE 1 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (8/13)\r\nbackend  | 2023-09-26T18:23:25.253Z TRACE 1 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (9/13)\r\nbackend  | 2023-09-26T18:23:25.253Z TRACE 1 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (10/13)\r\nbackend  | 2023-09-26T18:23:25.253Z TRACE 1 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking SessionManagementFilter (11/13)\r\nbackend  | 2023-09-26T18:23:25.254Z TRACE 1 --- [nio-8080-exec-4] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated UsernamePasswordAuthenticationToken [Principal=org.spring\r\nframework.security.core.userdetails.User [Username=george, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED],\r\n Authenticated=false, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.48.1, SessionId=03662B9D807EE64CDC7E8E6EE96F0FC7], Granted Authorities=[]]\r\nbackend  | 2023-09-26T18:23:25.254Z TRACE 1 --- [nio-8080-exec-4] s.CompositeSessionAuthenticationStrategy : Preparing session with ChangeSessionIdAuthenticationStrategy (1/1)\r\nbackend  | 2023-09-26T18:23:25.254Z DEBUG 1 --- [nio-8080-exec-4] .s.ChangeSessionIdAuthenticationStrategy : Changed session id from 03662B9D807EE64CDC7E8E6EE96F0FC7\r\nbackend  | 2023-09-26T18:23:25.255Z TRACE 1 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (12/13)\r\nbackend  | 2023-09-26T18:23:25.255Z TRACE 1 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (13/13)\r\nbackend  | 2023-09-26T18:23:25.255Z TRACE 1 --- [nio-8080-exec-4] estMatcherDelegatingAuthorizationManager : Authorizing SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$Header\r\nWriterRequest@7a0e32f2]\r\nbackend  | 2023-09-26T18:23:25.255Z TRACE 1 --- [nio-8080-exec-4] estMatcherDelegatingAuthorizationManager : Checking authorization on SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWrite\r\nrFilter$HeaderWriterRequest@7a0e32f2] using AuthorityAuthorizationManager[authorities=[ROLE_USER]]\r\nbackend  | 2023-09-26T18:23:25.256Z TRACE 1 --- [nio-8080-exec-4] o.s.s.w.a.ExceptionTranslationFilter     : Sending UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=geo\r\nrge, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=false, Details=WebAuthenticationDetails\r\n [RemoteIpAddress=192.168.48.1, SessionId=03662B9D807EE64CDC7E8E6EE96F0FC7], Granted Authorities=[]] to access denied handler since access is denied\r\nbackend  | \r\nbackend  | org.springframework.security.access.AccessDeniedException: Access Denied\r\nbackend  |      at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:98) ~[spring-security-web-6.0.2.jar!/:6.0.2]\r\nbackend  |      at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.2.jar!/:6.0.2]\r\nbackend  |      at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126) ~[spring-security-web-6.0.2.jar!/:6.0.2]\r\nbackend  |      at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120) ~[spring-security-web-6.0.2.jar!/:6.0.2]\r\nbackend  |      at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.2.jar!/:6.0.2]\r\nbackend  |      at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131) ~[spring-security-web-6.0.2.jar!/:6.0.2]\r\nbackend  |      at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85) ~[spring-security-web-6.0.2.jar!/:6.0.2]\r\nbackend  |      at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.2.jar!/:6.0.2]\r\nbackend  |      at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100) ~[spring-security-web-6.0.2.jar!/:6.0.2]\r\nbackend  |      at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.2.jar!/:6.0.2]\r\nbackend  |      at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179) ~[spring-security-web-6.0.2.jar!/:6.0.2]\r\nbackend  |      at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.2.jar!/:6.0.2]\r\nbackend  |      at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-6.0.2.jar!/:6.0.2]\r\nbackend  |      at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.2.jar!/:6.0.2]\r\nbackend  |      at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:170) ~[spring-security-web-6.0.2.jar!/:6.0.2]\r\nbackend  |      at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.7.jar!/:6.0.7]\r\nbackend  |      at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.2.jar!/:6.0.2]\r\nbackend  |      at com.gametags.gametags.infrastructure.JWTAuthenticationFilter.doFilterInternal(JWTAuthenticationFilter.java:41) ~[classes!/:0.0.1-SNAPSHOT]\r\nbackend  |      at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.7.jar!/:6.0.7]\r\nbackend  |      at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.2.jar!/:6.0.2]\r\nbackend  |      at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.0.2.jar!/:6.0.2]\r\nbackend  |      at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.0.2.jar!/:6.0.2]\r\nbackend  |      at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.2.jar!/:6.0.2]\r\nbackend  |      at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.0.2.jar!/:6.0.2]\r\nbackend  |      at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.0.2.jar!/:6.0.2]\r\nbackend  |      at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.7.jar!/:6.0.7]\r\nbackend  |      at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.2.jar!/:6.0.2]\r\nbackend  |      at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.0.2.jar!/:6.0.2]\r\nbackend  |      at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.0.2.jar!/:6.0.2]\r\nbackend  |      at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.2.jar!/:6.0.2]\r\nbackend  |      at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.0.2.jar!/:6.0.2]\r\nbackend  |      at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.7.jar!/:6.0.7]\r\nbackend  |      at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.2.jar!/:6.0.2]\r\nbackend  |      at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.0.2.jar!/:6.0.2]\r\nbackend  |      at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.7.jar!/:6.0.7]\r\nbackend  |      at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.2.jar!/:6.0.2]\r\nbackend  |      at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.0.2.jar!/:6.0.2]\r\nbackend  |      at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.0.2.jar!/:6.0.2]\r\nbackend  |      at org.springframework.security.web.debug.DebugFilter.invokeWithWrappedRequest(DebugFilter.java:90) ~[spring-security-web-6.0.2.jar!/:6.0.2]\r\nbackend  |      at org.springframework.security.web.debug.DebugFilter.doFilter(DebugFilter.java:78) ~[spring-security-web-6.0.2.jar!/:6.0.2]\r\nbackend  |      at org.springframework.security.web.debug.DebugFilter.doFilter(DebugFilter.java:67) ~[spring-security-web-6.0.2.jar!/:6.0.2]\r\nbackend  |      at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352) ~[spring-web-6.0.7.jar!/:6.0.7]\r\nbackend  |      at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268) ~[spring-web-6.0.7.jar!/:6.0.7]\r\nbackend  |      at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.7.jar!/:na]\r\nbackend  |      at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.7.jar!/:na]\r\nbackend  |      at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.0.7.jar!/:6.0.7]\r\nbackend  |      at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.7.jar!/:6.0.7]\r\nbackend  |      at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.7.jar!/:na]\r\nbackend  |      at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.7.jar!/:na]\r\nbackend  |      at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.0.7.jar!/:6.0.7]\r\nbackend  |      at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.7.jar!/:6.0.7]\r\nbackend  |      at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.7.jar!/:na]\r\nbackend  |      at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.7.jar!/:na]\r\nbackend  |      at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.0.7.jar!/:6.0.7]\r\nbackend  |      at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.7.jar!/:6.0.7]\r\nbackend  |      at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.7.jar!/:na]\r\nbackend  |      at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.7.jar!/:na]\r\nbackend  |      at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:166) ~[tomcat-embed-core-10.1.7.jar!/:na]\r\nbackend  |      at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.7.jar!/:na]\r\nbackend  |      at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:493) ~[tomcat-embed-core-10.1.7.jar!/:na]\r\nbackend  |      at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.7.jar!/:na]\r\nbackend  |      at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.7.jar!/:na]\r\nbackend  |      at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.7.jar!/:na]\r\nbackend  |      at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341) ~[tomcat-embed-core-10.1.7.jar!/:na]\r\nbackend  |      at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390) ~[tomcat-embed-core-10.1.7.jar!/:na]\r\nbackend  |      at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.7.jar!/:na]\r\nbackend  |      at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894) ~[tomcat-embed-core-10.1.7.jar!/:na]\r\nbackend  |      at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741) ~[tomcat-embed-core-10.1.7.jar!/:na]\r\nbackend  |      at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.7.jar!/:na]\r\nbackend  |      at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-10.1.7.jar!/:na]\r\nbackend  |      at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.7.jar!/:na]\r\nbackend  |      at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-10.1.7.jar!/:na]\r\nbackend  |      at java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\r\nbackend  | \r\nbackend  | 2023-09-26T18:23:25.258Z DEBUG 1 --- [nio-8080-exec-4] o.s.s.w.access.AccessDeniedHandlerImpl   : Responding with 403 status code\r\n\r\n```\r\n\r\n\r\nThis is my SecurityConfig filterchain:\r\n\r\n```\r\n@Bean\r\n  public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\r\n    /*return http.authorizeHttpRequests(auth -&gt; {\r\n          auth.anyRequest().authenticated();\r\n        }).formLogin(Customizer.withDefaults())\r\n        .build();*/\r\n    http\r\n        .csrf().disable()\r\n        .exceptionHandling()\r\n        .authenticationEntryPoint(authEntryPoint)\r\n        .and()\r\n        .sessionManagement()\r\n        .sessionCreationPolicy(SessionCreationPolicy.STATELESS)\r\n        .and()\r\n        .authorizeHttpRequests()\r\n//        .requestMatchers(HttpMethod.GET).permitAll()\r\n//        .requestMatchers(HttpMethod.POST).permitAll()\r\n//            .requestMatchers(HttpMethod.PUT).permitAll()\r\n        .requestMatchers(&quot;/auth/**&quot;).permitAll()\r\n            .requestMatchers(&quot;/classification/**&quot;).hasAuthority(&quot;ROLE_USER&quot;)\r\n        .anyRequest().authenticated()\r\n        .and()\r\n        .httpBasic();\r\n    http.addFilterBefore(authenticationFilter(), UsernamePasswordAuthenticationFilter.class);\r\n    return http.build();\r\n  }\r\n```\r\n\r\n\r\nThis is my login method:\r\n\r\n```\r\npublic AuthResponseDTO loginUser(LoginInput input) {\r\n    User user = userService.findOneUserByUsername(input.getUserName());\r\n    if(ObjectUtils.isNotEmpty(user)){\r\n      Authentication authentication = authenticationManager\r\n              .authenticate(new UsernamePasswordAuthenticationToken(input.getUserName(), input.getPassword(), List.of(new SimpleGrantedAuthority(&quot;ROLE_USER&quot;))));\r\n      SecurityContextHolder.getContext().setAuthentication(authentication);\r\n      log.info(&quot;User logged&quot; + SecurityContextHolder.getContext().getAuthentication().getName());\r\n      String token = jwtGenerator.generateToken(authentication);\r\n      return new AuthResponseDTO(token);\r\n    }else{\r\n      throw new NoSuchElementException(&quot;The user doesn&#39;t exist&quot;);\r\n    }\r\n  }\r\n```\r\n\r\n\r\nThis is my JWTAuthenticationFilter:\r\n\r\n```\r\n@Override\r\n  protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain)\r\n      throws ServletException, IOException {\r\n    String token = getJWTFromRequest(request);\r\n    HttpSession session = request.getSession(true);\r\n    if(StringUtils.hasText(token) &amp;&amp; tokenGenerator.validateToken(token)){\r\n      String username = tokenGenerator.getUsernameFromJWT(token);\r\n      logger.info(&quot;USUARIO: &quot; + username);\r\n      UserDetails userDetails = customUserDetailsService.loadUserByUsername(username);\r\n      logger.info(&quot;AUTORIDADES: &quot; + userDetails.getAuthorities().toString());\r\n      UsernamePasswordAuthenticationToken authenticationToken = new UsernamePasswordAuthenticationToken(userDetails, userDetails.getAuthorities());\r\n      authenticationToken.setDetails(new WebAuthenticationDetailsSource().buildDetails(request));\r\n      SecurityContextHolder.getContext().setAuthentication(authenticationToken);\r\n      session.setAttribute(&quot;SPRING_SECURITY_CONTEXT&quot;, SecurityContextHolder.getContext());\r\n    }\r\n    filterChain.doFilter(request,response);\r\n  }\r\n```\r\n\r\n\r\nThis is my register method:\r\n\r\n```\r\npublic User registerUser(RegisterInput input) throws Exception {\r\n    if (!Objects.isNull(userService.findOneUserByUsername(input.getUserName()).getId())) {\r\n      throw new Exception(&quot;User already existing&quot;);\r\n    }\r\n    return userService.createUser(User.builder()\r\n        .id(UUID.randomUUID())\r\n        .password(input.getPassword())\r\n        .username(input.getUserName())\r\n        .country(input.getCountry())\r\n        .roles(List.of(&quot;ROLE_USER&quot;))\r\n        .build());\r\n  }\r\n```\r\n\r\nThe version Im using of SpringBoot is 3.0.5 and SpringSecurity is 2.3.3\r\n\r\n```\r\n&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;3.0.5&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\r\n&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.3.3.RELEASE&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n```\r\n\r\n\r\nI have tried changing hasAuthority to hasRole and changing the roles to USER instead of ROLE_USER and nothing has worked","title":"SpringSecurity AuthorizationFilter returning 403-Access Denied with user logged in","body":"<p>I am using JWT for keeping the user authenticated between requests. The thing is that, after registering and logging successfully, building the token used for the rest of the requests, when I try to make a request which is not behind a &quot;.permitAll()&quot; the authorizationFilter says it denies the access when checking the authorization, even when the user logged has the authorities demanded</p>\n<p>Those are the console logs with the error:</p>\n<pre><code>2023-09-26T18:23:25.241Z TRACE 1 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking JWTAuthenticationFilter (6/13)\nbackend  | 2023-09-26T18:23:25.250Z  INFO 1 --- [nio-8080-exec-4] c.g.g.i.JWTAuthenticationFilter          : USUARIO: george\nbackend  | 2023-09-26T18:23:25.252Z  INFO 1 --- [nio-8080-exec-4] c.g.g.i.JWTAuthenticationFilter          : AUTORIDADES: [ROLE_USER]\nbackend  | 2023-09-26T18:23:25.252Z TRACE 1 --- [nio-8080-exec-4] .s.s.w.c.SupplierDeferredSecurityContext : Created SecurityContextImpl [Null authentication]\nbackend  | 2023-09-26T18:23:25.253Z TRACE 1 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking BasicAuthenticationFilter (7/13)\nbackend  | 2023-09-26T18:23:25.253Z TRACE 1 --- [nio-8080-exec-4] o.s.s.w.a.www.BasicAuthenticationFilter  : Did not process authentication request since failed to find username and password in Basic Authorization header        \nbackend  | 2023-09-26T18:23:25.253Z TRACE 1 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (8/13)\nbackend  | 2023-09-26T18:23:25.253Z TRACE 1 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (9/13)\nbackend  | 2023-09-26T18:23:25.253Z TRACE 1 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (10/13)\nbackend  | 2023-09-26T18:23:25.253Z TRACE 1 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking SessionManagementFilter (11/13)\nbackend  | 2023-09-26T18:23:25.254Z TRACE 1 --- [nio-8080-exec-4] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated UsernamePasswordAuthenticationToken [Principal=org.spring\nframework.security.core.userdetails.User [Username=george, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED],\n Authenticated=false, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.48.1, SessionId=03662B9D807EE64CDC7E8E6EE96F0FC7], Granted Authorities=[]]\nbackend  | 2023-09-26T18:23:25.254Z TRACE 1 --- [nio-8080-exec-4] s.CompositeSessionAuthenticationStrategy : Preparing session with ChangeSessionIdAuthenticationStrategy (1/1)\nbackend  | 2023-09-26T18:23:25.254Z DEBUG 1 --- [nio-8080-exec-4] .s.ChangeSessionIdAuthenticationStrategy : Changed session id from 03662B9D807EE64CDC7E8E6EE96F0FC7\nbackend  | 2023-09-26T18:23:25.255Z TRACE 1 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (12/13)\nbackend  | 2023-09-26T18:23:25.255Z TRACE 1 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (13/13)\nbackend  | 2023-09-26T18:23:25.255Z TRACE 1 --- [nio-8080-exec-4] estMatcherDelegatingAuthorizationManager : Authorizing SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$Header\nWriterRequest@7a0e32f2]\nbackend  | 2023-09-26T18:23:25.255Z TRACE 1 --- [nio-8080-exec-4] estMatcherDelegatingAuthorizationManager : Checking authorization on SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWrite\nrFilter$HeaderWriterRequest@7a0e32f2] using AuthorityAuthorizationManager[authorities=[ROLE_USER]]\nbackend  | 2023-09-26T18:23:25.256Z TRACE 1 --- [nio-8080-exec-4] o.s.s.w.a.ExceptionTranslationFilter     : Sending UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=geo\nrge, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=false, Details=WebAuthenticationDetails\n [RemoteIpAddress=192.168.48.1, SessionId=03662B9D807EE64CDC7E8E6EE96F0FC7], Granted Authorities=[]] to access denied handler since access is denied\nbackend  | \nbackend  | org.springframework.security.access.AccessDeniedException: Access Denied\nbackend  |      at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:98) ~[spring-security-web-6.0.2.jar!/:6.0.2]\nbackend  |      at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.2.jar!/:6.0.2]\nbackend  |      at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126) ~[spring-security-web-6.0.2.jar!/:6.0.2]\nbackend  |      at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120) ~[spring-security-web-6.0.2.jar!/:6.0.2]\nbackend  |      at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.2.jar!/:6.0.2]\nbackend  |      at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131) ~[spring-security-web-6.0.2.jar!/:6.0.2]\nbackend  |      at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85) ~[spring-security-web-6.0.2.jar!/:6.0.2]\nbackend  |      at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.2.jar!/:6.0.2]\nbackend  |      at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100) ~[spring-security-web-6.0.2.jar!/:6.0.2]\nbackend  |      at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.2.jar!/:6.0.2]\nbackend  |      at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179) ~[spring-security-web-6.0.2.jar!/:6.0.2]\nbackend  |      at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.2.jar!/:6.0.2]\nbackend  |      at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-6.0.2.jar!/:6.0.2]\nbackend  |      at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.2.jar!/:6.0.2]\nbackend  |      at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:170) ~[spring-security-web-6.0.2.jar!/:6.0.2]\nbackend  |      at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.7.jar!/:6.0.7]\nbackend  |      at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.2.jar!/:6.0.2]\nbackend  |      at com.gametags.gametags.infrastructure.JWTAuthenticationFilter.doFilterInternal(JWTAuthenticationFilter.java:41) ~[classes!/:0.0.1-SNAPSHOT]\nbackend  |      at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.7.jar!/:6.0.7]\nbackend  |      at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.2.jar!/:6.0.2]\nbackend  |      at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.0.2.jar!/:6.0.2]\nbackend  |      at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.0.2.jar!/:6.0.2]\nbackend  |      at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.2.jar!/:6.0.2]\nbackend  |      at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.0.2.jar!/:6.0.2]\nbackend  |      at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.0.2.jar!/:6.0.2]\nbackend  |      at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.7.jar!/:6.0.7]\nbackend  |      at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.2.jar!/:6.0.2]\nbackend  |      at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.0.2.jar!/:6.0.2]\nbackend  |      at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.0.2.jar!/:6.0.2]\nbackend  |      at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.2.jar!/:6.0.2]\nbackend  |      at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.0.2.jar!/:6.0.2]\nbackend  |      at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.7.jar!/:6.0.7]\nbackend  |      at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.2.jar!/:6.0.2]\nbackend  |      at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.0.2.jar!/:6.0.2]\nbackend  |      at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.7.jar!/:6.0.7]\nbackend  |      at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.2.jar!/:6.0.2]\nbackend  |      at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.0.2.jar!/:6.0.2]\nbackend  |      at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.0.2.jar!/:6.0.2]\nbackend  |      at org.springframework.security.web.debug.DebugFilter.invokeWithWrappedRequest(DebugFilter.java:90) ~[spring-security-web-6.0.2.jar!/:6.0.2]\nbackend  |      at org.springframework.security.web.debug.DebugFilter.doFilter(DebugFilter.java:78) ~[spring-security-web-6.0.2.jar!/:6.0.2]\nbackend  |      at org.springframework.security.web.debug.DebugFilter.doFilter(DebugFilter.java:67) ~[spring-security-web-6.0.2.jar!/:6.0.2]\nbackend  |      at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352) ~[spring-web-6.0.7.jar!/:6.0.7]\nbackend  |      at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268) ~[spring-web-6.0.7.jar!/:6.0.7]\nbackend  |      at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.7.jar!/:na]\nbackend  |      at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.7.jar!/:na]\nbackend  |      at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.0.7.jar!/:6.0.7]\nbackend  |      at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.7.jar!/:6.0.7]\nbackend  |      at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.7.jar!/:na]\nbackend  |      at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.7.jar!/:na]\nbackend  |      at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.0.7.jar!/:6.0.7]\nbackend  |      at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.7.jar!/:6.0.7]\nbackend  |      at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.7.jar!/:na]\nbackend  |      at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.7.jar!/:na]\nbackend  |      at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.0.7.jar!/:6.0.7]\nbackend  |      at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.7.jar!/:6.0.7]\nbackend  |      at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.7.jar!/:na]\nbackend  |      at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.7.jar!/:na]\nbackend  |      at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:166) ~[tomcat-embed-core-10.1.7.jar!/:na]\nbackend  |      at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.7.jar!/:na]\nbackend  |      at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:493) ~[tomcat-embed-core-10.1.7.jar!/:na]\nbackend  |      at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.7.jar!/:na]\nbackend  |      at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.7.jar!/:na]\nbackend  |      at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.7.jar!/:na]\nbackend  |      at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341) ~[tomcat-embed-core-10.1.7.jar!/:na]\nbackend  |      at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390) ~[tomcat-embed-core-10.1.7.jar!/:na]\nbackend  |      at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.7.jar!/:na]\nbackend  |      at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894) ~[tomcat-embed-core-10.1.7.jar!/:na]\nbackend  |      at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741) ~[tomcat-embed-core-10.1.7.jar!/:na]\nbackend  |      at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.7.jar!/:na]\nbackend  |      at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-10.1.7.jar!/:na]\nbackend  |      at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.7.jar!/:na]\nbackend  |      at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-10.1.7.jar!/:na]\nbackend  |      at java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\nbackend  | \nbackend  | 2023-09-26T18:23:25.258Z DEBUG 1 --- [nio-8080-exec-4] o.s.s.w.access.AccessDeniedHandlerImpl   : Responding with 403 status code\n\n</code></pre>\n<p>This is my SecurityConfig filterchain:</p>\n<pre><code>@Bean\n  public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\n    /*return http.authorizeHttpRequests(auth -&gt; {\n          auth.anyRequest().authenticated();\n        }).formLogin(Customizer.withDefaults())\n        .build();*/\n    http\n        .csrf().disable()\n        .exceptionHandling()\n        .authenticationEntryPoint(authEntryPoint)\n        .and()\n        .sessionManagement()\n        .sessionCreationPolicy(SessionCreationPolicy.STATELESS)\n        .and()\n        .authorizeHttpRequests()\n//        .requestMatchers(HttpMethod.GET).permitAll()\n//        .requestMatchers(HttpMethod.POST).permitAll()\n//            .requestMatchers(HttpMethod.PUT).permitAll()\n        .requestMatchers(&quot;/auth/**&quot;).permitAll()\n            .requestMatchers(&quot;/classification/**&quot;).hasAuthority(&quot;ROLE_USER&quot;)\n        .anyRequest().authenticated()\n        .and()\n        .httpBasic();\n    http.addFilterBefore(authenticationFilter(), UsernamePasswordAuthenticationFilter.class);\n    return http.build();\n  }\n</code></pre>\n<p>This is my login method:</p>\n<pre><code>public AuthResponseDTO loginUser(LoginInput input) {\n    User user = userService.findOneUserByUsername(input.getUserName());\n    if(ObjectUtils.isNotEmpty(user)){\n      Authentication authentication = authenticationManager\n              .authenticate(new UsernamePasswordAuthenticationToken(input.getUserName(), input.getPassword(), List.of(new SimpleGrantedAuthority(&quot;ROLE_USER&quot;))));\n      SecurityContextHolder.getContext().setAuthentication(authentication);\n      log.info(&quot;User logged&quot; + SecurityContextHolder.getContext().getAuthentication().getName());\n      String token = jwtGenerator.generateToken(authentication);\n      return new AuthResponseDTO(token);\n    }else{\n      throw new NoSuchElementException(&quot;The user doesn't exist&quot;);\n    }\n  }\n</code></pre>\n<p>This is my JWTAuthenticationFilter:</p>\n<pre><code>@Override\n  protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain)\n      throws ServletException, IOException {\n    String token = getJWTFromRequest(request);\n    HttpSession session = request.getSession(true);\n    if(StringUtils.hasText(token) &amp;&amp; tokenGenerator.validateToken(token)){\n      String username = tokenGenerator.getUsernameFromJWT(token);\n      logger.info(&quot;USUARIO: &quot; + username);\n      UserDetails userDetails = customUserDetailsService.loadUserByUsername(username);\n      logger.info(&quot;AUTORIDADES: &quot; + userDetails.getAuthorities().toString());\n      UsernamePasswordAuthenticationToken authenticationToken = new UsernamePasswordAuthenticationToken(userDetails, userDetails.getAuthorities());\n      authenticationToken.setDetails(new WebAuthenticationDetailsSource().buildDetails(request));\n      SecurityContextHolder.getContext().setAuthentication(authenticationToken);\n      session.setAttribute(&quot;SPRING_SECURITY_CONTEXT&quot;, SecurityContextHolder.getContext());\n    }\n    filterChain.doFilter(request,response);\n  }\n</code></pre>\n<p>This is my register method:</p>\n<pre><code>public User registerUser(RegisterInput input) throws Exception {\n    if (!Objects.isNull(userService.findOneUserByUsername(input.getUserName()).getId())) {\n      throw new Exception(&quot;User already existing&quot;);\n    }\n    return userService.createUser(User.builder()\n        .id(UUID.randomUUID())\n        .password(input.getPassword())\n        .username(input.getUserName())\n        .country(input.getCountry())\n        .roles(List.of(&quot;ROLE_USER&quot;))\n        .build());\n  }\n</code></pre>\n<p>The version Im using of SpringBoot is 3.0.5 and SpringSecurity is 2.3.3</p>\n<pre><code>&lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;3.0.5&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n\n&lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\n            &lt;version&gt;2.3.3.RELEASE&lt;/version&gt;\n        &lt;/dependency&gt;\n</code></pre>\n<p>I have tried changing hasAuthority to hasRole and changing the roles to USER instead of ROLE_USER and nothing has worked</p>\n"},{"tags":["java","spring-boot","spring-security","jwt"],"comments":[{"owner":{"account_id":2064278,"reputation":13128,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":0,"creation_date":1694363601,"post_id":77076987,"comment_id":135878383,"body_markdown":"Does this answer your question? [Java Spring cannot logout properly](https://stackoverflow.com/questions/75356073/java-spring-cannot-logout-properly)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/75356073/java-spring-cannot-logout-properly\">Java Spring cannot logout properly</a>"},{"owner":{"account_id":7531034,"reputation":1,"user_id":5719229,"display_name":"S.N"},"score":0,"creation_date":1694364733,"post_id":77076987,"comment_id":135878509,"body_markdown":"@Toerktumlare No, I tried to implement the process of invalidating the token.","body":"@Toerktumlare No, I tried to implement the process of invalidating the token."},{"owner":{"account_id":4688171,"reputation":11056,"user_id":3795036,"accept_rate":88,"display_name":"K.Nicholas"},"score":0,"creation_date":1694365076,"post_id":77076987,"comment_id":135878537,"body_markdown":"Use the OIDC Endpoint to Log Users Out of Auth0 - https://auth0.com/docs/authenticate/login/logout/log-users-out-of-auth0","body":"Use the OIDC Endpoint to Log Users Out of Auth0 - <a href=\"https://auth0.com/docs/authenticate/login/logout/log-users-out-of-auth0\" rel=\"nofollow noreferrer\">auth0.com/docs/authenticate/login/logout/log-users-out-of-au&zwnj;&#8203;th0</a>"},{"owner":{"account_id":2064278,"reputation":13128,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":1,"creation_date":1694365154,"post_id":77076987,"comment_id":135878543,"body_markdown":"i looked at your filter, your filter does nothing except validate the signage of the token. If you provide a token, how does your filter know that the token has been &quot;invalidated&quot;, well it doesnt? The funny thing here is that you are reimplementing session authentication using JWTs, why dont you just use session cookies?","body":"i looked at your filter, your filter does nothing except validate the signage of the token. If you provide a token, how does your filter know that the token has been &quot;invalidated&quot;, well it doesnt? The funny thing here is that you are reimplementing session authentication using JWTs, why dont you just use session cookies?"},{"owner":{"account_id":2064278,"reputation":13128,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":1,"creation_date":1694365388,"post_id":77076987,"comment_id":135878555,"body_markdown":"@K.Nicholas is he using `auth0` i can&#39;t see that, this entire application looks like some home built own custom insecure authentication service by someone that doesnt know what FormLogin is, and he is rebuilding FormLogin from scratch but insisting on using JWTs instead of cookies which means he is loosing the benefits like `httpOnly` `Secured`and `same-site`","body":"@K.Nicholas is he using <code>auth0</code> i can&#39;t see that, this entire application looks like some home built own custom insecure authentication service by someone that doesnt know what FormLogin is, and he is rebuilding FormLogin from scratch but insisting on using JWTs instead of cookies which means he is loosing the benefits like <code>httpOnly</code> <code>Secured</code>and <code>same-site</code>"},{"owner":{"account_id":4688171,"reputation":11056,"user_id":3795036,"accept_rate":88,"display_name":"K.Nicholas"},"score":0,"creation_date":1694366122,"post_id":77076987,"comment_id":135878640,"body_markdown":"oauth or auth0 has the same odic logout endpoint, so I&#39;m assuming that&#39;s the answer here. If you want to logout the JWT token, tell the server that issued it to you. I&#39;m assuming at this point it&#39;s a bogus question since it should be obvious to anyone working with JWTs.","body":"oauth or auth0 has the same odic logout endpoint, so I&#39;m assuming that&#39;s the answer here. If you want to logout the JWT token, tell the server that issued it to you. I&#39;m assuming at this point it&#39;s a bogus question since it should be obvious to anyone working with JWTs."},{"owner":{"account_id":2064278,"reputation":13128,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":1,"creation_date":1694371540,"post_id":77076987,"comment_id":135879146,"body_markdown":"he doesnt have an issuer, the github he has provided he has built his own login and issues a jwt by himself https://github.com/Rapter1990/bookdelivery/blob/0d0394c882ba2b2e4008a7fbf90583c4dfad4cde/src/main/java/com/example/demo/service/impl/AuthServiceImpl.java#L60 so basically he has done the same misstake as everyone else, he is using JWT as a session. Most likely just found some poor tutorial saying that you should use JWTs as sessions","body":"he doesnt have an issuer, the github he has provided he has built his own login and issues a jwt by himself <a href=\"https://github.com/Rapter1990/bookdelivery/blob/0d0394c882ba2b2e4008a7fbf90583c4dfad4cde/src/main/java/com/example/demo/service/impl/AuthServiceImpl.java#L60\" rel=\"nofollow noreferrer\">github.com/Rapter1990/bookdelivery/blob/&hellip;</a> so basically he has done the same misstake as everyone else, he is using JWT as a session. Most likely just found some poor tutorial saying that you should use JWTs as sessions"},{"owner":{"account_id":2064278,"reputation":13128,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":1,"creation_date":1694371738,"post_id":77076987,"comment_id":135879163,"body_markdown":"so the answer here is basically, he is using JWTs the wrong way and, he is using them as sessions which you should not. You dont use JWTs when you build this type of login because of the simple reason. You can not invalidate a JWT without either rotating the keys which invalidates all JWTs issued, or as he is trying to do, build a some sort of database to keep track of the issued JWTs, which means he needs to check in his filter everytime someone supplies a JWT if the JWT is logged out or not, which he currently doesnt. So his login endpoint does nothing, and his filter will gladly let them in","body":"so the answer here is basically, he is using JWTs the wrong way and, he is using them as sessions which you should not. You dont use JWTs when you build this type of login because of the simple reason. You can not invalidate a JWT without either rotating the keys which invalidates all JWTs issued, or as he is trying to do, build a some sort of database to keep track of the issued JWTs, which means he needs to check in his filter everytime someone supplies a JWT if the JWT is logged out or not, which he currently doesnt. So his login endpoint does nothing, and his filter will gladly let them in"}],"answers":[{"tags":[],"owner":{"account_id":2064278,"reputation":13128,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1694374433,"creation_date":1694374074,"answer_id":77077604,"question_id":77076987,"body_markdown":"So the answer here is the following:\r\n\r\nWhat you have here is you have built a login, that at successful login you create your JWT in your service and hand out a token directly to the calling client. This is in oauth2 called an `implicit flow`and was deprecated from the oauth2 rfc because it was found to be insecure. \r\n\r\nYou also have built some sort of custom solution with some sort of thing you call a refresh token, which basically stores an id in some sort of storage.\r\n\r\nSo in principal, what you have actually built is some sort of Session authentication containing state, but completely custom, using JWTs.\r\n\r\nYou have tried to reinvent something that already exists in Spring Security which is called `FormLogin` which basically does all the things you want the only difference is that `FormLogin` uses cookies (which has additional security features like `httpOnly`, `Secured`, and `same-site`) but with JWTs.\r\n\r\nSo you are ending up with the same thing as `FormLogin` just less secure.\r\n\r\n&quot;Logging out&quot; a JWT isn&#39;t really possible. You can only invalidate a JWT by letting it time out. Once a JWT is created with and expiration date is set and then signed, its signed. The contract has been written.\r\n\r\nThe problem with your code is that when someone supplies a JWT to your application is that your filter that checks the JWTs just checks if the signage and expiration is still valid.\r\n\r\n```\r\n// Checking the validity and expiration\r\nJwts.parserBuilder()\r\n    .setSigningKey(getSignInKey())\r\n    .build()\r\n    .parseClaimsJws(authToken);\r\n```\r\n\r\nAs long is the signage and time stamp is still valid your JWT will pass through here:\r\n\r\n```\r\nif (jwt != null &amp;&amp; jwtUtils.validateJwtToken(jwt)) {\r\n    // some other code\r\n}\r\n```\r\n\r\nWhich means you never check if the token is actually *logged out* in your custom refreshToken database, so the filter never understands that anything is logged out.\r\n\r\nSo you need to do a check here, but remember, you will then in each request done to your service, you have to possibly do 2 database calls. One to check if the token isnt logged out, and a second one to check if the user exists and log them in. Thats 2 database calls for every request, unless you store things in memory, or offload using caches etc.\r\n\r\n\r\nThe bottom line is that, you are basically trying to build `FormLogin` using JWTs, but less secure and possibly with less good performance and i strongly discourage you from doing so.\r\n","title":"How can I invalidate the jwt token after logout in Spring Boot with Spring Security","body":"<p>So the answer here is the following:</p>\n<p>What you have here is you have built a login, that at successful login you create your JWT in your service and hand out a token directly to the calling client. This is in oauth2 called an <code>implicit flow</code>and was deprecated from the oauth2 rfc because it was found to be insecure.</p>\n<p>You also have built some sort of custom solution with some sort of thing you call a refresh token, which basically stores an id in some sort of storage.</p>\n<p>So in principal, what you have actually built is some sort of Session authentication containing state, but completely custom, using JWTs.</p>\n<p>You have tried to reinvent something that already exists in Spring Security which is called <code>FormLogin</code> which basically does all the things you want the only difference is that <code>FormLogin</code> uses cookies (which has additional security features like <code>httpOnly</code>, <code>Secured</code>, and <code>same-site</code>) but with JWTs.</p>\n<p>So you are ending up with the same thing as <code>FormLogin</code> just less secure.</p>\n<p>&quot;Logging out&quot; a JWT isn't really possible. You can only invalidate a JWT by letting it time out. Once a JWT is created with and expiration date is set and then signed, its signed. The contract has been written.</p>\n<p>The problem with your code is that when someone supplies a JWT to your application is that your filter that checks the JWTs just checks if the signage and expiration is still valid.</p>\n<pre><code>// Checking the validity and expiration\nJwts.parserBuilder()\n    .setSigningKey(getSignInKey())\n    .build()\n    .parseClaimsJws(authToken);\n</code></pre>\n<p>As long is the signage and time stamp is still valid your JWT will pass through here:</p>\n<pre><code>if (jwt != null &amp;&amp; jwtUtils.validateJwtToken(jwt)) {\n    // some other code\n}\n</code></pre>\n<p>Which means you never check if the token is actually <em>logged out</em> in your custom refreshToken database, so the filter never understands that anything is logged out.</p>\n<p>So you need to do a check here, but remember, you will then in each request done to your service, you have to possibly do 2 database calls. One to check if the token isnt logged out, and a second one to check if the user exists and log them in. Thats 2 database calls for every request, unless you store things in memory, or offload using caches etc.</p>\n<p>The bottom line is that, you are basically trying to build <code>FormLogin</code> using JWTs, but less secure and possibly with less good performance and i strongly discourage you from doing so.</p>\n"},{"tags":[],"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1695769671,"creation_date":1694394850,"answer_id":77078437,"question_id":77076987,"body_markdown":"You just can&#39;t invalidate a JWT.\r\n\r\nWhat you can invalidate, are the sessions on the OAuth2 authorization server (which delivered the token) and OAuth2 client (to which the token was delivered).\r\n\r\nSpring Security client implementation can be configured to do both: perform logout from the authorization server with a post-logout handler on the client.\r\n\r\nThe thing is that apparently, the application configuration and flows used have nothing to do with OAuth2, which ends to something pretty unsafe and inefficient as pointed in the other answer. You should just trash all that and opt for:\r\n- [`formLogin`][1] (with sessions and CSRF protection) if you don&#39;t need externalized authentication (SSO with the rest of your information system) or secured inter micro-services calls\r\n- proper OAuth2 otherwise (with confidential client on your server) \r\n\r\n\r\n  [1]: https://docs.spring.io/spring-security/reference/servlet/authentication/passwords/form.html","title":"How can I invalidate the jwt token after logout in Spring Boot with Spring Security","body":"<p>You just can't invalidate a JWT.</p>\n<p>What you can invalidate, are the sessions on the OAuth2 authorization server (which delivered the token) and OAuth2 client (to which the token was delivered).</p>\n<p>Spring Security client implementation can be configured to do both: perform logout from the authorization server with a post-logout handler on the client.</p>\n<p>The thing is that apparently, the application configuration and flows used have nothing to do with OAuth2, which ends to something pretty unsafe and inefficient as pointed in the other answer. You should just trash all that and opt for:</p>\n<ul>\n<li><a href=\"https://docs.spring.io/spring-security/reference/servlet/authentication/passwords/form.html\" rel=\"nofollow noreferrer\"><code>formLogin</code></a> (with sessions and CSRF protection) if you don't need externalized authentication (SSO with the rest of your information system) or secured inter micro-services calls</li>\n<li>proper OAuth2 otherwise (with confidential client on your server)</li>\n</ul>\n"}],"owner":{"account_id":7531034,"reputation":1,"user_id":5719229,"display_name":"S.N"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":887,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":77077604,"answer_count":2,"score":0,"last_activity_date":1695769671,"creation_date":1694363275,"question_id":77076987,"body_markdown":"I tried to implement an example with the usage of jwt token in Spring Boot. It covers register, login, refresh token and lastly logout process. I have a problem in logout process.\r\n\r\nI tried to delete jwt token after logout but I think the process of invalidating the jwt token is the best way to handle with this process.\r\n\r\nHere is the logout method of auth service shown below\r\n\r\n\r\nHere is the logout request shown below\r\n\r\n    @Data\r\n    @AllArgsConstructor\r\n    @NoArgsConstructor\r\n    public class LogoutRequest {\r\n    \r\n        private String token;\r\n    }\r\n\r\nHere is the logout method of controller\r\n\r\n    @PostMapping(&quot;/logout&quot;)\r\n    public ResponseEntity&lt;String&gt; logout(@RequestBody LogoutRequest request) {\r\n\r\n        return ResponseEntity.ok(authService.logout(request));\r\n    }\r\n\r\n\r\nHere is the getIdFromToken shown below\r\n\r\n    public Long getIdFromToken(String token){\r\n        return Long.parseLong(extractClaims(token).getId());\r\n    }\r\n\r\nHere is deleteByUserId shown below\r\n\r\n    @Override\r\n    public int deleteByUserId(Long userId) {\r\n\r\n        User user = userService.findById(userId).orElseThrow(() -&gt; new RuntimeException(&quot;User not found&quot;));\r\n        return refreshTokenRepository.deleteByUser(user);\r\n    }\r\n\r\nHow can I do that?\r\n\r\nHere is the repo : [Link][1]\r\n\r\n\r\n  [1]: https://github.com/Rapter1990/bookdelivery","title":"How can I invalidate the jwt token after logout in Spring Boot with Spring Security","body":"<p>I tried to implement an example with the usage of jwt token in Spring Boot. It covers register, login, refresh token and lastly logout process. I have a problem in logout process.</p>\n<p>I tried to delete jwt token after logout but I think the process of invalidating the jwt token is the best way to handle with this process.</p>\n<p>Here is the logout method of auth service shown below</p>\n<p>Here is the logout request shown below</p>\n<pre><code>@Data\n@AllArgsConstructor\n@NoArgsConstructor\npublic class LogoutRequest {\n\n    private String token;\n}\n</code></pre>\n<p>Here is the logout method of controller</p>\n<pre><code>@PostMapping(&quot;/logout&quot;)\npublic ResponseEntity&lt;String&gt; logout(@RequestBody LogoutRequest request) {\n\n    return ResponseEntity.ok(authService.logout(request));\n}\n</code></pre>\n<p>Here is the getIdFromToken shown below</p>\n<pre><code>public Long getIdFromToken(String token){\n    return Long.parseLong(extractClaims(token).getId());\n}\n</code></pre>\n<p>Here is deleteByUserId shown below</p>\n<pre><code>@Override\npublic int deleteByUserId(Long userId) {\n\n    User user = userService.findById(userId).orElseThrow(() -&gt; new RuntimeException(&quot;User not found&quot;));\n    return refreshTokenRepository.deleteByUser(user);\n}\n</code></pre>\n<p>How can I do that?</p>\n<p>Here is the repo : <a href=\"https://github.com/Rapter1990/bookdelivery\" rel=\"nofollow noreferrer\">Link</a></p>\n"},{"tags":["java","unit-testing","spring-boot","mockito","junit5"],"comments":[{"owner":{"account_id":3020783,"reputation":963,"user_id":2561895,"accept_rate":67,"display_name":"Brandon"},"score":0,"creation_date":1550073630,"post_id":54674251,"comment_id":96138356,"body_markdown":"Would you mind sharing more of your code? Such as your CrudRespository and your unit test test case?","body":"Would you mind sharing more of your code? Such as your CrudRespository and your unit test test case?"},{"owner":{"account_id":6759137,"reputation":111,"user_id":5206714,"accept_rate":50,"display_name":"Kyle_jumpen"},"score":0,"creation_date":1550073984,"post_id":54674251,"comment_id":96138565,"body_markdown":"@Brandon of course, please find attached the code","body":"@Brandon of course, please find attached the code"},{"owner":{"account_id":4629221,"reputation":2621,"user_id":3752185,"display_name":"Janar"},"score":3,"creation_date":1550074168,"post_id":54674251,"comment_id":96138689,"body_markdown":"mockito should be able to mock that interface just fine - what is the exception you are getting?","body":"mockito should be able to mock that interface just fine - what is the exception you are getting?"},{"owner":{"account_id":6759137,"reputation":111,"user_id":5206714,"accept_rate":50,"display_name":"Kyle_jumpen"},"score":0,"creation_date":1550074259,"post_id":54674251,"comment_id":96138735,"body_markdown":"@Janar : Mockito cannot mock this class: interface fr.test.repo.Repository.BookRepository.\n  The error is this one : &quot;Mockito can only mock non-private &amp; non-final classes.\nIf you&#39;re not sure why you&#39;re getting this error, please report to the mailing list.&quot;","body":"@Janar : Mockito cannot mock this class: interface fr.test.repo.Repository.BookRepository.   The error is this one : &quot;Mockito can only mock non-private &amp; non-final classes. If you&#39;re not sure why you&#39;re getting this error, please report to the mailing list.&quot;"},{"owner":{"account_id":9553206,"reputation":2510,"user_id":7099148,"display_name":"user31601"},"score":0,"creation_date":1550074391,"post_id":54674251,"comment_id":96138825,"body_markdown":"Are you sure its the `given(bookRepository.findAll())` line that&#39;s throwing that exception? Find all is a non-final public method, so it should be fine.","body":"Are you sure its the <code>given(bookRepository.findAll())</code> line that&#39;s throwing that exception? Find all is a non-final public method, so it should be fine."},{"owner":{"account_id":6759137,"reputation":111,"user_id":5206714,"accept_rate":50,"display_name":"Kyle_jumpen"},"score":0,"creation_date":1550074545,"post_id":54674251,"comment_id":96138921,"body_markdown":"@user31601 It fails before entering the test part.\nI forgot to precise that I&#39;m using MockitoExtensions given by JUNIT jupiter","body":"@user31601 It fails before entering the test part. I forgot to precise that I&#39;m using MockitoExtensions given by JUNIT jupiter"},{"owner":{"account_id":6759137,"reputation":111,"user_id":5206714,"accept_rate":50,"display_name":"Kyle_jumpen"},"score":0,"creation_date":1550139184,"post_id":54674251,"comment_id":96163733,"body_markdown":"I&#39;ve noticed that my code isn&#39;t working when using Junit5 + Mockito from junit jupiter but it works perfectly fine with Junit 4 + basic Mockito&#129488;.\n\nI&#39;m thinking that Junit 5 mockito isn&#39;t extending all the basic mockito behaviour.","body":"I&#39;ve noticed that my code isn&#39;t working when using Junit5 + Mockito from junit jupiter but it works perfectly fine with Junit 4 + basic Mockito🧐.  I&#39;m thinking that Junit 5 mockito isn&#39;t extending all the basic mockito behaviour."}],"answers":[{"tags":[],"owner":{"account_id":8975058,"reputation":426,"user_id":6692227,"display_name":"theonlyrao"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1550077398,"creation_date":1550077398,"answer_id":54675724,"question_id":54674251,"body_markdown":"I&#39;m wondering if the issue is that Mockito isn&#39;t sure how to inject the `bookService` into the Spring TestContext.\r\n\r\nI would try annotating the test with `@ExtendWith(SpringExtension.class)` as suggested at the bottom of the &quot;[Writing Tests Dependency Injection][1]&quot; section of the JUnit5 User Guide.\r\n\r\nThe source code for that annotation is [here][2].\r\n\r\nI also think it&#39;s possible the `given` [BDD style of Mockito][3] and the `when\\\\then` style could have different results.\r\n\r\n\r\n  [1]: https://junit.org/junit5/docs/current/user-guide/#writing-tests-dependency-injection\r\n  [2]: https://github.com/spring-projects/spring-framework/blob/master/spring-test/src/main/java/org/springframework/test/context/junit/jupiter/SpringExtension.java\r\n  [3]: https://static.javadoc.io/org.mockito/mockito-core/2.24.0/org/mockito/Mockito.html#bdd_mockito","title":"How to mock JPA repository&#39;s find method in unit tests","body":"<p>I'm wondering if the issue is that Mockito isn't sure how to inject the <code>bookService</code> into the Spring TestContext.</p>\n\n<p>I would try annotating the test with <code>@ExtendWith(SpringExtension.class)</code> as suggested at the bottom of the \"<a href=\"https://junit.org/junit5/docs/current/user-guide/#writing-tests-dependency-injection\" rel=\"nofollow noreferrer\">Writing Tests Dependency Injection</a>\" section of the JUnit5 User Guide.</p>\n\n<p>The source code for that annotation is <a href=\"https://github.com/spring-projects/spring-framework/blob/master/spring-test/src/main/java/org/springframework/test/context/junit/jupiter/SpringExtension.java\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>I also think it's possible the <code>given</code> <a href=\"https://static.javadoc.io/org.mockito/mockito-core/2.24.0/org/mockito/Mockito.html#bdd_mockito\" rel=\"nofollow noreferrer\">BDD style of Mockito</a> and the <code>when\\\\then</code> style could have different results.</p>\n"},{"tags":[],"owner":{"account_id":3490105,"reputation":7,"user_id":2920017,"display_name":"Mathan"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1550141694,"creation_date":1550141694,"answer_id":54688729,"question_id":54674251,"body_markdown":"If i remember well your test have to use this :\r\n\r\n```java\r\n\t@Before\r\n\tpublic void init() {\r\n\t\tMockitoAnnotations.initMocks(this);\r\n\t}\r\n```\r\n","title":"How to mock JPA repository&#39;s find method in unit tests","body":"<p>If i remember well your test have to use this :</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>    @Before\n    public void init() {\n        MockitoAnnotations.initMocks(this);\n    }\n</code></pre>\n"}],"owner":{"account_id":6759137,"reputation":111,"user_id":5206714,"accept_rate":50,"display_name":"Kyle_jumpen"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":9010,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":2,"score":4,"last_activity_date":1695769219,"creation_date":1550073138,"question_id":54674251,"body_markdown":"I&#39;m trying to UT my little project and I have a problem.\r\nMy application use a simple Layered Architecture and I can&#39;t happen to UT the service Layer.\r\nIn fact I&#39;m trying to mock the class **[CrudRepository][1]** from Spring-data.\r\nI&#39;m trying to mock the method findAll of one of my repository that is extending this class but mockito can&#39;t mock Interface.\r\nIs there a way to do it simply aside from creating the bean myself and filling it ?\r\n\r\n[Update]\r\nHere is the Repository Code :\r\n\r\n    package fr.kaf.interview.Repository;\r\n\r\n    import fr.kaf.interview.model.Book;\r\n    import org.springframework.data.repository.CrudRepository;\r\n    import org.springframework.stereotype.Repository;\r\n\r\n    @Repository\r\n    public interface BookRepository extends CrudRepository&lt;Book,Long&gt; {\r\n    }\r\n\r\n\r\n\r\nHere Is The UT :\r\n\r\n    @ExtendWith(MockitoExtension.class)\r\n    class BookServiceTest {\r\n\r\n    \r\n    @Mock\r\n    private BookRepository bookRepository;\r\n\r\n    @InjectMocks\r\n    private BookService bookService;\r\n\r\n    @Test\r\n    public void should_get_All_books_from_database() {\r\n        //Given\r\n\r\n        Person author = new Person();\r\n        author.setFirstName(&quot;Ka&quot;);\r\n        author.setLastName(&quot;AwQl&quot;);\r\n\r\n        Book firstBook = new Book();\r\n        firstBook.setTitle(&quot;One Book&quot;);\r\n        firstBook.setAuthors(singletonList(author));\r\n\r\n        Book secondBook = new Book();\r\n        secondBook.setTitle(&quot;Second Book&quot;);\r\n        secondBook.setAuthors(singletonList(author));\r\n\r\n        given(bookRepository.findAll()).willReturn(asList(firstBook, secondBook));\r\n\r\n        //When\r\n        List&lt;Book&gt; allBooks = bookService.getAllBooks();\r\n\r\n        //Then\r\n        assertThat(allBooks).containsExactly(firstBook, secondBook);\r\n\r\n    }\r\n\r\n    }\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-data/commons/docs/current/api/org/springframework/data/repository/CrudRepository.html","title":"How to mock JPA repository&#39;s find method in unit tests","body":"<p>I'm trying to UT my little project and I have a problem.\nMy application use a simple Layered Architecture and I can't happen to UT the service Layer.\nIn fact I'm trying to mock the class <strong><a href=\"https://docs.spring.io/spring-data/commons/docs/current/api/org/springframework/data/repository/CrudRepository.html\" rel=\"nofollow noreferrer\">CrudRepository</a></strong> from Spring-data.\nI'm trying to mock the method findAll of one of my repository that is extending this class but mockito can't mock Interface.\nIs there a way to do it simply aside from creating the bean myself and filling it ?</p>\n\n<p>[Update]\nHere is the Repository Code :</p>\n\n<pre><code>package fr.kaf.interview.Repository;\n\nimport fr.kaf.interview.model.Book;\nimport org.springframework.data.repository.CrudRepository;\nimport org.springframework.stereotype.Repository;\n\n@Repository\npublic interface BookRepository extends CrudRepository&lt;Book,Long&gt; {\n}\n</code></pre>\n\n<p>Here Is The UT :</p>\n\n<pre><code>@ExtendWith(MockitoExtension.class)\nclass BookServiceTest {\n\n\n@Mock\nprivate BookRepository bookRepository;\n\n@InjectMocks\nprivate BookService bookService;\n\n@Test\npublic void should_get_All_books_from_database() {\n    //Given\n\n    Person author = new Person();\n    author.setFirstName(\"Ka\");\n    author.setLastName(\"AwQl\");\n\n    Book firstBook = new Book();\n    firstBook.setTitle(\"One Book\");\n    firstBook.setAuthors(singletonList(author));\n\n    Book secondBook = new Book();\n    secondBook.setTitle(\"Second Book\");\n    secondBook.setAuthors(singletonList(author));\n\n    given(bookRepository.findAll()).willReturn(asList(firstBook, secondBook));\n\n    //When\n    List&lt;Book&gt; allBooks = bookService.getAllBooks();\n\n    //Then\n    assertThat(allBooks).containsExactly(firstBook, secondBook);\n\n}\n\n}\n</code></pre>\n"},{"tags":["java","file","char","return"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1695390004,"post_id":77158011,"comment_id":136021977,"body_markdown":"*//1.Read words  from File and return as arr of char* If the file contained only the word &#39;cat&#39;, what would your array be? You should probably post an example file too","body":"<i>//1.Read words  from File and return as arr of char</i> If the file contained only the word &#39;cat&#39;, what would your array be? You should probably post an example file too"},{"owner":{"account_id":29509322,"reputation":3,"user_id":22614714,"display_name":"Maiinjoon"},"score":0,"creation_date":1695391062,"post_id":77158011,"comment_id":136022231,"body_markdown":"yes any word  like you say for example  a file called word.txt and inside the word cat so the array have char [ ] word ={ &#39;c&#39;, &#39;a&#39; ,&#39;t&#39; };","body":"yes any word  like you say for example  a file called word.txt and inside the word cat so the array have char [ ] word ={ &#39;c&#39;, &#39;a&#39; ,&#39;t&#39; };"}],"answers":[{"tags":[],"owner":{"account_id":370994,"reputation":35154,"user_id":719263,"accept_rate":100,"display_name":"Jean-Baptiste Yun&#232;s"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1695391794,"creation_date":1695391794,"answer_id":77158370,"question_id":77158011,"body_markdown":"Nothing changes `aux` in your code:\r\n\r\n    char [] aux = null;\r\n    // Declaring a string variable\r\n    String st;\r\n    // Condition holds true till\r\n    // there is character in a string\r\n    while ((st = br.readLine()) != null)\r\n      st+=aux;\r\n    return aux;\r\n\r\nConcatenate all read strings and then get the char array from:\r\n\r\n    String st = &quot;&quot;, read = null;\r\n    // Condition holds true till\r\n    // there is character in a string\r\n    while ((read = br.readLine()) != null)\r\n      st += read;\r\n    return st.toCharArray();\r\n\r\n\r\n","title":"Function to read file passing it by parameter","body":"<p>Nothing changes <code>aux</code> in your code:</p>\n<pre><code>char [] aux = null;\n// Declaring a string variable\nString st;\n// Condition holds true till\n// there is character in a string\nwhile ((st = br.readLine()) != null)\n  st+=aux;\nreturn aux;\n</code></pre>\n<p>Concatenate all read strings and then get the char array from:</p>\n<pre><code>String st = &quot;&quot;, read = null;\n// Condition holds true till\n// there is character in a string\nwhile ((read = br.readLine()) != null)\n  st += read;\nreturn st.toCharArray();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695768267,"creation_date":1695401849,"answer_id":77159479,"question_id":77158011,"body_markdown":"As I mentioned in my comment above, if you have a file containing words on each line, you&#39;re not going to to be able to distinguish the beginnings and endings of words if you put everything into one `char[]`. You *can* use `char[][]` though, so something like:\r\n\r\n```\r\nimport java.nio.file.Files;\r\nimport java.nio.file.Path;\r\nimport java.util.Scanner;\r\nimport java.util.Arrays;\r\n\r\npublic class Words {\r\n    public static void main(String[] args) throws Exception {\r\n        try (Scanner sc = new Scanner(Files.newBufferedReader(Path.of(args[0])))) {\r\n            char[][] words = sc.tokens()\r\n                .map(String::toCharArray)\r\n                .toArray(char[][]::new);\r\n            System.out.println(Arrays.deepToString(words));\r\n        }\r\n    }\r\n}\r\n```","title":"Function to read file passing it by parameter","body":"<p>As I mentioned in my comment above, if you have a file containing words on each line, you're not going to to be able to distinguish the beginnings and endings of words if you put everything into one <code>char[]</code>. You <em>can</em> use <code>char[][]</code> though, so something like:</p>\n<pre><code>import java.nio.file.Files;\nimport java.nio.file.Path;\nimport java.util.Scanner;\nimport java.util.Arrays;\n\npublic class Words {\n    public static void main(String[] args) throws Exception {\n        try (Scanner sc = new Scanner(Files.newBufferedReader(Path.of(args[0])))) {\n            char[][] words = sc.tokens()\n                .map(String::toCharArray)\n                .toArray(char[][]::new);\n            System.out.println(Arrays.deepToString(words));\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":29509322,"reputation":3,"user_id":22614714,"display_name":"Maiinjoon"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":40,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":77158370,"answer_count":2,"score":-1,"last_activity_date":1695768267,"creation_date":1695388967,"question_id":77158011,"body_markdown":"Hi guys I&#39;m having difficulty with a method to read file.I have not found anything in the documentation.\r\n\r\nI&#39;m trying to return an array of char.\r\n\r\n```\r\npublic class ReadFile {\r\n\r\n\tpublic static void main(String[] args) throws IOException {\r\n\t\t\r\n\t\tFile  f = new File(&quot;word.txt&quot;);\r\n\t \r\n\t\tchar [] word=ReadWordFile(f);\r\n\t\t\r\n\t\tSystem.out.println(word);\r\n\r\n\t}\r\n\t\r\n\t\r\n\t//1.Read words  from File and return as arr of char\r\n\tpublic static  char [] ReadWordFile(File f) throws IOException {\r\n\t\t BufferedReader br\r\n         = new BufferedReader(new FileReader(f));\r\n\t\t \r\n\t\t char [] aux = null;\r\n\r\n     // Declaring a string variable\r\n     String st;\r\n     // Condition holds true till\r\n     // there is character in a string\r\n     while ((st = br.readLine()) != null)\r\n\r\n\t\tst+=aux;\r\n\r\n     return aux;\t\r\n\t}\r\n```","title":"Function to read file passing it by parameter","body":"<p>Hi guys I'm having difficulty with a method to read file.I have not found anything in the documentation.</p>\n<p>I'm trying to return an array of char.</p>\n<pre><code>public class ReadFile {\n\n    public static void main(String[] args) throws IOException {\n        \n        File  f = new File(&quot;word.txt&quot;);\n     \n        char [] word=ReadWordFile(f);\n        \n        System.out.println(word);\n\n    }\n    \n    \n    //1.Read words  from File and return as arr of char\n    public static  char [] ReadWordFile(File f) throws IOException {\n         BufferedReader br\n         = new BufferedReader(new FileReader(f));\n         \n         char [] aux = null;\n\n     // Declaring a string variable\n     String st;\n     // Condition holds true till\n     // there is character in a string\n     while ((st = br.readLine()) != null)\n\n        st+=aux;\n\n     return aux;    \n    }\n</code></pre>\n"},{"tags":["java","spring","rest","logging"],"comments":[{"owner":{"account_id":178052,"reputation":1861,"user_id":409784,"display_name":"Francois"},"score":0,"creation_date":1422461128,"post_id":3892018,"comment_id":44760258,"body_markdown":"You can also use LoggingRequestInterceptor\r\n\r\ncf http://stackoverflow.com/a/22620168/409784","body":"You can also use LoggingRequestInterceptor    cf <a href=\"http://stackoverflow.com/a/22620168/409784\">stackoverflow.com/a/22620168/409784</a>"},{"owner":{"account_id":3260335,"reputation":23,"user_id":2746033,"display_name":"user2746033"},"score":0,"creation_date":1511505795,"post_id":3892018,"comment_id":81889668,"body_markdown":"Resolved https://stackoverflow.com/questions/7952154/spring-resttemplate-how-to-enable-full-debugging-logging-of-requests-responses/47467572","body":"Resolved <a href=\"https://stackoverflow.com/questions/7952154/spring-resttemplate-how-to-enable-full-debugging-logging-of-requests-responses/47467572\" title=\"spring resttemplate how to enable full debugging logging of requests responses\">stackoverflow.com/questions/7952154/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":64878,"reputation":3521,"user_id":191300,"accept_rate":55,"display_name":"surajz"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1449016354,"creation_date":1286552692,"answer_id":3892159,"question_id":3892018,"body_markdown":"Configure your logging as follows:\r\n\r\n    log4j.logger.org.springframework.web.client=DEBUG\r\n\r\nThen use a curl command to see the output, eg\r\n\r\n    curl  -H &#39;Accept: application/xml&#39; -H &#39;Content-Type: application/xml&#39; http://localhost:8080/ser/data\r\n\r\nBy default, restTemplate uses HttpURlConnection (via SimpleClientHttpRequest), so you might need to switch to jakarta httpclient to see the log statement. Otherwise the above log configuration will out show you the response\r\n\r\n        &lt;bean id=&quot;httpClientFactory&quot; class=&quot;org.springframework.http.client.CommonsClientHttpRequestFactory&quot;&gt;\r\n            &lt;constructor-arg&gt;&lt;bean  class=&quot;org.apache.commons.httpclient.HttpClient&quot;/&gt;&lt;/constructor-arg&gt;\r\n        &lt;/bean&gt;\r\n    \t&lt;bean id=&quot;restTemplate&quot; class=&quot;org.springframework.web.client.RestTemplate&quot;&gt;\r\n    \t\t&lt;constructor-arg ref=&quot;httpClientFactory&quot;/&gt;\r\n    \t\t&lt;property name=&quot;messageConverters&quot;&gt;\r\n    ...","title":"How do I log response in Spring RestTemplate?","body":"<p>Configure your logging as follows:</p>\n\n<pre><code>log4j.logger.org.springframework.web.client=DEBUG\n</code></pre>\n\n<p>Then use a curl command to see the output, eg</p>\n\n<pre><code>curl  -H 'Accept: application/xml' -H 'Content-Type: application/xml' http://localhost:8080/ser/data\n</code></pre>\n\n<p>By default, restTemplate uses HttpURlConnection (via SimpleClientHttpRequest), so you might need to switch to jakarta httpclient to see the log statement. Otherwise the above log configuration will out show you the response</p>\n\n<pre><code>    &lt;bean id=\"httpClientFactory\" class=\"org.springframework.http.client.CommonsClientHttpRequestFactory\"&gt;\n        &lt;constructor-arg&gt;&lt;bean  class=\"org.apache.commons.httpclient.HttpClient\"/&gt;&lt;/constructor-arg&gt;\n    &lt;/bean&gt;\n    &lt;bean id=\"restTemplate\" class=\"org.springframework.web.client.RestTemplate\"&gt;\n        &lt;constructor-arg ref=\"httpClientFactory\"/&gt;\n        &lt;property name=\"messageConverters\"&gt;\n...\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3001,"reputation":138707,"user_id":4249,"accept_rate":84,"display_name":"matt b"},"down_vote_count":0,"up_vote_count":12,"is_accepted":true,"score":12,"last_activity_date":1286554101,"creation_date":1286554101,"answer_id":3892328,"question_id":3892018,"body_markdown":"Depending on which method of making the HTTP connection you are using, you could look at turning up the logging within the actual HTTP connection classes.\r\n\r\nFor example, if you are using commons HttpClient, you can set\r\n\r\n    log4j.logger.httpclient.wire=DEBUG\r\n\r\nThe commons-httpclient project has [an entire page in the documentation on their logging practices][1].\r\n\r\n\r\n  [1]: http://hc.apache.org/httpclient-3.x/logging.html","title":"How do I log response in Spring RestTemplate?","body":"<p>Depending on which method of making the HTTP connection you are using, you could look at turning up the logging within the actual HTTP connection classes.</p>\n\n<p>For example, if you are using commons HttpClient, you can set</p>\n\n<pre><code>log4j.logger.httpclient.wire=DEBUG\n</code></pre>\n\n<p>The commons-httpclient project has <a href=\"http://hc.apache.org/httpclient-3.x/logging.html\" rel=\"noreferrer\">an entire page in the documentation on their logging practices</a>.</p>\n"},{"tags":[],"owner":{"account_id":5406670,"reputation":1601,"user_id":4304958,"display_name":"Mark Hobson"},"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1580935335,"creation_date":1509531478,"answer_id":47052567,"question_id":3892018,"body_markdown":"You can use [spring-rest-template-logger][1] to log `RestTemplate` HTTP traffic.\r\n\r\nAdd a dependency to your Maven project:\r\n\r\n    &lt;dependency&gt;\r\n    \t&lt;groupId&gt;org.hobsoft.spring&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;spring-rest-template-logger&lt;/artifactId&gt;\r\n    \t&lt;version&gt;2.0.0&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nThen customize your `RestTemplate` as follows:\r\n\r\n    RestTemplate restTemplate = new RestTemplateBuilder()\r\n    \t.customizers(new LoggingCustomizer())\r\n    \t.build()\r\n\r\nEnsure that debug logging is enabled in `application.properties`:\r\n\r\n    logging.level.org.hobsoft.spring.resttemplatelogger.LoggingCustomizer = DEBUG\r\n\r\nNow all RestTemplate HTTP traffic will be logged to `org.hobsoft.spring.resttemplatelogger.LoggingCustomizer` at debug level.\r\n\r\nDISCLAIMER: I wrote this library.\r\n\r\n  [1]: https://github.com/markhobson/spring-rest-template-logger\r\n","title":"How do I log response in Spring RestTemplate?","body":"<p>You can use <a href=\"https://github.com/markhobson/spring-rest-template-logger\" rel=\"nofollow noreferrer\">spring-rest-template-logger</a> to log <code>RestTemplate</code> HTTP traffic.</p>\n\n<p>Add a dependency to your Maven project:</p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.hobsoft.spring&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-rest-template-logger&lt;/artifactId&gt;\n    &lt;version&gt;2.0.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>Then customize your <code>RestTemplate</code> as follows:</p>\n\n<pre><code>RestTemplate restTemplate = new RestTemplateBuilder()\n    .customizers(new LoggingCustomizer())\n    .build()\n</code></pre>\n\n<p>Ensure that debug logging is enabled in <code>application.properties</code>:</p>\n\n<pre><code>logging.level.org.hobsoft.spring.resttemplatelogger.LoggingCustomizer = DEBUG\n</code></pre>\n\n<p>Now all RestTemplate HTTP traffic will be logged to <code>org.hobsoft.spring.resttemplatelogger.LoggingCustomizer</code> at debug level.</p>\n\n<p>DISCLAIMER: I wrote this library.</p>\n"},{"tags":[],"owner":{"account_id":12735021,"reputation":459,"user_id":9250232,"display_name":"Solanki Vaibhav"},"down_vote_count":3,"up_vote_count":0,"is_accepted":false,"score":-3,"last_activity_date":1557137578,"creation_date":1557137578,"answer_id":56003085,"question_id":3892018,"body_markdown":"you don&#39;t need to write a single line of code,\r\nyou just need to add the following property in application.properties file\r\n\r\n    logging.level.org.springframework.web.client.RestTemplate=DEBUG\r\n\r\nusing this it will log rest template call&#39;s request body, request header, request URL, and response body also in debug mode.","title":"How do I log response in Spring RestTemplate?","body":"<p>you don't need to write a single line of code,\nyou just need to add the following property in application.properties file</p>\n\n<pre><code>logging.level.org.springframework.web.client.RestTemplate=DEBUG\n</code></pre>\n\n<p>using this it will log rest template call's request body, request header, request URL, and response body also in debug mode.</p>\n"},{"tags":[],"owner":{"account_id":15382998,"reputation":51,"user_id":11097895,"display_name":"kedar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1593693596,"creation_date":1593693596,"answer_id":62696545,"question_id":3892018,"body_markdown":"If you used swagger to generate the RestTemplate based client then in the ApiClient there is a public method setDebugging and you can set to true or false and then I was able to see whats going on.\r\nHope this helps.\r\nI used latest swager generator cli I think its 2.9 or something\r\n","title":"How do I log response in Spring RestTemplate?","body":"<p>If you used swagger to generate the RestTemplate based client then in the ApiClient there is a public method setDebugging and you can set to true or false and then I was able to see whats going on.\nHope this helps.\nI used latest swager generator cli I think its 2.9 or something</p>\n"},{"tags":[],"owner":{"account_id":57788,"reputation":46110,"user_id":173149,"accept_rate":62,"display_name":"gavenkoa"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695766961,"creation_date":1695766961,"answer_id":77183735,"question_id":3892018,"body_markdown":"For the Apache HttpClient v4 factory:\r\n\r\n    final RestTemplate restTemplate = restTemplateBuilder\r\n        .requestFactory(() -&gt; new HttpComponentsClientHttpRequestFactory())\r\n        .build();\r\n\r\nthe Apache lib has:\r\n\r\n```\r\npublic class ManagedHttpClientConnectionFactory\r\n...\r\n    private final Log log = LogFactory.getLog(DefaultManagedHttpClientConnection.class);\r\n    private final Log headerLog = LogFactory.getLog(&quot;org.apache.http.headers&quot;);\r\n    private final Log wireLog = LogFactory.getLog(&quot;org.apache.http.wire&quot;);\r\n```\r\n\r\nSo define loggers `org.apache.http.headers` &amp; `org.apache.http.wire` at DEBUG level!","title":"How do I log response in Spring RestTemplate?","body":"<p>For the Apache HttpClient v4 factory:</p>\n<pre><code>final RestTemplate restTemplate = restTemplateBuilder\n    .requestFactory(() -&gt; new HttpComponentsClientHttpRequestFactory())\n    .build();\n</code></pre>\n<p>the Apache lib has:</p>\n<pre><code>public class ManagedHttpClientConnectionFactory\n...\n    private final Log log = LogFactory.getLog(DefaultManagedHttpClientConnection.class);\n    private final Log headerLog = LogFactory.getLog(&quot;org.apache.http.headers&quot;);\n    private final Log wireLog = LogFactory.getLog(&quot;org.apache.http.wire&quot;);\n</code></pre>\n<p>So define loggers <code>org.apache.http.headers</code> &amp; <code>org.apache.http.wire</code> at DEBUG level!</p>\n"}],"owner":{"account_id":170154,"reputation":1757,"user_id":396675,"accept_rate":73,"display_name":"rjsang"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":38696,"favorite_count":0,"down_vote_count":0,"up_vote_count":15,"accepted_answer_id":3892328,"answer_count":6,"score":15,"last_activity_date":1695766961,"creation_date":1286551639,"question_id":3892018,"body_markdown":"I am using RestTemplate to make calls to a web service.\r\n\r\n    String userId = restTemplate.getForObject(createUserUrl, String.class);\r\n\r\nIf this fails to return a user ID I just get returned null but I don&#39;t know why. How do I output the actual XML response to a log?","title":"How do I log response in Spring RestTemplate?","body":"<p>I am using RestTemplate to make calls to a web service.</p>\n\n<pre><code>String userId = restTemplate.getForObject(createUserUrl, String.class);\n</code></pre>\n\n<p>If this fails to return a user ID I just get returned null but I don't know why. How do I output the actual XML response to a log?</p>\n"},{"tags":["java","graalvm"],"comments":[{"owner":{"account_id":15064163,"reputation":13519,"user_id":10871900,"display_name":"dan1st is crying"},"score":0,"creation_date":1695416982,"post_id":77160433,"comment_id":136026733,"body_markdown":"Does `ProxyObject.fromMap` help? (similar to https://stackoverflow.com/a/67156894/10871900)","body":"Does <code>ProxyObject.fromMap</code> help? (similar to <a href=\"https://stackoverflow.com/a/67156894/10871900\">stackoverflow.com/a/67156894/10871900</a>)"}],"answers":[{"tags":[],"owner":{"account_id":58650,"reputation":3399,"user_id":175554,"accept_rate":40,"display_name":"ozkanpakdil"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695766933,"creation_date":1695491318,"answer_id":77164272,"question_id":77160433,"body_markdown":"That **engine.put** looks like putting the object into context but somehow it is not working. At old answers I see that approach was working https://stackoverflow.com/a/46424798/175554 maybe it was in [Nashorn](https://en.wikipedia.org/wiki/Nashorn_(JavaScript_engine)), long story short we can provide the hashmap easiest and quickest like below\r\n\r\n```java\r\nHashMap&lt;String, String&gt; obj = new HashMap();\r\nobj.put(&quot;f&quot;, &quot;f&quot;);\r\nobj.put(&quot;c&quot;, &quot;c&quot;);\r\n\r\nObjectMapper objectMapper = new ObjectMapper();\r\n\r\nScriptEngineManager manager = new ScriptEngineManager();\r\nScriptEngine engine = manager.getEngineByName(&quot;graal.js&quot;);\r\n\r\nSystem.out.println(engine.eval(&quot;&quot;&quot;\r\n                console.log(&#39;hey I am in js.&#39;);\r\n                o=%s;\r\n                JSON.stringify(o);\r\n        &quot;&quot;&quot;.formatted(objectMapper.writeValueAsString(obj))));\r\n```\r\nYou can find full working example [here](https://github.com/ozkanpakdil/java-examlpes/tree/master/graal-js)","title":"GraalVM&#39;s JSON.stringify is not working as it is expected","body":"<p>That <strong>engine.put</strong> looks like putting the object into context but somehow it is not working. At old answers I see that approach was working <a href=\"https://stackoverflow.com/a/46424798/175554\">https://stackoverflow.com/a/46424798/175554</a> maybe it was in <a href=\"https://en.wikipedia.org/wiki/Nashorn_(JavaScript_engine)\" rel=\"nofollow noreferrer\">Nashorn</a>, long story short we can provide the hashmap easiest and quickest like below</p>\n<pre class=\"lang-java prettyprint-override\"><code>HashMap&lt;String, String&gt; obj = new HashMap();\nobj.put(&quot;f&quot;, &quot;f&quot;);\nobj.put(&quot;c&quot;, &quot;c&quot;);\n\nObjectMapper objectMapper = new ObjectMapper();\n\nScriptEngineManager manager = new ScriptEngineManager();\nScriptEngine engine = manager.getEngineByName(&quot;graal.js&quot;);\n\nSystem.out.println(engine.eval(&quot;&quot;&quot;\n                console.log('hey I am in js.');\n                o=%s;\n                JSON.stringify(o);\n        &quot;&quot;&quot;.formatted(objectMapper.writeValueAsString(obj))));\n</code></pre>\n<p>You can find full working example <a href=\"https://github.com/ozkanpakdil/java-examlpes/tree/master/graal-js\" rel=\"nofollow noreferrer\">here</a></p>\n"}],"owner":{"account_id":1814568,"reputation":3,"user_id":1649936,"display_name":"Mohammad Kermani"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":60,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1695766933,"creation_date":1695413732,"question_id":77160433,"body_markdown":"It seems that JSON.stringify cannot  proccess Map Objects in GraalVM.\r\n\r\n\r\n```\r\n            HashMap&lt;String, String&gt; obj = new HashMap();\r\n            obj.put(&quot;f&quot;, &quot;f&quot;);\r\n            obj.put(&quot;c&quot;, &quot;c&quot;);\r\n\r\n            ScriptEngineManager manager = new ScriptEngineManager();\r\n            ScriptEngine engine = manager.getEngineByName(&quot;graal.js&quot;);\r\n            engine.put(&quot;obj&quot;, obj);\r\n            System.out.println(engine.eval(&quot;JSON.stringify(obj)&quot;));\r\n```\r\nThis is output:\r\n\r\n```\r\n{}\r\n```\r\n\r\nCan anyone help to fix this Issue?\r\nJDK17 Graalvm 22.0.0","title":"GraalVM&#39;s JSON.stringify is not working as it is expected","body":"<p>It seems that JSON.stringify cannot  proccess Map Objects in GraalVM.</p>\n<pre><code>            HashMap&lt;String, String&gt; obj = new HashMap();\n            obj.put(&quot;f&quot;, &quot;f&quot;);\n            obj.put(&quot;c&quot;, &quot;c&quot;);\n\n            ScriptEngineManager manager = new ScriptEngineManager();\n            ScriptEngine engine = manager.getEngineByName(&quot;graal.js&quot;);\n            engine.put(&quot;obj&quot;, obj);\n            System.out.println(engine.eval(&quot;JSON.stringify(obj)&quot;));\n</code></pre>\n<p>This is output:</p>\n<pre><code>{}\n</code></pre>\n<p>Can anyone help to fix this Issue?\nJDK17 Graalvm 22.0.0</p>\n"},{"tags":["java","spring","rest","character-encoding","resttemplate"],"answers":[{"tags":[],"owner":{"account_id":11296302,"reputation":2929,"user_id":8283737,"accept_rate":89,"display_name":"Arun Gowda"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1600340109,"creation_date":1600328898,"answer_id":63933496,"question_id":63887160,"body_markdown":"I am not sure what the problem was exactly. I configured the rest template to use apache Http client instead of the default HttpUrlConnection used by rest template.\r\n\r\nThis seemed to work well and fixed the garbage error response body issue.\r\n\r\n[This tutorial][1] helps us do the same.\r\n\r\n\r\n  [1]: https://howtodoinjava.com/spring-boot2/resttemplate/resttemplate-httpclient-java-config/","title":"Spring rest template garbage error response body","body":"<p>I am not sure what the problem was exactly. I configured the rest template to use apache Http client instead of the default HttpUrlConnection used by rest template.</p>\n<p>This seemed to work well and fixed the garbage error response body issue.</p>\n<p><a href=\"https://howtodoinjava.com/spring-boot2/resttemplate/resttemplate-httpclient-java-config/\" rel=\"nofollow noreferrer\">This tutorial</a> helps us do the same.</p>\n"},{"tags":[],"owner":{"account_id":57788,"reputation":46110,"user_id":173149,"accept_rate":62,"display_name":"gavenkoa"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695766271,"creation_date":1695766271,"answer_id":77183689,"question_id":63887160,"body_markdown":"Get the same issue with default `HttpURLConnection` when 4xx code is returned the response body is damaged and unreadable in the exception.\r\n\r\nHad to switch to Apache HttpClient v4 library to avoid garbage.\r\n\r\nSpring suggest to avoid built-in `SimpleClientHttpRequestFactory` and use `CustomHttpComponentsClientHttpRequestFactory` instead:\r\n\r\n    @Bean\r\n    public RestTemplate indraRestTemplate() {\r\n        final RestTemplate restTemplate = restTemplateBuilder\r\n                .requestFactory(() -&gt; new BufferingClientHttpRequestFactory(new HttpComponentsClientHttpRequestFactory()))\r\n                .setConnectTimeout(Duration.ofMillis(CONNECT_TIMEOUT))\r\n                .setReadTimeout(Duration.ofMillis(READ_TIMEOUT))\r\n                .build();\r\n        restTemplate.setInterceptors(Collections.singletonList(new RestTemplateLoggingInterceptor()));\r\n        restTemplate.setErrorHandler(new RestTemplateLoggingResponseErrorHandler());\r\n        return restTemplate;\r\n    }\r\n","title":"Spring rest template garbage error response body","body":"<p>Get the same issue with default <code>HttpURLConnection</code> when 4xx code is returned the response body is damaged and unreadable in the exception.</p>\n<p>Had to switch to Apache HttpClient v4 library to avoid garbage.</p>\n<p>Spring suggest to avoid built-in <code>SimpleClientHttpRequestFactory</code> and use <code>CustomHttpComponentsClientHttpRequestFactory</code> instead:</p>\n<pre><code>@Bean\npublic RestTemplate indraRestTemplate() {\n    final RestTemplate restTemplate = restTemplateBuilder\n            .requestFactory(() -&gt; new BufferingClientHttpRequestFactory(new HttpComponentsClientHttpRequestFactory()))\n            .setConnectTimeout(Duration.ofMillis(CONNECT_TIMEOUT))\n            .setReadTimeout(Duration.ofMillis(READ_TIMEOUT))\n            .build();\n    restTemplate.setInterceptors(Collections.singletonList(new RestTemplateLoggingInterceptor()));\n    restTemplate.setErrorHandler(new RestTemplateLoggingResponseErrorHandler());\n    return restTemplate;\n}\n</code></pre>\n"}],"owner":{"account_id":11296302,"reputation":2929,"user_id":8283737,"accept_rate":89,"display_name":"Arun Gowda"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":562,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":63933496,"answer_count":2,"score":1,"last_activity_date":1695766271,"creation_date":1600096531,"question_id":63887160,"body_markdown":"I have the following rest template config:\r\n\r\n    @Bean\r\n    public RestTemplate restTemplate() {\r\n        RestTemplate template = new RestTemplate();\r\n        template.getMessageConverters().add(new ObjectToUrlEncodedConverter());\r\n        return template;\r\n    }\r\n`ObjectToUrlEncodedConverter` is copied as is from [this answer][1]\r\n\r\nAnd I call the rest API as mentioned below:\r\n\r\n    try {\r\n            response = template.exchange(uri, httpRequestObject.getMethod(), requestEntity, httpRequestObject.getResponseClass());\r\n            responseObject.setHeaders(response.getHeaders().toSingleValueMap());\r\n            responseObject.setHttpStatus(response.getStatusCode());\r\n            responseObject.setResponseBody(response.getBody());\r\n        } catch (HttpStatusCodeException ex) {\r\n            log.error(&quot;Non OK response received from server. Status code: {}, response: {}&quot;, ex.getStatusCode(), ex.getResponseBodyAsString());\r\n            throw ex;\r\n        }\r\n\r\nThe problem I am facing is, when the response is 4xx or 5xx series, The response body `ex.getResponseBodyAsString()` is giving garbage values. Something like this: `�0E%ܙ6�1�Y������hP��N��\\]8���w���+Q��\\�:S�Ȕ�������뚈M�&#39;Z��`�ml�)�@��]B͎�L؏4Ğ V�`�V�Qx�F&lt;{Q���/fZ�������S�3RNy��&gt;ć��]S���+Е=��!�x9��)Ԏ��n%������\r\n\r\n\r\nI have tried setting the `Charset` to &quot;UTF-8&quot; while getting the errorResponseBody like the following.\r\n\r\n    ex.getResponseBodyAsString(Charset.forName(&quot;UTF-8&quot;))\r\n\r\nalso, building the string from responseBodyByteArray as follows:\r\n\r\n    new String(ex.getResponseBodyAsByteArray())\r\n\r\nBut still no luck.\r\n\r\nThe same endpoint works well in Postman. Rest template seems to be messing up the error response body somehow.\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/56566601/8283737","title":"Spring rest template garbage error response body","body":"<p>I have the following rest template config:</p>\n<pre><code>@Bean\npublic RestTemplate restTemplate() {\n    RestTemplate template = new RestTemplate();\n    template.getMessageConverters().add(new ObjectToUrlEncodedConverter());\n    return template;\n}\n</code></pre>\n<p><code>ObjectToUrlEncodedConverter</code> is copied as is from <a href=\"https://stackoverflow.com/a/56566601/8283737\">this answer</a></p>\n<p>And I call the rest API as mentioned below:</p>\n<pre><code>try {\n        response = template.exchange(uri, httpRequestObject.getMethod(), requestEntity, httpRequestObject.getResponseClass());\n        responseObject.setHeaders(response.getHeaders().toSingleValueMap());\n        responseObject.setHttpStatus(response.getStatusCode());\n        responseObject.setResponseBody(response.getBody());\n    } catch (HttpStatusCodeException ex) {\n        log.error(&quot;Non OK response received from server. Status code: {}, response: {}&quot;, ex.getStatusCode(), ex.getResponseBodyAsString());\n        throw ex;\n    }\n</code></pre>\n<p>The problem I am facing is, when the response is 4xx or 5xx series, The response body <code>ex.getResponseBodyAsString()</code> is giving garbage values. Something like this: <code>�0E%ܙ6�1�Y������hP��N��\\]8���w���+Q��\\�:S�Ȕ�������뚈M�'Z��</code>�ml�)�@��]B͎�L؏4Ğ V�`�V�Qx�F&lt;{Q���/fZ�������S�3RNy��&gt;ć��]S���+Е=��!�x9��)Ԏ��n%������</p>\n<p>I have tried setting the <code>Charset</code> to &quot;UTF-8&quot; while getting the errorResponseBody like the following.</p>\n<pre><code>ex.getResponseBodyAsString(Charset.forName(&quot;UTF-8&quot;))\n</code></pre>\n<p>also, building the string from responseBodyByteArray as follows:</p>\n<pre><code>new String(ex.getResponseBodyAsByteArray())\n</code></pre>\n<p>But still no luck.</p>\n<p>The same endpoint works well in Postman. Rest template seems to be messing up the error response body somehow.</p>\n"},{"tags":["java","swing","jpanel","joptionpane"],"comments":[{"owner":{"account_id":3239634,"reputation":20214,"user_id":2732991,"accept_rate":80,"display_name":"Halvor Holsten Strand"},"score":0,"creation_date":1695716782,"post_id":77178151,"comment_id":136058172,"body_markdown":"Could the voter (closer) indicate what in particular is unclear?","body":"Could the voter (closer) indicate what in particular is unclear?"},{"owner":{"account_id":1324952,"reputation":5977,"user_id":1270000,"accept_rate":100,"display_name":"sorifiend"},"score":0,"creation_date":1695716810,"post_id":77178151,"comment_id":136058181,"body_markdown":"Not the voter/closer, but other than having the JPanel call some generic method in the parent component (That you have created/overridden) I can&#39;t think of any way to keep it oblivious.","body":"Not the voter/closer, but other than having the JPanel call some generic method in the parent component (That you have created/overridden) I can&#39;t think of any way to keep it oblivious."},{"owner":{"account_id":3239634,"reputation":20214,"user_id":2732991,"accept_rate":80,"display_name":"Halvor Holsten Strand"},"score":1,"creation_date":1695716894,"post_id":77178151,"comment_id":136058194,"body_markdown":"@sorifiend thanks. I was perhaps hoping that this mechanism (setting the &quot;result&quot;) happened through some generic event mechanism that might be present even though the code doesn&#39;t itself have access to the parent (wrapper). I have not looked into how it is coded in `JOptionPane`.","body":"@sorifiend thanks. I was perhaps hoping that this mechanism (setting the &quot;result&quot;) happened through some generic event mechanism that might be present even though the code doesn&#39;t itself have access to the parent (wrapper). I have not looked into how it is coded in <code>JOptionPane</code>."}],"answers":[{"tags":[],"owner":{"account_id":2259314,"reputation":11225,"user_id":1989769,"accept_rate":45,"display_name":"Sergiy Medvynskyy"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1695723010,"creation_date":1695723010,"answer_id":77179013,"question_id":77178151,"body_markdown":"You should modify your `mouseClicked` method as following:\r\n\r\n    @Override\r\n    public void mouseClicked(MouseEvent e) {\r\n        if (e.getClickCount() == 2 &amp;&amp; SwingUtilities.isLeftMouseButton(e) &amp;&amp; !e.isControlDown()) {\r\n            JOptionPane pane = (JOptionPane) SwingUtilities.getAncestorOfClass(JOptionPane.class, e.getComponent());\r\n            pane.setValue(JOptionPane.OK_OPTION);\r\n            Window w = SwingUtilities.getWindowAncestor(this);\r\n            w.dispose();\r\n        }\r\n    }","title":"Manually trigger OK_OPTION for a JOptionPane within a JPanel","body":"<p>You should modify your <code>mouseClicked</code> method as following:</p>\n<pre><code>@Override\npublic void mouseClicked(MouseEvent e) {\n    if (e.getClickCount() == 2 &amp;&amp; SwingUtilities.isLeftMouseButton(e) &amp;&amp; !e.isControlDown()) {\n        JOptionPane pane = (JOptionPane) SwingUtilities.getAncestorOfClass(JOptionPane.class, e.getComponent());\n        pane.setValue(JOptionPane.OK_OPTION);\n        Window w = SwingUtilities.getWindowAncestor(this);\n        w.dispose();\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6017640,"reputation":8919,"user_id":4725875,"display_name":"DevilsHnd - 退した"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1695765964,"creation_date":1695765964,"answer_id":77183669,"question_id":77178151,"body_markdown":"The following runnable code *may be* another solution for you: Read the comments in code:\r\n\r\n```\r\npublic class DoubleClickJListItemToExitDialog {\r\n\r\n    \r\n    public static void main(String[] args) {\r\n        new DoubleClickJListItemToExitDialog().startApp(args);\r\n    }\r\n    \r\n    private void startApp(String[] args) {\r\n        // Temp OptionPane Parent...\r\n        javax.swing.JFrame iFrame = new javax.swing.JFrame();\r\n        iFrame.setAlwaysOnTop(true);\r\n        iFrame.setDefaultCloseOperation(javax.swing.JFrame.DISPOSE_ON_CLOSE);\r\n        iFrame.setLocationRelativeTo(null);\r\n        \r\n        String selectedItem = null;  // To hold the selected list item String value;\r\n        \r\n        \r\n        javax.swing.JPanel panel = new javax.swing.JPanel();        // Create JPanel\r\n        panel.setPreferredSize(new java.awt.Dimension(300, 200));   // Set its size\r\n        \r\n        javax.swing.JLabel msg = new javax.swing.JLabel(            // Create the dialog message\r\n                &quot;&lt;html&gt;Select an item from the list and then select the OK&lt;br&gt;&quot;\r\n                + &quot;button.  If you like,  you can also double-click on the&lt;br&gt;&quot;\r\n                + &quot;item in the list as well to make your selection.&lt;br&gt;&lt;br&gt;&lt;/html&gt;&quot;);\r\n        panel.add(msg);     // Add message to panel\r\n        \r\n        // Create a DefaultListModel\r\n        javax.swing.DefaultListModel&lt;String&gt; model = new javax.swing.DefaultListModel&lt;&gt;();\r\n        // Add (whatever) String elements to the Model\r\n        for (int i = 0; i &lt; 20; i++) {\r\n            model.addElement(&quot;List String Item &quot; + (i+1));\r\n        }\r\n        \r\n        // Create a JList and add the DefaultListModel to it.\r\n        javax.swing.JList&lt;String&gt; list = new javax.swing.JList&lt;&gt;(model);\r\n        /* Add a MouseListener to the JList so to pick up Double-Clicks \r\n           within the mouseClicked event:             */\r\n        list.addMouseListener(new java.awt.event.MouseListener() {\r\n            @Override\r\n            public void mouseClicked(java.awt.event.MouseEvent e) {\r\n                // Was the left mouse button clicked twice\r\n                if (e.getClickCount() == 2 &amp;&amp; javax.swing.SwingUtilities.isLeftMouseButton(e)) {\r\n                    // Get the OptionPane...\r\n                    javax.swing.JOptionPane pane = (javax.swing.JOptionPane) \r\n                            javax.swing.SwingUtilities.getAncestorOfClass(\r\n                                    javax.swing.JOptionPane.class, e.getComponent());\r\n                    // Fire the OK Option button\r\n                    pane.setValue(javax.swing.JOptionPane.OK_OPTION);\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void mousePressed(java.awt.event.MouseEvent e) {\r\n                // Not in use here.\r\n            }\r\n\r\n            @Override\r\n            public void mouseReleased(java.awt.event.MouseEvent e) {\r\n                // Not in use here.\r\n            }\r\n\r\n            @Override\r\n            public void mouseEntered(java.awt.event.MouseEvent e) {\r\n                // Not in use here.\r\n            }\r\n\r\n            @Override\r\n            public void mouseExited(java.awt.event.MouseEvent e) {\r\n                // Not in use here.\r\n            }\r\n        });\r\n        \r\n        // Create a JScrollPane and add the JList to it.\r\n        javax.swing.JScrollPane sp = new javax.swing.JScrollPane(list);\r\n        // Set the desired JScrollPane Size\r\n        sp.setPreferredSize(new java.awt.Dimension(180,120));\r\n        // Add the JScrollPane to the JPanel\r\n        panel.add(sp);\r\n        \r\n        /* Display the JOptionPane Option Dialog using the temp JFrame as parent \r\n           and the newly created JPanel as its content, the desired title, the\r\n           desired dialog buttons (OK and Cancel), as a Plain Message dialog (no\r\n           icon image).        */\r\n        int res = javax.swing.JOptionPane.showOptionDialog(iFrame, panel, \r\n                &quot;Select From List:&quot;, javax.swing.JOptionPane.OK_CANCEL_OPTION, \r\n                javax.swing.JOptionPane.PLAIN_MESSAGE, null, null, null);\r\n        \r\n        // If the dialog&#39;s OK button was selected....\r\n        if (res == javax.swing.JOptionPane.OK_OPTION) {\r\n            // Get the selected JList element and store in `selectedItem`:\r\n            selectedItem = list.getSelectedValue();\r\n            // Open a messge dialog to display the selected JList item:\r\n            javax.swing.JOptionPane.showMessageDialog(iFrame, \r\n                    &quot;&lt;html&gt;Selected List Item Was:&lt;br&gt;&lt;br&gt;&lt;center&gt;&lt;font size=&#39;5&#39; color=blue&gt;&lt;b&gt;&quot; \r\n                    + selectedItem + &quot;&lt;/b&gt;&lt;/font&gt;&lt;/center&gt;&lt;br&gt;&lt;/html&gt;&quot;, &quot;Your Selection&quot;, \r\n                    javax.swing.JOptionPane.INFORMATION_MESSAGE);\r\n        }\r\n        iFrame.dispose();  // Dispose of the temp JFrame Parent.\r\n    }\r\n}\r\n```","title":"Manually trigger OK_OPTION for a JOptionPane within a JPanel","body":"<p>The following runnable code <em>may be</em> another solution for you: Read the comments in code:</p>\n<pre><code>public class DoubleClickJListItemToExitDialog {\n\n    \n    public static void main(String[] args) {\n        new DoubleClickJListItemToExitDialog().startApp(args);\n    }\n    \n    private void startApp(String[] args) {\n        // Temp OptionPane Parent...\n        javax.swing.JFrame iFrame = new javax.swing.JFrame();\n        iFrame.setAlwaysOnTop(true);\n        iFrame.setDefaultCloseOperation(javax.swing.JFrame.DISPOSE_ON_CLOSE);\n        iFrame.setLocationRelativeTo(null);\n        \n        String selectedItem = null;  // To hold the selected list item String value;\n        \n        \n        javax.swing.JPanel panel = new javax.swing.JPanel();        // Create JPanel\n        panel.setPreferredSize(new java.awt.Dimension(300, 200));   // Set its size\n        \n        javax.swing.JLabel msg = new javax.swing.JLabel(            // Create the dialog message\n                &quot;&lt;html&gt;Select an item from the list and then select the OK&lt;br&gt;&quot;\n                + &quot;button.  If you like,  you can also double-click on the&lt;br&gt;&quot;\n                + &quot;item in the list as well to make your selection.&lt;br&gt;&lt;br&gt;&lt;/html&gt;&quot;);\n        panel.add(msg);     // Add message to panel\n        \n        // Create a DefaultListModel\n        javax.swing.DefaultListModel&lt;String&gt; model = new javax.swing.DefaultListModel&lt;&gt;();\n        // Add (whatever) String elements to the Model\n        for (int i = 0; i &lt; 20; i++) {\n            model.addElement(&quot;List String Item &quot; + (i+1));\n        }\n        \n        // Create a JList and add the DefaultListModel to it.\n        javax.swing.JList&lt;String&gt; list = new javax.swing.JList&lt;&gt;(model);\n        /* Add a MouseListener to the JList so to pick up Double-Clicks \n           within the mouseClicked event:             */\n        list.addMouseListener(new java.awt.event.MouseListener() {\n            @Override\n            public void mouseClicked(java.awt.event.MouseEvent e) {\n                // Was the left mouse button clicked twice\n                if (e.getClickCount() == 2 &amp;&amp; javax.swing.SwingUtilities.isLeftMouseButton(e)) {\n                    // Get the OptionPane...\n                    javax.swing.JOptionPane pane = (javax.swing.JOptionPane) \n                            javax.swing.SwingUtilities.getAncestorOfClass(\n                                    javax.swing.JOptionPane.class, e.getComponent());\n                    // Fire the OK Option button\n                    pane.setValue(javax.swing.JOptionPane.OK_OPTION);\n                }\n            }\n\n            @Override\n            public void mousePressed(java.awt.event.MouseEvent e) {\n                // Not in use here.\n            }\n\n            @Override\n            public void mouseReleased(java.awt.event.MouseEvent e) {\n                // Not in use here.\n            }\n\n            @Override\n            public void mouseEntered(java.awt.event.MouseEvent e) {\n                // Not in use here.\n            }\n\n            @Override\n            public void mouseExited(java.awt.event.MouseEvent e) {\n                // Not in use here.\n            }\n        });\n        \n        // Create a JScrollPane and add the JList to it.\n        javax.swing.JScrollPane sp = new javax.swing.JScrollPane(list);\n        // Set the desired JScrollPane Size\n        sp.setPreferredSize(new java.awt.Dimension(180,120));\n        // Add the JScrollPane to the JPanel\n        panel.add(sp);\n        \n        /* Display the JOptionPane Option Dialog using the temp JFrame as parent \n           and the newly created JPanel as its content, the desired title, the\n           desired dialog buttons (OK and Cancel), as a Plain Message dialog (no\n           icon image).        */\n        int res = javax.swing.JOptionPane.showOptionDialog(iFrame, panel, \n                &quot;Select From List:&quot;, javax.swing.JOptionPane.OK_CANCEL_OPTION, \n                javax.swing.JOptionPane.PLAIN_MESSAGE, null, null, null);\n        \n        // If the dialog's OK button was selected....\n        if (res == javax.swing.JOptionPane.OK_OPTION) {\n            // Get the selected JList element and store in `selectedItem`:\n            selectedItem = list.getSelectedValue();\n            // Open a messge dialog to display the selected JList item:\n            javax.swing.JOptionPane.showMessageDialog(iFrame, \n                    &quot;&lt;html&gt;Selected List Item Was:&lt;br&gt;&lt;br&gt;&lt;center&gt;&lt;font size='5' color=blue&gt;&lt;b&gt;&quot; \n                    + selectedItem + &quot;&lt;/b&gt;&lt;/font&gt;&lt;/center&gt;&lt;br&gt;&lt;/html&gt;&quot;, &quot;Your Selection&quot;, \n                    javax.swing.JOptionPane.INFORMATION_MESSAGE);\n        }\n        iFrame.dispose();  // Dispose of the temp JFrame Parent.\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":3239634,"reputation":20214,"user_id":2732991,"accept_rate":80,"display_name":"Halvor Holsten Strand"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":61,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"accepted_answer_id":77179013,"answer_count":2,"score":1,"last_activity_date":1695765964,"creation_date":1695716012,"question_id":77178151,"body_markdown":"I&#39;ve got some utility code that presents a `JList` inside a `JPanel` that is used inside a `JOptionPane.showOptionDialog`, similar to this:\r\n\r\n```java\r\nSelectionPanel&lt;T&gt; panel = new SelectionPanel&lt;&gt;(allValues, initiallySelectedElement, multipleSelection);\r\nint action = JOptionPane.showOptionDialog(parent, panel, title, JOptionPane.OK_CANCEL_OPTION, JOptionPane.PLAIN_MESSAGE, null, null, null);\r\nif (action == JOptionPane.OK_OPTION) {\r\n    // Do stuff\r\n}\r\n```\r\n\r\nThis works well, but I&#39;ve had a feature request to be able to double click in the list to add the clicked element. The panel has no knowledge of being wrapped in a `JOptionPane`, and ideally I would like to keep it that way.\r\n\r\nI&#39;ve found that I can close the dialog using the following code:\r\n\r\n```java\r\n@Override\r\npublic void mouseClicked(MouseEvent e) {\r\n    if (e.getClickCount() == 2 &amp;&amp; !e.isControlDown()) {\r\n        Window w = SwingUtilities.getWindowAncestor(this);\r\n        w.setVisible(false);\r\n    }\r\n}\r\n```\r\n\r\nHowever this closes it without `action == JOptionPane.OK_OPTION` being `true`.\r\n\r\nIs there any generic way of signaling the `OK_OPTION` action and closing, from a `JPanel` that is oblivious to being inside a `JOptionPane`?","title":"Manually trigger OK_OPTION for a JOptionPane within a JPanel","body":"<p>I've got some utility code that presents a <code>JList</code> inside a <code>JPanel</code> that is used inside a <code>JOptionPane.showOptionDialog</code>, similar to this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>SelectionPanel&lt;T&gt; panel = new SelectionPanel&lt;&gt;(allValues, initiallySelectedElement, multipleSelection);\nint action = JOptionPane.showOptionDialog(parent, panel, title, JOptionPane.OK_CANCEL_OPTION, JOptionPane.PLAIN_MESSAGE, null, null, null);\nif (action == JOptionPane.OK_OPTION) {\n    // Do stuff\n}\n</code></pre>\n<p>This works well, but I've had a feature request to be able to double click in the list to add the clicked element. The panel has no knowledge of being wrapped in a <code>JOptionPane</code>, and ideally I would like to keep it that way.</p>\n<p>I've found that I can close the dialog using the following code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Override\npublic void mouseClicked(MouseEvent e) {\n    if (e.getClickCount() == 2 &amp;&amp; !e.isControlDown()) {\n        Window w = SwingUtilities.getWindowAncestor(this);\n        w.setVisible(false);\n    }\n}\n</code></pre>\n<p>However this closes it without <code>action == JOptionPane.OK_OPTION</code> being <code>true</code>.</p>\n<p>Is there any generic way of signaling the <code>OK_OPTION</code> action and closing, from a <code>JPanel</code> that is oblivious to being inside a <code>JOptionPane</code>?</p>\n"},{"tags":["java","servlets","jakarta-ee","portlet"],"answers":[{"tags":[],"owner":{"account_id":59126,"reputation":5430,"user_id":176958,"accept_rate":89,"display_name":"whatnick"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1253945182,"creation_date":1253945182,"answer_id":1480544,"question_id":1480528,"body_markdown":"Servlets have a java definition (applications which handle HTTP GET/POST requests), while portlets have a user interface definition.A component performing a specific function similar to the windows vista widgets or a lot of components used in stackoverflow here. They need not necessarily be backed by servlets on the server side. But the Portlet standard was developed alongside java. O&#39;Reilly has a nice [tutorial][1].\r\n\r\n\r\n  [1]: http://oreilly.com/pub/a/java/archive/what-is-a-portlet.html","title":"what is the difference between a portlet and a servlet?","body":"<p>Servlets have a java definition (applications which handle HTTP GET/POST requests), while portlets have a user interface definition.A component performing a specific function similar to the windows vista widgets or a lot of components used in stackoverflow here. They need not necessarily be backed by servlets on the server side. But the Portlet standard was developed alongside java. O'Reilly has a nice <a href=\"http://oreilly.com/pub/a/java/archive/what-is-a-portlet.html\" rel=\"noreferrer\">tutorial</a>.</p>\n"},{"tags":[],"owner":{"account_id":30285,"reputation":55210,"user_id":82511,"accept_rate":71,"display_name":"djna"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1253945193,"creation_date":1253945193,"answer_id":1480545,"question_id":1480528,"body_markdown":"\r\nBoth portlets and servlets receive an http request and return a response, which is usally some HTML that can be rendered by a browser. A portlet is used in the context of a &quot;Portal&quot;, the idea being that a single page seen by the user has lots of parts, think tiles, each coming from a different portlet.\r\n\r\nNow, you can get that &quot;tiled&quot; effect from normal servets (See Struts + Tiles for an example of how) the extra bit from the portlets is that the portlets are in a richer environment provided by the Portal, extra APIs are provided so that what is displayed by any portlet can be configured by individual users to their preferences, and the porlets can communicate with each other - press a button in one, something happens in a another.","title":"what is the difference between a portlet and a servlet?","body":"<p>Both portlets and servlets receive an http request and return a response, which is usally some HTML that can be rendered by a browser. A portlet is used in the context of a \"Portal\", the idea being that a single page seen by the user has lots of parts, think tiles, each coming from a different portlet.</p>\n\n<p>Now, you can get that \"tiled\" effect from normal servets (See Struts + Tiles for an example of how) the extra bit from the portlets is that the portlets are in a richer environment provided by the Portal, extra APIs are provided so that what is displayed by any portlet can be configured by individual users to their preferences, and the porlets can communicate with each other - press a button in one, something happens in a another.</p>\n"},{"tags":[],"owner":{"account_id":23666,"reputation":19288,"user_id":59470,"accept_rate":79,"display_name":"topchef"},"down_vote_count":1,"up_vote_count":71,"is_accepted":true,"score":70,"last_activity_date":1339477118,"creation_date":1253945639,"answer_id":1480557,"question_id":1480528,"body_markdown":"Portlets are part of JSR-168 standard that regulates portal containers and components. This is different standard from standards for web containers (and servlets). Though there are definitely strong parallels between these two standards they differ in containers, APIs, life cycle, configuration, deployment, etc. \r\n\r\nThe main difference between portlet vs. servlet could be that while servlet always responds to single type of action - *request*, portlet (due to nature of its life cycle and stronger container bindings) has to respond to two types of actions: *render* and *request*. There are of course more to it but I found this as the core difference between the two when I studied portal development.","title":"what is the difference between a portlet and a servlet?","body":"<p>Portlets are part of JSR-168 standard that regulates portal containers and components. This is different standard from standards for web containers (and servlets). Though there are definitely strong parallels between these two standards they differ in containers, APIs, life cycle, configuration, deployment, etc. </p>\n\n<p>The main difference between portlet vs. servlet could be that while servlet always responds to single type of action - <em>request</em>, portlet (due to nature of its life cycle and stronger container bindings) has to respond to two types of actions: <em>render</em> and <em>request</em>. There are of course more to it but I found this as the core difference between the two when I studied portal development.</p>\n"},{"tags":[],"owner":{"account_id":697990,"reputation":41,"user_id":572541,"display_name":"Liyakath"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1294826973,"creation_date":1294826973,"answer_id":4667521,"question_id":1480528,"body_markdown":"Essentially, Servlets provide content that normally takes up the whole page in a browser (unless you&#39;re using frames), and portlets provide content that is wrapped by a window. With portlets, you can have multiple portlets side by side with one another and each one can provide content and functionality that is different from the other. A portlet can provide the complete interaction for one type of application, while another portlet can provide content for another type of application. The portal can provide some house keeping functionality and secured single point of entry to all of the portlets on a page. As for the particulars (similarities/differences) between them, please continue reading. Here are some similarities: Servlets and portlets are web based components that utilize Java for their implementation Portlets are managed by a portlet container similar to a servlet container Both of these components generate content, which can be static or dynamic","title":"what is the difference between a portlet and a servlet?","body":"<p>Essentially, Servlets provide content that normally takes up the whole page in a browser (unless you're using frames), and portlets provide content that is wrapped by a window. With portlets, you can have multiple portlets side by side with one another and each one can provide content and functionality that is different from the other. A portlet can provide the complete interaction for one type of application, while another portlet can provide content for another type of application. The portal can provide some house keeping functionality and secured single point of entry to all of the portlets on a page. As for the particulars (similarities/differences) between them, please continue reading. Here are some similarities: Servlets and portlets are web based components that utilize Java for their implementation Portlets are managed by a portlet container similar to a servlet container Both of these components generate content, which can be static or dynamic</p>\n"},{"tags":[],"owner":{"account_id":339024,"reputation":5103,"user_id":668240,"accept_rate":76,"display_name":"Ashok Goli"},"down_vote_count":0,"up_vote_count":145,"is_accepted":false,"score":145,"last_activity_date":1589982879,"creation_date":1326981634,"answer_id":8927313,"question_id":1480528,"body_markdown":"***Enhanced from Source***: [Servlets Vs Portlets](http://fanatech.wordpress.com/servlets-vs-portlets/)\n\n&gt; **Similarities** \n&gt; \n&gt; 1. Servlets and Portlets are web based components which use Java for\n&gt; their implementation.\n&gt; \n&gt; 1. Portlets are managed by a portlet container just like servlet is\n&gt; managed by servlet container.\n&gt; \n&gt; 1. Both static and dynamic content can be generated by Portlets and\n&gt; Servlets.\n&gt; \n&gt; 1. The life cycle of portlets and servlets is controlled by the container\n&gt; \n&gt; 1. The client/server model is used for both servlets and portlets\n&gt; \n&gt; 1. The packaging and deployment are essentially the same, WAR/EARs.\n&gt;\n&gt; 1. Application Session exists in both Servlet and Portlet containers. It is one of the ways of of sharing data (crude Inter-Portlet Communication) from the render phase to the action phase (or any lower phases) in the portlet containers.\n&gt; 1. Both Servlets and Portlets use similar server / VM environments that support it. Although, some additional configurations might needed in case of portlets to make it tick\n&gt; 1. The build/DI tools are similar for both - Ant, Maven, Gradle, etc are all supported. Mostly :) - This has changed a bit with Liferay 7.\n\n-----\n\n&gt; **Dissimilarities** \n&gt; \n&gt; 1. Servlets can render complete web pages, whereas portlets renders html\n&gt; fragments. These fragments are aggregated by the portal into a\n&gt; complete web page.\n&gt; \n&gt; 1. The content type of JSR 168 portlets can be only cHTML, XHTML, WML. It\n&gt; does not support other content types.\n&gt; \n&gt; 1. Portlets are not allowed to generate HTML code that contains tags such\n&gt; as body, frame, frameset, head, html, or title.\n&gt; \n&gt; 1. A Portlet unlike a servlet doesn’t have URL attached to it so it\n&gt; cannot be accessed directly. Access is only through the portal page\n&gt; which holds the portlet.\n&gt; \n&gt; 1. Portlets can be provided with controls to manipulate its window states\n&gt; or portlet modes.\n&gt; \n&gt; 1. Multiple instances of a single portlet can be placed onto the same\n&gt; page.\n&gt; \n&gt; 1. Portlets support persistent configuration and customization, profile\n&gt; information.\n&gt; \n&gt; 1. Portlets can have two types of request viz. render request and action\n&gt; request.\n&gt; \n&gt; 1. Portlets have two scopes within session; application scope for\n&gt; communication across portlets and portlet scope for intra portlet\n&gt; communication.\n&gt; \n&gt; 1. Portlet cannot set the character set encoding of the response nor can\n&gt; it set the HTTP response headers.\n&gt; \n&gt; 1. Portlets doesn’t have access to request URL. So it cannot access the\n&gt; query parameters appended to the URL. Portlets cannot set cookies.\n&gt; \n&gt; 1. Typical methods of Portlet API are `doView()`, `doEdit()`, `doHelp()` and\n&gt; `processAction()` while those of servlet are `service()`, `doPost()`,\n&gt; `doGet()`.\n&gt;\n&gt; 1. *Servlet Specifications* - JSR 369(Servlet 4.0), JSR 340(Servlet 3.1), JSR 315(Servlet 3.0), JSR 154(Servlet 2.5 &amp; 2.4).\n&gt; *Portlet Specifications* - JSR 168(Portlet Spec v1.0), JSR 286(Portlet Spec v2.0), JSR 362(Portlet Spec v3.0)\n&gt;\n&gt; 1. Deployment of Portlets involves [different approach][1] than a Servlet application. Some Providers (Liferay/Alfresco/WebSphere) support hot-deploying of portlets without the need to restart the server which is not possible in case of servlets without modularizing the application using special libraries such as OSGi.\n\n----\n\n**Edit** &lt;sub&gt;(From comments)&lt;/sub&gt;\n\nA Portlet container is built on a Servlet container. So ultimately it can be said that the portlet runs on a Servlet Container. But while developing apps, we view a portlet container separately from the Servlet/Java EE container.\n\n  [1]: https://stackoverflow.com/questions/5260119/how-to-deploy-portlets-to-liferay","title":"what is the difference between a portlet and a servlet?","body":"<p><em><strong>Enhanced from Source</strong></em>: <a href=\"http://fanatech.wordpress.com/servlets-vs-portlets/\" rel=\"noreferrer\">Servlets Vs Portlets</a></p>\n<blockquote>\n<p><strong>Similarities</strong></p>\n<ol>\n<li><p>Servlets and Portlets are web based components which use Java for\ntheir implementation.</p>\n</li>\n<li><p>Portlets are managed by a portlet container just like servlet is\nmanaged by servlet container.</p>\n</li>\n<li><p>Both static and dynamic content can be generated by Portlets and\nServlets.</p>\n</li>\n<li><p>The life cycle of portlets and servlets is controlled by the container</p>\n</li>\n<li><p>The client/server model is used for both servlets and portlets</p>\n</li>\n<li><p>The packaging and deployment are essentially the same, WAR/EARs.</p>\n</li>\n<li><p>Application Session exists in both Servlet and Portlet containers. It is one of the ways of of sharing data (crude Inter-Portlet Communication) from the render phase to the action phase (or any lower phases) in the portlet containers.</p>\n</li>\n<li><p>Both Servlets and Portlets use similar server / VM environments that support it. Although, some additional configurations might needed in case of portlets to make it tick</p>\n</li>\n<li><p>The build/DI tools are similar for both - Ant, Maven, Gradle, etc are all supported. Mostly :) - This has changed a bit with Liferay 7.</p>\n</li>\n</ol>\n</blockquote>\n<hr />\n<blockquote>\n<p><strong>Dissimilarities</strong></p>\n<ol>\n<li><p>Servlets can render complete web pages, whereas portlets renders html\nfragments. These fragments are aggregated by the portal into a\ncomplete web page.</p>\n</li>\n<li><p>The content type of JSR 168 portlets can be only cHTML, XHTML, WML. It\ndoes not support other content types.</p>\n</li>\n<li><p>Portlets are not allowed to generate HTML code that contains tags such\nas body, frame, frameset, head, html, or title.</p>\n</li>\n<li><p>A Portlet unlike a servlet doesn’t have URL attached to it so it\ncannot be accessed directly. Access is only through the portal page\nwhich holds the portlet.</p>\n</li>\n<li><p>Portlets can be provided with controls to manipulate its window states\nor portlet modes.</p>\n</li>\n<li><p>Multiple instances of a single portlet can be placed onto the same\npage.</p>\n</li>\n<li><p>Portlets support persistent configuration and customization, profile\ninformation.</p>\n</li>\n<li><p>Portlets can have two types of request viz. render request and action\nrequest.</p>\n</li>\n<li><p>Portlets have two scopes within session; application scope for\ncommunication across portlets and portlet scope for intra portlet\ncommunication.</p>\n</li>\n<li><p>Portlet cannot set the character set encoding of the response nor can\nit set the HTTP response headers.</p>\n</li>\n<li><p>Portlets doesn’t have access to request URL. So it cannot access the\nquery parameters appended to the URL. Portlets cannot set cookies.</p>\n</li>\n<li><p>Typical methods of Portlet API are <code>doView()</code>, <code>doEdit()</code>, <code>doHelp()</code> and\n<code>processAction()</code> while those of servlet are <code>service()</code>, <code>doPost()</code>,\n<code>doGet()</code>.</p>\n</li>\n<li><p><em>Servlet Specifications</em> - JSR 369(Servlet 4.0), JSR 340(Servlet 3.1), JSR 315(Servlet 3.0), JSR 154(Servlet 2.5 &amp; 2.4).\n<em>Portlet Specifications</em> - JSR 168(Portlet Spec v1.0), JSR 286(Portlet Spec v2.0), JSR 362(Portlet Spec v3.0)</p>\n</li>\n<li><p>Deployment of Portlets involves <a href=\"https://stackoverflow.com/questions/5260119/how-to-deploy-portlets-to-liferay\">different approach</a> than a Servlet application. Some Providers (Liferay/Alfresco/WebSphere) support hot-deploying of portlets without the need to restart the server which is not possible in case of servlets without modularizing the application using special libraries such as OSGi.</p>\n</li>\n</ol>\n</blockquote>\n<hr />\n<p><strong>Edit</strong> <sub>(From comments)</sub></p>\n<p>A Portlet container is built on a Servlet container. So ultimately it can be said that the portlet runs on a Servlet Container. But while developing apps, we view a portlet container separately from the Servlet/Java EE container.</p>\n"}],"owner":{"account_id":879951,"reputation":1063,"user_id":163967,"display_name":"Rajesh"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":99852,"favorite_count":0,"down_vote_count":0,"up_vote_count":106,"accepted_answer_id":1480557,"answer_count":5,"score":106,"last_activity_date":1695765201,"creation_date":1253944663,"question_id":1480528,"body_markdown":"I have been asked to work on portlets and portals, and I want to know the differences between a portlet and a servlet.\r\n\r\nHow and where does a portlet differ (maybe functionally) from a servlet?","title":"what is the difference between a portlet and a servlet?","body":"<p>I have been asked to work on portlets and portals, and I want to know the differences between a portlet and a servlet.</p>\n<p>How and where does a portlet differ (maybe functionally) from a servlet?</p>\n"},{"tags":["java","recursion","jgrasp"],"comments":[{"owner":{"account_id":129540,"reputation":210847,"user_id":328193,"accept_rate":91,"display_name":"David"},"score":2,"creation_date":1695759624,"post_id":77183160,"comment_id":136066836,"body_markdown":"Welcome to Stack Overflow!  Relevant code and error messages need to be included in your question *as text*, [not as pictures of text](https://meta.stackoverflow.com/q/285551/328193).  Just linking to screen shots makes it more difficult for people to help you.  To learn more about this community and how we can help you, please start with the [tour] and read [ask] and its linked resources.","body":"Welcome to Stack Overflow!  Relevant code and error messages need to be included in your question <i>as text</i>, <a href=\"https://meta.stackoverflow.com/q/285551/328193\">not as pictures of text</a>.  Just linking to screen shots makes it more difficult for people to help you.  To learn more about this community and how we can help you, please start with the <a href=\"https://stackoverflow.com/tour\">tour</a> and read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> and its linked resources."},{"owner":{"account_id":29374491,"reputation":5,"user_id":22506381,"display_name":"RWorker"},"score":0,"creation_date":1695760197,"post_id":77183160,"comment_id":136066927,"body_markdown":"David, I don&#39;t know how to put my code in the question here unlike other users do and my professor for Finger Lakes Community College always wants me to take a screenshot and submit the question here.","body":"David, I don&#39;t know how to put my code in the question here unlike other users do and my professor for Finger Lakes Community College always wants me to take a screenshot and submit the question here."},{"owner":{"account_id":129540,"reputation":210847,"user_id":328193,"accept_rate":91,"display_name":"David"},"score":5,"creation_date":1695760463,"post_id":77183160,"comment_id":136066984,"body_markdown":"*&quot;I don&#39;t know how to put my code in the question here&quot;* - Text can be copied and pasted.  If the formatting is a struggle, the community can help with that because questions are publicly editable.  *&quot;my professor [...] always wants me to take a screenshot and submit the question here&quot;* - Your professor has misinformed you of how this community works.  Your professor is also encouraged to start with the [tour] and read [ask] and its linked resources.","body":"<i>&quot;I don&#39;t know how to put my code in the question here&quot;</i> - Text can be copied and pasted.  If the formatting is a struggle, the community can help with that because questions are publicly editable.  <i>&quot;my professor [...] always wants me to take a screenshot and submit the question here&quot;</i> - Your professor has misinformed you of how this community works.  Your professor is also encouraged to start with the <a href=\"https://stackoverflow.com/tour\">tour</a> and read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> and its linked resources."},{"owner":{"account_id":29374491,"reputation":5,"user_id":22506381,"display_name":"RWorker"},"score":0,"creation_date":1695760919,"post_id":77183160,"comment_id":136067055,"body_markdown":"David, I meant on my learning platform which is called Brightspace by &quot;submit the question here&quot; because it only relates to Brightspace","body":"David, I meant on my learning platform which is called Brightspace by &quot;submit the question here&quot; because it only relates to Brightspace"},{"owner":{"account_id":28104689,"reputation":512,"user_id":21473475,"display_name":"Arfur Narf"},"score":1,"creation_date":1695766475,"post_id":77183160,"comment_id":136067759,"body_markdown":"Your assignment **tells** you how to approach the solution. &quot;Using Newton&#39;s method...&quot; which it then explains in detail.  And then the assignment says &quot;use recursion&quot;. It is all spelled out.","body":"Your assignment <b>tells</b> you how to approach the solution. &quot;Using Newton&#39;s method...&quot; which it then explains in detail.  And then the assignment says &quot;use recursion&quot;. It is all spelled out."}],"answers":[{"tags":[],"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1695764504,"creation_date":1695763905,"answer_id":77183523,"question_id":77183160,"body_markdown":"&gt;Is there a way to make a sqrt function without using Math.sqrt ()and without loops?\r\nYes.\r\n\r\nYou can use [Newton&#39;s method](https://en.wikipedia.org/wiki/Newton%27s_method) in combination with recursion.\r\n\r\nConsider if you want to find the **sqrt(10)**.  Then the equation\r\n**f(x) = x&lt;sup&gt;2&lt;/sup&gt; - 10** will solve for **x** when **f(x) = 0**.\r\n\r\nThe first  derivative of **f(x)** is  **f&#39;(x) = 2*x**.  So read the wiki page apply **x, f(x), and  f&#39;(x)** as described.\r\n\r\n- first do it in a loop to ensure you have the algorithm down.\r\n- then do it recursively to fulfill the requirements.\r\n- in both cases you should stop the iteration when **|x&lt;sub&gt;n+1&lt;/sub&gt; - x&lt;sub&gt;n&lt;/sub&gt;|** are within a reasonable tolerance.\r\n- finally, you will want to use some variable in place of **10** in the above mentioned equations to take the sqrt root of any number.\r\n","title":"Is there a way to make a sqrt function without using Math.sqrt ()and without loops?","body":"<blockquote>\n<p>Is there a way to make a sqrt function without using Math.sqrt ()and without loops?\nYes.</p>\n</blockquote>\n<p>You can use <a href=\"https://en.wikipedia.org/wiki/Newton%27s_method\" rel=\"nofollow noreferrer\">Newton's method</a> in combination with recursion.</p>\n<p>Consider if you want to find the <strong>sqrt(10)</strong>.  Then the equation\n<strong>f(x) = x<sup>2</sup> - 10</strong> will solve for <strong>x</strong> when <strong>f(x) = 0</strong>.</p>\n<p>The first  derivative of <strong>f(x)</strong> is  <strong>f'(x) = 2*x</strong>.  So read the wiki page apply <strong>x, f(x), and  f'(x)</strong> as described.</p>\n<ul>\n<li>first do it in a loop to ensure you have the algorithm down.</li>\n<li>then do it recursively to fulfill the requirements.</li>\n<li>in both cases you should stop the iteration when <strong>|x<sub>n+1</sub> - x<sub>n</sub>|</strong> are within a reasonable tolerance.</li>\n<li>finally, you will want to use some variable in place of <strong>10</strong> in the above mentioned equations to take the sqrt root of any number.</li>\n</ul>\n"}],"owner":{"account_id":29374491,"reputation":5,"user_id":22506381,"display_name":"RWorker"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":109,"favorite_count":0,"down_vote_count":3,"up_vote_count":1,"closed_date":1696529793,"accepted_answer_id":77183523,"answer_count":1,"score":-2,"last_activity_date":1695764504,"creation_date":1695759426,"question_id":77183160,"body_markdown":"I&#39;m trying to make program that uses recursive for a college homework but teacher does not want me to use loops for the problems but this is a jGRASP java program.\r\nAnd this is the homework:[homework attachment][1]\r\n\r\n[My code](https://i.stack.imgur.com/qU4Dz.png)\r\n\r\nI tried this code: [my code](https://i.stack.imgur.com/3FyNX.png)\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-js --&gt;\r\n\r\n    import java.util.Scanner;\r\n\r\n    public class SquareRoot {\r\n     public static void main(String[] args) {\r\n       Scanner scanner = new Scanner(System.in);\r\n       System.out.println(&quot;Enter a number: &quot;);\r\n       int x = scanner.nextInt();\r\n       System.out.println(&quot;Enter a number: &quot;);\r\n       int y = scanner.nextInt();\r\n       \r\n       System.out.println(&quot;&quot; + powS(x));\r\n       System.out.println(&quot;&quot; + powNS(y));\r\n     }\r\n     \r\n     public static int powS(int x) {\r\n       int result = (2 * x) - 1;\r\n       if (x == 0) {\r\n         return 0;\r\n       }\r\n       return result + powS(x-1);\r\n     }\r\n     \r\n     public static int powNS(int y) {\r\n       int solution = (2 * y) - 1;\r\n       if (y == 0) {\r\n         return 0;\r\n       }\r\n       return solution + powS(y-1);\r\n     }\r\n    }\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\nAnd the square function worked but the only problem is that I can&#39;t figure out how to change the last method to make a square root function without loops(no while loops and no for loops)\r\n\r\nI tried this code: [my code](https://i.stack.imgur.com/CoVyj.png)\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-js --&gt;\r\n\r\n    import java.util.Scanner;\r\n\r\n    public class SquareRoot9 {\r\n     public static void main(String[] args) {\r\n       Scanner scanner = new Scanner(System.in);\r\n       System.out.println(&quot;Enter a number: &quot;);\r\n       int x = scanner.nextInt();\r\n       System.out.println(&quot;Enter a number: &quot;);\r\n       int y = scanner.nextInt();\r\n       \r\n       System.out.println(&quot;&quot; + powS(x));\r\n       System.out.println(&quot;&quot; + powNS(y));\r\n     }\r\n     \r\n     public static int powS(int x) {\r\n       int result = 2 * (x-1);\r\n       if (x == 0) {\r\n         return 0;\r\n       }\r\n       return result * powS(x-1);\r\n     }\r\n     \r\n     public static int powNS(int y) {\r\n       int solution = 2 * (y-1);\r\n       if (y == 0) {\r\n         return 1;\r\n       }\r\n       if (y == 1) {\r\n         return solution;\r\n       }\r\n       return solution / powNS(y-1);\r\n     }\r\n    }\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\nbut there&#39;s an error\r\n\r\nAnd then I tried this code: [my code]\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-js --&gt;\r\n\r\n    import java.util.Scanner;\r\n\r\n    public class SquareRoot10 {\r\n     public static void main(String[] args) {\r\n       Scanner scanner = new Scanner(System.in);\r\n       System.out.println(&quot;Enter a number: &quot;);\r\n       int x = scanner.nextInt();\r\n       System.out.println(&quot;Enter a number: &quot;);\r\n       int y = scanner.nextInt();\r\n       \r\n       System.out.println(&quot;&quot; + powS(x));\r\n       System.out.println(&quot;&quot; + powNS(y));\r\n     }\r\n     \r\n     public static int powS(int x) {\r\n       int result = (2 * x) - 1;\r\n       if (x == 0) {\r\n         return 0;\r\n       }\r\n       return result + powS(x-1);\r\n     }\r\n     \r\n     public static int powNS(int y) {\r\n       int solution = (2 / y) - 1;\r\n       if (y == 0) {\r\n         return 0;\r\n       }\r\n       return solution + powS(y-1);\r\n     }\r\n    }\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n (https://i.stack.imgur.com/2ZRQV.png) and it worked but the code didn&#39;t retrieve the answer I&#39;m looking for and the code says I got 625 when I was looking for the square root of the number.\r\n\r\nDoes anyone know how to solve or change the last method so I can get the square root of a number for a jGRASP java program?\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/16zn8.jpg","title":"Is there a way to make a sqrt function without using Math.sqrt ()and without loops?","body":"<p>I'm trying to make program that uses recursive for a college homework but teacher does not want me to use loops for the problems but this is a jGRASP java program.\nAnd this is the homework:<a href=\"https://i.stack.imgur.com/16zn8.jpg\" rel=\"nofollow noreferrer\">homework attachment</a></p>\n<p><a href=\"https://i.stack.imgur.com/qU4Dz.png\" rel=\"nofollow noreferrer\">My code</a></p>\n<p>I tried this code: <a href=\"https://i.stack.imgur.com/3FyNX.png\" rel=\"nofollow noreferrer\">my code</a></p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>import java.util.Scanner;\n\npublic class SquareRoot {\n public static void main(String[] args) {\n   Scanner scanner = new Scanner(System.in);\n   System.out.println(\"Enter a number: \");\n   int x = scanner.nextInt();\n   System.out.println(\"Enter a number: \");\n   int y = scanner.nextInt();\n   \n   System.out.println(\"\" + powS(x));\n   System.out.println(\"\" + powNS(y));\n }\n \n public static int powS(int x) {\n   int result = (2 * x) - 1;\n   if (x == 0) {\n     return 0;\n   }\n   return result + powS(x-1);\n }\n \n public static int powNS(int y) {\n   int solution = (2 * y) - 1;\n   if (y == 0) {\n     return 0;\n   }\n   return solution + powS(y-1);\n }\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n<p>And the square function worked but the only problem is that I can't figure out how to change the last method to make a square root function without loops(no while loops and no for loops)</p>\n<p>I tried this code: <a href=\"https://i.stack.imgur.com/CoVyj.png\" rel=\"nofollow noreferrer\">my code</a></p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>import java.util.Scanner;\n\npublic class SquareRoot9 {\n public static void main(String[] args) {\n   Scanner scanner = new Scanner(System.in);\n   System.out.println(\"Enter a number: \");\n   int x = scanner.nextInt();\n   System.out.println(\"Enter a number: \");\n   int y = scanner.nextInt();\n   \n   System.out.println(\"\" + powS(x));\n   System.out.println(\"\" + powNS(y));\n }\n \n public static int powS(int x) {\n   int result = 2 * (x-1);\n   if (x == 0) {\n     return 0;\n   }\n   return result * powS(x-1);\n }\n \n public static int powNS(int y) {\n   int solution = 2 * (y-1);\n   if (y == 0) {\n     return 1;\n   }\n   if (y == 1) {\n     return solution;\n   }\n   return solution / powNS(y-1);\n }\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n<p>but there's an error</p>\n<p>And then I tried this code: [my code]</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>import java.util.Scanner;\n\npublic class SquareRoot10 {\n public static void main(String[] args) {\n   Scanner scanner = new Scanner(System.in);\n   System.out.println(\"Enter a number: \");\n   int x = scanner.nextInt();\n   System.out.println(\"Enter a number: \");\n   int y = scanner.nextInt();\n   \n   System.out.println(\"\" + powS(x));\n   System.out.println(\"\" + powNS(y));\n }\n \n public static int powS(int x) {\n   int result = (2 * x) - 1;\n   if (x == 0) {\n     return 0;\n   }\n   return result + powS(x-1);\n }\n \n public static int powNS(int y) {\n   int solution = (2 / y) - 1;\n   if (y == 0) {\n     return 0;\n   }\n   return solution + powS(y-1);\n }\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n<p>(<a href=\"https://i.stack.imgur.com/2ZRQV.png\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/2ZRQV.png</a>) and it worked but the code didn't retrieve the answer I'm looking for and the code says I got 625 when I was looking for the square root of the number.</p>\n<p>Does anyone know how to solve or change the last method so I can get the square root of a number for a jGRASP java program?</p>\n"},{"tags":["java","spring","graphql"],"answers":[{"tags":[],"owner":{"account_id":11415465,"reputation":59,"user_id":8368390,"display_name":"thegreatleaf"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1547870107,"creation_date":1547870107,"answer_id":54263924,"question_id":54244791,"body_markdown":"you can implement `GraphQLError` where extra error properties can be added. ","title":"How to respond with extensions using graphql-java?","body":"<p>you can implement <code>GraphQLError</code> where extra error properties can be added. </p>\n"},{"tags":[],"owner":{"account_id":15241422,"reputation":607,"user_id":10997589,"display_name":"Joe"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1555509874,"creation_date":1555367886,"answer_id":55698152,"question_id":54244791,"body_markdown":"The best way I&#39;ve found to return `extensions` is to implement a subclass of `SimpleInstrumentation` that overrides `instrumentExecutionResult` (code stolen partially from graphql-java&#39;s `TracingInstrumentation`):\r\n\r\n    @Override\r\n    public CompletableFuture&lt;ExecutionResult&gt; instrumentExecutionResult(\r\n            ExecutionResult executionResult,\r\n            InstrumentationExecutionParameters parameters) {\r\n        Map&lt;Object, Object&gt; currentExt = executionResult.getExtensions();\r\n        Map&lt;Object, Object&gt; newExtensionMap = new LinkedHashMap&lt;&gt;();\r\n        newExtensionMap.putAll(currentExt == null ? Collections.emptyMap() : currentExt);\r\n        newExtensionMap.put(&quot;MyExtensionKey&quot;, myExtensionValue);\r\n\r\n        return CompletableFuture.completedFuture(\r\n            new ExecutionResultImpl(\r\n                executionResult.getData(), \r\n                executionResult.getErrors(), \r\n                newExtensionMap));\r\n    }\r\n\r\nWhen setting up the `GraphQL` instance you then pass an instance of the instrumentation class in:\r\n\r\n    GraphQL graphQL = GraphQL\r\n            .newGraphQL(schema)\r\n            .instrumentation(new MyInstrumentation())\r\n            .build()\r\n\r\n(Not sure entirely how this is handled by `graphql-spring-boot` but would imagine there is some way to `@Autowire` or otherwise configure the `GraphQL` instance?  `InstrumentationProvider` from `graphql-java-servlet` might be what you&#39;d use to do this)","title":"How to respond with extensions using graphql-java?","body":"<p>The best way I've found to return <code>extensions</code> is to implement a subclass of <code>SimpleInstrumentation</code> that overrides <code>instrumentExecutionResult</code> (code stolen partially from graphql-java's <code>TracingInstrumentation</code>):</p>\n\n<pre><code>@Override\npublic CompletableFuture&lt;ExecutionResult&gt; instrumentExecutionResult(\n        ExecutionResult executionResult,\n        InstrumentationExecutionParameters parameters) {\n    Map&lt;Object, Object&gt; currentExt = executionResult.getExtensions();\n    Map&lt;Object, Object&gt; newExtensionMap = new LinkedHashMap&lt;&gt;();\n    newExtensionMap.putAll(currentExt == null ? Collections.emptyMap() : currentExt);\n    newExtensionMap.put(\"MyExtensionKey\", myExtensionValue);\n\n    return CompletableFuture.completedFuture(\n        new ExecutionResultImpl(\n            executionResult.getData(), \n            executionResult.getErrors(), \n            newExtensionMap));\n}\n</code></pre>\n\n<p>When setting up the <code>GraphQL</code> instance you then pass an instance of the instrumentation class in:</p>\n\n<pre><code>GraphQL graphQL = GraphQL\n        .newGraphQL(schema)\n        .instrumentation(new MyInstrumentation())\n        .build()\n</code></pre>\n\n<p>(Not sure entirely how this is handled by <code>graphql-spring-boot</code> but would imagine there is some way to <code>@Autowire</code> or otherwise configure the <code>GraphQL</code> instance?  <code>InstrumentationProvider</code> from <code>graphql-java-servlet</code> might be what you'd use to do this)</p>\n"},{"tags":[],"owner":{"account_id":8263841,"reputation":847,"user_id":6214197,"display_name":"Shubham Arora"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1658270895,"creation_date":1658270433,"answer_id":73044166,"question_id":54244791,"body_markdown":"Okay so after spending some 20 hours on this thing . Finally figured it out . \r\nRequired a lot of trial and error . Also we most definitely dont have proper/enough documenting for this . \r\n\r\nAlthough my solution answers this question , It answers an extra question as well, which is  -&gt; **How do I make extensions dynamic for every query ?**\r\n\r\nMeaning , all 3 (data, errors and extensions) would be dynamic in the response . \r\n\r\nMy use case - **How do I add logs for each query in extensions ?**\r\n\r\nAnswer  - (Note - The code below contains lombok annotations)\r\n\r\nStep 1 - Creating your **Instrumentation Class** and the **Instrumentation State Class** . \r\n\r\n```\r\n//This is the state class . \r\n//State is the first thing created whenever a graphql query is run . \r\n//We will embed our Logs object here .\r\n@Builder\r\nclass LogInstrumentationState implements InstrumentationState {\r\n    @Getter\r\n    @Setter\r\n    public LogsDto logsDto;\r\n}\r\n\r\n\r\n//This is the instrumentation class that will be used to create the graphql object .\r\n//The overridden methods are different stages in the graphql query execution \r\n@Builder\r\npublic class LogsInstrumentation extends SimpleInstrumentation {\r\n\r\n  //First stage in graphql query execution .\r\n  //Object for our custom state class object is created here . \r\n  @Override\r\n  public InstrumentationState createState() {\r\n    return LogInstrumentationState.builder().build();\r\n  }\r\n\r\n   //Second Stage in graphql query execution\r\n   //Reference of initialized Logs object in the main code flow is passed here . \r\n   //This reference is stored in our custom state class&#39;s object .\r\n  @Override\r\n  public ExecutionInput instrumentExecutionInput(ExecutionInput executionInput,\r\n                                                 InstrumentationExecutionParameters parameters) {\r\n    LogsDto logsDto = (LogsDto) executionInput.getExtensions().get(&quot;logs&quot;);\r\n\r\n    LogInstrumentationState logInstrumentationState = parameters.getInstrumentationState();\r\n    logInstrumentationState.setLogsDto(logsDto);\r\n    return super.instrumentExecutionInput(executionInput, parameters);\r\n  }\r\n\r\n  //This is the last stage in the graphql query execution .\r\n  //Logs are taken from the custom container and added into extensions . \r\n  @Override\r\n  public CompletableFuture&lt;ExecutionResult&gt; instrumentExecutionResult(\r\n      ExecutionResult executionResult, InstrumentationExecutionParameters parameters) {\r\n\r\n    Map&lt;Object, Object&gt; newExtensionMap = getExtensionsMap(executionResult,parameters);\r\n\r\n    return CompletableFuture.completedFuture(\r\n        new ExecutionResultImpl(\r\n            executionResult.getData(),\r\n            executionResult.getErrors(),\r\n            newExtensionMap));\r\n  }\r\n\r\n  //Helper function\r\n  public Map&lt;Object, Object&gt; getExtensionsMap(ExecutionResult executionResult, InstrumentationExecutionParameters parameters) {\r\n    Map&lt;Object, Object&gt; currentExt = executionResult.getExtensions();\r\n    Map&lt;Object, Object&gt; newExtensionMap = new LinkedHashMap&lt;&gt;();\r\n    newExtensionMap.putAll(currentExt == null ? Collections.emptyMap() : currentExt);\r\n    LogsDto logsDto =\r\n        ((LogInstrumentationState)parameters.getInstrumentationState()).getLogsDto();\r\n    newExtensionMap.put(ControllerConstants.LOGS, logsDto);\r\n    return newExtensionMap;\r\n  }\r\n\r\n}\r\n```\r\n\r\nStep 2 - Creating graphql object - \r\n```\r\nGraphQL graphQl = GraphQL.newGraphQL(graphqlSchema).instrumentation(LogsInstrumentation.builder().build())\r\n        .build();\r\n```\r\n\r\nStep 3 - Creating executing input . This is where you pass the dynamic Log object into the ```LogsInstrumentation``` class .\r\n\r\n```\r\nvar executionInput = ExecutionInput.newExecutionInput()\r\n          .query(...)\r\n          .variables(...)\r\n          .operationName(...)\r\n          .extensions(Map.of(&quot;logs&quot;,logsDto))\r\n          .dataLoaderRegistry(...)\r\n          .graphQLContext(graphqlContext).build();\r\n\r\n\r\n      ExecutionResult executionResult = graphQl.execute(executionInput);\r\n```\r\n\r\nStep 4 - This is how you get your extensions after your query has completed . \r\n\r\n```\r\nMap&lt;Object, Object&gt; extensions = executionResult.getExtensions();\r\nLogsDto logsDto = (LogsDto) extensions.get(&quot;logs&quot;);\r\n```\r\n\r\n[My source][1]\r\n\r\n\r\n  [1]: https://medium.com/@gabbigum/java-graphql-instrumentation-explained-255e3b69cf75","title":"How to respond with extensions using graphql-java?","body":"<p>Okay so after spending some 20 hours on this thing . Finally figured it out .\nRequired a lot of trial and error . Also we most definitely dont have proper/enough documenting for this .</p>\n<p>Although my solution answers this question , It answers an extra question as well, which is  -&gt; <strong>How do I make extensions dynamic for every query ?</strong></p>\n<p>Meaning , all 3 (data, errors and extensions) would be dynamic in the response .</p>\n<p>My use case - <strong>How do I add logs for each query in extensions ?</strong></p>\n<p>Answer  - (Note - The code below contains lombok annotations)</p>\n<p>Step 1 - Creating your <strong>Instrumentation Class</strong> and the <strong>Instrumentation State Class</strong> .</p>\n<pre><code>//This is the state class . \n//State is the first thing created whenever a graphql query is run . \n//We will embed our Logs object here .\n@Builder\nclass LogInstrumentationState implements InstrumentationState {\n    @Getter\n    @Setter\n    public LogsDto logsDto;\n}\n\n\n//This is the instrumentation class that will be used to create the graphql object .\n//The overridden methods are different stages in the graphql query execution \n@Builder\npublic class LogsInstrumentation extends SimpleInstrumentation {\n\n  //First stage in graphql query execution .\n  //Object for our custom state class object is created here . \n  @Override\n  public InstrumentationState createState() {\n    return LogInstrumentationState.builder().build();\n  }\n\n   //Second Stage in graphql query execution\n   //Reference of initialized Logs object in the main code flow is passed here . \n   //This reference is stored in our custom state class's object .\n  @Override\n  public ExecutionInput instrumentExecutionInput(ExecutionInput executionInput,\n                                                 InstrumentationExecutionParameters parameters) {\n    LogsDto logsDto = (LogsDto) executionInput.getExtensions().get(&quot;logs&quot;);\n\n    LogInstrumentationState logInstrumentationState = parameters.getInstrumentationState();\n    logInstrumentationState.setLogsDto(logsDto);\n    return super.instrumentExecutionInput(executionInput, parameters);\n  }\n\n  //This is the last stage in the graphql query execution .\n  //Logs are taken from the custom container and added into extensions . \n  @Override\n  public CompletableFuture&lt;ExecutionResult&gt; instrumentExecutionResult(\n      ExecutionResult executionResult, InstrumentationExecutionParameters parameters) {\n\n    Map&lt;Object, Object&gt; newExtensionMap = getExtensionsMap(executionResult,parameters);\n\n    return CompletableFuture.completedFuture(\n        new ExecutionResultImpl(\n            executionResult.getData(),\n            executionResult.getErrors(),\n            newExtensionMap));\n  }\n\n  //Helper function\n  public Map&lt;Object, Object&gt; getExtensionsMap(ExecutionResult executionResult, InstrumentationExecutionParameters parameters) {\n    Map&lt;Object, Object&gt; currentExt = executionResult.getExtensions();\n    Map&lt;Object, Object&gt; newExtensionMap = new LinkedHashMap&lt;&gt;();\n    newExtensionMap.putAll(currentExt == null ? Collections.emptyMap() : currentExt);\n    LogsDto logsDto =\n        ((LogInstrumentationState)parameters.getInstrumentationState()).getLogsDto();\n    newExtensionMap.put(ControllerConstants.LOGS, logsDto);\n    return newExtensionMap;\n  }\n\n}\n</code></pre>\n<p>Step 2 - Creating graphql object -</p>\n<pre><code>GraphQL graphQl = GraphQL.newGraphQL(graphqlSchema).instrumentation(LogsInstrumentation.builder().build())\n        .build();\n</code></pre>\n<p>Step 3 - Creating executing input . This is where you pass the dynamic Log object into the <code>LogsInstrumentation</code> class .</p>\n<pre><code>var executionInput = ExecutionInput.newExecutionInput()\n          .query(...)\n          .variables(...)\n          .operationName(...)\n          .extensions(Map.of(&quot;logs&quot;,logsDto))\n          .dataLoaderRegistry(...)\n          .graphQLContext(graphqlContext).build();\n\n\n      ExecutionResult executionResult = graphQl.execute(executionInput);\n</code></pre>\n<p>Step 4 - This is how you get your extensions after your query has completed .</p>\n<pre><code>Map&lt;Object, Object&gt; extensions = executionResult.getExtensions();\nLogsDto logsDto = (LogsDto) extensions.get(&quot;logs&quot;);\n</code></pre>\n<p><a href=\"https://medium.com/@gabbigum/java-graphql-instrumentation-explained-255e3b69cf75\" rel=\"nofollow noreferrer\">My source</a></p>\n"},{"tags":[],"owner":{"account_id":104236,"reputation":2064,"user_id":278800,"accept_rate":58,"display_name":"Steve K"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695764494,"creation_date":1695764494,"answer_id":77183562,"question_id":54244791,"body_markdown":"Starting with graphql-java 21.0, you can set `extensions` directly on the `DataFetcherResult`: https://github.com/graphql-java/graphql-java/blob/v21.0/src/main/java/graphql/execution/DataFetcherResult.java#L205\r\n\r\nIt was added [here](https://github.com/graphql-java/graphql-java/commit/1bbaeeae155ac492722957dc9d450b3c3cdbe3bc). If you&#39;re stuck on an older version of graphql-java, you can get it from the `DataFetchingEnvironment` like so:\r\n```\r\nExtensionsBuilder extensionsBuilder = dfe.getGraphQlContext().get&lt;ExtensionsBuilder&gt;(ExtensionsBuilder.class);\r\nif (extensionsBuilder != null) {\r\n    extensionsBuilder.addValue(&quot;yourKey&quot;, yourValue);\r\n}\r\n```","title":"How to respond with extensions using graphql-java?","body":"<p>Starting with graphql-java 21.0, you can set <code>extensions</code> directly on the <code>DataFetcherResult</code>: <a href=\"https://github.com/graphql-java/graphql-java/blob/v21.0/src/main/java/graphql/execution/DataFetcherResult.java#L205\" rel=\"nofollow noreferrer\">https://github.com/graphql-java/graphql-java/blob/v21.0/src/main/java/graphql/execution/DataFetcherResult.java#L205</a></p>\n<p>It was added <a href=\"https://github.com/graphql-java/graphql-java/commit/1bbaeeae155ac492722957dc9d450b3c3cdbe3bc\" rel=\"nofollow noreferrer\">here</a>. If you're stuck on an older version of graphql-java, you can get it from the <code>DataFetchingEnvironment</code> like so:</p>\n<pre><code>ExtensionsBuilder extensionsBuilder = dfe.getGraphQlContext().get&lt;ExtensionsBuilder&gt;(ExtensionsBuilder.class);\nif (extensionsBuilder != null) {\n    extensionsBuilder.addValue(&quot;yourKey&quot;, yourValue);\n}\n</code></pre>\n"}],"owner":{"account_id":11368375,"reputation":169,"user_id":8334622,"display_name":"John Doe"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2586,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"answer_count":4,"score":7,"last_activity_date":1695764494,"creation_date":1547761721,"question_id":54244791,"body_markdown":"My responses from GraphQL have to follow a particular format of \r\n\r\n    {\r\n        data:{}\r\n        errors:[{}]\r\n        extensions:{}\r\n    }\r\n  \r\n\r\nHowever, I am uncertain how to respond with extensions from my methods.\r\nI am using graphql-spring-boot which pulls in graphql-java, graphql-java-tools, and graphql-java-servlet.\r\n\r\n\r\nI understand that my results from a query/mutation method will be wrapped in the data object, and if any exceptions were thrown they&#39;ll be wrapped in errors. \r\n\r\nIf I have a GraphQL Schema defined as \r\n    \r\n    type Query {\r\n        someQuery(input: String!) : String!\r\n    }\r\n\r\nand a corresponding Java method\r\n\r\n    public String someQuery(String input) {\r\n        return &quot;Hello, world!&quot;;\r\n    }\r\n\r\nThe GraphQL response will be\r\n\r\n    {\r\n        data: { &quot;Hello, world!&quot;}\r\n    }\r\n\r\nI would like to know how I am able to add extensions to my GraphQL response so that the output is as:\r\n\r\n    {\r\n        data: {&quot;Hello, world!&quot;}\r\n        extensions: { &lt;something&gt;}\r\n    }\r\n\r\n","title":"How to respond with extensions using graphql-java?","body":"<p>My responses from GraphQL have to follow a particular format of </p>\n\n<pre><code>{\n    data:{}\n    errors:[{}]\n    extensions:{}\n}\n</code></pre>\n\n<p>However, I am uncertain how to respond with extensions from my methods.\nI am using graphql-spring-boot which pulls in graphql-java, graphql-java-tools, and graphql-java-servlet.</p>\n\n<p>I understand that my results from a query/mutation method will be wrapped in the data object, and if any exceptions were thrown they'll be wrapped in errors. </p>\n\n<p>If I have a GraphQL Schema defined as </p>\n\n<pre><code>type Query {\n    someQuery(input: String!) : String!\n}\n</code></pre>\n\n<p>and a corresponding Java method</p>\n\n<pre><code>public String someQuery(String input) {\n    return \"Hello, world!\";\n}\n</code></pre>\n\n<p>The GraphQL response will be</p>\n\n<pre><code>{\n    data: { \"Hello, world!\"}\n}\n</code></pre>\n\n<p>I would like to know how I am able to add extensions to my GraphQL response so that the output is as:</p>\n\n<pre><code>{\n    data: {\"Hello, world!\"}\n    extensions: { &lt;something&gt;}\n}\n</code></pre>\n"},{"tags":["java","gradle","protocol-buffers"],"comments":[{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":2,"creation_date":1542721802,"post_id":53394466,"comment_id":93664284,"body_markdown":"I don&#39;t think `protobuf-gradle-plugin` should be part of your applications dependencies. Rather it&#39;s a gradle plugin that goes at the top gradle file, and you&#39;ll need to apply it","body":"I don&#39;t think <code>protobuf-gradle-plugin</code> should be part of your applications dependencies. Rather it&#39;s a gradle plugin that goes at the top gradle file, and you&#39;ll need to apply it"}],"answers":[{"tags":[],"owner":{"account_id":13388424,"reputation":277,"user_id":9661508,"display_name":"Oluwatosin Solarin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695764316,"creation_date":1695764316,"answer_id":77183551,"question_id":53394466,"body_markdown":"For me updating this line \r\n\r\n&gt; artifact = &quot;com.google.protobuf:protoc:3.18.0&quot;\r\n\r\nto have the same version number as this line fixed the problem.\r\n\r\n&gt; implementation  &quot;com.google.protobuf:protobuf-javalite:3.18.0&quot;\r\n\r\n    \r\n    dependencies {\r\n        implementation  &quot;androidx.datastore:datastore:1.0.0&quot;\r\n        implementation  &quot;com.google.protobuf:protobuf-javalite:3.18.0&quot;\r\n    }\r\n    \r\n    protobuf {\r\n        protoc {\r\n            artifact = &quot;com.google.protobuf:protoc:3.18.0&quot;\r\n        }\r\n    \r\n        // Generates the java Protobuf-lite code for the Protobufs in this project. See\r\n        // https://github.com/google/protobuf-gradle-plugin#customizing-protobuf-compilation\r\n        // for more information.\r\n        generateProtoTasks {\r\n            all().each { task -&gt;\r\n                task.builtins {\r\n                    java {\r\n                        option &#39;lite&#39;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }","title":"Gradle can&#39;t find com.google.protobuf","body":"<p>For me updating this line</p>\n<blockquote>\n<p>artifact = &quot;com.google.protobuf:protoc:3.18.0&quot;</p>\n</blockquote>\n<p>to have the same version number as this line fixed the problem.</p>\n<blockquote>\n<p>implementation  &quot;com.google.protobuf:protobuf-javalite:3.18.0&quot;</p>\n</blockquote>\n<pre><code>dependencies {\n    implementation  &quot;androidx.datastore:datastore:1.0.0&quot;\n    implementation  &quot;com.google.protobuf:protobuf-javalite:3.18.0&quot;\n}\n\nprotobuf {\n    protoc {\n        artifact = &quot;com.google.protobuf:protoc:3.18.0&quot;\n    }\n\n    // Generates the java Protobuf-lite code for the Protobufs in this project. See\n    // https://github.com/google/protobuf-gradle-plugin#customizing-protobuf-compilation\n    // for more information.\n    generateProtoTasks {\n        all().each { task -&gt;\n            task.builtins {\n                java {\n                    option 'lite'\n                }\n            }\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":5579578,"reputation":95,"user_id":4421913,"display_name":"Jo&#227;o Borrego"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1044,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":1,"score":4,"last_activity_date":1695764316,"creation_date":1542721709,"question_id":53394466,"body_markdown":"I&#39;m trying to compile a project with protobuf using gradle. However, I&#39;m getting the following errors in the protobuf generated java file:\r\n\r\n[![enter image description here][1]][1]\r\n\r\nHere&#39;s the build.gradle file:\r\n\r\n        // Apply the java-library plugin to add support for Java Library\r\n    apply plugin: &#39;java-library&#39;\r\n    \r\n    \r\n    // In this section you declare where to find the dependencies of your project\r\n    repositories {\r\n        // Use jcenter for resolving your dependencies.\r\n        // You can declare any Maven/Ivy/file repository here.\r\n        jcenter()\r\n    }\r\n    \r\n    dependencies {\r\n     \r\n        // This dependency is used internally, and not exposed to consumers on their own compile classpath.\r\n        implementation &#39;com.google.protobuf:protobuf-java:3.5.1&#39;\r\n    \timplementation &#39;com.google.protobuf:protobuf-gradle-plugin:0.8.7&#39;\r\n        // Use JUnit test framework\r\n        testImplementation &#39;junit:junit:4.12&#39;\r\n    }\r\n\r\nAny hint of what&#39;s missing?\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/bcz0V.png","title":"Gradle can&#39;t find com.google.protobuf","body":"<p>I'm trying to compile a project with protobuf using gradle. However, I'm getting the following errors in the protobuf generated java file:</p>\n\n<p><a href=\"https://i.stack.imgur.com/bcz0V.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/bcz0V.png\" alt=\"enter image description here\"></a></p>\n\n<p>Here's the build.gradle file:</p>\n\n<pre><code>    // Apply the java-library plugin to add support for Java Library\napply plugin: 'java-library'\n\n\n// In this section you declare where to find the dependencies of your project\nrepositories {\n    // Use jcenter for resolving your dependencies.\n    // You can declare any Maven/Ivy/file repository here.\n    jcenter()\n}\n\ndependencies {\n\n    // This dependency is used internally, and not exposed to consumers on their own compile classpath.\n    implementation 'com.google.protobuf:protobuf-java:3.5.1'\n    implementation 'com.google.protobuf:protobuf-gradle-plugin:0.8.7'\n    // Use JUnit test framework\n    testImplementation 'junit:junit:4.12'\n}\n</code></pre>\n\n<p>Any hint of what's missing?</p>\n"},{"tags":["java","spring","jdbc","jdbctemplate"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1695800476,"post_id":77183520,"comment_id":136071077,"body_markdown":"The `rewriteBatchedStatements` is for MySQL not Postgres. You should check the database not the logging from the java client. That can log individual queries (MySQL does as well) but the actual SQL send to to database is a batched insert.","body":"The <code>rewriteBatchedStatements</code> is for MySQL not Postgres. You should check the database not the logging from the java client. That can log individual queries (MySQL does as well) but the actual SQL send to to database is a batched insert."},{"owner":{"account_id":15880446,"reputation":55,"user_id":12104581,"display_name":"robber"},"score":0,"creation_date":1695845475,"post_id":77183520,"comment_id":136079945,"body_markdown":"It looks like its for postgres aswell, https://jdbc.postgresql.org/documentation/use/#:~:text=reWriteBatchedInserts\n\nThose queries are from the RDS not from the java client","body":"It looks like its for postgres aswell, <a href=\"https://jdbc.postgresql.org/documentation/use/#:~:text=reWriteBatchedInserts\" rel=\"nofollow noreferrer\">jdbc.postgresql.org/documentation/use/&hellip;</a>  Those queries are from the RDS not from the java client"}],"owner":{"account_id":15880446,"reputation":55,"user_id":12104581,"display_name":"robber"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":79,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695763845,"creation_date":1695763845,"question_id":77183520,"body_markdown":"Spring JdbcTemplate is sending small batch sizes of 1-3. I would like batch sizes of 10,000. The code im using to call the batchUpdate is below, and the logs im seeing on the postgres db from AWS.\r\n\r\nI have on my jdbc connection rewriteBatchedStatements set to true. I have also tried re-writing my functions to the code in the last codespace. \r\n\r\nMy goal is to have one insert of 10,000 records, logged like this on the db.\r\n\r\n```\r\nINSERT INTO table_name (column_list)\r\nVALUES\r\n    (value_list_1),\r\n    (value_list_2),\r\n    ...\r\n    (value_list_n);\r\n```\r\n\r\n```\r\n    public void insertTest(UUID var1, int var2, List&lt;Shape&gt; Tests)\r\n    {\r\n        jdbcTemplate.batchUpdate(\r\n                &quot;INSERT INTO database.table VALUES (?, ?, ?, ?, ?, ?, ?)&quot;,\r\n                Tests,\r\n                10000,\r\n                (ps, entity) -&gt;\r\n                {\r\n                    ps.setObject(1, var1);\r\n                    ps.setLong(2, var2);\r\n                    ps.setObject(3, entity.getVar3());\r\n                    ps.setObject(4, entity.getVar4());\r\n                    ps.setObject(5, entity.getVar5());\r\n                    ps.setObject(6, entity.getVar6());\r\n                    ps.setObject(7, entity.getVar7());\r\n                });\r\n    }\r\n```\r\n\r\n```\r\n2023-09-26T12:47:13.000+13:00   2023-09-25 23:47:13 UTC:10.20.0.125(28120):database:[4882]:LOG: duration: 0.003 ms bind S_1: INSERT INTO database.table VALUES ($1, $2, $3, $4, $5, $6)\r\n\r\n2023-09-26T12:47:13.000+13:00   2023-09-25 23:47:13 UTC:10.20.0.125(28120):database:[4882]:DETAIL: parameters: $1 = &#39;data&#39;, $2 = &#39;1&#39;, $3 = &#39;data&#39;, $4 = &#39;1&#39;, $5 = &#39;data&#39;, $6 = &#39;data&#39;\r\n\r\n2023-09-26T12:47:13.000+13:00   2023-09-25 23:47:13 UTC:10.20.0.125(28120):database:[4882]:LOG: execute S_1: INSERT INTO database.table  VALUES ($1, $2, $3, $4, $5, $6)\r\n```\r\n\r\n\r\n\r\n```\r\nimport org.springframework.jdbc.core.JdbcTemplate;\r\nimport org.springframework.jdbc.core.BatchPreparedStatementSetter;\r\n\r\n    public int[] batchInsert(List&lt;Book&gt; books) {\r\n\r\n        return this.jdbcTemplate.batchUpdate(\r\n\t\t\t&quot;insert into books (name, price) values(?,?)&quot;,\r\n\t\t\tnew BatchPreparedStatementSetter() {\r\n\r\n\t\t\t\tpublic void setValues(PreparedStatement ps, int i) throws SQLException {\r\n\t\t\t\t\tps.setString(1, books.get(i).getName());\r\n\t\t\t\t\tps.setBigDecimal(2, books.get(i).getPrice());\r\n\t\t\t\t}\r\n\r\n\t\t\t\tpublic int getBatchSize() {\r\n\t\t\t\t\treturn books.size();\r\n\t\t\t\t}\r\n\r\n\t\t\t});\r\n    }\r\n```\r\nFrom this link: https://mkyong.com/spring/spring-jdbctemplate-batchupdate-example/\r\n\r\nThank you\r\n","title":"jdbcTemplate BatchUpdate sending row by row instead of bigger batch","body":"<p>Spring JdbcTemplate is sending small batch sizes of 1-3. I would like batch sizes of 10,000. The code im using to call the batchUpdate is below, and the logs im seeing on the postgres db from AWS.</p>\n<p>I have on my jdbc connection rewriteBatchedStatements set to true. I have also tried re-writing my functions to the code in the last codespace.</p>\n<p>My goal is to have one insert of 10,000 records, logged like this on the db.</p>\n<pre><code>INSERT INTO table_name (column_list)\nVALUES\n    (value_list_1),\n    (value_list_2),\n    ...\n    (value_list_n);\n</code></pre>\n<pre><code>    public void insertTest(UUID var1, int var2, List&lt;Shape&gt; Tests)\n    {\n        jdbcTemplate.batchUpdate(\n                &quot;INSERT INTO database.table VALUES (?, ?, ?, ?, ?, ?, ?)&quot;,\n                Tests,\n                10000,\n                (ps, entity) -&gt;\n                {\n                    ps.setObject(1, var1);\n                    ps.setLong(2, var2);\n                    ps.setObject(3, entity.getVar3());\n                    ps.setObject(4, entity.getVar4());\n                    ps.setObject(5, entity.getVar5());\n                    ps.setObject(6, entity.getVar6());\n                    ps.setObject(7, entity.getVar7());\n                });\n    }\n</code></pre>\n<pre><code>2023-09-26T12:47:13.000+13:00   2023-09-25 23:47:13 UTC:10.20.0.125(28120):database:[4882]:LOG: duration: 0.003 ms bind S_1: INSERT INTO database.table VALUES ($1, $2, $3, $4, $5, $6)\n\n2023-09-26T12:47:13.000+13:00   2023-09-25 23:47:13 UTC:10.20.0.125(28120):database:[4882]:DETAIL: parameters: $1 = 'data', $2 = '1', $3 = 'data', $4 = '1', $5 = 'data', $6 = 'data'\n\n2023-09-26T12:47:13.000+13:00   2023-09-25 23:47:13 UTC:10.20.0.125(28120):database:[4882]:LOG: execute S_1: INSERT INTO database.table  VALUES ($1, $2, $3, $4, $5, $6)\n</code></pre>\n<pre><code>import org.springframework.jdbc.core.JdbcTemplate;\nimport org.springframework.jdbc.core.BatchPreparedStatementSetter;\n\n    public int[] batchInsert(List&lt;Book&gt; books) {\n\n        return this.jdbcTemplate.batchUpdate(\n            &quot;insert into books (name, price) values(?,?)&quot;,\n            new BatchPreparedStatementSetter() {\n\n                public void setValues(PreparedStatement ps, int i) throws SQLException {\n                    ps.setString(1, books.get(i).getName());\n                    ps.setBigDecimal(2, books.get(i).getPrice());\n                }\n\n                public int getBatchSize() {\n                    return books.size();\n                }\n\n            });\n    }\n</code></pre>\n<p>From this link: <a href=\"https://mkyong.com/spring/spring-jdbctemplate-batchupdate-example/\" rel=\"nofollow noreferrer\">https://mkyong.com/spring/spring-jdbctemplate-batchupdate-example/</a></p>\n<p>Thank you</p>\n"},{"tags":["java","spring","stored-procedures","websphere","blob"],"answers":[{"tags":[],"owner":{"account_id":10966372,"reputation":535,"user_id":8057985,"display_name":"DeooK"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1497427192,"creation_date":1497427192,"answer_id":44538864,"question_id":44279571,"body_markdown":"Problem solved:\r\nI do not need to use Blob object: I can use simple byte[] on Java-side, put it in paramSource and bind that array with OracleTypes.BINARY.\r\nThat works.","title":"Spring Send Blob to Stored Procedure","body":"<p>Problem solved:\nI do not need to use Blob object: I can use simple byte[] on Java-side, put it in paramSource and bind that array with OracleTypes.BINARY.\nThat works.</p>\n"}],"owner":{"account_id":10966372,"reputation":535,"user_id":8057985,"display_name":"DeooK"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1989,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":44538864,"answer_count":1,"score":0,"last_activity_date":1695763598,"creation_date":1496219472,"question_id":44279571,"body_markdown":"I&#39;m trying to send a Blob to a stored procedure without success.\r\nFirst of all, I had some limitations, i.e. I cannot use a prepared statement.\r\n\r\nSecondly, I&#39;m sure that the stored procedure works, because I&#39;ve tried \r\nit with success calling manually the procedure and with prepared statement.\r\n\r\nIf I execute this all works correctly:\r\n\r\n    PreparedStatement ps = con.prepareStatement(&quot;call t1000_adm.Mandamail.manda_mail(?)&quot;);\r\n    file = new File(request.getPathAllegato());\r\n    InputStream fis = new FileInputStream(file);\r\n    ps.setBinaryStream(1, fis, (int)file.length());\r\n    ps.execute();\r\n\r\nBut I&#39;m forced to use Spring MVC with WebSphere application server and I cannot use directly a prepared statement.\r\nI have to use a javax.sql.DataSource and org.springframework.jdbc.core.namedparam.MapSqlParameterSource.\r\n\r\nThis is what I have to do:\r\n\r\n    MapSqlParameterSource paramSource = new MapSqlParameterSource();\r\n    paramSource.addValue(BLOB_NAME, blob);\r\n    CustomStoredProcedure proc = new CustomStoredProcedure( dataSource, storedProcedure); \r\n    proc.execute(paramSource);\r\n\r\nIn CustomStoredProcedure, which extends org.springframework.jdbc.object.StoredProcedure, I have to associate to BLOB_NAME an Oracle Data Type, in this way:\r\n\r\n    public CustomStoredProcedure(DataSource dataSource, String sprocName) {\r\n\t    super(dataSource, sprocName);\r\n\t\tdeclareParameter(new SqlParameter(BLOB_NAME, OracleTypes.BLOB));\r\n\t\tcompile();\r\n\t}\r\n\r\nNow, here&#39;s the problems:\r\n\r\n1) If I try to create the blob object with dataSource.getConnection().createBlob() I receive the error:\r\n \r\n&gt;java.sql.SQLFeatureNotSupportedException: DSRA1300E: Function not implemented: Connection.createBlob \r\n\r\n(the description may be incorrect but I have the localized version and I translated it in English).\r\n\r\n2) If I try to create the blob object with BLOB.createTemporary I receive the error \r\n\r\n&gt;java.lang.ClassCastException: com.ibm.ws.rsadapter.jdbc.WSJdbcConnection incompatible with oracle.jdbc.OracleConnection\r\n\r\n3) If I use \r\n    \r\n    com.ibm.websphere.rsadapter.WSCallHelper.getNativeConnection( dataSource.getConnection)\r\n\r\nI receive the compiling error (only with Ant, with Eclipse I have no problem):\r\n\r\n&gt;error: package com.ibm.websphere.rsadapter not exists\r\n    [javac] import com.ibm.websphere.rsadapter.WSCallHelper\r\n\r\n(as before, I translated the error)\r\n\r\n4) If I ignore the Ant compiling error and use it anyway I receive the execution error:\r\n\r\n&gt;[31/05/17 9.52.50:414 CEST] 0000007f SystemErr     R org.springframework.jdbc.UncategorizedSQLException: CallableStatementCallback; uncategorized SQLException for SQL [{call MANDAMAIL.MANDA_MAIL(?)}]; SQL state [99999]; error code [22922]; ORA-22922: valore LOB non esistente  \r\n    ORA-06512: a &quot;SYS.DBMS_LOB&quot;, line 837  \r\n    ORA-06512: a &quot;T1000_ADM.MANDAMAIL&quot;, line 190  \r\n    ORA-06512: a line 1  \r\n    ; nested exception is java.sql.SQLException: ORA-22922: valore LOB non esistente  \r\n    ORA-06512: a &quot;SYS.DBMS_LOB&quot;, line 837  \r\n    ORA-06512: a &quot;T1000_ADM.MANDAMAIL&quot;, line 190  \r\n    ORA-06512: a line 1  \r\n&gt;    \r\n&gt;    [31/05/17 9.52.50:415 CEST] 0000007f SystemErr     R \tat org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:83)  \r\n    [31/05/17 9.52.50:415 CEST] 0000007f SystemErr     R \tat org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:80)  \r\n    [31/05/17 9.52.50:416 CEST] 0000007f SystemErr     R \tat org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:80)  \r\n    [31/05/17 9.52.50:416 CEST] 0000007f SystemErr     R \tat org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:1030)  \r\n    [31/05/17 9.52.50:416 CEST] 0000007f SystemErr     R \tat org.springframework.jdbc.core.JdbcTemplate.call(JdbcTemplate.java:1064)  \r\n    [31/05/17 9.52.50:417 CEST] 0000007f SystemErr     R \tat org.springframework.jdbc.object.StoredProcedure.execute(StoredProcedure.java:144)  \r\n    [31/05/17 9.52.50:417 CEST] 0000007f SystemErr     R \tat com.bpvn.vieniconnoi.dao.MandaMailStoredProcedure.execute(MandaMailStoredProcedure.java:42)...\r\n\r\nThe line 190 of the procedure is the first occurrance of DBMS_LOB.\r\nThis is the stored procedure (in Java code I&#39;ve removed other params for simplicity).\r\n\r\n    PROCEDURE manda_mail(   destinatario          IN VARCHAR2,\r\n                            cc                    IN VARCHAR2,\r\n                            mittente              IN VARCHAR2,\r\n                            oggetto               IN VARCHAR2,\r\n                            corpo                 IN VARCHAR2 DEFAULT NULL,\r\n                            nomeAllegato          IN VARCHAR2 DEFAULT NULL,\r\n                            allegato              IN BLOB DEFAULT NULL)\r\n    AS\r\n      l_mail_conn   UTL_SMTP.connection;\r\n      l_boundary    VARCHAR2(50) := &#39;----=*#abc1234321cba#*=&#39;;\r\n      l_step        PLS_INTEGER  := 12000; -- make sure you set a multiple of 3 not higher than 24573\r\n      v_mime VARCHAR2(50) := &#39;application/pdf&#39;;\r\n    BEGIN\r\n      l_mail_conn := UTL_SMTP.open_connection(C_SMTP_SERVER, 25);\r\n      UTL_SMTP.helo(l_mail_conn, C_SMTP_SERVER);\r\n      UTL_SMTP.mail(l_mail_conn, mittente);\r\n      UTL_SMTP.rcpt(l_mail_conn, destinatario);\r\n    \r\n      UTL_SMTP.open_data(l_mail_conn);\r\n      \r\n      UTL_SMTP.write_data(l_mail_conn, &#39;Date: &#39; || TO_CHAR(SYSDATE, &#39;DD-MON-YYYY HH24:MI:SS&#39;) || UTL_TCP.crlf);\r\n      UTL_SMTP.write_data(l_mail_conn, &#39;To: &#39; || destinatario || UTL_TCP.crlf);\r\n      UTL_SMTP.write_data(l_mail_conn, &#39;From: &#39; || mittente || UTL_TCP.crlf);\r\n      UTL_SMTP.write_data(l_mail_conn, &#39;Subject: &#39; || oggetto || UTL_TCP.crlf);\r\n      UTL_SMTP.write_data(l_mail_conn, &#39;Reply-To: &#39; || mittente || UTL_TCP.crlf);\r\n      UTL_SMTP.write_data(l_mail_conn, &#39;MIME-Version: 1.0&#39; || UTL_TCP.crlf);\r\n      UTL_SMTP.write_data(l_mail_conn, &#39;Content-Type: multipart/mixed; boundary=&quot;&#39; || l_boundary || &#39;&quot;&#39; || UTL_TCP.crlf || UTL_TCP.crlf);\r\n      \r\n      IF corpo IS NOT NULL THEN\r\n        UTL_SMTP.write_data(l_mail_conn, &#39;--&#39; || l_boundary || UTL_TCP.crlf);\r\n        UTL_SMTP.write_data(l_mail_conn, &#39;Content-Type: text/plain; charset=&quot;iso-8859-1&quot;&#39; || UTL_TCP.crlf || UTL_TCP.crlf);\r\n    \r\n        UTL_SMTP.write_data(l_mail_conn, corpo);\r\n        UTL_SMTP.write_data(l_mail_conn, UTL_TCP.crlf || UTL_TCP.crlf);\r\n      END IF;\r\n    \r\n      IF nomeAllegato IS NOT NULL THEN\r\n        UTL_SMTP.write_data(l_mail_conn, &#39;--&#39; || l_boundary || UTL_TCP.crlf);\r\n        UTL_SMTP.write_data(l_mail_conn, &#39;Content-Type: &#39; || v_mime || &#39;; name=&quot;&#39; || nomeAllegato || &#39;&quot;&#39; || UTL_TCP.crlf);\r\n        UTL_SMTP.write_data(l_mail_conn, &#39;Content-Transfer-Encoding: base64&#39; || UTL_TCP.crlf);\r\n        UTL_SMTP.write_data(l_mail_conn, &#39;Content-Disposition: attachment; filename=&quot;&#39; || nomeAllegato || &#39;&quot;&#39; || UTL_TCP.crlf || UTL_TCP.crlf);\r\n    \r\n        FOR i IN 0 .. TRUNC((DBMS_LOB.getlength(allegato) - 1 )/l_step) LOOP\r\n          UTL_SMTP.write_data(l_mail_conn, UTL_RAW.cast_to_varchar2(UTL_ENCODE.base64_encode(DBMS_LOB.substr(allegato, l_step, i * l_step + 1))));\r\n        END LOOP;\r\n    \r\n        UTL_SMTP.write_data(l_mail_conn, UTL_TCP.crlf || UTL_TCP.crlf);\r\n      END IF;\r\n      \r\n      UTL_SMTP.write_data(l_mail_conn, &#39;--&#39; || l_boundary || &#39;--&#39; || UTL_TCP.crlf);\r\n      UTL_SMTP.close_data(l_mail_conn);\r\n    \r\n      UTL_SMTP.quit(l_mail_conn);\r\n    END;\r\n\r\nTo get this I&#39;ve used the code written before creating the blob object in this way:\r\n\r\n    BLOB blob = BLOB.createTemporary(WSCallHelper.getNativeConnection(dataSource.getConnection()), false, BLOB.DURATION_SESSION);\r\n    FileInputStream is = new FileInputStream(filePath);\r\n    byte[] buffer = new byte[30000000];\r\n    ByteArrayOutputStream baos = new ByteArrayOutputStream();\r\n    \r\n    int bytesRead;\r\n    while ((bytesRead = is.read(buffer)) != -1) {\r\n    \tbaos.write(buffer, 0, bytesRead);\r\n    }\r\n    \r\n    blob.setBytes(1, baos.toByteArray());\t\t\r\n\r\nAny suggestions?","title":"Spring Send Blob to Stored Procedure","body":"<p>I'm trying to send a Blob to a stored procedure without success.\nFirst of all, I had some limitations, i.e. I cannot use a prepared statement.</p>\n<p>Secondly, I'm sure that the stored procedure works, because I've tried\nit with success calling manually the procedure and with prepared statement.</p>\n<p>If I execute this all works correctly:</p>\n<pre><code>PreparedStatement ps = con.prepareStatement(&quot;call t1000_adm.Mandamail.manda_mail(?)&quot;);\nfile = new File(request.getPathAllegato());\nInputStream fis = new FileInputStream(file);\nps.setBinaryStream(1, fis, (int)file.length());\nps.execute();\n</code></pre>\n<p>But I'm forced to use Spring MVC with WebSphere application server and I cannot use directly a prepared statement.\nI have to use a javax.sql.DataSource and org.springframework.jdbc.core.namedparam.MapSqlParameterSource.</p>\n<p>This is what I have to do:</p>\n<pre><code>MapSqlParameterSource paramSource = new MapSqlParameterSource();\nparamSource.addValue(BLOB_NAME, blob);\nCustomStoredProcedure proc = new CustomStoredProcedure( dataSource, storedProcedure); \nproc.execute(paramSource);\n</code></pre>\n<p>In CustomStoredProcedure, which extends org.springframework.jdbc.object.StoredProcedure, I have to associate to BLOB_NAME an Oracle Data Type, in this way:</p>\n<pre><code>public CustomStoredProcedure(DataSource dataSource, String sprocName) {\n    super(dataSource, sprocName);\n    declareParameter(new SqlParameter(BLOB_NAME, OracleTypes.BLOB));\n    compile();\n}\n</code></pre>\n<p>Now, here's the problems:</p>\n<ol>\n<li>If I try to create the blob object with dataSource.getConnection().createBlob() I receive the error:</li>\n</ol>\n<blockquote>\n<p>java.sql.SQLFeatureNotSupportedException: DSRA1300E: Function not implemented: Connection.createBlob</p>\n</blockquote>\n<p>(the description may be incorrect but I have the localized version and I translated it in English).</p>\n<ol start=\"2\">\n<li>If I try to create the blob object with BLOB.createTemporary I receive the error</li>\n</ol>\n<blockquote>\n<p>java.lang.ClassCastException: com.ibm.ws.rsadapter.jdbc.WSJdbcConnection incompatible with oracle.jdbc.OracleConnection</p>\n</blockquote>\n<ol start=\"3\">\n<li><p>If I use</p>\n<p>com.ibm.websphere.rsadapter.WSCallHelper.getNativeConnection( dataSource.getConnection)</p>\n</li>\n</ol>\n<p>I receive the compiling error (only with Ant, with Eclipse I have no problem):</p>\n<blockquote>\n<p>error: package com.ibm.websphere.rsadapter not exists\n[javac] import com.ibm.websphere.rsadapter.WSCallHelper</p>\n</blockquote>\n<p>(as before, I translated the error)</p>\n<ol start=\"4\">\n<li>If I ignore the Ant compiling error and use it anyway I receive the execution error:</li>\n</ol>\n<blockquote>\n<p>[31/05/17 9.52.50:414 CEST] 0000007f SystemErr     R org.springframework.jdbc.UncategorizedSQLException: CallableStatementCallback; uncategorized SQLException for SQL [{call MANDAMAIL.MANDA_MAIL(?)}]; SQL state [99999]; error code [22922]; ORA-22922: valore LOB non esistente<br />\nORA-06512: a &quot;SYS.DBMS_LOB&quot;, line 837<br />\nORA-06512: a &quot;T1000_ADM.MANDAMAIL&quot;, line 190<br />\nORA-06512: a line 1<br />\n; nested exception is java.sql.SQLException: ORA-22922: valore LOB non esistente<br />\nORA-06512: a &quot;SYS.DBMS_LOB&quot;, line 837<br />\nORA-06512: a &quot;T1000_ADM.MANDAMAIL&quot;, line 190<br />\nORA-06512: a line 1</p>\n<p>[31/05/17 9.52.50:415 CEST] 0000007f SystemErr     R   at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:83)<br />\n[31/05/17 9.52.50:415 CEST] 0000007f SystemErr     R    at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:80)<br />\n[31/05/17 9.52.50:416 CEST] 0000007f SystemErr     R    at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:80)<br />\n[31/05/17 9.52.50:416 CEST] 0000007f SystemErr     R    at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:1030)<br />\n[31/05/17 9.52.50:416 CEST] 0000007f SystemErr     R    at org.springframework.jdbc.core.JdbcTemplate.call(JdbcTemplate.java:1064)<br />\n[31/05/17 9.52.50:417 CEST] 0000007f SystemErr     R    at org.springframework.jdbc.object.StoredProcedure.execute(StoredProcedure.java:144)<br />\n[31/05/17 9.52.50:417 CEST] 0000007f SystemErr     R    at com.bpvn.vieniconnoi.dao.MandaMailStoredProcedure.execute(MandaMailStoredProcedure.java:42)...</p>\n</blockquote>\n<p>The line 190 of the procedure is the first occurrance of DBMS_LOB.\nThis is the stored procedure (in Java code I've removed other params for simplicity).</p>\n<pre><code>PROCEDURE manda_mail(   destinatario          IN VARCHAR2,\n                        cc                    IN VARCHAR2,\n                        mittente              IN VARCHAR2,\n                        oggetto               IN VARCHAR2,\n                        corpo                 IN VARCHAR2 DEFAULT NULL,\n                        nomeAllegato          IN VARCHAR2 DEFAULT NULL,\n                        allegato              IN BLOB DEFAULT NULL)\nAS\n  l_mail_conn   UTL_SMTP.connection;\n  l_boundary    VARCHAR2(50) := '----=*#abc1234321cba#*=';\n  l_step        PLS_INTEGER  := 12000; -- make sure you set a multiple of 3 not higher than 24573\n  v_mime VARCHAR2(50) := 'application/pdf';\nBEGIN\n  l_mail_conn := UTL_SMTP.open_connection(C_SMTP_SERVER, 25);\n  UTL_SMTP.helo(l_mail_conn, C_SMTP_SERVER);\n  UTL_SMTP.mail(l_mail_conn, mittente);\n  UTL_SMTP.rcpt(l_mail_conn, destinatario);\n\n  UTL_SMTP.open_data(l_mail_conn);\n  \n  UTL_SMTP.write_data(l_mail_conn, 'Date: ' || TO_CHAR(SYSDATE, 'DD-MON-YYYY HH24:MI:SS') || UTL_TCP.crlf);\n  UTL_SMTP.write_data(l_mail_conn, 'To: ' || destinatario || UTL_TCP.crlf);\n  UTL_SMTP.write_data(l_mail_conn, 'From: ' || mittente || UTL_TCP.crlf);\n  UTL_SMTP.write_data(l_mail_conn, 'Subject: ' || oggetto || UTL_TCP.crlf);\n  UTL_SMTP.write_data(l_mail_conn, 'Reply-To: ' || mittente || UTL_TCP.crlf);\n  UTL_SMTP.write_data(l_mail_conn, 'MIME-Version: 1.0' || UTL_TCP.crlf);\n  UTL_SMTP.write_data(l_mail_conn, 'Content-Type: multipart/mixed; boundary=&quot;' || l_boundary || '&quot;' || UTL_TCP.crlf || UTL_TCP.crlf);\n  \n  IF corpo IS NOT NULL THEN\n    UTL_SMTP.write_data(l_mail_conn, '--' || l_boundary || UTL_TCP.crlf);\n    UTL_SMTP.write_data(l_mail_conn, 'Content-Type: text/plain; charset=&quot;iso-8859-1&quot;' || UTL_TCP.crlf || UTL_TCP.crlf);\n\n    UTL_SMTP.write_data(l_mail_conn, corpo);\n    UTL_SMTP.write_data(l_mail_conn, UTL_TCP.crlf || UTL_TCP.crlf);\n  END IF;\n\n  IF nomeAllegato IS NOT NULL THEN\n    UTL_SMTP.write_data(l_mail_conn, '--' || l_boundary || UTL_TCP.crlf);\n    UTL_SMTP.write_data(l_mail_conn, 'Content-Type: ' || v_mime || '; name=&quot;' || nomeAllegato || '&quot;' || UTL_TCP.crlf);\n    UTL_SMTP.write_data(l_mail_conn, 'Content-Transfer-Encoding: base64' || UTL_TCP.crlf);\n    UTL_SMTP.write_data(l_mail_conn, 'Content-Disposition: attachment; filename=&quot;' || nomeAllegato || '&quot;' || UTL_TCP.crlf || UTL_TCP.crlf);\n\n    FOR i IN 0 .. TRUNC((DBMS_LOB.getlength(allegato) - 1 )/l_step) LOOP\n      UTL_SMTP.write_data(l_mail_conn, UTL_RAW.cast_to_varchar2(UTL_ENCODE.base64_encode(DBMS_LOB.substr(allegato, l_step, i * l_step + 1))));\n    END LOOP;\n\n    UTL_SMTP.write_data(l_mail_conn, UTL_TCP.crlf || UTL_TCP.crlf);\n  END IF;\n  \n  UTL_SMTP.write_data(l_mail_conn, '--' || l_boundary || '--' || UTL_TCP.crlf);\n  UTL_SMTP.close_data(l_mail_conn);\n\n  UTL_SMTP.quit(l_mail_conn);\nEND;\n</code></pre>\n<p>To get this I've used the code written before creating the blob object in this way:</p>\n<pre><code>BLOB blob = BLOB.createTemporary(WSCallHelper.getNativeConnection(dataSource.getConnection()), false, BLOB.DURATION_SESSION);\nFileInputStream is = new FileInputStream(filePath);\nbyte[] buffer = new byte[30000000];\nByteArrayOutputStream baos = new ByteArrayOutputStream();\n\nint bytesRead;\nwhile ((bytesRead = is.read(buffer)) != -1) {\n    baos.write(buffer, 0, bytesRead);\n}\n\nblob.setBytes(1, baos.toByteArray());       \n</code></pre>\n<p>Any suggestions?</p>\n"},{"tags":["java","regex"],"comments":[{"owner":{"account_id":7089168,"reputation":157110,"user_id":5424988,"display_name":"The fourth bird"},"score":1,"creation_date":1695756581,"post_id":77182842,"comment_id":136066339,"body_markdown":"Perhaps like `^https?://\\S*\\.fun\\.foo\\.bar\\.net(?::\\d+)?(?:[/?#]\\S*)?$` See https://regex101.com/r/cjFaXl/1 In Java you would have to double escape the backslashes like `\\\\.fun` etc..","body":"Perhaps like <code>^https?:&#47;&#47;\\S*\\.fun\\.foo\\.bar\\.net(?::\\d+)?(?:[&#47;?#]\\S*)?$</code> See <a href=\"https://regex101.com/r/cjFaXl/1\" rel=\"nofollow noreferrer\">regex101.com/r/cjFaXl/1</a> In Java you would have to double escape the backslashes like <code>\\\\.fun</code> etc.."},{"owner":{"account_id":3847859,"reputation":7139,"user_id":3188761,"accept_rate":55,"display_name":"90abyss"},"score":1,"creation_date":1695758698,"post_id":77182842,"comment_id":136066674,"body_markdown":"thanks @Thefourthbird! that is working","body":"thanks @Thefourthbird! that is working"},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":2,"creation_date":1695760869,"post_id":77182842,"comment_id":136067047,"body_markdown":"Do you have to use a regular expression for this?  `URI.create(httpRequest.getRequestURL().toString()).getHost().endsWith(&quot;.fun.foo.bar.net&quot;)` will do the same thing.","body":"Do you have to use a regular expression for this?  <code>URI.create(httpRequest.getRequestURL().toString()).getHost()&zwnj;&#8203;.endsWith(&quot;.fun.foo.&zwnj;&#8203;bar.net&quot;)</code> will do the same thing."},{"owner":{"account_id":3847859,"reputation":7139,"user_id":3188761,"accept_rate":55,"display_name":"90abyss"},"score":0,"creation_date":1695767173,"post_id":77182842,"comment_id":136067826,"body_markdown":"@VGR thats a great idea! thanks","body":"@VGR thats a great idea! thanks"}],"answers":[{"tags":[],"owner":{"account_id":7089168,"reputation":157110,"user_id":5424988,"display_name":"The fourth bird"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1695759683,"creation_date":1695759683,"answer_id":77183175,"question_id":77182842,"body_markdown":"For your example string, you might use:\r\n\r\n    ^https?://\\S*\\.fun\\.foo\\.bar\\.net(?::\\d+)?(?:[/?#]\\S*)?$\r\n\r\nThe pattern matches:\r\n\r\n- `^` Start of string\r\n- `https?://` Match the protocol with optional `s`\r\n- `\\S*` Match optional non whitespace characters\r\n- `\\.fun\\.foo\\.bar\\.net` Match the part of interest (escape the dot to match it literally)\r\n- `(?::\\d+)?` Optionally match the port\r\n- `(?:[/?#]\\S*)?` Optionally match one of `/` `?` `#` followed by optional non whitespace characters\r\n- `$` End of string\r\n\r\n[Regex demo](https://regex101.com/r/cjFaXl/1)\r\n\r\nIn Java with the doubled backslashes:\r\n\r\n    String regex = &quot;^https?://\\\\S*\\\\.fun\\\\.foo\\\\.bar\\\\.net(?::\\\\d+)?(?:[/?#]\\\\S*)?$&quot;;","title":"Create a filter for URL that follows a specific format","body":"<p>For your example string, you might use:</p>\n<pre><code>^https?://\\S*\\.fun\\.foo\\.bar\\.net(?::\\d+)?(?:[/?#]\\S*)?$\n</code></pre>\n<p>The pattern matches:</p>\n<ul>\n<li><code>^</code> Start of string</li>\n<li><code>https?://</code> Match the protocol with optional <code>s</code></li>\n<li><code>\\S*</code> Match optional non whitespace characters</li>\n<li><code>\\.fun\\.foo\\.bar\\.net</code> Match the part of interest (escape the dot to match it literally)</li>\n<li><code>(?::\\d+)?</code> Optionally match the port</li>\n<li><code>(?:[/?#]\\S*)?</code> Optionally match one of <code>/</code> <code>?</code> <code>#</code> followed by optional non whitespace characters</li>\n<li><code>$</code> End of string</li>\n</ul>\n<p><a href=\"https://regex101.com/r/cjFaXl/1\" rel=\"nofollow noreferrer\">Regex demo</a></p>\n<p>In Java with the doubled backslashes:</p>\n<pre><code>String regex = &quot;^https?://\\\\S*\\\\.fun\\\\.foo\\\\.bar\\\\.net(?::\\\\d+)?(?:[/?#]\\\\S*)?$&quot;;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695763585,"creation_date":1695760882,"answer_id":77183289,"question_id":77182842,"body_markdown":"&gt; _&quot;... I only want to filter in the requests where `w.x.y.z` is strictly:_\r\n&gt;\r\n&gt;     fun.foo.bar.net\r\n&gt; ... &quot;\r\n\r\nYou can simplify your code with a _[Matcher#matches](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/regex/Matcher.html#matches())_ call, which can be accessed via _[String#matches](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/String.html#matches(java.lang.String))_.\r\n\r\n\r\n&gt; _&quot;... I am trying to do with this but I am not quite sure how do I create the regex. ...&quot;_\r\n\r\nYou can use the following pattern to match the entire text.\\\r\nFor a _match_ call, the starting `^` and ending `$` are optional.\r\n\r\n```none\r\n^http://(?:[^.]+\\.){2}fun\\.foo\\.bar\\.net(?::.+|/.*)$\r\n```\r\n\r\nAs a note, I am presuming you are expecting the _&quot;fun.foo.bar.net&quot;_ to follow two _domain-labels_, _&quot;aa-bb.cc-dd-ee.&quot;_.\\\r\nIf this isn&#39;t the case, change the `{2}` to a `*`.\r\n\r\n```none\r\n^http://(?:[^.]+\\.)*fun\\.foo\\.bar\\.net(?::.+|/.*)$\r\n```\r\n\r\nHere is an example.\r\n\r\n```java\r\nString s = httpRequest.getRequestURL().toString();\r\nString r = &quot;http://(?:[^.]+\\.){2}fun\\.foo\\.bar\\.net(?::.+|/.*)&quot;;\r\nboolean match = s.matches(r);\r\n```","title":"Create a filter for URL that follows a specific format","body":"<blockquote>\n<p><em>&quot;... I only want to filter in the requests where <code>w.x.y.z</code> is strictly:</em></p>\n<pre><code>fun.foo.bar.net\n</code></pre>\n<p>... &quot;</p>\n</blockquote>\n<p>You can simplify your code with a <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/regex/Matcher.html#matches()\" rel=\"nofollow noreferrer\">Matcher#matches</a></em> call, which can be accessed via <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/String.html#matches(java.lang.String)\" rel=\"nofollow noreferrer\">String#matches</a></em>.</p>\n<blockquote>\n<p><em>&quot;... I am trying to do with this but I am not quite sure how do I create the regex. ...&quot;</em></p>\n</blockquote>\n<p>You can use the following pattern to match the entire text.<br />\nFor a <em>match</em> call, the starting <code>^</code> and ending <code>$</code> are optional.</p>\n<pre class=\"lang-none prettyprint-override\"><code>^http://(?:[^.]+\\.){2}fun\\.foo\\.bar\\.net(?::.+|/.*)$\n</code></pre>\n<p>As a note, I am presuming you are expecting the <em>&quot;fun.foo.bar.net&quot;</em> to follow two <em>domain-labels</em>, <em>&quot;aa-bb.cc-dd-ee.&quot;</em>.<br />\nIf this isn't the case, change the <code>{2}</code> to a <code>*</code>.</p>\n<pre class=\"lang-none prettyprint-override\"><code>^http://(?:[^.]+\\.)*fun\\.foo\\.bar\\.net(?::.+|/.*)$\n</code></pre>\n<p>Here is an example.</p>\n<pre class=\"lang-java prettyprint-override\"><code>String s = httpRequest.getRequestURL().toString();\nString r = &quot;http://(?:[^.]+\\.){2}fun\\.foo\\.bar\\.net(?::.+|/.*)&quot;;\nboolean match = s.matches(r);\n</code></pre>\n"}],"owner":{"account_id":3847859,"reputation":7139,"user_id":3188761,"accept_rate":55,"display_name":"90abyss"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":63,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77183175,"answer_count":2,"score":0,"last_activity_date":1695763585,"creation_date":1695755816,"question_id":77182842,"body_markdown":"I have a URL of this form:\r\n\r\n    http://aa-bb.cc-dd-ee.w.x.y.z:8080/funservice/graphql\r\n\r\nI only want to filter in the requests where `w.x.y.z` is strictly:\r\n\r\n    fun.foo.bar.net\r\n\r\nI am trying to do with this but I am not quite sure how do I create the regex. \r\n\r\n    private static final Pattern pat = Pattern.compile(&quot;http(.*?).fun.foo.bar.net(.*?)&quot;);\r\n    \r\n    Matcher matcher = pat.matcher(httpRequest.getRequestURL().toString());\r\n    while (matcher.find()) {\r\n         for (int j = 0; j &lt;= matcher.groupCount(); j++) {\r\n              String temp = matcher.group(j);\r\n           }\r\n    }\r\n                \r\n            \r\n\r\n","title":"Create a filter for URL that follows a specific format","body":"<p>I have a URL of this form:</p>\n<pre><code>http://aa-bb.cc-dd-ee.w.x.y.z:8080/funservice/graphql\n</code></pre>\n<p>I only want to filter in the requests where <code>w.x.y.z</code> is strictly:</p>\n<pre><code>fun.foo.bar.net\n</code></pre>\n<p>I am trying to do with this but I am not quite sure how do I create the regex.</p>\n<pre><code>private static final Pattern pat = Pattern.compile(&quot;http(.*?).fun.foo.bar.net(.*?)&quot;);\n\nMatcher matcher = pat.matcher(httpRequest.getRequestURL().toString());\nwhile (matcher.find()) {\n     for (int j = 0; j &lt;= matcher.groupCount(); j++) {\n          String temp = matcher.group(j);\n       }\n}\n            \n        \n</code></pre>\n"},{"tags":["java","android","delphi","cloud","google-cloud-messaging"],"comments":[{"owner":{"account_id":3312412,"reputation":381,"user_id":2785563,"accept_rate":25,"display_name":"FerretDriver"},"score":0,"creation_date":1379438928,"post_id":18838485,"comment_id":27822685,"body_markdown":"I&#39;m posting the registration information to some processing scripts on a web server. When I need to communicate to GCM I have a server side process which handles that which is in Delphi.","body":"I&#39;m posting the registration information to some processing scripts on a web server. When I need to communicate to GCM I have a server side process which handles that which is in Delphi."}],"answers":[{"tags":[],"owner":{"account_id":1146772,"reputation":31458,"user_id":1129332,"accept_rate":61,"display_name":"Ilya Gazman"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1390488970,"creation_date":1390488970,"answer_id":21311640,"question_id":18838485,"body_markdown":"I think that creating a bridge to Java could be a good idea. Take a look at [this][1] post about how to do it. And [here][2] you can find a tutorial for implementing client side GCM in Java.\r\n\r\n\r\n  [1]: http://www.pclviewer.com/android/androidJNI.html\r\n  [2]: http://developer.android.com/google/gcm/client.html","title":"Google Cloud Messaging in Delphi XE5?","body":"<p>I think that creating a bridge to Java could be a good idea. Take a look at <a href=\"http://www.pclviewer.com/android/androidJNI.html\" rel=\"nofollow\">this</a> post about how to do it. And <a href=\"http://developer.android.com/google/gcm/client.html\" rel=\"nofollow\">here</a> you can find a tutorial for implementing client side GCM in Java.</p>\n"},{"tags":[],"owner":{"account_id":3616503,"reputation":7466,"user_id":3016219,"display_name":"Avanz"},"down_vote_count":1,"up_vote_count":21,"is_accepted":false,"score":20,"last_activity_date":1390870351,"creation_date":1390814466,"answer_id":21377021,"question_id":18838485,"body_markdown":"You interface Java with Delphi using JNI. The JNI allows you to call in both directions: Java to Delphi or Delphi to Java. So you can extend your Delphi applications with [Java classes][1].\r\n\r\nFor implementing what you want on Android, doing it in Java will be the easier path to follow, as some available examples do exactly what you have in mind. Just have a look:\r\n\r\n - [Implementing Push Notification / Google Cloud Messaging for Android][2]\r\n - [Android* Client App Using Cloud-Based Alert Service][3]\r\n - [Github Gist - GCMIntentService.java][4]\r\n\r\nTo interface Java JNI and Delphi, you can follow detailed steps, thus allowing a [smooth communication][5] between front end and back end of your application.\r\n\r\nIf you decide to re-use some of the code, remember to give appropriate credit to the authors.\r\n\r\n\r\n  [1]: http://edn.embarcadero.com/article/27192\r\n  [2]: http://fryerblog.com/post/30057483199/implementing-push-notifications-with-gcm\r\n  [3]: http://software.intel.com/en-us/articles/a-case-study-of-an-android-client-app-using-cloud-based-alert-service\r\n  [4]: https://gist.github.com/okiess/3156229\r\n  [5]: http://www.pacifier.com/~mmead/jni/delphi/JEDI/DOCS/delphi-jni-1.html","title":"Google Cloud Messaging in Delphi XE5?","body":"<p>You interface Java with Delphi using JNI. The JNI allows you to call in both directions: Java to Delphi or Delphi to Java. So you can extend your Delphi applications with <a href=\"http://edn.embarcadero.com/article/27192\" rel=\"noreferrer\">Java classes</a>.</p>\n\n<p>For implementing what you want on Android, doing it in Java will be the easier path to follow, as some available examples do exactly what you have in mind. Just have a look:</p>\n\n<ul>\n<li><a href=\"http://fryerblog.com/post/30057483199/implementing-push-notifications-with-gcm\" rel=\"noreferrer\">Implementing Push Notification / Google Cloud Messaging for Android</a></li>\n<li><a href=\"http://software.intel.com/en-us/articles/a-case-study-of-an-android-client-app-using-cloud-based-alert-service\" rel=\"noreferrer\">Android* Client App Using Cloud-Based Alert Service</a></li>\n<li><a href=\"https://gist.github.com/okiess/3156229\" rel=\"noreferrer\">Github Gist - GCMIntentService.java</a></li>\n</ul>\n\n<p>To interface Java JNI and Delphi, you can follow detailed steps, thus allowing a <a href=\"http://www.pacifier.com/~mmead/jni/delphi/JEDI/DOCS/delphi-jni-1.html\" rel=\"noreferrer\">smooth communication</a> between front end and back end of your application.</p>\n\n<p>If you decide to re-use some of the code, remember to give appropriate credit to the authors.</p>\n"},{"tags":[],"owner":{"account_id":236130,"reputation":5021,"user_id":503413,"accept_rate":78,"display_name":"Olimpiu POP"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1390916058,"creation_date":1390916058,"answer_id":21407022,"question_id":18838485,"body_markdown":"I am glad to see delphi is evolving and adapting to current needs. The post made me curios so I looked around a little bit so I came across these resources:\r\n\r\n[forum post on embarcadero][1] that recommends using [datasnap][2] to solve the communication issue between GCM and the delphi side.\r\n\r\nI hope this will help somebody.\r\n\r\n\r\n[1]:https://forums.embarcadero.com/thread.jspa?threadID=93361\r\n[2]:http://docwiki.embarcadero.com/RADStudio/XE5/en/Developing_DataSnap_Applications","title":"Google Cloud Messaging in Delphi XE5?","body":"<p>I am glad to see delphi is evolving and adapting to current needs. The post made me curios so I looked around a little bit so I came across these resources:</p>\n\n<p><a href=\"https://forums.embarcadero.com/thread.jspa?threadID=93361\" rel=\"nofollow\">forum post on embarcadero</a> that recommends using <a href=\"http://docwiki.embarcadero.com/RADStudio/XE5/en/Developing_DataSnap_Applications\" rel=\"nofollow\">datasnap</a> to solve the communication issue between GCM and the delphi side.</p>\n\n<p>I hope this will help somebody.</p>\n"},{"tags":[],"owner":{"account_id":71647,"reputation":1212,"user_id":207219,"accept_rate":83,"display_name":"ioan ghip"},"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1695762940,"creation_date":1391036786,"answer_id":21444622,"question_id":18838485,"body_markdown":"I got GCM working with Delphi and [I made a sample component][1] to take care of registering and receiving the GCM messages.\r\n\r\n**NOTE**: This is just a rough test code, I&#39;m not using it in any real application (yet). Please fell free to modify and improve, and if you find bugs, please post back.\r\n\r\nBig thanks to Brian Long and his article on [Android Services][2].\r\n\r\nGet your GCM sender ID (it&#39;s your Project Number from gcm console) and your GCM API id (create a key for server application in GCM console), you&#39;ll need them (see the pictures at the bottom).\r\n\r\nFirst of all, you need a modified classes.dex file. You can create this by running the bat file Java dir in the archive, or you can use the one that is already compiled by me (also included in the archive). \r\n\r\nYou have to **ADD** the new classes.dex to your Android Deployment and **UNCHECK** the embarcadero one: \r\n\r\n[![classes.dex deployment][3]][3]\r\n\r\nThen, you need to edit your AndroidManifest.template.xml and add right after `&lt;%uses-permission%&gt;`:\r\n\r\n    &lt;%uses-permission%&gt;\r\n    &lt;uses-permission android:name=&quot;com.google.android.c2dm.permission.RECEIVE&quot; /&gt;\r\n\r\nand right after `android:theme=&quot;%theme%&quot;&gt;`\r\n\r\n        &lt;receiver\r\n            android:name=&quot;com.ioan.delphi.GCMReceiver&quot;\r\n            android:permission=&quot;com.google.android.c2dm.permission.SEND&quot; &gt;\r\n            &lt;intent-filter&gt;\r\n                &lt;action android:name=&quot;com.google.android.c2dm.intent.RECEIVE&quot; /&gt;\r\n                &lt;category android:name=&quot;%package%&quot; /&gt;\r\n            &lt;/intent-filter&gt;\r\n        &lt;/receiver&gt;\r\n\r\n\r\nIn your application, declare the gcmnotification unit:\r\n\r\n    uses\r\n      gcmnotification;\r\n\r\n\r\n\r\nand then in your form declare a variable of the TGCMNotification type and a procedure that you will link to the TGCMNotification.OnReceiveGCMNotification event:\r\n\r\n    type\r\n      TForm8 = class(TForm)\r\n        //....\r\n      private\r\n        { Private declarations }\r\n      public\r\n        { Public declarations }\r\n        gcmn: TGCMNotification;\r\n        procedure OnNotification(Sender: TObject; ANotification: TGCMNotificationMessage);\r\n      end;\r\n\r\n\r\n    procedure TForm8.FormCreate(Sender: TObject);\r\n    begin\r\n       gcmn := TGCMNotification.Create(self);\r\n       gcmn.OnReceiveGCMNotification := OnNotification;\r\n    end;\r\n\r\nPut in the SenderID your GCM Project Number. To register you APP with GCM, call DoRegister:\r\n\r\n    procedure TForm8.Button1Click(Sender: TObject);\r\n    begin\r\n      gcmn.SenderID := YOUR_GCM_SENDERID;\r\n      if gcmn.DoRegister then\r\n        Toast(&#39;Successfully registered with GCM.&#39;);\r\n    end;\r\n\r\nIf the DoRegister returns true (successfully registered), gcmn.RegistrationID will have the unique ID you need for sending messages to this device.\r\n\r\nAnd you&#39;ll receive messages in event procedure:\r\n\r\n    procedure TForm8.OnNotification(Sender: TObject;  ANotification: TGCMNotificationMessage);\r\n    begin\r\n      Memo1.Lines.Add(&#39;Received: &#39; + ANotification.Body);\r\n    end;\r\n\r\n.. and that&#39;s **ALL** you need it for Receiving. Cool, huh? :-)\r\n\r\n\r\n\r\nTo send, just use TIdHttp:\r\n\r\n    procedure TForm8.Button2Click(Sender: TObject);\r\n    const\r\n      sendUrl = &#39;https://android.googleapis.com/gcm/send&#39;;\r\n    var\r\n      Params: TStringList;\r\n      AuthHeader: STring;\r\n      idHTTP: TIDHTTP;\r\n      SSLIOHandler: TIdSSLIOHandlerSocketOpenSSL;\r\n    begin\r\n      idHTTP := TIDHTTP.Create(nil);\r\n      try\r\n        SslIOHandler := TIdSSLIOHandlerSocketOpenSSL.Create(nil);\r\n        idHTTP.IOHandler := SSLIOHandler;\r\n        idHTTP.HTTPOptions := [];\r\n        Params := TStringList.Create;\r\n        try\r\n          Params.Add(&#39;registration_id=&#39;+ gcmn.RegistrationID);\r\n          Params.Values[&#39;data.message&#39;] := &#39;test: &#39; + FormatDateTime(&#39;yy-mm-dd hh:nn:ss&#39;, Now);\r\n          idHTTP.Request.Host := sendUrl;\r\n          AuthHeader := &#39;Authorization: key=&#39; + YOUR_API_ID;\r\n          idHTTP.Request.CustomHeaders.Add(AuthHeader);\r\n          IdHTTP.Request.ContentType := &#39;application/x-www-form-urlencoded;charset=UTF-8&#39;;\r\n          Memo1.Lines.Add(&#39;Send result: &#39; + idHTTP.Post(sendUrl, Params));\r\n        finally\r\n          Params.Free;\r\n        end;\r\n      finally\r\n        FreeAndNil(idHTTP);\r\n      end;\r\n    end;\r\n\r\nNext I&#39;m going to post the units you need, just save them in the same place with your application (or just download the whole thing from [HERE][1]).\r\n\r\ngcmnotification.pas\r\n\r\n    unit gcmnotification;\r\n    \r\n    interface\r\n    {$IFDEF ANDROID}\r\n    uses\r\n      System.SysUtils,\r\n      System.Classes,\r\n      FMX.Helpers.Android,\r\n      Androidapi.JNI.PlayServices,\r\n      Androidapi.JNI.GraphicsContentViewText,\r\n      Androidapi.JNIBridge,\r\n      Androidapi.JNI.JavaTypes;\r\n    \r\n    type\r\n      TGCMNotificationMessageKind = (nmMESSAGE_TYPE_MESSAGE, nmMESSAGE_TYPE_DELETED, nmMESSAGE_TYPE_SEND_ERROR);\r\n    \r\n      { Discription of notification for Notification Center }\r\n      TGCMNotificationMessage = class (TPersistent)\r\n      private\r\n        FKind: TGCMNotificationMessageKind;\r\n        FSender: string;\r\n        FWhat: integer;\r\n        FBody: string;\r\n      protected\r\n        procedure AssignTo(Dest: TPersistent); override;\r\n      public\r\n        { Unique identificator for determenation notification in Notification list }\r\n        property Kind: TGCMNotificationMessageKind read FKind write FKind;\r\n        property Sender: string read FSender write FSender;\r\n        property What: integer read FWhat write FWhat;\r\n        property Body: string read FBody write FBody;\r\n        constructor Create;\r\n      end;\r\n    \r\n      TOnReceiveGCMNotification = procedure (Sender: TObject; ANotification: TGCMNotificationMessage) of object;\r\n    \r\n      TGCMNotification = class(TComponent)\r\n      strict private\r\n        { Private declarations }\r\n        FRegistrationID: string;\r\n        FSenderID: string;\r\n        FOnReceiveGCMNotification: TOnReceiveGCMNotification;\r\n        FReceiver: JBroadcastReceiver;\r\n        FAlreadyRegistered: boolean;\r\n        function CheckPlayServicesSupport: boolean;\r\n      protected\r\n        { Protected declarations }\r\n      public\r\n        { Public declarations }\r\n        constructor Create(AOwner: TComponent); override;\r\n        destructor Destroy; override;\r\n        function DoRegister: boolean;\r\n        function GetGCMInstance: JGoogleCloudMessaging;\r\n      published\r\n        { Published declarations }\r\n        property SenderID: string read FSenderID write FSenderID;\r\n        property RegistrationID: string read FRegistrationID write FRegistrationID;\r\n        property OnReceiveGCMNotification: TOnReceiveGCMNotification read FOnReceiveGCMNotification write FOnReceiveGCMNotification;\r\n      end;\r\n    \r\n    {$ENDIF}\r\n    implementation\r\n    {$IFDEF ANDROID}\r\n    uses\r\n      uGCMReceiver;\r\n    \r\n    \r\n    { TGCMNotification }\r\n    function TGCMNotification.CheckPlayServicesSupport: boolean;\r\n    var\r\n      resultCode: integer;\r\n    begin\r\n      resultCode := TJGooglePlayServicesUtil.JavaClass.isGooglePlayServicesAvailable(SharedActivity);\r\n      result := (resultCode = TJConnectionResult.JavaClass.SUCCESS);\r\n    end;\r\n    \r\n    constructor TGCMNotification.Create(AOwner: TComponent);\r\n    var\r\n      Filter: JIntentFilter;\r\n    begin\r\n      inherited;\r\n      Filter := TJIntentFilter.Create;\r\n      FReceiver := TJGCMReceiver.Create(Self);\r\n      SharedActivity.registerReceiver(FReceiver, Filter);\r\n      FAlreadyRegistered := false;\r\n    end;\r\n    \r\n    destructor TGCMNotification.Destroy;\r\n    begin\r\n      SharedActivity.unregisterReceiver(FReceiver);\r\n      FReceiver := nil;\r\n      inherited;\r\n    end;\r\n    \r\n    function TGCMNotification.DoRegister: boolean;\r\n    var\r\n      p: TJavaObjectArray&lt;JString&gt;;\r\n      gcm: JGoogleCloudMessaging;\r\n    begin\r\n      if FAlreadyRegistered then\r\n        result := true\r\n      else\r\n      begin\r\n        if CheckPlayServicesSupport then\r\n        begin\r\n          gcm := GetGCMInstance;\r\n          p := TJavaObjectArray&lt;JString&gt;.Create(1);\r\n          p.Items[0] := StringToJString(FSenderID);\r\n          FRegistrationID := JStringToString(gcm.register(p));\r\n          FAlreadyRegistered := (FRegistrationID &lt;&gt; &#39;&#39;);\r\n          result := FAlreadyRegistered;\r\n        end\r\n        else\r\n          result := false;\r\n      end;\r\n    end;\r\n    \r\n    function TGCMNotification.GetGCMInstance: JGoogleCloudMessaging;\r\n    begin\r\n      result := TJGoogleCloudMessaging.JavaClass.getInstance(SharedActivity.getApplicationContext);\r\n    end;\r\n    \r\n    { TGCMNotificationMessage }\r\n    \r\n    procedure TGCMNotificationMessage.AssignTo(Dest: TPersistent);\r\n    var\r\n      DestNotification: TGCMNotificationMessage;\r\n    begin\r\n      if Dest is TGCMNotificationMessage then\r\n      begin\r\n        DestNotification := Dest as TGCMNotificationMessage;\r\n        DestNotification.Kind := Kind;\r\n        DestNotification.What := What;\r\n        DestNotification.Sender := Sender;\r\n        DestNotification.Body := Body;\r\n      end\r\n      else\r\n        inherited AssignTo(Dest);\r\n    end;\r\n    \r\n    constructor TGCMNotificationMessage.Create;\r\n    begin\r\n      Body := &#39;&#39;;\r\n    end;\r\n    {$ENDIF}\r\n    end.\r\n\r\nuGCMReceiver.pas\r\n\r\n    unit uGCMReceiver;\r\n    \r\n    interface\r\n    {$IFDEF ANDROID}\r\n    uses\r\n      FMX.Types,\r\n      Androidapi.JNIBridge,\r\n      Androidapi.JNI.GraphicsContentViewText,\r\n      gcmnotification;\r\n    \r\n    type\r\n      JGCMReceiverClass = interface(JBroadcastReceiverClass)\r\n      [&#39;{9D967671-9CD8-483A-98C8-161071CE7B64}&#39;]\r\n        {Methods}\r\n      end;\r\n    \r\n      [JavaSignature(&#39;com/ioan/delphi/GCMReceiver&#39;)]\r\n      JGCMReceiver = interface(JBroadcastReceiver)\r\n      [&#39;{4B30D537-5221-4451-893D-7916ED11CE1F}&#39;]\r\n        {Methods}\r\n      end;\r\n    \r\n    \r\n      TJGCMReceiver = class(TJavaGenericImport&lt;JGCMReceiverClass, JGCMReceiver&gt;)\r\n      private\r\n        FOwningComponent: TGCMNotification;\r\n      protected\r\n        constructor _Create(AOwner: TGCMNotification);\r\n      public\r\n        class function Create(AOwner: TGCMNotification): JGCMReceiver;\r\n        procedure OnReceive(Context: JContext; ReceivedIntent: JIntent);\r\n      end;\r\n    {$ENDIF}\r\n    implementation\r\n    {$IFDEF ANDROID}\r\n    uses\r\n      System.Classes,\r\n      System.SysUtils,\r\n      FMX.Helpers.Android,\r\n      Androidapi.NativeActivity,\r\n      Androidapi.JNI,\r\n      Androidapi.JNI.JavaTypes,\r\n      Androidapi.JNI.Os,\r\n      Androidapi.JNI.PlayServices;\r\n    \r\n    {$REGION &#39;JNI setup code and callback&#39;}\r\n    var\r\n      GCMReceiver: TJGCMReceiver;\r\n      ARNContext: JContext;\r\n      ARNReceivedIntent: JIntent;\r\n    \r\n    procedure GCMReceiverOnReceiveThreadSwitcher;\r\n    begin\r\n      Log.d(&#39;+gcmReceiverOnReceiveThreadSwitcher&#39;);\r\n      Log.d(&#39;Thread: Main: %.8x, Current: %.8x, Java:%.8d (%2:.8x)&#39;,\r\n        [MainThreadID, TThread.CurrentThread.ThreadID,\r\n        TJThread.JavaClass.CurrentThread.getId]);\r\n      GCMReceiver.OnReceive(ARNContext,ARNReceivedIntent );\r\n      Log.d(&#39;-gcmReceiverOnReceiveThreadSwitcher&#39;);\r\n    end;\r\n    \r\n    //This is called from the Java activity&#39;s onReceiveNative() method\r\n    procedure GCMReceiverOnReceiveNative(PEnv: PJNIEnv; This: JNIObject; JNIContext, JNIReceivedIntent: JNIObject); cdecl;\r\n    begin\r\n      Log.d(&#39;+gcmReceiverOnReceiveNative&#39;);\r\n      Log.d(&#39;Thread: Main: %.8x, Current: %.8x, Java:%.8d (%2:.8x)&#39;,\r\n        [MainThreadID, TThread.CurrentThread.ThreadID,\r\n        TJThread.JavaClass.CurrentThread.getId]);\r\n      ARNContext := TJContext.Wrap(JNIContext);\r\n      ARNReceivedIntent := TJIntent.Wrap(JNIReceivedIntent);\r\n      Log.d(&#39;Calling Synchronize&#39;);\r\n      TThread.Synchronize(nil, GCMReceiverOnReceiveThreadSwitcher);\r\n      Log.d(&#39;Synchronize is over&#39;);\r\n      Log.d(&#39;-gcmReceiverOnReceiveNative&#39;);\r\n    end;\r\n    \r\n    procedure RegisterDelphiNativeMethods;\r\n    var\r\n      PEnv: PJNIEnv;\r\n      ReceiverClass: JNIClass;\r\n      NativeMethod: JNINativeMethod;\r\n    begin\r\n      Log.d(&#39;Starting the GCMReceiver JNI stuff&#39;);\r\n    \r\n      PEnv := TJNIResolver.GetJNIEnv;\r\n    \r\n      Log.d(&#39;Registering interop methods&#39;);\r\n    \r\n      NativeMethod.Name := &#39;gcmReceiverOnReceiveNative&#39;;\r\n      NativeMethod.Signature := &#39;(Landroid/content/Context;Landroid/content/Intent;)V&#39;;\r\n      NativeMethod.FnPtr := @GCMReceiverOnReceiveNative;\r\n    \r\n      ReceiverClass := TJNIResolver.GetJavaClassID(&#39;com.ioan.delphi.GCMReceiver&#39;);\r\n    \r\n      PEnv^.RegisterNatives(PEnv, ReceiverClass, @NativeMethod, 1);\r\n    \r\n      PEnv^.DeleteLocalRef(PEnv, ReceiverClass);\r\n    end;\r\n    {$ENDREGION}\r\n    \r\n    { TActivityReceiver }\r\n    \r\n    constructor TJGCMReceiver._Create(AOwner: TGCMNotification);\r\n    begin\r\n      inherited;\r\n      FOwningComponent := AOwner;\r\n      Log.d(&#39;TJGCMReceiver._Create constructor&#39;);\r\n    end;\r\n    \r\n    class function TJGCMReceiver.Create(AOwner: TGCMNotification): JGCMReceiver;\r\n    begin\r\n      Log.d(&#39;TJGCMReceiver.Create class function&#39;);\r\n      Result := inherited Create;\r\n      GCMReceiver := TJGCMReceiver._Create(AOwner);\r\n    end;\r\n    \r\n    procedure TJGCMReceiver.OnReceive(Context: JContext;  ReceivedIntent: JIntent);\r\n    var\r\n      extras: JBundle;\r\n      gcm: JGoogleCloudMessaging;\r\n      messageType: JString;\r\n      noti: TGCMNotificationMessage;\r\n    begin\r\n      if Assigned(FOwningComponent.OnReceiveGCMNotification) then\r\n      begin\r\n        noti := TGCMNotificationMessage.Create;\r\n        try\r\n          Log.d(&#39;Received a message!&#39;);\r\n          extras := ReceivedIntent.getExtras();\r\n          gcm := FOwningComponent.GetGCMInstance;\r\n          // The getMessageType() intent parameter must be the intent you received\r\n          // in your BroadcastReceiver.\r\n          messageType := gcm.getMessageType(ReceivedIntent);\r\n          if not extras.isEmpty() then\r\n          begin\r\n              {*\r\n               * Filter messages based on message type. Since it is likely that GCM will be\r\n               * extended in the future with new message types, just ignore any message types you&#39;re\r\n               * not interested in, or that you don&#39;t recognize.\r\n               *}\r\n              if TJGoogleCloudMessaging.JavaClass.MESSAGE_TYPE_SEND_ERROR.equals(messageType) then\r\n              begin\r\n                // It&#39;s an error.\r\n                noti.Kind := TGCMNotificationMessageKind.nmMESSAGE_TYPE_SEND_ERROR;\r\n                FOwningComponent.OnReceiveGCMNotification(Self, noti);\r\n              end\r\n              else\r\n              if TJGoogleCloudMessaging.JavaClass.MESSAGE_TYPE_DELETED.equals(messageType) then\r\n              begin\r\n                // Deleted messages on the server.\r\n                noti.Kind := TGCMNotificationMessageKind.nmMESSAGE_TYPE_DELETED;\r\n                FOwningComponent.OnReceiveGCMNotification(Self, noti);\r\n              end\r\n              else\r\n              if TJGoogleCloudMessaging.JavaClass.MESSAGE_TYPE_MESSAGE.equals(messageType) then\r\n              begin\r\n                // It&#39;s a regular GCM message, do some work.\r\n                noti.Kind := TGCMNotificationMessageKind.nmMESSAGE_TYPE_MESSAGE;\r\n                noti.Sender := JStringToString(extras.getString(StringToJString(&#39;sender&#39;)));\r\n                noti.What := StrToIntDef(JStringToString(extras.getString(StringToJString(&#39;what&#39;))), 0);\r\n                noti.Body := JStringToString(extras.getString(StringToJString(&#39;message&#39;)));\r\n                FOwningComponent.OnReceiveGCMNotification(Self, noti);\r\n              end;\r\n          end;\r\n        finally\r\n          noti.Free;\r\n        end;\r\n      end;\r\n    end;\r\n    \r\n    initialization\r\n      RegisterDelphiNativeMethods\r\n    {$ENDIF}\r\n    end.\r\n\r\n\r\nHere is the modified AndroidManifest.template.xml\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;!-- BEGIN_INCLUDE(manifest) --&gt;\r\n    &lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n            package=&quot;%package%&quot;\r\n            android:versionCode=&quot;%versionCode%&quot;\r\n            android:versionName=&quot;%versionName%&quot;&gt;\r\n    \r\n        &lt;!-- This is the platform API where NativeActivity was introduced. --&gt;\r\n        &lt;uses-sdk android:minSdkVersion=&quot;%minSdkVersion%&quot; /&gt;\r\n    &lt;%uses-permission%&gt;\r\n        &lt;uses-permission android:name=&quot;com.google.android.c2dm.permission.RECEIVE&quot; /&gt;\r\n    \r\n        &lt;application android:persistent=&quot;%persistent%&quot; \r\n            android:restoreAnyVersion=&quot;%restoreAnyVersion%&quot; \r\n            android:label=&quot;%label%&quot; \r\n            android:installLocation=&quot;%installLocation%&quot; \r\n            android:debuggable=&quot;%debuggable%&quot; \r\n            android:largeHeap=&quot;%largeHeap%&quot;\r\n            android:icon=&quot;%icon%&quot;\r\n            android:theme=&quot;%theme%&quot;&gt;\r\n            &lt;receiver\r\n                android:name=&quot;com.ioan.delphi.GCMReceiver&quot;\r\n                android:permission=&quot;com.google.android.c2dm.permission.SEND&quot; &gt;\r\n                &lt;intent-filter&gt;\r\n                    &lt;action android:name=&quot;com.google.android.c2dm.intent.RECEIVE&quot; /&gt;\r\n                    &lt;category android:name=&quot;%package%&quot; /&gt;\r\n                &lt;/intent-filter&gt;\r\n            &lt;/receiver&gt;\r\n            &lt;!-- Our activity is a subclass of the built-in NativeActivity framework class.\r\n                 This will take care of integrating with our NDK code. --&gt;\r\n            &lt;activity android:name=&quot;com.embarcadero.firemonkey.FMXNativeActivity&quot;\r\n                    android:label=&quot;%activityLabel%&quot;\r\n                    android:configChanges=&quot;orientation|keyboardHidden&quot;&gt;\r\n                &lt;!-- Tell NativeActivity the name of our .so --&gt;\r\n                &lt;meta-data android:name=&quot;android.app.lib_name&quot;\r\n                    android:value=&quot;%libNameValue%&quot; /&gt;\r\n                &lt;intent-filter&gt;  \r\n                    &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\r\n                    &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\r\n                &lt;/intent-filter&gt; \r\n            &lt;/activity&gt;\r\n            &lt;receiver android:name=&quot;com.embarcadero.firemonkey.notifications.FMXNotificationAlarm&quot; /&gt;\r\n        &lt;/application&gt;\r\n    &lt;/manifest&gt;   \r\n    &lt;!-- END_INCLUDE(manifest) --&gt;\r\n\r\n\r\nAnd the full source for the test application (it will send and receive a GCM message):\r\n\r\n    unit testgcmmain;\r\n    \r\n    interface\r\n    \r\n    uses\r\n      System.SysUtils, System.Types, System.UITypes, System.Classes, System.Variants,\r\n      FMX.Types, FMX.Controls, FMX.Forms, FMX.Graphics, FMX.Dialogs,\r\n      FMX.StdCtrls, FMX.Layouts, FMX.Memo, IdBaseComponent, IdComponent, IdTCPConnection,\r\n      IdTCPClient, IdHTTP, IdIOHandler, IdIOHandlerSocket, IdIOHandlerStack, IdSSL, IdSSLOpenSSL,\r\n      gcmnotification;\r\n    \r\n    type\r\n      TForm8 = class(TForm)\r\n        Button1: TButton;\r\n        Memo1: TMemo;\r\n        Button2: TButton;\r\n        procedure Button1Click(Sender: TObject);\r\n        procedure FormCreate(Sender: TObject);\r\n        procedure FormDestroy(Sender: TObject);\r\n        procedure Button2Click(Sender: TObject);\r\n      private\r\n        { Private declarations }\r\n      public\r\n        { Public declarations }\r\n        gcmn: TGCMNotification;\r\n        procedure OnNotification(Sender: TObject; ANotification: TGCMNotificationMessage);\r\n      end;\r\n    \r\n    const\r\n      YOUR_GCM_SENDERID = &#39;1234567890&#39;;\r\n      YOUR_API_ID = &#39;abc1234567890&#39;;\r\n    \r\n    var\r\n      Form8: TForm8;\r\n    \r\n    implementation\r\n    \r\n    {$R *.fmx}\r\n    \r\n    procedure TForm8.FormCreate(Sender: TObject);\r\n    begin\r\n       gcmn := TGCMNotification.Create(self);\r\n       gcmn.OnReceiveGCMNotification := OnNotification;\r\n    end;\r\n    \r\n    procedure TForm8.FormDestroy(Sender: TObject);\r\n    begin\r\n      FreeAndNil(gcmn);\r\n    end;\r\n    \r\n    procedure TForm8.Button1Click(Sender: TObject);\r\n    begin\r\n      // register with the GCM \r\n      gcmn.SenderID := YOUR_GCM_SENDERID;\r\n      if gcmn.DoRegister then\r\n        Memo1.Lines.Add(&#39;Successfully registered with GCM.&#39;);\r\n    end;\r\n\r\n    procedure TForm8.OnNotification(Sender: TObject;  ANotification: TGCMNotificationMessage);\r\n    begin\r\n      // you just received a message!\r\n      if ANotification.Kind = TGCMNotificationMessageKind.nmMESSAGE_TYPE_MESSAGE then\r\n        Memo1.Lines.Add(&#39;Received: &#39; + ANotification.Body);\r\n    end;\r\n    \r\n    // send a message\r\n    procedure TForm8.Button2Click(Sender: TObject);\r\n    const\r\n      sendUrl = &#39;https://android.googleapis.com/gcm/send&#39;;\r\n    var\r\n      Params: TStringList;\r\n      AuthHeader: STring;\r\n      idHTTP: TIDHTTP;\r\n      SSLIOHandler: TIdSSLIOHandlerSocketOpenSSL;\r\n    begin\r\n      idHTTP := TIDHTTP.Create(nil);\r\n      try\r\n        SslIOHandler := TIdSSLIOHandlerSocketOpenSSL.Create(nil);\r\n        idHTTP.IOHandler := SSLIOHandler;\r\n        idHTTP.HTTPOptions := [];\r\n        Params := TStringList.Create;\r\n        try\r\n          Params.Add(&#39;registration_id=&#39;+ gcmn.RegistrationID);\r\n          // you can send the data with a payload, in my example the server will accept \r\n          // data.message = the message you want to send\r\n          // data.sender = some sender info\r\n          // data.what = an integer  (aka &quot;message type&quot;)\r\n          // you can put any payload in the data, data.score, data.blabla... \r\n          // just make  sure you modify the code in my component to handle it \r\n          Params.Values[&#39;data.message&#39;] := &#39;test: &#39; + FormatDateTime(&#39;yy-mm-dd hh:nn:ss&#39;, Now);\r\n          idHTTP.Request.Host := sendUrl;\r\n          AuthHeader := &#39;Authorization: key=&#39; + YOUR_API_ID;\r\n          idHTTP.Request.CustomHeaders.Add(AuthHeader);\r\n          IdHTTP.Request.ContentType := &#39;application/x-www-form-urlencoded;charset=UTF-8&#39;;\r\n          Memo1.Lines.Add(&#39;Send result: &#39; + idHTTP.Post(sendUrl, Params));\r\n        finally\r\n          Params.Free;\r\n        end;\r\n      finally\r\n        FreeAndNil(idHTTP);\r\n      end;\r\n    end;\r\n    \r\n    end.\r\n\r\n\r\nThe GCMReceiver.java that you need to compile and add it to the classes.dex is:\r\n\r\n    package com.ioan.delphi;\r\n    \r\n    import android.content.BroadcastReceiver;\r\n    import android.content.Intent;\r\n    import android.content.Context;\r\n    import android.util.Log;\r\n    \r\n    public class GCMReceiver extends BroadcastReceiver\r\n    {\r\n    \tstatic final String TAG = &quot;GCMReceiver&quot;;\r\n    \r\n    \tpublic native void gcmReceiverOnReceiveNative(Context context, Intent receivedIntent);\r\n    \r\n    \t@Override\r\n        public void onReceive(Context context, Intent receivedIntent)\r\n        {\r\n    \t\tLog.d(TAG, &quot;onReceive&quot;);\r\n    \t\tgcmReceiverOnReceiveNative(context, receivedIntent);\r\n        }\r\n    }\r\n\r\n[**And HERE is the zip archive with the source.**][4]\r\n\r\n\r\nIf you have trouble making it work, it&#39;s probably something not configured right in you GCM console. \r\n\r\nHere is what you need from you GCM console:\r\n\r\n**Project number** (you use this when you register with GCM, place it into TGCMNotification.SenderID before calling DoRegister).\r\n \r\n[![Project number][5]][5]\r\n\r\n**API ID** you&#39;ll use this to send messages to the registered devices.\r\n\r\n[![API ID][6]][6]\r\n\r\n\r\n  [1]: https://github.com/e1ioan/TGCMReceiver\r\n  [2]: http://blog.blong.com/2013/11/delphi-and-android-services-part-2.html\r\n  [3]: http://i.stack.imgur.com/eWyH0.png\r\n  [4]: https://github.com/e1ioan/TGCMReceiver\r\n  [5]: http://i.stack.imgur.com/aAsBm.png\r\n  [6]: http://i.stack.imgur.com/nk3kU.png","title":"Google Cloud Messaging in Delphi XE5?","body":"<p>I got GCM working with Delphi and <a href=\"https://github.com/e1ioan/TGCMReceiver\" rel=\"nofollow noreferrer\">I made a sample component</a> to take care of registering and receiving the GCM messages.</p>\n<p><strong>NOTE</strong>: This is just a rough test code, I'm not using it in any real application (yet). Please fell free to modify and improve, and if you find bugs, please post back.</p>\n<p>Big thanks to Brian Long and his article on <a href=\"http://blog.blong.com/2013/11/delphi-and-android-services-part-2.html\" rel=\"nofollow noreferrer\">Android Services</a>.</p>\n<p>Get your GCM sender ID (it's your Project Number from gcm console) and your GCM API id (create a key for server application in GCM console), you'll need them (see the pictures at the bottom).</p>\n<p>First of all, you need a modified classes.dex file. You can create this by running the bat file Java dir in the archive, or you can use the one that is already compiled by me (also included in the archive).</p>\n<p>You have to <strong>ADD</strong> the new classes.dex to your Android Deployment and <strong>UNCHECK</strong> the embarcadero one:</p>\n<p><a href=\"https://i.stack.imgur.com/eWyH0.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/eWyH0.png\" alt=\"classes.dex deployment\" /></a></p>\n<p>Then, you need to edit your AndroidManifest.template.xml and add right after <code>&lt;%uses-permission%&gt;</code>:</p>\n<pre><code>&lt;%uses-permission%&gt;\n&lt;uses-permission android:name=&quot;com.google.android.c2dm.permission.RECEIVE&quot; /&gt;\n</code></pre>\n<p>and right after <code>android:theme=&quot;%theme%&quot;&gt;</code></p>\n<pre><code>    &lt;receiver\n        android:name=&quot;com.ioan.delphi.GCMReceiver&quot;\n        android:permission=&quot;com.google.android.c2dm.permission.SEND&quot; &gt;\n        &lt;intent-filter&gt;\n            &lt;action android:name=&quot;com.google.android.c2dm.intent.RECEIVE&quot; /&gt;\n            &lt;category android:name=&quot;%package%&quot; /&gt;\n        &lt;/intent-filter&gt;\n    &lt;/receiver&gt;\n</code></pre>\n<p>In your application, declare the gcmnotification unit:</p>\n<pre><code>uses\n  gcmnotification;\n</code></pre>\n<p>and then in your form declare a variable of the TGCMNotification type and a procedure that you will link to the TGCMNotification.OnReceiveGCMNotification event:</p>\n<pre><code>type\n  TForm8 = class(TForm)\n    //....\n  private\n    { Private declarations }\n  public\n    { Public declarations }\n    gcmn: TGCMNotification;\n    procedure OnNotification(Sender: TObject; ANotification: TGCMNotificationMessage);\n  end;\n\n\nprocedure TForm8.FormCreate(Sender: TObject);\nbegin\n   gcmn := TGCMNotification.Create(self);\n   gcmn.OnReceiveGCMNotification := OnNotification;\nend;\n</code></pre>\n<p>Put in the SenderID your GCM Project Number. To register you APP with GCM, call DoRegister:</p>\n<pre><code>procedure TForm8.Button1Click(Sender: TObject);\nbegin\n  gcmn.SenderID := YOUR_GCM_SENDERID;\n  if gcmn.DoRegister then\n    Toast('Successfully registered with GCM.');\nend;\n</code></pre>\n<p>If the DoRegister returns true (successfully registered), gcmn.RegistrationID will have the unique ID you need for sending messages to this device.</p>\n<p>And you'll receive messages in event procedure:</p>\n<pre><code>procedure TForm8.OnNotification(Sender: TObject;  ANotification: TGCMNotificationMessage);\nbegin\n  Memo1.Lines.Add('Received: ' + ANotification.Body);\nend;\n</code></pre>\n<p>.. and that's <strong>ALL</strong> you need it for Receiving. Cool, huh? :-)</p>\n<p>To send, just use TIdHttp:</p>\n<pre><code>procedure TForm8.Button2Click(Sender: TObject);\nconst\n  sendUrl = 'https://android.googleapis.com/gcm/send';\nvar\n  Params: TStringList;\n  AuthHeader: STring;\n  idHTTP: TIDHTTP;\n  SSLIOHandler: TIdSSLIOHandlerSocketOpenSSL;\nbegin\n  idHTTP := TIDHTTP.Create(nil);\n  try\n    SslIOHandler := TIdSSLIOHandlerSocketOpenSSL.Create(nil);\n    idHTTP.IOHandler := SSLIOHandler;\n    idHTTP.HTTPOptions := [];\n    Params := TStringList.Create;\n    try\n      Params.Add('registration_id='+ gcmn.RegistrationID);\n      Params.Values['data.message'] := 'test: ' + FormatDateTime('yy-mm-dd hh:nn:ss', Now);\n      idHTTP.Request.Host := sendUrl;\n      AuthHeader := 'Authorization: key=' + YOUR_API_ID;\n      idHTTP.Request.CustomHeaders.Add(AuthHeader);\n      IdHTTP.Request.ContentType := 'application/x-www-form-urlencoded;charset=UTF-8';\n      Memo1.Lines.Add('Send result: ' + idHTTP.Post(sendUrl, Params));\n    finally\n      Params.Free;\n    end;\n  finally\n    FreeAndNil(idHTTP);\n  end;\nend;\n</code></pre>\n<p>Next I'm going to post the units you need, just save them in the same place with your application (or just download the whole thing from <a href=\"https://github.com/e1ioan/TGCMReceiver\" rel=\"nofollow noreferrer\">HERE</a>).</p>\n<p>gcmnotification.pas</p>\n<pre><code>unit gcmnotification;\n\ninterface\n{$IFDEF ANDROID}\nuses\n  System.SysUtils,\n  System.Classes,\n  FMX.Helpers.Android,\n  Androidapi.JNI.PlayServices,\n  Androidapi.JNI.GraphicsContentViewText,\n  Androidapi.JNIBridge,\n  Androidapi.JNI.JavaTypes;\n\ntype\n  TGCMNotificationMessageKind = (nmMESSAGE_TYPE_MESSAGE, nmMESSAGE_TYPE_DELETED, nmMESSAGE_TYPE_SEND_ERROR);\n\n  { Discription of notification for Notification Center }\n  TGCMNotificationMessage = class (TPersistent)\n  private\n    FKind: TGCMNotificationMessageKind;\n    FSender: string;\n    FWhat: integer;\n    FBody: string;\n  protected\n    procedure AssignTo(Dest: TPersistent); override;\n  public\n    { Unique identificator for determenation notification in Notification list }\n    property Kind: TGCMNotificationMessageKind read FKind write FKind;\n    property Sender: string read FSender write FSender;\n    property What: integer read FWhat write FWhat;\n    property Body: string read FBody write FBody;\n    constructor Create;\n  end;\n\n  TOnReceiveGCMNotification = procedure (Sender: TObject; ANotification: TGCMNotificationMessage) of object;\n\n  TGCMNotification = class(TComponent)\n  strict private\n    { Private declarations }\n    FRegistrationID: string;\n    FSenderID: string;\n    FOnReceiveGCMNotification: TOnReceiveGCMNotification;\n    FReceiver: JBroadcastReceiver;\n    FAlreadyRegistered: boolean;\n    function CheckPlayServicesSupport: boolean;\n  protected\n    { Protected declarations }\n  public\n    { Public declarations }\n    constructor Create(AOwner: TComponent); override;\n    destructor Destroy; override;\n    function DoRegister: boolean;\n    function GetGCMInstance: JGoogleCloudMessaging;\n  published\n    { Published declarations }\n    property SenderID: string read FSenderID write FSenderID;\n    property RegistrationID: string read FRegistrationID write FRegistrationID;\n    property OnReceiveGCMNotification: TOnReceiveGCMNotification read FOnReceiveGCMNotification write FOnReceiveGCMNotification;\n  end;\n\n{$ENDIF}\nimplementation\n{$IFDEF ANDROID}\nuses\n  uGCMReceiver;\n\n\n{ TGCMNotification }\nfunction TGCMNotification.CheckPlayServicesSupport: boolean;\nvar\n  resultCode: integer;\nbegin\n  resultCode := TJGooglePlayServicesUtil.JavaClass.isGooglePlayServicesAvailable(SharedActivity);\n  result := (resultCode = TJConnectionResult.JavaClass.SUCCESS);\nend;\n\nconstructor TGCMNotification.Create(AOwner: TComponent);\nvar\n  Filter: JIntentFilter;\nbegin\n  inherited;\n  Filter := TJIntentFilter.Create;\n  FReceiver := TJGCMReceiver.Create(Self);\n  SharedActivity.registerReceiver(FReceiver, Filter);\n  FAlreadyRegistered := false;\nend;\n\ndestructor TGCMNotification.Destroy;\nbegin\n  SharedActivity.unregisterReceiver(FReceiver);\n  FReceiver := nil;\n  inherited;\nend;\n\nfunction TGCMNotification.DoRegister: boolean;\nvar\n  p: TJavaObjectArray&lt;JString&gt;;\n  gcm: JGoogleCloudMessaging;\nbegin\n  if FAlreadyRegistered then\n    result := true\n  else\n  begin\n    if CheckPlayServicesSupport then\n    begin\n      gcm := GetGCMInstance;\n      p := TJavaObjectArray&lt;JString&gt;.Create(1);\n      p.Items[0] := StringToJString(FSenderID);\n      FRegistrationID := JStringToString(gcm.register(p));\n      FAlreadyRegistered := (FRegistrationID &lt;&gt; '');\n      result := FAlreadyRegistered;\n    end\n    else\n      result := false;\n  end;\nend;\n\nfunction TGCMNotification.GetGCMInstance: JGoogleCloudMessaging;\nbegin\n  result := TJGoogleCloudMessaging.JavaClass.getInstance(SharedActivity.getApplicationContext);\nend;\n\n{ TGCMNotificationMessage }\n\nprocedure TGCMNotificationMessage.AssignTo(Dest: TPersistent);\nvar\n  DestNotification: TGCMNotificationMessage;\nbegin\n  if Dest is TGCMNotificationMessage then\n  begin\n    DestNotification := Dest as TGCMNotificationMessage;\n    DestNotification.Kind := Kind;\n    DestNotification.What := What;\n    DestNotification.Sender := Sender;\n    DestNotification.Body := Body;\n  end\n  else\n    inherited AssignTo(Dest);\nend;\n\nconstructor TGCMNotificationMessage.Create;\nbegin\n  Body := '';\nend;\n{$ENDIF}\nend.\n</code></pre>\n<p>uGCMReceiver.pas</p>\n<pre><code>unit uGCMReceiver;\n\ninterface\n{$IFDEF ANDROID}\nuses\n  FMX.Types,\n  Androidapi.JNIBridge,\n  Androidapi.JNI.GraphicsContentViewText,\n  gcmnotification;\n\ntype\n  JGCMReceiverClass = interface(JBroadcastReceiverClass)\n  ['{9D967671-9CD8-483A-98C8-161071CE7B64}']\n    {Methods}\n  end;\n\n  [JavaSignature('com/ioan/delphi/GCMReceiver')]\n  JGCMReceiver = interface(JBroadcastReceiver)\n  ['{4B30D537-5221-4451-893D-7916ED11CE1F}']\n    {Methods}\n  end;\n\n\n  TJGCMReceiver = class(TJavaGenericImport&lt;JGCMReceiverClass, JGCMReceiver&gt;)\n  private\n    FOwningComponent: TGCMNotification;\n  protected\n    constructor _Create(AOwner: TGCMNotification);\n  public\n    class function Create(AOwner: TGCMNotification): JGCMReceiver;\n    procedure OnReceive(Context: JContext; ReceivedIntent: JIntent);\n  end;\n{$ENDIF}\nimplementation\n{$IFDEF ANDROID}\nuses\n  System.Classes,\n  System.SysUtils,\n  FMX.Helpers.Android,\n  Androidapi.NativeActivity,\n  Androidapi.JNI,\n  Androidapi.JNI.JavaTypes,\n  Androidapi.JNI.Os,\n  Androidapi.JNI.PlayServices;\n\n{$REGION 'JNI setup code and callback'}\nvar\n  GCMReceiver: TJGCMReceiver;\n  ARNContext: JContext;\n  ARNReceivedIntent: JIntent;\n\nprocedure GCMReceiverOnReceiveThreadSwitcher;\nbegin\n  Log.d('+gcmReceiverOnReceiveThreadSwitcher');\n  Log.d('Thread: Main: %.8x, Current: %.8x, Java:%.8d (%2:.8x)',\n    [MainThreadID, TThread.CurrentThread.ThreadID,\n    TJThread.JavaClass.CurrentThread.getId]);\n  GCMReceiver.OnReceive(ARNContext,ARNReceivedIntent );\n  Log.d('-gcmReceiverOnReceiveThreadSwitcher');\nend;\n\n//This is called from the Java activity's onReceiveNative() method\nprocedure GCMReceiverOnReceiveNative(PEnv: PJNIEnv; This: JNIObject; JNIContext, JNIReceivedIntent: JNIObject); cdecl;\nbegin\n  Log.d('+gcmReceiverOnReceiveNative');\n  Log.d('Thread: Main: %.8x, Current: %.8x, Java:%.8d (%2:.8x)',\n    [MainThreadID, TThread.CurrentThread.ThreadID,\n    TJThread.JavaClass.CurrentThread.getId]);\n  ARNContext := TJContext.Wrap(JNIContext);\n  ARNReceivedIntent := TJIntent.Wrap(JNIReceivedIntent);\n  Log.d('Calling Synchronize');\n  TThread.Synchronize(nil, GCMReceiverOnReceiveThreadSwitcher);\n  Log.d('Synchronize is over');\n  Log.d('-gcmReceiverOnReceiveNative');\nend;\n\nprocedure RegisterDelphiNativeMethods;\nvar\n  PEnv: PJNIEnv;\n  ReceiverClass: JNIClass;\n  NativeMethod: JNINativeMethod;\nbegin\n  Log.d('Starting the GCMReceiver JNI stuff');\n\n  PEnv := TJNIResolver.GetJNIEnv;\n\n  Log.d('Registering interop methods');\n\n  NativeMethod.Name := 'gcmReceiverOnReceiveNative';\n  NativeMethod.Signature := '(Landroid/content/Context;Landroid/content/Intent;)V';\n  NativeMethod.FnPtr := @GCMReceiverOnReceiveNative;\n\n  ReceiverClass := TJNIResolver.GetJavaClassID('com.ioan.delphi.GCMReceiver');\n\n  PEnv^.RegisterNatives(PEnv, ReceiverClass, @NativeMethod, 1);\n\n  PEnv^.DeleteLocalRef(PEnv, ReceiverClass);\nend;\n{$ENDREGION}\n\n{ TActivityReceiver }\n\nconstructor TJGCMReceiver._Create(AOwner: TGCMNotification);\nbegin\n  inherited;\n  FOwningComponent := AOwner;\n  Log.d('TJGCMReceiver._Create constructor');\nend;\n\nclass function TJGCMReceiver.Create(AOwner: TGCMNotification): JGCMReceiver;\nbegin\n  Log.d('TJGCMReceiver.Create class function');\n  Result := inherited Create;\n  GCMReceiver := TJGCMReceiver._Create(AOwner);\nend;\n\nprocedure TJGCMReceiver.OnReceive(Context: JContext;  ReceivedIntent: JIntent);\nvar\n  extras: JBundle;\n  gcm: JGoogleCloudMessaging;\n  messageType: JString;\n  noti: TGCMNotificationMessage;\nbegin\n  if Assigned(FOwningComponent.OnReceiveGCMNotification) then\n  begin\n    noti := TGCMNotificationMessage.Create;\n    try\n      Log.d('Received a message!');\n      extras := ReceivedIntent.getExtras();\n      gcm := FOwningComponent.GetGCMInstance;\n      // The getMessageType() intent parameter must be the intent you received\n      // in your BroadcastReceiver.\n      messageType := gcm.getMessageType(ReceivedIntent);\n      if not extras.isEmpty() then\n      begin\n          {*\n           * Filter messages based on message type. Since it is likely that GCM will be\n           * extended in the future with new message types, just ignore any message types you're\n           * not interested in, or that you don't recognize.\n           *}\n          if TJGoogleCloudMessaging.JavaClass.MESSAGE_TYPE_SEND_ERROR.equals(messageType) then\n          begin\n            // It's an error.\n            noti.Kind := TGCMNotificationMessageKind.nmMESSAGE_TYPE_SEND_ERROR;\n            FOwningComponent.OnReceiveGCMNotification(Self, noti);\n          end\n          else\n          if TJGoogleCloudMessaging.JavaClass.MESSAGE_TYPE_DELETED.equals(messageType) then\n          begin\n            // Deleted messages on the server.\n            noti.Kind := TGCMNotificationMessageKind.nmMESSAGE_TYPE_DELETED;\n            FOwningComponent.OnReceiveGCMNotification(Self, noti);\n          end\n          else\n          if TJGoogleCloudMessaging.JavaClass.MESSAGE_TYPE_MESSAGE.equals(messageType) then\n          begin\n            // It's a regular GCM message, do some work.\n            noti.Kind := TGCMNotificationMessageKind.nmMESSAGE_TYPE_MESSAGE;\n            noti.Sender := JStringToString(extras.getString(StringToJString('sender')));\n            noti.What := StrToIntDef(JStringToString(extras.getString(StringToJString('what'))), 0);\n            noti.Body := JStringToString(extras.getString(StringToJString('message')));\n            FOwningComponent.OnReceiveGCMNotification(Self, noti);\n          end;\n      end;\n    finally\n      noti.Free;\n    end;\n  end;\nend;\n\ninitialization\n  RegisterDelphiNativeMethods\n{$ENDIF}\nend.\n</code></pre>\n<p>Here is the modified AndroidManifest.template.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;!-- BEGIN_INCLUDE(manifest) --&gt;\n&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n        package=&quot;%package%&quot;\n        android:versionCode=&quot;%versionCode%&quot;\n        android:versionName=&quot;%versionName%&quot;&gt;\n\n    &lt;!-- This is the platform API where NativeActivity was introduced. --&gt;\n    &lt;uses-sdk android:minSdkVersion=&quot;%minSdkVersion%&quot; /&gt;\n&lt;%uses-permission%&gt;\n    &lt;uses-permission android:name=&quot;com.google.android.c2dm.permission.RECEIVE&quot; /&gt;\n\n    &lt;application android:persistent=&quot;%persistent%&quot; \n        android:restoreAnyVersion=&quot;%restoreAnyVersion%&quot; \n        android:label=&quot;%label%&quot; \n        android:installLocation=&quot;%installLocation%&quot; \n        android:debuggable=&quot;%debuggable%&quot; \n        android:largeHeap=&quot;%largeHeap%&quot;\n        android:icon=&quot;%icon%&quot;\n        android:theme=&quot;%theme%&quot;&gt;\n        &lt;receiver\n            android:name=&quot;com.ioan.delphi.GCMReceiver&quot;\n            android:permission=&quot;com.google.android.c2dm.permission.SEND&quot; &gt;\n            &lt;intent-filter&gt;\n                &lt;action android:name=&quot;com.google.android.c2dm.intent.RECEIVE&quot; /&gt;\n                &lt;category android:name=&quot;%package%&quot; /&gt;\n            &lt;/intent-filter&gt;\n        &lt;/receiver&gt;\n        &lt;!-- Our activity is a subclass of the built-in NativeActivity framework class.\n             This will take care of integrating with our NDK code. --&gt;\n        &lt;activity android:name=&quot;com.embarcadero.firemonkey.FMXNativeActivity&quot;\n                android:label=&quot;%activityLabel%&quot;\n                android:configChanges=&quot;orientation|keyboardHidden&quot;&gt;\n            &lt;!-- Tell NativeActivity the name of our .so --&gt;\n            &lt;meta-data android:name=&quot;android.app.lib_name&quot;\n                android:value=&quot;%libNameValue%&quot; /&gt;\n            &lt;intent-filter&gt;  \n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\n            &lt;/intent-filter&gt; \n        &lt;/activity&gt;\n        &lt;receiver android:name=&quot;com.embarcadero.firemonkey.notifications.FMXNotificationAlarm&quot; /&gt;\n    &lt;/application&gt;\n&lt;/manifest&gt;   \n&lt;!-- END_INCLUDE(manifest) --&gt;\n</code></pre>\n<p>And the full source for the test application (it will send and receive a GCM message):</p>\n<pre><code>unit testgcmmain;\n\ninterface\n\nuses\n  System.SysUtils, System.Types, System.UITypes, System.Classes, System.Variants,\n  FMX.Types, FMX.Controls, FMX.Forms, FMX.Graphics, FMX.Dialogs,\n  FMX.StdCtrls, FMX.Layouts, FMX.Memo, IdBaseComponent, IdComponent, IdTCPConnection,\n  IdTCPClient, IdHTTP, IdIOHandler, IdIOHandlerSocket, IdIOHandlerStack, IdSSL, IdSSLOpenSSL,\n  gcmnotification;\n\ntype\n  TForm8 = class(TForm)\n    Button1: TButton;\n    Memo1: TMemo;\n    Button2: TButton;\n    procedure Button1Click(Sender: TObject);\n    procedure FormCreate(Sender: TObject);\n    procedure FormDestroy(Sender: TObject);\n    procedure Button2Click(Sender: TObject);\n  private\n    { Private declarations }\n  public\n    { Public declarations }\n    gcmn: TGCMNotification;\n    procedure OnNotification(Sender: TObject; ANotification: TGCMNotificationMessage);\n  end;\n\nconst\n  YOUR_GCM_SENDERID = '1234567890';\n  YOUR_API_ID = 'abc1234567890';\n\nvar\n  Form8: TForm8;\n\nimplementation\n\n{$R *.fmx}\n\nprocedure TForm8.FormCreate(Sender: TObject);\nbegin\n   gcmn := TGCMNotification.Create(self);\n   gcmn.OnReceiveGCMNotification := OnNotification;\nend;\n\nprocedure TForm8.FormDestroy(Sender: TObject);\nbegin\n  FreeAndNil(gcmn);\nend;\n\nprocedure TForm8.Button1Click(Sender: TObject);\nbegin\n  // register with the GCM \n  gcmn.SenderID := YOUR_GCM_SENDERID;\n  if gcmn.DoRegister then\n    Memo1.Lines.Add('Successfully registered with GCM.');\nend;\n\nprocedure TForm8.OnNotification(Sender: TObject;  ANotification: TGCMNotificationMessage);\nbegin\n  // you just received a message!\n  if ANotification.Kind = TGCMNotificationMessageKind.nmMESSAGE_TYPE_MESSAGE then\n    Memo1.Lines.Add('Received: ' + ANotification.Body);\nend;\n\n// send a message\nprocedure TForm8.Button2Click(Sender: TObject);\nconst\n  sendUrl = 'https://android.googleapis.com/gcm/send';\nvar\n  Params: TStringList;\n  AuthHeader: STring;\n  idHTTP: TIDHTTP;\n  SSLIOHandler: TIdSSLIOHandlerSocketOpenSSL;\nbegin\n  idHTTP := TIDHTTP.Create(nil);\n  try\n    SslIOHandler := TIdSSLIOHandlerSocketOpenSSL.Create(nil);\n    idHTTP.IOHandler := SSLIOHandler;\n    idHTTP.HTTPOptions := [];\n    Params := TStringList.Create;\n    try\n      Params.Add('registration_id='+ gcmn.RegistrationID);\n      // you can send the data with a payload, in my example the server will accept \n      // data.message = the message you want to send\n      // data.sender = some sender info\n      // data.what = an integer  (aka &quot;message type&quot;)\n      // you can put any payload in the data, data.score, data.blabla... \n      // just make  sure you modify the code in my component to handle it \n      Params.Values['data.message'] := 'test: ' + FormatDateTime('yy-mm-dd hh:nn:ss', Now);\n      idHTTP.Request.Host := sendUrl;\n      AuthHeader := 'Authorization: key=' + YOUR_API_ID;\n      idHTTP.Request.CustomHeaders.Add(AuthHeader);\n      IdHTTP.Request.ContentType := 'application/x-www-form-urlencoded;charset=UTF-8';\n      Memo1.Lines.Add('Send result: ' + idHTTP.Post(sendUrl, Params));\n    finally\n      Params.Free;\n    end;\n  finally\n    FreeAndNil(idHTTP);\n  end;\nend;\n\nend.\n</code></pre>\n<p>The GCMReceiver.java that you need to compile and add it to the classes.dex is:</p>\n<pre><code>package com.ioan.delphi;\n\nimport android.content.BroadcastReceiver;\nimport android.content.Intent;\nimport android.content.Context;\nimport android.util.Log;\n\npublic class GCMReceiver extends BroadcastReceiver\n{\n    static final String TAG = &quot;GCMReceiver&quot;;\n\n    public native void gcmReceiverOnReceiveNative(Context context, Intent receivedIntent);\n\n    @Override\n    public void onReceive(Context context, Intent receivedIntent)\n    {\n        Log.d(TAG, &quot;onReceive&quot;);\n        gcmReceiverOnReceiveNative(context, receivedIntent);\n    }\n}\n</code></pre>\n<p><a href=\"https://github.com/e1ioan/TGCMReceiver\" rel=\"nofollow noreferrer\"><strong>And HERE is the zip archive with the source.</strong></a></p>\n<p>If you have trouble making it work, it's probably something not configured right in you GCM console.</p>\n<p>Here is what you need from you GCM console:</p>\n<p><strong>Project number</strong> (you use this when you register with GCM, place it into TGCMNotification.SenderID before calling DoRegister).</p>\n<p><a href=\"https://i.stack.imgur.com/aAsBm.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/aAsBm.png\" alt=\"Project number\" /></a></p>\n<p><strong>API ID</strong> you'll use this to send messages to the registered devices.</p>\n<p><a href=\"https://i.stack.imgur.com/nk3kU.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/nk3kU.png\" alt=\"API ID\" /></a></p>\n"}],"owner":{"account_id":3312412,"reputation":381,"user_id":2785563,"accept_rate":25,"display_name":"FerretDriver"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9747,"favorite_count":0,"down_vote_count":0,"up_vote_count":25,"answer_count":4,"score":25,"last_activity_date":1695762940,"creation_date":1379371196,"question_id":18838485,"body_markdown":"I&#39;ve got an android app that I am thinking about porting to Delphi but I can&#39;t see a way to interface with GCM. I am thinking I would possibly have to run the GCMBaseIntentService in java and interface with the delphi shared object?\r\n\r\nAlternatively, I am looking for a way to do push notifications in a Delphi Xe5 android app.\r\n\r\n","title":"Google Cloud Messaging in Delphi XE5?","body":"<p>I've got an android app that I am thinking about porting to Delphi but I can't see a way to interface with GCM. I am thinking I would possibly have to run the GCMBaseIntentService in java and interface with the delphi shared object?</p>\n\n<p>Alternatively, I am looking for a way to do push notifications in a Delphi Xe5 android app.</p>\n"},{"tags":["java","spring","hibernate"],"answers":[{"tags":[],"owner":{"account_id":24440940,"reputation":3122,"user_id":18364656,"display_name":"Andrei Lisa"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695756323,"creation_date":1695756323,"answer_id":77182884,"question_id":77182782,"body_markdown":"It will be null forever il you will insert the values from workbench, because these two annotations are from ORM(hibernate) \r\n\r\n    @CreationTimestamp\r\n    @LastModifiedBy\r\nTo have these columns populate with values into database the insert request should be passed through hibernate \r\n\r\nAs solution, to have a inserted/updated time of the entity when the values are populated you can create a trigger on table something like in this [Q/A][1]. Also don&#39;t forget to remove \r\n`@CreationTimestamp`,`@LastModifiedBy` if you will choose to do it with trigger.\r\n\r\n  [1]: https://stackoverflow.com/questions/28988885/trigger-on-insert-and-update-that-adds-modification-date","title":"Java Hibernate database doesn&#39;t automatically insert timestamp in MySQL database","body":"<p>It will be null forever il you will insert the values from workbench, because these two annotations are from ORM(hibernate)</p>\n<pre><code>@CreationTimestamp\n@LastModifiedBy\n</code></pre>\n<p>To have these columns populate with values into database the insert request should be passed through hibernate</p>\n<p>As solution, to have a inserted/updated time of the entity when the values are populated you can create a trigger on table something like in this <a href=\"https://stackoverflow.com/questions/28988885/trigger-on-insert-and-update-that-adds-modification-date\">Q/A</a>. Also don't forget to remove\n<code>@CreationTimestamp</code>,<code>@LastModifiedBy</code> if you will choose to do it with trigger.</p>\n"}],"owner":{"account_id":22759914,"reputation":1,"user_id":16918907,"display_name":"Marcus Peterson "},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":60,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1695762923,"creation_date":1695755060,"question_id":77182782,"body_markdown":"So this is my current Java Hibernate code, this table is part of a database that is supposed to store temperature values\r\n\r\n```package com.example.javabackend_dbms.models;\r\n\r\nimport jakarta.persistence.*;\r\nimport lombok.Data;\r\nimport lombok.NoArgsConstructor;\r\nimport org.hibernate.annotations.CreationTimestamp;\r\nimport org.hibernate.annotations.UpdateTimestamp;\r\nimport org.springframework.data.annotation.CreatedDate;\r\nimport org.springframework.data.annotation.LastModifiedBy;\r\nimport org.springframework.data.jpa.domain.support.AuditingEntityListener;\r\n\r\nimport java.time.LocalDateTime;\r\nimport java.time.format.DateTimeFormatter;\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\n@Entity\r\n@NoArgsConstructor\r\n@EntityListeners(AuditingEntityListener.class)\r\n@Data\r\npublic class TempTable { //Den viktigaste tabellen i DBMS, h&#228;r lagras data r&#229;tt\r\n    @Id\r\n    @GeneratedValue (strategy = GenerationType.IDENTITY)\r\n    private Long Id;\r\n\r\n    private Float temperatures;\r\n\r\n    @Column(name = &quot;timestamp&quot;)\r\n    @CreationTimestamp\r\n    @LastModifiedBy\r\n    private LocalDateTime timestamp; // &#39; 2023-09-24T12:34:56.789 &#39;\r\n\r\n    @Transient\r\n    public String getFormattedTimestamp(){ //Denna metod p&#229;verkar inte data som finns i tabellerna, den &#228;r framtagen f&#246;r enkelt kunna formatera data\r\n        if (timestamp != null) {\r\n            DateTimeFormatter formatter = DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd &#39;hour&#39; HH : &#39;minute&#39; mm : &#39;seconds&#39; : ss.SSS&quot;);\r\n            return timestamp.format(formatter);\r\n        }\r\n        System.out.println(&quot;Could not format datetime&quot;);\r\n        return &quot;&quot;;\r\n    }\r\n\r\n    @OneToMany(mappedBy = &quot;tempTable&quot;, cascade = CascadeType.ALL)\r\n    private List&lt;WarningTable&gt; warningTables = new ArrayList&lt;&gt;();\r\n\r\n    public TempTable(Long Id, Float temperatures, LocalDateTime timestamp){\r\n        this.Id = Id;\r\n        this.temperatures = temperatures;\r\n        this.timestamp = timestamp;\r\n    }\r\n\r\n    public LocalDateTime getTimestamp() {\r\n        return timestamp;\r\n    }\r\n\r\n    public void setTimestamp(LocalDateTime timestamp) {\r\n        this.timestamp = timestamp;\r\n    }\r\n\r\n}\r\n```\r\n\r\nThis is really where I think the main issue is, either I&#39;m using the wrong annotations or I don&#39;t know what I talking about, I have some getters and setters. But I don&#39;t think i&#39;ll use them for now\r\n```\r\n@Column(name = &quot;timestamp&quot;)\r\n@CreationTimestamp\r\n@LastModifiedBy\r\nprivate LocalDateTime timestamp; // &#39; 2023-09-24T12:34:56.789 &#39;\r\n ```\r\n\r\nAnd simply doing this in MySQL workbench: \r\n```\r\nINSERT INTO temp_table (temperatures) VALUES (22.5);\r\nINSERT INTO temp_table (temperatures) VALUES (32.5);\r\nINSERT INTO temp_table (temperatures) VALUES (21.5);\r\n```\r\n\r\nShould automatically just set the timestamp in the database. But when I through my endpoint request with JSON this is what it returns:\r\n\r\n```[\r\n  {\r\n    &quot;temperatures&quot;: 22.5,\r\n    &quot;timestamp&quot;: null,\r\n    &quot;warningTables&quot;: [],\r\n    &quot;id&quot;: 1,\r\n    &quot;formattedTimestamp&quot;: &quot;&quot;\r\n  },\r\n  {\r\n    &quot;temperatures&quot;: 32.5,\r\n    &quot;timestamp&quot;: null,\r\n    &quot;warningTables&quot;: [],\r\n    &quot;id&quot;: 2,\r\n    &quot;formattedTimestamp&quot;: &quot;&quot;\r\n  },\r\n  {\r\n    &quot;temperatures&quot;: 21.5,\r\n    &quot;timestamp&quot;: null,\r\n    &quot;warningTables&quot;: [],\r\n    &quot;id&quot;: 3,\r\n    &quot;formattedTimestamp&quot;: &quot;&quot;\r\n  }\r\n]\r\n```\r\n\r\n\r\nWhy is timestamp null? What am I missing here?\r\n","title":"Java Hibernate database doesn&#39;t automatically insert timestamp in MySQL database","body":"<p>So this is my current Java Hibernate code, this table is part of a database that is supposed to store temperature values</p>\n<pre><code>\nimport jakarta.persistence.*;\nimport lombok.Data;\nimport lombok.NoArgsConstructor;\nimport org.hibernate.annotations.CreationTimestamp;\nimport org.hibernate.annotations.UpdateTimestamp;\nimport org.springframework.data.annotation.CreatedDate;\nimport org.springframework.data.annotation.LastModifiedBy;\nimport org.springframework.data.jpa.domain.support.AuditingEntityListener;\n\nimport java.time.LocalDateTime;\nimport java.time.format.DateTimeFormatter;\nimport java.util.ArrayList;\nimport java.util.List;\n\n@Entity\n@NoArgsConstructor\n@EntityListeners(AuditingEntityListener.class)\n@Data\npublic class TempTable { //Den viktigaste tabellen i DBMS, här lagras data rått\n    @Id\n    @GeneratedValue (strategy = GenerationType.IDENTITY)\n    private Long Id;\n\n    private Float temperatures;\n\n    @Column(name = &quot;timestamp&quot;)\n    @CreationTimestamp\n    @LastModifiedBy\n    private LocalDateTime timestamp; // ' 2023-09-24T12:34:56.789 '\n\n    @Transient\n    public String getFormattedTimestamp(){ //Denna metod påverkar inte data som finns i tabellerna, den är framtagen för enkelt kunna formatera data\n        if (timestamp != null) {\n            DateTimeFormatter formatter = DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd 'hour' HH : 'minute' mm : 'seconds' : ss.SSS&quot;);\n            return timestamp.format(formatter);\n        }\n        System.out.println(&quot;Could not format datetime&quot;);\n        return &quot;&quot;;\n    }\n\n    @OneToMany(mappedBy = &quot;tempTable&quot;, cascade = CascadeType.ALL)\n    private List&lt;WarningTable&gt; warningTables = new ArrayList&lt;&gt;();\n\n    public TempTable(Long Id, Float temperatures, LocalDateTime timestamp){\n        this.Id = Id;\n        this.temperatures = temperatures;\n        this.timestamp = timestamp;\n    }\n\n    public LocalDateTime getTimestamp() {\n        return timestamp;\n    }\n\n    public void setTimestamp(LocalDateTime timestamp) {\n        this.timestamp = timestamp;\n    }\n\n}\n</code></pre>\n<p>This is really where I think the main issue is, either I'm using the wrong annotations or I don't know what I talking about, I have some getters and setters. But I don't think i'll use them for now</p>\n<pre><code>@Column(name = &quot;timestamp&quot;)\n@CreationTimestamp\n@LastModifiedBy\nprivate LocalDateTime timestamp; // ' 2023-09-24T12:34:56.789 '\n</code></pre>\n<p>And simply doing this in MySQL workbench:</p>\n<pre><code>INSERT INTO temp_table (temperatures) VALUES (22.5);\nINSERT INTO temp_table (temperatures) VALUES (32.5);\nINSERT INTO temp_table (temperatures) VALUES (21.5);\n</code></pre>\n<p>Should automatically just set the timestamp in the database. But when I through my endpoint request with JSON this is what it returns:</p>\n<pre><code>  {\n    &quot;temperatures&quot;: 22.5,\n    &quot;timestamp&quot;: null,\n    &quot;warningTables&quot;: [],\n    &quot;id&quot;: 1,\n    &quot;formattedTimestamp&quot;: &quot;&quot;\n  },\n  {\n    &quot;temperatures&quot;: 32.5,\n    &quot;timestamp&quot;: null,\n    &quot;warningTables&quot;: [],\n    &quot;id&quot;: 2,\n    &quot;formattedTimestamp&quot;: &quot;&quot;\n  },\n  {\n    &quot;temperatures&quot;: 21.5,\n    &quot;timestamp&quot;: null,\n    &quot;warningTables&quot;: [],\n    &quot;id&quot;: 3,\n    &quot;formattedTimestamp&quot;: &quot;&quot;\n  }\n]\n</code></pre>\n<p>Why is timestamp null? What am I missing here?</p>\n"},{"tags":["java","generics"],"comments":[{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1695761986,"post_id":77183349,"comment_id":136067230,"body_markdown":"Not in the standard library. There might be third party libraries that offer an API like this, but realistically it&#39;s just going to be similar to what you&#39;ve implemented here.","body":"Not in the standard library. There might be third party libraries that offer an API like this, but realistically it&#39;s just going to be similar to what you&#39;ve implemented here."}],"answers":[{"tags":[],"owner":{"account_id":8653039,"reputation":599,"user_id":7775861,"accept_rate":50,"display_name":"Kyle Berezin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695762589,"creation_date":1695762589,"answer_id":77183446,"question_id":77183349,"body_markdown":"As dan1st pointed out, this is covered in https://stackoverflow.com/questions/10194855/java-map-key-class-value-instance-of-that-class\r\n\r\nSpecifically, replacing `return (T)cachedAttributes.get(category).get();` with  `return category.cast(cachedAttributes.get(category).get());` removed the warning. It seems odd to me though, I feel like there should still be a warning here, as nothing is informing the compiler that wildcards for `Class&lt;?&gt;, CachedObject&lt;?&gt;` are the same.\r\n\r\nI will leave this post unanswered for now just in case a more complete answer comes around.","title":"Fun with Generics; Type-Safe HashMap&lt;Class&lt;?&gt;, CachedObject&lt;?&gt;&gt;","body":"<p>As dan1st pointed out, this is covered in <a href=\"https://stackoverflow.com/questions/10194855/java-map-key-class-value-instance-of-that-class\">Java map, key = class, value = instance of that class</a></p>\n<p>Specifically, replacing <code>return (T)cachedAttributes.get(category).get();</code> with  <code>return category.cast(cachedAttributes.get(category).get());</code> removed the warning. It seems odd to me though, I feel like there should still be a warning here, as nothing is informing the compiler that wildcards for <code>Class&lt;?&gt;, CachedObject&lt;?&gt;</code> are the same.</p>\n<p>I will leave this post unanswered for now just in case a more complete answer comes around.</p>\n"},{"tags":[],"owner":{"account_id":401843,"reputation":89768,"user_id":768644,"display_name":"rzwitserloot"},"down_vote_count":1,"up_vote_count":2,"is_accepted":true,"score":1,"last_activity_date":1695762595,"creation_date":1695762595,"answer_id":77183447,"question_id":77183349,"body_markdown":"This is a more generic problem that requires higher order generics. A type variable represents an actual type: `public &lt;T&gt; void foo(T in, T out)` means that the T is a variable and is to be replaced by an actual type. Just like in `void foo(int x)`, x is a variable and is to be replaced, for any given invocation, by an actual `int`.\r\n\r\nWhat this requires is yet another abstractive layer deeper: We now want a type variable, say, &#223;, which gets replaced not with an actual type, but with a type variable - or at least the notion that you can _declare_ type variables within a generics signature block. Something like:\r\n\r\n```\r\nMap&lt;{&#223;} Class&lt;&#223;&gt;, CachedObject&lt;&#223;&gt;&gt; cachedAttributes = ...;\r\n```\r\n\r\nIt&#39;s not that `&#223;` is the same type throughout. &#223; is different for every k/v pair. Hence, it&#39;s a higher order thing.\r\n\r\nJava doesn&#39;t have this. __What you want is not possible__. Given the steady stream of complaints that generics are &#39;too complicated&#39; and the questions e.g. here on SO about it, it&#39;s probably correct that java does not have them.\r\n\r\nThere are fixes. One of them is what you&#39;ve done: That you take some source file and limit the heap violations solely to that source file: That is the one that contains a bunch of `@SuppressWarnings`, unsafe casts, and so on - and requires extra scrutiny on review to ensure that from the outside it is not actually possible to cause generics breaks, so that no other code needs to be infected with it. `ArrayList`, itself, works just the same way: ArrayList&#39;s backing store is `Object[]`. Not `T[]` (for good reasons). e.g. the `get(int idx)` method casts to T, which causes a warning, which is suppressed, which is fine, because non-Ts cannot actually end up in that list unless the caller themselves have ignored compiler warnings about generics issues.\r\n\r\nThere are some takes on this, it comes up relatively often. For example, guava&#39;s [ClassToInstanceMap](https://guava.dev/releases/18.0/api/docs/com/google/common/collect/ClassToInstanceMap.html).\r\n\r\n","title":"Fun with Generics; Type-Safe HashMap&lt;Class&lt;?&gt;, CachedObject&lt;?&gt;&gt;","body":"<p>This is a more generic problem that requires higher order generics. A type variable represents an actual type: <code>public &lt;T&gt; void foo(T in, T out)</code> means that the T is a variable and is to be replaced by an actual type. Just like in <code>void foo(int x)</code>, x is a variable and is to be replaced, for any given invocation, by an actual <code>int</code>.</p>\n<p>What this requires is yet another abstractive layer deeper: We now want a type variable, say, ß, which gets replaced not with an actual type, but with a type variable - or at least the notion that you can <em>declare</em> type variables within a generics signature block. Something like:</p>\n<pre><code>Map&lt;{ß} Class&lt;ß&gt;, CachedObject&lt;ß&gt;&gt; cachedAttributes = ...;\n</code></pre>\n<p>It's not that <code>ß</code> is the same type throughout. ß is different for every k/v pair. Hence, it's a higher order thing.</p>\n<p>Java doesn't have this. <strong>What you want is not possible</strong>. Given the steady stream of complaints that generics are 'too complicated' and the questions e.g. here on SO about it, it's probably correct that java does not have them.</p>\n<p>There are fixes. One of them is what you've done: That you take some source file and limit the heap violations solely to that source file: That is the one that contains a bunch of <code>@SuppressWarnings</code>, unsafe casts, and so on - and requires extra scrutiny on review to ensure that from the outside it is not actually possible to cause generics breaks, so that no other code needs to be infected with it. <code>ArrayList</code>, itself, works just the same way: ArrayList's backing store is <code>Object[]</code>. Not <code>T[]</code> (for good reasons). e.g. the <code>get(int idx)</code> method casts to T, which causes a warning, which is suppressed, which is fine, because non-Ts cannot actually end up in that list unless the caller themselves have ignored compiler warnings about generics issues.</p>\n<p>There are some takes on this, it comes up relatively often. For example, guava's <a href=\"https://guava.dev/releases/18.0/api/docs/com/google/common/collect/ClassToInstanceMap.html\" rel=\"nofollow noreferrer\">ClassToInstanceMap</a>.</p>\n"}],"owner":{"account_id":8653039,"reputation":599,"user_id":7775861,"accept_rate":50,"display_name":"Kyle Berezin"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1695762598,"accepted_answer_id":77183447,"answer_count":2,"score":0,"last_activity_date":1695762595,"creation_date":1695761644,"question_id":77183349,"body_markdown":"PrinterService has a generic `getAttribute` function that uses a Class argument to determine the type of attribute returned. Due to a memory leak in java (JDK-7001133) we are caching these values. Most of the caches were trivial to implement, but getAttribute was not. I add them to an ArrayList, indexed by the class of the request. The issue is I wasn&#39;t able to find a type-safe way of doing it. In the following example, I get a warning about an unsafe cast.\r\n\r\nIn reality, the cast is safe, so worst case scenario I will just use my example, I was curious to see if there is a better way.\r\n``` java\r\n    private final HashMap&lt;Class&lt;?&gt;, CachedObject&lt;?&gt;&gt; cachedAttributes = new HashMap&lt;&gt;();\r\n\r\n    public &lt;T extends PrintServiceAttribute&gt; T getAttribute(Class&lt;T&gt; category) {\r\n        if (!cachedAttributes.containsKey(category)) {\r\n            Supplier&lt;T&gt; supplier = () -&gt; innerPrintService.getAttribute(category);\r\n            CachedObject&lt;T&gt; cachedObject = new CachedObject&lt;&gt;(supplier, lifespan);\r\n            cachedAttributes.put(category, cachedObject);\r\n        }\r\n        return (T)cachedAttributes.get(category).get();\r\n    }\r\n```","title":"Fun with Generics; Type-Safe HashMap&lt;Class&lt;?&gt;, CachedObject&lt;?&gt;&gt;","body":"<p>PrinterService has a generic <code>getAttribute</code> function that uses a Class argument to determine the type of attribute returned. Due to a memory leak in java (JDK-7001133) we are caching these values. Most of the caches were trivial to implement, but getAttribute was not. I add them to an ArrayList, indexed by the class of the request. The issue is I wasn't able to find a type-safe way of doing it. In the following example, I get a warning about an unsafe cast.</p>\n<p>In reality, the cast is safe, so worst case scenario I will just use my example, I was curious to see if there is a better way.</p>\n<pre class=\"lang-java prettyprint-override\"><code>    private final HashMap&lt;Class&lt;?&gt;, CachedObject&lt;?&gt;&gt; cachedAttributes = new HashMap&lt;&gt;();\n\n    public &lt;T extends PrintServiceAttribute&gt; T getAttribute(Class&lt;T&gt; category) {\n        if (!cachedAttributes.containsKey(category)) {\n            Supplier&lt;T&gt; supplier = () -&gt; innerPrintService.getAttribute(category);\n            CachedObject&lt;T&gt; cachedObject = new CachedObject&lt;&gt;(supplier, lifespan);\n            cachedAttributes.put(category, cachedObject);\n        }\n        return (T)cachedAttributes.get(category).get();\n    }\n</code></pre>\n"},{"tags":["java","struts-1"],"comments":[{"owner":{"account_id":4790967,"reputation":2035,"user_id":3870176,"accept_rate":83,"display_name":"bencripps"},"score":0,"creation_date":1415843671,"post_id":26900012,"comment_id":42352742,"body_markdown":"whats the exact problem?","body":"whats the exact problem?"},{"owner":{"account_id":5293280,"reputation":21,"user_id":4225131,"display_name":"Amos"},"score":0,"creation_date":1415843926,"post_id":26900012,"comment_id":42352805,"body_markdown":"when i load it in tomcat server,it throws error like this:\n&#39;javax.servlet.jsp.JspException: Cannot find bean: &quot;CommentsUpdated&quot;&#39; @bencripps","body":"when i load it in tomcat server,it throws error like this: &#39;javax.servlet.jsp.JspException: Cannot find bean: &quot;CommentsUpdated&quot;&#39; @bencripps"},{"owner":{"account_id":195854,"reputation":159194,"user_id":438992,"accept_rate":90,"display_name":"Dave Newton"},"score":0,"creation_date":1415884032,"post_id":26900012,"comment_id":42368829,"body_markdown":"You have no form beans defined, I&#39;m not sure what you expect.","body":"You have no form beans defined, I&#39;m not sure what you expect."},{"owner":{"account_id":195854,"reputation":159194,"user_id":438992,"accept_rate":90,"display_name":"Dave Newton"},"score":0,"creation_date":1415884162,"post_id":26900012,"comment_id":42368910,"body_markdown":"Unrelated, but this must be from a *very* old tutorial; it&#39;s pretty awful.","body":"Unrelated, but this must be from a <i>very</i> old tutorial; it&#39;s pretty awful."},{"owner":{"account_id":5293280,"reputation":21,"user_id":4225131,"display_name":"Amos"},"score":0,"creation_date":1415933973,"post_id":26900012,"comment_id":42392052,"body_markdown":"finally i found the Problem, after i enter name=&quot;CommentsUpdated&quot; inside the activity in struts-config.xml..it works! hope this might helpful for others too!","body":"finally i found the Problem, after i enter name=&quot;CommentsUpdated&quot; inside the activity in struts-config.xml..it works! hope this might helpful for others too!"}],"answers":[{"tags":[],"owner":{"account_id":5293280,"reputation":21,"user_id":4225131,"display_name":"Amos"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1415933944,"creation_date":1415933944,"answer_id":26922188,"question_id":26900012,"body_markdown":"    &lt;action path=&quot;/Link&quot; parameter=&quot;method&quot; type=&quot;com.sicmsb.action.LinkAction&quot; name=&quot;CommentsUpdated&quot;&gt;\r\n            \t&lt;forward name=&quot;baseLayout&quot; path=&quot;baseLayout&quot;/&gt;\r\n                &lt;forward name=&quot;search&quot; path=&quot;search&quot;/&gt;\r\n                &lt;forward name=&quot;details&quot; path=&quot;details&quot;/&gt;\r\n                &lt;forward name=&quot;insert&quot; path=&quot;insert&quot;/&gt;\r\n\r\nfinally i found the Problem, after i enter `name=&quot;CommentsUpdated&quot;` inside the activity in struts-config.xml..it works! hope this might helpful for others too!","title":"javax.servlet.jsp.JspException: Cannot find bean: &quot;CommentsUpdated&quot; in any scope","body":"<pre><code>&lt;action path=\"/Link\" parameter=\"method\" type=\"com.sicmsb.action.LinkAction\" name=\"CommentsUpdated\"&gt;\n            &lt;forward name=\"baseLayout\" path=\"baseLayout\"/&gt;\n            &lt;forward name=\"search\" path=\"search\"/&gt;\n            &lt;forward name=\"details\" path=\"details\"/&gt;\n            &lt;forward name=\"insert\" path=\"insert\"/&gt;\n</code></pre>\n\n<p>finally i found the Problem, after i enter <code>name=\"CommentsUpdated\"</code> inside the activity in struts-config.xml..it works! hope this might helpful for others too!</p>\n"},{"tags":[],"owner":{"account_id":698222,"reputation":50202,"user_id":573032,"accept_rate":77,"display_name":"Roman C"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1489252908,"creation_date":1489252908,"answer_id":42738275,"question_id":26900012,"body_markdown":"If you didn&#39;t set the `name` property in the action config, which should be the same as `&lt;form-bean&gt;` name, but used the name in the tag\n\n&lt;!-- language: lang-jsp --&gt;\n\n    &lt;html:text name=&quot;CommentsUpdated&quot; .../&gt;\n\nof course you got an exception\n\n&gt;### Cannot find bean: “CommentsUpdated” in any scope\n\nStruts will instantiate a form-bean and pass it to the action if the form bean and action name are configured. If you want to instantiate it yourself then you should put it into any scope before accessing it in JSP.\n\n","title":"javax.servlet.jsp.JspException: Cannot find bean: &quot;CommentsUpdated&quot; in any scope","body":"<p>If you didn't set the <code>name</code> property in the action config, which should be the same as <code>&lt;form-bean&gt;</code> name, but used the name in the tag</p>\n<pre class=\"lang-jsp prettyprint-override\"><code>&lt;html:text name=&quot;CommentsUpdated&quot; .../&gt;\n</code></pre>\n<p>of course you got an exception</p>\n<blockquote>\n<h3>Cannot find bean: “CommentsUpdated” in any scope</h3>\n</blockquote>\n<p>Struts will instantiate a form-bean and pass it to the action if the form bean and action name are configured. If you want to instantiate it yourself then you should put it into any scope before accessing it in JSP.</p>\n"}],"owner":{"account_id":5293280,"reputation":21,"user_id":4225131,"display_name":"Amos"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":20909,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1695762541,"creation_date":1415843397,"question_id":26900012,"body_markdown":"**`Struts-config.xml`:**\r\n\r\n&lt;!-- language-all: lang-xml --&gt;\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;\r\n\r\n    &lt;!DOCTYPE struts-config PUBLIC\r\n          &quot;-//Apache Software Foundation//DTD Struts Configuration 1.2//EN&quot;\r\n          &quot;http://jakarta.apache.org/struts/dtds/struts-config_1_2.dtd&quot;&gt;\r\n    &lt;struts-config&gt;\r\n      &lt;form-beans&gt;\r\n      &lt;/form-beans&gt;\r\n    \r\n      &lt;global-exceptions&gt;\r\n      &lt;/global-exceptions&gt;\r\n\r\n    &lt;global-forwards&gt;\r\n        &lt;forward name=&quot;welcome&quot;  path=&quot;/Welcome.do&quot;/&gt;\r\n    &lt;/global-forwards&gt;\r\n\r\n    &lt;action-mappings&gt;\r\n        &lt;action path=&quot;/Link&quot; parameter=&quot;method&quot; type=&quot;com.sicmsb.action.LinkAction&quot;&gt;\r\n            &lt;forward name=&quot;search&quot; path=&quot;search&quot;/&gt;\r\n        &lt;/action&gt;\r\n        &lt;action path=&quot;/Welcome&quot; forward=&quot;/welcomeStruts.jsp&quot;/&gt;\r\n    &lt;/action-mappings&gt;\r\n    \r\n    &lt;controller processorClass=&quot;org.apache.struts.tiles.TilesRequestProcessor&quot;/&gt;\r\n\r\n    &lt;message-resources parameter=&quot;com/vaannila/ApplicationResource&quot;/&gt;\r\n    \r\n    &lt;plug-in className=&quot;org.apache.struts.tiles.TilesPlugin&quot; &gt;\r\n        &lt;set-property property=&quot;definitions-config&quot; value=&quot;/WEB-INF/tiles-defs.xml&quot; /&gt;      \r\n        &lt;set-property property=&quot;moduleAware&quot; value=&quot;true&quot; /&gt;\r\n    &lt;/plug-in&gt;\r\n    \r\n    &lt;plug-in className=&quot;org.apache.struts.validator.ValidatorPlugIn&quot;&gt;\r\n        &lt;set-property\r\n            property=&quot;pathnames&quot;\r\n            value=&quot;/WEB-INF/validator-rules.xml,/WEB-INF/validation.xml&quot;/&gt;\r\n    &lt;/plug-in&gt;\r\n  \r\n    &lt;/struts-config&gt;\r\n\r\n**`tiles-defs.xml`:**\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;\r\n    \r\n     &lt;!DOCTYPE tiles-definitions PUBLIC\r\n           &quot;-//Apache Software Foundation//DTD Tiles Configuration 1.1//EN&quot;\r\n           &quot;http://jakarta.apache.org/struts/dtds/tiles-config_1_1.dtd&quot;&gt;\r\n    &lt;tiles-definitions&gt;\r\n    \t&lt;definition name=&quot;baseLayout&quot; path=&quot;/common-layout.jsp&quot;&gt;\r\n    \t\t&lt;put name=&quot;header&quot; value=&quot;/header.jsp&quot; /&gt;\r\n    \t\t&lt;put name=&quot;body&quot; value=&quot;/body.jsp&quot; /&gt;\r\n    \t\t&lt;put name=&quot;footer&quot; value=&quot;/footer.jsp&quot; /&gt;\r\n    \t&lt;/definition&gt;\r\n    \t&lt;definition name=&quot;search&quot; extends=&quot;baseLayout&quot;&gt;\r\n    \r\n    \t\t&lt;put name=&quot;body&quot; value=&quot;/searchMyUser.jsp&quot; /&gt;\r\n    \t&lt;/definition&gt;\r\n    &lt;/tiles-definitions&gt;\r\n\r\n**`common-layout.jsp`:**\r\n\r\n    &lt;%@page contentType=&quot;text/html&quot; pageEncoding=&quot;UTF-8&quot;%&gt;\r\n    &lt;%@ taglib uri=&quot;http://struts.apache.org/tags-html&quot; prefix=&quot;html&quot; %&gt;\r\n    &lt;%@ taglib uri=&quot;http://struts.apache.org/tags-tiles&quot; prefix=&quot;tiles&quot;%&gt;\r\n    &lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot;\r\n       &quot;http://www.w3.org/TR/html4/loose.dtd&quot;&gt;\r\n    &lt;html&gt;\r\n    \r\n    &lt;head&gt;\r\n    &lt;title&gt;&lt;/title&gt;\r\n    &lt;/head&gt;\r\n    &lt;body&gt;\r\n    \t &lt;table border=&quot;1&quot;  width=&quot;100%&quot; height=&quot;100%&quot;&gt;\r\n    \t\t&lt;tr&gt;\r\n    \t\t\t&lt;td&gt;&lt;tiles:insert attribute=&quot;header&quot; /&gt;&lt;/td&gt;\r\n    \t\t&lt;/tr&gt;\r\n\r\n    \t\t&lt;tr&gt;\r\n    \t\t\t&lt;td&gt;&lt;tiles:insert attribute=&quot;body&quot; /&gt;&lt;/td&gt;\r\n    \t\t&lt;/tr&gt;\r\n\r\n    \t\t&lt;tr&gt;\r\n    \t\t\t&lt;td&gt;&lt;tiles:insert attribute=&quot;footer&quot; /&gt;&lt;/td&gt;\r\n    \t\t&lt;/tr&gt;\r\n    \t&lt;/table&gt;\r\n    &lt;/body&gt;\r\n    &lt;/html&gt;\r\n\r\n**`searchMyUser.jsp`:**\r\n\r\n    &lt;%@page import=&quot;com.sicmsb.bean.Comments&quot;%&gt;\r\n    &lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=ISO-8859-1&quot;\r\n    \tpageEncoding=&quot;ISO-8859-1&quot;%&gt;\r\n    &lt;%@ taglib uri=&quot;http://struts.apache.org/tags-bean&quot; prefix=&quot;bean&quot;%&gt;\r\n    &lt;%@ taglib uri=&quot;http://struts.apache.org/tags-html&quot; prefix=&quot;html&quot;%&gt;\r\n    &lt;%@ taglib uri=&quot;http://struts.apache.org/tags-logic&quot; prefix=&quot;logic&quot;%&gt;\r\n    \r\n    &lt;%@ taglib uri=&quot;http://struts.apache.org/tags-tiles&quot; prefix=&quot;tiles&quot;%&gt;\r\n    &lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot; &quot;http://www.w3.org/TR/html4/loose.dtd&quot;&gt;\r\n    \r\n    &lt;html&gt;\r\n    &lt;head&gt;\r\n    &lt;script&gt;\r\n    \tfunction submitAdd(form) {\r\n    \t\tform.submit();\r\n    \t}\r\n    \r\n    \tfunction goDetail(commentId) {\r\n    \t\tvar myform = document[&#39;detForm&#39;];\r\n    \t\t//myform.action = &quot;/detail.do&quot;;\r\n    \t\tmyform[&#39;commentId&#39;].value = commentId;\r\n    \t\tmyform.submit();\r\n    \t}\r\n    &lt;/script&gt;\r\n    &lt;style&gt;\r\n    A {\r\n    \ttext-decoration: underline;\r\n    \tcolor: blue;\r\n    \tcursor: pointer;\r\n    }\r\n    &lt;/style&gt;\r\n    \r\n    &lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=UTF-8&quot;&gt;\r\n    \r\n    &lt;title&gt;Search here&lt;/title&gt;\r\n    &lt;/head&gt;\r\n    &lt;body&gt;\r\n    \t&lt;form name=&quot;detForm&quot; action=&quot;details.do&quot; method=&quot;post&quot;&gt;\r\n    \t\t&lt;input type=&quot;hidden&quot; name=&quot;commentId&quot; /&gt;\r\n    \t&lt;/form&gt;\r\n    \r\n    \t&lt;h1&gt;Search in MyUser&lt;/h1&gt;\r\n    \r\n    \t&lt;form action=&quot;SearchUser.do&quot; method=&quot;post&quot;&gt;\r\n    \t\t&lt;table cellpadding=&quot;3pt&quot;&gt;\r\n    \t\t\t&lt;tr&gt;\r\n    \t\t\t\t&lt;td&gt;Insert Name : &lt;html:text name=&quot;CommentsUpdated&quot;\r\n    \t\t\t\t\t\tproperty=&quot;myUser&quot; size=&quot;30&quot;&gt;&lt;/html:text&gt;&lt;/td&gt;\r\n    \t\t\t&lt;/tr&gt;\r\n    \t\t&lt;/table&gt;\r\n    \t\t&lt;p /&gt;\r\n    \t\t&lt;input type=&quot;button&quot; value=&quot;Search&quot;\r\n    \t\t\tonclick=&quot;this.disabled=true; submitAdd(this.form)&quot; /&gt;\r\n    \t&lt;/form&gt;\r\n    \r\n    \t&lt;hr /&gt;\r\n\r\n    \t&lt;table&gt;\r\n    \t\t&lt;tr&gt;\r\n    \t\t\t&lt;th&gt;Name&lt;/th&gt;\r\n    \t\t\t&lt;th&gt;Email&lt;/th&gt;\r\n    \t\t\t&lt;th&gt;Webpage&lt;/th&gt;\r\n    \t\t\t&lt;th&gt;Summary&lt;/th&gt;\r\n    \t\t\t&lt;th&gt;Comments&lt;/th&gt;\r\n    \t\t&lt;/tr&gt;\r\n    \r\n    \t\t&lt;logic:iterate id=&quot;comment&quot; name=&quot;listComments&quot;\r\n    \t\t\ttype=&quot;com.sicmsb.bean.Comments&quot;&gt;\r\n    \t\t\t&lt;tr&gt;\r\n    \t\t\t\t&lt;td&gt;&lt;a onclick=&quot;goDetail(&#39;&lt;%=comment.getCommentId()%&gt;&#39;)&quot;&gt; &lt;bean:write\r\n    \t\t\t\t\t\t\tname=&quot;comment&quot; property=&quot;myuser&quot; /&gt;\r\n    \t\t\t\t&lt;/a&gt;\r\n    \t\t\t\t&lt;td&gt;|&lt;bean:write name=&quot;comment&quot; property=&quot;email&quot; /&gt;\r\n    \t\t\t\t&lt;td&gt;|&lt;bean:write name=&quot;comment&quot; property=&quot;webpage&quot; /&gt;\r\n    \t\t\t\t&lt;td&gt;|&lt;bean:write name=&quot;comment&quot; property=&quot;summary&quot; /&gt;\r\n    \t\t\t\t&lt;td&gt;|&lt;bean:write name=&quot;comment&quot; property=&quot;comments&quot; /&gt;\r\n    \t\t\t&lt;/tr&gt;\r\n    \t\t&lt;/logic:iterate&gt;\r\n    \t&lt;/table&gt;\r\n    &lt;/body&gt;\r\n    &lt;/html&gt;\r\n\r\n**`LinkAction.java`:**\r\n\r\n&lt;!-- language-all: lang-java --&gt;\r\n\r\n    package com.sicmsb.action;\r\n    \r\n    import javax.servlet.http.HttpServletRequest;\r\n    import javax.servlet.http.HttpServletResponse;\r\n    \r\n    import org.apache.struts.actions.DispatchAction;\r\n    import org.apache.struts.action.ActionForm;\r\n    import org.apache.struts.action.ActionMapping;\r\n    import org.apache.struts.action.ActionForward;\r\n    \r\n    public class LinkAction extends DispatchAction {\r\n        public ActionForward Search(ActionMapping mapping, ActionForm  form,\r\n                HttpServletRequest request, HttpServletResponse response)\r\n                throws Exception {\r\n            return mapping.findForward(&quot;search&quot;);\r\n        }\r\n    }\r\n\r\nI managed to create the template and call in the forms without the &quot;name&quot; attributes.It worked, then i realized i have to call in forms that have names attribute(`CommentsUpdated`) so that i able to pass the variables for digging the data from database.Unluckily it throws error like this:\r\n\r\n`javax.servlet.jsp.JspException: Cannot find bean: &quot;CommentsUpdated&quot; in any scope`.\r\n\r\ni understand that the name attribute in my `serachMyUser.jsp` causing this error, but i&#39;m stuck on this part, i&#39;ve tried to search in google for examples, but all i get is the forms were called in without names attribute in it. ","title":"javax.servlet.jsp.JspException: Cannot find bean: &quot;CommentsUpdated&quot; in any scope","body":"<p><strong><code>Struts-config.xml</code>:</strong></p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;\n\n&lt;!DOCTYPE struts-config PUBLIC\n      &quot;-//Apache Software Foundation//DTD Struts Configuration 1.2//EN&quot;\n      &quot;http://jakarta.apache.org/struts/dtds/struts-config_1_2.dtd&quot;&gt;\n&lt;struts-config&gt;\n  &lt;form-beans&gt;\n  &lt;/form-beans&gt;\n\n  &lt;global-exceptions&gt;\n  &lt;/global-exceptions&gt;\n\n&lt;global-forwards&gt;\n    &lt;forward name=&quot;welcome&quot;  path=&quot;/Welcome.do&quot;/&gt;\n&lt;/global-forwards&gt;\n\n&lt;action-mappings&gt;\n    &lt;action path=&quot;/Link&quot; parameter=&quot;method&quot; type=&quot;com.sicmsb.action.LinkAction&quot;&gt;\n        &lt;forward name=&quot;search&quot; path=&quot;search&quot;/&gt;\n    &lt;/action&gt;\n    &lt;action path=&quot;/Welcome&quot; forward=&quot;/welcomeStruts.jsp&quot;/&gt;\n&lt;/action-mappings&gt;\n\n&lt;controller processorClass=&quot;org.apache.struts.tiles.TilesRequestProcessor&quot;/&gt;\n\n&lt;message-resources parameter=&quot;com/vaannila/ApplicationResource&quot;/&gt;\n\n&lt;plug-in className=&quot;org.apache.struts.tiles.TilesPlugin&quot; &gt;\n    &lt;set-property property=&quot;definitions-config&quot; value=&quot;/WEB-INF/tiles-defs.xml&quot; /&gt;      \n    &lt;set-property property=&quot;moduleAware&quot; value=&quot;true&quot; /&gt;\n&lt;/plug-in&gt;\n\n&lt;plug-in className=&quot;org.apache.struts.validator.ValidatorPlugIn&quot;&gt;\n    &lt;set-property\n        property=&quot;pathnames&quot;\n        value=&quot;/WEB-INF/validator-rules.xml,/WEB-INF/validation.xml&quot;/&gt;\n&lt;/plug-in&gt;\n\n&lt;/struts-config&gt;\n</code></pre>\n<p><strong><code>tiles-defs.xml</code>:</strong></p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;\n\n &lt;!DOCTYPE tiles-definitions PUBLIC\n       &quot;-//Apache Software Foundation//DTD Tiles Configuration 1.1//EN&quot;\n       &quot;http://jakarta.apache.org/struts/dtds/tiles-config_1_1.dtd&quot;&gt;\n&lt;tiles-definitions&gt;\n    &lt;definition name=&quot;baseLayout&quot; path=&quot;/common-layout.jsp&quot;&gt;\n        &lt;put name=&quot;header&quot; value=&quot;/header.jsp&quot; /&gt;\n        &lt;put name=&quot;body&quot; value=&quot;/body.jsp&quot; /&gt;\n        &lt;put name=&quot;footer&quot; value=&quot;/footer.jsp&quot; /&gt;\n    &lt;/definition&gt;\n    &lt;definition name=&quot;search&quot; extends=&quot;baseLayout&quot;&gt;\n\n        &lt;put name=&quot;body&quot; value=&quot;/searchMyUser.jsp&quot; /&gt;\n    &lt;/definition&gt;\n&lt;/tiles-definitions&gt;\n</code></pre>\n<p><strong><code>common-layout.jsp</code>:</strong></p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;%@page contentType=&quot;text/html&quot; pageEncoding=&quot;UTF-8&quot;%&gt;\n&lt;%@ taglib uri=&quot;http://struts.apache.org/tags-html&quot; prefix=&quot;html&quot; %&gt;\n&lt;%@ taglib uri=&quot;http://struts.apache.org/tags-tiles&quot; prefix=&quot;tiles&quot;%&gt;\n&lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot;\n   &quot;http://www.w3.org/TR/html4/loose.dtd&quot;&gt;\n&lt;html&gt;\n\n&lt;head&gt;\n&lt;title&gt;&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n     &lt;table border=&quot;1&quot;  width=&quot;100%&quot; height=&quot;100%&quot;&gt;\n        &lt;tr&gt;\n            &lt;td&gt;&lt;tiles:insert attribute=&quot;header&quot; /&gt;&lt;/td&gt;\n        &lt;/tr&gt;\n\n        &lt;tr&gt;\n            &lt;td&gt;&lt;tiles:insert attribute=&quot;body&quot; /&gt;&lt;/td&gt;\n        &lt;/tr&gt;\n\n        &lt;tr&gt;\n            &lt;td&gt;&lt;tiles:insert attribute=&quot;footer&quot; /&gt;&lt;/td&gt;\n        &lt;/tr&gt;\n    &lt;/table&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n<p><strong><code>searchMyUser.jsp</code>:</strong></p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;%@page import=&quot;com.sicmsb.bean.Comments&quot;%&gt;\n&lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=ISO-8859-1&quot;\n    pageEncoding=&quot;ISO-8859-1&quot;%&gt;\n&lt;%@ taglib uri=&quot;http://struts.apache.org/tags-bean&quot; prefix=&quot;bean&quot;%&gt;\n&lt;%@ taglib uri=&quot;http://struts.apache.org/tags-html&quot; prefix=&quot;html&quot;%&gt;\n&lt;%@ taglib uri=&quot;http://struts.apache.org/tags-logic&quot; prefix=&quot;logic&quot;%&gt;\n\n&lt;%@ taglib uri=&quot;http://struts.apache.org/tags-tiles&quot; prefix=&quot;tiles&quot;%&gt;\n&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot; &quot;http://www.w3.org/TR/html4/loose.dtd&quot;&gt;\n\n&lt;html&gt;\n&lt;head&gt;\n&lt;script&gt;\n    function submitAdd(form) {\n        form.submit();\n    }\n\n    function goDetail(commentId) {\n        var myform = document['detForm'];\n        //myform.action = &quot;/detail.do&quot;;\n        myform['commentId'].value = commentId;\n        myform.submit();\n    }\n&lt;/script&gt;\n&lt;style&gt;\nA {\n    text-decoration: underline;\n    color: blue;\n    cursor: pointer;\n}\n&lt;/style&gt;\n\n&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=UTF-8&quot;&gt;\n\n&lt;title&gt;Search here&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n    &lt;form name=&quot;detForm&quot; action=&quot;details.do&quot; method=&quot;post&quot;&gt;\n        &lt;input type=&quot;hidden&quot; name=&quot;commentId&quot; /&gt;\n    &lt;/form&gt;\n\n    &lt;h1&gt;Search in MyUser&lt;/h1&gt;\n\n    &lt;form action=&quot;SearchUser.do&quot; method=&quot;post&quot;&gt;\n        &lt;table cellpadding=&quot;3pt&quot;&gt;\n            &lt;tr&gt;\n                &lt;td&gt;Insert Name : &lt;html:text name=&quot;CommentsUpdated&quot;\n                        property=&quot;myUser&quot; size=&quot;30&quot;&gt;&lt;/html:text&gt;&lt;/td&gt;\n            &lt;/tr&gt;\n        &lt;/table&gt;\n        &lt;p /&gt;\n        &lt;input type=&quot;button&quot; value=&quot;Search&quot;\n            onclick=&quot;this.disabled=true; submitAdd(this.form)&quot; /&gt;\n    &lt;/form&gt;\n\n    &lt;hr /&gt;\n\n    &lt;table&gt;\n        &lt;tr&gt;\n            &lt;th&gt;Name&lt;/th&gt;\n            &lt;th&gt;Email&lt;/th&gt;\n            &lt;th&gt;Webpage&lt;/th&gt;\n            &lt;th&gt;Summary&lt;/th&gt;\n            &lt;th&gt;Comments&lt;/th&gt;\n        &lt;/tr&gt;\n\n        &lt;logic:iterate id=&quot;comment&quot; name=&quot;listComments&quot;\n            type=&quot;com.sicmsb.bean.Comments&quot;&gt;\n            &lt;tr&gt;\n                &lt;td&gt;&lt;a onclick=&quot;goDetail('&lt;%=comment.getCommentId()%&gt;')&quot;&gt; &lt;bean:write\n                            name=&quot;comment&quot; property=&quot;myuser&quot; /&gt;\n                &lt;/a&gt;\n                &lt;td&gt;|&lt;bean:write name=&quot;comment&quot; property=&quot;email&quot; /&gt;\n                &lt;td&gt;|&lt;bean:write name=&quot;comment&quot; property=&quot;webpage&quot; /&gt;\n                &lt;td&gt;|&lt;bean:write name=&quot;comment&quot; property=&quot;summary&quot; /&gt;\n                &lt;td&gt;|&lt;bean:write name=&quot;comment&quot; property=&quot;comments&quot; /&gt;\n            &lt;/tr&gt;\n        &lt;/logic:iterate&gt;\n    &lt;/table&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n<p><strong><code>LinkAction.java</code>:</strong></p>\n\n<pre class=\"lang-java prettyprint-override\"><code>package com.sicmsb.action;\n\nimport javax.servlet.http.HttpServletRequest;\nimport javax.servlet.http.HttpServletResponse;\n\nimport org.apache.struts.actions.DispatchAction;\nimport org.apache.struts.action.ActionForm;\nimport org.apache.struts.action.ActionMapping;\nimport org.apache.struts.action.ActionForward;\n\npublic class LinkAction extends DispatchAction {\n    public ActionForward Search(ActionMapping mapping, ActionForm  form,\n            HttpServletRequest request, HttpServletResponse response)\n            throws Exception {\n        return mapping.findForward(&quot;search&quot;);\n    }\n}\n</code></pre>\n<p>I managed to create the template and call in the forms without the &quot;name&quot; attributes.It worked, then i realized i have to call in forms that have names attribute(<code>CommentsUpdated</code>) so that i able to pass the variables for digging the data from database.Unluckily it throws error like this:</p>\n<p><code>javax.servlet.jsp.JspException: Cannot find bean: &quot;CommentsUpdated&quot; in any scope</code>.</p>\n<p>i understand that the name attribute in my <code>serachMyUser.jsp</code> causing this error, but i'm stuck on this part, i've tried to search in google for examples, but all i get is the forms were called in without names attribute in it.</p>\n"},{"tags":["java","exception","httpurlconnection","http-status-codes"],"comments":[{"owner":{"account_id":5694623,"reputation":6528,"user_id":4501480,"accept_rate":55,"display_name":"Vikrant Kashyap"},"score":0,"creation_date":1459656559,"post_id":36381353,"comment_id":60380376,"body_markdown":"HTTP Error 401 - Unauthorized: Access is denied due to invalid credentials. This behavior occurs if the following conditions are true: The Web site that you try to view uses Integrated Windows authentication. The application pool for the Web site recycles during the authentication process.","body":"HTTP Error 401 - Unauthorized: Access is denied due to invalid credentials. This behavior occurs if the following conditions are true: The Web site that you try to view uses Integrated Windows authentication. The application pool for the Web site recycles during the authentication process."}],"answers":[{"tags":[],"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"down_vote_count":0,"up_vote_count":7,"is_accepted":true,"score":7,"last_activity_date":1459656470,"creation_date":1459654777,"answer_id":36381364,"question_id":36381353,"body_markdown":"Not if you check `getResponseCode()` before `getInputStream()` and the problem is an HTTP return code rather than a connect error.","title":"Does java.net.HttpUrlConnection always throw IOException if there is an error status return by Server?","body":"<p>Not if you check <code>getResponseCode()</code> before <code>getInputStream()</code> and the problem is an HTTP return code rather than a connect error.</p>\n"},{"tags":[],"owner":{"account_id":57788,"reputation":46110,"user_id":173149,"accept_rate":62,"display_name":"gavenkoa"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695762383,"creation_date":1695762383,"answer_id":77183426,"question_id":36381353,"body_markdown":"In case of codes beyond 400 you need to call `HttpURLConnection.getErrorStream()` instead of `HttpURLConnection.getInputStream()`. Java 11 implementation:\r\n\r\n    public InputStream getErrorStream() {\r\n        if (this.connected &amp;&amp; this.responseCode &gt;= 400) {\r\n            if (this.errorStream != null) {\r\n                return this.errorStream;\r\n            }\r\n            if (this.inputStream != null) {\r\n                return this.inputStream;\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n","title":"Does java.net.HttpUrlConnection always throw IOException if there is an error status return by Server?","body":"<p>In case of codes beyond 400 you need to call <code>HttpURLConnection.getErrorStream()</code> instead of <code>HttpURLConnection.getInputStream()</code>. Java 11 implementation:</p>\n<pre><code>public InputStream getErrorStream() {\n    if (this.connected &amp;&amp; this.responseCode &gt;= 400) {\n        if (this.errorStream != null) {\n            return this.errorStream;\n        }\n        if (this.inputStream != null) {\n            return this.inputStream;\n        }\n    }\n    return null;\n}\n</code></pre>\n"}],"owner":{"account_id":3619169,"reputation":9458,"user_id":3018377,"accept_rate":64,"display_name":"LHA"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3787,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":36381364,"answer_count":2,"score":2,"last_activity_date":1695762383,"creation_date":1459654637,"question_id":36381353,"body_markdown":"I am using **java.net.HttpUrlConnection** to make Http requests to my Server. I realized that if the Server return an error status (400 for example). HttpUrlConnection will throw an IOException corresponding to the error status.\r\n\r\nMy question is:  **Does HttpUrlConnection always throw an IOException if the server return an error status (4xx, 5xx)?**\r\n\r\nI take a look at [HttpUrlConnection][1] API description but I couldn&#39;t answer my question.\r\n\r\n**Updated: Please see my test:**\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\ttry {\r\n\t\t\t\r\n            String url = &quot;https://www.googleapis.com/oauth2/v3/userinfo?access_token=___fake_token&quot;;\r\n\t\t\tHttpURLConnection conn = (HttpURLConnection)new URL(url).openConnection();\r\n\t\t\t\r\n\t\t\tconn.getResponseCode();\r\n\t\t\tconn.getInputStream();\r\n\t\t\t\r\n\t\t} catch (Exception ex) {\r\n\t\t\tex.printStackTrace();\r\n\t\t\t// Print IOException: java.io.IOException: Server returned HTTP response code: 401 for URL: https://www.googleapis.com/oauth2/v3/userinfo?access_token=abc\r\n\r\n            // If I commented conn.getResponseCode() -&gt; The same IOException\r\n\t\t}\r\n\t}\r\n\r\nThank you!\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/7/docs/api/java/net/HttpURLConnection.html","title":"Does java.net.HttpUrlConnection always throw IOException if there is an error status return by Server?","body":"<p>I am using <strong>java.net.HttpUrlConnection</strong> to make Http requests to my Server. I realized that if the Server return an error status (400 for example). HttpUrlConnection will throw an IOException corresponding to the error status.</p>\n<p>My question is:  <strong>Does HttpUrlConnection always throw an IOException if the server return an error status (4xx, 5xx)?</strong></p>\n<p>I take a look at <a href=\"https://docs.oracle.com/javase/7/docs/api/java/net/HttpURLConnection.html\" rel=\"nofollow noreferrer\">HttpUrlConnection</a> API description but I couldn't answer my question.</p>\n<p><strong>Updated: Please see my test:</strong></p>\n<pre><code>public static void main(String[] args) {\n    try {\n        \n        String url = &quot;https://www.googleapis.com/oauth2/v3/userinfo?access_token=___fake_token&quot;;\n        HttpURLConnection conn = (HttpURLConnection)new URL(url).openConnection();\n        \n        conn.getResponseCode();\n        conn.getInputStream();\n        \n    } catch (Exception ex) {\n        ex.printStackTrace();\n        // Print IOException: java.io.IOException: Server returned HTTP response code: 401 for URL: https://www.googleapis.com/oauth2/v3/userinfo?access_token=abc\n\n        // If I commented conn.getResponseCode() -&gt; The same IOException\n    }\n}\n</code></pre>\n<p>Thank you!</p>\n"},{"tags":["java","database","h2"],"comments":[{"owner":{"account_id":299251,"reputation":335905,"user_id":605744,"accept_rate":100,"display_name":"Tomasz Nurkiewicz"},"score":4,"creation_date":1329422216,"post_id":9318116,"comment_id":11755838,"body_markdown":"http://www.h2database.com/html/tutorial.html#using_server","body":"<a href=\"http://www.h2database.com/html/tutorial.html#using_server\" rel=\"nofollow noreferrer\">h2database.com/html/tutorial.html#using_server</a>"},{"owner":{"account_id":151106,"reputation":9166,"user_id":364746,"accept_rate":84,"display_name":"Feras Odeh"},"score":1,"creation_date":1329423373,"post_id":9318116,"comment_id":11756289,"body_markdown":"This doesn&#39;t work for me","body":"This doesn&#39;t work for me"},{"owner":{"account_id":299251,"reputation":335905,"user_id":605744,"accept_rate":100,"display_name":"Tomasz Nurkiewicz"},"score":1,"creation_date":1329423647,"post_id":9318116,"comment_id":11756369,"body_markdown":"OK...               I mean - please be more specific. Why this doesn&#39;t work? What do you want to achieve? What have you tried so far?","body":"OK...               I mean - please be more specific. Why this doesn&#39;t work? What do you want to achieve? What have you tried so far?"},{"owner":{"account_id":60171,"reputation":115485,"user_id":179850,"accept_rate":100,"display_name":"Gray"},"score":0,"creation_date":1329427421,"post_id":9318116,"comment_id":11757727,"body_markdown":"Please demonstrate the research, code, work you have done up to now.","body":"Please demonstrate the research, code, work you have done up to now."}],"answers":[{"tags":[],"owner":{"account_id":161745,"reputation":49235,"user_id":382763,"accept_rate":92,"display_name":"Thomas Mueller"},"down_vote_count":0,"up_vote_count":33,"is_accepted":true,"score":33,"last_activity_date":1624274476,"creation_date":1329484819,"answer_id":9328973,"question_id":9318116,"body_markdown":"As the exception message says, &quot;Database may be already in use&quot;. You need to close all other connection(s), to make sure the database is not open in another process concurrently.\r\n\r\nBy the way, don&#39;t use `AUTO_SERVER=TRUE` _and_ the server mode at the same time. See the documentation for the [automatic mixed mode][1]. Use either one. \r\n\r\nI guess you are a bit confused about the different connection modes. I suggest to read [the documentation about the connection modes][2], to make sure you understand it.\r\n\r\n\r\n  [1]: http://h2database.com/html/features.html#auto_mixed_mode\r\n  [2]: http://h2database.com/html/features.html#connection_modes","title":"How to run H2 database in server mode?","body":"<p>As the exception message says, &quot;Database may be already in use&quot;. You need to close all other connection(s), to make sure the database is not open in another process concurrently.</p>\n<p>By the way, don't use <code>AUTO_SERVER=TRUE</code> <em>and</em> the server mode at the same time. See the documentation for the <a href=\"http://h2database.com/html/features.html#auto_mixed_mode\" rel=\"nofollow noreferrer\">automatic mixed mode</a>. Use either one.</p>\n<p>I guess you are a bit confused about the different connection modes. I suggest to read <a href=\"http://h2database.com/html/features.html#connection_modes\" rel=\"nofollow noreferrer\">the documentation about the connection modes</a>, to make sure you understand it.</p>\n"},{"tags":[],"owner":{"account_id":913756,"reputation":973,"user_id":1366617,"accept_rate":71,"display_name":"yousafsajjad"},"down_vote_count":1,"up_vote_count":15,"is_accepted":false,"score":14,"last_activity_date":1571748935,"creation_date":1380221987,"answer_id":19036460,"question_id":9318116,"body_markdown":"You can use the following code to run H2 in server mode.\r\n\r\n    &lt;bean id=&quot;dataSource&quot; class=&quot;org.apache.commons.dbcp.BasicDataSource&quot;\r\n\tdestroy-method=&quot;close&quot;&gt;\r\n\t    &lt;property name=&quot;driverClassName&quot; value=&quot;org.h2.Driver&quot; /&gt;\r\n    \t&lt;property name=&quot;url&quot; value=&quot;jdbc:h2:target/h2/ps;AUTO_SERVER=TRUE&quot; /&gt;\r\n\t    &lt;property name=&quot;username&quot; value=&quot;sa&quot; /&gt;\r\n    \t&lt;property name=&quot;password&quot; value=&quot;&quot; /&gt;\r\n    &lt;/bean&gt;\r\n\r\nYou can use SQuirrel SQL client (http://squirrel-sql.sourceforge.net/) to connect to you H2 database and look at the tables.\r\n\r\n1. Create new connection.\r\n2. Select H2 in the driver dropdown menu\r\n3. Set url to your project target folder h2 folder (jdbc:h2:C:\\projects\\workspace\\TestProject\\target/h2/ps;AUTO_SERVER=true)\r\n4. Enter user name (&quot;sa&quot;)\r\n5. Enter password (&quot;&quot;)","title":"How to run H2 database in server mode?","body":"<p>You can use the following code to run H2 in server mode.</p>\n\n<pre><code>&lt;bean id=\"dataSource\" class=\"org.apache.commons.dbcp.BasicDataSource\"\ndestroy-method=\"close\"&gt;\n    &lt;property name=\"driverClassName\" value=\"org.h2.Driver\" /&gt;\n    &lt;property name=\"url\" value=\"jdbc:h2:target/h2/ps;AUTO_SERVER=TRUE\" /&gt;\n    &lt;property name=\"username\" value=\"sa\" /&gt;\n    &lt;property name=\"password\" value=\"\" /&gt;\n&lt;/bean&gt;\n</code></pre>\n\n<p>You can use SQuirrel SQL client (<a href=\"http://squirrel-sql.sourceforge.net/\" rel=\"nofollow noreferrer\">http://squirrel-sql.sourceforge.net/</a>) to connect to you H2 database and look at the tables.</p>\n\n<ol>\n<li>Create new connection.</li>\n<li>Select H2 in the driver dropdown menu</li>\n<li>Set url to your project target folder h2 folder (jdbc:h2:C:\\projects\\workspace\\TestProject\\target/h2/ps;AUTO_SERVER=true)</li>\n<li>Enter user name (\"sa\")</li>\n<li>Enter password (\"\")</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":557015,"reputation":992,"user_id":919312,"accept_rate":0,"display_name":"ERNESTO ARROYO RON"},"down_vote_count":0,"up_vote_count":26,"is_accepted":false,"score":26,"last_activity_date":1561539235,"creation_date":1392022555,"answer_id":21672625,"question_id":9318116,"body_markdown":"From command line,\r\n\r\n    java -jar h2-1.3.160.jar -webAllowOthers -tcpAllowOthers\r\n\r\n\r\n\r\nthis will launch an h2 database in server mode:\r\n\r\n```none\r\nWeb Console server running at http://A.B.C.D:8082 (others can connect)\r\nTCP server running at tcp://A.B.C.D:9092 (others can connect)\r\nPG server running at pg://A.B.C.D:5435 (only local connections)\r\n```\r\n\r\nopen a browser to have an admin GUI","title":"How to run H2 database in server mode?","body":"<p>From command line,</p>\n\n<pre><code>java -jar h2-1.3.160.jar -webAllowOthers -tcpAllowOthers\n</code></pre>\n\n<p>this will launch an h2 database in server mode:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Web Console server running at http://A.B.C.D:8082 (others can connect)\nTCP server running at tcp://A.B.C.D:9092 (others can connect)\nPG server running at pg://A.B.C.D:5435 (only local connections)\n</code></pre>\n\n<p>open a browser to have an admin GUI</p>\n"},{"tags":[],"owner":{"account_id":8125967,"reputation":262,"user_id":6120928,"display_name":"Nimesha Kalinga"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1493966373,"creation_date":1493966373,"answer_id":43798150,"question_id":9318116,"body_markdown":"Close all the applications that using H2 (web console, etc)\r\nThen add the AUTO_SERVER=TRUE to the end of the location in h2 console and also in java program (which you already have done)\r\n ","title":"How to run H2 database in server mode?","body":"<p>Close all the applications that using H2 (web console, etc)\nThen add the AUTO_SERVER=TRUE to the end of the location in h2 console and also in java program (which you already have done)</p>\n"},{"tags":[],"owner":{"account_id":9698624,"reputation":46,"user_id":7194279,"display_name":"Manoj Kumar Mali"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1542945174,"creation_date":1542909581,"answer_id":53436188,"question_id":9318116,"body_markdown":"I was getting this error when trying to start H2.  \r\nSee also http://h2database.com/javadoc/org/h2/tools/Server.html  \r\n\r\n&gt; Exception in thread &quot;main&quot; org.h2.jdbc.JdbcSQLException: Feature not\r\n&gt; supported: &quot;-~webAllowOthers&quot; [50100-197]\r\n\r\nSo I followed these steps:  \r\n\r\n1. make dir mkdir h2db this directory will have your db files.\r\n2. Hit this command : `java -cp bin/h2-1.4.197.jar org.h2.tools.Server -web -webAllowOthers -tcp -tcpAllowOthers -baseDir /home/manoj/dev/h2/h2db_6.0`  \r\n   this command will start h2 \r\n3. If you want to run h2 in backend then open vi h2.sh and paste this command in this:\r\n   `nohup java -cp bin/h2-1.4.197.jar org.h2.tools.Server -web -webAllowOthers -tcp -tcpAllowOthers -baseDir /home/manoj/dev/h2/h2db_6.0/ &amp;`\r\n4. Now run ./bin.h2.sh.\r\n\r\n","title":"How to run H2 database in server mode?","body":"<p>I was getting this error when trying to start H2.<br>\nSee also <a href=\"http://h2database.com/javadoc/org/h2/tools/Server.html\" rel=\"nofollow noreferrer\">http://h2database.com/javadoc/org/h2/tools/Server.html</a>  </p>\n\n<blockquote>\n  <p>Exception in thread \"main\" org.h2.jdbc.JdbcSQLException: Feature not\n  supported: \"-~webAllowOthers\" [50100-197]</p>\n</blockquote>\n\n<p>So I followed these steps:  </p>\n\n<ol>\n<li>make dir mkdir h2db this directory will have your db files.</li>\n<li>Hit this command : <code>java -cp bin/h2-1.4.197.jar org.h2.tools.Server -web -webAllowOthers -tcp -tcpAllowOthers -baseDir /home/manoj/dev/h2/h2db_6.0</code><br>\nthis command will start h2 </li>\n<li>If you want to run h2 in backend then open vi h2.sh and paste this command in this:\n<code>nohup java -cp bin/h2-1.4.197.jar org.h2.tools.Server -web -webAllowOthers -tcp -tcpAllowOthers -baseDir /home/manoj/dev/h2/h2db_6.0/ &amp;</code></li>\n<li>Now run ./bin.h2.sh.</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":20291587,"reputation":21,"user_id":14883137,"display_name":"Andrey Zaytsev"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1695762221,"creation_date":1624251215,"answer_id":68062440,"question_id":9318116,"body_markdown":"There is one more way. You may define @Configuration bean, e.g.:\r\n\r\n\r\n    @Configuration\r\n    public class H2Configuration {\r\n    \r\n        @Bean\r\n        public void startTCPServer(){\r\n            try {\r\n                Server h2Server = Server.createTcpServer().start();\r\n                if (h2Server.isRunning(true)) {\r\n                    System.out.println(h2Server.getStatus());\r\n                } else {\r\n                    throw new RuntimeException(&quot;Could not start H2 server.&quot;);\r\n                }\r\n            } catch (SQLException e) {\r\n                throw new RuntimeException(&quot;Failed to start H2 server: &quot;, e);\r\n            }\r\n        }\r\n    }\r\n\r\n","title":"How to run H2 database in server mode?","body":"<p>There is one more way. You may define @Configuration bean, e.g.:</p>\n<pre><code>@Configuration\npublic class H2Configuration {\n\n    @Bean\n    public void startTCPServer(){\n        try {\n            Server h2Server = Server.createTcpServer().start();\n            if (h2Server.isRunning(true)) {\n                System.out.println(h2Server.getStatus());\n            } else {\n                throw new RuntimeException(&quot;Could not start H2 server.&quot;);\n            }\n        } catch (SQLException e) {\n            throw new RuntimeException(&quot;Failed to start H2 server: &quot;, e);\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":151106,"reputation":9166,"user_id":364746,"accept_rate":84,"display_name":"Feras Odeh"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":143433,"favorite_count":0,"down_vote_count":2,"up_vote_count":39,"accepted_answer_id":9328973,"answer_count":6,"score":37,"last_activity_date":1695762221,"creation_date":1329422010,"question_id":9318116,"body_markdown":"I need to start H2 database in server mode from my application. Having tried the following code:\r\n\r\n    server = Server.createTcpServer().start();\r\n\r\nHere is the properties for the connection:\r\n\r\n    javabase.jdbc.url = jdbc:h2:tcp://localhost:9092/nio:~/source/db/database/db;AUTO_SERVER=TRUE\r\n    javabase.jdbc.driver = org.h2.Driver\r\n    javabase.jdbc.username = sa\r\n    javabase.jdbc.password =\r\n\r\n\r\nWhen I run the program, I got the following error:\r\n\r\n    client.db.exception.DAOException: org.h2.jdbc.JdbcSQLException: Database may be already in use: &quot;Locked by another process&quot;. Possible solutions: close all other connection(s); use the server mode [90020-164]\r\n    \tat org.h2.message.DbException.getJdbcSQLException(DbException.java:329)\r\n    \tat org.h2.message.DbException.get(DbException.java:169)\r\n    \tat org.h2.message.DbException.get(DbException.java:146)\r\n    \tat org.h2.store.FileLock.getExceptionAlreadyInUse(FileLock.java:439)\r\n    \tat org.h2.store.FileLock.lockFile(FileLock.java:336)\r\n    \tat org.h2.store.FileLock.lock(FileLock.java:128)\r\n    \tat org.h2.engine.Database.open(Database.java:542)\r\n    \tat org.h2.engine.Database.openDatabase(Database.java:222)\r\n    \tat org.h2.engine.Database.&lt;init&gt;(Database.java:217)\r\n    \tat org.h2.engine.Engine.openSession(Engine.java:56)\r\n    \tat org.h2.engine.Engine.openSession(Engine.java:159)\r\n    \tat org.h2.engine.Engine.createSessionAndValidate(Engine.java:138)\r\n    \tat org.h2.engine.Engine.createSession(Engine.java:121)\r\n    \tat org.h2.server.TcpServerThread.run(TcpServerThread.java:133)\r\n    \tat java.lang.Thread.run(Thread.java:680)\r\n\r\n\r\n\r\n","title":"How to run H2 database in server mode?","body":"<p>I need to start H2 database in server mode from my application. Having tried the following code:</p>\n<pre><code>server = Server.createTcpServer().start();\n</code></pre>\n<p>Here is the properties for the connection:</p>\n<pre><code>javabase.jdbc.url = jdbc:h2:tcp://localhost:9092/nio:~/source/db/database/db;AUTO_SERVER=TRUE\njavabase.jdbc.driver = org.h2.Driver\njavabase.jdbc.username = sa\njavabase.jdbc.password =\n</code></pre>\n<p>When I run the program, I got the following error:</p>\n<pre><code>client.db.exception.DAOException: org.h2.jdbc.JdbcSQLException: Database may be already in use: &quot;Locked by another process&quot;. Possible solutions: close all other connection(s); use the server mode [90020-164]\n    at org.h2.message.DbException.getJdbcSQLException(DbException.java:329)\n    at org.h2.message.DbException.get(DbException.java:169)\n    at org.h2.message.DbException.get(DbException.java:146)\n    at org.h2.store.FileLock.getExceptionAlreadyInUse(FileLock.java:439)\n    at org.h2.store.FileLock.lockFile(FileLock.java:336)\n    at org.h2.store.FileLock.lock(FileLock.java:128)\n    at org.h2.engine.Database.open(Database.java:542)\n    at org.h2.engine.Database.openDatabase(Database.java:222)\n    at org.h2.engine.Database.&lt;init&gt;(Database.java:217)\n    at org.h2.engine.Engine.openSession(Engine.java:56)\n    at org.h2.engine.Engine.openSession(Engine.java:159)\n    at org.h2.engine.Engine.createSessionAndValidate(Engine.java:138)\n    at org.h2.engine.Engine.createSession(Engine.java:121)\n    at org.h2.server.TcpServerThread.run(TcpServerThread.java:133)\n    at java.lang.Thread.run(Thread.java:680)\n</code></pre>\n"},{"tags":["java","spring-boot","google-app-engine"],"comments":[{"owner":{"account_id":13426160,"reputation":488,"user_id":9687449,"display_name":"Oliver Aragon"},"score":0,"creation_date":1570118978,"post_id":58113844,"comment_id":102821498,"body_markdown":"Are you using App Engine Standard or Flexible? Does it run on your local environment?","body":"Are you using App Engine Standard or Flexible? Does it run on your local environment?"},{"owner":{"account_id":16630867,"reputation":43,"user_id":12018748,"display_name":"Jonie_pe"},"score":0,"creation_date":1570571810,"post_id":58113844,"comment_id":102952930,"body_markdown":"@OliverAragon I try running it local with gradle appengineRun task. It should be standard.","body":"@OliverAragon I try running it local with gradle appengineRun task. It should be standard."},{"owner":{"account_id":13426160,"reputation":488,"user_id":9687449,"display_name":"Oliver Aragon"},"score":0,"creation_date":1570728618,"post_id":58113844,"comment_id":103014620,"body_markdown":"Did it work on you local environment?","body":"Did it work on you local environment?"},{"owner":{"account_id":9761175,"reputation":73,"user_id":7236219,"display_name":"Leandro Silva"},"score":1,"creation_date":1613515336,"post_id":58113844,"comment_id":117097499,"body_markdown":"I&#39;m having the same problem, but I&#39;m using maven and this error only happens when i run as test.","body":"I&#39;m having the same problem, but I&#39;m using maven and this error only happens when i run as test."},{"owner":{"account_id":273169,"reputation":2083,"user_id":564606,"accept_rate":79,"display_name":"ciferkey"},"score":1,"creation_date":1617594226,"post_id":58113844,"comment_id":118339438,"body_markdown":"Were you ever able to resolve this issue? I&#39;m facing the same issue myself right now.","body":"Were you ever able to resolve this issue? I&#39;m facing the same issue myself right now."}],"owner":{"account_id":16630867,"reputation":43,"user_id":12018748,"display_name":"Jonie_pe"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1242,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1695760040,"creation_date":1569490666,"question_id":58113844,"body_markdown":"I have a problem..\r\nI want to deploy my Spring Boot Gradle app to GC App Engine.\r\nI use the command :\r\n\r\n**gradle appengineDeploy**\r\n\r\nIt actually works but when i try to open the app in the browser it says :\r\n```\r\nError: Server Error\r\nThe server encountered an error and could not complete your request.\r\nPlease try again in 30 seconds.\r\n```\r\nSo the app was deployed successfully but it has a problem to start..\r\n\r\n```\r\njava.lang.RuntimeException: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;cloudSqlDataSourceProperties&#39; defined in class path resource [org/springframework/cloud/gcp/autoconfigure/sql/GcpCloudSqlAutoConfiguration$CloudSqlDataSourcePropertiesConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.boot.autoconfigure.jdbc.DataSourceProperties]: Factory method &#39;cloudSqlDataSourceProperties&#39; threw exception; nested exception is java.lang.IllegalStateException: Unable to set ApplicationName - SQLAdmin client already initialized.\r\nat org.eclipse.jetty.annotations.ServletContainerInitializersStarter.doStart (ServletContainerInitializersStarter.java:68)\r\nat org.eclipse.jetty.util.component.AbstractLifeCycle.start (AbstractLifeCycle.java:68)\r\nat org.eclipse.jetty.servlet.ServletContextHandler.startContext (ServletContextHandler.java:330)\r\nat org.eclipse.jetty.webapp.WebAppContext.startWebapp (WebAppContext.java:1406)\r\nat com.google.apphosting.runtime.jetty9.AppEngineWebAppContext.startWebapp (AppEngineWebAppContext.java:175)\r\nat org.eclipse.jetty.webapp.WebAppContext.startContext (WebAppContext.java:1368)\r\nat org.eclipse.jetty.server.handler.ContextHandler.doStart (ContextHandler.java:778)\r\nat org.eclipse.jetty.servlet.ServletContextHandler.doStart (ServletContextHandler.java:262)\r\nat org.eclipse.jetty.webapp.WebAppContext.doStart (WebAppContext.java:522)\r\nat com.google.apphosting.runtime.jetty9.AppEngineWebAppContext.doStart (AppEngineWebAppContext.java:120)\r\nat org.eclipse.jetty.util.component.AbstractLifeCycle.start (AbstractLifeCycle.java:68)\r\nat com.google.apphosting.runtime.jetty9.AppVersionHandlerMap.createHandler (AppVersionHandlerMap.java:240)\r\nat com.google.apphosting.runtime.jetty9.AppVersionHandlerMap.getHandler (AppVersionHandlerMap.java:178)\r\nat com.google.apphosting.runtime.jetty9.JettyServletEngineAdapter.serviceRequest (JettyServletEngineAdapter.java:120)\r\nat com.google.apphosting.runtime.JavaRuntime$RequestRunnable.dispatchServletRequest (JavaRuntime.java:728)\r\nat com.google.apphosting.runtime.JavaRuntime$RequestRunnable.dispatchRequest (JavaRuntime.java:691)\r\nat com.google.apphosting.runtime.JavaRuntime$RequestRunnable.run (JavaRuntime.java:661)\r\nat com.google.apphosting.runtime.JavaRuntime$NullSandboxRequestRunnable.run (JavaRuntime.java:853)\r\nat com.google.apphosting.runtime.ThreadGroupPool$PoolEntry.run (ThreadGroupPool.java:270)\r\nat java.lang.Thread.run (Thread.java:748)\r\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;cloudSqlDataSourceProperties&#39; defined in class path resource [org/springframework/cloud/gcp/autoconfigure/sql/GcpCloudSqlAutoConfiguration$CloudSqlDataSourcePropertiesConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.boot.autoconfigure.jdbc.DataSourceProperties]: Factory method &#39;cloudSqlDataSourceProperties&#39; threw exception; nested exception is java.lang.IllegalStateException: Unable to set ApplicationName - SQLAdmin client already initialized.\r\nat org.springframework.beans.factory.support.ConstructorResolver.instantiate (ConstructorResolver.java:627)\r\nat org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod (ConstructorResolver.java:607)\r\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod (AbstractAutowireCapableBeanFactory.java:1305)\r\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance (AbstractAutowireCapableBeanFactory.java:1144)\r\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean (AbstractAutowireCapableBeanFactory.java:555)\r\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean (AbstractAutowireCapableBeanFactory.java:515)\r\nat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0 (AbstractBeanFactory.java:320)\r\nat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton (DefaultSingletonBeanRegistry.java:222)\r\nat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean (AbstractBeanFactory.java:318)\r\nat org.springframework.beans.factory.support.AbstractBeanFactory.getBean (AbstractBeanFactory.java:199)\r\nat org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons (DefaultListableBeanFactory.java:849)\r\nat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization (AbstractApplicationContext.java:877)\r\nat org.springframework.context.support.AbstractApplicationContext.refresh (AbstractApplicationContext.java:549)\r\nat org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh (ServletWebServerApplicationContext.java:142)\r\nat org.springframework.boot.SpringApplication.refresh (SpringApplication.java:775)\r\nat org.springframework.boot.SpringApplication.refreshContext (SpringApplication.java:397)\r\nat org.springframework.boot.SpringApplication.run (SpringApplication.java:316)\r\nat org.springframework.boot.web.servlet.support.SpringBootServletInitializer.run (SpringBootServletInitializer.java:157)\r\nat org.springframework.boot.web.servlet.support.SpringBootServletInitializer.createRootApplicationContext (SpringBootServletInitializer.java:137)\r\nat org.springframework.boot.web.servlet.support.SpringBootServletInitializer.onStartup (SpringBootServletInitializer.java:91)\r\nat org.springframework.web.SpringServletContainerInitializer.onStartup (SpringServletContainerInitializer.java:171)\r\nat org.eclipse.jetty.plus.annotation.ContainerInitializer.callStartup (ContainerInitializer.java:140)\r\nat org.eclipse.jetty.annotations.ServletContainerInitializersStarter.doStart (ServletContainerInitializersStarter.java:63)\r\nCaused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.boot.autoconfigure.jdbc.DataSourceProperties]: Factory method &#39;cloudSqlDataSourceProperties&#39; threw exception; nested exception is java.lang.IllegalStateException: Unable to set ApplicationName - SQLAdmin client already initialized.\r\nat org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate (SimpleInstantiationStrategy.java:185)\r\nat org.springframework.beans.factory.support.ConstructorResolver.instantiate (ConstructorResolver.java:622)\r\nCaused by: java.lang.IllegalStateException: Unable to set ApplicationName - SQLAdmin client already initialized.\r\nat com.google.cloud.sql.core.CoreSocketFactory.setApplicationName (CoreSocketFactory.java:341)\r\nat org.springframework.cloud.gcp.autoconfigure.sql.GcpCloudSqlAutoConfiguration$CloudSqlDataSourcePropertiesConfiguration.cloudSqlDataSourceProperties (GcpCloudSqlAutoConfiguration.java:209)\r\nat org.springframework.cloud.gcp.autoconfigure.sql.GcpCloudSqlAutoConfiguration$CloudSqlDataSourcePropertiesConfiguration$$EnhancerBySpringCGLIB$$bb6c42e.CGLIB$cloudSqlDataSourceProperties$0 (&lt;generated&gt;)\r\nat org.springframework.cloud.gcp.autoconfigure.sql.GcpCloudSqlAutoConfiguration$CloudSqlDataSourcePropertiesConfiguration$$EnhancerBySpringCGLIB$$bb6c42e$$FastClassBySpringCGLIB$$a426c72d.invoke (&lt;generated&gt;)\r\nat org.springframework.cglib.proxy.MethodProxy.invokeSuper (MethodProxy.java:244)\r\nat org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept (ConfigurationClassEnhancer.java:363)\r\nat org.springframework.cloud.gcp.autoconfigure.sql.GcpCloudSqlAutoConfiguration$CloudSqlDataSourcePropertiesConfiguration$$EnhancerBySpringCGLIB$$bb6c42e.cloudSqlDataSourceProperties (&lt;generated&gt;)\r\nat sun.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\r\nat sun.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:62)\r\nat sun.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\r\nat java.lang.reflect.Method.invoke (Method.java:498)\r\nat org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate (SimpleInstantiationStrategy.java:154)\r\n\r\n\r\n```\r\n\r\nSo it is caused by \r\n```\r\nUnable to set ApplicationName - SQLAdmin client already initialized.\r\n```\r\n\r\nmy build.gradle looks like this \r\n\r\n````\r\nbuildscript {    // Configuration for building\r\n\trepositories {\r\n\t\tjcenter()\r\n\t\tmavenCentral()\r\n\t}\r\n\tdependencies {\r\n\t\tclasspath &#39;com.google.cloud.tools:appengine-gradle-plugin:1.+&#39;    // Latest 1.x.x releas\r\n\t}\r\n}\r\n\r\nplugins {\r\n\tid &#39;org.springframework.boot&#39; version &#39;2.1.3.RELEASE&#39;\r\n\tid &#39;java&#39;\r\n}\r\n\r\napply plugin: &#39;io.spring.dependency-management&#39;\r\napply plugin: &#39;java&#39;                              // standard Java tasks\r\napply plugin: &#39;war&#39;                               // standard Web Archive plugin\r\napply plugin: &#39;com.google.cloud.tools.appengine&#39;  // App Engine tasks\r\n\r\ngroup = &#39;de.msm&#39;\r\nversion = &#39;0.0.1-SNAPSHOT&#39;\r\nsourceCompatibility = &#39;1.8&#39;\r\ntargetCompatibility = 1.8     // App Engine Flexible uses Java 8\r\n\r\n\r\nconfigurations {\r\n\tprovidedRuntime\r\n\tcompileOnly {\r\n\t\textendsFrom annotationProcessor\r\n\t}\r\n\tdevelopmentOnly\r\n\truntimeClasspath {\r\n\t\textendsFrom developmentOnly\r\n\t}\r\n}\r\n\r\n\r\n\r\nappengine {  // App Engine tasks configuration\r\n\tdeploy {   // deploy configuration\r\n\t\tstopPreviousVersion = true  // default - stop the current version\r\n\t\tpromote = true              // default - &amp; make this the current version\r\n\t}\r\n}\r\n/*\r\nOnly for Run\r\nconfigurations.all {\r\n\texclude group: &#39;org.slf4j&#39;, module: &#39;slf4j-log4j12&#39;\r\n\texclude group: &#39;org.springframework.boot&#39;, module: &#39;spring-boot-starter-tomcat&#39;\r\n}*/\r\n\r\nrepositories {\r\n\tmavenCentral()\r\n\tjcenter()\r\n\tjcenter{\r\n\t\turl &#39;http://oss.jfrog.org/artifactory/oss-snapshot-local&#39;\r\n\t}\r\n}\r\n\r\ntask getHomeDir { //To get actual homeDir\r\n    doLast {\r\n        println gradle.gradleHomeDir\r\n    }\r\n}\r\n\r\ndependencies {\r\n\tcompile(&#39;org.springframework.boot:spring-boot-starter-web&#39;) {\r\n\t\texclude group: &#39;org.springframework.boot&#39;, module: &#39;spring-boot-starter-tomcat&#39;\r\n\t}\r\n\tcompile(&#39;org.springframework.boot:spring-boot-starter-jetty&#39;)\r\n\tcompile group: &#39;org.springframework.boot&#39;, name: &#39;spring-boot-devtools&#39;, version: &#39;2.1.6.RELEASE&#39;\r\n\timplementation &#39;org.springframework.boot:spring-boot-starter-data-jpa&#39;\r\n\timplementation &#39;org.springframework.boot:spring-boot-starter-security&#39;\r\n\timplementation &#39;org.springframework.boot:spring-boot-starter-thymeleaf&#39;\r\n\tcompileOnly &#39;org.projectlombok:lombok&#39;\r\n\tannotationProcessor &#39;org.projectlombok:lombok&#39;\r\n\ttestImplementation &#39;org.springframework.boot:spring-boot-starter-test&#39;\r\n\ttestImplementation &#39;org.springframework.security:spring-security-test&#39;\r\n\timplementation &#39;com.github.javafaker:javafaker:0.17.2&#39;\r\n\tcompile group: &#39;org.bouncycastle&#39;, name: &#39;bcprov-jdk15on&#39;, version: &#39;1.56&#39;\r\n\tcompile group: &#39;org.springframework.boot&#39;, name: &#39;spring-boot-configuration-processor&#39;, version: &#39;2.1.4.RELEASE&#39;\r\n\tcompile &#39;org.springframework.boot:spring-boot-starter-mail:2.1.5.RELEASE&#39;\r\n\tcompile &#39;org.springframework:spring-context-support:5.1.7.RELEASE&#39;\r\n\ttestCompile &#39;io.rest-assured:rest-assured:4.0.0&#39;\r\n\tcompile &#39;io.rest-assured:xml-path:4.0.0&#39;\r\n\tcompile &#39;io.rest-assured:json-path:4.0.0&#39;\r\n\ttestCompile &#39;io.rest-assured:json-schema-validator:4.0.0&#39;\r\n\tcompile group: &#39;joda-time&#39;, name: &#39;joda-time&#39;, version: &#39;2.10.3&#39;\r\n\ttestCompile group: &#39;org.junit.jupiter&#39;, name: &#39;junit-jupiter-api&#39;, version: &#39;5.5.1&#39;\r\n\ttestCompile group: &#39;org.mockito&#39;, name: &#39;mockito-all&#39;, version: &#39;2.0.2-beta&#39;\r\n\tcompile group: &#39;org.xhtmlrenderer&#39;, name: &#39;flying-saucer-pdf&#39;, version: &#39;9.1.18&#39;\r\n\tcompile &quot;org.apache.pdfbox:pdfbox-tools:2.0.3&quot;\r\n\tcompile &quot;com.itextpdf:itextpdf:5.5.10&quot;\r\n\tcompile &quot;com.itextpdf.tool:xmlworker:5.5.10&quot;\r\n\tcompile &quot;org.apache.poi:poi-ooxml:3.15&quot;\r\n\tcompile &quot;org.apache.poi:poi-scratchpad:3.15&quot;\r\n\tcompile &quot;xerces:xercesImpl:2.8.0&quot;\r\n\tcompile &quot;org.slf4j:slf4j-nop:1.8.0-beta4&quot;\r\n\tcompile group: &#39;commons-io&#39;, name: &#39;commons-io&#39;, version: &#39;2.5&#39;\r\n\tcompile group: &#39;com.google.cloud&#39;, name: &#39;google-cloud-storage&#39;, version: &#39;1.91.0&#39;\r\n\tcompile group: &#39;org.postgresql&#39;, name: &#39;postgresql&#39;, version: &#39;42.1.4&#39;\r\n\tcompile group: &#39;org.springframework.cloud&#39;, name: &#39;spring-cloud-gcp-starter-sql-postgresql&#39;, version: &#39;1.1.3.RELEASE&#39;\r\n\tcompile &#39;com.google.appengine:appengine-api-1.0-sdk:+&#39;\r\n\tcompile group: &#39;commons-io&#39;, name: &#39;commons-io&#39;, version: &#39;2.6&#39;\r\n\r\n}\r\n```\r\n\r\nI dont understand whats the problem..","title":"Problem with Google Cloud App Engine and Spring Boot gradle Deploying","body":"<p>I have a problem..\nI want to deploy my Spring Boot Gradle app to GC App Engine.\nI use the command :</p>\n\n<p><strong>gradle appengineDeploy</strong></p>\n\n<p>It actually works but when i try to open the app in the browser it says :</p>\n\n<pre><code>Error: Server Error\nThe server encountered an error and could not complete your request.\nPlease try again in 30 seconds.\n</code></pre>\n\n<p>So the app was deployed successfully but it has a problem to start..</p>\n\n<pre><code>java.lang.RuntimeException: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'cloudSqlDataSourceProperties' defined in class path resource [org/springframework/cloud/gcp/autoconfigure/sql/GcpCloudSqlAutoConfiguration$CloudSqlDataSourcePropertiesConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.boot.autoconfigure.jdbc.DataSourceProperties]: Factory method 'cloudSqlDataSourceProperties' threw exception; nested exception is java.lang.IllegalStateException: Unable to set ApplicationName - SQLAdmin client already initialized.\nat org.eclipse.jetty.annotations.ServletContainerInitializersStarter.doStart (ServletContainerInitializersStarter.java:68)\nat org.eclipse.jetty.util.component.AbstractLifeCycle.start (AbstractLifeCycle.java:68)\nat org.eclipse.jetty.servlet.ServletContextHandler.startContext (ServletContextHandler.java:330)\nat org.eclipse.jetty.webapp.WebAppContext.startWebapp (WebAppContext.java:1406)\nat com.google.apphosting.runtime.jetty9.AppEngineWebAppContext.startWebapp (AppEngineWebAppContext.java:175)\nat org.eclipse.jetty.webapp.WebAppContext.startContext (WebAppContext.java:1368)\nat org.eclipse.jetty.server.handler.ContextHandler.doStart (ContextHandler.java:778)\nat org.eclipse.jetty.servlet.ServletContextHandler.doStart (ServletContextHandler.java:262)\nat org.eclipse.jetty.webapp.WebAppContext.doStart (WebAppContext.java:522)\nat com.google.apphosting.runtime.jetty9.AppEngineWebAppContext.doStart (AppEngineWebAppContext.java:120)\nat org.eclipse.jetty.util.component.AbstractLifeCycle.start (AbstractLifeCycle.java:68)\nat com.google.apphosting.runtime.jetty9.AppVersionHandlerMap.createHandler (AppVersionHandlerMap.java:240)\nat com.google.apphosting.runtime.jetty9.AppVersionHandlerMap.getHandler (AppVersionHandlerMap.java:178)\nat com.google.apphosting.runtime.jetty9.JettyServletEngineAdapter.serviceRequest (JettyServletEngineAdapter.java:120)\nat com.google.apphosting.runtime.JavaRuntime$RequestRunnable.dispatchServletRequest (JavaRuntime.java:728)\nat com.google.apphosting.runtime.JavaRuntime$RequestRunnable.dispatchRequest (JavaRuntime.java:691)\nat com.google.apphosting.runtime.JavaRuntime$RequestRunnable.run (JavaRuntime.java:661)\nat com.google.apphosting.runtime.JavaRuntime$NullSandboxRequestRunnable.run (JavaRuntime.java:853)\nat com.google.apphosting.runtime.ThreadGroupPool$PoolEntry.run (ThreadGroupPool.java:270)\nat java.lang.Thread.run (Thread.java:748)\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'cloudSqlDataSourceProperties' defined in class path resource [org/springframework/cloud/gcp/autoconfigure/sql/GcpCloudSqlAutoConfiguration$CloudSqlDataSourcePropertiesConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.boot.autoconfigure.jdbc.DataSourceProperties]: Factory method 'cloudSqlDataSourceProperties' threw exception; nested exception is java.lang.IllegalStateException: Unable to set ApplicationName - SQLAdmin client already initialized.\nat org.springframework.beans.factory.support.ConstructorResolver.instantiate (ConstructorResolver.java:627)\nat org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod (ConstructorResolver.java:607)\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod (AbstractAutowireCapableBeanFactory.java:1305)\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance (AbstractAutowireCapableBeanFactory.java:1144)\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean (AbstractAutowireCapableBeanFactory.java:555)\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean (AbstractAutowireCapableBeanFactory.java:515)\nat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0 (AbstractBeanFactory.java:320)\nat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton (DefaultSingletonBeanRegistry.java:222)\nat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean (AbstractBeanFactory.java:318)\nat org.springframework.beans.factory.support.AbstractBeanFactory.getBean (AbstractBeanFactory.java:199)\nat org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons (DefaultListableBeanFactory.java:849)\nat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization (AbstractApplicationContext.java:877)\nat org.springframework.context.support.AbstractApplicationContext.refresh (AbstractApplicationContext.java:549)\nat org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh (ServletWebServerApplicationContext.java:142)\nat org.springframework.boot.SpringApplication.refresh (SpringApplication.java:775)\nat org.springframework.boot.SpringApplication.refreshContext (SpringApplication.java:397)\nat org.springframework.boot.SpringApplication.run (SpringApplication.java:316)\nat org.springframework.boot.web.servlet.support.SpringBootServletInitializer.run (SpringBootServletInitializer.java:157)\nat org.springframework.boot.web.servlet.support.SpringBootServletInitializer.createRootApplicationContext (SpringBootServletInitializer.java:137)\nat org.springframework.boot.web.servlet.support.SpringBootServletInitializer.onStartup (SpringBootServletInitializer.java:91)\nat org.springframework.web.SpringServletContainerInitializer.onStartup (SpringServletContainerInitializer.java:171)\nat org.eclipse.jetty.plus.annotation.ContainerInitializer.callStartup (ContainerInitializer.java:140)\nat org.eclipse.jetty.annotations.ServletContainerInitializersStarter.doStart (ServletContainerInitializersStarter.java:63)\nCaused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.boot.autoconfigure.jdbc.DataSourceProperties]: Factory method 'cloudSqlDataSourceProperties' threw exception; nested exception is java.lang.IllegalStateException: Unable to set ApplicationName - SQLAdmin client already initialized.\nat org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate (SimpleInstantiationStrategy.java:185)\nat org.springframework.beans.factory.support.ConstructorResolver.instantiate (ConstructorResolver.java:622)\nCaused by: java.lang.IllegalStateException: Unable to set ApplicationName - SQLAdmin client already initialized.\nat com.google.cloud.sql.core.CoreSocketFactory.setApplicationName (CoreSocketFactory.java:341)\nat org.springframework.cloud.gcp.autoconfigure.sql.GcpCloudSqlAutoConfiguration$CloudSqlDataSourcePropertiesConfiguration.cloudSqlDataSourceProperties (GcpCloudSqlAutoConfiguration.java:209)\nat org.springframework.cloud.gcp.autoconfigure.sql.GcpCloudSqlAutoConfiguration$CloudSqlDataSourcePropertiesConfiguration$$EnhancerBySpringCGLIB$$bb6c42e.CGLIB$cloudSqlDataSourceProperties$0 (&lt;generated&gt;)\nat org.springframework.cloud.gcp.autoconfigure.sql.GcpCloudSqlAutoConfiguration$CloudSqlDataSourcePropertiesConfiguration$$EnhancerBySpringCGLIB$$bb6c42e$$FastClassBySpringCGLIB$$a426c72d.invoke (&lt;generated&gt;)\nat org.springframework.cglib.proxy.MethodProxy.invokeSuper (MethodProxy.java:244)\nat org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept (ConfigurationClassEnhancer.java:363)\nat org.springframework.cloud.gcp.autoconfigure.sql.GcpCloudSqlAutoConfiguration$CloudSqlDataSourcePropertiesConfiguration$$EnhancerBySpringCGLIB$$bb6c42e.cloudSqlDataSourceProperties (&lt;generated&gt;)\nat sun.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\nat sun.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:62)\nat sun.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\nat java.lang.reflect.Method.invoke (Method.java:498)\nat org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate (SimpleInstantiationStrategy.java:154)\n\n\n</code></pre>\n\n<p>So it is caused by </p>\n\n<pre><code>Unable to set ApplicationName - SQLAdmin client already initialized.\n</code></pre>\n\n<p>my build.gradle looks like this </p>\n\n<pre><code>buildscript {    // Configuration for building\n    repositories {\n        jcenter()\n        mavenCentral()\n    }\n    dependencies {\n        classpath 'com.google.cloud.tools:appengine-gradle-plugin:1.+'    // Latest 1.x.x releas\n    }\n}\n\nplugins {\n    id 'org.springframework.boot' version '2.1.3.RELEASE'\n    id 'java'\n}\n\napply plugin: 'io.spring.dependency-management'\napply plugin: 'java'                              // standard Java tasks\napply plugin: 'war'                               // standard Web Archive plugin\napply plugin: 'com.google.cloud.tools.appengine'  // App Engine tasks\n\ngroup = 'de.msm'\nversion = '0.0.1-SNAPSHOT'\nsourceCompatibility = '1.8'\ntargetCompatibility = 1.8     // App Engine Flexible uses Java 8\n\n\nconfigurations {\n    providedRuntime\n    compileOnly {\n        extendsFrom annotationProcessor\n    }\n    developmentOnly\n    runtimeClasspath {\n        extendsFrom developmentOnly\n    }\n}\n\n\n\nappengine {  // App Engine tasks configuration\n    deploy {   // deploy configuration\n        stopPreviousVersion = true  // default - stop the current version\n        promote = true              // default - &amp; make this the current version\n    }\n}\n/*\nOnly for Run\nconfigurations.all {\n    exclude group: 'org.slf4j', module: 'slf4j-log4j12'\n    exclude group: 'org.springframework.boot', module: 'spring-boot-starter-tomcat'\n}*/\n\nrepositories {\n    mavenCentral()\n    jcenter()\n    jcenter{\n        url 'http://oss.jfrog.org/artifactory/oss-snapshot-local'\n    }\n}\n\ntask getHomeDir { //To get actual homeDir\n    doLast {\n        println gradle.gradleHomeDir\n    }\n}\n\ndependencies {\n    compile('org.springframework.boot:spring-boot-starter-web') {\n        exclude group: 'org.springframework.boot', module: 'spring-boot-starter-tomcat'\n    }\n    compile('org.springframework.boot:spring-boot-starter-jetty')\n    compile group: 'org.springframework.boot', name: 'spring-boot-devtools', version: '2.1.6.RELEASE'\n    implementation 'org.springframework.boot:spring-boot-starter-data-jpa'\n    implementation 'org.springframework.boot:spring-boot-starter-security'\n    implementation 'org.springframework.boot:spring-boot-starter-thymeleaf'\n    compileOnly 'org.projectlombok:lombok'\n    annotationProcessor 'org.projectlombok:lombok'\n    testImplementation 'org.springframework.boot:spring-boot-starter-test'\n    testImplementation 'org.springframework.security:spring-security-test'\n    implementation 'com.github.javafaker:javafaker:0.17.2'\n    compile group: 'org.bouncycastle', name: 'bcprov-jdk15on', version: '1.56'\n    compile group: 'org.springframework.boot', name: 'spring-boot-configuration-processor', version: '2.1.4.RELEASE'\n    compile 'org.springframework.boot:spring-boot-starter-mail:2.1.5.RELEASE'\n    compile 'org.springframework:spring-context-support:5.1.7.RELEASE'\n    testCompile 'io.rest-assured:rest-assured:4.0.0'\n    compile 'io.rest-assured:xml-path:4.0.0'\n    compile 'io.rest-assured:json-path:4.0.0'\n    testCompile 'io.rest-assured:json-schema-validator:4.0.0'\n    compile group: 'joda-time', name: 'joda-time', version: '2.10.3'\n    testCompile group: 'org.junit.jupiter', name: 'junit-jupiter-api', version: '5.5.1'\n    testCompile group: 'org.mockito', name: 'mockito-all', version: '2.0.2-beta'\n    compile group: 'org.xhtmlrenderer', name: 'flying-saucer-pdf', version: '9.1.18'\n    compile \"org.apache.pdfbox:pdfbox-tools:2.0.3\"\n    compile \"com.itextpdf:itextpdf:5.5.10\"\n    compile \"com.itextpdf.tool:xmlworker:5.5.10\"\n    compile \"org.apache.poi:poi-ooxml:3.15\"\n    compile \"org.apache.poi:poi-scratchpad:3.15\"\n    compile \"xerces:xercesImpl:2.8.0\"\n    compile \"org.slf4j:slf4j-nop:1.8.0-beta4\"\n    compile group: 'commons-io', name: 'commons-io', version: '2.5'\n    compile group: 'com.google.cloud', name: 'google-cloud-storage', version: '1.91.0'\n    compile group: 'org.postgresql', name: 'postgresql', version: '42.1.4'\n    compile group: 'org.springframework.cloud', name: 'spring-cloud-gcp-starter-sql-postgresql', version: '1.1.3.RELEASE'\n    compile 'com.google.appengine:appengine-api-1.0-sdk:+'\n    compile group: 'commons-io', name: 'commons-io', version: '2.6'\n\n}\n```\n\nI dont understand whats the problem..\n</code></pre>\n"},{"tags":["java","sorting","swingworker"],"comments":[{"owner":{"account_id":29509880,"reputation":1,"user_id":22615172,"display_name":"povertyStrickenCoder"},"score":0,"creation_date":1695393291,"post_id":77158551,"comment_id":136022703,"body_markdown":"Apologies, I forgot to note that my main class is calling SwingUtilities.invokeLater","body":"Apologies, I forgot to note that my main class is calling SwingUtilities.invokeLater"},{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":0,"creation_date":1695393369,"post_id":77158551,"comment_id":136022722,"body_markdown":"&quot;*Before using SwingWorker I was trying to do it using a Timer instead but that was not doing it step-by-step*&quot; -- why not? This would likely be much simpler and easier to implement than a SwingWorker?","body":"&quot;<i>Before using SwingWorker I was trying to do it using a Timer instead but that was not doing it step-by-step</i>&quot; -- why not? This would likely be much simpler and easier to implement than a SwingWorker?"},{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":0,"creation_date":1695393503,"post_id":77158551,"comment_id":136022751,"body_markdown":"And your code is incomplete as you don&#39;t show any of the sorting code, nor how you are trying to publish/process the data to the GUI. Please fix.  You have two options, if you&#39;re set on using a SwingWorker, and these are to use the publish/process method pair for sending information back to the GUI, or using &quot;bound&quot; properties and adding a PropertChangeListener to the worker.","body":"And your code is incomplete as you don&#39;t show any of the sorting code, nor how you are trying to publish/process the data to the GUI. Please fix.  You have two options, if you&#39;re set on using a SwingWorker, and these are to use the publish/process method pair for sending information back to the GUI, or using &quot;bound&quot; properties and adding a PropertChangeListener to the worker."},{"owner":{"account_id":318670,"reputation":15681,"user_id":636009,"display_name":"David Conrad"},"score":0,"creation_date":1695393884,"post_id":77158551,"comment_id":136022825,"body_markdown":"Based on the code you&#39;ve shown it looks like you&#39;re going to do the entire sort in a single call in the background. But if you want to show the sorting, you&#39;ll need to be able to perform a single step of the sort at a time and show the results, which means you&#39;re going to need to modify your sort code to make that possible.","body":"Based on the code you&#39;ve shown it looks like you&#39;re going to do the entire sort in a single call in the background. But if you want to show the sorting, you&#39;ll need to be able to perform a single step of the sort at a time and show the results, which means you&#39;re going to need to modify your sort code to make that possible."},{"owner":{"account_id":29509880,"reputation":1,"user_id":22615172,"display_name":"povertyStrickenCoder"},"score":0,"creation_date":1695394624,"post_id":77158551,"comment_id":136022985,"body_markdown":"Apologies, I did not want to clutter it too much. Let me add that additional code.\n\nI tried to do it with a timer but after hitting start there was a delay and then it was all sorted, so it was not doing it step-by-step. I did some research but could not figure it out with the timer so I switched to SwingWorker","body":"Apologies, I did not want to clutter it too much. Let me add that additional code.  I tried to do it with a timer but after hitting start there was a delay and then it was all sorted, so it was not doing it step-by-step. I did some research but could not figure it out with the timer so I switched to SwingWorker"},{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":0,"creation_date":1695394765,"post_id":77158551,"comment_id":136023017,"body_markdown":"Read MadProgrammer&#39;s answer [here](https://stackoverflow.com/a/15756352/). No, better yet, *study* it as it goes into great detail on how to do step-wise sorting of all types using Java, separating the model from the view, and visualizing all using a SwingWorker. That answer is a work of art, really.","body":"Read MadProgrammer&#39;s answer <a href=\"https://stackoverflow.com/a/15756352/\">here</a>. No, better yet, <i>study</i> it as it goes into great detail on how to do step-wise sorting of all types using Java, separating the model from the view, and visualizing all using a SwingWorker. That answer is a work of art, really."},{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":0,"creation_date":1695394818,"post_id":77158551,"comment_id":136023035,"body_markdown":"Yeah, you need to first and foremost *remove the loops* in the sorting code, and use a Swing Timer in place of the loops.","body":"Yeah, you need to first and foremost <i>remove the loops</i> in the sorting code, and use a Swing Timer in place of the loops."},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":0,"creation_date":1695394902,"post_id":77158551,"comment_id":136023061,"body_markdown":"*so I switched to SwingWorker* - which I find is the easier approach., since you don&#39;t need to modify the basic sorting algorithm See: https://stackoverflow.com/questions/64196198/bubble-sort-animation for two working examples. One using a SwingWorker and one using a Timer.","body":"<i>so I switched to SwingWorker</i> - which I find is the easier approach., since you don&#39;t need to modify the basic sorting algorithm See: <a href=\"https://stackoverflow.com/questions/64196198/bubble-sort-animation\" title=\"bubble sort animation\">stackoverflow.com/questions/64196198/bubble-sort-animation</a> for two working examples. One using a SwingWorker and one using a Timer."},{"owner":{"account_id":29509880,"reputation":1,"user_id":22615172,"display_name":"povertyStrickenCoder"},"score":0,"creation_date":1695395359,"post_id":77158551,"comment_id":136023172,"body_markdown":"https://stackoverflow.com/questions/59247093/how-to-properly-use-swing-timer-in-visualizing-sorting-algorithm\n\nIs this what you are referring to for removing the for loops and implementing using Swing Timer?","body":"<a href=\"https://stackoverflow.com/questions/59247093/how-to-properly-use-swing-timer-in-visualizing-sorting-algorithm\" title=\"how to properly use swing timer in visualizing sorting algorithm\">stackoverflow.com/questions/59247093/&hellip;</a>  Is this what you are referring to for removing the for loops and implementing using Swing Timer?"},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":0,"creation_date":1695411821,"post_id":77158551,"comment_id":136026008,"body_markdown":"*removing the for loops and implementing using Swing Timer?* - not sure why you are worrying about that code since your question is about using a SwingWorker to do a bubble sort.","body":"<i>removing the for loops and implementing using Swing Timer?</i> - not sure why you are worrying about that code since your question is about using a SwingWorker to do a bubble sort."},{"owner":{"account_id":29509880,"reputation":1,"user_id":22615172,"display_name":"povertyStrickenCoder"},"score":0,"creation_date":1695744768,"post_id":77158551,"comment_id":136064256,"body_markdown":"*not sure why you are worrying about that code since your question is about using a SwingWorker to do a bubble sort* - that comment was meant for Hovercraft Full Of Eels. However, I was able to get it working using Swing Timer in place of the for loops - which also meant I had to do what David Conrad suggested and break it down into single steps","body":"<i>not sure why you are worrying about that code since your question is about using a SwingWorker to do a bubble sort</i> - that comment was meant for Hovercraft Full Of Eels. However, I was able to get it working using Swing Timer in place of the for loops - which also meant I had to do what David Conrad suggested and break it down into single steps"}],"owner":{"account_id":29509880,"reputation":1,"user_id":22615172,"display_name":"povertyStrickenCoder"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":46,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1695393631,"answer_count":0,"score":0,"last_activity_date":1695759650,"creation_date":1695393224,"question_id":77158551,"body_markdown":"I am trying to create a Java Sorting Visualizer using SwingWorker to run the sorting algorithm step by step in a separate thread, and publish intermediate states to update the UI (I am going to say using the Event Dispatch Thread) but I am having trouble understanding how to use SwingWorker for this. Below is my code:\r\n```\r\n\r\n    package visualizer;\r\n    \r\n    import visualizer.ui.SortingLogic;\r\n    import visualizer.ui.SortingWindow;\r\n    \r\n    import javax.swing.*;\r\n    import java.util.Arrays;\r\n    \r\n    public class Main {\r\n        public static void main(String[] args) {\r\n            SwingUtilities.invokeLater(() -&gt; {\r\n               new SortingWindow();\r\n    \r\n            });\r\n    \r\n    \r\n            //System.out.println(&quot;Hello world!&quot;);\r\n        }\r\n    }\r\n    package visualizer.ui;\r\n    \r\n    import javax.swing.*;\r\n    import java.awt.*;\r\n    import java.awt.event.ActionEvent;\r\n    import java.awt.event.ActionListener;\r\n    import java.util.Arrays;\r\n    \r\n    public class SortingWindow {\r\n        int [] arrayToSort;\r\n        SortingVisualizer visualizer;\r\n        SortingLogic sortingLogic;\r\n        JButton startButton, stopButton, resetButton;\r\n    \r\n        public SortingWindow(){\r\n            //System.out.println(&quot;SortingWindow is being called&quot;);\r\n            initiliaze();\r\n        }\r\n        private void initiliaze() {\r\n            JFrame frame = new JFrame();\r\n            frame.setTitle(&quot;Sorting Visualizer&quot;);\r\n            frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);\r\n            frame.setSize(1000, 800);\r\n            frame.setLocationRelativeTo(null);\r\n            frame.setResizable(true);\r\n    \r\n            JPanel panelBottom = new JPanel();\r\n            panelBottom.setLayout(new FlowLayout(FlowLayout.CENTER, 10, 5));\r\n            frame.add(panelBottom, BorderLayout.PAGE_END);\r\n            panelBottom.setBackground(Color.ORANGE);\r\n            //Creates Panel that holds Start and Reset Buttons\r\n    \r\n            /*JPanel panelTop = new JPanel();\r\n            panelTop.setLayout(new FlowLayout(FlowLayout.CENTER, 10, 5));\r\n            frame.add(panelTop, BorderLayout.PAGE_START);\r\n            panelTop.setBackground(Color.blue);\r\n            //Creates top Panel that holds currently sorting*/\r\n    \r\n            String [] sortOptions = {&quot;Bubble Sort&quot;, &quot;Selection Sort&quot;, &quot;Insertion Sort&quot;,\r\n                    &quot;Merge Sort&quot;, &quot;Quick Sort&quot;, &quot;Heap Sort&quot;, &quot;Counting Sort&quot;, &quot;Radix Sort&quot;,\r\n                    &quot;Bucket Sort&quot;, &quot;Shell Sort&quot;};\r\n            JComboBox sortingOptionsDropdown = new JComboBox(sortOptions);\r\n            panelBottom.add(sortingOptionsDropdown);\r\n            //Adds the drop-down menu to the bottom panel\r\n            /*https://docs.oracle.com/javase/tutorial/uiswing/components/combobox.html*/\r\n    \r\n            startButton = new JButton(&quot;Start&quot;);\r\n            stopButton = new JButton(&quot;Stop&quot;);\r\n            resetButton = new JButton(&quot;Reset&quot;);\r\n            panelBottom.add(startButton);\r\n            panelBottom.add(stopButton);\r\n            panelBottom.add(resetButton);\r\n            //Adds buttons for starting and stopping to JPanel\r\n    \r\n            stopButton.setEnabled(false);\r\n            resetButton.setEnabled(false);\r\n    \r\n            /*JLabel currentlySorting = new JLabel(&quot;Currently Sorting&quot;);\r\n            panelTop.add(currentlySorting);\r\n            currentlySorting.setText(&quot;Currently Sorting: &quot; + sortingOptionsDropdown.getSelectedItem()\r\n                    + &quot; \\tTime Elapsed: &quot;);\r\n            currentlySorting.setForeground(Color.gray);\r\n            currentlySorting.setLayout(new FlowLayout(FlowLayout.LEFT, 10, 5));\r\n            //Adds labels for Currently sorting to the top label*/\r\n    \r\n    \r\n    \r\n            sortingLogic = new SortingLogic();\r\n            arrayToSort = sortingLogic.generateRandomIntArray(5, 1000, 30);\r\n            visualizer = new SortingVisualizer(arrayToSort);\r\n            sortingLogic.setArrayToSort(arrayToSort);\r\n            sortingLogic.setVisualizer(visualizer);\r\n    \r\n            System.out.println(Arrays.toString(arrayToSort));\r\n            //initializes a random array\r\n    \r\n            frame.getContentPane().add(visualizer);\r\n            startButton.addActionListener(new ActionListener() {\r\n                @Override\r\n                public void actionPerformed(ActionEvent e) {\r\n                    String selectedAlgorithm = (String) sortingOptionsDropdown.getSelectedItem();\r\n                    if (selectedAlgorithm != null){\r\n                        if (!sortingLogic.isSorted(arrayToSort)) {\r\n                            sortingLogic.setSortingAlgorithm(selectedAlgorithm);\r\n                            sortingLogic.startSorting();\r\n                        }else {\r\n                            System.out.println(&quot;Array is sorted&quot;);\r\n                        }\r\n                    }\r\n                    startButton.setEnabled(false);\r\n                    stopButton.setEnabled(true);\r\n                    resetButton.setEnabled(true);\r\n                    //System.out.println(&quot;Start has been clicked&quot;);\r\n                }\r\n            });//Performs sort that is selected under dropdownOptions and checks that it is not null or already sorted\r\n            stopButton.addActionListener(new ActionListener() {\r\n                @Override\r\n                public void actionPerformed(ActionEvent e) {\r\n                    sortingLogic.stopSorting();\r\n                }\r\n            });\r\n            resetButton.addActionListener(new ActionListener() {\r\n                @Override\r\n                public void actionPerformed(ActionEvent e) {\r\n                    //System.out.println(&quot;Reset has been clicked&quot;);\r\n                    sortingLogic.stopSorting(); // Stop the sorting algorithm\r\n                    sortingLogic.resetArray();\r\n                    startButton.setEnabled(true);\r\n                    stopButton.setEnabled(false);\r\n                    resetButton.setEnabled(false);\r\n                }\r\n    \r\n            });\r\n    \r\n            frame.setVisible(true);\r\n        }\r\n    \r\n    \r\n    \r\n    }\r\n    \r\n    package visualizer.ui;\r\n    \r\n    \r\n    import visualizer.algorithms.BubbleSort;\r\n    import visualizer.algorithms.SelectionSort;\r\n    import visualizer.algorithms.SortingInterface;\r\n    \r\n    import java.util.Arrays;\r\n    import java.util.Random;\r\n    \r\n    public class SortingLogic {\r\n        private SortingVisualizer visualizer;\r\n        private SortingInterface currentAlgorithm;\r\n        private int[] arrayToSort;\r\n        public SortingLogic() {\r\n            //System.out.println(&quot;SortingLogic is being called&quot;);\r\n        }\r\n        public void setVisualizer(SortingVisualizer visualizer) {\r\n            this.visualizer = visualizer;\r\n        }\r\n        public int [] generateRandomIntArray(int min, int max, int length) {\r\n            arrayToSort = new int[length];\r\n            Random randNumGenerator = new Random();\r\n            for (int i = 0; i &lt; length; i++) {\r\n                arrayToSort[i] = randNumGenerator.nextInt(max - min + 1) + min;\r\n            }\r\n            return arrayToSort;\r\n        }\r\n        public void setSortingAlgorithm(String algorithm) {\r\n            switch (algorithm) {\r\n                case &quot;Bubble Sort&quot;:\r\n                    currentAlgorithm = new BubbleSort(visualizer);\r\n                    break;\r\n                case &quot;Selection Sort&quot;:\r\n                    currentAlgorithm = new SelectionSort(visualizer);\r\n                    break;\r\n                /*case &quot;Insertion Sort&quot;:\r\n                    currentAlgorithm = new InsertionSort(visualizer);*/\r\n                default:\r\n                    break;\r\n            }\r\n        }\r\n        public void startSorting() {\r\n            if (currentAlgorithm != null)\r\n                currentAlgorithm.toSort(visualizer);\r\n        }\r\n        public void stopSorting() {\r\n            if (currentAlgorithm != null) {\r\n                currentAlgorithm.stopSorting();\r\n            }\r\n        }\r\n        public int[] getArrayToSort() {\r\n            return arrayToSort;\r\n        }\r\n        public void setArrayToSort(int[] newArray) {\r\n            this.arrayToSort = newArray;\r\n        }\r\n        public void resetArray() {\r\n            // Generate a new random array and update the visualizer\r\n            arrayToSort = generateRandomIntArray(1, 1000, 30);\r\n            visualizer.setArrayToSort(arrayToSort);\r\n            visualizer.updateVisualizationPanel();\r\n        }\r\n        public boolean isSorted(int [] arrayToSort){\r\n            for (int i = 0; i &lt; arrayToSort.length; i++){\r\n                if (arrayToSort[i] &gt; arrayToSort[i + 1]){\r\n                    return false;\r\n                }\r\n            }\r\n            return true;\r\n        }\r\n    \r\n    }\r\n    package visualizer.ui;\r\n    \r\n    import javax.swing.*;\r\n    import java.awt.*;\r\n    import java.util.Arrays;\r\n    \r\n    public class SortingVisualizer extends JPanel{\r\n        private int[] arrayToSort;\r\n    \r\n        public int[] getArrayToSort() {\r\n            return arrayToSort;\r\n        }\r\n    \r\n        public void setArrayToSort(int[] arrayToSort) {\r\n            this.arrayToSort = arrayToSort;\r\n        }\r\n    \r\n        public SortingVisualizer(int[] arrayToSort) {\r\n            this.arrayToSort = Arrays.copyOf(arrayToSort, arrayToSort.length);\r\n            //System.out.println(&quot;SortingVisualizer is being called&quot;);\r\n        }\r\n            protected void paintComponent(Graphics g){\r\n                super.paintComponent(g);\r\n                int barWidth = getWidth() / arrayToSort.length;\r\n                //System.out.println(Arrays.toString(arrayToSort) + &quot;array within Visualizer&#39;s Paint Component&quot;);\r\n    \r\n                for (int j = 0; j &lt; arrayToSort.length; j++) {//Enhanced for loops look at the values not the indices, so we do not use it\r\n                    int maxArrayValue = Arrays.stream(arrayToSort).max().getAsInt();\r\n                    int barHeight = (int) ((double) arrayToSort[j] / maxArrayValue * getHeight());                int x = j * barWidth;\r\n                    int y = getHeight() - barHeight;\r\n    \r\n                    g.setColor(Color.red);\r\n                    g.fillRect(x, y, barWidth, barHeight);\r\n                    //Fills in a rectangular column\r\n                    g.setColor(Color.black);\r\n                    g.drawRect(x, y, barWidth, barHeight);\r\n                    //Creates a border for said columns\r\n    \r\n                    //System.out.println(&quot;SortingVisualizer: /nBar Height &quot; + barHeight +  &quot;barWidth &quot; + barWidth + &quot;x &quot; + x + &quot;y&quot; + y);\r\n                }\r\n            }\r\n        public void updateVisualizationPanel() {\r\n            //System.out.println(&quot;Repaint has been called&quot;);\r\n            repaint(); // Trigger a repaint of the panel\r\n        }\r\n    }\r\n    \r\n    package visualizer.algorithms;\r\n    \r\n    import visualizer.ui.SortingVisualizer;\r\n    \r\n    public interface SortingInterface {\r\n        void toSort(SortingVisualizer visualizer);\r\n        void stopSorting();\r\n    \r\n    \r\n    }\r\n\r\n\r\n\r\n```\r\nI started to create a Seperate SwingWorker Class so it may not be complete to the experienced eye. \r\n\r\nBefore using SwingWorker I was trying to do it using a Timer instead but that was not doing it step-by-step so I switched to SwingWorker. Specifically because it would allow me to do Multi-threading. \r\n\r\nWhat is currently happening: Once you hit start nothing happens, I believe that us just because I do not make any calls to the BubbleSort (fully expect to implement the rest) in the ActionListener. But that is because I need the Sorting classes to work with the SwingWorker first\r\n\r\nWhat I am expecting: Once the user hits the Start button they see the bars being sorted step-by-step\r\n\r\n\r\nAny tips, comments, or concerns or duly appreciated!\r\n\r\n**EDIT**\r\n\r\nI was able to remove the For Loops and do it step-by-step as Hovercraft Full Of Eels and David Conrad suggested and this shows in the visualization panel \r\n\r\n\r\n    public BubbleSort(SortingVisualizer visualizer) {\r\n            if (visualizer == null) {\r\n                throw new IllegalArgumentException(&quot;Visualizer cannot be null&quot;);\r\n            }\r\n            this.visualizer = visualizer;\r\n            this.arr = visualizer.getArrayToSort();\r\n            this.i = 0;\r\n            this.j = 0;\r\n            this.timer = new Timer(100, new ActionListener() {\r\n                @Override\r\n                public void actionPerformed(ActionEvent e) {\r\n                    if(i &lt; arr.length - 1){\r\n                        if(j &lt; arr.length - i - 1){\r\n                            if(arr[j] &gt; arr[j + 1]){\r\n                                int temp = arr[j];\r\n                                arr[j] = arr[j + 1];\r\n                                arr[j + 1] = temp;\r\n    \r\n                                visualizer.updateVisualizationPanel();\r\n                            }\r\n                            j++;\r\n                        }else{\r\n                            j = 0;\r\n                            i++;\r\n                        }\r\n                    }else{\r\n                        timer.stop();\r\n                    }\r\n    \r\n                }\r\n            });\r\n        }\r\n\r\n","title":"How to use SwingWorker with Java Sorting classes e.g. Bubble Sort","body":"<p>I am trying to create a Java Sorting Visualizer using SwingWorker to run the sorting algorithm step by step in a separate thread, and publish intermediate states to update the UI (I am going to say using the Event Dispatch Thread) but I am having trouble understanding how to use SwingWorker for this. Below is my code:</p>\n<pre><code>\n    package visualizer;\n    \n    import visualizer.ui.SortingLogic;\n    import visualizer.ui.SortingWindow;\n    \n    import javax.swing.*;\n    import java.util.Arrays;\n    \n    public class Main {\n        public static void main(String[] args) {\n            SwingUtilities.invokeLater(() -&gt; {\n               new SortingWindow();\n    \n            });\n    \n    \n            //System.out.println(&quot;Hello world!&quot;);\n        }\n    }\n    package visualizer.ui;\n    \n    import javax.swing.*;\n    import java.awt.*;\n    import java.awt.event.ActionEvent;\n    import java.awt.event.ActionListener;\n    import java.util.Arrays;\n    \n    public class SortingWindow {\n        int [] arrayToSort;\n        SortingVisualizer visualizer;\n        SortingLogic sortingLogic;\n        JButton startButton, stopButton, resetButton;\n    \n        public SortingWindow(){\n            //System.out.println(&quot;SortingWindow is being called&quot;);\n            initiliaze();\n        }\n        private void initiliaze() {\n            JFrame frame = new JFrame();\n            frame.setTitle(&quot;Sorting Visualizer&quot;);\n            frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);\n            frame.setSize(1000, 800);\n            frame.setLocationRelativeTo(null);\n            frame.setResizable(true);\n    \n            JPanel panelBottom = new JPanel();\n            panelBottom.setLayout(new FlowLayout(FlowLayout.CENTER, 10, 5));\n            frame.add(panelBottom, BorderLayout.PAGE_END);\n            panelBottom.setBackground(Color.ORANGE);\n            //Creates Panel that holds Start and Reset Buttons\n    \n            /*JPanel panelTop = new JPanel();\n            panelTop.setLayout(new FlowLayout(FlowLayout.CENTER, 10, 5));\n            frame.add(panelTop, BorderLayout.PAGE_START);\n            panelTop.setBackground(Color.blue);\n            //Creates top Panel that holds currently sorting*/\n    \n            String [] sortOptions = {&quot;Bubble Sort&quot;, &quot;Selection Sort&quot;, &quot;Insertion Sort&quot;,\n                    &quot;Merge Sort&quot;, &quot;Quick Sort&quot;, &quot;Heap Sort&quot;, &quot;Counting Sort&quot;, &quot;Radix Sort&quot;,\n                    &quot;Bucket Sort&quot;, &quot;Shell Sort&quot;};\n            JComboBox sortingOptionsDropdown = new JComboBox(sortOptions);\n            panelBottom.add(sortingOptionsDropdown);\n            //Adds the drop-down menu to the bottom panel\n            /*https://docs.oracle.com/javase/tutorial/uiswing/components/combobox.html*/\n    \n            startButton = new JButton(&quot;Start&quot;);\n            stopButton = new JButton(&quot;Stop&quot;);\n            resetButton = new JButton(&quot;Reset&quot;);\n            panelBottom.add(startButton);\n            panelBottom.add(stopButton);\n            panelBottom.add(resetButton);\n            //Adds buttons for starting and stopping to JPanel\n    \n            stopButton.setEnabled(false);\n            resetButton.setEnabled(false);\n    \n            /*JLabel currentlySorting = new JLabel(&quot;Currently Sorting&quot;);\n            panelTop.add(currentlySorting);\n            currentlySorting.setText(&quot;Currently Sorting: &quot; + sortingOptionsDropdown.getSelectedItem()\n                    + &quot; \\tTime Elapsed: &quot;);\n            currentlySorting.setForeground(Color.gray);\n            currentlySorting.setLayout(new FlowLayout(FlowLayout.LEFT, 10, 5));\n            //Adds labels for Currently sorting to the top label*/\n    \n    \n    \n            sortingLogic = new SortingLogic();\n            arrayToSort = sortingLogic.generateRandomIntArray(5, 1000, 30);\n            visualizer = new SortingVisualizer(arrayToSort);\n            sortingLogic.setArrayToSort(arrayToSort);\n            sortingLogic.setVisualizer(visualizer);\n    \n            System.out.println(Arrays.toString(arrayToSort));\n            //initializes a random array\n    \n            frame.getContentPane().add(visualizer);\n            startButton.addActionListener(new ActionListener() {\n                @Override\n                public void actionPerformed(ActionEvent e) {\n                    String selectedAlgorithm = (String) sortingOptionsDropdown.getSelectedItem();\n                    if (selectedAlgorithm != null){\n                        if (!sortingLogic.isSorted(arrayToSort)) {\n                            sortingLogic.setSortingAlgorithm(selectedAlgorithm);\n                            sortingLogic.startSorting();\n                        }else {\n                            System.out.println(&quot;Array is sorted&quot;);\n                        }\n                    }\n                    startButton.setEnabled(false);\n                    stopButton.setEnabled(true);\n                    resetButton.setEnabled(true);\n                    //System.out.println(&quot;Start has been clicked&quot;);\n                }\n            });//Performs sort that is selected under dropdownOptions and checks that it is not null or already sorted\n            stopButton.addActionListener(new ActionListener() {\n                @Override\n                public void actionPerformed(ActionEvent e) {\n                    sortingLogic.stopSorting();\n                }\n            });\n            resetButton.addActionListener(new ActionListener() {\n                @Override\n                public void actionPerformed(ActionEvent e) {\n                    //System.out.println(&quot;Reset has been clicked&quot;);\n                    sortingLogic.stopSorting(); // Stop the sorting algorithm\n                    sortingLogic.resetArray();\n                    startButton.setEnabled(true);\n                    stopButton.setEnabled(false);\n                    resetButton.setEnabled(false);\n                }\n    \n            });\n    \n            frame.setVisible(true);\n        }\n    \n    \n    \n    }\n    \n    package visualizer.ui;\n    \n    \n    import visualizer.algorithms.BubbleSort;\n    import visualizer.algorithms.SelectionSort;\n    import visualizer.algorithms.SortingInterface;\n    \n    import java.util.Arrays;\n    import java.util.Random;\n    \n    public class SortingLogic {\n        private SortingVisualizer visualizer;\n        private SortingInterface currentAlgorithm;\n        private int[] arrayToSort;\n        public SortingLogic() {\n            //System.out.println(&quot;SortingLogic is being called&quot;);\n        }\n        public void setVisualizer(SortingVisualizer visualizer) {\n            this.visualizer = visualizer;\n        }\n        public int [] generateRandomIntArray(int min, int max, int length) {\n            arrayToSort = new int[length];\n            Random randNumGenerator = new Random();\n            for (int i = 0; i &lt; length; i++) {\n                arrayToSort[i] = randNumGenerator.nextInt(max - min + 1) + min;\n            }\n            return arrayToSort;\n        }\n        public void setSortingAlgorithm(String algorithm) {\n            switch (algorithm) {\n                case &quot;Bubble Sort&quot;:\n                    currentAlgorithm = new BubbleSort(visualizer);\n                    break;\n                case &quot;Selection Sort&quot;:\n                    currentAlgorithm = new SelectionSort(visualizer);\n                    break;\n                /*case &quot;Insertion Sort&quot;:\n                    currentAlgorithm = new InsertionSort(visualizer);*/\n                default:\n                    break;\n            }\n        }\n        public void startSorting() {\n            if (currentAlgorithm != null)\n                currentAlgorithm.toSort(visualizer);\n        }\n        public void stopSorting() {\n            if (currentAlgorithm != null) {\n                currentAlgorithm.stopSorting();\n            }\n        }\n        public int[] getArrayToSort() {\n            return arrayToSort;\n        }\n        public void setArrayToSort(int[] newArray) {\n            this.arrayToSort = newArray;\n        }\n        public void resetArray() {\n            // Generate a new random array and update the visualizer\n            arrayToSort = generateRandomIntArray(1, 1000, 30);\n            visualizer.setArrayToSort(arrayToSort);\n            visualizer.updateVisualizationPanel();\n        }\n        public boolean isSorted(int [] arrayToSort){\n            for (int i = 0; i &lt; arrayToSort.length; i++){\n                if (arrayToSort[i] &gt; arrayToSort[i + 1]){\n                    return false;\n                }\n            }\n            return true;\n        }\n    \n    }\n    package visualizer.ui;\n    \n    import javax.swing.*;\n    import java.awt.*;\n    import java.util.Arrays;\n    \n    public class SortingVisualizer extends JPanel{\n        private int[] arrayToSort;\n    \n        public int[] getArrayToSort() {\n            return arrayToSort;\n        }\n    \n        public void setArrayToSort(int[] arrayToSort) {\n            this.arrayToSort = arrayToSort;\n        }\n    \n        public SortingVisualizer(int[] arrayToSort) {\n            this.arrayToSort = Arrays.copyOf(arrayToSort, arrayToSort.length);\n            //System.out.println(&quot;SortingVisualizer is being called&quot;);\n        }\n            protected void paintComponent(Graphics g){\n                super.paintComponent(g);\n                int barWidth = getWidth() / arrayToSort.length;\n                //System.out.println(Arrays.toString(arrayToSort) + &quot;array within Visualizer's Paint Component&quot;);\n    \n                for (int j = 0; j &lt; arrayToSort.length; j++) {//Enhanced for loops look at the values not the indices, so we do not use it\n                    int maxArrayValue = Arrays.stream(arrayToSort).max().getAsInt();\n                    int barHeight = (int) ((double) arrayToSort[j] / maxArrayValue * getHeight());                int x = j * barWidth;\n                    int y = getHeight() - barHeight;\n    \n                    g.setColor(Color.red);\n                    g.fillRect(x, y, barWidth, barHeight);\n                    //Fills in a rectangular column\n                    g.setColor(Color.black);\n                    g.drawRect(x, y, barWidth, barHeight);\n                    //Creates a border for said columns\n    \n                    //System.out.println(&quot;SortingVisualizer: /nBar Height &quot; + barHeight +  &quot;barWidth &quot; + barWidth + &quot;x &quot; + x + &quot;y&quot; + y);\n                }\n            }\n        public void updateVisualizationPanel() {\n            //System.out.println(&quot;Repaint has been called&quot;);\n            repaint(); // Trigger a repaint of the panel\n        }\n    }\n    \n    package visualizer.algorithms;\n    \n    import visualizer.ui.SortingVisualizer;\n    \n    public interface SortingInterface {\n        void toSort(SortingVisualizer visualizer);\n        void stopSorting();\n    \n    \n    }\n\n\n\n</code></pre>\n<p>I started to create a Seperate SwingWorker Class so it may not be complete to the experienced eye.</p>\n<p>Before using SwingWorker I was trying to do it using a Timer instead but that was not doing it step-by-step so I switched to SwingWorker. Specifically because it would allow me to do Multi-threading.</p>\n<p>What is currently happening: Once you hit start nothing happens, I believe that us just because I do not make any calls to the BubbleSort (fully expect to implement the rest) in the ActionListener. But that is because I need the Sorting classes to work with the SwingWorker first</p>\n<p>What I am expecting: Once the user hits the Start button they see the bars being sorted step-by-step</p>\n<p>Any tips, comments, or concerns or duly appreciated!</p>\n<p><strong>EDIT</strong></p>\n<p>I was able to remove the For Loops and do it step-by-step as Hovercraft Full Of Eels and David Conrad suggested and this shows in the visualization panel</p>\n<pre><code>public BubbleSort(SortingVisualizer visualizer) {\n        if (visualizer == null) {\n            throw new IllegalArgumentException(&quot;Visualizer cannot be null&quot;);\n        }\n        this.visualizer = visualizer;\n        this.arr = visualizer.getArrayToSort();\n        this.i = 0;\n        this.j = 0;\n        this.timer = new Timer(100, new ActionListener() {\n            @Override\n            public void actionPerformed(ActionEvent e) {\n                if(i &lt; arr.length - 1){\n                    if(j &lt; arr.length - i - 1){\n                        if(arr[j] &gt; arr[j + 1]){\n                            int temp = arr[j];\n                            arr[j] = arr[j + 1];\n                            arr[j + 1] = temp;\n\n                            visualizer.updateVisualizationPanel();\n                        }\n                        j++;\n                    }else{\n                        j = 0;\n                        i++;\n                    }\n                }else{\n                    timer.stop();\n                }\n\n            }\n        });\n    }\n</code></pre>\n"},{"tags":["java","amazon-web-services","spring-boot","stream","amazon-kinesis"],"comments":[{"owner":{"account_id":1540816,"reputation":10259,"user_id":1435543,"display_name":"smac2020"},"score":0,"creation_date":1695760300,"post_id":77183149,"comment_id":136066949,"body_markdown":"WHy are you using a third party API over the Official AWS SDK for Java V2.","body":"WHy are you using a third party API over the Official AWS SDK for Java V2."},{"owner":{"account_id":5589271,"reputation":87,"user_id":4428984,"display_name":"Anderson"},"score":0,"creation_date":1695810248,"post_id":77183149,"comment_id":136072991,"body_markdown":"Because the project pattern was defined that way. And before changing the way you implement it, I would like to try to make it work this way!","body":"Because the project pattern was defined that way. And before changing the way you implement it, I would like to try to make it work this way!"},{"owner":{"account_id":1540816,"reputation":10259,"user_id":1435543,"display_name":"smac2020"},"score":0,"creation_date":1695827933,"post_id":77183149,"comment_id":136076823,"body_markdown":"This is not an AWS Offical API. Its 3rd party and not supported by AWS","body":"This is not an AWS Offical API. Its 3rd party and not supported by AWS"},{"owner":{"account_id":6157899,"reputation":19791,"user_id":4800344,"display_name":"Ermiya Eskandary"},"score":0,"creation_date":1696167197,"post_id":77183149,"comment_id":136116033,"body_markdown":"When you declare a bean with a parameter (like `String json`), Spring tries to find a bean of type `String` in its context to inject it, but it can’t find one, hence you get the error of `Could not autowire. No beans of ‘String’ type found`. Where is this string coming from? Are you changing this string at runtime? What are you really trying to do here?","body":"When you declare a bean with a parameter (like <code>String json</code>), Spring tries to find a bean of type <code>String</code> in its context to inject it, but it can’t find one, hence you get the error of <code>Could not autowire. No beans of ‘String’ type found</code>. Where is this string coming from? Are you changing this string at runtime? What are you really trying to do here?"},{"owner":{"account_id":5589271,"reputation":87,"user_id":4428984,"display_name":"Anderson"},"score":0,"creation_date":1696334553,"post_id":77183149,"comment_id":136136907,"body_markdown":"Hello, Ermiya, thanks for answer.  \nThe idea would be for this Json(String) to be coming from a business class, for example UserService.java, where I will convert the user object to a json, and I wanted to call this &quot;Producer&quot; via injection, or any other way, to send to the Kinesis","body":"Hello, Ermiya, thanks for answer.   The idea would be for this Json(String) to be coming from a business class, for example UserService.java, where I will convert the user object to a json, and I wanted to call this &quot;Producer&quot; via injection, or any other way, to send to the Kinesis"}],"owner":{"account_id":5589271,"reputation":87,"user_id":4428984,"display_name":"Anderson"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695759301,"creation_date":1695759301,"question_id":77183149,"body_markdown":"I&#39;m trying to implement an integration solution with Kinesis (AWS), using &quot;Stream Binder Kinesis&quot;. I need to send a json(String) to a queue (producer). I&#39;m based on the example https://www.baeldung.com/spring-aws-kinesis, item 5.4!\r\n\r\nproperties: \r\n\r\n    spring.cloud.stream.bindings.output-out-0.destination=myStream\r\n    spring.cloud.stream.bindings.output-out-0.content-type=text/plain\r\n    spring.cloud.stream.poller.fixed-delay = 3000\r\n\r\nCode example:\r\n\r\n\r\n    @Configuration class ProducerBinder {\r\n      @Bean public Supplier output() {\r\n        return () -&gt; IntStream.range(1, 200)\r\n                     .mapToObj(ipSuffix - &gt;&quot;192.168.0.&quot; + ipSuffix)\r\n                     .map(entry - &gt;MessageBuilder.withPayload(entry)\r\n                     .build());\r\n        }\r\n      }\r\n\r\nI need to implement something like this (passing a String), but the code does not allow the method to receive an argument.\r\n\r\n    @Configuration\r\n    class ProducerBinder {\r\n        @Bean\r\n        public Supplier output(String json) {\r\n            return () -&gt; MessageBuilder.withPayload(json).build();\r\n        }\r\n    }\r\n\r\nThis message in compile mode appears:\r\n\r\n&quot;Could not autowire. No beans of &#39;String&#39; type found&quot;\r\n\r\nHow can I make this code receive a string? Can you help me please ?\r\n \r\n\r\n","title":"Integrating Spring with AWS Binder (Kinesis)","body":"<p>I'm trying to implement an integration solution with Kinesis (AWS), using &quot;Stream Binder Kinesis&quot;. I need to send a json(String) to a queue (producer). I'm based on the example <a href=\"https://www.baeldung.com/spring-aws-kinesis\" rel=\"nofollow noreferrer\">https://www.baeldung.com/spring-aws-kinesis</a>, item 5.4!</p>\n<p>properties:</p>\n<pre><code>spring.cloud.stream.bindings.output-out-0.destination=myStream\nspring.cloud.stream.bindings.output-out-0.content-type=text/plain\nspring.cloud.stream.poller.fixed-delay = 3000\n</code></pre>\n<p>Code example:</p>\n<pre><code>@Configuration class ProducerBinder {\n  @Bean public Supplier output() {\n    return () -&gt; IntStream.range(1, 200)\n                 .mapToObj(ipSuffix - &gt;&quot;192.168.0.&quot; + ipSuffix)\n                 .map(entry - &gt;MessageBuilder.withPayload(entry)\n                 .build());\n    }\n  }\n</code></pre>\n<p>I need to implement something like this (passing a String), but the code does not allow the method to receive an argument.</p>\n<pre><code>@Configuration\nclass ProducerBinder {\n    @Bean\n    public Supplier output(String json) {\n        return () -&gt; MessageBuilder.withPayload(json).build();\n    }\n}\n</code></pre>\n<p>This message in compile mode appears:</p>\n<p>&quot;Could not autowire. No beans of 'String' type found&quot;</p>\n<p>How can I make this code receive a string? Can you help me please ?</p>\n"},{"tags":["java","spring","spring-mvc","spring-boot"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1432274563,"post_id":30388169,"comment_id":48867373,"body_markdown":"Post some configuration.","body":"Post some configuration."},{"owner":{"account_id":1443205,"reputation":553,"user_id":1362658,"accept_rate":41,"display_name":"Ryan Zhu"},"score":0,"creation_date":1432276805,"post_id":30388169,"comment_id":48868388,"body_markdown":"M. Deinum I don&#39;t have much configuration, just a application.properties, which only contains some database configuration, redis configuration and logging configuration. Nothing is related with the exception handling logic","body":"M. Deinum I don&#39;t have much configuration, just a application.properties, which only contains some database configuration, redis configuration and logging configuration. Nothing is related with the exception handling logic"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1432276964,"post_id":30388169,"comment_id":48868458,"body_markdown":"At least add something, a starter class etc. a `@ControllerAdvice` is a `@Component` so it should be detected so you must have somewhere disabled proper component-scanning.","body":"At least add something, a starter class etc. a <code>@ControllerAdvice</code> is a <code>@Component</code> so it should be detected so you must have somewhere disabled proper component-scanning."},{"owner":{"account_id":1443205,"reputation":553,"user_id":1362658,"accept_rate":41,"display_name":"Ryan Zhu"},"score":0,"creation_date":1432278282,"post_id":30388169,"comment_id":48869122,"body_markdown":"M. Deinum I add the starter class as above. But, I think I&#39;ve figured it out myself... I tried change the return type of the exception handling method `handleException` to `ResponseEntity&lt;RestEntity&gt;`, it worked again... Springboot must have to wrap the return type of exception handler method, without a `ResponseEntity`, springboot just ignore the return type and give the default response object structure, with timestamp, error message, url and etc...","body":"M. Deinum I add the starter class as above. But, I think I&#39;ve figured it out myself... I tried change the return type of the exception handling method <code>handleException</code> to <code>ResponseEntity&lt;RestEntity&gt;</code>, it worked again... Springboot must have to wrap the return type of exception handler method, without a <code>ResponseEntity</code>, springboot just ignore the return type and give the default response object structure, with timestamp, error message, url and etc..."},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1432278361,"post_id":30388169,"comment_id":48869155,"body_markdown":"Instead of that you could also have added `@ResponseBody` as that is what you want.","body":"Instead of that you could also have added <code>@ResponseBody</code> as that is what you want."},{"owner":{"account_id":393856,"reputation":11926,"user_id":755932,"accept_rate":67,"display_name":"K. Siva Prasad Reddy"},"score":0,"creation_date":1432287046,"post_id":30388169,"comment_id":48874105,"body_markdown":"Also, you don&#39;t need both @ SpringBootApplication and @ ComponentScan,\n@ EnableAutoConfiguration together. Use either one.","body":"Also, you don&#39;t need both @ SpringBootApplication and @ ComponentScan, @ EnableAutoConfiguration together. Use either one."},{"owner":{"account_id":10770525,"reputation":526,"user_id":7924110,"display_name":"Kenany"},"score":0,"creation_date":1695768539,"post_id":30388169,"comment_id":136067957,"body_markdown":"Do you have a particular controller in your project (another class annotated with @RestController)?","body":"Do you have a particular controller in your project (another class annotated with @RestController)?"}],"answers":[{"tags":[],"owner":{"account_id":361980,"reputation":2500,"user_id":704916,"accept_rate":88,"display_name":"ianaz"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1525417438,"creation_date":1525417438,"answer_id":50169092,"question_id":30388169,"body_markdown":"I actually had to remove @EnableWebMvc from my main application file.\r\n\r\nHere the working configuration for me:\r\n\r\n    @SpringBootApplication\r\n    @ComponentScan(basePackages = {\r\n    ....\r\n    })\r\n    public class Application extends SpringBootServletInitializer { ... }\r\n\r\nand the ControllerAdvice:\r\n\r\n    @ControllerAdvice\r\n    public class ErrorHandlingController { ... }","title":"spring boot starter web @ControllerAdvice annotation is not work without having @RestController annotation","body":"<p>I actually had to remove @EnableWebMvc from my main application file.</p>\n\n<p>Here the working configuration for me:</p>\n\n<pre><code>@SpringBootApplication\n@ComponentScan(basePackages = {\n....\n})\npublic class Application extends SpringBootServletInitializer { ... }\n</code></pre>\n\n<p>and the ControllerAdvice:</p>\n\n<pre><code>@ControllerAdvice\npublic class ErrorHandlingController { ... }\n</code></pre>\n"}],"owner":{"account_id":1443205,"reputation":553,"user_id":1362658,"accept_rate":41,"display_name":"Ryan Zhu"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":9056,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":1,"score":4,"last_activity_date":1695758645,"creation_date":1432267398,"question_id":30388169,"body_markdown":"**RESOLVE**\r\n\r\nin rest api application, the return type of exception handling method should be `ResponseEntity` or annotate the method with `@ResponseBody` so that spring boot can do the http serialisation. \r\n\r\n**UPDATE**\r\n\r\nstarter class:\r\n\r\n    @SpringBootApplication\r\n    @ComponentScan\r\n    @EnableAutoConfiguration\r\n    @EnableConfigurationProperties\r\n    @EnableTransactionManagement//TODO remove this line if not needed\r\n    public class Application extends SpringBootServletInitializer{\r\n\r\n    private static Class&lt;Application&gt; applicationClass= Application.class;\r\n    public static void main(String[] args) {\r\n        SpringApplication.run(applicationClass, args);\r\n    }\r\n\r\n    @Override\r\n    protected SpringApplicationBuilder configure(SpringApplicationBuilder builder) {\r\n        return builder.sources(applicationClass);\r\n    }\r\n    }\r\n\r\nI was using `@ControllerAdvice` to handle global exception handling in spring boot starter web and I got such a weird problem.\r\n\r\nAs I followed the guide from spring official doc, https://spring.io/blog/2013/11/01/exception-handling-in-spring-mvc, to handling exceptions globally, just add a handler class with `@ControllerAdivce` annotated. But, when I test it, the exception handling method is not invoked when a `RunTimeException` is thrown.\r\n\r\nHere is My code:\r\n\r\n    @ControllerAdvice\r\n    public class GlobalDefaultExceptionHandler {\r\n\r\n    @ExceptionHandler(value = RuntimeException.class)\r\n    @ResponseStatus(HttpStatus.BAD_REQUEST)\r\n    public RestEntity handleException(HttpServletRequest req, RuntimeException ex) {\r\n        RestEntity restEntity=new RestEntity();\r\n        Message message=new Message();\r\n        message.setCode(1000);\r\n        message.setMessage(&quot;Something wrong with the server&quot;);\r\n        restEntity.setMessage(message);\r\n        return restEntity;\r\n    }\r\n    }\r\n\r\nAnd I have methods in other controllers annotated with `@ExceptionHandler` to handle specific exceptions in each Controller, while leave unresolved exceptions to the `GlobalDefaultExceptionHandler`. \r\n\r\nIt turns out that it doesn&#39;t work. Am I missing something here??\r\n\r\nAnd, for now, as a workaround , I just add `@RestControoler` on the `GlobalDefaultExceptionHandler` and it just work fine. I don&#39;t why...\r\n\r\nAnyone can help?","title":"spring boot starter web @ControllerAdvice annotation is not work without having @RestController annotation","body":"<p><strong>RESOLVE</strong></p>\n\n<p>in rest api application, the return type of exception handling method should be <code>ResponseEntity</code> or annotate the method with <code>@ResponseBody</code> so that spring boot can do the http serialisation. </p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>starter class:</p>\n\n<pre><code>@SpringBootApplication\n@ComponentScan\n@EnableAutoConfiguration\n@EnableConfigurationProperties\n@EnableTransactionManagement//TODO remove this line if not needed\npublic class Application extends SpringBootServletInitializer{\n\nprivate static Class&lt;Application&gt; applicationClass= Application.class;\npublic static void main(String[] args) {\n    SpringApplication.run(applicationClass, args);\n}\n\n@Override\nprotected SpringApplicationBuilder configure(SpringApplicationBuilder builder) {\n    return builder.sources(applicationClass);\n}\n}\n</code></pre>\n\n<p>I was using <code>@ControllerAdvice</code> to handle global exception handling in spring boot starter web and I got such a weird problem.</p>\n\n<p>As I followed the guide from spring official doc, <a href=\"https://spring.io/blog/2013/11/01/exception-handling-in-spring-mvc\" rel=\"nofollow\">https://spring.io/blog/2013/11/01/exception-handling-in-spring-mvc</a>, to handling exceptions globally, just add a handler class with <code>@ControllerAdivce</code> annotated. But, when I test it, the exception handling method is not invoked when a <code>RunTimeException</code> is thrown.</p>\n\n<p>Here is My code:</p>\n\n<pre><code>@ControllerAdvice\npublic class GlobalDefaultExceptionHandler {\n\n@ExceptionHandler(value = RuntimeException.class)\n@ResponseStatus(HttpStatus.BAD_REQUEST)\npublic RestEntity handleException(HttpServletRequest req, RuntimeException ex) {\n    RestEntity restEntity=new RestEntity();\n    Message message=new Message();\n    message.setCode(1000);\n    message.setMessage(\"Something wrong with the server\");\n    restEntity.setMessage(message);\n    return restEntity;\n}\n}\n</code></pre>\n\n<p>And I have methods in other controllers annotated with <code>@ExceptionHandler</code> to handle specific exceptions in each Controller, while leave unresolved exceptions to the <code>GlobalDefaultExceptionHandler</code>. </p>\n\n<p>It turns out that it doesn't work. Am I missing something here??</p>\n\n<p>And, for now, as a workaround , I just add <code>@RestControoler</code> on the <code>GlobalDefaultExceptionHandler</code> and it just work fine. I don't why...</p>\n\n<p>Anyone can help?</p>\n"},{"tags":["java","generics","overriding","bridge"],"comments":[{"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"score":3,"creation_date":1695158168,"post_id":77137921,"comment_id":135985904,"body_markdown":"Can you provide the decompiled class file to show there is a bridge method? I don&#39;t see how there can be, considering it would have the same signature.","body":"Can you provide the decompiled class file to show there is a bridge method? I don&#39;t see how there can be, considering it would have the same signature."},{"owner":{"account_id":19997547,"reputation":99,"user_id":14657254,"display_name":"stathis94"},"score":0,"creation_date":1695159038,"post_id":77137921,"comment_id":135986049,"body_markdown":"I got the methods using reflection and used the isBridge method. Both set and get methods have a bridge. I followed this example: https://www.geeksforgeeks.org/method-class-isbridge-method-in-java/","body":"I got the methods using reflection and used the isBridge method. Both set and get methods have a bridge. I followed this example: <a href=\"https://www.geeksforgeeks.org/method-class-isbridge-method-in-java/\" rel=\"nofollow noreferrer\">geeksforgeeks.org/method-class-isbridge-method-in-java</a>"},{"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"score":3,"creation_date":1695160897,"post_id":77137921,"comment_id":135986312,"body_markdown":"I think there can be methods which differ only in return type in a class file: this is a difference between Java (which doesn&#39;t consider return type part of the signature) and the JVM (which does).  I don&#39;t want to commit to it as an answer, but [JVM 4.7.9.1](https://docs.oracle.com/javase/specs/jvms/se21/html/jvms-4.html#jvms-4.7.9.1) may well contain the answer.","body":"I think there can be methods which differ only in return type in a class file: this is a difference between Java (which doesn&#39;t consider return type part of the signature) and the JVM (which does).  I don&#39;t want to commit to it as an answer, but <a href=\"https://docs.oracle.com/javase/specs/jvms/se21/html/jvms-4.html#jvms-4.7.9.1\" rel=\"nofollow noreferrer\">JVM 4.7.9.1</a> may well contain the answer."},{"owner":{"account_id":31180,"reputation":29173,"user_id":85421,"display_name":"user85421"},"score":0,"creation_date":1695161683,"post_id":77137921,"comment_id":135986435,"body_markdown":"@Andy yes, the return type is part of the method descriptor and by [JVM 4.6](https://docs.oracle.com/javase/specs/jvms/se21/html/jvms-4.html#jvms-4.6): &quot;No two methods in one class file may have the same name and descriptor ([&#167;4.3.3](https://docs.oracle.com/javase/specs/jvms/se21/html/jvms-4.html#jvms-4.3.3))&quot;","body":"@Andy yes, the return type is part of the method descriptor and by <a href=\"https://docs.oracle.com/javase/specs/jvms/se21/html/jvms-4.html#jvms-4.6\" rel=\"nofollow noreferrer\">JVM 4.6</a>: &quot;No two methods in one class file may have the same name and descriptor (<a href=\"https://docs.oracle.com/javase/specs/jvms/se21/html/jvms-4.html#jvms-4.3.3\" rel=\"nofollow noreferrer\">&#167;4.3.3</a>)&quot;"},{"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"score":0,"creation_date":1695162389,"post_id":77137921,"comment_id":135986527,"body_markdown":"This may help: https://stackoverflow.com/q/18655541/6395627","body":"This may help: <a href=\"https://stackoverflow.com/q/18655541/6395627\">stackoverflow.com/q/18655541/6395627</a>"},{"owner":{"account_id":7123842,"reputation":27597,"user_id":5684257,"display_name":"HTNW"},"score":0,"creation_date":1695171539,"post_id":77137921,"comment_id":135987489,"body_markdown":"None of the &quot;duplicates&quot; explain why a bridge method is necessary in this case. This question should not have been closed.","body":"None of the &quot;duplicates&quot; explain why a bridge method is necessary in this case. This question should not have been closed."}],"answers":[{"tags":[],"owner":{"account_id":7123842,"reputation":27597,"user_id":5684257,"display_name":"HTNW"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1695758301,"creation_date":1695189618,"answer_id":77139649,"question_id":77137921,"body_markdown":"Actually, the JVM doesn&#39;t implement return type covariance. Even without generics, Java requires bridge methods to implement return type covariance on the JVM. If you compile the following,\r\n\r\n    class MySupplier {\r\n        public Object supply() { return null; }\r\n    }\r\n    class HelloSupplier extends MySupplier {\r\n        @Override public String supply() { return &quot;Hello, World!&quot;; }\r\n    }\r\n\r\nyou will find that `HelloSupplier` contains bytecode amounting to the following:\r\n\r\n    class HelloSupplier extends MySupplier {\r\n        public String supply() { return &quot;Hello, World!&quot;; }\r\n        public /*bridge*/ Object supply() { return this.supply()/*String*/; }\r\n        // in bytecode, all method calls include the signature of the method, including the return type (which is written after the method name and parameters)\r\n        // the bridge method supply()Object calls the method supply()String\r\n        // note that bytecode allows overloading on return type, even though Java doesn&#39;t\r\n    }\r\n\r\nIf you look at the *JVM* definition of an override, you will notice that it differs from *Java*&#39;s idea of an override, in that the signatures of overrides must match *exactly* in the eyes of the JVM. You don&#39;t get to relax the parameter types or strengthen the return type.\r\n\r\n[JVM Specification SE 20, Section 5.4.5](https://docs.oracle.com/javase/specs/jvms/se20/html/jvms-5.html#jvms-5.4.5)\r\n&gt; An instance method &lt;code&gt;m&lt;sub&gt;C&lt;/sub&gt;&lt;/code&gt; can override another instance method &lt;code&gt;m&lt;sub&gt;A&lt;/sub&gt;&lt;/code&gt; iff all of the following are true:\r\n&gt; * &lt;code&gt;m&lt;sub&gt;C&lt;/sub&gt;&lt;/code&gt; has the same name and descriptor as &lt;code&gt;m&lt;sub&gt;A&lt;/sub&gt;&lt;/code&gt;.\r\n&gt; * ...\r\n\r\nThis is important, because this is how the JVM decides what method to call when you do a virtual lookup. A virtual call (`invokevirtual`) to `MySupplier#supply()Object` on a `HelloSupplier` object will never call `HelloSupplier#supply()String`, since a `supply()String` method does not override a `supply()Object` method in the eyes of the JVM (even though it does in Java). Such a virtual method call will call `HelloSupplier#supply()Object`, if it exists, or else look for such a method in superclasses. The Java compiler, in order to implement return type covariance, must override `MySupplier#supply()Object` in the only way the JVM understands: by defining `HelloSupplier#supply()Object`.\r\n\r\nBecause the JVM doesn&#39;t implement return type covariance anyway, the Java compiler can&#39;t leverage return type covariance to sometimes avoid emitting bridges for generic code.","title":"Why Java compiler creates bridge methods for methods without parameters (getter methods)","body":"<p>Actually, the JVM doesn't implement return type covariance. Even without generics, Java requires bridge methods to implement return type covariance on the JVM. If you compile the following,</p>\n<pre><code>class MySupplier {\n    public Object supply() { return null; }\n}\nclass HelloSupplier extends MySupplier {\n    @Override public String supply() { return &quot;Hello, World!&quot;; }\n}\n</code></pre>\n<p>you will find that <code>HelloSupplier</code> contains bytecode amounting to the following:</p>\n<pre><code>class HelloSupplier extends MySupplier {\n    public String supply() { return &quot;Hello, World!&quot;; }\n    public /*bridge*/ Object supply() { return this.supply()/*String*/; }\n    // in bytecode, all method calls include the signature of the method, including the return type (which is written after the method name and parameters)\n    // the bridge method supply()Object calls the method supply()String\n    // note that bytecode allows overloading on return type, even though Java doesn't\n}\n</code></pre>\n<p>If you look at the <em>JVM</em> definition of an override, you will notice that it differs from <em>Java</em>'s idea of an override, in that the signatures of overrides must match <em>exactly</em> in the eyes of the JVM. You don't get to relax the parameter types or strengthen the return type.</p>\n<p><a href=\"https://docs.oracle.com/javase/specs/jvms/se20/html/jvms-5.html#jvms-5.4.5\" rel=\"nofollow noreferrer\">JVM Specification SE 20, Section 5.4.5</a></p>\n<blockquote>\n<p>An instance method <code>m<sub>C</sub></code> can override another instance method <code>m<sub>A</sub></code> iff all of the following are true:</p>\n<ul>\n<li><code>m<sub>C</sub></code> has the same name and descriptor as <code>m<sub>A</sub></code>.</li>\n<li>...</li>\n</ul>\n</blockquote>\n<p>This is important, because this is how the JVM decides what method to call when you do a virtual lookup. A virtual call (<code>invokevirtual</code>) to <code>MySupplier#supply()Object</code> on a <code>HelloSupplier</code> object will never call <code>HelloSupplier#supply()String</code>, since a <code>supply()String</code> method does not override a <code>supply()Object</code> method in the eyes of the JVM (even though it does in Java). Such a virtual method call will call <code>HelloSupplier#supply()Object</code>, if it exists, or else look for such a method in superclasses. The Java compiler, in order to implement return type covariance, must override <code>MySupplier#supply()Object</code> in the only way the JVM understands: by defining <code>HelloSupplier#supply()Object</code>.</p>\n<p>Because the JVM doesn't implement return type covariance anyway, the Java compiler can't leverage return type covariance to sometimes avoid emitting bridges for generic code.</p>\n"}],"owner":{"account_id":19997547,"reputation":99,"user_id":14657254,"display_name":"stathis94"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":104,"favorite_count":0,"down_vote_count":2,"up_vote_count":5,"accepted_answer_id":77139649,"answer_count":1,"score":3,"last_activity_date":1695758301,"creation_date":1695156749,"question_id":77137921,"body_markdown":"I do understand the need to create bridge methods for example a setter method that expects an argument to be passed, but what about a getter method? Why does Java produce a bridge method as well?\r\n\r\nHere is a dummy code produced by ChatGPT to make things more specific:\r\n\r\n    class Box&lt;T&gt; {\r\n    private T value;\r\n\r\n    public void setValue(T value) {\r\n        this.value = value;\r\n    }\r\n\r\n    public T getValue() {\r\n        return value;\r\n    }\r\n    }\r\n\r\n    class StringBox extends Box&lt;String&gt; {\r\n    public void setValue(String value) {\r\n        System.out.println(&quot;Setting a String value in StringBox&quot;);\r\n        super.setValue(value.toString());\r\n    }\r\n\r\n    public String getValue() {\r\n        System.out.println(&quot;Getting String value from StringBox&quot;);\r\n        return super.getValue();\r\n    }\r\n    }\r\n\r\nThe Box class after the erasure will have the following method:\r\n`public Object getValue();`\r\nIn the StringBox class, we defined the method:\r\n`public String getValue()`\r\nBut these two methods have the same signature and the return type of the overriding method uses String as return type, which is a subclass of Object class(Covariant Return Type)\r\nSo it seems that overriding is already complete. Why is there a need for the bridge method?\r\nWhat am i missing?","title":"Why Java compiler creates bridge methods for methods without parameters (getter methods)","body":"<p>I do understand the need to create bridge methods for example a setter method that expects an argument to be passed, but what about a getter method? Why does Java produce a bridge method as well?</p>\n<p>Here is a dummy code produced by ChatGPT to make things more specific:</p>\n<pre><code>class Box&lt;T&gt; {\nprivate T value;\n\npublic void setValue(T value) {\n    this.value = value;\n}\n\npublic T getValue() {\n    return value;\n}\n}\n\nclass StringBox extends Box&lt;String&gt; {\npublic void setValue(String value) {\n    System.out.println(&quot;Setting a String value in StringBox&quot;);\n    super.setValue(value.toString());\n}\n\npublic String getValue() {\n    System.out.println(&quot;Getting String value from StringBox&quot;);\n    return super.getValue();\n}\n}\n</code></pre>\n<p>The Box class after the erasure will have the following method:\n<code>public Object getValue();</code>\nIn the StringBox class, we defined the method:\n<code>public String getValue()</code>\nBut these two methods have the same signature and the return type of the overriding method uses String as return type, which is a subclass of Object class(Covariant Return Type)\nSo it seems that overriding is already complete. Why is there a need for the bridge method?\nWhat am i missing?</p>\n"},{"tags":["java","testing","testng"],"owner":{"account_id":2724755,"reputation":1595,"user_id":2350150,"accept_rate":56,"display_name":"Georgi Georgiev"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1695757975,"creation_date":1695757975,"question_id":77183024,"body_markdown":"When I use `Reporter.log()` the messages are displayed in the `Reporter output` section of the HTML report.\r\n\r\nI would like to be able to show these messages under each test that I click in the `Results` section:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/96Id3.png\r\n\r\n\r\nHow can I do that?","title":"TestNG Reporter log messages that show when you click on a test method in the HTML report","body":"<p>When I use <code>Reporter.log()</code> the messages are displayed in the <code>Reporter output</code> section of the HTML report.</p>\n<p>I would like to be able to show these messages under each test that I click in the <code>Results</code> section:</p>\n<p><a href=\"https://i.stack.imgur.com/96Id3.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/96Id3.png\" alt=\"enter image description here\" /></a></p>\n<p>How can I do that?</p>\n"},{"tags":["java","libgdx"],"answers":[{"tags":[],"owner":{"account_id":11142984,"reputation":2547,"user_id":8178842,"display_name":"Tobias"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1618154336,"creation_date":1618154336,"answer_id":67046708,"question_id":67042505,"body_markdown":"You need to change the source compatibility in your gradle file to `1.8`, since Streams are part of java-8: \r\n\r\nhttps://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html\r\n\r\n&gt; Since:  \r\n&gt; 1.8\r\n\r\nSo your `build.gradle` file should look like this:\r\n\r\n```\r\nsourceCompatibility = 1.8\r\n[compileJava, compileTestJava]*.options*.encoding = &#39;UTF-8&#39;\r\n\r\nsourceSets.main.java.srcDirs = [ &quot;src/&quot; ]\r\n\r\neclipse.project.name = appName + &quot;-core&quot;\r\n```\r\n\r\n**Note**: After this change your game will require a java-8 JRE to be run.","title":"LibGDX use java.util.stream.Stream in core folder?","body":"<p>You need to change the source compatibility in your gradle file to <code>1.8</code>, since Streams are part of java-8:</p>\n<p><a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html</a></p>\n<blockquote>\n<p>Since:<br />\n1.8</p>\n</blockquote>\n<p>So your <code>build.gradle</code> file should look like this:</p>\n<pre><code>sourceCompatibility = 1.8\n[compileJava, compileTestJava]*.options*.encoding = 'UTF-8'\n\nsourceSets.main.java.srcDirs = [ &quot;src/&quot; ]\n\neclipse.project.name = appName + &quot;-core&quot;\n</code></pre>\n<p><strong>Note</strong>: After this change your game will require a java-8 JRE to be run.</p>\n"}],"owner":{"account_id":10971775,"reputation":1,"user_id":8061799,"display_name":"user123546863"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":164,"favorite_count":0,"down_vote_count":5,"up_vote_count":1,"answer_count":1,"score":-4,"last_activity_date":1695757944,"creation_date":1618126643,"question_id":67042505,"body_markdown":"I&#39;m trying to make a default stream function in my lib GDX game. I followed some instructions on adding to my android gradle project but ofc that only lets me use it in my android project.\r\nHow can I use it in my core folder?\r\n\r\nAndroid gradle build file:\r\n```\r\ndefaultConfig {\r\n        ...\r\n        multiDexEnabled true\r\n    }\r\n    compileOptions {\r\n        // Flag to enable support for the new language APIs\r\n        coreLibraryDesugaringEnabled true\r\n        // Sets Java compatibility to Java 8\r\n        sourceCompatibility JavaVersion.VERSION_1_8\r\n        targetCompatibility JavaVersion.VERSION_1_8\r\n    }\r\n\r\n    dependencies {\r\n        coreLibraryDesugaring &#39;com.android.tools:desugar_jdk_libs:1.0.9&#39;\r\n    }\r\n```\r\n\r\nCore gradle build:\r\n```\r\nsourceCompatibility = 1.7\r\n[compileJava, compileTestJava]*.options*.encoding = &#39;UTF-8&#39;\r\n\r\nsourceSets.main.java.srcDirs = [ &quot;src/&quot; ]\r\n\r\neclipse.project.name = appName + &quot;-core&quot;\r\n```","title":"LibGDX use java.util.stream.Stream in core folder?","body":"<p>I'm trying to make a default stream function in my lib GDX game. I followed some instructions on adding to my android gradle project but ofc that only lets me use it in my android project.\nHow can I use it in my core folder?</p>\n<p>Android gradle build file:</p>\n<pre><code>defaultConfig {\n        ...\n        multiDexEnabled true\n    }\n    compileOptions {\n        // Flag to enable support for the new language APIs\n        coreLibraryDesugaringEnabled true\n        // Sets Java compatibility to Java 8\n        sourceCompatibility JavaVersion.VERSION_1_8\n        targetCompatibility JavaVersion.VERSION_1_8\n    }\n\n    dependencies {\n        coreLibraryDesugaring 'com.android.tools:desugar_jdk_libs:1.0.9'\n    }\n</code></pre>\n<p>Core gradle build:</p>\n<pre><code>sourceCompatibility = 1.7\n[compileJava, compileTestJava]*.options*.encoding = 'UTF-8'\n\nsourceSets.main.java.srcDirs = [ &quot;src/&quot; ]\n\neclipse.project.name = appName + &quot;-core&quot;\n</code></pre>\n"},{"tags":["java","android","libgdx"],"comments":[{"owner":{"account_id":3463622,"reputation":7032,"user_id":2899889,"accept_rate":79,"display_name":"MilanG"},"score":0,"creation_date":1617963299,"post_id":67010269,"comment_id":118463593,"body_markdown":"It&#39;s not very clear of what touches you are talking about. Are you pressing physical keyboard keys or game controller or touching the screen?","body":"It&#39;s not very clear of what touches you are talking about. Are you pressing physical keyboard keys or game controller or touching the screen?"},{"owner":{"account_id":10971775,"reputation":1,"user_id":8061799,"display_name":"user123546863"},"score":0,"creation_date":1617986237,"post_id":67010269,"comment_id":118473969,"body_markdown":"Sorry I didn&#39;t mean to be vague. I assumed that b/c I mentioned android that the touch screen was implied.\n\nYes it&#39;s touch screen only. So I&#39;m wondering if I can allow a player to press two buttons with one finger. For example, using their thumb in a similar way to how they would press two buttons on a PS4 controller.","body":"Sorry I didn&#39;t mean to be vague. I assumed that b/c I mentioned android that the touch screen was implied.  Yes it&#39;s touch screen only. So I&#39;m wondering if I can allow a player to press two buttons with one finger. For example, using their thumb in a similar way to how they would press two buttons on a PS4 controller."}],"answers":[{"tags":[],"owner":{"account_id":11142984,"reputation":2547,"user_id":8178842,"display_name":"Tobias"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1618069082,"creation_date":1618069082,"answer_id":67036191,"question_id":67010269,"body_markdown":"**Short answer**: No, it&#39;s not possible.\r\n\r\n**Detailed answer**: A touch on the screen will always be registered as a point. This means you won&#39;t be able to get the width, hight or shape of the touch event, but only the center of it. So you cant realy know whether both buttons are pressed. (I think this behaviour is not specific to libGDX, but to all phone operating systems; at least all that I know).\r\n\r\n**Possible Workarround**: You could try to add an invisible button in between two buttons to &quot;emulate&quot; a touch on both buttons, since when pushing both buttons usually the center of the thumb will be the position, that libGDX will get as the resulting touch event.","title":"Android Studio/LibGDX: Is it possible to press two buttons with a single touch?","body":"<p><strong>Short answer</strong>: No, it's not possible.</p>\n<p><strong>Detailed answer</strong>: A touch on the screen will always be registered as a point. This means you won't be able to get the width, hight or shape of the touch event, but only the center of it. So you cant realy know whether both buttons are pressed. (I think this behaviour is not specific to libGDX, but to all phone operating systems; at least all that I know).</p>\n<p><strong>Possible Workarround</strong>: You could try to add an invisible button in between two buttons to &quot;emulate&quot; a touch on both buttons, since when pushing both buttons usually the center of the thumb will be the position, that libGDX will get as the resulting touch event.</p>\n"}],"owner":{"account_id":10971775,"reputation":1,"user_id":8061799,"display_name":"user123546863"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":175,"favorite_count":0,"down_vote_count":3,"up_vote_count":2,"closed_date":1695759719,"answer_count":1,"score":-1,"last_activity_date":1695757903,"creation_date":1617908402,"question_id":67010269,"body_markdown":"I&#39;m making a fighting game for android using Android Studio and LibGdx. It&#39;d be really cool if I could have attack input combos like Light+Medium. I seem to be able to register multiple inputs if touched by multiple digits. But what if I wanted to use my thumb to press two buttons at once? Is it possible?\r\n\r\nEdit: This is a touch screen only game. So, ideally the player would press two attack buttons on their screen with their thumb.","title":"Android Studio/LibGDX: Is it possible to press two buttons with a single touch?","body":"<p>I'm making a fighting game for android using Android Studio and LibGdx. It'd be really cool if I could have attack input combos like Light+Medium. I seem to be able to register multiple inputs if touched by multiple digits. But what if I wanted to use my thumb to press two buttons at once? Is it possible?</p>\n<p>Edit: This is a touch screen only game. So, ideally the player would press two attack buttons on their screen with their thumb.</p>\n"},{"tags":["java","algorithm","animation","libgdx"],"answers":[{"tags":[],"owner":{"account_id":11142984,"reputation":2547,"user_id":8178842,"display_name":"Tobias"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1628145454,"creation_date":1628145454,"answer_id":68661733,"question_id":68661514,"body_markdown":"If you use the [Animation](https://libgdx.badlogicgames.com/ci/nightlies/docs/api/com/badlogic/gdx/graphics/g2d/Animation.html#getAnimationDuration--) class from libGDX you can use these methods (from the API):\r\n- [getAnimationDuration](https://libgdx.badlogicgames.com/ci/nightlies/docs/api/com/badlogic/gdx/graphics/g2d/Animation.html#getAnimationDuration--): the duration of the entire animation, number of frames times frame duration, in seconds\r\n- [isAnimationFinished(float)](https://libgdx.badlogicgames.com/ci/nightlies/docs/api/com/badlogic/gdx/graphics/g2d/Animation.html#isAnimationFinished-float-): Whether the animation would be finished if played without looping (PlayMode#NORMAL), given the state time.\r\n\r\nSo all you need to know is the current `stateTime`, that is calculated like you already have done in you pseudocode:\r\n\r\n```\r\npublic void draw(float deltaTime) {\r\n    stateTime += deltaTime;\r\n    \r\n    //...\r\n}\r\n```\r\n\r\nFor a further introduction on how to use the libGDX animations, see [this tutorial](https://github.com/libgdx/libgdx/wiki/2D-Animation).\r\n\r\n&lt;hr&gt;\r\n\r\nIn one of my projects I use a wrapper class for some additional functionality. If you want to use it you can find it on [GitHub](https://github.com/tfassbender/DwarfScrollerGDX/blob/master/core/src/net/jfabricationgames/gdx/animation/AnimationDirector.java), or use the current version of it:\r\n\r\n**AnimationDirector**\r\n```\r\nimport com.badlogic.gdx.graphics.g2d.Animation;\r\nimport com.badlogic.gdx.graphics.g2d.Animation.PlayMode;\r\n\r\nimport net.jfabricationgames.gdx.screens.game.GameScreen;\r\n\r\nimport com.badlogic.gdx.graphics.g2d.SpriteBatch;\r\nimport com.badlogic.gdx.graphics.g2d.TextureRegion;\r\n\r\npublic class AnimationDirector&lt;T extends TextureRegion&gt; {\r\n\t\r\n\tpublic static boolean isTextureRight(boolean initialAnimationDirectionIsRight, AnimationDirector&lt;TextureRegion&gt; animation) {\r\n\t\treturn initialAnimationDirectionIsRight != animation.getKeyFrame().isFlipX();\r\n\t}\r\n\t\r\n\tpublic static boolean isTextureLeft(boolean initialAnimationDirectionIsRight, AnimationDirector&lt;TextureRegion&gt; animation) {\r\n\t\treturn initialAnimationDirectionIsRight == animation.getKeyFrame().isFlipX();\r\n\t}\r\n\t\r\n\tprivate float stateTime;\r\n\tprivate Animation&lt;T&gt; animation;\r\n\t\r\n\tprivate AnimationSpriteConfig spriteConfig;\r\n\t\r\n\tpublic AnimationDirector(Animation&lt;T&gt; animation) {\r\n\t\tthis.animation = animation;\r\n\t\tinitializeSpriteConfigWithoutPosition();\r\n\t}\r\n\t\r\n\tprotected void initializeSpriteConfigWithoutPosition() {\r\n\t\tT keyFrame = animation.getKeyFrame(0);\r\n\t\tspriteConfig = new AnimationSpriteConfig().setWidth(keyFrame.getRegionWidth()).setHeight(keyFrame.getRegionHeight());\r\n\t}\r\n\t\r\n\t/**\r\n\t * Draw the current key frame of this animation onto the {@link SpriteBatch}.&lt;br&gt;\r\n\t * ATTENTION: This method will throw an {@link IllegalStateException} if this AnimationDirector does not contain an AnimationSpriteConfig object.\r\n\t */\r\n\tpublic void draw(SpriteBatch batch) {\r\n\t\tif (spriteConfig == null) {\r\n\t\t\tthrow new IllegalStateException(&quot;No AnimationSpriteConfig. Please add an AnimationSpriteConfig in order to use the draw method&quot;);\r\n\t\t}\r\n\t\tT keyFrame = getKeyFrame();\r\n\t\tfloat x = spriteConfig.x + ((spriteConfig.width - keyFrame.getRegionWidth()) * GameScreen.WORLD_TO_SCREEN * 0.5f);\r\n\t\tfloat y = spriteConfig.y + ((spriteConfig.height - keyFrame.getRegionHeight()) * GameScreen.WORLD_TO_SCREEN * 0.5f);\r\n\t\tbatch.draw(keyFrame, x, y, spriteConfig.width * 0.5f, spriteConfig.height * 0.5f, keyFrame.getRegionWidth(), keyFrame.getRegionHeight(),\r\n\t\t\t\tGameScreen.WORLD_TO_SCREEN, GameScreen.WORLD_TO_SCREEN, 0f);\r\n\t}\r\n\t\r\n\tpublic void drawInMenu(SpriteBatch batch) {\r\n\t\tif (spriteConfig == null) {\r\n\t\t\tthrow new IllegalStateException(&quot;No AnimationSpriteConfig. Please add an AnimationSpriteConfig in order to use the draw method&quot;);\r\n\t\t}\r\n\t\t\r\n\t\tT keyFrame = getKeyFrame();\r\n\t\tbatch.draw(keyFrame, spriteConfig.x, spriteConfig.y, spriteConfig.width, spriteConfig.height);\r\n\t}\r\n\t\r\n\t/**\r\n\t * Get the frame at the current time.\r\n\t */\r\n\tpublic T getKeyFrame() {\r\n\t\treturn animation.getKeyFrame(stateTime);\r\n\t}\r\n\t\r\n\tpublic float getStateTime() {\r\n\t\treturn stateTime;\r\n\t}\r\n\t\r\n\tpublic void increaseStateTime(float delta) {\r\n\t\tstateTime += delta;\r\n\t}\r\n\t\r\n\tpublic void setStateTime(float stateTime) {\r\n\t\tthis.stateTime = stateTime;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Reset the state time to 0 to restart the animation.\r\n\t */\r\n\tpublic void resetStateTime() {\r\n\t\tstateTime = 0;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Set the animation state time to the end of the animation.\r\n\t */\r\n\tpublic void endAnimation() {\r\n\t\tstateTime = animation.getAnimationDuration();\r\n\t}\r\n\t\r\n\tpublic void setPlayMode(PlayMode playMode) {\r\n\t\tanimation.setPlayMode(playMode);\r\n\t}\r\n\t\r\n\t/**\r\n\t * Get the {@link Animation} that this object holds.\r\n\t */\r\n\tpublic Animation&lt;T&gt; getAnimation() {\r\n\t\treturn animation;\r\n\t}\r\n\t\r\n\tpublic boolean isAnimationFinished() {\r\n\t\treturn animation.isAnimationFinished(stateTime);\r\n\t}\r\n\t\r\n\tpublic float getAnimationDuration() {\r\n\t\treturn animation.getAnimationDuration();\r\n\t}\r\n\t\r\n\t/**\r\n\t * Flip all key frames of the animation.\r\n\t */\r\n\tpublic void flip(boolean x, boolean y) {\r\n\t\tfor (TextureRegion region : animation.getKeyFrames()) {\r\n\t\t\tregion.flip(x, y);\r\n\t\t}\r\n\t}\r\n\t\r\n\tpublic AnimationSpriteConfig getSpriteConfig() {\r\n\t\treturn spriteConfig;\r\n\t}\r\n\t\r\n\tpublic void setSpriteConfig(AnimationSpriteConfig spriteConfig) {\r\n\t\tthis.spriteConfig = spriteConfig;\r\n\t}\r\n\t\r\n\tpublic AnimationSpriteConfig getSpriteConfigCopy() {\r\n\t\treturn new AnimationSpriteConfig(spriteConfig);\r\n\t}\r\n}\r\n```\r\n**AnimationSpriteConfig**\r\n```\r\nimport com.badlogic.gdx.graphics.g2d.Sprite;\r\n\r\npublic class AnimationSpriteConfig {\r\n\t\r\n\tpublic static AnimationSpriteConfig fromSprite(Sprite sprite) {\r\n\t\tAnimationSpriteConfig spriteConfig = new AnimationSpriteConfig();\r\n\t\tspriteConfig.width = sprite.getWidth();\r\n\t\tspriteConfig.height = sprite.getHeight();\r\n\t\tspriteConfig.x = sprite.getX();\r\n\t\tspriteConfig.y = sprite.getY();\r\n\t\t\r\n\t\treturn spriteConfig;\r\n\t}\r\n\t\r\n\tpublic AnimationSpriteConfig() {}\r\n\t\r\n\tpublic AnimationSpriteConfig(AnimationSpriteConfig spriteConfig) {\r\n\t\tthis.x = spriteConfig.x;\r\n\t\tthis.y = spriteConfig.y;\r\n\t\tthis.width = spriteConfig.width;\r\n\t\tthis.height = spriteConfig.height;\r\n\t}\r\n\t\r\n\tpublic float x;\r\n\tpublic float y;\r\n\tpublic float width;\r\n\tpublic float height;\r\n\t\r\n\tpublic AnimationSpriteConfig setX(float x) {\r\n\t\tthis.x = x;\r\n\t\treturn this;\r\n\t}\r\n\t\r\n\tpublic AnimationSpriteConfig setY(float y) {\r\n\t\tthis.y = y;\r\n\t\treturn this;\r\n\t}\r\n\t\r\n\tpublic AnimationSpriteConfig setWidth(float width) {\r\n\t\tthis.width = width;\r\n\t\treturn this;\r\n\t}\r\n\t\r\n\tpublic AnimationSpriteConfig setHeight(float height) {\r\n\t\tthis.height = height;\r\n\t\treturn this;\r\n\t}\r\n}\r\n```","title":"Is there a general method for calculating the end of an animation and switching between animations when they are finished?","body":"<p>If you use the <a href=\"https://libgdx.badlogicgames.com/ci/nightlies/docs/api/com/badlogic/gdx/graphics/g2d/Animation.html#getAnimationDuration--\" rel=\"nofollow noreferrer\">Animation</a> class from libGDX you can use these methods (from the API):</p>\n<ul>\n<li><a href=\"https://libgdx.badlogicgames.com/ci/nightlies/docs/api/com/badlogic/gdx/graphics/g2d/Animation.html#getAnimationDuration--\" rel=\"nofollow noreferrer\">getAnimationDuration</a>: the duration of the entire animation, number of frames times frame duration, in seconds</li>\n<li><a href=\"https://libgdx.badlogicgames.com/ci/nightlies/docs/api/com/badlogic/gdx/graphics/g2d/Animation.html#isAnimationFinished-float-\" rel=\"nofollow noreferrer\">isAnimationFinished(float)</a>: Whether the animation would be finished if played without looping (PlayMode#NORMAL), given the state time.</li>\n</ul>\n<p>So all you need to know is the current <code>stateTime</code>, that is calculated like you already have done in you pseudocode:</p>\n<pre><code>public void draw(float deltaTime) {\n    stateTime += deltaTime;\n    \n    //...\n}\n</code></pre>\n<p>For a further introduction on how to use the libGDX animations, see <a href=\"https://github.com/libgdx/libgdx/wiki/2D-Animation\" rel=\"nofollow noreferrer\">this tutorial</a>.</p>\n<hr>\n<p>In one of my projects I use a wrapper class for some additional functionality. If you want to use it you can find it on <a href=\"https://github.com/tfassbender/DwarfScrollerGDX/blob/master/core/src/net/jfabricationgames/gdx/animation/AnimationDirector.java\" rel=\"nofollow noreferrer\">GitHub</a>, or use the current version of it:</p>\n<p><strong>AnimationDirector</strong></p>\n<pre><code>import com.badlogic.gdx.graphics.g2d.Animation;\nimport com.badlogic.gdx.graphics.g2d.Animation.PlayMode;\n\nimport net.jfabricationgames.gdx.screens.game.GameScreen;\n\nimport com.badlogic.gdx.graphics.g2d.SpriteBatch;\nimport com.badlogic.gdx.graphics.g2d.TextureRegion;\n\npublic class AnimationDirector&lt;T extends TextureRegion&gt; {\n    \n    public static boolean isTextureRight(boolean initialAnimationDirectionIsRight, AnimationDirector&lt;TextureRegion&gt; animation) {\n        return initialAnimationDirectionIsRight != animation.getKeyFrame().isFlipX();\n    }\n    \n    public static boolean isTextureLeft(boolean initialAnimationDirectionIsRight, AnimationDirector&lt;TextureRegion&gt; animation) {\n        return initialAnimationDirectionIsRight == animation.getKeyFrame().isFlipX();\n    }\n    \n    private float stateTime;\n    private Animation&lt;T&gt; animation;\n    \n    private AnimationSpriteConfig spriteConfig;\n    \n    public AnimationDirector(Animation&lt;T&gt; animation) {\n        this.animation = animation;\n        initializeSpriteConfigWithoutPosition();\n    }\n    \n    protected void initializeSpriteConfigWithoutPosition() {\n        T keyFrame = animation.getKeyFrame(0);\n        spriteConfig = new AnimationSpriteConfig().setWidth(keyFrame.getRegionWidth()).setHeight(keyFrame.getRegionHeight());\n    }\n    \n    /**\n     * Draw the current key frame of this animation onto the {@link SpriteBatch}.&lt;br&gt;\n     * ATTENTION: This method will throw an {@link IllegalStateException} if this AnimationDirector does not contain an AnimationSpriteConfig object.\n     */\n    public void draw(SpriteBatch batch) {\n        if (spriteConfig == null) {\n            throw new IllegalStateException(&quot;No AnimationSpriteConfig. Please add an AnimationSpriteConfig in order to use the draw method&quot;);\n        }\n        T keyFrame = getKeyFrame();\n        float x = spriteConfig.x + ((spriteConfig.width - keyFrame.getRegionWidth()) * GameScreen.WORLD_TO_SCREEN * 0.5f);\n        float y = spriteConfig.y + ((spriteConfig.height - keyFrame.getRegionHeight()) * GameScreen.WORLD_TO_SCREEN * 0.5f);\n        batch.draw(keyFrame, x, y, spriteConfig.width * 0.5f, spriteConfig.height * 0.5f, keyFrame.getRegionWidth(), keyFrame.getRegionHeight(),\n                GameScreen.WORLD_TO_SCREEN, GameScreen.WORLD_TO_SCREEN, 0f);\n    }\n    \n    public void drawInMenu(SpriteBatch batch) {\n        if (spriteConfig == null) {\n            throw new IllegalStateException(&quot;No AnimationSpriteConfig. Please add an AnimationSpriteConfig in order to use the draw method&quot;);\n        }\n        \n        T keyFrame = getKeyFrame();\n        batch.draw(keyFrame, spriteConfig.x, spriteConfig.y, spriteConfig.width, spriteConfig.height);\n    }\n    \n    /**\n     * Get the frame at the current time.\n     */\n    public T getKeyFrame() {\n        return animation.getKeyFrame(stateTime);\n    }\n    \n    public float getStateTime() {\n        return stateTime;\n    }\n    \n    public void increaseStateTime(float delta) {\n        stateTime += delta;\n    }\n    \n    public void setStateTime(float stateTime) {\n        this.stateTime = stateTime;\n    }\n    \n    /**\n     * Reset the state time to 0 to restart the animation.\n     */\n    public void resetStateTime() {\n        stateTime = 0;\n    }\n    \n    /**\n     * Set the animation state time to the end of the animation.\n     */\n    public void endAnimation() {\n        stateTime = animation.getAnimationDuration();\n    }\n    \n    public void setPlayMode(PlayMode playMode) {\n        animation.setPlayMode(playMode);\n    }\n    \n    /**\n     * Get the {@link Animation} that this object holds.\n     */\n    public Animation&lt;T&gt; getAnimation() {\n        return animation;\n    }\n    \n    public boolean isAnimationFinished() {\n        return animation.isAnimationFinished(stateTime);\n    }\n    \n    public float getAnimationDuration() {\n        return animation.getAnimationDuration();\n    }\n    \n    /**\n     * Flip all key frames of the animation.\n     */\n    public void flip(boolean x, boolean y) {\n        for (TextureRegion region : animation.getKeyFrames()) {\n            region.flip(x, y);\n        }\n    }\n    \n    public AnimationSpriteConfig getSpriteConfig() {\n        return spriteConfig;\n    }\n    \n    public void setSpriteConfig(AnimationSpriteConfig spriteConfig) {\n        this.spriteConfig = spriteConfig;\n    }\n    \n    public AnimationSpriteConfig getSpriteConfigCopy() {\n        return new AnimationSpriteConfig(spriteConfig);\n    }\n}\n</code></pre>\n<p><strong>AnimationSpriteConfig</strong></p>\n<pre><code>import com.badlogic.gdx.graphics.g2d.Sprite;\n\npublic class AnimationSpriteConfig {\n    \n    public static AnimationSpriteConfig fromSprite(Sprite sprite) {\n        AnimationSpriteConfig spriteConfig = new AnimationSpriteConfig();\n        spriteConfig.width = sprite.getWidth();\n        spriteConfig.height = sprite.getHeight();\n        spriteConfig.x = sprite.getX();\n        spriteConfig.y = sprite.getY();\n        \n        return spriteConfig;\n    }\n    \n    public AnimationSpriteConfig() {}\n    \n    public AnimationSpriteConfig(AnimationSpriteConfig spriteConfig) {\n        this.x = spriteConfig.x;\n        this.y = spriteConfig.y;\n        this.width = spriteConfig.width;\n        this.height = spriteConfig.height;\n    }\n    \n    public float x;\n    public float y;\n    public float width;\n    public float height;\n    \n    public AnimationSpriteConfig setX(float x) {\n        this.x = x;\n        return this;\n    }\n    \n    public AnimationSpriteConfig setY(float y) {\n        this.y = y;\n        return this;\n    }\n    \n    public AnimationSpriteConfig setWidth(float width) {\n        this.width = width;\n        return this;\n    }\n    \n    public AnimationSpriteConfig setHeight(float height) {\n        this.height = height;\n        return this;\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":10971775,"reputation":1,"user_id":8061799,"display_name":"user123546863"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":262,"favorite_count":0,"down_vote_count":11,"up_vote_count":0,"answer_count":1,"score":-11,"last_activity_date":1695757857,"creation_date":1628144299,"question_id":68661514,"body_markdown":"I&#39;m working on a game that has animations with non uniform key frames so that things like start up, active, and recovery frames can be changed for balance purposes. I have looping animations such as idle and walking that loop fairly smoothly however attacking animations that only play once are very stuttery and sometimes play multiple times.\r\n\r\nI&#39;ve tried the following calculations to no help in pseudo ish code\r\n\r\n```\r\nin animation class:\r\nisAnimationFinished(float time)\r\n    return (time / animationLength) &gt;= 0.95\r\n    // Note: 0.95 seemed like a good value as it seemed that the last frame in any animation\r\n    // would result in a value between 0.95 and 0.99 when used in this calculation. \r\n\r\n// frameTimes is an array of floats that stores the amount of time, in milliseconds,\r\n// that a key frame should be drawn for. \r\n// One example of an array used is:\r\nfloat[] jabFrames = {\r\n    FRAME * frameData[0].getStartUpFrames(), FRAME * frameData[0].getActiveFrames(),\r\n    FRAME * frameData[0].getRecoveryFrames()\r\n};\r\n// Where FRAME is a float of 1/60f and frameData is an int array\r\n\r\ngetAnimationDuration()\r\n    sum = 0.0\r\n    for each floatValue in frameTimes:\r\n        sum += floatValue \r\n    return sum\r\n\r\n...\r\n\r\nin the pawn class&#39;s draw function:\r\n\r\ndraw(deltaTime):\r\n    stateTime += deltaTime (time since last render)\r\n\r\n    get the animation based on the animation_state\r\n\r\n    if(animation_state is JAB and animation.isAnimationFinished(stateTime))\r\n        animation_state = IDLE\r\n\r\n    if(stateTime &gt;= animation.getAnimationDuration())\r\n        stateTime -= animation.getAnimationDuration()\r\n\r\n    drawAnimation()","title":"Is there a general method for calculating the end of an animation and switching between animations when they are finished?","body":"<p>I'm working on a game that has animations with non uniform key frames so that things like start up, active, and recovery frames can be changed for balance purposes. I have looping animations such as idle and walking that loop fairly smoothly however attacking animations that only play once are very stuttery and sometimes play multiple times.</p>\n<p>I've tried the following calculations to no help in pseudo ish code</p>\n<pre><code>in animation class:\nisAnimationFinished(float time)\n    return (time / animationLength) &gt;= 0.95\n    // Note: 0.95 seemed like a good value as it seemed that the last frame in any animation\n    // would result in a value between 0.95 and 0.99 when used in this calculation. \n\n// frameTimes is an array of floats that stores the amount of time, in milliseconds,\n// that a key frame should be drawn for. \n// One example of an array used is:\nfloat[] jabFrames = {\n    FRAME * frameData[0].getStartUpFrames(), FRAME * frameData[0].getActiveFrames(),\n    FRAME * frameData[0].getRecoveryFrames()\n};\n// Where FRAME is a float of 1/60f and frameData is an int array\n\ngetAnimationDuration()\n    sum = 0.0\n    for each floatValue in frameTimes:\n        sum += floatValue \n    return sum\n\n...\n\nin the pawn class's draw function:\n\ndraw(deltaTime):\n    stateTime += deltaTime (time since last render)\n\n    get the animation based on the animation_state\n\n    if(animation_state is JAB and animation.isAnimationFinished(stateTime))\n        animation_state = IDLE\n\n    if(stateTime &gt;= animation.getAnimationDuration())\n        stateTime -= animation.getAnimationDuration()\n\n    drawAnimation()\n</code></pre>\n"},{"tags":["java","spring"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1695475841,"post_id":77163031,"comment_id":136031071,"body_markdown":"Not a practical strategy really. You&#39;re better off storing them in the file system and storing their *paths* in your persistence layer","body":"Not a practical strategy really. You&#39;re better off storing them in the file system and storing their <i>paths</i> in your persistence layer"},{"owner":{"account_id":449256,"reputation":2122,"user_id":843943,"accept_rate":75,"display_name":"Grim"},"score":1,"creation_date":1695486092,"post_id":77163031,"comment_id":136032107,"body_markdown":"`@PostMapping(&quot;board/writepro&quot;)` should use the consumes-value to accept `application/x-www-form-urlencoded`.","body":"<code>@PostMapping(&quot;board&#47;writepro&quot;)</code> should use the consumes-value to accept <code>application&#47;x-www-form-urlencoded</code>."},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":1,"creation_date":1695496021,"post_id":77163031,"comment_id":136033281,"body_markdown":"Please trim your code to make it easier to find your problem. Follow these guidelines to create a [minimal reproducible example](https://stackoverflow.com/help/minimal-reproducible-example).","body":"Please trim your code to make it easier to find your problem. Follow these guidelines to create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."},{"owner":{"account_id":16744354,"reputation":504,"user_id":12103109,"display_name":"CaptainAye"},"score":0,"creation_date":1695498252,"post_id":77163031,"comment_id":136033477,"body_markdown":"In order to send images via rest, use multipart/form-data instead of application/x-www-form-urlencoded. Take a look at https://www.baeldung.com/sprint-boot-multipart-requests for hints","body":"In order to send images via rest, use multipart/form-data instead of application/x-www-form-urlencoded. Take a look at <a href=\"https://www.baeldung.com/sprint-boot-multipart-requests\" rel=\"nofollow noreferrer\">baeldung.com/sprint-boot-multipart-requests</a> for hints"}],"owner":{"account_id":29505376,"reputation":11,"user_id":22611453,"display_name":"박진후"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1695755640,"creation_date":1695472141,"question_id":77163031,"body_markdown":"I&#39;m working on a web application, and I&#39;m trying to send a `POST` request to a specific endpoint (`/board/writepro`). However, I&#39;m encountering the following error message:\r\nI&#39;m using `Spring`, and I&#39;m getting an error message that says:\r\n \r\n\r\n&gt; Content-Type &#39;application/x-www-form-urlencoded;charset=UTF-8&#39; is not\r\n&gt; supported\r\n\r\n when making a `POST` request. How can I resolve this issue? Here&#39;s my `controller` class:\r\nI am working with a `React` user on a project\r\n\r\n```\r\npackage org.polyproject.fishinghubpro.controller;\r\n\r\n\r\nimport jakarta.transaction.Transactional;\r\nimport lombok.extern.slf4j.Slf4j;\r\nimport org.polyproject.fishinghubpro.dto.BoardDto;\r\nimport org.polyproject.fishinghubpro.entity.Board;\r\nimport org.polyproject.fishinghubpro.service.BoardService;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.data.domain.Page;\r\nimport org.springframework.data.domain.Pageable;\r\nimport org.springframework.data.domain.Sort;\r\nimport org.springframework.data.web.PageableDefault;\r\nimport org.springframework.http.HttpStatus;\r\nimport org.springframework.http.ResponseEntity;\r\nimport org.springframework.stereotype.Controller;\r\nimport org.springframework.ui.Model;\r\nimport org.springframework.web.bind.annotation.*;\r\nimport org.springframework.web.multipart.MultipartFile;\r\n\r\nimport java.security.Principal;\r\nimport java.util.List;\r\n\r\n@RestController\r\n@CrossOrigin(&quot;*&quot;)\r\n@Transactional\r\n@Slf4j\r\npublic class BoardController {\r\n\r\n\r\n    @Autowired\r\n    private BoardService boardService;\r\n\r\n    @GetMapping(&quot;/board/write&quot;)//localhost:8090/board/write\r\n    public String boardWriteForm(){\r\n\r\n        return &quot;boardwrite&quot;;\r\n    }\r\n\r\n    //원본\r\n    @PostMapping(&quot;board/writepro&quot;)\r\n    public ResponseEntity&lt;BoardDto&gt; boardWritePro(@RequestBody Board board, MultipartFile file, Principal principal) throws Exception {\r\n        String userId = principal.getName();\r\n\r\n        // boardService.write 메서드로 게시글을 작성하고 게시글 정보를 받아옴\r\n        BoardDto createdBoard = boardService.write(board, file, userId);\r\n\r\n        // ResponseEntity로 커스텀 응답을 생성하고, 상태 코드와 함께 반환\r\n        return new ResponseEntity&lt;&gt;(createdBoard, HttpStatus.CREATED); // 수정: response 대신 createdBoard 반환\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n@GetMapping(&quot;/board/list&quot;)\r\npublic ResponseEntity&lt;List&lt;Board&gt;&gt; boardList(@PageableDefault(page = 0, size = 10, sort = &quot;id&quot;, direction = Sort.Direction.DESC) Pageable pageable) {\r\n    Page&lt;Board&gt; list = boardService.boardList(pageable);\r\n\r\n    // 게시글 목록을 리스트로 변환\r\n    List&lt;Board&gt; boardList = list.getContent();\r\n\r\n    // ResponseEntity를 사용하여 JSON 형식으로 데이터 반환\r\n    return new ResponseEntity&lt;&gt;(boardList, HttpStatus.OK);\r\n}\r\n\r\n    @GetMapping(&quot;/board/view&quot;)//localhost:8080/board/view?id=1\r\n    public String boardView(Model model, Integer id){\r\n\r\n\r\n        model.addAttribute(&quot;board&quot;,boardService.boardView(id));\r\n        return &quot;boardview&quot;;\r\n    }\r\n    @DeleteMapping(&quot;/board/{id}&quot;)\r\n    public ResponseEntity&lt;String&gt; deleteBoard(@PathVariable(&quot;id&quot;) Integer id) {\r\n        try {\r\n            // 게시글 삭제를 시도합니다.\r\n            boardService.boardDelete(id);\r\n\r\n            // 게시글이 성공적으로 삭제되었을 때의 응답입니다.\r\n            return ResponseEntity.noContent().build();\r\n        } catch (Exception e) {\r\n            // 게시글 삭제 중 오류가 발생했을 때의 응답입니다.\r\n            return ResponseEntity.status(HttpStatus.INTERNAL_SERVER_ERROR).body(&quot;게시글 삭제 중 오류가 발생했습니다.&quot;);\r\n        }\r\n    }\r\n\r\n\r\n    @GetMapping(&quot;/board/modify/{id}&quot;)\r\n    public String boardModify(@PathVariable(&quot;id&quot;)Integer id,Model model){\r\n\r\n        model.addAttribute(&quot;board&quot;,boardService.boardView(id));\r\n        return &quot;boardmodify&quot;;\r\n    }\r\n    @PostMapping(&quot;/board/update/&quot;)\r\n    public String boardUpdate(@RequestBody BoardDto board, Principal principal)throws Exception {\r\n        log.info(&quot;지나갑니다!~!==={}&quot;,board.getId());\r\n        String userId = principal.getName();    //게시글을 쓴 애의 아이디.\r\n        Board boardTemp = boardService.boardView(board.getId());   //기존에 저장된 게시글 가져오기\r\n\r\n        //기존에 저장된 게시글에 새로 들어온 데이터로 수정 해주는 구문.\r\n        boardTemp.setTitle(board.getTitle());   //dirtyChecking으로 변경감지로 수정. 따로 저장 구문 필요 없음.\r\n        boardTemp.setContent(board.getContent());\r\n//        boardService.write(boardTemp, file, userId); // 수정된 내용을 저장\r\n        return &quot;수정되었습니다.&quot;;\r\n    }\r\n\r\n}\r\n\r\n```\r\n\r\n```\r\npackage org.polyproject.fishinghubpro.dto;\r\n\r\nimport lombok.Builder;\r\nimport lombok.Data;\r\nimport lombok.Getter;\r\nimport lombok.Setter;\r\nimport org.polyproject.fishinghubpro.entity.BaseEntity;\r\n\r\nimport java.util.Date;\r\n\r\n@Data\r\n@Builder\r\npublic class BoardDto {\r\n\r\n    @Setter@Getter\r\n    private int id;\r\n    private String title;\r\n    private String content;\r\n    private String filename;\r\n    private String filepath;\r\n    private Date createdAt;\r\n    private String memberNick; // 회원 닉네임\r\n\r\n    // 생성자, getter, setter 생략\r\n}\r\n```\r\n\r\n```\r\npackage org.polyproject.fishinghubpro.entity;\r\n\r\nimport com.fasterxml.jackson.annotation.JsonIgnore;\r\nimport jakarta.persistence.*;\r\nimport lombok.Builder;\r\nimport lombok.Data;\r\nimport lombok.ToString;\r\nimport org.hibernate.annotations.CreationTimestamp;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.Date;\r\nimport java.util.List;\r\n\r\n@Entity\r\n@Data\r\npublic class Board{\r\n\r\n    @Id\r\n    @GeneratedValue(strategy= GenerationType.IDENTITY)\r\n    private Integer id;\r\n\r\n    private String title;\r\n\r\n    @Column(columnDefinition = &quot;TEXT&quot;, nullable = false) // content를 TEXT 타입으로 설정하고 NOT NULL 제약 조건 추가\r\n    private  String content;\r\n\r\n    @Column(length = 15000 )\r\n    private String filename;\r\n\r\n    @Column(length = 30000 )\r\n    private String filepath;\r\n\r\n    @CreationTimestamp\r\n    @Temporal(TemporalType.TIMESTAMP)\r\n    @Column(name = &quot;created_at&quot;, nullable = false, updatable = false)\r\n    private Date createdAt;\r\n\r\n    @ManyToOne\r\n    @ToString.Exclude\r\n    @JoinColumn(name=&quot;user_no&quot;)\r\n    private Member member;\r\n}\r\n\r\n```\r\n\r\n```\r\npackage org.polyproject.fishinghubpro.repository;\r\n\r\nimport jakarta.transaction.Transactional;\r\nimport org.polyproject.fishinghubpro.entity.Board;\r\nimport org.polyproject.fishinghubpro.entity.Member;\r\nimport org.springframework.data.jpa.repository.JpaRepository;\r\nimport org.springframework.stereotype.Repository;\r\n\r\nimport java.util.Optional;\r\n\r\n@Repository\r\n@Transactional\r\npublic interface BoardRepository  extends JpaRepository &lt;Board, Integer&gt; {\r\n}\r\n\r\n```\r\n\r\n\r\n```\r\n    package org.polyproject.fishinghubpro.service;\r\n\r\n    import jakarta.transaction.Transactional;\r\n    import org.polyproject.fishinghubpro.dto.BoardDto;\r\n    import org.polyproject.fishinghubpro.entity.Board;\r\n    import org.polyproject.fishinghubpro.entity.Member;\r\n    import org.polyproject.fishinghubpro.repository.BoardRepository;\r\n    import org.polyproject.fishinghubpro.repository.member.MemberRepository;\r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.data.domain.Page;\r\n    import org.springframework.data.domain.Pageable;\r\n    import org.springframework.stereotype.Service;\r\n    import org.springframework.web.multipart.MultipartFile;\r\n\r\n    import java.util.Date;\r\n    import java.io.File;\r\n    import java.util.List;\r\n    import java.util.UUID;\r\n\r\n\r\n\r\n    @Service\r\n    @Transactional\r\n    public class BoardService {\r\n\r\n\r\n\r\n            @Autowired\r\n            private BoardRepository boardRepository;\r\n\r\n            @Autowired\r\n            private MemberRepository memberRepository;\r\n\r\n  \r\n\r\n            //게시글 리스트 처리\r\n            public Page&lt;Board&gt;boardList(Pageable pageable){\r\n\r\n                return boardRepository.findAll(pageable);\r\n\r\n\r\n            }\r\n            //특정 게시글 불러오기\r\n        public Board boardView(Integer id) {\r\n\r\n            return boardRepository.findById(id).get();\r\n\r\n        }\r\n        //특정게시글 삭제\r\n        public void boardDelete(Integer id){\r\n\r\n                boardRepository.deleteById(id);\r\n        }\r\n\r\n        // 게시글 작성 메서드\r\n        public BoardDto write(Board board, MultipartFile file, String userId) throws Exception {\r\n            Member member = memberRepository.findByUserId(userId).orElse(null);\r\n\r\n            if (board.getContent() != null &amp;&amp; !board.getContent().isEmpty()) {\r\n    //            // 생성 날짜 설정\r\n    //            board.setCreatedAt(new Date());\r\n                // 파일 저장 경로 설정\r\n                String projectPath = System.getProperty(&quot;user.dir&quot;) + &quot;/src/main/resources/static/files&quot;;\r\n                // UUID를 사용하여 파일명 중복 방지\r\n                UUID uuid = UUID.randomUUID();\r\n\r\n                // 파일이 업로드되었을 때만 파일 처리\r\n                if (file != null &amp;&amp; !file.isEmpty()) {\r\n                    String fileName = uuid + &quot;_&quot; + file.getOriginalFilename();\r\n                    File saveFile = new File(projectPath, fileName);\r\n                    file.transferTo(saveFile);\r\n                    board.setFilename(fileName);\r\n                    board.setFilepath(&quot;/files/&quot; + fileName); // 파일 경로 동적 설정\r\n                }\r\n                board.setMember(member);\r\n\r\n                Board savedBoard = boardRepository.save(board); // 데이터베이스에 저장\r\n\r\n                // 게시글과 회원 닉네임을 포함한 DTO 객체 생성\r\n                BoardDto boardDto = BoardDto.builder()\r\n                                .title(savedBoard.getTitle())\r\n                                        .content(savedBoard.getContent())\r\n                                                .filepath(savedBoard.getFilepath())\r\n                                                        .filename(savedBoard.getFilename())\r\n                                                                .build();\r\n                boardDto.setMemberNick(member.getUserNick());\r\n\r\n                return boardDto;\r\n            } else {\r\n                // 콘텐츠가 null 또는 비어 있을 경우 예외 처리\r\n                throw new Exception(&quot;게시물 내용을 입력해주세요.&quot;);\r\n            }\r\n        }\r\n        }\r\n\r\n\r\n```\r\n\r\n\r\n\r\nThank you for helping me fix this.","title":"I want to store and send images to a database using Spring","body":"<p>I'm working on a web application, and I'm trying to send a <code>POST</code> request to a specific endpoint (<code>/board/writepro</code>). However, I'm encountering the following error message:\nI'm using <code>Spring</code>, and I'm getting an error message that says:</p>\n<blockquote>\n<p>Content-Type 'application/x-www-form-urlencoded;charset=UTF-8' is not\nsupported</p>\n</blockquote>\n<p>when making a <code>POST</code> request. How can I resolve this issue? Here's my <code>controller</code> class:\nI am working with a <code>React</code> user on a project</p>\n<pre><code>package org.polyproject.fishinghubpro.controller;\n\n\nimport jakarta.transaction.Transactional;\nimport lombok.extern.slf4j.Slf4j;\nimport org.polyproject.fishinghubpro.dto.BoardDto;\nimport org.polyproject.fishinghubpro.entity.Board;\nimport org.polyproject.fishinghubpro.service.BoardService;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.data.domain.Page;\nimport org.springframework.data.domain.Pageable;\nimport org.springframework.data.domain.Sort;\nimport org.springframework.data.web.PageableDefault;\nimport org.springframework.http.HttpStatus;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.stereotype.Controller;\nimport org.springframework.ui.Model;\nimport org.springframework.web.bind.annotation.*;\nimport org.springframework.web.multipart.MultipartFile;\n\nimport java.security.Principal;\nimport java.util.List;\n\n@RestController\n@CrossOrigin(&quot;*&quot;)\n@Transactional\n@Slf4j\npublic class BoardController {\n\n\n    @Autowired\n    private BoardService boardService;\n\n    @GetMapping(&quot;/board/write&quot;)//localhost:8090/board/write\n    public String boardWriteForm(){\n\n        return &quot;boardwrite&quot;;\n    }\n\n    //원본\n    @PostMapping(&quot;board/writepro&quot;)\n    public ResponseEntity&lt;BoardDto&gt; boardWritePro(@RequestBody Board board, MultipartFile file, Principal principal) throws Exception {\n        String userId = principal.getName();\n\n        // boardService.write 메서드로 게시글을 작성하고 게시글 정보를 받아옴\n        BoardDto createdBoard = boardService.write(board, file, userId);\n\n        // ResponseEntity로 커스텀 응답을 생성하고, 상태 코드와 함께 반환\n        return new ResponseEntity&lt;&gt;(createdBoard, HttpStatus.CREATED); // 수정: response 대신 createdBoard 반환\n    }\n\n\n\n\n\n@GetMapping(&quot;/board/list&quot;)\npublic ResponseEntity&lt;List&lt;Board&gt;&gt; boardList(@PageableDefault(page = 0, size = 10, sort = &quot;id&quot;, direction = Sort.Direction.DESC) Pageable pageable) {\n    Page&lt;Board&gt; list = boardService.boardList(pageable);\n\n    // 게시글 목록을 리스트로 변환\n    List&lt;Board&gt; boardList = list.getContent();\n\n    // ResponseEntity를 사용하여 JSON 형식으로 데이터 반환\n    return new ResponseEntity&lt;&gt;(boardList, HttpStatus.OK);\n}\n\n    @GetMapping(&quot;/board/view&quot;)//localhost:8080/board/view?id=1\n    public String boardView(Model model, Integer id){\n\n\n        model.addAttribute(&quot;board&quot;,boardService.boardView(id));\n        return &quot;boardview&quot;;\n    }\n    @DeleteMapping(&quot;/board/{id}&quot;)\n    public ResponseEntity&lt;String&gt; deleteBoard(@PathVariable(&quot;id&quot;) Integer id) {\n        try {\n            // 게시글 삭제를 시도합니다.\n            boardService.boardDelete(id);\n\n            // 게시글이 성공적으로 삭제되었을 때의 응답입니다.\n            return ResponseEntity.noContent().build();\n        } catch (Exception e) {\n            // 게시글 삭제 중 오류가 발생했을 때의 응답입니다.\n            return ResponseEntity.status(HttpStatus.INTERNAL_SERVER_ERROR).body(&quot;게시글 삭제 중 오류가 발생했습니다.&quot;);\n        }\n    }\n\n\n    @GetMapping(&quot;/board/modify/{id}&quot;)\n    public String boardModify(@PathVariable(&quot;id&quot;)Integer id,Model model){\n\n        model.addAttribute(&quot;board&quot;,boardService.boardView(id));\n        return &quot;boardmodify&quot;;\n    }\n    @PostMapping(&quot;/board/update/&quot;)\n    public String boardUpdate(@RequestBody BoardDto board, Principal principal)throws Exception {\n        log.info(&quot;지나갑니다!~!==={}&quot;,board.getId());\n        String userId = principal.getName();    //게시글을 쓴 애의 아이디.\n        Board boardTemp = boardService.boardView(board.getId());   //기존에 저장된 게시글 가져오기\n\n        //기존에 저장된 게시글에 새로 들어온 데이터로 수정 해주는 구문.\n        boardTemp.setTitle(board.getTitle());   //dirtyChecking으로 변경감지로 수정. 따로 저장 구문 필요 없음.\n        boardTemp.setContent(board.getContent());\n//        boardService.write(boardTemp, file, userId); // 수정된 내용을 저장\n        return &quot;수정되었습니다.&quot;;\n    }\n\n}\n\n</code></pre>\n<pre><code>package org.polyproject.fishinghubpro.dto;\n\nimport lombok.Builder;\nimport lombok.Data;\nimport lombok.Getter;\nimport lombok.Setter;\nimport org.polyproject.fishinghubpro.entity.BaseEntity;\n\nimport java.util.Date;\n\n@Data\n@Builder\npublic class BoardDto {\n\n    @Setter@Getter\n    private int id;\n    private String title;\n    private String content;\n    private String filename;\n    private String filepath;\n    private Date createdAt;\n    private String memberNick; // 회원 닉네임\n\n    // 생성자, getter, setter 생략\n}\n</code></pre>\n<pre><code>package org.polyproject.fishinghubpro.entity;\n\nimport com.fasterxml.jackson.annotation.JsonIgnore;\nimport jakarta.persistence.*;\nimport lombok.Builder;\nimport lombok.Data;\nimport lombok.ToString;\nimport org.hibernate.annotations.CreationTimestamp;\n\nimport java.util.ArrayList;\nimport java.util.Date;\nimport java.util.List;\n\n@Entity\n@Data\npublic class Board{\n\n    @Id\n    @GeneratedValue(strategy= GenerationType.IDENTITY)\n    private Integer id;\n\n    private String title;\n\n    @Column(columnDefinition = &quot;TEXT&quot;, nullable = false) // content를 TEXT 타입으로 설정하고 NOT NULL 제약 조건 추가\n    private  String content;\n\n    @Column(length = 15000 )\n    private String filename;\n\n    @Column(length = 30000 )\n    private String filepath;\n\n    @CreationTimestamp\n    @Temporal(TemporalType.TIMESTAMP)\n    @Column(name = &quot;created_at&quot;, nullable = false, updatable = false)\n    private Date createdAt;\n\n    @ManyToOne\n    @ToString.Exclude\n    @JoinColumn(name=&quot;user_no&quot;)\n    private Member member;\n}\n\n</code></pre>\n<pre><code>package org.polyproject.fishinghubpro.repository;\n\nimport jakarta.transaction.Transactional;\nimport org.polyproject.fishinghubpro.entity.Board;\nimport org.polyproject.fishinghubpro.entity.Member;\nimport org.springframework.data.jpa.repository.JpaRepository;\nimport org.springframework.stereotype.Repository;\n\nimport java.util.Optional;\n\n@Repository\n@Transactional\npublic interface BoardRepository  extends JpaRepository &lt;Board, Integer&gt; {\n}\n\n</code></pre>\n<pre><code>    package org.polyproject.fishinghubpro.service;\n\n    import jakarta.transaction.Transactional;\n    import org.polyproject.fishinghubpro.dto.BoardDto;\n    import org.polyproject.fishinghubpro.entity.Board;\n    import org.polyproject.fishinghubpro.entity.Member;\n    import org.polyproject.fishinghubpro.repository.BoardRepository;\n    import org.polyproject.fishinghubpro.repository.member.MemberRepository;\n    import org.springframework.beans.factory.annotation.Autowired;\n    import org.springframework.data.domain.Page;\n    import org.springframework.data.domain.Pageable;\n    import org.springframework.stereotype.Service;\n    import org.springframework.web.multipart.MultipartFile;\n\n    import java.util.Date;\n    import java.io.File;\n    import java.util.List;\n    import java.util.UUID;\n\n\n\n    @Service\n    @Transactional\n    public class BoardService {\n\n\n\n            @Autowired\n            private BoardRepository boardRepository;\n\n            @Autowired\n            private MemberRepository memberRepository;\n\n  \n\n            //게시글 리스트 처리\n            public Page&lt;Board&gt;boardList(Pageable pageable){\n\n                return boardRepository.findAll(pageable);\n\n\n            }\n            //특정 게시글 불러오기\n        public Board boardView(Integer id) {\n\n            return boardRepository.findById(id).get();\n\n        }\n        //특정게시글 삭제\n        public void boardDelete(Integer id){\n\n                boardRepository.deleteById(id);\n        }\n\n        // 게시글 작성 메서드\n        public BoardDto write(Board board, MultipartFile file, String userId) throws Exception {\n            Member member = memberRepository.findByUserId(userId).orElse(null);\n\n            if (board.getContent() != null &amp;&amp; !board.getContent().isEmpty()) {\n    //            // 생성 날짜 설정\n    //            board.setCreatedAt(new Date());\n                // 파일 저장 경로 설정\n                String projectPath = System.getProperty(&quot;user.dir&quot;) + &quot;/src/main/resources/static/files&quot;;\n                // UUID를 사용하여 파일명 중복 방지\n                UUID uuid = UUID.randomUUID();\n\n                // 파일이 업로드되었을 때만 파일 처리\n                if (file != null &amp;&amp; !file.isEmpty()) {\n                    String fileName = uuid + &quot;_&quot; + file.getOriginalFilename();\n                    File saveFile = new File(projectPath, fileName);\n                    file.transferTo(saveFile);\n                    board.setFilename(fileName);\n                    board.setFilepath(&quot;/files/&quot; + fileName); // 파일 경로 동적 설정\n                }\n                board.setMember(member);\n\n                Board savedBoard = boardRepository.save(board); // 데이터베이스에 저장\n\n                // 게시글과 회원 닉네임을 포함한 DTO 객체 생성\n                BoardDto boardDto = BoardDto.builder()\n                                .title(savedBoard.getTitle())\n                                        .content(savedBoard.getContent())\n                                                .filepath(savedBoard.getFilepath())\n                                                        .filename(savedBoard.getFilename())\n                                                                .build();\n                boardDto.setMemberNick(member.getUserNick());\n\n                return boardDto;\n            } else {\n                // 콘텐츠가 null 또는 비어 있을 경우 예외 처리\n                throw new Exception(&quot;게시물 내용을 입력해주세요.&quot;);\n            }\n        }\n        }\n\n\n</code></pre>\n<p>Thank you for helping me fix this.</p>\n"},{"tags":["java","function","lambda","monads"],"comments":[{"owner":{"account_id":401843,"reputation":89768,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1695143747,"post_id":77136616,"comment_id":135983595,"body_markdown":"A ton. `Function` does not exist in java 1.7 at all, so you can&#39;t use it (You can make your own, of course). The synax `return Monad&lt;U&gt;(val + 1);` isn&#39;t even legal java. Did you mean `return new Monad&lt;U&gt;(val + 1);` perhaps? That still doesn&#39;t work - val&#39;s type is `T`, could be anything. &quot;Anything&quot; is not guaranteed to have a meaningful interaction with &quot;+1&quot;. So that code makes no semantic sense whatsoever.","body":"A ton. <code>Function</code> does not exist in java 1.7 at all, so you can&#39;t use it (You can make your own, of course). The synax <code>return Monad&lt;U&gt;(val + 1);</code> isn&#39;t even legal java. Did you mean <code>return new Monad&lt;U&gt;(val + 1);</code> perhaps? That still doesn&#39;t work - val&#39;s type is <code>T</code>, could be anything. &quot;Anything&quot; is not guaranteed to have a meaningful interaction with &quot;+1&quot;. So that code makes no semantic sense whatsoever."},{"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":0,"creation_date":1695144118,"post_id":77136616,"comment_id":135983659,"body_markdown":"Implementing Monads is harder than that, but really, you don&#39;t want to create a class called `MonadFunction`.  Really, just create your own `Function` interface and keep everything else the same.","body":"Implementing Monads is harder than that, but really, you don&#39;t want to create a class called <code>MonadFunction</code>.  Really, just create your own <code>Function</code> interface and keep everything else the same."},{"owner":{"account_id":21469747,"reputation":83,"user_id":15818978,"display_name":"toowren"},"score":0,"creation_date":1695157808,"post_id":77136616,"comment_id":135985846,"body_markdown":"Cheers. Just for now, I&#39;m not looking for val + 1 or any other operation, but a way to make lambda expressions  free code. For example,\n \n`class FunctionWithoutLambda implements Function&lt;String, Integer&gt; {\n\n  FunctionWithoutLambda() { }\n  \n  Integer apply(String string_) { return string_.length(); } \n    \n}`\n\nworks fine with at least 1.8, pretty sure that it&#39;s a generic types issue.","body":"Cheers. Just for now, I&#39;m not looking for val + 1 or any other operation, but a way to make lambda expressions  free code. For example,   <code>class FunctionWithoutLambda implements Function&lt;String, Integer&gt; {    FunctionWithoutLambda() { }      Integer apply(String string_) { return string_.length(); }       }</code>  works fine with at least 1.8, pretty sure that it&#39;s a generic types issue."},{"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"score":0,"creation_date":1695195635,"post_id":77136616,"comment_id":135990039,"body_markdown":"The `MonadFunction` class doesn’t define `T`. Please clarify: do you actually need this to work with Java 1.7 or are you just looking to make it work in 1.8 without using lambdas?","body":"The <code>MonadFunction</code> class doesn’t define <code>T</code>. Please clarify: do you actually need this to work with Java 1.7 or are you just looking to make it work in 1.8 without using lambdas?"}],"answers":[{"tags":[],"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695387574,"creation_date":1695387574,"answer_id":77157834,"question_id":77136616,"body_markdown":"If you only need to make this work in Java 8 without the use of lambdas, you can also create a class that implements `Function`:\r\n\r\n```java\r\nclass Adder implements Function&lt;Integer, Monad&lt;Integer&gt;&gt; {\r\n    private final int num;\r\n\r\n    Adder(int num) {\r\n        this.num = num;\r\n    }\r\n\r\n    @Override\r\n    public Monad&lt;Integer&gt; apply(Integer integer) {\r\n        return new Maybe&lt;&gt;(integer + num);\r\n    }\r\n}\r\n\r\npublic class MonadApp {\r\n    public static void main(String[] args) {\r\n        Maybe&lt;Integer&gt; x = new Maybe&lt;&gt;(5);\r\n        Monad&lt;Integer&gt; y = x\r\n                .bind(new Adder(1))\r\n                .bind(new Adder(2));\r\n\r\n        System.out.println( ((Maybe&lt;Integer&gt;)y).getVal() );\r\n    }\r\n}\r\n```\r\n\r\nIn this case, the definitions of `Monad` and `Maybe` are unchanged.\r\n\r\nIf it does need to work with Java 7, `java.util.function.Function` is not available, but you can easily define an identical interface yourself:\r\n\r\n```java\r\ninterface Function&lt;T, U&gt; {\r\n    U apply(T value);\r\n}\r\n```\r\n\r\nIf you use this interface instead of `java.util.function.Function`, this will work with both Java 7 and Java 8, even with lambdas.","title":"Converting java.util.Function to non-Lambda expression one in Monad example taken from Wikipedia","body":"<p>If you only need to make this work in Java 8 without the use of lambdas, you can also create a class that implements <code>Function</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>class Adder implements Function&lt;Integer, Monad&lt;Integer&gt;&gt; {\n    private final int num;\n\n    Adder(int num) {\n        this.num = num;\n    }\n\n    @Override\n    public Monad&lt;Integer&gt; apply(Integer integer) {\n        return new Maybe&lt;&gt;(integer + num);\n    }\n}\n\npublic class MonadApp {\n    public static void main(String[] args) {\n        Maybe&lt;Integer&gt; x = new Maybe&lt;&gt;(5);\n        Monad&lt;Integer&gt; y = x\n                .bind(new Adder(1))\n                .bind(new Adder(2));\n\n        System.out.println( ((Maybe&lt;Integer&gt;)y).getVal() );\n    }\n}\n</code></pre>\n<p>In this case, the definitions of <code>Monad</code> and <code>Maybe</code> are unchanged.</p>\n<p>If it does need to work with Java 7, <code>java.util.function.Function</code> is not available, but you can easily define an identical interface yourself:</p>\n<pre class=\"lang-java prettyprint-override\"><code>interface Function&lt;T, U&gt; {\n    U apply(T value);\n}\n</code></pre>\n<p>If you use this interface instead of <code>java.util.function.Function</code>, this will work with both Java 7 and Java 8, even with lambdas.</p>\n"},{"tags":[],"owner":{"account_id":30898,"reputation":8917,"user_id":84538,"accept_rate":100,"display_name":"jon hanson"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695755637,"creation_date":1695672696,"answer_id":77175461,"question_id":77136616,"body_markdown":"Your approach is flawed for a couple of reasons:\r\n\r\n 1. You can implement monadic types in Java but you can&#39;t usefully express the fact that your type is a `Monad`, because the return type of the bind method needs to be M&lt;U&gt; (M being the actual monad type), not `Monad&lt;U&gt;`. This isn&#39;t possible to express in Java due to the absence of higher-kinded types. You also can&#39;t capture the fact that the monad type needs to have a static `pure` method (sometimes called `return` or `unit`).\r\n 1. Your `MonadFunction` type isn&#39;t valid Java, as the generic type parameters, T &amp; U aren&#39;t declared (the class declaration should start with `class MonadFunction&lt;T, U&gt;`). Even if you fix that you&#39;ll then still have the above issue.\r\n\r\nHowever, you can express your `Maybe` class without recourse to Lambda functions quite easily once you throw away the `Monad` type:\r\n\r\n    class Maybe&lt;T&gt; {\r\n\r\n        private final T val;\r\n\r\n        public Maybe(T val) {\r\n            this.val = val;\r\n        }\r\n\r\n        public T getVal() {\r\n            return val;\r\n        }\r\n\r\n        public &lt;U&gt; Maybe&lt;U&gt; bind(Function&lt;T, Maybe&lt;U&gt;&gt; f) {\r\n            if (val == null)\r\n                return new Maybe&lt;U&gt;(null);\r\n            else\r\n                return f.apply(val);\r\n        }\r\n    }\r\n\r\n    public class MonadApp {\r\n        public static void main(String[] args) {\r\n            Maybe&lt;Integer&gt; x = new Maybe&lt;&gt;(5);\r\n\r\n            Maybe&lt;String&gt; y = x.bind(new Function&lt;Integer, Maybe&lt;String&gt;&gt;() {\r\n                @Override\r\n                public Maybe&lt;String&gt; apply(Integer i) {\r\n                    return i == 0 ? new Maybe&lt;&gt;(null) : new Maybe&lt;&gt;(i.toString());\r\n                }\r\n            });\r\n\r\n            System.out.println(y.getVal());\r\n        }\r\n    }","title":"Converting java.util.Function to non-Lambda expression one in Monad example taken from Wikipedia","body":"<p>Your approach is flawed for a couple of reasons:</p>\n<ol>\n<li>You can implement monadic types in Java but you can't usefully express the fact that your type is a <code>Monad</code>, because the return type of the bind method needs to be M (M being the actual monad type), not <code>Monad&lt;U&gt;</code>. This isn't possible to express in Java due to the absence of higher-kinded types. You also can't capture the fact that the monad type needs to have a static <code>pure</code> method (sometimes called <code>return</code> or <code>unit</code>).</li>\n<li>Your <code>MonadFunction</code> type isn't valid Java, as the generic type parameters, T &amp; U aren't declared (the class declaration should start with <code>class MonadFunction&lt;T, U&gt;</code>). Even if you fix that you'll then still have the above issue.</li>\n</ol>\n<p>However, you can express your <code>Maybe</code> class without recourse to Lambda functions quite easily once you throw away the <code>Monad</code> type:</p>\n<pre><code>class Maybe&lt;T&gt; {\n\n    private final T val;\n\n    public Maybe(T val) {\n        this.val = val;\n    }\n\n    public T getVal() {\n        return val;\n    }\n\n    public &lt;U&gt; Maybe&lt;U&gt; bind(Function&lt;T, Maybe&lt;U&gt;&gt; f) {\n        if (val == null)\n            return new Maybe&lt;U&gt;(null);\n        else\n            return f.apply(val);\n    }\n}\n\npublic class MonadApp {\n    public static void main(String[] args) {\n        Maybe&lt;Integer&gt; x = new Maybe&lt;&gt;(5);\n\n        Maybe&lt;String&gt; y = x.bind(new Function&lt;Integer, Maybe&lt;String&gt;&gt;() {\n            @Override\n            public Maybe&lt;String&gt; apply(Integer i) {\n                return i == 0 ? new Maybe&lt;&gt;(null) : new Maybe&lt;&gt;(i.toString());\n            }\n        });\n\n        System.out.println(y.getVal());\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":21469747,"reputation":83,"user_id":15818978,"display_name":"toowren"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":38,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":2,"score":-1,"last_activity_date":1695755637,"creation_date":1695143371,"question_id":77136616,"body_markdown":"There is a very simple Monad example, written in Java, which is taken from Wikipedia article.\r\n\r\n    import java.util.function.Function;\r\n    \r\n    interface Monad&lt;T&gt; {\r\n    \t&lt;U&gt; Monad&lt;U&gt; bind(Function&lt;T, Monad&lt;U&gt;&gt; f);\r\n    }\r\n    \r\n    class Maybe&lt;T&gt; implements Monad&lt;T&gt; {\r\n    \r\n    \tprivate final T val;\r\n    \r\n    \tpublic Maybe(T val) {\r\n    \t\tthis.val = val;\r\n    \t}\r\n    \r\n    \tpublic T getVal() {\r\n    \t\treturn val;\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic &lt;U&gt; Monad&lt;U&gt; bind(Function&lt;T, Monad&lt;U&gt;&gt; f) {\r\n    \t\tif (val == null)\r\n    \t\t\treturn new Maybe&lt;U&gt;(null);\r\n    \t\treturn f.apply(val);\r\n    \t}\r\n    }\r\n    \r\n    public class MonadApp {\r\n    \tpublic static void main(String[] args) {\r\n    \t\tMaybe&lt;Integer&gt; x = new Maybe&lt;&gt;(5);\r\n            Monad&lt;Integer&gt; y = x\r\n            \t\t.bind(v -&gt; new Maybe&lt;&gt;(v + 1))\r\n            \t\t.bind(v -&gt; new Maybe&lt;&gt;(v * 2));\r\n    \r\n    \t\tSystem.out.println( ((Maybe&lt;Integer&gt;)y).getVal() );\r\n    \t}\r\n    }\r\n\r\nFor scholar purposed I&#39;m trying to rewrite it without lambda expression for old Java 1.7 version. \r\n\r\nMy code looks like\r\n\r\n    import java.util.function.Function;\r\n    \r\n    class MonadFunction implements Function&lt;T, Monad&lt;U&gt;&gt;{\r\n        \r\n        Monad&lt;U&gt; apply(T val) { return Monad&lt;U&gt;(val + 1); }\r\n        \r\n    }\r\n    \r\n    interface Monad&lt;T&gt; {\r\n    \t&lt;U&gt; Monad&lt;U&gt; bind(Function&lt;T, Monad&lt;U&gt;&gt; f);\r\n    }\r\n    \r\n    class Maybe&lt;T&gt; implements Monad&lt;T&gt; {\r\n    \r\n    \tprivate final T val;\r\n    \r\n    \tpublic Maybe(T val) {\r\n    \t\tthis.val = val;\r\n    \t}\r\n    \r\n    \tpublic T getVal() {\r\n    \t\treturn val;\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic &lt;U&gt; Monad&lt;U&gt; bind(Function&lt;T, Monad&lt;U&gt;&gt; f) {\r\n    \t\tif (val == null)\r\n    \t\t\treturn new Maybe&lt;U&gt;(null);\r\n    \t\treturn f.apply(val);\r\n    \t}\r\n    }\r\n    \r\n    public class MonadApp {\r\n    \tpublic static void main(String[] args) {\r\n    \t\tMaybe&lt;Integer&gt; x = new Maybe&lt;&gt;(5);\r\n     \r\n            Monad&lt;Integer&gt; y = x.bind(new MonadFunction())\r\n            \r\n    \t\tSystem.out.println( ((Maybe&lt;Integer&gt;)y).getVal() );\r\n    \t}\r\n    }\r\n\r\nwhere I have replaced functions (in my case just first one) with \r\n\r\n    class MonadFunction implements Function&lt;T, Monad&lt;U&gt;&gt;{\r\n    \r\n        Monad&lt;U&gt; apply(T val) { return Monad&lt;U&gt;(val + 1); }\r\n    \r\n    }\r\n\r\nhowever both offline and online compilers return errors `/MonadApp.java:3: error: cannot find symbol class MonadFunction implements Function&lt;T, Monad&lt;U&gt;&gt;{` and  `symbol: class U\r\n    /MonadApp.java:5: error: cannot find symbol Monad&lt;U&gt; apply(T val) { return Monad&lt;U&gt;(val + 1); }`\r\n\r\nThe question is what I&#39;m doing wrong?\r\n\r\n","title":"Converting java.util.Function to non-Lambda expression one in Monad example taken from Wikipedia","body":"<p>There is a very simple Monad example, written in Java, which is taken from Wikipedia article.</p>\n<pre><code>import java.util.function.Function;\n\ninterface Monad&lt;T&gt; {\n    &lt;U&gt; Monad&lt;U&gt; bind(Function&lt;T, Monad&lt;U&gt;&gt; f);\n}\n\nclass Maybe&lt;T&gt; implements Monad&lt;T&gt; {\n\n    private final T val;\n\n    public Maybe(T val) {\n        this.val = val;\n    }\n\n    public T getVal() {\n        return val;\n    }\n\n    @Override\n    public &lt;U&gt; Monad&lt;U&gt; bind(Function&lt;T, Monad&lt;U&gt;&gt; f) {\n        if (val == null)\n            return new Maybe&lt;U&gt;(null);\n        return f.apply(val);\n    }\n}\n\npublic class MonadApp {\n    public static void main(String[] args) {\n        Maybe&lt;Integer&gt; x = new Maybe&lt;&gt;(5);\n        Monad&lt;Integer&gt; y = x\n                .bind(v -&gt; new Maybe&lt;&gt;(v + 1))\n                .bind(v -&gt; new Maybe&lt;&gt;(v * 2));\n\n        System.out.println( ((Maybe&lt;Integer&gt;)y).getVal() );\n    }\n}\n</code></pre>\n<p>For scholar purposed I'm trying to rewrite it without lambda expression for old Java 1.7 version.</p>\n<p>My code looks like</p>\n<pre><code>import java.util.function.Function;\n\nclass MonadFunction implements Function&lt;T, Monad&lt;U&gt;&gt;{\n    \n    Monad&lt;U&gt; apply(T val) { return Monad&lt;U&gt;(val + 1); }\n    \n}\n\ninterface Monad&lt;T&gt; {\n    &lt;U&gt; Monad&lt;U&gt; bind(Function&lt;T, Monad&lt;U&gt;&gt; f);\n}\n\nclass Maybe&lt;T&gt; implements Monad&lt;T&gt; {\n\n    private final T val;\n\n    public Maybe(T val) {\n        this.val = val;\n    }\n\n    public T getVal() {\n        return val;\n    }\n\n    @Override\n    public &lt;U&gt; Monad&lt;U&gt; bind(Function&lt;T, Monad&lt;U&gt;&gt; f) {\n        if (val == null)\n            return new Maybe&lt;U&gt;(null);\n        return f.apply(val);\n    }\n}\n\npublic class MonadApp {\n    public static void main(String[] args) {\n        Maybe&lt;Integer&gt; x = new Maybe&lt;&gt;(5);\n \n        Monad&lt;Integer&gt; y = x.bind(new MonadFunction())\n        \n        System.out.println( ((Maybe&lt;Integer&gt;)y).getVal() );\n    }\n}\n</code></pre>\n<p>where I have replaced functions (in my case just first one) with</p>\n<pre><code>class MonadFunction implements Function&lt;T, Monad&lt;U&gt;&gt;{\n\n    Monad&lt;U&gt; apply(T val) { return Monad&lt;U&gt;(val + 1); }\n\n}\n</code></pre>\n<p>however both offline and online compilers return errors <code>/MonadApp.java:3: error: cannot find symbol class MonadFunction implements Function&lt;T, Monad&lt;U&gt;&gt;{</code> and  <code>symbol: class U /MonadApp.java:5: error: cannot find symbol Monad&lt;U&gt; apply(T val) { return Monad&lt;U&gt;(val + 1); }</code></p>\n<p>The question is what I'm doing wrong?</p>\n"},{"tags":["java","oracle","callable-statement"],"comments":[{"owner":{"account_id":4964280,"reputation":4147,"user_id":3994197,"accept_rate":38,"display_name":"Vishal Gajera"},"score":0,"creation_date":1448999761,"post_id":34026574,"comment_id":55813263,"body_markdown":"may i know what are you tring to get values, am i guess you are getting value which is return by procedure ?","body":"may i know what are you tring to get values, am i guess you are getting value which is return by procedure ?"},{"owner":{"account_id":3448470,"reputation":369,"user_id":2888667,"accept_rate":45,"display_name":"Cleiton Ribeiro"},"score":0,"creation_date":1449000101,"post_id":34026574,"comment_id":55813442,"body_markdown":"yes, the output parameter is filled inside store procedure.\n\nI pass some empty variable, and i can recover the same filled variable.","body":"yes, the output parameter is filled inside store procedure.  I pass some empty variable, and i can recover the same filled variable."},{"owner":{"account_id":4964280,"reputation":4147,"user_id":3994197,"accept_rate":38,"display_name":"Vishal Gajera"},"score":0,"creation_date":1449000185,"post_id":34026574,"comment_id":55813489,"body_markdown":"can you please post your calling satatement exactly what have you used ?","body":"can you please post your calling satatement exactly what have you used ?"}],"answers":[{"tags":[],"owner":{"account_id":3391382,"reputation":3687,"user_id":2846138,"display_name":"cyberbrain"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695755635,"creation_date":1695755635,"answer_id":77182829,"question_id":34026574,"body_markdown":"According to the [JavaDocs of `CallableStatement`](https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/CallableStatement.html) the method `getLong` ...\r\n&gt; Retrieves the value of a JDBC BIGINT parameter as a long in the Java programming language.\r\n\r\nwhile `getBigDecimal`...\r\n&gt; Retrieves the value of a JDBC NUMERIC parameter as a java.math.BigDecimal object with as many digits to the right of the decimal point as the value contains.\r\n\r\nSo as your database type is `NUMERIC` and not `BIGINT`, you have to use `getBigDecimal`.\r\n\r\n`NUMERIC` is a data type with decimal places, so `long` can&#39;t hold all possible values as it is an integer data type.\r\n\r\nIf you are sure that you don&#39;t receive a fractional part and your number will fit into a `long`, you can use \r\n\r\n```\r\nlong myNumber = CallableStatement.getNumeric(&quot;myNumber&quot;).longValue();\r\n```\r\n\r\nFor details about `longValue()` you can have a look at the [JavaDocs](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/math/BigDecimal.html#longValue()).","title":"When using CallableStatement, NUMBER type columns only can be recovered like BigDecimal","body":"<p>According to the <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/CallableStatement.html\" rel=\"nofollow noreferrer\">JavaDocs of <code>CallableStatement</code></a> the method <code>getLong</code> ...</p>\n<blockquote>\n<p>Retrieves the value of a JDBC BIGINT parameter as a long in the Java programming language.</p>\n</blockquote>\n<p>while <code>getBigDecimal</code>...</p>\n<blockquote>\n<p>Retrieves the value of a JDBC NUMERIC parameter as a java.math.BigDecimal object with as many digits to the right of the decimal point as the value contains.</p>\n</blockquote>\n<p>So as your database type is <code>NUMERIC</code> and not <code>BIGINT</code>, you have to use <code>getBigDecimal</code>.</p>\n<p><code>NUMERIC</code> is a data type with decimal places, so <code>long</code> can't hold all possible values as it is an integer data type.</p>\n<p>If you are sure that you don't receive a fractional part and your number will fit into a <code>long</code>, you can use</p>\n<pre><code>long myNumber = CallableStatement.getNumeric(&quot;myNumber&quot;).longValue();\n</code></pre>\n<p>For details about <code>longValue()</code> you can have a look at the <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/math/BigDecimal.html#longValue()\" rel=\"nofollow noreferrer\">JavaDocs</a>.</p>\n"}],"owner":{"account_id":3448470,"reputation":369,"user_id":2888667,"accept_rate":45,"display_name":"Cleiton Ribeiro"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":368,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1695755635,"creation_date":1448991523,"question_id":34026574,"body_markdown":"I&#39;m using CallableStatement to pass the stored procedure parameters through Java.\r\n\r\nBut, when I try to get some &quot;NUMBER&quot; type value, I can&#39;t use :\r\n\r\n    CallableStatement.getLong(1)\r\n\r\nBecause, all the &quot;NUMBER&quot; params will come like BigDecimal.\r\n\r\nAny idea ?\r\n\r\nFor example - inside database:\r\n\r\n    Procedure LookingForSomething(myNumber OUT NUMERIC);\r\n\r\nFrom Java:\r\n\r\n     Long myNumber = CallableStatement.getLong(&quot;myNumber&quot;); - doesn&#39;t work","title":"When using CallableStatement, NUMBER type columns only can be recovered like BigDecimal","body":"<p>I'm using CallableStatement to pass the stored procedure parameters through Java.</p>\n<p>But, when I try to get some &quot;NUMBER&quot; type value, I can't use :</p>\n<pre><code>CallableStatement.getLong(1)\n</code></pre>\n<p>Because, all the &quot;NUMBER&quot; params will come like BigDecimal.</p>\n<p>Any idea ?</p>\n<p>For example - inside database:</p>\n<pre><code>Procedure LookingForSomething(myNumber OUT NUMERIC);\n</code></pre>\n<p>From Java:</p>\n<pre><code> Long myNumber = CallableStatement.getLong(&quot;myNumber&quot;); - doesn't work\n</code></pre>\n"},{"tags":["java","spring","spring-security","oauth-2.0"],"answers":[{"tags":[],"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1695755264,"creation_date":1695147033,"answer_id":77136984,"question_id":77136210,"body_markdown":"Resource servers are generally configured stateless (without sessions). \r\n\r\nIn the conf you expose, sessions are not disabled, but this doesn&#39;t mean that it is used to build the requests security context. What is used is the token introspector.\r\n\r\nSo if there should be some caching, it could be inside this introspector (cache the introspection response for given token strings). But this caching would contradict the most frequent motivation for introspection: validate for each request that the session was not closed on the authorization server. This has an important performance impact and is of use mainly when you can&#39;t trust client(s) to properly delete tokens when a user session is terminated on the authorization server.\r\n\r\nAs a conclusion, if performance is important, use only [OAuth2 clients on your servers][1] which you can trust to delete tokens when user logs out (`spring-cloud-gateway` is a good candidate when [configured with `spring-boot-starter-oauth2-client`, `oauth2Login` and `TokenRelay=` filter][2]), have your authorization server issue JWT access tokens, and configure your resource server(s) with a JWT decoder. With this pattern, the access tokens are &quot;cached&quot; in session on the OAuth2 client and requests are authorized with:\r\n- session (cookie) between the remote front-ends and the OAuth2 client on your server (most probably a gateway)\r\n- JWTs between the OAuth2 client and the resource servers (as well as within inter resource servers communications)\r\n\r\n\r\n  [1]: https://github.com/spring-projects/spring-authorization-server/issues/297#issue-896744390\r\n  [2]: https://github.com/ch4mpy/spring-addons/tree/master/samples/tutorials/bff","title":"OAuth2 token introspection for each service request?","body":"<p>Resource servers are generally configured stateless (without sessions).</p>\n<p>In the conf you expose, sessions are not disabled, but this doesn't mean that it is used to build the requests security context. What is used is the token introspector.</p>\n<p>So if there should be some caching, it could be inside this introspector (cache the introspection response for given token strings). But this caching would contradict the most frequent motivation for introspection: validate for each request that the session was not closed on the authorization server. This has an important performance impact and is of use mainly when you can't trust client(s) to properly delete tokens when a user session is terminated on the authorization server.</p>\n<p>As a conclusion, if performance is important, use only <a href=\"https://github.com/spring-projects/spring-authorization-server/issues/297#issue-896744390\" rel=\"nofollow noreferrer\">OAuth2 clients on your servers</a> which you can trust to delete tokens when user logs out (<code>spring-cloud-gateway</code> is a good candidate when <a href=\"https://github.com/ch4mpy/spring-addons/tree/master/samples/tutorials/bff\" rel=\"nofollow noreferrer\">configured with <code>spring-boot-starter-oauth2-client</code>, <code>oauth2Login</code> and <code>TokenRelay=</code> filter</a>), have your authorization server issue JWT access tokens, and configure your resource server(s) with a JWT decoder. With this pattern, the access tokens are &quot;cached&quot; in session on the OAuth2 client and requests are authorized with:</p>\n<ul>\n<li>session (cookie) between the remote front-ends and the OAuth2 client on your server (most probably a gateway)</li>\n<li>JWTs between the OAuth2 client and the resource servers (as well as within inter resource servers communications)</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":12368896,"reputation":24701,"user_id":9019885,"display_name":"Gary Archer"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1695211377,"creation_date":1695211377,"answer_id":77142230,"question_id":77136210,"body_markdown":"Opaque access tokens are often used as a privacy preserving best practice, to avoid revealing confidential information (easily readable in JWTs) to internet clients. Yet you don&#39;t want to hammer the authorization server (a critical conponent) on every API request.\r\n\r\nOne elegant way to deal with introspection and caching is to host an API gateway in front of APIs and do the introspection in a `gateway plugin`, along with result caching. Alternatively you can do this in APIs, though that is less optimal, especially when multiple APIs call each other.\r\n\r\n**COMBINING OPAQUE TOKENS AND JWTs**\r\n\r\nThe gateway can send an introspection request and ideally use an `accept: application/jwt` header, so that the introspection response is a JWT access token that can be forwarded to APIs. See this [proposed standard](https://www.ietf.org/id/draft-ietf-oauth-jwt-introspection-response-12.html) which some authorization servers support.\r\n\r\nAt Curity, where I work, we call this the `phantom token pattern`. The advantage of the JWT response is to maintain a credential for requests inside the cluster. This provides a more complete `zero trust` API security solution, since the JWT can also be forwarded to upstream APIs.","title":"OAuth2 token introspection for each service request?","body":"<p>Opaque access tokens are often used as a privacy preserving best practice, to avoid revealing confidential information (easily readable in JWTs) to internet clients. Yet you don't want to hammer the authorization server (a critical conponent) on every API request.</p>\n<p>One elegant way to deal with introspection and caching is to host an API gateway in front of APIs and do the introspection in a <code>gateway plugin</code>, along with result caching. Alternatively you can do this in APIs, though that is less optimal, especially when multiple APIs call each other.</p>\n<p><strong>COMBINING OPAQUE TOKENS AND JWTs</strong></p>\n<p>The gateway can send an introspection request and ideally use an <code>accept: application/jwt</code> header, so that the introspection response is a JWT access token that can be forwarded to APIs. See this <a href=\"https://www.ietf.org/id/draft-ietf-oauth-jwt-introspection-response-12.html\" rel=\"nofollow noreferrer\">proposed standard</a> which some authorization servers support.</p>\n<p>At Curity, where I work, we call this the <code>phantom token pattern</code>. The advantage of the JWT response is to maintain a credential for requests inside the cluster. This provides a more complete <code>zero trust</code> API security solution, since the JWT can also be forwarded to upstream APIs.</p>\n"}],"owner":{"account_id":3138894,"reputation":3547,"user_id":2654773,"accept_rate":96,"display_name":"eztam"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":176,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77136984,"answer_count":2,"score":1,"last_activity_date":1695755264,"creation_date":1695139482,"question_id":77136210,"body_markdown":"I&#39;ve implemented a Spring based REST API (resource server) that uses the OAuth2 authorization code flow. The receives an opaque access token from the client and validated this token through a custom token introspector.\r\n\r\nFor each HTTP request, the resource server has to verify the provided access token through an additional HTTP call to the token introspection service.\r\n\r\nIs there a way, to cache the token so that the resource server don&#39;t have to send a token verification request each time? \r\n\r\n\r\nCan [HttpSessionSecurityContextRepository][1] be used for that purpose?\r\n\r\nHere&#39;y my configuration:\r\n\r\n     @Configuration\r\n     public class SecurityConfig {\r\n\r\n        @Bean\r\n        public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\r\n           \r\n            http.authorizeRequests(authz -&gt; authz.antMatchers(HttpMethod.GET, &quot;/foos/**&quot;)\r\n                .anyRequest()\r\n                .authenticated())\r\n                .oauth2ResourceServer(oauth2 -&gt;\r\n                     oauth2.opaqueToken.introspector(myIntrospector)\r\n            );\r\n            return http.build();\r\n        }\r\n    }\r\n\r\n\r\n  [1]: https://github.com/spring-projects/spring-security/blob/main/web/src/main/java/org/springframework/security/web/context/HttpSessionSecurityContextRepository.java","title":"OAuth2 token introspection for each service request?","body":"<p>I've implemented a Spring based REST API (resource server) that uses the OAuth2 authorization code flow. The receives an opaque access token from the client and validated this token through a custom token introspector.</p>\n<p>For each HTTP request, the resource server has to verify the provided access token through an additional HTTP call to the token introspection service.</p>\n<p>Is there a way, to cache the token so that the resource server don't have to send a token verification request each time?</p>\n<p>Can <a href=\"https://github.com/spring-projects/spring-security/blob/main/web/src/main/java/org/springframework/security/web/context/HttpSessionSecurityContextRepository.java\" rel=\"nofollow noreferrer\">HttpSessionSecurityContextRepository</a> be used for that purpose?</p>\n<p>Here'y my configuration:</p>\n<pre><code> @Configuration\n public class SecurityConfig {\n\n    @Bean\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n       \n        http.authorizeRequests(authz -&gt; authz.antMatchers(HttpMethod.GET, &quot;/foos/**&quot;)\n            .anyRequest()\n            .authenticated())\n            .oauth2ResourceServer(oauth2 -&gt;\n                 oauth2.opaqueToken.introspector(myIntrospector)\n        );\n        return http.build();\n    }\n}\n</code></pre>\n"},{"tags":["java","ssl","https","proxy","apache-camel"],"answers":[{"tags":[],"owner":{"account_id":1054217,"reputation":8986,"user_id":1057291,"accept_rate":80,"display_name":"namalfernandolk"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1534911267,"creation_date":1534828228,"answer_id":51941932,"question_id":51941789,"body_markdown":"**Attemp 10 :** \r\nWas succeeded in this attemp with system properties. But I&#39;m continuosuly seeking a solution via out of system properties. Posting here for the community. So, if there&#39;sa any further findings please leave an answer / comment\r\n\r\nAdd the proxy settings to the syetem property as mentioned below.\r\n\r\n    System.setProperty(&quot;http.proxyHost&quot;, &quot;192.168.xxx.xxx&quot;);\r\n    System.setProperty(&quot;http.proxyPort&quot;, &quot;xxxx&quot;);\r\n    System.setProperty(&quot;https.proxyHost&quot;, &quot;192.168.xxx.xxx&quot;);\r\n    System.setProperty(&quot;https.proxyPort&quot;, &quot;xxxx&quot;);\r\n\r\nOR\r\n\r\n    -Dhttp.proxyHost=192.168.xxx.xxx -Dhttp.proxyPort=xxxx -Dhttps.proxyHost=192.168.xxx.xxx -Dhttps.proxyPort=xxxx\r\n\r\nPut the useSystemProperties flag true in the URL as below. \r\n\r\n    https4://endpoint-ssl-url.com/path/to/resource?useSystemProperties=true\r\n\r\nThen it works fine as mentioned in below log\r\n\r\n**log :** \r\n\r\n    [org.apache.camel.component.http4.HttpComponent] Created ClientConnectionManager org.apache.http.impl.conn.PoolingHttpClientConnectionManager@1aee22a3\r\n    [org.apache.http.client.protocol.RequestAddCookies] CookieSpec selected: default\r\n    [org.apache.http.client.protocol.RequestAuthCache] Auth cache not set in the context\r\n    [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection request: [route: {tls}-&gt;http://192.168.xxx.xxx:3128-&gt;https://endpoint-ssl-url.com:443][total kept alive: 0; route allocated: 0 of 20; total allocated: 0 of 200]\r\n    [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection leased: [id: 0][route: {tls}-&gt;http://192.168.xxx.xxx:xxxx-&gt;https://endpoint-ssl-url.com:443][total kept alive: 0; route allocated: 1 of 20; total allocated: 1 of 200]\r\n    [org.apache.http.impl.execchain.MainClientExec] Opening connection {tls}-&gt;http://192.168.xxx.xxx:xxxx-&gt;https://endpoint-ssl-url.com:443\r\n    [org.apache.http.impl.conn.DefaultHttpClientConnectionOperator] Connecting to /192.168.xxx.xxx:xxxx\r\n    [org.apache.http.impl.conn.DefaultHttpClientConnectionOperator] Connection established 192.168.xxx.xxx:xxxx&lt;-&gt;192.168.xxx.xxx:xxxx\r\n    [org.apache.http.headers] http-outgoing-0 &gt;&gt; CONNECT endpoint-ssl-url.com:443 HTTP/1.1\r\n    [org.apache.http.headers] http-outgoing-0 &gt;&gt; Host: endpoint-ssl-url.com\r\n    [org.apache.http.headers] http-outgoing-0 &gt;&gt; User-Agent: Apache-HttpClient/4.5.3 (Java/1.8.0_151)\r\n    [org.apache.http.wire] http-outgoing-0 &gt;&gt; &quot;CONNECT endpoint-ssl-url.com:443 HTTP/1.1[\\r][\\n]&quot;\r\n    [org.apache.http.wire] http-outgoing-0 &gt;&gt; &quot;Host: endpoint-ssl-url.com[\\r][\\n]&quot;\r\n    [org.apache.http.wire] http-outgoing-0 &gt;&gt; &quot;User-Agent: Apache-HttpClient/4.5.3 (Java/1.8.0_151)[\\r][\\n]&quot;\r\n    [org.apache.http.wire] http-outgoing-0 &gt;&gt; &quot;[\\r][\\n]&quot;\r\n    [org.apache.http.wire] http-outgoing-0 &lt;&lt; &quot;HTTP/1.1 200 Connection established[\\r][\\n]&quot;\r\n    [org.apache.http.wire] http-outgoing-0 &lt;&lt; &quot;[\\r][\\n]&quot;\r\n    [org.apache.http.headers] http-outgoing-0 &lt;&lt; HTTP/1.1 200 Connection established\r\n    [org.apache.http.impl.execchain.MainClientExec] Tunnel to target created.\r\n    [org.apache.http.conn.ssl.SSLConnectionSocketFactory] Enabled protocols: [TLSv1, TLSv1.1, TLSv1.2]\r\n    [org.apache.http.conn.ssl.SSLConnectionSocketFactory] Enabled cipher suites:[TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256, MORE CIPHERS...]\r\n    [org.apache.http.conn.ssl.SSLConnectionSocketFactory] Starting handshake\r\n    [org.apache.http.conn.ssl.SSLConnectionSocketFactory] Secure session established\r\n    [org.apache.http.conn.ssl.SSLConnectionSocketFactory]  negotiated protocol: TLSv1.2\r\n    [org.apache.http.conn.ssl.SSLConnectionSocketFactory]  negotiated cipher suite: TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256\r\n    [org.apache.http.conn.ssl.SSLConnectionSocketFactory]  peer principal: CN=endpoint-ssl-url.com, OU=Software Engineering Services, O=Telstra Corporation Limited, L=Melbourne, ST=Victoria, C=AU\r\n    [org.apache.http.conn.ssl.SSLConnectionSocketFactory]  peer alternative names: [endpoint-ssl-url.com]\r\n    [org.apache.http.conn.ssl.SSLConnectionSocketFactory]  issuer principal: CN=QuoVadis Global SSL ICA G3, O=QuoVadis Limited, C=BM\r\n    [org.apache.http.impl.execchain.MainClientExec] Executing request POST /path/to/resource HTTP/1.1\r\n    [org.apache.http.headers] http-outgoing-0 &gt;&gt; POST /path/to/resource HTTP/1.1\r\n    [org.apache.http.headers] http-outgoing-0 &gt;&gt; Accept: application/json\r\n    [org.apache.http.headers] http-outgoing-0 &gt;&gt; Accept-Encoding: gzip\r\n    [org.apache.http.headers] http-outgoing-0 &gt;&gt; Authorization: Basic XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX\r\n    [org.apache.http.headers] http-outgoing-0 &gt;&gt; breadcrumbId: xxxxxxxxxxxxxxxxxxxxxxx\r\n    [org.apache.http.headers] http-outgoing-0 &gt;&gt; doLogFiles: true\r\n    [org.apache.http.headers] http-outgoing-0 &gt;&gt; dontLogErrorFiles: false\r\n    [org.apache.http.headers] http-outgoing-0 &gt;&gt; messageId: message-x-id\r\n    [org.apache.http.headers] http-outgoing-0 &gt;&gt; messageName: message-x-name\r\n    [org.apache.http.headers] http-outgoing-0 &gt;&gt; routeId: direct-http\r\n    [org.apache.http.headers] http-outgoing-0 &gt;&gt; specialRq: true\r\n    [org.apache.http.headers] http-outgoing-0 &gt;&gt; specialRs: true\r\n    [org.apache.http.headers] http-outgoing-0 &gt;&gt; url: https4://endpoint-ssl-url.com/path/to/resource?useSystemProperties=true\r\n    [org.apache.http.headers] http-outgoing-0 &gt;&gt; Content-Length: 49\r\n    [org.apache.http.headers] http-outgoing-0 &gt;&gt; Content-Type: application/x-www-form-urlencoded\r\n    [org.apache.http.headers] http-outgoing-0 &gt;&gt; Host: endpoint-ssl-url.com\r\n    [org.apache.http.headers] http-outgoing-0 &gt;&gt; Connection: Keep-Alive\r\n    [org.apache.http.headers] http-outgoing-0 &gt;&gt; User-Agent: Apache-HttpClient/4.5.3 (Java/1.8.0_151)\r\n    [org.apache.http.wire] http-outgoing-0 &gt;&gt; &quot;POST /path/to/resource HTTP/1.1[\\r][\\n]&quot;\r\n    [org.apache.http.wire] http-outgoing-0 &gt;&gt; &quot;Accept: application/json[\\r][\\n]&quot;\r\n    [org.apache.http.wire] http-outgoing-0 &gt;&gt; &quot;Accept-Encoding: gzip[\\r][\\n]&quot;\r\n    [org.apache.http.wire] http-outgoing-0 &gt;&gt; &quot;Authorization: Basic XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX[\\r][\\n]&quot;\r\n    [org.apache.http.wire] http-outgoing-0 &gt;&gt; &quot;breadcrumbId: xxxxxxxxxxxxxxxxxxxxxxx[\\r][\\n]&quot;\r\n    [org.apache.http.wire] http-outgoing-0 &gt;&gt; &quot;doLogFiles: true[\\r][\\n]&quot;\r\n    [org.apache.http.wire] http-outgoing-0 &gt;&gt; &quot;dontLogErrorFiles: false[\\r][\\n]&quot;\r\n    [org.apache.http.wire] http-outgoing-0 &gt;&gt; &quot;messageId: message-x-id[\\r][\\n]&quot;\r\n    [org.apache.http.wire] http-outgoing-0 &gt;&gt; &quot;messageName: message-x-name[\\r][\\n]&quot;\r\n    [org.apache.http.wire] http-outgoing-0 &gt;&gt; &quot;routeId: direct-http[\\r][\\n]&quot;\r\n    [org.apache.http.wire] http-outgoing-0 &gt;&gt; &quot;specialRq: true[\\r][\\n]&quot;\r\n    [org.apache.http.wire] http-outgoing-0 &gt;&gt; &quot;specialRs: true[\\r][\\n]&quot;\r\n    [org.apache.http.wire] http-outgoing-0 &gt;&gt; &quot;url: https4://endpoint-ssl-url.com/path/to/resource?useSystemProperties=true[\\r][\\n]&quot;\r\n    [org.apache.http.wire] http-outgoing-0 &gt;&gt; &quot;Content-Length: 49[\\r][\\n]&quot;\r\n    [org.apache.http.wire] http-outgoing-0 &gt;&gt; &quot;Content-Type: application/x-www-form-urlencoded[\\r][\\n]&quot;\r\n    [org.apache.http.wire] http-outgoing-0 &gt;&gt; &quot;Host: endpoint-ssl-url.com[\\r][\\n]&quot;\r\n    [org.apache.http.wire] http-outgoing-0 &gt;&gt; &quot;Connection: Keep-Alive[\\r][\\n]&quot;\r\n    [org.apache.http.wire] http-outgoing-0 &gt;&gt; &quot;User-Agent: Apache-HttpClient/4.5.3 (Java/1.8.0_151)[\\r][\\n]&quot;\r\n    [org.apache.http.wire] http-outgoing-0 &gt;&gt; &quot;[\\r][\\n]&quot;\r\n    [org.apache.http.wire] http-outgoing-0 &gt;&gt; &quot;grant_type=client_credentials&amp;scope=DUMMYSCOPE&quot;\r\n    [org.apache.http.wire] http-outgoing-0 &lt;&lt; &quot;HTTP/1.1 200 OK[\\r][\\n]&quot;\r\n    [org.apache.http.wire] http-outgoing-0 &lt;&lt; &quot;Date: Tue, 21 Aug 2018 04:11:35 GMT[\\r][\\n]&quot;\r\n    [org.apache.http.wire] http-outgoing-0 &lt;&lt; &quot;Content-Type: application/json; charset=UTF-8[\\r][\\n]&quot;\r\n    [org.apache.http.wire] http-outgoing-0 &lt;&lt; &quot;Content-Length: 72[\\r][\\n]&quot;\r\n    [org.apache.http.wire] http-outgoing-0 &lt;&lt; &quot;Connection: keep-alive[\\r][\\n]&quot;\r\n    [org.apache.http.wire] http-outgoing-0 &lt;&lt; &quot;Access-Control-Allow-Origin: *[\\r][\\n]&quot;\r\n    [org.apache.http.wire] http-outgoing-0 &lt;&lt; &quot;Cache-Control: no-cache,no-store,must-revalidate[\\r][\\n]&quot;\r\n    [org.apache.http.wire] http-outgoing-0 &lt;&lt; &quot;Pragma: no-cache[\\r][\\n]&quot;\r\n    [org.apache.http.wire] http-outgoing-0 &lt;&lt; &quot;Expires: 0[\\r][\\n]&quot;\r\n    [org.apache.http.wire] http-outgoing-0 &lt;&lt; &quot;Strict-Transport-Security: max-age=31536000; includeSubDomains;[\\r][\\n]&quot;\r\n    [org.apache.http.wire] http-outgoing-0 &lt;&lt; &quot;[\\r][\\n]&quot;\r\n    [org.apache.http.wire] http-outgoing-0 &lt;&lt; &quot;{ &quot;xxxx_xxxxx&quot;: &quot;xxxxxxxxxxxxxxxxxxxxxxxxxxxxx&quot;, &quot;xxxx_xxxxx&quot;: &quot;xxxx&quot; }&quot;\r\n    [org.apache.http.headers] http-outgoing-0 &lt;&lt; HTTP/1.1 200 OK\r\n    [org.apache.http.headers] http-outgoing-0 &lt;&lt; Date: Tue, 21 Aug 2018 04:11:35 GMT\r\n    [org.apache.http.headers] http-outgoing-0 &lt;&lt; Content-Type: application/json; charset=UTF-8\r\n    [org.apache.http.headers] http-outgoing-0 &lt;&lt; Content-Length: 72\r\n    [org.apache.http.headers] http-outgoing-0 &lt;&lt; Connection: keep-alive\r\n    [org.apache.http.headers] http-outgoing-0 &lt;&lt; Access-Control-Allow-Origin: *\r\n    [org.apache.http.headers] http-outgoing-0 &lt;&lt; Cache-Control: no-cache,no-store,must-revalidate\r\n    [org.apache.http.headers] http-outgoing-0 &lt;&lt; Pragma: no-cache\r\n    [org.apache.http.headers] http-outgoing-0 &lt;&lt; Expires: 0\r\n    [org.apache.http.headers] http-outgoing-0 &lt;&lt; Strict-Transport-Security: max-age=31536000; includeSubDomains;\r\n    [org.apache.http.impl.execchain.MainClientExec] Connection can be kept alive indefinitely\r\n    [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection [id: 0][route: {tls}-&gt;http://192.168.xxx.xxx:xxxx-&gt;https://endpoint-ssl-url.com:443] can be kept alive indefinitely\r\n    [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection released: [id: 0][route: {tls}-&gt;http://192.168.xxx.xxx:xxxx-&gt;https://endpoint-ssl-url.com:443][total kept alive: 1; route allocated: 1 of 20; total allocated: 1 of 200]\r\n    [com.integration.processors.base.http.HttpResponseProcessor] process(). is started\r\n    [com.integration.processors.base.common.InterfaceProcessor] loadMessageData().messageId : message-x-id | messageName : message-x-name\r\n    [com.integration.processors.base.http.HttpResponseProcessor] process(). httpResponseCode : 200 | httpResponseText : OK\r\n    [com.integration.processors.interfaces.http.message-x-nameResponseProcessor] decodeResponse().rootNode : {&quot;xxxx_xxxxx&quot;:&quot;xxxxxxxxxxxxxxxxxxxxxxxxxxxxx&quot;,&quot;xxxx_xxxxx&quot;:&quot;xxxx&quot;}\r\n    [com.integration.processors.interfaces.http.message-x-nameResponseProcessor] decodeResponse().xxxx_xxxxx : xxxxxxxxxxxxxxxxxxxxxxxxxxxxx\r\n    [com.integration.processors.base.http.HttpResponseProcessor] process().outResponseBody : {&quot;RESULT&quot;:{&quot;condition&quot;:&quot;good&quot;,&quot;severity&quot;:&quot;good&quot;,&quot;summury&quot;:&quot;Message X successful&quot;,&quot;detail&quot;:&quot;{ \\&quot;xxxx_xxxxx\\&quot;: \\&quot;xxxxxxxxxxxxxxxxxxxxxxxxxxxxx\\&quot;, \\&quot;xxxx_xxxxx\\&quot;: \\&quot;xxxx\\&quot; }\\nxxxxxxxxxxxxxxxxxxxxxxxxxxxxxMessage X successful\\n&quot;},&quot;OUTPUTS&quot;:{&quot;xxxx_xxxxx&quot;:&quot;xxxxxxxxxxxxxxxxxxxxxxxxxxxxx&quot;,&quot;FAILURE_REASON&quot;:null},&quot;SUCCESS&quot;:true}\r\n\r\n","title":"SSLException: Unrecognized SSL message, plaintext connection? error while sending https POST in Camel via PROXY","body":"<p><strong>Attemp 10 :</strong> \nWas succeeded in this attemp with system properties. But I'm continuosuly seeking a solution via out of system properties. Posting here for the community. So, if there'sa any further findings please leave an answer / comment</p>\n\n<p>Add the proxy settings to the syetem property as mentioned below.</p>\n\n<pre><code>System.setProperty(\"http.proxyHost\", \"192.168.xxx.xxx\");\nSystem.setProperty(\"http.proxyPort\", \"xxxx\");\nSystem.setProperty(\"https.proxyHost\", \"192.168.xxx.xxx\");\nSystem.setProperty(\"https.proxyPort\", \"xxxx\");\n</code></pre>\n\n<p>OR</p>\n\n<pre><code>-Dhttp.proxyHost=192.168.xxx.xxx -Dhttp.proxyPort=xxxx -Dhttps.proxyHost=192.168.xxx.xxx -Dhttps.proxyPort=xxxx\n</code></pre>\n\n<p>Put the useSystemProperties flag true in the URL as below. </p>\n\n<pre><code>https4://endpoint-ssl-url.com/path/to/resource?useSystemProperties=true\n</code></pre>\n\n<p>Then it works fine as mentioned in below log</p>\n\n<p><strong>log :</strong> </p>\n\n<pre><code>[org.apache.camel.component.http4.HttpComponent] Created ClientConnectionManager org.apache.http.impl.conn.PoolingHttpClientConnectionManager@1aee22a3\n[org.apache.http.client.protocol.RequestAddCookies] CookieSpec selected: default\n[org.apache.http.client.protocol.RequestAuthCache] Auth cache not set in the context\n[org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection request: [route: {tls}-&gt;http://192.168.xxx.xxx:3128-&gt;https://endpoint-ssl-url.com:443][total kept alive: 0; route allocated: 0 of 20; total allocated: 0 of 200]\n[org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection leased: [id: 0][route: {tls}-&gt;http://192.168.xxx.xxx:xxxx-&gt;https://endpoint-ssl-url.com:443][total kept alive: 0; route allocated: 1 of 20; total allocated: 1 of 200]\n[org.apache.http.impl.execchain.MainClientExec] Opening connection {tls}-&gt;http://192.168.xxx.xxx:xxxx-&gt;https://endpoint-ssl-url.com:443\n[org.apache.http.impl.conn.DefaultHttpClientConnectionOperator] Connecting to /192.168.xxx.xxx:xxxx\n[org.apache.http.impl.conn.DefaultHttpClientConnectionOperator] Connection established 192.168.xxx.xxx:xxxx&lt;-&gt;192.168.xxx.xxx:xxxx\n[org.apache.http.headers] http-outgoing-0 &gt;&gt; CONNECT endpoint-ssl-url.com:443 HTTP/1.1\n[org.apache.http.headers] http-outgoing-0 &gt;&gt; Host: endpoint-ssl-url.com\n[org.apache.http.headers] http-outgoing-0 &gt;&gt; User-Agent: Apache-HttpClient/4.5.3 (Java/1.8.0_151)\n[org.apache.http.wire] http-outgoing-0 &gt;&gt; \"CONNECT endpoint-ssl-url.com:443 HTTP/1.1[\\r][\\n]\"\n[org.apache.http.wire] http-outgoing-0 &gt;&gt; \"Host: endpoint-ssl-url.com[\\r][\\n]\"\n[org.apache.http.wire] http-outgoing-0 &gt;&gt; \"User-Agent: Apache-HttpClient/4.5.3 (Java/1.8.0_151)[\\r][\\n]\"\n[org.apache.http.wire] http-outgoing-0 &gt;&gt; \"[\\r][\\n]\"\n[org.apache.http.wire] http-outgoing-0 &lt;&lt; \"HTTP/1.1 200 Connection established[\\r][\\n]\"\n[org.apache.http.wire] http-outgoing-0 &lt;&lt; \"[\\r][\\n]\"\n[org.apache.http.headers] http-outgoing-0 &lt;&lt; HTTP/1.1 200 Connection established\n[org.apache.http.impl.execchain.MainClientExec] Tunnel to target created.\n[org.apache.http.conn.ssl.SSLConnectionSocketFactory] Enabled protocols: [TLSv1, TLSv1.1, TLSv1.2]\n[org.apache.http.conn.ssl.SSLConnectionSocketFactory] Enabled cipher suites:[TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256, MORE CIPHERS...]\n[org.apache.http.conn.ssl.SSLConnectionSocketFactory] Starting handshake\n[org.apache.http.conn.ssl.SSLConnectionSocketFactory] Secure session established\n[org.apache.http.conn.ssl.SSLConnectionSocketFactory]  negotiated protocol: TLSv1.2\n[org.apache.http.conn.ssl.SSLConnectionSocketFactory]  negotiated cipher suite: TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256\n[org.apache.http.conn.ssl.SSLConnectionSocketFactory]  peer principal: CN=endpoint-ssl-url.com, OU=Software Engineering Services, O=Telstra Corporation Limited, L=Melbourne, ST=Victoria, C=AU\n[org.apache.http.conn.ssl.SSLConnectionSocketFactory]  peer alternative names: [endpoint-ssl-url.com]\n[org.apache.http.conn.ssl.SSLConnectionSocketFactory]  issuer principal: CN=QuoVadis Global SSL ICA G3, O=QuoVadis Limited, C=BM\n[org.apache.http.impl.execchain.MainClientExec] Executing request POST /path/to/resource HTTP/1.1\n[org.apache.http.headers] http-outgoing-0 &gt;&gt; POST /path/to/resource HTTP/1.1\n[org.apache.http.headers] http-outgoing-0 &gt;&gt; Accept: application/json\n[org.apache.http.headers] http-outgoing-0 &gt;&gt; Accept-Encoding: gzip\n[org.apache.http.headers] http-outgoing-0 &gt;&gt; Authorization: Basic XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX\n[org.apache.http.headers] http-outgoing-0 &gt;&gt; breadcrumbId: xxxxxxxxxxxxxxxxxxxxxxx\n[org.apache.http.headers] http-outgoing-0 &gt;&gt; doLogFiles: true\n[org.apache.http.headers] http-outgoing-0 &gt;&gt; dontLogErrorFiles: false\n[org.apache.http.headers] http-outgoing-0 &gt;&gt; messageId: message-x-id\n[org.apache.http.headers] http-outgoing-0 &gt;&gt; messageName: message-x-name\n[org.apache.http.headers] http-outgoing-0 &gt;&gt; routeId: direct-http\n[org.apache.http.headers] http-outgoing-0 &gt;&gt; specialRq: true\n[org.apache.http.headers] http-outgoing-0 &gt;&gt; specialRs: true\n[org.apache.http.headers] http-outgoing-0 &gt;&gt; url: https4://endpoint-ssl-url.com/path/to/resource?useSystemProperties=true\n[org.apache.http.headers] http-outgoing-0 &gt;&gt; Content-Length: 49\n[org.apache.http.headers] http-outgoing-0 &gt;&gt; Content-Type: application/x-www-form-urlencoded\n[org.apache.http.headers] http-outgoing-0 &gt;&gt; Host: endpoint-ssl-url.com\n[org.apache.http.headers] http-outgoing-0 &gt;&gt; Connection: Keep-Alive\n[org.apache.http.headers] http-outgoing-0 &gt;&gt; User-Agent: Apache-HttpClient/4.5.3 (Java/1.8.0_151)\n[org.apache.http.wire] http-outgoing-0 &gt;&gt; \"POST /path/to/resource HTTP/1.1[\\r][\\n]\"\n[org.apache.http.wire] http-outgoing-0 &gt;&gt; \"Accept: application/json[\\r][\\n]\"\n[org.apache.http.wire] http-outgoing-0 &gt;&gt; \"Accept-Encoding: gzip[\\r][\\n]\"\n[org.apache.http.wire] http-outgoing-0 &gt;&gt; \"Authorization: Basic XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX[\\r][\\n]\"\n[org.apache.http.wire] http-outgoing-0 &gt;&gt; \"breadcrumbId: xxxxxxxxxxxxxxxxxxxxxxx[\\r][\\n]\"\n[org.apache.http.wire] http-outgoing-0 &gt;&gt; \"doLogFiles: true[\\r][\\n]\"\n[org.apache.http.wire] http-outgoing-0 &gt;&gt; \"dontLogErrorFiles: false[\\r][\\n]\"\n[org.apache.http.wire] http-outgoing-0 &gt;&gt; \"messageId: message-x-id[\\r][\\n]\"\n[org.apache.http.wire] http-outgoing-0 &gt;&gt; \"messageName: message-x-name[\\r][\\n]\"\n[org.apache.http.wire] http-outgoing-0 &gt;&gt; \"routeId: direct-http[\\r][\\n]\"\n[org.apache.http.wire] http-outgoing-0 &gt;&gt; \"specialRq: true[\\r][\\n]\"\n[org.apache.http.wire] http-outgoing-0 &gt;&gt; \"specialRs: true[\\r][\\n]\"\n[org.apache.http.wire] http-outgoing-0 &gt;&gt; \"url: https4://endpoint-ssl-url.com/path/to/resource?useSystemProperties=true[\\r][\\n]\"\n[org.apache.http.wire] http-outgoing-0 &gt;&gt; \"Content-Length: 49[\\r][\\n]\"\n[org.apache.http.wire] http-outgoing-0 &gt;&gt; \"Content-Type: application/x-www-form-urlencoded[\\r][\\n]\"\n[org.apache.http.wire] http-outgoing-0 &gt;&gt; \"Host: endpoint-ssl-url.com[\\r][\\n]\"\n[org.apache.http.wire] http-outgoing-0 &gt;&gt; \"Connection: Keep-Alive[\\r][\\n]\"\n[org.apache.http.wire] http-outgoing-0 &gt;&gt; \"User-Agent: Apache-HttpClient/4.5.3 (Java/1.8.0_151)[\\r][\\n]\"\n[org.apache.http.wire] http-outgoing-0 &gt;&gt; \"[\\r][\\n]\"\n[org.apache.http.wire] http-outgoing-0 &gt;&gt; \"grant_type=client_credentials&amp;scope=DUMMYSCOPE\"\n[org.apache.http.wire] http-outgoing-0 &lt;&lt; \"HTTP/1.1 200 OK[\\r][\\n]\"\n[org.apache.http.wire] http-outgoing-0 &lt;&lt; \"Date: Tue, 21 Aug 2018 04:11:35 GMT[\\r][\\n]\"\n[org.apache.http.wire] http-outgoing-0 &lt;&lt; \"Content-Type: application/json; charset=UTF-8[\\r][\\n]\"\n[org.apache.http.wire] http-outgoing-0 &lt;&lt; \"Content-Length: 72[\\r][\\n]\"\n[org.apache.http.wire] http-outgoing-0 &lt;&lt; \"Connection: keep-alive[\\r][\\n]\"\n[org.apache.http.wire] http-outgoing-0 &lt;&lt; \"Access-Control-Allow-Origin: *[\\r][\\n]\"\n[org.apache.http.wire] http-outgoing-0 &lt;&lt; \"Cache-Control: no-cache,no-store,must-revalidate[\\r][\\n]\"\n[org.apache.http.wire] http-outgoing-0 &lt;&lt; \"Pragma: no-cache[\\r][\\n]\"\n[org.apache.http.wire] http-outgoing-0 &lt;&lt; \"Expires: 0[\\r][\\n]\"\n[org.apache.http.wire] http-outgoing-0 &lt;&lt; \"Strict-Transport-Security: max-age=31536000; includeSubDomains;[\\r][\\n]\"\n[org.apache.http.wire] http-outgoing-0 &lt;&lt; \"[\\r][\\n]\"\n[org.apache.http.wire] http-outgoing-0 &lt;&lt; \"{ \"xxxx_xxxxx\": \"xxxxxxxxxxxxxxxxxxxxxxxxxxxxx\", \"xxxx_xxxxx\": \"xxxx\" }\"\n[org.apache.http.headers] http-outgoing-0 &lt;&lt; HTTP/1.1 200 OK\n[org.apache.http.headers] http-outgoing-0 &lt;&lt; Date: Tue, 21 Aug 2018 04:11:35 GMT\n[org.apache.http.headers] http-outgoing-0 &lt;&lt; Content-Type: application/json; charset=UTF-8\n[org.apache.http.headers] http-outgoing-0 &lt;&lt; Content-Length: 72\n[org.apache.http.headers] http-outgoing-0 &lt;&lt; Connection: keep-alive\n[org.apache.http.headers] http-outgoing-0 &lt;&lt; Access-Control-Allow-Origin: *\n[org.apache.http.headers] http-outgoing-0 &lt;&lt; Cache-Control: no-cache,no-store,must-revalidate\n[org.apache.http.headers] http-outgoing-0 &lt;&lt; Pragma: no-cache\n[org.apache.http.headers] http-outgoing-0 &lt;&lt; Expires: 0\n[org.apache.http.headers] http-outgoing-0 &lt;&lt; Strict-Transport-Security: max-age=31536000; includeSubDomains;\n[org.apache.http.impl.execchain.MainClientExec] Connection can be kept alive indefinitely\n[org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection [id: 0][route: {tls}-&gt;http://192.168.xxx.xxx:xxxx-&gt;https://endpoint-ssl-url.com:443] can be kept alive indefinitely\n[org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection released: [id: 0][route: {tls}-&gt;http://192.168.xxx.xxx:xxxx-&gt;https://endpoint-ssl-url.com:443][total kept alive: 1; route allocated: 1 of 20; total allocated: 1 of 200]\n[com.integration.processors.base.http.HttpResponseProcessor] process(). is started\n[com.integration.processors.base.common.InterfaceProcessor] loadMessageData().messageId : message-x-id | messageName : message-x-name\n[com.integration.processors.base.http.HttpResponseProcessor] process(). httpResponseCode : 200 | httpResponseText : OK\n[com.integration.processors.interfaces.http.message-x-nameResponseProcessor] decodeResponse().rootNode : {\"xxxx_xxxxx\":\"xxxxxxxxxxxxxxxxxxxxxxxxxxxxx\",\"xxxx_xxxxx\":\"xxxx\"}\n[com.integration.processors.interfaces.http.message-x-nameResponseProcessor] decodeResponse().xxxx_xxxxx : xxxxxxxxxxxxxxxxxxxxxxxxxxxxx\n[com.integration.processors.base.http.HttpResponseProcessor] process().outResponseBody : {\"RESULT\":{\"condition\":\"good\",\"severity\":\"good\",\"summury\":\"Message X successful\",\"detail\":\"{ \\\"xxxx_xxxxx\\\": \\\"xxxxxxxxxxxxxxxxxxxxxxxxxxxxx\\\", \\\"xxxx_xxxxx\\\": \\\"xxxx\\\" }\\nxxxxxxxxxxxxxxxxxxxxxxxxxxxxxMessage X successful\\n\"},\"OUTPUTS\":{\"xxxx_xxxxx\":\"xxxxxxxxxxxxxxxxxxxxxxxxxxxxx\",\"FAILURE_REASON\":null},\"SUCCESS\":true}\n</code></pre>\n"}],"owner":{"account_id":1054217,"reputation":8986,"user_id":1057291,"accept_rate":80,"display_name":"namalfernandolk"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":10269,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1695754945,"creation_date":1534827368,"question_id":51941789,"body_markdown":"I&#39;m trying to connect to a external https endpoint using camel https4 component through proxy.\r\nFor this I setup squid proxy in linux (18.04).\r\n\r\nAccording to the references [http://camel.apache.org/http4.html], I noted that this can be done using the proxyAuthHost and proxyAuthPort params.\r\nSo i tried to check it with the URL given as below\r\n\r\n&gt; https4://endpoint-ssl-url.com/path/to/resource?proxyAuthPort=xxxx&amp;proxyAuthHost=192.168.xxx.xxx&amp;bridgeEndpoint=true\r\n\r\nBut it gives &quot;`javax.net.ssl.SSLException: Unrecognized SSL message, plaintext connection?`&quot; continously. I tried number of ways as mentioned below but the result is same.\r\n\r\nCan anyone give a hint on this based on your experience / expertise?\r\n\r\n**Attempt 1 :** Using PoolingHttpClientConnectionManager\r\n\r\nCode : \r\n\r\n    @ApplicationScoped\r\n    @ContextName(&quot;camel_cdi_context&quot;)\r\n    public class HTTPRouter extends RouteBuilder {\r\n    \r\n        @Override\r\n        public void configure() throws Exception {\r\n        \t\r\n        \terrorHandler(deadLetterChannel(&quot;direct:error&quot;));\r\n    \r\n    \t\ttry {\r\n    \r\n    \t\t\tSSLContext sslContext = new SSLContextBuilder()\r\n    \t\t\t\t\t.loadTrustMaterial(null, new TrustStrategy() {\r\n    \t\t\t\t\t\tpublic boolean isTrusted(X509Certificate[] arg0, String arg1) throws CertificateException {\r\n    \t\t\t\t\t\t\tSystem.out.println(&quot;HTTPRouter.configure().new TrustStrategy() {...}.isTrusted()&quot;);\r\n    \t\t\t\t\t\t\treturn true;\r\n    \t\t\t\t\t\t}\r\n    \t\t\t\t\t})\r\n    \t\t\t\t\t.build();\r\n    \r\n    \t\t\tfinal SSLConnectionSocketFactory sslsf = new SSLConnectionSocketFactory(sslContext);\r\n    \r\n    \t\t\tHttpComponent http4 = getContext().getComponent(&quot;https4&quot;, HttpComponent.class);\r\n    \t\t\thttp4.setHttpClientConfigurer(new HttpClientConfigurer() {\r\n    \r\n    \t\t\t\t@Override\r\n    \t\t\t\tpublic void configureHttpClient(HttpClientBuilder builder) {\r\n    \r\n    \t\t\t\t\tbuilder.setSSLSocketFactory(sslsf);\r\n    \r\n    \t\t\t\t\tSystem.out.println(&quot;HTTPRouter.configure().new HttpClientConfigurer() {...}.configureHttpClient()-1&quot;);\r\n    \t\t\t\t\tRegistry&lt;ConnectionSocketFactory&gt; r = RegistryBuilder.&lt;ConnectionSocketFactory&gt;create()\r\n    \t\t\t\t\t\t\t.register(&quot;http&quot;, PlainConnectionSocketFactory.getSocketFactory())\r\n    \t\t\t\t\t\t\t.register(&quot;https&quot;, sslsf)\r\n    \t\t\t\t\t\t\t.build();\r\n    \t\t\t\t\tSystem.out.println(&quot;HTTPRouter.configure().new HttpClientConfigurer() {...}.configureHttpClient()-2&quot;);\r\n    \t\t\t\t\tHttpClientConnectionManager cm = new PoolingHttpClientConnectionManager(r);\r\n    \t\t\t\t\tSystem.out.println(&quot;HTTPRouter.configure().new HttpClientConfigurer() {...}.configureHttpClient()-3&quot;);\r\n    \t\t\t\t\tbuilder.setConnectionManager(cm);\r\n    \t\t\t\t\tSystem.out.println(&quot;HTTPRouter.configure().new HttpClientConfigurer() {...}.configureHttpClient()-4&quot;);\r\n    \t\t\t\t}\r\n    \t\t\t});\r\n    \r\n    \t\t} catch (Exception e) {\r\n    \t\t\te.printStackTrace();\r\n    \t\t}\r\n    \r\n    \t\tfrom(&quot;direct:http&quot;)\r\n    \t\t\t// prepare request payload\r\n    \t\t\t// set url to header\r\n    \t\t\t// set other connection properties (eg : Connection Method, Header etc)\r\n    \t\t\t.choice()\r\n    \t\t\t.when(header(&quot;url&quot;).contains(&quot;?&quot;))\r\n    \t\t\t\t.toD(&quot;${header.url}&amp;throwExceptionOnFailure=false&quot;)\r\n    \t\t\t.endChoice()\r\n    \t\t\t.otherwise()\r\n    \t\t\t\t.toD(&quot;${header.url}?throwExceptionOnFailure=false&quot;)\r\n    \t\t\t.endChoice()\r\n    \t\t.end()\r\n    \t\t.convertBodyTo(String.class)\r\n    \t\t// process on the response\r\n        \t\r\n        }\r\n        \r\n    }\r\n\r\n\r\nLog : \r\n\r\n    [org.apache.camel.component.http4.HttpComponent] Created ClientConnectionManager org.apache.http.impl.conn.PoolingHttpClientConnectionManager@2516c8e0\r\n    [stdout] HTTPRouter.configure().new HttpClientConfigurer() {...}.configureHttpClient()-1\r\n    [stdout] HTTPRouter.configure().new HttpClientConfigurer() {...}.configureHttpClient()-2\r\n    [stdout] HTTPRouter.configure().new HttpClientConfigurer() {...}.configureHttpClient()-3\r\n    [stdout] HTTPRouter.configure().new HttpClientConfigurer() {...}.configureHttpClient()-4\r\n    [org.apache.http.client.protocol.RequestAddCookies] CookieSpec selected: default\r\n    [org.apache.http.client.protocol.RequestAuthCache] Auth cache not set in the context\r\n    [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection request: [route: {tls}-&gt;https://192.168.xxx.xxx:xxxx-&gt;https://endpoint-ssl-url.com:443][total kept alive: 0; route allocated: 0 of 2; total allocated: 0 of 20]\r\n    [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection leased: [id: 10][route: {tls}-&gt;https://192.168.xxx.xxx:xxxx-&gt;https://endpoint-ssl-url.com:443][total kept alive: 0; route allocated: 1 of 2; total allocated: 1 of 20]\r\n    [org.apache.http.impl.execchain.MainClientExec] Opening connection {tls}-&gt;https://192.168.xxx.xxx:xxxx-&gt;https://endpoint-ssl-url.com:443\r\n    [org.apache.http.impl.conn.DefaultHttpClientConnectionOperator] Connecting to /192.168.xxx.xxx:xxxx\r\n    [org.apache.http.conn.ssl.SSLConnectionSocketFactory] Connecting socket to /192.168.xxx.xxx:xxxx with timeout 0\r\n    [org.apache.http.conn.ssl.SSLConnectionSocketFactory] Enabled protocols: [TLSv1, TLSv1.1, TLSv1.2]\r\n    [org.apache.http.conn.ssl.SSLConnectionSocketFactory] Enabled cipher suites:[TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256, MORE_CIPHERS ...]\r\n    [org.apache.http.conn.ssl.SSLConnectionSocketFactory] Starting handshake\r\n    [org.apache.http.impl.conn.DefaultManagedHttpClientConnection] http-outgoing-30: Shutdown connection\r\n    [org.apache.http.impl.execchain.MainClientExec] Connection discarded\r\n    [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection released: [id: 10][route: {tls}-&gt;https://192.168.xxx.xxx:xxxx-&gt;https://endpoint-ssl-url.com:443][total kept alive: 0; route allocated: 0 of 2; total allocated: 0 of 20]\r\n    [ERROR] Exchange[Id: ID-xxxx-xxx-37655-1534782529403-63-2, ExchangePattern: InOnly, Properties: {CamelCreatedTimestamp=Tue Aug 21 01:54:27 UTC 2018, CamelExceptionCaught=javax.net.ssl.SSLException: Unrecognized SSL message, plaintext connection?, CamelFailureEndpoint=https4://endpoint-ssl-url.com/path/to/resource?proxyAuthPort=xxxx&amp;throwExceptionOnFailure=false&amp;proxyAuthHost=192.168.xxx.xxx, CamelFailureRouteId=route221, CamelFatalFallbackErrorHandler=[route221], CamelFilterMatched=true, CamelMessageHistory=[REMOVED...], CamelToEndpoint=log://ERROR?showAll=true}, Headers: {Accept=application/json, Accept-Encoding=gzip, Authorization=Basic XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX==, breadcrumbId=ID-xxxxx-xxx-37655-1534782529403-63-1, CamelFileName=null, CamelFileNameProduced=/xxxxxx/path/to/payloads/2018-08-21/message-id-x-[EXT-Request]-2018-08-21-015427600.json, CamelHttpMethod=POST, Content-Type=application/x-www-form-urlencoded, doLogFiles=true, dontLogErrorFiles=false, messageId=message-id-x, messageName=message-name-x, routeId=direct-http, specialRq=true, specialRs=true, url=https4://endpoint-ssl-url.com/path/to/resource?proxyAuthPort=xxxx&amp;proxyAuthHost=192.168.xxx.xxx}, BodyType: String, Body: grant_type=client_credentials&amp;scope=DUMMYSCOPE, CaughtExceptionType: javax.net.ssl.SSLException, CaughtExceptionMessage: Unrecognized SSL message, plaintext connection?, StackTrace: javax.net.ssl.SSLException: Unrecognized SSL message, plaintext connection?\r\n    \tat sun.security.ssl.InputRecord.handleUnknownRecord(InputRecord.java:710)\r\n    \tat sun.security.ssl.InputRecord.read(InputRecord.java:527)\r\n    \tat sun.security.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:983)\r\n    \tat sun.security.ssl.SSLSocketImpl.performInitialHandshake(SSLSocketImpl.java:1385)\r\n    \tat sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1413)\r\n    \tat sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1397)\r\n    \tat org.apache.http.conn.ssl.SSLConnectionSocketFactory.createLayeredSocket(SSLConnectionSocketFactory.java:396)\r\n    \tat org.apache.http.conn.ssl.SSLConnectionSocketFactory.connectSocket(SSLConnectionSocketFactory.java:355)\r\n    \tat org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:142)\r\n    \tat org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:359)\r\n    \tat org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:389)\r\n    \tat org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:237)\r\n    \tat org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:185)\r\n    \tat org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)\r\n    \tat org.apache.http.impl.execchain.RedirectExec.execute(RedirectExec.java:111)\r\n    \tat org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)\r\n    \tat org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:83)\r\n    \tat org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56)\r\n    \tat org.apache.camel.component.http4.HttpProducer.executeMethod(HttpProducer.java:334)\r\n    \tat org.apache.camel.component.http4.HttpProducer.process(HttpProducer.java:193)\r\n\r\n\r\n\r\n**Attempt 2 :** Using BasicHttpClientConnectionManager\r\n\r\nCode :\r\n\r\n    @ApplicationScoped\r\n    @ContextName(&quot;camel_cdi_context&quot;)\r\n    public class HTTPRouter extends RouteBuilder {\r\n    \r\n        @Override\r\n        public void configure() throws Exception {\r\n        \t\r\n        \terrorHandler(deadLetterChannel(&quot;direct:error&quot;));\r\n    \r\n    \t\ttry {\r\n    \r\n        \t\tTrustManager[] trustAllCerts = new TrustManager[] {new X509TrustManager() {\r\n        \t\t\tpublic java.security.cert.X509Certificate[] getAcceptedIssuers() {\r\n        \t\t\t\tSystem.out.println(&quot;HTTPRouter.configure()&quot;);\r\n        \t\t\t\treturn null;\r\n        \t\t\t}\r\n        \t\t\tpublic void checkClientTrusted(X509Certificate[] certs, String authType) {\r\n        \t\t\t}\r\n        \t\t\tpublic void checkServerTrusted(X509Certificate[] certs, String authType) {\r\n        \t\t\t}\r\n        \t\t}\r\n        \t\t};\r\n    \r\n        \t\tSSLContext sslContext = SSLContext.getInstance(&quot;SSL&quot;);\r\n        \t\tsslContext.init(null, trustAllCerts, new java.security.SecureRandom());\r\n    \r\n                HostnameVerifier allHostsValid = new HostnameVerifier() {\r\n                    public boolean verify(String hostname, SSLSession session) {\r\n                    \tSystem.out.println(&quot;HTTPRouter.configure().new HostnameVerifier() {...}.verify()&quot;);\r\n                        return true;\r\n                    }\r\n                };\r\n        \t\t\r\n        \t\tfinal SSLConnectionSocketFactory \t\tsslConnectionSocketFactory \t\t\t= new SSLConnectionSocketFactory(sslContext,new String[]{&quot;TLSv1.2&quot;, &quot;TLSv1.1&quot;, &quot;TLSv1&quot;, &quot;SSLv3&quot;}, null, allHostsValid);\r\n    \r\n        \t\tHttpComponent http4 = getContext().getComponent(&quot;https4&quot;, HttpComponent.class);\r\n        \t\thttp4.setHttpClientConfigurer(new HttpClientConfigurer() {\r\n    \r\n        \t\t\t@Override\r\n        \t\t\tpublic void configureHttpClient(HttpClientBuilder builder) {\r\n        \t\t\t\tbuilder.setSSLSocketFactory(sslConnectionSocketFactory);\r\n        \t\t\t\tSystem.out.println(&quot;HTTPRouter.configure().new HttpClientConfigurer() {...}.configureHttpClient() - 1&quot;);\r\n        \t\t\t\tRegistry&lt;ConnectionSocketFactory&gt; registry = RegistryBuilder.&lt;ConnectionSocketFactory&gt;create()\r\n        \t\t\t\t\t\t.register(&quot;https&quot;, sslConnectionSocketFactory)\r\n        \t\t\t\t\t\t.build();\r\n        \t\t\t\tSystem.out.println(&quot;HTTPRouter.configure().new HttpClientConfigurer() {...}.configureHttpClient() - 2&quot;);\r\n        \t\t\t\tHttpClientConnectionManager connectionManager = new  BasicHttpClientConnectionManager(registry);\r\n        \t\t\t\tSystem.out.println(&quot;HTTPRouter.configure().new HttpClientConfigurer() {...}.configureHttpClient() - 3&quot;);\r\n        \t\t\t\tbuilder.setConnectionManager(connectionManager);\r\n        \t\t\t\tSystem.out.println(&quot;HTTPRouter.configure().new HttpClientConfigurer() {...}.configureHttpClient() - 4&quot;);\r\n        \t\t\t}\r\n        \t\t});\r\n    \r\n        \t} catch (Exception e) {\r\n    \t\t\te.printStackTrace();\r\n    \t\t}\r\n    \r\n    \t\tfrom(&quot;direct:http&quot;)\r\n    \t\t\t// prepare request payload\r\n    \t\t\t// set url to header\r\n    \t\t\t// set other connection properties (eg : Connection Method, Header etc)\r\n    \t\t\t.choice()\r\n    \t\t\t.when(header(&quot;url&quot;).contains(&quot;?&quot;))\r\n    \t\t\t\t.toD(&quot;${header.url}&amp;throwExceptionOnFailure=false&quot;)\r\n    \t\t\t.endChoice()\r\n    \t\t\t.otherwise()\r\n    \t\t\t\t.toD(&quot;${header.url}?throwExceptionOnFailure=false&quot;)\r\n    \t\t\t.endChoice()\r\n    \t\t.end()\r\n    \t\t.convertBodyTo(String.class)\r\n    \t\t// process on the response\r\n        \t\r\n        }\r\n        \r\n    }\r\n\r\nLog : \r\n\r\n    [org.apache.camel.component.http4.HttpComponent] Created ClientConnectionManager org.apache.http.impl.conn.PoolingHttpClientConnectionManager@2bb0862\r\n    [stdout] HTTPRouter.configure().new HttpClientConfigurer() {...}.configureHttpClient() - 1\r\n    [stdout] HTTPRouter.configure().new HttpClientConfigurer() {...}.configureHttpClient() - 2\r\n    [stdout] HTTPRouter.configure().new HttpClientConfigurer() {...}.configureHttpClient() - 3\r\n    [stdout] HTTPRouter.configure().new HttpClientConfigurer() {...}.configureHttpClient() - 4\r\n    [org.apache.http.client.protocol.RequestAddCookies] CookieSpec selected: default\r\n    [org.apache.http.client.protocol.RequestAuthCache] Auth cache not set in the context\r\n    [org.apache.http.impl.conn.BasicHttpClientConnectionManager] Get connection for route {tls}-&gt;https://192.168.xxx.xxx:xxxx-&gt;https://endpoint-ssl-url.com:443\r\n    [org.apache.http.impl.execchain.MainClientExec] Opening connection {tls}-&gt;https://192.168.xxx.xxx:xxxx-&gt;https://endpoint-ssl-url.com:443\r\n    [org.apache.http.impl.conn.DefaultHttpClientConnectionOperator] Connecting to /192.168.xxx.xxx:xxxx\r\n    [org.apache.http.conn.ssl.SSLConnectionSocketFactory] Connecting socket to /192.168.xxx.xxx:xxxx with timeout 0\r\n    [org.apache.http.conn.ssl.SSLConnectionSocketFactory] Enabled protocols: [SSLv3, TLSv1, TLSv1.1, TLSv1.2]\r\n    [org.apache.http.conn.ssl.SSLConnectionSocketFactory] Enabled cipher suites:[TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256, MORE_CIPHERS ...]\r\n    [org.apache.http.conn.ssl.SSLConnectionSocketFactory] Starting handshake\r\n    [org.apache.http.impl.conn.DefaultManagedHttpClientConnection] http-outgoing-31: Shutdown connection\r\n    [org.apache.http.impl.execchain.MainClientExec] Connection discarded\r\n    [org.apache.http.impl.conn.BasicHttpClientConnectionManager] Releasing connection [Not bound]\r\n    [ERROR] Exchange[Id: ID-xxxxx-xxx-37655-1534782529403-65-2, ExchangePattern: InOnly, Properties: {CamelCreatedTimestamp=Tue Aug 21 01:58:30 UTC 2018, CamelExceptionCaught=javax.net.ssl.SSLException: Unrecognized SSL message, plaintext connection?, CamelFailureEndpoint=https4://endpoint-ssl-url.com/path/to/resource?proxyAuthPort=xxxx&amp;throwExceptionOnFailure=false&amp;proxyAuthHost=192.168.xxx.xxx, CamelFailureRouteId=route228, CamelFatalFallbackErrorHandler=[route228], CamelFilterMatched=true, CamelMessageHistory=[REMOVED...], CamelToEndpoint=log://ERROR?showAll=true}, Headers: {Accept=application/json, Accept-Encoding=gzip, Authorization=Basic XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX, breadcrumbId=ID-namal-pc-37655-1534782529403-65-1, CamelFileName=null, CamelFileNameProduced=/xxxxxx/path/to/payloads/2018-08-21/message-id-x-[EXT-Request]-2018-08-21-015830349.json, CamelHttpMethod=POST, Content-Type=application/x-www-form-urlencoded, doLogFiles=true, dontLogErrorFiles=false, messageId=message-id-x, messageName=message-name-x, routeId=direct-http, specialRq=true, specialRs=true, url=https4://endpoint-ssl-url.com/path/to/resource?proxyAuthPort=xxxx&amp;proxyAuthHost=192.168.xxx.xxx}, BodyType: String, Body: grant_type=client_credentials&amp;scope=DUMMYSCOPE, CaughtExceptionType: javax.net.ssl.SSLException, CaughtExceptionMessage: Unrecognized SSL message, plaintext connection?, StackTrace: javax.net.ssl.SSLException: Unrecognized SSL message, plaintext connection?\r\n    \tat sun.security.ssl.InputRecord.handleUnknownRecord(InputRecord.java:710)\r\n    \tat sun.security.ssl.InputRecord.read(InputRecord.java:527)\r\n    \tat sun.security.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:983)\r\n    \tat sun.security.ssl.SSLSocketImpl.performInitialHandshake(SSLSocketImpl.java:1385)\r\n    \tat sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1413)\r\n    \tat sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1397)\r\n    \tat org.apache.http.conn.ssl.SSLConnectionSocketFactory.createLayeredSocket(SSLConnectionSocketFactory.java:396)\r\n    \tat org.apache.http.conn.ssl.SSLConnectionSocketFactory.connectSocket(SSLConnectionSocketFactory.java:355)\r\n    \tat org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:142)\r\n    \tat org.apache.http.impl.conn.BasicHttpClientConnectionManager.connect(BasicHttpClientConnectionManager.java:323)\r\n    \tat org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:389)\r\n    \tat org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:237)\r\n    \tat org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:185)\r\n    \tat org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)\r\n    \tat org.apache.http.impl.execchain.RedirectExec.execute(RedirectExec.java:111)\r\n    \tat org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)\r\n    \tat org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:83)\r\n    \tat org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56)\r\n    \tat org.apache.camel.component.http4.HttpProducer.executeMethod(HttpProducer.java:334)\r\n    \tat org.apache.camel.component.http4.HttpProducer.process(HttpProducer.java:193)\r\n\r\n\r\n\r\n**Attempt 3 :** Mix of above two approaches\r\nResult : same exception\r\n\r\n**Attempt 4 :** Using with Httpurlconnection\r\nI did this as a controlled test and it was succeeded.\r\nCode : \r\n\r\n    private void testViaHttpUrlConnection() throws Exception {\r\n    \r\n    \t\tSystem.setProperty(&quot;jsse.enableSNIExtension&quot;, &quot;false&quot;);\r\n    \r\n    \t\tByteArrayOutputStream \tbaos \t\t\t\t= null;\r\n    \t\tString \t\t\t\t\trequestPayload \t\t= &quot;&lt;payload...&gt;&quot;;\r\n    \t\tString \t\t\t\t\turl \t\t\t\t= &quot;https://endpoint-ssl-url.com/path/tp/resource&quot;;\r\n    \t\tint \t\t\t\t\tconnectionTimeOut \t= 45;\r\n    \t\tint \t\t\t\t\treadTimeOut \t\t= 30;\r\n    \t\tString \t\t\t\t\tresponsePayload \t= null;\r\n    \t\tString \t\t\t\t\tproxyIp \t\t\t= &quot;192.168.xxx.xxx&quot;;\r\n    \t\tint \t\t\t\t\tproxyPort \t\t\t= xxxx;\r\n    \r\n    \t\ttry {\r\n    \r\n    \t\t\tbaos = new ByteArrayOutputStream();\r\n    \t\t\tbaos.write(((String)requestPayload).getBytes());\r\n    \r\n    \t\t\tTrustManager[] trustAllCerts = new TrustManager[] {new X509TrustManager() {\r\n    \t\t\t\tpublic java.security.cert.X509Certificate[] getAcceptedIssuers() {\r\n    \t\t\t\t\treturn null;\r\n    \t\t\t\t}\r\n    \t\t\t\tpublic void checkClientTrusted(X509Certificate[] certs, String authType) {\r\n    \t\t\t\t}\r\n    \t\t\t\tpublic void checkServerTrusted(X509Certificate[] certs, String authType) {\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\t\t};\r\n    \r\n    \t\t\tSSLContext sc = SSLContext.getInstance(&quot;SSL&quot;);\r\n    \t\t\tsc.init(null, trustAllCerts, new java.security.SecureRandom());\r\n    \t\t\tHttpsURLConnection.setDefaultSSLSocketFactory(sc.getSocketFactory());\r\n    \r\n    \t\t\tHostnameVerifier allHostsValid = new HostnameVerifier() {\r\n    \t\t\t\tpublic boolean verify(String hostname, SSLSession session) {\r\n    \t\t\t\t\treturn true;\r\n    \t\t\t\t}\r\n    \t\t\t};\r\n    \r\n    \t\t\tHttpsURLConnection.setDefaultHostnameVerifier(allHostsValid);\r\n    \r\n    \t\t\tURL \t\t\t\t\tmUrl\t= new URL(url);\r\n    \r\n    \t\t\tURLConnection \t\t\tucon \t= null;\r\n    \r\n    \t\t\tProxy proxy_server = new Proxy(Proxy.Type.HTTP, new InetSocketAddress(proxyIp, proxyPort));\r\n    \r\n    \t\t\tucon = mUrl.openConnection(proxy_server);\r\n    \r\n    \t\t\tHttpURLConnection con \t\t\t\t= (HttpURLConnection) ucon;\r\n    \r\n    \t\t\tcon.setConnectTimeout(connectionTimeOut * 1000);\r\n    \t\t\tcon.setReadTimeout(readTimeOut*1000);\r\n    \t\t\tcon.setDoOutput(true);\r\n    \t\t\tcon.setUseCaches(false);\r\n    \t\t\tcon.setDoInput(true);\r\n    \t\t\tcon.setRequestMethod(&quot;POST&quot;);\r\n    \t\t\tcon.setRequestProperty(&quot;Content-Type&quot;,&quot;application/x-www-form-urlencoded&quot;);\r\n    \r\n    \t\t\tbaos.writeTo(con.getOutputStream());\r\n    \r\n    \t\t\tInputStream responseStream = null;\r\n    \t\t\tByteArrayOutputStream baosRsp = null;\r\n    \r\n    \t\t\ttry {\r\n    \r\n    \t\t\t\tresponseStream \t\t\t\t\t= con.getInputStream();\r\n    \r\n    \t\t\t\tbaosRsp = new ByteArrayOutputStream();\r\n    \t\t\t\tbyte[] buffer = new byte[4096];\r\n    \t\t\t\tint length = 0;\r\n    \t\t\t\twhile ((length = responseStream.read(buffer)) != -1) {\r\n    \t\t\t\t\tbaosRsp.write(buffer, 0, length);\r\n    \t\t\t\t}\r\n    \r\n    \t\t\t\tresponsePayload = new String(baosRsp.toByteArray());\r\n    \r\n    \t\t\t}finally {\r\n    \t\t\t\ttry{responseStream.close();}catch (Exception e) { responseStream = null;}\r\n    \t\t\t\ttry{baosRsp.close();}catch (Exception e) { baosRsp = null;}\r\n    \t\t\t}\r\n    \r\n    \t\t}finally {\r\n    \t\t\ttry{baos.close();}catch (Exception e) { baos = null;}\r\n    \t\t}\r\n    \r\n    \t}\r\n\r\n**Attempt 5 :** Without proxy and without trust managers  - working fine\r\n\r\n**Attempt 6 :** Without proxy and above Attemp 1  - working fine\r\n\r\nLog : \r\n\r\n    [org.apache.camel.component.http4.HttpComponent] Created ClientConnectionManager org.apache.http.impl.conn.PoolingHttpClientConnectionManager@7800e6b6\r\n    [stdout] HTTPRouter.configure().new HttpClientConfigurer() {...}.configureHttpClient()-1\r\n    [stdout] HTTPRouter.configure().new HttpClientConfigurer() {...}.configureHttpClient()-2\r\n    [stdout] HTTPRouter.configure().new HttpClientConfigurer() {...}.configureHttpClient()-3\r\n    [stdout] HTTPRouter.configure().new HttpClientConfigurer() {...}.configureHttpClient()-4\r\n    [org.apache.http.client.protocol.RequestAddCookies] CookieSpec selected: default\r\n    [org.apache.http.client.protocol.RequestAuthCache] Auth cache not set in the context\r\n    [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection request: [route: {s}-&gt;https://endpoint-ssl-url.com:443][total kept alive: 0; route allocated: 0 of 2; total allocated: 0 of 20]\r\n    [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection leased: [id: 11][route: {s}-&gt;https://endpoint-ssl-url.com:443][total kept alive: 0; route allocated: 1 of 2; total allocated: 1 of 20]\r\n    [org.apache.http.impl.execchain.MainClientExec] Opening connection {s}-&gt;https://endpoint-ssl-url.com:443\r\n    [org.apache.http.impl.conn.DefaultHttpClientConnectionOperator] Connecting to endpoint-ssl-url.com/xxx.xxx.xxx.xxx:443\r\n    [org.apache.http.conn.ssl.SSLConnectionSocketFactory] Connecting socket to endpoint-ssl-url.com/xxx.xxx.xxx.xxx:443 with timeout 0\r\n    [org.apache.http.conn.ssl.SSLConnectionSocketFactory] Enabled protocols: [TLSv1, TLSv1.1, TLSv1.2]\r\n    [org.apache.http.conn.ssl.SSLConnectionSocketFactory] Enabled cipher suites:[TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256, MORE_CIPHERS ...]\r\n    [org.apache.http.conn.ssl.SSLConnectionSocketFactory] Starting handshake\r\n    [stdout] HTTPRouter.configure().new TrustStrategy() {...}.isTrusted()\r\n    [org.apache.http.conn.ssl.SSLConnectionSocketFactory] Secure session established\r\n    [org.apache.http.conn.ssl.SSLConnectionSocketFactory]  negotiated protocol: TLSv1.2\r\n    [org.apache.http.conn.ssl.SSLConnectionSocketFactory]  negotiated cipher suite: TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256\r\n    [org.apache.http.conn.ssl.SSLConnectionSocketFactory]  peer principal: CN=endpoint-ssl-url.com, OU=Software Engineering Services, O=Telstra Corporation Limited, L=Melbourne, ST=Victoria, C=AU\r\n    [org.apache.http.conn.ssl.SSLConnectionSocketFactory]  peer alternative names: [endpoint-ssl-url.com]\r\n    [org.apache.http.conn.ssl.SSLConnectionSocketFactory]  issuer principal: CN=QuoVadis Global SSL ICA G3, O=QuoVadis Limited, C=BM\r\n    [org.apache.http.impl.conn.DefaultHttpClientConnectionOperator] Connection established 192.168.xxx.xxx:50230&lt;-&gt;xxx.xxx.xxx.xxx:443\r\n    [org.apache.http.impl.execchain.MainClientExec] Executing request POST /path/to/resource HTTP/1.1\r\n    [org.apache.http.impl.execchain.MainClientExec] Proxy auth state: UNCHALLENGED\r\n    [org.apache.http.headers] http-outgoing-34 &gt;&gt; POST /path/to/resource HTTP/1.1\r\n    [org.apache.http.headers] http-outgoing-34 &gt;&gt; Accept: application/json\r\n    [org.apache.http.headers] http-outgoing-34 &gt;&gt; Accept-Encoding: gzip\r\n\r\n\r\n**Attempt 7 :** Without proxy and above Attemp 2  - working fine\r\nLog : \r\n\r\n    [org.apache.camel.component.http4.HttpComponent] Created ClientConnectionManager org.apache.http.impl.conn.PoolingHttpClientConnectionManager@21c33b01\r\n    [stdout] HTTPRouter.configure().new HttpClientConfigurer() {...}.configureHttpClient() - 1\r\n    [stdout] HTTPRouter.configure().new HttpClientConfigurer() {...}.configureHttpClient() - 2\r\n    [stdout] HTTPRouter.configure().new HttpClientConfigurer() {...}.configureHttpClient() - 3\r\n    [stdout] HTTPRouter.configure().new HttpClientConfigurer() {...}.configureHttpClient() - 4\r\n    [org.apache.http.client.protocol.RequestAddCookies] CookieSpec selected: default\r\n    [org.apache.http.client.protocol.RequestAuthCache] Auth cache not set in the context\r\n    [org.apache.http.impl.conn.BasicHttpClientConnectionManager] Get connection for route {s}-&gt;https://endpoint-ssl-url.com:443\r\n    [org.apache.http.impl.execchain.MainClientExec] Opening connection {s}-&gt;https://endpoint-ssl-url.com:443\r\n    [org.apache.http.impl.conn.DefaultHttpClientConnectionOperator] Connecting to endpoint-ssl-url.com/xxx.xxx.xxx.xxx## Heading ##:443\r\n    [org.apache.http.conn.ssl.SSLConnectionSocketFactory] Connecting socket to endpoint-ssl-url.com/xxx.xxx.xxx.xxx:443 with timeout 0\r\n    [org.apache.http.conn.ssl.SSLConnectionSocketFactory] Enabled protocols: [SSLv3, TLSv1, TLSv1.1, TLSv1.2]\r\n    [org.apache.http.conn.ssl.SSLConnectionSocketFactory] Enabled cipher suites:[TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256, MORE_CIPHERS ...]\r\n    [org.apache.http.conn.ssl.SSLConnectionSocketFactory] Starting handshake\r\n    [stdout] HTTPRouter.configure()\r\n    [org.apache.http.conn.ssl.SSLConnectionSocketFactory] Secure session established\r\n    [org.apache.http.conn.ssl.SSLConnectionSocketFactory]  negotiated protocol: TLSv1.2\r\n    [org.apache.http.conn.ssl.SSLConnectionSocketFactory]  negotiated cipher suite: TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256\r\n    [org.apache.http.conn.ssl.SSLConnectionSocketFactory]  peer principal: CN=endpoint-ssl-url.com, OU=Software Engineering Services, O=Telstra Corporation Limited, L=Melbourne, ST=Victoria, C=AU\r\n    [org.apache.http.conn.ssl.SSLConnectionSocketFactory]  peer alternative names: [endpoint-ssl-url.com]\r\n    [org.apache.http.conn.ssl.SSLConnectionSocketFactory]  issuer principal: CN=QuoVadis Global SSL ICA G3, O=QuoVadis Limited, C=BM\r\n    [stdout] HTTPRouter.configure().new HostnameVerifier() {...}.verify()\r\n    [org.apache.http.impl.conn.DefaultHttpClientConnectionOperator] Connection established 192.168.xxx.xxx:57748&lt;-&gt;xxx.xxx.xxx.xxx:443\r\n    [org.apache.http.impl.execchain.MainClientExec] Executing request POST /path/to/resource HTTP/1.1\r\n    [org.apache.http.impl.execchain.MainClientExec] Proxy auth state: UNCHALLENGED\r\n    [org.apache.http.headers] http-outgoing-32 &gt;&gt; POST /path/to/resource HTTP/1.1\r\n\r\n\r\n\r\n**Attempt - 8 :** Tried with another http endpoint with the http4 component in the same way and it was succeeded.\r\n\r\n**Attempt - 9 :** Tried with directly using to() component also but same results.\r\n","title":"SSLException: Unrecognized SSL message, plaintext connection? error while sending https POST in Camel via PROXY","body":"<p>I'm trying to connect to a external https endpoint using camel https4 component through proxy.\nFor this I setup squid proxy in linux (18.04).</p>\n\n<p>According to the references [<a href=\"http://camel.apache.org/http4.html]\" rel=\"nofollow noreferrer\">http://camel.apache.org/http4.html]</a>, I noted that this can be done using the proxyAuthHost and proxyAuthPort params.\nSo i tried to check it with the URL given as below</p>\n\n<blockquote>\n  <p>https4://endpoint-ssl-url.com/path/to/resource?proxyAuthPort=xxxx&amp;proxyAuthHost=192.168.xxx.xxx&amp;bridgeEndpoint=true</p>\n</blockquote>\n\n<p>But it gives \"<code>javax.net.ssl.SSLException: Unrecognized SSL message, plaintext connection?</code>\" continously. I tried number of ways as mentioned below but the result is same.</p>\n\n<p>Can anyone give a hint on this based on your experience / expertise?</p>\n\n<p><strong>Attempt 1 :</strong> Using PoolingHttpClientConnectionManager</p>\n\n<p>Code : </p>\n\n<pre><code>@ApplicationScoped\n@ContextName(\"camel_cdi_context\")\npublic class HTTPRouter extends RouteBuilder {\n\n    @Override\n    public void configure() throws Exception {\n\n        errorHandler(deadLetterChannel(\"direct:error\"));\n\n        try {\n\n            SSLContext sslContext = new SSLContextBuilder()\n                    .loadTrustMaterial(null, new TrustStrategy() {\n                        public boolean isTrusted(X509Certificate[] arg0, String arg1) throws CertificateException {\n                            System.out.println(\"HTTPRouter.configure().new TrustStrategy() {...}.isTrusted()\");\n                            return true;\n                        }\n                    })\n                    .build();\n\n            final SSLConnectionSocketFactory sslsf = new SSLConnectionSocketFactory(sslContext);\n\n            HttpComponent http4 = getContext().getComponent(\"https4\", HttpComponent.class);\n            http4.setHttpClientConfigurer(new HttpClientConfigurer() {\n\n                @Override\n                public void configureHttpClient(HttpClientBuilder builder) {\n\n                    builder.setSSLSocketFactory(sslsf);\n\n                    System.out.println(\"HTTPRouter.configure().new HttpClientConfigurer() {...}.configureHttpClient()-1\");\n                    Registry&lt;ConnectionSocketFactory&gt; r = RegistryBuilder.&lt;ConnectionSocketFactory&gt;create()\n                            .register(\"http\", PlainConnectionSocketFactory.getSocketFactory())\n                            .register(\"https\", sslsf)\n                            .build();\n                    System.out.println(\"HTTPRouter.configure().new HttpClientConfigurer() {...}.configureHttpClient()-2\");\n                    HttpClientConnectionManager cm = new PoolingHttpClientConnectionManager(r);\n                    System.out.println(\"HTTPRouter.configure().new HttpClientConfigurer() {...}.configureHttpClient()-3\");\n                    builder.setConnectionManager(cm);\n                    System.out.println(\"HTTPRouter.configure().new HttpClientConfigurer() {...}.configureHttpClient()-4\");\n                }\n            });\n\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n\n        from(\"direct:http\")\n            // prepare request payload\n            // set url to header\n            // set other connection properties (eg : Connection Method, Header etc)\n            .choice()\n            .when(header(\"url\").contains(\"?\"))\n                .toD(\"${header.url}&amp;throwExceptionOnFailure=false\")\n            .endChoice()\n            .otherwise()\n                .toD(\"${header.url}?throwExceptionOnFailure=false\")\n            .endChoice()\n        .end()\n        .convertBodyTo(String.class)\n        // process on the response\n\n    }\n\n}\n</code></pre>\n\n<p>Log : </p>\n\n<pre><code>[org.apache.camel.component.http4.HttpComponent] Created ClientConnectionManager org.apache.http.impl.conn.PoolingHttpClientConnectionManager@2516c8e0\n[stdout] HTTPRouter.configure().new HttpClientConfigurer() {...}.configureHttpClient()-1\n[stdout] HTTPRouter.configure().new HttpClientConfigurer() {...}.configureHttpClient()-2\n[stdout] HTTPRouter.configure().new HttpClientConfigurer() {...}.configureHttpClient()-3\n[stdout] HTTPRouter.configure().new HttpClientConfigurer() {...}.configureHttpClient()-4\n[org.apache.http.client.protocol.RequestAddCookies] CookieSpec selected: default\n[org.apache.http.client.protocol.RequestAuthCache] Auth cache not set in the context\n[org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection request: [route: {tls}-&gt;https://192.168.xxx.xxx:xxxx-&gt;https://endpoint-ssl-url.com:443][total kept alive: 0; route allocated: 0 of 2; total allocated: 0 of 20]\n[org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection leased: [id: 10][route: {tls}-&gt;https://192.168.xxx.xxx:xxxx-&gt;https://endpoint-ssl-url.com:443][total kept alive: 0; route allocated: 1 of 2; total allocated: 1 of 20]\n[org.apache.http.impl.execchain.MainClientExec] Opening connection {tls}-&gt;https://192.168.xxx.xxx:xxxx-&gt;https://endpoint-ssl-url.com:443\n[org.apache.http.impl.conn.DefaultHttpClientConnectionOperator] Connecting to /192.168.xxx.xxx:xxxx\n[org.apache.http.conn.ssl.SSLConnectionSocketFactory] Connecting socket to /192.168.xxx.xxx:xxxx with timeout 0\n[org.apache.http.conn.ssl.SSLConnectionSocketFactory] Enabled protocols: [TLSv1, TLSv1.1, TLSv1.2]\n[org.apache.http.conn.ssl.SSLConnectionSocketFactory] Enabled cipher suites:[TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256, MORE_CIPHERS ...]\n[org.apache.http.conn.ssl.SSLConnectionSocketFactory] Starting handshake\n[org.apache.http.impl.conn.DefaultManagedHttpClientConnection] http-outgoing-30: Shutdown connection\n[org.apache.http.impl.execchain.MainClientExec] Connection discarded\n[org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection released: [id: 10][route: {tls}-&gt;https://192.168.xxx.xxx:xxxx-&gt;https://endpoint-ssl-url.com:443][total kept alive: 0; route allocated: 0 of 2; total allocated: 0 of 20]\n[ERROR] Exchange[Id: ID-xxxx-xxx-37655-1534782529403-63-2, ExchangePattern: InOnly, Properties: {CamelCreatedTimestamp=Tue Aug 21 01:54:27 UTC 2018, CamelExceptionCaught=javax.net.ssl.SSLException: Unrecognized SSL message, plaintext connection?, CamelFailureEndpoint=https4://endpoint-ssl-url.com/path/to/resource?proxyAuthPort=xxxx&amp;throwExceptionOnFailure=false&amp;proxyAuthHost=192.168.xxx.xxx, CamelFailureRouteId=route221, CamelFatalFallbackErrorHandler=[route221], CamelFilterMatched=true, CamelMessageHistory=[REMOVED...], CamelToEndpoint=log://ERROR?showAll=true}, Headers: {Accept=application/json, Accept-Encoding=gzip, Authorization=Basic XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX==, breadcrumbId=ID-xxxxx-xxx-37655-1534782529403-63-1, CamelFileName=null, CamelFileNameProduced=/xxxxxx/path/to/payloads/2018-08-21/message-id-x-[EXT-Request]-2018-08-21-015427600.json, CamelHttpMethod=POST, Content-Type=application/x-www-form-urlencoded, doLogFiles=true, dontLogErrorFiles=false, messageId=message-id-x, messageName=message-name-x, routeId=direct-http, specialRq=true, specialRs=true, url=https4://endpoint-ssl-url.com/path/to/resource?proxyAuthPort=xxxx&amp;proxyAuthHost=192.168.xxx.xxx}, BodyType: String, Body: grant_type=client_credentials&amp;scope=DUMMYSCOPE, CaughtExceptionType: javax.net.ssl.SSLException, CaughtExceptionMessage: Unrecognized SSL message, plaintext connection?, StackTrace: javax.net.ssl.SSLException: Unrecognized SSL message, plaintext connection?\n    at sun.security.ssl.InputRecord.handleUnknownRecord(InputRecord.java:710)\n    at sun.security.ssl.InputRecord.read(InputRecord.java:527)\n    at sun.security.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:983)\n    at sun.security.ssl.SSLSocketImpl.performInitialHandshake(SSLSocketImpl.java:1385)\n    at sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1413)\n    at sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1397)\n    at org.apache.http.conn.ssl.SSLConnectionSocketFactory.createLayeredSocket(SSLConnectionSocketFactory.java:396)\n    at org.apache.http.conn.ssl.SSLConnectionSocketFactory.connectSocket(SSLConnectionSocketFactory.java:355)\n    at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:142)\n    at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:359)\n    at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:389)\n    at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:237)\n    at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:185)\n    at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)\n    at org.apache.http.impl.execchain.RedirectExec.execute(RedirectExec.java:111)\n    at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)\n    at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:83)\n    at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56)\n    at org.apache.camel.component.http4.HttpProducer.executeMethod(HttpProducer.java:334)\n    at org.apache.camel.component.http4.HttpProducer.process(HttpProducer.java:193)\n</code></pre>\n\n<p><strong>Attempt 2 :</strong> Using BasicHttpClientConnectionManager</p>\n\n<p>Code :</p>\n\n<pre><code>@ApplicationScoped\n@ContextName(\"camel_cdi_context\")\npublic class HTTPRouter extends RouteBuilder {\n\n    @Override\n    public void configure() throws Exception {\n\n        errorHandler(deadLetterChannel(\"direct:error\"));\n\n        try {\n\n            TrustManager[] trustAllCerts = new TrustManager[] {new X509TrustManager() {\n                public java.security.cert.X509Certificate[] getAcceptedIssuers() {\n                    System.out.println(\"HTTPRouter.configure()\");\n                    return null;\n                }\n                public void checkClientTrusted(X509Certificate[] certs, String authType) {\n                }\n                public void checkServerTrusted(X509Certificate[] certs, String authType) {\n                }\n            }\n            };\n\n            SSLContext sslContext = SSLContext.getInstance(\"SSL\");\n            sslContext.init(null, trustAllCerts, new java.security.SecureRandom());\n\n            HostnameVerifier allHostsValid = new HostnameVerifier() {\n                public boolean verify(String hostname, SSLSession session) {\n                    System.out.println(\"HTTPRouter.configure().new HostnameVerifier() {...}.verify()\");\n                    return true;\n                }\n            };\n\n            final SSLConnectionSocketFactory        sslConnectionSocketFactory          = new SSLConnectionSocketFactory(sslContext,new String[]{\"TLSv1.2\", \"TLSv1.1\", \"TLSv1\", \"SSLv3\"}, null, allHostsValid);\n\n            HttpComponent http4 = getContext().getComponent(\"https4\", HttpComponent.class);\n            http4.setHttpClientConfigurer(new HttpClientConfigurer() {\n\n                @Override\n                public void configureHttpClient(HttpClientBuilder builder) {\n                    builder.setSSLSocketFactory(sslConnectionSocketFactory);\n                    System.out.println(\"HTTPRouter.configure().new HttpClientConfigurer() {...}.configureHttpClient() - 1\");\n                    Registry&lt;ConnectionSocketFactory&gt; registry = RegistryBuilder.&lt;ConnectionSocketFactory&gt;create()\n                            .register(\"https\", sslConnectionSocketFactory)\n                            .build();\n                    System.out.println(\"HTTPRouter.configure().new HttpClientConfigurer() {...}.configureHttpClient() - 2\");\n                    HttpClientConnectionManager connectionManager = new  BasicHttpClientConnectionManager(registry);\n                    System.out.println(\"HTTPRouter.configure().new HttpClientConfigurer() {...}.configureHttpClient() - 3\");\n                    builder.setConnectionManager(connectionManager);\n                    System.out.println(\"HTTPRouter.configure().new HttpClientConfigurer() {...}.configureHttpClient() - 4\");\n                }\n            });\n\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n\n        from(\"direct:http\")\n            // prepare request payload\n            // set url to header\n            // set other connection properties (eg : Connection Method, Header etc)\n            .choice()\n            .when(header(\"url\").contains(\"?\"))\n                .toD(\"${header.url}&amp;throwExceptionOnFailure=false\")\n            .endChoice()\n            .otherwise()\n                .toD(\"${header.url}?throwExceptionOnFailure=false\")\n            .endChoice()\n        .end()\n        .convertBodyTo(String.class)\n        // process on the response\n\n    }\n\n}\n</code></pre>\n\n<p>Log : </p>\n\n<pre><code>[org.apache.camel.component.http4.HttpComponent] Created ClientConnectionManager org.apache.http.impl.conn.PoolingHttpClientConnectionManager@2bb0862\n[stdout] HTTPRouter.configure().new HttpClientConfigurer() {...}.configureHttpClient() - 1\n[stdout] HTTPRouter.configure().new HttpClientConfigurer() {...}.configureHttpClient() - 2\n[stdout] HTTPRouter.configure().new HttpClientConfigurer() {...}.configureHttpClient() - 3\n[stdout] HTTPRouter.configure().new HttpClientConfigurer() {...}.configureHttpClient() - 4\n[org.apache.http.client.protocol.RequestAddCookies] CookieSpec selected: default\n[org.apache.http.client.protocol.RequestAuthCache] Auth cache not set in the context\n[org.apache.http.impl.conn.BasicHttpClientConnectionManager] Get connection for route {tls}-&gt;https://192.168.xxx.xxx:xxxx-&gt;https://endpoint-ssl-url.com:443\n[org.apache.http.impl.execchain.MainClientExec] Opening connection {tls}-&gt;https://192.168.xxx.xxx:xxxx-&gt;https://endpoint-ssl-url.com:443\n[org.apache.http.impl.conn.DefaultHttpClientConnectionOperator] Connecting to /192.168.xxx.xxx:xxxx\n[org.apache.http.conn.ssl.SSLConnectionSocketFactory] Connecting socket to /192.168.xxx.xxx:xxxx with timeout 0\n[org.apache.http.conn.ssl.SSLConnectionSocketFactory] Enabled protocols: [SSLv3, TLSv1, TLSv1.1, TLSv1.2]\n[org.apache.http.conn.ssl.SSLConnectionSocketFactory] Enabled cipher suites:[TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256, MORE_CIPHERS ...]\n[org.apache.http.conn.ssl.SSLConnectionSocketFactory] Starting handshake\n[org.apache.http.impl.conn.DefaultManagedHttpClientConnection] http-outgoing-31: Shutdown connection\n[org.apache.http.impl.execchain.MainClientExec] Connection discarded\n[org.apache.http.impl.conn.BasicHttpClientConnectionManager] Releasing connection [Not bound]\n[ERROR] Exchange[Id: ID-xxxxx-xxx-37655-1534782529403-65-2, ExchangePattern: InOnly, Properties: {CamelCreatedTimestamp=Tue Aug 21 01:58:30 UTC 2018, CamelExceptionCaught=javax.net.ssl.SSLException: Unrecognized SSL message, plaintext connection?, CamelFailureEndpoint=https4://endpoint-ssl-url.com/path/to/resource?proxyAuthPort=xxxx&amp;throwExceptionOnFailure=false&amp;proxyAuthHost=192.168.xxx.xxx, CamelFailureRouteId=route228, CamelFatalFallbackErrorHandler=[route228], CamelFilterMatched=true, CamelMessageHistory=[REMOVED...], CamelToEndpoint=log://ERROR?showAll=true}, Headers: {Accept=application/json, Accept-Encoding=gzip, Authorization=Basic XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX, breadcrumbId=ID-namal-pc-37655-1534782529403-65-1, CamelFileName=null, CamelFileNameProduced=/xxxxxx/path/to/payloads/2018-08-21/message-id-x-[EXT-Request]-2018-08-21-015830349.json, CamelHttpMethod=POST, Content-Type=application/x-www-form-urlencoded, doLogFiles=true, dontLogErrorFiles=false, messageId=message-id-x, messageName=message-name-x, routeId=direct-http, specialRq=true, specialRs=true, url=https4://endpoint-ssl-url.com/path/to/resource?proxyAuthPort=xxxx&amp;proxyAuthHost=192.168.xxx.xxx}, BodyType: String, Body: grant_type=client_credentials&amp;scope=DUMMYSCOPE, CaughtExceptionType: javax.net.ssl.SSLException, CaughtExceptionMessage: Unrecognized SSL message, plaintext connection?, StackTrace: javax.net.ssl.SSLException: Unrecognized SSL message, plaintext connection?\n    at sun.security.ssl.InputRecord.handleUnknownRecord(InputRecord.java:710)\n    at sun.security.ssl.InputRecord.read(InputRecord.java:527)\n    at sun.security.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:983)\n    at sun.security.ssl.SSLSocketImpl.performInitialHandshake(SSLSocketImpl.java:1385)\n    at sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1413)\n    at sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1397)\n    at org.apache.http.conn.ssl.SSLConnectionSocketFactory.createLayeredSocket(SSLConnectionSocketFactory.java:396)\n    at org.apache.http.conn.ssl.SSLConnectionSocketFactory.connectSocket(SSLConnectionSocketFactory.java:355)\n    at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:142)\n    at org.apache.http.impl.conn.BasicHttpClientConnectionManager.connect(BasicHttpClientConnectionManager.java:323)\n    at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:389)\n    at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:237)\n    at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:185)\n    at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)\n    at org.apache.http.impl.execchain.RedirectExec.execute(RedirectExec.java:111)\n    at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)\n    at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:83)\n    at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56)\n    at org.apache.camel.component.http4.HttpProducer.executeMethod(HttpProducer.java:334)\n    at org.apache.camel.component.http4.HttpProducer.process(HttpProducer.java:193)\n</code></pre>\n\n<p><strong>Attempt 3 :</strong> Mix of above two approaches\nResult : same exception</p>\n\n<p><strong>Attempt 4 :</strong> Using with Httpurlconnection\nI did this as a controlled test and it was succeeded.\nCode : </p>\n\n<pre><code>private void testViaHttpUrlConnection() throws Exception {\n\n        System.setProperty(\"jsse.enableSNIExtension\", \"false\");\n\n        ByteArrayOutputStream   baos                = null;\n        String                  requestPayload      = \"&lt;payload...&gt;\";\n        String                  url                 = \"https://endpoint-ssl-url.com/path/tp/resource\";\n        int                     connectionTimeOut   = 45;\n        int                     readTimeOut         = 30;\n        String                  responsePayload     = null;\n        String                  proxyIp             = \"192.168.xxx.xxx\";\n        int                     proxyPort           = xxxx;\n\n        try {\n\n            baos = new ByteArrayOutputStream();\n            baos.write(((String)requestPayload).getBytes());\n\n            TrustManager[] trustAllCerts = new TrustManager[] {new X509TrustManager() {\n                public java.security.cert.X509Certificate[] getAcceptedIssuers() {\n                    return null;\n                }\n                public void checkClientTrusted(X509Certificate[] certs, String authType) {\n                }\n                public void checkServerTrusted(X509Certificate[] certs, String authType) {\n                }\n            }\n            };\n\n            SSLContext sc = SSLContext.getInstance(\"SSL\");\n            sc.init(null, trustAllCerts, new java.security.SecureRandom());\n            HttpsURLConnection.setDefaultSSLSocketFactory(sc.getSocketFactory());\n\n            HostnameVerifier allHostsValid = new HostnameVerifier() {\n                public boolean verify(String hostname, SSLSession session) {\n                    return true;\n                }\n            };\n\n            HttpsURLConnection.setDefaultHostnameVerifier(allHostsValid);\n\n            URL                     mUrl    = new URL(url);\n\n            URLConnection           ucon    = null;\n\n            Proxy proxy_server = new Proxy(Proxy.Type.HTTP, new InetSocketAddress(proxyIp, proxyPort));\n\n            ucon = mUrl.openConnection(proxy_server);\n\n            HttpURLConnection con               = (HttpURLConnection) ucon;\n\n            con.setConnectTimeout(connectionTimeOut * 1000);\n            con.setReadTimeout(readTimeOut*1000);\n            con.setDoOutput(true);\n            con.setUseCaches(false);\n            con.setDoInput(true);\n            con.setRequestMethod(\"POST\");\n            con.setRequestProperty(\"Content-Type\",\"application/x-www-form-urlencoded\");\n\n            baos.writeTo(con.getOutputStream());\n\n            InputStream responseStream = null;\n            ByteArrayOutputStream baosRsp = null;\n\n            try {\n\n                responseStream                  = con.getInputStream();\n\n                baosRsp = new ByteArrayOutputStream();\n                byte[] buffer = new byte[4096];\n                int length = 0;\n                while ((length = responseStream.read(buffer)) != -1) {\n                    baosRsp.write(buffer, 0, length);\n                }\n\n                responsePayload = new String(baosRsp.toByteArray());\n\n            }finally {\n                try{responseStream.close();}catch (Exception e) { responseStream = null;}\n                try{baosRsp.close();}catch (Exception e) { baosRsp = null;}\n            }\n\n        }finally {\n            try{baos.close();}catch (Exception e) { baos = null;}\n        }\n\n    }\n</code></pre>\n\n<p><strong>Attempt 5 :</strong> Without proxy and without trust managers  - working fine</p>\n\n<p><strong>Attempt 6 :</strong> Without proxy and above Attemp 1  - working fine</p>\n\n<p>Log : </p>\n\n<pre><code>[org.apache.camel.component.http4.HttpComponent] Created ClientConnectionManager org.apache.http.impl.conn.PoolingHttpClientConnectionManager@7800e6b6\n[stdout] HTTPRouter.configure().new HttpClientConfigurer() {...}.configureHttpClient()-1\n[stdout] HTTPRouter.configure().new HttpClientConfigurer() {...}.configureHttpClient()-2\n[stdout] HTTPRouter.configure().new HttpClientConfigurer() {...}.configureHttpClient()-3\n[stdout] HTTPRouter.configure().new HttpClientConfigurer() {...}.configureHttpClient()-4\n[org.apache.http.client.protocol.RequestAddCookies] CookieSpec selected: default\n[org.apache.http.client.protocol.RequestAuthCache] Auth cache not set in the context\n[org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection request: [route: {s}-&gt;https://endpoint-ssl-url.com:443][total kept alive: 0; route allocated: 0 of 2; total allocated: 0 of 20]\n[org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection leased: [id: 11][route: {s}-&gt;https://endpoint-ssl-url.com:443][total kept alive: 0; route allocated: 1 of 2; total allocated: 1 of 20]\n[org.apache.http.impl.execchain.MainClientExec] Opening connection {s}-&gt;https://endpoint-ssl-url.com:443\n[org.apache.http.impl.conn.DefaultHttpClientConnectionOperator] Connecting to endpoint-ssl-url.com/xxx.xxx.xxx.xxx:443\n[org.apache.http.conn.ssl.SSLConnectionSocketFactory] Connecting socket to endpoint-ssl-url.com/xxx.xxx.xxx.xxx:443 with timeout 0\n[org.apache.http.conn.ssl.SSLConnectionSocketFactory] Enabled protocols: [TLSv1, TLSv1.1, TLSv1.2]\n[org.apache.http.conn.ssl.SSLConnectionSocketFactory] Enabled cipher suites:[TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256, MORE_CIPHERS ...]\n[org.apache.http.conn.ssl.SSLConnectionSocketFactory] Starting handshake\n[stdout] HTTPRouter.configure().new TrustStrategy() {...}.isTrusted()\n[org.apache.http.conn.ssl.SSLConnectionSocketFactory] Secure session established\n[org.apache.http.conn.ssl.SSLConnectionSocketFactory]  negotiated protocol: TLSv1.2\n[org.apache.http.conn.ssl.SSLConnectionSocketFactory]  negotiated cipher suite: TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256\n[org.apache.http.conn.ssl.SSLConnectionSocketFactory]  peer principal: CN=endpoint-ssl-url.com, OU=Software Engineering Services, O=Telstra Corporation Limited, L=Melbourne, ST=Victoria, C=AU\n[org.apache.http.conn.ssl.SSLConnectionSocketFactory]  peer alternative names: [endpoint-ssl-url.com]\n[org.apache.http.conn.ssl.SSLConnectionSocketFactory]  issuer principal: CN=QuoVadis Global SSL ICA G3, O=QuoVadis Limited, C=BM\n[org.apache.http.impl.conn.DefaultHttpClientConnectionOperator] Connection established 192.168.xxx.xxx:50230&lt;-&gt;xxx.xxx.xxx.xxx:443\n[org.apache.http.impl.execchain.MainClientExec] Executing request POST /path/to/resource HTTP/1.1\n[org.apache.http.impl.execchain.MainClientExec] Proxy auth state: UNCHALLENGED\n[org.apache.http.headers] http-outgoing-34 &gt;&gt; POST /path/to/resource HTTP/1.1\n[org.apache.http.headers] http-outgoing-34 &gt;&gt; Accept: application/json\n[org.apache.http.headers] http-outgoing-34 &gt;&gt; Accept-Encoding: gzip\n</code></pre>\n\n<p><strong>Attempt 7 :</strong> Without proxy and above Attemp 2  - working fine\nLog : </p>\n\n<pre><code>[org.apache.camel.component.http4.HttpComponent] Created ClientConnectionManager org.apache.http.impl.conn.PoolingHttpClientConnectionManager@21c33b01\n[stdout] HTTPRouter.configure().new HttpClientConfigurer() {...}.configureHttpClient() - 1\n[stdout] HTTPRouter.configure().new HttpClientConfigurer() {...}.configureHttpClient() - 2\n[stdout] HTTPRouter.configure().new HttpClientConfigurer() {...}.configureHttpClient() - 3\n[stdout] HTTPRouter.configure().new HttpClientConfigurer() {...}.configureHttpClient() - 4\n[org.apache.http.client.protocol.RequestAddCookies] CookieSpec selected: default\n[org.apache.http.client.protocol.RequestAuthCache] Auth cache not set in the context\n[org.apache.http.impl.conn.BasicHttpClientConnectionManager] Get connection for route {s}-&gt;https://endpoint-ssl-url.com:443\n[org.apache.http.impl.execchain.MainClientExec] Opening connection {s}-&gt;https://endpoint-ssl-url.com:443\n[org.apache.http.impl.conn.DefaultHttpClientConnectionOperator] Connecting to endpoint-ssl-url.com/xxx.xxx.xxx.xxx## Heading ##:443\n[org.apache.http.conn.ssl.SSLConnectionSocketFactory] Connecting socket to endpoint-ssl-url.com/xxx.xxx.xxx.xxx:443 with timeout 0\n[org.apache.http.conn.ssl.SSLConnectionSocketFactory] Enabled protocols: [SSLv3, TLSv1, TLSv1.1, TLSv1.2]\n[org.apache.http.conn.ssl.SSLConnectionSocketFactory] Enabled cipher suites:[TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256, MORE_CIPHERS ...]\n[org.apache.http.conn.ssl.SSLConnectionSocketFactory] Starting handshake\n[stdout] HTTPRouter.configure()\n[org.apache.http.conn.ssl.SSLConnectionSocketFactory] Secure session established\n[org.apache.http.conn.ssl.SSLConnectionSocketFactory]  negotiated protocol: TLSv1.2\n[org.apache.http.conn.ssl.SSLConnectionSocketFactory]  negotiated cipher suite: TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256\n[org.apache.http.conn.ssl.SSLConnectionSocketFactory]  peer principal: CN=endpoint-ssl-url.com, OU=Software Engineering Services, O=Telstra Corporation Limited, L=Melbourne, ST=Victoria, C=AU\n[org.apache.http.conn.ssl.SSLConnectionSocketFactory]  peer alternative names: [endpoint-ssl-url.com]\n[org.apache.http.conn.ssl.SSLConnectionSocketFactory]  issuer principal: CN=QuoVadis Global SSL ICA G3, O=QuoVadis Limited, C=BM\n[stdout] HTTPRouter.configure().new HostnameVerifier() {...}.verify()\n[org.apache.http.impl.conn.DefaultHttpClientConnectionOperator] Connection established 192.168.xxx.xxx:57748&lt;-&gt;xxx.xxx.xxx.xxx:443\n[org.apache.http.impl.execchain.MainClientExec] Executing request POST /path/to/resource HTTP/1.1\n[org.apache.http.impl.execchain.MainClientExec] Proxy auth state: UNCHALLENGED\n[org.apache.http.headers] http-outgoing-32 &gt;&gt; POST /path/to/resource HTTP/1.1\n</code></pre>\n\n<p><strong>Attempt - 8 :</strong> Tried with another http endpoint with the http4 component in the same way and it was succeeded.</p>\n\n<p><strong>Attempt - 9 :</strong> Tried with directly using to() component also but same results.</p>\n"},{"tags":["java"],"answers":[{"tags":[],"owner":{"account_id":3357849,"reputation":5771,"user_id":2820379,"accept_rate":81,"display_name":"ben"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1401234322,"creation_date":1401234322,"answer_id":23900710,"question_id":23900699,"body_markdown":"Have a look at decompilers. They&#39;ll transform the java-bytecode back to source code. One example of such a compiler would be JD: http://jd.benow.ca/\r\n\r\nAfter editing the source code you would have to compile the code again and pack it in the respective `.jar` file.","title":"How do I edit the actual code of a java .class file?","body":"<p>Have a look at decompilers. They'll transform the java-bytecode back to source code. One example of such a compiler would be JD: <a href=\"http://jd.benow.ca/\" rel=\"nofollow\">http://jd.benow.ca/</a></p>\n\n<p>After editing the source code you would have to compile the code again and pack it in the respective <code>.jar</code> file.</p>\n"},{"tags":[],"owner":{"account_id":3244224,"reputation":973,"user_id":2736316,"display_name":"DMP"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1401235227,"creation_date":1401234589,"answer_id":23900753,"question_id":23900699,"body_markdown":"What you need for this is a java de-compiler. This will take the bytecode out of your class file and convert it back to its source. From there you will need to recompile the .java files that the de-compiler produces.\r\n\r\nHere are some java de-compilers that I have seen:\r\nhttp://dcompiler.sourceforge.net/\r\n\r\n\r\nhttp://jd.benow.ca","title":"How do I edit the actual code of a java .class file?","body":"<p>What you need for this is a java de-compiler. This will take the bytecode out of your class file and convert it back to its source. From there you will need to recompile the .java files that the de-compiler produces.</p>\n\n<p>Here are some java de-compilers that I have seen:\n<a href=\"http://dcompiler.sourceforge.net/\" rel=\"nofollow\">http://dcompiler.sourceforge.net/</a></p>\n\n<p><a href=\"http://jd.benow.ca\" rel=\"nofollow\">http://jd.benow.ca</a></p>\n"},{"tags":[],"owner":{"account_id":481212,"reputation":6556,"user_id":894885,"accept_rate":88,"display_name":"Samuel Edwin Ward"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1401234787,"creation_date":1401234787,"answer_id":23900786,"question_id":23900699,"body_markdown":"If your file is an old enough version, you can use [jasper](http://www.angelfire.com/tx4/cus/jasper/) to disassemble it into bytecode, edit the bytecode and reassemble it using [jasmin](http://jasmin.sourceforge.net/).  Unfortunately these tools have not been updated in some time.\r\n\r\nThey do not produce Java code; you&#39;ll have to learn Java bytecode.  But it is more reliable than the so-called &quot;decompiler&quot; methods.","title":"How do I edit the actual code of a java .class file?","body":"<p>If your file is an old enough version, you can use <a href=\"http://www.angelfire.com/tx4/cus/jasper/\" rel=\"nofollow\">jasper</a> to disassemble it into bytecode, edit the bytecode and reassemble it using <a href=\"http://jasmin.sourceforge.net/\" rel=\"nofollow\">jasmin</a>.  Unfortunately these tools have not been updated in some time.</p>\n\n<p>They do not produce Java code; you'll have to learn Java bytecode.  But it is more reliable than the so-called \"decompiler\" methods.</p>\n"},{"tags":[],"owner":{"account_id":91915,"reputation":1401,"user_id":252155,"accept_rate":50,"display_name":"Amir Moghimi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1401234797,"creation_date":1401234797,"answer_id":23900789,"question_id":23900699,"body_markdown":"As Java .class files are in byte-code format, you cannot modify them the way you would edit a .java source file. Bytecode is a low level language closer to the machine language rather than Java itself.\r\n\r\nIf you need to modify the source, one option is to use a decompiler, e.g. [JAD (Java Decompiler)][1], to get a source file and then change it and recompile to .class using javac. Make sure you figure out which version of Java language (1.4, 5, 6, 7, 8) has been used for the original jar file.\r\n\r\n\r\n  [1]: http://varaneckas.com/jad/","title":"How do I edit the actual code of a java .class file?","body":"<p>As Java .class files are in byte-code format, you cannot modify them the way you would edit a .java source file. Bytecode is a low level language closer to the machine language rather than Java itself.</p>\n\n<p>If you need to modify the source, one option is to use a decompiler, e.g. <a href=\"http://varaneckas.com/jad/\" rel=\"nofollow\">JAD (Java Decompiler)</a>, to get a source file and then change it and recompile to .class using javac. Make sure you figure out which version of Java language (1.4, 5, 6, 7, 8) has been used for the original jar file.</p>\n"}],"owner":{"account_id":4531361,"reputation":53,"user_id":3681742,"accept_rate":50,"display_name":"andrew3ds"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":8275,"favorite_count":0,"down_vote_count":2,"up_vote_count":2,"answer_count":4,"score":0,"last_activity_date":1695754945,"creation_date":1401234240,"question_id":23900699,"body_markdown":"I have a jar that I want to take out a class file and add a few lines of code to it. I got class editor, but you can&#39;t actually change any code, you can change constants and that is all. I have a program that you can read the source code from a .class but you can&#39;t change anything on it. Is there a program or eclipse plugin that you can read and EDIT the source code from a .class file?","title":"How do I edit the actual code of a java .class file?","body":"<p>I have a jar that I want to take out a class file and add a few lines of code to it. I got class editor, but you can't actually change any code, you can change constants and that is all. I have a program that you can read the source code from a .class but you can't change anything on it. Is there a program or eclipse plugin that you can read and EDIT the source code from a .class file?</p>\n"},{"tags":["java","jax-ws","apache-tomee","tomee-8"],"owner":{"account_id":613530,"reputation":165,"user_id":342684,"display_name":"Boyan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":12,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695754905,"creation_date":1695571434,"question_id":77167885,"body_markdown":"Migrating an existing application to TomEE, which uses JAX-WS `javax.xml.ws.Endpoint`. The following code does not open port `7001`. \r\n\r\n    @WebServiceProvider\r\n    @ServiceMode(value=Service.Mode.PAYLOAD)\r\n    public final class WsProvider implements Provider&lt;Source&gt; {\r\n      ...\r\n      public void start() {\r\n        String publishAddress = &quot;http://0.0.0.0:7001/v1.0.1/soap&quot;;\r\n        Endpoint endPoint = Endpoint.create(this);\r\n        endPoint.publish(publishAddress);\r\n        log.debug(&quot;published: &quot; + endPoint.isPublished());\r\n      }\r\n\r\nTomEE log:\r\n\r\n    2023-09-24 05:06:05.526 INFO [main] org.apache.cxf.wsdl.service.factory.ReflectionServiceFactoryBean.buildServiceFromClass Creating Service {http://ws.app.com/} WsProviderService from class com.app.ws.WsProvider\r\n    2023-09-24 05:06:05.969 INFO [main] org.apache.cxf.endpoint.ServerImpl.initDestination Setting the server&#39;s publish address to be http://0.0.0.0:7001/v1.0.1/soap\r\n    2023-09-24 05:06:05.994 DEBUG: published: true\r\n\r\n`7001` not in the list of open ports:\r\n\r\n    lsof -i -P -n | grep LISTEN | grep java\r\n\r\n    java      4859            root   21u  IPv4  34883      0t0  TCP *:9998 (LISTEN)\r\n    java      4859            root   22u  IPv4  34884      0t0  TCP *:9999 (LISTEN)\r\n    java      4859            root   23u  IPv4  34885      0t0  TCP *:42883 (LISTEN)\r\n    java      4859            root  219u  IPv4  34886      0t0  TCP *:8080 (LISTEN)\r\n    java      4859            root  232u  IPv4  34905      0t0  TCP 127.0.0.1:61616 (LISTEN)\r\n    java      4859            root  296u  IPv4  34942      0t0  TCP 127.0.0.1:8005 (LISTEN)\r\n\r\nEnvironment:\r\n- TomEE 8.0.15\r\n- Java 1.8.0_181\r\n- Ubuntu 5.15.0-84-generic\r\n\r\n\r\nThere are no exceptions, the app deploys and runs fine on TomEE, except it does not listen on port 7001. The same app runs as expected on Weblogic and Tomcat. Is there a TomEE specific configuration that needs to be enabled to make this work?","title":"Tomee JAX-WS Enpoint.publish not running on specified port","body":"<p>Migrating an existing application to TomEE, which uses JAX-WS <code>javax.xml.ws.Endpoint</code>. The following code does not open port <code>7001</code>.</p>\n<pre><code>@WebServiceProvider\n@ServiceMode(value=Service.Mode.PAYLOAD)\npublic final class WsProvider implements Provider&lt;Source&gt; {\n  ...\n  public void start() {\n    String publishAddress = &quot;http://0.0.0.0:7001/v1.0.1/soap&quot;;\n    Endpoint endPoint = Endpoint.create(this);\n    endPoint.publish(publishAddress);\n    log.debug(&quot;published: &quot; + endPoint.isPublished());\n  }\n</code></pre>\n<p>TomEE log:</p>\n<pre><code>2023-09-24 05:06:05.526 INFO [main] org.apache.cxf.wsdl.service.factory.ReflectionServiceFactoryBean.buildServiceFromClass Creating Service {http://ws.app.com/} WsProviderService from class com.app.ws.WsProvider\n2023-09-24 05:06:05.969 INFO [main] org.apache.cxf.endpoint.ServerImpl.initDestination Setting the server's publish address to be http://0.0.0.0:7001/v1.0.1/soap\n2023-09-24 05:06:05.994 DEBUG: published: true\n</code></pre>\n<p><code>7001</code> not in the list of open ports:</p>\n<pre><code>lsof -i -P -n | grep LISTEN | grep java\n\njava      4859            root   21u  IPv4  34883      0t0  TCP *:9998 (LISTEN)\njava      4859            root   22u  IPv4  34884      0t0  TCP *:9999 (LISTEN)\njava      4859            root   23u  IPv4  34885      0t0  TCP *:42883 (LISTEN)\njava      4859            root  219u  IPv4  34886      0t0  TCP *:8080 (LISTEN)\njava      4859            root  232u  IPv4  34905      0t0  TCP 127.0.0.1:61616 (LISTEN)\njava      4859            root  296u  IPv4  34942      0t0  TCP 127.0.0.1:8005 (LISTEN)\n</code></pre>\n<p>Environment:</p>\n<ul>\n<li>TomEE 8.0.15</li>\n<li>Java 1.8.0_181</li>\n<li>Ubuntu 5.15.0-84-generic</li>\n</ul>\n<p>There are no exceptions, the app deploys and runs fine on TomEE, except it does not listen on port 7001. The same app runs as expected on Weblogic and Tomcat. Is there a TomEE specific configuration that needs to be enabled to make this work?</p>\n"},{"tags":["java","validation","string","character"],"comments":[{"owner":{"account_id":237,"reputation":28496,"user_id":292,"accept_rate":68,"display_name":"shsteimer"},"score":6,"creation_date":1233671161,"post_id":506105,"comment_id":321613,"body_markdown":"Is there any particular reason that you are trying to avoid loops?","body":"Is there any particular reason that you are trying to avoid loops?"},{"owner":{"account_id":498110,"reputation":1330,"user_id":1377112,"accept_rate":57,"display_name":"Salvador Valencia"},"score":3,"creation_date":1434394939,"post_id":506105,"comment_id":49749351,"body_markdown":"You cannot do a general search for the character without a loop. Look up how a Turing Machine works.","body":"You cannot do a general search for the character without a loop. Look up how a Turing Machine works."},{"owner":{"account_id":8211,"reputation":23893,"user_id":14663,"accept_rate":88,"display_name":"WW."},"score":9,"creation_date":1496729404,"post_id":506105,"comment_id":75765194,"body_markdown":"We should assume @barfoon doesn&#39;t want the loop to be in their code.  Obviously the machine does a loop somewhere.  Otherwise the question is nonsense.","body":"We should assume @barfoon doesn&#39;t want the loop to be in their code.  Obviously the machine does a loop somewhere.  Otherwise the question is nonsense."},{"owner":{"account_id":543631,"reputation":10094,"user_id":912829,"accept_rate":53,"display_name":"ACV"},"score":0,"creation_date":1592046116,"post_id":506105,"comment_id":110287145,"body_markdown":"I would say java&#39;s string manipulation is quite limited","body":"I would say java&#39;s string manipulation is quite limited"},{"owner":{"account_id":20511313,"reputation":2360,"user_id":15102459,"display_name":"Thiyanesh"},"score":0,"creation_date":1614033592,"post_id":506105,"comment_id":117256235,"body_markdown":"@barfoon, based on the definition of `single character` and how the user accesses that character, there might be a different usage pattern. I have added [an answer](https://stackoverflow.com/questions/506105/how-can-i-check-if-a-single-character-appears-in-a-string/66324429#66324429)","body":"@barfoon, based on the definition of <code>single character</code> and how the user accesses that character, there might be a different usage pattern. I have added <a href=\"https://stackoverflow.com/questions/506105/how-can-i-check-if-a-single-character-appears-in-a-string/66324429#66324429\">an answer</a>"}],"answers":[{"tags":[],"owner":{"account_id":22774,"reputation":18102,"user_id":56524,"accept_rate":45,"display_name":"mP."},"down_vote_count":6,"up_vote_count":364,"is_accepted":true,"score":358,"last_activity_date":1584880851,"creation_date":1233639635,"answer_id":506107,"question_id":506105,"body_markdown":"You can use [`string.indexOf(&#39;a&#39;)`][1].\r\n\r\nIf the char `a` is present in `string` : \r\n\r\n&gt; it returns the the index of the first occurrence of the character in\r\n&gt; the character sequence represented by this object, or -1 if the\r\n&gt; character does not occur.\r\n\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#indexOf%28int%29","title":"How can I check if a single character appears in a string?","body":"<p>You can use <a href=\"http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#indexOf%28int%29\" rel=\"noreferrer\"><code>string.indexOf('a')</code></a>.</p>\n\n<p>If the char <code>a</code> is present in <code>string</code> : </p>\n\n<blockquote>\n  <p>it returns the the index of the first occurrence of the character in\n  the character sequence represented by this object, or -1 if the\n  character does not occur.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":10566,"reputation":29161,"user_id":20029,"display_name":"Zach Scrivena"},"down_vote_count":4,"up_vote_count":167,"is_accepted":false,"score":163,"last_activity_date":1233644160,"creation_date":1233639701,"answer_id":506109,"question_id":506105,"body_markdown":"   - [**`String.contains()`**][1] which checks if the string contains a specified sequence of char values\r\n   - [**`String.indexOf()`**][2] which returns the index within the string of the first occurence of the specified character or substring (there are 4 variations of this method)\r\n\r\n\r\n  [1]: http://java.sun.com/javase/6/docs/api/java/lang/String.html#contains(java.lang.CharSequence)\r\n  [2]: http://java.sun.com/javase/6/docs/api/java/lang/String.html#indexOf(int)","title":"How can I check if a single character appears in a string?","body":"<ul>\n<li><a href=\"http://java.sun.com/javase/6/docs/api/java/lang/String.html#contains(java.lang.CharSequence)\" rel=\"noreferrer\"><strong><code>String.contains()</code></strong></a> which checks if the string contains a specified sequence of char values</li>\n<li><a href=\"http://java.sun.com/javase/6/docs/api/java/lang/String.html#indexOf(int)\" rel=\"noreferrer\"><strong><code>String.indexOf()</code></strong></a> which returns the index within the string of the first occurence of the specified character or substring (there are 4 variations of this method)</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":15646,"reputation":1363,"user_id":33254,"display_name":"mweiss"},"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1233639704,"creation_date":1233639704,"answer_id":506110,"question_id":506105,"body_markdown":"To check if something does not exist in a string, you at least need to look at each character in a string.  So even if you don&#39;t explicitly use a loop, it&#39;ll have the same efficiency.  That being said, you can try using str.contains(&quot;&quot;+char).","title":"How can I check if a single character appears in a string?","body":"<p>To check if something does not exist in a string, you at least need to look at each character in a string.  So even if you don't explicitly use a loop, it'll have the same efficiency.  That being said, you can try using str.contains(\"\"+char).</p>\n"},{"tags":[],"owner":{"account_id":24055,"reputation":5044,"user_id":60892,"accept_rate":42,"display_name":"Mystic"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1233639878,"creation_date":1233639878,"answer_id":506117,"question_id":506105,"body_markdown":"\r\nYes, using the indexOf() method on the string class. [See the API documentation for this method][1]\r\n\r\n\r\n  [1]: http://java.sun.com/j2se/1.5.0/docs/api/java/lang/String.html#indexOf(int)","title":"How can I check if a single character appears in a string?","body":"<p>Yes, using the indexOf() method on the string class. <a href=\"http://java.sun.com/j2se/1.5.0/docs/api/java/lang/String.html#indexOf(int)\" rel=\"nofollow noreferrer\">See the API documentation for this method</a></p>\n"},{"tags":[],"owner":{"account_id":15083,"reputation":22025,"user_id":31506,"display_name":"Jack Leow"},"down_vote_count":1,"up_vote_count":39,"is_accepted":false,"score":38,"last_activity_date":1233669236,"creation_date":1233669236,"answer_id":507137,"question_id":506105,"body_markdown":"I&#39;m not sure what the original poster is asking exactly. Since indexOf(...) and contains(...) both *probably* use loops internally, perhaps he&#39;s looking to see if this is possible at all without a loop? I can think of two ways off hand, one would of course be recurrsion:\r\n\r\n    public boolean containsChar(String s, char search) {\r\n        if (s.length() == 0)\r\n            return false;\r\n        else\r\n            return s.charAt(0) == search || containsChar(s.substring(1), search);\r\n    }\r\n\r\nThe other is far less elegant, but completeness...:\r\n\r\n    /**\r\n     * Works for strings of up to 5 characters\r\n     */\r\n    public boolean containsChar(String s, char search) {\r\n        if (s.length() &gt; 5) throw IllegalArgumentException();\r\n        \r\n        try {\r\n            if (s.charAt(0) == search) return true;\r\n            if (s.charAt(1) == search) return true;\r\n            if (s.charAt(2) == search) return true;\r\n            if (s.charAt(3) == search) return true;\r\n            if (s.charAt(4) == search) return true;\r\n        } catch (IndexOutOfBoundsException e) {\r\n            // this should never happen...\r\n            return false;\r\n        }\r\n        return false;\r\n    }\r\n\r\nThe number of lines grow as you need to support longer and longer strings of course. But there are no loops/recurrsions at all. You can even remove the length check if you&#39;re concerned that that length() uses a loop.","title":"How can I check if a single character appears in a string?","body":"<p>I'm not sure what the original poster is asking exactly. Since indexOf(...) and contains(...) both <em>probably</em> use loops internally, perhaps he's looking to see if this is possible at all without a loop? I can think of two ways off hand, one would of course be recurrsion:</p>\n\n<pre><code>public boolean containsChar(String s, char search) {\n    if (s.length() == 0)\n        return false;\n    else\n        return s.charAt(0) == search || containsChar(s.substring(1), search);\n}\n</code></pre>\n\n<p>The other is far less elegant, but completeness...:</p>\n\n<pre><code>/**\n * Works for strings of up to 5 characters\n */\npublic boolean containsChar(String s, char search) {\n    if (s.length() &gt; 5) throw IllegalArgumentException();\n\n    try {\n        if (s.charAt(0) == search) return true;\n        if (s.charAt(1) == search) return true;\n        if (s.charAt(2) == search) return true;\n        if (s.charAt(3) == search) return true;\n        if (s.charAt(4) == search) return true;\n    } catch (IndexOutOfBoundsException e) {\n        // this should never happen...\n        return false;\n    }\n    return false;\n}\n</code></pre>\n\n<p>The number of lines grow as you need to support longer and longer strings of course. But there are no loops/recurrsions at all. You can even remove the length check if you're concerned that that length() uses a loop.</p>\n"},{"tags":[],"owner":{"account_id":780908,"reputation":145,"user_id":838378,"display_name":"Richard"},"down_vote_count":3,"up_vote_count":15,"is_accepted":false,"score":12,"last_activity_date":1310367651,"creation_date":1310367651,"answer_id":6646758,"question_id":506105,"body_markdown":"    String temp = &quot;abcdefghi&quot;;\r\n    if(temp.indexOf(&quot;b&quot;)!=-1)\r\n    {\r\n       System.out.println(&quot;there is &#39;b&#39; in temp string&quot;);\r\n    }\r\n    else\r\n    {\r\n       System.out.println(&quot;there is no &#39;b&#39; in temp string&quot;);\r\n    }","title":"How can I check if a single character appears in a string?","body":"<pre><code>String temp = \"abcdefghi\";\nif(temp.indexOf(\"b\")!=-1)\n{\n   System.out.println(\"there is 'b' in temp string\");\n}\nelse\n{\n   System.out.println(\"there is no 'b' in temp string\");\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":323347,"reputation":93,"user_id":643310,"display_name":"fillumina"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1336389361,"creation_date":1336389361,"answer_id":10481110,"question_id":506105,"body_markdown":"If you need to check the same string often you can calculate the character occurrences up-front. This is an implementation that uses a bit array contained into a long array:\r\n\r\n    public class FastCharacterInStringChecker implements Serializable {\r\n    private static final long serialVersionUID = 1L;\r\n\r\n    private final long[] l = new long[1024]; // 65536 / 64 = 1024\r\n\r\n    public FastCharacterInStringChecker(final String string) {\r\n        for (final char c: string.toCharArray()) {\r\n            final int index = c &gt;&gt; 6;\r\n            final int value = c - (index &lt;&lt; 6);\r\n            l[index] |= 1L &lt;&lt; value;\r\n        }\r\n    }\r\n\r\n    public boolean contains(final char c) {\r\n        final int index = c &gt;&gt; 6; // c / 64\r\n        final int value = c - (index &lt;&lt; 6); // c - (index * 64)\r\n        return (l[index] &amp; (1L &lt;&lt; value)) != 0;\r\n    }}\r\n\r\n","title":"How can I check if a single character appears in a string?","body":"<p>If you need to check the same string often you can calculate the character occurrences up-front. This is an implementation that uses a bit array contained into a long array:</p>\n\n<pre><code>public class FastCharacterInStringChecker implements Serializable {\nprivate static final long serialVersionUID = 1L;\n\nprivate final long[] l = new long[1024]; // 65536 / 64 = 1024\n\npublic FastCharacterInStringChecker(final String string) {\n    for (final char c: string.toCharArray()) {\n        final int index = c &gt;&gt; 6;\n        final int value = c - (index &lt;&lt; 6);\n        l[index] |= 1L &lt;&lt; value;\n    }\n}\n\npublic boolean contains(final char c) {\n    final int index = c &gt;&gt; 6; // c / 64\n    final int value = c - (index &lt;&lt; 6); // c - (index * 64)\n    return (l[index] &amp; (1L &lt;&lt; value)) != 0;\n}}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1506022,"reputation":11,"user_id":1409367,"display_name":"Ganeshmani"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1337664060,"creation_date":1337664060,"answer_id":10696096,"question_id":506105,"body_markdown":"\tstatic String removeOccurences(String a, String b)\r\n\t{\r\n\t\tStringBuilder s2 = new StringBuilder(a);\r\n\r\n\t\tfor(int i=0;i&lt;b.length();i++){\r\n\t\t\tchar ch = b.charAt(i);\t\r\n\t\t\tSystem.out.println(ch+&quot;  first index&quot;+a.indexOf(ch));\r\n\t\t\t\r\n\t\t\tint lastind = a.lastIndexOf(ch);\r\n\t\t\t\r\n\t\tfor(int k=new String(s2).indexOf(ch);k &gt; 0;k=new String(s2).indexOf(ch)){\r\n\t\t\t\tif(s2.charAt(k) == ch){\r\n\t\t\t\t\ts2.deleteCharAt(k);\r\n\t\t\tSystem.out.println(&quot;val of s2 :             &quot;+s2.toString());\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t  }\r\n\r\n\t\tSystem.out.println(s1.toString());\r\n\t\t\t\r\n\t\treturn (s1.toString());\r\n\t}","title":"How can I check if a single character appears in a string?","body":"<pre><code>static String removeOccurences(String a, String b)\n{\n    StringBuilder s2 = new StringBuilder(a);\n\n    for(int i=0;i&lt;b.length();i++){\n        char ch = b.charAt(i);  \n        System.out.println(ch+\"  first index\"+a.indexOf(ch));\n\n        int lastind = a.lastIndexOf(ch);\n\n    for(int k=new String(s2).indexOf(ch);k &gt; 0;k=new String(s2).indexOf(ch)){\n            if(s2.charAt(k) == ch){\n                s2.deleteCharAt(k);\n        System.out.println(\"val of s2 :             \"+s2.toString());\n            }\n        }\n      }\n\n    System.out.println(s1.toString());\n\n    return (s1.toString());\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1685971,"reputation":19,"user_id":1549262,"display_name":"Praveen kumar"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1385527243,"creation_date":1343145270,"answer_id":11634692,"question_id":506105,"body_markdown":"    package com;\r\n    public class _index {\r\n\r\n        public static void main(String[] args) {\r\n            String s1=&quot;be proud to be an indian&quot;;\r\n            char ch=s1.charAt(s1.indexOf(&#39;e&#39;));\r\n            int count = 0; \r\n            for(int i=0;i&lt;s1.length();i++) {\r\n                if(s1.charAt(i)==&#39;e&#39;){\r\n                    System.out.println(&quot;number of E:==&quot;+ch);\r\n                    count++;\r\n                }\r\n            }\r\n            System.out.println(&quot;Total count of E:==&quot;+count);\r\n        }\r\n    }","title":"How can I check if a single character appears in a string?","body":"<pre><code>package com;\npublic class _index {\n\n    public static void main(String[] args) {\n        String s1=\"be proud to be an indian\";\n        char ch=s1.charAt(s1.indexOf('e'));\n        int count = 0; \n        for(int i=0;i&lt;s1.length();i++) {\n            if(s1.charAt(i)=='e'){\n                System.out.println(\"number of E:==\"+ch);\n                count++;\n            }\n        }\n        System.out.println(\"Total count of E:==\"+count);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3185513,"reputation":74,"user_id":5126104,"display_name":"Nandu cg"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695754699,"creation_date":1515477934,"answer_id":48162284,"question_id":506105,"body_markdown":"You can use this code. It will check the char is present or not. If it is present then the return value is &gt;= 0 otherwise it&#39;s -1. Here I am printing alphabets that is not present in the input.\r\n\r\n    import java.util.Scanner;\r\n    public class Test {\r\n        public static void letters()\r\n        {\r\n    \t     System.out.println(&quot;Enter input char&quot;);\r\n             Scanner sc = new Scanner(System.in);\r\n             String input = sc.next();\r\n             System.out.println(&quot;Output : &quot;);\r\n            for (char alphabet = &#39;A&#39;; alphabet &lt;= &#39;Z&#39;; alphabet++) {\r\n        \t    if (input.toUpperCase().indexOf(alphabet) &lt; 0) \r\n        \t        System.out.print(alphabet + &quot; &quot;);\r\n            }\r\n        }\r\n        public static void main(String[] args) {\r\n        \tletters();\r\n    \t}\r\n    }\r\n\r\n**Ouput Example**\r\n\r\n    Enter input char\r\n    nandu\r\n    Output : \r\n    B C E F G H I J K L M O P Q R S T V W X Y Z","title":"How can I check if a single character appears in a string?","body":"<p>You can use this code. It will check the char is present or not. If it is present then the return value is &gt;= 0 otherwise it's -1. Here I am printing alphabets that is not present in the input.</p>\n<pre><code>import java.util.Scanner;\npublic class Test {\n    public static void letters()\n    {\n         System.out.println(&quot;Enter input char&quot;);\n         Scanner sc = new Scanner(System.in);\n         String input = sc.next();\n         System.out.println(&quot;Output : &quot;);\n        for (char alphabet = 'A'; alphabet &lt;= 'Z'; alphabet++) {\n            if (input.toUpperCase().indexOf(alphabet) &lt; 0) \n                System.out.print(alphabet + &quot; &quot;);\n        }\n    }\n    public static void main(String[] args) {\n        letters();\n    }\n}\n</code></pre>\n<p><strong>Ouput Example</strong></p>\n<pre><code>Enter input char\nnandu\nOutput : \nB C E F G H I J K L M O P Q R S T V W X Y Z\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9330342,"reputation":954,"user_id":6926281,"accept_rate":67,"display_name":"Halfacht"},"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1522156456,"creation_date":1522156456,"answer_id":49513868,"question_id":506105,"body_markdown":"You can use 2 methods from the `String` class.\r\n\r\n   - [**`String.contains()`**][1] which checks if the string contains a specified sequence of char values\r\n   - [**`String.indexOf()`**][2] which returns the index within the string of the first occurence of the specified character or substring or returns -1 if the character is not found (there are 4 variations of this method)\r\n\r\nMethod 1:\r\n\r\n    String myString = &quot;foobar&quot;;\r\n    if (myString.contains(&quot;x&quot;) {\r\n        // Do something.\r\n    }\r\n\r\nMethod 2:\r\n\r\n    String myString = &quot;foobar&quot;;\r\n    if (myString.indexOf(&quot;x&quot;) &gt;= 0 {\r\n        // Do something.\r\n    }\r\n\r\n\r\nLinks by: [Zach Scrivena][3]\r\n\r\n  [1]: http://java.sun.com/javase/6/docs/api/java/lang/String.html#contains(java.lang.CharSequence)\r\n  [2]: http://java.sun.com/javase/6/docs/api/java/lang/String.html#indexOf(int)\r\n  [3]: https://stackoverflow.com/users/20029/zach-scrivena\r\n\r\n","title":"How can I check if a single character appears in a string?","body":"<p>You can use 2 methods from the <code>String</code> class.</p>\n\n<ul>\n<li><a href=\"http://java.sun.com/javase/6/docs/api/java/lang/String.html#contains(java.lang.CharSequence)\" rel=\"noreferrer\"><strong><code>String.contains()</code></strong></a> which checks if the string contains a specified sequence of char values</li>\n<li><a href=\"http://java.sun.com/javase/6/docs/api/java/lang/String.html#indexOf(int)\" rel=\"noreferrer\"><strong><code>String.indexOf()</code></strong></a> which returns the index within the string of the first occurence of the specified character or substring or returns -1 if the character is not found (there are 4 variations of this method)</li>\n</ul>\n\n<p>Method 1:</p>\n\n<pre><code>String myString = \"foobar\";\nif (myString.contains(\"x\") {\n    // Do something.\n}\n</code></pre>\n\n<p>Method 2:</p>\n\n<pre><code>String myString = \"foobar\";\nif (myString.indexOf(\"x\") &gt;= 0 {\n    // Do something.\n}\n</code></pre>\n\n<p>Links by: <a href=\"https://stackoverflow.com/users/20029/zach-scrivena\">Zach Scrivena</a></p>\n"},{"tags":[],"owner":{"account_id":1533854,"reputation":904,"user_id":1430390,"accept_rate":8,"display_name":"Toochka"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1594727365,"creation_date":1522156816,"answer_id":49514009,"question_id":506105,"body_markdown":"Is the below what you were looking for?\n\n    int index = string.indexOf(character);\n    return index != -1;","title":"How can I check if a single character appears in a string?","body":"<p>Is the below what you were looking for?</p>\n<pre><code>int index = string.indexOf(character);\nreturn index != -1;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5710109,"reputation":4305,"user_id":4512411,"display_name":"Dhyey"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1562143542,"creation_date":1562143542,"answer_id":56866220,"question_id":506105,"body_markdown":"You won&#39;t be able to check if char appears at all in some string without atleast going over the string once using loop / recursion ( the built-in methods like indexOf also use a loop )\r\n\r\nIf the no. of times you look up if a char is in string *x* is more way more than the length of the string than I would recommend using a [Set](https://docs.oracle.com/javase/7/docs/api/java/util/Set.html) data structure as that would be more efficient than simply using `indexOf`\r\n\r\n```\r\nString s = &quot;abc&quot;;\r\n\r\n// Build a set so we can check if character exists in constant time O(1)\r\nSet&lt;Character&gt; set = new HashSet&lt;&gt;();\r\nint len = s.length();\r\nfor(int i = 0; i &lt; len; i++) set.add(s.charAt(i));\r\n\r\n// Now we can check without the need of a loop\r\n// contains method of set doesn&#39;t use a loop unlike string&#39;s contains method\r\nset.contains(&#39;a&#39;) // true\r\nset.contains(&#39;z&#39;) // false\r\n```\r\n\r\nUsing set you will be able to check if character exists in a string in **constant time** O(1) but you will also use additional memory ( Space complexity will be O(n) ).","title":"How can I check if a single character appears in a string?","body":"<p>You won't be able to check if char appears at all in some string without atleast going over the string once using loop / recursion ( the built-in methods like indexOf also use a loop )</p>\n\n<p>If the no. of times you look up if a char is in string <em>x</em> is more way more than the length of the string than I would recommend using a <a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/Set.html\" rel=\"nofollow noreferrer\">Set</a> data structure as that would be more efficient than simply using <code>indexOf</code></p>\n\n<pre><code>String s = \"abc\";\n\n// Build a set so we can check if character exists in constant time O(1)\nSet&lt;Character&gt; set = new HashSet&lt;&gt;();\nint len = s.length();\nfor(int i = 0; i &lt; len; i++) set.add(s.charAt(i));\n\n// Now we can check without the need of a loop\n// contains method of set doesn't use a loop unlike string's contains method\nset.contains('a') // true\nset.contains('z') // false\n</code></pre>\n\n<p>Using set you will be able to check if character exists in a string in <strong>constant time</strong> O(1) but you will also use additional memory ( Space complexity will be O(n) ).</p>\n"},{"tags":[],"owner":{"account_id":2976512,"reputation":3160,"user_id":2527458,"accept_rate":36,"display_name":"Majid Hajibaba"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1596957918,"creation_date":1596957918,"answer_id":63323603,"question_id":506105,"body_markdown":"If you see the source code of **indexOf** in JAVA:\r\n\r\n```\r\npublic int indexOf(int ch, int fromIndex) {\r\n\r\n        final int max = value.length;\r\n\r\n        if (fromIndex &lt; 0) {\r\n\r\n            fromIndex = 0;\r\n\r\n        } else if (fromIndex &gt;= max) {\r\n\r\n            // Note: fromIndex might be near -1&gt;&gt;&gt;1.\r\n\r\n            return -1;\r\n\r\n        }\r\n\r\n\r\n        if (ch &lt; Character.MIN_SUPPLEMENTARY_CODE_POINT) {\r\n\r\n            // handle most cases here (ch is a BMP code point or a\r\n\r\n            // negative value (invalid code point))\r\n\r\n            final char[] value = this.value;\r\n\r\n            for (int i = fromIndex; i &lt; max; i++) {\r\n\r\n                if (value[i] == ch) {\r\n\r\n                    return i;\r\n\r\n                }\r\n\r\n            }\r\n\r\n            return -1;\r\n\r\n        } else {\r\n\r\n            return indexOfSupplementary(ch, fromIndex);\r\n\r\n        }\r\n\r\n    }\r\n```\r\nyou can see it uses a for loop for finding a character. Note that each *indexOf* you may use in your code, is equal to one loop.\r\n\r\n**So, it is unavoidable to use loop for a single character.** \r\n\r\nHowever, if you want to find a special string with more different forms, use useful libraries such as `util.regex`, it deploys stronger algorithm to match a character or a  string pattern with *Regular Expressions*. For example to find an email in a string:\r\n\r\n```\r\nString regex = &quot;^(.+)@(.+)$&quot;;\r\n \r\nPattern pattern = Pattern.compile(regex);\r\nMatcher matcher = pattern.matcher(email);\r\n```\r\n\r\nIf you don&#39;t like to use regex, just use a loop and `charAt` and try to cover all cases in one loop.\r\n\r\nBe careful recursive methods has more overhead than loop, so it&#39;s not recommended. ","title":"How can I check if a single character appears in a string?","body":"<p>If you see the source code of <strong>indexOf</strong> in JAVA:</p>\n<pre><code>public int indexOf(int ch, int fromIndex) {\n\n        final int max = value.length;\n\n        if (fromIndex &lt; 0) {\n\n            fromIndex = 0;\n\n        } else if (fromIndex &gt;= max) {\n\n            // Note: fromIndex might be near -1&gt;&gt;&gt;1.\n\n            return -1;\n\n        }\n\n\n        if (ch &lt; Character.MIN_SUPPLEMENTARY_CODE_POINT) {\n\n            // handle most cases here (ch is a BMP code point or a\n\n            // negative value (invalid code point))\n\n            final char[] value = this.value;\n\n            for (int i = fromIndex; i &lt; max; i++) {\n\n                if (value[i] == ch) {\n\n                    return i;\n\n                }\n\n            }\n\n            return -1;\n\n        } else {\n\n            return indexOfSupplementary(ch, fromIndex);\n\n        }\n\n    }\n</code></pre>\n<p>you can see it uses a for loop for finding a character. Note that each <em>indexOf</em> you may use in your code, is equal to one loop.</p>\n<p><strong>So, it is unavoidable to use loop for a single character.</strong></p>\n<p>However, if you want to find a special string with more different forms, use useful libraries such as <code>util.regex</code>, it deploys stronger algorithm to match a character or a  string pattern with <em>Regular Expressions</em>. For example to find an email in a string:</p>\n<pre><code>String regex = &quot;^(.+)@(.+)$&quot;;\n \nPattern pattern = Pattern.compile(regex);\nMatcher matcher = pattern.matcher(email);\n</code></pre>\n<p>If you don't like to use regex, just use a loop and <code>charAt</code> and try to cover all cases in one loop.</p>\n<p>Be careful recursive methods has more overhead than loop, so it's not recommended.</p>\n"},{"tags":[],"owner":{"account_id":20511313,"reputation":2360,"user_id":15102459,"display_name":"Thiyanesh"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1616455596,"creation_date":1614033270,"answer_id":66324429,"question_id":506105,"body_markdown":"`String.contains(String)` or `String.indexOf(String)` - suggested\r\n\r\n```java\r\n&quot;abc&quot;.contains(&quot;Z&quot;); // false - correct\r\n&quot;zzzz&quot;.contains(&quot;Z&quot;); // false - correct\r\n&quot;Z&quot;.contains(&quot;Z&quot;); // true - correct\r\n&quot;&#128512;and&#128512;&quot;.contains(&quot;&#128512;&quot;); // true - correct\r\n&quot;&#128512;and&#128512;&quot;.contains(&quot;&#128514;&quot;); // false - correct\r\n&quot;&#128512;and&#128512;&quot;.indexOf(&quot;&#128512;&quot;); // 0 - correct\r\n&quot;&#128512;and&#128512;&quot;.indexOf(&quot;&#128514;&quot;); // -1 - correct\r\n```\r\n\r\n`String.indexOf(int)` and carefully considered `String.indexOf(char)` with char to `int` widening\r\n```java\r\n&quot;&#128512;and&#128512;&quot;.indexOf(&quot;&#128512;&quot;.charAt(0)); // 0 though incorrect usage has correct output due to portion of correct data\r\n&quot;&#128512;and&#128512;&quot;.indexOf(&quot;&#128514;&quot;.charAt(0)); // 0 -- incorrect usage and ambiguous result\r\n&quot;&#128512;and&#128512;&quot;.indexOf(&quot;&#128514;&quot;.codePointAt(0)); // -1 -- correct usage and correct output\r\n```\r\n\r\n\r\n## The discussions around character is ambiguous in Java world\r\n\r\n### can the value of `char` or `Character` considered as single character?\r\n**No**. In the context of unicode characters, `char` or `Character` can sometimes be `part of a single character` and should not be treated as `a complete single character` logically.\r\n\r\n### if not, what should be considered as single character (logically)?\r\nAny system supporting character encodings for Unicode characters should consider unicode&#39;s codepoint as single character. \r\n\r\nSo Java should do that very clear &amp; loud rather than exposing too much of internal implementation details to users. \r\n\r\n`String` class is bad at abstraction (though it requires confusingly good amount of `understanding of its encapsulations to understand the abstraction &#128530;&#128530;&#128530;` and hence an `anti-pattern`).\r\n\r\n### How is it different from general `char` usage?\r\n`char` can be only be mapped to a character in Basic Multilingual Plane.\r\n\r\nOnly `codePoint - int` can cover the complete range of Unicode characters.\r\n\r\n### Why is this difference?\r\n`char` is internally treated as `16-bit` unsigned value and could not represent all the unicode characters using UTF-16 internal representation using only `2-bytes`. Sometimes, values in a `16-bit` range have to be combined with another `16-bit` value to correctly define character.\r\n\r\nWithout getting too verbose, the usage of `indexOf`, `charAt`, `length` and such methods should be more explicit. Sincerely hoping Java will add new `UnicodeString` and `UnicodeCharacter` classes with clearly defined  abstractions.\r\n\r\n### Reason to prefer `contains` and not `indexOf(int)`\r\n1. Practically there are many code flows that treat a logical character as `char` in java.\r\n2. In Unicode context, `char` is not sufficient\r\n3. Though the `indexOf` takes in an `int`, `char` to `int` conversion masks this from the user and user might do something like `str.indexOf(someotherstr.charAt(0))`(unless the user is aware of the exact context)\r\n4. So, treating everything as `CharSequence` (aka `String`) is better\r\n\r\n```java\r\n    public static void main(String[] args) {\r\n        System.out.println(&quot;&#128512;and&#128512;&quot;.indexOf(&quot;&#128512;&quot;.charAt(0))); // 0 though incorrect usage has correct output due to portion of correct data\r\n        System.out.println(&quot;&#128512;and&#128512;&quot;.indexOf(&quot;&#128514;&quot;.charAt(0))); // 0 -- incorrect usage and ambiguous result\r\n        System.out.println(&quot;&#128512;and&#128512;&quot;.indexOf(&quot;&#128514;&quot;.codePointAt(0))); // -1 -- correct usage and correct output\r\n        System.out.println(&quot;&#128512;and&#128512;&quot;.contains(&quot;&#128512;&quot;)); // true - correct\r\n        System.out.println(&quot;&#128512;and&#128512;&quot;.contains(&quot;&#128514;&quot;)); // false - correct\r\n    }\r\n```\r\n\r\n## Semantics\r\n1. `char` can handle most of the practical use cases. Still its better to use codepoints within programming environment for future extensibility.\r\n2. `codepoint` should handle nearly all of the technical use cases around encodings.\r\n3. Still, [Grapheme Clusters](https://unicode.org/reports/tr29/#Grapheme_Cluster_Boundaries) falls out of the scope of `codepoint` level of abstraction.\r\n4. Storage layers can choose `char` interface if `int`s are too costly(doubled). Unless storage cost is the only metric, its still better to use `codepoint`. Also, its better to treat storage as `byte` and delegate semantics to business logic built around storage.\r\n5. Semantics can be abstracted at multiple levels. `codepoint` should become lowest level of interface and other semantics can be built around `codepoint` in runtime environment.\r\n","title":"How can I check if a single character appears in a string?","body":"<p><code>String.contains(String)</code> or <code>String.indexOf(String)</code> - suggested</p>\n<pre class=\"lang-java prettyprint-override\"><code>&quot;abc&quot;.contains(&quot;Z&quot;); // false - correct\n&quot;zzzz&quot;.contains(&quot;Z&quot;); // false - correct\n&quot;Z&quot;.contains(&quot;Z&quot;); // true - correct\n&quot;😀and😀&quot;.contains(&quot;😀&quot;); // true - correct\n&quot;😀and😀&quot;.contains(&quot;😂&quot;); // false - correct\n&quot;😀and😀&quot;.indexOf(&quot;😀&quot;); // 0 - correct\n&quot;😀and😀&quot;.indexOf(&quot;😂&quot;); // -1 - correct\n</code></pre>\n<p><code>String.indexOf(int)</code> and carefully considered <code>String.indexOf(char)</code> with char to <code>int</code> widening</p>\n<pre class=\"lang-java prettyprint-override\"><code>&quot;😀and😀&quot;.indexOf(&quot;😀&quot;.charAt(0)); // 0 though incorrect usage has correct output due to portion of correct data\n&quot;😀and😀&quot;.indexOf(&quot;😂&quot;.charAt(0)); // 0 -- incorrect usage and ambiguous result\n&quot;😀and😀&quot;.indexOf(&quot;😂&quot;.codePointAt(0)); // -1 -- correct usage and correct output\n</code></pre>\n<h2>The discussions around character is ambiguous in Java world</h2>\n<h3>can the value of <code>char</code> or <code>Character</code> considered as single character?</h3>\n<p><strong>No</strong>. In the context of unicode characters, <code>char</code> or <code>Character</code> can sometimes be <code>part of a single character</code> and should not be treated as <code>a complete single character</code> logically.</p>\n<h3>if not, what should be considered as single character (logically)?</h3>\n<p>Any system supporting character encodings for Unicode characters should consider unicode's codepoint as single character.</p>\n<p>So Java should do that very clear &amp; loud rather than exposing too much of internal implementation details to users.</p>\n<p><code>String</code> class is bad at abstraction (though it requires confusingly good amount of <code>understanding of its encapsulations to understand the abstraction 😒😒😒</code> and hence an <code>anti-pattern</code>).</p>\n<h3>How is it different from general <code>char</code> usage?</h3>\n<p><code>char</code> can be only be mapped to a character in Basic Multilingual Plane.</p>\n<p>Only <code>codePoint - int</code> can cover the complete range of Unicode characters.</p>\n<h3>Why is this difference?</h3>\n<p><code>char</code> is internally treated as <code>16-bit</code> unsigned value and could not represent all the unicode characters using UTF-16 internal representation using only <code>2-bytes</code>. Sometimes, values in a <code>16-bit</code> range have to be combined with another <code>16-bit</code> value to correctly define character.</p>\n<p>Without getting too verbose, the usage of <code>indexOf</code>, <code>charAt</code>, <code>length</code> and such methods should be more explicit. Sincerely hoping Java will add new <code>UnicodeString</code> and <code>UnicodeCharacter</code> classes with clearly defined  abstractions.</p>\n<h3>Reason to prefer <code>contains</code> and not <code>indexOf(int)</code></h3>\n<ol>\n<li>Practically there are many code flows that treat a logical character as <code>char</code> in java.</li>\n<li>In Unicode context, <code>char</code> is not sufficient</li>\n<li>Though the <code>indexOf</code> takes in an <code>int</code>, <code>char</code> to <code>int</code> conversion masks this from the user and user might do something like <code>str.indexOf(someotherstr.charAt(0))</code>(unless the user is aware of the exact context)</li>\n<li>So, treating everything as <code>CharSequence</code> (aka <code>String</code>) is better</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>    public static void main(String[] args) {\n        System.out.println(&quot;😀and😀&quot;.indexOf(&quot;😀&quot;.charAt(0))); // 0 though incorrect usage has correct output due to portion of correct data\n        System.out.println(&quot;😀and😀&quot;.indexOf(&quot;😂&quot;.charAt(0))); // 0 -- incorrect usage and ambiguous result\n        System.out.println(&quot;😀and😀&quot;.indexOf(&quot;😂&quot;.codePointAt(0))); // -1 -- correct usage and correct output\n        System.out.println(&quot;😀and😀&quot;.contains(&quot;😀&quot;)); // true - correct\n        System.out.println(&quot;😀and😀&quot;.contains(&quot;😂&quot;)); // false - correct\n    }\n</code></pre>\n<h2>Semantics</h2>\n<ol>\n<li><code>char</code> can handle most of the practical use cases. Still its better to use codepoints within programming environment for future extensibility.</li>\n<li><code>codepoint</code> should handle nearly all of the technical use cases around encodings.</li>\n<li>Still, <a href=\"https://unicode.org/reports/tr29/#Grapheme_Cluster_Boundaries\" rel=\"nofollow noreferrer\">Grapheme Clusters</a> falls out of the scope of <code>codepoint</code> level of abstraction.</li>\n<li>Storage layers can choose <code>char</code> interface if <code>int</code>s are too costly(doubled). Unless storage cost is the only metric, its still better to use <code>codepoint</code>. Also, its better to treat storage as <code>byte</code> and delegate semantics to business logic built around storage.</li>\n<li>Semantics can be abstracted at multiple levels. <code>codepoint</code> should become lowest level of interface and other semantics can be built around <code>codepoint</code> in runtime environment.</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":13336494,"reputation":706,"user_id":9626186,"display_name":"Code with Benji"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664265622,"creation_date":1664265622,"answer_id":73864206,"question_id":506105,"body_markdown":"how about one uses this ;\r\n\r\n    let text = &quot;Hello world, welcome to the universe.&quot;;\r\n    let result = text.includes(&quot;world&quot;);\r\n    console.log(result) ....// true\r\n\r\nthe result will be a `true` or `false`\r\n\r\nthis always works for me","title":"How can I check if a single character appears in a string?","body":"<p>how about one uses this ;</p>\n<pre><code>let text = &quot;Hello world, welcome to the universe.&quot;;\nlet result = text.includes(&quot;world&quot;);\nconsole.log(result) ....// true\n</code></pre>\n<p>the result will be a <code>true</code> or <code>false</code></p>\n<p>this always works for me</p>\n"}],"owner":{"account_id":13492,"reputation":27641,"user_id":1390354,"accept_rate":91,"display_name":"barfoon"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1269285,"favorite_count":0,"down_vote_count":5,"up_vote_count":287,"accepted_answer_id":506107,"answer_count":16,"score":282,"last_activity_date":1695754699,"creation_date":1233639522,"question_id":506105,"body_markdown":"In Java is there a way to check the condition:\r\n\r\n&quot;Does this single character appear at all in string x&quot;\r\n\r\n**without** using a loop?\r\n","title":"How can I check if a single character appears in a string?","body":"<p>In Java is there a way to check the condition:</p>\n\n<p>\"Does this single character appear at all in string x\"</p>\n\n<p><strong>without</strong> using a loop?</p>\n"},{"tags":["java","android","xml","android-studio","xml-namespaces"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1695749182,"post_id":77181994,"comment_id":136065061,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."}],"answers":[{"tags":[],"owner":{"account_id":21741636,"reputation":1166,"user_id":16048914,"display_name":"David Weber"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695753572,"creation_date":1695753572,"answer_id":77182659,"question_id":77181994,"body_markdown":"Please try &quot;invalidate caches and restart&quot;.\r\nThis should solve this problem.","title":"my android studio res layout xml files name showing duplicate","body":"<p>Please try &quot;invalidate caches and restart&quot;.\nThis should solve this problem.</p>\n"},{"tags":[],"owner":{"account_id":28779899,"reputation":61,"user_id":22041725,"display_name":"Shejan Mahamud"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695754468,"creation_date":1695754468,"answer_id":77182729,"question_id":77181994,"body_markdown":"Try Following Steps: \r\n\r\n\r\n\r\n    Clean project &gt; Invalidate caches and restart &gt; Rebuild Project\r\n\r\n ","title":"my android studio res layout xml files name showing duplicate","body":"<p>Try Following Steps:</p>\n<pre><code>Clean project &gt; Invalidate caches and restart &gt; Rebuild Project\n</code></pre>\n"}],"owner":{"account_id":28128069,"reputation":1,"user_id":21493091,"display_name":"Muhammad Taha"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1695754468,"creation_date":1695746983,"question_id":77181994,"body_markdown":"[Android studio xml file name problem](https://i.stack.imgur.com/yB02n.png)\r\n\r\nmy android studio res layout xml files name showing duplicate. Also my drawable file name showing two times. for example: main_activity.xmlmain_activity.xml. I also update my IDE but this weird thing is not gone.","title":"my android studio res layout xml files name showing duplicate","body":"<p><a href=\"https://i.stack.imgur.com/yB02n.png\" rel=\"nofollow noreferrer\">Android studio xml file name problem</a></p>\n<p>my android studio res layout xml files name showing duplicate. Also my drawable file name showing two times. for example: main_activity.xmlmain_activity.xml. I also update my IDE but this weird thing is not gone.</p>\n"},{"tags":["java","android","android-videoview"],"comments":[{"owner":{"account_id":251969,"reputation":13463,"user_id":529691,"display_name":"JoxTraex"},"score":0,"creation_date":1478303578,"post_id":40433248,"comment_id":68115056,"body_markdown":"Did you read logcat to see if it has any explanation? Did you confirm that the device can even go to that url? Are you sure its not session protected and non-public?","body":"Did you read logcat to see if it has any explanation? Did you confirm that the device can even go to that url? Are you sure its not session protected and non-public?"},{"owner":{"account_id":9191552,"reputation":737,"user_id":6831883,"accept_rate":60,"display_name":"Aligator"},"score":1,"creation_date":1478303958,"post_id":40433248,"comment_id":68115144,"body_markdown":"I&#39;ve tried another one online and one video from local ... no one works","body":"I&#39;ve tried another one online and one video from local ... no one works"},{"owner":{"account_id":251969,"reputation":13463,"user_id":529691,"display_name":"JoxTraex"},"score":0,"creation_date":1478304327,"post_id":40433248,"comment_id":68115216,"body_markdown":"confirm by going that url on your browser ON THE DEVICE to confirm what the behavior is. You need to see if its even a valid URL that you can access in a previously un-authed session. Don&#39;t assume just because it load on the web that it&#39;ll load for you, sessions make a big difference.","body":"confirm by going that url on your browser ON THE DEVICE to confirm what the behavior is. You need to see if its even a valid URL that you can access in a previously un-authed session. Don&#39;t assume just because it load on the web that it&#39;ll load for you, sessions make a big difference."},{"owner":{"account_id":9191552,"reputation":737,"user_id":6831883,"accept_rate":60,"display_name":"Aligator"},"score":0,"creation_date":1478305239,"post_id":40433248,"comment_id":68115413,"body_markdown":"in browser works fine.","body":"in browser works fine."}],"answers":[{"tags":[],"owner":{"account_id":9086851,"reputation":1459,"user_id":6764479,"accept_rate":38,"display_name":"Vishnu M Menon"},"down_vote_count":1,"up_vote_count":48,"is_accepted":true,"score":47,"last_activity_date":1595485201,"creation_date":1478326553,"answer_id":40435356,"question_id":40433248,"body_markdown":"Try this code.. This code works perfectly for me..\r\n\r\n```java\r\nVideoView videoView = findViewById(R.id.videoView);\r\nvideoView.setVideoPath(&quot;http://videocdn.bodybuilding.com/video/mp4/62000/62792m.mp4&quot;);\r\nvideoView.start();\r\n```","title":"Play video from url in VideoView [Android]","body":"<p>Try this code.. This code works perfectly for me..</p>\n<pre class=\"lang-java prettyprint-override\"><code>VideoView videoView = findViewById(R.id.videoView);\nvideoView.setVideoPath(&quot;http://videocdn.bodybuilding.com/video/mp4/62000/62792m.mp4&quot;);\nvideoView.start();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5979444,"reputation":41,"user_id":6108296,"display_name":"Alex Karamyshev"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1515763923,"creation_date":1515758447,"answer_id":48225908,"question_id":40433248,"body_markdown":"As I know you shouldn&#39;t use `wrap_content` for `VideoView` height.\r\n`VideoView` didn&#39;t resize itself after video cached","title":"Play video from url in VideoView [Android]","body":"<p>As I know you shouldn't use <code>wrap_content</code> for <code>VideoView</code> height.\n<code>VideoView</code> didn't resize itself after video cached</p>\n"},{"tags":[],"owner":{"account_id":13950334,"reputation":31,"user_id":10073992,"display_name":"Devolper Engg"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1531466897,"creation_date":1531466854,"answer_id":51319832,"question_id":40433248,"body_markdown":"Kindly add Internet permission them Change layout_height wrap_content into match parent.\r\nthis is a code for this problem \r\n\r\n\r\n    public class MainActivity extends Activity {\r\n        private ProgressDialog bar;\r\n        private String path=&quot;https://videocdn.bodybuilding.com/video/mp4/62000/62792m.mp4&quot;;\r\n        private MediaController ctlr;\r\n        private VideoView videoView;\r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            getWindow().setFormat(PixelFormat.TRANSLUCENT);\r\n            setContentView(R.layout.activity_main);\r\n          bar=new ProgressDialog(MainActivity.this);\r\n            bar.setTitle(&quot;Connecting server&quot;);\r\n            bar.setMessage(&quot;Please Wait... &quot;);\r\n            bar.setCancelable(false);\r\n            bar.show();\r\n           if(bar.isShowing()) {\r\n               videoView = findViewById(R.id.v1);\r\n               Uri uri = Uri.parse(path);\r\n               videoView.setVideoURI(uri);\r\n               videoView.start();\r\n               ctlr = new MediaController(this);\r\n               ctlr.setMediaPlayer(videoView);\r\n               videoView.setMediaController(ctlr);\r\n               videoView.requestFocus();\r\n           }\r\n            bar.dismiss();\r\n        }\r\n    }","title":"Play video from url in VideoView [Android]","body":"<p>Kindly add Internet permission them Change layout_height wrap_content into match parent.\nthis is a code for this problem </p>\n\n<pre><code>public class MainActivity extends Activity {\n    private ProgressDialog bar;\n    private String path=\"https://videocdn.bodybuilding.com/video/mp4/62000/62792m.mp4\";\n    private MediaController ctlr;\n    private VideoView videoView;\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        getWindow().setFormat(PixelFormat.TRANSLUCENT);\n        setContentView(R.layout.activity_main);\n      bar=new ProgressDialog(MainActivity.this);\n        bar.setTitle(\"Connecting server\");\n        bar.setMessage(\"Please Wait... \");\n        bar.setCancelable(false);\n        bar.show();\n       if(bar.isShowing()) {\n           videoView = findViewById(R.id.v1);\n           Uri uri = Uri.parse(path);\n           videoView.setVideoURI(uri);\n           videoView.start();\n           ctlr = new MediaController(this);\n           ctlr.setMediaPlayer(videoView);\n           videoView.setMediaController(ctlr);\n           videoView.requestFocus();\n       }\n        bar.dismiss();\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"display_name":"user13010293"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1592030804,"creation_date":1591366771,"answer_id":62217502,"question_id":40433248,"body_markdown":"    videoView.setURI(Uri.parse(url));// use methods to set url\r\n    videoView.start();\r\n\r\n\r\nthen accept permission\r\n\r\n    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot;/&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot;/&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_WIFI_STATE&quot;/&gt;","title":"Play video from url in VideoView [Android]","body":"<pre><code>videoView.setURI(Uri.parse(url));// use methods to set url\nvideoView.start();\n</code></pre>\n\n<p>then accept permission</p>\n\n<pre><code>&lt;uses-permission android:name=\"android.permission.INTERNET\"/&gt;\n&lt;uses-permission android:name=\"android.permission.ACCESS_NETWORK_STATE\"/&gt;\n&lt;uses-permission android:name=\"android.permission.ACCESS_WIFI_STATE\"/&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":18341665,"reputation":91,"user_id":13357778,"display_name":"mickmick"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1610312103,"creation_date":1610312103,"answer_id":65658402,"question_id":40433248,"body_markdown":"For me, changing the URL from \r\n\r\n    &quot;http://videocdn.bodybuilding.com/video/mp4/62000/62792m.mp4&quot;\r\n\r\nto:\r\n\r\n    &quot;https://videocdn.bodybuilding.com/video/mp4/62000/62792m.mp4&quot;\r\n\r\nmade it work. \r\n\r\nIn other words, I used HTTPS instead of HTTP.\r\n\r\nI used the following code to start the video:\r\n\r\n    final VideoView videoView = findViewById(R.id.videoview); //id in your xml file\r\n    videoView.setVideoURI(Uri.parse(URL)); //the string of the URL mentioned above\r\n    videoView.requestFocus();\r\n    videoView.start();","title":"Play video from url in VideoView [Android]","body":"<p>For me, changing the URL from</p>\n<pre><code>&quot;http://videocdn.bodybuilding.com/video/mp4/62000/62792m.mp4&quot;\n</code></pre>\n<p>to:</p>\n<pre><code>&quot;https://videocdn.bodybuilding.com/video/mp4/62000/62792m.mp4&quot;\n</code></pre>\n<p>made it work.</p>\n<p>In other words, I used HTTPS instead of HTTP.</p>\n<p>I used the following code to start the video:</p>\n<pre><code>final VideoView videoView = findViewById(R.id.videoview); //id in your xml file\nvideoView.setVideoURI(Uri.parse(URL)); //the string of the URL mentioned above\nvideoView.requestFocus();\nvideoView.start();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":20935429,"reputation":1,"user_id":15380680,"display_name":"Shilpa Talesara"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1615874951,"creation_date":1615874547,"answer_id":66649854,"question_id":40433248,"body_markdown":"```\r\npublic class ShowVideoActivity extends AppCompatActivity {\r\n    private static final String VIDEO_SAMPLE =\r\n            &quot;https://www.youtube.com/watch?v=HexFqifusOk&amp;list=RDHexFqifusOk&amp;start_radio=1&quot;;\r\n    private VideoView mVideoView;\r\n    private TextView mBufferingTextView;\r\n    // Current playback position (in milliseconds).\r\n    private int mCurrentPosition = 0;\r\n    // Tag for the instance state bundle.\r\n    private static final String PLAYBACK_TIME = &quot;play_time&quot;;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_show_video);\r\n\r\n        mVideoView = findViewById(R.id.videoview);\r\n        mBufferingTextView = findViewById(R.id.buffering_textview);\r\n\r\n        if (savedInstanceState != null) {\r\n            mCurrentPosition = savedInstanceState.getInt(PLAYBACK_TIME);\r\n        }\r\n\r\n        // Set up the media controller widget and attach it to the video view.\r\n        MediaController controller = new MediaController(this);\r\n        controller.setMediaPlayer(mVideoView);\r\n        mVideoView.setMediaController(controller);\r\n    }\r\n\r\n\r\n    @Override\r\n    protected void onStart() {\r\n        super.onStart();\r\n\r\n        // Load the media each time onStart() is called.\r\n        initializePlayer();\r\n    }\r\n\r\n    @Override\r\n    protected void onPause() {\r\n        super.onPause();\r\n\r\n        // In Android versions less than N (7.0, API 24), onPause() is the\r\n        // end of the visual lifecycle of the app.  Pausing the video here\r\n        // prevents the sound from continuing to play even after the app\r\n        // disappears.\r\n        //\r\n        // This is not a problem for more recent versions of Android because\r\n        // onStop() is now the end of the visual lifecycle, and that is where\r\n        // most of the app teardown should take place.\r\n        if (Build.VERSION.SDK_INT &lt; Build.VERSION_CODES.N) {\r\n            mVideoView.pause();\r\n        }\r\n    }\r\n\r\n    @Override\r\n    protected void onStop() {\r\n        super.onStop();\r\n\r\n        // Media playback takes a lot of resources, so everything should be\r\n        // stopped and released at this time.\r\n        releasePlayer();\r\n    }\r\n\r\n    @Override\r\n    protected void onSaveInstanceState(Bundle outState) {\r\n        super.onSaveInstanceState(outState);\r\n\r\n        // Save the current playback position (in milliseconds) to the\r\n        // instance state bundle.\r\n        outState.putInt(PLAYBACK_TIME, mVideoView.getCurrentPosition());\r\n    }\r\n\r\n    private void initializePlayer() {\r\n        // Show the &quot;Buffering...&quot; message while the video loads.\r\n        mBufferingTextView.setVisibility(VideoView.VISIBLE);\r\n\r\n        // Buffer and decode the video sample.\r\n        Uri videoUri = getMedia(VIDEO_SAMPLE);\r\n        mVideoView.setVideoURI(videoUri);\r\n\r\n        // Listener for onPrepared() event (runs after the media is prepared).\r\n        mVideoView.setOnPreparedListener(\r\n                new MediaPlayer.OnPreparedListener() {\r\n                    @Override\r\n                    public void onPrepared(MediaPlayer mediaPlayer) {\r\n\r\n                        // Hide buffering message.\r\n                        mBufferingTextView.setVisibility(VideoView.INVISIBLE);\r\n\r\n                        // Restore saved position, if available.\r\n                        if (mCurrentPosition &gt; 0) {\r\n                            mVideoView.seekTo(mCurrentPosition);\r\n                        } else {\r\n                            // Skipping to 1 shows the first frame of the video.\r\n                            mVideoView.seekTo(1);\r\n                        }\r\n\r\n                        // Start playing!\r\n                        mVideoView.start();\r\n                    }\r\n                });\r\n\r\n        // Listener for onCompletion() event (runs after media has finished\r\n        // playing).\r\n        mVideoView.setOnCompletionListener(\r\n                new MediaPlayer.OnCompletionListener() {\r\n                    @Override\r\n                    public void onCompletion(MediaPlayer mediaPlayer) {\r\n                        Toast.makeText(ShowVideoActivity.this,\r\n                                &quot;Completed&quot;,\r\n                                Toast.LENGTH_SHORT).show();\r\n\r\n                        // Return the video position to the start.\r\n                        mVideoView.seekTo(0);\r\n                    }\r\n                });\r\n    }\r\n\r\n\r\n    // Release all media-related resources. In a more complicated app this\r\n    // might involve unregistering listeners or releasing audio focus.\r\n    private void releasePlayer() {\r\n        mVideoView.stopPlayback();\r\n    }\r\n\r\n    // Get a Uri for the media sample regardless of whether that sample is\r\n    // embedded in the app resources or available on the internet.\r\n    private Uri getMedia(String mediaName) {\r\n        if (URLUtil.isValidUrl(mediaName)) {\r\n            // Media name is an external URL.\r\n            return Uri.parse(mediaName);\r\n        } else {\r\n\r\n            // you can also put a video file in raw package and get file from there as shown below\r\n\r\n            return Uri.parse(&quot;android.resource://&quot; + getPackageName() +\r\n                    &quot;/raw/&quot; + mediaName);\r\n\r\n\r\n        }\r\n    }\r\n\r\n}\r\n```","title":"Play video from url in VideoView [Android]","body":"<pre><code>public class ShowVideoActivity extends AppCompatActivity {\n    private static final String VIDEO_SAMPLE =\n            &quot;https://www.youtube.com/watch?v=HexFqifusOk&amp;list=RDHexFqifusOk&amp;start_radio=1&quot;;\n    private VideoView mVideoView;\n    private TextView mBufferingTextView;\n    // Current playback position (in milliseconds).\n    private int mCurrentPosition = 0;\n    // Tag for the instance state bundle.\n    private static final String PLAYBACK_TIME = &quot;play_time&quot;;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_show_video);\n\n        mVideoView = findViewById(R.id.videoview);\n        mBufferingTextView = findViewById(R.id.buffering_textview);\n\n        if (savedInstanceState != null) {\n            mCurrentPosition = savedInstanceState.getInt(PLAYBACK_TIME);\n        }\n\n        // Set up the media controller widget and attach it to the video view.\n        MediaController controller = new MediaController(this);\n        controller.setMediaPlayer(mVideoView);\n        mVideoView.setMediaController(controller);\n    }\n\n\n    @Override\n    protected void onStart() {\n        super.onStart();\n\n        // Load the media each time onStart() is called.\n        initializePlayer();\n    }\n\n    @Override\n    protected void onPause() {\n        super.onPause();\n\n        // In Android versions less than N (7.0, API 24), onPause() is the\n        // end of the visual lifecycle of the app.  Pausing the video here\n        // prevents the sound from continuing to play even after the app\n        // disappears.\n        //\n        // This is not a problem for more recent versions of Android because\n        // onStop() is now the end of the visual lifecycle, and that is where\n        // most of the app teardown should take place.\n        if (Build.VERSION.SDK_INT &lt; Build.VERSION_CODES.N) {\n            mVideoView.pause();\n        }\n    }\n\n    @Override\n    protected void onStop() {\n        super.onStop();\n\n        // Media playback takes a lot of resources, so everything should be\n        // stopped and released at this time.\n        releasePlayer();\n    }\n\n    @Override\n    protected void onSaveInstanceState(Bundle outState) {\n        super.onSaveInstanceState(outState);\n\n        // Save the current playback position (in milliseconds) to the\n        // instance state bundle.\n        outState.putInt(PLAYBACK_TIME, mVideoView.getCurrentPosition());\n    }\n\n    private void initializePlayer() {\n        // Show the &quot;Buffering...&quot; message while the video loads.\n        mBufferingTextView.setVisibility(VideoView.VISIBLE);\n\n        // Buffer and decode the video sample.\n        Uri videoUri = getMedia(VIDEO_SAMPLE);\n        mVideoView.setVideoURI(videoUri);\n\n        // Listener for onPrepared() event (runs after the media is prepared).\n        mVideoView.setOnPreparedListener(\n                new MediaPlayer.OnPreparedListener() {\n                    @Override\n                    public void onPrepared(MediaPlayer mediaPlayer) {\n\n                        // Hide buffering message.\n                        mBufferingTextView.setVisibility(VideoView.INVISIBLE);\n\n                        // Restore saved position, if available.\n                        if (mCurrentPosition &gt; 0) {\n                            mVideoView.seekTo(mCurrentPosition);\n                        } else {\n                            // Skipping to 1 shows the first frame of the video.\n                            mVideoView.seekTo(1);\n                        }\n\n                        // Start playing!\n                        mVideoView.start();\n                    }\n                });\n\n        // Listener for onCompletion() event (runs after media has finished\n        // playing).\n        mVideoView.setOnCompletionListener(\n                new MediaPlayer.OnCompletionListener() {\n                    @Override\n                    public void onCompletion(MediaPlayer mediaPlayer) {\n                        Toast.makeText(ShowVideoActivity.this,\n                                &quot;Completed&quot;,\n                                Toast.LENGTH_SHORT).show();\n\n                        // Return the video position to the start.\n                        mVideoView.seekTo(0);\n                    }\n                });\n    }\n\n\n    // Release all media-related resources. In a more complicated app this\n    // might involve unregistering listeners or releasing audio focus.\n    private void releasePlayer() {\n        mVideoView.stopPlayback();\n    }\n\n    // Get a Uri for the media sample regardless of whether that sample is\n    // embedded in the app resources or available on the internet.\n    private Uri getMedia(String mediaName) {\n        if (URLUtil.isValidUrl(mediaName)) {\n            // Media name is an external URL.\n            return Uri.parse(mediaName);\n        } else {\n\n            // you can also put a video file in raw package and get file from there as shown below\n\n            return Uri.parse(&quot;android.resource://&quot; + getPackageName() +\n                    &quot;/raw/&quot; + mediaName);\n\n\n        }\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10238122,"reputation":16,"user_id":7556356,"display_name":"Mohammad Mostafavi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695754336,"creation_date":1695754336,"answer_id":77182720,"question_id":40433248,"body_markdown":"at the first you need to set internet permission in the AndroidManifest.xml file like below:\r\n\r\n    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\r\n\r\nand then for playing video from url in android use the below structure for more readable I commented the code:)\r\n\r\n        // Your Video URL\r\n        String videoUrl = &quot;https://videocdn.bodybuilding.com/video/mp4/62000/62792m.mp4&quot;;\r\n\r\n        // on below line we are initializing our variables.\r\n        videoView = findViewById(R.id.videoView);\r\n\r\n\r\n        // Uri object to refer the\r\n        // resource from the videoUrl\r\n        Uri uri = Uri.parse(videoUrl);\r\n\r\n        // sets the resource from the\r\n        // videoUrl to the videoView\r\n        videoView.setVideoURI(uri);\r\n\r\n        // creating object of\r\n        // media controller class\r\n        MediaController mediaController = new MediaController(this);\r\n\r\n        // sets the anchor view\r\n        // anchor view for the videoView\r\n        mediaController.setAnchorView(videoView);\r\n\r\n        // sets the media player to the videoView\r\n        mediaController.setMediaPlayer(videoView);\r\n\r\n        // sets the media controller to the videoView\r\n        videoView.setMediaController(mediaController);\r\n\r\n        // starts the video\r\n        videoView.start();\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/hr3Yy.jpg","title":"Play video from url in VideoView [Android]","body":"<p>at the first you need to set internet permission in the AndroidManifest.xml file like below:</p>\n<pre><code>&lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\n</code></pre>\n<p>and then for playing video from url in android use the below structure for more readable I commented the code:)</p>\n<pre><code>    // Your Video URL\n    String videoUrl = &quot;https://videocdn.bodybuilding.com/video/mp4/62000/62792m.mp4&quot;;\n\n    // on below line we are initializing our variables.\n    videoView = findViewById(R.id.videoView);\n\n\n    // Uri object to refer the\n    // resource from the videoUrl\n    Uri uri = Uri.parse(videoUrl);\n\n    // sets the resource from the\n    // videoUrl to the videoView\n    videoView.setVideoURI(uri);\n\n    // creating object of\n    // media controller class\n    MediaController mediaController = new MediaController(this);\n\n    // sets the anchor view\n    // anchor view for the videoView\n    mediaController.setAnchorView(videoView);\n\n    // sets the media player to the videoView\n    mediaController.setMediaPlayer(videoView);\n\n    // sets the media controller to the videoView\n    videoView.setMediaController(mediaController);\n\n    // starts the video\n    videoView.start();\n</code></pre>\n"}],"owner":{"account_id":9191552,"reputation":737,"user_id":6831883,"accept_rate":60,"display_name":"Aligator"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":97617,"favorite_count":0,"down_vote_count":1,"up_vote_count":28,"accepted_answer_id":40435356,"answer_count":7,"score":27,"last_activity_date":1695754336,"creation_date":1478303188,"question_id":40433248,"body_markdown":"I found a similar questions but nothing work for me.\r\nI try play video from this url:\r\n\r\n    http://videocdn.bodybuilding.com/video/mp4/62000/62792m.mp4\r\n\r\nMy java code:\r\n\r\n    VideoView videoView= (VideoView)findViewById(R.id.exerciseVideo);\r\n        Uri uri = Uri.parse(TEST_URL);\r\n        videoView.setVideoURI(uri);\r\n        videoView.requestFocus();\r\n        videoView.start();\r\n\r\nWhen I run app nothing is displayed in activity and IDE does not show any errors. ANy idea, please?\r\n\r\nEDIT:\r\n\r\nMy activity where I want to show video:\r\n\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n\r\n    &lt;ScrollView xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;&gt;\r\n    \r\n        &lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n            xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;match_parent&quot;\r\n            android:paddingBottom=&quot;@dimen/activity_vertical_margin&quot;\r\n            android:paddingLeft=&quot;@dimen/activity_horizontal_margin&quot;\r\n            android:paddingRight=&quot;@dimen/activity_horizontal_margin&quot;\r\n            android:paddingTop=&quot;@dimen/activity_vertical_margin&quot;\r\n            tools:context=&quot;com.example.martin.fitnessapp.ExerciseDetailActivity&quot;\r\n            android:orientation=&quot;vertical&quot;&gt;\r\n    \r\n    \r\n            &lt;LinearLayout\r\n                android:orientation=&quot;horizontal&quot;\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;match_parent&quot;\r\n                android:weightSum=&quot;2&quot;&gt;\r\n                &lt;ImageView\r\n                    android:layout_width=&quot;match_parent&quot;\r\n                    android:layout_height=&quot;wrap_content&quot;\r\n                    android:id=&quot;@+id/exerciseImgA&quot;\r\n                    android:layout_weight=&quot;1&quot;\r\n                    android:scaleType=&quot;fitCenter&quot;\r\n                    android:adjustViewBounds=&quot;true&quot;\r\n                    android:paddingRight=&quot;8dp&quot;/&gt;\r\n    \r\n                &lt;ImageView\r\n                    android:layout_width=&quot;fill_parent&quot;\r\n                    android:layout_height=&quot;wrap_content&quot;\r\n                    android:id=&quot;@+id/exerciseImgB&quot;\r\n                    android:layout_weight=&quot;1&quot;\r\n                    android:scaleType=&quot;fitCenter&quot;\r\n                    android:adjustViewBounds=&quot;true&quot;\r\n                    android:paddingLeft=&quot;8dp&quot;/&gt;\r\n            &lt;/LinearLayout&gt;\r\n    \r\n            &lt;TextView\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:textAppearance=&quot;?android:attr/textAppearanceMedium&quot;\r\n                android:text=&quot;&quot;\r\n                android:id=&quot;@+id/exerciseDesc&quot; /&gt;\r\n    \r\n            &lt;VideoView\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:id=&quot;@+id/exerciseVideo&quot; /&gt;\r\n    \r\n            &lt;ImageView\r\n                android:layout_width=&quot;fill_parent&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:id=&quot;@+id/guideImg&quot;\r\n                android:scaleType=&quot;fitCenter&quot;\r\n                android:adjustViewBounds=&quot;true&quot;/&gt;\r\n    \r\n    \r\n        &lt;/LinearLayout&gt;\r\n    &lt;/ScrollView&gt;","title":"Play video from url in VideoView [Android]","body":"<p>I found a similar questions but nothing work for me.\nI try play video from this url:</p>\n\n<pre><code>http://videocdn.bodybuilding.com/video/mp4/62000/62792m.mp4\n</code></pre>\n\n<p>My java code:</p>\n\n<pre><code>VideoView videoView= (VideoView)findViewById(R.id.exerciseVideo);\n    Uri uri = Uri.parse(TEST_URL);\n    videoView.setVideoURI(uri);\n    videoView.requestFocus();\n    videoView.start();\n</code></pre>\n\n<p>When I run app nothing is displayed in activity and IDE does not show any errors. ANy idea, please?</p>\n\n<p>EDIT:</p>\n\n<p>My activity where I want to show video:</p>\n\n\n\n<pre><code>&lt;ScrollView xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"&gt;\n\n    &lt;LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n        xmlns:tools=\"http://schemas.android.com/tools\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        android:paddingBottom=\"@dimen/activity_vertical_margin\"\n        android:paddingLeft=\"@dimen/activity_horizontal_margin\"\n        android:paddingRight=\"@dimen/activity_horizontal_margin\"\n        android:paddingTop=\"@dimen/activity_vertical_margin\"\n        tools:context=\"com.example.martin.fitnessapp.ExerciseDetailActivity\"\n        android:orientation=\"vertical\"&gt;\n\n\n        &lt;LinearLayout\n            android:orientation=\"horizontal\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"match_parent\"\n            android:weightSum=\"2\"&gt;\n            &lt;ImageView\n                android:layout_width=\"match_parent\"\n                android:layout_height=\"wrap_content\"\n                android:id=\"@+id/exerciseImgA\"\n                android:layout_weight=\"1\"\n                android:scaleType=\"fitCenter\"\n                android:adjustViewBounds=\"true\"\n                android:paddingRight=\"8dp\"/&gt;\n\n            &lt;ImageView\n                android:layout_width=\"fill_parent\"\n                android:layout_height=\"wrap_content\"\n                android:id=\"@+id/exerciseImgB\"\n                android:layout_weight=\"1\"\n                android:scaleType=\"fitCenter\"\n                android:adjustViewBounds=\"true\"\n                android:paddingLeft=\"8dp\"/&gt;\n        &lt;/LinearLayout&gt;\n\n        &lt;TextView\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\"\n            android:textAppearance=\"?android:attr/textAppearanceMedium\"\n            android:text=\"\"\n            android:id=\"@+id/exerciseDesc\" /&gt;\n\n        &lt;VideoView\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\"\n            android:id=\"@+id/exerciseVideo\" /&gt;\n\n        &lt;ImageView\n            android:layout_width=\"fill_parent\"\n            android:layout_height=\"wrap_content\"\n            android:id=\"@+id/guideImg\"\n            android:scaleType=\"fitCenter\"\n            android:adjustViewBounds=\"true\"/&gt;\n\n\n    &lt;/LinearLayout&gt;\n&lt;/ScrollView&gt;\n</code></pre>\n"},{"tags":["java","algorithm","sorting","time","time-measurement"],"comments":[{"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":1,"creation_date":1695753949,"post_id":77182658,"comment_id":136065870,"body_markdown":"Measuring the performance of functions in Java is _very hard,_ as a result of a number of variables.  Most obviously, the JVM&#39;s JIT compilation makes functions faster as they&#39;re called more often through the operation of a program.  You really can&#39;t measure the performance of something in Java without a benchmarking framework -- almost certainly JMH -- and any results you get measuring like this are likely to produce _completely wrong_ results.","body":"Measuring the performance of functions in Java is <i>very hard,</i> as a result of a number of variables.  Most obviously, the JVM&#39;s JIT compilation makes functions faster as they&#39;re called more often through the operation of a program.  You really can&#39;t measure the performance of something in Java without a benchmarking framework -- almost certainly JMH -- and any results you get measuring like this are likely to produce <i>completely wrong</i> results."},{"owner":{"account_id":29541276,"reputation":9,"user_id":22639885,"display_name":"HelpAnElf"},"score":0,"creation_date":1695786515,"post_id":77182658,"comment_id":136069402,"body_markdown":"Thanks a lot for pointing me in the right direction! I didn&#39;t even know that it was called Micro benchmarking, JMH has worked for me.\n\nIm new to stackOverflow, so can I give you a thumbs up or something? (I cant find anything)","body":"Thanks a lot for pointing me in the right direction! I didn&#39;t even know that it was called Micro benchmarking, JMH has worked for me.  Im new to stackOverflow, so can I give you a thumbs up or something? (I cant find anything)"}],"owner":{"account_id":29541276,"reputation":9,"user_id":22639885,"display_name":"HelpAnElf"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"closed_date":1695753883,"answer_count":0,"score":0,"last_activity_date":1695753936,"creation_date":1695753567,"question_id":77182658,"body_markdown":"    Function1 num1 = new Function1();\r\n    //Function2 num2 = new Function2();\r\n\r\n\r\n    ArrayList&lt;Integer&gt; nonSortedList = new ArrayList&lt;&gt;();\r\n    for (int i=1; i&lt;10000000; i++) nonSortedList.add(i);\r\n    Collections.shuffle(nonSortedList);\r\n    ArrayList&lt;Integer&gt; nonSortedList2 = new ArrayList&lt;&gt;(nonSortedList);\r\n    //ArrayList&lt;Integer&gt; nonSortedList3 = new ArrayList&lt;&gt;(nonSortedList2);\r\n\r\n\r\n\r\n    System.out.println();\r\n    System.out.println();\r\n\r\n    long start = System.nanoTime();\r\n    Collections.sort(nonSortedList);\r\n    System.out.println(&quot;function1= &quot;+((System.nanoTime()-start)/1000000000.0));\r\n\r\n    start = System.nanoTime();\r\n    num.sort(nonSortedList2);\r\n    System.out.println(&quot;function2= &quot;+((System.nanoTime()-start)/1000000000.0));\r\n\r\n    /*\r\n    start = System.nanoTime();\r\n    num2.sort(nonSortedList3);\r\n    System.out.println(&quot;function3= &quot;+((System.nanoTime()-start)/1000000000.0));\r\n    */\r\n\r\n    Output without commented lines:\r\n    function1= 6-7 seconds\r\n    function2= 2-3 seconds\r\n\r\n    Output with commented lines included:\r\n    function1= 3.8144072\r\n    function2= 5.8931552\r\n    function3= 4.2656519\r\n\r\n\r\nWhat I expected to happen is the runtime of the sort algorithm of Collection.sort() and the Function1 sort algorithm to remain the same after adding the Funtion2 algorithm measurement code, \r\n\r\nWhy does the code added elsewhere make Collections.sort() faster and the second sorting function slower. How is this possible?\r\n\r\nWhy is the speed changing with new code added when the function being measured between System.nanotime() calls is still the same?\r\n\r\nNote that i have also tried Instant.now(), the problem has something to do with the syntax of my measuring code... definitely not the functions","title":"Same function different runtime?! Why is the time measured not the same when adding code elsewhere? Java, Sorting algorithm time measurement, nanotime","body":"<pre><code>Function1 num1 = new Function1();\n//Function2 num2 = new Function2();\n\n\nArrayList&lt;Integer&gt; nonSortedList = new ArrayList&lt;&gt;();\nfor (int i=1; i&lt;10000000; i++) nonSortedList.add(i);\nCollections.shuffle(nonSortedList);\nArrayList&lt;Integer&gt; nonSortedList2 = new ArrayList&lt;&gt;(nonSortedList);\n//ArrayList&lt;Integer&gt; nonSortedList3 = new ArrayList&lt;&gt;(nonSortedList2);\n\n\n\nSystem.out.println();\nSystem.out.println();\n\nlong start = System.nanoTime();\nCollections.sort(nonSortedList);\nSystem.out.println(&quot;function1= &quot;+((System.nanoTime()-start)/1000000000.0));\n\nstart = System.nanoTime();\nnum.sort(nonSortedList2);\nSystem.out.println(&quot;function2= &quot;+((System.nanoTime()-start)/1000000000.0));\n\n/*\nstart = System.nanoTime();\nnum2.sort(nonSortedList3);\nSystem.out.println(&quot;function3= &quot;+((System.nanoTime()-start)/1000000000.0));\n*/\n\nOutput without commented lines:\nfunction1= 6-7 seconds\nfunction2= 2-3 seconds\n\nOutput with commented lines included:\nfunction1= 3.8144072\nfunction2= 5.8931552\nfunction3= 4.2656519\n</code></pre>\n<p>What I expected to happen is the runtime of the sort algorithm of Collection.sort() and the Function1 sort algorithm to remain the same after adding the Funtion2 algorithm measurement code,</p>\n<p>Why does the code added elsewhere make Collections.sort() faster and the second sorting function slower. How is this possible?</p>\n<p>Why is the speed changing with new code added when the function being measured between System.nanotime() calls is still the same?</p>\n<p>Note that i have also tried Instant.now(), the problem has something to do with the syntax of my measuring code... definitely not the functions</p>\n"},{"tags":["java","android","firebase","react-native","react-native-firebase"],"comments":[{"owner":{"account_id":7292081,"reputation":13504,"user_id":5558150,"accept_rate":100,"display_name":"Bhuvanesh BS"},"score":1,"creation_date":1527740877,"post_id":50608169,"comment_id":88243069,"body_markdown":"use same version of play-service libraries. Also dont use+ operator in dependencies. found versions `services-base:15.+&#39;`, `vision:12.0.1`","body":"use same version of play-service libraries. Also dont use+ operator in dependencies. found versions <code>services-base:15.+&#39;</code>, <code>vision:12.0.1</code>"},{"owner":{"account_id":3244469,"reputation":188,"user_id":2736483,"display_name":"bo_"},"score":1,"creation_date":1533863376,"post_id":50608169,"comment_id":90513398,"body_markdown":"@alex-khanenya did you find a solution? I have the same error. Thanks","body":"@alex-khanenya did you find a solution? I have the same error. Thanks"}],"answers":[{"tags":[],"owner":{"account_id":3436774,"reputation":2855,"user_id":2879716,"display_name":"Alexey Grinko"},"down_vote_count":1,"up_vote_count":17,"is_accepted":false,"score":16,"last_activity_date":1536088116,"creation_date":1536088116,"answer_id":52172596,"question_id":50608169,"body_markdown":"Faced the same issue. Then I found out that I missed an important set of instructions to integrate Firebase with Android project: https://firebase.google.com/docs/android/setup#add_firebase_to_your_app\r\n\r\nHere is the summary of the steps in that documentation that helped in my case:\r\n\r\n1. Generate `google-services.json` and put it to your `android/app/` directory.\r\n2. Add `classpath &#39;com.google.gms:google-services:4.1.0&#39;` to `buildscript -&gt; dependencies` section of your root-level `build.gradle` config; add `google()` to `allprogects -&gt; repositories` section of the same file.\r\n3. Add `implementation &#39;com.google.firebase:firebase-core:16.0.3&#39;` to `dependencies` section of your app module&#39;s `build.gradle` file; add `apply plugin: &#39;com.google.gms.google-services&#39;` at the very bottom of the same file.\r\n4. Sync and rebuild. Now it should work.\r\n\r\n","title":"Java.lang.NoClassDefFoundError: Failed resolution of: Lcom/google/firebase/FirebaseApp","body":"<p>Faced the same issue. Then I found out that I missed an important set of instructions to integrate Firebase with Android project: <a href=\"https://firebase.google.com/docs/android/setup#add_firebase_to_your_app\" rel=\"noreferrer\">https://firebase.google.com/docs/android/setup#add_firebase_to_your_app</a></p>\n\n<p>Here is the summary of the steps in that documentation that helped in my case:</p>\n\n<ol>\n<li>Generate <code>google-services.json</code> and put it to your <code>android/app/</code> directory.</li>\n<li>Add <code>classpath 'com.google.gms:google-services:4.1.0'</code> to <code>buildscript -&gt; dependencies</code> section of your root-level <code>build.gradle</code> config; add <code>google()</code> to <code>allprogects -&gt; repositories</code> section of the same file.</li>\n<li>Add <code>implementation 'com.google.firebase:firebase-core:16.0.3'</code> to <code>dependencies</code> section of your app module's <code>build.gradle</code> file; add <code>apply plugin: 'com.google.gms.google-services'</code> at the very bottom of the same file.</li>\n<li>Sync and rebuild. Now it should work.</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":2454358,"reputation":1453,"user_id":2139910,"display_name":"Anand saga"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1560503130,"creation_date":1560503130,"answer_id":56594874,"question_id":50608169,"body_markdown":"\r\n\r\nchanged latest firebase-messaging google dependencies and modified other dependencies also in a same version in app gradle file. working fine now\r\n\r\n[dependencies version detail you can refer here][1]\r\n\r\n    dependencies {\r\n        testImplementation &#39;junit:junit:4.12&#39;\r\n        androidTestImplementation &#39;androidx.test:runner:1.1.0-alpha4&#39;\r\n        androidTestImplementation &#39;androidx.test.espresso:espresso-core:3.1.0-alpha4&#39;\r\n        implementation &#39;com.google.firebase:firebase-auth:17.0.0&#39;\r\n        implementation &#39;com.google.firebase:firebase-messaging:18.0.0&#39;\r\n    }\r\n\r\n\r\n  [1]: https://developers.google.com/android/guides/releases","title":"Java.lang.NoClassDefFoundError: Failed resolution of: Lcom/google/firebase/FirebaseApp","body":"<p>changed latest firebase-messaging google dependencies and modified other dependencies also in a same version in app gradle file. working fine now</p>\n\n<p><a href=\"https://developers.google.com/android/guides/releases\" rel=\"nofollow noreferrer\">dependencies version detail you can refer here</a></p>\n\n<pre><code>dependencies {\n    testImplementation 'junit:junit:4.12'\n    androidTestImplementation 'androidx.test:runner:1.1.0-alpha4'\n    androidTestImplementation 'androidx.test.espresso:espresso-core:3.1.0-alpha4'\n    implementation 'com.google.firebase:firebase-auth:17.0.0'\n    implementation 'com.google.firebase:firebase-messaging:18.0.0'\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4845258,"reputation":21,"user_id":3914758,"display_name":"pritam_parker"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1563012925,"creation_date":1563012925,"answer_id":57018198,"question_id":50608169,"body_markdown":"In my case I forgot to comment Database Package in MainApplication.java\r\n\r\n```\r\n    @Override\r\n    protected List&lt;ReactPackage&gt; getPackages() {\r\n      return Arrays.&lt;ReactPackage&gt;asList(\r\n        new MainReactPackage(),\r\n            new AsyncStoragePackage(),\r\n            new RNCameraPackage(),\r\n            new VectorIconsPackage(),\r\n            new RNGestureHandlerPackage(),\r\n        new RNFirebasePackage(),\r\n        // add/remove these packages as appropriate\r\n        //new RNFirebaseAdMobPackage(),\r\n        new RNFirebaseAnalyticsPackage(),\r\n        //new RNFirebaseAuthPackage(),\r\n        // new RNFirebaseRemoteConfigPackage(),\r\n        new RNFirebaseCrashlyticsPackage(),\r\n        // new RNFirebaseDatabasePackage(), &lt;==== Comment this package\r\n       // new RNFirebaseFirestorePackage(),\r\n        // new RNFirebaseFunctionsPackage(),\r\n        new RNFirebaseInstanceIdPackage(),\r\n       // new RNFirebaseInvitesPackage(),\r\n        new RNFirebaseLinksPackage(),\r\n        new RNFirebaseMessagingPackage(),\r\n        new RNFirebaseNotificationsPackage(),\r\n        new RNFirebasePerformancePackage()\r\n       // new RNFirebaseStoragePackage()\r\n      );\r\n    }\r\n```","title":"Java.lang.NoClassDefFoundError: Failed resolution of: Lcom/google/firebase/FirebaseApp","body":"<p>In my case I forgot to comment Database Package in MainApplication.java</p>\n\n<pre><code>    @Override\n    protected List&lt;ReactPackage&gt; getPackages() {\n      return Arrays.&lt;ReactPackage&gt;asList(\n        new MainReactPackage(),\n            new AsyncStoragePackage(),\n            new RNCameraPackage(),\n            new VectorIconsPackage(),\n            new RNGestureHandlerPackage(),\n        new RNFirebasePackage(),\n        // add/remove these packages as appropriate\n        //new RNFirebaseAdMobPackage(),\n        new RNFirebaseAnalyticsPackage(),\n        //new RNFirebaseAuthPackage(),\n        // new RNFirebaseRemoteConfigPackage(),\n        new RNFirebaseCrashlyticsPackage(),\n        // new RNFirebaseDatabasePackage(), &lt;==== Comment this package\n       // new RNFirebaseFirestorePackage(),\n        // new RNFirebaseFunctionsPackage(),\n        new RNFirebaseInstanceIdPackage(),\n       // new RNFirebaseInvitesPackage(),\n        new RNFirebaseLinksPackage(),\n        new RNFirebaseMessagingPackage(),\n        new RNFirebaseNotificationsPackage(),\n        new RNFirebasePerformancePackage()\n       // new RNFirebaseStoragePackage()\n      );\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8370794,"reputation":318,"user_id":6285987,"display_name":"Dulaj Madusanka"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1566392082,"creation_date":1566392082,"answer_id":57592136,"question_id":50608169,"body_markdown":"I have faced the same issues. You have to change the react-native-firebase version in pakage.json file. I found the solution from here \r\n\r\n[here][1]\r\n\r\n\r\n  [1]: https://github.com/invertase/react-native-firebase/issues/2047","title":"Java.lang.NoClassDefFoundError: Failed resolution of: Lcom/google/firebase/FirebaseApp","body":"<p>I have faced the same issues. You have to change the react-native-firebase version in pakage.json file. I found the solution from here </p>\n\n<p><a href=\"https://github.com/invertase/react-native-firebase/issues/2047\" rel=\"nofollow noreferrer\">here</a></p>\n"},{"tags":[],"owner":{"account_id":201682,"reputation":15444,"user_id":448292,"accept_rate":82,"display_name":"Tiago Gouv&#234;a"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1574945556,"creation_date":1568561365,"answer_id":57945565,"question_id":50608169,"body_markdown":"On your `android/app/build.gradle` add one more implementation on dependeces:\r\n\r\n    ...\r\n    dependencies {\r\n        implementation &quot;com.google.firebase:firebase-auth:17.0.0&quot;\r\n        ...\r\n    }","title":"Java.lang.NoClassDefFoundError: Failed resolution of: Lcom/google/firebase/FirebaseApp","body":"<p>On your <code>android/app/build.gradle</code> add one more implementation on dependeces:</p>\n\n<pre><code>...\ndependencies {\n    implementation \"com.google.firebase:firebase-auth:17.0.0\"\n    ...\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15327634,"reputation":437,"user_id":11058294,"display_name":"Anubhav Mittal"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1572726387,"creation_date":1572726387,"answer_id":58675002,"question_id":50608169,"body_markdown":"There is probably some problem with the dependencies involved.\r\n\r\nIn my case, making the following changes worked perfectly in the app level `build.gradle`\r\n\r\n\r\n    dependencies{\r\n         implementation &#39;com.google.firebase:firebase-auth:17.0.0&#39;\r\n         implementation &#39;com.firebaseui:firebase-ui-database:6.0.2&#39;\r\n         ...\r\n    }","title":"Java.lang.NoClassDefFoundError: Failed resolution of: Lcom/google/firebase/FirebaseApp","body":"<p>There is probably some problem with the dependencies involved.</p>\n\n<p>In my case, making the following changes worked perfectly in the app level <code>build.gradle</code></p>\n\n<pre><code>dependencies{\n     implementation 'com.google.firebase:firebase-auth:17.0.0'\n     implementation 'com.firebaseui:firebase-ui-database:6.0.2'\n     ...\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15430164,"reputation":11,"user_id":12298909,"display_name":"Tobias Arantes"},"down_vote_count":4,"up_vote_count":1,"is_accepted":false,"score":-3,"last_activity_date":1575576820,"creation_date":1575572177,"answer_id":59201637,"question_id":50608169,"body_markdown":"In the gradle.properties file, try adding::\r\n\r\n    android.enableJetifier = true\r\n    android.useAndroidX = true","title":"Java.lang.NoClassDefFoundError: Failed resolution of: Lcom/google/firebase/FirebaseApp","body":"<p>In the gradle.properties file, try adding::</p>\n\n<pre><code>android.enableJetifier = true\nandroid.useAndroidX = true\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13707795,"reputation":1180,"user_id":9890917,"display_name":"Sumit Singh"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1597129770,"creation_date":1587030191,"answer_id":61247203,"question_id":50608169,"body_markdown":"If your are facing this issue in Flutter, Add this dependency in your android/app/build.gradle. And run your main.dart. No need to add any type of controller in ListView. If you are using listview on that page. If you are using Firebase please add this in depencdencies.\r\n\r\n`implementation &quot;com.google.firebase:firebase-auth:19.3.0&quot;`\r\n\r\n","title":"Java.lang.NoClassDefFoundError: Failed resolution of: Lcom/google/firebase/FirebaseApp","body":"<p>If your are facing this issue in Flutter, Add this dependency in your android/app/build.gradle. And run your main.dart. No need to add any type of controller in ListView. If you are using listview on that page. If you are using Firebase please add this in depencdencies.</p>\n<p><code>implementation &quot;com.google.firebase:firebase-auth:19.3.0&quot;</code></p>\n"},{"tags":[],"owner":{"account_id":14537432,"reputation":874,"user_id":10500330,"display_name":"Anurag Bhalekar"},"down_vote_count":3,"up_vote_count":2,"is_accepted":false,"score":-1,"last_activity_date":1591037555,"creation_date":1591037555,"answer_id":62138976,"question_id":50608169,"body_markdown":"UPDATE YOUR FIREBASE LIBRARIES!!!!\r\n\r\nEg. if your app uses firebase auth, Google for it, in its documentation they provide with the latest version, paste it to your build.gradle\r\n\r\nThe libraries added by your Firebase Assistant in Android Studio are usually old.","title":"Java.lang.NoClassDefFoundError: Failed resolution of: Lcom/google/firebase/FirebaseApp","body":"<p>UPDATE YOUR FIREBASE LIBRARIES!!!!</p>\n\n<p>Eg. if your app uses firebase auth, Google for it, in its documentation they provide with the latest version, paste it to your build.gradle</p>\n\n<p>The libraries added by your Firebase Assistant in Android Studio are usually old.</p>\n"},{"tags":[],"owner":{"account_id":17022909,"reputation":27,"user_id":12314962,"display_name":"Dashrath Prajapati"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637651074,"creation_date":1637647562,"answer_id":70076114,"question_id":50608169,"body_markdown":"\r\n\r\n    implementation(&quot;com.google.firebase:firebase-iid&quot;)\r\n\r\n","title":"Java.lang.NoClassDefFoundError: Failed resolution of: Lcom/google/firebase/FirebaseApp","body":"<pre><code>implementation(&quot;com.google.firebase:firebase-iid&quot;)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9564031,"reputation":12915,"user_id":7103882,"display_name":"Codemaker2015"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637686774,"creation_date":1637686774,"answer_id":70084844,"question_id":50608169,"body_markdown":"**Solution 1:** \r\n\r\nAdd one more implementation on dependeces in your `android/app/build.gradle` file.\r\n\r\n    dependencies {\r\n        implementation &quot;com.google.firebase:firebase-auth:17.0.0&quot;\r\n        ...\r\n    }\r\n\r\n**Solution 2:**\r\n\r\n- Generate `google-services.json` and put it to your `android/app/` directory.\r\n\r\n- Add `classpath &#39;com.google.gms:google-services:4.1.0&#39;` to buildscript -&gt; dependencies section of your root-level build.gradle config and add `google()` as first entry to allprogects -&gt; repositories section of the same file.\r\n\r\n        buildscript {\r\n            repositories {\r\n                google()\r\n                jcenter()\r\n            }\r\n            dependencies {\r\n                ...\r\n                classpath &#39;com.google.gms:google-services:4.1.0&#39;\r\n            }\r\n        }\r\n        allprojects {\r\n            repositories {\r\n                google()\r\n                ...\r\n            }\r\n        }\r\n\r\n- Add `implementation &#39;com.google.firebase:firebase-core:16.0.3&#39;` to dependencies section of your app module&#39;s `build.gradle` file and add `apply plugin: &#39;com.google.gms.google-services&#39;` at the very bottom of the same file.\r\n\r\n      dependencies {\r\n          ...\r\n          implementation &#39;com.google.firebase:firebase-core:16.0.3&#39;\r\n      } \r\n      apply plugin: &#39;com.google.gms.google-services&#39;\r\n\r\n- Sync and rebuild.","title":"Java.lang.NoClassDefFoundError: Failed resolution of: Lcom/google/firebase/FirebaseApp","body":"<p><strong>Solution 1:</strong></p>\n<p>Add one more implementation on dependeces in your <code>android/app/build.gradle</code> file.</p>\n<pre><code>dependencies {\n    implementation &quot;com.google.firebase:firebase-auth:17.0.0&quot;\n    ...\n}\n</code></pre>\n<p><strong>Solution 2:</strong></p>\n<ul>\n<li><p>Generate <code>google-services.json</code> and put it to your <code>android/app/</code> directory.</p>\n</li>\n<li><p>Add <code>classpath 'com.google.gms:google-services:4.1.0'</code> to buildscript -&gt; dependencies section of your root-level build.gradle config and add <code>google()</code> as first entry to allprogects -&gt; repositories section of the same file.</p>\n<pre><code>  buildscript {\n      repositories {\n          google()\n          jcenter()\n      }\n      dependencies {\n          ...\n          classpath 'com.google.gms:google-services:4.1.0'\n      }\n  }\n  allprojects {\n      repositories {\n          google()\n          ...\n      }\n  }\n</code></pre>\n</li>\n<li><p>Add <code>implementation 'com.google.firebase:firebase-core:16.0.3'</code> to dependencies section of your app module's <code>build.gradle</code> file and add <code>apply plugin: 'com.google.gms.google-services'</code> at the very bottom of the same file.</p>\n<pre><code>dependencies {\n    ...\n    implementation 'com.google.firebase:firebase-core:16.0.3'\n} \napply plugin: 'com.google.gms.google-services'\n</code></pre>\n</li>\n<li><p>Sync and rebuild.</p>\n</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":13733259,"reputation":1173,"user_id":9910265,"display_name":"Mohamed Ben Romdhane"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676328932,"creation_date":1676328932,"answer_id":75441948,"question_id":50608169,"body_markdown":"The only solution that worked for me is to upgrade all firebase dependencies and don&#39;t forget this one below cause Android Studio may not notify you about it.\r\n\r\n````\r\nimplementation platform(&#39;com.google.firebase:firebase-bom:31.2.0&#39;)`\r\n````\r\n","title":"Java.lang.NoClassDefFoundError: Failed resolution of: Lcom/google/firebase/FirebaseApp","body":"<p>The only solution that worked for me is to upgrade all firebase dependencies and don't forget this one below cause Android Studio may not notify you about it.</p>\n<pre><code>implementation platform('com.google.firebase:firebase-bom:31.2.0')`\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23626485,"reputation":619,"user_id":17658933,"display_name":"insider"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1695753597,"creation_date":1695369828,"answer_id":77155830,"question_id":50608169,"body_markdown":"what worked for me (as for today ***22.09.2023***) was just to remove the .android/ package completely from my project and then run\r\n\r\n```npx expo prebuild```\r\n\r\nin the root folder and it created a new android folder with a few changes (could see there are some because of GitHub addon in my VSCode), then when I ran the folder in my Android Studio it ran completely fine without any errors whatsoever.","title":"Java.lang.NoClassDefFoundError: Failed resolution of: Lcom/google/firebase/FirebaseApp","body":"<p>what worked for me (as for today <em><strong>22.09.2023</strong></em>) was just to remove the .android/ package completely from my project and then run</p>\n<p><code>npx expo prebuild</code></p>\n<p>in the root folder and it created a new android folder with a few changes (could see there are some because of GitHub addon in my VSCode), then when I ran the folder in my Android Studio it ran completely fine without any errors whatsoever.</p>\n"}],"owner":{"account_id":9511012,"reputation":285,"user_id":7068952,"display_name":"Alex Khanenya"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":69556,"favorite_count":0,"down_vote_count":1,"up_vote_count":24,"answer_count":13,"score":23,"last_activity_date":1695753597,"creation_date":1527693183,"question_id":50608169,"body_markdown":"[![Screenshot from Android Studio][1]][1]\r\n\r\n\r\n[![Google Play Services][2]][2]\r\n\r\nThis is React Native project. I have an error after successful build in Android Studio Emulator: \r\n\r\n&gt; java.lang.NoClassDefFoundError: Failed resolution of:\r\n&gt; Lcom/google/firebase/FirebaseApp\r\n\r\nMy files:\r\n\r\n**package.json:**\r\n\r\n    ...\r\n    &quot;react-native&quot;: &quot;^0.55.3&quot;,\r\n    &quot;react-native-camera&quot;: &quot;1.1.2&quot;,\r\n    &quot;react-native-check-box&quot;: &quot;^2.1.0&quot;,\r\n    &quot;react-native-extended-stylesheet&quot;: &quot;^0.8.1&quot;,\r\n    &quot;react-native-firebase&quot;: &quot;^4.2.0&quot;,\r\n    &quot;react-native-geocoder&quot;: &quot;^0.5.0&quot;,\r\n    &quot;react-native-git-upgrade&quot;: &quot;^0.2.7&quot;,\r\n    &quot;react-native-htmlview&quot;: &quot;^0.12.1&quot;,\r\n    &quot;react-native-image-picker&quot;: &quot;^0.26.10&quot;,\r\n    &quot;react-native-linear-gradient&quot;: &quot;^2.4.0&quot;,\r\n    &quot;react-native-local-storage&quot;: &quot;^1.5.2&quot;,\r\n    &quot;react-native-maps&quot;: &quot;^0.21.0&quot;,\r\n    &quot;react-native-modal&quot;: &quot;^5.4.0&quot;,\r\n    &quot;react-native-modal-dropdown&quot;: &quot;^0.6.1&quot;,\r\n    &quot;react-native-read-more-text&quot;: &quot;^1.0.0&quot;,\r\n    &quot;react-native-router-flux&quot;: &quot;^4.0.0-beta.27&quot;,\r\n    &quot;react-native-svg-image&quot;: &quot;^2.0.1&quot;,\r\n    &quot;react-native-text-input-mask&quot;: &quot;^0.7.0&quot;,\r\n    ...\r\n\r\n**android/app/build.gradle:**\r\n\r\n    ...    \r\n    android {\r\n        compileSdkVersion 27\r\n        buildToolsVersion &quot;27.0.1&quot;\r\n    \r\n        defaultConfig {\r\n            applicationId &quot;com.something.anything&quot;\r\n            minSdkVersion 16\r\n            targetSdkVersion 22\r\n            versionCode 1\r\n            versionName &quot;1.0&quot;\r\n            ndk {\r\n                abiFilters &quot;armeabi-v7a&quot;, &quot;x86&quot;\r\n            }\r\n    \t\tmultiDexEnabled true\r\n        }\r\n    \tsigningConfigs {\r\n            release {\r\n                if (project.hasProperty(&#39;MYAPP_RELEASE_STORE_FILE&#39;)) {\r\n                    storeFile file(MYAPP_RELEASE_STORE_FILE)\r\n                    storePassword MYAPP_RELEASE_STORE_PASSWORD\r\n                    keyAlias MYAPP_RELEASE_KEY_ALIAS\r\n                    keyPassword MYAPP_RELEASE_KEY_PASSWORD\r\n                }\r\n            }\r\n        }\r\n        splits {\r\n            abi {\r\n                reset()\r\n                enable enableSeparateBuildPerCPUArchitecture\r\n                universalApk false  // If true, also generate a universal APK\r\n                include &quot;armeabi-v7a&quot;, &quot;x86&quot;\r\n            }\r\n        }\r\n        buildTypes {\r\n    \t\trelease {\r\n    \t\t\tsigningConfig signingConfigs.release\r\n                minifyEnabled enableProguardInReleaseBuilds\r\n                proguardFiles getDefaultProguardFile(&quot;proguard-android.txt&quot;), &quot;proguard-rules.pro&quot;\r\n            }\r\n        }\r\n        // applicationVariants are e.g. debug, release\r\n        applicationVariants.all { variant -&gt;\r\n            variant.outputs.each { output -&gt;\r\n                // For each separate APK per architecture, set a unique version code as described here:\r\n                // http://tools.android.com/tech-docs/new-build-system/user-guide/apk-splits\r\n                def versionCodes = [&quot;armeabi-v7a&quot;:1, &quot;x86&quot;:2]\r\n                def abi = output.getFilter(OutputFile.ABI)\r\n                if (abi != null) {  // null for the universal-debug, universal-release variants\r\n                    output.versionCodeOverride =\r\n                            versionCodes.get(abi) * 1048576 + defaultConfig.versionCode\r\n                }\r\n            }\r\n        }\r\n    }\r\n    \r\n    dependencies {\r\n    \tcompile(project(&#39;:react-native-firebase&#39;)) {\r\n    \t\ttransitive = false\r\n    \t}\r\n        compile project(&#39;:react-native-geocoder&#39;)\r\n    \tcompile(project(&#39;:react-native-maps&#39;)) {\r\n    \t  exclude group: &#39;com.google.android.gms&#39;, module: &#39;play-services-base&#39;\r\n    \t  exclude group: &#39;com.google.android.gms&#39;, module: &#39;play-services-maps&#39;\r\n    \t  exclude group: &#39;com.google.android.gms&#39;, module: &#39;play-services-location&#39;\r\n    \t}\r\n    \r\n    \tcompile &#39;com.google.android.gms:play-services-base:15.+&#39;\r\n        compile &#39;com.google.android.gms:play-services-maps:15.+&#39;\r\n        compile &#39;com.google.android.gms:play-services-location:15.+&#39;\r\n        compile (project(&#39;:react-native-camera&#39;)) {\r\n        exclude group: &quot;com.google.android.gms&quot;\r\n        compile &#39;com.android.support:exifinterface:25.+&#39;\r\n        compile (&#39;com.google.android.gms:play-services-vision:12.0.1&#39;) {\r\n            force = true\r\n            }\r\n        }\r\n        compile project(&#39;:react-native-text-input-mask&#39;)\r\n        compile project(&#39;:react-native-linear-gradient&#39;)\r\n        compile project(&#39;:react-native-image-picker&#39;)\r\n        compile fileTree(dir: &quot;libs&quot;, include: [&quot;*.jar&quot;])\r\n        compile &quot;com.android.support:appcompat-v7:23.0.1&quot;\r\n        compile &quot;com.facebook.react:react-native:+&quot;  // From node_modules\r\n    }\r\n    \r\n    allprojects {\r\n        repositories {\r\n            maven { url &quot;https://jitpack.io&quot; }\r\n            maven { url &quot;https://maven.google.com&quot; }\r\n        }\r\n    }\r\n    \r\n    // Run this once to be able to run the application with BUCK\r\n    // puts all compile dependencies into folder libs for BUCK to use\r\n    task copyDownloadableDepsToLibs(type: Copy) {\r\n        from configurations.compile\r\n        into &#39;libs&#39;\r\n    }\r\n\r\n**android/build.gradle**\r\n\r\n    // Top-level build file where you can add configuration options common to all sub-projects/modules.\r\n    \r\n    buildscript {\r\n        repositories {\r\n            jcenter()\r\n            google()\r\n        }\r\n        dependencies {\r\n            classpath &#39;com.android.tools.build:gradle:3.1.0&#39;\r\n    \r\n            // NOTE: Do not place your application dependencies here; they belong\r\n            // in the individual module build.gradle files\r\n        }\r\n    }\r\n    \r\n    allprojects {\r\n        repositories {\r\n            mavenLocal()\r\n            jcenter()\r\n            maven {\r\n                // All of React Native (JS, Obj-C sources, Android binaries) is installed from npm\r\n                url &quot;$rootDir/../node_modules/react-native/android&quot;\r\n            }\r\n        }\r\n    }\r\n    \r\n    subprojects {\r\n      project.configurations.all {\r\n         resolutionStrategy.eachDependency { details -&gt;\r\n            if (details.requested.group == &#39;com.android.support&#39;\r\n                  &amp;&amp; !details.requested.name.contains(&#39;multidex&#39;)\r\n            ) {\r\n               details.useVersion &quot;27.1.0&quot;\r\n            }\r\n         }\r\n      }\r\n    }\r\n\r\nI&#39;ve tried a lot of solutions but nothing helped.\r\n\r\n  [1]: https://i.stack.imgur.com/ucVs2.png\r\n  [2]: https://i.stack.imgur.com/FLjg0.png","title":"Java.lang.NoClassDefFoundError: Failed resolution of: Lcom/google/firebase/FirebaseApp","body":"<p><a href=\"https://i.stack.imgur.com/ucVs2.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/ucVs2.png\" alt=\"Screenshot from Android Studio\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/FLjg0.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/FLjg0.png\" alt=\"Google Play Services\"></a></p>\n\n<p>This is React Native project. I have an error after successful build in Android Studio Emulator: </p>\n\n<blockquote>\n  <p>java.lang.NoClassDefFoundError: Failed resolution of:\n  Lcom/google/firebase/FirebaseApp</p>\n</blockquote>\n\n<p>My files:</p>\n\n<p><strong>package.json:</strong></p>\n\n<pre><code>...\n\"react-native\": \"^0.55.3\",\n\"react-native-camera\": \"1.1.2\",\n\"react-native-check-box\": \"^2.1.0\",\n\"react-native-extended-stylesheet\": \"^0.8.1\",\n\"react-native-firebase\": \"^4.2.0\",\n\"react-native-geocoder\": \"^0.5.0\",\n\"react-native-git-upgrade\": \"^0.2.7\",\n\"react-native-htmlview\": \"^0.12.1\",\n\"react-native-image-picker\": \"^0.26.10\",\n\"react-native-linear-gradient\": \"^2.4.0\",\n\"react-native-local-storage\": \"^1.5.2\",\n\"react-native-maps\": \"^0.21.0\",\n\"react-native-modal\": \"^5.4.0\",\n\"react-native-modal-dropdown\": \"^0.6.1\",\n\"react-native-read-more-text\": \"^1.0.0\",\n\"react-native-router-flux\": \"^4.0.0-beta.27\",\n\"react-native-svg-image\": \"^2.0.1\",\n\"react-native-text-input-mask\": \"^0.7.0\",\n...\n</code></pre>\n\n<p><strong>android/app/build.gradle:</strong></p>\n\n<pre><code>...    \nandroid {\n    compileSdkVersion 27\n    buildToolsVersion \"27.0.1\"\n\n    defaultConfig {\n        applicationId \"com.something.anything\"\n        minSdkVersion 16\n        targetSdkVersion 22\n        versionCode 1\n        versionName \"1.0\"\n        ndk {\n            abiFilters \"armeabi-v7a\", \"x86\"\n        }\n        multiDexEnabled true\n    }\n    signingConfigs {\n        release {\n            if (project.hasProperty('MYAPP_RELEASE_STORE_FILE')) {\n                storeFile file(MYAPP_RELEASE_STORE_FILE)\n                storePassword MYAPP_RELEASE_STORE_PASSWORD\n                keyAlias MYAPP_RELEASE_KEY_ALIAS\n                keyPassword MYAPP_RELEASE_KEY_PASSWORD\n            }\n        }\n    }\n    splits {\n        abi {\n            reset()\n            enable enableSeparateBuildPerCPUArchitecture\n            universalApk false  // If true, also generate a universal APK\n            include \"armeabi-v7a\", \"x86\"\n        }\n    }\n    buildTypes {\n        release {\n            signingConfig signingConfigs.release\n            minifyEnabled enableProguardInReleaseBuilds\n            proguardFiles getDefaultProguardFile(\"proguard-android.txt\"), \"proguard-rules.pro\"\n        }\n    }\n    // applicationVariants are e.g. debug, release\n    applicationVariants.all { variant -&gt;\n        variant.outputs.each { output -&gt;\n            // For each separate APK per architecture, set a unique version code as described here:\n            // http://tools.android.com/tech-docs/new-build-system/user-guide/apk-splits\n            def versionCodes = [\"armeabi-v7a\":1, \"x86\":2]\n            def abi = output.getFilter(OutputFile.ABI)\n            if (abi != null) {  // null for the universal-debug, universal-release variants\n                output.versionCodeOverride =\n                        versionCodes.get(abi) * 1048576 + defaultConfig.versionCode\n            }\n        }\n    }\n}\n\ndependencies {\n    compile(project(':react-native-firebase')) {\n        transitive = false\n    }\n    compile project(':react-native-geocoder')\n    compile(project(':react-native-maps')) {\n      exclude group: 'com.google.android.gms', module: 'play-services-base'\n      exclude group: 'com.google.android.gms', module: 'play-services-maps'\n      exclude group: 'com.google.android.gms', module: 'play-services-location'\n    }\n\n    compile 'com.google.android.gms:play-services-base:15.+'\n    compile 'com.google.android.gms:play-services-maps:15.+'\n    compile 'com.google.android.gms:play-services-location:15.+'\n    compile (project(':react-native-camera')) {\n    exclude group: \"com.google.android.gms\"\n    compile 'com.android.support:exifinterface:25.+'\n    compile ('com.google.android.gms:play-services-vision:12.0.1') {\n        force = true\n        }\n    }\n    compile project(':react-native-text-input-mask')\n    compile project(':react-native-linear-gradient')\n    compile project(':react-native-image-picker')\n    compile fileTree(dir: \"libs\", include: [\"*.jar\"])\n    compile \"com.android.support:appcompat-v7:23.0.1\"\n    compile \"com.facebook.react:react-native:+\"  // From node_modules\n}\n\nallprojects {\n    repositories {\n        maven { url \"https://jitpack.io\" }\n        maven { url \"https://maven.google.com\" }\n    }\n}\n\n// Run this once to be able to run the application with BUCK\n// puts all compile dependencies into folder libs for BUCK to use\ntask copyDownloadableDepsToLibs(type: Copy) {\n    from configurations.compile\n    into 'libs'\n}\n</code></pre>\n\n<p><strong>android/build.gradle</strong></p>\n\n<pre><code>// Top-level build file where you can add configuration options common to all sub-projects/modules.\n\nbuildscript {\n    repositories {\n        jcenter()\n        google()\n    }\n    dependencies {\n        classpath 'com.android.tools.build:gradle:3.1.0'\n\n        // NOTE: Do not place your application dependencies here; they belong\n        // in the individual module build.gradle files\n    }\n}\n\nallprojects {\n    repositories {\n        mavenLocal()\n        jcenter()\n        maven {\n            // All of React Native (JS, Obj-C sources, Android binaries) is installed from npm\n            url \"$rootDir/../node_modules/react-native/android\"\n        }\n    }\n}\n\nsubprojects {\n  project.configurations.all {\n     resolutionStrategy.eachDependency { details -&gt;\n        if (details.requested.group == 'com.android.support'\n              &amp;&amp; !details.requested.name.contains('multidex')\n        ) {\n           details.useVersion \"27.1.0\"\n        }\n     }\n  }\n}\n</code></pre>\n\n<p>I've tried a lot of solutions but nothing helped.</p>\n"},{"tags":["java","sorting","reverse","comparator"],"answers":[{"tags":[],"owner":{"account_id":13352803,"reputation":181,"user_id":9637498,"display_name":"N.A"},"down_vote_count":2,"up_vote_count":3,"is_accepted":false,"score":1,"last_activity_date":1695708110,"creation_date":1695708110,"answer_id":77177351,"question_id":77177310,"body_markdown":"Just figured it out.. Moving the `reversed()` inside the comparison ended up working, like so: \r\n\r\n```\r\ncars.stream().sorted(Comparator.comparingInt((Car car) -&gt; car.getCarMetadata().getCarType().getPriority())\r\n     .thenComparing((Car car -&gt; car.getCarMetadata().getPrice(), Comparator.nullsLast(Double::compareTo)).reversed()\r\n     .thenComparing((Car car) -&gt; car.getAge).reversed()).collect(Collectors.toList());\r\n\r\n```\r\n\r\nI&#39;m not sure I totally understand why this fixed it though.","title":"Using Comparator.nullsFirst not working with reverse()","body":"<p>Just figured it out.. Moving the <code>reversed()</code> inside the comparison ended up working, like so:</p>\n<pre><code>cars.stream().sorted(Comparator.comparingInt((Car car) -&gt; car.getCarMetadata().getCarType().getPriority())\n     .thenComparing((Car car -&gt; car.getCarMetadata().getPrice(), Comparator.nullsLast(Double::compareTo)).reversed()\n     .thenComparing((Car car) -&gt; car.getAge).reversed()).collect(Collectors.toList());\n\n</code></pre>\n<p>I'm not sure I totally understand why this fixed it though.</p>\n"}],"owner":{"account_id":13352803,"reputation":181,"user_id":9637498,"display_name":"N.A"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":52,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1695753358,"creation_date":1695707570,"question_id":77177310,"body_markdown":"I am trying to sort Car by three values: first by type, then within the &quot;type&quot; bucket I want to sort those by price (lowest to highest), then if there are any that have the same price, I want to sort by age (newest to oldest).\r\n\r\nHowever, some Cars have a null price. In these cases, I want all the null values to be at the end of the list.\r\n\r\nI am trying to use `Comparator.nullsFirst` and `Comparator.nullsLast`, but neither of these are doing anything. I end up getting all the nulls first (regardless of which one I use), then the items sorted on price. I am wondering if it is because I have `.reverse()` which is negating the nullsFirst/Last? \r\n\r\nHere is what I am trying:\r\n\r\n```\r\ncars.stream().sorted(Comparator.comparingInt((Car car) -&gt; car.getCarMetadata().getCarType().getPriority())\r\n     .thenComparing((Car car -&gt; car.getCarMetadata().getPrice(), Comparator.nullsLast(Double::compareTo)).reversed()\r\n     .thenComparing((Car car) -&gt; car.getAge).reversed()).collect(Collectors.toList());\r\n\r\n```\r\n\r\nAny ideas on this?","title":"Using Comparator.nullsFirst not working with reverse()","body":"<p>I am trying to sort Car by three values: first by type, then within the &quot;type&quot; bucket I want to sort those by price (lowest to highest), then if there are any that have the same price, I want to sort by age (newest to oldest).</p>\n<p>However, some Cars have a null price. In these cases, I want all the null values to be at the end of the list.</p>\n<p>I am trying to use <code>Comparator.nullsFirst</code> and <code>Comparator.nullsLast</code>, but neither of these are doing anything. I end up getting all the nulls first (regardless of which one I use), then the items sorted on price. I am wondering if it is because I have <code>.reverse()</code> which is negating the nullsFirst/Last?</p>\n<p>Here is what I am trying:</p>\n<pre><code>cars.stream().sorted(Comparator.comparingInt((Car car) -&gt; car.getCarMetadata().getCarType().getPriority())\n     .thenComparing((Car car -&gt; car.getCarMetadata().getPrice(), Comparator.nullsLast(Double::compareTo)).reversed()\n     .thenComparing((Car car) -&gt; car.getAge).reversed()).collect(Collectors.toList());\n\n</code></pre>\n<p>Any ideas on this?</p>\n"},{"tags":["java","eclipse","tomcat7"],"comments":[{"owner":{"account_id":908201,"reputation":6185,"user_id":942671,"accept_rate":83,"display_name":"Rinke"},"score":2,"creation_date":1447422004,"post_id":31029810,"comment_id":55159416,"body_markdown":"It may help to provide a little more context. How are you trying to launch Tomcat? How did you configure Eclipse? How did you install Tomcat?","body":"It may help to provide a little more context. How are you trying to launch Tomcat? How did you configure Eclipse? How did you install Tomcat?"},{"owner":{"account_id":153779,"reputation":1985,"user_id":369280,"accept_rate":79,"display_name":"nkukhar"},"score":1,"creation_date":1447433048,"post_id":31029810,"comment_id":55167071,"body_markdown":"This answer might be helpful http://stackoverflow.com/questions/1392383/server-tomcat-v6-0-server-at-localhost-failed-to-start","body":"This answer might be helpful <a href=\"http://stackoverflow.com/questions/1392383/server-tomcat-v6-0-server-at-localhost-failed-to-start\" title=\"server tomcat v6 0 server at localhost failed to start\">stackoverflow.com/questions/1392383/&hellip;</a>"},{"owner":{"account_id":6840936,"reputation":619,"user_id":5261352,"display_name":"Ashish Bhosle"},"score":2,"creation_date":1447937178,"post_id":31029810,"comment_id":55374006,"body_markdown":"Please provide some additional information like your app code, how did you added tomcat in eclipse IDE etc.","body":"Please provide some additional information like your app code, how did you added tomcat in eclipse IDE etc."}],"answers":[{"tags":[],"owner":{"account_id":4717015,"reputation":751,"user_id":3815921,"display_name":"Facepalmed"},"down_vote_count":1,"up_vote_count":9,"is_accepted":false,"score":8,"last_activity_date":1448021108,"creation_date":1447870324,"answer_id":33787290,"question_id":31029810,"body_markdown":"First of all you should try to run TOMCAT using it&#39;s own .bat and not Eclipse. If it doesn&#39;t run problems would be on your tomcat installation and not in Eclipse and you could take a look to the files of TOMCAT_HOME/logs/  where Tomcat&#39;s errors are traced (they are so helpful).\r\n\r\nAnyway, if it runs properly out of eclipse, try to delete the eclipse&#39;s tomcat configuration and set it from the beginning following these simple steps\r\n \r\n - Go to Eclipse&#39;s **Window &gt; Preferences &gt; Server &gt; Runtime Environment** and\r\n   add a Tomcat Server browsing your TOMCAT_HOME and selecting the\r\n   suitable JRE (use JAVA_HOME that contains jre yet) paying attention\r\n   to messages requiring a certain JDK depending on the TOMCAT version\r\n   (TOMCAT_8 requires at least JDK_1.7 version and, if not set, usually\r\n   shows errors explaining it when starting)\r\n - Go to Eclipse&#39;s **Window &gt; Show View &gt; Other... &gt; Server &gt; Servers** and add a new \r\n   server; in this case the version of TOMCAT you set before. You don&#39;t \r\n   need to add further configuration to make TOMCAT to start.\r\n - At this point if would be helpful if you hadn&#39;t any app at\r\n   TOMCAT_HOME&#39;s webapps folder but those that came default (you must\r\n   empty TOMCAT_HOME/work folder to remove cached stuff). Once you have\r\n   ensured it, start from ECLIPSE and cross fingers. In case of fail, take a look to Eclipse&#39;s console and look for the exception to copy at this post","title":"Could not find or load main class org.apache.catalina.startup.Bootstrap","body":"<p>First of all you should try to run TOMCAT using it's own .bat and not Eclipse. If it doesn't run problems would be on your tomcat installation and not in Eclipse and you could take a look to the files of TOMCAT_HOME/logs/  where Tomcat's errors are traced (they are so helpful).</p>\n\n<p>Anyway, if it runs properly out of eclipse, try to delete the eclipse's tomcat configuration and set it from the beginning following these simple steps</p>\n\n<ul>\n<li>Go to Eclipse's <strong>Window > Preferences > Server > Runtime Environment</strong> and\nadd a Tomcat Server browsing your TOMCAT_HOME and selecting the\nsuitable JRE (use JAVA_HOME that contains jre yet) paying attention\nto messages requiring a certain JDK depending on the TOMCAT version\n(TOMCAT_8 requires at least JDK_1.7 version and, if not set, usually\nshows errors explaining it when starting)</li>\n<li>Go to Eclipse's <strong>Window > Show View > Other... > Server > Servers</strong> and add a new \nserver; in this case the version of TOMCAT you set before. You don't \nneed to add further configuration to make TOMCAT to start.</li>\n<li>At this point if would be helpful if you hadn't any app at\nTOMCAT_HOME's webapps folder but those that came default (you must\nempty TOMCAT_HOME/work folder to remove cached stuff). Once you have\nensured it, start from ECLIPSE and cross fingers. In case of fail, take a look to Eclipse's console and look for the exception to copy at this post</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":1602913,"reputation":1,"user_id":1483627,"display_name":"Shekhar Kadam"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1524210198,"creation_date":1524210198,"answer_id":49936566,"question_id":31029810,"body_markdown":"Que 1. Is your tomcat started interdependently(outside eclipse)??\r\n\r\nAns. if ans is no - then - I think you have downloaded tomcat source instead binary... you should download binary and install tomcat then it will run.\r\n\r\n1.download binary (https://tomcat.apache.org/)\r\n2.unzip it\r\n\r\n3.copy unzipped apache folder \r\n\r\n4.place this to your program files\r\n\r\n5. set JAVA_HOME to C:\\Program Files\\Java\\jdk_Your_version_num\r\n\r\n6. Run C:\\Program Files\\apache-tomcat-Your_version_num\\bin\\startup.bat ....\r\nhope your tomcat will start\r\n\r\n1.download binary Link -. https://tomcat.apache.org/\r\n\r\n1.1. choose version of your choice and click &quot;download&quot;\r\n\r\n1.2. On next page under heading &quot;Binary Distributions&quot;- download zip and proceed to next steps.\r\nAll the best.","title":"Could not find or load main class org.apache.catalina.startup.Bootstrap","body":"<p>Que 1. Is your tomcat started interdependently(outside eclipse)??</p>\n\n<p>Ans. if ans is no - then - I think you have downloaded tomcat source instead binary... you should download binary and install tomcat then it will run.</p>\n\n<p>1.download binary (<a href=\"https://tomcat.apache.org/\" rel=\"nofollow noreferrer\">https://tomcat.apache.org/</a>)\n2.unzip it</p>\n\n<p>3.copy unzipped apache folder </p>\n\n<p>4.place this to your program files</p>\n\n<ol start=\"5\">\n<li><p>set JAVA_HOME to C:\\Program Files\\Java\\jdk_Your_version_num</p></li>\n<li><p>Run C:\\Program Files\\apache-tomcat-Your_version_num\\bin\\startup.bat ....\nhope your tomcat will start</p></li>\n</ol>\n\n<p>1.download binary Link -. <a href=\"https://tomcat.apache.org/\" rel=\"nofollow noreferrer\">https://tomcat.apache.org/</a></p>\n\n<p>1.1. choose version of your choice and click \"download\"</p>\n\n<p>1.2. On next page under heading \"Binary Distributions\"- download zip and proceed to next steps.\nAll the best.</p>\n"},{"tags":[],"owner":{"account_id":15395454,"reputation":1,"user_id":11106740,"display_name":"Rahul Kanchi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1550945283,"creation_date":1550945283,"answer_id":54844536,"question_id":31029810,"body_markdown":"If tomcat is working perfectly fine independently,\r\n\r\n - then change the permissions of the directory and subdirectories of tomcat\r\n\r\nEclipse is not able to read a certain file from the directory which is the reason for the error. \r\nNothing worked for me, but changing the permission helped me.","title":"Could not find or load main class org.apache.catalina.startup.Bootstrap","body":"<p>If tomcat is working perfectly fine independently,</p>\n\n<ul>\n<li>then change the permissions of the directory and subdirectories of tomcat</li>\n</ul>\n\n<p>Eclipse is not able to read a certain file from the directory which is the reason for the error. \nNothing worked for me, but changing the permission helped me.</p>\n"},{"tags":[],"owner":{"account_id":3062523,"reputation":597,"user_id":2594893,"display_name":"harsh"},"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1624545408,"creation_date":1624545408,"answer_id":68117853,"question_id":31029810,"body_markdown":"**It seems the server does not have access to two Jar files.**\r\n\r\n- Go to Servers Tab  &gt; Double Click on your Server &gt; Open Launch Configuration &gt; Classpath(tab) &gt; Click on User Entries &gt; Add External Jars  &gt; Add Boorstrap.jar and tomcat-juli.jar &gt; Apply &gt; Ok\r\n\r\nStart the server now. ","title":"Could not find or load main class org.apache.catalina.startup.Bootstrap","body":"<p><strong>It seems the server does not have access to two Jar files.</strong></p>\n<ul>\n<li>Go to Servers Tab  &gt; Double Click on your Server &gt; Open Launch Configuration &gt; Classpath(tab) &gt; Click on User Entries &gt; Add External Jars  &gt; Add Boorstrap.jar and tomcat-juli.jar &gt; Apply &gt; Ok</li>\n</ul>\n<p>Start the server now.</p>\n"},{"tags":[],"owner":{"account_id":14005411,"reputation":71,"user_id":10797105,"display_name":"Syed Saad Ullah Shah"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1638342077,"creation_date":1637923326,"answer_id":70123138,"question_id":31029810,"body_markdown":"Simply changing the perspective from java to java EE on the top right corner did the trick for me. If you cannot find java EE their simply click on the other perspective icon and add java EE from there.\r\n\r\nIf this doesn&#39;t work try using different versions of jdk in your project, i changed my jdk from 11 to 1.8 and the project started running.","title":"Could not find or load main class org.apache.catalina.startup.Bootstrap","body":"<p>Simply changing the perspective from java to java EE on the top right corner did the trick for me. If you cannot find java EE their simply click on the other perspective icon and add java EE from there.</p>\n<p>If this doesn't work try using different versions of jdk in your project, i changed my jdk from 11 to 1.8 and the project started running.</p>\n"},{"tags":[],"owner":{"account_id":10989495,"reputation":61,"user_id":8074003,"display_name":"Hector Pasarin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662555392,"creation_date":1662555392,"answer_id":73635931,"question_id":31029810,"body_markdown":"  If Tomcat works fine independently, close Eclipse and then right click Eclipse and choose &#39;Run as an administrator&#39;.\r\n\r\n  That worked for me in Windows 10 with Eclipse Version: 2021-06 (4.20.0) and Tomcat 10.0.20","title":"Could not find or load main class org.apache.catalina.startup.Bootstrap","body":"<p>If Tomcat works fine independently, close Eclipse and then right click Eclipse and choose 'Run as an administrator'.</p>\n<p>That worked for me in Windows 10 with Eclipse Version: 2021-06 (4.20.0) and Tomcat 10.0.20</p>\n"},{"tags":[],"owner":{"account_id":27575145,"reputation":1,"user_id":21045534,"display_name":"Lucas"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1674152014,"creation_date":1674152014,"answer_id":75176602,"question_id":31029810,"body_markdown":"most likely cause it tomcat cannot run bootstrap.jar\r\nthis is due to bad jre\r\nyou can choose with jre tomcat has to use by running ConfigureTomcat tool and choosing a different \\jre\\bin\\server\\jvm.dll ","title":"Could not find or load main class org.apache.catalina.startup.Bootstrap","body":"<p>most likely cause it tomcat cannot run bootstrap.jar\nthis is due to bad jre\nyou can choose with jre tomcat has to use by running ConfigureTomcat tool and choosing a different \\jre\\bin\\server\\jvm.dll</p>\n"},{"tags":[],"owner":{"account_id":29541346,"reputation":1,"user_id":22639940,"display_name":"Lowees"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695753294,"creation_date":1695753050,"answer_id":77182610,"question_id":31029810,"body_markdown":"Had the same issue on MacOS. Turns out the issue had to do with the name of the directory that I had both Tomcat and Eclipse in. My directory was titled &quot;23-24&quot; This gets automatically translated to 23:24 in Eclipse when choosing a work directory. Tomcat however does not like semicolon characters so it would not start the server. I figured this out by trying to run Tomcat by itself and getting an error in terminal saying that CATALINA_HOME contained a : which it shouldn&#39;t.  I changed the name of my directory to include no &quot;-&quot; characters and no spaces and it seemed to have fixed this issue for me. ","title":"Could not find or load main class org.apache.catalina.startup.Bootstrap","body":"<p>Had the same issue on MacOS. Turns out the issue had to do with the name of the directory that I had both Tomcat and Eclipse in. My directory was titled &quot;23-24&quot; This gets automatically translated to 23:24 in Eclipse when choosing a work directory. Tomcat however does not like semicolon characters so it would not start the server. I figured this out by trying to run Tomcat by itself and getting an error in terminal saying that CATALINA_HOME contained a : which it shouldn't.  I changed the name of my directory to include no &quot;-&quot; characters and no spaces and it seemed to have fixed this issue for me.</p>\n"}],"owner":{"account_id":4967090,"reputation":331,"user_id":3996008,"accept_rate":11,"display_name":"Nitesh Kataria"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":130886,"favorite_count":0,"down_vote_count":1,"up_vote_count":30,"answer_count":8,"score":29,"last_activity_date":1695753294,"creation_date":1435157335,"question_id":31029810,"body_markdown":"When I run apache tomcat7.0.56 in Eclipse, I get an error\r\n&gt; **Error: Could not find or load main class org.apache.catalina.startup.Bootstrap**\r\n\r\nHow can I fix the problem?","title":"Could not find or load main class org.apache.catalina.startup.Bootstrap","body":"<p>When I run apache tomcat7.0.56 in Eclipse, I get an error</p>\n\n<blockquote>\n  <p><strong>Error: Could not find or load main class org.apache.catalina.startup.Bootstrap</strong></p>\n</blockquote>\n\n<p>How can I fix the problem?</p>\n"},{"tags":["java","spring","telegram-bot","reminders"],"comments":[{"owner":{"account_id":25926563,"reputation":119,"user_id":19648355,"display_name":"Irremediable"},"score":0,"creation_date":1695757965,"post_id":77181874,"comment_id":136066568,"body_markdown":"I am not familiar which library/API you&#39;re using, but it seems you do not send your messages (method &#39;sendLectureReminder&#39;). Also, I would recommend you to debug your code via debugger.","body":"I am not familiar which library/API you&#39;re using, but it seems you do not send your messages (method &#39;sendLectureReminder&#39;). Also, I would recommend you to debug your code via debugger."}],"owner":{"account_id":29135590,"reputation":1,"user_id":22319844,"display_name":"Vlad Chuklin"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695752970,"creation_date":1695745824,"question_id":77181874,"body_markdown":"Can you help me please? I am writing a telegram bot that will send a reminder about the start of the lecture at the university five minutes before the start of the lecture. This is the logic that should be: when a user writes his group, I make a request to the API `https://nure-dev.pp.ua/api/groups` to get the group identifier, then using this group I get the identifier (groupId), which should go to `https://nure-dev.pp.ua/api/schedule?type=group&amp;id= + groupId + &amp;start_time=1695365795&amp;end_time=1695408995` and then follow the full API link `https://nure-dev.pp. ua/api/schedule?type=group&amp;id= + groupId + &amp;start_time=1695365795&amp;end_time=1695408995` and then from this API you will receive a schedule and logic with a reminder. I use Spring Boot.\r\n\r\nExample:\r\n\r\n&gt; /start  \r\nHello, Vlad! This telegram bot will notify you about the beginning of the lecture. To find out more, write /all  \r\n/all  \r\neverything you need  \r\n/setgroup  \r\nEnter your group (Example: KNT-23-3)  \r\nKNT-23-3  \r\nGroup successfully installed: KNT-23-3  \r\n/remind  \r\n\r\nAnd this tag `/remind` doesn&#39;t work. I don&#39;t receive reminders about the start of the lecture in five minutes. What should I do?\r\n\r\nMy base code: \r\n  \r\n        `class UniversityApiService`\r\n    \r\n\r\n```\r\n@Component\r\npublic class UniversityApiService {\r\n\r\n    private final RestTemplate restTemplate;\r\n    private static final String GROUPS_API_URL = &quot;https://nure-dev.pp.ua/api/groups&quot;;\r\n    private static final String TIME_PARAMETERS = &quot;&amp;start_time=1695365795&amp;end_time=1697621662&quot;;\r\n    private final ObjectMapper objectMapper;\r\n\r\n    public UniversityApiService(RestTemplate restTemplate, ObjectMapper objectMapper) {\r\n        this.restTemplate = restTemplate;\r\n        this.objectMapper=objectMapper;\r\n    }\r\n\r\n    public List&lt;UniversityGroup&gt; getGroups() {\r\n        HttpHeaders headers = new HttpHeaders();\r\n        headers.setAccept(Collections.singletonList(MediaType.APPLICATION_JSON));\r\n\r\n        HttpEntity&lt;?&gt; entity = new HttpEntity&lt;&gt;(headers);\r\n\r\n        ResponseEntity&lt;?&gt; responseEntity;\r\n        try {\r\n            responseEntity = restTemplate.exchange(\r\n                    GROUPS_API_URL,\r\n                    HttpMethod.GET,\r\n                    entity,\r\n                    String.class  // Change the response type to String\r\n            );\r\n        } catch (HttpStatusCodeException e) {\r\n            MediaType contentType = e.getResponseHeaders().getContentType();\r\n            if (contentType != null) {\r\n                System.out.println(&quot;Response Content Type: &quot; + contentType.toString());\r\n            }\r\n\r\n            if (contentType != null &amp;&amp; contentType.includes(MediaType.TEXT_PLAIN)) {\r\n                // Handle plain text response\r\n                String plainTextResponse = e.getResponseBodyAsString();\r\n                try {\r\n                    // Use ObjectMapper to deserialize the plain text response into a list of UniversityGroup objects\r\n                    List&lt;UniversityGroup&gt; universityGroups = objectMapper.readValue(plainTextResponse, new TypeReference&lt;List&lt;UniversityGroup&gt;&gt;() {});\r\n                    return universityGroups;\r\n                } catch (IOException ex) {\r\n                    // Handle deserialization error\r\n                    ex.printStackTrace();\r\n                    return Collections.emptyList();\r\n                }\r\n            } else {\r\n                // Handle other exceptions\r\n                throw e;\r\n            }\r\n        }\r\n\r\n        // can also add a check for JSON content type here and parse it accordingly\r\n        // \r\n\r\n        return Collections.emptyList();\r\n    }\r\n\r\n    public String getGroupIdByName(String groupName) {\r\n        List&lt;UniversityGroup&gt; groups = getGroups();\r\n\r\n        if (groups != null) {\r\n            for (UniversityGroup group : groups) {\r\n                if (group.getName().equalsIgnoreCase(groupName)) {\r\n                    return group.getId();\r\n                }\r\n            }\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n\r\n    public UniversitySchedule getNextLectureForGroup(String groupId) {\r\n        ResponseEntity&lt;?&gt; responseEntity;\r\n        try {\r\n            responseEntity = restTemplate.exchange(\r\n                    &quot;https://nure-dev.pp.ua/api/schedule?type=group&amp;id=&quot; + groupId + TIME_PARAMETERS,\r\n                    HttpMethod.GET,\r\n                    null,\r\n                    String.class  // Change the response type to String\r\n            );\r\n        } catch (HttpStatusCodeException e) {\r\n            MediaType contentType = e.getResponseHeaders().getContentType();\r\n            if (contentType != null) {\r\n                System.out.println(&quot;Response Content Type: &quot; + contentType.toString());\r\n            }\r\n\r\n            if (contentType != null &amp;&amp; contentType.includes(MediaType.TEXT_PLAIN)) {\r\n                // Handle plain text response\r\n                String plainTextResponse = e.getResponseBodyAsString();\r\n                try {\r\n                    // Use ObjectMapper to deserialize the plain text response into a UniversitySchedule object\r\n                    UniversitySchedule universitySchedule = objectMapper.readValue(plainTextResponse, UniversitySchedule.class);\r\n                    return universitySchedule;\r\n                } catch (IOException ex) {\r\n                    // Handle deserialization error\r\n                    ex.printStackTrace();\r\n                }\r\n            } else {\r\n                // Handle other exceptions\r\n                throw e;\r\n            }\r\n        }\r\n\r\n        return null;\r\n    }\r\n}\r\n```\r\n\r\n     `class TelegramBot`\r\n\r\n\r\n```\r\n@Component\r\npublic class TelegramBot extends TelegramLongPollingBot {\r\n\r\n    private final BotConfig config;\r\n    private String userGroup;\r\n\r\n    private final ChatIdHolder chatIdHolder;\r\n    private final UniversityApiService universityApiService;\r\n\r\n    @Autowired\r\n    public TelegramBot(BotConfig config, UniversityApiService universityApiService, ChatIdHolder chatIdHolder){\r\n        this.config=config;\r\n        this.universityApiService= universityApiService;\r\n        this.chatIdHolder=chatIdHolder;\r\n    }\r\n\r\n\r\n    @Override\r\n    public String getBotUsername() {\r\n        return config.getBotName();\r\n    }\r\n\r\n    @Override\r\n    public String getBotToken() {\r\n        return config.getToken();\r\n    }\r\n\r\n    @Override\r\n    public void onUpdateReceived(Update update) {\r\n\r\n        if (update.hasMessage() &amp;&amp; update.getMessage().hasText()){\r\n          String messageText = update.getMessage().getText();\r\n          long chatId= update.getMessage().getChatId();\r\n            chatIdHolder.setChatId(chatId);\r\n\r\n           if (messageText.startsWith(&quot;/start&quot;)){\r\n               startCommandReceived(chatId,update.getMessage().getChat().getFirstName());\r\n            }else if(messageText.startsWith(&quot;/all&quot;)){\r\n               startAllCommands(chatId);\r\n           }else if(messageText.startsWith(&quot;/setgroup&quot;)){\r\n               sendMessage(chatId, &quot;Введіть вашу группу (Приклад: КНТ-23-3) &quot;);\r\n\r\n           }else if(messageText.startsWith(&quot;/remind&quot;)){\r\n               if (userGroup != null) {\r\n                   processUserGroup(userGroup);\r\n               } else {\r\n                   sendMessage(chatId, &quot;Спочатку встановіть групу, використовуючи /setgroup.&quot;);\r\n               }\r\n           }else if (countCapitalLetters(messageText) &lt; 2){\r\n               sendMessage(chatId, &quot;Вибачте, я не відповідаю на такі питання. Будь ласка, ознайомтеся з /all&quot;);\r\n           }else if (countCapitalLetters(messageText) &gt; 2) { // More than two capital letters\r\n               sendMessage(chatId, &quot;Група успішно установлена: &quot; + messageText);\r\n               userGroup = messageText; // Update userGroup\r\n           }\r\n\r\n        }\r\n\r\n    }\r\n    private int countCapitalLetters(String text) {\r\n        int count = 0;\r\n        for (char c : text.toCharArray()) {\r\n            if (Character.isUpperCase(c)) {\r\n                count++;\r\n            }\r\n        }\r\n        return count;\r\n    }\r\n\r\n    //настройка отправки сообщений\r\n    private void sendMessage(long chatId, String textToSend){\r\n        SendMessage message=new SendMessage();\r\n        message.setChatId(String.valueOf(chatId));\r\n        message.setText(textToSend);\r\n\r\n        try{\r\n            execute(message);\r\n        } catch (TelegramApiException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n    }\r\n    public void sendLectureReminder(long chatId,String remiderText){\r\n        SendMessage message2= new SendMessage();\r\n        message2.setChatId(String.valueOf(chatId));\r\n        message2.setText(remiderText);\r\n    }\r\n\r\n    public void processUserGroup(String groupName) {\r\n        // Step 1: Get the group ID by group name\r\n        String groupId = universityApiService.getGroupIdByName(groupName);\r\n\r\n        if (groupId != null) {\r\n            // Step 2: Get the next lecture for the group\r\n            UniversitySchedule nextLecture = universityApiService.getNextLectureForGroup(groupId);\r\n\r\n            if (nextLecture != null) {\r\n                // Step 3: Calculate the reminder time (5 minutes before the lecture)\r\n                long lectureStartTime = nextLecture.getStart_time();\r\n                long reminderTime = lectureStartTime - (5 * 60);\r\n\r\n                // Step 4: Convert the reminder time to a human-readable format (if needed)\r\n                String reminderTimeFormatted = unixTimestampToDateTime(reminderTime);\r\n\r\n                // Step 5: Create the reminder text\r\n                String reminderText = &quot;Your next lecture is at &quot; + reminderTimeFormatted +\r\n                        &quot;. Lecture: &quot; + nextLecture.getSubject().getTitle();\r\n\r\n                // Step 6: Send the reminder\r\n                long chatId = chatIdHolder.getChatId();\r\n                sendLectureReminder(chatId, reminderText);\r\n            }\r\n        }\r\n    }\r\n\r\n    private String unixTimestampToDateTime(long unixTimestamp) {\r\n        try {\r\n            SimpleDateFormat dateFormat = new SimpleDateFormat(&quot;yyyy-MM-dd HH:mm:ss&quot;);\r\n            Date date = new Date(unixTimestamp * 1000);\r\n            return dateFormat.format(date);\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n            return null;\r\n        }\r\n    }\r\n\r\n    private void startCommandReceived(long chatId, String name){\r\n\r\n        String answer= &quot;Привіт, &quot; +name+ &quot;! Цей телеграм бот буде сповіщати про початок лекцій.Щоб дізнатися більше напишіть /all &quot;;\r\n        sendMessage(chatId, answer);\r\n\r\n    }\r\n\r\n    private void startAllCommands(long chatId){\r\n        String allCommands= &quot;все що треба&quot;;\r\n        sendMessage(chatId, allCommands);\r\n\r\n    }\r\n\r\n    public String getUserGroup(){\r\n        return userGroup;\r\n    }\r\n    public void setUserGroup(String userGroup){\r\n\r\n    }\r\n\r\n}\r\n\r\n```\r\n\r\n\r\n`class ChatIdHolder`\r\n\r\n\r\n```\r\n@Component\r\n@Data\r\npublic class ChatIdHolder {\r\n    private long chatId;\r\n\r\n\r\n}\r\n```\r\n\r\n  `class UniversityGroup(UniversityScedule similare)`\r\n\r\n\r\n```\r\n@Data\r\npublic class UniversityGroup {\r\n\r\n    private String id;\r\n    private String name;\r\n}\r\n\r\n```\r\n\r\n","title":"Java.Error with telegram bot. Why don&#39;t I receive reminders?","body":"<p>Can you help me please? I am writing a telegram bot that will send a reminder about the start of the lecture at the university five minutes before the start of the lecture. This is the logic that should be: when a user writes his group, I make a request to the API <code>https://nure-dev.pp.ua/api/groups</code> to get the group identifier, then using this group I get the identifier (groupId), which should go to <code>https://nure-dev.pp.ua/api/schedule?type=group&amp;id= + groupId + &amp;start_time=1695365795&amp;end_time=1695408995</code> and then follow the full API link <code>https://nure-dev.pp. ua/api/schedule?type=group&amp;id= + groupId + &amp;start_time=1695365795&amp;end_time=1695408995</code> and then from this API you will receive a schedule and logic with a reminder. I use Spring Boot.</p>\n<p>Example:</p>\n<blockquote>\n<p>/start<br />\nHello, Vlad! This telegram bot will notify you about the beginning of the lecture. To find out more, write /all<br />\n/all<br />\neverything you need<br />\n/setgroup<br />\nEnter your group (Example: KNT-23-3)<br />\nKNT-23-3<br />\nGroup successfully installed: KNT-23-3<br />\n/remind</p>\n</blockquote>\n<p>And this tag <code>/remind</code> doesn't work. I don't receive reminders about the start of the lecture in five minutes. What should I do?</p>\n<p>My base code:</p>\n<pre><code>    `class UniversityApiService`\n</code></pre>\n<pre><code>@Component\npublic class UniversityApiService {\n\n    private final RestTemplate restTemplate;\n    private static final String GROUPS_API_URL = &quot;https://nure-dev.pp.ua/api/groups&quot;;\n    private static final String TIME_PARAMETERS = &quot;&amp;start_time=1695365795&amp;end_time=1697621662&quot;;\n    private final ObjectMapper objectMapper;\n\n    public UniversityApiService(RestTemplate restTemplate, ObjectMapper objectMapper) {\n        this.restTemplate = restTemplate;\n        this.objectMapper=objectMapper;\n    }\n\n    public List&lt;UniversityGroup&gt; getGroups() {\n        HttpHeaders headers = new HttpHeaders();\n        headers.setAccept(Collections.singletonList(MediaType.APPLICATION_JSON));\n\n        HttpEntity&lt;?&gt; entity = new HttpEntity&lt;&gt;(headers);\n\n        ResponseEntity&lt;?&gt; responseEntity;\n        try {\n            responseEntity = restTemplate.exchange(\n                    GROUPS_API_URL,\n                    HttpMethod.GET,\n                    entity,\n                    String.class  // Change the response type to String\n            );\n        } catch (HttpStatusCodeException e) {\n            MediaType contentType = e.getResponseHeaders().getContentType();\n            if (contentType != null) {\n                System.out.println(&quot;Response Content Type: &quot; + contentType.toString());\n            }\n\n            if (contentType != null &amp;&amp; contentType.includes(MediaType.TEXT_PLAIN)) {\n                // Handle plain text response\n                String plainTextResponse = e.getResponseBodyAsString();\n                try {\n                    // Use ObjectMapper to deserialize the plain text response into a list of UniversityGroup objects\n                    List&lt;UniversityGroup&gt; universityGroups = objectMapper.readValue(plainTextResponse, new TypeReference&lt;List&lt;UniversityGroup&gt;&gt;() {});\n                    return universityGroups;\n                } catch (IOException ex) {\n                    // Handle deserialization error\n                    ex.printStackTrace();\n                    return Collections.emptyList();\n                }\n            } else {\n                // Handle other exceptions\n                throw e;\n            }\n        }\n\n        // can also add a check for JSON content type here and parse it accordingly\n        // \n\n        return Collections.emptyList();\n    }\n\n    public String getGroupIdByName(String groupName) {\n        List&lt;UniversityGroup&gt; groups = getGroups();\n\n        if (groups != null) {\n            for (UniversityGroup group : groups) {\n                if (group.getName().equalsIgnoreCase(groupName)) {\n                    return group.getId();\n                }\n            }\n        }\n\n        return null;\n    }\n\n\n    public UniversitySchedule getNextLectureForGroup(String groupId) {\n        ResponseEntity&lt;?&gt; responseEntity;\n        try {\n            responseEntity = restTemplate.exchange(\n                    &quot;https://nure-dev.pp.ua/api/schedule?type=group&amp;id=&quot; + groupId + TIME_PARAMETERS,\n                    HttpMethod.GET,\n                    null,\n                    String.class  // Change the response type to String\n            );\n        } catch (HttpStatusCodeException e) {\n            MediaType contentType = e.getResponseHeaders().getContentType();\n            if (contentType != null) {\n                System.out.println(&quot;Response Content Type: &quot; + contentType.toString());\n            }\n\n            if (contentType != null &amp;&amp; contentType.includes(MediaType.TEXT_PLAIN)) {\n                // Handle plain text response\n                String plainTextResponse = e.getResponseBodyAsString();\n                try {\n                    // Use ObjectMapper to deserialize the plain text response into a UniversitySchedule object\n                    UniversitySchedule universitySchedule = objectMapper.readValue(plainTextResponse, UniversitySchedule.class);\n                    return universitySchedule;\n                } catch (IOException ex) {\n                    // Handle deserialization error\n                    ex.printStackTrace();\n                }\n            } else {\n                // Handle other exceptions\n                throw e;\n            }\n        }\n\n        return null;\n    }\n}\n</code></pre>\n<pre><code> `class TelegramBot`\n</code></pre>\n<pre><code>@Component\npublic class TelegramBot extends TelegramLongPollingBot {\n\n    private final BotConfig config;\n    private String userGroup;\n\n    private final ChatIdHolder chatIdHolder;\n    private final UniversityApiService universityApiService;\n\n    @Autowired\n    public TelegramBot(BotConfig config, UniversityApiService universityApiService, ChatIdHolder chatIdHolder){\n        this.config=config;\n        this.universityApiService= universityApiService;\n        this.chatIdHolder=chatIdHolder;\n    }\n\n\n    @Override\n    public String getBotUsername() {\n        return config.getBotName();\n    }\n\n    @Override\n    public String getBotToken() {\n        return config.getToken();\n    }\n\n    @Override\n    public void onUpdateReceived(Update update) {\n\n        if (update.hasMessage() &amp;&amp; update.getMessage().hasText()){\n          String messageText = update.getMessage().getText();\n          long chatId= update.getMessage().getChatId();\n            chatIdHolder.setChatId(chatId);\n\n           if (messageText.startsWith(&quot;/start&quot;)){\n               startCommandReceived(chatId,update.getMessage().getChat().getFirstName());\n            }else if(messageText.startsWith(&quot;/all&quot;)){\n               startAllCommands(chatId);\n           }else if(messageText.startsWith(&quot;/setgroup&quot;)){\n               sendMessage(chatId, &quot;Введіть вашу группу (Приклад: КНТ-23-3) &quot;);\n\n           }else if(messageText.startsWith(&quot;/remind&quot;)){\n               if (userGroup != null) {\n                   processUserGroup(userGroup);\n               } else {\n                   sendMessage(chatId, &quot;Спочатку встановіть групу, використовуючи /setgroup.&quot;);\n               }\n           }else if (countCapitalLetters(messageText) &lt; 2){\n               sendMessage(chatId, &quot;Вибачте, я не відповідаю на такі питання. Будь ласка, ознайомтеся з /all&quot;);\n           }else if (countCapitalLetters(messageText) &gt; 2) { // More than two capital letters\n               sendMessage(chatId, &quot;Група успішно установлена: &quot; + messageText);\n               userGroup = messageText; // Update userGroup\n           }\n\n        }\n\n    }\n    private int countCapitalLetters(String text) {\n        int count = 0;\n        for (char c : text.toCharArray()) {\n            if (Character.isUpperCase(c)) {\n                count++;\n            }\n        }\n        return count;\n    }\n\n    //настройка отправки сообщений\n    private void sendMessage(long chatId, String textToSend){\n        SendMessage message=new SendMessage();\n        message.setChatId(String.valueOf(chatId));\n        message.setText(textToSend);\n\n        try{\n            execute(message);\n        } catch (TelegramApiException e) {\n            throw new RuntimeException(e);\n        }\n    }\n    public void sendLectureReminder(long chatId,String remiderText){\n        SendMessage message2= new SendMessage();\n        message2.setChatId(String.valueOf(chatId));\n        message2.setText(remiderText);\n    }\n\n    public void processUserGroup(String groupName) {\n        // Step 1: Get the group ID by group name\n        String groupId = universityApiService.getGroupIdByName(groupName);\n\n        if (groupId != null) {\n            // Step 2: Get the next lecture for the group\n            UniversitySchedule nextLecture = universityApiService.getNextLectureForGroup(groupId);\n\n            if (nextLecture != null) {\n                // Step 3: Calculate the reminder time (5 minutes before the lecture)\n                long lectureStartTime = nextLecture.getStart_time();\n                long reminderTime = lectureStartTime - (5 * 60);\n\n                // Step 4: Convert the reminder time to a human-readable format (if needed)\n                String reminderTimeFormatted = unixTimestampToDateTime(reminderTime);\n\n                // Step 5: Create the reminder text\n                String reminderText = &quot;Your next lecture is at &quot; + reminderTimeFormatted +\n                        &quot;. Lecture: &quot; + nextLecture.getSubject().getTitle();\n\n                // Step 6: Send the reminder\n                long chatId = chatIdHolder.getChatId();\n                sendLectureReminder(chatId, reminderText);\n            }\n        }\n    }\n\n    private String unixTimestampToDateTime(long unixTimestamp) {\n        try {\n            SimpleDateFormat dateFormat = new SimpleDateFormat(&quot;yyyy-MM-dd HH:mm:ss&quot;);\n            Date date = new Date(unixTimestamp * 1000);\n            return dateFormat.format(date);\n        } catch (Exception e) {\n            e.printStackTrace();\n            return null;\n        }\n    }\n\n    private void startCommandReceived(long chatId, String name){\n\n        String answer= &quot;Привіт, &quot; +name+ &quot;! Цей телеграм бот буде сповіщати про початок лекцій.Щоб дізнатися більше напишіть /all &quot;;\n        sendMessage(chatId, answer);\n\n    }\n\n    private void startAllCommands(long chatId){\n        String allCommands= &quot;все що треба&quot;;\n        sendMessage(chatId, allCommands);\n\n    }\n\n    public String getUserGroup(){\n        return userGroup;\n    }\n    public void setUserGroup(String userGroup){\n\n    }\n\n}\n\n</code></pre>\n<p><code>class ChatIdHolder</code></p>\n<pre><code>@Component\n@Data\npublic class ChatIdHolder {\n    private long chatId;\n\n\n}\n</code></pre>\n<p><code>class UniversityGroup(UniversityScedule similare)</code></p>\n<pre><code>@Data\npublic class UniversityGroup {\n\n    private String id;\n    private String name;\n}\n\n</code></pre>\n"},{"tags":["java","button","javafx","observablelist"],"comments":[{"owner":{"account_id":1180113,"reputation":152325,"user_id":1155209,"display_name":"jewelsea"},"score":0,"creation_date":1695676493,"post_id":77175193,"comment_id":136053780,"body_markdown":"I don&#39;t know what is going wrong with your app (I don&#39;t see an obvious error).  It would take time to debug, and I may not have the skill to do that as well.  Add a listener on the children list of the group which contains the tube and particles and set a breakpoint in it (or dump the necessary children info to system out).  Run your application with a small number of particles, e.g. 3-5.  Each time the breakpoint is hit ensure the change to the group of 3D nodes matches what you expect.","body":"I don&#39;t know what is going wrong with your app (I don&#39;t see an obvious error).  It would take time to debug, and I may not have the skill to do that as well.  Add a listener on the children list of the group which contains the tube and particles and set a breakpoint in it (or dump the necessary children info to system out).  Run your application with a small number of particles, e.g. 3-5.  Each time the breakpoint is hit ensure the change to the group of 3D nodes matches what you expect."},{"owner":{"account_id":29171652,"reputation":1,"user_id":22347890,"display_name":"Darina"},"score":0,"creation_date":1695678503,"post_id":77175193,"comment_id":136053973,"body_markdown":"Thanks for watching. I tracked the changes the coordinates of the particles: the changes are small (within a few pixels), but they are there. It would be noticeable. But the picture is absolutely static.","body":"Thanks for watching. I tracked the changes the coordinates of the particles: the changes are small (within a few pixels), but they are there. It would be noticeable. But the picture is absolutely static."}],"answers":[{"tags":[],"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1695737133,"creation_date":1695736545,"answer_id":77180700,"question_id":77175193,"body_markdown":"Nothing in your code ever updates the UI. \r\n\r\nYour `Tube` class contains a reference to a UI object (a `Cylinder`). When you create a `Tube` instance, you set the height and radius of the `Cylinder` based on the `height` and `radius` of the `Tube`.\r\n\r\nHowever, if you later change the height or radius of the `Tube` via the `setHeight(...)` or `setRadius(...)` methods, you don&#39;t update the properties of the `Cylinder`. So the UI never changes.\r\n\r\nYou need:\r\n\r\n```\r\npublic class Tube {\r\n\r\n    private final Cylinder tube;\r\n\r\n    // ...\r\n\r\n\r\n    public void setRadius(double radius) {\r\n        this.radius = radius;\r\n        tube.setRadius(radius);\r\n    }\r\n    public void setHeight(double height) {\r\n        this.height = height;\r\n        tube.setHeight(height);\r\n    }\r\n\r\n}\r\n```\r\n\r\nSimilarly for the `Particle` class, if the properties of the `Particle` are changed, you need to update the properties of the UI object (the `Sphere`):\r\n\r\n```\r\npublic class Particle {\r\n\r\n    private final Sphere particle;\r\n\r\n    // ...\r\n\r\n    public void setPhi(double phi) {\r\n        this.phi = phi;\r\n        particle.setTranslateX(rho * Math.cos(phi));\r\n        particle.setTranslateZ(rho * Math.sin(phi));\r\n    }\r\n\r\n    public void setRho(double rho) {\r\n        this.rho = rho;\r\n        particle.setTranslateX(rho * Math.cos(phi));\r\n        particle.setTranslateZ(rho * Math.sin(phi));\r\n    }\r\n\r\n    public void setZ(double z) {\r\n        this.z = z;\r\n        particle.setTranslateY(z);\r\n    }\r\n\r\n}\r\n```\r\n\r\n(Unchanged code omitted in both classes.)\r\n\r\n---\r\n\r\nA more &quot;JavaFX&quot; approach would be to separate the data class from the view of the data, and use JavaFX properties to keep everything in sync. To give you a brief flavor of this, the implementation of the `Tube` would look something like:\r\n\r\n```\r\npublic class Tube {\r\n\r\n    private final DoubleProperty height = new SimpleDoubleProperty();\r\n\r\n    public DoubleProperty heightProperty() {\r\n        return height ;\r\n    }\r\n\r\n    public final double getHeight() {\r\n        return heightProperty().get();\r\n    }\r\n\r\n    public final void setHeight(double height) {\r\n        heightProperty().set(height);\r\n    }\r\n\r\n    private final DoubleProperty radius = new SimpleDoubleProperty();\r\n\r\n    public DoubleProperty radiusProperty() {\r\n        return radius;\r\n    }\r\n\r\n    public final double getRadius() {\r\n        return radiusProperty().get();\r\n    }\r\n\r\n    public final void setRadius(double radius) {\r\n        radiusProperty().set(radius);\r\n    }\r\n\r\n    public Tube(double radius, double height) {\r\n        setRadius(radius);\r\n        setHeight(height);\r\n    }\r\n}\r\n```\r\n\r\n```\r\npublic class TubeView {\r\n\r\n    private final Tube tube ;\r\n    private final Cylinder view ;\r\n    private Color color;\r\n\r\n    public TubeView(Tube tube, Color color) {\r\n        this.tube = tube;\r\n        this.view = new Cylinder();\r\n        this.color = color;\r\n        view.setMaterial(new PhongMaterial(color));\r\n        view.heightProperty().bind(tube.heightProperty());\r\n        view.radiusProperty().bind(tube.radiusProperty());\r\n    }\r\n\r\n    public Node asNode() {\r\n        return view;\r\n    }\r\n}\r\n```\r\n\r\n    \r\n\r\n","title":"Why doesn&#39;t the location of 3D objects change when you click on the button?","body":"<p>Nothing in your code ever updates the UI.</p>\n<p>Your <code>Tube</code> class contains a reference to a UI object (a <code>Cylinder</code>). When you create a <code>Tube</code> instance, you set the height and radius of the <code>Cylinder</code> based on the <code>height</code> and <code>radius</code> of the <code>Tube</code>.</p>\n<p>However, if you later change the height or radius of the <code>Tube</code> via the <code>setHeight(...)</code> or <code>setRadius(...)</code> methods, you don't update the properties of the <code>Cylinder</code>. So the UI never changes.</p>\n<p>You need:</p>\n<pre><code>public class Tube {\n\n    private final Cylinder tube;\n\n    // ...\n\n\n    public void setRadius(double radius) {\n        this.radius = radius;\n        tube.setRadius(radius);\n    }\n    public void setHeight(double height) {\n        this.height = height;\n        tube.setHeight(height);\n    }\n\n}\n</code></pre>\n<p>Similarly for the <code>Particle</code> class, if the properties of the <code>Particle</code> are changed, you need to update the properties of the UI object (the <code>Sphere</code>):</p>\n<pre><code>public class Particle {\n\n    private final Sphere particle;\n\n    // ...\n\n    public void setPhi(double phi) {\n        this.phi = phi;\n        particle.setTranslateX(rho * Math.cos(phi));\n        particle.setTranslateZ(rho * Math.sin(phi));\n    }\n\n    public void setRho(double rho) {\n        this.rho = rho;\n        particle.setTranslateX(rho * Math.cos(phi));\n        particle.setTranslateZ(rho * Math.sin(phi));\n    }\n\n    public void setZ(double z) {\n        this.z = z;\n        particle.setTranslateY(z);\n    }\n\n}\n</code></pre>\n<p>(Unchanged code omitted in both classes.)</p>\n<hr />\n<p>A more &quot;JavaFX&quot; approach would be to separate the data class from the view of the data, and use JavaFX properties to keep everything in sync. To give you a brief flavor of this, the implementation of the <code>Tube</code> would look something like:</p>\n<pre><code>public class Tube {\n\n    private final DoubleProperty height = new SimpleDoubleProperty();\n\n    public DoubleProperty heightProperty() {\n        return height ;\n    }\n\n    public final double getHeight() {\n        return heightProperty().get();\n    }\n\n    public final void setHeight(double height) {\n        heightProperty().set(height);\n    }\n\n    private final DoubleProperty radius = new SimpleDoubleProperty();\n\n    public DoubleProperty radiusProperty() {\n        return radius;\n    }\n\n    public final double getRadius() {\n        return radiusProperty().get();\n    }\n\n    public final void setRadius(double radius) {\n        radiusProperty().set(radius);\n    }\n\n    public Tube(double radius, double height) {\n        setRadius(radius);\n        setHeight(height);\n    }\n}\n</code></pre>\n<pre><code>public class TubeView {\n\n    private final Tube tube ;\n    private final Cylinder view ;\n    private Color color;\n\n    public TubeView(Tube tube, Color color) {\n        this.tube = tube;\n        this.view = new Cylinder();\n        this.color = color;\n        view.setMaterial(new PhongMaterial(color));\n        view.heightProperty().bind(tube.heightProperty());\n        view.radiusProperty().bind(tube.radiusProperty());\n    }\n\n    public Node asNode() {\n        return view;\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":29171652,"reputation":1,"user_id":22347890,"display_name":"Darina"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":108,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":77180700,"answer_count":1,"score":-1,"last_activity_date":1695752818,"creation_date":1695669118,"question_id":77175193,"body_markdown":"I am a student and I am studying physical modeling of processes. I&#39;m new to GUI. I have two processes. The first process randomly scatters the balls onto the surface of the cylinder. Here&#39;s the code for it\r\n\r\n```\r\npublic class Generation {\r\n    private static final Color[] COLORS = new Color[] { RED, YELLOW, GREEN, BROWN, BLUE, PINK, BLACK };\r\n    private final Tube tube;\r\n    private final int numberOfParticle;\r\n    private final double radius;\r\n    public Generation(Tube tube, int numberOfParticle) {\r\n        this.tube = tube;\r\n        this.numberOfParticle = numberOfParticle;\r\n        radius = Math.sqrt(tube.getRadius()*tube.getHeight()/(2*numberOfParticle));\r\n    }\r\n    private Particle RandomParticle (Color color) {\r\n        double phi = 2*Math.PI*Math.random();\r\n        double z = GetRandomNumberUsingNextDouble(-tube.getHeight()/2,tube.getHeight()/2);\r\n        Particle particle = new Particle(phi,tube.getRadius(),z,radius,color);\r\n        return particle;\r\n    }\r\n    private static double GetRandomNumberUsingNextDouble(double min, double max){\r\n        Random r = new Random();\r\n        return min + (max - min) * r.nextDouble();\r\n    }\r\n    public ObservableList&lt;Particle&gt; ParticlesGeneration() {\r\n        ObservableList&lt;Particle&gt; particlesList = FXCollections.observableArrayList()\r\n        for (int i = 0; i &lt; numberOfParticle; i++) {\r\n            Particle particle = RandomParticle(COLORS[i % COLORS.length]);\r\n            particlesList.add(particle);\r\n        }\r\n        return particlesList;\r\n    }\r\n}\r\n```\r\n\r\nParticle class\r\n\r\n```\r\npublic class Particle {\r\n   private final double radius;\r\n   private double phi, rho, z;\r\n   private final Sphere particle;\r\n   public Particle(double phi, double rho, double z, double radius, Color color) {\r\n       this.particle = new Sphere(radius);\r\n       this.radius = radius;\r\n       this.phi = phi;\r\n       this.rho = rho;\r\n       this.z = z;\r\n       particle.setMaterial(new PhongMaterial(color));\r\n       particle.setTranslateX(rho * Math.cos(phi));\r\n       particle.setTranslateY(z);\r\n       particle.setTranslateZ(rho * Math.sin(phi));\r\n   }\r\n   private static double distance(double x1, double y1, double x2, double y2) {\r\n       x2 -= x1;\r\n       y2 -= y1;\r\n       return Math.sqrt(x2 * x2 + y2 * y2);\r\n   }\r\n   public double distance(Particle p) { return distance(getPhi()*getRho(), getZ(), p.getPhi()*p.getRho(),p.getZ());}\r\n   public double getRadius() { return radius; }\r\n    public double getPhi() { return phi; }\r\n    public void setPhi(double phi) { this.phi = phi; }\r\n    public double getRho() { return rho; }\r\n    public void setRho(double rho) { this.rho = rho; }\r\n    public double getZ() { return z; }\r\n    public void setZ(double z) { this.z = z; }\r\n    public Sphere getParticle() { return particle; }\r\n}\r\n```\r\n\r\nCylinder class\r\n\r\n```\r\npublic class Tube {\r\n    private double radius, height;\r\n    private final Cylinder tube;\r\n    private final Color color;\r\n    public Tube(double radius, double height, Color color) {\r\n        this.height = height;\r\n        this.color = color;\r\n        this.radius = radius;\r\n        this.tube = new Cylinder(radius,height);\r\n        tube.setMaterial(new PhongMaterial(color));\r\n    }\r\n    public Color getColor() { return color; }\r\n    public double getRadius() { return radius; }\r\n    public double getHeight() { return height; }\r\n    public Cylinder getTube() { return tube; }\r\n    public void setRadius(double radius) { this.radius = radius; }\r\n    public void setHeight(double height) { this.height = height; }\r\n}\r\n```\r\n\r\nThe second process is to create a dense packing of randomly scattered particles\r\n\r\n```\r\npublic class Minimization {\r\n    private double COEFFICIENT_FOR_ANGLE = 1;\r\n    private double COEFFICIENT_FOR_Z = 1;\r\n    @SuppressWarnings(&quot;FieldCanBeLocal&quot;)\r\n    private final double ACCEPTABLE_COEFFICIENT_VALUE_K_ANGEL = 0.0001;\r\n    @SuppressWarnings(&quot;FieldCanBeLocal&quot;)\r\n    private final double ACCEPTABLE_COEFFICIENT_VALUE_K_Z = 0.0001;\r\n    @SuppressWarnings(&quot;FieldCanBeLocal&quot;)\r\n    private final double ACCEPTABLE_VALUE_OF_ENERGY_DIFFERENCE = 0.0001;\r\n    @SuppressWarnings(&quot;FieldCanBeLocal&quot;)\r\n    public static final double MAX_VALUE = 1.7976931348623157E308;\r\n    private final ObservableList&lt;Particle&gt; poissonDiskCoordinatesParticles;\r\n    private final int numberOfParticle, degree;\r\n    private final double heightTube;\r\n    public Minimization(ObservableList&lt;Particle&gt; poissonDiskCoordinatesParticles, int degree, Tube tube) {\r\n        this.poissonDiskCoordinatesParticles = poissonDiskCoordinatesParticles;\r\n        this.degree = degree;\r\n        numberOfParticle = poissonDiskCoordinatesParticles.size();\r\n        heightTube = tube.getHeight();\r\n    }\r\n    public ObservableList&lt;Particle&gt; minimization () {\r\n        ObservableList&lt;Particle&gt; list = poissonDiskCoordinatesParticles;\r\n        double energyOld = MAX_VALUE;\r\n        double energyNew = energyOfSystem(list);\r\n        while (COEFFICIENT_FOR_ANGLE &gt; ACCEPTABLE_COEFFICIENT_VALUE_K_ANGEL &amp;&amp; COEFFICIENT_FOR_Z &gt; ACCEPTABLE_COEFFICIENT_VALUE_K_Z &amp;&amp; energyOld &gt; energyNew) {\r\n            if (energyOld - energyNew &lt; ACCEPTABLE_VALUE_OF_ENERGY_DIFFERENCE) {\r\n                COEFFICIENT_FOR_Z = COEFFICIENT_FOR_Z/2;\r\n                COEFFICIENT_FOR_ANGLE = COEFFICIENT_FOR_ANGLE/2;\r\n            }\r\n            energyOld = energyNew;\r\n            stepOfMinimization(list);\r\n            energyNew = energyOfSystem(list);\r\n        }\r\n        return list;\r\n    }\r\n    private void stepOfMinimization (ObservableList&lt;Particle&gt; list) {\r\n        for (int i = 0; i &lt; numberOfParticle; i++) {\r\n            Particle particle = newParticle(list, i);\r\n            if (energyOfSystem(list) &lt; energyOfSystem(list,particle,i)) {\r\n                list.set(i, particle);\r\n            }\r\n        }\r\n    }\r\n    private Particle newParticle(ObservableList&lt;Particle&gt; coordinates, int i) {\r\n        Particle particle = coordinates.get(i);\r\n        double ForcePhi = 0.0;\r\n        double ForceZ = 0.0;\r\n        for (int j = 0; j &lt; numberOfParticle; j++) {\r\n            Particle jParticle = coordinates.get(j);\r\n            if (i != j) {\r\n                ForcePhi += (numberOfParticle * particle.getRho() *\r\n                        (particle.getPhi() - jParticle.getPhi())) / pow(particle.distance(jParticle), degree + 2);\r\n                ForceZ += (numberOfParticle *\r\n                        (particle.getZ() - jParticle.getZ())) / pow(particle.distance(jParticle), degree + 2);\r\n            }\r\n        }\r\n        ForceZ += degree / pow(particle.getZ() - heightTube / 2, degree + 1) + degree / pow(particle.getZ() + heightTube / 2, degree + 1);\r\n        particle.setPhi(particle.getPhi() + COEFFICIENT_FOR_ANGLE * ForcePhi);\r\n        particle.setZ(particle.getZ() + COEFFICIENT_FOR_Z * ForceZ);\r\n        return particle;\r\n    }\r\n    private double energyOfSystem (ObservableList&lt;Particle&gt; coordinates) {\r\n        double Energy = 0;\r\n        for (int i = 0; i &lt; numberOfParticle; i++) {\r\n            for (int j = 0; j &lt; numberOfParticle; j++) {\r\n                if (i != j) {\r\n                    Energy += 1/pow(coordinates.get(i).distance(coordinates.get(j)),degree);\r\n                }\r\n            }\r\n            Energy += degree / pow(coordinates.get(i).getZ() - heightTube / 2, degree) +                    degree / pow(coordinates.get(i).getZ() + heightTube / 2, degree);\r\n        }\r\n        return Energy;\r\n    }\r\n    private double energyOfSystem (ObservableList&lt;Particle&gt; coordinates, Particle particle, int i) {\r\n        coordinates.set(i,particle);\r\n        return energyOfSystem(coordinates);\r\n    }\r\n}\r\n```\r\n\r\nClass drawing particles\r\n\r\n```\r\npublic class Mapping {\r\n    private final ObservableList&lt;Particle&gt; list;\r\n    private final int numberOfParticle;\r\n    private final Group group;\r\n    private final Tube tube;\r\n    public Mapping(int numberOfParticle, Group group, Tube tube, ObservableList&lt;Particle&gt; list) {\r\n        this.numberOfParticle = numberOfParticle;\r\n        this.group = group;\r\n        this.list = list;\r\n        this.tube = tube;\r\n    }\r\n    public void MappingParticle() {\r\n        group.getChildren().clear();\r\n        group.getChildren().add(tube.getTube());\r\n        for (int i = 0; i &lt; numberOfParticle; i++) {\r\n            group.getChildren().add(list.get(i).getParticle());\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nAnd finally the interface\r\n\r\n```\r\npublic class NanoTube extends Application {\r\n    private double anchorX, anchorY;\r\n    @SuppressWarnings(&quot;FieldCanBeLocal&quot;)\r\n    private final int WIDTH = 800;\r\n    @SuppressWarnings(&quot;FieldCanBeLocal&quot;)\r\n    private final int HEIGHT = 670;\r\n    private final int RADIUS = 100;\r\n    private final Rotate rotateX = new Rotate(0, Rotate.X_AXIS);\r\n    private final Rotate rotateY = new Rotate(0, Rotate.Y_AXIS);\r\n    @Override\r\n    public void start(Stage stage) {\r\n        var buttonEnter = new Button(&quot;Enter&quot;);\r\n        var buttonEnergyMinimization = new Button(&quot;Minimization&quot;);\r\n        var buttonEnergyMinimizationStress = new Button(&quot;Minimization Stress&quot;);\r\n        var labelRadius = new Label(&quot;Cylinder&#39;s radius&quot;);\r\n        var labelHeight = new Label(&quot;Cylinder&#39;s height&quot;);\r\n        var labelNumber = new Label(&quot;Number Particle&quot;);\r\n        var textFieldRadius = new TextField();\r\n        var textFieldHeight = new TextField();\r\n        var textNumber = new TextField();\r\n        GridPane Top = new GridPane();\r\n        for (int i : new int[]{120, 100, 70, 90, 60, 140, 150, 65}) {\r\n            Top.getColumnConstraints().add(new ColumnConstraints(i));\r\n        }\r\n        for (int i = 0; i &lt; 3; i++) {\r\n            Top.getRowConstraints().add(new RowConstraints(30));\r\n        }\r\n        Top.getRowConstraints().add(new RowConstraints(560));\r\n\r\n        Arrays.asList(labelRadius, labelHeight, labelNumber).forEach(label -&gt; {\r\n            GridPane.setHalignment(label, HPos.CENTER);\r\n            GridPane.setValignment(label, VPos.CENTER);\r\n        });\r\n        Arrays.asList(buttonEnter, buttonEnergyMinimization).forEach(button -&gt; {\r\n            GridPane.setHalignment(button, HPos.CENTER);\r\n            GridPane.setValignment(button, VPos.CENTER);\r\n        });\r\n        Top.add(labelRadius, 0, 0);\r\n        Top.add(labelHeight, 0, 1);\r\n        Top.add(labelNumber, 0, 2);\r\n        Top.add(textFieldRadius, 1, 0);\r\n        Top.add(textFieldHeight, 1, 1);\r\n        Top.add(textNumber, 1, 2);\r\n        Top.add(buttonEnter,2,0,1,3);\r\n        Top.add(buttonEnergyMinimization,3,0,1,3);\r\n        PerspectiveCamera camera = new PerspectiveCamera(true);\r\n        camera.setNearClip(0.1);\r\n        camera.setFarClip(10000.0);\r\n        camera.setFieldOfView(20);\r\n        camera.getTransforms().addAll (rotateX, rotateY, new Translate(0, 0, -500));\r\n        Tube tube = new Tube(80,80,Color.rgb(225,225,0));\r\n        Group group = new Group(tube.getTube());\r\n        SubScene subScene = new SubScene(group, 750, 550, true, SceneAntialiasing.BALANCED);\r\n        subScene.setFill (Color.rgb (129, 129, 129));\r\n        subScene.setCamera(camera);\r\n        var root3d = new Group(subScene);\r\n        initMouseControl(subScene);\r\n        Top.add(root3d,0,3,8,1);\r\n        GridPane.setHalignment(root3d, HPos.CENTER);\r\n        GridPane.setValignment(root3d, VPos.CENTER);\r\n        buttonEnter.setOnAction(e -&gt; {\r\n            int n = Integer.parseInt(textNumber.getText());\r\n            tube.setHeight(Double.parseDouble(textFieldHeight.getText()));\r\n            tube.setRadius(Double.parseDouble(textFieldRadius.getText()));\r\n            ObservableList&lt;Particle&gt; particles = new Generation(tube, n).ParticlesGeneration();\r\n            new Mapping(n,group,tube,particles).MappingParticle();\r\n            buttonEnergyMinimization.setOnAction(actionEvent -&gt; {\r\n                ObservableList&lt;Particle&gt; list = new Minimization(particles,2,tube).minimization();\r\n                new Mapping(n,group,tube,list).MappingParticle();\r\n            });\r\n        });\r\n        var scene = new Scene(Top, WIDTH,HEIGHT);\r\n        stage.setScene(scene);\r\n        stage.show();\r\n        stage.setTitle(&quot;NanoTube Student Project&quot;);\r\n    }\r\n    public static void main(String[] args) {launch();}\r\n    private void initMouseControl(SubScene scene) {\r\n        scene.setOnMousePressed(event -&gt; {\r\n            anchorX = event.getSceneX();\r\n            anchorY = event.getSceneY();\r\n        });\r\n        scene.setOnMouseDragged(event -&gt; {\r\n            double dx = (anchorX - event.getSceneX());\r\n            double dy = (anchorY - event.getSceneY());\r\n            if (event.isPrimaryButtonDown()) {\r\n                rotateX.setAngle(rotateX.getAngle() -\r\n                        (dy /RADIUS  * 360) * (Math.PI / 180));\r\n                rotateY.setAngle(rotateY.getAngle() -\r\n                        (dx /RADIUS * -360) * (Math.PI / 180));\r\n            }\r\n            anchorX = event.getSceneX();\r\n            anchorY = event.getSceneY();\r\n        });\r\n    }\r\n}\r\n```\r\n\r\nIf you click on the &quot;Enter&quot; button, the particles are drawn, but if you then click on the &quot;Minimization&quot; button, the image does not change. I don&#39;t understand why this is happening.\r\n\r\nI was advised to write as brief an example of a non-working area as possible. But the examples work, but my program doesn&#39;t. I don&#39;t understand why the second button ignores drawing particles when using the &quot;Minimization&quot; class. In the end, individually everything works fine.\r\nI use javafx but I don&#39;t use fxml. I will be grateful if you find the time to help me.\r\n\r\n\r\nUPD: About the minimization class. As I said earlier, I randomly placed the particles on the surface of the cylinder. I need to minimize the energy of the particle system by the [&quot;gradient descent&quot;][1] method. In order not to count in a three-dimensional coordinate system, I use UV-mapping of the side of the cylinder. That is, the particles are located on a rectangle with sides &quot;cylinder height&quot; and &quot;cylinder radius * angle (in radians)&quot;, where the angle takes values from 0 to 2pi\r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Gradient_descent","title":"Why doesn&#39;t the location of 3D objects change when you click on the button?","body":"<p>I am a student and I am studying physical modeling of processes. I'm new to GUI. I have two processes. The first process randomly scatters the balls onto the surface of the cylinder. Here's the code for it</p>\n<pre><code>public class Generation {\n    private static final Color[] COLORS = new Color[] { RED, YELLOW, GREEN, BROWN, BLUE, PINK, BLACK };\n    private final Tube tube;\n    private final int numberOfParticle;\n    private final double radius;\n    public Generation(Tube tube, int numberOfParticle) {\n        this.tube = tube;\n        this.numberOfParticle = numberOfParticle;\n        radius = Math.sqrt(tube.getRadius()*tube.getHeight()/(2*numberOfParticle));\n    }\n    private Particle RandomParticle (Color color) {\n        double phi = 2*Math.PI*Math.random();\n        double z = GetRandomNumberUsingNextDouble(-tube.getHeight()/2,tube.getHeight()/2);\n        Particle particle = new Particle(phi,tube.getRadius(),z,radius,color);\n        return particle;\n    }\n    private static double GetRandomNumberUsingNextDouble(double min, double max){\n        Random r = new Random();\n        return min + (max - min) * r.nextDouble();\n    }\n    public ObservableList&lt;Particle&gt; ParticlesGeneration() {\n        ObservableList&lt;Particle&gt; particlesList = FXCollections.observableArrayList()\n        for (int i = 0; i &lt; numberOfParticle; i++) {\n            Particle particle = RandomParticle(COLORS[i % COLORS.length]);\n            particlesList.add(particle);\n        }\n        return particlesList;\n    }\n}\n</code></pre>\n<p>Particle class</p>\n<pre><code>public class Particle {\n   private final double radius;\n   private double phi, rho, z;\n   private final Sphere particle;\n   public Particle(double phi, double rho, double z, double radius, Color color) {\n       this.particle = new Sphere(radius);\n       this.radius = radius;\n       this.phi = phi;\n       this.rho = rho;\n       this.z = z;\n       particle.setMaterial(new PhongMaterial(color));\n       particle.setTranslateX(rho * Math.cos(phi));\n       particle.setTranslateY(z);\n       particle.setTranslateZ(rho * Math.sin(phi));\n   }\n   private static double distance(double x1, double y1, double x2, double y2) {\n       x2 -= x1;\n       y2 -= y1;\n       return Math.sqrt(x2 * x2 + y2 * y2);\n   }\n   public double distance(Particle p) { return distance(getPhi()*getRho(), getZ(), p.getPhi()*p.getRho(),p.getZ());}\n   public double getRadius() { return radius; }\n    public double getPhi() { return phi; }\n    public void setPhi(double phi) { this.phi = phi; }\n    public double getRho() { return rho; }\n    public void setRho(double rho) { this.rho = rho; }\n    public double getZ() { return z; }\n    public void setZ(double z) { this.z = z; }\n    public Sphere getParticle() { return particle; }\n}\n</code></pre>\n<p>Cylinder class</p>\n<pre><code>public class Tube {\n    private double radius, height;\n    private final Cylinder tube;\n    private final Color color;\n    public Tube(double radius, double height, Color color) {\n        this.height = height;\n        this.color = color;\n        this.radius = radius;\n        this.tube = new Cylinder(radius,height);\n        tube.setMaterial(new PhongMaterial(color));\n    }\n    public Color getColor() { return color; }\n    public double getRadius() { return radius; }\n    public double getHeight() { return height; }\n    public Cylinder getTube() { return tube; }\n    public void setRadius(double radius) { this.radius = radius; }\n    public void setHeight(double height) { this.height = height; }\n}\n</code></pre>\n<p>The second process is to create a dense packing of randomly scattered particles</p>\n<pre><code>public class Minimization {\n    private double COEFFICIENT_FOR_ANGLE = 1;\n    private double COEFFICIENT_FOR_Z = 1;\n    @SuppressWarnings(&quot;FieldCanBeLocal&quot;)\n    private final double ACCEPTABLE_COEFFICIENT_VALUE_K_ANGEL = 0.0001;\n    @SuppressWarnings(&quot;FieldCanBeLocal&quot;)\n    private final double ACCEPTABLE_COEFFICIENT_VALUE_K_Z = 0.0001;\n    @SuppressWarnings(&quot;FieldCanBeLocal&quot;)\n    private final double ACCEPTABLE_VALUE_OF_ENERGY_DIFFERENCE = 0.0001;\n    @SuppressWarnings(&quot;FieldCanBeLocal&quot;)\n    public static final double MAX_VALUE = 1.7976931348623157E308;\n    private final ObservableList&lt;Particle&gt; poissonDiskCoordinatesParticles;\n    private final int numberOfParticle, degree;\n    private final double heightTube;\n    public Minimization(ObservableList&lt;Particle&gt; poissonDiskCoordinatesParticles, int degree, Tube tube) {\n        this.poissonDiskCoordinatesParticles = poissonDiskCoordinatesParticles;\n        this.degree = degree;\n        numberOfParticle = poissonDiskCoordinatesParticles.size();\n        heightTube = tube.getHeight();\n    }\n    public ObservableList&lt;Particle&gt; minimization () {\n        ObservableList&lt;Particle&gt; list = poissonDiskCoordinatesParticles;\n        double energyOld = MAX_VALUE;\n        double energyNew = energyOfSystem(list);\n        while (COEFFICIENT_FOR_ANGLE &gt; ACCEPTABLE_COEFFICIENT_VALUE_K_ANGEL &amp;&amp; COEFFICIENT_FOR_Z &gt; ACCEPTABLE_COEFFICIENT_VALUE_K_Z &amp;&amp; energyOld &gt; energyNew) {\n            if (energyOld - energyNew &lt; ACCEPTABLE_VALUE_OF_ENERGY_DIFFERENCE) {\n                COEFFICIENT_FOR_Z = COEFFICIENT_FOR_Z/2;\n                COEFFICIENT_FOR_ANGLE = COEFFICIENT_FOR_ANGLE/2;\n            }\n            energyOld = energyNew;\n            stepOfMinimization(list);\n            energyNew = energyOfSystem(list);\n        }\n        return list;\n    }\n    private void stepOfMinimization (ObservableList&lt;Particle&gt; list) {\n        for (int i = 0; i &lt; numberOfParticle; i++) {\n            Particle particle = newParticle(list, i);\n            if (energyOfSystem(list) &lt; energyOfSystem(list,particle,i)) {\n                list.set(i, particle);\n            }\n        }\n    }\n    private Particle newParticle(ObservableList&lt;Particle&gt; coordinates, int i) {\n        Particle particle = coordinates.get(i);\n        double ForcePhi = 0.0;\n        double ForceZ = 0.0;\n        for (int j = 0; j &lt; numberOfParticle; j++) {\n            Particle jParticle = coordinates.get(j);\n            if (i != j) {\n                ForcePhi += (numberOfParticle * particle.getRho() *\n                        (particle.getPhi() - jParticle.getPhi())) / pow(particle.distance(jParticle), degree + 2);\n                ForceZ += (numberOfParticle *\n                        (particle.getZ() - jParticle.getZ())) / pow(particle.distance(jParticle), degree + 2);\n            }\n        }\n        ForceZ += degree / pow(particle.getZ() - heightTube / 2, degree + 1) + degree / pow(particle.getZ() + heightTube / 2, degree + 1);\n        particle.setPhi(particle.getPhi() + COEFFICIENT_FOR_ANGLE * ForcePhi);\n        particle.setZ(particle.getZ() + COEFFICIENT_FOR_Z * ForceZ);\n        return particle;\n    }\n    private double energyOfSystem (ObservableList&lt;Particle&gt; coordinates) {\n        double Energy = 0;\n        for (int i = 0; i &lt; numberOfParticle; i++) {\n            for (int j = 0; j &lt; numberOfParticle; j++) {\n                if (i != j) {\n                    Energy += 1/pow(coordinates.get(i).distance(coordinates.get(j)),degree);\n                }\n            }\n            Energy += degree / pow(coordinates.get(i).getZ() - heightTube / 2, degree) +                    degree / pow(coordinates.get(i).getZ() + heightTube / 2, degree);\n        }\n        return Energy;\n    }\n    private double energyOfSystem (ObservableList&lt;Particle&gt; coordinates, Particle particle, int i) {\n        coordinates.set(i,particle);\n        return energyOfSystem(coordinates);\n    }\n}\n</code></pre>\n<p>Class drawing particles</p>\n<pre><code>public class Mapping {\n    private final ObservableList&lt;Particle&gt; list;\n    private final int numberOfParticle;\n    private final Group group;\n    private final Tube tube;\n    public Mapping(int numberOfParticle, Group group, Tube tube, ObservableList&lt;Particle&gt; list) {\n        this.numberOfParticle = numberOfParticle;\n        this.group = group;\n        this.list = list;\n        this.tube = tube;\n    }\n    public void MappingParticle() {\n        group.getChildren().clear();\n        group.getChildren().add(tube.getTube());\n        for (int i = 0; i &lt; numberOfParticle; i++) {\n            group.getChildren().add(list.get(i).getParticle());\n        }\n    }\n}\n</code></pre>\n<p>And finally the interface</p>\n<pre><code>public class NanoTube extends Application {\n    private double anchorX, anchorY;\n    @SuppressWarnings(&quot;FieldCanBeLocal&quot;)\n    private final int WIDTH = 800;\n    @SuppressWarnings(&quot;FieldCanBeLocal&quot;)\n    private final int HEIGHT = 670;\n    private final int RADIUS = 100;\n    private final Rotate rotateX = new Rotate(0, Rotate.X_AXIS);\n    private final Rotate rotateY = new Rotate(0, Rotate.Y_AXIS);\n    @Override\n    public void start(Stage stage) {\n        var buttonEnter = new Button(&quot;Enter&quot;);\n        var buttonEnergyMinimization = new Button(&quot;Minimization&quot;);\n        var buttonEnergyMinimizationStress = new Button(&quot;Minimization Stress&quot;);\n        var labelRadius = new Label(&quot;Cylinder's radius&quot;);\n        var labelHeight = new Label(&quot;Cylinder's height&quot;);\n        var labelNumber = new Label(&quot;Number Particle&quot;);\n        var textFieldRadius = new TextField();\n        var textFieldHeight = new TextField();\n        var textNumber = new TextField();\n        GridPane Top = new GridPane();\n        for (int i : new int[]{120, 100, 70, 90, 60, 140, 150, 65}) {\n            Top.getColumnConstraints().add(new ColumnConstraints(i));\n        }\n        for (int i = 0; i &lt; 3; i++) {\n            Top.getRowConstraints().add(new RowConstraints(30));\n        }\n        Top.getRowConstraints().add(new RowConstraints(560));\n\n        Arrays.asList(labelRadius, labelHeight, labelNumber).forEach(label -&gt; {\n            GridPane.setHalignment(label, HPos.CENTER);\n            GridPane.setValignment(label, VPos.CENTER);\n        });\n        Arrays.asList(buttonEnter, buttonEnergyMinimization).forEach(button -&gt; {\n            GridPane.setHalignment(button, HPos.CENTER);\n            GridPane.setValignment(button, VPos.CENTER);\n        });\n        Top.add(labelRadius, 0, 0);\n        Top.add(labelHeight, 0, 1);\n        Top.add(labelNumber, 0, 2);\n        Top.add(textFieldRadius, 1, 0);\n        Top.add(textFieldHeight, 1, 1);\n        Top.add(textNumber, 1, 2);\n        Top.add(buttonEnter,2,0,1,3);\n        Top.add(buttonEnergyMinimization,3,0,1,3);\n        PerspectiveCamera camera = new PerspectiveCamera(true);\n        camera.setNearClip(0.1);\n        camera.setFarClip(10000.0);\n        camera.setFieldOfView(20);\n        camera.getTransforms().addAll (rotateX, rotateY, new Translate(0, 0, -500));\n        Tube tube = new Tube(80,80,Color.rgb(225,225,0));\n        Group group = new Group(tube.getTube());\n        SubScene subScene = new SubScene(group, 750, 550, true, SceneAntialiasing.BALANCED);\n        subScene.setFill (Color.rgb (129, 129, 129));\n        subScene.setCamera(camera);\n        var root3d = new Group(subScene);\n        initMouseControl(subScene);\n        Top.add(root3d,0,3,8,1);\n        GridPane.setHalignment(root3d, HPos.CENTER);\n        GridPane.setValignment(root3d, VPos.CENTER);\n        buttonEnter.setOnAction(e -&gt; {\n            int n = Integer.parseInt(textNumber.getText());\n            tube.setHeight(Double.parseDouble(textFieldHeight.getText()));\n            tube.setRadius(Double.parseDouble(textFieldRadius.getText()));\n            ObservableList&lt;Particle&gt; particles = new Generation(tube, n).ParticlesGeneration();\n            new Mapping(n,group,tube,particles).MappingParticle();\n            buttonEnergyMinimization.setOnAction(actionEvent -&gt; {\n                ObservableList&lt;Particle&gt; list = new Minimization(particles,2,tube).minimization();\n                new Mapping(n,group,tube,list).MappingParticle();\n            });\n        });\n        var scene = new Scene(Top, WIDTH,HEIGHT);\n        stage.setScene(scene);\n        stage.show();\n        stage.setTitle(&quot;NanoTube Student Project&quot;);\n    }\n    public static void main(String[] args) {launch();}\n    private void initMouseControl(SubScene scene) {\n        scene.setOnMousePressed(event -&gt; {\n            anchorX = event.getSceneX();\n            anchorY = event.getSceneY();\n        });\n        scene.setOnMouseDragged(event -&gt; {\n            double dx = (anchorX - event.getSceneX());\n            double dy = (anchorY - event.getSceneY());\n            if (event.isPrimaryButtonDown()) {\n                rotateX.setAngle(rotateX.getAngle() -\n                        (dy /RADIUS  * 360) * (Math.PI / 180));\n                rotateY.setAngle(rotateY.getAngle() -\n                        (dx /RADIUS * -360) * (Math.PI / 180));\n            }\n            anchorX = event.getSceneX();\n            anchorY = event.getSceneY();\n        });\n    }\n}\n</code></pre>\n<p>If you click on the &quot;Enter&quot; button, the particles are drawn, but if you then click on the &quot;Minimization&quot; button, the image does not change. I don't understand why this is happening.</p>\n<p>I was advised to write as brief an example of a non-working area as possible. But the examples work, but my program doesn't. I don't understand why the second button ignores drawing particles when using the &quot;Minimization&quot; class. In the end, individually everything works fine.\nI use javafx but I don't use fxml. I will be grateful if you find the time to help me.</p>\n<p>UPD: About the minimization class. As I said earlier, I randomly placed the particles on the surface of the cylinder. I need to minimize the energy of the particle system by the <a href=\"https://en.wikipedia.org/wiki/Gradient_descent\" rel=\"nofollow noreferrer\">&quot;gradient descent&quot;</a> method. In order not to count in a three-dimensional coordinate system, I use UV-mapping of the side of the cylinder. That is, the particles are located on a rectangle with sides &quot;cylinder height&quot; and &quot;cylinder radius * angle (in radians)&quot;, where the angle takes values from 0 to 2pi</p>\n"},{"tags":["java","methods","boolean"],"comments":[{"owner":{"account_id":8775035,"reputation":3254,"user_id":6560579,"display_name":"Ackdari"},"score":1,"creation_date":1588346387,"post_id":61545149,"comment_id":108867614,"body_markdown":"Please explaing the reasoning for `bigCountKilos + smallCountKilos &gt;= goal &amp;&amp; bigCountKilos % goal == 0`","body":"Please explaing the reasoning for <code>bigCountKilos + smallCountKilos &gt;= goal &amp;&amp; bigCountKilos % goal == 0</code>"},{"owner":{"account_id":8775035,"reputation":3254,"user_id":6560579,"display_name":"Ackdari"},"score":0,"creation_date":1588346506,"post_id":61545149,"comment_id":108867670,"body_markdown":"Also, kindly asking: is this somesort of assignment? Also also, think about the case `goal = 20, big = 4, small = 3`","body":"Also, kindly asking: is this somesort of assignment? Also also, think about the case <code>goal = 20, big = 4, small = 3</code>"},{"owner":{"account_id":8775035,"reputation":3254,"user_id":6560579,"display_name":"Ackdari"},"score":0,"creation_date":1588347141,"post_id":61545149,"comment_id":108868030,"body_markdown":"Sorrty ment `goal = 19, big = 4, small = 3`","body":"Sorrty ment <code>goal = 19, big = 4, small = 3</code>"},{"owner":{"account_id":2063361,"reputation":31413,"user_id":1839439,"accept_rate":98,"display_name":"Dharman"},"score":0,"creation_date":1659218431,"post_id":61545149,"comment_id":129243170,"body_markdown":"Please do not completely rewrite questions. This invalidates answers and is not allowed on Stack Overflow.","body":"Please do not completely rewrite questions. This invalidates answers and is not allowed on Stack Overflow."}],"answers":[{"tags":[],"owner":{"account_id":18193410,"reputation":1213,"user_id":13238899,"display_name":"Sidak"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1588346691,"creation_date":1588346691,"answer_id":61545418,"question_id":61545149,"body_markdown":"I feel like your logic behind finding the answer is not correct. The `if` statements don&#39;t cover all the cases and don&#39;t produce the right answer every time.\r\n\r\nA basic approach would be something like:\r\n\r\n- Subtract 5 from goal, and subtract 1 from bigCount while goal &gt; 0 and bigCount &gt; 0\r\n- If goal is still &gt; 0, check if smallCount &gt;= goal. If yes, return true, else false.\r\n","title":"Don&#39;t understand the logic behind the problem","body":"<p>I feel like your logic behind finding the answer is not correct. The <code>if</code> statements don't cover all the cases and don't produce the right answer every time.</p>\n\n<p>A basic approach would be something like:</p>\n\n<ul>\n<li>Subtract 5 from goal, and subtract 1 from bigCount while goal > 0 and bigCount > 0</li>\n<li>If goal is still > 0, check if smallCount >= goal. If yes, return true, else false.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":370919,"reputation":1301,"user_id":719153,"accept_rate":100,"display_name":"Oliveira"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1588360154,"creation_date":1588349039,"answer_id":61546140,"question_id":61545149,"body_markdown":"    private static boolean canPack(\r\n        final int bigCount,\r\n        final int smallCount,\r\n        final int goal\r\n    ) {\r\n\r\n        // return goal - Math.min(goal / 5, bigCount) * 5 &lt;= smallCount;\r\n\r\n        final int numberOfBigNeeded = goal / 5;\r\n        final int numberOfBigUsed = Math.min(numberOfBigNeeded, bigCount);\r\n        final int remainingKilosFromGoalAfterUsingBig = goal - numberOfBigUsed * 5;\r\n        final boolean hasEnoughSmallToCoverRemainingKilosFromGoalAfterUsingBig = remainingKilosFromGoalAfterUsingBig &lt;= smallCount;\r\n        return hasEnoughSmallToCoverRemainingKilosFromGoalAfterUsingBig;\r\n    }","title":"Don&#39;t understand the logic behind the problem","body":"<pre><code>private static boolean canPack(\n    final int bigCount,\n    final int smallCount,\n    final int goal\n) {\n\n    // return goal - Math.min(goal / 5, bigCount) * 5 &lt;= smallCount;\n\n    final int numberOfBigNeeded = goal / 5;\n    final int numberOfBigUsed = Math.min(numberOfBigNeeded, bigCount);\n    final int remainingKilosFromGoalAfterUsingBig = goal - numberOfBigUsed * 5;\n    final boolean hasEnoughSmallToCoverRemainingKilosFromGoalAfterUsingBig = remainingKilosFromGoalAfterUsingBig &lt;= smallCount;\n    return hasEnoughSmallToCoverRemainingKilosFromGoalAfterUsingBig;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":18571461,"reputation":11,"user_id":13533208,"display_name":"ANKUSH KUMAR"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1589369584,"creation_date":1589369584,"answer_id":61773496,"question_id":61545149,"body_markdown":"    int bigCountKilo = bigCount*5;\r\n        if(bigCountKilo+smallCount*1 == goal){\r\n            return true;\r\n        }else if((bigCountKilo&gt;=goal&amp;&amp;bigCountKilo%goal == 0)||(bigCountKilo&gt;=goal&amp;&amp;goal%5&lt;=smallCount)){\r\n            return true;\r\n        }else if(smallCount&gt;=goal){\r\n            return true;\r\n        }else if(bigCountKilo+smallCount&gt;goal&amp;&amp;goal%bigCountKilo&lt;=smallCount){\r\n            return true;\r\n        }else{\r\n            return false;\r\n        }\r\n    }\r\n\r\n\r\n\r\nThis will work for all the conditions. Please try this and if anything wrong Kindly update.","title":"Don&#39;t understand the logic behind the problem","body":"<pre><code>int bigCountKilo = bigCount*5;\n    if(bigCountKilo+smallCount*1 == goal){\n        return true;\n    }else if((bigCountKilo&gt;=goal&amp;&amp;bigCountKilo%goal == 0)||(bigCountKilo&gt;=goal&amp;&amp;goal%5&lt;=smallCount)){\n        return true;\n    }else if(smallCount&gt;=goal){\n        return true;\n    }else if(bigCountKilo+smallCount&gt;goal&amp;&amp;goal%bigCountKilo&lt;=smallCount){\n        return true;\n    }else{\n        return false;\n    }\n}\n</code></pre>\n\n<p>This will work for all the conditions. Please try this and if anything wrong Kindly update.</p>\n"},{"tags":[],"owner":{"account_id":18958367,"reputation":11,"user_id":13834455,"display_name":"Kruthik"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1619850060,"creation_date":1608310508,"answer_id":65360925,"question_id":61545149,"body_markdown":"This code works on the greedy algorithm and passes all the test cases, give it a try:\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    public static boolean canPack(int bigCount, int smallCount, int goal) {\r\n        // Here we are checking if the inputs are valid\r\n        if (bigCount &lt; 0 || smallCount &lt; 0 || goal &lt; 0 || (bigCount*5 + smallCount)  &lt; goal) {\r\n            return false;\r\n        }\r\n\r\n        // Here we multiply bigCount with 5 since each bigCount contains 5 kg\r\n        int bigCountKilo = bigCount * 5;\r\n\r\n        // We check if goal &gt; 5 and then subtract bigCount from it till the goal is less than 5kg\r\n        while (goal &gt;= 5) {\r\n            if (bigCountKilo &gt; 0) {\r\n                goal -= 5;\r\n                bigCount-=1;\r\n            } else {\r\n                break;\r\n            }\r\n        }\r\n\r\n        // Similarly here too we are checking if goal is greater than 0 and then subtracting smallCount values\r\n        while (goal &gt; 0) {\r\n            if (smallCount &gt; 0) {\r\n                goal -= 1;\r\n                smallCount -= 1;\r\n            } else {\r\n                break;\r\n            }\r\n        }\r\n\r\n        // We are returning true if goal is reached (if goal becomes zero)\r\n        return (goal == 0);\r\n    }","title":"Don&#39;t understand the logic behind the problem","body":"<p>This code works on the greedy algorithm and passes all the test cases, give it a try:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static boolean canPack(int bigCount, int smallCount, int goal) {\n    // Here we are checking if the inputs are valid\n    if (bigCount &lt; 0 || smallCount &lt; 0 || goal &lt; 0 || (bigCount*5 + smallCount)  &lt; goal) {\n        return false;\n    }\n\n    // Here we multiply bigCount with 5 since each bigCount contains 5 kg\n    int bigCountKilo = bigCount * 5;\n\n    // We check if goal &gt; 5 and then subtract bigCount from it till the goal is less than 5kg\n    while (goal &gt;= 5) {\n        if (bigCountKilo &gt; 0) {\n            goal -= 5;\n            bigCount-=1;\n        } else {\n            break;\n        }\n    }\n\n    // Similarly here too we are checking if goal is greater than 0 and then subtracting smallCount values\n    while (goal &gt; 0) {\n        if (smallCount &gt; 0) {\n            goal -= 1;\n            smallCount -= 1;\n        } else {\n            break;\n        }\n    }\n\n    // We are returning true if goal is reached (if goal becomes zero)\n    return (goal == 0);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":21150204,"reputation":11,"user_id":15550699,"display_name":"Horv&#225;th Zolt&#225;n"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1618144729,"creation_date":1618144729,"answer_id":67045077,"question_id":61545149,"body_markdown":"\tpublic static boolean canPack(int bigCount, int smallCount, int goal) {\r\n\t\t// Input validation.\r\n\t\tif (bigCount &lt; 0 || smallCount &lt; 0 || goal &lt; 0) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\t// Create a variable for the the bigCount variable to show it in kg.\r\n\t\tint bigCountInKg = bigCount * 5;\r\n\t\t\r\n\t\tif (bigCountInKg &lt; goal) {\r\n\t\t\tint result = goal - bigCountInKg;\r\n\t\t\tif (result &lt;= smallCount) {\r\n\t\t\t\treturn true;\r\n\t\t\t} else {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t} else if (bigCountInKg == goal) {\r\n\t\t\treturn true;\r\n\t\t} else if (bigCountInKg &gt; goal) {\r\n\t\t\tint maxBigCount = goal / 5;\r\n\t\t\tint result = goal - maxBigCount;\r\n\t\t\tif (result &lt;= smallCount) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t}","title":"Don&#39;t understand the logic behind the problem","body":"<pre><code>public static boolean canPack(int bigCount, int smallCount, int goal) {\n    // Input validation.\n    if (bigCount &lt; 0 || smallCount &lt; 0 || goal &lt; 0) {\n        return false;\n    }\n    // Create a variable for the the bigCount variable to show it in kg.\n    int bigCountInKg = bigCount * 5;\n    \n    if (bigCountInKg &lt; goal) {\n        int result = goal - bigCountInKg;\n        if (result &lt;= smallCount) {\n            return true;\n        } else {\n            return false;\n        }\n    } else if (bigCountInKg == goal) {\n        return true;\n    } else if (bigCountInKg &gt; goal) {\n        int maxBigCount = goal / 5;\n        int result = goal - maxBigCount;\n        if (result &lt;= smallCount) {\n            return true;\n        }\n    }\n    return false;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":19223857,"reputation":11,"user_id":14047110,"display_name":"Mrinal Gupta"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1675649070,"creation_date":1619575629,"answer_id":67292839,"question_id":61545149,"body_markdown":"Hey the explanation is pretty simple\r\nI hope you have understood the upper part until the bigCount, smallCount and goal.\r\n\r\nSo let&#39;s begin...\r\nlet&#39;s assume goal = 9kg. It means you have to make a package that contains 9kg of flour.\r\nNow bigCount= 2(means 10kg) and smallCount = 0.\r\n\r\nHow much flour you have (bigCount*5) + smallCount = 10kg\r\ndo you have enough flour to make a package? Yes.\r\nCan you make a package of 9kg? No.\r\nBecause you have two  bags of 5kg each and you cannot take 1kg out from any bag.\r\n\r\nConsider second scenario\r\nlet&#39;s assume goal = 9kg. It means you have to make a package that contains 9kg of flour.\r\nNow bigCount= 1(means 5kg) and smallCount = 5(means 5kg).\r\n\r\nNow you still have 10kg of flour but the question is can you make a package without taking any flour from any bag? this time Yes.\r\n\r\n5kg + 1kg + 1kg + 1kg +1kg = 9kg and 1kg extra.\r\n\r\nSimply telling you can have extra flour but you cannot take flour from bags just to reach the goal.","title":"Don&#39;t understand the logic behind the problem","body":"<p>Hey the explanation is pretty simple\nI hope you have understood the upper part until the bigCount, smallCount and goal.</p>\n<p>So let's begin...\nlet's assume goal = 9kg. It means you have to make a package that contains 9kg of flour.\nNow bigCount= 2(means 10kg) and smallCount = 0.</p>\n<p>How much flour you have (bigCount*5) + smallCount = 10kg\ndo you have enough flour to make a package? Yes.\nCan you make a package of 9kg? No.\nBecause you have two  bags of 5kg each and you cannot take 1kg out from any bag.</p>\n<p>Consider second scenario\nlet's assume goal = 9kg. It means you have to make a package that contains 9kg of flour.\nNow bigCount= 1(means 5kg) and smallCount = 5(means 5kg).</p>\n<p>Now you still have 10kg of flour but the question is can you make a package without taking any flour from any bag? this time Yes.</p>\n<p>5kg + 1kg + 1kg + 1kg +1kg = 9kg and 1kg extra.</p>\n<p>Simply telling you can have extra flour but you cannot take flour from bags just to reach the goal.</p>\n"},{"tags":[],"owner":{"account_id":21602966,"reputation":11,"user_id":15930789,"display_name":"Ayush Anand"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1630516728,"creation_date":1630516728,"answer_id":69018147,"question_id":61545149,"body_markdown":"public static boolean canpack(int bigcount,int smallcount,int goal) {\r\n\t\t\r\n\t\tif(bigcount&lt;0||smallcount&lt;0||goal&lt;0) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tint a=bigcount*5;\r\n\t\tint b=smallcount*1;\r\n\t\tif(a+b&gt;goal&amp;&amp;a&lt;goal) {\r\n\t\t\treturn true;\r\n\t\t}else if(a+b==goal) {\r\n\t\t\treturn true;\r\n\t\t}else {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\nHope it works.If not kindly inform me.","title":"Don&#39;t understand the logic behind the problem","body":"<p>public static boolean canpack(int bigcount,int smallcount,int goal) {</p>\n<pre><code>    if(bigcount&lt;0||smallcount&lt;0||goal&lt;0) {\n        return false;\n    }\n    int a=bigcount*5;\n    int b=smallcount*1;\n    if(a+b&gt;goal&amp;&amp;a&lt;goal) {\n        return true;\n    }else if(a+b==goal) {\n        return true;\n    }else {\n        return false;\n    }\n}\n</code></pre>\n<p>Hope it works.If not kindly inform me.</p>\n"},{"tags":[],"owner":{"account_id":10106122,"reputation":1,"user_id":7468653,"display_name":"Navneet Tyagi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640486540,"creation_date":1640442675,"answer_id":70480675,"question_id":61545149,"body_markdown":"This is the solution for Flour packer issue\r\n\r\n\r\n```java\r\npublic class FlourPacker {\r\n\r\n    public static boolean canPack(int bigCount, int smallCount, int goal) {\r\n        boolean  bool=false;\r\n        int bigCountKilos = bigCount * 5;\r\n    \r\n        if(bigCount == 0 &amp;&amp; smallCount&gt;=goal) {\r\n             bool= true;\r\n        } else if(smallCount==0 &amp;&amp; bigCountKilos&gt;= goal &amp;&amp; goal%bigCountKilos==0) {\r\n            bool= true;\r\n        } else if (bigCount &gt; 0 &amp;&amp; smallCount&gt;0 &amp;&amp; goal &gt;= 0) {\r\n            int bigCountTotal= bigCount*5;\r\n            int total=bigCountTotal+smallCount;\r\n            if(total==goal){\r\n                 bool= true;\r\n            }\r\n\t\t\t\r\n            if(goal/5&lt;bigCount &amp;&amp; goal%5 &lt;=smallCount){\r\n                bool= true;\r\n            }\r\n\t\t\t\r\n            if(bigCountTotal&lt;=goal &amp;&amp; goal-bigCountTotal &lt;=smallCount) {\r\n                bool= true;\r\n            }\r\n        }\r\n        \r\n        return bool;\r\n    }\r\n}\r\n```","title":"Don&#39;t understand the logic behind the problem","body":"<p>This is the solution for Flour packer issue</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class FlourPacker {\n\n    public static boolean canPack(int bigCount, int smallCount, int goal) {\n        boolean  bool=false;\n        int bigCountKilos = bigCount * 5;\n    \n        if(bigCount == 0 &amp;&amp; smallCount&gt;=goal) {\n             bool= true;\n        } else if(smallCount==0 &amp;&amp; bigCountKilos&gt;= goal &amp;&amp; goal%bigCountKilos==0) {\n            bool= true;\n        } else if (bigCount &gt; 0 &amp;&amp; smallCount&gt;0 &amp;&amp; goal &gt;= 0) {\n            int bigCountTotal= bigCount*5;\n            int total=bigCountTotal+smallCount;\n            if(total==goal){\n                 bool= true;\n            }\n            \n            if(goal/5&lt;bigCount &amp;&amp; goal%5 &lt;=smallCount){\n                bool= true;\n            }\n            \n            if(bigCountTotal&lt;=goal &amp;&amp; goal-bigCountTotal &lt;=smallCount) {\n                bool= true;\n            }\n        }\n        \n        return bool;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":24221969,"reputation":1,"user_id":18177034,"display_name":"Ha Ngoc Yen"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1644567709,"creation_date":1644567709,"answer_id":71077026,"question_id":61545149,"body_markdown":"Here is my solution:\r\n```java\r\npublic static boolean canPack(int bigCount, int smallCount, int goal) {\r\n    if ((bigCount &lt; 0) || (smallCount &lt; 0) || (goal &lt; 0)) {\r\n      return false;\r\n    }\r\n\r\n    for (int i = 0; i &lt;= bigCount; i++){\r\n      for (int j = 0; j &lt;= smallCount; j++) {\r\n        if (i*5 + j == goal){\r\n          return true;\r\n        }\r\n      }\r\n    }\r\n    return false;\r\n        \r\n  }\r\n```\r\n\r\nI used nested loop to iterate all possible way to reach the goal. But I found another solution online which is much simpler so I would like to share with you guys too.\r\ncredit to Vincent&#39;s corner.\r\n\r\n```java\r\npublic class FlourPacker {\r\n    public static boolean canPack(int bigCount, int smallCount, int goal) {\r\n\r\n        if (bigCount &lt; 0 || smallCount &lt; 0 || goal &lt; 0) {\r\n            return false;\r\n        }\r\n\r\n        if (bigCount * 5 &gt; goal) {\r\n            return smallCount &gt;= goal % 5;\r\n        }\r\n\r\n        return smallCount &gt;= goal - (bigCount * 5);\r\n    }\r\n}\r\n```","title":"Don&#39;t understand the logic behind the problem","body":"<p>Here is my solution:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static boolean canPack(int bigCount, int smallCount, int goal) {\n    if ((bigCount &lt; 0) || (smallCount &lt; 0) || (goal &lt; 0)) {\n      return false;\n    }\n\n    for (int i = 0; i &lt;= bigCount; i++){\n      for (int j = 0; j &lt;= smallCount; j++) {\n        if (i*5 + j == goal){\n          return true;\n        }\n      }\n    }\n    return false;\n        \n  }\n</code></pre>\n<p>I used nested loop to iterate all possible way to reach the goal. But I found another solution online which is much simpler so I would like to share with you guys too.\ncredit to Vincent's corner.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class FlourPacker {\n    public static boolean canPack(int bigCount, int smallCount, int goal) {\n\n        if (bigCount &lt; 0 || smallCount &lt; 0 || goal &lt; 0) {\n            return false;\n        }\n\n        if (bigCount * 5 &gt; goal) {\n            return smallCount &gt;= goal % 5;\n        }\n\n        return smallCount &gt;= goal - (bigCount * 5);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6796551,"reputation":263,"user_id":5231580,"display_name":"Deepak Play"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1666678635,"creation_date":1666678214,"answer_id":74189718,"question_id":61545149,"body_markdown":"This is my solution without loops, and which is simpler to understand.\r\n\r\n```\r\npublic static boolean canPack(int bigCount , int smallCount , int goal) {\r\n    if (bigCount &lt; 0 || smallCount &lt; 0 || goal &lt; 0 || ((bigCount * 5 + smallCount) &lt; goal)) {\r\n        return false;\r\n     }\r\n\r\n    if (bigCount * 5 == goal) return true;\r\n    int maxBigCount = (int) goal / 5; // max bigcount required in goal\r\n\r\n    int requiredBigCount = (maxBigCount &lt;= bigCount) ? maxBigCount : bigCount; // the amount of bigCount fit into the goal\r\n    \r\n    return (requiredBigCount * 5) + smallCount &gt;= goal; // the fited kg can be equal or higher than the goal\r\n}\r\n\r\n```\r\n\r\nHope this will help you.","title":"Don&#39;t understand the logic behind the problem","body":"<p>This is my solution without loops, and which is simpler to understand.</p>\n<pre><code>public static boolean canPack(int bigCount , int smallCount , int goal) {\n    if (bigCount &lt; 0 || smallCount &lt; 0 || goal &lt; 0 || ((bigCount * 5 + smallCount) &lt; goal)) {\n        return false;\n     }\n\n    if (bigCount * 5 == goal) return true;\n    int maxBigCount = (int) goal / 5; // max bigcount required in goal\n\n    int requiredBigCount = (maxBigCount &lt;= bigCount) ? maxBigCount : bigCount; // the amount of bigCount fit into the goal\n    \n    return (requiredBigCount * 5) + smallCount &gt;= goal; // the fited kg can be equal or higher than the goal\n}\n\n</code></pre>\n<p>Hope this will help you.</p>\n"},{"tags":[],"owner":{"account_id":10428376,"reputation":1,"user_id":7688927,"display_name":"Maarifa"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695752351,"creation_date":1695670520,"answer_id":77175306,"question_id":61545149,"body_markdown":"Without using nested loops, we first ensure the bigCount can fit into the goal size. We run a while loop to test this. Everytime the bigCount fits into the goal size, we increment the count and decrement the goal size, When the bigCount cannot fit into the goal size without spilling over we break. Then we start adding the small counts until the goal is reached or the small size depletes, whichever comes first.\r\n\r\n```java\r\npublic class FlourPacker {\r\n\r\n\tpublic static boolean canPack(int bigCount, int smallCount, int goal) {\r\n\r\n\t\tint sizeOfBigCount = 5 * bigCount;\r\n\t\tint sizeOfSmallCount = 1 * smallCount;\r\n\t\tint totalCount = 0;\r\n\t\tint goalControl = goal;\r\n\r\n\t\tif (totalCount &lt; goal) {\r\n\t\t\twhile (sizeOfBigCount &gt; 0) {\r\n\t\t\t\tif ((totalCount + 5) &lt;= goalControl) {\r\n\t\t\t\t\ttotalCount += 5;\r\n\t\t\t\t\tgoal -= 5;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tsizeOfBigCount -= 5;\r\n\r\n\t\t\t\tif ((totalCount + 5) &gt; goalControl) {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (totalCount &lt; goalControl) {\r\n\t\t\twhile (sizeOfSmallCount &gt; 0) {\r\n\t\t\t\tif ((totalCount + 1) &lt;= goalControl) {\r\n\t\t\t\t\ttotalCount++;\r\n\t\t\t\t\tgoal--;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tsizeOfSmallCount--;\r\n\r\n\t\t\t\tif ((totalCount + 1) &gt; goalControl) {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (totalCount &lt; goalControl) {\r\n\t\t\treturn false;\r\n\t\t} else if (totalCount == goalControl) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tSystem.out.println(canPack(1, 0, 4));\r\n\t}\r\n}\r\n```","title":"Don&#39;t understand the logic behind the problem","body":"<p>Without using nested loops, we first ensure the bigCount can fit into the goal size. We run a while loop to test this. Everytime the bigCount fits into the goal size, we increment the count and decrement the goal size, When the bigCount cannot fit into the goal size without spilling over we break. Then we start adding the small counts until the goal is reached or the small size depletes, whichever comes first.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class FlourPacker {\n\n    public static boolean canPack(int bigCount, int smallCount, int goal) {\n\n        int sizeOfBigCount = 5 * bigCount;\n        int sizeOfSmallCount = 1 * smallCount;\n        int totalCount = 0;\n        int goalControl = goal;\n\n        if (totalCount &lt; goal) {\n            while (sizeOfBigCount &gt; 0) {\n                if ((totalCount + 5) &lt;= goalControl) {\n                    totalCount += 5;\n                    goal -= 5;\n                }\n\n                sizeOfBigCount -= 5;\n\n                if ((totalCount + 5) &gt; goalControl) {\n                    break;\n                }\n            }\n        }\n\n        if (totalCount &lt; goalControl) {\n            while (sizeOfSmallCount &gt; 0) {\n                if ((totalCount + 1) &lt;= goalControl) {\n                    totalCount++;\n                    goal--;\n                }\n\n                sizeOfSmallCount--;\n\n                if ((totalCount + 1) &gt; goalControl) {\n                    break;\n                }\n            }\n        }\n        if (totalCount &lt; goalControl) {\n            return false;\n        } else if (totalCount == goalControl) {\n            return true;\n        }\n        return false;\n    }\n\n    public static void main(String[] args) {\n        System.out.println(canPack(1, 0, 4));\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":17047918,"reputation":13,"user_id":12334293,"display_name":"IyadELwy"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2628,"favorite_count":0,"down_vote_count":4,"up_vote_count":0,"answer_count":11,"score":-4,"last_activity_date":1695752351,"creation_date":1588345756,"question_id":61545149,"body_markdown":"i&#39;m trying to understand what the problem with my code is. \r\nHere is the task and my code:\r\n\r\nWrite a method named canPack with three parameters of type int named bigCount, smallCount, and goal. \r\n\r\n- The parameter bigCount represents the count of big flour bags (5 kilos each).\r\n\r\n- The parameter smallCount represents the count of small flour bags (1 kilo each).\r\n\r\n- The parameter goal represents the goal amount of kilos of flour needed to assemble a package.\r\n\r\nTherefore, the sum of the kilos of bigCount and smallCount must be at least equal to the value of goal. The method should return true if it is possible to make a package with goal kilos of flour.\r\n\r\nIf the sum is greater than goal, ensure that only full bags are used towards the goal amount. For example, if goal = 9, bigCount = 2, and smallCount = 0, the method should return false since each big bag is 5 kilos and cannot be divided. However, if goal = 9, bigCount = 1, and smallCount = 5, the method should return true because of 1 full bigCount bag and 4 full smallCount bags equal goal, and it&#39;s okay if there are additional bags left over.\r\n\r\nIf any of the parameters are negative, return false.\r\n\r\n\r\nEXAMPLE INPUT/OUTPUT:\r\n\r\n* canPack (1, 0, 4); should return false since bigCount is 1 (big bag of 5 kilos) and goal is 4 kilos.\r\n\r\n* canPack (1, 0, 5); should return true since bigCount is 1 (big bag of 5 kilos) and goal is 5 kilos.\r\n\r\n* canPack (0, 5, 4); should return true since smallCount is 5 (small bags of 1 kilo) and goal is 4 kilos, and we have 1 bag left which is ok as mentioned above.\r\n\r\n* canPack (2, 2, 11); should return true since bigCount is 2 (big bags 5 kilos each) and smallCount is 2 (small bags of 1 kilo), makes in total 12 kilos and goal is 11 kilos. \r\n\r\n* canPack (-3, 2, 12); should return false since bigCount is negative.\r\n\r\n\r\n```\r\n\tpublic static boolean canPack(int bigCount, int smallCount, int goal) {\r\n\t\t\r\n\t\tint bigCountKilos = bigCount * 5;\r\n\t\tint smallCountKilos = smallCount;\r\n\t\t\r\n\t\tif (bigCount &lt; 0 || smallCount &lt; 0 || goal &lt; 0) {\r\n\t\t\treturn false;\r\n\t\t} else {\r\n\t\t\t\r\n\t\t\tif (bigCountKilos &gt;= goal &amp;&amp; bigCountKilos % goal == 0) {\r\n\t\t\t\treturn true;\r\n\t\t\t} else if (bigCountKilos + smallCountKilos &gt;= goal &amp;&amp; bigCountKilos % goal == 0) {\r\n\t\t\t\treturn true;\r\n\t\t\t} else if (bigCountKilos &lt; goal &amp;&amp; bigCountKilos + smallCountKilos &gt;= goal) {\r\n\t\t\t\treturn true;\r\n\t\t\t} else {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tSystem.out.println(canPack(4, 18, 19));\r\n\t}\r\n```\r\n\r\nThe instance for 4,18,19 should return true but it doesn&#39;t. Could someone tell me what i&#39;m doing wrong?\r\nThanks in advance","title":"Don&#39;t understand the logic behind the problem","body":"<p>i'm trying to understand what the problem with my code is.\nHere is the task and my code:</p>\n<p>Write a method named canPack with three parameters of type int named bigCount, smallCount, and goal.</p>\n<ul>\n<li><p>The parameter bigCount represents the count of big flour bags (5 kilos each).</p>\n</li>\n<li><p>The parameter smallCount represents the count of small flour bags (1 kilo each).</p>\n</li>\n<li><p>The parameter goal represents the goal amount of kilos of flour needed to assemble a package.</p>\n</li>\n</ul>\n<p>Therefore, the sum of the kilos of bigCount and smallCount must be at least equal to the value of goal. The method should return true if it is possible to make a package with goal kilos of flour.</p>\n<p>If the sum is greater than goal, ensure that only full bags are used towards the goal amount. For example, if goal = 9, bigCount = 2, and smallCount = 0, the method should return false since each big bag is 5 kilos and cannot be divided. However, if goal = 9, bigCount = 1, and smallCount = 5, the method should return true because of 1 full bigCount bag and 4 full smallCount bags equal goal, and it's okay if there are additional bags left over.</p>\n<p>If any of the parameters are negative, return false.</p>\n<p>EXAMPLE INPUT/OUTPUT:</p>\n<ul>\n<li><p>canPack (1, 0, 4); should return false since bigCount is 1 (big bag of 5 kilos) and goal is 4 kilos.</p>\n</li>\n<li><p>canPack (1, 0, 5); should return true since bigCount is 1 (big bag of 5 kilos) and goal is 5 kilos.</p>\n</li>\n<li><p>canPack (0, 5, 4); should return true since smallCount is 5 (small bags of 1 kilo) and goal is 4 kilos, and we have 1 bag left which is ok as mentioned above.</p>\n</li>\n<li><p>canPack (2, 2, 11); should return true since bigCount is 2 (big bags 5 kilos each) and smallCount is 2 (small bags of 1 kilo), makes in total 12 kilos and goal is 11 kilos.</p>\n</li>\n<li><p>canPack (-3, 2, 12); should return false since bigCount is negative.</p>\n</li>\n</ul>\n<pre><code>    public static boolean canPack(int bigCount, int smallCount, int goal) {\n        \n        int bigCountKilos = bigCount * 5;\n        int smallCountKilos = smallCount;\n        \n        if (bigCount &lt; 0 || smallCount &lt; 0 || goal &lt; 0) {\n            return false;\n        } else {\n            \n            if (bigCountKilos &gt;= goal &amp;&amp; bigCountKilos % goal == 0) {\n                return true;\n            } else if (bigCountKilos + smallCountKilos &gt;= goal &amp;&amp; bigCountKilos % goal == 0) {\n                return true;\n            } else if (bigCountKilos &lt; goal &amp;&amp; bigCountKilos + smallCountKilos &gt;= goal) {\n                return true;\n            } else {\n                return false;\n            }\n        }\n    }\n\n    public static void main(String[] args) {\n        System.out.println(canPack(4, 18, 19));\n    }\n</code></pre>\n<p>The instance for 4,18,19 should return true but it doesn't. Could someone tell me what i'm doing wrong?\nThanks in advance</p>\n"},{"tags":["java","spring","reactive-programming","spring-webflux"],"answers":[{"tags":[],"owner":{"account_id":3298176,"reputation":7136,"user_id":2774914,"accept_rate":94,"display_name":"diziaq"},"down_vote_count":0,"up_vote_count":11,"is_accepted":true,"score":11,"last_activity_date":1639820296,"creation_date":1587204841,"answer_id":61287477,"question_id":61156827,"body_markdown":"A bit complex for such a simple case, but it took me to implement 5 classes, to extract a body from `ClientRequest`.\r\n\r\nIt seems to be too much, and I&#39;m still curious if there is a short solution for the problem. You&#39;re welcome to propose another answer to this question, so I could accept it.\r\n\r\nUnfortunately, it must be said that the design of `ClientRequest`, `BodyInserters` and most of the other stuff from `org.springframework.web.reactive.***` has a large room for improvement. At the moment it is just a pile of interfaces with tons of methods per each, and it usually takes a lot of efforts to test code, depending on those classes.\r\n\r\nThe main goal it to get this method working:\r\n\r\n    static &lt;T&gt; T extractBody(ClientRequest request, Class&lt;T&gt; clazz) {\r\n \r\n      InsertionReceiver&lt;T&gt; receiver = InsertionReceiver.forClass(clazz);\r\n      return receiver.receiveValue(request.body());\r\n    }\r\n\r\nHere is the implementation of `InsertionReceiver`:\r\n\r\n----\r\n1.\r\n\r\n    import org.springframework.http.ReactiveHttpOutputMessage;\r\n    import org.springframework.web.reactive.function.BodyInserter;\r\n\r\n    public interface InsertionReceiver&lt;T&gt; {\r\n    \r\n      T receiveValue(BodyInserter&lt;?, ? extends ReactiveHttpOutputMessage&gt; bodyInserter);\r\n    \r\n      static &lt;T&gt; InsertionReceiver&lt;T&gt; forClass(Class&lt;T&gt; clazz) {\r\n        return new SimpleValueReceiver&lt;&gt;(clazz);\r\n      }\r\n    }\r\n\r\n----\r\n2.\r\n\r\n    import java.util.concurrent.atomic.AtomicReference;\r\n    import org.springframework.http.ReactiveHttpOutputMessage;\r\n    import org.springframework.web.reactive.function.BodyInserter;\r\n        \r\n    class SimpleValueReceiver&lt;T&gt; implements InsertionReceiver&lt;T&gt; {\r\n    \r\n      private static final Object DUMMY = new Object();\r\n    \r\n      private final Class&lt;T&gt; clazz;\r\n      private final AtomicReference&lt;Object&gt; reference;\r\n    \r\n      SimpleValueReceiver(Class&lt;T&gt; clazz) {\r\n        this.clazz = clazz;\r\n        this.reference = new AtomicReference&lt;&gt;(DUMMY);\r\n      }\r\n    \r\n      @Override\r\n      public T receiveValue(BodyInserter&lt;?, ? extends ReactiveHttpOutputMessage&gt; bodyInserter) {\r\n        demandValueFrom(bodyInserter);\r\n    \r\n        return receivedValue();\r\n      }\r\n    \r\n      private void demandValueFrom(BodyInserter&lt;?, ? extends ReactiveHttpOutputMessage&gt; bodyInserter) {    \r\n        var inserter = (BodyInserter&lt;?, ReactiveHttpOutputMessage&gt;) bodyInserter;\r\n    \r\n        inserter.insert(\r\n            MinimalHttpOutputMessage.INSTANCE,\r\n            new SingleWriterContext(new WriteToConsumer&lt;&gt;(reference::set))\r\n        );\r\n      }\r\n    \r\n      private T receivedValue() {\r\n        Object value = reference.get();\r\n        reference.set(DUMMY);\r\n    \r\n        T validatedValue;\r\n    \r\n        if (value == DUMMY) {\r\n          throw new RuntimeException(&quot;Value was not received, Check your inserter worked properly&quot;);\r\n        } else if (!clazz.isAssignableFrom(value.getClass())) {\r\n          throw new RuntimeException(\r\n              &quot;Value has unexpected type (&quot;\r\n                  + value.getClass().getTypeName()\r\n                  + &quot;) instead of (&quot; + clazz.getTypeName() + &quot;)&quot;);\r\n        } else {\r\n          validatedValue = clazz.cast(value);\r\n        }\r\n    \r\n        return validatedValue;\r\n      }\r\n    }\r\n\r\n---\r\n3.\r\n\r\n    class WriteToConsumer&lt;T&gt; implements HttpMessageWriter&lt;T&gt; {\r\n    \r\n      private final Consumer&lt;T&gt; consumer;\r\n      private final List&lt;MediaType&gt; mediaTypes;\r\n    \r\n      WriteToConsumer(Consumer&lt;T&gt; consumer) {\r\n        this.consumer = consumer;\r\n        this.mediaTypes = Collections.singletonList(MediaType.ALL);\r\n      }\r\n    \r\n      @Override\r\n      public List&lt;MediaType&gt; getWritableMediaTypes() {\r\n        return mediaTypes;\r\n      }\r\n    \r\n      @Override\r\n      public boolean canWrite(ResolvableType elementType, MediaType mediaType) {\r\n        return true;\r\n      }\r\n    \r\n      @Override\r\n      public Mono&lt;Void&gt; write(\r\n          Publisher&lt;? extends T&gt; inputStream,\r\n          ResolvableType elementType,\r\n          MediaType mediaType,\r\n          ReactiveHttpOutputMessage message,\r\n          Map&lt;String, Object&gt; hints\r\n      ) {\r\n        inputStream.subscribe(new OneValueConsumption&lt;&gt;(consumer));\r\n        return Mono.empty();\r\n      }\r\n    }\r\n\r\n---\r\n4.\r\n\r\n    class MinimalHttpOutputMessage implements ReactiveHttpOutputMessage {\r\n    \r\n      public static MinimalHttpOutputMessage INSTANCE = new MinimalHttpOutputMessage();\r\n    \r\n      private MinimalHttpOutputMessage() {\r\n      }\r\n    \r\n      @Override\r\n      public HttpHeaders getHeaders() {\r\n        return HttpHeaders.EMPTY;\r\n      }\r\n    \r\n      // other overridden methods are omitted as they do nothing,\r\n      // i.e. return null, false, or have empty bodies\r\n    }\r\n\r\n---\r\n5.\r\n\r\n    class OneValueConsumption&lt;T&gt; implements Subscriber&lt;T&gt; {\r\n    \r\n      private final Consumer&lt;T&gt; consumer;\r\n      private int remainedAccepts;\r\n    \r\n      public OneValueConsumption(Consumer&lt;T&gt; consumer) {\r\n        this.consumer = Objects.requireNonNull(consumer);\r\n        this.remainedAccepts = 1;\r\n      }\r\n    \r\n      @Override\r\n      public void onSubscribe(Subscription s) {\r\n        s.request(1);\r\n      }\r\n    \r\n      @Override\r\n      public void onNext(T o) {\r\n        if (remainedAccepts &gt; 0) {\r\n          consumer.accept(o);\r\n          remainedAccepts -= 1;\r\n        } else {\r\n          throw new RuntimeException(&quot;No more values can be consumed&quot;);\r\n        }\r\n      }\r\n    \r\n      @Override\r\n      public void onError(Throwable t) {\r\n        throw new RuntimeException(&quot;Single value was not consumed&quot;, t);\r\n      }\r\n    \r\n      @Override\r\n      public void onComplete() {\r\n        // nothing\r\n      }\r\n    }\r\n\r\n---\r\n6.\r\n\r\n    class SingleWriterContext implements BodyInserter.Context {\r\n    \r\n      private final List&lt;HttpMessageWriter&lt;?&gt;&gt; singleWriterList;\r\n    \r\n      SingleWriterContext(HttpMessageWriter&lt;?&gt; writer) {\r\n        this.singleWriterList = List.of(writer);\r\n      }\r\n    \r\n      @Override\r\n      public List&lt;HttpMessageWriter&lt;?&gt;&gt; messageWriters() {\r\n        return singleWriterList;\r\n      }\r\n    \r\n      @Override\r\n      public Optional&lt;ServerHttpRequest&gt; serverRequest() {\r\n        return Optional.empty();\r\n      }\r\n    \r\n      @Override\r\n      public Map&lt;String, Object&gt; hints() {\r\n        return null;\r\n      }\r\n    }\r\n\r\n","title":"Hot to get body as String from spring reactive ClientRequest?","body":"<p>A bit complex for such a simple case, but it took me to implement 5 classes, to extract a body from <code>ClientRequest</code>.</p>\n<p>It seems to be too much, and I'm still curious if there is a short solution for the problem. You're welcome to propose another answer to this question, so I could accept it.</p>\n<p>Unfortunately, it must be said that the design of <code>ClientRequest</code>, <code>BodyInserters</code> and most of the other stuff from <code>org.springframework.web.reactive.***</code> has a large room for improvement. At the moment it is just a pile of interfaces with tons of methods per each, and it usually takes a lot of efforts to test code, depending on those classes.</p>\n<p>The main goal it to get this method working:</p>\n<pre><code>static &lt;T&gt; T extractBody(ClientRequest request, Class&lt;T&gt; clazz) {\n\n  InsertionReceiver&lt;T&gt; receiver = InsertionReceiver.forClass(clazz);\n  return receiver.receiveValue(request.body());\n}\n</code></pre>\n<p>Here is the implementation of <code>InsertionReceiver</code>:</p>\n<hr />\n<ol>\n<li></li>\n</ol>\n<pre><code>import org.springframework.http.ReactiveHttpOutputMessage;\nimport org.springframework.web.reactive.function.BodyInserter;\n\npublic interface InsertionReceiver&lt;T&gt; {\n\n  T receiveValue(BodyInserter&lt;?, ? extends ReactiveHttpOutputMessage&gt; bodyInserter);\n\n  static &lt;T&gt; InsertionReceiver&lt;T&gt; forClass(Class&lt;T&gt; clazz) {\n    return new SimpleValueReceiver&lt;&gt;(clazz);\n  }\n}\n</code></pre>\n<hr />\n<ol start=\"2\">\n<li></li>\n</ol>\n<pre><code>import java.util.concurrent.atomic.AtomicReference;\nimport org.springframework.http.ReactiveHttpOutputMessage;\nimport org.springframework.web.reactive.function.BodyInserter;\n    \nclass SimpleValueReceiver&lt;T&gt; implements InsertionReceiver&lt;T&gt; {\n\n  private static final Object DUMMY = new Object();\n\n  private final Class&lt;T&gt; clazz;\n  private final AtomicReference&lt;Object&gt; reference;\n\n  SimpleValueReceiver(Class&lt;T&gt; clazz) {\n    this.clazz = clazz;\n    this.reference = new AtomicReference&lt;&gt;(DUMMY);\n  }\n\n  @Override\n  public T receiveValue(BodyInserter&lt;?, ? extends ReactiveHttpOutputMessage&gt; bodyInserter) {\n    demandValueFrom(bodyInserter);\n\n    return receivedValue();\n  }\n\n  private void demandValueFrom(BodyInserter&lt;?, ? extends ReactiveHttpOutputMessage&gt; bodyInserter) {    \n    var inserter = (BodyInserter&lt;?, ReactiveHttpOutputMessage&gt;) bodyInserter;\n\n    inserter.insert(\n        MinimalHttpOutputMessage.INSTANCE,\n        new SingleWriterContext(new WriteToConsumer&lt;&gt;(reference::set))\n    );\n  }\n\n  private T receivedValue() {\n    Object value = reference.get();\n    reference.set(DUMMY);\n\n    T validatedValue;\n\n    if (value == DUMMY) {\n      throw new RuntimeException(&quot;Value was not received, Check your inserter worked properly&quot;);\n    } else if (!clazz.isAssignableFrom(value.getClass())) {\n      throw new RuntimeException(\n          &quot;Value has unexpected type (&quot;\n              + value.getClass().getTypeName()\n              + &quot;) instead of (&quot; + clazz.getTypeName() + &quot;)&quot;);\n    } else {\n      validatedValue = clazz.cast(value);\n    }\n\n    return validatedValue;\n  }\n}\n</code></pre>\n<hr />\n<ol start=\"3\">\n<li></li>\n</ol>\n<pre><code>class WriteToConsumer&lt;T&gt; implements HttpMessageWriter&lt;T&gt; {\n\n  private final Consumer&lt;T&gt; consumer;\n  private final List&lt;MediaType&gt; mediaTypes;\n\n  WriteToConsumer(Consumer&lt;T&gt; consumer) {\n    this.consumer = consumer;\n    this.mediaTypes = Collections.singletonList(MediaType.ALL);\n  }\n\n  @Override\n  public List&lt;MediaType&gt; getWritableMediaTypes() {\n    return mediaTypes;\n  }\n\n  @Override\n  public boolean canWrite(ResolvableType elementType, MediaType mediaType) {\n    return true;\n  }\n\n  @Override\n  public Mono&lt;Void&gt; write(\n      Publisher&lt;? extends T&gt; inputStream,\n      ResolvableType elementType,\n      MediaType mediaType,\n      ReactiveHttpOutputMessage message,\n      Map&lt;String, Object&gt; hints\n  ) {\n    inputStream.subscribe(new OneValueConsumption&lt;&gt;(consumer));\n    return Mono.empty();\n  }\n}\n</code></pre>\n<hr />\n<ol start=\"4\">\n<li></li>\n</ol>\n<pre><code>class MinimalHttpOutputMessage implements ReactiveHttpOutputMessage {\n\n  public static MinimalHttpOutputMessage INSTANCE = new MinimalHttpOutputMessage();\n\n  private MinimalHttpOutputMessage() {\n  }\n\n  @Override\n  public HttpHeaders getHeaders() {\n    return HttpHeaders.EMPTY;\n  }\n\n  // other overridden methods are omitted as they do nothing,\n  // i.e. return null, false, or have empty bodies\n}\n</code></pre>\n<hr />\n<ol start=\"5\">\n<li></li>\n</ol>\n<pre><code>class OneValueConsumption&lt;T&gt; implements Subscriber&lt;T&gt; {\n\n  private final Consumer&lt;T&gt; consumer;\n  private int remainedAccepts;\n\n  public OneValueConsumption(Consumer&lt;T&gt; consumer) {\n    this.consumer = Objects.requireNonNull(consumer);\n    this.remainedAccepts = 1;\n  }\n\n  @Override\n  public void onSubscribe(Subscription s) {\n    s.request(1);\n  }\n\n  @Override\n  public void onNext(T o) {\n    if (remainedAccepts &gt; 0) {\n      consumer.accept(o);\n      remainedAccepts -= 1;\n    } else {\n      throw new RuntimeException(&quot;No more values can be consumed&quot;);\n    }\n  }\n\n  @Override\n  public void onError(Throwable t) {\n    throw new RuntimeException(&quot;Single value was not consumed&quot;, t);\n  }\n\n  @Override\n  public void onComplete() {\n    // nothing\n  }\n}\n</code></pre>\n<hr />\n<ol start=\"6\">\n<li></li>\n</ol>\n<pre><code>class SingleWriterContext implements BodyInserter.Context {\n\n  private final List&lt;HttpMessageWriter&lt;?&gt;&gt; singleWriterList;\n\n  SingleWriterContext(HttpMessageWriter&lt;?&gt; writer) {\n    this.singleWriterList = List.of(writer);\n  }\n\n  @Override\n  public List&lt;HttpMessageWriter&lt;?&gt;&gt; messageWriters() {\n    return singleWriterList;\n  }\n\n  @Override\n  public Optional&lt;ServerHttpRequest&gt; serverRequest() {\n    return Optional.empty();\n  }\n\n  @Override\n  public Map&lt;String, Object&gt; hints() {\n    return null;\n  }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":20498713,"reputation":41,"user_id":15043074,"display_name":"0x233"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1678538794,"creation_date":1640170729,"answer_id":70447970,"question_id":61156827,"body_markdown":"I found a relatively simple way to do this, that is to imitate `BodyInserters.fromValue()` to implement your own `BodyInserter`.\r\n\r\n    import java.util.List;\r\n    import java.util.stream.Collectors;\r\n    import org.reactivestreams.Publisher;\r\n    import org.springframework.core.ResolvableType;\r\n    import org.springframework.http.MediaType;\r\n    import org.springframework.http.ReactiveHttpOutputMessage;\r\n    import org.springframework.http.codec.HttpMessageWriter;\r\n    import org.springframework.http.server.reactive.ServerHttpResponse;\r\n    import org.springframework.lang.Nullable;\r\n    import org.springframework.web.reactive.function.BodyInserter;\r\n    import org.springframework.web.reactive.function.UnsupportedMediaTypeException;\r\n    import reactor.core.publisher.Mono;\r\n\r\n    public static class CustomerInserter&lt;T&gt; implements BodyInserter&lt;T, ReactiveHttpOutputMessage&gt; {\r\n\r\n        private T body;\r\n\r\n        private CustomerInserter(T body) {\r\n            this.body = body;\r\n        }\r\n\r\n        public static &lt;T&gt; CustomerInserter&lt;T&gt; fromValue(T body) {\r\n            return new CustomerInserter&lt;T&gt;(body);\r\n        }\r\n\r\n        public T getBody() {\r\n            return this.body;\r\n        }\r\n\r\n        @Override\r\n        public Mono&lt;Void&gt; insert(ReactiveHttpOutputMessage outputMessage, Context context) {\r\n            Mono&lt;T&gt; publisher = Mono.just(this.body);\r\n            MediaType mediaType = outputMessage.getHeaders().getContentType();\r\n            ResolvableType bodyType = ResolvableType.forInstance(this.body);\r\n            return context.messageWriters().stream()\r\n                    .filter(messageWriter -&gt; messageWriter.canWrite(bodyType, mediaType))\r\n                    .findFirst()\r\n                    .map(item -&gt; (HttpMessageWriter&lt;T&gt;) item)\r\n                    .map(writer -&gt; this.write(publisher, bodyType, mediaType, outputMessage, context, writer))\r\n                    .orElseGet(() -&gt; Mono.error(unsupportedError(bodyType, context, mediaType)));\r\n        }\r\n\r\n        private Mono&lt;Void&gt; write(Publisher&lt;? extends T&gt; input, ResolvableType type,\r\n                                            @Nullable MediaType mediaType, ReactiveHttpOutputMessage message,\r\n                                            BodyInserter.Context context, HttpMessageWriter&lt;T&gt; writer) {\r\n\r\n            return context.serverRequest()\r\n                    .map(request -&gt; {\r\n                        ServerHttpResponse response = (ServerHttpResponse) message;\r\n                        return writer.write(input, type, type, mediaType, request, response, context.hints());\r\n                    })\r\n                    .orElseGet(() -&gt; writer.write(input, type, mediaType, message, context.hints()));\r\n        }\r\n\r\n        private UnsupportedMediaTypeException unsupportedError(ResolvableType bodyType,\r\n                                                       BodyInserter.Context context, @Nullable MediaType mediaType) {\r\n\r\n            List&lt;MediaType&gt; supportedMediaTypes = context.messageWriters().stream()\r\n                    .flatMap(reader -&gt; reader.getWritableMediaTypes(bodyType).stream())\r\n                    .collect(Collectors.toList());\r\n\r\n            return new UnsupportedMediaTypeException(mediaType, supportedMediaTypes, bodyType);\r\n        }\r\n    }\r\n\r\nsimple unit testing.\r\n\r\n    Response response = webClient.post()\r\n                .uri(&quot;/xxx&quot;)\r\n                .body(CustomerInserter.fromValue(body)) //\r\n                .retrieve()\r\n                .bodyToMono(Response.class)\r\n                .block();\r\n\r\n    WebClient webClient = WebClient.builder()\r\n                .baseUrl(&quot;http://127.0.0.1:8080&quot;)\r\n                .filter((request, next) -&gt; {\r\n                    CustomerInserter&lt;?&gt; inserter = (CustomerInserter&lt;?&gt;) request.body();\r\n                    // Some things can be done here\r\n                    Object body = inserter.getBody();\r\n                    return next.exchange(request);\r\n                }).build();","title":"Hot to get body as String from spring reactive ClientRequest?","body":"<p>I found a relatively simple way to do this, that is to imitate <code>BodyInserters.fromValue()</code> to implement your own <code>BodyInserter</code>.</p>\n<pre><code>import java.util.List;\nimport java.util.stream.Collectors;\nimport org.reactivestreams.Publisher;\nimport org.springframework.core.ResolvableType;\nimport org.springframework.http.MediaType;\nimport org.springframework.http.ReactiveHttpOutputMessage;\nimport org.springframework.http.codec.HttpMessageWriter;\nimport org.springframework.http.server.reactive.ServerHttpResponse;\nimport org.springframework.lang.Nullable;\nimport org.springframework.web.reactive.function.BodyInserter;\nimport org.springframework.web.reactive.function.UnsupportedMediaTypeException;\nimport reactor.core.publisher.Mono;\n\npublic static class CustomerInserter&lt;T&gt; implements BodyInserter&lt;T, ReactiveHttpOutputMessage&gt; {\n\n    private T body;\n\n    private CustomerInserter(T body) {\n        this.body = body;\n    }\n\n    public static &lt;T&gt; CustomerInserter&lt;T&gt; fromValue(T body) {\n        return new CustomerInserter&lt;T&gt;(body);\n    }\n\n    public T getBody() {\n        return this.body;\n    }\n\n    @Override\n    public Mono&lt;Void&gt; insert(ReactiveHttpOutputMessage outputMessage, Context context) {\n        Mono&lt;T&gt; publisher = Mono.just(this.body);\n        MediaType mediaType = outputMessage.getHeaders().getContentType();\n        ResolvableType bodyType = ResolvableType.forInstance(this.body);\n        return context.messageWriters().stream()\n                .filter(messageWriter -&gt; messageWriter.canWrite(bodyType, mediaType))\n                .findFirst()\n                .map(item -&gt; (HttpMessageWriter&lt;T&gt;) item)\n                .map(writer -&gt; this.write(publisher, bodyType, mediaType, outputMessage, context, writer))\n                .orElseGet(() -&gt; Mono.error(unsupportedError(bodyType, context, mediaType)));\n    }\n\n    private Mono&lt;Void&gt; write(Publisher&lt;? extends T&gt; input, ResolvableType type,\n                                        @Nullable MediaType mediaType, ReactiveHttpOutputMessage message,\n                                        BodyInserter.Context context, HttpMessageWriter&lt;T&gt; writer) {\n\n        return context.serverRequest()\n                .map(request -&gt; {\n                    ServerHttpResponse response = (ServerHttpResponse) message;\n                    return writer.write(input, type, type, mediaType, request, response, context.hints());\n                })\n                .orElseGet(() -&gt; writer.write(input, type, mediaType, message, context.hints()));\n    }\n\n    private UnsupportedMediaTypeException unsupportedError(ResolvableType bodyType,\n                                                   BodyInserter.Context context, @Nullable MediaType mediaType) {\n\n        List&lt;MediaType&gt; supportedMediaTypes = context.messageWriters().stream()\n                .flatMap(reader -&gt; reader.getWritableMediaTypes(bodyType).stream())\n                .collect(Collectors.toList());\n\n        return new UnsupportedMediaTypeException(mediaType, supportedMediaTypes, bodyType);\n    }\n}\n</code></pre>\n<p>simple unit testing.</p>\n<pre><code>Response response = webClient.post()\n            .uri(&quot;/xxx&quot;)\n            .body(CustomerInserter.fromValue(body)) //\n            .retrieve()\n            .bodyToMono(Response.class)\n            .block();\n\nWebClient webClient = WebClient.builder()\n            .baseUrl(&quot;http://127.0.0.1:8080&quot;)\n            .filter((request, next) -&gt; {\n                CustomerInserter&lt;?&gt; inserter = (CustomerInserter&lt;?&gt;) request.body();\n                // Some things can be done here\n                Object body = inserter.getBody();\n                return next.exchange(request);\n            }).build();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":29009948,"reputation":11,"user_id":22221652,"display_name":"Yuliia Panchenko"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1695752337,"creation_date":1689250032,"answer_id":76679200,"question_id":61156827,"body_markdown":"The simple wrapper can be implemented to hold and get the body object:\r\n\r\n    public class BodyInserterWrapper&lt;T&gt; implements BodyInserter&lt;T, ReactiveHttpOutputMessage&gt; {\r\n    \r\n        private final BodyInserter&lt;T, ReactiveHttpOutputMessage&gt; delegate;\r\n        @Getter\r\n        private final T body;\r\n    \r\n        public BodyInserterWrapper(T body) {\r\n            this.body = body;\r\n            this.delegate = BodyInserters.fromObject(body);\r\n        }\r\n    \r\n        @Override\r\n        public Mono&lt;Void&gt; insert(ReactiveHttpOutputMessage outputMessage, Context context) {\r\n            return this.delegate.insert(outputMessage, context);\r\n        }\r\n    }\r\n\r\n","title":"Hot to get body as String from spring reactive ClientRequest?","body":"<p>The simple wrapper can be implemented to hold and get the body object:</p>\n<pre><code>public class BodyInserterWrapper&lt;T&gt; implements BodyInserter&lt;T, ReactiveHttpOutputMessage&gt; {\n\n    private final BodyInserter&lt;T, ReactiveHttpOutputMessage&gt; delegate;\n    @Getter\n    private final T body;\n\n    public BodyInserterWrapper(T body) {\n        this.body = body;\n        this.delegate = BodyInserters.fromObject(body);\n    }\n\n    @Override\n    public Mono&lt;Void&gt; insert(ReactiveHttpOutputMessage outputMessage, Context context) {\n        return this.delegate.insert(outputMessage, context);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":3298176,"reputation":7136,"user_id":2774914,"accept_rate":94,"display_name":"diziaq"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":12980,"favorite_count":0,"down_vote_count":0,"up_vote_count":13,"accepted_answer_id":61287477,"answer_count":3,"score":13,"last_activity_date":1695752337,"creation_date":1586608206,"question_id":61156827,"body_markdown":"In a test method an instance of `org.springframework.web.reactive.function.client.ClientRequest` is received.\r\n\r\nI want to verify its HttpMethod, URI and body.\r\n\r\nIt is quite obvious how to get everything except for the body.\r\n \r\n\r\n    ClientRequest request = makeInstance(...);\r\n\r\n    assertEquals(HttpMethod.POST, request.method());\r\n    assertEquals(&quot;somewhere/else&quot;, request.url().toString());\r\n\r\n    // ? unclear how to extract body using the BodyInserter\r\n\r\n    BodyInserter&lt;?, ? super ClientHttpRequest&gt; inserter = request.body();\r\n\r\n    inserter.insert(%outputMessage%, %context%);\r\n\r\n\r\nI have found in sources of Spring [how BodyInserters are tested][1]. It is more or less clear how to create a `BodyInserter.Context` (the second parameter), but I cannot understand how to construct the first parameter, so the request body could be extracted through it.\r\n \r\nPlease, show a conventional (or at least usable) way to get request body from a `ClientRequest` instance.\r\n\r\n  [1]: https://github.com/spring-projects/spring-framework/blob/master/spring-webflux/src/test/java/org/springframework/web/reactive/function/BodyInsertersTests.java","title":"Hot to get body as String from spring reactive ClientRequest?","body":"<p>In a test method an instance of <code>org.springframework.web.reactive.function.client.ClientRequest</code> is received.</p>\n\n<p>I want to verify its HttpMethod, URI and body.</p>\n\n<p>It is quite obvious how to get everything except for the body.</p>\n\n<pre><code>ClientRequest request = makeInstance(...);\n\nassertEquals(HttpMethod.POST, request.method());\nassertEquals(\"somewhere/else\", request.url().toString());\n\n// ? unclear how to extract body using the BodyInserter\n\nBodyInserter&lt;?, ? super ClientHttpRequest&gt; inserter = request.body();\n\ninserter.insert(%outputMessage%, %context%);\n</code></pre>\n\n<p>I have found in sources of Spring <a href=\"https://github.com/spring-projects/spring-framework/blob/master/spring-webflux/src/test/java/org/springframework/web/reactive/function/BodyInsertersTests.java\" rel=\"noreferrer\">how BodyInserters are tested</a>. It is more or less clear how to create a <code>BodyInserter.Context</code> (the second parameter), but I cannot understand how to construct the first parameter, so the request body could be extracted through it.</p>\n\n<p>Please, show a conventional (or at least usable) way to get request body from a <code>ClientRequest</code> instance.</p>\n"},{"tags":["java","lucene","spi"],"answers":[{"tags":[],"owner":{"account_id":8814568,"reputation":101,"user_id":6586467,"display_name":"Amol"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1468522393,"creation_date":1468522393,"answer_id":38382096,"question_id":38361533,"body_markdown":"its is fixed i added lucene jars in weblogic app server classpath and it is working as expected. i dont know why it is not detecting from my applications lib folder as its also on class path but looks like somehow SPI needs jars and META-INF on app servers classpath","title":"An SPI class of type org.apache.lucene.codecs.Codec with name &#39;Lucene54&#39; does not exist","body":"<p>its is fixed i added lucene jars in weblogic app server classpath and it is working as expected. i dont know why it is not detecting from my applications lib folder as its also on class path but looks like somehow SPI needs jars and META-INF on app servers classpath</p>\n"},{"tags":[],"owner":{"account_id":1189097,"reputation":2314,"user_id":3732965,"accept_rate":29,"display_name":"Digital Alchemist"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1488059476,"creation_date":1488059476,"answer_id":42462012,"question_id":38361533,"body_markdown":"Please add following file in \r\n\r\nFolder : `META-INF/services/`\r\n\r\nFile :`org.apache.lucene.codecs.Codec` \r\n\r\nText :`org.apache.lucene.codecs.lucene54.Lucene54Codec`\r\n\r\nPlease review the solution with detailed description at https://anwaarlabs.wordpress.com/2017/02/25/lucene-an-spi-class-of-type-org-apache-lucene-codecs-codec-with-name-does-not-exist/\r\n\r\n\r\n\r\n\r\n\r\n","title":"An SPI class of type org.apache.lucene.codecs.Codec with name &#39;Lucene54&#39; does not exist","body":"<p>Please add following file in </p>\n\n<p>Folder : <code>META-INF/services/</code></p>\n\n<p>File :<code>org.apache.lucene.codecs.Codec</code> </p>\n\n<p>Text :<code>org.apache.lucene.codecs.lucene54.Lucene54Codec</code></p>\n\n<p>Please review the solution with detailed description at <a href=\"https://anwaarlabs.wordpress.com/2017/02/25/lucene-an-spi-class-of-type-org-apache-lucene-codecs-codec-with-name-does-not-exist/\" rel=\"nofollow noreferrer\">https://anwaarlabs.wordpress.com/2017/02/25/lucene-an-spi-class-of-type-org-apache-lucene-codecs-codec-with-name-does-not-exist/</a></p>\n"},{"tags":[],"owner":{"account_id":703628,"reputation":14438,"user_id":595305,"accept_rate":83,"display_name":"mike rodent"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1497119073,"creation_date":1497119073,"answer_id":44476672,"question_id":38361533,"body_markdown":"I got this building with gradle using a proposed solution to build a &quot;fat jar&quot; (executable jar containing all dependent jars) [here][1].\r\n\r\nBut it didn&#39;t work: I got this obscure error to do with Lucene, but not when testing or building or running normally, only when building a fat jar.\r\n\r\nMy solution was to use [shadow jar][2]: code from gradle.build:\r\n\r\n    buildscript {\r\n    \trepositories { jcenter() }\r\n    \tdependencies { // fatjar\r\n    \t\tclasspath &#39;com.github.jengelman.gradle.plugins:shadow:1.2.4&#39; }\r\n    }\r\n    apply plugin: &#39;com.github.johnrengelman.shadow&#39;\r\n    shadowJar {\r\n    \tbaseName = project.name\r\n    \tclassifier = null\r\n    \tversion = project.version\r\n    }\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/4894308/595305\r\n  [2]: https://plugins.gradle.org/plugin/com.github.johnrengelman.shadow","title":"An SPI class of type org.apache.lucene.codecs.Codec with name &#39;Lucene54&#39; does not exist","body":"<p>I got this building with gradle using a proposed solution to build a \"fat jar\" (executable jar containing all dependent jars) <a href=\"https://stackoverflow.com/a/4894308/595305\">here</a>.</p>\n\n<p>But it didn't work: I got this obscure error to do with Lucene, but not when testing or building or running normally, only when building a fat jar.</p>\n\n<p>My solution was to use <a href=\"https://plugins.gradle.org/plugin/com.github.johnrengelman.shadow\" rel=\"nofollow noreferrer\">shadow jar</a>: code from gradle.build:</p>\n\n<pre><code>buildscript {\n    repositories { jcenter() }\n    dependencies { // fatjar\n        classpath 'com.github.jengelman.gradle.plugins:shadow:1.2.4' }\n}\napply plugin: 'com.github.johnrengelman.shadow'\nshadowJar {\n    baseName = project.name\n    classifier = null\n    version = project.version\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10163556,"reputation":21,"user_id":7506247,"display_name":"Cenk Akdeniz"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1651422910,"creation_date":1510579684,"answer_id":47265449,"question_id":38361533,"body_markdown":"I added the below code into configuration tags\r\n        \r\n    &lt;transformers&gt;\r\n        &lt;transformer  implementation=&quot;org.apache.maven.plugins.shade.resource.AppendingTransformer&quot;&gt;\r\n            &lt;resource&gt;META-INF/services/org.apache.lucene.codecs.Codec&lt;/resource&gt;\r\n            &lt;resource&gt;META-INF/services/org.apache.lucene.codecs.PostingsFormat&lt;/resource&gt;\r\n        &lt;/transformer&gt;\r\n    &lt;/transformers&gt;\r\n\r\nAnd also I add lucene-core dependency at the top of the dependencies tag\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.apache.lucene&lt;/groupId&gt;\r\n        &lt;artifactId&gt;lucene-core&lt;/artifactId&gt;\r\n        &lt;version&gt;5.5.0&lt;/version&gt;\r\n    &lt;/dependency&gt;","title":"An SPI class of type org.apache.lucene.codecs.Codec with name &#39;Lucene54&#39; does not exist","body":"<p>I added the below code into configuration tags</p>\n<pre><code>&lt;transformers&gt;\n    &lt;transformer  implementation=&quot;org.apache.maven.plugins.shade.resource.AppendingTransformer&quot;&gt;\n        &lt;resource&gt;META-INF/services/org.apache.lucene.codecs.Codec&lt;/resource&gt;\n        &lt;resource&gt;META-INF/services/org.apache.lucene.codecs.PostingsFormat&lt;/resource&gt;\n    &lt;/transformer&gt;\n&lt;/transformers&gt;\n</code></pre>\n<p>And also I add lucene-core dependency at the top of the dependencies tag</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.apache.lucene&lt;/groupId&gt;\n    &lt;artifactId&gt;lucene-core&lt;/artifactId&gt;\n    &lt;version&gt;5.5.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3798266,"reputation":119,"user_id":3152563,"accept_rate":75,"display_name":"arj"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1560589057,"creation_date":1560589057,"answer_id":56608918,"question_id":38361533,"body_markdown":"Make sure that the lucene jar that you have included in your project is of the same version as that of lucene codec mentioned in error. E.g. if the error states LuceneCodec62 then you should have lucene-6.x.x jar included in your project.","title":"An SPI class of type org.apache.lucene.codecs.Codec with name &#39;Lucene54&#39; does not exist","body":"<p>Make sure that the lucene jar that you have included in your project is of the same version as that of lucene codec mentioned in error. E.g. if the error states LuceneCodec62 then you should have lucene-6.x.x jar included in your project.</p>\n"},{"tags":[],"owner":{"account_id":29541269,"reputation":1,"user_id":22639879,"display_name":"jrm"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695752228,"creation_date":1695752194,"answer_id":77182538,"question_id":38361533,"body_markdown":"I just added the appropriate codec jar as a dependency.\r\n\r\n    &lt;dependency&gt;\r\n       &lt;groupId&gt;org.apache.lucene&lt;/groupId&gt;\r\n        &lt;artifactId&gt;lucene-codecs&lt;/artifactId&gt;\r\n        &lt;version&gt;7.2.0&lt;/version&gt;\r\n        &lt;scope&gt;test&lt;/scope&gt;\r\n    &lt;/dependency&gt;","title":"An SPI class of type org.apache.lucene.codecs.Codec with name &#39;Lucene54&#39; does not exist","body":"<p>I just added the appropriate codec jar as a dependency.</p>\n<pre><code>&lt;dependency&gt;\n   &lt;groupId&gt;org.apache.lucene&lt;/groupId&gt;\n    &lt;artifactId&gt;lucene-codecs&lt;/artifactId&gt;\n    &lt;version&gt;7.2.0&lt;/version&gt;\n    &lt;scope&gt;test&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n"}],"owner":{"account_id":8814568,"reputation":101,"user_id":6586467,"display_name":"Amol"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9716,"favorite_count":0,"down_vote_count":0,"up_vote_count":10,"answer_count":6,"score":10,"last_activity_date":1695752228,"creation_date":1468443328,"question_id":38361533,"body_markdown":"With lucene-core-5.5.2 i am facing problem a in weblogic server. standalone search application works but when i deploy as WEB APP it is failing with below error\r\n\r\n    Exception type is &#39;java.lang.ExceptionInInitializerError&#39;. Runtime error: java.lang.IllegalArgumentException: An SPI class of type org.apache.lucene.codecs.Codec with name &#39;Lucene54&#39; does not exist. You need to add the corresponding JAR file supporting this SPI to your classpath. The current classpath supports the following names: []\r\n\r\nI tried creating folder structure under `classes/ ` as `META-INF/services/` added all files from `lucene-core-5.5.2.jar META-INF\\services\\` directory also created jar file for `META-INF\\services\\` and added in classpath but it doesn&#39;t recognize `META-INF/services` to load SPI\r\n\r\nAny help would be really appreciated.","title":"An SPI class of type org.apache.lucene.codecs.Codec with name &#39;Lucene54&#39; does not exist","body":"<p>With lucene-core-5.5.2 i am facing problem a in weblogic server. standalone search application works but when i deploy as WEB APP it is failing with below error</p>\n\n<pre><code>Exception type is 'java.lang.ExceptionInInitializerError'. Runtime error: java.lang.IllegalArgumentException: An SPI class of type org.apache.lucene.codecs.Codec with name 'Lucene54' does not exist. You need to add the corresponding JAR file supporting this SPI to your classpath. The current classpath supports the following names: []\n</code></pre>\n\n<p>I tried creating folder structure under <code>classes/</code> as <code>META-INF/services/</code> added all files from <code>lucene-core-5.5.2.jar META-INF\\services\\</code> directory also created jar file for <code>META-INF\\services\\</code> and added in classpath but it doesn't recognize <code>META-INF/services</code> to load SPI</p>\n\n<p>Any help would be really appreciated.</p>\n"},{"tags":["java","spring","spring-boot","reactive-programming","javabeans"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":3,"creation_date":1695752278,"post_id":77182523,"comment_id":136065580,"body_markdown":"You either use reactive or not, you cannot mix both as Spring Boot will only auto-configure one of them. If you want both you have to manually configure them.","body":"You either use reactive or not, you cannot mix both as Spring Boot will only auto-configure one of them. If you want both you have to manually configure them."},{"owner":{"account_id":1553950,"reputation":1291,"user_id":1445660,"accept_rate":38,"display_name":"Rony Tesler"},"score":0,"creation_date":1695755910,"post_id":77182523,"comment_id":136066225,"body_markdown":"@M.Deinum Can I use pagination in the Reactive repository?","body":"@M.Deinum Can I use pagination in the Reactive repository?"},{"owner":{"account_id":10770525,"reputation":526,"user_id":7924110,"display_name":"Kenany"},"score":1,"creation_date":1695771230,"post_id":77182523,"comment_id":136068180,"body_markdown":"You can&#39;t have two repositories for the same entity. See this post: https://stackoverflow.com/questions/58292062/spring-two-repositories-of-same-entity#:~:text=It%20is%20not%20possible%20to,Person%20class)%20using%20a%20map.","body":"You can&#39;t have two repositories for the same entity. See this post: <a href=\"https://stackoverflow.com/questions/58292062/spring-two-repositories-of-same-entity#:~:text=It%20is%20not%20possible%20to,Person%20class)%20using%20a%20map\" title=\"spring two repositories of same entity%23%3a%7e%3atext%3dIt%2520is%2520not%2520possible%2520to%2cPerson%2520class)%2520using%2520a%2520map\">stackoverflow.com/questions/58292062/&hellip;</a>."},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1695797951,"post_id":77182523,"comment_id":136070617,"body_markdown":"No, but you can quite easily use a flux to skip x elements and take y to simulate paging.","body":"No, but you can quite easily use a flux to skip x elements and take y to simulate paging."}],"owner":{"account_id":1553950,"reputation":1291,"user_id":1445660,"accept_rate":38,"display_name":"Rony Tesler"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":51,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1695752080,"creation_date":1695751982,"question_id":77182523,"body_markdown":"\r\nGameRepository.java:\r\n\r\n    @Repository\r\n    public interface GameRepository extends MongoRepository&lt;Game, String&gt; {\r\n    }\r\n\r\nGameRepositoryReactive.java:\r\n\r\n    @Repository\r\n    public interface GameRepositoryReactive extends ReactiveMongoRepository&lt;Game, String&gt; {\r\n    }\r\n\r\nGame.java:\r\n\r\n    @Data\r\n    @AllArgsConstructor\r\n    @NoArgsConstructor\r\n    @Document(collection = &quot;games&quot;)\r\n    public class Game{\r\n        @Id\r\n        String id;\r\n        String name;\r\n    }\r\n\r\nGameService.java:\r\n\r\n    private final GameRepositoryReactive gameRepositoryReactive;\r\n        private final GameRepository gameRepository;\r\n    \r\n        public GameService(GameRepository gameRepository, GameRepositoryReactive gameRepositoryReactive) {\r\n            this.gameRepositoryReactive = gameRepositoryReactive;\r\n            this.gameRepository = gameRepository;\r\n        }\r\n\r\n\r\nThe error I get:\r\n\r\n&gt; Parameter 0 of constructor in com.example.service.GameService required\r\n&gt; a bean of type &#39;com.example.repository.GameRepository&#39; that could not\r\n&gt; be found. \r\n\r\nWith one ReactiveMongoRepository repository I get no error.\r\n\r\n","title":"spring boot can&#39;t find my repository after adding a new repository","body":"<p>GameRepository.java:</p>\n<pre><code>@Repository\npublic interface GameRepository extends MongoRepository&lt;Game, String&gt; {\n}\n</code></pre>\n<p>GameRepositoryReactive.java:</p>\n<pre><code>@Repository\npublic interface GameRepositoryReactive extends ReactiveMongoRepository&lt;Game, String&gt; {\n}\n</code></pre>\n<p>Game.java:</p>\n<pre><code>@Data\n@AllArgsConstructor\n@NoArgsConstructor\n@Document(collection = &quot;games&quot;)\npublic class Game{\n    @Id\n    String id;\n    String name;\n}\n</code></pre>\n<p>GameService.java:</p>\n<pre><code>private final GameRepositoryReactive gameRepositoryReactive;\n    private final GameRepository gameRepository;\n\n    public GameService(GameRepository gameRepository, GameRepositoryReactive gameRepositoryReactive) {\n        this.gameRepositoryReactive = gameRepositoryReactive;\n        this.gameRepository = gameRepository;\n    }\n</code></pre>\n<p>The error I get:</p>\n<blockquote>\n<p>Parameter 0 of constructor in com.example.service.GameService required\na bean of type 'com.example.repository.GameRepository' that could not\nbe found.</p>\n</blockquote>\n<p>With one ReactiveMongoRepository repository I get no error.</p>\n"},{"tags":["java","switch-statement"],"comments":[{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":2,"creation_date":1695552888,"post_id":77166743,"comment_id":136037258,"body_markdown":"The error message is here misleading: it&#39;s only `default:`, not `case default:`.","body":"The error message is here misleading: it&#39;s only <code>default:</code>, not <code>case default:</code>."},{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":3,"creation_date":1695562095,"post_id":77166743,"comment_id":136038151,"body_markdown":"??? Just replace `case default` with `default` (without `case`) and everything is fine. The error message `The preview feature Pattern Matching in Switch is only available with source level 20 and above` you got from the IDE is misleading, so just ignore it.","body":"??? Just replace <code>case default</code> with <code>default</code> (without <code>case</code>) and everything is fine. The error message <code>The preview feature Pattern Matching in Switch is only available with source level 20 and above</code> you got from the IDE is misleading, so just ignore it."},{"owner":{"account_id":372682,"reputation":22426,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1695563365,"post_id":77166743,"comment_id":136038285,"body_markdown":"What is your question?","body":"What is your question?"},{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":1,"creation_date":1695566169,"post_id":77166743,"comment_id":136038540,"body_markdown":"The syntax of the [switch statement](https://docs.oracle.com/javase/tutorial/java/nutsandbolts/switch.html) is incorrect.","body":"The syntax of the <a href=\"https://docs.oracle.com/javase/tutorial/java/nutsandbolts/switch.html\" rel=\"nofollow noreferrer\">switch statement</a> is incorrect."}],"answers":[{"tags":[],"owner":{"account_id":28184633,"reputation":76,"user_id":21541061,"display_name":"Cancerous115"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1695570795,"creation_date":1695566739,"answer_id":77167570,"question_id":77166743,"body_markdown":"This is a syntax error where the code you meant to write is actually trying to do something entirely different than you intended. Your syntax error accidentally overlapped with a brand new Java Feature called [Pattern Matching for switch Expressions and Statements][1].\r\n\r\nTo fix the error, just switch `case default` to say just `default`.\r\n\r\n```\r\ncase default:\r\n    return false;\r\n```\r\nto \r\n```\r\ndefault:\r\n    return false;\r\n```\r\n\r\nAnd to better explain the error message, Eclipse the IDE is aware of the new Java feature, and thus, is trying to let you know that what you are doing looks like the new feature, and that if you are trying to do the new feature, you should upgrade your code level to 21 or above.\r\n\r\nBut of course, Eclipse got it wrong - you just want a default clause. So write it like I showed you above, and the error should go away.\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/21/language/pattern-matching-switch-expressions-and-statements.html","title":"using case default on switch statement returns &quot;The preview feature Pattern Matching in Switch is only available with source level 20 and above&quot;","body":"<p>This is a syntax error where the code you meant to write is actually trying to do something entirely different than you intended. Your syntax error accidentally overlapped with a brand new Java Feature called <a href=\"https://docs.oracle.com/en/java/javase/21/language/pattern-matching-switch-expressions-and-statements.html\" rel=\"nofollow noreferrer\">Pattern Matching for switch Expressions and Statements</a>.</p>\n<p>To fix the error, just switch <code>case default</code> to say just <code>default</code>.</p>\n<pre><code>case default:\n    return false;\n</code></pre>\n<p>to</p>\n<pre><code>default:\n    return false;\n</code></pre>\n<p>And to better explain the error message, Eclipse the IDE is aware of the new Java feature, and thus, is trying to let you know that what you are doing looks like the new feature, and that if you are trying to do the new feature, you should upgrade your code level to 21 or above.</p>\n<p>But of course, Eclipse got it wrong - you just want a default clause. So write it like I showed you above, and the error should go away.</p>\n"},{"tags":[],"owner":{"account_id":1416522,"reputation":91354,"user_id":3553087,"display_name":"Brian Goetz"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1695579272,"creation_date":1695572030,"answer_id":77167919,"question_id":77166743,"body_markdown":"Also, note that what you are doing is morally an expression, and you can express it as such:\r\n\r\n```\r\n    return switch (dayNumber) {\r\n        case 0, 1, 2, 3, 4 -&gt; true;\r\n        case 5, 6 -&gt; false;\r\n        default -&gt; false;\r\n    }\r\n```\r\n\r\nOr even\r\n\r\n    return switch (dayNumber) {\r\n        case 0, 1, 2, 3, 4 -&gt; true;\r\n        default -&gt; false;\r\n    }\r\n\r\nsince the intention here is &quot;true if in 0..4, false otherwise&quot;.","title":"using case default on switch statement returns &quot;The preview feature Pattern Matching in Switch is only available with source level 20 and above&quot;","body":"<p>Also, note that what you are doing is morally an expression, and you can express it as such:</p>\n<pre><code>    return switch (dayNumber) {\n        case 0, 1, 2, 3, 4 -&gt; true;\n        case 5, 6 -&gt; false;\n        default -&gt; false;\n    }\n</code></pre>\n<p>Or even</p>\n<pre><code>return switch (dayNumber) {\n    case 0, 1, 2, 3, 4 -&gt; true;\n    default -&gt; false;\n}\n</code></pre>\n<p>since the intention here is &quot;true if in 0..4, false otherwise&quot;.</p>\n"}],"owner":{"account_id":26852818,"reputation":45,"user_id":20437479,"display_name":"Junk Mail"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":187,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77167570,"answer_count":2,"score":1,"last_activity_date":1695751735,"creation_date":1695552476,"question_id":77166743,"body_markdown":"```\r\npackage com.learningjava.conditionals;\r\n\r\npublic class SwitchExcercises {\r\n\r\n\tpublic static boolean isWeekDay(int dayNumber) {\r\n\t\tswitch (dayNumber) {\r\n\t\tcase 0:\r\n\t\tcase 1:\r\n\t\tcase 2:\r\n\t\tcase 3:\r\n\t\tcase 4:\r\n\t\t\treturn true;\r\n\t\tcase 5:\r\n\t\tcase 6:\r\n\t\t\treturn false;\r\n\t\tcase default:\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n}\r\n```\r\nI&#39;m using Eclipse as my ide. Shows error next to case default, says \r\n\r\n    The preview feature Pattern Matching in Switch is only available with source level 20 and above.\r\n\r\n \r\n\r\nUsing java-se 17. Thanks for the help.","title":"using case default on switch statement returns &quot;The preview feature Pattern Matching in Switch is only available with source level 20 and above&quot;","body":"<pre><code>package com.learningjava.conditionals;\n\npublic class SwitchExcercises {\n\n    public static boolean isWeekDay(int dayNumber) {\n        switch (dayNumber) {\n        case 0:\n        case 1:\n        case 2:\n        case 3:\n        case 4:\n            return true;\n        case 5:\n        case 6:\n            return false;\n        case default:\n            return false;\n        }\n    }\n}\n</code></pre>\n<p>I'm using Eclipse as my ide. Shows error next to case default, says</p>\n<pre><code>The preview feature Pattern Matching in Switch is only available with source level 20 and above.\n</code></pre>\n<p>Using java-se 17. Thanks for the help.</p>\n"},{"tags":["java","spring","redis","jackson","spring-data-redis"],"answers":[{"tags":[],"owner":{"account_id":1601811,"reputation":453,"user_id":1482699,"display_name":"Dennis"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1695751686,"creation_date":1695751686,"answer_id":77182491,"question_id":77182388,"body_markdown":"I noticed you&#39;re manually creating the `GenericJackson2JsonRedisSerializer`. When you do that, it automatically creates a new ObjectMapper that isn&#39;t set up through Spring and has no auto module loading capability. A quick fix would be to either inject the ObjectMapper into your `redisTemplate` bean function or make an ObjectMapper right inside the function and then hand it over to the `GenericJackson2JsonRedisSerializer`&#39;s constructor. This should sort things out. By the way, going the injection route is a good idea since it lets you use the default and globally set up ObjectMapper. And just a heads up, don&#39;t forget to include the `com.fasterxml.jackson.datatype:jackson-datatype-jsr310` dependency. \r\n\r\nSo a good solution can look like this: \r\n\r\n```java\r\n@Bean\r\npublic RedisTemplate&lt;String, MyObject&gt; redisTemplate(RedisConnectionFactory factory, ObjectMapper mapper) {\r\n    RedisTemplate&lt;String, MyObject&gt; template = new RedisTemplate&lt;&gt;();\r\n    template.setConnectionFactory(factory);\r\n\r\n    // Serialization for keys. By default, it uses JdkSerializationRedisSerializer\r\n    template.setKeySerializer(new StringRedisSerializer());\r\n\r\n    // Serialization for values. By default, it uses JdkSerializationRedisSerializer\r\n    // Here, we use Jackson to convert MyObject to JSON\r\n    template.setValueSerializer(new GenericJackson2JsonRedisSerializer(mapper));\r\n\r\n    return template;\r\n}\r\n```\r\n\r\nHope this helps!","title":"Unable to set up a simple Redis + Spring project: &quot;Java 8 date/time type `java.time.Instant` not supported by default&quot;","body":"<p>I noticed you're manually creating the <code>GenericJackson2JsonRedisSerializer</code>. When you do that, it automatically creates a new ObjectMapper that isn't set up through Spring and has no auto module loading capability. A quick fix would be to either inject the ObjectMapper into your <code>redisTemplate</code> bean function or make an ObjectMapper right inside the function and then hand it over to the <code>GenericJackson2JsonRedisSerializer</code>'s constructor. This should sort things out. By the way, going the injection route is a good idea since it lets you use the default and globally set up ObjectMapper. And just a heads up, don't forget to include the <code>com.fasterxml.jackson.datatype:jackson-datatype-jsr310</code> dependency.</p>\n<p>So a good solution can look like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Bean\npublic RedisTemplate&lt;String, MyObject&gt; redisTemplate(RedisConnectionFactory factory, ObjectMapper mapper) {\n    RedisTemplate&lt;String, MyObject&gt; template = new RedisTemplate&lt;&gt;();\n    template.setConnectionFactory(factory);\n\n    // Serialization for keys. By default, it uses JdkSerializationRedisSerializer\n    template.setKeySerializer(new StringRedisSerializer());\n\n    // Serialization for values. By default, it uses JdkSerializationRedisSerializer\n    // Here, we use Jackson to convert MyObject to JSON\n    template.setValueSerializer(new GenericJackson2JsonRedisSerializer(mapper));\n\n    return template;\n}\n</code></pre>\n<p>Hope this helps!</p>\n"}],"owner":{"account_id":23953627,"reputation":31,"user_id":17944810,"display_name":"overwriter"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":216,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1695751686,"creation_date":1695750866,"question_id":77182388,"body_markdown":"and many thanks for your help in advance! I am trying to set up a simple Spring + Redis project, using IntelliJ, and sadly it just doesn&#39;t work.\r\n\r\nI have checked countless forum posts here, but sadly to no avail. Whilst many of them are somewhat related, they are not the same, and I was unable to use the insights provided to my particular situation.\r\n\r\nFor convenient reproduction of the issue, I am listing every step of what I did below:\r\n### Project Setup\r\n 1. Start IntelliJ IDEA 2023.1.4 (Ultimate Edition)\r\n 2. *File -&gt; New -&gt; Project... -&gt;* **Spring Initializr**\r\n 3. Language: **Java**\r\n 4. Type: **Gradle - Kotlin**\r\n 5. Click *Next*\r\n 6. Spring Boot: **3.1.4**\r\n 7. Select: **Lombok** + **Spring Web** + **Spring Data Redis (Access+Driver)**\r\n## Application properties\r\n 8. I added the following  to `application.properties` in `src/main/resources`:\r\n```\r\nspring.data.redis.host=localhost\r\nspring.data.redis.port=6379\r\n```\r\n*(Note that Redis is running locally in a container and I tested that it works fine / is reachable on port 6379)*\r\n## Custom data class\r\n 9. Right-click main package (in my case `com.example.demo`), and click *New -&gt; Java Class*\r\n 10. Name the class `MyObject` and add the following:\r\n```\r\npackage com.example.demo;\r\n\r\nimport lombok.Data;\r\n\r\nimport java.time.Instant;\r\n\r\n@Data\r\npublic class MyObject {\r\n    Instant timestamp;\r\n    String textPayload;\r\n}\r\n```\r\n## Configuration class\r\n11. Right-click main package (in my case `com.example.demo`), and click *New -&gt; Java Class*\r\n12. Name the class `AppConfig` and add the following code:\r\n```\r\npackage com.example.demo;\r\n\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.context.annotation.Configuration;\r\nimport org.springframework.data.redis.connection.RedisConnectionFactory;\r\nimport org.springframework.data.redis.core.RedisTemplate;\r\nimport org.springframework.data.redis.serializer.GenericJackson2JsonRedisSerializer;\r\nimport org.springframework.data.redis.serializer.StringRedisSerializer;\r\n\r\n@Configuration\r\npublic class AppConfig {\r\n    @Bean\r\n    public RedisTemplate&lt;String, MyObject&gt; redisTemplate(RedisConnectionFactory factory) {\r\n        RedisTemplate&lt;String, MyObject&gt; template = new RedisTemplate&lt;&gt;();\r\n        template.setConnectionFactory(factory);\r\n\r\n        // Serialization for keys. By default, it uses JdkSerializationRedisSerializer\r\n        template.setKeySerializer(new StringRedisSerializer());\r\n\r\n        // Serialization for values. By default, it uses JdkSerializationRedisSerializer\r\n        // Here, we use Jackson to convert MyObject to JSON\r\n        template.setValueSerializer(new GenericJackson2JsonRedisSerializer());\r\n\r\n        return template;\r\n    }\r\n}\r\n```\r\n## Create controller\r\n 13. Right-click main package (in my case `com.example.demo`), and click *New -&gt; Java Class*\r\n 14. Name the class `MyController` and add the following code:\r\n```\r\npackage com.example.demo;\r\n\r\nimport lombok.AccessLevel;\r\nimport lombok.RequiredArgsConstructor;\r\nimport lombok.experimental.FieldDefaults;\r\nimport org.springframework.data.redis.core.RedisTemplate;\r\nimport org.springframework.http.ResponseEntity;\r\nimport org.springframework.web.bind.annotation.GetMapping;\r\nimport org.springframework.web.bind.annotation.RestController;\r\n\r\nimport java.time.Instant;\r\n\r\n@FieldDefaults(makeFinal = true, level = AccessLevel.PRIVATE)\r\n@RequiredArgsConstructor\r\n@RestController\r\npublic class MyController {\r\n    RedisTemplate&lt;String, MyObject&gt; redisTemplate;\r\n\r\n    @GetMapping(&quot;/save&quot;)\r\n    public ResponseEntity&lt;String&gt; saveObject() {\r\n        MyObject myObject = new MyObject();\r\n        myObject.setTimestamp(Instant.now());\r\n        myObject.setTextPayload(&quot;some data&quot;);\r\n        redisTemplate.opsForValue().set(&quot;myObject&quot;, myObject);\r\n        return ResponseEntity.ok(&quot;Object saved&quot;);\r\n    }\r\n\r\n    @GetMapping(&quot;/read&quot;)\r\n    public ResponseEntity&lt;MyObject&gt; readObject() {\r\n        return ResponseEntity.ok(redisTemplate.opsForValue().get(&quot;myObject&quot;));\r\n    }\r\n}\r\n```\r\n---\r\n# Result\r\nThe above will then lead to the following exception when trying to call the `/save/ endpoint:\r\n```\r\ncom.fasterxml.jackson.databind.exc.InvalidDefinitionException: Java 8 date/time type `java.time.Instant` not supported by default: add Module &quot;com.fasterxml.jackson.datatype:jackson-datatype-jsr310&quot; to enable handling (through reference chain: com.example.demo.MyObject[&quot;timestamp&quot;])\r\n\tat com.fasterxml.jackson.databind.exc.InvalidDefinitionException.from(InvalidDefinitionException.java:77) ~[jackson-databind-2.15.2.jar:2.15.2]\r\n\tat com.fasterxml.jackson.databind.SerializerProvider.reportBadDefinition(SerializerProvider.java:1308) ~[jackson-databind-2.15.2.jar:2.15.2]\r\n\tat com.fasterxml.jackson.databind.ser.impl.UnsupportedTypeSerializer.serialize(UnsupportedTypeSerializer.java:35) ~[jackson-databind-2.15.2.jar:2.15.2]\r\n\tat com.fasterxml.jackson.databind.ser.BeanPropertyWriter.serializeAsField(BeanPropertyWriter.java:732) ~[jackson-databind-2.15.2.jar:2.15.2]\r\n\tat com.fasterxml.jackson.databind.ser.std.BeanSerializerBase.serializeFields(BeanSerializerBase.java:772) ~[jackson-databind-2.15.2.jar:2.15.2]\r\n\tat com.fasterxml.jackson.databind.ser.std.BeanSerializerBase.serializeWithType(BeanSerializerBase.java:655) ~[jackson-databind-2.15.2.jar:2.15.2]\r\n\tat com.fasterxml.jackson.databind.ser.impl.TypeWrappedSerializer.serialize(TypeWrappedSerializer.java:32) ~[jackson-databind-2.15.2.jar:2.15.2]\r\n\tat com.fasterxml.jackson.databind.ser.DefaultSerializerProvider._serialize(DefaultSerializerProvider.java:479) ~[jackson-databind-2.15.2.jar:2.15.2]\r\n\tat com.fasterxml.jackson.databind.ser.DefaultSerializerProvider.serializeValue(DefaultSerializerProvider.java:318) ~[jackson-databind-2.15.2.jar:2.15.2]\r\n\tat com.fasterxml.jackson.databind.ObjectMapper._writeValueAndClose(ObjectMapper.java:4719) ~[jackson-databind-2.15.2.jar:2.15.2]\r\n\tat com.fasterxml.jackson.databind.ObjectMapper.writeValueAsBytes(ObjectMapper.java:3987) ~[jackson-databind-2.15.2.jar:2.15.2]\r\n\tat org.springframework.data.redis.serializer.GenericJackson2JsonRedisSerializer.serialize(GenericJackson2JsonRedisSerializer.java:220) ~[spring-data-redis-3.1.4.jar:3.1.4]\r\n\tat org.springframework.data.redis.core.AbstractOperations.rawValue(AbstractOperations.java:128) ~[spring-data-redis-3.1.4.jar:3.1.4]\r\n\tat org.springframework.data.redis.core.DefaultValueOperations.set(DefaultValueOperations.java:236) ~[spring-data-redis-3.1.4.jar:3.1.4]\r\n\tat com.example.demo.MyController.saveObject(MyController.java:24) ~[main/:na]\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-6.0.12.jar:6.0.12]\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-6.0.12.jar:6.0.12]\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.0.12.jar:6.0.12]\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884) ~[spring-webmvc-6.0.12.jar:6.0.12]\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797) ~[spring-webmvc-6.0.12.jar:6.0.12]\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.0.12.jar:6.0.12]\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1081) ~[spring-webmvc-6.0.12.jar:6.0.12]\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:974) ~[spring-webmvc-6.0.12.jar:6.0.12]\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1011) ~[spring-webmvc-6.0.12.jar:6.0.12]\r\n\tat org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903) ~[spring-webmvc-6.0.12.jar:6.0.12]\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564) ~[tomcat-embed-core-10.1.13.jar:6.0]\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.0.12.jar:6.0.12]\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.13.jar:6.0]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.13.jar:10.1.13]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.0.12.jar:6.0.12]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.12.jar:6.0.12]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.0.12.jar:6.0.12]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.12.jar:6.0.12]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.0.12.jar:6.0.12]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.12.jar:6.0.12]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\r\n\tat java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\r\n```\r\n## Solution approach #1\r\nMy first attempt was to follow the advice given in the exception message: &quot;*com.fasterxml.jackson.databind.exc.InvalidDefinitionException: Java 8 date/time type `java.time.Instant` not supported by default: **add Module &quot;com.fasterxml.jackson.datatype:jackson-datatype-jsr310&quot; to enable handling** (through reference chain: com.example.demo.MyObject[&quot;timestamp&quot;])*&quot;\r\n\r\nSo I added the following line to my `build.gradle.kts` file:\r\n```\r\nimplementation(&quot;com.fasterxml.jackson.datatype:jackson-datatype-jsr310&quot;)\r\n```\r\n...and hit the Gradle reload button / press *Ctrl + Shift + O* in IntelliJ\r\n\r\n**Result: the same exception as above.**\r\n\r\n## Solution approach #2\r\nKeeping the newly added dependency in there for good measure, I attempted several other solution approaches suggested here on Stack Overflow.\r\n### Add a bean for the `ObjectMapper` singleton in my configuration\r\nSource: [Spring Boot 2.5.0 and InvalidDefinitionException: Java 8 date/time type `java.time.Instant` not supported by default][1]\r\n```\r\n    @Bean\r\n    public ObjectMapper objectMapper() {\r\n        ObjectMapper objectMapper = new ObjectMapper();\r\n        objectMapper.registerModule(new JavaTimeModule());\r\n        return objectMapper;\r\n    }\r\n```\r\n\r\n**Result: same exception as above.**\r\n\r\n## Solution approach #3\r\n### Another variant for an `ObjectMapper` singleton\r\nSource: [How do I enable the JSR310 support for LocalDate using Jackson?][2]\r\n```\r\n    @Bean\r\n    public ObjectMapper objectMapper() {\r\n        return JsonMapper.builder()\r\n                         .addModule(new JavaTimeModule())\r\n                         .build();\r\n    }\r\n```\r\n\r\n**Result: same exception as above.**\r\n\r\n## Solution approach #4\r\n### Specify bean for `Jackson2ObjectMapperBuilder`\r\nSource: ChatGPT&#39;s suggestion [![Configuring ObjectMapper][3]][3]\r\n```\r\n    @Bean\r\n    public Jackson2ObjectMapperBuilder jackson2ObjectMapperBuilder() {\r\n        return new Jackson2ObjectMapperBuilder().modules(new JavaTimeModule());\r\n    }\r\n```\r\n\r\n**Result: same exception as above.**\r\n\r\n---\r\n# Help?\r\nI tried many other things, spending quite some time on this problem, but nothing would work. Can it really be that hard to serialize Instant&#39;s with Spring/Redis? What am I missing? Can someone help?\r\n\r\nThank you so much in advance!\r\n\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/67874510/spring-boot-2-5-0-and-invaliddefinitionexception-java-8-date-time-type-java-ti\r\n  [2]: https://stackoverflow.com/questions/69811740/how-do-i-enable-the-jsr310-support-for-localdate-using-jackson\r\n  [3]: https://i.stack.imgur.com/PInvG.png","title":"Unable to set up a simple Redis + Spring project: &quot;Java 8 date/time type `java.time.Instant` not supported by default&quot;","body":"<p>and many thanks for your help in advance! I am trying to set up a simple Spring + Redis project, using IntelliJ, and sadly it just doesn't work.</p>\n<p>I have checked countless forum posts here, but sadly to no avail. Whilst many of them are somewhat related, they are not the same, and I was unable to use the insights provided to my particular situation.</p>\n<p>For convenient reproduction of the issue, I am listing every step of what I did below:</p>\n<h3>Project Setup</h3>\n<ol>\n<li>Start IntelliJ IDEA 2023.1.4 (Ultimate Edition)</li>\n<li><em>File -&gt; New -&gt; Project... -&gt;</em> <strong>Spring Initializr</strong></li>\n<li>Language: <strong>Java</strong></li>\n<li>Type: <strong>Gradle - Kotlin</strong></li>\n<li>Click <em>Next</em></li>\n<li>Spring Boot: <strong>3.1.4</strong></li>\n<li>Select: <strong>Lombok</strong> + <strong>Spring Web</strong> + <strong>Spring Data Redis (Access+Driver)</strong></li>\n</ol>\n<h2>Application properties</h2>\n<ol start=\"8\">\n<li>I added the following  to <code>application.properties</code> in <code>src/main/resources</code>:</li>\n</ol>\n<pre><code>spring.data.redis.host=localhost\nspring.data.redis.port=6379\n</code></pre>\n<p><em>(Note that Redis is running locally in a container and I tested that it works fine / is reachable on port 6379)</em></p>\n<h2>Custom data class</h2>\n<ol start=\"9\">\n<li>Right-click main package (in my case <code>com.example.demo</code>), and click <em>New -&gt; Java Class</em></li>\n<li>Name the class <code>MyObject</code> and add the following:</li>\n</ol>\n<pre><code>package com.example.demo;\n\nimport lombok.Data;\n\nimport java.time.Instant;\n\n@Data\npublic class MyObject {\n    Instant timestamp;\n    String textPayload;\n}\n</code></pre>\n<h2>Configuration class</h2>\n<ol start=\"11\">\n<li>Right-click main package (in my case <code>com.example.demo</code>), and click <em>New -&gt; Java Class</em></li>\n<li>Name the class <code>AppConfig</code> and add the following code:</li>\n</ol>\n<pre><code>package com.example.demo;\n\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.data.redis.connection.RedisConnectionFactory;\nimport org.springframework.data.redis.core.RedisTemplate;\nimport org.springframework.data.redis.serializer.GenericJackson2JsonRedisSerializer;\nimport org.springframework.data.redis.serializer.StringRedisSerializer;\n\n@Configuration\npublic class AppConfig {\n    @Bean\n    public RedisTemplate&lt;String, MyObject&gt; redisTemplate(RedisConnectionFactory factory) {\n        RedisTemplate&lt;String, MyObject&gt; template = new RedisTemplate&lt;&gt;();\n        template.setConnectionFactory(factory);\n\n        // Serialization for keys. By default, it uses JdkSerializationRedisSerializer\n        template.setKeySerializer(new StringRedisSerializer());\n\n        // Serialization for values. By default, it uses JdkSerializationRedisSerializer\n        // Here, we use Jackson to convert MyObject to JSON\n        template.setValueSerializer(new GenericJackson2JsonRedisSerializer());\n\n        return template;\n    }\n}\n</code></pre>\n<h2>Create controller</h2>\n<ol start=\"13\">\n<li>Right-click main package (in my case <code>com.example.demo</code>), and click <em>New -&gt; Java Class</em></li>\n<li>Name the class <code>MyController</code> and add the following code:</li>\n</ol>\n<pre><code>package com.example.demo;\n\nimport lombok.AccessLevel;\nimport lombok.RequiredArgsConstructor;\nimport lombok.experimental.FieldDefaults;\nimport org.springframework.data.redis.core.RedisTemplate;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.RestController;\n\nimport java.time.Instant;\n\n@FieldDefaults(makeFinal = true, level = AccessLevel.PRIVATE)\n@RequiredArgsConstructor\n@RestController\npublic class MyController {\n    RedisTemplate&lt;String, MyObject&gt; redisTemplate;\n\n    @GetMapping(&quot;/save&quot;)\n    public ResponseEntity&lt;String&gt; saveObject() {\n        MyObject myObject = new MyObject();\n        myObject.setTimestamp(Instant.now());\n        myObject.setTextPayload(&quot;some data&quot;);\n        redisTemplate.opsForValue().set(&quot;myObject&quot;, myObject);\n        return ResponseEntity.ok(&quot;Object saved&quot;);\n    }\n\n    @GetMapping(&quot;/read&quot;)\n    public ResponseEntity&lt;MyObject&gt; readObject() {\n        return ResponseEntity.ok(redisTemplate.opsForValue().get(&quot;myObject&quot;));\n    }\n}\n</code></pre>\n<hr />\n<h1>Result</h1>\n<p>The above will then lead to the following exception when trying to call the `/save/ endpoint:</p>\n<pre><code>com.fasterxml.jackson.databind.exc.InvalidDefinitionException: Java 8 date/time type `java.time.Instant` not supported by default: add Module &quot;com.fasterxml.jackson.datatype:jackson-datatype-jsr310&quot; to enable handling (through reference chain: com.example.demo.MyObject[&quot;timestamp&quot;])\n    at com.fasterxml.jackson.databind.exc.InvalidDefinitionException.from(InvalidDefinitionException.java:77) ~[jackson-databind-2.15.2.jar:2.15.2]\n    at com.fasterxml.jackson.databind.SerializerProvider.reportBadDefinition(SerializerProvider.java:1308) ~[jackson-databind-2.15.2.jar:2.15.2]\n    at com.fasterxml.jackson.databind.ser.impl.UnsupportedTypeSerializer.serialize(UnsupportedTypeSerializer.java:35) ~[jackson-databind-2.15.2.jar:2.15.2]\n    at com.fasterxml.jackson.databind.ser.BeanPropertyWriter.serializeAsField(BeanPropertyWriter.java:732) ~[jackson-databind-2.15.2.jar:2.15.2]\n    at com.fasterxml.jackson.databind.ser.std.BeanSerializerBase.serializeFields(BeanSerializerBase.java:772) ~[jackson-databind-2.15.2.jar:2.15.2]\n    at com.fasterxml.jackson.databind.ser.std.BeanSerializerBase.serializeWithType(BeanSerializerBase.java:655) ~[jackson-databind-2.15.2.jar:2.15.2]\n    at com.fasterxml.jackson.databind.ser.impl.TypeWrappedSerializer.serialize(TypeWrappedSerializer.java:32) ~[jackson-databind-2.15.2.jar:2.15.2]\n    at com.fasterxml.jackson.databind.ser.DefaultSerializerProvider._serialize(DefaultSerializerProvider.java:479) ~[jackson-databind-2.15.2.jar:2.15.2]\n    at com.fasterxml.jackson.databind.ser.DefaultSerializerProvider.serializeValue(DefaultSerializerProvider.java:318) ~[jackson-databind-2.15.2.jar:2.15.2]\n    at com.fasterxml.jackson.databind.ObjectMapper._writeValueAndClose(ObjectMapper.java:4719) ~[jackson-databind-2.15.2.jar:2.15.2]\n    at com.fasterxml.jackson.databind.ObjectMapper.writeValueAsBytes(ObjectMapper.java:3987) ~[jackson-databind-2.15.2.jar:2.15.2]\n    at org.springframework.data.redis.serializer.GenericJackson2JsonRedisSerializer.serialize(GenericJackson2JsonRedisSerializer.java:220) ~[spring-data-redis-3.1.4.jar:3.1.4]\n    at org.springframework.data.redis.core.AbstractOperations.rawValue(AbstractOperations.java:128) ~[spring-data-redis-3.1.4.jar:3.1.4]\n    at org.springframework.data.redis.core.DefaultValueOperations.set(DefaultValueOperations.java:236) ~[spring-data-redis-3.1.4.jar:3.1.4]\n    at com.example.demo.MyController.saveObject(MyController.java:24) ~[main/:na]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]\n    at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-6.0.12.jar:6.0.12]\n    at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-6.0.12.jar:6.0.12]\n    at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.0.12.jar:6.0.12]\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884) ~[spring-webmvc-6.0.12.jar:6.0.12]\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797) ~[spring-webmvc-6.0.12.jar:6.0.12]\n    at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.0.12.jar:6.0.12]\n    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1081) ~[spring-webmvc-6.0.12.jar:6.0.12]\n    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:974) ~[spring-webmvc-6.0.12.jar:6.0.12]\n    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1011) ~[spring-webmvc-6.0.12.jar:6.0.12]\n    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903) ~[spring-webmvc-6.0.12.jar:6.0.12]\n    at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564) ~[tomcat-embed-core-10.1.13.jar:6.0]\n    at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.0.12.jar:6.0.12]\n    at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.13.jar:6.0]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\n    at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.13.jar:10.1.13]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\n    at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.0.12.jar:6.0.12]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.12.jar:6.0.12]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\n    at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.0.12.jar:6.0.12]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.12.jar:6.0.12]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\n    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.0.12.jar:6.0.12]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.12.jar:6.0.12]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\n    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\n    at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\n    at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\n    at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\n    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\n    at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\n    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\n    at java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\n</code></pre>\n<h2>Solution approach #1</h2>\n<p>My first attempt was to follow the advice given in the exception message: &quot;<em>com.fasterxml.jackson.databind.exc.InvalidDefinitionException: Java 8 date/time type <code>java.time.Instant</code> not supported by default: <strong>add Module &quot;com.fasterxml.jackson.datatype:jackson-datatype-jsr310&quot; to enable handling</strong> (through reference chain: com.example.demo.MyObject[&quot;timestamp&quot;])</em>&quot;</p>\n<p>So I added the following line to my <code>build.gradle.kts</code> file:</p>\n<pre><code>implementation(&quot;com.fasterxml.jackson.datatype:jackson-datatype-jsr310&quot;)\n</code></pre>\n<p>...and hit the Gradle reload button / press <em>Ctrl + Shift + O</em> in IntelliJ</p>\n<p><strong>Result: the same exception as above.</strong></p>\n<h2>Solution approach #2</h2>\n<p>Keeping the newly added dependency in there for good measure, I attempted several other solution approaches suggested here on Stack Overflow.</p>\n<h3>Add a bean for the <code>ObjectMapper</code> singleton in my configuration</h3>\n<p>Source: <a href=\"https://stackoverflow.com/questions/67874510/spring-boot-2-5-0-and-invaliddefinitionexception-java-8-date-time-type-java-ti\">Spring Boot 2.5.0 and InvalidDefinitionException: Java 8 date/time type <code>java.time.Instant</code> not supported by default</a></p>\n<pre><code>    @Bean\n    public ObjectMapper objectMapper() {\n        ObjectMapper objectMapper = new ObjectMapper();\n        objectMapper.registerModule(new JavaTimeModule());\n        return objectMapper;\n    }\n</code></pre>\n<p><strong>Result: same exception as above.</strong></p>\n<h2>Solution approach #3</h2>\n<h3>Another variant for an <code>ObjectMapper</code> singleton</h3>\n<p>Source: <a href=\"https://stackoverflow.com/questions/69811740/how-do-i-enable-the-jsr310-support-for-localdate-using-jackson\">How do I enable the JSR310 support for LocalDate using Jackson?</a></p>\n<pre><code>    @Bean\n    public ObjectMapper objectMapper() {\n        return JsonMapper.builder()\n                         .addModule(new JavaTimeModule())\n                         .build();\n    }\n</code></pre>\n<p><strong>Result: same exception as above.</strong></p>\n<h2>Solution approach #4</h2>\n<h3>Specify bean for <code>Jackson2ObjectMapperBuilder</code></h3>\n<p>Source: ChatGPT's suggestion <a href=\"https://i.stack.imgur.com/PInvG.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/PInvG.png\" alt=\"Configuring ObjectMapper\" /></a></p>\n<pre><code>    @Bean\n    public Jackson2ObjectMapperBuilder jackson2ObjectMapperBuilder() {\n        return new Jackson2ObjectMapperBuilder().modules(new JavaTimeModule());\n    }\n</code></pre>\n<p><strong>Result: same exception as above.</strong></p>\n<hr />\n<h1>Help?</h1>\n<p>I tried many other things, spending quite some time on this problem, but nothing would work. Can it really be that hard to serialize Instant's with Spring/Redis? What am I missing? Can someone help?</p>\n<p>Thank you so much in advance!</p>\n"},{"tags":["java","postman","restful-url"],"comments":[{"owner":{"account_id":106364,"reputation":159993,"user_id":283366,"accept_rate":100,"display_name":"Phil"},"score":8,"creation_date":1596595066,"post_id":63257605,"comment_id":111858917,"body_markdown":"You&#39;ve put `{document}` as part of the path, not a query parameter. Try `POST /v1/e/E_PC`","body":"You&#39;ve put <code>{document}</code> as part of the path, not a query parameter. Try <code>POST &#47;v1&#47;e&#47;E_PC</code>"},{"owner":{"account_id":1223835,"reputation":75848,"user_id":1189885,"accept_rate":43,"display_name":"chrylis -cautiouslyoptimistic-"},"score":0,"creation_date":1596597371,"post_id":63257605,"comment_id":111859356,"body_markdown":"A `create` POST operation normally doesn&#39;t have an additional path-component; it&#39;s just `POST /documents` with the appropriate contents. (You should also let Spring do the useful work for you and use `@RequestBody Document document` instead of passing a bare string.)","body":"A <code>create</code> POST operation normally doesn&#39;t have an additional path-component; it&#39;s just <code>POST &#47;documents</code> with the appropriate contents. (You should also let Spring do the useful work for you and use <code>@RequestBody Document document</code> instead of passing a bare string.)"},{"owner":{"account_id":14540731,"reputation":43,"user_id":10502544,"display_name":"Athe"},"score":0,"creation_date":1596613184,"post_id":63257605,"comment_id":111863992,"body_markdown":"@Phil thanks that seems to work, just to confirm I am getting this error :Request processing failed; nested exception is java.lang.Exception: java.lang.RuntimeException: error while fopping.. that means I have reached the method, just now the error is occuring in the method?","body":"@Phil thanks that seems to work, just to confirm I am getting this error :Request processing failed; nested exception is java.lang.Exception: java.lang.RuntimeException: error while fopping.. that means I have reached the method, just now the error is occuring in the method?"}],"answers":[{"tags":[],"owner":{"account_id":12509045,"reputation":661,"user_id":9104942,"display_name":"Abdusoli"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1596597010,"creation_date":1596597010,"answer_id":63257863,"question_id":63257605,"body_markdown":"You can also use like below:\r\n\r\n```\r\n@RestController\r\n@RequestMapping(&quot;/v1/e&quot;)\r\npublic class EC {\r\n\r\n  @PostMapping\r\n  public ResponseEntity&lt;?&gt; createDocument(@RequestParam(&quot;document&quot;) String document){\r\n      //code\r\n  }\r\n\r\n}\r\n\r\n```\r\n\r\nAnd your ```POST REQUEST``` is ```http://localhost:8080/v1/e?document=E_PC```","title":"Postman :&quot;status&quot;: 404, &quot;error&quot;: &quot;Not Found&quot;, &quot;message&quot;: &quot;Not Found&quot; in Java","body":"<p>You can also use like below:</p>\n<pre><code>@RestController\n@RequestMapping(&quot;/v1/e&quot;)\npublic class EC {\n\n  @PostMapping\n  public ResponseEntity&lt;?&gt; createDocument(@RequestParam(&quot;document&quot;) String document){\n      //code\n  }\n\n}\n\n</code></pre>\n<p>And your <code>POST REQUEST</code> is <code>http://localhost:8080/v1/e?document=E_PC</code></p>\n"},{"tags":[],"owner":{"account_id":27944401,"reputation":1,"user_id":21339692,"display_name":"Mohamed Hamras"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1680114815,"creation_date":1680075088,"answer_id":75874356,"question_id":63257605,"body_markdown":"This would work fine:\r\n\r\n    @RestController()\r\n    @RequestMapping(&quot;/v1/e/{document}&quot;)\r\n    public class EC {\r\n        @PostMapping\r\n        public ResponseEntity&lt;InputStreamResource&gt; createDocument(@PathVariable Dtype document,@RequestBody String data) {\r\n            //code\r\n        }","title":"Postman :&quot;status&quot;: 404, &quot;error&quot;: &quot;Not Found&quot;, &quot;message&quot;: &quot;Not Found&quot; in Java","body":"<p>This would work fine:</p>\n<pre><code>@RestController()\n@RequestMapping(&quot;/v1/e/{document}&quot;)\npublic class EC {\n    @PostMapping\n    public ResponseEntity&lt;InputStreamResource&gt; createDocument(@PathVariable Dtype document,@RequestBody String data) {\n        //code\n    }\n</code></pre>\n"}],"owner":{"account_id":14540731,"reputation":43,"user_id":10502544,"display_name":"Athe"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":12600,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1695751445,"creation_date":1596594785,"question_id":63257605,"body_markdown":"I have a Java program that uses Postman. I am trying to make a post request on Postman. My code:\r\n``` java\r\n@RestController()\r\n@RequestMapping(&quot;/v1/e&quot;)\r\npublic class EC {\r\n    @PostMapping(path = &quot;{document}&quot;, consumes = &quot;application/json&quot;, produces = &quot;application/json&quot;)\r\n    public ResponseEntity&lt;InputStreamResource&gt; createDocument(@PathVariable Dtype document,@RequestBody String data){\r\n        //code\r\n    }\r\n```\r\n\r\nBelow is the URL I am using to post:\r\n\r\nhttp://localhost:8080/v1/e?document=E_PC\r\n\r\nHowever, I am getting the following error:\r\n```JSON\r\n{\r\n    &quot;timestamp&quot;: &quot;2020-08-05T02:22:03.008+0000&quot;,\r\n    &quot;status&quot;: 404,\r\n    &quot;error&quot;: &quot;Not Found&quot;,\r\n    &quot;message&quot;: &quot;Not Found&quot;,\r\n    &quot;path&quot;: &quot;/v1/e&quot;\r\n}\r\n```\r\n","title":"Postman :&quot;status&quot;: 404, &quot;error&quot;: &quot;Not Found&quot;, &quot;message&quot;: &quot;Not Found&quot; in Java","body":"<p>I have a Java program that uses Postman. I am trying to make a post request on Postman. My code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@RestController()\n@RequestMapping(&quot;/v1/e&quot;)\npublic class EC {\n    @PostMapping(path = &quot;{document}&quot;, consumes = &quot;application/json&quot;, produces = &quot;application/json&quot;)\n    public ResponseEntity&lt;InputStreamResource&gt; createDocument(@PathVariable Dtype document,@RequestBody String data){\n        //code\n    }\n</code></pre>\n<p>Below is the URL I am using to post:</p>\n<p>http://localhost:8080/v1/e?document=E_PC</p>\n<p>However, I am getting the following error:</p>\n<pre><code>{\n    &quot;timestamp&quot;: &quot;2020-08-05T02:22:03.008+0000&quot;,\n    &quot;status&quot;: 404,\n    &quot;error&quot;: &quot;Not Found&quot;,\n    &quot;message&quot;: &quot;Not Found&quot;,\n    &quot;path&quot;: &quot;/v1/e&quot;\n}\n</code></pre>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9833,"page":159,"page_size":100}
