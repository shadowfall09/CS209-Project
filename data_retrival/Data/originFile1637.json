{"items":[{"tags":["java","random","logic"],"comments":[{"owner":{"account_id":19452218,"reputation":204,"user_id":14228343,"display_name":"Aditya Arora"},"score":5,"creation_date":1643475532,"post_id":70907714,"comment_id":125351939,"body_markdown":"change `Random random = new Random(1);` to `Random random = new Random();`","body":"change <code>Random random = new Random(1);</code> to <code>Random random = new Random();</code>"}],"answers":[{"tags":[],"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1643529963,"creation_date":1643476880,"answer_id":70907940,"question_id":70907714,"body_markdown":"# Do not specify same seed\r\n\r\nAs [commented][1], do not set the seed to the same number if you want different results. Same seed yields same results. \r\n\r\nYour code `new Random(1)` results in a number generator that generates the same sequence of outputs. Instead, call [the no-arg constructor][2]. Change this:\r\n\r\n    Random random = new Random(1);\r\n\r\n… to this:\r\n\r\n    Random random = new Random();\r\n\r\nThe Javadoc for the no-arg constructor promises:\r\n\r\n&gt; This constructor sets the seed of the random number generator to a value very likely to be distinct from any other invocation of this constructor.\r\n\r\n# Do not recreate generator\r\n\r\nFurthermore, you are needlessly recreating the random generator. Do not call `new Random` over and over again. Call it once, and then store a reference to the generator object on a variable for later use.\r\n\r\n# `ThreadLocalRandom`\r\n\r\nI recommend using [`ThreadLocalRandom`][3] rather than `Random`. Doing so avoids concurrency problems if you ever add threads and executor services to your code. Another benefit is the many convenience methods offered on that class. And using this class makes the syntax so simple that there is no point to you creating a separate method. Just call:\r\n\r\n    ThreadLocalRandom.current().nextInt( 7 )\r\n    \r\n\r\n\r\n  [1]: https://stackoverflow.com/users/14228343/aditya-arora\r\n  [2]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Random.html#%3Cinit%3E()\r\n  [3]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/ThreadLocalRandom.html","title":"Random number generator generates the same number","body":"<h1>Do not specify same seed</h1>\n<p>As <a href=\"https://stackoverflow.com/users/14228343/aditya-arora\">commented</a>, do not set the seed to the same number if you want different results. Same seed yields same results.</p>\n<p>Your code <code>new Random(1)</code> results in a number generator that generates the same sequence of outputs. Instead, call <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Random.html#%3Cinit%3E()\" rel=\"nofollow noreferrer\">the no-arg constructor</a>. Change this:</p>\n<pre><code>Random random = new Random(1);\n</code></pre>\n<p>… to this:</p>\n<pre><code>Random random = new Random();\n</code></pre>\n<p>The Javadoc for the no-arg constructor promises:</p>\n<blockquote>\n<p>This constructor sets the seed of the random number generator to a value very likely to be distinct from any other invocation of this constructor.</p>\n</blockquote>\n<h1>Do not recreate generator</h1>\n<p>Furthermore, you are needlessly recreating the random generator. Do not call <code>new Random</code> over and over again. Call it once, and then store a reference to the generator object on a variable for later use.</p>\n<h1><code>ThreadLocalRandom</code></h1>\n<p>I recommend using <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/ThreadLocalRandom.html\" rel=\"nofollow noreferrer\"><code>ThreadLocalRandom</code></a> rather than <code>Random</code>. Doing so avoids concurrency problems if you ever add threads and executor services to your code. Another benefit is the many convenience methods offered on that class. And using this class makes the syntax so simple that there is no point to you creating a separate method. Just call:</p>\n<pre><code>ThreadLocalRandom.current().nextInt( 7 )\n</code></pre>\n"},{"tags":[],"owner":{"account_id":20986879,"reputation":11,"user_id":15420466,"display_name":"Abdullah Ibne Hanif Arean"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1643477157,"creation_date":1643477157,"answer_id":70907976,"question_id":70907714,"body_markdown":"You can simply remove the seed number inside Random() constructor, and your code will be good to go. Just change your generateRandom() method.\r\n\r\n    private static int generateRandom() {\r\n\r\n        Random random = new Random();\r\n        return random.nextInt(17);\r\n    }\r\nOr you can use this technique in genrateRandom() method\r\n\r\n    private static int generateRandom() {\r\n        int maximumnumber =17, minimumnuber =0;\r\n        int randomnum = (int)(Math.random()*(maximumnumber-minimumnuber+1)+minimumnuber);\r\n        return randomnum;\r\n    }\r\n\r\n       \r\n\r\n","title":"Random number generator generates the same number","body":"<p>You can simply remove the seed number inside Random() constructor, and your code will be good to go. Just change your generateRandom() method.</p>\n<pre><code>private static int generateRandom() {\n\n    Random random = new Random();\n    return random.nextInt(17);\n}\n</code></pre>\n<p>Or you can use this technique in genrateRandom() method</p>\n<pre><code>private static int generateRandom() {\n    int maximumnumber =17, minimumnuber =0;\n    int randomnum = (int)(Math.random()*(maximumnumber-minimumnuber+1)+minimumnuber);\n    return randomnum;\n}\n\n   \n</code></pre>\n"}],"owner":{"account_id":17556979,"reputation":49,"user_id":12736224,"display_name":"HusenPatel"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":370,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"accepted_answer_id":70907940,"answer_count":2,"score":-2,"last_activity_date":1643529963,"creation_date":1643475422,"question_id":70907714,"body_markdown":"I am a beginner in programming, currently learning java. As a part of my practice, I have created the below code, which is simply a game asking the user to guess the number generated randomly by the Computer, if the player guesses it correctly, the score increases by 5. \r\nThe problem is that my Random Number generator every time generated the same number, no randomness at all,I want to solve this problem. And also I want a more intuitive approach for my this code. the code is mentioned below:\r\n\r\n      \r\n    public static void main(String... args){\r\n     System.out.println(&quot;\\nGuessNumber is a game, in which the player is required to guess the number\\n&quot; +\r\n                           &quot;generated randomly by the computer. If the player guesses it right his score\\n&quot; +\r\n                           &quot;is increased to 5, no score is cut when losing. The number will be from 1 to 6\\n&quot; +\r\n                           &quot;inclusive.\\n&quot;);\r\n        Scanner scan = new Scanner(System.in);\r\n        char input;\r\n        int randomNumber;\r\n        int playerScore =0 ;\r\n        //int roundCounter = 0;\r\n        do{ System.out.print(&quot;Press &#39;r&#39; to play and &#39;q&#39; to quit: &quot;);\r\n            input = scan.next().charAt(0);\r\n            switch (input){\r\n                case &#39;r&#39;:\r\n                    System.out.print(&quot;A random number is generated for you, guess what it is: &quot;);\r\n                    int answer = scan.nextInt();\r\n                    if(answer == (randomNumber = generateRandom())){\r\n                        System.out.print(&quot;Congrats! that was absolutely right guess, &quot;);\r\n                        playerScore += 5;\r\n                    }else{\r\n                        System.out.print(&quot;Oops!, wrong guess, right answer is &quot;+randomNumber +&quot;, &quot;);\r\n                    }\r\n                    break;\r\n                case &#39;q&#39;:\r\n                    System.out.println(&quot;Bye Bye!&quot;);\r\n                    break;\r\n                default:\r\n                    System.err.print(&quot;Enter a valid input: &quot;);\r\n                    break;\r\n            }\r\n        }while(input != &#39;q&#39;);\r\n    \r\n        System.out.println(&quot;You scored &quot;+ playerScore);\r\n    }\r\n    \r\n     private static int generateRandom(){\r\n        Random random = new Random(1);\r\n        return random.nextInt(7);\r\n    }\r\n\r\nand a sample output:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/VV1u3.jpg\r\n\r\n\r\n\r\n**Edit: If you can provide a better approach to write this code, please suggest me**\r\n","title":"Random number generator generates the same number","body":"<p>I am a beginner in programming, currently learning java. As a part of my practice, I have created the below code, which is simply a game asking the user to guess the number generated randomly by the Computer, if the player guesses it correctly, the score increases by 5.\nThe problem is that my Random Number generator every time generated the same number, no randomness at all,I want to solve this problem. And also I want a more intuitive approach for my this code. the code is mentioned below:</p>\n<pre><code>public static void main(String... args){\n System.out.println(&quot;\\nGuessNumber is a game, in which the player is required to guess the number\\n&quot; +\n                       &quot;generated randomly by the computer. If the player guesses it right his score\\n&quot; +\n                       &quot;is increased to 5, no score is cut when losing. The number will be from 1 to 6\\n&quot; +\n                       &quot;inclusive.\\n&quot;);\n    Scanner scan = new Scanner(System.in);\n    char input;\n    int randomNumber;\n    int playerScore =0 ;\n    //int roundCounter = 0;\n    do{ System.out.print(&quot;Press 'r' to play and 'q' to quit: &quot;);\n        input = scan.next().charAt(0);\n        switch (input){\n            case 'r':\n                System.out.print(&quot;A random number is generated for you, guess what it is: &quot;);\n                int answer = scan.nextInt();\n                if(answer == (randomNumber = generateRandom())){\n                    System.out.print(&quot;Congrats! that was absolutely right guess, &quot;);\n                    playerScore += 5;\n                }else{\n                    System.out.print(&quot;Oops!, wrong guess, right answer is &quot;+randomNumber +&quot;, &quot;);\n                }\n                break;\n            case 'q':\n                System.out.println(&quot;Bye Bye!&quot;);\n                break;\n            default:\n                System.err.print(&quot;Enter a valid input: &quot;);\n                break;\n        }\n    }while(input != 'q');\n\n    System.out.println(&quot;You scored &quot;+ playerScore);\n}\n\n private static int generateRandom(){\n    Random random = new Random(1);\n    return random.nextInt(7);\n}\n</code></pre>\n<p>and a sample output:</p>\n<p><a href=\"https://i.stack.imgur.com/VV1u3.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VV1u3.jpg\" alt=\"enter image description here\" /></a></p>\n<p><strong>Edit: If you can provide a better approach to write this code, please suggest me</strong></p>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":3192259,"reputation":117609,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1643288811,"post_id":70878859,"comment_id":125303019,"body_markdown":"No, neither there is a java way. The problem is you are calilng this from the constructor and in the hierarchy the super constructor is also called. So to fix you shouldn&#39;t do this in the constructor but somewhere else.","body":"No, neither there is a java way. The problem is you are calilng this from the constructor and in the hierarchy the super constructor is also called. So to fix you shouldn&#39;t do this in the constructor but somewhere else."}],"answers":[{"tags":[],"owner":{"account_id":7655255,"reputation":63,"user_id":5802413,"display_name":"jashinhidan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1643289023,"creation_date":1643289023,"answer_id":70879144,"question_id":70878859,"body_markdown":"IMHO a service extending another service is never a good approach. I would rather suggest you to create a service interface and then make your two services implementing that interface. In this way you should not have anymore this problem because you would call *loadFromDB()* only in one of your service.","title":"Prevent multiple bean instantiation on inheritance","body":"<p>IMHO a service extending another service is never a good approach. I would rather suggest you to create a service interface and then make your two services implementing that interface. In this way you should not have anymore this problem because you would call <em>loadFromDB()</em> only in one of your service.</p>\n"},{"tags":[],"owner":{"account_id":23996479,"reputation":139,"user_id":17981941,"display_name":"Dhanraj"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1643529752,"creation_date":1643529752,"answer_id":70912905,"question_id":70878859,"body_markdown":"If you only need instance of BlueCircle then you might have to remove @Service on Circle class.","title":"Prevent multiple bean instantiation on inheritance","body":"<p>If you only need instance of BlueCircle then you might have to remove @Service on Circle class.</p>\n"}],"owner":{"account_id":1905059,"reputation":1845,"user_id":1720101,"accept_rate":37,"display_name":"Shvalb"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":234,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":2,"score":-1,"last_activity_date":1643529752,"creation_date":1643287865,"question_id":70878859,"body_markdown":"I have the following problem I&#39;m trying to overcome:\r\n\r\nI have a Spring base component:\r\n\r\n```\r\n@Service\r\npublic class Circle {\r\n...\r\n  @Autowired\r\n  public Circle() {\r\n     loadFromDB();\r\n  }\r\n...\r\n}\r\n```\r\n\r\nI have another component which inherits it:\r\n\r\n```\r\n@Service\r\npublic class BlueCircle extends Circle {\r\n...\r\n}\r\n```\r\n\r\nThe problem here is `loadFromDB` is called twice because Spring instantiate `Circle` two times: first time when it &quot;discovers&quot; class `Circle` and a second time because of the inheritance.\r\n\r\nIs there a &quot;Spring&quot; way to avoid this?","title":"Prevent multiple bean instantiation on inheritance","body":"<p>I have the following problem I'm trying to overcome:</p>\n<p>I have a Spring base component:</p>\n<pre><code>@Service\npublic class Circle {\n...\n  @Autowired\n  public Circle() {\n     loadFromDB();\n  }\n...\n}\n</code></pre>\n<p>I have another component which inherits it:</p>\n<pre><code>@Service\npublic class BlueCircle extends Circle {\n...\n}\n</code></pre>\n<p>The problem here is <code>loadFromDB</code> is called twice because Spring instantiate <code>Circle</code> two times: first time when it &quot;discovers&quot; class <code>Circle</code> and a second time because of the inheritance.</p>\n<p>Is there a &quot;Spring&quot; way to avoid this?</p>\n"},{"tags":["java","containers","sublist"],"comments":[{"owner":{"account_id":20207636,"reputation":107,"user_id":14821591,"display_name":"grant martin"},"score":0,"creation_date":1643528313,"post_id":70912743,"comment_id":125360764,"body_markdown":"What line is the error occuring?","body":"What line is the error occuring?"},{"owner":{"account_id":4959604,"reputation":8469,"user_id":3991211,"display_name":"Garr Godfrey"},"score":3,"creation_date":1643528634,"post_id":70912743,"comment_id":125360800,"body_markdown":"there&#39;s a difference between what the runtime type is and what the compiler knows it is","body":"there&#39;s a difference between what the runtime type is and what the compiler knows it is"}],"answers":[{"tags":[],"owner":{"account_id":1263831,"reputation":388998,"user_id":1221571,"accept_rate":67,"display_name":"Eran"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1643528426,"creation_date":1643528426,"answer_id":70912780,"question_id":70912743,"body_markdown":"When you write\r\n\r\n    var arr = new ArrayList&lt;Integer&gt;();\r\n\r\nthe compiler infers the type of the `arr` variable to be `ArrayList&lt;Integer&gt;`, so it&#39;s equivalent to writing:\r\n\r\n    ArrayList&lt;Integer&gt; arr = new ArrayList&lt;Integer&gt;();\r\n\r\n`arr.subList(0,1)` returns a `List&lt;Integer&gt;`, which cannot be assigned to an `ArrayList&lt;Integer&gt;`, since an `ArrayList&lt;Integer&gt;` is an implementation of `List&lt;Integer&gt;`, but not all implementations of `List&lt;Integer&gt;` are `ArrayList&lt;Integer&gt;`. \r\n\r\nOn the other hand, when you declare the variable as `List&lt;Integer&gt; arr`, you can assign to it any implementation of `List&lt;Integer&gt;`, which includes the value returned by `arr.subList(0,1)`.\r\n\r\nIt&#39;s important to note that `subList` does **not** return an `ArrayList`.\r\nFor example, `subList()` method of `ArrayList` returns an instance of an inner class called `ArrayList$SubList`. Such `List` cannot be assigned to a variable whose type is `ArrayList`.\r\n","title":"difference between List&lt;Integer&gt; arr and var arr","body":"<p>When you write</p>\n<pre><code>var arr = new ArrayList&lt;Integer&gt;();\n</code></pre>\n<p>the compiler infers the type of the <code>arr</code> variable to be <code>ArrayList&lt;Integer&gt;</code>, so it's equivalent to writing:</p>\n<pre><code>ArrayList&lt;Integer&gt; arr = new ArrayList&lt;Integer&gt;();\n</code></pre>\n<p><code>arr.subList(0,1)</code> returns a <code>List&lt;Integer&gt;</code>, which cannot be assigned to an <code>ArrayList&lt;Integer&gt;</code>, since an <code>ArrayList&lt;Integer&gt;</code> is an implementation of <code>List&lt;Integer&gt;</code>, but not all implementations of <code>List&lt;Integer&gt;</code> are <code>ArrayList&lt;Integer&gt;</code>.</p>\n<p>On the other hand, when you declare the variable as <code>List&lt;Integer&gt; arr</code>, you can assign to it any implementation of <code>List&lt;Integer&gt;</code>, which includes the value returned by <code>arr.subList(0,1)</code>.</p>\n<p>It's important to note that <code>subList</code> does <strong>not</strong> return an <code>ArrayList</code>.\nFor example, <code>subList()</code> method of <code>ArrayList</code> returns an instance of an inner class called <code>ArrayList$SubList</code>. Such <code>List</code> cannot be assigned to a variable whose type is <code>ArrayList</code>.</p>\n"}],"owner":{"account_id":24098620,"reputation":37,"user_id":18070759,"display_name":"Acuzio"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":158,"favorite_count":0,"down_vote_count":1,"up_vote_count":3,"answer_count":1,"score":2,"last_activity_date":1643528714,"creation_date":1643528107,"question_id":70912743,"body_markdown":"The following code works fine.\r\n\r\n    List&lt;Integer&gt; arr = new ArrayList&lt;Integer&gt;();\r\n    System.out.println(arr.getClass().getSimpleName()); // output: ArrayList\r\n    arr.add(0);\r\n    arr.add(1);\r\n    arr = arr.subList(0,1);\r\n\r\nBut if you change the first line to\r\n\r\n    var arr = new ArrayList&lt;Integer&gt;();\r\n\r\nan error will occur:\r\n\r\n&gt; java: incompatible types: java.util.List&lt;java.lang.Integer&gt; cannot be converted to java.util.ArrayList&lt;java.lang.Integer&gt;\r\n\r\nHowever, even if arr is defined in the second way, its type is still ArrayList, so what is the difference?","title":"difference between List&lt;Integer&gt; arr and var arr","body":"<p>The following code works fine.</p>\n<pre><code>List&lt;Integer&gt; arr = new ArrayList&lt;Integer&gt;();\nSystem.out.println(arr.getClass().getSimpleName()); // output: ArrayList\narr.add(0);\narr.add(1);\narr = arr.subList(0,1);\n</code></pre>\n<p>But if you change the first line to</p>\n<pre><code>var arr = new ArrayList&lt;Integer&gt;();\n</code></pre>\n<p>an error will occur:</p>\n<blockquote>\n<p>java: incompatible types: java.util.List&lt;java.lang.Integer&gt; cannot be converted to java.util.ArrayList&lt;java.lang.Integer&gt;</p>\n</blockquote>\n<p>However, even if arr is defined in the second way, its type is still ArrayList, so what is the difference?</p>\n"},{"tags":["java","static-analysis","checkstyle"],"answers":[{"tags":[],"owner":{"account_id":4834769,"reputation":609,"user_id":3901853,"display_name":"strkk"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1643528045,"creation_date":1643528045,"answer_id":70912740,"question_id":70801277,"body_markdown":"it is not so easy, but there a few ways (or workarounds?)\r\n1. You can use [MatchXPathCheck][2] to report violation on any usage of `CascadeType.ALL`. Config will look like\r\n```\r\n&lt;!-- under TreeWalker --&gt;\r\n&lt;module name=&quot;MatchXpath&quot;&gt;\r\n    &lt;property name=&quot;query&quot; value=&quot;//DOT[count(./IDENT) = 2 and ./*[1][@text = &#39;CascadeType&#39;] and ./*[2][@text = &#39;ALL&#39;]]&quot;/&gt;\r\n    &lt;message key=&quot;matchxpath.match&quot;\r\n             value=&quot;Do not use Cascade.ALL&quot;/&gt;\r\n&lt;/module&gt;\r\n```\r\nit will report violations on any usages of `CascadeType.ALL`, excluding imports. But it will not work in case you use static import and constant directly, e.g.\r\n```\r\nimport static javax.persistence.CascadeType.ALL;\r\n\r\nObject a = ALL; // we wont catch it\r\n```\r\n2. Other way is other xpath, but to forbid to use `ALL`\r\n```\r\n&lt;!-- under TreeWalker --&gt;\r\n&lt;module name=&quot;MatchXpath&quot;&gt;\r\n    &lt;property name=&quot;query&quot; value=&quot;//IDENT[@text = &#39;ALL&#39;]&quot;/&gt;\r\n    &lt;message key=&quot;matchxpath.match&quot;\r\n        value=&quot;Do not use CascadeType.ALL&quot;/&gt;\r\n&lt;/module&gt;\r\n```\r\nthis will catch all usages (imports too), but can produce false positives if you have some other constants named ALL, because here we do not specify its type.\r\n\r\n3. To forbid static import of this, you can use [IllegalImportCheck][1]. It will report violations on cases like \r\n```\r\nimport static javax.persistence.CascadeType.ALL;\r\n``` \r\nBut it wont work in case there is a star import.\r\n\r\nYou can also try to combine these approaches or create better xpath, since those above are just a sketch.\r\n\r\n  [1]: https://checkstyle.sourceforge.io/config_imports.html#IllegalImport\r\n  [2]: https://checkstyle.sourceforge.io/config_coding.html#MatchXpath","title":"Checkstyle disallow specific enum constant","body":"<p>it is not so easy, but there a few ways (or workarounds?)</p>\n<ol>\n<li>You can use <a href=\"https://checkstyle.sourceforge.io/config_coding.html#MatchXpath\" rel=\"nofollow noreferrer\">MatchXPathCheck</a> to report violation on any usage of <code>CascadeType.ALL</code>. Config will look like</li>\n</ol>\n<pre><code>&lt;!-- under TreeWalker --&gt;\n&lt;module name=&quot;MatchXpath&quot;&gt;\n    &lt;property name=&quot;query&quot; value=&quot;//DOT[count(./IDENT) = 2 and ./*[1][@text = 'CascadeType'] and ./*[2][@text = 'ALL']]&quot;/&gt;\n    &lt;message key=&quot;matchxpath.match&quot;\n             value=&quot;Do not use Cascade.ALL&quot;/&gt;\n&lt;/module&gt;\n</code></pre>\n<p>it will report violations on any usages of <code>CascadeType.ALL</code>, excluding imports. But it will not work in case you use static import and constant directly, e.g.</p>\n<pre><code>import static javax.persistence.CascadeType.ALL;\n\nObject a = ALL; // we wont catch it\n</code></pre>\n<ol start=\"2\">\n<li>Other way is other xpath, but to forbid to use <code>ALL</code></li>\n</ol>\n<pre><code>&lt;!-- under TreeWalker --&gt;\n&lt;module name=&quot;MatchXpath&quot;&gt;\n    &lt;property name=&quot;query&quot; value=&quot;//IDENT[@text = 'ALL']&quot;/&gt;\n    &lt;message key=&quot;matchxpath.match&quot;\n        value=&quot;Do not use CascadeType.ALL&quot;/&gt;\n&lt;/module&gt;\n</code></pre>\n<p>this will catch all usages (imports too), but can produce false positives if you have some other constants named ALL, because here we do not specify its type.</p>\n<ol start=\"3\">\n<li>To forbid static import of this, you can use <a href=\"https://checkstyle.sourceforge.io/config_imports.html#IllegalImport\" rel=\"nofollow noreferrer\">IllegalImportCheck</a>. It will report violations on cases like</li>\n</ol>\n<pre><code>import static javax.persistence.CascadeType.ALL;\n</code></pre>\n<p>But it wont work in case there is a star import.</p>\n<p>You can also try to combine these approaches or create better xpath, since those above are just a sketch.</p>\n"}],"owner":{"account_id":12203903,"reputation":68,"user_id":8907521,"display_name":"Sigoy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":142,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":70912740,"answer_count":1,"score":1,"last_activity_date":1643528045,"creation_date":1642768007,"question_id":70801277,"body_markdown":"Is there a way to use checkstyle to disallow use of a specific enum value (other than trying to catch it with a regex)?\r\n\r\nI would like to prevent the usage of `javax.persistence.CascadeType.ALL`, but can only seem to find options to prevent using the entire javax.persistence.CascadeType enum.","title":"Checkstyle disallow specific enum constant","body":"<p>Is there a way to use checkstyle to disallow use of a specific enum value (other than trying to catch it with a regex)?</p>\n<p>I would like to prevent the usage of <code>javax.persistence.CascadeType.ALL</code>, but can only seem to find options to prevent using the entire javax.persistence.CascadeType enum.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":8017543,"reputation":2493,"user_id":6047274,"display_name":"jack jay"},"score":0,"creation_date":1484463459,"post_id":41658631,"comment_id":70515917,"body_markdown":"Add your code as well. And you should search for file reading and writing in java.","body":"Add your code as well. And you should search for file reading and writing in java."},{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":0,"creation_date":1484463479,"post_id":41658631,"comment_id":70515919,"body_markdown":"Are you stuck on something specific, or did you expect us to write code for you?","body":"Are you stuck on something specific, or did you expect us to write code for you?"},{"owner":{"account_id":9941908,"reputation":39,"user_id":7358214,"display_name":"Nisal Silva"},"score":0,"creation_date":1484463579,"post_id":41658631,"comment_id":70515943,"body_markdown":"i want a code for write those values to a file, update if i changed values, load when program starts","body":"i want a code for write those values to a file, update if i changed values, load when program starts"},{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":0,"creation_date":1484463601,"post_id":41658631,"comment_id":70515948,"body_markdown":"Sorry, this isn&#39;t a free coding service.","body":"Sorry, this isn&#39;t a free coding service."},{"owner":{"account_id":9941908,"reputation":39,"user_id":7358214,"display_name":"Nisal Silva"},"score":0,"creation_date":1484463702,"post_id":41658631,"comment_id":70515965,"body_markdown":"thats not the whole code i&#39;m stuck in that part","body":"thats not the whole code i&#39;m stuck in that part"},{"owner":{"account_id":6067411,"reputation":291,"user_id":4737255,"display_name":"Che-Chia Chang"},"score":0,"creation_date":1484466967,"post_id":41658631,"comment_id":70516610,"body_markdown":"Try to use [java properties](http://stackoverflow.com/questions/1318347/how-to-use-java-property-files) Btw, you need to provide more details about your code so we can provide more help.","body":"Try to use <a href=\"http://stackoverflow.com/questions/1318347/how-to-use-java-property-files\">java properties</a> Btw, you need to provide more details about your code so we can provide more help."},{"owner":{"account_id":8264026,"reputation":303,"user_id":6214309,"accept_rate":100,"display_name":"zypa"},"score":0,"creation_date":1485212294,"post_id":41658631,"comment_id":70822505,"body_markdown":"Nisal Silva, did you check my answer underneath?","body":"Nisal Silva, did you check my answer underneath?"}],"answers":[{"tags":[],"owner":{"account_id":8264026,"reputation":303,"user_id":6214309,"accept_rate":100,"display_name":"zypa"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1484516218,"creation_date":1484516218,"answer_id":41666597,"question_id":41658631,"body_markdown":"I have made a small Java project that works and does the trick. I hope it helps you understand how to write to a file. At first it checks if the file exists. If not it creates it. Then it writes your two variables. \r\n\r\n    import java.io.BufferedWriter;\r\n    import java.io.File;\r\n    import java.io.FileOutputStream;\r\n    import java.io.FileWriter;\r\n    import java.io.IOException;\r\n    import java.io.OutputStreamWriter;\r\n    import java.io.PrintWriter;\r\n    import java.io.Writer;\r\n    \r\n    public class IO_12_StackOverFlow1 {\r\n    \r\n    \tpublic static void main(String[] args) throws IOException {\r\n    \r\n    \t\tFile file = new File(&quot;emptyFile.txt&quot;);\r\n    \r\n    \t\t// Checks if file does not exist. If it does not, it creates it\r\n    \t\tif (!file.exists()) {\r\n    \t\t\tFileWriter fWriter = new FileWriter(file);\r\n    \t\t\tPrintWriter pWriter = new PrintWriter(fWriter);\r\n    \t\t}\r\n    \r\n    \t\tint limit = 5; // int set to 5\r\n    \t\tboolean on = false; // boolean false\r\n    \r\n    \t\ttry (Writer writer = new BufferedWriter(\r\n    \t\t\t\tnew OutputStreamWriter(new FileOutputStream(&quot;emptyFile.txt&quot;), &quot;utf-8&quot;))) { // sets the output where to write\r\n    \t\t\t\t\twriter.write(&quot;The speed limit is: &quot; + limit + &quot; and &quot;); // writes\r\n    \t\t\t\t\twriter.write(&quot;the motor is: &quot; + on); // continues to write\r\n    \t\t}\r\n    \r\n    \t\tcatch (IOException e) {\r\n    \r\n    \t\t}\r\n    \r\n    \t}\r\n    \r\n    }\r\n\r\n","title":"how to save variables in a file update and load","body":"<p>I have made a small Java project that works and does the trick. I hope it helps you understand how to write to a file. At first it checks if the file exists. If not it creates it. Then it writes your two variables. </p>\n\n<pre><code>import java.io.BufferedWriter;\nimport java.io.File;\nimport java.io.FileOutputStream;\nimport java.io.FileWriter;\nimport java.io.IOException;\nimport java.io.OutputStreamWriter;\nimport java.io.PrintWriter;\nimport java.io.Writer;\n\npublic class IO_12_StackOverFlow1 {\n\n    public static void main(String[] args) throws IOException {\n\n        File file = new File(\"emptyFile.txt\");\n\n        // Checks if file does not exist. If it does not, it creates it\n        if (!file.exists()) {\n            FileWriter fWriter = new FileWriter(file);\n            PrintWriter pWriter = new PrintWriter(fWriter);\n        }\n\n        int limit = 5; // int set to 5\n        boolean on = false; // boolean false\n\n        try (Writer writer = new BufferedWriter(\n                new OutputStreamWriter(new FileOutputStream(\"emptyFile.txt\"), \"utf-8\"))) { // sets the output where to write\n                    writer.write(\"The speed limit is: \" + limit + \" and \"); // writes\n                    writer.write(\"the motor is: \" + on); // continues to write\n        }\n\n        catch (IOException e) {\n\n        }\n\n    }\n\n}\n</code></pre>\n"}],"owner":{"account_id":9941908,"reputation":39,"user_id":7358214,"display_name":"Nisal Silva"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1464,"favorite_count":0,"down_vote_count":5,"up_vote_count":2,"answer_count":1,"score":-3,"last_activity_date":1643528027,"creation_date":1484463318,"question_id":41658631,"body_markdown":"I need to save 2 variables in my program  \r\n\r\nexample:int limit; Boolean on; \r\n \r\n**I set limt variable value using a textfield and on variable value using a toggle button**  \r\nex:**limit**=5; **on**=fales;\r\n  \r\nI want to save this two variables in a file  \r\n\r\nwhen I re run my program i needs to keep values  \r\nex:**limit**=5; **on**=fales; \r\n \r\nwhen I changed those values it needs to be update in the file  \r\nex:**limit**=what ever I enter through textfield and **on**= true or fales according to my choice  \r\n\r\nwhen I run again changed values are needs to be shown in the program \r\n    \r\n        \r\n","title":"how to save variables in a file update and load","body":"<p>I need to save 2 variables in my program  </p>\n\n<p>example:int limit; Boolean on; </p>\n\n<p><strong>I set limt variable value using a textfield and on variable value using a toggle button</strong><br>\nex:<strong>limit</strong>=5; <strong>on</strong>=fales;</p>\n\n<p>I want to save this two variables in a file  </p>\n\n<p>when I re run my program i needs to keep values<br>\nex:<strong>limit</strong>=5; <strong>on</strong>=fales; </p>\n\n<p>when I changed those values it needs to be update in the file<br>\nex:<strong>limit</strong>=what ever I enter through textfield and <strong>on</strong>= true or fales according to my choice  </p>\n\n<p>when I run again changed values are needs to be shown in the program </p>\n"},{"tags":["java","stack","calculator","new-operator"],"comments":[{"owner":{"account_id":10878273,"reputation":334,"user_id":7998077,"display_name":"iambk"},"score":0,"creation_date":1643522722,"post_id":70912201,"comment_id":125359977,"body_markdown":"Is this something intentional: `private int tokens = [&quot;2&quot;,&quot;1&quot;,&quot;+&quot;,&quot;3&quot;,&quot;*&quot;]` or typo?","body":"Is this something intentional: <code>private int tokens = [&quot;2&quot;,&quot;1&quot;,&quot;+&quot;,&quot;3&quot;,&quot;*&quot;]</code> or typo?"}],"answers":[{"tags":[],"owner":{"account_id":22888469,"reputation":1487,"user_id":17028970,"display_name":"carlosdafield"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1643524884,"creation_date":1643524884,"answer_id":70912445,"question_id":70912201,"body_markdown":"I can see that you&#39;re coming from python. Here are some things to fix up about your code.\r\n\r\n**1)** You must end every variable with `;` in java. \r\n\r\n\r\n**2)** It seems like you want to make an array of Strings in java. As seen here \r\n```java\r\nprivate int tokens = [&quot;2&quot;,&quot;1&quot;,&quot;+&quot;,&quot;3&quot;,&quot;*&quot;];\r\n```\r\nthe problem is when you say a tokens is an `int` you have to make it one. So what you really want is a `String[]` aka a String array. So first change tokens to this below.\r\n```java\r\nprivate String[] tokens = [&quot;2&quot;,&quot;1&quot;,&quot;+&quot;,&quot;3&quot;,&quot;*&quot;];\r\n``` \r\n**But wait this will still give you an error** because in java arrays start and end with `{}` So change it to this below and tokens will work\r\n```java\r\nprivate String[] tokens = {&quot;2&quot;,&quot;1&quot;,&quot;+&quot;,&quot;3&quot;,&quot;*&quot;}; // &lt;-- make sure to add ;\r\n``` \r\n\r\n**3)** `public int evalRPN(String[] tokens)` is a method that needs a `String[]` array passed into it. You have to actually call that method for it to run just making `private String[] tokens = {&quot;2&quot;,&quot;1&quot;,&quot;+&quot;,&quot;3&quot;,&quot;*&quot;};` isn&#39;t going to do anything. \r\n\r\n\r\n**Anyways heres a working example below** you can copy and paste the code and run it here (https://www.programiz.com/java-programming/online-compiler/). But right after you do that I highly recommend you watch this (https://youtu.be/eIrMbAQSU34) you need to clear up a lot of your miss conceptions about java. I can&#39;t explain them all in this post.\r\n```java\r\nimport java.util.*; // Import Stack\r\nclass HelloWorld {\r\n    \r\n    \r\n    public static void main(String[] args) {\r\n        String[] tokens = {&quot;2&quot;,&quot;1&quot;,&quot;+&quot;,&quot;3&quot;,&quot;*&quot;}; // &lt;-- make sure to add ;\r\n        \r\n        int value = evalRPN(tokens); // This is what I mean about calling a method\r\n        System.out.println(value);\r\n     \r\n    }\r\n  \r\n    public static int evalRPN(String[] tokens) {\r\n        int a,b;\r\n        Stack&lt;Integer&gt; S = new Stack&lt;Integer&gt;();\r\n        for (String s : tokens) {\r\n            if(s.equals(&quot;+&quot;)) {\r\n                S.add(S.pop()+S.pop());\r\n            }\r\n            else if(s.equals(&quot;/&quot;)) {\r\n                b = S.pop();\r\n                a = S.pop();\r\n                S.add(a / b);\r\n            }\r\n            else if(s.equals(&quot;*&quot;)) {\r\n                S.add(S.pop() * S.pop());\r\n            }\r\n            else if(s.equals(&quot;-&quot;)) {\r\n                b = S.pop();\r\n                a = S.pop();\r\n                S.add(a - b);\r\n            }\r\n            else {\r\n                S.add(Integer.parseInt(s));\r\n            }\r\n        }   \r\n        return S.pop();\r\n    }\r\n\r\n}\r\n\r\n```","title":"stuck on rpn calculator problem java java.lang.String[]","body":"<p>I can see that you're coming from python. Here are some things to fix up about your code.</p>\n<p><strong>1)</strong> You must end every variable with <code>;</code> in java.</p>\n<p><strong>2)</strong> It seems like you want to make an array of Strings in java. As seen here</p>\n<pre class=\"lang-java prettyprint-override\"><code>private int tokens = [&quot;2&quot;,&quot;1&quot;,&quot;+&quot;,&quot;3&quot;,&quot;*&quot;];\n</code></pre>\n<p>the problem is when you say a tokens is an <code>int</code> you have to make it one. So what you really want is a <code>String[]</code> aka a String array. So first change tokens to this below.</p>\n<pre class=\"lang-java prettyprint-override\"><code>private String[] tokens = [&quot;2&quot;,&quot;1&quot;,&quot;+&quot;,&quot;3&quot;,&quot;*&quot;];\n</code></pre>\n<p><strong>But wait this will still give you an error</strong> because in java arrays start and end with <code>{}</code> So change it to this below and tokens will work</p>\n<pre class=\"lang-java prettyprint-override\"><code>private String[] tokens = {&quot;2&quot;,&quot;1&quot;,&quot;+&quot;,&quot;3&quot;,&quot;*&quot;}; // &lt;-- make sure to add ;\n</code></pre>\n<p><strong>3)</strong> <code>public int evalRPN(String[] tokens)</code> is a method that needs a <code>String[]</code> array passed into it. You have to actually call that method for it to run just making <code>private String[] tokens = {&quot;2&quot;,&quot;1&quot;,&quot;+&quot;,&quot;3&quot;,&quot;*&quot;};</code> isn't going to do anything.</p>\n<p><strong>Anyways heres a working example below</strong> you can copy and paste the code and run it here (<a href=\"https://www.programiz.com/java-programming/online-compiler/\" rel=\"nofollow noreferrer\">https://www.programiz.com/java-programming/online-compiler/</a>). But right after you do that I highly recommend you watch this (<a href=\"https://youtu.be/eIrMbAQSU34\" rel=\"nofollow noreferrer\">https://youtu.be/eIrMbAQSU34</a>) you need to clear up a lot of your miss conceptions about java. I can't explain them all in this post.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.*; // Import Stack\nclass HelloWorld {\n    \n    \n    public static void main(String[] args) {\n        String[] tokens = {&quot;2&quot;,&quot;1&quot;,&quot;+&quot;,&quot;3&quot;,&quot;*&quot;}; // &lt;-- make sure to add ;\n        \n        int value = evalRPN(tokens); // This is what I mean about calling a method\n        System.out.println(value);\n     \n    }\n  \n    public static int evalRPN(String[] tokens) {\n        int a,b;\n        Stack&lt;Integer&gt; S = new Stack&lt;Integer&gt;();\n        for (String s : tokens) {\n            if(s.equals(&quot;+&quot;)) {\n                S.add(S.pop()+S.pop());\n            }\n            else if(s.equals(&quot;/&quot;)) {\n                b = S.pop();\n                a = S.pop();\n                S.add(a / b);\n            }\n            else if(s.equals(&quot;*&quot;)) {\n                S.add(S.pop() * S.pop());\n            }\n            else if(s.equals(&quot;-&quot;)) {\n                b = S.pop();\n                a = S.pop();\n                S.add(a - b);\n            }\n            else {\n                S.add(Integer.parseInt(s));\n            }\n        }   \n        return S.pop();\n    }\n\n}\n\n</code></pre>\n"}],"owner":{"account_id":24073849,"reputation":13,"user_id":18049469,"display_name":"crimp crimp"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":185,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":70912445,"answer_count":1,"score":1,"last_activity_date":1643524884,"creation_date":1643521946,"question_id":70912201,"body_markdown":"ive been trying to make a reverse polish notation calculator in java but i keep getting errors i dont understand the cause of.\r\n\r\n           private int tokens = [&quot;2&quot;,&quot;1&quot;,&quot;+&quot;,&quot;3&quot;,&quot;*&quot;]\r\n    public class Solution {\r\n        public int evalRPN(String[] tokens) {\r\n            int a,b;\r\n    \t\tStack&lt;Integer&gt; S = new Stack&lt;Integer&gt;();\r\n    \t\tfor (String s : tokens) {\r\n    \t\t\tif(s.equals(&quot;+&quot;)) {\r\n    \t\t\t\tS.add(S.pop()+S.pop());\r\n    \t\t\t}\r\n    \t\t\telse if(s.equals(&quot;/&quot;)) {\r\n    \t\t\t\tb = S.pop();\r\n    \t\t\t\ta = S.pop();\r\n    \t\t\t\tS.add(a / b);\r\n    \t\t\t}\r\n    \t\t\telse if(s.equals(&quot;*&quot;)) {\r\n    \t\t\t\tS.add(S.pop() * S.pop());\r\n    \t\t\t}\r\n    \t\t\telse if(s.equals(&quot;-&quot;)) {\r\n    \t\t\t\tb = S.pop();\r\n    \t\t\t\ta = S.pop();\r\n    \t\t\t\tS.add(a - b);\r\n    \t\t\t}\r\n    \t\t\telse {\r\n    \t\t\t\tS.add(Integer.parseInt(s));\r\n    \t\t\t}\r\n    \t\t}\t\r\n    \t\treturn S.pop();\r\n    \t}\r\n    }\r\n\r\nive just made an instance of this in the test class and tried running it\r\nintelijij is saying given: string, required string[] or \r\n\r\n    java: method evalRPN in class calculator cannot be applied to given types;\r\n      required: java.lang.String[]\r\n      found:    no arguments\r\n      reason: actual and formal argument lists differ in length\r\n\r\n","title":"stuck on rpn calculator problem java java.lang.String[]","body":"<p>ive been trying to make a reverse polish notation calculator in java but i keep getting errors i dont understand the cause of.</p>\n<pre><code>       private int tokens = [&quot;2&quot;,&quot;1&quot;,&quot;+&quot;,&quot;3&quot;,&quot;*&quot;]\npublic class Solution {\n    public int evalRPN(String[] tokens) {\n        int a,b;\n        Stack&lt;Integer&gt; S = new Stack&lt;Integer&gt;();\n        for (String s : tokens) {\n            if(s.equals(&quot;+&quot;)) {\n                S.add(S.pop()+S.pop());\n            }\n            else if(s.equals(&quot;/&quot;)) {\n                b = S.pop();\n                a = S.pop();\n                S.add(a / b);\n            }\n            else if(s.equals(&quot;*&quot;)) {\n                S.add(S.pop() * S.pop());\n            }\n            else if(s.equals(&quot;-&quot;)) {\n                b = S.pop();\n                a = S.pop();\n                S.add(a - b);\n            }\n            else {\n                S.add(Integer.parseInt(s));\n            }\n        }   \n        return S.pop();\n    }\n}\n</code></pre>\n<p>ive just made an instance of this in the test class and tried running it\nintelijij is saying given: string, required string[] or</p>\n<pre><code>java: method evalRPN in class calculator cannot be applied to given types;\n  required: java.lang.String[]\n  found:    no arguments\n  reason: actual and formal argument lists differ in length\n</code></pre>\n"},{"tags":["javascript","java","node.js","mongodb","mongoose"],"answers":[{"tags":[],"owner":{"account_id":24096711,"reputation":11,"user_id":18069095,"display_name":"jamster02"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1643505001,"creation_date":1643504039,"answer_id":70911009,"question_id":70910954,"body_markdown":"The searchRepo variable in `search.controller.js` is not set to the searchRepository object found in `search.repository.js`. Make sure to export and import that object properly. It is currently only set to a string. Instead, you could use `require` (ex. `require({file_path}).{identifier}` to import it. ","title":"Mongoose controller cant find a method from Repository","body":"<p>The searchRepo variable in <code>search.controller.js</code> is not set to the searchRepository object found in <code>search.repository.js</code>. Make sure to export and import that object properly. It is currently only set to a string. Instead, you could use <code>require</code> (ex. <code>require({file_path}).{identifier}</code> to import it.</p>\n"},{"tags":[],"owner":{"account_id":12921205,"reputation":1308,"user_id":9343622,"display_name":"cEeNiKc"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1643524855,"creation_date":1643524855,"answer_id":70912443,"question_id":70910954,"body_markdown":"You are not importing searchRepo properly in ```search.controller.js``` file.\r\n\r\nInstead of \r\n```\r\nconst searchRepo = &quot;../repositories/search.repository&quot;;\r\n```\r\n\r\nDo this\r\n```\r\nconst searchRepo = require(&quot;../repositories/search.repository&quot;);\r\n```","title":"Mongoose controller cant find a method from Repository","body":"<p>You are not importing searchRepo properly in <code>search.controller.js</code> file.</p>\n<p>Instead of</p>\n<pre><code>const searchRepo = &quot;../repositories/search.repository&quot;;\n</code></pre>\n<p>Do this</p>\n<pre><code>const searchRepo = require(&quot;../repositories/search.repository&quot;);\n</code></pre>\n"}],"owner":{"account_id":24096724,"reputation":1,"user_id":18069108,"display_name":"TrafficLights"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":123,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":2,"score":-1,"last_activity_date":1643524855,"creation_date":1643503199,"question_id":70910954,"body_markdown":"I currently have my code setup in 3 files: `Search.model.js`, `Search.repository.js`, and `search.controller.js`.\r\n\r\nThe issue is when I send a request to the Route it reaches the controller but cannot call the function in the Repository. The code is below:\r\n\r\n`search.repository.js`\r\n```\r\nconst mongoose = require(&#39;mongoose&#39;);\r\nconst Search = require(&#39;../models/search.model&#39;);\r\nconst perPage = config.PAGINATION_PERPAGE;\r\n\r\nconst searchRepository = {\r\n    save: async (data) =&gt; {\r\n        console.log(&quot;Reached save in Repository&quot;);\r\n        try {\r\n            let record = await Search.create(data);\r\n            if (!record) {\r\n                return null;\r\n            }\r\n            return record;\r\n        } catch (e) {\r\n            throw e;\r\n        }\r\n    },\r\n};\r\nmodule.exports = searchRepository;\r\n```\r\n\r\n`search.controller.js`\r\n```\r\nconst mongoose = require(&quot;mongoose&quot;);\r\nconst searchRepo = &quot;../repositories/search.repository&quot;;\r\n\r\nclass SearchController  {\r\nconstructor() {}\r\n\r\nasync store(req) {\r\n  console.log(&quot;Reached Store&quot;);\r\n    try{\r\n      let record = await searchRepo.save(req.body);\r\n      if (record) {\r\n        return { status: 200, data: {}, message: &quot;Saved Successfully&quot; };\r\n      } else {\r\n        return { status: 201, data: {}, message: &quot;Unable to save your record. Please try again later.&quot; };\r\n      }\r\n    }\r\n    catch(e){\r\n      return { status: 201, data: {}, message: e.message };\r\n    }\r\n}\r\n}\r\nmodule.exports = new SearchController();\r\n\r\n```\r\nThe error I get:\r\n```\r\n{\r\n    &quot;status&quot;: 201,\r\n    &quot;data&quot;: {},\r\n    &quot;message&quot;: &quot;searchRepo.save is not a function&quot;\r\n}\r\n```\r\n","title":"Mongoose controller cant find a method from Repository","body":"<p>I currently have my code setup in 3 files: <code>Search.model.js</code>, <code>Search.repository.js</code>, and <code>search.controller.js</code>.</p>\n<p>The issue is when I send a request to the Route it reaches the controller but cannot call the function in the Repository. The code is below:</p>\n<p><code>search.repository.js</code></p>\n<pre><code>const mongoose = require('mongoose');\nconst Search = require('../models/search.model');\nconst perPage = config.PAGINATION_PERPAGE;\n\nconst searchRepository = {\n    save: async (data) =&gt; {\n        console.log(&quot;Reached save in Repository&quot;);\n        try {\n            let record = await Search.create(data);\n            if (!record) {\n                return null;\n            }\n            return record;\n        } catch (e) {\n            throw e;\n        }\n    },\n};\nmodule.exports = searchRepository;\n</code></pre>\n<p><code>search.controller.js</code></p>\n<pre><code>const mongoose = require(&quot;mongoose&quot;);\nconst searchRepo = &quot;../repositories/search.repository&quot;;\n\nclass SearchController  {\nconstructor() {}\n\nasync store(req) {\n  console.log(&quot;Reached Store&quot;);\n    try{\n      let record = await searchRepo.save(req.body);\n      if (record) {\n        return { status: 200, data: {}, message: &quot;Saved Successfully&quot; };\n      } else {\n        return { status: 201, data: {}, message: &quot;Unable to save your record. Please try again later.&quot; };\n      }\n    }\n    catch(e){\n      return { status: 201, data: {}, message: e.message };\n    }\n}\n}\nmodule.exports = new SearchController();\n\n</code></pre>\n<p>The error I get:</p>\n<pre><code>{\n    &quot;status&quot;: 201,\n    &quot;data&quot;: {},\n    &quot;message&quot;: &quot;searchRepo.save is not a function&quot;\n}\n</code></pre>\n"},{"tags":["java","list","java-stream","set-difference"],"answers":[{"tags":[],"owner":{"account_id":9760,"reputation":85859,"user_id":18157,"accept_rate":100,"display_name":"Jim Garrison"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1643071460,"creation_date":1643071460,"answer_id":70842191,"question_id":70842159,"body_markdown":"This will do it\r\n\r\n    secondList.removeAll(firstList);\r\n\r\nIf you need `secondList` to not be modified you must make a deep copy first and use the deep copy instead of `secondList`.","title":"Comparing two list values and finding only values from one list that do not exist in another","body":"<p>This will do it</p>\n<pre><code>secondList.removeAll(firstList);\n</code></pre>\n<p>If you need <code>secondList</code> to not be modified you must make a deep copy first and use the deep copy instead of <code>secondList</code>.</p>\n"},{"tags":[],"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1643513492,"creation_date":1643080950,"answer_id":70843066,"question_id":70842159,"body_markdown":"If you want to use streams for this purpose the most efficient approach will look like this:\r\n```  \r\n    public static List&lt;Long&gt; removeIntersection(List&lt;Long&gt; source, List&lt;Test&gt; valuesToRemove) {\r\n        Set&lt;Long&gt; toRemove = toSet(valuesToRemove);\r\n        return source.stream()\r\n                .filter(num -&gt; !toRemove.contains(num))\r\n                .collect(Collectors.toList());\r\n    }\r\n```\r\n```\r\n    private static Set&lt;Long&gt; toSet(List&lt;Test&gt; valuesToRemove) {\r\n        return valuesToRemove.stream()\r\n                .map(Test::getIdNo)\r\n                .collect(Collectors.toSet());\r\n    }\r\n```\r\nThe same result could be achieved by utilizing **removeAll()** and **retainAll()** methods from the Collection interface. These methods are optimized for ArrayList and perform in a linear time. \r\n\r\nYou just have to coerce your list of test objects to a list of Long and make a copy of the second list which gonna be mutated.\r\n\r\nTo demonstrate how these methods work let&#39;s consider the following example with lists of Integer values.\r\n\r\n**removeAll()** will remove all elements contained in the given collection from this collection\r\n\r\n**retainAll()** will retain only elements contained in both collections\r\n```\r\n    public static void main(String[] args) {\r\n        List&lt;Integer&gt; source = new ArrayList&lt;&gt;(List.of(1, 2, 3, 4, 5, 6, 7, 8, 9));\r\n        List&lt;Integer&gt; valuesToRemove = new ArrayList&lt;&gt;(List.of(1, 2, 3, 4));\r\n        source.removeAll(valuesToRemove);\r\n        System.out.println(&quot;result of removeAll: &quot; + source);\r\n\r\n        source = new ArrayList&lt;&gt;(List.of(1, 2, 3, 4, 5, 6, 7, 8, 9));\r\n        List&lt;Integer&gt; valuesToRetain = new ArrayList&lt;&gt;(List.of(5, 6, 7, 8, 9));\r\n        source.retainAll(valuesToRetain);\r\n        System.out.println(&quot;result of retainAll: &quot; + source);\r\n    }\r\n```\r\n**output**\r\n```\r\nresult of removeAll: [5, 6, 7, 8, 9]\r\nresult of retainAll: [5, 6, 7, 8, 9]\r\n```\r\n","title":"Comparing two list values and finding only values from one list that do not exist in another","body":"<p>If you want to use streams for this purpose the most efficient approach will look like this:</p>\n<pre><code>    public static List&lt;Long&gt; removeIntersection(List&lt;Long&gt; source, List&lt;Test&gt; valuesToRemove) {\n        Set&lt;Long&gt; toRemove = toSet(valuesToRemove);\n        return source.stream()\n                .filter(num -&gt; !toRemove.contains(num))\n                .collect(Collectors.toList());\n    }\n</code></pre>\n<pre><code>    private static Set&lt;Long&gt; toSet(List&lt;Test&gt; valuesToRemove) {\n        return valuesToRemove.stream()\n                .map(Test::getIdNo)\n                .collect(Collectors.toSet());\n    }\n</code></pre>\n<p>The same result could be achieved by utilizing <strong>removeAll()</strong> and <strong>retainAll()</strong> methods from the Collection interface. These methods are optimized for ArrayList and perform in a linear time.</p>\n<p>You just have to coerce your list of test objects to a list of Long and make a copy of the second list which gonna be mutated.</p>\n<p>To demonstrate how these methods work let's consider the following example with lists of Integer values.</p>\n<p><strong>removeAll()</strong> will remove all elements contained in the given collection from this collection</p>\n<p><strong>retainAll()</strong> will retain only elements contained in both collections</p>\n<pre><code>    public static void main(String[] args) {\n        List&lt;Integer&gt; source = new ArrayList&lt;&gt;(List.of(1, 2, 3, 4, 5, 6, 7, 8, 9));\n        List&lt;Integer&gt; valuesToRemove = new ArrayList&lt;&gt;(List.of(1, 2, 3, 4));\n        source.removeAll(valuesToRemove);\n        System.out.println(&quot;result of removeAll: &quot; + source);\n\n        source = new ArrayList&lt;&gt;(List.of(1, 2, 3, 4, 5, 6, 7, 8, 9));\n        List&lt;Integer&gt; valuesToRetain = new ArrayList&lt;&gt;(List.of(5, 6, 7, 8, 9));\n        source.retainAll(valuesToRetain);\n        System.out.println(&quot;result of retainAll: &quot; + source);\n    }\n</code></pre>\n<p><strong>output</strong></p>\n<pre><code>result of removeAll: [5, 6, 7, 8, 9]\nresult of retainAll: [5, 6, 7, 8, 9]\n</code></pre>\n"}],"owner":{"account_id":22169428,"reputation":71,"user_id":16415110,"display_name":"MR_AD"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":420,"favorite_count":0,"down_vote_count":2,"up_vote_count":2,"accepted_answer_id":70843066,"answer_count":2,"score":0,"last_activity_date":1643524003,"creation_date":1643071162,"question_id":70842159,"body_markdown":"I have two list as shown below\r\n\r\n    List&lt;Test&gt; fisrtList= Arrays.asList(\r\n    \t\t\t\tnew Test(1, 1L),\r\n    \t\t\t\tnew Test(2, 3L),\r\n    \t\t\t\tnew Test(2, 4L)\r\n    \t\t\t\t\r\n    \t\t\t\t);\r\n    \t\t\r\n    List&lt;Long&gt; secondList=Arrays.asList(3L, 5L);\r\n    //Find value of second  list that are not in first list\r\n\r\nExpected answer from the comparision should be 5L as it is not in firstList.\r\n\r\nHere is my Test class\r\n\r\n    public class Test {\r\n    \t\r\n    \tpublic Test(int id, Long idNo) {\r\n    \t\tthis.id=id;\r\n    \t\tthis.idNo=idNo;\r\n    \t}\r\n    \r\n    \tprivate int id;\r\n    \t\r\n    \tprivate Long idNo;\r\n    \r\n    \tpublic int getId() {\r\n    \t\treturn id;\r\n    \t}\r\n    \r\n    \tpublic void setId(int id) {\r\n    \t\tthis.id = id;\r\n    \t}\r\n    \r\n    \tpublic Long getIdNo() {\r\n    \t\treturn idNo;\r\n    \t}\r\n    \r\n    \tpublic void setIdNo(Long idNo) {\r\n    \t\tthis.idNo = idNo;\r\n    \t}\r\n    \t\r\n    }\r\n\r\n\r\nHow can I find the Long values from secondList that are not in the firstList?","title":"Comparing two list values and finding only values from one list that do not exist in another","body":"<p>I have two list as shown below</p>\n<pre><code>List&lt;Test&gt; fisrtList= Arrays.asList(\n                new Test(1, 1L),\n                new Test(2, 3L),\n                new Test(2, 4L)\n                \n                );\n        \nList&lt;Long&gt; secondList=Arrays.asList(3L, 5L);\n//Find value of second  list that are not in first list\n</code></pre>\n<p>Expected answer from the comparision should be 5L as it is not in firstList.</p>\n<p>Here is my Test class</p>\n<pre><code>public class Test {\n    \n    public Test(int id, Long idNo) {\n        this.id=id;\n        this.idNo=idNo;\n    }\n\n    private int id;\n    \n    private Long idNo;\n\n    public int getId() {\n        return id;\n    }\n\n    public void setId(int id) {\n        this.id = id;\n    }\n\n    public Long getIdNo() {\n        return idNo;\n    }\n\n    public void setIdNo(Long idNo) {\n        this.idNo = idNo;\n    }\n    \n}\n</code></pre>\n<p>How can I find the Long values from secondList that are not in the firstList?</p>\n"},{"tags":["java","spring","spring-boot","sockets","tcp"],"comments":[{"owner":{"account_id":16657879,"reputation":2625,"user_id":12038714,"display_name":"J Asgarov"},"score":0,"creation_date":1643529117,"post_id":70912372,"comment_id":125360865,"body_markdown":"Spring Boot works with embedded Tomcat. You could of course go and turn of that embedded Tomcat and stuff but that would get more complicated where you task is to write a simple server probably a university assignment. So if I was you I would definitely not use spring boot, implement the server yourself based on any of million &quot;your own tcp server in java&quot; tutorial and then add spring (not boot) as dependency container if you wish.","body":"Spring Boot works with embedded Tomcat. You could of course go and turn of that embedded Tomcat and stuff but that would get more complicated where you task is to write a simple server probably a university assignment. So if I was you I would definitely not use spring boot, implement the server yourself based on any of million &quot;your own tcp server in java&quot; tutorial and then add spring (not boot) as dependency container if you wish."},{"owner":{"account_id":9435013,"reputation":27,"user_id":7017242,"accept_rate":0,"display_name":"Gurpreet "},"score":0,"creation_date":1643543088,"post_id":70912372,"comment_id":125363195,"body_markdown":"@JAsgarov: Thank you for the response. Yes, I need the spring as a dependency container only where this server module has a dependency on the provider module (another spring based) which communicate with DB for CRUD operations and couple of more microservices with whom this module communicate via Kafka. However this module is not a assignment rather a problem in hand where it will communicate with Payment Schemes over TCP/IP and internal microservices using KAFKA Bus. Thank you","body":"@JAsgarov: Thank you for the response. Yes, I need the spring as a dependency container only where this server module has a dependency on the provider module (another spring based) which communicate with DB for CRUD operations and couple of more microservices with whom this module communicate via Kafka. However this module is not a assignment rather a problem in hand where it will communicate with Payment Schemes over TCP/IP and internal microservices using KAFKA Bus. Thank you"},{"owner":{"account_id":16657879,"reputation":2625,"user_id":12038714,"display_name":"J Asgarov"},"score":0,"creation_date":1643544030,"post_id":70912372,"comment_id":125363389,"body_markdown":"if it is real work/life situation what is the problem with embedded Tomcat? It also uses TCP so..","body":"if it is real work/life situation what is the problem with embedded Tomcat? It also uses TCP so.."},{"owner":{"account_id":9435013,"reputation":27,"user_id":7017242,"accept_rate":0,"display_name":"Gurpreet "},"score":0,"creation_date":1643544412,"post_id":70912372,"comment_id":125363496,"body_markdown":"I want to run a TCP Socket based server (socket programming) with more control on the sockfds etc. than running/using embedded tomcat/jetty and yet need the autoconfiguration from boot","body":"I want to run a TCP Socket based server (socket programming) with more control on the sockfds etc. than running/using embedded tomcat/jetty and yet need the autoconfiguration from boot"}],"owner":{"account_id":9435013,"reputation":27,"user_id":7017242,"accept_rate":0,"display_name":"Gurpreet "},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":536,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1643523962,"creation_date":1643523962,"question_id":70912372,"body_markdown":"I want to write a TCP/IP Socket based application using Java Spring/Spring Boot framework. However I am facing problem in bringing the TCP server up. Whenever I init the application it brings the tomcat up instead of my tcp server port. My requirement is that the my application will act as a TCP server/client based on the configuration and will connect/accept connection from Third Party. It shall process the requests and send responses back. The application needs to receive/send stream of bytes.\r\n\r\nI tried googling a lot and found a few articles indicating implementing a CommandLineRunner interface of SpringBoot however that also did not work. Could you please assist on this","title":"Running TCP server in Java Spring/Springboot framework instead of http/https","body":"<p>I want to write a TCP/IP Socket based application using Java Spring/Spring Boot framework. However I am facing problem in bringing the TCP server up. Whenever I init the application it brings the tomcat up instead of my tcp server port. My requirement is that the my application will act as a TCP server/client based on the configuration and will connect/accept connection from Third Party. It shall process the requests and send responses back. The application needs to receive/send stream of bytes.</p>\n<p>I tried googling a lot and found a few articles indicating implementing a CommandLineRunner interface of SpringBoot however that also did not work. Could you please assist on this</p>\n"},{"tags":["java","arrays","sorting","class-library"],"comments":[{"owner":{"account_id":31142,"reputation":28734,"user_id":85306,"accept_rate":94,"display_name":"Jherico"},"score":0,"creation_date":1244777780,"post_id":951848,"comment_id":793151,"body_markdown":"even if this were put into the JDK, something I really doubt would ever happen, it would end up being a static utility method on the Arrays class (or something similar) and would end up being implemented very similar to something below.  So why can&#39;t you just write the function?","body":"even if this were put into the JDK, something I really doubt would ever happen, it would end up being a static utility method on the Arrays class (or something similar) and would end up being implemented very similar to something below.  So why can&#39;t you just write the function?"},{"owner":{"account_id":38847,"reputation":19863,"user_id":111781,"display_name":"jerryjvl"},"score":0,"creation_date":1244777917,"post_id":951848,"comment_id":793157,"body_markdown":"What is the problem with a custom comparator as a solution? I may be misunderstanding the approach this implies in your mind.","body":"What is the problem with a custom comparator as a solution? I may be misunderstanding the approach this implies in your mind."},{"owner":{"account_id":12610,"reputation":4863,"user_id":24937,"accept_rate":67,"display_name":"edgar.holleis"},"score":0,"creation_date":1245263999,"post_id":951848,"comment_id":817681,"body_markdown":"Maybe I&#39;m not looking hard enough, but for what I know there is no way to use a Comparator without boxing every element on each call to the Comparator. For an array of n floats that would mean 2*n*log(n) Floats for the garbage collector. With n=10000 that means 80000 pieces of garbage. I would much prefer a static utility method in the Arrays class. If I didn&#39;t care about the garbage, I could have used a TreeMap or something in the first place.","body":"Maybe I&#39;m not looking hard enough, but for what I know there is no way to use a Comparator without boxing every element on each call to the Comparator. For an array of n floats that would mean 2*n*log(n) Floats for the garbage collector. With n=10000 that means 80000 pieces of garbage. I would much prefer a static utility method in the Arrays class. If I didn&#39;t care about the garbage, I could have used a TreeMap or something in the first place."},{"owner":{"account_id":46176,"reputation":2238,"user_id":136328,"accept_rate":85,"display_name":"twolfe18"},"score":0,"creation_date":1285809231,"post_id":951848,"comment_id":4062731,"body_markdown":"This is so useful and I wish you could do it in Java. In R you can just use the rank() function.","body":"This is so useful and I wish you could do it in Java. In R you can just use the rank() function."},{"owner":{"account_id":71043,"reputation":30960,"user_id":205521,"accept_rate":89,"display_name":"Thomas Ahle"},"score":0,"creation_date":1321539975,"post_id":951848,"comment_id":10030574,"body_markdown":"If you have less than 5000 numbers, just use bubble sort. It&#39;s easy to read, short, and fast enough.","body":"If you have less than 5000 numbers, just use bubble sort. It&#39;s easy to read, short, and fast enough."},{"owner":{"account_id":5547319,"reputation":1577,"user_id":4401569,"display_name":"Pratap Koritala"},"score":0,"creation_date":1456753386,"post_id":951848,"comment_id":59078500,"body_markdown":"It can be done with &lt;5 LOC with Java 8, http://stackoverflow.com/questions/951848/java-array-sort-quick-way-to-get-a-sorted-list-of-indices-of-an-array/35701049#35701049","body":"It can be done with &lt;5 LOC with Java 8, <a href=\"http://stackoverflow.com/questions/951848/java-array-sort-quick-way-to-get-a-sorted-list-of-indices-of-an-array/35701049#35701049\" title=\"java array sort quick way to get a sorted list of indices of an array\">stackoverflow.com/questions/951848/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":24810,"reputation":44144,"user_id":63309,"accept_rate":70,"display_name":"Tom"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1244135259,"creation_date":1244135259,"answer_id":951860,"question_id":951848,"body_markdown":"I guess the easiest way to do it is to index the array as it is created. You would need key,value pairs. If the index is a separate structure, then i cant see how you could do it without other objects (interested in seeing it though)","title":"Java Array sort: Quick way to get a sorted list of indices of an array","body":"<p>I guess the easiest way to do it is to index the array as it is created. You would need key,value pairs. If the index is a separate structure, then i cant see how you could do it without other objects (interested in seeing it though)</p>\n"},{"tags":[],"owner":{"account_id":31142,"reputation":28734,"user_id":85306,"accept_rate":94,"display_name":"Jherico"},"down_vote_count":0,"up_vote_count":23,"is_accepted":false,"score":23,"last_activity_date":1245872987,"creation_date":1244135848,"answer_id":951910,"question_id":951848,"body_markdown":"Create a `TreeMap` of values to indices\r\n\r\n        float[] array = new float[]{};\r\n        Map&lt;Float, Integer&gt; map = new TreeMap&lt;Float, Integer&gt;();\r\n        for (int i = 0; i &lt; array.length; ++i) {\r\n            map.put(array[i], i);\r\n        }\r\n        Collection&lt;Integer&gt; indices = map.values();\r\n\r\nindices will be the sorted by the floats they point to, the original array is untouched.  Converting the `Collection&lt;Integer&gt;` to a `int[]` is left as an exercise if it&#39;s really necessary.\r\n\r\nEDIT: \r\nAs noted in the comments, this approach does not work if there are duplicate values in the float array.  This can be addressed by making the `Map&lt;Float, Integer&gt;` into a `Map&lt;Float, List&lt;Integer&gt;&gt;` though this will complicate the inside of the for loop and the generation of the final collection slightly.","title":"Java Array sort: Quick way to get a sorted list of indices of an array","body":"<p>Create a <code>TreeMap</code> of values to indices</p>\n\n<pre><code>    float[] array = new float[]{};\n    Map&lt;Float, Integer&gt; map = new TreeMap&lt;Float, Integer&gt;();\n    for (int i = 0; i &lt; array.length; ++i) {\n        map.put(array[i], i);\n    }\n    Collection&lt;Integer&gt; indices = map.values();\n</code></pre>\n\n<p>indices will be the sorted by the floats they point to, the original array is untouched.  Converting the <code>Collection&lt;Integer&gt;</code> to a <code>int[]</code> is left as an exercise if it's really necessary.</p>\n\n<p>EDIT: \nAs noted in the comments, this approach does not work if there are duplicate values in the float array.  This can be addressed by making the <code>Map&lt;Float, Integer&gt;</code> into a <code>Map&lt;Float, List&lt;Integer&gt;&gt;</code> though this will complicate the inside of the for loop and the generation of the final collection slightly.</p>\n"},{"tags":[],"owner":{"account_id":2466,"reputation":34852,"user_id":3434,"accept_rate":90,"display_name":"Apocalisp"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1423840019,"creation_date":1244136042,"answer_id":951930,"question_id":951848,"body_markdown":"With [Functional Java][1]:\r\n\r\n    import static fj.data.Array.array;\r\n    import static fj.pre.Ord.*;\r\n    import fj.P2;\r\n    \r\n    array(d).toStream().zipIndex().sort(p2Ord(doubleOrd, intOrd))\r\n      .map(P2.&lt;Double, Integer&gt;__2()).toArray();\r\n\r\n  [1]: http://code.google.com/p/functionaljava","title":"Java Array sort: Quick way to get a sorted list of indices of an array","body":"<p>With <a href=\"http://code.google.com/p/functionaljava\" rel=\"nofollow noreferrer\">Functional Java</a>:</p>\n\n<pre><code>import static fj.data.Array.array;\nimport static fj.pre.Ord.*;\nimport fj.P2;\n\narray(d).toStream().zipIndex().sort(p2Ord(doubleOrd, intOrd))\n  .map(P2.&lt;Double, Integer&gt;__2()).toArray();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":27004,"reputation":28823,"user_id":70795,"accept_rate":56,"display_name":"Mark"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1244193740,"creation_date":1244193740,"answer_id":954991,"question_id":951848,"body_markdown":"Convert the input to a pair class like the one below and then sort this using Arrays.sort(). Arrays.sort() ensures that original order is preserved for equal values like Matlab does. You then need to convert the sorted result back to the separate arrays.\r\n\r\n    class SortPair implements Comparable&lt;SortPair&gt;\r\n    {\r\n      private int originalIndex;\r\n      private double value;\r\n    \r\n      public SortPair(double value, int originalIndex)\r\n      {\r\n        this.value = value;\r\n        this.originalIndex = originalIndex;\r\n      }\r\n\r\n      @Override public int compareTo(SortPair o)\r\n      {\r\n        return Double.compare(value, o.getValue());\r\n      }\r\n\r\n      public int getOriginalIndex()\r\n      {\r\n        return originalIndex;\r\n      }\r\n\r\n      public double getValue()\r\n      {\r\n        return value;\r\n      }\r\n   }","title":"Java Array sort: Quick way to get a sorted list of indices of an array","body":"<p>Convert the input to a pair class like the one below and then sort this using Arrays.sort(). Arrays.sort() ensures that original order is preserved for equal values like Matlab does. You then need to convert the sorted result back to the separate arrays.</p>\n\n<pre><code>class SortPair implements Comparable&lt;SortPair&gt;\n{\n  private int originalIndex;\n  private double value;\n\n  public SortPair(double value, int originalIndex)\n  {\n    this.value = value;\n    this.originalIndex = originalIndex;\n  }\n\n  @Override public int compareTo(SortPair o)\n  {\n    return Double.compare(value, o.getValue());\n  }\n\n  public int getOriginalIndex()\n  {\n    return originalIndex;\n  }\n\n  public double getValue()\n  {\n    return value;\n  }\n</code></pre>\n\n<p>}</p>\n"},{"tags":[],"owner":{"account_id":24127,"reputation":69392,"user_id":61158,"accept_rate":98,"display_name":"akarnokd"},"down_vote_count":1,"up_vote_count":19,"is_accepted":true,"score":18,"last_activity_date":1245872295,"creation_date":1245872295,"answer_id":1040503,"question_id":951848,"body_markdown":"I would tailor the quicksort algorithm to perform the exchange operation on multiple arrays at the same time: the index array and the value array. For example (based on this [quicksort][1]):\r\n\r\n    public static void quicksort(float[] main, int[] index) {\r\n        quicksort(main, index, 0, index.length - 1);\r\n    }\r\n\r\n    // quicksort a[left] to a[right]\r\n    public static void quicksort(float[] a, int[] index, int left, int right) {\r\n        if (right &lt;= left) return;\r\n        int i = partition(a, index, left, right);\r\n        quicksort(a, index, left, i-1);\r\n        quicksort(a, index, i+1, right);\r\n    }\r\n\r\n    // partition a[left] to a[right], assumes left &lt; right\r\n    private static int partition(float[] a, int[] index, \r\n    int left, int right) {\r\n        int i = left - 1;\r\n        int j = right;\r\n        while (true) {\r\n            while (less(a[++i], a[right]))      // find item on left to swap\r\n                ;                               // a[right] acts as sentinel\r\n            while (less(a[right], a[--j]))      // find item on right to swap\r\n                if (j == left) break;           // don&#39;t go out-of-bounds\r\n            if (i &gt;= j) break;                  // check if pointers cross\r\n            exch(a, index, i, j);               // swap two elements into place\r\n        }\r\n        exch(a, index, i, right);               // swap with partition element\r\n        return i;\r\n    }\r\n\r\n    // is x &lt; y ?\r\n    private static boolean less(float x, float y) {\r\n        return (x &lt; y);\r\n    }\r\n\r\n    // exchange a[i] and a[j]\r\n    private static void exch(float[] a, int[] index, int i, int j) {\r\n        float swap = a[i];\r\n        a[i] = a[j];\r\n        a[j] = swap;\r\n        int b = index[i];\r\n        index[i] = index[j];\r\n        index[j] = b;\r\n    }\r\n\r\n\r\n  [1]: http://www.cs.princeton.edu/introcs/42sort/QuickSort.java.html","title":"Java Array sort: Quick way to get a sorted list of indices of an array","body":"<p>I would tailor the quicksort algorithm to perform the exchange operation on multiple arrays at the same time: the index array and the value array. For example (based on this <a href=\"http://www.cs.princeton.edu/introcs/42sort/QuickSort.java.html\" rel=\"noreferrer\">quicksort</a>):</p>\n\n<pre><code>public static void quicksort(float[] main, int[] index) {\n    quicksort(main, index, 0, index.length - 1);\n}\n\n// quicksort a[left] to a[right]\npublic static void quicksort(float[] a, int[] index, int left, int right) {\n    if (right &lt;= left) return;\n    int i = partition(a, index, left, right);\n    quicksort(a, index, left, i-1);\n    quicksort(a, index, i+1, right);\n}\n\n// partition a[left] to a[right], assumes left &lt; right\nprivate static int partition(float[] a, int[] index, \nint left, int right) {\n    int i = left - 1;\n    int j = right;\n    while (true) {\n        while (less(a[++i], a[right]))      // find item on left to swap\n            ;                               // a[right] acts as sentinel\n        while (less(a[right], a[--j]))      // find item on right to swap\n            if (j == left) break;           // don't go out-of-bounds\n        if (i &gt;= j) break;                  // check if pointers cross\n        exch(a, index, i, j);               // swap two elements into place\n    }\n    exch(a, index, i, right);               // swap with partition element\n    return i;\n}\n\n// is x &lt; y ?\nprivate static boolean less(float x, float y) {\n    return (x &lt; y);\n}\n\n// exchange a[i] and a[j]\nprivate static void exch(float[] a, int[] index, int i, int j) {\n    float swap = a[i];\n    a[i] = a[j];\n    a[j] = swap;\n    int b = index[i];\n    index[i] = index[j];\n    index[j] = b;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11188,"reputation":75684,"user_id":21441,"accept_rate":100,"display_name":"Mark Elliot"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1258236001,"creation_date":1258235445,"answer_id":1735724,"question_id":951848,"body_markdown":"The more general case of [Jherico&#39;s answer][1] that allows duplicate values would be this:\r\n\r\n    // Assuming you&#39;ve got: float[] array; defined already\r\n\r\n    TreeMap&lt;Float, List&lt;Integer&gt;&gt; map = new TreeMap&lt;Float, List&lt;Integer&gt;&gt;();\r\n    for(int i = 0; i &lt; array.length; i++) {\r\n        List&lt;Integer&gt; ind = map.get(array[i]);\r\n        if(ind == null){\r\n            ind = new ArrayList&lt;Integer&gt;();\r\n            map.put(array[i], ind);\r\n        }\r\n        ind.add(i);\r\n    }\r\n\r\n    // Now flatten the list\r\n    List&lt;Integer&gt; indices = new ArrayList&lt;Integer&gt;();\r\n    for(List&lt;Integer&gt; arr : map.values()) {\r\n        indices.addAll(arr);\r\n    }\r\n\r\n\r\n\r\n[1]:https://stackoverflow.com/questions/951848/java-array-sort-quick-way-to-get-a-sorted-list-of-indices-of-an-array/951910#951910\r\n","title":"Java Array sort: Quick way to get a sorted list of indices of an array","body":"<p>The more general case of <a href=\"https://stackoverflow.com/questions/951848/java-array-sort-quick-way-to-get-a-sorted-list-of-indices-of-an-array/951910#951910\">Jherico's answer</a> that allows duplicate values would be this:</p>\n\n<pre><code>// Assuming you've got: float[] array; defined already\n\nTreeMap&lt;Float, List&lt;Integer&gt;&gt; map = new TreeMap&lt;Float, List&lt;Integer&gt;&gt;();\nfor(int i = 0; i &lt; array.length; i++) {\n    List&lt;Integer&gt; ind = map.get(array[i]);\n    if(ind == null){\n        ind = new ArrayList&lt;Integer&gt;();\n        map.put(array[i], ind);\n    }\n    ind.add(i);\n}\n\n// Now flatten the list\nList&lt;Integer&gt; indices = new ArrayList&lt;Integer&gt;();\nfor(List&lt;Integer&gt; arr : map.values()) {\n    indices.addAll(arr);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":118937,"reputation":321,"user_id":310313,"display_name":"carloscs"},"down_vote_count":0,"up_vote_count":32,"is_accepted":false,"score":32,"last_activity_date":1270580093,"creation_date":1270580093,"answer_id":2587463,"question_id":951848,"body_markdown":"Simple solution to create an indexer array: sort the indexer comparing the data values:\r\n\r\n    final Integer[] idx = { 0, 1, 2, 3 };\r\n    final float[] data = { 1.7f, -0.3f,  2.1f,  0.5f };\r\n     \r\n    Arrays.sort(idx, new Comparator&lt;Integer&gt;() {\r\n    \t@Override public int compare(final Integer o1, final Integer o2) {\r\n    \t\treturn Float.compare(data[o1], data[o2]);\r\n    \t}\r\n    });\r\n\r\n","title":"Java Array sort: Quick way to get a sorted list of indices of an array","body":"<p>Simple solution to create an indexer array: sort the indexer comparing the data values:</p>\n\n<pre><code>final Integer[] idx = { 0, 1, 2, 3 };\nfinal float[] data = { 1.7f, -0.3f,  2.1f,  0.5f };\n\nArrays.sort(idx, new Comparator&lt;Integer&gt;() {\n    @Override public int compare(final Integer o1, final Integer o2) {\n        return Float.compare(data[o1], data[o2]);\n    }\n});\n</code></pre>\n"},{"tags":[],"owner":{"account_id":37021,"reputation":7541,"user_id":105752,"accept_rate":100,"display_name":"xan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1293940529,"creation_date":1293940529,"answer_id":4577035,"question_id":951848,"body_markdown":"Another non-simple solution. Here&#39;s a merge sort version which is [stable][1] and doesn&#39;t modify the source array, though the merge requires extra memory.\r\n\r\n\r\n    public static int[] sortedIndices(double[] x) {\r\n        int[] ix = new int[x.length];\r\n        int[] scratch = new int[x.length];\r\n        for (int i = 0; i &lt; ix.length; i++) {\r\n            ix[i] = i;\r\n        }\r\n        mergeSortIndexed(x, ix, scratch, 0, x.length - 1);\r\n        return ix;\r\n    }\r\n\r\n    private static void mergeSortIndexed(double[] x, int[] ix, int[] scratch, int lo, int hi) {\r\n        if (lo == hi)\r\n            return;\r\n        int mid = (lo + hi + 1) / 2;\r\n        mergeSortIndexed(x, ix, scratch, lo, mid - 1);\r\n        mergeSortIndexed(x, ix, scratch, mid, hi);\r\n        mergeIndexed(x, ix, scratch, lo, mid - 1, mid, hi);\r\n    }\r\n\r\n    private static void mergeIndexed(double[] x, int[] ix, int[] scratch, int lo1, int hi1, int lo2, int hi2) {\r\n        int i = 0;\r\n        int i1 = lo1;\r\n        int i2 = lo2;\r\n        int n1 = hi1 - lo1 + 1;\r\n        while (i1 &lt;= hi1 &amp;&amp; i2 &lt;= hi2) {\r\n            if (x[ix[i1]] &lt;= x[ix[i2]])\r\n                scratch[i++] = ix[i1++];\r\n            else\r\n                scratch[i++] = ix[i2++];\r\n        }\r\n        while (i1 &lt;= hi1)\r\n            scratch[i++] = ix[i1++];\r\n        while (i2 &lt;= hi2)\r\n            scratch[i++] = ix[i2++];\r\n        for (int j = lo1; j &lt;= hi1; j++)\r\n            ix[j] = scratch[j - lo1];\r\n        for (int j = lo2; j &lt;= hi2; j++)\r\n            ix[j] = scratch[(j - lo2 + n1)];\r\n    }\r\n\r\n\r\n  [1]: http://en.wikipedia.org/wiki/Sorting_algorithm#Stability","title":"Java Array sort: Quick way to get a sorted list of indices of an array","body":"<p>Another non-simple solution. Here's a merge sort version which is <a href=\"http://en.wikipedia.org/wiki/Sorting_algorithm#Stability\" rel=\"nofollow\">stable</a> and doesn't modify the source array, though the merge requires extra memory.</p>\n\n<pre><code>public static int[] sortedIndices(double[] x) {\n    int[] ix = new int[x.length];\n    int[] scratch = new int[x.length];\n    for (int i = 0; i &lt; ix.length; i++) {\n        ix[i] = i;\n    }\n    mergeSortIndexed(x, ix, scratch, 0, x.length - 1);\n    return ix;\n}\n\nprivate static void mergeSortIndexed(double[] x, int[] ix, int[] scratch, int lo, int hi) {\n    if (lo == hi)\n        return;\n    int mid = (lo + hi + 1) / 2;\n    mergeSortIndexed(x, ix, scratch, lo, mid - 1);\n    mergeSortIndexed(x, ix, scratch, mid, hi);\n    mergeIndexed(x, ix, scratch, lo, mid - 1, mid, hi);\n}\n\nprivate static void mergeIndexed(double[] x, int[] ix, int[] scratch, int lo1, int hi1, int lo2, int hi2) {\n    int i = 0;\n    int i1 = lo1;\n    int i2 = lo2;\n    int n1 = hi1 - lo1 + 1;\n    while (i1 &lt;= hi1 &amp;&amp; i2 &lt;= hi2) {\n        if (x[ix[i1]] &lt;= x[ix[i2]])\n            scratch[i++] = ix[i1++];\n        else\n            scratch[i++] = ix[i2++];\n    }\n    while (i1 &lt;= hi1)\n        scratch[i++] = ix[i1++];\n    while (i2 &lt;= hi2)\n        scratch[i++] = ix[i2++];\n    for (int j = lo1; j &lt;= hi1; j++)\n        ix[j] = scratch[j - lo1];\n    for (int j = lo2; j &lt;= hi2; j++)\n        ix[j] = scratch[(j - lo2 + n1)];\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":331841,"reputation":59,"user_id":1391498,"display_name":"bobfoster"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1316994748,"creation_date":1316994748,"answer_id":7549421,"question_id":951848,"body_markdown":"The best solution would be along the lines of C&#39;s qsort, which allows you to specify functions for compare and swap, so qsort needn&#39;t be aware of the type or organization of the data being sorted. Here is one you can try. Since Java doesn&#39;t have functions, use the Array inner class to wrap the array or collection to be sorted. Then wrap that in an IndexArray and sort. The result of getIndex() on the IndexArray will be an array of indices as described in the JavaDoc.\r\n\r\n\r\n    public class QuickSortArray {\r\n\r\n\tpublic interface Array {\r\n\t\tint cmp(int aindex, int bindex);\r\n\t\tvoid swap(int aindex, int bindex);\r\n\t\tint length();\r\n\t}\r\n\t\r\n\tpublic static void quicksort(Array a) {\r\n\t    quicksort(a, 0, a.length() - 1);\r\n\t}\r\n\r\n\tpublic static void quicksort(Array a, int left, int right) {\r\n\t    if (right &lt;= left) return;\r\n\t    int i = partition(a, left, right);\r\n\t    quicksort(a, left, i-1);\r\n\t    quicksort(a, i+1, right);\r\n\t}\r\n\t\r\n\tpublic static boolean isSorted(Array a) {\r\n\t\tfor (int i = 1, n = a.length(); i &lt; n; i++) {\r\n\t\t\tif (a.cmp(i-1, i) &gt; 0)\r\n\t\t\t\treturn false;\r\n\t\t}\r\n\t\treturn true;\r\n\t}\r\n\t\r\n\tprivate static int mid(Array a, int left, int right) {\r\n\t\t// &quot;sort&quot; three elements and take the middle one\r\n\t    int i = left;\r\n\t    int j = (left + right) / 2;\r\n\t    int k = right;\r\n\t    // order the first two\r\n\t    int cmp = a.cmp(i, j);\r\n\t    if (cmp &gt; 0) {\r\n\t    \tint tmp = j;\r\n\t    \tj = i;\r\n\t    \ti = tmp;\r\n\t    }\r\n\t\t// bubble the third down\r\n\t    cmp = a.cmp(j, k);\r\n\t    if (cmp &gt; 0) {\r\n\t    \tcmp = a.cmp(i, k);\r\n\t    \tif (cmp &gt; 0)\r\n\t    \t\treturn i;\r\n\t    \treturn k;\r\n\t    }\r\n\t    return j;\r\n\t}\r\n\r\n\tprivate static int partition(Array a, int left, int right) {\r\n\t    int mid = mid(a, left, right);\r\n\t    a.swap(right, mid);\r\n\t    int i = left - 1;\r\n\t    int j = right;\r\n\t\t\r\n\t    while (true) {\r\n\t    \twhile (a.cmp(++i, right) &lt; 0)\r\n\t    \t\t;\r\n\t    \twhile (a.cmp(right, --j) &lt; 0)\r\n\t    \t\tif (j == left) break;\r\n\t        if (i &gt;= j) break;\r\n\t        a.swap(i, j);\r\n\t    }\r\n\t    a.swap(i, right);\r\n\t    return i;\r\n\t}\r\n\t\r\n\tpublic static class IndexArray implements Array {\r\n\t\tint[] index;\r\n\t\tArray a;\r\n\t\t\r\n\t\tpublic IndexArray(Array a) {\r\n\t\t\tthis.a = a;\r\n\t\t\tindex = new int[a.length()];\r\n\t\t\tfor (int i = 0; i &lt; a.length(); i++)\r\n\t\t\t\tindex[i] = i;\r\n\t\t}\r\n\t\t\r\n\t\t/**\r\n\t\t * Return the index after the IndexArray is sorted.\r\n\t\t * The nested Array is unsorted. Assume the name of\r\n\t\t * its underlying array is a. The returned index array\r\n\t\t * is such that a[index[i-1]] &lt;= a[index[i]] for all i\r\n\t\t * in 1..a.length-1.\r\n\t\t */\r\n\t\tpublic int[] index() {\r\n\t\t\tint i = 0;\r\n\t\t\tint j = index.length - 1;\r\n\t\t\twhile (i &lt; j) {\r\n\t\t\t\tint tmp = index[i];\r\n\t\t\t\tindex[i++] = index[j];\r\n\t\t\t\tindex[j--] = tmp;\r\n\t\t\t}\r\n\t\t\tint[] tmp = index;\r\n\t\t\tindex = null;\r\n\t\t\treturn tmp;\r\n\t\t}\r\n\t\t\r\n\t\t@Override\r\n\t\tpublic int cmp(int aindex, int bindex) {\r\n\t\t\treturn a.cmp(index[aindex], index[bindex]);\r\n\t\t}\r\n\r\n\t\t@Override\r\n\t\tpublic void swap(int aindex, int bindex) {\r\n\t\t\tint tmp = index[aindex];\r\n\t\t\tindex[aindex] = index[bindex];\r\n\t\t\tindex[bindex] = tmp;\r\n\t\t}\r\n\r\n\t\t@Override\r\n\t\tpublic int length() {\r\n\t\t\treturn a.length();\r\n\t\t}\r\n\t\t\r\n\t}\r\n","title":"Java Array sort: Quick way to get a sorted list of indices of an array","body":"<p>The best solution would be along the lines of C's qsort, which allows you to specify functions for compare and swap, so qsort needn't be aware of the type or organization of the data being sorted. Here is one you can try. Since Java doesn't have functions, use the Array inner class to wrap the array or collection to be sorted. Then wrap that in an IndexArray and sort. The result of getIndex() on the IndexArray will be an array of indices as described in the JavaDoc.</p>\n\n<pre><code>public class QuickSortArray {\n\npublic interface Array {\n    int cmp(int aindex, int bindex);\n    void swap(int aindex, int bindex);\n    int length();\n}\n\npublic static void quicksort(Array a) {\n    quicksort(a, 0, a.length() - 1);\n}\n\npublic static void quicksort(Array a, int left, int right) {\n    if (right &lt;= left) return;\n    int i = partition(a, left, right);\n    quicksort(a, left, i-1);\n    quicksort(a, i+1, right);\n}\n\npublic static boolean isSorted(Array a) {\n    for (int i = 1, n = a.length(); i &lt; n; i++) {\n        if (a.cmp(i-1, i) &gt; 0)\n            return false;\n    }\n    return true;\n}\n\nprivate static int mid(Array a, int left, int right) {\n    // \"sort\" three elements and take the middle one\n    int i = left;\n    int j = (left + right) / 2;\n    int k = right;\n    // order the first two\n    int cmp = a.cmp(i, j);\n    if (cmp &gt; 0) {\n        int tmp = j;\n        j = i;\n        i = tmp;\n    }\n    // bubble the third down\n    cmp = a.cmp(j, k);\n    if (cmp &gt; 0) {\n        cmp = a.cmp(i, k);\n        if (cmp &gt; 0)\n            return i;\n        return k;\n    }\n    return j;\n}\n\nprivate static int partition(Array a, int left, int right) {\n    int mid = mid(a, left, right);\n    a.swap(right, mid);\n    int i = left - 1;\n    int j = right;\n\n    while (true) {\n        while (a.cmp(++i, right) &lt; 0)\n            ;\n        while (a.cmp(right, --j) &lt; 0)\n            if (j == left) break;\n        if (i &gt;= j) break;\n        a.swap(i, j);\n    }\n    a.swap(i, right);\n    return i;\n}\n\npublic static class IndexArray implements Array {\n    int[] index;\n    Array a;\n\n    public IndexArray(Array a) {\n        this.a = a;\n        index = new int[a.length()];\n        for (int i = 0; i &lt; a.length(); i++)\n            index[i] = i;\n    }\n\n    /**\n     * Return the index after the IndexArray is sorted.\n     * The nested Array is unsorted. Assume the name of\n     * its underlying array is a. The returned index array\n     * is such that a[index[i-1]] &lt;= a[index[i]] for all i\n     * in 1..a.length-1.\n     */\n    public int[] index() {\n        int i = 0;\n        int j = index.length - 1;\n        while (i &lt; j) {\n            int tmp = index[i];\n            index[i++] = index[j];\n            index[j--] = tmp;\n        }\n        int[] tmp = index;\n        index = null;\n        return tmp;\n    }\n\n    @Override\n    public int cmp(int aindex, int bindex) {\n        return a.cmp(index[aindex], index[bindex]);\n    }\n\n    @Override\n    public void swap(int aindex, int bindex) {\n        int tmp = index[aindex];\n        index[aindex] = index[bindex];\n        index[bindex] = tmp;\n    }\n\n    @Override\n    public int length() {\n        return a.length();\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1307679,"reputation":21,"user_id":1256302,"display_name":"Gaurav"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1333098755,"creation_date":1333098755,"answer_id":9940099,"question_id":951848,"body_markdown":"\t//Here index array(of length equal to length of d array) contains the numbers from 0 to length of d array\t\r\n          public static Integer [] SortWithIndex(float[] data, Integer [] index)\r\n\t\t{\r\n\t\tint len = data.length;\r\n\t\tfloat temp1[] = new float[len];\r\n\t\tint temp2[] = new int[len];\r\n\r\n\r\n\r\n\t\t\t for (int i = 0; i &lt;len; i++) {\r\n\r\n\t\t\t\r\n\t\t\t\t\tfor (int j = i + 1; j &lt; len; j++) {\r\n\t\t\t\t\t\r\n\t\t\t\t\t  \r\n\t\t\t\t\t  if(data[i]&gt;data[j])\r\n\t\t\t\t\t  {\r\n\t\t\t\t\t\ttemp1[i] = data[i];\r\n\t\t\t\t\t\tdata[i] = data[j];\r\n\t\t\t\t\t\tdata[j] = temp1[i];\r\n\t\t\t\t\t\t\r\n\t\t\t\t \r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\ttemp2[i] = index[i];\r\n\t\t\t\t\t\tindex[i] = index[j];\r\n\t\t\t\t\t\tindex[j] = temp2[i];\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t  }\r\n\t\t\t\t\t\r\n\t\t\t}\r\n\t\t\t\t\r\n\t\t\treturn index;\r\n\r\n\t\t}\r\n\t\t\t","title":"Java Array sort: Quick way to get a sorted list of indices of an array","body":"<pre><code>//Here index array(of length equal to length of d array) contains the numbers from 0 to length of d array   \n      public static Integer [] SortWithIndex(float[] data, Integer [] index)\n    {\n    int len = data.length;\n    float temp1[] = new float[len];\n    int temp2[] = new int[len];\n\n\n\n         for (int i = 0; i &lt;len; i++) {\n\n\n                for (int j = i + 1; j &lt; len; j++) {\n\n\n                  if(data[i]&gt;data[j])\n                  {\n                    temp1[i] = data[i];\n                    data[i] = data[j];\n                    data[j] = temp1[i];\n\n\n\n                    temp2[i] = index[i];\n                    index[i] = index[j];\n                    index[j] = temp2[i];\n\n                    }\n                  }\n\n        }\n\n        return index;\n\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4431862,"reputation":21,"user_id":3608841,"display_name":"user3608841"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1399389382,"creation_date":1399389382,"answer_id":23498603,"question_id":951848,"body_markdown":"\tpublic static int[] indexSort(final double[] v, boolean keepUnsorted) {\r\n\t\tfinal Integer[] II = new Integer[v.length];\r\n\t\tfor (int i = 0; i &lt; v.length; i++) II[i] = i;\r\n\t\tArrays.sort(II, new Comparator&lt;Integer&gt;() {\r\n\t\t\t@Override\r\n\t\t\tpublic int compare(Integer o1, Integer o2) {\r\n\t\t\t\treturn Double.compare(v[o1],v[o2]);\r\n\t\t\t}\r\n\t\t});\r\n\t\tint[] ii = new int[v.length];\r\n\t\tfor (int i = 0; i &lt; v.length; i++) ii[i] = II[i];\r\n\t\tif (!keepUnsorted) {\r\n\t\t\tdouble[] clon = v.clone();\r\n\t\t\tfor (int i = 0; i &lt; v.length; i++) v[i] = clon[II[i]];\r\n\t\t}\r\n\t\treturn ii;\r\n\t}\r\n","title":"Java Array sort: Quick way to get a sorted list of indices of an array","body":"<pre><code>public static int[] indexSort(final double[] v, boolean keepUnsorted) {\n    final Integer[] II = new Integer[v.length];\n    for (int i = 0; i &lt; v.length; i++) II[i] = i;\n    Arrays.sort(II, new Comparator&lt;Integer&gt;() {\n        @Override\n        public int compare(Integer o1, Integer o2) {\n            return Double.compare(v[o1],v[o2]);\n        }\n    });\n    int[] ii = new int[v.length];\n    for (int i = 0; i &lt; v.length; i++) ii[i] = II[i];\n    if (!keepUnsorted) {\n        double[] clon = v.clone();\n        for (int i = 0; i &lt; v.length; i++) v[i] = clon[II[i]];\n    }\n    return ii;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":479245,"reputation":8442,"user_id":891814,"accept_rate":62,"display_name":"Ofek Ron"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1400785611,"creation_date":1400785611,"answer_id":23815238,"question_id":951848,"body_markdown":"I would do something like this:\r\n\r\n    public class SortedArray&lt;T extends Comparable&lt;T&gt;&gt; {\r\n    \tprivate final T[] tArray;\r\n    \tprivate final ArrayList&lt;Entry&gt; entries;\r\n    \r\n    \tpublic class Entry implements Comparable&lt;Entry&gt; {\r\n    \t\tpublic int index;\r\n    \r\n    \t\tpublic Entry(int index) {\r\n    \t\t\tsuper();\r\n    \t\t\tthis.index = index;\r\n    \t\t}\r\n    \r\n    \t\t@Override\r\n    \t\tpublic int compareTo(Entry o) {\r\n    \t\t\treturn tArray[index].compareTo(tArray[o.index]);\r\n    \t\t}\r\n    \t}\r\n    \r\n    \tpublic SortedArray(T[] array) {\r\n    \t\ttArray = array;\r\n    \t\tentries = new ArrayList&lt;Entry&gt;(array.length);\r\n    \t\tfor (int i = 0; i &lt; array.length; i++) {\r\n    \t\t\tentries.add(new Entry(i));\r\n    \t\t}\r\n    \t\tCollections.sort(entries);\r\n    \t}\r\n    \r\n    \tpublic T getSorted(int i) {\r\n    \t\treturn tArray[entries.get(i).index];\r\n    \r\n    \t}\r\n    \r\n    \tpublic T get(int i) {\r\n    \t\treturn tArray[i];\r\n    \t}\r\n    }","title":"Java Array sort: Quick way to get a sorted list of indices of an array","body":"<p>I would do something like this:</p>\n\n<pre><code>public class SortedArray&lt;T extends Comparable&lt;T&gt;&gt; {\n    private final T[] tArray;\n    private final ArrayList&lt;Entry&gt; entries;\n\n    public class Entry implements Comparable&lt;Entry&gt; {\n        public int index;\n\n        public Entry(int index) {\n            super();\n            this.index = index;\n        }\n\n        @Override\n        public int compareTo(Entry o) {\n            return tArray[index].compareTo(tArray[o.index]);\n        }\n    }\n\n    public SortedArray(T[] array) {\n        tArray = array;\n        entries = new ArrayList&lt;Entry&gt;(array.length);\n        for (int i = 0; i &lt; array.length; i++) {\n            entries.add(new Entry(i));\n        }\n        Collections.sort(entries);\n    }\n\n    public T getSorted(int i) {\n        return tArray[entries.get(i).index];\n\n    }\n\n    public T get(int i) {\n        return tArray[i];\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1838737,"reputation":1,"user_id":1668593,"display_name":"Shravan Kumar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1416410246,"creation_date":1416410246,"answer_id":27020380,"question_id":951848,"body_markdown":"Below is a method  based on Insertion Sort\r\n\r\n    public static int[] insertionSort(float[] arr){\r\n        int[] indices = new int[arr.length];\r\n        \tindices[0] = 0;\r\n        \tfor(int i=1;i&lt;arr.length;i++){\r\n        \t\tint j=i;\r\n        \t\tfor(;j&gt;=1 &amp;&amp; arr[j]&lt;arr[j-1];j--){\r\n        \t\t\t\tfloat temp = arr[j];\r\n        \t\t\t\tarr[j] = arr[j-1];\r\n        \t\t\t\tindices[j]=indices[j-1];\r\n        \t\t\t\tarr[j-1] = temp;\r\n        \t\t}\r\n        \t\tindices[j]=i;\r\n        \t}\r\n        \treturn indices;//indices of sorted elements\r\n     }","title":"Java Array sort: Quick way to get a sorted list of indices of an array","body":"<p>Below is a method  based on Insertion Sort</p>\n\n<pre><code>public static int[] insertionSort(float[] arr){\n    int[] indices = new int[arr.length];\n        indices[0] = 0;\n        for(int i=1;i&lt;arr.length;i++){\n            int j=i;\n            for(;j&gt;=1 &amp;&amp; arr[j]&lt;arr[j-1];j--){\n                    float temp = arr[j];\n                    arr[j] = arr[j-1];\n                    indices[j]=indices[j-1];\n                    arr[j-1] = temp;\n            }\n            indices[j]=i;\n        }\n        return indices;//indices of sorted elements\n }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5547319,"reputation":1577,"user_id":4401569,"display_name":"Pratap Koritala"},"down_vote_count":0,"up_vote_count":18,"is_accepted":false,"score":18,"last_activity_date":1643523572,"creation_date":1456753183,"answer_id":35701049,"question_id":951848,"body_markdown":"Using Java 8 features ( without extra library) , concise way of achieving it.\r\n\r\n    int[] a = {1,6,2,7,8}\r\n    int[] sortedIndices = IntStream.range(0, a.length)\r\n                    .boxed().sorted((i, j) -&gt; Integer.compareTo(a[i], b[i]))\r\n                    .mapToInt(ele -&gt; ele).toArray();","title":"Java Array sort: Quick way to get a sorted list of indices of an array","body":"<p>Using Java 8 features ( without extra library) , concise way of achieving it.</p>\n<pre><code>int[] a = {1,6,2,7,8}\nint[] sortedIndices = IntStream.range(0, a.length)\n                .boxed().sorted((i, j) -&gt; Integer.compareTo(a[i], b[i]))\n                .mapToInt(ele -&gt; ele).toArray();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8375217,"reputation":21,"user_id":6288878,"display_name":"Smart Du"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1464234909,"creation_date":1464234909,"answer_id":37451304,"question_id":951848,"body_markdown":"I&#39;d like to use this because it is very fast.But I use it for int,you can change it to float.\r\n\r\n    private static void mergeSort(int[]array,int[] indexes,int start,int end){\r\n\t\tif(start&gt;=end)return;\r\n\t\tint middle = (end-start)/2+start;\r\n\t\tmergeSort(array,indexes,start,middle);\r\n\t\tmergeSort(array,indexes,middle+1,end);\r\n\t\tmerge(array,indexes,start,middle,end);\r\n\t}\r\n\tprivate static void merge(int[]array,int[] indexes,int start,int middle,int end){\r\n\t\tint len1 = middle-start+1;\r\n\t\tint len2 = end - middle;\r\n\t\tint leftArray[] = new int[len1];\r\n\t\tint leftIndex[] = new int[len1];\r\n\t\tint rightArray[] = new int[len2];\r\n\t\tint rightIndex[] = new int[len2];\r\n\t\tfor(int i=0;i&lt;len1;++i)leftArray[i] = array[i+start];\r\n\t\tfor(int i=0;i&lt;len1;++i)leftIndex[i] = indexes[i+start];\r\n\t\tfor(int i=0;i&lt;len2;++i)rightArray[i] = array[i+middle+1];\r\n\t\tfor(int i=0;i&lt;len2;++i)rightIndex[i] = indexes[i+middle+1];\r\n\t\t//merge\r\n\t\tint i=0,j=0,k=start;\r\n\t\twhile(i&lt;len1&amp;&amp;j&lt;len2){\r\n\t\t\tif(leftArray[i]&lt;rightArray[j]){\r\n\t\t\t\tarray[k] = leftArray[i];\r\n\t\t\t\tindexes[k] = leftIndex[i];\r\n\t\t\t\t++i;\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tarray[k] = rightArray[j];\r\n\t\t\t\tindexes[k] = rightIndex[j];\r\n\t\t\t\t++j;\r\n\t\t\t}\r\n\t\t\t++k;\r\n\t\t}\r\n\t\twhile(i&lt;len1){\r\n\t\t\tarray[k] = leftArray[i];\r\n\t\t\tindexes[k] = leftIndex[i];\r\n\t\t\t++i;++k;\r\n\t\t}\r\n\t\twhile(j&lt;len2){\r\n\t\t\tarray[k] = rightArray[j];\r\n\t\t\tindexes[k] = rightIndex[j];\r\n\t\t\t++j;++k;\r\n\t\t}\r\n\t}\r\n","title":"Java Array sort: Quick way to get a sorted list of indices of an array","body":"<p>I'd like to use this because it is very fast.But I use it for int,you can change it to float.</p>\n\n<pre><code>private static void mergeSort(int[]array,int[] indexes,int start,int end){\n    if(start&gt;=end)return;\n    int middle = (end-start)/2+start;\n    mergeSort(array,indexes,start,middle);\n    mergeSort(array,indexes,middle+1,end);\n    merge(array,indexes,start,middle,end);\n}\nprivate static void merge(int[]array,int[] indexes,int start,int middle,int end){\n    int len1 = middle-start+1;\n    int len2 = end - middle;\n    int leftArray[] = new int[len1];\n    int leftIndex[] = new int[len1];\n    int rightArray[] = new int[len2];\n    int rightIndex[] = new int[len2];\n    for(int i=0;i&lt;len1;++i)leftArray[i] = array[i+start];\n    for(int i=0;i&lt;len1;++i)leftIndex[i] = indexes[i+start];\n    for(int i=0;i&lt;len2;++i)rightArray[i] = array[i+middle+1];\n    for(int i=0;i&lt;len2;++i)rightIndex[i] = indexes[i+middle+1];\n    //merge\n    int i=0,j=0,k=start;\n    while(i&lt;len1&amp;&amp;j&lt;len2){\n        if(leftArray[i]&lt;rightArray[j]){\n            array[k] = leftArray[i];\n            indexes[k] = leftIndex[i];\n            ++i;\n        }\n        else{\n            array[k] = rightArray[j];\n            indexes[k] = rightIndex[j];\n            ++j;\n        }\n        ++k;\n    }\n    while(i&lt;len1){\n        array[k] = leftArray[i];\n        indexes[k] = leftIndex[i];\n        ++i;++k;\n    }\n    while(j&lt;len2){\n        array[k] = rightArray[j];\n        indexes[k] = rightIndex[j];\n        ++j;++k;\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":12610,"reputation":4863,"user_id":24937,"accept_rate":67,"display_name":"edgar.holleis"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":53377,"favorite_count":0,"down_vote_count":0,"up_vote_count":42,"accepted_answer_id":1040503,"answer_count":15,"score":42,"last_activity_date":1643523572,"creation_date":1244135060,"question_id":951848,"body_markdown":"The problem: Consider the following floats[]:\r\n\r\n    d[i] =     1.7 -0.3  2.1  0.5\r\n\r\nWhat I want is an array of int[] that represents the order of the original array with indices.\r\n\r\n    s[i] =       1    3    0    2\r\n    d[s[i]] = -0.3  0.5  1.7  2.1\r\n\r\nOf course it could be done with a custom comparator, a sorted set of custom objects, or by simply sorting the array and then searching for the indices in the original array (shudder).\r\n\r\nWhat I am in fact looking for is the equivalent for the second return argument of [Matlab&#39;s sort function][1].\r\n\r\nIs there an easy way to do that (&lt;5 LOC)? May there be a solution that does not need to allocate a new object for each element?\r\n\r\n\r\n----------\r\n\r\nUpdate:\r\n\r\nThanks for your responses. Unfortunately, none of what has been proposed so far resembles the simple and efficient solution I was hoping for. I therefore openened a thread in the JDK feedback forum, proposing the addition of a new class-library function to address the issue. Lets see what Sun/Oracle thinks about the issue.\r\n\r\n[http://forums.java.net/jive/thread.jspa?threadID=62657&amp;tstart=0][2]\r\n\r\n\r\n  [1]: http://www.mathworks.com/access/helpdesk/help/techdoc/index.html?/access/helpdesk/help/techdoc/ref/sort.html\r\n  [2]: http://forums.java.net/jive/thread.jspa?threadID=62657&amp;tstart=0","title":"Java Array sort: Quick way to get a sorted list of indices of an array","body":"<p>The problem: Consider the following floats[]:</p>\n\n<pre><code>d[i] =     1.7 -0.3  2.1  0.5\n</code></pre>\n\n<p>What I want is an array of int[] that represents the order of the original array with indices.</p>\n\n<pre><code>s[i] =       1    3    0    2\nd[s[i]] = -0.3  0.5  1.7  2.1\n</code></pre>\n\n<p>Of course it could be done with a custom comparator, a sorted set of custom objects, or by simply sorting the array and then searching for the indices in the original array (shudder).</p>\n\n<p>What I am in fact looking for is the equivalent for the second return argument of <a href=\"http://www.mathworks.com/access/helpdesk/help/techdoc/index.html?/access/helpdesk/help/techdoc/ref/sort.html\" rel=\"nofollow noreferrer\">Matlab's sort function</a>.</p>\n\n<p>Is there an easy way to do that (&lt;5 LOC)? May there be a solution that does not need to allocate a new object for each element?</p>\n\n<hr>\n\n<p>Update:</p>\n\n<p>Thanks for your responses. Unfortunately, none of what has been proposed so far resembles the simple and efficient solution I was hoping for. I therefore openened a thread in the JDK feedback forum, proposing the addition of a new class-library function to address the issue. Lets see what Sun/Oracle thinks about the issue.</p>\n\n<p><a href=\"http://forums.java.net/jive/thread.jspa?threadID=62657&amp;tstart=0\" rel=\"nofollow noreferrer\">http://forums.java.net/jive/thread.jspa?threadID=62657&amp;tstart=0</a></p>\n"},{"tags":["java","xml","file","jmeter"],"answers":[{"tags":[],"owner":{"account_id":4393577,"reputation":423,"user_id":3581320,"display_name":"Rahul Jadhav"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1643469812,"creation_date":1643469812,"answer_id":70906888,"question_id":70900302,"body_markdown":"To my knowledge, there aren&#39;t any out of box features in JMeter to process XML. You can use [Groovy XML objects/operations][1] to read/write XML\r\n\r\n\r\n  [1]: https://groovy-lang.org/processing-xml.html","title":"Create and Export file as .xml - Jmeter","body":"<p>To my knowledge, there aren't any out of box features in JMeter to process XML. You can use <a href=\"https://groovy-lang.org/processing-xml.html\" rel=\"nofollow noreferrer\">Groovy XML objects/operations</a> to read/write XML</p>\n"},{"tags":[],"owner":{"account_id":3460456,"reputation":162728,"user_id":2897748,"display_name":"Dmitri T"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1643523325,"creation_date":1643523325,"answer_id":70912303,"question_id":70900302,"body_markdown":"Have you really tried to search? There is an official documentation for Java, i.e. check [Writing Out a DOM as an XML File][1] guide\r\n\r\nAlso be aware that there is no Java support in JMeter (unless you decide to [develop your own plugin)][2] and it&#39;s [recommended to use Groovy for scripting][3] so it might be a better idea to look for code to copy and paste in [Groovy documentation][4]. A quote from the above page:\r\n\r\n    def writer = new StringWriter()\r\n    def xml = new MarkupBuilder(writer)\r\n    \r\n    xml.records() {\r\n        car(name: &#39;HSV Maloo&#39;, make: &#39;Holden&#39;, year: 2006) {\r\n            country(&#39;Australia&#39;)\r\n            record(type: &#39;speed&#39;, &#39;Production Pickup Truck with speed of 271kph&#39;)\r\n        }\r\n        car(name: &#39;Royale&#39;, make: &#39;Bugatti&#39;, year: 1931) {\r\n            country(&#39;France&#39;)\r\n            record(type: &#39;price&#39;, &#39;Most Valuable Car at $15 million&#39;)\r\n        }\r\n    }\r\n    \r\n    def records = new XmlSlurper().parseText(writer.toString()) \r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/tutorial/jaxp/xslt/writingDom.html\r\n  [2]: https://www.blazemeter.com/blog/how-to-develop-a-jmeter-plugin-intro-and-best-practices\r\n  [3]: https://jmeter.apache.org/usermanual/best-practices.html#bsh_scripting\r\n  [4]: https://groovy-lang.org/processing-xml.html#_creating_xml","title":"Create and Export file as .xml - Jmeter","body":"<p>Have you really tried to search? There is an official documentation for Java, i.e. check <a href=\"https://docs.oracle.com/javase/tutorial/jaxp/xslt/writingDom.html\" rel=\"nofollow noreferrer\">Writing Out a DOM as an XML File</a> guide</p>\n<p>Also be aware that there is no Java support in JMeter (unless you decide to <a href=\"https://www.blazemeter.com/blog/how-to-develop-a-jmeter-plugin-intro-and-best-practices\" rel=\"nofollow noreferrer\">develop your own plugin)</a> and it's <a href=\"https://jmeter.apache.org/usermanual/best-practices.html#bsh_scripting\" rel=\"nofollow noreferrer\">recommended to use Groovy for scripting</a> so it might be a better idea to look for code to copy and paste in <a href=\"https://groovy-lang.org/processing-xml.html#_creating_xml\" rel=\"nofollow noreferrer\">Groovy documentation</a>. A quote from the above page:</p>\n<pre><code>def writer = new StringWriter()\ndef xml = new MarkupBuilder(writer)\n\nxml.records() {\n    car(name: 'HSV Maloo', make: 'Holden', year: 2006) {\n        country('Australia')\n        record(type: 'speed', 'Production Pickup Truck with speed of 271kph')\n    }\n    car(name: 'Royale', make: 'Bugatti', year: 1931) {\n        country('France')\n        record(type: 'price', 'Most Valuable Car at $15 million')\n    }\n}\n\ndef records = new XmlSlurper().parseText(writer.toString()) \n</code></pre>\n"}],"owner":{"account_id":11305786,"reputation":111,"user_id":8290484,"display_name":"Estevao FPM"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":151,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70912303,"answer_count":2,"score":0,"last_activity_date":1643523325,"creation_date":1643404032,"question_id":70900302,"body_markdown":"Is there any code (Java, for example) that creates a file in .xml format and saves it in a folder?\r\nI can&#39;t find...\r\nI&#39;ve searched in several places, but to no success. =//\r\n\r\nThanks in advance!","title":"Create and Export file as .xml - Jmeter","body":"<p>Is there any code (Java, for example) that creates a file in .xml format and saves it in a folder?\nI can't find...\nI've searched in several places, but to no success. =//</p>\n<p>Thanks in advance!</p>\n"},{"tags":["java","android","android-studio","gradle","build.gradle"],"comments":[{"owner":{"account_id":21371577,"reputation":1913,"user_id":15739040,"display_name":"Vishal Beep"},"score":0,"creation_date":1643522659,"post_id":70912202,"comment_id":125359963,"body_markdown":"you have an updated version build.gradle thats&#39; why.","body":"you have an updated version build.gradle thats&#39; why."}],"answers":[{"tags":[],"owner":{"account_id":21371577,"reputation":1913,"user_id":15739040,"display_name":"Vishal Beep"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1643523022,"creation_date":1643523022,"answer_id":70912279,"question_id":70912202,"body_markdown":"You are checking your `build.gradle` that have the label `(Project: YourAppName)`\r\nplease check `build.gradle` that have a label `(Module: YourAppName)` like this:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/RpWLd.png","title":"Why my project-level build.gradle in Android Studio is different that it is supposed to be?","body":"<p>You are checking your <code>build.gradle</code> that have the label <code>(Project: YourAppName)</code>\nplease check <code>build.gradle</code> that have a label <code>(Module: YourAppName)</code> like this:</p>\n<p><a href=\"https://i.stack.imgur.com/RpWLd.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/RpWLd.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":24098009,"reputation":1,"user_id":18070219,"display_name":"Astrophel"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":188,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1643523022,"creation_date":1643521989,"question_id":70912202,"body_markdown":"I was trying to build a note-taking app according to this tutorial: \r\n    https://www.youtube.com/watch?v=or_pH92l-IQ\r\n\r\nI followed this tutorial step-by-step, but my project-level build.gradle is \r\n    [my_build.gradle][1]\r\n, which is different from the one in the video:\r\n    [tutorial_build.gradle][2].\r\n\r\nAfter some online research, I found from \r\n    https://www.geeksforgeeks.org/android-build-gradle/ \r\nthat all Android projects in Java seem to start with such a build.gradle when they are created. However, mine is just different.\r\n\r\nAny idea about why is this happening, and how I can get the correct build.gradle generated? \r\n\r\nI have been an EE person and know very little about coding, so please don&#39;t go harsh. Thank you!\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/nwzc7.png\r\n  [2]: https://i.stack.imgur.com/XYHGe.png","title":"Why my project-level build.gradle in Android Studio is different that it is supposed to be?","body":"<p>I was trying to build a note-taking app according to this tutorial:\n<a href=\"https://www.youtube.com/watch?v=or_pH92l-IQ\" rel=\"nofollow noreferrer\">https://www.youtube.com/watch?v=or_pH92l-IQ</a></p>\n<p>I followed this tutorial step-by-step, but my project-level build.gradle is\n<a href=\"https://i.stack.imgur.com/nwzc7.png\" rel=\"nofollow noreferrer\">my_build.gradle</a>\n, which is different from the one in the video:\n<a href=\"https://i.stack.imgur.com/XYHGe.png\" rel=\"nofollow noreferrer\">tutorial_build.gradle</a>.</p>\n<p>After some online research, I found from\n<a href=\"https://www.geeksforgeeks.org/android-build-gradle/\" rel=\"nofollow noreferrer\">https://www.geeksforgeeks.org/android-build-gradle/</a>\nthat all Android projects in Java seem to start with such a build.gradle when they are created. However, mine is just different.</p>\n<p>Any idea about why is this happening, and how I can get the correct build.gradle generated?</p>\n<p>I have been an EE person and know very little about coding, so please don't go harsh. Thank you!</p>\n"},{"tags":["java","generics","type-inference","jls","language-specifications"],"comments":[{"owner":{"account_id":6651855,"reputation":224830,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":1,"creation_date":1643528711,"post_id":70912275,"comment_id":125360808,"body_markdown":"Yes, you understand correctly.","body":"Yes, you understand correctly."}],"owner":{"account_id":16188208,"reputation":493,"user_id":11687703,"display_name":"theutonium.18"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":62,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1643522990,"creation_date":1643522990,"question_id":70912275,"body_markdown":"I was going through this [question](https://stackoverflow.com/questions/24436871/very-confused-by-java-8-comparator-type-inference/24442897#24442897) - this triggered the following set of thoughts regarding the Type Inference:\r\n```java\r\nclass Song {\r\n  public Integer duration;\r\n  public String artist;\r\n  public String title;\r\n//   ... getters...\r\n}\r\n\r\nList&lt;Song&gt; playlist1 = new ArrayList&lt;&gt;();\r\n\r\nCollections.sort(Collections.EMPTY_LIST,\r\n        Comparator.comparing((Song p1) -&gt; p1.getTitle())); //-----1\r\n\r\nCollections.sort(playlist1,\r\n        Comparator.comparing(p1 -&gt; p1.getTitle())); //----2\r\n\r\nCollections.sort(playlist1,\r\n        Comparator.comparing(p1 -&gt; p1.getTitle())\r\n            .thenComparing(p1 -&gt; p1.getDuration()).thenComparing(p1 -&gt; p1.getArtist()));\r\n//----3\r\n```\r\n\r\n1. `Collections.sort(..)` is **not a Poly Expression** but a **Standalone Expression**: \r\n   - as the return type of `.sort(...)` is `void` - and the foremost conditions for this to be applicable for method invocation is that its return type must be Type Parameter that also appears in the arguments.\r\n   - and method invocation must occur in the assignment/invocation context\r\n2. `Comparator.comparing(...)` : is a **Poly Expression** as:\r\n   - it occurs in the invocation context and\r\n   - has a return type that is a Type Argument also occurring as the arguments to the method.\r\n3. Thus in,`Collections.sort(playlist1, Comparator.comparing(p1 -&gt; p1.getTitle()));` the expression `Comparator.comparing(p1 -&gt; p1.getTitle())` undergoes the type inference as:\r\n    - Since the target type is `Comparator&lt;Song&gt;`\r\n    - `Comparator.comparing(...)` will use the **Target Type** to determine the **type arguments**\r\n    - and thus infers that `p1` is of type `Song`.\r\n4. but if we consider **Expression-3** we will see **Compilation Error** as:\r\n    - `Comparator.comparing(...).thenComparing(...).thenComparing(...)` - has a **target type** of `Comparator&lt;Song&gt;`\r\n    - this is because for an invocation chain of this type: `ClassType.A().B().C()` the inference will have to proceed from `C() -&gt; B() -&gt; A() -&gt; ClassType`\r\n    - now the problem is that for the compiler - it is complete unknown that **which class is C() belonging to** and hence will **not be able to infer the chain upto `A`**.\r\n    - On the contrary - if the chain had been `ClassType.A()` - the compiler can easily determine that `A()` belongs to `ClassType`.\r\n   - and thus the compiler is unable to determine the `p1` and so on.\r\n\r\n**Is my thinking about the above points correct? or am I missing something?**","title":"Type Inference in Method Invocation Poly Expression within the Invocation Context with/without method chaining","body":"<p>I was going through this <a href=\"https://stackoverflow.com/questions/24436871/very-confused-by-java-8-comparator-type-inference/24442897#24442897\">question</a> - this triggered the following set of thoughts regarding the Type Inference:</p>\n<pre class=\"lang-java prettyprint-override\"><code>class Song {\n  public Integer duration;\n  public String artist;\n  public String title;\n//   ... getters...\n}\n\nList&lt;Song&gt; playlist1 = new ArrayList&lt;&gt;();\n\nCollections.sort(Collections.EMPTY_LIST,\n        Comparator.comparing((Song p1) -&gt; p1.getTitle())); //-----1\n\nCollections.sort(playlist1,\n        Comparator.comparing(p1 -&gt; p1.getTitle())); //----2\n\nCollections.sort(playlist1,\n        Comparator.comparing(p1 -&gt; p1.getTitle())\n            .thenComparing(p1 -&gt; p1.getDuration()).thenComparing(p1 -&gt; p1.getArtist()));\n//----3\n</code></pre>\n<ol>\n<li><code>Collections.sort(..)</code> is <strong>not a Poly Expression</strong> but a <strong>Standalone Expression</strong>:\n<ul>\n<li>as the return type of <code>.sort(...)</code> is <code>void</code> - and the foremost conditions for this to be applicable for method invocation is that its return type must be Type Parameter that also appears in the arguments.</li>\n<li>and method invocation must occur in the assignment/invocation context</li>\n</ul>\n</li>\n<li><code>Comparator.comparing(...)</code> : is a <strong>Poly Expression</strong> as:\n<ul>\n<li>it occurs in the invocation context and</li>\n<li>has a return type that is a Type Argument also occurring as the arguments to the method.</li>\n</ul>\n</li>\n<li>Thus in,<code>Collections.sort(playlist1, Comparator.comparing(p1 -&gt; p1.getTitle()));</code> the expression <code>Comparator.comparing(p1 -&gt; p1.getTitle())</code> undergoes the type inference as:\n<ul>\n<li>Since the target type is <code>Comparator&lt;Song&gt;</code></li>\n<li><code>Comparator.comparing(...)</code> will use the <strong>Target Type</strong> to determine the <strong>type arguments</strong></li>\n<li>and thus infers that <code>p1</code> is of type <code>Song</code>.</li>\n</ul>\n</li>\n<li>but if we consider <strong>Expression-3</strong> we will see <strong>Compilation Error</strong> as:\n<ul>\n<li><code>Comparator.comparing(...).thenComparing(...).thenComparing(...)</code> - has a <strong>target type</strong> of <code>Comparator&lt;Song&gt;</code></li>\n<li>this is because for an invocation chain of this type: <code>ClassType.A().B().C()</code> the inference will have to proceed from <code>C() -&gt; B() -&gt; A() -&gt; ClassType</code></li>\n<li>now the problem is that for the compiler - it is complete unknown that <strong>which class is C() belonging to</strong> and hence will <strong>not be able to infer the chain upto <code>A</code></strong>.</li>\n<li>On the contrary - if the chain had been <code>ClassType.A()</code> - the compiler can easily determine that <code>A()</code> belongs to <code>ClassType</code>.</li>\n<li>and thus the compiler is unable to determine the <code>p1</code> and so on.</li>\n</ul>\n</li>\n</ol>\n<p><strong>Is my thinking about the above points correct? or am I missing something?</strong></p>\n"},{"tags":["java","maven","google-cloud-dataflow"],"comments":[{"owner":{"account_id":8459897,"reputation":1674,"user_id":6345993,"accept_rate":80,"display_name":"Paddy Popeye"},"score":0,"creation_date":1580833636,"post_id":60038097,"comment_id":106224504,"body_markdown":"can you post the full command you are using to launch your pipeline","body":"can you post the full command you are using to launch your pipeline"},{"owner":{"account_id":16878,"reputation":306143,"user_id":37213,"accept_rate":81,"display_name":"duffymo"},"score":0,"creation_date":1581603170,"post_id":60038097,"comment_id":106497443,"body_markdown":"Caused by: java.lang.ClassNotFoundException: com.xxx.gcp.dataflow.yyy.pipeline.MAINJAVACLASS - can&#39;t find this in the CLASSPATH.","body":"Caused by: java.lang.ClassNotFoundException: com.xxx.gcp.dataflow.yyy.pipeline.MAINJAVACLASS - can&#39;t find this in the CLASSPATH."}],"answers":[{"tags":[],"owner":{"account_id":15711785,"reputation":1371,"user_id":11337033,"display_name":"Daniel Oliveira"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1581027634,"creation_date":1581027634,"answer_id":60104425,"question_id":60038097,"body_markdown":"I believe this is a common problem with multi-module maven projects and isn&#39;t specific to Dataflow. Maybe this other thread could help: https://stackoverflow.com/questions/11091311/maven-execjava-goal-on-a-multi-module-project\r\n\r\nThat one mentions the issue you&#39;re having with `MAINJAVACLASS` not being found. The other half I&#39;m less sure on, bit I think the reason the jars are missing there is because the `package` lifecycle phase hasn&#39;t been run on the module whose `.jar` you need. From what I can tell, the exec plugin doesn&#39;t run on any specific phase of the build lifecycle, so based on your information I would guess that it&#39;s being run only after the `compile` phase, which doesn&#39;t produce any jars (that happens in `package`).\r\n\r\nInfo on the build lifecycle: http://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html\r\nInfo on ","title":"Generate a Dataflow template from multi module project in Java","body":"<p>I believe this is a common problem with multi-module maven projects and isn't specific to Dataflow. Maybe this other thread could help: <a href=\"https://stackoverflow.com/questions/11091311/maven-execjava-goal-on-a-multi-module-project\">Maven exec:java goal on a multi-module project</a></p>\n\n<p>That one mentions the issue you're having with <code>MAINJAVACLASS</code> not being found. The other half I'm less sure on, bit I think the reason the jars are missing there is because the <code>package</code> lifecycle phase hasn't been run on the module whose <code>.jar</code> you need. From what I can tell, the exec plugin doesn't run on any specific phase of the build lifecycle, so based on your information I would guess that it's being run only after the <code>compile</code> phase, which doesn't produce any jars (that happens in <code>package</code>).</p>\n\n<p>Info on the build lifecycle: <a href=\"http://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html\" rel=\"nofollow noreferrer\">http://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html</a>\nInfo on </p>\n"},{"tags":[],"owner":{"account_id":14324136,"reputation":1232,"user_id":10346701,"display_name":"IoT user"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1581603096,"creation_date":1581074422,"answer_id":60112448,"question_id":60038097,"body_markdown":"Finally, to solve this, I had to execute: `mvn clean install` before compile it. With this, all the dependencies was installed in my computer and then with a command like:\r\n\r\n    mvn compile exec:java \\\r\n         -Dexec.mainClass=com.example.myclass \\\r\n         -Dexec.args=&quot;--runner=DataflowRunner \\\r\n                      --project=YOUR_PROJECT_ID \\\r\n                      --stagingLocation=gs://YOUR_BUCKET_NAME/staging \\\r\n                      --templateLocation=gs://YOUR_BUCKET_NAME/templates/YOUR_TEMPLATE_NAME&quot;\r\n\r\nThe template is created and uploaded to GCS\r\n\r\nIf you want to create the template using Cloud Build, you can follow [this][1] steps\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/3459928/running-a-specific-maven-plugin-goal-from-the-command-line-in-a-sub-module-of-a/26448447#26448447","title":"Generate a Dataflow template from multi module project in Java","body":"<p>Finally, to solve this, I had to execute: <code>mvn clean install</code> before compile it. With this, all the dependencies was installed in my computer and then with a command like:</p>\n\n<pre><code>mvn compile exec:java \\\n     -Dexec.mainClass=com.example.myclass \\\n     -Dexec.args=\"--runner=DataflowRunner \\\n                  --project=YOUR_PROJECT_ID \\\n                  --stagingLocation=gs://YOUR_BUCKET_NAME/staging \\\n                  --templateLocation=gs://YOUR_BUCKET_NAME/templates/YOUR_TEMPLATE_NAME\"\n</code></pre>\n\n<p>The template is created and uploaded to GCS</p>\n\n<p>If you want to create the template using Cloud Build, you can follow <a href=\"https://stackoverflow.com/questions/3459928/running-a-specific-maven-plugin-goal-from-the-command-line-in-a-sub-module-of-a/26448447#26448447\">this</a> steps</p>\n"}],"owner":{"account_id":14324136,"reputation":1232,"user_id":10346701,"display_name":"IoT user"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1265,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":60112448,"answer_count":2,"score":2,"last_activity_date":1643522814,"creation_date":1580728507,"question_id":60038097,"body_markdown":"I don&#180;t have much experience with Java, especially with multi modules project, so I&#39;m not able to create a dataflow template from a multi-module project.\r\n\r\nTo generate a template from a Dataflow template, you have to use something like this:\r\n\r\n    mvn compile exec:java \\\r\n         -Dexec.mainClass=com.example.myclass \\\r\n         -Dexec.args=&quot;--runner=DataflowRunner \\\r\n                      --project=YOUR_PROJECT_ID \\\r\n                      --stagingLocation=gs://YOUR_BUCKET_NAME/staging \\\r\n                      --templateLocation=gs://YOUR_BUCKET_NAME/templates/YOUR_TEMPLATE_NAME&quot;\r\n\r\nThis works well for me in a simple Java project, but currently I need to use the following in a project with the following simplified structure:\r\n\r\n    C:.\r\n    |   pom.xml\r\n    |\r\n    +---configuration\r\n    |   |   dependency-reduced-pom.xml\r\n    |   |   pom.xml\r\n    |   |\r\n    |   +---src\r\n    |   |   \\---main\r\n    |   |       \\---java\r\n    |   |           \\---com\r\n    |   |               \\---xxx\r\n    |   |                   \\---gcp\r\n    |   |                       \\---dataflow\r\n    |   |                           \\---yyy\r\n    |   |                               +---package\r\n    |   |                               |   |   java files\r\n    |   |\r\n    +---pipeline\r\n    |   |   dependency-reduced-pom.xml\r\n    |   |   pom.xml\r\n    |   |\r\n    |   +---src\r\n    |   |   \\---main\r\n    |   |       \\---java\r\n    |   |           \\---com\r\n    |   |               \\---xxx\r\n    |   |                   \\---gcp\r\n    |   |                       \\---dataflow\r\n    |   |                           \\---yyy\r\n    |   |                               \\---package\r\n    |   |                                       MAINJAVACLASS.java\r\n    |   |\r\n    \\---transform\r\n    |   |   dependency-reduced-pom.xml\r\n    |   |   pom.xml\r\n    |   |\r\n    |   +---src\r\n    |   |   \\---main\r\n    |   |       +---java\r\n    |   |       |   +---com\r\n    |   |       |   |   \\---xxx\r\n    |   |       |   |       \\---gcp\r\n    |   |       |   |           \\---dataflow\r\n    |   |       |   |               \\---yyy\r\n    |   |       |   |                   +---package\r\n    |   |       |   |                   |       java files\r\n\r\n------------------------------------------------\r\n\r\nI have executed **mvn package** without any error with the following output:\r\n\r\n    [INFO] Reactor Build Order:\r\n    [INFO]\r\n    [INFO] pipeline-framework                                                 [pom]\r\n    [INFO] configuration                                                      [jar]\r\n    [INFO] transform                                                          [jar]\r\n    [INFO] pipeline                                                           [jar]\r\n    \r\n    &lt;...&gt;\r\n    \r\n    [INFO] Reactor Summary for pipeline-framework 0.1:\r\n    [INFO]\r\n    [INFO] pipeline-framework ................................. SUCCESS [ 19.076 s]\r\n    [INFO] configuration ...................................... SUCCESS [ 25.070 s]\r\n    [INFO] transform .......................................... SUCCESS [ 21.625 s]\r\n    [INFO] pipeline ........................................... SUCCESS [ 19.365 s]\r\n    [INFO] ------------------------------------------------------------------------\r\n    [INFO] BUILD SUCCESS\r\n\r\nBut when I try to execute:\r\n\r\n    mvn compile exec:java -Dexec.mainClass=com.xxx.gcp.dataflow.yyy.pipeline.MAINJAVACLASS -Dexec.args=...\r\n\r\nI have the following error:\r\n\r\nIf I execute it from the root directoy:\r\n\r\n    [INFO] Reactor Summary for pipeline-framework 0.1:\r\n    [INFO]\r\n    [INFO] pipeline-framework ................................. FAILURE [  5.287 s]\r\n    [INFO] configuration ...................................... SKIPPED\r\n    [INFO] transform .......................................... SKIPPED\r\n    [INFO] pipeline ........................................... SKIPPED\r\n    \r\n    &lt;...&gt;\r\n    \r\n    Caused by: java.lang.ClassNotFoundException: com.xxx.gcp.dataflow.yyy.pipeline.MAINJAVACLASS\r\n\r\nI also tried with:\r\n\r\n    mvn compile exec:java -pl pipeline &lt;...&gt;\r\n\r\n\r\nIf I execute it inside the pipeline directoy:\r\n\r\n    Could not resolve dependencies for project com.xxx.gcp.dataflow:pipeline:jar:0.1: The following artifacts could not be resolved: com.xxx.gcp.dataflow:transform:jar:0.1, com.xxx.gcp.dataflow:configuration:jar:0.1: Failure to find com.xxx.gcp.dataflow:transform:jar:0.1 in https://repo.maven.apache.org/maven2\r\n\r\n-------------\r\n\r\n**Which command should I execute to build the template?**\r\n\r\n\r\n--------------\r\n\r\nThe main pom.xml file\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n             xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n             xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n      &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    \r\n      &lt;groupId&gt;com.xxx.gcp.dataflow&lt;/groupId&gt;\r\n      &lt;artifactId&gt;pipeline-framework&lt;/artifactId&gt;\r\n      &lt;version&gt;0.1&lt;/version&gt;\r\n      &lt;packaging&gt;pom&lt;/packaging&gt;\r\n    \r\n      &lt;modules&gt;\r\n        &lt;module&gt;configuration&lt;/module&gt;\r\n        &lt;module&gt;transform&lt;/module&gt;\r\n        &lt;module&gt;pipeline&lt;/module&gt;\r\n      &lt;/modules&gt;\r\n    \r\n      &lt;properties&gt;\r\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n        &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;\r\n        &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;\r\n    \r\n        &lt;beam.version&gt;2.16.0&lt;/beam.version&gt;\r\n    \r\n        &lt;maven-compiler-plugin.version&gt;3.7.0&lt;/maven-compiler-plugin.version&gt;\r\n        &lt;maven-exec-plugin.version&gt;1.6.0&lt;/maven-exec-plugin.version&gt;\r\n        &lt;maven-jar-plugin.version&gt;3.1.2&lt;/maven-jar-plugin.version&gt;\r\n        &lt;slf4j.version&gt;1.7.25&lt;/slf4j.version&gt;\r\n    \r\n        &lt;autovalue.annotations.version&gt;1.6&lt;/autovalue.annotations.version&gt;\r\n        &lt;autovalue.version&gt;1.6.2&lt;/autovalue.version&gt;\r\n      &lt;/properties&gt;\r\n    \r\n      &lt;repositories&gt;\r\n        &lt;repository&gt;\r\n          &lt;id&gt;apache.snapshots&lt;/id&gt;\r\n          &lt;name&gt;Apache Development Snapshot Repository&lt;/name&gt;\r\n          &lt;url&gt;https://repository.apache.org/content/repositories/snapshots/&lt;/url&gt;\r\n          &lt;releases&gt;\r\n            &lt;enabled&gt;false&lt;/enabled&gt;\r\n          &lt;/releases&gt;\r\n          &lt;snapshots&gt;\r\n            &lt;enabled&gt;true&lt;/enabled&gt;\r\n          &lt;/snapshots&gt;\r\n        &lt;/repository&gt;\r\n      &lt;/repositories&gt;\r\n    \r\n      &lt;dependencyManagement&gt;\r\n        &lt;dependencies&gt;\r\n          &lt;dependency&gt;\r\n            &lt;groupId&gt;${project.groupId}&lt;/groupId&gt;\r\n            &lt;artifactId&gt;configuration&lt;/artifactId&gt;\r\n            &lt;version&gt;${project.version}&lt;/version&gt;\r\n          &lt;/dependency&gt;\r\n          &lt;dependency&gt;\r\n            &lt;groupId&gt;${project.groupId}&lt;/groupId&gt;\r\n            &lt;artifactId&gt;transform&lt;/artifactId&gt;\r\n            &lt;version&gt;${project.version}&lt;/version&gt;\r\n          &lt;/dependency&gt;\r\n          &lt;dependency&gt;\r\n            &lt;groupId&gt;${project.groupId}&lt;/groupId&gt;\r\n            &lt;artifactId&gt;pipeline&lt;/artifactId&gt;\r\n            &lt;version&gt;${project.version}&lt;/version&gt;\r\n          &lt;/dependency&gt;\r\n        &lt;/dependencies&gt;\r\n      &lt;/dependencyManagement&gt;\r\n    \r\n      &lt;build&gt;\r\n        &lt;plugins&gt;\r\n          &lt;plugin&gt;\r\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n            &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n            &lt;version&gt;${maven-compiler-plugin.version}&lt;/version&gt;\r\n            &lt;configuration&gt;\r\n              &lt;source&gt;1.8&lt;/source&gt;\r\n              &lt;target&gt;1.8&lt;/target&gt;\r\n            &lt;/configuration&gt;\r\n          &lt;/plugin&gt;\r\n          &lt;plugin&gt;\r\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n            &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n            &lt;version&gt;2.22.1&lt;/version&gt;\r\n            &lt;configuration&gt;\r\n              &lt;useSystemClassLoader&gt;false&lt;/useSystemClassLoader&gt;\r\n            &lt;/configuration&gt;\r\n          &lt;/plugin&gt;\r\n          &lt;plugin&gt;\r\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n            &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\r\n            &lt;version&gt;${maven-jar-plugin.version}&lt;/version&gt;\r\n            &lt;configuration&gt;\r\n              &lt;archive&gt;\r\n                &lt;manifest&gt;\r\n                  &lt;mainClass&gt;com.xxx.gcp.dataflow.yyy.pipeline.TerraformPipeline&lt;/mainClass&gt;\r\n                &lt;/manifest&gt;\r\n              &lt;/archive&gt;\r\n            &lt;/configuration&gt;\r\n          &lt;/plugin&gt;\r\n    \r\n          &lt;plugin&gt;\r\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n            &lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;\r\n            &lt;version&gt;3.0.0&lt;/version&gt;\r\n            &lt;executions&gt;\r\n              &lt;execution&gt;\r\n                &lt;id&gt;bundle-and-repackage&lt;/id&gt;\r\n                &lt;phase&gt;package&lt;/phase&gt;\r\n                &lt;goals&gt;\r\n                  &lt;goal&gt;shade&lt;/goal&gt;\r\n                &lt;/goals&gt;\r\n                &lt;configuration&gt;\r\n    \r\n                  &lt;artifactSet&gt;\r\n                    &lt;includes&gt;\r\n                      &lt;include&gt;*:*&lt;/include&gt;\r\n                    &lt;/includes&gt;\r\n                  &lt;/artifactSet&gt;\r\n    \r\n                  &lt;transformers&gt;\r\n                    &lt;transformer\r\n                            implementation=&quot;org.apache.maven.plugins.shade.resource.ServicesResourceTransformer&quot;/&gt;\r\n                  &lt;/transformers&gt;\r\n    \r\n                &lt;/configuration&gt;\r\n              &lt;/execution&gt;\r\n            &lt;/executions&gt;\r\n          &lt;/plugin&gt;\r\n    \r\n        &lt;/plugins&gt;\r\n    \r\n        &lt;pluginManagement&gt;\r\n          &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n              &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\r\n              &lt;artifactId&gt;exec-maven-plugin&lt;/artifactId&gt;\r\n              &lt;version&gt;${maven-exec-plugin.version}&lt;/version&gt;\r\n              &lt;configuration&gt;\r\n                &lt;cleanupDaemonThreads&gt;false&lt;/cleanupDaemonThreads&gt;\r\n              &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n    \r\n    \r\n          &lt;/plugins&gt;\r\n    \r\n    \r\n        &lt;/pluginManagement&gt;\r\n      &lt;/build&gt;\r\n    \r\n      &lt;dependencies&gt;\r\n        &lt;...&gt;\r\n      &lt;/dependencies&gt;\r\n    &lt;/project&gt;\r\n\r\n","title":"Generate a Dataflow template from multi module project in Java","body":"<p>I don´t have much experience with Java, especially with multi modules project, so I'm not able to create a dataflow template from a multi-module project.</p>\n\n<p>To generate a template from a Dataflow template, you have to use something like this:</p>\n\n<pre><code>mvn compile exec:java \\\n     -Dexec.mainClass=com.example.myclass \\\n     -Dexec.args=\"--runner=DataflowRunner \\\n                  --project=YOUR_PROJECT_ID \\\n                  --stagingLocation=gs://YOUR_BUCKET_NAME/staging \\\n                  --templateLocation=gs://YOUR_BUCKET_NAME/templates/YOUR_TEMPLATE_NAME\"\n</code></pre>\n\n<p>This works well for me in a simple Java project, but currently I need to use the following in a project with the following simplified structure:</p>\n\n<pre><code>C:.\n|   pom.xml\n|\n+---configuration\n|   |   dependency-reduced-pom.xml\n|   |   pom.xml\n|   |\n|   +---src\n|   |   \\---main\n|   |       \\---java\n|   |           \\---com\n|   |               \\---xxx\n|   |                   \\---gcp\n|   |                       \\---dataflow\n|   |                           \\---yyy\n|   |                               +---package\n|   |                               |   |   java files\n|   |\n+---pipeline\n|   |   dependency-reduced-pom.xml\n|   |   pom.xml\n|   |\n|   +---src\n|   |   \\---main\n|   |       \\---java\n|   |           \\---com\n|   |               \\---xxx\n|   |                   \\---gcp\n|   |                       \\---dataflow\n|   |                           \\---yyy\n|   |                               \\---package\n|   |                                       MAINJAVACLASS.java\n|   |\n\\---transform\n|   |   dependency-reduced-pom.xml\n|   |   pom.xml\n|   |\n|   +---src\n|   |   \\---main\n|   |       +---java\n|   |       |   +---com\n|   |       |   |   \\---xxx\n|   |       |   |       \\---gcp\n|   |       |   |           \\---dataflow\n|   |       |   |               \\---yyy\n|   |       |   |                   +---package\n|   |       |   |                   |       java files\n</code></pre>\n\n<hr>\n\n<p>I have executed <strong>mvn package</strong> without any error with the following output:</p>\n\n<pre><code>[INFO] Reactor Build Order:\n[INFO]\n[INFO] pipeline-framework                                                 [pom]\n[INFO] configuration                                                      [jar]\n[INFO] transform                                                          [jar]\n[INFO] pipeline                                                           [jar]\n\n&lt;...&gt;\n\n[INFO] Reactor Summary for pipeline-framework 0.1:\n[INFO]\n[INFO] pipeline-framework ................................. SUCCESS [ 19.076 s]\n[INFO] configuration ...................................... SUCCESS [ 25.070 s]\n[INFO] transform .......................................... SUCCESS [ 21.625 s]\n[INFO] pipeline ........................................... SUCCESS [ 19.365 s]\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD SUCCESS\n</code></pre>\n\n<p>But when I try to execute:</p>\n\n<pre><code>mvn compile exec:java -Dexec.mainClass=com.xxx.gcp.dataflow.yyy.pipeline.MAINJAVACLASS -Dexec.args=...\n</code></pre>\n\n<p>I have the following error:</p>\n\n<p>If I execute it from the root directoy:</p>\n\n<pre><code>[INFO] Reactor Summary for pipeline-framework 0.1:\n[INFO]\n[INFO] pipeline-framework ................................. FAILURE [  5.287 s]\n[INFO] configuration ...................................... SKIPPED\n[INFO] transform .......................................... SKIPPED\n[INFO] pipeline ........................................... SKIPPED\n\n&lt;...&gt;\n\nCaused by: java.lang.ClassNotFoundException: com.xxx.gcp.dataflow.yyy.pipeline.MAINJAVACLASS\n</code></pre>\n\n<p>I also tried with:</p>\n\n<pre><code>mvn compile exec:java -pl pipeline &lt;...&gt;\n</code></pre>\n\n<p>If I execute it inside the pipeline directoy:</p>\n\n<pre><code>Could not resolve dependencies for project com.xxx.gcp.dataflow:pipeline:jar:0.1: The following artifacts could not be resolved: com.xxx.gcp.dataflow:transform:jar:0.1, com.xxx.gcp.dataflow:configuration:jar:0.1: Failure to find com.xxx.gcp.dataflow:transform:jar:0.1 in https://repo.maven.apache.org/maven2\n</code></pre>\n\n<hr>\n\n<p><strong>Which command should I execute to build the template?</strong></p>\n\n<hr>\n\n<p>The main pom.xml file</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\"\n         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\"&gt;\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n  &lt;groupId&gt;com.xxx.gcp.dataflow&lt;/groupId&gt;\n  &lt;artifactId&gt;pipeline-framework&lt;/artifactId&gt;\n  &lt;version&gt;0.1&lt;/version&gt;\n  &lt;packaging&gt;pom&lt;/packaging&gt;\n\n  &lt;modules&gt;\n    &lt;module&gt;configuration&lt;/module&gt;\n    &lt;module&gt;transform&lt;/module&gt;\n    &lt;module&gt;pipeline&lt;/module&gt;\n  &lt;/modules&gt;\n\n  &lt;properties&gt;\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n    &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;\n    &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;\n\n    &lt;beam.version&gt;2.16.0&lt;/beam.version&gt;\n\n    &lt;maven-compiler-plugin.version&gt;3.7.0&lt;/maven-compiler-plugin.version&gt;\n    &lt;maven-exec-plugin.version&gt;1.6.0&lt;/maven-exec-plugin.version&gt;\n    &lt;maven-jar-plugin.version&gt;3.1.2&lt;/maven-jar-plugin.version&gt;\n    &lt;slf4j.version&gt;1.7.25&lt;/slf4j.version&gt;\n\n    &lt;autovalue.annotations.version&gt;1.6&lt;/autovalue.annotations.version&gt;\n    &lt;autovalue.version&gt;1.6.2&lt;/autovalue.version&gt;\n  &lt;/properties&gt;\n\n  &lt;repositories&gt;\n    &lt;repository&gt;\n      &lt;id&gt;apache.snapshots&lt;/id&gt;\n      &lt;name&gt;Apache Development Snapshot Repository&lt;/name&gt;\n      &lt;url&gt;https://repository.apache.org/content/repositories/snapshots/&lt;/url&gt;\n      &lt;releases&gt;\n        &lt;enabled&gt;false&lt;/enabled&gt;\n      &lt;/releases&gt;\n      &lt;snapshots&gt;\n        &lt;enabled&gt;true&lt;/enabled&gt;\n      &lt;/snapshots&gt;\n    &lt;/repository&gt;\n  &lt;/repositories&gt;\n\n  &lt;dependencyManagement&gt;\n    &lt;dependencies&gt;\n      &lt;dependency&gt;\n        &lt;groupId&gt;${project.groupId}&lt;/groupId&gt;\n        &lt;artifactId&gt;configuration&lt;/artifactId&gt;\n        &lt;version&gt;${project.version}&lt;/version&gt;\n      &lt;/dependency&gt;\n      &lt;dependency&gt;\n        &lt;groupId&gt;${project.groupId}&lt;/groupId&gt;\n        &lt;artifactId&gt;transform&lt;/artifactId&gt;\n        &lt;version&gt;${project.version}&lt;/version&gt;\n      &lt;/dependency&gt;\n      &lt;dependency&gt;\n        &lt;groupId&gt;${project.groupId}&lt;/groupId&gt;\n        &lt;artifactId&gt;pipeline&lt;/artifactId&gt;\n        &lt;version&gt;${project.version}&lt;/version&gt;\n      &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n  &lt;/dependencyManagement&gt;\n\n  &lt;build&gt;\n    &lt;plugins&gt;\n      &lt;plugin&gt;\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n        &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n        &lt;version&gt;${maven-compiler-plugin.version}&lt;/version&gt;\n        &lt;configuration&gt;\n          &lt;source&gt;1.8&lt;/source&gt;\n          &lt;target&gt;1.8&lt;/target&gt;\n        &lt;/configuration&gt;\n      &lt;/plugin&gt;\n      &lt;plugin&gt;\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n        &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n        &lt;version&gt;2.22.1&lt;/version&gt;\n        &lt;configuration&gt;\n          &lt;useSystemClassLoader&gt;false&lt;/useSystemClassLoader&gt;\n        &lt;/configuration&gt;\n      &lt;/plugin&gt;\n      &lt;plugin&gt;\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n        &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\n        &lt;version&gt;${maven-jar-plugin.version}&lt;/version&gt;\n        &lt;configuration&gt;\n          &lt;archive&gt;\n            &lt;manifest&gt;\n              &lt;mainClass&gt;com.xxx.gcp.dataflow.yyy.pipeline.TerraformPipeline&lt;/mainClass&gt;\n            &lt;/manifest&gt;\n          &lt;/archive&gt;\n        &lt;/configuration&gt;\n      &lt;/plugin&gt;\n\n      &lt;plugin&gt;\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n        &lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;\n        &lt;version&gt;3.0.0&lt;/version&gt;\n        &lt;executions&gt;\n          &lt;execution&gt;\n            &lt;id&gt;bundle-and-repackage&lt;/id&gt;\n            &lt;phase&gt;package&lt;/phase&gt;\n            &lt;goals&gt;\n              &lt;goal&gt;shade&lt;/goal&gt;\n            &lt;/goals&gt;\n            &lt;configuration&gt;\n\n              &lt;artifactSet&gt;\n                &lt;includes&gt;\n                  &lt;include&gt;*:*&lt;/include&gt;\n                &lt;/includes&gt;\n              &lt;/artifactSet&gt;\n\n              &lt;transformers&gt;\n                &lt;transformer\n                        implementation=\"org.apache.maven.plugins.shade.resource.ServicesResourceTransformer\"/&gt;\n              &lt;/transformers&gt;\n\n            &lt;/configuration&gt;\n          &lt;/execution&gt;\n        &lt;/executions&gt;\n      &lt;/plugin&gt;\n\n    &lt;/plugins&gt;\n\n    &lt;pluginManagement&gt;\n      &lt;plugins&gt;\n        &lt;plugin&gt;\n          &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\n          &lt;artifactId&gt;exec-maven-plugin&lt;/artifactId&gt;\n          &lt;version&gt;${maven-exec-plugin.version}&lt;/version&gt;\n          &lt;configuration&gt;\n            &lt;cleanupDaemonThreads&gt;false&lt;/cleanupDaemonThreads&gt;\n          &lt;/configuration&gt;\n        &lt;/plugin&gt;\n\n\n      &lt;/plugins&gt;\n\n\n    &lt;/pluginManagement&gt;\n  &lt;/build&gt;\n\n  &lt;dependencies&gt;\n    &lt;...&gt;\n  &lt;/dependencies&gt;\n&lt;/project&gt;\n</code></pre>\n"},{"tags":["java","android","android-fragments","android-recyclerview"],"comments":[{"owner":{"account_id":22564906,"reputation":3594,"user_id":17133283,"display_name":"Sambhav Khandelwal"},"score":0,"creation_date":1643523383,"post_id":70912252,"comment_id":125360061,"body_markdown":"where are you adding `notifyDataSetChanged`? for the adapter","body":"where are you adding <code>notifyDataSetChanged</code>? for the adapter"},{"owner":{"account_id":3131499,"reputation":1797,"user_id":2649154,"accept_rate":93,"display_name":"gioravered"},"score":0,"creation_date":1643524286,"post_id":70912252,"comment_id":125360180,"body_markdown":"No need for notifyDataSetChanged. He passes the data in the Adapter&#39;s constructor. Have you tested that getPdfList() returns a non-empty list?","body":"No need for notifyDataSetChanged. He passes the data in the Adapter&#39;s constructor. Have you tested that getPdfList() returns a non-empty list?"},{"owner":{"account_id":24097966,"reputation":13,"user_id":18070181,"display_name":"Justice Chuks"},"score":0,"creation_date":1643527342,"post_id":70912252,"comment_id":125360631,"body_markdown":"How do I test that @gioravered","body":"How do I test that @gioravered"},{"owner":{"account_id":3131499,"reputation":1797,"user_id":2649154,"accept_rate":93,"display_name":"gioravered"},"score":0,"creation_date":1643530297,"post_id":70912252,"comment_id":125361032,"body_markdown":"Either print the result of getPdfList() or add a breakpoint, run in debug mode and check the returned value.","body":"Either print the result of getPdfList() or add a breakpoint, run in debug mode and check the returned value."},{"owner":{"account_id":24097966,"reputation":13,"user_id":18070181,"display_name":"Justice Chuks"},"score":0,"creation_date":1643607818,"post_id":70912252,"comment_id":125376176,"body_markdown":"You&#39;re right @gioravered why it returns an empty list is what I don&#39;t understand and what can I do to change that.","body":"You&#39;re right @gioravered why it returns an empty list is what I don&#39;t understand and what can I do to change that."}],"owner":{"account_id":24097966,"reputation":13,"user_id":18070181,"display_name":"Justice Chuks"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":684,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1643522685,"creation_date":1643522685,"question_id":70912252,"body_markdown":"ello guys good day I&#39;m trying to make an app using android java but I&#39;m stuck any idea would be appreciated\r\n\r\nI&#39;m trying to access all pdf files in android device using the media store and cursor but it&#39;s not working the aim is to display all pdf files in a recycler view on a fragment the issue here is that it never displays meaning maybe the data wasn&#39;t passed because when the arraylist is populated manually it displays otherwise non I&#39;ve checked the log but I can&#39;t seem to find anything.\r\n\r\n\r\nThis my fragment code\r\n\r\n\r\n```\r\n\r\n\r\npublic class AllFragment extends Fragment {\r\n    View view;\r\n    private static final String TAG = &quot;MyActivity&quot;;\r\n    ArrayList&lt;String&gt; pdfList;\r\n    \r\n    \r\n    private final int STORAGE_PERMISSION_CODE = 1;\r\n\r\n    private Activity mActivity;\r\n\r\n    @Override\r\n    public void onAttach(@NonNull Context context) {\r\n        super.onAttach(context);\r\n        mActivity = (Activity) context;\r\n    }\r\n    \r\n    \r\n    public void checkPermission(){\r\n        \r\n        if ((ContextCompat.checkSelfPermission(mActivity, Manifest.permission.READ_EXTERNAL_STORAGE) != PackageManager.PERMISSION_GRANTED))\r\n        {\r\n            if (ActivityCompat.shouldShowRequestPermissionRationale(mActivity, Manifest.permission.READ_EXTERNAL_STORAGE)) {\r\n                new AlertDialog.Builder(mActivity)\r\n                    .setTitle(&quot;Permission needed&quot;)\r\n                    .setMessage(&quot;Allow &quot;+getResources().getString(R.string.app_name)+&quot; to access your storage?&quot;)\r\n                    .setPositiveButton(&quot;ok&quot;, new DialogInterface.OnClickListener(){\r\n                        @Override\r\n                        public void onClick(DialogInterface dialog, int which){\r\n                            ActivityCompat.requestPermissions(mActivity,\r\n                                                              new String[]{Manifest.permission.READ_EXTERNAL_STORAGE}, STORAGE_PERMISSION_CODE);\r\n                        }\r\n                    } \r\n                )\r\n                .setNegativeButton(&quot;cancel&quot;, new DialogInterface.OnClickListener() {\r\n                    @Override\r\n                    public void onClick(DialogInterface dialog, int which){\r\n                        dialog.dismiss();\r\n                        Toast.makeText(mActivity, &quot;Please allow this permission!&quot;, Toast.LENGTH_SHORT).show();\r\n                    }\r\n                    \r\n                })\r\n                .create().show();\r\n            } else {\r\n                ActivityCompat.requestPermissions(mActivity,\r\n                                                  new String[]{Manifest.permission.READ_EXTERNAL_STORAGE}, STORAGE_PERMISSION_CODE);\r\n            }\r\n        }\r\n        \r\n    }\r\n    \r\n    \r\n    //checkPermission();\r\n    \r\n    \r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {\r\n        view = inflater.inflate(R.layout.AllFragment, container, false);\r\n        //pdfList = getPdfList();\r\n        //buildData();\r\n        //LinearLayoutManager\r\n        //pdfList = new String[] {&quot;one&quot;, &quot;two&quot;, &quot;three&quot;, &quot;fou4&quot;, &quot;five&quot;, &quot;six&quot;};\r\n        \r\n        getPdfList();\r\n        initRecyclerView(view);\r\n        return view;\r\n    }\r\n    \r\n    \r\n    @Override\r\n    public void onCreate(Bundle savedInstanceState) {\r\n        \r\n        super.onCreate(savedInstanceState);\r\n        checkPermission();\r\n    }\r\n    \r\n    \r\n    //RecyclerView\r\n    public void initRecyclerView(View view){\r\n        RecyclerView recyclerView = (RecyclerView) view.findViewById(R.id.allPdfsRecyclerView);\r\n        recyclerView.setLayoutManager(new LinearLayoutManager(getActivity()));\r\n        AllPdfAdapter adapter = new AllPdfAdapter(pdfList);\r\n        recyclerView.setAdapter(adapter);\r\n    }\r\n    \r\n    \r\n   \r\n   \r\n    \r\n    public ArrayList&lt;String&gt; getPdfList() {\r\n        pdfList = new ArrayList&lt;&gt;();\r\n        Uri collection;\r\n        \r\n        final String[] projection = new String[]{\r\n            MediaStore.Files.FileColumns.DISPLAY_NAME,\r\n            MediaStore.Files.FileColumns.DATE_ADDED,\r\n            MediaStore.Files.FileColumns.DATA,\r\n            MediaStore.Files.FileColumns.MIME_TYPE,\r\n        };\r\n\r\n        final String sortOrder = MediaStore.Files.FileColumns.DATE_ADDED + &quot; DESC&quot;;\r\n\r\n        final String selection = MediaStore.Files.FileColumns.MIME_TYPE + &quot; = ?&quot;;\r\n\r\n        final String mimeType = MimeTypeMap.getSingleton().getMimeTypeFromExtension(&quot;pdf&quot;);\r\n        final String[] selectionArgs = new String[]{mimeType};\r\n\r\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.Q) {\r\n            collection = MediaStore.Files.getContentUri(MediaStore.VOLUME_EXTERNAL);\r\n        }else{\r\n            collection = MediaStore.Files.getContentUri(&quot;external&quot;);\r\n        }\r\n\r\n\r\n        try (Cursor cursor = getActivity().getContentResolver().query(collection, projection, selection, selectionArgs, sortOrder)) {\r\n            assert cursor != null;\r\n\r\n            if (cursor.moveToFirst()) {\r\n                int columnData = cursor.getColumnIndex(MediaStore.Files.FileColumns.DATA);\r\n                int columnName = cursor.getColumnIndex(MediaStore.Files.FileColumns.DISPLAY_NAME);\r\n                //ArrayList pdfList = new ArrayList&lt;&gt;();\r\n                do {\r\n                    pdfList.add((cursor.getString(columnData)));\r\n                    System.out.println(cursor.getString(columnData));\r\n                    Log.d(TAG, &quot;getPdf: &quot; + cursor.getString(columnData));\r\n                    //you can get your pdf files\r\n                } while (cursor.moveToNext());\r\n            }\r\n        }\r\n        return pdfList;\r\n    }\r\n    \r\n    \r\n}\r\n```\r\n\r\n\r\nThis my adapter code\r\n\r\n```\r\n\r\n\r\n\r\npublic class AllPdfAdapter extends RecyclerView.Adapter&lt;AllPdfAdapter.My_ViewHolder&gt;\r\n{\r\n    private ArrayList&lt;String&gt; data;\r\n    \r\n    \r\n    public AllPdfAdapter(ArrayList&lt;String&gt;data){\r\n        this.data = data;\r\n    }\r\n    \r\n    \r\n    @Override\r\n    public AllPdfAdapter.My_ViewHolder onCreateViewHolder(ViewGroup p1, int p2)\r\n    {\r\n        LayoutInflater li = LayoutInflater.from(p1.getContext());\r\n        View v = li.inflate(R.layout.allList,p1,false);\r\n        \r\n        // TODO: Implement this method\r\n        return new My_ViewHolder(v);\r\n    }\r\n    \r\n    \r\n    @Override\r\n    public void onBindViewHolder(AllPdfAdapter.My_ViewHolder holder, int position)\r\n    {\r\n        // TODO: Implement this method\r\n        String title = data.get(position);\r\n        holder.ttt.setText(title);\r\n        \r\n    }\r\n    \r\n    \r\n    @Override\r\n    public int getItemCount()\r\n    {\r\n        // TODO: Implement this method\r\n        return data.size();\r\n    }\r\n    \r\n    \r\n    public class My_ViewHolder extends RecyclerView.ViewHolder{\r\n        \r\n        ImageView iii;\r\n        TextView ttt;\r\n        \r\n        public My_ViewHolder (View v){\r\n            super(v);\r\n            \r\n            iii = (ImageView) v.findViewById(R.id.img);\r\n            ttt = (TextView) v.findViewById(R.id.title);\r\n        }\r\n        \r\n    }\r\n    \r\n}\r\n```\r\n\r\nYour answers will be appreciated.\r\n","title":"How to load pdf files to recycler view in fragment?","body":"<p>ello guys good day I'm trying to make an app using android java but I'm stuck any idea would be appreciated</p>\n<p>I'm trying to access all pdf files in android device using the media store and cursor but it's not working the aim is to display all pdf files in a recycler view on a fragment the issue here is that it never displays meaning maybe the data wasn't passed because when the arraylist is populated manually it displays otherwise non I've checked the log but I can't seem to find anything.</p>\n<p>This my fragment code</p>\n<pre><code>\n\npublic class AllFragment extends Fragment {\n    View view;\n    private static final String TAG = &quot;MyActivity&quot;;\n    ArrayList&lt;String&gt; pdfList;\n    \n    \n    private final int STORAGE_PERMISSION_CODE = 1;\n\n    private Activity mActivity;\n\n    @Override\n    public void onAttach(@NonNull Context context) {\n        super.onAttach(context);\n        mActivity = (Activity) context;\n    }\n    \n    \n    public void checkPermission(){\n        \n        if ((ContextCompat.checkSelfPermission(mActivity, Manifest.permission.READ_EXTERNAL_STORAGE) != PackageManager.PERMISSION_GRANTED))\n        {\n            if (ActivityCompat.shouldShowRequestPermissionRationale(mActivity, Manifest.permission.READ_EXTERNAL_STORAGE)) {\n                new AlertDialog.Builder(mActivity)\n                    .setTitle(&quot;Permission needed&quot;)\n                    .setMessage(&quot;Allow &quot;+getResources().getString(R.string.app_name)+&quot; to access your storage?&quot;)\n                    .setPositiveButton(&quot;ok&quot;, new DialogInterface.OnClickListener(){\n                        @Override\n                        public void onClick(DialogInterface dialog, int which){\n                            ActivityCompat.requestPermissions(mActivity,\n                                                              new String[]{Manifest.permission.READ_EXTERNAL_STORAGE}, STORAGE_PERMISSION_CODE);\n                        }\n                    } \n                )\n                .setNegativeButton(&quot;cancel&quot;, new DialogInterface.OnClickListener() {\n                    @Override\n                    public void onClick(DialogInterface dialog, int which){\n                        dialog.dismiss();\n                        Toast.makeText(mActivity, &quot;Please allow this permission!&quot;, Toast.LENGTH_SHORT).show();\n                    }\n                    \n                })\n                .create().show();\n            } else {\n                ActivityCompat.requestPermissions(mActivity,\n                                                  new String[]{Manifest.permission.READ_EXTERNAL_STORAGE}, STORAGE_PERMISSION_CODE);\n            }\n        }\n        \n    }\n    \n    \n    //checkPermission();\n    \n    \n    @Override\n    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {\n        view = inflater.inflate(R.layout.AllFragment, container, false);\n        //pdfList = getPdfList();\n        //buildData();\n        //LinearLayoutManager\n        //pdfList = new String[] {&quot;one&quot;, &quot;two&quot;, &quot;three&quot;, &quot;fou4&quot;, &quot;five&quot;, &quot;six&quot;};\n        \n        getPdfList();\n        initRecyclerView(view);\n        return view;\n    }\n    \n    \n    @Override\n    public void onCreate(Bundle savedInstanceState) {\n        \n        super.onCreate(savedInstanceState);\n        checkPermission();\n    }\n    \n    \n    //RecyclerView\n    public void initRecyclerView(View view){\n        RecyclerView recyclerView = (RecyclerView) view.findViewById(R.id.allPdfsRecyclerView);\n        recyclerView.setLayoutManager(new LinearLayoutManager(getActivity()));\n        AllPdfAdapter adapter = new AllPdfAdapter(pdfList);\n        recyclerView.setAdapter(adapter);\n    }\n    \n    \n   \n   \n    \n    public ArrayList&lt;String&gt; getPdfList() {\n        pdfList = new ArrayList&lt;&gt;();\n        Uri collection;\n        \n        final String[] projection = new String[]{\n            MediaStore.Files.FileColumns.DISPLAY_NAME,\n            MediaStore.Files.FileColumns.DATE_ADDED,\n            MediaStore.Files.FileColumns.DATA,\n            MediaStore.Files.FileColumns.MIME_TYPE,\n        };\n\n        final String sortOrder = MediaStore.Files.FileColumns.DATE_ADDED + &quot; DESC&quot;;\n\n        final String selection = MediaStore.Files.FileColumns.MIME_TYPE + &quot; = ?&quot;;\n\n        final String mimeType = MimeTypeMap.getSingleton().getMimeTypeFromExtension(&quot;pdf&quot;);\n        final String[] selectionArgs = new String[]{mimeType};\n\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.Q) {\n            collection = MediaStore.Files.getContentUri(MediaStore.VOLUME_EXTERNAL);\n        }else{\n            collection = MediaStore.Files.getContentUri(&quot;external&quot;);\n        }\n\n\n        try (Cursor cursor = getActivity().getContentResolver().query(collection, projection, selection, selectionArgs, sortOrder)) {\n            assert cursor != null;\n\n            if (cursor.moveToFirst()) {\n                int columnData = cursor.getColumnIndex(MediaStore.Files.FileColumns.DATA);\n                int columnName = cursor.getColumnIndex(MediaStore.Files.FileColumns.DISPLAY_NAME);\n                //ArrayList pdfList = new ArrayList&lt;&gt;();\n                do {\n                    pdfList.add((cursor.getString(columnData)));\n                    System.out.println(cursor.getString(columnData));\n                    Log.d(TAG, &quot;getPdf: &quot; + cursor.getString(columnData));\n                    //you can get your pdf files\n                } while (cursor.moveToNext());\n            }\n        }\n        return pdfList;\n    }\n    \n    \n}\n</code></pre>\n<p>This my adapter code</p>\n<pre><code>\n\n\npublic class AllPdfAdapter extends RecyclerView.Adapter&lt;AllPdfAdapter.My_ViewHolder&gt;\n{\n    private ArrayList&lt;String&gt; data;\n    \n    \n    public AllPdfAdapter(ArrayList&lt;String&gt;data){\n        this.data = data;\n    }\n    \n    \n    @Override\n    public AllPdfAdapter.My_ViewHolder onCreateViewHolder(ViewGroup p1, int p2)\n    {\n        LayoutInflater li = LayoutInflater.from(p1.getContext());\n        View v = li.inflate(R.layout.allList,p1,false);\n        \n        // TODO: Implement this method\n        return new My_ViewHolder(v);\n    }\n    \n    \n    @Override\n    public void onBindViewHolder(AllPdfAdapter.My_ViewHolder holder, int position)\n    {\n        // TODO: Implement this method\n        String title = data.get(position);\n        holder.ttt.setText(title);\n        \n    }\n    \n    \n    @Override\n    public int getItemCount()\n    {\n        // TODO: Implement this method\n        return data.size();\n    }\n    \n    \n    public class My_ViewHolder extends RecyclerView.ViewHolder{\n        \n        ImageView iii;\n        TextView ttt;\n        \n        public My_ViewHolder (View v){\n            super(v);\n            \n            iii = (ImageView) v.findViewById(R.id.img);\n            ttt = (TextView) v.findViewById(R.id.title);\n        }\n        \n    }\n    \n}\n</code></pre>\n<p>Your answers will be appreciated.</p>\n"},{"tags":["java"],"answers":[{"tags":[],"owner":{"account_id":11224986,"reputation":2603,"user_id":8234870,"display_name":"Udesh"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1643522400,"creation_date":1643521805,"answer_id":70912191,"question_id":70912143,"body_markdown":"Use **java.io.PrintWriter** to buffer your data and use flush method to flush your data\r\n\r\nCode:\r\n------\r\n\r\n    import java.util.*;\r\n    import java.io.*;\r\n    \r\n    public class Main{\r\n    \r\n    \tpublic static void main(String[] args)throws Exception{\r\n    \t\tScanner scan = new Scanner(System.in);\r\n    \t\tPrintWriter out = new PrintWriter(System.out);//I&#39;m buffering standard output you can use file also\r\n    \r\n    \t\tint first = scan.nextInt();\r\n    \t\tfor(int i = 1; i &lt;= first; i++){\r\n    \r\n    \t\t\tString max = scan.next();\r\n\r\n    \t\t\tboolean check = false;\r\n    \t\t\tboolean f = false;\r\n    \r\n    \t\t\tfor(int x = 0; x &lt; max.length(); x++){\r\n    \t\t\t\tif(Character.isLetter(max.charAt(x))){\r\n    \t\t\t\t\tif(!check){\r\n    \t\t\t\t\t\tcheck = true;\r\n    \t\t\t\t\t}\r\n    \t\t\t\t}\r\n    \t\t\t\telse if(Character.isDigit(max.charAt(x))){\r\n    \t\t\t\t\tint second = (int)max.charAt(x);\r\n    \t\t\t\t\tif(!check || second%2 == 0){\r\n    \t\t\t\t\t\tf = true;\r\n    \t\t\t\t\t\tbreak;\r\n    \t\t\t\t\t}\r\n    \t\t\t\t}\r\n    \t\t\t\telse if(max.charAt(x) == &#39;#&#39; || max.charAt(x) == &#39;_&#39;){\r\n    \t\t\t\t\tif(!check){\r\n    \t\t\t\t\t\tcheck = true;\r\n    \t\t\t\t\t}\r\n    \t\t\t\t}\r\n    \t\t\t\telse if(Character.isDigit(max.charAt(x))){\r\n    \t\t\t\t\tint second = (int)max.charAt(x);\r\n    \t\t\t\t\tif(!check || second%2 == 0){\r\n    \t\t\t\t\t\tf = true;\r\n    \t\t\t\t\t\tbreak;\r\n    \t\t\t\t\t}\r\n    \t\t\t\t}\r\n    \t\t\t\telse if(max.charAt(x) == &#39;#&#39; ||max.charAt(x) == &#39;_&#39;){\r\n    \t\t\t\t\tif(!check){\r\n    \t\t\t\t\t\tcheck = true;\r\n    \t\t\t\t\t}\r\n    \t\t\t\t}\r\n    \t\t\t\telse{\r\n    \t\t\t\t\tf = true;\r\n    \t\t\t\t\tbreak;\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \r\n    \t\t\tif(f){\r\n    \t\t\t\t//System.out.println(&quot;Case #&quot; + i + &quot;: Not Valid&quot;);\r\n    \t\t\t\tout.println(&quot;Case #&quot; + i + &quot;: Not Valid&quot;);\r\n    \t\t\t}\r\n    \t\t\telse{\r\n    \t\t\t\t//System.out.println(&quot;Case #&quot; + i + &quot;: Valid&quot;);\r\n    \t\t\t\tout.println(&quot;Case #&quot; + i + &quot;: Valid&quot;);\r\n    \t\t\t}\r\n    \t\t}\r\n    \t\tout.flush();//flushes out to standard output\r\n    \t\tout.close();//after closing it cannot be used further\r\n    \t}\r\n    }\r\n\r\nOutput:\r\n-----\r\n\r\n    $ javac Main.java &amp;&amp; java Main\r\n    2\r\n    Hello\r\n    Bye\r\n    Case #1: Valid\r\n    Case #2: Valid\r\n\r\n","title":"How to output as a whole","body":"<p>Use <strong>java.io.PrintWriter</strong> to buffer your data and use flush method to flush your data</p>\n<h2>Code:</h2>\n<pre><code>import java.util.*;\nimport java.io.*;\n\npublic class Main{\n\n    public static void main(String[] args)throws Exception{\n        Scanner scan = new Scanner(System.in);\n        PrintWriter out = new PrintWriter(System.out);//I'm buffering standard output you can use file also\n\n        int first = scan.nextInt();\n        for(int i = 1; i &lt;= first; i++){\n\n            String max = scan.next();\n\n            boolean check = false;\n            boolean f = false;\n\n            for(int x = 0; x &lt; max.length(); x++){\n                if(Character.isLetter(max.charAt(x))){\n                    if(!check){\n                        check = true;\n                    }\n                }\n                else if(Character.isDigit(max.charAt(x))){\n                    int second = (int)max.charAt(x);\n                    if(!check || second%2 == 0){\n                        f = true;\n                        break;\n                    }\n                }\n                else if(max.charAt(x) == '#' || max.charAt(x) == '_'){\n                    if(!check){\n                        check = true;\n                    }\n                }\n                else if(Character.isDigit(max.charAt(x))){\n                    int second = (int)max.charAt(x);\n                    if(!check || second%2 == 0){\n                        f = true;\n                        break;\n                    }\n                }\n                else if(max.charAt(x) == '#' ||max.charAt(x) == '_'){\n                    if(!check){\n                        check = true;\n                    }\n                }\n                else{\n                    f = true;\n                    break;\n                }\n            }\n\n            if(f){\n                //System.out.println(&quot;Case #&quot; + i + &quot;: Not Valid&quot;);\n                out.println(&quot;Case #&quot; + i + &quot;: Not Valid&quot;);\n            }\n            else{\n                //System.out.println(&quot;Case #&quot; + i + &quot;: Valid&quot;);\n                out.println(&quot;Case #&quot; + i + &quot;: Valid&quot;);\n            }\n        }\n        out.flush();//flushes out to standard output\n        out.close();//after closing it cannot be used further\n    }\n}\n</code></pre>\n<h2>Output:</h2>\n<pre><code>$ javac Main.java &amp;&amp; java Main\n2\nHello\nBye\nCase #1: Valid\nCase #2: Valid\n</code></pre>\n"}],"owner":{"account_id":22810125,"reputation":35,"user_id":16961576,"display_name":"Hyuyeong"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"closed_date":1643522958,"answer_count":1,"score":1,"last_activity_date":1643522505,"creation_date":1643521247,"question_id":70912143,"body_markdown":"I have my code below;\r\n```\r\nimport java.util.*;\r\n\r\npublic class Main{\r\n    \r\n    public static void main(String[] args){\r\n        Scanner scan = new Scanner(System.in);\r\n        \r\n       int first = scan.nextInt();\r\n        for(int i = 1; i &lt;= first; i++){\r\n            \r\n            String max = scan.next();\r\n            \r\n            \r\n            boolean check = false;\r\n            boolean f = false;\r\n            \r\n            for(int x = 0; x &lt; max.length(); x++){\r\n                if(Character.isLetter(max.charAt(x))){\r\n                    if(!check){\r\n                        check = true;\r\n                    }\r\n            }\r\n            else if(Character.isDigit(max.charAt(x))){\r\n              int second = (int)max.charAt(x);\r\n                if(!check || second%2 == 0){\r\n                    f = true;\r\n                    break;\r\n                }\r\n            }\r\n            else if(max.charAt(x) == &#39;#&#39; || max.charAt(x) == &#39;_&#39;){\r\n                if(!check){\r\n                check = true;\r\n            }\r\n        }\r\n        else if(Character.isDigit(max.charAt(x))){\r\n            int second = (int)max.charAt(x);\r\n             if(!check || second%2 == 0){\r\n                 f = true;\r\n                 break;\r\n             }\r\n        }\r\n        else if(max.charAt(x) == &#39;#&#39; ||max.charAt(x) == &#39;_&#39;){\r\n            if(!check){\r\n                check = true;\r\n            }\r\n        }\r\n        else{\r\n            f = true;\r\n            break;\r\n        }\r\n    }\r\n    \r\n    if(f){\r\n        System.out.println(&quot;Case #&quot; + i + &quot;: Not Valid&quot;);\r\n    }\r\n    else{\r\n        System.out.println(&quot;Case #&quot; + i + &quot;: Valid&quot;);\r\n    }\r\n}\r\n}\r\n}\r\n```\r\nit is working just fine, but I wanted it to output like this\r\n\r\nSAMPLE INPUT\r\n\r\n1\r\n\r\nHi\r\n\r\n123hi\r\n\r\nyes_sir\r\n\r\n\r\nSAMPLE OUTPUT\r\n\r\nCase #1: VALID\r\n\r\nCase #2: INVALID\r\n\r\nCase #3: VALID\r\n\r\nnot like this\r\n\r\n\r\nINPUT\r\n\r\n3\r\n\r\nValid\r\n\r\nCase #1: VALID\r\n\r\n12Price\r\n\r\nCase #2: INVALID\r\n\r\nitem_price\r\n\r\nCase #3: VALID\r\n\r\nI wanted it to output as a whole not one by one,\r\nI wanted to change it but i don&#39;t know how, I&#39;m kinda confused.","title":"How to output as a whole","body":"<p>I have my code below;</p>\n<pre><code>import java.util.*;\n\npublic class Main{\n    \n    public static void main(String[] args){\n        Scanner scan = new Scanner(System.in);\n        \n       int first = scan.nextInt();\n        for(int i = 1; i &lt;= first; i++){\n            \n            String max = scan.next();\n            \n            \n            boolean check = false;\n            boolean f = false;\n            \n            for(int x = 0; x &lt; max.length(); x++){\n                if(Character.isLetter(max.charAt(x))){\n                    if(!check){\n                        check = true;\n                    }\n            }\n            else if(Character.isDigit(max.charAt(x))){\n              int second = (int)max.charAt(x);\n                if(!check || second%2 == 0){\n                    f = true;\n                    break;\n                }\n            }\n            else if(max.charAt(x) == '#' || max.charAt(x) == '_'){\n                if(!check){\n                check = true;\n            }\n        }\n        else if(Character.isDigit(max.charAt(x))){\n            int second = (int)max.charAt(x);\n             if(!check || second%2 == 0){\n                 f = true;\n                 break;\n             }\n        }\n        else if(max.charAt(x) == '#' ||max.charAt(x) == '_'){\n            if(!check){\n                check = true;\n            }\n        }\n        else{\n            f = true;\n            break;\n        }\n    }\n    \n    if(f){\n        System.out.println(&quot;Case #&quot; + i + &quot;: Not Valid&quot;);\n    }\n    else{\n        System.out.println(&quot;Case #&quot; + i + &quot;: Valid&quot;);\n    }\n}\n}\n}\n</code></pre>\n<p>it is working just fine, but I wanted it to output like this</p>\n<p>SAMPLE INPUT</p>\n<p>1</p>\n<p>Hi</p>\n<p>123hi</p>\n<p>yes_sir</p>\n<p>SAMPLE OUTPUT</p>\n<p>Case #1: VALID</p>\n<p>Case #2: INVALID</p>\n<p>Case #3: VALID</p>\n<p>not like this</p>\n<p>INPUT</p>\n<p>3</p>\n<p>Valid</p>\n<p>Case #1: VALID</p>\n<p>12Price</p>\n<p>Case #2: INVALID</p>\n<p>item_price</p>\n<p>Case #3: VALID</p>\n<p>I wanted it to output as a whole not one by one,\nI wanted to change it but i don't know how, I'm kinda confused.</p>\n"},{"tags":["java","selenium","xpath"],"comments":[{"owner":{"account_id":9207703,"reputation":28723,"user_id":9444073,"display_name":"cruisepandey"},"score":0,"creation_date":1643520870,"post_id":70912104,"comment_id":125359763,"body_markdown":"I would assume `rowNumber` is an int type ?","body":"I would assume <code>rowNumber</code> is an int type ?"},{"owner":{"account_id":18742299,"reputation":3,"user_id":13665325,"display_name":"Shashwat Aryan"},"score":0,"creation_date":1643520970,"post_id":70912104,"comment_id":125359775,"body_markdown":"@cruisepandey Yes rowNumber is in int type","body":"@cruisepandey Yes rowNumber is in int type"}],"answers":[{"tags":[],"owner":{"account_id":9207703,"reputation":28723,"user_id":9444073,"display_name":"cruisepandey"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1643521517,"creation_date":1643521517,"answer_id":70912168,"question_id":70912104,"body_markdown":"Let&#39;s say you have `rowNumber` defined like this:\r\n\r\n    int rowNumber = 10;\r\n\r\nand if you directly use the rowNumber in the XPath like this:\r\n\r\n    driver.findElement(By.xpath(&quot;//table[@id=&#39;stock&#39;]/tbody/tr[rowNumber]/td[1]&quot;)).click();\r\n\r\nthe problem with this approach is, your xpath will look for `rowNumber` for tr tag. Just like see the `td[1]`. \r\n\r\nand `tr[rowNumber]` is invalid since the basic XPath expression is \r\n\r\n    //tagName[@attributeName=&#39;attributeValue&#39;]\r\n\r\nso in order to parse the variable, we have to use `&#39;&quot; +var_name+ &quot;&#39;`\r\n\r\n\r\nso something like this:\r\n\r\n    driver.findElement(By.xpath(&quot;//table[@id=&#39;stock&#39;]/tbody/tr[&#39; &quot;+rowNumber+&quot; &#39;]/td[1]&quot;)).click();\r\n\r\n\r\nshould work","title":"Can I directly add variable to xpath value in selenium?","body":"<p>Let's say you have <code>rowNumber</code> defined like this:</p>\n<pre><code>int rowNumber = 10;\n</code></pre>\n<p>and if you directly use the rowNumber in the XPath like this:</p>\n<pre><code>driver.findElement(By.xpath(&quot;//table[@id='stock']/tbody/tr[rowNumber]/td[1]&quot;)).click();\n</code></pre>\n<p>the problem with this approach is, your xpath will look for <code>rowNumber</code> for tr tag. Just like see the <code>td[1]</code>.</p>\n<p>and <code>tr[rowNumber]</code> is invalid since the basic XPath expression is</p>\n<pre><code>//tagName[@attributeName='attributeValue']\n</code></pre>\n<p>so in order to parse the variable, we have to use <code>'&quot; +var_name+ &quot;'</code></p>\n<p>so something like this:</p>\n<pre><code>driver.findElement(By.xpath(&quot;//table[@id='stock']/tbody/tr[' &quot;+rowNumber+&quot; ']/td[1]&quot;)).click();\n</code></pre>\n<p>should work</p>\n"}],"owner":{"account_id":18742299,"reputation":3,"user_id":13665325,"display_name":"Shashwat Aryan"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":781,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1643521517,"creation_date":1643520708,"question_id":70912104,"body_markdown":"From a table I have founded the rowNumber to use it in xpath(inside tr) expression below, dynamically .\r\nBut when I am trying to use just the rowNumber without + operator and double quotes(i.e. tr[rowNumber]), it is showing an error. rowNumber is in int, then why is it necessary to add double quotes and + operator and why cannot we just write the variable name inside tr .\r\n\r\nThis is the code where error is seen\r\n\r\n    driver.findElement(By.xpath(&quot;//table[@id=&#39;stock&#39;]/tbody/tr[rowNumber]/td[1]&quot;)).click();\r\n\r\nThis is the correct code\r\n\r\n    driver.findElement(By.xpath(&quot;//table[@id=&#39;stock&#39;]/tbody/tr[&quot;+rowNumber+&quot;]/td[1]&quot;)).click();","title":"Can I directly add variable to xpath value in selenium?","body":"<p>From a table I have founded the rowNumber to use it in xpath(inside tr) expression below, dynamically .\nBut when I am trying to use just the rowNumber without + operator and double quotes(i.e. tr[rowNumber]), it is showing an error. rowNumber is in int, then why is it necessary to add double quotes and + operator and why cannot we just write the variable name inside tr .</p>\n<p>This is the code where error is seen</p>\n<pre><code>driver.findElement(By.xpath(&quot;//table[@id='stock']/tbody/tr[rowNumber]/td[1]&quot;)).click();\n</code></pre>\n<p>This is the correct code</p>\n<pre><code>driver.findElement(By.xpath(&quot;//table[@id='stock']/tbody/tr[&quot;+rowNumber+&quot;]/td[1]&quot;)).click();\n</code></pre>\n"},{"tags":["java","angular","spring-boot","angular13"],"comments":[{"owner":{"account_id":2654026,"reputation":4819,"user_id":2295103,"display_name":"MikeOne"},"score":0,"creation_date":1643490649,"post_id":70909637,"comment_id":125355631,"body_markdown":"What does httpOptions look like?","body":"What does httpOptions look like?"},{"owner":{"account_id":20798423,"reputation":436,"user_id":15275012,"display_name":"Bogdan Onyshenko"},"score":0,"creation_date":1643491429,"post_id":70909637,"comment_id":125355787,"body_markdown":"@MikeOne Here they are...","body":"@MikeOne Here they are..."},{"owner":{"account_id":2654026,"reputation":4819,"user_id":2295103,"display_name":"MikeOne"},"score":0,"creation_date":1643491575,"post_id":70909637,"comment_id":125355820,"body_markdown":"Thanks, but I mean the Angular httpOptions you’re setting in your post? return this.http.post(AUTH_API + &#39;login&#39;, {\n      username,\n      password\n\n    }, httpOptions)","body":"Thanks, but I mean the Angular httpOptions you’re setting in your post? return this.http.post(AUTH_API + &#39;login&#39;, {       username,       password      }, httpOptions)"},{"owner":{"account_id":20798423,"reputation":436,"user_id":15275012,"display_name":"Bogdan Onyshenko"},"score":0,"creation_date":1643491785,"post_id":70909637,"comment_id":125355865,"body_markdown":"@MikeOne Got it.","body":"@MikeOne Got it."},{"owner":{"account_id":2654026,"reputation":4819,"user_id":2295103,"display_name":"MikeOne"},"score":1,"creation_date":1643493783,"post_id":70909637,"comment_id":125356260,"body_markdown":"Check! So you’ll have to add ‘observe: response’ as an option there. See https://stackoverflow.com/questions/48184107/read-response-headers-from-api-response-angular-5-typescript","body":"Check! So you’ll have to add ‘observe: response’ as an option there. See <a href=\"https://stackoverflow.com/questions/48184107/read-response-headers-from-api-response-angular-5-typescript\" title=\"read response headers from api response angular 5 typescript\">stackoverflow.com/questions/48184107/&hellip;</a>"},{"owner":{"account_id":1484420,"reputation":1237,"user_id":3423750,"accept_rate":76,"display_name":"Phalgun"},"score":0,"creation_date":1643493821,"post_id":70909637,"comment_id":125356272,"body_markdown":"What is the response do you see in Chrome network tab for the login request sent from Angular?","body":"What is the response do you see in Chrome network tab for the login request sent from Angular?"},{"owner":{"account_id":20798423,"reputation":436,"user_id":15275012,"display_name":"Bogdan Onyshenko"},"score":0,"creation_date":1643494422,"post_id":70909637,"comment_id":125356390,"body_markdown":"@Phalgun I get an empty body with following headers as in a question update.","body":"@Phalgun I get an empty body with following headers as in a question update."},{"owner":{"account_id":1484420,"reputation":1237,"user_id":3423750,"accept_rate":76,"display_name":"Phalgun"},"score":1,"creation_date":1643494617,"post_id":70909637,"comment_id":125356426,"body_markdown":"As @MikeOne mentioned, you would need to add `{ observe: &#39;response&#39; }` to the  HTTP request. Check https://angular.io/guide/http#reading-the-full-response","body":"As @MikeOne mentioned, you would need to add <code>{ observe: &#39;response&#39; }</code> to the  HTTP request. Check <a href=\"https://angular.io/guide/http#reading-the-full-response\" rel=\"nofollow noreferrer\">angular.io/guide/http#reading-the-full-response</a>"}],"answers":[{"tags":[],"owner":{"account_id":339628,"reputation":1356,"user_id":669210,"accept_rate":65,"display_name":"Kevin Glier"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1643495354,"creation_date":1643494550,"answer_id":70910201,"question_id":70909637,"body_markdown":"You have to set the part that needs to be observed within the options:\r\n\r\n    const httpOptions = {\r\n        headers: new HttpHeaders({ &#39;Content-Type&#39;: &#39;application/json&#39; }),\r\n        observe: &#39;response&#39;\r\n    };\r\n    return this.http.post(AUTH_API + &#39;login&#39;, {\r\n        username,\r\n        password\r\n    }, httpOptions);\r\n\r\nThat will give you the whole response so that your data parameter within the subscription callback will contain `headers` and `body`.","title":"Read whole response including headers with Angular HttpClient","body":"<p>You have to set the part that needs to be observed within the options:</p>\n<pre><code>const httpOptions = {\n    headers: new HttpHeaders({ 'Content-Type': 'application/json' }),\n    observe: 'response'\n};\nreturn this.http.post(AUTH_API + 'login', {\n    username,\n    password\n}, httpOptions);\n</code></pre>\n<p>That will give you the whole response so that your data parameter within the subscription callback will contain <code>headers</code> and <code>body</code>.</p>\n"}],"owner":{"account_id":20798423,"reputation":436,"user_id":15275012,"display_name":"Bogdan Onyshenko"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3444,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70910201,"answer_count":1,"score":0,"last_activity_date":1643519930,"creation_date":1643489625,"question_id":70909637,"body_markdown":"I am trying to implement a token based authentication with spring boot and angular. The authentication token is exposed to HTTP response headers with a same name token. In angular I have a following request to my api in my service file:\r\n\r\n    login(username: string, password: string): Observable&lt;any&gt; {\r\n    \r\n        return this.http.post(AUTH_API + &#39;login&#39;, {\r\n          username,\r\n          password\r\n    \r\n        }, httpOptions);\r\n      }\r\nAnd a following component ts method:\r\n\r\n \r\n\r\n    onSubmit(): void {\r\n        const { username, password } = this.form;\r\n         this.authService.login(username, password).subscribe({\r\n          next: data =&gt; {\r\n           console.log(data.headers.get(&#39;token&#39;));\r\n            //this.tokenStorage.saveToken(data.accessToken);\r\n    \r\n            this.tokenStorage.saveUser(data);\r\n    \r\n            this.isLoginFailed = false;\r\n            this.isLoggedIn = true;\r\n            this.roles = this.tokenStorage.getUser().roles;\r\n    \r\n            this.reloadPage();\r\n          },\r\n    \r\n    \r\n          error: err =&gt; {\r\n         //  console.log( this.tokenStorage.getUser().roles);\r\n           console.log(&quot;ERR&quot;);\r\n            this.errorMessage = err.error.message;\r\n            this.isLoginFailed = true;\r\n          }\r\n        });\r\n    \r\n      }\r\n\r\nWhen I try to show the token header in console I am getting the following error:\r\nTypeError: Cannot read properties of null (reading &#39;headers&#39;)\r\nHere is my cors configuration from spring boot in security config class:\r\n\r\n     CorsConfigurationSource corsConfigurationSource() {\r\n    \t        final UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();\r\n    \t\t   \r\n    \t        source.registerCorsConfiguration(&quot;/**&quot;, new CorsConfiguration().applyPermitDefaultValues());\r\n    \t       // source.registerCorsConfiguration(&quot;/**&quot;, new CorsConfiguration().applyPermitDefaultValues());\r\n    \t        CorsConfiguration conf=   new CorsConfiguration().applyPermitDefaultValues();\r\n    \t        conf.setExposedHeaders(Arrays.asList(&quot;token&quot;));\r\n    \t         source.registerCorsConfiguration(&quot;/**&quot;, conf);\r\n    \t\t        \r\n    \t        return source;\r\n    \t    \r\nThe token header is visible in a postman or a chrome consol, but not in angular front end. What am I missing?\r\n**Http options**\r\n\r\n \r\n\r\n    protected void configure(HttpSecurity http) throws Exception {\r\n    \t        http.cors().and().csrf().disable().authorizeRequests()\r\n    \t                .antMatchers(HttpMethod.POST, SIGN_UP_URL).permitAll()\r\n    \t                .anyRequest().authenticated()\r\n    \t                .and()\r\n    \t                .addFilter(new AuthenticationFilter(authenticationManager()))\r\n    \t                .addFilter(new AuthorizationFilter(authenticationManager()))\r\n    \t                .sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS);\r\n    \t    }\r\n\r\n**Angular http options**\r\n\r\n    const httpOptions = {\r\n      headers: new HttpHeaders({ &#39;Content-Type&#39;: &#39;application/json&#39; })\r\n    };\r\n\r\n**Headers**\r\n\r\n    Request URL: http://localhost:8080/login\r\n    Request Method: POST\r\n    Status Code: 200 \r\n    Remote Address: [::1]:8080\r\n    Referrer Policy: strict-origin-when-cross-origin\r\n    Access-Control-Allow-Origin: *\r\n    Access-Control-Expose-Headers: token\r\n    Cache-Control: no-cache, no-store, max-age=0, must-revalidate\r\n    Connection: keep-alive\r\n    Content-Length: 0\r\n    Date: Sat, 29 Jan 2022 22:06:39 GMT\r\n    Expires: 0\r\n    Keep-Alive: timeout=60\r\n    Pragma: no-cache\r\n    token: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJ0ZXN0MTAiLCJleHAiOjE2NDM1MDU5OTl9.xtZxAU-TbpUmWFm_CuKS7iCHu-FiBs332cCVlxca6AwY4XOz-K7GJ4yB8PLLjk1JuXcgs1sbcVHeBto7iW7rpA\r\n    Vary: Origin\r\n    Vary: Access-Control-Request-Method\r\n    Vary: Access-Control-Request-Headers\r\n    X-Content-Type-Options: nosniff\r\n    X-Frame-Options: DENY\r\n    X-XSS-Protection: 1; mode=block\r\n    Accept: application/json, text/plain, */*\r\n    Accept-Encoding: gzip, deflate, br\r\n    Accept-Language: ru-RU,ru;q=0.9,en-US;q=0.8,en;q=0.7\r\n    Connection: keep-alive\r\n    Content-Length: 41\r\n    Content-Type: application/json\r\n    Host: localhost:8080\r\n    Origin: http://localhost:8081\r\n    Referer: http://localhost:8081/\r\n    sec-ch-ua: &quot; Not;A Brand&quot;;v=&quot;99&quot;, &quot;Google Chrome&quot;;v=&quot;97&quot;, &quot;Chromium&quot;;v=&quot;97&quot;\r\n    sec-ch-ua-mobile: ?0\r\n    sec-ch-ua-platform: &quot;Windows&quot;\r\n    Sec-Fetch-Dest: empty\r\n    Sec-Fetch-Mode: cors\r\n    Sec-Fetch-Site: same-site\r\n    User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/97.0.4692.99 Safari/537.36","title":"Read whole response including headers with Angular HttpClient","body":"<p>I am trying to implement a token based authentication with spring boot and angular. The authentication token is exposed to HTTP response headers with a same name token. In angular I have a following request to my api in my service file:</p>\n<pre><code>login(username: string, password: string): Observable&lt;any&gt; {\n\n    return this.http.post(AUTH_API + 'login', {\n      username,\n      password\n\n    }, httpOptions);\n  }\n</code></pre>\n<p>And a following component ts method:</p>\n<pre><code>onSubmit(): void {\n    const { username, password } = this.form;\n     this.authService.login(username, password).subscribe({\n      next: data =&gt; {\n       console.log(data.headers.get('token'));\n        //this.tokenStorage.saveToken(data.accessToken);\n\n        this.tokenStorage.saveUser(data);\n\n        this.isLoginFailed = false;\n        this.isLoggedIn = true;\n        this.roles = this.tokenStorage.getUser().roles;\n\n        this.reloadPage();\n      },\n\n\n      error: err =&gt; {\n     //  console.log( this.tokenStorage.getUser().roles);\n       console.log(&quot;ERR&quot;);\n        this.errorMessage = err.error.message;\n        this.isLoginFailed = true;\n      }\n    });\n\n  }\n</code></pre>\n<p>When I try to show the token header in console I am getting the following error:\nTypeError: Cannot read properties of null (reading 'headers')\nHere is my cors configuration from spring boot in security config class:</p>\n<pre><code> CorsConfigurationSource corsConfigurationSource() {\n            final UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();\n           \n            source.registerCorsConfiguration(&quot;/**&quot;, new CorsConfiguration().applyPermitDefaultValues());\n           // source.registerCorsConfiguration(&quot;/**&quot;, new CorsConfiguration().applyPermitDefaultValues());\n            CorsConfiguration conf=   new CorsConfiguration().applyPermitDefaultValues();\n            conf.setExposedHeaders(Arrays.asList(&quot;token&quot;));\n             source.registerCorsConfiguration(&quot;/**&quot;, conf);\n                \n            return source;\n        \n</code></pre>\n<p>The token header is visible in a postman or a chrome consol, but not in angular front end. What am I missing?\n<strong>Http options</strong></p>\n<pre><code>protected void configure(HttpSecurity http) throws Exception {\n            http.cors().and().csrf().disable().authorizeRequests()\n                    .antMatchers(HttpMethod.POST, SIGN_UP_URL).permitAll()\n                    .anyRequest().authenticated()\n                    .and()\n                    .addFilter(new AuthenticationFilter(authenticationManager()))\n                    .addFilter(new AuthorizationFilter(authenticationManager()))\n                    .sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS);\n        }\n</code></pre>\n<p><strong>Angular http options</strong></p>\n<pre><code>const httpOptions = {\n  headers: new HttpHeaders({ 'Content-Type': 'application/json' })\n};\n</code></pre>\n<p><strong>Headers</strong></p>\n<pre><code>Request URL: http://localhost:8080/login\nRequest Method: POST\nStatus Code: 200 \nRemote Address: [::1]:8080\nReferrer Policy: strict-origin-when-cross-origin\nAccess-Control-Allow-Origin: *\nAccess-Control-Expose-Headers: token\nCache-Control: no-cache, no-store, max-age=0, must-revalidate\nConnection: keep-alive\nContent-Length: 0\nDate: Sat, 29 Jan 2022 22:06:39 GMT\nExpires: 0\nKeep-Alive: timeout=60\nPragma: no-cache\ntoken: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJ0ZXN0MTAiLCJleHAiOjE2NDM1MDU5OTl9.xtZxAU-TbpUmWFm_CuKS7iCHu-FiBs332cCVlxca6AwY4XOz-K7GJ4yB8PLLjk1JuXcgs1sbcVHeBto7iW7rpA\nVary: Origin\nVary: Access-Control-Request-Method\nVary: Access-Control-Request-Headers\nX-Content-Type-Options: nosniff\nX-Frame-Options: DENY\nX-XSS-Protection: 1; mode=block\nAccept: application/json, text/plain, */*\nAccept-Encoding: gzip, deflate, br\nAccept-Language: ru-RU,ru;q=0.9,en-US;q=0.8,en;q=0.7\nConnection: keep-alive\nContent-Length: 41\nContent-Type: application/json\nHost: localhost:8080\nOrigin: http://localhost:8081\nReferer: http://localhost:8081/\nsec-ch-ua: &quot; Not;A Brand&quot;;v=&quot;99&quot;, &quot;Google Chrome&quot;;v=&quot;97&quot;, &quot;Chromium&quot;;v=&quot;97&quot;\nsec-ch-ua-mobile: ?0\nsec-ch-ua-platform: &quot;Windows&quot;\nSec-Fetch-Dest: empty\nSec-Fetch-Mode: cors\nSec-Fetch-Site: same-site\nUser-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/97.0.4692.99 Safari/537.36\n</code></pre>\n"},{"tags":["java","algorithm"],"comments":[{"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"score":2,"creation_date":1643167427,"post_id":70858304,"comment_id":125266198,"body_markdown":"I don&#39;t understand what you mean by &quot;longest duration with highest lift&quot;.  If you can find the words to express this more clearly, you may find yourself working out the logic at the same time.","body":"I don&#39;t understand what you mean by &quot;longest duration with highest lift&quot;.  If you can find the words to express this more clearly, you may find yourself working out the logic at the same time."},{"owner":{"account_id":15159660,"reputation":1770,"user_id":10939204,"display_name":"Traian GEICU"},"score":0,"creation_date":1643167860,"post_id":70858304,"comment_id":125266265,"body_markdown":"Maybe first choose max_Lift and then max_Duration for that Lift. 20kg_MaxLift for 20  Days.(only 1 choice, but  MaxLift can have multiple choices-&gt;Duration and select max) If it is this then it&#39;s pretty simple to be implement.","body":"Maybe first choose max_Lift and then max_Duration for that Lift. 20kg_MaxLift for 20  Days.(only 1 choice, but  MaxLift can have multiple choices-&gt;Duration and select max) If it is this then it&#39;s pretty simple to be implement."},{"owner":{"account_id":23516184,"reputation":337,"user_id":17564051,"display_name":"Oxana Grey"},"score":1,"creation_date":1643167959,"post_id":70858304,"comment_id":125266281,"body_markdown":"@DawoodibnKareem, from which duration (start to end) person is lifting max weight ?","body":"@DawoodibnKareem, from which duration (start to end) person is lifting max weight ?"},{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1643168148,"post_id":70858304,"comment_id":125266311,"body_markdown":"Why do you say “15th march to 30th march” when the last row for the 15th says 30 days? That would mean middle of April.","body":"Why do you say “15th march to 30th march” when the last row for the 15th says 30 days? That would mean middle of April."},{"owner":{"account_id":23516184,"reputation":337,"user_id":17564051,"display_name":"Oxana Grey"},"score":0,"creation_date":1643168454,"post_id":70858304,"comment_id":125266363,"body_markdown":"@BasilBourque, I&#39;m just trying to give example. Person started lifting 5kg/day from 1st march for next 30days (meaning until 30th march). But he started one more routine to lift 3kg/day too from 15th march for next 30 days (meaning until 14th April). So 1st and 2nd routine are being overlapped from 15th march to 30th March, that&#39;s why he&#39;s lifting 5+3 = 8 kg / day. That&#39;s how the data is for a person","body":"@BasilBourque, I&#39;m just trying to give example. Person started lifting 5kg/day from 1st march for next 30days (meaning until 30th march). But he started one more routine to lift 3kg/day too from 15th march for next 30 days (meaning until 14th April). So 1st and 2nd routine are being overlapped from 15th march to 30th March, that&#39;s why he&#39;s lifting 5+3 = 8 kg / day. That&#39;s how the data is for a person"},{"owner":{"account_id":15159660,"reputation":1770,"user_id":10939204,"display_name":"Traian GEICU"},"score":0,"creation_date":1643168764,"post_id":70858304,"comment_id":125266417,"body_markdown":"As first post, first need to compute MaxLift and then select Max Days. (counting overlapping as you clarify). Say somehow with overlap for 10 session in 1 day the MaxLift is 100Kg then this is the answer, doesn&#39;t matter if in other day the agregate lift was 90, 80, etc.","body":"As first post, first need to compute MaxLift and then select Max Days. (counting overlapping as you clarify). Say somehow with overlap for 10 session in 1 day the MaxLift is 100Kg then this is the answer, doesn&#39;t matter if in other day the agregate lift was 90, 80, etc."},{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":1,"creation_date":1643170289,"post_id":70858304,"comment_id":125266621,"body_markdown":"Tip: Instead of more examples, focus on *definitions* and *business rules*.","body":"Tip: Instead of more examples, focus on <i>definitions</i> and <i>business rules</i>."},{"owner":{"account_id":15159660,"reputation":1770,"user_id":10939204,"display_name":"Traian GEICU"},"score":1,"creation_date":1643206835,"post_id":70858304,"comment_id":125277866,"body_markdown":"When writing a question with some data it&#39;s better also to specify the desired solution based on the data provided. In this case what response you need it ? (eg: response is 123 lift for 321 days) .As others mentioned it can be very vague without. Take a pencil and paper, it may help.","body":"When writing a question with some data it&#39;s better also to specify the desired solution based on the data provided. In this case what response you need it ? (eg: response is 123 lift for 321 days) .As others mentioned it can be very vague without. Take a pencil and paper, it may help."},{"owner":{"account_id":2882210,"reputation":1777,"user_id":2472827,"display_name":"Neil"},"score":0,"creation_date":1643217154,"post_id":70858304,"comment_id":125282732,"body_markdown":"Is the range of days finite? Such that you could easily represent every single possible day in an array? (If not, then there are interval trees to efficiently solve this problem.)","body":"Is the range of days finite? Such that you could easily represent every single possible day in an array? (If not, then there are interval trees to efficiently solve this problem.)"},{"owner":{"account_id":15159660,"reputation":1770,"user_id":10939204,"display_name":"Traian GEICU"},"score":0,"creation_date":1643218024,"post_id":70858304,"comment_id":125283095,"body_markdown":"@Neil, eventually &#39;range of days&#39; is finite, based on humans life-span. In OP scenarios maybe it&#39;s better to have his clarification.","body":"@Neil, eventually &#39;range of days&#39; is finite, based on humans life-span. In OP scenarios maybe it&#39;s better to have his clarification."},{"owner":{"account_id":2882210,"reputation":1777,"user_id":2472827,"display_name":"Neil"},"score":0,"creation_date":1643262137,"post_id":70858304,"comment_id":125294152,"body_markdown":"This is a similar problem to finding the closest surface in a 1D scene graph, for which an interval tree or segment tree might be appropriate?","body":"This is a similar problem to finding the closest surface in a 1D scene graph, for which an interval tree or segment tree might be appropriate?"}],"answers":[{"tags":[],"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1643170064,"creation_date":1643169331,"answer_id":70858508,"question_id":70858304,"body_markdown":"As this appears to be a schoolwork assignment I’ll be a little vague to let you work out the details. \r\n\r\nDefine [record](https://openjdk.java.net/jeps/395) class to represent your inputs. Add an extra member field beyond what you mentioned in Question: the possible end date. Calculate this by making a `LocalDate` objectof the start date, then call `plusDays` passing your `days` count to get the end date. \r\n\r\n    record LiftSpan ( int participantId, LocalDate start, int days, LocalDate end, int groupId, int code, int lift, String unitOfWeight ) {}\r\n\r\nDetermine the first and last date of the overall date range. You neglected to define precisely the last date in your Question, so I’ll have to leave that to you to determine. \r\n\r\nStart with the first date. Loop for each day in the overall range. For each day in that range, search the list of `LiftSpan` objects where the range contains that nth date. If there is only one object covering that date, continue looping. When you find more than one match, make a record from that first date to this date. Calculate elapsed days with `ChronoUnit.DAYS`.  Copy over the appropriate fields for weight and code. Then replace your tracking of that first date with this date. Continue onwards, day by day, accumulating more `LiftSpan` objects. Stop looping when moving past the overall date range. \r\n\r\nOptimizations are possible. If you sort the original set of objects, then you could compare their dates without going day by day. This alternative approach also eliminates needing to search the entire list repeatedly. But for a beginner programmer, the approach described first above would be more appropriate. \r\n","title":"get max time duration for max work done for single entity","body":"<p>As this appears to be a schoolwork assignment I’ll be a little vague to let you work out the details.</p>\n<p>Define <a href=\"https://openjdk.java.net/jeps/395\" rel=\"nofollow noreferrer\">record</a> class to represent your inputs. Add an extra member field beyond what you mentioned in Question: the possible end date. Calculate this by making a <code>LocalDate</code> objectof the start date, then call <code>plusDays</code> passing your <code>days</code> count to get the end date.</p>\n<pre><code>record LiftSpan ( int participantId, LocalDate start, int days, LocalDate end, int groupId, int code, int lift, String unitOfWeight ) {}\n</code></pre>\n<p>Determine the first and last date of the overall date range. You neglected to define precisely the last date in your Question, so I’ll have to leave that to you to determine.</p>\n<p>Start with the first date. Loop for each day in the overall range. For each day in that range, search the list of <code>LiftSpan</code> objects where the range contains that nth date. If there is only one object covering that date, continue looping. When you find more than one match, make a record from that first date to this date. Calculate elapsed days with <code>ChronoUnit.DAYS</code>.  Copy over the appropriate fields for weight and code. Then replace your tracking of that first date with this date. Continue onwards, day by day, accumulating more <code>LiftSpan</code> objects. Stop looping when moving past the overall date range.</p>\n<p>Optimizations are possible. If you sort the original set of objects, then you could compare their dates without going day by day. This alternative approach also eliminates needing to search the entire list repeatedly. But for a beginner programmer, the approach described first above would be more appropriate.</p>\n"},{"tags":[],"owner":{"account_id":15159660,"reputation":1770,"user_id":10939204,"display_name":"Traian GEICU"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1643216867,"creation_date":1643216451,"answer_id":70867373,"question_id":70858304,"body_markdown":"You could start in the following way.\r\n\r\nMainly you need to compute and store aggregate result somewhere, here used a `key-value` data structure. After aggregation, grab the result based on your criteria.\r\n\r\nIn this case, it is just a simple scenarios based on one person which do some lift schemas (2 schemas for some days). The result should be the day in which the lift is maximum. Latter just adjust based on your requirements.(with max. days for each persons, etc)\r\n\r\n    public class TestLift\r\n    {\r\n    \tstatic List&lt;Record&gt; list = new ArrayList&lt;&gt;();\r\n    \t//default sort by data\r\n    \tstatic Map&lt;Date, Double&gt; map = new TreeMap&lt;&gt;();\r\n    \tpublic static void main(String args[])\r\n    \t{\r\n    \t\trun();\r\n    \t}\r\n    \tpublic static void run()\r\n    \t{\r\n    \t\tlist.add(new Record(new GregorianCalendar(2022,0,10).getTime(),3,10));\r\n    \t\tlist.add(new Record(new GregorianCalendar(2022,0,12).getTime(),3,20));\r\n    \t\tfor(int i=0;i&lt;list.size();i++)\r\n    \t\t{\r\n    \t\t\t//till no. of days \r\n    \t\t\tfor(int j=0;j&lt;list.get(i).days;j++)\r\n    \t\t\t{\r\n    \t\t\t\tDate d=list.get(i).date;\r\n    \t\t\t\tCalendar c = new GregorianCalendar();\r\n    \t\t\t\tc.setTime(d);\r\n    \t\t\t\t//add extra days\r\n    \t\t\t    c.add(Calendar.DATE, j);\r\n    \t\t\t\td=c.getTime();\r\n    \t\t\t\t//System.out.println(i+&quot;:&quot;+j+&quot;=&quot;+d);\r\n    \t\t\t\tif(map.get(d)==null)\r\n    \t\t\t\t{\r\n    \t\t\t\t\tmap.put(d, list.get(i).lift);\r\n    \t\t\t\t}\r\n    \t\t\t\telse\r\n    \t\t\t\t{\r\n    \t\t\t\t\t//add extra\r\n    \t\t\t\t\tmap.put(d,map.get(d)+list.get(i).lift);\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\t\t//look over aggregate map and find max lift\r\n    \t\t\tfor(Date d:map.keySet())\r\n    \t\t\t{\r\n    \t\t\t\tSystem.out.println(map.get(d)+&quot; kg at :&quot;+d);\r\n    \t\t\t}\r\n    \t\t\tSystem.out.println(&quot;###after add new record###&quot;);\r\n    \t\t\t\r\n    \t\t}\r\n    \t\t\r\n    \t\tDate result = Collections.max(map.entrySet(), Map.Entry.comparingByValue()).getKey();\r\n    \t\tSystem.out.println(&quot;\\nresult=&quot;+map.get(result)+ &quot; kg at :&quot;+ result );\r\n    \t}\r\n    \r\n    \tstatic class Record\r\n    \t{\r\n    \t\tpublic Date date;\r\n    \t\tpublic int days;\r\n    \t\tpublic double lift;\r\n    \t\tpublic Record(Date date, int days, double lift)\r\n    \t\t{\r\n    \t\t\tthis.date=date;\r\n    \t\t\tthis.days = days;\r\n    \t\t\tthis.lift = lift;\r\n    \t\t}\r\n    \t} \t\r\n    }\r\n\r\nOutput\r\n\r\n    //computing aggregate step by step\r\n    10.0 kg at :Mon Jan 10 00:00:00 EET 2022\r\n    10.0 kg at :Tue Jan 11 00:00:00 EET 2022\r\n    10.0 kg at :Wed Jan 12 00:00:00 EET 2022\r\n    ###after add new record###\r\n    10.0 kg at :Mon Jan 10 00:00:00 EET 2022\r\n    10.0 kg at :Tue Jan 11 00:00:00 EET 2022\r\n    30.0 kg at :Wed Jan 12 00:00:00 EET 2022\r\n    20.0 kg at :Thu Jan 13 00:00:00 EET 2022\r\n    20.0 kg at :Fri Jan 14 00:00:00 EET 2022\r\n    ###after add new record###\r\n    \r\n    result=30.0 kg at :Wed Jan 12 00:00:00 EET 2022","title":"get max time duration for max work done for single entity","body":"<p>You could start in the following way.</p>\n<p>Mainly you need to compute and store aggregate result somewhere, here used a <code>key-value</code> data structure. After aggregation, grab the result based on your criteria.</p>\n<p>In this case, it is just a simple scenarios based on one person which do some lift schemas (2 schemas for some days). The result should be the day in which the lift is maximum. Latter just adjust based on your requirements.(with max. days for each persons, etc)</p>\n<pre><code>public class TestLift\n{\n    static List&lt;Record&gt; list = new ArrayList&lt;&gt;();\n    //default sort by data\n    static Map&lt;Date, Double&gt; map = new TreeMap&lt;&gt;();\n    public static void main(String args[])\n    {\n        run();\n    }\n    public static void run()\n    {\n        list.add(new Record(new GregorianCalendar(2022,0,10).getTime(),3,10));\n        list.add(new Record(new GregorianCalendar(2022,0,12).getTime(),3,20));\n        for(int i=0;i&lt;list.size();i++)\n        {\n            //till no. of days \n            for(int j=0;j&lt;list.get(i).days;j++)\n            {\n                Date d=list.get(i).date;\n                Calendar c = new GregorianCalendar();\n                c.setTime(d);\n                //add extra days\n                c.add(Calendar.DATE, j);\n                d=c.getTime();\n                //System.out.println(i+&quot;:&quot;+j+&quot;=&quot;+d);\n                if(map.get(d)==null)\n                {\n                    map.put(d, list.get(i).lift);\n                }\n                else\n                {\n                    //add extra\n                    map.put(d,map.get(d)+list.get(i).lift);\n                }\n            }\n            //look over aggregate map and find max lift\n            for(Date d:map.keySet())\n            {\n                System.out.println(map.get(d)+&quot; kg at :&quot;+d);\n            }\n            System.out.println(&quot;###after add new record###&quot;);\n            \n        }\n        \n        Date result = Collections.max(map.entrySet(), Map.Entry.comparingByValue()).getKey();\n        System.out.println(&quot;\\nresult=&quot;+map.get(result)+ &quot; kg at :&quot;+ result );\n    }\n\n    static class Record\n    {\n        public Date date;\n        public int days;\n        public double lift;\n        public Record(Date date, int days, double lift)\n        {\n            this.date=date;\n            this.days = days;\n            this.lift = lift;\n        }\n    }   \n}\n</code></pre>\n<p>Output</p>\n<pre><code>//computing aggregate step by step\n10.0 kg at :Mon Jan 10 00:00:00 EET 2022\n10.0 kg at :Tue Jan 11 00:00:00 EET 2022\n10.0 kg at :Wed Jan 12 00:00:00 EET 2022\n###after add new record###\n10.0 kg at :Mon Jan 10 00:00:00 EET 2022\n10.0 kg at :Tue Jan 11 00:00:00 EET 2022\n30.0 kg at :Wed Jan 12 00:00:00 EET 2022\n20.0 kg at :Thu Jan 13 00:00:00 EET 2022\n20.0 kg at :Fri Jan 14 00:00:00 EET 2022\n###after add new record###\n\nresult=30.0 kg at :Wed Jan 12 00:00:00 EET 2022\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2882210,"reputation":1777,"user_id":2472827,"display_name":"Neil"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1643519876,"creation_date":1643264890,"answer_id":70874241,"question_id":70858304,"body_markdown":"To calculate the maximum weight date range _per_ `ID`, every `ID` in the data is independent. However, in general, for one `ID`, one could have complex multiple overlapping segments with arbitrary length, (a [segment tree](https://en.wikipedia.org/wiki/Segment_tree).)\r\n\r\nOne solution would use a map from the `ID` to a minimum heap on `LocalDate` in which one pre-calculates the `Integer` change in weight for the two ends, `Map&lt;Integer, &lt;LocalDate, Integer&gt;PriorityQueue&gt;`. Each record adds two `&lt;LocalDate, Integer&gt;` to the heap, one positive weight, and the later one the opposite.\r\n\r\nWhen one has read all the records, for each `ID`, we can remap to calculate the date range for the maximum lift. If two date ranges are the same weight, the later one is chosen (slightly simpler.) We keep track of the current maximum weight, the date range of the current maximum, and current weight; say, for every unique `ID`, have `max`, `start`, `end`, `current`. While not empty, popping the heap results in `date`, `weight`:\r\n\r\n* If `weight &gt; 0`: if `weight + current &gt;= max` is exceeded, then `start = date`, `max = current + weight`.\r\n* If `weight &lt; 0`: if `weight == max` then `end = date`.\r\n* `current += weight`\r\n\r\nThis will resolve, I think, in `O(n log n)`.\r\n","title":"get max time duration for max work done for single entity","body":"<p>To calculate the maximum weight date range <em>per</em> <code>ID</code>, every <code>ID</code> in the data is independent. However, in general, for one <code>ID</code>, one could have complex multiple overlapping segments with arbitrary length, (a <a href=\"https://en.wikipedia.org/wiki/Segment_tree\" rel=\"nofollow noreferrer\">segment tree</a>.)</p>\n<p>One solution would use a map from the <code>ID</code> to a minimum heap on <code>LocalDate</code> in which one pre-calculates the <code>Integer</code> change in weight for the two ends, <code>Map&lt;Integer, &lt;LocalDate, Integer&gt;PriorityQueue&gt;</code>. Each record adds two <code>&lt;LocalDate, Integer&gt;</code> to the heap, one positive weight, and the later one the opposite.</p>\n<p>When one has read all the records, for each <code>ID</code>, we can remap to calculate the date range for the maximum lift. If two date ranges are the same weight, the later one is chosen (slightly simpler.) We keep track of the current maximum weight, the date range of the current maximum, and current weight; say, for every unique <code>ID</code>, have <code>max</code>, <code>start</code>, <code>end</code>, <code>current</code>. While not empty, popping the heap results in <code>date</code>, <code>weight</code>:</p>\n<ul>\n<li>If <code>weight &gt; 0</code>: if <code>weight + current &gt;= max</code> is exceeded, then <code>start = date</code>, <code>max = current + weight</code>.</li>\n<li>If <code>weight &lt; 0</code>: if <code>weight == max</code> then <code>end = date</code>.</li>\n<li><code>current += weight</code></li>\n</ul>\n<p>This will resolve, I think, in <code>O(n log n)</code>.</p>\n"}],"owner":{"account_id":23516184,"reputation":337,"user_id":17564051,"display_name":"Oxana Grey"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":163,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1643519876,"creation_date":1643167062,"question_id":70858304,"body_markdown":"here is my data, trying to solve below puzzle\r\n\r\n    #ID      Date            GroupId      Code        Days        Lift     wt\r\n    #100     03-01-2020      LM100        500          30           5      kg\r\n    #100     03-15-2020      LM100        500          30           3      kg\r\n    #100     04-10-2020      LM100        500          20           20     kg\r\n    #100     05-15-2020      LM100        500          30           5      kg\r\n\r\n\r\nwant to calculate the longest duration with highest lift for every ID in data.\r\n\r\nLets say in first record, it says, ID 100 started on 1st march to lift 5kg everyday for next 30 days. But on 15th march ID100 started to lift 3kg too for next 30 days. So from 15th march to 30th march ID 100 is lifting 8 kg every day. SO that&#39;s how data is connected.\r\n\r\n\r\nI&#39;m not able to think of any logic to write for this.\r\n\r\n\r\nCan anyone suggest any idea or logic for this ? \r\n\r\n\r\n    Update:\r\n\r\nMore definition on Data\r\n\r\nPerson started lifting 5kg/day from 1st march for next 30days (meaning until 30th march). But he started one more routine to lift 3kg/day too from 15th march for next 30 days (meaning until 14th April). So 1st and 2nd routine are being overlapped from 15th march to 30th March, that&#39;s why he&#39;s lifting 5+3 = 8 kg / day. That&#39;s how the data is for a person","title":"get max time duration for max work done for single entity","body":"<p>here is my data, trying to solve below puzzle</p>\n<pre><code>#ID      Date            GroupId      Code        Days        Lift     wt\n#100     03-01-2020      LM100        500          30           5      kg\n#100     03-15-2020      LM100        500          30           3      kg\n#100     04-10-2020      LM100        500          20           20     kg\n#100     05-15-2020      LM100        500          30           5      kg\n</code></pre>\n<p>want to calculate the longest duration with highest lift for every ID in data.</p>\n<p>Lets say in first record, it says, ID 100 started on 1st march to lift 5kg everyday for next 30 days. But on 15th march ID100 started to lift 3kg too for next 30 days. So from 15th march to 30th march ID 100 is lifting 8 kg every day. SO that's how data is connected.</p>\n<p>I'm not able to think of any logic to write for this.</p>\n<p>Can anyone suggest any idea or logic for this ?</p>\n<pre><code>Update:\n</code></pre>\n<p>More definition on Data</p>\n<p>Person started lifting 5kg/day from 1st march for next 30days (meaning until 30th march). But he started one more routine to lift 3kg/day too from 15th march for next 30 days (meaning until 14th April). So 1st and 2nd routine are being overlapped from 15th march to 30th March, that's why he's lifting 5+3 = 8 kg / day. That's how the data is for a person</p>\n"},{"tags":["java","authorization","microsoft-graph-sdks","microsoft-graph-api"],"comments":[{"owner":{"account_id":19892464,"reputation":11446,"user_id":14574199,"display_name":"Tiny Wang"},"score":1,"creation_date":1643594637,"post_id":70911976,"comment_id":125374428,"body_markdown":"It seems that all your user interaction are realized in your java backend app, it&#39;s not recommended. For the backend application, it should use [client-credential flow](https://learn.microsoft.com/en-us/graph/sdks/choose-authentication-providers?tabs=CS#client-credentials-provider) to do authentication for calling ms graph api.","body":"It seems that all your user interaction are realized in your java backend app, it&#39;s not recommended. For the backend application, it should use <a href=\"https://learn.microsoft.com/en-us/graph/sdks/choose-authentication-providers?tabs=CS#client-credentials-provider\" rel=\"nofollow noreferrer\">client-credential flow</a> to do authentication for calling ms graph api."},{"owner":{"account_id":4879616,"reputation":65,"user_id":3933784,"accept_rate":60,"display_name":"ashwin"},"score":0,"creation_date":1643603092,"post_id":70911976,"comment_id":125375480,"body_markdown":"Thanks for the response @TinyWang . But client-credential flow needs an admin consent , but my usecase is to get consent from the individual users and not on behalf of the organization as a whole.Is there any ways we can get only user level access rather than the organization admin level directly?","body":"Thanks for the response @TinyWang . But client-credential flow needs an admin consent , but my usecase is to get consent from the individual users and not on behalf of the organization as a whole.Is there any ways we can get only user level access rather than the organization admin level directly?"},{"owner":{"account_id":19892464,"reputation":11446,"user_id":14574199,"display_name":"Tiny Wang"},"score":0,"creation_date":1643607288,"post_id":70911976,"comment_id":125376081,"body_markdown":"Basically, we used MSAL in the frontend application to let user sign in and app can obtain access token/ refresh token, then using access token to call the graph api. I&#39;m not sure how you compose your frontend app, so pls refer to [this page](https://learn.microsoft.com/en-us/azure/active-directory/develop/sample-v2-code) and choose a sample to follow up.","body":"Basically, we used MSAL in the frontend application to let user sign in and app can obtain access token/ refresh token, then using access token to call the graph api. I&#39;m not sure how you compose your frontend app, so pls refer to <a href=\"https://learn.microsoft.com/en-us/azure/active-directory/develop/sample-v2-code\" rel=\"nofollow noreferrer\">this page</a> and choose a sample to follow up."},{"owner":{"account_id":19892464,"reputation":11446,"user_id":14574199,"display_name":"Tiny Wang"},"score":0,"creation_date":1643607410,"post_id":70911976,"comment_id":125376104,"body_markdown":"By the way, you&#39;re using ms graph api to get the input box content, so you can use graph client, you can also call the api by sending an http get request with an access token inside the request header. So when you got the access token, it means you can get the api.","body":"By the way, you&#39;re using ms graph api to get the input box content, so you can use graph client, you can also call the api by sending an http get request with an access token inside the request header. So when you got the access token, it means you can get the api."}],"owner":{"account_id":4879616,"reputation":65,"user_id":3933784,"accept_rate":60,"display_name":"ashwin"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1534,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1643518886,"creation_date":1643518886,"question_id":70911976,"body_markdown":"I am trying to build a client system which fetches the inbox of the user emails in outlook. The requirement is that the system should ask the user to login through Outlook once to authenticate and it should be able to fetch the emails and other actions enables via graph API like reply, forward etc there after without any login prompt. For this I tried using the MS Graph SDK and chose the authorization code flow for the same . I followed the following steps\r\n\r\n1) Requested an authorization code by using the link : https://login.microsoftonline.com/{tenant}/oauth2/v2.0/authorize?client_id=clientId&amp;response_type=code&amp;redirect_uri=http%3A%2%2Flocalhost%2Fmyapp%2F&amp;scope=https%3A%2F%2Fgraph.microsoft.com%2Fmail.read%20api%3A%2F%2F\r\n\r\n2) I have stored this authorization code to the db and used the following snippet for authorization.\r\n```\r\n    final AuthorizationCodeCredential authCodeCredential = new AuthorizationCodeCredentialBuilder()\r\n    .clientId(&quot;client id&quot;)\r\n    .clientSecret(&quot;client secret&quot;) \r\n    .authorizationCode(&quot;authcode from the db for that user&quot;)\r\n    .redirectUrl(&quot;http://localhost:8080/redirect/url&quot;)\r\n    .build();\r\n    \r\n    final List&lt;String&gt; scopes = new ArrayList&lt;String&gt;();\r\n    scopes.add(&quot;Mail.Send&quot;);\r\n    scopes.add(&quot;offline_access&quot;);\r\n    scopes.add(&quot;openid&quot;);\r\n    \r\n    final TokenCredentialAuthProvider tokenCredentialAuthProvider = new TokenCredentialAuthProvider(scopes, authCodeCredential);\t\r\n    GraphServiceClient graphClient = GraphServiceClient.builder().authenticationProvider( authProvider ).buildClient();\r\n    \r\n    MessageCollectionPage messages = graphClient.me()\r\n    .messages()\r\n    .buildRequest()\r\n    .get();\r\n```\r\n3) This works the first time the fetched authorization code is fetched by user interaction , but when the same code is reused to avoid user interactions it throws the following\r\n  \r\n**AADSTS54005: OAuth2 Authorization code was already redeemed, please retry with a new valid code or use an existing refresh token.**\r\n\r\nDoes this mean that to make this flow work I have to request my users to login everytime for a single API call via graph client. Is there any way in which we can use the access code got in the AuthorizationCodeCredential and use it with GraphServiceClient to access microsoft Graph APIs using the SDK . Will hugely appreciate any kind of help on this. thank you\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","title":"How to use MS GraphService client to use the access token for authentication","body":"<p>I am trying to build a client system which fetches the inbox of the user emails in outlook. The requirement is that the system should ask the user to login through Outlook once to authenticate and it should be able to fetch the emails and other actions enables via graph API like reply, forward etc there after without any login prompt. For this I tried using the MS Graph SDK and chose the authorization code flow for the same . I followed the following steps</p>\n<ol>\n<li><p>Requested an authorization code by using the link : <a href=\"https://login.microsoftonline.com/%7Btenant%7D/oauth2/v2.0/authorize?client_id=clientId&amp;response_type=code&amp;redirect_uri=http%3A%2%2Flocalhost%2Fmyapp%2F&amp;scope=https%3A%2F%2Fgraph.microsoft.com%2Fmail.read%20api%3A%2F%2F\" rel=\"nofollow noreferrer\">https://login.microsoftonline.com/{tenant}/oauth2/v2.0/authorize?client_id=clientId&amp;response_type=code&amp;redirect_uri=http%3A%2%2Flocalhost%2Fmyapp%2F&amp;scope=https%3A%2F%2Fgraph.microsoft.com%2Fmail.read%20api%3A%2F%2F</a></p>\n</li>\n<li><p>I have stored this authorization code to the db and used the following snippet for authorization.</p>\n</li>\n</ol>\n<pre><code>    final AuthorizationCodeCredential authCodeCredential = new AuthorizationCodeCredentialBuilder()\n    .clientId(&quot;client id&quot;)\n    .clientSecret(&quot;client secret&quot;) \n    .authorizationCode(&quot;authcode from the db for that user&quot;)\n    .redirectUrl(&quot;http://localhost:8080/redirect/url&quot;)\n    .build();\n    \n    final List&lt;String&gt; scopes = new ArrayList&lt;String&gt;();\n    scopes.add(&quot;Mail.Send&quot;);\n    scopes.add(&quot;offline_access&quot;);\n    scopes.add(&quot;openid&quot;);\n    \n    final TokenCredentialAuthProvider tokenCredentialAuthProvider = new TokenCredentialAuthProvider(scopes, authCodeCredential);    \n    GraphServiceClient graphClient = GraphServiceClient.builder().authenticationProvider( authProvider ).buildClient();\n    \n    MessageCollectionPage messages = graphClient.me()\n    .messages()\n    .buildRequest()\n    .get();\n</code></pre>\n<ol start=\"3\">\n<li>This works the first time the fetched authorization code is fetched by user interaction , but when the same code is reused to avoid user interactions it throws the following</li>\n</ol>\n<p><strong>AADSTS54005: OAuth2 Authorization code was already redeemed, please retry with a new valid code or use an existing refresh token.</strong></p>\n<p>Does this mean that to make this flow work I have to request my users to login everytime for a single API call via graph client. Is there any way in which we can use the access code got in the AuthorizationCodeCredential and use it with GraphServiceClient to access microsoft Graph APIs using the SDK . Will hugely appreciate any kind of help on this. thank you</p>\n"},{"tags":["java","javafx","javafx-8"],"comments":[{"owner":{"account_id":1180113,"reputation":152325,"user_id":1155209,"display_name":"jewelsea"},"score":1,"creation_date":1471898924,"post_id":39087876,"comment_id":65524726,"body_markdown":"ControlsFX used to have this feature ([see lightweight dialogs](http://fxexperience.com/controlsfx/features/dialogs/)).  However, recent builds of ControlsFX [dropped the lightweight dialog feature](http://stackoverflow.com/questions/26341152/controlsfx-dialogs-deprecated-for-what).  Instead, ControlsFX now uses only the dialogs implemented in the JavaFX core API, which are self-contained stages.  You might wish to review some [old branch source code of ControlsFX](https://bitbucket.org/controlsfx/controlsfx/branches/) to see how they achieved their original lightweight dialog implementation.","body":"ControlsFX used to have this feature (<a href=\"http://fxexperience.com/controlsfx/features/dialogs/\" rel=\"nofollow noreferrer\">see lightweight dialogs</a>).  However, recent builds of ControlsFX <a href=\"http://stackoverflow.com/questions/26341152/controlsfx-dialogs-deprecated-for-what\">dropped the lightweight dialog feature</a>.  Instead, ControlsFX now uses only the dialogs implemented in the JavaFX core API, which are self-contained stages.  You might wish to review some <a href=\"https://bitbucket.org/controlsfx/controlsfx/branches/\" rel=\"nofollow noreferrer\">old branch source code of ControlsFX</a> to see how they achieved their original lightweight dialog implementation."},{"owner":{"account_id":1180113,"reputation":152325,"user_id":1155209,"display_name":"jewelsea"},"score":0,"creation_date":1471899462,"post_id":39087876,"comment_id":65524976,"body_markdown":"ControlsFX [lightweight dialog source implementation](https://bitbucket.org/controlsfx/controlsfx/src/371bca0e905536ca6742d181fdade07258260659/controlsfx/src/main/java/org/controlsfx/dialog/LightweightDialog.java?at=8.0.6_20&amp;fileviewer=file-view-default) (now unsupported).","body":"ControlsFX <a href=\"https://bitbucket.org/controlsfx/controlsfx/src/371bca0e905536ca6742d181fdade07258260659/controlsfx/src/main/java/org/controlsfx/dialog/LightweightDialog.java?at=8.0.6_20&amp;fileviewer=file-view-default\" rel=\"nofollow noreferrer\">lightweight dialog source implementation</a> (now unsupported)."}],"answers":[{"tags":[],"owner":{"account_id":3240077,"reputation":2811,"user_id":2733333,"accept_rate":89,"display_name":"Tomas Bisciak"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1471921387,"creation_date":1471920941,"answer_id":39091607,"question_id":39087876,"body_markdown":"Its actually quite easy and without a need to use 3rd party library:\r\n\r\nEmbed your root container within **stackpane** and over the top put **anchor pane** , create dialog box control(container/containers+controls).\r\n\r\nTo demonstrate what i mean here is a small fxml file:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    \r\n    &lt;?import javafx.scene.control.*?&gt;\r\n    &lt;?import java.lang.*?&gt;\r\n    &lt;?import javafx.scene.layout.*?&gt;\r\n    \r\n    \r\n    &lt;StackPane xmlns=&quot;http://javafx.com/javafx/8.0.40&quot; xmlns:fx=&quot;http://javafx.com/fxml/1&quot;&gt;\r\n       &lt;children&gt;\r\n          &lt;BorderPane maxHeight=&quot;-Infinity&quot; maxWidth=&quot;-Infinity&quot; minHeight=&quot;-Infinity&quot; minWidth=&quot;-Infinity&quot; prefHeight=&quot;400.0&quot; prefWidth=&quot;600.0&quot; style=&quot;-fx-background-color: black;&quot; /&gt;\r\n          &lt;AnchorPane prefHeight=&quot;200.0&quot; prefWidth=&quot;363.0&quot;&gt;\r\n             &lt;children&gt;\r\n                &lt;BorderPane layoutX=&quot;84.0&quot; layoutY=&quot;123.0&quot; prefHeight=&quot;99.0&quot; prefWidth=&quot;227.0&quot; style=&quot;-fx-background-color: red;&quot;&gt;\r\n                   &lt;center&gt;\r\n                      &lt;Button mnemonicParsing=&quot;false&quot; text=&quot;Button&quot; BorderPane.alignment=&quot;CENTER&quot; /&gt;\r\n                   &lt;/center&gt;\r\n                &lt;/BorderPane&gt;\r\n             &lt;/children&gt;\r\n          &lt;/AnchorPane&gt;\r\n       &lt;/children&gt;\r\n    &lt;/StackPane&gt;\r\n\r\n\r\nLooks like :\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/E4sSH.png\r\n\r\n\r\nYou can make it moveable with properties,listener. It will require some work bud its doable.\r\n\r\nBud as jewelsea mentioned controlsfx has already what you need implemented, if i remember correctly they also provided controlfx samples jar where you can see sourcecode and all the included stuff in action, first take a look at that if anything in there fits your needs.Its really trivial to then implement it from that point on, i only had trouble in a past with one of theyr controls when i updated to new version of java.","title":"Custom dialog/popup within main window/stage with JavaFX","body":"<p>Its actually quite easy and without a need to use 3rd party library:</p>\n\n<p>Embed your root container within <strong>stackpane</strong> and over the top put <strong>anchor pane</strong> , create dialog box control(container/containers+controls).</p>\n\n<p>To demonstrate what i mean here is a small fxml file:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n\n&lt;?import javafx.scene.control.*?&gt;\n&lt;?import java.lang.*?&gt;\n&lt;?import javafx.scene.layout.*?&gt;\n\n\n&lt;StackPane xmlns=\"http://javafx.com/javafx/8.0.40\" xmlns:fx=\"http://javafx.com/fxml/1\"&gt;\n   &lt;children&gt;\n      &lt;BorderPane maxHeight=\"-Infinity\" maxWidth=\"-Infinity\" minHeight=\"-Infinity\" minWidth=\"-Infinity\" prefHeight=\"400.0\" prefWidth=\"600.0\" style=\"-fx-background-color: black;\" /&gt;\n      &lt;AnchorPane prefHeight=\"200.0\" prefWidth=\"363.0\"&gt;\n         &lt;children&gt;\n            &lt;BorderPane layoutX=\"84.0\" layoutY=\"123.0\" prefHeight=\"99.0\" prefWidth=\"227.0\" style=\"-fx-background-color: red;\"&gt;\n               &lt;center&gt;\n                  &lt;Button mnemonicParsing=\"false\" text=\"Button\" BorderPane.alignment=\"CENTER\" /&gt;\n               &lt;/center&gt;\n            &lt;/BorderPane&gt;\n         &lt;/children&gt;\n      &lt;/AnchorPane&gt;\n   &lt;/children&gt;\n&lt;/StackPane&gt;\n</code></pre>\n\n<p>Looks like :\n<a href=\"https://i.stack.imgur.com/E4sSH.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/E4sSH.png\" alt=\"enter image description here\"></a></p>\n\n<p>You can make it moveable with properties,listener. It will require some work bud its doable.</p>\n\n<p>Bud as jewelsea mentioned controlsfx has already what you need implemented, if i remember correctly they also provided controlfx samples jar where you can see sourcecode and all the included stuff in action, first take a look at that if anything in there fits your needs.Its really trivial to then implement it from that point on, i only had trouble in a past with one of theyr controls when i updated to new version of java.</p>\n"},{"tags":[],"owner":{"account_id":7390199,"reputation":559,"user_id":5623845,"accept_rate":58,"display_name":"Mai Hữu Lợi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1577027170,"creation_date":1577027170,"answer_id":59445391,"question_id":39087876,"body_markdown":"You can listen to the X and Y property. Here is how I update the position of dialog base on the root stage position.\r\n\r\n\r\n   \r\n    public static Stage getStage() {\r\n        return StageHelper.getStages().get(0);\r\n    }\r\n\r\n    public static void stayInRootStage(Dialog dialog) {\r\n   \r\n        Window window = dialogPane.getScene().getWindow();\r\n        Stage mainStage = getStage();\r\n        \r\n        ChangeListener&lt;Number&gt; yListener = new ChangeListener&lt;Number&gt;() {\r\n            @Override\r\n            public void changed(ObservableValue&lt;? extends Number&gt; observable, Number oldValue, Number newValue) {\r\n                double newY = mainStage.getY() + mainStage.getHeight() / 2 - dialog.getHeight() / 2;\r\n                dialog.setY(newY);\r\n\r\n            }\r\n        };\r\n\r\n        ChangeListener&lt;Number&gt; xListener = new ChangeListener&lt;Number&gt;() {\r\n            @Override\r\n            public void changed(ObservableValue&lt;? extends Number&gt; observable, Number oldValue, Number newValue) {\r\n                double newX = mainStage.getX() + mainStage.getWidth() / 2 - dialog.getWidth() / 2;\r\n                dialog.setX(newX);\r\n            }\r\n\r\n        };\r\n\r\n        mainStage.getScene().getWindow().yProperty().addListener(yListener);\r\n\r\n        mainStage.getScene().getWindow().xProperty().addListener(xListener);\r\n    }","title":"Custom dialog/popup within main window/stage with JavaFX","body":"<p>You can listen to the X and Y property. Here is how I update the position of dialog base on the root stage position.</p>\n\n<pre><code>public static Stage getStage() {\n    return StageHelper.getStages().get(0);\n}\n\npublic static void stayInRootStage(Dialog dialog) {\n\n    Window window = dialogPane.getScene().getWindow();\n    Stage mainStage = getStage();\n\n    ChangeListener&lt;Number&gt; yListener = new ChangeListener&lt;Number&gt;() {\n        @Override\n        public void changed(ObservableValue&lt;? extends Number&gt; observable, Number oldValue, Number newValue) {\n            double newY = mainStage.getY() + mainStage.getHeight() / 2 - dialog.getHeight() / 2;\n            dialog.setY(newY);\n\n        }\n    };\n\n    ChangeListener&lt;Number&gt; xListener = new ChangeListener&lt;Number&gt;() {\n        @Override\n        public void changed(ObservableValue&lt;? extends Number&gt; observable, Number oldValue, Number newValue) {\n            double newX = mainStage.getX() + mainStage.getWidth() / 2 - dialog.getWidth() / 2;\n            dialog.setX(newX);\n        }\n\n    };\n\n    mainStage.getScene().getWindow().yProperty().addListener(yListener);\n\n    mainStage.getScene().getWindow().xProperty().addListener(xListener);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":21378728,"reputation":1,"user_id":15745004,"display_name":"Victor Pacheco"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1643518405,"creation_date":1643506912,"answer_id":70911184,"question_id":39087876,"body_markdown":"    Dialog dialog = new Dialog();\r\n    \r\n    dialog.initStyle(StageStyle.UTILITY);","title":"Custom dialog/popup within main window/stage with JavaFX","body":"<pre><code>Dialog dialog = new Dialog();\n\ndialog.initStyle(StageStyle.UTILITY);\n</code></pre>\n"}],"owner":{"account_id":1065539,"reputation":303,"user_id":2691118,"accept_rate":60,"display_name":"User"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2097,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":39091607,"answer_count":3,"score":0,"last_activity_date":1643518405,"creation_date":1471896490,"question_id":39087876,"body_markdown":"Is it possible to create a custom dialog in JavaFX which isn&#39;t an OS-level window?  (It would be a popup window displayed over top everything else on the main stage, which can&#39;t leave the application window.)  i.e. An Adobe/Apache Flex style dialog, for anyone familiar.","title":"Custom dialog/popup within main window/stage with JavaFX","body":"<p>Is it possible to create a custom dialog in JavaFX which isn't an OS-level window?  (It would be a popup window displayed over top everything else on the main stage, which can't leave the application window.)  i.e. An Adobe/Apache Flex style dialog, for anyone familiar.</p>\n"},{"tags":["java","selenium","testng"],"comments":[{"owner":{"account_id":12360572,"reputation":1730,"user_id":9014957,"accept_rate":17,"display_name":"pburgr"},"score":0,"creation_date":1640681812,"post_id":70498547,"comment_id":124631004,"body_markdown":"`new Select(WebElement element)` does not work on every dropdown. Please share url or source code sample.","body":"<code>new Select(WebElement element)</code> does not work on every dropdown. Please share url or source code sample."},{"owner":{"account_id":9003457,"reputation":19,"user_id":6711155,"display_name":"MashaEdu Abdiyev"},"score":0,"creation_date":1641174912,"post_id":70498547,"comment_id":124732865,"body_markdown":"new Select(WebElement element) works fine, All I need is how can I verify all the values of Dropdown one by one.","body":"new Select(WebElement element) works fine, All I need is how can I verify all the values of Dropdown one by one."},{"owner":{"account_id":12360572,"reputation":1730,"user_id":9014957,"accept_rate":17,"display_name":"pburgr"},"score":1,"creation_date":1641193646,"post_id":70498547,"comment_id":124735321,"body_markdown":"See this https://stackoverflow.com/questions/70259524/in-selenium-need-to-validate-search-result/70261987#70261987. Instead of testing on `contains` you&#39;ll test on `equals` or `equalsIgnoreCase`.","body":"See this <a href=\"https://stackoverflow.com/questions/70259524/in-selenium-need-to-validate-search-result/70261987#70261987\" title=\"in selenium need to validate search result\">stackoverflow.com/questions/70259524/&hellip;</a>. Instead of testing on <code>contains</code> you&#39;ll test on <code>equals</code> or <code>equalsIgnoreCase</code>."}],"owner":{"account_id":9003457,"reputation":19,"user_id":6711155,"display_name":"MashaEdu Abdiyev"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":126,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1643517671,"creation_date":1640625796,"question_id":70498547,"body_markdown":"there is a table with numbers and some columns contain decimal numbers\r\nfor example 12.234, 45.094. \r\nhow can I verify if those numbers are three-digit decimal numbers?","title":"How to verify if Number is three digit Decimal in a Table in Selenium?","body":"<p>there is a table with numbers and some columns contain decimal numbers\nfor example 12.234, 45.094.\nhow can I verify if those numbers are three-digit decimal numbers?</p>\n"},{"tags":["java","android","azure","rest","authentication"],"answers":[{"tags":[],"owner":{"account_id":63568,"reputation":129737,"user_id":188096,"accept_rate":93,"display_name":"Gaurav Mantri"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1643516995,"creation_date":1643516995,"answer_id":70911845,"question_id":70910963,"body_markdown":"If you are using a SAS token, you really do not have to do any of the things you are doing because SAS token has all the necessary authorization information. All you have to do is use the SAS URL (blob endpoint + SAS token) to create the connection and you should be able to download the blob.\r\n\r\nSomething like:\r\n\r\n```\r\nURL url = new URL(src);//src would be something like https://account.blob.core.windows.net/container/blob.bmp?sastoken\r\nHttpURLConnection connection = (HttpURLConnection) url.openConnection();\r\nconnection.setDoInput(true);\r\nconnection.setConnectTimeout(15000);\r\nconnection.setReadTimeout(15000);\r\nconnection.setRequestMethod(&quot;GET&quot;);\r\nconnection.connect();\r\nint response = connection.getResponseCode();\r\nLog.e(&quot;Response Code:&quot;,String.valueOf(response));\r\nLog.e(&quot;Response Message:&quot;,connection.getResponseMessage());\r\nInputStream input = connection.getInputStream();\r\nmyBitmap = BitmapFactory.decodeStream(input);\r\nLog.e(&quot;Bitmap&quot;,&quot;returned&quot;);\r\n```","title":"Azure Storage Rest API Authentication Header for Java Android","body":"<p>If you are using a SAS token, you really do not have to do any of the things you are doing because SAS token has all the necessary authorization information. All you have to do is use the SAS URL (blob endpoint + SAS token) to create the connection and you should be able to download the blob.</p>\n<p>Something like:</p>\n<pre><code>URL url = new URL(src);//src would be something like https://account.blob.core.windows.net/container/blob.bmp?sastoken\nHttpURLConnection connection = (HttpURLConnection) url.openConnection();\nconnection.setDoInput(true);\nconnection.setConnectTimeout(15000);\nconnection.setReadTimeout(15000);\nconnection.setRequestMethod(&quot;GET&quot;);\nconnection.connect();\nint response = connection.getResponseCode();\nLog.e(&quot;Response Code:&quot;,String.valueOf(response));\nLog.e(&quot;Response Message:&quot;,connection.getResponseMessage());\nInputStream input = connection.getInputStream();\nmyBitmap = BitmapFactory.decodeStream(input);\nLog.e(&quot;Bitmap&quot;,&quot;returned&quot;);\n</code></pre>\n"}],"owner":{"account_id":24096715,"reputation":3,"user_id":18069099,"display_name":"manafoil"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":226,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70911845,"answer_count":1,"score":0,"last_activity_date":1643516995,"creation_date":1643503310,"question_id":70910963,"body_markdown":"I&#39;m working on an Android project downloading an image from Azure Blob storage and am getting response code 400 Authorization Header not valid.\r\n\r\n    URL url = new URL(src);\r\n                    HttpURLConnection connection = (HttpURLConnection) url.openConnection();\r\n                    connection.setDoInput(true);\r\n                    connection.setConnectTimeout(15000);\r\n                    connection.setReadTimeout(15000);\r\n                    connection.setRequestMethod(&quot;GET&quot;);\r\n                    Date date = new Date();\r\n                    connection.setRequestProperty(&quot;Authorization&quot;,&quot;SAS Signature here?&quot;);\r\n                    connection.setRequestProperty(&quot;x-ms-date&quot;, date.toString());\r\n                    connection.setRequestProperty(&quot;x-ms-version&quot;, &quot;2021-02-12&quot;);\r\n                    connection.connect();\r\n                    int response = connection.getResponseCode();\r\n                    Log.e(&quot;Response Code:&quot;,String.valueOf(response));\r\n                    Log.e(&quot;Response Message:&quot;,connection.getResponseMessage());\r\n                    InputStream input = connection.getInputStream();\r\n                    myBitmap = BitmapFactory.decodeStream(input);\r\n                    Log.e(&quot;Bitmap&quot;,&quot;returned&quot;);","title":"Azure Storage Rest API Authentication Header for Java Android","body":"<p>I'm working on an Android project downloading an image from Azure Blob storage and am getting response code 400 Authorization Header not valid.</p>\n<pre><code>URL url = new URL(src);\n                HttpURLConnection connection = (HttpURLConnection) url.openConnection();\n                connection.setDoInput(true);\n                connection.setConnectTimeout(15000);\n                connection.setReadTimeout(15000);\n                connection.setRequestMethod(&quot;GET&quot;);\n                Date date = new Date();\n                connection.setRequestProperty(&quot;Authorization&quot;,&quot;SAS Signature here?&quot;);\n                connection.setRequestProperty(&quot;x-ms-date&quot;, date.toString());\n                connection.setRequestProperty(&quot;x-ms-version&quot;, &quot;2021-02-12&quot;);\n                connection.connect();\n                int response = connection.getResponseCode();\n                Log.e(&quot;Response Code:&quot;,String.valueOf(response));\n                Log.e(&quot;Response Message:&quot;,connection.getResponseMessage());\n                InputStream input = connection.getInputStream();\n                myBitmap = BitmapFactory.decodeStream(input);\n                Log.e(&quot;Bitmap&quot;,&quot;returned&quot;);\n</code></pre>\n"},{"tags":["java","postgresql","spring-boot"],"comments":[{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":1,"creation_date":1643440100,"post_id":70902356,"comment_id":125344410,"body_markdown":"&quot;user sent data&quot;? So the prefix may change during runtime?","body":"&quot;user sent data&quot;? So the prefix may change during runtime?"},{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1643440191,"post_id":70902356,"comment_id":125344422,"body_markdown":"&quot;seven digit sequence&quot; —&#160;Is this a sequence per prefix+date? So on the 30th we have a TBA2222011300000001 value, and on the next day the 31st we will have a TBA2222011310000001 value?","body":"&quot;seven digit sequence&quot; — Is this a sequence per prefix+date? So on the 30th we have a TBA2222011300000001 value, and on the next day the 31st we will have a TBA2222011310000001 value?"},{"owner":{"account_id":10500224,"reputation":65,"user_id":7739151,"display_name":"PragmaticFire"},"score":0,"creation_date":1643457612,"post_id":70902356,"comment_id":125347529,"body_markdown":"The sequence is incremented upon every insert to the database for eg: 00000001, 00000002 etc. No on the 30th we will have &quot;TBA2222013000000001&quot;","body":"The sequence is incremented upon every insert to the database for eg: 00000001, 00000002 etc. No on the 30th we will have &quot;TBA2222013000000001&quot;"}],"answers":[{"tags":[],"owner":{"account_id":5871551,"reputation":139,"user_id":4623737,"accept_rate":80,"display_name":"Surendra Rathore"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1643451289,"creation_date":1643434042,"answer_id":70902551,"question_id":70902356,"body_markdown":"Have an id column which is identity in postgres with start and end index as required.\r\nFor your reference to create identity column as desired \r\nhttps://www.postgresqltutorial.com/postgresql-identity-column/\r\n\r\nHave 1 more column for createdDate. \r\n\r\nThen account number is simply a derived value TBA + formatted(DATE) + formatted(Id).\r\nEx - \r\nNo not a trigger just a function. There won&#39;t be any account number column in your table. It will simply be a function which takes date and identity as input and gives account number as output. Since account number is only dependent on id and date. No need to store this value at all, whenever you need the account number just call that function. Account number will not exist at all. It will always be calculated based on id and date. Simple.\r\n\r\nRefer this in the article \r\nMethod 1:  Derived Value called &quot;markup&quot;\r\n\r\nThe first method we may want to add to this table is a accountNumber method, for calculating our accountNumber based on current date and id.  Since this value will always be based on two other stored values, there is no sense in storing it (other than possibly in a pre-calculated index).  To do this, we:\r\n\r\n    CREATE FUNCTION accountNumber(id,date) RETURNS varchar AS\r\n    $$ SELECT TBA + format(id) + format(date)\r\n    $$ LANGUAGE SQL IMMUTABLE; \r\n\r\nYou need to put logic for format(id) and format(date) as per your requirement.\r\n\r\n\r\nThere is no point of storing the value which can be easily derived from other 2 columns. It would unnecessary consume space. Also maintaining data integrity and checks will be an overhead.\r\n\r\nCreating function for derived values \r\nhttps://ledgersmbdev.blogspot.com/2012/08/postgresql-or-modelling-part-2-intro-to.html\r\n\r\nYou can use the function in output as well as search.\r\nIndex would also be utilized as required.\r\n\r\n\r\n\r\n\r\n","title":"Generate an account number with sequence","body":"<p>Have an id column which is identity in postgres with start and end index as required.\nFor your reference to create identity column as desired\n<a href=\"https://www.postgresqltutorial.com/postgresql-identity-column/\" rel=\"nofollow noreferrer\">https://www.postgresqltutorial.com/postgresql-identity-column/</a></p>\n<p>Have 1 more column for createdDate.</p>\n<p>Then account number is simply a derived value TBA + formatted(DATE) + formatted(Id).\nEx -\nNo not a trigger just a function. There won't be any account number column in your table. It will simply be a function which takes date and identity as input and gives account number as output. Since account number is only dependent on id and date. No need to store this value at all, whenever you need the account number just call that function. Account number will not exist at all. It will always be calculated based on id and date. Simple.</p>\n<p>Refer this in the article\nMethod 1:  Derived Value called &quot;markup&quot;</p>\n<p>The first method we may want to add to this table is a accountNumber method, for calculating our accountNumber based on current date and id.  Since this value will always be based on two other stored values, there is no sense in storing it (other than possibly in a pre-calculated index).  To do this, we:</p>\n<pre><code>CREATE FUNCTION accountNumber(id,date) RETURNS varchar AS\n$$ SELECT TBA + format(id) + format(date)\n$$ LANGUAGE SQL IMMUTABLE; \n</code></pre>\n<p>You need to put logic for format(id) and format(date) as per your requirement.</p>\n<p>There is no point of storing the value which can be easily derived from other 2 columns. It would unnecessary consume space. Also maintaining data integrity and checks will be an overhead.</p>\n<p>Creating function for derived values\n<a href=\"https://ledgersmbdev.blogspot.com/2012/08/postgresql-or-modelling-part-2-intro-to.html\" rel=\"nofollow noreferrer\">https://ledgersmbdev.blogspot.com/2012/08/postgresql-or-modelling-part-2-intro-to.html</a></p>\n<p>You can use the function in output as well as search.\nIndex would also be utilized as required.</p>\n"},{"tags":[],"owner":{"account_id":21215832,"reputation":4327,"user_id":15603477,"display_name":"jian"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1643449498,"creation_date":1643449498,"answer_id":70904080,"question_id":70902356,"body_markdown":"  \r\nhttps://www.postgresql.org/docs/current/ddl-generated-columns.html\r\n\r\n&gt; A generated column is a special column that is always computed from\r\n&gt; other columns.         \r\n&gt; Several restrictions apply to the definition of\r\n&gt; generated columns and tables involving generated columns:\r\n&gt;   * The generation expression can only use **immutable** functions and cannot use subqueries or reference anything other than the current row\r\n&gt; in any way.\r\n\r\n`now()` is mutable function, so you cannot use `Generated columns`.\r\nI am not sure why `Default` not working.    \r\nhttps://www.postgresql.org/docs/current/ddl-default.html\r\nSo now the only option is trigger. \r\n\r\n    CREATE TABLE account_info(\r\n        account_id INT GENERATED ALWAYS AS IDENTITY,\r\n        account_type text not null,\r\n        acconut_number text ) ;\r\nSo what you want is to automate:\r\n\r\n    UPDATE account_info set \r\n        account_number = \r\n        concat(\r\n            account_type,\r\n            to_char(CURRENT_DATE, &#39;yyyymmdd&#39;),\r\n            to_char(account_id, &#39;FM00000000&#39;));\r\n---\r\ncreate the function \r\n\r\n    create or replace function update_account_number() returns trigger as $$\r\n    BEGIN\r\n    UPDATE account_info set \r\n        account_number = \r\n        concat(\r\n            account_type,\r\n            to_char(CURRENT_DATE, &#39;yyyymmdd&#39;),\r\n            to_char(account_id, &#39;FM00000000&#39;));\r\n    RETURN NULL; \r\n    end;\r\n    $$  LANGUAGE plpgSQL;\r\n\r\ncreate the trigger: \r\n\r\n    CREATE OR REPLACE TRIGGER udpate_accout_number\r\n        AFTER INSERT ON account_info\r\n        FOR EACH ROW\r\n        EXECUTE FUNCTION update_account_number();","title":"Generate an account number with sequence","body":"<p><a href=\"https://www.postgresql.org/docs/current/ddl-generated-columns.html\" rel=\"nofollow noreferrer\">https://www.postgresql.org/docs/current/ddl-generated-columns.html</a></p>\n<blockquote>\n<p>A generated column is a special column that is always computed from\nother columns.<br />\nSeveral restrictions apply to the definition of\ngenerated columns and tables involving generated columns:</p>\n<ul>\n<li>The generation expression can only use <strong>immutable</strong> functions and cannot use subqueries or reference anything other than the current row\nin any way.</li>\n</ul>\n</blockquote>\n<p><code>now()</code> is mutable function, so you cannot use <code>Generated columns</code>.\nI am not sure why <code>Default</code> not working.<br />\n<a href=\"https://www.postgresql.org/docs/current/ddl-default.html\" rel=\"nofollow noreferrer\">https://www.postgresql.org/docs/current/ddl-default.html</a>\nSo now the only option is trigger.</p>\n<pre><code>CREATE TABLE account_info(\n    account_id INT GENERATED ALWAYS AS IDENTITY,\n    account_type text not null,\n    acconut_number text ) ;\n</code></pre>\n<p>So what you want is to automate:</p>\n<pre><code>UPDATE account_info set \n    account_number = \n    concat(\n        account_type,\n        to_char(CURRENT_DATE, 'yyyymmdd'),\n        to_char(account_id, 'FM00000000'));\n</code></pre>\n<hr />\n<p>create the function</p>\n<pre><code>create or replace function update_account_number() returns trigger as $$\nBEGIN\nUPDATE account_info set \n    account_number = \n    concat(\n        account_type,\n        to_char(CURRENT_DATE, 'yyyymmdd'),\n        to_char(account_id, 'FM00000000'));\nRETURN NULL; \nend;\n$$  LANGUAGE plpgSQL;\n</code></pre>\n<p>create the trigger:</p>\n<pre><code>CREATE OR REPLACE TRIGGER udpate_accout_number\n    AFTER INSERT ON account_info\n    FOR EACH ROW\n    EXECUTE FUNCTION update_account_number();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10500224,"reputation":65,"user_id":7739151,"display_name":"PragmaticFire"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1643516476,"creation_date":1643516476,"answer_id":70911813,"question_id":70902356,"body_markdown":"I did the following to generate the desired account number. \r\n\r\n1. Created a new sequence and appended zeros to it. \r\n\r\n`select to_char(nextval(&#39;finance_accounts_id_seq&#39;), &#39;fm00000000&#39;)`\r\n\r\n2. Got the Current date in java using DateTimeFormatter\r\n\r\n    DateTimeFormatter dmf = DateTimeFormatter.ofPattern(&quot;yyyyMMdd&quot;);\r\n    String date = LocalDate.now().format(dmf);\r\n3. Got the &quot;TBA&quot; from request param of the user. ","title":"Generate an account number with sequence","body":"<p>I did the following to generate the desired account number.</p>\n<ol>\n<li>Created a new sequence and appended zeros to it.</li>\n</ol>\n<p><code>select to_char(nextval('finance_accounts_id_seq'), 'fm00000000')</code></p>\n<ol start=\"2\">\n<li><p>Got the Current date in java using DateTimeFormatter</p>\n<p>DateTimeFormatter dmf = DateTimeFormatter.ofPattern(&quot;yyyyMMdd&quot;);\nString date = LocalDate.now().format(dmf);</p>\n</li>\n<li><p>Got the &quot;TBA&quot; from request param of the user.</p>\n</li>\n</ol>\n"}],"owner":{"account_id":10500224,"reputation":65,"user_id":7739151,"display_name":"PragmaticFire"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":440,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":3,"score":-1,"last_activity_date":1643516476,"creation_date":1643431514,"question_id":70902356,"body_markdown":"I have a requirement where I need to generate an account number and insert it into a table column in the following format. \r\n&quot;TBA2222011300000001&quot; = where &quot;TBA&quot; is the value of another column or user sent data &quot;22220113&quot; implies the current date and &quot;00000001&quot; is a seven digit sequence that needs to be incremented and appended for every insert. \r\n\r\nHow can I append the sequence to the column, Should I do it in java or can it be done at DB end. I am currently using postgres with java and spring boot. ","title":"Generate an account number with sequence","body":"<p>I have a requirement where I need to generate an account number and insert it into a table column in the following format.\n&quot;TBA2222011300000001&quot; = where &quot;TBA&quot; is the value of another column or user sent data &quot;22220113&quot; implies the current date and &quot;00000001&quot; is a seven digit sequence that needs to be incremented and appended for every insert.</p>\n<p>How can I append the sequence to the column, Should I do it in java or can it be done at DB end. I am currently using postgres with java and spring boot.</p>\n"},{"tags":["java","oop","interface"],"comments":[{"owner":{"account_id":15543730,"reputation":1519,"user_id":11213660,"display_name":"cegredev"},"score":3,"creation_date":1640549510,"post_id":70489470,"comment_id":124603771,"body_markdown":"Not sure if I understood your question correctly, but: If you&#39;re wondering why it&#39;s - speed instead of + speed, that&#39;s because computer coordinate systems work differently than the ones in math. The higher the y value, the lower down the point is. The top left corner, for example, is (0, 0), while the bottom right would be, for example, (1920, 1080).","body":"Not sure if I understood your question correctly, but: If you&#39;re wondering why it&#39;s - speed instead of + speed, that&#39;s because computer coordinate systems work differently than the ones in math. The higher the y value, the lower down the point is. The top left corner, for example, is (0, 0), while the bottom right would be, for example, (1920, 1080)."},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1641267413,"post_id":70489470,"comment_id":124755757,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."}],"answers":[{"tags":[],"owner":{"account_id":1233070,"reputation":9484,"user_id":1197251,"display_name":"dominicoder"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1643516120,"creation_date":1640564922,"answer_id":70490761,"question_id":70489470,"body_markdown":"&gt; Can you explain to me what is yspeed (it&#39;s velocity or vector)\r\n\r\nSpeed is simply &quot;the rate at which something moves&quot;. Like you car&#39;s speed when you drive might be 35mph or 60kph, for example. It means the car covers a distance of 35 miles every hour.\r\n\r\nIt is related to but not the same as velocity (google it).\r\n\r\nIn your example, &quot;yspeed&quot; would seem to be the rate at which the value of the `MoveablePoint`&#39;s y property changes.\r\n\r\n&gt; and why y=y-yspeed.I really appreciate your answer\r\n\r\nAgain, since speed is the rate at which something moves, that means `y` is going to move `yspeed` units over some time interval, which means it needs to be adjusted by `yspeed` amount across that time interval. Again, considering a car that starts at mile marker 0 and moves at a speed of 35mph, it will hit mile marker 35 after 1 hour. In other words, it&#39;s location `y` will be it&#39;s original position + the speed at which it moved (`y + mph`).\r\n\r\nIn this case it&#39;s _negative_ (`y - yspeed`) because in screen coordinates moving &quot;up&quot; actually means decreasing the y position since the screen coordinates start at the top left. When y = 0 you&#39;re at the top of the screen and when you increase y you&#39;re moving down the screen.","title":"Can you explain how is moveUp() is working?","body":"<blockquote>\n<p>Can you explain to me what is yspeed (it's velocity or vector)</p>\n</blockquote>\n<p>Speed is simply &quot;the rate at which something moves&quot;. Like you car's speed when you drive might be 35mph or 60kph, for example. It means the car covers a distance of 35 miles every hour.</p>\n<p>It is related to but not the same as velocity (google it).</p>\n<p>In your example, &quot;yspeed&quot; would seem to be the rate at which the value of the <code>MoveablePoint</code>'s y property changes.</p>\n<blockquote>\n<p>and why y=y-yspeed.I really appreciate your answer</p>\n</blockquote>\n<p>Again, since speed is the rate at which something moves, that means <code>y</code> is going to move <code>yspeed</code> units over some time interval, which means it needs to be adjusted by <code>yspeed</code> amount across that time interval. Again, considering a car that starts at mile marker 0 and moves at a speed of 35mph, it will hit mile marker 35 after 1 hour. In other words, it's location <code>y</code> will be it's original position + the speed at which it moved (<code>y + mph</code>).</p>\n<p>In this case it's <em>negative</em> (<code>y - yspeed</code>) because in screen coordinates moving &quot;up&quot; actually means decreasing the y position since the screen coordinates start at the top left. When y = 0 you're at the top of the screen and when you increase y you're moving down the screen.</p>\n"}],"owner":{"account_id":23751166,"reputation":3,"user_id":17767905,"display_name":"Anh trần"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":353,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":70490761,"answer_count":1,"score":-1,"last_activity_date":1643516120,"creation_date":1640549152,"question_id":70489470,"body_markdown":"I am a newbie. When I have exercise about creat Class interface Moveable, MoveablePoint.\r\n\r\n\r\n\r\n[![enter image description here][1]][1]\r\n \r\n\r\nI have searched this code on the internet but I can&#39;t understand why is moveUp() is y=y-yspeed. Can you explain to me what is yspeed (it&#39;s velocity or vector) and why y=y-yspeed.I really appreciate your answer \r\n\r\n```\r\n public class MovablePoint implements Movable{\r\n\r\n    public int x, y, xSpeed, ySpeed;\r\n\r\n    public MovablePoint(int x, int y, int xSpeed, int ySpeed) {\r\n        this.x = x;\r\n        this.y = y;\r\n        this.xSpeed = xSpeed;\r\n        this.ySpeed = ySpeed;\r\n    }\r\n\r\n\r\n    @Override\r\n    public void moveUp() {\r\n        y -= ySpeed;\r\n    }\r\n\r\n    @Override\r\n    public void moveDown() {\r\n        y += ySpeed;\r\n    }\r\n\r\n    @Override\r\n    public void moveRight() {\r\n        x += xSpeed;\r\n    }\r\n\r\n    @Override\r\n    public void moveLeft() {\r\n        x -= xSpeed;\r\n    }\r\n}\r\n```\r\n \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/PLPkh.png","title":"Can you explain how is moveUp() is working?","body":"<p>I am a newbie. When I have exercise about creat Class interface Moveable, MoveablePoint.</p>\n<p><a href=\"https://i.stack.imgur.com/PLPkh.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/PLPkh.png\" alt=\"enter image description here\" /></a></p>\n<p>I have searched this code on the internet but I can't understand why is moveUp() is y=y-yspeed. Can you explain to me what is yspeed (it's velocity or vector) and why y=y-yspeed.I really appreciate your answer</p>\n<pre><code> public class MovablePoint implements Movable{\n\n    public int x, y, xSpeed, ySpeed;\n\n    public MovablePoint(int x, int y, int xSpeed, int ySpeed) {\n        this.x = x;\n        this.y = y;\n        this.xSpeed = xSpeed;\n        this.ySpeed = ySpeed;\n    }\n\n\n    @Override\n    public void moveUp() {\n        y -= ySpeed;\n    }\n\n    @Override\n    public void moveDown() {\n        y += ySpeed;\n    }\n\n    @Override\n    public void moveRight() {\n        x += xSpeed;\n    }\n\n    @Override\n    public void moveLeft() {\n        x -= xSpeed;\n    }\n}\n</code></pre>\n"},{"tags":["java","string","recursion","replace"],"comments":[{"owner":{"account_id":785560,"reputation":14879,"user_id":845414,"display_name":"Johannes Kuhn"},"score":4,"creation_date":1643510835,"post_id":70911418,"comment_id":125358714,"body_markdown":"Does this answer your question? [How do I compare strings in Java?](https://stackoverflow.com/questions/513832/how-do-i-compare-strings-in-java)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/513832/how-do-i-compare-strings-in-java\">How do I compare strings in Java?</a>"}],"answers":[{"tags":[],"owner":{"account_id":6522844,"reputation":2162,"user_id":10919349,"display_name":"Richard K Yu"},"down_vote_count":1,"up_vote_count":3,"is_accepted":true,"score":2,"last_activity_date":1643516057,"creation_date":1643512104,"answer_id":70911518,"question_id":70911418,"body_markdown":"Like the comment suggests, you should use equals() when comparing strings in Java, but you can also simplify your life by using the contains and removeFirst method for strings to deal with this recursive task.\r\n\r\nI added a print line to the recursive function to show it is removing one instance of string2 at a time from string1.\r\n\r\n```\r\npublic class StringRecursion {\r\n\r\n    public static void main(String[] args) {\r\n\tString str1 = &quot;Mississippi&quot;;\r\n\tString str2 = &quot;iss&quot;;\r\n\r\n\tSystem.out.println(repString(str1, str2));\r\n\r\n    }\r\n    \r\n    public static String repString(String string1, String string2) {\r\n\tif(string1.contains(string2)) {\r\n\t    string1 = string1.replaceFirst(string2, &quot;&quot;);\r\n\t    System.out.println(&quot;The string is currently: &quot;+ string1);\r\n\t}\r\n\telse {\r\n\t    return string1;\r\n\t}\r\n\t\r\n\treturn repString(string1, string2);\r\n    }\r\n\r\n}\r\n```\r\n\r\nOutput:\r\n```\r\nThe string is currently: Missippi\r\nThe string is currently: Mippi\r\nMippi\r\n```\r\n\r\n**Important:** One other thing to consider with such an approach is if you want the pattern &quot;iss&quot; formed by an intermediate removal to also be removed. For instance, if you have the word &quot;iissss&quot; and want to remove &quot;iss&quot; it would become &quot;&quot; after running this even though iss does not appear twice in the word initially.\r\n\r\nIf you want to have the behavior mimic replaceAll function, where we are looking to only get rid of the &quot;iss&quot; patterns in the very first word and not the ones that appear in intermediate steps, I believe the function:\r\n\r\n```\r\npublic static String repString(String string1, String string2) {\r\n\tif(string1.contains(string2)) {\r\n\t    Pattern pattern = Pattern.compile(string2);\r\n\t    long originalCounts = pattern.matcher(string1).results().count();\r\n\t    \r\n\t    string1 = string1.replaceFirst(string2, &quot;&quot;);\r\n\t    long newCounts = pattern.matcher(string1).results().count();\r\n\t    \r\n\t    if(originalCounts == newCounts) {\r\n\t\tMatcher matcher = pattern.matcher(string1);\r\n\t\tmatcher.find();\r\n\t\tint startPosition = matcher.end();\r\n\t\t\r\n\t\t//Skip the generated matching pattern that appears in-between.\r\n\t\treturn string1.substring(0, startPosition) + repString(string1.substring(startPosition), string2);\r\n\t    }\r\n\t    \r\n\t    //System.out.println(&quot;The string is currently: &quot;+ string1);\r\n\t}\r\n\telse {\r\n\t    return string1;\r\n\t}\r\n\t\r\n\treturn repString(string1, string2);\r\n}\r\n```\r\n\r\nwill be sufficient instead.","title":"Java recursive method that removes all instances of a second string in the first string and returns the new first string","body":"<p>Like the comment suggests, you should use equals() when comparing strings in Java, but you can also simplify your life by using the contains and removeFirst method for strings to deal with this recursive task.</p>\n<p>I added a print line to the recursive function to show it is removing one instance of string2 at a time from string1.</p>\n<pre><code>public class StringRecursion {\n\n    public static void main(String[] args) {\n    String str1 = &quot;Mississippi&quot;;\n    String str2 = &quot;iss&quot;;\n\n    System.out.println(repString(str1, str2));\n\n    }\n    \n    public static String repString(String string1, String string2) {\n    if(string1.contains(string2)) {\n        string1 = string1.replaceFirst(string2, &quot;&quot;);\n        System.out.println(&quot;The string is currently: &quot;+ string1);\n    }\n    else {\n        return string1;\n    }\n    \n    return repString(string1, string2);\n    }\n\n}\n</code></pre>\n<p>Output:</p>\n<pre><code>The string is currently: Missippi\nThe string is currently: Mippi\nMippi\n</code></pre>\n<p><strong>Important:</strong> One other thing to consider with such an approach is if you want the pattern &quot;iss&quot; formed by an intermediate removal to also be removed. For instance, if you have the word &quot;iissss&quot; and want to remove &quot;iss&quot; it would become &quot;&quot; after running this even though iss does not appear twice in the word initially.</p>\n<p>If you want to have the behavior mimic replaceAll function, where we are looking to only get rid of the &quot;iss&quot; patterns in the very first word and not the ones that appear in intermediate steps, I believe the function:</p>\n<pre><code>public static String repString(String string1, String string2) {\n    if(string1.contains(string2)) {\n        Pattern pattern = Pattern.compile(string2);\n        long originalCounts = pattern.matcher(string1).results().count();\n        \n        string1 = string1.replaceFirst(string2, &quot;&quot;);\n        long newCounts = pattern.matcher(string1).results().count();\n        \n        if(originalCounts == newCounts) {\n        Matcher matcher = pattern.matcher(string1);\n        matcher.find();\n        int startPosition = matcher.end();\n        \n        //Skip the generated matching pattern that appears in-between.\n        return string1.substring(0, startPosition) + repString(string1.substring(startPosition), string2);\n        }\n        \n        //System.out.println(&quot;The string is currently: &quot;+ string1);\n    }\n    else {\n        return string1;\n    }\n    \n    return repString(string1, string2);\n}\n</code></pre>\n<p>will be sufficient instead.</p>\n"}],"owner":{"account_id":16691492,"reputation":41,"user_id":12063969,"display_name":"Welt"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":257,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":70911518,"answer_count":1,"score":1,"last_activity_date":1643516057,"creation_date":1643510565,"question_id":70911418,"body_markdown":"I am trying to write a recursive method in Java that accepts two strings and then goes ahead and removes the instances of the second string from the first string (one at a time). \r\n\r\nex. String 1 == Mississippi, String 2 iss\r\nfirst recursion == Missippi\r\nthen the final result should return Mippi\r\n\r\n    public class RecursionEx {\r\n\r\n\t\r\n\tpublic static void main(String[] args) {\r\n\t\tString str1 = &quot;Mississippi&quot;;\r\n\t\tString str2 = &quot;iss&quot;;\r\n\t\t\r\n\t\tSystem.out.println(repString(str1, str2));\r\n\t\r\n\r\n\t}\r\n\tpublic  static String repString(String string1, String string2) {\r\n\t\t//base case\r\n\t\tif(string1.length()== 0)\r\n\t\t\treturn &quot;&quot;;  \r\n\t\t//recursive case\r\n\t\tif (string1.substring(0, string2.length()) == string2)\r\n\t\t\treturn repString(string1.substring(string2.length()), string2);\r\n\t\telse \r\n\t\t\treturn repString(string1.substring(1), string2);\r\n\t}}\r\n","title":"Java recursive method that removes all instances of a second string in the first string and returns the new first string","body":"<p>I am trying to write a recursive method in Java that accepts two strings and then goes ahead and removes the instances of the second string from the first string (one at a time).</p>\n<p>ex. String 1 == Mississippi, String 2 iss\nfirst recursion == Missippi\nthen the final result should return Mippi</p>\n<pre><code>public class RecursionEx {\n\n\npublic static void main(String[] args) {\n    String str1 = &quot;Mississippi&quot;;\n    String str2 = &quot;iss&quot;;\n    \n    System.out.println(repString(str1, str2));\n\n\n}\npublic  static String repString(String string1, String string2) {\n    //base case\n    if(string1.length()== 0)\n        return &quot;&quot;;  \n    //recursive case\n    if (string1.substring(0, string2.length()) == string2)\n        return repString(string1.substring(string2.length()), string2);\n    else \n        return repString(string1.substring(1), string2);\n}}\n</code></pre>\n"},{"tags":["java","postgresql","spring-boot","spring-data-jpa"],"comments":[{"owner":{"account_id":173785,"reputation":930,"user_id":402723,"display_name":"Raul Lapeira Herrero"},"score":0,"creation_date":1643883182,"post_id":70911634,"comment_id":125459403,"body_markdown":"If you use native syntax that query should work in any SQL client for your database. Does it work?","body":"If you use native syntax that query should work in any SQL client for your database. Does it work?"},{"owner":{"account_id":10500224,"reputation":65,"user_id":7739151,"display_name":"PragmaticFire"},"score":0,"creation_date":1643945623,"post_id":70911634,"comment_id":125480052,"body_markdown":"Yes it works in sql client","body":"Yes it works in sql client"},{"owner":{"account_id":173785,"reputation":930,"user_id":402723,"display_name":"Raul Lapeira Herrero"},"score":0,"creation_date":1643966619,"post_id":70911634,"comment_id":125484449,"body_markdown":"No idea then, seems to be a parsing problem in the JPA side then but it should not be doing anything but passing it to the DB","body":"No idea then, seems to be a parsing problem in the JPA side then but it should not be doing anything but passing it to the DB"}],"answers":[{"tags":[],"owner":{"account_id":10500224,"reputation":65,"user_id":7739151,"display_name":"PragmaticFire"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1643515921,"creation_date":1643515921,"answer_id":70911776,"question_id":70911634,"body_markdown":"The following query worked for me in Spring Data JPA \r\n\r\n    @Query(value = &quot;select to_char(nextval(&#39;finance_business_accounts_pan_seq&#39;), &#39;fm00000000&#39;)&quot;, nativeQuery = true)","title":"Spring Data JPA - Syntax error in native query for LPAD function","body":"<p>The following query worked for me in Spring Data JPA</p>\n<pre><code>@Query(value = &quot;select to_char(nextval('finance_business_accounts_pan_seq'), 'fm00000000')&quot;, nativeQuery = true)\n</code></pre>\n"}],"owner":{"account_id":10500224,"reputation":65,"user_id":7739151,"display_name":"PragmaticFire"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":559,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1643515921,"creation_date":1643514105,"question_id":70911634,"body_markdown":"I am getting syntax error when trying to execute a native query in spring data jpa for lpad function to get the sequence as text\r\n\r\n        @Query(value = &quot;select lpad(nextval(&#39;finance_accounts_id_seq&#39;)::text, 8, &#39;0&#39;)&quot;, nativeQuery = true)\r\n        public String getNextValForSequence();\r\nHibernate: \r\n    select\r\n        lpad(nextval(&#39;finance_accounts_id_seq&#39;):text,\r\n        8,\r\n        &#39;0&#39;)\r\n2022-01-30 09:10:21.102  WARN 16108 --- [nio-8082-exec-2] o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Error: 0, SQLState: 42601\r\n2022-01-30 09:10:21.102 ERROR 16108 --- [nio-8082-exec-2] o.h.engine.jdbc.spi.SqlExceptionHelper   : ERROR: syntax error at or near &quot;:&quot;\r\n\r\nI am currently using postgres with Spring Data JPA. \r\n\r\n    ","title":"Spring Data JPA - Syntax error in native query for LPAD function","body":"<p>I am getting syntax error when trying to execute a native query in spring data jpa for lpad function to get the sequence as text</p>\n<pre><code>    @Query(value = &quot;select lpad(nextval('finance_accounts_id_seq')::text, 8, '0')&quot;, nativeQuery = true)\n    public String getNextValForSequence();\n</code></pre>\n<p>Hibernate:\nselect\nlpad(nextval('finance_accounts_id_seq'):text,\n8,\n'0')\n2022-01-30 09:10:21.102  WARN 16108 --- [nio-8082-exec-2] o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Error: 0, SQLState: 42601\n2022-01-30 09:10:21.102 ERROR 16108 --- [nio-8082-exec-2] o.h.engine.jdbc.spi.SqlExceptionHelper   : ERROR: syntax error at or near &quot;:&quot;</p>\n<p>I am currently using postgres with Spring Data JPA.</p>\n"},{"tags":["java","arrays","spring","arraylist"],"comments":[{"owner":{"account_id":22450291,"reputation":364,"user_id":16653700,"display_name":"Alias Cartellano"},"score":0,"creation_date":1643495345,"post_id":70910220,"comment_id":125356563,"body_markdown":"What do you mean by not working? Is it throwing an error or returning the wrong items?","body":"What do you mean by not working? Is it throwing an error or returning the wrong items?"},{"owner":{"account_id":2817598,"reputation":6001,"user_id":2422224,"display_name":"Ma3x"},"score":0,"creation_date":1643497633,"post_id":70910220,"comment_id":125356945,"body_markdown":"Post your `Medicine` class, most likely it is missing `equals` (and `hashCode`) overrides.","body":"Post your <code>Medicine</code> class, most likely it is missing <code>equals</code> (and <code>hashCode</code>) overrides."},{"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"score":0,"creation_date":1643518304,"post_id":70910220,"comment_id":125359460,"body_markdown":"Does this answer your question? [Efficient intersection of two List&lt;String&gt; in Java?](https://stackoverflow.com/questions/2400838/efficient-intersection-of-two-liststring-in-java)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/2400838/efficient-intersection-of-two-liststring-in-java\">Efficient intersection of two List&lt;String&gt; in Java?</a>"}],"answers":[{"tags":[],"owner":{"account_id":10389194,"reputation":14819,"user_id":7661119,"display_name":"Ervin Szilagyi"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1643496845,"creation_date":1643496845,"answer_id":70910439,"question_id":70910220,"body_markdown":"One option to get all the common elements from multiple lists would be to iterate on the first list and filter out all the elements which exist in every other list, so:\r\n\r\n```\r\nList&lt;Medicine&gt; resultList = lessList.stream()\r\n        .filter(moreList::contains)\r\n        .filter(namesList::contains)\r\n        .collect(Collectors.toList());\r\n```\r\n\r\nWhile this works, in case of bigger lists, you may consider using `HashSets` instead of lists, for better performance.\r\n\r\nAlso, this code assumes `Medicine` class has proper implementation for `equals` and `hashcode`.\r\n","title":"Common part from three ArrayList","body":"<p>One option to get all the common elements from multiple lists would be to iterate on the first list and filter out all the elements which exist in every other list, so:</p>\n<pre><code>List&lt;Medicine&gt; resultList = lessList.stream()\n        .filter(moreList::contains)\n        .filter(namesList::contains)\n        .collect(Collectors.toList());\n</code></pre>\n<p>While this works, in case of bigger lists, you may consider using <code>HashSets</code> instead of lists, for better performance.</p>\n<p>Also, this code assumes <code>Medicine</code> class has proper implementation for <code>equals</code> and <code>hashcode</code>.</p>\n"},{"tags":[],"owner":{"account_id":13789219,"reputation":48460,"user_id":9952196,"display_name":"Shawn"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1643497403,"creation_date":1643497403,"answer_id":70910486,"question_id":70910220,"body_markdown":"The `Collection#retainAll()` method will only keep items that appear in another `Collection`; in other words, the intersection of two collections. Use it twice to get the intersection of three collections:\r\n\r\n```java\r\nList&lt;String&gt; list1 = List.of(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;q&quot;);\r\nList&lt;String&gt; list2 = List.of(&quot;b&quot;, &quot;d&quot;, &quot;e&quot;, &quot;q&quot;);\r\nList&lt;String&gt; list3 = List.of(&quot;b&quot;, &quot;q&quot;, &quot;r&quot;, &quot;s&quot;);\r\nList&lt;String&gt; intersection = new ArrayList&lt;String&gt;(list1);\r\nintersection.retainAll(list2);\r\nintersection.retainAll(list3);\r\nSystem.out.println(intersection); // [b, q]\r\n```","title":"Common part from three ArrayList","body":"<p>The <code>Collection#retainAll()</code> method will only keep items that appear in another <code>Collection</code>; in other words, the intersection of two collections. Use it twice to get the intersection of three collections:</p>\n<pre class=\"lang-java prettyprint-override\"><code>List&lt;String&gt; list1 = List.of(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;q&quot;);\nList&lt;String&gt; list2 = List.of(&quot;b&quot;, &quot;d&quot;, &quot;e&quot;, &quot;q&quot;);\nList&lt;String&gt; list3 = List.of(&quot;b&quot;, &quot;q&quot;, &quot;r&quot;, &quot;s&quot;);\nList&lt;String&gt; intersection = new ArrayList&lt;String&gt;(list1);\nintersection.retainAll(list2);\nintersection.retainAll(list3);\nSystem.out.println(intersection); // [b, q]\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10478004,"reputation":116,"user_id":7723926,"display_name":"Hamed Heidarian"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1643515099,"creation_date":1643515099,"answer_id":70911704,"question_id":70910220,"body_markdown":"The best way is using retainAll method which eliminates all uncommon items from the list.\r\nhttps://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html#retainAll(java.util.Collection)","title":"Common part from three ArrayList","body":"<p>The best way is using retainAll method which eliminates all uncommon items from the list.\n<a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html#retainAll(java.util.Collection)\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html#retainAll(java.util.Collection)</a></p>\n"}],"owner":{"account_id":24087538,"reputation":41,"user_id":18061301,"display_name":"vyesman"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":103,"favorite_count":0,"down_vote_count":1,"up_vote_count":4,"accepted_answer_id":70910486,"answer_count":3,"score":3,"last_activity_date":1643515099,"creation_date":1643494680,"question_id":70910220,"body_markdown":"I have a controller with some @RequestParam(required = false) which have to return all medicines with some filters if they are exist, service for this controller, which contains logic for it, but it is not working. The main problem is that I have 3 ArrayList and I cannot come up with how to find all elements which exist in all three ArrayLists :)\r\n\r\n        public List&lt;Medicine&gt; readAllMedicine(Double lessThenPrice, Double moreThenPrice, String name) {\r\n        //when lessThenPrice &lt; moreThenPrice, result of their queries will not have general elements\r\n        if ((lessThenPrice != null &amp;&amp; moreThenPrice != 0) &amp;&amp; lessThenPrice &lt; moreThenPrice) {\r\n            return Collections.emptyList();\r\n        }\r\n\r\n        List&lt;Medicine&gt; resultList = new ArrayList&lt;&gt;();\r\n        List&lt;Medicine&gt; lessList = new ArrayList&lt;&gt;();\r\n        List&lt;Medicine&gt; moreList = new ArrayList&lt;&gt;();\r\n        List&lt;Medicine&gt; nameList = new ArrayList&lt;&gt;();\r\n\r\n        //checking if there are arguments from the controller\r\n        if (lessThenPrice != null) {\r\n            lessList.addAll(medicineDao.findMedicinesByPriceIsLessThan(lessThenPrice));\r\n        }\r\n        if (moreThenPrice != null) {\r\n            moreList.addAll(medicineDao.findMedicinesByPriceIsGreaterThan(moreThenPrice));\r\n        }\r\n        if (name != null) {\r\n            nameList.addAll(medicineDao.findMedicinesByName(name));\r\n        }\r\n\r\n        //saving general elements\r\n        //this part is not working\r\n        if (!lessList.isEmpty() || !moreList.isEmpty() || !nameList.isEmpty()) {\r\n            List&lt;Medicine&gt; temp = new ArrayList&lt;&gt;(); //it will contain general part of lessList and moreList\r\n            for (Medicine medicine : lessList) {\r\n                if (moreList.contains(medicine)) {\r\n                    temp.add(medicine);\r\n                }\r\n            }\r\n            for (Medicine medicine : nameList) {\r\n                if (temp.contains(medicine)) {\r\n                    resultList.add(medicine);\r\n                }\r\n            }\r\n            return resultList;\r\n        }\r\n        //if there is no args, just return all medicines\r\n        return medicineDao.findAll();\r\n    }","title":"Common part from three ArrayList","body":"<p>I have a controller with some @RequestParam(required = false) which have to return all medicines with some filters if they are exist, service for this controller, which contains logic for it, but it is not working. The main problem is that I have 3 ArrayList and I cannot come up with how to find all elements which exist in all three ArrayLists :)</p>\n<pre><code>    public List&lt;Medicine&gt; readAllMedicine(Double lessThenPrice, Double moreThenPrice, String name) {\n    //when lessThenPrice &lt; moreThenPrice, result of their queries will not have general elements\n    if ((lessThenPrice != null &amp;&amp; moreThenPrice != 0) &amp;&amp; lessThenPrice &lt; moreThenPrice) {\n        return Collections.emptyList();\n    }\n\n    List&lt;Medicine&gt; resultList = new ArrayList&lt;&gt;();\n    List&lt;Medicine&gt; lessList = new ArrayList&lt;&gt;();\n    List&lt;Medicine&gt; moreList = new ArrayList&lt;&gt;();\n    List&lt;Medicine&gt; nameList = new ArrayList&lt;&gt;();\n\n    //checking if there are arguments from the controller\n    if (lessThenPrice != null) {\n        lessList.addAll(medicineDao.findMedicinesByPriceIsLessThan(lessThenPrice));\n    }\n    if (moreThenPrice != null) {\n        moreList.addAll(medicineDao.findMedicinesByPriceIsGreaterThan(moreThenPrice));\n    }\n    if (name != null) {\n        nameList.addAll(medicineDao.findMedicinesByName(name));\n    }\n\n    //saving general elements\n    //this part is not working\n    if (!lessList.isEmpty() || !moreList.isEmpty() || !nameList.isEmpty()) {\n        List&lt;Medicine&gt; temp = new ArrayList&lt;&gt;(); //it will contain general part of lessList and moreList\n        for (Medicine medicine : lessList) {\n            if (moreList.contains(medicine)) {\n                temp.add(medicine);\n            }\n        }\n        for (Medicine medicine : nameList) {\n            if (temp.contains(medicine)) {\n                resultList.add(medicine);\n            }\n        }\n        return resultList;\n    }\n    //if there is no args, just return all medicines\n    return medicineDao.findAll();\n}\n</code></pre>\n"},{"tags":["java","gradle","ant"],"comments":[{"owner":{"account_id":3557625,"reputation":198996,"user_id":2970947,"display_name":"Elliott Frisch"},"score":1,"creation_date":1643513268,"post_id":70911553,"comment_id":125358960,"body_markdown":"I strongly suggest you replace Ant with maven; see [Maven Getting Started](https://maven.apache.org/guides/getting-started/). If you insist on using Ant, the dependency manager is called [Ivy](https://ant.apache.org/ivy/).","body":"I strongly suggest you replace Ant with maven; see <a href=\"https://maven.apache.org/guides/getting-started/\" rel=\"nofollow noreferrer\">Maven Getting Started</a>. If you insist on using Ant, the dependency manager is called <a href=\"https://ant.apache.org/ivy/\" rel=\"nofollow noreferrer\">Ivy</a>."}],"owner":{"account_id":16731174,"reputation":197,"user_id":12093475,"display_name":"Ian Ducao"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":96,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1643512704,"creation_date":1643512704,"question_id":70911553,"body_markdown":"I haven&#39;t touched Java for almost 6 years now and as i&#39;m trying to finish this freelance project i just realized the API from Vonage for sending and receiving SMS required to add a dependency on build file \r\n```Install dependencies:Add the following to `build.gradle`:```\r\n\r\nand this is the line that&#39;s needed ``` compile &#39;com.vonage:client:6.2.0&#39; ```\r\nhowever i just realized that the the sample code from documentation points out to a bundle.gradle file that&#39;s equivalent to bundle.xml file on my Java with Ant Project, how can i properly add this to the dependency file of my project? ","title":"How to add API dependencies on Java Ant Projects","body":"<p>I haven't touched Java for almost 6 years now and as i'm trying to finish this freelance project i just realized the API from Vonage for sending and receiving SMS required to add a dependency on build file\n<code>Install dependencies:Add the following to `build.gradle`:</code></p>\n<p>and this is the line that's needed <code>compile 'com.vonage:client:6.2.0'</code>\nhowever i just realized that the the sample code from documentation points out to a bundle.gradle file that's equivalent to bundle.xml file on my Java with Ant Project, how can i properly add this to the dependency file of my project?</p>\n"},{"tags":["java","java-8","java-stream"],"comments":[{"owner":{"account_id":1734091,"reputation":92376,"user_id":1587046,"accept_rate":62,"display_name":"Alexis C."},"score":1,"creation_date":1449586538,"post_id":34158634,"comment_id":56064627,"body_markdown":"Not all the answers speak only about pairs, but feel free to re-open if you wish. I still link it here: http://stackoverflow.com/questions/20470010/collect-successive-pairs-from-a-stream","body":"Not all the answers speak only about pairs, but feel free to re-open if you wish. I still link it here: <a href=\"http://stackoverflow.com/questions/20470010/collect-successive-pairs-from-a-stream\" title=\"collect successive pairs from a stream\">stackoverflow.com/questions/20470010/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":6243460,"reputation":97907,"user_id":4856258,"accept_rate":100,"display_name":"Tagir Valeev"},"down_vote_count":0,"up_vote_count":36,"is_accepted":true,"score":36,"last_activity_date":1449590394,"creation_date":1449587024,"answer_id":34159174,"question_id":34158634,"body_markdown":"There&#39;s no such function in the API as it supports both sequential and parallel processing and it&#39;s really hard to provide an efficient parallel processing for sliding window function for arbitrary stream source (even efficient pairs parallel processing is quite hard, I implemented it, so I know).\r\n\r\nHowever if your source is the `List` with fast random access, you can use `subList()` method to get the desired behavior like this:\r\n\r\n    public static &lt;T&gt; Stream&lt;List&lt;T&gt;&gt; sliding(List&lt;T&gt; list, int size) {\r\n        if(size &gt; list.size()) \r\n            return Stream.empty();\r\n        return IntStream.range(0, list.size()-size+1)\r\n                        .mapToObj(start -&gt; list.subList(start, start+size));\r\n    }\r\n\r\nSimilar method is actually available in my [StreamEx](https://github.com/amaembo/streamex) library: see [`StreamEx.ofSubLists()`](http://amaembo.github.io/streamex/javadoc/one/util/streamex/StreamEx.html#ofSubLists-java.util.List-int-int-).\r\n\r\nThere are also some other third-party solutions which don&#39;t care about parallel processing and provide sliding functionality using some internal buffer. For example, protonpack [`StreamUtils.windowed`](https://github.com/poetix/protonpack/blob/07130bfe15ad2c0143e624dd4e3a15e5cf046659/src/main/java/com/codepoetics/protonpack/StreamUtils.java#L142).","title":"How to transform a Java stream into a sliding window?","body":"<p>There's no such function in the API as it supports both sequential and parallel processing and it's really hard to provide an efficient parallel processing for sliding window function for arbitrary stream source (even efficient pairs parallel processing is quite hard, I implemented it, so I know).</p>\n\n<p>However if your source is the <code>List</code> with fast random access, you can use <code>subList()</code> method to get the desired behavior like this:</p>\n\n<pre><code>public static &lt;T&gt; Stream&lt;List&lt;T&gt;&gt; sliding(List&lt;T&gt; list, int size) {\n    if(size &gt; list.size()) \n        return Stream.empty();\n    return IntStream.range(0, list.size()-size+1)\n                    .mapToObj(start -&gt; list.subList(start, start+size));\n}\n</code></pre>\n\n<p>Similar method is actually available in my <a href=\"https://github.com/amaembo/streamex\">StreamEx</a> library: see <a href=\"http://amaembo.github.io/streamex/javadoc/one/util/streamex/StreamEx.html#ofSubLists-java.util.List-int-int-\"><code>StreamEx.ofSubLists()</code></a>.</p>\n\n<p>There are also some other third-party solutions which don't care about parallel processing and provide sliding functionality using some internal buffer. For example, protonpack <a href=\"https://github.com/poetix/protonpack/blob/07130bfe15ad2c0143e624dd4e3a15e5cf046659/src/main/java/com/codepoetics/protonpack/StreamUtils.java#L142\"><code>StreamUtils.windowed</code></a>.</p>\n"},{"tags":[],"owner":{"account_id":247217,"reputation":213455,"user_id":521799,"accept_rate":89,"display_name":"Lukas Eder"},"down_vote_count":1,"up_vote_count":15,"is_accepted":false,"score":14,"last_activity_date":1536573632,"creation_date":1452121212,"answer_id":34644499,"question_id":34158634,"body_markdown":"If you&#39;re willing to use a third party library and don&#39;t need parallelism, then [jOOλ][1] offers SQL-style window functions as follows\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    int n = 2;\r\n\r\n    System.out.println(\r\n    Seq.of(1, 2, 3, 4)\r\n       .window(0, n - 1)\r\n       .filter(w -&gt; w.count() == n)\r\n       .map(w -&gt; w.window().toList())\r\n       .toList()\r\n    );\r\n \r\nyielding\r\n\r\n&lt;!-- language: lang-none --&gt;\r\n\r\n    [[1, 2], [2, 3], [3, 4]]\r\n\r\nAnd\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    int n = 3;\r\n\r\n    System.out.println(\r\n    Seq.of(1, 2, 3, 4)\r\n       .window(0, n - 1)\r\n       .filter(w -&gt; w.count() == n)\r\n       .map(w -&gt; w.window().toList())\r\n       .toList()\r\n    );\r\n\r\nyielding\r\n\r\n&lt;!-- language: lang-none --&gt;\r\n\r\n    [[1, 2, 3], [2, 3, 4]]\r\n\r\n[Here&#39;s a blog post about how this works][2].\r\n\r\nDisclaimer: I work for the company behind jOOλ\r\n\r\n\r\n  [1]: https://github.com/jOOQ/jOOL\r\n  [2]: https://blog.jooq.org/2016/01/06/2016-will-be-the-year-remembered-as-when-java-finally-had-window-functions/","title":"How to transform a Java stream into a sliding window?","body":"<p>If you're willing to use a third party library and don't need parallelism, then <a href=\"https://github.com/jOOQ/jOOL\" rel=\"nofollow noreferrer\">jOOλ</a> offers SQL-style window functions as follows</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>int n = 2;\n\nSystem.out.println(\nSeq.of(1, 2, 3, 4)\n   .window(0, n - 1)\n   .filter(w -&gt; w.count() == n)\n   .map(w -&gt; w.window().toList())\n   .toList()\n);\n</code></pre>\n\n<p>yielding</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>[[1, 2], [2, 3], [3, 4]]\n</code></pre>\n\n<p>And</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>int n = 3;\n\nSystem.out.println(\nSeq.of(1, 2, 3, 4)\n   .window(0, n - 1)\n   .filter(w -&gt; w.count() == n)\n   .map(w -&gt; w.window().toList())\n   .toList()\n);\n</code></pre>\n\n<p>yielding</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>[[1, 2, 3], [2, 3, 4]]\n</code></pre>\n\n<p><a href=\"https://blog.jooq.org/2016/01/06/2016-will-be-the-year-remembered-as-when-java-finally-had-window-functions/\" rel=\"nofollow noreferrer\">Here's a blog post about how this works</a>.</p>\n\n<p>Disclaimer: I work for the company behind jOOλ</p>\n"},{"tags":[],"owner":{"account_id":5914036,"reputation":5245,"user_id":4653367,"display_name":"John McClean"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1462354689,"creation_date":1452469400,"answer_id":34712153,"question_id":34158634,"body_markdown":"Another  option [cyclops-react][1] builds on top of  jOOλ&#39;s Seq interface (and JDK 8 Stream), but simple-react builds concurrency / parallelism back in (if that is important to you - by creating Streams of Futures).\r\n\r\nYou can use Lukas&#39;s powerful windowing functions with either library (as we extend the awesome jOOλ) , but there is also a sliding operator, that I think simplifies things in this case and is suitable for use in infinite streams (i.e. it doesn&#39;t consume the stream, but buffers values as they flow through).\r\n\r\nWith [ReactiveSeq](http://static.javadoc.io/com.aol.simplereact/cyclops-react/1.0.0-RC1/com/aol/cyclops/control/ReactiveSeq.html) it would look something like this -\r\n \r\n    ReactiveSeq.of(1, 2, 3, 4)\r\n               .sliding(2)\r\n               .forEach(System.out::println);\r\n\r\nWith [LazyFutureStream](http://static.javadoc.io/com.aol.simplereact/cyclops-react/1.0.0-RC1/com/aol/cyclops/types/futurestream/LazyFutureStream.html)  could look something like the example below -\r\n\r\n\r\n     LazyFutureStream.iterate(1,i-&gt;i+1)\r\n                     .sliding(3,2) //lists of 3, increment 2\r\n                     .forEach(System.out::println);\r\n\r\n\r\nEquivalant static methods for creating a sliding view over java.util.stream.Stream are also provided in cyclops-streams [StreamUtils][2] class.\r\n\r\n           StreamUtils.sliding(Stream.of(1,2,3,4),2)\r\n                      .map(Pair::new);\r\n\r\nIf you would like to work directly with each sliding view, you can make use of the slidingT operator which returns a List Transformer. For example to add a number to each element in each sliding view, then reduce each sliding window to the sum of it&#39;s elements we can do :-\r\n\r\n            ReactiveSeq&lt;Integer&gt; windowsSummed = ReactiveSeq.fromIterable(data)\r\n\t\t\t\t   \t\t\t\t\t\t\t\t\t\t    .slidingT(3)\r\n\t\t\t\t   \t\t\t\t\t\t\t\t\t        .map(a-&gt;a+toAdd)\r\n\t\t\t\t   \t\t\t\t\t\t\t\t\t        .reduce(0,(a,b)-&gt;a+b)\r\n\t\t\t\t   \t\t\t\t\t\t\t\t\t        .stream();\r\n\r\n\r\nDisclaimer: I work for the company behind cyclops-react\r\n\r\n\r\n  [1]: https://github.com/aol/cyclops-react\r\n  [2]: http://static.javadoc.io/com.aol.simplereact/cyclops-react/1.0.0-RC1/com/aol/cyclops/util/stream/StreamUtils.html","title":"How to transform a Java stream into a sliding window?","body":"<p>Another  option <a href=\"https://github.com/aol/cyclops-react\" rel=\"nofollow\">cyclops-react</a> builds on top of  jOOλ's Seq interface (and JDK 8 Stream), but simple-react builds concurrency / parallelism back in (if that is important to you - by creating Streams of Futures).</p>\n\n<p>You can use Lukas's powerful windowing functions with either library (as we extend the awesome jOOλ) , but there is also a sliding operator, that I think simplifies things in this case and is suitable for use in infinite streams (i.e. it doesn't consume the stream, but buffers values as they flow through).</p>\n\n<p>With <a href=\"http://static.javadoc.io/com.aol.simplereact/cyclops-react/1.0.0-RC1/com/aol/cyclops/control/ReactiveSeq.html\" rel=\"nofollow\">ReactiveSeq</a> it would look something like this -</p>\n\n<pre><code>ReactiveSeq.of(1, 2, 3, 4)\n           .sliding(2)\n           .forEach(System.out::println);\n</code></pre>\n\n<p>With <a href=\"http://static.javadoc.io/com.aol.simplereact/cyclops-react/1.0.0-RC1/com/aol/cyclops/types/futurestream/LazyFutureStream.html\" rel=\"nofollow\">LazyFutureStream</a>  could look something like the example below -</p>\n\n<pre><code> LazyFutureStream.iterate(1,i-&gt;i+1)\n                 .sliding(3,2) //lists of 3, increment 2\n                 .forEach(System.out::println);\n</code></pre>\n\n<p>Equivalant static methods for creating a sliding view over java.util.stream.Stream are also provided in cyclops-streams <a href=\"http://static.javadoc.io/com.aol.simplereact/cyclops-react/1.0.0-RC1/com/aol/cyclops/util/stream/StreamUtils.html\" rel=\"nofollow\">StreamUtils</a> class.</p>\n\n<pre><code>       StreamUtils.sliding(Stream.of(1,2,3,4),2)\n                  .map(Pair::new);\n</code></pre>\n\n<p>If you would like to work directly with each sliding view, you can make use of the slidingT operator which returns a List Transformer. For example to add a number to each element in each sliding view, then reduce each sliding window to the sum of it's elements we can do :-</p>\n\n<pre><code>        ReactiveSeq&lt;Integer&gt; windowsSummed = ReactiveSeq.fromIterable(data)\n                                                        .slidingT(3)\n                                                        .map(a-&gt;a+toAdd)\n                                                        .reduce(0,(a,b)-&gt;a+b)\n                                                        .stream();\n</code></pre>\n\n<p>Disclaimer: I work for the company behind cyclops-react</p>\n"},{"tags":[],"owner":{"account_id":1122893,"reputation":2272,"user_id":1110815,"display_name":"Daniel Dietrich"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1638791054,"creation_date":1489318348,"answer_id":42746881,"question_id":34158634,"body_markdown":"if you want to bring the whole power of Scala&#39;s persistent collections to Java, you may use the library [Vavr](https://www.vavr.io/), formerly called Javaslang.\r\n\r\n    // this imports List, Stream, Iterator, ...\r\n    import io.vavr.collection.*;\r\n    \r\n    Iterator.range(1, 5).sliding(3)\r\n            .forEach(System.out::println);\r\n    // ---&gt;\r\n    // List(1, 2, 3)\r\n    // List(2, 3, 4)\r\n    \r\n    Iterator.range(1, 5).sliding(2, 3)\r\n            .forEach(System.out::println);\r\n    // ---&gt;\r\n    // List(1, 2)\r\n    // List(4)\r\n    \r\n    Iterator.ofAll(javaStream).sliding(3);\r\n    \r\nYou may not only use Iterator, this also works for almost any other Vavr collection: Array, Vector, List, Stream, Queue, HashSet, LinkedHashSet, TreeSet, ...\r\n\r\n[![Overview Javaslang 2.1.0-alpha][1]][1]\r\n\r\n(Overview Javaslang 2.1.0-alpha)\r\n\r\nDisclaimer: I&#39;m the creator of Vavr, formerly called Javaslang.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Kl611.png","title":"How to transform a Java stream into a sliding window?","body":"<p>if you want to bring the whole power of Scala's persistent collections to Java, you may use the library <a href=\"https://www.vavr.io/\" rel=\"nofollow noreferrer\">Vavr</a>, formerly called Javaslang.</p>\n<pre><code>// this imports List, Stream, Iterator, ...\nimport io.vavr.collection.*;\n\nIterator.range(1, 5).sliding(3)\n        .forEach(System.out::println);\n// ---&gt;\n// List(1, 2, 3)\n// List(2, 3, 4)\n\nIterator.range(1, 5).sliding(2, 3)\n        .forEach(System.out::println);\n// ---&gt;\n// List(1, 2)\n// List(4)\n\nIterator.ofAll(javaStream).sliding(3);\n</code></pre>\n<p>You may not only use Iterator, this also works for almost any other Vavr collection: Array, Vector, List, Stream, Queue, HashSet, LinkedHashSet, TreeSet, ...</p>\n<p><a href=\"https://i.stack.imgur.com/Kl611.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Kl611.png\" alt=\"Overview Javaslang 2.1.0-alpha\" /></a></p>\n<p>(Overview Javaslang 2.1.0-alpha)</p>\n<p>Disclaimer: I'm the creator of Vavr, formerly called Javaslang.</p>\n"},{"tags":[],"owner":{"account_id":910510,"reputation":699,"user_id":944479,"display_name":"tmucha"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1532327025,"creation_date":1532327025,"answer_id":51472672,"question_id":34158634,"body_markdown":"I found solution on Tomek&#39;s Nurkiewicz blog (https://www.nurkiewicz.com/2014/07/grouping-sampling-and-batching-custom.html). Below ```SlidingCollector``` which you can use:\r\n\r\n    public class SlidingCollector&lt;T&gt; implements Collector&lt;T, List&lt;List&lt;T&gt;&gt;, List&lt;List&lt;T&gt;&gt;&gt; {\r\n     \r\n        private final int size;\r\n        private final int step;\r\n        private final int window;\r\n        private final Queue&lt;T&gt; buffer = new ArrayDeque&lt;&gt;();\r\n        private int totalIn = 0;\r\n     \r\n        public SlidingCollector(int size, int step) {\r\n            this.size = size;\r\n            this.step = step;\r\n            this.window = max(size, step);\r\n        }\r\n     \r\n        @Override\r\n        public Supplier&lt;List&lt;List&lt;T&gt;&gt;&gt; supplier() {\r\n            return ArrayList::new;\r\n        }\r\n     \r\n        @Override\r\n        public BiConsumer&lt;List&lt;List&lt;T&gt;&gt;, T&gt; accumulator() {\r\n            return (lists, t) -&gt; {\r\n                buffer.offer(t);\r\n                ++totalIn;\r\n                if (buffer.size() == window) {\r\n                    dumpCurrent(lists);\r\n                    shiftBy(step);\r\n                }\r\n            };\r\n        }\r\n     \r\n        @Override\r\n        public Function&lt;List&lt;List&lt;T&gt;&gt;, List&lt;List&lt;T&gt;&gt;&gt; finisher() {\r\n            return lists -&gt; {\r\n                if (!buffer.isEmpty()) {\r\n                    final int totalOut = estimateTotalOut();\r\n                    if (totalOut &gt; lists.size()) {\r\n                        dumpCurrent(lists);\r\n                    }\r\n                }\r\n                return lists;\r\n            };\r\n        }\r\n     \r\n        private int estimateTotalOut() {\r\n            return max(0, (totalIn + step - size - 1) / step) + 1;\r\n        }\r\n     \r\n        private void dumpCurrent(List&lt;List&lt;T&gt;&gt; lists) {\r\n            final List&lt;T&gt; batch = buffer.stream().limit(size).collect(toList());\r\n            lists.add(batch);\r\n        }\r\n     \r\n        private void shiftBy(int by) {\r\n            for (int i = 0; i &lt; by; i++) {\r\n                buffer.remove();\r\n            }\r\n        }\r\n     \r\n        @Override\r\n        public BinaryOperator&lt;List&lt;List&lt;T&gt;&gt;&gt; combiner() {\r\n            return (l1, l2) -&gt; {\r\n                throw new UnsupportedOperationException(&quot;Combining not possible&quot;);\r\n            };\r\n        }\r\n     \r\n        @Override\r\n        public Set&lt;Characteristics&gt; characteristics() {\r\n            return EnumSet.noneOf(Characteristics.class);\r\n        }\r\n     \r\n    }\r\n\r\nBelow some example by Tomekin Spock (I hope it is readable):\r\n\r\n    import static com.nurkiewicz.CustomCollectors.sliding\r\n     \r\n    @Unroll\r\n    class CustomCollectorsSpec extends Specification {\r\n     \r\n        def &quot;Sliding window of #input with size #size and step of 1 is #output&quot;() {\r\n            expect:\r\n            input.stream().collect(sliding(size)) == output\r\n     \r\n            where:\r\n            input  | size | output\r\n            []     | 5    | []\r\n            [1]    | 1    | [[1]]\r\n            [1, 2] | 1    | [[1], [2]]\r\n            [1, 2] | 2    | [[1, 2]]\r\n            [1, 2] | 3    | [[1, 2]]\r\n            1..3   | 3    | [[1, 2, 3]]\r\n            1..4   | 2    | [[1, 2], [2, 3], [3, 4]]\r\n            1..4   | 3    | [[1, 2, 3], [2, 3, 4]]\r\n            1..7   | 3    | [[1, 2, 3], [2, 3, 4], [3, 4, 5], [4, 5, 6], [5, 6, 7]]\r\n            1..7   | 6    | [1..6, 2..7]\r\n        }\r\n     \r\n        def &quot;Sliding window of #input with size #size and no overlapping is #output&quot;() {\r\n            expect:\r\n            input.stream().collect(sliding(size, size)) == output\r\n     \r\n            where:\r\n            input | size | output\r\n            []    | 5    | []\r\n            1..3  | 2    | [[1, 2], [3]]\r\n            1..4  | 4    | [1..4]\r\n            1..4  | 5    | [1..4]\r\n            1..7  | 3    | [1..3, 4..6, [7]]\r\n            1..6  | 2    | [[1, 2], [3, 4], [5, 6]]\r\n        }\r\n     \r\n        def &quot;Sliding window of #input with size #size and some overlapping is #output&quot;() {\r\n            expect:\r\n            input.stream().collect(sliding(size, 2)) == output\r\n     \r\n            where:\r\n            input | size | output\r\n            []    | 5    | []\r\n            1..4  | 5    | [[1, 2, 3, 4]]\r\n            1..7  | 3    | [1..3, 3..5, 5..7]\r\n            1..6  | 4    | [1..4, 3..6]\r\n            1..9  | 4    | [1..4, 3..6, 5..8, 7..9]\r\n            1..10 | 4    | [1..4, 3..6, 5..8, 7..10]\r\n            1..11 | 4    | [1..4, 3..6, 5..8, 7..10, 9..11]\r\n        }\r\n     \r\n        def &quot;Sliding window of #input with size #size and gap of #gap is #output&quot;() {\r\n            expect:\r\n            input.stream().collect(sliding(size, size + gap)) == output\r\n     \r\n            where:\r\n            input | size | gap | output\r\n            []    | 5    | 1   | []\r\n            1..9  | 4    | 2   | [1..4, 7..9]\r\n            1..10 | 4    | 2   | [1..4, 7..10]\r\n            1..11 | 4    | 2   | [1..4, 7..10]\r\n            1..12 | 4    | 2   | [1..4, 7..10]\r\n            1..13 | 4    | 2   | [1..4, 7..10, [13]]\r\n            1..13 | 5    | 1   | [1..5, 7..11, [13]]\r\n            1..12 | 5    | 3   | [1..5, 9..12]\r\n            1..13 | 5    | 3   | [1..5, 9..13]\r\n        }\r\n     \r\n        def &quot;Sampling #input taking every #nth th element is #output&quot;() {\r\n            expect:\r\n            input.stream().collect(sliding(1, nth)) == output\r\n     \r\n            where:\r\n            input  | nth | output\r\n            []     | 1   | []\r\n            []     | 5   | []\r\n            1..3   | 5   | [[1]]\r\n            1..6   | 2   | [[1], [3], [5]]\r\n            1..10  | 5   | [[1], [6]]\r\n            1..100 | 30  | [[1], [31], [61], [91]]\r\n        }\r\n    }","title":"How to transform a Java stream into a sliding window?","body":"<p>I found solution on Tomek's Nurkiewicz blog (<a href=\"https://www.nurkiewicz.com/2014/07/grouping-sampling-and-batching-custom.html\" rel=\"nofollow noreferrer\">https://www.nurkiewicz.com/2014/07/grouping-sampling-and-batching-custom.html</a>). Below <code>SlidingCollector</code> which you can use:</p>\n\n<pre><code>public class SlidingCollector&lt;T&gt; implements Collector&lt;T, List&lt;List&lt;T&gt;&gt;, List&lt;List&lt;T&gt;&gt;&gt; {\n\n    private final int size;\n    private final int step;\n    private final int window;\n    private final Queue&lt;T&gt; buffer = new ArrayDeque&lt;&gt;();\n    private int totalIn = 0;\n\n    public SlidingCollector(int size, int step) {\n        this.size = size;\n        this.step = step;\n        this.window = max(size, step);\n    }\n\n    @Override\n    public Supplier&lt;List&lt;List&lt;T&gt;&gt;&gt; supplier() {\n        return ArrayList::new;\n    }\n\n    @Override\n    public BiConsumer&lt;List&lt;List&lt;T&gt;&gt;, T&gt; accumulator() {\n        return (lists, t) -&gt; {\n            buffer.offer(t);\n            ++totalIn;\n            if (buffer.size() == window) {\n                dumpCurrent(lists);\n                shiftBy(step);\n            }\n        };\n    }\n\n    @Override\n    public Function&lt;List&lt;List&lt;T&gt;&gt;, List&lt;List&lt;T&gt;&gt;&gt; finisher() {\n        return lists -&gt; {\n            if (!buffer.isEmpty()) {\n                final int totalOut = estimateTotalOut();\n                if (totalOut &gt; lists.size()) {\n                    dumpCurrent(lists);\n                }\n            }\n            return lists;\n        };\n    }\n\n    private int estimateTotalOut() {\n        return max(0, (totalIn + step - size - 1) / step) + 1;\n    }\n\n    private void dumpCurrent(List&lt;List&lt;T&gt;&gt; lists) {\n        final List&lt;T&gt; batch = buffer.stream().limit(size).collect(toList());\n        lists.add(batch);\n    }\n\n    private void shiftBy(int by) {\n        for (int i = 0; i &lt; by; i++) {\n            buffer.remove();\n        }\n    }\n\n    @Override\n    public BinaryOperator&lt;List&lt;List&lt;T&gt;&gt;&gt; combiner() {\n        return (l1, l2) -&gt; {\n            throw new UnsupportedOperationException(\"Combining not possible\");\n        };\n    }\n\n    @Override\n    public Set&lt;Characteristics&gt; characteristics() {\n        return EnumSet.noneOf(Characteristics.class);\n    }\n\n}\n</code></pre>\n\n<p>Below some example by Tomekin Spock (I hope it is readable):</p>\n\n<pre><code>import static com.nurkiewicz.CustomCollectors.sliding\n\n@Unroll\nclass CustomCollectorsSpec extends Specification {\n\n    def \"Sliding window of #input with size #size and step of 1 is #output\"() {\n        expect:\n        input.stream().collect(sliding(size)) == output\n\n        where:\n        input  | size | output\n        []     | 5    | []\n        [1]    | 1    | [[1]]\n        [1, 2] | 1    | [[1], [2]]\n        [1, 2] | 2    | [[1, 2]]\n        [1, 2] | 3    | [[1, 2]]\n        1..3   | 3    | [[1, 2, 3]]\n        1..4   | 2    | [[1, 2], [2, 3], [3, 4]]\n        1..4   | 3    | [[1, 2, 3], [2, 3, 4]]\n        1..7   | 3    | [[1, 2, 3], [2, 3, 4], [3, 4, 5], [4, 5, 6], [5, 6, 7]]\n        1..7   | 6    | [1..6, 2..7]\n    }\n\n    def \"Sliding window of #input with size #size and no overlapping is #output\"() {\n        expect:\n        input.stream().collect(sliding(size, size)) == output\n\n        where:\n        input | size | output\n        []    | 5    | []\n        1..3  | 2    | [[1, 2], [3]]\n        1..4  | 4    | [1..4]\n        1..4  | 5    | [1..4]\n        1..7  | 3    | [1..3, 4..6, [7]]\n        1..6  | 2    | [[1, 2], [3, 4], [5, 6]]\n    }\n\n    def \"Sliding window of #input with size #size and some overlapping is #output\"() {\n        expect:\n        input.stream().collect(sliding(size, 2)) == output\n\n        where:\n        input | size | output\n        []    | 5    | []\n        1..4  | 5    | [[1, 2, 3, 4]]\n        1..7  | 3    | [1..3, 3..5, 5..7]\n        1..6  | 4    | [1..4, 3..6]\n        1..9  | 4    | [1..4, 3..6, 5..8, 7..9]\n        1..10 | 4    | [1..4, 3..6, 5..8, 7..10]\n        1..11 | 4    | [1..4, 3..6, 5..8, 7..10, 9..11]\n    }\n\n    def \"Sliding window of #input with size #size and gap of #gap is #output\"() {\n        expect:\n        input.stream().collect(sliding(size, size + gap)) == output\n\n        where:\n        input | size | gap | output\n        []    | 5    | 1   | []\n        1..9  | 4    | 2   | [1..4, 7..9]\n        1..10 | 4    | 2   | [1..4, 7..10]\n        1..11 | 4    | 2   | [1..4, 7..10]\n        1..12 | 4    | 2   | [1..4, 7..10]\n        1..13 | 4    | 2   | [1..4, 7..10, [13]]\n        1..13 | 5    | 1   | [1..5, 7..11, [13]]\n        1..12 | 5    | 3   | [1..5, 9..12]\n        1..13 | 5    | 3   | [1..5, 9..13]\n    }\n\n    def \"Sampling #input taking every #nth th element is #output\"() {\n        expect:\n        input.stream().collect(sliding(1, nth)) == output\n\n        where:\n        input  | nth | output\n        []     | 1   | []\n        []     | 5   | []\n        1..3   | 5   | [[1]]\n        1..6   | 2   | [[1], [3], [5]]\n        1..10  | 5   | [[1], [6]]\n        1..100 | 30  | [[1], [31], [61], [91]]\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2570598,"reputation":13282,"user_id":2229438,"accept_rate":94,"display_name":"Grzegorz Piwowarek"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1536168520,"creation_date":1536168520,"answer_id":52190573,"question_id":34158634,"body_markdown":"Another option would be to implement a custom Spliterator just like it was done [here][1]:   \r\n\r\n\r\n    import java.util.*;\r\n\r\n    public class SlidingWindowSpliterator&lt;T&gt; implements Spliterator&lt;Stream&lt;T&gt;&gt; {\r\n\r\n        static &lt;T&gt; Stream&lt;Stream&lt;T&gt;&gt; windowed(Collection&lt;T&gt; stream, int windowSize) {\r\n            return StreamSupport.stream(\r\n              new SlidingWindowSpliterator&lt;&gt;(stream, windowSize), false);\r\n        }\r\n\r\n        private final Queue&lt;T&gt; buffer;\r\n        private final Iterator&lt;T&gt; sourceIterator;\r\n        private final int windowSize;\r\n        private final int size;\r\n\r\n        private SlidingWindowSpliterator(Collection&lt;T&gt; source, int windowSize) {\r\n            this.buffer = new ArrayDeque&lt;&gt;(windowSize);\r\n            this.sourceIterator = Objects.requireNonNull(source).iterator();\r\n            this.windowSize = windowSize;\r\n            this.size = calculateSize(source, windowSize);\r\n        }\r\n\r\n        @Override\r\n        public boolean tryAdvance(Consumer&lt;? super Stream&lt;T&gt;&gt; action) {\r\n            if (windowSize &lt; 1) {\r\n                return false;\r\n            }\r\n\r\n            while (sourceIterator.hasNext()) {\r\n                buffer.add(sourceIterator.next());\r\n\r\n                if (buffer.size() == windowSize) {\r\n                    action.accept(Arrays.stream((T[]) buffer.toArray(new Object[0])));\r\n                    buffer.poll();\r\n                    return sourceIterator.hasNext();\r\n                }\r\n            }\r\n\r\n            return false;\r\n        }\r\n\r\n        @Override\r\n        public Spliterator&lt;Stream&lt;T&gt;&gt; trySplit() {\r\n            return null;\r\n        }\r\n\r\n        @Override\r\n        public long estimateSize() {\r\n           return size;\r\n        }\r\n\r\n        @Override\r\n        public int characteristics() {\r\n            return ORDERED | NONNULL | SIZED;\r\n        }\r\n\r\n        private static int calculateSize(Collection&lt;?&gt; source, int windowSize) {\r\n            return source.size() &lt; windowSize\r\n              ? 0\r\n              : source.size() - windowSize + 1;\r\n        }\r\n    }\r\n\r\n\r\n  [1]: https://4comprehension.com/sliding-window-stream-spliterator-in-java/","title":"How to transform a Java stream into a sliding window?","body":"<p>Another option would be to implement a custom Spliterator just like it was done <a href=\"https://4comprehension.com/sliding-window-stream-spliterator-in-java/\" rel=\"nofollow noreferrer\">here</a>:   </p>\n\n<pre><code>import java.util.*;\n\npublic class SlidingWindowSpliterator&lt;T&gt; implements Spliterator&lt;Stream&lt;T&gt;&gt; {\n\n    static &lt;T&gt; Stream&lt;Stream&lt;T&gt;&gt; windowed(Collection&lt;T&gt; stream, int windowSize) {\n        return StreamSupport.stream(\n          new SlidingWindowSpliterator&lt;&gt;(stream, windowSize), false);\n    }\n\n    private final Queue&lt;T&gt; buffer;\n    private final Iterator&lt;T&gt; sourceIterator;\n    private final int windowSize;\n    private final int size;\n\n    private SlidingWindowSpliterator(Collection&lt;T&gt; source, int windowSize) {\n        this.buffer = new ArrayDeque&lt;&gt;(windowSize);\n        this.sourceIterator = Objects.requireNonNull(source).iterator();\n        this.windowSize = windowSize;\n        this.size = calculateSize(source, windowSize);\n    }\n\n    @Override\n    public boolean tryAdvance(Consumer&lt;? super Stream&lt;T&gt;&gt; action) {\n        if (windowSize &lt; 1) {\n            return false;\n        }\n\n        while (sourceIterator.hasNext()) {\n            buffer.add(sourceIterator.next());\n\n            if (buffer.size() == windowSize) {\n                action.accept(Arrays.stream((T[]) buffer.toArray(new Object[0])));\n                buffer.poll();\n                return sourceIterator.hasNext();\n            }\n        }\n\n        return false;\n    }\n\n    @Override\n    public Spliterator&lt;Stream&lt;T&gt;&gt; trySplit() {\n        return null;\n    }\n\n    @Override\n    public long estimateSize() {\n       return size;\n    }\n\n    @Override\n    public int characteristics() {\n        return ORDERED | NONNULL | SIZED;\n    }\n\n    private static int calculateSize(Collection&lt;?&gt; source, int windowSize) {\n        return source.size() &lt; windowSize\n          ? 0\n          : source.size() - windowSize + 1;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2551718,"reputation":245,"user_id":2215344,"accept_rate":50,"display_name":"William Papsco"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1643511941,"creation_date":1643511941,"answer_id":70911507,"question_id":34158634,"body_markdown":"Not really sure if this is &quot;safe&quot; or &quot;good&quot; but maybe you guys let me know.\r\n\r\n```java\r\npublic static &lt;T&gt; Stream&lt;List&lt;T&gt;&gt; sliding(Stream&lt;T&gt; stream, int window) {\r\n    Queue&lt;T&gt; queue = new LinkedList&lt;&gt;();\r\n    return stream.dropWhile(item -&gt; {\r\n        if (queue.size() &lt; window - 1) {\r\n            queue.add(item);\r\n            return true;\r\n        }\r\n        return false;\r\n    }).map(item -&gt; {\r\n        queue.add(item);\r\n        List&lt;T&gt; ret = queue.stream().toList();\r\n        queue.remove();\r\n        return ret;\r\n    });\r\n}\r\n\r\npublic static void main(String[] args) {\r\n    sliding(Stream.of(1, 2, 3, 4, 5, 6, 7), 3).forEach(x -&gt; System.out.println(x));\r\n}\r\n```\r\n```\r\n[1, 2, 3]\r\n[2, 3, 4]\r\n[3, 4, 5]\r\n[4, 5, 6]\r\n[5, 6, 7]\r\n```","title":"How to transform a Java stream into a sliding window?","body":"<p>Not really sure if this is &quot;safe&quot; or &quot;good&quot; but maybe you guys let me know.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static &lt;T&gt; Stream&lt;List&lt;T&gt;&gt; sliding(Stream&lt;T&gt; stream, int window) {\n    Queue&lt;T&gt; queue = new LinkedList&lt;&gt;();\n    return stream.dropWhile(item -&gt; {\n        if (queue.size() &lt; window - 1) {\n            queue.add(item);\n            return true;\n        }\n        return false;\n    }).map(item -&gt; {\n        queue.add(item);\n        List&lt;T&gt; ret = queue.stream().toList();\n        queue.remove();\n        return ret;\n    });\n}\n\npublic static void main(String[] args) {\n    sliding(Stream.of(1, 2, 3, 4, 5, 6, 7), 3).forEach(x -&gt; System.out.println(x));\n}\n</code></pre>\n<pre><code>[1, 2, 3]\n[2, 3, 4]\n[3, 4, 5]\n[4, 5, 6]\n[5, 6, 7]\n</code></pre>\n"}],"owner":{"account_id":411202,"reputation":41987,"user_id":783510,"accept_rate":91,"display_name":"Philipp Cla&#223;en"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":17722,"favorite_count":0,"down_vote_count":0,"up_vote_count":33,"accepted_answer_id":34159174,"answer_count":7,"score":33,"last_activity_date":1643511941,"creation_date":1449585523,"question_id":34158634,"body_markdown":"What is the recommended way to transform a stream into a sliding window?\r\n\r\nFor instance, in Ruby you could use [each_cons][1]:\r\n\r\n    irb(main):020:0&gt; [1,2,3,4].each_cons(2) { |x| puts x.inspect }\r\n    [1, 2]\r\n    [2, 3]\r\n    [3, 4]\r\n    =&gt; nil\r\n    irb(main):021:0&gt; [1,2,3,4].each_cons(3) { |x| puts x.inspect }\r\n    [1, 2, 3]\r\n    [2, 3, 4]\r\n    =&gt; nil\r\n\r\n\r\nIn Guava, I found only [Iterators#partition][2], which is related but no sliding window:\r\n\r\n    final Iterator&lt;List&lt;Integer&gt;&gt; partition =\r\n       Iterators.partition(IntStream.range(1, 5).iterator(), 3);\r\n    partition.forEachRemaining(System.out::println);\r\n    --&gt;\r\n    [1, 2, 3]\r\n    [4]\r\n\r\n\r\n\r\n  [1]: http://ruby-doc.org/core-2.2.3/Enumerable.html#method-i-each_cons\r\n  [2]: http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/Iterators.html#partition(java.util.Iterator,%20int)\r\n","title":"How to transform a Java stream into a sliding window?","body":"<p>What is the recommended way to transform a stream into a sliding window?</p>\n\n<p>For instance, in Ruby you could use <a href=\"http://ruby-doc.org/core-2.2.3/Enumerable.html#method-i-each_cons\" rel=\"noreferrer\">each_cons</a>:</p>\n\n<pre><code>irb(main):020:0&gt; [1,2,3,4].each_cons(2) { |x| puts x.inspect }\n[1, 2]\n[2, 3]\n[3, 4]\n=&gt; nil\nirb(main):021:0&gt; [1,2,3,4].each_cons(3) { |x| puts x.inspect }\n[1, 2, 3]\n[2, 3, 4]\n=&gt; nil\n</code></pre>\n\n<p>In Guava, I found only <a href=\"http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/Iterators.html#partition(java.util.Iterator,%20int)\" rel=\"noreferrer\">Iterators#partition</a>, which is related but no sliding window:</p>\n\n<pre><code>final Iterator&lt;List&lt;Integer&gt;&gt; partition =\n   Iterators.partition(IntStream.range(1, 5).iterator(), 3);\npartition.forEachRemaining(System.out::println);\n--&gt;\n[1, 2, 3]\n[4]\n</code></pre>\n"},{"tags":["java","methods","enums"],"answers":[{"tags":[],"owner":{"account_id":83160,"reputation":5081,"user_id":233347,"accept_rate":87,"display_name":"prashant thakre"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1643481074,"creation_date":1643480702,"answer_id":70908450,"question_id":70908412,"body_markdown":"You can try this :\r\n```Java\r\npublic enum SalaryHeadMasterEnum {\r\n\r\n    BASIC_PAY(&quot;basic pay&quot;),\r\n    MEDICAL_ALLOWANCE(&quot;Medical Allowance&quot;);\r\n\r\n    private String name;\r\n\r\n    private SalaryHeadMasterEnum(String stringVal) {\r\n        name=stringVal;\r\n    }\r\n    public String toString(){\r\n        return name;\r\n    }\r\n\r\n    public static String getEnumByString(String code){\r\n        for(SalaryHeadMasterEnum e : SalaryHeadMasterEnum.values()){\r\n            if(e.name.equals(code)) return e.name();\r\n        }\r\n        return null;\r\n    }\r\n}\r\n```\r\nNow you can use below code to retrieve the Enum by Value\r\n\r\n    SalaryHeadMasterEnum.getEnumByString(&quot;Basic Pay&quot;)\r\n\r\nUse Below code to get ENUM as String\r\n\r\n    SalaryHeadMasterEnum.BASIC_PAY.name()\r\n\r\nUse below code to get string Value for enum\r\n\r\n    SalaryHeadMasterEnum.BASIC_PAY.toString()","title":"Calling methods java","body":"<p>You can try this :</p>\n<pre><code>public enum SalaryHeadMasterEnum {\n\n    BASIC_PAY(&quot;basic pay&quot;),\n    MEDICAL_ALLOWANCE(&quot;Medical Allowance&quot;);\n\n    private String name;\n\n    private SalaryHeadMasterEnum(String stringVal) {\n        name=stringVal;\n    }\n    public String toString(){\n        return name;\n    }\n\n    public static String getEnumByString(String code){\n        for(SalaryHeadMasterEnum e : SalaryHeadMasterEnum.values()){\n            if(e.name.equals(code)) return e.name();\n        }\n        return null;\n    }\n}\n</code></pre>\n<p>Now you can use below code to retrieve the Enum by Value</p>\n<pre><code>SalaryHeadMasterEnum.getEnumByString(&quot;Basic Pay&quot;)\n</code></pre>\n<p>Use Below code to get ENUM as String</p>\n<pre><code>SalaryHeadMasterEnum.BASIC_PAY.name()\n</code></pre>\n<p>Use below code to get string Value for enum</p>\n<pre><code>SalaryHeadMasterEnum.BASIC_PAY.toString()\n</code></pre>\n"},{"tags":[],"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1643508588,"creation_date":1643508241,"answer_id":70911261,"question_id":70908412,"body_markdown":"The [Answer by thakre](https://stackoverflow.com/a/70908450/642706) is correct. I will restate to more directly address the specifics of the question. \r\n\r\n\r\n&gt; every enum must have specific fields, such as price,\r\n\r\nSo define your enum with such a field. \r\n\r\n    enum Flavor {\r\n        private BigDecimal price ;\r\n    }\r\n\r\nPass the value intended for that field to the constructor of each enum object.\r\n\r\n    enum Flavor {\r\n        // Enum objects. \r\n        VANILLA( 2 ) , CHOCOLATE( 2 ) , LAVENDER( 4 )\r\n        \r\n        // Member fields.\r\n        private int price ;\r\n\r\n        // Constructor.\r\n        public Flavor ( int price ) {\r\n            this.price = price ;\r\n        }\r\n    }\r\n\r\n&gt; I want to create a class to get this fields, what can I do in this situation?\r\n\r\nNo need for another class. Just add a getter method on the enum. \r\n\r\n    enum Flavor {\r\n        // Enum objects. \r\n        VANILLA( 2 ) , CHOCOLATE( 2 ) , LAVENDER( 4 )\r\n        \r\n        // Member fields.\r\n        private int price ;\r\n\r\n        // Constructor.\r\n        public Flavor ( int price ) {\r\n            this.price = price ;\r\n        }\r\n\r\n        // Getters. \r\n        public int getPrice() { return this.price ; } \r\n    }\r\n\r\n\r\nUsage:\r\n\r\n    int extendedCost = quantity * Flavor.VANILLA.getPrice() ; \r\n\r\n\r\n\r\n\r\n\r\n    \r\n","title":"Calling methods java","body":"<p>The <a href=\"https://stackoverflow.com/a/70908450/642706\">Answer by thakre</a> is correct. I will restate to more directly address the specifics of the question.</p>\n<blockquote>\n<p>every enum must have specific fields, such as price,</p>\n</blockquote>\n<p>So define your enum with such a field.</p>\n<pre><code>enum Flavor {\n    private BigDecimal price ;\n}\n</code></pre>\n<p>Pass the value intended for that field to the constructor of each enum object.</p>\n<pre><code>enum Flavor {\n    // Enum objects. \n    VANILLA( 2 ) , CHOCOLATE( 2 ) , LAVENDER( 4 )\n    \n    // Member fields.\n    private int price ;\n\n    // Constructor.\n    public Flavor ( int price ) {\n        this.price = price ;\n    }\n}\n</code></pre>\n<blockquote>\n<p>I want to create a class to get this fields, what can I do in this situation?</p>\n</blockquote>\n<p>No need for another class. Just add a getter method on the enum.</p>\n<pre><code>enum Flavor {\n    // Enum objects. \n    VANILLA( 2 ) , CHOCOLATE( 2 ) , LAVENDER( 4 )\n    \n    // Member fields.\n    private int price ;\n\n    // Constructor.\n    public Flavor ( int price ) {\n        this.price = price ;\n    }\n\n    // Getters. \n    public int getPrice() { return this.price ; } \n}\n</code></pre>\n<p>Usage:</p>\n<pre><code>int extendedCost = quantity * Flavor.VANILLA.getPrice() ; \n</code></pre>\n"}],"owner":{"display_name":"user17385654"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":74,"favorite_count":0,"down_vote_count":3,"up_vote_count":1,"answer_count":2,"score":-2,"last_activity_date":1643508588,"creation_date":1643480377,"question_id":70908412,"body_markdown":"I have a enum and every enum must have specific fields, such as price, which will not be modified, and I want to create a class to get this fields, what can I do in this situation? How can I call the class using the enums or what can I do?","title":"Calling methods java","body":"<p>I have a enum and every enum must have specific fields, such as price, which will not be modified, and I want to create a class to get this fields, what can I do in this situation? How can I call the class using the enums or what can I do?</p>\n"},{"tags":["java","multithreading","javafx"],"comments":[{"owner":{"account_id":1180113,"reputation":152325,"user_id":1155209,"display_name":"jewelsea"},"score":0,"creation_date":1643520865,"post_id":70911015,"comment_id":125359762,"body_markdown":"“I have a multithreading program” -&gt; why? “each thread has to store a value in a ThreadLocal variable” -&gt; why?","body":"“I have a multithreading program” -&gt; why? “each thread has to store a value in a ThreadLocal variable” -&gt; why?"}],"answers":[{"tags":[],"owner":{"account_id":24059439,"reputation":282,"user_id":18036868,"display_name":"HUTUTU"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1643505591,"creation_date":1643505591,"answer_id":70911102,"question_id":70911015,"body_markdown":"\r\nExecuting `display` is `Platform.runLater`, not `new Thread()`.I haven&#39;t used `Platform.runLater`, but I think it&#39;s a thread pool.","title":"Hello, I have a multithreading program , each thread has to store a value in a ThreadLocal variable, but the second one overwrite the content of the 1","body":"<p>Executing <code>display</code> is <code>Platform.runLater</code>, not <code>new Thread()</code>.I haven't used <code>Platform.runLater</code>, but I think it's a thread pool.</p>\n"},{"tags":[],"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1643505643,"creation_date":1643505643,"answer_id":70911108,"question_id":70911015,"body_markdown":"This is because [`Platform.runLater`][1] runs the provided `Runnable` on the JavaFX Application Thread, not the thread that calls it.\r\n\r\nDealing with multiple threads in a GUI application can be a little more complicated, because the GUI itself is usually single-threaded and unsafe to access from other threads. You can read a basic introduction to the concepts in this article: [&quot;Multithreading in JavaFX&quot;][2].\r\n\r\nBecause of this, it can be hard to reason about how thread local variables propagate in the application. It would be preferable to explicitly pass context as method parameters.\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/javafx/api/javafx/application/Platform.html#runLater-java.lang.Runnable-\r\n  [2]: https://www.developer.com/design/multithreading-in-javafx/","title":"Hello, I have a multithreading program , each thread has to store a value in a ThreadLocal variable, but the second one overwrite the content of the 1","body":"<p>This is because <a href=\"https://docs.oracle.com/javase/8/javafx/api/javafx/application/Platform.html#runLater-java.lang.Runnable-\" rel=\"noreferrer\"><code>Platform.runLater</code></a> runs the provided <code>Runnable</code> on the JavaFX Application Thread, not the thread that calls it.</p>\n<p>Dealing with multiple threads in a GUI application can be a little more complicated, because the GUI itself is usually single-threaded and unsafe to access from other threads. You can read a basic introduction to the concepts in this article: <a href=\"https://www.developer.com/design/multithreading-in-javafx/\" rel=\"noreferrer\">&quot;Multithreading in JavaFX&quot;</a>.</p>\n<p>Because of this, it can be hard to reason about how thread local variables propagate in the application. It would be preferable to explicitly pass context as method parameters.</p>\n"}],"owner":{"account_id":20338144,"reputation":27,"user_id":14918279,"display_name":"Lorenzo Ferretti"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":85,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"closed_date":1643568299,"answer_count":2,"score":-3,"last_activity_date":1643507754,"creation_date":1643504097,"question_id":70911015,"body_markdown":"I&#39;m trying to write this multithread program , but somethings goes wrong. \r\nI have an HelloApplication class , I create two new thread there. \r\n\r\nThe run method is in another Class named ThreadLocalSession. There I need to store two different value , one for each thread using a ThreadLocal Variable. \r\nThis way failed because the second thread overwrite the value written by the first one. \r\n\r\nFor this reason I tried to print the thread id and I noticed that the same Thread Id and thread name is printed two time ... \r\nHow is it possible ?\r\n\r\n\r\n\r\n\r\nThis is the HelloApplication class : \r\n\r\n    public class HelloApplication extends Application {\r\n\r\n    @Override\r\n    public void start(Stage stage) throws IOException {\r\n        ThreadLocalSession firstUser = new ThreadLocalSession(1);\r\n        ThreadLocalSession secondUser = new ThreadLocalSession(2);\r\n        new Thread(firstUser).start();\r\n        new Thread(secondUser).start();\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        launch();\r\n    }\r\n    }\r\n\r\n\r\nThis is the ThreadLocal session Class:\r\n\r\n    public class ThreadLocalSession implements Runnable{\r\n\r\n    private static final ThreadLocal&lt;Session&gt; usersession= new ThreadLocal&lt;Session&gt;();\r\n    private Integer tr_id;\r\n\r\n    public ThreadLocalSession(int i) {\r\n        this.tr_id =i;\r\n    }\r\n\r\n\r\n    @Override\r\n    public void run() {\r\n        Platform.runLater(() -&gt; {\r\n            try {\r\n                display();\r\n            } catch (IOException e) {\r\n                e.printStackTrace();\r\n            } catch (InterruptedException e) {\r\n                e.printStackTrace();\r\n            }\r\n        });\r\n\r\n       }\r\n\r\n     public static ThreadLocal&lt;Session&gt; getUsersession() {\r\n        return usersession;\r\n     }\r\n\r\n     private Runnable display() throws IOException, InterruptedException {\r\n        System.out.println(Thread.currentThread().getId());\r\n        System.out.println(Thread.currentThread().getName());\r\n        Scanner scanner = new Scanner(System.in);\r\n        System.out.println(&quot;inserisca messaggio : &quot;);\r\n        String str = scanner.nextLine();\r\n        Session session = new Session(str);\r\n\r\n        usersession.set(session);\r\n        System.out.println(usersession.get().getNamee());\r\n\r\n\r\n        Stage stage = new Stage();\r\n        FXMLLoader fxmlLoader = new  \r\n        FXMLLoader(ThreadLocalSession.class.getResource(&quot;hello-view.fxml&quot;));\r\n\r\n        Scene scene = new Scene(fxmlLoader.load());\r\n        stage.setTitle(&quot;Mate&quot;);\r\n        stage.setScene(scene);\r\n        stage.showAndWait();\r\n        return null;\r\n\r\n    }\r\n    }\r\n\r\n Then I want to print the value of the two value stored by the thread and display them where a button is pressed. \r\nThis is it&#39;s graphic controller : \r\n\r\n    public class HelloController {\r\n    @FXML\r\n    private Label welcomeText;\r\n\r\n    @FXML\r\n    protected void onHelloButtonClick() {\r\n       // System.out.println(userSession.get().);\r\n        Session se = ThreadLocalSession.getUsersession().get();\r\n        welcomeText.setText(&quot;Welcome to JavaFX Application!&quot;+ se.getNamee() +&quot;by&quot;);\r\n    }\r\n  }\r\n\r\n\r\n\r\n\r\n\r\nFinally this is the Session: \r\n\r\n\r\n\r\n``` \r\npublic class Session {\r\n    private String name;\r\n\r\n    public Session (String name ){\r\n        this.name = name ;\r\n    }\r\n\r\n    public void setNamee(String name) {\r\n        this.name = name;\r\n    }\r\n\r\n    public String getNamee() {\r\n        return name;\r\n    }\r\n\r\n}\r\n ```\r\n\r\n\r\nI don&#39;t know why the &#39;&#39;&#39; ThreadLocal&lt;Session&gt; userSession&#39;&#39;&#39; is overwrited , and why the same thread id is printed two different time in the run despite of i have lunched two different thread.","title":"Hello, I have a multithreading program , each thread has to store a value in a ThreadLocal variable, but the second one overwrite the content of the 1","body":"<p>I'm trying to write this multithread program , but somethings goes wrong.\nI have an HelloApplication class , I create two new thread there.</p>\n<p>The run method is in another Class named ThreadLocalSession. There I need to store two different value , one for each thread using a ThreadLocal Variable.\nThis way failed because the second thread overwrite the value written by the first one.</p>\n<p>For this reason I tried to print the thread id and I noticed that the same Thread Id and thread name is printed two time ...\nHow is it possible ?</p>\n<p>This is the HelloApplication class :</p>\n<pre><code>public class HelloApplication extends Application {\n\n@Override\npublic void start(Stage stage) throws IOException {\n    ThreadLocalSession firstUser = new ThreadLocalSession(1);\n    ThreadLocalSession secondUser = new ThreadLocalSession(2);\n    new Thread(firstUser).start();\n    new Thread(secondUser).start();\n}\n\npublic static void main(String[] args) {\n    launch();\n}\n}\n</code></pre>\n<p>This is the ThreadLocal session Class:</p>\n<pre><code>public class ThreadLocalSession implements Runnable{\n\nprivate static final ThreadLocal&lt;Session&gt; usersession= new ThreadLocal&lt;Session&gt;();\nprivate Integer tr_id;\n\npublic ThreadLocalSession(int i) {\n    this.tr_id =i;\n}\n\n\n@Override\npublic void run() {\n    Platform.runLater(() -&gt; {\n        try {\n            display();\n        } catch (IOException e) {\n            e.printStackTrace();\n        } catch (InterruptedException e) {\n            e.printStackTrace();\n        }\n    });\n\n   }\n\n public static ThreadLocal&lt;Session&gt; getUsersession() {\n    return usersession;\n }\n\n private Runnable display() throws IOException, InterruptedException {\n    System.out.println(Thread.currentThread().getId());\n    System.out.println(Thread.currentThread().getName());\n    Scanner scanner = new Scanner(System.in);\n    System.out.println(&quot;inserisca messaggio : &quot;);\n    String str = scanner.nextLine();\n    Session session = new Session(str);\n\n    usersession.set(session);\n    System.out.println(usersession.get().getNamee());\n\n\n    Stage stage = new Stage();\n    FXMLLoader fxmlLoader = new  \n    FXMLLoader(ThreadLocalSession.class.getResource(&quot;hello-view.fxml&quot;));\n\n    Scene scene = new Scene(fxmlLoader.load());\n    stage.setTitle(&quot;Mate&quot;);\n    stage.setScene(scene);\n    stage.showAndWait();\n    return null;\n\n}\n}\n</code></pre>\n<p>Then I want to print the value of the two value stored by the thread and display them where a button is pressed.\nThis is it's graphic controller :</p>\n<pre><code>public class HelloController {\n@FXML\nprivate Label welcomeText;\n\n@FXML\nprotected void onHelloButtonClick() {\n   // System.out.println(userSession.get().);\n    Session se = ThreadLocalSession.getUsersession().get();\n    welcomeText.setText(&quot;Welcome to JavaFX Application!&quot;+ se.getNamee() +&quot;by&quot;);\n}\n</code></pre>\n<p>}</p>\n<p>Finally this is the Session:</p>\n<pre><code>public class Session {\n    private String name;\n\n    public Session (String name ){\n        this.name = name ;\n    }\n\n    public void setNamee(String name) {\n        this.name = name;\n    }\n\n    public String getNamee() {\n        return name;\n    }\n\n}\n</code></pre>\n<p>I don't know why the ''' ThreadLocal userSession''' is overwrited , and why the same thread id is printed two different time in the run despite of i have lunched two different thread.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":956558,"reputation":30924,"user_id":981744,"display_name":"Erwin Bolwidt"},"score":6,"creation_date":1643506344,"post_id":70911135,"comment_id":125358172,"body_markdown":"`inputChar != &#39;Y&#39; || inputChar != &#39;N&#39;` this is always true so you&#39;ll never exit that loop. Use `&amp;&amp;` instead","body":"<code>inputChar != &#39;Y&#39; || inputChar != &#39;N&#39;</code> this is always true so you&#39;ll never exit that loop. Use <code>&amp;&amp;</code> instead"},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":1,"creation_date":1643506552,"post_id":70911135,"comment_id":125358201,"body_markdown":"The duplink is an example of the same **logical** error ... doing almost the same thing as your code.","body":"The duplink is an example of the same <b>logical</b> error ... doing almost the same thing as your code."},{"owner":{"account_id":195331,"reputation":275408,"user_id":438154,"accept_rate":98,"display_name":"Sotirios Delimanolis"},"score":0,"creation_date":1643506817,"post_id":70911135,"comment_id":125358234,"body_markdown":"@stephen For bookmarking purposes https://stackoverflow.com/questions/26337003/why-does-non-equality-check-of-one-variable-against-many-values-always-return-tr","body":"@stephen For bookmarking purposes <a href=\"https://stackoverflow.com/questions/26337003/why-does-non-equality-check-of-one-variable-against-many-values-always-return-tr\" title=\"why does non equality check of one variable against many values always return tr\">stackoverflow.com/questions/26337003/&hellip;</a>"},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1643506980,"post_id":70911135,"comment_id":125358266,"body_markdown":"@SotiriosDelimanolis - Thanks.  Yes that is a better duplink ... for both.","body":"@SotiriosDelimanolis - Thanks.  Yes that is a better duplink ... for both."}],"answers":[{"tags":[],"owner":{"account_id":23685228,"reputation":1103,"user_id":17710270,"display_name":"passer-by"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1643506332,"creation_date":1643506332,"answer_id":70911151,"question_id":70911135,"body_markdown":"    while (inputChar != &#39;Y&#39; || inputChar != &#39;N&#39;);\r\n\r\nThe condition you wrote says &#39;loop while the input is not Y or is not N&#39;.\r\n\r\nNo character is equal to Y and equal to N at the same time, so this will loop forever.\r\n\r\nIf it&#39;s Y, then it&#39;s not N, so the second part is true.\r\n\r\nIf it&#39;s N, then it&#39;s not Y, so the first part is true.\r\n\r\nIf it&#39;s Z, then both parts are true.\r\n\r\nYou want \r\n\r\n    while (inputChar != &#39;Y&#39; &amp;&amp; inputChar != &#39;N&#39;);","title":"data validation using char != not working","body":"<pre><code>while (inputChar != 'Y' || inputChar != 'N');\n</code></pre>\n<p>The condition you wrote says 'loop while the input is not Y or is not N'.</p>\n<p>No character is equal to Y and equal to N at the same time, so this will loop forever.</p>\n<p>If it's Y, then it's not N, so the second part is true.</p>\n<p>If it's N, then it's not Y, so the first part is true.</p>\n<p>If it's Z, then both parts are true.</p>\n<p>You want</p>\n<pre><code>while (inputChar != 'Y' &amp;&amp; inputChar != 'N');\n</code></pre>\n"},{"tags":[],"owner":{"account_id":24096711,"reputation":11,"user_id":18069095,"display_name":"jamster02"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1643506401,"creation_date":1643506401,"answer_id":70911158,"question_id":70911135,"body_markdown":"The issue is with this line: `} while (inputChar != &#39;Y&#39; || inputChar != &#39;N&#39;);`\r\n\r\nSince you are using a logical or operation, the loop continues while `inputChar` is not equal to `Y` or `inputChar` is not equal to `N`. The issue is that one of these is always true so your loop runs forever since a character cannot be both equal to &#39;N&#39; and to &#39;Y&#39;. Try using a logical and (`&amp;&amp;`) instead.","title":"data validation using char != not working","body":"<p>The issue is with this line: <code>} while (inputChar != 'Y' || inputChar != 'N');</code></p>\n<p>Since you are using a logical or operation, the loop continues while <code>inputChar</code> is not equal to <code>Y</code> or <code>inputChar</code> is not equal to <code>N</code>. The issue is that one of these is always true so your loop runs forever since a character cannot be both equal to 'N' and to 'Y'. Try using a logical and (<code>&amp;&amp;</code>) instead.</p>\n"}],"owner":{"account_id":24074630,"reputation":27,"user_id":18050142,"display_name":"John Wink"},"comment_count":4,"delete_vote_count":1,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":65,"favorite_count":0,"down_vote_count":3,"up_vote_count":1,"closed_date":1643506503,"answer_count":2,"score":-2,"last_activity_date":1643507001,"creation_date":1643506066,"question_id":70911135,"body_markdown":"Hello I know this is so basic but I am having trouble in comparing char specifically with the !=. Whenever I input other letter (not y and n) code still loop. \r\n\r\nI tried changing the != to == and when i press Y it gets out of loop.\r\n\r\nHow is this happening? Thank you!\r\n```\r\npublic static void main(String[] args) {\r\n    char inputChar;\r\n    Scanner input = new Scanner(System.in);\r\n\r\n    do {\r\n        System.out.println(&quot;-----------------------------------------------&quot;);\r\n        System.out.println(&quot;Try Again(Y/N)? &quot;);\r\n        do {\r\n            inputChar = input.next().toUpperCase().charAt(0);\r\n            System.out.println(&quot;Loop&quot;);\r\n        } while (inputChar != &#39;Y&#39; || inputChar != &#39;N&#39;);\r\n        System.out.println(inputChar + &quot; d&quot;);\r\n    } while (inputChar == &#39;Y&#39;);\r\n    System.out.println(&quot;Thank you and Good bye!&quot;);\r\n}\r\n```","title":"data validation using char != not working","body":"<p>Hello I know this is so basic but I am having trouble in comparing char specifically with the !=. Whenever I input other letter (not y and n) code still loop.</p>\n<p>I tried changing the != to == and when i press Y it gets out of loop.</p>\n<p>How is this happening? Thank you!</p>\n<pre><code>public static void main(String[] args) {\n    char inputChar;\n    Scanner input = new Scanner(System.in);\n\n    do {\n        System.out.println(&quot;-----------------------------------------------&quot;);\n        System.out.println(&quot;Try Again(Y/N)? &quot;);\n        do {\n            inputChar = input.next().toUpperCase().charAt(0);\n            System.out.println(&quot;Loop&quot;);\n        } while (inputChar != 'Y' || inputChar != 'N');\n        System.out.println(inputChar + &quot; d&quot;);\n    } while (inputChar == 'Y');\n    System.out.println(&quot;Thank you and Good bye!&quot;);\n}\n</code></pre>\n"},{"tags":["java","comparison","char","conditional-statements"],"comments":[{"owner":{"account_id":1288428,"reputation":148,"user_id":1241014,"accept_rate":100,"display_name":"cgalvao1993"},"score":0,"creation_date":1368117542,"post_id":16466726,"comment_id":23624790,"body_markdown":"Have you tried if (a.equals(b)) ?","body":"Have you tried if (a.equals(b)) ?"},{"owner":{"account_id":1832500,"reputation":4685,"user_id":1663592,"display_name":"Smit"},"score":1,"creation_date":1368117640,"post_id":16466726,"comment_id":23624824,"body_markdown":"@C&#225;ssioGalv&#227;o `(a.equals(b))` will work fine if its String. but for chars `==` is used.","body":"@C&#225;ssioGalv&#227;o <code>(a.equals(b))</code> will work fine if its String. but for chars <code>==</code> is used."}],"answers":[{"tags":[],"owner":{"account_id":1888343,"reputation":176607,"user_id":1707091,"display_name":"rgettman"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1368117582,"creation_date":1368117582,"answer_id":16466763,"question_id":16466726,"body_markdown":"Your logic is incorrect.  It is always `true` that `looper` isn&#39;t `&#39;Y&#39;` _or_ it isn&#39;t `&#39;y&#39;` _or_ it isn&#39;t ...\r\n\r\nYou want the logical operator for &quot;and&quot;: `&amp;&amp;`\r\n\r\n    if(looper != &#39;Y&#39; &amp;&amp; looper != &#39;y&#39; &amp;&amp; looper != &#39;N&#39; &amp;&amp; looper != &#39;n&#39;)\r\n\r\nand a similar change in your `while` condition.","title":"Java char comparison does not seem to work","body":"<p>Your logic is incorrect.  It is always <code>true</code> that <code>looper</code> isn't <code>'Y'</code> <em>or</em> it isn't <code>'y'</code> <em>or</em> it isn't ...</p>\n\n<p>You want the logical operator for \"and\": <code>&amp;&amp;</code></p>\n\n<pre><code>if(looper != 'Y' &amp;&amp; looper != 'y' &amp;&amp; looper != 'N' &amp;&amp; looper != 'n')\n</code></pre>\n\n<p>and a similar change in your <code>while</code> condition.</p>\n"},{"tags":[],"owner":{"account_id":93689,"reputation":415931,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1643506880,"creation_date":1643506880,"answer_id":70911183,"question_id":16466726,"body_markdown":"Rather than fix the logic operator from `||` to `&amp;&amp;`, make the code clearer:\r\n\r\n    private static final Set&lt;Character&gt; YES_OR_NO = Set.of(&#39;Y&#39;, &#39;y&#39;, &#39;N&#39;, &#39;n&#39;);\r\n\r\n    do { \r\n        System.out.print(&quot;Would you like to do this again? Y/N\\n&quot;);\r\n        looper = inputter.getChar();\r\n        System.out.print(looper);\r\n        if (!YES_OR_NO.contains(looper))\r\n            System.out.print(&quot;No valid input. Please try again.\\n&quot;);\r\n    } while(!YES_OR_NO.contains(looper));\r\n\r\n    \r\n","title":"Java char comparison does not seem to work","body":"<p>Rather than fix the logic operator from <code>||</code> to <code>&amp;&amp;</code>, make the code clearer:</p>\n<pre><code>private static final Set&lt;Character&gt; YES_OR_NO = Set.of('Y', 'y', 'N', 'n');\n\ndo { \n    System.out.print(&quot;Would you like to do this again? Y/N\\n&quot;);\n    looper = inputter.getChar();\n    System.out.print(looper);\n    if (!YES_OR_NO.contains(looper))\n        System.out.print(&quot;No valid input. Please try again.\\n&quot;);\n} while(!YES_OR_NO.contains(looper));\n</code></pre>\n"}],"owner":{"account_id":2745904,"reputation":508,"user_id":2366322,"accept_rate":92,"display_name":"hellerve"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":15105,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1643507036,"accepted_answer_id":16466763,"answer_count":2,"score":0,"last_activity_date":1643506880,"creation_date":1368117439,"question_id":16466726,"body_markdown":"I know you can compare chars in Java with normal operators, for example `anysinglechar == y`. However, I have a problem with this particular code:\r\n\r\n    do{\t\r\n\t\tSystem.out.print(&quot;Would you like to do this again? Y/N\\n&quot;);\r\n\t\tlooper = inputter.getChar();\r\n\t\tSystem.out.print(looper);\r\n\t\tif(looper != &#39;Y&#39; || looper != &#39;y&#39; || looper != &#39;N&#39; || looper != &#39;n&#39;)\r\n\t\t\tSystem.out.print(&quot;No valid input. Please try again.\\n&quot;);\r\n    }while(looper != &#39;Y&#39; || looper != &#39;y&#39; || looper != &#39;N&#39; || looper != &#39;n&#39;);\r\n\r\nThe problem should not be the other method, inputter.getChar(), but I&#39;ll dump it anyway:\r\n\r\n    private static BufferedReader read = new BufferedReader(new InputStreamReader(System.in));\r\n\tpublic static char getChar() throws IOException{\r\n\t\tint buf= read.read();\r\n\t\tchar chr = (char) buf;\r\n\t\twhile(!Character.isLetter(chr)){\r\n\t\t\tbuf= read.read();\r\n\t\t\tchr = (char) buf;\r\n\t\t}\r\n\t\treturn chr;\r\n\t}\r\n\r\nThe output I&#39;m getting is as follows:\r\n\r\n    Would you like to do this again? Y/N\r\n    N\r\n    NNo valid input. Please try again.\r\n    Would you like to do this again? Y/N\r\n    n\r\n    nNo valid input. Please try again.\r\n    Would you like to do this again? Y/N\r\n\r\nAs you can see, the char I put in is an `n`. It is then printed out correctly(hence it is to be seen twice). However, the comparison doesn&#39;t seem to become true.\r\n\r\nI&#39;m sure I&#39;m overlooking something obvious.","title":"Java char comparison does not seem to work","body":"<p>I know you can compare chars in Java with normal operators, for example <code>anysinglechar == y</code>. However, I have a problem with this particular code:</p>\n\n<pre><code>do{ \n    System.out.print(\"Would you like to do this again? Y/N\\n\");\n    looper = inputter.getChar();\n    System.out.print(looper);\n    if(looper != 'Y' || looper != 'y' || looper != 'N' || looper != 'n')\n        System.out.print(\"No valid input. Please try again.\\n\");\n}while(looper != 'Y' || looper != 'y' || looper != 'N' || looper != 'n');\n</code></pre>\n\n<p>The problem should not be the other method, inputter.getChar(), but I'll dump it anyway:</p>\n\n<pre><code>private static BufferedReader read = new BufferedReader(new InputStreamReader(System.in));\npublic static char getChar() throws IOException{\n    int buf= read.read();\n    char chr = (char) buf;\n    while(!Character.isLetter(chr)){\n        buf= read.read();\n        chr = (char) buf;\n    }\n    return chr;\n}\n</code></pre>\n\n<p>The output I'm getting is as follows:</p>\n\n<pre><code>Would you like to do this again? Y/N\nN\nNNo valid input. Please try again.\nWould you like to do this again? Y/N\nn\nnNo valid input. Please try again.\nWould you like to do this again? Y/N\n</code></pre>\n\n<p>As you can see, the char I put in is an <code>n</code>. It is then printed out correctly(hence it is to be seen twice). However, the comparison doesn't seem to become true.</p>\n\n<p>I'm sure I'm overlooking something obvious.</p>\n"},{"tags":["java","junit","properties","ioexception"],"answers":[{"tags":[],"owner":{"account_id":6481982,"reputation":1513,"user_id":5018690,"display_name":"Rahul Yadav"},"down_vote_count":4,"up_vote_count":2,"is_accepted":false,"score":-2,"last_activity_date":1443077083,"creation_date":1443077083,"answer_id":32754989,"question_id":32754937,"body_markdown":"Empty or Invalid `fileName` parameter.","title":"What values to put in my properties file to get an IOException while loading?","body":"<p>Empty or Invalid <code>fileName</code> parameter.</p>\n"},{"tags":[],"owner":{"account_id":5700484,"reputation":402,"user_id":4505616,"accept_rate":79,"display_name":"Albert Pinto"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1443077164,"creation_date":1443077164,"answer_id":32755014,"question_id":32754937,"body_markdown":"pass a blank string as file name","title":"What values to put in my properties file to get an IOException while loading?","body":"<p>pass a blank string as file name</p>\n"},{"tags":[],"owner":{"account_id":1284143,"reputation":43090,"user_id":1237575,"accept_rate":96,"display_name":"Rafael Winterhalter"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1443078065,"creation_date":1443077741,"answer_id":32755175,"question_id":32754937,"body_markdown":"When you look into the implementation of `Properties::load`, you find out that the class never throws the exception explicitly. The only way to trigger an `IOException` would be to hand an `InputStream` that throws this exception upon invoking the input stream&#39;s `read` method.\r\n\r\nDo you have control over the `PropertyReader` class? One way to emulate this error would be to [instrument this class loader][1] to return an errornous `InputStream` for a given test value of `fileName` to throw an `IOException`. Alternatively, you could make the method more flexible by changing the signature to:\r\n\r\n    public static Properties loadPropertyFile(String fileName) {\r\n      return loadPropertyFile(fileName, PropertyReader.class);\r\n    }\r\n\r\n    public static Properties loadPropertyFile(String fileName, ClassLoader cl) {\r\n      // your code...\r\n    }\r\n\r\nwith handing a class loader:\r\n\r\n    class TestLoader extends ClassLoader {\r\n      @Override\r\n      public InputStream getResourceAsStream() {\r\n        return new InputStream() {\r\n          @Override\r\n          public byte read() throws IOException {\r\n            throws new IOException();\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\nYou cannot add specific characters to the properties file that cause an `IOException` as the `InputStream` only reads bytes. Any encoding-realted problem will instead result in an `IllegalArgumentException`.\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/api/java/lang/instrument/Instrumentation.html","title":"What values to put in my properties file to get an IOException while loading?","body":"<p>When you look into the implementation of <code>Properties::load</code>, you find out that the class never throws the exception explicitly. The only way to trigger an <code>IOException</code> would be to hand an <code>InputStream</code> that throws this exception upon invoking the input stream's <code>read</code> method.</p>\n\n<p>Do you have control over the <code>PropertyReader</code> class? One way to emulate this error would be to <a href=\"http://docs.oracle.com/javase/7/docs/api/java/lang/instrument/Instrumentation.html\" rel=\"nofollow\">instrument this class loader</a> to return an errornous <code>InputStream</code> for a given test value of <code>fileName</code> to throw an <code>IOException</code>. Alternatively, you could make the method more flexible by changing the signature to:</p>\n\n<pre><code>public static Properties loadPropertyFile(String fileName) {\n  return loadPropertyFile(fileName, PropertyReader.class);\n}\n\npublic static Properties loadPropertyFile(String fileName, ClassLoader cl) {\n  // your code...\n}\n</code></pre>\n\n<p>with handing a class loader:</p>\n\n<pre><code>class TestLoader extends ClassLoader {\n  @Override\n  public InputStream getResourceAsStream() {\n    return new InputStream() {\n      @Override\n      public byte read() throws IOException {\n        throws new IOException();\n      }\n    }\n  }\n}\n</code></pre>\n\n<p>You cannot add specific characters to the properties file that cause an <code>IOException</code> as the <code>InputStream</code> only reads bytes. Any encoding-realted problem will instead result in an <code>IllegalArgumentException</code>.</p>\n"},{"tags":[],"owner":{"account_id":21804,"reputation":7207,"user_id":53300,"accept_rate":53,"display_name":"DaveH"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1443078573,"creation_date":1443078573,"answer_id":32755405,"question_id":32754937,"body_markdown":"Have you considered a mocking framework? Mock the `new` operator for Properties to return a mock implementation that throws `IOException` when its `load` method is called.\r\n\r\nmockitio and powermockito will allow you to do this.\r\n\r\n","title":"What values to put in my properties file to get an IOException while loading?","body":"<p>Have you considered a mocking framework? Mock the <code>new</code> operator for Properties to return a mock implementation that throws <code>IOException</code> when its <code>load</code> method is called.</p>\n\n<p>mockitio and powermockito will allow you to do this.</p>\n"},{"tags":[],"owner":{"account_id":295795,"reputation":5373,"user_id":600379,"display_name":"Dakshinamurthy Karra"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1443079497,"creation_date":1443079497,"answer_id":32755647,"question_id":32754937,"body_markdown":"One way of forcing the `load` call to throw `IOException` is to pass a closed stream. If you can refactor your method to accept a `InputStream` you can pass a closed stream to the method and check whether it is throwing an exception.\r\n\r\nThat said, Unit Tests are supposed to cover the code you write. It seems to me you are testing whether `load` throws an exception if the input stream has an error. Which is superfluous.","title":"What values to put in my properties file to get an IOException while loading?","body":"<p>One way of forcing the <code>load</code> call to throw <code>IOException</code> is to pass a closed stream. If you can refactor your method to accept a <code>InputStream</code> you can pass a closed stream to the method and check whether it is throwing an exception.</p>\n\n<p>That said, Unit Tests are supposed to cover the code you write. It seems to me you are testing whether <code>load</code> throws an exception if the input stream has an error. Which is superfluous.</p>\n"},{"tags":[],"owner":{"account_id":1789975,"reputation":1548,"user_id":1630619,"accept_rate":77,"display_name":"Philippe Gioseffi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1643506654,"creation_date":1643506654,"answer_id":70911171,"question_id":32754937,"body_markdown":"I know that this is an old thread, but since I recently ran into the same problem and based on [Rafael Winterhalter&#39;s answer][1] I came up with this test:\r\n\r\n    @Test\r\n\tvoid testFailLoadProjectFile() throws NoSuchMethodException, SecurityException {\r\n\t\tfinal var method = LogGeneratorComponent.class.getDeclaredMethod(&quot;loadProjectProperties&quot;, Properties.class);\r\n\r\n\t\tAssertions.assertTrue(Modifier.isPrivate(method.getModifiers()), &quot;Method is not private.&quot;);\r\n\r\n\t\tmethod.setAccessible(true);\r\n\r\n\t\tfinal var obj = new LogGeneratorComponent();\r\n\r\n\t\tAssertions.assertThrows(InvocationTargetException.class, () -&gt; method.invoke(obj, new Properties() {\r\n\r\n\t\t\tprivate static final long serialVersionUID = 5663506788956932491L;\r\n\r\n\t\t\t@Override\r\n\t\t\tpublic synchronized void load(@SuppressWarnings(&quot;unused&quot;) final InputStream is) throws IOException {\r\n\t\t\t\tthrow new IOException(&quot;Invalid properties implementation.&quot;);\r\n\t\t\t}\r\n\t\t}), &quot;An InvocationTargetException should have been thrown, but nothing happened.&quot;);\r\n\t}\r\n\r\nAnd this is my actual method:\r\n\r\n    private static Properties loadProjectProperties(final Properties properties) {\r\n\t\ttry (final var is = Thread.currentThread().getContextClassLoader().getResourceAsStream(&quot;project.properties&quot;)) {\r\n\t\t\tproperties.load(is);\r\n\t\t\treturn properties;\r\n\t\t} catch (final IOException e) {\r\n\t\t\tthrow new UncheckedIOException(&quot;Error while reading project.properties file.&quot;, e);\r\n\t\t}\r\n\t}\r\n\r\nObviously OP can customize it to receive a fileName parameter and make it public in order to have a simpler test.\r\n\r\n  [1]: https://stackoverflow.com/a/32755175/1630619","title":"What values to put in my properties file to get an IOException while loading?","body":"<p>I know that this is an old thread, but since I recently ran into the same problem and based on <a href=\"https://stackoverflow.com/a/32755175/1630619\">Rafael Winterhalter's answer</a> I came up with this test:</p>\n<pre><code>@Test\nvoid testFailLoadProjectFile() throws NoSuchMethodException, SecurityException {\n    final var method = LogGeneratorComponent.class.getDeclaredMethod(&quot;loadProjectProperties&quot;, Properties.class);\n\n    Assertions.assertTrue(Modifier.isPrivate(method.getModifiers()), &quot;Method is not private.&quot;);\n\n    method.setAccessible(true);\n\n    final var obj = new LogGeneratorComponent();\n\n    Assertions.assertThrows(InvocationTargetException.class, () -&gt; method.invoke(obj, new Properties() {\n\n        private static final long serialVersionUID = 5663506788956932491L;\n\n        @Override\n        public synchronized void load(@SuppressWarnings(&quot;unused&quot;) final InputStream is) throws IOException {\n            throw new IOException(&quot;Invalid properties implementation.&quot;);\n        }\n    }), &quot;An InvocationTargetException should have been thrown, but nothing happened.&quot;);\n}\n</code></pre>\n<p>And this is my actual method:</p>\n<pre><code>private static Properties loadProjectProperties(final Properties properties) {\n    try (final var is = Thread.currentThread().getContextClassLoader().getResourceAsStream(&quot;project.properties&quot;)) {\n        properties.load(is);\n        return properties;\n    } catch (final IOException e) {\n        throw new UncheckedIOException(&quot;Error while reading project.properties file.&quot;, e);\n    }\n}\n</code></pre>\n<p>Obviously OP can customize it to receive a fileName parameter and make it public in order to have a simpler test.</p>\n"}],"owner":{"account_id":4873652,"reputation":13544,"user_id":3929393,"accept_rate":75,"display_name":"Dev"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2311,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":32755405,"answer_count":6,"score":5,"last_activity_date":1643506654,"creation_date":1443076887,"question_id":32754937,"body_markdown":"I am reading a file from its classpath in Java project.\r\n\r\nSample Code:\r\n\r\n          public static Properties loadPropertyFile(String fileName) {\r\n            Properties properties = new Properties();    \r\n            InputStream inputStream = PropertyReader.class.getClassLoader().getResourceAsStream(fileName);\r\n    \r\n            if (inputStream != null) {\r\n                try {\r\n                    properties.load(inputStream);\r\n                } catch (IOException e) {\r\n                    e.printStackTrace();\r\n                }\r\n            } else {\r\n                throw new Exception(&quot;Property file: [&quot; + fileName + &quot;] not found in the classpath&quot;);\r\n            }\r\n            return properties;\r\n          }\r\n\r\nIt&#39;s working fine. I am  writing Junit tests for this code. How can I create a scenario for `IOException` in `properties.load(inputStream)`? \r\n\r\nWhat values should I put in my properties.file to get `IOException`?","title":"What values to put in my properties file to get an IOException while loading?","body":"<p>I am reading a file from its classpath in Java project.</p>\n\n<p>Sample Code:</p>\n\n<pre><code>      public static Properties loadPropertyFile(String fileName) {\n        Properties properties = new Properties();    \n        InputStream inputStream = PropertyReader.class.getClassLoader().getResourceAsStream(fileName);\n\n        if (inputStream != null) {\n            try {\n                properties.load(inputStream);\n            } catch (IOException e) {\n                e.printStackTrace();\n            }\n        } else {\n            throw new Exception(\"Property file: [\" + fileName + \"] not found in the classpath\");\n        }\n        return properties;\n      }\n</code></pre>\n\n<p>It's working fine. I am  writing Junit tests for this code. How can I create a scenario for <code>IOException</code> in <code>properties.load(inputStream)</code>? </p>\n\n<p>What values should I put in my properties.file to get <code>IOException</code>?</p>\n"},{"tags":["java","maven","javafx"],"comments":[{"owner":{"account_id":9722462,"reputation":4365,"user_id":7210739,"display_name":"DontKnowMuchBut Getting Better"},"score":0,"creation_date":1643483400,"post_id":70908831,"comment_id":125354001,"body_markdown":"You appear to be  misinterpreting the stack trace. The InvocationTargetException isn&#39;t what matters. Instead, it is the null pointer exception that matters. Is your file path correct? Are you sure?","body":"You appear to be  misinterpreting the stack trace. The InvocationTargetException isn&#39;t what matters. Instead, it is the null pointer exception that matters. Is your file path correct? Are you sure?"},{"owner":{"account_id":19443504,"reputation":181,"user_id":14221517,"display_name":"Jan Tuđan"},"score":0,"creation_date":1643483966,"post_id":70908831,"comment_id":125354145,"body_markdown":"Where exactly should I move my file? And which file path exactly?","body":"Where exactly should I move my file? And which file path exactly?"},{"owner":{"account_id":9722462,"reputation":4365,"user_id":7210739,"display_name":"DontKnowMuchBut Getting Better"},"score":0,"creation_date":1643484008,"post_id":70908831,"comment_id":125354154,"body_markdown":"Please check the answers in the duplicate. Resources use the class path for relative path","body":"Please check the answers in the duplicate. Resources use the class path for relative path"},{"owner":{"account_id":19443504,"reputation":181,"user_id":14221517,"display_name":"Jan Tuđan"},"score":0,"creation_date":1643484884,"post_id":70908831,"comment_id":125354342,"body_markdown":"Still didn&#39;t find the solution in the duplicate, can you try to explain how to use that in my case?","body":"Still didn&#39;t find the solution in the duplicate, can you try to explain how to use that in my case?"},{"owner":{"account_id":19443504,"reputation":181,"user_id":14221517,"display_name":"Jan Tuđan"},"score":0,"creation_date":1643486310,"post_id":70908831,"comment_id":125354703,"body_markdown":"There are not so much solutions for Maven project, I&#39;m using a Maven project. Can you post an answer if you have an idea how to fix this?","body":"There are not so much solutions for Maven project, I&#39;m using a Maven project. Can you post an answer if you have an idea how to fix this?"},{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":0,"creation_date":1643512288,"post_id":70908831,"comment_id":125358878,"body_markdown":"Nothing here looks wrong to me. At least in the build under `target/classes`, `Main.class` is in the same package as `Home.fxml`, so `getClass().getResource(“Home.fxml”)` should work fine. Are you running this from the file system (as opposed to from a jar file)?","body":"Nothing here looks wrong to me. At least in the build under <code>target&#47;classes</code>, <code>Main.class</code> is in the same package as <code>Home.fxml</code>, so <code>getClass().getResource(“Home.fxml”)</code> should work fine. Are you running this from the file system (as opposed to from a jar file)?"}],"owner":{"account_id":19443504,"reputation":181,"user_id":14221517,"display_name":"Jan Tuđan"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":785,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"closed_date":1643504317,"answer_count":0,"score":1,"last_activity_date":1643505906,"creation_date":1643483247,"question_id":70908831,"body_markdown":"I&#39;m new to JavaFX. So I&#39;m trying to get my application up and running and I&#39;m using Maven package.  \r\n\r\nSo these are my issues:\r\n\r\n    Exception in Application start method\r\n    java.lang.reflect.InvocationTargetException\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n    \tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    \tat java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n    \tat javafx.graphics/com.sun.javafx.application.LauncherImpl.launchApplicationWithArgs(LauncherImpl.java:465)\r\n    \tat javafx.graphics/com.sun.javafx.application.LauncherImpl.launchApplication(LauncherImpl.java:364)\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n    \tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    \tat java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n    \tat java.base/sun.launcher.LauncherHelper$FXHelper.main(LauncherHelper.java:1071)\r\n    Caused by: java.lang.RuntimeException: Exception in Application start method\r\n    \tat javafx.graphics/com.sun.javafx.application.LauncherImpl.launchApplication1(LauncherImpl.java:901)\r\n    \tat javafx.graphics/com.sun.javafx.application.LauncherImpl.lambda$launchApplication$2(LauncherImpl.java:196)\r\n    \tat java.base/java.lang.Thread.run(Thread.java:833)\r\n    Caused by: java.lang.NullPointerException: Location is required.\r\n    \tat javafx.fxml/javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:3324)\r\n    \tat javafx.fxml/javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:3287)\r\n    \tat javafx.fxml/javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:3255)\r\n    \tat javafx.fxml/javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:3227)\r\n    \tat javafx.fxml/javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:3203)\r\n    \tat javafx.fxml/javafx.fxml.FXMLLoader.load(FXMLLoader.java:3196)\r\n    \tat com.example.javafxdemo/com.example.javafxdemo.Main.start(Main.java:12)\r\n    \tat javafx.graphics/com.sun.javafx.application.LauncherImpl.lambda$launchApplication1$9(LauncherImpl.java:847)\r\n    \tat javafx.graphics/com.sun.javafx.application.PlatformImpl.lambda$runAndWait$12(PlatformImpl.java:484)\r\n    \tat javafx.graphics/com.sun.javafx.application.PlatformImpl.lambda$runLater$10(PlatformImpl.java:457)\r\n    \tat java.base/java.security.AccessController.doPrivileged(AccessController.java:399)\r\n    \tat javafx.graphics/com.sun.javafx.application.PlatformImpl.lambda$runLater$11(PlatformImpl.java:456)\r\n    \tat javafx.graphics/com.sun.glass.ui.InvokeLaterDispatcher$Future.run(InvokeLaterDispatcher.java:96)\r\n    \tat javafx.graphics/com.sun.glass.ui.win.WinApplication._runLoop(Native Method)\r\n    \tat javafx.graphics/com.sun.glass.ui.win.WinApplication.lambda$runLoop$3(WinApplication.java:184)\r\n    \t... 1 more\r\n    Exception running application com.example.javafxdemo.Main\r\n\r\nThis is the the image of my files and folders:\r\n\r\nhttps://ibb.co/DL0PnpP\r\n\r\nAnd main file:\r\n\r\n    package com.example.javafxdemo;\r\n    \r\n    import javafx.application.Application;\r\n    import javafx.fxml.FXMLLoader;\r\n    import javafx.scene.Parent;\r\n    import javafx.scene.Scene;\r\n    import javafx.scene.image.Image;\r\n    import javafx.stage.Stage;\r\n    public class Main extends Application {\r\n        @Override\r\n        public void start(Stage primaryStage) throws Exception{\r\n            Parent root = FXMLLoader.load(getClass().getResource(&quot;Home.fxml&quot;));\r\n            primaryStage.setTitle(&quot;KeepToo SMSys&quot;);\r\n            primaryStage.getIcons().add(new Image(&quot;/icons/icon.png&quot;));\r\n            primaryStage.setScene(new Scene(root));\r\n            primaryStage.show();\r\n        }\r\n    \r\n        //you can download the glyph browser - link provided.\r\n        public static void main(String[] args) {\r\n            launch(args);\r\n        }\r\n    }\r\n\r\nAny ideas how to handle that?","title":"Exception in Application start: method java.lang.reflect.InvocationTargetException","body":"<p>I'm new to JavaFX. So I'm trying to get my application up and running and I'm using Maven package.</p>\n<p>So these are my issues:</p>\n<pre><code>Exception in Application start method\njava.lang.reflect.InvocationTargetException\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n    at javafx.graphics/com.sun.javafx.application.LauncherImpl.launchApplicationWithArgs(LauncherImpl.java:465)\n    at javafx.graphics/com.sun.javafx.application.LauncherImpl.launchApplication(LauncherImpl.java:364)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n    at java.base/sun.launcher.LauncherHelper$FXHelper.main(LauncherHelper.java:1071)\nCaused by: java.lang.RuntimeException: Exception in Application start method\n    at javafx.graphics/com.sun.javafx.application.LauncherImpl.launchApplication1(LauncherImpl.java:901)\n    at javafx.graphics/com.sun.javafx.application.LauncherImpl.lambda$launchApplication$2(LauncherImpl.java:196)\n    at java.base/java.lang.Thread.run(Thread.java:833)\nCaused by: java.lang.NullPointerException: Location is required.\n    at javafx.fxml/javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:3324)\n    at javafx.fxml/javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:3287)\n    at javafx.fxml/javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:3255)\n    at javafx.fxml/javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:3227)\n    at javafx.fxml/javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:3203)\n    at javafx.fxml/javafx.fxml.FXMLLoader.load(FXMLLoader.java:3196)\n    at com.example.javafxdemo/com.example.javafxdemo.Main.start(Main.java:12)\n    at javafx.graphics/com.sun.javafx.application.LauncherImpl.lambda$launchApplication1$9(LauncherImpl.java:847)\n    at javafx.graphics/com.sun.javafx.application.PlatformImpl.lambda$runAndWait$12(PlatformImpl.java:484)\n    at javafx.graphics/com.sun.javafx.application.PlatformImpl.lambda$runLater$10(PlatformImpl.java:457)\n    at java.base/java.security.AccessController.doPrivileged(AccessController.java:399)\n    at javafx.graphics/com.sun.javafx.application.PlatformImpl.lambda$runLater$11(PlatformImpl.java:456)\n    at javafx.graphics/com.sun.glass.ui.InvokeLaterDispatcher$Future.run(InvokeLaterDispatcher.java:96)\n    at javafx.graphics/com.sun.glass.ui.win.WinApplication._runLoop(Native Method)\n    at javafx.graphics/com.sun.glass.ui.win.WinApplication.lambda$runLoop$3(WinApplication.java:184)\n    ... 1 more\nException running application com.example.javafxdemo.Main\n</code></pre>\n<p>This is the the image of my files and folders:</p>\n<p><a href=\"https://ibb.co/DL0PnpP\" rel=\"nofollow noreferrer\">https://ibb.co/DL0PnpP</a></p>\n<p>And main file:</p>\n<pre><code>package com.example.javafxdemo;\n\nimport javafx.application.Application;\nimport javafx.fxml.FXMLLoader;\nimport javafx.scene.Parent;\nimport javafx.scene.Scene;\nimport javafx.scene.image.Image;\nimport javafx.stage.Stage;\npublic class Main extends Application {\n    @Override\n    public void start(Stage primaryStage) throws Exception{\n        Parent root = FXMLLoader.load(getClass().getResource(&quot;Home.fxml&quot;));\n        primaryStage.setTitle(&quot;KeepToo SMSys&quot;);\n        primaryStage.getIcons().add(new Image(&quot;/icons/icon.png&quot;));\n        primaryStage.setScene(new Scene(root));\n        primaryStage.show();\n    }\n\n    //you can download the glyph browser - link provided.\n    public static void main(String[] args) {\n        launch(args);\n    }\n}\n</code></pre>\n<p>Any ideas how to handle that?</p>\n"},{"tags":["java","arrays","performance","for-loop","arraylist"],"comments":[{"owner":{"account_id":19452218,"reputation":204,"user_id":14228343,"display_name":"Aditya Arora"},"score":3,"creation_date":1643342971,"post_id":70888677,"comment_id":125319830,"body_markdown":"I think the performance loss is negligible, but I would love an explaination tho","body":"I think the performance loss is negligible, but I would love an explaination tho"},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1643348203,"post_id":70888677,"comment_id":125320710,"body_markdown":"There are many implementations of List.  How long would `size()` take if the List is a [LinkedList](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/LinkedList.html) containing thousands (or millions) of elements?","body":"There are many implementations of List.  How long would <code>size()</code> take if the List is a <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/LinkedList.html\" rel=\"nofollow noreferrer\">LinkedList</a> containing thousands (or millions) of elements?"},{"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"score":1,"creation_date":1643367542,"post_id":70888677,"comment_id":125326490,"body_markdown":"@VGR you wouldn&#39;t want to iterate a LinkedList this way in the first place. What would it do with `i`? Traverse the entire list up to `i` on each iteration?","body":"@VGR you wouldn&#39;t want to iterate a LinkedList this way in the first place. What would it do with <code>i</code>? Traverse the entire list up to <code>i</code> on each iteration?"},{"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"score":0,"creation_date":1643367612,"post_id":70888677,"comment_id":125326510,"body_markdown":"Does this answer your question? [What is the Cost of Calling array.length](https://stackoverflow.com/questions/1208320/what-is-the-cost-of-calling-array-length)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/1208320/what-is-the-cost-of-calling-array-length\">What is the Cost of Calling array.length</a>"},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1643373132,"post_id":70888677,"comment_id":125328449,"body_markdown":"@TimMoore Agreed, it’s a good argument for using a for-each loop.","body":"@TimMoore Agreed, it’s a good argument for using a for-each loop."},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1644584675,"post_id":70888677,"comment_id":125651641,"body_markdown":"@VGR `LinkedList` stores the size in a field, just like `ArrayList`. So the `size()` method is not the problem when iterating over `LinkedList` this way…","body":"@VGR <code>LinkedList</code> stores the size in a field, just like <code>ArrayList</code>. So the <code>size()</code> method is not the problem when iterating over <code>LinkedList</code> this way…"},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1644584808,"post_id":70888677,"comment_id":125651680,"body_markdown":"@user16320675 `array.length` never changes. It looks like a field access, but in reality, it’s not. There’s a dedicated bytecode instruction, `arraylength` for getting the length but no way to change to change an array length at all.","body":"@user16320675 <code>array.length</code> never changes. It looks like a field access, but in reality, it’s not. There’s a dedicated bytecode instruction, <code>arraylength</code> for getting the length but no way to change to change an array length at all."},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1644585252,"post_id":70888677,"comment_id":125651827,"body_markdown":"@user16320675 if `someArr` changes, you *want* use the changed `someArr.length`, as only using the corresponding length guarantees that you are staying within the bounds. And this has a true impact on the optimizer, as this makes the difference between generating extra code for bounds checks or relying on the known invariant that the loop never exceeds the bounds. Which implies that it doesn’t matter whether you use `length = someArr.length` or access `someArr.length` each time; what matters, is whether the JIT/HotSpot optimizer can prove that `someArr` never changes, in either case.","body":"@user16320675 if <code>someArr</code> changes, you <i>want</i> use the changed <code>someArr.length</code>, as only using the corresponding length guarantees that you are staying within the bounds. And this has a true impact on the optimizer, as this makes the difference between generating extra code for bounds checks or relying on the known invariant that the loop never exceeds the bounds. Which implies that it doesn’t matter whether you use <code>length = someArr.length</code> or access <code>someArr.length</code> each time; what matters, is whether the JIT/HotSpot optimizer can prove that <code>someArr</code> never changes, in either case."},{"owner":{"account_id":19163664,"reputation":572,"user_id":13998894,"display_name":"Scrapper142"},"score":0,"creation_date":1644602608,"post_id":70888677,"comment_id":125658689,"body_markdown":"isn&#39;t accessing a local length variable also a field fetch?","body":"isn&#39;t accessing a local length variable also a field fetch?"}],"answers":[{"tags":[],"owner":{"account_id":960307,"reputation":107861,"user_id":984823,"display_name":"Joop Eggen"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1643381370,"creation_date":1643380626,"answer_id":70895464,"question_id":70888677,"body_markdown":"In general the loss is negligible. Even a `LinkedList.size()` will use a stored count, and not iterate over all nodes.\r\n\r\nFor large sizes you may assume the conversion to machine code may catch up, and optimize it oneself.\r\n\r\nIf inside the loop the size is changed (delete/insert) the size variable must be changed too, which gives us even less solid code.\r\n\r\nThe best would be to use a for-each\r\n\r\n    for (Bar bar: bars) { ... }\r\n\r\nYou might also use the somewhat more costing Stream:\r\n\r\n    barList.forEach(bar -&gt; ...);\r\n    Stream.of(barArray).forEach(bar -&gt; ...);\r\n\r\nStreams can be executed in parallel.\r\n\r\n    barList.parallelStream().forEach(bar -&gt; ...);\r\n\r\nAnd last but not least you may use standard java code for simple loops:\r\n\r\n    Arrays.setAll(barArray, i -&gt; ...);\r\n\r\nWe are talking here about **micro-optimisations**. I would go for elegance.\r\n\r\nMost often the problem is the used algorithm &amp; datastructurs. `List` is notorious, as everything can be a `List`. However `Set` or `Map` often provide much higher power/expressiveness.\r\n\r\nIf a complex piece of software is slow, **profile** the application. Check the break lines: java collections versus database queries, file parsing.","title":"Performance loss of continued call to array.length or list.size()","body":"<p>In general the loss is negligible. Even a <code>LinkedList.size()</code> will use a stored count, and not iterate over all nodes.</p>\n<p>For large sizes you may assume the conversion to machine code may catch up, and optimize it oneself.</p>\n<p>If inside the loop the size is changed (delete/insert) the size variable must be changed too, which gives us even less solid code.</p>\n<p>The best would be to use a for-each</p>\n<pre><code>for (Bar bar: bars) { ... }\n</code></pre>\n<p>You might also use the somewhat more costing Stream:</p>\n<pre><code>barList.forEach(bar -&gt; ...);\nStream.of(barArray).forEach(bar -&gt; ...);\n</code></pre>\n<p>Streams can be executed in parallel.</p>\n<pre><code>barList.parallelStream().forEach(bar -&gt; ...);\n</code></pre>\n<p>And last but not least you may use standard java code for simple loops:</p>\n<pre><code>Arrays.setAll(barArray, i -&gt; ...);\n</code></pre>\n<p>We are talking here about <strong>micro-optimisations</strong>. I would go for elegance.</p>\n<p>Most often the problem is the used algorithm &amp; datastructurs. <code>List</code> is notorious, as everything can be a <code>List</code>. However <code>Set</code> or <code>Map</code> often provide much higher power/expressiveness.</p>\n<p>If a complex piece of software is slow, <strong>profile</strong> the application. Check the break lines: java collections versus database queries, file parsing.</p>\n"},{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1643505600,"creation_date":1643381132,"answer_id":70895575,"question_id":70888677,"body_markdown":"It is possible the JIT compiler will do some of those optimizations for itself.  Hence, doing the optimizations by hand may be a complete waste of time.\r\n\r\nIt is also possible (indeed likely) that the performance benefit you are going to get from hand optimizing those loops is too small to be worth the effort.  Think of it this way:\r\n\r\n  - Most of the statements in a typical program are only executed rarely\r\n  - Most loops will execute in a few microseconds *or less*.\r\n  - Hand optimizing a program takes in the order of minutes or hours of developer time.   \r\n  - If you spend minutes to get a execution speedup that is measured in microseconds, you are *probably* wasting your time.  Even *thinking* about it too long is wasting time.\r\n\r\nThe corollary is that:\r\n\r\n  - You should benchmark your code to decide whether you *need* to optimize it.\r\n  - You should profile your code to figure out which *parts* of your code is worth spending optimization effort on.\r\n  - You should set (realistic) performance goals, and stop optimization when you reach those goals.\r\n\r\n--------------------------\r\n\r\nHaving said all of that:\r\n\r\n  -  `theArr.length` is very fast, probably just a couple of machine instructions\r\n  -  `theList.size()` will *probably* also be very fast, though it depends on what `List` class you are using.  \r\n  - For an `ArrayList` the `size()` call is probably a method call + a field fetch versus a field fetch for `length`.\r\n  - For an `ArrayList` the `size()` call is likely to be inlined by the JIT compiler ... assuming that the JIT compiler can figure that out.\r\n  - The JIT compiler should be able to *hoist* the `length` fetch out of the loop.  It can probably deduce that it doesn&#39;t change in the loop.\r\n  - The JIT compiler *might* be able to *hoist* the `size()` call, but it will be harder for it to deduce that the size doesn&#39;t change.\r\n\r\nWhat this means is that if you do hand optimize those two examples, you will most likely get negligible performance benefit.\r\n","title":"Performance loss of continued call to array.length or list.size()","body":"<p>It is possible the JIT compiler will do some of those optimizations for itself.  Hence, doing the optimizations by hand may be a complete waste of time.</p>\n<p>It is also possible (indeed likely) that the performance benefit you are going to get from hand optimizing those loops is too small to be worth the effort.  Think of it this way:</p>\n<ul>\n<li>Most of the statements in a typical program are only executed rarely</li>\n<li>Most loops will execute in a few microseconds <em>or less</em>.</li>\n<li>Hand optimizing a program takes in the order of minutes or hours of developer time.</li>\n<li>If you spend minutes to get a execution speedup that is measured in microseconds, you are <em>probably</em> wasting your time.  Even <em>thinking</em> about it too long is wasting time.</li>\n</ul>\n<p>The corollary is that:</p>\n<ul>\n<li>You should benchmark your code to decide whether you <em>need</em> to optimize it.</li>\n<li>You should profile your code to figure out which <em>parts</em> of your code is worth spending optimization effort on.</li>\n<li>You should set (realistic) performance goals, and stop optimization when you reach those goals.</li>\n</ul>\n<hr />\n<p>Having said all of that:</p>\n<ul>\n<li><code>theArr.length</code> is very fast, probably just a couple of machine instructions</li>\n<li><code>theList.size()</code> will <em>probably</em> also be very fast, though it depends on what <code>List</code> class you are using.</li>\n<li>For an <code>ArrayList</code> the <code>size()</code> call is probably a method call + a field fetch versus a field fetch for <code>length</code>.</li>\n<li>For an <code>ArrayList</code> the <code>size()</code> call is likely to be inlined by the JIT compiler ... assuming that the JIT compiler can figure that out.</li>\n<li>The JIT compiler should be able to <em>hoist</em> the <code>length</code> fetch out of the loop.  It can probably deduce that it doesn't change in the loop.</li>\n<li>The JIT compiler <em>might</em> be able to <em>hoist</em> the <code>size()</code> call, but it will be harder for it to deduce that the size doesn't change.</li>\n</ul>\n<p>What this means is that if you do hand optimize those two examples, you will most likely get negligible performance benefit.</p>\n"}],"owner":{"account_id":19163664,"reputation":572,"user_id":13998894,"display_name":"Scrapper142"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":324,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":2,"score":0,"last_activity_date":1643505600,"creation_date":1643342641,"question_id":70888677,"body_markdown":"I have seen people say to cache the values of `size` for a list or `length` for an array when iterating, to save the time of checking the length/size over and over again.\r\n\r\nSo\r\n```java\r\nfor (int i = 0; i &lt; someArr.length; i++) // do stuff\r\nfor (int i = 0; i &lt; someList.size(); i++) // do stuff\r\n```\r\nWould be turned into\r\n```java\r\nfor (int i = 0, length = someArr.length; i &lt; length; i++) // do stuff\r\nfor (int i = 0, size = someList.size(); i &lt; size; i++) // do stuff\r\n```\r\nBut since `Array#length` isn&#39;t a method, just a field, shouldn&#39;t it not have any difference? And if using an ArrayList, `size()` is just a getter so shouldn&#39;t that also be the same either way?","title":"Performance loss of continued call to array.length or list.size()","body":"<p>I have seen people say to cache the values of <code>size</code> for a list or <code>length</code> for an array when iterating, to save the time of checking the length/size over and over again.</p>\n<p>So</p>\n<pre class=\"lang-java prettyprint-override\"><code>for (int i = 0; i &lt; someArr.length; i++) // do stuff\nfor (int i = 0; i &lt; someList.size(); i++) // do stuff\n</code></pre>\n<p>Would be turned into</p>\n<pre class=\"lang-java prettyprint-override\"><code>for (int i = 0, length = someArr.length; i &lt; length; i++) // do stuff\nfor (int i = 0, size = someList.size(); i &lt; size; i++) // do stuff\n</code></pre>\n<p>But since <code>Array#length</code> isn't a method, just a field, shouldn't it not have any difference? And if using an ArrayList, <code>size()</code> is just a getter so shouldn't that also be the same either way?</p>\n"},{"tags":["java","compare","equals","localtime"],"comments":[{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":4,"creation_date":1522714549,"post_id":49620467,"comment_id":86247818,"body_markdown":"Uh.. call `equals()`?","body":"Uh.. call <code>equals()</code>?"},{"owner":{"account_id":969721,"reputation":344518,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":2,"creation_date":1522714595,"post_id":49620467,"comment_id":86247832,"body_markdown":"You could start by reading the [JavaDocs](https://docs.oracle.com/javase/8/docs/api/java/time/LocalTime.html) or looking at the [Date/Time Tutorials](https://docs.oracle.com/javase/tutorial/datetime/iso/datetime.html)","body":"You could start by reading the <a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/LocalTime.html\" rel=\"nofollow noreferrer\">JavaDocs</a> or looking at the <a href=\"https://docs.oracle.com/javase/tutorial/datetime/iso/datetime.html\" rel=\"nofollow noreferrer\">Date/Time Tutorials</a>"},{"owner":{"account_id":10163824,"reputation":547,"user_id":7506425,"display_name":"Duong Anh"},"score":0,"creation_date":1522722161,"post_id":49620467,"comment_id":86249512,"body_markdown":"Possible duplicate of [Time comparison](https://stackoverflow.com/questions/2309558/time-comparison)","body":"Possible duplicate of <a href=\"https://stackoverflow.com/questions/2309558/time-comparison\">Time comparison</a>"}],"answers":[{"tags":[],"owner":{"account_id":4427390,"reputation":5224,"user_id":3605497,"display_name":"Tripp Kinetics"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1541518181,"creation_date":1522714668,"answer_id":49620490,"question_id":49620467,"body_markdown":"Try:\n\n    firstLocalTime.equals(secondLocalTime);\n\n`.equals()` is available for all `Object`s in Java.","title":"How to compare time in Java LocalTime?","body":"<p>Try:</p>\n\n<pre><code>firstLocalTime.equals(secondLocalTime);\n</code></pre>\n\n<p><code>.equals()</code> is available for all <code>Object</code>s in Java.</p>\n"},{"tags":[],"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1643504930,"creation_date":1522714673,"answer_id":49620491,"question_id":49620467,"body_markdown":"Compare using `LocalTime` instance methods: [`isBefore`][1], [`isAfter`][2], [`equals`][3], and [`compareTo`][4]. \r\n\r\n    LocalTime lt1 = LocalTime.of( 14 , 17 ) ;\r\n    LocalTime lt2 = LocalTime.of( 21 , 29 ) ;\r\n\r\n    boolean same = lt1.equals( lt2 ) ;\r\n\r\n\r\n# `equals` versus `isEqual`\r\n\r\n\r\nBe aware than some *java.time* classes (other than `LocalTime`) carry an `isEqual` method in addition to the `equals` method inherited from `Object`, with different semantics. \r\n\r\nFor example:\r\n\r\n - [`LocalDate.isEqual`](https://docs.oracle.com/javase/10/docs/api/java/time/LocalDate.html#isEqual(java.time.chrono.ChronoLocalDate)) versus [`LocalDate.equals`](https://docs.oracle.com/javase/10/docs/api/java/time/LocalDate.html#equals(java.lang.Object))\r\n - [`ZonedDateTime.isEqual`](https://docs.oracle.com/javase/10/docs/api/java/time/chrono/ChronoZonedDateTime.html#isEqual(java.time.chrono.ChronoZonedDateTime)) versus [`ZonedDateTime.equals`](https://docs.oracle.com/javase/10/docs/api/java/time/ZonedDateTime.html#equals(java.lang.Object))\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/10/docs/api/java/time/LocalTime.html#isBefore(java.time.LocalTime)\r\n  [2]: https://docs.oracle.com/javase/10/docs/api/java/time/LocalTime.html#isAfter(java.time.LocalTime)\r\n  [3]: https://docs.oracle.com/javase/10/docs/api/java/time/LocalTime.html#equals(java.lang.Object)\r\n  [4]: https://docs.oracle.com/javase/10/docs/api/java/time/LocalTime.html#compareTo(java.time.LocalTime)","title":"How to compare time in Java LocalTime?","body":"<p>Compare using <code>LocalTime</code> instance methods: <a href=\"https://docs.oracle.com/javase/10/docs/api/java/time/LocalTime.html#isBefore(java.time.LocalTime)\" rel=\"nofollow noreferrer\"><code>isBefore</code></a>, <a href=\"https://docs.oracle.com/javase/10/docs/api/java/time/LocalTime.html#isAfter(java.time.LocalTime)\" rel=\"nofollow noreferrer\"><code>isAfter</code></a>, <a href=\"https://docs.oracle.com/javase/10/docs/api/java/time/LocalTime.html#equals(java.lang.Object)\" rel=\"nofollow noreferrer\"><code>equals</code></a>, and <a href=\"https://docs.oracle.com/javase/10/docs/api/java/time/LocalTime.html#compareTo(java.time.LocalTime)\" rel=\"nofollow noreferrer\"><code>compareTo</code></a>.</p>\n<pre><code>LocalTime lt1 = LocalTime.of( 14 , 17 ) ;\nLocalTime lt2 = LocalTime.of( 21 , 29 ) ;\n\nboolean same = lt1.equals( lt2 ) ;\n</code></pre>\n<h1><code>equals</code> versus <code>isEqual</code></h1>\n<p>Be aware than some <em>java.time</em> classes (other than <code>LocalTime</code>) carry an <code>isEqual</code> method in addition to the <code>equals</code> method inherited from <code>Object</code>, with different semantics.</p>\n<p>For example:</p>\n<ul>\n<li><a href=\"https://docs.oracle.com/javase/10/docs/api/java/time/LocalDate.html#isEqual(java.time.chrono.ChronoLocalDate)\" rel=\"nofollow noreferrer\"><code>LocalDate.isEqual</code></a> versus <a href=\"https://docs.oracle.com/javase/10/docs/api/java/time/LocalDate.html#equals(java.lang.Object)\" rel=\"nofollow noreferrer\"><code>LocalDate.equals</code></a></li>\n<li><a href=\"https://docs.oracle.com/javase/10/docs/api/java/time/chrono/ChronoZonedDateTime.html#isEqual(java.time.chrono.ChronoZonedDateTime)\" rel=\"nofollow noreferrer\"><code>ZonedDateTime.isEqual</code></a> versus <a href=\"https://docs.oracle.com/javase/10/docs/api/java/time/ZonedDateTime.html#equals(java.lang.Object)\" rel=\"nofollow noreferrer\"><code>ZonedDateTime.equals</code></a></li>\n</ul>\n"}],"owner":{"account_id":13207779,"reputation":97,"user_id":9538958,"display_name":"FallonXay"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":14691,"favorite_count":0,"down_vote_count":4,"up_vote_count":9,"accepted_answer_id":49620490,"answer_count":2,"score":5,"last_activity_date":1643504930,"creation_date":1522714429,"question_id":49620467,"body_markdown":"Given two [LocalTime](https://docs.oracle.com/javase/8/docs/api/java/time/LocalTime.html) parameters in Java, I want to be able to compare the two times and see if they are equal (the same time). How would I do this?","title":"How to compare time in Java LocalTime?","body":"<p>Given two <a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/LocalTime.html\" rel=\"nofollow noreferrer\">LocalTime</a> parameters in Java, I want to be able to compare the two times and see if they are equal (the same time). How would I do this?</p>\n"},{"tags":["java","spring","spring-boot"],"answers":[{"tags":[],"owner":{"account_id":17930424,"reputation":21,"user_id":13027997,"display_name":"Devan K S"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1643501069,"creation_date":1643501069,"answer_id":70910809,"question_id":70910326,"body_markdown":"If you use Constructor injection on `RegionHandler` and not annotate that class with `@Component`, it should help you to use specific `Region` for creating the bean.\r\n```java\r\npublic class RegionHandler {\r\n\r\n    Region region;\r\n\r\n    public RegionHandler(Region region) {\r\n        this.region = region;\r\n    }\r\n}\r\n```\r\n\r\nNow your handlers can be registered as beans by changing your config file a bit\r\n```java\r\n@Configuration\r\npublic class RegionHandlerConfig{\r\n\r\n    @Bean(&quot;regionHandler1&quot;)\r\n    public RegionHandler getRegionHandlerOne(@Qualifier(&quot;region1props&quot;) Region region) {\r\n        return new RegionHandler(region);\r\n    }\r\n\r\n    @Bean(&quot;regionHandler2&quot;)\r\n    public RegionHandler getRegionHandlerTwo(@Qualifier(&quot;region2props&quot;) Region region) {\r\n        return new RegionHandler(region);\r\n    }\r\n}\r\n```\r\nI haven&#39;t compiled and checked but this is the basic idea.\r\n\r\nAlso, do look into whether this pattern would be extendable. I am guessing you have specific logic in the handler and publisher for each region. But I wonder how you would be able to extend it if you have to add more regions. A better structure might be to take a map of the regions from the config and have only one bean of handler and publisher each.\r\n","title":"How do I define a specific bean with a qualifier that would designate a specific bean for its dependancies?","body":"<p>If you use Constructor injection on <code>RegionHandler</code> and not annotate that class with <code>@Component</code>, it should help you to use specific <code>Region</code> for creating the bean.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class RegionHandler {\n\n    Region region;\n\n    public RegionHandler(Region region) {\n        this.region = region;\n    }\n}\n</code></pre>\n<p>Now your handlers can be registered as beans by changing your config file a bit</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\npublic class RegionHandlerConfig{\n\n    @Bean(&quot;regionHandler1&quot;)\n    public RegionHandler getRegionHandlerOne(@Qualifier(&quot;region1props&quot;) Region region) {\n        return new RegionHandler(region);\n    }\n\n    @Bean(&quot;regionHandler2&quot;)\n    public RegionHandler getRegionHandlerTwo(@Qualifier(&quot;region2props&quot;) Region region) {\n        return new RegionHandler(region);\n    }\n}\n</code></pre>\n<p>I haven't compiled and checked but this is the basic idea.</p>\n<p>Also, do look into whether this pattern would be extendable. I am guessing you have specific logic in the handler and publisher for each region. But I wonder how you would be able to extend it if you have to add more regions. A better structure might be to take a map of the regions from the config and have only one bean of handler and publisher each.</p>\n"}],"owner":{"account_id":13829810,"reputation":11,"user_id":16345689,"display_name":"user843219"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":57,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1643503630,"creation_date":1643495804,"question_id":70910326,"body_markdown":"First thanks for taking the time help. You are all Awesome!\r\n\r\nMy question:\r\nSay i have some nested properties in my application.yml\r\n```\r\nregions:\r\n region1:\r\n  delayTime: 10\r\n  threads: 2\r\n region2:\r\n  delayTime: 5\r\n  threads: 1\r\n\r\n```\r\n\r\nand a respective component with a config for the regions\r\n\r\n```\r\n@Component\r\npublic class Region{\r\n   public int delayTime;\r\n   public int threads;\r\n}\r\n```\r\n```\r\n@Configuration\r\npublic class RegionConfig{\r\n   @Bean(&quot;region1props&quot;)\r\n   @ConfigurationProperties(prefix =&quot;regions.region1&quot;)\r\n   public Region getRegion1(){\r\n        returns new Region();\r\n    }\r\n\r\n   @Bean(&quot;region2props&quot;)\r\n   @ConfigurationProperties(prefix =&quot;regions.region2&quot;)\r\n   public Region getRegion2(){\r\n        returns new Region();\r\n    }\r\n\r\n}\r\n```\r\n\r\nIf say I also had a `RegionHandler` Component  that had `Region` as a dependency:\r\n\r\n```\r\n@Component\r\npublic class RegionHandler{\r\n @AutoWired \r\n Region region;\r\n}\r\n```\r\n\r\n**ULTIMATELY** i want a `RegionOnePublisher` and `RegionTwoPublisher` Component with no config:\r\n```\r\n@Component\r\npublic class RegionOnePublisher{\r\n  @Autowired\r\n   RegionHandler regionOne;// &lt;-- need to configure Region depenandcy as &quot;region1props&quot; bean \r\n}\r\n//----------------------------------------------\r\n@Component\r\npublic class RegionTwoPublisher{\r\n  @Autowired\r\n   RegionHandler regionTwo; // &lt;-- need to configure Region depenandcy as &quot;region2props&quot; bean\r\n} \r\n```\r\n\r\nHow would I go about defining the config class for `RegionHandler` object such that `@Bean(&quot;region1props&quot;)` is the `Region` bean dependancy  injected for a `RegionHandler regionOne` and `@Bean(&quot;region2props&quot;)` as the `Region` bean dependancy  for `RegionHandler regionTwo`? \r\n\r\nWhat I have: [Edited]\r\n\r\n```\r\n@Component\r\npublic class RegionOnePublisher{\r\n  @Autowired\r\n  @Qualifier(&quot;regionOneProps&quot;)\r\n   RegionHandler regionOne;// &lt;-- need to configure Region depenandcy as &quot;region1props&quot; bean \r\n}\r\n//----------------------------------------------\r\n@Component\r\npublic class RegionTwoPublisher{\r\n  @Autowired\r\n  @Qualifier(&quot;regionTwoProps&quot;)\r\n   RegionHandler regionTwo; // &lt;-- need to configure Region depenandcy as &quot;region2props&quot; bean\r\n} \r\n}\r\n```\r\n\r\nThanks Guys!\r\n","title":"How do I define a specific bean with a qualifier that would designate a specific bean for its dependancies?","body":"<p>First thanks for taking the time help. You are all Awesome!</p>\n<p>My question:\nSay i have some nested properties in my application.yml</p>\n<pre><code>regions:\n region1:\n  delayTime: 10\n  threads: 2\n region2:\n  delayTime: 5\n  threads: 1\n\n</code></pre>\n<p>and a respective component with a config for the regions</p>\n<pre><code>@Component\npublic class Region{\n   public int delayTime;\n   public int threads;\n}\n</code></pre>\n<pre><code>@Configuration\npublic class RegionConfig{\n   @Bean(&quot;region1props&quot;)\n   @ConfigurationProperties(prefix =&quot;regions.region1&quot;)\n   public Region getRegion1(){\n        returns new Region();\n    }\n\n   @Bean(&quot;region2props&quot;)\n   @ConfigurationProperties(prefix =&quot;regions.region2&quot;)\n   public Region getRegion2(){\n        returns new Region();\n    }\n\n}\n</code></pre>\n<p>If say I also had a <code>RegionHandler</code> Component  that had <code>Region</code> as a dependency:</p>\n<pre><code>@Component\npublic class RegionHandler{\n @AutoWired \n Region region;\n}\n</code></pre>\n<p><strong>ULTIMATELY</strong> i want a <code>RegionOnePublisher</code> and <code>RegionTwoPublisher</code> Component with no config:</p>\n<pre><code>@Component\npublic class RegionOnePublisher{\n  @Autowired\n   RegionHandler regionOne;// &lt;-- need to configure Region depenandcy as &quot;region1props&quot; bean \n}\n//----------------------------------------------\n@Component\npublic class RegionTwoPublisher{\n  @Autowired\n   RegionHandler regionTwo; // &lt;-- need to configure Region depenandcy as &quot;region2props&quot; bean\n} \n</code></pre>\n<p>How would I go about defining the config class for <code>RegionHandler</code> object such that <code>@Bean(&quot;region1props&quot;)</code> is the <code>Region</code> bean dependancy  injected for a <code>RegionHandler regionOne</code> and <code>@Bean(&quot;region2props&quot;)</code> as the <code>Region</code> bean dependancy  for <code>RegionHandler regionTwo</code>?</p>\n<p>What I have: [Edited]</p>\n<pre><code>@Component\npublic class RegionOnePublisher{\n  @Autowired\n  @Qualifier(&quot;regionOneProps&quot;)\n   RegionHandler regionOne;// &lt;-- need to configure Region depenandcy as &quot;region1props&quot; bean \n}\n//----------------------------------------------\n@Component\npublic class RegionTwoPublisher{\n  @Autowired\n  @Qualifier(&quot;regionTwoProps&quot;)\n   RegionHandler regionTwo; // &lt;-- need to configure Region depenandcy as &quot;region2props&quot; bean\n} \n}\n</code></pre>\n<p>Thanks Guys!</p>\n"},{"tags":["java","android","activityresultcontracts"],"comments":[{"owner":{"account_id":39846,"reputation":991143,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"score":2,"creation_date":1643502211,"post_id":70910850,"comment_id":125357686,"body_markdown":"The value that you supply to `launch()` needs to be a `Uri` where you want the image to be written. `Uri.EMPTY` is not a valid location. Use `FileProvider` to get a `Uri` where you want to save the image.","body":"The value that you supply to <code>launch()</code> needs to be a <code>Uri</code> where you want the image to be written. <code>Uri.EMPTY</code> is not a valid location. Use <code>FileProvider</code> to get a <code>Uri</code> where you want to save the image."},{"owner":{"account_id":11192082,"reputation":41,"user_id":8212133,"display_name":"Jim"},"score":0,"creation_date":1643541224,"post_id":70910850,"comment_id":125362860,"body_markdown":"Ah OK, I was trying to treat it like any other variable.  I&#39;ll read up on `FileProvider` thank you very much.","body":"Ah OK, I was trying to treat it like any other variable.  I&#39;ll read up on <code>FileProvider</code> thank you very much."}],"owner":{"account_id":11192082,"reputation":41,"user_id":8212133,"display_name":"Jim"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":294,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1643501620,"creation_date":1643501620,"question_id":70910850,"body_markdown":"I&#39;m new to Android and Java.  I&#39;m trying to take a photo from the camera, and update an imageview with the result.  I&#39;m struggling and could use some points in the right direction.\r\n\r\nI&#39;ve set up an empty Uri variable:\r\n\r\n````Uri cameraOneUri = Uri.EMPTY;````\r\n\r\nMy button click calls this function:\r\n\r\n````\r\npublic void captureImage1(View view){\r\n        c1GetContent.launch(cameraOneUri);\r\n    }\r\n````\r\n\r\nAnd here&#39;s the registration:\r\n````\r\nActivityResultLauncher&lt;Uri&gt; c1GetContent = registerForActivityResult(new ActivityResultContracts.TakePicture(),\r\n            result -&gt; {\r\n                ImageView imageView1 = findViewById(R.id.imageView1);\r\n                imageView1.setImageURI(cameraOneUri);\r\n    });\r\n````\r\nBut I&#39;m getting a FileNotFoundException: No content provider:\r\n````\r\n    java.io.FileNotFoundException: No content provider: \r\n        at android.content.ContentResolver.openAssetFileDescriptor(ContentResolver.java:1846)\r\n        at android.content.ContentResolver.openOutputStream(ContentResolver.java:1562)\r\n        at android.content.ContentResolver.openOutputStream(ContentResolver.java:1537)\r\n        at com.android.camera.captureintent.state.StateSavingPicture.onEnter(StateSavingPicture.java:85)\r\n        at com.android.camera.captureintent.stateful.StateMachineImpl.jumpToState(StateMachineImpl.java:62)\r\n        at com.android.camera.captureintent.stateful.StateMachineImpl.processEvent(StateMachineImpl.java:110)\r\n        at com.android.camera.captureintent.state.StateOpeningCamera$9.onClick(StateOpeningCamera.java:307)\r\n````\r\nWhere should I begin to look?","title":"ActivityResultContracts.TakePicture() encountering FileNotFoundException when trying to update URI","body":"<p>I'm new to Android and Java.  I'm trying to take a photo from the camera, and update an imageview with the result.  I'm struggling and could use some points in the right direction.</p>\n<p>I've set up an empty Uri variable:</p>\n<p><code>Uri cameraOneUri = Uri.EMPTY;</code></p>\n<p>My button click calls this function:</p>\n<pre><code>public void captureImage1(View view){\n        c1GetContent.launch(cameraOneUri);\n    }\n</code></pre>\n<p>And here's the registration:</p>\n<pre><code>ActivityResultLauncher&lt;Uri&gt; c1GetContent = registerForActivityResult(new ActivityResultContracts.TakePicture(),\n            result -&gt; {\n                ImageView imageView1 = findViewById(R.id.imageView1);\n                imageView1.setImageURI(cameraOneUri);\n    });\n</code></pre>\n<p>But I'm getting a FileNotFoundException: No content provider:</p>\n<pre><code>    java.io.FileNotFoundException: No content provider: \n        at android.content.ContentResolver.openAssetFileDescriptor(ContentResolver.java:1846)\n        at android.content.ContentResolver.openOutputStream(ContentResolver.java:1562)\n        at android.content.ContentResolver.openOutputStream(ContentResolver.java:1537)\n        at com.android.camera.captureintent.state.StateSavingPicture.onEnter(StateSavingPicture.java:85)\n        at com.android.camera.captureintent.stateful.StateMachineImpl.jumpToState(StateMachineImpl.java:62)\n        at com.android.camera.captureintent.stateful.StateMachineImpl.processEvent(StateMachineImpl.java:110)\n        at com.android.camera.captureintent.state.StateOpeningCamera$9.onClick(StateOpeningCamera.java:307)\n</code></pre>\n<p>Where should I begin to look?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":20854541,"reputation":1009,"user_id":15318227,"display_name":"Gurkirat Singh Guliani"},"score":2,"creation_date":1643501099,"post_id":70910766,"comment_id":125357535,"body_markdown":"&quot;Also, I need to have two methods in the program and use the boolean method but I got stuck on it.&quot; - where exactly?","body":"&quot;Also, I need to have two methods in the program and use the boolean method but I got stuck on it.&quot; - where exactly?"},{"owner":{"account_id":1485367,"reputation":122993,"user_id":1393766,"display_name":"Pshemo"},"score":0,"creation_date":1643501358,"post_id":70910766,"comment_id":125357577,"body_markdown":"`a || b &amp;&amp; c || d` is same as `a || (b &amp;&amp; c) || d`. Also are you sure you need `||`? Note that `||` represents *sum* or ranges, while `&amp;&amp;` represents *intersection*.","body":"<code>a || b &amp;&amp; c || d</code> is same as <code>a || (b &amp;&amp; c) || d</code>. Also are you sure you need <code>||</code>? Note that <code>||</code> represents <i>sum</i> or ranges, while <code>&amp;&amp;</code> represents <i>intersection</i>."},{"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"score":0,"creation_date":1643509775,"post_id":70910766,"comment_id":125358595,"body_markdown":"Does this answer your question? [Nested functions in Java](https://stackoverflow.com/questions/7367714/nested-functions-in-java)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/7367714/nested-functions-in-java\">Nested functions in Java</a>"}],"answers":[{"tags":[],"owner":{"account_id":22354823,"reputation":16499,"user_id":16572295,"display_name":"Jo&#227;o Dias"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1643501245,"creation_date":1643501245,"answer_id":70910825,"question_id":70910766,"body_markdown":"Your current code does not compile. You need to make `MIN_AGE` and `MAX_AGE` constants. You also need to move `estado()` method outside `main()` method. And then you need to review your `estado()` implementation. It seems you are looking for something along the following lines:\r\n```java\r\nimport java.util.*;\r\n\r\npublic class Main {\r\n\r\n    static final int MIN_AGE = 18;\r\n    static final int MAX_AGE = 65;\r\n\r\n    public static void main(String[] args) {\r\n        String nome, nomes;\r\n        int ida, idade;\r\n\r\n        Scanner diSexta = new Scanner(System.in);\r\n        System.out.println(&quot;Please enter first person&#39;s name:&quot;);\r\n        nome = diSexta.nextLine();\r\n        System.out.print(&quot;Please enter &quot; + nome + &quot;&#39;s age:&quot;);\r\n        ida = diSexta.nextInt();\r\n        diSexta.nextLine();\r\n        System.out.println(&quot;Please enter second person&#39;s name:&quot;);\r\n        nomes = diSexta.nextLine();\r\n        System.out.print(&quot;Please enter &quot; + nomes + &quot;&#39;s age:&quot;);\r\n        idade = diSexta.nextInt();\r\n        System.out.print(estado(ida, idade));\r\n    }\r\n\r\n    public static boolean estado(int ida, int idade) {\r\n        return ida &gt;= MIN_AGE &amp;&amp; ida &lt;= MAX_AGE &amp;&amp; idade &gt;= MIN_AGE &amp;&amp; idade &lt;= MAX_AGE;\r\n    }\r\n}\r\n```","title":"Java method and boolean methods","body":"<p>Your current code does not compile. You need to make <code>MIN_AGE</code> and <code>MAX_AGE</code> constants. You also need to move <code>estado()</code> method outside <code>main()</code> method. And then you need to review your <code>estado()</code> implementation. It seems you are looking for something along the following lines:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.*;\n\npublic class Main {\n\n    static final int MIN_AGE = 18;\n    static final int MAX_AGE = 65;\n\n    public static void main(String[] args) {\n        String nome, nomes;\n        int ida, idade;\n\n        Scanner diSexta = new Scanner(System.in);\n        System.out.println(&quot;Please enter first person's name:&quot;);\n        nome = diSexta.nextLine();\n        System.out.print(&quot;Please enter &quot; + nome + &quot;'s age:&quot;);\n        ida = diSexta.nextInt();\n        diSexta.nextLine();\n        System.out.println(&quot;Please enter second person's name:&quot;);\n        nomes = diSexta.nextLine();\n        System.out.print(&quot;Please enter &quot; + nomes + &quot;'s age:&quot;);\n        idade = diSexta.nextInt();\n        System.out.print(estado(ida, idade));\n    }\n\n    public static boolean estado(int ida, int idade) {\n        return ida &gt;= MIN_AGE &amp;&amp; ida &lt;= MAX_AGE &amp;&amp; idade &gt;= MIN_AGE &amp;&amp; idade &lt;= MAX_AGE;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":20485417,"reputation":4847,"user_id":15032688,"display_name":"Sercan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1643501268,"creation_date":1643501268,"answer_id":70910828,"question_id":70910766,"body_markdown":"Logic error in `if` statement: All conditions must be evaluated with `&amp;&amp;`. Because the method returns true when `ida` variable is greater than `MIN_AGE` and `MAX_AGE`. The same applies to the control of the `idade` variable.\r\n\r\n```java\r\npublic static boolean estado() \r\n{\r\n    if((ida &gt;= MIN_AGE &amp;&amp; ida &lt;= MAX_AGE) &amp;&amp; (idade &gt;= MIN_AGE &amp;&amp; idade &lt;= MAX_AGE))\r\n        return true;\r\n    return false;\r\n}\r\n```","title":"Java method and boolean methods","body":"<p>Logic error in <code>if</code> statement: All conditions must be evaluated with <code>&amp;&amp;</code>. Because the method returns true when <code>ida</code> variable is greater than <code>MIN_AGE</code> and <code>MAX_AGE</code>. The same applies to the control of the <code>idade</code> variable.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static boolean estado() \n{\n    if((ida &gt;= MIN_AGE &amp;&amp; ida &lt;= MAX_AGE) &amp;&amp; (idade &gt;= MIN_AGE &amp;&amp; idade &lt;= MAX_AGE))\n        return true;\n    return false;\n}\n</code></pre>\n"}],"owner":{"account_id":22853239,"reputation":27,"user_id":16998493,"display_name":"Jorge de Paula Jr"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":87,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":70910825,"answer_count":2,"score":0,"last_activity_date":1643501268,"creation_date":1643500604,"question_id":70910766,"body_markdown":"I would like help with my java program. I&#39;m trying to compare two different inputs from the user and check if these inputs are between the minimum and maximum age. Also, I need to have two methods in the program and use the boolean method but I got stuck on it. Can someone help me to understand it better and fix it?\r\nWhat I have so far is:\r\n```java\r\nimport java.util.Scanner;\r\nclass Main {\r\n  public static void main(String[] args) {\r\n    String nome, nomes;\r\n    int ida, idade;\r\n    \r\n    final int MIN_AGE = 18;\r\n    final int MAX_AGE = 65;\r\n    \r\n    Scanner diSexta = new Scanner (System.in);\r\n    System.out.println(&quot;Please enter first person&#39;s name:&quot;);\r\n    nome = diSexta.nextLine();\r\n    System.out.print(&quot;Please enter &quot; + nome + &quot;&#39;s age:&quot;);\r\n    ida = diSexta.nextInt();\r\n    diSexta.nextLine();\r\n    System.out.println(&quot;Please enter second person&#39;s name:&quot;);\r\n    nomes = diSexta.nextLine();\r\n    System.out.print(&quot;Please enter &quot; + nomes + &quot;&#39;s age:&quot;);\r\n    idade = diSexta.nextInt();\r\n   \r\n    public static boolean estado() {\r\n    if (ida &gt;= MIN_AGE || ida &lt;= MAX_AGE &amp;&amp; idade &gt;= MIN_AGE || idade &lt;= MAX_AGE) {\r\n        return true;\r\n    } else {\r\n        return false;\r\n    }\r\n}\r\n```","title":"Java method and boolean methods","body":"<p>I would like help with my java program. I'm trying to compare two different inputs from the user and check if these inputs are between the minimum and maximum age. Also, I need to have two methods in the program and use the boolean method but I got stuck on it. Can someone help me to understand it better and fix it?\nWhat I have so far is:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.Scanner;\nclass Main {\n  public static void main(String[] args) {\n    String nome, nomes;\n    int ida, idade;\n    \n    final int MIN_AGE = 18;\n    final int MAX_AGE = 65;\n    \n    Scanner diSexta = new Scanner (System.in);\n    System.out.println(&quot;Please enter first person's name:&quot;);\n    nome = diSexta.nextLine();\n    System.out.print(&quot;Please enter &quot; + nome + &quot;'s age:&quot;);\n    ida = diSexta.nextInt();\n    diSexta.nextLine();\n    System.out.println(&quot;Please enter second person's name:&quot;);\n    nomes = diSexta.nextLine();\n    System.out.print(&quot;Please enter &quot; + nomes + &quot;'s age:&quot;);\n    idade = diSexta.nextInt();\n   \n    public static boolean estado() {\n    if (ida &gt;= MIN_AGE || ida &lt;= MAX_AGE &amp;&amp; idade &gt;= MIN_AGE || idade &lt;= MAX_AGE) {\n        return true;\n    } else {\n        return false;\n    }\n}\n</code></pre>\n"},{"tags":["java","jakarta-ee","jar","singleton","postconstruct"],"comments":[{"owner":{"account_id":4189699,"reputation":5,"user_id":3432588,"display_name":"Magatsu"},"score":0,"creation_date":1491918496,"post_id":43347770,"comment_id":73758959,"body_markdown":"It&#39;s java EE projects.","body":"It&#39;s java EE projects."},{"owner":{"account_id":4831406,"reputation":952,"user_id":3899529,"display_name":"Damien O&#39;Reilly"},"score":0,"creation_date":1491920227,"post_id":43347770,"comment_id":73760335,"body_markdown":"What container are you using?","body":"What container are you using?"},{"owner":{"account_id":4189699,"reputation":5,"user_id":3432588,"display_name":"Magatsu"},"score":0,"creation_date":1491920720,"post_id":43347770,"comment_id":73760724,"body_markdown":"For this project it&#39;s TomEE","body":"For this project it&#39;s TomEE"},{"owner":{"account_id":91502,"reputation":88301,"user_id":251173,"accept_rate":86,"display_name":"Buhake Sindi"},"score":0,"creation_date":1492007549,"post_id":43347770,"comment_id":73806936,"body_markdown":"Does your `SLF4J` load at startup?","body":"Does your <code>SLF4J</code> load at startup?"},{"owner":{"account_id":4189699,"reputation":5,"user_id":3432588,"display_name":"Magatsu"},"score":0,"creation_date":1492067997,"post_id":43347770,"comment_id":73833262,"body_markdown":"Yes, now it&#39;s good, it was not declarated in the log4j.xml of parent project.","body":"Yes, now it&#39;s good, it was not declarated in the log4j.xml of parent project."}],"owner":{"account_id":4189699,"reputation":5,"user_id":3432588,"display_name":"Magatsu"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":683,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1643500806,"creation_date":1491918254,"question_id":43347770,"body_markdown":"I need to create a little Jar which could be added to other projects (we use maven). This Jar must have a class that is called at startup and must log some basic information. I&#39;ve been hinted to use Singleton Startup and Postconstruct annotations to do so.\r\n\r\nSo far I&#39;ve created my Jar with this class which should log the JRE version :\r\n\r\n    import javax.annotation.PostConstruct;\r\n    import javax.ejb.Singleton;\r\n    import javax.ejb.Startup;\r\n    \r\n    import org.slf4j.Logger;\r\n    import org.slf4j.LoggerFactory;\r\n    \r\n    @Singleton\r\n    @Startup\r\n    public class App\r\n    {\r\n    \tprivate final static Logger LOGGER = LoggerFactory.getLogger(App.class);\r\n    \t\r\n    \tprivate AppInfo appInfo;\r\n    \r\n    \t@PostConstruct\r\n    \tpublic void init()\r\n        {   \r\n    \t\tappInfo  = new AppInfo();\r\n    \t\tString jreVersion = &quot;java not ready&quot;;\r\n    \t\ttry {\r\n    \t\t\tjreVersion = System.getProperty(&quot;java.version&quot;);\r\n    \t\t} catch (final Exception e) {\r\n    \t\t\tLOGGER.info(&quot;Can&#39;t get JRE version&quot;);\r\n    \t\t}\r\n    \t\tappInfo.setJreVersion(jreVersion);\r\n    \t\tLOGGER.info(&quot;[DiagTest] - The app is running with : &quot; + appInfo.getJreVersion());\r\n        }\r\n    \r\n    }\r\n\r\nThe AppInfo() is just an object with getters/setters.\r\n\r\nMy problem is when I import my jar in an other project, the init() method seems not to be called, I don&#39;t get any error nor any logs.\r\n\r\nI think I miss something obvious, but after looking thought multiple post I did not get this to work.\r\n\r\nHelp would be appreciated,\r\n\r\nThanks.\r\n\r\nEDIT: it&#39;s working with just a system.out.print, so it seems slf4j is not usable at startup","title":"Singleton and PostConstruct in lib jar not called at startup?","body":"<p>I need to create a little Jar which could be added to other projects (we use maven). This Jar must have a class that is called at startup and must log some basic information. I've been hinted to use Singleton Startup and Postconstruct annotations to do so.</p>\n<p>So far I've created my Jar with this class which should log the JRE version :</p>\n<pre><code>import javax.annotation.PostConstruct;\nimport javax.ejb.Singleton;\nimport javax.ejb.Startup;\n\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\n\n@Singleton\n@Startup\npublic class App\n{\n    private final static Logger LOGGER = LoggerFactory.getLogger(App.class);\n    \n    private AppInfo appInfo;\n\n    @PostConstruct\n    public void init()\n    {   \n        appInfo  = new AppInfo();\n        String jreVersion = &quot;java not ready&quot;;\n        try {\n            jreVersion = System.getProperty(&quot;java.version&quot;);\n        } catch (final Exception e) {\n            LOGGER.info(&quot;Can't get JRE version&quot;);\n        }\n        appInfo.setJreVersion(jreVersion);\n        LOGGER.info(&quot;[DiagTest] - The app is running with : &quot; + appInfo.getJreVersion());\n    }\n\n}\n</code></pre>\n<p>The AppInfo() is just an object with getters/setters.</p>\n<p>My problem is when I import my jar in an other project, the init() method seems not to be called, I don't get any error nor any logs.</p>\n<p>I think I miss something obvious, but after looking thought multiple post I did not get this to work.</p>\n<p>Help would be appreciated,</p>\n<p>Thanks.</p>\n<p>EDIT: it's working with just a system.out.print, so it seems slf4j is not usable at startup</p>\n"},{"tags":["java","hibernate","jsf","navigation","conditional-statements"],"answers":[{"tags":[],"owner":{"account_id":1681237,"reputation":1779,"user_id":1545425,"display_name":"Luca Tampellini"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1643499764,"creation_date":1392894010,"answer_id":21905701,"question_id":21665697,"body_markdown":"It seems that I added a redirect on the homepage which was connected to the `maintenanceModeOn` boolean flag, and didn&#39;t take in count the `hasBypassKey` flag.\r\n\r\nThe rule was deeply nested in some part of the code which I wrote long long time ago and I  forgot about.\r\n\r\n    &lt;h:panelGroup rendered=&quot;#{appConfigurationBean.maintenanceModeOn}&quot;&gt;\r\n        &lt;script&gt;\r\n            window.location = &quot;maintenance.faces&quot;;\r\n        &lt;/script&gt;\t\t\r\n    &lt;/h:panelGroup&gt;`\r\n","title":"Conditional navigation not working properly in JSF","body":"<p>It seems that I added a redirect on the homepage which was connected to the <code>maintenanceModeOn</code> boolean flag, and didn't take in count the <code>hasBypassKey</code> flag.</p>\n<p>The rule was deeply nested in some part of the code which I wrote long long time ago and I  forgot about.</p>\n<pre><code>&lt;h:panelGroup rendered=&quot;#{appConfigurationBean.maintenanceModeOn}&quot;&gt;\n    &lt;script&gt;\n        window.location = &quot;maintenance.faces&quot;;\n    &lt;/script&gt;       \n&lt;/h:panelGroup&gt;`\n</code></pre>\n"}],"owner":{"account_id":1681237,"reputation":1779,"user_id":1545425,"display_name":"Luca Tampellini"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":377,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":21905701,"answer_count":1,"score":1,"last_activity_date":1643500017,"creation_date":1391983639,"question_id":21665697,"body_markdown":"I am developing a website with JSF 2.0, hibernate and primefaces.\r\nI&#39;m implementing an admin panel where the website admin can put the whole application on &quot;maintenance mode&quot;. This is done by changing a flag on an application scoped bean (called on purpose `AppConfigurationBean`).\r\n\r\nIf the flag is active the user is necessarily returned to a page, called `maintenance.xhtml`, by a conditional navigation rule declared in `faces-config.xml`.\r\n\r\nThe user can bypass the maintenance page by inserting a special bypass key which can be given seldom by the admin. If he does so, a flag is activated on a special session scoped bean, which holds information about the user and is called `CurrentClientSessionBean`.\r\n\r\nThe navigation rule works if the value returned from a special method on the `CurrentClientSessionBean`, which take in counts the maintenance mode flag on the application bean and the &quot;has bypass key&quot; flag on himself.\r\n\r\nHere is the navigation rule on `faces-config.xml`:\r\n\r\n&lt;!-- language: lang-xml --&gt;\r\n\r\n    &lt;navigation-rule&gt;\r\n        &lt;description&gt;System&lt;/description&gt;\r\n        &lt;from-view-id&gt;*&lt;/from-view-id&gt;\r\n        &lt;navigation-case&gt;\r\n            &lt;display-name&gt;Maintenance Mode&lt;/display-name&gt;\r\n            &lt;from-outcome&gt;*&lt;/from-outcome&gt;\r\n            &lt;if&gt;#{currentClientSessionBean.toReturnToMaintenance}&lt;/if&gt;\r\n            &lt;to-view-id&gt;/maintenance.xhtml&lt;/to-view-id&gt;\r\n            &lt;redirect /&gt;\r\n        &lt;/navigation-case&gt;\r\n    &lt;/navigation-rule&gt;\r\n\r\n\r\nHere is the `maintenance.xhtml` page:\r\n\r\n&lt;!-- language: lang-xhtml --&gt;\r\n\r\n    &lt;ui:composition id=&quot;maintenance&quot; xmlns=&quot;http://www.w3.org/1999/xhtml&quot;\r\n        xmlns:h=&quot;http://java.sun.com/jsf/html&quot;\r\n        xmlns:f=&quot;http://java.sun.com/jsf/core&quot;\r\n        xmlns:ui=&quot;http://java.sun.com/jsf/facelets&quot;\r\n        xmlns:p=&quot;http://primefaces.org/ui&quot;\r\n        xmlns:plm=&quot;http://java.sun.com/jsf/composite/plmCustomComponents&quot;&gt;\r\n    \r\n        &lt;f:verbatim&gt;&amp;lt;!DOCTYPE html&amp;gt;&lt;/f:verbatim&gt;\r\n    \r\n        &lt;html&gt;\r\n    \r\n            &lt;h:head&gt;\r\n            \r\n            &lt;title&gt;#{msg.applicationTitle}&lt;/title&gt;\r\n            \r\n            &lt;meta charset=&quot;UTF-8&quot;&gt;&lt;/meta&gt;\r\n            &lt;meta http-equiv=&quot;content-type&quot; content=&quot;text/html; charset=utf-8&quot;&gt;&lt;/meta&gt;\r\n            \r\n            &lt;h:outputStylesheet library=&quot;default&quot; name=&quot;css/normalize.css&quot; /&gt;\r\n            &lt;h:outputStylesheet library=&quot;default&quot; name=&quot;css/icons.css&quot; /&gt;\r\n            &lt;h:outputStylesheet library=&quot;default&quot; name=&quot;css/main.css&quot; /&gt;\r\n            \r\n            &lt;/h:head&gt;\r\n            \r\n            &lt;f:metadata&gt;\r\n            &lt;ui:include src=&quot;metadata/browserViewParams.xhtml&quot; /&gt;\r\n            &lt;/f:metadata&gt;\r\n            \r\n            &lt;h:body&gt;\r\n            \r\n            &lt;div id=&quot;legalPart&quot;&gt;\r\n                &lt;ui:insert name=&quot;legalPart&quot;&gt;\r\n                &lt;ui:include src=&quot;/structure/legalPart.xhtml&quot; /&gt;\r\n                &lt;/ui:insert&gt;\r\n            &lt;/div&gt;\r\n            \r\n            &lt;p:panel&gt;\r\n            \r\n            &lt;h1&gt;\r\n                &lt;h:outputText value=&quot;#{msg.maintenancePageTitle}&quot; /&gt;\r\n            &lt;/h1&gt;\r\n            &lt;p&gt;\r\n                &lt;h:outputText value=&quot;#{msg.maintenancePageBodyMsg}&quot; /&gt;\r\n            &lt;/p&gt;\r\n            &lt;h:form&gt;\r\n                &lt;p:outputLabel for=&quot;bypassKeyInput&quot;\r\n                value=&quot;#{msg.maintenancePageInsertBypassKeyLabel}&quot; /&gt;\r\n                &lt;br /&gt;\r\n                &lt;p:inputText id=&quot;bypassKeyInput&quot;\r\n                value=&quot;#{maintenanceBacking.keyBuffer}&quot; required=&quot;true&quot; /&gt;\r\n                &lt;br /&gt;\r\n                &lt;p:message for=&quot;bypassKeyInput&quot; /&gt;\r\n\r\n                &lt;p:commandButton value=&quot;#{msg.checkPassword}&quot;\r\n                action=&quot;#{maintenanceBacking.checkBypassKey}&quot; ajax=&quot;false&quot; /&gt;\r\n            &lt;/h:form&gt;\r\n            \r\n            &lt;/p:panel&gt;\r\n            \r\n            &lt;ui:debug /&gt;\r\n            \r\n            &lt;/h:body&gt;\r\n    \r\n        &lt;/html&gt;\r\n    \r\n    &lt;/ui:composition&gt;\r\n\r\nThe maintenance backing is really simple, it simply checks if the bypasskey matches the true one and does a simple navigation to the home page if true.\r\n\r\nNow the `CurrentClientSessionBean` method for the conditional navigation is this one:\r\n\r\n    /**\r\n     * Special getter that determines if user should return to maintenance\r\n     * \r\n     * @return\r\n     */\r\n    public boolean isToReturnToMaintenance(){\r\n        try{\r\n            AppConfigurationBean appConfigurationBean = JSFAppUtils.findApplicationBean(&quot;appConfigurationBean&quot;);\r\n            boolean result = ((!this.hasBypassKey) &amp;&amp; appConfigurationBean.isMaintenanceModeOn());\r\n            return result;\r\n        }catch(NotFoundException e){\r\n            logger.error(&quot;NotFoundException thrown in isToReturnToMaintenance method&quot;, e);\r\n            throw new RuntimeException(&quot;NotFoundException thrown in isToReturnToMaintenance method&quot;, e);\r\n        }\r\n    }\r\n\r\n\r\n**Here is the main problem:** for some odd reason, when the maintenance mode is active the user is forced to return to maintenance page even if he puts the right bypass key in the input.\r\n\r\n**Furthermore:** There must be something really wrong within my application, because i tried to comment the conditional navigation rule, which means that maintenance page should be unreachable and changes to the maintenance mode should have no effect on the application, but still the maintenance mode system went on working with the same attitude I described.\r\n","title":"Conditional navigation not working properly in JSF","body":"<p>I am developing a website with JSF 2.0, hibernate and primefaces.\nI'm implementing an admin panel where the website admin can put the whole application on &quot;maintenance mode&quot;. This is done by changing a flag on an application scoped bean (called on purpose <code>AppConfigurationBean</code>).</p>\n<p>If the flag is active the user is necessarily returned to a page, called <code>maintenance.xhtml</code>, by a conditional navigation rule declared in <code>faces-config.xml</code>.</p>\n<p>The user can bypass the maintenance page by inserting a special bypass key which can be given seldom by the admin. If he does so, a flag is activated on a special session scoped bean, which holds information about the user and is called <code>CurrentClientSessionBean</code>.</p>\n<p>The navigation rule works if the value returned from a special method on the <code>CurrentClientSessionBean</code>, which take in counts the maintenance mode flag on the application bean and the &quot;has bypass key&quot; flag on himself.</p>\n<p>Here is the navigation rule on <code>faces-config.xml</code>:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;navigation-rule&gt;\n    &lt;description&gt;System&lt;/description&gt;\n    &lt;from-view-id&gt;*&lt;/from-view-id&gt;\n    &lt;navigation-case&gt;\n        &lt;display-name&gt;Maintenance Mode&lt;/display-name&gt;\n        &lt;from-outcome&gt;*&lt;/from-outcome&gt;\n        &lt;if&gt;#{currentClientSessionBean.toReturnToMaintenance}&lt;/if&gt;\n        &lt;to-view-id&gt;/maintenance.xhtml&lt;/to-view-id&gt;\n        &lt;redirect /&gt;\n    &lt;/navigation-case&gt;\n&lt;/navigation-rule&gt;\n</code></pre>\n<p>Here is the <code>maintenance.xhtml</code> page:</p>\n<pre class=\"lang-xhtml prettyprint-override\"><code>&lt;ui:composition id=&quot;maintenance&quot; xmlns=&quot;http://www.w3.org/1999/xhtml&quot;\n    xmlns:h=&quot;http://java.sun.com/jsf/html&quot;\n    xmlns:f=&quot;http://java.sun.com/jsf/core&quot;\n    xmlns:ui=&quot;http://java.sun.com/jsf/facelets&quot;\n    xmlns:p=&quot;http://primefaces.org/ui&quot;\n    xmlns:plm=&quot;http://java.sun.com/jsf/composite/plmCustomComponents&quot;&gt;\n\n    &lt;f:verbatim&gt;&amp;lt;!DOCTYPE html&amp;gt;&lt;/f:verbatim&gt;\n\n    &lt;html&gt;\n\n        &lt;h:head&gt;\n        \n        &lt;title&gt;#{msg.applicationTitle}&lt;/title&gt;\n        \n        &lt;meta charset=&quot;UTF-8&quot;&gt;&lt;/meta&gt;\n        &lt;meta http-equiv=&quot;content-type&quot; content=&quot;text/html; charset=utf-8&quot;&gt;&lt;/meta&gt;\n        \n        &lt;h:outputStylesheet library=&quot;default&quot; name=&quot;css/normalize.css&quot; /&gt;\n        &lt;h:outputStylesheet library=&quot;default&quot; name=&quot;css/icons.css&quot; /&gt;\n        &lt;h:outputStylesheet library=&quot;default&quot; name=&quot;css/main.css&quot; /&gt;\n        \n        &lt;/h:head&gt;\n        \n        &lt;f:metadata&gt;\n        &lt;ui:include src=&quot;metadata/browserViewParams.xhtml&quot; /&gt;\n        &lt;/f:metadata&gt;\n        \n        &lt;h:body&gt;\n        \n        &lt;div id=&quot;legalPart&quot;&gt;\n            &lt;ui:insert name=&quot;legalPart&quot;&gt;\n            &lt;ui:include src=&quot;/structure/legalPart.xhtml&quot; /&gt;\n            &lt;/ui:insert&gt;\n        &lt;/div&gt;\n        \n        &lt;p:panel&gt;\n        \n        &lt;h1&gt;\n            &lt;h:outputText value=&quot;#{msg.maintenancePageTitle}&quot; /&gt;\n        &lt;/h1&gt;\n        &lt;p&gt;\n            &lt;h:outputText value=&quot;#{msg.maintenancePageBodyMsg}&quot; /&gt;\n        &lt;/p&gt;\n        &lt;h:form&gt;\n            &lt;p:outputLabel for=&quot;bypassKeyInput&quot;\n            value=&quot;#{msg.maintenancePageInsertBypassKeyLabel}&quot; /&gt;\n            &lt;br /&gt;\n            &lt;p:inputText id=&quot;bypassKeyInput&quot;\n            value=&quot;#{maintenanceBacking.keyBuffer}&quot; required=&quot;true&quot; /&gt;\n            &lt;br /&gt;\n            &lt;p:message for=&quot;bypassKeyInput&quot; /&gt;\n\n            &lt;p:commandButton value=&quot;#{msg.checkPassword}&quot;\n            action=&quot;#{maintenanceBacking.checkBypassKey}&quot; ajax=&quot;false&quot; /&gt;\n        &lt;/h:form&gt;\n        \n        &lt;/p:panel&gt;\n        \n        &lt;ui:debug /&gt;\n        \n        &lt;/h:body&gt;\n\n    &lt;/html&gt;\n\n&lt;/ui:composition&gt;\n</code></pre>\n<p>The maintenance backing is really simple, it simply checks if the bypasskey matches the true one and does a simple navigation to the home page if true.</p>\n<p>Now the <code>CurrentClientSessionBean</code> method for the conditional navigation is this one:</p>\n<pre><code>/**\n * Special getter that determines if user should return to maintenance\n * \n * @return\n */\npublic boolean isToReturnToMaintenance(){\n    try{\n        AppConfigurationBean appConfigurationBean = JSFAppUtils.findApplicationBean(&quot;appConfigurationBean&quot;);\n        boolean result = ((!this.hasBypassKey) &amp;&amp; appConfigurationBean.isMaintenanceModeOn());\n        return result;\n    }catch(NotFoundException e){\n        logger.error(&quot;NotFoundException thrown in isToReturnToMaintenance method&quot;, e);\n        throw new RuntimeException(&quot;NotFoundException thrown in isToReturnToMaintenance method&quot;, e);\n    }\n}\n</code></pre>\n<p><strong>Here is the main problem:</strong> for some odd reason, when the maintenance mode is active the user is forced to return to maintenance page even if he puts the right bypass key in the input.</p>\n<p><strong>Furthermore:</strong> There must be something really wrong within my application, because i tried to comment the conditional navigation rule, which means that maintenance page should be unreachable and changes to the maintenance mode should have no effect on the application, but still the maintenance mode system went on working with the same attitude I described.</p>\n"},{"tags":["java","spring-boot-test","spring-profiles"],"comments":[{"owner":{"account_id":2366187,"reputation":60152,"user_id":2071828,"accept_rate":88,"display_name":"Boris the Spider"},"score":0,"creation_date":1643471757,"post_id":70904567,"comment_id":125350938,"body_markdown":"JUnit creates tests, not Spring. JUnit doesn’t care about Spring annotations.","body":"JUnit creates tests, not Spring. JUnit doesn’t care about Spring annotations."},{"owner":{"account_id":149941,"reputation":2907,"user_id":362792,"display_name":"Hitobat"},"score":0,"creation_date":1643474072,"post_id":70904567,"comment_id":125351554,"body_markdown":"Try \\@ActiveProfiles annotation instead.","body":"Try \\@ActiveProfiles annotation instead."},{"owner":{"account_id":2219863,"reputation":191,"user_id":1959534,"accept_rate":95,"display_name":"David S"},"score":0,"creation_date":1643490628,"post_id":70904567,"comment_id":125355628,"body_markdown":"@ActiveProfiles only activates a profile though? If I do that I still don&#39;t get the wanted behavior of being able to toggle if the application should start or not.","body":"@ActiveProfiles only activates a profile though? If I do that I still don&#39;t get the wanted behavior of being able to toggle if the application should start or not."}],"answers":[{"tags":[],"owner":{"account_id":298886,"reputation":40480,"user_id":605153,"accept_rate":67,"display_name":"Mark Bramnik"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1643471610,"creation_date":1643471610,"answer_id":70907160,"question_id":70904567,"body_markdown":"I was wondering why do you even need to rely on spring here? JUnit already has `@EnabledIf` annotation ([documentation][1]), so you can use it to not even attempt to run the test.\r\n\r\nIn my understanding it&#39;s even better, because this will work for all the tests that might even not run spring (unit tests for example). Also it should be better from the performance endpoint (you don&#39;t try to even run the Application Context, find/register beans, etc.)\r\n\r\n\r\n  [1]: https://junit.org/junit5/docs/5.7.1/api/org.junit.jupiter.api/org/junit/jupiter/api/condition/EnabledIf.html","title":"@SpringBootTest Toggable webEnvironment?","body":"<p>I was wondering why do you even need to rely on spring here? JUnit already has <code>@EnabledIf</code> annotation (<a href=\"https://junit.org/junit5/docs/5.7.1/api/org.junit.jupiter.api/org/junit/jupiter/api/condition/EnabledIf.html\" rel=\"nofollow noreferrer\">documentation</a>), so you can use it to not even attempt to run the test.</p>\n<p>In my understanding it's even better, because this will work for all the tests that might even not run spring (unit tests for example). Also it should be better from the performance endpoint (you don't try to even run the Application Context, find/register beans, etc.)</p>\n"}],"owner":{"account_id":2219863,"reputation":191,"user_id":1959534,"accept_rate":95,"display_name":"David S"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":193,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70907160,"answer_count":1,"score":0,"last_activity_date":1643499225,"creation_date":1643453445,"question_id":70904567,"body_markdown":"I want to toggle the webEnvironment config inside SpringBootTest to support running the tests in a pipeline (where the tests needs to be able to boot the server themselves) and locally (where I want to use a standalone server for faster tests.\r\n\r\nFigured having a Profile which I could set would be a good solution to it but SpringBootTest seems to flat out ignore whatever profile I attach at the same level, is it simply too early in Spring&#39;s lifecycle for it to pick up profiles? Is there a better way to do this?\r\n\r\n    @Profile(&quot;myProfile&quot;)\r\n    @SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.DEFINED_PORT) // Starts regardless of what @Profile is\r\n    public class MyClass{\r\n       ...\r\n    }\r\n\r\nE: Related question:\r\nhttps://stackoverflow.com/questions/51539714/springboottest-enable-disable-webenvironment-based-on-input\r\n\r\nE2: After some discussion down below I&#39;m ditching the remote mode, not worth the hassle.","title":"@SpringBootTest Toggable webEnvironment?","body":"<p>I want to toggle the webEnvironment config inside SpringBootTest to support running the tests in a pipeline (where the tests needs to be able to boot the server themselves) and locally (where I want to use a standalone server for faster tests.</p>\n<p>Figured having a Profile which I could set would be a good solution to it but SpringBootTest seems to flat out ignore whatever profile I attach at the same level, is it simply too early in Spring's lifecycle for it to pick up profiles? Is there a better way to do this?</p>\n<pre><code>@Profile(&quot;myProfile&quot;)\n@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.DEFINED_PORT) // Starts regardless of what @Profile is\npublic class MyClass{\n   ...\n}\n</code></pre>\n<p>E: Related question:\n<a href=\"https://stackoverflow.com/questions/51539714/springboottest-enable-disable-webenvironment-based-on-input\">SpringBootTest enable/disable webEnvironment based on input</a></p>\n<p>E2: After some discussion down below I'm ditching the remote mode, not worth the hassle.</p>\n"},{"tags":["java","spring","database","spring-boot","rest"],"comments":[{"owner":{"account_id":7392763,"reputation":3367,"user_id":5625696,"accept_rate":50,"display_name":"Borislav Stoilov"},"score":0,"creation_date":1643379845,"post_id":70895149,"comment_id":125331103,"body_markdown":"Can you try adding getter and setters to all fields in the entities, so we know its not that. JPA supports field based access but you have to put Column annotation to every field","body":"Can you try adding getter and setters to all fields in the entities, so we know its not that. JPA supports field based access but you have to put Column annotation to every field"},{"owner":{"account_id":22250524,"reputation":181,"user_id":16483521,"display_name":"ServletException"},"score":0,"creation_date":1643385223,"post_id":70895149,"comment_id":125333411,"body_markdown":"Hey, forgot to mention I already have getters and setters. I added @Column on each field but getting the same status 400 response :/","body":"Hey, forgot to mention I already have getters and setters. I added @Column on each field but getting the same status 400 response :/"}],"answers":[{"tags":[],"owner":{"account_id":449256,"reputation":2122,"user_id":843943,"accept_rate":75,"display_name":"Grim"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1643498269,"creation_date":1643498269,"answer_id":70910562,"question_id":70895149,"body_markdown":"Try to add modify your uploadPostImage to this code:\r\n\r\n    @Override\r\n    public FileUpload uploadPostImage(MultipartFile file, String emailAddress) throws IOException {\r\n        Post thePost = postRepository.findPostByPostCreatorEmail(emailAddress);\r\n\r\n        // new part:\r\n        if (thePost == null) {\r\n            throw new RuntimeException(&quot;No post found yet for eMail-Address &#39;&quot; + emailAddress + &quot;&#39; to store images for!&quot;);\r\n        }\r\n\r\n        String fileName = StringUtils.cleanPath(file.getOriginalFilename());\r\n        FileUpload fileDB = new FileUpload(++imageCount, fileName, file.getContentType(), emailAddress, file.getBytes(), thePost);\r\n\r\n        return fileUploadRepository.save(fileDB);\r\n    }","title":"Spring boot JPA with 1:M primary key null","body":"<p>Try to add modify your uploadPostImage to this code:</p>\n<pre><code>@Override\npublic FileUpload uploadPostImage(MultipartFile file, String emailAddress) throws IOException {\n    Post thePost = postRepository.findPostByPostCreatorEmail(emailAddress);\n\n    // new part:\n    if (thePost == null) {\n        throw new RuntimeException(&quot;No post found yet for eMail-Address '&quot; + emailAddress + &quot;' to store images for!&quot;);\n    }\n\n    String fileName = StringUtils.cleanPath(file.getOriginalFilename());\n    FileUpload fileDB = new FileUpload(++imageCount, fileName, file.getContentType(), emailAddress, file.getBytes(), thePost);\n\n    return fileUploadRepository.save(fileDB);\n}\n</code></pre>\n"}],"owner":{"account_id":22250524,"reputation":181,"user_id":16483521,"display_name":"ServletException"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":60,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1643498269,"creation_date":1643379183,"question_id":70895149,"body_markdown":"I have 2 entitied (Post and FileUploads), the Post entity is responsible for a user to create an advert/post and the FileUploads entity is responsible for handling image uploads together with a post. (A post can have multiple FileUploads/Images associated with it).\r\n\r\nThe issue is that I get an error:\r\n```  Column &#39;post_id&#39; cannot be null```\r\n\r\n\r\n- I&#39;m unsure as to what&#39;s causing it, The PK in the FileUpload entity is a String and the Post entity PK is a Long, I don&#39;t know if that could be the cause?\r\n\r\n- I am auto-generating my Post PK as well.\r\n\r\n\r\n-------\r\n**FileUpload.java** (Entity)\r\n```java\r\n@Entity\r\n@Table(name=&quot;file_upload&quot;)\r\npublic class FileUpload {\r\n\r\n    @Id\r\n    @GenericGenerator(name = &quot;uuid&quot;, strategy = &quot;uuid2&quot;)\r\n    @GeneratedValue(generator = &quot;uuid&quot;)\r\n    @Column(name=&quot;id&quot;)\r\n    private String fileId;\r\n\r\n    private int imageCount;\r\n\r\n    private String name;\r\n\r\n    private String type;\r\n\r\n    private String fileUploader;\r\n\r\n    @Lob\r\n    private byte[] data;\r\n\r\n    @ManyToOne(fetch = FetchType.LAZY)\r\n    @JoinColumn(name=&quot;post_id&quot;, nullable = false)\r\n    private Post post;\r\n\r\n    public FileUpload() {\r\n\r\n    }\r\n\r\n    public FileUpload(int imageCount, String name, String type, String fileUploader, byte[] data, Post post) {\r\n        this.imageCount = imageCount;\r\n        this.name = name;\r\n        this.type = type;\r\n        this.fileUploader = fileUploader;\r\n        this.data = data;\r\n        this.post = post;\r\n    }\r\n\r\n```\r\n\r\n\r\n--------\r\n\r\n**Post.java** (Entity)\r\n- Left out the other fields since i have a quite a bit\r\n```java\r\n@Entity\r\npublic class Post {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.AUTO)\r\n    private Long id;\r\n\r\n    @NotBlank(message = &quot;Required&quot;)\r\n    @Size(max=45, message = &quot;Maximum of 45 letters&quot;)\r\n    @Column(unique = true)\r\n    private String title;\r\n\r\n    private String postCreatorEmail;\r\n\r\n    private String postCreator;\r\n\r\n    @OneToMany(cascade = CascadeType.ALL, fetch = FetchType.EAGER, mappedBy = &quot;post&quot;)\r\n    private List&lt;FileUpload&gt; fileUploads = new ArrayList&lt;&gt;();\r\n\r\n\r\n    public Post() {\r\n    }\r\n```\r\n\r\n-----\r\n**FileServiceImpl.java**\r\n- Method to store images\r\n```java\r\n@Service\r\npublic class FileUploadServiceImpl implements FileUploadService{\r\n\r\n    @Autowired\r\n    private FileUploadRepository fileUploadRepository;\r\n\r\n    @Autowired\r\n    private PostRepository postRepository;\r\n\r\n    private int imageCount;\r\n\r\n\r\n    @Override\r\n    public FileUpload uploadPostImage(MultipartFile file, String emailAddress) throws IOException {\r\n        Post thePost = postRepository.findPostByPostCreatorEmail(emailAddress);\r\n\r\n\r\n        String fileName = StringUtils.cleanPath(file.getOriginalFilename());\r\n        FileUpload fileDB = new FileUpload(++imageCount, fileName, file.getContentType(), emailAddress, file.getBytes(), thePost);\r\n\r\n        return fileUploadRepository.save(fileDB);\r\n    }\r\n\r\n}\r\n\r\n```\r\n\r\n-----\r\n\r\n**PostServiceImpl.java**\r\n```java\r\n@Service\r\npublic class PostServiceImpl implements PostService{\r\n\r\n    @Autowired\r\n    private PostRepository postRepository;\r\n\r\n    @Autowired\r\n    private UserRepository userRepository;\r\n\r\n    @Autowired\r\n    private FileUploadServiceImpl fileUploadService;\r\n\r\n\r\n    private int count;\r\n\r\n\r\n    @Override\r\n    public Post createOrUpdatePost(String post, String emailAddress){\r\n\r\n        // Removed update code\r\n\r\n        Post thePost = new Post();\r\n\r\n        try {\r\n            User user = userRepository.findUserByEmailAddress(emailAddress);\r\n            ObjectMapper objectMapper = new ObjectMapper();\r\n\r\n            thePost = objectMapper.readValue(post, Post.class);\r\n            user.setTotalAds(++count);\r\n            thePost.setPostCreator(user.getFullName());\r\n            thePost.setPostCreatorEmail(emailAddress);\r\n            thePost.setFileUploads(thePost.getFileUploads());\r\n            thePost.setUser(user);\r\n            userRepository.save(user);\r\n            return postRepository.save(thePost);\r\n            // The ad with the same title already exists - go to catch block\r\n        } catch (Exception e) {\r\n            throw new PostAlreadyExistsException(&quot;Post with title &quot; + thePost.getTitle() + &quot; already exists&quot;);\r\n        }\r\n\r\n    }\r\n\r\n}\r\n\r\n```\r\n\r\n\r\n-----\r\n\r\n**PostController.java** (Only adding the handler method)\r\n```java\r\n    @PostMapping(&quot;/create&quot;)\r\n    public ResponseEntity&lt;?&gt; createPost(@RequestPart(&quot;file&quot;) MultipartFile file, @Valid @RequestPart String post,  BindingResult result, Principal principal) {\r\n        ResponseEntity&lt;?&gt; errorMap = errorValidationService.validationService(result);\r\n        if(errorMap != null) return errorMap;\r\n\r\n        String message = &quot;&quot;;\r\n        try {\r\n            fileUploadService.uploadPostImage(file, principal.getName());\r\n            postService.createOrUpdatePost(post, principal.getName());\r\n            message = &quot;Uploaded the file successfully: &quot; + file.getOriginalFilename();\r\n\r\n            return ResponseEntity.status(HttpStatus.OK).body(new ApiResponse(message, true));\r\n        } catch (Exception e) {\r\n            message = &quot;Could not upload the file: &quot; + file.getOriginalFilename() + &quot;!&quot;;\r\n            return ResponseEntity.status(HttpStatus.BAD_REQUEST).body(new ApiResponse(message, false));\r\n        }\r\n\r\n    }\r\n```\r\n\r\n\r\n-----\r\n**Postman results**\r\n[![400 error][1]][1]\r\n\r\n\r\n**Console output**\r\n[![console output][2]][2]\r\n\r\n\r\n**Post DDL MySQL**\r\n[![Post DDL][3]][3]\r\n\r\n\r\n**FileUpload DDL MySQL**\r\n[![FileUpload DDL][4]][4]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/qS1xa.png\r\n  [2]: https://i.stack.imgur.com/B2fBk.png\r\n  [3]: https://i.stack.imgur.com/yvXvh.png\r\n  [4]: https://i.stack.imgur.com/aTec6.png","title":"Spring boot JPA with 1:M primary key null","body":"<p>I have 2 entitied (Post and FileUploads), the Post entity is responsible for a user to create an advert/post and the FileUploads entity is responsible for handling image uploads together with a post. (A post can have multiple FileUploads/Images associated with it).</p>\n<p>The issue is that I get an error:\n<code>  Column 'post_id' cannot be null</code></p>\n<ul>\n<li><p>I'm unsure as to what's causing it, The PK in the FileUpload entity is a String and the Post entity PK is a Long, I don't know if that could be the cause?</p>\n</li>\n<li><p>I am auto-generating my Post PK as well.</p>\n</li>\n</ul>\n<hr />\n<p><strong>FileUpload.java</strong> (Entity)</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Entity\n@Table(name=&quot;file_upload&quot;)\npublic class FileUpload {\n\n    @Id\n    @GenericGenerator(name = &quot;uuid&quot;, strategy = &quot;uuid2&quot;)\n    @GeneratedValue(generator = &quot;uuid&quot;)\n    @Column(name=&quot;id&quot;)\n    private String fileId;\n\n    private int imageCount;\n\n    private String name;\n\n    private String type;\n\n    private String fileUploader;\n\n    @Lob\n    private byte[] data;\n\n    @ManyToOne(fetch = FetchType.LAZY)\n    @JoinColumn(name=&quot;post_id&quot;, nullable = false)\n    private Post post;\n\n    public FileUpload() {\n\n    }\n\n    public FileUpload(int imageCount, String name, String type, String fileUploader, byte[] data, Post post) {\n        this.imageCount = imageCount;\n        this.name = name;\n        this.type = type;\n        this.fileUploader = fileUploader;\n        this.data = data;\n        this.post = post;\n    }\n\n</code></pre>\n<hr />\n<p><strong>Post.java</strong> (Entity)</p>\n<ul>\n<li>Left out the other fields since i have a quite a bit</li>\n</ul>\n<pre class=\"lang-java prettyprint-override\"><code>@Entity\npublic class Post {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.AUTO)\n    private Long id;\n\n    @NotBlank(message = &quot;Required&quot;)\n    @Size(max=45, message = &quot;Maximum of 45 letters&quot;)\n    @Column(unique = true)\n    private String title;\n\n    private String postCreatorEmail;\n\n    private String postCreator;\n\n    @OneToMany(cascade = CascadeType.ALL, fetch = FetchType.EAGER, mappedBy = &quot;post&quot;)\n    private List&lt;FileUpload&gt; fileUploads = new ArrayList&lt;&gt;();\n\n\n    public Post() {\n    }\n</code></pre>\n<hr />\n<p><strong>FileServiceImpl.java</strong></p>\n<ul>\n<li>Method to store images</li>\n</ul>\n<pre class=\"lang-java prettyprint-override\"><code>@Service\npublic class FileUploadServiceImpl implements FileUploadService{\n\n    @Autowired\n    private FileUploadRepository fileUploadRepository;\n\n    @Autowired\n    private PostRepository postRepository;\n\n    private int imageCount;\n\n\n    @Override\n    public FileUpload uploadPostImage(MultipartFile file, String emailAddress) throws IOException {\n        Post thePost = postRepository.findPostByPostCreatorEmail(emailAddress);\n\n\n        String fileName = StringUtils.cleanPath(file.getOriginalFilename());\n        FileUpload fileDB = new FileUpload(++imageCount, fileName, file.getContentType(), emailAddress, file.getBytes(), thePost);\n\n        return fileUploadRepository.save(fileDB);\n    }\n\n}\n\n</code></pre>\n<hr />\n<p><strong>PostServiceImpl.java</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>@Service\npublic class PostServiceImpl implements PostService{\n\n    @Autowired\n    private PostRepository postRepository;\n\n    @Autowired\n    private UserRepository userRepository;\n\n    @Autowired\n    private FileUploadServiceImpl fileUploadService;\n\n\n    private int count;\n\n\n    @Override\n    public Post createOrUpdatePost(String post, String emailAddress){\n\n        // Removed update code\n\n        Post thePost = new Post();\n\n        try {\n            User user = userRepository.findUserByEmailAddress(emailAddress);\n            ObjectMapper objectMapper = new ObjectMapper();\n\n            thePost = objectMapper.readValue(post, Post.class);\n            user.setTotalAds(++count);\n            thePost.setPostCreator(user.getFullName());\n            thePost.setPostCreatorEmail(emailAddress);\n            thePost.setFileUploads(thePost.getFileUploads());\n            thePost.setUser(user);\n            userRepository.save(user);\n            return postRepository.save(thePost);\n            // The ad with the same title already exists - go to catch block\n        } catch (Exception e) {\n            throw new PostAlreadyExistsException(&quot;Post with title &quot; + thePost.getTitle() + &quot; already exists&quot;);\n        }\n\n    }\n\n}\n\n</code></pre>\n<hr />\n<p><strong>PostController.java</strong> (Only adding the handler method)</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @PostMapping(&quot;/create&quot;)\n    public ResponseEntity&lt;?&gt; createPost(@RequestPart(&quot;file&quot;) MultipartFile file, @Valid @RequestPart String post,  BindingResult result, Principal principal) {\n        ResponseEntity&lt;?&gt; errorMap = errorValidationService.validationService(result);\n        if(errorMap != null) return errorMap;\n\n        String message = &quot;&quot;;\n        try {\n            fileUploadService.uploadPostImage(file, principal.getName());\n            postService.createOrUpdatePost(post, principal.getName());\n            message = &quot;Uploaded the file successfully: &quot; + file.getOriginalFilename();\n\n            return ResponseEntity.status(HttpStatus.OK).body(new ApiResponse(message, true));\n        } catch (Exception e) {\n            message = &quot;Could not upload the file: &quot; + file.getOriginalFilename() + &quot;!&quot;;\n            return ResponseEntity.status(HttpStatus.BAD_REQUEST).body(new ApiResponse(message, false));\n        }\n\n    }\n</code></pre>\n<hr />\n<p><strong>Postman results</strong>\n<a href=\"https://i.stack.imgur.com/qS1xa.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/qS1xa.png\" alt=\"400 error\" /></a></p>\n<p><strong>Console output</strong>\n<a href=\"https://i.stack.imgur.com/B2fBk.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/B2fBk.png\" alt=\"console output\" /></a></p>\n<p><strong>Post DDL MySQL</strong>\n<a href=\"https://i.stack.imgur.com/yvXvh.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/yvXvh.png\" alt=\"Post DDL\" /></a></p>\n<p><strong>FileUpload DDL MySQL</strong>\n<a href=\"https://i.stack.imgur.com/aTec6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/aTec6.png\" alt=\"FileUpload DDL\" /></a></p>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":22354823,"reputation":16499,"user_id":16572295,"display_name":"Jo&#227;o Dias"},"score":0,"creation_date":1642458731,"post_id":70748152,"comment_id":125071623,"body_markdown":"Can you please add your main class and also your `pom.xml`? Thanks!","body":"Can you please add your main class and also your <code>pom.xml</code>? Thanks!"},{"owner":{"account_id":23598798,"reputation":75,"user_id":17743707,"display_name":"cyze"},"score":0,"creation_date":1642459084,"post_id":70748152,"comment_id":125071691,"body_markdown":"I did. Thx for the quick reply..","body":"I did. Thx for the quick reply.."},{"owner":{"account_id":23598798,"reputation":75,"user_id":17743707,"display_name":"cyze"},"score":0,"creation_date":1642460715,"post_id":70748152,"comment_id":125072041,"body_markdown":"An attempt was made to call a method that does not exist. The attempt was made from the following location:\n\n    org.springframework.data.jpa.mapping.JpaPersistentPropertyImpl.getPersistentEntityTypeInformation(JpaPersistentPropertyImpl.java:145)\n\nThe following method did not exist:\n\n    &#39;java.lang.Iterable org.springframework.data.mapping.model.AnnotationBasedPersistentProperty.getPersistentEntityTypeInformation()&#39;\n\nI tried to reimport everything but no luck.","body":"An attempt was made to call a method that does not exist. The attempt was made from the following location:      org.springframework.data.jpa.mapping.JpaPersistentPropertyIm&zwnj;&#8203;pl.getPersistentEnti&zwnj;&#8203;tyTypeInformation(Jp&zwnj;&#8203;aPersistentPropertyI&zwnj;&#8203;mpl.java:145)  The following method did not exist:      &#39;java.lang.Iterable org.springframework.data.mapping.model.AnnotationBasedPersis&zwnj;&#8203;tentProperty.getPers&zwnj;&#8203;istentEntityTypeInfo&zwnj;&#8203;rmation()&#39;  I tried to reimport everything but no luck."},{"owner":{"account_id":3192259,"reputation":117609,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1642487109,"post_id":70748152,"comment_id":125076424,"body_markdown":"Add `spring-boot-starter-data-jpa` remove the `spring-data-commons` and `javax.persistence-api` dependencies.","body":"Add <code>spring-boot-starter-data-jpa</code> remove the <code>spring-data-commons</code> and <code>javax.persistence-api</code> dependencies."}],"answers":[{"tags":[],"owner":{"account_id":12211376,"reputation":390,"user_id":8913066,"display_name":"Murat"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1642459437,"creation_date":1642459437,"answer_id":70748358,"question_id":70748152,"body_markdown":"Can you add `@Repository` annotation to `FoodRepository` interface.\r\n\r\n    @Repository\r\n    public interface FoodRepository extends CrudRepository&lt;Food, Integer&gt; {}","title":"Spring Java - Parameter 0 of constructor","body":"<p>Can you add <code>@Repository</code> annotation to <code>FoodRepository</code> interface.</p>\n<pre><code>@Repository\npublic interface FoodRepository extends CrudRepository&lt;Food, Integer&gt; {}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":22354823,"reputation":16499,"user_id":16572295,"display_name":"Jo&#227;o Dias"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1642501931,"creation_date":1642459776,"answer_id":70748407,"question_id":70748152,"body_markdown":"You need to replace `spring-boot-starter-jdbc` with `spring-boot-starter-data-jpa` as follows:\r\n```xml\r\n&lt;dependencies&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n    \t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n    \t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n    \t&lt;groupId&gt;com.h2database&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;h2&lt;/artifactId&gt;\r\n    \t&lt;scope&gt;runtime&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n    \t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n    \t&lt;scope&gt;test&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n&lt;/dependencies&gt;\r\n```\r\n\r\nYou can have a look at the following links the difference between them, but basically, JPA helps you deal with your Database data by mapping it directly to Java objects:\r\n - https://www.baeldung.com/jpa-vs-jdbc\r\n - https://stackoverflow.com/questions/11881548/jpa-or-jdbc-how-are-they-different","title":"Spring Java - Parameter 0 of constructor","body":"<p>You need to replace <code>spring-boot-starter-jdbc</code> with <code>spring-boot-starter-data-jpa</code> as follows:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.h2database&lt;/groupId&gt;\n        &lt;artifactId&gt;h2&lt;/artifactId&gt;\n        &lt;scope&gt;runtime&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n</code></pre>\n<p>You can have a look at the following links the difference between them, but basically, JPA helps you deal with your Database data by mapping it directly to Java objects:</p>\n<ul>\n<li><a href=\"https://www.baeldung.com/jpa-vs-jdbc\" rel=\"nofollow noreferrer\">https://www.baeldung.com/jpa-vs-jdbc</a></li>\n<li><a href=\"https://stackoverflow.com/questions/11881548/jpa-or-jdbc-how-are-they-different\">JPA or JDBC, how are they different?</a></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":6948446,"reputation":55,"user_id":5331921,"display_name":"flashleo"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1642469394,"creation_date":1642469394,"answer_id":70749348,"question_id":70748152,"body_markdown":"Add @Repository annotation to FoodRepository interface\r\nand also @Autowired annotation to the FoodRepository in FoodController.","title":"Spring Java - Parameter 0 of constructor","body":"<p>Add @Repository annotation to FoodRepository interface\nand also @Autowired annotation to the FoodRepository in FoodController.</p>\n"},{"tags":[],"owner":{"account_id":22604872,"reputation":2005,"user_id":16785907,"display_name":"Mikhail2048"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1643498086,"creation_date":1643498086,"answer_id":70910541,"question_id":70748152,"body_markdown":"I think you are just a little bit confused with spring-jdbc, spring-data and spring persistence interfaces abstraction, let me help. TL;DR solution is at the bottom:\r\n\r\nIn the constructor of `FoodController` you are declaring `FoodRepository` as a parameter, so spring have to find the bean of this time at runtime in order to create bean of `FoodController`. You have declared `FoodRepository` and extend it from `CrudRepository`. I guess, that you have done it with the assumption, that spring will create an implementation of `FoodRepository` at runtime (because it extends `CrudRepository`). But, unfortunately, it is **not** the `spring-core` module, that will create bean of `FoodRepsitory`, nor it is `spring-jdbc`. This interfaces are the part of spring-data project. So, for creation of the bean of the type `FoodRepository` is responsible current spring-data project in your classpath (I mean, it could be `spring-data-jdbc`, `spring-data-jpa` or whatever). This interfaces (`CrudRepository`, `Repository` e.t.c.) are common for all of the spring data projects, so they are shipped in `spring-data-commons` jar, this is why you have them available in classpath, because you have included `spring-data-commons` explicitly:\r\n\r\n      &lt;dependency&gt;\r\n          &lt;groupId&gt;org.springframework.data&lt;/groupId&gt;\r\n          &lt;artifactId&gt;spring-data-commons&lt;/artifactId&gt;\r\n          &lt;version&gt;2.5.1&lt;/version&gt;\r\n      &lt;/dependency&gt;\r\n\r\nAnother thing is that this starter:\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-jdbc&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n\r\ndoes not do anything with `spring-data` project - it just brings spring-jdbc, Hikari connection pool, and some other spring-boot stuff. In other words, the problem is that you do not have any `spring-data` project in your classpath, thats why `FoodRepository` bean is not created.\r\n\r\nAlso note: `@Entity` does not make sense here, becuase you do not have any jpa persistence provider in classpath\r\n\r\n**Solution:** \r\n\r\nTo solve the problem, I suggest you to \r\n\r\n1) Remove `spring-data-commons` dependency from `pom.xml`\r\n2) Include `spring-boot-starter-data-jpa` into your project (into `pom.xml`). It will bring the appropriate version of `spring-data-commons` dependency.\r\n\r\nHope it helped, have a nice day!\r\n","title":"Spring Java - Parameter 0 of constructor","body":"<p>I think you are just a little bit confused with spring-jdbc, spring-data and spring persistence interfaces abstraction, let me help. TL;DR solution is at the bottom:</p>\n<p>In the constructor of <code>FoodController</code> you are declaring <code>FoodRepository</code> as a parameter, so spring have to find the bean of this time at runtime in order to create bean of <code>FoodController</code>. You have declared <code>FoodRepository</code> and extend it from <code>CrudRepository</code>. I guess, that you have done it with the assumption, that spring will create an implementation of <code>FoodRepository</code> at runtime (because it extends <code>CrudRepository</code>). But, unfortunately, it is <strong>not</strong> the <code>spring-core</code> module, that will create bean of <code>FoodRepsitory</code>, nor it is <code>spring-jdbc</code>. This interfaces are the part of spring-data project. So, for creation of the bean of the type <code>FoodRepository</code> is responsible current spring-data project in your classpath (I mean, it could be <code>spring-data-jdbc</code>, <code>spring-data-jpa</code> or whatever). This interfaces (<code>CrudRepository</code>, <code>Repository</code> e.t.c.) are common for all of the spring data projects, so they are shipped in <code>spring-data-commons</code> jar, this is why you have them available in classpath, because you have included <code>spring-data-commons</code> explicitly:</p>\n<pre><code>  &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework.data&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-data-commons&lt;/artifactId&gt;\n      &lt;version&gt;2.5.1&lt;/version&gt;\n  &lt;/dependency&gt;\n</code></pre>\n<p>Another thing is that this starter:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-jdbc&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>does not do anything with <code>spring-data</code> project - it just brings spring-jdbc, Hikari connection pool, and some other spring-boot stuff. In other words, the problem is that you do not have any <code>spring-data</code> project in your classpath, thats why <code>FoodRepository</code> bean is not created.</p>\n<p>Also note: <code>@Entity</code> does not make sense here, becuase you do not have any jpa persistence provider in classpath</p>\n<p><strong>Solution:</strong></p>\n<p>To solve the problem, I suggest you to</p>\n<ol>\n<li>Remove <code>spring-data-commons</code> dependency from <code>pom.xml</code></li>\n<li>Include <code>spring-boot-starter-data-jpa</code> into your project (into <code>pom.xml</code>). It will bring the appropriate version of <code>spring-data-commons</code> dependency.</li>\n</ol>\n<p>Hope it helped, have a nice day!</p>\n"}],"owner":{"account_id":23598798,"reputation":75,"user_id":17743707,"display_name":"cyze"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":821,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":4,"score":1,"last_activity_date":1643498086,"creation_date":1642457827,"question_id":70748152,"body_markdown":"I&#39;m trying to write a simple CRUD program and I get this error. The program is based after codecademy project. Not sure why I doesn&#39;t work.\r\n\r\nIf I comment out the constructor the error disappears.I don&#39;t have anything in my properties.\r\n\r\nCan someone give me a hand?\r\n\r\n    Description:\r\n    \r\n    Parameter 0 of constructor in com.example.FitApp3.controller.FoodController required a bean of type &#39;com.example.FitApp3.repository.FoodRepository&#39; that could not be found.\r\n    \r\n    \r\n    Action:\r\n    \r\n    Consider defining a bean of type &#39;com.example.FitApp3.repository.FoodRepository&#39; in your configuration.\r\n    \r\n    \r\n    Process finished with exit code 1\r\n\r\nThis is my code:\r\n\r\nEntity/Food.java\r\n```java\r\nimport javax.persistence.Entity;\r\nimport javax.persistence.GeneratedValue;\r\nimport javax.persistence.GenerationType;\r\nimport javax.persistence.Id;\r\n\r\n@Entity\r\npublic class Food extends com.example.FitApp3.model.Entity {\r\n    private String foodName;\r\n    private int foodKcal;\r\n    private int foodProtein;\r\n    private int foodCarb;\r\n    private int foodFat;\r\n\r\n    public String getFoodName() {\r\n        return foodName;\r\n    }\r\n\r\n    public void setFoodName(String foodName) {\r\n        this.foodName = foodName;\r\n    }\r\n\r\n    public int getFoodKcal() {\r\n        return foodKcal;\r\n    }\r\n\r\n    public void setFoodKcal(int foodKcal) {\r\n        this.foodKcal = foodKcal;\r\n    }\r\n\r\n    public int getFoodProtein() {\r\n        return foodProtein;\r\n    }\r\n\r\n    public void setFoodProtein(int foodProtein) {\r\n        this.foodProtein = foodProtein;\r\n    }\r\n\r\n    public int getFoodCarb() {\r\n        return foodCarb;\r\n    }\r\n\r\n    public void setFoodCarb(int foodCarb) {\r\n        this.foodCarb = foodCarb;\r\n    }\r\n\r\n    public int getFoodFat() {\r\n        return foodFat;\r\n    }\r\n\r\n    public void setFoodFat(int foodFat) {\r\n        this.foodFat = foodFat;\r\n    }\r\n}\r\n```\r\n\r\nRepository/FoodRepository.java\r\n```java\r\npublic interface FoodRepository extends CrudRepository&lt;Food, Integer&gt; {}\r\n```\r\n\r\nController/FoodController.java\r\n```java\r\n@RestController\r\npublic class FoodController {\r\n    private FoodRepository foodRepository;\r\n\r\n    public FoodController(FoodRepository foodRepository) {\r\n        this.foodRepository = foodRepository;\r\n    }\r\n}\r\n```\r\n\r\nMainclass\r\n```java\r\n@SpringBootApplication\r\npublic class FitApp3Application {\r\n    public static void main(String[] args) {\r\n        SpringApplication.run(FitApp3Application.class, args);\r\n        System.out.println(&quot;hello world&quot;);\r\n    }\r\n}\r\n```\r\n\r\npom.xml\r\n```xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;parent&gt;\r\n  \t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n  \t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n  \t\t&lt;version&gt;2.6.2&lt;/version&gt;\r\n  \t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\t&lt;groupId&gt;com.example&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;FitApp3&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;name&gt;FitApp3&lt;/name&gt;\r\n\t&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\r\n\t&lt;properties&gt;\r\n\t\t  &lt;java.version&gt;17&lt;/java.version&gt;\r\n\t&lt;/properties&gt;\r\n\t&lt;dependencies&gt;\r\n  \t\t&lt;dependency&gt;\r\n  \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n  \t\t\t&lt;artifactId&gt;spring-boot-starter-jdbc&lt;/artifactId&gt;\r\n  \t\t&lt;/dependency&gt;\r\n  \t\t&lt;dependency&gt;\r\n  \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n  \t\t\t&lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\r\n  \t\t&lt;/dependency&gt;\r\n  \t\t&lt;dependency&gt;\r\n  \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n  \t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n  \t\t&lt;/dependency&gt;\r\n\r\n  \t\t&lt;dependency&gt;\r\n  \t\t\t&lt;groupId&gt;com.h2database&lt;/groupId&gt;\r\n  \t\t\t&lt;artifactId&gt;h2&lt;/artifactId&gt;\r\n  \t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n  \t\t&lt;/dependency&gt;\r\n  \t\t&lt;dependency&gt;\r\n  \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n  \t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n  \t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n  \t\t&lt;/dependency&gt;\r\n      &lt;dependency&gt;\r\n          &lt;groupId&gt;javax.persistence&lt;/groupId&gt;\r\n          &lt;artifactId&gt;javax.persistence-api&lt;/artifactId&gt;\r\n          &lt;version&gt;2.2&lt;/version&gt;\r\n      &lt;/dependency&gt;\r\n      &lt;dependency&gt;\r\n          &lt;groupId&gt;org.springframework.data&lt;/groupId&gt;\r\n          &lt;artifactId&gt;spring-data-commons&lt;/artifactId&gt;\r\n          &lt;version&gt;2.5.1&lt;/version&gt;\r\n      &lt;/dependency&gt;\r\n  &lt;/dependencies&gt;\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n&lt;/project&gt;\r\n```","title":"Spring Java - Parameter 0 of constructor","body":"<p>I'm trying to write a simple CRUD program and I get this error. The program is based after codecademy project. Not sure why I doesn't work.</p>\n<p>If I comment out the constructor the error disappears.I don't have anything in my properties.</p>\n<p>Can someone give me a hand?</p>\n<pre><code>Description:\n\nParameter 0 of constructor in com.example.FitApp3.controller.FoodController required a bean of type 'com.example.FitApp3.repository.FoodRepository' that could not be found.\n\n\nAction:\n\nConsider defining a bean of type 'com.example.FitApp3.repository.FoodRepository' in your configuration.\n\n\nProcess finished with exit code 1\n</code></pre>\n<p>This is my code:</p>\n<p>Entity/Food.java</p>\n<pre class=\"lang-java prettyprint-override\"><code>import javax.persistence.Entity;\nimport javax.persistence.GeneratedValue;\nimport javax.persistence.GenerationType;\nimport javax.persistence.Id;\n\n@Entity\npublic class Food extends com.example.FitApp3.model.Entity {\n    private String foodName;\n    private int foodKcal;\n    private int foodProtein;\n    private int foodCarb;\n    private int foodFat;\n\n    public String getFoodName() {\n        return foodName;\n    }\n\n    public void setFoodName(String foodName) {\n        this.foodName = foodName;\n    }\n\n    public int getFoodKcal() {\n        return foodKcal;\n    }\n\n    public void setFoodKcal(int foodKcal) {\n        this.foodKcal = foodKcal;\n    }\n\n    public int getFoodProtein() {\n        return foodProtein;\n    }\n\n    public void setFoodProtein(int foodProtein) {\n        this.foodProtein = foodProtein;\n    }\n\n    public int getFoodCarb() {\n        return foodCarb;\n    }\n\n    public void setFoodCarb(int foodCarb) {\n        this.foodCarb = foodCarb;\n    }\n\n    public int getFoodFat() {\n        return foodFat;\n    }\n\n    public void setFoodFat(int foodFat) {\n        this.foodFat = foodFat;\n    }\n}\n</code></pre>\n<p>Repository/FoodRepository.java</p>\n<pre class=\"lang-java prettyprint-override\"><code>public interface FoodRepository extends CrudRepository&lt;Food, Integer&gt; {}\n</code></pre>\n<p>Controller/FoodController.java</p>\n<pre class=\"lang-java prettyprint-override\"><code>@RestController\npublic class FoodController {\n    private FoodRepository foodRepository;\n\n    public FoodController(FoodRepository foodRepository) {\n        this.foodRepository = foodRepository;\n    }\n}\n</code></pre>\n<p>Mainclass</p>\n<pre class=\"lang-java prettyprint-override\"><code>@SpringBootApplication\npublic class FitApp3Application {\n    public static void main(String[] args) {\n        SpringApplication.run(FitApp3Application.class, args);\n        System.out.println(&quot;hello world&quot;);\n    }\n}\n</code></pre>\n<p>pom.xml</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;2.6.2&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.example&lt;/groupId&gt;\n    &lt;artifactId&gt;FitApp3&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;FitApp3&lt;/name&gt;\n    &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\n    &lt;properties&gt;\n          &lt;java.version&gt;17&lt;/java.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-jdbc&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.h2database&lt;/groupId&gt;\n            &lt;artifactId&gt;h2&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n      &lt;dependency&gt;\n          &lt;groupId&gt;javax.persistence&lt;/groupId&gt;\n          &lt;artifactId&gt;javax.persistence-api&lt;/artifactId&gt;\n          &lt;version&gt;2.2&lt;/version&gt;\n      &lt;/dependency&gt;\n      &lt;dependency&gt;\n          &lt;groupId&gt;org.springframework.data&lt;/groupId&gt;\n          &lt;artifactId&gt;spring-data-commons&lt;/artifactId&gt;\n          &lt;version&gt;2.5.1&lt;/version&gt;\n      &lt;/dependency&gt;\n  &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n"},{"tags":["java","spring-webflux"],"comments":[{"owner":{"account_id":8023174,"reputation":9194,"user_id":6051176,"display_name":"Martin Tarj&#225;nyi"},"score":0,"creation_date":1643397849,"post_id":70895307,"comment_id":125338229,"body_markdown":"If the DB and Redis client you use are reactive then subscribe won&#39;t be blocking. Otherwise you should combine sunscribeOn with subscribe to make it async and don&#39;t put any heavy logic into subscribe. Anyway, the best approach is to use reactive clients.","body":"If the DB and Redis client you use are reactive then subscribe won&#39;t be blocking. Otherwise you should combine sunscribeOn with subscribe to make it async and don&#39;t put any heavy logic into subscribe. Anyway, the best approach is to use reactive clients."},{"owner":{"account_id":20875862,"reputation":389,"user_id":15334653,"display_name":"Gurucharan Sharma"},"score":0,"creation_date":1643426104,"post_id":70895307,"comment_id":125342937,"body_markdown":"@MartinTarj&#225;nyi I basically do not have any DB clients here. What I am doing is - first fetching the data from Redis. If no data is there in Redis, then I make an API call (using WebClient) and fetch the data from the source (external API). Still, will subscribe() be a blocking call?","body":"@MartinTarj&#225;nyi I basically do not have any DB clients here. What I am doing is - first fetching the data from Redis. If no data is there in Redis, then I make an API call (using WebClient) and fetch the data from the source (external API). Still, will subscribe() be a blocking call?"},{"owner":{"account_id":8023174,"reputation":9194,"user_id":6051176,"display_name":"Martin Tarj&#225;nyi"},"score":0,"creation_date":1643443891,"post_id":70895307,"comment_id":125344883,"body_markdown":"WebClient is reactive, that is good. Is the Redis client you use reactive?","body":"WebClient is reactive, that is good. Is the Redis client you use reactive?"},{"owner":{"account_id":20875862,"reputation":389,"user_id":15334653,"display_name":"Gurucharan Sharma"},"score":0,"creation_date":1643450536,"post_id":70895307,"comment_id":125346037,"body_markdown":"@MartinTarj&#225;nyi Yes. I am using below two for Redis operations:\n`private final ReactiveRedisTemplate&lt;String, String&gt; reactiveRedisTemplate;\nprivate final ReactiveValueOperations&lt;String, String&gt; reactiveValueOps;`\nI have included the Redis Client code in the question above.","body":"@MartinTarj&#225;nyi Yes. I am using below two for Redis operations: <code>private final ReactiveRedisTemplate&lt;String, String&gt; reactiveRedisTemplate; private final ReactiveValueOperations&lt;String, String&gt; reactiveValueOps;</code> I have included the Redis Client code in the question above."}],"answers":[{"tags":[],"owner":{"account_id":22354823,"reputation":16499,"user_id":16572295,"display_name":"Jo&#227;o Dias"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1643497767,"creation_date":1643497767,"answer_id":70910515,"question_id":70895307,"body_markdown":"Answering your concern number 2 (which seems to be the only real doubt in your question). Not really. `block()` (https://projectreactor.io/docs/core/release/api/reactor/core/publisher/Mono.html#block--) is the one that subscribes to a `Mono` or `Flux` and waits indefinitely until a next signal is received. On the other hand `subscribe()` (https://projectreactor.io/docs/core/release/api/reactor/core/publisher/Mono.html#subscribe--) subscribes to a `Mono` or `Flux` but it doesn&#39;t block and instead reacts when an element is emitted.","title":"Executing Mono streams that no one subscribes to in Spring Web flux","body":"<p>Answering your concern number 2 (which seems to be the only real doubt in your question). Not really. <code>block()</code> (<a href=\"https://projectreactor.io/docs/core/release/api/reactor/core/publisher/Mono.html#block--\" rel=\"nofollow noreferrer\">https://projectreactor.io/docs/core/release/api/reactor/core/publisher/Mono.html#block--</a>) is the one that subscribes to a <code>Mono</code> or <code>Flux</code> and waits indefinitely until a next signal is received. On the other hand <code>subscribe()</code> (<a href=\"https://projectreactor.io/docs/core/release/api/reactor/core/publisher/Mono.html#subscribe--\" rel=\"nofollow noreferrer\">https://projectreactor.io/docs/core/release/api/reactor/core/publisher/Mono.html#subscribe--</a>) subscribes to a <code>Mono</code> or <code>Flux</code> but it doesn't block and instead reacts when an element is emitted.</p>\n"}],"owner":{"account_id":20875862,"reputation":389,"user_id":15334653,"display_name":"Gurucharan Sharma"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1913,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"closed_date":1643601461,"accepted_answer_id":70910515,"answer_count":1,"score":2,"last_activity_date":1643497767,"creation_date":1643379905,"question_id":70895307,"body_markdown":"I have a spring Webflux application. There are two important parts to this application:\r\n\r\n 1. A job is scheduled to run at a fixed interval.\r\n 2. The job fetches the data from DB and stores the data in Redis.\r\n```java\r\nvoid run() {\r\n  redisAdapter.getTtl()\r\n    .doOnError(RefreshExternalCache::logError)\r\n    .switchIfEmpty(Mono.defer(() -&gt; {\r\n        log.debug(&quot;&gt;&gt; RefreshExternalCache &gt; refreshExternalCacheIfNeeded =&gt; Remaining TTL could not be retrieved. Cache does not exist. &quot; +\r\n                &quot;Trying to create the cache.&quot;);\r\n        return Mono.just(Duration.ofSeconds(0));\r\n    }))\r\n    .subscribe(remainingTtl -&gt; {\r\n        log.debug(&quot;&gt;&gt; RefreshExternalCache &gt; refreshExternalCacheIfNeeded =&gt; original ttl for the cache: {} | ttl for cache in seconds = {} | ttl for cache in minutes = {}&quot;,\r\n                remainingTtl, remainingTtl.getSeconds(), remainingTtl.toMinutes());\r\n\r\n        if (isExternalCacheRefreshNeeded(remainingTtl, offerServiceProperties.getExternalCacheExpiration(), offerServiceProperties.getExternalCacheRefreshPeriod())) {\r\n            log.debug(&quot;&gt;&gt; RefreshExternalCache &gt; refreshExternalCacheIfNeeded =&gt; external cache is up-to-date, skipping refresh&quot;);\r\n        } else {\r\n            log.debug(&quot;&gt;&gt; RefreshExternalCache &gt; refreshExternalCacheIfNeeded =&gt; external cache is outdated, updating the external cache&quot;);\r\n            offerService.refreshExternalCache();\r\n        }\r\n    });\r\n}\r\n```\r\nThis basically calls another method called `refreshExternalCache()`, the implementation below:\r\n```java\r\npublic void refreshExternalCache() {\r\n    fetchOffersFromSource()\r\n        .doOnNext(offerData -&gt; {\r\n            log.debug(LOG_REFRESH_CACHE + &quot;Updating local offer cache with data from source&quot;);\r\n            localCache.put(OFFER_DATA_KEY, offerData);\r\n            storeOffersInExternalCache(offerData, offerServiceProperties.getExternalCacheExpiration());\r\n        })\r\n        .doOnSuccess(offerData -&gt; meterRegistry.counter(METRIC_EXTERNAL_CACHE_REFRESH_COUNTER, TAG_OUTCOME, SUCCESS).increment())\r\n        .doOnError(sourceThrowable -&gt; {\r\n            log.debug(LOG_REFRESH_CACHE + &quot;Error while refreshing external cache {}&quot;, sourceThrowable.getMessage());\r\n            meterRegistry.counter(METRIC_EXTERNAL_CACHE_REFRESH_COUNTER, TAG_OUTCOME, FAILURE).increment();\r\n        }).subscribe();\r\n}\r\n```\r\n\r\nAlso, in the above method, you can see a call to `storeOffersInExternalCache`\r\n```java\r\npublic void storeOffersInExternalCache(OfferData offerData, Duration ttl) {\r\n    log.info(LOG_STORING_OFFER_DATA + &quot;Storing the offer data in external cache...&quot;);\r\n    redisAdapter.storeOffers(offerData, ttl);\r\n}\r\n```\r\n```java\r\npublic void storeOffers(OfferData offerData, Duration ttl) {\r\n    Mono.fromRunnable(() -&gt; redisClient.storeSerializedOffers(serializeFromDomain(offerData), ttl)\r\n        .doOnNext(status -&gt; {\r\n            if (Boolean.TRUE.equals(status)) {\r\n                log.info(LOG_STORE_OFFERS + &quot;Data stored in redis.&quot;);\r\n                meterRegistry.counter(METRIC_REDIS_STORE_OFFERS, TAG_OUTCOME, SUCCESS).increment();\r\n            } else {\r\n                log.error(LOG_STORE_OFFERS + &quot;Unable to store data in redis.&quot;);\r\n                meterRegistry.counter(METRIC_REDIS_STORE_OFFERS, TAG_OUTCOME, FAILURE).increment();\r\n            }\r\n        }).retryWhen(Retry.backoff(redisRetryProperties.getMaxAttempts(), redisRetryProperties.getWaitDuration()).jitter(redisRetryProperties.getBackoffJitter()))\r\n        .doOnError(throwable -&gt; {\r\n            meterRegistry.counter(METRIC_REDIS_STORE_OFFERS, TAG_OUTCOME, FAILURE).increment();\r\n            log.error(LOG_STORE_OFFERS + &quot;Unable to store data in redis. Error: [{}]&quot;, throwable.getMessage());\r\n        })).subscribeOn(Schedulers.boundedElastic());\r\n}\r\n```\r\n\r\n**Redis Client**\r\n```java\r\n@Slf4j\r\n@Component\r\npublic class RedisClient {\r\n    private final ReactiveRedisTemplate&lt;String, String&gt; reactiveRedisTemplate;\r\n    private final ReactiveValueOperations&lt;String, String&gt; reactiveValueOps;\r\n\r\n    public RedisClient(@Qualifier(&quot;reactiveRedisTemplate&quot;) ReactiveRedisTemplate&lt;String, String&gt; reactiveRedisTemplate) {\r\n        this.reactiveRedisTemplate = reactiveRedisTemplate;\r\n        this.reactiveValueOps = reactiveRedisTemplate.opsForValue();\r\n    }\r\n\r\n    Mono&lt;Optional&lt;String&gt;&gt; fetchSerializedOffers() {\r\n        return reactiveValueOps.get(OFFER_DATA_KEY).map(Optional::ofNullable);\r\n    }\r\n\r\n    Mono&lt;Boolean&gt; storeSerializedOffers(String serializedOffers, Duration ttl) {\r\n        return reactiveValueOps.set(OFFER_DATA_KEY, serializedOffers, ttl);\r\n    }\r\n\r\n    Mono&lt;Duration&gt; getTtl() {\r\n        return reactiveRedisTemplate.getExpire(OFFER_DATA_KEY);\r\n    }\r\n}\r\n```\r\n\r\nNow my concerns are:\r\n\r\n 1. If I do not call the `subscribe` method on these Mono streams, these methods are not even executed. This is fair as they won&#39;t execute until someone subscribes to them.\r\n 2. As I understand it correctly, `subscribe` is a blocking call. This defeats the whole purpose of Reactive programming. Isn&#39;t it?\r\n 3. I looked for several ways to make this work, one of them has been shown above. I tried calling one of the methods in `Mono.fromRunnable` but this also is not a very good approach. (read it on another thread in StackOverflow).\r\n\r\nSo, is the approach that I am taking above not correct? How do we execute the Mono streams that no one subscribes to?","title":"Executing Mono streams that no one subscribes to in Spring Web flux","body":"<p>I have a spring Webflux application. There are two important parts to this application:</p>\n<ol>\n<li>A job is scheduled to run at a fixed interval.</li>\n<li>The job fetches the data from DB and stores the data in Redis.</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>void run() {\n  redisAdapter.getTtl()\n    .doOnError(RefreshExternalCache::logError)\n    .switchIfEmpty(Mono.defer(() -&gt; {\n        log.debug(&quot;&gt;&gt; RefreshExternalCache &gt; refreshExternalCacheIfNeeded =&gt; Remaining TTL could not be retrieved. Cache does not exist. &quot; +\n                &quot;Trying to create the cache.&quot;);\n        return Mono.just(Duration.ofSeconds(0));\n    }))\n    .subscribe(remainingTtl -&gt; {\n        log.debug(&quot;&gt;&gt; RefreshExternalCache &gt; refreshExternalCacheIfNeeded =&gt; original ttl for the cache: {} | ttl for cache in seconds = {} | ttl for cache in minutes = {}&quot;,\n                remainingTtl, remainingTtl.getSeconds(), remainingTtl.toMinutes());\n\n        if (isExternalCacheRefreshNeeded(remainingTtl, offerServiceProperties.getExternalCacheExpiration(), offerServiceProperties.getExternalCacheRefreshPeriod())) {\n            log.debug(&quot;&gt;&gt; RefreshExternalCache &gt; refreshExternalCacheIfNeeded =&gt; external cache is up-to-date, skipping refresh&quot;);\n        } else {\n            log.debug(&quot;&gt;&gt; RefreshExternalCache &gt; refreshExternalCacheIfNeeded =&gt; external cache is outdated, updating the external cache&quot;);\n            offerService.refreshExternalCache();\n        }\n    });\n}\n</code></pre>\n<p>This basically calls another method called <code>refreshExternalCache()</code>, the implementation below:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public void refreshExternalCache() {\n    fetchOffersFromSource()\n        .doOnNext(offerData -&gt; {\n            log.debug(LOG_REFRESH_CACHE + &quot;Updating local offer cache with data from source&quot;);\n            localCache.put(OFFER_DATA_KEY, offerData);\n            storeOffersInExternalCache(offerData, offerServiceProperties.getExternalCacheExpiration());\n        })\n        .doOnSuccess(offerData -&gt; meterRegistry.counter(METRIC_EXTERNAL_CACHE_REFRESH_COUNTER, TAG_OUTCOME, SUCCESS).increment())\n        .doOnError(sourceThrowable -&gt; {\n            log.debug(LOG_REFRESH_CACHE + &quot;Error while refreshing external cache {}&quot;, sourceThrowable.getMessage());\n            meterRegistry.counter(METRIC_EXTERNAL_CACHE_REFRESH_COUNTER, TAG_OUTCOME, FAILURE).increment();\n        }).subscribe();\n}\n</code></pre>\n<p>Also, in the above method, you can see a call to <code>storeOffersInExternalCache</code></p>\n<pre class=\"lang-java prettyprint-override\"><code>public void storeOffersInExternalCache(OfferData offerData, Duration ttl) {\n    log.info(LOG_STORING_OFFER_DATA + &quot;Storing the offer data in external cache...&quot;);\n    redisAdapter.storeOffers(offerData, ttl);\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>public void storeOffers(OfferData offerData, Duration ttl) {\n    Mono.fromRunnable(() -&gt; redisClient.storeSerializedOffers(serializeFromDomain(offerData), ttl)\n        .doOnNext(status -&gt; {\n            if (Boolean.TRUE.equals(status)) {\n                log.info(LOG_STORE_OFFERS + &quot;Data stored in redis.&quot;);\n                meterRegistry.counter(METRIC_REDIS_STORE_OFFERS, TAG_OUTCOME, SUCCESS).increment();\n            } else {\n                log.error(LOG_STORE_OFFERS + &quot;Unable to store data in redis.&quot;);\n                meterRegistry.counter(METRIC_REDIS_STORE_OFFERS, TAG_OUTCOME, FAILURE).increment();\n            }\n        }).retryWhen(Retry.backoff(redisRetryProperties.getMaxAttempts(), redisRetryProperties.getWaitDuration()).jitter(redisRetryProperties.getBackoffJitter()))\n        .doOnError(throwable -&gt; {\n            meterRegistry.counter(METRIC_REDIS_STORE_OFFERS, TAG_OUTCOME, FAILURE).increment();\n            log.error(LOG_STORE_OFFERS + &quot;Unable to store data in redis. Error: [{}]&quot;, throwable.getMessage());\n        })).subscribeOn(Schedulers.boundedElastic());\n}\n</code></pre>\n<p><strong>Redis Client</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>@Slf4j\n@Component\npublic class RedisClient {\n    private final ReactiveRedisTemplate&lt;String, String&gt; reactiveRedisTemplate;\n    private final ReactiveValueOperations&lt;String, String&gt; reactiveValueOps;\n\n    public RedisClient(@Qualifier(&quot;reactiveRedisTemplate&quot;) ReactiveRedisTemplate&lt;String, String&gt; reactiveRedisTemplate) {\n        this.reactiveRedisTemplate = reactiveRedisTemplate;\n        this.reactiveValueOps = reactiveRedisTemplate.opsForValue();\n    }\n\n    Mono&lt;Optional&lt;String&gt;&gt; fetchSerializedOffers() {\n        return reactiveValueOps.get(OFFER_DATA_KEY).map(Optional::ofNullable);\n    }\n\n    Mono&lt;Boolean&gt; storeSerializedOffers(String serializedOffers, Duration ttl) {\n        return reactiveValueOps.set(OFFER_DATA_KEY, serializedOffers, ttl);\n    }\n\n    Mono&lt;Duration&gt; getTtl() {\n        return reactiveRedisTemplate.getExpire(OFFER_DATA_KEY);\n    }\n}\n</code></pre>\n<p>Now my concerns are:</p>\n<ol>\n<li>If I do not call the <code>subscribe</code> method on these Mono streams, these methods are not even executed. This is fair as they won't execute until someone subscribes to them.</li>\n<li>As I understand it correctly, <code>subscribe</code> is a blocking call. This defeats the whole purpose of Reactive programming. Isn't it?</li>\n<li>I looked for several ways to make this work, one of them has been shown above. I tried calling one of the methods in <code>Mono.fromRunnable</code> but this also is not a very good approach. (read it on another thread in StackOverflow).</li>\n</ol>\n<p>So, is the approach that I am taking above not correct? How do we execute the Mono streams that no one subscribes to?</p>\n"},{"tags":["java","generics","inheritance","gson"],"comments":[{"owner":{"account_id":1186511,"reputation":4312,"user_id":1160360,"accept_rate":74,"display_name":"Fran Marzoa"},"score":0,"creation_date":1520938700,"post_id":49254218,"comment_id":85511865,"body_markdown":"Care to explain the downvote?","body":"Care to explain the downvote?"},{"owner":{"account_id":5384013,"reputation":6035,"user_id":4288506,"accept_rate":77,"display_name":"Marcono1234"},"score":0,"creation_date":1643497500,"post_id":49254218,"comment_id":125356928,"body_markdown":"Unrelated to this issue, but you can simplify `fromJson(json, integerArrayListTypeToken.getType());` by just calling `fromJson(json, IntegerArrayList.class)`. Is there a reason why you call `enableComplexMapKeySerialization()`? Gson by default serializes Collections as JSON array, so that setting should not have any effect.","body":"Unrelated to this issue, but you can simplify <code>fromJson(json, integerArrayListTypeToken.getType());</code> by just calling <code>fromJson(json, IntegerArrayList.class)</code>. Is there a reason why you call <code>enableComplexMapKeySerialization()</code>? Gson by default serializes Collections as JSON array, so that setting should not have any effect."}],"answers":[{"tags":[],"owner":{"account_id":1186511,"reputation":4312,"user_id":1160360,"accept_rate":74,"display_name":"Fran Marzoa"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1520944708,"creation_date":1520944708,"answer_id":49256443,"question_id":49254218,"body_markdown":"OK, I have just written a custom adapter and it works fine. It&#39;s going to be a bit more complicated with the real code, though, but at least I know who to solve this.\r\n\r\nHere&#39;s the code:\r\n\r\n    import com.google.gson.GsonBuilder;\r\n    import com.google.gson.TypeAdapter;\r\n    import com.google.gson.stream.JsonReader;\r\n    import com.google.gson.stream.JsonWriter;\r\n    \r\n    import java.io.IOException;\r\n    import java.util.ArrayList;\r\n    import java.util.Arrays;\r\n    \r\n    class IntegerArrayList extends ArrayList&lt;Integer&gt; {\r\n        String customField = &quot;test&quot;;\r\n    \r\n        public IntegerArrayList(Integer... items) {\r\n            super();\r\n            addAll(Arrays.asList(items));\r\n        }\r\n    \r\n        public static IntegerArrayList fromJson(String json) {\r\n            IntegerArrayList integerArrayList = new GsonBuilder()\r\n                    .registerTypeAdapter(IntegerArrayList.class, new JsonAdapter())\r\n                    .enableComplexMapKeySerialization()\r\n                    .create()\r\n                    .fromJson(json, IntegerArrayList.class);\r\n            return integerArrayList;\r\n        }\r\n    \r\n        public String toJson() {\r\n            return new GsonBuilder()\r\n                    .registerTypeAdapter(IntegerArrayList.class, new JsonAdapter())\r\n                    .enableComplexMapKeySerialization()\r\n                    .setPrettyPrinting()\r\n                    .create()\r\n                    .toJson(this, IntegerArrayList.class);\r\n        }\r\n    \r\n        public static class JsonAdapter extends TypeAdapter&lt;IntegerArrayList&gt; {\r\n            @Override\r\n            public void write(JsonWriter out, IntegerArrayList value) throws IOException {\r\n                out.beginObject();\r\n                out.name(&quot;customField&quot;).value(value.customField);\r\n                out.name(&quot;items&quot;);\r\n                out.beginArray();\r\n                for (Integer v : value) {\r\n                    out.value(v);\r\n                }\r\n                out.endArray();\r\n                out.endObject();\r\n            }\r\n    \r\n            @Override\r\n            public IntegerArrayList read(JsonReader in) throws IOException {\r\n                IntegerArrayList rtn = new IntegerArrayList();\r\n                in.beginObject();\r\n                while (in.hasNext()) {\r\n                    switch (in.nextName()) {\r\n                        case &quot;customField&quot;:\r\n                            rtn.customField = in.nextString();\r\n                            break;\r\n                        case &quot;items&quot;:\r\n                            in.beginArray();\r\n                            while (in.hasNext()) {\r\n                                rtn.add(in.nextInt());\r\n                            }\r\n                            in.endArray();\r\n                    }\r\n                }\r\n                in.endObject();\r\n                return rtn;\r\n            }\r\n        }\r\n    }\r\n    \r\n    public class GsonTest {\r\n        public static void main(String[] args) {\r\n            IntegerArrayList integerArrayList = new IntegerArrayList(1, 2, 3, 4, 5);\r\n            String json = integerArrayList.toJson();\r\n            IntegerArrayList integerArrayList1 = IntegerArrayList.fromJson(json);\r\n        }\r\n    }","title":"ClassCastException with Gson and class inheritance from generic ArrayList","body":"<p>OK, I have just written a custom adapter and it works fine. It's going to be a bit more complicated with the real code, though, but at least I know who to solve this.</p>\n\n<p>Here's the code:</p>\n\n<pre><code>import com.google.gson.GsonBuilder;\nimport com.google.gson.TypeAdapter;\nimport com.google.gson.stream.JsonReader;\nimport com.google.gson.stream.JsonWriter;\n\nimport java.io.IOException;\nimport java.util.ArrayList;\nimport java.util.Arrays;\n\nclass IntegerArrayList extends ArrayList&lt;Integer&gt; {\n    String customField = \"test\";\n\n    public IntegerArrayList(Integer... items) {\n        super();\n        addAll(Arrays.asList(items));\n    }\n\n    public static IntegerArrayList fromJson(String json) {\n        IntegerArrayList integerArrayList = new GsonBuilder()\n                .registerTypeAdapter(IntegerArrayList.class, new JsonAdapter())\n                .enableComplexMapKeySerialization()\n                .create()\n                .fromJson(json, IntegerArrayList.class);\n        return integerArrayList;\n    }\n\n    public String toJson() {\n        return new GsonBuilder()\n                .registerTypeAdapter(IntegerArrayList.class, new JsonAdapter())\n                .enableComplexMapKeySerialization()\n                .setPrettyPrinting()\n                .create()\n                .toJson(this, IntegerArrayList.class);\n    }\n\n    public static class JsonAdapter extends TypeAdapter&lt;IntegerArrayList&gt; {\n        @Override\n        public void write(JsonWriter out, IntegerArrayList value) throws IOException {\n            out.beginObject();\n            out.name(\"customField\").value(value.customField);\n            out.name(\"items\");\n            out.beginArray();\n            for (Integer v : value) {\n                out.value(v);\n            }\n            out.endArray();\n            out.endObject();\n        }\n\n        @Override\n        public IntegerArrayList read(JsonReader in) throws IOException {\n            IntegerArrayList rtn = new IntegerArrayList();\n            in.beginObject();\n            while (in.hasNext()) {\n                switch (in.nextName()) {\n                    case \"customField\":\n                        rtn.customField = in.nextString();\n                        break;\n                    case \"items\":\n                        in.beginArray();\n                        while (in.hasNext()) {\n                            rtn.add(in.nextInt());\n                        }\n                        in.endArray();\n                }\n            }\n            in.endObject();\n            return rtn;\n        }\n    }\n}\n\npublic class GsonTest {\n    public static void main(String[] args) {\n        IntegerArrayList integerArrayList = new IntegerArrayList(1, 2, 3, 4, 5);\n        String json = integerArrayList.toJson();\n        IntegerArrayList integerArrayList1 = IntegerArrayList.fromJson(json);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5384013,"reputation":6035,"user_id":4288506,"accept_rate":77,"display_name":"Marcono1234"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1643497576,"creation_date":1643497576,"answer_id":70910502,"question_id":49254218,"body_markdown":"The `ClassCastException` is caused by a [bug in Gson](https://github.com/google/gson/issues/1708) which causes it to create standard JDK collection instances, even if they are incompatible with the deserialized type.\r\n\r\nHowever, the underlying issue here (which would remain once that Gson bug is fixed), is that your `IntegerArrayList` class does not have a no-args constructor. Therefore Gson cannot create an instance of your class. You can either solve this by adding a no-args constructor (`IntegerArrayList() { ... }`, visibility does not matter), or alternatively by registering an [`InstanceCreator`](https://javadoc.io/doc/com.google.code.gson/gson/latest/com.google.gson/com/google/gson/InstanceCreator.html).","title":"ClassCastException with Gson and class inheritance from generic ArrayList","body":"<p>The <code>ClassCastException</code> is caused by a <a href=\"https://github.com/google/gson/issues/1708\" rel=\"nofollow noreferrer\">bug in Gson</a> which causes it to create standard JDK collection instances, even if they are incompatible with the deserialized type.</p>\n<p>However, the underlying issue here (which would remain once that Gson bug is fixed), is that your <code>IntegerArrayList</code> class does not have a no-args constructor. Therefore Gson cannot create an instance of your class. You can either solve this by adding a no-args constructor (<code>IntegerArrayList() { ... }</code>, visibility does not matter), or alternatively by registering an <a href=\"https://javadoc.io/doc/com.google.code.gson/gson/latest/com.google.gson/com/google/gson/InstanceCreator.html\" rel=\"nofollow noreferrer\"><code>InstanceCreator</code></a>.</p>\n"}],"owner":{"account_id":1186511,"reputation":4312,"user_id":1160360,"accept_rate":74,"display_name":"Fran Marzoa"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":413,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":49256443,"answer_count":2,"score":0,"last_activity_date":1643497576,"creation_date":1520938153,"question_id":49254218,"body_markdown":"I&#39;m having trouble parsing a custom class instance to/from Json with Gson. This is a simplified version of the code I&#39;m dealing with:\r\n\r\n    import com.google.gson.GsonBuilder;\r\n    import com.google.gson.reflect.TypeToken;\r\n    \r\n    import java.util.ArrayList;\r\n    import java.util.Arrays;\r\n    \r\n    class IntegerArrayList extends ArrayList&lt;Integer&gt; {\r\n        public static IntegerArrayList fromJson(String json) {\r\n            TypeToken&lt;IntegerArrayList&gt; integerArrayListTypeToken = new TypeToken&lt;IntegerArrayList&gt;() {} ;\r\n            IntegerArrayList integerArrayList = new GsonBuilder()\r\n                    .enableComplexMapKeySerialization()\r\n                    .create()\r\n                    .fromJson(json, integerArrayListTypeToken.getType());\r\n            return integerArrayList;\r\n        }\r\n    \r\n        public String toJson() {\r\n            TypeToken&lt;IntegerArrayList&gt; integerArrayListTypeToken = new TypeToken&lt;IntegerArrayList&gt;() {};\r\n            return new GsonBuilder()\r\n                    .enableComplexMapKeySerialization()\r\n                    .setPrettyPrinting()\r\n                    .create()\r\n                    .toJson(this, integerArrayListTypeToken.getType());\r\n        }\r\n    \r\n        public IntegerArrayList(Integer... items) {\r\n            super();\r\n            addAll(Arrays.asList(items));\r\n        }\r\n    }\r\n    \r\n    public class GsonTest {\r\n        public static void main(String[] args) {\r\n            IntegerArrayList integerArrayList = new IntegerArrayList(1, 2, 3, 4, 5);\r\n            String json = integerArrayList.toJson();\r\n            IntegerArrayList integerArrayList1 = IntegerArrayList.fromJson(json);\r\n        }\r\n    }\r\n\r\nI get this error:\r\n\r\n    Exception in thread &quot;main&quot; java.lang.ClassCastException: java.util.ArrayList cannot be cast to IntegerArrayList\r\n    \tat IntegerArrayList.fromJson(GsonTest.java:13)\r\n    \tat GsonTest.main(GsonTest.java:36)\r\n\r\nSo the problem here is that instead of returning an IntegerArrayList instance, it&#39;s returning the ArrayList from which it inherits from. \r\n\r\nIs there any chance to get an IntegerArrayList directly from Gson? How?\r\n\r\nThanks a lot in advance!\r\n","title":"ClassCastException with Gson and class inheritance from generic ArrayList","body":"<p>I'm having trouble parsing a custom class instance to/from Json with Gson. This is a simplified version of the code I'm dealing with:</p>\n\n<pre><code>import com.google.gson.GsonBuilder;\nimport com.google.gson.reflect.TypeToken;\n\nimport java.util.ArrayList;\nimport java.util.Arrays;\n\nclass IntegerArrayList extends ArrayList&lt;Integer&gt; {\n    public static IntegerArrayList fromJson(String json) {\n        TypeToken&lt;IntegerArrayList&gt; integerArrayListTypeToken = new TypeToken&lt;IntegerArrayList&gt;() {} ;\n        IntegerArrayList integerArrayList = new GsonBuilder()\n                .enableComplexMapKeySerialization()\n                .create()\n                .fromJson(json, integerArrayListTypeToken.getType());\n        return integerArrayList;\n    }\n\n    public String toJson() {\n        TypeToken&lt;IntegerArrayList&gt; integerArrayListTypeToken = new TypeToken&lt;IntegerArrayList&gt;() {};\n        return new GsonBuilder()\n                .enableComplexMapKeySerialization()\n                .setPrettyPrinting()\n                .create()\n                .toJson(this, integerArrayListTypeToken.getType());\n    }\n\n    public IntegerArrayList(Integer... items) {\n        super();\n        addAll(Arrays.asList(items));\n    }\n}\n\npublic class GsonTest {\n    public static void main(String[] args) {\n        IntegerArrayList integerArrayList = new IntegerArrayList(1, 2, 3, 4, 5);\n        String json = integerArrayList.toJson();\n        IntegerArrayList integerArrayList1 = IntegerArrayList.fromJson(json);\n    }\n}\n</code></pre>\n\n<p>I get this error:</p>\n\n<pre><code>Exception in thread \"main\" java.lang.ClassCastException: java.util.ArrayList cannot be cast to IntegerArrayList\n    at IntegerArrayList.fromJson(GsonTest.java:13)\n    at GsonTest.main(GsonTest.java:36)\n</code></pre>\n\n<p>So the problem here is that instead of returning an IntegerArrayList instance, it's returning the ArrayList from which it inherits from. </p>\n\n<p>Is there any chance to get an IntegerArrayList directly from Gson? How?</p>\n\n<p>Thanks a lot in advance!</p>\n"},{"tags":["java","hibernate","quarkus"],"answers":[{"tags":[],"owner":{"account_id":14046066,"reputation":117,"user_id":10146295,"display_name":"Saddex"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1643497427,"creation_date":1643497427,"answer_id":70910489,"question_id":70905816,"body_markdown":"Nevermind. I tried thinking about another search term which wouldn&#39;t result in a flood of irrelevant results I mentioned. I tried &quot;Hibernate find in set&quot;, which led me to find [this other post][1]. This led me to try this line (with the Set values hardcoded for FAAFO purposes):\r\n\r\n````\r\nList&lt;Publisher&gt; publishers = Publisher.find(&quot;name IN ?1&quot;, new HashSet&lt;&gt;(Arrays.asList(&quot;Indiana University Press&quot;, &quot;Harvard University Press&quot;))).list();\r\n````\r\n\r\nNo errors, and returns two entries that were imported into the dev db through the import.sql file. It&#39;s the &quot;IN ?1&quot; part that does it, not that I used a Set for my query instead of a List this time. It works just as well with a List, as long as the &quot;IN ?1&quot; stays there.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/5874180/hql-search-within-child-set-with-in-keyword/16249627","title":"Using an List/Set for a Hibernate find query","body":"<p>Nevermind. I tried thinking about another search term which wouldn't result in a flood of irrelevant results I mentioned. I tried &quot;Hibernate find in set&quot;, which led me to find <a href=\"https://stackoverflow.com/questions/5874180/hql-search-within-child-set-with-in-keyword/16249627\">this other post</a>. This led me to try this line (with the Set values hardcoded for FAAFO purposes):</p>\n<pre><code>List&lt;Publisher&gt; publishers = Publisher.find(&quot;name IN ?1&quot;, new HashSet&lt;&gt;(Arrays.asList(&quot;Indiana University Press&quot;, &quot;Harvard University Press&quot;))).list();\n</code></pre>\n<p>No errors, and returns two entries that were imported into the dev db through the import.sql file. It's the &quot;IN ?1&quot; part that does it, not that I used a Set for my query instead of a List this time. It works just as well with a List, as long as the &quot;IN ?1&quot; stays there.</p>\n"}],"owner":{"account_id":14046066,"reputation":117,"user_id":10146295,"display_name":"Saddex"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":850,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70910489,"answer_count":1,"score":0,"last_activity_date":1643497427,"creation_date":1643462443,"question_id":70905816,"body_markdown":"I have a Quarkus application where we use Hibernate ORM with Panache to build and query the database. In some situations, we want to use an List or rather a Set to filter from a table of &quot;requests&quot;. The Request entity, which has a different name in practice, has a status property, which is an enum that can have three values: PENDING, APPROVED or DENIED. In the web front-end, we want to use a checkbox-style filter which then during the HTTP request sends this as an array to the Quarkus application, where we then want to give it to Hibernate somehow, preferably as a Set to easily filter duplicates.\r\n\r\nI&#39;ve done something extremely similar within the NodeJS/MongoDB ecosystem in the past, which looks like this, as a step of a bigger aggregate pipeline:\r\n\r\n````\r\naggregatePipeline.push({\r\n    $match: {\r\n       status: {\r\n           $ne: status //Array of strings\r\n       }\r\n    }\r\n});\r\n````\r\n\r\nHow would something like this be done within Hibernate? I&#39;ve tried some googling, but the results are largely cluttered by people asking how you get an Arraylist out of the cursor from a standard find-query.\r\n\r\nThanks in advance.\r\n\r\n**Edit**: Trying this line\r\n\r\n````\r\nList&lt;Publisher&gt; publishers = Publisher.find(&quot;name&quot;, Arrays.asList(&quot;Books&quot;, &quot;Publishing&quot;)).list();\r\n````\r\n\r\nGives this error:\r\n\r\n&gt; org.postgresql.util.PSQLException: ERROR: operator does not exist: character varying = record\r\n  Hint: No operator matches the given name and argument types. You might need to add explicit type casts.","title":"Using an List/Set for a Hibernate find query","body":"<p>I have a Quarkus application where we use Hibernate ORM with Panache to build and query the database. In some situations, we want to use an List or rather a Set to filter from a table of &quot;requests&quot;. The Request entity, which has a different name in practice, has a status property, which is an enum that can have three values: PENDING, APPROVED or DENIED. In the web front-end, we want to use a checkbox-style filter which then during the HTTP request sends this as an array to the Quarkus application, where we then want to give it to Hibernate somehow, preferably as a Set to easily filter duplicates.</p>\n<p>I've done something extremely similar within the NodeJS/MongoDB ecosystem in the past, which looks like this, as a step of a bigger aggregate pipeline:</p>\n<pre><code>aggregatePipeline.push({\n    $match: {\n       status: {\n           $ne: status //Array of strings\n       }\n    }\n});\n</code></pre>\n<p>How would something like this be done within Hibernate? I've tried some googling, but the results are largely cluttered by people asking how you get an Arraylist out of the cursor from a standard find-query.</p>\n<p>Thanks in advance.</p>\n<p><strong>Edit</strong>: Trying this line</p>\n<pre><code>List&lt;Publisher&gt; publishers = Publisher.find(&quot;name&quot;, Arrays.asList(&quot;Books&quot;, &quot;Publishing&quot;)).list();\n</code></pre>\n<p>Gives this error:</p>\n<blockquote>\n<p>org.postgresql.util.PSQLException: ERROR: operator does not exist: character varying = record\nHint: No operator matches the given name and argument types. You might need to add explicit type casts.</p>\n</blockquote>\n"},{"tags":["java","mysql","spring-boot","jpa"],"comments":[{"owner":{"account_id":20854541,"reputation":1009,"user_id":15318227,"display_name":"Gurkirat Singh Guliani"},"score":0,"creation_date":1643487103,"post_id":70909172,"comment_id":125354841,"body_markdown":"please share ur application.properties file ?","body":"please share ur application.properties file ?"},{"owner":{"account_id":2366187,"reputation":60152,"user_id":2071828,"accept_rate":88,"display_name":"Boris the Spider"},"score":1,"creation_date":1643487464,"post_id":70909172,"comment_id":125354917,"body_markdown":"Disable hbm2ddl.","body":"Disable hbm2ddl."}],"answers":[{"tags":[],"owner":{"account_id":23783500,"reputation":5175,"user_id":17795888,"display_name":"Chaosfire"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1643487539,"creation_date":1643487539,"answer_id":70909384,"question_id":70909172,"body_markdown":"JPA does have that feature to auto create tables, after scanning your entity classes. According to the [spring doc][1], the feature is controlled with the properties `spring.jpa.generate-ddl`(boolean) and `spring.jpa.hibernate.ddl-auto`(hibernate specific). Setting the first to false should stop table generation on startup.\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-boot/docs/2.1.x/reference/html/howto-database-initialization.html","title":"How do I set SpringBoot so that it does not try and create a table in my MySQL DB when it starts up","body":"<p>JPA does have that feature to auto create tables, after scanning your entity classes. According to the <a href=\"https://docs.spring.io/spring-boot/docs/2.1.x/reference/html/howto-database-initialization.html\" rel=\"nofollow noreferrer\">spring doc</a>, the feature is controlled with the properties <code>spring.jpa.generate-ddl</code>(boolean) and <code>spring.jpa.hibernate.ddl-auto</code>(hibernate specific). Setting the first to false should stop table generation on startup.</p>\n"},{"tags":[],"owner":{"account_id":3419544,"reputation":403,"user_id":17417246,"display_name":"Tony"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1643497424,"creation_date":1643497424,"answer_id":70910488,"question_id":70909172,"body_markdown":"Thank you everyone In my application.properties file I had the following line \r\nspring.jpa.hibernate.ddl-auto=update.\r\n\r\nI removed this and now springboot starts up without trying to create a new table per entity.\r\n","title":"How do I set SpringBoot so that it does not try and create a table in my MySQL DB when it starts up","body":"<p>Thank you everyone In my application.properties file I had the following line\nspring.jpa.hibernate.ddl-auto=update.</p>\n<p>I removed this and now springboot starts up without trying to create a new table per entity.</p>\n"}],"owner":{"account_id":3419544,"reputation":403,"user_id":17417246,"display_name":"Tony"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":64,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1643497424,"creation_date":1643485737,"question_id":70909172,"body_markdown":"My springboot trys to create a table that already exists in my mysql db\r\n\r\nWhen I start springboot, it throws an exception \r\n``` \r\norg.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL &quot;create table credential \r\n\r\nCaused by: java.sql.SQLSyntaxErrorException: Table &#39;credential&#39; already exists\r\n``` \r\nNow I have an entity called credential \r\n``` \r\n@Entity\r\n@Table(name=&quot;credential&quot;)\r\npublic class CredentialEntity {\r\n\t\r\n\t@Id\r\n\t@GeneratedValue(strategy = GenerationType.AUTO)\r\n\r\n``` \r\nWhat I think is happening is that springboot sees the entity and try to create that table and throws an exception because the table already exists.\r\n\r\nIs there a way to set something on the entity to stop springboot trying to create the table.\r\n","title":"How do I set SpringBoot so that it does not try and create a table in my MySQL DB when it starts up","body":"<p>My springboot trys to create a table that already exists in my mysql db</p>\n<p>When I start springboot, it throws an exception</p>\n<pre><code>org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL &quot;create table credential \n\nCaused by: java.sql.SQLSyntaxErrorException: Table 'credential' already exists\n</code></pre>\n<p>Now I have an entity called credential</p>\n<pre><code>@Entity\n@Table(name=&quot;credential&quot;)\npublic class CredentialEntity {\n    \n    @Id\n    @GeneratedValue(strategy = GenerationType.AUTO)\n\n</code></pre>\n<p>What I think is happening is that springboot sees the entity and try to create that table and throws an exception because the table already exists.</p>\n<p>Is there a way to set something on the entity to stop springboot trying to create the table.</p>\n"},{"tags":["java","binary","double","decimal","precision"],"comments":[{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":3,"creation_date":1643270555,"post_id":70875083,"comment_id":125296163,"body_markdown":"Well ... not all floating point calculations are imprecise.  Some give the exactly correct answer.  It all depends whether the numbers can be represented precisely as a 53 bit number multiplied by a 2^M where M is positive or negative.  Unpicking exactly where the imprecision arises is tricky ... when you are looking at the decimal representations rather than the actual binary representations.","body":"Well ... not all floating point calculations are imprecise.  Some give the exactly correct answer.  It all depends whether the numbers can be represented precisely as a 53 bit number multiplied by a 2^M where M is positive or negative.  Unpicking exactly where the imprecision arises is tricky ... when you are looking at the decimal representations rather than the actual binary representations."},{"owner":{"account_id":960307,"reputation":107861,"user_id":984823,"display_name":"Joop Eggen"},"score":0,"creation_date":1643270709,"post_id":70875083,"comment_id":125296204,"body_markdown":"Try `10_000 * ((double) c / d)` and the error will become visible. So there is a bit of &quot;rounding&quot; in the text representation, especially with such small numbers.","body":"Try <code>10_000 * ((double) c &#47; d)</code> and the error will become visible. So there is a bit of &quot;rounding&quot; in the text representation, especially with such small numbers."},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":1,"creation_date":1643271060,"post_id":70875083,"comment_id":125296321,"body_markdown":"Another way of putting it is that sometimes the rounding errors will cancel each other out when you convert floating point values from decimal to binary and back to decimal.  And sometimes they won&#39;t.  There is some pretty complicated maths at the root of this.  (The simple approach is to assume that error may occur and allow for it.)","body":"Another way of putting it is that sometimes the rounding errors will cancel each other out when you convert floating point values from decimal to binary and back to decimal.  And sometimes they won&#39;t.  There is some pretty complicated maths at the root of this.  (The simple approach is to assume that error may occur and allow for it.)"},{"owner":{"account_id":24068996,"reputation":33,"user_id":18045161,"display_name":"Nick"},"score":0,"creation_date":1643271298,"post_id":70875083,"comment_id":125296413,"body_markdown":"@StephenC  Thank you for the support. I knew that not all floating number are imprecise, so I have also checked 0.65 in binary system. It should be 0.10 1001 1001 ..., which is not a precise one, so I got confused.","body":"@StephenC  Thank you for the support. I knew that not all floating number are imprecise, so I have also checked 0.65 in binary system. It should be 0.10 1001 1001 ..., which is not a precise one, so I got confused."},{"owner":{"account_id":24068996,"reputation":33,"user_id":18045161,"display_name":"Nick"},"score":0,"creation_date":1643271527,"post_id":70875083,"comment_id":125296500,"body_markdown":"@JoopEggen I tried &quot;10_000 * ((double) c / d)&quot;, but the result is correct. Sorry that I can not fully understand your points.","body":"@JoopEggen I tried &quot;10_000 * ((double) c / d)&quot;, but the result is correct. Sorry that I can not fully understand your points."},{"owner":{"account_id":960307,"reputation":107861,"user_id":984823,"display_name":"Joop Eggen"},"score":1,"creation_date":1643272007,"post_id":70875083,"comment_id":125296665,"body_markdown":"Also 0.65 has a tiny approximation error. So with a sufficiently large factor the error will pop-up. My point is that the conversion from double to String (which could be precise) will often truncate a bit, which can hide any error.","body":"Also 0.65 has a tiny approximation error. So with a sufficiently large factor the error will pop-up. My point is that the conversion from double to String (which could be precise) will often truncate a bit, which can hide any error."},{"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"score":2,"creation_date":1643273389,"post_id":70875083,"comment_id":125297140,"body_markdown":"`(double) 65 / 100` is not really 0.65 - it&#39;s only printed that way.  Java has some rules about how to print floating point numbers - basically it picks the shortest decimal representation (in terms of number of decimal places) that&#39;s closer to the given number than any other `double` (or `float`).  This usually gives quite good results for multiplication and division, but it gives poor results in the case where you subtract two numbers that are fairly close together (such as 5 and 4.35).","body":"<code>(double) 65 &#47; 100</code> is not really 0.65 - it&#39;s only printed that way.  Java has some rules about how to print floating point numbers - basically it picks the shortest decimal representation (in terms of number of decimal places) that&#39;s closer to the given number than any other <code>double</code> (or <code>float</code>).  This usually gives quite good results for multiplication and division, but it gives poor results in the case where you subtract two numbers that are fairly close together (such as 5 and 4.35)."}],"answers":[{"tags":[],"owner":{"account_id":22643442,"reputation":442,"user_id":17228182,"display_name":"Arc"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1643496650,"creation_date":1643286460,"answer_id":70878559,"question_id":70875083,"body_markdown":"Java &lt;strike&gt;completely messes up&lt;/strike&gt; has its own way of handling floating-point binary to decimal conversions.\r\n\r\nA simple program in C (compiled with `gcc`) gives the result:\r\n\r\n    printf(&quot;1: %.20f\\n&quot;, 5.0 - 4.35);         // 0.65000000000000035527\r\n    printf(&quot;2: %.20f\\n&quot;, 65./100);            // 0.65000000000000002220\r\n\r\nwhile Java gives the result (note you only needed 17 digits to see it, but I&#39;m trying to make it more clear):\r\n\r\n    System.out.printf(&quot;%.20f\\n&quot;, 5.0 - 4.35); // 0.65000000000000040000\r\n    System.out.printf(&quot;%.20f\\n&quot;, 65./100);    // 0.65000000000000000000\r\n\r\nBut when using the `%a` format specifier, both languages `printf` the underlying hexadecimal (correct) value: `0x1.4ccccccccccd00000000p-1`.\r\n\r\n&lt;strike&gt; So, Java is performing some illegal rounding at some point in the code. &lt;/strike&gt; The apparent issue here is that Java has a different set of rules to convert binary to decimal, from the [Java specification](https://docs.oracle.com/javase/7/docs/api/java/util/Formatter.html#syntax):\r\n\r\n&gt; The number of digits in the result for the fractional part of m or a is equal to the precision. If the precision is not specified then the default value is 6. If the precision is less than the number of digits which would appear after the decimal point in the string returned by Float.toString(float) or Double.toString(double) respectively, then the value will be rounded using the round half up algorithm. **Otherwise, zeros may be appended to reach the precision.** For a canonical representation of the value, use Float.toString(float) or Double.toString(double) as appropriate. *(emphasis mine)*\r\n\r\nAnd in the `toString` [specification](https://docs.oracle.com/javase/7/docs/api/java/lang/Double.html#toString(double)):\r\n\r\n&gt; How many digits must be printed for the fractional part of m or a? There must be at least one digit to represent the fractional part, and **beyond that as many, but only as many, more digits as are needed to uniquely distinguish the argument value from adjacent values of type double**. That is, suppose that x is the exact mathematical value represented by the decimal representation produced by this method for a finite nonzero argument d. Then d must be the double value nearest to x; or if two double values are equally close to x, then d must be one of them and the least significant bit of the significand of d must be 0. *(emphasis mine)*\r\n\r\nSo, Java does perform a different binary to decimal conversion from C, but it remains closer to the true binary value than to any other, so the spec guarantees that the binary value can be restored back by a decimal to binary conversion.\r\n\r\nProfessor William Kahan warned about some Java floating-point issues in this article:\r\n\r\n[How Java’s Floating-Point Hurts Everyone Everywhere](https://people.eecs.berkeley.edu/~wkahan/JAVAhurt.pdf)\r\n\r\nBut this conversion behaviour seems to be IEEE-complaint.\r\n\r\nEDIT: I have included information provided by @MarkDickinson in the comments, to report that this Java behaviour, albeit different from C, is documented, and is IEEE-compliant. This has already been explained [here](https://stackoverflow.com/questions/13479163/round-float-to-x-decimals/22155830#22155830), [here](https://stackoverflow.com/questions/23389584/how-does-java-convert-floats-to-strings/23392853#23392853), and [here](https://stackoverflow.com/questions/57778637/why-do-c-and-java-round-floats-differently/57779767#57779767).","title":"Why some double precision divisions are correct in java operation?","body":"<p>Java <strike>completely messes up</strike> has its own way of handling floating-point binary to decimal conversions.</p>\n<p>A simple program in C (compiled with <code>gcc</code>) gives the result:</p>\n<pre><code>printf(&quot;1: %.20f\\n&quot;, 5.0 - 4.35);         // 0.65000000000000035527\nprintf(&quot;2: %.20f\\n&quot;, 65./100);            // 0.65000000000000002220\n</code></pre>\n<p>while Java gives the result (note you only needed 17 digits to see it, but I'm trying to make it more clear):</p>\n<pre><code>System.out.printf(&quot;%.20f\\n&quot;, 5.0 - 4.35); // 0.65000000000000040000\nSystem.out.printf(&quot;%.20f\\n&quot;, 65./100);    // 0.65000000000000000000\n</code></pre>\n<p>But when using the <code>%a</code> format specifier, both languages <code>printf</code> the underlying hexadecimal (correct) value: <code>0x1.4ccccccccccd00000000p-1</code>.</p>\n<p><strike> So, Java is performing some illegal rounding at some point in the code. </strike> The apparent issue here is that Java has a different set of rules to convert binary to decimal, from the <a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/Formatter.html#syntax\" rel=\"nofollow noreferrer\">Java specification</a>:</p>\n<blockquote>\n<p>The number of digits in the result for the fractional part of m or a is equal to the precision. If the precision is not specified then the default value is 6. If the precision is less than the number of digits which would appear after the decimal point in the string returned by Float.toString(float) or Double.toString(double) respectively, then the value will be rounded using the round half up algorithm. <strong>Otherwise, zeros may be appended to reach the precision.</strong> For a canonical representation of the value, use Float.toString(float) or Double.toString(double) as appropriate. <em>(emphasis mine)</em></p>\n</blockquote>\n<p>And in the <code>toString</code> <a href=\"https://docs.oracle.com/javase/7/docs/api/java/lang/Double.html#toString(double)\" rel=\"nofollow noreferrer\">specification</a>:</p>\n<blockquote>\n<p>How many digits must be printed for the fractional part of m or a? There must be at least one digit to represent the fractional part, and <strong>beyond that as many, but only as many, more digits as are needed to uniquely distinguish the argument value from adjacent values of type double</strong>. That is, suppose that x is the exact mathematical value represented by the decimal representation produced by this method for a finite nonzero argument d. Then d must be the double value nearest to x; or if two double values are equally close to x, then d must be one of them and the least significant bit of the significand of d must be 0. <em>(emphasis mine)</em></p>\n</blockquote>\n<p>So, Java does perform a different binary to decimal conversion from C, but it remains closer to the true binary value than to any other, so the spec guarantees that the binary value can be restored back by a decimal to binary conversion.</p>\n<p>Professor William Kahan warned about some Java floating-point issues in this article:</p>\n<p><a href=\"https://people.eecs.berkeley.edu/%7Ewkahan/JAVAhurt.pdf\" rel=\"nofollow noreferrer\">How Java’s Floating-Point Hurts Everyone Everywhere</a></p>\n<p>But this conversion behaviour seems to be IEEE-complaint.</p>\n<p>EDIT: I have included information provided by @MarkDickinson in the comments, to report that this Java behaviour, albeit different from C, is documented, and is IEEE-compliant. This has already been explained <a href=\"https://stackoverflow.com/questions/13479163/round-float-to-x-decimals/22155830#22155830\">here</a>, <a href=\"https://stackoverflow.com/questions/23389584/how-does-java-convert-floats-to-strings/23392853#23392853\">here</a>, and <a href=\"https://stackoverflow.com/questions/57778637/why-do-c-and-java-round-floats-differently/57779767#57779767\">here</a>.</p>\n"}],"owner":{"account_id":24068996,"reputation":33,"user_id":18045161,"display_name":"Nick"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":210,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":70878559,"answer_count":1,"score":3,"last_activity_date":1643496650,"creation_date":1643270356,"question_id":70875083,"body_markdown":"I understand that the theory of binary numbers, so operation of double numbers is not precise. However, in java, I have no idea **why &quot;(double)65 / 100&quot; is 0.65**, which is completely correct in decimal number, **other than 0.6500000000004**.\r\n\r\n```\r\ndouble a = 5;\r\ndouble b = 4.35;\r\nint c = 65;\r\nint d = 100;\r\nSystem.out.println(a -  b); // 0.6500000000000004\r\nSystem.out.println((double) c /  d); // 0.65\r\n```","title":"Why some double precision divisions are correct in java operation?","body":"<p>I understand that the theory of binary numbers, so operation of double numbers is not precise. However, in java, I have no idea <strong>why &quot;(double)65 / 100&quot; is 0.65</strong>, which is completely correct in decimal number, <strong>other than 0.6500000000004</strong>.</p>\n<pre><code>double a = 5;\ndouble b = 4.35;\nint c = 65;\nint d = 100;\nSystem.out.println(a -  b); // 0.6500000000000004\nSystem.out.println((double) c /  d); // 0.65\n</code></pre>\n"},{"tags":["java","whitespace"],"comments":[{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":1,"creation_date":1384278840,"post_id":19936374,"comment_id":29668527,"body_markdown":"You could check how it treats &amp;nbsp;, i.e. non-breaking space.","body":"You could check how it treats &amp;nbsp;, i.e. non-breaking space."},{"owner":{"account_id":462861,"reputation":17872,"user_id":865403,"accept_rate":60,"display_name":"Pavel Horal"},"score":0,"creation_date":1384278951,"post_id":19936374,"comment_id":29668590,"body_markdown":"I would consider that an extremely ugly hack... better use something like a dash symbol (`-`) to indicate empty value.","body":"I would consider that an extremely ugly hack... better use something like a dash symbol (<code>-</code>) to indicate empty value."},{"owner":{"account_id":1236369,"reputation":14751,"user_id":1199882,"accept_rate":80,"display_name":"CodeBlue"},"score":0,"creation_date":1384279001,"post_id":19936374,"comment_id":29668614,"body_markdown":"Ya, I am using dash right now, but I thought this was an interesting question.","body":"Ya, I am using dash right now, but I thought this was an interesting question."},{"owner":{"account_id":195331,"reputation":275408,"user_id":438154,"accept_rate":98,"display_name":"Sotirios Delimanolis"},"score":1,"creation_date":1384279018,"post_id":19936374,"comment_id":29668623,"body_markdown":"Iterate over all possible values of `char` and check. (Good luck)","body":"Iterate over all possible values of <code>char</code> and check. (Good luck)"},{"owner":{"account_id":1236369,"reputation":14751,"user_id":1199882,"accept_rate":80,"display_name":"CodeBlue"},"score":0,"creation_date":1384279127,"post_id":19936374,"comment_id":29668677,"body_markdown":"@SotiriosDelimanolis Lol! I would first need an image recognition implementation for that to &quot;see&quot; if the character looks invisible.","body":"@SotiriosDelimanolis Lol! I would first need an image recognition implementation for that to &quot;see&quot; if the character looks invisible."},{"owner":{"account_id":412545,"reputation":5279,"user_id":785663,"accept_rate":75,"display_name":"mabi"},"score":0,"creation_date":1384279460,"post_id":19936374,"comment_id":29668890,"body_markdown":"What about using (UTF-8) control characters instead? Although I agree with Pavel on the use case...","body":"What about using (UTF-8) control characters instead? Although I agree with Pavel on the use case..."},{"owner":{"account_id":1362211,"reputation":1708,"user_id":1299367,"accept_rate":64,"display_name":"Maciej Stachowski"},"score":0,"creation_date":1384279797,"post_id":19936374,"comment_id":29669094,"body_markdown":"Uh... Zero width space? Zero width non-breaking space? I have to agree, this seems ugly - not sure if on part of your app, or the framework.","body":"Uh... Zero width space? Zero width non-breaking space? I have to agree, this seems ugly - not sure if on part of your app, or the framework."},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1384281560,"post_id":19936374,"comment_id":29670036,"body_markdown":"How about `U+1F4A9`? It’s not really empty but a good marker for no interesting content…","body":"How about <code>U+1F4A9</code>? It’s not really empty but a good marker for no interesting content…"}],"answers":[{"tags":[],"owner":{"account_id":117745,"reputation":5429,"user_id":308219,"display_name":"Michael Konietzka"},"down_vote_count":0,"up_vote_count":44,"is_accepted":true,"score":44,"last_activity_date":1643495195,"creation_date":1384283074,"answer_id":19937754,"question_id":19936374,"body_markdown":"Try [Unicode Character &#39;ZERO WIDTH SPACE&#39; (U+200B)][1]. It is not a Whitespace according to [WP: Whitespace#Unicode][2]\r\n\r\nThe code of [`StringUtils.isBlank`][3] will not bother it:\r\n\r\n    public static boolean isBlank(String str) {\r\n    int strLen;\r\n    if (str == null || (strLen = str.length()) == 0) {\r\n              return true;\r\n         }\r\n    for (int i = 0; i &lt; strLen; i++) {\r\n         if ((Character.isWhitespace(str.charAt(i)) == false)) {\r\n                       return false;\r\n                    }\r\n             }\r\n     return true;\r\n      }\r\n\r\n\r\n  [1]: http://www.fileformat.info/info/unicode/char/200B/index.htm &quot;Unicode Character &#39;ZERO WIDTH SPACE&#39; &amp;#40;U+200B&amp;#41;&quot;\r\n  [2]: http://en.wikipedia.org/wiki/Whitespace_character#Unicode\r\n  [3]: http://commons.apache.org/proper/commons-lang/javadocs/api-2.6/src-html/org/apache/commons/lang/StringUtils.html#line.231","title":"Is there an invisible character that is not regarded as whitespace?","body":"<p>Try <a href=\"http://www.fileformat.info/info/unicode/char/200B/index.htm\" rel=\"nofollow noreferrer\" title=\"Unicode Character 'ZERO WIDTH SPACE' (U+200B)\">Unicode Character 'ZERO WIDTH SPACE' (U+200B)</a>. It is not a Whitespace according to <a href=\"http://en.wikipedia.org/wiki/Whitespace_character#Unicode\" rel=\"nofollow noreferrer\">WP: Whitespace#Unicode</a></p>\n<p>The code of <a href=\"http://commons.apache.org/proper/commons-lang/javadocs/api-2.6/src-html/org/apache/commons/lang/StringUtils.html#line.231\" rel=\"nofollow noreferrer\"><code>StringUtils.isBlank</code></a> will not bother it:</p>\n<pre><code>public static boolean isBlank(String str) {\nint strLen;\nif (str == null || (strLen = str.length()) == 0) {\n          return true;\n     }\nfor (int i = 0; i &lt; strLen; i++) {\n     if ((Character.isWhitespace(str.charAt(i)) == false)) {\n                   return false;\n                }\n         }\n return true;\n  }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2118135,"reputation":2546,"user_id":1881978,"accept_rate":90,"display_name":"Bugs Bunny"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1570830923,"creation_date":1570829282,"answer_id":58348660,"question_id":19936374,"body_markdown":"That Unicode Character &#39;ZERO WIDTH SPACE&#39; (U+200B) Michael Konietzka shared didn&#39;t work for me, but found a different one that did:\r\n\r\n```‏‏‎ ‎```\r\n\r\nIt actually identifies as combination of\r\n\r\n    U+200F : RIGHT-TO-LEFT MARK [RLM]\r\n    U+200F : RIGHT-TO-LEFT MARK [RLM]\r\n    U+200E : LEFT-TO-RIGHT MARK [LRM]\r\n    U+0020 : SPACE [SP]\r\n    U+200E : LEFT-TO-RIGHT MARK [LRM]\r\n\r\nand it&#39;s ASCII value is 8207\r\n\r\n```‏‏‎&#39;‏‏‎ ‎&#39;.charCodeAt(0) // 8207```\r\n\r\n&gt; Source: http://emptycharacter.com/\r\n","title":"Is there an invisible character that is not regarded as whitespace?","body":"<p>That Unicode Character 'ZERO WIDTH SPACE' (U+200B) Michael Konietzka shared didn't work for me, but found a different one that did:</p>\n\n<p><code>‏‏‎ ‎</code></p>\n\n<p>It actually identifies as combination of</p>\n\n<pre><code>U+200F : RIGHT-TO-LEFT MARK [RLM]\nU+200F : RIGHT-TO-LEFT MARK [RLM]\nU+200E : LEFT-TO-RIGHT MARK [LRM]\nU+0020 : SPACE [SP]\nU+200E : LEFT-TO-RIGHT MARK [LRM]\n</code></pre>\n\n<p>and it's ASCII value is 8207</p>\n\n<p><code>‏‏‎'‏‏‎ ‎'.charCodeAt(0) // 8207</code></p>\n\n<blockquote>\n  <p>Source: <a href=\"http://emptycharacter.com/\" rel=\"noreferrer\">http://emptycharacter.com/</a></p>\n</blockquote>\n"},{"tags":[],"owner":{"display_name":"user4698348"},"down_vote_count":0,"up_vote_count":75,"is_accepted":false,"score":75,"last_activity_date":1577653837,"creation_date":1577653837,"answer_id":59523326,"question_id":19936374,"body_markdown":"There&#39;s also `⠀` (U+2800 BRAILLE PATTERN BLANK), which is a blank Braille block rather than a space character.","title":"Is there an invisible character that is not regarded as whitespace?","body":"<p>There's also <code>⠀</code> (U+2800 BRAILLE PATTERN BLANK), which is a blank Braille block rather than a space character.</p>\n"},{"tags":[],"owner":{"account_id":3074405,"reputation":135,"user_id":2604181,"display_name":"Jayanta"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1643495081,"creation_date":1605947187,"answer_id":64941119,"question_id":19936374,"body_markdown":"JavaScript&#39;s\r\n\r\n```\r\nString.fromCharCode(8287).repeat(30)\r\n``` \r\ngave me real but invisible spaces.\r\n\r\n```\r\nhttp://emptycharacter.com/ great\r\n```\r\n","title":"Is there an invisible character that is not regarded as whitespace?","body":"<p>JavaScript's</p>\n<pre><code>String.fromCharCode(8287).repeat(30)\n</code></pre>\n<p>gave me real but invisible spaces.</p>\n<pre><code>http://emptycharacter.com/ great\n</code></pre>\n"}],"owner":{"account_id":1236369,"reputation":14751,"user_id":1199882,"accept_rate":80,"display_name":"CodeBlue"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":60979,"favorite_count":0,"down_vote_count":0,"up_vote_count":61,"accepted_answer_id":19937754,"answer_count":4,"score":61,"last_activity_date":1643495195,"creation_date":1384278722,"question_id":19936374,"body_markdown":"I am working with an existing framework where I have to set a certain attribute to blank if some conditions are satisfied. Unfortunately, the framework doesn&#39;t allow setting only whitespace to the attribute value. Specifically, it does a\r\n\r\n`!(org.apache.commons.lang.StringUtils.isBlank(value))` check on the value\r\n\r\n\r\nIs it possible to somehow bypass this and set a value that looks blank/invisible to the eye but is not regarded as whitespace? \r\n\r\nI am using a dash &quot;-&quot; right now, but I think it would be interesting to know if it&#39;s possible. ","title":"Is there an invisible character that is not regarded as whitespace?","body":"<p>I am working with an existing framework where I have to set a certain attribute to blank if some conditions are satisfied. Unfortunately, the framework doesn't allow setting only whitespace to the attribute value. Specifically, it does a</p>\n\n<p><code>!(org.apache.commons.lang.StringUtils.isBlank(value))</code> check on the value</p>\n\n<p>Is it possible to somehow bypass this and set a value that looks blank/invisible to the eye but is not regarded as whitespace? </p>\n\n<p>I am using a dash \"-\" right now, but I think it would be interesting to know if it's possible. </p>\n"},{"tags":["java","unit-testing","spring-data-jpa","transactions","save"],"answers":[{"tags":[],"owner":{"account_id":18098038,"reputation":1240,"user_id":13156126,"display_name":"fladdimir"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1643494411,"creation_date":1643494411,"answer_id":70910182,"question_id":70908330,"body_markdown":"The transaction which is opened for the test is rolled back at the end of the test method.\r\n\r\nThis can be disabled:\r\n\r\n    @Rollback(false) // &lt;-- !\r\n    @Test   \r\n    public void myTest()\r\n\r\nhttps://stackoverflow.com/questions/43658630/spring-boot-test-transactional-not-saving\r\n\r\nAlso note that the ORM (e.g. Hibernate) will probably have some caching in place, which can prevent actually hitting the DB when querying within a transaction for a known entity.\r\n\r\nSo to test the successful persistence of entities it is good practice to test the retrieval in a separated transaction.","title":"Spring Data JpaRepository saveAndFlush not working in @Transactional test method","body":"<p>The transaction which is opened for the test is rolled back at the end of the test method.</p>\n<p>This can be disabled:</p>\n<pre><code>@Rollback(false) // &lt;-- !\n@Test   \npublic void myTest()\n</code></pre>\n<p><a href=\"https://stackoverflow.com/questions/43658630/spring-boot-test-transactional-not-saving\">Spring boot test @Transactional not saving</a></p>\n<p>Also note that the ORM (e.g. Hibernate) will probably have some caching in place, which can prevent actually hitting the DB when querying within a transaction for a known entity.</p>\n<p>So to test the successful persistence of entities it is good practice to test the retrieval in a separated transaction.</p>\n"}],"owner":{"account_id":23647995,"reputation":3,"user_id":17677330,"display_name":"Enzo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4512,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70910182,"answer_count":1,"score":0,"last_activity_date":1643494411,"creation_date":1643479844,"question_id":70908330,"body_markdown":"Using JPA Spring Data I have created a couple of entities Ebook and Review, which are linked by a ManyToOne relationship from Review towards Ebook. I have tried to insert a review for an existent ebook, but the result is not being reflected in the database (Postgres DB), even though I am using a saveAndFlush inside a @Transactional. I retrieve inserted review correctly, it is just that is not saving the record in the table. \r\n\r\nEntities:\r\n\r\nEbook:\r\n```\r\n@Entity\r\npublic class Ebook {\r\n\r\n    @Id\r\n    @SequenceGenerator(\r\n            name=&quot;ebook_sequence&quot;,\r\n            sequenceName = &quot;ebook_sequence&quot;,\r\n            allocationSize = 1\r\n    )\r\n    @GeneratedValue (\r\n            strategy = GenerationType.SEQUENCE,\r\n            generator =&quot;ebook_sequence&quot;\r\n    )\r\n    private Long idEbook;\r\n    private String title;\r\n}\r\n```\r\nReview:\r\n```\r\n@Entity\r\npublic class Review {\r\n    @Id\r\n    @SequenceGenerator(\r\n            name=&quot;sequence_review&quot;,\r\n            sequenceName = &quot;sequence_review&quot;,\r\n            allocationSize = 1\r\n    )\r\n    @GeneratedValue(\r\n            strategy = GenerationType.SEQUENCE,\r\n            generator = &quot;sequence_review&quot;\r\n    )\r\n    private Long idReview;\r\n    private String reviewText;\r\n\r\n    //ManytoOne Ebook\r\n    @ManyToOne(\r\n            cascade = CascadeType.ALL,\r\n            fetch = FetchType.LAZY\r\n    )\r\n    @JoinColumn(\r\n            name = &quot;id_ebook&quot;,\r\n            referencedColumnName = &quot;idEbook&quot;\r\n    )\r\n    private Ebook ebook;\r\n}\r\n```\r\n\r\nAnd the test in which I am trying to insert just a review corresponding to a preexisting ebook record:\r\n\r\n```\r\n    @Test\r\n    @Transactional\r\n    public void saveReviewWithEbook() {\r\n\r\n        Ebook ebook = ebookRepository.getById((long)1);\r\n\r\n        Review review = Review.builder()\r\n                .reviewText(&quot;review text ebook 1&quot;)\r\n                .ebook(ebook)\r\n                .build();\r\n\r\n        Review reviewInserted = reviewRepository.saveAndFlush(review); //saveAndFlush(review);\r\n        Review reviewLoaded = reviewRepository.getById(reviewInserted.getIdReview());\r\n        System.out.println(&quot;reviewLoaded = &quot; + reviewLoaded);\r\n    }\r\n```\r\n\r\nAfter executing it, there is no record inserted in table &#39;review&#39;, although data appear correctly in variable &#39;reviewLoaded&#39;. Why is that? How can I save just a review corresponding to an existing ebook?\r\n\r\n\r\n","title":"Spring Data JpaRepository saveAndFlush not working in @Transactional test method","body":"<p>Using JPA Spring Data I have created a couple of entities Ebook and Review, which are linked by a ManyToOne relationship from Review towards Ebook. I have tried to insert a review for an existent ebook, but the result is not being reflected in the database (Postgres DB), even though I am using a saveAndFlush inside a @Transactional. I retrieve inserted review correctly, it is just that is not saving the record in the table.</p>\n<p>Entities:</p>\n<p>Ebook:</p>\n<pre><code>@Entity\npublic class Ebook {\n\n    @Id\n    @SequenceGenerator(\n            name=&quot;ebook_sequence&quot;,\n            sequenceName = &quot;ebook_sequence&quot;,\n            allocationSize = 1\n    )\n    @GeneratedValue (\n            strategy = GenerationType.SEQUENCE,\n            generator =&quot;ebook_sequence&quot;\n    )\n    private Long idEbook;\n    private String title;\n}\n</code></pre>\n<p>Review:</p>\n<pre><code>@Entity\npublic class Review {\n    @Id\n    @SequenceGenerator(\n            name=&quot;sequence_review&quot;,\n            sequenceName = &quot;sequence_review&quot;,\n            allocationSize = 1\n    )\n    @GeneratedValue(\n            strategy = GenerationType.SEQUENCE,\n            generator = &quot;sequence_review&quot;\n    )\n    private Long idReview;\n    private String reviewText;\n\n    //ManytoOne Ebook\n    @ManyToOne(\n            cascade = CascadeType.ALL,\n            fetch = FetchType.LAZY\n    )\n    @JoinColumn(\n            name = &quot;id_ebook&quot;,\n            referencedColumnName = &quot;idEbook&quot;\n    )\n    private Ebook ebook;\n}\n</code></pre>\n<p>And the test in which I am trying to insert just a review corresponding to a preexisting ebook record:</p>\n<pre><code>    @Test\n    @Transactional\n    public void saveReviewWithEbook() {\n\n        Ebook ebook = ebookRepository.getById((long)1);\n\n        Review review = Review.builder()\n                .reviewText(&quot;review text ebook 1&quot;)\n                .ebook(ebook)\n                .build();\n\n        Review reviewInserted = reviewRepository.saveAndFlush(review); //saveAndFlush(review);\n        Review reviewLoaded = reviewRepository.getById(reviewInserted.getIdReview());\n        System.out.println(&quot;reviewLoaded = &quot; + reviewLoaded);\n    }\n</code></pre>\n<p>After executing it, there is no record inserted in table 'review', although data appear correctly in variable 'reviewLoaded'. Why is that? How can I save just a review corresponding to an existing ebook?</p>\n"},{"tags":["java","postgresql","hibernate","jpa"],"comments":[{"owner":{"display_name":"user330315"},"score":3,"creation_date":1642775259,"post_id":70802831,"comment_id":125168703,"body_markdown":"You should define the column in the database table as `boolean`, not `bit`","body":"You should define the column in the database table as <code>boolean</code>, not <code>bit</code>"},{"owner":{"account_id":16121482,"reputation":181,"user_id":11637368,"display_name":"Alex Roitman"},"score":0,"creation_date":1642775323,"post_id":70802831,"comment_id":125168730,"body_markdown":"I cannot, it have a lot of dependencies with other teams to redefine the column","body":"I cannot, it have a lot of dependencies with other teams to redefine the column"},{"owner":{"account_id":10969163,"reputation":6667,"user_id":8060017,"display_name":"Edouard"},"score":0,"creation_date":1642775358,"post_id":70802831,"comment_id":125168742,"body_markdown":"If the boolean value is &#39;0&#39; or &#39;1&#39;, then you should be able to cast it in bit(1) in postgres : `SELECT &#39;1&#39; :: bit(1)`","body":"If the boolean value is &#39;0&#39; or &#39;1&#39;, then you should be able to cast it in bit(1) in postgres : <code>SELECT &#39;1&#39; :: bit(1)</code>"},{"owner":{"display_name":"user330315"},"score":1,"creation_date":1642775458,"post_id":70802831,"comment_id":125168774,"body_markdown":"Well, `boolean` values shouldn&#39;t be stored in a `bit` column to begin with. This should have been a `boolean` right from the start. You aren&#39;t using a `Bit` in Java either.","body":"Well, <code>boolean</code> values shouldn&#39;t be stored in a <code>bit</code> column to begin with. This should have been a <code>boolean</code> right from the start. You aren&#39;t using a <code>Bit</code> in Java either."},{"owner":{"account_id":17592368,"reputation":13891,"user_id":12763954,"display_name":"Olivier"},"score":0,"creation_date":1643098117,"post_id":70802831,"comment_id":125242917,"body_markdown":"Do you need to update the column or just read it?","body":"Do you need to update the column or just read it?"},{"owner":{"account_id":16121482,"reputation":181,"user_id":11637368,"display_name":"Alex Roitman"},"score":0,"creation_date":1643143075,"post_id":70802831,"comment_id":125260870,"body_markdown":"Both actions, also insert","body":"Both actions, also insert"}],"answers":[{"tags":[],"owner":{"account_id":19092422,"reputation":51311,"user_id":13942448,"display_name":"jccampanero"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1643154187,"creation_date":1643154187,"answer_id":70857097,"question_id":70802831,"body_markdown":"At first glance, I would try using the following `@Column` definition for your field:\r\n\r\n```java\r\n@Column(columnDefinition=&quot;bit&quot;)\r\nprivate Boolean attribute;\r\n```\r\n\r\nIf it doesn&#39;t work, although I am aware that you mentioned you tested it in your question, try defining a custom `@Type`. The idea is based on [this other SO question](https://stackoverflow.com/questions/57309861/how-to-read-geography-values-using-hibernate/66626842#66626842), the [following test case](https://github.com/pgjdbc/pgjdbc/blob/f61fbfe7b72ccf2ca0ac2e2c366230fdb93260e5/pgjdbc/src/test/java/org/postgresql/jdbc/BitFieldTest.java), and [this article](https://vladmihalcea.com/postgresql-inet-type-hibernate/) from Vlad Mihalcea.\r\n\r\nYour custom type definition could be as follows:\r\n\r\n```java\r\nimport java.sql.PreparedStatement;\r\nimport java.sql.ResultSet;\r\nimport java.sql.SQLException;\r\nimport java.sql.Types;\r\n\r\npublic class PostgresBit1Type\r\n    extends ImmutableType&lt;Boolean&gt; {\r\n\r\n  public PostgresBit1Type() {\r\n    super(Boolean.class);\r\n  }\r\n\r\n  @Override\r\n  public int[] sqlTypes() {\r\n    return new int[]{Types.BIT};\r\n  }\r\n\r\n  @Override\r\n  public Boolean get(\r\n      ResultSet rs,\r\n      String[] names,\r\n      SharedSessionContractImplementor session,\r\n      Object owner)\r\n      throws SQLException {\r\n    // The paradox is that the driver itself treats BIT(1) as boolean\r\n    Boolean result = rs.getBoolean(names[0]);\r\n    return result;\r\n  }\r\n\r\n  @Override\r\n  public void set(\r\n      PreparedStatement st,\r\n      Point value,\r\n      int index,\r\n      SharedSessionContractImplementor session)\r\n      throws SQLException {\r\n    if (value == null) {\r\n      st.setNull(index, Types.BIT);\r\n    } else {\r\n      Object holder = ReflectionUtils.newInstance(\r\n        &quot;org.postgresql.util.PGobject&quot;\r\n      );\r\n      ReflectionUtils.invokeSetter(\r\n        holder,\r\n        &quot;type&quot;,\r\n        &quot;bit&quot;\r\n      );\r\n      ReflectionUtils.invokeSetter(\r\n        holder,\r\n        &quot;value&quot;,\r\n        value ? &quot;1&quot; : &quot;0&quot;\r\n      );\r\n      st.setObject(index, holder);\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nAs mentioned in the companion SO answer, the `Inmutable` class is taken from [this excellent article](https://vladmihalcea.com/how-to-implement-a-custom-basic-type-using-hibernate-usertype/) from Vlad Mihalcea:\r\n\r\n```java\r\nimport java.io.Serializable;\r\nimport java.sql.PreparedStatement;\r\nimport java.sql.ResultSet;\r\nimport java.sql.SQLException;\r\nimport java.util.Objects;\r\n\r\nimport org.hibernate.engine.spi.SharedSessionContractImplementor;\r\nimport org.hibernate.usertype.UserType;\r\n\r\npublic abstract class ImmutableType&lt;T&gt; implements UserType {\r\n\r\n  private final Class&lt;T&gt; clazz;\r\n\r\n  protected ImmutableType(Class&lt;T&gt; clazz) {\r\n    this.clazz = clazz;\r\n  }\r\n\r\n  @Override\r\n  public Object nullSafeGet(\r\n      ResultSet rs,\r\n      String[] names,\r\n      SharedSessionContractImplementor session,\r\n      Object owner)\r\n      throws SQLException {\r\n    return get(rs, names, session, owner);\r\n  }\r\n\r\n  @Override\r\n  public void nullSafeSet(\r\n      PreparedStatement st,\r\n      Object value,\r\n      int index,\r\n      SharedSessionContractImplementor session)\r\n      throws SQLException {\r\n    set(st, clazz.cast(value), index, session);\r\n  }\r\n\r\n  protected abstract T get(\r\n      ResultSet rs,\r\n      String[] names,\r\n      SharedSessionContractImplementor session,\r\n      Object owner) throws SQLException;\r\n\r\n  protected abstract void set(\r\n      PreparedStatement st,\r\n      T value,\r\n      int index,\r\n      SharedSessionContractImplementor session)\r\n      throws SQLException;\r\n\r\n\r\n  @Override\r\n  public Class&lt;T&gt; returnedClass() {\r\n    return clazz;\r\n  }\r\n\r\n  @Override\r\n  public boolean equals(Object x, Object y) {\r\n    return Objects.equals(x, y);\r\n  }\r\n\r\n  @Override\r\n  public int hashCode(Object x) {\r\n    return x.hashCode();\r\n  }\r\n\r\n  @Override\r\n  public Object deepCopy(Object value) {\r\n    return value;\r\n  }\r\n\r\n  @Override\r\n  public boolean isMutable() {\r\n    return false;\r\n  }\r\n\r\n  @Override\r\n  public Serializable disassemble(Object o) {\r\n    return (Serializable) o;\r\n  }\r\n\r\n  @Override\r\n  public Object assemble(\r\n      Serializable cached,\r\n      Object owner) {\r\n    return cached;\r\n  }\r\n\r\n  @Override\r\n  public Object replace(\r\n      Object o,\r\n      Object target,\r\n      Object owner) {\r\n    return o;\r\n  }\r\n}\r\n```\r\n\r\nFinally, define your `Boolean` field similar to:\r\n\r\n```java\r\n@Type(type = &quot;your.packg.PostgresBit1Type&quot;)\r\n@Column(columnDefinition = &quot;bit&quot;)\r\npublic Boolean attribute;\r\n```\r\n\r\nI recommend to use `Boolean` and not `boolean` to appropriately handle `null`. values.\r\n\r\nAlthough I think it should work I haven&#39;t tested the solution myself. I hope at least it gives you some clues to advance in the problem resolution.","title":"ERROR: column is of type bit but expression is of type boolean","body":"<p>At first glance, I would try using the following <code>@Column</code> definition for your field:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Column(columnDefinition=&quot;bit&quot;)\nprivate Boolean attribute;\n</code></pre>\n<p>If it doesn't work, although I am aware that you mentioned you tested it in your question, try defining a custom <code>@Type</code>. The idea is based on <a href=\"https://stackoverflow.com/questions/57309861/how-to-read-geography-values-using-hibernate/66626842#66626842\">this other SO question</a>, the <a href=\"https://github.com/pgjdbc/pgjdbc/blob/f61fbfe7b72ccf2ca0ac2e2c366230fdb93260e5/pgjdbc/src/test/java/org/postgresql/jdbc/BitFieldTest.java\" rel=\"nofollow noreferrer\">following test case</a>, and <a href=\"https://vladmihalcea.com/postgresql-inet-type-hibernate/\" rel=\"nofollow noreferrer\">this article</a> from Vlad Mihalcea.</p>\n<p>Your custom type definition could be as follows:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.sql.PreparedStatement;\nimport java.sql.ResultSet;\nimport java.sql.SQLException;\nimport java.sql.Types;\n\npublic class PostgresBit1Type\n    extends ImmutableType&lt;Boolean&gt; {\n\n  public PostgresBit1Type() {\n    super(Boolean.class);\n  }\n\n  @Override\n  public int[] sqlTypes() {\n    return new int[]{Types.BIT};\n  }\n\n  @Override\n  public Boolean get(\n      ResultSet rs,\n      String[] names,\n      SharedSessionContractImplementor session,\n      Object owner)\n      throws SQLException {\n    // The paradox is that the driver itself treats BIT(1) as boolean\n    Boolean result = rs.getBoolean(names[0]);\n    return result;\n  }\n\n  @Override\n  public void set(\n      PreparedStatement st,\n      Point value,\n      int index,\n      SharedSessionContractImplementor session)\n      throws SQLException {\n    if (value == null) {\n      st.setNull(index, Types.BIT);\n    } else {\n      Object holder = ReflectionUtils.newInstance(\n        &quot;org.postgresql.util.PGobject&quot;\n      );\n      ReflectionUtils.invokeSetter(\n        holder,\n        &quot;type&quot;,\n        &quot;bit&quot;\n      );\n      ReflectionUtils.invokeSetter(\n        holder,\n        &quot;value&quot;,\n        value ? &quot;1&quot; : &quot;0&quot;\n      );\n      st.setObject(index, holder);\n    }\n  }\n}\n</code></pre>\n<p>As mentioned in the companion SO answer, the <code>Inmutable</code> class is taken from <a href=\"https://vladmihalcea.com/how-to-implement-a-custom-basic-type-using-hibernate-usertype/\" rel=\"nofollow noreferrer\">this excellent article</a> from Vlad Mihalcea:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.io.Serializable;\nimport java.sql.PreparedStatement;\nimport java.sql.ResultSet;\nimport java.sql.SQLException;\nimport java.util.Objects;\n\nimport org.hibernate.engine.spi.SharedSessionContractImplementor;\nimport org.hibernate.usertype.UserType;\n\npublic abstract class ImmutableType&lt;T&gt; implements UserType {\n\n  private final Class&lt;T&gt; clazz;\n\n  protected ImmutableType(Class&lt;T&gt; clazz) {\n    this.clazz = clazz;\n  }\n\n  @Override\n  public Object nullSafeGet(\n      ResultSet rs,\n      String[] names,\n      SharedSessionContractImplementor session,\n      Object owner)\n      throws SQLException {\n    return get(rs, names, session, owner);\n  }\n\n  @Override\n  public void nullSafeSet(\n      PreparedStatement st,\n      Object value,\n      int index,\n      SharedSessionContractImplementor session)\n      throws SQLException {\n    set(st, clazz.cast(value), index, session);\n  }\n\n  protected abstract T get(\n      ResultSet rs,\n      String[] names,\n      SharedSessionContractImplementor session,\n      Object owner) throws SQLException;\n\n  protected abstract void set(\n      PreparedStatement st,\n      T value,\n      int index,\n      SharedSessionContractImplementor session)\n      throws SQLException;\n\n\n  @Override\n  public Class&lt;T&gt; returnedClass() {\n    return clazz;\n  }\n\n  @Override\n  public boolean equals(Object x, Object y) {\n    return Objects.equals(x, y);\n  }\n\n  @Override\n  public int hashCode(Object x) {\n    return x.hashCode();\n  }\n\n  @Override\n  public Object deepCopy(Object value) {\n    return value;\n  }\n\n  @Override\n  public boolean isMutable() {\n    return false;\n  }\n\n  @Override\n  public Serializable disassemble(Object o) {\n    return (Serializable) o;\n  }\n\n  @Override\n  public Object assemble(\n      Serializable cached,\n      Object owner) {\n    return cached;\n  }\n\n  @Override\n  public Object replace(\n      Object o,\n      Object target,\n      Object owner) {\n    return o;\n  }\n}\n</code></pre>\n<p>Finally, define your <code>Boolean</code> field similar to:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Type(type = &quot;your.packg.PostgresBit1Type&quot;)\n@Column(columnDefinition = &quot;bit&quot;)\npublic Boolean attribute;\n</code></pre>\n<p>I recommend to use <code>Boolean</code> and not <code>boolean</code> to appropriately handle <code>null</code>. values.</p>\n<p>Although I think it should work I haven't tested the solution myself. I hope at least it gives you some clues to advance in the problem resolution.</p>\n"},{"tags":[],"owner":{"account_id":19916313,"reputation":1323,"user_id":14593204,"display_name":"HibaHasan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1643494235,"creation_date":1643476106,"answer_id":70907818,"question_id":70802831,"body_markdown":"**\r\n\r\nFirst lets clarify things:\r\n------------------------\r\n\r\n**\r\n\r\nThe **Java Boolean** represents a **single bit** value that can be **0 or 1** (False or True).\r\n\r\n**Whereas** SQL defines an **SQL BIT type** that, unlike what you expect, can be used as a parameterized type to define a **fixed-length binary string** (not just 0 or 1 it can be **00000**, **00001**, **01010**... etc.).\r\n\r\nso that&#39;s why it might bring you problems while you map them.\r\n\r\n\r\n----------\r\n\r\n\r\nHowever, try this:\r\n\r\n    @Column(name = &quot;columnName&quot;, columnDefinition=&quot;BIT&quot;)\r\n    private Boolean columnVariable;\r\n\r\nor this:\r\n\r\n    @Type(type = &quot;numeric_boolean&quot;)\r\n    private Boolean columnVariable; ","title":"ERROR: column is of type bit but expression is of type boolean","body":"<p>**</p>\n<h2>First lets clarify things:</h2>\n<p>**</p>\n<p>The <strong>Java Boolean</strong> represents a <strong>single bit</strong> value that can be <strong>0 or 1</strong> (False or True).</p>\n<p><strong>Whereas</strong> SQL defines an <strong>SQL BIT type</strong> that, unlike what you expect, can be used as a parameterized type to define a <strong>fixed-length binary string</strong> (not just 0 or 1 it can be <strong>00000</strong>, <strong>00001</strong>, <strong>01010</strong>... etc.).</p>\n<p>so that's why it might bring you problems while you map them.</p>\n<hr />\n<p>However, try this:</p>\n<pre><code>@Column(name = &quot;columnName&quot;, columnDefinition=&quot;BIT&quot;)\nprivate Boolean columnVariable;\n</code></pre>\n<p>or this:</p>\n<pre><code>@Type(type = &quot;numeric_boolean&quot;)\nprivate Boolean columnVariable; \n</code></pre>\n"}],"owner":{"account_id":16121482,"reputation":181,"user_id":11637368,"display_name":"Alex Roitman"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8137,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1643494235,"creation_date":1642774955,"question_id":70802831,"body_markdown":"The database have an attribute with type BIT(1) where the value can be &#39;0&#39;/&#39;1&#39;,\r\nI have an hibernate entity that have an attribute:\r\n```java\r\n  private Boolean attribute;\r\n````\r\nWhat i tried:\r\n- Use @Type\r\n- use Boolean/boolean\r\n- use String\r\n- Use a Converter\r\n- Use a custom type(https://www.baeldung.com/hibernate-custom-types)\r\n\r\nBut I only receive errors like\r\n\r\n    ERROR: column  is of type bit but expression is of type boolean\r\n    ERROR: column  is of type bit but expression is of type bytea\r\n    ERROR: column is of type bit but expression is of type various\r\n    ERROR: column is of type bit but expression is of type string","title":"ERROR: column is of type bit but expression is of type boolean","body":"<p>The database have an attribute with type BIT(1) where the value can be '0'/'1',\nI have an hibernate entity that have an attribute:</p>\n<pre class=\"lang-java prettyprint-override\"><code>  private Boolean attribute;\n</code></pre>\n<p>What i tried:</p>\n<ul>\n<li>Use @Type</li>\n<li>use Boolean/boolean</li>\n<li>use String</li>\n<li>Use a Converter</li>\n<li>Use a custom type(<a href=\"https://www.baeldung.com/hibernate-custom-types\" rel=\"nofollow noreferrer\">https://www.baeldung.com/hibernate-custom-types</a>)</li>\n</ul>\n<p>But I only receive errors like</p>\n<pre><code>ERROR: column  is of type bit but expression is of type boolean\nERROR: column  is of type bit but expression is of type bytea\nERROR: column is of type bit but expression is of type various\nERROR: column is of type bit but expression is of type string\n</code></pre>\n"},{"tags":["java","string","algorithm","substring","comparison"],"comments":[{"owner":{"account_id":20854541,"reputation":1009,"user_id":15318227,"display_name":"Gurkirat Singh Guliani"},"score":0,"creation_date":1643491426,"post_id":70909732,"comment_id":125355785,"body_markdown":"what is the question?","body":"what is the question?"},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1643493107,"post_id":70909732,"comment_id":125356124,"body_markdown":"Run your code on &quot;acab&quot;, 2. The smallest string will be given as &quot;ac&quot;, which is obviously wrong. Step through your code with the debugger to understand why.","body":"Run your code on &quot;acab&quot;, 2. The smallest string will be given as &quot;ac&quot;, which is obviously wrong. Step through your code with the debugger to understand why."}],"answers":[{"tags":[],"owner":{"account_id":24095873,"reputation":426,"user_id":18068398,"display_name":"rentox98"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1643494037,"creation_date":1643494037,"answer_id":70910133,"question_id":70909732,"body_markdown":"It seems that in the for loop you create the substring and compare only the first char, so for instance in an iteration you could have largest = &quot;ffooo&quot; and output = &quot;foooo&quot; but in this case the program skips the conditions and fails (keeping the wrong largest substring).\r\nYou must consider this case.","title":"Test Case 2 failure in Java Substring Comparisons on HackerRank","body":"<p>It seems that in the for loop you create the substring and compare only the first char, so for instance in an iteration you could have largest = &quot;ffooo&quot; and output = &quot;foooo&quot; but in this case the program skips the conditions and fails (keeping the wrong largest substring).\nYou must consider this case.</p>\n"}],"owner":{"account_id":19683234,"reputation":35,"user_id":14409862,"display_name":"Miguel Barra"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":370,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1643494037,"creation_date":1643490387,"question_id":70909732,"body_markdown":"It&#39;s passing all cases except for Test Case 2 and 4. This is my code:\r\n\r\n    import java.util.Scanner;\r\n    \r\n    public class Solution {\r\n    \r\n        public static String getSmallestAndLargest(String s, int k) {\r\n            String smallest = &quot;&quot;;\r\n            String largest = &quot;&quot;;\r\n            \r\n            // Complete the function\r\n            // &#39;smallest&#39; must be the lexicographically smallest substring of length &#39;k&#39;\r\n            // &#39;largest&#39; must be the lexicographically largest substring of length &#39;k&#39;\r\n            int min = Integer.MAX_VALUE;\r\n            int max = Integer.MIN_VALUE;\r\n            int len = s.length() - k;\r\n            for (int i = 0; i &lt;= len; i++) {\r\n                String output = s.substring(i, k++);\r\n                int ascii_code_1 = output.charAt(0);\r\n                int ascii_code_2 = output.charAt(0);\r\n                if (ascii_code_1 &lt; min) {\r\n                    min = ascii_code_1;\r\n                    smallest = output;\r\n                }\r\n                if (ascii_code_2 &gt; max) {\r\n                    max = ascii_code_2;\r\n                    largest = output;\r\n                }\r\n            }\r\n            \r\n            return smallest + &quot;\\n&quot; + largest;\r\n        }\r\n    \r\n    \r\n        public static void main(String[] args) {\r\n            Scanner scan = new Scanner(System.in);\r\n            String s = scan.next();\r\n            int k = scan.nextInt();\r\n            scan.close();\r\n          \r\n            System.out.println(getSmallestAndLargest(s, k));\r\n        }\r\n    }\r\n\r\nHere is the Test Case 2:\r\n\r\n    ASDFHDSFHsdlfhsdlfLDFHSDLFHsdlfhsdlhkfsdlfLHDFLSDKFHsdfhsdlkfhsdlfhsLFDLSFHSDLFHsdkfhsdkfhsdkfhsdfhsdfjeaDFHSDLFHDFlajfsdlfhsdlfhDSLFHSDLFHdlfhs\r\n    30","title":"Test Case 2 failure in Java Substring Comparisons on HackerRank","body":"<p>It's passing all cases except for Test Case 2 and 4. This is my code:</p>\n<pre><code>import java.util.Scanner;\n\npublic class Solution {\n\n    public static String getSmallestAndLargest(String s, int k) {\n        String smallest = &quot;&quot;;\n        String largest = &quot;&quot;;\n        \n        // Complete the function\n        // 'smallest' must be the lexicographically smallest substring of length 'k'\n        // 'largest' must be the lexicographically largest substring of length 'k'\n        int min = Integer.MAX_VALUE;\n        int max = Integer.MIN_VALUE;\n        int len = s.length() - k;\n        for (int i = 0; i &lt;= len; i++) {\n            String output = s.substring(i, k++);\n            int ascii_code_1 = output.charAt(0);\n            int ascii_code_2 = output.charAt(0);\n            if (ascii_code_1 &lt; min) {\n                min = ascii_code_1;\n                smallest = output;\n            }\n            if (ascii_code_2 &gt; max) {\n                max = ascii_code_2;\n                largest = output;\n            }\n        }\n        \n        return smallest + &quot;\\n&quot; + largest;\n    }\n\n\n    public static void main(String[] args) {\n        Scanner scan = new Scanner(System.in);\n        String s = scan.next();\n        int k = scan.nextInt();\n        scan.close();\n      \n        System.out.println(getSmallestAndLargest(s, k));\n    }\n}\n</code></pre>\n<p>Here is the Test Case 2:</p>\n<pre><code>ASDFHDSFHsdlfhsdlfLDFHSDLFHsdlfhsdlhkfsdlfLHDFLSDKFHsdfhsdlkfhsdlfhsLFDLSFHSDLFHsdkfhsdkfhsdkfhsdfhsdfjeaDFHSDLFHDFlajfsdlfhsdlfhDSLFHSDLFHdlfhs\n30\n</code></pre>\n"},{"tags":["java","string","matching"],"answers":[{"tags":[],"owner":{"account_id":11683,"reputation":1438179,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1643493474,"creation_date":1319880545,"answer_id":7938041,"question_id":7938033,"body_markdown":"That&#39;s just a matter of [`String.contains`][1]:\r\n\r\n    if (input.contains(&quot;{item}&quot;))\r\n\r\nIf you need to know *where* it occurs, you can use `indexOf`:\r\n\r\n    int index = input.indexOf(&quot;{item}&quot;);\r\n    if (index != -1) // -1 means &quot;not found&quot;\r\n    {\r\n        ...\r\n    }\r\n\r\nThat&#39;s fine for matching *exact* strings - if you need real *patterns* (e.g. &quot;three digits followed by at most 2 letters A-C&quot;) then you should look into [regular expressions][2].\r\n\r\nEDIT: Okay, it sounds like you *do* want regular expressions. You might want something like this:\r\n\r\n    private static final Pattern URL_PATTERN =\r\n        Pattern.compile(&quot;/\\\\{[a-zA-Z0-9]+\\\\}/&quot;);\r\n\r\n    ...\r\n\r\n    if (URL_PATTERN.matcher(input).find())\r\n\r\n  [1]: http://download.oracle.com/javase/7/docs/api/java/lang/String.html#contains%28java.lang.CharSequence%29\r\n  [2]: http://download.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html","title":"String Pattern Matching In Java","body":"<p>That's just a matter of <a href=\"http://download.oracle.com/javase/7/docs/api/java/lang/String.html#contains%28java.lang.CharSequence%29\" rel=\"nofollow noreferrer\"><code>String.contains</code></a>:</p>\n<pre><code>if (input.contains(&quot;{item}&quot;))\n</code></pre>\n<p>If you need to know <em>where</em> it occurs, you can use <code>indexOf</code>:</p>\n<pre><code>int index = input.indexOf(&quot;{item}&quot;);\nif (index != -1) // -1 means &quot;not found&quot;\n{\n    ...\n}\n</code></pre>\n<p>That's fine for matching <em>exact</em> strings - if you need real <em>patterns</em> (e.g. &quot;three digits followed by at most 2 letters A-C&quot;) then you should look into <a href=\"http://download.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html\" rel=\"nofollow noreferrer\">regular expressions</a>.</p>\n<p>EDIT: Okay, it sounds like you <em>do</em> want regular expressions. You might want something like this:</p>\n<pre><code>private static final Pattern URL_PATTERN =\n    Pattern.compile(&quot;/\\\\{[a-zA-Z0-9]+\\\\}/&quot;);\n\n...\n\nif (URL_PATTERN.matcher(input).find())\n</code></pre>\n"},{"tags":[],"owner":{"account_id":913338,"reputation":4944,"user_id":946679,"accept_rate":100,"display_name":"zeller"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1319880593,"creation_date":1319880593,"answer_id":7938044,"question_id":7938033,"body_markdown":"You can do it using `string.indexOf(&quot;{item}&quot;)`. If the result is greater than -1 `{item}` is in the string","title":"String Pattern Matching In Java","body":"<p>You can do it using <code>string.indexOf(\"{item}\")</code>. If the result is greater than -1 <code>{item}</code> is in the string</p>\n"},{"tags":[],"owner":{"account_id":305188,"reputation":9584,"user_id":615182,"accept_rate":86,"display_name":"Narendra Yadala"},"down_vote_count":0,"up_vote_count":40,"is_accepted":true,"score":40,"last_activity_date":1319882347,"creation_date":1319882347,"answer_id":7938173,"question_id":7938033,"body_markdown":"You can use the `Pattern` class for this. If you want to match only word characters inside the `{}` then you can use the following regex. `\\w` is a shorthand for `[a-zA-Z0-9_]`. If you are ok with `_` then use `\\w` or else use `[a-zA-Z0-9]`.\r\n\r\n    String URL = &quot;https://localhost:8080/sbs/01.00/sip/dreamworks/v/01.00/cui/print/$fwVer/{$fwVer}/$lang/en/$model/{$model}/$region/us/$imageBg/{$imageBg}/$imageH/{$imageH}/$imageSz/{$imageSz}/$imageW/{$imageW}/movie/Kung_Fu_Panda_two/categories/3D_Pix/item/{item}/_back/2?$uniqueID={$uniqueID}&quot;;\r\n    Pattern pattern = Pattern.compile(&quot;/\\\\{\\\\w+\\\\}/&quot;);\r\n    Matcher matcher = pattern.matcher(URL);\r\n    if (matcher.find()) {\r\n    \tSystem.out.println(matcher.group(0)); //prints /{item}/\r\n    } else {\r\n    \tSystem.out.println(&quot;Match not found&quot;);\r\n    }\r\n\r\n","title":"String Pattern Matching In Java","body":"<p>You can use the <code>Pattern</code> class for this. If you want to match only word characters inside the <code>{}</code> then you can use the following regex. <code>\\w</code> is a shorthand for <code>[a-zA-Z0-9_]</code>. If you are ok with <code>_</code> then use <code>\\w</code> or else use <code>[a-zA-Z0-9]</code>.</p>\n\n<pre><code>String URL = \"https://localhost:8080/sbs/01.00/sip/dreamworks/v/01.00/cui/print/$fwVer/{$fwVer}/$lang/en/$model/{$model}/$region/us/$imageBg/{$imageBg}/$imageH/{$imageH}/$imageSz/{$imageSz}/$imageW/{$imageW}/movie/Kung_Fu_Panda_two/categories/3D_Pix/item/{item}/_back/2?$uniqueID={$uniqueID}\";\nPattern pattern = Pattern.compile(\"/\\\\{\\\\w+\\\\}/\");\nMatcher matcher = pattern.matcher(URL);\nif (matcher.find()) {\n    System.out.println(matcher.group(0)); //prints /{item}/\n} else {\n    System.out.println(\"Match not found\");\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1292950,"reputation":1261,"user_id":1244676,"display_name":"ChrisBlom"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1630698356,"creation_date":1330681233,"answer_id":9530986,"question_id":7938033,"body_markdown":"\r\nIf you want to check if some string is present in another string, use something like ` String.contains`\r\n\r\nIf you want to check if some &lt;i&gt;pattern&lt;/i&gt; is present in a string, append and prepend the pattern with &#39;.*&#39;. The result will accept strings that contain the pattern.\r\n\r\nExample: Suppose you have some regex &lt;i&gt;a(b|c)&lt;/i&gt; that checks if a string matches `ab` or `ac` &lt;br&gt;\r\n`.*(a(b|c)).*` will check if a string contains a `ab` or `ac`.\r\n\r\nA disadvantage of this method is that it will not give you the location of the match, you can use java.util.Mather.find() if you need the position of the match.","title":"String Pattern Matching In Java","body":"<p>If you want to check if some string is present in another string, use something like <code> String.contains</code></p>\n<p>If you want to check if some <i>pattern</i> is present in a string, append and prepend the pattern with '.*'. The result will accept strings that contain the pattern.</p>\n<p>Example: Suppose you have some regex <i>a(b|c)</i> that checks if a string matches <code>ab</code> or <code>ac</code> <br>\n<code>.*(a(b|c)).*</code> will check if a string contains a <code>ab</code> or <code>ac</code>.</p>\n<p>A disadvantage of this method is that it will not give you the location of the match, you can use java.util.Mather.find() if you need the position of the match.</p>\n"}],"owner":{"account_id":181043,"reputation":8252,"user_id":414773,"accept_rate":46,"display_name":"skmaran.nr.iras"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":200539,"favorite_count":0,"down_vote_count":0,"up_vote_count":21,"accepted_answer_id":7938173,"answer_count":4,"score":21,"last_activity_date":1643493474,"creation_date":1319880453,"question_id":7938033,"body_markdown":"I want to search for a given string pattern in an input sting.\r\n\r\nFor Eg.\r\n\r\n    String URL = &quot;https://localhost:8080/sbs/01.00/sip/dreamworks/v/01.00/cui/print/$fwVer/{$fwVer}/$lang/en/$model/{$model}/$region/us/$imageBg/{$imageBg}/$imageH/{$imageH}/$imageSz/{$imageSz}/$imageW/{$imageW}/movie/Kung_Fu_Panda_two/categories/3D_Pix/item/{item}/_back/2?$uniqueID={$uniqueID}&quot;\r\n\r\nNow I need to search whether the string URL contains &quot;`/{item}/`&quot;. Please help me.\r\n\r\nThis is an example. Actually I need is check whether the URL contains a string matching &quot;/{a-zA-Z0-9}/&quot;","title":"String Pattern Matching In Java","body":"<p>I want to search for a given string pattern in an input sting.</p>\n\n<p>For Eg.</p>\n\n<pre><code>String URL = \"https://localhost:8080/sbs/01.00/sip/dreamworks/v/01.00/cui/print/$fwVer/{$fwVer}/$lang/en/$model/{$model}/$region/us/$imageBg/{$imageBg}/$imageH/{$imageH}/$imageSz/{$imageSz}/$imageW/{$imageW}/movie/Kung_Fu_Panda_two/categories/3D_Pix/item/{item}/_back/2?$uniqueID={$uniqueID}\"\n</code></pre>\n\n<p>Now I need to search whether the string URL contains \"<code>/{item}/</code>\". Please help me.</p>\n\n<p>This is an example. Actually I need is check whether the URL contains a string matching \"/{a-zA-Z0-9}/\"</p>\n"},{"tags":["java","html","spring","thymeleaf"],"comments":[{"owner":{"account_id":19170174,"reputation":312,"user_id":14004073,"display_name":"Pavel Polyakoff"},"score":0,"creation_date":1643505687,"post_id":70910019,"comment_id":125358097,"body_markdown":"This might have something to do with caching, probably in browser... Have you tried force updating the page after loading image? Also not really a good idea to try and serve images straight from server&#39;s file system via straight link. I would load image as a file using java and then return it using Spring - that would make it easier to track a problem if it will keep happening. А ещё I hope that isn&#39;t your real email in the video, I wouldn&#39;t share it like that :)","body":"This might have something to do with caching, probably in browser... Have you tried force updating the page after loading image? Also not really a good idea to try and serve images straight from server&#39;s file system via straight link. I would load image as a file using java and then return it using Spring - that would make it easier to track a problem if it will keep happening. А ещё I hope that isn&#39;t your real email in the video, I wouldn&#39;t share it like that :)"},{"owner":{"account_id":24061733,"reputation":11,"user_id":18038880,"display_name":"Slizzika"},"score":0,"creation_date":1643506446,"post_id":70910019,"comment_id":125358181,"body_markdown":"@PavelPolyakoff, This is my email, but it&#39;s not used anywhere, so don&#39;t worry:)","body":"@PavelPolyakoff, This is my email, but it&#39;s not used anywhere, so don&#39;t worry:)"},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1644292970,"post_id":70910019,"comment_id":125561619,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."}],"owner":{"account_id":24061733,"reputation":11,"user_id":18038880,"display_name":"Slizzika"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1643493436,"creation_date":1643492828,"question_id":70910019,"body_markdown":"I&#39;m using Spring + Thymeleaf, I load an image, everything loads fine, everything renders fine in html, but the image itself doesn&#39;t appear, it ONLY appears after restarting the application.\r\nEven pages reboot doesn&#39;t help.\r\n\r\nMy html:\r\n\r\n      &lt;div class=&quot;container post-wrapper&quot;&gt;\r\n    \r\n        &lt;div class=&quot;post&quot; th:data-item=&quot;${image.getId()}&quot; th:each=&quot;image : ${images.getItems()}&quot;&gt;\r\n          &lt;img th:src=&quot;${image.getPathToSmallImage()}&quot; th:alt=&quot;${image.getNameGame()}&quot;\r\n               th:data-img=&quot;${image.getPathToBigImage()}&quot;&gt;\r\n          &lt;p th:text=&quot;${image.getNameGame()}&quot;&gt;&lt;/p&gt;\r\n          &lt;span class=&quot;like&quot; th:classappend=&quot;${image.isMeLiked()} ? liked : &#39;&#39; &quot; th:text=&quot;${image.getNumLikes()}&quot;&gt;&lt;/span&gt;\r\n    \r\n        &lt;/div&gt;\r\n      &lt;/div&gt;\r\n   \r\n\r\n\r\nYoutube video demonstrating the bug:\r\nhttps://www.youtube.com/watch?v=fgE5i8yJ5T8","title":"Why is the image displayed only after restarting the application?","body":"<p>I'm using Spring + Thymeleaf, I load an image, everything loads fine, everything renders fine in html, but the image itself doesn't appear, it ONLY appears after restarting the application.\nEven pages reboot doesn't help.</p>\n<p>My html:</p>\n<pre><code>  &lt;div class=&quot;container post-wrapper&quot;&gt;\n\n    &lt;div class=&quot;post&quot; th:data-item=&quot;${image.getId()}&quot; th:each=&quot;image : ${images.getItems()}&quot;&gt;\n      &lt;img th:src=&quot;${image.getPathToSmallImage()}&quot; th:alt=&quot;${image.getNameGame()}&quot;\n           th:data-img=&quot;${image.getPathToBigImage()}&quot;&gt;\n      &lt;p th:text=&quot;${image.getNameGame()}&quot;&gt;&lt;/p&gt;\n      &lt;span class=&quot;like&quot; th:classappend=&quot;${image.isMeLiked()} ? liked : '' &quot; th:text=&quot;${image.getNumLikes()}&quot;&gt;&lt;/span&gt;\n\n    &lt;/div&gt;\n  &lt;/div&gt;\n</code></pre>\n<p>Youtube video demonstrating the bug:\n<a href=\"https://www.youtube.com/watch?v=fgE5i8yJ5T8\" rel=\"nofollow noreferrer\">https://www.youtube.com/watch?v=fgE5i8yJ5T8</a></p>\n"},{"tags":["java","hibernate","jpa","persistence"],"answers":[{"tags":[],"owner":{"account_id":8627776,"reputation":593,"user_id":6460453,"display_name":"K.Nikita"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1643492117,"creation_date":1643457683,"answer_id":70905134,"question_id":70904474,"body_markdown":"&gt; Caused by: org.hibernate.HibernateException: Access to\r\n&gt; DialectResolutionInfo cannot be null when &#39;hibernate.dialect&#39; not set\r\n\r\nIt means that you need to set the property **hibernate.dialect**.\r\n\r\nYou need to set `org.hibernate.dialect.MySQL8Dialect`, because you have mysql-connector-java with version 8.0.28\r\n\r\n    &lt;property name=&quot;hibernate.dialect&quot;&gt;org.hibernate.dialect.MySQL8Dialect&lt;/property&gt;\r\n\r\n","title":"Java entity, driver manager is not initialized","body":"<blockquote>\n<p>Caused by: org.hibernate.HibernateException: Access to\nDialectResolutionInfo cannot be null when 'hibernate.dialect' not set</p>\n</blockquote>\n<p>It means that you need to set the property <strong>hibernate.dialect</strong>.</p>\n<p>You need to set <code>org.hibernate.dialect.MySQL8Dialect</code>, because you have mysql-connector-java with version 8.0.28</p>\n<pre><code>&lt;property name=&quot;hibernate.dialect&quot;&gt;org.hibernate.dialect.MySQL8Dialect&lt;/property&gt;\n</code></pre>\n"}],"owner":{"account_id":23986414,"reputation":71,"user_id":17973172,"display_name":"Michal Hodul"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1279,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1643492117,"creation_date":1643452741,"question_id":70904474,"body_markdown":"I can&#39;t resolve `Java entity, driver manager is not initialized` in 3 days and I&#39;m stuck. \r\n\r\nI would like to add (create) objects using the entity manager to a table in MySQL (an online database). I checked thousands of videos but I can&#39;t resolve it.\r\n\r\n\r\n\r\n**POM**\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    \r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n      xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n      &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    \r\n      &lt;groupId&gt;sk.hibernate&lt;/groupId&gt;\r\n      &lt;artifactId&gt;jpa&lt;/artifactId&gt;\r\n      &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n    \r\n      &lt;name&gt;jpa&lt;/name&gt;\r\n      &lt;!-- FIXME change it to the project&#39;s website --&gt;\r\n      &lt;url&gt;http://www.example.com&lt;/url&gt;\r\n    \r\n      &lt;properties&gt;\r\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n        &lt;maven.compiler.source&gt;1.7&lt;/maven.compiler.source&gt;\r\n        &lt;maven.compiler.target&gt;1.7&lt;/maven.compiler.target&gt;\r\n      &lt;/properties&gt;\r\n    \r\n      &lt;dependencies&gt;\r\n        &lt;!-- https://mvnrepository.com/artifact/org.hibernate/hibernate-core --&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n          &lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\r\n          &lt;version&gt;5.6.4.Final&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;!-- https://mvnrepository.com/artifact/mysql/mysql-connector-java --&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;mysql&lt;/groupId&gt;\r\n          &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\r\n          &lt;version&gt;8.0.28&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;!-- https://mvnrepository.com/artifact/javax.persistence/javax.persistence-api --&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;javax.persistence&lt;/groupId&gt;\r\n          &lt;artifactId&gt;javax.persistence-api&lt;/artifactId&gt;\r\n          &lt;version&gt;2.2&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    \r\n    \r\n    \r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;junit&lt;/groupId&gt;\r\n          &lt;artifactId&gt;junit&lt;/artifactId&gt;\r\n          &lt;version&gt;4.13.2&lt;/version&gt;\r\n          &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n      &lt;/dependencies&gt;\r\n    \r\n    \r\n      &lt;build&gt;\r\n    \r\n    \r\n        &lt;pluginManagement&gt;&lt;!-- lock down plugins versions to avoid using Maven defaults (may be moved to parent pom) --&gt;\r\n          &lt;plugins&gt;\r\n            &lt;!-- clean lifecycle, see https://maven.apache.org/ref/current/maven-core/lifecycles.html#clean_Lifecycle --&gt;\r\n            &lt;plugin&gt;\r\n              &lt;artifactId&gt;maven-clean-plugin&lt;/artifactId&gt;\r\n              &lt;version&gt;3.1.0&lt;/version&gt;\r\n            &lt;/plugin&gt;\r\n            &lt;!-- default lifecycle, jar packaging: see https://maven.apache.org/ref/current/maven-core/default-bindings.html#Plugin_bindings_for_jar_packaging --&gt;\r\n            &lt;plugin&gt;\r\n              &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;\r\n              &lt;version&gt;3.0.2&lt;/version&gt;\r\n            &lt;/plugin&gt;\r\n            &lt;plugin&gt;\r\n              &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n              &lt;version&gt;3.8.0&lt;/version&gt;\r\n            &lt;/plugin&gt;\r\n            &lt;plugin&gt;\r\n              &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n              &lt;version&gt;2.22.1&lt;/version&gt;\r\n            &lt;/plugin&gt;\r\n            &lt;plugin&gt;\r\n              &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\r\n              &lt;version&gt;3.0.2&lt;/version&gt;\r\n            &lt;/plugin&gt;\r\n            &lt;plugin&gt;\r\n              &lt;artifactId&gt;maven-install-plugin&lt;/artifactId&gt;\r\n              &lt;version&gt;2.5.2&lt;/version&gt;\r\n            &lt;/plugin&gt;\r\n            &lt;plugin&gt;\r\n              &lt;artifactId&gt;maven-deploy-plugin&lt;/artifactId&gt;\r\n              &lt;version&gt;2.8.2&lt;/version&gt;\r\n            &lt;/plugin&gt;\r\n            &lt;!-- site lifecycle, see https://maven.apache.org/ref/current/maven-core/lifecycles.html#site_Lifecycle --&gt;\r\n            &lt;plugin&gt;\r\n              &lt;artifactId&gt;maven-site-plugin&lt;/artifactId&gt;\r\n              &lt;version&gt;3.7.1&lt;/version&gt;\r\n            &lt;/plugin&gt;\r\n            &lt;plugin&gt;\r\n              &lt;artifactId&gt;maven-project-info-reports-plugin&lt;/artifactId&gt;\r\n              &lt;version&gt;3.0.0&lt;/version&gt;\r\n            &lt;/plugin&gt;\r\n          &lt;/plugins&gt;\r\n        &lt;/pluginManagement&gt;\r\n      &lt;/build&gt;\r\n    &lt;/project&gt;\r\n\r\n**peristence.xml**\r\n\r\n    &lt;persistence xmlns=&quot;http://xmlns.jcp.org/xml/ns/persistence&quot;\r\n                 xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; version=&quot;2.2&quot;\r\n                 xsi:schemaLocation=&quot;http://xmlns.jcp.org/xml/ns/persistence http://xmlns.jcp.org/xml/ns/persistence/persistence_2_2.xsd&quot;&gt;\r\n    \r\n        &lt;persistence-unit name=&quot;sk.jpa&quot; transaction-type=&quot;RESOURCE_LOCAL&quot;&gt;\r\n            &lt;class&gt;sk.hibernate.model.Message&lt;/class&gt;\r\n    \r\n    \r\n            &lt;exclude-unlisted-classes&gt;true&lt;/exclude-unlisted-classes&gt;\r\n    \r\n            &lt;properties&gt;\r\n    \r\n    \r\n                &lt;property name=&quot;javax.persistence.jdbc.driver&quot; value=&quot;com.mysql.cj.jdbc.Driver&quot;/&gt;\r\n    \r\n                &lt;property name=&quot;javax.persistence.jdbc.url&quot; value=&quot;jdbc:mysql://ujfnz0sxud23qruy:lqoN4PMPxWAAUjNEKuv8@bkt9ucjj52rre9ut1cix-mysql.services.clever-cloud.com:3306/bkt9ucjj52rre9ut1cix&quot;/&gt;\r\n    \r\n                &lt;property name=&quot;javax.persistence.jdbc.user&quot; value=&quot;ujf**xud23qruy&quot;/&gt;\r\n    \r\n                &lt;property name=&quot;javax.persistence.jdbc.password&quot; value=&quot;YW**PR0569D&quot;/&gt;\r\n                &lt;!--&lt;property name = &quot;hibernate.hbm2ddl.auto&quot; value = &quot;update&quot; /&gt;--&gt;\r\n            &lt;/properties&gt;\r\n        &lt;/persistence-unit&gt;\r\n    &lt;/persistence&gt;\r\n\r\n**APP class**\r\n\r\n    package sk.hibernate;\r\n    \r\n    import sk.hibernate.model.Message;\r\n    \r\n    import javax.persistence.EntityManager;\r\n    import javax.persistence.EntityManagerFactory;\r\n    import javax.persistence.Persistence;\r\n    \r\n    public class App {\r\n        public static void main( String[] args ) {\r\n        \r\n            EntityManagerFactory entityManagerFactory =                     \r\n                Persistence\r\n                    .createEntityManagerFactory(&quot;sk.jpa&quot;);\r\n    \r\n            EntityManager entityManager = \r\n                entityManagerFactory.createEntityManager();\r\n    \r\n            entityManager.getTransaction().begin();\r\n            entityManager.persist(new Message(&quot;First message&quot;));\r\n            entityManager.persist(new Message(&quot;Second message&quot;));\r\n            entityManager.getTransaction().commit();\r\n    \r\n            entityManager.close();    \r\n        }\r\n    }\r\n\r\n**Message**\r\n\r\n    package sk.hibernate.model;\r\n    \r\n    import javax.persistence.*;\r\n    import java.util.Date;\r\n    \r\n    @Entity\r\n    @Table(name = &quot;MOVIE&quot;)\r\n    public class Message {\r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.IDENTITY )\r\n       // @Column(name = &quot;ID&quot;)\r\n        private Long id;\r\n       // @Column(name = &quot;MESSAGE&quot;)\r\n    \r\n        private String message;\r\n    \r\n        private Date CREATE_DATE;\r\n    \r\n        public Message() {\r\n        }\r\n    \r\n        public Message(String message) {\r\n            this.message = message;\r\n        }\r\n    \r\n        public Long getId() {\r\n            return id;\r\n        }\r\n    \r\n        public void setId(Long id) {\r\n            this.id = id;\r\n        }\r\n    \r\n        public String getMessage() {\r\n            return message;\r\n        }\r\n    \r\n        public void setMessage(String message) {\r\n            this.message = message;\r\n        }\r\n    \r\n        public Date getCREATE_DATE() {\r\n            return CREATE_DATE;\r\n        }\r\n    \r\n        public void setCREATE_DATE(Date CREATE_DATE) {\r\n            this.CREATE_DATE = CREATE_DATE;\r\n        }\r\n    }\r\n\r\n\r\nwhen i install mysql connector j was inside,trying to add in Java model structure-&gt; dependecny and paste there and still not working.\r\n**Problem**\r\n\r\n    &quot;C:\\Users\\Patrik Sever&#237;n\\.jdks\\openjdk-17.0.1\\bin\\java.exe&quot; &quot;-javaagent:C:\\Program Files\\JetBrains\\IntelliJ IDEA Educational Edition 2021.2.3\\lib\\idea_rt.jar=52596:C:\\Program Files\\JetBrains\\IntelliJ IDEA Educational Edition 2021.2.3\\bin&quot; -Dfile.encoding=UTF-8 -classpath &quot;C:\\Users\\Patrik Sever&#237;n\\IdeaProjects\\untitled\\jpa\\target\\classes;C:\\Users\\Patrik Sever&#237;n\\.m2\\repository\\org\\hibernate\\hibernate-core\\5.6.4.Final\\hibernate-core-5.6.4.Final.jar;C:\\Users\\Patrik Sever&#237;n\\.m2\\repository\\org\\jboss\\logging\\jboss-logging\\3.4.3.Final\\jboss-logging-3.4.3.Final.jar;C:\\Users\\Patrik Sever&#237;n\\.m2\\repository\\net\\bytebuddy\\byte-buddy\\1.12.7\\byte-buddy-1.12.7.jar;C:\\Users\\Patrik Sever&#237;n\\.m2\\repository\\antlr\\antlr\\2.7.7\\antlr-2.7.7.jar;C:\\Users\\Patrik Sever&#237;n\\.m2\\repository\\org\\jboss\\spec\\javax\\transaction\\jboss-transaction-api_1.2_spec\\1.1.1.Final\\jboss-transaction-api_1.2_spec-1.1.1.Final.jar;C:\\Users\\Patrik Sever&#237;n\\.m2\\repository\\org\\jboss\\jandex\\2.4.2.Final\\jandex-2.4.2.Final.jar;C:\\Users\\Patrik Sever&#237;n\\.m2\\repository\\com\\fasterxml\\classmate\\1.5.1\\classmate-1.5.1.jar;C:\\Users\\Patrik Sever&#237;n\\.m2\\repository\\javax\\activation\\javax.activation-api\\1.2.0\\javax.activation-api-1.2.0.jar;C:\\Users\\Patrik Sever&#237;n\\.m2\\repository\\org\\hibernate\\common\\hibernate-commons-annotations\\5.1.2.Final\\hibernate-commons-annotations-5.1.2.Final.jar;C:\\Users\\Patrik Sever&#237;n\\.m2\\repository\\javax\\xml\\bind\\jaxb-api\\2.3.1\\jaxb-api-2.3.1.jar;C:\\Users\\Patrik Sever&#237;n\\.m2\\repository\\org\\glassfish\\jaxb\\jaxb-runtime\\2.3.1\\jaxb-runtime-2.3.1.jar;C:\\Users\\Patrik Sever&#237;n\\.m2\\repository\\org\\glassfish\\jaxb\\txw2\\2.3.1\\txw2-2.3.1.jar;C:\\Users\\Patrik Sever&#237;n\\.m2\\repository\\com\\sun\\istack\\istack-commons-runtime\\3.0.7\\istack-commons-runtime-3.0.7.jar;C:\\Users\\Patrik Sever&#237;n\\.m2\\repository\\org\\jvnet\\staxex\\stax-ex\\1.8\\stax-ex-1.8.jar;C:\\Users\\Patrik Sever&#237;n\\.m2\\repository\\com\\sun\\xml\\fastinfoset\\FastInfoset\\1.2.15\\FastInfoset-1.2.15.jar;C:\\Users\\Patrik Sever&#237;n\\.m2\\repository\\mysql\\mysql-connector-java\\8.0.28\\mysql-connector-java-8.0.28.jar;C:\\Users\\Patrik Sever&#237;n\\.m2\\repository\\com\\google\\protobuf\\protobuf-java\\3.11.4\\protobuf-java-3.11.4.jar;C:\\Users\\Patrik Sever&#237;n\\.m2\\repository\\javax\\persistence\\javax.persistence-api\\2.2\\javax.persistence-api-2.2.jar;C:\\Users\\Patrik Sever&#237;n\\mysql-connector-java-8.0.28.jar&quot; sk.hibernate.App\r\n    jan 29, 2022 11:27:19 AM org.hibernate.jpa.internal.util.LogHelper logPersistenceUnitInformation\r\n    INFO: HHH000204: Processing PersistenceUnitInfo [name: sk.jpa]\r\n    jan 29, 2022 11:27:19 AM org.hibernate.Version logVersion\r\n    INFO: HHH000412: Hibernate ORM core version 5.6.4.Final\r\n    jan 29, 2022 11:27:19 AM org.hibernate.annotations.common.reflection.java.JavaReflectionManager &lt;clinit&gt;\r\n    INFO: HCANN000001: Hibernate Commons Annotations {5.1.2.Final}\r\n    jan 29, 2022 11:27:19 AM org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl configure\r\n    WARN: HHH10001002: Using Hibernate built-in connection pool (not for production use!)\r\n    jan 29, 2022 11:27:19 AM org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl buildCreator\r\n    INFO: HHH10001005: using driver [com.mysql.cj.jdbc.Driver] at URL [jdbc:mysql://ujfn**ud23qruy:l***AAUjNEKuv8@bkt9ucjj52rre9ut1cix-mysql.services.clever-cloud.com:3306/bkt9ucjj52rre9ut1cix]\r\n    jan 29, 2022 11:27:19 AM org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl buildCreator\r\n    INFO: HHH10001001: Connection properties: {password=****, user=ujfnz0sxud23qruy}\r\n    jan 29, 2022 11:27:19 AM org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl buildCreator\r\n    INFO: HHH10001003: Autocommit mode: false\r\n    jan 29, 2022 11:27:19 AM org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl$PooledConnections &lt;init&gt;\r\n    INFO: HHH000115: Hibernate connection pool size: 20 (min=1)\r\n    jan 29, 2022 11:27:20 AM org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator initiateService\r\n    WARN: HHH000342: Could not obtain connection to query metadata\r\n    java.lang.IllegalStateException: Cannot get a connection as the driver manager is not properly initialized\r\n    \tat org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl.getConnection(DriverManagerConnectionProviderImpl.java:172)\r\n    \tat org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$ConnectionProviderJdbcConnectionAccess.obtainConnection(JdbcEnvironmentInitiator.java:181)\r\n    \tat org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.initiateService(JdbcEnvironmentInitiator.java:68)\r\n    \tat org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.initiateService(JdbcEnvironmentInitiator.java:35)\r\n    \tat org.hibernate.boot.registry.internal.StandardServiceRegistryImpl.initiateService(StandardServiceRegistryImpl.java:101)\r\n    \tat org.hibernate.service.internal.AbstractServiceRegistryImpl.createService(AbstractServiceRegistryImpl.java:263)\r\n    \tat org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:237)\r\n    \tat org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:214)\r\n    \tat org.hibernate.engine.jdbc.internal.JdbcServicesImpl.configure(JdbcServicesImpl.java:51)\r\n    \tat org.hibernate.boot.registry.internal.StandardServiceRegistryImpl.configureService(StandardServiceRegistryImpl.java:107)\r\n    \tat org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:246)\r\n    \tat org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:214)\r\n    \tat org.hibernate.engine.jdbc.connections.internal.BasicConnectionCreator.convertSqlException(BasicConnectionCreator.java:116)\r\n    \tat org.hibernate.engine.jdbc.connections.internal.DriverConnectionCreator.makeConnection(DriverConnectionCreator.java:41)\r\n    \tat org.hibernate.engine.jdbc.connections.internal.BasicConnectionCreator.createConnection(BasicConnectionCreator.java:58)\r\n    \tat org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl$PooledConnections.addConnections(DriverManagerConnectionProviderImpl.java:409)\r\n    \tat org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl$PooledConnections.&lt;init&gt;(DriverManagerConnectionProviderImpl.java:275)\r\n    \tat org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl$PooledConnections.&lt;init&gt;(DriverManagerConnectionProviderImpl.java:249)\r\n    \tat org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl$PooledConnections$Builder.build(DriverManagerConnectionProviderImpl.java:453)\r\n    \tat org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl.buildPool(DriverManagerConnectionProviderImpl.java:98)\r\n    \tat org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl.configure(DriverManagerConnectionProviderImpl.java:73)\r\n    \tat org.hibernate.boot.registry.internal.StandardServiceRegistryImpl.configureService(StandardServiceRegistryImpl.java:107)\r\n    \tat org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:246)\r\n    \tat org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:214)\r\n    \tat org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.buildJdbcConnectionAccess(JdbcEnvironmentInitiator.java:146)\r\n    \tat org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.initiateService(JdbcEnvironmentInitiator.java:66)\r\n    \tat org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.initiateService(JdbcEnvironmentInitiator.java:35)\r\n    \tat org.hibernate.boot.registry.internal.StandardServiceRegistryImpl.initiateService(StandardServiceRegistryImpl.java:101)\r\n    \tat org.hibernate.service.internal.AbstractServiceRegistryImpl.createService(AbstractServiceRegistryImpl.java:263)\r\n    \tat org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:237)\r\n    \tat org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:214)\r\n    \tat org.hibernate.id.factory.internal.DefaultIdentifierGeneratorFactory.injectServices(DefaultIdentifierGeneratorFactory.java:175)\r\n    \tat org.hibernate.service.internal.AbstractServiceRegistryImpl.injectDependencies(AbstractServiceRegistryImpl.java:286)\r\n    \tat org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:243)\r\n    \tat org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:214)\r\n    \tat org.hibernate.boot.internal.InFlightMetadataCollectorImpl.&lt;init&gt;(InFlightMetadataCollectorImpl.java:173)\r\n    \tat org.hibernate.boot.model.process.spi.MetadataBuildingProcess.complete(MetadataBuildingProcess.java:127)\r\n    \tat org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.metadata(EntityManagerFactoryBuilderImpl.java:1460)\r\n    \tat org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1494)\r\n    \tat org.hibernate.jpa.HibernatePersistenceProvider.createEntityManagerFactory(HibernatePersistenceProvider.java:56)\r\n    \tat javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:79)\r\n    \tat javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:54)\r\n    \tat sk.hibernate.App.main(App.java:15)\r\n    \r\n    Exception in thread &quot;main&quot; org.hibernate.service.spi.ServiceException: Unable to create requested service [org.hibernate.engine.jdbc.env.spi.JdbcEnvironment]\r\n    \tat org.hibernate.service.internal.AbstractServiceRegistryImpl.createService(AbstractServiceRegistryImpl.java:275)\r\n    \tat org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:237)\r\n    \tat org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:214)\r\n    \tat org.hibernate.engine.jdbc.internal.JdbcServicesImpl.configure(JdbcServicesImpl.java:51)\r\n    \tat org.hibernate.boot.registry.internal.StandardServiceRegistryImpl.configureService(StandardServiceRegistryImpl.java:107)\r\n    \tat org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:246)\r\n    \tat org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:214)\r\n    \tat org.hibernate.engine.jdbc.connections.internal.BasicConnectionCreator.convertSqlException(BasicConnectionCreator.java:116)\r\n    \tat org.hibernate.engine.jdbc.connections.internal.DriverConnectionCreator.makeConnection(DriverConnectionCreator.java:41)\r\n    \tat org.hibernate.engine.jdbc.connections.internal.BasicConnectionCreator.createConnection(BasicConnectionCreator.java:58)\r\n    \tat org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl$PooledConnections.addConnections(DriverManagerConnectionProviderImpl.java:409)\r\n    \tat org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl$PooledConnections.&lt;init&gt;(DriverManagerConnectionProviderImpl.java:275)\r\n    \tat org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl$PooledConnections.&lt;init&gt;(DriverManagerConnectionProviderImpl.java:249)\r\n    \tat org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl$PooledConnections$Builder.build(DriverManagerConnectionProviderImpl.java:453)\r\n    \tat org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl.buildPool(DriverManagerConnectionProviderImpl.java:98)\r\n    \tat org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl.configure(DriverManagerConnectionProviderImpl.java:73)\r\n    \tat org.hibernate.boot.registry.internal.StandardServiceRegistryImpl.configureService(StandardServiceRegistryImpl.java:107)\r\n    \tat org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:246)\r\n    \tat org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:214)\r\n    \tat org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.buildJdbcConnectionAccess(JdbcEnvironmentInitiator.java:146)\r\n    \tat org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.initiateService(JdbcEnvironmentInitiator.java:66)\r\n    \tat org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.initiateService(JdbcEnvironmentInitiator.java:35)\r\n    \tat org.hibernate.boot.registry.internal.StandardServiceRegistryImpl.initiateService(StandardServiceRegistryImpl.java:101)\r\n    \tat org.hibernate.service.internal.AbstractServiceRegistryImpl.createService(AbstractServiceRegistryImpl.java:263)\r\n    \tat org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:237)\r\n    \tat org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:214)\r\n    \tat org.hibernate.id.factory.internal.DefaultIdentifierGeneratorFactory.injectServices(DefaultIdentifierGeneratorFactory.java:175)\r\n    \tat org.hibernate.service.internal.AbstractServiceRegistryImpl.injectDependencies(AbstractServiceRegistryImpl.java:286)\r\n    \tat org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:243)\r\n    \tat org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:214)\r\n    \tat org.hibernate.boot.internal.InFlightMetadataCollectorImpl.&lt;init&gt;(InFlightMetadataCollectorImpl.java:173)\r\n    \tat org.hibernate.boot.model.process.spi.MetadataBuildingProcess.complete(MetadataBuildingProcess.java:127)\r\n    \tat org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.metadata(EntityManagerFactoryBuilderImpl.java:1460)\r\n    \tat org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1494)\r\n    \tat org.hibernate.jpa.HibernatePersistenceProvider.createEntityManagerFactory(HibernatePersistenceProvider.java:56)\r\n    \tat javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:79)\r\n    \tat javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:54)\r\n    \tat sk.hibernate.App.main(App.java:15)\r\n    Caused by: org.hibernate.HibernateException: Access to DialectResolutionInfo cannot be null when &#39;hibernate.dialect&#39; not set\r\n    \tat org.hibernate.engine.jdbc.dialect.internal.DialectFactoryImpl.determineDialect(DialectFactoryImpl.java:100)\r\n    \tat org.hibernate.engine.jdbc.dialect.internal.DialectFactoryImpl.buildDialect(DialectFactoryImpl.java:54)\r\n    \tat org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.initiateService(JdbcEnvironmentInitiator.java:138)\r\n    \tat org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.initiateService(JdbcEnvironmentInitiator.java:35)\r\n    \tat org.hibernate.boot.registry.internal.StandardServiceRegistryImpl.initiateService(StandardServiceRegistryImpl.java:101)\r\n    \tat org.hibernate.service.internal.AbstractServiceRegistryImpl.createService(AbstractServiceRegistryImpl.java:263)\r\n    \t... 37 more\r\n    \r\n    Process finished with exit code 1\r\n\r\n\r\n","title":"Java entity, driver manager is not initialized","body":"<p>I can't resolve <code>Java entity, driver manager is not initialized</code> in 3 days and I'm stuck.</p>\n<p>I would like to add (create) objects using the entity manager to a table in MySQL (an online database). I checked thousands of videos but I can't resolve it.</p>\n<p><strong>POM</strong></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n  xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n  &lt;groupId&gt;sk.hibernate&lt;/groupId&gt;\n  &lt;artifactId&gt;jpa&lt;/artifactId&gt;\n  &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n\n  &lt;name&gt;jpa&lt;/name&gt;\n  &lt;!-- FIXME change it to the project's website --&gt;\n  &lt;url&gt;http://www.example.com&lt;/url&gt;\n\n  &lt;properties&gt;\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n    &lt;maven.compiler.source&gt;1.7&lt;/maven.compiler.source&gt;\n    &lt;maven.compiler.target&gt;1.7&lt;/maven.compiler.target&gt;\n  &lt;/properties&gt;\n\n  &lt;dependencies&gt;\n    &lt;!-- https://mvnrepository.com/artifact/org.hibernate/hibernate-core --&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n      &lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\n      &lt;version&gt;5.6.4.Final&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;!-- https://mvnrepository.com/artifact/mysql/mysql-connector-java --&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;mysql&lt;/groupId&gt;\n      &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\n      &lt;version&gt;8.0.28&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;!-- https://mvnrepository.com/artifact/javax.persistence/javax.persistence-api --&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;javax.persistence&lt;/groupId&gt;\n      &lt;artifactId&gt;javax.persistence-api&lt;/artifactId&gt;\n      &lt;version&gt;2.2&lt;/version&gt;\n    &lt;/dependency&gt;\n\n\n\n    &lt;dependency&gt;\n      &lt;groupId&gt;junit&lt;/groupId&gt;\n      &lt;artifactId&gt;junit&lt;/artifactId&gt;\n      &lt;version&gt;4.13.2&lt;/version&gt;\n      &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n  &lt;/dependencies&gt;\n\n\n  &lt;build&gt;\n\n\n    &lt;pluginManagement&gt;&lt;!-- lock down plugins versions to avoid using Maven defaults (may be moved to parent pom) --&gt;\n      &lt;plugins&gt;\n        &lt;!-- clean lifecycle, see https://maven.apache.org/ref/current/maven-core/lifecycles.html#clean_Lifecycle --&gt;\n        &lt;plugin&gt;\n          &lt;artifactId&gt;maven-clean-plugin&lt;/artifactId&gt;\n          &lt;version&gt;3.1.0&lt;/version&gt;\n        &lt;/plugin&gt;\n        &lt;!-- default lifecycle, jar packaging: see https://maven.apache.org/ref/current/maven-core/default-bindings.html#Plugin_bindings_for_jar_packaging --&gt;\n        &lt;plugin&gt;\n          &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;\n          &lt;version&gt;3.0.2&lt;/version&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n          &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n          &lt;version&gt;3.8.0&lt;/version&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n          &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n          &lt;version&gt;2.22.1&lt;/version&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n          &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\n          &lt;version&gt;3.0.2&lt;/version&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n          &lt;artifactId&gt;maven-install-plugin&lt;/artifactId&gt;\n          &lt;version&gt;2.5.2&lt;/version&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n          &lt;artifactId&gt;maven-deploy-plugin&lt;/artifactId&gt;\n          &lt;version&gt;2.8.2&lt;/version&gt;\n        &lt;/plugin&gt;\n        &lt;!-- site lifecycle, see https://maven.apache.org/ref/current/maven-core/lifecycles.html#site_Lifecycle --&gt;\n        &lt;plugin&gt;\n          &lt;artifactId&gt;maven-site-plugin&lt;/artifactId&gt;\n          &lt;version&gt;3.7.1&lt;/version&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n          &lt;artifactId&gt;maven-project-info-reports-plugin&lt;/artifactId&gt;\n          &lt;version&gt;3.0.0&lt;/version&gt;\n        &lt;/plugin&gt;\n      &lt;/plugins&gt;\n    &lt;/pluginManagement&gt;\n  &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n<p><strong>peristence.xml</strong></p>\n<pre><code>&lt;persistence xmlns=&quot;http://xmlns.jcp.org/xml/ns/persistence&quot;\n             xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; version=&quot;2.2&quot;\n             xsi:schemaLocation=&quot;http://xmlns.jcp.org/xml/ns/persistence http://xmlns.jcp.org/xml/ns/persistence/persistence_2_2.xsd&quot;&gt;\n\n    &lt;persistence-unit name=&quot;sk.jpa&quot; transaction-type=&quot;RESOURCE_LOCAL&quot;&gt;\n        &lt;class&gt;sk.hibernate.model.Message&lt;/class&gt;\n\n\n        &lt;exclude-unlisted-classes&gt;true&lt;/exclude-unlisted-classes&gt;\n\n        &lt;properties&gt;\n\n\n            &lt;property name=&quot;javax.persistence.jdbc.driver&quot; value=&quot;com.mysql.cj.jdbc.Driver&quot;/&gt;\n\n            &lt;property name=&quot;javax.persistence.jdbc.url&quot; value=&quot;jdbc:mysql://ujfnz0sxud23qruy:lqoN4PMPxWAAUjNEKuv8@bkt9ucjj52rre9ut1cix-mysql.services.clever-cloud.com:3306/bkt9ucjj52rre9ut1cix&quot;/&gt;\n\n            &lt;property name=&quot;javax.persistence.jdbc.user&quot; value=&quot;ujf**xud23qruy&quot;/&gt;\n\n            &lt;property name=&quot;javax.persistence.jdbc.password&quot; value=&quot;YW**PR0569D&quot;/&gt;\n            &lt;!--&lt;property name = &quot;hibernate.hbm2ddl.auto&quot; value = &quot;update&quot; /&gt;--&gt;\n        &lt;/properties&gt;\n    &lt;/persistence-unit&gt;\n&lt;/persistence&gt;\n</code></pre>\n<p><strong>APP class</strong></p>\n<pre><code>package sk.hibernate;\n\nimport sk.hibernate.model.Message;\n\nimport javax.persistence.EntityManager;\nimport javax.persistence.EntityManagerFactory;\nimport javax.persistence.Persistence;\n\npublic class App {\n    public static void main( String[] args ) {\n    \n        EntityManagerFactory entityManagerFactory =                     \n            Persistence\n                .createEntityManagerFactory(&quot;sk.jpa&quot;);\n\n        EntityManager entityManager = \n            entityManagerFactory.createEntityManager();\n\n        entityManager.getTransaction().begin();\n        entityManager.persist(new Message(&quot;First message&quot;));\n        entityManager.persist(new Message(&quot;Second message&quot;));\n        entityManager.getTransaction().commit();\n\n        entityManager.close();    \n    }\n}\n</code></pre>\n<p><strong>Message</strong></p>\n<pre><code>package sk.hibernate.model;\n\nimport javax.persistence.*;\nimport java.util.Date;\n\n@Entity\n@Table(name = &quot;MOVIE&quot;)\npublic class Message {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY )\n   // @Column(name = &quot;ID&quot;)\n    private Long id;\n   // @Column(name = &quot;MESSAGE&quot;)\n\n    private String message;\n\n    private Date CREATE_DATE;\n\n    public Message() {\n    }\n\n    public Message(String message) {\n        this.message = message;\n    }\n\n    public Long getId() {\n        return id;\n    }\n\n    public void setId(Long id) {\n        this.id = id;\n    }\n\n    public String getMessage() {\n        return message;\n    }\n\n    public void setMessage(String message) {\n        this.message = message;\n    }\n\n    public Date getCREATE_DATE() {\n        return CREATE_DATE;\n    }\n\n    public void setCREATE_DATE(Date CREATE_DATE) {\n        this.CREATE_DATE = CREATE_DATE;\n    }\n}\n</code></pre>\n<p>when i install mysql connector j was inside,trying to add in Java model structure-&gt; dependecny and paste there and still not working.\n<strong>Problem</strong></p>\n<pre><code>&quot;C:\\Users\\Patrik Severín\\.jdks\\openjdk-17.0.1\\bin\\java.exe&quot; &quot;-javaagent:C:\\Program Files\\JetBrains\\IntelliJ IDEA Educational Edition 2021.2.3\\lib\\idea_rt.jar=52596:C:\\Program Files\\JetBrains\\IntelliJ IDEA Educational Edition 2021.2.3\\bin&quot; -Dfile.encoding=UTF-8 -classpath &quot;C:\\Users\\Patrik Severín\\IdeaProjects\\untitled\\jpa\\target\\classes;C:\\Users\\Patrik Severín\\.m2\\repository\\org\\hibernate\\hibernate-core\\5.6.4.Final\\hibernate-core-5.6.4.Final.jar;C:\\Users\\Patrik Severín\\.m2\\repository\\org\\jboss\\logging\\jboss-logging\\3.4.3.Final\\jboss-logging-3.4.3.Final.jar;C:\\Users\\Patrik Severín\\.m2\\repository\\net\\bytebuddy\\byte-buddy\\1.12.7\\byte-buddy-1.12.7.jar;C:\\Users\\Patrik Severín\\.m2\\repository\\antlr\\antlr\\2.7.7\\antlr-2.7.7.jar;C:\\Users\\Patrik Severín\\.m2\\repository\\org\\jboss\\spec\\javax\\transaction\\jboss-transaction-api_1.2_spec\\1.1.1.Final\\jboss-transaction-api_1.2_spec-1.1.1.Final.jar;C:\\Users\\Patrik Severín\\.m2\\repository\\org\\jboss\\jandex\\2.4.2.Final\\jandex-2.4.2.Final.jar;C:\\Users\\Patrik Severín\\.m2\\repository\\com\\fasterxml\\classmate\\1.5.1\\classmate-1.5.1.jar;C:\\Users\\Patrik Severín\\.m2\\repository\\javax\\activation\\javax.activation-api\\1.2.0\\javax.activation-api-1.2.0.jar;C:\\Users\\Patrik Severín\\.m2\\repository\\org\\hibernate\\common\\hibernate-commons-annotations\\5.1.2.Final\\hibernate-commons-annotations-5.1.2.Final.jar;C:\\Users\\Patrik Severín\\.m2\\repository\\javax\\xml\\bind\\jaxb-api\\2.3.1\\jaxb-api-2.3.1.jar;C:\\Users\\Patrik Severín\\.m2\\repository\\org\\glassfish\\jaxb\\jaxb-runtime\\2.3.1\\jaxb-runtime-2.3.1.jar;C:\\Users\\Patrik Severín\\.m2\\repository\\org\\glassfish\\jaxb\\txw2\\2.3.1\\txw2-2.3.1.jar;C:\\Users\\Patrik Severín\\.m2\\repository\\com\\sun\\istack\\istack-commons-runtime\\3.0.7\\istack-commons-runtime-3.0.7.jar;C:\\Users\\Patrik Severín\\.m2\\repository\\org\\jvnet\\staxex\\stax-ex\\1.8\\stax-ex-1.8.jar;C:\\Users\\Patrik Severín\\.m2\\repository\\com\\sun\\xml\\fastinfoset\\FastInfoset\\1.2.15\\FastInfoset-1.2.15.jar;C:\\Users\\Patrik Severín\\.m2\\repository\\mysql\\mysql-connector-java\\8.0.28\\mysql-connector-java-8.0.28.jar;C:\\Users\\Patrik Severín\\.m2\\repository\\com\\google\\protobuf\\protobuf-java\\3.11.4\\protobuf-java-3.11.4.jar;C:\\Users\\Patrik Severín\\.m2\\repository\\javax\\persistence\\javax.persistence-api\\2.2\\javax.persistence-api-2.2.jar;C:\\Users\\Patrik Severín\\mysql-connector-java-8.0.28.jar&quot; sk.hibernate.App\njan 29, 2022 11:27:19 AM org.hibernate.jpa.internal.util.LogHelper logPersistenceUnitInformation\nINFO: HHH000204: Processing PersistenceUnitInfo [name: sk.jpa]\njan 29, 2022 11:27:19 AM org.hibernate.Version logVersion\nINFO: HHH000412: Hibernate ORM core version 5.6.4.Final\njan 29, 2022 11:27:19 AM org.hibernate.annotations.common.reflection.java.JavaReflectionManager &lt;clinit&gt;\nINFO: HCANN000001: Hibernate Commons Annotations {5.1.2.Final}\njan 29, 2022 11:27:19 AM org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl configure\nWARN: HHH10001002: Using Hibernate built-in connection pool (not for production use!)\njan 29, 2022 11:27:19 AM org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl buildCreator\nINFO: HHH10001005: using driver [com.mysql.cj.jdbc.Driver] at URL [jdbc:mysql://ujfn**ud23qruy:l***AAUjNEKuv8@bkt9ucjj52rre9ut1cix-mysql.services.clever-cloud.com:3306/bkt9ucjj52rre9ut1cix]\njan 29, 2022 11:27:19 AM org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl buildCreator\nINFO: HHH10001001: Connection properties: {password=****, user=ujfnz0sxud23qruy}\njan 29, 2022 11:27:19 AM org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl buildCreator\nINFO: HHH10001003: Autocommit mode: false\njan 29, 2022 11:27:19 AM org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl$PooledConnections &lt;init&gt;\nINFO: HHH000115: Hibernate connection pool size: 20 (min=1)\njan 29, 2022 11:27:20 AM org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator initiateService\nWARN: HHH000342: Could not obtain connection to query metadata\njava.lang.IllegalStateException: Cannot get a connection as the driver manager is not properly initialized\n    at org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl.getConnection(DriverManagerConnectionProviderImpl.java:172)\n    at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$ConnectionProviderJdbcConnectionAccess.obtainConnection(JdbcEnvironmentInitiator.java:181)\n    at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.initiateService(JdbcEnvironmentInitiator.java:68)\n    at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.initiateService(JdbcEnvironmentInitiator.java:35)\n    at org.hibernate.boot.registry.internal.StandardServiceRegistryImpl.initiateService(StandardServiceRegistryImpl.java:101)\n    at org.hibernate.service.internal.AbstractServiceRegistryImpl.createService(AbstractServiceRegistryImpl.java:263)\n    at org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:237)\n    at org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:214)\n    at org.hibernate.engine.jdbc.internal.JdbcServicesImpl.configure(JdbcServicesImpl.java:51)\n    at org.hibernate.boot.registry.internal.StandardServiceRegistryImpl.configureService(StandardServiceRegistryImpl.java:107)\n    at org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:246)\n    at org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:214)\n    at org.hibernate.engine.jdbc.connections.internal.BasicConnectionCreator.convertSqlException(BasicConnectionCreator.java:116)\n    at org.hibernate.engine.jdbc.connections.internal.DriverConnectionCreator.makeConnection(DriverConnectionCreator.java:41)\n    at org.hibernate.engine.jdbc.connections.internal.BasicConnectionCreator.createConnection(BasicConnectionCreator.java:58)\n    at org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl$PooledConnections.addConnections(DriverManagerConnectionProviderImpl.java:409)\n    at org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl$PooledConnections.&lt;init&gt;(DriverManagerConnectionProviderImpl.java:275)\n    at org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl$PooledConnections.&lt;init&gt;(DriverManagerConnectionProviderImpl.java:249)\n    at org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl$PooledConnections$Builder.build(DriverManagerConnectionProviderImpl.java:453)\n    at org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl.buildPool(DriverManagerConnectionProviderImpl.java:98)\n    at org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl.configure(DriverManagerConnectionProviderImpl.java:73)\n    at org.hibernate.boot.registry.internal.StandardServiceRegistryImpl.configureService(StandardServiceRegistryImpl.java:107)\n    at org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:246)\n    at org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:214)\n    at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.buildJdbcConnectionAccess(JdbcEnvironmentInitiator.java:146)\n    at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.initiateService(JdbcEnvironmentInitiator.java:66)\n    at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.initiateService(JdbcEnvironmentInitiator.java:35)\n    at org.hibernate.boot.registry.internal.StandardServiceRegistryImpl.initiateService(StandardServiceRegistryImpl.java:101)\n    at org.hibernate.service.internal.AbstractServiceRegistryImpl.createService(AbstractServiceRegistryImpl.java:263)\n    at org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:237)\n    at org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:214)\n    at org.hibernate.id.factory.internal.DefaultIdentifierGeneratorFactory.injectServices(DefaultIdentifierGeneratorFactory.java:175)\n    at org.hibernate.service.internal.AbstractServiceRegistryImpl.injectDependencies(AbstractServiceRegistryImpl.java:286)\n    at org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:243)\n    at org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:214)\n    at org.hibernate.boot.internal.InFlightMetadataCollectorImpl.&lt;init&gt;(InFlightMetadataCollectorImpl.java:173)\n    at org.hibernate.boot.model.process.spi.MetadataBuildingProcess.complete(MetadataBuildingProcess.java:127)\n    at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.metadata(EntityManagerFactoryBuilderImpl.java:1460)\n    at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1494)\n    at org.hibernate.jpa.HibernatePersistenceProvider.createEntityManagerFactory(HibernatePersistenceProvider.java:56)\n    at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:79)\n    at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:54)\n    at sk.hibernate.App.main(App.java:15)\n\nException in thread &quot;main&quot; org.hibernate.service.spi.ServiceException: Unable to create requested service [org.hibernate.engine.jdbc.env.spi.JdbcEnvironment]\n    at org.hibernate.service.internal.AbstractServiceRegistryImpl.createService(AbstractServiceRegistryImpl.java:275)\n    at org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:237)\n    at org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:214)\n    at org.hibernate.engine.jdbc.internal.JdbcServicesImpl.configure(JdbcServicesImpl.java:51)\n    at org.hibernate.boot.registry.internal.StandardServiceRegistryImpl.configureService(StandardServiceRegistryImpl.java:107)\n    at org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:246)\n    at org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:214)\n    at org.hibernate.engine.jdbc.connections.internal.BasicConnectionCreator.convertSqlException(BasicConnectionCreator.java:116)\n    at org.hibernate.engine.jdbc.connections.internal.DriverConnectionCreator.makeConnection(DriverConnectionCreator.java:41)\n    at org.hibernate.engine.jdbc.connections.internal.BasicConnectionCreator.createConnection(BasicConnectionCreator.java:58)\n    at org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl$PooledConnections.addConnections(DriverManagerConnectionProviderImpl.java:409)\n    at org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl$PooledConnections.&lt;init&gt;(DriverManagerConnectionProviderImpl.java:275)\n    at org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl$PooledConnections.&lt;init&gt;(DriverManagerConnectionProviderImpl.java:249)\n    at org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl$PooledConnections$Builder.build(DriverManagerConnectionProviderImpl.java:453)\n    at org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl.buildPool(DriverManagerConnectionProviderImpl.java:98)\n    at org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl.configure(DriverManagerConnectionProviderImpl.java:73)\n    at org.hibernate.boot.registry.internal.StandardServiceRegistryImpl.configureService(StandardServiceRegistryImpl.java:107)\n    at org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:246)\n    at org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:214)\n    at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.buildJdbcConnectionAccess(JdbcEnvironmentInitiator.java:146)\n    at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.initiateService(JdbcEnvironmentInitiator.java:66)\n    at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.initiateService(JdbcEnvironmentInitiator.java:35)\n    at org.hibernate.boot.registry.internal.StandardServiceRegistryImpl.initiateService(StandardServiceRegistryImpl.java:101)\n    at org.hibernate.service.internal.AbstractServiceRegistryImpl.createService(AbstractServiceRegistryImpl.java:263)\n    at org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:237)\n    at org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:214)\n    at org.hibernate.id.factory.internal.DefaultIdentifierGeneratorFactory.injectServices(DefaultIdentifierGeneratorFactory.java:175)\n    at org.hibernate.service.internal.AbstractServiceRegistryImpl.injectDependencies(AbstractServiceRegistryImpl.java:286)\n    at org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:243)\n    at org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:214)\n    at org.hibernate.boot.internal.InFlightMetadataCollectorImpl.&lt;init&gt;(InFlightMetadataCollectorImpl.java:173)\n    at org.hibernate.boot.model.process.spi.MetadataBuildingProcess.complete(MetadataBuildingProcess.java:127)\n    at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.metadata(EntityManagerFactoryBuilderImpl.java:1460)\n    at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1494)\n    at org.hibernate.jpa.HibernatePersistenceProvider.createEntityManagerFactory(HibernatePersistenceProvider.java:56)\n    at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:79)\n    at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:54)\n    at sk.hibernate.App.main(App.java:15)\nCaused by: org.hibernate.HibernateException: Access to DialectResolutionInfo cannot be null when 'hibernate.dialect' not set\n    at org.hibernate.engine.jdbc.dialect.internal.DialectFactoryImpl.determineDialect(DialectFactoryImpl.java:100)\n    at org.hibernate.engine.jdbc.dialect.internal.DialectFactoryImpl.buildDialect(DialectFactoryImpl.java:54)\n    at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.initiateService(JdbcEnvironmentInitiator.java:138)\n    at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.initiateService(JdbcEnvironmentInitiator.java:35)\n    at org.hibernate.boot.registry.internal.StandardServiceRegistryImpl.initiateService(StandardServiceRegistryImpl.java:101)\n    at org.hibernate.service.internal.AbstractServiceRegistryImpl.createService(AbstractServiceRegistryImpl.java:263)\n    ... 37 more\n\nProcess finished with exit code 1\n</code></pre>\n"},{"tags":["java","ssl","apache-mina","apache-ftpserver"],"comments":[{"owner":{"account_id":2366187,"reputation":60152,"user_id":2071828,"accept_rate":88,"display_name":"Boris the Spider"},"score":0,"creation_date":1643457628,"post_id":70905028,"comment_id":125347536,"body_markdown":"What version of Java are you running? What versions of TLS does your server support?","body":"What version of Java are you running? What versions of TLS does your server support?"},{"owner":{"account_id":8697869,"reputation":196,"user_id":6508729,"display_name":"Marwi"},"score":0,"creation_date":1643458040,"post_id":70905028,"comment_id":125347615,"body_markdown":"@BoristheSpider I&#39;m using Java 11. The supported TLS/SSL versions in my runtime (according to `SSLContext.getDefault().getSupportedSSLParameters().getProtocols()`) are TLSv1.3, TLSv1.2, TLSv1.1, TLSv1, SSLv3, and SSLv2Hello.","body":"@BoristheSpider I&#39;m using Java 11. The supported TLS/SSL versions in my runtime (according to <code>SSLContext.getDefault().getSupportedSSLParameters().getProto&zwnj;&#8203;cols()</code>) are TLSv1.3, TLSv1.2, TLSv1.1, TLSv1, SSLv3, and SSLv2Hello."},{"owner":{"account_id":2366187,"reputation":60152,"user_id":2071828,"accept_rate":88,"display_name":"Boris the Spider"},"score":0,"creation_date":1643458285,"post_id":70905028,"comment_id":125347670,"body_markdown":"You can set `-Djavax.net.debug=all` to get all the debugging in from the Java network stack - that should tell you what’s going on. Note that you **shouldn’t post the output** from that without careful review as is logs all the secret material.","body":"You can set <code>-Djavax.net.debug=all</code> to get all the debugging in from the Java network stack - that should tell you what’s going on. Note that you <b>shouldn’t post the output</b> from that without careful review as is logs all the secret material."},{"owner":{"account_id":8697869,"reputation":196,"user_id":6508729,"display_name":"Marwi"},"score":0,"creation_date":1643460118,"post_id":70905028,"comment_id":125348070,"body_markdown":"@BoristheSpider I&#39;ve added this argument, but I don&#39;t see any new output. It seems to be truncated when the `[main] INFO org.apache.ftpserver.impl.DefaultFtpServer - FTP server started` line comes.","body":"@BoristheSpider I&#39;ve added this argument, but I don&#39;t see any new output. It seems to be truncated when the <code>[main] INFO org.apache.ftpserver.impl.DefaultFtpServer - FTP server started</code> line comes."},{"owner":{"account_id":8697869,"reputation":196,"user_id":6508729,"display_name":"Marwi"},"score":0,"creation_date":1643462928,"post_id":70905028,"comment_id":125348753,"body_markdown":"@BoristheSpider my bad, I put the argument under `Program arguments` instead of `VM options` in IntelliJ, which is why I wasn&#39;t able to get any output. Here&#39;s the output: https://0bin.net/paste/JVW1fNiI#-6YBq0EqKfBXysfmzd70wp+//AdhZcNAyCP9kMCAXtd\n\nIt&#39;s probably too verbose, so here&#39;s the output with `-Djavax.net.debug=ssl` instead of `-Djavax.net.debug=all`: https://0bin.net/paste/n8GGKc5f#gtEWEaLTl8sKnEYUfBP41UgEMyvqQY3X1jsS3XLG8Pn","body":"@BoristheSpider my bad, I put the argument under <code>Program arguments</code> instead of <code>VM options</code> in IntelliJ, which is why I wasn&#39;t able to get any output. Here&#39;s the output: <a href=\"https://0bin.net/paste/JVW1fNiI#-6YBq0EqKfBXysfmzd70wp+//AdhZcNAyCP9kMCAXtd\" rel=\"nofollow noreferrer\">0bin.net/paste/JVW1fNiI#-6YBq0EqKfBXysfmzd70wp+//&hellip;</a>  It&#39;s probably too verbose, so here&#39;s the output with <code>-Djavax.net.debug=ssl</code> instead of <code>-Djavax.net.debug=all</code>: <a href=\"https://0bin.net/paste/n8GGKc5f#gtEWEaLTl8sKnEYUfBP41UgEMyvqQY3X1jsS3XLG8Pn\" rel=\"nofollow noreferrer\">0bin.net/paste/&hellip;</a>"},{"owner":{"account_id":8697869,"reputation":196,"user_id":6508729,"display_name":"Marwi"},"score":0,"creation_date":1643548221,"post_id":70905028,"comment_id":125364433,"body_markdown":"I&#39;m honestly quite surprised how problematic this turned out to be. I expected that it&#39;s possible to set up SSL on the only Java FTP library out there, especially since it&#39;s already documented.\n\nI assumed that I must have messed something up in my set up, so I ran everything again in a new server, and I still have the exact same issues. Should I simply just give up SSL?","body":"I&#39;m honestly quite surprised how problematic this turned out to be. I expected that it&#39;s possible to set up SSL on the only Java FTP library out there, especially since it&#39;s already documented.  I assumed that I must have messed something up in my set up, so I ran everything again in a new server, and I still have the exact same issues. Should I simply just give up SSL?"}],"answers":[{"tags":[],"owner":{"account_id":5289146,"reputation":8128,"user_id":4222206,"display_name":"queeg"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1643491212,"creation_date":1643483104,"answer_id":70908808,"question_id":70905028,"body_markdown":"1. I assume you have managed to setup the FTP server [without encryption standalone][1].\r\n2. I assume you have managed to set the FTP server [with encryption standalone][2].\r\n3. I assume you have managed to setup the FTP server [without encryption embedded][3].\r\n4. Now you are trying to combine **encryption and embedding**. As you correctly point out, this is also documented on step 3 and it seems your code directly follows the guide.\r\n\r\nYet the exception occurs when a client connects, and both client and server try to initialize the TLS handshake, which fails miserably on the server side. So something is still not right, and you need to search in the TLS area.\r\n\r\nHave you checked your keystore content? Does it exist? Does it contain the correct certificate? Does it contain several certificates? What are their aliases? How come in your code you do not have to specify which certificate shall be used?\r\n(the full documentation on the [keystore element][4] mentions a &#39;key alias&#39;, which could be set using [this method][5].\r\n\r\nThe other thing to check is why in your log so many protocols should get ignored. What protocols remain to be used in the end?\r\n\r\n\r\n  [1]: https://mina.apache.org/ftpserver-project/running_ftpserver_standalone.html\r\n  [2]: https://mina.apache.org/ftpserver-project/configuration_ssltls_support.html\r\n  [3]: https://mina.apache.org/ftpserver-project/embedding_ftpserver.html\r\n  [4]: https://mina.apache.org/ftpserver-project/configuration_listeners.html\r\n  [5]: https://github.com/apache/mina-ftpserver/blob/7b84f8648fb23312c6c796fbbc3910f50e35021b/core/src/main/java/org/apache/ftpserver/ssl/SslConfigurationFactory.java#L415","title":"Error when using SSL to connect to Apache FtpServer","body":"<ol>\n<li>I assume you have managed to setup the FTP server <a href=\"https://mina.apache.org/ftpserver-project/running_ftpserver_standalone.html\" rel=\"nofollow noreferrer\">without encryption standalone</a>.</li>\n<li>I assume you have managed to set the FTP server <a href=\"https://mina.apache.org/ftpserver-project/configuration_ssltls_support.html\" rel=\"nofollow noreferrer\">with encryption standalone</a>.</li>\n<li>I assume you have managed to setup the FTP server <a href=\"https://mina.apache.org/ftpserver-project/embedding_ftpserver.html\" rel=\"nofollow noreferrer\">without encryption embedded</a>.</li>\n<li>Now you are trying to combine <strong>encryption and embedding</strong>. As you correctly point out, this is also documented on step 3 and it seems your code directly follows the guide.</li>\n</ol>\n<p>Yet the exception occurs when a client connects, and both client and server try to initialize the TLS handshake, which fails miserably on the server side. So something is still not right, and you need to search in the TLS area.</p>\n<p>Have you checked your keystore content? Does it exist? Does it contain the correct certificate? Does it contain several certificates? What are their aliases? How come in your code you do not have to specify which certificate shall be used?\n(the full documentation on the <a href=\"https://mina.apache.org/ftpserver-project/configuration_listeners.html\" rel=\"nofollow noreferrer\">keystore element</a> mentions a 'key alias', which could be set using <a href=\"https://github.com/apache/mina-ftpserver/blob/7b84f8648fb23312c6c796fbbc3910f50e35021b/core/src/main/java/org/apache/ftpserver/ssl/SslConfigurationFactory.java#L415\" rel=\"nofollow noreferrer\">this method</a>.</p>\n<p>The other thing to check is why in your log so many protocols should get ignored. What protocols remain to be used in the end?</p>\n"}],"owner":{"account_id":8697869,"reputation":196,"user_id":6508729,"display_name":"Marwi"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":807,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1643491212,"creation_date":1643456941,"question_id":70905028,"body_markdown":"I&#39;m trying to set up a simple test FTP server using Apache FtpServer, and I&#39;m having trouble configuring to use SSL.\r\n\r\nFollowing the [Apache FtpServer documentation][1], here is what my code looks like so far:\r\n\r\n```java\r\n        FtpServerFactory ftpServerFactory = new FtpServerFactory();\r\n        ListenerFactory listenerFactory = new ListenerFactory();\r\n        listenerFactory.setPort(990);\r\n        listenerFactory.setServerAddress(&quot;example.com&quot;);\r\n\r\n        SslConfigurationFactory sslConfigurationFactory = new SslConfigurationFactory();\r\n        sslConfigurationFactory.setKeystoreFile(JKS);\r\n        sslConfigurationFactory.setKeystorePassword(JKS_PASS);\r\n        listenerFactory.setSslConfiguration(sslConfigurationFactory.createSslConfiguration());\r\n        listenerFactory.setImplicitSsl(true);\r\n\r\n        ftpServerFactory.addListener(&quot;default&quot;, listenerFactory.createListener());\r\n\r\n        PropertiesUserManagerFactory userManagerFactory = new PropertiesUserManagerFactory();\r\n        userManagerFactory.setFile(USERS_PATH.toFile());\r\n\r\n        BaseUser test = new BaseUser();\r\n        sample1.setName(&quot;test&quot;);\r\n        sample1.setPassword(&quot;test&quot;);\r\n        sample1.setHomeDirectory(HOME.getAbsolutePath().toString());\r\n        test.setAuthorities(List.of(new WritePermission());\r\n\r\n        UserManager userManager = userManagerFactory.createUserManager();\r\n        try {\r\n            userManager.save(test);\r\n        }\r\n        catch (FtpException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n        ftpServerFactory.setUserManager(userManager);\r\n\r\n        FtpServer server = ftpServerFactory.createServer();\r\n        try {\r\n            server.start();\r\n        }\r\n        catch (FtpException e) {\r\n            e.printStackTrace();\r\n        }\r\n```\r\n\r\nWhen I try to connect to the FTPS server, I get this error from the server:\r\n\r\n```\r\n[main] INFO org.apache.ftpserver.impl.DefaultFtpServer - FTP server started\r\n[NioProcessor-1] WARN org.apache.mina.util.DefaultExceptionMonitor - Unexpected exception.\r\norg.apache.mina.core.filterchain.IoFilterLifeCycleException: onPreAdd(): sslFilter:SslFilter in (0x00000002: nio socket, server, /2.51.214.102:50475 =&gt; /142.93.208.41:990)\r\n\tat org.apache.mina.core.filterchain.DefaultIoFilterChain.register(DefaultIoFilterChain.java:465)\r\n\tat org.apache.mina.core.filterchain.DefaultIoFilterChain.addLast(DefaultIoFilterChain.java:234)\r\n\tat org.apache.mina.core.filterchain.DefaultIoFilterChainBuilder.buildFilterChain(DefaultIoFilterChainBuilder.java:553)\r\n\tat org.apache.mina.core.polling.AbstractPollingIoProcessor$Processor.addNow(AbstractPollingIoProcessor.java:832)\r\n\tat org.apache.mina.core.polling.AbstractPollingIoProcessor$Processor.handleNewSessions(AbstractPollingIoProcessor.java:752)\r\n\tat org.apache.mina.core.polling.AbstractPollingIoProcessor$Processor.run(AbstractPollingIoProcessor.java:652)\r\n\tat org.apache.mina.util.NamePreservingRunnable.run(NamePreservingRunnable.java:64)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\r\n\tat java.base/java.lang.Thread.run(Thread.java:829)\r\nCaused by: java.lang.IllegalArgumentException: Unsupported protocolTLS\r\n\tat java.base/sun.security.ssl.ProtocolVersion.namesOf(ProtocolVersion.java:292)\r\n\tat java.base/sun.security.ssl.SSLEngineImpl.setEnabledProtocols(SSLEngineImpl.java:798)\r\n\tat org.apache.mina.filter.ssl.SslHandler.init(SslHandler.java:184)\r\n\tat org.apache.mina.filter.ssl.SslFilter.onPreAdd(SslFilter.java:458)\r\n\tat org.apache.mina.core.filterchain.DefaultIoFilterChain.register(DefaultIoFilterChain.java:463)\r\n\t... 9 more\r\n```\r\n\r\nFrom my client (FileZilla), I get this error:\r\n\r\n```\r\nStatus:      \tResolving address of itgsiatest.duss.app\r\nStatus:      \tConnecting to 142.93.208.41:990...\r\nStatus:      \tConnection established, initializing TLS...\r\nStatus:      \tConnection attempt failed with &quot;ECONNRESET - Connection reset by peer&quot;.\r\nError:        \tCould not connect to server\r\n```\r\n\r\nIs there anything I missed?\r\n\r\n  [1]: https://mina.apache.org/ftpserver-project/embedding_ftpserver.html","title":"Error when using SSL to connect to Apache FtpServer","body":"<p>I'm trying to set up a simple test FTP server using Apache FtpServer, and I'm having trouble configuring to use SSL.</p>\n<p>Following the <a href=\"https://mina.apache.org/ftpserver-project/embedding_ftpserver.html\" rel=\"nofollow noreferrer\">Apache FtpServer documentation</a>, here is what my code looks like so far:</p>\n<pre class=\"lang-java prettyprint-override\"><code>        FtpServerFactory ftpServerFactory = new FtpServerFactory();\n        ListenerFactory listenerFactory = new ListenerFactory();\n        listenerFactory.setPort(990);\n        listenerFactory.setServerAddress(&quot;example.com&quot;);\n\n        SslConfigurationFactory sslConfigurationFactory = new SslConfigurationFactory();\n        sslConfigurationFactory.setKeystoreFile(JKS);\n        sslConfigurationFactory.setKeystorePassword(JKS_PASS);\n        listenerFactory.setSslConfiguration(sslConfigurationFactory.createSslConfiguration());\n        listenerFactory.setImplicitSsl(true);\n\n        ftpServerFactory.addListener(&quot;default&quot;, listenerFactory.createListener());\n\n        PropertiesUserManagerFactory userManagerFactory = new PropertiesUserManagerFactory();\n        userManagerFactory.setFile(USERS_PATH.toFile());\n\n        BaseUser test = new BaseUser();\n        sample1.setName(&quot;test&quot;);\n        sample1.setPassword(&quot;test&quot;);\n        sample1.setHomeDirectory(HOME.getAbsolutePath().toString());\n        test.setAuthorities(List.of(new WritePermission());\n\n        UserManager userManager = userManagerFactory.createUserManager();\n        try {\n            userManager.save(test);\n        }\n        catch (FtpException e) {\n            e.printStackTrace();\n        }\n\n        ftpServerFactory.setUserManager(userManager);\n\n        FtpServer server = ftpServerFactory.createServer();\n        try {\n            server.start();\n        }\n        catch (FtpException e) {\n            e.printStackTrace();\n        }\n</code></pre>\n<p>When I try to connect to the FTPS server, I get this error from the server:</p>\n<pre><code>[main] INFO org.apache.ftpserver.impl.DefaultFtpServer - FTP server started\n[NioProcessor-1] WARN org.apache.mina.util.DefaultExceptionMonitor - Unexpected exception.\norg.apache.mina.core.filterchain.IoFilterLifeCycleException: onPreAdd(): sslFilter:SslFilter in (0x00000002: nio socket, server, /2.51.214.102:50475 =&gt; /142.93.208.41:990)\n    at org.apache.mina.core.filterchain.DefaultIoFilterChain.register(DefaultIoFilterChain.java:465)\n    at org.apache.mina.core.filterchain.DefaultIoFilterChain.addLast(DefaultIoFilterChain.java:234)\n    at org.apache.mina.core.filterchain.DefaultIoFilterChainBuilder.buildFilterChain(DefaultIoFilterChainBuilder.java:553)\n    at org.apache.mina.core.polling.AbstractPollingIoProcessor$Processor.addNow(AbstractPollingIoProcessor.java:832)\n    at org.apache.mina.core.polling.AbstractPollingIoProcessor$Processor.handleNewSessions(AbstractPollingIoProcessor.java:752)\n    at org.apache.mina.core.polling.AbstractPollingIoProcessor$Processor.run(AbstractPollingIoProcessor.java:652)\n    at org.apache.mina.util.NamePreservingRunnable.run(NamePreservingRunnable.java:64)\n    at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\n    at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\n    at java.base/java.lang.Thread.run(Thread.java:829)\nCaused by: java.lang.IllegalArgumentException: Unsupported protocolTLS\n    at java.base/sun.security.ssl.ProtocolVersion.namesOf(ProtocolVersion.java:292)\n    at java.base/sun.security.ssl.SSLEngineImpl.setEnabledProtocols(SSLEngineImpl.java:798)\n    at org.apache.mina.filter.ssl.SslHandler.init(SslHandler.java:184)\n    at org.apache.mina.filter.ssl.SslFilter.onPreAdd(SslFilter.java:458)\n    at org.apache.mina.core.filterchain.DefaultIoFilterChain.register(DefaultIoFilterChain.java:463)\n    ... 9 more\n</code></pre>\n<p>From my client (FileZilla), I get this error:</p>\n<pre><code>Status:         Resolving address of itgsiatest.duss.app\nStatus:         Connecting to 142.93.208.41:990...\nStatus:         Connection established, initializing TLS...\nStatus:         Connection attempt failed with &quot;ECONNRESET - Connection reset by peer&quot;.\nError:          Could not connect to server\n</code></pre>\n<p>Is there anything I missed?</p>\n"},{"tags":["java","opengl","lwjgl","glfw"],"comments":[{"owner":{"account_id":8496744,"reputation":12357,"user_id":6371123,"display_name":"G.M."},"score":0,"creation_date":1643485787,"post_id":70908532,"comment_id":125354568,"body_markdown":"Which OS are you using?  If it&#39;s MacOS you might want to try setting the [`GLFW_OPENGL_FORWARD_COMPAT`](https://www.glfw.org/docs/3.3/window_guide.html#GLFW_OPENGL_FORWARD_COMPAT_hint) window hint to `GL_TRUE`.","body":"Which OS are you using?  If it&#39;s MacOS you might want to try setting the <a href=\"https://www.glfw.org/docs/3.3/window_guide.html#GLFW_OPENGL_FORWARD_COMPAT_hint\" rel=\"nofollow noreferrer\"><code>GLFW_OPENGL_FORWARD_COMPAT</code></a> window hint to <code>GL_TRUE</code>."},{"owner":{"account_id":17054349,"reputation":174,"user_id":12339258,"display_name":"Valentin Popescu"},"score":0,"creation_date":1643486845,"post_id":70908532,"comment_id":125354782,"body_markdown":"@G.M. windows 10 build 19044.1466","body":"@G.M. windows 10 build 19044.1466"}],"answers":[{"tags":[],"owner":{"account_id":6630353,"reputation":5504,"user_id":8623159,"display_name":"httpdigest"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1643490858,"creation_date":1643489841,"answer_id":70909668,"question_id":70908532,"body_markdown":"You are requesting OpenGL 3.3 core (the &quot;3.3&quot; is _not_ the LWJGL or GLFW version 3.3 - it is the _OpenGL context_ version you are requesting), which does not have the deprecated OpenGL functions available, that you are trying to use - `glBegin` and `glVertex2f`.\r\n\r\nThe error message hints at that:\r\n\r\n&gt; No context is current or **a function that is not available in the current context** was called.\r\n\r\nThere is also a misunderstanding. To clarify, the following comments in your code are misleading/wrong:\r\n```C\r\nglfwWindowHint(GLFW_CONTEXT_VERSION_MAJOR, 3); // GLFW version 3\r\nglfwWindowHint(GLFW_CONTEXT_VERSION_MINOR, 3); // GLFW version 3.3\r\n```\r\nThe window hints `GLFW_CONTEXT_VERSION_MAJOR` and `GLFW_CONTEXT_VERSION_MINOR` do not specify which version of the _GLFW_ native library to use, but which *OpenGL* context version GLFW will request from the OS/driver for the OpenGL context created by the next call to `glfwCreateWindow()`.\r\n\r\nEither use modern OpenGL or request a lower OpenGL version, e.g. 2.1, by omitting the `glfwWindowHint()` calls. In that case, it is up to the driver which OpenGL context version it is giving you. On Windows (with NVidia) it will be the highest available OpenGL compatibility version (such as 4.6) supported. On macOS it will be 2.1.","title":"Why doesn&#39;t LWJGL recognize my GLFW version?","body":"<p>You are requesting OpenGL 3.3 core (the &quot;3.3&quot; is <em>not</em> the LWJGL or GLFW version 3.3 - it is the <em>OpenGL context</em> version you are requesting), which does not have the deprecated OpenGL functions available, that you are trying to use - <code>glBegin</code> and <code>glVertex2f</code>.</p>\n<p>The error message hints at that:</p>\n<blockquote>\n<p>No context is current or <strong>a function that is not available in the current context</strong> was called.</p>\n</blockquote>\n<p>There is also a misunderstanding. To clarify, the following comments in your code are misleading/wrong:</p>\n<pre><code>glfwWindowHint(GLFW_CONTEXT_VERSION_MAJOR, 3); // GLFW version 3\nglfwWindowHint(GLFW_CONTEXT_VERSION_MINOR, 3); // GLFW version 3.3\n</code></pre>\n<p>The window hints <code>GLFW_CONTEXT_VERSION_MAJOR</code> and <code>GLFW_CONTEXT_VERSION_MINOR</code> do not specify which version of the <em>GLFW</em> native library to use, but which <em>OpenGL</em> context version GLFW will request from the OS/driver for the OpenGL context created by the next call to <code>glfwCreateWindow()</code>.</p>\n<p>Either use modern OpenGL or request a lower OpenGL version, e.g. 2.1, by omitting the <code>glfwWindowHint()</code> calls. In that case, it is up to the driver which OpenGL context version it is giving you. On Windows (with NVidia) it will be the highest available OpenGL compatibility version (such as 4.6) supported. On macOS it will be 2.1.</p>\n"}],"owner":{"account_id":17054349,"reputation":174,"user_id":12339258,"display_name":"Valentin Popescu"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":552,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":70909668,"answer_count":1,"score":1,"last_activity_date":1643490858,"creation_date":1643481218,"question_id":70908532,"body_markdown":"I have written a simple program with LWJGL. The problem is that every time I try to run the app, I encounter this error:\r\n```\r\nFATAL ERROR in native method: Thread[main,5,main]: No context is current or a function that is not available in the current context was called. The JVM will abort execution.\r\n\tat org.lwjgl.opengl.GL11.glBegin(Native Method)\r\n\tat Main.main(Main.java:24)\r\n```\r\n\r\nThe error is misleading, as I did actually call `glfwMakeContextCurrent(window)` and `GL.createCapabilities()`.\r\n\r\nI tracked the error to the `glfwWindowHint(GLFW_CONTEXT_VERSION_MINOR, 3)`. It seems that when I remove this and the `glfwWindowHint(GLFW_OPENGL_PROFILE, GLFW_OPENGL_CORE_PROFILE)` line, the app will run.\r\n\r\nWhat I do not understand is why does it happen, as I do actually have a GLFW 3.3 dependency in `pom.xml`.\r\n\r\nHere is my code:\r\n\r\n**pom.xml:**\r\n```\r\n&lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.lwjgl&lt;/groupId&gt;\r\n            &lt;artifactId&gt;lwjgl&lt;/artifactId&gt;\r\n            &lt;version&gt;3.3.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        \r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.lwjgl&lt;/groupId&gt;\r\n            &lt;artifactId&gt;lwjgl-glfw&lt;/artifactId&gt;\r\n            &lt;version&gt;3.3.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        \r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.lwjgl&lt;/groupId&gt;\r\n            &lt;artifactId&gt;lwjgl-opengl&lt;/artifactId&gt;\r\n            &lt;version&gt;3.3.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        \r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.lwjgl&lt;/groupId&gt;\r\n            &lt;artifactId&gt;lwjgl&lt;/artifactId&gt;\r\n            &lt;version&gt;3.3.0&lt;/version&gt;\r\n            &lt;classifier&gt;natives-windows&lt;/classifier&gt;\r\n        &lt;/dependency&gt;\r\n        \r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.lwjgl&lt;/groupId&gt;\r\n            &lt;artifactId&gt;lwjgl-glfw&lt;/artifactId&gt;\r\n            &lt;version&gt;3.3.0&lt;/version&gt;\r\n            &lt;classifier&gt;natives-windows&lt;/classifier&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n```\r\n\r\n**Main.java:**\r\n```\r\npublic class Main {\r\n    public static void main(String[] args) {\r\n        glfwInit(); // Initialize GLFW\r\n\r\n        glfwWindowHint(GLFW_CONTEXT_VERSION_MAJOR, 3); // GLFW version 3\r\n        glfwWindowHint(GLFW_CONTEXT_VERSION_MINOR, 3); // GLFW version 3.3\r\n        glfwWindowHint(GLFW_OPENGL_PROFILE, GLFW_OPENGL_CORE_PROFILE); // GLFW uses CORE profile\r\n\r\n        long window = glfwCreateWindow(800, 600, &quot;Hello Triangle&quot;, 0, 0);\r\n\r\n        glfwMakeContextCurrent(window);\r\n        GL.createCapabilities();\r\n\r\n        while(!glfwWindowShouldClose(window)) {\r\n            glfwPollEvents();\r\n            glClearColor(0.05f, 0.1f, 0.2f, 1.0f); // Wipe drawing from previous frame with a black color\r\n            glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT); // Clear color buffer and depth buffer\r\n\r\n            glBegin(GL_TRIANGLES);\r\n            glVertex2f(-0.5f, -0.5f);\r\n            glVertex2f(0.5f, -0.5f);\r\n            glVertex2f(0f, 0.5f);\r\n            glEnd();\r\n\r\n            glfwSwapBuffers(window); // Swap front and back buffer\r\n            glFlush(); // Empties buffers - improves performance\r\n        }\r\n\r\n        glfwDestroyWindow(window);\r\n        glfwTerminate();\r\n    }\r\n}\r\n```","title":"Why doesn&#39;t LWJGL recognize my GLFW version?","body":"<p>I have written a simple program with LWJGL. The problem is that every time I try to run the app, I encounter this error:</p>\n<pre><code>FATAL ERROR in native method: Thread[main,5,main]: No context is current or a function that is not available in the current context was called. The JVM will abort execution.\n    at org.lwjgl.opengl.GL11.glBegin(Native Method)\n    at Main.main(Main.java:24)\n</code></pre>\n<p>The error is misleading, as I did actually call <code>glfwMakeContextCurrent(window)</code> and <code>GL.createCapabilities()</code>.</p>\n<p>I tracked the error to the <code>glfwWindowHint(GLFW_CONTEXT_VERSION_MINOR, 3)</code>. It seems that when I remove this and the <code>glfwWindowHint(GLFW_OPENGL_PROFILE, GLFW_OPENGL_CORE_PROFILE)</code> line, the app will run.</p>\n<p>What I do not understand is why does it happen, as I do actually have a GLFW 3.3 dependency in <code>pom.xml</code>.</p>\n<p>Here is my code:</p>\n<p><strong>pom.xml:</strong></p>\n<pre><code>&lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.lwjgl&lt;/groupId&gt;\n            &lt;artifactId&gt;lwjgl&lt;/artifactId&gt;\n            &lt;version&gt;3.3.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        \n        &lt;dependency&gt;\n            &lt;groupId&gt;org.lwjgl&lt;/groupId&gt;\n            &lt;artifactId&gt;lwjgl-glfw&lt;/artifactId&gt;\n            &lt;version&gt;3.3.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        \n        &lt;dependency&gt;\n            &lt;groupId&gt;org.lwjgl&lt;/groupId&gt;\n            &lt;artifactId&gt;lwjgl-opengl&lt;/artifactId&gt;\n            &lt;version&gt;3.3.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        \n        &lt;dependency&gt;\n            &lt;groupId&gt;org.lwjgl&lt;/groupId&gt;\n            &lt;artifactId&gt;lwjgl&lt;/artifactId&gt;\n            &lt;version&gt;3.3.0&lt;/version&gt;\n            &lt;classifier&gt;natives-windows&lt;/classifier&gt;\n        &lt;/dependency&gt;\n        \n        &lt;dependency&gt;\n            &lt;groupId&gt;org.lwjgl&lt;/groupId&gt;\n            &lt;artifactId&gt;lwjgl-glfw&lt;/artifactId&gt;\n            &lt;version&gt;3.3.0&lt;/version&gt;\n            &lt;classifier&gt;natives-windows&lt;/classifier&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n</code></pre>\n<p><strong>Main.java:</strong></p>\n<pre><code>public class Main {\n    public static void main(String[] args) {\n        glfwInit(); // Initialize GLFW\n\n        glfwWindowHint(GLFW_CONTEXT_VERSION_MAJOR, 3); // GLFW version 3\n        glfwWindowHint(GLFW_CONTEXT_VERSION_MINOR, 3); // GLFW version 3.3\n        glfwWindowHint(GLFW_OPENGL_PROFILE, GLFW_OPENGL_CORE_PROFILE); // GLFW uses CORE profile\n\n        long window = glfwCreateWindow(800, 600, &quot;Hello Triangle&quot;, 0, 0);\n\n        glfwMakeContextCurrent(window);\n        GL.createCapabilities();\n\n        while(!glfwWindowShouldClose(window)) {\n            glfwPollEvents();\n            glClearColor(0.05f, 0.1f, 0.2f, 1.0f); // Wipe drawing from previous frame with a black color\n            glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT); // Clear color buffer and depth buffer\n\n            glBegin(GL_TRIANGLES);\n            glVertex2f(-0.5f, -0.5f);\n            glVertex2f(0.5f, -0.5f);\n            glVertex2f(0f, 0.5f);\n            glEnd();\n\n            glfwSwapBuffers(window); // Swap front and back buffer\n            glFlush(); // Empties buffers - improves performance\n        }\n\n        glfwDestroyWindow(window);\n        glfwTerminate();\n    }\n}\n</code></pre>\n"},{"tags":["java"],"answers":[{"tags":[],"owner":{"account_id":6017640,"reputation":8919,"user_id":4725875,"display_name":"DevilsHnd - 退した"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1643490684,"creation_date":1643490684,"answer_id":70909768,"question_id":70908986,"body_markdown":"Where you clear all your **JTextField**s, You should also reset all member variables used in previous calculations. After all, beacause of their scope (class global), they will still be holding values unless reset:\r\n\r\n    if (e.getSource() == clearButton) {   \r\n        textField3.setText(&quot;&quot;);\r\n        textField2.setText(&quot;&quot;);\r\n        textField1.setText(&quot;&quot;);\r\n        textField4.setText(&quot;&quot;);\r\n        textField5.setText(&quot;&quot;); \r\n        num1 = 0;\r\n        num2 = 0;\r\n        result = 0;\r\n        operator = &#39;\\0&#39;;\r\n    }     ","title":"Calculator Clear button functionality isn&#39;t working as desired. set to 0 causes multiplication to = 0 . Desire AC to give same result as new start ups","body":"<p>Where you clear all your <strong>JTextField</strong>s, You should also reset all member variables used in previous calculations. After all, beacause of their scope (class global), they will still be holding values unless reset:</p>\n<pre><code>if (e.getSource() == clearButton) {   \n    textField3.setText(&quot;&quot;);\n    textField2.setText(&quot;&quot;);\n    textField1.setText(&quot;&quot;);\n    textField4.setText(&quot;&quot;);\n    textField5.setText(&quot;&quot;); \n    num1 = 0;\n    num2 = 0;\n    result = 0;\n    operator = '\\0';\n}     \n</code></pre>\n"}],"owner":{"account_id":21771908,"reputation":3,"user_id":16074903,"display_name":"Vyse"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":74,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70909768,"answer_count":1,"score":0,"last_activity_date":1643490684,"creation_date":1643484220,"question_id":70908986,"body_markdown":"/*/******\r\n\r\n   I stripped down as much as I thought possible while still being pleasing to use. this is my beginner calulator project. it shows result as I type. I&#39;m using multiple textFields to achieve this. I&#39;m open to smarter ways. for now though I would like to lie in my bed as I&#39;ve made it to learn. \r\n\r\n   On fresh start up no issues with parsing and the getting a result but after clear lets say I used addButton last it will automatically add the first new number to itself then give me the result as the new num1. if I set num1 to 0; add works but not multiplication because of zero... is .setText(&quot; &quot;); really deleting the values? is there a better way? I&#39;ve read all I could find on textFields. \r\n\r\n   I will happily take direction to the correct reading material in lieu of a direct answer. textField numbered slightly out of order. My apologies order is top down - 3 -2 -1 -4 -5.  4 and 5 are to help me visualize the problem 3 shows the work, 2 the result and 1 is used for parsing num1 and setting the current result to num1 so I can chain the addition.\r\n   I&#39;ve tried parsing at different locations setting num1 to 0 setting result to the remainder of result and num1 to be the new num2.. and a bunch of other silly attempts at similar solulutions. I know that my if(numberButtons[i]) { statement directly above the switch for + - * / where it sets num2=Double.parseDouble(textField4.getText()); is the main cause but it is also the only way I know to give constant results as I type in my numbers.\r\n   I,ve tried more thought-out and many more arbitrary changes to my code trying to understand what&#39;s really going on and what&#39;s possible. \r\n   Afer 3 weeks I am embarrassed for myself. Thank you for your time. Again even just the right direction will help me very much. I do like and desire to solve the problem on my own. I am just truly out of my depth as I am 3 months into this a few hours a day in my time off of work. I truly enjoy it and would love to have a sense of closure and completion to this problem.  \r\n*//*/*************\r\n\r\n    package test;\r\n    \r\n    import javax.swing.*;\r\n    import javax.swing.border.BevelBorder;\r\n    import javax.swing.border.Border;\r\n    import javax.swing.border.LineBorder;\r\n    import javax.swing.border.SoftBevelBorder;\r\n    import java.awt.*;\r\n    import java.awt.event.ActionEvent;\r\n    import java.awt.event.ActionListener;\r\n    \r\n    public class Calc1 implements ActionListener {\r\n    \t\r\n    \tJFrame frame;\r\n    \tJTextField textField3,textField2,textField1,textField4,textField5; \r\n    \tJButton[] numberButtons = new JButton[10];\r\n    \tJButton[] functionButtons = new JButton[6];\r\n    \tJButton addButton,subButton,multiButton,diviButton,decimalButton;\r\n    \tJButton equalButton,deleteButton,clearButton,negativeButton;\r\n    \tJPanel panel;\r\n    \tJLabel label;\r\n    \tFont myFont = new Font(&quot;Monospaced&quot;, Font.BOLD,31);\r\n    \tFont font1 = new Font(&quot;Monospaced&quot;, Font.BOLD, 30);\r\n    \tFont font2 = new Font(&quot;Monospaced&quot;, Font.BOLD, 28);\r\n    \tFont font3 = new Font(&quot;SansSerif&quot;, Font.BOLD, 48);\r\n    \tFont font4 = new Font(&quot;Monospaced&quot;, Font.BOLD, 65);\r\n    \tdouble num1=0,num2=0,result=0;\r\n    \tchar operator;\r\n    \r\n    \tCalc1(){\r\n    \t\tBorder border1 = new LineBorder(Color.DARK_GRAY, 4, true);\r\n    \t\tframe = new JFrame(&quot;Calculator&quot;);\r\n    \t\tframe.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n    \t\tframe.setLayout(null);\r\n    \t\tframe.setOpacity(1);\r\n    \t\tframe.setVisible(true);\t\r\n    \t\tframe.setBounds(201, 60, 323, 700);\r\n    \t\t\t\t\r\n    \t\tlabel = new JLabel();\r\n    \t\tlabel.setBounds(5, 4, 300, 52);\r\n    \t\tlabel.setFont(font1);\r\n    \t\tlabel.setVisible(true);\r\n    \t\tlabel.setText(&quot;Calculator&quot;);\r\n    \t\tlabel.setForeground(Color.blue);\r\n    \t\tlabel.setFont(new Font(&quot;Console&quot;, 1, 17));\r\n    \t\tlabel.setBorder(new SoftBevelBorder(BevelBorder.LOWERED));\r\n    \t\t\r\n    \t\tBorder border = new LineBorder(Color.LIGHT_GRAY, 7, true);\r\n    \t\ttextField3 = new JTextField(); \r\n    \t\ttextField3.setBounds(5,54, 299, 38);\r\n    \t\ttextField3.setFont(font2);\r\n    \t\ttextField3.setBackground(Color.lightGray);\r\n    \t\ttextField3.setBorder(border);\r\n    \t\ttextField3.setOpaque(true);\r\n    \t\ttextField3.setHorizontalAlignment(JTextField.RIGHT);\r\n    \t\ttextField3.setFocusable(true);\r\n    \t\r\n    \t\ttextField2 = new JTextField(); \r\n    \t\ttextField2.setBounds(5, 89, 299, 44); \r\n    \t\ttextField2.setFont(myFont);\r\n    \t\ttextField2.setBackground(Color.lightGray);\r\n    \t\ttextField2.setBorder(border);\r\n    \t\ttextField2.setVisible(true);\r\n    \t\ttextField2.setOpaque(true);\r\n    \t\ttextField2.setHorizontalAlignment(JTextField.RIGHT);\r\n    \t\ttextField2.setFocusable(false);\r\n    \t\t\r\n    \t\ttextField1 = new JTextField(); \r\n    \t\ttextField1.setBounds(5,510, 300, 35); \r\n    \t\ttextField1.setFont(myFont);\r\n    \t\ttextField1.setVisible(true);\r\n    \t\r\n    \t\ttextField4 = new JTextField(); \r\n    \t\ttextField4.setBounds(5,549, 300, 35); \r\n    \t\ttextField4.setFont(myFont);\r\n    \t\ttextField4.setVisible(true);\r\n    \t\t\r\n    \t\ttextField5 = new JTextField(); \r\n    \t\ttextField5.setBounds(5,580, 300, 35); \r\n    \t\ttextField5.setFont(myFont);\r\n    \t\ttextField5.setVisible(true);\r\n    \t\t\t\r\n    \t\taddButton = new JButton(&quot;+&quot;);\r\n    \t\tsubButton = new JButton(&quot;-&quot;);\r\n    \t\tmultiButton = new JButton(&quot;x&quot;);\r\n    \t\tdiviButton = new JButton(&quot;&#247;&quot;);\r\n    \t\tdecimalButton = new JButton(&quot;.&quot;);\r\n    \t\tequalButton = new JButton(&quot;=&quot;);\r\n    \t\tdeleteButton = new JButton(&quot;←&quot;);\r\n    \t\tclearButton = new JButton(&quot;AC&quot;);\r\n    \r\n    \t\tfunctionButtons[0] = addButton; \r\n    \t\tfunctionButtons[1] = subButton;\r\n    \t\tfunctionButtons[2] = multiButton;\r\n    \t\tfunctionButtons[3] = diviButton;\r\n    \t\tfunctionButtons[4] = decimalButton;\r\n    \t\tfunctionButtons[5] = clearButton;\r\n    \t\tfor(int i=0; i&lt;6; i++) {\r\n    \t\t\tfunctionButtons[i].addActionListener(this);\r\n    \t\t\tfunctionButtons[i].setFont(myFont);\r\n    \t\t\tfunctionButtons[i].setFocusable(false);\r\n    \t\t\tfunctionButtons[i].setBorder(new SoftBevelBorder(BevelBorder.RAISED));\t\r\n    \t\t}\t\r\n    \t\tfor(int i=0; i&lt;10; i++) {\r\n    \t\t\tnumberButtons[i] = new JButton(String.valueOf(i));\r\n    \t\t\tnumberButtons[i].addActionListener(this);\r\n    \t\t\tnumberButtons[i].setFont(font2);\r\n    \t\t\tnumberButtons[i].setFocusable(false);\r\n    \t\t}\t\r\n    \t\tpanel = new JPanel(); \r\n    \t\tpanel.setLayout(new GridLayout(4,4,4,4));\t\r\n    \t\tpanel.add(label);\r\n    \t\tpanel.setBackground(Color.DARK_GRAY);\r\n    \t\tpanel.setForeground(Color.BLACK);\r\n    \t\tpanel.setVisible(true);\r\n    \t\tpanel.setOpaque(true);\r\n    \t\tpanel.setBorder(border1);\r\n    \t\tpanel.setBounds(4, 133, 300, 300);\r\n    \t\t\r\n    \t\tpanel.add(numberButtons[7]);\r\n    \t\tpanel.add(numberButtons[8]);\r\n    \t\tpanel.add(numberButtons[9]);\r\n    \t\tpanel.add(addButton);\r\n    \t\tpanel.add(numberButtons[4]);\r\n    \t\tpanel.add(numberButtons[5]);\r\n    \t\tpanel.add(numberButtons[6]);\r\n    \t\tpanel.add(subButton);\r\n    \t\tpanel.add(numberButtons[1]);\r\n    \t\tpanel.add(numberButtons[2]);\r\n    \t\tpanel.add(numberButtons[3]);\r\n    \t\tpanel.add(multiButton);\r\n    \t\tpanel.add(decimalButton);\r\n    \t\tpanel.add(numberButtons[0]);\r\n    \t\tpanel.add(clearButton);\r\n    \t\tpanel.add(diviButton);\r\n    \t\tframe.add(panel); \r\n    \t\tframe.add(label);\r\n    \t\tframe.add(textField3);\r\n    \t\tframe.add(textField2); \r\n    \t\tframe.add(textField1);\r\n    \t\tframe.add(textField4);\r\n    \t\tframe.add(textField5);\r\n    \t\t\r\n    \t\tframe.setOpacity(1);\r\n    \t\tframe.setForeground(Color.BLACK);\r\n    \t\tframe.setBackground(Color.BLACK);\r\n    \t\tframe.setVisible(true);\r\n    \t\t\r\n    \t\tlabel.setForeground(Color.blue);\r\n    \t\tlabel.setBackground(Color.GRAY);\r\n    \t\tlabel.setOpaque(true);\t\r\n    \t}\r\n    \tpublic static void main(String[] args) {\r\n    \t\tCalc1 calc = new Calc1();\t\r\n    \t}\r\n    \tpublic  void actionPerformed(ActionEvent e) {\r\n    \t\tfor(int i=0; i&lt;10; i++) { \r\n    \t\t\tif(e.getSource() == numberButtons[i]) { \r\n    \t\t\t\ttextField1.setText(textField1.getText().concat(String.valueOf((i))));\r\n    \t\t\t\ttextField3.setText(textField3.getText().concat(String.valueOf((i))));\t\r\n    \t\t\t\ttextField4.setText(textField4.getText().concat(String.valueOf((i))));\t\r\n    \t\t\t\ttextField5.setText(textField5.getText().concat(String.valueOf((i))));\r\n    \t\t\t}\r\n    \t\t}\r\n    \t\t\tif (e.getSource()==subButton) {\t\t\r\n    \t\t\t\tnum1=Double.parseDouble(textField1.getText());\r\n    \t\t\t\toperator=&#39;-&#39;;\r\n    \t\t\t\ttextField3.setText(textField3.getText().concat(&quot;-&quot;));\r\n    \t\t\t\ttextField4.setText(&quot;&quot;);\r\n    \t\t\t\ttextField4.setText(textField4.getText().concat(&quot;&quot;));\t\r\n    \t\t }\r\n    \t\t\tif (e.getSource()==addButton) { \r\n    \t\t\t\tnum1 = Double.parseDouble(textField1.getText());\r\n    \t\t\t\toperator = &#39;+&#39;;\r\n    \t\t\t\ttextField3.setText(textField3.getText().concat(&quot;+&quot;));\r\n    \t\t\t\ttextField4.setText(&quot;&quot;);\r\n    \t\t\t\ttextField4.setText(textField4.getText().concat(&quot;&quot;));\r\n    \t\t }\r\n    \t\t\tif (e.getSource()==multiButton) {\r\n    \t\t\t\tnum1 = Double.parseDouble(textField1.getText());\r\n    \t\t\t\toperator = &#39;*&#39;;\r\n    \t\t\t\ttextField3.setText(textField3.getText().concat(&quot;x&quot;));\r\n    \t\t\t\ttextField4.setText(&quot;&quot;);\r\n    \t\t\t\ttextField4.setText(textField4.getText().concat(&quot;&quot;));\t\r\n    \t\t}\r\n    \t\t\tif (e.getSource()==diviButton) {\r\n    \t\t\t\tnum1 = Double.parseDouble(textField1.getText());\r\n    \t\t\t\toperator = &#39;/&#39;;\r\n    \t\t\t\ttextField3.setText(textField3.getText().concat(&quot;&#247;&quot;));\r\n    \t\t\t\ttextField4.setText(&quot;&quot;);\r\n    \t\t\t\ttextField4.setText(textField4.getText().concat(&quot;&quot;));\r\n    \t\t}\t\r\n    \t\t\tfor(int i=0; i&lt;10; i++) { \r\n    \t\t\t\tif(e.getSource()==numberButtons[i]) {\t\r\n    \t\t\t\t\tnum2=Double.parseDouble(textField4.getText());\r\n    \t\t\t\t\r\n    \t\t\t\t\tswitch(operator) {\r\n    \t\t\t\t\tcase&#39;-&#39;:\t\r\n    \t\t\t\t\t\tresult=num1-num2;\r\n    \t\t\t\t\t\ttextField1.setText(String.valueOf(result));\t\r\n    \t\t\t\t\t\ttextField5.setText(String.valueOf(num1));\t\r\n    \t\t\t\t\t\tbreak;\r\n    \t\t\t\t\tcase&#39;+&#39;:\t\t\r\n    \t\t\t\t\t\tresult=num1+num2;\t\t\r\n    \t\t\t\t\t\ttextField1.setText(String.valueOf(result));\r\n    \t\t\t\t\t\ttextField5.setText(String.valueOf(num1));\t\t\r\n    \t\t\t\t\t\tbreak;\r\n    \t\t\t\t\tcase&#39;*&#39;:\r\n    \t\t\t\t\t\tresult=num1*num2;\t\r\n    \t\t\t\t\t\ttextField1.setText(String.valueOf(result));\r\n    \t\t\t\t\t\ttextField5.setText(String.valueOf(num1));\t\r\n    \t\t\t\t\t\tbreak;\r\n    \t\t\t\t\tcase&#39;/&#39;:\r\n    \t\t\t\t\t\tresult=num1/num2; \r\n    \t\t\t\t\t\ttextField1.setText(String.valueOf(result));\t\r\n    \t\t\t\t\t\ttextField5.setText(String.valueOf(num1));\t\r\n    \t\t\t\t\t\tbreak;\t\r\n    \t\t\t\t\t }\r\n    \t\t\t\t}\t\t\r\n    \t\t\ttextField2.setText(String.valueOf((result)));\t\t\r\n    \t\t}\r\n    \t\tif (e.getSource()==clearButton) {\t\r\n    \t\t\ttextField3.setText(&quot;&quot;);\r\n    \t\t\ttextField2.setText(&quot;&quot;);\r\n    \t\t\ttextField1.setText(&quot;&quot;);\r\n    \t\t\ttextField4.setText(&quot;&quot;);\r\n    \t\t\ttextField5.setText(&quot;&quot;);\t\r\n    \t\t}\t\t\r\n    \t}\t\r\n    }\r\n\r\n","title":"Calculator Clear button functionality isn&#39;t working as desired. set to 0 causes multiplication to = 0 . Desire AC to give same result as new start ups","body":"<p>/<em>/</em>*****</p>\n<p>I stripped down as much as I thought possible while still being pleasing to use. this is my beginner calulator project. it shows result as I type. I'm using multiple textFields to achieve this. I'm open to smarter ways. for now though I would like to lie in my bed as I've made it to learn.</p>\n<p>On fresh start up no issues with parsing and the getting a result but after clear lets say I used addButton last it will automatically add the first new number to itself then give me the result as the new num1. if I set num1 to 0; add works but not multiplication because of zero... is .setText(&quot; &quot;); really deleting the values? is there a better way? I've read all I could find on textFields.</p>\n<p>I will happily take direction to the correct reading material in lieu of a direct answer. textField numbered slightly out of order. My apologies order is top down - 3 -2 -1 -4 -5.  4 and 5 are to help me visualize the problem 3 shows the work, 2 the result and 1 is used for parsing num1 and setting the current result to num1 so I can chain the addition.\nI've tried parsing at different locations setting num1 to 0 setting result to the remainder of result and num1 to be the new num2.. and a bunch of other silly attempts at similar solulutions. I know that my if(numberButtons[i]) { statement directly above the switch for + - * / where it sets num2=Double.parseDouble(textField4.getText()); is the main cause but it is also the only way I know to give constant results as I type in my numbers.\nI,ve tried more thought-out and many more arbitrary changes to my code trying to understand what's really going on and what's possible.\nAfer 3 weeks I am embarrassed for myself. Thank you for your time. Again even just the right direction will help me very much. I do like and desire to solve the problem on my own. I am just truly out of my depth as I am 3 months into this a few hours a day in my time off of work. I truly enjoy it and would love to have a sense of closure and completion to this problem.<br />\n<em>//</em>/*************</p>\n<pre><code>package test;\n\nimport javax.swing.*;\nimport javax.swing.border.BevelBorder;\nimport javax.swing.border.Border;\nimport javax.swing.border.LineBorder;\nimport javax.swing.border.SoftBevelBorder;\nimport java.awt.*;\nimport java.awt.event.ActionEvent;\nimport java.awt.event.ActionListener;\n\npublic class Calc1 implements ActionListener {\n    \n    JFrame frame;\n    JTextField textField3,textField2,textField1,textField4,textField5; \n    JButton[] numberButtons = new JButton[10];\n    JButton[] functionButtons = new JButton[6];\n    JButton addButton,subButton,multiButton,diviButton,decimalButton;\n    JButton equalButton,deleteButton,clearButton,negativeButton;\n    JPanel panel;\n    JLabel label;\n    Font myFont = new Font(&quot;Monospaced&quot;, Font.BOLD,31);\n    Font font1 = new Font(&quot;Monospaced&quot;, Font.BOLD, 30);\n    Font font2 = new Font(&quot;Monospaced&quot;, Font.BOLD, 28);\n    Font font3 = new Font(&quot;SansSerif&quot;, Font.BOLD, 48);\n    Font font4 = new Font(&quot;Monospaced&quot;, Font.BOLD, 65);\n    double num1=0,num2=0,result=0;\n    char operator;\n\n    Calc1(){\n        Border border1 = new LineBorder(Color.DARK_GRAY, 4, true);\n        frame = new JFrame(&quot;Calculator&quot;);\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        frame.setLayout(null);\n        frame.setOpacity(1);\n        frame.setVisible(true); \n        frame.setBounds(201, 60, 323, 700);\n                \n        label = new JLabel();\n        label.setBounds(5, 4, 300, 52);\n        label.setFont(font1);\n        label.setVisible(true);\n        label.setText(&quot;Calculator&quot;);\n        label.setForeground(Color.blue);\n        label.setFont(new Font(&quot;Console&quot;, 1, 17));\n        label.setBorder(new SoftBevelBorder(BevelBorder.LOWERED));\n        \n        Border border = new LineBorder(Color.LIGHT_GRAY, 7, true);\n        textField3 = new JTextField(); \n        textField3.setBounds(5,54, 299, 38);\n        textField3.setFont(font2);\n        textField3.setBackground(Color.lightGray);\n        textField3.setBorder(border);\n        textField3.setOpaque(true);\n        textField3.setHorizontalAlignment(JTextField.RIGHT);\n        textField3.setFocusable(true);\n    \n        textField2 = new JTextField(); \n        textField2.setBounds(5, 89, 299, 44); \n        textField2.setFont(myFont);\n        textField2.setBackground(Color.lightGray);\n        textField2.setBorder(border);\n        textField2.setVisible(true);\n        textField2.setOpaque(true);\n        textField2.setHorizontalAlignment(JTextField.RIGHT);\n        textField2.setFocusable(false);\n        \n        textField1 = new JTextField(); \n        textField1.setBounds(5,510, 300, 35); \n        textField1.setFont(myFont);\n        textField1.setVisible(true);\n    \n        textField4 = new JTextField(); \n        textField4.setBounds(5,549, 300, 35); \n        textField4.setFont(myFont);\n        textField4.setVisible(true);\n        \n        textField5 = new JTextField(); \n        textField5.setBounds(5,580, 300, 35); \n        textField5.setFont(myFont);\n        textField5.setVisible(true);\n            \n        addButton = new JButton(&quot;+&quot;);\n        subButton = new JButton(&quot;-&quot;);\n        multiButton = new JButton(&quot;x&quot;);\n        diviButton = new JButton(&quot;÷&quot;);\n        decimalButton = new JButton(&quot;.&quot;);\n        equalButton = new JButton(&quot;=&quot;);\n        deleteButton = new JButton(&quot;←&quot;);\n        clearButton = new JButton(&quot;AC&quot;);\n\n        functionButtons[0] = addButton; \n        functionButtons[1] = subButton;\n        functionButtons[2] = multiButton;\n        functionButtons[3] = diviButton;\n        functionButtons[4] = decimalButton;\n        functionButtons[5] = clearButton;\n        for(int i=0; i&lt;6; i++) {\n            functionButtons[i].addActionListener(this);\n            functionButtons[i].setFont(myFont);\n            functionButtons[i].setFocusable(false);\n            functionButtons[i].setBorder(new SoftBevelBorder(BevelBorder.RAISED));  \n        }   \n        for(int i=0; i&lt;10; i++) {\n            numberButtons[i] = new JButton(String.valueOf(i));\n            numberButtons[i].addActionListener(this);\n            numberButtons[i].setFont(font2);\n            numberButtons[i].setFocusable(false);\n        }   \n        panel = new JPanel(); \n        panel.setLayout(new GridLayout(4,4,4,4));   \n        panel.add(label);\n        panel.setBackground(Color.DARK_GRAY);\n        panel.setForeground(Color.BLACK);\n        panel.setVisible(true);\n        panel.setOpaque(true);\n        panel.setBorder(border1);\n        panel.setBounds(4, 133, 300, 300);\n        \n        panel.add(numberButtons[7]);\n        panel.add(numberButtons[8]);\n        panel.add(numberButtons[9]);\n        panel.add(addButton);\n        panel.add(numberButtons[4]);\n        panel.add(numberButtons[5]);\n        panel.add(numberButtons[6]);\n        panel.add(subButton);\n        panel.add(numberButtons[1]);\n        panel.add(numberButtons[2]);\n        panel.add(numberButtons[3]);\n        panel.add(multiButton);\n        panel.add(decimalButton);\n        panel.add(numberButtons[0]);\n        panel.add(clearButton);\n        panel.add(diviButton);\n        frame.add(panel); \n        frame.add(label);\n        frame.add(textField3);\n        frame.add(textField2); \n        frame.add(textField1);\n        frame.add(textField4);\n        frame.add(textField5);\n        \n        frame.setOpacity(1);\n        frame.setForeground(Color.BLACK);\n        frame.setBackground(Color.BLACK);\n        frame.setVisible(true);\n        \n        label.setForeground(Color.blue);\n        label.setBackground(Color.GRAY);\n        label.setOpaque(true);  \n    }\n    public static void main(String[] args) {\n        Calc1 calc = new Calc1();   \n    }\n    public  void actionPerformed(ActionEvent e) {\n        for(int i=0; i&lt;10; i++) { \n            if(e.getSource() == numberButtons[i]) { \n                textField1.setText(textField1.getText().concat(String.valueOf((i))));\n                textField3.setText(textField3.getText().concat(String.valueOf((i))));   \n                textField4.setText(textField4.getText().concat(String.valueOf((i))));   \n                textField5.setText(textField5.getText().concat(String.valueOf((i))));\n            }\n        }\n            if (e.getSource()==subButton) {     \n                num1=Double.parseDouble(textField1.getText());\n                operator='-';\n                textField3.setText(textField3.getText().concat(&quot;-&quot;));\n                textField4.setText(&quot;&quot;);\n                textField4.setText(textField4.getText().concat(&quot;&quot;));    \n         }\n            if (e.getSource()==addButton) { \n                num1 = Double.parseDouble(textField1.getText());\n                operator = '+';\n                textField3.setText(textField3.getText().concat(&quot;+&quot;));\n                textField4.setText(&quot;&quot;);\n                textField4.setText(textField4.getText().concat(&quot;&quot;));\n         }\n            if (e.getSource()==multiButton) {\n                num1 = Double.parseDouble(textField1.getText());\n                operator = '*';\n                textField3.setText(textField3.getText().concat(&quot;x&quot;));\n                textField4.setText(&quot;&quot;);\n                textField4.setText(textField4.getText().concat(&quot;&quot;));    \n        }\n            if (e.getSource()==diviButton) {\n                num1 = Double.parseDouble(textField1.getText());\n                operator = '/';\n                textField3.setText(textField3.getText().concat(&quot;÷&quot;));\n                textField4.setText(&quot;&quot;);\n                textField4.setText(textField4.getText().concat(&quot;&quot;));\n        }   \n            for(int i=0; i&lt;10; i++) { \n                if(e.getSource()==numberButtons[i]) {   \n                    num2=Double.parseDouble(textField4.getText());\n                \n                    switch(operator) {\n                    case'-':    \n                        result=num1-num2;\n                        textField1.setText(String.valueOf(result)); \n                        textField5.setText(String.valueOf(num1));   \n                        break;\n                    case'+':        \n                        result=num1+num2;       \n                        textField1.setText(String.valueOf(result));\n                        textField5.setText(String.valueOf(num1));       \n                        break;\n                    case'*':\n                        result=num1*num2;   \n                        textField1.setText(String.valueOf(result));\n                        textField5.setText(String.valueOf(num1));   \n                        break;\n                    case'/':\n                        result=num1/num2; \n                        textField1.setText(String.valueOf(result)); \n                        textField5.setText(String.valueOf(num1));   \n                        break;  \n                     }\n                }       \n            textField2.setText(String.valueOf((result)));       \n        }\n        if (e.getSource()==clearButton) {   \n            textField3.setText(&quot;&quot;);\n            textField2.setText(&quot;&quot;);\n            textField1.setText(&quot;&quot;);\n            textField4.setText(&quot;&quot;);\n            textField5.setText(&quot;&quot;); \n        }       \n    }   \n}\n</code></pre>\n"},{"tags":["java","jvm","amazon-ecs","jvm-arguments","amazon-fargate"],"comments":[{"owner":{"account_id":18396380,"reputation":4116,"user_id":13400729,"display_name":"Parsifal"},"score":0,"creation_date":1643376621,"post_id":70894152,"comment_id":125329745,"body_markdown":"What are is the CPU setting for your Fargate task?","body":"What are is the CPU setting for your Fargate task?"},{"owner":{"account_id":2836297,"reputation":4500,"user_id":2436847,"accept_rate":62,"display_name":"karthikeayan"},"score":0,"creation_date":1643380717,"post_id":70894152,"comment_id":125331489,"body_markdown":"More than 1, updated my question.","body":"More than 1, updated my question."}],"answers":[{"tags":[],"owner":{"account_id":18396380,"reputation":4116,"user_id":13400729,"display_name":"Parsifal"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1643489836,"creation_date":1643489450,"answer_id":70909612,"question_id":70894152,"body_markdown":"I&#39;m going to assume that you used the Console to create your task definitions, because I saw the same behavior (and didn&#39;t expect it). [The documentation](https://docs.aws.amazon.com/AmazonECS/latest/developerguide/AWS_Fargate.html#fargate-task-defs) says this:\r\n\r\n&gt; Although you can also specify CPU and memory at the container level for Fargate tasks, this is optional. Most use cases are satisfied by only specifying these resources at the task level\r\n\r\nI first created a task definition that specified CPU/memory at the task level. When I ran it, I saw the same output as you, and this is what the task definition looked like (irrelevant information omitted):\r\n\r\n```\r\n    &quot;taskDefinition&quot;: {\r\n        &quot;containerDefinitions&quot;: [\r\n            {\r\n                &quot;name&quot;: &quot;example&quot;,\r\n                &quot;image&quot;: &quot;.../example:latest&quot;,\r\n                &quot;cpu&quot;: 0,\r\n            }\r\n        ],\r\n        &quot;cpu&quot;: &quot;4096&quot;,\r\n        &quot;memory&quot;: &quot;8192&quot;,\r\n    }\r\n```\r\n\r\nNote that the container CPU is 0.\r\n\r\nI then edited the CPU in the _container_ definition, and saw the expected number of available processors when I ran the task. When I retrieved the task definition, it looked like this:\r\n\r\n```\r\n    &quot;taskDefinition&quot;: {\r\n        &quot;containerDefinitions&quot;: [\r\n            {\r\n                &quot;name&quot;: &quot;example&quot;,\r\n                &quot;image&quot;: &quot;.../example:latest&quot;,\r\n                &quot;cpu&quot;: 4096,\r\n            }\r\n        ],\r\n        &quot;cpu&quot;: &quot;4096&quot;,\r\n        &quot;memory&quot;: &quot;8192&quot;,\r\n    }\r\n```\r\n\r\nI haven&#39;t tried creating a task definition using CloudFormation or Terraform to see if it&#39;s any different. I _have_ send feedback on the ECS Console.","title":"JVM Runtime.getRuntime().availableProcessors() returns 1 on AWS ECS Fargate","body":"<p>I'm going to assume that you used the Console to create your task definitions, because I saw the same behavior (and didn't expect it). <a href=\"https://docs.aws.amazon.com/AmazonECS/latest/developerguide/AWS_Fargate.html#fargate-task-defs\" rel=\"nofollow noreferrer\">The documentation</a> says this:</p>\n<blockquote>\n<p>Although you can also specify CPU and memory at the container level for Fargate tasks, this is optional. Most use cases are satisfied by only specifying these resources at the task level</p>\n</blockquote>\n<p>I first created a task definition that specified CPU/memory at the task level. When I ran it, I saw the same output as you, and this is what the task definition looked like (irrelevant information omitted):</p>\n<pre><code>    &quot;taskDefinition&quot;: {\n        &quot;containerDefinitions&quot;: [\n            {\n                &quot;name&quot;: &quot;example&quot;,\n                &quot;image&quot;: &quot;.../example:latest&quot;,\n                &quot;cpu&quot;: 0,\n            }\n        ],\n        &quot;cpu&quot;: &quot;4096&quot;,\n        &quot;memory&quot;: &quot;8192&quot;,\n    }\n</code></pre>\n<p>Note that the container CPU is 0.</p>\n<p>I then edited the CPU in the <em>container</em> definition, and saw the expected number of available processors when I ran the task. When I retrieved the task definition, it looked like this:</p>\n<pre><code>    &quot;taskDefinition&quot;: {\n        &quot;containerDefinitions&quot;: [\n            {\n                &quot;name&quot;: &quot;example&quot;,\n                &quot;image&quot;: &quot;.../example:latest&quot;,\n                &quot;cpu&quot;: 4096,\n            }\n        ],\n        &quot;cpu&quot;: &quot;4096&quot;,\n        &quot;memory&quot;: &quot;8192&quot;,\n    }\n</code></pre>\n<p>I haven't tried creating a task definition using CloudFormation or Terraform to see if it's any different. I <em>have</em> send feedback on the ECS Console.</p>\n"}],"owner":{"account_id":2836297,"reputation":4500,"user_id":2436847,"accept_rate":62,"display_name":"karthikeayan"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1447,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":70909612,"answer_count":1,"score":2,"last_activity_date":1643489836,"creation_date":1643374748,"question_id":70894152,"body_markdown":"```\r\npublic class Example {\r\n   public static void main(String[] args) {\r\n      // print statement at the start of the program\r\n      System.out.println(&quot;Start...&quot;);\r\n      System.out.print(&quot;Number of available processors are: &quot;);\r\n      System.out.println( Runtime.getRuntime().availableProcessors());\r\n   }\r\n}\r\n```\r\nRef: https://www.tutorialspoint.com/get-number-of-available-processors-in-java\r\n\r\nWhen I compile and run this code on AWS ECS Fargate getting &quot;1&quot; as the output even though I have specified more than 1 cpu in task def(4098 for 4 vCPU).\r\n\r\n**Tested Java versions:**\r\n\r\n - Corretto-17.0.0.35.1\r\n - Corretto-8.275.01.1\r\n\r\nBut when I do the same on AWS EC2 inside docker by allocating CPU with --cpus for &quot;docker run&quot; I get the exact number what I pass to --cpus. Same results with AWS EC2 with Containerd as well.\r\n\r\nAlso tested this in EKS 1.18 by setting CPU limit. It returns the number of CPUs specified in the CPU limit.\r\n\r\nSo, wondering why &quot;1&quot; only in AWS ECS.","title":"JVM Runtime.getRuntime().availableProcessors() returns 1 on AWS ECS Fargate","body":"<pre><code>public class Example {\n   public static void main(String[] args) {\n      // print statement at the start of the program\n      System.out.println(&quot;Start...&quot;);\n      System.out.print(&quot;Number of available processors are: &quot;);\n      System.out.println( Runtime.getRuntime().availableProcessors());\n   }\n}\n</code></pre>\n<p>Ref: <a href=\"https://www.tutorialspoint.com/get-number-of-available-processors-in-java\" rel=\"nofollow noreferrer\">https://www.tutorialspoint.com/get-number-of-available-processors-in-java</a></p>\n<p>When I compile and run this code on AWS ECS Fargate getting &quot;1&quot; as the output even though I have specified more than 1 cpu in task def(4098 for 4 vCPU).</p>\n<p><strong>Tested Java versions:</strong></p>\n<ul>\n<li>Corretto-17.0.0.35.1</li>\n<li>Corretto-8.275.01.1</li>\n</ul>\n<p>But when I do the same on AWS EC2 inside docker by allocating CPU with --cpus for &quot;docker run&quot; I get the exact number what I pass to --cpus. Same results with AWS EC2 with Containerd as well.</p>\n<p>Also tested this in EKS 1.18 by setting CPU limit. It returns the number of CPUs specified in the CPU limit.</p>\n<p>So, wondering why &quot;1&quot; only in AWS ECS.</p>\n"},{"tags":["java","string","algorithm","pattern-matching","trie"],"comments":[{"owner":{"display_name":"user1196549"},"score":0,"creation_date":1481736430,"post_id":41148543,"comment_id":69499612,"body_markdown":"What makes you think that a recursive version will be more efficient ? All it can be is slower. And as the message says, you experience stack overflow (because of heavy recursion). You&#39;d better keep the original code.","body":"What makes you think that a recursive version will be more efficient ? All it can be is slower. And as the message says, you experience stack overflow (because of heavy recursion). You&#39;d better keep the original code."},{"owner":{"account_id":1750275,"reputation":186,"user_id":1599512,"accept_rate":81,"display_name":"Tao Wang"},"score":0,"creation_date":1481737516,"post_id":41148543,"comment_id":69500198,"body_markdown":"Thanks Yves Daoust for your response. By using the last second condition, I don&#39;t have to go through all the way to the string end and stop while n &lt; d. The original code&#39;s problem is that it always exceeds time limit.","body":"Thanks Yves Daoust for your response. By using the last second condition, I don&#39;t have to go through all the way to the string end and stop while n &lt; d. The original code&#39;s problem is that it always exceeds time limit."},{"owner":{"account_id":1750275,"reputation":186,"user_id":1599512,"accept_rate":81,"display_name":"Tao Wang"},"score":0,"creation_date":1481737883,"post_id":41148543,"comment_id":69500382,"body_markdown":"One of the original code&#39;s problems is that it always exceeds time limit, and another is it can only get one index of pattern, what I need is to find all pattern&#39;s indices in Text.","body":"One of the original code&#39;s problems is that it always exceeds time limit, and another is it can only get one index of pattern, what I need is to find all pattern&#39;s indices in Text."},{"owner":{"account_id":1257651,"reputation":12773,"user_id":1216776,"display_name":"stark"},"score":0,"creation_date":1481738141,"post_id":41148543,"comment_id":69500517,"body_markdown":"Most of your code has no effect on the return value, which is always false once it gets past the first if.","body":"Most of your code has no effect on the return value, which is always false once it gets past the first if."},{"owner":{"display_name":"user1196549"},"score":0,"creation_date":1481752058,"post_id":41148543,"comment_id":69507669,"body_markdown":"@TaoWang: making the code recursive doesn&#39;t help. If you want to accelerate the algorithm, have a look at the classical solutions.https://en.wikipedia.org/wiki/String_searching_algorithm","body":"@TaoWang: making the code recursive doesn&#39;t help. If you want to accelerate the algorithm, have a look at the classical solutions.<a href=\"https://en.wikipedia.org/wiki/String_searching_algorithm\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/String_searching_algorithm</a>"}],"answers":[{"tags":[],"owner":{"display_name":"user235273"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1481740601,"creation_date":1481740601,"answer_id":41149754,"question_id":41148543,"body_markdown":"Currently the JVM (Hotspot) does not have tail call optimization. So each recursion will consume stack. So you get stackoverflow error. It&#39;s better to stick to iterative approach at the moment.","title":"String pattern search algorithm stack overflow","body":"<p>Currently the JVM (Hotspot) does not have tail call optimization. So each recursion will consume stack. So you get stackoverflow error. It's better to stick to iterative approach at the moment.</p>\n"}],"owner":{"account_id":1750275,"reputation":186,"user_id":1599512,"accept_rate":81,"display_name":"Tao Wang"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":91,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1643489598,"creation_date":1481736082,"question_id":41148543,"body_markdown":"I&#39;m trying to modify [this code][1] to be a recursive version in order to have executing time efficiency. What the code does is to find all pattern&#39;s first indices in Text and add them to an ArrayList. My code is as below:\r\n\r\n    public boolean search(String text, int n, String pattern, int d) {\r\n        if (n &gt; text.length() || n &lt; d) return true;\r\n        while (d &gt;= 0 &amp;&amp; d &lt; pattern.length() &amp;&amp; n &lt; text.length() &amp;&amp; text.charAt(n) != pattern.charAt(d)) d = next[d];\r\n        if (d == pattern.length()) {\r\n        (***) if (ans == null || !ans.contains(n-d)) ans.add(n-d);                    \r\n              n = n-d;\r\n              d = -1;\r\n        }\r\n        if( n &lt; text.length() &amp;&amp; n &gt;= d ) search(text, n+1, pattern, d+1);\r\n        return false;\r\n    }\r\n\r\nFor-loop version of my code:\r\n\r\n    public void search(String text) {\r\n\tint m = this.pattern.length();\r\n\tint n = text.length();\r\n\tint i, j;\r\n\tfor (i = 0, j = 0; i &lt; n &amp;&amp; j &lt; m; i++) {\r\n\t\twhile (j &gt;= 0 &amp;&amp; text.charAt(i) != this.pattern.charAt(j)) {\r\n\t\t\tj = next[j];\r\n\t\t}\r\n\t\tj++;\r\n\t\tif (j &gt;= m) {\r\n\t\tif (ans == null || !ans.contains(i-m+1) ) ans.add(i-m+1);     \r\n\t\t\tj = 0;\r\n\t\t\ti = i - m + 1;\r\n\t\t}\r\n\t}}\r\n\r\nFor worse case, it&#39;s exponential, that&#39;s why I&#39;m unable to meet time limit.\r\n\r\nArray `next[]` is the same as example code. My questions are:\r\n\r\n1. When argument Text string is getting bigger, say more than 2200 characters, it always raised an `java.lang.StackOverflowError`; specifically in the line of three asterisks inside parenthesis. Even if only `ans.add(n-d)` left, still the same problem. Return value `boolean` is meanless, even if I changed function `return` type to be `void` and remove last line, it&#39;s still the same problem. \r\n\r\n2. Is there any better way to do this?\r\n\r\n\r\n  [1]: http://algs4.cs.princeton.edu/53substring/KMPplus.java.html","title":"String pattern search algorithm stack overflow","body":"<p>I'm trying to modify <a href=\"http://algs4.cs.princeton.edu/53substring/KMPplus.java.html\" rel=\"nofollow noreferrer\">this code</a> to be a recursive version in order to have executing time efficiency. What the code does is to find all pattern's first indices in Text and add them to an ArrayList. My code is as below:</p>\n\n<pre><code>public boolean search(String text, int n, String pattern, int d) {\n    if (n &gt; text.length() || n &lt; d) return true;\n    while (d &gt;= 0 &amp;&amp; d &lt; pattern.length() &amp;&amp; n &lt; text.length() &amp;&amp; text.charAt(n) != pattern.charAt(d)) d = next[d];\n    if (d == pattern.length()) {\n    (***) if (ans == null || !ans.contains(n-d)) ans.add(n-d);                    \n          n = n-d;\n          d = -1;\n    }\n    if( n &lt; text.length() &amp;&amp; n &gt;= d ) search(text, n+1, pattern, d+1);\n    return false;\n}\n</code></pre>\n\n<p>For-loop version of my code:</p>\n\n<pre><code>public void search(String text) {\nint m = this.pattern.length();\nint n = text.length();\nint i, j;\nfor (i = 0, j = 0; i &lt; n &amp;&amp; j &lt; m; i++) {\n    while (j &gt;= 0 &amp;&amp; text.charAt(i) != this.pattern.charAt(j)) {\n        j = next[j];\n    }\n    j++;\n    if (j &gt;= m) {\n    if (ans == null || !ans.contains(i-m+1) ) ans.add(i-m+1);     \n        j = 0;\n        i = i - m + 1;\n    }\n}}\n</code></pre>\n\n<p>For worse case, it's exponential, that's why I'm unable to meet time limit.</p>\n\n<p>Array <code>next[]</code> is the same as example code. My questions are:</p>\n\n<ol>\n<li><p>When argument Text string is getting bigger, say more than 2200 characters, it always raised an <code>java.lang.StackOverflowError</code>; specifically in the line of three asterisks inside parenthesis. Even if only <code>ans.add(n-d)</code> left, still the same problem. Return value <code>boolean</code> is meanless, even if I changed function <code>return</code> type to be <code>void</code> and remove last line, it's still the same problem. </p></li>\n<li><p>Is there any better way to do this?</p></li>\n</ol>\n"},{"tags":["java","curve","poisson"],"comments":[{"owner":{"account_id":16878,"reputation":306143,"user_id":37213,"accept_rate":81,"display_name":"duffymo"},"score":1,"creation_date":1411674619,"post_id":26046889,"comment_id":40803627,"body_markdown":"You need to know what the function for the Poisson distribution is to start: http://en.wikipedia.org/wiki/Poisson_distribution.  If you can use a library, try Apache Commons Math: https://commons.apache.org/proper/commons-math/apidocs/org/apache/commons/math3/distribution/PoissonDistribution.html","body":"You need to know what the function for the Poisson distribution is to start: <a href=\"http://en.wikipedia.org/wiki/Poisson_distribution\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Poisson_distribution</a>.  If you can use a library, try Apache Commons Math: <a href=\"https://commons.apache.org/proper/commons-math/apidocs/org/apache/commons/math3/distribution/PoissonDistribution.html\" rel=\"nofollow noreferrer\">commons.apache.org/proper/commons-math/apidocs/org/apache/&hellip;</a>"},{"owner":{"account_id":159259,"reputation":1041,"user_id":378435,"accept_rate":86,"display_name":"Dixon Steel"},"score":0,"creation_date":1411675403,"post_id":26046889,"comment_id":40804024,"body_markdown":"The function was given as f(K,lambda)=Pr(k)= lambda^k e^lambda/k!; e=natural log 2.71... I don&#39;t know what to do with this, I have no idea what I am doing here. I tried to insert the forumla in a pic and it didn&#39;t take.","body":"The function was given as f(K,lambda)=Pr(k)= lambda^k e^lambda/k!; e=natural log 2.71... I don&#39;t know what to do with this, I have no idea what I am doing here. I tried to insert the forumla in a pic and it didn&#39;t take."},{"owner":{"account_id":16878,"reputation":306143,"user_id":37213,"accept_rate":81,"display_name":"duffymo"},"score":1,"creation_date":1411675505,"post_id":26046889,"comment_id":40804071,"body_markdown":"That agrees with the link I posted.","body":"That agrees with the link I posted."},{"owner":{"account_id":159259,"reputation":1041,"user_id":378435,"accept_rate":86,"display_name":"Dixon Steel"},"score":0,"creation_date":1411675956,"post_id":26046889,"comment_id":40804309,"body_markdown":"The commons math or wiki? Even if it agrees what am I doing wrong here that the data doesn&#39;t follow the curve?","body":"The commons math or wiki? Even if it agrees what am I doing wrong here that the data doesn&#39;t follow the curve?"},{"owner":{"account_id":98491,"reputation":3895,"user_id":266562,"accept_rate":100,"display_name":"Ravi Yenugu"},"score":0,"creation_date":1411676202,"post_id":26046889,"comment_id":40804441,"body_markdown":"Why is the return type `double` instead of `int`? http://stackoverflow.com/questions/1241555/algorithm-to-generate-poisson-and-binomial-random-numbers","body":"Why is the return type <code>double</code> instead of <code>int</code>? <a href=\"http://stackoverflow.com/questions/1241555/algorithm-to-generate-poisson-and-binomial-random-numbers\" title=\"algorithm to generate poisson and binomial random numbers\">stackoverflow.com/questions/1241555/&hellip;</a>"},{"owner":{"account_id":159259,"reputation":1041,"user_id":378435,"accept_rate":86,"display_name":"Dixon Steel"},"score":0,"creation_date":1411676450,"post_id":26046889,"comment_id":40804564,"body_markdown":"Because it looked like all the Poisson data I looked at was doubles, I&#39;m really not sure how this works.","body":"Because it looked like all the Poisson data I looked at was doubles, I&#39;m really not sure how this works."},{"owner":{"account_id":159259,"reputation":1041,"user_id":378435,"accept_rate":86,"display_name":"Dixon Steel"},"score":0,"creation_date":1411678087,"post_id":26046889,"comment_id":40805406,"body_markdown":"So how do I generate my numbers correctly?","body":"So how do I generate my numbers correctly?"},{"owner":{"account_id":79271,"reputation":1988,"user_id":224935,"accept_rate":100,"display_name":"Jay Elston"},"score":0,"creation_date":1411697725,"post_id":26046889,"comment_id":40811202,"body_markdown":"What do you mean &quot;ramped up&quot;? What does your graph look like?","body":"What do you mean &quot;ramped up&quot;? What does your graph look like?"},{"owner":{"account_id":79271,"reputation":1988,"user_id":224935,"accept_rate":100,"display_name":"Jay Elston"},"score":0,"creation_date":1411698234,"post_id":26046889,"comment_id":40811314,"body_markdown":"Also note that this formula is not suitable for large values of lambda. exp(-1000) ~= 10 ^ - 435. You might get some ideas from the answers to this question: http://stackoverflow.com/questions/5657861/generating-poisson-variables-in-c","body":"Also note that this formula is not suitable for large values of lambda. exp(-1000) ~= 10 ^ - 435. You might get some ideas from the answers to this question: <a href=\"http://stackoverflow.com/questions/5657861/generating-poisson-variables-in-c\" title=\"generating poisson variables in c\">stackoverflow.com/questions/5657861/&hellip;</a>"},{"owner":{"account_id":159259,"reputation":1041,"user_id":378435,"accept_rate":86,"display_name":"Dixon Steel"},"score":0,"creation_date":1411732173,"post_id":26046889,"comment_id":40825025,"body_markdown":"My graph start at like 1 and keeps going up as n gets larger and its very jagged. I need to generate this data to test some code.","body":"My graph start at like 1 and keeps going up as n gets larger and its very jagged. I need to generate this data to test some code."},{"owner":{"account_id":16878,"reputation":306143,"user_id":37213,"accept_rate":81,"display_name":"duffymo"},"score":0,"creation_date":1643490923,"post_id":26046889,"comment_id":125355691,"body_markdown":"The implementation returns doubles.  Donald Knute wrote it.  Perhaps you’d like to instruct him.","body":"The implementation returns doubles.  Donald Knute wrote it.  Perhaps you’d like to instruct him."},{"owner":{"account_id":16878,"reputation":306143,"user_id":37213,"accept_rate":81,"display_name":"duffymo"},"score":0,"creation_date":1643491209,"post_id":26046889,"comment_id":125355752,"body_markdown":"Knuth’s algorithm.  Please instruct all of us and provide a better one.  I’d like to see it.","body":"Knuth’s algorithm.  Please instruct all of us and provide a better one.  I’d like to see it."},{"owner":{"account_id":16878,"reputation":306143,"user_id":37213,"accept_rate":81,"display_name":"duffymo"},"score":0,"creation_date":1643491419,"post_id":26046889,"comment_id":125355784,"body_markdown":"How odd that you keep addressing me.  I didn’t ask the question or write the code.  I’ll ask again: write better, correct code and post it as an answer. We’ll all learn and comment.","body":"How odd that you keep addressing me.  I didn’t ask the question or write the code.  I’ll ask again: write better, correct code and post it as an answer. We’ll all learn and comment."},{"owner":{"account_id":16878,"reputation":306143,"user_id":37213,"accept_rate":81,"display_name":"duffymo"},"score":0,"creation_date":1643491572,"post_id":26046889,"comment_id":125355818,"body_markdown":"Great.  Post better code and educate me.","body":"Great.  Post better code and educate me."},{"owner":{"account_id":16878,"reputation":306143,"user_id":37213,"accept_rate":81,"display_name":"duffymo"},"score":0,"creation_date":1643491788,"post_id":26046889,"comment_id":125355867,"body_markdown":"Done. Thank you.  I apologize for my ignorance.","body":"Done. Thank you.  I apologize for my ignorance."}],"answers":[{"tags":[],"owner":{"account_id":79271,"reputation":1988,"user_id":224935,"accept_rate":100,"display_name":"Jay Elston"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1412132503,"creation_date":1412132503,"answer_id":26133455,"question_id":26046889,"body_markdown":"One of the problems you are running into is a basic limitation of how computers represent and perform calculations with [floating point numbers][1].\r\n\r\nA real number is represented on a computer in a form similar to scientific notation:\r\n\r\n&gt; Significant digits &#215; base^exponent\r\n\r\nFor double precision numbers, there are 11 bits used for the exponent and 52 for the &quot;significant digits&quot; portion. Because floating point numbers are _normalized_, the first positive floating point number &gt; 0.0 has a value of about 10^-320 (this is defined as ***Double.MIN_VALUE*** in Java). See [IEEE Standard 754 Floating Point Numbers][2] for a good writeup on this.\r\n\r\nConsider the line of code: \r\n\r\n    double L = Math.exp(-lambda);\r\n\r\nWith a lambda of 1000, _e^-1000_ (which is about 10^-435) is less than ***Double.MIN_VALUE***, and there is no way the computer can represent _e^-1000_ any differently than it can represent _e^-100000_\r\n\r\nYou can solve this problem by noticing that lambda is an &quot;arrival rate&quot;, and you can calculate random samples for shorter intervals and sum them. That is\r\n\r\n    x = p(L);\r\n\r\ncan be computed as\r\n\r\n    x = p(L/2) + p(L/2);\r\n\r\nand larger numbers can be approximated:\r\n\r\n    x = 100 * p(L/100);\r\n\r\nThe [Wikipedia article has on the Poisson distribution][3] has some good pointers to ways to compute Poisson distributions for large values of lambda.\r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Floating_point\r\n  [2]: http://steve.hollasch.net/cgindex/coding/ieeefloat.html\r\n  [3]: http://en.wikipedia.org/wiki/Poisson_distribution","title":"Poisson Distribution in Java (correctness?)","body":"<p>One of the problems you are running into is a basic limitation of how computers represent and perform calculations with <a href=\"https://en.wikipedia.org/wiki/Floating_point\" rel=\"nofollow\">floating point numbers</a>.</p>\n\n<p>A real number is represented on a computer in a form similar to scientific notation:</p>\n\n<blockquote>\n  <p>Significant digits × base^exponent</p>\n</blockquote>\n\n<p>For double precision numbers, there are 11 bits used for the exponent and 52 for the \"significant digits\" portion. Because floating point numbers are <em>normalized</em>, the first positive floating point number > 0.0 has a value of about 10^-320 (this is defined as <strong><em>Double.MIN_VALUE</em></strong> in Java). See <a href=\"http://steve.hollasch.net/cgindex/coding/ieeefloat.html\" rel=\"nofollow\">IEEE Standard 754 Floating Point Numbers</a> for a good writeup on this.</p>\n\n<p>Consider the line of code: </p>\n\n<pre><code>double L = Math.exp(-lambda);\n</code></pre>\n\n<p>With a lambda of 1000, <em>e^-1000</em> (which is about 10^-435) is less than <strong><em>Double.MIN_VALUE</em></strong>, and there is no way the computer can represent <em>e^-1000</em> any differently than it can represent <em>e^-100000</em></p>\n\n<p>You can solve this problem by noticing that lambda is an \"arrival rate\", and you can calculate random samples for shorter intervals and sum them. That is</p>\n\n<pre><code>x = p(L);\n</code></pre>\n\n<p>can be computed as</p>\n\n<pre><code>x = p(L/2) + p(L/2);\n</code></pre>\n\n<p>and larger numbers can be approximated:</p>\n\n<pre><code>x = 100 * p(L/100);\n</code></pre>\n\n<p>The <a href=\"http://en.wikipedia.org/wiki/Poisson_distribution\" rel=\"nofollow\">Wikipedia article has on the Poisson distribution</a> has some good pointers to ways to compute Poisson distributions for large values of lambda.</p>\n"}],"owner":{"account_id":159259,"reputation":1041,"user_id":378435,"accept_rate":86,"display_name":"Dixon Steel"},"comment_count":15,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1433,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":26133455,"answer_count":1,"score":2,"last_activity_date":1643489367,"creation_date":1411674462,"question_id":26046889,"body_markdown":"I have to generate data for a Poisson distribution. My range is n = 1000 up to 100K. Where n is the number of data elements; k varies from 1 to n. It says to use lambda as n/2\r\n\r\nI have never taken stats and have no idea how to get the correct curve here. I can feed it lambda as n/2, but do I vary K from 0-n? I tried this (passing k in as a parameter) and when I graphed the data it ramped up, not a fish tail. What am I doing wrong, or am I doing it correctly? \r\n\r\nThanks\r\n\r\nI have this code in java from Knuth.\r\n\r\n    static double poissonRandomNumber(int lambda) {\r\n\t    double L = Math.exp(-lambda);\r\n\t    int k = 0;\r\n\t    double p = 1;\r\n\t    do {\r\n\t        k = k + 1;\r\n\t        double u = Math.random();\r\n\t        p = p * u;\r\n\t    } while (p &gt; L);\r\n\t    return k - 1;\r\n\t}","title":"Poisson Distribution in Java (correctness?)","body":"<p>I have to generate data for a Poisson distribution. My range is n = 1000 up to 100K. Where n is the number of data elements; k varies from 1 to n. It says to use lambda as n/2</p>\n\n<p>I have never taken stats and have no idea how to get the correct curve here. I can feed it lambda as n/2, but do I vary K from 0-n? I tried this (passing k in as a parameter) and when I graphed the data it ramped up, not a fish tail. What am I doing wrong, or am I doing it correctly? </p>\n\n<p>Thanks</p>\n\n<p>I have this code in java from Knuth.</p>\n\n<pre><code>static double poissonRandomNumber(int lambda) {\n    double L = Math.exp(-lambda);\n    int k = 0;\n    double p = 1;\n    do {\n        k = k + 1;\n        double u = Math.random();\n        p = p * u;\n    } while (p &gt; L);\n    return k - 1;\n}\n</code></pre>\n"},{"tags":["java","minecraft","minecraft-forge"],"comments":[{"owner":{"account_id":15178500,"reputation":4190,"user_id":10952503,"display_name":"Elikill58"},"score":0,"creation_date":1632503072,"post_id":68946321,"comment_id":122519069,"body_markdown":"Does this answer your question? [maven release -&gt; peer not authenticated](https://stackoverflow.com/questions/15691985/maven-release-peer-not-authenticated)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/15691985/maven-release-peer-not-authenticated\">maven release -&gt; peer not authenticated</a>"}],"answers":[{"tags":[],"owner":{"account_id":20083208,"reputation":27,"user_id":14725391,"display_name":"Fake_Name131"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1632520984,"creation_date":1632520984,"answer_id":69321500,"question_id":68946321,"body_markdown":"If you have this same error, go to gradle/wrapper/gradle-wrapper.properties and change `distributionUrl` to a later version (like `https\\://services.gradle.org/distributions/gradle-6.8.3-all.zip`)","title":"Java &quot;peer not authenticated&quot; Error When Decompiling MinecraftForge 1.8.9","body":"<p>If you have this same error, go to gradle/wrapper/gradle-wrapper.properties and change <code>distributionUrl</code> to a later version (like <code>https\\://services.gradle.org/distributions/gradle-6.8.3-all.zip</code>)</p>\n"},{"tags":[],"owner":{"account_id":21517371,"reputation":15,"user_id":16426397,"display_name":"SecretAgent"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1635908203,"creation_date":1635908203,"answer_id":69819159,"question_id":68946321,"body_markdown":"Something that worked for me was my previous JDK was 1.8.0_101, I changed it to 1.8.0_271, that fixed it!","title":"Java &quot;peer not authenticated&quot; Error When Decompiling MinecraftForge 1.8.9","body":"<p>Something that worked for me was my previous JDK was 1.8.0_101, I changed it to 1.8.0_271, that fixed it!</p>\n"},{"tags":[],"owner":{"account_id":10469262,"reputation":19,"user_id":7717662,"display_name":"Daeruin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1643488905,"creation_date":1643488905,"answer_id":70909543,"question_id":68946321,"body_markdown":"Similar to SecretAgent&#39;s answer, I had to update my JDK, but I had to do it not just in my project settings in IntelliJ IDEA but also for Gradle itself in Preferences &gt; Build, Execution, Deployment &gt; Gradle &gt; Gradle JVM.","title":"Java &quot;peer not authenticated&quot; Error When Decompiling MinecraftForge 1.8.9","body":"<p>Similar to SecretAgent's answer, I had to update my JDK, but I had to do it not just in my project settings in IntelliJ IDEA but also for Gradle itself in Preferences &gt; Build, Execution, Deployment &gt; Gradle &gt; Gradle JVM.</p>\n"}],"owner":{"account_id":20083208,"reputation":27,"user_id":14725391,"display_name":"Fake_Name131"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":664,"favorite_count":0,"down_vote_count":2,"up_vote_count":2,"answer_count":3,"score":0,"last_activity_date":1643488905,"creation_date":1630019903,"question_id":68946321,"body_markdown":"When try to run gradle tasks for the [MinecraftForge MDK](https://files.minecraftforge.net/net/minecraftforge/forge/index_1.8.9.html  &quot;Downloads for Minecraft Forge for Minecraft 1.8.9&quot;), I get a ```peer not authenticated``` error.\r\nI am assuming this has to do with my ```cacerts``` file, but I have replaced that with fresh versions from [Java&#39;s JDK](https://www.oracle.com/java/technologies/javase/javase-jdk8-downloads.html  &quot;Java SE Development Kit 8 - Downloads&quot;) and it didn&#39;t help.\r\n\r\nError:\r\n\r\n    &gt; A problem occurred configuring root project &#39;1.8&#39;.\r\n     &gt; Could not resolve all dependencies for configuration &#39;:classpath&#39;.\r\n      &gt; Could not resolve net.minecraftforge.gradle:ForgeGradle:2.1-SNAPSHOT.\r\n      &gt; Required by:\r\n      &gt; :1.8:unspecified\r\n       &gt; Could not resolve net.minecraftforge.gradle:ForgeGradle:2.1-SNAPSHOT.\r\n        &gt; Unable to load Maven meta-data from http://files.minecraftforge.net/maven/net/minecraftforge/gradle/ForgeGradle/2.1-SNAPSHOT/maven-metadata.xml.\r\n         &gt; Could not GET &#39;http://files.minecraftforge.net/maven/net/minecraftforge/gradle/ForgeGradle/2.1-SNAPSHOT/maven-metadata.xml&#39;.\r\n          &gt; peer not authenticated\r\n\r\nI would like to add that the decompilation process previously worked on my machine and it doesn&#39;t work now. This must be a change *I* made because I am still using the same version of Forge.","title":"Java &quot;peer not authenticated&quot; Error When Decompiling MinecraftForge 1.8.9","body":"<p>When try to run gradle tasks for the <a href=\"https://files.minecraftforge.net/net/minecraftforge/forge/index_1.8.9.html\" rel=\"nofollow noreferrer\" title=\"Downloads for Minecraft Forge for Minecraft 1.8.9\">MinecraftForge MDK</a>, I get a <code>peer not authenticated</code> error.\nI am assuming this has to do with my <code>cacerts</code> file, but I have replaced that with fresh versions from <a href=\"https://www.oracle.com/java/technologies/javase/javase-jdk8-downloads.html\" rel=\"nofollow noreferrer\" title=\"Java SE Development Kit 8 - Downloads\">Java's JDK</a> and it didn't help.</p>\n<p>Error:</p>\n<pre><code>&gt; A problem occurred configuring root project '1.8'.\n &gt; Could not resolve all dependencies for configuration ':classpath'.\n  &gt; Could not resolve net.minecraftforge.gradle:ForgeGradle:2.1-SNAPSHOT.\n  &gt; Required by:\n  &gt; :1.8:unspecified\n   &gt; Could not resolve net.minecraftforge.gradle:ForgeGradle:2.1-SNAPSHOT.\n    &gt; Unable to load Maven meta-data from http://files.minecraftforge.net/maven/net/minecraftforge/gradle/ForgeGradle/2.1-SNAPSHOT/maven-metadata.xml.\n     &gt; Could not GET 'http://files.minecraftforge.net/maven/net/minecraftforge/gradle/ForgeGradle/2.1-SNAPSHOT/maven-metadata.xml'.\n      &gt; peer not authenticated\n</code></pre>\n<p>I would like to add that the decompilation process previously worked on my machine and it doesn't work now. This must be a change <em>I</em> made because I am still using the same version of Forge.</p>\n"},{"tags":["java","collections","arraylist"],"comments":[{"owner":{"account_id":71262,"reputation":20764,"user_id":206020,"accept_rate":89,"display_name":"ponzao"},"score":4,"creation_date":1275291091,"post_id":2941997,"comment_id":2997529,"body_markdown":"May I ask why won&#39;t you create a dedicated object to store the data e.g. class Data { private String title; private int a; private int b; ... } and then store those objects in a collection.","body":"May I ask why won&#39;t you create a dedicated object to store the data e.g. class Data { private String title; private int a; private int b; ... } and then store those objects in a collection."},{"owner":{"account_id":112567,"reputation":1607,"user_id":296878,"accept_rate":88,"display_name":"Jan K."},"score":0,"creation_date":1275291095,"post_id":2941997,"comment_id":2997531,"body_markdown":"Try two loops - the outer one to go through the length of the array and the inner one to go through the length of the list.","body":"Try two loops - the outer one to go through the length of the array and the inner one to go through the length of the list."},{"owner":{"account_id":56041,"reputation":2808,"user_id":167885,"accept_rate":92,"display_name":"ukanth"},"score":1,"creation_date":1275291496,"post_id":2941997,"comment_id":2997550,"body_markdown":"@ponzao the data is dynamic , thats the problem","body":"@ponzao the data is dynamic , thats the problem"}],"answers":[{"tags":[],"owner":{"account_id":17450,"reputation":12197,"user_id":39062,"accept_rate":100,"display_name":"Markus Lausberg"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1275291103,"creation_date":1275291103,"answer_id":2942014,"question_id":2941997,"body_markdown":"\r\nCheck whether all lists have the same size.\r\n\r\nPlace the informations in a Matrix (List with List elements, for example) to get the number of lists and size of a list.\r\n\r\nCreate a new Matrix with the rotated size informations. (3x4 to 4x3)\r\n\r\nImplement 2 For loops and place the elements into the new matrix.","title":"How to transpose List&lt;List&gt;?","body":"<p>Check whether all lists have the same size.</p>\n\n<p>Place the informations in a Matrix (List with List elements, for example) to get the number of lists and size of a list.</p>\n\n<p>Create a new Matrix with the rotated size informations. (3x4 to 4x3)</p>\n\n<p>Implement 2 For loops and place the elements into the new matrix.</p>\n"},{"tags":[],"owner":{"account_id":5749,"reputation":17544,"user_id":9425,"accept_rate":80,"display_name":"Midhat"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1275291157,"creation_date":1275291157,"answer_id":2942021,"question_id":2941997,"body_markdown":"This called a transpose operation. A code sample is [here][1], , but will need significant modification as you have an ArrayList of Arrays (what I infer from your question)\r\n\r\n\r\n  [1]: http://www.cs.princeton.edu/introcs/14array/Transpose.java.html","title":"How to transpose List&lt;List&gt;?","body":"<p>This called a transpose operation. A code sample is <a href=\"http://www.cs.princeton.edu/introcs/14array/Transpose.java.html\" rel=\"nofollow noreferrer\">here</a>, , but will need significant modification as you have an ArrayList of Arrays (what I infer from your question)</p>\n"},{"tags":[],"owner":{"account_id":79742,"reputation":19393,"user_id":225899,"accept_rate":85,"display_name":"James P."},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1275292926,"creation_date":1275291171,"answer_id":2942023,"question_id":2941997,"body_markdown":"Do you have a fixed number of ArrayLists and are they of fixed size to begin with? If it is fixed, what you can do is have an int index value and process each ArrayList in turn in the same loop. You can then transfer each value to a temporary ArrayList and then place a reference to this in a final ArrayList for output.\r\n\r\nSounds confusing? Here&#39;s a rough solution:\r\n\r\n    ArrayList tempList = new ArrayList();\r\n    ArrayList outputList = new ArrayList();\r\n    \r\n    for(index=0;index&lt;list1.getsize();index++){\r\n    // Add null checks and other validation here\r\n    tempList.add( list1.get(index) );\r\n    tempList.add( list2.get(index) );\r\n    tempList.add( list3.get(index) );\r\n    outputList.add( tempList );\r\n    }\r\n\r\n","title":"How to transpose List&lt;List&gt;?","body":"<p>Do you have a fixed number of ArrayLists and are they of fixed size to begin with? If it is fixed, what you can do is have an int index value and process each ArrayList in turn in the same loop. You can then transfer each value to a temporary ArrayList and then place a reference to this in a final ArrayList for output.</p>\n\n<p>Sounds confusing? Here's a rough solution:</p>\n\n<pre><code>ArrayList tempList = new ArrayList();\nArrayList outputList = new ArrayList();\n\nfor(index=0;index&lt;list1.getsize();index++){\n// Add null checks and other validation here\ntempList.add( list1.get(index) );\ntempList.add( list2.get(index) );\ntempList.add( list3.get(index) );\noutputList.add( tempList );\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":38343,"reputation":5452,"user_id":109970,"accept_rate":88,"display_name":"mickthompson"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1275291246,"creation_date":1275291246,"answer_id":2942026,"question_id":2941997,"body_markdown":"something like this maybe\r\n\r\n    List&lt;List&lt;String&gt;&gt; list = new ArrayList&lt;List&lt;String&gt;&gt;(firstList.size());\r\n    for(int i = 0; i &lt; firstList.size(); i++) {\r\n       list.add(Arrays.asList(\r\n          firstList.get(i),\r\n          secondList.get(i),\r\n          thirdList.get(i))\r\n       );\r\n    }","title":"How to transpose List&lt;List&gt;?","body":"<p>something like this maybe</p>\n\n<pre><code>List&lt;List&lt;String&gt;&gt; list = new ArrayList&lt;List&lt;String&gt;&gt;(firstList.size());\nfor(int i = 0; i &lt; firstList.size(); i++) {\n   list.add(Arrays.asList(\n      firstList.get(i),\n      secondList.get(i),\n      thirdList.get(i))\n   );\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":36858,"reputation":113744,"user_id":105224,"accept_rate":73,"display_name":"Andreas Dolk"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1275291386,"creation_date":1275291386,"answer_id":2942036,"question_id":2941997,"body_markdown":"The mathematics behind: you need to [transpose][1] the matrix. It&#39;s easier if you use a 2-dimensional array or a &#39;List of Lists&#39;, which is pretty much he same with collections. A List of arrays works too, but it is slightly more confusing.\r\n\r\n[This wikipedia article][2] shows some algorithms for transposition.\r\n\r\n\r\n  [1]: http://en.wikipedia.org/wiki/Transpose#Implementation_of_matrix_transposition_on_computers\r\n  [2]: http://en.wikipedia.org/wiki/In-place_matrix_transposition#Algorithms","title":"How to transpose List&lt;List&gt;?","body":"<p>The mathematics behind: you need to <a href=\"http://en.wikipedia.org/wiki/Transpose#Implementation_of_matrix_transposition_on_computers\" rel=\"nofollow noreferrer\">transpose</a> the matrix. It's easier if you use a 2-dimensional array or a 'List of Lists', which is pretty much he same with collections. A List of arrays works too, but it is slightly more confusing.</p>\n\n<p><a href=\"http://en.wikipedia.org/wiki/In-place_matrix_transposition#Algorithms\" rel=\"nofollow noreferrer\">This wikipedia article</a> shows some algorithms for transposition.</p>\n"},{"tags":[],"owner":{"account_id":142896,"reputation":35109,"user_id":350890,"accept_rate":100,"display_name":"Peter Tillemans"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1275291409,"creation_date":1275291409,"answer_id":2942038,"question_id":2941997,"body_markdown":"If it is for a datamigration task, you might consider your friendly spreadsheet if the size is not too big.\r\n\r\nFor matrix manipulation stuff there is the jScience library which has matrix support. For just transposing a metrix this would be overkill, but it depends what needs to be done with it.","title":"How to transpose List&lt;List&gt;?","body":"<p>If it is for a datamigration task, you might consider your friendly spreadsheet if the size is not too big.</p>\n\n<p>For matrix manipulation stuff there is the jScience library which has matrix support. For just transposing a metrix this would be overkill, but it depends what needs to be done with it.</p>\n"},{"tags":[],"owner":{"account_id":102991,"reputation":378282,"user_id":276101,"accept_rate":67,"display_name":"polygenelubricants"},"down_vote_count":1,"up_vote_count":20,"is_accepted":true,"score":19,"last_activity_date":1275291763,"creation_date":1275291448,"answer_id":2942044,"question_id":2941997,"body_markdown":"This is called transposition. The following snippet does what you need:\r\n\r\n    import java.util.*;\r\n    public class ListTranspose {\r\n    \tpublic static void main(String[] args) {\r\n    \t\tObject[][] data = {\r\n    \t\t\t{ &quot;Title&quot;, &quot;Data1&quot;, &quot;Data2&quot;, &quot;Data3&quot; },\r\n    \t\t\t{ &quot;A&quot;, 2, 3, 4 },\r\n    \t\t\t{ &quot;B&quot;, 3, 5, 7 },\r\n    \t\t};\r\n    \t\tList&lt;List&lt;Object&gt;&gt; table = new ArrayList&lt;List&lt;Object&gt;&gt;();\r\n    \t\tfor (Object[] row : data) {\r\n    \t\t\ttable.add(Arrays.asList(row));\r\n    \t\t}\r\n    \t\tSystem.out.println(table); //  [[Title, Data1, Data2, Data3],\r\n    \t\t                           //   [A, 2, 3, 4],\r\n    \t\t                           //   [B, 3, 5, 7]]&quot;\r\n    \t\ttable = transpose(table);\r\n    \t\tSystem.out.println(table); //  [[Title, A, B],\r\n    \t\t                           //   [Data1, 2, 3],\r\n    \t\t                           //   [Data2, 3, 5],\r\n    \t\t                           //   [Data3, 4, 7]]\r\n    \t}\r\n    \tstatic &lt;T&gt; List&lt;List&lt;T&gt;&gt; transpose(List&lt;List&lt;T&gt;&gt; table) {\r\n    \t\tList&lt;List&lt;T&gt;&gt; ret = new ArrayList&lt;List&lt;T&gt;&gt;();\r\n    \t\tfinal int N = table.get(0).size();\r\n    \t\tfor (int i = 0; i &lt; N; i++) {\r\n    \t\t\tList&lt;T&gt; col = new ArrayList&lt;T&gt;();\r\n    \t\t\tfor (List&lt;T&gt; row : table) {\r\n    \t\t\t\tcol.add(row.get(i));\r\n    \t\t\t}\r\n    \t\t\tret.add(col);\r\n    \t\t}\r\n    \t\treturn ret;\r\n    \t}\r\n    }\r\n\r\n### See also\r\n\r\n* [Wikipedia/Transpose](http://en.wikipedia.org/wiki/Transpose)\r\n\r\n","title":"How to transpose List&lt;List&gt;?","body":"<p>This is called transposition. The following snippet does what you need:</p>\n\n<pre><code>import java.util.*;\npublic class ListTranspose {\n    public static void main(String[] args) {\n        Object[][] data = {\n            { \"Title\", \"Data1\", \"Data2\", \"Data3\" },\n            { \"A\", 2, 3, 4 },\n            { \"B\", 3, 5, 7 },\n        };\n        List&lt;List&lt;Object&gt;&gt; table = new ArrayList&lt;List&lt;Object&gt;&gt;();\n        for (Object[] row : data) {\n            table.add(Arrays.asList(row));\n        }\n        System.out.println(table); //  [[Title, Data1, Data2, Data3],\n                                   //   [A, 2, 3, 4],\n                                   //   [B, 3, 5, 7]]\"\n        table = transpose(table);\n        System.out.println(table); //  [[Title, A, B],\n                                   //   [Data1, 2, 3],\n                                   //   [Data2, 3, 5],\n                                   //   [Data3, 4, 7]]\n    }\n    static &lt;T&gt; List&lt;List&lt;T&gt;&gt; transpose(List&lt;List&lt;T&gt;&gt; table) {\n        List&lt;List&lt;T&gt;&gt; ret = new ArrayList&lt;List&lt;T&gt;&gt;();\n        final int N = table.get(0).size();\n        for (int i = 0; i &lt; N; i++) {\n            List&lt;T&gt; col = new ArrayList&lt;T&gt;();\n            for (List&lt;T&gt; row : table) {\n                col.add(row.get(i));\n            }\n            ret.add(col);\n        }\n        return ret;\n    }\n}\n</code></pre>\n\n<h3>See also</h3>\n\n<ul>\n<li><a href=\"http://en.wikipedia.org/wiki/Transpose\" rel=\"noreferrer\">Wikipedia/Transpose</a></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":36068,"reputation":5313,"user_id":102641,"accept_rate":83,"display_name":"Fergal"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1275291626,"creation_date":1275291626,"answer_id":2942067,"question_id":2941997,"body_markdown":"\r\nThe technique is called transposing. Example of an implementation.\r\n\r\n    public static MyObject [][] transpose(MyObject [][] m){\r\n        int r = m.length;\r\n        int c = m[r].length;\r\n        MyObject [][] t = new MyObject[c][r];\r\n        for(int i = 0; i &lt; r; ++i){\r\n            for(int j = 0; j &lt; c; ++j){\r\n                t[j][i] = m[i][j];\r\n            }\r\n        }\r\n        return t;\r\n    }","title":"How to transpose List&lt;List&gt;?","body":"<p>The technique is called transposing. Example of an implementation.</p>\n\n<pre><code>public static MyObject [][] transpose(MyObject [][] m){\n    int r = m.length;\n    int c = m[r].length;\n    MyObject [][] t = new MyObject[c][r];\n    for(int i = 0; i &lt; r; ++i){\n        for(int j = 0; j &lt; c; ++j){\n            t[j][i] = m[i][j];\n        }\n    }\n    return t;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1361091,"reputation":5961,"user_id":1298461,"accept_rate":89,"display_name":"KIC"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1455818816,"creation_date":1452944378,"answer_id":34826503,"question_id":2941997,"body_markdown":"Since `get(index)` could harm your performance dramatically i.e. for big linked list I would recommend using @polygenelubricants solution but with an iterator approach. \r\n\r\n    public static &lt;T&gt; List&lt;List&lt;T&gt;&gt; transpose(List&lt;List&lt;T&gt;&gt; table) {\r\n            List&lt;List&lt;T&gt;&gt; ret = new ArrayList&lt;List&lt;T&gt;&gt;();\r\n            final int N = table.stream().mapToInt(l -&gt; l.size()).max().orElse(-1);\r\n            Iterator[] iters = new Iterator[table.size()];\r\n    \r\n            int i=0;\r\n            for (List&lt;T&gt; col : table) {\r\n                iters[i++] = col.iterator();\r\n            }\r\n    \r\n            for (i = 0; i &lt; N; i++) {\r\n                List&lt;T&gt; col = new ArrayList&lt;T&gt;(iters.length);\r\n                for (Iterator it : iters) {\r\n                    col.add(it.hasNext() ? (T) it.next() : null);\r\n                }\r\n                ret.add(col);\r\n            }\r\n            return ret;\r\n        }","title":"How to transpose List&lt;List&gt;?","body":"<p>Since <code>get(index)</code> could harm your performance dramatically i.e. for big linked list I would recommend using @polygenelubricants solution but with an iterator approach. </p>\n\n<pre><code>public static &lt;T&gt; List&lt;List&lt;T&gt;&gt; transpose(List&lt;List&lt;T&gt;&gt; table) {\n        List&lt;List&lt;T&gt;&gt; ret = new ArrayList&lt;List&lt;T&gt;&gt;();\n        final int N = table.stream().mapToInt(l -&gt; l.size()).max().orElse(-1);\n        Iterator[] iters = new Iterator[table.size()];\n\n        int i=0;\n        for (List&lt;T&gt; col : table) {\n            iters[i++] = col.iterator();\n        }\n\n        for (i = 0; i &lt; N; i++) {\n            List&lt;T&gt; col = new ArrayList&lt;T&gt;(iters.length);\n            for (Iterator it : iters) {\n                col.add(it.hasNext() ? (T) it.next() : null);\n            }\n            ret.add(col);\n        }\n        return ret;\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11478022,"reputation":101,"user_id":8413007,"display_name":"Nick Micheal"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1501778935,"creation_date":1501778935,"answer_id":45490275,"question_id":2941997,"body_markdown":"Here is my solution.Thanks to @jpaugh&#39;s code.I hope this will help you.^_^\r\n\r\n    public static &lt;T&gt; List&lt;List&lt;T&gt;&gt; transpose(List&lt;List&lt;T&gt;&gt; list) {\r\n       final int N = list.stream().mapToInt(l -&gt; l.size()).max().orElse(-1);\r\n       List&lt;Iterator&lt;T&gt;&gt; iterList = list.stream().map(it-&gt;it.iterator()).collect(Collectors.toList());\r\n       return IntStream.range(0, N)\r\n           .mapToObj(n -&gt; iterList.stream()\r\n\t       .filter(it -&gt; it.hasNext())\r\n\t       .map(m -&gt; m.next())\r\n\t       .collect(Collectors.toList()))\r\n       .collect(Collectors.toList());\r\n    }","title":"How to transpose List&lt;List&gt;?","body":"<p>Here is my solution.Thanks to @jpaugh's code.I hope this will help you.^_^</p>\n\n<pre><code>public static &lt;T&gt; List&lt;List&lt;T&gt;&gt; transpose(List&lt;List&lt;T&gt;&gt; list) {\n   final int N = list.stream().mapToInt(l -&gt; l.size()).max().orElse(-1);\n   List&lt;Iterator&lt;T&gt;&gt; iterList = list.stream().map(it-&gt;it.iterator()).collect(Collectors.toList());\n   return IntStream.range(0, N)\n       .mapToObj(n -&gt; iterList.stream()\n       .filter(it -&gt; it.hasNext())\n       .map(m -&gt; m.next())\n       .collect(Collectors.toList()))\n   .collect(Collectors.toList());\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16186137,"reputation":31,"user_id":11686225,"display_name":"Zero"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1614445816,"creation_date":1614445816,"answer_id":66401340,"question_id":2941997,"body_markdown":"Not a fast way, neither the cleanest one, but more of kotlin-ish code.\r\n\r\n    fun &lt;T&gt; List&lt;List&lt;T&gt;&gt;.transpose(): List&lt;List&lt;T&gt;&gt; {\r\n        val result = (first().indices).map { mutableListOf&lt;T&gt;() }.toMutableList()\r\n        forEach { list -&gt; result.zip(list).forEach { it.first.add(it.second) } }\r\n        return result\r\n    }\r\n\r\nthe first line creates a M size &#39;result&#39; list (for NxM original matrix),                     while the second line =&gt; \r\n1. iterates through all the lists &#39;a&#39; in first (each list size m)\r\n2. append i-th item of a to the i-th list in result. \r\n","title":"How to transpose List&lt;List&gt;?","body":"<p>Not a fast way, neither the cleanest one, but more of kotlin-ish code.</p>\n<pre><code>fun &lt;T&gt; List&lt;List&lt;T&gt;&gt;.transpose(): List&lt;List&lt;T&gt;&gt; {\n    val result = (first().indices).map { mutableListOf&lt;T&gt;() }.toMutableList()\n    forEach { list -&gt; result.zip(list).forEach { it.first.add(it.second) } }\n    return result\n}\n</code></pre>\n<p>the first line creates a M size 'result' list (for NxM original matrix),                     while the second line =&gt;</p>\n<ol>\n<li>iterates through all the lists 'a' in first (each list size m)</li>\n<li>append i-th item of a to the i-th list in result.</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":49078,"reputation":44646,"user_id":145989,"accept_rate":59,"display_name":"Ondra Žižka"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1643488366,"creation_date":1643487939,"answer_id":70909437,"question_id":2941997,"body_markdown":"In Kotlin, a simple transposing would look like:\r\n\r\n\r\n       fun transpose( matrix: List&lt;List&lt;String&gt;&gt; ) {\r\n            return matrix.first().forEachIndexed { \r\n                i, _ -&gt; matrix.map { it.getOrNull(i) }\r\n            }\r\n       }\r\n\r\nLegend:\r\n\r\n* `forEachIndexed` iterates over indexes of the first row.\r\n* Then, each such index is mapped to the items of all rows on that index. `getOrNull` handles the missing items in shorter rows.\r\n* That&#39;s returned by `map()` as a `List`.\r\n","title":"How to transpose List&lt;List&gt;?","body":"<p>In Kotlin, a simple transposing would look like:</p>\n<pre><code>   fun transpose( matrix: List&lt;List&lt;String&gt;&gt; ) {\n        return matrix.first().forEachIndexed { \n            i, _ -&gt; matrix.map { it.getOrNull(i) }\n        }\n   }\n</code></pre>\n<p>Legend:</p>\n<ul>\n<li><code>forEachIndexed</code> iterates over indexes of the first row.</li>\n<li>Then, each such index is mapped to the items of all rows on that index. <code>getOrNull</code> handles the missing items in shorter rows.</li>\n<li>That's returned by <code>map()</code> as a <code>List</code>.</li>\n</ul>\n"}],"owner":{"account_id":56041,"reputation":2808,"user_id":167885,"accept_rate":92,"display_name":"ukanth"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":17168,"favorite_count":0,"down_vote_count":0,"up_vote_count":20,"accepted_answer_id":2942044,"answer_count":12,"score":20,"last_activity_date":1643488366,"creation_date":1275290841,"question_id":2941997,"body_markdown":"I have a following ArrayList,\r\n\r\n    [Title,Data1,Data2,Data3]\r\n    [A,2,3,4]\r\n    [B,3,5,7]\r\n\r\nAnd I would like to convert this one like this,\r\n\r\n    [Title,A,B]\r\n    [Data1,2,3]\r\n    [Data2,3,5]\r\n    [Data3,4,7]\r\n\r\nI&#39;m bit confused with the approach. Any hint would be much appreciated.\r\n\r\nThanks.","title":"How to transpose List&lt;List&gt;?","body":"<p>I have a following ArrayList,</p>\n\n<pre><code>[Title,Data1,Data2,Data3]\n[A,2,3,4]\n[B,3,5,7]\n</code></pre>\n\n<p>And I would like to convert this one like this,</p>\n\n<pre><code>[Title,A,B]\n[Data1,2,3]\n[Data2,3,5]\n[Data3,4,7]\n</code></pre>\n\n<p>I'm bit confused with the approach. Any hint would be much appreciated.</p>\n\n<p>Thanks.</p>\n"},{"tags":["java","spring-mvc","websocket"],"comments":[{"owner":{"account_id":91954,"reputation":2681,"user_id":252243,"display_name":"Sean Carroll"},"score":0,"creation_date":1477693042,"post_id":40313760,"comment_id":67885050,"body_markdown":"Could you provide your configuration as well? Initial thought is that the issue is with using Transactional annotation on your class. When you use @Transactional spring will provide a proxy and assuming you aren&#39;t using CGLIB the JDK dynamic proxy will not be compatible with with your concrete PlaceRepository","body":"Could you provide your configuration as well? Initial thought is that the issue is with using Transactional annotation on your class. When you use @Transactional spring will provide a proxy and assuming you aren&#39;t using CGLIB the JDK dynamic proxy will not be compatible with with your concrete PlaceRepository"},{"owner":{"account_id":7427498,"reputation":51,"user_id":5649546,"accept_rate":80,"display_name":"Andrey K"},"score":0,"creation_date":1477739651,"post_id":40313760,"comment_id":67893156,"body_markdown":"As you requested, i include config files.","body":"As you requested, i include config files."}],"answers":[{"tags":[],"owner":{"account_id":7427498,"reputation":51,"user_id":5649546,"accept_rate":80,"display_name":"Andrey K"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1477753779,"creation_date":1477753478,"answer_id":40320434,"question_id":40313760,"body_markdown":"So, looks like i found the right way. I found it in [Spring websocket documentation][1].\nThere are some steps what i did:\n\n1. I put in type-level annotation:\n\n    @ServerEndpoint(value = &quot;/WebsocketHome/actions&quot;, configurator = SpringConfigurator.class)\n\n2. I added @Service and @Controller to my websocket classes and &quot;context:component-scan&quot; path to my app-context.xml file so that Spring can find corresponding beans.\n\n3. I added the &quot;spring-websocket&quot; dependency in my pom.xml (i use maven)\n\nMaybe it is not the right way, but it is works fine for me.\n\n  [1]: https://spring.io/blog/2013/05/23/spring-framework-4-0-m1-websocket-support","title":"@ServerEndpoint and Spring MVC injection","body":"<p>So, looks like i found the right way. I found it in <a href=\"https://spring.io/blog/2013/05/23/spring-framework-4-0-m1-websocket-support\" rel=\"nofollow noreferrer\">Spring websocket documentation</a>.\nThere are some steps what i did:</p>\n<ol>\n<li><p>I put in type-level annotation:</p>\n<p>@ServerEndpoint(value = &quot;/WebsocketHome/actions&quot;, configurator = SpringConfigurator.class)</p>\n</li>\n<li><p>I added @Service and @Controller to my websocket classes and &quot;context:component-scan&quot; path to my app-context.xml file so that Spring can find corresponding beans.</p>\n</li>\n<li><p>I added the &quot;spring-websocket&quot; dependency in my pom.xml (i use maven)</p>\n</li>\n</ol>\n<p>Maybe it is not the right way, but it is works fine for me.</p>\n"},{"tags":[],"owner":{"account_id":2870445,"reputation":1,"user_id":2463923,"display_name":"Skidus"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1643488321,"creation_date":1643488321,"answer_id":70909485,"question_id":40313760,"body_markdown":"@Today jan 31&#39; 2022 Just Add &quot;spring-websocket&quot; dependency","title":"@ServerEndpoint and Spring MVC injection","body":"<p>@Today jan 31' 2022 Just Add &quot;spring-websocket&quot; dependency</p>\n"}],"owner":{"account_id":7427498,"reputation":51,"user_id":5649546,"accept_rate":80,"display_name":"Andrey K"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1835,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":40320434,"answer_count":2,"score":1,"last_activity_date":1643488321,"creation_date":1477692039,"question_id":40313760,"body_markdown":"I am trying to inject annotated by @Repository class in @ServerEndpoint class. But when i am trying to call repository method it is return null. Another injected bean from this package is working fine.\r\n\r\n    @ApplicationScoped\r\n    @ServerEndpoint(&quot;/WebsocketHome/actions&quot;)\r\n    public class WebSocketServer {\r\n    private static final Logger LOG = Logger.getLogger(WebSocketServer.class);\r\n\r\n    @Inject\r\n    private SessionHandler sessionHandler;\r\n\r\n    @Inject\r\n    private PlaceRepository placeRepository;\r\n\r\n    @OnMessage\r\n    public void handleMessage(String message, Session session) {\r\n\r\n        JSONParser jsonParser = new JSONParser();\r\n\r\n        try {\r\n            JSONObject jsonObject = (JSONObject) jsonParser.parse(message);\r\n\r\n            if (&quot;getRooms&quot;.equals(jsonObject.get(&quot;action&quot;))) {\r\n                List&lt;Place&gt; places = this.placeRepository.getAllPlaces(); //error is here               \r\n            }\r\n            } catch (ParseException e) {\r\n                LOG.error(e.getMessage());\r\n            }\r\n    .....\r\nThis is repository class:\r\n\r\n    @Repository\r\n    @Transactional\r\n    public class PlaceRepository {\r\n    \r\n        @Autowired\r\n        private SessionFactory sessionFactory;\r\n    \r\n        @SuppressWarnings(&quot;unchecked&quot;)\r\n        public List&lt;Place&gt; getAllPlaces() {\r\n            return this.sessionFactory.getCurrentSession().createQuery(&quot;from Place place&quot;).list();\r\n        }\r\n    }\r\nweb.xml:\r\n    &lt;!DOCTYPE web-app PUBLIC\r\n            &quot;-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN&quot;\r\n            &quot;http://java.sun.com/dtd/web-app_2_3.dtd&quot; &gt;    \r\n    \r\n    &lt;web-app xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n             xmlns=&quot;http://java.sun.com/xml/ns/javaee&quot;\r\n             xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/javaee\r\n             http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd&quot;\r\n             version=&quot;3.0&quot;&gt;\r\n        &lt;display-name&gt;Archetype Created Web Application&lt;/display-name&gt;\r\n    \r\n        &lt;context-param&gt;\r\n            &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;\r\n            &lt;param-value&gt;/WEB-INF/application-context.xml&lt;/param-value&gt;\r\n        &lt;/context-param&gt;\r\n    \r\n        &lt;listener&gt;\r\n            &lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;/listener-class&gt;\r\n        &lt;/listener&gt;\r\n    \r\n        &lt;servlet&gt;\r\n            &lt;servlet-name&gt;mvc-dispatcher&lt;/servlet-name&gt;\r\n            &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;\r\n            &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;\r\n        &lt;/servlet&gt;\r\n    \r\n        &lt;servlet-mapping&gt;\r\n            &lt;servlet-name&gt;mvc-dispatcher&lt;/servlet-name&gt;\r\n            &lt;url-pattern&gt;/&lt;/url-pattern&gt;\r\n        &lt;/servlet-mapping&gt;\r\n    \r\n        &lt;filter&gt;\r\n            &lt;filter-name&gt;springSecurityFilterChain&lt;/filter-name&gt;\r\n            &lt;filter-class&gt;org.springframework.web.filter.DelegatingFilterProxy&lt;/filter-class&gt;\r\n        &lt;/filter&gt;\r\n    \r\n        &lt;filter-mapping&gt;\r\n            &lt;filter-name&gt;springSecurityFilterChain&lt;/filter-name&gt;\r\n            &lt;url-pattern&gt;/*&lt;/url-pattern&gt;\r\n        &lt;/filter-mapping&gt;\r\n    \r\n    &lt;/web-app&gt;\r\n\r\napp-context.xml:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;\r\n           xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n           xmlns:tx=&quot;http://www.springframework.org/schema/tx&quot;\r\n           xmlns:context=&quot;http://www.springframework.org/schema/context&quot;\r\n           xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd\r\n           http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx.xsd\r\n           http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd&quot;&gt;\r\n    \r\n        &lt;context:property-placeholder location=&quot;classpath:application.properties&quot; system-properties-mode=&quot;ENVIRONMENT&quot;/&gt;\r\n        &lt;context:component-scan base-package=&quot;com.hms.repository&quot;/&gt;\r\n        &lt;context:component-scan base-package=&quot;com.hms.utils&quot;/&gt;\r\n        &lt;tx:annotation-driven transaction-manager=&quot;txManager&quot;/&gt;\r\n    \r\n       &lt;import resource=&quot;security-context.xml&quot;/&gt;\r\n    \r\n        &lt;bean id=&quot;txManager&quot; class=&quot;org.springframework.orm.hibernate5.HibernateTransactionManager&quot;&gt;\r\n            &lt;property name=&quot;sessionFactory&quot; ref=&quot;sessionFactory&quot; /&gt;\r\n        &lt;/bean&gt;\r\n    \r\n        &lt;bean id=&quot;dataSource&quot; class=&quot;org.springframework.jdbc.datasource.DriverManagerDataSource&quot;&gt;\r\n            &lt;property name=&quot;driverClassName&quot; value=&quot;${db.driverClassName}&quot; /&gt;\r\n            &lt;property name=&quot;url&quot; value=&quot;${db.url}&quot; /&gt;\r\n            &lt;property name=&quot;username&quot; value=&quot;${db.username}&quot; /&gt;\r\n            &lt;property name=&quot;password&quot; value=&quot;${db.password}&quot; /&gt;\r\n            &lt;!--\r\n            &lt;property name=&quot;initialSize&quot; value=&quot;5&quot; /&gt;\r\n            &lt;property name=&quot;maxActive&quot; value=&quot;10&quot; /&gt;\r\n            &lt;property name=&quot;maxIdle&quot; value=&quot;5&quot; /&gt;\r\n            &lt;property name=&quot;minIdle&quot; value=&quot;2&quot; /&gt;\r\n            --&gt;\r\n        &lt;/bean&gt;\r\n    \r\n        &lt;bean id=&quot;sessionFactory&quot;\r\n              class=&quot;org.springframework.orm.hibernate5.LocalSessionFactoryBean&quot;&gt;\r\n            &lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot; /&gt;\r\n            &lt;property name=&quot;configLocation&quot; value=&quot;classpath:hibernate.cfg.xml&quot;/&gt;\r\n            &lt;property name=&quot;hibernateProperties&quot;&gt;\r\n                &lt;props&gt;\r\n                    &lt;prop key=&quot;hibernate.dialect&quot;&gt;${db.dialect}&lt;/prop&gt;\r\n                    &lt;prop key=&quot;hibernate.show_sql&quot;&gt;true&lt;/prop&gt;\r\n                    &lt;prop key=&quot;hbm2ddl.auto&quot;&gt;${db.hbm2ddl.auto}&lt;/prop&gt;\r\n                &lt;/props&gt;\r\n            &lt;/property&gt;\r\n        &lt;/bean&gt;\r\n    &lt;/beans&gt;\r\n\r\nError appears only on calling of @OnMessage method.\r\nAll junit @Tests of repository class returns fine results. \r\nWhat is wrong in my code?\r\nSorry for my english.\r\n\r\nUPD:\r\n\r\nIt seems, that problem is in SessionFactory dependency because test method, that i add in @Repository: \r\n\r\n    public String testWS() {\r\n            return &quot;Test is ok!&quot;;\r\n        }\r\n\r\nreturns fine result.\r\n","title":"@ServerEndpoint and Spring MVC injection","body":"<p>I am trying to inject annotated by @Repository class in @ServerEndpoint class. But when i am trying to call repository method it is return null. Another injected bean from this package is working fine.</p>\n\n<pre><code>@ApplicationScoped\n@ServerEndpoint(\"/WebsocketHome/actions\")\npublic class WebSocketServer {\nprivate static final Logger LOG = Logger.getLogger(WebSocketServer.class);\n\n@Inject\nprivate SessionHandler sessionHandler;\n\n@Inject\nprivate PlaceRepository placeRepository;\n\n@OnMessage\npublic void handleMessage(String message, Session session) {\n\n    JSONParser jsonParser = new JSONParser();\n\n    try {\n        JSONObject jsonObject = (JSONObject) jsonParser.parse(message);\n\n        if (\"getRooms\".equals(jsonObject.get(\"action\"))) {\n            List&lt;Place&gt; places = this.placeRepository.getAllPlaces(); //error is here               \n        }\n        } catch (ParseException e) {\n            LOG.error(e.getMessage());\n        }\n.....\n</code></pre>\n\n<p>This is repository class:</p>\n\n<pre><code>@Repository\n@Transactional\npublic class PlaceRepository {\n\n    @Autowired\n    private SessionFactory sessionFactory;\n\n    @SuppressWarnings(\"unchecked\")\n    public List&lt;Place&gt; getAllPlaces() {\n        return this.sessionFactory.getCurrentSession().createQuery(\"from Place place\").list();\n    }\n}\n</code></pre>\n\n<p>web.xml:\n        </p>\n\n<pre><code>&lt;web-app xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n         xmlns=\"http://java.sun.com/xml/ns/javaee\"\n         xsi:schemaLocation=\"http://java.sun.com/xml/ns/javaee\n         http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd\"\n         version=\"3.0\"&gt;\n    &lt;display-name&gt;Archetype Created Web Application&lt;/display-name&gt;\n\n    &lt;context-param&gt;\n        &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;\n        &lt;param-value&gt;/WEB-INF/application-context.xml&lt;/param-value&gt;\n    &lt;/context-param&gt;\n\n    &lt;listener&gt;\n        &lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;/listener-class&gt;\n    &lt;/listener&gt;\n\n    &lt;servlet&gt;\n        &lt;servlet-name&gt;mvc-dispatcher&lt;/servlet-name&gt;\n        &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;\n        &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;\n    &lt;/servlet&gt;\n\n    &lt;servlet-mapping&gt;\n        &lt;servlet-name&gt;mvc-dispatcher&lt;/servlet-name&gt;\n        &lt;url-pattern&gt;/&lt;/url-pattern&gt;\n    &lt;/servlet-mapping&gt;\n\n    &lt;filter&gt;\n        &lt;filter-name&gt;springSecurityFilterChain&lt;/filter-name&gt;\n        &lt;filter-class&gt;org.springframework.web.filter.DelegatingFilterProxy&lt;/filter-class&gt;\n    &lt;/filter&gt;\n\n    &lt;filter-mapping&gt;\n        &lt;filter-name&gt;springSecurityFilterChain&lt;/filter-name&gt;\n        &lt;url-pattern&gt;/*&lt;/url-pattern&gt;\n    &lt;/filter-mapping&gt;\n\n&lt;/web-app&gt;\n</code></pre>\n\n<p>app-context.xml:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\n       xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n       xmlns:tx=\"http://www.springframework.org/schema/tx\"\n       xmlns:context=\"http://www.springframework.org/schema/context\"\n       xsi:schemaLocation=\"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd\n       http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx.xsd\n       http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd\"&gt;\n\n    &lt;context:property-placeholder location=\"classpath:application.properties\" system-properties-mode=\"ENVIRONMENT\"/&gt;\n    &lt;context:component-scan base-package=\"com.hms.repository\"/&gt;\n    &lt;context:component-scan base-package=\"com.hms.utils\"/&gt;\n    &lt;tx:annotation-driven transaction-manager=\"txManager\"/&gt;\n\n   &lt;import resource=\"security-context.xml\"/&gt;\n\n    &lt;bean id=\"txManager\" class=\"org.springframework.orm.hibernate5.HibernateTransactionManager\"&gt;\n        &lt;property name=\"sessionFactory\" ref=\"sessionFactory\" /&gt;\n    &lt;/bean&gt;\n\n    &lt;bean id=\"dataSource\" class=\"org.springframework.jdbc.datasource.DriverManagerDataSource\"&gt;\n        &lt;property name=\"driverClassName\" value=\"${db.driverClassName}\" /&gt;\n        &lt;property name=\"url\" value=\"${db.url}\" /&gt;\n        &lt;property name=\"username\" value=\"${db.username}\" /&gt;\n        &lt;property name=\"password\" value=\"${db.password}\" /&gt;\n        &lt;!--\n        &lt;property name=\"initialSize\" value=\"5\" /&gt;\n        &lt;property name=\"maxActive\" value=\"10\" /&gt;\n        &lt;property name=\"maxIdle\" value=\"5\" /&gt;\n        &lt;property name=\"minIdle\" value=\"2\" /&gt;\n        --&gt;\n    &lt;/bean&gt;\n\n    &lt;bean id=\"sessionFactory\"\n          class=\"org.springframework.orm.hibernate5.LocalSessionFactoryBean\"&gt;\n        &lt;property name=\"dataSource\" ref=\"dataSource\" /&gt;\n        &lt;property name=\"configLocation\" value=\"classpath:hibernate.cfg.xml\"/&gt;\n        &lt;property name=\"hibernateProperties\"&gt;\n            &lt;props&gt;\n                &lt;prop key=\"hibernate.dialect\"&gt;${db.dialect}&lt;/prop&gt;\n                &lt;prop key=\"hibernate.show_sql\"&gt;true&lt;/prop&gt;\n                &lt;prop key=\"hbm2ddl.auto\"&gt;${db.hbm2ddl.auto}&lt;/prop&gt;\n            &lt;/props&gt;\n        &lt;/property&gt;\n    &lt;/bean&gt;\n&lt;/beans&gt;\n</code></pre>\n\n<p>Error appears only on calling of @OnMessage method.\nAll junit @Tests of repository class returns fine results. \nWhat is wrong in my code?\nSorry for my english.</p>\n\n<p>UPD:</p>\n\n<p>It seems, that problem is in SessionFactory dependency because test method, that i add in @Repository: </p>\n\n<pre><code>public String testWS() {\n        return \"Test is ok!\";\n    }\n</code></pre>\n\n<p>returns fine result.</p>\n"},{"tags":["java","ruby","encryption"],"comments":[{"owner":{"account_id":17592368,"reputation":13891,"user_id":12763954,"display_name":"Olivier"},"score":0,"creation_date":1643476514,"post_id":70907748,"comment_id":125352210,"body_markdown":"You say &quot;encrypt&quot; but call &quot;encrypt_and_sign&quot;.","body":"You say &quot;encrypt&quot; but call &quot;encrypt_and_sign&quot;."},{"owner":{"account_id":17592368,"reputation":13891,"user_id":12763954,"display_name":"Olivier"},"score":0,"creation_date":1643476593,"post_id":70907748,"comment_id":125352229,"body_markdown":"Additionally we don&#39;t know what IV you used.","body":"Additionally we don&#39;t know what IV you used."},{"owner":{"account_id":288696,"reputation":91230,"user_id":589259,"accept_rate":82,"display_name":"Maarten Bodewes"},"score":0,"creation_date":1643480299,"post_id":70907748,"comment_id":125353205,"body_markdown":"@Olivier That gets hidden by the function, and there is only `encrypt_and_sign` it seems; the MAC part seems optional. Serhi, I don&#39;t see you extracting the various parts of the base 64 encoded string in Java, where&#39;s that happening?","body":"@Olivier That gets hidden by the function, and there is only <code>encrypt_and_sign</code> it seems; the MAC part seems optional. Serhi, I don&#39;t see you extracting the various parts of the base 64 encoded string in Java, where&#39;s that happening?"},{"owner":{"account_id":17592368,"reputation":13891,"user_id":12763954,"display_name":"Olivier"},"score":0,"creation_date":1643533478,"post_id":70907748,"comment_id":125361533,"body_markdown":"You&#39;re still passing an empty IV to the Java code.","body":"You&#39;re still passing an empty IV to the Java code."}],"answers":[{"tags":[],"owner":{"account_id":288696,"reputation":91230,"user_id":589259,"accept_rate":82,"display_name":"Maarten Bodewes"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1643480242,"creation_date":1643480242,"answer_id":70908385,"question_id":70907748,"body_markdown":"The exact code that is produced by Ruby is not specified (which I would consider a bug), you can find the format by reading [the source code](https://github.com/rails/rails/blob/b9ca94caea2ca6a6cc09abaffaad67b447134079/activesupport/lib/active_support/message_encryptor.rb#L150), especially this part:\r\n\r\n        blob = &quot;#{::Base64.strict_encode64 encrypted_data}--#{::Base64.strict_encode64 iv}&quot;\r\n        blob = &quot;#{blob}--#{::Base64.strict_encode64 cipher.auth_tag}&quot; if aead_mode?\r\n\r\nWhere the IV is a random IV, generated using `Cipher::new` of the `openssl` module.","title":"Encrypt Ruby decrypt Java","body":"<p>The exact code that is produced by Ruby is not specified (which I would consider a bug), you can find the format by reading <a href=\"https://github.com/rails/rails/blob/b9ca94caea2ca6a6cc09abaffaad67b447134079/activesupport/lib/active_support/message_encryptor.rb#L150\" rel=\"nofollow noreferrer\">the source code</a>, especially this part:</p>\n<pre><code>    blob = &quot;#{::Base64.strict_encode64 encrypted_data}--#{::Base64.strict_encode64 iv}&quot;\n    blob = &quot;#{blob}--#{::Base64.strict_encode64 cipher.auth_tag}&quot; if aead_mode?\n</code></pre>\n<p>Where the IV is a random IV, generated using <code>Cipher::new</code> of the <code>openssl</code> module.</p>\n"}],"owner":{"account_id":15276431,"reputation":13,"user_id":11022024,"display_name":"Serhii"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":216,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":70908385,"answer_count":1,"score":0,"last_activity_date":1643488015,"creation_date":1643475638,"question_id":70907748,"body_markdown":"Good afternoon. Interested in the question someone tried to decrypt data in Java that was encrypted in Ruby.\r\nI&#39;m trying to encrypt a word in Ruby (using the Marshal module) and decrypt in Java. If the Marshal module is used, can it be transferred to other languages ​​or not?\r\n\r\nThis is my test in Ruby:\r\n        \r\n    let(:key) { &quot;12345678901234567890123456789012&quot; }\r\n    let(:str) { &quot;Serhii&quot; }\r\n  \r\n    it &quot;encrypt_content&quot; do\r\n      crypt = ActiveSupport::MessageEncryptor.new(key, cipher: &#39;aes-256-cbc&#39;)\r\n      encrypted_content = crypt.encrypt_and_sign(str)\r\n      encrypted_content\r\n    end\r\n        \r\nThe code methods are:\r\n\r\n    def encrypt_and_sign(value, expires_at: nil, expires_in: nil, purpose: nil)\r\n      verifier.generate(_encrypt(value, expires_at: expires_at, expires_in: expires_in, purpose: purpose))\r\n    end\r\n\r\n    def _encrypt(value, **metadata_options)\r\n      cipher = new_cipher\r\n      cipher.encrypt\r\n      cipher.key = @secret\r\n\r\n      iv = cipher.random_iv\r\n      cipher.auth_data = &quot;&quot; if aead_mode?\r\n\r\n      encrypted_data = cipher.update(Messages::Metadata.wrap(@serializer.dump(value), metadata_options))\r\n      encrypted_data &lt;&lt; cipher.final\r\n\r\n      blob = &quot;#{::Base64.strict_encode64 encrypted_data}--#{::Base64.strict_encode64 iv}&quot;`enter code here`\r\n      blob = &quot;#{blob}--#{::Base64.strict_encode64 cipher.auth_tag}&quot; if aead_mode?\r\n      blob\r\n    end\r\n        \r\nThe decrypt Java is:\r\n        \r\n    private static final String key = &quot;12345678901234567890123456789012&quot;;\r\n\r\n    @SneakyThrows\r\n    public static String decrypt(String encrypted) {\r\n        byte[] firstByte = Base64.getDecoder().decode(encrypted.replaceAll(&quot;\\n&quot;, &quot;&quot;).getBytes(StandardCharsets.UTF_8));\r\n        String first = new String(firstByte);\r\n        String[] parts = first.split(&quot;--&quot;);\r\n        byte[] secondByte = Base64.getDecoder().decode(parts[0].getBytes(StandardCharsets.UTF_8));\r\n        String second = new String(secondByte);\r\n        String[] parts2 = second.split(&quot;--&quot;);\r\n\r\n        byte[] encryptedData = Base64.getDecoder().decode(parts2[0].getBytes(StandardCharsets.UTF_8));\r\n\r\n        SecretKeySpec aesKey = new SecretKeySpec(key.getBytes(StandardCharsets.UTF_8), &quot;AES&quot;);\r\n\r\n        Cipher cipher = Cipher.getInstance(&quot;AES/CBC/PKCS5Padding&quot;);\r\n        cipher.init(Cipher.DECRYPT_MODE, aesKey, new IvParameterSpec(new byte[16]));\r\n        byte[] result = cipher.doFinal(encryptedData);\r\n\r\n        return new String(result);\r\n    }\r\n\r\n    public static void main(String[] args) throws Exception {\r\n        String encrypted = &quot;S3l0cVEybDRUM2sxU1hFMk5YVlhOa3A2VXpRNFEyZFFibTVwZVdRMVdEUlpN\\n&quot; +\r\n                &quot;bkkxUzBaUGNsbFJaejB0TFRWWlVtVkNVWEJXZWxselJuWkVhbFJyWlU5VmNr\\n&quot; +\r\n                &quot;RTlQUT09LS0yZDA5M2FhZTg0OTJjZmIyZjdiNDA0ZWVkNGU2ZmQ4NDQ1ZTM4\\n&quot; +\r\n                &quot;ZjIx&quot;;\r\n        System.out.println(&quot;Decrypted: &quot; + decrypt(encrypted));\r\n        }\r\n    }\r\n\r\n\r\nResult  �&#39;��m�Qի���\r\nWhat could be the reason?","title":"Encrypt Ruby decrypt Java","body":"<p>Good afternoon. Interested in the question someone tried to decrypt data in Java that was encrypted in Ruby.\nI'm trying to encrypt a word in Ruby (using the Marshal module) and decrypt in Java. If the Marshal module is used, can it be transferred to other languages ​​or not?</p>\n<p>This is my test in Ruby:</p>\n<pre><code>let(:key) { &quot;12345678901234567890123456789012&quot; }\nlet(:str) { &quot;Serhii&quot; }\n\nit &quot;encrypt_content&quot; do\n  crypt = ActiveSupport::MessageEncryptor.new(key, cipher: 'aes-256-cbc')\n  encrypted_content = crypt.encrypt_and_sign(str)\n  encrypted_content\nend\n    \n</code></pre>\n<p>The code methods are:</p>\n<pre><code>def encrypt_and_sign(value, expires_at: nil, expires_in: nil, purpose: nil)\n  verifier.generate(_encrypt(value, expires_at: expires_at, expires_in: expires_in, purpose: purpose))\nend\n\ndef _encrypt(value, **metadata_options)\n  cipher = new_cipher\n  cipher.encrypt\n  cipher.key = @secret\n\n  iv = cipher.random_iv\n  cipher.auth_data = &quot;&quot; if aead_mode?\n\n  encrypted_data = cipher.update(Messages::Metadata.wrap(@serializer.dump(value), metadata_options))\n  encrypted_data &lt;&lt; cipher.final\n\n  blob = &quot;#{::Base64.strict_encode64 encrypted_data}--#{::Base64.strict_encode64 iv}&quot;`enter code here`\n  blob = &quot;#{blob}--#{::Base64.strict_encode64 cipher.auth_tag}&quot; if aead_mode?\n  blob\nend\n    \n</code></pre>\n<p>The decrypt Java is:</p>\n<pre><code>private static final String key = &quot;12345678901234567890123456789012&quot;;\n\n@SneakyThrows\npublic static String decrypt(String encrypted) {\n    byte[] firstByte = Base64.getDecoder().decode(encrypted.replaceAll(&quot;\\n&quot;, &quot;&quot;).getBytes(StandardCharsets.UTF_8));\n    String first = new String(firstByte);\n    String[] parts = first.split(&quot;--&quot;);\n    byte[] secondByte = Base64.getDecoder().decode(parts[0].getBytes(StandardCharsets.UTF_8));\n    String second = new String(secondByte);\n    String[] parts2 = second.split(&quot;--&quot;);\n\n    byte[] encryptedData = Base64.getDecoder().decode(parts2[0].getBytes(StandardCharsets.UTF_8));\n\n    SecretKeySpec aesKey = new SecretKeySpec(key.getBytes(StandardCharsets.UTF_8), &quot;AES&quot;);\n\n    Cipher cipher = Cipher.getInstance(&quot;AES/CBC/PKCS5Padding&quot;);\n    cipher.init(Cipher.DECRYPT_MODE, aesKey, new IvParameterSpec(new byte[16]));\n    byte[] result = cipher.doFinal(encryptedData);\n\n    return new String(result);\n}\n\npublic static void main(String[] args) throws Exception {\n    String encrypted = &quot;S3l0cVEybDRUM2sxU1hFMk5YVlhOa3A2VXpRNFEyZFFibTVwZVdRMVdEUlpN\\n&quot; +\n            &quot;bkkxUzBaUGNsbFJaejB0TFRWWlVtVkNVWEJXZWxselJuWkVhbFJyWlU5VmNr\\n&quot; +\n            &quot;RTlQUT09LS0yZDA5M2FhZTg0OTJjZmIyZjdiNDA0ZWVkNGU2ZmQ4NDQ1ZTM4\\n&quot; +\n            &quot;ZjIx&quot;;\n    System.out.println(&quot;Decrypted: &quot; + decrypt(encrypted));\n    }\n}\n</code></pre>\n<p>Result  �'��m�Qի���\nWhat could be the reason?</p>\n"},{"tags":["java","sql","hibernate","jpa","hql"],"owner":{"account_id":22610371,"reputation":53,"user_id":16790664,"display_name":"bawina bawina"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":122,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1643487674,"creation_date":1643463050,"question_id":70905907,"body_markdown":"I have `Quiz` entity which is mapped to a table called `Option` with `@ElementCollection`.\r\n\r\nso the logic is if the user want to delete the quiz, all the options related to it would be deleted.\r\n\r\nI have create this named query\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-js --&gt;\r\n\r\n        @NamedQuery(name = &quot;deleteOptionsOfQuiz&quot;,\r\n                    query = &quot;DELETE FROM quiz_option q WHERE q.quizID = :quizId&quot;)\r\n    })\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\nbut I&#39;m getting this error\r\n\r\n\r\n\r\n    Caused by: org.hibernate.HibernateException: Errors in named queries: \r\n    deleteOptionsOfQuiz failed because of: org.hibernate.hql.internal.ast.QuerySyntaxException: quiz_option is not mapped [DELETE FROM quiz_option q WHERE q.quizID = :quizId]\r\n    \tat org.hibernate.internal.SessionFactoryImpl.&lt;init&gt;(SessionFactoryImpl.java:360)\r\n    \tat org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:471)\r\n    \tat org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build\r\n\r\n\r\nhere are the tables\r\n\r\n**QUIZ**\r\n\r\n\r\n\r\n    public class Quiz{\r\n\r\n      @Id\r\n      @GeneratedValue(strategy=GenerationType.AUTO)\r\n      @Column(name = &quot;quizID&quot;)\r\n      private long id;\r\n\r\n\r\n      @ElementCollection(fetch = FetchType.LAZY)\r\n      @CollectionTable(name = &quot;quiz_option&quot;,\r\n              joinColumns = @JoinColumn(name = &quot;quizID&quot;))\r\n      @Column(name = &quot;option&quot;)\r\n      private Set&lt;String&gt; options= new HashSet&lt;&gt;();\r\n\r\n    //...\r\n    }\r\n\r\n\r\n**Option**\r\n\r\n\r\n     &lt;changeSet author=&quot;***&quot; id=&quot;***&quot;&gt;\r\n        &lt;createTable tableName=&quot;quiz_option&quot;&gt;\r\n          &lt;column name=&quot;quizID&quot; type=&quot;BIGINT&quot;&gt;\r\n            &lt;constraints foreignKeyName=&quot;quiz&quot; references=&quot;quiz(quizID)&quot; nullable=&quot;false&quot;/&gt;\r\n          &lt;/column&gt;\r\n          &lt;column name=&quot;option&quot; type=&quot;NVARCHAR(50)&quot;&gt;\r\n            &lt;constraints nullable=&quot;false&quot;/&gt;\r\n          &lt;/column&gt;\r\n        &lt;/createTable&gt;\r\n      &lt;/changeSet&gt;\r\n\r\n\r\n","title":"elementcollection table is not mapped","body":"<p>I have <code>Quiz</code> entity which is mapped to a table called <code>Option</code> with <code>@ElementCollection</code>.</p>\n<p>so the logic is if the user want to delete the quiz, all the options related to it would be deleted.</p>\n<p>I have create this named query</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>    @NamedQuery(name = \"deleteOptionsOfQuiz\",\n                query = \"DELETE FROM quiz_option q WHERE q.quizID = :quizId\")\n})</code></pre>\r\n</div>\r\n</div>\r\n</p>\n<p>but I'm getting this error</p>\n<pre><code>Caused by: org.hibernate.HibernateException: Errors in named queries: \ndeleteOptionsOfQuiz failed because of: org.hibernate.hql.internal.ast.QuerySyntaxException: quiz_option is not mapped [DELETE FROM quiz_option q WHERE q.quizID = :quizId]\n    at org.hibernate.internal.SessionFactoryImpl.&lt;init&gt;(SessionFactoryImpl.java:360)\n    at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:471)\n    at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build\n</code></pre>\n<p>here are the tables</p>\n<p><strong>QUIZ</strong></p>\n<pre><code>public class Quiz{\n\n  @Id\n  @GeneratedValue(strategy=GenerationType.AUTO)\n  @Column(name = &quot;quizID&quot;)\n  private long id;\n\n\n  @ElementCollection(fetch = FetchType.LAZY)\n  @CollectionTable(name = &quot;quiz_option&quot;,\n          joinColumns = @JoinColumn(name = &quot;quizID&quot;))\n  @Column(name = &quot;option&quot;)\n  private Set&lt;String&gt; options= new HashSet&lt;&gt;();\n\n//...\n}\n</code></pre>\n<p><strong>Option</strong></p>\n<pre><code> &lt;changeSet author=&quot;***&quot; id=&quot;***&quot;&gt;\n    &lt;createTable tableName=&quot;quiz_option&quot;&gt;\n      &lt;column name=&quot;quizID&quot; type=&quot;BIGINT&quot;&gt;\n        &lt;constraints foreignKeyName=&quot;quiz&quot; references=&quot;quiz(quizID)&quot; nullable=&quot;false&quot;/&gt;\n      &lt;/column&gt;\n      &lt;column name=&quot;option&quot; type=&quot;NVARCHAR(50)&quot;&gt;\n        &lt;constraints nullable=&quot;false&quot;/&gt;\n      &lt;/column&gt;\n    &lt;/createTable&gt;\n  &lt;/changeSet&gt;\n</code></pre>\n"},{"tags":["java","android","android-layout","menuitem"],"answers":[{"tags":[],"owner":{"account_id":11561418,"reputation":1069,"user_id":13556102,"display_name":"Leonid"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1643487317,"creation_date":1643486990,"answer_id":70909318,"question_id":70909224,"body_markdown":"You can change the icon to night by creating a folder with icons for the night theme. Create this folder (click RightClick on res folder) and set values like below on screen. After creating you should move night icons to this new folder. The icons should automatically switch to the night theme.\r\n\r\n[![screen][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/IOARn.png","title":"Howto change the Icon MenuItem android app","body":"<p>You can change the icon to night by creating a folder with icons for the night theme. Create this folder (click RightClick on res folder) and set values like below on screen. After creating you should move night icons to this new folder. The icons should automatically switch to the night theme.</p>\n<p><a href=\"https://i.stack.imgur.com/IOARn.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/IOARn.png\" alt=\"screen\" /></a></p>\n"}],"owner":{"account_id":1237553,"reputation":109,"user_id":1200840,"accept_rate":48,"display_name":"amarradi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":70,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70909318,"answer_count":1,"score":0,"last_activity_date":1643487317,"creation_date":1643486106,"question_id":70909224,"body_markdown":"I would like to implement a day-night mode switch in a MenuItem. If the day mode is selected, a moon should be displayed, and if the night mode is selected a sun should be diplayed. I save the settings in SharedPreferences and want to load them again when starting the app.\r\n\r\nIn my MainActivity-Class i definded \r\n```\r\n  public static final String NIGHT_MODE = &quot;night_mode&quot;;\r\n  private boolean safedNightMode;\r\n```\r\nThis is my onCreate-method for loading the SharedPreferences\r\n```\r\n protected void onCreate(Bundle savedInstanceState) {\r\n\r\n        requireNonNull(getSupportActionBar()).setDisplayShowHomeEnabled(true);\r\n        Objects.requireNonNull(getSupportActionBar()).setLogo(R.mipmap.logo_psc_round);\r\n        getSupportActionBar().setDisplayUseLogoEnabled(false);\r\n\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n\r\n        SharedPreferences sharedPreferences = getSharedPreferences(SHARED_PREFS,MODE_PRIVATE);\r\n        safedNightMode = sharedPreferences.getBoolean(NIGHT_MODE,false);\r\n    \r\n        if (safedNightMode) {\r\n            AppCompatDelegate.setDefaultNightMode(AppCompatDelegate.MODE_NIGHT_YES);\r\n        } else {\r\n            AppCompatDelegate.setDefaultNightMode(AppCompatDelegate.MODE_NIGHT_NO);\r\n        }\r\n```\r\nMy onCreateOptionsMenu an my onOtionsItemSelected-method\r\n```\r\n @Override\r\n    public boolean onCreateOptionsMenu(Menu menu) {\r\n        MenuInflater inflater = getMenuInflater();\r\n        inflater.inflate(R.menu.menu, menu);\r\n        return true;\r\n    }\r\n\r\n    @Override\r\n    public boolean onOptionsItemSelected(MenuItem item) {\r\n        switch (item.getItemId()) {\r\n            case R.id.item_clean:\r\n                openDialog();\r\n                return true;\r\n            case R.id.item_dn_switch:\r\n                switchDayNightMode();\r\n                return true;\r\n            case R.id.item_recipe:\r\n                Intent intentRecipe = new Intent(this, RecipeActivity.class);\r\n                startActivity(intentRecipe);\r\n                return true;\r\n            case R.id.item_about:\r\n                Intent intentAbout = new Intent(this, AboutActivity.class);\r\n                startActivity(intentAbout);\r\n                return true;\r\n            default:\r\n                return super.onOptionsItemSelected(item);\r\n        }\r\n    }\r\n```\r\nMy switchDayNightMode-method will called when the item is selected\r\n```\r\npublic void switchDayNightMode() {\r\n        SharedPreferences sharedPreferences = getSharedPreferences(SHARED_PREFS,MODE_PRIVATE);\r\n        safedNightMode = sharedPreferences.getBoolean(NIGHT_MODE,false);\r\n        nightMode = safedNightMode;\r\n        if (safedNightMode) {\r\n            AppCompatDelegate.setDefaultNightMode(AppCompatDelegate.MODE_NIGHT_NO);\r\n            nightMode = false;\r\n        } else {\r\n            AppCompatDelegate.setDefaultNightMode(AppCompatDelegate.MODE_NIGHT_YES);\r\n            nightMode = true;\r\n        }\r\n        SharedPreferences.Editor editor = sharedPreferences.edit();\r\n        editor.putBoolean(NIGHT_MODE, nightMode);\r\n        editor.apply();\r\n    }\r\n```\r\nMy menu.xml is here. The relevant item is android:id=&quot;@+id/item_dn_switch&quot;.\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;menu xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n    xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;\r\n\r\n    &lt;item android:id=&quot;@+id/item_clean&quot;\r\n        android:title=&quot;@string/txt_menu_item_counter_reset&quot;\r\n        android:icon=&quot;@drawable/ic_baseline_delete_forever_24&quot;\r\n        app:showAsAction=&quot;ifRoom&quot;/&gt;\r\n    &lt;item android:id=&quot;@+id/item_dn_switch&quot;\r\n        android:title=&quot;@string/txt_menu_item_dnswitch&quot;\r\n        android:icon=&quot;@drawable/ic_baseline_mode_night_24&quot;\r\n        app:showAsAction=&quot;ifRoom&quot;/&gt;\r\n    &lt;item android:id=&quot;@+id/item_recipe&quot;\r\n        android:title=&quot;@string/txt_menu_item_recipe&quot;\r\n        android:icon=&quot;@drawable/ic_baseline_list_24&quot;\r\n        app:showAsAction=&quot;ifRoom&quot;/&gt;\r\n    &lt;item android:id=&quot;@+id/item_about&quot;\r\n        android:title=&quot;@string/about&quot;\r\n        android:icon=&quot;@drawable/ic_baseline_contact_support_24&quot;\r\n        app:showAsAction=&quot;ifRoom&quot;/&gt;\r\n&lt;/menu&gt;\r\n```\r\nHow can I realize that the icon is changed depending on the day-night-mode?","title":"Howto change the Icon MenuItem android app","body":"<p>I would like to implement a day-night mode switch in a MenuItem. If the day mode is selected, a moon should be displayed, and if the night mode is selected a sun should be diplayed. I save the settings in SharedPreferences and want to load them again when starting the app.</p>\n<p>In my MainActivity-Class i definded</p>\n<pre><code>  public static final String NIGHT_MODE = &quot;night_mode&quot;;\n  private boolean safedNightMode;\n</code></pre>\n<p>This is my onCreate-method for loading the SharedPreferences</p>\n<pre><code> protected void onCreate(Bundle savedInstanceState) {\n\n        requireNonNull(getSupportActionBar()).setDisplayShowHomeEnabled(true);\n        Objects.requireNonNull(getSupportActionBar()).setLogo(R.mipmap.logo_psc_round);\n        getSupportActionBar().setDisplayUseLogoEnabled(false);\n\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        SharedPreferences sharedPreferences = getSharedPreferences(SHARED_PREFS,MODE_PRIVATE);\n        safedNightMode = sharedPreferences.getBoolean(NIGHT_MODE,false);\n    \n        if (safedNightMode) {\n            AppCompatDelegate.setDefaultNightMode(AppCompatDelegate.MODE_NIGHT_YES);\n        } else {\n            AppCompatDelegate.setDefaultNightMode(AppCompatDelegate.MODE_NIGHT_NO);\n        }\n</code></pre>\n<p>My onCreateOptionsMenu an my onOtionsItemSelected-method</p>\n<pre><code> @Override\n    public boolean onCreateOptionsMenu(Menu menu) {\n        MenuInflater inflater = getMenuInflater();\n        inflater.inflate(R.menu.menu, menu);\n        return true;\n    }\n\n    @Override\n    public boolean onOptionsItemSelected(MenuItem item) {\n        switch (item.getItemId()) {\n            case R.id.item_clean:\n                openDialog();\n                return true;\n            case R.id.item_dn_switch:\n                switchDayNightMode();\n                return true;\n            case R.id.item_recipe:\n                Intent intentRecipe = new Intent(this, RecipeActivity.class);\n                startActivity(intentRecipe);\n                return true;\n            case R.id.item_about:\n                Intent intentAbout = new Intent(this, AboutActivity.class);\n                startActivity(intentAbout);\n                return true;\n            default:\n                return super.onOptionsItemSelected(item);\n        }\n    }\n</code></pre>\n<p>My switchDayNightMode-method will called when the item is selected</p>\n<pre><code>public void switchDayNightMode() {\n        SharedPreferences sharedPreferences = getSharedPreferences(SHARED_PREFS,MODE_PRIVATE);\n        safedNightMode = sharedPreferences.getBoolean(NIGHT_MODE,false);\n        nightMode = safedNightMode;\n        if (safedNightMode) {\n            AppCompatDelegate.setDefaultNightMode(AppCompatDelegate.MODE_NIGHT_NO);\n            nightMode = false;\n        } else {\n            AppCompatDelegate.setDefaultNightMode(AppCompatDelegate.MODE_NIGHT_YES);\n            nightMode = true;\n        }\n        SharedPreferences.Editor editor = sharedPreferences.edit();\n        editor.putBoolean(NIGHT_MODE, nightMode);\n        editor.apply();\n    }\n</code></pre>\n<p>My menu.xml is here. The relevant item is android:id=&quot;@+id/item_dn_switch&quot;.</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;menu xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;\n\n    &lt;item android:id=&quot;@+id/item_clean&quot;\n        android:title=&quot;@string/txt_menu_item_counter_reset&quot;\n        android:icon=&quot;@drawable/ic_baseline_delete_forever_24&quot;\n        app:showAsAction=&quot;ifRoom&quot;/&gt;\n    &lt;item android:id=&quot;@+id/item_dn_switch&quot;\n        android:title=&quot;@string/txt_menu_item_dnswitch&quot;\n        android:icon=&quot;@drawable/ic_baseline_mode_night_24&quot;\n        app:showAsAction=&quot;ifRoom&quot;/&gt;\n    &lt;item android:id=&quot;@+id/item_recipe&quot;\n        android:title=&quot;@string/txt_menu_item_recipe&quot;\n        android:icon=&quot;@drawable/ic_baseline_list_24&quot;\n        app:showAsAction=&quot;ifRoom&quot;/&gt;\n    &lt;item android:id=&quot;@+id/item_about&quot;\n        android:title=&quot;@string/about&quot;\n        android:icon=&quot;@drawable/ic_baseline_contact_support_24&quot;\n        app:showAsAction=&quot;ifRoom&quot;/&gt;\n&lt;/menu&gt;\n</code></pre>\n<p>How can I realize that the icon is changed depending on the day-night-mode?</p>\n"},{"tags":["java","selenium","selenium-webdriver","ide"],"comments":[{"owner":{"account_id":2366187,"reputation":60152,"user_id":2071828,"accept_rate":88,"display_name":"Boris the Spider"},"score":0,"creation_date":1643487397,"post_id":70909255,"comment_id":125354903,"body_markdown":"I don’t know what the Selenium binding with Java is - Selenium _is_ Java! I suspect you might have downloaded something dodgy as it doesn’t sound like a legitimate item.","body":"I don’t know what the Selenium binding with Java is - Selenium <i>is</i> Java! I suspect you might have downloaded something dodgy as it doesn’t sound like a legitimate item."},{"owner":{"account_id":18594164,"reputation":37,"user_id":13621796,"display_name":"Lis.safina"},"score":0,"creation_date":1643488209,"post_id":70909255,"comment_id":125355078,"body_markdown":"@BoristheSpider if you go to selenium.dev/downloads/ (which is a legitimate website) there are selenium clients and Webdriver language bindings. And the JAVA package has a virus in it! I deleted the jar that had it, but still suspicious.","body":"@BoristheSpider if you go to selenium.dev/downloads/ (which is a legitimate website) there are selenium clients and Webdriver language bindings. And the JAVA package has a virus in it! I deleted the jar that had it, but still suspicious."}],"owner":{"account_id":18594164,"reputation":37,"user_id":13621796,"display_name":"Lis.safina"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":255,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1643486493,"creation_date":1643486493,"question_id":70909255,"body_markdown":"Downloaded selenium binding with java. antivirus shows the malicious file in it (heur_java.re0)\r\nDon&#39;t know if it&#39;s safe to upload the whole package to my ide.\r\nCan&#39;t figure out which file is affected.\r\n\r\nDoes someone know anything about it?\r\n \r\nAppreciate!\r\n","title":"Downloaded selenium binding with java. antivirus shows malicious file in it (heur_java.re0)","body":"<p>Downloaded selenium binding with java. antivirus shows the malicious file in it (heur_java.re0)\nDon't know if it's safe to upload the whole package to my ide.\nCan't figure out which file is affected.</p>\n<p>Does someone know anything about it?</p>\n<p>Appreciate!</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":1485367,"reputation":122993,"user_id":1393766,"display_name":"Pshemo"},"score":0,"creation_date":1643480096,"post_id":70908237,"comment_id":125353150,"body_markdown":"What to you mean by &quot;attach a static function to an enum&quot;? How do you imagine such method should work? For now it looks like you just want to assign to each enum value some symbol, like `+` for `SUM`. You can do it by telling enum to have `private String symbol;`, create constructor via which you will set that symbol for each enum value so something like `private Operation(String symbol){ this.symbol = symbol;}` and create values like `SUM(&quot;+&quot;)`. Create also getter for that symbol like `getSymbol(){ return symbol;}`. This way you can call `SUM.getSymbol()` and get `&quot;+&quot;`.","body":"What to you mean by &quot;attach a static function to an enum&quot;? How do you imagine such method should work? For now it looks like you just want to assign to each enum value some symbol, like <code>+</code> for <code>SUM</code>. You can do it by telling enum to have <code>private String symbol;</code>, create constructor via which you will set that symbol for each enum value so something like <code>private Operation(String symbol){ this.symbol = symbol;}</code> and create values like <code>SUM(&quot;+&quot;)</code>. Create also getter for that symbol like <code>getSymbol(){ return symbol;}</code>. This way you can call <code>SUM.getSymbol()</code> and get <code>&quot;+&quot;</code>."}],"answers":[{"tags":[],"owner":{"account_id":23685228,"reputation":1103,"user_id":17710270,"display_name":"passer-by"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1643484712,"creation_date":1643484712,"answer_id":70909048,"question_id":70908237,"body_markdown":"This looks like your main problem:\r\n\r\n    public enum Operation {\r\n        SUM,\r\n        SUBTRACT,\r\n        PRODUCT,\r\n        DIVIDE,\r\n\r\nThat last comma should be a semicolon, to terminate the list of enum member constants.\r\n\r\nYou might have other issues (I didn&#39;t check), but start by fixing that syntax error.","title":"illegal to access static member while in an enum constructor","body":"<p>This looks like your main problem:</p>\n<pre><code>public enum Operation {\n    SUM,\n    SUBTRACT,\n    PRODUCT,\n    DIVIDE,\n</code></pre>\n<p>That last comma should be a semicolon, to terminate the list of enum member constants.</p>\n<p>You might have other issues (I didn't check), but start by fixing that syntax error.</p>\n"},{"tags":[],"owner":{"account_id":11688295,"reputation":395,"user_id":8557336,"display_name":"Orr Benyamini"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1643486430,"creation_date":1643486430,"answer_id":70909252,"question_id":70908237,"body_markdown":"I think you should choose a different way to implement what you want to achieve:\r\n\r\n    public enum Operation {\r\n        SUM(&quot;+&quot;),\r\n        SUBTRACT(&quot;-&quot;),\r\n        PRODUCT(&quot;*&quot;),\r\n        DIVIDE(&quot;/&quot;);\r\n\r\n        private final String displayString;\r\n\r\n        Operation(final String displayString) {\r\n            this.displayString = displayString;\r\n        }\r\n\r\n        public String getDisplayString() {\r\n            return displayString;\r\n        }\r\n    }\r\n\r\nFew key points:\r\n\r\n1. Enums in Java can have fields and constructor, see `displayString` field and the one argument constructor.\r\n2. Enums in Java can have instance methods, in which you can use instance fields, like `getDisplayString`\r\n\r\nThen you can use it as follows:\r\n\r\n```\r\nfinal Operation sumOperation = Operation.SUM;\r\nfinal Operation divideOperation = Operation.DIVIDE;\r\n\r\nSystem.out.println(&quot;First operation: &quot; + sumOperation.getDisplayString()); // First operation: +\r\nSystem.out.println(&quot;Second operation: &quot; +  divideOperation.getDisplayString()); // Second operation: /\r\n```\r\n\r\nI hope it helps, if you need further details please describe what more information you need in the comments\r\n","title":"illegal to access static member while in an enum constructor","body":"<p>I think you should choose a different way to implement what you want to achieve:</p>\n<pre><code>public enum Operation {\n    SUM(&quot;+&quot;),\n    SUBTRACT(&quot;-&quot;),\n    PRODUCT(&quot;*&quot;),\n    DIVIDE(&quot;/&quot;);\n\n    private final String displayString;\n\n    Operation(final String displayString) {\n        this.displayString = displayString;\n    }\n\n    public String getDisplayString() {\n        return displayString;\n    }\n}\n</code></pre>\n<p>Few key points:</p>\n<ol>\n<li>Enums in Java can have fields and constructor, see <code>displayString</code> field and the one argument constructor.</li>\n<li>Enums in Java can have instance methods, in which you can use instance fields, like <code>getDisplayString</code></li>\n</ol>\n<p>Then you can use it as follows:</p>\n<pre><code>final Operation sumOperation = Operation.SUM;\nfinal Operation divideOperation = Operation.DIVIDE;\n\nSystem.out.println(&quot;First operation: &quot; + sumOperation.getDisplayString()); // First operation: +\nSystem.out.println(&quot;Second operation: &quot; +  divideOperation.getDisplayString()); // Second operation: /\n</code></pre>\n<p>I hope it helps, if you need further details please describe what more information you need in the comments</p>\n"}],"owner":{"account_id":21184986,"reputation":760,"user_id":15578536,"display_name":"John Sorensen"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":623,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1643486430,"creation_date":1643479275,"question_id":70908237,"body_markdown":"I have an enum and want to attach a static function to it that takes an argument of that enum&#39;s case and returns a different string dependent on some conditions. This is throwing a bunch of errors, though, including &quot;No modifiers allowed for enum constants&quot; and &quot;it is illegal to access static member ... from enum constructor or instance initializer.&quot; How do I correctly attach a static function to an enum? Because of my context, this really does seem like the most sensible place to put it.\r\n\r\nExample Code:\r\n\r\n    public enum Operation {\r\n        SUM,\r\n        SUBTRACT,\r\n        PRODUCT,\r\n        DIVIDE,\r\n\r\n\r\n        public String display(Operation operation) {\r\n            if (operation == this.SUM) {\r\n                return &quot;+&quot;;\r\n            } else if (operation == this.SUBTRACT) {\r\n                return &quot;-&quot;;\r\n            } else if (operation == this.DIVIDE) {\r\n                return &quot;/&quot;;\r\n            } else {\r\n                return &quot;*&quot;;\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n","title":"illegal to access static member while in an enum constructor","body":"<p>I have an enum and want to attach a static function to it that takes an argument of that enum's case and returns a different string dependent on some conditions. This is throwing a bunch of errors, though, including &quot;No modifiers allowed for enum constants&quot; and &quot;it is illegal to access static member ... from enum constructor or instance initializer.&quot; How do I correctly attach a static function to an enum? Because of my context, this really does seem like the most sensible place to put it.</p>\n<p>Example Code:</p>\n<pre><code>public enum Operation {\n    SUM,\n    SUBTRACT,\n    PRODUCT,\n    DIVIDE,\n\n\n    public String display(Operation operation) {\n        if (operation == this.SUM) {\n            return &quot;+&quot;;\n        } else if (operation == this.SUBTRACT) {\n            return &quot;-&quot;;\n        } else if (operation == this.DIVIDE) {\n            return &quot;/&quot;;\n        } else {\n            return &quot;*&quot;;\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java","hibernate","exception","entity"],"comments":[{"owner":{"account_id":15271,"reputation":63428,"user_id":32090,"accept_rate":91,"display_name":"Boris Pavlović"},"score":0,"creation_date":1398155833,"post_id":23214454,"comment_id":35512381,"body_markdown":"Could you commit the considered structure to the github or some other online source repository so we could check it out and try running?","body":"Could you commit the considered structure to the github or some other online source repository so we could check it out and try running?"}],"answers":[{"tags":[],"owner":{"account_id":193447,"reputation":3946,"user_id":435187,"display_name":"Asif Bhutto"},"down_vote_count":1,"up_vote_count":89,"is_accepted":true,"score":88,"last_activity_date":1398163663,"creation_date":1398158903,"answer_id":23215605,"question_id":23214454,"body_markdown":"\r\nThe Hibernate configuration file must define the entity classes:\r\n\r\n    &lt;mapping class=&quot;annotations.Users&quot;/&gt;\r\n\r\nOr you must explicitly add the class to the configuration using\r\n\r\n    configuration.addClass(annotations.Users.class)\r\n    // Read mappings as a application resourceName\r\n     // addResource is for add hbml.xml files in case of declarative approach\r\n    configuration.addResource(&quot;myFile.hbm.xml&quot;);  // not hibernateAnnotations.cfg.xml","title":"org.hibernate.MappingException: Unknown entity: annotations.Users","body":"<p>The Hibernate configuration file must define the entity classes:</p>\n\n<pre><code>&lt;mapping class=\"annotations.Users\"/&gt;\n</code></pre>\n\n<p>Or you must explicitly add the class to the configuration using</p>\n\n<pre><code>configuration.addClass(annotations.Users.class)\n// Read mappings as a application resourceName\n // addResource is for add hbml.xml files in case of declarative approach\nconfiguration.addResource(\"myFile.hbm.xml\");  // not hibernateAnnotations.cfg.xml\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2593372,"reputation":71,"user_id":2247545,"display_name":"user2247545"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1421201432,"creation_date":1421201432,"answer_id":27934767,"question_id":23214454,"body_markdown":"Add the following to your xml:\r\n\r\n\t&lt;bean id=&quot;sessionFactory&quot;\r\n\t\tclass=&quot;org.springframework.orm.hibernate4.LocalSessionFactoryBean&quot;&gt;\r\n\t\t&lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot; /&gt;\r\n\t\t&lt;property name=&quot;packagesToScan&quot;&gt;\r\n\t\t\t&lt;list&gt;\r\n\t\t\t\t&lt;value&gt;annotations&lt;/value&gt;\r\n\t\t\t&lt;/list&gt;\r\n\t\t&lt;/property&gt;\r\n\t\t&lt;property name=&quot;hibernateProperties&quot;&gt;\r\n\t\t\t&lt;props&gt;\r\n\t\t\t\t&lt;prop key=&quot;hibernate.dialect&quot;&gt;org.hibernate.dialect.MySQLDialect&lt;/prop&gt;\r\n\t\t\t\t&lt;prop key=&quot;hibernate.show_sql&quot;&gt;true&lt;/prop&gt;\r\n\t\t\t&lt;/props&gt;\r\n\t\t&lt;/property&gt;\r\n\t&lt;/bean&gt;\r\n\r\n\t&lt;tx:annotation-driven transaction-manager=&quot;transactionManager&quot; /&gt;\r\n\r\n\t&lt;bean id=&quot;transactionManager&quot;\r\n\t\tclass=&quot;org.springframework.orm.hibernate4.HibernateTransactionManager&quot;&gt;\r\n\t\t&lt;property name=&quot;sessionFactory&quot; ref=&quot;sessionFactory&quot; /&gt;\r\n\t&lt;/bean&gt;","title":"org.hibernate.MappingException: Unknown entity: annotations.Users","body":"<p>Add the following to your xml:</p>\n\n<pre><code>&lt;bean id=\"sessionFactory\"\n    class=\"org.springframework.orm.hibernate4.LocalSessionFactoryBean\"&gt;\n    &lt;property name=\"dataSource\" ref=\"dataSource\" /&gt;\n    &lt;property name=\"packagesToScan\"&gt;\n        &lt;list&gt;\n            &lt;value&gt;annotations&lt;/value&gt;\n        &lt;/list&gt;\n    &lt;/property&gt;\n    &lt;property name=\"hibernateProperties\"&gt;\n        &lt;props&gt;\n            &lt;prop key=\"hibernate.dialect\"&gt;org.hibernate.dialect.MySQLDialect&lt;/prop&gt;\n            &lt;prop key=\"hibernate.show_sql\"&gt;true&lt;/prop&gt;\n        &lt;/props&gt;\n    &lt;/property&gt;\n&lt;/bean&gt;\n\n&lt;tx:annotation-driven transaction-manager=\"transactionManager\" /&gt;\n\n&lt;bean id=\"transactionManager\"\n    class=\"org.springframework.orm.hibernate4.HibernateTransactionManager\"&gt;\n    &lt;property name=\"sessionFactory\" ref=\"sessionFactory\" /&gt;\n&lt;/bean&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":135174,"reputation":17875,"user_id":337819,"accept_rate":68,"display_name":"Marvo"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1431071285,"creation_date":1431071285,"answer_id":30118563,"question_id":23214454,"body_markdown":"For those using Spring&#39;s Java configuration classes, you might write the following:\r\n\r\n\t@Autowired\r\n\t@Bean(name = &quot;sessionFactory&quot;)\r\n\tpublic SessionFactory getSessionFactory(DataSource dataSource) {\r\n\t\tLocalSessionFactoryBuilder sessionBuilder = new LocalSessionFactoryBuilder(dataSource);\r\n\t\tsessionBuilder.addProperties(getHibernateProperties());\r\n\t\tsessionBuilder.addAnnotatedClasses(Foo.class);\r\n\t\tsessionBuilder.addAnnotatedClasses(Bar.class);\r\n\t\tsessionBuilder.addAnnotatedClasses(Bat.class);\r\n\t\treturn sessionBuilder.buildSessionFactory();\r\n\t}","title":"org.hibernate.MappingException: Unknown entity: annotations.Users","body":"<p>For those using Spring's Java configuration classes, you might write the following:</p>\n\n<pre><code>@Autowired\n@Bean(name = \"sessionFactory\")\npublic SessionFactory getSessionFactory(DataSource dataSource) {\n    LocalSessionFactoryBuilder sessionBuilder = new LocalSessionFactoryBuilder(dataSource);\n    sessionBuilder.addProperties(getHibernateProperties());\n    sessionBuilder.addAnnotatedClasses(Foo.class);\n    sessionBuilder.addAnnotatedClasses(Bar.class);\n    sessionBuilder.addAnnotatedClasses(Bat.class);\n    return sessionBuilder.buildSessionFactory();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2464689,"reputation":11,"user_id":2148060,"display_name":"user2148060"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1438227385,"creation_date":1438222736,"answer_id":31714169,"question_id":23214454,"body_markdown":"Define the `Entity` class in *Hibernate.cfg.xml*\r\n\r\n    &lt;mapping class=&quot;com.supernt.Department&quot;/&gt;\r\n\r\nWhile creating the `sessionFactory` object Load the *Configuration* file Like\r\n\r\n    SessionFactory factory = new AnnotationConfiguration().configure(&quot;hibernate.cfg.xml&quot;).buildSessionFactory();","title":"org.hibernate.MappingException: Unknown entity: annotations.Users","body":"<p>Define the <code>Entity</code> class in <em>Hibernate.cfg.xml</em></p>\n\n<pre><code>&lt;mapping class=\"com.supernt.Department\"/&gt;\n</code></pre>\n\n<p>While creating the <code>sessionFactory</code> object Load the <em>Configuration</em> file Like</p>\n\n<pre><code>SessionFactory factory = new AnnotationConfiguration().configure(\"hibernate.cfg.xml\").buildSessionFactory();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7545147,"reputation":171,"user_id":5728489,"display_name":"user5728489"},"down_vote_count":0,"up_vote_count":17,"is_accepted":false,"score":17,"last_activity_date":1451423558,"creation_date":1451423558,"answer_id":34519170,"question_id":23214454,"body_markdown":"When I was trying to rewrite my example (from tutorialspoint) to use annotations, I got the same exception. This helped me (addAnnotatedClass()):\r\n\r\n    \r\n    Configuration cfg=new Configuration(); \r\n    cfg.addAnnotatedClass(com.tutorialspoint.hibernate.entity.Employee.class);\r\n    cfg.configure();","title":"org.hibernate.MappingException: Unknown entity: annotations.Users","body":"<p>When I was trying to rewrite my example (from tutorialspoint) to use annotations, I got the same exception. This helped me (addAnnotatedClass()):</p>\n\n<pre><code>Configuration cfg=new Configuration(); \ncfg.addAnnotatedClass(com.tutorialspoint.hibernate.entity.Employee.class);\ncfg.configure();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4987253,"reputation":101,"user_id":4010471,"display_name":"Shobhit Srivastava"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1457805827,"creation_date":1457804284,"answer_id":35961085,"question_id":23214454,"body_markdown":"I was having same problem. \r\n\r\nUse `@javax.persistence.Entity` instead of `org.hibernate.annotations.Entity`","title":"org.hibernate.MappingException: Unknown entity: annotations.Users","body":"<p>I was having same problem. </p>\n\n<p>Use <code>@javax.persistence.Entity</code> instead of <code>org.hibernate.annotations.Entity</code></p>\n"},{"tags":[],"owner":{"account_id":8376358,"reputation":1,"user_id":6289719,"display_name":"Ishaq"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1462362951,"creation_date":1462351518,"answer_id":37022678,"question_id":23214454,"body_markdown":"Problem occurs because of the entry `mapping class=&quot;annotations.Users&quot;` in `hibernate.cfg.xml` remove that line then it will be work.\r\n\r\n\r\nI had the same issue. When I removed the above line then it was working fine for me.","title":"org.hibernate.MappingException: Unknown entity: annotations.Users","body":"<p>Problem occurs because of the entry <code>mapping class=\"annotations.Users\"</code> in <code>hibernate.cfg.xml</code> remove that line then it will be work.</p>\n\n<p>I had the same issue. When I removed the above line then it was working fine for me.</p>\n"},{"tags":[],"owner":{"account_id":6446230,"reputation":353,"user_id":4994653,"accept_rate":70,"display_name":"Narendra Rawat"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1473073653,"creation_date":1473073653,"answer_id":39329293,"question_id":23214454,"body_markdown":"Instead of using HibernateUtil.java, to create sessionfactory object, you should use this:\r\n\r\n    SessionFactory sessionFactory=new AnnotationConfiguration().configure().buildSessionFactory();\r\n\r\nBecause in order to avoid the exception, you&#39;ll have to declare the class object in HibernateUtil.java file as `configuration.addAnnotatedClass(Student_Info.class);` which looks dumb because we have provided the entry already in hibernate.cfg.xml file.\r\n\r\nTo use the AnnotationConfiguration class you&#39;ll have to add a jar to your project build path:\r\nhttp://www.java2s.com/Code/Jar/h/Downloadhibernate353jar.htm\r\n\r\n  [1]: http://www.java2s.com/Code/Jar/h/Downloadhibernate353jar.htm","title":"org.hibernate.MappingException: Unknown entity: annotations.Users","body":"<p>Instead of using HibernateUtil.java, to create sessionfactory object, you should use this:</p>\n\n<pre><code>SessionFactory sessionFactory=new AnnotationConfiguration().configure().buildSessionFactory();\n</code></pre>\n\n<p>Because in order to avoid the exception, you'll have to declare the class object in HibernateUtil.java file as <code>configuration.addAnnotatedClass(Student_Info.class);</code> which looks dumb because we have provided the entry already in hibernate.cfg.xml file.</p>\n\n<p>To use the AnnotationConfiguration class you'll have to add a jar to your project build path:\n<a href=\"http://www.java2s.com/Code/Jar/h/Downloadhibernate353jar.htm\" rel=\"nofollow\">http://www.java2s.com/Code/Jar/h/Downloadhibernate353jar.htm</a></p>\n"},{"tags":[],"owner":{"account_id":5037825,"reputation":588,"user_id":4046145,"accept_rate":62,"display_name":"Mithun Debnath"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1482997501,"creation_date":1482997501,"answer_id":41375281,"question_id":23214454,"body_markdown":"     public static void main(String[] args) {\r\n\t      try{\r\n\t        // factory = new Configuration().configure().buildSessionFactory();\r\n\t         factory = new AnnotationConfiguration().\r\n\t                   configure().\r\n\t                   //addPackage(&quot;com.xyz&quot;) //add package if used.\r\n\t                   addAnnotatedClass(Employee.class).\r\n\t                   buildSessionFactory();\r\n\t      }catch (Throwable ex) { \r\n\t         System.err.println(&quot;Failed to create sessionFactory object.&quot; + ex);\r\n\t         throw new ExceptionInInitializerError(ex); \r\n\t      }//you can write like this in your test class inside main method.this way you will be able to do the things using annotaions only","title":"org.hibernate.MappingException: Unknown entity: annotations.Users","body":"<pre><code> public static void main(String[] args) {\n      try{\n        // factory = new Configuration().configure().buildSessionFactory();\n         factory = new AnnotationConfiguration().\n                   configure().\n                   //addPackage(\"com.xyz\") //add package if used.\n                   addAnnotatedClass(Employee.class).\n                   buildSessionFactory();\n      }catch (Throwable ex) { \n         System.err.println(\"Failed to create sessionFactory object.\" + ex);\n         throw new ExceptionInInitializerError(ex); \n      }//you can write like this in your test class inside main method.this way you will be able to do the things using annotaions only\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10240016,"reputation":9,"user_id":7557705,"display_name":"Sandy"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1492776851,"creation_date":1492775807,"answer_id":43542118,"question_id":23214454,"body_markdown":"Add the following code to hibernate.cfg.xml\r\n    \r\n      &lt;property name=&quot;hibernate.c3p0.min_size&quot;&gt;5&lt;/property&gt;\r\n      &lt;property name=&quot;hibernate.c3p0.max_size&quot;&gt;20&lt;/property&gt;\r\n      &lt;property name=&quot;hibernate.c3p0.timeout&quot;&gt;300&lt;/property&gt;\r\n      &lt;property name=&quot;hibernate.c3p0.max_statements&quot;&gt;50&lt;/property&gt;\r\n      &lt;property name=&quot;hibernate.c3p0.idle_test_period&quot;&gt;3000&lt;/property&gt;","title":"org.hibernate.MappingException: Unknown entity: annotations.Users","body":"<p>Add the following code to hibernate.cfg.xml</p>\n\n<pre><code>  &lt;property name=\"hibernate.c3p0.min_size\"&gt;5&lt;/property&gt;\n  &lt;property name=\"hibernate.c3p0.max_size\"&gt;20&lt;/property&gt;\n  &lt;property name=\"hibernate.c3p0.timeout\"&gt;300&lt;/property&gt;\n  &lt;property name=\"hibernate.c3p0.max_statements\"&gt;50&lt;/property&gt;\n  &lt;property name=\"hibernate.c3p0.idle_test_period\"&gt;3000&lt;/property&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8613791,"reputation":3578,"user_id":6451425,"accept_rate":95,"display_name":"Ad Infinitum"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1497365944,"creation_date":1497365944,"answer_id":44525087,"question_id":23214454,"body_markdown":"If your entity is mapped through annotations, add the following code to your configuration;\r\n\r\n    configuration.addAnnotatedClass(theEntityPackage.EntityClassName.class);\r\n\r\nFor example;\r\n\r\n    configuration.addAnnotatedClass(com.foo.foo1.Products.class);\r\n\r\nif your entity is mapped with xml file, use addClass instead of addAnnotatedClass.\r\n\r\nAs an example;\r\n\r\n    configuration.addClass(com.foo.foo1.Products.class);\r\n\r\nPing me if you need more help.","title":"org.hibernate.MappingException: Unknown entity: annotations.Users","body":"<p>If your entity is mapped through annotations, add the following code to your configuration;</p>\n\n<pre><code>configuration.addAnnotatedClass(theEntityPackage.EntityClassName.class);\n</code></pre>\n\n<p>For example;</p>\n\n<pre><code>configuration.addAnnotatedClass(com.foo.foo1.Products.class);\n</code></pre>\n\n<p>if your entity is mapped with xml file, use addClass instead of addAnnotatedClass.</p>\n\n<p>As an example;</p>\n\n<pre><code>configuration.addClass(com.foo.foo1.Products.class);\n</code></pre>\n\n<p>Ping me if you need more help.</p>\n"},{"tags":[],"owner":{"account_id":3201379,"reputation":1388,"user_id":2703365,"display_name":"JR Sahoo.&#39;JS&#39;"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1499150121,"creation_date":1499147618,"answer_id":44897884,"question_id":23214454,"body_markdown":"I was facing the same issue and I searched for almost 2 hours and tried with different possible ways like replacing old hibernate JARs and changing the DB table schema. But finally got the solution as below:\r\n\r\n    SessionFactory factory = new Configuration().configure().buildSessionFactory(); //This line to be replaced with below commented line\r\n\r\nReplace above for\r\n\r\n\t\t\r\n\r\n    //Configuration config = new Configuration().configure();\r\n    //ServiceRegistry servReg = new StandardServiceRegistryBuilder().applySettings(config.getProperties()).build();\r\n    //SessionFactory factory = config.buildSessionFactory(servReg);\r\n\r\nIt will then work fine..","title":"org.hibernate.MappingException: Unknown entity: annotations.Users","body":"<p>I was facing the same issue and I searched for almost 2 hours and tried with different possible ways like replacing old hibernate JARs and changing the DB table schema. But finally got the solution as below:</p>\n\n<pre><code>SessionFactory factory = new Configuration().configure().buildSessionFactory(); //This line to be replaced with below commented line\n</code></pre>\n\n<p>Replace above for</p>\n\n<pre><code>//Configuration config = new Configuration().configure();\n//ServiceRegistry servReg = new StandardServiceRegistryBuilder().applySettings(config.getProperties()).build();\n//SessionFactory factory = config.buildSessionFactory(servReg);\n</code></pre>\n\n<p>It will then work fine..</p>\n"},{"tags":[],"owner":{"account_id":1265267,"reputation":205,"user_id":1222690,"accept_rate":33,"display_name":"Rakesh Goswami"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1501169449,"creation_date":1501169449,"answer_id":45355134,"question_id":23214454,"body_markdown":"I was having similar issue and adding \r\n\r\n     sessionFactory.setAnnotatedClasses(User.class);\r\n\r\nthis line helped but before that I was having \r\n\r\n    sessionFactory.setPackagesToScan(new String[] { &quot;com.rg.spring.model&quot; });\r\n\r\nI am not sure why that one is not working.User class is under com.rg.spring.model\r\nPlease let me know how to get it working via packagesToScan method.","title":"org.hibernate.MappingException: Unknown entity: annotations.Users","body":"<p>I was having similar issue and adding </p>\n\n<pre><code> sessionFactory.setAnnotatedClasses(User.class);\n</code></pre>\n\n<p>this line helped but before that I was having </p>\n\n<pre><code>sessionFactory.setPackagesToScan(new String[] { \"com.rg.spring.model\" });\n</code></pre>\n\n<p>I am not sure why that one is not working.User class is under com.rg.spring.model\nPlease let me know how to get it working via packagesToScan method.</p>\n"},{"tags":[],"owner":{"account_id":1034596,"reputation":2386,"user_id":1042226,"accept_rate":52,"display_name":"Master Mind"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1509946930,"creation_date":1509946930,"answer_id":47130434,"question_id":23214454,"body_markdown":"Check the package name is given in the **property packagesToScan** in the dispatcher-servlet.xml   \r\n\r\n    &lt;bean id=&quot;sessionFactory&quot;             class=&quot;org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean&quot;&gt;  \r\n            &lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot; /&gt;  \r\n            &lt;property name=&quot;packagesToScan&quot; value=&quot;**entity package name here**&quot;&gt;&lt;/property&gt; \r\n            &lt;property name=&quot;hibernateProperties&quot;&gt;  \r\n                &lt;props&gt;  \r\n                    &lt;prop key=&quot;hibernate.dialect&quot;&gt;${hibernate.dialect}&lt;/prop&gt;  \r\n                    &lt;prop key=&quot;hibernate.show_sql&quot;&gt;${hibernate.show_sql}&lt;/prop&gt;  \r\n                &lt;/props&gt;  \r\n            &lt;/property&gt;  \r\n        &lt;/bean&gt;","title":"org.hibernate.MappingException: Unknown entity: annotations.Users","body":"<p>Check the package name is given in the <strong>property packagesToScan</strong> in the dispatcher-servlet.xml   </p>\n\n<pre><code>&lt;bean id=\"sessionFactory\"             class=\"org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean\"&gt;  \n        &lt;property name=\"dataSource\" ref=\"dataSource\" /&gt;  \n        &lt;property name=\"packagesToScan\" value=\"**entity package name here**\"&gt;&lt;/property&gt; \n        &lt;property name=\"hibernateProperties\"&gt;  \n            &lt;props&gt;  \n                &lt;prop key=\"hibernate.dialect\"&gt;${hibernate.dialect}&lt;/prop&gt;  \n                &lt;prop key=\"hibernate.show_sql\"&gt;${hibernate.show_sql}&lt;/prop&gt;  \n            &lt;/props&gt;  \n        &lt;/property&gt;  \n    &lt;/bean&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":203980,"reputation":683,"user_id":451937,"accept_rate":44,"display_name":"M Faisal Hameed"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1515529146,"creation_date":1515529146,"answer_id":48176072,"question_id":23214454,"body_markdown":"Use **EntityScanner** if you can bear external dependency.It will inject your all entity classes seamlessly even from multiple packages. Just add following line after configuration setup.\r\n\r\n    Configuration configuration = new Configuration().configure();    \r\n    EntityScanner.scanPackages(&quot;com.fz.epms.db.model.entity&quot;).addTo(configuration);\r\n    // And following depencency if you are using Maven\r\n    &lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.github.v-ladynev&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;fluent-hibernate-core&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;0.3.1&lt;/version&gt;\r\n\t&lt;/dependency&gt;\r\n\r\nThis way you don&#39;t need to declare all entities in hibernate mapping file.","title":"org.hibernate.MappingException: Unknown entity: annotations.Users","body":"<p>Use <strong>EntityScanner</strong> if you can bear external dependency.It will inject your all entity classes seamlessly even from multiple packages. Just add following line after configuration setup.</p>\n\n<pre><code>Configuration configuration = new Configuration().configure();    \nEntityScanner.scanPackages(\"com.fz.epms.db.model.entity\").addTo(configuration);\n// And following depencency if you are using Maven\n&lt;dependency&gt;\n        &lt;groupId&gt;com.github.v-ladynev&lt;/groupId&gt;\n        &lt;artifactId&gt;fluent-hibernate-core&lt;/artifactId&gt;\n        &lt;version&gt;0.3.1&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>This way you don't need to declare all entities in hibernate mapping file.</p>\n"},{"tags":[],"owner":{"account_id":12797889,"reputation":1500,"user_id":9260161,"display_name":"Philip Wrage"},"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1516845821,"creation_date":1516845821,"answer_id":48434528,"question_id":23214454,"body_markdown":"**I did not find the accepted answer helpful in resolving the exception encountered in my code.**  And while not technically incorrect, I was also not satisfied with others&#39; suggestions to introduce redundancy:\r\n\r\n* programmatically re-add the mapped class using `configuration.addAnnotatedClass(...)`\r\n* create a `hbm.xml` file and resource mapping in `hibernate_test.cfg.xml` that were redundant to the existing annotations\r\n* scan the package where the (already mapped) class exists using external dependencies not mentioned in the original question\r\n\r\n***However, I found 2 possible solutions that I wanted to share, both of which independently resolved the exception I encountered in my own code.***\r\n\r\nI was having the same `MappingException` as @ron (using a very nearly identical `HibernateUtil` class):\r\n\r\n    public final class HibernateUtil {\r\n    \r\n        private static SessionFactory sessionFactory = null;\r\n        private static ServiceRegistry serviceRegistry = null;\r\n    \r\n        private HibernateUtil() {}\r\n    \r\n        public static synchronized SessionFactory getSessionFactory() {\r\n            if ( sessionFactory == null ) {\r\n                Configuration configuration = new Configuration().configure(&quot;hibernate_test.cfg.xml&quot;);\r\n                serviceRegistry = new StandardServiceRegistryBuilder()\r\n                        .applySettings(configuration.getProperties())\r\n                        .build();\r\n                sessionFactory = configuration.buildSessionFactory( serviceRegistry );\r\n            }\r\n            return sessionFactory;\r\n        }\r\n    // exception handling and closeSessionFactory() omitted for brevity\r\n    }\r\n\r\nWithin my `hibernate_test.cfg.xml` configuration file, I have the required class mapping:\r\n\r\n    &lt;mapping class=&quot;myPackage.Device&quot;/&gt;\r\n\r\nAnd my `Device` class is properly annotated with the `javax.persistence.Entity` annotation:\r\n\r\n    package myPackage.core;\r\n    import javax.persistence.*;\r\n    \r\n    @Entity\r\n    @Table( name = &quot;devices&quot; )\r\n    public class Device {\r\n        //body omitted for brevity\r\n    }\r\n\r\n\r\n***Two Possible Solutions:***\r\n\r\n***First***, I am using Hibernate 5.2, and for those using Hibernate 5 this solution using a `Metadata` object to build a `SessionFactory` should work.  It also appears to be the currently recommended [native bootstrap mechanism](https://docs.jboss.org/hibernate/orm/5.2/userguide/html_single/Hibernate_User_Guide.html#bootstrap-native) in the [Hibernate Getting Started Guide](http://docs.jboss.org/hibernate/orm/5.2/quickstart/html_single/) :\r\n\r\n    public static synchronized SessionFactory getSessionFactory() {\r\n    \tif ( sessionFactory == null ) {\r\n    \t\t\r\n    \t\t// exception handling omitted for brevity\r\n    \r\n    \t\tserviceRegistry = new StandardServiceRegistryBuilder()\r\n    \t\t\t\t.configure(&quot;hibernate_test.cfg.xml&quot;)\r\n    \t\t\t\t.build();\r\n    \r\n    \t\tsessionFactory = new MetadataSources( serviceRegistry )\r\n    \t\t\t\t\t.buildMetadata()\r\n    \t\t\t\t\t.buildSessionFactory();\r\n    \t}\r\n    \treturn sessionFactory;\r\n    }\r\n\r\n***Second***, while `Configuration` is [semi-deprecated in Hibernate 5](https://docs.jboss.org/hibernate/orm/5.2/userguide/html_single/Hibernate_User_Guide.html#appendix-legacy-bootstrap), @ron didn&#39;t say which version of Hibernate he was using, so this solution could also be of value to some.  \r\n\r\n**I found a very subtle change in the order of operations when instantiating and configuring `Configuration` and `ServiceRegistry` objects to make all the difference in my own code.**  \r\n\r\n*Original order* (`Configuration` created and configured prior to `ServiceRegistry`):\r\n\r\n    public static synchronized SessionFactory getSessionFactory() {\r\n        if ( sessionFactory == null ) {\r\n\t\t\r\n            // exception handling omitted for brevity\r\n\t\t\t\r\n\t\t\tConfiguration configuration = new Configuration().configure(&quot;hibernate_test.cfg.xml&quot;);\r\n\t\t\t\r\n            serviceRegistry = new StandardServiceRegistryBuilder()\r\n                    .applySettings( configuration.getProperties() )\r\n                    .build();\r\n\t\t\t\t\t\r\n            sessionFactory = configuration.buildSessionFactory( serviceRegistry );\r\n        }\r\n        return sessionFactory;\r\n    }\r\n\r\n*New order* (`ServiceRegistry` created and configured prior to `Configuration`):\r\n\r\n    public static synchronized SessionFactory getSessionFactory() {\r\n    \tif ( sessionFactory == null ) {\r\n    \r\n    \t\t// exception handling omitted for brevity\r\n    \t\t\r\n    \t\tserviceRegistry = new StandardServiceRegistryBuilder()\r\n    \t\t\t\t.configure(&quot;hibernate_test.cfg.xml&quot;)\r\n    \t\t\t\t.build();\r\n    \t\t\t\t\r\n    \t\tsessionFactory = new Configuration().buildSessionFactory( serviceRegistry );\r\n    \t}\r\n    \treturn sessionFactory;\r\n    }\r\n\r\nAt the risk of TLDR, I will also point out that with respect to `hibernate_test.cfg.xml` my testing suggests that the `configuration.getProperties()` method only returns `&lt;property /&gt;` elements, and `&lt;mapping /&gt;` elements are excluded.  This appears consistent with the specific use of the terms &#39;property&#39; and &#39;mapping&#39; within the [API documentation](http://docs.jboss.org/hibernate/orm/5.2/javadocs/org/hibernate/cfg/Configuration.html#configure--) for `Configuration`.  I will concede that this behaviour may have something to do with the failure of `applySettings()` to yield the mapping data to the `StandardServiceRegistryBuilder`.  However, this mapping data should already have been parsed during configuration of the `Configuration` object and available to it when `buildSessionFactory()` is called.  Therefore, I suspect this may be due to implementation-specific details regarding resource precedence when a `ServiceRegistry` is passed to a `Configuration` object&#39;s `buildSessionFactory()` method.\r\n\r\nI know this question is several years old now, but I hope this answer saves somebody the hours of research I spent in deriving it.  Cheers!\r\n","title":"org.hibernate.MappingException: Unknown entity: annotations.Users","body":"<p><strong>I did not find the accepted answer helpful in resolving the exception encountered in my code.</strong>  And while not technically incorrect, I was also not satisfied with others' suggestions to introduce redundancy:</p>\n\n<ul>\n<li>programmatically re-add the mapped class using <code>configuration.addAnnotatedClass(...)</code></li>\n<li>create a <code>hbm.xml</code> file and resource mapping in <code>hibernate_test.cfg.xml</code> that were redundant to the existing annotations</li>\n<li>scan the package where the (already mapped) class exists using external dependencies not mentioned in the original question</li>\n</ul>\n\n<p><strong><em>However, I found 2 possible solutions that I wanted to share, both of which independently resolved the exception I encountered in my own code.</em></strong></p>\n\n<p>I was having the same <code>MappingException</code> as @ron (using a very nearly identical <code>HibernateUtil</code> class):</p>\n\n<pre><code>public final class HibernateUtil {\n\n    private static SessionFactory sessionFactory = null;\n    private static ServiceRegistry serviceRegistry = null;\n\n    private HibernateUtil() {}\n\n    public static synchronized SessionFactory getSessionFactory() {\n        if ( sessionFactory == null ) {\n            Configuration configuration = new Configuration().configure(\"hibernate_test.cfg.xml\");\n            serviceRegistry = new StandardServiceRegistryBuilder()\n                    .applySettings(configuration.getProperties())\n                    .build();\n            sessionFactory = configuration.buildSessionFactory( serviceRegistry );\n        }\n        return sessionFactory;\n    }\n// exception handling and closeSessionFactory() omitted for brevity\n}\n</code></pre>\n\n<p>Within my <code>hibernate_test.cfg.xml</code> configuration file, I have the required class mapping:</p>\n\n<pre><code>&lt;mapping class=\"myPackage.Device\"/&gt;\n</code></pre>\n\n<p>And my <code>Device</code> class is properly annotated with the <code>javax.persistence.Entity</code> annotation:</p>\n\n<pre><code>package myPackage.core;\nimport javax.persistence.*;\n\n@Entity\n@Table( name = \"devices\" )\npublic class Device {\n    //body omitted for brevity\n}\n</code></pre>\n\n<p><strong><em>Two Possible Solutions:</em></strong></p>\n\n<p><strong><em>First</em></strong>, I am using Hibernate 5.2, and for those using Hibernate 5 this solution using a <code>Metadata</code> object to build a <code>SessionFactory</code> should work.  It also appears to be the currently recommended <a href=\"https://docs.jboss.org/hibernate/orm/5.2/userguide/html_single/Hibernate_User_Guide.html#bootstrap-native\" rel=\"noreferrer\">native bootstrap mechanism</a> in the <a href=\"http://docs.jboss.org/hibernate/orm/5.2/quickstart/html_single/\" rel=\"noreferrer\">Hibernate Getting Started Guide</a> :</p>\n\n<pre><code>public static synchronized SessionFactory getSessionFactory() {\n    if ( sessionFactory == null ) {\n\n        // exception handling omitted for brevity\n\n        serviceRegistry = new StandardServiceRegistryBuilder()\n                .configure(\"hibernate_test.cfg.xml\")\n                .build();\n\n        sessionFactory = new MetadataSources( serviceRegistry )\n                    .buildMetadata()\n                    .buildSessionFactory();\n    }\n    return sessionFactory;\n}\n</code></pre>\n\n<p><strong><em>Second</em></strong>, while <code>Configuration</code> is <a href=\"https://docs.jboss.org/hibernate/orm/5.2/userguide/html_single/Hibernate_User_Guide.html#appendix-legacy-bootstrap\" rel=\"noreferrer\">semi-deprecated in Hibernate 5</a>, @ron didn't say which version of Hibernate he was using, so this solution could also be of value to some.  </p>\n\n<p><strong>I found a very subtle change in the order of operations when instantiating and configuring <code>Configuration</code> and <code>ServiceRegistry</code> objects to make all the difference in my own code.</strong>  </p>\n\n<p><em>Original order</em> (<code>Configuration</code> created and configured prior to <code>ServiceRegistry</code>):</p>\n\n<pre><code>public static synchronized SessionFactory getSessionFactory() {\n    if ( sessionFactory == null ) {\n\n        // exception handling omitted for brevity\n\n        Configuration configuration = new Configuration().configure(\"hibernate_test.cfg.xml\");\n\n        serviceRegistry = new StandardServiceRegistryBuilder()\n                .applySettings( configuration.getProperties() )\n                .build();\n\n        sessionFactory = configuration.buildSessionFactory( serviceRegistry );\n    }\n    return sessionFactory;\n}\n</code></pre>\n\n<p><em>New order</em> (<code>ServiceRegistry</code> created and configured prior to <code>Configuration</code>):</p>\n\n<pre><code>public static synchronized SessionFactory getSessionFactory() {\n    if ( sessionFactory == null ) {\n\n        // exception handling omitted for brevity\n\n        serviceRegistry = new StandardServiceRegistryBuilder()\n                .configure(\"hibernate_test.cfg.xml\")\n                .build();\n\n        sessionFactory = new Configuration().buildSessionFactory( serviceRegistry );\n    }\n    return sessionFactory;\n}\n</code></pre>\n\n<p>At the risk of TLDR, I will also point out that with respect to <code>hibernate_test.cfg.xml</code> my testing suggests that the <code>configuration.getProperties()</code> method only returns <code>&lt;property /&gt;</code> elements, and <code>&lt;mapping /&gt;</code> elements are excluded.  This appears consistent with the specific use of the terms 'property' and 'mapping' within the <a href=\"http://docs.jboss.org/hibernate/orm/5.2/javadocs/org/hibernate/cfg/Configuration.html#configure--\" rel=\"noreferrer\">API documentation</a> for <code>Configuration</code>.  I will concede that this behaviour may have something to do with the failure of <code>applySettings()</code> to yield the mapping data to the <code>StandardServiceRegistryBuilder</code>.  However, this mapping data should already have been parsed during configuration of the <code>Configuration</code> object and available to it when <code>buildSessionFactory()</code> is called.  Therefore, I suspect this may be due to implementation-specific details regarding resource precedence when a <code>ServiceRegistry</code> is passed to a <code>Configuration</code> object's <code>buildSessionFactory()</code> method.</p>\n\n<p>I know this question is several years old now, but I hope this answer saves somebody the hours of research I spent in deriving it.  Cheers!</p>\n"},{"tags":[],"owner":{"account_id":7124429,"reputation":1,"user_id":6070518,"display_name":"Sanjay Maredla"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1538242416,"creation_date":1538230054,"answer_id":52569138,"question_id":23214454,"body_markdown":"If you are using 5.0x version,configuration with standard service registry is **deprecated**.\r\n\r\nInstead you should bootstrap it with **Metadata**:\r\nIn your HibernateUtil class, you should add\r\n\r\n    private static SessionFactory buildSessionFactory() {\r\n        try {           \r\n            StandardServiceRegistry standardRegistry = new StandardServiceRegistryBuilder()\r\n                .configure( &quot;hibernate.cfg.xml&quot; )\r\n                .build();\r\n\r\n            Metadata metadata = new MetadataSources( standardRegistry )\r\n                .getMetadataBuilder()\r\n                .build();\r\n\r\n            return metadata.getSessionFactoryBuilder().build();\r\n        } catch(...) {\r\n            ...\r\n        }\r\n    }\r\n\r\n","title":"org.hibernate.MappingException: Unknown entity: annotations.Users","body":"<p>If you are using 5.0x version,configuration with standard service registry is <strong>deprecated</strong>.</p>\n\n<p>Instead you should bootstrap it with <strong>Metadata</strong>:\nIn your HibernateUtil class, you should add</p>\n\n<pre><code>private static SessionFactory buildSessionFactory() {\n    try {           \n        StandardServiceRegistry standardRegistry = new StandardServiceRegistryBuilder()\n            .configure( \"hibernate.cfg.xml\" )\n            .build();\n\n        Metadata metadata = new MetadataSources( standardRegistry )\n            .getMetadataBuilder()\n            .build();\n\n        return metadata.getSessionFactoryBuilder().build();\n    } catch(...) {\n        ...\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14007390,"reputation":3,"user_id":10117077,"display_name":"Irfan "},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1564062261,"creation_date":1564062261,"answer_id":57203440,"question_id":23214454,"body_markdown":"In my case it resolves by adding `configuration.addAnnotatedClass(com.myApp.model.Example.class);` after `Configuration configuration = new Configuration().configure(HibernateUtil.class.getResource(&quot;/hibernate.cfg.xml&quot;));` in hibernateUtill class. \r\nIt Read a mapping from the class annotation metadata .\r\nRead more about `addAnnotatedClass()` from [here][1].\r\n\r\n\r\n  [1]: https://docs.jboss.org/hibernate/orm/3.5/api/org/hibernate/cfg/AnnotationConfiguration.html#addAnnotatedClass(java.lang.Class)","title":"org.hibernate.MappingException: Unknown entity: annotations.Users","body":"<p>In my case it resolves by adding <code>configuration.addAnnotatedClass(com.myApp.model.Example.class);</code> after <code>Configuration configuration = new Configuration().configure(HibernateUtil.class.getResource(\"/hibernate.cfg.xml\"));</code> in hibernateUtill class. \nIt Read a mapping from the class annotation metadata .\nRead more about <code>addAnnotatedClass()</code> from <a href=\"https://docs.jboss.org/hibernate/orm/3.5/api/org/hibernate/cfg/AnnotationConfiguration.html#addAnnotatedClass(java.lang.Class)\" rel=\"nofollow noreferrer\">here</a>.</p>\n"},{"tags":[],"owner":{"account_id":6177410,"reputation":1088,"user_id":4813904,"accept_rate":50,"display_name":"Siva"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1577411704,"creation_date":1577409482,"answer_id":59494999,"question_id":23214454,"body_markdown":"Initially I trying with the below code which didn&#39;t work for me\r\n\r\n    MetadataSources metadataSources = new MetadataSources(serviceRegistry);\r\n    Metadata metadata = metadataSources.getMetadataBuilder().build();\r\n    SessionFactory sessionFactory= metadata.getSessionFactoryBuilder().build();\r\n\r\n\r\nFor me below configuration worked. All the hibernate properties i provided from the code itself and using hibernate version 5+. I&#39;m trying to connect to the Postgressql db.\r\n\r\nimports:\r\n\r\n     import org.hibernate.Session;\r\n     import org.hibernate.SessionFactory;\r\n     import org.hibernate.Transaction;\r\n     import org.hibernate.boot.registry.StandardServiceRegistryBuilder;\r\n     import org.hibernate.cfg.Configuration;\r\n     import org.hibernate.cfg.Environment;\r\n     import org.hibernate.service.ServiceRegistry;\r\n\r\ncode:\r\n      \r\n        Configuration configuration = new Configuration();\r\n        configuration.setProperty(&quot;hibernate.current_session_context_class&quot;, &quot;thread&quot;);\r\n        configuration.setProperty(Environment.DRIVER, &quot;org.postgresql.Driver&quot;);\r\n        configuration.setProperty(Environment.URL, lmsParams.getDbProperties().getDbURL());\r\n        configuration.setProperty(Environment.USER, lmsParams.getDbProperties().getUsername());\r\n        configuration.setProperty(Environment.PASS, lmsParams.getDbProperties().getPassword());\r\n\r\n        configuration.setProperty(&quot;hibernate.connection.release_mode&quot;, &quot;auto&quot;);\r\n        configuration.setProperty(&quot;hibernate.dialect&quot;, &quot;org.hibernate.dialect.PostgreSQLDialect&quot;);\r\n        configuration.setProperty(&quot;hibernate.show_sql&quot;, &quot;true&quot;);\r\n        configuration.setProperty(Environment.HBM2DDL_AUTO, &quot;create&quot;);\r\n        configuration.addAnnotatedClass(LMSSourceTable.class);\r\n        ServiceRegistry serviceRegistry = new StandardServiceRegistryBuilder()\r\n                .applySettings(configuration.getProperties())\r\n                .build();\r\n        SessionFactory sessionFactory = configuration.buildSessionFactory(serviceRegistry);\r\n\r\n**Latest Update**:\r\nOne more option worked for me using the **Reflections** package as a dependency. This i tried with both mysql and postgress and it works fine.\r\n\r\n**Some info about Reflections:**\r\nThe Reflections library works as a classpath scanner. It indexes the scanned metadata and allows us to query it at runtime. It can also save this information, so we can collect and use it at any point during our project, without having to re-scan the classpath again\r\n\r\nif you are using maven:\r\n\r\n    &lt;dependency&gt;\r\n    &lt;groupId&gt;org.reflections&lt;/groupId&gt;\r\n    &lt;artifactId&gt;reflections&lt;/artifactId&gt;\r\n    &lt;version&gt;0.9.11&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\ncode:\r\n\r\n     MetadataSources metadataSources = new \r\n     MetadataSources(serviceRegistry);\r\n     Reflections entityPackageReflections = new Reflections(&quot;com.company.abc.package.name&quot;);\r\n        entityPackageReflections.getTypesAnnotatedWith(Entity.class).forEach(metadataSources::addAnnotatedClass);\r\n        Metadata metadata = metadataSources.getMetadataBuilder().build();\r\n        SessionFactory sessionFactory=  metadata.getSessionFactoryBuilder().build();\r\n\r\n","title":"org.hibernate.MappingException: Unknown entity: annotations.Users","body":"<p>Initially I trying with the below code which didn't work for me</p>\n\n<pre><code>MetadataSources metadataSources = new MetadataSources(serviceRegistry);\nMetadata metadata = metadataSources.getMetadataBuilder().build();\nSessionFactory sessionFactory= metadata.getSessionFactoryBuilder().build();\n</code></pre>\n\n<p>For me below configuration worked. All the hibernate properties i provided from the code itself and using hibernate version 5+. I'm trying to connect to the Postgressql db.</p>\n\n<p>imports:</p>\n\n<pre><code> import org.hibernate.Session;\n import org.hibernate.SessionFactory;\n import org.hibernate.Transaction;\n import org.hibernate.boot.registry.StandardServiceRegistryBuilder;\n import org.hibernate.cfg.Configuration;\n import org.hibernate.cfg.Environment;\n import org.hibernate.service.ServiceRegistry;\n</code></pre>\n\n<p>code:</p>\n\n<pre><code>    Configuration configuration = new Configuration();\n    configuration.setProperty(\"hibernate.current_session_context_class\", \"thread\");\n    configuration.setProperty(Environment.DRIVER, \"org.postgresql.Driver\");\n    configuration.setProperty(Environment.URL, lmsParams.getDbProperties().getDbURL());\n    configuration.setProperty(Environment.USER, lmsParams.getDbProperties().getUsername());\n    configuration.setProperty(Environment.PASS, lmsParams.getDbProperties().getPassword());\n\n    configuration.setProperty(\"hibernate.connection.release_mode\", \"auto\");\n    configuration.setProperty(\"hibernate.dialect\", \"org.hibernate.dialect.PostgreSQLDialect\");\n    configuration.setProperty(\"hibernate.show_sql\", \"true\");\n    configuration.setProperty(Environment.HBM2DDL_AUTO, \"create\");\n    configuration.addAnnotatedClass(LMSSourceTable.class);\n    ServiceRegistry serviceRegistry = new StandardServiceRegistryBuilder()\n            .applySettings(configuration.getProperties())\n            .build();\n    SessionFactory sessionFactory = configuration.buildSessionFactory(serviceRegistry);\n</code></pre>\n\n<p><strong>Latest Update</strong>:\nOne more option worked for me using the <strong>Reflections</strong> package as a dependency. This i tried with both mysql and postgress and it works fine.</p>\n\n<p><strong>Some info about Reflections:</strong>\nThe Reflections library works as a classpath scanner. It indexes the scanned metadata and allows us to query it at runtime. It can also save this information, so we can collect and use it at any point during our project, without having to re-scan the classpath again</p>\n\n<p>if you are using maven:</p>\n\n<pre><code>&lt;dependency&gt;\n&lt;groupId&gt;org.reflections&lt;/groupId&gt;\n&lt;artifactId&gt;reflections&lt;/artifactId&gt;\n&lt;version&gt;0.9.11&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>code:</p>\n\n<pre><code> MetadataSources metadataSources = new \n MetadataSources(serviceRegistry);\n Reflections entityPackageReflections = new Reflections(\"com.company.abc.package.name\");\n    entityPackageReflections.getTypesAnnotatedWith(Entity.class).forEach(metadataSources::addAnnotatedClass);\n    Metadata metadata = metadataSources.getMetadataBuilder().build();\n    SessionFactory sessionFactory=  metadata.getSessionFactoryBuilder().build();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":20380230,"reputation":1,"user_id":14950509,"display_name":"Sobhan Akhavan Mahdavi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1617876667,"creation_date":1617864847,"answer_id":66998715,"question_id":23214454,"body_markdown":"I had the same error and the only thing that worked for me was to change the location of **hibernate.cfg.xml** to **src/main/resources**","title":"org.hibernate.MappingException: Unknown entity: annotations.Users","body":"<p>I had the same error and the only thing that worked for me was to change the location of <strong>hibernate.cfg.xml</strong> to <strong>src/main/resources</strong></p>\n"},{"tags":[],"owner":{"account_id":17051306,"reputation":1854,"user_id":12336882,"display_name":"Hamada"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1621330544,"creation_date":1621330544,"answer_id":67583625,"question_id":23214454,"body_markdown":"I fix this error by add in the .xml configuration property name=&quot;packagesToScan&quot; with value=&quot;SCANN_YOUR_PACKAGE.controller.entity&quot; to show a Hibernate where is the package of entity&#39;s.\r\n\r\n\r\n  \r\n\r\n    &lt;!--  Configu Hibernate session factory --&gt;\r\n    \t&lt;bean id=&quot;sessionFactory&quot;\r\n    \t\tclass=&quot;org.springframework.orm.hibernate5.LocalSessionFactoryBean&quot;&gt;\r\n    \t\t&lt;property name=&quot;dataSource&quot; ref=&quot;myDataSource&quot; /&gt;\r\n    \t\t&lt;property name=&quot;packagesToScan&quot; value=&quot;SCANN_YOUR_PACKAGE.controller.entity&quot; /&gt;\r\n    \t\t&lt;property name=&quot;hibernateProperties&quot;&gt;\r\n    \t\t   &lt;props&gt;\r\n    \t\t      &lt;prop key=&quot;hibernate.dialect&quot;&gt;org.hibernate.dialect.MySQLDialect&lt;/prop&gt;\r\n    \t\t      &lt;prop key=&quot;hibernate.show_sql&quot;&gt;true&lt;/prop&gt;\r\n    \t\t   &lt;/props&gt;\r\n    \t\t&lt;/property&gt;\r\n       &lt;/bean&gt;\t","title":"org.hibernate.MappingException: Unknown entity: annotations.Users","body":"<p>I fix this error by add in the .xml configuration property name=&quot;packagesToScan&quot; with value=&quot;SCANN_YOUR_PACKAGE.controller.entity&quot; to show a Hibernate where is the package of entity's.</p>\n<pre><code>&lt;!--  Configu Hibernate session factory --&gt;\n    &lt;bean id=&quot;sessionFactory&quot;\n        class=&quot;org.springframework.orm.hibernate5.LocalSessionFactoryBean&quot;&gt;\n        &lt;property name=&quot;dataSource&quot; ref=&quot;myDataSource&quot; /&gt;\n        &lt;property name=&quot;packagesToScan&quot; value=&quot;SCANN_YOUR_PACKAGE.controller.entity&quot; /&gt;\n        &lt;property name=&quot;hibernateProperties&quot;&gt;\n           &lt;props&gt;\n              &lt;prop key=&quot;hibernate.dialect&quot;&gt;org.hibernate.dialect.MySQLDialect&lt;/prop&gt;\n              &lt;prop key=&quot;hibernate.show_sql&quot;&gt;true&lt;/prop&gt;\n           &lt;/props&gt;\n        &lt;/property&gt;\n   &lt;/bean&gt;  \n</code></pre>\n"},{"tags":[],"owner":{"account_id":18558577,"reputation":29,"user_id":13523067,"display_name":"TEJVEER SINGH"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1633853620,"creation_date":1633853620,"answer_id":69513451,"question_id":23214454,"body_markdown":"  \r\n\r\n**@Entity**\r\n is **deprecated** then **error shows\r\n**Exception in thread &quot;main&quot; org.springframework.orm.hibernate5.HibernateSystemException: Unknown entity: com.spring.orm.entities.Student; nested exception is org.hibernate.MappingException: Unknown entity: com.spring.orm.entities.Student**\r\n**\r\n&gt; My Code is\r\n\r\n  \r\n\r\n    package com.spring.orm.entities;\r\n    \r\n    import javax.persistence.Column;\r\n    import javax.persistence.Id;\r\n    import javax.persistence.Table;\r\n    \r\n    import org.hibernate.annotations.Entity;\r\n    \r\n    @Entity\r\n    @Table(name = &quot;student_details&quot;)\r\n    public class Student {\r\n    \r\n    \t@Id\r\n    \t@Column(name = &quot;student_id&quot;)\r\n    \tprivate int studentId;\r\n    \t@Column(name = &quot;student_name&quot;)\r\n    \tprivate String studentName;\r\n    \t@Column(name = &quot;student_city&quot;)\r\n    \tprivate String studentCity;\r\n    \r\n    \tpublic Student(int studentId, String studentName, String studentCity) {\r\n    \t\tsuper();\r\n    \t\tthis.studentId = studentId;\r\n    \t\tthis.studentName = studentName;\r\n    \t\tthis.studentCity = studentCity;\r\n    \t}\r\n    \r\n    \tpublic Student() {\r\n    \r\n    \t}\r\n    \r\n    \tpublic int getStudentId() {\r\n    \t\treturn studentId;\r\n    \t}\r\n    \r\n    \tpublic void setStudentId(int studentId) {\r\n    \t\tthis.studentId = studentId;\r\n    \t}\r\n    \r\n    \tpublic String getStudentName() {\r\n    \t\treturn studentName;\r\n    \t}\r\n    \r\n    \tpublic void setStudentName(String studentName) {\r\n    \t\tthis.studentName = studentName;\r\n    \t}\r\n    \r\n    \tpublic String getStudentCity() {\r\n    \t\treturn studentCity;\r\n    \t}\r\n    \r\n    \tpublic void setStudentCity(String studentCity) {\r\n    \t\tthis.studentCity = studentCity;\r\n    \t}\r\n    \r\n    }\r\n\r\n  You can use **@javax.persistence.Entity** in place of **@Entity** \r\n\r\n        package com.spring.orm.entities;\r\n    \r\n    import javax.persistence.Column;\r\n    import javax.persistence.Id;\r\n    import javax.persistence.Table;\r\n    \r\n    import org.hibernate.annotations.Entity;\r\n    \r\n    @javax.persistence.Entity\r\n    @Table(name = &quot;student_details&quot;)\r\n    public class Student {\r\n    \r\n    \t@Id\r\n    \t@Column(name = &quot;student_id&quot;)\r\n    \tprivate int studentId;\r\n    \t@Column(name = &quot;student_name&quot;)\r\n    \tprivate String studentName;\r\n    \t@Column(name = &quot;student_city&quot;)\r\n    \tprivate String studentCity;\r\n    \r\n    \tpublic Student(int studentId, String studentName, String studentCity) {\r\n    \t\tsuper();\r\n    \t\tthis.studentId = studentId;\r\n    \t\tthis.studentName = studentName;\r\n    \t\tthis.studentCity = studentCity;\r\n    \t}\r\n    \r\n    \tpublic Student() {\r\n    \r\n    \t}\r\n    \r\n    \tpublic int getStudentId() {\r\n    \t\treturn studentId;\r\n    \t}\r\n    \r\n    \tpublic void setStudentId(int studentId) {\r\n    \t\tthis.studentId = studentId;\r\n    \t}\r\n    \r\n    \tpublic String getStudentName() {\r\n    \t\treturn studentName;\r\n    \t}\r\n    \r\n    \tpublic void setStudentName(String studentName) {\r\n    \t\tthis.studentName = studentName;\r\n    \t}\r\n    \r\n    \tpublic String getStudentCity() {\r\n    \t\treturn studentCity;\r\n    \t}\r\n    \r\n    \tpublic void setStudentCity(String studentCity) {\r\n    \t\tthis.studentCity = studentCity;\r\n    \t}\r\n    \r\n    }\r\n\r\n\r\n\r\n**For more details you can see on my youtube channel**\r\nhttps://youtu.be/uwLU65E4q3Y\r\n\r\n","title":"org.hibernate.MappingException: Unknown entity: annotations.Users","body":"<p><strong>@Entity</strong>\nis <strong>deprecated</strong> then **error shows\n<strong>Exception in thread &quot;main&quot; org.springframework.orm.hibernate5.HibernateSystemException: Unknown entity: com.spring.orm.entities.Student; nested exception is org.hibernate.MappingException: Unknown entity: com.spring.orm.entities.Student</strong>\n**</p>\n<blockquote>\n<p>My Code is</p>\n</blockquote>\n<pre><code>package com.spring.orm.entities;\n\nimport javax.persistence.Column;\nimport javax.persistence.Id;\nimport javax.persistence.Table;\n\nimport org.hibernate.annotations.Entity;\n\n@Entity\n@Table(name = &quot;student_details&quot;)\npublic class Student {\n\n    @Id\n    @Column(name = &quot;student_id&quot;)\n    private int studentId;\n    @Column(name = &quot;student_name&quot;)\n    private String studentName;\n    @Column(name = &quot;student_city&quot;)\n    private String studentCity;\n\n    public Student(int studentId, String studentName, String studentCity) {\n        super();\n        this.studentId = studentId;\n        this.studentName = studentName;\n        this.studentCity = studentCity;\n    }\n\n    public Student() {\n\n    }\n\n    public int getStudentId() {\n        return studentId;\n    }\n\n    public void setStudentId(int studentId) {\n        this.studentId = studentId;\n    }\n\n    public String getStudentName() {\n        return studentName;\n    }\n\n    public void setStudentName(String studentName) {\n        this.studentName = studentName;\n    }\n\n    public String getStudentCity() {\n        return studentCity;\n    }\n\n    public void setStudentCity(String studentCity) {\n        this.studentCity = studentCity;\n    }\n\n}\n</code></pre>\n<p>You can use <strong>@javax.persistence.Entity</strong> in place of <strong>@Entity</strong></p>\n<pre><code>    package com.spring.orm.entities;\n\nimport javax.persistence.Column;\nimport javax.persistence.Id;\nimport javax.persistence.Table;\n\nimport org.hibernate.annotations.Entity;\n\n@javax.persistence.Entity\n@Table(name = &quot;student_details&quot;)\npublic class Student {\n\n    @Id\n    @Column(name = &quot;student_id&quot;)\n    private int studentId;\n    @Column(name = &quot;student_name&quot;)\n    private String studentName;\n    @Column(name = &quot;student_city&quot;)\n    private String studentCity;\n\n    public Student(int studentId, String studentName, String studentCity) {\n        super();\n        this.studentId = studentId;\n        this.studentName = studentName;\n        this.studentCity = studentCity;\n    }\n\n    public Student() {\n\n    }\n\n    public int getStudentId() {\n        return studentId;\n    }\n\n    public void setStudentId(int studentId) {\n        this.studentId = studentId;\n    }\n\n    public String getStudentName() {\n        return studentName;\n    }\n\n    public void setStudentName(String studentName) {\n        this.studentName = studentName;\n    }\n\n    public String getStudentCity() {\n        return studentCity;\n    }\n\n    public void setStudentCity(String studentCity) {\n        this.studentCity = studentCity;\n    }\n\n}\n</code></pre>\n<p><strong>For more details you can see on my youtube channel</strong>\n<a href=\"https://youtu.be/uwLU65E4q3Y\" rel=\"nofollow noreferrer\">https://youtu.be/uwLU65E4q3Y</a></p>\n"},{"tags":[],"owner":{"account_id":9012540,"reputation":1206,"user_id":6716564,"display_name":"ASK"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1643485547,"creation_date":1643485547,"answer_id":70909148,"question_id":23214454,"body_markdown":"The exception occurs because hibernate can locate mapping file (someEntity.hbm.xml)\r\n\r\nOne of the solution is to add hbm xml file to configuration while generating session factory.\r\n\r\n    configuration.addResource(&quot;someEntity.hbm.xml&quot;);","title":"org.hibernate.MappingException: Unknown entity: annotations.Users","body":"<p>The exception occurs because hibernate can locate mapping file (someEntity.hbm.xml)</p>\n<p>One of the solution is to add hbm xml file to configuration while generating session factory.</p>\n<pre><code>configuration.addResource(&quot;someEntity.hbm.xml&quot;);\n</code></pre>\n"}],"owner":{"account_id":408442,"reputation":21426,"user_id":779111,"accept_rate":85,"display_name":"JAN"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":254539,"favorite_count":0,"down_vote_count":0,"up_vote_count":45,"accepted_answer_id":23215605,"answer_count":23,"score":45,"last_activity_date":1643485547,"creation_date":1398155690,"question_id":23214454,"body_markdown":"Consider the hierarchy : \r\n\r\n![enter image description here][1]\r\n\r\nAnd the following classes and xml : \r\n\r\n**HibernateUtil.java**\r\n\r\n    package annotations;\r\n     \r\n    import org.hibernate.SessionFactory;\r\n    import org.hibernate.cfg.Configuration;\r\n    import org.hibernate.service.ServiceRegistry;\r\n    import org.hibernate.service.ServiceRegistryBuilder;\r\n    \r\n    \r\n    /**\r\n     * \r\n     * @author X3\r\n     *\r\n     */\r\n    public class HibernateUtil {\r\n     \r\n        private static final SessionFactory sessionFactory = buildSessionFactory();\r\n        private static final String HIBERNATE_CFG = &quot;hibernateAnnotations.cfg.xml&quot;;\r\n     \r\n    \tprivate static SessionFactory buildSessionFactory() \r\n        {\r\n    \t\tConfiguration cfg = new Configuration().addResource(HIBERNATE_CFG).configure();\r\n    \t\tServiceRegistry serviceRegistry = new ServiceRegistryBuilder().\r\n    \t\t\t\tapplySettings(cfg.getProperties()).buildServiceRegistry();\r\n    \t\tSessionFactory sessionFactory = cfg.buildSessionFactory(serviceRegistry);\r\n    \t\treturn sessionFactory;\r\n        }\r\n     \r\n        public static SessionFactory getSessionFactory() {\r\n            return sessionFactory;\r\n        }\r\n    }\r\n\r\n\r\n**Users.java**\r\n\r\n    package annotations;\r\n    \r\n    import javax.persistence.Column;\r\n    import javax.persistence.Entity;\r\n    import javax.persistence.GeneratedValue;\r\n    import javax.persistence.Id;\r\n    import javax.persistence.Table;\r\n    import java.sql.Timestamp;\r\n    \r\n    @Entity\r\n    @Table(name = &quot;Users&quot;)\r\n    public class Users {\r\n    \r\n    \t@Id\r\n    \t@GeneratedValue\r\n    \t@Column(name = &quot;USER_ID&quot;)\r\n    \tprivate long userID;\r\n    \t\r\n    \t@Column(name = &quot;USERNAME&quot;, nullable = false, length = 100)\r\n    \tprivate String username;\r\n    \t\r\n    \t@Column(name = &quot;MessageTimeDate&quot;, nullable = false)\r\n    \tprivate java.sql.Timestamp datetime;\r\n    \t\r\n    \t@Column(name = &quot;UserMessage&quot;, nullable = false)\r\n    \tprivate String message;\r\n    \t\r\n    \t\r\n    \t\r\n    \tpublic Users(String username , String message)\r\n    \t{\r\n    \t\tjava.util.Date date = new java.util.Date();\r\n    \t\tthis.datetime = new Timestamp(date.getTime());\r\n    \t\t\r\n    \t\tthis.username = username;\r\n    \t\tthis.message = message;\r\n    \t}\r\n    \r\n    \tpublic long getUserID() {\r\n    \t\treturn userID;\r\n    \t}\r\n    \r\n    \tpublic void setUserID(long userID) {\r\n    \t\tthis.userID = userID;\r\n    \t}\r\n    \r\n    \tpublic String getUsername() {\r\n    \t\treturn username;\r\n    \t}\r\n    \r\n    \tpublic void setUsername(String username) {\r\n    \t\tthis.username = username;\r\n    \t}\r\n    \r\n    \tpublic java.sql.Timestamp getDatetime() {\r\n    \t\treturn datetime;\r\n    \t}\r\n    \r\n    \tpublic void setDatetime(java.sql.Timestamp datetime) {\r\n    \t\tthis.datetime = datetime;\r\n    \t}\r\n    \r\n    \tpublic String getMessage() {\r\n    \t\treturn message;\r\n    \t}\r\n    \r\n    \tpublic void setMessage(String message) {\r\n    \t\tthis.message = message;\r\n    \t}\r\n    \r\n    }\r\n\r\n\r\n**Main.java** \r\n\r\n    package annotations;\r\n     \r\n    import org.hibernate.Session;\r\n    import org.hibernate.SessionFactory;\r\n     \r\n    public class Main {\r\n     \r\n        public static void main(String[] args) {\r\n        \t\r\n        \ttry\r\n        \t{\r\n        \t       SessionFactory sf = HibernateUtil.getSessionFactory();\r\n        \t       Session session = sf.openSession();\r\n        \t       session.beginTransaction();\r\n        \t       \r\n        \t       Users user1 = new Users(&quot;Jack&quot; , &quot;Hello&quot;);\r\n        \t       session.save(user1);\r\n        \t       session.getTransaction().commit();\r\n        \t       session.close();\r\n        \t}\r\n        \t\r\n        \tcatch (Exception e)\r\n        \t{\r\n        \t\tSystem.out.println(e.toString());\r\n        \t\te.getStackTrace();\r\n        \t}\r\n     \r\n     \r\n        }\r\n    }\r\n\r\nAnd **hibernateAnnotations.cfg.xml**\r\n\r\n    &lt;?xml version=&#39;1.0&#39; encoding=&#39;utf-8&#39;?&gt;\r\n    &lt;!DOCTYPE hibernate-configuration PUBLIC\r\n            &quot;-//Hibernate/Hibernate Configuration DTD 3.0//EN&quot;\r\n            &quot;http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd&quot;&gt;\r\n    &lt;hibernate-configuration&gt;\r\n        &lt;session-factory&gt;\r\n            &lt;property name=&quot;connection.driver_class&quot;&gt;com.mysql.jdbc.Driver&lt;/property&gt;\r\n            &lt;property name=&quot;connection.url&quot;&gt;jdbc:mysql://localhost:3306/CHAT_DB&lt;/property&gt;\r\n            &lt;property name=&quot;connection.username&quot;&gt;root&lt;/property&gt;\r\n            &lt;property name=&quot;connection.password&quot;&gt;root&lt;/property&gt;\r\n            &lt;property name=&quot;connection.pool_size&quot;&gt;1&lt;/property&gt;\r\n            &lt;property name=&quot;dialect&quot;&gt;org.hibernate.dialect.MySQLDialect&lt;/property&gt;\r\n            &lt;property name=&quot;current_session_context_class&quot;&gt;thread&lt;/property&gt;\r\n            &lt;property name=&quot;cache.provider_class&quot;&gt;org.hibernate.cache.NoCacheProvider&lt;/property&gt;\r\n            &lt;property name=&quot;show_sql&quot;&gt;true&lt;/property&gt;\r\n            &lt;property name=&quot;hbm2ddl.auto&quot;&gt;create&lt;/property&gt;\r\n    \t\t&lt;mapping class=&quot;annotations.Users&quot;&gt;&lt;/mapping&gt; \t\t\r\n        &lt;/session-factory&gt;\r\n    &lt;/hibernate-configuration&gt;\r\n\r\nWhen I run main(), the following error appears in output window : \r\n\r\n    org.hibernate.MappingException: Unknown entity: annotations.Users\r\n\r\nBut the entity `Users` is in `annotations` package , so what&#39;s wrong ? \r\n\r\n  [1]: http://i.stack.imgur.com/wwjQG.gif","title":"org.hibernate.MappingException: Unknown entity: annotations.Users","body":"<p>Consider the hierarchy : </p>\n\n<p><img src=\"https://i.stack.imgur.com/wwjQG.gif\" alt=\"enter image description here\"></p>\n\n<p>And the following classes and xml : </p>\n\n<p><strong>HibernateUtil.java</strong></p>\n\n<pre><code>package annotations;\n\nimport org.hibernate.SessionFactory;\nimport org.hibernate.cfg.Configuration;\nimport org.hibernate.service.ServiceRegistry;\nimport org.hibernate.service.ServiceRegistryBuilder;\n\n\n/**\n * \n * @author X3\n *\n */\npublic class HibernateUtil {\n\n    private static final SessionFactory sessionFactory = buildSessionFactory();\n    private static final String HIBERNATE_CFG = \"hibernateAnnotations.cfg.xml\";\n\n    private static SessionFactory buildSessionFactory() \n    {\n        Configuration cfg = new Configuration().addResource(HIBERNATE_CFG).configure();\n        ServiceRegistry serviceRegistry = new ServiceRegistryBuilder().\n                applySettings(cfg.getProperties()).buildServiceRegistry();\n        SessionFactory sessionFactory = cfg.buildSessionFactory(serviceRegistry);\n        return sessionFactory;\n    }\n\n    public static SessionFactory getSessionFactory() {\n        return sessionFactory;\n    }\n}\n</code></pre>\n\n<p><strong>Users.java</strong></p>\n\n<pre><code>package annotations;\n\nimport javax.persistence.Column;\nimport javax.persistence.Entity;\nimport javax.persistence.GeneratedValue;\nimport javax.persistence.Id;\nimport javax.persistence.Table;\nimport java.sql.Timestamp;\n\n@Entity\n@Table(name = \"Users\")\npublic class Users {\n\n    @Id\n    @GeneratedValue\n    @Column(name = \"USER_ID\")\n    private long userID;\n\n    @Column(name = \"USERNAME\", nullable = false, length = 100)\n    private String username;\n\n    @Column(name = \"MessageTimeDate\", nullable = false)\n    private java.sql.Timestamp datetime;\n\n    @Column(name = \"UserMessage\", nullable = false)\n    private String message;\n\n\n\n    public Users(String username , String message)\n    {\n        java.util.Date date = new java.util.Date();\n        this.datetime = new Timestamp(date.getTime());\n\n        this.username = username;\n        this.message = message;\n    }\n\n    public long getUserID() {\n        return userID;\n    }\n\n    public void setUserID(long userID) {\n        this.userID = userID;\n    }\n\n    public String getUsername() {\n        return username;\n    }\n\n    public void setUsername(String username) {\n        this.username = username;\n    }\n\n    public java.sql.Timestamp getDatetime() {\n        return datetime;\n    }\n\n    public void setDatetime(java.sql.Timestamp datetime) {\n        this.datetime = datetime;\n    }\n\n    public String getMessage() {\n        return message;\n    }\n\n    public void setMessage(String message) {\n        this.message = message;\n    }\n\n}\n</code></pre>\n\n<p><strong>Main.java</strong> </p>\n\n<pre><code>package annotations;\n\nimport org.hibernate.Session;\nimport org.hibernate.SessionFactory;\n\npublic class Main {\n\n    public static void main(String[] args) {\n\n        try\n        {\n               SessionFactory sf = HibernateUtil.getSessionFactory();\n               Session session = sf.openSession();\n               session.beginTransaction();\n\n               Users user1 = new Users(\"Jack\" , \"Hello\");\n               session.save(user1);\n               session.getTransaction().commit();\n               session.close();\n        }\n\n        catch (Exception e)\n        {\n            System.out.println(e.toString());\n            e.getStackTrace();\n        }\n\n\n    }\n}\n</code></pre>\n\n<p>And <strong>hibernateAnnotations.cfg.xml</strong></p>\n\n<pre><code>&lt;?xml version='1.0' encoding='utf-8'?&gt;\n&lt;!DOCTYPE hibernate-configuration PUBLIC\n        \"-//Hibernate/Hibernate Configuration DTD 3.0//EN\"\n        \"http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd\"&gt;\n&lt;hibernate-configuration&gt;\n    &lt;session-factory&gt;\n        &lt;property name=\"connection.driver_class\"&gt;com.mysql.jdbc.Driver&lt;/property&gt;\n        &lt;property name=\"connection.url\"&gt;jdbc:mysql://localhost:3306/CHAT_DB&lt;/property&gt;\n        &lt;property name=\"connection.username\"&gt;root&lt;/property&gt;\n        &lt;property name=\"connection.password\"&gt;root&lt;/property&gt;\n        &lt;property name=\"connection.pool_size\"&gt;1&lt;/property&gt;\n        &lt;property name=\"dialect\"&gt;org.hibernate.dialect.MySQLDialect&lt;/property&gt;\n        &lt;property name=\"current_session_context_class\"&gt;thread&lt;/property&gt;\n        &lt;property name=\"cache.provider_class\"&gt;org.hibernate.cache.NoCacheProvider&lt;/property&gt;\n        &lt;property name=\"show_sql\"&gt;true&lt;/property&gt;\n        &lt;property name=\"hbm2ddl.auto\"&gt;create&lt;/property&gt;\n        &lt;mapping class=\"annotations.Users\"&gt;&lt;/mapping&gt;       \n    &lt;/session-factory&gt;\n&lt;/hibernate-configuration&gt;\n</code></pre>\n\n<p>When I run main(), the following error appears in output window : </p>\n\n<pre><code>org.hibernate.MappingException: Unknown entity: annotations.Users\n</code></pre>\n\n<p>But the entity <code>Users</code> is in <code>annotations</code> package , so what's wrong ? </p>\n"},{"tags":["java","jmx"],"comments":[{"owner":{"account_id":3421244,"reputation":35863,"user_id":2868801,"display_name":"dave_thompson_085"},"score":1,"creation_date":1643504010,"post_id":70908994,"comment_id":125357901,"body_markdown":"Dupe https://stackoverflow.com/questions/834581/remote-jmx-connection and https://stackoverflow.com/questions/856881/how-to-activate-jmx-on-my-jvm-for-access-with-jconsole from 2009 and https://stackoverflow.com/questions/27565320/ from 2014 -- for people who actually look rather than stumbling about.","body":"Dupe <a href=\"https://stackoverflow.com/questions/834581/remote-jmx-connection\">stackoverflow.com/questions/834581/remote-jmx-connection</a> and <a href=\"https://stackoverflow.com/questions/856881/how-to-activate-jmx-on-my-jvm-for-access-with-jconsole\" title=\"how to activate jmx on my jvm for access with jconsole\">stackoverflow.com/questions/856881/&hellip;</a> from 2009 and <a href=\"https://stackoverflow.com/questions/27565320/\">stackoverflow.com/questions/27565320</a> from 2014 -- for people who actually look rather than stumbling about."},{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1643507257,"post_id":70908994,"comment_id":125358309,"body_markdown":"See *Update* at the end of [this Answer](https://stackoverflow.com/a/856882/642706).","body":"See <i>Update</i> at the end of <a href=\"https://stackoverflow.com/a/856882/642706\">this Answer</a>."},{"owner":{"account_id":20696263,"reputation":132,"user_id":15196379,"display_name":"Arjan Singh Bal"},"score":0,"creation_date":1643529841,"post_id":70908994,"comment_id":125360974,"body_markdown":"@BasilBourque it&#39;s the same issue to the one you linked. I probably couldn&#39;t find the answer as I wasn&#39;t searching for the keyword **jconsole**. Thanks for the help!","body":"@BasilBourque it&#39;s the same issue to the one you linked. I probably couldn&#39;t find the answer as I wasn&#39;t searching for the keyword <b>jconsole</b>. Thanks for the help!"}],"answers":[{"tags":[],"owner":{"account_id":20696263,"reputation":132,"user_id":15196379,"display_name":"Arjan Singh Bal"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1643485204,"creation_date":1643485204,"answer_id":70909111,"question_id":70908994,"body_markdown":"Answering my own question for others who stumble upon the same problem. Adding the option `-Djava.rmi.server.hostname=127.0.0.1` to the Java options solves the issue.","title":"Can&#39;t connect to remote JMX running on localhost","body":"<p>Answering my own question for others who stumble upon the same problem. Adding the option <code>-Djava.rmi.server.hostname=127.0.0.1</code> to the Java options solves the issue.</p>\n"}],"owner":{"account_id":20696263,"reputation":132,"user_id":15196379,"display_name":"Arjan Singh Bal"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1539,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"closed_date":1643507198,"answer_count":1,"score":1,"last_activity_date":1643485204,"creation_date":1643484286,"question_id":70908994,"body_markdown":"I have two Kubernetes containers running in a pod, call them container A and B. A has a JMX server running. The Java options used to run the server are:   \r\n```\r\n-Dcom.sun.management.jmxremote=true  \r\n-Dcom.sun.management.jmxremote.host=127.0.0.1  \r\n-Dcom.sun.management.jmxremote.port=1234  \r\n-Dcom.sun.management.jmxremote.ssl=false  \r\n-Dcom.sun.management.jmxremote.authenticate=false\r\n```\r\n`-Dcom.sun.management.jmxremote.host=localhost` flag is set specifically so that JMX server isn&#39;t exposed to external clients.  \r\nContainer B wants to monitor A using JMX over **localhost only**. The connection to JMX server in A is established using the following code:\r\n```\r\nString serverUrl = &quot;service:jmx:rmi:///jndi/rmi://127.0.0.1:1234/jmxrmi&quot;;\r\nJMXConnector jmxConnector = JMXConnectorFactory.connect(serviceUrl, null);\r\nMBeanServerConnection mBeanConn = jmxConnector.getMBeanServerConnection();\r\n```\r\nI was expecting to code to run without any issues since I&#39;m able to connect to JMX port of A from B using telnet. However, when the Java code runs, an exception is thrown, first few lines of which are:\r\n```\r\njava.rmi.ConnectException: Connection refused to host: 10.8.0.88; nested exception is: \r\n\tjava.net.ConnectException: Connection refused (Connection refused)\r\n\tat sun.rmi.transport.tcp.TCPEndpoint.newSocket(TCPEndpoint.java:623) ~[na:1.8.0_312]\r\n\tat sun.rmi.transport.tcp.TCPChannel.createConnection(TCPChannel.java:216) ~[na:1.8.0_312]\r\n\tat sun.rmi.transport.tcp.TCPChannel.newConnection(TCPChannel.java:202) ~[na:1.8.0_312]\r\n\tat sun.rmi.server.UnicastRef.invoke(UnicastRef.java:132) ~[na:1.8.0_312]\r\n```\r\nThe client is using the private IP to connect to RMI server instead of connecting using 127.0.0.1 and is failing as JMX server is listening only on localhost. I need help figuring out the best way to allow communication between containers A &amp; B over localhost.","title":"Can&#39;t connect to remote JMX running on localhost","body":"<p>I have two Kubernetes containers running in a pod, call them container A and B. A has a JMX server running. The Java options used to run the server are:</p>\n<pre><code>-Dcom.sun.management.jmxremote=true  \n-Dcom.sun.management.jmxremote.host=127.0.0.1  \n-Dcom.sun.management.jmxremote.port=1234  \n-Dcom.sun.management.jmxremote.ssl=false  \n-Dcom.sun.management.jmxremote.authenticate=false\n</code></pre>\n<p><code>-Dcom.sun.management.jmxremote.host=localhost</code> flag is set specifically so that JMX server isn't exposed to external clients.<br />\nContainer B wants to monitor A using JMX over <strong>localhost only</strong>. The connection to JMX server in A is established using the following code:</p>\n<pre><code>String serverUrl = &quot;service:jmx:rmi:///jndi/rmi://127.0.0.1:1234/jmxrmi&quot;;\nJMXConnector jmxConnector = JMXConnectorFactory.connect(serviceUrl, null);\nMBeanServerConnection mBeanConn = jmxConnector.getMBeanServerConnection();\n</code></pre>\n<p>I was expecting to code to run without any issues since I'm able to connect to JMX port of A from B using telnet. However, when the Java code runs, an exception is thrown, first few lines of which are:</p>\n<pre><code>java.rmi.ConnectException: Connection refused to host: 10.8.0.88; nested exception is: \n    java.net.ConnectException: Connection refused (Connection refused)\n    at sun.rmi.transport.tcp.TCPEndpoint.newSocket(TCPEndpoint.java:623) ~[na:1.8.0_312]\n    at sun.rmi.transport.tcp.TCPChannel.createConnection(TCPChannel.java:216) ~[na:1.8.0_312]\n    at sun.rmi.transport.tcp.TCPChannel.newConnection(TCPChannel.java:202) ~[na:1.8.0_312]\n    at sun.rmi.server.UnicastRef.invoke(UnicastRef.java:132) ~[na:1.8.0_312]\n</code></pre>\n<p>The client is using the private IP to connect to RMI server instead of connecting using 127.0.0.1 and is failing as JMX server is listening only on localhost. I need help figuring out the best way to allow communication between containers A &amp; B over localhost.</p>\n"},{"tags":["java","spring","spring-boot","spring-data-jpa","spring-data"],"answers":[{"tags":[],"owner":{"account_id":23991598,"reputation":51,"user_id":17977673,"display_name":"Konanaw"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1643484889,"creation_date":1643362536,"answer_id":70891525,"question_id":70362446,"body_markdown":"I propose you the following decision:\r\n\r\n1) Add `@EnableJpaRepositories` and `@EntityScan`\r\n   \r\n```\r\n   @EnableJpaRepositories(basePackageClasses = {UserRepository.class,  RoleRepository.class})\r\n   //@EnableJpaRepositories(basePackages = &quot;hr.fitbit.demo.fitbitconnect.dao.repository&quot;)\r\n   @EntityScan(basePackageClasses = {UserEntity.class, RoleEntity.class})\r\n   @SpringBootTest(classes = TestApplication.class)\r\n   public class UserServiceTest {\r\n```\r\n\r\n2) In module `dao` add class with `@SpringBootApplication` to folder `dao/src/test/java`\r\n```\r\n   package hr.fitbit.demo.fitbitconnect.dao;\r\n\r\n   import org.springframework.boot.autoconfigure.SpringBootApplication;\r\n\r\n   @SpringBootApplication\r\n   public class MockTestApplication {\r\n   }\r\n```\r\nand\r\n```\r\n    @DataJpaTest\r\n    public class RoleEntityTest {\r\n```\r\nmore info here [https://www.baeldung.com/spring-boot-unable-to-find-springbootconfiguration-with-datajpatest][1]\r\n\r\n3) Add `@EnableJpaRepositories` and `@EntityScan` to TestSupport class and FitbitServiceTest class.\r\n\r\nGood luck!\r\n\r\n\r\n  [1]: https://www.baeldung.com/spring-boot-unable-to-find-springbootconfiguration-with-datajpatest","title":"Spring Boot Database initialization failed: SimpleDriverDataSource could not initialize class","body":"<p>I propose you the following decision:</p>\n<ol>\n<li>Add <code>@EnableJpaRepositories</code> and <code>@EntityScan</code></li>\n</ol>\n<pre><code>   @EnableJpaRepositories(basePackageClasses = {UserRepository.class,  RoleRepository.class})\n   //@EnableJpaRepositories(basePackages = &quot;hr.fitbit.demo.fitbitconnect.dao.repository&quot;)\n   @EntityScan(basePackageClasses = {UserEntity.class, RoleEntity.class})\n   @SpringBootTest(classes = TestApplication.class)\n   public class UserServiceTest {\n</code></pre>\n<ol start=\"2\">\n<li>In module <code>dao</code> add class with <code>@SpringBootApplication</code> to folder <code>dao/src/test/java</code></li>\n</ol>\n<pre><code>   package hr.fitbit.demo.fitbitconnect.dao;\n\n   import org.springframework.boot.autoconfigure.SpringBootApplication;\n\n   @SpringBootApplication\n   public class MockTestApplication {\n   }\n</code></pre>\n<p>and</p>\n<pre><code>    @DataJpaTest\n    public class RoleEntityTest {\n</code></pre>\n<p>more info here <a href=\"https://www.baeldung.com/spring-boot-unable-to-find-springbootconfiguration-with-datajpatest\" rel=\"nofollow noreferrer\">https://www.baeldung.com/spring-boot-unable-to-find-springbootconfiguration-with-datajpatest</a></p>\n<ol start=\"3\">\n<li>Add <code>@EnableJpaRepositories</code> and <code>@EntityScan</code> to TestSupport class and FitbitServiceTest class.</li>\n</ol>\n<p>Good luck!</p>\n"}],"owner":{"account_id":6260370,"reputation":3,"user_id":4867697,"display_name":"filip194"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":849,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70891525,"answer_count":1,"score":0,"last_activity_date":1643484889,"creation_date":1639565719,"question_id":70362446,"body_markdown":"I am trying to run tests with Spring Boot context but I am getting an error &quot;**Could not initialize class org.springframework.jdbc.datasource.SimpleDriverDataSource**&quot;.\r\n\r\nI am struggling with this problem for a few days now and can not get it working. Probably I am not familiar enough with Spring Boot testing, but on Spring Boot version 2.3.4 everything worked fine. After upgrading to 2.5.7 and later, (2.6.1) problem persists.\r\n\r\nTest class:\r\n\r\n```\r\n@AutoConfigureTestDatabase(connection = EmbeddedDatabaseConnection.H2)\r\n@ContextConfiguration(classes = TestApplication.class)\r\n@SpringBootTest(properties = {\r\n        &quot;spring.sql.init.url=jdbc:h2:mem:testdb;DB_CLOSE_ON_EXIT=FALSE&quot;,\r\n        &quot;spring.sql.init.driver-class-name=org.h2.Driver&quot;,\r\n        &quot;spring.sql.init.username=user&quot;,\r\n        &quot;spring.sql.init.password=pass&quot;,\r\n        &quot;spring.jpa.hibernate.ddl-auto=update&quot;,\r\n        &quot;spring.jpa.show-sql=true&quot;\r\n}\r\n)\r\npublic class UserServiceTest {\r\n\r\n    private static final String USERNAME_COLUMN = &quot;username&quot;;\r\n\r\n    @Autowired\r\n    private RoleRepository roleRepository;\r\n\r\n    @Autowired\r\n    private UserRepository userRepository;\r\n\r\n    @Autowired\r\n    private UserService userService;\r\n\r\n    @BeforeEach\r\n    @AfterEach\r\n    public void cleanDatabase() {\r\n        userRepository.deleteAll();\r\n        roleRepository.deleteAll();\r\n    }\r\n\r\n    @Test\r\n    @Transactional\r\n    public void shouldRegisterUser() {\r\n        roleRepository.saveAndFlush(RoleFixture.createRoleEntity(UserType.USER.name()));\r\n\r\n        final String username = &quot;username&quot;;\r\n        final UserType type = UserType.USER;\r\n\r\n        final UserRegister userRegister = UserFixture.createUserRegister(\r\n                username,\r\n                &quot;password&quot;,\r\n                &quot;email@test.com&quot;,\r\n                25,\r\n                &quot;name&quot;,\r\n                &quot;last_name&quot;,\r\n                type\r\n        );\r\n        final UserResponse userResponse = userService.registerUser(userRegister);\r\n\r\n        assertThat(userResponse).isNotNull();\r\n        assertThat(userResponse.getUserId()).isNotNull();\r\n        assertThat(userResponse.getUsername()).isEqualTo(username);\r\n        assertThat(userResponse.getType()).isEqualTo(type);\r\n\r\n        assertThat(userRepository.findByUserId(userResponse.getUserId())).isNotEmpty();\r\n    }\r\n```\r\n\r\nContext intializer class:\r\n```\r\npackage hr.fitbit.demo.fitbitconnect.testsupport;\r\n\r\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\r\n\r\n@SpringBootApplication(scanBasePackages = &quot;hr.fitbit.demo.fitbitconnect&quot;)\r\npublic class TestApplication {\r\n}\r\n\r\n```\r\n\r\nMaven dependencies:\r\n```\r\n &lt;!-- spring boot --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.h2database&lt;/groupId&gt;\r\n            &lt;artifactId&gt;h2&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-security-test&lt;/artifactId&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n            &lt;exclusions&gt;\r\n                &lt;exclusion&gt;\r\n                    &lt;groupId&gt;org.junit.vintage&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;junit-vintage-engine&lt;/artifactId&gt;\r\n                &lt;/exclusion&gt;\r\n            &lt;/exclusions&gt;\r\n        &lt;/dependency&gt;\r\n```\r\n\r\nI have tried to include spring-boot-data-jpa, h2, spring-boot-jdbc dependencies but nothing helped. Here is the link to the project &lt;https://github.com/filip194/fitbit-connect&gt; and link to the test: &lt;https://github.com/filip194/fitbit-connect/blob/master/subprojects/users/src/test/java/hr/fitbit/demo/fitbitconnect/users/service/UserServiceTest.java&gt;.\r\n\r\nI have also tried to remove **@AutoConfigureTestDatabase** but then I got another error:\r\n**Could not initialize class com.zaxxer.hikari.HikariDataSource**, which I also could not find solution for, even though I explicitly included dependency in the pom.\r\n\r\nI am currently stuck with this and can not move further with my educational project. Any help would be appreciated.\r\nThanks!\r\n\r\n**EDIT 1:** using **spring.datasource.** or **spring.sql.init.** properties does not change test results or error messages in both cases.","title":"Spring Boot Database initialization failed: SimpleDriverDataSource could not initialize class","body":"<p>I am trying to run tests with Spring Boot context but I am getting an error &quot;<strong>Could not initialize class org.springframework.jdbc.datasource.SimpleDriverDataSource</strong>&quot;.</p>\n<p>I am struggling with this problem for a few days now and can not get it working. Probably I am not familiar enough with Spring Boot testing, but on Spring Boot version 2.3.4 everything worked fine. After upgrading to 2.5.7 and later, (2.6.1) problem persists.</p>\n<p>Test class:</p>\n<pre><code>@AutoConfigureTestDatabase(connection = EmbeddedDatabaseConnection.H2)\n@ContextConfiguration(classes = TestApplication.class)\n@SpringBootTest(properties = {\n        &quot;spring.sql.init.url=jdbc:h2:mem:testdb;DB_CLOSE_ON_EXIT=FALSE&quot;,\n        &quot;spring.sql.init.driver-class-name=org.h2.Driver&quot;,\n        &quot;spring.sql.init.username=user&quot;,\n        &quot;spring.sql.init.password=pass&quot;,\n        &quot;spring.jpa.hibernate.ddl-auto=update&quot;,\n        &quot;spring.jpa.show-sql=true&quot;\n}\n)\npublic class UserServiceTest {\n\n    private static final String USERNAME_COLUMN = &quot;username&quot;;\n\n    @Autowired\n    private RoleRepository roleRepository;\n\n    @Autowired\n    private UserRepository userRepository;\n\n    @Autowired\n    private UserService userService;\n\n    @BeforeEach\n    @AfterEach\n    public void cleanDatabase() {\n        userRepository.deleteAll();\n        roleRepository.deleteAll();\n    }\n\n    @Test\n    @Transactional\n    public void shouldRegisterUser() {\n        roleRepository.saveAndFlush(RoleFixture.createRoleEntity(UserType.USER.name()));\n\n        final String username = &quot;username&quot;;\n        final UserType type = UserType.USER;\n\n        final UserRegister userRegister = UserFixture.createUserRegister(\n                username,\n                &quot;password&quot;,\n                &quot;email@test.com&quot;,\n                25,\n                &quot;name&quot;,\n                &quot;last_name&quot;,\n                type\n        );\n        final UserResponse userResponse = userService.registerUser(userRegister);\n\n        assertThat(userResponse).isNotNull();\n        assertThat(userResponse.getUserId()).isNotNull();\n        assertThat(userResponse.getUsername()).isEqualTo(username);\n        assertThat(userResponse.getType()).isEqualTo(type);\n\n        assertThat(userRepository.findByUserId(userResponse.getUserId())).isNotEmpty();\n    }\n</code></pre>\n<p>Context intializer class:</p>\n<pre><code>package hr.fitbit.demo.fitbitconnect.testsupport;\n\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\n\n@SpringBootApplication(scanBasePackages = &quot;hr.fitbit.demo.fitbitconnect&quot;)\npublic class TestApplication {\n}\n\n</code></pre>\n<p>Maven dependencies:</p>\n<pre><code> &lt;!-- spring boot --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.h2database&lt;/groupId&gt;\n            &lt;artifactId&gt;h2&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-security-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n            &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;org.junit.vintage&lt;/groupId&gt;\n                    &lt;artifactId&gt;junit-vintage-engine&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n            &lt;/exclusions&gt;\n        &lt;/dependency&gt;\n</code></pre>\n<p>I have tried to include spring-boot-data-jpa, h2, spring-boot-jdbc dependencies but nothing helped. Here is the link to the project <a href=\"https://github.com/filip194/fitbit-connect\" rel=\"nofollow noreferrer\">https://github.com/filip194/fitbit-connect</a> and link to the test: <a href=\"https://github.com/filip194/fitbit-connect/blob/master/subprojects/users/src/test/java/hr/fitbit/demo/fitbitconnect/users/service/UserServiceTest.java\" rel=\"nofollow noreferrer\">https://github.com/filip194/fitbit-connect/blob/master/subprojects/users/src/test/java/hr/fitbit/demo/fitbitconnect/users/service/UserServiceTest.java</a>.</p>\n<p>I have also tried to remove <strong>@AutoConfigureTestDatabase</strong> but then I got another error:\n<strong>Could not initialize class com.zaxxer.hikari.HikariDataSource</strong>, which I also could not find solution for, even though I explicitly included dependency in the pom.</p>\n<p>I am currently stuck with this and can not move further with my educational project. Any help would be appreciated.\nThanks!</p>\n<p><strong>EDIT 1:</strong> using <strong>spring.datasource.</strong> or <strong>spring.sql.init.</strong> properties does not change test results or error messages in both cases.</p>\n"},{"tags":["java","xml"],"comments":[{"owner":{"account_id":8112,"reputation":64592,"user_id":14419,"accept_rate":100,"display_name":"Mads Hansen"},"score":1,"creation_date":1643468523,"post_id":70906340,"comment_id":125350137,"body_markdown":"https://stackoverflow.com/a/5895228/14419","body":"<a href=\"https://stackoverflow.com/a/5895228/14419\">stackoverflow.com/a/5895228/14419</a>"},{"owner":{"account_id":23761543,"reputation":59,"user_id":17776870,"display_name":"Danilo Djurovic"},"score":0,"creation_date":1643476481,"post_id":70906340,"comment_id":125352202,"body_markdown":"It returns an empty String when I do it like that.","body":"It returns an empty String when I do it like that."},{"owner":{"account_id":11633624,"reputation":636,"user_id":8520807,"display_name":"Dmytro Bugayev"},"score":0,"creation_date":1643489428,"post_id":70906340,"comment_id":125355345,"body_markdown":"fwif, this is a lot of code to parse a bit of xml. I would suggest you have a look at simplexml. Its premise is that you create a class with the right annotations to allow it parse your xml directly into a coherent java object tree. You just give it the annotated object schema, it then does all the parsing. It handles attributes too.","body":"fwif, this is a lot of code to parse a bit of xml. I would suggest you have a look at simplexml. Its premise is that you create a class with the right annotations to allow it parse your xml directly into a coherent java object tree. You just give it the annotated object schema, it then does all the parsing. It handles attributes too."}],"answers":[{"tags":[],"owner":{"account_id":23761543,"reputation":59,"user_id":17776870,"display_name":"Danilo Djurovic"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1643484857,"creation_date":1643484857,"answer_id":70909066,"question_id":70906340,"body_markdown":"I used this to get the needed result.\r\n\r\n    Node typeNode = car.getElementsByTagName(&quot;consumption&quot;).item(0);\r\n    String type = &quot;Type : &quot; + ((Element) typeNode).getAttribute(&quot;type&quot;);","title":"XML file reading attributes value in java","body":"<p>I used this to get the needed result.</p>\n<pre><code>Node typeNode = car.getElementsByTagName(&quot;consumption&quot;).item(0);\nString type = &quot;Type : &quot; + ((Element) typeNode).getAttribute(&quot;type&quot;);\n</code></pre>\n"}],"owner":{"account_id":23761543,"reputation":59,"user_id":17776870,"display_name":"Danilo Djurovic"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":113,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1643484857,"creation_date":1643466012,"question_id":70906340,"body_markdown":"I have this data in the xml file:\r\n\r\n    &lt;manufacturer&gt;Audi&lt;/manufacturer&gt;\r\n        &lt;model&gt;Q3&lt;/model&gt;\r\n        &lt;production-year&gt;2011&lt;/production-year&gt;\r\n        &lt;horsepower&gt;150&lt;/horsepower&gt;\r\n        &lt;consumption type=&quot;fuel&quot;&gt;7.6&lt;/consumption&gt;\r\n        &lt;price&gt;36430&lt;/price&gt;\r\n\r\nAnd I wrote the following code that lets me read all the nodes from the file.\r\n\r\n    DocumentBuilderFactory builderFactory = DocumentBuilderFactory.newInstance();\r\n                DocumentBuilder builder = null;\r\n                try {\r\n\r\n                    builder = builderFactory.newDocumentBuilder();\r\n\r\n                    Document document = builder.parse(new File(fileName));\r\n\r\n                    Element rootElement = document.getDocumentElement();\r\n\r\n                    NodeList nodes = rootElement.getChildNodes();\r\n                    for (int i = 0; i &lt; nodes.getLength(); i++) {\r\n                        Node node = nodes.item(i);\r\n\r\n                        if (node instanceof Element) {\r\n                            Element car = (Element) node;\r\n\r\n                            String id = car.getAttribute(&quot;id&quot;);\r\n                            String manufacturer = car.getElementsByTagName(&quot;manufacturer&quot;).item(0).getTextContent();\r\n                            String model = car.getElementsByTagName(&quot;model&quot;).item(0).getTextContent();\r\n                            String production_year = car.getElementsByTagName(&quot;production-year&quot;).item(0).getTextContent();\r\n                            String hp = car.getElementsByTagName(&quot;horsepower&quot;).item(0).getTextContent();\r\n                            **String type = &quot;&quot;;**\r\n                            String fuelConsm = car.getElementsByTagName(&quot;consumption&quot;).item(0).getTextContent();\r\n                            String price = car.getElementsByTagName(&quot;price&quot;).item(0).getTextContent();\r\n\r\nMy question is how do I read the value of the attribute type=&quot;&quot; in the xml file and get it as a String?\r\n\r\nThanks in advance.","title":"XML file reading attributes value in java","body":"<p>I have this data in the xml file:</p>\n<pre><code>&lt;manufacturer&gt;Audi&lt;/manufacturer&gt;\n    &lt;model&gt;Q3&lt;/model&gt;\n    &lt;production-year&gt;2011&lt;/production-year&gt;\n    &lt;horsepower&gt;150&lt;/horsepower&gt;\n    &lt;consumption type=&quot;fuel&quot;&gt;7.6&lt;/consumption&gt;\n    &lt;price&gt;36430&lt;/price&gt;\n</code></pre>\n<p>And I wrote the following code that lets me read all the nodes from the file.</p>\n<pre><code>DocumentBuilderFactory builderFactory = DocumentBuilderFactory.newInstance();\n            DocumentBuilder builder = null;\n            try {\n\n                builder = builderFactory.newDocumentBuilder();\n\n                Document document = builder.parse(new File(fileName));\n\n                Element rootElement = document.getDocumentElement();\n\n                NodeList nodes = rootElement.getChildNodes();\n                for (int i = 0; i &lt; nodes.getLength(); i++) {\n                    Node node = nodes.item(i);\n\n                    if (node instanceof Element) {\n                        Element car = (Element) node;\n\n                        String id = car.getAttribute(&quot;id&quot;);\n                        String manufacturer = car.getElementsByTagName(&quot;manufacturer&quot;).item(0).getTextContent();\n                        String model = car.getElementsByTagName(&quot;model&quot;).item(0).getTextContent();\n                        String production_year = car.getElementsByTagName(&quot;production-year&quot;).item(0).getTextContent();\n                        String hp = car.getElementsByTagName(&quot;horsepower&quot;).item(0).getTextContent();\n                        **String type = &quot;&quot;;**\n                        String fuelConsm = car.getElementsByTagName(&quot;consumption&quot;).item(0).getTextContent();\n                        String price = car.getElementsByTagName(&quot;price&quot;).item(0).getTextContent();\n</code></pre>\n<p>My question is how do I read the value of the attribute type=&quot;&quot; in the xml file and get it as a String?</p>\n<p>Thanks in advance.</p>\n"},{"tags":["java","hibernate","jpa"],"comments":[{"owner":{"account_id":8197608,"reputation":822,"user_id":6169894,"display_name":"AminM"},"score":2,"creation_date":1642700819,"post_id":70790859,"comment_id":125147599,"body_markdown":"I&#39;d suggest checking what SQL statement is generated.\nBut some DBMSs are slow with IS NULL. \nAnother thing you could try is putting an index on the field you are running isNull() on. The database may need to table scan to find out which values are null if there&#39;s no index.\n\nIe. your problem is probably a misuse of the DB not hibernate itself.","body":"I&#39;d suggest checking what SQL statement is generated. But some DBMSs are slow with IS NULL.  Another thing you could try is putting an index on the field you are running isNull() on. The database may need to table scan to find out which values are null if there&#39;s no index.  Ie. your problem is probably a misuse of the DB not hibernate itself."},{"owner":{"account_id":11881379,"reputation":1,"user_id":8695015,"display_name":"Sally Mwalr"},"score":0,"creation_date":1643389377,"post_id":70790859,"comment_id":125335105,"body_markdown":"Amin, let me try double-checking your recommendation.\n\nWe of course have a UNIQUE INDEX on that column.\n\nAnd the query is optimal enough when run through PostgreSQL.\n\nThe query that&#39;s generated by hibernate is missing LIMIT clause am wondering if this is being sent through other ways or whether it fetches the entire data and ignoring fetchSingle","body":"Amin, let me try double-checking your recommendation.  We of course have a UNIQUE INDEX on that column.  And the query is optimal enough when run through PostgreSQL.  The query that&#39;s generated by hibernate is missing LIMIT clause am wondering if this is being sent through other ways or whether it fetches the entire data and ignoring fetchSingle"},{"owner":{"account_id":8197608,"reputation":822,"user_id":6169894,"display_name":"AminM"},"score":0,"creation_date":1643484699,"post_id":70790859,"comment_id":125354308,"body_markdown":"I answered below","body":"I answered below"}],"owner":{"account_id":11881379,"reputation":1,"user_id":8695015,"display_name":"Sally Mwalr"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":81,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1643484672,"creation_date":1642700192,"question_id":70790859,"body_markdown":"What makes this query perform differently?\r\n\r\n    CriteriaBuilder builder;\r\n    CriteriaQuery criteria;\r\n    Root root;\r\n\r\n    criteria.where(builder.anyOtherCondition()); // runs at a reasonable speed\r\n    criteria.where(builder.isNull(root.get(&quot;name&quot;))); // takes years\r\n\r\nIt&#39;s as though hibernate is fetching all the data in the database.","title":"How does CriteriaQuery isNull slow down hibernate query?","body":"<p>What makes this query perform differently?</p>\n<pre><code>CriteriaBuilder builder;\nCriteriaQuery criteria;\nRoot root;\n\ncriteria.where(builder.anyOtherCondition()); // runs at a reasonable speed\ncriteria.where(builder.isNull(root.get(&quot;name&quot;))); // takes years\n</code></pre>\n<p>It's as though hibernate is fetching all the data in the database.</p>\n"},{"tags":["java","spring-boot","docker","maven","liquibase"],"comments":[{"owner":{"account_id":10389194,"reputation":14819,"user_id":7661119,"display_name":"Ervin Szilagyi"},"score":1,"creation_date":1643484997,"post_id":70909016,"comment_id":125354368,"body_markdown":"Where is your MySQL database  running? Usually, having a connection string like this `jdbc:mysql://mysqldb:3306` means that the MySQL database running in a Docker container on the same Docker [network](https://docs.docker.com/engine/reference/commandline/network/) as the Java application.","body":"Where is your MySQL database  running? Usually, having a connection string like this <code>jdbc:mysql:&#47;&#47;mysqldb:3306</code> means that the MySQL database running in a Docker container on the same Docker <a href=\"https://docs.docker.com/engine/reference/commandline/network/\" rel=\"nofollow noreferrer\">network</a> as the Java application."},{"owner":{"account_id":4701710,"reputation":267,"user_id":3805118,"accept_rate":60,"display_name":"Marius S"},"score":0,"creation_date":1643486169,"post_id":70909016,"comment_id":125354672,"body_markdown":"@ErvinSzilagyi Thanks for your input, yes, both containers run on the same network.","body":"@ErvinSzilagyi Thanks for your input, yes, both containers run on the same network."}],"owner":{"account_id":4701710,"reputation":267,"user_id":3805118,"accept_rate":60,"display_name":"Marius S"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":556,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1643484429,"creation_date":1643484429,"question_id":70909016,"body_markdown":"I&#39;m trying to dockerize a Spring project of mine that has the Maven Liquibase plugin and I am facing a strange issue.\r\n\r\nGiven this Dockerfile for Spring:\r\n\r\n    FROM maven:3.6.3-jdk-11-slim AS build\r\n    WORKDIR /app\r\n    COPY pom.xml .\r\n    COPY src ./src\r\n    COPY mvnw ./\r\n    COPY mvnw.cmd ./\r\n    ARG MAVEN_OPTS=&quot;-Xmx2G -XX:MaxPermSize=1G&quot;\r\n    ENV MAVEN_OPTS=&quot;${MAVEN_OPTS}&quot;\r\n    RUN mvn clean package\r\n    RUN mvn liquibase:update\r\n    ENTRYPOINT [&quot;java&quot;,&quot;-Xmx1.5G&quot;,&quot;-XX:MaxPermSize=1G&quot;, &quot;-jar&quot;,&quot;target/api-0.0.1-SNAPSHOT.jar&quot;]\r\n\r\nLiquibase throws the following error:\r\n\r\n    liquibase.exception.DatabaseException: liquibase.exception.DatabaseException: liquibase.exception.DatabaseException: Connection could not be created to jdbc:mysql://mysqldb:3306/dockerapi?autoReconnect=true&amp;serverTimezone=Europe/Bucharest&amp;useSSL=false&amp;createDatabaseIfNotExist=true with driver com.mysql.cj.jdbc.Driver.  Could not create connection to database server. Attempted reconnect 3 times. Giving up.\r\n\r\nIf I use this Dockefile instead:\r\n\r\n    FROM maven:3.6.3-jdk-11-slim AS build\r\n    WORKDIR /app\r\n    COPY pom.xml .\r\n    COPY src ./src\r\n    COPY mvnw ./\r\n    COPY mvnw.cmd ./\r\n    ARG MAVEN_OPTS=&quot;-Xmx2G -XX:MaxPermSize=1G&quot;\r\n    ENV MAVEN_OPTS=&quot;${MAVEN_OPTS}&quot;\r\n    RUN mvn clean package\r\n    ENTRYPOINT [&quot;tail&quot;, &quot;-f&quot;, &quot;/dev/null&quot;]\r\n\r\nto start the container, then exec into the container:\r\n\r\nIf I `ping mysqldb`, the result is successful:\r\n\r\n    2 packets transmitted, 2 received, 0% packet loss, time 41ms\r\n\r\nIf I run `mvn:liquibase:update` directly, I get the same error as above:\r\n\r\n    liquibase.exception.DatabaseException: liquibase.exception.DatabaseException: liquibase.exception.DatabaseException: Connection could not be created to jdbc:mysql://mysqldb:3306/dockerapi?autoReconnect=true&amp;serverTimezone=Europe/Bucharest&amp;useSSL=false&amp;createDatabaseIfNotExist=true with driver com.mysql.cj.jdbc.Driver.  Could not create connection to database server. Attempted reconnect 3 times. Giving up.\r\n\r\nHowever, if I first run the app (`java -jar target/api-0.0.1-SNAPSHOT.jar`) or run `mvn test` and only then run `mvn liquibase:update`, the liquibase command will be successful. \r\nIt feels like there is something that Liquibase fails to initialise itself and the Spring app can initialise. \r\n\r\nI have tried adding `mvn test` to the Dockerfile, however Liquibase throws the same error.\r\n\r\n    FROM maven:3.6.3-jdk-11-slim AS build\r\n    WORKDIR /app\r\n    COPY pom.xml .\r\n    COPY src ./src\r\n    COPY mvnw ./\r\n    COPY mvnw.cmd ./\r\n    ARG MAVEN_OPTS=&quot;-Xmx2G -XX:MaxPermSize=1G&quot;\r\n    ENV MAVEN_OPTS=&quot;${MAVEN_OPTS}&quot;\r\n    RUN mvn clean package\r\n    RUN mvn test\r\n    RUN mvn liquibase:update\r\n    ENTRYPOINT [&quot;java&quot;,&quot;-Xmx1.5G&quot;,&quot;-XX:MaxPermSize=1G&quot;, &quot;-jar&quot;,&quot;target/api-0.0.1-SNAPSHOT.jar&quot;]\r\n   ","title":"Strange Liquibase MySQL connection issue from docker","body":"<p>I'm trying to dockerize a Spring project of mine that has the Maven Liquibase plugin and I am facing a strange issue.</p>\n<p>Given this Dockerfile for Spring:</p>\n<pre><code>FROM maven:3.6.3-jdk-11-slim AS build\nWORKDIR /app\nCOPY pom.xml .\nCOPY src ./src\nCOPY mvnw ./\nCOPY mvnw.cmd ./\nARG MAVEN_OPTS=&quot;-Xmx2G -XX:MaxPermSize=1G&quot;\nENV MAVEN_OPTS=&quot;${MAVEN_OPTS}&quot;\nRUN mvn clean package\nRUN mvn liquibase:update\nENTRYPOINT [&quot;java&quot;,&quot;-Xmx1.5G&quot;,&quot;-XX:MaxPermSize=1G&quot;, &quot;-jar&quot;,&quot;target/api-0.0.1-SNAPSHOT.jar&quot;]\n</code></pre>\n<p>Liquibase throws the following error:</p>\n<pre><code>liquibase.exception.DatabaseException: liquibase.exception.DatabaseException: liquibase.exception.DatabaseException: Connection could not be created to jdbc:mysql://mysqldb:3306/dockerapi?autoReconnect=true&amp;serverTimezone=Europe/Bucharest&amp;useSSL=false&amp;createDatabaseIfNotExist=true with driver com.mysql.cj.jdbc.Driver.  Could not create connection to database server. Attempted reconnect 3 times. Giving up.\n</code></pre>\n<p>If I use this Dockefile instead:</p>\n<pre><code>FROM maven:3.6.3-jdk-11-slim AS build\nWORKDIR /app\nCOPY pom.xml .\nCOPY src ./src\nCOPY mvnw ./\nCOPY mvnw.cmd ./\nARG MAVEN_OPTS=&quot;-Xmx2G -XX:MaxPermSize=1G&quot;\nENV MAVEN_OPTS=&quot;${MAVEN_OPTS}&quot;\nRUN mvn clean package\nENTRYPOINT [&quot;tail&quot;, &quot;-f&quot;, &quot;/dev/null&quot;]\n</code></pre>\n<p>to start the container, then exec into the container:</p>\n<p>If I <code>ping mysqldb</code>, the result is successful:</p>\n<pre><code>2 packets transmitted, 2 received, 0% packet loss, time 41ms\n</code></pre>\n<p>If I run <code>mvn:liquibase:update</code> directly, I get the same error as above:</p>\n<pre><code>liquibase.exception.DatabaseException: liquibase.exception.DatabaseException: liquibase.exception.DatabaseException: Connection could not be created to jdbc:mysql://mysqldb:3306/dockerapi?autoReconnect=true&amp;serverTimezone=Europe/Bucharest&amp;useSSL=false&amp;createDatabaseIfNotExist=true with driver com.mysql.cj.jdbc.Driver.  Could not create connection to database server. Attempted reconnect 3 times. Giving up.\n</code></pre>\n<p>However, if I first run the app (<code>java -jar target/api-0.0.1-SNAPSHOT.jar</code>) or run <code>mvn test</code> and only then run <code>mvn liquibase:update</code>, the liquibase command will be successful.\nIt feels like there is something that Liquibase fails to initialise itself and the Spring app can initialise.</p>\n<p>I have tried adding <code>mvn test</code> to the Dockerfile, however Liquibase throws the same error.</p>\n<pre><code>FROM maven:3.6.3-jdk-11-slim AS build\nWORKDIR /app\nCOPY pom.xml .\nCOPY src ./src\nCOPY mvnw ./\nCOPY mvnw.cmd ./\nARG MAVEN_OPTS=&quot;-Xmx2G -XX:MaxPermSize=1G&quot;\nENV MAVEN_OPTS=&quot;${MAVEN_OPTS}&quot;\nRUN mvn clean package\nRUN mvn test\nRUN mvn liquibase:update\nENTRYPOINT [&quot;java&quot;,&quot;-Xmx1.5G&quot;,&quot;-XX:MaxPermSize=1G&quot;, &quot;-jar&quot;,&quot;target/api-0.0.1-SNAPSHOT.jar&quot;]\n</code></pre>\n"},{"tags":["java","spring","spring-boot","spring-mvc","exception"],"comments":[{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":2,"creation_date":1643205557,"post_id":70864533,"comment_id":125277277,"body_markdown":"you can add an aop &quot;when exception thrown&quot;, and handle it like that, I suppose, but then it&#39;s still thrown. why not catching it?","body":"you can add an aop &quot;when exception thrown&quot;, and handle it like that, I suppose, but then it&#39;s still thrown. why not catching it?"},{"owner":{"account_id":15674950,"reputation":75,"user_id":11310433,"display_name":"localhost"},"score":0,"creation_date":1643205657,"post_id":70864533,"comment_id":125277321,"body_markdown":"Yes, sorry to not mention it before. Yes AOP is a way to do it.\n\nGot something that someone is trying to achieve here: https://stackoverflow.com/questions/63913949/exceptionhandler-not-working-in-a-service-class\n\nBut is there any simple way that we are missing here?","body":"Yes, sorry to not mention it before. Yes AOP is a way to do it.  Got something that someone is trying to achieve here: <a href=\"https://stackoverflow.com/questions/63913949/exceptionhandler-not-working-in-a-service-class\" title=\"exceptionhandler not working in a service class\">stackoverflow.com/questions/63913949/&hellip;</a>  But is there any simple way that we are missing here?"},{"owner":{"account_id":7380656,"reputation":1500,"user_id":5617485,"display_name":"tsamridh86"},"score":0,"creation_date":1643206041,"post_id":70864533,"comment_id":125277496,"body_markdown":"this is a very dumb idea, wrap the whole thing in  `try { } catch(Throwable e )`. I repeat, this is extremely dumb and will catch everything, possibly making you unaware of actual issues below","body":"this is a very dumb idea, wrap the whole thing in  <code>try { } catch(Throwable e )</code>. I repeat, this is extremely dumb and will catch everything, possibly making you unaware of actual issues below"}],"answers":[{"tags":[],"owner":{"account_id":1947573,"reputation":6810,"user_id":1752366,"accept_rate":54,"display_name":"silentsudo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1643484176,"creation_date":1643483234,"answer_id":70908829,"question_id":70864533,"body_markdown":"I faced similar issues when dealing with calling multiple apis from rest service, where i was suppose to provide a fallback implementation when error occured. My `Aspect` was more than what i am giving example here.\r\n\r\nService\r\n\r\n```java\r\n@Service\r\npublic class SuspiciousService {\r\n    final Random random = new Random();\r\n\r\n    public String beSuspicious() {\r\n        final boolean value = random.nextBoolean();\r\n        if (value) {\r\n            throw new IllegalStateException(&quot;Exception occured for: &quot; + value);\r\n        }\r\n        return &quot;I am not suspicious&quot;;\r\n    }\r\n}\r\n``` \r\n\r\nSample service which randomly throws an error.\r\n\r\nController\r\n```java\r\n@RestController\r\n@RequestMapping(&quot;/is-suspicious&quot;)\r\n@AllArgsConstructor\r\npublic class SampleController {\r\n    private final SuspiciousService suspiciousService;\r\n\r\n    @GetMapping\r\n    public Map&lt;String, String&gt; get() {\r\n        return Map.of(&quot;isSuspicious&quot;, suspiciousService.beSuspicious());\r\n    }\r\n\r\n}\r\n```\r\n\r\nController which invokes this service.\r\n\r\n\r\nFinally, `Around Aspect` catches this exception and provides the sample response.\r\n```java\r\n@Aspect\r\n@Component\r\n@Order(2)\r\npublic class AspectAroundSuspiciousService {\r\n\r\n    @Around(&quot;execution(* in.silentsudo.sprintbootresttemplate.SuspiciousService.beSuspicious(..))&quot;)\r\n    public Object parallelExecuteBeforeAndAfterCompose(ProceedingJoinPoint point) throws Throwable {\r\n        try {\r\n            return point.proceed();\r\n        } catch (RuntimeException re) {\r\n            return &quot;Yes, I am suspicious&quot;;\r\n        }\r\n    }\r\n\r\n}\r\n\r\n```\r\n\r\n\r\nThe other approach is if you are using ByteBuddy, you can add annotation to the method throwing exception\r\n```java\r\n@Advice.OnMethodExit(onThrowable = RuntimeException.class)\r\n```\r\n\r\nand have an ExceptionHandler to cath this\r\n```java\r\n  @ExceptionHandler\r\n    private String suspiciousRuntimeException(RuntimeException exception) {\r\n        return &quot;Yes, I am suspicious from ex handler, error: &quot; + exception.getMessage();\r\n    }\r\n```\r\n\r\nI choose aspect over bytebuddy for simple reason as i was handling ladder of api exception, where as this implementation will catch in general RuntimeException happenning from service#method","title":"Not throwing exception from a @Service&#39;s methods","body":"<p>I faced similar issues when dealing with calling multiple apis from rest service, where i was suppose to provide a fallback implementation when error occured. My <code>Aspect</code> was more than what i am giving example here.</p>\n<p>Service</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Service\npublic class SuspiciousService {\n    final Random random = new Random();\n\n    public String beSuspicious() {\n        final boolean value = random.nextBoolean();\n        if (value) {\n            throw new IllegalStateException(&quot;Exception occured for: &quot; + value);\n        }\n        return &quot;I am not suspicious&quot;;\n    }\n}\n</code></pre>\n<p>Sample service which randomly throws an error.</p>\n<p>Controller</p>\n<pre class=\"lang-java prettyprint-override\"><code>@RestController\n@RequestMapping(&quot;/is-suspicious&quot;)\n@AllArgsConstructor\npublic class SampleController {\n    private final SuspiciousService suspiciousService;\n\n    @GetMapping\n    public Map&lt;String, String&gt; get() {\n        return Map.of(&quot;isSuspicious&quot;, suspiciousService.beSuspicious());\n    }\n\n}\n</code></pre>\n<p>Controller which invokes this service.</p>\n<p>Finally, <code>Around Aspect</code> catches this exception and provides the sample response.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Aspect\n@Component\n@Order(2)\npublic class AspectAroundSuspiciousService {\n\n    @Around(&quot;execution(* in.silentsudo.sprintbootresttemplate.SuspiciousService.beSuspicious(..))&quot;)\n    public Object parallelExecuteBeforeAndAfterCompose(ProceedingJoinPoint point) throws Throwable {\n        try {\n            return point.proceed();\n        } catch (RuntimeException re) {\n            return &quot;Yes, I am suspicious&quot;;\n        }\n    }\n\n}\n\n</code></pre>\n<p>The other approach is if you are using ByteBuddy, you can add annotation to the method throwing exception</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Advice.OnMethodExit(onThrowable = RuntimeException.class)\n</code></pre>\n<p>and have an ExceptionHandler to cath this</p>\n<pre class=\"lang-java prettyprint-override\"><code>  @ExceptionHandler\n    private String suspiciousRuntimeException(RuntimeException exception) {\n        return &quot;Yes, I am suspicious from ex handler, error: &quot; + exception.getMessage();\n    }\n</code></pre>\n<p>I choose aspect over bytebuddy for simple reason as i was handling ladder of api exception, where as this implementation will catch in general RuntimeException happenning from service#method</p>\n"}],"owner":{"account_id":15674950,"reputation":75,"user_id":11310433,"display_name":"localhost"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1230,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70908829,"answer_count":1,"score":0,"last_activity_date":1643484176,"creation_date":1643205242,"question_id":70864533,"body_markdown":"I have a notification service(I have control of this class). \r\n\r\nIf there is any unchecked exception, then I do not want to throw it. But instead want to log it in a specific manner.\r\n\r\nI can directly have try catch block in each method&#39;s implementation but I am in search of some magic here &#128516;\r\n\r\nIs there a common way that this can be handled through Spring?\r\n\r\n___________________\r\n**Update:**\r\nAOP is also a way to do it. For example: https://dzone.com/articles/handling-exceptions-using-springs-aop\r\nAny other direct implementation for this?\r\n\r\nThis was my requirement but I was not able to find anything with respect to this.","title":"Not throwing exception from a @Service&#39;s methods","body":"<p>I have a notification service(I have control of this class).</p>\n<p>If there is any unchecked exception, then I do not want to throw it. But instead want to log it in a specific manner.</p>\n<p>I can directly have try catch block in each method's implementation but I am in search of some magic here 😄</p>\n<p>Is there a common way that this can be handled through Spring?</p>\n<hr />\n<p><strong>Update:</strong>\nAOP is also a way to do it. For example: <a href=\"https://dzone.com/articles/handling-exceptions-using-springs-aop\" rel=\"nofollow noreferrer\">https://dzone.com/articles/handling-exceptions-using-springs-aop</a>\nAny other direct implementation for this?</p>\n<p>This was my requirement but I was not able to find anything with respect to this.</p>\n"},{"tags":["java","hashmap"],"comments":[{"owner":{"account_id":2389551,"reputation":40441,"user_id":2089675,"accept_rate":80,"display_name":"smac89"},"score":3,"creation_date":1377287647,"post_id":18410816,"comment_id":27044312,"body_markdown":"What programming language is this for? Suspecting Java","body":"What programming language is this for? Suspecting Java"},{"owner":{"account_id":942450,"reputation":23371,"user_id":970288,"accept_rate":88,"display_name":"usethe4ce"},"score":2,"creation_date":1377288849,"post_id":18410816,"comment_id":27044882,"body_markdown":"That kind of assumption has led to a famous DoS attack (https://bugzilla.redhat.com/show_bug.cgi?id=750521). In retrospect, a linked list was a poor choice of bucket implementation, but Java is not going to change it.","body":"That kind of assumption has led to a famous DoS attack (<a href=\"https://bugzilla.redhat.com/show_bug.cgi?id=750521\" rel=\"nofollow noreferrer\">bugzilla.redhat.com/show_bug.cgi?id=750521</a>). In retrospect, a linked list was a poor choice of bucket implementation, but Java is not going to change it."}],"answers":[{"tags":[],"owner":{"account_id":1075043,"reputation":19715,"user_id":1073386,"accept_rate":83,"display_name":"Adam Stelmaszczyk"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1643484006,"creation_date":1377287839,"answer_id":18410875,"question_id":18410816,"body_markdown":"Looking at the source code of [`HashMap`][1] tells us that it&#39;s implemented as an array of Entries: \r\n\r\n    transient Entry[] table;\r\n\r\nEach Entry has a field `next`, so they create a single linked list structure:\r\n\r\n    static class Entry&lt;K,V&gt; implements Map.Entry&lt;K,V&gt; {\r\n        final K key;\r\n        V value;\r\n        Entry&lt;K,V&gt; next;\r\n\r\n&quot;Bucket&quot; is a higher-level term, used in the literature and when explaining hash maps. Here &quot;buckets&quot; are implemented as a single linked lists.\r\n\r\n  [1]: http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/HashMap.java","title":"Is hashMap implemented as an array of linked lists","body":"<p>Looking at the source code of <a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/HashMap.java\" rel=\"nofollow noreferrer\"><code>HashMap</code></a> tells us that it's implemented as an array of Entries:</p>\n<pre><code>transient Entry[] table;\n</code></pre>\n<p>Each Entry has a field <code>next</code>, so they create a single linked list structure:</p>\n<pre><code>static class Entry&lt;K,V&gt; implements Map.Entry&lt;K,V&gt; {\n    final K key;\n    V value;\n    Entry&lt;K,V&gt; next;\n</code></pre>\n<p>&quot;Bucket&quot; is a higher-level term, used in the literature and when explaining hash maps. Here &quot;buckets&quot; are implemented as a single linked lists.</p>\n"},{"tags":[],"owner":{"account_id":936797,"reputation":2054,"user_id":965593,"accept_rate":67,"display_name":"pamphlet"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1377287848,"creation_date":1377287848,"answer_id":18410878,"question_id":18410816,"body_markdown":"In Java&#39;s Hashmap, the buckets are implemented as a linked list (each `Entry` has a reference to another entry called `next`).\r\n\r\nThe term &quot;bucket&quot; is referring to a concept. Linked list an implementation detail.\r\n\r\n","title":"Is hashMap implemented as an array of linked lists","body":"<p>In Java's Hashmap, the buckets are implemented as a linked list (each <code>Entry</code> has a reference to another entry called <code>next</code>).</p>\n\n<p>The term \"bucket\" is referring to a concept. Linked list an implementation detail.</p>\n"},{"tags":[],"owner":{"account_id":3203718,"reputation":400,"user_id":2705230,"accept_rate":86,"display_name":"Daniel Mac"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1377288717,"creation_date":1377288717,"answer_id":18411060,"question_id":18410816,"body_markdown":"Java, uses the concept of &quot;Seperate Chaining&quot; where it&#39;s implemented as an array of linked lists, in order to avoid collisions. \r\nThis though, is not always the case. A hashmap can be implemented as an array entirely (linear probing); this though has a higher chance of creating a colission.\r\n\r\nRegarding your question of &quot;buckets&quot;. You could imagine a linked list as a bucket. However, if your HashMap implementation uses a proper HashFunction (algorithm to distribute your values in the hashmap array), your &quot;buckets&quot; only has, preferably, one item in it.\r\n\r\n","title":"Is hashMap implemented as an array of linked lists","body":"<p>Java, uses the concept of \"Seperate Chaining\" where it's implemented as an array of linked lists, in order to avoid collisions. \nThis though, is not always the case. A hashmap can be implemented as an array entirely (linear probing); this though has a higher chance of creating a colission.</p>\n\n<p>Regarding your question of \"buckets\". You could imagine a linked list as a bucket. However, if your HashMap implementation uses a proper HashFunction (algorithm to distribute your values in the hashmap array), your \"buckets\" only has, preferably, one item in it.</p>\n"}],"owner":{"account_id":205758,"reputation":16759,"user_id":454671,"accept_rate":83,"display_name":"Victor"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4264,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":18410875,"answer_count":3,"score":5,"last_activity_date":1643484006,"creation_date":1377287612,"question_id":18410816,"body_markdown":"While reading about `HashMap` I see that it is implemented as an array of buckets? Now are these buckets always linked lists? If so, why are they called buckets and not linked lists?","title":"Is hashMap implemented as an array of linked lists","body":"<p>While reading about <code>HashMap</code> I see that it is implemented as an array of buckets? Now are these buckets always linked lists? If so, why are they called buckets and not linked lists?</p>\n"},{"tags":["java","maven","unicode"],"comments":[{"owner":{"account_id":1866073,"reputation":448,"user_id":1689608,"display_name":"dshelya"},"score":0,"creation_date":1643484567,"post_id":70907298,"comment_id":125354284,"body_markdown":"It&#39;s allowed to take letters from the entire Unicode character set, so your identifier seems legal. The issue may come from the platform default converter, try to pass `-encoding XXX` param while compiling you code (i.e. `javac -encoding UTF-8 ...`)","body":"It&#39;s allowed to take letters from the entire Unicode character set, so your identifier seems legal. The issue may come from the platform default converter, try to pass <code>-encoding XXX</code> param while compiling you code (i.e. <code>javac -encoding UTF-8 ...</code>)"}],"owner":{"account_id":24093851,"reputation":21,"user_id":18066722,"display_name":"nocewa7668"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":65,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1643482471,"creation_date":1643472655,"question_id":70907298,"body_markdown":"I have the following variable in my java program - `int myVar&#163;&#163;abc = -1;`\r\n\r\nIt compiles fine in the editor and I&#39;m able to run and debug locally (on my Windows machine).\r\n\r\nBut when compiling on a Linux machine using Tycho, I get the following error:\r\n\r\n```\r\n03:01:09 [ERROR] \tint myVar??abc = -1;\r\n03:01:09 [ERROR] \t         ^^^^^\r\n03:01:09 [ERROR] Syntax error on tokens, delete these tokens\r\n```\r\n\r\nIs there a tycho configuration or file conversion I need to do to allow the pound sterling symbol to be processed correctly as a variable name?","title":"Compilation error when using pound sterling as variable name","body":"<p>I have the following variable in my java program - <code>int myVar££abc = -1;</code></p>\n<p>It compiles fine in the editor and I'm able to run and debug locally (on my Windows machine).</p>\n<p>But when compiling on a Linux machine using Tycho, I get the following error:</p>\n<pre><code>03:01:09 [ERROR]    int myVar??abc = -1;\n03:01:09 [ERROR]             ^^^^^\n03:01:09 [ERROR] Syntax error on tokens, delete these tokens\n</code></pre>\n<p>Is there a tycho configuration or file conversion I need to do to allow the pound sterling symbol to be processed correctly as a variable name?</p>\n"},{"tags":["java","spring","spring-boot","spring-data-jpa"],"comments":[{"owner":{"account_id":1251163,"reputation":1546,"user_id":1211547,"accept_rate":50,"display_name":"indybee"},"score":1,"creation_date":1643073470,"post_id":70837883,"comment_id":125238459,"body_markdown":"can you try changing the  `findById` method name to something else? `findById` method should return `Optional&lt;Data&gt;` per base class `CrudRepository`","body":"can you try changing the  <code>findById</code> method name to something else? <code>findById</code> method should return <code>Optional&lt;Data&gt;</code> per base class <code>CrudRepository</code>"},{"owner":{"account_id":12643497,"reputation":72,"user_id":9190107,"display_name":"Lecram"},"score":0,"creation_date":1643114634,"post_id":70837883,"comment_id":125249010,"body_markdown":"I&#39;ve changed it to `Optional&lt;List&lt;DataView&gt;&gt; findByLocation(@RequestParam(&quot;location&quot;) String location);` but it leads to  the same error.","body":"I&#39;ve changed it to <code>Optional&lt;List&lt;DataView&gt;&gt; findByLocation(@RequestParam(&quot;location&quot;) String location);</code> but it leads to  the same error."},{"owner":{"account_id":1251163,"reputation":1546,"user_id":1211547,"accept_rate":50,"display_name":"indybee"},"score":0,"creation_date":1643115063,"post_id":70837883,"comment_id":125249154,"body_markdown":"I think it would be `List&lt;DataView&gt; findByLocation(String location);` but I don&#39;t think that&#39;s the cause of that stracktrace error","body":"I think it would be <code>List&lt;DataView&gt; findByLocation(String location);</code> but I don&#39;t think that&#39;s the cause of that stracktrace error"},{"owner":{"account_id":12643497,"reputation":72,"user_id":9190107,"display_name":"Lecram"},"score":0,"creation_date":1643117780,"post_id":70837883,"comment_id":125250182,"body_markdown":"Looks like it&#39;s caused by a CORS error. Think, the proxy instance has some kind of cross origin mechanic and tomcat refuse the response. That&#39;s a strange behaviour.","body":"Looks like it&#39;s caused by a CORS error. Think, the proxy instance has some kind of cross origin mechanic and tomcat refuse the response. That&#39;s a strange behaviour."},{"owner":{"account_id":1251163,"reputation":1546,"user_id":1211547,"accept_rate":50,"display_name":"indybee"},"score":0,"creation_date":1643154019,"post_id":70837883,"comment_id":125263975,"body_markdown":"you want jpa project right? and not spring data rest projection","body":"you want jpa project right? and not spring data rest projection"},{"owner":{"account_id":12643497,"reputation":72,"user_id":9190107,"display_name":"Lecram"},"score":0,"creation_date":1643160095,"post_id":70837883,"comment_id":125265079,"body_markdown":"I&#39;m using spring data REST:\n`public void configureRepositoryRestConfiguration(RepositoryRestConfiguration config, CorsRegistry cors) {\n\t\t// expose entity id\n\t\tconfig.exposeIdsFor(entityManager.getMetamodel().getEntities().stream().map(e -&gt; e.getJavaType()).collect(Collectors.toList()).toArray(new Class[0]));\n\t}`","body":"I&#39;m using spring data REST: <code>public void configureRepositoryRestConfiguration(RepositoryRestConfigura&zwnj;&#8203;tion config, CorsRegistry cors) { \t\t&#47;&#47; expose entity id \t\tconfig.exposeIdsFor(entityManager.getMetamodel().getEntiti&zwnj;&#8203;es().stream().map(e -&gt; e.getJavaType()).collect(Collectors.toList()).toArray(new Class[0])); \t}</code>"},{"owner":{"account_id":12643497,"reputation":72,"user_id":9190107,"display_name":"Lecram"},"score":0,"creation_date":1643160311,"post_id":70837883,"comment_id":125265113,"body_markdown":"I just noticed that there is a `CorsRegistry cors` parameter. Can I handle the CORS right here?","body":"I just noticed that there is a <code>CorsRegistry cors</code> parameter. Can I handle the CORS right here?"},{"owner":{"account_id":12643497,"reputation":72,"user_id":9190107,"display_name":"Lecram"},"score":0,"creation_date":1643161398,"post_id":70837883,"comment_id":125265284,"body_markdown":"Let us [continue this discussion in chat](https://chat.stackoverflow.com/rooms/241408/discussion-between-marcel-and-indybee).","body":"Let us <a href=\"https://chat.stackoverflow.com/rooms/241408/discussion-between-marcel-and-indybee\">continue this discussion in chat</a>."},{"owner":{"account_id":12643497,"reputation":72,"user_id":9190107,"display_name":"Lecram"},"score":0,"creation_date":1643213070,"post_id":70837883,"comment_id":125280790,"body_markdown":"I figured out that returning a single Closed Projection is working but not multiple Closed Projections like `Collection&lt;DataView&gt; findByLocation(String location)`. If I call `DataView findByLocation(String location)` it works fine. Even with the approach of DTO projection creating a DTO class to select a subset of attributes. All is getting down by returning an `Iterable` like `Collection` or `List` or whatever.","body":"I figured out that returning a single Closed Projection is working but not multiple Closed Projections like <code>Collection&lt;DataView&gt; findByLocation(String location)</code>. If I call <code>DataView findByLocation(String location)</code> it works fine. Even with the approach of DTO projection creating a DTO class to select a subset of attributes. All is getting down by returning an <code>Iterable</code> like <code>Collection</code> or <code>List</code> or whatever."},{"owner":{"account_id":1251163,"reputation":1546,"user_id":1211547,"accept_rate":50,"display_name":"indybee"},"score":0,"creation_date":1643287091,"post_id":70837883,"comment_id":125302383,"body_markdown":"just re-reading your question, is your only goal to return less fields to angular ui, is it ok if the jpa query is still selecting all fields?","body":"just re-reading your question, is your only goal to return less fields to angular ui, is it ok if the jpa query is still selecting all fields?"},{"owner":{"account_id":12643497,"reputation":72,"user_id":9190107,"display_name":"Lecram"},"score":0,"creation_date":1643313973,"post_id":70837883,"comment_id":125313638,"body_markdown":"It seems Spring Data JPA is not able to return a projection in a response to the client out of the box. See here: [github.com](https://github.com/spring-projects/spring-data-rest/issues/1213) Sometimes, the JSON response is about 10MB which is pretty big imo. After subset maybe about 1/3. Right now, it&#39;s a nice-to-have.","body":"It seems Spring Data JPA is not able to return a projection in a response to the client out of the box. See here: <a href=\"https://github.com/spring-projects/spring-data-rest/issues/1213\" rel=\"nofollow noreferrer\">github.com</a> Sometimes, the JSON response is about 10MB which is pretty big imo. After subset maybe about 1/3. Right now, it&#39;s a nice-to-have."}],"answers":[{"tags":[],"owner":{"account_id":7673258,"reputation":1688,"user_id":6200354,"display_name":"atish.s"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1643113828,"creation_date":1643113828,"answer_id":70848673,"question_id":70837883,"body_markdown":"The class `Data` must be a JPA entity. I&#39;m doubting that Data is just a normal DTO class. The ID of entity `Data` is of the type `Long` and the parameter `Integer` is used to query the entity. `@RequestParam` is used in a controller and it is not needed here. `findById` already exists in `CRUD` repository, it is not recommended to override it. It is better to use another method name. The repository name is `SensorDataRepository`, it means it is meant to manage the entity `SensorData` rather than the entity `Data`.\r\n\r\nThe repository and projection interface should look something like below.\r\n\r\n    public interface DataRepository extends JpaRepository&lt;Data, Long&gt; {\r\n        List&lt;DataView&gt; findDataViewById(Long id);\r\n    \r\n        interface DataView {\r\n            Long getId(); // if the field name is `id`, the method name should be `getId()`\r\n        }\r\n    }","title":"Using Closed Projection in Spring Data JPA failed with MappingException","body":"<p>The class <code>Data</code> must be a JPA entity. I'm doubting that Data is just a normal DTO class. The ID of entity <code>Data</code> is of the type <code>Long</code> and the parameter <code>Integer</code> is used to query the entity. <code>@RequestParam</code> is used in a controller and it is not needed here. <code>findById</code> already exists in <code>CRUD</code> repository, it is not recommended to override it. It is better to use another method name. The repository name is <code>SensorDataRepository</code>, it means it is meant to manage the entity <code>SensorData</code> rather than the entity <code>Data</code>.</p>\n<p>The repository and projection interface should look something like below.</p>\n<pre><code>public interface DataRepository extends JpaRepository&lt;Data, Long&gt; {\n    List&lt;DataView&gt; findDataViewById(Long id);\n\n    interface DataView {\n        Long getId(); // if the field name is `id`, the method name should be `getId()`\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1251163,"reputation":1546,"user_id":1211547,"accept_rate":50,"display_name":"indybee"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1643288119,"creation_date":1643287438,"answer_id":70878760,"question_id":70837883,"body_markdown":"If [spring-data-rest projection](https://docs.spring.io/spring-data/rest/docs/current/reference/html/#projections-excerpts) is fine\r\ninstead of JPA projection\r\n\r\n\r\ntry\r\n\r\n- moving the `DataView` interface class to the same package where the `Data` entity is located\r\n\r\n- and add the following annotation on top of the `DataView` class\r\n`@Projection(name = &quot;dataView&quot;, types = Data.class)`\r\n\r\n- then add the `?projection=dataView` query param to your search url\r\n\r\nfor example:\r\n\r\n```\r\nhttp://localhost:8080/data/search/findByLocation?location=someplace&amp;projection=dataView\r\n```","title":"Using Closed Projection in Spring Data JPA failed with MappingException","body":"<p>If <a href=\"https://docs.spring.io/spring-data/rest/docs/current/reference/html/#projections-excerpts\" rel=\"nofollow noreferrer\">spring-data-rest projection</a> is fine\ninstead of JPA projection</p>\n<p>try</p>\n<ul>\n<li><p>moving the <code>DataView</code> interface class to the same package where the <code>Data</code> entity is located</p>\n</li>\n<li><p>and add the following annotation on top of the <code>DataView</code> class\n<code>@Projection(name = &quot;dataView&quot;, types = Data.class)</code></p>\n</li>\n<li><p>then add the <code>?projection=dataView</code> query param to your search url</p>\n</li>\n</ul>\n<p>for example:</p>\n<pre><code>http://localhost:8080/data/search/findByLocation?location=someplace&amp;projection=dataView\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12643497,"reputation":72,"user_id":9190107,"display_name":"Lecram"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1643390475,"creation_date":1643381506,"answer_id":70895658,"question_id":70837883,"body_markdown":"I came up with a new approach to find a solution to minimize the JSON response data of an HTTP request. The key word is [Cache requests][1]. It&#39;s not fixing my requested question but solved the general issue I have.\r\n\r\nRight now, I&#39;m caching nothing in my web app. So, for every change of navigation that causes an HTTP request, it asks the backend for data. Kind of bad behaviour.\r\n\r\nThat should be a good solution avoiding 95% of network traffic. Pretty stupid when I rethink my previous approach to just responding a subset of attributes from an entity... :)\r\n\r\n  [1]: https://angular.io/guide/http#caching-requests","title":"Using Closed Projection in Spring Data JPA failed with MappingException","body":"<p>I came up with a new approach to find a solution to minimize the JSON response data of an HTTP request. The key word is <a href=\"https://angular.io/guide/http#caching-requests\" rel=\"nofollow noreferrer\">Cache requests</a>. It's not fixing my requested question but solved the general issue I have.</p>\n<p>Right now, I'm caching nothing in my web app. So, for every change of navigation that causes an HTTP request, it asks the backend for data. Kind of bad behaviour.</p>\n<p>That should be a good solution avoiding 95% of network traffic. Pretty stupid when I rethink my previous approach to just responding a subset of attributes from an entity... :)</p>\n"},{"tags":[],"owner":{"account_id":12643497,"reputation":72,"user_id":9190107,"display_name":"Lecram"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1643482372,"creation_date":1643482372,"answer_id":70908701,"question_id":70837883,"body_markdown":"Finally, I understand what I did wrong...\r\n\r\nUntil yesterday, I just worked with GET requests which worked pretty fine only using Springs `@Repository` and `@SpringBootApplication`. Today, I started to handle POST requests which requires different mappings for the requests. Springs `@RestController` can handle that. In the [tutorial][1] the controller returns a class `ResponseEntity&lt;T&gt;` which actually handles the response of the request, different media types etc. by using full Spring MVC approach.\r\n\r\nClosed projections and all DTO corresponding stuff are working just fine, now.\r\n\r\nNevertheless, thanks all for your time - especially @indybee!\r\n\r\n  [1]: https://progressivecoder.com/rest-api-using-spring-boot-insert-update/","title":"Using Closed Projection in Spring Data JPA failed with MappingException","body":"<p>Finally, I understand what I did wrong...</p>\n<p>Until yesterday, I just worked with GET requests which worked pretty fine only using Springs <code>@Repository</code> and <code>@SpringBootApplication</code>. Today, I started to handle POST requests which requires different mappings for the requests. Springs <code>@RestController</code> can handle that. In the <a href=\"https://progressivecoder.com/rest-api-using-spring-boot-insert-update/\" rel=\"nofollow noreferrer\">tutorial</a> the controller returns a class <code>ResponseEntity&lt;T&gt;</code> which actually handles the response of the request, different media types etc. by using full Spring MVC approach.</p>\n<p>Closed projections and all DTO corresponding stuff are working just fine, now.</p>\n<p>Nevertheless, thanks all for your time - especially @indybee!</p>\n"}],"owner":{"account_id":12643497,"reputation":72,"user_id":9190107,"display_name":"Lecram"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1060,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":70908701,"answer_count":4,"score":1,"last_activity_date":1643482372,"creation_date":1643044862,"question_id":70837883,"body_markdown":"I try to get a subset of attributes from a JPA entity `Data` by using [interface-based Projection in Spring Data JPA][1] to minimize the JSON response data of an HTTP request from my frontend (Angular).\r\n\r\nUsing Closed Projection seems a good approach to handle that - simple to implement and easy to maintain.\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    public interface DataRepository extends JpaRepository&lt;Data, Long&gt; {\r\n        List&lt;DataView&gt; findByLocation(String location))\r\n\r\n        interface DataView {\r\n\t\t    String getLocation();\r\n    \t}\r\n    }\r\n\r\nI&#39;m using `JpaRepository` to get the full scope of the Spring Data Repository functionality but I receive the following exception in my Tomcat console:\r\n\r\n&lt;!-- language: lang-log --&gt;\r\n\r\n    org.springframework.data.mapping.MappingException: Couldn&#39;t find PersistentEntity for type class com.sun.proxy.$Proxy121!\r\n    \tat org.springframework.data.mapping.context.MappingContext.getRequiredPersistentEntity(MappingContext.java:79) ~[spring-data-commons-2.5.2.jar:2.5.2]\r\n    \tat org.springframework.data.mapping.context.PersistentEntities.getRequiredPersistentEntity(PersistentEntities.java:115) ~[spring-data-commons-2.5.2.jar:2.5.2]\r\n    \tat org.springframework.data.rest.webmvc.PersistentEntityResourceAssembler.wrap(PersistentEntityResourceAssembler.java:90) ~[spring-data-rest-webmvc-3.5.2.jar:3.5.2]\r\n    \tat org.springframework.data.rest.webmvc.PersistentEntityResourceAssembler.toModel(PersistentEntityResourceAssembler.java:73) ~[spring-data-rest-webmvc-3.5.2.jar:3.5.2]\r\n    \tat org.springframework.data.rest.webmvc.AbstractRepositoryRestController.entitiesToResources(AbstractRepositoryRestController.java:110) ~[spring-data-rest-webmvc-3.5.2.jar:3.5.2]\r\n    \tat org.springframework.data.rest.webmvc.AbstractRepositoryRestController.toCollectionModel(AbstractRepositoryRestController.java:80) ~[spring-data-rest-webmvc-3.5.2.jar:3.5.2]\r\n    \tat org.springframework.data.rest.webmvc.RepositorySearchController.lambda$toModel$1(RepositorySearchController.java:204) ~[spring-data-rest-webmvc-3.5.2.jar:3.5.2]\r\n    \tat java.base/java.util.Optional.map(Optional.java:258) ~[na:na]\r\n    \tat org.springframework.data.rest.webmvc.RepositorySearchController.toModel(RepositorySearchController.java:201) ~[spring-data-rest-webmvc-3.5.2.jar:3.5.2]\r\n    \tat org.springframework.data.rest.webmvc.RepositorySearchController.executeSearch(RepositorySearchController.java:185) ~[spring-data-rest-webmvc-3.5.2.jar:3.5.2]\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:64) ~[na:na]\r\n    \tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\r\n    \tat java.base/java.lang.reflect.Method.invoke(Method.java:564) ~[na:na]\r\n    \tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:197) ~[spring-web-5.3.8.jar:5.3.8]\r\n    \tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:141) ~[spring-web-5.3.8.jar:5.3.8]\r\n    \tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:106) ~[spring-webmvc-5.3.8.jar:5.3.8]\r\n    \tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:894) ~[spring-webmvc-5.3.8.jar:5.3.8]\r\n    \tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808) ~[spring-webmvc-5.3.8.jar:5.3.8]\r\n    \tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.3.8.jar:5.3.8]\r\n    \tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1063) ~[spring-webmvc-5.3.8.jar:5.3.8]\r\n    \tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963) ~[spring-webmvc-5.3.8.jar:5.3.8]\r\n    \tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.3.8.jar:5.3.8]\r\n    \tat org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898) ~[spring-webmvc-5.3.8.jar:5.3.8]\r\n    \tat javax.servlet.http.HttpServlet.service(HttpServlet.java:655) ~[servlet-api.jar:4.0.FR]\r\n    \tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.3.8.jar:5.3.8]\r\n    \tat javax.servlet.http.HttpServlet.service(HttpServlet.java:764) ~[servlet-api.jar:4.0.FR]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227) ~[catalina.jar:9.0.56]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[catalina.jar:9.0.56]\r\n    \tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-websocket.jar:9.0.56]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[catalina.jar:9.0.56]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[catalina.jar:9.0.56]\r\n    \tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.8.jar:5.3.8]\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.3.8.jar:5.3.8]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[catalina.jar:9.0.56]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[catalina.jar:9.0.56]\r\n    \tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.8.jar:5.3.8]\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.3.8.jar:5.3.8]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[catalina.jar:9.0.56]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[catalina.jar:9.0.56]\r\n    \tat org.springframework.boot.web.servlet.support.ErrorPageFilter.doFilter(ErrorPageFilter.java:126) ~[spring-boot-2.5.2.jar:2.5.2]\r\n    \tat org.springframework.boot.web.servlet.support.ErrorPageFilter.access$000(ErrorPageFilter.java:64) ~[spring-boot-2.5.2.jar:2.5.2]\r\n    \tat org.springframework.boot.web.servlet.support.ErrorPageFilter$1.doFilterInternal(ErrorPageFilter.java:101) ~[spring-boot-2.5.2.jar:2.5.2]\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.3.8.jar:5.3.8]\r\n    \tat org.springframework.boot.web.servlet.support.ErrorPageFilter.doFilter(ErrorPageFilter.java:119) ~[spring-boot-2.5.2.jar:2.5.2]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[catalina.jar:9.0.56]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[catalina.jar:9.0.56]\r\n    \tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.8.jar:5.3.8]\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.3.8.jar:5.3.8]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[catalina.jar:9.0.56]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[catalina.jar:9.0.56]\r\n    \tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197) ~[catalina.jar:9.0.56]\r\n    \tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) ~[catalina.jar:9.0.56]\r\n    \tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:540) ~[catalina.jar:9.0.56]\r\n    \tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135) ~[catalina.jar:9.0.56]\r\n    \tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[catalina.jar:9.0.56]\r\n    \tat org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:687) ~[catalina.jar:9.0.56]\r\n    \tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) ~[catalina.jar:9.0.56]\r\n    \tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357) ~[catalina.jar:9.0.56]\r\n    \tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:382) ~[tomcat-coyote.jar:9.0.56]\r\n    \tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) ~[tomcat-coyote.jar:9.0.56]\r\n    \tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:895) ~[tomcat-coyote.jar:9.0.56]\r\n    \tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1732) ~[tomcat-coyote.jar:9.0.56]\r\n    \tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-coyote.jar:9.0.56]\r\n    \tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-util.jar:9.0.56]\r\n    \tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-util.jar:9.0.56]\r\n    \tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-util.jar:9.0.56]\r\n    \tat java.base/java.lang.Thread.run(Thread.java:832) ~[na:na]\r\n\r\n\r\n\r\n[I read that][2] &quot;Behind the scenes, Spring creates a proxy instance of the projection interface for each entity object, and all calls to the proxy are forwarded to that object.&quot;\r\n\r\nWhat am I doing wrong here?\r\n\r\nIf you need more information, please let me know.\r\n\r\nThanks in advance for your help!\r\n\r\n**Edit**\r\n\r\nI&#39;ve noticed that I get a CORS error &#39;Access-Control-Allow-Origin&#39; if the frontend request the URL. I assume that the response is some kind of cross origin. Is this caused by the proxy instance I pointed out before? That would be a really strange behaviour. I will try to add `cors.allowed.headers` to the dev tomcat instance and check that out. \r\n\r\n**Result of applying CORS filter**\r\n\r\nSame error as before if I add `http://localhost:8080` or `http://localhost:4200` to dev pr prod tomcat instance `web.xml`. I think, the proxy instance refers to another URL. Anyone has an idea?\r\n\r\n&lt;!-- language: lang-xml --&gt;\r\n\r\n    &lt;filter&gt;\r\n          &lt;filter-name&gt;CorsFilter&lt;/filter-name&gt;\r\n          &lt;filter-class&gt;org.apache.catalina.filters.CorsFilter&lt;/filter-class&gt;\r\n          &lt;init-param&gt;\r\n            &lt;param-name&gt;cors.allowed.origins&lt;/param-name&gt;\r\n            &lt;param-value&gt;http://localhost:4200,http://localhost:8080&lt;/param-value&gt;\r\n          &lt;/init-param&gt;\r\n          &lt;init-param&gt;\r\n            &lt;param-name&gt;cors.allowed.headers&lt;/param-name&gt;\r\n            &lt;param-value&gt;Content-Type,X-Requested-With,accept,Origin,Access-Control-Request-Method,Access-Control-Request-Headers,Access-Control-Allow-Origin&lt;/param-value&gt;\r\n          &lt;/init-param&gt;\r\n          &lt;init-param&gt;\r\n            &lt;param-name&gt;cors.exposed.headers&lt;/param-name&gt;\r\n            &lt;param-value&gt;Access-Control-Allow-Origin&lt;/param-value&gt;\r\n          &lt;/init-param&gt;\r\n        &lt;/filter&gt;\r\n        &lt;filter-mapping&gt;\r\n          &lt;filter-name&gt;CorsFilter&lt;/filter-name&gt;\r\n          &lt;url-pattern&gt;/*&lt;/url-pattern&gt;\r\n        &lt;/filter-mapping&gt;\r\n\r\n  [1]: https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#projections.interfaces\r\n  [2]: https://www.baeldung.com/spring-data-jpa-projections#1-closed-projections","title":"Using Closed Projection in Spring Data JPA failed with MappingException","body":"<p>I try to get a subset of attributes from a JPA entity <code>Data</code> by using <a href=\"https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#projections.interfaces\" rel=\"nofollow noreferrer\">interface-based Projection in Spring Data JPA</a> to minimize the JSON response data of an HTTP request from my frontend (Angular).</p>\n<p>Using Closed Projection seems a good approach to handle that - simple to implement and easy to maintain.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public interface DataRepository extends JpaRepository&lt;Data, Long&gt; {\n    List&lt;DataView&gt; findByLocation(String location))\n\n    interface DataView {\n        String getLocation();\n    }\n}\n</code></pre>\n<p>I'm using <code>JpaRepository</code> to get the full scope of the Spring Data Repository functionality but I receive the following exception in my Tomcat console:</p>\n<pre class=\"lang-log prettyprint-override\"><code>org.springframework.data.mapping.MappingException: Couldn't find PersistentEntity for type class com.sun.proxy.$Proxy121!\n    at org.springframework.data.mapping.context.MappingContext.getRequiredPersistentEntity(MappingContext.java:79) ~[spring-data-commons-2.5.2.jar:2.5.2]\n    at org.springframework.data.mapping.context.PersistentEntities.getRequiredPersistentEntity(PersistentEntities.java:115) ~[spring-data-commons-2.5.2.jar:2.5.2]\n    at org.springframework.data.rest.webmvc.PersistentEntityResourceAssembler.wrap(PersistentEntityResourceAssembler.java:90) ~[spring-data-rest-webmvc-3.5.2.jar:3.5.2]\n    at org.springframework.data.rest.webmvc.PersistentEntityResourceAssembler.toModel(PersistentEntityResourceAssembler.java:73) ~[spring-data-rest-webmvc-3.5.2.jar:3.5.2]\n    at org.springframework.data.rest.webmvc.AbstractRepositoryRestController.entitiesToResources(AbstractRepositoryRestController.java:110) ~[spring-data-rest-webmvc-3.5.2.jar:3.5.2]\n    at org.springframework.data.rest.webmvc.AbstractRepositoryRestController.toCollectionModel(AbstractRepositoryRestController.java:80) ~[spring-data-rest-webmvc-3.5.2.jar:3.5.2]\n    at org.springframework.data.rest.webmvc.RepositorySearchController.lambda$toModel$1(RepositorySearchController.java:204) ~[spring-data-rest-webmvc-3.5.2.jar:3.5.2]\n    at java.base/java.util.Optional.map(Optional.java:258) ~[na:na]\n    at org.springframework.data.rest.webmvc.RepositorySearchController.toModel(RepositorySearchController.java:201) ~[spring-data-rest-webmvc-3.5.2.jar:3.5.2]\n    at org.springframework.data.rest.webmvc.RepositorySearchController.executeSearch(RepositorySearchController.java:185) ~[spring-data-rest-webmvc-3.5.2.jar:3.5.2]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:64) ~[na:na]\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\n    at java.base/java.lang.reflect.Method.invoke(Method.java:564) ~[na:na]\n    at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:197) ~[spring-web-5.3.8.jar:5.3.8]\n    at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:141) ~[spring-web-5.3.8.jar:5.3.8]\n    at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:106) ~[spring-webmvc-5.3.8.jar:5.3.8]\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:894) ~[spring-webmvc-5.3.8.jar:5.3.8]\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808) ~[spring-webmvc-5.3.8.jar:5.3.8]\n    at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.3.8.jar:5.3.8]\n    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1063) ~[spring-webmvc-5.3.8.jar:5.3.8]\n    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963) ~[spring-webmvc-5.3.8.jar:5.3.8]\n    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.3.8.jar:5.3.8]\n    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898) ~[spring-webmvc-5.3.8.jar:5.3.8]\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:655) ~[servlet-api.jar:4.0.FR]\n    at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.3.8.jar:5.3.8]\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:764) ~[servlet-api.jar:4.0.FR]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227) ~[catalina.jar:9.0.56]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[catalina.jar:9.0.56]\n    at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-websocket.jar:9.0.56]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[catalina.jar:9.0.56]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[catalina.jar:9.0.56]\n    at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.8.jar:5.3.8]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.3.8.jar:5.3.8]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[catalina.jar:9.0.56]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[catalina.jar:9.0.56]\n    at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.8.jar:5.3.8]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.3.8.jar:5.3.8]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[catalina.jar:9.0.56]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[catalina.jar:9.0.56]\n    at org.springframework.boot.web.servlet.support.ErrorPageFilter.doFilter(ErrorPageFilter.java:126) ~[spring-boot-2.5.2.jar:2.5.2]\n    at org.springframework.boot.web.servlet.support.ErrorPageFilter.access$000(ErrorPageFilter.java:64) ~[spring-boot-2.5.2.jar:2.5.2]\n    at org.springframework.boot.web.servlet.support.ErrorPageFilter$1.doFilterInternal(ErrorPageFilter.java:101) ~[spring-boot-2.5.2.jar:2.5.2]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.3.8.jar:5.3.8]\n    at org.springframework.boot.web.servlet.support.ErrorPageFilter.doFilter(ErrorPageFilter.java:119) ~[spring-boot-2.5.2.jar:2.5.2]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[catalina.jar:9.0.56]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[catalina.jar:9.0.56]\n    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.8.jar:5.3.8]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.3.8.jar:5.3.8]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[catalina.jar:9.0.56]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[catalina.jar:9.0.56]\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197) ~[catalina.jar:9.0.56]\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) ~[catalina.jar:9.0.56]\n    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:540) ~[catalina.jar:9.0.56]\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135) ~[catalina.jar:9.0.56]\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[catalina.jar:9.0.56]\n    at org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:687) ~[catalina.jar:9.0.56]\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) ~[catalina.jar:9.0.56]\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357) ~[catalina.jar:9.0.56]\n    at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:382) ~[tomcat-coyote.jar:9.0.56]\n    at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) ~[tomcat-coyote.jar:9.0.56]\n    at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:895) ~[tomcat-coyote.jar:9.0.56]\n    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1732) ~[tomcat-coyote.jar:9.0.56]\n    at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-coyote.jar:9.0.56]\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-util.jar:9.0.56]\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-util.jar:9.0.56]\n    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-util.jar:9.0.56]\n    at java.base/java.lang.Thread.run(Thread.java:832) ~[na:na]\n</code></pre>\n<p><a href=\"https://www.baeldung.com/spring-data-jpa-projections#1-closed-projections\" rel=\"nofollow noreferrer\">I read that</a> &quot;Behind the scenes, Spring creates a proxy instance of the projection interface for each entity object, and all calls to the proxy are forwarded to that object.&quot;</p>\n<p>What am I doing wrong here?</p>\n<p>If you need more information, please let me know.</p>\n<p>Thanks in advance for your help!</p>\n<p><strong>Edit</strong></p>\n<p>I've noticed that I get a CORS error 'Access-Control-Allow-Origin' if the frontend request the URL. I assume that the response is some kind of cross origin. Is this caused by the proxy instance I pointed out before? That would be a really strange behaviour. I will try to add <code>cors.allowed.headers</code> to the dev tomcat instance and check that out.</p>\n<p><strong>Result of applying CORS filter</strong></p>\n<p>Same error as before if I add <code>http://localhost:8080</code> or <code>http://localhost:4200</code> to dev pr prod tomcat instance <code>web.xml</code>. I think, the proxy instance refers to another URL. Anyone has an idea?</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;filter&gt;\n      &lt;filter-name&gt;CorsFilter&lt;/filter-name&gt;\n      &lt;filter-class&gt;org.apache.catalina.filters.CorsFilter&lt;/filter-class&gt;\n      &lt;init-param&gt;\n        &lt;param-name&gt;cors.allowed.origins&lt;/param-name&gt;\n        &lt;param-value&gt;http://localhost:4200,http://localhost:8080&lt;/param-value&gt;\n      &lt;/init-param&gt;\n      &lt;init-param&gt;\n        &lt;param-name&gt;cors.allowed.headers&lt;/param-name&gt;\n        &lt;param-value&gt;Content-Type,X-Requested-With,accept,Origin,Access-Control-Request-Method,Access-Control-Request-Headers,Access-Control-Allow-Origin&lt;/param-value&gt;\n      &lt;/init-param&gt;\n      &lt;init-param&gt;\n        &lt;param-name&gt;cors.exposed.headers&lt;/param-name&gt;\n        &lt;param-value&gt;Access-Control-Allow-Origin&lt;/param-value&gt;\n      &lt;/init-param&gt;\n    &lt;/filter&gt;\n    &lt;filter-mapping&gt;\n      &lt;filter-name&gt;CorsFilter&lt;/filter-name&gt;\n      &lt;url-pattern&gt;/*&lt;/url-pattern&gt;\n    &lt;/filter-mapping&gt;\n</code></pre>\n"},{"tags":["java","spring-boot","keycloak","openid-connect","pkce"],"answers":[{"tags":[],"owner":{"account_id":11953108,"reputation":1423,"user_id":8746228,"display_name":"adarsh"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1571838004,"creation_date":1571837429,"answer_id":58524035,"question_id":58522469,"body_markdown":"Cannot comment, so adding as an answer.\r\n\r\n    -d &#39;grant_type=authorization_code&amp;client_id=spring-boot-app&amp;username=apiuser&amp;client_secret=cd78e82a-e86a-4bf3-a3d7-7c01cec49396&amp;code=qjrzSW9gMiUgpUvqgEPE4_-8swvyCtfOVvg55o5S_es&#39;\r\n\r\nA couple of things: &lt;br/&gt;\r\n1) `client_secret` is optional &lt;br/&gt;\r\n2) `redirect_uri` is missing. It is **REQUIRED**, and must be exactly as the one used while making request for `authorization code`.\r\n\r\nAbout `username`, it is definitely not needed, but cannot say if it&#39;s presence will cause issues. Better to remove it.\r\n","title":"How to use Keycloak with PKCE","body":"<p>Cannot comment, so adding as an answer.</p>\n\n<pre><code>-d 'grant_type=authorization_code&amp;client_id=spring-boot-app&amp;username=apiuser&amp;client_secret=cd78e82a-e86a-4bf3-a3d7-7c01cec49396&amp;code=qjrzSW9gMiUgpUvqgEPE4_-8swvyCtfOVvg55o5S_es'\n</code></pre>\n\n<p>A couple of things: <br/>\n1) <code>client_secret</code> is optional <br/>\n2) <code>redirect_uri</code> is missing. It is <strong>REQUIRED</strong>, and must be exactly as the one used while making request for <code>authorization code</code>.</p>\n\n<p>About <code>username</code>, it is definitely not needed, but cannot say if it's presence will cause issues. Better to remove it.</p>\n"}],"owner":{"account_id":1370065,"reputation":315,"user_id":1305525,"display_name":"Braian"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":11402,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":58524035,"answer_count":1,"score":4,"last_activity_date":1643482143,"creation_date":1571832279,"question_id":58522469,"body_markdown":"I&#39;m trying to get token from keycloak using pkce with authorization_code flow without success.\r\n\r\n\r\n\r\n\r\n\r\n\r\nRequest parameters (from postman):\r\n\r\n```\r\ncurl -X POST \\\r\n  http://keycloak-ar.uat.com/auth/realms/myrealm/protocol/openid-connect/token \\\r\n  -H &#39;Accept: */*&#39; \\\r\n  -H &#39;Accept-Encoding: gzip, deflate&#39; \\\r\n  -H &#39;Authorization: Basic YWJyYWFvLxF1ZWlyb3o6MTIz&#39; \\\r\n  -H &#39;Cache-Control: no-cache&#39; \\\r\n  -H &#39;Connection: keep-alive&#39; \\\r\n  -H &#39;Content-Length: 172&#39; \\\r\n  -H &#39;Content-Type: application/x-www-form-urlencoded&#39; \\\r\n  -H &#39;Host: keycloak-ar.uat.com&#39; \\\r\n  -d &#39;grant_type=authorization_code&amp;client_id=spring-boot-app&amp;username=apiuser&amp;client_secret=cd78e82a-e86a-4bf3-a3d7-7c01cec49396&amp;code=qjrzSW9gMiUgpUvqgEPE4_-8swvyCtfOVvg55o5S_es&#39;\r\n```\r\n\r\n\r\nKeycloak log:\r\n```\r\n22:50:01,962 WARN  [org.keycloak.events] (default task-146) type=CODE_TO_TOKEN_ERROR, realmId=myrealm, clientId=spring-boot-app, userId=null, ipAddress=10.128.2.1, error=invalid_code, grant_type=authorization_code, client_auth_method=client-secret\r\n```","title":"How to use Keycloak with PKCE","body":"<p>I'm trying to get token from keycloak using pkce with authorization_code flow without success.</p>\n\n<p>Request parameters (from postman):</p>\n\n<pre><code>curl -X POST \\\n  http://keycloak-ar.uat.com/auth/realms/myrealm/protocol/openid-connect/token \\\n  -H 'Accept: */*' \\\n  -H 'Accept-Encoding: gzip, deflate' \\\n  -H 'Authorization: Basic YWJyYWFvLxF1ZWlyb3o6MTIz' \\\n  -H 'Cache-Control: no-cache' \\\n  -H 'Connection: keep-alive' \\\n  -H 'Content-Length: 172' \\\n  -H 'Content-Type: application/x-www-form-urlencoded' \\\n  -H 'Host: keycloak-ar.uat.com' \\\n  -d 'grant_type=authorization_code&amp;client_id=spring-boot-app&amp;username=apiuser&amp;client_secret=cd78e82a-e86a-4bf3-a3d7-7c01cec49396&amp;code=qjrzSW9gMiUgpUvqgEPE4_-8swvyCtfOVvg55o5S_es'\n</code></pre>\n\n<p>Keycloak log:</p>\n\n<pre><code>22:50:01,962 WARN  [org.keycloak.events] (default task-146) type=CODE_TO_TOKEN_ERROR, realmId=myrealm, clientId=spring-boot-app, userId=null, ipAddress=10.128.2.1, error=invalid_code, grant_type=authorization_code, client_auth_method=client-secret\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":9970271,"reputation":6093,"user_id":7376590,"accept_rate":50,"display_name":"steven7mwesigwa"},"score":0,"creation_date":1643480501,"post_id":70905939,"comment_id":125353262,"body_markdown":"I&#39;ve included a second solution to achieve your desired output.","body":"I&#39;ve included a second solution to achieve your desired output."}],"answers":[{"tags":[],"owner":{"account_id":9970271,"reputation":6093,"user_id":7376590,"accept_rate":50,"display_name":"steven7mwesigwa"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1643482018,"creation_date":1643468137,"answer_id":70906653,"question_id":70905939,"body_markdown":"&gt;  {jul=0, oct=0, feb=0, apr=23, jun=0, aug=0, dec=0, nov=0, may=0,\r\n&gt; jan=96, mar=30, sep=1084}\r\n\r\n1. Create a map of month numbers (keys) and initial sums (values). // &#39;monthSums&#39;.\r\n2. Loop through your dataset (&#39;budzets&#39;) while updating the &#39;monthSums&#39; map values.\r\n3. Replace the keys of the &#39;monthSums&#39; map with their respective month labels (&#39;monthLabels&#39;).\r\n\r\n````java\r\nimport java.util.Arrays;\r\nimport java.util.List;\r\nimport java.util.Map;\r\nimport java.util.stream.Collectors;\r\nimport java.util.stream.IntStream;\r\n\r\nclass Budzet {\r\n    String sec;\r\n    String month;\r\n    Integer sum;\r\n\r\n    public Budzet(String sec, String month, Integer sum) {\r\n        this.sec = sec;\r\n        this.month = month;\r\n        this.sum = sum;\r\n    }\r\n}\r\n\r\nclass Scratch {\r\n\r\n    public static void main(String[] args) {\r\n        List&lt;Budzet&gt; budzets = Arrays.asList(\r\n                new Budzet(&quot;AGD/RTV&quot;, &quot;01&quot;, 96),\r\n                new Budzet(&quot;AGD/RTV&quot;, &quot;03&quot;, 30),\r\n                new Budzet(&quot;Food&quot;, &quot;04&quot;, 23),\r\n                new Budzet(&quot;Game&quot;, &quot;09&quot;, 1084)\r\n        );\r\n\r\n        List&lt;String&gt; monthLabels = Arrays.asList(&quot;jan&quot;, &quot;feb&quot;, &quot;mar&quot;, &quot;apr&quot;, &quot;may&quot;, &quot;jun&quot;, &quot;jul&quot;, &quot;aug&quot;, &quot;sep&quot;, &quot;oct&quot;, &quot;nov&quot;, &quot;dec&quot;);\r\n\r\n        // 1. Create a map of month numbers (keys) and initial sums (values). // &#39;monthSums&#39;.\r\n        Map&lt;String, Integer&gt; monthSums = IntStream\r\n                .rangeClosed(1, monthLabels.size())\r\n                .boxed()\r\n                .collect(Collectors.toMap(i -&gt; (i &lt; 10 ? &quot;0&quot; + i.toString() : i.toString()), i -&gt; 0));\r\n\r\n        // 2. Loop through your dataset (&#39;budzets&#39;) while updating the &#39;monthSums&#39; map values.\r\n        for (Budzet budzet : budzets) {\r\n            monthSums.put(budzet.month, monthSums.get(budzet.month) + budzet.sum);\r\n        }\r\n\r\n        // 3. Replace the keys of the &#39;monthSums&#39; map with their respective month labels (monthLabels).\r\n        monthSums = monthSums\r\n                .entrySet()\r\n                .stream()\r\n                .collect(Collectors.toMap(e -&gt; monthLabels.get(Integer.parseInt(e.getKey()) - 1), Map.Entry::getValue));\r\n\r\n        System.out.println(monthSums);\r\n        // {jul=0, oct=0, feb=0, apr=23, jun=0, aug=0, dec=0, nov=0, may=0, jan=96, mar=30, sep=1084}\r\n\r\n    }\r\n}\r\n````\r\n\r\n#### Addendum\r\n***[Edit]***\r\n\r\n&gt; AGD/TRV{ jul=0, oct=0, feb=0, apr=0, jun=96, aug=0, dec=0, nov=0,\r\n&gt; may=0, jan=0, mar=30, sep=0}\r\n&gt; \r\n&gt; Food { jul=0, oct=0, feb=0, apr=23, jun=0, aug=0, dec=0, nov=0, may=0,\r\n&gt; jan=0, mar=0, sep=0}\r\n&gt; \r\n&gt; Game { ul=0, oct=0, feb=0, apr=0, jun=0, aug=0, dec=0, nov=0, may=0,\r\n&gt; jan=0, mar=0, sep=1084}\r\n\r\nIn response to your new result output expectation, you could achieve it this way:\r\n\r\n1. Create a map of month numbers (keys) and initial sums (values). // &#39;monthSums&#39;.\r\n\r\n2. Create a map of &#39;budzet.sec&#39; (keys) and &#39;monthSums&#39;. // &#39;resultMap&#39;.\r\n3. Loop through your dataset (&#39;budzets&#39;) while updating the &#39;resultMap&#39; map values (&#39;monthSums&#39;).\r\n4. Replace the keys of the &#39;monthSums&#39; map with their respective month labels (&#39;monthLabels&#39;) in the &#39;resultMap&#39;.\r\n\r\n````java\r\nimport java.util.Arrays;\r\nimport java.util.HashMap;\r\nimport java.util.List;\r\nimport java.util.Map;\r\nimport java.util.stream.Collectors;\r\nimport java.util.stream.IntStream;\r\n\r\nclass Budzet {\r\n    String sec;\r\n    String month;\r\n    Integer sum;\r\n\r\n    public Budzet(String sec, String month, Integer sum) {\r\n        this.sec = sec;\r\n        this.month = month;\r\n        this.sum = sum;\r\n    }\r\n}\r\n\r\nclass Scratch {\r\n\r\n    public static void main(String[] args) {\r\n        List&lt;Budzet&gt; budzets = Arrays.asList(\r\n                new Budzet(&quot;AGD/RTV&quot;, &quot;01&quot;, 96),\r\n                new Budzet(&quot;AGD/RTV&quot;, &quot;03&quot;, 30),\r\n                new Budzet(&quot;Food&quot;, &quot;04&quot;, 23),\r\n                new Budzet(&quot;Game&quot;, &quot;09&quot;, 1084)\r\n        );\r\n\r\n        List&lt;String&gt; monthLabels = Arrays.asList(&quot;jan&quot;, &quot;feb&quot;, &quot;mar&quot;, &quot;apr&quot;, &quot;may&quot;, &quot;jun&quot;, &quot;jul&quot;, &quot;aug&quot;, &quot;sep&quot;, &quot;oct&quot;, &quot;nov&quot;, &quot;dec&quot;);\r\n\r\n        // 1. Create a map of month numbers (keys) and initial sums (values). // &#39;monthSums&#39;.\r\n        Map&lt;String, Integer&gt; monthSums = IntStream\r\n                .rangeClosed(1, monthLabels.size())\r\n                .boxed()\r\n                .collect(Collectors.toMap(i -&gt; (i &lt; 10 ? &quot;0&quot; + i.toString() : i.toString()), i -&gt; 0));\r\n\r\n\r\n        // 2. Create a map of &#39;budzet.sec&#39; (keys) and &#39;monthSums&#39;. // &#39;resultMap&#39;.\r\n        // 3. Loop through your dataset (&#39;budzets&#39;) while updating the &#39;resultMap&#39; map values (&#39;monthSums&#39;).\r\n        Map&lt;String, Map&lt;String, Integer&gt;&gt; resultMap = new HashMap&lt;&gt;();\r\n\r\n        for (Budzet budzet : budzets) {\r\n            if (!resultMap.containsKey(budzet.sec)) {\r\n                resultMap.put(budzet.sec, new HashMap&lt;&gt;(monthSums));\r\n            }\r\n\r\n            Map&lt;String, Integer&gt; value = resultMap.get(budzet.sec);\r\n            value.put(budzet.month, value.get(budzet.month) + budzet.sum);\r\n\r\n            resultMap.put(budzet.sec, value);\r\n        }\r\n\r\n        // 4. Replace the keys of the &#39;monthSums&#39; map with their respective month labels (&#39;monthLabels&#39;) in the &#39;resultMap&#39;.\r\n        resultMap = resultMap\r\n                .entrySet()\r\n                .stream()\r\n                .peek(e -&gt; e.setValue(e.getValue()\r\n                        .entrySet()\r\n                        .stream()\r\n                        .collect(Collectors.toMap(i -&gt; monthLabels.get(Integer.parseInt(i.getKey()) - 1), Map.Entry::getValue))))\r\n                .collect(Collectors.toMap(Map.Entry::getKey, Map.Entry::getValue));\r\n\r\n        System.out.println(resultMap);\r\n        // {AGD/RTV={jul=0, oct=0, feb=0, apr=0, jun=0, aug=0, dec=0, nov=0, may=0, jan=96, mar=30, sep=0}, Game={jul=0, oct=0, feb=0, apr=0, jun=0, aug=0, dec=0, nov=0, may=0, jan=0, mar=0, sep=1084}, Food={jul=0, oct=0, feb=0, apr=23, jun=0, aug=0, dec=0, nov=0, may=0, jan=0, mar=0, sep=0}}\r\n\r\n    }\r\n}\r\n````","title":"Data from one list to another in java","body":"<blockquote>\n<p>{jul=0, oct=0, feb=0, apr=23, jun=0, aug=0, dec=0, nov=0, may=0,\njan=96, mar=30, sep=1084}</p>\n</blockquote>\n<ol>\n<li>Create a map of month numbers (keys) and initial sums (values). // 'monthSums'.</li>\n<li>Loop through your dataset ('budzets') while updating the 'monthSums' map values.</li>\n<li>Replace the keys of the 'monthSums' map with their respective month labels ('monthLabels').</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.Arrays;\nimport java.util.List;\nimport java.util.Map;\nimport java.util.stream.Collectors;\nimport java.util.stream.IntStream;\n\nclass Budzet {\n    String sec;\n    String month;\n    Integer sum;\n\n    public Budzet(String sec, String month, Integer sum) {\n        this.sec = sec;\n        this.month = month;\n        this.sum = sum;\n    }\n}\n\nclass Scratch {\n\n    public static void main(String[] args) {\n        List&lt;Budzet&gt; budzets = Arrays.asList(\n                new Budzet(&quot;AGD/RTV&quot;, &quot;01&quot;, 96),\n                new Budzet(&quot;AGD/RTV&quot;, &quot;03&quot;, 30),\n                new Budzet(&quot;Food&quot;, &quot;04&quot;, 23),\n                new Budzet(&quot;Game&quot;, &quot;09&quot;, 1084)\n        );\n\n        List&lt;String&gt; monthLabels = Arrays.asList(&quot;jan&quot;, &quot;feb&quot;, &quot;mar&quot;, &quot;apr&quot;, &quot;may&quot;, &quot;jun&quot;, &quot;jul&quot;, &quot;aug&quot;, &quot;sep&quot;, &quot;oct&quot;, &quot;nov&quot;, &quot;dec&quot;);\n\n        // 1. Create a map of month numbers (keys) and initial sums (values). // 'monthSums'.\n        Map&lt;String, Integer&gt; monthSums = IntStream\n                .rangeClosed(1, monthLabels.size())\n                .boxed()\n                .collect(Collectors.toMap(i -&gt; (i &lt; 10 ? &quot;0&quot; + i.toString() : i.toString()), i -&gt; 0));\n\n        // 2. Loop through your dataset ('budzets') while updating the 'monthSums' map values.\n        for (Budzet budzet : budzets) {\n            monthSums.put(budzet.month, monthSums.get(budzet.month) + budzet.sum);\n        }\n\n        // 3. Replace the keys of the 'monthSums' map with their respective month labels (monthLabels).\n        monthSums = monthSums\n                .entrySet()\n                .stream()\n                .collect(Collectors.toMap(e -&gt; monthLabels.get(Integer.parseInt(e.getKey()) - 1), Map.Entry::getValue));\n\n        System.out.println(monthSums);\n        // {jul=0, oct=0, feb=0, apr=23, jun=0, aug=0, dec=0, nov=0, may=0, jan=96, mar=30, sep=1084}\n\n    }\n}\n</code></pre>\n<h4>Addendum</h4>\n<p><em><strong>[Edit]</strong></em></p>\n<blockquote>\n<p>AGD/TRV{ jul=0, oct=0, feb=0, apr=0, jun=96, aug=0, dec=0, nov=0,\nmay=0, jan=0, mar=30, sep=0}</p>\n<p>Food { jul=0, oct=0, feb=0, apr=23, jun=0, aug=0, dec=0, nov=0, may=0,\njan=0, mar=0, sep=0}</p>\n<p>Game { ul=0, oct=0, feb=0, apr=0, jun=0, aug=0, dec=0, nov=0, may=0,\njan=0, mar=0, sep=1084}</p>\n</blockquote>\n<p>In response to your new result output expectation, you could achieve it this way:</p>\n<ol>\n<li><p>Create a map of month numbers (keys) and initial sums (values). // 'monthSums'.</p>\n</li>\n<li><p>Create a map of 'budzet.sec' (keys) and 'monthSums'. // 'resultMap'.</p>\n</li>\n<li><p>Loop through your dataset ('budzets') while updating the 'resultMap' map values ('monthSums').</p>\n</li>\n<li><p>Replace the keys of the 'monthSums' map with their respective month labels ('monthLabels') in the 'resultMap'.</p>\n</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.Arrays;\nimport java.util.HashMap;\nimport java.util.List;\nimport java.util.Map;\nimport java.util.stream.Collectors;\nimport java.util.stream.IntStream;\n\nclass Budzet {\n    String sec;\n    String month;\n    Integer sum;\n\n    public Budzet(String sec, String month, Integer sum) {\n        this.sec = sec;\n        this.month = month;\n        this.sum = sum;\n    }\n}\n\nclass Scratch {\n\n    public static void main(String[] args) {\n        List&lt;Budzet&gt; budzets = Arrays.asList(\n                new Budzet(&quot;AGD/RTV&quot;, &quot;01&quot;, 96),\n                new Budzet(&quot;AGD/RTV&quot;, &quot;03&quot;, 30),\n                new Budzet(&quot;Food&quot;, &quot;04&quot;, 23),\n                new Budzet(&quot;Game&quot;, &quot;09&quot;, 1084)\n        );\n\n        List&lt;String&gt; monthLabels = Arrays.asList(&quot;jan&quot;, &quot;feb&quot;, &quot;mar&quot;, &quot;apr&quot;, &quot;may&quot;, &quot;jun&quot;, &quot;jul&quot;, &quot;aug&quot;, &quot;sep&quot;, &quot;oct&quot;, &quot;nov&quot;, &quot;dec&quot;);\n\n        // 1. Create a map of month numbers (keys) and initial sums (values). // 'monthSums'.\n        Map&lt;String, Integer&gt; monthSums = IntStream\n                .rangeClosed(1, monthLabels.size())\n                .boxed()\n                .collect(Collectors.toMap(i -&gt; (i &lt; 10 ? &quot;0&quot; + i.toString() : i.toString()), i -&gt; 0));\n\n\n        // 2. Create a map of 'budzet.sec' (keys) and 'monthSums'. // 'resultMap'.\n        // 3. Loop through your dataset ('budzets') while updating the 'resultMap' map values ('monthSums').\n        Map&lt;String, Map&lt;String, Integer&gt;&gt; resultMap = new HashMap&lt;&gt;();\n\n        for (Budzet budzet : budzets) {\n            if (!resultMap.containsKey(budzet.sec)) {\n                resultMap.put(budzet.sec, new HashMap&lt;&gt;(monthSums));\n            }\n\n            Map&lt;String, Integer&gt; value = resultMap.get(budzet.sec);\n            value.put(budzet.month, value.get(budzet.month) + budzet.sum);\n\n            resultMap.put(budzet.sec, value);\n        }\n\n        // 4. Replace the keys of the 'monthSums' map with their respective month labels ('monthLabels') in the 'resultMap'.\n        resultMap = resultMap\n                .entrySet()\n                .stream()\n                .peek(e -&gt; e.setValue(e.getValue()\n                        .entrySet()\n                        .stream()\n                        .collect(Collectors.toMap(i -&gt; monthLabels.get(Integer.parseInt(i.getKey()) - 1), Map.Entry::getValue))))\n                .collect(Collectors.toMap(Map.Entry::getKey, Map.Entry::getValue));\n\n        System.out.println(resultMap);\n        // {AGD/RTV={jul=0, oct=0, feb=0, apr=0, jun=0, aug=0, dec=0, nov=0, may=0, jan=96, mar=30, sep=0}, Game={jul=0, oct=0, feb=0, apr=0, jun=0, aug=0, dec=0, nov=0, may=0, jan=0, mar=0, sep=1084}, Food={jul=0, oct=0, feb=0, apr=23, jun=0, aug=0, dec=0, nov=0, may=0, jan=0, mar=0, sep=0}}\n\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":2171829,"reputation":19,"user_id":1923609,"display_name":"Maxcess"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":69,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"closed_date":1643475639,"accepted_answer_id":70906653,"answer_count":1,"score":-1,"last_activity_date":1643482018,"creation_date":1643463298,"question_id":70905939,"body_markdown":"I have two list created from class.\r\n\r\nOne is called Budget, with elements section, month and sum, which return this:\r\n\r\n[Budzet{sec=&#39;AGD/RTV&#39;, month=&#39;01&#39;, sum=96}, Budzet{sec=&#39;AGD/RTV&#39;,month=&#39;03&#39;, sum=30}, Budzet{sec=&#39;Food&#39;, month=&#39;04&#39;, sum=23}, Budzet{sec=&#39;Game&#39;, month=&#39;09&#39;, sum=1084} ... ] \r\n\r\nThis is SQL query\r\n\r\n    &quot;SELECT SUM(cena) AS suma, dzial, add_data FROM products2021 WHERE wartosc=&#39;ujemna&#39; GROUP BY dzial, EXTRACT(YEAR_MONTH FROM add_data)\r\n\r\nand second with elements section, jan, feb, mar, apr, may, jun, jul, aug,sep, oct, nov, dec.\r\n\r\nI would like to assign the value of the sum from the first list to the second according to the months and to a particular session. And in months where there is no value to display 0. I can&#39;t handle it.\r\n\r\nI would like to display my data like this:\r\n\r\nAGD/TRV{ jul=0, oct=0, feb=0, apr=0, jun=96, aug=0, dec=0, nov=0, may=0, jan=0, mar=30, sep=0}\r\n\r\nFood { jul=0, oct=0, feb=0, apr=23, jun=0, aug=0, dec=0, nov=0, may=0, jan=0, mar=0, sep=0}\r\n\r\nGame { ul=0, oct=0, feb=0, apr=0, jun=0, aug=0, dec=0, nov=0, may=0, jan=0, mar=0, sep=1084}\r\n\r\nWitch division on section\r\n","title":"Data from one list to another in java","body":"<p>I have two list created from class.</p>\n<p>One is called Budget, with elements section, month and sum, which return this:</p>\n<p>[Budzet{sec='AGD/RTV', month='01', sum=96}, Budzet{sec='AGD/RTV',month='03', sum=30}, Budzet{sec='Food', month='04', sum=23}, Budzet{sec='Game', month='09', sum=1084} ... ]</p>\n<p>This is SQL query</p>\n<pre><code>&quot;SELECT SUM(cena) AS suma, dzial, add_data FROM products2021 WHERE wartosc='ujemna' GROUP BY dzial, EXTRACT(YEAR_MONTH FROM add_data)\n</code></pre>\n<p>and second with elements section, jan, feb, mar, apr, may, jun, jul, aug,sep, oct, nov, dec.</p>\n<p>I would like to assign the value of the sum from the first list to the second according to the months and to a particular session. And in months where there is no value to display 0. I can't handle it.</p>\n<p>I would like to display my data like this:</p>\n<p>AGD/TRV{ jul=0, oct=0, feb=0, apr=0, jun=96, aug=0, dec=0, nov=0, may=0, jan=0, mar=30, sep=0}</p>\n<p>Food { jul=0, oct=0, feb=0, apr=23, jun=0, aug=0, dec=0, nov=0, may=0, jan=0, mar=0, sep=0}</p>\n<p>Game { ul=0, oct=0, feb=0, apr=0, jun=0, aug=0, dec=0, nov=0, may=0, jan=0, mar=0, sep=1084}</p>\n<p>Witch division on section</p>\n"},{"tags":["java","spring-boot","spring-security","oauth-2.0","google-oauth"],"owner":{"account_id":1716119,"reputation":105,"user_id":1573135,"accept_rate":86,"display_name":"Samir Maksimov"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":632,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":0,"score":3,"last_activity_date":1643481971,"creation_date":1637332264,"question_id":70036426,"body_markdown":"I&#39;m trying to implement a proof of concept project taken from this [video](https://www.youtube.com/watch?v=4mGpMBfKc0A). The idea is to have 2 small spring boot applications:\r\n 1) Client application where users are able to authenticate by Google or Okta. \r\n 2) Resource server application where we have some endpoints secured and verify authorization again in Google or Okta.\r\n\r\nThe problem is that in the case of Okta everything works fine. User can authenticate and then access endpoints on the resource server.\r\n\r\nBut in the case of Google, user authentication is successful, but when I want to access the resource server&#39;s endpoints I see exception on the resource server side:\r\n\r\n```\r\norg.springframework.security.oauth2.core.OAuth2AuthenticationException: An error occurred while attempting to decode the Jwt: Invalid token\t\r\nat org.springframework.security.oauth2.server.resource.authentication.JwtAuthenticationProvider.authenticate(JwtAuthenticationProvider.java:92) ~[spring-security-oauth2-resource-server-5.2.1.RELEASE.jar:5.2.1.RELEASE]\r\n...\r\nCaused by: org.springframework.security.oauth2.jwt.JwtException: An error occurred while attempting to decode the Jwt: Invalid unsecured/JWS/JWE header: Invalid JSON: Unexpected token ɭ� at position 2.\r\n```\r\n\r\n**Client application**\r\n\r\napplication.yml \r\n\r\n```spring:\r\n  security:\r\n    oauth2:\r\n      client:\r\n        registration:\r\n          google:\r\n            client-id: &lt;client-id&gt;\r\n            client-secret: &lt;client-secret&gt;\r\n          okta:\r\n            client-id: 0oa2p1e8o4z4Q9bJx5d7\r\n            client-secret: eTTbGN3yD7zlBoY6G_ea449pw34TLr53QkOIQTUy\r\n        provider:\r\n          okta:\r\n            issuer-uri: https://&lt;okta-dev-id&gt;.okta.com/oauth2/default\r\n```\r\n\r\nSsecOidcApplication.class (Client main class)\r\n```\r\n@SpringBootApplication\r\npublic class SsecOidcApplication {\r\n\t@Bean\r\n\tWebClient client(ClientRegistrationRepository regRepo,\r\n\t\t\t\t\t OAuth2AuthorizedClientRepository cliRepo) {\r\n\t\tServletOAuth2AuthorizedClientExchangeFilterFunction fFunc =\r\n\t\t\t\tnew ServletOAuth2AuthorizedClientExchangeFilterFunction(\r\n\t\t\t\t\t\tregRepo,\r\n\t\t\t\t\t\tcliRepo\r\n\t\t\t\t);\r\n\r\n\t\tfFunc.setDefaultOAuth2AuthorizedClient(true);\r\n\t\treturn WebClient.builder()\r\n\t\t\t\t.baseUrl(&quot;http://localhost:8081/resources&quot;)\r\n\t\t\t\t.apply(fFunc.oauth2Configuration())\r\n\t\t\t\t.build();\r\n\t}\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tSpringApplication.run(SsecOidcApplication.class, args);\r\n\t}\r\n\r\n}\r\n\r\n@RestController\r\nclass OidcController {\r\n\tprivate final WebClient client;\r\n\r\n\tpublic OidcController(WebClient client) {\r\n\t\tthis.client = client;\r\n\t}\r\n\r\n\t@GetMapping(&quot;/&quot;)\r\n\tString hello() {\r\n\t\treturn &quot;Bonjour Montreal!&quot;;\r\n\t}\r\n\r\n\t@GetMapping(&quot;/something&quot;)\r\n\tString getSomethingFromRServer() {\r\n\t\treturn client.get()\r\n\t\t\t\t.uri(&quot;/something&quot;)\r\n\t\t\t\t.retrieve()\r\n\t\t\t\t.bodyToMono(String.class)\r\n\t\t\t\t.block();\r\n\t}\r\n\r\n\t@GetMapping(&quot;/claims&quot;)\r\n\tMap getClaimsFromRServer() {\r\n\t\treturn client.get()\r\n\t\t\t\t.uri(&quot;/claims&quot;)\r\n\t\t\t\t.retrieve()\r\n\t\t\t\t.bodyToMono(Map.class)\r\n\t\t\t\t.block();\r\n\t}\r\n\r\n\t@GetMapping(&quot;/email&quot;)\r\n\tString getSubjectFromRServer() {\r\n\t\treturn client.get()\r\n\t\t\t\t.uri(&quot;/email&quot;)\r\n\t\t\t\t.retrieve()\r\n\t\t\t\t.bodyToMono(String.class)\r\n\t\t\t\t.block();\r\n\t}\r\n}\r\n``` \r\n\r\n**Resource server app**\r\n\r\napplication.yml\r\n\r\n```\r\nspring:\r\n  security:\r\n    oauth2:\r\n      resourceserver:\r\n        jwt:\r\n          issuer-uri: https://accounts.google.com # for okta replace I replace it with https://&lt;okta-dev-id&gt;.okta.com/oauth2/default \r\n       \r\n```\r\n\r\nSsecResSvrApplication (Resource server main class)\r\n\r\n```\r\n@SpringBootApplication\r\npublic class SsecResSvrApplication {\r\n\r\n    public static void main(String[] args) {\r\n        SpringApplication.run(SsecResSvrApplication.class, args);\r\n    }\r\n\r\n}\r\n\r\n@EnableWebSecurity\r\nclass SecurityConfig extends WebSecurityConfigurerAdapter {\r\n    @Override\r\n    protected void configure(HttpSecurity http) throws Exception {\r\n        http\r\n                .authorizeRequests()\r\n                .antMatchers(&quot;/oauth/**&quot;).permitAll()\r\n                .mvcMatchers(&quot;/resources/claims/**&quot;).hasAuthority(&quot;SCOPE_openid&quot;)\r\n                .mvcMatchers(&quot;/resources/email/**&quot;).hasAuthority(&quot;SCOPE_email&quot;)\r\n                .and().oauth2ResourceServer().jwt();\r\n    }\r\n}\r\n\r\n\r\n@RestController\r\n@RequestMapping(&quot;/resources&quot;)\r\nclass ResourceController {\r\n    @GetMapping(&quot;/something&quot;)\r\n    String getSomething() {\r\n        return &quot;This is really something!&quot;;\r\n    }\r\n\r\n    @GetMapping(&quot;/claims&quot;)\r\n    Map&lt;String, Object&gt; getClaims(@AuthenticationPrincipal Jwt jwt) {\r\n        return jwt.getClaims();\r\n    }\r\n\r\n    @GetMapping(&quot;/email&quot;)\r\n    String getSubject(@AuthenticationPrincipal Jwt jwt) {\r\n        return jwt.getSubject();\r\n    }\r\n}\r\n```\r\n\r\nI&#39;m new to Spring Security and OAuth, can anyone help with this? To test this I&#39;m changing only resourceserver:\r\n        jwt:\r\n          issuer-uri:\r\nDo I need to do some special setup for Google?\r\nThe error on client side is pretty straightforward:\r\n\r\n```\r\n401 Unauthorized from GET http://localhost:8081/resources/something\r\n```","title":"Spring Boot + OAuth2 + Resource Server + Google","body":"<p>I'm trying to implement a proof of concept project taken from this <a href=\"https://www.youtube.com/watch?v=4mGpMBfKc0A\" rel=\"nofollow noreferrer\">video</a>. The idea is to have 2 small spring boot applications:</p>\n<ol>\n<li>Client application where users are able to authenticate by Google or Okta.</li>\n<li>Resource server application where we have some endpoints secured and verify authorization again in Google or Okta.</li>\n</ol>\n<p>The problem is that in the case of Okta everything works fine. User can authenticate and then access endpoints on the resource server.</p>\n<p>But in the case of Google, user authentication is successful, but when I want to access the resource server's endpoints I see exception on the resource server side:</p>\n<pre><code>org.springframework.security.oauth2.core.OAuth2AuthenticationException: An error occurred while attempting to decode the Jwt: Invalid token \nat org.springframework.security.oauth2.server.resource.authentication.JwtAuthenticationProvider.authenticate(JwtAuthenticationProvider.java:92) ~[spring-security-oauth2-resource-server-5.2.1.RELEASE.jar:5.2.1.RELEASE]\n...\nCaused by: org.springframework.security.oauth2.jwt.JwtException: An error occurred while attempting to decode the Jwt: Invalid unsecured/JWS/JWE header: Invalid JSON: Unexpected token ɭ� at position 2.\n</code></pre>\n<p><strong>Client application</strong></p>\n<p>application.yml</p>\n<pre><code>  security:\n    oauth2:\n      client:\n        registration:\n          google:\n            client-id: &lt;client-id&gt;\n            client-secret: &lt;client-secret&gt;\n          okta:\n            client-id: 0oa2p1e8o4z4Q9bJx5d7\n            client-secret: eTTbGN3yD7zlBoY6G_ea449pw34TLr53QkOIQTUy\n        provider:\n          okta:\n            issuer-uri: https://&lt;okta-dev-id&gt;.okta.com/oauth2/default\n</code></pre>\n<p>SsecOidcApplication.class (Client main class)</p>\n<pre><code>@SpringBootApplication\npublic class SsecOidcApplication {\n    @Bean\n    WebClient client(ClientRegistrationRepository regRepo,\n                     OAuth2AuthorizedClientRepository cliRepo) {\n        ServletOAuth2AuthorizedClientExchangeFilterFunction fFunc =\n                new ServletOAuth2AuthorizedClientExchangeFilterFunction(\n                        regRepo,\n                        cliRepo\n                );\n\n        fFunc.setDefaultOAuth2AuthorizedClient(true);\n        return WebClient.builder()\n                .baseUrl(&quot;http://localhost:8081/resources&quot;)\n                .apply(fFunc.oauth2Configuration())\n                .build();\n    }\n\n    public static void main(String[] args) {\n        SpringApplication.run(SsecOidcApplication.class, args);\n    }\n\n}\n\n@RestController\nclass OidcController {\n    private final WebClient client;\n\n    public OidcController(WebClient client) {\n        this.client = client;\n    }\n\n    @GetMapping(&quot;/&quot;)\n    String hello() {\n        return &quot;Bonjour Montreal!&quot;;\n    }\n\n    @GetMapping(&quot;/something&quot;)\n    String getSomethingFromRServer() {\n        return client.get()\n                .uri(&quot;/something&quot;)\n                .retrieve()\n                .bodyToMono(String.class)\n                .block();\n    }\n\n    @GetMapping(&quot;/claims&quot;)\n    Map getClaimsFromRServer() {\n        return client.get()\n                .uri(&quot;/claims&quot;)\n                .retrieve()\n                .bodyToMono(Map.class)\n                .block();\n    }\n\n    @GetMapping(&quot;/email&quot;)\n    String getSubjectFromRServer() {\n        return client.get()\n                .uri(&quot;/email&quot;)\n                .retrieve()\n                .bodyToMono(String.class)\n                .block();\n    }\n}\n</code></pre>\n<p><strong>Resource server app</strong></p>\n<p>application.yml</p>\n<pre><code>spring:\n  security:\n    oauth2:\n      resourceserver:\n        jwt:\n          issuer-uri: https://accounts.google.com # for okta replace I replace it with https://&lt;okta-dev-id&gt;.okta.com/oauth2/default \n       \n</code></pre>\n<p>SsecResSvrApplication (Resource server main class)</p>\n<pre><code>@SpringBootApplication\npublic class SsecResSvrApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(SsecResSvrApplication.class, args);\n    }\n\n}\n\n@EnableWebSecurity\nclass SecurityConfig extends WebSecurityConfigurerAdapter {\n    @Override\n    protected void configure(HttpSecurity http) throws Exception {\n        http\n                .authorizeRequests()\n                .antMatchers(&quot;/oauth/**&quot;).permitAll()\n                .mvcMatchers(&quot;/resources/claims/**&quot;).hasAuthority(&quot;SCOPE_openid&quot;)\n                .mvcMatchers(&quot;/resources/email/**&quot;).hasAuthority(&quot;SCOPE_email&quot;)\n                .and().oauth2ResourceServer().jwt();\n    }\n}\n\n\n@RestController\n@RequestMapping(&quot;/resources&quot;)\nclass ResourceController {\n    @GetMapping(&quot;/something&quot;)\n    String getSomething() {\n        return &quot;This is really something!&quot;;\n    }\n\n    @GetMapping(&quot;/claims&quot;)\n    Map&lt;String, Object&gt; getClaims(@AuthenticationPrincipal Jwt jwt) {\n        return jwt.getClaims();\n    }\n\n    @GetMapping(&quot;/email&quot;)\n    String getSubject(@AuthenticationPrincipal Jwt jwt) {\n        return jwt.getSubject();\n    }\n}\n</code></pre>\n<p>I'm new to Spring Security and OAuth, can anyone help with this? To test this I'm changing only resourceserver:\njwt:\nissuer-uri:\nDo I need to do some special setup for Google?\nThe error on client side is pretty straightforward:</p>\n<pre><code>401 Unauthorized from GET http://localhost:8081/resources/something\n</code></pre>\n"},{"tags":["java","maven","azure-devops","azure-pipelines-yaml"],"answers":[{"tags":[],"owner":{"account_id":23174,"reputation":1597,"user_id":57864,"accept_rate":80,"display_name":"scorpio"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1643481631,"creation_date":1643481631,"answer_id":70908600,"question_id":70711740,"body_markdown":"How are you defining the secure token? \r\n\r\n**Note:** secret variables are not passed to environment variables by default \r\n\r\n**Ref:** https://learn.microsoft.com/en-us/azure/devops/pipelines/process/variables?view=azure-devops&amp;tabs=yaml%2Cbatch#secret-variables","title":"Using exec-maven-plugin to run external program with secured token from azure pipeline","body":"<p>How are you defining the secure token?</p>\n<p><strong>Note:</strong> secret variables are not passed to environment variables by default</p>\n<p><strong>Ref:</strong> <a href=\"https://learn.microsoft.com/en-us/azure/devops/pipelines/process/variables?view=azure-devops&amp;tabs=yaml%2Cbatch#secret-variables\" rel=\"nofollow noreferrer\">https://learn.microsoft.com/en-us/azure/devops/pipelines/process/variables?view=azure-devops&amp;tabs=yaml%2Cbatch#secret-variables</a></p>\n"}],"owner":{"account_id":1661648,"reputation":25,"user_id":1529823,"display_name":"smartCoder"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":227,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1643481631,"creation_date":1642168829,"question_id":70711740,"body_markdown":"There are a number of questions on exec-maven-plugin here but this is different. I&#39;m trying to run an external program using exec-maven-plugin with exec goal in maven. One of the arguments to be passes is a secured token defined on azure pipeline.\r\n\r\nThe issue is that if I hardcode the token, meaning the actual token value without securing it and I run the mvn exec:exec command, it works. But when I pass the secured token from azure pipeline, it fails to communicate with the external program.\r\n\r\nIs there a way to decrypt this secure token before passing it as an argument in the exec-maven-plugin or is there any other way to get this to work?\r\n\r\nRelevant part of the pom is:&lt;plugin&gt;\r\n  ```\r\n&lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\r\n                &lt;artifactId&gt;exec-maven-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;3.0.0&lt;/version&gt;\r\n                &lt;executions&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;phase&gt;package&lt;/phase&gt;\r\n                        &lt;goals&gt;\r\n                            &lt;goal&gt;exec&lt;/goal&gt;\r\n                        &lt;/goals&gt;\r\n                    &lt;/execution&gt;\r\n                &lt;/executions&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;executable&gt;java&lt;/executable&gt;\r\n                    &lt;arguments&gt;\r\n                        &lt;argument&gt;-Djavax.net.ssl.trustStore=$(env.MAVEN_TRUST_STORE)&lt;/argument&gt;\r\n                        &lt;argument&gt;-jar&lt;/argument&gt;\r\n                        &lt;argument&gt;                            ${settings.localRepository}/com/github/externalprogram/ddd/$(ddd.version)/ddd-$(ddd.version).jar\r\n                        &lt;/argument&gt;\r\n                        &lt;argument&gt;--externalprogram.url=https://xxxx.yyyy.com/&lt;/argument&gt;\r\n                        &lt;argument&gt;--externalprogram.proxy.host=${someproxy}&lt;/argument&gt;\r\n                        &lt;argument&gt;--externalprogram.proxy.port=0000&lt;/argument&gt;\r\n                        &lt;argument&gt;--externalprogram.api.token=$**(secure-token)**&lt;/argument&gt;\r\n                        &lt;argument&gt;--detect.maven.path=$(env.M2_HOME)/bin/$(mvn)&lt;/argument&gt;\r\n                        &lt;argument&gt;--detect.maven.include.plugins=true&lt;/argument&gt;\r\n                        &lt;argument&gt;--detect.maven.build.command=-s $(env.MAVEN_SETTINGS_XML) -Djavax.net.ssl.trustStore=$(env.MAVEN_TRUST_STORE)\r\n                        &lt;/argument&gt;\r\n                        &lt;argument&gt;--detect.included.detector.types=maven,pip,npm&lt;/argument&gt;\r\n                        &lt;argument&gt;\r\n                            --detect.externalprogram.signature.scanner.exclusion.name.patterns=*target*,*/target,*\\target\r\n                        &lt;/argument&gt;\r\n                        &lt;argument&gt;--detect.bdio2.enabled=false&lt;/argument&gt;\r\n                        &lt;argument&gt;--detect.project.version.phase=$(versionPhase)&lt;/argument&gt;\r\n                        &lt;argument&gt;--detect.code.location.name=${project.version}&lt;/argument&gt;\r\n                    &lt;/arguments&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n```              \r\n\r\nSo if I replace the secure-token with the actual value, it works. But when I use the secured value it fails with error: Fails to communicate with external program. Not authorized...","title":"Using exec-maven-plugin to run external program with secured token from azure pipeline","body":"<p>There are a number of questions on exec-maven-plugin here but this is different. I'm trying to run an external program using exec-maven-plugin with exec goal in maven. One of the arguments to be passes is a secured token defined on azure pipeline.</p>\n<p>The issue is that if I hardcode the token, meaning the actual token value without securing it and I run the mvn exec:exec command, it works. But when I pass the secured token from azure pipeline, it fails to communicate with the external program.</p>\n<p>Is there a way to decrypt this secure token before passing it as an argument in the exec-maven-plugin or is there any other way to get this to work?</p>\n<p>Relevant part of the pom is:</p>\n<pre><code>&lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\n              &lt;artifactId&gt;exec-maven-plugin&lt;/artifactId&gt;\n              &lt;version&gt;3.0.0&lt;/version&gt;\n              &lt;executions&gt;\n                  &lt;execution&gt;\n                      &lt;phase&gt;package&lt;/phase&gt;\n                      &lt;goals&gt;\n                          &lt;goal&gt;exec&lt;/goal&gt;\n                      &lt;/goals&gt;\n                  &lt;/execution&gt;\n              &lt;/executions&gt;\n              &lt;configuration&gt;\n                  &lt;executable&gt;java&lt;/executable&gt;\n                  &lt;arguments&gt;\n                      &lt;argument&gt;-Djavax.net.ssl.trustStore=$(env.MAVEN_TRUST_STORE)&lt;/argument&gt;\n                      &lt;argument&gt;-jar&lt;/argument&gt;\n                      &lt;argument&gt;                            ${settings.localRepository}/com/github/externalprogram/ddd/$(ddd.version)/ddd-$(ddd.version).jar\n                      &lt;/argument&gt;\n                      &lt;argument&gt;--externalprogram.url=https://xxxx.yyyy.com/&lt;/argument&gt;\n                      &lt;argument&gt;--externalprogram.proxy.host=${someproxy}&lt;/argument&gt;\n                      &lt;argument&gt;--externalprogram.proxy.port=0000&lt;/argument&gt;\n                      &lt;argument&gt;--externalprogram.api.token=$**(secure-token)**&lt;/argument&gt;\n                      &lt;argument&gt;--detect.maven.path=$(env.M2_HOME)/bin/$(mvn)&lt;/argument&gt;\n                      &lt;argument&gt;--detect.maven.include.plugins=true&lt;/argument&gt;\n                      &lt;argument&gt;--detect.maven.build.command=-s $(env.MAVEN_SETTINGS_XML) -Djavax.net.ssl.trustStore=$(env.MAVEN_TRUST_STORE)\n                      &lt;/argument&gt;\n                      &lt;argument&gt;--detect.included.detector.types=maven,pip,npm&lt;/argument&gt;\n                      &lt;argument&gt;\n                          --detect.externalprogram.signature.scanner.exclusion.name.patterns=*target*,*/target,*\\target\n                      &lt;/argument&gt;\n                      &lt;argument&gt;--detect.bdio2.enabled=false&lt;/argument&gt;\n                      &lt;argument&gt;--detect.project.version.phase=$(versionPhase)&lt;/argument&gt;\n                      &lt;argument&gt;--detect.code.location.name=${project.version}&lt;/argument&gt;\n                  &lt;/arguments&gt;\n              &lt;/configuration&gt;\n          &lt;/plugin&gt;\n</code></pre>\n<p>So if I replace the secure-token with the actual value, it works. But when I use the secured value it fails with error: Fails to communicate with external program. Not authorized...</p>\n"},{"tags":["java","outputstream","bytebuffer"],"comments":[{"owner":{"account_id":66969,"reputation":22196,"user_id":196211,"accept_rate":67,"display_name":"Eyal Schneider"},"score":1,"creation_date":1272313697,"post_id":2716596,"comment_id":2742234,"body_markdown":"Generally, you can&#39;t read directly from an output stream. If you fill the data yourself, why can&#39;t you fill it into the ByteBuffer as well?","body":"Generally, you can&#39;t read directly from an output stream. If you fill the data yourself, why can&#39;t you fill it into the ByteBuffer as well?"},{"owner":{"account_id":119849,"reputation":17374,"user_id":311865,"accept_rate":64,"display_name":"Rasto"},"score":0,"creation_date":1272662353,"post_id":2716596,"comment_id":2777424,"body_markdown":"It is possible to read from it indirectly and of cause directly as well if you create class that inherits form OutputStream and make it possible to read from it directly. I did not fill the data myself, some framework did(and the framework&#39;s code I don&#39;t want to touch of cause). See my other comment and answers as well.","body":"It is possible to read from it indirectly and of cause directly as well if you create class that inherits form OutputStream and make it possible to read from it directly. I did not fill the data myself, some framework did(and the framework&#39;s code I don&#39;t want to touch of cause). See my other comment and answers as well."}],"answers":[{"tags":[],"owner":{"account_id":56256,"reputation":53237,"user_id":168493,"accept_rate":92,"display_name":"Marcus Adams"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1272315204,"creation_date":1272315204,"answer_id":2716791,"question_id":2716596,"body_markdown":"Try using PipedOutputStream instead of OutputStream. You can then connect a PipedInputStream to read the data back out of the PipedOutputStream.\r\n","title":"How to put data from an OutputStream into a ByteBuffer?","body":"<p>Try using PipedOutputStream instead of OutputStream. You can then connect a PipedInputStream to read the data back out of the PipedOutputStream.</p>\n"},{"tags":[],"owner":{"account_id":10258,"reputation":26460,"user_id":19276,"accept_rate":81,"display_name":"DJClayworth"},"down_vote_count":0,"up_vote_count":36,"is_accepted":true,"score":36,"last_activity_date":1327630843,"creation_date":1272315765,"answer_id":2716863,"question_id":2716596,"body_markdown":"You can create a `ByteArrayOutputStream` and write to it, and extract the contents as a `byte[]` using `toByteArray()`. Then `ByteBuffer.wrap(byte [])` will create a `ByteBuffer` with the contents of the output byte array.","title":"How to put data from an OutputStream into a ByteBuffer?","body":"<p>You can create a <code>ByteArrayOutputStream</code> and write to it, and extract the contents as a <code>byte[]</code> using <code>toByteArray()</code>. Then <code>ByteBuffer.wrap(byte [])</code> will create a <code>ByteBuffer</code> with the contents of the output byte array.</p>\n"},{"tags":[],"owner":{"account_id":29567,"reputation":59708,"user_id":80002,"accept_rate":64,"display_name":"mark"},"down_vote_count":0,"up_vote_count":27,"is_accepted":false,"score":27,"last_activity_date":1475871874,"creation_date":1364486705,"answer_id":15686667,"question_id":2716596,"body_markdown":"There is a more efficient variant of @DJClayworth&#39;s answer. \r\n\r\nAs @seh correctly noticed, `ByteArrayOutputStream.toByteArray()` returns a *copy* of the backing `byte[]` object, which may be inefficient. However, the backing `byte[]` object as well as the count of the bytes are both protected members of the `ByteArrayOutputStream` class. Hence, you can create your own variant of the ByteArrayOutputStream exposing them directly:\r\n\r\n    public class MyByteArrayOutputStream extends ByteArrayOutputStream {\r\n      public MyByteArrayOutputStream() {\r\n      }\r\n    \r\n      public MyByteArrayOutputStream(int size) {\r\n        super(size);\r\n      }\r\n    \r\n      public int getCount() {\r\n        return count;\r\n      }\r\n    \r\n      public byte[] getBuf() {\r\n        return buf;\r\n      }\r\n    }\r\n\r\n\r\nUsing this class is easy:\r\n\r\n    MyByteArrayOutputStream out = new MyByteArrayOutputStream();\r\n    fillTheOutputStream(out);\r\n    return new ByteArrayInputStream(out.getBuf(), 0, out.getCount());\r\n\r\nAs a result, once all the output is written the same buffer is used as the basis of an input stream.\r\n","title":"How to put data from an OutputStream into a ByteBuffer?","body":"<p>There is a more efficient variant of @DJClayworth's answer. </p>\n\n<p>As @seh correctly noticed, <code>ByteArrayOutputStream.toByteArray()</code> returns a <em>copy</em> of the backing <code>byte[]</code> object, which may be inefficient. However, the backing <code>byte[]</code> object as well as the count of the bytes are both protected members of the <code>ByteArrayOutputStream</code> class. Hence, you can create your own variant of the ByteArrayOutputStream exposing them directly:</p>\n\n<pre><code>public class MyByteArrayOutputStream extends ByteArrayOutputStream {\n  public MyByteArrayOutputStream() {\n  }\n\n  public MyByteArrayOutputStream(int size) {\n    super(size);\n  }\n\n  public int getCount() {\n    return count;\n  }\n\n  public byte[] getBuf() {\n    return buf;\n  }\n}\n</code></pre>\n\n<p>Using this class is easy:</p>\n\n<pre><code>MyByteArrayOutputStream out = new MyByteArrayOutputStream();\nfillTheOutputStream(out);\nreturn new ByteArrayInputStream(out.getBuf(), 0, out.getCount());\n</code></pre>\n\n<p>As a result, once all the output is written the same buffer is used as the basis of an input stream.</p>\n"},{"tags":[],"owner":{"account_id":237323,"reputation":4915,"user_id":505406,"accept_rate":62,"display_name":"RoboAlex"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1399657159,"creation_date":1399657159,"answer_id":23570862,"question_id":2716596,"body_markdown":"Though the above-mention answers solve your problem, none of them are efficient as you expect from NIO. ByteArrayOutputStream or MyByteArrayOutputStream first write the data into a Java heap memory and then copy it to ByteBuffer which greatly affects the performance. \r\n\r\nAn efficient implementation would be writing ByteBufferOutputStream class yourself. Actually It&#39;s quite easy to do. You have to just provide a write() method. See this link for [ByteBufferInputStream][1]. \r\n\r\n\r\n  [1]: http://www.snippetit.com/2010/01/java-use-bytebuffer-as-inputstream/","title":"How to put data from an OutputStream into a ByteBuffer?","body":"<p>Though the above-mention answers solve your problem, none of them are efficient as you expect from NIO. ByteArrayOutputStream or MyByteArrayOutputStream first write the data into a Java heap memory and then copy it to ByteBuffer which greatly affects the performance. </p>\n\n<p>An efficient implementation would be writing ByteBufferOutputStream class yourself. Actually It's quite easy to do. You have to just provide a write() method. See this link for <a href=\"http://www.snippetit.com/2010/01/java-use-bytebuffer-as-inputstream/\" rel=\"noreferrer\">ByteBufferInputStream</a>. </p>\n"},{"tags":[],"owner":{"account_id":4845031,"reputation":3448,"user_id":4307644,"accept_rate":80,"display_name":"MeetTitan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1541504710,"creation_date":1541504710,"answer_id":53171257,"question_id":2716596,"body_markdown":"You say you&#39;re writing to this stream yourself? If so, maybe you could implement your own ByteBufferOutputStream and plug n&#39; play.\r\n\r\nThe base class would look like so:\r\n\r\n    public class ByteBufferOutputStream extends OutputStream {\r\n\t    //protected WritableByteChannel wbc; //if you need to write directly to a channel\r\n\t    protected static int bs = 2 * 1024 * 1024; //2MB buffer size, change as needed\r\n\t    protected ByteBuffer bb = ByteBuffer.allocate(bs);\r\n\r\n    \tpublic ByteBufferOutputStream(...) {\r\n\t    \t//wbc = ... //again for writing to a channel\r\n    \t}\r\n\r\n    \t@Override\r\n    \tpublic void write(int i) throws IOException {\r\n    \t\tif (!bb.hasRemaining()) flush();\r\n    \t\tbyte b = (byte) i;\r\n    \t\tbb.put(b);\r\n    \t}\r\n\r\n    \t@Override\r\n    \tpublic void write(byte[] b, int off, int len) throws IOException {\r\n    \t\tif (bb.remaining() &lt; len) flush();\r\n    \t\tbb.put(b, off, len);\r\n\t    }\r\n\r\n        /* do something with the buffer when it&#39;s full (perhaps write to channel?)\r\n\t    @Override\r\n\t    public void flush() throws IOException {\r\n\t    \tbb.flip();\r\n\t    \twbc.write(bb);\r\n\t    \tbb.clear();\r\n\t    }\r\n\r\n\t    @Override\r\n\t    public void close() throws IOException {\r\n\t    \tflush();\r\n\t    \twbc.close();\r\n\t    }\r\n        /*\r\n    }","title":"How to put data from an OutputStream into a ByteBuffer?","body":"<p>You say you're writing to this stream yourself? If so, maybe you could implement your own ByteBufferOutputStream and plug n' play.</p>\n\n<p>The base class would look like so:</p>\n\n<pre><code>public class ByteBufferOutputStream extends OutputStream {\n    //protected WritableByteChannel wbc; //if you need to write directly to a channel\n    protected static int bs = 2 * 1024 * 1024; //2MB buffer size, change as needed\n    protected ByteBuffer bb = ByteBuffer.allocate(bs);\n\n    public ByteBufferOutputStream(...) {\n        //wbc = ... //again for writing to a channel\n    }\n\n    @Override\n    public void write(int i) throws IOException {\n        if (!bb.hasRemaining()) flush();\n        byte b = (byte) i;\n        bb.put(b);\n    }\n\n    @Override\n    public void write(byte[] b, int off, int len) throws IOException {\n        if (bb.remaining() &lt; len) flush();\n        bb.put(b, off, len);\n    }\n\n    /* do something with the buffer when it's full (perhaps write to channel?)\n    @Override\n    public void flush() throws IOException {\n        bb.flip();\n        wbc.write(bb);\n        bb.clear();\n    }\n\n    @Override\n    public void close() throws IOException {\n        flush();\n        wbc.close();\n    }\n    /*\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8621303,"reputation":1202,"user_id":6456129,"display_name":"Yessy"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1585551556,"creation_date":1585551556,"answer_id":60925491,"question_id":2716596,"body_markdown":"// access the protected member **buf** &amp; **count** from the extend class\r\n\r\n    class ByteArrayOutputStream2ByteBuffer extends ByteArrayOutputStream {\r\n        public ByteBuffer toByteBuffer() {\r\n            return ByteBuffer.wrap(buf, 0, count);\r\n        }\r\n    }","title":"How to put data from an OutputStream into a ByteBuffer?","body":"<p>// access the protected member <strong>buf</strong> &amp; <strong>count</strong> from the extend class</p>\n\n<pre><code>class ByteArrayOutputStream2ByteBuffer extends ByteArrayOutputStream {\n    public ByteBuffer toByteBuffer() {\n        return ByteBuffer.wrap(buf, 0, count);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4581675,"reputation":947,"user_id":4032515,"display_name":"SemanticBeeng"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1643481549,"creation_date":1643481549,"answer_id":70908590,"question_id":2716596,"body_markdown":"See efficient implementation of `ByteBuffer` backed `OutputStream` with dynamic re-allocation.\r\n\r\n```\r\n/**\r\n * Wraps a {@link ByteBuffer} so it can be used like an {@link OutputStream}. This is similar to a\r\n * {@link java.io.ByteArrayOutputStream}, just that this uses a {@code ByteBuffer} instead of a\r\n * {@code byte[]} as internal storage.\r\n */\r\npublic class ByteBufferOutputStream extends OutputStream {\r\n\r\n\tprivate ByteBuffer wrappedBuffer;\r\n\tprivate final boolean autoEnlarge;\r\n```\r\n\r\nhttps://gist.github.com/hoijui/7fe8a6d31b20ae7af945","title":"How to put data from an OutputStream into a ByteBuffer?","body":"<p>See efficient implementation of <code>ByteBuffer</code> backed <code>OutputStream</code> with dynamic re-allocation.</p>\n<pre><code>/**\n * Wraps a {@link ByteBuffer} so it can be used like an {@link OutputStream}. This is similar to a\n * {@link java.io.ByteArrayOutputStream}, just that this uses a {@code ByteBuffer} instead of a\n * {@code byte[]} as internal storage.\n */\npublic class ByteBufferOutputStream extends OutputStream {\n\n    private ByteBuffer wrappedBuffer;\n    private final boolean autoEnlarge;\n</code></pre>\n<p><a href=\"https://gist.github.com/hoijui/7fe8a6d31b20ae7af945\" rel=\"nofollow noreferrer\">https://gist.github.com/hoijui/7fe8a6d31b20ae7af945</a></p>\n"}],"owner":{"account_id":119849,"reputation":17374,"user_id":311865,"accept_rate":64,"display_name":"Rasto"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":40459,"favorite_count":0,"down_vote_count":0,"up_vote_count":25,"accepted_answer_id":2716863,"answer_count":7,"score":25,"last_activity_date":1643481549,"creation_date":1272313413,"question_id":2716596,"body_markdown":"In Java I need to put content from an OutputStream (I fill data to that stream myself) into a ByteBuffer. How to do it in a simple way?","title":"How to put data from an OutputStream into a ByteBuffer?","body":"<p>In Java I need to put content from an OutputStream (I fill data to that stream myself) into a ByteBuffer. How to do it in a simple way?</p>\n"},{"tags":["java","android"],"answers":[{"tags":[],"owner":{"account_id":482547,"reputation":5537,"user_id":897007,"accept_rate":62,"display_name":"Dale"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1643481547,"creation_date":1643481547,"answer_id":70908589,"question_id":70907468,"body_markdown":"Android is going to manage the life cycle, and the programmer needs to deal with all eventualities. On [this page][1], there&#39;s an abbreviated diagram:\r\n\r\n[![android lifecyle][2]][2]\r\n\r\nThat would indicate that you would need to manage the observer in the `onStop()`. \r\n\r\n\r\n  [1]: https://developer.android.com/guide/components/activities/activity-lifecycle\r\n  [2]: https://i.stack.imgur.com/VJuCP.png","title":"onCreate called again when resize in multiview/split screen","body":"<p>Android is going to manage the life cycle, and the programmer needs to deal with all eventualities. On <a href=\"https://developer.android.com/guide/components/activities/activity-lifecycle\" rel=\"nofollow noreferrer\">this page</a>, there's an abbreviated diagram:</p>\n<p><a href=\"https://i.stack.imgur.com/VJuCP.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VJuCP.png\" alt=\"android lifecyle\" /></a></p>\n<p>That would indicate that you would need to manage the observer in the <code>onStop()</code>.</p>\n"}],"owner":{"account_id":24091944,"reputation":1,"user_id":18065092,"display_name":"arstomtom"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":74,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1643481547,"creation_date":1643473794,"question_id":70907468,"body_markdown":"When I change the screen size in the multiview / split screen mode, the onCreate function in MainActivity is called again.\r\n\r\nBecause in onCreate I have a ProcessLifecycleOwner observer:\r\n\r\n```\r\nProcessLifecycleOwner.get().GetLifecycle().AddObserver(this);\r\n```\r\n\r\nI don&#39;t want it to be restarted ... How do I know that onCreate has been called before?\r\n\r\nI know you can add:\r\n\r\n```\r\nandroid:configChanges=&quot;screenSize&quot;\r\n```\r\n\r\nin the manifest, but unfortunately needs to &quot;refresh the layout&quot; when resizing. \r\n","title":"onCreate called again when resize in multiview/split screen","body":"<p>When I change the screen size in the multiview / split screen mode, the onCreate function in MainActivity is called again.</p>\n<p>Because in onCreate I have a ProcessLifecycleOwner observer:</p>\n<pre><code>ProcessLifecycleOwner.get().GetLifecycle().AddObserver(this);\n</code></pre>\n<p>I don't want it to be restarted ... How do I know that onCreate has been called before?</p>\n<p>I know you can add:</p>\n<pre><code>android:configChanges=&quot;screenSize&quot;\n</code></pre>\n<p>in the manifest, but unfortunately needs to &quot;refresh the layout&quot; when resizing.</p>\n"},{"tags":["java","dns","network-programming","apache-mina","apache-ftpserver"],"answers":[{"tags":[],"owner":{"account_id":5289146,"reputation":8128,"user_id":4222206,"display_name":"queeg"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1643481509,"creation_date":1643323021,"answer_id":70886678,"question_id":70886402,"body_markdown":"If your client reports a &#39;connection refused&#39; that usually indicates (no guarantee) that no firewall prevented the TCP traffic, the connection request ended up on the intended machine but nothing was accepting the connection on the port you tried to connect to.\r\n\r\nThings you can check:\r\nWas the server process running? Was the server process on the correct port? Did the client connect to the correct port?\r\n\r\nYou might try to connect with another client (e.g. curl) just to see whether the TCP connection can be established.\r\nYou might try to connect to another port (e.g. 22  / ssh) to see if the client can establish the connection.","title":"Use domain name to connect to embedded Apache FtpServer","body":"<p>If your client reports a 'connection refused' that usually indicates (no guarantee) that no firewall prevented the TCP traffic, the connection request ended up on the intended machine but nothing was accepting the connection on the port you tried to connect to.</p>\n<p>Things you can check:\nWas the server process running? Was the server process on the correct port? Did the client connect to the correct port?</p>\n<p>You might try to connect with another client (e.g. curl) just to see whether the TCP connection can be established.\nYou might try to connect to another port (e.g. 22  / ssh) to see if the client can establish the connection.</p>\n"}],"owner":{"account_id":8697869,"reputation":196,"user_id":6508729,"display_name":"Marwi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":152,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1643481509,"creation_date":1643321337,"question_id":70886402,"body_markdown":"I&#39;m trying to set up a simple test FTPS server in Java using Apache FtpServer and connect to it using a domain name instead of the IP address.\r\n\r\nI&#39;ve pointed the A record to the IP address and set up the SSL certificate. Based on the [Apache FtpServer documentation][1], here is what my code looks like so far:\r\n\r\n```java\r\n        FtpServerFactory ftpServerFactory = new FtpServerFactory();\r\n        ListenerFactory listenerFactory = new ListenerFactory();\r\n        listenerFactory.setPort(990);\r\n        listenerFactory.setServerAddress(&quot;example.com&quot;);\r\n\r\n        SslConfigurationFactory sslConfigurationFactory = new SslConfigurationFactory();\r\n        sslConfigurationFactory.setKeystoreFile(JKS);\r\n        sslConfigurationFactory.setKeystorePassword(JKS_PASS);\r\n        listenerFactory.setSslConfiguration(sslConfigurationFactory.createSslConfiguration());\r\n        listenerFactory.setImplicitSsl(true);\r\n\r\n        ftpServerFactory.addListener(&quot;default&quot;, listenerFactory.createListener());\r\n\r\n        PropertiesUserManagerFactory userManagerFactory = new PropertiesUserManagerFactory();\r\n        userManagerFactory.setFile(USERS_PATH.toFile());\r\n\r\n        BaseUser test = new BaseUser();\r\n        sample1.setName(&quot;test&quot;);\r\n        sample1.setPassword(&quot;test&quot;);\r\n        sample1.setHomeDirectory(HOME.getAbsolutePath().toString());\r\n        test.setAuthorities(List.of(new WritePermission());\r\n\r\n        UserManager userManager = userManagerFactory.createUserManager();\r\n        try {\r\n            userManager.save(test);\r\n        }\r\n        catch (FtpException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n        ftpServerFactory.setUserManager(userManager);\r\n\r\n        FtpServer server = ftpServerFactory.createServer();\r\n        try {\r\n            server.start();\r\n        }\r\n        catch (FtpException e) {\r\n            e.printStackTrace();\r\n        }\r\n```\r\n\r\nHowever, when I try to connect to the FTPS server, I get an `ECONNREFUSED - Connection refused by server` from my FTPS client.\r\n\r\nAre there any steps that I missed?\r\n\r\n  [1]: https://mina.apache.org/ftpserver-project/embedding_ftpserver.html","title":"Use domain name to connect to embedded Apache FtpServer","body":"<p>I'm trying to set up a simple test FTPS server in Java using Apache FtpServer and connect to it using a domain name instead of the IP address.</p>\n<p>I've pointed the A record to the IP address and set up the SSL certificate. Based on the <a href=\"https://mina.apache.org/ftpserver-project/embedding_ftpserver.html\" rel=\"nofollow noreferrer\">Apache FtpServer documentation</a>, here is what my code looks like so far:</p>\n<pre class=\"lang-java prettyprint-override\"><code>        FtpServerFactory ftpServerFactory = new FtpServerFactory();\n        ListenerFactory listenerFactory = new ListenerFactory();\n        listenerFactory.setPort(990);\n        listenerFactory.setServerAddress(&quot;example.com&quot;);\n\n        SslConfigurationFactory sslConfigurationFactory = new SslConfigurationFactory();\n        sslConfigurationFactory.setKeystoreFile(JKS);\n        sslConfigurationFactory.setKeystorePassword(JKS_PASS);\n        listenerFactory.setSslConfiguration(sslConfigurationFactory.createSslConfiguration());\n        listenerFactory.setImplicitSsl(true);\n\n        ftpServerFactory.addListener(&quot;default&quot;, listenerFactory.createListener());\n\n        PropertiesUserManagerFactory userManagerFactory = new PropertiesUserManagerFactory();\n        userManagerFactory.setFile(USERS_PATH.toFile());\n\n        BaseUser test = new BaseUser();\n        sample1.setName(&quot;test&quot;);\n        sample1.setPassword(&quot;test&quot;);\n        sample1.setHomeDirectory(HOME.getAbsolutePath().toString());\n        test.setAuthorities(List.of(new WritePermission());\n\n        UserManager userManager = userManagerFactory.createUserManager();\n        try {\n            userManager.save(test);\n        }\n        catch (FtpException e) {\n            e.printStackTrace();\n        }\n\n        ftpServerFactory.setUserManager(userManager);\n\n        FtpServer server = ftpServerFactory.createServer();\n        try {\n            server.start();\n        }\n        catch (FtpException e) {\n            e.printStackTrace();\n        }\n</code></pre>\n<p>However, when I try to connect to the FTPS server, I get an <code>ECONNREFUSED - Connection refused by server</code> from my FTPS client.</p>\n<p>Are there any steps that I missed?</p>\n"},{"tags":["javascript","java","django"],"comments":[{"owner":{"account_id":263165,"reputation":31400,"user_id":548562,"display_name":"Iain Shelvington"},"score":0,"creation_date":1643406755,"post_id":70900655,"comment_id":125340778,"body_markdown":"Can you show the rest of your template?","body":"Can you show the rest of your template?"},{"owner":{"account_id":23991506,"reputation":11,"user_id":17977600,"display_name":"Alexander Blackwood"},"score":0,"creation_date":1643481548,"post_id":70900655,"comment_id":125353528,"body_markdown":"@IainShelvington shared","body":"@IainShelvington shared"}],"owner":{"account_id":23991506,"reputation":11,"user_id":17977600,"display_name":"Alexander Blackwood"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":149,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1643481483,"creation_date":1643406497,"question_id":70900655,"body_markdown":"I am working on a web app using Django/Python/Javascript/Java.  The focal point is a map of the USA.  A user should be able to click on a region and the value of that region should automatically query a database and return certain information.  Currently, my code produces a const called regionName and the value of regionName is passed automatically as input to the search bar; however, from here a user needs to manually click the &#39;search&#39; button to submit the form and query the database.  As below:\r\n\r\n```\r\n\r\n  onRegionClick: function(event, code){\r\n            console.log(&#39;event&#39;, event, &#39;code&#39;, code);\r\n            const regionName = map.getRegionName(code);\r\n            console.log(&#39;regionName&#39;, regionName);\r\n            $(&quot;#selection&quot;).val(regionName);\r\n  \r\n        },\r\n\r\n      });\r\n\r\n```\r\n \r\n\r\nWhat I am trying to do with the code is to automatically submit the value of regionName after it is passed to the search bar.  Efforts thus far have been similar to the code below. \r\n\r\n**$(&quot;#selection&quot;)**   - the form\r\n\r\n**$(&quot;#q&quot;)** - the name of the button\r\n\r\n```\r\n $(&quot;#selection&quot;).on(&#39;change&#39;, function(){\r\n                if ($(&quot;#selection&quot;).val() === regionName ) {\r\n                  $(&quot;#q&quot;).click();\r\n                }\r\n              }); \r\n\r\n```\r\nThis is not producing any errors, but it&#39;s not producing any results either.\r\n\r\nI&#39;ve tried various substitutes along similar lines such as:\r\n\r\n .on(&#39;input&#39;.. instead of &#39;change&#39;\r\n.submit() instead of .click()\r\n\r\nI&#39;ve also have an .autocomplete() method I&#39;m using.  I&#39;m not sure if this is causing a conflict.\r\n\r\n```\r\n\r\n&lt;script type=&quot;text/javascript&quot;&gt;\r\n            $(function () {\r\n              var states = [\r\n                {% for states in states %}\r\n\r\n                &quot; {{states.state}} &quot;,\r\n\r\n                {% endfor %}\r\n\r\n              ];\r\n\r\n              $(&quot;#selection&quot;).autocomplete({\r\n                  source: states\r\n              }); \r\n\r\n            });\r\n\r\n          &lt;/script&gt;\r\n```\r\n\r\n**Here is the entire index.html page:**\r\n\r\n```\r\n{% load static %}\r\n\r\n&lt;!DOCTYPE html&gt;\r\n&lt;html&gt;\r\n&lt;head&gt;\r\n  &lt;title&gt;Mortgage OpsBot&lt;/title&gt;\r\n\r\n  &lt;link rel=&quot;stylesheet&quot; media=&quot;all&quot; href=&quot;{% static &#39;jquery-jvectormap.css&#39; %}&quot;&gt;\r\n  &lt;link href=&quot;https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css&quot; rel=&quot;stylesheet&quot; integrity=&quot;sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3&quot; crossorigin=&quot;anonymous&quot;&gt;\r\n  &lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;{% static &#39;custom.css&#39; %}&quot;&gt;\r\n  &lt;script src=&quot;{% static &#39;jquery-1.8.2.js&#39; %}&quot;&gt;&lt;/script&gt;\r\n  &lt;script src=&quot;{% static &#39;jquery-jvectormap.js&#39; %}&quot;&gt;&lt;/script&gt;\r\n  &lt;script src=&quot;{% static &#39;jquery-mousewheel.js&#39; %}&quot;&gt;&lt;/script&gt;\r\n\r\n  &lt;script src=&quot;{% static &#39;jvectormap.js&#39; %}&quot;&gt;&lt;/script&gt;\r\n\r\n  &lt;script src=&quot;{% static &#39;abstract-element.js&#39; %}&quot;&gt;&lt;/script&gt;\r\n  &lt;script src=&quot;{% static &#39;abstract-canvas-element.js&#39; %}&quot;&gt;&lt;/script&gt;\r\n  &lt;script src=&quot;{% static &#39;abstract-shape-element.js&#39; %}&quot;&gt;&lt;/script&gt;\r\n\r\n  &lt;script src=&quot;{% static &#39;svg-element.js&#39; %}&quot;&gt;&lt;/script&gt;\r\n  &lt;script src=&quot;{% static &#39;svg-group-element.js&#39; %}&quot;&gt;&lt;/script&gt;\r\n  &lt;script src=&quot;{% static &#39;svg-canvas-element.js&#39; %}&quot;&gt;&lt;/script&gt;\r\n  &lt;script src=&quot;{% static &#39;svg-shape-element.js&#39; %}&quot;&gt;&lt;/script&gt;\r\n  &lt;script src=&quot;{% static &#39;svg-path-element.js&#39; %}&quot;&gt;&lt;/script&gt;\r\n  &lt;script src=&quot;{% static &#39;svg-circle-element.js&#39; %}&quot;&gt;&lt;/script&gt;\r\n  &lt;script src=&quot;{% static &#39;svg-image-element.js&#39; %}&quot;&gt;&lt;/script&gt;\r\n  &lt;script src=&quot;{% static &#39;svg-text-element.js&#39; %}&quot;&gt;&lt;/script&gt;\r\n\r\n  &lt;script src=&quot;{% static &#39;vml-element.js&#39; %}&quot;&gt;&lt;/script&gt;\r\n  &lt;script src=&quot;{% static &#39;vml-group-element.js&#39; %}&quot;&gt;&lt;/script&gt;\r\n  &lt;script src=&quot;{% static &#39;vml-canvas-element.js&#39; %}&quot;&gt;&lt;/script&gt;\r\n  &lt;script src=&quot;{% static &#39;vml-shape-element.js&#39; %}&quot;&gt;&lt;/script&gt;\r\n  &lt;script src=&quot;{% static &#39;vml-path-element.js&#39; %}&quot;&gt;&lt;/script&gt;\r\n  &lt;script src=&quot;{% static &#39;vml-circle-element.js&#39; %}&quot;&gt;&lt;/script&gt;\r\n\r\n  &lt;script src=&quot;{% static &#39;map-object.js&#39; %}&quot;&gt;&lt;/script&gt;\r\n  &lt;script src=&quot;{% static &#39;region.js&#39; %}&quot;&gt;&lt;/script&gt;\r\n  &lt;script src=&quot;{% static &#39;marker.js&#39; %}&quot;&gt;&lt;/script&gt;\r\n\r\n  &lt;script src=&quot;{% static &#39;vector-canvas.js&#39; %}&quot;&gt;&lt;/script&gt;\r\n  &lt;script src=&quot;{% static &#39;simple-scale.js&#39; %}&quot;&gt;&lt;/script&gt;\r\n  &lt;script src=&quot;{% static &#39;numeric-scale.js&#39; %}&quot;&gt;&lt;/script&gt;\r\n  &lt;script src=&quot;{% static &#39;ordinal-scale.js&#39; %}&quot;&gt;&lt;/script&gt;\r\n  &lt;script src=&quot;{% static &#39;color-scale.js&#39; %}&quot;&gt;&lt;/script&gt;\r\n  &lt;script src=&quot;{% static &#39;data-series.js&#39; %}&quot;&gt;&lt;/script&gt;\r\n  &lt;script src=&quot;{% static &#39;proj.js&#39; %}&quot;&gt;&lt;/script&gt;\r\n  &lt;script src=&quot;{% static &#39;map.js&#39; %}&quot;&gt;&lt;/script&gt;\r\n  &lt;script src=&quot;{% static &#39;multimap.js&#39; %}&quot;&gt;&lt;/script&gt;\r\n  &lt;script src=&quot;{% static &#39;jquery-jvectormap-data-us-lcc-en.js&#39; %}&quot;&gt;&lt;/script&gt;\r\n  &lt;script src=&quot;{% static &#39;jquery-jvectormap-data-us-fl-lcc-en.js&#39; %}&quot;&gt;&lt;/script&gt;\r\n  &lt;script src=&quot;https://unpkg.com/react@16/umd/react.development.js&quot; crossorigin&gt;&lt;/script&gt;\r\n\t&lt;script src=&quot;https://unpkg.com/react-dom@16/umd/react-dom.development.js&quot; crossorigin&gt;&lt;/script&gt;\r\n\t&lt;script src=&quot;https://unpkg.com/babel-standalone@6/babel.min.js&quot; crossorigin&gt;&lt;/script&gt;\r\n  &lt;script src=&quot;https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.js&quot;&gt;&lt;/script&gt;\r\n  &lt;script src=&quot;https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.16/jquery-ui.js&quot;&gt;&lt;/script&gt;\r\n  &lt;link href=&quot;http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.16/themes/ui-lightness/jquery-ui.css&quot;rel=&quot;stylesheet&quot; type=&quot;text/css&quot;/&gt;\r\n  &lt;script&gt;\r\n    $(function(){\r\n      var map;\r\n\r\n\r\n      map = new jvm.Map({\r\n        container: $(&#39;#map1&#39;),\r\n        maxLevel: 1,\r\n        map: &#39;us_lcc_en&#39;,\r\n        regionsSelectable: true,\r\n        regionsSelectableOne: true,\r\n        regionStyle: {\r\n          initial: {\r\n            fill: &#39;#B8E186&#39;\r\n          },\r\n          selected: {\r\n            fill: &#39;#4e5c6b&#39;\r\n\r\n          }\r\n        },\r\n\r\n\r\n         onRegionSelected: function(){\r\n          if (window.localStorage) {\r\n            window.localStorage.setItem(\r\n              &#39;jvectormap-selected-regions&#39;,\r\n              JSON.stringify(map.getSelectedRegions())\r\n            );\r\n   \r\n          }\r\n          \r\n        },\r\n \r\n          onRegionClick: function(event, code){\r\n            console.log(&#39;event&#39;, event, &#39;code&#39;, code);\r\n            const regionName = map.getRegionName(code);\r\n            console.log(&#39;regionName&#39;, regionName);\r\n            $(&quot;#selection&quot;).val(regionName);\r\n            \r\n            $(&quot;#selection&quot;).on(&#39;change&#39;, function(){\r\n                if ($(&quot;#selection&quot;).val() === regionName ) {\r\n                  $(&quot;#q&quot;).click();\r\n                }\r\n              });\r\n\r\n\r\n  \r\n        },\r\n\r\n      });\r\n      \r\n\r\n      map.setSelectedRegions( JSON.parse( window.localStorage.getItem(&#39;jvectormap-selected-regions&#39;) || &#39;[]&#39; ) );\r\n \r\n    });\r\n\r\n  &lt;/script&gt;\r\n\r\n&lt;/head&gt;\r\n\r\n&lt;body&gt;\r\n  &lt;nav class=&quot;navbar navbar-expand-lg navbar-light bg-light&quot;&gt;\r\n    &lt;div class=&quot;container-fluid&quot;&gt;\r\n      &lt;a class=&quot;navbar-brand&quot; href=&quot;#&quot;&gt;&lt;/a&gt;\r\n        &lt;img src={% static &quot;logo-bot.jpg&quot; %} width=100 alt=&quot;Logo&quot;&gt;\r\n      &lt;button class=&quot;navbar-toggler&quot; type=&quot;button&quot; data-bs-toggle=&quot;collapse&quot; data-bs-target=&quot;#navbarSupportedContent&quot; aria-controls=&quot;navbarSupportedContent&quot; aria-expanded=&quot;false&quot; aria-label=&quot;Toggle navigation&quot;&gt;\r\n        &lt;span class=&quot;navbar-toggler-icon&quot;&gt;&lt;/span&gt;\r\n      &lt;/button&gt;\r\n      &lt;div class=&quot;collapse navbar-collapse&quot; id=&quot;navbarSupportedContent&quot;&gt;\r\n        &lt;ul class=&quot;navbar-nav me-auto mb-2 mb-lg-0&quot;&gt;\r\n          &lt;li class=&quot;nav-item&quot;&gt;\r\n            &lt;a class=&quot;nav-link active&quot; aria-current=&quot;page&quot; href=&quot;#&quot;&gt;Home&lt;/a&gt;\r\n          &lt;/li&gt;\r\n          &lt;li class=&quot;nav-item dropdown&quot;&gt;\r\n            &lt;a class=&quot;nav-link dropdown-toggle&quot; href=&quot;#&quot; id=&quot;navbarDropdown&quot; role=&quot;button&quot; data-bs-toggle=&quot;dropdown&quot; aria-expanded=&quot;false&quot;&gt;\r\n              Apps\r\n            &lt;/a&gt;\r\n            &lt;ul class=&quot;dropdown-menu&quot; aria-labelledby=&quot;navbarDropdown&quot;&gt;\r\n              &lt;li&gt;&lt;a class=&quot;dropdown-item&quot; href=&quot;dropdown1&quot;&gt;Action&lt;/a&gt;&lt;/li&gt;\r\n              &lt;li&gt;&lt;a class=&quot;dropdown-item&quot; href=&quot;dropdown2&quot;&gt;Another action&lt;/a&gt;&lt;/li&gt;\r\n              &lt;li&gt;&lt;hr class=&quot;dropdown-divider&quot;&gt;&lt;/li&gt;\r\n              &lt;li&gt;&lt;a class=&quot;dropdown-item&quot; href=&quot;dropdown3&quot;&gt;Something else here&lt;/a&gt;&lt;/li&gt;\r\n            &lt;/ul&gt;\r\n          &lt;/li&gt;\r\n          &lt;li class=&quot;nav-item&quot;&gt;\r\n            &lt;a class=&quot;nav-link disabled&quot;&gt;Logout&lt;/a&gt;\r\n          &lt;/li&gt;\r\n        &lt;/ul&gt;\r\n\r\n        &lt;form class=&quot;d-flex&quot; method=&quot;POST&quot; action=&quot;.&quot;&gt;\r\n          \r\n\r\n        {% csrf_token %}\r\n\r\n        {{ form.as_p }}\r\n        &lt;input type=&quot;hidden&quot; name=&quot;q&quot; value=&quot;&quot;/&gt;\r\n\r\n          &lt;script type=&quot;text/javascript&quot;&gt;\r\n            $(function () {\r\n              var states = [\r\n                {% for states in states %}\r\n\r\n                &quot; {{states.state}} &quot;,\r\n\r\n                {% endfor %}\r\n\r\n              ];\r\n\r\n              $(&quot;#selection&quot;).autocomplete({\r\n                  source: states\r\n              }); \r\n\r\n            });\r\n\r\n          &lt;/script&gt;\r\n\r\n\r\n\r\n          &lt;/script&gt;\r\n          &lt;button class=&quot;btn btn-outline-success&quot; type=&quot;submit&quot; name=&quot;q&quot;&gt;Search&lt;/button&gt;\r\n        &lt;/form&gt;\r\n      &lt;/div&gt;\r\n    &lt;/div&gt;\r\n  &lt;/nav&gt;\r\n\r\n\r\n  &lt;div class=&quot;wrap&quot;&gt;\r\n\r\n\r\n  &lt;div  class=&quot;jvectormap-container&quot; id=&quot;map1&quot; style=&quot;width: 750px; height: 600px&quot;&gt;&lt;/div&gt;\r\n\r\n\r\n```\r\n\r\n**Here is the form from views.py:**\r\n\r\n```\r\n\r\nclass SelectForm(forms.Form):\r\n    selection = forms.CharField(label=&quot;&quot;, widget= forms.TextInput(attrs={&#39;class&#39;:&#39;&quot;form-control me-2&quot;&#39;,&#39;id&#39;:&#39;selection&#39;, &#39;name&#39;:&#39;q&#39;, &#39;placeholder&#39;:&#39;  State&#39;}))\r\n\r\n```\r\n\r\n","title":"Automatically submit a value on click to a form using Javascript/Java in a Django form","body":"<p>I am working on a web app using Django/Python/Javascript/Java.  The focal point is a map of the USA.  A user should be able to click on a region and the value of that region should automatically query a database and return certain information.  Currently, my code produces a const called regionName and the value of regionName is passed automatically as input to the search bar; however, from here a user needs to manually click the 'search' button to submit the form and query the database.  As below:</p>\n<pre><code>\n  onRegionClick: function(event, code){\n            console.log('event', event, 'code', code);\n            const regionName = map.getRegionName(code);\n            console.log('regionName', regionName);\n            $(&quot;#selection&quot;).val(regionName);\n  \n        },\n\n      });\n\n</code></pre>\n<p>What I am trying to do with the code is to automatically submit the value of regionName after it is passed to the search bar.  Efforts thus far have been similar to the code below.</p>\n<p><strong>$(&quot;#selection&quot;)</strong>   - the form</p>\n<p><strong>$(&quot;#q&quot;)</strong> - the name of the button</p>\n<pre><code> $(&quot;#selection&quot;).on('change', function(){\n                if ($(&quot;#selection&quot;).val() === regionName ) {\n                  $(&quot;#q&quot;).click();\n                }\n              }); \n\n</code></pre>\n<p>This is not producing any errors, but it's not producing any results either.</p>\n<p>I've tried various substitutes along similar lines such as:</p>\n<p>.on('input'.. instead of 'change'\n.submit() instead of .click()</p>\n<p>I've also have an .autocomplete() method I'm using.  I'm not sure if this is causing a conflict.</p>\n<pre><code>\n&lt;script type=&quot;text/javascript&quot;&gt;\n            $(function () {\n              var states = [\n                {% for states in states %}\n\n                &quot; {{states.state}} &quot;,\n\n                {% endfor %}\n\n              ];\n\n              $(&quot;#selection&quot;).autocomplete({\n                  source: states\n              }); \n\n            });\n\n          &lt;/script&gt;\n</code></pre>\n<p><strong>Here is the entire index.html page:</strong></p>\n<pre><code>{% load static %}\n\n&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n  &lt;title&gt;Mortgage OpsBot&lt;/title&gt;\n\n  &lt;link rel=&quot;stylesheet&quot; media=&quot;all&quot; href=&quot;{% static 'jquery-jvectormap.css' %}&quot;&gt;\n  &lt;link href=&quot;https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css&quot; rel=&quot;stylesheet&quot; integrity=&quot;sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3&quot; crossorigin=&quot;anonymous&quot;&gt;\n  &lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;{% static 'custom.css' %}&quot;&gt;\n  &lt;script src=&quot;{% static 'jquery-1.8.2.js' %}&quot;&gt;&lt;/script&gt;\n  &lt;script src=&quot;{% static 'jquery-jvectormap.js' %}&quot;&gt;&lt;/script&gt;\n  &lt;script src=&quot;{% static 'jquery-mousewheel.js' %}&quot;&gt;&lt;/script&gt;\n\n  &lt;script src=&quot;{% static 'jvectormap.js' %}&quot;&gt;&lt;/script&gt;\n\n  &lt;script src=&quot;{% static 'abstract-element.js' %}&quot;&gt;&lt;/script&gt;\n  &lt;script src=&quot;{% static 'abstract-canvas-element.js' %}&quot;&gt;&lt;/script&gt;\n  &lt;script src=&quot;{% static 'abstract-shape-element.js' %}&quot;&gt;&lt;/script&gt;\n\n  &lt;script src=&quot;{% static 'svg-element.js' %}&quot;&gt;&lt;/script&gt;\n  &lt;script src=&quot;{% static 'svg-group-element.js' %}&quot;&gt;&lt;/script&gt;\n  &lt;script src=&quot;{% static 'svg-canvas-element.js' %}&quot;&gt;&lt;/script&gt;\n  &lt;script src=&quot;{% static 'svg-shape-element.js' %}&quot;&gt;&lt;/script&gt;\n  &lt;script src=&quot;{% static 'svg-path-element.js' %}&quot;&gt;&lt;/script&gt;\n  &lt;script src=&quot;{% static 'svg-circle-element.js' %}&quot;&gt;&lt;/script&gt;\n  &lt;script src=&quot;{% static 'svg-image-element.js' %}&quot;&gt;&lt;/script&gt;\n  &lt;script src=&quot;{% static 'svg-text-element.js' %}&quot;&gt;&lt;/script&gt;\n\n  &lt;script src=&quot;{% static 'vml-element.js' %}&quot;&gt;&lt;/script&gt;\n  &lt;script src=&quot;{% static 'vml-group-element.js' %}&quot;&gt;&lt;/script&gt;\n  &lt;script src=&quot;{% static 'vml-canvas-element.js' %}&quot;&gt;&lt;/script&gt;\n  &lt;script src=&quot;{% static 'vml-shape-element.js' %}&quot;&gt;&lt;/script&gt;\n  &lt;script src=&quot;{% static 'vml-path-element.js' %}&quot;&gt;&lt;/script&gt;\n  &lt;script src=&quot;{% static 'vml-circle-element.js' %}&quot;&gt;&lt;/script&gt;\n\n  &lt;script src=&quot;{% static 'map-object.js' %}&quot;&gt;&lt;/script&gt;\n  &lt;script src=&quot;{% static 'region.js' %}&quot;&gt;&lt;/script&gt;\n  &lt;script src=&quot;{% static 'marker.js' %}&quot;&gt;&lt;/script&gt;\n\n  &lt;script src=&quot;{% static 'vector-canvas.js' %}&quot;&gt;&lt;/script&gt;\n  &lt;script src=&quot;{% static 'simple-scale.js' %}&quot;&gt;&lt;/script&gt;\n  &lt;script src=&quot;{% static 'numeric-scale.js' %}&quot;&gt;&lt;/script&gt;\n  &lt;script src=&quot;{% static 'ordinal-scale.js' %}&quot;&gt;&lt;/script&gt;\n  &lt;script src=&quot;{% static 'color-scale.js' %}&quot;&gt;&lt;/script&gt;\n  &lt;script src=&quot;{% static 'data-series.js' %}&quot;&gt;&lt;/script&gt;\n  &lt;script src=&quot;{% static 'proj.js' %}&quot;&gt;&lt;/script&gt;\n  &lt;script src=&quot;{% static 'map.js' %}&quot;&gt;&lt;/script&gt;\n  &lt;script src=&quot;{% static 'multimap.js' %}&quot;&gt;&lt;/script&gt;\n  &lt;script src=&quot;{% static 'jquery-jvectormap-data-us-lcc-en.js' %}&quot;&gt;&lt;/script&gt;\n  &lt;script src=&quot;{% static 'jquery-jvectormap-data-us-fl-lcc-en.js' %}&quot;&gt;&lt;/script&gt;\n  &lt;script src=&quot;https://unpkg.com/react@16/umd/react.development.js&quot; crossorigin&gt;&lt;/script&gt;\n    &lt;script src=&quot;https://unpkg.com/react-dom@16/umd/react-dom.development.js&quot; crossorigin&gt;&lt;/script&gt;\n    &lt;script src=&quot;https://unpkg.com/babel-standalone@6/babel.min.js&quot; crossorigin&gt;&lt;/script&gt;\n  &lt;script src=&quot;https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.js&quot;&gt;&lt;/script&gt;\n  &lt;script src=&quot;https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.16/jquery-ui.js&quot;&gt;&lt;/script&gt;\n  &lt;link href=&quot;http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.16/themes/ui-lightness/jquery-ui.css&quot;rel=&quot;stylesheet&quot; type=&quot;text/css&quot;/&gt;\n  &lt;script&gt;\n    $(function(){\n      var map;\n\n\n      map = new jvm.Map({\n        container: $('#map1'),\n        maxLevel: 1,\n        map: 'us_lcc_en',\n        regionsSelectable: true,\n        regionsSelectableOne: true,\n        regionStyle: {\n          initial: {\n            fill: '#B8E186'\n          },\n          selected: {\n            fill: '#4e5c6b'\n\n          }\n        },\n\n\n         onRegionSelected: function(){\n          if (window.localStorage) {\n            window.localStorage.setItem(\n              'jvectormap-selected-regions',\n              JSON.stringify(map.getSelectedRegions())\n            );\n   \n          }\n          \n        },\n \n          onRegionClick: function(event, code){\n            console.log('event', event, 'code', code);\n            const regionName = map.getRegionName(code);\n            console.log('regionName', regionName);\n            $(&quot;#selection&quot;).val(regionName);\n            \n            $(&quot;#selection&quot;).on('change', function(){\n                if ($(&quot;#selection&quot;).val() === regionName ) {\n                  $(&quot;#q&quot;).click();\n                }\n              });\n\n\n  \n        },\n\n      });\n      \n\n      map.setSelectedRegions( JSON.parse( window.localStorage.getItem('jvectormap-selected-regions') || '[]' ) );\n \n    });\n\n  &lt;/script&gt;\n\n&lt;/head&gt;\n\n&lt;body&gt;\n  &lt;nav class=&quot;navbar navbar-expand-lg navbar-light bg-light&quot;&gt;\n    &lt;div class=&quot;container-fluid&quot;&gt;\n      &lt;a class=&quot;navbar-brand&quot; href=&quot;#&quot;&gt;&lt;/a&gt;\n        &lt;img src={% static &quot;logo-bot.jpg&quot; %} width=100 alt=&quot;Logo&quot;&gt;\n      &lt;button class=&quot;navbar-toggler&quot; type=&quot;button&quot; data-bs-toggle=&quot;collapse&quot; data-bs-target=&quot;#navbarSupportedContent&quot; aria-controls=&quot;navbarSupportedContent&quot; aria-expanded=&quot;false&quot; aria-label=&quot;Toggle navigation&quot;&gt;\n        &lt;span class=&quot;navbar-toggler-icon&quot;&gt;&lt;/span&gt;\n      &lt;/button&gt;\n      &lt;div class=&quot;collapse navbar-collapse&quot; id=&quot;navbarSupportedContent&quot;&gt;\n        &lt;ul class=&quot;navbar-nav me-auto mb-2 mb-lg-0&quot;&gt;\n          &lt;li class=&quot;nav-item&quot;&gt;\n            &lt;a class=&quot;nav-link active&quot; aria-current=&quot;page&quot; href=&quot;#&quot;&gt;Home&lt;/a&gt;\n          &lt;/li&gt;\n          &lt;li class=&quot;nav-item dropdown&quot;&gt;\n            &lt;a class=&quot;nav-link dropdown-toggle&quot; href=&quot;#&quot; id=&quot;navbarDropdown&quot; role=&quot;button&quot; data-bs-toggle=&quot;dropdown&quot; aria-expanded=&quot;false&quot;&gt;\n              Apps\n            &lt;/a&gt;\n            &lt;ul class=&quot;dropdown-menu&quot; aria-labelledby=&quot;navbarDropdown&quot;&gt;\n              &lt;li&gt;&lt;a class=&quot;dropdown-item&quot; href=&quot;dropdown1&quot;&gt;Action&lt;/a&gt;&lt;/li&gt;\n              &lt;li&gt;&lt;a class=&quot;dropdown-item&quot; href=&quot;dropdown2&quot;&gt;Another action&lt;/a&gt;&lt;/li&gt;\n              &lt;li&gt;&lt;hr class=&quot;dropdown-divider&quot;&gt;&lt;/li&gt;\n              &lt;li&gt;&lt;a class=&quot;dropdown-item&quot; href=&quot;dropdown3&quot;&gt;Something else here&lt;/a&gt;&lt;/li&gt;\n            &lt;/ul&gt;\n          &lt;/li&gt;\n          &lt;li class=&quot;nav-item&quot;&gt;\n            &lt;a class=&quot;nav-link disabled&quot;&gt;Logout&lt;/a&gt;\n          &lt;/li&gt;\n        &lt;/ul&gt;\n\n        &lt;form class=&quot;d-flex&quot; method=&quot;POST&quot; action=&quot;.&quot;&gt;\n          \n\n        {% csrf_token %}\n\n        {{ form.as_p }}\n        &lt;input type=&quot;hidden&quot; name=&quot;q&quot; value=&quot;&quot;/&gt;\n\n          &lt;script type=&quot;text/javascript&quot;&gt;\n            $(function () {\n              var states = [\n                {% for states in states %}\n\n                &quot; {{states.state}} &quot;,\n\n                {% endfor %}\n\n              ];\n\n              $(&quot;#selection&quot;).autocomplete({\n                  source: states\n              }); \n\n            });\n\n          &lt;/script&gt;\n\n\n\n          &lt;/script&gt;\n          &lt;button class=&quot;btn btn-outline-success&quot; type=&quot;submit&quot; name=&quot;q&quot;&gt;Search&lt;/button&gt;\n        &lt;/form&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n  &lt;/nav&gt;\n\n\n  &lt;div class=&quot;wrap&quot;&gt;\n\n\n  &lt;div  class=&quot;jvectormap-container&quot; id=&quot;map1&quot; style=&quot;width: 750px; height: 600px&quot;&gt;&lt;/div&gt;\n\n\n</code></pre>\n<p><strong>Here is the form from views.py:</strong></p>\n<pre><code>\nclass SelectForm(forms.Form):\n    selection = forms.CharField(label=&quot;&quot;, widget= forms.TextInput(attrs={'class':'&quot;form-control me-2&quot;','id':'selection', 'name':'q', 'placeholder':'  State'}))\n\n</code></pre>\n"},{"tags":["java","java-stream"],"comments":[{"owner":{"account_id":249169,"reputation":19388,"user_id":525036,"accept_rate":25,"display_name":"Didier L"},"score":0,"creation_date":1643313731,"post_id":70883977,"comment_id":125313549,"body_markdown":"What should be the final result? Something like `Map&lt;String, Map&lt;String, Map&lt;String, Double&gt;&gt;&gt;`? Also if a source does not appear for a given week, or a destination does not appear for given week and source, it’s ok if they don’t appear in the result either? (i.e. no 0% in the result, except if there is a 0 in the input)","body":"What should be the final result? Something like <code>Map&lt;String, Map&lt;String, Map&lt;String, Double&gt;&gt;&gt;</code>? Also if a source does not appear for a given week, or a destination does not appear for given week and source, it’s ok if they don’t appear in the result either? (i.e. no 0% in the result, except if there is a 0 in the input)"},{"owner":{"account_id":20469173,"reputation":241,"user_id":15020025,"display_name":"benebo22"},"score":0,"creation_date":1643319628,"post_id":70883977,"comment_id":125315459,"body_markdown":"Instead of using nested Maps you could create a class that represents an aggregated key and one that represents an aggregated result.","body":"Instead of using nested Maps you could create a class that represents an aggregated key and one that represents an aggregated result."},{"owner":{"account_id":20469173,"reputation":241,"user_id":15020025,"display_name":"benebo22"},"score":0,"creation_date":1643320555,"post_id":70883977,"comment_id":125315754,"body_markdown":"Instead of using nested Maps you could create a class that represents an aggregated key and one that represents an aggregated result. That way the intention of your target class can be expressed more clearly.\ne.g. you could start with a class WeekSourceKey(String week, String source) with an equals and Hashcode-method.\nand transform it with multiple stream-operations (e.g. reduce) to a list of (Relative)DestinationDistributionByWeekAndSource (WeekSourceKey key, String destination, float distribution). \nAnd yes in the list would only appear values with a week and a source (and no 0% values).","body":"Instead of using nested Maps you could create a class that represents an aggregated key and one that represents an aggregated result. That way the intention of your target class can be expressed more clearly. e.g. you could start with a class WeekSourceKey(String week, String source) with an equals and Hashcode-method. and transform it with multiple stream-operations (e.g. reduce) to a list of (Relative)DestinationDistributionByWeekAndSource (WeekSourceKey key, String destination, float distribution).  And yes in the list would only appear values with a week and a source (and no 0% values)."}],"answers":[{"tags":[],"owner":{"account_id":3126902,"reputation":758,"user_id":2645604,"display_name":"Tilak Putta"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1643316316,"creation_date":1643316316,"answer_id":70885490,"question_id":70883977,"body_markdown":"You can achieve it by using stream twice:\r\n 1. In first collection, you can do group by and do sum\r\n 2. Stream your records again and use sum result from the fist step to calculate percentage\r\n\r\nSample Code:\r\n\r\n    import java.util.*;\r\n\r\n    import java.util.stream.*;\r\n\r\n    class Record {\r\n        public String week;\r\n        public String source;\r\n        public String destination;\r\n        public Integer qty;\r\n\r\n        Record(String week, String source, String destination, Integer qty) {\r\n            this.week = week;\r\n            this.source = source;\r\n            this.destination = destination;\r\n            this.qty = qty;\r\n        }\r\n    }\r\n\r\n    public class Main {\r\n        public static void main(String[] args) {\r\n            List&lt;Record&gt; records = new ArrayList&lt;&gt;();\r\n            records.add(new Record(&quot;w1&quot;, &quot;hyd&quot;, &quot;kur&quot;, 10));\r\n            records.add(new Record(&quot;w1&quot;, &quot;hyd&quot;, &quot;gwd&quot;, 20));\r\n            records.add(new Record(&quot;w2&quot;, &quot;hyd&quot;, &quot;kur&quot;, 40));\r\n            records.add(new Record(&quot;w2&quot;, &quot;hyd&quot;, &quot;gwd&quot;, 10));\r\n            \r\n            \r\n            Map&lt;String, Map&lt;String, Integer&gt;&gt; sums = records\r\n            .stream()\r\n            .collect(Collectors.groupingBy(rec -&gt; rec.week,\r\n                Collectors.groupingBy(rec -&gt; rec.source, \r\n                Collectors.summingInt(rec-&gt;rec.qty))));\r\n\r\n            records = records\r\n            .stream()\r\n            .map(rec -&gt; {\r\n                rec.qty = rec.qty*100 / sums.get(rec.week).get(rec.source);\r\n                return rec;\r\n            }).collect(Collectors.toList());\r\n            records.forEach((rec)-&gt;System.out.println(rec.week+&quot;\\t&quot;+rec.source+&quot;\\t&quot;+rec.destination+&quot;\\t&quot;+rec.qty));\r\n        }\r\n    }","title":"Aggregating values in a list by multiple group by and calculating percentage of distribution in java 8","body":"<p>You can achieve it by using stream twice:</p>\n<ol>\n<li>In first collection, you can do group by and do sum</li>\n<li>Stream your records again and use sum result from the fist step to calculate percentage</li>\n</ol>\n<p>Sample Code:</p>\n<pre><code>import java.util.*;\n\nimport java.util.stream.*;\n\nclass Record {\n    public String week;\n    public String source;\n    public String destination;\n    public Integer qty;\n\n    Record(String week, String source, String destination, Integer qty) {\n        this.week = week;\n        this.source = source;\n        this.destination = destination;\n        this.qty = qty;\n    }\n}\n\npublic class Main {\n    public static void main(String[] args) {\n        List&lt;Record&gt; records = new ArrayList&lt;&gt;();\n        records.add(new Record(&quot;w1&quot;, &quot;hyd&quot;, &quot;kur&quot;, 10));\n        records.add(new Record(&quot;w1&quot;, &quot;hyd&quot;, &quot;gwd&quot;, 20));\n        records.add(new Record(&quot;w2&quot;, &quot;hyd&quot;, &quot;kur&quot;, 40));\n        records.add(new Record(&quot;w2&quot;, &quot;hyd&quot;, &quot;gwd&quot;, 10));\n        \n        \n        Map&lt;String, Map&lt;String, Integer&gt;&gt; sums = records\n        .stream()\n        .collect(Collectors.groupingBy(rec -&gt; rec.week,\n            Collectors.groupingBy(rec -&gt; rec.source, \n            Collectors.summingInt(rec-&gt;rec.qty))));\n\n        records = records\n        .stream()\n        .map(rec -&gt; {\n            rec.qty = rec.qty*100 / sums.get(rec.week).get(rec.source);\n            return rec;\n        }).collect(Collectors.toList());\n        records.forEach((rec)-&gt;System.out.println(rec.week+&quot;\\t&quot;+rec.source+&quot;\\t&quot;+rec.destination+&quot;\\t&quot;+rec.qty));\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11953108,"reputation":1423,"user_id":8746228,"display_name":"adarsh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1643481277,"creation_date":1643481277,"answer_id":70908543,"question_id":70883977,"body_markdown":"You can create a map with key: `week+source` and value as total quantity.\r\n`CollectingAndThen` can be utilize the map and create resulting list:\r\n\r\n```java\r\n// Value Objects:\r\n@Data\r\n@AllArgsConstructor\r\nclass Records {\r\n    String week, source, destination;\r\n    int quantity;\r\n}\r\n\r\n@Data\r\n@AllArgsConstructor\r\nclass Distribution {\r\n    String week, source, destination;\r\n    float pctDist;\r\n\r\n    public Distribution(Records r) {\r\n        this.week = r.getWeek();\r\n        this.source = r.getSource();\r\n        this.destination = r.getDestination();\r\n    }\r\n}\r\n\r\nimport static java.util.stream.Collectors.*;\r\n\r\npublic class SO {\r\n\r\n public static void main(String[] args) {\r\n  List&lt;Record&gt; recordList = List.of(\r\n          new Record(&quot;week1&quot;,  &quot;source1&quot;,  &quot;destination1&quot;,   100),\r\n          new Record(&quot;week1&quot;,  &quot;source1&quot;,  &quot;destination2&quot;,   200),\r\n          new Record(&quot;week1&quot;,  &quot;source2&quot;,  &quot;destination1&quot;,   200),\r\n          new Record(&quot;week1&quot;,  &quot;source2&quot;,  &quot;destination2&quot;,   100),\r\n          new Record(&quot;week2&quot;,  &quot;source1&quot;,  &quot;destination1&quot;,   200),\r\n          new Record(&quot;week2&quot;,  &quot;source1&quot;,  &quot;destination2&quot;,   200));\r\n\r\n  Function&lt;Map&lt;String, Integer&gt;, List&lt;Distribution&gt;&gt; distExtractor =\r\n          totalQuantityMap -&gt; recordList.stream().map(r -&gt; getDistribution(r,totalQuantityMap)).collect(toList());\r\n\r\n  List&lt;Distribution&gt; result =\r\n          recordList.stream().collect(collectingAndThen(groupingBy(r -&gt; r.getWeek() + r.getSource(), \r\n                                                                   summingInt(Record::getQuantity)),\r\n                                                        distExtractor));\r\n\r\n  // print the result\r\n  result.forEach((rec) -&gt; System.out.println(rec.week + &quot;\\t&quot; + rec.source + &quot;\\t&quot; + rec.destination + &quot;\\t&quot; + rec.pctDist));\r\n\r\n }\r\n \r\n private static Distribution getDistribution(Record r, Map&lt;String, Integer&gt; weekAndSourceToTotalQuantityMap) {\r\n  int total = weekAndSourceToTotalQuantityMap.get(r.getWeek() + r.getSource());\r\n  float pctDist = (r.getQuantity() * 100) / total;\r\n\r\n  var dist = new Distribution(r);\r\n  dist.setPctDist(pctDist);\r\n\r\n  return dist;\r\n }\r\n}\r\n```\r\n\r\n**Output:**\r\n```java\r\n// Precision can be worked upon in getDistribution method\r\nweek1\tsource1\tdestination1\t33.0\r\nweek1\tsource1\tdestination2\t66.0\r\nweek1\tsource2\tdestination1\t66.0\r\nweek1\tsource2\tdestination2\t33.0\r\nweek2\tsource1\tdestination1\t50.0\r\nweek2\tsource1\tdestination2\t50.0\r\n```","title":"Aggregating values in a list by multiple group by and calculating percentage of distribution in java 8","body":"<p>You can create a map with key: <code>week+source</code> and value as total quantity.\n<code>CollectingAndThen</code> can be utilize the map and create resulting list:</p>\n<pre class=\"lang-java prettyprint-override\"><code>// Value Objects:\n@Data\n@AllArgsConstructor\nclass Records {\n    String week, source, destination;\n    int quantity;\n}\n\n@Data\n@AllArgsConstructor\nclass Distribution {\n    String week, source, destination;\n    float pctDist;\n\n    public Distribution(Records r) {\n        this.week = r.getWeek();\n        this.source = r.getSource();\n        this.destination = r.getDestination();\n    }\n}\n\nimport static java.util.stream.Collectors.*;\n\npublic class SO {\n\n public static void main(String[] args) {\n  List&lt;Record&gt; recordList = List.of(\n          new Record(&quot;week1&quot;,  &quot;source1&quot;,  &quot;destination1&quot;,   100),\n          new Record(&quot;week1&quot;,  &quot;source1&quot;,  &quot;destination2&quot;,   200),\n          new Record(&quot;week1&quot;,  &quot;source2&quot;,  &quot;destination1&quot;,   200),\n          new Record(&quot;week1&quot;,  &quot;source2&quot;,  &quot;destination2&quot;,   100),\n          new Record(&quot;week2&quot;,  &quot;source1&quot;,  &quot;destination1&quot;,   200),\n          new Record(&quot;week2&quot;,  &quot;source1&quot;,  &quot;destination2&quot;,   200));\n\n  Function&lt;Map&lt;String, Integer&gt;, List&lt;Distribution&gt;&gt; distExtractor =\n          totalQuantityMap -&gt; recordList.stream().map(r -&gt; getDistribution(r,totalQuantityMap)).collect(toList());\n\n  List&lt;Distribution&gt; result =\n          recordList.stream().collect(collectingAndThen(groupingBy(r -&gt; r.getWeek() + r.getSource(), \n                                                                   summingInt(Record::getQuantity)),\n                                                        distExtractor));\n\n  // print the result\n  result.forEach((rec) -&gt; System.out.println(rec.week + &quot;\\t&quot; + rec.source + &quot;\\t&quot; + rec.destination + &quot;\\t&quot; + rec.pctDist));\n\n }\n \n private static Distribution getDistribution(Record r, Map&lt;String, Integer&gt; weekAndSourceToTotalQuantityMap) {\n  int total = weekAndSourceToTotalQuantityMap.get(r.getWeek() + r.getSource());\n  float pctDist = (r.getQuantity() * 100) / total;\n\n  var dist = new Distribution(r);\n  dist.setPctDist(pctDist);\n\n  return dist;\n }\n}\n</code></pre>\n<p><strong>Output:</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>// Precision can be worked upon in getDistribution method\nweek1   source1 destination1    33.0\nweek1   source1 destination2    66.0\nweek1   source2 destination1    66.0\nweek1   source2 destination2    33.0\nweek2   source1 destination1    50.0\nweek2   source1 destination2    50.0\n</code></pre>\n"}],"owner":{"account_id":2165422,"reputation":135,"user_id":1918641,"accept_rate":0,"display_name":"user1918641"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":418,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":70885490,"answer_count":2,"score":4,"last_activity_date":1643481277,"creation_date":1643308665,"question_id":70883977,"body_markdown":"I have use case like this where I need to aggregate values in a list by multiple group by but then calculate percentage of distribution of each of those values and create a new list. \r\n\r\nAn example of list of items:\r\n\r\n    week1  source1  destination1   100\r\n    week1  source1  destination2   200\r\n    week1  source2  destination1   200\r\n    week1  source2  destination2   100\r\n    week2  source1  destination1   200\r\n    week2  source1  destination2   200\r\n\r\nFrom this I want to group by week and source and calculate the total quantity and then distribute percentage based on quantity.\r\n\r\nAs an example the total quantity for week 1 from source 1 is 300, which is going to destination 1(100) and destination 2(200). Now the percentage of distribution is for week 1 from source 1 to destination1 is 33.33% and for week1 from source 1 to destination 2 to 66.66%\r\n\r\nFor example the output would be:\r\n    \r\n    week1  source1  destination1   33.33%\r\n    week1  source1  destination2   66.66%\r\n    week1  source2  destination1   66.66%\r\n    week1  source2  destination2   33.33%\r\n    week2  source1  destination1   50%\r\n    week2  source1  destination2   50%\r\n    \r\n How can I achieve this result using Java 8 streams.\r\n    \r\n Say I have list of these objects as List&lt;Record&gt; into &quot;records&quot; object:\r\n    \r\n    public class Record {\r\n        private String sourceNode;\r\n        private String destinationNode;\r\n        private String weekIndex;\r\n        private String quantity;\r\n    }\r\n    \r\n    Map&lt;String, Map&lt;String, List&lt;Record&gt;&gt;&gt; RecordsGroupByWeekAndSource = records.stream()\r\n                    .collect(Collectors.groupingBy(Record::getWeekIndex, Collectors.groupingBy(Record::getSourceNode)));\r\n\r\nThis would give me the items group by week and source. But I will have to iterate this map again to calculate the total quantity in each list that resides inside map of map object. But Is there a way I can do this percenatage calcualtion within the groupingBy collection itslef?\r\n","title":"Aggregating values in a list by multiple group by and calculating percentage of distribution in java 8","body":"<p>I have use case like this where I need to aggregate values in a list by multiple group by but then calculate percentage of distribution of each of those values and create a new list.</p>\n<p>An example of list of items:</p>\n<pre><code>week1  source1  destination1   100\nweek1  source1  destination2   200\nweek1  source2  destination1   200\nweek1  source2  destination2   100\nweek2  source1  destination1   200\nweek2  source1  destination2   200\n</code></pre>\n<p>From this I want to group by week and source and calculate the total quantity and then distribute percentage based on quantity.</p>\n<p>As an example the total quantity for week 1 from source 1 is 300, which is going to destination 1(100) and destination 2(200). Now the percentage of distribution is for week 1 from source 1 to destination1 is 33.33% and for week1 from source 1 to destination 2 to 66.66%</p>\n<p>For example the output would be:</p>\n<pre><code>week1  source1  destination1   33.33%\nweek1  source1  destination2   66.66%\nweek1  source2  destination1   66.66%\nweek1  source2  destination2   33.33%\nweek2  source1  destination1   50%\nweek2  source1  destination2   50%\n</code></pre>\n<p>How can I achieve this result using Java 8 streams.</p>\n<p>Say I have list of these objects as List into &quot;records&quot; object:</p>\n<pre><code>public class Record {\n    private String sourceNode;\n    private String destinationNode;\n    private String weekIndex;\n    private String quantity;\n}\n\nMap&lt;String, Map&lt;String, List&lt;Record&gt;&gt;&gt; RecordsGroupByWeekAndSource = records.stream()\n                .collect(Collectors.groupingBy(Record::getWeekIndex, Collectors.groupingBy(Record::getSourceNode)));\n</code></pre>\n<p>This would give me the items group by week and source. But I will have to iterate this map again to calculate the total quantity in each list that resides inside map of map object. But Is there a way I can do this percenatage calcualtion within the groupingBy collection itslef?</p>\n"},{"tags":["java","netbeans"],"comments":[{"owner":{"account_id":11335055,"reputation":410,"user_id":8311201,"accept_rate":100,"display_name":"Amal lal T L"},"score":0,"creation_date":1502953646,"post_id":45728511,"comment_id":78414813,"body_markdown":"Which version and type of Netbeans IDE did you download?","body":"Which version and type of Netbeans IDE did you download?"},{"owner":{"account_id":11335055,"reputation":410,"user_id":8311201,"accept_rate":100,"display_name":"Amal lal T L"},"score":0,"creation_date":1502953711,"post_id":45728511,"comment_id":78414850,"body_markdown":"Try to download from here http://www.oracle.com/technetwork/articles/javase/jdk-netbeans-jsp-142931.html","body":"Try to download from here <a href=\"http://www.oracle.com/technetwork/articles/javase/jdk-netbeans-jsp-142931.html\" rel=\"nofollow noreferrer\">oracle.com/technetwork/articles/javase/&hellip;</a>"},{"owner":{"account_id":10116490,"reputation":99,"user_id":7475005,"accept_rate":0,"display_name":"hareen tej"},"score":0,"creation_date":1502955819,"post_id":45728511,"comment_id":78416129,"body_markdown":"java version &quot;1.8.0_144&quot; .     JDK 8u141 with NetBeans 8.2  .","body":"java version &quot;1.8.0_144&quot; .     JDK 8u141 with NetBeans 8.2  ."},{"owner":{"account_id":11335055,"reputation":410,"user_id":8311201,"accept_rate":100,"display_name":"Amal lal T L"},"score":0,"creation_date":1502956147,"post_id":45728511,"comment_id":78416330,"body_markdown":"Had you set the environmental variables of java?","body":"Had you set the environmental variables of java?"},{"owner":{"account_id":10116490,"reputation":99,"user_id":7475005,"accept_rate":0,"display_name":"hareen tej"},"score":0,"creation_date":1502968489,"post_id":45728511,"comment_id":78424848,"body_markdown":"i&#39;m new to java. but anyway i&#39;m thankful to your efforts to help me because i founded out that instead of going to new projects if we go to open projects then jva folder can be seen in the categories. but i want to write the code and compile &amp; run it through my mac terminal. can you me help me out how to do it??","body":"i&#39;m new to java. but anyway i&#39;m thankful to your efforts to help me because i founded out that instead of going to new projects if we go to open projects then jva folder can be seen in the categories. but i want to write the code and compile &amp; run it through my mac terminal. can you me help me out how to do it??"}],"answers":[{"tags":[],"owner":{"account_id":6569999,"reputation":2092,"user_id":5078385,"display_name":"acm"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1503131897,"creation_date":1503131897,"answer_id":45769509,"question_id":45728511,"body_markdown":"It looks like Java SE is not active in your Netbeans installation. To properly use Java SE features you have to follow [these steps][1]:\r\n\r\n&gt;  1. Choose Tools &gt; Plugins from the main IDE&#39;s toolbar.\r\n&gt;  2. In the Plugins dialog box, click the Installed tab and select Java SE in the list of available features.\r\n&gt;  3. Click Activate.\r\n&gt;  4. At the Welcome panel of the Installer dialog box, click Activate. When the activation is successfully completed, click Finish.\r\n&gt;  5. Click Close to close the Plugins dialog box.\r\n\r\n  [1]: https://netbeans.org/kb/docs/java/javase-embedded.html","title":"In netbeans project category java folder is missing","body":"<p>It looks like Java SE is not active in your Netbeans installation. To properly use Java SE features you have to follow <a href=\"https://netbeans.org/kb/docs/java/javase-embedded.html\" rel=\"noreferrer\">these steps</a>:</p>\n\n<blockquote>\n  <ol>\n  <li>Choose Tools > Plugins from the main IDE's toolbar.</li>\n  <li>In the Plugins dialog box, click the Installed tab and select Java SE in the list of available features.</li>\n  <li>Click Activate.</li>\n  <li>At the Welcome panel of the Installer dialog box, click Activate. When the activation is successfully completed, click Finish.</li>\n  <li>Click Close to close the Plugins dialog box.</li>\n  </ol>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":1741086,"reputation":863,"user_id":1592474,"accept_rate":72,"display_name":"Reza Paidar"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1544086395,"creation_date":1544086395,"answer_id":53647682,"question_id":45728511,"body_markdown":"The @acm&#39;s answer is right. but you need attention that you are adding a new file at beginning of the Netbeans. &lt;br&gt;\r\nTo resolve this problem, after you activated java SE as @acm&#39;s answer, you need to `create a new project` not `new file` on NetBeans.&lt;br&gt;\r\n\r\n","title":"In netbeans project category java folder is missing","body":"<p>The @acm's answer is right. but you need attention that you are adding a new file at beginning of the Netbeans. <br>\nTo resolve this problem, after you activated java SE as @acm's answer, you need to <code>create a new project</code> not <code>new file</code> on NetBeans.<br></p>\n"},{"tags":[],"owner":{"account_id":13861299,"reputation":51,"user_id":10006883,"display_name":"Ajay Rajput"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1586978698,"creation_date":1586976574,"answer_id":61236356,"question_id":45728511,"body_markdown":"\r\n1.First go for Tools -&gt; Plugins.\r\n\r\n2.Then search for Java SE in available plugins and download Java\r\n\r\n3.Go in installed plugins.\r\n\r\n4.Activate plugin and that&#39;s all.\r\n\r\n![image][1]\r\n\r\n  [1]: https://i.stack.imgur.com/r2Op1.png","title":"In netbeans project category java folder is missing","body":"<p>1.First go for Tools -> Plugins.</p>\n\n<p>2.Then search for Java SE in available plugins and download Java</p>\n\n<p>3.Go in installed plugins.</p>\n\n<p>4.Activate plugin and that's all.</p>\n\n<p><img src=\"https://i.stack.imgur.com/r2Op1.png\" alt=\"image\"></p>\n"},{"tags":[],"owner":{"account_id":7146191,"reputation":76,"user_id":5461816,"display_name":"Masroor"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1643480941,"creation_date":1643480941,"answer_id":70908492,"question_id":45728511,"body_markdown":"In latest versions of NetBeans(12.6). You can create a console application from the following steps.\r\nNew Project &gt; Java With Ant &gt; Java Application\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/YOgl7.png","title":"In netbeans project category java folder is missing","body":"<p>In latest versions of NetBeans(12.6). You can create a console application from the following steps.\nNew Project &gt; Java With Ant &gt; Java Application\n<a href=\"https://i.stack.imgur.com/YOgl7.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/YOgl7.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":10116490,"reputation":99,"user_id":7475005,"accept_rate":0,"display_name":"hareen tej"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":21895,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":4,"score":3,"last_activity_date":1643480941,"creation_date":1502953225,"question_id":45728511,"body_markdown":"i installed the netbeans IDE and java SEDK today. and the problem is i cant see the java folder in the project category when i tried to create a new project.[![enter image description here][1]][1]\r\n\r\n\r\n----------\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/5kkCh.png","title":"In netbeans project category java folder is missing","body":"<p>i installed the netbeans IDE and java SEDK today. and the problem is i cant see the java folder in the project category when i tried to create a new project.<a href=\"https://i.stack.imgur.com/5kkCh.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/5kkCh.png\" alt=\"enter image description here\"></a></p>\n\n<hr>\n"},{"tags":["java","r","linux","eclipse","debian"],"comments":[{"owner":{"account_id":17494217,"reputation":9562,"user_id":12685768,"display_name":"Mikael Jagan"},"score":0,"creation_date":1643484119,"post_id":70908184,"comment_id":125354182,"body_markdown":"You might have to configure R to find your JRE. `R CMD javareconf`, maybe? Or set `JAVA_HOME` and `R_JAVA_LD_LIBRARY_PATH` in `~/.R/Makevars`? See [here](https://cran.r-project.org/doc/manuals/r-release/R-admin.html#Java-support). (Just guessing - I&#39;ve never had to install a Java-using package.)","body":"You might have to configure R to find your JRE. <code>R CMD javareconf</code>, maybe? Or set <code>JAVA_HOME</code> and <code>R_JAVA_LD_LIBRARY_PATH</code> in <code>~&#47;.R&#47;Makevars</code>? See <a href=\"https://cran.r-project.org/doc/manuals/r-release/R-admin.html#Java-support\" rel=\"nofollow noreferrer\">here</a>. (Just guessing - I&#39;ve never had to install a Java-using package.)"},{"owner":{"account_id":17071956,"reputation":186,"user_id":12425893,"display_name":"GPWR"},"score":0,"creation_date":1643725653,"post_id":70908184,"comment_id":125412233,"body_markdown":"@Mikael Jagan This is the output I get: https://pastebin.com/QLSs0QiN I think I can manage to find my Java library path, etc. with the help of a search engine, but how do I then specify those in the R console? Thanks for your response; it&#39;s very much appreciated.","body":"@Mikael Jagan This is the output I get: <a href=\"https://pastebin.com/QLSs0QiN\" rel=\"nofollow noreferrer\">pastebin.com/QLSs0QiN</a> I think I can manage to find my Java library path, etc. with the help of a search engine, but how do I then specify those in the R console? Thanks for your response; it&#39;s very much appreciated."},{"owner":{"account_id":17494217,"reputation":9562,"user_id":12685768,"display_name":"Mikael Jagan"},"score":0,"creation_date":1643904175,"post_id":70908184,"comment_id":125468248,"body_markdown":"I&#39;m not sure, but `rJava` is another Java-using package and there seem to be a number of threads here about how to install it on Linux. Following one of those might help.","body":"I&#39;m not sure, but <code>rJava</code> is another Java-using package and there seem to be a number of threads here about how to install it on Linux. Following one of those might help."}],"owner":{"account_id":17071956,"reputation":186,"user_id":12425893,"display_name":"GPWR"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1643480179,"creation_date":1643478818,"question_id":70908184,"body_markdown":"I&#39;m trying to install the `rj` and `rj.gd` packages. I apologise for including the whole output, but that&#39;s so information regarding my R installation and version can be seen properly. I get a non-zero exiting status when running `install.packages(c(&quot;rj&quot;, &quot;rj.gd&quot;), repos=&quot;https://download.walware.de/rj-4.0&quot;)`, as can be seen below.\r\n\r\n```none\r\nR version 4.0.4 (2021-02-15) -- &quot;Lost Library Book&quot;\r\nCopyright (C) 2021 The R Foundation for Statistical Computing\r\nPlatform: x86_64-pc-linux-gnu (64-bit)\r\n\r\nR is free software and comes with ABSOLUTELY NO WARRANTY.\r\nYou are welcome to redistribute it under certain conditions.\r\nType &#39;license()&#39; or &#39;licence()&#39; for distribution details.\r\n\r\n  Natural language support but running in an English locale\r\n\r\nR is a collaborative project with many contributors.\r\nType &#39;contributors()&#39; for more information and\r\n&#39;citation()&#39; on how to cite R or R packages in publications.\r\n\r\nType &#39;demo()&#39; for some demos, &#39;help()&#39; for on-line help, or\r\n&#39;help.start()&#39; for an HTML browser interface to help.\r\nType &#39;q()&#39; to quit R.\r\n\r\n[Previously saved workspace restored]\r\n\r\n&gt; install.packages(c(&quot;rj&quot;, &quot;rj.gd&quot;), repos=&quot;https://download.walware.de/rj-4.0&quot;)\r\nInstalling packages into ‘/usr/local/lib/R/site-library’\r\n(as ‘lib’ is unspecified)\r\ntrying URL &#39;https://download.walware.de/rj-4.0/src/contrib/rj_4.0.5-4.tar.gz&#39;\r\nContent type &#39;application/x-gzip&#39; length 359978 bytes (351 KB)\r\n==================================================\r\ndownloaded 351 KB\r\n\r\ntrying URL &#39;https://download.walware.de/rj-4.0/src/contrib/rj.gd_4.0.5-1.tar.gz&#39;\r\nContent type &#39;application/x-gzip&#39; length 105189 bytes (102 KB)\r\n==================================================\r\ndownloaded 102 KB\r\n\r\n* installing *source* package ‘rj’ ...\r\n** using staged installation\r\nchecking R config... R config set\r\n    R_HOME   : /usr/lib/R\r\nchecking for gcc... gcc -std=gnu99\r\nchecking whether the C compiler works... yes\r\nchecking for C compiler default output file name... a.out\r\nchecking for suffix of executables... \r\nchecking whether we are cross compiling... no\r\nchecking for suffix of object files... o\r\nchecking whether we are using the GNU C compiler... yes\r\nchecking whether gcc -std=gnu99 accepts -g... yes\r\nchecking for gcc -std=gnu99 option to accept ISO C89... none needed\r\nchecking Java support in R... ...\r\n11.0.14\r\nJava config set\r\n    JAVA_HOME: /usr/lib/jvm/default-java\r\n    JAVA     : /usr/lib/jvm/default-java/bin/java\r\n    JAVAC    : /usr/lib/jvm/default-java/bin/javac\r\n    JAVAC_FLAGS:  -h .\r\n    JAVA_CPPFLAGS: -I/usr/lib/jvm/default-java/include -I/usr/lib/jvm/default-java/include/linux\r\n    JAVA_LIBS: -L/usr/lib/jvm/default-java/lib/server -ljvm\r\n    JAR      : /usr/lib/jvm/default-java/bin/jar\r\n\r\nconfigure: creating ./config.status\r\nconfig.status: creating src/Makevars\r\n=== configuring in jri (/tmp/RtmpUDmugm/R.INSTALL31f56406521ac/rj/jri)\r\nconfigure: running /bin/bash ./configure --disable-option-checking &#39;--prefix=/usr/local&#39;  --cache-file=/dev/null --srcdir=.\r\nchecking build system type... x86_64-unknown-linux-gnu\r\nchecking host system type... x86_64-unknown-linux-gnu\r\nchecking R config... checking for gcc... gcc -std=gnu99\r\nchecking whether the C compiler works... yes\r\nchecking for C compiler default output file name... a.out\r\nchecking for suffix of executables... \r\nchecking whether we are cross compiling... no\r\nchecking for suffix of object files... o\r\nchecking whether we are using the GNU C compiler... yes\r\nchecking whether gcc -std=gnu99 accepts -g... yes\r\nchecking for gcc -std=gnu99 option to accept ISO C89... none needed\r\nchecking how to run the C preprocessor... gcc -std=gnu99 -E\r\nchecking for grep that handles long lines and -e... /usr/bin/grep\r\nchecking for egrep... /usr/bin/grep -E\r\nchecking for ANSI C header files... yes\r\nchecking whether Java interpreter works... checking whether JNI programs can be compiled... configure: error: Cannot compile a simple JNI program. See config.log for details.\r\nconfigure: error: ./configure failed for jri\r\nERROR: configuration failed for package ‘rj’\r\n* removing ‘/usr/local/lib/R/site-library/rj’\r\nERROR: dependency ‘rj’ is not available for package ‘rj.gd’\r\n* removing ‘/usr/local/lib/R/site-library/rj.gd’\r\n\r\nThe downloaded source packages are in\r\n        ‘/tmp/RtmpMjzas9/downloaded_packages’\r\nWarning messages:\r\n1: In install.packages(c(&quot;rj&quot;, &quot;rj.gd&quot;), repos = &quot;https://download.walware.de/rj-4.0&quot;) :\r\n  installation of package ‘rj’ had non-zero exit status\r\n2: In install.packages(c(&quot;rj&quot;, &quot;rj.gd&quot;), repos = &quot;https://download.walware.de/rj-4.0&quot;) :\r\n  installation of package ‘rj.gd’ had non-zero exit status\r\n```\r\nI don&#39;t know where `config.log` is, and I couldn&#39;t find that via the few search engines I tried. JNI is Java Native Interface, right? Should I reinstall Java and see? What&#39;s the proper way of doing this without messing up my Eclipse installation? I heard that this could be a 32bit vs 64bit problem, but hitting `java --version` returns this:\r\n```none\r\nopenjdk 11.0.14 2022-01-18\r\nOpenJDK Runtime Environment (build 11.0.14+9-post-Debian-1deb11u1)\r\nOpenJDK 64-Bit Server VM (build 11.0.14+9-post-Debian-1deb11u1, mixed mode, sharing)\r\n```\r\nAs far as I know, this means that my Java is 64bit.\r\n\r\nP.S. I&#39;m not a Java guy. I&#39;m just an amateur slowly learning C and R, for now.","title":"Non-zero exit status on attempt in installing &#39;jr&#39; and &#39;jr.gd&#39; packages; cannot find &#39;config.log&#39;","body":"<p>I'm trying to install the <code>rj</code> and <code>rj.gd</code> packages. I apologise for including the whole output, but that's so information regarding my R installation and version can be seen properly. I get a non-zero exiting status when running <code>install.packages(c(&quot;rj&quot;, &quot;rj.gd&quot;), repos=&quot;https://download.walware.de/rj-4.0&quot;)</code>, as can be seen below.</p>\n<pre class=\"lang-none prettyprint-override\"><code>R version 4.0.4 (2021-02-15) -- &quot;Lost Library Book&quot;\nCopyright (C) 2021 The R Foundation for Statistical Computing\nPlatform: x86_64-pc-linux-gnu (64-bit)\n\nR is free software and comes with ABSOLUTELY NO WARRANTY.\nYou are welcome to redistribute it under certain conditions.\nType 'license()' or 'licence()' for distribution details.\n\n  Natural language support but running in an English locale\n\nR is a collaborative project with many contributors.\nType 'contributors()' for more information and\n'citation()' on how to cite R or R packages in publications.\n\nType 'demo()' for some demos, 'help()' for on-line help, or\n'help.start()' for an HTML browser interface to help.\nType 'q()' to quit R.\n\n[Previously saved workspace restored]\n\n&gt; install.packages(c(&quot;rj&quot;, &quot;rj.gd&quot;), repos=&quot;https://download.walware.de/rj-4.0&quot;)\nInstalling packages into ‘/usr/local/lib/R/site-library’\n(as ‘lib’ is unspecified)\ntrying URL 'https://download.walware.de/rj-4.0/src/contrib/rj_4.0.5-4.tar.gz'\nContent type 'application/x-gzip' length 359978 bytes (351 KB)\n==================================================\ndownloaded 351 KB\n\ntrying URL 'https://download.walware.de/rj-4.0/src/contrib/rj.gd_4.0.5-1.tar.gz'\nContent type 'application/x-gzip' length 105189 bytes (102 KB)\n==================================================\ndownloaded 102 KB\n\n* installing *source* package ‘rj’ ...\n** using staged installation\nchecking R config... R config set\n    R_HOME   : /usr/lib/R\nchecking for gcc... gcc -std=gnu99\nchecking whether the C compiler works... yes\nchecking for C compiler default output file name... a.out\nchecking for suffix of executables... \nchecking whether we are cross compiling... no\nchecking for suffix of object files... o\nchecking whether we are using the GNU C compiler... yes\nchecking whether gcc -std=gnu99 accepts -g... yes\nchecking for gcc -std=gnu99 option to accept ISO C89... none needed\nchecking Java support in R... ...\n11.0.14\nJava config set\n    JAVA_HOME: /usr/lib/jvm/default-java\n    JAVA     : /usr/lib/jvm/default-java/bin/java\n    JAVAC    : /usr/lib/jvm/default-java/bin/javac\n    JAVAC_FLAGS:  -h .\n    JAVA_CPPFLAGS: -I/usr/lib/jvm/default-java/include -I/usr/lib/jvm/default-java/include/linux\n    JAVA_LIBS: -L/usr/lib/jvm/default-java/lib/server -ljvm\n    JAR      : /usr/lib/jvm/default-java/bin/jar\n\nconfigure: creating ./config.status\nconfig.status: creating src/Makevars\n=== configuring in jri (/tmp/RtmpUDmugm/R.INSTALL31f56406521ac/rj/jri)\nconfigure: running /bin/bash ./configure --disable-option-checking '--prefix=/usr/local'  --cache-file=/dev/null --srcdir=.\nchecking build system type... x86_64-unknown-linux-gnu\nchecking host system type... x86_64-unknown-linux-gnu\nchecking R config... checking for gcc... gcc -std=gnu99\nchecking whether the C compiler works... yes\nchecking for C compiler default output file name... a.out\nchecking for suffix of executables... \nchecking whether we are cross compiling... no\nchecking for suffix of object files... o\nchecking whether we are using the GNU C compiler... yes\nchecking whether gcc -std=gnu99 accepts -g... yes\nchecking for gcc -std=gnu99 option to accept ISO C89... none needed\nchecking how to run the C preprocessor... gcc -std=gnu99 -E\nchecking for grep that handles long lines and -e... /usr/bin/grep\nchecking for egrep... /usr/bin/grep -E\nchecking for ANSI C header files... yes\nchecking whether Java interpreter works... checking whether JNI programs can be compiled... configure: error: Cannot compile a simple JNI program. See config.log for details.\nconfigure: error: ./configure failed for jri\nERROR: configuration failed for package ‘rj’\n* removing ‘/usr/local/lib/R/site-library/rj’\nERROR: dependency ‘rj’ is not available for package ‘rj.gd’\n* removing ‘/usr/local/lib/R/site-library/rj.gd’\n\nThe downloaded source packages are in\n        ‘/tmp/RtmpMjzas9/downloaded_packages’\nWarning messages:\n1: In install.packages(c(&quot;rj&quot;, &quot;rj.gd&quot;), repos = &quot;https://download.walware.de/rj-4.0&quot;) :\n  installation of package ‘rj’ had non-zero exit status\n2: In install.packages(c(&quot;rj&quot;, &quot;rj.gd&quot;), repos = &quot;https://download.walware.de/rj-4.0&quot;) :\n  installation of package ‘rj.gd’ had non-zero exit status\n</code></pre>\n<p>I don't know where <code>config.log</code> is, and I couldn't find that via the few search engines I tried. JNI is Java Native Interface, right? Should I reinstall Java and see? What's the proper way of doing this without messing up my Eclipse installation? I heard that this could be a 32bit vs 64bit problem, but hitting <code>java --version</code> returns this:</p>\n<pre class=\"lang-none prettyprint-override\"><code>openjdk 11.0.14 2022-01-18\nOpenJDK Runtime Environment (build 11.0.14+9-post-Debian-1deb11u1)\nOpenJDK 64-Bit Server VM (build 11.0.14+9-post-Debian-1deb11u1, mixed mode, sharing)\n</code></pre>\n<p>As far as I know, this means that my Java is 64bit.</p>\n<p>P.S. I'm not a Java guy. I'm just an amateur slowly learning C and R, for now.</p>\n"},{"tags":["java","testing","cucumber","hook"],"answers":[{"tags":[],"owner":{"account_id":10489136,"reputation":2762,"user_id":7731623,"display_name":"Nandan A"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1643480009,"creation_date":1643480009,"answer_id":70908352,"question_id":70903097,"body_markdown":"`@Before(order = int)` : This runs in **increment** order, means value `0` would run first and `1` would be after `0`.\r\n\r\n`@After(order = int)` : This runs in **decrement** order, means value `1` would run first and `0` would be after `1`.\r\n\r\n**Yours**:\r\n\r\n    @After(value = &quot;@ui&quot;, order = 1)\r\n    @After(value = &quot;@all&quot;,order = 2)\r\n\r\n**Updated**:\r\n\r\n    @After(value = &quot;@ui&quot;, order = 2)\r\n    @After(value = &quot;@all&quot;,order = 1)\r\n\r\n","title":"How to set hooks execution order with different tags","body":"<p><code>@Before(order = int)</code> : This runs in <strong>increment</strong> order, means value <code>0</code> would run first and <code>1</code> would be after <code>0</code>.</p>\n<p><code>@After(order = int)</code> : This runs in <strong>decrement</strong> order, means value <code>1</code> would run first and <code>0</code> would be after <code>1</code>.</p>\n<p><strong>Yours</strong>:</p>\n<pre><code>@After(value = &quot;@ui&quot;, order = 1)\n@After(value = &quot;@all&quot;,order = 2)\n</code></pre>\n<p><strong>Updated</strong>:</p>\n<pre><code>@After(value = &quot;@ui&quot;, order = 2)\n@After(value = &quot;@all&quot;,order = 1)\n</code></pre>\n"}],"owner":{"account_id":18956225,"reputation":15,"user_id":16426632,"display_name":"Ivasia"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":445,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":70908352,"answer_count":1,"score":1,"last_activity_date":1643480009,"creation_date":1643440220,"question_id":70903097,"body_markdown":"I have a cucumber scenario with different tags\r\n @all @crm @ui @agreementLogic @agreementLogicLazadaActive\r\n\r\nAnd also I have two hooks with differenet values\r\n\r\n    @After(value = &quot;@ui&quot;, order = 1)\r\n        public void tearDown(Scenario scenario) {\r\n            if (scenario.isFailed()) {\r\n                AllureReporter.addScreenShot();\r\n            }\r\n            Browser.stop();\r\n        }\r\n\r\nand \r\n\r\n    @After(value = &quot;@all&quot;,order = 2)\r\n    public void afterAll() {\r\n       removeScenarioEnvironment();\r\n        AllureReporter.attachScenarioLogFromLogFile();\r\n    }\r\n\r\nI need that hook for tag @ui been executed before hook for tag @all, as you can see I set them order, but it doesn&#39;t work.\r\n\r\n","title":"How to set hooks execution order with different tags","body":"<p>I have a cucumber scenario with different tags\n@all @crm @ui @agreementLogic @agreementLogicLazadaActive</p>\n<p>And also I have two hooks with differenet values</p>\n<pre><code>@After(value = &quot;@ui&quot;, order = 1)\n    public void tearDown(Scenario scenario) {\n        if (scenario.isFailed()) {\n            AllureReporter.addScreenShot();\n        }\n        Browser.stop();\n    }\n</code></pre>\n<p>and</p>\n<pre><code>@After(value = &quot;@all&quot;,order = 2)\npublic void afterAll() {\n   removeScenarioEnvironment();\n    AllureReporter.attachScenarioLogFromLogFile();\n}\n</code></pre>\n<p>I need that hook for tag @ui been executed before hook for tag @all, as you can see I set them order, but it doesn't work.</p>\n"},{"tags":["java","arrays","sorting","testing"],"comments":[{"owner":{"account_id":18243171,"reputation":19300,"user_id":13279831,"display_name":"Nowhere Man"},"score":0,"creation_date":1631813697,"post_id":69210937,"comment_id":122330856,"body_markdown":"Why did you use nested `do-while` loop?  Variable `i` is not changed inside this loop therefore all user inputs are stored at the same index `n[i] = scanner.nextInt()` until user inputs `0`.","body":"Why did you use nested <code>do-while</code> loop?  Variable <code>i</code> is not changed inside this loop therefore all user inputs are stored at the same index <code>n[i] = scanner.nextInt()</code> until user inputs <code>0</code>."},{"owner":{"account_id":18801139,"reputation":115,"user_id":13711415,"display_name":"Feliks Bekeshov"},"score":0,"creation_date":1660410450,"post_id":69210937,"comment_id":129528972,"body_markdown":"how did you test other cases?","body":"how did you test other cases?"}],"answers":[{"tags":[],"owner":{"account_id":202356,"reputation":6380,"user_id":449378,"accept_rate":62,"display_name":"Navaneeth Sen"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1631807548,"creation_date":1631805697,"answer_id":69211130,"question_id":69210937,"body_markdown":"Your for loop needs some correction as shown below:\r\n\r\n    public class Average\r\n    {\r\n        public static void main(String[] args) {\r\n            Scanner scanner = new Scanner(System.in);\r\n            final int ARRAY_SIZE = 100;\r\n            int[] n = new int[ARRAY_SIZE];\r\n            int sum = 0;\r\n            int count = 0;\r\n            System.out.println(&quot;Input: &quot;);\r\n            for (int i = 0; i &lt; ARRAY_SIZE; i++) {\r\n    \r\n                int a = scanner.nextInt();\r\n                n[i] = a;\r\n                sum += n[i];\r\n                count++;\r\n                if (a == 0)\r\n                {\r\n                    break;\r\n                }\r\n            }\r\n    \r\n            System.out.println(count &lt;= 1 ? &quot;Output : &quot; + (sum) : &quot;Output : &quot; + (sum / (count - 1)));\r\n        }\r\n    }\r\n\r\nWhat was happening in your logic is that the first index (0) keeps repeating as there is another do-while loop inside your main for loop which keeps consuming your scanner inputs.\r\n","title":"Problem with @test a java sorting program","body":"<p>Your for loop needs some correction as shown below:</p>\n<pre><code>public class Average\n{\n    public static void main(String[] args) {\n        Scanner scanner = new Scanner(System.in);\n        final int ARRAY_SIZE = 100;\n        int[] n = new int[ARRAY_SIZE];\n        int sum = 0;\n        int count = 0;\n        System.out.println(&quot;Input: &quot;);\n        for (int i = 0; i &lt; ARRAY_SIZE; i++) {\n\n            int a = scanner.nextInt();\n            n[i] = a;\n            sum += n[i];\n            count++;\n            if (a == 0)\n            {\n                break;\n            }\n        }\n\n        System.out.println(count &lt;= 1 ? &quot;Output : &quot; + (sum) : &quot;Output : &quot; + (sum / (count - 1)));\n    }\n}\n</code></pre>\n<p>What was happening in your logic is that the first index (0) keeps repeating as there is another do-while loop inside your main for loop which keeps consuming your scanner inputs.</p>\n"}],"owner":{"account_id":19066654,"reputation":29,"user_id":13921628,"display_name":"user13921628"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":390,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":69211130,"answer_count":1,"score":0,"last_activity_date":1643479876,"creation_date":1631804887,"question_id":69210937,"body_markdown":"I did a sort method for sorting array in ascendent order:  \r\n\r\n\r\n    public class Sorting {\r\n        public void sort(int[] array) {\r\n    \r\n            if (Objects.isNull(array)) {\r\n                throw new UnsupportedOperationException();\r\n    \r\n            } else {\r\n                Arrays.sort(array);\r\n                System.out.println(array);\r\n            }\r\n        }\r\n    }\r\nI have a SortingTest class:\r\n\r\n    public class SortingTest {\r\n    \r\n        Sorting sorting = new Sorting();\r\n    \r\n        @Test\r\n        public void testNullCase() {\r\n            int [] expected = null;\r\n    int [] actual = null;\r\n            assertArrayEquals(expected, actual);\r\n    \r\n    }\r\n    }\r\n\r\nand I test and `testEmptyCase()`, `testSingleElementArrayCase()`, `public void testSortedArraysCase()` and `testOtherCases()`.\r\nI test my program for sorting an array, but for below @test methods failure. How to do the test right? I want to understand what I need to do do what in the test is expected. Thanks for help.\r\n\r\n    @Test\r\n        public void testNullCarelessSorting() {\r\n            JUnitCore junit = new JUnitCore();\r\n            Result result = junit.run(NullCarelessSortingTestExtension.class);\r\n    \r\n            assertEquals(1, result.getFailureCount());\r\n            assertEquals(5, result.getRunCount());\r\n    \r\n            Failure nullCaseFailure = null;\r\n            \r\n        }\r\n\r\n    @Test\r\n        public void testLazySorting() {\r\n            JUnitCore junit = new JUnitCore();\r\n            Result result = junit.run(LazySortingTestExtension.class);\r\n    \r\n            assertEquals(2, result.getFailureCount());\r\n            assertEquals(5, result.getRunCount());\r\n    \r\n            Failure nullCaseFailure = null;\r\n            Failure otherCasesFailure = null;\r\n            \r\n        }\r\n    @Test\r\n        public void testTrickySorting() {\r\n            JUnitCore junit = new JUnitCore();\r\n            Result result = junit.run(TrickySortingTestExtension.class);\r\n    \r\n            assertEquals(4, result.getFailureCount());\r\n            assertEquals(5, result.getRunCount());\r\n    \r\n            Failure emptyCaseFailure = null;\r\n            Failure singleCaseFailure = null;\r\n            Failure sortedCaseFailure = null;\r\n            Failure otherCasesFailure = null;\r\n               \r\n    }","title":"Problem with @test a java sorting program","body":"<p>I did a sort method for sorting array in ascendent order:</p>\n<pre><code>public class Sorting {\n    public void sort(int[] array) {\n\n        if (Objects.isNull(array)) {\n            throw new UnsupportedOperationException();\n\n        } else {\n            Arrays.sort(array);\n            System.out.println(array);\n        }\n    }\n}\n</code></pre>\n<p>I have a SortingTest class:</p>\n<pre><code>public class SortingTest {\n\n    Sorting sorting = new Sorting();\n\n    @Test\n    public void testNullCase() {\n        int [] expected = null;\nint [] actual = null;\n        assertArrayEquals(expected, actual);\n\n}\n}\n</code></pre>\n<p>and I test and <code>testEmptyCase()</code>, <code>testSingleElementArrayCase()</code>, <code>public void testSortedArraysCase()</code> and <code>testOtherCases()</code>.\nI test my program for sorting an array, but for below @test methods failure. How to do the test right? I want to understand what I need to do do what in the test is expected. Thanks for help.</p>\n<pre><code>@Test\n    public void testNullCarelessSorting() {\n        JUnitCore junit = new JUnitCore();\n        Result result = junit.run(NullCarelessSortingTestExtension.class);\n\n        assertEquals(1, result.getFailureCount());\n        assertEquals(5, result.getRunCount());\n\n        Failure nullCaseFailure = null;\n        \n    }\n\n@Test\n    public void testLazySorting() {\n        JUnitCore junit = new JUnitCore();\n        Result result = junit.run(LazySortingTestExtension.class);\n\n        assertEquals(2, result.getFailureCount());\n        assertEquals(5, result.getRunCount());\n\n        Failure nullCaseFailure = null;\n        Failure otherCasesFailure = null;\n        \n    }\n@Test\n    public void testTrickySorting() {\n        JUnitCore junit = new JUnitCore();\n        Result result = junit.run(TrickySortingTestExtension.class);\n\n        assertEquals(4, result.getFailureCount());\n        assertEquals(5, result.getRunCount());\n\n        Failure emptyCaseFailure = null;\n        Failure singleCaseFailure = null;\n        Failure sortedCaseFailure = null;\n        Failure otherCasesFailure = null;\n           \n}\n</code></pre>\n"},{"tags":["java","encryption","aes"],"comments":[{"owner":{"account_id":213468,"reputation":103486,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1643466904,"post_id":70897605,"comment_id":125349705,"body_markdown":"The answer to &quot;Is this a bug?&quot; when referring to a platform like Java that is extensively used, is generally &quot;extremely unlikely, check your own code and your assumption first&quot;.","body":"The answer to &quot;Is this a bug?&quot; when referring to a platform like Java that is extensively used, is generally &quot;extremely unlikely, check your own code and your assumption first&quot;."}],"answers":[{"tags":[],"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1643463137,"creation_date":1643393226,"answer_id":70898306,"question_id":70897605,"body_markdown":"_Is this a bug?_ No, this is correct.\r\n\r\nTo understand why this is correct you need to look at `en.length` for different length input.\r\n\r\nYou will notice that `en.length` is 16 for input lengths from 0 to 15.\r\n\r\nWhat that means is that when you call `cipher.doFinal(ByteBuffer.wrap(en), destBuffer);` the decryption code sees an input block of length 16 and needs enough room in `destBuffer` for the decryption of `en` **without knowing** how long the effective length of the decrypted content is (to determine the effective length it need to do the full decryption.)\r\n\r\nIn the case of the `cipher.update(en)` / `cipher.doFinal()` methods the result of decoding `en` is stored in an internal buffer and finally copied into the output array (if there is enough room in the output array - otherwise you will see the same `ShortBufferException`).\r\n\r\n-----\r\nTo the comment: _Think about it, if I know that length of src data is 5 not 16, I just need allocate 5-bytes-space, rather than 16-bytes-space_\r\n\r\nBut this is not how AES works. AES is a block cipher that encodes and decodes data in chunks of 16 bytes. That means no matter if your input is only one byte or 15 bytes (maximum 15 bytes for the final block), to decode a block of encoded data the AES cipher code needs a buffer with a length of 16 bytes to decode that block.\r\n\r\nIts just that the `doFinal(byte[], int)` method (respectively the code that effectively does the decoding) allocates that buffer internally and then copies the decoded result into your buffer.\r\n\r\nIt seems that the code working with `ByteBuffer` tries to avoid additional memory allocation as much as possible and the designers decided to rather throw an exception before trying to decrypt than working with to small a buffer.\r\n\r\nTwo caveats:\r\n- if you provide an output buffer of at least 16 bytes then that additional allocation is not necessary and is skipped.\r\n- if the provided output buffer is shorter than the actual data length you will get an exception.\r\n\r\n","title":"Java Cipher bug?: Need at least 16 bytes of space in output buffer","body":"<p><em>Is this a bug?</em> No, this is correct.</p>\n<p>To understand why this is correct you need to look at <code>en.length</code> for different length input.</p>\n<p>You will notice that <code>en.length</code> is 16 for input lengths from 0 to 15.</p>\n<p>What that means is that when you call <code>cipher.doFinal(ByteBuffer.wrap(en), destBuffer);</code> the decryption code sees an input block of length 16 and needs enough room in <code>destBuffer</code> for the decryption of <code>en</code> <strong>without knowing</strong> how long the effective length of the decrypted content is (to determine the effective length it need to do the full decryption.)</p>\n<p>In the case of the <code>cipher.update(en)</code> / <code>cipher.doFinal()</code> methods the result of decoding <code>en</code> is stored in an internal buffer and finally copied into the output array (if there is enough room in the output array - otherwise you will see the same <code>ShortBufferException</code>).</p>\n<hr />\n<p>To the comment: <em>Think about it, if I know that length of src data is 5 not 16, I just need allocate 5-bytes-space, rather than 16-bytes-space</em></p>\n<p>But this is not how AES works. AES is a block cipher that encodes and decodes data in chunks of 16 bytes. That means no matter if your input is only one byte or 15 bytes (maximum 15 bytes for the final block), to decode a block of encoded data the AES cipher code needs a buffer with a length of 16 bytes to decode that block.</p>\n<p>Its just that the <code>doFinal(byte[], int)</code> method (respectively the code that effectively does the decoding) allocates that buffer internally and then copies the decoded result into your buffer.</p>\n<p>It seems that the code working with <code>ByteBuffer</code> tries to avoid additional memory allocation as much as possible and the designers decided to rather throw an exception before trying to decrypt than working with to small a buffer.</p>\n<p>Two caveats:</p>\n<ul>\n<li>if you provide an output buffer of at least 16 bytes then that additional allocation is not necessary and is skipped.</li>\n<li>if the provided output buffer is shorter than the actual data length you will get an exception.</li>\n</ul>\n"}],"owner":{"account_id":9149557,"reputation":1927,"user_id":6804605,"accept_rate":75,"display_name":"FredSuvn"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":435,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1643479585,"creation_date":1643390014,"question_id":70897605,"body_markdown":"Let `en` as encrypt of `data`, let `dest` as decrypt of `en`.\r\n\r\nIf `dest`&#39;s type is byte[] and its length equals to `data`, success.\r\n\r\nBut if `dest`&#39;s type is `ByteBuffer` and its length equals to `data`, fail: Need at least 16 bytes of space in output buffer.\r\n\r\nBut again, if `dest`&#39;s type is `ByteBuffer` and its length equals to `en`, success.\r\n\r\n    @Test\r\n    public void testAes() throws Exception {\r\n        KeyGenerator keyGenerator = KeyGenerator.getInstance(&quot;AES&quot;);\r\n        keyGenerator.init(128);\r\n        Key key = keyGenerator.generateKey();\r\n        Cipher cipher = Cipher.getInstance(&quot;AES&quot;);\r\n        byte[] data = &quot;data&quot;.getBytes();\r\n        cipher.init(Cipher.ENCRYPT_MODE, key);\r\n        cipher.update(data);\r\n        byte[] en = cipher.doFinal();\r\n\r\n        // success for byte[] type\r\n        byte[] destBytes = new byte[data.length];\r\n        cipher.init(Cipher.DECRYPT_MODE, key);\r\n        cipher.update(en);\r\n        cipher.doFinal(destBytes, 0);\r\n        // OK\r\n        Assert.assertEquals(destBytes, data);\r\n\r\n        // error: Need at least 16 bytes of space in output buffer\r\n        // If replace data.length with en.length, success:\r\n        // destBuffer = ByteBuffer.allocate(en.length);\r\n        ByteBuffer destBuffer = ByteBuffer.allocate(data.length);\r\n        cipher.init(Cipher.DECRYPT_MODE, key);\r\n        cipher.doFinal(ByteBuffer.wrap(en), destBuffer);\r\n        destBuffer.flip();\r\n        Assert.assertEquals(Arrays.copyOfRange(destBuffer.array(), 0, data.length), data);\r\n    }\r\n\r\n\r\nIs this a bug?\r\n\r\nThere are two points for my opinion:\r\n\r\n* It checks dest ByteBuffer&#39;s length, but doesn&#39;t check dest byte array&#39;s length;\r\n* If I exactly know descryption length (such as 5, 17, 31, 49...), I just need allocate exact space, not full block size (16, 32, 48, 64...).","title":"Java Cipher bug?: Need at least 16 bytes of space in output buffer","body":"<p>Let <code>en</code> as encrypt of <code>data</code>, let <code>dest</code> as decrypt of <code>en</code>.</p>\n<p>If <code>dest</code>'s type is byte[] and its length equals to <code>data</code>, success.</p>\n<p>But if <code>dest</code>'s type is <code>ByteBuffer</code> and its length equals to <code>data</code>, fail: Need at least 16 bytes of space in output buffer.</p>\n<p>But again, if <code>dest</code>'s type is <code>ByteBuffer</code> and its length equals to <code>en</code>, success.</p>\n<pre><code>@Test\npublic void testAes() throws Exception {\n    KeyGenerator keyGenerator = KeyGenerator.getInstance(&quot;AES&quot;);\n    keyGenerator.init(128);\n    Key key = keyGenerator.generateKey();\n    Cipher cipher = Cipher.getInstance(&quot;AES&quot;);\n    byte[] data = &quot;data&quot;.getBytes();\n    cipher.init(Cipher.ENCRYPT_MODE, key);\n    cipher.update(data);\n    byte[] en = cipher.doFinal();\n\n    // success for byte[] type\n    byte[] destBytes = new byte[data.length];\n    cipher.init(Cipher.DECRYPT_MODE, key);\n    cipher.update(en);\n    cipher.doFinal(destBytes, 0);\n    // OK\n    Assert.assertEquals(destBytes, data);\n\n    // error: Need at least 16 bytes of space in output buffer\n    // If replace data.length with en.length, success:\n    // destBuffer = ByteBuffer.allocate(en.length);\n    ByteBuffer destBuffer = ByteBuffer.allocate(data.length);\n    cipher.init(Cipher.DECRYPT_MODE, key);\n    cipher.doFinal(ByteBuffer.wrap(en), destBuffer);\n    destBuffer.flip();\n    Assert.assertEquals(Arrays.copyOfRange(destBuffer.array(), 0, data.length), data);\n}\n</code></pre>\n<p>Is this a bug?</p>\n<p>There are two points for my opinion:</p>\n<ul>\n<li>It checks dest ByteBuffer's length, but doesn't check dest byte array's length;</li>\n<li>If I exactly know descryption length (such as 5, 17, 31, 49...), I just need allocate exact space, not full block size (16, 32, 48, 64...).</li>\n</ul>\n"},{"tags":["java","android","string"],"answers":[{"tags":[],"owner":{"account_id":39846,"reputation":991143,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1643479409,"creation_date":1643479409,"answer_id":70908259,"question_id":70908222,"body_markdown":"&gt; I have Java 11 installed, in Settings the embedded JDK version 11.0.10 is specified\r\n\r\nThat is the version of Java used to run Gradle. It is unrelated to the version of Android that is used on Android devices.\r\n\r\n&gt; In the build.gradle file, in compileOptions, I have changed to JavaVersion.VERSION_11\r\n\r\nThat does not change what is on Android devices.\r\n\r\n&gt; Why aren&#39;t the new methods available?\r\n\r\nBecause Android supports a subset of Java 8.","title":"Java 11 stripLeading() method unavailable in Android Studio Arctic Fox","body":"<blockquote>\n<p>I have Java 11 installed, in Settings the embedded JDK version 11.0.10 is specified</p>\n</blockquote>\n<p>That is the version of Java used to run Gradle. It is unrelated to the version of Android that is used on Android devices.</p>\n<blockquote>\n<p>In the build.gradle file, in compileOptions, I have changed to JavaVersion.VERSION_11</p>\n</blockquote>\n<p>That does not change what is on Android devices.</p>\n<blockquote>\n<p>Why aren't the new methods available?</p>\n</blockquote>\n<p>Because Android supports a subset of Java 8.</p>\n"}],"owner":{"account_id":10294509,"reputation":97,"user_id":7595172,"display_name":"prosp"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":246,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":70908259,"answer_count":1,"score":1,"last_activity_date":1643479489,"creation_date":1643479144,"question_id":70908222,"body_markdown":"In Java 11 there are some new String methods - strip(), stripLeading() etc. But it is not possible to use them in Android Studio Arctic Fox - when I try to type them, they aren&#39;t recognized:\r\n\r\n[![enter image description here][1]][1]\r\n\r\nI have Java 11 installed, in Settings the embedded JDK version 11.0.10 is specified:\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\nIn the build.gradle file, in compileOptions, I have changed to JavaVersion.VERSION_11:\r\n\r\n    compileOptions {\r\n            sourceCompatibility JavaVersion.VERSION_11\r\n            targetCompatibility JavaVersion.VERSION_11\r\n        }\r\n\r\nWhy aren&#39;t the new methods available?\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/WfWSb.png\r\n  [2]: https://i.stack.imgur.com/COJBi.png","title":"Java 11 stripLeading() method unavailable in Android Studio Arctic Fox","body":"<p>In Java 11 there are some new String methods - strip(), stripLeading() etc. But it is not possible to use them in Android Studio Arctic Fox - when I try to type them, they aren't recognized:</p>\n<p><a href=\"https://i.stack.imgur.com/WfWSb.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/WfWSb.png\" alt=\"enter image description here\" /></a></p>\n<p>I have Java 11 installed, in Settings the embedded JDK version 11.0.10 is specified:</p>\n<p><a href=\"https://i.stack.imgur.com/COJBi.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/COJBi.png\" alt=\"enter image description here\" /></a></p>\n<p>In the build.gradle file, in compileOptions, I have changed to JavaVersion.VERSION_11:</p>\n<pre><code>compileOptions {\n        sourceCompatibility JavaVersion.VERSION_11\n        targetCompatibility JavaVersion.VERSION_11\n    }\n</code></pre>\n<p>Why aren't the new methods available?</p>\n"},{"tags":["java","automated-tests","build.gradle","customization","cucumber-jvm"],"answers":[{"tags":[],"owner":{"account_id":22087842,"reputation":81,"user_id":16346374,"display_name":"dparr"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1643467544,"creation_date":1643467544,"answer_id":70906565,"question_id":70906252,"body_markdown":"You can set custom `sourceSets` like this in your build.gradle\r\n\r\n```groovy\r\n  main {\r\n    java {\r\n      srcDirs = [&#39;src/gen/java&#39;, &#39;src/main/java&#39;]\r\n    }\r\n  }\r\n```\r\n\r\nThe `srcDirs` is an array, so you can specify more than one source directory.\r\n\r\nYou can also specify custom source directories for your tests\r\n\r\n```groovy\r\n  test {\r\n    java {\r\n      srcDirs = [&#39;src/integrated-test/java&#39;, &#39;src/test/java&#39;]\r\n    }\r\n  }\r\n```\r\n\r\nYou can find some more info here https://www.baeldung.com/gradle-source-sets in section 3. They use the example for integrated tests, but the idea is the same. \r\n\r\nHere is the official gradle document for source sets https://docs.gradle.org/current/dsl/org.gradle.api.tasks.SourceSet.html ","title":"How to add custom module with package in gradle?","body":"<p>You can set custom <code>sourceSets</code> like this in your build.gradle</p>\n<pre><code>  main {\n    java {\n      srcDirs = ['src/gen/java', 'src/main/java']\n    }\n  }\n</code></pre>\n<p>The <code>srcDirs</code> is an array, so you can specify more than one source directory.</p>\n<p>You can also specify custom source directories for your tests</p>\n<pre><code>  test {\n    java {\n      srcDirs = ['src/integrated-test/java', 'src/test/java']\n    }\n  }\n</code></pre>\n<p>You can find some more info here <a href=\"https://www.baeldung.com/gradle-source-sets\" rel=\"nofollow noreferrer\">https://www.baeldung.com/gradle-source-sets</a> in section 3. They use the example for integrated tests, but the idea is the same.</p>\n<p>Here is the official gradle document for source sets <a href=\"https://docs.gradle.org/current/dsl/org.gradle.api.tasks.SourceSet.html\" rel=\"nofollow noreferrer\">https://docs.gradle.org/current/dsl/org.gradle.api.tasks.SourceSet.html</a></p>\n"},{"tags":[],"owner":{"account_id":21466073,"reputation":11,"user_id":15815978,"display_name":"jeya suriyan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1643479450,"creation_date":1643475516,"answer_id":70907726,"question_id":70906252,"body_markdown":"I found a solution. \r\nIf your requirement is projectFolder/src/ -&gt; Here you want to create a custom module other than the main and test. follow the below one.\r\nIts worked in Intellj ide.\r\n\r\n    sourceSets {\r\n        customModuleName.java.srcDir &quot;src/customModuleName&quot;\r\n        customModuleName.resources.srcDir &quot;src/customModuleName&quot;\r\n    }\r\n\r\n// After adding the above block in build file. Go ahead and create a directory, it will show a module name in suggestion\r\n// Then inside module, Go to create a package. Here we can find java and resources folder in suggestion","title":"How to add custom module with package in gradle?","body":"<p>I found a solution.\nIf your requirement is projectFolder/src/ -&gt; Here you want to create a custom module other than the main and test. follow the below one.\nIts worked in Intellj ide.</p>\n<pre><code>sourceSets {\n    customModuleName.java.srcDir &quot;src/customModuleName&quot;\n    customModuleName.resources.srcDir &quot;src/customModuleName&quot;\n}\n</code></pre>\n<p>// After adding the above block in build file. Go ahead and create a directory, it will show a module name in suggestion\n// Then inside module, Go to create a package. Here we can find java and resources folder in suggestion</p>\n"}],"owner":{"account_id":21466073,"reputation":11,"user_id":15815978,"display_name":"jeya suriyan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":795,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1643479450,"creation_date":1643465337,"question_id":70906252,"body_markdown":"I&#39;m unable to add custom source set in my gradle project. How to initialize the version numbers in here? \r\nMy gradle file looks like:\r\n \r\n\r\n    plugins {\r\n        id &#39;java&#39;\r\n    }\r\n    \r\n    group &#39;org.example&#39;\r\n    version &#39;1.0-SNAPSHOT&#39;\r\n    \r\n    repositories {\r\n        mavenCentral()\r\n    }\r\n    \r\n    sourceSets {\r\n        demo\r\n    }\r\n    \r\n    dependencies {\r\n        testImplementation &#39;org.junit.jupiter:junit-jupiter-api:5.7.0&#39;\r\n        testRuntimeOnly &#39;org.junit.jupiter:junit-jupiter-engine:5.7.0&#39;\r\n    }\r\n    \r\n    test {\r\n        useJUnitPlatform()\r\n    }","title":"How to add custom module with package in gradle?","body":"<p>I'm unable to add custom source set in my gradle project. How to initialize the version numbers in here?\nMy gradle file looks like:</p>\n<pre><code>plugins {\n    id 'java'\n}\n\ngroup 'org.example'\nversion '1.0-SNAPSHOT'\n\nrepositories {\n    mavenCentral()\n}\n\nsourceSets {\n    demo\n}\n\ndependencies {\n    testImplementation 'org.junit.jupiter:junit-jupiter-api:5.7.0'\n    testRuntimeOnly 'org.junit.jupiter:junit-jupiter-engine:5.7.0'\n}\n\ntest {\n    useJUnitPlatform()\n}\n</code></pre>\n"},{"tags":["java","spring","amazon-web-services","amazon-s3"],"comments":[{"owner":{"account_id":10389194,"reputation":14819,"user_id":7661119,"display_name":"Ervin Szilagyi"},"score":1,"creation_date":1643479899,"post_id":70908250,"comment_id":125353101,"body_markdown":"I assume you would expect from us to know what exactly is in this file `C:\\Workspace\\se\\seyaWEB\\target\\classes\\com\\add\\web\\helper\\S3Config.class`","body":"I assume you would expect from us to know what exactly is in this file <code>C:\\Workspace\\se\\seyaWEB\\target\\classes\\com\\add\\web\\helper\\S3&zwnj;&#8203;Config.class</code>"},{"owner":{"account_id":5095870,"reputation":13,"user_id":4087220,"display_name":"Seya N"},"score":0,"creation_date":1643481447,"post_id":70908250,"comment_id":125353512,"body_markdown":"i do have three bean definitions S3Client,S3Presigner and S3TransferManager - i dont have any thing else - below is the bean definition for S3client","body":"i do have three bean definitions S3Client,S3Presigner and S3TransferManager - i dont have any thing else - below is the bean definition for S3client"},{"owner":{"account_id":5095870,"reputation":13,"user_id":4087220,"display_name":"Seya N"},"score":0,"creation_date":1643481782,"post_id":70908250,"comment_id":125353597,"body_markdown":"`@Bean\npublic S3Client s3Client() { \nAwsCredentialsProvider credentialsProvider = StaticCredentialsProvider.create(AwsBasicCredentials.create(accessKeyId, secretKeyId));\nreturn S3Client.builder().credentialsProvider(credentialsProvider).region(Region.US_WEST_1).build();\n\t}`","body":"<code>@Bean public S3Client s3Client() {  AwsCredentialsProvider credentialsProvider = StaticCredentialsProvider.create(AwsBasicCredentials.create(&zwnj;&#8203;accessKeyId, secretKeyId)); return S3Client.builder().credentialsProvider(credentialsProvider).&zwnj;&#8203;region(Region.US_WES&zwnj;&#8203;T_1).build(); \t}</code>"},{"owner":{"account_id":5095870,"reputation":13,"user_id":4087220,"display_name":"Seya N"},"score":0,"creation_date":1643487378,"post_id":70908250,"comment_id":125354898,"body_markdown":"any idea on this please?","body":"any idea on this please?"},{"owner":{"account_id":5095870,"reputation":13,"user_id":4087220,"display_name":"Seya N"},"score":0,"creation_date":1645026238,"post_id":70908250,"comment_id":125762036,"body_markdown":"Spring version has been upgraded !! S3client had some implementation of the java 8 features which  is not supported by spring 3 !! issue resolved.","body":"Spring version has been upgraded !! S3client had some implementation of the java 8 features which  is not supported by spring 3 !! issue resolved."}],"owner":{"account_id":5095870,"reputation":13,"user_id":4087220,"display_name":"Seya N"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":154,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1643479346,"creation_date":1643479346,"question_id":70908250,"body_markdown":"getting the below error when i try to implement upload/download files to AWS S3 in a java and spring project - with old version of Spring which is 3.1.0-release and java is 1.8.\r\ni dont want to ugrade the version of spring as it widely used in the application so is there any way to achieve this with out uprgrading spring version.\r\nyour help would be appreciated. - please see the error below.\r\n\r\nThanks.\r\n\r\nERROR [org.springframework.web.context.ContextLoader] - &lt;Context initialization failed&gt;\r\norg.springframework.beans.factory.BeanDefinitionStoreException: Failed to read candidate component class: file ....**[C:\\Workspace\\se\\seyaWEB\\target\\classes\\com\\add\\web\\helper\\S3Config.class]**; nested exception is java.lang.ArrayIndexOutOfBoundsException: 13568\r\n\r\n","title":"AWS S3 and Spring 3.1.0-Release in java 1.8 project","body":"<p>getting the below error when i try to implement upload/download files to AWS S3 in a java and spring project - with old version of Spring which is 3.1.0-release and java is 1.8.\ni dont want to ugrade the version of spring as it widely used in the application so is there any way to achieve this with out uprgrading spring version.\nyour help would be appreciated. - please see the error below.</p>\n<p>Thanks.</p>\n<p>ERROR [org.springframework.web.context.ContextLoader] - \norg.springframework.beans.factory.BeanDefinitionStoreException: Failed to read candidate component class: file ....<strong>[C:\\Workspace\\se\\seyaWEB\\target\\classes\\com\\add\\web\\helper\\S3Config.class]</strong>; nested exception is java.lang.ArrayIndexOutOfBoundsException: 13568</p>\n"},{"tags":["java","spring","vosk"],"comments":[{"owner":{"account_id":8289832,"reputation":131,"user_id":6231856,"accept_rate":70,"display_name":"Oleg Shankovskyi"},"score":0,"creation_date":1641554383,"post_id":69696092,"comment_id":124839531,"body_markdown":"Hi, Aniran, have you solved this problem? I have the same one.","body":"Hi, Aniran, have you solved this problem? I have the same one."},{"owner":{"account_id":19605669,"reputation":141,"user_id":14349416,"display_name":"aniran mohammadpour"},"score":0,"creation_date":1641573991,"post_id":69696092,"comment_id":124847575,"body_markdown":"Hi, No I haven&#39;t","body":"Hi, No I haven&#39;t"},{"owner":{"account_id":8289832,"reputation":131,"user_id":6231856,"accept_rate":70,"display_name":"Oleg Shankovskyi"},"score":1,"creation_date":1641574870,"post_id":69696092,"comment_id":124847955,"body_markdown":"I figured out that it depends on the rate (second param in the method). In my case it started working after rate 60000.","body":"I figured out that it depends on the rate (second param in the method). In my case it started working after rate 60000."},{"owner":{"account_id":19605669,"reputation":141,"user_id":14349416,"display_name":"aniran mohammadpour"},"score":0,"creation_date":1643107821,"post_id":69696092,"comment_id":125246583,"body_markdown":"I don&#39;t know why, but it works rate of 60000 for me too.","body":"I don&#39;t know why, but it works rate of 60000 for me too."}],"answers":[{"tags":[],"owner":{"account_id":19605669,"reputation":141,"user_id":14349416,"display_name":"aniran mohammadpour"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1643479275,"creation_date":1643116071,"answer_id":70849171,"question_id":69696092,"body_markdown":"I think I found the answer and it was because of sampleRate of mic, \r\n\r\nby going to: sounds &gt;&gt; Recordings &gt;&gt; clicking on the Mic &gt;&gt; Advanced \r\n- you can see your sample rate\r\n\r\n[![enter image description here][2]][2]\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  \r\n  [2]: https://i.stack.imgur.com/Ut8eX.png\r\n[1]: https://i.stack.imgur.com/VcIBE.png","title":"VOSK empty text output?(Java)","body":"<p>I think I found the answer and it was because of sampleRate of mic,</p>\n<p>by going to: sounds &gt;&gt; Recordings &gt;&gt; clicking on the Mic &gt;&gt; Advanced</p>\n<ul>\n<li>you can see your sample rate</li>\n</ul>\n<p><a href=\"https://i.stack.imgur.com/Ut8eX.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Ut8eX.png\" alt=\"enter image description here\" /></a>\n<a href=\"https://i.stack.imgur.com/VcIBE.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VcIBE.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":19605669,"reputation":141,"user_id":14349416,"display_name":"aniran mohammadpour"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":865,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1643479275,"creation_date":1635073493,"question_id":69696092,"body_markdown":"When i am trying to  get output from the code below, that gives text file from *Wave* file that transfered from client to server through **RecordRTC**,\r\n\r\n          LibVosk.setLogLevel(LogLevel.DEBUG);\r\n\r\n        try (Model model = new Model(&quot;model&quot;);\r\n             InputStream ais = AudioSystem.getAudioInputStream(new BufferedInputStream(new FileInputStream(filepath)));\r\n             Recognizer recognizer = new Recognizer(model, 16000)) {\r\n\r\n            int nbytes;\r\n            byte[] b = new byte[4096];\r\n            while ((nbytes = ais.read(b)) &gt;= 0) {\r\n                if (recognizer.acceptWaveForm(b, nbytes)) {\r\n                    System.out.println(recognizer.getResult());\r\n                } else {\r\n                    System.out.println(recognizer.getPartialResult());\r\n                }\r\n            }\r\n\r\n            System.out.println(recognizer.getFinalResult());\r\n        }\r\nit gives this output and the problem is the final result is **Empty**:\r\n\r\n    LOG (VoskAPI:ReadDataFiles():model.cc:211) Decoding params beam=10 max-active=3000 lattice-beam=2\r\n    LOG (VoskAPI:ReadDataFiles():model.cc:214) Silence phones 1:2:3:4:5:6:7:8:9:10\r\n    LOG (VoskAPI:RemoveOrphanNodes():nnet-nnet.cc:948) Removed 1 orphan nodes.\r\n    LOG (VoskAPI:RemoveOrphanComponents():nnet-nnet.cc:847) Removing 2 orphan components.\r\n    LOG (VoskAPI:Collapse():nnet-utils.cc:1488) Added 1 components, removed 2\r\n    LOG (VoskAPI:CompileLooped():nnet-compile-looped.cc:345) Spent 0.077131 seconds in looped compilation.\r\n    LOG (VoskAPI:ReadDataFiles():model.cc:238) Loading i-vector extractor from model/ivector/final.ie\r\n    LOG (VoskAPI:ComputeDerivedVars():ivector-extractor.cc:183) Computing derived variables for iVector extractor\r\n    LOG (VoskAPI:ComputeDerivedVars():ivector-extractor.cc:204) Done.\r\n    LOG (VoskAPI:ReadDataFiles():model.cc:268) Loading HCLG from model/graph/HCLG.fst\r\n    LOG (VoskAPI:ReadDataFiles():model.cc:283) Loading words from model/graph/words.txt\r\n    LOG (VoskAPI:ReadDataFiles():model.cc:292) Loading winfo model/graph/phones/word_boundary.int\r\n    LOG (VoskAPI:ReadDataFiles():model.cc:299) Loading subtract G.fst model from model/rescore/G.fst\r\n    LOG (VoskAPI:ReadDataFiles():model.cc:301) Loading CARPA model from model/rescore/G.carpa\r\n    \r\n    \r\n    {\r\n      &quot;partial&quot; : &quot;&quot;\r\n    }\r\n    {\r\n      &quot;partial&quot; : &quot;&quot;\r\n    }\r\n    {\r\n      &quot;partial&quot; : &quot;&quot;\r\n    }\r\n    {\r\n      &quot;partial&quot; : &quot;&quot;\r\n    }\r\n    {\r\n      &quot;text&quot; : &quot;&quot;\r\n    }","title":"VOSK empty text output?(Java)","body":"<p>When i am trying to  get output from the code below, that gives text file from <em>Wave</em> file that transfered from client to server through <strong>RecordRTC</strong>,</p>\n<pre><code>      LibVosk.setLogLevel(LogLevel.DEBUG);\n\n    try (Model model = new Model(&quot;model&quot;);\n         InputStream ais = AudioSystem.getAudioInputStream(new BufferedInputStream(new FileInputStream(filepath)));\n         Recognizer recognizer = new Recognizer(model, 16000)) {\n\n        int nbytes;\n        byte[] b = new byte[4096];\n        while ((nbytes = ais.read(b)) &gt;= 0) {\n            if (recognizer.acceptWaveForm(b, nbytes)) {\n                System.out.println(recognizer.getResult());\n            } else {\n                System.out.println(recognizer.getPartialResult());\n            }\n        }\n\n        System.out.println(recognizer.getFinalResult());\n    }\n</code></pre>\n<p>it gives this output and the problem is the final result is <strong>Empty</strong>:</p>\n<pre><code>LOG (VoskAPI:ReadDataFiles():model.cc:211) Decoding params beam=10 max-active=3000 lattice-beam=2\nLOG (VoskAPI:ReadDataFiles():model.cc:214) Silence phones 1:2:3:4:5:6:7:8:9:10\nLOG (VoskAPI:RemoveOrphanNodes():nnet-nnet.cc:948) Removed 1 orphan nodes.\nLOG (VoskAPI:RemoveOrphanComponents():nnet-nnet.cc:847) Removing 2 orphan components.\nLOG (VoskAPI:Collapse():nnet-utils.cc:1488) Added 1 components, removed 2\nLOG (VoskAPI:CompileLooped():nnet-compile-looped.cc:345) Spent 0.077131 seconds in looped compilation.\nLOG (VoskAPI:ReadDataFiles():model.cc:238) Loading i-vector extractor from model/ivector/final.ie\nLOG (VoskAPI:ComputeDerivedVars():ivector-extractor.cc:183) Computing derived variables for iVector extractor\nLOG (VoskAPI:ComputeDerivedVars():ivector-extractor.cc:204) Done.\nLOG (VoskAPI:ReadDataFiles():model.cc:268) Loading HCLG from model/graph/HCLG.fst\nLOG (VoskAPI:ReadDataFiles():model.cc:283) Loading words from model/graph/words.txt\nLOG (VoskAPI:ReadDataFiles():model.cc:292) Loading winfo model/graph/phones/word_boundary.int\nLOG (VoskAPI:ReadDataFiles():model.cc:299) Loading subtract G.fst model from model/rescore/G.fst\nLOG (VoskAPI:ReadDataFiles():model.cc:301) Loading CARPA model from model/rescore/G.carpa\n\n\n{\n  &quot;partial&quot; : &quot;&quot;\n}\n{\n  &quot;partial&quot; : &quot;&quot;\n}\n{\n  &quot;partial&quot; : &quot;&quot;\n}\n{\n  &quot;partial&quot; : &quot;&quot;\n}\n{\n  &quot;text&quot; : &quot;&quot;\n}\n</code></pre>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":8355,"page":1637,"page_size":100}
