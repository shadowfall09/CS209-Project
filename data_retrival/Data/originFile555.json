{"items":[{"tags":["java","authentication","openapi","openapi-generator","openapi-generator-maven-plugin"],"comments":[{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":1,"creation_date":1679545293,"post_id":75816265,"comment_id":133742000,"body_markdown":"In my case I needed to add a HTTP header. It seems that your header name is `&quot;X-API-Key&quot;` and the value should be your token.","body":"In my case I needed to add a HTTP header. It seems that your header name is <code>&quot;X-API-Key&quot;</code> and the value should be your token."}],"owner":{"account_id":4813656,"reputation":595,"user_id":3886357,"accept_rate":0,"display_name":"Mabel Oza"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":235,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679511393,"creation_date":1679511393,"question_id":75816265,"body_markdown":"When using an OpenAPI spec to generate a Java SDK how do I authenticate to test out the SDK? \r\n\r\nIf I want to use these APIs in postman or in simple code I have to pass in an API token and PEM formatted secret.key. When I generate my SDK using the OpenAPI spec I get a class called ApiClient (see below). How do I pass in my PEM file using this class?\r\n\r\n```\r\n    protected void init() {\r\n        // Use RFC3339 format for date and datetime.\r\n        // See http://xml2rfc.ietf.org/public/rfc/html/rfc3339.html#anchor14\r\n        this.dateFormat = new RFC3339DateFormat();\r\n\r\n        // Use UTC as the default time zone.\r\n        this.dateFormat.setTimeZone(TimeZone.getTimeZone(&quot;UTC&quot;));\r\n\r\n        // Set default User-Agent.\r\n        setUserAgent(&quot;Java-SDK&quot;);\r\n\r\n        // Setup authentications (key: authentication name, value: authentication).\r\n        authentications = new HashMap&lt;String, Authentication&gt;();\r\n        authentications.put(&quot;ApiKeyAuth&quot;, new ApiKeyAuth(&quot;header&quot;, &quot;X-API-Key&quot;));\r\n        authentications.put(&quot;bearerTokenAuth&quot;, new HttpBearerAuth(&quot;bearer&quot;));\r\n        // Prevent the authentications from being modified.\r\n        authentications = Collections.unmodifiableMap(authentications);\r\n    }\r\n```\r\n\r\nI would imagine this generated code is reflected on the swagger ui page. In the swagger ui if I hit authorize I am presented with two fields &#39;bearerAuthToken&#39; and apiKey. \r\n[![Swagger UI Page][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/sAeVL.png","title":"Using OpenAPI Generate to Create SDK and Authorize","body":"<p>When using an OpenAPI spec to generate a Java SDK how do I authenticate to test out the SDK?</p>\n<p>If I want to use these APIs in postman or in simple code I have to pass in an API token and PEM formatted secret.key. When I generate my SDK using the OpenAPI spec I get a class called ApiClient (see below). How do I pass in my PEM file using this class?</p>\n<pre><code>    protected void init() {\n        // Use RFC3339 format for date and datetime.\n        // See http://xml2rfc.ietf.org/public/rfc/html/rfc3339.html#anchor14\n        this.dateFormat = new RFC3339DateFormat();\n\n        // Use UTC as the default time zone.\n        this.dateFormat.setTimeZone(TimeZone.getTimeZone(&quot;UTC&quot;));\n\n        // Set default User-Agent.\n        setUserAgent(&quot;Java-SDK&quot;);\n\n        // Setup authentications (key: authentication name, value: authentication).\n        authentications = new HashMap&lt;String, Authentication&gt;();\n        authentications.put(&quot;ApiKeyAuth&quot;, new ApiKeyAuth(&quot;header&quot;, &quot;X-API-Key&quot;));\n        authentications.put(&quot;bearerTokenAuth&quot;, new HttpBearerAuth(&quot;bearer&quot;));\n        // Prevent the authentications from being modified.\n        authentications = Collections.unmodifiableMap(authentications);\n    }\n</code></pre>\n<p>I would imagine this generated code is reflected on the swagger ui page. In the swagger ui if I hit authorize I am presented with two fields 'bearerAuthToken' and apiKey.\n<a href=\"https://i.stack.imgur.com/sAeVL.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/sAeVL.png\" alt=\"Swagger UI Page\" /></a></p>\n"},{"tags":["java","android","android-studio","android-fragments"],"answers":[{"tags":[],"owner":{"account_id":21896421,"reputation":187,"user_id":17846979,"display_name":"RandomLonelyDev"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1679509806,"creation_date":1679509806,"answer_id":75816031,"question_id":75815417,"body_markdown":"save the text in a string which is null by default.  check if the string is not null.  If is isn&#39;t null, then set the text to the view in the fragment&#39;s onCreateView() method.  This will ensure the data is kept between fragment transactions. Ex:\r\n\r\n    private String text = null;\r\n    \r\n    @Override\r\n    public void onViewCreated(View view, Bundle sIS) {\r\n        super.onViewCreated(view, sIS);\r\n        team1_1.setText(text);\r\n        /*Other Frag Logic*/\r\n    }\r\n    \r\n    @Override\r\n    public void onDestroyView() {\r\n        super.onDestroyView();\r\n        //binding = null; Only use if you are using viewbinding\r\n        text = team1_1.getText().toString();\r\n    }\r\n\r\nHope this helps!","title":"My .settext in one fragment dont save after changing the fragment an then go back","body":"<p>save the text in a string which is null by default.  check if the string is not null.  If is isn't null, then set the text to the view in the fragment's onCreateView() method.  This will ensure the data is kept between fragment transactions. Ex:</p>\n<pre><code>private String text = null;\n\n@Override\npublic void onViewCreated(View view, Bundle sIS) {\n    super.onViewCreated(view, sIS);\n    team1_1.setText(text);\n    /*Other Frag Logic*/\n}\n\n@Override\npublic void onDestroyView() {\n    super.onDestroyView();\n    //binding = null; Only use if you are using viewbinding\n    text = team1_1.getText().toString();\n}\n</code></pre>\n<p>Hope this helps!</p>\n"}],"owner":{"account_id":28088426,"reputation":11,"user_id":21458419,"display_name":"lajuca333"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":20,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":75816031,"answer_count":1,"score":0,"last_activity_date":1679509806,"creation_date":1679505731,"question_id":75815417,"body_markdown":"Im am working with two fragment an replacing them by pressing a button. In one of them i having a edittext which on i change with .settext and make it not editable with . setEnabled(false). Now i the Problem wenn i go the other fragment an then back it dont save.\r\n\r\n&gt; team1_1 = view.findViewById(R.id.team1_1);\r\n&gt; comit1 = view.findViewById(R.id.comit1);  \r\n\r\n&gt; setonclick...\r\n&gt; team1_1.setText(team1_1.getText().toString()); team1_1.setEnabled(false);\r\n\r\nPlease help me as soon as possible","title":"My .settext in one fragment dont save after changing the fragment an then go back","body":"<p>Im am working with two fragment an replacing them by pressing a button. In one of them i having a edittext which on i change with .settext and make it not editable with . setEnabled(false). Now i the Problem wenn i go the other fragment an then back it dont save.</p>\n<blockquote>\n<p>team1_1 = view.findViewById(R.id.team1_1);\ncomit1 = view.findViewById(R.id.comit1);</p>\n</blockquote>\n<blockquote>\n<p>setonclick...\nteam1_1.setText(team1_1.getText().toString()); team1_1.setEnabled(false);</p>\n</blockquote>\n<p>Please help me as soon as possible</p>\n"},{"tags":["java","spring-boot","jpa","jwt","many-to-many"],"owner":{"account_id":27178762,"reputation":11,"user_id":20714359,"display_name":"paulo cesar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":71,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1679509533,"creation_date":1679509533,"question_id":75816003,"body_markdown":"I followed this example to the letter :[link](https://roytuts.com/angular-spring-boot-security-jwt-authentication-and-authorization/) but I&#39;m getting this pile of errors .I already tried to change the name of the mapping many to many changing the name of the table but without success \r\nUser signup at endpoint /signup with username, password and role(s).\r\nThe user information is stored into database.\r\nUser receives JWT (JSON Web Token) on successful signin using the same username/password at step 1.\r\nUser continues to access the endpoints for which user has role(s) as long as the token is valid. User must send JWT in HTTP header with key/value as Authorization/Bearer &lt;generated JWT on signin&gt;.\r\n\r\n    \r\n```\r\n 2023-03-22 14:16:00.722  INFO 12260 --- [main] SQL dialect                                      HHH000400: Using dialect: org.hibernate.dialect.PostgreSQLDialect\r\n    2023-03-22 14:16:02.129 ERROR 12260 --- [           main]          j.LocalContainerEntityManagerFactoryBean : Failed to initialize JPA EntityManagerFactory: mappedBy  reference an unknown target entity property: com.xxxxxxxxxxxxxxxxx.entity.integracao.UsersRole.users in com.xxxxxxxxxxxxxxxxxxxxxxx.entity.integracao.Users.usersRoles\r\n    2023-03-22 14:16:02.142 ERROR 12260 --- [           main]  o.s.b.web.embedded.tomcat.TomcatStarter        Error starting Tomcat context. Exception: org.springframework.beans.factory.UnsatisfiedDependencyException. Message: Error creating bean with name &#39;apiSecurityConfig&#39;: Unsatisfied dependency expressed through method &#39;setContentNegotationStrategy&#39; parameter 0; nested exception is  org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;org.springframework.boot.autoconfigure.web.servlet.WebMvcAutoConfiguration$EnableWebMvcConfiguration&#39;: Unsatisfied dependency expressed through method &#39;setConfigurers&#39; parameter 0; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;openEntityManagerInViewInterceptorConfigurer&#39; defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/JpaBaseConfiguration$JpaWebConfiguration.class]: Unsatisfied dependency expressed through method &#39;openEntityManagerInViewInterceptorConfigurer&#39; parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;openEntityManagerInViewInterceptor&#39; defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/JpaBaseConfiguration$JpaWebConfiguration.class]: Initialization of bean failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;integracaoEntityManager&#39; defined in class path resource [com/AhrBrasil/DashBoardBackend/config/integracao/IntegracaoDbConfig.class]: Invocation of init method failed; nested exception is org.hibernate.AnnotationException: mappedBy reference an unknown target entity property: com.xxxxxxxxxxxxxxxxxx.entity.integracao.UsersRole.users in com.xxxxxxxxxxxxxxxxxxxxxxxxxxx.entity.integracao.Users.usersRoles\r\n    2023-03-22 14:16:03.639  INFO 12260 --- [           main] o.apache.catalina.core.StandardService     : Stopping service [Tomcat]\r\n    2023-03-22 14:16:03.732  WARN 12260 --- [           main] o.a.c.loader.WebappClassLoaderBase       : The web application [ROOT] appears to have started a thread named [HikariPool-1 housekeeper] but  has failed to stop it. This is very likely to create a memory leak. Stack trace of thread:\r\n    java.base@17.0.5/jdk.internal.misc.Unsafe.park(Native Method)\r\n    java.base@17.0.5/java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:252)\r\n     java.base@17.0.5/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(Ab stractQueuedSynchronizer.java:1672)\r\n    java.base@17.0.5/java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThr  eadPoolExecutor.java:1182)\r\n  java.base@17.0.5/java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThr eadPoolExecutor.java:899)\r\n java.base@17.0.5/java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1062)\r\n java.base@17.0.5/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1122)\r\n java.base@17.0.5/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)\r\n java.base@17.0.5/java.lang.Thread.run(Thread.java:833)\r\n      2023-03-22 14:16:03.734  WARN 12260 --- [           main] o.a.c.loader.WebappClassLoaderBase               The web application [ROOT] appears to have started a thread named [HikariPool-1 connection      adder] but has failed to stop it. This is very likely to create a memory leak. Stack trace of     thread:\r\n java.base@17.0.5/sun.nio.ch.SocketDispatcher.read0(Native Method)\r\n java.base@17.0.5/sun.nio.ch.SocketDispatcher.read(SocketDispatcher.java:46)\r\n java.base@17.0.5/sun.nio.ch.NioSocketImpl.tryRead(NioSocketImpl.java:261)\r\n java.base@17.0.5/sun.nio.ch.NioSocketImpl.implRead(NioSocketImpl.java:312)\r\n java.base@17.0.5/sun.nio.ch.NioSocketImpl.read(NioSocketImpl.java:350)\r\n java.base@17.0.5/sun.nio.ch.NioSocketImpl$1.read(NioSocketImpl.java:803)\r\n java.base@17.0.5/java.net.Socket$SocketInputStream.read(Socket.java:966)\r\n        app//org.postgresql.core.VisibleBufferedInputStream.readMore(VisibleBufferedInputStream.java:161)\r\n    app//org.postgresql.core.VisibleBufferedInputStream.ensureBytes(VisibleBufferedInputStream.java:128)\r\n app//org.postgresql.core.VisibleBufferedInputStream.ensureBytes(VisibleBufferedInputStream.java:113)\r\n app//org.postgresql.core.VisibleBufferedInputStream.read(VisibleBufferedInputStream.java:73)\r\n app//org.postgresql.core.PGStream.receiveChar(PGStream.java:453)\r\n app//org.postgresql.core.v3.ConnectionFactoryImpl.enableSSL(ConnectionFactoryImpl.java:542)\r\n app//org.postgresql.core.v3.ConnectionFactoryImpl.tryConnect(ConnectionFactoryImpl.java:168)\r\n   app//org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:235)\r\n app//org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:49)\r\n app//org.postgresql.jdbc.PgConnection.&lt;init&gt;(PgConnection.java:223)\r\n app//org.postgresql.Driver.makeConnection(Driver.java:402)\r\n app//org.postgresql.Driver.connect(Driver.java:261)\r\n app//com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:138)\r\n app//com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:364)\r\n app//com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:206)\r\n app//com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:476)\r\n app//com.zaxxer.hikari.pool.HikariPool.access$100(HikariPool.java:71)\r\n app//com.zaxxer.hikari.pool.HikariPool$PoolEntryCreator.call(HikariPool.java:726)\r\n app//com.zaxxer.hikari.pool.HikariPool$PoolEntryCreator.call(HikariPool.java:712)\r\n java.base@17.0.5/java.util.concurrent.FutureTask.run(FutureTask.java:264)\r\n java.base@17.0.5/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)\r\n java.base@17.0.5/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)\r\n java.base@17.0.5/java.lang.Thread.run(Thread.java:833)\r\n2023-03-22 14:16:03.786  WARN 12260 --- [                      : Application run failed\r\n\r\n    org.springframework.context.ApplicationContextException: Unable to start web server; nested   exception is org.springframework.boot.web.server.WebServerException: Unable to start embedded Tomcat\r\n\tat Initialization of bean failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;integracaoEntityManager&#39; defined in class path resource [com/AhrBrasil/DashBoardBackend/config/integracao/IntegracaoDbConfig.class]: Invocation of init method failed; nested exception is org.hibernate.AnnotationException: mappedBy reference an unknown target entity property: com.xxxxxxxxxxxxxxxxxxxxxxxx.entity.integracao.UsersRole.users in com.xxxxxxxxxxxxxxxxxxxxxxxxxxxx.entity.integracao.Users.usersRoles\r\norg.springframework.boot.web.embedded.tomcat.TomcatWebServer.initialize(TomcatWebServer.java:123) ~[spring-boot-2.6.14.jar:2.6.14]\r\n\t... 13 common frames omitted\r\n     Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating  bean with name &#39;org.springframework.boot.autoconfigure.web.servlet.WebMvcAutoConfiguration$EnableWebMvcConfiguration&#39;: Unsatisfied dependency expressed through method &#39;setConfigurers&#39; parameter 0; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;openEntityManagerInViewInterceptorConfigurer&#39; defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/JpaBaseConfiguration$JpaWebConfiguration.class]: Unsatisfied dependency expressed through method &#39;openEntityManagerInViewInterceptorConfigurer&#39; parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;openEntityManagerInViewInterceptor&#39; defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/JpaBaseConfiguration$JpaWebConfiguration.class]: Initialization of bean failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;integracaoEntityManager&#39; defined in class path resource [com/AhrBrasil/DashBoardBackend/config/integracao/IntegracaoDbConfig.class]: Invocation of init method failed; nested exception is org.hibernate.AnnotationException: mappedBy reference an unknown target entity property: com.xxxxxxxxxxxxxxxxxxx.entity.integracao.UsersRole.users in com.xxxxxxxxxxxxxxxxxx.entity.integracao.Users.usersRoles\r\n\tat  org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.resolveMethodArguments(AutowiredAnnotationBeanPostProcessor.java:768) ~[spring-beans-5.3.24.jar:5.3.24]\r\n\tat  org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.inject(AutowiredAnnotationBeanPostProcessor.java:720) ~[spring-beans-5.3.24.jar:5.3.24]\r\n\tat  org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:119) ~[spring-beans-5.3.24.jar:5.3.24]\r\n\tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:399) ~[spring-beans-5.3.24.jar:5.3.24]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1431) ~[spring-beans-5.3.24.jar:5.3.24]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:619) ~[spring-beans-5.3.24.jar:5.3.24]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.24.jar:5.3.24]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.24.jar:5.3.24]\r\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.24.jar:5.3.24]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.24.jar:5.3.24]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.24.jar:5.3.24]\r\n\tat org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:410) ~[spring-beans-5.3.24.jar:5.3.24]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1352) ~[spring-beans-5.3.24.jar:5.3.24]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1195) ~[spring-beans-5.3.24.jar:5.3.24]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582) ~[spring-beans-5.3.24.jar:5.3.24]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.24.jar:5.3.24]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.24.jar:5.3.24]\r\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.24.jar:5.3.24]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.24.jar:5.3.24]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.24.jar:5.3.24]\r\n\tat org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:276) ~[spring-beans-5.3.24.jar:5.3.24]\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1391) ~[spring-beans-5.3.24.jar:5.3.24]\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1311) ~[spring-beans-5.3.24.jar:5.3.24]\r\n\tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.resolveMethodArguments(AutowiredAnnotationBeanPostProcessor.java:760) ~[spring-beans-5.3.24.jar:5.3.24]\r\n\t... 63 common frames omitted\r\n      Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating    bean with name &#39;openEntityManagerInViewInterceptorConfigurer&#39; defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/JpaBaseConfiguration$JpaWebConfiguration.class]: Unsatisfied dependency expressed through method &#39;openEntityManagerInViewInterceptorConfigurer&#39; parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;openEntityManagerInViewInterceptor&#39; defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/JpaBaseConfiguration$JpaWebConfiguration.class]: Initialization of bean failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;integracaoEntityManager&#39; defined in class path resource [com/AhrBrasil/DashBoardBackend/config/integracao/IntegracaoDbConfig.class]: Invocation of init method failed; nested exception is org.hibernate.AnnotationException: mappedBy reference an unknown target entity property: com.xxxxxxxxxxxxxxxxxxxx.entity.integracao.UsersRole.users in com.xxxxxxxxxxxxxxxxxxxxx.entity.integracao.Users.usersRoles\r\n\tat  \r\n\tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.resolveMethodArguments(AutowiredAnnotationBeanPostProcessor.java:760) ~[spring-beans-5.3.24.jar:5.3.24]\r\n\t... 86 common frames omitted\r\n    Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with  name &#39;openEntityManagerInViewInterceptor&#39; defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/JpaBaseConfiguration$JpaWebConfiguration.class]: Initialization of bean failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;integracaoEntityManager&#39; defined in class path resource [com/AhrBrasil/DashBoardBackend/config/integracao/IntegracaoDbConfig.class]: Invocation of init method failed; nested exception is org.hibernate.AnnotationException: mappedBy reference an unknown target entity property: com.xxxxxxxxxxxxxxxxxxxx.entity.integracao.UsersRole.users in com.xxxxxxxxxxxxxxxxxxxxxx.entity.integracao.Users.usersRoles\r\n\t  at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:628) ~[spring-beans-5.3.24.jar:5.3.24]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.24.jar:5.3.24]\r\n\t  at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.24.jar:5.3.24]\r\n\t  at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.24.jar:5.3.24]\r\n\t  at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.24.jar:5.3.24]\r\n\t  at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.24.jar:5.3.24]\r\n\t  at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:276) ~[spring-beans-5.3.24.jar:5.3.24]\r\n\t  at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1391) ~[spring-beans-5.3.24.jar:5.3.24]\r\n\t  at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1311) ~[spring-beans-5.3.24.jar:5.3.24]\r\n\t  at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:887) ~[spring-beans-5.3.24.jar:5.3.24]\r\n\t  at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791) ~[spring-beans-5.3.24.jar:5.3.24]\r\n\t... 102 common frames omitted\r\n       Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with  name &#39;integracaoEntityManager&#39; defined in class path resource [com/AhrBrasil/DashBoardBackend/config/integracao/IntegracaoDbConfig.class]: Invocation of init method failed; nested exception is org.hibernate.AnnotationException: mappedBy reference an unknown target entity property: com.xxxxxxxxxxxxxxxxxxxxxxxxxx.entity.integracao.UsersRole.users in com.xxxxxxxxxxxxxxxxxxxx.entity.integracao.Users.usersRoles\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1804) ~[spring-beans-5.3.24.jar:5.3.24]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:620) ~[spring-beans-5.3.24.jar:5.3.24]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.24.jar:5.3.24]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.24.jar:5.3.24]\r\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.24.jar:5.3.24]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.24.jar:5.3.24]\r\n\t  at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:233) ~[spring-beans-5.3.24.jar:5.3.24]\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveNamedBean(DefaultListableBeanFactory.java:1284) ~[spring-beans-5.3.24.jar:5.3.24]\r\n\t  at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveNamedBean(DefaultListableBeanFactory.java:1268) ~[spring-beans-5.3.24.jar:5.3.24]\r\n\t  at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveBean(DefaultListableBeanFactory.java:494) ~[spring-beans-5.3.24.jar:5.3.24]\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.getBean(DefaultListableBeanFactory.java:349) ~[spring-beans-5.3.24.jar:5.3.24]\r\n\t  at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBean(DefaultListableBeanFactory.java:342) ~[spring-beans-5.3.24.jar:5.3.24]\r\n\t  at org.springframework.orm.jpa.EntityManagerFactoryUtils.findEntityManagerFactory(EntityManagerFactoryUtils.java:121) ~[spring-orm-5.3.24.jar:5.3.24]\r\n\t  at org.springframework.orm.jpa.EntityManagerFactoryAccessor.setBeanFactory(EntityManagerFactoryAccessor.java:155) ~[spring-orm-5.3.24.jar:5.3.24]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeAwareMethods(AbstractAutowireCapableBeanFactory.java:1826) ~[spring-beans-5.3.24.jar:5.3.24]\r\n\t  at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1791) ~[spring-beans-5.3.24.jar:5.3.24]\r\n\t   at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:620) ~[spring-beans-5.3.24.jar:5.3.24]\r\n\t... 112 common frames omitted\r\n      Caused by: org.hibernate.AnnotationException: mappedBy reference an unknown target entity  property: com.xxxxxxxxxxxxxxxxxxxxxxxx.entity.integracao.UsersRole.users in com.xxxxxxxxxxxxxxxxxxxxxxxxxxxx.entity.integracao.Users.usersRoles\r\n\t    at org.hibernate.cfg.annotations.CollectionBinder.bindStarToManySecondPass(CollectionBinder.java:818) ~[hibernate-core-6.0.0.Alpha9.jar:6.0.0.Alpha9]\r\n\t    at org.hibernate.cfg.annotations.CollectionBinder$1.secondPass(CollectionBinder.java:769) ~[hibernate-core-6.0.0.Alpha9.jar:6.0.0.Alpha9]\r\n\r\n \t at     org.hibernate.boot.internal.InFlightMetadataCollectorImpl.processSecondPasses(InFlightMetadataCollectorImpl.java:1752) ~[hibernate-core-6.0.0.Alpha9.jar:6.0.0.Alpha9]\r\n\tat   org.hibernate.boot.internal.InFlightMetadataCollectorImpl.processSecondPasses(InFlightMetadataCollectorImpl.java:1701) ~[hibernate-core-6.0.0.Alpha9.jar:6.0.0.Alpha9]\r\n\tat org.hibernate.boot.model.process.spi.MetadataBuildingProcess.complete(MetadataBuildingProcess.java:294) ~[hibernate-core-6.0.0.Alpha9.jar:6.0.0.Alpha9]\r\n\tat org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.metadata(EntityManagerFactoryBuilderImpl.java:1345) ~[hibernate-core-6.0.0.Alpha9.jar:6.0.0.Alpha9]\r\n\tat org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1416) ~[hibernate-core-6.0.0.Alpha9.jar:6.0.0.Alpha9]\r\n\tat org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:58) ~[spring-orm-5.3.24.jar:5.3.24]\r\n\tat org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:365) ~[spring-orm-5.3.24.jar:5.3.24]\r\n\tat org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409) ~[spring-orm-5.3.24.jar:5.3.24]\r\n\tat org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396) ~[spring-orm-5.3.24.jar:5.3.24]\r\n\tat org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:341) ~[spring-orm-5.3.24.jar:5.3.24]\r\n\torg.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1863) ~[spring-beans-5.3.24.jar:5.3.24]\r\n\t org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1800) ~[spring-beans-5.3.24.jar:5.3.24]\r\n\t... 128 common frames omitted\r\n\r\n```\r\n\r\n  \r\n\r\n   ","title":"mappedBy reference an unknown target entity property java.base@17.0.5/jdk.internal.misc.Unsafe.park(Native Method)","body":"<p>I followed this example to the letter :<a href=\"https://roytuts.com/angular-spring-boot-security-jwt-authentication-and-authorization/\" rel=\"nofollow noreferrer\">link</a> but I'm getting this pile of errors .I already tried to change the name of the mapping many to many changing the name of the table but without success\nUser signup at endpoint /signup with username, password and role(s).\nThe user information is stored into database.\nUser receives JWT (JSON Web Token) on successful signin using the same username/password at step 1.\nUser continues to access the endpoints for which user has role(s) as long as the token is valid. User must send JWT in HTTP header with key/value as Authorization/Bearer .</p>\n<pre><code> 2023-03-22 14:16:00.722  INFO 12260 --- [main] SQL dialect                                      HHH000400: Using dialect: org.hibernate.dialect.PostgreSQLDialect\n    2023-03-22 14:16:02.129 ERROR 12260 --- [           main]          j.LocalContainerEntityManagerFactoryBean : Failed to initialize JPA EntityManagerFactory: mappedBy  reference an unknown target entity property: com.xxxxxxxxxxxxxxxxx.entity.integracao.UsersRole.users in com.xxxxxxxxxxxxxxxxxxxxxxx.entity.integracao.Users.usersRoles\n    2023-03-22 14:16:02.142 ERROR 12260 --- [           main]  o.s.b.web.embedded.tomcat.TomcatStarter        Error starting Tomcat context. Exception: org.springframework.beans.factory.UnsatisfiedDependencyException. Message: Error creating bean with name 'apiSecurityConfig': Unsatisfied dependency expressed through method 'setContentNegotationStrategy' parameter 0; nested exception is  org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'org.springframework.boot.autoconfigure.web.servlet.WebMvcAutoConfiguration$EnableWebMvcConfiguration': Unsatisfied dependency expressed through method 'setConfigurers' parameter 0; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'openEntityManagerInViewInterceptorConfigurer' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/JpaBaseConfiguration$JpaWebConfiguration.class]: Unsatisfied dependency expressed through method 'openEntityManagerInViewInterceptorConfigurer' parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'openEntityManagerInViewInterceptor' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/JpaBaseConfiguration$JpaWebConfiguration.class]: Initialization of bean failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'integracaoEntityManager' defined in class path resource [com/AhrBrasil/DashBoardBackend/config/integracao/IntegracaoDbConfig.class]: Invocation of init method failed; nested exception is org.hibernate.AnnotationException: mappedBy reference an unknown target entity property: com.xxxxxxxxxxxxxxxxxx.entity.integracao.UsersRole.users in com.xxxxxxxxxxxxxxxxxxxxxxxxxxx.entity.integracao.Users.usersRoles\n    2023-03-22 14:16:03.639  INFO 12260 --- [           main] o.apache.catalina.core.StandardService     : Stopping service [Tomcat]\n    2023-03-22 14:16:03.732  WARN 12260 --- [           main] o.a.c.loader.WebappClassLoaderBase       : The web application [ROOT] appears to have started a thread named [HikariPool-1 housekeeper] but  has failed to stop it. This is very likely to create a memory leak. Stack trace of thread:\n    java.base@17.0.5/jdk.internal.misc.Unsafe.park(Native Method)\n    java.base@17.0.5/java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:252)\n     java.base@17.0.5/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(Ab stractQueuedSynchronizer.java:1672)\n    java.base@17.0.5/java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThr  eadPoolExecutor.java:1182)\n  java.base@17.0.5/java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThr eadPoolExecutor.java:899)\n java.base@17.0.5/java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1062)\n java.base@17.0.5/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1122)\n java.base@17.0.5/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)\n java.base@17.0.5/java.lang.Thread.run(Thread.java:833)\n      2023-03-22 14:16:03.734  WARN 12260 --- [           main] o.a.c.loader.WebappClassLoaderBase               The web application [ROOT] appears to have started a thread named [HikariPool-1 connection      adder] but has failed to stop it. This is very likely to create a memory leak. Stack trace of     thread:\n java.base@17.0.5/sun.nio.ch.SocketDispatcher.read0(Native Method)\n java.base@17.0.5/sun.nio.ch.SocketDispatcher.read(SocketDispatcher.java:46)\n java.base@17.0.5/sun.nio.ch.NioSocketImpl.tryRead(NioSocketImpl.java:261)\n java.base@17.0.5/sun.nio.ch.NioSocketImpl.implRead(NioSocketImpl.java:312)\n java.base@17.0.5/sun.nio.ch.NioSocketImpl.read(NioSocketImpl.java:350)\n java.base@17.0.5/sun.nio.ch.NioSocketImpl$1.read(NioSocketImpl.java:803)\n java.base@17.0.5/java.net.Socket$SocketInputStream.read(Socket.java:966)\n        app//org.postgresql.core.VisibleBufferedInputStream.readMore(VisibleBufferedInputStream.java:161)\n    app//org.postgresql.core.VisibleBufferedInputStream.ensureBytes(VisibleBufferedInputStream.java:128)\n app//org.postgresql.core.VisibleBufferedInputStream.ensureBytes(VisibleBufferedInputStream.java:113)\n app//org.postgresql.core.VisibleBufferedInputStream.read(VisibleBufferedInputStream.java:73)\n app//org.postgresql.core.PGStream.receiveChar(PGStream.java:453)\n app//org.postgresql.core.v3.ConnectionFactoryImpl.enableSSL(ConnectionFactoryImpl.java:542)\n app//org.postgresql.core.v3.ConnectionFactoryImpl.tryConnect(ConnectionFactoryImpl.java:168)\n   app//org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:235)\n app//org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:49)\n app//org.postgresql.jdbc.PgConnection.&lt;init&gt;(PgConnection.java:223)\n app//org.postgresql.Driver.makeConnection(Driver.java:402)\n app//org.postgresql.Driver.connect(Driver.java:261)\n app//com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:138)\n app//com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:364)\n app//com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:206)\n app//com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:476)\n app//com.zaxxer.hikari.pool.HikariPool.access$100(HikariPool.java:71)\n app//com.zaxxer.hikari.pool.HikariPool$PoolEntryCreator.call(HikariPool.java:726)\n app//com.zaxxer.hikari.pool.HikariPool$PoolEntryCreator.call(HikariPool.java:712)\n java.base@17.0.5/java.util.concurrent.FutureTask.run(FutureTask.java:264)\n java.base@17.0.5/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)\n java.base@17.0.5/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)\n java.base@17.0.5/java.lang.Thread.run(Thread.java:833)\n2023-03-22 14:16:03.786  WARN 12260 --- [                      : Application run failed\n\n    org.springframework.context.ApplicationContextException: Unable to start web server; nested   exception is org.springframework.boot.web.server.WebServerException: Unable to start embedded Tomcat\n    at Initialization of bean failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'integracaoEntityManager' defined in class path resource [com/AhrBrasil/DashBoardBackend/config/integracao/IntegracaoDbConfig.class]: Invocation of init method failed; nested exception is org.hibernate.AnnotationException: mappedBy reference an unknown target entity property: com.xxxxxxxxxxxxxxxxxxxxxxxx.entity.integracao.UsersRole.users in com.xxxxxxxxxxxxxxxxxxxxxxxxxxxx.entity.integracao.Users.usersRoles\norg.springframework.boot.web.embedded.tomcat.TomcatWebServer.initialize(TomcatWebServer.java:123) ~[spring-boot-2.6.14.jar:2.6.14]\n    ... 13 common frames omitted\n     Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating  bean with name 'org.springframework.boot.autoconfigure.web.servlet.WebMvcAutoConfiguration$EnableWebMvcConfiguration': Unsatisfied dependency expressed through method 'setConfigurers' parameter 0; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'openEntityManagerInViewInterceptorConfigurer' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/JpaBaseConfiguration$JpaWebConfiguration.class]: Unsatisfied dependency expressed through method 'openEntityManagerInViewInterceptorConfigurer' parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'openEntityManagerInViewInterceptor' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/JpaBaseConfiguration$JpaWebConfiguration.class]: Initialization of bean failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'integracaoEntityManager' defined in class path resource [com/AhrBrasil/DashBoardBackend/config/integracao/IntegracaoDbConfig.class]: Invocation of init method failed; nested exception is org.hibernate.AnnotationException: mappedBy reference an unknown target entity property: com.xxxxxxxxxxxxxxxxxxx.entity.integracao.UsersRole.users in com.xxxxxxxxxxxxxxxxxx.entity.integracao.Users.usersRoles\n    at  org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.resolveMethodArguments(AutowiredAnnotationBeanPostProcessor.java:768) ~[spring-beans-5.3.24.jar:5.3.24]\n    at  org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.inject(AutowiredAnnotationBeanPostProcessor.java:720) ~[spring-beans-5.3.24.jar:5.3.24]\n    at  org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:119) ~[spring-beans-5.3.24.jar:5.3.24]\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:399) ~[spring-beans-5.3.24.jar:5.3.24]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1431) ~[spring-beans-5.3.24.jar:5.3.24]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:619) ~[spring-beans-5.3.24.jar:5.3.24]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.24.jar:5.3.24]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.24.jar:5.3.24]\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.24.jar:5.3.24]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.24.jar:5.3.24]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.24.jar:5.3.24]\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:410) ~[spring-beans-5.3.24.jar:5.3.24]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1352) ~[spring-beans-5.3.24.jar:5.3.24]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1195) ~[spring-beans-5.3.24.jar:5.3.24]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582) ~[spring-beans-5.3.24.jar:5.3.24]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.24.jar:5.3.24]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.24.jar:5.3.24]\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.24.jar:5.3.24]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.24.jar:5.3.24]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.24.jar:5.3.24]\n    at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:276) ~[spring-beans-5.3.24.jar:5.3.24]\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1391) ~[spring-beans-5.3.24.jar:5.3.24]\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1311) ~[spring-beans-5.3.24.jar:5.3.24]\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.resolveMethodArguments(AutowiredAnnotationBeanPostProcessor.java:760) ~[spring-beans-5.3.24.jar:5.3.24]\n    ... 63 common frames omitted\n      Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating    bean with name 'openEntityManagerInViewInterceptorConfigurer' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/JpaBaseConfiguration$JpaWebConfiguration.class]: Unsatisfied dependency expressed through method 'openEntityManagerInViewInterceptorConfigurer' parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'openEntityManagerInViewInterceptor' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/JpaBaseConfiguration$JpaWebConfiguration.class]: Initialization of bean failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'integracaoEntityManager' defined in class path resource [com/AhrBrasil/DashBoardBackend/config/integracao/IntegracaoDbConfig.class]: Invocation of init method failed; nested exception is org.hibernate.AnnotationException: mappedBy reference an unknown target entity property: com.xxxxxxxxxxxxxxxxxxxx.entity.integracao.UsersRole.users in com.xxxxxxxxxxxxxxxxxxxxx.entity.integracao.Users.usersRoles\n    at  \n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.resolveMethodArguments(AutowiredAnnotationBeanPostProcessor.java:760) ~[spring-beans-5.3.24.jar:5.3.24]\n    ... 86 common frames omitted\n    Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with  name 'openEntityManagerInViewInterceptor' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/JpaBaseConfiguration$JpaWebConfiguration.class]: Initialization of bean failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'integracaoEntityManager' defined in class path resource [com/AhrBrasil/DashBoardBackend/config/integracao/IntegracaoDbConfig.class]: Invocation of init method failed; nested exception is org.hibernate.AnnotationException: mappedBy reference an unknown target entity property: com.xxxxxxxxxxxxxxxxxxxx.entity.integracao.UsersRole.users in com.xxxxxxxxxxxxxxxxxxxxxx.entity.integracao.Users.usersRoles\n      at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:628) ~[spring-beans-5.3.24.jar:5.3.24]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.24.jar:5.3.24]\n      at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.24.jar:5.3.24]\n      at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.24.jar:5.3.24]\n      at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.24.jar:5.3.24]\n      at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.24.jar:5.3.24]\n      at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:276) ~[spring-beans-5.3.24.jar:5.3.24]\n      at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1391) ~[spring-beans-5.3.24.jar:5.3.24]\n      at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1311) ~[spring-beans-5.3.24.jar:5.3.24]\n      at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:887) ~[spring-beans-5.3.24.jar:5.3.24]\n      at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791) ~[spring-beans-5.3.24.jar:5.3.24]\n    ... 102 common frames omitted\n       Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with  name 'integracaoEntityManager' defined in class path resource [com/AhrBrasil/DashBoardBackend/config/integracao/IntegracaoDbConfig.class]: Invocation of init method failed; nested exception is org.hibernate.AnnotationException: mappedBy reference an unknown target entity property: com.xxxxxxxxxxxxxxxxxxxxxxxxxx.entity.integracao.UsersRole.users in com.xxxxxxxxxxxxxxxxxxxx.entity.integracao.Users.usersRoles\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1804) ~[spring-beans-5.3.24.jar:5.3.24]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:620) ~[spring-beans-5.3.24.jar:5.3.24]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.24.jar:5.3.24]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.24.jar:5.3.24]\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.24.jar:5.3.24]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.24.jar:5.3.24]\n      at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:233) ~[spring-beans-5.3.24.jar:5.3.24]\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveNamedBean(DefaultListableBeanFactory.java:1284) ~[spring-beans-5.3.24.jar:5.3.24]\n      at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveNamedBean(DefaultListableBeanFactory.java:1268) ~[spring-beans-5.3.24.jar:5.3.24]\n      at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveBean(DefaultListableBeanFactory.java:494) ~[spring-beans-5.3.24.jar:5.3.24]\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBean(DefaultListableBeanFactory.java:349) ~[spring-beans-5.3.24.jar:5.3.24]\n      at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBean(DefaultListableBeanFactory.java:342) ~[spring-beans-5.3.24.jar:5.3.24]\n      at org.springframework.orm.jpa.EntityManagerFactoryUtils.findEntityManagerFactory(EntityManagerFactoryUtils.java:121) ~[spring-orm-5.3.24.jar:5.3.24]\n      at org.springframework.orm.jpa.EntityManagerFactoryAccessor.setBeanFactory(EntityManagerFactoryAccessor.java:155) ~[spring-orm-5.3.24.jar:5.3.24]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeAwareMethods(AbstractAutowireCapableBeanFactory.java:1826) ~[spring-beans-5.3.24.jar:5.3.24]\n      at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1791) ~[spring-beans-5.3.24.jar:5.3.24]\n       at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:620) ~[spring-beans-5.3.24.jar:5.3.24]\n    ... 112 common frames omitted\n      Caused by: org.hibernate.AnnotationException: mappedBy reference an unknown target entity  property: com.xxxxxxxxxxxxxxxxxxxxxxxx.entity.integracao.UsersRole.users in com.xxxxxxxxxxxxxxxxxxxxxxxxxxxx.entity.integracao.Users.usersRoles\n        at org.hibernate.cfg.annotations.CollectionBinder.bindStarToManySecondPass(CollectionBinder.java:818) ~[hibernate-core-6.0.0.Alpha9.jar:6.0.0.Alpha9]\n        at org.hibernate.cfg.annotations.CollectionBinder$1.secondPass(CollectionBinder.java:769) ~[hibernate-core-6.0.0.Alpha9.jar:6.0.0.Alpha9]\n\n     at     org.hibernate.boot.internal.InFlightMetadataCollectorImpl.processSecondPasses(InFlightMetadataCollectorImpl.java:1752) ~[hibernate-core-6.0.0.Alpha9.jar:6.0.0.Alpha9]\n    at   org.hibernate.boot.internal.InFlightMetadataCollectorImpl.processSecondPasses(InFlightMetadataCollectorImpl.java:1701) ~[hibernate-core-6.0.0.Alpha9.jar:6.0.0.Alpha9]\n    at org.hibernate.boot.model.process.spi.MetadataBuildingProcess.complete(MetadataBuildingProcess.java:294) ~[hibernate-core-6.0.0.Alpha9.jar:6.0.0.Alpha9]\n    at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.metadata(EntityManagerFactoryBuilderImpl.java:1345) ~[hibernate-core-6.0.0.Alpha9.jar:6.0.0.Alpha9]\n    at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1416) ~[hibernate-core-6.0.0.Alpha9.jar:6.0.0.Alpha9]\n    at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:58) ~[spring-orm-5.3.24.jar:5.3.24]\n    at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:365) ~[spring-orm-5.3.24.jar:5.3.24]\n    at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409) ~[spring-orm-5.3.24.jar:5.3.24]\n    at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396) ~[spring-orm-5.3.24.jar:5.3.24]\n    at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:341) ~[spring-orm-5.3.24.jar:5.3.24]\n    org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1863) ~[spring-beans-5.3.24.jar:5.3.24]\n     org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1800) ~[spring-beans-5.3.24.jar:5.3.24]\n    ... 128 common frames omitted\n\n</code></pre>\n"},{"tags":["java","encryption","javax.crypto"],"comments":[{"owner":{"account_id":288696,"reputation":91230,"user_id":589259,"accept_rate":82,"display_name":"Maarten Bodewes"},"score":0,"creation_date":1679468659,"post_id":75809131,"comment_id":133725543,"body_markdown":"There are many things wrong here. First, the output of the cipher (i.e. after *encryption*) should be a multiple of the block size, so the input is incorrect. I don&#39;t know how PHP manages to decrypt that. OpenSSL uses PKCS#7 padding by default (incorrectly called `&quot;PKCS5Padding&quot;` by Java). I don&#39;t see any of the hash calculations over the IV. I don&#39;t know why you are base 64 encoding the result either.","body":"There are many things wrong here. First, the output of the cipher (i.e. after <i>encryption</i>) should be a multiple of the block size, so the input is incorrect. I don&#39;t know how PHP manages to decrypt that. OpenSSL uses PKCS#7 padding by default (incorrectly called <code>&quot;PKCS5Padding&quot;</code> by Java). I don&#39;t see any of the hash calculations over the IV. I don&#39;t know why you are base 64 encoding the result either."},{"owner":{"account_id":22107235,"reputation":5,"user_id":16362635,"display_name":"Mohamed E."},"score":0,"creation_date":1679469324,"post_id":75809131,"comment_id":133725660,"body_markdown":"The PHP code is not code I wrote. It was an example given to me so that I can implement decryption is Java.\n\nJust to clarify, you are saying that the input (i.e. &#39;bnY0UEc2NFcySHgwRTIyNFU1NU5pUT09&#39;) is incorrect? That input is 32 characters long so it should be fine. The output is what is confusing me, 12 characters does not seem like correct length there, unless it was truncated somewhere.\n\nAlso, I think no padding is used in the PHP example. The 0 passed in the fourth parameter of the openssl_decrypt function signifies no padding if I am not mistaken.","body":"The PHP code is not code I wrote. It was an example given to me so that I can implement decryption is Java.  Just to clarify, you are saying that the input (i.e. &#39;bnY0UEc2NFcySHgwRTIyNFU1NU5pUT09&#39;) is incorrect? That input is 32 characters long so it should be fine. The output is what is confusing me, 12 characters does not seem like correct length there, unless it was truncated somewhere.  Also, I think no padding is used in the PHP example. The 0 passed in the fourth parameter of the openssl_decrypt function signifies no padding if I am not mistaken."},{"owner":{"account_id":12359353,"reputation":42427,"user_id":9014097,"display_name":"Topaco"},"score":1,"creation_date":1679469489,"post_id":75809131,"comment_id":133725688,"body_markdown":"The PHP code Base64 decodes twice (implicit by default and explicit): bnY0UEc2NFcySHgwRTIyNFU1NU5pUT09 -&gt; nv4PG64W2Hx0E224U55NiQ== which corresponds to a 16 bytes ciphertext (the double Base64 encoding is unnecessary and inefficient).","body":"The PHP code Base64 decodes twice (implicit by default and explicit): bnY0UEc2NFcySHgwRTIyNFU1NU5pUT09 -&gt; nv4PG64W2Hx0E224U55NiQ== which corresponds to a 16 bytes ciphertext (the double Base64 encoding is unnecessary and inefficient)."},{"owner":{"account_id":22107235,"reputation":5,"user_id":16362635,"display_name":"Mohamed E."},"score":0,"creation_date":1679469892,"post_id":75809131,"comment_id":133725773,"body_markdown":"Not sure about the double encoding. First time it is encoded implicitly then it is decoded not encoded again. I would like to retract my statement in the last comment. After the original cipher (bnY0UEc2NFcySHgwRTIyNFU1NU5pUT09) is base64 decoded it gives an incorrect length of 24 bytes - which is exactly my problem. That won&#39;t work with no padding.","body":"Not sure about the double encoding. First time it is encoded implicitly then it is decoded not encoded again. I would like to retract my statement in the last comment. After the original cipher (bnY0UEc2NFcySHgwRTIyNFU1NU5pUT09) is base64 decoded it gives an incorrect length of 24 bytes - which is exactly my problem. That won&#39;t work with no padding."},{"owner":{"account_id":12359353,"reputation":42427,"user_id":9014097,"display_name":"Topaco"},"score":0,"creation_date":1679470170,"post_id":75809131,"comment_id":133725823,"body_markdown":"*...it gives an incorrect length of 24 bytes - which is exactly my problem...*: The Base64 decoding gives nv4PG64W2Hx0E224U55NiQ==, repeated Base64 decoding results in a 16 bytes value, hex encoded: 9efe0f1bae16d87c74136db8539e4d89. This is the ciphertext to decrypt.","body":"<i>...it gives an incorrect length of 24 bytes - which is exactly my problem...</i>: The Base64 decoding gives nv4PG64W2Hx0E224U55NiQ==, repeated Base64 decoding results in a 16 bytes value, hex encoded: 9efe0f1bae16d87c74136db8539e4d89. This is the ciphertext to decrypt."},{"owner":{"account_id":12359353,"reputation":42427,"user_id":9014097,"display_name":"Topaco"},"score":0,"creation_date":1679470350,"post_id":75809131,"comment_id":133725858,"body_markdown":"Further differences to the Java code: Besides the IV, the PHP code also derives the key via SHA256. Furthermore, the hex encoded values are used as key and IV.","body":"Further differences to the Java code: Besides the IV, the PHP code also derives the key via SHA256. Furthermore, the hex encoded values are used as key and IV."},{"owner":{"account_id":213468,"reputation":103486,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1679472088,"post_id":75809131,"comment_id":133726218,"body_markdown":"Also, don&#39;t do `keyString.substring(0,32).getBytes();`, you should always explicitly specify the character set you want to use to encode the string to bytes.","body":"Also, don&#39;t do <code>keyString.substring(0,32).getBytes();</code>, you should always explicitly specify the character set you want to use to encode the string to bytes."},{"owner":{"account_id":12359353,"reputation":42427,"user_id":9014097,"display_name":"Topaco"},"score":1,"creation_date":1679473360,"post_id":75809131,"comment_id":133726480,"body_markdown":"If the problem persists: Post test data: `$secret_key`, `$secret_iv`, `$encrypted_txt` plus expected plaintext. Also post the `generateSHA256()` implementation.","body":"If the problem persists: Post test data: <code>$secret_key</code>, <code>$secret_iv</code>, <code>$encrypted_txt</code> plus expected plaintext. Also post the <code>generateSHA256()</code> implementation."},{"owner":{"account_id":22107235,"reputation":5,"user_id":16362635,"display_name":"Mohamed E."},"score":0,"creation_date":1679473924,"post_id":75809131,"comment_id":133726618,"body_markdown":"Working on it now, if it persists I&#39;ll post test data. I got the hex encoded value you mentioned above to use as ciphertext (9efe0f1bae16d87c74136db8539e4d89). But struggling to understand what you meant by hex encoding the key and IV? Technically since they are generated using SHA-256, they are already hex encoded I believe. I just convert them to bytes (using StandardCharsets.US_ASCII) and use them that way. Note that the key MUST be 32 bytes in length for me to use AES-256 bit decryption here.\n\nAlso, what about the output? Should that be a base64 encoded string?","body":"Working on it now, if it persists I&#39;ll post test data. I got the hex encoded value you mentioned above to use as ciphertext (9efe0f1bae16d87c74136db8539e4d89). But struggling to understand what you meant by hex encoding the key and IV? Technically since they are generated using SHA-256, they are already hex encoded I believe. I just convert them to bytes (using StandardCharsets.US_ASCII) and use them that way. Note that the key MUST be 32 bytes in length for me to use AES-256 bit decryption here.  Also, what about the output? Should that be a base64 encoded string?"},{"owner":{"account_id":288696,"reputation":91230,"user_id":589259,"accept_rate":82,"display_name":"Maarten Bodewes"},"score":0,"creation_date":1679474641,"post_id":75809131,"comment_id":133726806,"body_markdown":"Not understanding the difference between binary (bits / bytes) and hexadecimals seem to be an issue here. Hexadecimals are the &quot;human readable&quot; / &quot;textual&quot; representation of the bytes. If you have them in a string in your application you should **hex** decode before using them as bytes instead of using character decoding with UTF-8 or whatever.","body":"Not understanding the difference between binary (bits / bytes) and hexadecimals seem to be an issue here. Hexadecimals are the &quot;human readable&quot; / &quot;textual&quot; representation of the bytes. If you have them in a string in your application you should <b>hex</b> decode before using them as bytes instead of using character decoding with UTF-8 or whatever."},{"owner":{"account_id":288696,"reputation":91230,"user_id":589259,"accept_rate":82,"display_name":"Maarten Bodewes"},"score":0,"creation_date":1679475177,"post_id":75809131,"comment_id":133726956,"body_markdown":"From the notes under the underspecified `openssl_decrypt` function: &quot;$data can be as the description says raw or base64. If no $option is set (this is, if value of 0 is passed in this parameter), data will be assumed to be base64 encoded. If parameter OPENSSL_RAW_DATA is set, it will be understood as row data.&quot; So undoubtedly the same base64 default is used instead of raw in the encrypt function as well. Yes, PHP OpenSSL library doesn&#39;t adhere to the principle of least surprise. But so does the entire PHP runtime, all the more reason to switch to e.g. Java.","body":"From the notes under the underspecified <code>openssl_decrypt</code> function: &quot;$data can be as the description says raw or base64. If no $option is set (this is, if value of 0 is passed in this parameter), data will be assumed to be base64 encoded. If parameter OPENSSL_RAW_DATA is set, it will be understood as row data.&quot; So undoubtedly the same base64 default is used instead of raw in the encrypt function as well. Yes, PHP OpenSSL library doesn&#39;t adhere to the principle of least surprise. But so does the entire PHP runtime, all the more reason to switch to e.g. Java."}],"answers":[{"tags":[],"owner":{"account_id":12359353,"reputation":42427,"user_id":9014097,"display_name":"Topaco"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1679509327,"creation_date":1679478503,"answer_id":75810645,"question_id":75809131,"body_markdown":"In the PHP code, key and IV are derived using SHA256, hex encoded, and these values are applied UTF-8 encoded as key and IV. The key is *implicitly* truncated to 32 bytes (by `openssl_decrypt()`) and the IV *explicitly* to 16 bytes. In Java, both truncations must be performed *explicitly*, e.g.:\r\n\r\n```java\r\nprivate static String generateSHA256(String passphrase, int size) throws Exception {\r\n\tbyte[] digest = MessageDigest.getInstance(&quot;SHA256&quot;).digest(passphrase.getBytes(StandardCharsets.UTF_8));\r\n\treturn HexFormat.of().formatHex(digest).substring(0,size); // see regarding the hex encoding for older Java versions e.g. here: https://stackoverflow.com/a/9855338/9014097. Note that for compatibility with the PHP code, the implementation must be changed to apply lowercase hex digits.\r\n}\r\n```\r\n\r\nRemark: The PHP code and the `generateSHA256()` implementation above apply lowercase hex digits. For older Java versions that did not support `HexFormat`, care must be taken that the hex encoding also applies lowercase hex digits (this is in particular true for the hex encoding variants from [here][1]).\r\n\r\n------\r\n\r\nFurthermore, in the PHP code the ciphertext is Base64 decoded twice: implicit by default and explicit. As padding PKCS#7 is applied by default. For a detailed description of the default values related to Base64 and padding, see the [*options*][2] parameter and [*constants*][3].  \r\n\r\nA possible Java implementation is as follows:\r\n\r\n```java\r\npublic static String decryptAES256CBC(String cipherText, String keyString, String ivString) throws Exception {\r\n        \r\n    byte [] keyBytes = keyString.getBytes(StandardCharsets.UTF_8);\r\n    byte [] ivBytes = ivString.getBytes(StandardCharsets.UTF_8);\r\n\r\n    SecretKeySpec key = new SecretKeySpec(keyBytes, &quot;AES&quot;);\r\n    IvParameterSpec iv = new IvParameterSpec(ivBytes);\r\n\r\n    Cipher cipher = Cipher.getInstance(&quot;AES/CBC/PKCS5Padding&quot;); // PKCS#7 padding is called PKCS5 padding in the Java world\r\n    cipher.init(Cipher.DECRYPT_MODE, key, iv);\r\n\r\n    byte [] decodedCipher = java.util.Base64.getDecoder().decode(cipherText);\r\n    byte [] decodedCipher2nd = java.util.Base64.getDecoder().decode(decodedCipher); // 2nd Base64 decoding\r\n    byte[] plainText = cipher.doFinal(decodedCipher2nd);\r\n\r\n    return new String(plainText, StandardCharsets.UTF_8);\r\n}\r\n```\r\n\r\nTest:\r\n\r\n```java\r\nString key = generateSHA256(&quot;secretkey&quot;, 32).substring(0,32);\r\nString iv = generateSHA256(&quot;secretiv&quot;, 16).substring(0,16);\r\nSystem.out.println(decryptAES256CBC(&quot;UTY5b1pGUHYvTW5tL0pJcTVVZktuUT09&quot;, key, iv)); // MXeaSFSUj4az\r\n```\r\n\t\r\nIn accordance with the result of the PHP code.\r\n\r\n-------\r\n\r\nThe PHP code has some vulnerabilities and inefficiencies (even if you can&#39;t change this, it should be noted for future readers):\r\n- For deriving the key, not a fast digest but a key derivation function like Argon2 or at least PBKDF2 should be used.\r\n- The IV should be randomly generated during encryption and passed to the decrypting side (usually concatenated).\r\n- Using the hex encoded value as key reduces security because each byte of 256 possible values are reduced to only 16 values.  \r\nAlso, cross-platform compatibility issues can occur (case sensitivity of the hex digits). \r\n- The double Base64 encoding of the ciphertext is unnecessary and inefficient.\r\n- It looks like the plaintext is Base64 encoded as well. This is not necessary because the algorithms operate on bytes. A base64 encoding only increases the amount of data.\r\n\r\n[1]: https://stackoverflow.com/a/9855338/9014097\r\n[2]: https://www.php.net/manual/en/function.openssl-decrypt.php\r\n[3]: https://www.php.net/manual/en/openssl.constants.other.php","title":"javax.crypto.IllegalBlockSizeException: Input length not multiple of 16 bytes - AES_256/CBC/NoPadding","body":"<p>In the PHP code, key and IV are derived using SHA256, hex encoded, and these values are applied UTF-8 encoded as key and IV. The key is <em>implicitly</em> truncated to 32 bytes (by <code>openssl_decrypt()</code>) and the IV <em>explicitly</em> to 16 bytes. In Java, both truncations must be performed <em>explicitly</em>, e.g.:</p>\n<pre class=\"lang-java prettyprint-override\"><code>private static String generateSHA256(String passphrase, int size) throws Exception {\n    byte[] digest = MessageDigest.getInstance(&quot;SHA256&quot;).digest(passphrase.getBytes(StandardCharsets.UTF_8));\n    return HexFormat.of().formatHex(digest).substring(0,size); // see regarding the hex encoding for older Java versions e.g. here: https://stackoverflow.com/a/9855338/9014097. Note that for compatibility with the PHP code, the implementation must be changed to apply lowercase hex digits.\n}\n</code></pre>\n<p>Remark: The PHP code and the <code>generateSHA256()</code> implementation above apply lowercase hex digits. For older Java versions that did not support <code>HexFormat</code>, care must be taken that the hex encoding also applies lowercase hex digits (this is in particular true for the hex encoding variants from <a href=\"https://stackoverflow.com/a/9855338/9014097\">here</a>).</p>\n<hr />\n<p>Furthermore, in the PHP code the ciphertext is Base64 decoded twice: implicit by default and explicit. As padding PKCS#7 is applied by default. For a detailed description of the default values related to Base64 and padding, see the <a href=\"https://www.php.net/manual/en/function.openssl-decrypt.php\" rel=\"nofollow noreferrer\"><em>options</em></a> parameter and <a href=\"https://www.php.net/manual/en/openssl.constants.other.php\" rel=\"nofollow noreferrer\"><em>constants</em></a>.</p>\n<p>A possible Java implementation is as follows:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static String decryptAES256CBC(String cipherText, String keyString, String ivString) throws Exception {\n        \n    byte [] keyBytes = keyString.getBytes(StandardCharsets.UTF_8);\n    byte [] ivBytes = ivString.getBytes(StandardCharsets.UTF_8);\n\n    SecretKeySpec key = new SecretKeySpec(keyBytes, &quot;AES&quot;);\n    IvParameterSpec iv = new IvParameterSpec(ivBytes);\n\n    Cipher cipher = Cipher.getInstance(&quot;AES/CBC/PKCS5Padding&quot;); // PKCS#7 padding is called PKCS5 padding in the Java world\n    cipher.init(Cipher.DECRYPT_MODE, key, iv);\n\n    byte [] decodedCipher = java.util.Base64.getDecoder().decode(cipherText);\n    byte [] decodedCipher2nd = java.util.Base64.getDecoder().decode(decodedCipher); // 2nd Base64 decoding\n    byte[] plainText = cipher.doFinal(decodedCipher2nd);\n\n    return new String(plainText, StandardCharsets.UTF_8);\n}\n</code></pre>\n<p>Test:</p>\n<pre class=\"lang-java prettyprint-override\"><code>String key = generateSHA256(&quot;secretkey&quot;, 32).substring(0,32);\nString iv = generateSHA256(&quot;secretiv&quot;, 16).substring(0,16);\nSystem.out.println(decryptAES256CBC(&quot;UTY5b1pGUHYvTW5tL0pJcTVVZktuUT09&quot;, key, iv)); // MXeaSFSUj4az\n</code></pre>\n<p>In accordance with the result of the PHP code.</p>\n<hr />\n<p>The PHP code has some vulnerabilities and inefficiencies (even if you can't change this, it should be noted for future readers):</p>\n<ul>\n<li>For deriving the key, not a fast digest but a key derivation function like Argon2 or at least PBKDF2 should be used.</li>\n<li>The IV should be randomly generated during encryption and passed to the decrypting side (usually concatenated).</li>\n<li>Using the hex encoded value as key reduces security because each byte of 256 possible values are reduced to only 16 values.<br />\nAlso, cross-platform compatibility issues can occur (case sensitivity of the hex digits).</li>\n<li>The double Base64 encoding of the ciphertext is unnecessary and inefficient.</li>\n<li>It looks like the plaintext is Base64 encoded as well. This is not necessary because the algorithms operate on bytes. A base64 encoding only increases the amount of data.</li>\n</ul>\n"}],"owner":{"account_id":22107235,"reputation":5,"user_id":16362635,"display_name":"Mohamed E."},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":390,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75810645,"answer_count":1,"score":0,"last_activity_date":1679509327,"creation_date":1679467768,"question_id":75809131,"body_markdown":"I am trying to decrypt an AES cipher in Java. The cipher was encrypted/decrypted in PHP using the openssl_encrypt/openssl_decrypt function. \r\n\r\nAn example of decryption in PHP looks like this:\r\n\r\n```php\r\nfunction decryptSerial($encrypted_txt){\r\n  $encrypt_method = &#39;AES-256-CBC&#39;;                \r\n  $key = hash(&#39;sha256&#39;, $secret_key);        \r\n\r\n  //iv - encrypt method AES-256-CBC expects 16 bytes - else you will get a warning          \r\n  $iv = substr(hash(&#39;sha256&#39;, $secret_iv), 0, 16);        \r\n\r\n  return openssl_decrypt(base64_decode($encrypted_txt), $encrypt_method, $key, 0, $iv);        \r\n}\r\n\r\necho decryptSerial(&#39;bnY0UEc2NFcySHgwRTIyNFU1NU5pUT09&#39;);  //output is MXeaSFSUj4az\r\n```\r\n\r\nThe PHP code uses AES-256-CBC with no padding to decrypt so I do the same in Java:\r\n\r\n```java\r\npublic static String decryptAES256CBC(String cipherText, String keyString, String ivString){\r\n\ttry {\r\n\t\t// Truncate the key at the first 32 bytes\r\n\t\tbyte [] keyBytes = keyString.substring(0,32).getBytes();\r\n\t\tbyte [] ivBytes = ivString.getBytes();\r\n\r\n\t\tSecretKeySpec key = new SecretKeySpec(keyBytes, &quot;AES&quot;);\r\n\t\tIvParameterSpec iv = new IvParameterSpec(ivBytes);\r\n\r\n\t\tCipher cipher = Cipher.getInstance(&quot;AES_256/CBC/NoPadding&quot;);\r\n\t\tcipher.init(Cipher.DECRYPT_MODE, key, iv);\r\n\r\n\t\tbyte [] decodedCipher = java.util.Base64.getDecoder().decode(cipherText);\r\n\t\tbyte[] plainText = cipher.doFinal(decodedCipher);\r\n\r\n\t\treturn java.util.Base64.getEncoder().encodeToString(plainText);\r\n\r\n\t} catch (NoSuchAlgorithmException | NoSuchPaddingException | InvalidAlgorithmParameterException |\r\n\t\t\t InvalidKeyException | BadPaddingException | IllegalBlockSizeException e) {\r\n\t\tthrow new RuntimeException(e);\r\n\t}\r\n}\r\n\r\npublic static void main(String [] args){\r\n    String key = generateSHA256(&quot;*****&quot;);\r\n    String iv = generateSHA256(&quot;******&quot;).substring(0,16);\r\n\r\n    System.out.println(decryptAES256CBC(&quot;bnY0UEc2NFcySHgwRTIyNFU1NU5pUT09&quot;, key, iv));\r\n}\r\n```\r\n\r\n\r\n\r\nThis however does not work. When I run it with the example input, I get the error mentioned in the title. It seems like by input cipher is not of the correct length - which is true, when I base64 decode the cipher I get a byte array of length 24 a.k.a not a multiple of 16. This would require padding to get things to work I believe. But then how does the PHP code do it without padding?\r\n\r\nI tried recreating the PHP code in Kava. I researched the openssl_decrypt function and ported its functionality. However, when I ran it in Java, it seems like I need padding. The PHP code used no padding if I am not mistaken.","title":"javax.crypto.IllegalBlockSizeException: Input length not multiple of 16 bytes - AES_256/CBC/NoPadding","body":"<p>I am trying to decrypt an AES cipher in Java. The cipher was encrypted/decrypted in PHP using the openssl_encrypt/openssl_decrypt function.</p>\n<p>An example of decryption in PHP looks like this:</p>\n<pre class=\"lang-php prettyprint-override\"><code>function decryptSerial($encrypted_txt){\n  $encrypt_method = 'AES-256-CBC';                \n  $key = hash('sha256', $secret_key);        \n\n  //iv - encrypt method AES-256-CBC expects 16 bytes - else you will get a warning          \n  $iv = substr(hash('sha256', $secret_iv), 0, 16);        \n\n  return openssl_decrypt(base64_decode($encrypted_txt), $encrypt_method, $key, 0, $iv);        \n}\n\necho decryptSerial('bnY0UEc2NFcySHgwRTIyNFU1NU5pUT09');  //output is MXeaSFSUj4az\n</code></pre>\n<p>The PHP code uses AES-256-CBC with no padding to decrypt so I do the same in Java:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static String decryptAES256CBC(String cipherText, String keyString, String ivString){\n    try {\n        // Truncate the key at the first 32 bytes\n        byte [] keyBytes = keyString.substring(0,32).getBytes();\n        byte [] ivBytes = ivString.getBytes();\n\n        SecretKeySpec key = new SecretKeySpec(keyBytes, &quot;AES&quot;);\n        IvParameterSpec iv = new IvParameterSpec(ivBytes);\n\n        Cipher cipher = Cipher.getInstance(&quot;AES_256/CBC/NoPadding&quot;);\n        cipher.init(Cipher.DECRYPT_MODE, key, iv);\n\n        byte [] decodedCipher = java.util.Base64.getDecoder().decode(cipherText);\n        byte[] plainText = cipher.doFinal(decodedCipher);\n\n        return java.util.Base64.getEncoder().encodeToString(plainText);\n\n    } catch (NoSuchAlgorithmException | NoSuchPaddingException | InvalidAlgorithmParameterException |\n             InvalidKeyException | BadPaddingException | IllegalBlockSizeException e) {\n        throw new RuntimeException(e);\n    }\n}\n\npublic static void main(String [] args){\n    String key = generateSHA256(&quot;*****&quot;);\n    String iv = generateSHA256(&quot;******&quot;).substring(0,16);\n\n    System.out.println(decryptAES256CBC(&quot;bnY0UEc2NFcySHgwRTIyNFU1NU5pUT09&quot;, key, iv));\n}\n</code></pre>\n<p>This however does not work. When I run it with the example input, I get the error mentioned in the title. It seems like by input cipher is not of the correct length - which is true, when I base64 decode the cipher I get a byte array of length 24 a.k.a not a multiple of 16. This would require padding to get things to work I believe. But then how does the PHP code do it without padding?</p>\n<p>I tried recreating the PHP code in Kava. I researched the openssl_decrypt function and ported its functionality. However, when I ran it in Java, it seems like I need padding. The PHP code used no padding if I am not mistaken.</p>\n"},{"tags":["java","redis","metamodel","redisearch"],"answers":[{"tags":[],"owner":{"account_id":529477,"reputation":1533,"user_id":1234412,"display_name":"BSB"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679508950,"creation_date":1679508950,"answer_id":75815925,"question_id":75795755,"body_markdown":"For Gradle, you can add the OM dependency as an annotation processor using the `annotationProcessor` call in the dependencies block like:\r\n\r\n```\r\next {\r\n  redisOmVersion = &#39;0.8.0&#39;\r\n}\r\n\r\ndependencies {\r\n  implementation: &quot;com.redis.om:redis-om-spring:$redisOmVersion&quot;\r\n  annotationProcessor &quot;com.redis.om:redis-om-spring:$redisOmVersion&quot;\r\n}\r\n```\r\n\r\nFor Maven, things normally just work, when you run `./mvnw spring-boot:run`. Some users have experienced this not being the case, in which I recommend to explicitly declaring the `maven-compiler-plugin` in the case below it&#39;s pair with an app create with start.spring.io v3.0.4 (all other versions can be inherited from the parent poms):\r\n\r\n```xml\r\n&lt;plugin&gt;\r\n  &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n  &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n  &lt;version&gt;${maven-compiler-plugin.version}&lt;/version&gt;\r\n  &lt;configuration&gt;\r\n    &lt;annotationProcessorPaths&gt;\r\n      &lt;path&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-configuration-processor&lt;/artifactId&gt;\r\n        &lt;version&gt;3.0.4&lt;/version&gt;\r\n      &lt;/path&gt;\r\n      &lt;path&gt;\r\n        &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n        &lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n        &lt;version&gt;${lombok.version}&lt;/version&gt;\r\n      &lt;/path&gt;\r\n      &lt;path&gt;\r\n        &lt;groupId&gt;com.redis.om&lt;/groupId&gt;\r\n        &lt;artifactId&gt;redis-om-spring&lt;/artifactId&gt;\r\n        &lt;version&gt;0.8.0&lt;/version&gt;\r\n      &lt;/path&gt;\r\n    &lt;/annotationProcessorPaths&gt;\r\n  &lt;/configuration&gt;\r\n&lt;/plugin&gt;\r\n```\r\n\r\nAlso, in case you are using IntelliJ Idea, see\r\nhttps://www.jetbrains.com/help/idea/annotation-processors-support.html#annotation_processing","title":"How to generate MetaModel for Redis Document entity to use in Redis OM EntityStream queries","body":"<p>For Gradle, you can add the OM dependency as an annotation processor using the <code>annotationProcessor</code> call in the dependencies block like:</p>\n<pre><code>ext {\n  redisOmVersion = '0.8.0'\n}\n\ndependencies {\n  implementation: &quot;com.redis.om:redis-om-spring:$redisOmVersion&quot;\n  annotationProcessor &quot;com.redis.om:redis-om-spring:$redisOmVersion&quot;\n}\n</code></pre>\n<p>For Maven, things normally just work, when you run <code>./mvnw spring-boot:run</code>. Some users have experienced this not being the case, in which I recommend to explicitly declaring the <code>maven-compiler-plugin</code> in the case below it's pair with an app create with start.spring.io v3.0.4 (all other versions can be inherited from the parent poms):</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;plugin&gt;\n  &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n  &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n  &lt;version&gt;${maven-compiler-plugin.version}&lt;/version&gt;\n  &lt;configuration&gt;\n    &lt;annotationProcessorPaths&gt;\n      &lt;path&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-configuration-processor&lt;/artifactId&gt;\n        &lt;version&gt;3.0.4&lt;/version&gt;\n      &lt;/path&gt;\n      &lt;path&gt;\n        &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n        &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n        &lt;version&gt;${lombok.version}&lt;/version&gt;\n      &lt;/path&gt;\n      &lt;path&gt;\n        &lt;groupId&gt;com.redis.om&lt;/groupId&gt;\n        &lt;artifactId&gt;redis-om-spring&lt;/artifactId&gt;\n        &lt;version&gt;0.8.0&lt;/version&gt;\n      &lt;/path&gt;\n    &lt;/annotationProcessorPaths&gt;\n  &lt;/configuration&gt;\n&lt;/plugin&gt;\n</code></pre>\n<p>Also, in case you are using IntelliJ Idea, see\n<a href=\"https://www.jetbrains.com/help/idea/annotation-processors-support.html#annotation_processing\" rel=\"nofollow noreferrer\">https://www.jetbrains.com/help/idea/annotation-processors-support.html#annotation_processing</a></p>\n"}],"owner":{"account_id":9776194,"reputation":41,"user_id":7246131,"display_name":"efk"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":231,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1679508950,"creation_date":1679350027,"question_id":75795755,"body_markdown":"I use Redis OM Spring Entity Streams, which provides a Java 8 Streams interface to Query Redis JSON documents using RediSearch. \r\n\r\nI want to generate a metamodel like Person$ to run the code below. But I couldn&#39;t figure out how to generate the metamodel for the Person document entity. Can you please help me to find out a way to generate the metamodel? Thanks in advance.\r\n\r\n    &gt; // Find people by age range   public Iterable&lt;Person&gt;\r\n    &gt; findByAgeBetween(int minAge, int maxAge) {\r\n    &gt;     return entityStream //\r\n    &gt;         .of(Person.class) //\r\n    &gt;         .filter(Person$.AGE.between(minAge, maxAge)) //\r\n    &gt;         .sorted(Person$.AGE, SortOrder.ASC) //\r\n    &gt;         .collect(Collectors.toList());   }\r\n\r\n","title":"How to generate MetaModel for Redis Document entity to use in Redis OM EntityStream queries","body":"<p>I use Redis OM Spring Entity Streams, which provides a Java 8 Streams interface to Query Redis JSON documents using RediSearch.</p>\n<p>I want to generate a metamodel like Person$ to run the code below. But I couldn't figure out how to generate the metamodel for the Person document entity. Can you please help me to find out a way to generate the metamodel? Thanks in advance.</p>\n<pre><code>&gt; // Find people by age range   public Iterable&lt;Person&gt;\n&gt; findByAgeBetween(int minAge, int maxAge) {\n&gt;     return entityStream //\n&gt;         .of(Person.class) //\n&gt;         .filter(Person$.AGE.between(minAge, maxAge)) //\n&gt;         .sorted(Person$.AGE, SortOrder.ASC) //\n&gt;         .collect(Collectors.toList());   }\n</code></pre>\n"},{"tags":["java","spring-boot","spring-mvc","spring-data-jpa"],"answers":[{"tags":[],"owner":{"account_id":26750470,"reputation":51,"user_id":20349918,"display_name":"JJ Gray"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1679508913,"creation_date":1679508913,"answer_id":75815917,"question_id":75815114,"body_markdown":"In brief, you should be able to extend your `EventRepository` like so:\r\n```lang-java\r\npublic interface EventRepository extends CrudRepository&lt;Event, Long&gt; {\r\n  public Iterable&lt;Event&gt; findByUser(User user);\r\n}\r\n```\r\n\r\nYou&#39;ll then be able to call the `findByUser` method from your service by passing the user you want to query for.\r\n\r\nI&#39;d recommend taking a look at [Spring JPA](1) and its `JpaRepository`. It extends the functionality of `CrudRepository` with more options such as paging. It also returns `List&lt;&gt;` instead of `Iterable&lt;&gt;`, which if often useful. You can find [further comparisons elsewhere on this site][1] too.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/14014086/what-is-difference-between-crudrepository-and-jparepository-interfaces-in-spring","title":"Spring Boot: How to add a condition to findAll repository method","body":"<p>In brief, you should be able to extend your <code>EventRepository</code> like so:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public interface EventRepository extends CrudRepository&lt;Event, Long&gt; {\n  public Iterable&lt;Event&gt; findByUser(User user);\n}\n</code></pre>\n<p>You'll then be able to call the <code>findByUser</code> method from your service by passing the user you want to query for.</p>\n<p>I'd recommend taking a look at Spring JPA and its <code>JpaRepository</code>. It extends the functionality of <code>CrudRepository</code> with more options such as paging. It also returns <code>List&lt;&gt;</code> instead of <code>Iterable&lt;&gt;</code>, which if often useful. You can find <a href=\"https://stackoverflow.com/questions/14014086/what-is-difference-between-crudrepository-and-jparepository-interfaces-in-spring\">further comparisons elsewhere on this site</a> too.</p>\n"}],"owner":{"account_id":28075993,"reputation":3,"user_id":21447847,"display_name":"Nicola Giovanni Caddeo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":218,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75815917,"answer_count":1,"score":0,"last_activity_date":1679508913,"creation_date":1679503876,"question_id":75815114,"body_markdown":"Probably the question is not correct so I will try to explain the problem well. I&#39;m developing a mini project with spring boot for the creation of a calendar in which any registered user can add events to his calendar.So at the moment I have a page in which I can see the list of all the inserted events, So at the moment I have a page in which I view the list of all the inserted events, but the events are retrieved via the `findAll()` method so each user sees all the events registered in the database. Obviously my goal is to recover from the db only the events of the specific logged in user.When I create an event the foreign key is the user&#39;s id so I just need to figure out how to build the query in spring.\r\n\r\nThis is my User.java\r\n\r\n```\r\n@Getter\r\n@Setter\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\n@Entity\r\n@Table(name = &quot;users&quot;)\r\npublic class User {\r\n    private static final long serialVersionUID = 1L;\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private Long id;\r\n\r\n    @Column(nullable = false)\r\n    private String name;\r\n\r\n    @Column(nullable = false, unique = true)\r\n    private String email;\r\n\r\n    @Column(nullable = false)\r\n    private String password;\r\n\r\n    @OneToMany(mappedBy = &quot;user&quot;, fetch = FetchType.LAZY, cascade = CascadeType.ALL)\r\n    private Set&lt;Event&gt; events = new HashSet&lt;Event&gt;();\r\n\r\n}\r\n```\r\nThis is my Event.java\r\n```\r\n@Getter\r\n@Setter\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\n@Entity\r\n@Table(name = &quot;events&quot;)\r\npublic class Event {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    @Column(name = &quot;event_id&quot;)\r\n    private Long id;\r\n\r\n    @Column(name = &quot;event_title&quot;, nullable = false)\r\n    @NotBlank(message = &quot;Titolo evento obbligatorio&quot;)\r\n    private String eventTitle;\r\n\r\n    @Column(name = &quot;event_description&quot;, nullable = false)\r\n    private String eventDescription;\r\n\r\n    @Column(name = &quot;event_date&quot;, nullable = false)\r\n    @NotBlank(message = &quot;Data evento obbligatoria&quot;)\r\n    private String eventDate;\r\n\r\n    @Column(name = &quot;start_time&quot;, nullable = false)\r\n    @NotNull\r\n    private int startTime;\r\n\r\n    @Column(name = &quot;end_time&quot;, nullable = false)\r\n    @NotNull\r\n    private int endTime;\r\n\r\n    @ManyToOne(fetch = FetchType.LAZY)\r\n    @JoinColumn(name = &quot;user_id&quot;, nullable = false)\r\n    private User user;\r\n}\r\n```\r\nEventRepository:\r\n```\r\npublic interface EventRepository extends CrudRepository&lt;Event, Long&gt; {\r\n\r\n}\r\n```\r\nMethod in the controller to display the event list:\r\n```\r\n @GetMapping(&quot;/day&quot;)\r\n    public String calendar(@AuthenticationPrincipal UserDetails userDetails, Model model) {\r\n        String email = userDetails.getUsername();\r\n        User user = userService.findUserByEmail(email);\r\n        model.addAttribute(&quot;user&quot;, user);\r\n        model.addAttribute(&quot;events&quot;, eventRepository.findAll());\r\n        return &quot;day&quot;;\r\n    }\r\n```\r\n\r\nI&#39;m quite newbie with spring so I couldn&#39;t even find anything on the internet, thanks in advance for your help.","title":"Spring Boot: How to add a condition to findAll repository method","body":"<p>Probably the question is not correct so I will try to explain the problem well. I'm developing a mini project with spring boot for the creation of a calendar in which any registered user can add events to his calendar.So at the moment I have a page in which I can see the list of all the inserted events, So at the moment I have a page in which I view the list of all the inserted events, but the events are retrieved via the <code>findAll()</code> method so each user sees all the events registered in the database. Obviously my goal is to recover from the db only the events of the specific logged in user.When I create an event the foreign key is the user's id so I just need to figure out how to build the query in spring.</p>\n<p>This is my User.java</p>\n<pre><code>@Getter\n@Setter\n@NoArgsConstructor\n@AllArgsConstructor\n@Entity\n@Table(name = &quot;users&quot;)\npublic class User {\n    private static final long serialVersionUID = 1L;\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    @Column(nullable = false)\n    private String name;\n\n    @Column(nullable = false, unique = true)\n    private String email;\n\n    @Column(nullable = false)\n    private String password;\n\n    @OneToMany(mappedBy = &quot;user&quot;, fetch = FetchType.LAZY, cascade = CascadeType.ALL)\n    private Set&lt;Event&gt; events = new HashSet&lt;Event&gt;();\n\n}\n</code></pre>\n<p>This is my Event.java</p>\n<pre><code>@Getter\n@Setter\n@NoArgsConstructor\n@AllArgsConstructor\n@Entity\n@Table(name = &quot;events&quot;)\npublic class Event {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @Column(name = &quot;event_id&quot;)\n    private Long id;\n\n    @Column(name = &quot;event_title&quot;, nullable = false)\n    @NotBlank(message = &quot;Titolo evento obbligatorio&quot;)\n    private String eventTitle;\n\n    @Column(name = &quot;event_description&quot;, nullable = false)\n    private String eventDescription;\n\n    @Column(name = &quot;event_date&quot;, nullable = false)\n    @NotBlank(message = &quot;Data evento obbligatoria&quot;)\n    private String eventDate;\n\n    @Column(name = &quot;start_time&quot;, nullable = false)\n    @NotNull\n    private int startTime;\n\n    @Column(name = &quot;end_time&quot;, nullable = false)\n    @NotNull\n    private int endTime;\n\n    @ManyToOne(fetch = FetchType.LAZY)\n    @JoinColumn(name = &quot;user_id&quot;, nullable = false)\n    private User user;\n}\n</code></pre>\n<p>EventRepository:</p>\n<pre><code>public interface EventRepository extends CrudRepository&lt;Event, Long&gt; {\n\n}\n</code></pre>\n<p>Method in the controller to display the event list:</p>\n<pre><code> @GetMapping(&quot;/day&quot;)\n    public String calendar(@AuthenticationPrincipal UserDetails userDetails, Model model) {\n        String email = userDetails.getUsername();\n        User user = userService.findUserByEmail(email);\n        model.addAttribute(&quot;user&quot;, user);\n        model.addAttribute(&quot;events&quot;, eventRepository.findAll());\n        return &quot;day&quot;;\n    }\n</code></pre>\n<p>I'm quite newbie with spring so I couldn't even find anything on the internet, thanks in advance for your help.</p>\n"},{"tags":["java","enums"],"comments":[{"owner":{"account_id":39208,"reputation":251240,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"score":3,"creation_date":1679043047,"post_id":75765441,"comment_id":133653486,"body_markdown":"Parse the string to enum or get the `name()` of the enums","body":"Parse the string to enum or get the <code>name()</code> of the enums"}],"answers":[{"tags":[],"owner":{"account_id":23783500,"reputation":5175,"user_id":17795888,"display_name":"Chaosfire"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679044449,"creation_date":1679044449,"answer_id":75765702,"question_id":75765441,"body_markdown":"You can use [Stream.map()][1] to turn the string stream into stream of enums in your case:\r\n\r\n&gt; Returns a stream consisting of the results of applying the given function to the elements of this stream.\r\n\r\nI would add a more liberal parsing method to `States`, which returns `null`, if string can&#39;t be parsed, instead of throwing exception to keep the stream pipeline clean. One possible implementation:\r\n```\r\npublic enum States {\r\n  stateA,\r\n  stateB,\r\n  stateC;\r\n\r\n  public static States liberalParse(String string) {\r\n    try {\r\n      return States.valueOf(string);\r\n    } catch (Exception exc) {\r\n      return null;\r\n    }\r\n  }\r\n}\r\n```\r\nThe stream:\r\n```\r\nboolean isStateValid = Arrays.stream(potentialStates)\r\n            .map(States::liberalParse)\r\n            .filter(Objects::nonNull)\r\n            .anyMatch(statesSet::contains);\r\n```\r\nNot related to the actual question, but according to java conventions, enum names should be like this - `STATE_A`, `STATE_B`, etc.\r\n\r\nAlso the enum should be named `State` (singular), since one instance of it (`STATE_A`) represents one state.\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#map-java.util.function.Function-","title":"Java compare string array with enumset","body":"<p>You can use <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#map-java.util.function.Function-\" rel=\"nofollow noreferrer\">Stream.map()</a> to turn the string stream into stream of enums in your case:</p>\n<blockquote>\n<p>Returns a stream consisting of the results of applying the given function to the elements of this stream.</p>\n</blockquote>\n<p>I would add a more liberal parsing method to <code>States</code>, which returns <code>null</code>, if string can't be parsed, instead of throwing exception to keep the stream pipeline clean. One possible implementation:</p>\n<pre><code>public enum States {\n  stateA,\n  stateB,\n  stateC;\n\n  public static States liberalParse(String string) {\n    try {\n      return States.valueOf(string);\n    } catch (Exception exc) {\n      return null;\n    }\n  }\n}\n</code></pre>\n<p>The stream:</p>\n<pre><code>boolean isStateValid = Arrays.stream(potentialStates)\n            .map(States::liberalParse)\n            .filter(Objects::nonNull)\n            .anyMatch(statesSet::contains);\n</code></pre>\n<p>Not related to the actual question, but according to java conventions, enum names should be like this - <code>STATE_A</code>, <code>STATE_B</code>, etc.</p>\n<p>Also the enum should be named <code>State</code> (singular), since one instance of it (<code>STATE_A</code>) represents one state.</p>\n"},{"tags":[],"owner":{"account_id":9121546,"reputation":41,"user_id":6786808,"display_name":"tuine"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679045346,"creation_date":1679045346,"answer_id":75765840,"question_id":75765441,"body_markdown":"You can directly convert the strings to `ConvTypeEnum` enum values and use them in conjunction with a `try-catch` block.\r\n\r\n    boolean isStateValid = Arrays.stream(potentialStates)\r\n        .anyMatch(state -&gt; {\r\n            try {\r\n                return statesSet.contains(States.valueOf(state));\r\n            } catch (IllegalArgumentException e) {\r\n                return false;\r\n            }\r\n        });","title":"Java compare string array with enumset","body":"<p>You can directly convert the strings to <code>ConvTypeEnum</code> enum values and use them in conjunction with a <code>try-catch</code> block.</p>\n<pre><code>boolean isStateValid = Arrays.stream(potentialStates)\n    .anyMatch(state -&gt; {\n        try {\n            return statesSet.contains(States.valueOf(state));\n        } catch (IllegalArgumentException e) {\n            return false;\n        }\n    });\n</code></pre>\n"}],"owner":{"account_id":25865099,"reputation":29,"user_id":19596924,"display_name":"VataL"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":197,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1679508294,"creation_date":1679042855,"question_id":75765441,"body_markdown":"I got a set of enums eg.\r\n```lang-java\r\n    EnumSet&lt;States&gt; statesSet = EnumSet.allOf(States.class); \r\n```\r\nwith\r\n```lang-java\r\n    Public enum States{\r\n         stateA,\r\n         stateB,\r\n         stateC\r\n    }\r\n```\r\nand I have a String Array that may contain one of the enum values eg.\r\n```lang-java\r\n    String[] potentialStates = new String[] {xyz, stateA, abc};\r\n```\r\nNow I need to compare if any of the strings inside the array matches a enum value\r\n\r\nIn order to do that I created a stream\r\n```lang-java\r\n    boolean isStateValid = Arrays.stream(potentialStates).anyMatch(statesSet::contains);\r\n```\r\nSince I&#39;m comparing Strings to Enums there is no match I know.\r\nBut I&#39;m having a hard time converting the String array to an enum set\r\nIs there an easy way to do so ?","title":"Java compare string array with enumset","body":"<p>I got a set of enums eg.</p>\n<pre class=\"lang-java prettyprint-override\"><code>    EnumSet&lt;States&gt; statesSet = EnumSet.allOf(States.class); \n</code></pre>\n<p>with</p>\n<pre class=\"lang-java prettyprint-override\"><code>    Public enum States{\n         stateA,\n         stateB,\n         stateC\n    }\n</code></pre>\n<p>and I have a String Array that may contain one of the enum values eg.</p>\n<pre class=\"lang-java prettyprint-override\"><code>    String[] potentialStates = new String[] {xyz, stateA, abc};\n</code></pre>\n<p>Now I need to compare if any of the strings inside the array matches a enum value</p>\n<p>In order to do that I created a stream</p>\n<pre class=\"lang-java prettyprint-override\"><code>    boolean isStateValid = Arrays.stream(potentialStates).anyMatch(statesSet::contains);\n</code></pre>\n<p>Since I'm comparing Strings to Enums there is no match I know.\nBut I'm having a hard time converting the String array to an enum set\nIs there an easy way to do so ?</p>\n"},{"tags":["java","graph","jung"],"comments":[{"owner":{"account_id":336919,"reputation":2704,"user_id":664856,"display_name":"Joshua O&#39;Madadhain"},"score":0,"creation_date":1679344125,"post_id":75783941,"comment_id":133702145,"body_markdown":"What clusters are you referring to?  Please provide more context.","body":"What clusters are you referring to?  Please provide more context."},{"owner":{"account_id":22445743,"reputation":13,"user_id":16649693,"display_name":"Doktor_DOOM"},"score":0,"creation_date":1679507289,"post_id":75783941,"comment_id":133736029,"body_markdown":"Hi @JoshuaO&#39;Madadhain, i found an approach for my problem. But at the moment i got the exception. Because i don&#39;t know max count of the vertexes or edges.","body":"Hi @JoshuaO&#39;Madadhain, i found an approach for my problem. But at the moment i got the exception. Because i don&#39;t know max count of the vertexes or edges."},{"owner":{"account_id":22445743,"reputation":13,"user_id":16649693,"display_name":"Doktor_DOOM"},"score":0,"creation_date":1679507359,"post_id":75783941,"comment_id":133736045,"body_markdown":"After every restart of my example. The Cluster or the max count of vertexes and edges can be different. In my case i need a found like graph.size or graph.length","body":"After every restart of my example. The Cluster or the max count of vertexes and edges can be different. In my case i need a found like graph.size or graph.length"},{"owner":{"account_id":22445743,"reputation":13,"user_id":16649693,"display_name":"Doktor_DOOM"},"score":0,"creation_date":1679507944,"post_id":75783941,"comment_id":133736207,"body_markdown":"Hi @JoshuaO&#39;Madadhain, i found in the last 5min a solution max count edges. graph.edgeSet().size()   I will check my approach and come back.","body":"Hi @JoshuaO&#39;Madadhain, i found in the last 5min a solution max count edges. graph.edgeSet().size()   I will check my approach and come back."},{"owner":{"account_id":336919,"reputation":2704,"user_id":664856,"display_name":"Joshua O&#39;Madadhain"},"score":0,"creation_date":1679622452,"post_id":75783941,"comment_id":133758695,"body_markdown":"You need to phrase your questions in a way that helps people understand the problem that you&#39;re trying to solve.  Providing a code example can help, but only if the code is actually connected to what you&#39;re doing.  In this case:\n(a) you don&#39;t explain what you mean by a cluster\n(b) you don&#39;t explain why you need the cluster size\n(c) you don&#39;t describe the exception you&#39;re getting, or what appears to be triggering it\nAs it is, you&#39;re not really getting help because your problem is unclear.\nI recommend checking out https://stackoverflow.com/help/how-to-ask before asking further questions.","body":"You need to phrase your questions in a way that helps people understand the problem that you&#39;re trying to solve.  Providing a code example can help, but only if the code is actually connected to what you&#39;re doing.  In this case: (a) you don&#39;t explain what you mean by a cluster (b) you don&#39;t explain why you need the cluster size (c) you don&#39;t describe the exception you&#39;re getting, or what appears to be triggering it As it is, you&#39;re not really getting help because your problem is unclear. I recommend checking out <a href=\"https://stackoverflow.com/help/how-to-ask\">stackoverflow.com/help/how-to-ask</a> before asking further questions."}],"owner":{"account_id":22445743,"reputation":13,"user_id":16649693,"display_name":"Doktor_DOOM"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679507167,"creation_date":1679248657,"question_id":75783941,"body_markdown":"at the moment, I&#39;m searching for a possibility to get all targets Vertex labels of one cluster. I&#39;m using the radial layout and i know the  function&#39;s getEdgeTargets and getEdgeSource. But How can i find all targets Vertex labels in multiple clusters. \r\n\r\n    for(int i = 0; i &lt; 100; i++)\r\n\t\t{ // check the last added cluster the edge count. Because edge count = Nodes Count\r\n\t\t\tif(cluster.graph.containsEdge(cluster.graph.getEdge(nodesList.get(nodesList.size()-1).getNodename() ,cluster.graph.getEdgeTarget(i)))&amp;&amp;\r\n\t\t\t\tNodecnt &lt;\tcluster.graph.getEdge(nodesList.get(nodesList.size()-1).getNodename() ,cluster.graph.getEdgeTarget(i)))\r\n\t\t\t{\r\n\t\t\t\tNodecnt = cluster.graph.getEdge(nodesList.get(nodesList.size()-1).getNodename() ,cluster.graph.getEdgeTarget(i));\r\n\r\n\t\t\t}\r\n\t\t}","title":"JUNG get all target vertex labels from the Cluster","body":"<p>at the moment, I'm searching for a possibility to get all targets Vertex labels of one cluster. I'm using the radial layout and i know the  function's getEdgeTargets and getEdgeSource. But How can i find all targets Vertex labels in multiple clusters.</p>\n<pre><code>for(int i = 0; i &lt; 100; i++)\n    { // check the last added cluster the edge count. Because edge count = Nodes Count\n        if(cluster.graph.containsEdge(cluster.graph.getEdge(nodesList.get(nodesList.size()-1).getNodename() ,cluster.graph.getEdgeTarget(i)))&amp;&amp;\n            Nodecnt &lt;   cluster.graph.getEdge(nodesList.get(nodesList.size()-1).getNodename() ,cluster.graph.getEdgeTarget(i)))\n        {\n            Nodecnt = cluster.graph.getEdge(nodesList.get(nodesList.size()-1).getNodename() ,cluster.graph.getEdgeTarget(i));\n\n        }\n    }\n</code></pre>\n"},{"tags":["java","registry","openmq"],"comments":[{"owner":{"account_id":26698569,"reputation":875,"user_id":20306007,"display_name":"life888888"},"score":0,"creation_date":1679538776,"post_id":75815616,"comment_id":133741334,"body_markdown":"Eclipse Adoptium OpenJDK for Windows(https://mobac.sourceforge.io/OpenJDK/), please enable the two options: (1) Set JAVA_HOME variable (2) JavaSoft (Oracle) registry keys. (image https://mobac.sourceforge.io/OpenJDK/OpenJDK.png )","body":"Eclipse Adoptium OpenJDK for Windows(<a href=\"https://mobac.sourceforge.io/OpenJDK/\" rel=\"nofollow noreferrer\">mobac.sourceforge.io/OpenJDK</a>), please enable the two options: (1) Set JAVA_HOME variable (2) JavaSoft (Oracle) registry keys. (image <a href=\"https://mobac.sourceforge.io/OpenJDK/OpenJDK.png\" rel=\"nofollow noreferrer\">mobac.sourceforge.io/OpenJDK/OpenJDK.png</a> )"}],"owner":{"account_id":25811989,"reputation":1,"user_id":19552582,"display_name":"Eiron"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":105,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679506967,"creation_date":1679506967,"question_id":75815616,"body_markdown":"I&#39;m trying to install openmq 4.5 on win11 but I&#39;m getting the error: \r\n\r\n**invalid root in registry key &quot;HKLM\\SOFTWARE\\JavaSoft\\Java Runtime Environment\\CurrentVersion&quot;**\r\n\r\nI went to HKEY_LOCAL_MACHINE/SOFTWARE/JavaSoft in my registry and realized that there&#39;s no &#39;Java Runtime Environment&#39; folder, is this normal? is it related to my problem? if so, how do I fix it?  \r\n\r\nThe only folder in my JavaSoft registry is named JDK and contains another one named 17.0.6.\r\n\r\nI have JDK 17, 1.7 and 7 installed, when I run &quot;java -version&quot; I get: \r\n\r\n`java version &quot;17.0.6&quot; 2023-01-17 LTS Java(TM) SE Runtime Environment (build 17.0.6+9-LTS-190) Java HotSpot(TM) 64-Bit Server VM (build 17.0.6+9-LTS-190, mixed mode, sharing)`\r\n\r\nI dont know if this is related but I also tried to run openmq 5.1 on the same PC (win11) with the command &quot;**imqbrokerd -vmargs  &quot;-d64 -Xms256M -Xmx1024M&quot;**&quot; and nothing happens, in the task manager I can see the processes imqbrokerd and imqbrokersvc starting but being killed in like 2 seconds without any warnings or errors or any type of logs. I&#39;ve been searching a solution all day and found nothing, please help :(","title":"error: invalid root in registry key &quot;HKLM\\SOFTWARE\\JavaSoft\\Java Runtime Environment\\CurrentVersion&quot;","body":"<p>I'm trying to install openmq 4.5 on win11 but I'm getting the error:</p>\n<p><strong>invalid root in registry key &quot;HKLM\\SOFTWARE\\JavaSoft\\Java Runtime Environment\\CurrentVersion&quot;</strong></p>\n<p>I went to HKEY_LOCAL_MACHINE/SOFTWARE/JavaSoft in my registry and realized that there's no 'Java Runtime Environment' folder, is this normal? is it related to my problem? if so, how do I fix it?</p>\n<p>The only folder in my JavaSoft registry is named JDK and contains another one named 17.0.6.</p>\n<p>I have JDK 17, 1.7 and 7 installed, when I run &quot;java -version&quot; I get:</p>\n<p><code>java version &quot;17.0.6&quot; 2023-01-17 LTS Java(TM) SE Runtime Environment (build 17.0.6+9-LTS-190) Java HotSpot(TM) 64-Bit Server VM (build 17.0.6+9-LTS-190, mixed mode, sharing)</code></p>\n<p>I dont know if this is related but I also tried to run openmq 5.1 on the same PC (win11) with the command &quot;<strong>imqbrokerd -vmargs  &quot;-d64 -Xms256M -Xmx1024M&quot;</strong>&quot; and nothing happens, in the task manager I can see the processes imqbrokerd and imqbrokersvc starting but being killed in like 2 seconds without any warnings or errors or any type of logs. I've been searching a solution all day and found nothing, please help :(</p>\n"},{"tags":["java","android","back-button"],"comments":[{"owner":{"account_id":1694376,"reputation":1455,"user_id":1556088,"accept_rate":86,"display_name":"resource8218"},"score":0,"creation_date":1378458726,"post_id":8430805,"comment_id":27468267,"body_markdown":"[Android - Confirm app exit with toast]\n\n\n  [1]: http://stackoverflow.com/questions/14006461/android-confirm-app-exit-with-toast/18654014#18654014","body":"[Android - Confirm app exit with toast]     [1]: <a href=\"http://stackoverflow.com/questions/14006461/android-confirm-app-exit-with-toast/18654014#18654014\" title=\"android confirm app exit with toast\">stackoverflow.com/questions/14006461/&hellip;</a>"},{"owner":{"account_id":1428472,"reputation":657,"user_id":1351433,"accept_rate":80,"display_name":"Sohayb Hassoun"},"score":1,"creation_date":1378910641,"post_id":8430805,"comment_id":34013841,"body_markdown":"I had the same problem when using the HoloEverywhere Library, too simply you can add android:launchMode=&quot;singleTask&quot; to you activity definition in the manifest file.","body":"I had the same problem when using the HoloEverywhere Library, too simply you can add android:launchMode=&quot;singleTask&quot; to you activity definition in the manifest file."},{"owner":{"account_id":4232985,"reputation":2632,"user_id":3464919,"display_name":"Codelaby"},"score":0,"creation_date":1455722397,"post_id":8430805,"comment_id":58617483,"body_markdown":"Other solution http://stackoverflow.com/questions/8430805/android-clicking-twice-the-back-button-to-exit-activity","body":"Other solution <a href=\"http://stackoverflow.com/questions/8430805/android-clicking-twice-the-back-button-to-exit-activity\" title=\"android clicking twice the back button to exit activity\">stackoverflow.com/questions/8430805/&hellip;</a>"},{"owner":{"account_id":14351409,"reputation":1024,"user_id":10366757,"display_name":"Prabh deep"},"score":1,"creation_date":1559538229,"post_id":8430805,"comment_id":99437767,"body_markdown":"Possible duplicate of [clicking on the android back button twice to exit the app](https://stackoverflow.com/questions/26581427/clicking-on-the-android-back-button-twice-to-exit-the-app)","body":"Possible duplicate of <a href=\"https://stackoverflow.com/questions/26581427/clicking-on-the-android-back-button-twice-to-exit-the-app\">clicking on the android back button twice to exit the app</a>"}],"answers":[{"tags":[],"owner":{"account_id":201896,"reputation":57765,"user_id":448625,"accept_rate":96,"display_name":"Caner"},"down_vote_count":1,"up_vote_count":8,"is_accepted":false,"score":7,"last_activity_date":1323346291,"creation_date":1323346291,"answer_id":8430830,"question_id":8430805,"body_markdown":"It&#39;s not a built in functionality. I think it is not even the recommended behavior. Android apps are not meant to exit:\r\n\r\nhttps://stackoverflow.com/questions/2439978/why-dont-android-applications-provide-an-exit-option","title":"Clicking the back button twice to exit an activity","body":"<p>It's not a built in functionality. I think it is not even the recommended behavior. Android apps are not meant to exit:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/2439978/why-dont-android-applications-provide-an-exit-option\">Why dont Android applications provide an &quot;Exit&quot; option?</a></p>\n"},{"tags":[],"owner":{"account_id":940484,"reputation":22724,"user_id":968632,"accept_rate":100,"display_name":"Guillaume"},"down_vote_count":4,"up_vote_count":35,"is_accepted":false,"score":31,"last_activity_date":1323386349,"creation_date":1323386349,"answer_id":8439119,"question_id":8430805,"body_markdown":"Just thought I would share how I did it in the end, I just added in my activity:\r\n\r\n    private boolean doubleBackToExitPressedOnce = false;\r\n\r\n    @Override\r\n    protected void onResume() {\r\n        super.onResume();\r\n        // .... other stuff in my onResume ....\r\n        this.doubleBackToExitPressedOnce = false;\r\n    }\r\n\r\n    @Override\r\n    public void onBackPressed() {\r\n        if (doubleBackToExitPressedOnce) {\r\n            super.onBackPressed();\r\n            return;\r\n        }\r\n        this.doubleBackToExitPressedOnce = true;\r\n        Toast.makeText(this, R.string.exit_press_back_twice_message, Toast.LENGTH_SHORT).show();\r\n    }\r\n\r\nAnd it just works exactly as I want. Including the reset of the state whenever the activity is resumed.","title":"Clicking the back button twice to exit an activity","body":"<p>Just thought I would share how I did it in the end, I just added in my activity:</p>\n\n<pre><code>private boolean doubleBackToExitPressedOnce = false;\n\n@Override\nprotected void onResume() {\n    super.onResume();\n    // .... other stuff in my onResume ....\n    this.doubleBackToExitPressedOnce = false;\n}\n\n@Override\npublic void onBackPressed() {\n    if (doubleBackToExitPressedOnce) {\n        super.onBackPressed();\n        return;\n    }\n    this.doubleBackToExitPressedOnce = true;\n    Toast.makeText(this, R.string.exit_press_back_twice_message, Toast.LENGTH_SHORT).show();\n}\n</code></pre>\n\n<p>And it just works exactly as I want. Including the reset of the state whenever the activity is resumed.</p>\n"},{"tags":[],"owner":{"account_id":284533,"reputation":11043,"user_id":582699,"display_name":"Sudheesh B Nair"},"down_vote_count":7,"up_vote_count":1071,"is_accepted":true,"score":1064,"last_activity_date":1625202210,"creation_date":1353997978,"answer_id":13578600,"question_id":8430805,"body_markdown":"&gt; In Java Activity:\r\n\r\n    boolean doubleBackToExitPressedOnce = false;\r\n\r\n    @Override\r\n    public void onBackPressed() {\r\n        if (doubleBackToExitPressedOnce) {\r\n            super.onBackPressed();\r\n            return;\r\n        }\r\n            \r\n        this.doubleBackToExitPressedOnce = true;\r\n        Toast.makeText(this, &quot;Please click BACK again to exit&quot;, Toast.LENGTH_SHORT).show();\r\n            \r\n        new Handler(Looper.getMainLooper()).postDelayed(new Runnable() {\r\n            \r\n            @Override\r\n            public void run() {\r\n                doubleBackToExitPressedOnce=false;                       \r\n            }\r\n        }, 2000);\r\n    } \r\n\r\n&gt; In Kotlin Activity:\r\n\r\n    private var doubleBackToExitPressedOnce = false\r\n    override fun onBackPressed() {\r\n            if (doubleBackToExitPressedOnce) {\r\n                super.onBackPressed()\r\n                return\r\n            }\r\n    \r\n            this.doubleBackToExitPressedOnce = true\r\n            Toast.makeText(this, &quot;Please click BACK again to exit&quot;, Toast.LENGTH_SHORT).show()\r\n    \r\n            Handler(Looper.getMainLooper()).postDelayed(Runnable { doubleBackToExitPressedOnce = false }, 2000)\r\n        }\r\n\r\nI Think this handler helps to reset the variable after 2 second.\r\n","title":"Clicking the back button twice to exit an activity","body":"<blockquote>\n<p>In Java Activity:</p>\n</blockquote>\n<pre><code>boolean doubleBackToExitPressedOnce = false;\n\n@Override\npublic void onBackPressed() {\n    if (doubleBackToExitPressedOnce) {\n        super.onBackPressed();\n        return;\n    }\n        \n    this.doubleBackToExitPressedOnce = true;\n    Toast.makeText(this, &quot;Please click BACK again to exit&quot;, Toast.LENGTH_SHORT).show();\n        \n    new Handler(Looper.getMainLooper()).postDelayed(new Runnable() {\n        \n        @Override\n        public void run() {\n            doubleBackToExitPressedOnce=false;                       \n        }\n    }, 2000);\n} \n</code></pre>\n<blockquote>\n<p>In Kotlin Activity:</p>\n</blockquote>\n<pre><code>private var doubleBackToExitPressedOnce = false\noverride fun onBackPressed() {\n        if (doubleBackToExitPressedOnce) {\n            super.onBackPressed()\n            return\n        }\n\n        this.doubleBackToExitPressedOnce = true\n        Toast.makeText(this, &quot;Please click BACK again to exit&quot;, Toast.LENGTH_SHORT).show()\n\n        Handler(Looper.getMainLooper()).postDelayed(Runnable { doubleBackToExitPressedOnce = false }, 2000)\n    }\n</code></pre>\n<p>I Think this handler helps to reset the variable after 2 second.</p>\n"},{"tags":[],"owner":{"account_id":1443911,"reputation":741,"user_id":1363132,"display_name":"vHow"},"down_vote_count":0,"up_vote_count":28,"is_accepted":false,"score":28,"last_activity_date":1356766302,"creation_date":1356766302,"answer_id":14079705,"question_id":8430805,"body_markdown":"**Process Flow Diagram:**\r\n![Press again to exit.][1]\r\n\r\n  [1]: http://i.stack.imgur.com/N1Ztl.png\r\n\r\n**Java Code:**\r\n\r\n\tprivate long lastPressedTime;\r\n\tprivate static final int PERIOD = 2000;\r\n\t\r\n\t@Override\r\n\tpublic boolean onKeyDown(int keyCode, KeyEvent event) {\r\n\t\tif (event.getKeyCode() == KeyEvent.KEYCODE_BACK) {\r\n\t\t\tswitch (event.getAction()) {\r\n\t\t\tcase KeyEvent.ACTION_DOWN:\r\n\t\t\t\tif (event.getDownTime() - lastPressedTime &lt; PERIOD) {\r\n\t\t\t\t\tfinish();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tToast.makeText(getApplicationContext(), &quot;Press again to exit.&quot;,\r\n\t\t\t\t\t\t\tToast.LENGTH_SHORT).show();\r\n\t\t\t\t\tlastPressedTime = event.getEventTime();\r\n\t\t\t\t}\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t}","title":"Clicking the back button twice to exit an activity","body":"<p><strong>Process Flow Diagram:</strong>\n<img src=\"https://i.stack.imgur.com/N1Ztl.png\" alt=\"Press again to exit.\"></p>\n\n<p><strong>Java Code:</strong></p>\n\n<pre><code>private long lastPressedTime;\nprivate static final int PERIOD = 2000;\n\n@Override\npublic boolean onKeyDown(int keyCode, KeyEvent event) {\n    if (event.getKeyCode() == KeyEvent.KEYCODE_BACK) {\n        switch (event.getAction()) {\n        case KeyEvent.ACTION_DOWN:\n            if (event.getDownTime() - lastPressedTime &lt; PERIOD) {\n                finish();\n            } else {\n                Toast.makeText(getApplicationContext(), \"Press again to exit.\",\n                        Toast.LENGTH_SHORT).show();\n                lastPressedTime = event.getEventTime();\n            }\n            return true;\n        }\n    }\n    return false;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1922426,"reputation":913,"user_id":1733576,"accept_rate":50,"display_name":"Chris Rohit Brendan"},"down_vote_count":2,"up_vote_count":7,"is_accepted":false,"score":5,"last_activity_date":1524268774,"creation_date":1366352238,"answer_id":16098431,"question_id":8430805,"body_markdown":"I know this is a very old question, but this is the easiest way to do what you want.\r\n\r\n    @Override\r\n    public void onBackPressed() {\r\n       ++k; //initialise k when you first start your activity.\r\n       if(k==1){\r\n          //do whatever you want to do on first click for example:\r\n          Toast.makeText(this, &quot;Press back one more time to exit&quot;, Toast.LENGTH_LONG).show();\r\n       }else{\r\n          //do whatever you want to do on the click after the first for example:\r\n          finish(); \r\n       }\r\n    }\r\n\r\nI know this isn&#39;t the best method, but it works fine!","title":"Clicking the back button twice to exit an activity","body":"<p>I know this is a very old question, but this is the easiest way to do what you want.</p>\n\n<pre><code>@Override\npublic void onBackPressed() {\n   ++k; //initialise k when you first start your activity.\n   if(k==1){\n      //do whatever you want to do on first click for example:\n      Toast.makeText(this, \"Press back one more time to exit\", Toast.LENGTH_LONG).show();\n   }else{\n      //do whatever you want to do on the click after the first for example:\n      finish(); \n   }\n}\n</code></pre>\n\n<p>I know this isn't the best method, but it works fine!</p>\n"},{"tags":[],"owner":{"account_id":1348445,"reputation":15358,"user_id":1288725,"accept_rate":60,"display_name":"Mehul Joisar"},"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1391413418,"creation_date":1391413418,"answer_id":21522048,"question_id":8430805,"body_markdown":"Based upon the correct answer and suggestions in comments, I have created a demo which works absolutely fine and removes the handler callbacks after being used.\r\n\r\n**MainActivity.java**\r\n\r\n\r\n    package com.mehuljoisar.d_pressbacktwicetoexit;\r\n    \r\n    import android.os.Bundle;\r\n    import android.os.Handler;\r\n    import android.app.Activity;\r\n    import android.widget.Toast;\r\n    \r\n    public class MainActivity extends Activity {\r\n    \t\r\n    \tprivate static final long delay = 2000L;\r\n    \tprivate boolean mRecentlyBackPressed = false;\r\n    \tprivate Handler mExitHandler = new Handler();\r\n    \tprivate Runnable mExitRunnable = new Runnable() {\r\n    \t\t\r\n    \t\t@Override\r\n    \t\tpublic void run() {\r\n    \t\t\tmRecentlyBackPressed=false;   \r\n    \t\t}\r\n    \t};\r\n    \r\n    \t@Override\r\n    \tprotected void onCreate(Bundle savedInstanceState) {\r\n    \t\tsuper.onCreate(savedInstanceState);\r\n    \t\tsetContentView(R.layout.activity_main);\r\n    \t}\r\n    \t\r\n    \t@Override\r\n    \tpublic void onBackPressed() {\r\n    \t\t\r\n    \t\t//You may also add condition if (doubleBackToExitPressedOnce || fragmentManager.getBackStackEntryCount() != 0) // in case of Fragment-based add\r\n    \t\tif (mRecentlyBackPressed) {\r\n    \t\t\tmExitHandler.removeCallbacks(mExitRunnable);\r\n    \t\t\tmExitHandler = null;\r\n                super.onBackPressed();\r\n            }\r\n    \t\telse\r\n    \t\t{\r\n    \t        mRecentlyBackPressed = true;\r\n    \t        Toast.makeText(this, &quot;press again to exit&quot;, Toast.LENGTH_SHORT).show();\r\n    \t        mExitHandler.postDelayed(mExitRunnable, delay);\r\n    \t\t}\r\n    \t}\r\n    \r\n    }\r\n\r\n\r\nI hope it will be helpful !!","title":"Clicking the back button twice to exit an activity","body":"<p>Based upon the correct answer and suggestions in comments, I have created a demo which works absolutely fine and removes the handler callbacks after being used.</p>\n\n<p><strong>MainActivity.java</strong></p>\n\n<pre><code>package com.mehuljoisar.d_pressbacktwicetoexit;\n\nimport android.os.Bundle;\nimport android.os.Handler;\nimport android.app.Activity;\nimport android.widget.Toast;\n\npublic class MainActivity extends Activity {\n\n    private static final long delay = 2000L;\n    private boolean mRecentlyBackPressed = false;\n    private Handler mExitHandler = new Handler();\n    private Runnable mExitRunnable = new Runnable() {\n\n        @Override\n        public void run() {\n            mRecentlyBackPressed=false;   \n        }\n    };\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n    }\n\n    @Override\n    public void onBackPressed() {\n\n        //You may also add condition if (doubleBackToExitPressedOnce || fragmentManager.getBackStackEntryCount() != 0) // in case of Fragment-based add\n        if (mRecentlyBackPressed) {\n            mExitHandler.removeCallbacks(mExitRunnable);\n            mExitHandler = null;\n            super.onBackPressed();\n        }\n        else\n        {\n            mRecentlyBackPressed = true;\n            Toast.makeText(this, \"press again to exit\", Toast.LENGTH_SHORT).show();\n            mExitHandler.postDelayed(mExitRunnable, delay);\n        }\n    }\n\n}\n</code></pre>\n\n<p>I hope it will be helpful !!</p>\n"},{"tags":[],"owner":{"account_id":1767541,"reputation":5220,"user_id":1628280,"accept_rate":90,"display_name":"Saro Taşciyan"},"down_vote_count":0,"up_vote_count":255,"is_accepted":false,"score":255,"last_activity_date":1430939463,"creation_date":1394559291,"answer_id":22332291,"question_id":8430805,"body_markdown":"[Sudheesh B Nair][1]&#39;s has a nice (and accepted) answer on the question, which i think should have a better alternative such as;\r\n\r\nWhat&#39;s wrong with measuring time passed and checking if `TIME_INTERVAL` miliseconds (say 2000) passed since the last back press. The following sample code uses `System.currentTimeMillis();` to store the time `onBackPressed()` is called;\r\n\r\n    private static final int TIME_INTERVAL = 2000; // # milliseconds, desired time passed between two back presses.\r\n    private long mBackPressed;\r\n    \r\n    @Override\r\n    public void onBackPressed()\r\n    {\r\n        if (mBackPressed + TIME_INTERVAL &gt; System.currentTimeMillis()) \r\n        { \r\n            super.onBackPressed(); \r\n            return;\r\n        }\r\n        else { Toast.makeText(getBaseContext(), &quot;Tap back button in order to exit&quot;, Toast.LENGTH_SHORT).show(); }\r\n\r\n        mBackPressed = System.currentTimeMillis();\r\n    }\r\n\r\n---\r\n\r\nBack on accepted answer *critique*; Using a **`flag`** to indicate if it was pressed in last `TIME_INTERVAL` (say 2000) milliseconds and *set - reset* is via `Handler`&#39;s `postDelayed()` method was the first thing to come in my mind. But the `postDelayed()` action should be cancelled when activity is closing, removing the `Runnable`.\r\n\r\nIn order to remove the `Runnable`, it must not be declared *anonymous*, and be declared as member along with the `Handler` aswell. Then `removeCallbacks()` method of `Handler` can be called appropriately.\r\n\r\nThe following sample is the demonstration;\r\n\r\n    private boolean doubleBackToExitPressedOnce;\r\n    private Handler mHandler = new Handler();\r\n\r\n    private final Runnable mRunnable = new Runnable() {\r\n        @Override\r\n        public void run() {\r\n            doubleBackToExitPressedOnce = false;                       \r\n        }\r\n    };\r\n\r\n    @Override \r\n    protected void onDestroy() \r\n    { \r\n\t    super.onDestroy();\r\n\r\n        if (mHandler != null) { mHandler.removeCallbacks(mRunnable); }\r\n    }\r\n\r\n    @Override\r\n    public void onBackPressed() {\r\n        if (doubleBackToExitPressedOnce) {\r\n            super.onBackPressed();\r\n            return;\r\n        }\r\n     \r\n        this.doubleBackToExitPressedOnce = true;\r\n        Toast.makeText(this, &quot;Please click BACK again to exit&quot;, Toast.LENGTH_SHORT).show();\r\n \r\n        mHandler.postDelayed(mRunnable, 2000);\r\n    }\r\n\r\n---\r\n\r\nThanks to @NSouth for contributing; In order to prevent _toast message_ appearing even after the application is closed, `Toast` can be declared as a member - say `mExitToast` - and can be cancelled via `mExitToast.cancel();` just before `super.onBackPressed();` call.\r\n\r\n  [1]: https://stackoverflow.com/questions/8430805/android-clicking-twice-the-back-button-to-exit-activity/13578600#13578600","title":"Clicking the back button twice to exit an activity","body":"<p><a href=\"https://stackoverflow.com/questions/8430805/android-clicking-twice-the-back-button-to-exit-activity/13578600#13578600\">Sudheesh B Nair</a>'s has a nice (and accepted) answer on the question, which i think should have a better alternative such as;</p>\n\n<p>What's wrong with measuring time passed and checking if <code>TIME_INTERVAL</code> miliseconds (say 2000) passed since the last back press. The following sample code uses <code>System.currentTimeMillis();</code> to store the time <code>onBackPressed()</code> is called;</p>\n\n<pre><code>private static final int TIME_INTERVAL = 2000; // # milliseconds, desired time passed between two back presses.\nprivate long mBackPressed;\n\n@Override\npublic void onBackPressed()\n{\n    if (mBackPressed + TIME_INTERVAL &gt; System.currentTimeMillis()) \n    { \n        super.onBackPressed(); \n        return;\n    }\n    else { Toast.makeText(getBaseContext(), \"Tap back button in order to exit\", Toast.LENGTH_SHORT).show(); }\n\n    mBackPressed = System.currentTimeMillis();\n}\n</code></pre>\n\n<hr>\n\n<p>Back on accepted answer <em>critique</em>; Using a <strong><code>flag</code></strong> to indicate if it was pressed in last <code>TIME_INTERVAL</code> (say 2000) milliseconds and <em>set - reset</em> is via <code>Handler</code>'s <code>postDelayed()</code> method was the first thing to come in my mind. But the <code>postDelayed()</code> action should be cancelled when activity is closing, removing the <code>Runnable</code>.</p>\n\n<p>In order to remove the <code>Runnable</code>, it must not be declared <em>anonymous</em>, and be declared as member along with the <code>Handler</code> aswell. Then <code>removeCallbacks()</code> method of <code>Handler</code> can be called appropriately.</p>\n\n<p>The following sample is the demonstration;</p>\n\n<pre><code>private boolean doubleBackToExitPressedOnce;\nprivate Handler mHandler = new Handler();\n\nprivate final Runnable mRunnable = new Runnable() {\n    @Override\n    public void run() {\n        doubleBackToExitPressedOnce = false;                       \n    }\n};\n\n@Override \nprotected void onDestroy() \n{ \n    super.onDestroy();\n\n    if (mHandler != null) { mHandler.removeCallbacks(mRunnable); }\n}\n\n@Override\npublic void onBackPressed() {\n    if (doubleBackToExitPressedOnce) {\n        super.onBackPressed();\n        return;\n    }\n\n    this.doubleBackToExitPressedOnce = true;\n    Toast.makeText(this, \"Please click BACK again to exit\", Toast.LENGTH_SHORT).show();\n\n    mHandler.postDelayed(mRunnable, 2000);\n}\n</code></pre>\n\n<hr>\n\n<p>Thanks to @NSouth for contributing; In order to prevent <em>toast message</em> appearing even after the application is closed, <code>Toast</code> can be declared as a member - say <code>mExitToast</code> - and can be cancelled via <code>mExitToast.cancel();</code> just before <code>super.onBackPressed();</code> call.</p>\n"},{"tags":[],"owner":{"account_id":2744869,"reputation":2363,"user_id":2365507,"display_name":"Sai Aditya"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1395728570,"creation_date":1395727377,"answer_id":22626586,"question_id":8430805,"body_markdown":"\r\n\r\n\r\n    @Override public void onBackPressed() {\r\n       Log.d(&quot;CDA&quot;, &quot;onBackPressed Called&quot;);\r\n       Intent intent = new Intent();\r\n       intent.setAction(Intent.ACTION_MAIN);\r\n       intent.addCategory(Intent.CATEGORY_HOME);\r\n\r\n       startActivity(intent);\r\n    }","title":"Clicking the back button twice to exit an activity","body":"<pre><code>@Override public void onBackPressed() {\n   Log.d(\"CDA\", \"onBackPressed Called\");\n   Intent intent = new Intent();\n   intent.setAction(Intent.ACTION_MAIN);\n   intent.addCategory(Intent.CATEGORY_HOME);\n\n   startActivity(intent);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1031279,"reputation":7717,"user_id":1039555,"accept_rate":56,"display_name":"Kartik"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1397716757,"creation_date":1397716757,"answer_id":23126219,"question_id":8430805,"body_markdown":"[Zefnus][1]&#39;s answer using System.currentTimeMillis() is the best one (+1). The way I did it is **not** better than that, but still posting it to add to the above ideas.\r\n\r\nIf the toast is not visible when the back button is pressed, the toast is displayed, whereas, if it is visible (back has already been pressed once within the last `Toast.LENGTH_SHORT` time), then it exits.\r\n\r\n    exitToast = Toast.makeText(this, &quot;Press again to exit&quot;,\tToast.LENGTH_SHORT);\r\n    .\r\n    .\r\n    @Override\r\n    public void onBackPressed() {\r\n       if (exitToast.getView().getWindowToken() == null) //if toast is currently not visible\r\n          exitToast.show();  //then show toast saying &#39;press againt to exit&#39;\r\n       else {                                            //if toast is visible then\r\n          finish();                                      //or super.onBackPressed();\r\n          exitToast.cancel();\r\n       }\r\n    }\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/22332291/1039555","title":"Clicking the back button twice to exit an activity","body":"<p><a href=\"https://stackoverflow.com/a/22332291/1039555\">Zefnus</a>'s answer using System.currentTimeMillis() is the best one (+1). The way I did it is <strong>not</strong> better than that, but still posting it to add to the above ideas.</p>\n\n<p>If the toast is not visible when the back button is pressed, the toast is displayed, whereas, if it is visible (back has already been pressed once within the last <code>Toast.LENGTH_SHORT</code> time), then it exits.</p>\n\n<pre><code>exitToast = Toast.makeText(this, \"Press again to exit\", Toast.LENGTH_SHORT);\n.\n.\n@Override\npublic void onBackPressed() {\n   if (exitToast.getView().getWindowToken() == null) //if toast is currently not visible\n      exitToast.show();  //then show toast saying 'press againt to exit'\n   else {                                            //if toast is visible then\n      finish();                                      //or super.onBackPressed();\n      exitToast.cancel();\n   }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2065950,"reputation":25914,"user_id":1841457,"accept_rate":65,"display_name":"Chintan Rathod"},"down_vote_count":0,"up_vote_count":28,"is_accepted":false,"score":28,"last_activity_date":1527830812,"creation_date":1400913566,"answer_id":23842058,"question_id":8430805,"body_markdown":"There is very simplest way among all these answers.\r\n\r\nSimply write following code inside `onBackPressed()` method.\r\n\r\n    long back_pressed;\r\n\r\n\t@Override\r\n\tpublic void onBackPressed() {\r\n\t\tif (back_pressed + 1000 &gt; System.currentTimeMillis()){\r\n\t\t\tsuper.onBackPressed();\r\n\t\t}\r\n\t\telse{\r\n\t\t\tToast.makeText(getBaseContext(),\r\n\t\t\t\t\t&quot;Press once again to exit!&quot;, Toast.LENGTH_SHORT)\r\n\t\t\t\t\t.show();\r\n\t\t}\r\n\t\tback_pressed = System.currentTimeMillis();\r\n\t}\r\n\r\nYou need to define `back_pressed` object as `long` in activity.\r\n","title":"Clicking the back button twice to exit an activity","body":"<p>There is very simplest way among all these answers.</p>\n\n<p>Simply write following code inside <code>onBackPressed()</code> method.</p>\n\n<pre><code>long back_pressed;\n\n@Override\npublic void onBackPressed() {\n    if (back_pressed + 1000 &gt; System.currentTimeMillis()){\n        super.onBackPressed();\n    }\n    else{\n        Toast.makeText(getBaseContext(),\n                \"Press once again to exit!\", Toast.LENGTH_SHORT)\n                .show();\n    }\n    back_pressed = System.currentTimeMillis();\n}\n</code></pre>\n\n<p>You need to define <code>back_pressed</code> object as <code>long</code> in activity.</p>\n"},{"tags":[],"owner":{"account_id":3481402,"reputation":2581,"user_id":2913356,"display_name":"Tomasz Nguyen"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1416309282,"creation_date":1416309282,"answer_id":26992953,"question_id":8430805,"body_markdown":"Recently, I needed to implement this back button feature in an app of mine. The answers on the original question were useful, but I had to take two more points into consideration:\r\n\r\n 1. At some points in time, the back button is disabled\r\n 2. The main activity is using fragments in combination with a back stack\r\n\r\nBased on the answers and comments, I created the following code:\r\n\r\n    private static final long BACK_PRESS_DELAY = 1000;\r\n\r\n    private boolean mBackPressCancelled = false;\r\n    private long mBackPressTimestamp;\r\n    private Toast mBackPressToast;\r\n\r\n    @Override\r\n    public void onBackPressed() {\r\n        // Do nothing if the back button is disabled.\r\n        if (!mBackPressCancelled) {\r\n            // Pop fragment if the back stack is not empty.\r\n            if (getSupportFragmentManager().getBackStackEntryCount() &gt; 0) {\r\n                super.onBackPressed();\r\n            } else {\r\n                if (mBackPressToast != null) {\r\n                    mBackPressToast.cancel();\r\n                }\r\n\r\n                long currentTimestamp = System.currentTimeMillis();\r\n\r\n                if (currentTimestamp &lt; mBackPressTimestamp + BACK_PRESS_DELAY) {\r\n                    super.onBackPressed();\r\n                } else {\r\n                    mBackPressTimestamp = currentTimestamp;\r\n\r\n                    mBackPressToast = Toast.makeText(this, getString(R.string.warning_exit), Toast.LENGTH_SHORT);\r\n                    mBackPressToast.show();\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\nThe code above assumes that the support library is used. If you use fragments but not the support library, you want to replace `getSupportFragmentManager()` by `getFragmentManager()`.\r\n\r\nRemove the first `if`, if the back button is never cancelled. Remove the second `if`, if you don`t use fragments or a fragment back stack\r\n\r\nAlso, it is important to be aware that the method `onBackPressed` is supported since Android 2.0. Check [this page][1] for an elaborate description. To make the back press feature work on older versions as well, add the following method to your activity:\r\n\r\n    @Override\r\n    public boolean onKeyDown(int keyCode, KeyEvent event)  {\r\n        if (android.os.Build.VERSION.SDK_INT &lt; android.os.Build.VERSION_CODES.ECLAIR\r\n                &amp;&amp; keyCode == KeyEvent.KEYCODE_BACK\r\n                &amp;&amp; event.getRepeatCount() == 0) {\r\n            // Take care of calling this method on earlier versions of\r\n            // the platform where it doesn&#39;t exist.\r\n            onBackPressed();\r\n        }\r\n    \r\n        return super.onKeyDown(keyCode, event);\r\n    }\r\n\r\n\r\n  [1]: http://android-developers.blogspot.co.uk/2009/12/back-and-other-hard-keys-three-stories.html","title":"Clicking the back button twice to exit an activity","body":"<p>Recently, I needed to implement this back button feature in an app of mine. The answers on the original question were useful, but I had to take two more points into consideration:</p>\n\n<ol>\n<li>At some points in time, the back button is disabled</li>\n<li>The main activity is using fragments in combination with a back stack</li>\n</ol>\n\n<p>Based on the answers and comments, I created the following code:</p>\n\n<pre><code>private static final long BACK_PRESS_DELAY = 1000;\n\nprivate boolean mBackPressCancelled = false;\nprivate long mBackPressTimestamp;\nprivate Toast mBackPressToast;\n\n@Override\npublic void onBackPressed() {\n    // Do nothing if the back button is disabled.\n    if (!mBackPressCancelled) {\n        // Pop fragment if the back stack is not empty.\n        if (getSupportFragmentManager().getBackStackEntryCount() &gt; 0) {\n            super.onBackPressed();\n        } else {\n            if (mBackPressToast != null) {\n                mBackPressToast.cancel();\n            }\n\n            long currentTimestamp = System.currentTimeMillis();\n\n            if (currentTimestamp &lt; mBackPressTimestamp + BACK_PRESS_DELAY) {\n                super.onBackPressed();\n            } else {\n                mBackPressTimestamp = currentTimestamp;\n\n                mBackPressToast = Toast.makeText(this, getString(R.string.warning_exit), Toast.LENGTH_SHORT);\n                mBackPressToast.show();\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>The code above assumes that the support library is used. If you use fragments but not the support library, you want to replace <code>getSupportFragmentManager()</code> by <code>getFragmentManager()</code>.</p>\n\n<p>Remove the first <code>if</code>, if the back button is never cancelled. Remove the second <code>if</code>, if you don`t use fragments or a fragment back stack</p>\n\n<p>Also, it is important to be aware that the method <code>onBackPressed</code> is supported since Android 2.0. Check <a href=\"http://android-developers.blogspot.co.uk/2009/12/back-and-other-hard-keys-three-stories.html\" rel=\"noreferrer\">this page</a> for an elaborate description. To make the back press feature work on older versions as well, add the following method to your activity:</p>\n\n<pre><code>@Override\npublic boolean onKeyDown(int keyCode, KeyEvent event)  {\n    if (android.os.Build.VERSION.SDK_INT &lt; android.os.Build.VERSION_CODES.ECLAIR\n            &amp;&amp; keyCode == KeyEvent.KEYCODE_BACK\n            &amp;&amp; event.getRepeatCount() == 0) {\n        // Take care of calling this method on earlier versions of\n        // the platform where it doesn't exist.\n        onBackPressed();\n    }\n\n    return super.onKeyDown(keyCode, event);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5621728,"reputation":189,"user_id":4451335,"display_name":"Max Lee"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1421872388,"creation_date":1421872388,"answer_id":28076289,"question_id":8430805,"body_markdown":"It is not a good idea to use a Runnable when exit the application, I recently figure out a much simpler way to record and compare the period between two BACK button clicks. Sample code as following:\r\n\r\n    private static long back_pressed_time;\r\n    private static long PERIOD = 2000;\r\n    \r\n    @Override\r\n    public void onBackPressed()\r\n    {\r\n            if (back_pressed_time + PERIOD &gt; System.currentTimeMillis()) super.onBackPressed();\r\n            else Toast.makeText(getBaseContext(), &quot;Press once again to exit!&quot;, Toast.LENGTH_SHORT).show();\r\n            back_pressed_time = System.currentTimeMillis();\r\n    }\r\n\r\nThis will do the trick  to exit the application  by a double BACK button clicks within a certain delay period which is 2000 millisecond in sample.","title":"Clicking the back button twice to exit an activity","body":"<p>It is not a good idea to use a Runnable when exit the application, I recently figure out a much simpler way to record and compare the period between two BACK button clicks. Sample code as following:</p>\n\n<pre><code>private static long back_pressed_time;\nprivate static long PERIOD = 2000;\n\n@Override\npublic void onBackPressed()\n{\n        if (back_pressed_time + PERIOD &gt; System.currentTimeMillis()) super.onBackPressed();\n        else Toast.makeText(getBaseContext(), \"Press once again to exit!\", Toast.LENGTH_SHORT).show();\n        back_pressed_time = System.currentTimeMillis();\n}\n</code></pre>\n\n<p>This will do the trick  to exit the application  by a double BACK button clicks within a certain delay period which is 2000 millisecond in sample.</p>\n"},{"tags":[],"owner":{"account_id":4819096,"reputation":387,"user_id":3890243,"display_name":"Rakshith"},"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1542383907,"creation_date":1431512284,"answer_id":30211914,"question_id":8430805,"body_markdown":"     public void onBackPressed() {\r\n        if (doubleBackToExitPressedOnce) {\r\n            super.onBackPressed();\r\n            return;\r\n        }\r\n\r\n        this.doubleBackToExitPressedOnce = true;\r\n        Toast.makeText(this, &quot;Please click BACK again to exit&quot;, Toast.LENGTH_SHORT).show();\r\n\r\n        new Handler().postDelayed(new Runnable() {\r\n\r\n            @Override\r\n            public void run() {\r\n                doubleBackToExitPressedOnce=false;\r\n            }\r\n        }, 2000);\r\n\r\n**Declare Variable**` private boolean doubleBackToExitPressedOnce = false;`\r\n\r\n&gt; Paste this in your Main Activity and this will solve your issue\r\n","title":"Clicking the back button twice to exit an activity","body":"<pre><code> public void onBackPressed() {\n    if (doubleBackToExitPressedOnce) {\n        super.onBackPressed();\n        return;\n    }\n\n    this.doubleBackToExitPressedOnce = true;\n    Toast.makeText(this, \"Please click BACK again to exit\", Toast.LENGTH_SHORT).show();\n\n    new Handler().postDelayed(new Runnable() {\n\n        @Override\n        public void run() {\n            doubleBackToExitPressedOnce=false;\n        }\n    }, 2000);\n</code></pre>\n\n<p><strong>Declare Variable</strong><code>private boolean doubleBackToExitPressedOnce = false;</code></p>\n\n<blockquote>\n  <p>Paste this in your Main Activity and this will solve your issue</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":1387192,"reputation":61110,"user_id":1318946,"accept_rate":52,"display_name":"Pratik Butani"},"down_vote_count":2,"up_vote_count":10,"is_accepted":false,"score":8,"last_activity_date":1450097562,"creation_date":1450097562,"answer_id":34267572,"question_id":8430805,"body_markdown":"The Accepted answer is Best one but if you are using **[`Android Design Support Library`][1]** then you can use `SnackBar` for Better Views. \r\n\r\n       boolean doubleBackToExitPressedOnce = false;\r\n    \r\n        @Override\r\n        public void onBackPressed() {\r\n            if (doubleBackToExitPressedOnce) {\r\n                super.onBackPressed();\r\n                return;\r\n            }\r\n    \r\n            this.doubleBackToExitPressedOnce = true;\r\n    \r\n            Snackbar.make(findViewById(R.id.photo_album_parent_view), &quot;Please click BACK again to exit&quot;, Snackbar.LENGTH_SHORT).show();\r\n    \r\n            new Handler().postDelayed(new Runnable() {\r\n    \r\n                @Override\r\n                public void run() {\r\n                    doubleBackToExitPressedOnce=false;\r\n                }\r\n            }, 2000);\r\n        }\r\n\r\n\r\n  [1]: http://android-developers.blogspot.in/2015/05/android-design-support-library.html","title":"Clicking the back button twice to exit an activity","body":"<p>The Accepted answer is Best one but if you are using <strong><a href=\"http://android-developers.blogspot.in/2015/05/android-design-support-library.html\" rel=\"noreferrer\"><code>Android Design Support Library</code></a></strong> then you can use <code>SnackBar</code> for Better Views. </p>\n\n<pre><code>   boolean doubleBackToExitPressedOnce = false;\n\n    @Override\n    public void onBackPressed() {\n        if (doubleBackToExitPressedOnce) {\n            super.onBackPressed();\n            return;\n        }\n\n        this.doubleBackToExitPressedOnce = true;\n\n        Snackbar.make(findViewById(R.id.photo_album_parent_view), \"Please click BACK again to exit\", Snackbar.LENGTH_SHORT).show();\n\n        new Handler().postDelayed(new Runnable() {\n\n            @Override\n            public void run() {\n                doubleBackToExitPressedOnce=false;\n            }\n        }, 2000);\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5022597,"reputation":1035,"user_id":4035641,"display_name":"Ashik"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1460388855,"creation_date":1460385820,"answer_id":36551919,"question_id":8430805,"body_markdown":"1. Declare a global Toast variable for MainActivity Class. example: Toast exitToast;\r\n2. Initialize it in onCreate view method. example:\r\n     exitToast = Toast.makeText(getApplicationContext(), &quot;Press back again to  exit&quot;, Toast.LENGTH_SHORT);\r\n3. Finally create a onBackPressedMethod as Follows:\r\n\r\n        @Override\r\n        public void onBackPressed() {\r\n\r\n            if (exitToast.getView().isShown()) {\r\n                exitToast.cancel();\r\n                finish();\r\n            } else {\r\n                exitToast.show();\r\n            }\r\n        }\r\n\r\nThis works correctly, i have tested. and I think this is much simpler. ","title":"Clicking the back button twice to exit an activity","body":"<ol>\n<li>Declare a global Toast variable for MainActivity Class. example: Toast exitToast;</li>\n<li>Initialize it in onCreate view method. example:\n exitToast = Toast.makeText(getApplicationContext(), \"Press back again to  exit\", Toast.LENGTH_SHORT);</li>\n<li><p>Finally create a onBackPressedMethod as Follows:</p>\n\n<pre><code>@Override\npublic void onBackPressed() {\n\n    if (exitToast.getView().isShown()) {\n        exitToast.cancel();\n        finish();\n    } else {\n        exitToast.show();\n    }\n}\n</code></pre></li>\n</ol>\n\n<p>This works correctly, i have tested. and I think this is much simpler. </p>\n"},{"tags":[],"owner":{"account_id":8390875,"reputation":51,"user_id":6299656,"display_name":"maniix"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1462709078,"creation_date":1462707875,"answer_id":37099448,"question_id":8430805,"body_markdown":"    boolean doubleBackToExitPressedOnce = false;\r\n\r\n    @Override\r\n    public void onBackPressed() {\r\n        if (doubleBackToExitPressedOnce) {\r\n            super.onBackPressed();\r\n            return;\r\n        }\r\n\r\n        this.doubleBackToExitPressedOnce = true;\r\n\r\n        Snackbar.make(findViewById(R.id.photo_album_parent_view), &quot;Please click BACK again to exit&quot;, Snackbar.LENGTH_SHORT).show();\r\n\r\n        new Handler().postDelayed(new Runnable() {\r\n\r\n            @Override\r\n            public void run() {\r\n                doubleBackToExitPressedOnce=false;\r\n            }\r\n        }, 2000);\r\n    }","title":"Clicking the back button twice to exit an activity","body":"<pre><code>boolean doubleBackToExitPressedOnce = false;\n\n@Override\npublic void onBackPressed() {\n    if (doubleBackToExitPressedOnce) {\n        super.onBackPressed();\n        return;\n    }\n\n    this.doubleBackToExitPressedOnce = true;\n\n    Snackbar.make(findViewById(R.id.photo_album_parent_view), \"Please click BACK again to exit\", Snackbar.LENGTH_SHORT).show();\n\n    new Handler().postDelayed(new Runnable() {\n\n        @Override\n        public void run() {\n            doubleBackToExitPressedOnce=false;\n        }\n    }, 2000);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8523476,"reputation":31,"user_id":6389553,"display_name":"Bu Ti"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1464335558,"creation_date":1464332736,"answer_id":37476919,"question_id":8430805,"body_markdown":"For this purpose I have implemented the following function:\r\n\r\n    private long onRecentBackPressedTime;\r\n    @Override\r\n    public void onBackPressed() {\r\n        if (System.currentTimeMillis() - onRecentBackPressedTime &gt; 2000) {\r\n           onRecentBackPressedTime = System.currentTimeMillis();\r\n           Toast.makeText(this, &quot;Please press BACK again to exit&quot;, Toast.LENGTH_SHORT).show();\r\n           return;\r\n         }\r\n       super.onBackPressed();\r\n    }","title":"Clicking the back button twice to exit an activity","body":"<p>For this purpose I have implemented the following function:</p>\n\n<pre><code>private long onRecentBackPressedTime;\n@Override\npublic void onBackPressed() {\n    if (System.currentTimeMillis() - onRecentBackPressedTime &gt; 2000) {\n       onRecentBackPressedTime = System.currentTimeMillis();\n       Toast.makeText(this, \"Please press BACK again to exit\", Toast.LENGTH_SHORT).show();\n       return;\n     }\n   super.onBackPressed();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5811740,"reputation":1909,"user_id":4582558,"accept_rate":50,"display_name":"Divyang Panchal"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1464416866,"creation_date":1464415898,"answer_id":37495838,"question_id":8430805,"body_markdown":"Some Improvements in Sudheesh B Nair&#39;s answer, i have noticed it will wait for handler even while pressing back twice immediately, so cancel handler as shown below. I have cancled toast also to prevent it to display after app exit.\r\n\r\n   \r\n\r\n     boolean doubleBackToExitPressedOnce = false;\r\n            Handler myHandler;\r\n            Runnable myRunnable;\r\n            Toast myToast;\r\n        \r\n        @Override\r\n            public void onBackPressed() {\r\n                if (doubleBackToExitPressedOnce) {\r\n                    myHandler.removeCallbacks(myRunnable);\r\n                    myToast.cancel();\r\n                    super.onBackPressed();\r\n                    return;\r\n                }\r\n        \r\n                this.doubleBackToExitPressedOnce = true;\r\n                myToast = Toast.makeText(this, &quot;Please click BACK again to exit&quot;, Toast.LENGTH_SHORT);\r\n                myToast.show();\r\n        \r\n                myHandler = new Handler();\r\n        \r\n                myRunnable = new Runnable() {\r\n        \r\n                    @Override\r\n                    public void run() {\r\n                        doubleBackToExitPressedOnce = false;\r\n                    }\r\n                };\r\n                myHandler.postDelayed(myRunnable, 2000);\r\n            }","title":"Clicking the back button twice to exit an activity","body":"<p>Some Improvements in Sudheesh B Nair's answer, i have noticed it will wait for handler even while pressing back twice immediately, so cancel handler as shown below. I have cancled toast also to prevent it to display after app exit.</p>\n\n<pre><code> boolean doubleBackToExitPressedOnce = false;\n        Handler myHandler;\n        Runnable myRunnable;\n        Toast myToast;\n\n    @Override\n        public void onBackPressed() {\n            if (doubleBackToExitPressedOnce) {\n                myHandler.removeCallbacks(myRunnable);\n                myToast.cancel();\n                super.onBackPressed();\n                return;\n            }\n\n            this.doubleBackToExitPressedOnce = true;\n            myToast = Toast.makeText(this, \"Please click BACK again to exit\", Toast.LENGTH_SHORT);\n            myToast.show();\n\n            myHandler = new Handler();\n\n            myRunnable = new Runnable() {\n\n                @Override\n                public void run() {\n                    doubleBackToExitPressedOnce = false;\n                }\n            };\n            myHandler.postDelayed(myRunnable, 2000);\n        }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6577365,"reputation":424,"user_id":5082855,"display_name":"k8C"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1466750332,"creation_date":1466602302,"answer_id":37969638,"question_id":8430805,"body_markdown":"A slightly better method than [Zefnus][1] I think. Call System.currentTimeMillis() just one time and omit `return;` :\r\n\r\n    long previousTime;\r\n\r\n    @Override\r\n    public void onBackPressed()\r\n    {\r\n        if (2000 + previousTime &gt; (previousTime = System.currentTimeMillis())) \r\n        { \r\n            super.onBackPressed();\r\n        } else {\r\n            Toast.makeText(getBaseContext(), &quot;Tap back button in order to exit&quot;, Toast.LENGTH_SHORT).show();\r\n        }\r\n    }\r\n\r\n  [1]: https://stackoverflow.com/a/22332291/5082855","title":"Clicking the back button twice to exit an activity","body":"<p>A slightly better method than <a href=\"https://stackoverflow.com/a/22332291/5082855\">Zefnus</a> I think. Call System.currentTimeMillis() just one time and omit <code>return;</code> :</p>\n\n<pre><code>long previousTime;\n\n@Override\npublic void onBackPressed()\n{\n    if (2000 + previousTime &gt; (previousTime = System.currentTimeMillis())) \n    { \n        super.onBackPressed();\n    } else {\n        Toast.makeText(getBaseContext(), \"Tap back button in order to exit\", Toast.LENGTH_SHORT).show();\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4951203,"reputation":7272,"user_id":3985071,"accept_rate":54,"display_name":"Arpit Patel"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1527092417,"creation_date":1470917528,"answer_id":38896053,"question_id":8430805,"body_markdown":"This also helps when you have previous stack activity stored in stack. \r\n\r\nI have modified Sudheesh&#39;s answer \r\n\r\n\r\n    boolean doubleBackToExitPressedOnce = false;\r\n    \r\n    @Override\r\n    public void onBackPressed() {\r\n        if (doubleBackToExitPressedOnce) {\r\n            //super.onBackPressed();\r\n    \r\n      Intent intent = new Intent(Intent.ACTION_MAIN);\r\n                        intent.addCategory(Intent.CATEGORY_HOME);\r\n                        intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);//***Change Here***\r\n                        startActivity(intent);\r\n                        finish();\r\n                        System.exit(0);\r\n            return;\r\n        }\r\n    \r\n        this.doubleBackToExitPressedOnce = true;\r\n        Toast.makeText(this, &quot;Please click BACK again to exit&quot;, Toast.LENGTH_SHORT).show();\r\n    \r\n        new Handler().postDelayed(new Runnable() {\r\n    \r\n            @Override\r\n            public void run() {\r\n                doubleBackToExitPressedOnce=false;                       \r\n            }\r\n        }, 2000);\r\n    } ","title":"Clicking the back button twice to exit an activity","body":"<p>This also helps when you have previous stack activity stored in stack. </p>\n\n<p>I have modified Sudheesh's answer </p>\n\n<pre><code>boolean doubleBackToExitPressedOnce = false;\n\n@Override\npublic void onBackPressed() {\n    if (doubleBackToExitPressedOnce) {\n        //super.onBackPressed();\n\n  Intent intent = new Intent(Intent.ACTION_MAIN);\n                    intent.addCategory(Intent.CATEGORY_HOME);\n                    intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);//***Change Here***\n                    startActivity(intent);\n                    finish();\n                    System.exit(0);\n        return;\n    }\n\n    this.doubleBackToExitPressedOnce = true;\n    Toast.makeText(this, \"Please click BACK again to exit\", Toast.LENGTH_SHORT).show();\n\n    new Handler().postDelayed(new Runnable() {\n\n        @Override\n        public void run() {\n            doubleBackToExitPressedOnce=false;                       \n        }\n    }, 2000);\n} \n</code></pre>\n"},{"tags":[],"owner":{"account_id":8981475,"reputation":7969,"user_id":6696558,"accept_rate":75,"display_name":"Hugo Passos"},"down_vote_count":0,"up_vote_count":18,"is_accepted":false,"score":18,"last_activity_date":1605400565,"creation_date":1483798127,"answer_id":41522301,"question_id":8430805,"body_markdown":"You may use a snackbar instead of a toast, so you can rely on their visibility to decide whether to close the app or not. Take this example:\r\n\r\n\r\n```\r\nSnackbar mSnackbar;\r\n\r\n@Override\r\nprotected void onCreate(Bundle savedInstanceState) {\r\n    super.onCreate(savedInstanceState);\r\n    setContentView(R.layout.activity_main);\r\n\r\n    final LinearLayout layout = findViewById(R.id.layout_main);\r\n    mSnackbar = Snackbar.make(layout, R.string.press_back_again, Snackbar.LENGTH_SHORT);\r\n}\r\n\r\n@Override\r\npublic void onBackPressed() {\r\n    if (mSnackbar.isShown()) {\r\n        super.onBackPressed();\r\n    } else {\r\n        mSnackbar.show();\r\n    }\r\n}\r\n```","title":"Clicking the back button twice to exit an activity","body":"<p>You may use a snackbar instead of a toast, so you can rely on their visibility to decide whether to close the app or not. Take this example:</p>\n<pre><code>Snackbar mSnackbar;\n\n@Override\nprotected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.activity_main);\n\n    final LinearLayout layout = findViewById(R.id.layout_main);\n    mSnackbar = Snackbar.make(layout, R.string.press_back_again, Snackbar.LENGTH_SHORT);\n}\n\n@Override\npublic void onBackPressed() {\n    if (mSnackbar.isShown()) {\n        super.onBackPressed();\n    } else {\n        mSnackbar.show();\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8465187,"reputation":463,"user_id":6349540,"display_name":"Saket Kumar"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1484816637,"creation_date":1484816637,"answer_id":41737679,"question_id":8430805,"body_markdown":"Here is the full working code. And also don&#39;t forget to remove the callbacks so that it don&#39;t cause a memory leak in the app. :) \r\n\r\n\r\n    private boolean backPressedOnce = false;\r\n    private Handler statusUpdateHandler;\r\n    private Runnable statusUpdateRunnable;\r\n\r\n    public void onBackPressed() {\r\n            if (backPressedOnce) {\r\n                finish();\r\n            }\r\n\r\n            backPressedOnce = true;\r\n            final Toast toast = Toast.makeText(this, &quot;Press again to exit&quot;, Toast.LENGTH_SHORT);\r\n            toast.show();\r\n            \r\n            statusUpdateRunnable = new Runnable() {\r\n                @Override\r\n                public void run() {\r\n                    backPressedOnce = false;\r\n                    toast.cancel();  //Removes the toast after the exit.\r\n                }\r\n            };\r\n\r\n            statusUpdateHandler.postDelayed(statusUpdateRunnable, 2000);\r\n    }\r\n\r\n    @Override\r\n    protected void onDestroy() {\r\n        super.onDestroy();\r\n        if (statusUpdateHandler != null) {\r\n            statusUpdateHandler.removeCallbacks(statusUpdateRunnable);\r\n        }\r\n    }","title":"Clicking the back button twice to exit an activity","body":"<p>Here is the full working code. And also don't forget to remove the callbacks so that it don't cause a memory leak in the app. :) </p>\n\n<pre><code>private boolean backPressedOnce = false;\nprivate Handler statusUpdateHandler;\nprivate Runnable statusUpdateRunnable;\n\npublic void onBackPressed() {\n        if (backPressedOnce) {\n            finish();\n        }\n\n        backPressedOnce = true;\n        final Toast toast = Toast.makeText(this, \"Press again to exit\", Toast.LENGTH_SHORT);\n        toast.show();\n\n        statusUpdateRunnable = new Runnable() {\n            @Override\n            public void run() {\n                backPressedOnce = false;\n                toast.cancel();  //Removes the toast after the exit.\n            }\n        };\n\n        statusUpdateHandler.postDelayed(statusUpdateRunnable, 2000);\n}\n\n@Override\nprotected void onDestroy() {\n    super.onDestroy();\n    if (statusUpdateHandler != null) {\n        statusUpdateHandler.removeCallbacks(statusUpdateRunnable);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5083386,"reputation":13,"user_id":4078830,"display_name":"MobileOS"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1486045699,"creation_date":1486045699,"answer_id":42004798,"question_id":8430805,"body_markdown":"This is the same of the accepted and most voted response but this snipped used Snackbar instead of Toast.\r\n\r\n    boolean doubleBackToExitPressedOnce = false;\r\n    \r\n        @Override\r\n        public void onBackPressed() {\r\n            if (doubleBackToExitPressedOnce) {\r\n                super.onBackPressed();\r\n                return;\r\n            }\r\n    \r\n            this.doubleBackToExitPressedOnce = true;\r\n            Snackbar.make(content, &quot;Please click BACK again to exit&quot;, Snackbar.LENGTH_SHORT)\r\n                    .setAction(&quot;Action&quot;, null).show();\r\n    \r\n    \r\n            new Handler().postDelayed(new Runnable() {\r\n    \r\n                @Override\r\n                public void run() {\r\n                    doubleBackToExitPressedOnce=false;\r\n                }\r\n            }, 2000);\r\n        }","title":"Clicking the back button twice to exit an activity","body":"<p>This is the same of the accepted and most voted response but this snipped used Snackbar instead of Toast.</p>\n\n<pre><code>boolean doubleBackToExitPressedOnce = false;\n\n    @Override\n    public void onBackPressed() {\n        if (doubleBackToExitPressedOnce) {\n            super.onBackPressed();\n            return;\n        }\n\n        this.doubleBackToExitPressedOnce = true;\n        Snackbar.make(content, \"Please click BACK again to exit\", Snackbar.LENGTH_SHORT)\n                .setAction(\"Action\", null).show();\n\n\n        new Handler().postDelayed(new Runnable() {\n\n            @Override\n            public void run() {\n                doubleBackToExitPressedOnce=false;\n            }\n        }, 2000);\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4559240,"reputation":1785,"user_id":3702021,"accept_rate":70,"display_name":"Kasim Rangwala"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1487919124,"creation_date":1487919124,"answer_id":42432493,"question_id":8430805,"body_markdown":"In my case, I&#39;ve depend on `Snackbar#isShown()` for better `UX`.\r\n\r\n    private Snackbar exitSnackBar;\r\n\r\n    @Override\r\n    public void onBackPressed() {\r\n        if (isNavDrawerOpen()) {\r\n            closeNavDrawer();\r\n        } else if (getSupportFragmentManager().getBackStackEntryCount() == 0) {\r\n            if (exitSnackBar != null &amp;&amp; exitSnackBar.isShown()) {\r\n                super.onBackPressed();\r\n            } else {\r\n                exitSnackBar = Snackbar.make(\r\n                        binding.getRoot(),\r\n                        R.string.navigation_exit,\r\n                        2000\r\n                );\r\n                exitSnackBar.show();\r\n            }\r\n        } else {\r\n            super.onBackPressed();\r\n        }\r\n    }","title":"Clicking the back button twice to exit an activity","body":"<p>In my case, I've depend on <code>Snackbar#isShown()</code> for better <code>UX</code>.</p>\n\n<pre><code>private Snackbar exitSnackBar;\n\n@Override\npublic void onBackPressed() {\n    if (isNavDrawerOpen()) {\n        closeNavDrawer();\n    } else if (getSupportFragmentManager().getBackStackEntryCount() == 0) {\n        if (exitSnackBar != null &amp;&amp; exitSnackBar.isShown()) {\n            super.onBackPressed();\n        } else {\n            exitSnackBar = Snackbar.make(\n                    binding.getRoot(),\n                    R.string.navigation_exit,\n                    2000\n            );\n            exitSnackBar.show();\n        }\n    } else {\n        super.onBackPressed();\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8725814,"reputation":687,"user_id":6527484,"accept_rate":83,"display_name":"Priya Rajan"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1499888875,"creation_date":1499888875,"answer_id":45066350,"question_id":8430805,"body_markdown":"For the activity whose is having **Navigation Drawer**, Use the following code for OnBackPressed()\r\n\r\n    boolean doubleBackToExitPressedOnce = false;\r\n    \r\n    @Override\r\n        public void onBackPressed() {\r\n            DrawerLayout drawer = (DrawerLayout) findViewById(R.id.drawer_layout);\r\n            if (drawer.isDrawerOpen(GravityCompat.START)) {\r\n                drawer.closeDrawer(GravityCompat.START);\r\n            } else {\r\n                if (doubleBackToExitPressedOnce) {\r\n                    if (getFragmentManager().getBackStackEntryCount() ==0) {\r\n                        finishAffinity();\r\n                        System.exit(0);\r\n                    } else {\r\n                        getFragmentManager().popBackStackImmediate();\r\n                    }\r\n                    return;\r\n                }\r\n    \r\n                if (getFragmentManager().getBackStackEntryCount() ==0) {\r\n                    this.doubleBackToExitPressedOnce = true;\r\n                    Toast.makeText(this, &quot;Please click BACK again to exit&quot;, Toast.LENGTH_SHORT).show();\r\n    \r\n                    new Handler().postDelayed(new Runnable() {\r\n    \r\n                        @Override\r\n                        public void run() {\r\n                            doubleBackToExitPressedOnce = false;\r\n                        }\r\n                    }, 2000);\r\n                } else {\r\n                    getFragmentManager().popBackStackImmediate();\r\n                }\r\n            }\r\n        }","title":"Clicking the back button twice to exit an activity","body":"<p>For the activity whose is having <strong>Navigation Drawer</strong>, Use the following code for OnBackPressed()</p>\n\n<pre><code>boolean doubleBackToExitPressedOnce = false;\n\n@Override\n    public void onBackPressed() {\n        DrawerLayout drawer = (DrawerLayout) findViewById(R.id.drawer_layout);\n        if (drawer.isDrawerOpen(GravityCompat.START)) {\n            drawer.closeDrawer(GravityCompat.START);\n        } else {\n            if (doubleBackToExitPressedOnce) {\n                if (getFragmentManager().getBackStackEntryCount() ==0) {\n                    finishAffinity();\n                    System.exit(0);\n                } else {\n                    getFragmentManager().popBackStackImmediate();\n                }\n                return;\n            }\n\n            if (getFragmentManager().getBackStackEntryCount() ==0) {\n                this.doubleBackToExitPressedOnce = true;\n                Toast.makeText(this, \"Please click BACK again to exit\", Toast.LENGTH_SHORT).show();\n\n                new Handler().postDelayed(new Runnable() {\n\n                    @Override\n                    public void run() {\n                        doubleBackToExitPressedOnce = false;\n                    }\n                }, 2000);\n            } else {\n                getFragmentManager().popBackStackImmediate();\n            }\n        }\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1702904,"reputation":16002,"user_id":1562548,"accept_rate":58,"display_name":"Chintan Khetiya"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1510815291,"creation_date":1510815291,"answer_id":47323406,"question_id":8430805,"body_markdown":"Here, I have generalized write the code for N tap counts. The code is similarly written for the Enable Developer option in android device phone. Even you can use this to enable features while developer testing the app.\r\n\r\n     private Handler tapHandler;\r\n     private Runnable tapRunnable;\r\n     private int mTapCount = 0;\r\n     private int milSecDealy = 2000;\r\n\r\n    onCreate(){\r\n     ...\r\n    tapHandler = new Handler(Looper.getMainLooper());\r\n    \r\n     }\r\n*Call **askToExit()** on backpress or logout option.*\r\n\r\n  \r\n\r\n    private void askToExit() {\r\n       if (mTapCount &gt;= 2) {\r\n        releaseTapValues();\r\n        /* ========= Exit = TRUE  =========  */\r\n       }\r\n    \r\n       mTapCount++;\r\n       validateTapCount();\r\n      }\r\n    \r\n    \r\n      /* Check with null to avoid create multiple instances of the runnable */\r\n      private void validateTapCount() {\r\n       if (tapRunnable == null) {\r\n        tapRunnable = new Runnable() {\r\n         @Override\r\n         public void run() {\r\n          releaseTapValues();\r\n          /* ========= Exit = FALSE  =========  */\r\n         }\r\n        };\r\n        tapHandler.postDelayed(tapRunnable, milSecDealy);\r\n       }\r\n      }\r\n    \r\n      private void releaseTapValues() {\r\n       /* Relase the value  */\r\n       if (tapHandler != null) {\r\n        tapHandler.removeCallbacks(tapRunnable);\r\n        tapRunnable = null; /* release the object */\r\n        mTapCount = 0; /* release the value */\r\n       }\r\n      }\r\n    \r\n    \r\n      @Override\r\n      protected void onDestroy() {\r\n       super.onDestroy();\r\n       releaseTapValues();\r\n      }\r\n\r\n","title":"Clicking the back button twice to exit an activity","body":"<p>Here, I have generalized write the code for N tap counts. The code is similarly written for the Enable Developer option in android device phone. Even you can use this to enable features while developer testing the app.</p>\n\n<pre><code> private Handler tapHandler;\n private Runnable tapRunnable;\n private int mTapCount = 0;\n private int milSecDealy = 2000;\n\nonCreate(){\n ...\ntapHandler = new Handler(Looper.getMainLooper());\n\n }\n</code></pre>\n\n<p><em>Call <strong>askToExit()</strong> on backpress or logout option.</em></p>\n\n<pre><code>private void askToExit() {\n   if (mTapCount &gt;= 2) {\n    releaseTapValues();\n    /* ========= Exit = TRUE  =========  */\n   }\n\n   mTapCount++;\n   validateTapCount();\n  }\n\n\n  /* Check with null to avoid create multiple instances of the runnable */\n  private void validateTapCount() {\n   if (tapRunnable == null) {\n    tapRunnable = new Runnable() {\n     @Override\n     public void run() {\n      releaseTapValues();\n      /* ========= Exit = FALSE  =========  */\n     }\n    };\n    tapHandler.postDelayed(tapRunnable, milSecDealy);\n   }\n  }\n\n  private void releaseTapValues() {\n   /* Relase the value  */\n   if (tapHandler != null) {\n    tapHandler.removeCallbacks(tapRunnable);\n    tapRunnable = null; /* release the object */\n    mTapCount = 0; /* release the value */\n   }\n  }\n\n\n  @Override\n  protected void onDestroy() {\n   super.onDestroy();\n   releaseTapValues();\n  }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4232985,"reputation":2632,"user_id":3464919,"display_name":"Codelaby"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1511808755,"creation_date":1511808755,"answer_id":47517883,"question_id":8430805,"body_markdown":"I use this\r\n\r\n    import android.app.Activity;\r\n    import android.support.annotation.StringRes;\r\n    import android.widget.Toast;\r\n    \r\n    public class ExitApp {\r\n    \r\n        private static long lastClickTime;\r\n    \r\n        public static void now(Activity ctx, @StringRes int message) {\r\n            now(ctx, ctx.getString(message), 2500);\r\n        }\r\n    \r\n        public static void now(Activity ctx, @StringRes int message, long time) {\r\n            now(ctx, ctx.getString(message), time);\r\n        }\r\n    \r\n        public static void now(Activity ctx, String message, long time) {\r\n            if (ctx != null &amp;&amp; !message.isEmpty() &amp;&amp; time != 0) {\r\n                if (lastClickTime + time &gt; System.currentTimeMillis()) {\r\n                    ctx.finish();\r\n                } else {\r\n                    Toast.makeText(ctx, message, Toast.LENGTH_SHORT).show();\r\n                    lastClickTime = System.currentTimeMillis();\r\n                }\r\n            }\r\n        }\r\n    \r\n    }\r\n\r\n*use to* in event `onBackPressed`\r\n\r\n    @Override\r\n    public void onBackPressed() {\r\n       ExitApp.now(this,&quot;Press again for close&quot;);\r\n    }\r\n\r\nor `ExitApp.now(this,R.string.double_back_pressed)`\r\n\r\nfor change seconds need for close, specified miliseconds\r\n\r\n`ExitApp.now(this,R.string.double_back_pressed,5000)`","title":"Clicking the back button twice to exit an activity","body":"<p>I use this</p>\n\n<pre><code>import android.app.Activity;\nimport android.support.annotation.StringRes;\nimport android.widget.Toast;\n\npublic class ExitApp {\n\n    private static long lastClickTime;\n\n    public static void now(Activity ctx, @StringRes int message) {\n        now(ctx, ctx.getString(message), 2500);\n    }\n\n    public static void now(Activity ctx, @StringRes int message, long time) {\n        now(ctx, ctx.getString(message), time);\n    }\n\n    public static void now(Activity ctx, String message, long time) {\n        if (ctx != null &amp;&amp; !message.isEmpty() &amp;&amp; time != 0) {\n            if (lastClickTime + time &gt; System.currentTimeMillis()) {\n                ctx.finish();\n            } else {\n                Toast.makeText(ctx, message, Toast.LENGTH_SHORT).show();\n                lastClickTime = System.currentTimeMillis();\n            }\n        }\n    }\n\n}\n</code></pre>\n\n<p><em>use to</em> in event <code>onBackPressed</code></p>\n\n<pre><code>@Override\npublic void onBackPressed() {\n   ExitApp.now(this,\"Press again for close\");\n}\n</code></pre>\n\n<p>or <code>ExitApp.now(this,R.string.double_back_pressed)</code></p>\n\n<p>for change seconds need for close, specified miliseconds</p>\n\n<p><code>ExitApp.now(this,R.string.double_back_pressed,5000)</code></p>\n"},{"tags":[],"owner":{"account_id":10597010,"reputation":105,"user_id":7805320,"accept_rate":0,"display_name":"Abhishek S"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1511938221,"creation_date":1511938221,"answer_id":47546686,"question_id":8430805,"body_markdown":"When HomeActivity contain navigation drawer and double backPressed() funtion to exit app.\r\n(Don&#39;t forget to initilize global variable     boolean doubleBackToExitPressedOnce = false;)\r\nnew handler after 2 sec set doubleBackPressedOnce variable to false \r\n\r\n\r\n\r\n\r\n    @Override\r\n    public void onBackPressed() {\r\n        DrawerLayout drawer = findViewById(R.id.drawer_layout);\r\n        if (drawer.isDrawerOpen(GravityCompat.END)) {\r\n            drawer.closeDrawer(GravityCompat.END);\r\n        } else {\r\n            if (doubleBackToExitPressedOnce) {\r\n                super.onBackPressed();\r\n                moveTaskToBack(true);\r\n                return;\r\n            } else {\r\n                this.doubleBackToExitPressedOnce = true;\r\n                Toast.makeText(this, &quot;Please click BACK again to exit&quot;, Toast.LENGTH_SHORT).show();\r\n                new Handler().postDelayed(new Runnable() {\r\n                    @Override\r\n                    public void run() {\r\n                        doubleBackToExitPressedOnce = false;\r\n                    }\r\n                }, 2000);\r\n            }\r\n        }\r\n    }","title":"Clicking the back button twice to exit an activity","body":"<p>When HomeActivity contain navigation drawer and double backPressed() funtion to exit app.\n(Don't forget to initilize global variable     boolean doubleBackToExitPressedOnce = false;)\nnew handler after 2 sec set doubleBackPressedOnce variable to false </p>\n\n<pre><code>@Override\npublic void onBackPressed() {\n    DrawerLayout drawer = findViewById(R.id.drawer_layout);\n    if (drawer.isDrawerOpen(GravityCompat.END)) {\n        drawer.closeDrawer(GravityCompat.END);\n    } else {\n        if (doubleBackToExitPressedOnce) {\n            super.onBackPressed();\n            moveTaskToBack(true);\n            return;\n        } else {\n            this.doubleBackToExitPressedOnce = true;\n            Toast.makeText(this, \"Please click BACK again to exit\", Toast.LENGTH_SHORT).show();\n            new Handler().postDelayed(new Runnable() {\n                @Override\n                public void run() {\n                    doubleBackToExitPressedOnce = false;\n                }\n            }, 2000);\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12444128,"reputation":946,"user_id":9060917,"display_name":"Praveen"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1559537903,"creation_date":1512645093,"answer_id":47693754,"question_id":8430805,"body_markdown":"   **In  java**\r\n\r\n    private Boolean exit = false; \r\n \r\n    if (exit) {\r\n    onBackPressed(); \r\n    }\r\n    \r\n\r\n\r\n----------\r\n\r\n\r\n     @Override\r\n    public void onBackPressed() {\r\n        if (exit) {\r\n            finish(); // finish activity\r\n        } else {\r\n            Toast.makeText(this, &quot;Press Back again to Exit.&quot;,\r\n                    Toast.LENGTH_SHORT).show();\r\n            exit = true;\r\n            new Handler().postDelayed(new Runnable() {\r\n                @Override\r\n                public void run() {\r\n                    exit = false;\r\n                }\r\n            }, 3 * 1000);\r\n\r\n        }\r\n    }\r\n        \r\n  \r\n----------\r\n**In kotlin**\r\n\r\n     private var exit = false\r\n\r\n     if (exit) {\r\n            onBackPressed()\r\n             }\r\n \r\n\r\n\r\n----------\r\n        \r\n     override fun onBackPressed(){\r\n               if (exit){\r\n                   finish() // finish activity\r\n               }else{\r\n                Toast.makeText(this, &quot;Press Back again to Exit.&quot;,\r\n                        Toast.LENGTH_SHORT).show()\r\n                exit = true\r\n                Handler().postDelayed({ exit = false }, 3 * 1000)\r\n\r\n            }\r\n        }","title":"Clicking the back button twice to exit an activity","body":"<p><strong>In  java</strong></p>\n\n<pre><code>private Boolean exit = false; \n\nif (exit) {\nonBackPressed(); \n}\n</code></pre>\n\n<hr>\n\n<pre><code> @Override\npublic void onBackPressed() {\n    if (exit) {\n        finish(); // finish activity\n    } else {\n        Toast.makeText(this, \"Press Back again to Exit.\",\n                Toast.LENGTH_SHORT).show();\n        exit = true;\n        new Handler().postDelayed(new Runnable() {\n            @Override\n            public void run() {\n                exit = false;\n            }\n        }, 3 * 1000);\n\n    }\n}\n</code></pre>\n\n<hr>\n\n<p><strong>In kotlin</strong></p>\n\n<pre><code> private var exit = false\n\n if (exit) {\n        onBackPressed()\n         }\n</code></pre>\n\n<hr>\n\n<pre><code> override fun onBackPressed(){\n           if (exit){\n               finish() // finish activity\n           }else{\n            Toast.makeText(this, \"Press Back again to Exit.\",\n                    Toast.LENGTH_SHORT).show()\n            exit = true\n            Handler().postDelayed({ exit = false }, 3 * 1000)\n\n        }\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10116978,"reputation":91,"user_id":8172833,"display_name":"Mitkumar Patel"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1526804703,"creation_date":1516898053,"answer_id":48447786,"question_id":8430805,"body_markdown":"In this situation, Snackbar is the better option then Toast to display the quit action. Here is the method with snackbar that works.\r\n\r\n    @Override\r\n            public void onBackPressed() {\r\n                if (doubleBackToExitPressedOnce) {\r\n                    super.onBackPressed();\r\n                    return;\r\n                }\r\n                this.doubleBackToExitPressedOnce = true;\r\n                Snackbar.make(this.getWindow().getDecorView().findViewById(android.R.id.content), &quot;Please click BACK again to exit&quot;, Snackbar.LENGTH_SHORT).show();\r\n    \r\n                new Handler().postDelayed(new Runnable() {\r\n    \r\n                    @Override\r\n                    public void run() {\r\n                        doubleBackToExitPressedOnce=false;\r\n                    }\r\n                }, 2000);\r\n            }","title":"Clicking the back button twice to exit an activity","body":"<p>In this situation, Snackbar is the better option then Toast to display the quit action. Here is the method with snackbar that works.</p>\n\n<pre><code>@Override\n        public void onBackPressed() {\n            if (doubleBackToExitPressedOnce) {\n                super.onBackPressed();\n                return;\n            }\n            this.doubleBackToExitPressedOnce = true;\n            Snackbar.make(this.getWindow().getDecorView().findViewById(android.R.id.content), \"Please click BACK again to exit\", Snackbar.LENGTH_SHORT).show();\n\n            new Handler().postDelayed(new Runnable() {\n\n                @Override\n                public void run() {\n                    doubleBackToExitPressedOnce=false;\n                }\n            }, 2000);\n        }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9879623,"reputation":173,"user_id":7316149,"display_name":"Anuj Sain"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1518285577,"creation_date":1518285577,"answer_id":48723884,"question_id":8430805,"body_markdown":"Here is another way... using the *CountDownTimer* method\r\n\r\n    private boolean exit = false;\r\n    @Override\r\n    public void onBackPressed() {\r\n            if (exit) {\r\n                finish();\r\n            } else {\r\n                Toast.makeText(this, &quot;Press back again to exit&quot;,\r\n                        Toast.LENGTH_SHORT).show();\r\n                exit = true;\r\n                new CountDownTimer(3000,1000) {\r\n    \r\n                    @Override\r\n                    public void onTick(long l) {\r\n    \r\n                    }\r\n    \r\n                    @Override\r\n                    public void onFinish() {\r\n                        exit = false;\r\n                    }\r\n                }.start();\r\n            }\r\n    \r\n        }","title":"Clicking the back button twice to exit an activity","body":"<p>Here is another way... using the <em>CountDownTimer</em> method</p>\n\n<pre><code>private boolean exit = false;\n@Override\npublic void onBackPressed() {\n        if (exit) {\n            finish();\n        } else {\n            Toast.makeText(this, \"Press back again to exit\",\n                    Toast.LENGTH_SHORT).show();\n            exit = true;\n            new CountDownTimer(3000,1000) {\n\n                @Override\n                public void onTick(long l) {\n\n                }\n\n                @Override\n                public void onFinish() {\n                    exit = false;\n                }\n            }.start();\n        }\n\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10228976,"reputation":6763,"user_id":7550472,"accept_rate":70,"display_name":"Kaushik NP"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1520945556,"creation_date":1520708244,"answer_id":49212863,"question_id":8430805,"body_markdown":"After having had to implement the same things many times, decided its about time someone built a simple to use library. And that is [`DoubleBackPress Android library`][1]. The `README` explains all the APIs provided along with Examples (like [ToastDisplay + Exit Activity][2]), but a short rundown of the steps here.\r\n\r\n\r\n----------\r\n\r\n\r\nTo get going, start by adding the `dependency` to your application :\r\n\r\n    dependencies {\r\n        implementation &#39;com.github.kaushikthedeveloper:double-back-press:0.0.1&#39;\r\n    } \r\n\r\n\r\n----------\r\n\r\n\r\nNext, create a `DoubleBackPress` object in your `Activity` which provides the required behaviour.\r\n\r\n    DoubleBackPress doubleBackPress = new DoubleBackPress();\r\n    doubleBackPress.setDoublePressDuration(3000);           // msec\r\n\r\nThen create a `Toast` that needs to be shown upon the *First Back Press*. Here, you can create your own `Toast`, or go with `Standard Toast` provided in the `library`. Doing so here by the later option.\r\n\r\n    FirstBackPressAction firstBackPressAction = new ToastDisplay().standard(this);\r\n    doubleBackPress.setFirstBackPressAction(firstBackPressAction);   // set the action\r\n\r\nNow, define what should happen when your Second Back Press happens. Here, we are closing the Activity.\r\n\r\n    DoubleBackPressAction doubleBackPressAction = new DoubleBackPressAction() {\r\n        @Override\r\n        public void actionCall() {\r\n            finish();\r\n            System.exit(0);\r\n        }\r\n    };\r\n\r\n\r\nFinally, override your back press behaviour with the `DoubleBackPress` behaviour.\r\n\r\n    @Override\r\n    public void onBackPressed() {\r\n        doubleBackPress.onBackPressed();\r\n    }\r\n\r\n[Example GIF of similar behavioural requirements][3]\r\n\r\n\r\n  [1]: https://github.com/kaushikthedeveloper/DoubleBackPress\r\n  [2]: https://github.com/kaushikthedeveloper/DoubleBackPress/blob/master/example/src/main/java/com/kaushikthedeveloper/doublebackpress/example/ToastDisplayActivity.java\r\n  [3]: https://github.com/kaushikthedeveloper/DoubleBackPress#ToastDisplayExample","title":"Clicking the back button twice to exit an activity","body":"<p>After having had to implement the same things many times, decided its about time someone built a simple to use library. And that is <a href=\"https://github.com/kaushikthedeveloper/DoubleBackPress\" rel=\"nofollow noreferrer\"><code>DoubleBackPress Android library</code></a>. The <code>README</code> explains all the APIs provided along with Examples (like <a href=\"https://github.com/kaushikthedeveloper/DoubleBackPress/blob/master/example/src/main/java/com/kaushikthedeveloper/doublebackpress/example/ToastDisplayActivity.java\" rel=\"nofollow noreferrer\">ToastDisplay + Exit Activity</a>), but a short rundown of the steps here.</p>\n\n<hr>\n\n<p>To get going, start by adding the <code>dependency</code> to your application :</p>\n\n<pre><code>dependencies {\n    implementation 'com.github.kaushikthedeveloper:double-back-press:0.0.1'\n} \n</code></pre>\n\n<hr>\n\n<p>Next, create a <code>DoubleBackPress</code> object in your <code>Activity</code> which provides the required behaviour.</p>\n\n<pre><code>DoubleBackPress doubleBackPress = new DoubleBackPress();\ndoubleBackPress.setDoublePressDuration(3000);           // msec\n</code></pre>\n\n<p>Then create a <code>Toast</code> that needs to be shown upon the <em>First Back Press</em>. Here, you can create your own <code>Toast</code>, or go with <code>Standard Toast</code> provided in the <code>library</code>. Doing so here by the later option.</p>\n\n<pre><code>FirstBackPressAction firstBackPressAction = new ToastDisplay().standard(this);\ndoubleBackPress.setFirstBackPressAction(firstBackPressAction);   // set the action\n</code></pre>\n\n<p>Now, define what should happen when your Second Back Press happens. Here, we are closing the Activity.</p>\n\n<pre><code>DoubleBackPressAction doubleBackPressAction = new DoubleBackPressAction() {\n    @Override\n    public void actionCall() {\n        finish();\n        System.exit(0);\n    }\n};\n</code></pre>\n\n<p>Finally, override your back press behaviour with the <code>DoubleBackPress</code> behaviour.</p>\n\n<pre><code>@Override\npublic void onBackPressed() {\n    doubleBackPress.onBackPressed();\n}\n</code></pre>\n\n<p><a href=\"https://github.com/kaushikthedeveloper/DoubleBackPress#ToastDisplayExample\" rel=\"nofollow noreferrer\">Example GIF of similar behavioural requirements</a></p>\n"},{"tags":[],"owner":{"account_id":12231021,"reputation":361,"user_id":8927014,"accept_rate":20,"display_name":"Avinash"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1521093569,"creation_date":1521093569,"answer_id":49292478,"question_id":8430805,"body_markdown":"     private static final int TIME_DELAY = 2000;\r\n        private static long back_pressed;\r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_main);\r\n        }\r\n        @Override\r\n        public void onBackPressed() {\r\n            if (back_pressed + TIME_DELAY &gt; System.currentTimeMillis()) {\r\n                super.onBackPressed();\r\n            } else {\r\n                Toast.makeText(getBaseContext(), &quot;Press once again to exit!&quot;,\r\n                        Toast.LENGTH_SHORT).show();\r\n            }\r\n            back_pressed = System.currentTimeMillis();\r\n        }","title":"Clicking the back button twice to exit an activity","body":"<pre><code> private static final int TIME_DELAY = 2000;\n    private static long back_pressed;\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n    }\n    @Override\n    public void onBackPressed() {\n        if (back_pressed + TIME_DELAY &gt; System.currentTimeMillis()) {\n            super.onBackPressed();\n        } else {\n            Toast.makeText(getBaseContext(), \"Press once again to exit!\",\n                    Toast.LENGTH_SHORT).show();\n        }\n        back_pressed = System.currentTimeMillis();\n    }\n</code></pre>\n"},{"tags":[],"owner":{"display_name":"user9578753"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1524229080,"creation_date":1524229080,"answer_id":49942217,"question_id":8430805,"body_markdown":"you can even make it more simple, and without using a hander, only do this =) \r\n\r\n    Long firstClick = 1L;\r\n    Long secondClick = 0L;\r\n    \r\n    @Override\r\n    public void onBackPressed() {\r\n    secondClick = System.currentTimeMillis();\r\n        if ((secondClick - firstClick) / 1000 &lt; 2) {\r\n              super.onBackPressed();\r\n        } else {\r\n              firstClick = System.currentTimeMillis();\r\n              Toast.makeText(MainActivity.this, &quot;click BACK again to exit&quot;, Toast.LENGTH_SHORT).show();\r\n            }\r\n     }","title":"Clicking the back button twice to exit an activity","body":"<p>you can even make it more simple, and without using a hander, only do this =) </p>\n\n<pre><code>Long firstClick = 1L;\nLong secondClick = 0L;\n\n@Override\npublic void onBackPressed() {\nsecondClick = System.currentTimeMillis();\n    if ((secondClick - firstClick) / 1000 &lt; 2) {\n          super.onBackPressed();\n    } else {\n          firstClick = System.currentTimeMillis();\n          Toast.makeText(MainActivity.this, \"click BACK again to exit\", Toast.LENGTH_SHORT).show();\n        }\n }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":461965,"reputation":1066,"user_id":864015,"display_name":"Hudson Pereira"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1525464807,"creation_date":1525464807,"answer_id":50182456,"question_id":8430805,"body_markdown":"You can also use the visibility of a Toast, so you don&#39;t need that Handler/postDelayed ultra solution.\r\n\r\n    Toast doubleBackButtonToast;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n\r\n        doubleBackButtonToast = Toast.makeText(this, &quot;Double tap back to exit.&quot;, Toast.LENGTH_SHORT);\r\n    }\r\n\r\n    @Override\r\n    public void onBackPressed() {\r\n        if (doubleBackButtonToast.getView().isShown()) {\r\n            super.onBackPressed();\r\n        }\r\n\r\n        doubleBackButtonToast.show();\r\n    }","title":"Clicking the back button twice to exit an activity","body":"<p>You can also use the visibility of a Toast, so you don't need that Handler/postDelayed ultra solution.</p>\n\n<pre><code>Toast doubleBackButtonToast;\n\n@Override\nprotected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.activity_main);\n\n    doubleBackButtonToast = Toast.makeText(this, \"Double tap back to exit.\", Toast.LENGTH_SHORT);\n}\n\n@Override\npublic void onBackPressed() {\n    if (doubleBackButtonToast.getView().isShown()) {\n        super.onBackPressed();\n    }\n\n    doubleBackButtonToast.show();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13968501,"reputation":322,"user_id":10087711,"display_name":"Umesh Maharjan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1531980209,"creation_date":1531980209,"answer_id":51415396,"question_id":8430805,"body_markdown":"    private static final int TIME_INTERVAL = 2000;\r\n    private long mBackPressed;\r\n        @Override\r\n        \tpublic void onBackPressed() {\r\n        \r\n        \t\tif (mBackPressed + TIME_INTERVAL &gt; System.currentTimeMillis()) {\r\n        \t\t\tsuper.onBackPressed();\r\n        \t\t\tIntent intent = new Intent(FirstpageActivity.this,\r\n        \t\t\t\t\tHomepageActivity.class);\r\n        \t\t\tstartActivity(intent);\r\n        \t\t\tfinish();\r\n        \r\n        \t\t\treturn;\r\n        \t\t} else {\r\n        \t\t\r\n        \t\t\tToast.makeText(getBaseContext(),\r\n        \t\t\t\t\t&quot;Tap back button twice  to go Home.&quot;, Toast.LENGTH_SHORT)\r\n        \t\t\t\t\t.show();\r\n        \r\n        \t\t\tmBackPressed = System.currentTimeMillis();\r\n        \r\n        \t\t}\r\n        \r\n        \t}\r\n\r\n","title":"Clicking the back button twice to exit an activity","body":"<pre><code>private static final int TIME_INTERVAL = 2000;\nprivate long mBackPressed;\n    @Override\n        public void onBackPressed() {\n\n            if (mBackPressed + TIME_INTERVAL &gt; System.currentTimeMillis()) {\n                super.onBackPressed();\n                Intent intent = new Intent(FirstpageActivity.this,\n                        HomepageActivity.class);\n                startActivity(intent);\n                finish();\n\n                return;\n            } else {\n\n                Toast.makeText(getBaseContext(),\n                        \"Tap back button twice  to go Home.\", Toast.LENGTH_SHORT)\n                        .show();\n\n                mBackPressed = System.currentTimeMillis();\n\n            }\n\n        }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2868776,"reputation":20877,"user_id":2462531,"accept_rate":40,"display_name":"Shailendra Madda"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1537096487,"creation_date":1537096487,"answer_id":52353541,"question_id":8430805,"body_markdown":"In Kotlin on the back press to exit app you can use:\r\n\r\nDefine a global variable:\r\n\r\n    private var doubleBackToExitPressedOnce = false\r\n\r\nOverride onBackPressed:\r\n\r\n    override fun onBackPressed() {\r\n            if (doubleBackToExitPressedOnce) {\r\n                super.onBackPressed()\r\n                return\r\n            }\r\n    \r\n            doubleBackToExitPressedOnce = true\r\n            Toast.makeText(this, &quot;Please click BACK again to exit&quot;, Toast.LENGTH_LONG).show()\r\n    \r\n            Handler().postDelayed({\r\n                doubleBackToExitPressedOnce = false;\r\n            }, 2000)\r\n        }","title":"Clicking the back button twice to exit an activity","body":"<p>In Kotlin on the back press to exit app you can use:</p>\n\n<p>Define a global variable:</p>\n\n<pre><code>private var doubleBackToExitPressedOnce = false\n</code></pre>\n\n<p>Override onBackPressed:</p>\n\n<pre><code>override fun onBackPressed() {\n        if (doubleBackToExitPressedOnce) {\n            super.onBackPressed()\n            return\n        }\n\n        doubleBackToExitPressedOnce = true\n        Toast.makeText(this, \"Please click BACK again to exit\", Toast.LENGTH_LONG).show()\n\n        Handler().postDelayed({\n            doubleBackToExitPressedOnce = false;\n        }, 2000)\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8751044,"reputation":101,"user_id":9532939,"display_name":"DannyRitiu"},"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1549792871,"creation_date":1537349717,"answer_id":52402705,"question_id":8430805,"body_markdown":"I would normally add a comment, but my reputation doesn&#39;t allow this.\r\nSo here&#39;s my two cents:\r\n\r\nIn Kotlin you can use coroutines to delay the setting to false:\r\n\r\n    private var doubleBackPressed = false\r\n    private var toast : Toast ?= null\r\n\r\n    override fun onCreate(savedInstanceState: Bundle?) {\r\n        toast = Toast.maketext(this, &quot;Press back again to exit&quot;, Toast.LENGTH_SHORT)\r\n    }\r\n\r\n    override fun onBackPressed() {\r\n        if (doubleBackPressed) {\r\n            toast?.cancel()\r\n            super.onBackPressed()\r\n            return\r\n        }\r\n        this.doubleBackPressed = true\r\n        toast?.show()\r\n        GlobalScope.launch {\r\n            delay(2000)\r\n            doubleBackPressed = false\r\n        }\r\n    }\r\n\r\nYou will have to import:\r\n\r\n    import kotlinx.coroutines.launch\r\n    import kotlinx.coroutines.delay\r\n    import kotlinx.coroutines.GlobalScope","title":"Clicking the back button twice to exit an activity","body":"<p>I would normally add a comment, but my reputation doesn't allow this.\nSo here's my two cents:</p>\n\n<p>In Kotlin you can use coroutines to delay the setting to false:</p>\n\n<pre><code>private var doubleBackPressed = false\nprivate var toast : Toast ?= null\n\noverride fun onCreate(savedInstanceState: Bundle?) {\n    toast = Toast.maketext(this, \"Press back again to exit\", Toast.LENGTH_SHORT)\n}\n\noverride fun onBackPressed() {\n    if (doubleBackPressed) {\n        toast?.cancel()\n        super.onBackPressed()\n        return\n    }\n    this.doubleBackPressed = true\n    toast?.show()\n    GlobalScope.launch {\n        delay(2000)\n        doubleBackPressed = false\n    }\n}\n</code></pre>\n\n<p>You will have to import:</p>\n\n<pre><code>import kotlinx.coroutines.launch\nimport kotlinx.coroutines.delay\nimport kotlinx.coroutines.GlobalScope\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4997062,"reputation":1,"user_id":5399854,"display_name":"R41N"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1545796454,"creation_date":1545774067,"answer_id":53925800,"question_id":8430805,"body_markdown":"Here&#39;s my take on this :\r\n\r\n     int oddeven = 0;\r\n     long backBtnPressed1;\r\n     long backBtnPressed2;\r\n     @Override\r\n     public void onBackPressed() {\r\n         oddeven++;\r\n         if(oddeven%2==0){\r\n             backBtnPressed2 = System.currentTimeMillis();\r\n             if(backBtnPressed2-backBtnPressed1&lt;2000) {\r\n                super.onBackPressed();\r\n                return;\r\n             }\r\n         }\r\n         else if(oddeven%2==1) { \r\n             backBtnPressed1 = System.currentTimeMillis();    \r\n            //  Insert toast back button here\r\n         }\r\n     }\r\n","title":"Clicking the back button twice to exit an activity","body":"<p>Here's my take on this :</p>\n\n<pre><code> int oddeven = 0;\n long backBtnPressed1;\n long backBtnPressed2;\n @Override\n public void onBackPressed() {\n     oddeven++;\n     if(oddeven%2==0){\n         backBtnPressed2 = System.currentTimeMillis();\n         if(backBtnPressed2-backBtnPressed1&lt;2000) {\n            super.onBackPressed();\n            return;\n         }\n     }\n     else if(oddeven%2==1) { \n         backBtnPressed1 = System.currentTimeMillis();    \n        //  Insert toast back button here\n     }\n }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5515265,"reputation":3852,"user_id":4380236,"display_name":"urgentx"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1547651355,"creation_date":1547651355,"answer_id":54219996,"question_id":8430805,"body_markdown":"Here is a way to do it using RxJava:\r\n\r\n    override fun onCreate(...) {\r\n        backPresses.timeInterval(TimeUnit.MILLISECONDS, Schedulers.io())\r\n                .skip(1) //Skip initial event; delay will be 0.\r\n                .onMain()\r\n                .subscribe {\r\n                    if (it.time() &lt; 7000) super.onBackPressed() //7000 is the duration of a Toast with length LENGTH_LONG.\r\n                }.addTo(compositeDisposable)\r\n    \r\n        backPresses.throttleFirst(7000, TimeUnit.MILLISECONDS, Schedulers.io())\r\n                .subscribe { Toast.makeText(this, &quot;Press back again to exit.&quot;, LENGTH_LONG).show() }\r\n                .addTo(compositeDisposable)\r\n    }\r\n    \r\n    override fun onBackPressed() = backPresses.onNext(Unit)","title":"Clicking the back button twice to exit an activity","body":"<p>Here is a way to do it using RxJava:</p>\n\n<pre><code>override fun onCreate(...) {\n    backPresses.timeInterval(TimeUnit.MILLISECONDS, Schedulers.io())\n            .skip(1) //Skip initial event; delay will be 0.\n            .onMain()\n            .subscribe {\n                if (it.time() &lt; 7000) super.onBackPressed() //7000 is the duration of a Toast with length LENGTH_LONG.\n            }.addTo(compositeDisposable)\n\n    backPresses.throttleFirst(7000, TimeUnit.MILLISECONDS, Schedulers.io())\n            .subscribe { Toast.makeText(this, \"Press back again to exit.\", LENGTH_LONG).show() }\n            .addTo(compositeDisposable)\n}\n\noverride fun onBackPressed() = backPresses.onNext(Unit)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14179159,"reputation":584,"user_id":10243412,"display_name":"Ankush Shrivastava"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1548916310,"creation_date":1548916310,"answer_id":54454624,"question_id":8430805,"body_markdown":"Back when Button pressed 2 times     \r\n     \r\n    public void click(View view){\r\n        if (isBackActivated) {\r\n            this.finish();\r\n        }\r\n        if (!isBackActivated) {\r\n            isBackActivated = true;\r\n            Toast.makeText(getApplicationContext(), &quot;Again&quot;, Toast.LENGTH_SHORT).show();\r\n            Handler handler = new Handler();\r\n            handler.postDelayed(new Runnable() {\r\n                @Override\r\n                public void run() {\r\n                    isBackActivated = false;  // setting isBackActivated after 2 second\r\n                }\r\n            }, 2000);\r\n        }\r\n\r\n    }","title":"Clicking the back button twice to exit an activity","body":"<p>Back when Button pressed 2 times     </p>\n\n<pre><code>public void click(View view){\n    if (isBackActivated) {\n        this.finish();\n    }\n    if (!isBackActivated) {\n        isBackActivated = true;\n        Toast.makeText(getApplicationContext(), \"Again\", Toast.LENGTH_SHORT).show();\n        Handler handler = new Handler();\n        handler.postDelayed(new Runnable() {\n            @Override\n            public void run() {\n                isBackActivated = false;  // setting isBackActivated after 2 second\n            }\n        }, 2000);\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4779799,"reputation":2144,"user_id":3861913,"display_name":"Karthik Kompelli"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1555396419,"creation_date":1555395260,"answer_id":55701651,"question_id":8430805,"body_markdown":"Best Solution with Toast\r\n\r\n&gt; In Java\r\n\r\n    private Toast exitToast;\r\n\r\n    @Override\r\n    public void onBackPressed() {\r\n        if (exitToast == null || exitToast.getView() == null || exitToast.getView().getWindowToken() == null) {\r\n            exitToast = Toast.makeText(this, &quot;Press again to exit&quot;, Toast.LENGTH_LONG);\r\n            exitToast.show();\r\n        } else {\r\n            exitToast.cancel();\r\n            super.onBackPressed();\r\n        }\r\n    }\r\n\r\n&gt; In Kotlin\r\n\r\n    private var exitToast: Toast? = null\r\n\r\n    override fun onBackPressed() {\r\n        if (exitToast == null || exitToast!!.view == null || exitToast!!.view.windowToken == null) {\r\n            exitToast = Toast.makeText(this, &quot;Press again to exit&quot;, Toast.LENGTH_LONG)\r\n            exitToast!!.show()\r\n        } else {\r\n            exitToast!!.cancel()\r\n            super.onBackPressed()\r\n        }\r\n    }","title":"Clicking the back button twice to exit an activity","body":"<p>Best Solution with Toast</p>\n\n<blockquote>\n  <p>In Java</p>\n</blockquote>\n\n<pre><code>private Toast exitToast;\n\n@Override\npublic void onBackPressed() {\n    if (exitToast == null || exitToast.getView() == null || exitToast.getView().getWindowToken() == null) {\n        exitToast = Toast.makeText(this, \"Press again to exit\", Toast.LENGTH_LONG);\n        exitToast.show();\n    } else {\n        exitToast.cancel();\n        super.onBackPressed();\n    }\n}\n</code></pre>\n\n<blockquote>\n  <p>In Kotlin</p>\n</blockquote>\n\n<pre><code>private var exitToast: Toast? = null\n\noverride fun onBackPressed() {\n    if (exitToast == null || exitToast!!.view == null || exitToast!!.view.windowToken == null) {\n        exitToast = Toast.makeText(this, \"Press again to exit\", Toast.LENGTH_LONG)\n        exitToast!!.show()\n    } else {\n        exitToast!!.cancel()\n        super.onBackPressed()\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7459166,"reputation":8015,"user_id":7682257,"display_name":"Suraj Vaishnav"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1642852746,"creation_date":1559544808,"answer_id":56422372,"question_id":8430805,"body_markdown":"I think this is what you need, I mean when we want to show this toast, **when there is only one activity in the stack and user pressing back** from this last activity of the stack.\r\n\r\n    var exitOpened=false // Declare it globaly\r\n\r\nand in `onBackPressed` method change it like:\r\n\r\n    override fun onBackPressed() {\r\n            if (isTaskRoot &amp;&amp; !exitOpened)\r\n            {\r\n                exitOpened=true\r\n                toast(&quot;Please press back again to exit&quot;)\r\n                return\r\n            }\r\n            super.onBackPressed()\r\n        }\r\n\r\nHere, `isTaskRoot` will return true if the current activity is the **root activity(first activity)** of the stack and false if it is not.\r\n\r\nYou can check the official documentation [here][1]\r\n\r\n\r\n  [1]: https://developer.android.com/reference/android/app/Activity.html#isTaskRoot%28%29","title":"Clicking the back button twice to exit an activity","body":"<p>I think this is what you need, I mean when we want to show this toast, <strong>when there is only one activity in the stack and user pressing back</strong> from this last activity of the stack.</p>\n<pre><code>var exitOpened=false // Declare it globaly\n</code></pre>\n<p>and in <code>onBackPressed</code> method change it like:</p>\n<pre><code>override fun onBackPressed() {\n        if (isTaskRoot &amp;&amp; !exitOpened)\n        {\n            exitOpened=true\n            toast(&quot;Please press back again to exit&quot;)\n            return\n        }\n        super.onBackPressed()\n    }\n</code></pre>\n<p>Here, <code>isTaskRoot</code> will return true if the current activity is the <strong>root activity(first activity)</strong> of the stack and false if it is not.</p>\n<p>You can check the official documentation <a href=\"https://developer.android.com/reference/android/app/Activity.html#isTaskRoot%28%29\" rel=\"nofollow noreferrer\">here</a></p>\n"},{"tags":[],"owner":{"account_id":4598289,"reputation":1210,"user_id":3763032,"accept_rate":62,"display_name":"mochadwi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1577640181,"creation_date":1577640181,"answer_id":59521649,"question_id":8430805,"body_markdown":"I&#39;ve tried to create a utils class for this, so any activity or fragment can implement this to be simpler. \r\n\r\nThe code was written with Kotlin &amp; has Java-interop as well.\r\n\r\nI&#39;m using coroutine to delay and reset the flag variable. But you can modify it to your needs.\r\n\r\n**Additional files**: `SafeToast.kt`\r\n\r\n```\r\nlateinit var toast: Toast\r\n\r\nfun Context.safeToast(msg: String, length: Int = Toast.LENGTH_LONG, action: (Context) -&gt; Toast = default) {\r\n    toast = SafeToast.makeText(this@safeToast, msg, length).apply {\r\n        // do anything new here\r\n        action(this@safeToast)\r\n        show()\r\n    }\r\n}\r\n\r\nfun Context.toastSpammable(msg: String) {\r\n    cancel()\r\n    safeToast(msg, Toast.LENGTH_SHORT)\r\n}\r\n\r\nfun Fragment.toastSpammable(msg: String) {\r\n    cancel()\r\n    requireContext().safeToast(msg, Toast.LENGTH_SHORT)\r\n}\r\n\r\nprivate val default: (Context) -&gt; Toast = { it -&gt; SafeToast.makeText(it, &quot;&quot;, Toast.LENGTH_LONG) }\r\n\r\nprivate fun cancel() {\r\n    if (::toast.isInitialized) toast.cancel()\r\n}\r\n```\r\n\r\n**ActivityUtils.kt**\r\n```\r\n@file:JvmMultifileClass\r\n@file:JvmName(&quot;ActivityUtils&quot;)\r\npackage your.company.com\r\n\r\nimport android.app.Activity\r\nimport your.company.com.R\r\nimport kotlinx.coroutines.GlobalScope\r\nimport kotlinx.coroutines.delay\r\nimport kotlinx.coroutines.launch\r\n\r\n\r\nprivate var backButtonPressedTwice = false\r\n\r\nfun Activity.onBackPressedTwiceFinish() {\r\n    onBackPressedTwiceFinish(getString(R.string.msg_back_pressed_to_exit), 2000)\r\n}\r\n\r\nfun Activity.onBackPressedTwiceFinish(@StringRes message: Int, time: Long) {\r\n    onBackPressedTwiceFinish(getString(message), time)\r\n}\r\n\r\nfun Activity.onBackPressedTwiceFinish(message: String, time: Long) {\r\n    if (backButtonPressedTwice) {\r\n        onBackPressed()\r\n    } else {\r\n        backButtonPressedTwice = true\r\n        toastSpammable(message)\r\n        GlobalScope.launch {\r\n            delay(time)\r\n            backButtonPressedTwice = false\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n**Usage in Kotlin**\r\n```\r\n// ActivityA.kt\r\noverride fun onBackPressed() {\r\n    onBackPressedTwiceFinish()\r\n}\r\n```\r\n\r\n**Usage in Java**\r\n```\r\n@Override \r\npublic void onBackPressed() {\r\n    ActivityUtils.onBackPressedTwiceFinish()\r\n}\r\n```\r\n\r\nThis code was inspired by @webserveis [here][1]\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/47517883/3763032","title":"Clicking the back button twice to exit an activity","body":"<p>I've tried to create a utils class for this, so any activity or fragment can implement this to be simpler. </p>\n\n<p>The code was written with Kotlin &amp; has Java-interop as well.</p>\n\n<p>I'm using coroutine to delay and reset the flag variable. But you can modify it to your needs.</p>\n\n<p><strong>Additional files</strong>: <code>SafeToast.kt</code></p>\n\n<pre><code>lateinit var toast: Toast\n\nfun Context.safeToast(msg: String, length: Int = Toast.LENGTH_LONG, action: (Context) -&gt; Toast = default) {\n    toast = SafeToast.makeText(this@safeToast, msg, length).apply {\n        // do anything new here\n        action(this@safeToast)\n        show()\n    }\n}\n\nfun Context.toastSpammable(msg: String) {\n    cancel()\n    safeToast(msg, Toast.LENGTH_SHORT)\n}\n\nfun Fragment.toastSpammable(msg: String) {\n    cancel()\n    requireContext().safeToast(msg, Toast.LENGTH_SHORT)\n}\n\nprivate val default: (Context) -&gt; Toast = { it -&gt; SafeToast.makeText(it, \"\", Toast.LENGTH_LONG) }\n\nprivate fun cancel() {\n    if (::toast.isInitialized) toast.cancel()\n}\n</code></pre>\n\n<p><strong>ActivityUtils.kt</strong></p>\n\n<pre><code>@file:JvmMultifileClass\n@file:JvmName(\"ActivityUtils\")\npackage your.company.com\n\nimport android.app.Activity\nimport your.company.com.R\nimport kotlinx.coroutines.GlobalScope\nimport kotlinx.coroutines.delay\nimport kotlinx.coroutines.launch\n\n\nprivate var backButtonPressedTwice = false\n\nfun Activity.onBackPressedTwiceFinish() {\n    onBackPressedTwiceFinish(getString(R.string.msg_back_pressed_to_exit), 2000)\n}\n\nfun Activity.onBackPressedTwiceFinish(@StringRes message: Int, time: Long) {\n    onBackPressedTwiceFinish(getString(message), time)\n}\n\nfun Activity.onBackPressedTwiceFinish(message: String, time: Long) {\n    if (backButtonPressedTwice) {\n        onBackPressed()\n    } else {\n        backButtonPressedTwice = true\n        toastSpammable(message)\n        GlobalScope.launch {\n            delay(time)\n            backButtonPressedTwice = false\n        }\n    }\n}\n</code></pre>\n\n<p><strong>Usage in Kotlin</strong></p>\n\n<pre><code>// ActivityA.kt\noverride fun onBackPressed() {\n    onBackPressedTwiceFinish()\n}\n</code></pre>\n\n<p><strong>Usage in Java</strong></p>\n\n<pre><code>@Override \npublic void onBackPressed() {\n    ActivityUtils.onBackPressedTwiceFinish()\n}\n</code></pre>\n\n<p>This code was inspired by @webserveis <a href=\"https://stackoverflow.com/a/47517883/3763032\">here</a></p>\n"},{"tags":[],"owner":{"account_id":2645875,"reputation":2220,"user_id":2288580,"display_name":"user2288580"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1588476982,"creation_date":1588460983,"answer_id":61567522,"question_id":8430805,"body_markdown":"The unique thing about this solution is the behaviour; in that a non double tap will show the toast and a successful double tap will show no toast while closing the app.\r\nThe only disadvantage being the the showing of the toast will have a 650 millisecond delay. I believe this is the best solution with the best behaviour as logic dictates that it would be impossible to have this behaviour without such a delay\r\n\r\n    //App Closing Vars\r\n    private var doubleBackPressedInterval: Long = 650\r\n    private var doubleTap = false\r\n    private var pressCount = 0\r\n    private var timeLimit: Long = 0\r\n    \r\n    override fun onBackPressed() {\r\n        pressCount++\r\n        if(pressCount == 1) {\r\n            timeLimit = System.currentTimeMillis() + doubleBackPressedInterval\r\n            if(!doubleTap) {\r\n                showExitInstructions()\r\n            }\r\n        }\r\n        if(pressCount == 2) {\r\n            if(timeLimit &gt; System.currentTimeMillis()) {\r\n                doubleTap = true\r\n                super.onBackPressed()\r\n            }\r\n            else {\r\n                showExitInstructions()\r\n            }\r\n            pressCount = 1\r\n            timeLimit = System.currentTimeMillis() + doubleBackPressedInterval\r\n        }\r\n    }\r\n    \r\n    private fun showExitInstructions() {\r\n        Handler().postDelayed({\r\n            if(!doubleTap) {\r\n                Toast.makeText(this, &quot;Try Agian&quot;, Toast.LENGTH_SHORT).show()\r\n            }\r\n        }, doubleBackPressedInterval)\r\n    }","title":"Clicking the back button twice to exit an activity","body":"<p>The unique thing about this solution is the behaviour; in that a non double tap will show the toast and a successful double tap will show no toast while closing the app.\nThe only disadvantage being the the showing of the toast will have a 650 millisecond delay. I believe this is the best solution with the best behaviour as logic dictates that it would be impossible to have this behaviour without such a delay</p>\n\n<pre><code>//App Closing Vars\nprivate var doubleBackPressedInterval: Long = 650\nprivate var doubleTap = false\nprivate var pressCount = 0\nprivate var timeLimit: Long = 0\n\noverride fun onBackPressed() {\n    pressCount++\n    if(pressCount == 1) {\n        timeLimit = System.currentTimeMillis() + doubleBackPressedInterval\n        if(!doubleTap) {\n            showExitInstructions()\n        }\n    }\n    if(pressCount == 2) {\n        if(timeLimit &gt; System.currentTimeMillis()) {\n            doubleTap = true\n            super.onBackPressed()\n        }\n        else {\n            showExitInstructions()\n        }\n        pressCount = 1\n        timeLimit = System.currentTimeMillis() + doubleBackPressedInterval\n    }\n}\n\nprivate fun showExitInstructions() {\n    Handler().postDelayed({\n        if(!doubleTap) {\n            Toast.makeText(this, \"Try Agian\", Toast.LENGTH_SHORT).show()\n        }\n    }, doubleBackPressedInterval)\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16044068,"reputation":1129,"user_id":11579741,"display_name":"Ganesh MB"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1629201210,"creation_date":1629201210,"answer_id":68816906,"question_id":8430805,"body_markdown":"[This][1] answer is easy to use but we need to double-tap to exit. I just modify the answer ,\r\n\r\n        @Override\r\n    public void onBackPressed() {\r\n        ++k;\r\n        if(k==1){\r\n            Toast.makeText(this, &quot;Press back one more time to exit&quot;, Toast.LENGTH_SHORT).show();\r\n            new Handler(Looper.getMainLooper()).postDelayed(new Runnable() {\r\n                @Override\r\n                public void run() {\r\n                    --k;\r\n                }\r\n            },1000);\r\n        }else{\r\n            //do whatever you want to do on the click after the first for example:\r\n            finishAffinity();\r\n        }\r\n    }\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/16098431/11579741","title":"Clicking the back button twice to exit an activity","body":"<p><a href=\"https://stackoverflow.com/a/16098431/11579741\">This</a> answer is easy to use but we need to double-tap to exit. I just modify the answer ,</p>\n<pre><code>    @Override\npublic void onBackPressed() {\n    ++k;\n    if(k==1){\n        Toast.makeText(this, &quot;Press back one more time to exit&quot;, Toast.LENGTH_SHORT).show();\n        new Handler(Looper.getMainLooper()).postDelayed(new Runnable() {\n            @Override\n            public void run() {\n                --k;\n            }\n        },1000);\n    }else{\n        //do whatever you want to do on the click after the first for example:\n        finishAffinity();\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16465254,"reputation":83,"user_id":11895480,"display_name":"Onuoha Chukwuemeka Charles"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1662715534,"creation_date":1662715534,"answer_id":73660015,"question_id":8430805,"body_markdown":"Most modern applications use just one activity and multiple fragments. So if you&#39;re using Navigation Components and needs to call implement that from the home fragment, here is the solution.\r\n\r\n    override fun onAttach(context: Context) {\r\n        super.onAttach(context)\r\n        val callback: OnBackPressedCallback = object :\r\n        OnBackPressedCallback(true) {\r\n            override fun handleOnBackPressed() {\r\n                if (doubleBackPressed) {\r\n                    activity.finishAffinity()\r\n                }\r\n                doubleBackPressed = true\r\n                Toast.makeText(requireActivity(), &quot;Press BACK again to exit&quot;, Toast.LENGTH_LONG).show()\r\n                Handler(Looper.myLooper()!!).postDelayed(Runnable {doubleBackPressed = false},\r\n                    2000)\r\n                }\r\n            }\r\n        requireActivity().onBackPressedDispatcher.addCallback(this, callback)\r\n    }","title":"Clicking the back button twice to exit an activity","body":"<p>Most modern applications use just one activity and multiple fragments. So if you're using Navigation Components and needs to call implement that from the home fragment, here is the solution.</p>\n<pre><code>override fun onAttach(context: Context) {\n    super.onAttach(context)\n    val callback: OnBackPressedCallback = object :\n    OnBackPressedCallback(true) {\n        override fun handleOnBackPressed() {\n            if (doubleBackPressed) {\n                activity.finishAffinity()\n            }\n            doubleBackPressed = true\n            Toast.makeText(requireActivity(), &quot;Press BACK again to exit&quot;, Toast.LENGTH_LONG).show()\n            Handler(Looper.myLooper()!!).postDelayed(Runnable {doubleBackPressed = false},\n                2000)\n            }\n        }\n    requireActivity().onBackPressedDispatcher.addCallback(this, callback)\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":26777808,"reputation":21,"user_id":20373158,"display_name":"Sheikh Nahid"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1675766839,"creation_date":1675100501,"answer_id":75288169,"question_id":8430805,"body_markdown":"  **I think this is the easiest method** \r\n\r\n    private static long exit;\r\n    @override\r\n    public void onBackPressed() {\r\n        if (exit + 2000 &gt; System.currentTimeMillis()) super.onBackPressed();\r\n        else\r\n            Toast.makeText(getBaseContext(), &quot;Press once again to exit!&quot;, Toast.LENGTH_SHORT).show();\r\n        exit = System.currentTimeMillis();\r\n    }","title":"Clicking the back button twice to exit an activity","body":"<p><strong>I think this is the easiest method</strong></p>\n<pre><code>private static long exit;\n@override\npublic void onBackPressed() {\n    if (exit + 2000 &gt; System.currentTimeMillis()) super.onBackPressed();\n    else\n        Toast.makeText(getBaseContext(), &quot;Press once again to exit!&quot;, Toast.LENGTH_SHORT).show();\n    exit = System.currentTimeMillis();\n}\n</code></pre>\n"}],"owner":{"account_id":940484,"reputation":22724,"user_id":968632,"accept_rate":100,"display_name":"Guillaume"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":303138,"favorite_count":0,"down_vote_count":0,"up_vote_count":389,"accepted_answer_id":13578600,"answer_count":48,"score":389,"last_activity_date":1679506681,"creation_date":1323346129,"question_id":8430805,"body_markdown":"I&#39;ve noticed this pattern in a lot of Android apps and games recently: when clicking the back button to &quot;exit&quot; the application, a &lt;code&gt;Toast&lt;/code&gt; comes up with a message similar to &quot;Please click BACK again to exit&quot;.\r\n\r\nI was wondering, as I&#39;m seeing it more and more often, is that a built-in feature that you can somehow access in an activity? I&#39;ve looked at the source code of many classes but I can&#39;t seem to find anything about that.\r\n\r\nOf course, I can think about a few ways to achieve the same functionality quite easily (the easiest is probably to keep a boolean in the activity that indicates whether the user already clicked once...) but I was wondering if there&#39;s something already here.\r\n\r\n**EDIT**: As @LAS_VEGAS mentioned, I didn&#39;t really mean &quot;exit&quot; in the traditional meaning. (i.e. terminated) I meant &quot;going back to whatever was open before the application start activity was launched&quot;, if that makes sense :)","title":"Clicking the back button twice to exit an activity","body":"<p>I've noticed this pattern in a lot of Android apps and games recently: when clicking the back button to \"exit\" the application, a <code>Toast</code> comes up with a message similar to \"Please click BACK again to exit\".</p>\n\n<p>I was wondering, as I'm seeing it more and more often, is that a built-in feature that you can somehow access in an activity? I've looked at the source code of many classes but I can't seem to find anything about that.</p>\n\n<p>Of course, I can think about a few ways to achieve the same functionality quite easily (the easiest is probably to keep a boolean in the activity that indicates whether the user already clicked once...) but I was wondering if there's something already here.</p>\n\n<p><strong>EDIT</strong>: As @LAS_VEGAS mentioned, I didn't really mean \"exit\" in the traditional meaning. (i.e. terminated) I meant \"going back to whatever was open before the application start activity was launched\", if that makes sense :)</p>\n"},{"tags":["java","maven","dependencies","refactoring","pom.xml"],"comments":[{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1679566150,"post_id":75815563,"comment_id":133745796,"body_markdown":"Just try `mvn dependency:tree` on command line? That will give you the tree for each module...","body":"Just try <code>mvn dependency:tree</code> on command line? That will give you the tree for each module..."}],"owner":{"account_id":20518780,"reputation":9,"user_id":15058854,"display_name":"K3YUR"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":31,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679506664,"creation_date":1679506664,"question_id":75815563,"body_markdown":"I have big Maven project with its 3-4 submodules. \r\n\r\neach module has its packages and dependencies, some of them uses the same dependencies, I am using Eclipse IDE so, is there any way or plugin using which I could easily analyze the dependency tree to reduce it?   \r\n\r\nI am trying to do it manually like looking into each pom.xmls to see which one is using which but its more time consuming since its big. There is a way using Dependency Hierarchy but it only shows for one module only. so I was looking for a way to see entire tree of something like that so that I could see and analyze it easily.  ","title":"Dependency management in eclipse for Maven project","body":"<p>I have big Maven project with its 3-4 submodules.</p>\n<p>each module has its packages and dependencies, some of them uses the same dependencies, I am using Eclipse IDE so, is there any way or plugin using which I could easily analyze the dependency tree to reduce it?</p>\n<p>I am trying to do it manually like looking into each pom.xmls to see which one is using which but its more time consuming since its big. There is a way using Dependency Hierarchy but it only shows for one module only. so I was looking for a way to see entire tree of something like that so that I could see and analyze it easily.</p>\n"},{"tags":["java","javafx","hevc","gopro"],"answers":[{"tags":[],"owner":{"account_id":1180113,"reputation":152325,"user_id":1155209,"display_name":"jewelsea"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1517273811,"creation_date":1517271574,"answer_id":48512087,"question_id":48511626,"body_markdown":"*Native JavaFX Solution*\r\n\r\nPerhaps this is a duplicate or at least related to:\r\n\r\n  * [Adding other video codecs / DVD support to JavaFX 2.2][1].\r\n\r\nSee my answer to that question for links to related feature requests in the JavaFX bug tracker system.\r\n\r\n*Solutions using non-JavaFX tech from JavaFX*\r\n\r\nThere are other solutions than those discussed in answers to that question which may work for you.  Especially if your primary concern is just getting some kind of playback, even if it doesn&#39;t have deep integration with the JavaFX media system.\r\n\r\nFor instance, other approaches than native JavaFX playback could be:\r\n\r\n  1. Using [VLCJ][2] with some kind of Swing integration (such as a SwingNode, though that may or may not work).\r\n  2. Rendering the VLCJ video into a JavaFX ImageView or Canvas. \r\n    * See related: https://stackoverflow.com/questions/32476109/playing-video-in-java-fx-using-vlcj-api.\r\n    * Which links to the following project: https://github.com/caprica/vlcj-javafx.\r\n  3. Launch a native video player if you don&#39;t need the video embedded.\r\n    * Perhaps [Desktop.open()][3] or the [Process API][4] could do this.\r\n  4. [Call ffmpeg][5] to convert h265 to h264. \r\n     * I don&#39;t know much about this, but a quick google of the topic shows up references to the xuggle project.\r\n     * Current [status of the xuggler project][6] is:\r\n&gt; Xuggler is on hiatus as no one is actively developing it anymore. Sorry. That said, you can always find the source code and start hacking yourself. Good luck!\r\n     * So I wish you good luck with that ;-)\r\n  5. Launching the native browser through a [HostServices.showDocument()][7] call to display the video.\r\n  6. Use a third party browsing component that can be integrated into JavaFX and includes support for the media type you want to play back, for example JxBrowser:\r\n    * https://stackoverflow.com/questions/44548089/h-265-support-in-jxbrowser\r\n\r\nOf the options outlined above, personally, I would recommend using HostServices to play the video in the native browser if that kind of solution will possibly work for you.\r\n\r\nGoing into detail on various options is probably out of scope for StackOverflow (even the above list starts looking like a sometimes frowned upon library recommendation).\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/8153227/adding-other-video-codecs-dvd-support-to-javafx-2-2/48512027#48512027\r\n  [2]: https://github.com/caprica/vlcj\r\n  [3]: https://docs.oracle.com/javase/9/docs/api/java/awt/Desktop.html#open-java.io.File-\r\n  [4]: https://docs.oracle.com/javase/9/docs/api/java/lang/Process.html#toHandle--\r\n  [5]: https://stackoverflow.com/questions/1281353/use-java-ffmpeg-wrapper-or-simply-use-java-runtime-to-execute-ffmpeg\r\n  [6]: http://www.xuggle.com/xuggler/status\r\n  [7]: https://docs.oracle.com/javase/9/docs/api/javafx/application/HostServices.html#showDocument-java.lang.String-","title":"Playing h265 HEVC in a JavaFX client","body":"<p><em>Native JavaFX Solution</em></p>\n\n<p>Perhaps this is a duplicate or at least related to:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/8153227/adding-other-video-codecs-dvd-support-to-javafx-2-2/48512027#48512027\">Adding other video codecs / DVD support to JavaFX 2.2</a>.</li>\n</ul>\n\n<p>See my answer to that question for links to related feature requests in the JavaFX bug tracker system.</p>\n\n<p><em>Solutions using non-JavaFX tech from JavaFX</em></p>\n\n<p>There are other solutions than those discussed in answers to that question which may work for you.  Especially if your primary concern is just getting some kind of playback, even if it doesn't have deep integration with the JavaFX media system.</p>\n\n<p>For instance, other approaches than native JavaFX playback could be:</p>\n\n<ol>\n<li>Using <a href=\"https://github.com/caprica/vlcj\" rel=\"nofollow noreferrer\">VLCJ</a> with some kind of Swing integration (such as a SwingNode, though that may or may not work).</li>\n<li>Rendering the VLCJ video into a JavaFX ImageView or Canvas. \n\n<ul>\n<li>See related: <a href=\"https://stackoverflow.com/questions/32476109/playing-video-in-java-fx-using-vlcj-api\">Playing Video in Java FX using vlcj api</a>.</li>\n<li>Which links to the following project: <a href=\"https://github.com/caprica/vlcj-javafx\" rel=\"nofollow noreferrer\">https://github.com/caprica/vlcj-javafx</a>.</li>\n</ul></li>\n<li>Launch a native video player if you don't need the video embedded.\n\n<ul>\n<li>Perhaps <a href=\"https://docs.oracle.com/javase/9/docs/api/java/awt/Desktop.html#open-java.io.File-\" rel=\"nofollow noreferrer\">Desktop.open()</a> or the <a href=\"https://docs.oracle.com/javase/9/docs/api/java/lang/Process.html#toHandle--\" rel=\"nofollow noreferrer\">Process API</a> could do this.</li>\n</ul></li>\n<li><a href=\"https://stackoverflow.com/questions/1281353/use-java-ffmpeg-wrapper-or-simply-use-java-runtime-to-execute-ffmpeg\">Call ffmpeg</a> to convert h265 to h264. \n\n<ul>\n<li>I don't know much about this, but a quick google of the topic shows up references to the xuggle project.</li>\n<li>Current <a href=\"http://www.xuggle.com/xuggler/status\" rel=\"nofollow noreferrer\">status of the xuggler project</a> is:\n\n<blockquote>\n  <p>Xuggler is on hiatus as no one is actively developing it anymore. Sorry. That said, you can always find the source code and start hacking yourself. Good luck!</p>\n</blockquote></li>\n<li>So I wish you good luck with that ;-)</li>\n</ul></li>\n<li>Launching the native browser through a <a href=\"https://docs.oracle.com/javase/9/docs/api/javafx/application/HostServices.html#showDocument-java.lang.String-\" rel=\"nofollow noreferrer\">HostServices.showDocument()</a> call to display the video.</li>\n<li>Use a third party browsing component that can be integrated into JavaFX and includes support for the media type you want to play back, for example JxBrowser:\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/44548089/h-265-support-in-jxbrowser\">H.265 support in jxbrowser</a></li>\n</ul></li>\n</ol>\n\n<p>Of the options outlined above, personally, I would recommend using HostServices to play the video in the native browser if that kind of solution will possibly work for you.</p>\n\n<p>Going into detail on various options is probably out of scope for StackOverflow (even the above list starts looking like a sometimes frowned upon library recommendation).</p>\n"}],"owner":{"account_id":199092,"reputation":482,"user_id":444165,"accept_rate":75,"display_name":"Arthur S."},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2257,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1679505922,"creation_date":1517268213,"question_id":48511626,"body_markdown":"I had a small JavaFX application to play some GoPro videos on a Windows / Linux client. In the past I had using a GoPro 4. I&#39;ve downloaded the video to the client and play it from the local storage. Like this:\r\n\r\n        File file = new File(&quot;AnyVideo.MP4&quot;);\r\n        Media m = new Media(file.toURI().toString());\r\n        MediaPlayer mp = new MediaPlayer(m);\r\n        mp.setAutoPlay(true);\r\n        mediaView.setMediaPlayer(mp);\r\n\r\nI&#39;ll try to switch to the new GoPro 6 now. But it doesn&#39;t worked as expected.\r\n\r\nThe problem is probably that the JavaFX MediaPlayer did not support the codec from the new GoPro 6. \r\n\r\n - GoPro 4: h264 AVC video codec\r\n - GoPro 6: h265 HEVC video codec\r\n\r\nThe JavaFX MediaPlayer [supports only the h264 codec][1].\r\n\r\nDid anyone know a way how I can play a h265 HEVC video with my JavaFX application. In the best case a solution which can play the video immediately from the camera without download the video first to the client. The GoPro has a small Media Server to get the video over HTTP. as example:\r\nhttp://10.5.5.9:8080/videos/DCIM/100/GPR10973.MP4\r\n\r\n\r\n  [1]: https://docs.oracle.com/javafx/2/api/javafx/scene/media/package-summary.html","title":"Playing h265 HEVC in a JavaFX client","body":"<p>I had a small JavaFX application to play some GoPro videos on a Windows / Linux client. In the past I had using a GoPro 4. I've downloaded the video to the client and play it from the local storage. Like this:</p>\n<pre><code>    File file = new File(&quot;AnyVideo.MP4&quot;);\n    Media m = new Media(file.toURI().toString());\n    MediaPlayer mp = new MediaPlayer(m);\n    mp.setAutoPlay(true);\n    mediaView.setMediaPlayer(mp);\n</code></pre>\n<p>I'll try to switch to the new GoPro 6 now. But it doesn't worked as expected.</p>\n<p>The problem is probably that the JavaFX MediaPlayer did not support the codec from the new GoPro 6.</p>\n<ul>\n<li>GoPro 4: h264 AVC video codec</li>\n<li>GoPro 6: h265 HEVC video codec</li>\n</ul>\n<p>The JavaFX MediaPlayer <a href=\"https://docs.oracle.com/javafx/2/api/javafx/scene/media/package-summary.html\" rel=\"nofollow noreferrer\">supports only the h264 codec</a>.</p>\n<p>Did anyone know a way how I can play a h265 HEVC video with my JavaFX application. In the best case a solution which can play the video immediately from the camera without download the video first to the client. The GoPro has a small Media Server to get the video over HTTP. as example:\n<a href=\"http://10.5.5.9:8080/videos/DCIM/100/GPR10973.MP4\" rel=\"nofollow noreferrer\">http://10.5.5.9:8080/videos/DCIM/100/GPR10973.MP4</a></p>\n"},{"tags":["java","spring-boot","http-status-code-404","war","heroku-postgres"],"owner":{"account_id":28088408,"reputation":1,"user_id":21458404,"display_name":"AxelSNZ"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679505905,"creation_date":1679505905,"question_id":75815454,"body_markdown":"I try to deploy my spring web startup application with heroku git and the plugin &quot;heroku-maven-plugin&quot; but I have a 404 error when I try to access the application, locally the application works very well.\r\n\r\nIf you could help me, that would be great, thank you.\r\n\r\n[Console logs : ](https://i.stack.imgur.com/dcMVR.png)\r\n[App web : ](https://i.stack.imgur.com/hc53j.png)\r\n\r\n**POM.XML:**\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    &lt;parent&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n        &lt;version&gt;3.0.4&lt;/version&gt;\r\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n    &lt;/parent&gt;\r\n    &lt;groupId&gt;org.application&lt;/groupId&gt;\r\n    &lt;artifactId&gt;PropertyManag&lt;/artifactId&gt;\r\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n    &lt;packaging&gt;war&lt;/packaging&gt;\r\n    &lt;name&gt;ProprtyManag&lt;/name&gt;\r\n    &lt;description&gt;PropertyManag&lt;/description&gt;\r\n    &lt;properties&gt;\r\n        &lt;java.version&gt;19&lt;/java.version&gt;\r\n        &lt;maven.compiler.source&gt;19&lt;/maven.compiler.source&gt;\r\n        &lt;maven.compiler.target&gt;19&lt;/maven.compiler.target&gt;\r\n        &lt;maven.compiler.release&gt;19&lt;/maven.compiler.release&gt;\r\n    &lt;/properties&gt;\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-security-web&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-security-test&lt;/artifactId&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-security-core&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-websocket&lt;/artifactId&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\r\n            &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\r\n            &lt;version&gt;42.5.4&lt;/version&gt;\r\n            &lt;scope&gt;runtime&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.thymeleaf.extras&lt;/groupId&gt;\r\n            &lt;artifactId&gt;thymeleaf-extras-springsecurity5&lt;/artifactId&gt;\r\n            &lt;version&gt;3.1.1.RELEASE&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n            &lt;version&gt;1.18.26&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;io.jsonwebtoken&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jjwt-api&lt;/artifactId&gt;\r\n            &lt;version&gt;0.11.5&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;io.jsonwebtoken&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jjwt-impl&lt;/artifactId&gt;\r\n            &lt;version&gt;0.11.5&lt;/version&gt;\r\n            &lt;scope&gt;runtime&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;io.jsonwebtoken&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jjwt-jackson&lt;/artifactId&gt;\r\n            &lt;version&gt;0.11.5&lt;/version&gt;\r\n            &lt;scope&gt;runtime&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.jetbrains&lt;/groupId&gt;\r\n            &lt;artifactId&gt;annotations&lt;/artifactId&gt;\r\n            &lt;version&gt;24.0.1&lt;/version&gt;\r\n            &lt;scope&gt;compile&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;junit&lt;/groupId&gt;\r\n            &lt;artifactId&gt;junit&lt;/artifactId&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.itextpdf&lt;/groupId&gt;\r\n            &lt;artifactId&gt;itextpdf&lt;/artifactId&gt;\r\n            &lt;version&gt;5.5.13.3&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springdoc&lt;/groupId&gt;\r\n            &lt;artifactId&gt;springdoc-openapi-starter-webmvc-ui&lt;/artifactId&gt;\r\n            &lt;version&gt;2.0.4&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n\r\n    &lt;distributionManagement&gt;\r\n        &lt;repository&gt;\r\n            &lt;id&gt;dev&lt;/id&gt;\r\n            &lt;name&gt;Local repository&lt;/name&gt;\r\n            &lt;url&gt;file://${user.home}/.m2/repository&lt;/url&gt;\r\n        &lt;/repository&gt;\r\n    &lt;/distributionManagement&gt;\r\n\r\n    &lt;build&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;3.8.0&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;source&gt;19&lt;/source&gt;\r\n                    &lt;target&gt;19&lt;/target&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;com.heroku.sdk&lt;/groupId&gt;\r\n                &lt;artifactId&gt;heroku-maven-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;3.0.7&lt;/version&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n\r\n```\r\n\r\n**LOGS:**\r\n```\r\n2023-03-22T16:58:48.671276+00:00 app[web.1]: WARNING: Unknown version string [6.0]. Default version will be used.\r\n2023-03-22T16:58:48.680505+00:00 app[web.1]: Mar 22, 2023 4:58:48 PM org.apache.tomcat.util.descriptor.web.WebXml setVersion\r\n2023-03-22T16:58:48.680506+00:00 app[web.1]: WARNING: Unknown version string [6.0]. Default version will be used.\r\n2023-03-22T16:58:48.686599+00:00 app[web.1]: Mar 22, 2023 4:58:48 PM org.apache.tomcat.util.descriptor.web.WebXml setVersion\r\n2023-03-22T16:58:48.686600+00:00 app[web.1]: WARNING: Unknown version string [5.0]. Default version will be used.\r\n2023-03-22T16:58:53.221667+00:00 app[web.1]: Mar 22, 2023 4:58:53 PM org.apache.jasper.servlet.TldScanner scanJars\r\n2023-03-22T16:58:53.221680+00:00 app[web.1]: INFO: At least one JAR was scanned for TLDs yet contained no TLDs. Enable debug logging for this logger for a complete list of JARs that were scanned but no TLDs were found in them. Skipping unneeded JARs during scanning can improve startup time and JSP compilation time.\r\n2023-03-22T16:58:53.267991+00:00 app[web.1]: Mar 22, 2023 4:58:53 PM org.apache.coyote.AbstractProtocol start\r\n2023-03-22T16:58:53.267998+00:00 app[web.1]: INFO: Starting ProtocolHandler [&quot;http-nio-32755&quot;]\r\n2023-03-22T17:01:01.560586+00:00 heroku[router]: at=info method=GET path=&quot;/&quot; host=property-manage.herokuapp.com request_id=631faa7b-57d5-433b-b1e7-987830bdc86c fwd=&quot;88.123.95.253&quot; dyno=web.1 connect=0ms service=30ms status=404 bytes=864 protocol=https\r\n```\r\n\r\n\r\nI tried to deploy my web application with docker heroku but I got a R14 error, I tried to deploy with git heroku (without plugin) but I got this error: \r\n```\r\nFailed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.10.1:compile...\r\n```\r\n","title":"How to Deploy WAR File to Heroku with plugin?","body":"<p>I try to deploy my spring web startup application with heroku git and the plugin &quot;heroku-maven-plugin&quot; but I have a 404 error when I try to access the application, locally the application works very well.</p>\n<p>If you could help me, that would be great, thank you.</p>\n<p><a href=\"https://i.stack.imgur.com/dcMVR.png\" rel=\"nofollow noreferrer\">Console logs : </a>\n<a href=\"https://i.stack.imgur.com/hc53j.png\" rel=\"nofollow noreferrer\">App web : </a></p>\n<p><strong>POM.XML:</strong></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;3.0.4&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;org.application&lt;/groupId&gt;\n    &lt;artifactId&gt;PropertyManag&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;packaging&gt;war&lt;/packaging&gt;\n    &lt;name&gt;ProprtyManag&lt;/name&gt;\n    &lt;description&gt;PropertyManag&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;19&lt;/java.version&gt;\n        &lt;maven.compiler.source&gt;19&lt;/maven.compiler.source&gt;\n        &lt;maven.compiler.target&gt;19&lt;/maven.compiler.target&gt;\n        &lt;maven.compiler.release&gt;19&lt;/maven.compiler.release&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-security-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-security-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-security-core&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-websocket&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\n            &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\n            &lt;version&gt;42.5.4&lt;/version&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.thymeleaf.extras&lt;/groupId&gt;\n            &lt;artifactId&gt;thymeleaf-extras-springsecurity5&lt;/artifactId&gt;\n            &lt;version&gt;3.1.1.RELEASE&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n            &lt;version&gt;1.18.26&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.jsonwebtoken&lt;/groupId&gt;\n            &lt;artifactId&gt;jjwt-api&lt;/artifactId&gt;\n            &lt;version&gt;0.11.5&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.jsonwebtoken&lt;/groupId&gt;\n            &lt;artifactId&gt;jjwt-impl&lt;/artifactId&gt;\n            &lt;version&gt;0.11.5&lt;/version&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.jsonwebtoken&lt;/groupId&gt;\n            &lt;artifactId&gt;jjwt-jackson&lt;/artifactId&gt;\n            &lt;version&gt;0.11.5&lt;/version&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.jetbrains&lt;/groupId&gt;\n            &lt;artifactId&gt;annotations&lt;/artifactId&gt;\n            &lt;version&gt;24.0.1&lt;/version&gt;\n            &lt;scope&gt;compile&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;junit&lt;/groupId&gt;\n            &lt;artifactId&gt;junit&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.itextpdf&lt;/groupId&gt;\n            &lt;artifactId&gt;itextpdf&lt;/artifactId&gt;\n            &lt;version&gt;5.5.13.3&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springdoc&lt;/groupId&gt;\n            &lt;artifactId&gt;springdoc-openapi-starter-webmvc-ui&lt;/artifactId&gt;\n            &lt;version&gt;2.0.4&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;distributionManagement&gt;\n        &lt;repository&gt;\n            &lt;id&gt;dev&lt;/id&gt;\n            &lt;name&gt;Local repository&lt;/name&gt;\n            &lt;url&gt;file://${user.home}/.m2/repository&lt;/url&gt;\n        &lt;/repository&gt;\n    &lt;/distributionManagement&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.8.0&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;source&gt;19&lt;/source&gt;\n                    &lt;target&gt;19&lt;/target&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;com.heroku.sdk&lt;/groupId&gt;\n                &lt;artifactId&gt;heroku-maven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.0.7&lt;/version&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n\n</code></pre>\n<p><strong>LOGS:</strong></p>\n<pre><code>2023-03-22T16:58:48.671276+00:00 app[web.1]: WARNING: Unknown version string [6.0]. Default version will be used.\n2023-03-22T16:58:48.680505+00:00 app[web.1]: Mar 22, 2023 4:58:48 PM org.apache.tomcat.util.descriptor.web.WebXml setVersion\n2023-03-22T16:58:48.680506+00:00 app[web.1]: WARNING: Unknown version string [6.0]. Default version will be used.\n2023-03-22T16:58:48.686599+00:00 app[web.1]: Mar 22, 2023 4:58:48 PM org.apache.tomcat.util.descriptor.web.WebXml setVersion\n2023-03-22T16:58:48.686600+00:00 app[web.1]: WARNING: Unknown version string [5.0]. Default version will be used.\n2023-03-22T16:58:53.221667+00:00 app[web.1]: Mar 22, 2023 4:58:53 PM org.apache.jasper.servlet.TldScanner scanJars\n2023-03-22T16:58:53.221680+00:00 app[web.1]: INFO: At least one JAR was scanned for TLDs yet contained no TLDs. Enable debug logging for this logger for a complete list of JARs that were scanned but no TLDs were found in them. Skipping unneeded JARs during scanning can improve startup time and JSP compilation time.\n2023-03-22T16:58:53.267991+00:00 app[web.1]: Mar 22, 2023 4:58:53 PM org.apache.coyote.AbstractProtocol start\n2023-03-22T16:58:53.267998+00:00 app[web.1]: INFO: Starting ProtocolHandler [&quot;http-nio-32755&quot;]\n2023-03-22T17:01:01.560586+00:00 heroku[router]: at=info method=GET path=&quot;/&quot; host=property-manage.herokuapp.com request_id=631faa7b-57d5-433b-b1e7-987830bdc86c fwd=&quot;88.123.95.253&quot; dyno=web.1 connect=0ms service=30ms status=404 bytes=864 protocol=https\n</code></pre>\n<p>I tried to deploy my web application with docker heroku but I got a R14 error, I tried to deploy with git heroku (without plugin) but I got this error:</p>\n<pre><code>Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.10.1:compile...\n</code></pre>\n"},{"tags":["java","file","exception","try-catch"],"comments":[{"owner":{"account_id":42657,"reputation":27146,"user_id":124339,"accept_rate":46,"display_name":"Johanna"},"score":3,"creation_date":1246558875,"post_id":1075895,"comment_id":888767,"body_markdown":"and I will catch all those specific Exceptions with catch(Exception e){}??","body":"and I will catch all those specific Exceptions with catch(Exception e){}??"},{"owner":{"account_id":1885,"reputation":137382,"user_id":2598,"accept_rate":93,"display_name":"jjnguy"},"score":1,"creation_date":1246558991,"post_id":1075895,"comment_id":888779,"body_markdown":"yeah.  Since Exception is the base class of all exceptions, it will catch any exception.","body":"yeah.  Since Exception is the base class of all exceptions, it will catch any exception."}],"answers":[{"tags":[],"owner":{"account_id":41034,"reputation":2889,"user_id":119179,"accept_rate":73,"display_name":"Allan"},"down_vote_count":4,"up_vote_count":20,"is_accepted":false,"score":16,"last_activity_date":1246558683,"creation_date":1246558683,"answer_id":1075906,"question_id":1075895,"body_markdown":"Catch the base exception &#39;Exception&#39;\r\n\r\n \r\n\r\n       try { \r\n             //some code\r\n       } catch (Exception e) {\r\n            //catches exception and all subclasses \r\n       }","title":"How can I catch all exceptions thrown through reading / writing a file?","body":"<p>Catch the base exception 'Exception'</p>\n\n<pre><code>   try { \n         //some code\n   } catch (Exception e) {\n        //catches exception and all subclasses \n   }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":29756,"reputation":12756,"user_id":80633,"accept_rate":75,"display_name":"JoshJordan"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1518448401,"creation_date":1246558690,"answer_id":1075907,"question_id":1075895,"body_markdown":"Do you mean catch an `Exception` of any *type* that is thrown, as opposed to just specific Exceptions?\r\n\r\nIf so:\r\n\r\n    try {\r\n       //...file IO...\r\n    } catch(Exception e) {\r\n       //...do stuff with e, such as check its type or log it...\r\n    }","title":"How can I catch all exceptions thrown through reading / writing a file?","body":"<p>Do you mean catch an <code>Exception</code> of any <em>type</em> that is thrown, as opposed to just specific Exceptions?</p>\n\n<p>If so:</p>\n\n<pre><code>try {\n   //...file IO...\n} catch(Exception e) {\n   //...do stuff with e, such as check its type or log it...\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":44851,"reputation":14892,"user_id":131871,"accept_rate":55,"display_name":"CodeFusionMobile"},"down_vote_count":2,"up_vote_count":6,"is_accepted":false,"score":4,"last_activity_date":1246558793,"creation_date":1246558793,"answer_id":1075917,"question_id":1075895,"body_markdown":"Yes there is.\r\n\r\n\r\n    try\r\n    {\r\n        //Read/write file\r\n    }catch(Exception ex)\r\n    {\r\n        //catches all exceptions extended from Exception (which is everything)\r\n    }","title":"How can I catch all exceptions thrown through reading / writing a file?","body":"<p>Yes there is.</p>\n\n<pre><code>try\n{\n    //Read/write file\n}catch(Exception ex)\n{\n    //catches all exceptions extended from Exception (which is everything)\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1885,"reputation":137382,"user_id":2598,"accept_rate":93,"display_name":"jjnguy"},"down_vote_count":0,"up_vote_count":131,"is_accepted":true,"score":131,"last_activity_date":1246559737,"creation_date":1246558859,"answer_id":1075919,"question_id":1075895,"body_markdown":"If you want, you can add throws clauses to your methods.  Then you don&#39;t have to catch checked methods right away.  That way, you can catch the `exceptions` later (perhaps at the same time as other `exceptions`).\r\n\r\nThe code looks like:\r\n\r\n    public void someMethode() throws SomeCheckedException {\r\n    \r\n        //  code\r\n    \r\n    }\r\n\r\nThen later you can deal with the `exceptions` if you don&#39;t wanna deal with them in that method.\r\n\r\nTo catch all exceptions some block of code may throw you can do: (This will also catch `Exceptions` you wrote yourself)\r\n\r\n    try {\r\n    \r\n        // exceptional block of code ...\r\n    \r\n        // ...\r\n\r\n    } catch (Exception e){\r\n    \r\n        // Deal with e as you please.\r\n        //e may be any type of exception at all.\r\n    \r\n    }\r\n\r\nThe reason that works is because `Exception` is the base class for all exceptions.  Thus any exception that may get thrown is an `Exception` (Uppercase &#39;E&#39;). \r\n\r\nIf you want to handle your own exceptions first simply add a `catch` block before the generic Exception one.\r\n\r\n    try{    \r\n    }catch(MyOwnException me){\r\n    }catch(Exception e){\r\n    }","title":"How can I catch all exceptions thrown through reading / writing a file?","body":"<p>If you want, you can add throws clauses to your methods.  Then you don't have to catch checked methods right away.  That way, you can catch the <code>exceptions</code> later (perhaps at the same time as other <code>exceptions</code>).</p>\n\n<p>The code looks like:</p>\n\n<pre><code>public void someMethode() throws SomeCheckedException {\n\n    //  code\n\n}\n</code></pre>\n\n<p>Then later you can deal with the <code>exceptions</code> if you don't wanna deal with them in that method.</p>\n\n<p>To catch all exceptions some block of code may throw you can do: (This will also catch <code>Exceptions</code> you wrote yourself)</p>\n\n<pre><code>try {\n\n    // exceptional block of code ...\n\n    // ...\n\n} catch (Exception e){\n\n    // Deal with e as you please.\n    //e may be any type of exception at all.\n\n}\n</code></pre>\n\n<p>The reason that works is because <code>Exception</code> is the base class for all exceptions.  Thus any exception that may get thrown is an <code>Exception</code> (Uppercase 'E'). </p>\n\n<p>If you want to handle your own exceptions first simply add a <code>catch</code> block before the generic Exception one.</p>\n\n<pre><code>try{    \n}catch(MyOwnException me){\n}catch(Exception e){\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":33313,"reputation":5443,"user_id":93200,"accept_rate":76,"display_name":"Alex Feinman"},"down_vote_count":1,"up_vote_count":8,"is_accepted":false,"score":7,"last_activity_date":1246559789,"creation_date":1246559789,"answer_id":1075991,"question_id":1075895,"body_markdown":"It is bad practice to catch **Exception** -- it&#39;s just too broad, and you may miss something like a **NullPointerException** in your own code.\r\n\r\nFor most file operations, **IOException** is the root exception. Better to catch that, instead.\r\n\r\n\r\n","title":"How can I catch all exceptions thrown through reading / writing a file?","body":"<p>It is bad practice to catch <strong>Exception</strong> -- it's just too broad, and you may miss something like a <strong>NullPointerException</strong> in your own code.</p>\n\n<p>For most file operations, <strong>IOException</strong> is the root exception. Better to catch that, instead.</p>\n"},{"tags":[],"owner":{"account_id":44451,"reputation":3976,"user_id":130516,"display_name":"codethulhu"},"down_vote_count":2,"up_vote_count":108,"is_accepted":false,"score":106,"last_activity_date":1246561451,"creation_date":1246561451,"answer_id":1076126,"question_id":1075895,"body_markdown":"\r\nWhile I agree it&#39;s not good style to catch a raw Exception, there are ways of handling exceptions which provide for superior logging, and the ability to handle the unexpected. Since you are in an exceptional state, you are probably more interested in getting good information than in response time, so instanceof performance shouldn&#39;t be a big hit.\r\n\r\n\r\n    try{\r\n        // IO code\r\n    } catch (Exception e){\r\n        if(e instanceof IOException){\r\n            // handle this exception type\r\n        } else if (e instanceof AnotherExceptionType){\r\n            //handle this one\r\n        } else {\r\n            // We didn&#39;t expect this one. What could it be? Let&#39;s log it, and let it bubble up the hierarchy.\r\n            throw e;\r\n        }\r\n    }\r\n\r\nHowever, this doesn&#39;t take into consideration the fact that IO can also throw Errors. Errors are not Exceptions. Errors are a under a different inheritance hierarchy than Exceptions, though both share the base class Throwable. Since IO can throw Errors, you may want to go so far as to catch Throwable\r\n\r\n    try{\r\n        // IO code\r\n    } catch (Throwable t){\r\n        if(t instanceof Exception){\r\n            if(t instanceof IOException){\r\n                // handle this exception type\r\n            } else if (t instanceof AnotherExceptionType){\r\n                //handle this one\r\n            } else {\r\n                // We didn&#39;t expect this Exception. What could it be? Let&#39;s log it, and let it bubble up the hierarchy.\r\n            }\r\n        } else if (t instanceof Error){\r\n            if(t instanceof IOError){\r\n                // handle this Error\r\n            } else if (t instanceof AnotherError){\r\n                //handle different Error\r\n            } else {\r\n                // We didn&#39;t expect this Error. What could it be? Let&#39;s log it, and let it bubble up the hierarchy.\r\n            }\r\n        } else {\r\n            // This should never be reached, unless you have subclassed Throwable for your own purposes.\r\n            throw t;\r\n        }\r\n    }\r\n","title":"How can I catch all exceptions thrown through reading / writing a file?","body":"<p>While I agree it's not good style to catch a raw Exception, there are ways of handling exceptions which provide for superior logging, and the ability to handle the unexpected. Since you are in an exceptional state, you are probably more interested in getting good information than in response time, so instanceof performance shouldn't be a big hit.</p>\n\n<pre><code>try{\n    // IO code\n} catch (Exception e){\n    if(e instanceof IOException){\n        // handle this exception type\n    } else if (e instanceof AnotherExceptionType){\n        //handle this one\n    } else {\n        // We didn't expect this one. What could it be? Let's log it, and let it bubble up the hierarchy.\n        throw e;\n    }\n}\n</code></pre>\n\n<p>However, this doesn't take into consideration the fact that IO can also throw Errors. Errors are not Exceptions. Errors are a under a different inheritance hierarchy than Exceptions, though both share the base class Throwable. Since IO can throw Errors, you may want to go so far as to catch Throwable</p>\n\n<pre><code>try{\n    // IO code\n} catch (Throwable t){\n    if(t instanceof Exception){\n        if(t instanceof IOException){\n            // handle this exception type\n        } else if (t instanceof AnotherExceptionType){\n            //handle this one\n        } else {\n            // We didn't expect this Exception. What could it be? Let's log it, and let it bubble up the hierarchy.\n        }\n    } else if (t instanceof Error){\n        if(t instanceof IOError){\n            // handle this Error\n        } else if (t instanceof AnotherError){\n            //handle different Error\n        } else {\n            // We didn't expect this Error. What could it be? Let's log it, and let it bubble up the hierarchy.\n        }\n    } else {\n        // This should never be reached, unless you have subclassed Throwable for your own purposes.\n        throw t;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10630608,"reputation":111,"user_id":7828891,"display_name":"Rathishkumar Nair"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1531404778,"creation_date":1531404778,"answer_id":51307887,"question_id":1075895,"body_markdown":"You may catch multiple exceptions in single catch block.\r\n\r\n    try{\r\n      // somecode throwing multiple exceptions;\r\n    } catch (Exception1 | Exception2 | Exception3 exception){\r\n      // handle exception.\r\n    } \r\n ","title":"How can I catch all exceptions thrown through reading / writing a file?","body":"<p>You may catch multiple exceptions in single catch block.</p>\n\n<pre><code>try{\n  // somecode throwing multiple exceptions;\n} catch (Exception1 | Exception2 | Exception3 exception){\n  // handle exception.\n} \n</code></pre>\n"}],"owner":{"account_id":42657,"reputation":27146,"user_id":124339,"accept_rate":46,"display_name":"Johanna"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":284861,"favorite_count":0,"down_vote_count":0,"up_vote_count":138,"accepted_answer_id":1075919,"answer_count":7,"score":138,"last_activity_date":1679505279,"creation_date":1246558561,"question_id":1075895,"body_markdown":"In Java, is there any way to get (catch) all `exceptions` instead of catching the exceptions individually?","title":"How can I catch all exceptions thrown through reading / writing a file?","body":"<p>In Java, is there any way to get (catch) all <code>exceptions</code> instead of catching the exceptions individually?</p>\n"},{"tags":["java","selenium-webdriver","timeoutexception"],"owner":{"account_id":28088308,"reputation":11,"user_id":21458316,"display_name":"saab"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":622,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1679505260,"creation_date":1679505137,"question_id":75815314,"body_markdown":" I am running tests using selenium webdriver. But with 111 chrome update, had to add &quot;--remote-allow-origins=*&quot; argument to make webdriver work. Then started getting following exception at random elements(findElement)/commands(sendKeys, switchTo)\r\n\r\n```\r\n`org.openqa.selenium.TimeoutException: java.util.concurrent.TimeoutException\r\nBuild info: version: &#39;4.6.0&#39;, revision: &#39;79f1c02ae20&#39;\r\nSystem info: os.name: &#39;Windows 10&#39;, os.arch: &#39;amd64&#39;, os.version: &#39;10.0&#39;, java.version: &#39;15.0.2&#39;\r\nDriver info: org.openqa.selenium.chrome.ChromeDriver\r\nCommand: [93f8e26807f72a1db301042970c404c3, clickElement {id=99af3643-8e51-46fd-849a-a6968fb6916a}]\r\nCapabilities {acceptInsecureCerts: true, browserName: chrome, browserVersion: 111.0.5563.65, chrome: {chromedriverVersion: 111.0.5563.64 (c710e93d5b63..., userDataDir: C:\\Users\\kalkidna\\AppData\\L...}, goog:chromeOptions: {debuggerAddress: localhost:49445}, networkConnectionEnabled: false, pageLoadStrategy: normal, platformName: WINDOWS, proxy: Proxy(), se:cdp: ws://localhost:49445/devtoo..., se:cdpVersion: 111.0.5563.65, setWindowRect: true, strictFileInteractability: false, timeouts: {implicit: 0, pageLoad: 300000, script: 30000}, unhandledPromptBehavior: dismiss and notify, webauthn:extension:credBlob: true, webauthn:extension:largeBlob: true, webauthn:extension:minPinLength: true, webauthn:extension:prf: true, webauthn:virtualAuthenticators: true}\r\nElement: [[ChromeDriver: chrome on WINDOWS (93f8e26807f72a1db301042970c404c3)] -&gt; id: submitbutton]\r\nSession ID: 93f8e26807f72a1db301042970c404c3\r\n\tat org.openqa.selenium.remote.http.netty.NettyHttpHandler.makeCall(NettyHttpHandler.java:65)\r\n\tat org.openqa.selenium.remote.http.AddSeleniumUserAgent.lambda$apply$0(AddSeleniumUserAgent.java:42)\r\n\tat org.openqa.selenium.remote.http.Filter.lambda$andFinally$1(Filter.java:56)\r\n\tat org.openqa.selenium.remote.http.netty.NettyHttpHandler.execute(NettyHttpHandler.java:49)\r\n\tat org.openqa.selenium.remote.http.AddSeleniumUserAgent.lambda$apply$0(AddSeleniumUserAgent.java:42)\r\n\tat org.openqa.selenium.remote.http.Filter.lambda$andFinally$1(Filter.java:56)\r\n\tat org.openqa.selenium.remote.http.netty.NettyClient.execute(NettyClient.java:99)\r\n\tat org.openqa.selenium.remote.HttpCommandExecutor.execute(HttpCommandExecutor.java:181)\r\n\tat org.openqa.selenium.remote.service.DriverCommandExecutor.invokeExecute(DriverCommandExecutor.java:167)\r\n\tat org.openqa.selenium.remote.service.DriverCommandExecutor.execute(DriverCommandExecutor.java:142)\r\n\tat org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:541)\r\n\tat org.openqa.selenium.remote.RemoteWebElement.execute(RemoteWebElement.java:257)\r\n\tat org.openqa.selenium.remote.RemoteWebElement.click(RemoteWebElement.java:78)\r\n\tat com.classes.SCLFiles.SCLFileLoading.sclFileLoad(SCLFileLoading.java:722)\r\n\tat com.classes.SCLFiles.SCLFileLoading.uploadFileWithGooseAndSampledValues(SCLFileLoading.java:1160)\r\n\tat com.testcases.SCLFiles.SCLFileLoadingTest.fileUploadWithGooseAndSVMessagesTest(SCLFileLoadingTest.java:369)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\r\nCaused by: java.util.concurrent.TimeoutException\r\n\tat java.base/java.util.concurrent.CompletableFuture.timedGet(CompletableFuture.java:1950)\r\n\tat java.base/java.util.concurrent.CompletableFuture.get(CompletableFuture.java:2085)\r\n\tat org.asynchttpclient.netty.NettyResponseFuture.get(NettyResponseFuture.java:206)\r\n\tat org.openqa.selenium.remote.http.netty.NettyHttpHandler.makeCall(NettyHttpHandler.java:59)\r\n\t... 43 more`\r\n```\r\n\r\n\r\nI am using the following dependencies\r\n\r\n```\r\n`&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;selenium-java&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;4.6.0&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;selenium-http-jdk-client&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;4.6.0&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.googlecode.json-simple&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;json-simple&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.1.1&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;slf4j-simple&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.7.30&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.testng&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;testng&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;7.3.0&lt;/version&gt;\r\n\t\t\t&lt;scope&gt;compile&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.aventstack&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;extentreports-testng-adapter&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.2.2&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;commons-io&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;commons-io&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.6&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;commons-compress&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.18&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;poi&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;4.1.0&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;poi-ooxml&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;4.1.0&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.google.guava&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;guava&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;31.0.1-jre&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;!-- https://mvnrepository.com/artifact/javax.mail/javax.mail-api --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.sun.mail&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;javax.mail&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.6.0&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;!-- https://mvnrepository.com/artifact/javax.activation/activation --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;javax.activation&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;activation&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.1.1&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;!-- https://mvnrepository.com/artifact/com.jcraft/jsch --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.jcraft&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jsch&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;0.1.55&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.google.api-client&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;google-api-client-appengine&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.23.0&lt;/version&gt;\r\n\t\t\t&lt;exclusions&gt;\r\n\t\t\t\t&lt;exclusion&gt;\r\n\t\t\t\t\t&lt;groupId&gt;com.google.guava&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;guava-jdk5&lt;/artifactId&gt;\r\n\t\t\t\t&lt;/exclusion&gt;\r\n\t\t\t&lt;/exclusions&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;`\r\n```\r\n\r\nalso added &quot;no-sandbox&quot; argument to chromeoptions as well.","title":"org.openqa.selenium.TimeoutException: java.util.concurrent.TimeoutException by netty HTTP handler","body":"<p>I am running tests using selenium webdriver. But with 111 chrome update, had to add &quot;--remote-allow-origins=*&quot; argument to make webdriver work. Then started getting following exception at random elements(findElement)/commands(sendKeys, switchTo)</p>\n<pre><code>`org.openqa.selenium.TimeoutException: java.util.concurrent.TimeoutException\nBuild info: version: '4.6.0', revision: '79f1c02ae20'\nSystem info: os.name: 'Windows 10', os.arch: 'amd64', os.version: '10.0', java.version: '15.0.2'\nDriver info: org.openqa.selenium.chrome.ChromeDriver\nCommand: [93f8e26807f72a1db301042970c404c3, clickElement {id=99af3643-8e51-46fd-849a-a6968fb6916a}]\nCapabilities {acceptInsecureCerts: true, browserName: chrome, browserVersion: 111.0.5563.65, chrome: {chromedriverVersion: 111.0.5563.64 (c710e93d5b63..., userDataDir: C:\\Users\\kalkidna\\AppData\\L...}, goog:chromeOptions: {debuggerAddress: localhost:49445}, networkConnectionEnabled: false, pageLoadStrategy: normal, platformName: WINDOWS, proxy: Proxy(), se:cdp: ws://localhost:49445/devtoo..., se:cdpVersion: 111.0.5563.65, setWindowRect: true, strictFileInteractability: false, timeouts: {implicit: 0, pageLoad: 300000, script: 30000}, unhandledPromptBehavior: dismiss and notify, webauthn:extension:credBlob: true, webauthn:extension:largeBlob: true, webauthn:extension:minPinLength: true, webauthn:extension:prf: true, webauthn:virtualAuthenticators: true}\nElement: [[ChromeDriver: chrome on WINDOWS (93f8e26807f72a1db301042970c404c3)] -&gt; id: submitbutton]\nSession ID: 93f8e26807f72a1db301042970c404c3\n    at org.openqa.selenium.remote.http.netty.NettyHttpHandler.makeCall(NettyHttpHandler.java:65)\n    at org.openqa.selenium.remote.http.AddSeleniumUserAgent.lambda$apply$0(AddSeleniumUserAgent.java:42)\n    at org.openqa.selenium.remote.http.Filter.lambda$andFinally$1(Filter.java:56)\n    at org.openqa.selenium.remote.http.netty.NettyHttpHandler.execute(NettyHttpHandler.java:49)\n    at org.openqa.selenium.remote.http.AddSeleniumUserAgent.lambda$apply$0(AddSeleniumUserAgent.java:42)\n    at org.openqa.selenium.remote.http.Filter.lambda$andFinally$1(Filter.java:56)\n    at org.openqa.selenium.remote.http.netty.NettyClient.execute(NettyClient.java:99)\n    at org.openqa.selenium.remote.HttpCommandExecutor.execute(HttpCommandExecutor.java:181)\n    at org.openqa.selenium.remote.service.DriverCommandExecutor.invokeExecute(DriverCommandExecutor.java:167)\n    at org.openqa.selenium.remote.service.DriverCommandExecutor.execute(DriverCommandExecutor.java:142)\n    at org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:541)\n    at org.openqa.selenium.remote.RemoteWebElement.execute(RemoteWebElement.java:257)\n    at org.openqa.selenium.remote.RemoteWebElement.click(RemoteWebElement.java:78)\n    at com.classes.SCLFiles.SCLFileLoading.sclFileLoad(SCLFileLoading.java:722)\n    at com.classes.SCLFiles.SCLFileLoading.uploadFileWithGooseAndSampledValues(SCLFileLoading.java:1160)\n    at com.testcases.SCLFiles.SCLFileLoadingTest.fileUploadWithGooseAndSVMessagesTest(SCLFileLoadingTest.java:369)\n    at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\nCaused by: java.util.concurrent.TimeoutException\n    at java.base/java.util.concurrent.CompletableFuture.timedGet(CompletableFuture.java:1950)\n    at java.base/java.util.concurrent.CompletableFuture.get(CompletableFuture.java:2085)\n    at org.asynchttpclient.netty.NettyResponseFuture.get(NettyResponseFuture.java:206)\n    at org.openqa.selenium.remote.http.netty.NettyHttpHandler.makeCall(NettyHttpHandler.java:59)\n    ... 43 more`\n</code></pre>\n<p>I am using the following dependencies</p>\n<pre><code>`&lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\n            &lt;artifactId&gt;selenium-java&lt;/artifactId&gt;\n            &lt;version&gt;4.6.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\n            &lt;artifactId&gt;selenium-http-jdk-client&lt;/artifactId&gt;\n            &lt;version&gt;4.6.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.googlecode.json-simple&lt;/groupId&gt;\n            &lt;artifactId&gt;json-simple&lt;/artifactId&gt;\n            &lt;version&gt;1.1.1&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n            &lt;artifactId&gt;slf4j-simple&lt;/artifactId&gt;\n            &lt;version&gt;1.7.30&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.testng&lt;/groupId&gt;\n            &lt;artifactId&gt;testng&lt;/artifactId&gt;\n            &lt;version&gt;7.3.0&lt;/version&gt;\n            &lt;scope&gt;compile&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.aventstack&lt;/groupId&gt;\n            &lt;artifactId&gt;extentreports-testng-adapter&lt;/artifactId&gt;\n            &lt;version&gt;1.2.2&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;commons-io&lt;/groupId&gt;\n            &lt;artifactId&gt;commons-io&lt;/artifactId&gt;\n            &lt;version&gt;2.6&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\n            &lt;artifactId&gt;commons-compress&lt;/artifactId&gt;\n            &lt;version&gt;1.18&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\n            &lt;artifactId&gt;poi&lt;/artifactId&gt;\n            &lt;version&gt;4.1.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\n            &lt;artifactId&gt;poi-ooxml&lt;/artifactId&gt;\n            &lt;version&gt;4.1.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.google.guava&lt;/groupId&gt;\n            &lt;artifactId&gt;guava&lt;/artifactId&gt;\n            &lt;version&gt;31.0.1-jre&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;!-- https://mvnrepository.com/artifact/javax.mail/javax.mail-api --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.sun.mail&lt;/groupId&gt;\n            &lt;artifactId&gt;javax.mail&lt;/artifactId&gt;\n            &lt;version&gt;1.6.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;!-- https://mvnrepository.com/artifact/javax.activation/activation --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.activation&lt;/groupId&gt;\n            &lt;artifactId&gt;activation&lt;/artifactId&gt;\n            &lt;version&gt;1.1.1&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;!-- https://mvnrepository.com/artifact/com.jcraft/jsch --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.jcraft&lt;/groupId&gt;\n            &lt;artifactId&gt;jsch&lt;/artifactId&gt;\n            &lt;version&gt;0.1.55&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.google.api-client&lt;/groupId&gt;\n            &lt;artifactId&gt;google-api-client-appengine&lt;/artifactId&gt;\n            &lt;version&gt;1.23.0&lt;/version&gt;\n            &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;com.google.guava&lt;/groupId&gt;\n                    &lt;artifactId&gt;guava-jdk5&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n            &lt;/exclusions&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;`\n</code></pre>\n<p>also added &quot;no-sandbox&quot; argument to chromeoptions as well.</p>\n"},{"tags":["java","android","opengl-es","colormatrix"],"comments":[{"owner":{"account_id":1218577,"reputation":1123,"user_id":1185688,"accept_rate":88,"display_name":"Tempestas Ludi"},"score":1,"creation_date":1538042523,"post_id":33358030,"comment_id":92007893,"body_markdown":"Are you talking about a &quot;ColorMatrix&quot;, like https://developer.android.com/reference/android/graphics/ColorMatrix ?","body":"Are you talking about a &quot;ColorMatrix&quot;, like <a href=\"https://developer.android.com/reference/android/graphics/ColorMatrix\" rel=\"nofollow noreferrer\">developer.android.com/reference/android/graphics/ColorMatrix</a> ?"}],"answers":[{"tags":[],"owner":{"account_id":7209542,"reputation":383,"user_id":5504110,"display_name":"Eugen Hotaj"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1447951459,"creation_date":1447951459,"answer_id":33809654,"question_id":33358030,"body_markdown":"I&#39;m not an expert in computer graphics but I&#39;m assuming you want to iterate through every pixel of the image you want to blend, center your `colorMatrix` on each pixel, calculate the average using the surrounding pixels your matrix comes into contact with, then apply this average to your pixel. Obviously you will somehow need to handle the edge pixels.\r\n\r\nExample: Suppose you have a 5x4 image with pixel values likes so\r\n     \r\n        1     2    3    4    5\r\n     1 1000 1000 1000 1000 1000\r\n     2 1000 1000 1000 1000 1000\r\n     3 1000 1000 1000 1000 1000\r\n     4 1000 1000 1000 1000 1000\r\n\r\n(1) Taking the pixel at position `(3,3)` and applying your transformation matrix - i.e multiplying image pixel `(i,j)` with matrix position `(i,j)` - we get\r\n\r\n         1     2    3    4    5\r\n     1  393  769  189    0    0\r\n     2  349  686  168    0    0\r\n     3  272  534  131    0    0\r\n     4    0    0    0 1000    0\r\n\r\n(2) Now taking the average of this transformation - i.e add all the numbers and divide by 20 - we get 224.5 or approximately 225. So our newly transformed image will look like \r\n\r\n        1     2    3    4    5\r\n     1 1000 1000 1000 1000 1000\r\n     2 1000 1000 1000 1000 1000\r\n     3 1000 1000  225 1000 1000\r\n     4 1000 1000 1000 1000 1000\r\n\r\nTo get the full subtract blend, do this for every pixel. \r\n\r\nEDIT: actually I think the above might be a Gaussian blur.","title":"Subtract Blend Mode using ColorMatrixFilter in Android?","body":"<p>I'm not an expert in computer graphics but I'm assuming you want to iterate through every pixel of the image you want to blend, center your <code>colorMatrix</code> on each pixel, calculate the average using the surrounding pixels your matrix comes into contact with, then apply this average to your pixel. Obviously you will somehow need to handle the edge pixels.</p>\n\n<p>Example: Suppose you have a 5x4 image with pixel values likes so</p>\n\n<pre><code>    1     2    3    4    5\n 1 1000 1000 1000 1000 1000\n 2 1000 1000 1000 1000 1000\n 3 1000 1000 1000 1000 1000\n 4 1000 1000 1000 1000 1000\n</code></pre>\n\n<p>(1) Taking the pixel at position <code>(3,3)</code> and applying your transformation matrix - i.e multiplying image pixel <code>(i,j)</code> with matrix position <code>(i,j)</code> - we get</p>\n\n<pre><code>     1     2    3    4    5\n 1  393  769  189    0    0\n 2  349  686  168    0    0\n 3  272  534  131    0    0\n 4    0    0    0 1000    0\n</code></pre>\n\n<p>(2) Now taking the average of this transformation - i.e add all the numbers and divide by 20 - we get 224.5 or approximately 225. So our newly transformed image will look like </p>\n\n<pre><code>    1     2    3    4    5\n 1 1000 1000 1000 1000 1000\n 2 1000 1000 1000 1000 1000\n 3 1000 1000  225 1000 1000\n 4 1000 1000 1000 1000 1000\n</code></pre>\n\n<p>To get the full subtract blend, do this for every pixel. </p>\n\n<p>EDIT: actually I think the above might be a Gaussian blur.</p>\n"},{"tags":[],"owner":{"account_id":7487496,"reputation":8511,"user_id":5690248,"accept_rate":100,"display_name":"The Dreams Wind"},"down_vote_count":0,"up_vote_count":20,"is_accepted":false,"score":20,"last_activity_date":1679505074,"creation_date":1544560898,"answer_id":53732051,"question_id":33358030,"body_markdown":"# Long story short\r\n\r\nThere is no subtract color blending out of the box in the Android SDK, however you still can make it work with use of OpenGL rendering API. [Here][1] you can find the implementation of such a solution, incapsulated in the `BlendingFilterUtil` class, which can be used like this:\r\n```lang-java\r\nBlendingFilterUtil.subtractMatrixColorFilter(bitmap, new float[]{\r\n    0.393f, 0.7689999f, 0.18899999f, 0, 0,\r\n    0.349f, 0.6859999f, 0.16799999f, 0, 0,\r\n    0.272f, 0.5339999f, 0.13099999f, 0, 0,\r\n    0,      0,          0,           1, 0\r\n}, activity, callback);\r\n```\r\n---\r\n# Theory\r\nFirst of all &quot;using a color filter for Subtract-Blend mode&quot; is a very vague requirement. In order to understand the problem better, let&#39;s define two distinct set of features: **color blending** and **color filtering** in Android.\r\n\r\n## Color blending\r\nColor blending is quite a known thing among designers and people working with computer graphics. It commonly means blending two colors using their channel values (known as Red, Green, Blue and Alpha) and a blending function. The blending functions are referred to as Blend Modes and one of this modes is called **Subtract**. The Subtract Blend mode uses the following formula to get its final color:\r\n\r\n[![Subtract blend mode][2]][2]\r\n\r\nWhere *Cout* is the resulting color, *Cdst* is the &quot;current&quot; color and *Csrc* is a color value used to change original color. If for any channel the difference is negative, 0 value is used instead. Roughly speaking, with this mode you can make the destination color darker than the original color, since the channels get closer to zero as a result of the function. [Here][3] you can find a very illustrative example of this mode in action:\r\n\r\n**Destination**\r\n\r\n[![Destination][4]][4]\r\n\r\n**Source**\r\n\r\n[![Source][5]][5]\r\n\r\n**Color Blending Output**\r\n\r\n[![Output][6]][6]\r\n\r\n## Color filtering\r\nIn context of the Android SDK, color filtering is a super-set of operations, which has color blending functions included. [The reference of `ColorFilter` subclasses][7] gives comprehensive information on available color filtering options in the SDK: \r\n\r\n - [`PorterDuffColorFilter`][8] is essentially the Blend Modes discussed above;\r\n - [`LightingColorFilter`][9] takes two arguments, one of which is used as a factor and another as an addition for Red, Green and Blue channels. Alpha channel remains untouched. So you can make some image look brighter (or darker, if factor is between 0 and 1, or addition is negative).\r\n - [`ColorMatrixColorFilter`][10] takes an instance of [`ColorMatrix`][11] and use it to calculate the final color as follows:\r\n&gt; 4x5 matrix for transforming the color and alpha components of a\r\n&gt; Bitmap. The matrix can be passed as single array, and is treated as\r\n&gt; follows:\r\n&gt; &lt;pre&gt;&lt;code&gt;[ a, b, c, d, e,\r\n&gt;   f, g, h, i, j,\r\n&gt;   k, l, m, n, o,\r\n&gt;   p, q, r, s, t ]&lt;/code&gt;&lt;/pre&gt;\r\n&gt; \r\n&gt; When applied to a color [R, G, B, A], the resulting color is computed as:\r\n&gt; \r\n&gt; &lt;pre&gt;&lt;code&gt;R’ = a*R + b*G + c*B + d*A + e;\r\n&gt; G’ = f*R + g*G + h*B + i*A + j; \r\n&gt; B’ = k*R + l*G + m*B + n*A + o;\r\n&gt; A’ = p*R + q*G + r*B + s*A + t;&lt;/code&gt;&lt;/pre&gt;\r\n\r\n\r\n\r\n## Defining the problem\r\nNow we know that the only filtering operation in Android SDK that takes a `ColorMatrix` is `ColorMatrixColorFilter`. However it has nothing to do with color blending as color blending is a result of mixing two colors, while `ColorMatrixColorFilter` just modifies the input color. Here is how one of the sample images filtered with use of matrix from the question looks like:\r\n[![Filtered Image][12]][12]\r\n\r\nThe only way of mixing these two concepts I can think of is by using the result of `ColorMatrixColorFilter` as an argument to the subtract blending function (*Csrc*), so we end up with the following formula to implement:\r\n\r\n[![Subtract filter formula][13]][13]\r\n\r\n## Implementation approach\r\nThe task is not supposed to be something fancy: we could use a `ColorMatrixColorFilter` and then use subsequent `PorterDuffColorFilter` with subtract mode, using filtered result as the source color. However, If you take a closer look at [`PorterDuff.Mode`][14] reference, you will notice that **Android does not have the Subtract Blend Mode** in its facilities, (Android OS uses [Google&#39;s Skia][15] library underneath for canvas drawing and for some reason it really [lacks Subtract mode][16]) so we will have to do our subtraction another way.\r\nSuch a thing is *comparatively* simple in Open GL rendering API, but it will requires us to deal with challenges of setting up the Open GL context so it allows us to draw what we need the way we need it.\r\n\r\n---\r\n# Solution\r\nAndroid already has [`GLSurfaceView`][17], that sets up Open GL context under the hood, but it has to be in the view hierarchy in order to actually perform any rendering operation. My plan is to instantiate a `GLSurfaceView`, attach it the application window, give it an image that we want to apply our effects to and perform all the fancy stuff behind the scenes. After that we can take the resulting image and the view can be silently removed.\r\n\r\n## Adding `GLSurfaceView`\r\nFirst, instantiate a `GLSurfaceView`, set OpenGL API version and context configuration:\r\n```lang-java\r\nGLSurfaceView hostView = new GLSurfaceView(activityContext);\r\nhostView.setEGLContextClientVersion(2);\r\nhostView.setEGLConfigChooser(8, 8, 8, 8, 0, 0);\r\n```\r\n\r\nNow the view has to be added into the view hierarchy:\r\n```lang-java\r\n// View should be of bitmap size\r\nfinal WindowManager.LayoutParams layoutParams = new WindowManager.LayoutParams(width, height, TYPE_APPLICATION, 0, PixelFormat.OPAQUE);\r\nview.setLayoutParams(layoutParams);\r\nfinal WindowManager windowManager = (WindowManager) view.getContext().getSystemService(Context.WINDOW_SERVICE);\r\nObjects.requireNonNull(windowManager).addView(view, layoutParams);\r\n```\r\nI just put it into the root window in order to make it available from any activity in the appllication. The `width` and `height` params of the layout should match `width` and `height` of the `Bitmap`, so the resulting image doesn&#39;t end up with a different size.\r\n\r\n## Adding Renderer\r\n`GLSurfaceView` draws nothing itself. This work is to be done by a [`Renderer`][18]. Here how the initial implementation of the interface for the given problem looks like:\r\n```lang-java\r\nclass BlendingFilterRenderer implements GLSurfaceView.Renderer {\r\n    private final Bitmap mBitmap;\r\n    private final WeakReference&lt;GLSurfaceView&gt; mHostViewReference;\r\n    private final float[] mColorFilter;\r\n    private final BlendingFilterUtil.Callback mCallback;\r\n    private boolean mFinished = false;\r\n\r\n    BlendingFilterRenderer(@NonNull GLSurfaceView hostView, @NonNull Bitmap bitmap,\r\n                            @NonNull float[] colorFilter,\r\n                            @NonNull BlendingFilterUtil.Callback callback) throws IllegalArgumentException {\r\n        if (colorFilter.length != 4 * 5) {\r\n            throw new IllegalArgumentException(&quot;Color filter should be a 4 x 5 matrix&quot;);\r\n        }\r\n        mBitmap = bitmap;\r\n        mHostViewReference = new WeakReference&lt;&gt;(hostView);\r\n        mColorFilter = colorFilter;\r\n        mCallback = callback;\r\n    }\r\n\r\n    // ========================================== //\r\n    // GLSurfaceView.Renderer\r\n    // ========================================== //\r\n\r\n    @Override\r\n    public void onSurfaceCreated(GL10 gl, EGLConfig config) {}\r\n\r\n    @Override\r\n    public void onSurfaceChanged(GL10 gl, int width, int height) {}\r\n\r\n    @Override\r\n    public void onDrawFrame(GL10 gl) {}\r\n}\r\n```\r\n- `mBitmap` - since rendering operations happen in a separate thred, the renderer has retain the [`Bitmap`][19] argument until the OpenGL context is ready.\r\n- `mHostViewReference` - a weak reference to the view object will be needed in order to remove it from the window when the work is done.\r\n- `mColorFilter` - `ColorMatrix` object is not really required in this implementation, thus I use plain `float[]` java array to represent the color matrix.\r\n- `mCallback` - The result will be delivered via a callback, which a defined as follows:\r\n```lang-java\r\ninterface Callback {\r\n    void onSuccess(@NonNull Bitmap blendedImage);\r\n    void onFailure(@Nullable Exception error);\r\n}\r\n```\r\n- `mFinished` - I&#39;m not sure why exactly, but while playing with the `Renderer` object, I found that it performs redundant cycles of the rendering. This prevents the program from doing anything when it&#39;s no longer needed. I also recommend set rendering mode of the `GLSurfaceView` object to [`RENDERMODE_WHEN_DIRTY`][20] to prevent a 60-times-per-second drawing:\r\n```lang-java\r\nhostView.setRenderer(new BlendingFilterRenderer(hostView, image, filterValues, callback));\r\nhostView.setRenderMode(GLSurfaceView.RENDERMODE_WHEN_DIRTY);\r\n```\r\n\r\n## Drawing meshes\r\nIn order to draw a texel OpenGL first needs some surface to work on. For both drawing the image and building the canvas (the surface to drawn on), we have to introduce a couple of shader programs (Vertex and Fragment shaders in terms of OpenGL). The shaders are compiled and loaded via calls to OpenGL API, and first we need to define a method that takes the shader source code, compiles it and checks that it was done without errors (inside of the `BlendingFilterRenderer` class):\r\n```lang-java\r\nprivate int loadShader(int type, String shaderCode) throws GLException {\r\n    int reference = GLES20.glCreateShader(type);\r\n    GLES20.glShaderSource(reference, shaderCode);\r\n    GLES20.glCompileShader(reference);\r\n    int[] compileStatus = new int[1];\r\n    GLES20.glGetShaderiv(reference, GLES20.GL_COMPILE_STATUS, compileStatus, 0);\r\n    if (compileStatus[0] != GLES20.GL_TRUE) {\r\n        GLES20.glDeleteShader(reference);\r\n        final String message = GLES20.glGetShaderInfoLog(reference);\r\n        throw new GLException(compileStatus[0], message);\r\n    }\r\n\r\n    return reference;\r\n}\r\n```\r\n\r\nThe first parameter of the method defines the shader type (Vertex or Fragment), the second one contains the actual shader code as a `String`. Let&#39;s start with very minimalistic Vertex shader which just takes a vertex coordinates (given as a normalized 2-dimensional vector) and inject them into the `gl_Position` variable (essentially the resulting value of the shader):\r\n```lang-c\r\nattribute vec2 aPosition;\r\nvoid main() {\r\n    gl_Position = vec4(aPosition.x, aPosition.y, 0.0, 1.0);\r\n}\r\n```\r\n\r\nThe Fragment shader implementation just outputs a white color without any changes for now:\r\n```lang-c\r\nprecision mediump float;\r\nvoid main() {\r\n    gl_FragColor = vec4(1.0, 1.0, 1.0, 1.0);\r\n}\r\n```\r\nOpenGL ES 2 requires us to specify float precision explicitly, otherwise this program wont compile. This shader also writes to global variable `gl_FragColor`, that defines the output color.\r\n\r\nWith help of previously defined `loadShader` method and the shaders source code, we can now define another method in the `BlendingFilterRenderer` class, which compiles and link both shaders into a program:\r\n```lang-java\r\nprivate int loadProgram() {\r\n    int fragmentShader = loadShader(GLES20.GL_FRAGMENT_SHADER, &quot;precision mediump float;&quot; +\r\n            &quot;void main() {&quot; +\r\n            &quot;  gl_FragColor = vec4(1.0, 1.0, 1.0, 1.0);&quot; +\r\n            &quot;}&quot;);\r\n    int vertexShader = loadShader(GLES20.GL_VERTEX_SHADER, &quot;attribute vec2 aPosition;&quot; +\r\n            &quot;void main() {&quot; +\r\n            &quot;  gl_Position = vec4(aPosition.x, aPosition.y, 0.0, 1.0);&quot; +\r\n            &quot;}&quot;);\r\n    int programReference = GLES20.glCreateProgram();\r\n    GLES20.glAttachShader(programReference, vertexShader);\r\n    GLES20.glAttachShader(programReference, fragmentShader);\r\n    GLES20.glLinkProgram(programReference);\r\n    return programReference;\r\n}\r\n```\r\nNow, when the program is ready, we can pass it some arguments. First, define a method in the `BlendingFilterRenderer` class that enables the attributes in the shaders:\r\n```lang-java\r\nprivate void enableVertexAttribute(int program, String attributeName, int size, int stride, int offset) {\r\n    final int attributeLocation = GLES20.glGetAttribLocation(program, attributeName);\r\n    GLES20.glVertexAttribPointer(attributeLocation, size, GLES20.GL_FLOAT, false, stride, offset);\r\n    GLES20.glEnableVertexAttribArray(attributeLocation);\r\n}\r\n```\r\nIn order to built a canvas the whole view port needs to be filled. It can be done with merely 4 vertices in the normalized device coordinate system (NDCS):\r\n```lang-java\r\nnew float[] {\r\n    -1, 1,\r\n    -1, -1,\r\n    1,  1,\r\n    1,  -1,\r\n}\r\n```\r\n\r\nThis array has to be loaded into a OpenGL&#39;s array buffer in order to become accessible to the shaders:\r\n```lang-java\r\nprivate FloatBuffer convertToBuffer(float[] array) {\r\n    final ByteBuffer buffer = ByteBuffer.allocateDirect(array.length * PrimitiveSizes.FLOAT);\r\n    FloatBuffer output = buffer.order(ByteOrder.nativeOrder()).asFloatBuffer();\r\n    output.put(array);\r\n    output.position(0);\r\n    return output;\r\n}\r\n\r\nprivate void initVertices(int programReference) {\r\n    final float[] verticesData = new float[] {\r\n            -1, 1,\r\n            -1, -1,\r\n            1,  1,\r\n            1,  -1,\r\n    }\r\n    int buffers[] = new int[1];\r\n    GLES20.glGenBuffers(1, buffers, 0);\r\n    GLES20.glBindBuffer(GLES20.GL_ARRAY_BUFFER, buffers[0]);\r\n    GLES20.glBufferData(GLES20.GL_ARRAY_BUFFER, verticesData.length * 4, convertToBuffer(verticesData), GLES20.GL_STREAM_DRAW);\r\n    enableVertexAttribute(programReference, &quot;aPosition&quot;, 2, 0, 0);\r\n}\r\n```\r\n\r\nThe only thing left is to put everything together in the `Renderer` interface functions (which will be automatically called by the owning `GLSurfaceView` object):\r\n```lang-java\r\n@Override\r\npublic void onSurfaceCreated(GL10 gl, EGLConfig config) {}\r\n\r\n@Override\r\npublic void onSurfaceChanged(GL10 gl, int width, int height) {\r\n    GLES20.glViewport(0, 0, width, height);\r\n    final int program = loadProgram();\r\n    GLES20.glUseProgram(program);\r\n    initVertices(program);\r\n}\r\n\r\n@Override\r\npublic void onDrawFrame(GL10 gl) {\r\n    GLES20.glClear(GLES20.GL_COLOR_BUFFER_BIT);\r\n    GLES20.glDrawArrays(GLES20.GL_TRIANGLE_STRIP, 0, 4);\r\n}\r\n```\r\nAt this point this class should compile and be able to draw a white rectangle inside of the given view. \r\n\r\n## Draw the bitmap\r\nThe next step is to draw an actual image on the surface we prepared. In order to do that the vertex shader should take texture coordinates in addition to vertex coordinates:\r\n\r\n&lt;pre&gt;&lt;code&gt;attribute vec2 aPosition;\r\n&lt;b&gt;attribute vec2 aTextureCoord;\r\nvarying vec2 vTextureCoord;&lt;/b&gt;\r\nvoid main() {\r\n  gl_Position = vec4(aPosition.x, aPosition.y, 0.0, 1.0);\r\n  &lt;b&gt;vTextureCoord = aTextureCoord;&lt;/b&gt;\r\n}&lt;/code&gt;&lt;/pre&gt;\r\n\r\nIn turn, the fragment shader now takes the interpolated texture color and apply it to the output value.\r\n\r\n&lt;pre&gt;&lt;code&gt;precision mediump float;\r\n&lt;b&gt;uniform sampler2D uSampler;\r\nvarying vec2 vTextureCoord;&lt;/b&gt;\r\nvoid main() {\r\n  &lt;b&gt;gl_FragColor = texture2D(uSampler, vTextureCoord);&lt;/b&gt;\r\n}&lt;/code&gt;&lt;/pre&gt;\r\n\r\nTexture coordinates vary from 0.0 to 1.0 for x and y, with the beginning (0.0, 0.0) at the bottom left corner. Change you `initVertices` to look as follow:\r\n\r\n&lt;pre&gt;&lt;code&gt;private void initVertices(int programReference) {\r\n    final float[] verticesData = new float[] {\r\n           &lt;b&gt;//NDCS coords   //Texture coords\r\n            -1, 1,          0, 1,\r\n            -1, -1,         0, 0,\r\n            1,  1,          1, 1,\r\n            1,  -1,         1, 0&lt;/b&gt;\r\n    }\r\n    int buffers[] = new int[1];\r\n    GLES20.glGenBuffers(1, buffers, 0);\r\n    GLES20.glBindBuffer(GLES20.GL_ARRAY_BUFFER, buffers[0]);\r\n    GLES20.glBufferData(GLES20.GL_ARRAY_BUFFER, verticesData.length * 4, convertToBuffer(verticesData), GLES20.GL_STREAM_DRAW);\r\n    &lt;b&gt;final int stride = 4 * 4;\r\n    enableVertexAttribute(programReference, &quot;aPosition&quot;, 2, stride, 0);\r\n    enableVertexAttribute(programReference, &quot;aTextureCoord&quot;, 2, stride, 2 * 4);&lt;/b&gt;\r\n}&lt;/code&gt;&lt;/pre&gt;\r\n\r\nThe next method below `attachTexture` passes the source image to the texture sampler of the fragment shader `uSampler`:\r\n```lang-java\r\nprivate void attachTexture(int programReference) {\r\n    final int[] textures = new int[1];\r\n    GLES20.glGenTextures(1, textures, 0);\r\n    final int textureId = textures[0];\r\n    GLES20.glBindTexture(GLES20.GL_TEXTURE_2D, textureId);\r\n    GLES20.glPixelStorei(GLES20.GL_UNPACK_ALIGNMENT, 1);\r\n    GLES20.glTexParameterf(GLES20.GL_TEXTURE_2D, GLES20.GL_TEXTURE_MIN_FILTER, GLES20.GL_NEAREST);\r\n    GLES20.glTexParameterf(GLES20.GL_TEXTURE_2D, GLES20.GL_TEXTURE_MAG_FILTER, GLES20.GL_NEAREST);\r\n    GLES20.glTexParameteri(GLES20.GL_TEXTURE_2D, GLES20.GL_TEXTURE_WRAP_S, GLES20.GL_REPEAT);\r\n    GLES20.glTexParameteri(GLES20.GL_TEXTURE_2D, GLES20.GL_TEXTURE_WRAP_T, GLES20.GL_REPEAT);\r\n    GLUtils.texImage2D(GLES20.GL_TEXTURE_2D, 0, mBitmap, 0);\r\n    GLES20.glActiveTexture(GLES20.GL_TEXTURE0);\r\n    GLES20.glBindTexture(GLES20.GL_TEXTURE_2D, textureId);\r\n    final int samplerLocation = GLES20.glGetUniformLocation(programReference, &quot;uSampler&quot;);\r\n    GLES20.glUniform1i(samplerLocation, 0);\r\n}\r\n```\r\n\r\nThe method has to be called from `onSurfaceChanged` method:\r\n&lt;pre&gt;&lt;code&gt;@Override\r\npublic void onSurfaceChanged(GL10 gl, int width, int height) {\r\n    GLES20.glViewport(0, 0, width, height);\r\n    final int program = loadProgram();\r\n    GLES20.glUseProgram(program);\r\n    initVertices(program);\r\n    &lt;b&gt;attachTexture(program);&lt;/b&gt;\r\n}&lt;/code&gt;&lt;/pre&gt;\r\n\r\n## Apply color filter\r\nNow we are all set to apply the color filter. The color filter is a 4x5 matrix, however OpenGL ES 2 has only matrices up to 4x4 dimension, thus we have to define a new structure, that can fit our color filter in form of a 4x4 matrix and a vector of 4 elements:\r\n&lt;pre&gt;&lt;code&gt;precision mediump float;\r\n&lt;b&gt;struct ColorFilter {\r\n  mat4 factor;\r\n  vec4 shift;\r\n};&lt;/b&gt;\r\nuniform sampler2D uSampler;\r\n&lt;b&gt;uniform ColorFilter uColorFilter;&lt;/b&gt;\r\nvarying vec2 vTextureCoord;\r\nvoid main() {\r\n  &lt;b&gt;vec4 originalColor = texture2D(uSampler, vTextureCoord);\r\n  vec4 filteredColor = (originalColor * uColorFilter.factor) + uColorFilter.shift;\r\n  gl_FragColor = originalColor - filteredColor;&lt;/b&gt;\r\n}&lt;/code&gt;&lt;/pre&gt;\r\n\r\n`attachColorFilter` method will help us to pass the filter matrix to the shader:\r\n```lang-java\r\nprivate void attachColorFilter(int program) {\r\n    final float[] colorFilterFactor = new float[4 * 4];\r\n    final float[] colorFilterShift = new float[4];\r\n    for (int i = 0; i &lt; mColorFilter.length; i++) {\r\n        final float value = mColorFilter[i];\r\n        final int calculateIndex = i + 1;\r\n        if (calculateIndex % 5 == 0) {\r\n            colorFilterShift[calculateIndex / 5 - 1] = value / 255;\r\n        } else {\r\n            colorFilterFactor[i - calculateIndex / 5] = value;\r\n        }\r\n    }\r\n    final int colorFactorLocation = GLES20.glGetUniformLocation(program, &quot;uColorFilter.factor&quot;);\r\n    GLES20.glUniformMatrix4fv(colorFactorLocation, 1, false, colorFilterFactor, 0);\r\n    final int colorShiftLocation = GLES20.glGetUniformLocation(program, &quot;uColorFilter.shift&quot;);\r\n    GLES20.glUniform4fv(colorShiftLocation, 1, colorFilterShift, 0);\r\n}\r\n```\r\nYou also need to call this method in `onSurfaceChanged` method:\r\n&lt;pre&gt;&lt;code&gt;@Override\r\npublic void onSurfaceChanged(GL10 gl, int width, int height) {\r\n    GLES20.glViewport(0, 0, width, height);\r\n    final int program = loadProgram();\r\n    GLES20.glUseProgram(program);\r\n    initVertices(program);\r\n    attachTexture(program);\r\n    &lt;b&gt;attachColorFilter(program);&lt;/b&gt;\r\n}&lt;/code&gt;&lt;/pre&gt;\r\n\r\n## Alpha channel blending\r\nOur OpenGL context has alpha channel buffer enabled (it was configured via `hostView.setEGLConfigChooser(8, 8, 8, 8, 0, 0);`) otherwise we would always get some background for the output image (that is not correct, taking into account that png images tend to have different alpha channels for some pixels). This however breaks blending of alpha channels of background surface and the texture. That is not a big deal to implement it ourselves, however:\r\n\r\n&lt;pre&gt;&lt;code&gt;precision mediump float;\r\nstruct ColorFilter {\r\n  mat4 factor;\r\n  vec4 shift;\r\n};\r\nuniform sampler2D uSampler;\r\nuniform ColorFilter uColorFilter;\r\nvarying vec2 vTextureCoord;\r\nvoid main() {\r\n  vec4 originalColor = texture2D(uSampler, vTextureCoord);\r\n  &lt;b&gt;originalColor.rgb *= originalColor.a;&lt;/b&gt;\r\n  vec4 filteredColor = (originalColor * uColorFilter.factor) + uColorFilter.shift;\r\n  &lt;b&gt;filteredColor.rgb *= filteredColor.a;\r\n  gl_FragColor = vec4(originalColor.rgb - filteredColor.rgb, originalColor.a);&lt;/b&gt;\r\n}&lt;/code&gt;&lt;/pre&gt;\r\n\r\nI also recommend to set the blend function to the following, so our output is not any affected by whatever is currently in the color buffer and behavior is closer to the Android&#39;s [`ImageView`][21]. However we didn&#39;t set color for clear color and it doesn&#39;t seem to change anything:\r\n```lang-java\r\n@Override\r\npublic void onSurfaceCreated(GL10 gl, EGLConfig config) {\r\n    GLES20.glEnable(GLES20.GL_BLEND);\r\n    GLES20.glBlendFunc(GLES20.GL_ONE, GLES20.GL_ZERO);\r\n}\r\n```\r\n\r\n## Post the result\r\nThe work is pretty much done at this point, the implementation only needs to return the result to the callback. First let&#39;s get bitmap from the `GLSurfaceView`, there is one brilliant solution that I borrowed from [another stackoverflow answer][22]:\r\n```lang-java\r\nprivate Bitmap retrieveBitmapFromGl(int width, int height) {\r\n    final ByteBuffer pixelBuffer = ByteBuffer.allocateDirect(width * height * PrimitiveSizes.FLOAT);\r\n    pixelBuffer.order(ByteOrder.LITTLE_ENDIAN);\r\n    GLES20.glReadPixels(0,0, width, height, GLES20.GL_RGBA, GLES20.GL_UNSIGNED_BYTE, pixelBuffer);\r\n    final Bitmap image = Bitmap.createBitmap(width, height, Bitmap.Config.ARGB_8888);\r\n    image.copyPixelsFromBuffer(pixelBuffer);\r\n    return image;\r\n}\r\n```\r\nNow just take the bitmap, check for errors and return the result:\r\n```lang-java\r\nprivate GLException getGlError() {\r\n    int errorValue = GLES20.glGetError();\r\n    switch (errorValue) {\r\n        case GLES20.GL_NO_ERROR:\r\n            return null;\r\n        default:\r\n            return new GLException(errorValue);\r\n    }\r\n}\r\n\r\nprivate void postResult() {\r\n    if (mFinished) {\r\n        return;\r\n    }\r\n    final GLSurfaceView hostView = mHostViewReference.get();\r\n    if (hostView == null) {\r\n        return;\r\n    }\r\n    GLException glError = getGlError();\r\n    if (glError != null) {\r\n        hostView.post(() -&gt; {\r\n            mCallback.onFailure(glError);\r\n            removeHostView(hostView);\r\n        });\r\n    } else {\r\n        final Bitmap result = retrieveBitmapFromGl(mBitmap.getWidth(), mBitmap.getHeight());\r\n        hostView.post(() -&gt; {\r\n            mCallback.onSuccess(result);\r\n            removeHostView(hostView);\r\n        });\r\n    }\r\n    mFinished = true;\r\n}\r\n\r\nprivate void removeHostView(@NonNull GLSurfaceView hostView) {\r\n    if (hostView.getParent() == null) {\r\n        return;\r\n    }\r\n    final WindowManager windowManager = (WindowManager) hostView.getContext().getSystemService(Context.WINDOW_SERVICE);\r\n    Objects.requireNonNull(windowManager).removeView(hostView);\r\n}\r\n```\r\nThe method needs to be called from `onDrawFrame` method:\r\n&lt;pre&gt;&lt;code&gt;@Override\r\npublic void onDrawFrame(GL10 gl) {\r\n    GLES20.glClear(GLES20.GL_COLOR_BUFFER_BIT);\r\n    GLES20.glDrawArrays(GLES20.GL_TRIANGLE_STRIP, 0, 4);\r\n    &lt;b&gt;postResult();&lt;/b&gt;\r\n}&lt;/code&gt;&lt;/pre&gt;\r\n\r\n---\r\n# Result\r\nLet&#39;s play around with the utility we just made. The all-zero filter should not affect the original image at all:\r\n\r\n### Code\r\n```lang-java\r\nBlendingFilterUtil.subtractMatrixColorFilter(bitmap, new float[]{\r\n    0,      0,      0,      0,      0,\r\n    0,      0,      0,      0,      0,\r\n    0,      0,      0,      0,      0,\r\n    0,      0,      0,      0,      0\r\n}, activity, callback);\r\n```\r\n### Output\r\n[![Original image][23]][23]\r\n\r\nThe original image is on the left and the blended image is on the right. They are the same, as expected. You can also remove specific channels completely with this approach. E.g. here how red and green channels could be removed:\r\n\r\n### Code\r\n```lang-java\r\nBlendingFilterUtil.subtractMatrixColorFilter(bitmap, new float[]{\r\n    1,      0,      0,      0,      0,\r\n    0,      1,      0,      0,      0,\r\n    0,      0,      0,      0,      0,\r\n    0,      0,      0,      1,      0\r\n}, activity, callback);\r\n```\r\n\r\n### Output\r\n[![Blue image][24]][24]\r\n\r\nFinally, here is the result for the filter given in the question:\r\n### Code\r\n```lang-java\r\nBlendingFilterUtil.subtractMatrixColorFilter(bitmap, new float[]{\r\n    0.393f, 0.7689999f, 0.18899999f, 0, 0,\r\n    0.349f, 0.6859999f, 0.16799999f, 0, 0,\r\n    0.272f, 0.5339999f, 0.13099999f, 0, 0,\r\n    0,      0,          0,           1, 0\r\n}, activity, callback);\r\n```\r\n### Output\r\n[![Subtracted fiter image][25]][25]\r\n\r\n## Source code\r\n\r\nIf you struggle at any step, don&#39;t hesitate to refer to [the gist][1] with the complete code of the utility.\r\n\r\n\r\n  [1]: https://gist.github.com/TheDreamsWind/5049f1db908580b594f642f3f73836b5\r\n  [2]: https://i.stack.imgur.com/2HRte.png\r\n  [3]: https://www.rippletraining.com/articles/free-final-cut-pro-video-tutorials/2017/06/20/understanding-blend-modes-final-cut-pro/\r\n  [4]: https://i.stack.imgur.com/k6zYI.png\r\n  [5]: https://i.stack.imgur.com/yeWqf.png\r\n  [6]: https://i.stack.imgur.com/rNBrR.png\r\n  [7]: https://developer.android.com/reference/android/graphics/ColorFilter\r\n  [8]: https://developer.android.com/reference/android/graphics/PorterDuffColorFilter\r\n  [9]: https://developer.android.com/reference/android/graphics/LightingColorFilter\r\n  [10]: https://developer.android.com/reference/android/graphics/ColorMatrixColorFilter\r\n  [11]: https://developer.android.com/reference/android/graphics/ColorMatrix\r\n  [12]: https://i.stack.imgur.com/YEz91.png\r\n  [13]: https://i.stack.imgur.com/2uslw.png\r\n  [14]: https://developer.android.com/reference/android/graphics/PorterDuff.Mode\r\n  [15]: https://skia.org/\r\n  [16]: http://androidxref.com/5.0.0_r2/xref/external/skia/src/core/SkXfermode.cpp\r\n  [17]: https://developer.android.com/reference/android/opengl/GLSurfaceView\r\n  [18]: https://developer.android.com/reference/android/opengl/GLSurfaceView.Renderer\r\n  [19]: https://developer.android.com/reference/android/graphics/Bitmap\r\n  [20]: https://developer.android.com/reference/android/opengl/GLSurfaceView.html#RENDERMODE_WHEN_DIRTY\r\n  [21]: https://developer.android.com/reference/android/widget/ImageView\r\n  [22]: https://stackoverflow.com/a/21739723/5690248\r\n  [23]: https://i.stack.imgur.com/PnBQc.png\r\n  [24]: https://i.stack.imgur.com/NIQPc.png\r\n  [25]: https://i.stack.imgur.com/nNVAA.png","title":"Subtract Blend Mode using ColorMatrixFilter in Android?","body":"<h1>Long story short</h1>\n<p>There is no subtract color blending out of the box in the Android SDK, however you still can make it work with use of OpenGL rendering API. <a href=\"https://gist.github.com/TheDreamsWind/5049f1db908580b594f642f3f73836b5\" rel=\"nofollow noreferrer\">Here</a> you can find the implementation of such a solution, incapsulated in the <code>BlendingFilterUtil</code> class, which can be used like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>BlendingFilterUtil.subtractMatrixColorFilter(bitmap, new float[]{\n    0.393f, 0.7689999f, 0.18899999f, 0, 0,\n    0.349f, 0.6859999f, 0.16799999f, 0, 0,\n    0.272f, 0.5339999f, 0.13099999f, 0, 0,\n    0,      0,          0,           1, 0\n}, activity, callback);\n</code></pre>\n<hr />\n<h1>Theory</h1>\n<p>First of all &quot;using a color filter for Subtract-Blend mode&quot; is a very vague requirement. In order to understand the problem better, let's define two distinct set of features: <strong>color blending</strong> and <strong>color filtering</strong> in Android.</p>\n<h2>Color blending</h2>\n<p>Color blending is quite a known thing among designers and people working with computer graphics. It commonly means blending two colors using their channel values (known as Red, Green, Blue and Alpha) and a blending function. The blending functions are referred to as Blend Modes and one of this modes is called <strong>Subtract</strong>. The Subtract Blend mode uses the following formula to get its final color:</p>\n<p><a href=\"https://i.stack.imgur.com/2HRte.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/2HRte.png\" alt=\"Subtract blend mode\" /></a></p>\n<p>Where <em>Cout</em> is the resulting color, <em>Cdst</em> is the &quot;current&quot; color and <em>Csrc</em> is a color value used to change original color. If for any channel the difference is negative, 0 value is used instead. Roughly speaking, with this mode you can make the destination color darker than the original color, since the channels get closer to zero as a result of the function. <a href=\"https://www.rippletraining.com/articles/free-final-cut-pro-video-tutorials/2017/06/20/understanding-blend-modes-final-cut-pro/\" rel=\"nofollow noreferrer\">Here</a> you can find a very illustrative example of this mode in action:</p>\n<p><strong>Destination</strong></p>\n<p><a href=\"https://i.stack.imgur.com/k6zYI.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/k6zYI.png\" alt=\"Destination\" /></a></p>\n<p><strong>Source</strong></p>\n<p><a href=\"https://i.stack.imgur.com/yeWqf.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/yeWqf.png\" alt=\"Source\" /></a></p>\n<p><strong>Color Blending Output</strong></p>\n<p><a href=\"https://i.stack.imgur.com/rNBrR.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/rNBrR.png\" alt=\"Output\" /></a></p>\n<h2>Color filtering</h2>\n<p>In context of the Android SDK, color filtering is a super-set of operations, which has color blending functions included. <a href=\"https://developer.android.com/reference/android/graphics/ColorFilter\" rel=\"nofollow noreferrer\">The reference of <code>ColorFilter</code> subclasses</a> gives comprehensive information on available color filtering options in the SDK:</p>\n<ul>\n<li><a href=\"https://developer.android.com/reference/android/graphics/PorterDuffColorFilter\" rel=\"nofollow noreferrer\"><code>PorterDuffColorFilter</code></a> is essentially the Blend Modes discussed above;</li>\n<li><a href=\"https://developer.android.com/reference/android/graphics/LightingColorFilter\" rel=\"nofollow noreferrer\"><code>LightingColorFilter</code></a> takes two arguments, one of which is used as a factor and another as an addition for Red, Green and Blue channels. Alpha channel remains untouched. So you can make some image look brighter (or darker, if factor is between 0 and 1, or addition is negative).</li>\n<li><a href=\"https://developer.android.com/reference/android/graphics/ColorMatrixColorFilter\" rel=\"nofollow noreferrer\"><code>ColorMatrixColorFilter</code></a> takes an instance of <a href=\"https://developer.android.com/reference/android/graphics/ColorMatrix\" rel=\"nofollow noreferrer\"><code>ColorMatrix</code></a> and use it to calculate the final color as follows:</li>\n</ul>\n<blockquote>\n<p>4x5 matrix for transforming the color and alpha components of a\nBitmap. The matrix can be passed as single array, and is treated as\nfollows:</p>\n<pre><code>[ a, b, c, d, e,\n  f, g, h, i, j,\n  k, l, m, n, o,\n  p, q, r, s, t ]</code></pre>\n<p>When applied to a color [R, G, B, A], the resulting color is computed as:</p>\n<pre><code>R’ = a*R + b*G + c*B + d*A + e;\nG’ = f*R + g*G + h*B + i*A + j; \nB’ = k*R + l*G + m*B + n*A + o;\nA’ = p*R + q*G + r*B + s*A + t;</code></pre>\n</blockquote>\n<h2>Defining the problem</h2>\n<p>Now we know that the only filtering operation in Android SDK that takes a <code>ColorMatrix</code> is <code>ColorMatrixColorFilter</code>. However it has nothing to do with color blending as color blending is a result of mixing two colors, while <code>ColorMatrixColorFilter</code> just modifies the input color. Here is how one of the sample images filtered with use of matrix from the question looks like:\n<a href=\"https://i.stack.imgur.com/YEz91.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/YEz91.png\" alt=\"Filtered Image\" /></a></p>\n<p>The only way of mixing these two concepts I can think of is by using the result of <code>ColorMatrixColorFilter</code> as an argument to the subtract blending function (<em>Csrc</em>), so we end up with the following formula to implement:</p>\n<p><a href=\"https://i.stack.imgur.com/2uslw.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/2uslw.png\" alt=\"Subtract filter formula\" /></a></p>\n<h2>Implementation approach</h2>\n<p>The task is not supposed to be something fancy: we could use a <code>ColorMatrixColorFilter</code> and then use subsequent <code>PorterDuffColorFilter</code> with subtract mode, using filtered result as the source color. However, If you take a closer look at <a href=\"https://developer.android.com/reference/android/graphics/PorterDuff.Mode\" rel=\"nofollow noreferrer\"><code>PorterDuff.Mode</code></a> reference, you will notice that <strong>Android does not have the Subtract Blend Mode</strong> in its facilities, (Android OS uses <a href=\"https://skia.org/\" rel=\"nofollow noreferrer\">Google's Skia</a> library underneath for canvas drawing and for some reason it really <a href=\"http://androidxref.com/5.0.0_r2/xref/external/skia/src/core/SkXfermode.cpp\" rel=\"nofollow noreferrer\">lacks Subtract mode</a>) so we will have to do our subtraction another way.\nSuch a thing is <em>comparatively</em> simple in Open GL rendering API, but it will requires us to deal with challenges of setting up the Open GL context so it allows us to draw what we need the way we need it.</p>\n<hr />\n<h1>Solution</h1>\n<p>Android already has <a href=\"https://developer.android.com/reference/android/opengl/GLSurfaceView\" rel=\"nofollow noreferrer\"><code>GLSurfaceView</code></a>, that sets up Open GL context under the hood, but it has to be in the view hierarchy in order to actually perform any rendering operation. My plan is to instantiate a <code>GLSurfaceView</code>, attach it the application window, give it an image that we want to apply our effects to and perform all the fancy stuff behind the scenes. After that we can take the resulting image and the view can be silently removed.</p>\n<h2>Adding <code>GLSurfaceView</code></h2>\n<p>First, instantiate a <code>GLSurfaceView</code>, set OpenGL API version and context configuration:</p>\n<pre class=\"lang-java prettyprint-override\"><code>GLSurfaceView hostView = new GLSurfaceView(activityContext);\nhostView.setEGLContextClientVersion(2);\nhostView.setEGLConfigChooser(8, 8, 8, 8, 0, 0);\n</code></pre>\n<p>Now the view has to be added into the view hierarchy:</p>\n<pre class=\"lang-java prettyprint-override\"><code>// View should be of bitmap size\nfinal WindowManager.LayoutParams layoutParams = new WindowManager.LayoutParams(width, height, TYPE_APPLICATION, 0, PixelFormat.OPAQUE);\nview.setLayoutParams(layoutParams);\nfinal WindowManager windowManager = (WindowManager) view.getContext().getSystemService(Context.WINDOW_SERVICE);\nObjects.requireNonNull(windowManager).addView(view, layoutParams);\n</code></pre>\n<p>I just put it into the root window in order to make it available from any activity in the appllication. The <code>width</code> and <code>height</code> params of the layout should match <code>width</code> and <code>height</code> of the <code>Bitmap</code>, so the resulting image doesn't end up with a different size.</p>\n<h2>Adding Renderer</h2>\n<p><code>GLSurfaceView</code> draws nothing itself. This work is to be done by a <a href=\"https://developer.android.com/reference/android/opengl/GLSurfaceView.Renderer\" rel=\"nofollow noreferrer\"><code>Renderer</code></a>. Here how the initial implementation of the interface for the given problem looks like:</p>\n<pre class=\"lang-java prettyprint-override\"><code>class BlendingFilterRenderer implements GLSurfaceView.Renderer {\n    private final Bitmap mBitmap;\n    private final WeakReference&lt;GLSurfaceView&gt; mHostViewReference;\n    private final float[] mColorFilter;\n    private final BlendingFilterUtil.Callback mCallback;\n    private boolean mFinished = false;\n\n    BlendingFilterRenderer(@NonNull GLSurfaceView hostView, @NonNull Bitmap bitmap,\n                            @NonNull float[] colorFilter,\n                            @NonNull BlendingFilterUtil.Callback callback) throws IllegalArgumentException {\n        if (colorFilter.length != 4 * 5) {\n            throw new IllegalArgumentException(&quot;Color filter should be a 4 x 5 matrix&quot;);\n        }\n        mBitmap = bitmap;\n        mHostViewReference = new WeakReference&lt;&gt;(hostView);\n        mColorFilter = colorFilter;\n        mCallback = callback;\n    }\n\n    // ========================================== //\n    // GLSurfaceView.Renderer\n    // ========================================== //\n\n    @Override\n    public void onSurfaceCreated(GL10 gl, EGLConfig config) {}\n\n    @Override\n    public void onSurfaceChanged(GL10 gl, int width, int height) {}\n\n    @Override\n    public void onDrawFrame(GL10 gl) {}\n}\n</code></pre>\n<ul>\n<li><code>mBitmap</code> - since rendering operations happen in a separate thred, the renderer has retain the <a href=\"https://developer.android.com/reference/android/graphics/Bitmap\" rel=\"nofollow noreferrer\"><code>Bitmap</code></a> argument until the OpenGL context is ready.</li>\n<li><code>mHostViewReference</code> - a weak reference to the view object will be needed in order to remove it from the window when the work is done.</li>\n<li><code>mColorFilter</code> - <code>ColorMatrix</code> object is not really required in this implementation, thus I use plain <code>float[]</code> java array to represent the color matrix.</li>\n<li><code>mCallback</code> - The result will be delivered via a callback, which a defined as follows:</li>\n</ul>\n<pre class=\"lang-java prettyprint-override\"><code>interface Callback {\n    void onSuccess(@NonNull Bitmap blendedImage);\n    void onFailure(@Nullable Exception error);\n}\n</code></pre>\n<ul>\n<li><code>mFinished</code> - I'm not sure why exactly, but while playing with the <code>Renderer</code> object, I found that it performs redundant cycles of the rendering. This prevents the program from doing anything when it's no longer needed. I also recommend set rendering mode of the <code>GLSurfaceView</code> object to <a href=\"https://developer.android.com/reference/android/opengl/GLSurfaceView.html#RENDERMODE_WHEN_DIRTY\" rel=\"nofollow noreferrer\"><code>RENDERMODE_WHEN_DIRTY</code></a> to prevent a 60-times-per-second drawing:</li>\n</ul>\n<pre class=\"lang-java prettyprint-override\"><code>hostView.setRenderer(new BlendingFilterRenderer(hostView, image, filterValues, callback));\nhostView.setRenderMode(GLSurfaceView.RENDERMODE_WHEN_DIRTY);\n</code></pre>\n<h2>Drawing meshes</h2>\n<p>In order to draw a texel OpenGL first needs some surface to work on. For both drawing the image and building the canvas (the surface to drawn on), we have to introduce a couple of shader programs (Vertex and Fragment shaders in terms of OpenGL). The shaders are compiled and loaded via calls to OpenGL API, and first we need to define a method that takes the shader source code, compiles it and checks that it was done without errors (inside of the <code>BlendingFilterRenderer</code> class):</p>\n<pre class=\"lang-java prettyprint-override\"><code>private int loadShader(int type, String shaderCode) throws GLException {\n    int reference = GLES20.glCreateShader(type);\n    GLES20.glShaderSource(reference, shaderCode);\n    GLES20.glCompileShader(reference);\n    int[] compileStatus = new int[1];\n    GLES20.glGetShaderiv(reference, GLES20.GL_COMPILE_STATUS, compileStatus, 0);\n    if (compileStatus[0] != GLES20.GL_TRUE) {\n        GLES20.glDeleteShader(reference);\n        final String message = GLES20.glGetShaderInfoLog(reference);\n        throw new GLException(compileStatus[0], message);\n    }\n\n    return reference;\n}\n</code></pre>\n<p>The first parameter of the method defines the shader type (Vertex or Fragment), the second one contains the actual shader code as a <code>String</code>. Let's start with very minimalistic Vertex shader which just takes a vertex coordinates (given as a normalized 2-dimensional vector) and inject them into the <code>gl_Position</code> variable (essentially the resulting value of the shader):</p>\n<pre class=\"lang-c prettyprint-override\"><code>attribute vec2 aPosition;\nvoid main() {\n    gl_Position = vec4(aPosition.x, aPosition.y, 0.0, 1.0);\n}\n</code></pre>\n<p>The Fragment shader implementation just outputs a white color without any changes for now:</p>\n<pre class=\"lang-c prettyprint-override\"><code>precision mediump float;\nvoid main() {\n    gl_FragColor = vec4(1.0, 1.0, 1.0, 1.0);\n}\n</code></pre>\n<p>OpenGL ES 2 requires us to specify float precision explicitly, otherwise this program wont compile. This shader also writes to global variable <code>gl_FragColor</code>, that defines the output color.</p>\n<p>With help of previously defined <code>loadShader</code> method and the shaders source code, we can now define another method in the <code>BlendingFilterRenderer</code> class, which compiles and link both shaders into a program:</p>\n<pre class=\"lang-java prettyprint-override\"><code>private int loadProgram() {\n    int fragmentShader = loadShader(GLES20.GL_FRAGMENT_SHADER, &quot;precision mediump float;&quot; +\n            &quot;void main() {&quot; +\n            &quot;  gl_FragColor = vec4(1.0, 1.0, 1.0, 1.0);&quot; +\n            &quot;}&quot;);\n    int vertexShader = loadShader(GLES20.GL_VERTEX_SHADER, &quot;attribute vec2 aPosition;&quot; +\n            &quot;void main() {&quot; +\n            &quot;  gl_Position = vec4(aPosition.x, aPosition.y, 0.0, 1.0);&quot; +\n            &quot;}&quot;);\n    int programReference = GLES20.glCreateProgram();\n    GLES20.glAttachShader(programReference, vertexShader);\n    GLES20.glAttachShader(programReference, fragmentShader);\n    GLES20.glLinkProgram(programReference);\n    return programReference;\n}\n</code></pre>\n<p>Now, when the program is ready, we can pass it some arguments. First, define a method in the <code>BlendingFilterRenderer</code> class that enables the attributes in the shaders:</p>\n<pre class=\"lang-java prettyprint-override\"><code>private void enableVertexAttribute(int program, String attributeName, int size, int stride, int offset) {\n    final int attributeLocation = GLES20.glGetAttribLocation(program, attributeName);\n    GLES20.glVertexAttribPointer(attributeLocation, size, GLES20.GL_FLOAT, false, stride, offset);\n    GLES20.glEnableVertexAttribArray(attributeLocation);\n}\n</code></pre>\n<p>In order to built a canvas the whole view port needs to be filled. It can be done with merely 4 vertices in the normalized device coordinate system (NDCS):</p>\n<pre class=\"lang-java prettyprint-override\"><code>new float[] {\n    -1, 1,\n    -1, -1,\n    1,  1,\n    1,  -1,\n}\n</code></pre>\n<p>This array has to be loaded into a OpenGL's array buffer in order to become accessible to the shaders:</p>\n<pre class=\"lang-java prettyprint-override\"><code>private FloatBuffer convertToBuffer(float[] array) {\n    final ByteBuffer buffer = ByteBuffer.allocateDirect(array.length * PrimitiveSizes.FLOAT);\n    FloatBuffer output = buffer.order(ByteOrder.nativeOrder()).asFloatBuffer();\n    output.put(array);\n    output.position(0);\n    return output;\n}\n\nprivate void initVertices(int programReference) {\n    final float[] verticesData = new float[] {\n            -1, 1,\n            -1, -1,\n            1,  1,\n            1,  -1,\n    }\n    int buffers[] = new int[1];\n    GLES20.glGenBuffers(1, buffers, 0);\n    GLES20.glBindBuffer(GLES20.GL_ARRAY_BUFFER, buffers[0]);\n    GLES20.glBufferData(GLES20.GL_ARRAY_BUFFER, verticesData.length * 4, convertToBuffer(verticesData), GLES20.GL_STREAM_DRAW);\n    enableVertexAttribute(programReference, &quot;aPosition&quot;, 2, 0, 0);\n}\n</code></pre>\n<p>The only thing left is to put everything together in the <code>Renderer</code> interface functions (which will be automatically called by the owning <code>GLSurfaceView</code> object):</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Override\npublic void onSurfaceCreated(GL10 gl, EGLConfig config) {}\n\n@Override\npublic void onSurfaceChanged(GL10 gl, int width, int height) {\n    GLES20.glViewport(0, 0, width, height);\n    final int program = loadProgram();\n    GLES20.glUseProgram(program);\n    initVertices(program);\n}\n\n@Override\npublic void onDrawFrame(GL10 gl) {\n    GLES20.glClear(GLES20.GL_COLOR_BUFFER_BIT);\n    GLES20.glDrawArrays(GLES20.GL_TRIANGLE_STRIP, 0, 4);\n}\n</code></pre>\n<p>At this point this class should compile and be able to draw a white rectangle inside of the given view.</p>\n<h2>Draw the bitmap</h2>\n<p>The next step is to draw an actual image on the surface we prepared. In order to do that the vertex shader should take texture coordinates in addition to vertex coordinates:</p>\n<pre><code>attribute vec2 aPosition;\n<b>attribute vec2 aTextureCoord;\nvarying vec2 vTextureCoord;</b>\nvoid main() {\n  gl_Position = vec4(aPosition.x, aPosition.y, 0.0, 1.0);\n  <b>vTextureCoord = aTextureCoord;</b>\n}</code></pre>\n<p>In turn, the fragment shader now takes the interpolated texture color and apply it to the output value.</p>\n<pre><code>precision mediump float;\n<b>uniform sampler2D uSampler;\nvarying vec2 vTextureCoord;</b>\nvoid main() {\n  <b>gl_FragColor = texture2D(uSampler, vTextureCoord);</b>\n}</code></pre>\n<p>Texture coordinates vary from 0.0 to 1.0 for x and y, with the beginning (0.0, 0.0) at the bottom left corner. Change you <code>initVertices</code> to look as follow:</p>\n<pre><code>private void initVertices(int programReference) {\n    final float[] verticesData = new float[] {\n           <b>//NDCS coords   //Texture coords\n            -1, 1,          0, 1,\n            -1, -1,         0, 0,\n            1,  1,          1, 1,\n            1,  -1,         1, 0</b>\n    }\n    int buffers[] = new int[1];\n    GLES20.glGenBuffers(1, buffers, 0);\n    GLES20.glBindBuffer(GLES20.GL_ARRAY_BUFFER, buffers[0]);\n    GLES20.glBufferData(GLES20.GL_ARRAY_BUFFER, verticesData.length * 4, convertToBuffer(verticesData), GLES20.GL_STREAM_DRAW);\n    <b>final int stride = 4 * 4;\n    enableVertexAttribute(programReference, \"aPosition\", 2, stride, 0);\n    enableVertexAttribute(programReference, \"aTextureCoord\", 2, stride, 2 * 4);</b>\n}</code></pre>\n<p>The next method below <code>attachTexture</code> passes the source image to the texture sampler of the fragment shader <code>uSampler</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>private void attachTexture(int programReference) {\n    final int[] textures = new int[1];\n    GLES20.glGenTextures(1, textures, 0);\n    final int textureId = textures[0];\n    GLES20.glBindTexture(GLES20.GL_TEXTURE_2D, textureId);\n    GLES20.glPixelStorei(GLES20.GL_UNPACK_ALIGNMENT, 1);\n    GLES20.glTexParameterf(GLES20.GL_TEXTURE_2D, GLES20.GL_TEXTURE_MIN_FILTER, GLES20.GL_NEAREST);\n    GLES20.glTexParameterf(GLES20.GL_TEXTURE_2D, GLES20.GL_TEXTURE_MAG_FILTER, GLES20.GL_NEAREST);\n    GLES20.glTexParameteri(GLES20.GL_TEXTURE_2D, GLES20.GL_TEXTURE_WRAP_S, GLES20.GL_REPEAT);\n    GLES20.glTexParameteri(GLES20.GL_TEXTURE_2D, GLES20.GL_TEXTURE_WRAP_T, GLES20.GL_REPEAT);\n    GLUtils.texImage2D(GLES20.GL_TEXTURE_2D, 0, mBitmap, 0);\n    GLES20.glActiveTexture(GLES20.GL_TEXTURE0);\n    GLES20.glBindTexture(GLES20.GL_TEXTURE_2D, textureId);\n    final int samplerLocation = GLES20.glGetUniformLocation(programReference, &quot;uSampler&quot;);\n    GLES20.glUniform1i(samplerLocation, 0);\n}\n</code></pre>\n<p>The method has to be called from <code>onSurfaceChanged</code> method:</p>\n<pre><code>@Override\npublic void onSurfaceChanged(GL10 gl, int width, int height) {\n    GLES20.glViewport(0, 0, width, height);\n    final int program = loadProgram();\n    GLES20.glUseProgram(program);\n    initVertices(program);\n    <b>attachTexture(program);</b>\n}</code></pre>\n<h2>Apply color filter</h2>\n<p>Now we are all set to apply the color filter. The color filter is a 4x5 matrix, however OpenGL ES 2 has only matrices up to 4x4 dimension, thus we have to define a new structure, that can fit our color filter in form of a 4x4 matrix and a vector of 4 elements:</p>\n<pre><code>precision mediump float;\n<b>struct ColorFilter {\n  mat4 factor;\n  vec4 shift;\n};</b>\nuniform sampler2D uSampler;\n<b>uniform ColorFilter uColorFilter;</b>\nvarying vec2 vTextureCoord;\nvoid main() {\n  <b>vec4 originalColor = texture2D(uSampler, vTextureCoord);\n  vec4 filteredColor = (originalColor * uColorFilter.factor) + uColorFilter.shift;\n  gl_FragColor = originalColor - filteredColor;</b>\n}</code></pre>\n<p><code>attachColorFilter</code> method will help us to pass the filter matrix to the shader:</p>\n<pre class=\"lang-java prettyprint-override\"><code>private void attachColorFilter(int program) {\n    final float[] colorFilterFactor = new float[4 * 4];\n    final float[] colorFilterShift = new float[4];\n    for (int i = 0; i &lt; mColorFilter.length; i++) {\n        final float value = mColorFilter[i];\n        final int calculateIndex = i + 1;\n        if (calculateIndex % 5 == 0) {\n            colorFilterShift[calculateIndex / 5 - 1] = value / 255;\n        } else {\n            colorFilterFactor[i - calculateIndex / 5] = value;\n        }\n    }\n    final int colorFactorLocation = GLES20.glGetUniformLocation(program, &quot;uColorFilter.factor&quot;);\n    GLES20.glUniformMatrix4fv(colorFactorLocation, 1, false, colorFilterFactor, 0);\n    final int colorShiftLocation = GLES20.glGetUniformLocation(program, &quot;uColorFilter.shift&quot;);\n    GLES20.glUniform4fv(colorShiftLocation, 1, colorFilterShift, 0);\n}\n</code></pre>\n<p>You also need to call this method in <code>onSurfaceChanged</code> method:</p>\n<pre><code>@Override\npublic void onSurfaceChanged(GL10 gl, int width, int height) {\n    GLES20.glViewport(0, 0, width, height);\n    final int program = loadProgram();\n    GLES20.glUseProgram(program);\n    initVertices(program);\n    attachTexture(program);\n    <b>attachColorFilter(program);</b>\n}</code></pre>\n<h2>Alpha channel blending</h2>\n<p>Our OpenGL context has alpha channel buffer enabled (it was configured via <code>hostView.setEGLConfigChooser(8, 8, 8, 8, 0, 0);</code>) otherwise we would always get some background for the output image (that is not correct, taking into account that png images tend to have different alpha channels for some pixels). This however breaks blending of alpha channels of background surface and the texture. That is not a big deal to implement it ourselves, however:</p>\n<pre><code>precision mediump float;\nstruct ColorFilter {\n  mat4 factor;\n  vec4 shift;\n};\nuniform sampler2D uSampler;\nuniform ColorFilter uColorFilter;\nvarying vec2 vTextureCoord;\nvoid main() {\n  vec4 originalColor = texture2D(uSampler, vTextureCoord);\n  <b>originalColor.rgb *= originalColor.a;</b>\n  vec4 filteredColor = (originalColor * uColorFilter.factor) + uColorFilter.shift;\n  <b>filteredColor.rgb *= filteredColor.a;\n  gl_FragColor = vec4(originalColor.rgb - filteredColor.rgb, originalColor.a);</b>\n}</code></pre>\n<p>I also recommend to set the blend function to the following, so our output is not any affected by whatever is currently in the color buffer and behavior is closer to the Android's <a href=\"https://developer.android.com/reference/android/widget/ImageView\" rel=\"nofollow noreferrer\"><code>ImageView</code></a>. However we didn't set color for clear color and it doesn't seem to change anything:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Override\npublic void onSurfaceCreated(GL10 gl, EGLConfig config) {\n    GLES20.glEnable(GLES20.GL_BLEND);\n    GLES20.glBlendFunc(GLES20.GL_ONE, GLES20.GL_ZERO);\n}\n</code></pre>\n<h2>Post the result</h2>\n<p>The work is pretty much done at this point, the implementation only needs to return the result to the callback. First let's get bitmap from the <code>GLSurfaceView</code>, there is one brilliant solution that I borrowed from <a href=\"https://stackoverflow.com/a/21739723/5690248\">another stackoverflow answer</a>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>private Bitmap retrieveBitmapFromGl(int width, int height) {\n    final ByteBuffer pixelBuffer = ByteBuffer.allocateDirect(width * height * PrimitiveSizes.FLOAT);\n    pixelBuffer.order(ByteOrder.LITTLE_ENDIAN);\n    GLES20.glReadPixels(0,0, width, height, GLES20.GL_RGBA, GLES20.GL_UNSIGNED_BYTE, pixelBuffer);\n    final Bitmap image = Bitmap.createBitmap(width, height, Bitmap.Config.ARGB_8888);\n    image.copyPixelsFromBuffer(pixelBuffer);\n    return image;\n}\n</code></pre>\n<p>Now just take the bitmap, check for errors and return the result:</p>\n<pre class=\"lang-java prettyprint-override\"><code>private GLException getGlError() {\n    int errorValue = GLES20.glGetError();\n    switch (errorValue) {\n        case GLES20.GL_NO_ERROR:\n            return null;\n        default:\n            return new GLException(errorValue);\n    }\n}\n\nprivate void postResult() {\n    if (mFinished) {\n        return;\n    }\n    final GLSurfaceView hostView = mHostViewReference.get();\n    if (hostView == null) {\n        return;\n    }\n    GLException glError = getGlError();\n    if (glError != null) {\n        hostView.post(() -&gt; {\n            mCallback.onFailure(glError);\n            removeHostView(hostView);\n        });\n    } else {\n        final Bitmap result = retrieveBitmapFromGl(mBitmap.getWidth(), mBitmap.getHeight());\n        hostView.post(() -&gt; {\n            mCallback.onSuccess(result);\n            removeHostView(hostView);\n        });\n    }\n    mFinished = true;\n}\n\nprivate void removeHostView(@NonNull GLSurfaceView hostView) {\n    if (hostView.getParent() == null) {\n        return;\n    }\n    final WindowManager windowManager = (WindowManager) hostView.getContext().getSystemService(Context.WINDOW_SERVICE);\n    Objects.requireNonNull(windowManager).removeView(hostView);\n}\n</code></pre>\n<p>The method needs to be called from <code>onDrawFrame</code> method:</p>\n<pre><code>@Override\npublic void onDrawFrame(GL10 gl) {\n    GLES20.glClear(GLES20.GL_COLOR_BUFFER_BIT);\n    GLES20.glDrawArrays(GLES20.GL_TRIANGLE_STRIP, 0, 4);\n    <b>postResult();</b>\n}</code></pre>\n<hr />\n<h1>Result</h1>\n<p>Let's play around with the utility we just made. The all-zero filter should not affect the original image at all:</p>\n<h3>Code</h3>\n<pre class=\"lang-java prettyprint-override\"><code>BlendingFilterUtil.subtractMatrixColorFilter(bitmap, new float[]{\n    0,      0,      0,      0,      0,\n    0,      0,      0,      0,      0,\n    0,      0,      0,      0,      0,\n    0,      0,      0,      0,      0\n}, activity, callback);\n</code></pre>\n<h3>Output</h3>\n<p><a href=\"https://i.stack.imgur.com/PnBQc.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/PnBQc.png\" alt=\"Original image\" /></a></p>\n<p>The original image is on the left and the blended image is on the right. They are the same, as expected. You can also remove specific channels completely with this approach. E.g. here how red and green channels could be removed:</p>\n<h3>Code</h3>\n<pre class=\"lang-java prettyprint-override\"><code>BlendingFilterUtil.subtractMatrixColorFilter(bitmap, new float[]{\n    1,      0,      0,      0,      0,\n    0,      1,      0,      0,      0,\n    0,      0,      0,      0,      0,\n    0,      0,      0,      1,      0\n}, activity, callback);\n</code></pre>\n<h3>Output</h3>\n<p><a href=\"https://i.stack.imgur.com/NIQPc.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/NIQPc.png\" alt=\"Blue image\" /></a></p>\n<p>Finally, here is the result for the filter given in the question:</p>\n<h3>Code</h3>\n<pre class=\"lang-java prettyprint-override\"><code>BlendingFilterUtil.subtractMatrixColorFilter(bitmap, new float[]{\n    0.393f, 0.7689999f, 0.18899999f, 0, 0,\n    0.349f, 0.6859999f, 0.16799999f, 0, 0,\n    0.272f, 0.5339999f, 0.13099999f, 0, 0,\n    0,      0,          0,           1, 0\n}, activity, callback);\n</code></pre>\n<h3>Output</h3>\n<p><a href=\"https://i.stack.imgur.com/nNVAA.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/nNVAA.png\" alt=\"Subtracted fiter image\" /></a></p>\n<h2>Source code</h2>\n<p>If you struggle at any step, don't hesitate to refer to <a href=\"https://gist.github.com/TheDreamsWind/5049f1db908580b594f642f3f73836b5\" rel=\"nofollow noreferrer\">the gist</a> with the complete code of the utility.</p>\n"}],"owner":{"account_id":2985836,"reputation":2698,"user_id":2534694,"accept_rate":32,"display_name":"Zen"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2657,"favorite_count":0,"down_vote_count":1,"up_vote_count":57,"answer_count":2,"score":56,"last_activity_date":1679505074,"creation_date":1445906127,"question_id":33358030,"body_markdown":"I have the following ColorMatrixFilter. But I want to use it as a mask for Subtract-Blend mode, instead of using it directly. How do I go about achieving this? \r\n\r\nColorMatrix: \r\n\r\n    colorMatrix[\r\n\t\t\t0.393, 0.7689999, 0.18899999, 0, 0,\r\n\t\t\t0.349, 0.6859999, 0.16799999, 0, 0,\r\n\t\t\t0.272, 0.5339999, 0.13099999, 0, 0,\r\n\t\t\t0,     0,         0,          1, 0\r\n\t\t];\r\n","title":"Subtract Blend Mode using ColorMatrixFilter in Android?","body":"<p>I have the following ColorMatrixFilter. But I want to use it as a mask for Subtract-Blend mode, instead of using it directly. How do I go about achieving this? </p>\n\n<p>ColorMatrix: </p>\n\n<pre><code>colorMatrix[\n        0.393, 0.7689999, 0.18899999, 0, 0,\n        0.349, 0.6859999, 0.16799999, 0, 0,\n        0.272, 0.5339999, 0.13099999, 0, 0,\n        0,     0,         0,          1, 0\n    ];\n</code></pre>\n"},{"tags":["java","spring","generics","dependency-injection"],"owner":{"account_id":3391382,"reputation":3687,"user_id":2846138,"display_name":"cyberbrain"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679504958,"creation_date":1679504958,"question_id":75815285,"body_markdown":"I have a generic class with the type `&lt;T&gt;` and a constructor like `Target(Class&lt;T&gt; type, String foo)`.\r\n\r\nIs it possible to configure a dependency injection for that, so when I want a \r\n`Target&lt;SomeType&gt; someTypeTarget` to be injected directly by Spring? \r\n\r\n`SomeType` is an interface where I don&#39;t have any implementations in code for, those should be generated at runtime by a library.\r\n\r\nI use Spring 5.3.x so it has the capability of working with generics for dependency injections.\r\n\r\nI only use annotation based configuration for the dependency injection in this project.\r\n\r\nSo far I worked around by injecting a `TargetFactory` that has a method `Target&lt;S&gt; provideTarget(Class&lt;S&gt; type, String foo)` that just calls the constructor, but it needs that extra bit of work to define the factory as interface and provide an implementation (I need different implementations of `Target` for runtime and tests).\r\n\r\n``` lang-java\r\ninterface Target&lt;S&gt; {\r\n    S getRealTarget();\r\n}\r\n```\r\n``` lang-java\r\ninterface TargetFactory {\r\n\t&lt;S&gt; Target&lt;S&gt; provideTarget(Class&lt;S&gt; type, String foo);\r\n}\r\n```\r\n``` lang-java\r\n@Component\r\npublic class MyTargetFactory implements TargetFactory {\r\n\t@Override\r\n\tpublic &lt;U&gt; Target&lt;U&gt; provideTarget(Class&lt;U&gt; type, String foo) {\r\n\t\treturn new LibTarget&lt;&gt;(type, foo);\r\n\t}\r\n}\r\n```\r\nIt&#39;s used like this:\r\n``` lang-java\r\n@Bean\r\npublic SomeType provideRemoteMessagesRest(@Qualifier(&quot;specialFoo&quot;) String foo,\r\n                                          TargetFactory targetFactory                                                    \r\n) {\r\n\treturn targetFactory.provideTarget(SomeType.class, foo).getRealTarget();\r\n}\r\n```\r\nAnd then `SomeType` is injected into another constructor...\r\n\r\n`Target` and `LibTarget` are implementations provided by the used lib.\r\n\r\nI know that you cannot just get the `Class` of a generic parameter, but as Spring is capable of using the type parameter as qualifier, I&#39;m wondering if it has some more &quot;magic&quot; available here.\r\n\r\nAnd if this helps somehow: the used lib is [Feign](https://github.com/OpenFeign/feign) but I don&#39;t think this is really relevant.","title":"Spring dependency injection: inject Class of generic type","body":"<p>I have a generic class with the type <code>&lt;T&gt;</code> and a constructor like <code>Target(Class&lt;T&gt; type, String foo)</code>.</p>\n<p>Is it possible to configure a dependency injection for that, so when I want a\n<code>Target&lt;SomeType&gt; someTypeTarget</code> to be injected directly by Spring?</p>\n<p><code>SomeType</code> is an interface where I don't have any implementations in code for, those should be generated at runtime by a library.</p>\n<p>I use Spring 5.3.x so it has the capability of working with generics for dependency injections.</p>\n<p>I only use annotation based configuration for the dependency injection in this project.</p>\n<p>So far I worked around by injecting a <code>TargetFactory</code> that has a method <code>Target&lt;S&gt; provideTarget(Class&lt;S&gt; type, String foo)</code> that just calls the constructor, but it needs that extra bit of work to define the factory as interface and provide an implementation (I need different implementations of <code>Target</code> for runtime and tests).</p>\n<pre class=\"lang-java prettyprint-override\"><code>interface Target&lt;S&gt; {\n    S getRealTarget();\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>interface TargetFactory {\n    &lt;S&gt; Target&lt;S&gt; provideTarget(Class&lt;S&gt; type, String foo);\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>@Component\npublic class MyTargetFactory implements TargetFactory {\n    @Override\n    public &lt;U&gt; Target&lt;U&gt; provideTarget(Class&lt;U&gt; type, String foo) {\n        return new LibTarget&lt;&gt;(type, foo);\n    }\n}\n</code></pre>\n<p>It's used like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Bean\npublic SomeType provideRemoteMessagesRest(@Qualifier(&quot;specialFoo&quot;) String foo,\n                                          TargetFactory targetFactory                                                    \n) {\n    return targetFactory.provideTarget(SomeType.class, foo).getRealTarget();\n}\n</code></pre>\n<p>And then <code>SomeType</code> is injected into another constructor...</p>\n<p><code>Target</code> and <code>LibTarget</code> are implementations provided by the used lib.</p>\n<p>I know that you cannot just get the <code>Class</code> of a generic parameter, but as Spring is capable of using the type parameter as qualifier, I'm wondering if it has some more &quot;magic&quot; available here.</p>\n<p>And if this helps somehow: the used lib is <a href=\"https://github.com/OpenFeign/feign\" rel=\"nofollow noreferrer\">Feign</a> but I don't think this is really relevant.</p>\n"},{"tags":["java","bash","maven"],"comments":[{"owner":{"account_id":32384,"reputation":120260,"user_id":89817,"display_name":"Gordon Davisson"},"score":1,"creation_date":1679463325,"post_id":75808055,"comment_id":133724884,"body_markdown":"By default, shell scripts don&#39;t exit on errors. You can make them do that with `set -e`, but its idea of what&#39;s an exit-worthy error often doesn&#39;t match up with a reasonable person&#39;s (see [BashFAQ #105: &quot;Why doesn&#39;t `set -e` (or `set -o errexit`, or `trap ERR`) do what I expected?&quot;), so it&#39;s not very reliable. Personally, I just add error checking to important steps in the script, which can be as simple as `importantCommand || exit`.","body":"By default, shell scripts don&#39;t exit on errors. You can make them do that with <code>set -e</code>, but its idea of what&#39;s an exit-worthy error often doesn&#39;t match up with a reasonable person&#39;s (see [BashFAQ #105: &quot;Why doesn&#39;t <code>set -e</code> (or <code>set -o errexit</code>, or <code>trap ERR</code>) do what I expected?&quot;), so it&#39;s not very reliable. Personally, I just add error checking to important steps in the script, which can be as simple as <code>importantCommand || exit</code>."},{"owner":{"account_id":2186012,"reputation":20371,"user_id":1934428,"accept_rate":86,"display_name":"user1934428"},"score":0,"creation_date":1679468484,"post_id":75808055,"comment_id":133725525,"body_markdown":"@otter : In the posted script, the only command in question is `$RUN_CMD[@]`. Are you refering to **this** command to fail?","body":"@otter : In the posted script, the only command in question is <code>$RUN_CMD[@]</code>. Are you refering to <b>this</b> command to fail?"},{"owner":{"account_id":2264130,"reputation":38897,"user_id":1993366,"accept_rate":86,"display_name":"vikingsteve"},"score":0,"creation_date":1679473818,"post_id":75808055,"comment_id":133726590,"body_markdown":"When you execute a script, its the script itself that is responsible for proper error handling and process cleanup. Once you write a fully self contained script, you wont have any more problems with build","body":"When you execute a script, its the script itself that is responsible for proper error handling and process cleanup. Once you write a fully self contained script, you wont have any more problems with build"},{"owner":{"account_id":27995348,"reputation":21,"user_id":21380727,"display_name":"otter"},"score":0,"creation_date":1679490560,"post_id":75808055,"comment_id":133730938,"body_markdown":"@user1934428 I am expecting if any of the components&#39; build processes fail, it will not execute $RUN_CMD[@]","body":"@user1934428 I am expecting if any of the components&#39; build processes fail, it will not execute $RUN_CMD[@]"},{"owner":{"account_id":308303,"reputation":36789,"user_id":620097,"display_name":"shellter"},"score":0,"creation_date":1679492411,"post_id":75808055,"comment_id":133731466,"body_markdown":"My impression is that you&#39;re asking us to debug a third party&#39;s build/install script. But that is not the spirit of StackOverflow. Please read about [mcve] and look at their code. Can you boil the problem down to something readers can test without having goto an external site and run that build process? For debugging help, maybe read https://stackoverflow.com/tags/bash/info , skipping the version information at the top, and searching for &quot;Before asking about problematic code&quot; and &quot;How to turn bad code into a good question&quot;. (Or file a bug report with the project?) Good Luck","body":"My impression is that you&#39;re asking us to debug a third party&#39;s build/install script. But that is not the spirit of StackOverflow. Please read about <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> and look at their code. Can you boil the problem down to something readers can test without having goto an external site and run that build process? For debugging help, maybe read <a href=\"https://stackoverflow.com/tags/bash/info\">stackoverflow.com/tags/bash/info</a> , skipping the version information at the top, and searching for &quot;Before asking about problematic code&quot; and &quot;How to turn bad code into a good question&quot;. (Or file a bug report with the project?) Good Luck"},{"owner":{"account_id":2186012,"reputation":20371,"user_id":1934428,"accept_rate":86,"display_name":"user1934428"},"score":0,"creation_date":1679493450,"post_id":75808055,"comment_id":133731845,"body_markdown":"You don&#39;t show in your script, how you build your comments, so I can&#39;t say how you can determine their failure.","body":"You don&#39;t show in your script, how you build your comments, so I can&#39;t say how you can determine their failure."},{"owner":{"account_id":27995348,"reputation":21,"user_id":21380727,"display_name":"otter"},"score":0,"creation_date":1679494813,"post_id":75808055,"comment_id":133732311,"body_markdown":"@shellter  Thanks for your reply and guidance, I am new here and will read through the information you provided.","body":"@shellter  Thanks for your reply and guidance, I am new here and will read through the information you provided."},{"owner":{"account_id":308303,"reputation":36789,"user_id":620097,"display_name":"shellter"},"score":0,"creation_date":1679497099,"post_id":75808055,"comment_id":133733095,"body_markdown":"AND you are relying on OpenRefine AFTER you are attempting to build some other X project. (as user193... has pointed out). Please edit your question to put a name to &quot;project X&quot; and include a github URL for it. (Not how we like to do things, but I have a little time today, maybe I can look at this). Good luck.","body":"AND you are relying on OpenRefine AFTER you are attempting to build some other X project. (as user193... has pointed out). Please edit your question to put a name to &quot;project X&quot; and include a github URL for it. (Not how we like to do things, but I have a little time today, maybe I can look at this). Good luck."},{"owner":{"account_id":55879,"reputation":10520,"user_id":167425,"accept_rate":50,"display_name":"Tom Morris"},"score":0,"creation_date":1679503658,"post_id":75808055,"comment_id":133735083,"body_markdown":"StackOverflow isn&#39;t intended as a place to get a bash tutorial. The two things needed are to 1) figure out how to get the Java compilation error to propagate to the Maven exit (if it isn&#39;t already) and 2) how to check the Maven exit code and modify the execution flow. As an intern applying to the OpenRefine project, you shouldn&#39;t be relying on StackOverflow to do this for you.","body":"StackOverflow isn&#39;t intended as a place to get a bash tutorial. The two things needed are to 1) figure out how to get the Java compilation error to propagate to the Maven exit (if it isn&#39;t already) and 2) how to check the Maven exit code and modify the execution flow. As an intern applying to the OpenRefine project, you shouldn&#39;t be relying on StackOverflow to do this for you."},{"owner":{"account_id":27995348,"reputation":21,"user_id":21380727,"display_name":"otter"},"score":0,"creation_date":1679503897,"post_id":75808055,"comment_id":133735148,"body_markdown":"@GordonDavisson I solved this problem by using importantCommand || exit. The only thing I found out is to know when and where the compile fail and add on &quot;|| exit&quot;. Thanks so much for saving my day!","body":"@GordonDavisson I solved this problem by using importantCommand || exit. The only thing I found out is to know when and where the compile fail and add on &quot;|| exit&quot;. Thanks so much for saving my day!"},{"owner":{"account_id":27995348,"reputation":21,"user_id":21380727,"display_name":"otter"},"score":0,"creation_date":1679503949,"post_id":75808055,"comment_id":133735165,"body_markdown":"@shellter Thanks for your kindness. I appreciate your words and your trying to help.","body":"@shellter Thanks for your kindness. I appreciate your words and your trying to help."},{"owner":{"account_id":308303,"reputation":36789,"user_id":620097,"display_name":"shellter"},"score":1,"creation_date":1679506165,"post_id":75808055,"comment_id":133735724,"body_markdown":"@otter : Glad you found a solution to your problem. `|| exit` is certainly effective. Dig into why `ImportantCommand` is failing and you&#39;ll be on your way. I was thinking of a comment about how much you can learn from just a simple example like `set -vx ; true ; false ; true &amp;&amp; true ; false &amp;&amp; true ; false || true ; true || true ; true || false ; set +vx`. Best to take each section between `;` chars and copy/paste to a command line and inspect what is happening for each segment. You could append `; echo $?` to each segment .  ...","body":"@otter : Glad you found a solution to your problem. <code>|| exit</code> is certainly effective. Dig into why <code>ImportantCommand</code> is failing and you&#39;ll be on your way. I was thinking of a comment about how much you can learn from just a simple example like <code>set -vx ; true ; false ; true &amp;&amp; true ; false &amp;&amp; true ; false || true ; true || true ; true || false ; set +vx</code>. Best to take each section between <code>;</code> chars and copy/paste to a command line and inspect what is happening for each segment. You could append <code>; echo $?</code> to each segment .  ..."},{"owner":{"account_id":308303,"reputation":36789,"user_id":620097,"display_name":"shellter"},"score":0,"creation_date":1679506173,"post_id":75808055,"comment_id":133735727,"body_markdown":"(Commands return 0 for true/success and non-zero numbers when there are prroblems. ). Good luck!","body":"(Commands return 0 for true/success and non-zero numbers when there are prroblems. ). Good luck!"},{"owner":{"account_id":27995348,"reputation":21,"user_id":21380727,"display_name":"otter"},"score":0,"creation_date":1679509422,"post_id":75808055,"comment_id":133736577,"body_markdown":"@shellter Thank you! I saved your suggestion and will definitely try these out. All the best :).","body":"@shellter Thank you! I saved your suggestion and will definitely try these out. All the best :)."}],"owner":{"account_id":27995348,"reputation":21,"user_id":21380727,"display_name":"otter"},"comment_count":14,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":78,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1679504410,"creation_date":1679453176,"question_id":75808055,"body_markdown":"The refine script on Linux does not do a good job at stopping if it needs to compile OpenRefine and compilation errors occur.\r\n\r\nTo Reproduce\r\n\r\nSteps to reproduce the behavior (from a git clone of the repository):\r\n\r\nFirst, clean with ./refine clean\r\nThen, introduce some compilation error somewhere, such as by doing rm ./extensions/wikibase/src/org/openrefine/wikibase/qa/QAWarning.java\r\nFinally, run ./refine\r\nCurrent Results\r\n\r\nThe compilation fails in the Wikibase extension but the refine script still attempts to start OpenRefine:\r\n\r\n```\r\n...\r\n[ERROR] extensions/wikibase/src/org/openrefine/wikibase/qa/scrutinizers/NewEntityScrutinizer.java:[104,17] cannot find symbol\r\n[ERROR]   symbol:   class QAWarning\r\n[ERROR]   location: class org.openrefine.wikibase.qa.scrutinizers.NewEntityScrutinizer\r\n[ERROR] extensions/wikibase/src/org/openrefine/wikibase/qa/scrutinizers/NewEntityScrutinizer.java:[104,39] cannot find symbol\r\n[ERROR]   symbol:   class QAWarning\r\n[ERROR]   location: class org.openrefine.wikibase.qa.scrutinizers.NewEntityScrutinizer\r\n[ERROR] -&gt; [Help 1]\r\n[ERROR] \r\n[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\r\n[ERROR] Re-run Maven using the -X switch to enable full debug logging.\r\n[ERROR] \r\n[ERROR] For more information about the errors and possible solutions, please read the following articles:\r\n[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException\r\n[ERROR] \r\n[ERROR] After correcting the problems, you can resume the build with the command\r\n[ERROR]   mvn &lt;args&gt; -rf :wikibase\r\n\r\n\r\n15:54:05.840 [            refine_server] Starting Server bound to &#39;127.0.0.1:3333&#39; (0ms)\r\n15:54:05.975 [            refine_server] refine.memory size: 1400M JVM Max heap: 1468006400 bytes (135ms)\r\n15:54:06.359 [            refine_server] Initializing context: &#39;/&#39; from &#39;/home/user/OpenRefine/main/webapp&#39; (384ms)\r\n15:54:06.948 [            refine_server] Starting autoreloading scanner...  (589ms)\r\n15:54:13.478 [                   refine] Starting OpenRefine 3.8-SNAPSHOT [acca2dd]... (6530ms)\r\n15:54:13.495 [                   refine] initializing FileProjectManager with dir (17ms)\r\n...\r\n````\r\nExpected Behavior\r\n\r\nThe refine script should stop at the end of the failing Maven build.\r\n\r\n\r\nhttps://github.com/OpenRefine/OpenRefine/issues/5698\r\n\r\nI found out the control of running server is these lines:\r\n\r\n```\r\n RUN_CMD=(&quot;$JAVA&quot; -cp &quot;$CLASSPATH&quot; &quot;${OPTS[@]}&quot; &quot;com.google.refine.Refine&quot;)\r\n\r\n    echo &quot;&quot;\r\n    \r\n    \r\n\r\n    if [ -z &quot;$FORK&quot; ] ; then\r\n        exec &quot;${RUN_CMD[@]}&quot;\r\n    else\r\n        &quot;${RUN_CMD[@]}&quot; &amp;\r\n        REFINE_PID=&quot;$!&quot;\r\n    fi\r\n```\r\n\r\nBut I don&#39;t how to catch the wikibase error and then stop this run_cmd.\r\n","title":"Bash script didn&#39;t stop running even a compile error happens","body":"<p>The refine script on Linux does not do a good job at stopping if it needs to compile OpenRefine and compilation errors occur.</p>\n<p>To Reproduce</p>\n<p>Steps to reproduce the behavior (from a git clone of the repository):</p>\n<p>First, clean with ./refine clean\nThen, introduce some compilation error somewhere, such as by doing rm ./extensions/wikibase/src/org/openrefine/wikibase/qa/QAWarning.java\nFinally, run ./refine\nCurrent Results</p>\n<p>The compilation fails in the Wikibase extension but the refine script still attempts to start OpenRefine:</p>\n<pre><code>...\n[ERROR] extensions/wikibase/src/org/openrefine/wikibase/qa/scrutinizers/NewEntityScrutinizer.java:[104,17] cannot find symbol\n[ERROR]   symbol:   class QAWarning\n[ERROR]   location: class org.openrefine.wikibase.qa.scrutinizers.NewEntityScrutinizer\n[ERROR] extensions/wikibase/src/org/openrefine/wikibase/qa/scrutinizers/NewEntityScrutinizer.java:[104,39] cannot find symbol\n[ERROR]   symbol:   class QAWarning\n[ERROR]   location: class org.openrefine.wikibase.qa.scrutinizers.NewEntityScrutinizer\n[ERROR] -&gt; [Help 1]\n[ERROR] \n[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\n[ERROR] Re-run Maven using the -X switch to enable full debug logging.\n[ERROR] \n[ERROR] For more information about the errors and possible solutions, please read the following articles:\n[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException\n[ERROR] \n[ERROR] After correcting the problems, you can resume the build with the command\n[ERROR]   mvn &lt;args&gt; -rf :wikibase\n\n\n15:54:05.840 [            refine_server] Starting Server bound to '127.0.0.1:3333' (0ms)\n15:54:05.975 [            refine_server] refine.memory size: 1400M JVM Max heap: 1468006400 bytes (135ms)\n15:54:06.359 [            refine_server] Initializing context: '/' from '/home/user/OpenRefine/main/webapp' (384ms)\n15:54:06.948 [            refine_server] Starting autoreloading scanner...  (589ms)\n15:54:13.478 [                   refine] Starting OpenRefine 3.8-SNAPSHOT [acca2dd]... (6530ms)\n15:54:13.495 [                   refine] initializing FileProjectManager with dir (17ms)\n...\n</code></pre>\n<p>Expected Behavior</p>\n<p>The refine script should stop at the end of the failing Maven build.</p>\n<p><a href=\"https://github.com/OpenRefine/OpenRefine/issues/5698\" rel=\"nofollow noreferrer\">https://github.com/OpenRefine/OpenRefine/issues/5698</a></p>\n<p>I found out the control of running server is these lines:</p>\n<pre><code> RUN_CMD=(&quot;$JAVA&quot; -cp &quot;$CLASSPATH&quot; &quot;${OPTS[@]}&quot; &quot;com.google.refine.Refine&quot;)\n\n    echo &quot;&quot;\n    \n    \n\n    if [ -z &quot;$FORK&quot; ] ; then\n        exec &quot;${RUN_CMD[@]}&quot;\n    else\n        &quot;${RUN_CMD[@]}&quot; &amp;\n        REFINE_PID=&quot;$!&quot;\n    fi\n</code></pre>\n<p>But I don't how to catch the wikibase error and then stop this run_cmd.</p>\n"},{"tags":["java","rest","jersey-1.0"],"comments":[{"owner":{"account_id":2864238,"reputation":10897,"user_id":2458858,"accept_rate":85,"display_name":"tryingToLearn"},"score":0,"creation_date":1537499433,"post_id":30783976,"comment_id":91815321,"body_markdown":"did you find a solution to this?","body":"did you find a solution to this?"},{"owner":{"account_id":2634000,"reputation":2938,"user_id":2279200,"accept_rate":73,"display_name":"Athafoud"},"score":0,"creation_date":1537723354,"post_id":30783976,"comment_id":91878880,"body_markdown":"@tryingToLearn No, I did not find what I was looking for. As I say above, I have a function that has all my logic inside and I call / reuse this every time. The only &#39;automation&#39; I managed to do, was to create something lake a template class that has all the common logic there. So any new class is based on this one, however refactoring can be messy.","body":"@tryingToLearn No, I did not find what I was looking for. As I say above, I have a function that has all my logic inside and I call / reuse this every time. The only &#39;automation&#39; I managed to do, was to create something lake a template class that has all the common logic there. So any new class is based on this one, however refactoring can be messy."},{"owner":{"account_id":2864238,"reputation":10897,"user_id":2458858,"accept_rate":85,"display_name":"tryingToLearn"},"score":0,"creation_date":1537750239,"post_id":30783976,"comment_id":91884934,"body_markdown":"@Athafoud filters also didn&#39;t work with jersey 1.18?","body":"@Athafoud filters also didn&#39;t work with jersey 1.18?"},{"owner":{"account_id":2634000,"reputation":2938,"user_id":2279200,"accept_rate":73,"display_name":"Athafoud"},"score":0,"creation_date":1537857003,"post_id":30783976,"comment_id":91924314,"body_markdown":"@tryingToLearn I did not use filters, but I can not remember why. So I am not sure if Filters work or not.","body":"@tryingToLearn I did not use filters, but I can not remember why. So I am not sure if Filters work or not."},{"owner":{"account_id":310643,"reputation":619,"user_id":623738,"display_name":"RJStanford"},"score":0,"creation_date":1557503621,"post_id":30783976,"comment_id":99492154,"body_markdown":"It&#39;s worth mentioning that you don&#39;t actually need to inject anything when you use the `@Context` annotation; simply tagging your &quot;@Before&quot; method with `@Context` does the trick, so long as you&#39;re working in a class that Jersey is managing.","body":"It&#39;s worth mentioning that you don&#39;t actually need to inject anything when you use the <code>@Context</code> annotation; simply tagging your &quot;@Before&quot; method with <code>@Context</code> does the trick, so long as you&#39;re working in a class that Jersey is managing."}],"answers":[{"tags":[],"owner":{"account_id":3859435,"reputation":676,"user_id":3197529,"display_name":"gsl"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1434102804,"creation_date":1434102804,"answer_id":30800205,"question_id":30783976,"body_markdown":"I use this:\r\n\r\n    \r\n    /**\r\n     * This method is called by JAX-RS for each request before the identified resource method is\r\n     * invoked, since it is annotated with the Context annotation.\r\n     */\r\n    @Context\r\n    public void setServletContext( ServletContext servletContext ) {\r\n\r\n    }\r\n\r\nI put this in the Resource classes.","title":"Jersey - execute &#39;common&#39; code before running a selected set of subresources","body":"<p>I use this:</p>\n\n<pre><code>/**\n * This method is called by JAX-RS for each request before the identified resource method is\n * invoked, since it is annotated with the Context annotation.\n */\n@Context\npublic void setServletContext( ServletContext servletContext ) {\n\n}\n</code></pre>\n\n<p>I put this in the Resource classes.</p>\n"},{"tags":[],"owner":{"account_id":248504,"reputation":3311,"user_id":523898,"accept_rate":86,"display_name":"jakubiszon"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1544553799,"creation_date":1540769888,"answer_id":53037028,"question_id":30783976,"body_markdown":"In addition to the previous answer, to get the request, response and the session:\r\n\r\n    @Context\r\n    public void setServletContext(\r\n                    ServletContext servletContext,\r\n                    @Context final HttpServletRequest request,\r\n                    @Context final HttpServletResponse response\r\n    ) {\r\n        // you can also get to the session\r\n        // it is recommended to uncomment the &quot;false&quot; argument below\r\n        // to avoid creating sessions if they don&#39;t already exist\r\n        HttpSession session = request.getSession(/*false*/);\r\n    }\r\n\r\nYou can also put this in a class which your resources extend to get it executed for every request in all resources.","title":"Jersey - execute &#39;common&#39; code before running a selected set of subresources","body":"<p>In addition to the previous answer, to get the request, response and the session:</p>\n\n<pre><code>@Context\npublic void setServletContext(\n                ServletContext servletContext,\n                @Context final HttpServletRequest request,\n                @Context final HttpServletResponse response\n) {\n    // you can also get to the session\n    // it is recommended to uncomment the \"false\" argument below\n    // to avoid creating sessions if they don't already exist\n    HttpSession session = request.getSession(/*false*/);\n}\n</code></pre>\n\n<p>You can also put this in a class which your resources extend to get it executed for every request in all resources.</p>\n"}],"owner":{"account_id":2634000,"reputation":2938,"user_id":2279200,"accept_rate":73,"display_name":"Athafoud"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2235,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"answer_count":2,"score":7,"last_activity_date":1679503910,"creation_date":1434033639,"question_id":30783976,"body_markdown":"I have a Java Web application which uses Jersey to expose a REST API. \r\n  \r\n    @Path(&quot;/myRootResource&quot;)\r\n    public class resource\r\n    {\r\n\t\t@GET\r\n\t\t@Path(&quot;subResource_1&quot;)\r\n\t\tpublic Response subResource_1() {return null;}\r\n\t\r\n\t\t@GET\r\n\t\t@Path(&quot;subResource_2&quot;)\r\n\t\tpublic Response subResource_2() {return null;}\r\n\t}\r\n\r\nI want to run some code for every subresource under a specific resource. This code handles authentication tasks, performance metrics (e.g start time to calculate the request&#39;s time) initialization and debugging variables.\r\n\r\nUntil now I have all my code in a function (e.g. `preTasks()`), which I run in the beginning of each sub-resource method. I need to some how automate this and make that code-block to run for every sub resource of `myRootResource`, without having to copy-paste the aforementioned function to every sub-resource method.\r\n\r\nIs this something that can be done with Jersey&#39;s Filters or Interceptors?\r\n\r\n\r\nWhile I am not really familiar with Spring, I think that what I am trying to achieve is somehow similar to this: https://stackoverflow.com/questions/2418832/spring-web-application-executing-common-code-before-entering-requestmapping-in\r\n\r\n**Update 12/06/2015**  \r\nAs pointed in the comments, &#39;Interceptors&#39; is a good way to go. But &#39;Interceptors&#39; are supported only from Jersey 2.X and above. In my code I am using Jersey 1.18. Upgrading to Jersey 2.X breaks some part of my code, so I am trying to avoid this at the moment. \r\n\r\nIs there any equivalent to &#39;Interceptors&#39; in Jersey 1.18, or my only option is the upgrade. I think &#39;Dispatchers&#39; may to the job, is this correct?","title":"Jersey - execute &#39;common&#39; code before running a selected set of subresources","body":"<p>I have a Java Web application which uses Jersey to expose a REST API. </p>\n\n<pre><code>@Path(\"/myRootResource\")\npublic class resource\n{\n    @GET\n    @Path(\"subResource_1\")\n    public Response subResource_1() {return null;}\n\n    @GET\n    @Path(\"subResource_2\")\n    public Response subResource_2() {return null;}\n}\n</code></pre>\n\n<p>I want to run some code for every subresource under a specific resource. This code handles authentication tasks, performance metrics (e.g start time to calculate the request's time) initialization and debugging variables.</p>\n\n<p>Until now I have all my code in a function (e.g. <code>preTasks()</code>), which I run in the beginning of each sub-resource method. I need to some how automate this and make that code-block to run for every sub resource of <code>myRootResource</code>, without having to copy-paste the aforementioned function to every sub-resource method.</p>\n\n<p>Is this something that can be done with Jersey's Filters or Interceptors?</p>\n\n<p>While I am not really familiar with Spring, I think that what I am trying to achieve is somehow similar to this: <a href=\"https://stackoverflow.com/questions/2418832/spring-web-application-executing-common-code-before-entering-requestmapping-in\">Spring web application: executing common code before entering RequestMapping in controller</a></p>\n\n<p><strong>Update 12/06/2015</strong><br>\nAs pointed in the comments, 'Interceptors' is a good way to go. But 'Interceptors' are supported only from Jersey 2.X and above. In my code I am using Jersey 1.18. Upgrading to Jersey 2.X breaks some part of my code, so I am trying to avoid this at the moment. </p>\n\n<p>Is there any equivalent to 'Interceptors' in Jersey 1.18, or my only option is the upgrade. I think 'Dispatchers' may to the job, is this correct?</p>\n"},{"tags":["java","hibernate","caching","memory-leaks"],"comments":[{"owner":{"account_id":15956467,"reputation":4079,"user_id":11514534,"display_name":"second"},"score":0,"creation_date":1565003050,"post_id":57356989,"comment_id":101201400,"body_markdown":"What do you refer to when you say `memory leak` - an `OutOfMemory error`? Is it enough for you to print the content of said cache or are you looking for something else?","body":"What do you refer to when you say <code>memory leak</code> - an <code>OutOfMemory error</code>? Is it enough for you to print the content of said cache or are you looking for something else?"},{"owner":{"account_id":4134073,"reputation":31,"user_id":3391093,"display_name":"Anton K."},"score":0,"creation_date":1565013818,"post_id":57356989,"comment_id":101207368,"body_markdown":"Yes, it&#39;s OutOfMemory. I get heap dump and see in MAT a big count of queryPlaneCache rows. Yes, i want print this cache for see which queries a get a lot of space there. For example, may be i skip one query with big volatile IN() and it&#39;s born this error.","body":"Yes, it&#39;s OutOfMemory. I get heap dump and see in MAT a big count of queryPlaneCache rows. Yes, i want print this cache for see which queries a get a lot of space there. For example, may be i skip one query with big volatile IN() and it&#39;s born this error."},{"owner":{"account_id":15956467,"reputation":4079,"user_id":11514534,"display_name":"second"},"score":0,"creation_date":1565020241,"post_id":57356989,"comment_id":101210721,"body_markdown":"You are using `ehcache` as a provider? I know you can configure the cache to be written to the harddisk (but I don&#39;t remember whether it was a readable format) and (at least in older hibernate versions) it was possible to get access to the cache programmaticly and print out its content from there.","body":"You are using <code>ehcache</code> as a provider? I know you can configure the cache to be written to the harddisk (but I don&#39;t remember whether it was a readable format) and (at least in older hibernate versions) it was possible to get access to the cache programmaticly and print out its content from there."},{"owner":{"account_id":15956467,"reputation":4079,"user_id":11514534,"display_name":"second"},"score":0,"creation_date":1565020682,"post_id":57356989,"comment_id":101210901,"body_markdown":"If you do please also mention the version you are using and whether you have a configuration file for it or not. If not name what provider and what version you are using.","body":"If you do please also mention the version you are using and whether you have a configuration file for it or not. If not name what provider and what version you are using."}],"answers":[{"tags":[],"owner":{"account_id":2471552,"reputation":2062,"user_id":2153273,"accept_rate":67,"display_name":"lbenedetto"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679503701,"creation_date":1679503701,"answer_id":75815079,"question_id":57356989,"body_markdown":"Sure you can, if you&#39;re ok with a little reflection to access private fields. This is how I did it. getQueryPlanCacheDump() returns a list of strings representing the cached queries, the other information stored in the cache is discarded (its likely not necessary for diagnosing your issue)\r\n\r\nWhen I did it, I found that my cache was filling up due to the `IN` clause caching a new query plan each time they query was used with a different number of parameters.\r\n\r\n```java\r\n  private final EntityManagerFactory entityManagerFactory;\r\n\r\n  public List&lt;String&gt; getQueryPlanCacheDump() {\r\n    try (var session = entityManagerFactory.createEntityManager().unwrap(Session.class)) {\r\n      var sessionFactory = (SessionFactoryImpl) session.getSessionFactory();\r\n      return getQueryList(sessionFactory);\r\n    }\r\n  }\r\n\r\n  private List&lt;String&gt; getQueryList(SessionFactoryImpl sessionFactory) {\r\n    BoundedConcurrentHashMap&lt;?, ?&gt; queryPlanCache = getQueryPlanCache(sessionFactory);\r\n    var queries = new ArrayList&lt;String&gt;();\r\n    try {\r\n      var hqlQueryPlanKeyClazz = Class.forName(&quot;org.hibernate.engine.query.spi.QueryPlanCache$HQLQueryPlanKey&quot;);\r\n      var filterQueryPlanKeyClazz = Class.forName(&quot;org.hibernate.engine.query.spi.QueryPlanCache$FilterQueryPlanKey&quot;);\r\n      queryPlanCache.forEach((key, value) -&gt; {\r\n        // The cache contains 3 different types of keys\r\n        if (key instanceof NativeSQLQuerySpecification nativeSql) {\r\n          queries.add(nativeSql.getQueryString());\r\n        } else if (hqlQueryPlanKeyClazz.isInstance(key)) {\r\n          queries.add(getQuery(hqlQueryPlanKeyClazz, key));\r\n        } else if (filterQueryPlanKeyClazz.isInstance(key)) {\r\n          queries.add(getQuery(filterQueryPlanKeyClazz, key));\r\n        }\r\n      });\r\n    } catch (Exception e) {\r\n      // If Hibernate adds more key types in the future, return all the key types instead so you can investigate adding support for them\r\n      var keyClasses = new HashSet&lt;String&gt;();\r\n      queryPlanCache.forEach((key, value) -&gt; keyClasses.add(key.getClass().toString()));\r\n      return keyClasses.stream().toList();\r\n    }\r\n    return queries;\r\n  }\r\n\r\n  private String getQuery(Class&lt;?&gt; clazz, Object key) {\r\n    try {\r\n      var queryField = clazz.getDeclaredField(&quot;query&quot;);\r\n      queryField.setAccessible(true);\r\n      return (String) queryField.get(key);\r\n    } catch (IllegalAccessException | NoSuchFieldException e) {\r\n      throw new IllegalStateException(e);\r\n    }\r\n  }\r\n\r\n  private BoundedConcurrentHashMap&lt;?, ?&gt; getQueryPlanCache(SessionFactoryImpl sessionFactory) {\r\n    try {\r\n      var queryPlanCacheField = QueryPlanCache.class.getDeclaredField(&quot;queryPlanCache&quot;);\r\n      queryPlanCacheField.setAccessible(true);\r\n      return (BoundedConcurrentHashMap&lt;?, ?&gt;) queryPlanCacheField.get(sessionFactory.getQueryPlanCache());\r\n    } catch (IllegalAccessException | NoSuchFieldException e) {\r\n      throw new IllegalStateException(e);\r\n    }\r\n  }\r\n```","title":"Is it possible, to see hibernate`s queryPlanCache contents?","body":"<p>Sure you can, if you're ok with a little reflection to access private fields. This is how I did it. getQueryPlanCacheDump() returns a list of strings representing the cached queries, the other information stored in the cache is discarded (its likely not necessary for diagnosing your issue)</p>\n<p>When I did it, I found that my cache was filling up due to the <code>IN</code> clause caching a new query plan each time they query was used with a different number of parameters.</p>\n<pre class=\"lang-java prettyprint-override\"><code>  private final EntityManagerFactory entityManagerFactory;\n\n  public List&lt;String&gt; getQueryPlanCacheDump() {\n    try (var session = entityManagerFactory.createEntityManager().unwrap(Session.class)) {\n      var sessionFactory = (SessionFactoryImpl) session.getSessionFactory();\n      return getQueryList(sessionFactory);\n    }\n  }\n\n  private List&lt;String&gt; getQueryList(SessionFactoryImpl sessionFactory) {\n    BoundedConcurrentHashMap&lt;?, ?&gt; queryPlanCache = getQueryPlanCache(sessionFactory);\n    var queries = new ArrayList&lt;String&gt;();\n    try {\n      var hqlQueryPlanKeyClazz = Class.forName(&quot;org.hibernate.engine.query.spi.QueryPlanCache$HQLQueryPlanKey&quot;);\n      var filterQueryPlanKeyClazz = Class.forName(&quot;org.hibernate.engine.query.spi.QueryPlanCache$FilterQueryPlanKey&quot;);\n      queryPlanCache.forEach((key, value) -&gt; {\n        // The cache contains 3 different types of keys\n        if (key instanceof NativeSQLQuerySpecification nativeSql) {\n          queries.add(nativeSql.getQueryString());\n        } else if (hqlQueryPlanKeyClazz.isInstance(key)) {\n          queries.add(getQuery(hqlQueryPlanKeyClazz, key));\n        } else if (filterQueryPlanKeyClazz.isInstance(key)) {\n          queries.add(getQuery(filterQueryPlanKeyClazz, key));\n        }\n      });\n    } catch (Exception e) {\n      // If Hibernate adds more key types in the future, return all the key types instead so you can investigate adding support for them\n      var keyClasses = new HashSet&lt;String&gt;();\n      queryPlanCache.forEach((key, value) -&gt; keyClasses.add(key.getClass().toString()));\n      return keyClasses.stream().toList();\n    }\n    return queries;\n  }\n\n  private String getQuery(Class&lt;?&gt; clazz, Object key) {\n    try {\n      var queryField = clazz.getDeclaredField(&quot;query&quot;);\n      queryField.setAccessible(true);\n      return (String) queryField.get(key);\n    } catch (IllegalAccessException | NoSuchFieldException e) {\n      throw new IllegalStateException(e);\n    }\n  }\n\n  private BoundedConcurrentHashMap&lt;?, ?&gt; getQueryPlanCache(SessionFactoryImpl sessionFactory) {\n    try {\n      var queryPlanCacheField = QueryPlanCache.class.getDeclaredField(&quot;queryPlanCache&quot;);\n      queryPlanCacheField.setAccessible(true);\n      return (BoundedConcurrentHashMap&lt;?, ?&gt;) queryPlanCacheField.get(sessionFactory.getQueryPlanCache());\n    } catch (IllegalAccessException | NoSuchFieldException e) {\n      throw new IllegalStateException(e);\n    }\n  }\n</code></pre>\n"}],"owner":{"account_id":4134073,"reputation":31,"user_id":3391093,"display_name":"Anton K."},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":726,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1679503701,"creation_date":1565001896,"question_id":57356989,"body_markdown":"I got memory leak problem with queryPlaneCache in Hibernate 5.2.10.Final. I found information about leak troubles with IN() queries and marked them with setCacheable(false). Leak decreased, but not dissapeared. \r\n\r\nI tried decrase **hibernate.query.plan_cache_max_size** and turn off caching (**hibernate.cache.use_query_cache**). It helps, but i think this is no right solution. I want mark some problem queries as setCacheable(false) and save cache mechanism in good work, but don`t have some things about trouble queries. \r\n\r\nBy this reason i want dump a queryPlaneCache content for see concrete SQL queries and found source of problem. Is it possible?","title":"Is it possible, to see hibernate`s queryPlanCache contents?","body":"<p>I got memory leak problem with queryPlaneCache in Hibernate 5.2.10.Final. I found information about leak troubles with IN() queries and marked them with setCacheable(false). Leak decreased, but not dissapeared. </p>\n\n<p>I tried decrase <strong>hibernate.query.plan_cache_max_size</strong> and turn off caching (<strong>hibernate.cache.use_query_cache</strong>). It helps, but i think this is no right solution. I want mark some problem queries as setCacheable(false) and save cache mechanism in good work, but don`t have some things about trouble queries. </p>\n\n<p>By this reason i want dump a queryPlaneCache content for see concrete SQL queries and found source of problem. Is it possible?</p>\n"},{"tags":["java","intellij-14"],"owner":{"account_id":5217289,"reputation":13,"user_id":4171819,"display_name":"akhila np"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":65,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679503679,"creation_date":1679503679,"question_id":75815071,"body_markdown":"   I am getting build error. I tried installing a newer version on intellij, but still getting the same error. Not understanding what is happening.I am ruuning intellij 2022.3.1. and this is a maven project.\r\nthe line  &quot;at org.codehaus.plexus.archiver.AbstractArchiver$1.hasNext&quot; \r\nhas been repeated 500 times.\r\n\r\n\r\n     Exception in thread &quot;main&quot; java.lang.StackOverflowError\r\n        \tat java.lang.ThreadLocal.get(ThreadLocal.java:161)\r\n        \tat org.fusesource.jansi.Ansi.isEnabled(Ansi.java:172)\r\n        \tat org.fusesource.jansi.Ansi.ansi(Ansi.java:192)\r\n        \tat org.apache.maven.shared.utils.logging.AnsiMessageBuilder.&lt;init&gt;`(AnsiMessageBuilder.java:45)\r\n        \tat org.apache.maven.shared.utils.logging.MessageUtils.level(MessageUtils.java:163)\r\n        \tat org.slf4j.impl.MavenSimpleLogger.renderLevel(MavenSimpleLogger.java:50)\r\n        \tat org.slf4j.impl.SimpleLogger.log(SimpleLogger.java:277)\r\n        \tat org.slf4j.impl.SimpleLogger.info(SimpleLogger.java:480)\r\n        \tat org.apache.maven.cli.logging.Slf4jLogger.info(Slf4jLogger.java:59)\r\n        \tat org.codehaus.plexus.archiver.AbstractArchiver$1.hasNext(AbstractArchiver.java:464)\r\n        \tat org.codehaus.plexus.archiver.AbstractArchiver$1.hasNext(AbstractArchiver.java:467)\r\n        \tat org.codehaus.plexus.archiver.AbstractArchiver$1.hasNext(AbstractArchiver.java:467)\r\n        \tat org.codehaus.plexus.archiver.AbstractArchiver$1.hasNext(AbstractArchiver.java:467)\r\n        \tat org.codehaus.plexus.archiver.AbstractArchiver$1.hasNext(AbstractArchiver.java:467)\r\n        \tat org.codehaus.plexus.archiver.AbstractArchiver$1.hasNext(AbstractArchiver.java:467)\r\n        \tat org.codehaus.plexus.archiver.AbstractArchiver$1.hasNext(AbstractArchiver.java:467)\r\n        \tat org.codehaus.plexus.archiver.AbstractArchiver$1.hasNext(AbstractArchiver.java:467)\r\n        \tat org.codehaus.plexus.archiver.AbstractArchiver$1.hasNext(AbstractArchiver.java:467)\r\n        \tat org.codehaus.plexus.archiver.AbstractArchiver$1.hasNext(AbstractArchiver.java:467)\r\n        \tat org.codehaus.plexus.archiver.AbstractArchiver$1.hasNext(AbstractArchiver.java:467)\r\n        \tat org.codehaus.plexus.archiver.AbstractArchiver$1.hasNext(AbstractArchiver.java:467)\r\n        \tat org.codehaus.plexus.archiver.AbstractArchiver$1.hasNext(AbstractArchiver.java:467)\r\n        \tat org.codehaus.plexus.archiver.AbstractArchiver$1.hasNext(AbstractArchiver.java:467)\r\n        \tat org.codehaus.plexus.archiver.AbstractArchiver$1.hasNext(AbstractArchiver.java:467)\r\n        \tat org.codehaus.plexus.archiver.AbstractArchiver$1.hasNext(AbstractArchiver.java:467)\r\n        \tat org.codehaus.plexus.archiver.AbstractArchiver$1.hasNext(AbstractArchiver.java:467)\r\n        \tat org.codehaus.plexus.archiver.AbstractArchiver$1.hasNext(AbstractArchiver.java:467)\r\n        \tat org.codehaus.plexus.archiver.AbstractArchiver$1.hasNext(AbstractArchiver.java:467)\r\n        \tat org.codehaus.plexus.archiver.AbstractArchiver$1.hasNext(AbstractArchiver.java:467)\r\n        \tat org.codehaus.plexus.archiver.AbstractArchiver$1.hasNext(AbstractArchiver.java:467)\r\n        \tat org.codehaus.plexus.archiver.AbstractArchiver$1.hasNext(AbstractArchiver.java:467)\r\n        \tat org.codehaus.plexus.archiver.AbstractArchiver$1.hasNext(AbstractArchiver.java:467)\r\n        \tat org.codehaus.plexus.archiver.AbstractArchiver$1.hasNext(AbstractArchiver.java:467)\r\n        \tat org.codehaus.plexus.archiver.AbstractArchiver$1.hasNext(AbstractArchiver.java:467)\r\n        \tat org.codehaus.plexus.archiver.AbstractArchiver$1.hasNext(AbstractArchiver.java:467)\r\n        \tat org.codehaus.plexus.archiver.AbstractArchiver$1.hasNext(AbstractArchiver.java:467)\r\n        \tat org.codehaus.plexus.archiver.AbstractArchiver$1.hasNext(AbstractArchiver.java:467)\r\n        \tat org.codehaus.plexus.archiver.AbstractArchiver$1.hasNext(AbstractArchiver.java:467)\r\n        \tat org.codehaus.plexus.archiver.AbstractArchiver$1.hasNext(AbstractArchiver.java:467)\r\n        \tat org.codehaus.plexus.archiver.AbstractArchiver$1.hasNext(AbstractArchiver.java:467)\r\n\r\n","title":"Error in maven clean install in intellij. I tried everything possible, but I am not understanding why this error comes on jenkins build","body":"<p>I am getting build error. I tried installing a newer version on intellij, but still getting the same error. Not understanding what is happening.I am ruuning intellij 2022.3.1. and this is a maven project.\nthe line  &quot;at org.codehaus.plexus.archiver.AbstractArchiver$1.hasNext&quot;\nhas been repeated 500 times.</p>\n<pre><code> Exception in thread &quot;main&quot; java.lang.StackOverflowError\n        at java.lang.ThreadLocal.get(ThreadLocal.java:161)\n        at org.fusesource.jansi.Ansi.isEnabled(Ansi.java:172)\n        at org.fusesource.jansi.Ansi.ansi(Ansi.java:192)\n        at org.apache.maven.shared.utils.logging.AnsiMessageBuilder.&lt;init&gt;`(AnsiMessageBuilder.java:45)\n        at org.apache.maven.shared.utils.logging.MessageUtils.level(MessageUtils.java:163)\n        at org.slf4j.impl.MavenSimpleLogger.renderLevel(MavenSimpleLogger.java:50)\n        at org.slf4j.impl.SimpleLogger.log(SimpleLogger.java:277)\n        at org.slf4j.impl.SimpleLogger.info(SimpleLogger.java:480)\n        at org.apache.maven.cli.logging.Slf4jLogger.info(Slf4jLogger.java:59)\n        at org.codehaus.plexus.archiver.AbstractArchiver$1.hasNext(AbstractArchiver.java:464)\n        at org.codehaus.plexus.archiver.AbstractArchiver$1.hasNext(AbstractArchiver.java:467)\n        at org.codehaus.plexus.archiver.AbstractArchiver$1.hasNext(AbstractArchiver.java:467)\n        at org.codehaus.plexus.archiver.AbstractArchiver$1.hasNext(AbstractArchiver.java:467)\n        at org.codehaus.plexus.archiver.AbstractArchiver$1.hasNext(AbstractArchiver.java:467)\n        at org.codehaus.plexus.archiver.AbstractArchiver$1.hasNext(AbstractArchiver.java:467)\n        at org.codehaus.plexus.archiver.AbstractArchiver$1.hasNext(AbstractArchiver.java:467)\n        at org.codehaus.plexus.archiver.AbstractArchiver$1.hasNext(AbstractArchiver.java:467)\n        at org.codehaus.plexus.archiver.AbstractArchiver$1.hasNext(AbstractArchiver.java:467)\n        at org.codehaus.plexus.archiver.AbstractArchiver$1.hasNext(AbstractArchiver.java:467)\n        at org.codehaus.plexus.archiver.AbstractArchiver$1.hasNext(AbstractArchiver.java:467)\n        at org.codehaus.plexus.archiver.AbstractArchiver$1.hasNext(AbstractArchiver.java:467)\n        at org.codehaus.plexus.archiver.AbstractArchiver$1.hasNext(AbstractArchiver.java:467)\n        at org.codehaus.plexus.archiver.AbstractArchiver$1.hasNext(AbstractArchiver.java:467)\n        at org.codehaus.plexus.archiver.AbstractArchiver$1.hasNext(AbstractArchiver.java:467)\n        at org.codehaus.plexus.archiver.AbstractArchiver$1.hasNext(AbstractArchiver.java:467)\n        at org.codehaus.plexus.archiver.AbstractArchiver$1.hasNext(AbstractArchiver.java:467)\n        at org.codehaus.plexus.archiver.AbstractArchiver$1.hasNext(AbstractArchiver.java:467)\n        at org.codehaus.plexus.archiver.AbstractArchiver$1.hasNext(AbstractArchiver.java:467)\n        at org.codehaus.plexus.archiver.AbstractArchiver$1.hasNext(AbstractArchiver.java:467)\n        at org.codehaus.plexus.archiver.AbstractArchiver$1.hasNext(AbstractArchiver.java:467)\n        at org.codehaus.plexus.archiver.AbstractArchiver$1.hasNext(AbstractArchiver.java:467)\n        at org.codehaus.plexus.archiver.AbstractArchiver$1.hasNext(AbstractArchiver.java:467)\n        at org.codehaus.plexus.archiver.AbstractArchiver$1.hasNext(AbstractArchiver.java:467)\n        at org.codehaus.plexus.archiver.AbstractArchiver$1.hasNext(AbstractArchiver.java:467)\n        at org.codehaus.plexus.archiver.AbstractArchiver$1.hasNext(AbstractArchiver.java:467)\n        at org.codehaus.plexus.archiver.AbstractArchiver$1.hasNext(AbstractArchiver.java:467)\n        at org.codehaus.plexus.archiver.AbstractArchiver$1.hasNext(AbstractArchiver.java:467)\n        at org.codehaus.plexus.archiver.AbstractArchiver$1.hasNext(AbstractArchiver.java:467)\n        at org.codehaus.plexus.archiver.AbstractArchiver$1.hasNext(AbstractArchiver.java:467)\n        at org.codehaus.plexus.archiver.AbstractArchiver$1.hasNext(AbstractArchiver.java:467)\n</code></pre>\n"},{"tags":["java","spring","lombok"],"comments":[{"owner":{"account_id":39208,"reputation":251240,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"score":0,"creation_date":1679500311,"post_id":75814478,"comment_id":133734067,"body_markdown":"Reflection and proxies come to mind","body":"Reflection and proxies come to mind"},{"owner":{"account_id":1203915,"reputation":10209,"user_id":1174024,"accept_rate":85,"display_name":"Nicholas DiPiazza"},"score":0,"creation_date":1679503516,"post_id":75814478,"comment_id":133735038,"body_markdown":"i&#39;m thinking there is no library that can do this unless maybe Lombok, maven plugin etc because it is a compile time ask","body":"i&#39;m thinking there is no library that can do this unless maybe Lombok, maven plugin etc because it is a compile time ask"},{"owner":{"account_id":39208,"reputation":251240,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"score":0,"creation_date":1679511017,"post_id":75814478,"comment_id":133736893,"body_markdown":"Proxies can be generated at runtime. Using a `@Configuration` with `@Bean` annotated methods can then return the correct proxy.","body":"Proxies can be generated at runtime. Using a <code>@Configuration</code> with <code>@Bean</code> annotated methods can then return the correct proxy."},{"owner":{"account_id":1203915,"reputation":10209,"user_id":1174024,"accept_rate":85,"display_name":"Nicholas DiPiazza"},"score":0,"creation_date":1679512866,"post_id":75814478,"comment_id":133737309,"body_markdown":"runtime proxy does not solve this issue, unless i&#39;m missing something","body":"runtime proxy does not solve this issue, unless i&#39;m missing something"},{"owner":{"account_id":39208,"reputation":251240,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"score":0,"creation_date":1679513511,"post_id":75814478,"comment_id":133737468,"body_markdown":"Why not? With reflection, you get references to all methods in your util class(es) and store them in a collection/map. Then you generate the proxy and have it delegate the calls to the methods of the util class. Nevermind, I just realized that a dynamic proxy requires an interface to implement. Forget what I said. Sorry for wasting your time","body":"Why not? With reflection, you get references to all methods in your util class(es) and store them in a collection/map. Then you generate the proxy and have it delegate the calls to the methods of the util class. Nevermind, I just realized that a dynamic proxy requires an interface to implement. Forget what I said. Sorry for wasting your time"}],"owner":{"account_id":1203915,"reputation":10209,"user_id":1174024,"accept_rate":85,"display_name":"Nicholas DiPiazza"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":56,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679503632,"creation_date":1679500058,"question_id":75814478,"body_markdown":"I have a legacy static class that has a bunch of static methods:\r\n\r\n```\r\npublic class Util {\r\n   public static void op1(String param_string) {\r\n      System.out.println(&quot;op1 &quot; + param_string);\r\n   }\r\n\r\n   public static void op2(int param_int) {\r\n      System.out.println(&quot;op2 &quot; + param_int);\r\n   }\r\n}\r\n```\r\n\r\nOur unit tests are much better when we don&#39;t deal with statics! \r\n\r\nSo we would like to create a spring bean that basically just acts as a proxy to this so we can `@Autowire` it and not deal with static methods:\r\n\r\n\r\n```\r\n@Component\r\npublic class UtilBean {\r\n   public void op1(String param_string) {\r\n     Util.op1(param_string);\r\n   }\r\n\r\n   public void op2(int param_int) {\r\n     Util.op2(param_int);\r\n   }\r\n}\r\n```\r\n\r\nIn my case, there are like 40 classes and I&#39;m looking for a way to make this easier.\r\n\r\nIs there some way to do this without having to type out each one? \r\n\r\nTo rephrase the question: Is there some way to automatically generate a spring bean from a static Java utility class? \r\n\r\nIs there some way to use Lombok to do this? ","title":"Is there a way to automatically generate a Spring Bean from a static Java utility class?","body":"<p>I have a legacy static class that has a bunch of static methods:</p>\n<pre><code>public class Util {\n   public static void op1(String param_string) {\n      System.out.println(&quot;op1 &quot; + param_string);\n   }\n\n   public static void op2(int param_int) {\n      System.out.println(&quot;op2 &quot; + param_int);\n   }\n}\n</code></pre>\n<p>Our unit tests are much better when we don't deal with statics!</p>\n<p>So we would like to create a spring bean that basically just acts as a proxy to this so we can <code>@Autowire</code> it and not deal with static methods:</p>\n<pre><code>@Component\npublic class UtilBean {\n   public void op1(String param_string) {\n     Util.op1(param_string);\n   }\n\n   public void op2(int param_int) {\n     Util.op2(param_int);\n   }\n}\n</code></pre>\n<p>In my case, there are like 40 classes and I'm looking for a way to make this easier.</p>\n<p>Is there some way to do this without having to type out each one?</p>\n<p>To rephrase the question: Is there some way to automatically generate a spring bean from a static Java utility class?</p>\n<p>Is there some way to use Lombok to do this?</p>\n"},{"tags":["java","android","progress-bar"],"answers":[{"tags":[],"owner":{"account_id":6160961,"reputation":1184,"user_id":4802589,"display_name":"Karan Dhillon"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1587477666,"creation_date":1587477666,"answer_id":61345415,"question_id":61345052,"body_markdown":"You should not set the progressBar visibility after you start a new activity. The simplest thing you can do is use a flag variable to hold the state of your progress bar. \r\n    \r\n    startActivity(intent);\r\n    progressBar.setVisibility(View.GONE); // should be avoided\r\n\r\nSOLUTION:\r\n\r\n    private ProgressBar progressBar;\r\n    String progressBarState = &quot;empty&quot;\r\n    String PROGRESS_BAR_LOADING = &quot;LOADING&quot;\r\n    String PROGRESS_BAR_LOADED = &quot;LOADED&quot;\r\n    \r\n    mhelp = (LinearLayout) root.findViewById(R.id.lythelp);\r\n     \r\n    mhelp.setOnClickListener(new View.OnClickListener() {\r\n    @Override\r\n    public void onClick(View v) {\r\n    if(PROGRESS_BAR_LOADING == &quot;LOADING&quot;)\r\n      progressBar.setVisibility(View.VISIBLE);\r\n      \r\n      Intent intent = new Intent(getActivity(), Help.class);\r\n      startActivity(intent);\r\n    }\r\n\r\nInside HelpActivity (or whatever activity you want to start):\r\n    \r\n    override onCreate(): void {\r\n      /*\r\n      * You will need a progress bar on this activity&#39;s view \r\n      * as well if you are transitioning between activities and\r\n      * want to maintain the progress.\r\n      */\r\n\r\n      progressBar.setVisibility(View.GONE);\r\n\r\n      /*\r\n      * You can pass the progress between the activities by\r\n      * passing the completion rate through the bundle that is\r\n      * sent through the activities.\r\n      * You can also add a  key value pair for the progress bar&#39;s\r\n      * current state in that bundle and check for that state in the\r\n      * onCreate.\r\n      */\r\n    }\r\n","title":"progressBar.setVisibility(View.GONE); Is there anybody please tell where i can use Progressbar gone after stop loading","body":"<p>You should not set the progressBar visibility after you start a new activity. The simplest thing you can do is use a flag variable to hold the state of your progress bar. </p>\n\n<pre><code>startActivity(intent);\nprogressBar.setVisibility(View.GONE); // should be avoided\n</code></pre>\n\n<p>SOLUTION:</p>\n\n<pre><code>private ProgressBar progressBar;\nString progressBarState = \"empty\"\nString PROGRESS_BAR_LOADING = \"LOADING\"\nString PROGRESS_BAR_LOADED = \"LOADED\"\n\nmhelp = (LinearLayout) root.findViewById(R.id.lythelp);\n\nmhelp.setOnClickListener(new View.OnClickListener() {\n@Override\npublic void onClick(View v) {\nif(PROGRESS_BAR_LOADING == \"LOADING\")\n  progressBar.setVisibility(View.VISIBLE);\n\n  Intent intent = new Intent(getActivity(), Help.class);\n  startActivity(intent);\n}\n</code></pre>\n\n<p>Inside HelpActivity (or whatever activity you want to start):</p>\n\n<pre><code>override onCreate(): void {\n  /*\n  * You will need a progress bar on this activity's view \n  * as well if you are transitioning between activities and\n  * want to maintain the progress.\n  */\n\n  progressBar.setVisibility(View.GONE);\n\n  /*\n  * You can pass the progress between the activities by\n  * passing the completion rate through the bundle that is\n  * sent through the activities.\n  * You can also add a  key value pair for the progress bar's\n  * current state in that bundle and check for that state in the\n  * onCreate.\n  */\n}\n</code></pre>\n"}],"owner":{"account_id":16738743,"reputation":13,"user_id":12099066,"display_name":"Gaurishankar Poonia"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":133,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":61345415,"answer_count":1,"score":1,"last_activity_date":1679503594,"creation_date":1587476622,"question_id":61345052,"body_markdown":"I&#39;m new in Java Android Development &amp; I was trying to develop something but I have to use the progress bar in WebView but I don&#39;t know How I have to use code stop progress bar after completed loading. \r\n\r\n        private ProgressBar progressBar;\r\n    \r\n       mhelp = (LinearLayout) root.findViewById(R.id.lythelp);\r\n                    mhelp.setOnClickListener(new View.OnClickListener() {\r\n                        @Override\r\n                        public void onClick(View v) {\r\n                            progressBar.setVisibility(View.VISIBLE);\r\n                            Intent intent = new Intent(getActivity(), Help.class);\r\n                            startActivity(intent);\r\n    progressBar.setVisibility(View.GONE);\r\n    \r\n    \r\n                        }\r\n                    });","title":"progressBar.setVisibility(View.GONE); Is there anybody please tell where i can use Progressbar gone after stop loading","body":"<p>I'm new in Java Android Development &amp; I was trying to develop something but I have to use the progress bar in WebView but I don't know How I have to use code stop progress bar after completed loading. </p>\n\n<pre><code>    private ProgressBar progressBar;\n\n   mhelp = (LinearLayout) root.findViewById(R.id.lythelp);\n                mhelp.setOnClickListener(new View.OnClickListener() {\n                    @Override\n                    public void onClick(View v) {\n                        progressBar.setVisibility(View.VISIBLE);\n                        Intent intent = new Intent(getActivity(), Help.class);\n                        startActivity(intent);\nprogressBar.setVisibility(View.GONE);\n\n\n                    }\n                });\n</code></pre>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":22450291,"reputation":364,"user_id":16653700,"display_name":"Alias Cartellano"},"score":0,"creation_date":1679505966,"post_id":75815042,"comment_id":133735673,"body_markdown":"Try looking at [NotificationListener](https://developer.android.com/reference/android/service/notification/NotificationListenerService.html).","body":"Try looking at <a href=\"https://developer.android.com/reference/android/service/notification/NotificationListenerService.html\" rel=\"nofollow noreferrer\">NotificationListener</a>."}],"owner":{"account_id":28082484,"reputation":1,"user_id":21453337,"display_name":"ThehighWizard"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":69,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679503487,"creation_date":1679503487,"question_id":75815042,"body_markdown":"Heres what i got so far\r\n\r\n\r\npublic class MainActivity extends AppCompatActivity {\r\n\r\n    private List&lt;AppList&gt; installedApps;\r\n    private AppAdapter installedAppAdapter;\r\n    ListView userInstalledApps;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n\r\n        userInstalledApps = (ListView) findViewById(R.id.installed_app_list);\r\n\r\n        installedApps = getInstalledApps();\r\n        installedAppAdapter = new AppAdapter(MainActivity.this, installedApps);\r\n        userInstalledApps.setAdapter(installedAppAdapter);\r\n        userInstalledApps.setOnItemClickListener(new AdapterView.OnItemClickListener() {\r\n            @Override\r\n            public void onItemClick(AdapterView&lt;?&gt; adapterView, View view, final int i, long l) {\r\n\r\n                String[] colors = {&quot; Open App&quot;, &quot; App Info&quot;, &quot; enable notification listening&quot;};\r\n                AlertDialog.Builder builder = new AlertDialog.Builder(MainActivity.this);\r\n                builder.setTitle(&quot;Choose Action&quot;)\r\n                        .setItems(colors, new DialogInterface.OnClickListener() {\r\n                            public void onClick(DialogInterface dialog, int which) {\r\n                                // The &#39;which&#39; argument contains the index position of the selected item\r\n                                if (which==0){\r\n                                    Intent intent = getPackageManager().getLaunchIntentForPackage(installedApps.get(i).packages);\r\n                                    if(intent != null){\r\n                                        startActivity(intent);\r\n                                    }\r\n                                    else {\r\n                                        Toast.makeText(MainActivity.this, installedApps.get(i).packages + &quot; Error, Please Try Again...&quot;, Toast.LENGTH_SHORT).show();\r\n                                    }\r\n                                }\r\n                                if (which==1){\r\n                                    Intent intent = new Intent(android.provider.Settings.ACTION_APPLICATION_DETAILS_SETTINGS);\r\n                                    intent.setData(Uri.parse(&quot;package:&quot; + installedApps.get(i).packages));\r\n                                    Toast.makeText(MainActivity.this, installedApps.get(i).packages, Toast.LENGTH_SHORT).show();\r\n                                    startActivity(intent);\r\n                                }\r\n\r\n                                //heres the button for any given app\r\n\r\n**i need something that will allow me click here to select given app for notification listening and export the app name to a broadcast reciever where the reciever waits for an notification for given app then does a function** left it blank lots of errors so im stuck.\r\n\r\n                                if (which==2){\r\n\r\n                                }\r\n                            }\r\n                        });\r\n                builder.show();\r\n\r\n            }\r\n        });\r\n\r\n        //Total Number of Installed-Apps(i.e. List Size)\r\n        String  abc = userInstalledApps.getCount()+&quot;&quot;;\r\n        TextView countApps = (TextView)findViewById(R.id.countApps);\r\n        countApps.setText(&quot;Total Installed Apps: &quot;+abc);\r\n        Toast.makeText(this, abc+&quot; Apps&quot;, Toast.LENGTH_SHORT).show();\r\n\r\n    }\r\n\r\n    private List&lt;AppList&gt; getInstalledApps() {\r\n        PackageManager pm = getPackageManager();\r\n        List&lt;AppList&gt; apps = new ArrayList&lt;AppList&gt;();\r\n        List&lt;PackageInfo&gt; packs = getPackageManager().getInstalledPackages(0);\r\n        //List&lt;PackageInfo&gt; packs = getPackageManager().getInstalledPackages(PackageManager.GET_PERMISSIONS);\r\n        for (int i = 0; i &lt; packs.size(); i++) {\r\n            PackageInfo p = packs.get(i);\r\n            if ((!isSystemPackage(p))) {\r\n                String appName = p.applicationInfo.loadLabel(getPackageManager()).toString();\r\n                Drawable icon = p.applicationInfo.loadIcon(getPackageManager());\r\n                String packages = p.applicationInfo.packageName;\r\n                apps.add(new AppList(appName, icon, packages));\r\n            }\r\n        }\r\n        return apps;\r\n    }\r\n\r\n    private boolean isSystemPackage(PackageInfo pkgInfo) {\r\n        return (pkgInfo.applicationInfo.flags &amp; ApplicationInfo.FLAG_SYSTEM) != 0;\r\n    }\r\n\r\n    public class AppAdapter extends BaseAdapter {\r\n\r\n        public LayoutInflater layoutInflater;\r\n        public List&lt;AppList&gt; listStorage;\r\n\r\n        public AppAdapter(Context context, List&lt;AppList&gt; customizedListView) {\r\n            layoutInflater =(LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);\r\n            listStorage = customizedListView;\r\n        }\r\n\r\n        @Override\r\n        public int getCount() {\r\n            return listStorage.size();\r\n        }\r\n\r\n        @Override\r\n        public Object getItem(int position) {\r\n            return position;\r\n        }\r\n\r\n        @Override\r\n        public long getItemId(int position) {\r\n            return position;\r\n        }\r\n\r\n        @Override\r\n        public View getView(int position, View convertView, ViewGroup parent) {\r\n\r\n            ViewHolder listViewHolder;\r\n            if(convertView == null){\r\n                listViewHolder = new ViewHolder();\r\n                convertView = layoutInflater.inflate(R.layout.installed_app_list, parent, false);\r\n\r\n                listViewHolder.textInListView = (TextView)convertView.findViewById(R.id.list_app_name);\r\n                listViewHolder.imageInListView = (ImageView)convertView.findViewById(R.id.app_icon);\r\n                listViewHolder.packageInListView=(TextView)convertView.findViewById(R.id.app_package);\r\n                convertView.setTag(listViewHolder);\r\n            }else{\r\n                listViewHolder = (ViewHolder)convertView.getTag();\r\n            }\r\n            listViewHolder.textInListView.setText(listStorage.get(position).getName());\r\n            listViewHolder.imageInListView.setImageDrawable(listStorage.get(position).getIcon());\r\n            listViewHolder.packageInListView.setText(listStorage.get(position).getPackages());\r\n\r\n            return convertView;\r\n        }\r\n\r\n        class ViewHolder{\r\n            TextView textInListView;\r\n            ImageView imageInListView;\r\n            TextView packageInListView;\r\n        }\r\n    }\r\n\r\n    public class AppList {\r\n        private String name;\r\n        Drawable icon;\r\n        private String packages;\r\n        public AppList(String name, Drawable icon, String packages) {\r\n            this.name = name;\r\n            this.icon = icon;\r\n            this.packages = packages;\r\n        }\r\n        public String getName() {\r\n            return name;\r\n        }\r\n        public Drawable getIcon() {\r\n            return icon;\r\n        }\r\n        public String getPackages() {\r\n            return packages;\r\n        }\r\n\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nas stated in the code i need help with having my selected app for notification listening of said app.\r\nany help would be much appreciated. ","title":"how to select an app to listen for a notification and give it a function i&#39;m lost","body":"<p>Heres what i got so far</p>\n<p>public class MainActivity extends AppCompatActivity {</p>\n<pre><code>private List&lt;AppList&gt; installedApps;\nprivate AppAdapter installedAppAdapter;\nListView userInstalledApps;\n\n@Override\nprotected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.activity_main);\n\n    userInstalledApps = (ListView) findViewById(R.id.installed_app_list);\n\n    installedApps = getInstalledApps();\n    installedAppAdapter = new AppAdapter(MainActivity.this, installedApps);\n    userInstalledApps.setAdapter(installedAppAdapter);\n    userInstalledApps.setOnItemClickListener(new AdapterView.OnItemClickListener() {\n        @Override\n        public void onItemClick(AdapterView&lt;?&gt; adapterView, View view, final int i, long l) {\n\n            String[] colors = {&quot; Open App&quot;, &quot; App Info&quot;, &quot; enable notification listening&quot;};\n            AlertDialog.Builder builder = new AlertDialog.Builder(MainActivity.this);\n            builder.setTitle(&quot;Choose Action&quot;)\n                    .setItems(colors, new DialogInterface.OnClickListener() {\n                        public void onClick(DialogInterface dialog, int which) {\n                            // The 'which' argument contains the index position of the selected item\n                            if (which==0){\n                                Intent intent = getPackageManager().getLaunchIntentForPackage(installedApps.get(i).packages);\n                                if(intent != null){\n                                    startActivity(intent);\n                                }\n                                else {\n                                    Toast.makeText(MainActivity.this, installedApps.get(i).packages + &quot; Error, Please Try Again...&quot;, Toast.LENGTH_SHORT).show();\n                                }\n                            }\n                            if (which==1){\n                                Intent intent = new Intent(android.provider.Settings.ACTION_APPLICATION_DETAILS_SETTINGS);\n                                intent.setData(Uri.parse(&quot;package:&quot; + installedApps.get(i).packages));\n                                Toast.makeText(MainActivity.this, installedApps.get(i).packages, Toast.LENGTH_SHORT).show();\n                                startActivity(intent);\n                            }\n\n                            //heres the button for any given app\n</code></pre>\n<p><strong>i need something that will allow me click here to select given app for notification listening and export the app name to a broadcast reciever where the reciever waits for an notification for given app then does a function</strong> left it blank lots of errors so im stuck.</p>\n<pre><code>                            if (which==2){\n\n                            }\n                        }\n                    });\n            builder.show();\n\n        }\n    });\n\n    //Total Number of Installed-Apps(i.e. List Size)\n    String  abc = userInstalledApps.getCount()+&quot;&quot;;\n    TextView countApps = (TextView)findViewById(R.id.countApps);\n    countApps.setText(&quot;Total Installed Apps: &quot;+abc);\n    Toast.makeText(this, abc+&quot; Apps&quot;, Toast.LENGTH_SHORT).show();\n\n}\n\nprivate List&lt;AppList&gt; getInstalledApps() {\n    PackageManager pm = getPackageManager();\n    List&lt;AppList&gt; apps = new ArrayList&lt;AppList&gt;();\n    List&lt;PackageInfo&gt; packs = getPackageManager().getInstalledPackages(0);\n    //List&lt;PackageInfo&gt; packs = getPackageManager().getInstalledPackages(PackageManager.GET_PERMISSIONS);\n    for (int i = 0; i &lt; packs.size(); i++) {\n        PackageInfo p = packs.get(i);\n        if ((!isSystemPackage(p))) {\n            String appName = p.applicationInfo.loadLabel(getPackageManager()).toString();\n            Drawable icon = p.applicationInfo.loadIcon(getPackageManager());\n            String packages = p.applicationInfo.packageName;\n            apps.add(new AppList(appName, icon, packages));\n        }\n    }\n    return apps;\n}\n\nprivate boolean isSystemPackage(PackageInfo pkgInfo) {\n    return (pkgInfo.applicationInfo.flags &amp; ApplicationInfo.FLAG_SYSTEM) != 0;\n}\n\npublic class AppAdapter extends BaseAdapter {\n\n    public LayoutInflater layoutInflater;\n    public List&lt;AppList&gt; listStorage;\n\n    public AppAdapter(Context context, List&lt;AppList&gt; customizedListView) {\n        layoutInflater =(LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);\n        listStorage = customizedListView;\n    }\n\n    @Override\n    public int getCount() {\n        return listStorage.size();\n    }\n\n    @Override\n    public Object getItem(int position) {\n        return position;\n    }\n\n    @Override\n    public long getItemId(int position) {\n        return position;\n    }\n\n    @Override\n    public View getView(int position, View convertView, ViewGroup parent) {\n\n        ViewHolder listViewHolder;\n        if(convertView == null){\n            listViewHolder = new ViewHolder();\n            convertView = layoutInflater.inflate(R.layout.installed_app_list, parent, false);\n\n            listViewHolder.textInListView = (TextView)convertView.findViewById(R.id.list_app_name);\n            listViewHolder.imageInListView = (ImageView)convertView.findViewById(R.id.app_icon);\n            listViewHolder.packageInListView=(TextView)convertView.findViewById(R.id.app_package);\n            convertView.setTag(listViewHolder);\n        }else{\n            listViewHolder = (ViewHolder)convertView.getTag();\n        }\n        listViewHolder.textInListView.setText(listStorage.get(position).getName());\n        listViewHolder.imageInListView.setImageDrawable(listStorage.get(position).getIcon());\n        listViewHolder.packageInListView.setText(listStorage.get(position).getPackages());\n\n        return convertView;\n    }\n\n    class ViewHolder{\n        TextView textInListView;\n        ImageView imageInListView;\n        TextView packageInListView;\n    }\n}\n\npublic class AppList {\n    private String name;\n    Drawable icon;\n    private String packages;\n    public AppList(String name, Drawable icon, String packages) {\n        this.name = name;\n        this.icon = icon;\n        this.packages = packages;\n    }\n    public String getName() {\n        return name;\n    }\n    public Drawable getIcon() {\n        return icon;\n    }\n    public String getPackages() {\n        return packages;\n    }\n\n}\n</code></pre>\n<p>as stated in the code i need help with having my selected app for notification listening of said app.\nany help would be much appreciated.</p>\n"},{"tags":["java","multithreading","concurrency","locking","synchronized"],"comments":[{"owner":{"account_id":1114067,"reputation":196781,"user_id":1103872,"accept_rate":82,"display_name":"Marko Topolnik"},"score":1,"creation_date":1396254923,"post_id":22756940,"comment_id":34690092,"body_markdown":"Indeed they don&#39;t, and that applies to intrinsic locks and `Lock` objects alike.","body":"Indeed they don&#39;t, and that applies to intrinsic locks and <code>Lock</code> objects alike."},{"owner":{"account_id":1114067,"reputation":196781,"user_id":1103872,"accept_rate":82,"display_name":"Marko Topolnik"},"score":0,"creation_date":1396255026,"post_id":22756940,"comment_id":34690145,"body_markdown":"Since &quot;sequential&quot; is the opposite of &quot;concurrent&quot;, clearly multithreading is not there to do sequential work. Need sequential? Use one thread.","body":"Since &quot;sequential&quot; is the opposite of &quot;concurrent&quot;, clearly multithreading is not there to do sequential work. Need sequential? Use one thread."},{"owner":{"account_id":3163862,"reputation":36940,"user_id":2674303,"accept_rate":62,"display_name":"gstackoverflow"},"score":0,"creation_date":1396255118,"post_id":22756940,"comment_id":34690209,"body_markdown":"Is it possible to show it an simple example?","body":"Is it possible to show it an simple example?"},{"owner":{"account_id":1114067,"reputation":196781,"user_id":1103872,"accept_rate":82,"display_name":"Marko Topolnik"},"score":0,"creation_date":1396255235,"post_id":22756940,"comment_id":34690284,"body_markdown":"Nondeterministic behavior is notoriously difficult to reliably demonstrate.","body":"Nondeterministic behavior is notoriously difficult to reliably demonstrate."},{"owner":{"account_id":3163862,"reputation":36940,"user_id":2674303,"accept_rate":62,"display_name":"gstackoverflow"},"score":0,"creation_date":1396255317,"post_id":22756940,"comment_id":34690318,"body_markdown":"@Marko Topolnik I think although Thread.sleep makes not guarantees but usually it can help in simple example.","body":"@Marko Topolnik I think although Thread.sleep makes not guarantees but usually it can help in simple example."},{"owner":{"account_id":1114067,"reputation":196781,"user_id":1103872,"accept_rate":82,"display_name":"Marko Topolnik"},"score":0,"creation_date":1396255467,"post_id":22756940,"comment_id":34690408,"body_markdown":"Perhaps you already have an idea how to demonstrate it? You have written such code already? That would be a good starting point for your question.","body":"Perhaps you already have an idea how to demonstrate it? You have written such code already? That would be a good starting point for your question."},{"owner":{"account_id":3163862,"reputation":36940,"user_id":2674303,"accept_rate":62,"display_name":"gstackoverflow"},"score":0,"creation_date":1396256625,"post_id":22756940,"comment_id":34691131,"body_markdown":"@Marko Topolnik I have problems","body":"@Marko Topolnik I have problems"},{"owner":{"account_id":3163862,"reputation":36940,"user_id":2674303,"accept_rate":62,"display_name":"gstackoverflow"},"score":0,"creation_date":1396257044,"post_id":22756940,"comment_id":34691392,"body_markdown":"@Marko Topolnik Is my test valid for synchronized?","body":"@Marko Topolnik Is my test valid for synchronized?"},{"owner":{"account_id":1114067,"reputation":196781,"user_id":1103872,"accept_rate":82,"display_name":"Marko Topolnik"},"score":0,"creation_date":1396257911,"post_id":22756940,"comment_id":34691866,"body_markdown":"Looks OK as far as I saw. Just note that the order is not *random*, it&#39;s just not specified. Random order would actually be a stronger guarantee.","body":"Looks OK as far as I saw. Just note that the order is not <i>random</i>, it&#39;s just not specified. Random order would actually be a stronger guarantee."},{"owner":{"account_id":1114067,"reputation":196781,"user_id":1103872,"accept_rate":82,"display_name":"Marko Topolnik"},"score":0,"creation_date":1396258640,"post_id":22756940,"comment_id":34692246,"body_markdown":"You can try with `new ReentrantLock(true)`. Even though *fairness* is overall no strong guarantee, it will probably make your toy example show ordered lock acquisition.","body":"You can try with <code>new ReentrantLock(true)</code>. Even though <i>fairness</i> is overall no strong guarantee, it will probably make your toy example show ordered lock acquisition."},{"owner":{"account_id":3163862,"reputation":36940,"user_id":2674303,"accept_rate":62,"display_name":"gstackoverflow"},"score":0,"creation_date":1396261637,"post_id":22756940,"comment_id":34694008,"body_markdown":"@Marko Topolnik it is not help me","body":"@Marko Topolnik it is not help me"},{"owner":{"account_id":3163862,"reputation":36940,"user_id":2674303,"accept_rate":62,"display_name":"gstackoverflow"},"score":0,"creation_date":1396261811,"post_id":22756940,"comment_id":34694108,"body_markdown":"@Marko Topolnik I have updated code and result","body":"@Marko Topolnik I have updated code and result"},{"owner":{"account_id":1114067,"reputation":196781,"user_id":1103872,"accept_rate":82,"display_name":"Marko Topolnik"},"score":0,"creation_date":1396263145,"post_id":22756940,"comment_id":34694996,"body_markdown":"What do you mean it didn&#39;t help you? Did you actually *expect* ordered lock acquisition, and plan to rely on it? That&#39;s against the core idea of locks. If you want some tasks executed sequentially, then start rethinking your solution.","body":"What do you mean it didn&#39;t help you? Did you actually <i>expect</i> ordered lock acquisition, and plan to rely on it? That&#39;s against the core idea of locks. If you want some tasks executed sequentially, then start rethinking your solution."},{"owner":{"account_id":3163862,"reputation":36940,"user_id":2674303,"accept_rate":62,"display_name":"gstackoverflow"},"score":0,"creation_date":1396268619,"post_id":22756940,"comment_id":34698187,"body_markdown":"@ Marko Topolnik I just forgot remove **synchronized** from method test(","body":"@ Marko Topolnik I just forgot remove <b>synchronized</b> from method test("},{"owner":{"account_id":2098299,"reputation":4834,"user_id":1866587,"accept_rate":40,"display_name":"selig"},"score":0,"creation_date":1396363034,"post_id":22756940,"comment_id":34747553,"body_markdown":"If you look inside the HotSpot code the monitor set of waiting threads is implemented as a queue, so there&#39;s ordering there. But it is not guaranteed anywhere.","body":"If you look inside the HotSpot code the monitor set of waiting threads is implemented as a queue, so there&#39;s ordering there. But it is not guaranteed anywhere."}],"answers":[{"tags":[],"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"down_vote_count":4,"up_vote_count":1,"is_accepted":false,"score":-3,"last_activity_date":1396312294,"creation_date":1396255723,"answer_id":22757245,"question_id":22756940,"body_markdown":"&gt; Locks makes guarantees about the sequence in which threads waiting to entering it are granted a access?\r\n\r\nFrom the [documentation](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/Lock.html):\r\n\r\n&lt;blockquote&gt;A Lock class can also provide behavior and semantics that is quite different from that of the implicit monitor lock, such as guaranteed ordering, non-reentrant usage, or deadlock detection. If an implementation provides such specialized semantics then the implementation must document those semantics. &lt;/blockquote&gt;\r\n\r\nThere is no such documentation in any of the three `Lock` implementation classes in the JDK. There is nothing stronger than &#39;fair ordering&#39;, as an option.\r\n\r\n&gt; What I do wrong?\r\n\r\nYou didn&#39;t do anything wrong. You posted some output that showed no particular order. What&#39;s wrong with that?","title":"Does Locks make guarantees about the sequence in which threads waiting to entering it are granted access? example","body":"<blockquote>\n  <p>Locks makes guarantees about the sequence in which threads waiting to entering it are granted a access?</p>\n</blockquote>\n\n<p>From the <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/Lock.html\" rel=\"nofollow\">documentation</a>:</p>\n\n<blockquote>A Lock class can also provide behavior and semantics that is quite different from that of the implicit monitor lock, such as guaranteed ordering, non-reentrant usage, or deadlock detection. If an implementation provides such specialized semantics then the implementation must document those semantics. </blockquote>\n\n<p>There is no such documentation in any of the three <code>Lock</code> implementation classes in the JDK. There is nothing stronger than 'fair ordering', as an option.</p>\n\n<blockquote>\n  <p>What I do wrong?</p>\n</blockquote>\n\n<p>You didn't do anything wrong. You posted some output that showed no particular order. What's wrong with that?</p>\n"},{"tags":[],"owner":{"account_id":3163862,"reputation":36940,"user_id":2674303,"accept_rate":62,"display_name":"gstackoverflow"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1396268831,"creation_date":1396268831,"answer_id":22761529,"question_id":22756940,"body_markdown":"test output not specified values because of test method marked as synchronized\r\n\r\nRight variant\r\n-\r\n\r\n    public class LockVsSync {\r\n        public static int THREAD_NUMBER = 10;\r\n    \r\n        public static void main(String[] args) throws InterruptedException {\r\n            List&lt;Thread&gt; threads = new ArrayList&lt;Thread&gt;();\r\n            for (int i = 0; i &lt; THREAD_NUMBER; i++) {\r\n                threads.add(new MyThread());\r\n            }\r\n            for (Thread thread : threads) {\r\n                thread.start();\r\n                Thread.sleep(50);\r\n            }\r\n        }   \r\n    \r\n        public static  void test(Lock lock) throws InterruptedException {\r\n            lock.lock();\r\n            try {\r\n                System.out.println(Thread.currentThread().getId()+ &quot; int test method begin&quot;);\r\n                Thread.sleep(200);\r\n                System.out.println(Thread.currentThread().getId()+ &quot; int test method end&quot;);\r\n            } finally {\r\n                lock.unlock();\r\n            }\r\n        }\r\n    \r\n        static class MyThread extends Thread {\r\n            static Lock lock = new ReentrantLock(true);\r\n    \r\n            @Override\r\n            public void run() {\r\n                System.out.println(&quot;Thread with id=&quot; + Thread.currentThread().getId()+ &quot; executes before test!&quot;);\r\n                try {\r\n                    test(lock);\r\n                } catch (InterruptedException e) {  }\r\n                System.out.println(&quot;Thread with id=&quot;+ Thread.currentThread().getId() + &quot; executes after test!&quot;);\r\n    \r\n            }\r\n        }\r\n    \r\n    }\r\n\r\n\r\nexamlpe of output:\r\n-\r\n\r\n    Thread with id=9 executes before test!\r\n    9 int test method begin\r\n    Thread with id=10 executes before test!\r\n    Thread with id=11 executes before test!\r\n    Thread with id=12 executes before test!\r\n    Thread with id=13 executes before test!\r\n    9 int test method end\r\n    Thread with id=9 executes after test!\r\n    10 int test method begin\r\n    Thread with id=14 executes before test!\r\n    Thread with id=15 executes before test!\r\n    Thread with id=16 executes before test!\r\n    Thread with id=17 executes before test!\r\n    10 int test method end\r\n    11 int test method begin\r\n    Thread with id=10 executes after test!\r\n    Thread with id=18 executes before test!\r\n    11 int test method end\r\n    Thread with id=11 executes after test!\r\n    12 int test method begin\r\n    12 int test method end\r\n    Thread with id=12 executes after test!\r\n    13 int test method begin\r\n    13 int test method end\r\n    Thread with id=13 executes after test!\r\n    14 int test method begin\r\n    14 int test method end\r\n    Thread with id=14 executes after test!\r\n    15 int test method begin\r\n    15 int test method end\r\n    Thread with id=15 executes after test!\r\n    16 int test method begin\r\n    16 int test method end\r\n    Thread with id=16 executes after test!\r\n    17 int test method begin\r\n    17 int test method end\r\n    Thread with id=17 executes after test!\r\n    18 int test method begin\r\n    18 int test method end\r\n    Thread with id=18 executes after test!\r\n\r\n\r\n\r\n\r\nThus `Locks makes guarantees about the sequence in which threads waiting to entering it are granted a access` is truth. ","title":"Does Locks make guarantees about the sequence in which threads waiting to entering it are granted access? example","body":"<p>test output not specified values because of test method marked as synchronized</p>\n\n<h2>Right variant</h2>\n\n<pre><code>public class LockVsSync {\n    public static int THREAD_NUMBER = 10;\n\n    public static void main(String[] args) throws InterruptedException {\n        List&lt;Thread&gt; threads = new ArrayList&lt;Thread&gt;();\n        for (int i = 0; i &lt; THREAD_NUMBER; i++) {\n            threads.add(new MyThread());\n        }\n        for (Thread thread : threads) {\n            thread.start();\n            Thread.sleep(50);\n        }\n    }   \n\n    public static  void test(Lock lock) throws InterruptedException {\n        lock.lock();\n        try {\n            System.out.println(Thread.currentThread().getId()+ \" int test method begin\");\n            Thread.sleep(200);\n            System.out.println(Thread.currentThread().getId()+ \" int test method end\");\n        } finally {\n            lock.unlock();\n        }\n    }\n\n    static class MyThread extends Thread {\n        static Lock lock = new ReentrantLock(true);\n\n        @Override\n        public void run() {\n            System.out.println(\"Thread with id=\" + Thread.currentThread().getId()+ \" executes before test!\");\n            try {\n                test(lock);\n            } catch (InterruptedException e) {  }\n            System.out.println(\"Thread with id=\"+ Thread.currentThread().getId() + \" executes after test!\");\n\n        }\n    }\n\n}\n</code></pre>\n\n<h2>examlpe of output:</h2>\n\n<pre><code>Thread with id=9 executes before test!\n9 int test method begin\nThread with id=10 executes before test!\nThread with id=11 executes before test!\nThread with id=12 executes before test!\nThread with id=13 executes before test!\n9 int test method end\nThread with id=9 executes after test!\n10 int test method begin\nThread with id=14 executes before test!\nThread with id=15 executes before test!\nThread with id=16 executes before test!\nThread with id=17 executes before test!\n10 int test method end\n11 int test method begin\nThread with id=10 executes after test!\nThread with id=18 executes before test!\n11 int test method end\nThread with id=11 executes after test!\n12 int test method begin\n12 int test method end\nThread with id=12 executes after test!\n13 int test method begin\n13 int test method end\nThread with id=13 executes after test!\n14 int test method begin\n14 int test method end\nThread with id=14 executes after test!\n15 int test method begin\n15 int test method end\nThread with id=15 executes after test!\n16 int test method begin\n16 int test method end\nThread with id=16 executes after test!\n17 int test method begin\n17 int test method end\nThread with id=17 executes after test!\n18 int test method begin\n18 int test method end\nThread with id=18 executes after test!\n</code></pre>\n\n<p>Thus <code>Locks makes guarantees about the sequence in which threads waiting to entering it are granted a access</code> is truth. </p>\n"},{"tags":[],"owner":{"account_id":2909708,"reputation":197,"user_id":2494254,"accept_rate":0,"display_name":"Gaurav Seth"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1430036753,"creation_date":1430036753,"answer_id":29875372,"question_id":22756940,"body_markdown":"        \r\n    \r\n        package lock;\r\n        \r\n        import java.util.ArrayList;\r\n        import java.util.List;\r\n        import java.util.concurrent.locks.Lock;\r\n        import java.util.concurrent.locks.ReentrantLock;\r\n        \r\n        /**\r\n         * This example shows that Lock maintains ordering\r\n         * in which threads entering the critical section are entered.\r\n         * as opposed to synchronized block\r\n         * \r\n         * @author Gaurav.Seth\r\n         *\r\n         */\r\n        public class ReentrantLockExample {\r\n        \t\r\n        \tstatic Lock lock = new ReentrantLock();\r\n        \tstatic List&lt;String&gt; l = new ArrayList&lt;String&gt;();\r\n        \t\r\n        \t// Test using Lock\r\n        \tpublic static void testLock(String threadName){\r\n        \t\tlock.lock();\r\n        \t\tSystem.out.println(&quot;Starting:&quot; + threadName);\r\n        \t\tl.add(&quot;a:&quot; + threadName);\r\n        \t\tl.add(&quot;b: &quot; + threadName);\r\n        \t\tSystem.out.println(l);\r\n        \t\tSystem.out.println(&quot;Ending:&quot; + threadName);\r\n        \t\tlock.unlock();\r\n        \t}\r\n        \t\r\n        \t// Test using synchronized block\r\n        \tpublic static void testSynchronized(String threadName){\r\n        \t\tsynchronized(l){\r\n        \t\t\tSystem.out.println(&quot;Starting:&quot; + threadName);\r\n        \t\t\tl.add(&quot;a:&quot; + threadName);\r\n        \t\t\tl.add(&quot;b: &quot; + threadName);\r\n        \t\t\tSystem.out.println(l);\r\n        \t\t\tSystem.out.println(&quot;Ending:&quot; + threadName);\r\n        \t\t}\r\n        \t}\r\n        \t\r\n        \tpublic static void main(String args[]){\r\n        \t\tfor(int i=0;i&lt;10;i++){\r\n        \t\t\tThread t = new Thread(new MyThread());\r\n        \t\t\tt.start();\r\n        \t\t}\r\n        \t}\r\n        \t\r\n        \tstatic class MyThread implements Runnable{\r\n        \r\n        \t\t@Override\r\n        \t\tpublic void run() {\r\n        \t\t\t//testLock(Thread.currentThread().getName());\r\n        \t\t\ttestSynchronized(Thread.currentThread().getName());\r\n        \t\t}\r\n        \t\t\r\n        \t}\r\n        }","title":"Does Locks make guarantees about the sequence in which threads waiting to entering it are granted access? example","body":"<pre><code>    package lock;\n\n    import java.util.ArrayList;\n    import java.util.List;\n    import java.util.concurrent.locks.Lock;\n    import java.util.concurrent.locks.ReentrantLock;\n\n    /**\n     * This example shows that Lock maintains ordering\n     * in which threads entering the critical section are entered.\n     * as opposed to synchronized block\n     * \n     * @author Gaurav.Seth\n     *\n     */\n    public class ReentrantLockExample {\n\n        static Lock lock = new ReentrantLock();\n        static List&lt;String&gt; l = new ArrayList&lt;String&gt;();\n\n        // Test using Lock\n        public static void testLock(String threadName){\n            lock.lock();\n            System.out.println(\"Starting:\" + threadName);\n            l.add(\"a:\" + threadName);\n            l.add(\"b: \" + threadName);\n            System.out.println(l);\n            System.out.println(\"Ending:\" + threadName);\n            lock.unlock();\n        }\n\n        // Test using synchronized block\n        public static void testSynchronized(String threadName){\n            synchronized(l){\n                System.out.println(\"Starting:\" + threadName);\n                l.add(\"a:\" + threadName);\n                l.add(\"b: \" + threadName);\n                System.out.println(l);\n                System.out.println(\"Ending:\" + threadName);\n            }\n        }\n\n        public static void main(String args[]){\n            for(int i=0;i&lt;10;i++){\n                Thread t = new Thread(new MyThread());\n                t.start();\n            }\n        }\n\n        static class MyThread implements Runnable{\n\n            @Override\n            public void run() {\n                //testLock(Thread.currentThread().getName());\n                testSynchronized(Thread.currentThread().getName());\n            }\n\n        }\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8550747,"reputation":19,"user_id":6462683,"display_name":"Ishara Fernando"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679503146,"creation_date":1679503146,"answer_id":75814979,"question_id":22756940,"body_markdown":"Java Lock (java.util.concurrent.locks.Lock) does guarantee the lock gaining order.\r\nI see two issues with the code in the question. That is why it is not demonstrating the expected results.\r\n\r\n 1. The &quot;same&quot; lock object should be used to lock the threads. In the code, it creates new Lock object for each Thread, use that object to take the lock.\r\n 2. The threads will not invoke the &quot;lock.lock()&quot; line in the same order they invoke the &quot;System.out.println(....&quot; executes before test!&quot;)&quot; line. Thread-1 may execute the &quot;println&quot; line and wait a while, And Thread-2 may execute both &quot;println&quot; line and the &quot;lock.lock()&quot; line. So even though you see, &quot;Thread-1...&quot;, &quot;Thread-2....&quot; in the console, The actual order those threads try to acquire the lock is, &quot;Thread-2&quot;, &quot;Thread-1&quot;.\r\n\r\nBelow is a code to demonstrate the Thread lock behavior\r\n\r\n    public class App {\r\n\r\n\tpublic static final int THREAD_COUNT = 20;\r\n\r\n\tpublic static void main(String[] args) throws InterruptedException {\r\n\r\n\t\tLock lock = new ReentrantLock();\r\n\r\n\t\tfor(int i=1; i&lt;=THREAD_COUNT; i++) {\r\n\t\t\tThread t = new MyThread(lock);\r\n\t\t\tt.setName(&quot;Thread-&quot; + i);\r\n\t\t\tt.start();\r\n\r\n\t\t\t/*\r\n\t\t\t * give some time to thread &quot;t&quot; to go and lock itself before sending the next thread.\r\n\t\t\t * So that threads will be lock in the order of - Thread-1, Thread-2, ...... Thread-19, Thread-20\r\n\t\t\t */\r\n\t\t\tThread.currentThread().sleep(100);\r\n\t\t}\r\n\t}\r\n\r\n\tstatic class MyThread extends Thread {\r\n\r\n\t\tprivate final Lock lock;\r\n\r\n\t\tpublic MyThread(Lock lock) {\r\n\t\t\tthis.lock = lock;\r\n\t\t}\r\n\r\n        @Override\r\n        public void run() {\r\n        \ttry {\r\n\t\t\t\tSystem.out.println(Thread.currentThread().getName() + &quot; try to pick the lock&quot;);\r\n\t\t\t\tlock.lock();\r\n\t\t\t\t/* *********************************************************************\r\n\t\t\t\t * Locked threads will be released based on the order they got locked\r\n\t\t\t\t ********************************************************************** */\r\n\t\t\t\tSystem.out.println(&quot;\\t\\t\\t\\t&quot; + Thread.currentThread().getName() + &quot; got the lock&quot;);\r\n\r\n\t\t\t\t/* **************************************************************************\r\n\t\t\t\t * sleep/wait this thread enough time,\r\n\t\t\t\t * so that other threads can come and lock themselves at &quot;lock.lock()&quot; line\r\n\t\t\t\t ************************************************************************** */\r\n\t\t\t\tThread.sleep(2000);\r\n\r\n\t\t\t} catch(InterruptedException ex) {\r\n\t\t\t\tex.printStackTrace();\r\n\t\t\t\tThread.currentThread().interrupt();\r\n\t\t\t} finally {\r\n\t\t\t\tSystem.out.println(&quot;\\t\\t\\t\\t\\t\\t\\t&quot; + Thread.currentThread().getName() + &quot; released the lock&quot;);\r\n\t\t\t\tlock.unlock();\r\n\t\t\t}\r\n        }\r\n    }\r\n}\r\n\r\n - The *Thread.currentThread().sleep(100)* in the *main* method is used to give  the thread &quot;t&quot; enough time to execute both &quot;*println*&quot; line and the &quot;*lock.lock()*&quot; line. So that we see the correct thread locked order in the console\r\n- The *Thread.sleep(2000)* in *MyThread: run* method is used to give enough time for all other threads to come and lock themselves at the &quot;*lock.lock()*&quot; line. (*Even though this delay applies to all the threads, this is necessary for only the first thread*)\r\n\r\nBelow is the console output of this code (I ran the code and checked the output several times. The results are similar)\r\n\r\n    Thread-1 try to pick the lock\r\n    \t\t\t\tThread-1 got the lock\r\n    Thread-2 try to pick the lock\r\n    Thread-3 try to pick the lock\r\n    Thread-4 try to pick the lock\r\n    Thread-5 try to pick the lock\r\n    Thread-6 try to pick the lock\r\n    Thread-7 try to pick the lock\r\n    Thread-8 try to pick the lock\r\n    Thread-9 try to pick the lock\r\n    Thread-10 try to pick the lock\r\n    Thread-11 try to pick the lock\r\n    Thread-12 try to pick the lock\r\n    Thread-13 try to pick the lock\r\n    Thread-14 try to pick the lock\r\n    Thread-15 try to pick the lock\r\n    Thread-16 try to pick the lock\r\n    Thread-17 try to pick the lock\r\n    Thread-18 try to pick the lock\r\n    Thread-19 try to pick the lock\r\n    \t\t\t\t\t\t\tThread-1 released the lock\r\n    \t\t\t\tThread-2 got the lock\r\n    Thread-20 try to pick the lock\r\n    \t\t\t\t\t\t\tThread-2 released the lock\r\n    \t\t\t\tThread-3 got the lock\r\n    \t\t\t\t\t\t\tThread-3 released the lock\r\n    \t\t\t\tThread-4 got the lock\r\n    \t\t\t\t\t\t\tThread-4 released the lock\r\n    \t\t\t\tThread-5 got the lock\r\n    \t\t\t\t\t\t\tThread-5 released the lock\r\n    \t\t\t\tThread-6 got the lock\r\n    \t\t\t\t\t\t\tThread-6 released the lock\r\n    \t\t\t\tThread-7 got the lock\r\n    \t\t\t\t\t\t\tThread-7 released the lock\r\n    \t\t\t\tThread-8 got the lock\r\n    \t\t\t\t\t\t\tThread-8 released the lock\r\n    \t\t\t\tThread-9 got the lock\r\n    \t\t\t\t\t\t\tThread-9 released the lock\r\n    \t\t\t\tThread-10 got the lock\r\n    \t\t\t\t\t\t\tThread-10 released the lock\r\n    \t\t\t\tThread-11 got the lock\r\n    \t\t\t\t\t\t\tThread-11 released the lock\r\n    \t\t\t\tThread-12 got the lock\r\n    \t\t\t\t\t\t\tThread-12 released the lock\r\n    \t\t\t\tThread-13 got the lock\r\n    \t\t\t\t\t\t\tThread-13 released the lock\r\n    \t\t\t\tThread-14 got the lock\r\n    \t\t\t\t\t\t\tThread-14 released the lock\r\n    \t\t\t\tThread-15 got the lock\r\n    \t\t\t\t\t\t\tThread-15 released the lock\r\n    \t\t\t\tThread-16 got the lock\r\n    \t\t\t\t\t\t\tThread-16 released the lock\r\n    \t\t\t\tThread-17 got the lock\r\n    \t\t\t\t\t\t\tThread-17 released the lock\r\n    \t\t\t\tThread-18 got the lock\r\n    \t\t\t\t\t\t\tThread-18 released the lock\r\n    \t\t\t\tThread-19 got the lock\r\n    \t\t\t\t\t\t\tThread-19 released the lock\r\n    \t\t\t\tThread-20 got the lock\r\n    \t\t\t\t\t\t\tThread-20 released the lock\r\n\r\n\r\nNote: I found this question while looking for some thread related details. Even though this is an old question, Thought to leave this answer for future developers.\r\n","title":"Does Locks make guarantees about the sequence in which threads waiting to entering it are granted access? example","body":"<p>Java Lock (java.util.concurrent.locks.Lock) does guarantee the lock gaining order.\nI see two issues with the code in the question. That is why it is not demonstrating the expected results.</p>\n<ol>\n<li>The &quot;same&quot; lock object should be used to lock the threads. In the code, it creates new Lock object for each Thread, use that object to take the lock.</li>\n<li>The threads will not invoke the &quot;lock.lock()&quot; line in the same order they invoke the &quot;System.out.println(....&quot; executes before test!&quot;)&quot; line. Thread-1 may execute the &quot;println&quot; line and wait a while, And Thread-2 may execute both &quot;println&quot; line and the &quot;lock.lock()&quot; line. So even though you see, &quot;Thread-1...&quot;, &quot;Thread-2....&quot; in the console, The actual order those threads try to acquire the lock is, &quot;Thread-2&quot;, &quot;Thread-1&quot;.</li>\n</ol>\n<p>Below is a code to demonstrate the Thread lock behavior</p>\n<pre><code>public class App {\n\npublic static final int THREAD_COUNT = 20;\n\npublic static void main(String[] args) throws InterruptedException {\n\n    Lock lock = new ReentrantLock();\n\n    for(int i=1; i&lt;=THREAD_COUNT; i++) {\n        Thread t = new MyThread(lock);\n        t.setName(&quot;Thread-&quot; + i);\n        t.start();\n\n        /*\n         * give some time to thread &quot;t&quot; to go and lock itself before sending the next thread.\n         * So that threads will be lock in the order of - Thread-1, Thread-2, ...... Thread-19, Thread-20\n         */\n        Thread.currentThread().sleep(100);\n    }\n}\n\nstatic class MyThread extends Thread {\n\n    private final Lock lock;\n\n    public MyThread(Lock lock) {\n        this.lock = lock;\n    }\n\n    @Override\n    public void run() {\n        try {\n            System.out.println(Thread.currentThread().getName() + &quot; try to pick the lock&quot;);\n            lock.lock();\n            /* *********************************************************************\n             * Locked threads will be released based on the order they got locked\n             ********************************************************************** */\n            System.out.println(&quot;\\t\\t\\t\\t&quot; + Thread.currentThread().getName() + &quot; got the lock&quot;);\n\n            /* **************************************************************************\n             * sleep/wait this thread enough time,\n             * so that other threads can come and lock themselves at &quot;lock.lock()&quot; line\n             ************************************************************************** */\n            Thread.sleep(2000);\n\n        } catch(InterruptedException ex) {\n            ex.printStackTrace();\n            Thread.currentThread().interrupt();\n        } finally {\n            System.out.println(&quot;\\t\\t\\t\\t\\t\\t\\t&quot; + Thread.currentThread().getName() + &quot; released the lock&quot;);\n            lock.unlock();\n        }\n    }\n}\n</code></pre>\n<p>}</p>\n<ul>\n<li>The <em>Thread.currentThread().sleep(100)</em> in the <em>main</em> method is used to give  the thread &quot;t&quot; enough time to execute both &quot;<em>println</em>&quot; line and the &quot;<em>lock.lock()</em>&quot; line. So that we see the correct thread locked order in the console</li>\n<li>The <em>Thread.sleep(2000)</em> in <em>MyThread: run</em> method is used to give enough time for all other threads to come and lock themselves at the &quot;<em>lock.lock()</em>&quot; line. (<em>Even though this delay applies to all the threads, this is necessary for only the first thread</em>)</li>\n</ul>\n<p>Below is the console output of this code (I ran the code and checked the output several times. The results are similar)</p>\n<pre><code>Thread-1 try to pick the lock\n                Thread-1 got the lock\nThread-2 try to pick the lock\nThread-3 try to pick the lock\nThread-4 try to pick the lock\nThread-5 try to pick the lock\nThread-6 try to pick the lock\nThread-7 try to pick the lock\nThread-8 try to pick the lock\nThread-9 try to pick the lock\nThread-10 try to pick the lock\nThread-11 try to pick the lock\nThread-12 try to pick the lock\nThread-13 try to pick the lock\nThread-14 try to pick the lock\nThread-15 try to pick the lock\nThread-16 try to pick the lock\nThread-17 try to pick the lock\nThread-18 try to pick the lock\nThread-19 try to pick the lock\n                            Thread-1 released the lock\n                Thread-2 got the lock\nThread-20 try to pick the lock\n                            Thread-2 released the lock\n                Thread-3 got the lock\n                            Thread-3 released the lock\n                Thread-4 got the lock\n                            Thread-4 released the lock\n                Thread-5 got the lock\n                            Thread-5 released the lock\n                Thread-6 got the lock\n                            Thread-6 released the lock\n                Thread-7 got the lock\n                            Thread-7 released the lock\n                Thread-8 got the lock\n                            Thread-8 released the lock\n                Thread-9 got the lock\n                            Thread-9 released the lock\n                Thread-10 got the lock\n                            Thread-10 released the lock\n                Thread-11 got the lock\n                            Thread-11 released the lock\n                Thread-12 got the lock\n                            Thread-12 released the lock\n                Thread-13 got the lock\n                            Thread-13 released the lock\n                Thread-14 got the lock\n                            Thread-14 released the lock\n                Thread-15 got the lock\n                            Thread-15 released the lock\n                Thread-16 got the lock\n                            Thread-16 released the lock\n                Thread-17 got the lock\n                            Thread-17 released the lock\n                Thread-18 got the lock\n                            Thread-18 released the lock\n                Thread-19 got the lock\n                            Thread-19 released the lock\n                Thread-20 got the lock\n                            Thread-20 released the lock\n</code></pre>\n<p>Note: I found this question while looking for some thread related details. Even though this is an old question, Thought to leave this answer for future developers.</p>\n"}],"owner":{"account_id":3163862,"reputation":36940,"user_id":2674303,"accept_rate":62,"display_name":"gstackoverflow"},"comment_count":15,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":354,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":4,"score":0,"last_activity_date":1679503146,"creation_date":1396254778,"question_id":22756940,"body_markdown":"I learn java Lock. \r\n\r\nI have read differences between Lock and Synchronized. And I have misunderstandings with one point of this list.\r\n\r\n&gt; A synchronized block makes no guarantees about the sequence in which threads waiting to entering it are granted access.\r\n\r\nCan you show example exposed this quote?  \r\n\r\nLocks  makes guarantees about the sequence in which threads waiting to entering it are granted access?\r\n\r\n\r\nTest for synchronized:\r\n-\r\n\r\n    package concurrency;\r\n    \r\n    import java.util.ArrayList;\r\n    import java.util.List;\r\n    \r\n    public class LockVsSync {\r\n    \tpublic static int THREAD_NUMBER = 10;\r\n    \tpublic static void main(String [] args) throws InterruptedException{\r\n    \t\tList&lt;Thread&gt; threads = new ArrayList&lt;Thread&gt;();\r\n    \t\tfor(int i=0;i&lt;THREAD_NUMBER;i++){\r\n    \t\t\tthreads.add(new MyThread());\r\n    \t\t}\r\n    \t\tfor(Thread thread:threads){\r\n    \t\t\tthread.start();\r\n    \t\t\tThread.sleep(50);\r\n    \t\t}\r\n    \t}\r\n    \tpublic static synchronized void test() throws InterruptedException {\r\n    \t\tSystem.out.println(Thread.currentThread().getId()+&quot; int test method begin&quot;);\r\n    \t\tThread.sleep(200);\r\n    \t\tSystem.out.println(Thread.currentThread().getId()+&quot; int test method end&quot;);\r\n    \t}\r\n    \t\r\n    \tstatic class MyThread extends Thread{\r\n    \t\t@Override\r\n    \t\tpublic void run() {\r\n    \t\t\tSystem.out.println(&quot;Thread with id=&quot;+Thread.currentThread().getId()+&quot; executes before test!&quot;);\r\n    \t\t\ttry {\r\n    \t\t\t\ttest();\r\n    \t\t\t} catch (InterruptedException e) {\r\n    \t\t\t\t\r\n    \t\t\t}\r\n    \t\t\tSystem.out.println(&quot;Thread with id=&quot;+Thread.currentThread().getId()+&quot; executes after test!&quot;);\r\n    \t\t\t\r\n    \t\t}\r\n    \t}\r\n    \r\n    }\r\n\r\n\r\n\r\n\r\noutput:\r\n\r\n\r\n    Thread with id=9 executes before test!\r\n    9 int test method begin\r\n    Thread with id=10 executes before test!\r\n    Thread with id=11 executes before test!\r\n    Thread with id=12 executes before test!\r\n    Thread with id=13 executes before test!\r\n    9 int test method end\r\n    Thread with id=9 executes after test!\r\n    13 int test method begin\r\n    Thread with id=14 executes before test!\r\n    Thread with id=15 executes before test!\r\n    Thread with id=16 executes before test!\r\n    Thread with id=17 executes before test!\r\n    13 int test method end\r\n    Thread with id=13 executes after test!\r\n    12 int test method begin\r\n    Thread with id=18 executes before test!\r\n    12 int test method end\r\n    Thread with id=12 executes after test!\r\n    11 int test method begin\r\n    11 int test method end\r\n    Thread with id=11 executes after test!\r\n    10 int test method begin\r\n    10 int test method end\r\n    Thread with id=10 executes after test!\r\n    18 int test method begin\r\n    18 int test method end\r\n    Thread with id=18 executes after test!\r\n    17 int test method begin\r\n    17 int test method end\r\n    Thread with id=17 executes after test!\r\n    16 int test method begin\r\n    16 int test method end\r\n    Thread with id=16 executes after test!\r\n    15 int test method begin\r\n    15 int test method end\r\n    Thread with id=15 executes after test!\r\n    14 int test method begin\r\n    14 int test method end\r\n    Thread with id=14 executes after test!\r\n\r\n\r\n\r\nThus\r\n\r\n\r\n\r\n    9 int test method begin\r\n    13 int test method begin\r\n    12 int test method begin\r\n    11 int test method begin\r\n    10 int test method begin\r\n    18 int test method begin\r\n    17 int test method begin\r\n    16 int test method begin\r\n    15 int test method begin\r\n    14 int test method begin\r\n\r\n\r\nthe order is not specified.\r\n\r\n    \r\nTest for Lock\r\n-\r\n\r\n\r\n    public class LockVsSync {\r\n    \tpublic static int THREAD_NUMBER = 10;\r\n    \r\n    \tpublic static void main(String[] args) throws InterruptedException {\r\n    \t\tList&lt;Thread&gt; threads = new ArrayList&lt;Thread&gt;();\r\n    \t\tfor (int i = 0; i &lt; THREAD_NUMBER; i++) {\r\n    \t\t\tthreads.add(new MyThread());\r\n    \t\t}\r\n    \t\tfor (Thread thread : threads) {\r\n    \t\t\tthread.start();\r\n    \t\t\tThread.sleep(50);\r\n    \t\t}\r\n    \t}\t\r\n    \r\n    \tpublic static synchronized void test(Lock lock) throws InterruptedException {\r\n    \t\tlock.lock();\r\n    \t\ttry {\r\n    \t\t\tSystem.out.println(Thread.currentThread().getId()+ &quot; int test method begin&quot;);\r\n    \t\t\tThread.sleep(200);\r\n    \t\t\tSystem.out.println(Thread.currentThread().getId()+ &quot; int test method end&quot;);\r\n    \t\t} finally {\r\n    \t\t\tlock.unlock();\r\n    \t\t}\r\n    \t}\r\n    \r\n    \tstatic class MyThread extends Thread {\r\n    \t\tstatic Lock lock = new ReentrantLock(true);\r\n    \r\n    \t\t@Override\r\n    \t\tpublic void run() {\r\n    \t\t\tSystem.out.println(&quot;Thread with id=&quot; + Thread.currentThread().getId()+ &quot; executes before test!&quot;);\r\n    \t\t\ttry {\r\n    \t\t\t\ttest(lock);\r\n    \t\t\t} catch (InterruptedException e) {\t}\r\n    \t\t\tSystem.out.println(&quot;Thread with id=&quot;+ Thread.currentThread().getId() + &quot; executes after test!&quot;);\r\n    \r\n    \t\t}\r\n    \t}\r\n    \r\n    }\r\n\r\noutput:\r\n\r\n     Thread with id=9 executes before test!\r\n    9 int test method begin\r\n    Thread with id=10 executes before test!\r\n    Thread with id=11 executes before test!\r\n    Thread with id=12 executes before test!\r\n    Thread with id=13 executes before test!\r\n    9 int test method end\r\n    13 int test method begin\r\n    Thread with id=9 executes after test!\r\n    Thread with id=14 executes before test!\r\n    Thread with id=15 executes before test!\r\n    Thread with id=16 executes before test!\r\n    Thread with id=17 executes before test!\r\n    13 int test method end\r\n    Thread with id=13 executes after test!\r\n    12 int test method begin\r\n    Thread with id=18 executes before test!\r\n    12 int test method end\r\n    Thread with id=12 executes after test!\r\n    11 int test method begin\r\n    11 int test method end\r\n    Thread with id=11 executes after test!\r\n    10 int test method begin\r\n    10 int test method end\r\n    Thread with id=10 executes after test!\r\n    18 int test method begin\r\n    18 int test method end\r\n    Thread with id=18 executes after test!\r\n    17 int test method begin\r\n    17 int test method end\r\n    Thread with id=17 executes after test!\r\n    16 int test method begin\r\n    16 int test method end\r\n    Thread with id=16 executes after test!\r\n    15 int test method begin\r\n    15 int test method end\r\n    Thread with id=15 executes after test!\r\n    14 int test method begin\r\n    14 int test method end\r\n    Thread with id=14 executes after test!\r\n\r\n\r\nthus:\r\n\r\n\r\n    \r\n    9 int test method begin\r\n    13 int test method begin\r\n    12 int test method begin\r\n    10 int test method begin\r\n    18 int test method begin\r\n    17 int test method begin\r\n    16 int test method begin\r\n    15 int test method begin\r\n    14 int test method begin\r\n\r\n\r\n\r\n\r\nnot specified order too.\r\n\r\n\r\nWhat do I wrong? \r\n\r\n\r\n\r\n","title":"Does Locks make guarantees about the sequence in which threads waiting to entering it are granted access? example","body":"<p>I learn java Lock. </p>\n\n<p>I have read differences between Lock and Synchronized. And I have misunderstandings with one point of this list.</p>\n\n<blockquote>\n  <p>A synchronized block makes no guarantees about the sequence in which threads waiting to entering it are granted access.</p>\n</blockquote>\n\n<p>Can you show example exposed this quote?  </p>\n\n<p>Locks  makes guarantees about the sequence in which threads waiting to entering it are granted access?</p>\n\n<h2>Test for synchronized:</h2>\n\n<pre><code>package concurrency;\n\nimport java.util.ArrayList;\nimport java.util.List;\n\npublic class LockVsSync {\n    public static int THREAD_NUMBER = 10;\n    public static void main(String [] args) throws InterruptedException{\n        List&lt;Thread&gt; threads = new ArrayList&lt;Thread&gt;();\n        for(int i=0;i&lt;THREAD_NUMBER;i++){\n            threads.add(new MyThread());\n        }\n        for(Thread thread:threads){\n            thread.start();\n            Thread.sleep(50);\n        }\n    }\n    public static synchronized void test() throws InterruptedException {\n        System.out.println(Thread.currentThread().getId()+\" int test method begin\");\n        Thread.sleep(200);\n        System.out.println(Thread.currentThread().getId()+\" int test method end\");\n    }\n\n    static class MyThread extends Thread{\n        @Override\n        public void run() {\n            System.out.println(\"Thread with id=\"+Thread.currentThread().getId()+\" executes before test!\");\n            try {\n                test();\n            } catch (InterruptedException e) {\n\n            }\n            System.out.println(\"Thread with id=\"+Thread.currentThread().getId()+\" executes after test!\");\n\n        }\n    }\n\n}\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>Thread with id=9 executes before test!\n9 int test method begin\nThread with id=10 executes before test!\nThread with id=11 executes before test!\nThread with id=12 executes before test!\nThread with id=13 executes before test!\n9 int test method end\nThread with id=9 executes after test!\n13 int test method begin\nThread with id=14 executes before test!\nThread with id=15 executes before test!\nThread with id=16 executes before test!\nThread with id=17 executes before test!\n13 int test method end\nThread with id=13 executes after test!\n12 int test method begin\nThread with id=18 executes before test!\n12 int test method end\nThread with id=12 executes after test!\n11 int test method begin\n11 int test method end\nThread with id=11 executes after test!\n10 int test method begin\n10 int test method end\nThread with id=10 executes after test!\n18 int test method begin\n18 int test method end\nThread with id=18 executes after test!\n17 int test method begin\n17 int test method end\nThread with id=17 executes after test!\n16 int test method begin\n16 int test method end\nThread with id=16 executes after test!\n15 int test method begin\n15 int test method end\nThread with id=15 executes after test!\n14 int test method begin\n14 int test method end\nThread with id=14 executes after test!\n</code></pre>\n\n<p>Thus</p>\n\n<pre><code>9 int test method begin\n13 int test method begin\n12 int test method begin\n11 int test method begin\n10 int test method begin\n18 int test method begin\n17 int test method begin\n16 int test method begin\n15 int test method begin\n14 int test method begin\n</code></pre>\n\n<p>the order is not specified.</p>\n\n<h2>Test for Lock</h2>\n\n<pre><code>public class LockVsSync {\n    public static int THREAD_NUMBER = 10;\n\n    public static void main(String[] args) throws InterruptedException {\n        List&lt;Thread&gt; threads = new ArrayList&lt;Thread&gt;();\n        for (int i = 0; i &lt; THREAD_NUMBER; i++) {\n            threads.add(new MyThread());\n        }\n        for (Thread thread : threads) {\n            thread.start();\n            Thread.sleep(50);\n        }\n    }   \n\n    public static synchronized void test(Lock lock) throws InterruptedException {\n        lock.lock();\n        try {\n            System.out.println(Thread.currentThread().getId()+ \" int test method begin\");\n            Thread.sleep(200);\n            System.out.println(Thread.currentThread().getId()+ \" int test method end\");\n        } finally {\n            lock.unlock();\n        }\n    }\n\n    static class MyThread extends Thread {\n        static Lock lock = new ReentrantLock(true);\n\n        @Override\n        public void run() {\n            System.out.println(\"Thread with id=\" + Thread.currentThread().getId()+ \" executes before test!\");\n            try {\n                test(lock);\n            } catch (InterruptedException e) {  }\n            System.out.println(\"Thread with id=\"+ Thread.currentThread().getId() + \" executes after test!\");\n\n        }\n    }\n\n}\n</code></pre>\n\n<p>output:</p>\n\n<pre><code> Thread with id=9 executes before test!\n9 int test method begin\nThread with id=10 executes before test!\nThread with id=11 executes before test!\nThread with id=12 executes before test!\nThread with id=13 executes before test!\n9 int test method end\n13 int test method begin\nThread with id=9 executes after test!\nThread with id=14 executes before test!\nThread with id=15 executes before test!\nThread with id=16 executes before test!\nThread with id=17 executes before test!\n13 int test method end\nThread with id=13 executes after test!\n12 int test method begin\nThread with id=18 executes before test!\n12 int test method end\nThread with id=12 executes after test!\n11 int test method begin\n11 int test method end\nThread with id=11 executes after test!\n10 int test method begin\n10 int test method end\nThread with id=10 executes after test!\n18 int test method begin\n18 int test method end\nThread with id=18 executes after test!\n17 int test method begin\n17 int test method end\nThread with id=17 executes after test!\n16 int test method begin\n16 int test method end\nThread with id=16 executes after test!\n15 int test method begin\n15 int test method end\nThread with id=15 executes after test!\n14 int test method begin\n14 int test method end\nThread with id=14 executes after test!\n</code></pre>\n\n<p>thus:</p>\n\n<pre><code>9 int test method begin\n13 int test method begin\n12 int test method begin\n10 int test method begin\n18 int test method begin\n17 int test method begin\n16 int test method begin\n15 int test method begin\n14 int test method begin\n</code></pre>\n\n<p>not specified order too.</p>\n\n<p>What do I wrong? </p>\n"},{"tags":["java","kotlin","spring-webflux","spring-webclient"],"answers":[{"tags":[],"owner":{"account_id":13798611,"reputation":37875,"user_id":9959152,"display_name":"Ryuzaki L"},"down_vote_count":0,"up_vote_count":21,"is_accepted":true,"score":21,"last_activity_date":1580017214,"creation_date":1580017214,"answer_id":59915865,"question_id":59915794,"body_markdown":"You can add the query parameters using lambda expression in [uri][1], for more information see [WebClient.UriSpec][2]\r\n\r\n\r\n     return WebClient.create(this.dataServiceUrl)\r\n                    .method(request.method ?: HttpMethod.GET)\r\n                    .uri(builder -&gt; builder.path(requestedPath).queryParam(&quot;q&quot;, &quot;12&quot;).build())\r\n                    .header(&quot;Accept&quot;, &quot;application/json, text/plain, */*&quot;)\r\n                    .body(BodyInserters.fromValue(request.body))\r\n                    .retrieve()\r\n                    .awaitBody()\r\n\r\n\r\n  [1]: https://docs.spring.io/spring/docs/5.0.0.M4_to_5.0.0.M5/Spring%20Framework%205.0.0.M5/org/springframework/web/reactive/function/client/WebClient.html#create-java.lang.String-\r\n  [2]: https://docs.spring.io/spring/docs/5.0.0.M4_to_5.0.0.M5/Spring%20Framework%205.0.0.M5/org/springframework/web/reactive/function/client/WebClient.UriSpec.html","title":"Add query parameter in WebClient request","body":"<p>You can add the query parameters using lambda expression in <a href=\"https://docs.spring.io/spring/docs/5.0.0.M4_to_5.0.0.M5/Spring%20Framework%205.0.0.M5/org/springframework/web/reactive/function/client/WebClient.html#create-java.lang.String-\" rel=\"noreferrer\">uri</a>, for more information see <a href=\"https://docs.spring.io/spring/docs/5.0.0.M4_to_5.0.0.M5/Spring%20Framework%205.0.0.M5/org/springframework/web/reactive/function/client/WebClient.UriSpec.html\" rel=\"noreferrer\">WebClient.UriSpec</a></p>\n\n<pre><code> return WebClient.create(this.dataServiceUrl)\n                .method(request.method ?: HttpMethod.GET)\n                .uri(builder -&gt; builder.path(requestedPath).queryParam(\"q\", \"12\").build())\n                .header(\"Accept\", \"application/json, text/plain, */*\")\n                .body(BodyInserters.fromValue(request.body))\n                .retrieve()\n                .awaitBody()\n</code></pre>\n"}],"owner":{"account_id":2316968,"reputation":2119,"user_id":2033800,"accept_rate":38,"display_name":"nicholasnet"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":37036,"favorite_count":0,"down_vote_count":0,"up_vote_count":14,"accepted_answer_id":59915865,"answer_count":1,"score":14,"last_activity_date":1679502354,"creation_date":1580016122,"question_id":59915794,"body_markdown":"I am using Spring WebFlux where I am taking request and using same request to call another service. But I am not sure how to add query parameters. This is my code\r\n```\r\n@RequestMapping(value= [&quot;/ptta-service/**&quot;])\r\nsuspend fun executeService(request: ServerHttpRequest): ServerHttpResponse {\r\n\r\n    val requestedPath = if (request.path.toString().length &gt; 13) &quot;&quot; else request.path.toString().substring(13)\r\n\r\n    return WebClient.create(this.dataServiceUrl)\r\n                    .method(request.method ?: HttpMethod.GET)\r\n                    .uri(requestedPath)\r\n                    .header(&quot;Accept&quot;, &quot;application/json, text/plain, */*&quot;)\r\n                    .body(BodyInserters.fromValue(request.body))\r\n                    .retrieve()\r\n                    .awaitBody()\r\n                    // But how about query parameters??? How to add those\r\n}\r\n```\r\nThough code is in Kotlin, Java will help as well.","title":"Add query parameter in WebClient request","body":"<p>I am using Spring WebFlux where I am taking request and using same request to call another service. But I am not sure how to add query parameters. This is my code</p>\n\n<pre><code>@RequestMapping(value= [\"/ptta-service/**\"])\nsuspend fun executeService(request: ServerHttpRequest): ServerHttpResponse {\n\n    val requestedPath = if (request.path.toString().length &gt; 13) \"\" else request.path.toString().substring(13)\n\n    return WebClient.create(this.dataServiceUrl)\n                    .method(request.method ?: HttpMethod.GET)\n                    .uri(requestedPath)\n                    .header(\"Accept\", \"application/json, text/plain, */*\")\n                    .body(BodyInserters.fromValue(request.body))\n                    .retrieve()\n                    .awaitBody()\n                    // But how about query parameters??? How to add those\n}\n</code></pre>\n\n<p>Though code is in Kotlin, Java will help as well.</p>\n"},{"tags":["java","xml","android-studio"],"comments":[{"owner":{"account_id":18364441,"reputation":275,"user_id":13375840,"display_name":"zyngot"},"score":1,"creation_date":1679347070,"post_id":75794265,"comment_id":133702736,"body_markdown":"can you please show your `styles.xml` or `themes.xml`","body":"can you please show your <code>styles.xml</code> or <code>themes.xml</code>"},{"owner":{"account_id":13689459,"reputation":185,"user_id":9877665,"display_name":"kiteandwindsurfer"},"score":0,"creation_date":1679366891,"post_id":75794265,"comment_id":133705356,"body_markdown":"Thanks for your feedback @zyngot - just added in `themes.xml`","body":"Thanks for your feedback @zyngot - just added in <code>themes.xml</code>"}],"answers":[{"tags":[],"owner":{"account_id":13689459,"reputation":185,"user_id":9877665,"display_name":"kiteandwindsurfer"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1679502265,"creation_date":1679502265,"answer_id":75814837,"question_id":75794265,"body_markdown":"There are two problems - first is that the button width is too wide for the phone, if you turn the phone to landscape the buttons will appear.  Second issue is that newer versions of Android Studio do not allow you to change button background colors as the button bg color defaults to `&lt;item name=&quot;colorPrimary&quot;&gt;@color/purple_500&lt;/item&gt;` (from `themes.xml` page)\r\n\r\n**Fixes:**\r\n\r\n 1. Button Width: simply change the `android:layout_width=&quot;wrap_content&quot;` for each button - to something like this `android:layout_width=&quot;50dp&quot;` and now all buttons are displayed on the phone screen\r\n 2. Button bg color: the problem is the `themes.xml` page, specifically the `parent` attribute from the `&lt;stlye...&gt;` tag - changed this:\r\n```\r\n&lt;style name=&quot;Theme.CalculatorEx&quot; parent=&quot;Theme.MaterialComponents.DayNight.DarkActionBar&quot;&gt;\r\n```\r\nto this:\r\n```\r\n&lt;style name=&quot;Theme.CalculatorEx&quot; parent=&quot;Theme.AppCompat.Light.NoActionBar&quot;&gt;\r\n```\r\nafter those changes, changing bg colors within the xml code (e.g. - `activity_main.xml`) works perfectly!","title":"Android Studio GridLayout is hidden","body":"<p>There are two problems - first is that the button width is too wide for the phone, if you turn the phone to landscape the buttons will appear.  Second issue is that newer versions of Android Studio do not allow you to change button background colors as the button bg color defaults to <code>&lt;item name=&quot;colorPrimary&quot;&gt;@color/purple_500&lt;/item&gt;</code> (from <code>themes.xml</code> page)</p>\n<p><strong>Fixes:</strong></p>\n<ol>\n<li>Button Width: simply change the <code>android:layout_width=&quot;wrap_content&quot;</code> for each button - to something like this <code>android:layout_width=&quot;50dp&quot;</code> and now all buttons are displayed on the phone screen</li>\n<li>Button bg color: the problem is the <code>themes.xml</code> page, specifically the <code>parent</code> attribute from the <code>&lt;stlye...&gt;</code> tag - changed this:</li>\n</ol>\n<pre><code>&lt;style name=&quot;Theme.CalculatorEx&quot; parent=&quot;Theme.MaterialComponents.DayNight.DarkActionBar&quot;&gt;\n</code></pre>\n<p>to this:</p>\n<pre><code>&lt;style name=&quot;Theme.CalculatorEx&quot; parent=&quot;Theme.AppCompat.Light.NoActionBar&quot;&gt;\n</code></pre>\n<p>after those changes, changing bg colors within the xml code (e.g. - <code>activity_main.xml</code>) works perfectly!</p>\n"}],"owner":{"account_id":13689459,"reputation":185,"user_id":9877665,"display_name":"kiteandwindsurfer"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75814837,"answer_count":1,"score":0,"last_activity_date":1679502265,"creation_date":1679338721,"question_id":75794265,"body_markdown":"I have only completed the xml portion of this project, so there is no added code to the .java page.  I am using a LinearLayout as base and then adding a GridLayout with buttons.  I can see the buttons contained in the GridLayout in Design view however the background color is not displaying `android:background=&quot;@color/white&quot;` - so each numerical number button is:\r\n```\r\n            android:background=&quot;@color/white&quot;\r\n            android:text=&quot;7&quot;\r\n            android:textColor=&quot;@color/black&quot;\r\n```\r\nin colors.xml defined:\r\n```\r\n    &lt;color name=&quot;black&quot;&gt;#2E2C2C&lt;/color&gt;\r\n    &lt;color name=&quot;white&quot;&gt;#FFFFFF&lt;/color&gt;\r\n```\r\nthe textColor is displaying in Design view but not the background:\r\n\r\n[![Here is the image in Design view (Android Studio)][1]][1]\r\n\r\n\r\nFrom the Design view the background color is not displaying - when opening up in my phone nothing displays, buttons are hidden:\r\n\r\n[![View from Samsung phone as run from app][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/iYiVX.png\r\n  [2]: https://i.stack.imgur.com/JXaCy.png\r\n\r\nbelow is the xml code:\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:layout_height=&quot;match_parent&quot;\r\n    android:orientation=&quot;vertical&quot;\r\n    tools:context=&quot;.MainActivity&quot;&gt;\r\n\r\n    &lt;LinearLayout\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:orientation=&quot;vertical&quot;\r\n        &gt;\r\n\r\n        &lt;TextView\r\n            android:id=&quot;@+id/textViewHistory&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;90dp&quot;\r\n            android:background=&quot;@color/white&quot;\r\n            android:gravity=&quot;center|end&quot;\r\n            android:textColor=&quot;@color/black&quot;\r\n            android:textSize=&quot;30sp&quot; /&gt;\r\n\r\n        &lt;TextView\r\n            android:id=&quot;@+id/textViewResult&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;110dp&quot;\r\n            android:background=&quot;@color/white&quot;\r\n            android:gravity=&quot;center|end&quot;\r\n            android:text=&quot;0&quot;\r\n            android:textColor=&quot;@color/black&quot;\r\n            android:textSize=&quot;60sp&quot;\r\n            tools:ignore=&quot;TextSizeCheck&quot; /&gt;\r\n\r\n    &lt;/LinearLayout&gt;\r\n\r\n    &lt;GridLayout\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:columnCount=&quot;4&quot;\r\n        android:rowCount=&quot;5&quot; &gt;\r\n\r\n        &lt;Button\r\n            android:id=&quot;@+id/btnAC&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;80dp&quot;\r\n            android:layout_row=&quot;0&quot;\r\n            android:layout_column=&quot;0&quot;\r\n            android:layout_columnWeight=&quot;1&quot;\r\n            android:background=&quot;@color/white&quot;\r\n            android:text=&quot;AC&quot;\r\n            android:textColor=&quot;@color/orange&quot;\r\n            android:textSize=&quot;30sp&quot; /&gt;\r\n\r\n        &lt;Button\r\n            android:id=&quot;@+id/btnDel&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;80dp&quot;\r\n            android:layout_row=&quot;0&quot;\r\n            android:layout_column=&quot;1&quot;\r\n            android:layout_columnWeight=&quot;1&quot;\r\n            android:background=&quot;@color/white&quot;\r\n            android:text=&quot;DEL&quot;\r\n            android:textColor=&quot;@color/orange&quot;\r\n            android:textSize=&quot;30sp&quot; /&gt;\r\n\r\n        &lt;Button\r\n            android:id=&quot;@+id/btnDivide&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;80dp&quot;\r\n            android:layout_row=&quot;0&quot;\r\n            android:layout_column=&quot;2&quot;\r\n            android:layout_columnWeight=&quot;1&quot;\r\n            android:background=&quot;@color/white&quot;\r\n            android:text=&quot;/&quot;\r\n            android:textColor=&quot;@color/orange&quot;\r\n            android:textSize=&quot;30sp&quot; /&gt;\r\n\r\n        &lt;Button\r\n            android:id=&quot;@+id/btnMulti&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;80dp&quot;\r\n            android:layout_row=&quot;0&quot;\r\n            android:layout_column=&quot;3&quot;\r\n            android:layout_columnWeight=&quot;1&quot;\r\n            android:background=&quot;@color/white&quot;\r\n            android:text=&quot;*&quot;\r\n            android:textColor=&quot;@color/orange&quot;\r\n            android:textSize=&quot;30sp&quot; /&gt;\r\n\r\n        &lt;Button\r\n            android:id=&quot;@+id/btn7&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;80dp&quot;\r\n            android:layout_row=&quot;1&quot;\r\n            android:layout_column=&quot;0&quot;\r\n            android:layout_columnWeight=&quot;1&quot;\r\n            android:background=&quot;@color/white&quot;\r\n            android:text=&quot;7&quot;\r\n            android:textColor=&quot;@color/black&quot;\r\n            android:textSize=&quot;30sp&quot; /&gt;\r\n\r\n        &lt;Button\r\n            android:id=&quot;@+id/btn8&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;80dp&quot;\r\n            android:layout_row=&quot;1&quot;\r\n            android:layout_column=&quot;1&quot;\r\n            android:layout_columnWeight=&quot;1&quot;\r\n            android:background=&quot;@color/white&quot;\r\n            android:text=&quot;8&quot;\r\n            android:textColor=&quot;@color/black&quot;\r\n            android:textSize=&quot;30sp&quot; /&gt;\r\n\r\n        &lt;Button\r\n            android:id=&quot;@+id/btn9&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;80dp&quot;\r\n            android:layout_row=&quot;1&quot;\r\n            android:layout_column=&quot;2&quot;\r\n            android:layout_columnWeight=&quot;1&quot;\r\n            android:background=&quot;@color/white&quot;\r\n            android:text=&quot;9&quot;\r\n            android:textColor=&quot;@color/black&quot;\r\n            android:textSize=&quot;30sp&quot; /&gt;\r\n\r\n        &lt;Button\r\n            android:id=&quot;@+id/btnMinus&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;80dp&quot;\r\n            android:layout_row=&quot;1&quot;\r\n            android:layout_column=&quot;3&quot;\r\n            android:layout_columnWeight=&quot;1&quot;\r\n            android:background=&quot;@color/white&quot;\r\n            android:text=&quot;-&quot;\r\n            android:textColor=&quot;@color/orange&quot;\r\n            android:textSize=&quot;30sp&quot; /&gt;\r\n\r\n        &lt;Button\r\n            android:id=&quot;@+id/btn4&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;80dp&quot;\r\n            android:layout_row=&quot;2&quot;\r\n            android:layout_column=&quot;0&quot;\r\n            android:layout_columnWeight=&quot;1&quot;\r\n            android:background=&quot;@color/white&quot;\r\n            android:text=&quot;4&quot;\r\n            android:textColor=&quot;@color/black&quot;\r\n            android:textSize=&quot;30sp&quot; /&gt;\r\n\r\n        &lt;Button\r\n            android:id=&quot;@+id/btn5&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;80dp&quot;\r\n            android:layout_row=&quot;2&quot;\r\n            android:layout_column=&quot;1&quot;\r\n            android:layout_columnWeight=&quot;1&quot;\r\n            android:background=&quot;@color/white&quot;\r\n            android:text=&quot;5&quot;\r\n            android:textColor=&quot;@color/black&quot;\r\n            android:textSize=&quot;30sp&quot; /&gt;\r\n\r\n        &lt;Button\r\n            android:id=&quot;@+id/btn6&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;80dp&quot;\r\n            android:layout_row=&quot;2&quot;\r\n            android:layout_column=&quot;2&quot;\r\n            android:layout_columnWeight=&quot;1&quot;\r\n            android:background=&quot;@color/white&quot;\r\n            android:text=&quot;6&quot;\r\n            android:textColor=&quot;@color/black&quot;\r\n            android:textSize=&quot;30sp&quot; /&gt;\r\n\r\n        &lt;Button\r\n            android:id=&quot;@+id/btnPlus&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;80dp&quot;\r\n            android:layout_row=&quot;2&quot;\r\n            android:layout_column=&quot;3&quot;\r\n            android:layout_columnWeight=&quot;1&quot;\r\n            android:background=&quot;@color/white&quot;\r\n            android:text=&quot;+&quot;\r\n            android:textColor=&quot;@color/orange&quot;\r\n            android:textSize=&quot;30sp&quot; /&gt;\r\n\r\n        &lt;Button\r\n            android:id=&quot;@+id/btn1&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;80dp&quot;\r\n            android:layout_row=&quot;3&quot;\r\n            android:layout_column=&quot;0&quot;\r\n            android:layout_columnWeight=&quot;1&quot;\r\n            android:background=&quot;@color/white&quot;\r\n            android:text=&quot;1&quot;\r\n            android:textColor=&quot;@color/black&quot;\r\n            android:textSize=&quot;30sp&quot; /&gt;\r\n\r\n        &lt;Button\r\n            android:id=&quot;@+id/btn2&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;80dp&quot;\r\n            android:layout_row=&quot;3&quot;\r\n            android:layout_column=&quot;1&quot;\r\n            android:layout_columnWeight=&quot;1&quot;\r\n            android:background=&quot;@color/white&quot;\r\n            android:text=&quot;2&quot;\r\n            android:textColor=&quot;@color/black&quot;\r\n            android:textSize=&quot;30sp&quot; /&gt;\r\n\r\n        &lt;Button\r\n            android:id=&quot;@+id/btn3&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;80dp&quot;\r\n            android:layout_row=&quot;3&quot;\r\n            android:layout_column=&quot;2&quot;\r\n            android:layout_columnWeight=&quot;1&quot;\r\n            android:background=&quot;@color/white&quot;\r\n            android:text=&quot;3&quot;\r\n            android:textColor=&quot;@color/black&quot;\r\n            android:textSize=&quot;30sp&quot; /&gt;\r\n\r\n        &lt;Button\r\n            android:id=&quot;@+id/btnEquals&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;80dp&quot;\r\n            android:layout_row=&quot;3&quot;\r\n            android:layout_rowSpan=&quot;2&quot;\r\n            android:layout_rowWeight=&quot;1&quot;\r\n            android:layout_column=&quot;3&quot;\r\n            android:layout_columnWeight=&quot;1&quot;\r\n            android:background=&quot;@color/orange&quot;\r\n            android:backgroundTint=&quot;@color/orange&quot;\r\n            android:text=&quot;=&quot;\r\n            android:textColor=&quot;@color/white&quot;\r\n            android:textSize=&quot;30sp&quot; /&gt;\r\n\r\n        &lt;Button\r\n            android:id=&quot;@+id/btnDot&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;80dp&quot;\r\n            android:layout_row=&quot;4&quot;\r\n            android:layout_column=&quot;0&quot;\r\n            android:layout_columnWeight=&quot;1&quot;\r\n            android:background=&quot;@color/white&quot;\r\n            android:text=&quot;.&quot;\r\n            android:textColor=&quot;@color/black&quot;\r\n            android:textSize=&quot;30sp&quot; /&gt;\r\n\r\n        &lt;Button\r\n            android:id=&quot;@+id/btn0&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;80dp&quot;\r\n            android:layout_row=&quot;4&quot;\r\n            android:layout_column=&quot;1&quot;\r\n            android:layout_columnSpan=&quot;2&quot;\r\n            android:layout_columnWeight=&quot;1&quot;\r\n            android:background=&quot;@color/white&quot;\r\n            android:text=&quot;0&quot;\r\n            android:textColor=&quot;@color/black&quot;\r\n            android:textSize=&quot;30sp&quot; /&gt;\r\n    &lt;/GridLayout&gt;\r\n\r\n&lt;/LinearLayout&gt;\r\n```\r\nHere is `themes.xml`:\r\n```\r\n&lt;resources xmlns:tools=&quot;http://schemas.android.com/tools&quot;&gt;\r\n    &lt;!-- Base application theme. --&gt;\r\n    &lt;style name=&quot;Theme.CalculatorEx&quot; parent=&quot;Theme.MaterialComponents.DayNight.DarkActionBar&quot;&gt;\r\n        &lt;!-- Primary brand color. --&gt;\r\n        &lt;item name=&quot;colorPrimary&quot;&gt;@color/purple_500&lt;/item&gt;\r\n        &lt;item name=&quot;colorPrimaryVariant&quot;&gt;@color/purple_700&lt;/item&gt;\r\n        &lt;item name=&quot;colorOnPrimary&quot;&gt;@color/white&lt;/item&gt;\r\n        &lt;!-- Secondary brand color. --&gt;\r\n        &lt;item name=&quot;colorSecondary&quot;&gt;@color/teal_200&lt;/item&gt;\r\n        &lt;item name=&quot;colorSecondaryVariant&quot;&gt;@color/teal_700&lt;/item&gt;\r\n        &lt;item name=&quot;colorOnSecondary&quot;&gt;@color/black&lt;/item&gt;\r\n        &lt;!-- Status bar color. --&gt;\r\n        &lt;item name=&quot;android:statusBarColor&quot;&gt;?attr/colorPrimaryVariant&lt;/item&gt;\r\n        &lt;!-- Customize your theme here. --&gt;\r\n    &lt;/style&gt;\r\n&lt;/resources&gt;\r\n```\r\nI don&#39;t think I need to add the .java code as I&#39;ve not touched it - only starting with the xml and then will build the .java - I just want to start from a solid base before proceeding.\r\n\r\nthanks in advance!","title":"Android Studio GridLayout is hidden","body":"<p>I have only completed the xml portion of this project, so there is no added code to the .java page.  I am using a LinearLayout as base and then adding a GridLayout with buttons.  I can see the buttons contained in the GridLayout in Design view however the background color is not displaying <code>android:background=&quot;@color/white&quot;</code> - so each numerical number button is:</p>\n<pre><code>            android:background=&quot;@color/white&quot;\n            android:text=&quot;7&quot;\n            android:textColor=&quot;@color/black&quot;\n</code></pre>\n<p>in colors.xml defined:</p>\n<pre><code>    &lt;color name=&quot;black&quot;&gt;#2E2C2C&lt;/color&gt;\n    &lt;color name=&quot;white&quot;&gt;#FFFFFF&lt;/color&gt;\n</code></pre>\n<p>the textColor is displaying in Design view but not the background:</p>\n<p><a href=\"https://i.stack.imgur.com/iYiVX.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/iYiVX.png\" alt=\"Here is the image in Design view (Android Studio)\" /></a></p>\n<p>From the Design view the background color is not displaying - when opening up in my phone nothing displays, buttons are hidden:</p>\n<p><a href=\"https://i.stack.imgur.com/JXaCy.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/JXaCy.png\" alt=\"View from Samsung phone as run from app\" /></a></p>\n<p>below is the xml code:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    android:orientation=&quot;vertical&quot;\n    tools:context=&quot;.MainActivity&quot;&gt;\n\n    &lt;LinearLayout\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:orientation=&quot;vertical&quot;\n        &gt;\n\n        &lt;TextView\n            android:id=&quot;@+id/textViewHistory&quot;\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;90dp&quot;\n            android:background=&quot;@color/white&quot;\n            android:gravity=&quot;center|end&quot;\n            android:textColor=&quot;@color/black&quot;\n            android:textSize=&quot;30sp&quot; /&gt;\n\n        &lt;TextView\n            android:id=&quot;@+id/textViewResult&quot;\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;110dp&quot;\n            android:background=&quot;@color/white&quot;\n            android:gravity=&quot;center|end&quot;\n            android:text=&quot;0&quot;\n            android:textColor=&quot;@color/black&quot;\n            android:textSize=&quot;60sp&quot;\n            tools:ignore=&quot;TextSizeCheck&quot; /&gt;\n\n    &lt;/LinearLayout&gt;\n\n    &lt;GridLayout\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:columnCount=&quot;4&quot;\n        android:rowCount=&quot;5&quot; &gt;\n\n        &lt;Button\n            android:id=&quot;@+id/btnAC&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;80dp&quot;\n            android:layout_row=&quot;0&quot;\n            android:layout_column=&quot;0&quot;\n            android:layout_columnWeight=&quot;1&quot;\n            android:background=&quot;@color/white&quot;\n            android:text=&quot;AC&quot;\n            android:textColor=&quot;@color/orange&quot;\n            android:textSize=&quot;30sp&quot; /&gt;\n\n        &lt;Button\n            android:id=&quot;@+id/btnDel&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;80dp&quot;\n            android:layout_row=&quot;0&quot;\n            android:layout_column=&quot;1&quot;\n            android:layout_columnWeight=&quot;1&quot;\n            android:background=&quot;@color/white&quot;\n            android:text=&quot;DEL&quot;\n            android:textColor=&quot;@color/orange&quot;\n            android:textSize=&quot;30sp&quot; /&gt;\n\n        &lt;Button\n            android:id=&quot;@+id/btnDivide&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;80dp&quot;\n            android:layout_row=&quot;0&quot;\n            android:layout_column=&quot;2&quot;\n            android:layout_columnWeight=&quot;1&quot;\n            android:background=&quot;@color/white&quot;\n            android:text=&quot;/&quot;\n            android:textColor=&quot;@color/orange&quot;\n            android:textSize=&quot;30sp&quot; /&gt;\n\n        &lt;Button\n            android:id=&quot;@+id/btnMulti&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;80dp&quot;\n            android:layout_row=&quot;0&quot;\n            android:layout_column=&quot;3&quot;\n            android:layout_columnWeight=&quot;1&quot;\n            android:background=&quot;@color/white&quot;\n            android:text=&quot;*&quot;\n            android:textColor=&quot;@color/orange&quot;\n            android:textSize=&quot;30sp&quot; /&gt;\n\n        &lt;Button\n            android:id=&quot;@+id/btn7&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;80dp&quot;\n            android:layout_row=&quot;1&quot;\n            android:layout_column=&quot;0&quot;\n            android:layout_columnWeight=&quot;1&quot;\n            android:background=&quot;@color/white&quot;\n            android:text=&quot;7&quot;\n            android:textColor=&quot;@color/black&quot;\n            android:textSize=&quot;30sp&quot; /&gt;\n\n        &lt;Button\n            android:id=&quot;@+id/btn8&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;80dp&quot;\n            android:layout_row=&quot;1&quot;\n            android:layout_column=&quot;1&quot;\n            android:layout_columnWeight=&quot;1&quot;\n            android:background=&quot;@color/white&quot;\n            android:text=&quot;8&quot;\n            android:textColor=&quot;@color/black&quot;\n            android:textSize=&quot;30sp&quot; /&gt;\n\n        &lt;Button\n            android:id=&quot;@+id/btn9&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;80dp&quot;\n            android:layout_row=&quot;1&quot;\n            android:layout_column=&quot;2&quot;\n            android:layout_columnWeight=&quot;1&quot;\n            android:background=&quot;@color/white&quot;\n            android:text=&quot;9&quot;\n            android:textColor=&quot;@color/black&quot;\n            android:textSize=&quot;30sp&quot; /&gt;\n\n        &lt;Button\n            android:id=&quot;@+id/btnMinus&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;80dp&quot;\n            android:layout_row=&quot;1&quot;\n            android:layout_column=&quot;3&quot;\n            android:layout_columnWeight=&quot;1&quot;\n            android:background=&quot;@color/white&quot;\n            android:text=&quot;-&quot;\n            android:textColor=&quot;@color/orange&quot;\n            android:textSize=&quot;30sp&quot; /&gt;\n\n        &lt;Button\n            android:id=&quot;@+id/btn4&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;80dp&quot;\n            android:layout_row=&quot;2&quot;\n            android:layout_column=&quot;0&quot;\n            android:layout_columnWeight=&quot;1&quot;\n            android:background=&quot;@color/white&quot;\n            android:text=&quot;4&quot;\n            android:textColor=&quot;@color/black&quot;\n            android:textSize=&quot;30sp&quot; /&gt;\n\n        &lt;Button\n            android:id=&quot;@+id/btn5&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;80dp&quot;\n            android:layout_row=&quot;2&quot;\n            android:layout_column=&quot;1&quot;\n            android:layout_columnWeight=&quot;1&quot;\n            android:background=&quot;@color/white&quot;\n            android:text=&quot;5&quot;\n            android:textColor=&quot;@color/black&quot;\n            android:textSize=&quot;30sp&quot; /&gt;\n\n        &lt;Button\n            android:id=&quot;@+id/btn6&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;80dp&quot;\n            android:layout_row=&quot;2&quot;\n            android:layout_column=&quot;2&quot;\n            android:layout_columnWeight=&quot;1&quot;\n            android:background=&quot;@color/white&quot;\n            android:text=&quot;6&quot;\n            android:textColor=&quot;@color/black&quot;\n            android:textSize=&quot;30sp&quot; /&gt;\n\n        &lt;Button\n            android:id=&quot;@+id/btnPlus&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;80dp&quot;\n            android:layout_row=&quot;2&quot;\n            android:layout_column=&quot;3&quot;\n            android:layout_columnWeight=&quot;1&quot;\n            android:background=&quot;@color/white&quot;\n            android:text=&quot;+&quot;\n            android:textColor=&quot;@color/orange&quot;\n            android:textSize=&quot;30sp&quot; /&gt;\n\n        &lt;Button\n            android:id=&quot;@+id/btn1&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;80dp&quot;\n            android:layout_row=&quot;3&quot;\n            android:layout_column=&quot;0&quot;\n            android:layout_columnWeight=&quot;1&quot;\n            android:background=&quot;@color/white&quot;\n            android:text=&quot;1&quot;\n            android:textColor=&quot;@color/black&quot;\n            android:textSize=&quot;30sp&quot; /&gt;\n\n        &lt;Button\n            android:id=&quot;@+id/btn2&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;80dp&quot;\n            android:layout_row=&quot;3&quot;\n            android:layout_column=&quot;1&quot;\n            android:layout_columnWeight=&quot;1&quot;\n            android:background=&quot;@color/white&quot;\n            android:text=&quot;2&quot;\n            android:textColor=&quot;@color/black&quot;\n            android:textSize=&quot;30sp&quot; /&gt;\n\n        &lt;Button\n            android:id=&quot;@+id/btn3&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;80dp&quot;\n            android:layout_row=&quot;3&quot;\n            android:layout_column=&quot;2&quot;\n            android:layout_columnWeight=&quot;1&quot;\n            android:background=&quot;@color/white&quot;\n            android:text=&quot;3&quot;\n            android:textColor=&quot;@color/black&quot;\n            android:textSize=&quot;30sp&quot; /&gt;\n\n        &lt;Button\n            android:id=&quot;@+id/btnEquals&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;80dp&quot;\n            android:layout_row=&quot;3&quot;\n            android:layout_rowSpan=&quot;2&quot;\n            android:layout_rowWeight=&quot;1&quot;\n            android:layout_column=&quot;3&quot;\n            android:layout_columnWeight=&quot;1&quot;\n            android:background=&quot;@color/orange&quot;\n            android:backgroundTint=&quot;@color/orange&quot;\n            android:text=&quot;=&quot;\n            android:textColor=&quot;@color/white&quot;\n            android:textSize=&quot;30sp&quot; /&gt;\n\n        &lt;Button\n            android:id=&quot;@+id/btnDot&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;80dp&quot;\n            android:layout_row=&quot;4&quot;\n            android:layout_column=&quot;0&quot;\n            android:layout_columnWeight=&quot;1&quot;\n            android:background=&quot;@color/white&quot;\n            android:text=&quot;.&quot;\n            android:textColor=&quot;@color/black&quot;\n            android:textSize=&quot;30sp&quot; /&gt;\n\n        &lt;Button\n            android:id=&quot;@+id/btn0&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;80dp&quot;\n            android:layout_row=&quot;4&quot;\n            android:layout_column=&quot;1&quot;\n            android:layout_columnSpan=&quot;2&quot;\n            android:layout_columnWeight=&quot;1&quot;\n            android:background=&quot;@color/white&quot;\n            android:text=&quot;0&quot;\n            android:textColor=&quot;@color/black&quot;\n            android:textSize=&quot;30sp&quot; /&gt;\n    &lt;/GridLayout&gt;\n\n&lt;/LinearLayout&gt;\n</code></pre>\n<p>Here is <code>themes.xml</code>:</p>\n<pre><code>&lt;resources xmlns:tools=&quot;http://schemas.android.com/tools&quot;&gt;\n    &lt;!-- Base application theme. --&gt;\n    &lt;style name=&quot;Theme.CalculatorEx&quot; parent=&quot;Theme.MaterialComponents.DayNight.DarkActionBar&quot;&gt;\n        &lt;!-- Primary brand color. --&gt;\n        &lt;item name=&quot;colorPrimary&quot;&gt;@color/purple_500&lt;/item&gt;\n        &lt;item name=&quot;colorPrimaryVariant&quot;&gt;@color/purple_700&lt;/item&gt;\n        &lt;item name=&quot;colorOnPrimary&quot;&gt;@color/white&lt;/item&gt;\n        &lt;!-- Secondary brand color. --&gt;\n        &lt;item name=&quot;colorSecondary&quot;&gt;@color/teal_200&lt;/item&gt;\n        &lt;item name=&quot;colorSecondaryVariant&quot;&gt;@color/teal_700&lt;/item&gt;\n        &lt;item name=&quot;colorOnSecondary&quot;&gt;@color/black&lt;/item&gt;\n        &lt;!-- Status bar color. --&gt;\n        &lt;item name=&quot;android:statusBarColor&quot;&gt;?attr/colorPrimaryVariant&lt;/item&gt;\n        &lt;!-- Customize your theme here. --&gt;\n    &lt;/style&gt;\n&lt;/resources&gt;\n</code></pre>\n<p>I don't think I need to add the .java code as I've not touched it - only starting with the xml and then will build the .java - I just want to start from a solid base before proceeding.</p>\n<p>thanks in advance!</p>\n"},{"tags":["java","string","substring","indexof"],"answers":[{"tags":[],"owner":{"account_id":2095246,"reputation":43828,"user_id":1864167,"accept_rate":90,"display_name":"Jeroen Vannevel"},"down_vote_count":0,"up_vote_count":38,"is_accepted":false,"score":38,"last_activity_date":1380220231,"creation_date":1380220231,"answer_id":19035942,"question_id":19035893,"body_markdown":"    int first = string.indexOf(&quot;is&quot;);\r\n    int second = string.indexOf(&quot;is&quot;, first + 1);\r\n\r\nThis overload starts looking for the substring from the given index.","title":"Finding second occurrence of a substring in a string in Java","body":"<pre><code>int first = string.indexOf(\"is\");\nint second = string.indexOf(\"is\", first + 1);\n</code></pre>\n\n<p>This overload starts looking for the substring from the given index.</p>\n"},{"tags":[],"owner":{"account_id":1853886,"reputation":210597,"user_id":1679863,"accept_rate":77,"display_name":"Rohit Jain"},"down_vote_count":1,"up_vote_count":220,"is_accepted":true,"score":219,"last_activity_date":1538766079,"creation_date":1380220240,"answer_id":19035944,"question_id":19035893,"body_markdown":"Use overloaded version of [`indexOf()`][1], which takes the starting index  (fromIndex) as 2nd parameter:\r\n\r\n\r\n    str.indexOf(&quot;is&quot;, str.indexOf(&quot;is&quot;) + 1);\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/8/docs/api/java/lang/String.html#indexOf-java.lang.String-int-","title":"Finding second occurrence of a substring in a string in Java","body":"<p>Use overloaded version of <a href=\"http://docs.oracle.com/javase/8/docs/api/java/lang/String.html#indexOf-java.lang.String-int-\" rel=\"noreferrer\"><code>indexOf()</code></a>, which takes the starting index  (fromIndex) as 2nd parameter:</p>\n\n<pre><code>str.indexOf(\"is\", str.indexOf(\"is\") + 1);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2258121,"reputation":1070,"user_id":1988845,"accept_rate":86,"display_name":"Pravat Panda"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1380220371,"creation_date":1380220371,"answer_id":19035983,"question_id":19035893,"body_markdown":"i think a loop can be used.\r\n\r\n    1 - check if the last index of substring is not the end of the main string.\r\n    2 - take a new substring from the last index of the substring to the last index of the main string and check if it contains the search string\r\n    3 - repeat the steps in a loop","title":"Finding second occurrence of a substring in a string in Java","body":"<p>i think a loop can be used.</p>\n\n<pre><code>1 - check if the last index of substring is not the end of the main string.\n2 - take a new substring from the last index of the substring to the last index of the main string and check if it contains the search string\n3 - repeat the steps in a loop\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3953363,"reputation":31,"user_id":3262819,"display_name":"namnt"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1400389921,"creation_date":1400389921,"answer_id":23718773,"question_id":19035893,"body_markdown":"You can write a function to return array of occurrence positions, Java has String.regionMatches function which is quite handy\r\n\r\n    public static ArrayList&lt;Integer&gt; occurrencesPos(String str, String substr) {\r\n\t\tfinal boolean ignoreCase = true;\r\n\t\tint substrLength = substr.length();\r\n\t\tint strLength = str.length();\r\n\t\t\r\n\t\tArrayList&lt;Integer&gt; occurrenceArr = new ArrayList&lt;Integer&gt;();\r\n\t\t\r\n\t\tfor(int i = 0; i &lt; strLength - substrLength + 1; i++) {\r\n\t\t\tif(str.regionMatches(ignoreCase, i, substr, 0, substrLength))  {\r\n\t\t\t\toccurrenceArr.add(i);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn occurrenceArr;\r\n    }","title":"Finding second occurrence of a substring in a string in Java","body":"<p>You can write a function to return array of occurrence positions, Java has String.regionMatches function which is quite handy</p>\n\n<pre><code>public static ArrayList&lt;Integer&gt; occurrencesPos(String str, String substr) {\n    final boolean ignoreCase = true;\n    int substrLength = substr.length();\n    int strLength = str.length();\n\n    ArrayList&lt;Integer&gt; occurrenceArr = new ArrayList&lt;Integer&gt;();\n\n    for(int i = 0; i &lt; strLength - substrLength + 1; i++) {\n        if(str.regionMatches(ignoreCase, i, substr, 0, substrLength))  {\n            occurrenceArr.add(i);\n        }\n    }\n    return occurrenceArr;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1749879,"reputation":3381,"user_id":1599213,"accept_rate":33,"display_name":"To Kra"},"down_vote_count":0,"up_vote_count":58,"is_accepted":false,"score":58,"last_activity_date":1454420270,"creation_date":1454420270,"answer_id":35155037,"question_id":19035893,"body_markdown":"I am using: \r\n[Apache Commons Lang: StringUtils.ordinalIndexOf()][1]\r\n\r\n    StringUtils.ordinalIndexOf(&quot;Java Language&quot;, &quot;a&quot;, 2)\r\n\r\n\r\n  [1]: https://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/StringUtils.html#ordinalIndexOf(java.lang.CharSequence,%20java.lang.CharSequence,%20int)","title":"Finding second occurrence of a substring in a string in Java","body":"<p>I am using: \n<a href=\"https://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/StringUtils.html#ordinalIndexOf(java.lang.CharSequence,%20java.lang.CharSequence,%20int)\" rel=\"noreferrer\">Apache Commons Lang: StringUtils.ordinalIndexOf()</a></p>\n\n<pre><code>StringUtils.ordinalIndexOf(\"Java Language\", \"a\", 2)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5786911,"reputation":1317,"user_id":4565796,"display_name":"Saeed Arianmanesh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1608467465,"creation_date":1608467465,"answer_id":65379877,"question_id":19035893,"body_markdown":"if you want to find index for more than 2 occurrence:\r\n\r\n    public static int ordinalIndexOf(String fullText,String subText,int pos){\r\n\r\n        if(fullText.contains(subText)){\r\n            if(pos &lt;= 1){\r\n                return fullText.indexOf(subText);\r\n            }else{\r\n                --pos;\r\n                return fullText.indexOf(subText, ( ordinalIndexOf(fullText,subText,pos) + 1) );\r\n            }\r\n        }else{\r\n            return -1;\r\n        }\r\n\r\n    }","title":"Finding second occurrence of a substring in a string in Java","body":"<p>if you want to find index for more than 2 occurrence:</p>\n<pre><code>public static int ordinalIndexOf(String fullText,String subText,int pos){\n\n    if(fullText.contains(subText)){\n        if(pos &lt;= 1){\n            return fullText.indexOf(subText);\n        }else{\n            --pos;\n            return fullText.indexOf(subText, ( ordinalIndexOf(fullText,subText,pos) + 1) );\n        }\n    }else{\n        return -1;\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6834571,"reputation":1130,"user_id":5257091,"display_name":"Hasnaa Ibraheem"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1611167069,"creation_date":1611167069,"answer_id":65815422,"question_id":19035893,"body_markdown":"I hope I&#39;m not late to the party.. Here is my answer. I like using Pattern/Matcher because it uses regex which should be more efficient. Yet, I think this answer could be enhanced:&lt;br&gt;\r\n\r\n        Matcher matcher = Pattern.compile(&quot;is&quot;).matcher(&quot;I think there is a smarter solution, isn&#39;t there?&quot;);\r\n        int numOfOcurrences = 2;\r\n        for(int i = 0; i &lt; numOfOcurrences; i++) matcher.find();\r\n        System.out.println(&quot;Index: &quot; + matcher.start());","title":"Finding second occurrence of a substring in a string in Java","body":"<p>I hope I'm not late to the party.. Here is my answer. I like using Pattern/Matcher because it uses regex which should be more efficient. Yet, I think this answer could be enhanced:<br></p>\n<pre><code>    Matcher matcher = Pattern.compile(&quot;is&quot;).matcher(&quot;I think there is a smarter solution, isn't there?&quot;);\n    int numOfOcurrences = 2;\n    for(int i = 0; i &lt; numOfOcurrences; i++) matcher.find();\n    System.out.println(&quot;Index: &quot; + matcher.start());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3155278,"reputation":197,"user_id":2667819,"display_name":"bence of outer space"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1622450911,"creation_date":1622450911,"answer_id":67770568,"question_id":19035893,"body_markdown":"It seems to be a good party... I&#39;m in:\r\n\r\n    public static int nthIndexOf(String str, String subStr, int count) {\r\n    \tint ind = -1;\r\n    \twhile(count &gt; 0) {\r\n    \t\tind = str.indexOf(subStr, ind + 1);\r\n    \t\tif(ind == -1) return -1;\r\n    \t\tcount--;\r\n    \t}\r\n    \treturn ind;\r\n    }","title":"Finding second occurrence of a substring in a string in Java","body":"<p>It seems to be a good party... I'm in:</p>\n<pre><code>public static int nthIndexOf(String str, String subStr, int count) {\n    int ind = -1;\n    while(count &gt; 0) {\n        ind = str.indexOf(subStr, ind + 1);\n        if(ind == -1) return -1;\n        count--;\n    }\n    return ind;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12548770,"reputation":187,"user_id":9131207,"display_name":"Rahid Zeynalov"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1658757966,"creation_date":1658757966,"answer_id":73110615,"question_id":19035893,"body_markdown":"Anyone who is looking for [Nth occurance of string][1]\r\n\r\n\r\n\r\n        public class NthOccuranceExample {\r\n        \r\n        public static void main(String[] args) {\r\n            String str1 = &quot;helloworld good morning good evening good night&quot;;\r\n            String str2 = &quot;ing&quot;;\r\n            int n = 2;\r\n        \r\n            int index = nthOccurrence(str1, str2, n);\r\n            System.out.println(&quot;index of str2 in str1 at occurrence &quot;+ n +&quot; = &quot;+ index);\r\n        }\r\n        \r\n        public static int nthOccurrence(String str1, String str2, int n) {\r\n        \r\n            String tempStr = str1;\r\n            int tempIndex = -1;\r\n            int finalIndex = 0;\r\n            for(int occurrence = 0; occurrence &lt; n ; ++occurrence){\r\n                tempIndex = tempStr.indexOf(str2);\r\n                if(tempIndex==-1){\r\n                    finalIndex = 0;\r\n                    break;\r\n                }\r\n                tempStr = tempStr.substring(++tempIndex);\r\n                finalIndex+=tempIndex;\r\n            }\r\n            return --finalIndex;\r\n        }\r\n    }\r\n\r\n\r\n  [1]: https://www.tutorialkart.com/java/get-the-index-of-nth-occurrence-of-a-substring-in-a-string-using-java/","title":"Finding second occurrence of a substring in a string in Java","body":"<p>Anyone who is looking for <a href=\"https://www.tutorialkart.com/java/get-the-index-of-nth-occurrence-of-a-substring-in-a-string-using-java/\" rel=\"nofollow noreferrer\">Nth occurance of string</a></p>\n<pre><code>    public class NthOccuranceExample {\n    \n    public static void main(String[] args) {\n        String str1 = &quot;helloworld good morning good evening good night&quot;;\n        String str2 = &quot;ing&quot;;\n        int n = 2;\n    \n        int index = nthOccurrence(str1, str2, n);\n        System.out.println(&quot;index of str2 in str1 at occurrence &quot;+ n +&quot; = &quot;+ index);\n    }\n    \n    public static int nthOccurrence(String str1, String str2, int n) {\n    \n        String tempStr = str1;\n        int tempIndex = -1;\n        int finalIndex = 0;\n        for(int occurrence = 0; occurrence &lt; n ; ++occurrence){\n            tempIndex = tempStr.indexOf(str2);\n            if(tempIndex==-1){\n                finalIndex = 0;\n                break;\n            }\n            tempStr = tempStr.substring(++tempIndex);\n            finalIndex+=tempIndex;\n        }\n        return --finalIndex;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4998645,"reputation":1806,"user_id":4018293,"display_name":"javasenior"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1679501626,"creation_date":1679501626,"answer_id":75814741,"question_id":19035893,"body_markdown":"You can get any occurrence of a substring in a string with a recursive method like this without any libraries:\r\n\r\n    import java.util.Arrays;\r\n    \r\n    public class Test {\r\n        public static void main(String[] args) {\r\n            String word = &quot;unrestfulness&quot;;\r\n            String[] temp = new String[word.length()];\r\n            for (char c : word.toCharArray()) {\r\n                int count = (int) Arrays.stream(temp).filter(e -&gt; e != null &amp;&amp; e.contains(String.valueOf(c))).count();\r\n                int index = getIndex(word, String.valueOf(c), count);\r\n                System.out.println(c + &quot; &quot; + count + &quot; &quot; + index);\r\n                temp[index] = String.valueOf(c);\r\n            }\r\n        \r\n            System.out.println(&quot;result -&gt; &quot; + Arrays.toString(temp));\r\n        }\r\n        \r\n        public static int getIndex(String word, String letter, int count) {\r\n            return count == 0 ? word.indexOf(letter) : word.indexOf(letter, getIndex(word, letter, count - 1) + 1);\r\n        }\r\n    }","title":"Finding second occurrence of a substring in a string in Java","body":"<p>You can get any occurrence of a substring in a string with a recursive method like this without any libraries:</p>\n<pre><code>import java.util.Arrays;\n\npublic class Test {\n    public static void main(String[] args) {\n        String word = &quot;unrestfulness&quot;;\n        String[] temp = new String[word.length()];\n        for (char c : word.toCharArray()) {\n            int count = (int) Arrays.stream(temp).filter(e -&gt; e != null &amp;&amp; e.contains(String.valueOf(c))).count();\n            int index = getIndex(word, String.valueOf(c), count);\n            System.out.println(c + &quot; &quot; + count + &quot; &quot; + index);\n            temp[index] = String.valueOf(c);\n        }\n    \n        System.out.println(&quot;result -&gt; &quot; + Arrays.toString(temp));\n    }\n    \n    public static int getIndex(String word, String letter, int count) {\n        return count == 0 ? word.indexOf(letter) : word.indexOf(letter, getIndex(word, letter, count - 1) + 1);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":2671268,"reputation":2439,"user_id":2781402,"accept_rate":77,"display_name":"AmanArora"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":206836,"favorite_count":0,"down_vote_count":0,"up_vote_count":103,"accepted_answer_id":19035944,"answer_count":10,"score":103,"last_activity_date":1679501626,"creation_date":1380220119,"question_id":19035893,"body_markdown":"We are given a string, say, `&quot;itiswhatitis&quot;` and a substring, say, `&quot;is&quot;`.\r\nI need to find the index of `&#39;i&#39;` when the string `&quot;is&quot;` occurs a second time in the original string.\r\n\r\n`String.indexOf(&quot;is&quot;)` will return 2 in this case. I want the output to be 10 in this case.","title":"Finding second occurrence of a substring in a string in Java","body":"<p>We are given a string, say, <code>\"itiswhatitis\"</code> and a substring, say, <code>\"is\"</code>.\nI need to find the index of <code>'i'</code> when the string <code>\"is\"</code> occurs a second time in the original string.</p>\n\n<p><code>String.indexOf(\"is\")</code> will return 2 in this case. I want the output to be 10 in this case.</p>\n"},{"tags":["java","jackson","lombok"],"answers":[{"tags":[],"owner":{"account_id":19535095,"reputation":2864,"user_id":14294053,"display_name":"Mar-Z"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1679426099,"creation_date":1679426099,"answer_id":75805497,"question_id":75805089,"body_markdown":"The code line *new Request(&quot;&quot;)* creates a non-empty list with one element which is an empty string. Hence the output is correct.\r\n\r\nIf you want to exclude both *empty list* and a *list with only empty elements* - add the *content* attribute. Like this:\r\n\r\n    @JsonInclude(value=Include.NON_EMPTY, content=Include.NON_EMPTY)\r\n    List&lt;String&gt; institutionIds;","title":"objectWriter is not respecting JsonInclude.Include.NON_EMPTY on ArrayList","body":"<p>The code line <em>new Request(&quot;&quot;)</em> creates a non-empty list with one element which is an empty string. Hence the output is correct.</p>\n<p>If you want to exclude both <em>empty list</em> and a <em>list with only empty elements</em> - add the <em>content</em> attribute. Like this:</p>\n<pre><code>@JsonInclude(value=Include.NON_EMPTY, content=Include.NON_EMPTY)\nList&lt;String&gt; institutionIds;\n</code></pre>\n"}],"owner":{"account_id":9606247,"reputation":1346,"user_id":9236477,"accept_rate":100,"display_name":"Kaigo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":70,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1679501342,"creation_date":1679423282,"question_id":75805089,"body_markdown":"I&#39;m trying to stop an empty list being present in JSON when using objectWritter.\r\n\r\nHere is the object which contains a list of strings\r\n\r\n    public class Request {\r\n    \r\n        @JsonInclude(JsonInclude.Include.NON_EMPTY)\r\n        List&lt;String&gt; institutionIds;\r\n    \r\n        public Request(String institutionIds) {\r\n            this.institutionIds = List.of(institutionIds);\r\n        }\r\n    \r\n        public List&lt;String&gt; getInstitutionIds() {\r\n            return institutionIds;\r\n        }\r\n    }\r\n\r\nand here is where I&#39;m converting into json\r\n\r\n    public class ObjectWritterApplication {\r\n        private static final ObjectWriter objectWriter = new ObjectMapper().writerWithDefaultPrettyPrinter();\r\n    \r\n        public static void main(String[] args) throws JsonProcessingException {\r\n            var request = new Request(&quot;&quot;);\r\n    \r\n            var json = objectWriter.writeValueAsString(request);\r\n    \r\n            System.out.println(json);\r\n        }\r\n    }\r\n\r\nMy issue is the output contains an empty list which I don&#39;t want.\r\n\r\nOutput:\r\n\r\n&gt; {\r\n  &quot;institutionIds&quot; : [ &quot;&quot; ]\r\n}","title":"objectWriter is not respecting JsonInclude.Include.NON_EMPTY on ArrayList","body":"<p>I'm trying to stop an empty list being present in JSON when using objectWritter.</p>\n<p>Here is the object which contains a list of strings</p>\n<pre><code>public class Request {\n\n    @JsonInclude(JsonInclude.Include.NON_EMPTY)\n    List&lt;String&gt; institutionIds;\n\n    public Request(String institutionIds) {\n        this.institutionIds = List.of(institutionIds);\n    }\n\n    public List&lt;String&gt; getInstitutionIds() {\n        return institutionIds;\n    }\n}\n</code></pre>\n<p>and here is where I'm converting into json</p>\n<pre><code>public class ObjectWritterApplication {\n    private static final ObjectWriter objectWriter = new ObjectMapper().writerWithDefaultPrettyPrinter();\n\n    public static void main(String[] args) throws JsonProcessingException {\n        var request = new Request(&quot;&quot;);\n\n        var json = objectWriter.writeValueAsString(request);\n\n        System.out.println(json);\n    }\n}\n</code></pre>\n<p>My issue is the output contains an empty list which I don't want.</p>\n<p>Output:</p>\n<blockquote>\n<p>{\n&quot;institutionIds&quot; : [ &quot;&quot; ]\n}</p>\n</blockquote>\n"},{"tags":["java","date","api-design"],"comments":[{"owner":{"account_id":22774,"reputation":18102,"user_id":56524,"accept_rate":45,"display_name":"mP."},"score":1,"creation_date":1255599820,"post_id":1571265,"comment_id":1431652,"body_markdown":"A double negative is always bad form...Date is mutable not Date is not immutable.","body":"A double negative is always bad form...Date is mutable not Date is not immutable."},{"owner":{"account_id":26957,"reputation":564361,"user_id":70604,"display_name":"Pascal Thivent"},"score":2,"creation_date":1255600096,"post_id":1571265,"comment_id":1431667,"body_markdown":"Hopefully, the new Date and Time APIs of JSR-310, based on Joda-Time, will ship in Java 7.","body":"Hopefully, the new Date and Time APIs of JSR-310, based on Joda-Time, will ship in Java 7."},{"owner":{"account_id":30810,"reputation":23008,"user_id":84237,"accept_rate":100,"display_name":"Arjan"},"score":5,"creation_date":1255600188,"post_id":1571265,"comment_id":1431678,"body_markdown":"And DateFormat is not designed to be thread-safe... (http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4093418)","body":"And DateFormat is not designed to be thread-safe... (<a href=\"http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4093418\" rel=\"nofollow noreferrer\">bugs.sun.com/bugdatabase/view_bug.do?bug_id=4093418</a>)"},{"owner":{"account_id":1710,"reputation":18740,"user_id":2309,"accept_rate":79,"display_name":"Mario Orteg&#243;n"},"score":10,"creation_date":1255602075,"post_id":1571265,"comment_id":1431837,"body_markdown":"@S.Lott: I don&#39;t agree.  We don&#39;t live in isolation.  We aren&#39;t born as great software architects that know the right solution with no forethought.  We have to learn, and learning from past mistakes is useful.","body":"@S.Lott: I don&#39;t agree.  We don&#39;t live in isolation.  We aren&#39;t born as great software architects that know the right solution with no forethought.  We have to learn, and learning from past mistakes is useful."},{"owner":{"account_id":9608,"reputation":17506,"user_id":17832,"display_name":"JeeBee"},"score":0,"creation_date":1260806308,"post_id":1571265,"comment_id":1804858,"body_markdown":"Hindsight is a wonderful thing, isn&#39;t it. I can excuse Date, even if it is a glorified UnixTimestamp with millisecond accuracy tacked on. I can&#39;t excuse Calendar. The new APIs should have fifteen years of experience distilled inside them so they work well for programmers (JodaTime is pretty good).","body":"Hindsight is a wonderful thing, isn&#39;t it. I can excuse Date, even if it is a glorified UnixTimestamp with millisecond accuracy tacked on. I can&#39;t excuse Calendar. The new APIs should have fifteen years of experience distilled inside them so they work well for programmers (JodaTime is pretty good)."},{"owner":{"account_id":8326,"reputation":258545,"user_id":14955,"accept_rate":55,"display_name":"Thilo"},"score":1,"creation_date":1292567145,"post_id":1571265,"comment_id":4883653,"body_markdown":"And February is month number 1.","body":"And February is month number 1."},{"owner":{"account_id":18868,"reputation":82004,"user_id":43681,"accept_rate":70,"display_name":"sleske"},"score":2,"creation_date":1292582061,"post_id":1571265,"comment_id":4885209,"body_markdown":"@Thilo: True, but that&#39;s actually the least of its problems. I *might* even excuse that, seeing that programmers are used to counting from 0. But then again, DAY_OF_MONTH and DAY_OF_YEAR *are* one-based... so it&#39;s not really excusabe.","body":"@Thilo: True, but that&#39;s actually the least of its problems. I <i>might</i> even excuse that, seeing that programmers are used to counting from 0. But then again, DAY_OF_MONTH and DAY_OF_YEAR <i>are</i> one-based... so it&#39;s not really excusabe."}],"answers":[{"tags":[],"owner":{"account_id":9867,"reputation":618181,"user_id":18393,"accept_rate":82,"display_name":"cletus"},"down_vote_count":1,"up_vote_count":22,"is_accepted":false,"score":21,"last_activity_date":1441013506,"creation_date":1255599676,"answer_id":1571312,"question_id":1571265,"body_markdown":"Java&#39;s early APIs are nothing more than a product of their time. Immutability only became a popular concept years after that. You say that immutability is &quot;obvious&quot;. That might be true now but it wasn&#39;t then. Just like dependency injection is now &quot;obvious&quot; but it wasn&#39;t 10 years ago.\r\n\r\nIt was also at one time expensive to create Calendar objects.\r\n\r\nThey remain that way for backwards compatibility reasons. What is perhaps more unfortunate was that once the mistake was realized the old class wasn&#39;t deprecated and new date/time classes were created for all APIs going forward. This has to some degree occurred with the JDK 8 adoption of a JodaTime like API (`java.time`, JSR 310) but really it&#39;s too little too late.\r\n","title":"Why is the Java date API (java.util.Date, .Calendar) such a mess?","body":"<p>Java's early APIs are nothing more than a product of their time. Immutability only became a popular concept years after that. You say that immutability is \"obvious\". That might be true now but it wasn't then. Just like dependency injection is now \"obvious\" but it wasn't 10 years ago.</p>\n\n<p>It was also at one time expensive to create Calendar objects.</p>\n\n<p>They remain that way for backwards compatibility reasons. What is perhaps more unfortunate was that once the mistake was realized the old class wasn't deprecated and new date/time classes were created for all APIs going forward. This has to some degree occurred with the JDK 8 adoption of a JodaTime like API (<code>java.time</code>, JSR 310) but really it's too little too late.</p>\n"},{"tags":[],"owner":{"account_id":23503,"reputation":28545,"user_id":58956,"accept_rate":91,"display_name":"gustafc"},"down_vote_count":0,"up_vote_count":45,"is_accepted":true,"score":45,"last_activity_date":1441013008,"creation_date":1255599943,"answer_id":1571329,"question_id":1571265,"body_markdown":"Someone put it better than I could ever say it:\r\n\r\n&gt; * Class `Date` represents a specific instant in time, with millisecond\r\n&gt; precision. The design of this class is a very bad joke - a sobering\r\n&gt; example of how even good programmers screw up. Most of the methods in\r\n&gt; Date are now deprecated, replaced by methods in the classes below.\r\n&gt; * Class `Calendar` is an abstract class for converting between a `Date`\r\n&gt; object and a set of integer fields such as year, month, day, and hour.\r\n&gt; \r\n&gt; * Class `GregorianCalendar` is the only subclass of `Calendar` in the JDK.\r\n&gt; It does the Date-to-fields conversions for the calendar system in\r\n&gt; common use. Sun licensed this overengineered junk from Taligent - a\r\n&gt; sobering example of how average programmers screw up.\r\n\r\nfrom *Java Programmers FAQ*, version from 07.X.1998, by Peter van der Linden -  this part was removed from later versions though.\r\n\r\nAs for mutability, a lot of the early JDK classes suffer from it (`Point`, `Rectangle`, `Dimension`, ...). Misdirected optimizations, I&#39;ve heard some say.\r\n\r\nThe idea is that you want to be able to reuse objects (`o.getPosition().x += 5`) rather than creating copies (`o.setPosition(o.getPosition().add(5, 0))`) as you have to do with immutables. This may even have been a good idea with the early VMs, while it&#39;s most likely isn&#39;t with modern VMs.","title":"Why is the Java date API (java.util.Date, .Calendar) such a mess?","body":"<p>Someone put it better than I could ever say it:</p>\n\n<blockquote>\n  <ul>\n  <li>Class <code>Date</code> represents a specific instant in time, with millisecond\n  precision. The design of this class is a very bad joke - a sobering\n  example of how even good programmers screw up. Most of the methods in\n  Date are now deprecated, replaced by methods in the classes below.</li>\n  <li><p>Class <code>Calendar</code> is an abstract class for converting between a <code>Date</code>\n  object and a set of integer fields such as year, month, day, and hour.</p></li>\n  <li><p>Class <code>GregorianCalendar</code> is the only subclass of <code>Calendar</code> in the JDK.\n  It does the Date-to-fields conversions for the calendar system in\n  common use. Sun licensed this overengineered junk from Taligent - a\n  sobering example of how average programmers screw up.</p></li>\n  </ul>\n</blockquote>\n\n<p>from <em>Java Programmers FAQ</em>, version from 07.X.1998, by Peter van der Linden -  this part was removed from later versions though.</p>\n\n<p>As for mutability, a lot of the early JDK classes suffer from it (<code>Point</code>, <code>Rectangle</code>, <code>Dimension</code>, ...). Misdirected optimizations, I've heard some say.</p>\n\n<p>The idea is that you want to be able to reuse objects (<code>o.getPosition().x += 5</code>) rather than creating copies (<code>o.setPosition(o.getPosition().add(5, 0))</code>) as you have to do with immutables. This may even have been a good idea with the early VMs, while it's most likely isn't with modern VMs.</p>\n"},{"tags":[],"owner":{"account_id":58943,"reputation":1306,"user_id":176430,"display_name":"dz."},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1255606693,"creation_date":1255606693,"answer_id":1571835,"question_id":1571265,"body_markdown":"Time is itself not easy to measure and to handle with. Just look at the length of the wikipedia article about [time][1]. And then, there are different understandings about time itself: a absoulte time point (as a constant), a time point at a certain place, a time range, the resolution of time....\r\n\r\nI remember, when i saw java.util.Date the first time (JDK 1.0?) i was *really* happy about it. The languages i knew of didn&#39;t had such a feature. I didn&#39;t have  think about time conversion etc.\r\n\r\nI think it&#39;s mess, because everything that changes leaves a mess if you evolve from one level of understanding (XMLGregorianCaldender vs. Date) and requirements (Nanoseconds, past 2030) to higher level, but keeping the old untouched. And java.util.Date is not a Exception. Just look at the I/O subsystem or the transition from AWT to Swing...\r\n\r\nAnd because of that, &quot;we should sometimes press the reset button.&quot; (who said that, btw.?)\r\n\r\n\r\n\r\n  [1]: http://en.wikipedia.org/wiki/Time","title":"Why is the Java date API (java.util.Date, .Calendar) such a mess?","body":"<p>Time is itself not easy to measure and to handle with. Just look at the length of the wikipedia article about <a href=\"http://en.wikipedia.org/wiki/Time\" rel=\"noreferrer\">time</a>. And then, there are different understandings about time itself: a absoulte time point (as a constant), a time point at a certain place, a time range, the resolution of time....</p>\n\n<p>I remember, when i saw java.util.Date the first time (JDK 1.0?) i was <em>really</em> happy about it. The languages i knew of didn't had such a feature. I didn't have  think about time conversion etc.</p>\n\n<p>I think it's mess, because everything that changes leaves a mess if you evolve from one level of understanding (XMLGregorianCaldender vs. Date) and requirements (Nanoseconds, past 2030) to higher level, but keeping the old untouched. And java.util.Date is not a Exception. Just look at the I/O subsystem or the transition from AWT to Swing...</p>\n\n<p>And because of that, \"we should sometimes press the reset button.\" (who said that, btw.?)</p>\n"}],"owner":{"account_id":18868,"reputation":82004,"user_id":43681,"accept_rate":70,"display_name":"sleske"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":14747,"favorite_count":0,"down_vote_count":1,"up_vote_count":69,"accepted_answer_id":1571329,"answer_count":3,"score":68,"last_activity_date":1679501253,"creation_date":1255599246,"question_id":1571265,"body_markdown":"As most people are painfully aware of by now, the Java API for handling calendar dates (specifically the classes `java.util.Date` and `java.util.Calendar`) are a terrible mess.\r\n\r\nOff the top of my head:\r\n\r\n - Date is mutable\r\n - Date represents a timestamp, not a date\r\n - no easy way to convert between date components (day, month, year...) and Date\r\n - Calendar is clunky to use, and tries to combine different calendar systems into one class\r\n\r\n[This post][1] (link dead - [archive link][2]) sums it up quite well, and [JSR-310][3] also expains these problems.\r\n\r\nNow my question is: \r\n\r\nHow did these classes make it into the Java SDK? Most of these problems seem fairly obvious (especially Date being mutable) and should have been easy to avoid. So how did it happen? Time pressure? Or are the problems obvious in retrospect only?\r\n\r\nI realize this is not strictly a programming question, but I&#39;d find it interesting to understand how API design could go so wrong. After all, mistakes are always a good learning opportunity (and I&#39;m curious).\r\n\r\n\r\n  [1]: http://www.jroller.com/cpurdy/entry/the_seven_habits_of_highly\r\n  [2]: https://web.archive.org/web/20130516232440/http://www.jroller.com/cpurdy/entry/the_seven_habits_of_highly\r\n  [3]: http://jcp.org/en/jsr/detail?id=310","title":"Why is the Java date API (java.util.Date, .Calendar) such a mess?","body":"<p>As most people are painfully aware of by now, the Java API for handling calendar dates (specifically the classes <code>java.util.Date</code> and <code>java.util.Calendar</code>) are a terrible mess.</p>\n<p>Off the top of my head:</p>\n<ul>\n<li>Date is mutable</li>\n<li>Date represents a timestamp, not a date</li>\n<li>no easy way to convert between date components (day, month, year...) and Date</li>\n<li>Calendar is clunky to use, and tries to combine different calendar systems into one class</li>\n</ul>\n<p><a href=\"http://www.jroller.com/cpurdy/entry/the_seven_habits_of_highly\" rel=\"nofollow noreferrer\">This post</a> (link dead - <a href=\"https://web.archive.org/web/20130516232440/http://www.jroller.com/cpurdy/entry/the_seven_habits_of_highly\" rel=\"nofollow noreferrer\">archive link</a>) sums it up quite well, and <a href=\"http://jcp.org/en/jsr/detail?id=310\" rel=\"nofollow noreferrer\">JSR-310</a> also expains these problems.</p>\n<p>Now my question is:</p>\n<p>How did these classes make it into the Java SDK? Most of these problems seem fairly obvious (especially Date being mutable) and should have been easy to avoid. So how did it happen? Time pressure? Or are the problems obvious in retrospect only?</p>\n<p>I realize this is not strictly a programming question, but I'd find it interesting to understand how API design could go so wrong. After all, mistakes are always a good learning opportunity (and I'm curious).</p>\n"},{"tags":["java","spring-boot"],"answers":[{"tags":[],"owner":{"account_id":1009321,"reputation":10671,"user_id":1022260,"accept_rate":53,"display_name":"mikeb"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1554989350,"creation_date":1554985018,"answer_id":55632303,"question_id":55632267,"body_markdown":"This is a bad request:\n\nhttps://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400\n\nFrom the above page: \n\n&gt; it indicates that the server cannot or will not process the request due to something that is perceived to be a client error (e.g., malformed request syntax, invalid request message framing, or deceptive request routing).\n&gt;\n&gt; The client should not repeat this request without modification.\n\nIt&#39;s not a timeout.  You need to post more information, and look in your web server logs to see why the request is bad, it could be a number of things.","title":"REST API call returning 400 even if code is not having error","body":"<p>This is a bad request:</p>\n<p><a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400\" rel=\"nofollow noreferrer\">https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400</a></p>\n<p>From the above page:</p>\n<blockquote>\n<p>it indicates that the server cannot or will not process the request due to something that is perceived to be a client error (e.g., malformed request syntax, invalid request message framing, or deceptive request routing).</p>\n<p>The client should not repeat this request without modification.</p>\n</blockquote>\n<p>It's not a timeout.  You need to post more information, and look in your web server logs to see why the request is bad, it could be a number of things.</p>\n"},{"tags":[],"owner":{"account_id":15190407,"reputation":13077,"user_id":10961238,"display_name":"Romil Patel"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1554985797,"creation_date":1554985348,"answer_id":55632424,"question_id":55632267,"body_markdown":"    No issue with timeout \r\n\r\n&gt; **400 Bad Request** The server cannot or will not process the request due\r\n&gt; to an apparent client error (e.g., malformed request syntax, size too\r\n&gt; large, invalid request message framing, or deceptive request routing).\r\n&gt; \r\n&gt; **504 Gateway Timeout** The server was acting as a gateway or proxy and\r\n&gt; did not receive a timely response from the upstream server.\r\n\r\n`400` means that the request was malformed. In other words, the data stream sent by the client to the server didn&#39;t follow the rules. \r\n\r\nIn the case of a REST API with a JSON payload, you may get 400 when the JSON is invalid in some way according to the API specification for the service.\r\n\r\n\r\n----------\r\n\r\n\r\n    Good Practice:\r\n\r\nIf the request is Successful, then you may get `2xx` code (`3xx` for redirect). If there is an Internal Logic Error on a Server, then return `5xx`. If there is anything wrong in a Client Request, then you may get `4xx` code.","title":"REST API call returning 400 even if code is not having error","body":"<pre><code>No issue with timeout \n</code></pre>\n\n<blockquote>\n  <p><strong>400 Bad Request</strong> The server cannot or will not process the request due\n  to an apparent client error (e.g., malformed request syntax, size too\n  large, invalid request message framing, or deceptive request routing).</p>\n  \n  <p><strong>504 Gateway Timeout</strong> The server was acting as a gateway or proxy and\n  did not receive a timely response from the upstream server.</p>\n</blockquote>\n\n<p><code>400</code> means that the request was malformed. In other words, the data stream sent by the client to the server didn't follow the rules. </p>\n\n<p>In the case of a REST API with a JSON payload, you may get 400 when the JSON is invalid in some way according to the API specification for the service.</p>\n\n<hr>\n\n<pre><code>Good Practice:\n</code></pre>\n\n<p>If the request is Successful, then you may get <code>2xx</code> code (<code>3xx</code> for redirect). If there is an Internal Logic Error on a Server, then return <code>5xx</code>. If there is anything wrong in a Client Request, then you may get <code>4xx</code> code.</p>\n"},{"tags":[],"owner":{"account_id":332120,"reputation":4862,"user_id":657224,"accept_rate":17,"display_name":"Mike"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1554994880,"creation_date":1554994880,"answer_id":55635643,"question_id":55632267,"body_markdown":"Trouble-shooting 400 response code in Spring is the bane of my existence. It amazes me how easily exceptions are swallowed or logged at DEBUG.\r\n\r\nSee my answer [here][1]. Enabling DEBUG logging for particular Spring packages has helped me solve these type of silent failures on numerous occasions.\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/53770263/657224","title":"REST API call returning 400 even if code is not having error","body":"<p>Trouble-shooting 400 response code in Spring is the bane of my existence. It amazes me how easily exceptions are swallowed or logged at DEBUG.</p>\n\n<p>See my answer <a href=\"https://stackoverflow.com/a/53770263/657224\">here</a>. Enabling DEBUG logging for particular Spring packages has helped me solve these type of silent failures on numerous occasions.</p>\n"}],"owner":{"account_id":15110421,"reputation":97,"user_id":10904724,"display_name":"Anand"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":11056,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1679501095,"creation_date":1554984898,"question_id":55632267,"body_markdown":"I made one rest API that is manipulating a file and then uploading the file to third party and then it will have two database operations. First one is select and the second one is insert. \r\n\r\nIn few cases, I am getting 200 but in some cases I am getting 400. Now, when I am getting 400, the control is only coming till select method and there is no error in that method.\r\n\r\n![][2]\r\n\r\nSo, it looks like request is getting timeout or something.\r\n\r\nCan anyone please suggest the proper way to do it? Where should I change the timeout?\r\n\r\n\r\n**Success logs**-\r\n```none\r\n[2019-04-11 10:09:26] [T] [http-nio-10.0.0.219-7000-exec-11] [Controller]  DOCUMENT UPLOADED IN Folder\r\n[2019-04-11 10:09:26] [T] [http-nio-10.0.0.219-7000-exec-11] [Controller] Checking if transition is valid from new NEW status -  initiated\r\n[2019-04-11 10:09:26] [T] [http-nio-10.0.0.219-7000-exec-11] [Controller] CALLING FUNCTION TO SAVE RESPONSE IN DIGIO_RESPONSES IN DB\r\n[2019-04-11 10:10:11] [T] [http-nio-10.0.0.219-7000-exec-14] [Controller] [LFT] [userId = 12] POST 200 /storage/upload\r\n```\r\n\r\n**FAILURE logs**-\r\n```none\r\n[2019-04-11 10:10:11] [T] [http-nio-10.0.0.219-7000-exec-14] [Controller]  DOCUMENT UPLOADED IN Folder\r\n[2019-04-11 10:10:11] [T] [http-nio-10.0.0.219-7000-exec-14] [Controller] Checking if transition is valid from new NEW status -  initiated\r\n[2019-04-11 10:10:11] [T] [http-nio-10.0.0.219-7000-exec-14] [Controller] [LFT] [userId = 12] POST 400 /storage/upload\r\n```\r\n\r\n  [2]: https://i.stack.imgur.com/7IY33l.png","title":"REST API call returning 400 even if code is not having error","body":"<p>I made one rest API that is manipulating a file and then uploading the file to third party and then it will have two database operations. First one is select and the second one is insert.</p>\n<p>In few cases, I am getting 200 but in some cases I am getting 400. Now, when I am getting 400, the control is only coming till select method and there is no error in that method.</p>\n<p><img src=\"https://i.stack.imgur.com/7IY33l.png\" alt=\"\" /></p>\n<p>So, it looks like request is getting timeout or something.</p>\n<p>Can anyone please suggest the proper way to do it? Where should I change the timeout?</p>\n<p><strong>Success logs</strong>-</p>\n<pre class=\"lang-none prettyprint-override\"><code>[2019-04-11 10:09:26] [T] [http-nio-10.0.0.219-7000-exec-11] [Controller]  DOCUMENT UPLOADED IN Folder\n[2019-04-11 10:09:26] [T] [http-nio-10.0.0.219-7000-exec-11] [Controller] Checking if transition is valid from new NEW status -  initiated\n[2019-04-11 10:09:26] [T] [http-nio-10.0.0.219-7000-exec-11] [Controller] CALLING FUNCTION TO SAVE RESPONSE IN DIGIO_RESPONSES IN DB\n[2019-04-11 10:10:11] [T] [http-nio-10.0.0.219-7000-exec-14] [Controller] [LFT] [userId = 12] POST 200 /storage/upload\n</code></pre>\n<p><strong>FAILURE logs</strong>-</p>\n<pre class=\"lang-none prettyprint-override\"><code>[2019-04-11 10:10:11] [T] [http-nio-10.0.0.219-7000-exec-14] [Controller]  DOCUMENT UPLOADED IN Folder\n[2019-04-11 10:10:11] [T] [http-nio-10.0.0.219-7000-exec-14] [Controller] Checking if transition is valid from new NEW status -  initiated\n[2019-04-11 10:10:11] [T] [http-nio-10.0.0.219-7000-exec-14] [Controller] [LFT] [userId = 12] POST 400 /storage/upload\n</code></pre>\n"},{"tags":["java","grpc"],"comments":[{"owner":{"account_id":288696,"reputation":91230,"user_id":589259,"accept_rate":82,"display_name":"Maarten Bodewes"},"score":1,"creation_date":1679500043,"post_id":75814351,"comment_id":133733972,"body_markdown":"Maybe [this issue](https://github.com/protocolbuffers/protobuf/issues/10695#issuecomment-1267493171) explains it (i.e. using an older runtime)?","body":"Maybe <a href=\"https://github.com/protocolbuffers/protobuf/issues/10695#issuecomment-1267493171\" rel=\"nofollow noreferrer\">this issue</a> explains it (i.e. using an older runtime)?"},{"owner":{"account_id":6518557,"reputation":2810,"user_id":5043481,"display_name":"zforgo"},"score":1,"creation_date":1679500123,"post_id":75814351,"comment_id":133734002,"body_markdown":"I assume this is a version mismatch. Probably you are using a newer generated code with old runtime.","body":"I assume this is a version mismatch. Probably you are using a newer generated code with old runtime."}],"answers":[{"tags":[],"owner":{"account_id":16773930,"reputation":1518,"user_id":12125755,"display_name":"NeverSleeps"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679500500,"creation_date":1679500500,"answer_id":75814556,"question_id":75814351,"body_markdown":"simple solution that helps me:\r\n```\r\nimplementation(&quot;com.google.protobuf:protobuf-java:3.22.2&quot;)\r\n```\r\nI have just taken the latest version and it solved my problem","title":"NoSuchMethodError for gRPC protobuf","body":"<p>simple solution that helps me:</p>\n<pre><code>implementation(&quot;com.google.protobuf:protobuf-java:3.22.2&quot;)\n</code></pre>\n<p>I have just taken the latest version and it solved my problem</p>\n"}],"owner":{"account_id":16773930,"reputation":1518,"user_id":12125755,"display_name":"NeverSleeps"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":853,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1679500500,"creation_date":1679499456,"question_id":75814351,"body_markdown":"I have to request data by `grpc`, by but when I call the grpc service, I get such error. \r\nBut it&#39;s mostly serialization calls from protobuf to java-object. Maybe someone has come across this and can tell me how I can fix this error?\r\n\r\n```java\r\njava.lang.NoSuchMethodError: &#39;boolean com.google.protobuf.GeneratedMessageV3$Builder.parseUnknownField(com.google.protobuf.CodedInputStream, com.google.protobuf.ExtensionRegistryLite, int)&#39;\r\n\tat newbuilding.Relevance$Builder.mergeFrom(Relevance.java:398)\r\n\tat newbuilding.Relevance$1.parsePartialFrom(Relevance.java:532)\r\n\tat newbuilding.Relevance$1.parsePartialFrom(Relevance.java:524)\r\n\tat com.google.protobuf.CodedInputStream$ArrayDecoder.readMessage(CodedInputStream.java:889)\r\n\tat newbuilding.NewBuilding$Builder.mergeFrom(NewBuilding.java:1924)\r\n\tat newbuilding.NewBuilding$Builder.mergeFrom(NewBuilding.java:1298)\r\n\tat com.google.protobuf.CodedInputStream$ArrayDecoder.readMessage(CodedInputStream.java:872)\r\n\tat newbuilding.api.NewBuildingRecord$Builder.mergeFrom(NewBuildingRecord.java:449)\r\n\tat newbuilding.api.NewBuildingRecord$1.parsePartialFrom(NewBuildingRecord.java:714)\r\n\tat newbuilding.api.NewBuildingRecord$1.parsePartialFrom(NewBuildingRecord.java:706)\r\n\tat com.google.protobuf.CodedInputStream$ArrayDecoder.readMessage(CodedInputStream.java:889)\r\n\tat newbuilding.api.NewBuildingList$Builder.mergeFrom(NewBuildingList.java:478)\r\n\tat newbuilding.api.NewBuildingList$Builder.mergeFrom(NewBuildingList.java:289)\r\n\tat com.google.protobuf.CodedInputStream$ArrayDecoder.readMessage(CodedInputStream.java:872)\r\n\tat newbuilding.api.ListNewBuildingsResponse$Builder.mergeFrom(ListNewBuildingsResponse.java:595)\r\n\tat newbuilding.api.ListNewBuildingsResponse$1.parsePartialFrom(ListNewBuildingsResponse.java:885)\r\n\tat newbuilding.api.ListNewBuildingsResponse$1.parsePartialFrom(ListNewBuildingsResponse.java:877)\r\n\tat com.google.protobuf.AbstractParser.parseFrom(AbstractParser.java:86)\r\n\tat com.google.protobuf.AbstractParser.parseFrom(AbstractParser.java:48)\r\n\tat io.grpc.protobuf.lite.ProtoLiteUtils$MessageMarshaller.parseFrom(ProtoLiteUtils.java:223)\r\n\tat io.grpc.protobuf.lite.ProtoLiteUtils$MessageMarshaller.parse(ProtoLiteUtils.java:215)\r\n\tat io.grpc.protobuf.lite.ProtoLiteUtils$MessageMarshaller.parse(ProtoLiteUtils.java:118)\r\n\tat io.grpc.MethodDescriptor.parseResponse(MethodDescriptor.java:284)\r\n\tat io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1MessagesAvailable.runInternal(ClientCallImpl.java:661)\r\n\tat io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1MessagesAvailable.runInContext(ClientCallImpl.java:646)\r\n\tat io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)\r\n\tat io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:133)\r\n\tat io.grpc.stub.ClientCalls$ThreadlessExecutor.waitAndDrain(ClientCalls.java:741)\r\n\tat io.grpc.stub.ClientCalls.blockingUnaryCall(ClientCalls.java:149)\r\n\tat newbuilding.api.NewBuildingServiceGrpc$NewBuildingServiceBlockingStub.list(NewBuildingServiceGrpc.java:436)\r\n```","title":"NoSuchMethodError for gRPC protobuf","body":"<p>I have to request data by <code>grpc</code>, by but when I call the grpc service, I get such error.\nBut it's mostly serialization calls from protobuf to java-object. Maybe someone has come across this and can tell me how I can fix this error?</p>\n<pre class=\"lang-java prettyprint-override\"><code>java.lang.NoSuchMethodError: 'boolean com.google.protobuf.GeneratedMessageV3$Builder.parseUnknownField(com.google.protobuf.CodedInputStream, com.google.protobuf.ExtensionRegistryLite, int)'\n    at newbuilding.Relevance$Builder.mergeFrom(Relevance.java:398)\n    at newbuilding.Relevance$1.parsePartialFrom(Relevance.java:532)\n    at newbuilding.Relevance$1.parsePartialFrom(Relevance.java:524)\n    at com.google.protobuf.CodedInputStream$ArrayDecoder.readMessage(CodedInputStream.java:889)\n    at newbuilding.NewBuilding$Builder.mergeFrom(NewBuilding.java:1924)\n    at newbuilding.NewBuilding$Builder.mergeFrom(NewBuilding.java:1298)\n    at com.google.protobuf.CodedInputStream$ArrayDecoder.readMessage(CodedInputStream.java:872)\n    at newbuilding.api.NewBuildingRecord$Builder.mergeFrom(NewBuildingRecord.java:449)\n    at newbuilding.api.NewBuildingRecord$1.parsePartialFrom(NewBuildingRecord.java:714)\n    at newbuilding.api.NewBuildingRecord$1.parsePartialFrom(NewBuildingRecord.java:706)\n    at com.google.protobuf.CodedInputStream$ArrayDecoder.readMessage(CodedInputStream.java:889)\n    at newbuilding.api.NewBuildingList$Builder.mergeFrom(NewBuildingList.java:478)\n    at newbuilding.api.NewBuildingList$Builder.mergeFrom(NewBuildingList.java:289)\n    at com.google.protobuf.CodedInputStream$ArrayDecoder.readMessage(CodedInputStream.java:872)\n    at newbuilding.api.ListNewBuildingsResponse$Builder.mergeFrom(ListNewBuildingsResponse.java:595)\n    at newbuilding.api.ListNewBuildingsResponse$1.parsePartialFrom(ListNewBuildingsResponse.java:885)\n    at newbuilding.api.ListNewBuildingsResponse$1.parsePartialFrom(ListNewBuildingsResponse.java:877)\n    at com.google.protobuf.AbstractParser.parseFrom(AbstractParser.java:86)\n    at com.google.protobuf.AbstractParser.parseFrom(AbstractParser.java:48)\n    at io.grpc.protobuf.lite.ProtoLiteUtils$MessageMarshaller.parseFrom(ProtoLiteUtils.java:223)\n    at io.grpc.protobuf.lite.ProtoLiteUtils$MessageMarshaller.parse(ProtoLiteUtils.java:215)\n    at io.grpc.protobuf.lite.ProtoLiteUtils$MessageMarshaller.parse(ProtoLiteUtils.java:118)\n    at io.grpc.MethodDescriptor.parseResponse(MethodDescriptor.java:284)\n    at io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1MessagesAvailable.runInternal(ClientCallImpl.java:661)\n    at io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1MessagesAvailable.runInContext(ClientCallImpl.java:646)\n    at io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)\n    at io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:133)\n    at io.grpc.stub.ClientCalls$ThreadlessExecutor.waitAndDrain(ClientCalls.java:741)\n    at io.grpc.stub.ClientCalls.blockingUnaryCall(ClientCalls.java:149)\n    at newbuilding.api.NewBuildingServiceGrpc$NewBuildingServiceBlockingStub.list(NewBuildingServiceGrpc.java:436)\n</code></pre>\n"},{"tags":["java","servlets"],"owner":{"account_id":7646729,"reputation":3,"user_id":5797126,"display_name":"hemant gaur"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679500072,"creation_date":1679499049,"question_id":75814263,"body_markdown":"I have written piece of code  to download file kept on local from browser using servlet\r\n\r\n```\r\nprotected void doGet(HttpServletRequest request, HttpServletResponse response)\r\n\t\t\tthrows ServletException, IOException {\r\n\t\t \r\n\t\tPrintWriter out = response.getWriter();\r\n        // File name\r\n        String fName = &quot;sample.csv&quot;;\r\n        String fName1 = &quot;sample2.csv&quot;;\r\n        // File path\r\n        String fPath = &quot;C:\\\\Users\\\\hemant-gaur\\\\Desktop\\\\&quot;;\r\n        response.setContentType(&quot;text/csv&quot;);\r\n        response.setHeader(&quot;Content-Disposition&quot;,\r\n                           &quot;attachment; filename=\\&quot;&quot;\r\n                               + fName1 + &quot;\\&quot;&quot;);\r\n        FileInputStream inputStream = new FileInputStream(fPath + fName);\r\n        int in;\r\n        while ((in = inputStream.read()) != -1) {\r\n            out.write(in);\r\n        }\r\n        inputStream.close();\r\n        out.close();\r\n        System.out.println(&quot;File Written&quot;); \r\n\t}\r\n```\r\n\r\nFile to be properly downloaded in browser","title":"File not getting downloaded in browser","body":"<p>I have written piece of code  to download file kept on local from browser using servlet</p>\n<pre><code>protected void doGet(HttpServletRequest request, HttpServletResponse response)\n            throws ServletException, IOException {\n         \n        PrintWriter out = response.getWriter();\n        // File name\n        String fName = &quot;sample.csv&quot;;\n        String fName1 = &quot;sample2.csv&quot;;\n        // File path\n        String fPath = &quot;C:\\\\Users\\\\hemant-gaur\\\\Desktop\\\\&quot;;\n        response.setContentType(&quot;text/csv&quot;);\n        response.setHeader(&quot;Content-Disposition&quot;,\n                           &quot;attachment; filename=\\&quot;&quot;\n                               + fName1 + &quot;\\&quot;&quot;);\n        FileInputStream inputStream = new FileInputStream(fPath + fName);\n        int in;\n        while ((in = inputStream.read()) != -1) {\n            out.write(in);\n        }\n        inputStream.close();\n        out.close();\n        System.out.println(&quot;File Written&quot;); \n    }\n</code></pre>\n<p>File to be properly downloaded in browser</p>\n"},{"tags":["java","spring-boot","wso2","wso2-identity-server"],"comments":[{"owner":{"account_id":13925797,"reputation":2937,"user_id":10055162,"display_name":"Anuradha Karunarathna"},"score":0,"creation_date":1679400416,"post_id":75800472,"comment_id":133711520,"body_markdown":"Are you looking for a REST API to retrieve the assigned permissions to a user via roles?","body":"Are you looking for a REST API to retrieve the assigned permissions to a user via roles?"},{"owner":{"account_id":11418021,"reputation":4780,"user_id":8370334,"display_name":"Abd Abughazaleh"},"score":0,"creation_date":1679400783,"post_id":75800472,"comment_id":133711617,"body_markdown":"@AnuradhaKarunarathna, could you please send me doc, or anything related to that?","body":"@AnuradhaKarunarathna, could you please send me doc, or anything related to that?"},{"owner":{"account_id":13925797,"reputation":2937,"user_id":10055162,"display_name":"Anuradha Karunarathna"},"score":1,"creation_date":1679401059,"post_id":75800472,"comment_id":133711694,"body_markdown":"Could you please explain your use case a bit? eg: one use case would be once the user login to an application after authenticating by WSO2 IS application wants to be handled based on the user&#39;s permissions. 2. Admin user wants to see another user&#39;s allowed permissions","body":"Could you please explain your use case a bit? eg: one use case would be once the user login to an application after authenticating by WSO2 IS application wants to be handled based on the user&#39;s permissions. 2. Admin user wants to see another user&#39;s allowed permissions"},{"owner":{"account_id":13925797,"reputation":2937,"user_id":10055162,"display_name":"Anuradha Karunarathna"},"score":1,"creation_date":1679401129,"post_id":75800472,"comment_id":133711703,"body_markdown":"Also, Could you please mention the version of IS that you use","body":"Also, Could you please mention the version of IS that you use"},{"owner":{"account_id":11418021,"reputation":4780,"user_id":8370334,"display_name":"Abd Abughazaleh"},"score":0,"creation_date":1679402156,"post_id":75800472,"comment_id":133712021,"body_markdown":"No, all me need just let user login after that get user permissions by api also to tell the front-end side to check if this user possible to see orders, and create user as example.\n\nAs example if i login with normal employee with this permissions (\n  can_see_order : true,\n ca_create_user: false\n)","body":"No, all me need just let user login after that get user permissions by api also to tell the front-end side to check if this user possible to see orders, and create user as example.  As example if i login with normal employee with this permissions (   can_see_order : true,  ca_create_user: false )"},{"owner":{"account_id":11418021,"reputation":4780,"user_id":8370334,"display_name":"Abd Abughazaleh"},"score":0,"creation_date":1679402205,"post_id":75800472,"comment_id":133712032,"body_markdown":"@AnuradhaKarunarathna\nIdentity provider API\t\n6.1.0","body":"@AnuradhaKarunarathna Identity provider API\t 6.1.0"}],"answers":[{"tags":[],"owner":{"account_id":13925797,"reputation":2937,"user_id":10055162,"display_name":"Anuradha Karunarathna"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1679500031,"creation_date":1679500031,"answer_id":75814473,"question_id":75800472,"body_markdown":"If you are building an oauth/oidc based application, instead of using separate REST APIs, you can use the permission handler https://github.com/nilasini/CustomPermissionClaimHandler to include user&#39;s permissions into the ID token.\r\n\r\nIf you want to get a user&#39;s permission through a REST API, there is no one single API to get that. The option is, \r\n1. Get the user&#39;s assigned roles by one of the following API based on your usecase \r\n- `https://&lt;host&gt;:&lt;port&gt;/scim2/Users/&lt;user-id&gt;?attributes=roles` (This can be invoked by a privileged user to get another user&#39;s assigned roles)\r\n- `https://&lt;host&gt;:&lt;port&gt;/scim2/Me?attributes=roles` (Loggegin user can get his own roles)\r\n\r\n2. Then per each assigned role, invoke the following API to get the assigned permissions to the role\r\n- `https://&lt;host&gt;:&lt;port&gt;/scim2/Roles/&lt;role-id&gt;?attributes=permissions`\r\n\r\nHere is a reference for the mentioned scim REST APIs: https://is.docs.wso2.com/en/latest/apis/scim2-rest-apis/\r\n","title":"How to Register, login, and get user permissions using WSO2 IS with Spring Boot or java","body":"<p>If you are building an oauth/oidc based application, instead of using separate REST APIs, you can use the permission handler <a href=\"https://github.com/nilasini/CustomPermissionClaimHandler\" rel=\"nofollow noreferrer\">https://github.com/nilasini/CustomPermissionClaimHandler</a> to include user's permissions into the ID token.</p>\n<p>If you want to get a user's permission through a REST API, there is no one single API to get that. The option is,</p>\n<ol>\n<li>Get the user's assigned roles by one of the following API based on your usecase</li>\n</ol>\n<ul>\n<li><code>https://&lt;host&gt;:&lt;port&gt;/scim2/Users/&lt;user-id&gt;?attributes=roles</code> (This can be invoked by a privileged user to get another user's assigned roles)</li>\n<li><code>https://&lt;host&gt;:&lt;port&gt;/scim2/Me?attributes=roles</code> (Loggegin user can get his own roles)</li>\n</ul>\n<ol start=\"2\">\n<li>Then per each assigned role, invoke the following API to get the assigned permissions to the role</li>\n</ol>\n<ul>\n<li><code>https://&lt;host&gt;:&lt;port&gt;/scim2/Roles/&lt;role-id&gt;?attributes=permissions</code></li>\n</ul>\n<p>Here is a reference for the mentioned scim REST APIs: <a href=\"https://is.docs.wso2.com/en/latest/apis/scim2-rest-apis/\" rel=\"nofollow noreferrer\">https://is.docs.wso2.com/en/latest/apis/scim2-rest-apis/</a></p>\n"}],"owner":{"account_id":11418021,"reputation":4780,"user_id":8370334,"display_name":"Abd Abughazaleh"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":148,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75814473,"answer_count":1,"score":0,"last_activity_date":1679500031,"creation_date":1679397334,"question_id":75800472,"body_markdown":"I read all the WSO2 IS documentation to understand how to login, register, and get user permissions through the Restful APIs. Finally, I did the login and registration, but I don&#39;t know how to get **user permissions**, and this is my point!\r\n","title":"How to Register, login, and get user permissions using WSO2 IS with Spring Boot or java","body":"<p>I read all the WSO2 IS documentation to understand how to login, register, and get user permissions through the Restful APIs. Finally, I did the login and registration, but I don't know how to get <strong>user permissions</strong>, and this is my point!</p>\n"},{"tags":["java","elasticsearch","elasticsearch-aggregation"],"answers":[{"tags":[],"owner":{"account_id":5839221,"reputation":691,"user_id":4601349,"accept_rate":60,"display_name":"nukie"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1679499678,"creation_date":1679499678,"answer_id":75814394,"question_id":75807218,"body_markdown":"So, the mistake was pretty dumb.\r\n\r\nYou should set each source in separate Map objects:\r\n```java\r\n.composite(ca -&gt; ca\r\n        .size(100)\r\n        .sources(Map.of(&quot;strKey1&quot;, strKey1), Map.of(&quot;strKey2&quot;, strKey2))\r\n)\r\n```\r\n\r\ninstead of:\r\n```java\r\n.composite(ca -&gt; ca\r\n        .size(100)\r\n        .sources(Map.of(&quot;strKey1&quot;, strKey1, &quot;strKey2&quot;, strKey2))\r\n)\r\n```","title":"Elasticsearch composite aggregation throws &quot;[x_content_parse_exception] [1:131] [composite] failed to parse field [sources]&quot;","body":"<p>So, the mistake was pretty dumb.</p>\n<p>You should set each source in separate Map objects:</p>\n<pre class=\"lang-java prettyprint-override\"><code>.composite(ca -&gt; ca\n        .size(100)\n        .sources(Map.of(&quot;strKey1&quot;, strKey1), Map.of(&quot;strKey2&quot;, strKey2))\n)\n</code></pre>\n<p>instead of:</p>\n<pre class=\"lang-java prettyprint-override\"><code>.composite(ca -&gt; ca\n        .size(100)\n        .sources(Map.of(&quot;strKey1&quot;, strKey1, &quot;strKey2&quot;, strKey2))\n)\n</code></pre>\n"}],"owner":{"account_id":5839221,"reputation":691,"user_id":4601349,"accept_rate":60,"display_name":"nukie"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":391,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75814394,"answer_count":1,"score":0,"last_activity_date":1679499678,"creation_date":1679441277,"question_id":75807218,"body_markdown":"**Context:**\r\nRunning tests on local Elasticsearch 8.6.1 deployment, using elastic Java client (same version).\r\nIndex mapping is pretty simple - two keyword fields (&quot;strKey1&quot; and &quot;strKey1&quot;) in each document.\r\n\r\n**The problem:**\r\nAll my composite aggregation search queries are throwing exception:\r\n```\r\n[es/search] failed: [x_content_parse_exception] [1:131] [composite] failed to parse field [sources]\r\nco.elastic.clients.elasticsearch._types.ElasticsearchException: [es/search] failed: [x_content_parse_exception] [1:131] [composite] failed to parse field [sources]\r\n\tat app//co.elastic.clients.transport.rest_client.RestClientTransport.getHighLevelResponse(RestClientTransport.java:282)\r\n\tat app//co.elastic.clients.transport.rest_client.RestClientTransport.performRequest(RestClientTransport.java:148)\r\n\tat app//co.elastic.clients.elasticsearch.ElasticsearchClient.search(ElasticsearchClient.java:1833)\r\n```\r\nqueries implemented as:\r\n\r\n```java\r\nvar rqst = SearchRequest.of(b -&gt; b\r\n        .index(coords.getIndexName())\r\n        .size(1000)\r\n        .query(query)\r\n        .aggregations(&quot;aggre&quot;, a -&gt; a\r\n                .composite(ca -&gt; ca\r\n                        .size(100)\r\n                        .sources(Map.of(&quot;strKey1&quot;, strKey1, &quot;strKey2&quot;, strKey2))\r\n                )\r\n        )\r\n);\r\nclient.search(rqst, Void.class);\r\n```\r\nI looked into actual http request in which this query transformed and it seems ok:\r\n```\r\nSearchRequest: POST /the_index/_search?typed_keys=true {&quot;aggregations&quot;:{&quot;aggre&quot;:{&quot;composite&quot;:{&quot;size&quot;:100,&quot;sources&quot;:[{&quot;strKey2&quot;:{&quot;terms&quot;:{&quot;field&quot;:&quot;strKey2&quot;}},&quot;strKey1&quot;:{&quot;terms&quot;:{&quot;field&quot;:&quot;strKey1&quot;}}}]}}},&quot;query&quot;:{&quot;match_all&quot;:{}},&quot;size&quot;:1000}\r\n```\r\nTried to execute this request manually with curl and ***it works***! Returning expected aggregation results!\r\n\r\nI also tried other aggregation types (multiTerms for instance) via Java client and they are working as expected.\r\n\r\nWhat am I doing wrong? Is there any problems specific to composite aggregations in Java client?","title":"Elasticsearch composite aggregation throws &quot;[x_content_parse_exception] [1:131] [composite] failed to parse field [sources]&quot;","body":"<p><strong>Context:</strong>\nRunning tests on local Elasticsearch 8.6.1 deployment, using elastic Java client (same version).\nIndex mapping is pretty simple - two keyword fields (&quot;strKey1&quot; and &quot;strKey1&quot;) in each document.</p>\n<p><strong>The problem:</strong>\nAll my composite aggregation search queries are throwing exception:</p>\n<pre><code>[es/search] failed: [x_content_parse_exception] [1:131] [composite] failed to parse field [sources]\nco.elastic.clients.elasticsearch._types.ElasticsearchException: [es/search] failed: [x_content_parse_exception] [1:131] [composite] failed to parse field [sources]\n    at app//co.elastic.clients.transport.rest_client.RestClientTransport.getHighLevelResponse(RestClientTransport.java:282)\n    at app//co.elastic.clients.transport.rest_client.RestClientTransport.performRequest(RestClientTransport.java:148)\n    at app//co.elastic.clients.elasticsearch.ElasticsearchClient.search(ElasticsearchClient.java:1833)\n</code></pre>\n<p>queries implemented as:</p>\n<pre class=\"lang-java prettyprint-override\"><code>var rqst = SearchRequest.of(b -&gt; b\n        .index(coords.getIndexName())\n        .size(1000)\n        .query(query)\n        .aggregations(&quot;aggre&quot;, a -&gt; a\n                .composite(ca -&gt; ca\n                        .size(100)\n                        .sources(Map.of(&quot;strKey1&quot;, strKey1, &quot;strKey2&quot;, strKey2))\n                )\n        )\n);\nclient.search(rqst, Void.class);\n</code></pre>\n<p>I looked into actual http request in which this query transformed and it seems ok:</p>\n<pre><code>SearchRequest: POST /the_index/_search?typed_keys=true {&quot;aggregations&quot;:{&quot;aggre&quot;:{&quot;composite&quot;:{&quot;size&quot;:100,&quot;sources&quot;:[{&quot;strKey2&quot;:{&quot;terms&quot;:{&quot;field&quot;:&quot;strKey2&quot;}},&quot;strKey1&quot;:{&quot;terms&quot;:{&quot;field&quot;:&quot;strKey1&quot;}}}]}}},&quot;query&quot;:{&quot;match_all&quot;:{}},&quot;size&quot;:1000}\n</code></pre>\n<p>Tried to execute this request manually with curl and <em><strong>it works</strong></em>! Returning expected aggregation results!</p>\n<p>I also tried other aggregation types (multiTerms for instance) via Java client and they are working as expected.</p>\n<p>What am I doing wrong? Is there any problems specific to composite aggregations in Java client?</p>\n"},{"tags":["java","java.util.concurrent"],"answers":[{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1679499639,"creation_date":1679499298,"answer_id":75814314,"question_id":75814207,"body_markdown":"&gt; Is there a problem with doing it like this\r\n\r\nThe problem is that `new ArrayDeque&lt;&gt;(ledger)` doesn&#39;t necessarily give you a snapshot of the *current* state of `ledger`.  Elements that are added to or removed from `ledger` while the `ArrayDeque` is being initialized (from `ledger`) *may or may not* be included in `ledger_copy`.\r\n \r\n\r\nThis follows from the javadocs for `ArrayDeque` and `ConcurrentLinkedDeque`.  The former says that `ledger`&#39;s iterator will be used by the `ArrayDeque(Collection)` constructor to fetch the elements.  The latter states that the iterator is *weakly consistent*.","title":"Creating a shallow copy of a concurrent collection in Java","body":"<blockquote>\n<p>Is there a problem with doing it like this</p>\n</blockquote>\n<p>The problem is that <code>new ArrayDeque&lt;&gt;(ledger)</code> doesn't necessarily give you a snapshot of the <em>current</em> state of <code>ledger</code>.  Elements that are added to or removed from <code>ledger</code> while the <code>ArrayDeque</code> is being initialized (from <code>ledger</code>) <em>may or may not</em> be included in <code>ledger_copy</code>.</p>\n<p>This follows from the javadocs for <code>ArrayDeque</code> and <code>ConcurrentLinkedDeque</code>.  The former says that <code>ledger</code>'s iterator will be used by the <code>ArrayDeque(Collection)</code> constructor to fetch the elements.  The latter states that the iterator is <em>weakly consistent</em>.</p>\n"},{"tags":[],"owner":{"account_id":173621,"reputation":10596,"user_id":402428,"display_name":"michid"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1679499301,"creation_date":1679499301,"answer_id":75814317,"question_id":75814207,"body_markdown":"It depends on what you consider &quot;a problem&quot;. However, the usage of these collection classes is correct in the sense they are meant to be used. \r\n\r\nMore specifically, the iterators exposed by [`ConcurrentLinkedDeque`][1] are weakly consistent:\r\n\r\n&gt; Iterators are weakly consistent, returning elements reflecting the\r\n&gt; state of the deque at some point at or since the creation of the\r\n&gt; iterator. They do not throw ConcurrentModificationException, and may\r\n&gt; proceed concurrently with other operations.\r\n\r\nBecause of this, the elements in the `ArrayDeque` will also reflect the state of the `ConcurrentLinkedDeque` at some prior point in time. \r\n\r\n  [1]: https://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ConcurrentLinkedDeque.html","title":"Creating a shallow copy of a concurrent collection in Java","body":"<p>It depends on what you consider &quot;a problem&quot;. However, the usage of these collection classes is correct in the sense they are meant to be used.</p>\n<p>More specifically, the iterators exposed by <a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ConcurrentLinkedDeque.html\" rel=\"nofollow noreferrer\"><code>ConcurrentLinkedDeque</code></a> are weakly consistent:</p>\n<blockquote>\n<p>Iterators are weakly consistent, returning elements reflecting the\nstate of the deque at some point at or since the creation of the\niterator. They do not throw ConcurrentModificationException, and may\nproceed concurrently with other operations.</p>\n</blockquote>\n<p>Because of this, the elements in the <code>ArrayDeque</code> will also reflect the state of the <code>ConcurrentLinkedDeque</code> at some prior point in time.</p>\n"},{"tags":[],"owner":{"account_id":446208,"reputation":8611,"user_id":839128,"accept_rate":75,"display_name":"MikeFHay"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1679499375,"creation_date":1679499375,"answer_id":75814337,"question_id":75814207,"body_markdown":"Yes. ConcurrentLinkedDeque&#39;s [documentation](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/concurrent/ConcurrentLinkedQueue.html) states that iteration is supported, and its behaviour in the face of concurrent modification:\r\n\r\n&gt; Iterators are weakly consistent, returning elements reflecting the state of the queue at some point at or since the creation of the iterator. They do not throw ConcurrentModificationException, and may proceed concurrently with other operations. Elements contained in the queue since the creation of the iterator will be returned exactly once. \r\n&gt;\r\n&gt; ...\r\n&gt;\r\n&gt; Bulk operations that add, remove, or examine multiple elements, such as addAll(java.util.Collection&lt;? extends E&gt;), removeIf(java.util.function.Predicate&lt;? super E&gt;) or forEach(java.util.function.Consumer&lt;? super E&gt;), are not guaranteed to be performed atomically. For example, a forEach traversal concurrent with an addAll operation might observe only some of the added elements. ","title":"Creating a shallow copy of a concurrent collection in Java","body":"<p>Yes. ConcurrentLinkedDeque's <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/concurrent/ConcurrentLinkedQueue.html\" rel=\"nofollow noreferrer\">documentation</a> states that iteration is supported, and its behaviour in the face of concurrent modification:</p>\n<blockquote>\n<p>Iterators are weakly consistent, returning elements reflecting the state of the queue at some point at or since the creation of the iterator. They do not throw ConcurrentModificationException, and may proceed concurrently with other operations. Elements contained in the queue since the creation of the iterator will be returned exactly once.</p>\n<p>...</p>\n<p>Bulk operations that add, remove, or examine multiple elements, such as addAll(java.util.Collection&lt;? extends E&gt;), removeIf(java.util.function.Predicate&lt;? super E&gt;) or forEach(java.util.function.Consumer&lt;? super E&gt;), are not guaranteed to be performed atomically. For example, a forEach traversal concurrent with an addAll operation might observe only some of the added elements.</p>\n</blockquote>\n"}],"owner":{"account_id":4758075,"reputation":581,"user_id":3846286,"accept_rate":71,"display_name":"chilliefiber"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":83,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75814317,"answer_count":3,"score":1,"last_activity_date":1679499639,"creation_date":1679498737,"question_id":75814207,"body_markdown":"I want to create a shallow copy of a concurrent collection, turning it into a regular collection. Is there a problem with doing it like this:\r\n```\r\nledger = new ConcurrentLinkedDeque&lt;&gt;(); // this line is somewhere else in the program\r\n//...\r\nArrayDeque&lt;Operation&gt; ledger_copy;\r\nledger_copy = new ArrayDeque&lt;&gt;(ledger);\r\n\r\n```\r\nThe reason I ask is because while `ledger` is being used in the constructor of `ArrayDeque` it might be concurrently written to in other parts of the program.","title":"Creating a shallow copy of a concurrent collection in Java","body":"<p>I want to create a shallow copy of a concurrent collection, turning it into a regular collection. Is there a problem with doing it like this:</p>\n<pre><code>ledger = new ConcurrentLinkedDeque&lt;&gt;(); // this line is somewhere else in the program\n//...\nArrayDeque&lt;Operation&gt; ledger_copy;\nledger_copy = new ArrayDeque&lt;&gt;(ledger);\n\n</code></pre>\n<p>The reason I ask is because while <code>ledger</code> is being used in the constructor of <code>ArrayDeque</code> it might be concurrently written to in other parts of the program.</p>\n"},{"tags":["java","android","android-assets","enoent"],"comments":[{"owner":{"account_id":1534380,"reputation":539,"user_id":1430802,"display_name":"Qandil Tariq"},"score":0,"creation_date":1634807187,"post_id":69658790,"comment_id":123126909,"body_markdown":"On which line you are getting this exception?","body":"On which line you are getting this exception?"},{"owner":{"account_id":1534380,"reputation":539,"user_id":1430802,"display_name":"Qandil Tariq"},"score":0,"creation_date":1634807377,"post_id":69658790,"comment_id":123126996,"body_markdown":"https://stackoverflow.com/questions/36088699/error-open-failed-enoent-no-such-file-or-directory","body":"<a href=\"https://stackoverflow.com/questions/36088699/error-open-failed-enoent-no-such-file-or-directory\" title=\"error open failed enoent no such file or directory\">stackoverflow.com/questions/36088699/&hellip;</a>"},{"owner":{"account_id":17840963,"reputation":71,"user_id":12958844,"display_name":"Android4Ever"},"score":0,"creation_date":1634807654,"post_id":69658790,"comment_id":123127097,"body_markdown":"@QandilTariq on this line  :  File outFile = new File(imagesFolder, filename);","body":"@QandilTariq on this line  :  File outFile = new File(imagesFolder, filename);"},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1634808396,"post_id":69658790,"comment_id":123127414,"body_markdown":"Dont tell that you cannot find a file in assets if the problem is that you cannot create a file. Please change subject of your post.","body":"Dont tell that you cannot find a file in assets if the problem is that you cannot create a file. Please change subject of your post."},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1634808566,"post_id":69658790,"comment_id":123127500,"body_markdown":"`imagesFolder.mkdirs();` Only use mkdirs() if  the direwctory does not exist yet. if ( !imagesFolder.exists()) { if (!imagesFolder.mkdirs()) { Toast (..sorry could not create directory ..) return;} }. I bet that the directory cannot be created.","body":"<code>imagesFolder.mkdirs();</code> Only use mkdirs() if  the direwctory does not exist yet. if ( !imagesFolder.exists()) { if (!imagesFolder.mkdirs()) { Toast (..sorry could not create directory ..) return;} }. I bet that the directory cannot be created."},{"owner":{"account_id":1534380,"reputation":539,"user_id":1430802,"display_name":"Qandil Tariq"},"score":0,"creation_date":1634808575,"post_id":69658790,"comment_id":123127505,"body_markdown":"File imagesFolder = new File(Environment.getExternalStorageDirectory().getPath() + &quot;/images&quot;);\nget the file folder in same way.","body":"File imagesFolder = new File(Environment.getExternalStorageDirectory().getPath() + &quot;/images&quot;); get the file folder in same way."},{"owner":{"account_id":17840963,"reputation":71,"user_id":12958844,"display_name":"Android4Ever"},"score":0,"creation_date":1634808640,"post_id":69658790,"comment_id":123127542,"body_markdown":"@blackapps I don&#39;t want to create file, you did not understand what i was looking for.\n I just want to know where the other files are coming from","body":"@blackapps I don&#39;t want to create file, you did not understand what i was looking for.  I just want to know where the other files are coming from"},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1634808655,"post_id":69658790,"comment_id":123127549,"body_markdown":"Better: `File imagesFolder = new File(Environment.getExternalStorageDirectory(), &quot;images&quot;);`","body":"Better: <code>File imagesFolder = new File(Environment.getExternalStorageDirectory(), &quot;images&quot;);</code>"},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1634808715,"post_id":69658790,"comment_id":123127573,"body_markdown":"`new FileOutputStream(outFile);` That creates a file! Well it tries. But it fails with: `FileNotFoundException: /storage/emulated/0/images/clock_font.png` But you have no directory `images` yet for it and you arte unaware of this missing directory.","body":"<code>new FileOutputStream(outFile);</code> That creates a file! Well it tries. But it fails with: <code>FileNotFoundException: &#47;storage&#47;emulated&#47;0&#47;images&#47;clock_font.png</code> But you have no directory <code>images</code> yet for it and you arte unaware of this missing directory."},{"owner":{"account_id":17840963,"reputation":71,"user_id":12958844,"display_name":"Android4Ever"},"score":0,"creation_date":1634808941,"post_id":69658790,"comment_id":123127676,"body_markdown":"@blackapps I don&#39;t want to create a file for &quot;clock_font.ong&quot;  I just want to knwo where is come from, I don&#39;t have it in my asst folder so how this error can appear","body":"@blackapps I don&#39;t want to create a file for &quot;clock_font.ong&quot;  I just want to knwo where is come from, I don&#39;t have it in my asst folder so how this error can appear"},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1634809096,"post_id":69658790,"comment_id":123127753,"body_markdown":"Your reactions dont make sense. As you wanna copy a file from assets to external storage. So you wanna create a file on external storage. And the exception is telling you that you cannot create that file.","body":"Your reactions dont make sense. As you wanna copy a file from assets to external storage. So you wanna create a file on external storage. And the exception is telling you that you cannot create that file."},{"owner":{"account_id":17840963,"reputation":71,"user_id":12958844,"display_name":"Android4Ever"},"score":0,"creation_date":1634809348,"post_id":69658790,"comment_id":123127870,"body_markdown":"@blackapps You just don&#39;t understand it dude, my current problem is : some files are not in my asset folder but they my metod try to insert them, but where they are come from ?","body":"@blackapps You just don&#39;t understand it dude, my current problem is : some files are not in my asset folder but they my metod try to insert them, but where they are come from ?"},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1634809527,"post_id":69658790,"comment_id":123127941,"body_markdown":"Are you tying to insert files in assets at runtime? You did not tell that before. And which files? How would we know which files you have in mind? Or where they would come from? The code you posted code is for copying a file from assets to external storage.","body":"Are you tying to insert files in assets at runtime? You did not tell that before. And which files? How would we know which files you have in mind? Or where they would come from? The code you posted code is for copying a file from assets to external storage."},{"owner":{"account_id":17840963,"reputation":71,"user_id":12958844,"display_name":"Android4Ever"},"score":0,"creation_date":1634809638,"post_id":69658790,"comment_id":123127983,"body_markdown":"@blackapps I just edited my post, look my asset folder. I have 1 file(dataset12soleil). But where is clock-font.png ?? I don&#39;t want it, I just want to delete it, but I can&#39;t find it. Why ?","body":"@blackapps I just edited my post, look my asset folder. I have 1 file(dataset12soleil). But where is clock-font.png ?? I don&#39;t want it, I just want to delete it, but I can&#39;t find it. Why ?"},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1634809816,"post_id":69658790,"comment_id":123128057,"body_markdown":"Delete? I read: `I&#39;m trying to insert 1 picture from my asset directory ` And I cannot see what you have in your assets folder. And if fileName equals clock-font.png than you put that in your code.","body":"Delete? I read: <code>I&#39;m trying to insert 1 picture from my asset directory </code> And I cannot see what you have in your assets folder. And if fileName equals clock-font.png than you put that in your code."},{"owner":{"account_id":17840963,"reputation":71,"user_id":12958844,"display_name":"Android4Ever"},"score":0,"creation_date":1634810087,"post_id":69658790,"comment_id":123128180,"body_markdown":"I know I am copying files to external storage.\nI explained in my post that I was looking to copy only 1 files.\nAnd I also said that I didn&#39;t understand where the others were coming from.\nI read : **I have only 1 picture in my assetFolder (dataset12soleil), but it looks like my method is looking for other files that I don&#39;t even know**\nand I read too : **Well I just want to keep my picture and delete others where can I find them ?**","body":"I know I am copying files to external storage. I explained in my post that I was looking to copy only 1 files. And I also said that I didn&#39;t understand where the others were coming from. I read : <b>I have only 1 picture in my assetFolder (dataset12soleil), but it looks like my method is looking for other files that I don&#39;t even know</b> and I read too : <b>Well I just want to keep my picture and delete others where can I find them ?</b>"},{"owner":{"account_id":17840963,"reputation":71,"user_id":12958844,"display_name":"Android4Ever"},"score":0,"creation_date":1634810720,"post_id":69658790,"comment_id":123128468,"body_markdown":"Sorry dude if it&#39;s still not clear, but the problem is that I don&#39;t have clock_font.png in my code or in my asset folder and I would like to understand why","body":"Sorry dude if it&#39;s still not clear, but the problem is that I don&#39;t have clock_font.png in my code or in my asset folder and I would like to understand why"},{"owner":{"account_id":17840963,"reputation":71,"user_id":12958844,"display_name":"Android4Ever"},"score":0,"creation_date":1634811389,"post_id":69658790,"comment_id":123128783,"body_markdown":"Well, I find something, I the names of myfolder is &quot;images&quot; my method will try to insert automatically some othes files. But if called it &quot;test&quot; it&#39;s ok. All is good but I still don&#39;t undertsant why &quot;asset/images&quot; is special. @blackapps, I find this : [link] (https://android.googlesource.com/platform/frameworks/base/+/master/core/res/assets/images/) I don&#39;t know if this can help you too but well. Have a nice day","body":"Well, I find something, I the names of myfolder is &quot;images&quot; my method will try to insert automatically some othes files. But if called it &quot;test&quot; it&#39;s ok. All is good but I still don&#39;t undertsant why &quot;asset/images&quot; is special. @blackapps, I find this : [link] (<a href=\"https://android.googlesource.com/platform/frameworks/base/+/master/core/res/assets/images/\" rel=\"nofollow noreferrer\">android.googlesource.com/platform/frameworks/base/+/master/&zwnj;&#8203;core/&hellip;</a>) I don&#39;t know if this can help you too but well. Have a nice day"},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1634825053,"post_id":69658790,"comment_id":123135090,"body_markdown":"H&#233; h&#233;. Your code tries to list the files in an &#39;images&#39; directory in assets. Maybe you put a file in assets/images at design time. But even if you had not created that images directory yourself that directory would still have been there at runtime. They are just system images. You could also try to list files in assets webkit directory.","body":"H&#233; h&#233;. Your code tries to list the files in an &#39;images&#39; directory in assets. Maybe you put a file in assets/images at design time. But even if you had not created that images directory yourself that directory would still have been there at runtime. They are just system images. You could also try to list files in assets webkit directory."},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1634825128,"post_id":69658790,"comment_id":123135123,"body_markdown":"`Files not found in asset directory` A very confusing subject. Better: why does assets images directory contain files which i did not put in there at design time?","body":"<code>Files not found in asset directory</code> A very confusing subject. Better: why does assets images directory contain files which i did not put in there at design time?"},{"owner":{"account_id":17840963,"reputation":71,"user_id":12958844,"display_name":"Android4Ever"},"score":0,"creation_date":1634825898,"post_id":69658790,"comment_id":123135477,"body_markdown":"Ok thank you for this explanation @blackapps.\nI just edited the subject too, thank you :)","body":"Ok thank you for this explanation @blackapps. I just edited the subject too, thank you :)"},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1634826154,"post_id":69658790,"comment_id":123135588,"body_markdown":"Well done! And i like the &#39;Better:&#39; ;-).","body":"Well done! And i like the &#39;Better:&#39; ;-)."},{"owner":{"account_id":17840963,"reputation":71,"user_id":12958844,"display_name":"Android4Ever"},"score":0,"creation_date":1634826353,"post_id":69658790,"comment_id":123135689,"body_markdown":"@blackapps it&#39;s a dedication ;-)","body":"@blackapps it&#39;s a dedication ;-)"}],"owner":{"account_id":17840963,"reputation":71,"user_id":12958844,"display_name":"Android4Ever"},"comment_count":23,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":137,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1679499627,"creation_date":1634806283,"question_id":69658790,"body_markdown":"I&#39;m still a beginner in Android. Be cool please :)\r\nI&#39;m trying to insert 1 picture from my asset directory but I have a problem.\r\nHere is my code to insert my picture :\r\n\r\n```\r\n        File imagesFolder = new File(Environment.getExternalStorageDirectory().getPath() + &quot;/images&quot;);\r\n        imagesFolder.mkdirs();\r\n\r\n\r\n\r\n        Log.i(&quot;HINT&quot;,imagesFolder.getAbsolutePath());\r\n\r\n        String[] images = null;\r\n\r\n        try {\r\n            images = assetManager.list(&quot;images&quot;);\r\n        } catch (IOException e) {\r\n            Log.e(&quot;tag&quot;, &quot;Failed to get asset file list.&quot;, e);\r\n        }\r\n        for(String filename : images) {\r\n            InputStream in = null;\r\n            OutputStream out = null;\r\n            try {\r\n                in = assetManager.open(&quot;images/&quot;+filename);\r\n                File outFile = new File(imagesFolder, filename);\r\n                out = new FileOutputStream(outFile);\r\n                copyFile(in, out);\r\n                in.close();\r\n                in = null;\r\n                out.flush();\r\n                out.close();\r\n                out = null;\r\n            } catch(IOException e) {\r\n                Log.e(&quot;tag&quot;, &quot;Failed to copy asset file: &quot; + filename, e);\r\n            }\r\n        }\r\n```\r\n\r\nI have only 1 picture in my assetFolder (dataset12soleil), but it looks like my method is looking for other files that I don&#39;t even know: \r\n\r\n\r\n```\r\nE/tag: Failed to copy asset file: clock_font.png\r\n    java.io.FileNotFoundException: /storage/emulated/0/images/clock_font.png: open failed: ENOENT (No such file or directory)\r\n        at libcore.io.IoBridge.open(IoBridge.java:496)\r\n        at java.io.FileOutputStream.&lt;init&gt;(FileOutputStream.java:235)\r\n        at java.io.FileOutputStream.&lt;init&gt;(FileOutputStream.java:186)\r\n        at com.example.testbackup.ui.dataset1.Dataset1Fragment.copyAssets(Dataset1Fragment.java:111)\r\n        at com.example.testbackup.ui.dataset1.Dataset1Fragment.access$400(Dataset1Fragment.java:58)\r\n        at com.example.testbackup.ui.dataset1.Dataset1Fragment$1.onClick(Dataset1Fragment.java:247)\r\n        at android.view.View.performClick(View.java:7184)\r\n        at android.view.View.performClickInternal(View.java:7157)\r\n        at android.view.View.access$3500(View.java:821)\r\n        at android.view.View$PerformClick.run(View.java:27660)\r\n        at android.os.Handler.handleCallback(Handler.java:914)\r\n        at android.os.Handler.dispatchMessage(Handler.java:100)\r\n        at android.os.Looper.loop(Looper.java:225)\r\n        at android.app.ActivityThread.main(ActivityThread.java:7563)\r\n        at java.lang.reflect.Method.invoke(Native Method)\r\n        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:539)\r\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:994)\r\n     Caused by: android.system.ErrnoException: open failed: ENOENT (No such file or directory)\r\n        at libcore.io.Linux.open(Native Method)\r\n        at libcore.io.ForwardingOs.open(ForwardingOs.java:167)\r\n        at libcore.io.BlockGuardOs.open(BlockGuardOs.java:252)\r\n        at libcore.io.ForwardingOs.open(ForwardingOs.java:167)\r\n        at android.app.ActivityThread$AndroidOs.open(ActivityThread.java:7460)\r\n        at libcore.io.IoBridge.open(IoBridge.java:482)\r\n        at java.io.FileOutputStream.&lt;init&gt;(FileOutputStream.java:235)&#160;\r\n        at java.io.FileOutputStream.&lt;init&gt;(FileOutputStream.java:186)&#160;\r\n        at com.example.testbackup.ui.dataset1.Dataset1Fragment.copyAssets(Dataset1Fragment.java:111)&#160;\r\n        at com.example.testbackup.ui.dataset1.Dataset1Fragment.access$400(Dataset1Fragment.java:58)&#160;\r\n        at com.example.testbackup.ui.dataset1.Dataset1Fragment$1.onClick(Dataset1Fragment.java:247)&#160;\r\n        at android.view.View.performClick(View.java:7184)&#160;\r\n        at android.view.View.performClickInternal(View.java:7157)&#160;\r\n        at android.view.View.access$3500(View.java:821)&#160;\r\n        at android.view.View$PerformClick.run(View.java:27660)&#160;\r\n        at android.os.Handler.handleCallback(Handler.java:914)&#160;\r\n        at android.os.Handler.dispatchMessage(Handler.java:100)&#160;\r\n        at android.os.Looper.loop(Looper.java:225)&#160;\r\n        at android.app.ActivityThread.main(ActivityThread.java:7563)&#160;\r\n        at java.lang.reflect.Method.invoke(Native Method)&#160;\r\n        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:539)&#160;\r\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:994)&#160;\r\nE/tag: Failed to copy asset file: dataset12soleil.jpg\r\n    java.io.FileNotFoundException: /storage/emulated/0/images/dataset12soleil.jpg: open failed: ENOENT (No such file or directory)\r\n        at libcore.io.IoBridge.open(IoBridge.java:496)\r\n\r\n\r\n...\r\n\r\nE/tag: Failed to copy asset file: android-logo-shine.png\r\n    java.io.FileNotFoundException: /storage/emulated/0/images/android-logo-shine.png: open failed: ENOENT (No such file or directory)\r\n...\r\nE/tag: Failed to copy asset file: android-logo-mask.png\r\n    java.io.FileNotFoundException: /storage/emulated/0/images/android-logo-mask.png: open failed: ENOENT (No such file or directory)\r\n```\r\n\r\nWell I just want to keep my picture and delete others where can I find them ? :(\r\n\r\n\r\nInside of my asset folder : \r\n[my image directory inside of my asset folder][1]\r\n\r\n\r\nEDIT : \r\nFinally, i tried to rename my folder &quot;asset/images&quot; into &quot;asset/test&quot; and it&#39;s working. I only have my picture and not the others.\r\n[This just helped me to find the solution][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/weGqe.png\r\n  [2]: https://android.googlesource.com/platform/frameworks/base/+/master/core/res/assets/images/","title":"Why does assets images directory contain files which i did not put in there at design time?","body":"<p>I'm still a beginner in Android. Be cool please :)\nI'm trying to insert 1 picture from my asset directory but I have a problem.\nHere is my code to insert my picture :</p>\n<pre><code>        File imagesFolder = new File(Environment.getExternalStorageDirectory().getPath() + &quot;/images&quot;);\n        imagesFolder.mkdirs();\n\n\n\n        Log.i(&quot;HINT&quot;,imagesFolder.getAbsolutePath());\n\n        String[] images = null;\n\n        try {\n            images = assetManager.list(&quot;images&quot;);\n        } catch (IOException e) {\n            Log.e(&quot;tag&quot;, &quot;Failed to get asset file list.&quot;, e);\n        }\n        for(String filename : images) {\n            InputStream in = null;\n            OutputStream out = null;\n            try {\n                in = assetManager.open(&quot;images/&quot;+filename);\n                File outFile = new File(imagesFolder, filename);\n                out = new FileOutputStream(outFile);\n                copyFile(in, out);\n                in.close();\n                in = null;\n                out.flush();\n                out.close();\n                out = null;\n            } catch(IOException e) {\n                Log.e(&quot;tag&quot;, &quot;Failed to copy asset file: &quot; + filename, e);\n            }\n        }\n</code></pre>\n<p>I have only 1 picture in my assetFolder (dataset12soleil), but it looks like my method is looking for other files that I don't even know:</p>\n<pre><code>E/tag: Failed to copy asset file: clock_font.png\n    java.io.FileNotFoundException: /storage/emulated/0/images/clock_font.png: open failed: ENOENT (No such file or directory)\n        at libcore.io.IoBridge.open(IoBridge.java:496)\n        at java.io.FileOutputStream.&lt;init&gt;(FileOutputStream.java:235)\n        at java.io.FileOutputStream.&lt;init&gt;(FileOutputStream.java:186)\n        at com.example.testbackup.ui.dataset1.Dataset1Fragment.copyAssets(Dataset1Fragment.java:111)\n        at com.example.testbackup.ui.dataset1.Dataset1Fragment.access$400(Dataset1Fragment.java:58)\n        at com.example.testbackup.ui.dataset1.Dataset1Fragment$1.onClick(Dataset1Fragment.java:247)\n        at android.view.View.performClick(View.java:7184)\n        at android.view.View.performClickInternal(View.java:7157)\n        at android.view.View.access$3500(View.java:821)\n        at android.view.View$PerformClick.run(View.java:27660)\n        at android.os.Handler.handleCallback(Handler.java:914)\n        at android.os.Handler.dispatchMessage(Handler.java:100)\n        at android.os.Looper.loop(Looper.java:225)\n        at android.app.ActivityThread.main(ActivityThread.java:7563)\n        at java.lang.reflect.Method.invoke(Native Method)\n        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:539)\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:994)\n     Caused by: android.system.ErrnoException: open failed: ENOENT (No such file or directory)\n        at libcore.io.Linux.open(Native Method)\n        at libcore.io.ForwardingOs.open(ForwardingOs.java:167)\n        at libcore.io.BlockGuardOs.open(BlockGuardOs.java:252)\n        at libcore.io.ForwardingOs.open(ForwardingOs.java:167)\n        at android.app.ActivityThread$AndroidOs.open(ActivityThread.java:7460)\n        at libcore.io.IoBridge.open(IoBridge.java:482)\n        at java.io.FileOutputStream.&lt;init&gt;(FileOutputStream.java:235) \n        at java.io.FileOutputStream.&lt;init&gt;(FileOutputStream.java:186) \n        at com.example.testbackup.ui.dataset1.Dataset1Fragment.copyAssets(Dataset1Fragment.java:111) \n        at com.example.testbackup.ui.dataset1.Dataset1Fragment.access$400(Dataset1Fragment.java:58) \n        at com.example.testbackup.ui.dataset1.Dataset1Fragment$1.onClick(Dataset1Fragment.java:247) \n        at android.view.View.performClick(View.java:7184) \n        at android.view.View.performClickInternal(View.java:7157) \n        at android.view.View.access$3500(View.java:821) \n        at android.view.View$PerformClick.run(View.java:27660) \n        at android.os.Handler.handleCallback(Handler.java:914) \n        at android.os.Handler.dispatchMessage(Handler.java:100) \n        at android.os.Looper.loop(Looper.java:225) \n        at android.app.ActivityThread.main(ActivityThread.java:7563) \n        at java.lang.reflect.Method.invoke(Native Method) \n        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:539) \n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:994) \nE/tag: Failed to copy asset file: dataset12soleil.jpg\n    java.io.FileNotFoundException: /storage/emulated/0/images/dataset12soleil.jpg: open failed: ENOENT (No such file or directory)\n        at libcore.io.IoBridge.open(IoBridge.java:496)\n\n\n...\n\nE/tag: Failed to copy asset file: android-logo-shine.png\n    java.io.FileNotFoundException: /storage/emulated/0/images/android-logo-shine.png: open failed: ENOENT (No such file or directory)\n...\nE/tag: Failed to copy asset file: android-logo-mask.png\n    java.io.FileNotFoundException: /storage/emulated/0/images/android-logo-mask.png: open failed: ENOENT (No such file or directory)\n</code></pre>\n<p>Well I just want to keep my picture and delete others where can I find them ? :(</p>\n<p>Inside of my asset folder :\n<a href=\"https://i.stack.imgur.com/weGqe.png\" rel=\"nofollow noreferrer\">my image directory inside of my asset folder</a></p>\n<p>EDIT :\nFinally, i tried to rename my folder &quot;asset/images&quot; into &quot;asset/test&quot; and it's working. I only have my picture and not the others.\n<a href=\"https://android.googlesource.com/platform/frameworks/base/+/master/core/res/assets/images/\" rel=\"nofollow noreferrer\">This just helped me to find the solution</a></p>\n"},{"tags":["java","docker","jmx","jmxtrans"],"comments":[{"owner":{"account_id":1740131,"reputation":3810,"user_id":1591777,"display_name":"cstroe"},"score":0,"creation_date":1490266055,"post_id":31257968,"comment_id":96258323,"body_markdown":"I created a [GitHub project](https://github.com/cstroe/java-jmx-in-docker-sample-app) that contains a ready to go implementation of JMX from a Docker container. It contains a `Dockerfile` with a proper `entrypoint.sh`, and a `docker-compose.yml` for easy deployment.","body":"I created a <a href=\"https://github.com/cstroe/java-jmx-in-docker-sample-app\" rel=\"nofollow noreferrer\">GitHub project</a> that contains a ready to go implementation of JMX from a Docker container. It contains a <code>Dockerfile</code> with a proper <code>entrypoint.sh</code>, and a <code>docker-compose.yml</code> for easy deployment."}],"answers":[{"tags":[],"owner":{"account_id":3610515,"reputation":6781,"user_id":3011570,"accept_rate":94,"display_name":"Eric Broda"},"down_vote_count":1,"up_vote_count":68,"is_accepted":true,"score":67,"last_activity_date":1554844907,"creation_date":1436293009,"answer_id":31276354,"question_id":31257968,"body_markdown":"For completeness, the following solution worked.  The JVM should be run with specific parameters established to enable remote docker JMX monitoring were as followed:\r\n\r\n    -Dcom.sun.management.jmxremote\r\n    -Dcom.sun.management.jmxremote.authenticate=false\r\n    -Dcom.sun.management.jmxremote.ssl=false\r\n    -Dcom.sun.management.jmxremote.port=&lt;PORT&gt;\r\n    -Dcom.sun.management.jmxremote.rmi.port=&lt;PORT&gt;\r\n    -Djava.rmi.server.hostname=&lt;IP&gt;\r\n\r\n    where:\r\n\r\n    &lt;IP&gt; is the IP address of the host that where you executed &#39;docker run&#39;\r\n    &lt;PORT&gt; is the port that must be published from docker where the JVM&#39;s JMX port is configured (docker run --publish 7203:7203, for example where PORT is 7203). Both `port` and `rmi.port` can be the same. \r\n\r\nOnce this is done you should be able to execute JMX monitoring (jmxtrans, node-jmx, jconsole, etc) from either a local or remote machine.\r\n\r\nThanks to [@Chris-Heald][1] for making this a really quick and simple fix!\r\n\r\n\r\n  [1]: https://stackoverflow.com/users/271475/chris-heald","title":"How to access JMX interface in docker from outside?","body":"<p>For completeness, the following solution worked.  The JVM should be run with specific parameters established to enable remote docker JMX monitoring were as followed:</p>\n\n<pre><code>-Dcom.sun.management.jmxremote\n-Dcom.sun.management.jmxremote.authenticate=false\n-Dcom.sun.management.jmxremote.ssl=false\n-Dcom.sun.management.jmxremote.port=&lt;PORT&gt;\n-Dcom.sun.management.jmxremote.rmi.port=&lt;PORT&gt;\n-Djava.rmi.server.hostname=&lt;IP&gt;\n\nwhere:\n\n&lt;IP&gt; is the IP address of the host that where you executed 'docker run'\n&lt;PORT&gt; is the port that must be published from docker where the JVM's JMX port is configured (docker run --publish 7203:7203, for example where PORT is 7203). Both `port` and `rmi.port` can be the same. \n</code></pre>\n\n<p>Once this is done you should be able to execute JMX monitoring (jmxtrans, node-jmx, jconsole, etc) from either a local or remote machine.</p>\n\n<p>Thanks to <a href=\"https://stackoverflow.com/users/271475/chris-heald\">@Chris-Heald</a> for making this a really quick and simple fix!</p>\n"},{"tags":[],"owner":{"account_id":16532,"reputation":1775,"user_id":36120,"display_name":"Morten Berg"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1482177421,"creation_date":1482177421,"answer_id":41230062,"question_id":31257968,"body_markdown":"I found it that trying to set up JMX over RMI is a pain, especially because of the `-Djava.rmi.server.hostname=&lt;IP&gt;` which you have to specify on startup. We&#39;re running our docker images in Kubernetes where everything is dynamic.\r\n\r\nI ended up using JMXMP instead of RMI, as this only need one TCP port open, and no hostname.\r\n\r\nMy current project uses Spring, which can be configured by adding this:\r\n\r\n    &lt;bean id=&quot;serverConnector&quot;\r\n        class=&quot;org.springframework.jmx.support.ConnectorServerFactoryBean&quot;/&gt;\r\n\r\n(Outside Spring you need to set up your own JMXConncetorServer in order to make this work)\r\n\r\nAlong with this dependency (since JMXMP is an optional extension and not a part of the JDK):\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.glassfish.main.external&lt;/groupId&gt;\r\n        &lt;artifactId&gt;jmxremote_optional-repackaged&lt;/artifactId&gt;\r\n        &lt;version&gt;4.1.1&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nAnd you need to add the same jar your your classpath when starting JVisualVM in order to connect over JMXMP:\r\n\r\n    jvisualvm -cp &quot;$JAVA_HOME/lib/tools.jar:&lt;your_path&gt;/jmxremote_optional-repackaged-4.1.1.jar&quot;\r\n\r\nThen connect with the following connection string:\r\n\r\n    service:jmx:jmxmp://&lt;url:port&gt;\r\n\r\n(Default port is 9875)","title":"How to access JMX interface in docker from outside?","body":"<p>I found it that trying to set up JMX over RMI is a pain, especially because of the <code>-Djava.rmi.server.hostname=&lt;IP&gt;</code> which you have to specify on startup. We're running our docker images in Kubernetes where everything is dynamic.</p>\n\n<p>I ended up using JMXMP instead of RMI, as this only need one TCP port open, and no hostname.</p>\n\n<p>My current project uses Spring, which can be configured by adding this:</p>\n\n<pre><code>&lt;bean id=\"serverConnector\"\n    class=\"org.springframework.jmx.support.ConnectorServerFactoryBean\"/&gt;\n</code></pre>\n\n<p>(Outside Spring you need to set up your own JMXConncetorServer in order to make this work)</p>\n\n<p>Along with this dependency (since JMXMP is an optional extension and not a part of the JDK):</p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.glassfish.main.external&lt;/groupId&gt;\n    &lt;artifactId&gt;jmxremote_optional-repackaged&lt;/artifactId&gt;\n    &lt;version&gt;4.1.1&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>And you need to add the same jar your your classpath when starting JVisualVM in order to connect over JMXMP:</p>\n\n<pre><code>jvisualvm -cp \"$JAVA_HOME/lib/tools.jar:&lt;your_path&gt;/jmxremote_optional-repackaged-4.1.1.jar\"\n</code></pre>\n\n<p>Then connect with the following connection string:</p>\n\n<pre><code>service:jmx:jmxmp://&lt;url:port&gt;\n</code></pre>\n\n<p>(Default port is 9875)</p>\n"},{"tags":[],"owner":{"account_id":2485884,"reputation":2634,"user_id":2164318,"display_name":"Serge"},"down_vote_count":1,"up_vote_count":19,"is_accepted":false,"score":18,"last_activity_date":1521277439,"creation_date":1521204639,"answer_id":49321208,"question_id":31257968,"body_markdown":"For dev environment you can set `java.rmi.server.hostname` to the [catch-all IP address][1] 0.0.0.0\r\n\r\nExample: \r\n&gt;      -Djava.rmi.server.hostname=0.0.0.0 \\\r\n&gt;                     -Dcom.sun.management.jmxremote \\\r\n&gt;                     -Dcom.sun.management.jmxremote.port=${JMX_PORT} \\\r\n&gt;                     -Dcom.sun.management.jmxremote.rmi.port=${JMX_PORT} \\\r\n&gt;                     -Dcom.sun.management.jmxremote.local.only=false \\\r\n&gt;                     -Dcom.sun.management.jmxremote.authenticate=false \\\r\n&gt;                     -Dcom.sun.management.jmxremote.ssl=false\r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/0.0.0.0","title":"How to access JMX interface in docker from outside?","body":"<p>For dev environment you can set <code>java.rmi.server.hostname</code> to the <a href=\"https://en.wikipedia.org/wiki/0.0.0.0\" rel=\"noreferrer\">catch-all IP address</a> 0.0.0.0</p>\n\n<p>Example: </p>\n\n<blockquote>\n<pre><code> -Djava.rmi.server.hostname=0.0.0.0 \\\n                -Dcom.sun.management.jmxremote \\\n                -Dcom.sun.management.jmxremote.port=${JMX_PORT} \\\n                -Dcom.sun.management.jmxremote.rmi.port=${JMX_PORT} \\\n                -Dcom.sun.management.jmxremote.local.only=false \\\n                -Dcom.sun.management.jmxremote.authenticate=false \\\n                -Dcom.sun.management.jmxremote.ssl=false\n</code></pre>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":1628535,"reputation":5864,"user_id":1503538,"accept_rate":100,"display_name":"snovelli"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1564250474,"creation_date":1564250474,"answer_id":57234766,"question_id":31257968,"body_markdown":"After digging around for quite a lot, I found this configuration\r\n\r\n    -Dcom.sun.management.jmxremote.ssl=false \r\n    -Dcom.sun.management.jmxremote.authenticate=false \r\n    -Dcom.sun.management.jmxremote.port=1098\r\n    -Dcom.sun.management.jmxremote.rmi.port=1098\r\n    -Djava.rmi.server.hostname=localhost\r\n    -Dcom.sun.management.jmxremote.local.only=false\r\n\r\n\r\nThe difference with the other above is that `java.rmi.server.hostname` is set to `localhost` instead of `0.0.0.0`","title":"How to access JMX interface in docker from outside?","body":"<p>After digging around for quite a lot, I found this configuration</p>\n\n<pre><code>-Dcom.sun.management.jmxremote.ssl=false \n-Dcom.sun.management.jmxremote.authenticate=false \n-Dcom.sun.management.jmxremote.port=1098\n-Dcom.sun.management.jmxremote.rmi.port=1098\n-Djava.rmi.server.hostname=localhost\n-Dcom.sun.management.jmxremote.local.only=false\n</code></pre>\n\n<p>The difference with the other above is that <code>java.rmi.server.hostname</code> is set to <code>localhost</code> instead of <code>0.0.0.0</code></p>\n"},{"tags":[],"owner":{"account_id":1220503,"reputation":1157,"user_id":1187237,"display_name":"kg_sYy"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1599220176,"creation_date":1599220176,"answer_id":63740619,"question_id":31257968,"body_markdown":"To add some additional insights, I had some Docker port mappings in use, and none of the previous answers worked directly for me. After investigation, I found the answer here: https://stackoverflow.com/questions/35466461/how-to-connect-with-jmx-from-host-to-docker-container-in-docker-machine to provide the required insights.\r\n\r\nThis is what I believe happens:\r\n\r\nI set up JMX as suggested in other answers here:\r\n\r\n```\r\n-Dcom.sun.management.jmxremote.ssl=false \r\n-Dcom.sun.management.jmxremote.authenticate=false \r\n-Dcom.sun.management.jmxremote.port=1098\r\n-Dcom.sun.management.jmxremote.rmi.port=1098\r\n-Djava.rmi.server.hostname=localhost\r\n-Dcom.sun.management.jmxremote.local.only=false\r\n```\r\n\r\nProgram flow:\r\n- I run the Docker container and expose/map the port from host to container. Say I map port host:1099-&gt;container:1098 in Docker.\r\n- I run the JVM inside the docker with the above JMX settings.\r\n- The JMX agent inside the Docker container now listens to the given port 1098. \r\n- I start JConsole on the host (outside Docker) with URL localhost:1099. I use 1099, since I used `host:docker` port mapping of 1099:1098.\r\n- JConsole connects fine to the JMX agent inside Docker. \r\n- JConsole asks JMX where to read the monitoring data.\r\n- JMX agent responds with the configured information and address: `localhost:1098`\r\n- JConsole now tries to connect to the given address `localhost:1098`\r\n- This fails since port 1098 on localhost (outside Docker) is not listening. Port 1099 was mapped to `Docker:1098`. Instead of `localhost:1098`, JMX should tell JConsole to read monitoring information from `localhost:1099`, since 1099 was the port mapped from host to 1098 inside Docker container.\r\n\r\nAs a fix, I changed my `host:docker` port mapping from `1099:1098` to `1098:1098`. Now, JMX still tells JConsole to connect to `localhost:1098` for monitoring information. But now it works since the outside port is the same as advertised by JMX inside Docker.\r\n\r\nI expect the same applies also for SSH tunnels and similar scenarios. You have to match what you configure JMX to advertise and what JConsole sees as the address space on the host where you run it.\r\n\r\nMaybe it is possible to play a bit with the `jmxremote.port`, `jmxremove.rmi.port`, and `hostname` attributes to make this work using different port mappings. But I had the opportunity to use the same ports, so using them simplified it, and this works (for me).\r\n","title":"How to access JMX interface in docker from outside?","body":"<p>To add some additional insights, I had some Docker port mappings in use, and none of the previous answers worked directly for me. After investigation, I found the answer here: <a href=\"https://stackoverflow.com/questions/35466461/how-to-connect-with-jmx-from-host-to-docker-container-in-docker-machine\">How to connect with JMX from host to Docker container in Docker machine?</a> to provide the required insights.</p>\n<p>This is what I believe happens:</p>\n<p>I set up JMX as suggested in other answers here:</p>\n<pre><code>-Dcom.sun.management.jmxremote.ssl=false \n-Dcom.sun.management.jmxremote.authenticate=false \n-Dcom.sun.management.jmxremote.port=1098\n-Dcom.sun.management.jmxremote.rmi.port=1098\n-Djava.rmi.server.hostname=localhost\n-Dcom.sun.management.jmxremote.local.only=false\n</code></pre>\n<p>Program flow:</p>\n<ul>\n<li>I run the Docker container and expose/map the port from host to container. Say I map port host:1099-&gt;container:1098 in Docker.</li>\n<li>I run the JVM inside the docker with the above JMX settings.</li>\n<li>The JMX agent inside the Docker container now listens to the given port 1098.</li>\n<li>I start JConsole on the host (outside Docker) with URL localhost:1099. I use 1099, since I used <code>host:docker</code> port mapping of 1099:1098.</li>\n<li>JConsole connects fine to the JMX agent inside Docker.</li>\n<li>JConsole asks JMX where to read the monitoring data.</li>\n<li>JMX agent responds with the configured information and address: <code>localhost:1098</code></li>\n<li>JConsole now tries to connect to the given address <code>localhost:1098</code></li>\n<li>This fails since port 1098 on localhost (outside Docker) is not listening. Port 1099 was mapped to <code>Docker:1098</code>. Instead of <code>localhost:1098</code>, JMX should tell JConsole to read monitoring information from <code>localhost:1099</code>, since 1099 was the port mapped from host to 1098 inside Docker container.</li>\n</ul>\n<p>As a fix, I changed my <code>host:docker</code> port mapping from <code>1099:1098</code> to <code>1098:1098</code>. Now, JMX still tells JConsole to connect to <code>localhost:1098</code> for monitoring information. But now it works since the outside port is the same as advertised by JMX inside Docker.</p>\n<p>I expect the same applies also for SSH tunnels and similar scenarios. You have to match what you configure JMX to advertise and what JConsole sees as the address space on the host where you run it.</p>\n<p>Maybe it is possible to play a bit with the <code>jmxremote.port</code>, <code>jmxremove.rmi.port</code>, and <code>hostname</code> attributes to make this work using different port mappings. But I had the opportunity to use the same ports, so using them simplified it, and this works (for me).</p>\n"},{"tags":[],"owner":{"account_id":3400101,"reputation":3481,"user_id":2852528,"display_name":"Serhii Pov&#237;senko"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679499132,"creation_date":1679431230,"answer_id":75806163,"question_id":31257968,"body_markdown":"# Solution for Cloud e.g AWS ECS\r\n\r\nThe main challenge is that *JMX/RMI protocol requires both host and port to correspond accordingly between a server (your JVM app) and a client (e.g VisualVM) that connects to the server*. In other words, if any of these parameters will not match - no way it would be possible to establish the connection.\r\n\r\nSubsequently, in the case of a containerised application, it means that JMX/RMI configuration requires a predefined/static port for the JVM app and that port should be mapped outside of the container onto an equivalent port inside the container. This is the only way to get it to work.\r\n\r\nSo now the main question I aim to answer is how to connect to your JVM app that runs inside your cloud, behind the private network and being exposed by a dynamic port only when that port is managed by the cloud not by us. \r\n\r\nSolution exists! And it would require a bit of infrastructure cunning approach. Let&#39;s look at the diagram.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n - So basically we want to run our JMX router container first, as part of our service. The purpose of that container is to redirect incoming traffic to our JVM&#39;s port that we will use for JMX/RMI connection.\r\n - The port that we will use for JMX would be the dynamic port mapped onto the static inbound port of the JMX router container.\r\n - As soon as we obtained the dynamic port (the router container is launched) - we would use it for launching our JVM application.\r\n\r\n\r\nFor building our JMX router we&#39;d use HAproxy. To build the image we need `Dockerfile`:\r\n\r\n```\r\nFROM haproxy:latest\r\n\r\n\r\nUSER root\r\n\r\nRUN apt update &amp;&amp; apt -y install curl jq\r\n\r\nCOPY ./haproxy.cfg /usr/local/etc/haproxy/haproxy.cfg\r\nCOPY entrypoint.sh /entrypoint.sh\r\nRUN chmod +x /entrypoint.sh\r\n\r\nENTRYPOINT [&quot;/entrypoint.sh&quot;]\r\n```\r\n\r\nwhere `entrypoint.sh`:\r\n```\r\n#!/bin/bash\r\nset -x\r\n\r\nport=$(curl -s ${ECS_CONTAINER_METADATA_URI_V4}/task | jq &#39;.Containers | .[] | select(.Name==&quot;haproxy-jmx&quot;) | .Ports | .[] | select(.ContainerPort==9090) | select(.HostIp==&quot;0.0.0.0&quot;) | .HostPort&#39;)\r\n\r\nwhile [ -z &quot;$port&quot; ]; do\r\n\techo &quot;Empty response, waiting 1 second and trying again...&quot;\r\n\tsleep 1\r\n\r\n\tport=$(curl -s ${ECS_CONTAINER_METADATA_URI_V4}/task | jq &#39;.Containers | .[] | select(.Name==&quot;haproxy-jmx&quot;) | .Ports | .[] | select(.ContainerPort==9090) | select(.HostIp==&quot;0.0.0.0&quot;) | .HostPort&#39;)\r\ndone\r\n\r\necho &quot;Received port: $port&quot;\r\n\r\nsed -i &quot;s/\\$ECS_HOST_PORT/$port/&quot; /usr/local/etc/haproxy/haproxy.cfg\r\n\r\nhaproxy -f /usr/local/etc/haproxy/haproxy.cfg\r\n\r\n```\r\n\r\nwith `haproxy.cfg`:\r\n\r\n```\r\ndefaults\r\n    mode tcp\r\n\r\nfrontend service-jmx\r\n    bind :9090\r\n    default_backend service-jmx\r\n\r\nbackend service-jmx\r\n    server jmx app:$ECS_HOST_PORT\r\n\r\n```\r\n\r\n\r\nAfter our JMX router image is ready (published to our register), we could use it inside our task definition as one of container definitions, e.g.\r\n\r\n```\r\n{\r\n      &quot;name&quot;: &quot;haproxy-jmx&quot;,\r\n      &quot;image&quot;: &quot;{IMAGE_SOURCE_FROM_YOUR_REGISTRY}&quot;,\r\n      &quot;logConfiguration&quot;: {\r\n        &quot;logDriver&quot;: &quot;json-file&quot;,\r\n        &quot;secretOptions&quot;: null,\r\n        &quot;options&quot;: {\r\n          &quot;max-size&quot;: &quot;50m&quot;,\r\n          &quot;max-file&quot;: &quot;1&quot;\r\n        }\r\n      },\r\n      &quot;portMappings&quot;: [\r\n        {\r\n          &quot;hostPort&quot;: 0,\r\n          &quot;protocol&quot;: &quot;tcp&quot;,\r\n          &quot;containerPort&quot;: 9090\r\n        }\r\n      ],\r\n      &quot;cpu&quot;: 0,\r\n      &quot;memoryReservation&quot;: 32,\r\n\r\n      &quot;links&quot;: [\r\n        &quot;${name}:app&quot;\r\n      ]\r\n    }\r\n```\r\n\r\nHere we define our JMX static port is `9090`. You could pick any port allowed to use. But after you choose - that exactly that port we will use to find the dynamic port mapped to it by ECS when launching our JVM app. \r\n\r\nSo now, the only thing left is to get the dynamic port assigned to our JMX router and use it as an RMI port for our JVM app. For that, in `entrypoint.sh` for our JVM app image we have the following:\r\n\r\n```\r\n#!/usr/bin/env sh\r\n\r\n# We set here our initial JVM settings\r\nJAVA_OPTS=&quot;-Dserver.port=8080 \\\r\n           -Djava.net.preferIPv4Stack=true&quot;\r\n\r\n#If we want to enable JMX for the app we will pass JMX_ENABLE env as true\r\nif [ &quot;${JMX_ENABLE}&quot; = &quot;true&quot; ]; then\r\n  \r\n  #we get EC2 instance IP to use as server host\r\n  HOST_SERVER_IP=$(curl -s http://169.254.169.254/latest/meta-data/local-ipv4)\r\n\r\n  # Get a dynamic ECS host port by agreed JMX static port\r\n  JMX_PORT=$(curl -s ${ECS_CONTAINER_METADATA_URI_V4}/task | jq &#39;.Containers | .[] | select(.Name==&quot;haproxy-jmx&quot;) | .Ports | .[] | select(.ContainerPort==9090) | select(.HostIp==&quot;0.0.0.0&quot;) | .HostPort&#39;)\r\n  \r\n  #it might take sometime to get the router container started, let&#39;s wait a bit if needed\r\n  while [ -z &quot;$JMX_PORT&quot; ]; do\r\n    echo &quot;Empty response, waiting 1 second and trying again...&quot;\r\n    sleep 1\r\n\r\n    JMX_PORT=$(curl -s ${ECS_CONTAINER_METADATA_URI_V4}/task | jq &#39;.Containers | .[] | select(.Name==&quot;haproxy-jmx&quot;) | .Ports | .[] | select(.ContainerPort==9090) | select(.HostIp==&quot;0.0.0.0&quot;) | .HostPort&#39;)\r\n  done\r\n\r\n  echo &quot;Received port: $JMX_PORT&quot;\r\n  \r\n  #JMX/RMI configuration you&#39;ve already seen \r\n  JMX_OPTS=&quot;-Dcom.sun.management.jmxremote=true \\\r\n            -Dcom.sun.management.jmxremote.local.only=false \\\r\n            -Dcom.sun.management.jmxremote.authenticate=false \\\r\n            -Dcom.sun.management.jmxremote.ssl=false \\\r\n            -Djava.rmi.server.hostname=$HOST_SERVER_IP \\\r\n            -Dcom.sun.management.jmxremote.port=$JMX_PORT \\\r\n            -Dcom.sun.management.jmxremote.rmi.port=$JMX_PORT \\\r\n            -Dspring.jmx.enabled=true&quot;\r\n\r\n  JAVA_OPTS=&quot;$JAVA_OPTS $JMX_OPTS&quot;\r\nelse\r\n  echo &quot;JMX disabled&quot;\r\nfi\r\n\r\n#launching our app from working dir\r\njava ${JAVA_OPTS} -jar /opt/workdir/*.jar\r\n``` \r\n\r\nSo now as soon as both containers are up and running - use `HOST_SERVER_IP` and `JMX_PORT` to connect to your JVM application inside the ECS cluster.\r\n\r\nTested and worked for us. Hope would helpful to others as well.\r\n\r\n  [1]: https://i.stack.imgur.com/kOIhM.png","title":"How to access JMX interface in docker from outside?","body":"<h1>Solution for Cloud e.g AWS ECS</h1>\n<p>The main challenge is that <em>JMX/RMI protocol requires both host and port to correspond accordingly between a server (your JVM app) and a client (e.g VisualVM) that connects to the server</em>. In other words, if any of these parameters will not match - no way it would be possible to establish the connection.</p>\n<p>Subsequently, in the case of a containerised application, it means that JMX/RMI configuration requires a predefined/static port for the JVM app and that port should be mapped outside of the container onto an equivalent port inside the container. This is the only way to get it to work.</p>\n<p>So now the main question I aim to answer is how to connect to your JVM app that runs inside your cloud, behind the private network and being exposed by a dynamic port only when that port is managed by the cloud not by us.</p>\n<p>Solution exists! And it would require a bit of infrastructure cunning approach. Let's look at the diagram.</p>\n<p><a href=\"https://i.stack.imgur.com/kOIhM.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/kOIhM.png\" alt=\"enter image description here\" /></a></p>\n<ul>\n<li>So basically we want to run our JMX router container first, as part of our service. The purpose of that container is to redirect incoming traffic to our JVM's port that we will use for JMX/RMI connection.</li>\n<li>The port that we will use for JMX would be the dynamic port mapped onto the static inbound port of the JMX router container.</li>\n<li>As soon as we obtained the dynamic port (the router container is launched) - we would use it for launching our JVM application.</li>\n</ul>\n<p>For building our JMX router we'd use HAproxy. To build the image we need <code>Dockerfile</code>:</p>\n<pre><code>FROM haproxy:latest\n\n\nUSER root\n\nRUN apt update &amp;&amp; apt -y install curl jq\n\nCOPY ./haproxy.cfg /usr/local/etc/haproxy/haproxy.cfg\nCOPY entrypoint.sh /entrypoint.sh\nRUN chmod +x /entrypoint.sh\n\nENTRYPOINT [&quot;/entrypoint.sh&quot;]\n</code></pre>\n<p>where <code>entrypoint.sh</code>:</p>\n<pre><code>#!/bin/bash\nset -x\n\nport=$(curl -s ${ECS_CONTAINER_METADATA_URI_V4}/task | jq '.Containers | .[] | select(.Name==&quot;haproxy-jmx&quot;) | .Ports | .[] | select(.ContainerPort==9090) | select(.HostIp==&quot;0.0.0.0&quot;) | .HostPort')\n\nwhile [ -z &quot;$port&quot; ]; do\n    echo &quot;Empty response, waiting 1 second and trying again...&quot;\n    sleep 1\n\n    port=$(curl -s ${ECS_CONTAINER_METADATA_URI_V4}/task | jq '.Containers | .[] | select(.Name==&quot;haproxy-jmx&quot;) | .Ports | .[] | select(.ContainerPort==9090) | select(.HostIp==&quot;0.0.0.0&quot;) | .HostPort')\ndone\n\necho &quot;Received port: $port&quot;\n\nsed -i &quot;s/\\$ECS_HOST_PORT/$port/&quot; /usr/local/etc/haproxy/haproxy.cfg\n\nhaproxy -f /usr/local/etc/haproxy/haproxy.cfg\n\n</code></pre>\n<p>with <code>haproxy.cfg</code>:</p>\n<pre><code>defaults\n    mode tcp\n\nfrontend service-jmx\n    bind :9090\n    default_backend service-jmx\n\nbackend service-jmx\n    server jmx app:$ECS_HOST_PORT\n\n</code></pre>\n<p>After our JMX router image is ready (published to our register), we could use it inside our task definition as one of container definitions, e.g.</p>\n<pre><code>{\n      &quot;name&quot;: &quot;haproxy-jmx&quot;,\n      &quot;image&quot;: &quot;{IMAGE_SOURCE_FROM_YOUR_REGISTRY}&quot;,\n      &quot;logConfiguration&quot;: {\n        &quot;logDriver&quot;: &quot;json-file&quot;,\n        &quot;secretOptions&quot;: null,\n        &quot;options&quot;: {\n          &quot;max-size&quot;: &quot;50m&quot;,\n          &quot;max-file&quot;: &quot;1&quot;\n        }\n      },\n      &quot;portMappings&quot;: [\n        {\n          &quot;hostPort&quot;: 0,\n          &quot;protocol&quot;: &quot;tcp&quot;,\n          &quot;containerPort&quot;: 9090\n        }\n      ],\n      &quot;cpu&quot;: 0,\n      &quot;memoryReservation&quot;: 32,\n\n      &quot;links&quot;: [\n        &quot;${name}:app&quot;\n      ]\n    }\n</code></pre>\n<p>Here we define our JMX static port is <code>9090</code>. You could pick any port allowed to use. But after you choose - that exactly that port we will use to find the dynamic port mapped to it by ECS when launching our JVM app.</p>\n<p>So now, the only thing left is to get the dynamic port assigned to our JMX router and use it as an RMI port for our JVM app. For that, in <code>entrypoint.sh</code> for our JVM app image we have the following:</p>\n<pre><code>#!/usr/bin/env sh\n\n# We set here our initial JVM settings\nJAVA_OPTS=&quot;-Dserver.port=8080 \\\n           -Djava.net.preferIPv4Stack=true&quot;\n\n#If we want to enable JMX for the app we will pass JMX_ENABLE env as true\nif [ &quot;${JMX_ENABLE}&quot; = &quot;true&quot; ]; then\n  \n  #we get EC2 instance IP to use as server host\n  HOST_SERVER_IP=$(curl -s http://169.254.169.254/latest/meta-data/local-ipv4)\n\n  # Get a dynamic ECS host port by agreed JMX static port\n  JMX_PORT=$(curl -s ${ECS_CONTAINER_METADATA_URI_V4}/task | jq '.Containers | .[] | select(.Name==&quot;haproxy-jmx&quot;) | .Ports | .[] | select(.ContainerPort==9090) | select(.HostIp==&quot;0.0.0.0&quot;) | .HostPort')\n  \n  #it might take sometime to get the router container started, let's wait a bit if needed\n  while [ -z &quot;$JMX_PORT&quot; ]; do\n    echo &quot;Empty response, waiting 1 second and trying again...&quot;\n    sleep 1\n\n    JMX_PORT=$(curl -s ${ECS_CONTAINER_METADATA_URI_V4}/task | jq '.Containers | .[] | select(.Name==&quot;haproxy-jmx&quot;) | .Ports | .[] | select(.ContainerPort==9090) | select(.HostIp==&quot;0.0.0.0&quot;) | .HostPort')\n  done\n\n  echo &quot;Received port: $JMX_PORT&quot;\n  \n  #JMX/RMI configuration you've already seen \n  JMX_OPTS=&quot;-Dcom.sun.management.jmxremote=true \\\n            -Dcom.sun.management.jmxremote.local.only=false \\\n            -Dcom.sun.management.jmxremote.authenticate=false \\\n            -Dcom.sun.management.jmxremote.ssl=false \\\n            -Djava.rmi.server.hostname=$HOST_SERVER_IP \\\n            -Dcom.sun.management.jmxremote.port=$JMX_PORT \\\n            -Dcom.sun.management.jmxremote.rmi.port=$JMX_PORT \\\n            -Dspring.jmx.enabled=true&quot;\n\n  JAVA_OPTS=&quot;$JAVA_OPTS $JMX_OPTS&quot;\nelse\n  echo &quot;JMX disabled&quot;\nfi\n\n#launching our app from working dir\njava ${JAVA_OPTS} -jar /opt/workdir/*.jar\n</code></pre>\n<p>So now as soon as both containers are up and running - use <code>HOST_SERVER_IP</code> and <code>JMX_PORT</code> to connect to your JVM application inside the ECS cluster.</p>\n<p>Tested and worked for us. Hope would helpful to others as well.</p>\n"}],"owner":{"account_id":3610515,"reputation":6781,"user_id":3011570,"accept_rate":94,"display_name":"Eric Broda"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":52295,"favorite_count":0,"down_vote_count":0,"up_vote_count":51,"accepted_answer_id":31276354,"answer_count":6,"score":51,"last_activity_date":1679499132,"creation_date":1436229615,"question_id":31257968,"body_markdown":"I am trying to remotely monitor a JVM running in docker.  The configuration looks like this:\r\n    \r\n- machine 1: runs a JVM (in my case, running kafka) in docker on an ubuntu machine; the IP of this machine is 10.0.1.201; the application running in docker is at 172.17.0.85.  \r\n\r\n- machine 2: runs JMX monitoring\r\n\r\nNote that when I run JMX monitoring from machine 2, it fails with a version of the following error (note: the same error occurs when I run jconsole, jvisualvm, jmxtrans, and node-jmx/npm:jmx):\r\n\r\nThe stack trace upon failing looks something like the following for each of the JMX monitoring tools:\r\n\r\n    java.rmi.ConnectException: Connection refused to host: 172.17.0.85; nested exception is\r\n        java.net.ConnectException: Operation timed out\r\n        at sun.rmi.transport.tcp.TCPEndpoint.newSocket(TCPEndpoint.java:619)\r\n        (followed by a large stack trace)\r\n\r\nNow the interesting part is when I run the same tools (jconsole, jvisualvm, jmxtrans, and node-jmx/npm:jmx) on the same machine that is running docker (machine 1 from above) the JMX monitoring works properly.  \r\n\r\nI think this suggests that my JMX port is active and working properly, but that when I execute JMX monitoring remotely (from machine 2) it looks like the JMX tool does not recognize the internal docker IP (172.17.0.85)\r\n\r\nBelow are the relevant (I think) network configuration elements on machine 1 where JMX monitoring works (note the docker ip, 172.17.42.1):\r\n\r\n    docker0   Link encap:Ethernet  HWaddr ...\r\n          inet addr:172.17.42.1  Bcast:0.0.0.0  Mask:255.255.0.0\r\n          inet6 addr:... Scope:Link\r\n          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1\r\n          RX packets:6787941 errors:0 dropped:0 overruns:0 frame:0\r\n          TX packets:4875190 errors:0 dropped:0 overruns:0 carrier:0\r\n          collisions:0 txqueuelen:0\r\n          RX bytes:1907319636 (1.9 GB)  TX bytes:639691630 (639.6 MB)\r\n\r\n    wlan0     Link encap:Ethernet  HWaddr ... \r\n          inet addr:10.0.1.201  Bcast:10.0.1.255  Mask:255.255.255.0\r\n          inet6 addr:... Scope:Link\r\n          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1\r\n          RX packets:4054252 errors:0 dropped:66 overruns:0 frame:0\r\n          TX packets:2447230 errors:0 dropped:0 overruns:0 carrier:0\r\n          collisions:0 txqueuelen:1000\r\n          RX bytes:2421399498 (2.4 GB)  TX bytes:1672522315 (1.6 GB)\r\n\r\nAnd this is the relevant network configuration elements on the remote machine (machine 2) from which I am getting the JMX errors:\r\n\r\n    lo0: flags=8049&lt;UP,LOOPBACK,RUNNING,MULTICAST&gt; mtu 16384\r\n\t    options=3&lt;RXCSUM,TXCSUM&gt;\r\n\t    inet6 ::1 prefixlen 128 \r\n\t    inet 127.0.0.1 netmask 0xff000000 \r\n\t    inet6 fe80::1%lo0 prefixlen 64 scopeid 0x1 \r\n\t    nd6 options=1&lt;PERFORMNUD&gt;\r\n\r\n    en1: flags=8863&lt;UP,BROADCAST,SMART,RUNNING,SIMPLEX,MULTICAST&gt; mtu 1500\r\n\t    ether .... \r\n\t    inet6 ....%en1 prefixlen 64 scopeid 0x5 \r\n\t    inet 10.0.1.203 netmask 0xffffff00 broadcast 10.0.1.255\r\n\t    nd6 options=1&lt;PERFORMNUD&gt;\r\n\t    media: autoselect\r\n\t    status: active","title":"How to access JMX interface in docker from outside?","body":"<p>I am trying to remotely monitor a JVM running in docker.  The configuration looks like this:</p>\n\n<ul>\n<li><p>machine 1: runs a JVM (in my case, running kafka) in docker on an ubuntu machine; the IP of this machine is 10.0.1.201; the application running in docker is at 172.17.0.85.  </p></li>\n<li><p>machine 2: runs JMX monitoring</p></li>\n</ul>\n\n<p>Note that when I run JMX monitoring from machine 2, it fails with a version of the following error (note: the same error occurs when I run jconsole, jvisualvm, jmxtrans, and node-jmx/npm:jmx):</p>\n\n<p>The stack trace upon failing looks something like the following for each of the JMX monitoring tools:</p>\n\n<pre><code>java.rmi.ConnectException: Connection refused to host: 172.17.0.85; nested exception is\n    java.net.ConnectException: Operation timed out\n    at sun.rmi.transport.tcp.TCPEndpoint.newSocket(TCPEndpoint.java:619)\n    (followed by a large stack trace)\n</code></pre>\n\n<p>Now the interesting part is when I run the same tools (jconsole, jvisualvm, jmxtrans, and node-jmx/npm:jmx) on the same machine that is running docker (machine 1 from above) the JMX monitoring works properly.  </p>\n\n<p>I think this suggests that my JMX port is active and working properly, but that when I execute JMX monitoring remotely (from machine 2) it looks like the JMX tool does not recognize the internal docker IP (172.17.0.85)</p>\n\n<p>Below are the relevant (I think) network configuration elements on machine 1 where JMX monitoring works (note the docker ip, 172.17.42.1):</p>\n\n<pre><code>docker0   Link encap:Ethernet  HWaddr ...\n      inet addr:172.17.42.1  Bcast:0.0.0.0  Mask:255.255.0.0\n      inet6 addr:... Scope:Link\n      UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1\n      RX packets:6787941 errors:0 dropped:0 overruns:0 frame:0\n      TX packets:4875190 errors:0 dropped:0 overruns:0 carrier:0\n      collisions:0 txqueuelen:0\n      RX bytes:1907319636 (1.9 GB)  TX bytes:639691630 (639.6 MB)\n\nwlan0     Link encap:Ethernet  HWaddr ... \n      inet addr:10.0.1.201  Bcast:10.0.1.255  Mask:255.255.255.0\n      inet6 addr:... Scope:Link\n      UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1\n      RX packets:4054252 errors:0 dropped:66 overruns:0 frame:0\n      TX packets:2447230 errors:0 dropped:0 overruns:0 carrier:0\n      collisions:0 txqueuelen:1000\n      RX bytes:2421399498 (2.4 GB)  TX bytes:1672522315 (1.6 GB)\n</code></pre>\n\n<p>And this is the relevant network configuration elements on the remote machine (machine 2) from which I am getting the JMX errors:</p>\n\n<pre><code>lo0: flags=8049&lt;UP,LOOPBACK,RUNNING,MULTICAST&gt; mtu 16384\n    options=3&lt;RXCSUM,TXCSUM&gt;\n    inet6 ::1 prefixlen 128 \n    inet 127.0.0.1 netmask 0xff000000 \n    inet6 fe80::1%lo0 prefixlen 64 scopeid 0x1 \n    nd6 options=1&lt;PERFORMNUD&gt;\n\nen1: flags=8863&lt;UP,BROADCAST,SMART,RUNNING,SIMPLEX,MULTICAST&gt; mtu 1500\n    ether .... \n    inet6 ....%en1 prefixlen 64 scopeid 0x5 \n    inet 10.0.1.203 netmask 0xffffff00 broadcast 10.0.1.255\n    nd6 options=1&lt;PERFORMNUD&gt;\n    media: autoselect\n    status: active\n</code></pre>\n"},{"tags":["java","mysql","sql","jdbc","netbeans6.5"],"comments":[{"owner":{"account_id":1688935,"reputation":2244,"user_id":1551685,"display_name":"Steve Smith"},"score":2,"creation_date":1484904028,"post_id":41759298,"comment_id":70711570,"body_markdown":"If the file is made up of separate smaller SQL commands, you should read each command in at a time.  Theoretically you can load a 15Mb String, but you&#39;ll probably run out of memory.","body":"If the file is made up of separate smaller SQL commands, you should read each command in at a time.  Theoretically you can load a 15Mb String, but you&#39;ll probably run out of memory."},{"owner":{"account_id":216950,"reputation":20103,"user_id":472495,"accept_rate":92,"display_name":"halfer"},"score":0,"creation_date":1485085385,"post_id":41759298,"comment_id":70769626,"body_markdown":"You could write a background service to use the `mysqlimport` command to load the file in one go, that will do the file splitting and running for you.","body":"You could write a background service to use the <code>mysqlimport</code> command to load the file in one go, that will do the file splitting and running for you."},{"owner":{"account_id":7380871,"reputation":276,"user_id":6359079,"display_name":"v_ag"},"score":0,"creation_date":1485085892,"post_id":41759298,"comment_id":70769753,"body_markdown":"@halfer Thanks for the solution but I don&#39;t know how to do so. I am just a fresher to java programming. I&#39;ll be happy if you tell me how to do it.","body":"@halfer Thanks for the solution but I don&#39;t know how to do so. I am just a fresher to java programming. I&#39;ll be happy if you tell me how to do it."},{"owner":{"account_id":2439220,"reputation":459,"user_id":2128235,"accept_rate":80,"display_name":"Anton"},"score":0,"creation_date":1485086163,"post_id":41759298,"comment_id":70769832,"body_markdown":"Maybe you can use the flyway lib. It is used to execute flyway migrations via java or sql files. It might be a bit too much for your goal but I suggets to have a look at https://flywaydb.org.","body":"Maybe you can use the flyway lib. It is used to execute flyway migrations via java or sql files. It might be a bit too much for your goal but I suggets to have a look at <a href=\"https://flywaydb.org\" rel=\"nofollow noreferrer\">flywaydb.org</a>."},{"owner":{"account_id":7380871,"reputation":276,"user_id":6359079,"display_name":"v_ag"},"score":0,"creation_date":1485086262,"post_id":41759298,"comment_id":70769863,"body_markdown":"@Anton Thanks. I will look up the website...","body":"@Anton Thanks. I will look up the website..."},{"owner":{"account_id":2439220,"reputation":459,"user_id":2128235,"accept_rate":80,"display_name":"Anton"},"score":0,"creation_date":1485086452,"post_id":41759298,"comment_id":70769933,"body_markdown":"@VaibhavAgrawal you are welcome :-)","body":"@VaibhavAgrawal you are welcome :-)"},{"owner":{"account_id":2460030,"reputation":118378,"user_id":2144390,"accept_rate":100,"display_name":"Gord Thompson"},"score":0,"creation_date":1485219970,"post_id":41759298,"comment_id":70824894,"body_markdown":"A similar question [here](http://stackoverflow.com/q/33336063/2144390) has an answer that uses [SqlTool](http://hsqldb.org/doc/2.0/util-guide/sqltool-chapt.html) to accomplish what you describe.","body":"A similar question <a href=\"http://stackoverflow.com/q/33336063/2144390\">here</a> has an answer that uses <a href=\"http://hsqldb.org/doc/2.0/util-guide/sqltool-chapt.html\" rel=\"nofollow noreferrer\">SqlTool</a> to accomplish what you describe."},{"owner":{"account_id":7380871,"reputation":276,"user_id":6359079,"display_name":"v_ag"},"score":0,"creation_date":1485220543,"post_id":41759298,"comment_id":70825049,"body_markdown":"@GordThompson Thanks. I found it working.","body":"@GordThompson Thanks. I found it working."},{"owner":{"account_id":2460030,"reputation":118378,"user_id":2144390,"accept_rate":100,"display_name":"Gord Thompson"},"score":0,"creation_date":1485220734,"post_id":41759298,"comment_id":70825103,"body_markdown":"Good to hear. Perhaps you might consider posting an answer to let others know what ultimately worked for you.","body":"Good to hear. Perhaps you might consider posting an answer to let others know what ultimately worked for you."},{"owner":{"account_id":7380871,"reputation":276,"user_id":6359079,"display_name":"v_ag"},"score":0,"creation_date":1485260712,"post_id":41759298,"comment_id":70843123,"body_markdown":"@GordThompson Hey, Sorry but the answer you have referenced, just works with HSQL and not with MySQL. SQLTool too works with just HSQL. Not Working!!!","body":"@GordThompson Hey, Sorry but the answer you have referenced, just works with HSQL and not with MySQL. SQLTool too works with just HSQL. Not Working!!!"},{"owner":{"account_id":2460030,"reputation":118378,"user_id":2144390,"accept_rate":100,"display_name":"Gord Thompson"},"score":0,"creation_date":1485262784,"post_id":41759298,"comment_id":70844442,"body_markdown":"*&quot;SQLTool too works with just HSQL&quot;* - Not true. If you look at the sample configuration file (&quot;RC file&quot;) [here](http://hsqldb.org/doc/2.0/util-guide/sqltool-chapt.html#sqltool_auth-sect) you will see examples for Oracle, PostgreSQL, MySQL, SQL Server, and Derby.","body":"<i>&quot;SQLTool too works with just HSQL&quot;</i> - Not true. If you look at the sample configuration file (&quot;RC file&quot;) <a href=\"http://hsqldb.org/doc/2.0/util-guide/sqltool-chapt.html#sqltool_auth-sect\" rel=\"nofollow noreferrer\">here</a> you will see examples for Oracle, PostgreSQL, MySQL, SQL Server, and Derby."}],"answers":[{"tags":[],"owner":{"account_id":7696109,"reputation":65,"user_id":5830566,"accept_rate":40,"display_name":"Roy"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1485406837,"creation_date":1485406837,"answer_id":41867184,"question_id":41759298,"body_markdown":"I think [ScriptUtils.executeSqlScript][1] can help you.\r\n\r\n\r\n  [1]: http://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/jdbc/datasource/init/ScriptUtils.html#executeSqlScript-java.sql.Connection-org.springframework.core.io.support.EncodedResource-","title":"How to load a SQL file (stored in the source folder of my Java project) into MySQL from a Java Application?","body":"<p>I think <a href=\"http://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/jdbc/datasource/init/ScriptUtils.html#executeSqlScript-java.sql.Connection-org.springframework.core.io.support.EncodedResource-\" rel=\"nofollow noreferrer\">ScriptUtils.executeSqlScript</a> can help you.</p>\n"},{"tags":[],"owner":{"account_id":7380871,"reputation":276,"user_id":6359079,"display_name":"v_ag"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1485410338,"creation_date":1485410338,"answer_id":41867686,"question_id":41759298,"body_markdown":"**I found that it is probably impossible to do it yet without adding additional tools and libraries.**\n\nWe can do it by splitting the SQL file into smaller SQL files, each containing just one SQL command and then initiating a loop to execute all those files at once. I&#39;d tried it and it works. It certainly does.\n\nThe following is the code I used to do that :\n\n    import javax.swing.* ;\n    import java.sql.* ;\n    import java.io.* ;\n    \n    public class LoadSQLFile {\n        public static void main(string args[ ]) {\n            java.awt.EventQueue.invokeLater(new Runnable() {\n                public void run() {\n                    try {\n                        String password = JOptionPane.showInputDialog(null, &quot;We need your MySQL Password to run the application. Please enter it here.&quot;, &quot; MySQL Password ?&quot;, JOptionPane.QUESTION_MESSAGE) ;\n                        Class.forName(&quot;java.sql.Driver&quot;) ;\n                        Connection conn = DriverManager.getConnection(&quot;jdbc:mysql://localhost/MyDB&quot;, &quot;root&quot;, password) ;\n                        Statement stmt = conn.createStatement() ;\n                        int i = 0 ;\n                        for(i=1;i&lt;=16;i++) {\n                            FileReader fr = new FileReader(&quot;src//sql_files//BCK&quot;+i+&quot;.sql&quot;) ;\n                            BufferedReader br = new BufferedReader(fr) ;\n                            stmt.execute(br.readLine()) ;\n                        }\n                        stmt.close();\n                        conn.close();\n                        JOptionPane.showMessageDialog(null, &quot; Records Successfully Inserted into database !&quot;, &quot;Success !&quot;, 1) ;\n                    } catch(Exception e) {\n                        JOptionPane.showMessageDialog(null, e, &quot;ERROR&quot;, JOptionPane.ERROR_MESSAGE) ;\n                    }\n                }\n            });\n        }\n    }\n\nI was to execute SQL files stored in my project&#39;s source folder inside a package named &quot;sql_files&quot;. The names of the files are - BCK1.sql, BCK2.sql, ...., BCK16.sql. Each file contained just one SQL file in just first line. It worked just fine for me.\n\n*I used the MySQL JDBC Driver for this.*","title":"How to load a SQL file (stored in the source folder of my Java project) into MySQL from a Java Application?","body":"<p><strong>I found that it is probably impossible to do it yet without adding additional tools and libraries.</strong></p>\n\n<p>We can do it by splitting the SQL file into smaller SQL files, each containing just one SQL command and then initiating a loop to execute all those files at once. I'd tried it and it works. It certainly does.</p>\n\n<p>The following is the code I used to do that :</p>\n\n<pre><code>import javax.swing.* ;\nimport java.sql.* ;\nimport java.io.* ;\n\npublic class LoadSQLFile {\n    public static void main(string args[ ]) {\n        java.awt.EventQueue.invokeLater(new Runnable() {\n            public void run() {\n                try {\n                    String password = JOptionPane.showInputDialog(null, \"We need your MySQL Password to run the application. Please enter it here.\", \" MySQL Password ?\", JOptionPane.QUESTION_MESSAGE) ;\n                    Class.forName(\"java.sql.Driver\") ;\n                    Connection conn = DriverManager.getConnection(\"jdbc:mysql://localhost/MyDB\", \"root\", password) ;\n                    Statement stmt = conn.createStatement() ;\n                    int i = 0 ;\n                    for(i=1;i&lt;=16;i++) {\n                        FileReader fr = new FileReader(\"src//sql_files//BCK\"+i+\".sql\") ;\n                        BufferedReader br = new BufferedReader(fr) ;\n                        stmt.execute(br.readLine()) ;\n                    }\n                    stmt.close();\n                    conn.close();\n                    JOptionPane.showMessageDialog(null, \" Records Successfully Inserted into database !\", \"Success !\", 1) ;\n                } catch(Exception e) {\n                    JOptionPane.showMessageDialog(null, e, \"ERROR\", JOptionPane.ERROR_MESSAGE) ;\n                }\n            }\n        });\n    }\n}\n</code></pre>\n\n<p>I was to execute SQL files stored in my project's source folder inside a package named \"sql_files\". The names of the files are - BCK1.sql, BCK2.sql, ...., BCK16.sql. Each file contained just one SQL file in just first line. It worked just fine for me.</p>\n\n<p><em>I used the MySQL JDBC Driver for this.</em></p>\n"},{"tags":[],"owner":{"account_id":21004999,"reputation":788,"user_id":15435022,"display_name":"mattsmith5"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1659420835,"creation_date":1656099056,"answer_id":72748629,"question_id":41759298,"body_markdown":"Use the following code:\r\n\r\n    public static String readFileAsString(Class clazz, String filePath) throws IOException {\r\n        InputStream inputStream = clazz.getClassLoader().getResourceAsStream(filePath);\r\n        if (inputStream == null) {\r\n            throw new IllegalArgumentException(&quot;File not found: &quot; + filePath);\r\n        }\r\n        return IOUtils.toString(inputStream);\r\n    }\r\n\r\n    public static final Path SQL_QUERY_FILE_PATH = Paths.get(&quot;SqlFolder&quot;, &quot;productQuery.sql&quot;);\r\n\r\n    String sqlQuery = FileResourceUtil.readFileAsString(getClass(), SQL_QUERY_FILE_PATH.toString());\r\n\r\n","title":"How to load a SQL file (stored in the source folder of my Java project) into MySQL from a Java Application?","body":"<p>Use the following code:</p>\n<pre><code>public static String readFileAsString(Class clazz, String filePath) throws IOException {\n    InputStream inputStream = clazz.getClassLoader().getResourceAsStream(filePath);\n    if (inputStream == null) {\n        throw new IllegalArgumentException(&quot;File not found: &quot; + filePath);\n    }\n    return IOUtils.toString(inputStream);\n}\n\npublic static final Path SQL_QUERY_FILE_PATH = Paths.get(&quot;SqlFolder&quot;, &quot;productQuery.sql&quot;);\n\nString sqlQuery = FileResourceUtil.readFileAsString(getClass(), SQL_QUERY_FILE_PATH.toString());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2755115,"reputation":65,"user_id":2373451,"display_name":"Ranjeet Rana"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679499055,"creation_date":1679499055,"answer_id":75814264,"question_id":41759298,"body_markdown":"Here is example, This will print 3 statements.\r\n\r\n      public static void main(String[] args) {\r\n            var sql = &quot;select;insert(&#39;;&#39;)\\n sdfsd;&quot;\r\n                    + &quot;update&quot;;\r\n\r\n            List&lt;String&gt; stmt = new ArrayList&lt;&gt;();\r\n\r\n            org.springframework.jdbc.datasource.init.ScriptUtils.splitSqlScript(sql, &quot;;&quot;, stmt);\r\n\r\n            stmt.forEach(e -&gt; log.info(e));\r\n        }","title":"How to load a SQL file (stored in the source folder of my Java project) into MySQL from a Java Application?","body":"<p>Here is example, This will print 3 statements.</p>\n<pre><code>  public static void main(String[] args) {\n        var sql = &quot;select;insert(';')\\n sdfsd;&quot;\n                + &quot;update&quot;;\n\n        List&lt;String&gt; stmt = new ArrayList&lt;&gt;();\n\n        org.springframework.jdbc.datasource.init.ScriptUtils.splitSqlScript(sql, &quot;;&quot;, stmt);\n\n        stmt.forEach(e -&gt; log.info(e));\n    }\n</code></pre>\n"}],"owner":{"account_id":7380871,"reputation":276,"user_id":6359079,"display_name":"v_ag"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":12984,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":41867686,"answer_count":4,"score":4,"last_activity_date":1679499055,"creation_date":1484901584,"question_id":41759298,"body_markdown":"I want to load an SQL file (which is stored in the source folder of my NetBeans Java Project) into MySQL from my Java Application during runtime. How can I do this?\r\n\r\nThe SQL file is 15.15 MB in size and I am wondering whether I can copy into a String or not? Or if I anyhow manage to copy it to a String (though it may throw out of memory error), how to execute multiple commands in one go (because the SQL file contains many commands).\r\n\nI want to do it without using any additional tools. Just using pre-existing libraries and classes in java (that are bundled with JDK).","title":"How to load a SQL file (stored in the source folder of my Java project) into MySQL from a Java Application?","body":"<p>I want to load an SQL file (which is stored in the source folder of my NetBeans Java Project) into MySQL from my Java Application during runtime. How can I do this?</p>\n\n<p>The SQL file is 15.15 MB in size and I am wondering whether I can copy into a String or not? Or if I anyhow manage to copy it to a String (though it may throw out of memory error), how to execute multiple commands in one go (because the SQL file contains many commands).</p>\n\n<p>I want to do it without using any additional tools. Just using pre-existing libraries and classes in java (that are bundled with JDK).</p>\n"},{"tags":["java","apache","web-services","httprequest","httpresponse"],"comments":[{"owner":{"account_id":7407536,"reputation":116,"user_id":5665628,"display_name":"Titus T"},"score":0,"creation_date":1551453099,"post_id":45738233,"comment_id":96657544,"body_markdown":"Are you giving a valid domain or a valid url. This error actually states out that you probabely missing the protocol in the url. This happens if you just send the domain (without the protocolk http:// or https://)","body":"Are you giving a valid domain or a valid url. This error actually states out that you probabely missing the protocol in the url. This happens if you just send the domain (without the protocolk http:// or https://)"}],"answers":[{"tags":[],"owner":{"account_id":3347567,"reputation":397,"user_id":2812410,"accept_rate":33,"display_name":"Prajyod Kumar"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1503553140,"creation_date":1503553140,"answer_id":45853726,"question_id":45738233,"body_markdown":"When sending a request , somehow my URL which I want to send the request to is getting null which caused this issue when I am trying to execute a request.","title":"java.lang.IllegalStateException: Target host is null","body":"<p>When sending a request , somehow my URL which I want to send the request to is getting null which caused this issue when I am trying to execute a request.</p>\n"},{"tags":[],"owner":{"account_id":25823666,"reputation":21,"user_id":19562294,"display_name":"spacehaze"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1679498972,"creation_date":1679498939,"answer_id":75814238,"question_id":45738233,"body_markdown":"In my case also &quot;http://&quot; was missing","title":"java.lang.IllegalStateException: Target host is null","body":"<p>In my case also &quot;http://&quot; was missing</p>\n"}],"owner":{"account_id":3347567,"reputation":397,"user_id":2812410,"accept_rate":33,"display_name":"Prajyod Kumar"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":15153,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":45853726,"answer_count":2,"score":1,"last_activity_date":1679498972,"creation_date":1502980985,"question_id":45738233,"body_markdown":"I have googled but many concerns was &quot;**java.lang.IllegalStateException: Target host must not be null**&quot;, but in my case error was &quot;**java.lang.IllegalStateException: Target host is null**&quot;\r\n\r\nI am trying to post a request using following code\r\n\r\n    StringEntity reqContent = new StringEntity(xmlData);\r\n\treqContent.setContentType(&quot;text/xml&quot;);\r\n\r\n\tHttpPost req = new HttpPost(serverURL);\r\n\treq.setEntity(reqContent);\r\n\r\n    httpClient = new DefaultHttpClient(connMgr, params);\r\n\t\t       \r\n    httpClient.getCredentialsProvider().setCredentials(AuthScope.ANY,\r\n    new UsernamePasswordCredentials(username, password));\r\n\r\n    HttpResponse response = httpClient.execute(req);\r\n\r\nAfter executing the request I am getting &quot;Target host is null&quot;.\r\nI am giving a valid host. Does this error comes when Target host which I am trying to access is not available?","title":"java.lang.IllegalStateException: Target host is null","body":"<p>I have googled but many concerns was \"<strong>java.lang.IllegalStateException: Target host must not be null</strong>\", but in my case error was \"<strong>java.lang.IllegalStateException: Target host is null</strong>\"</p>\n\n<p>I am trying to post a request using following code</p>\n\n<pre><code>StringEntity reqContent = new StringEntity(xmlData);\nreqContent.setContentType(\"text/xml\");\n\nHttpPost req = new HttpPost(serverURL);\nreq.setEntity(reqContent);\n\nhttpClient = new DefaultHttpClient(connMgr, params);\n\nhttpClient.getCredentialsProvider().setCredentials(AuthScope.ANY,\nnew UsernamePasswordCredentials(username, password));\n\nHttpResponse response = httpClient.execute(req);\n</code></pre>\n\n<p>After executing the request I am getting \"Target host is null\".\nI am giving a valid host. Does this error comes when Target host which I am trying to access is not available?</p>\n"},{"tags":["java","spring","multithreading","singleton"],"comments":[{"owner":{"account_id":14722107,"reputation":5143,"user_id":10632369,"display_name":"tomerpacific"},"score":0,"creation_date":1679386836,"post_id":75798722,"comment_id":133707974,"body_markdown":"Consider synchronizing the singleton methods so that only one thread has access to a shared resource.","body":"Consider synchronizing the singleton methods so that only one thread has access to a shared resource."},{"owner":{"account_id":12621614,"reputation":962,"user_id":9176914,"accept_rate":100,"display_name":"Muddassir Rahman"},"score":0,"creation_date":1679387231,"post_id":75798722,"comment_id":133708062,"body_markdown":"@tomerpacific synchronizing will affect the performance very badly .","body":"@tomerpacific synchronizing will affect the performance very badly ."},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1679392951,"post_id":75798722,"comment_id":133709571,"body_markdown":"What you should do is make your chain prototype scoped and create `@Bean` methods that configure the different chains you want and inject those into the service, instead of combining the chains in the service. Basically you should move the construction of the chain out of your service.","body":"What you should do is make your chain prototype scoped and create <code>@Bean</code> methods that configure the different chains you want and inject those into the service, instead of combining the chains in the service. Basically you should move the construction of the chain out of your service."},{"owner":{"account_id":12621614,"reputation":962,"user_id":9176914,"accept_rate":100,"display_name":"Muddassir Rahman"},"score":0,"creation_date":1679393877,"post_id":75798722,"comment_id":133709846,"body_markdown":"@M.Deinum isn&#39;t making the bean as prototype,  will have extra memory utilisation ? as it will create object on each request","body":"@M.Deinum isn&#39;t making the bean as prototype,  will have extra memory utilisation ? as it will create object on each request"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1679393929,"post_id":75798722,"comment_id":133709863,"body_markdown":"No it won&#39;t create an object on each request (prototype != request scope), it will only create objects for each injection point.","body":"No it won&#39;t create an object on each request (prototype != request scope), it will only create objects for each injection point."},{"owner":{"account_id":12621614,"reputation":962,"user_id":9176914,"accept_rate":100,"display_name":"Muddassir Rahman"},"score":0,"creation_date":1679427331,"post_id":75798722,"comment_id":133719808,"body_markdown":"@M.Deinum Would you mind providing an example of how you propose to create `@Bean`. As far as I know bean returns an object. How chains will be mapped there ? and how I will use that in my service","body":"@M.Deinum Would you mind providing an example of how you propose to create <code>@Bean</code>. As far as I know bean returns an object. How chains will be mapped there ? and how I will use that in my service"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1679470093,"post_id":75798722,"comment_id":133725811,"body_markdown":"You are now configuring the chains in your service method, that logic has to move to `@Bean` methods. You can then inject the resulting chain into the service, with that even not knowing you are using this as a chain of responsibility.","body":"You are now configuring the chains in your service method, that logic has to move to <code>@Bean</code> methods. You can then inject the resulting chain into the service, with that even not knowing you are using this as a chain of responsibility."}],"answers":[{"tags":[],"owner":{"account_id":1096470,"reputation":26066,"user_id":1089967,"accept_rate":59,"display_name":"lance-java"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1679498958,"creation_date":1679388047,"answer_id":75798921,"question_id":75798722,"body_markdown":"Personally I&#39;d remove the `nextChain(...)` method from `TransactionChain` so it is immutable and therefore thread-safe. Then you could do something like\r\n\r\n```\r\npublic class ChainProcessor {\r\n   private TransactionChain[] steps;\r\n   public ChainProcessor(TransactionChain... steps) { \r\n      this.steps = steps;\r\n   }\r\n   public void process(ChainContext context) { \r\n      Arrays.stream(steps).forEach(step -&gt; step.processChain(context));\r\n   }\r\n}\r\n```\r\n\r\n```\r\n/**\r\n * This context class only required if you need to pass state from one step to another\r\n */\r\npublic class ChainContext {\r\n   public void setValue(String name, Object value) { ... }\r\n   public &lt;T&gt; T getValue(String name, Class&lt;T&gt; type) { ... }\r\n}\r\n```\r\n\r\n```\r\npublic interface TransactionChain {\r\n   void processChain(ChainContext context);\r\n}\r\n```\r\n\r\n```\r\n@Service \r\npublic class TransactionChainContext {\r\n\r\n   @Autowired\r\n   TransactionChain validationChainOne;\r\n\r\n   @Autowired\r\n   TransactionChain validationChainTwo;\r\n\r\n   @Autowired\r\n   TransactionChain validationChainThree;\r\n   \r\n   private ChainProcessor cp1;\r\n   private ChainProcessor cp2;\r\n\r\n   @PostConstruct\r\n   public void postConstruct() {\r\n      cp1 = new ChainProcessor(validationChainOne, validationChainTwo, validationChainThree);\r\n      cp2 = new ChainProcessor(validationChainThree, validationChainTwo, validationChainOne);\r\n   }\r\n\r\n   public void saveChainOne() { \r\n      cp1.process(new ChainContext());\r\n   }\r\n\r\n   public void saveChainTwo() {                     \r\n      cp2.process(new ChainContext());\r\n   }\r\n}\r\n```\r\n\r\nI personally hate `@Autowired` and `@PostConstruct` and never use them. I prefer final member variables and constructor injection. See [this blog post](https://odrotbohm.de/2013/11/why-field-injection-is-evil/) on why field injection is evil\r\n\r\n**Edit**\r\n\r\nIn answer to Muddassir Rahman question regarding filtering a list you could do\r\n\r\n```java\r\n@Service \r\npublic class TransactionChainContext {\r\n   ...\r\n   public void saveChainOne(List&lt;Transaction&gt; transactions) { \r\n      ChainContext context = new new ChainContext();\r\n      context.setValue(&quot;transactions&quot;, transactions);\r\n      cp1.process(context);\r\n      List&lt;Transaction&gt; filteredTransactions = context.getValue(&quot;transactions&quot;, List.class);\r\n      doStuff(filteredTransactions);\r\n   }\r\n   ...\r\n}\r\n```\r\n\r\nAnd\r\n\r\n```java\r\n@Configuration\r\npublic class MyConfiguration {\r\n   @Bean\r\n   public TransactionChain validationChainOne() {\r\n      return context -&gt; {\r\n         List&lt;Transaction&gt; transactions = context.getValue(&quot;transactions&quot;, List.class);\r\n         List&lt;Transaction&gt; filteredTransactions = transactions.stream().filter(t -&gt; !t.getName().contains(&quot;foo&quot;)).collect(Collectors.toList());\r\n         context.setValue(&quot;transactions&quot;, filteredTransactions);\r\n      };\r\n   }\r\n\r\n   @Bean\r\n   public TransactionChain validationChainTwo() {\r\n      return context -&gt; {\r\n         List&lt;Transaction&gt; transactions = context.getValue(&quot;transactions&quot;, List.class);\r\n         List&lt;Transaction&gt; filteredTransactions = transactions.stream().filter(t -&gt; !t.getName().contains(&quot;bar&quot;)).collect(Collectors.toList());\r\n         context.setValue(&quot;transactions&quot;, filteredTransactions);\r\n      };\r\n   }\r\n}\r\n```\r\n\r\nIf you want to be less generic, you could have a customised context class. Eg\r\n```java\r\npublic class ChainContext {\r\n   private final List&lt;Transaction&gt; transactions;\r\n   private final List&lt;Predicate&lt;Transaction&gt;&gt; filters = new ArrayList&lt;&gt;();\r\n\r\n   public ChainContext(List&lt;Transaction&gt; transactions) {\r\n      this.transactions = transactions;\r\n   }\r\n\r\n   public void addFilter(Predicate&lt;Transaction&gt; filter) {\r\n      filters.add(filter);\r\n   }\r\n\r\n   public List&lt;Transaction&gt; getFilteredTransactions() {\r\n      return transactions.stream()\r\n         .filter(t -&gt; filters.stream().allMatch(filter -&gt; filter.test(t))\r\n         .collect(Collectors.toList());\r\n   }\r\n}\r\n```","title":"Issue with singleton scope bean in case","body":"<p>Personally I'd remove the <code>nextChain(...)</code> method from <code>TransactionChain</code> so it is immutable and therefore thread-safe. Then you could do something like</p>\n<pre><code>public class ChainProcessor {\n   private TransactionChain[] steps;\n   public ChainProcessor(TransactionChain... steps) { \n      this.steps = steps;\n   }\n   public void process(ChainContext context) { \n      Arrays.stream(steps).forEach(step -&gt; step.processChain(context));\n   }\n}\n</code></pre>\n<pre><code>/**\n * This context class only required if you need to pass state from one step to another\n */\npublic class ChainContext {\n   public void setValue(String name, Object value) { ... }\n   public &lt;T&gt; T getValue(String name, Class&lt;T&gt; type) { ... }\n}\n</code></pre>\n<pre><code>public interface TransactionChain {\n   void processChain(ChainContext context);\n}\n</code></pre>\n<pre><code>@Service \npublic class TransactionChainContext {\n\n   @Autowired\n   TransactionChain validationChainOne;\n\n   @Autowired\n   TransactionChain validationChainTwo;\n\n   @Autowired\n   TransactionChain validationChainThree;\n   \n   private ChainProcessor cp1;\n   private ChainProcessor cp2;\n\n   @PostConstruct\n   public void postConstruct() {\n      cp1 = new ChainProcessor(validationChainOne, validationChainTwo, validationChainThree);\n      cp2 = new ChainProcessor(validationChainThree, validationChainTwo, validationChainOne);\n   }\n\n   public void saveChainOne() { \n      cp1.process(new ChainContext());\n   }\n\n   public void saveChainTwo() {                     \n      cp2.process(new ChainContext());\n   }\n}\n</code></pre>\n<p>I personally hate <code>@Autowired</code> and <code>@PostConstruct</code> and never use them. I prefer final member variables and constructor injection. See <a href=\"https://odrotbohm.de/2013/11/why-field-injection-is-evil/\" rel=\"nofollow noreferrer\">this blog post</a> on why field injection is evil</p>\n<p><strong>Edit</strong></p>\n<p>In answer to Muddassir Rahman question regarding filtering a list you could do</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Service \npublic class TransactionChainContext {\n   ...\n   public void saveChainOne(List&lt;Transaction&gt; transactions) { \n      ChainContext context = new new ChainContext();\n      context.setValue(&quot;transactions&quot;, transactions);\n      cp1.process(context);\n      List&lt;Transaction&gt; filteredTransactions = context.getValue(&quot;transactions&quot;, List.class);\n      doStuff(filteredTransactions);\n   }\n   ...\n}\n</code></pre>\n<p>And</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\npublic class MyConfiguration {\n   @Bean\n   public TransactionChain validationChainOne() {\n      return context -&gt; {\n         List&lt;Transaction&gt; transactions = context.getValue(&quot;transactions&quot;, List.class);\n         List&lt;Transaction&gt; filteredTransactions = transactions.stream().filter(t -&gt; !t.getName().contains(&quot;foo&quot;)).collect(Collectors.toList());\n         context.setValue(&quot;transactions&quot;, filteredTransactions);\n      };\n   }\n\n   @Bean\n   public TransactionChain validationChainTwo() {\n      return context -&gt; {\n         List&lt;Transaction&gt; transactions = context.getValue(&quot;transactions&quot;, List.class);\n         List&lt;Transaction&gt; filteredTransactions = transactions.stream().filter(t -&gt; !t.getName().contains(&quot;bar&quot;)).collect(Collectors.toList());\n         context.setValue(&quot;transactions&quot;, filteredTransactions);\n      };\n   }\n}\n</code></pre>\n<p>If you want to be less generic, you could have a customised context class. Eg</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class ChainContext {\n   private final List&lt;Transaction&gt; transactions;\n   private final List&lt;Predicate&lt;Transaction&gt;&gt; filters = new ArrayList&lt;&gt;();\n\n   public ChainContext(List&lt;Transaction&gt; transactions) {\n      this.transactions = transactions;\n   }\n\n   public void addFilter(Predicate&lt;Transaction&gt; filter) {\n      filters.add(filter);\n   }\n\n   public List&lt;Transaction&gt; getFilteredTransactions() {\n      return transactions.stream()\n         .filter(t -&gt; filters.stream().allMatch(filter -&gt; filter.test(t))\n         .collect(Collectors.toList());\n   }\n}\n</code></pre>\n"}],"owner":{"account_id":12621614,"reputation":962,"user_id":9176914,"accept_rate":100,"display_name":"Muddassir Rahman"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":326,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":75798921,"answer_count":1,"score":2,"last_activity_date":1679498958,"creation_date":1679386602,"question_id":75798722,"body_markdown":"I have a spring boot project in which I have implemented chain of responsibility pattern. I have created chains of multiple service class.\r\nEach service is of scope Singleton. Now I have 2 threads are accessing the bean which is singleton, then in this case modifications done by one thread is affecting the other thread working on the same bean. I tried making the bean scope as request but it didn&#39;t work.\r\n\r\n**TransactionChainContext - defining chains**\r\n    \r\n    @Service \r\n    public class TransactionChainContext {\r\n\r\n\t@Autowired\r\n\tTransactionChain validationChainOne;\r\n\r\n    @Autowired\r\n    TransactionChain validationChainTwo;\r\n\r\n    @Autowired\r\n    TransactionChain validationChainThree;\r\n\t\r\n\t@Autowired\r\n    TransactionChain validationChainFour;\r\n\t\r\n\t@Autowired\r\n    TransactionChain validationChainFive;\r\n\t\r\n\t/* Execute by Thread 1 */\r\n\t public void saveTransactionInChain(List&lt;Transaction&gt; txnList) {\t\t\t\t\t  \r\n\t\tvalidationChainOne.nextChain(validationChainTwo);\r\n       \tvalidationChainTwo.nextChain(validationChainThree);\r\n    \tvalidationChainThree.nextChain(validationChainFour);\r\n        validationChainFour.nextChain(null);\r\n\r\n        validationChainOne.processChain(txnList);\r\n    }\r\n\t\r\n\t/* Execute by Thread 2 but it changes the chaing for thread 1 as well */\r\n\t\r\n\t public void saveChainTwo(List&lt;Transaction&gt; txnList) {\t\t\t\t\t  \r\n\t\tvalidationChainOne.nextChain(validationChainFour);\r\n        validationChainFour.nextChain(validationChainFive);\r\n\t\tvalidationChainFive.nextChain(null);\r\n\r\n       validationChainOne.processChain(txnList);\r\n    }\r\n}\r\n\r\n**TransactionChain interface**\r\n\r\n    public interface TransactionChain {\r\n\r\n    void nextChain(TransactionChain transactionChain);\r\n\r\n    void processChain(List&lt;Transaction&gt; txnList);\r\n}\r\n\r\n**EDIT : Validation class**\r\n\r\n    @Service\r\n    public class ValidationChainOne implements TransactionChain {\r\n\r\n    \r\n    TransactionChain nextTransactionChain;\r\n\r\n\t\r\n\t\r\n\t@Override\r\n    public void nextChain(TransactionChain transactionChain) {\r\n        this.nextTransactionChain = transactionChain;\r\n    }\r\n\r\n    @Override\r\n    public void processChain(List&lt;Transaction&gt; txnList)  {\r\n\t\t// some business logic\r\n         //filtering txns bases on validations\r\n         if(nextTransactionChain !=null){\r\n\t\t\tnextTransactionChain.processChain(txnList); // passing filtered txnList\r\n         }\r\n\t}\r\n\r\n }\r\n\r\n**What I tried**\r\n\r\nIn order to make sure that both threads does not affect each other , I made bean scope as request \r\n\r\n    @Scope(value = &quot;request&quot;,  proxyMode = ScopedProxyMode.TARGET_CLASS)\r\n\r\nbut got following error \r\n\r\n    &#39;scopedTarget.ValidationChainOne&#39;: Scope &#39;request&#39; is not active for the current thread; consider defining a scoped proxy for this bean if you intend to refer to it from a singleton; nested exception is java.lang.IllegalStateException: No thread-bound request found: Are you referring to request attributes outside of an actual web request, or processing a request outside of the originally receiving thread? If you are actually operating within a web request and still receive this message, your code is probably running outside of DispatcherServlet: In this case, use RequestContextListener or RequestContextFilter to expose the current request.\r\n        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:368)\r\n        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)\r\n        at org.springframework.aop.target.SimpleBeanTargetSource.getTarget(SimpleBeanTargetSource.java:35)\r\n        at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:673)\r\n\r\n\r\n","title":"Issue with singleton scope bean in case","body":"<p>I have a spring boot project in which I have implemented chain of responsibility pattern. I have created chains of multiple service class.\nEach service is of scope Singleton. Now I have 2 threads are accessing the bean which is singleton, then in this case modifications done by one thread is affecting the other thread working on the same bean. I tried making the bean scope as request but it didn't work.</p>\n<p><strong>TransactionChainContext - defining chains</strong></p>\n<pre><code>@Service \npublic class TransactionChainContext {\n\n@Autowired\nTransactionChain validationChainOne;\n\n@Autowired\nTransactionChain validationChainTwo;\n\n@Autowired\nTransactionChain validationChainThree;\n\n@Autowired\nTransactionChain validationChainFour;\n\n@Autowired\nTransactionChain validationChainFive;\n\n/* Execute by Thread 1 */\n public void saveTransactionInChain(List&lt;Transaction&gt; txnList) {                      \n    validationChainOne.nextChain(validationChainTwo);\n    validationChainTwo.nextChain(validationChainThree);\n    validationChainThree.nextChain(validationChainFour);\n    validationChainFour.nextChain(null);\n\n    validationChainOne.processChain(txnList);\n}\n\n/* Execute by Thread 2 but it changes the chaing for thread 1 as well */\n\n public void saveChainTwo(List&lt;Transaction&gt; txnList) {                    \n    validationChainOne.nextChain(validationChainFour);\n    validationChainFour.nextChain(validationChainFive);\n    validationChainFive.nextChain(null);\n\n   validationChainOne.processChain(txnList);\n}\n</code></pre>\n<p>}</p>\n<p><strong>TransactionChain interface</strong></p>\n<pre><code>public interface TransactionChain {\n\nvoid nextChain(TransactionChain transactionChain);\n\nvoid processChain(List&lt;Transaction&gt; txnList);\n</code></pre>\n<p>}</p>\n<p><strong>EDIT : Validation class</strong></p>\n<pre><code>@Service\npublic class ValidationChainOne implements TransactionChain {\n\n\nTransactionChain nextTransactionChain;\n\n\n\n@Override\npublic void nextChain(TransactionChain transactionChain) {\n    this.nextTransactionChain = transactionChain;\n}\n\n@Override\npublic void processChain(List&lt;Transaction&gt; txnList)  {\n    // some business logic\n     //filtering txns bases on validations\n     if(nextTransactionChain !=null){\n        nextTransactionChain.processChain(txnList); // passing filtered txnList\n     }\n}\n</code></pre>\n<p>}</p>\n<p><strong>What I tried</strong></p>\n<p>In order to make sure that both threads does not affect each other , I made bean scope as request</p>\n<pre><code>@Scope(value = &quot;request&quot;,  proxyMode = ScopedProxyMode.TARGET_CLASS)\n</code></pre>\n<p>but got following error</p>\n<pre><code>'scopedTarget.ValidationChainOne': Scope 'request' is not active for the current thread; consider defining a scoped proxy for this bean if you intend to refer to it from a singleton; nested exception is java.lang.IllegalStateException: No thread-bound request found: Are you referring to request attributes outside of an actual web request, or processing a request outside of the originally receiving thread? If you are actually operating within a web request and still receive this message, your code is probably running outside of DispatcherServlet: In this case, use RequestContextListener or RequestContextFilter to expose the current request.\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:368)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)\n    at org.springframework.aop.target.SimpleBeanTargetSource.getTarget(SimpleBeanTargetSource.java:35)\n    at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:673)\n</code></pre>\n"},{"tags":["java","maven","gradle","dependencies"],"answers":[{"tags":[],"owner":{"account_id":26698569,"reputation":875,"user_id":20306007,"display_name":"life888888"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1679491235,"creation_date":1679491235,"answer_id":75812773,"question_id":75807971,"body_markdown":"# Maven pom.xml\r\n\r\nFor Example, \r\n\r\n- SWT for Windows and Linux is different.\r\n- and when I use `jpackage`, On Windows, icon file is `ico`, On Linux, icon file is `png`\r\n\r\n```\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;${swt.groupId}&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;${swt.artifactId}&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;${swt.version}&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n...\r\n```\r\n\r\nand Add profile\r\n\r\n```\r\n\t&lt;profiles&gt;\r\n\r\n\t\t&lt;profile&gt;\r\n\t\t\t&lt;id&gt;linux&lt;/id&gt;\r\n\t\t\t&lt;activation&gt;\r\n\t\t\t\t&lt;os&gt;\r\n\t\t\t\t\t&lt;name&gt;Linux&lt;/name&gt;\r\n\t\t\t\t\t&lt;arch&gt;amd64&lt;/arch&gt;\r\n\t\t\t\t&lt;/os&gt;\r\n\t\t\t&lt;/activation&gt;\r\n\t\t\t&lt;properties&gt;\r\n\t\t\t\t&lt;swt.groupId&gt;org.eclipse.platform&lt;/swt.groupId&gt;\r\n\t\t\t\t&lt;swt.artifactId&gt;org.eclipse.swt.gtk.linux.x86_64&lt;/swt.artifactId&gt;\r\n\t\t\t\t&lt;swt.version&gt;3.119.0&lt;/swt.version&gt;\r\n\t\t\t\t&lt;zname&gt;linux_x86_64&lt;/zname&gt;\r\n\t\t\t\t&lt;iconType&gt;png&lt;/iconType&gt;\r\n\t\t\t\t&lt;zformat&gt;tar.gz&lt;/zformat&gt;\r\n\t\t\t&lt;/properties&gt;\r\n\t\t&lt;/profile&gt;\r\n\r\n\r\n&lt;profile&gt;\r\n\t\t\t&lt;id&gt;windows&lt;/id&gt;\r\n\t\t\t&lt;activation&gt;\r\n\t\t\t\t&lt;os&gt;\r\n\t\t\t\t\t&lt;name&gt;Windows 10&lt;/name&gt;\r\n\t\t\t\t\t&lt;arch&gt;amd64&lt;/arch&gt;\r\n\t\t\t\t&lt;/os&gt;\r\n\t\t\t&lt;/activation&gt;\r\n\t\t\t&lt;properties&gt;\r\n\t\t\t\t&lt;swt.groupId&gt;org.eclipse.platform&lt;/swt.groupId&gt;\r\n\t\t\t\t&lt;swt.artifactId&gt;org.eclipse.swt.win32.win32.x86_64&lt;/swt.artifactId&gt;\r\n\t\t\t\t&lt;swt.version&gt;3.119.0&lt;/swt.version&gt;\r\n\t\t\t\t&lt;zname&gt;windows_x86_64&lt;/zname&gt;\r\n\t\t\t\t&lt;iconType&gt;ico&lt;/iconType&gt;\r\n\t\t\t\t&lt;zformat&gt;zip&lt;/zformat&gt;\r\n\t\t\t&lt;/properties&gt;\r\n\t\t&lt;/profile&gt;\r\n...\r\n```\r\n\r\n# How to know your activation os name and arch value ?\r\n\r\nRun `mvn help:system | grep &quot;os\\.&quot; ` on Linux\r\n\r\nget result:\r\n\r\n```\r\nos.name=Linux os.version=5.13.0-40-generic os.arch=amd64\r\n```\r\n\r\nRun `mvn help:system | findstr &quot;os\\.&quot; ` on Windows\r\n\r\nget result:\r\n\r\n```\r\nos.name=Windows 10 os.version=10.0 os.arch=amd64\r\n```\r\n\r\nMapping os name and os arch into `profile` -&gt; `activation` -&gt; `os` -&gt; `name`\r\nand `os` -&gt; `arch`, then config `profile` -&gt; `properties` Set the corresponding value into   `swt.groupId`,`swt.artifactId`,`swt.version`. \r\n\r\nWhen you run `mvn clean package` , maven will auto select profile activation by mapping to os.name and os.arch value.","title":"Use separate dependency as per the platform","body":"<h1>Maven pom.xml</h1>\n<p>For Example,</p>\n<ul>\n<li>SWT for Windows and Linux is different.</li>\n<li>and when I use <code>jpackage</code>, On Windows, icon file is <code>ico</code>, On Linux, icon file is <code>png</code></li>\n</ul>\n<pre><code>    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;${swt.groupId}&lt;/groupId&gt;\n            &lt;artifactId&gt;${swt.artifactId}&lt;/artifactId&gt;\n            &lt;version&gt;${swt.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n...\n</code></pre>\n<p>and Add profile</p>\n<pre><code>    &lt;profiles&gt;\n\n        &lt;profile&gt;\n            &lt;id&gt;linux&lt;/id&gt;\n            &lt;activation&gt;\n                &lt;os&gt;\n                    &lt;name&gt;Linux&lt;/name&gt;\n                    &lt;arch&gt;amd64&lt;/arch&gt;\n                &lt;/os&gt;\n            &lt;/activation&gt;\n            &lt;properties&gt;\n                &lt;swt.groupId&gt;org.eclipse.platform&lt;/swt.groupId&gt;\n                &lt;swt.artifactId&gt;org.eclipse.swt.gtk.linux.x86_64&lt;/swt.artifactId&gt;\n                &lt;swt.version&gt;3.119.0&lt;/swt.version&gt;\n                &lt;zname&gt;linux_x86_64&lt;/zname&gt;\n                &lt;iconType&gt;png&lt;/iconType&gt;\n                &lt;zformat&gt;tar.gz&lt;/zformat&gt;\n            &lt;/properties&gt;\n        &lt;/profile&gt;\n\n\n&lt;profile&gt;\n            &lt;id&gt;windows&lt;/id&gt;\n            &lt;activation&gt;\n                &lt;os&gt;\n                    &lt;name&gt;Windows 10&lt;/name&gt;\n                    &lt;arch&gt;amd64&lt;/arch&gt;\n                &lt;/os&gt;\n            &lt;/activation&gt;\n            &lt;properties&gt;\n                &lt;swt.groupId&gt;org.eclipse.platform&lt;/swt.groupId&gt;\n                &lt;swt.artifactId&gt;org.eclipse.swt.win32.win32.x86_64&lt;/swt.artifactId&gt;\n                &lt;swt.version&gt;3.119.0&lt;/swt.version&gt;\n                &lt;zname&gt;windows_x86_64&lt;/zname&gt;\n                &lt;iconType&gt;ico&lt;/iconType&gt;\n                &lt;zformat&gt;zip&lt;/zformat&gt;\n            &lt;/properties&gt;\n        &lt;/profile&gt;\n...\n</code></pre>\n<h1>How to know your activation os name and arch value ?</h1>\n<p>Run <code>mvn help:system | grep &quot;os\\.&quot; </code> on Linux</p>\n<p>get result:</p>\n<pre><code>os.name=Linux os.version=5.13.0-40-generic os.arch=amd64\n</code></pre>\n<p>Run <code>mvn help:system | findstr &quot;os\\.&quot; </code> on Windows</p>\n<p>get result:</p>\n<pre><code>os.name=Windows 10 os.version=10.0 os.arch=amd64\n</code></pre>\n<p>Mapping os name and os arch into <code>profile</code> -&gt; <code>activation</code> -&gt; <code>os</code> -&gt; <code>name</code>\nand <code>os</code> -&gt; <code>arch</code>, then config <code>profile</code> -&gt; <code>properties</code> Set the corresponding value into   <code>swt.groupId</code>,<code>swt.artifactId</code>,<code>swt.version</code>.</p>\n<p>When you run <code>mvn clean package</code> , maven will auto select profile activation by mapping to os.name and os.arch value.</p>\n"}],"owner":{"account_id":15801712,"reputation":1294,"user_id":11402025,"display_name":"Tanu"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":53,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75812773,"answer_count":1,"score":0,"last_activity_date":1679498777,"creation_date":1679452035,"question_id":75807971,"body_markdown":"I have to include different dependencies according to the platform, for instance windows and linux using gradle/maven. \r\n\r\nHow can I make sure I only use the dependency needed for windows while building windows jar and linux while creating linux jar. ","title":"Use separate dependency as per the platform","body":"<p>I have to include different dependencies according to the platform, for instance windows and linux using gradle/maven.</p>\n<p>How can I make sure I only use the dependency needed for windows while building windows jar and linux while creating linux jar.</p>\n"},{"tags":["java","spring-boot","domain-driven-design","axon"],"comments":[{"owner":{"account_id":109649,"reputation":11808,"user_id":290425,"accept_rate":68,"display_name":"Jan Galinski"},"score":1,"creation_date":1680191864,"post_id":75814171,"comment_id":133860083,"body_markdown":"I would encourage you to raise this very interesting question in the forum: https://discuss.axoniq.io/.  There is no true/false correct answer but it is interesting to think about how to test.","body":"I would encourage you to raise this very interesting question in the forum: <a href=\"https://discuss.axoniq.io/\" rel=\"nofollow noreferrer\">discuss.axoniq.io</a>.  There is no true/false correct answer but it is interesting to think about how to test."},{"owner":{"account_id":2552081,"reputation":7045,"user_id":2215649,"display_name":"Steven"},"score":0,"creation_date":1681224397,"post_id":75814171,"comment_id":134019985,"body_markdown":"Just to clarify, are you trying to understand where you should place the `AggregateTestFixture` on the scope of Unit-to-Integration tests? Or is it something else you&#39;re trying to define here? Right now I feel I can only make assumptions on your last couple of questions instead of fully comprehending what you&#39;re trying to achieve.","body":"Just to clarify, are you trying to understand where you should place the <code>AggregateTestFixture</code> on the scope of Unit-to-Integration tests? Or is it something else you&#39;re trying to define here? Right now I feel I can only make assumptions on your last couple of questions instead of fully comprehending what you&#39;re trying to achieve."}],"owner":{"account_id":11371334,"reputation":744,"user_id":8336836,"accept_rate":85,"display_name":"Sam Fisher"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":60,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1679498535,"creation_date":1679498535,"question_id":75814171,"body_markdown":"As we know Axon has its own tools to implement tests. In documentation we can see example with flights like:\r\n\r\n    FixtureConfiguration&lt;Flight&gt; fixture = new AggregateTestFixture&lt;&gt;(Flight.class);\r\n    \r\n    @Test\r\n    void test() {\r\n        fixture.given(/* historical events */)\r\n            .when(new RegisterArrivalTimeCommand(flightId, newArrivalTime))\r\n            .expectEventsMatching(\r\n                Matchers.exactSequenceOf(\r\n                    Matchers.messageWithPayload(\r\n                        Matchers.matches(payload -&gt; {\r\n                            // compare payload with expectations\r\n                        })\r\n                    )\r\n                )\r\n            );\r\n    }\r\n\r\nSo, here we see how Axon&#39;s aggregate mock(fixture) is created and we see test with assertion(use of matchers). Previously I didn&#39;t work in project which had domain driven design, but in other types of projects we have Junit(allows use to write isolated unit-tests using Java) and tools for integration testing(Rest-assured, Cucumber), which allow us to test whole feature/functionality. \r\n\r\nAnd looking on code in example appeared question - Axon tests can be divided in these 2 groups(unit, integration)? Which tests can be called unit? Those, where we send just one command and check all events which apear after it? Or all the tests will be integrational, when we can write one test on concrete flow with commands and events?","title":"Semantic understanding of unit and integration tests in Axon-based applications","body":"<p>As we know Axon has its own tools to implement tests. In documentation we can see example with flights like:</p>\n<pre><code>FixtureConfiguration&lt;Flight&gt; fixture = new AggregateTestFixture&lt;&gt;(Flight.class);\n\n@Test\nvoid test() {\n    fixture.given(/* historical events */)\n        .when(new RegisterArrivalTimeCommand(flightId, newArrivalTime))\n        .expectEventsMatching(\n            Matchers.exactSequenceOf(\n                Matchers.messageWithPayload(\n                    Matchers.matches(payload -&gt; {\n                        // compare payload with expectations\n                    })\n                )\n            )\n        );\n}\n</code></pre>\n<p>So, here we see how Axon's aggregate mock(fixture) is created and we see test with assertion(use of matchers). Previously I didn't work in project which had domain driven design, but in other types of projects we have Junit(allows use to write isolated unit-tests using Java) and tools for integration testing(Rest-assured, Cucumber), which allow us to test whole feature/functionality.</p>\n<p>And looking on code in example appeared question - Axon tests can be divided in these 2 groups(unit, integration)? Which tests can be called unit? Those, where we send just one command and check all events which apear after it? Or all the tests will be integrational, when we can write one test on concrete flow with commands and events?</p>\n"},{"tags":["java","spring-boot","backend"],"owner":{"account_id":10625355,"reputation":11,"user_id":7825146,"display_name":"Vaibhav306"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":47,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1679498529,"creation_date":1679494290,"question_id":75813356,"body_markdown":"I wanted to search the table based on filters. The filters could have any combination so used JPASpecificationExecutor. I&#39;m receiving the query as RequestBody in the SearchController in the defined format.\r\n\r\nI build a SpecificationBuilder Class to build the Specification Object of the Entity Type.\r\n\r\nError:\r\n`UnsatisfiedDependencyException: Error creating bean with name &#39;searchController&#39;: Unsatisfied dependency expressed through field &#39;searchService&#39;: Error creating bean with name &#39;searchService&#39;: Unsatisfied dependency expressed through field &#39;userRepository&#39;: Error creating bean with name &#39;userRepository&#39; defined in com.sub.sublayer.repository.UserRepository defined in @EnableJpaRepositories declared on SublayerApplication: Failed to convert property value of type &#39;jdk.proxy4.$Proxy87 implementing org.hibernate.Session,org.springframework.orm.jpa.EntityManagerProxy&#39; to required type &#39;javax.persistence.EntityManager&#39; for property &#39;entityManager&#39;; Cannot convert value of type &#39;jdk.proxy4.$Proxy87 implementing org.hibernate.Session,org.springframework.orm.jpa.EntityManagerProxy&#39; to required type &#39;javax.persistence.EntityManager&#39; for property &#39;entityManager&#39;: no matching editors or conversion strategy found`\r\n\r\n\r\nI build the Specification Object and passed it in the findAll() method.\r\n\r\n\r\n    @Repository\r\n    public interface UserRepository extends  JpaRepository&lt;User, Long&gt;,JpaSpecificationExecutor&lt;User&gt; {\r\n    }\r\n\r\n\r\nthe pom.xml, in order to check the dependencies and their versions.\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n    \txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    \t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    \t&lt;parent&gt;\r\n    \t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;3.0.4&lt;/version&gt;\r\n    \t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n    \t&lt;/parent&gt;\r\n    \t&lt;groupId&gt;com.sub&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;sublayer&lt;/artifactId&gt;\r\n    \t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n    \t&lt;name&gt;sublayer&lt;/name&gt;\r\n    \t&lt;description&gt;subs downstream&lt;/description&gt;\r\n    \t&lt;properties&gt;\r\n    \t\t&lt;java.version&gt;17&lt;/java.version&gt;\r\n    \t&lt;/properties&gt;\r\n    \t&lt;dependencies&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\r\n    \t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n    \t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n    \t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n    \t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;6.1.7.Final&lt;/version&gt;\r\n    \t\t\t&lt;type&gt;pom&lt;/type&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-jdbc&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;mysql&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;8.0.32&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n    \t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.data&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-data-jpa&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;2.7.9&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-orm&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;6.0.6&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;3.0.0&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;javax.persistence&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;javax.persistence-api&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;2.2&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;com.h2database&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;h2&lt;/artifactId&gt;\r\n    \t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t&lt;/dependencies&gt;\r\n    \r\n    \t&lt;build&gt;\r\n    \t\t&lt;plugins&gt;\r\n    \t\t\t&lt;plugin&gt;\r\n    \t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n    \t\t\t\t&lt;configuration&gt;\r\n    \t\t\t\t\t&lt;excludes&gt;\r\n    \t\t\t\t\t\t&lt;exclude&gt;\r\n    \t\t\t\t\t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n    \t\t\t\t\t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n    \t\t\t\t\t\t&lt;/exclude&gt;\r\n    \t\t\t\t\t&lt;/excludes&gt;\r\n    \t\t\t\t&lt;/configuration&gt;\r\n    \t\t\t&lt;/plugin&gt;\r\n    \t\t&lt;/plugins&gt;\r\n    \t&lt;/build&gt;\r\n    \r\n    &lt;/project&gt;\r\n\r\n\r\n\r\n","title":"How to get rid of the following error when trying to build dynamic queries in Spring Boot using JPASpecificationExecutor?","body":"<p>I wanted to search the table based on filters. The filters could have any combination so used JPASpecificationExecutor. I'm receiving the query as RequestBody in the SearchController in the defined format.</p>\n<p>I build a SpecificationBuilder Class to build the Specification Object of the Entity Type.</p>\n<p>Error:\n<code>UnsatisfiedDependencyException: Error creating bean with name 'searchController': Unsatisfied dependency expressed through field 'searchService': Error creating bean with name 'searchService': Unsatisfied dependency expressed through field 'userRepository': Error creating bean with name 'userRepository' defined in com.sub.sublayer.repository.UserRepository defined in @EnableJpaRepositories declared on SublayerApplication: Failed to convert property value of type 'jdk.proxy4.$Proxy87 implementing org.hibernate.Session,org.springframework.orm.jpa.EntityManagerProxy' to required type 'javax.persistence.EntityManager' for property 'entityManager'; Cannot convert value of type 'jdk.proxy4.$Proxy87 implementing org.hibernate.Session,org.springframework.orm.jpa.EntityManagerProxy' to required type 'javax.persistence.EntityManager' for property 'entityManager': no matching editors or conversion strategy found</code></p>\n<p>I build the Specification Object and passed it in the findAll() method.</p>\n<pre><code>@Repository\npublic interface UserRepository extends  JpaRepository&lt;User, Long&gt;,JpaSpecificationExecutor&lt;User&gt; {\n}\n</code></pre>\n<p>the pom.xml, in order to check the dependencies and their versions.</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;3.0.4&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.sub&lt;/groupId&gt;\n    &lt;artifactId&gt;sublayer&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;sublayer&lt;/name&gt;\n    &lt;description&gt;subs downstream&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;17&lt;/java.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n            &lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\n            &lt;version&gt;6.1.7.Final&lt;/version&gt;\n            &lt;type&gt;pom&lt;/type&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-jdbc&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;mysql&lt;/groupId&gt;\n            &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\n            &lt;version&gt;8.0.32&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.data&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-data-jpa&lt;/artifactId&gt;\n            &lt;version&gt;2.7.9&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-orm&lt;/artifactId&gt;\n            &lt;version&gt;6.0.6&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n            &lt;version&gt;3.0.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.persistence&lt;/groupId&gt;\n            &lt;artifactId&gt;javax.persistence-api&lt;/artifactId&gt;\n            &lt;version&gt;2.2&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.h2database&lt;/groupId&gt;\n            &lt;artifactId&gt;h2&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;excludes&gt;\n                        &lt;exclude&gt;\n                            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n                            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n                        &lt;/exclude&gt;\n                    &lt;/excludes&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n"},{"tags":["java","tomcat","servlets","jakarta-ee","static-content"],"answers":[{"tags":[],"owner":{"account_id":70258,"reputation":590444,"user_id":203907,"accept_rate":81,"display_name":"Bozho"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1259409502,"creation_date":1259407814,"answer_id":1812309,"question_id":1812244,"body_markdown":"You can do it by putting your images on a fixed path (for example: /var/images, or c:\\images), add a setting in your application settings (represented in my example by the Settings.class), and load them like that, in a `HttpServlet` of yours:\r\n\r\n\tString filename = Settings.getValue(&quot;images.path&quot;) + request.getParameter(&quot;imageName&quot;)\r\n    FileInputStream fis = new FileInputStream(filename);\r\n        \r\n    int b = 0;\r\n    while ((b = fis.read()) != -1) {\r\n            response.getOutputStream().write(b);\r\n    }\r\n\r\nOr if you want to manipulate the image:\r\n\r\n\tString filename = Settings.getValue(&quot;images.path&quot;) + request.getParameter(&quot;imageName&quot;)\r\n\tFile imageFile = new File(filename);\r\n\tBufferedImage image = ImageIO.read(imageFile);\r\n    ImageIO.write(image, &quot;image/png&quot;, response.getOutputStream());\r\n\r\n\r\nthen the html code would be `&lt;img src=&quot;imageServlet?imageName=myimage.png&quot; /&gt;`\r\n\r\nOf course you should think of serving different content types - &quot;image/jpeg&quot;, for example based on the file extension. Also you should provide some caching.\r\n\r\nIn addition you could use this servlet for quality rescaling of your images, by providing width and height parameters as arguments, and using `image.getScaledInstance(w, h, Image.SCALE_SMOOTH`), considering performance, of course.","title":"Simplest way to serve static data from outside the application server in a Java web application","body":"<p>You can do it by putting your images on a fixed path (for example: /var/images, or c:\\images), add a setting in your application settings (represented in my example by the Settings.class), and load them like that, in a <code>HttpServlet</code> of yours:</p>\n\n<pre><code>String filename = Settings.getValue(\"images.path\") + request.getParameter(\"imageName\")\nFileInputStream fis = new FileInputStream(filename);\n\nint b = 0;\nwhile ((b = fis.read()) != -1) {\n        response.getOutputStream().write(b);\n}\n</code></pre>\n\n<p>Or if you want to manipulate the image:</p>\n\n<pre><code>String filename = Settings.getValue(\"images.path\") + request.getParameter(\"imageName\")\nFile imageFile = new File(filename);\nBufferedImage image = ImageIO.read(imageFile);\nImageIO.write(image, \"image/png\", response.getOutputStream());\n</code></pre>\n\n<p>then the html code would be <code>&lt;img src=\"imageServlet?imageName=myimage.png\" /&gt;</code></p>\n\n<p>Of course you should think of serving different content types - \"image/jpeg\", for example based on the file extension. Also you should provide some caching.</p>\n\n<p>In addition you could use this servlet for quality rescaling of your images, by providing width and height parameters as arguments, and using <code>image.getScaledInstance(w, h, Image.SCALE_SMOOTH</code>), considering performance, of course.</p>\n"},{"tags":[],"owner":{"account_id":52822,"reputation":1088970,"user_id":157882,"accept_rate":93,"display_name":"BalusC"},"down_vote_count":0,"up_vote_count":175,"is_accepted":true,"score":175,"last_activity_date":1671787092,"creation_date":1259409473,"answer_id":1812356,"question_id":1812244,"body_markdown":"&gt; *I&#39;ve seen some suggestions like having the image directory being a symbolic link pointing to a directory outside the web container, but will this approach work both on Windows and \\*nix environments?*\r\n\r\nIf you adhere the *nix filesystem path rules (i.e. you use exclusively forward slashes as in `/path/to/files`), then it will work on Windows as well without the need to fiddle around with ugly `File.separator` string-concatenations. It would however only be scanned on the same working disk as from where this command is been invoked. So if Tomcat is for example installed on `C:` then the `/path/to/files` would actually point to `C:\\path\\to\\files`.\r\n\r\nIf the files are all located outside the webapp, and you want to have Tomcat&#39;s `DefaultServlet` to handle them, then all you basically need to do in Tomcat is to add the following Context element to `/conf/server.xml` inside `&lt;Host&gt;` tag:\r\n\r\n&lt;!-- language: xml --&gt;\r\n\r\n    &lt;Context docBase=&quot;/path/to/files&quot; path=&quot;/files&quot; /&gt;\r\n\r\nThis way they&#39;ll be accessible through `http://example.com/files/...`. For Tomcat-based servers such as JBoss EAP 6.x or older, the approach is basically the same, see also [here][1]. GlassFish/Payara configuration example can be found [here][2] and WildFly configuration example can be found [here][3].\r\n\r\nIf you want to have control over reading/writing files yourself, then you need to create a `Servlet` for this which basically just gets an `InputStream` of the file in flavor of for example `FileInputStream` and writes it to the `OutputStream` of the `HttpServletResponse`.\r\n\r\nOn the response, you should set the `Content-Type` header so that the client knows which application to associate with the provided file. And, you should set the `Content-Length` header so that the client can calculate the download progress, otherwise it will be unknown. And, you should set the `Content-Disposition` header to `attachment` if you want a *Save As* dialog, otherwise the client will attempt to display it inline. Finally just write the file content to the response output stream.\r\n\r\nHere&#39;s a basic example of such a servlet:\r\n\r\n    @WebServlet(&quot;/files/*&quot;)\r\n    public class FileServlet extends HttpServlet {\r\n    \r\n        @Override\r\n        protected void doGet(HttpServletRequest request, HttpServletResponse response)\r\n            throws ServletException, IOException\r\n        {\r\n            String filename = URLDecoder.decode(request.getPathInfo().substring(1), &quot;UTF-8&quot;);\r\n            File file = new File(&quot;/path/to/files&quot;, filename);\r\n            response.setHeader(&quot;Content-Type&quot;, getServletContext().getMimeType(filename));\r\n            response.setHeader(&quot;Content-Length&quot;, String.valueOf(file.length()));\r\n            response.setHeader(&quot;Content-Disposition&quot;, &quot;inline; filename=\\&quot;&quot; + file.getName() + &quot;\\&quot;&quot;);\r\n            Files.copy(file.toPath(), response.getOutputStream());\r\n        }\r\n    \r\n    }\r\n\r\nWhen mapped on an `url-pattern` of for example `/files/*`, then you can call it by `http://example.com/files/image.png`. This way you can have more control over the requests than the `DefaultServlet` does, such as providing a default image (i.e. `if (!file.exists()) file = new File(&quot;/path/to/files&quot;, &quot;404.gif&quot;)` or so). Also using the `request.getPathInfo()` is preferred above `request.getParameter()` because it is more SEO friendly and otherwise IE won&#39;t pick the correct filename during *Save As*.\r\n\r\nYou can reuse the same logic for serving files from database. Simply replace `new FileInputStream()` by `ResultSet#getInputStream()`.\r\n\r\n### See also:\r\n\r\n- https://stackoverflow.com/questions/18664579/recommended-way-to-save-uploaded-files-in-a-servlet-application\r\n- [Abstract template for a static resource servlet](https://stackoverflow.com/questions/132052/servlet-for-serving-static-content/29991447#29991447) (supporting HTTP cache)\r\n- https://stackoverflow.com/questions/2340406/how-to-retrieve-and-display-images-from-a-database-in-a-jsp-page\r\n- https://stackoverflow.com/questions/13588149/how-to-stream-audio-video-files-such-as-mp3-mp4-avi-etc-using-a-servlet\r\n\r\n\r\n  [1]: https://access.redhat.com/solutions/204213\r\n  [2]: https://stackoverflow.com/questions/19981640/how-to-display-images-located-in-glass-fish-folder\r\n  [3]: https://stackoverflow.com/questions/34426082/how-can-i-serve-static-resources-from-outside-a-war-on-wildfly","title":"Simplest way to serve static data from outside the application server in a Java web application","body":"<blockquote>\n<p><em>I've seen some suggestions like having the image directory being a symbolic link pointing to a directory outside the web container, but will this approach work both on Windows and *nix environments?</em></p>\n</blockquote>\n<p>If you adhere the *nix filesystem path rules (i.e. you use exclusively forward slashes as in <code>/path/to/files</code>), then it will work on Windows as well without the need to fiddle around with ugly <code>File.separator</code> string-concatenations. It would however only be scanned on the same working disk as from where this command is been invoked. So if Tomcat is for example installed on <code>C:</code> then the <code>/path/to/files</code> would actually point to <code>C:\\path\\to\\files</code>.</p>\n<p>If the files are all located outside the webapp, and you want to have Tomcat's <code>DefaultServlet</code> to handle them, then all you basically need to do in Tomcat is to add the following Context element to <code>/conf/server.xml</code> inside <code>&lt;Host&gt;</code> tag:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;Context docBase=&quot;/path/to/files&quot; path=&quot;/files&quot; /&gt;\n</code></pre>\n<p>This way they'll be accessible through <code>http://example.com/files/...</code>. For Tomcat-based servers such as JBoss EAP 6.x or older, the approach is basically the same, see also <a href=\"https://access.redhat.com/solutions/204213\" rel=\"nofollow noreferrer\">here</a>. GlassFish/Payara configuration example can be found <a href=\"https://stackoverflow.com/questions/19981640/how-to-display-images-located-in-glass-fish-folder\">here</a> and WildFly configuration example can be found <a href=\"https://stackoverflow.com/questions/34426082/how-can-i-serve-static-resources-from-outside-a-war-on-wildfly\">here</a>.</p>\n<p>If you want to have control over reading/writing files yourself, then you need to create a <code>Servlet</code> for this which basically just gets an <code>InputStream</code> of the file in flavor of for example <code>FileInputStream</code> and writes it to the <code>OutputStream</code> of the <code>HttpServletResponse</code>.</p>\n<p>On the response, you should set the <code>Content-Type</code> header so that the client knows which application to associate with the provided file. And, you should set the <code>Content-Length</code> header so that the client can calculate the download progress, otherwise it will be unknown. And, you should set the <code>Content-Disposition</code> header to <code>attachment</code> if you want a <em>Save As</em> dialog, otherwise the client will attempt to display it inline. Finally just write the file content to the response output stream.</p>\n<p>Here's a basic example of such a servlet:</p>\n<pre><code>@WebServlet(&quot;/files/*&quot;)\npublic class FileServlet extends HttpServlet {\n\n    @Override\n    protected void doGet(HttpServletRequest request, HttpServletResponse response)\n        throws ServletException, IOException\n    {\n        String filename = URLDecoder.decode(request.getPathInfo().substring(1), &quot;UTF-8&quot;);\n        File file = new File(&quot;/path/to/files&quot;, filename);\n        response.setHeader(&quot;Content-Type&quot;, getServletContext().getMimeType(filename));\n        response.setHeader(&quot;Content-Length&quot;, String.valueOf(file.length()));\n        response.setHeader(&quot;Content-Disposition&quot;, &quot;inline; filename=\\&quot;&quot; + file.getName() + &quot;\\&quot;&quot;);\n        Files.copy(file.toPath(), response.getOutputStream());\n    }\n\n}\n</code></pre>\n<p>When mapped on an <code>url-pattern</code> of for example <code>/files/*</code>, then you can call it by <code>http://example.com/files/image.png</code>. This way you can have more control over the requests than the <code>DefaultServlet</code> does, such as providing a default image (i.e. <code>if (!file.exists()) file = new File(&quot;/path/to/files&quot;, &quot;404.gif&quot;)</code> or so). Also using the <code>request.getPathInfo()</code> is preferred above <code>request.getParameter()</code> because it is more SEO friendly and otherwise IE won't pick the correct filename during <em>Save As</em>.</p>\n<p>You can reuse the same logic for serving files from database. Simply replace <code>new FileInputStream()</code> by <code>ResultSet#getInputStream()</code>.</p>\n<h3>See also:</h3>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/18664579/recommended-way-to-save-uploaded-files-in-a-servlet-application\">Recommended way to save uploaded files in a servlet application</a></li>\n<li><a href=\"https://stackoverflow.com/questions/132052/servlet-for-serving-static-content/29991447#29991447\">Abstract template for a static resource servlet</a> (supporting HTTP cache)</li>\n<li><a href=\"https://stackoverflow.com/questions/2340406/how-to-retrieve-and-display-images-from-a-database-in-a-jsp-page\">How to retrieve and display images from a database in a JSP page?</a></li>\n<li><a href=\"https://stackoverflow.com/questions/13588149/how-to-stream-audio-video-files-such-as-mp3-mp4-avi-etc-using-a-servlet\">How to stream audio/video files such as MP3, MP4, AVI, etc using a Servlet</a></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":27445,"reputation":31727,"user_id":72478,"accept_rate":76,"display_name":"cherouvim"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1342608380,"creation_date":1295974981,"answer_id":4796546,"question_id":1812244,"body_markdown":"If you decide to dispatch to `FileServlet` then you will also need `allowLinking=&quot;true&quot;` in `context.xml` in order to allow `FileServlet` to traverse the symlinks.\r\n\r\nSee http://tomcat.apache.org/tomcat-6.0-doc/config/context.html","title":"Simplest way to serve static data from outside the application server in a Java web application","body":"<p>If you decide to dispatch to <code>FileServlet</code> then you will also need <code>allowLinking=\"true\"</code> in <code>context.xml</code> in order to allow <code>FileServlet</code> to traverse the symlinks.</p>\n\n<p>See <a href=\"http://tomcat.apache.org/tomcat-6.0-doc/config/context.html\" rel=\"nofollow\">http://tomcat.apache.org/tomcat-6.0-doc/config/context.html</a></p>\n"},{"tags":[],"owner":{"account_id":1785642,"reputation":119,"user_id":1627166,"display_name":"sbabamca"},"down_vote_count":1,"up_vote_count":10,"is_accepted":false,"score":9,"last_activity_date":1363411621,"creation_date":1363409185,"answer_id":15445689,"question_id":1812244,"body_markdown":"**Requirement : Accessing the static Resources (images/videos., etc.,) from outside of WEBROOT directory or from local disk**\r\n\r\nStep 1 :&lt;br&gt;\r\n Create a folder under webapps of tomcat server., let us say the folder name is myproj\r\n\r\nStep 2 : &lt;br&gt;Under myproj create a WEB-INF folder under this create a simple web.xml\r\n\r\ncode under web.xml\r\n\r\n    &lt;web-app&gt;\r\n    &lt;/web-app&gt;\r\n\r\nDirectory Structure for the above two steps\r\n\r\n    c:\\programfile\\apachesoftwarefoundation\\tomcat\\...\\webapps\r\n                                                                |\r\n                                                                |---myproj\r\n                                                                |   |\r\n                                                                |   |---WEB-INF\r\n                                                                    |   |\r\n                                                                        |---web.xml\r\n\r\nStep 3:&lt;br&gt;\r\nNow create a xml file with name myproj.xml under the following location\r\n\r\n    c:\\programfile\\apachesoftwarefoundation\\tomcat\\conf\\catalina\\localhost\r\n\r\nCODE in myproj.xml:\r\n\r\n    &lt;Context path=&quot;/myproj/images&quot; docBase=&quot;e:/myproj/&quot; crossContext=&quot;false&quot; debug=&quot;0&quot; reloadable=&quot;true&quot; privileged=&quot;true&quot; /&gt; \r\n ---------------------------------------------------------------------------------------\r\nStep 4:&lt;br&gt;\r\n 4 A) Now create a folder with name myproj in E drive of your hard disk and create a new \r\n\r\nfolder with name images and place some images in images folder `(e:myproj\\images\\)`\r\n\r\nLet us suppose myfoto.jpg is placed under `e:\\myproj\\images\\myfoto.jpg`\r\n\r\n 4 B) Now create a folder with name WEB-INF in `e:\\myproj\\WEB-INF` and create a web.xml in WEB-INF folder\r\n\r\nCode in web.xml\r\n\r\n    &lt;web-app&gt;\r\n    &lt;/web-app&gt;\r\n\r\n\r\nStep 5: &lt;br&gt;Now create  a .html document with name index.html and place under e:\\myproj\r\n\r\nCODE under index.html\r\n            &lt;html&gt;\r\n                 &lt;body&gt;\r\n                      &lt;h2&gt; Welcome to Myproj &lt;/h3&gt;\r\n                 &lt;/body&gt;\r\n            &lt;/html&gt;\r\n\r\nThe Directory Structure for the above Step 4 and Step 5 is as follows \r\n\r\n    E:\\myproj\r\n        |--index.html\r\n        |\r\n        |--images\r\n        |     |----myfoto.jpg\r\n        |\r\n        |--WEB-INF\r\n        |     |--web.xml\r\n                              \r\n\r\n\r\nStep 6: &lt;br&gt;Now start the apache tomcat server\r\n\r\nStep 7: &lt;br&gt;open the browser and type the url as follows\r\n\r\n    http://localhost:8080/myproj    \r\n\r\n then u display the content which is provided in index.html\r\n\r\nStep 8: &lt;br&gt;To Access the Images under your local hard disk (outside of webroot)\r\n\r\n    http://localhost:8080/myproj/images/myfoto.jpg","title":"Simplest way to serve static data from outside the application server in a Java web application","body":"<p><strong>Requirement : Accessing the static Resources (images/videos., etc.,) from outside of WEBROOT directory or from local disk</strong></p>\n\n<p>Step 1 :<br>\n Create a folder under webapps of tomcat server., let us say the folder name is myproj</p>\n\n<p>Step 2 : <br>Under myproj create a WEB-INF folder under this create a simple web.xml</p>\n\n<p>code under web.xml</p>\n\n<pre><code>&lt;web-app&gt;\n&lt;/web-app&gt;\n</code></pre>\n\n<p>Directory Structure for the above two steps</p>\n\n<pre><code>c:\\programfile\\apachesoftwarefoundation\\tomcat\\...\\webapps\n                                                            |\n                                                            |---myproj\n                                                            |   |\n                                                            |   |---WEB-INF\n                                                                |   |\n                                                                    |---web.xml\n</code></pre>\n\n<p>Step 3:<br>\nNow create a xml file with name myproj.xml under the following location</p>\n\n<pre><code>c:\\programfile\\apachesoftwarefoundation\\tomcat\\conf\\catalina\\localhost\n</code></pre>\n\n<p>CODE in myproj.xml:</p>\n\n<pre><code>&lt;Context path=\"/myproj/images\" docBase=\"e:/myproj/\" crossContext=\"false\" debug=\"0\" reloadable=\"true\" privileged=\"true\" /&gt; \n</code></pre>\n\n<hr>\n\n<p>Step 4:<br>\n 4 A) Now create a folder with name myproj in E drive of your hard disk and create a new </p>\n\n<p>folder with name images and place some images in images folder <code>(e:myproj\\images\\)</code></p>\n\n<p>Let us suppose myfoto.jpg is placed under <code>e:\\myproj\\images\\myfoto.jpg</code></p>\n\n<p>4 B) Now create a folder with name WEB-INF in <code>e:\\myproj\\WEB-INF</code> and create a web.xml in WEB-INF folder</p>\n\n<p>Code in web.xml</p>\n\n<pre><code>&lt;web-app&gt;\n&lt;/web-app&gt;\n</code></pre>\n\n<p>Step 5: <br>Now create  a .html document with name index.html and place under e:\\myproj</p>\n\n<p>CODE under index.html\n            \n                 \n                       Welcome to Myproj \n                 \n            </p>\n\n<p>The Directory Structure for the above Step 4 and Step 5 is as follows </p>\n\n<pre><code>E:\\myproj\n    |--index.html\n    |\n    |--images\n    |     |----myfoto.jpg\n    |\n    |--WEB-INF\n    |     |--web.xml\n</code></pre>\n\n<p>Step 6: <br>Now start the apache tomcat server</p>\n\n<p>Step 7: <br>open the browser and type the url as follows</p>\n\n<pre><code>http://localhost:8080/myproj    \n</code></pre>\n\n<p>then u display the content which is provided in index.html</p>\n\n<p>Step 8: <br>To Access the Images under your local hard disk (outside of webroot)</p>\n\n<pre><code>http://localhost:8080/myproj/images/myfoto.jpg\n</code></pre>\n"},{"tags":[],"owner":{"account_id":215504,"reputation":52462,"user_id":470184,"accept_rate":91,"display_name":"blue-sky"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1431426478,"creation_date":1431426478,"answer_id":30188170,"question_id":1812244,"body_markdown":"Add to server.xml : \r\n\r\n     &lt;Context docBase=&quot;c:/dirtoshare&quot; path=&quot;/dir&quot; /&gt;\r\n\r\nEnable dir file listing parameter in web.xml : \r\n\r\n        &lt;init-param&gt;\r\n            &lt;param-name&gt;listings&lt;/param-name&gt;\r\n            &lt;param-value&gt;true&lt;/param-value&gt;\r\n        &lt;/init-param&gt;","title":"Simplest way to serve static data from outside the application server in a Java web application","body":"<p>Add to server.xml : </p>\n\n<pre><code> &lt;Context docBase=\"c:/dirtoshare\" path=\"/dir\" /&gt;\n</code></pre>\n\n<p>Enable dir file listing parameter in web.xml : </p>\n\n<pre><code>    &lt;init-param&gt;\n        &lt;param-name&gt;listings&lt;/param-name&gt;\n        &lt;param-value&gt;true&lt;/param-value&gt;\n    &lt;/init-param&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4597208,"reputation":48209,"user_id":3728901,"accept_rate":58,"display_name":"Vy Do"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1433543725,"creation_date":1433260893,"answer_id":30601023,"question_id":1812244,"body_markdown":"This is story from my workplace:&lt;br/&gt;\r\n- We try to upload multiply images and document files use Struts 1 and Tomcat 7.x.&lt;br/&gt;\r\n- We try to write uploaded files to file system, filename and full path to database records.&lt;br/&gt;\r\n- We try to **separate file folders** outside **web app directory**. (*)\r\n\r\n\r\nThe below solution is pretty simple, effective for requirement (*):\r\n\r\nIn file **`META-INF/context.xml`** file with the following content:\r\n(Example, my application run at `http://localhost:8080/ABC`, my application / project named `ABC`).\r\n(this is also full content of file `context.xml`)\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;Context path=&quot;/ABC&quot; aliases=&quot;/images=D:\\images,/docs=D:\\docs&quot;/&gt;\r\n(works with Tomcat version 7 or later)\r\n\r\n**Result:** We have been created 2 alias. For example, we save images at: `D:\\images\\foo.jpg`\r\nand view from link or using image tag: \r\n\r\n    &lt;img src=&quot;http://localhost:8080/ABC/images/foo.jsp&quot; alt=&quot;Foo&quot; height=&quot;142&quot; width=&quot;142&quot;&gt;\r\n\r\nor \r\n\r\n    &lt;img src=&quot;/images/foo.jsp&quot; alt=&quot;Foo&quot; height=&quot;142&quot; width=&quot;142&quot;&gt;\r\n\r\n(I use Netbeans 7.x, Netbeans seem auto create file `WEB-INF\\context.xml`)","title":"Simplest way to serve static data from outside the application server in a Java web application","body":"<p>This is story from my workplace:<br/>\n- We try to upload multiply images and document files use Struts 1 and Tomcat 7.x.<br/>\n- We try to write uploaded files to file system, filename and full path to database records.<br/>\n- We try to <strong>separate file folders</strong> outside <strong>web app directory</strong>. (*)</p>\n\n<p>The below solution is pretty simple, effective for requirement (*):</p>\n\n<p>In file <strong><code>META-INF/context.xml</code></strong> file with the following content:\n(Example, my application run at <code>http://localhost:8080/ABC</code>, my application / project named <code>ABC</code>).\n(this is also full content of file <code>context.xml</code>)</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;Context path=\"/ABC\" aliases=\"/images=D:\\images,/docs=D:\\docs\"/&gt;\n</code></pre>\n\n<p>(works with Tomcat version 7 or later)</p>\n\n<p><strong>Result:</strong> We have been created 2 alias. For example, we save images at: <code>D:\\images\\foo.jpg</code>\nand view from link or using image tag: </p>\n\n<pre><code>&lt;img src=\"http://localhost:8080/ABC/images/foo.jsp\" alt=\"Foo\" height=\"142\" width=\"142\"&gt;\n</code></pre>\n\n<p>or </p>\n\n<pre><code>&lt;img src=\"/images/foo.jsp\" alt=\"Foo\" height=\"142\" width=\"142\"&gt;\n</code></pre>\n\n<p>(I use Netbeans 7.x, Netbeans seem auto create file <code>WEB-INF\\context.xml</code>)</p>\n"},{"tags":[],"owner":{"account_id":506679,"reputation":942,"user_id":1149606,"display_name":"Josef.B"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1472655422,"creation_date":1472655422,"answer_id":39252989,"question_id":1812244,"body_markdown":"I did it even simpler. Problem: A CSS file had url links to img folder.  Gets 404. \r\n\r\nI looked at url, http://tomcatfolder:port/img/blablah.png, which does not exist. But, that is really pointing to the ROOT app in Tomcat.  \r\n\r\nSo I just copied the img folder from my webapp into that ROOT app.  Works!  \r\n\r\nNot recommended for production, of course, but this is for an internal tool dev app.","title":"Simplest way to serve static data from outside the application server in a Java web application","body":"<p>I did it even simpler. Problem: A CSS file had url links to img folder.  Gets 404. </p>\n\n<p>I looked at url, <a href=\"http://tomcatfolder:port/img/blablah.png\" rel=\"nofollow\">http://tomcatfolder:port/img/blablah.png</a>, which does not exist. But, that is really pointing to the ROOT app in Tomcat.  </p>\n\n<p>So I just copied the img folder from my webapp into that ROOT app.  Works!  </p>\n\n<p>Not recommended for production, of course, but this is for an internal tool dev app.</p>\n"},{"tags":[],"owner":{"account_id":4176295,"reputation":1249,"user_id":3422726,"accept_rate":55,"display_name":"JPG"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1509007023,"creation_date":1509007023,"answer_id":46949470,"question_id":1812244,"body_markdown":"if anyone not able to resolve his problem with accepted answer, then note these below considerations:\r\n\r\n1. no need to mention `localhost:&lt;port&gt;` with `&lt;img&gt; src` attribute.\r\n2. make sure you are running this project outside eclipse, because eclipse creates `context docBase` entry on its own inside its local `server.xml` file.","title":"Simplest way to serve static data from outside the application server in a Java web application","body":"<p>if anyone not able to resolve his problem with accepted answer, then note these below considerations:</p>\n\n<ol>\n<li>no need to mention <code>localhost:&lt;port&gt;</code> with <code>&lt;img&gt; src</code> attribute.</li>\n<li>make sure you are running this project outside eclipse, because eclipse creates <code>context docBase</code> entry on its own inside its local <code>server.xml</code> file.</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":6575754,"reputation":9298,"user_id":5081877,"accept_rate":92,"display_name":"Yash"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1515755625,"creation_date":1515755625,"answer_id":48225096,"question_id":1812244,"body_markdown":"Read the InputStream of a file and write it to [`ServletOutputStream`](https://docs.oracle.com/javaee/5/api/javax/servlet/ServletOutputStream.html) for sending binary data to the client.\r\n\r\n* **Local file** You can read a file directly using _FileInputStream(&#39;path/image.png&#39;)_.\r\n* **Mongo DataBase file&#39;s** you can _[get InputStream using GridFS](https://stackoverflow.com/a/33544285/5081877)_.\r\n\r\n&lt;!-- language-all: lang-java --&gt;\r\n\r\n\t@WebServlet(&quot;/files/URLStream&quot;)\r\n\tpublic class URLStream extends HttpServlet {\r\n\t\tprivate static final long serialVersionUID = 1L;\r\n\t\t\r\n\t\tpublic URLStream() {\r\n\t\t\tsuper();\r\n\t\t}\r\n\r\n\t\tprotected void service(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {\r\n\t\t\tFile source = new File(&quot;D:\\\\SVN_Commit.PNG&quot;);\r\n\t\t\tlong start = System.nanoTime();\r\n\t\t\t\t\r\n\t\t\tInputStream image = new FileInputStream(source);\r\n\t\t\t\t\t\r\n\t\t\t/*String fileID = request.getParameter(&quot;id&quot;);\r\n\t\t\tSystem.out.println(&quot;Requested File ID : &quot;+fileID);\r\n\t\t\t// Mongo DB GridFS - https://stackoverflow.com/a/33544285/5081877\r\n\t\t\timage = outputImageFile.getInputStream();*/\r\n\t\t\t\t\t\r\n\t\t\tif( image != null ) {\r\n\t\t\t\tBufferedInputStream bin = null;\r\n\t\t\t\tBufferedOutputStream bout = null;\r\n\t\t\t\tServletOutputStream sos = response.getOutputStream();\r\n\t\t\t\ttry {\r\n\t\t\t\t\tbin = new BufferedInputStream( image );\r\n\t\t\t\t\tbout = new BufferedOutputStream( sos );\r\n\t\t\t\t\tint ch =0; ;\r\n\t\t\t\t\twhile((ch=bin.read())!=-1) {\r\n\t\t\t\t\t\tbout.write(ch);\r\n\t\t\t\t\t}\r\n\t\t\t\t} finally {\r\n\t\t\t\t\tbin.close();\r\n\t\t\t\t\timage.close();\r\n\t\t\t\t\tbout.close();\r\n\t\t\t\t\tsos.close();\r\n\t\t\t\t}\r\n\t\t\t\r\n\t\t\t} else {\r\n\t\t\t\tPrintWriter writer = response.getWriter();\r\n\t\t\t\twriter.append(&quot;Something went wrong with your request.&quot;);\r\n\t\t\t\tSystem.out.println(&quot;Image not available.&quot;);\r\n\t\t\t}\r\n\t\t\tSystem.out.println(&quot;Time taken by Stream Copy = &quot;+(System.nanoTime()-start));\r\n\t\t}\r\n\t}\r\n\t\r\n&lt;!-- language-all: lang-java --&gt;\r\n\r\n-----\r\n\r\nResult the URL directly to the `src` attibute.\r\n\r\n&lt;!-- language-all: lang-html --&gt;\r\n\r\n\t&lt;img src=&#39;http://172.0.0.1:8080/ServletApp/files/URLStream?id=5a575be200c117cc2500003b&#39; alt=&quot;mongodb File&quot;/&gt;\r\n\t&lt;img src=&#39;http://172.0.0.1:8080/ServletApp/files/URLStream&#39; alt=&quot;local file&quot;/&gt;\r\n\r\n\t&lt;video controls=&quot;controls&quot; src=&quot;http://172.0.0.1:8080/ServletApp/files/URLStream&quot;&gt;&lt;/video&gt;\r\n\t\r\n&lt;!-- language-all: lang-html --&gt;","title":"Simplest way to serve static data from outside the application server in a Java web application","body":"<p>Read the InputStream of a file and write it to <a href=\"https://docs.oracle.com/javaee/5/api/javax/servlet/ServletOutputStream.html\" rel=\"nofollow noreferrer\"><code>ServletOutputStream</code></a> for sending binary data to the client.</p>\n\n<ul>\n<li><strong>Local file</strong> You can read a file directly using <em>FileInputStream('path/image.png')</em>.</li>\n<li><strong>Mongo DataBase file's</strong> you can <em><a href=\"https://stackoverflow.com/a/33544285/5081877\">get InputStream using GridFS</a></em>.</li>\n</ul>\n\n\n\n<pre class=\"lang-java prettyprint-override\"><code>@WebServlet(\"/files/URLStream\")\npublic class URLStream extends HttpServlet {\n    private static final long serialVersionUID = 1L;\n\n    public URLStream() {\n        super();\n    }\n\n    protected void service(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {\n        File source = new File(\"D:\\\\SVN_Commit.PNG\");\n        long start = System.nanoTime();\n\n        InputStream image = new FileInputStream(source);\n\n        /*String fileID = request.getParameter(\"id\");\n        System.out.println(\"Requested File ID : \"+fileID);\n        // Mongo DB GridFS - https://stackoverflow.com/a/33544285/5081877\n        image = outputImageFile.getInputStream();*/\n\n        if( image != null ) {\n            BufferedInputStream bin = null;\n            BufferedOutputStream bout = null;\n            ServletOutputStream sos = response.getOutputStream();\n            try {\n                bin = new BufferedInputStream( image );\n                bout = new BufferedOutputStream( sos );\n                int ch =0; ;\n                while((ch=bin.read())!=-1) {\n                    bout.write(ch);\n                }\n            } finally {\n                bin.close();\n                image.close();\n                bout.close();\n                sos.close();\n            }\n\n        } else {\n            PrintWriter writer = response.getWriter();\n            writer.append(\"Something went wrong with your request.\");\n            System.out.println(\"Image not available.\");\n        }\n        System.out.println(\"Time taken by Stream Copy = \"+(System.nanoTime()-start));\n    }\n}\n</code></pre>\n\n\n\n<hr>\n\n<p>Result the URL directly to the <code>src</code> attibute.</p>\n\n\n\n<pre class=\"lang-html prettyprint-override\"><code>&lt;img src='http://172.0.0.1:8080/ServletApp/files/URLStream?id=5a575be200c117cc2500003b' alt=\"mongodb File\"/&gt;\n&lt;img src='http://172.0.0.1:8080/ServletApp/files/URLStream' alt=\"local file\"/&gt;\n\n&lt;video controls=\"controls\" src=\"http://172.0.0.1:8080/ServletApp/files/URLStream\"&gt;&lt;/video&gt;\n</code></pre>\n\n\n"},{"tags":[],"owner":{"account_id":3603762,"reputation":1569,"user_id":3006465,"display_name":"electrobabe"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1522717461,"creation_date":1522717461,"answer_id":49620773,"question_id":1812244,"body_markdown":"If you want to work with **JAX-RS** (e.g. RESTEasy) try this:\r\n\r\n    @Path(&quot;/pic&quot;)\r\n\tpublic Response get(@QueryParam(&quot;url&quot;) final String url) {\r\n\t    String picUrl = URLDecoder.decode(url, &quot;UTF-8&quot;);\r\n\r\n\t    return Response.ok(sendPicAsStream(picUrl))\r\n\t            .header(HttpHeaders.CONTENT_TYPE, &quot;image/jpg&quot;)\r\n\t            .build();\r\n\t}\r\n\r\n\tprivate StreamingOutput sendPicAsStream(String picUrl) {\r\n\t    return output -&gt; {\r\n\t        try (InputStream is = (new URL(picUrl)).openStream()) {\r\n\t            ByteStreams.copy(is, output);\r\n\t        }\r\n\t    };\r\n\t}\r\n\r\nusing `javax.ws.rs.core.Response` and `com.google.common.io.ByteStreams`","title":"Simplest way to serve static data from outside the application server in a Java web application","body":"<p>If you want to work with <strong>JAX-RS</strong> (e.g. RESTEasy) try this:</p>\n\n<pre><code>@Path(\"/pic\")\npublic Response get(@QueryParam(\"url\") final String url) {\n    String picUrl = URLDecoder.decode(url, \"UTF-8\");\n\n    return Response.ok(sendPicAsStream(picUrl))\n            .header(HttpHeaders.CONTENT_TYPE, \"image/jpg\")\n            .build();\n}\n\nprivate StreamingOutput sendPicAsStream(String picUrl) {\n    return output -&gt; {\n        try (InputStream is = (new URL(picUrl)).openStream()) {\n            ByteStreams.copy(is, output);\n        }\n    };\n}\n</code></pre>\n\n<p>using <code>javax.ws.rs.core.Response</code> and <code>com.google.common.io.ByteStreams</code></p>\n"},{"tags":[],"owner":{"account_id":19133592,"reputation":88,"user_id":13974992,"display_name":"Hungnn"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679478671,"creation_date":1679478671,"answer_id":75810672,"question_id":1812244,"body_markdown":"You can edit 2 files in the `conf` directory:\\\r\nFirst, edit `server.xml` file:\\\r\nYou will see `&lt;Engine&gt;&lt;/Engine&gt;` has many `&lt;Host&gt;&lt;/Host&gt;` tag.\\\r\nIn the `&lt;Host&gt;` with name is: &quot;localhost&quot;, change `&lt;Context&gt;` to:\r\n\r\n    &lt;Host&gt;\r\n        &lt;Valve className=&quot;org.apache.catalina.authenticator.SingleSignOn&quot; /&gt;\r\n        ...\r\n        &lt;Context docBase=&quot;/home/your_directory_contain_image/&quot; reloadable=&quot;true&quot; path=&quot;images&quot;&gt;&lt;/Context&gt;\r\n    &lt;/Host&gt;\r\nwith:\\\r\n`docBase` is the path to the directory containing your images.\\\r\n`path`: is the path that will add to url when showing the image.\\\r\nYour target will like: http://localhost:8080/images/image1.png\r\n\r\nNext, edit `web.xml` file, in the `&lt;servlet&gt;` with name: `&lt;servlet-name&gt;default&lt;/servlet-name&gt;` edit like:\r\n\r\n        &lt;servlet&gt;\r\n            &lt;servlet-name&gt;default&lt;/servlet-name&gt;\r\n            &lt;servlet-class&gt;org.apache.catalina.servlets.DefaultServlet&lt;/servlet-class&gt;\r\n            &lt;init-param&gt;\r\n                &lt;param-name&gt;debug&lt;/param-name&gt;\r\n                &lt;param-value&gt;0&lt;/param-value&gt;\r\n            &lt;/init-param&gt;\r\n            &lt;init-param&gt;\r\n                &lt;param-name&gt;listings&lt;/param-name&gt;\r\n                &lt;param-value&gt;true&lt;/param-value&gt;\r\n            &lt;/init-param&gt;\r\n            &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;\r\n        &lt;/servlet&gt;\r\nIt will start like an image server when you start Tomcat\\\r\nHope that it helps\r\n\r\n","title":"Simplest way to serve static data from outside the application server in a Java web application","body":"<p>You can edit 2 files in the <code>conf</code> directory:<br />\nFirst, edit <code>server.xml</code> file:<br />\nYou will see <code>&lt;Engine&gt;&lt;/Engine&gt;</code> has many <code>&lt;Host&gt;&lt;/Host&gt;</code> tag.<br />\nIn the <code>&lt;Host&gt;</code> with name is: &quot;localhost&quot;, change <code>&lt;Context&gt;</code> to:</p>\n<pre><code>&lt;Host&gt;\n    &lt;Valve className=&quot;org.apache.catalina.authenticator.SingleSignOn&quot; /&gt;\n    ...\n    &lt;Context docBase=&quot;/home/your_directory_contain_image/&quot; reloadable=&quot;true&quot; path=&quot;images&quot;&gt;&lt;/Context&gt;\n&lt;/Host&gt;\n</code></pre>\n<p>with:<br />\n<code>docBase</code> is the path to the directory containing your images.<br />\n<code>path</code>: is the path that will add to url when showing the image.<br />\nYour target will like: http://localhost:8080/images/image1.png</p>\n<p>Next, edit <code>web.xml</code> file, in the <code>&lt;servlet&gt;</code> with name: <code>&lt;servlet-name&gt;default&lt;/servlet-name&gt;</code> edit like:</p>\n<pre><code>    &lt;servlet&gt;\n        &lt;servlet-name&gt;default&lt;/servlet-name&gt;\n        &lt;servlet-class&gt;org.apache.catalina.servlets.DefaultServlet&lt;/servlet-class&gt;\n        &lt;init-param&gt;\n            &lt;param-name&gt;debug&lt;/param-name&gt;\n            &lt;param-value&gt;0&lt;/param-value&gt;\n        &lt;/init-param&gt;\n        &lt;init-param&gt;\n            &lt;param-name&gt;listings&lt;/param-name&gt;\n            &lt;param-value&gt;true&lt;/param-value&gt;\n        &lt;/init-param&gt;\n        &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;\n    &lt;/servlet&gt;\n</code></pre>\n<p>It will start like an image server when you start Tomcat<br />\nHope that it helps</p>\n"}],"owner":{"account_id":32594,"reputation":3657,"user_id":90563,"accept_rate":88,"display_name":"Janne"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":168321,"favorite_count":0,"down_vote_count":0,"up_vote_count":140,"accepted_answer_id":1812356,"answer_count":11,"score":140,"last_activity_date":1679498418,"creation_date":1259405918,"question_id":1812244,"body_markdown":"I have a Java web application running on Tomcat. I want to load static images that will be shown both on the Web UI and in PDF files generated by the application. Also new images will be added and saved by uploading via the Web UI.\r\n\r\nIt&#39;s not a problem to do this by having the static data stored within the web container but storing and loading them from outside the web container is giving me headache.\r\n\r\nI&#39;d prefer not to use a separate web server like Apache for serving the static data at this point. I also don&#39;t like the idea of storing the images in binary in a database. \r\n\r\nI&#39;ve seen some suggestions like having the image directory being a symbolic link pointing to a directory outside the web container, but will this approach work both on Windows and *nix environments? \r\n\r\nSome suggest writing a filter or a servlet for handling the image serving but those suggestions have been very vague and high-level without pointers to more detailed information on how to accomplish this.     ","title":"Simplest way to serve static data from outside the application server in a Java web application","body":"<p>I have a Java web application running on Tomcat. I want to load static images that will be shown both on the Web UI and in PDF files generated by the application. Also new images will be added and saved by uploading via the Web UI.</p>\n<p>It's not a problem to do this by having the static data stored within the web container but storing and loading them from outside the web container is giving me headache.</p>\n<p>I'd prefer not to use a separate web server like Apache for serving the static data at this point. I also don't like the idea of storing the images in binary in a database.</p>\n<p>I've seen some suggestions like having the image directory being a symbolic link pointing to a directory outside the web container, but will this approach work both on Windows and *nix environments?</p>\n<p>Some suggest writing a filter or a servlet for handling the image serving but those suggestions have been very vague and high-level without pointers to more detailed information on how to accomplish this.</p>\n"},{"tags":["java","json","mongodb","spring-boot","arraylist"],"owner":{"account_id":26783102,"reputation":1,"user_id":20377669,"display_name":"Pasqualone"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":21,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679497912,"creation_date":1679473836,"question_id":75809905,"body_markdown":"i got some problems with an update of a point path.\r\n\r\nThis is my path\r\n\r\n```java\r\n@Data\r\n@Document(collection = &quot;path&quot;)\r\n@JsonInclude(JsonInclude.Include.NON_NULL)\r\npublic class Path {\r\n    @Id\r\n    private String id;\r\n    \r\n    private PointPath starterPoint;\r\n    \r\n    private PointPath endPoint;\r\n    \r\n    private List&lt;PointPath&gt; intermediatePoints = new ArrayList&lt;&gt;();\r\n    \r\n    private boolean circuit;\r\n    \r\n    // counting minuts\r\n    private Integer time;\r\n    \r\n    // counting meters\r\n    private Integer totalDistance;\r\n}\r\n```\r\n\r\nThis is my point path:\r\n\r\n```java\r\n@Data \r\n@Document(collection = &quot;pointPath&quot;) \r\n@JsonInclude(JsonInclude.Include.NON_NULL) \r\npublic class PointPath {\r\n    @Id\r\n    private String id;\r\n    \r\n    private String streetName;\r\n    \r\n    private String streetNumber;\r\n    \r\n    private String municipality;\r\n    \r\n    private Integer zipCode;\r\n    \r\n    private Double latitude;\r\n    \r\n    private Double longitude;\r\n}\r\n```\r\n\r\nThis is the service:\r\n\r\n```java\r\n@Override \r\npublic Path updatePath(Path path) { \r\n    Optional&lt;Path&gt; cointainer = pathRepository.findById(path.getId());\r\n    Path existingPath = null;\r\n    existingPath = cointainer.get();\r\n\r\n    if (existingPath == null) {\r\n        return null;\r\n    } else {\r\n        existingPath.setStarterPoint(path.getStarterPoint());\r\n        existingPath.setEndPoint(path.getEndPoint());\r\n        existingPath.setIntermediatePoints(path.getIntermediatePoints());\r\n        existingPath.setCircuit(path.isCircuit());\r\n        existingPath.setTime(path.getTime());\r\n        existingPath.setTotalDistance(path.getTotalDistance());\r\n        return pathRepository.save(existingPath);\r\n    }\r\n}\r\n```\r\n\r\nThis is the controller:\r\n```java\r\n@Operation(summary = &quot;This api updates a specific path using his ID&quot;) \t\r\n@ApiResponse(responseCode = &quot;204&quot;, description = &quot;nyour text`o path found&quot;) \r\n@PutMapping(&quot;updatePath&quot;) \r\npublic ResponseEntity&lt;?&gt; updatePath(@RequestParam(&quot;pathId&quot;) String pathId, @RequestBody @Valid PathDto path) {\t\r\n    APIValidation apiValidation = new APIValidation();\r\n\r\n    try {\r\n        if (path.isCircuit() &amp;&amp; !path.getStarterPoint().equals(path.getEndPoint())) {\r\n            apiValidation.setValidationResult(ApiErrorCode.CIRCUIT_START_END_MUST_BE_EQUAL.toString(), &quot;For circuits, StarterPoint and EndPoint must be equal.&quot;);\r\n        }\r\n\r\n        if (!path.isCircuit() &amp;&amp; path.getStarterPoint().equals(path.getEndPoint())) {\r\n            apiValidation.setValidationResult(ApiErrorCode.START_END_MUST_BE_DIFFERENT.toString(), &quot;StarterPoint and EndPoint must be different.&quot;);\r\n        }\r\n\r\n        if (path.isCircuit() &amp;&amp; path.getIntermediatePoints().isEmpty()) {\r\n            apiValidation.setValidationResult(ApiErrorCode.CIRCUIT_MUST_HAVE_INTERMEDIATE_POINTS.toString(), &quot;For circuits, at least one IntermediatePoint is required.&quot;);\r\n        }\r\n\r\n        if (path.getIntermediatePoints().contains(path.getStarterPoint()) || path.getIntermediatePoints().contains(path.getEndPoint())) {\r\n            apiValidation.setValidationResult(ApiErrorCode.PATH_OVERLAPS.toString(), &quot;Intermediate points cannot be the same as StarterPoint or EndPoint.&quot;);\r\n        }\r\n\r\n        List&lt;PointPathDto&gt; intermediatePoints1 = path.getIntermediatePoints();\r\n\r\n        for (PointPathDto point : intermediatePoints1) {\r\n            if (Collections.frequency(intermediatePoints1, point) &gt; 1) {\r\n                apiValidation.setValidationResult(ApiErrorCode.REPEATED_POINT.toString(), &quot;Intermediate points cannot be repeated.&quot;);\r\n            }\r\n        }\r\n\r\n        if (apiValidation.errorsExist()) {\r\n            return new ResponseEntity&lt;&gt;(Collections.singletonMap(&quot;errors&quot;, apiValidation.getFieldsList()), HttpStatus.BAD_REQUEST);\r\n        }\r\n\r\n        Path pathToUpdate = pathService.findPathById(pathId);\r\n\r\n        if (pathToUpdate == null) {\r\n            return ResponseEntity.badRequest().body(&quot;L&#39;ID fornito non &#232; valido.&quot;);\r\n        }\r\n\r\n        mapper.map(path, pathToUpdate);\r\n\r\n        pathService.updatePath(pathToUpdate);\r\n\r\n        return ResponseEntity.ok(pathToUpdate);\r\n    } catch (Exception e) {\r\n        e.printStackTrace();\r\n\r\n        return new ResponseEntity&lt;&gt;(null, new HttpHeaders(), HttpStatus.INTERNAL_SERVER_ERROR);\r\n    }\r\n}\r\n```\r\n\r\nOk, so i tried everything, but when i do update it works, but when i try to update and i try to remove and intermediate points (which is a list of point path) it doesnt work, so i tried everything but i dont know how to fix it, what can I do?\r\n","title":"Problems when editing a Path","body":"<p>i got some problems with an update of a point path.</p>\n<p>This is my path</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Data\n@Document(collection = &quot;path&quot;)\n@JsonInclude(JsonInclude.Include.NON_NULL)\npublic class Path {\n    @Id\n    private String id;\n    \n    private PointPath starterPoint;\n    \n    private PointPath endPoint;\n    \n    private List&lt;PointPath&gt; intermediatePoints = new ArrayList&lt;&gt;();\n    \n    private boolean circuit;\n    \n    // counting minuts\n    private Integer time;\n    \n    // counting meters\n    private Integer totalDistance;\n}\n</code></pre>\n<p>This is my point path:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Data \n@Document(collection = &quot;pointPath&quot;) \n@JsonInclude(JsonInclude.Include.NON_NULL) \npublic class PointPath {\n    @Id\n    private String id;\n    \n    private String streetName;\n    \n    private String streetNumber;\n    \n    private String municipality;\n    \n    private Integer zipCode;\n    \n    private Double latitude;\n    \n    private Double longitude;\n}\n</code></pre>\n<p>This is the service:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Override \npublic Path updatePath(Path path) { \n    Optional&lt;Path&gt; cointainer = pathRepository.findById(path.getId());\n    Path existingPath = null;\n    existingPath = cointainer.get();\n\n    if (existingPath == null) {\n        return null;\n    } else {\n        existingPath.setStarterPoint(path.getStarterPoint());\n        existingPath.setEndPoint(path.getEndPoint());\n        existingPath.setIntermediatePoints(path.getIntermediatePoints());\n        existingPath.setCircuit(path.isCircuit());\n        existingPath.setTime(path.getTime());\n        existingPath.setTotalDistance(path.getTotalDistance());\n        return pathRepository.save(existingPath);\n    }\n}\n</code></pre>\n<p>This is the controller:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Operation(summary = &quot;This api updates a specific path using his ID&quot;)   \n@ApiResponse(responseCode = &quot;204&quot;, description = &quot;nyour text`o path found&quot;) \n@PutMapping(&quot;updatePath&quot;) \npublic ResponseEntity&lt;?&gt; updatePath(@RequestParam(&quot;pathId&quot;) String pathId, @RequestBody @Valid PathDto path) {  \n    APIValidation apiValidation = new APIValidation();\n\n    try {\n        if (path.isCircuit() &amp;&amp; !path.getStarterPoint().equals(path.getEndPoint())) {\n            apiValidation.setValidationResult(ApiErrorCode.CIRCUIT_START_END_MUST_BE_EQUAL.toString(), &quot;For circuits, StarterPoint and EndPoint must be equal.&quot;);\n        }\n\n        if (!path.isCircuit() &amp;&amp; path.getStarterPoint().equals(path.getEndPoint())) {\n            apiValidation.setValidationResult(ApiErrorCode.START_END_MUST_BE_DIFFERENT.toString(), &quot;StarterPoint and EndPoint must be different.&quot;);\n        }\n\n        if (path.isCircuit() &amp;&amp; path.getIntermediatePoints().isEmpty()) {\n            apiValidation.setValidationResult(ApiErrorCode.CIRCUIT_MUST_HAVE_INTERMEDIATE_POINTS.toString(), &quot;For circuits, at least one IntermediatePoint is required.&quot;);\n        }\n\n        if (path.getIntermediatePoints().contains(path.getStarterPoint()) || path.getIntermediatePoints().contains(path.getEndPoint())) {\n            apiValidation.setValidationResult(ApiErrorCode.PATH_OVERLAPS.toString(), &quot;Intermediate points cannot be the same as StarterPoint or EndPoint.&quot;);\n        }\n\n        List&lt;PointPathDto&gt; intermediatePoints1 = path.getIntermediatePoints();\n\n        for (PointPathDto point : intermediatePoints1) {\n            if (Collections.frequency(intermediatePoints1, point) &gt; 1) {\n                apiValidation.setValidationResult(ApiErrorCode.REPEATED_POINT.toString(), &quot;Intermediate points cannot be repeated.&quot;);\n            }\n        }\n\n        if (apiValidation.errorsExist()) {\n            return new ResponseEntity&lt;&gt;(Collections.singletonMap(&quot;errors&quot;, apiValidation.getFieldsList()), HttpStatus.BAD_REQUEST);\n        }\n\n        Path pathToUpdate = pathService.findPathById(pathId);\n\n        if (pathToUpdate == null) {\n            return ResponseEntity.badRequest().body(&quot;L'ID fornito non è valido.&quot;);\n        }\n\n        mapper.map(path, pathToUpdate);\n\n        pathService.updatePath(pathToUpdate);\n\n        return ResponseEntity.ok(pathToUpdate);\n    } catch (Exception e) {\n        e.printStackTrace();\n\n        return new ResponseEntity&lt;&gt;(null, new HttpHeaders(), HttpStatus.INTERNAL_SERVER_ERROR);\n    }\n}\n</code></pre>\n<p>Ok, so i tried everything, but when i do update it works, but when i try to update and i try to remove and intermediate points (which is a list of point path) it doesnt work, so i tried everything but i dont know how to fix it, what can I do?</p>\n"},{"tags":["java","spring-webflux","spring-restcontroller"],"comments":[{"owner":{"account_id":10941198,"reputation":4394,"user_id":8041003,"display_name":"John Williams"},"score":0,"creation_date":1679330284,"post_id":75770686,"comment_id":133698601,"body_markdown":"What java client are you using to send the url &#39;http://localhost:8080/test?identifier=test|code&#39;? I am trying to simulate using restTemplate.exchange(&quot;http://localhost:8088/api/test?identifier=test|code&quot; and it silently converts to the %7C format: &#39;http://localhost:8088/api/test?identifier=test%7Ccode&#39;. curl on the command line assumes the | is a pipe and splits the command.","body":"What java client are you using to send the url &#39;<a href=\"http://localhost:8080/test?identifier=test|code\" rel=\"nofollow noreferrer\">localhost:8080/test?identifier=test|code</a>&#39;? I am trying to simulate using restTemplate.exchange(&quot;<a href=\"http://localhost:8088/api/test?identifier=test|code\" rel=\"nofollow noreferrer\">localhost:8088/api/test?identifier=te&zwnj;&#8203;st|code</a>&quot; and it silently converts to the %7C format: &#39;<a href=\"http://localhost:8088/api/test?identifier=test%7Ccode\" rel=\"nofollow noreferrer\">localhost:8088/api/test?identifier=test%7Ccode</a>&#39;. curl on the command line assumes the | is a pipe and splits the command."},{"owner":{"account_id":9797098,"reputation":582,"user_id":7259705,"display_name":"Jonathan Hagen"},"score":0,"creation_date":1679343832,"post_id":75770686,"comment_id":133702082,"body_markdown":"I was using postman for testing. There is an option for automatic URL encode option, but I would like to know if there is a way for server side to accept url with special character without encoding (basically client doesn&#39;t have to encode it)","body":"I was using postman for testing. There is an option for automatic URL encode option, but I would like to know if there is a way for server side to accept url with special character without encoding (basically client doesn&#39;t have to encode it)"}],"answers":[{"tags":[],"owner":{"account_id":10941198,"reputation":4394,"user_id":8041003,"display_name":"John Williams"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1679497797,"creation_date":1679497797,"answer_id":75814040,"question_id":75770686,"body_markdown":"**Short answer**: The validation of URL characters is done by `java.net.URI`, not Netty, Springboot or Tomcat. This makes it very difficult/unrealistic to bypass, especially as `java.net.URI` is declared `final`.\r\n\r\n**Long answer**:\r\nI set the following packages to `TRACE` logging:\r\n\r\n    logging.level.org.netty=TRACE\r\n    logging.level.org.springframework=TRACE\r\n\r\nOn calling the service with url with Postman&#39;s &#39;Encode URL automatically&#39; switched off: http://localhost:8088/api/test?identifier=test|code the following was written to the logs:\r\n\r\n    DEBUG o.s.h.s.r.ReactorHttpHandlerAdapter      : Failed to get request URI: Illegal character in query at index 46: http://localhost:8088/api/test?identifier=test|code\r\n\r\n`o.s.h.s.r.ReactorHttpHandlerAdapter` is `org.springframework.http.server.reactive.ReactorHttpHandlerAdapter`\r\n\r\n`ReactorHttpHandlerAdapter` calls `reactor.netty.http.HttpOperations&lt;INBOUND extends NettyInbound, OUTBOUND extends NettyOutbound&gt;`\r\n which uses `java.net.URI.create(String str)`\r\nwhich eventually hits `java.net.URI.create.match(char c, long lowMask, long highMask)`\r\n\r\n`match()` tests that the characters in the url are all included in the following:\r\n\r\n    // Character-class masks, in reverse order from RFC2396 because\r\n    // initializers for static fields cannot make forward references.\r\n    \r\n    // digit    = &quot;0&quot; | &quot;1&quot; | &quot;2&quot; | &quot;3&quot; | &quot;4&quot; | &quot;5&quot; | &quot;6&quot; | &quot;7&quot; |\r\n    //            &quot;8&quot; | &quot;9&quot;\r\n    private static final long L_DIGIT = 0x3FF000000000000L; // lowMask(&#39;0&#39;, &#39;9&#39;);\r\n    private static final long H_DIGIT = 0L;\r\n    \r\n    // upalpha  = &quot;A&quot; | &quot;B&quot; | &quot;C&quot; | &quot;D&quot; | &quot;E&quot; | &quot;F&quot; | &quot;G&quot; | &quot;H&quot; | &quot;I&quot; |\r\n    //            &quot;J&quot; | &quot;K&quot; | &quot;L&quot; | &quot;M&quot; | &quot;N&quot; | &quot;O&quot; | &quot;P&quot; | &quot;Q&quot; | &quot;R&quot; |\r\n    //            &quot;S&quot; | &quot;T&quot; | &quot;U&quot; | &quot;V&quot; | &quot;W&quot; | &quot;X&quot; | &quot;Y&quot; | &quot;Z&quot;\r\n    private static final long L_UPALPHA = 0L;\r\n    private static final long H_UPALPHA = 0x7FFFFFEL; // highMask(&#39;A&#39;, &#39;Z&#39;);\r\n    \r\n    // lowalpha = &quot;a&quot; | &quot;b&quot; | &quot;c&quot; | &quot;d&quot; | &quot;e&quot; | &quot;f&quot; | &quot;g&quot; | &quot;h&quot; | &quot;i&quot; |\r\n    //            &quot;j&quot; | &quot;k&quot; | &quot;l&quot; | &quot;m&quot; | &quot;n&quot; | &quot;o&quot; | &quot;p&quot; | &quot;q&quot; | &quot;r&quot; |\r\n    //            &quot;s&quot; | &quot;t&quot; | &quot;u&quot; | &quot;v&quot; | &quot;w&quot; | &quot;x&quot; | &quot;y&quot; | &quot;z&quot;\r\n    private static final long L_LOWALPHA = 0L;\r\n    private static final long H_LOWALPHA = 0x7FFFFFE00000000L; // highMask(&#39;a&#39;, &#39;z&#39;);\r\n    \r\n    // alpha         = lowalpha | upalpha\r\n    private static final long L_ALPHA = L_LOWALPHA | L_UPALPHA;\r\n    private static final long H_ALPHA = H_LOWALPHA | H_UPALPHA;\r\n    \r\n    // alphanum      = alpha | digit\r\n    private static final long L_ALPHANUM = L_DIGIT | L_ALPHA;\r\n    private static final long H_ALPHANUM = H_DIGIT | H_ALPHA;\r\n    \r\n    // hex           = digit | &quot;A&quot; | &quot;B&quot; | &quot;C&quot; | &quot;D&quot; | &quot;E&quot; | &quot;F&quot; |\r\n    //                         &quot;a&quot; | &quot;b&quot; | &quot;c&quot; | &quot;d&quot; | &quot;e&quot; | &quot;f&quot;\r\n    private static final long L_HEX = L_DIGIT;\r\n    private static final long H_HEX = 0x7E0000007EL; // highMask(&#39;A&#39;, &#39;F&#39;) | highMask(&#39;a&#39;, &#39;f&#39;);\r\n    \r\n    // mark          = &quot;-&quot; | &quot;_&quot; | &quot;.&quot; | &quot;!&quot; | &quot;~&quot; | &quot;*&quot; | &quot;&#39;&quot; |\r\n    //                 &quot;(&quot; | &quot;)&quot;\r\n    private static final long L_MARK = 0x678200000000L; // lowMask(&quot;-_.!~*&#39;()&quot;);\r\n    private static final long H_MARK = 0x4000000080000000L; // highMask(&quot;-_.!~*&#39;()&quot;);\r\n    \r\n    // unreserved    = alphanum | mark\r\n    private static final long L_UNRESERVED = L_ALPHANUM | L_MARK;\r\n    private static final long H_UNRESERVED = H_ALPHANUM | H_MARK;\r\n    \r\n    // reserved      = &quot;;&quot; | &quot;/&quot; | &quot;?&quot; | &quot;:&quot; | &quot;@&quot; | &quot;&amp;&quot; | &quot;=&quot; | &quot;+&quot; |\r\n    //                 &quot;$&quot; | &quot;,&quot; | &quot;[&quot; | &quot;]&quot;\r\n    // Added per RFC2732: &quot;[&quot;, &quot;]&quot;\r\n    private static final long L_RESERVED = 0xAC00985000000000L; // lowMask(&quot;;/?:@&amp;=+$,[]&quot;);\r\n    private static final long H_RESERVED = 0x28000001L; // highMask(&quot;;/?:@&amp;=+$,[]&quot;);\r\n    \r\n    // The zero&#39;th bit is used to indicate that escape pairs and non-US-ASCII\r\n    // characters are allowed; this is handled by the scanEscape method below.\r\n    private static final long L_ESCAPED = 1L;\r\n    private static final long H_ESCAPED = 0L;\r\n    \r\n    // uric          = reserved | unreserved | escaped\r\n    private static final long L_URIC = L_RESERVED | L_UNRESERVED | L_ESCAPED;\r\n    private static final long H_URIC = H_RESERVED | H_UNRESERVED | H_ESCAPED;\r\n    \r\n    // pchar         = unreserved | escaped |\r\n    //                 &quot;:&quot; | &quot;@&quot; | &quot;&amp;&quot; | &quot;=&quot; | &quot;+&quot; | &quot;$&quot; | &quot;,&quot;\r\n    private static final long L_PCHAR\r\n        = L_UNRESERVED | L_ESCAPED | 0x2400185000000000L; // lowMask(&quot;:@&amp;=+$,&quot;);\r\n    private static final long H_PCHAR\r\n        = H_UNRESERVED | H_ESCAPED | 0x1L; // highMask(&quot;:@&amp;=+$,&quot;);\r\n    \r\n    // All valid path characters\r\n    private static final long L_PATH = L_PCHAR | 0x800800000000000L; // lowMask(&quot;;/&quot;);\r\n    private static final long H_PATH = H_PCHAR; // highMask(&quot;;/&quot;) == 0x0L;\r\n    \r\n    // Dash, for use in domainlabel and toplabel\r\n    private static final long L_DASH = 0x200000000000L; // lowMask(&quot;-&quot;);\r\n    private static final long H_DASH = 0x0L; // highMask(&quot;-&quot;);\r\n    \r\n    // Dot, for use in hostnames\r\n    private static final long L_DOT = 0x400000000000L; // lowMask(&quot;.&quot;);\r\n    private static final long H_DOT = 0x0L; // highMask(&quot;.&quot;);\r\n    \r\n    // userinfo      = *( unreserved | escaped |\r\n    //                    &quot;;&quot; | &quot;:&quot; | &quot;&amp;&quot; | &quot;=&quot; | &quot;+&quot; | &quot;$&quot; | &quot;,&quot; )\r\n    private static final long L_USERINFO\r\n        = L_UNRESERVED | L_ESCAPED | 0x2C00185000000000L; // lowMask(&quot;;:&amp;=+$,&quot;);\r\n    private static final long H_USERINFO\r\n        = H_UNRESERVED | H_ESCAPED; // | highMask(&quot;;:&amp;=+$,&quot;) == 0L;\r\n    \r\n    // reg_name      = 1*( unreserved | escaped | &quot;$&quot; | &quot;,&quot; |\r\n    //                     &quot;;&quot; | &quot;:&quot; | &quot;@&quot; | &quot;&amp;&quot; | &quot;=&quot; | &quot;+&quot; )\r\n    private static final long L_REG_NAME\r\n        = L_UNRESERVED | L_ESCAPED | 0x2C00185000000000L; // lowMask(&quot;$,;:@&amp;=+&quot;);\r\n    private static final long H_REG_NAME\r\n        = H_UNRESERVED | H_ESCAPED | 0x1L; // highMask(&quot;$,;:@&amp;=+&quot;);\r\n    \r\n    // All valid characters for server-based authorities\r\n    private static final long L_SERVER\r\n        = L_USERINFO | L_ALPHANUM | L_DASH | 0x400400000000000L; // lowMask(&quot;.:@[]&quot;);\r\n    private static final long H_SERVER\r\n        = H_USERINFO | H_ALPHANUM | H_DASH | 0x28000001L; // highMask(&quot;.:@[]&quot;);\r\n    \r\n    // Special case of server authority that represents an IPv6 address\r\n    // In this case, a % does not signify an escape sequence\r\n    private static final long L_SERVER_PERCENT\r\n        = L_SERVER | 0x2000000000L; // lowMask(&quot;%&quot;);\r\n    private static final long H_SERVER_PERCENT\r\n        = H_SERVER; // | highMask(&quot;%&quot;) == 0L;\r\n    \r\n    // scheme        = alpha *( alpha | digit | &quot;+&quot; | &quot;-&quot; | &quot;.&quot; )\r\n    private static final long L_SCHEME = L_ALPHA | L_DIGIT | 0x680000000000L; // lowMask(&quot;+-.&quot;);\r\n    private static final long H_SCHEME = H_ALPHA | H_DIGIT; // | highMask(&quot;+-.&quot;) == 0L\r\n    \r\n    // scope_id = alpha | digit | &quot;_&quot; | &quot;.&quot;\r\n    private static final long L_SCOPE_ID\r\n        = L_ALPHANUM | 0x400000000000L; // lowMask(&quot;_.&quot;);\r\n    private static final long H_SCOPE_ID\r\n        = H_ALPHANUM | 0x80000000L; // highMask(&quot;_.&quot;);\r\n    \r\n    // -- Escaping and encoding --\r\n    \r\n    private static final char[] hexDigits = {\r\n        &#39;0&#39;, &#39;1&#39;, &#39;2&#39;, &#39;3&#39;, &#39;4&#39;, &#39;5&#39;, &#39;6&#39;, &#39;7&#39;,\r\n        &#39;8&#39;, &#39;9&#39;, &#39;A&#39;, &#39;B&#39;, &#39;C&#39;, &#39;D&#39;, &#39;E&#39;, &#39;F&#39;\r\n    };\r\n\r\nSo to implement this `java.net.URI` must to be replaced with one that includes &#39;|&#39; in the following mask. Also a fork of netty that uses this variant of `java.net.URI` will need to be created:\r\n\r\n    private static final long L_MARK = 0x678200000000L; // lowMask(&quot;-_.!~*&#39;()&quot;);\r\n    private static final long H_MARK = 0x4000000080000000L; // highMask(&quot;-_.!~*&#39;()&quot;);\r\n\r\nStack from netty `resolvePath()` to to `URI$Parser.match()` - from callee to caller:\r\n\r\n    URI.match(char, long, long) line: 2637\t\r\n    URI$Parser.scan(int, int, long, long) line: 3120\t\r\n    URI$Parser.checkChars(int, int, long, long, String) line: 3143\t\r\n    URI$Parser.checkChar(int, long, long, String) line: 3155\t\r\n    URI$Parser.parse(boolean) line: 3170\t\r\n    URI.&lt;init&gt;(String) line: 623\t\r\n    URI.create(String) line: 904\t\r\n    HttpOperations&lt;INBOUND,OUTBOUND&gt;.resolvePath(String) line: 429\t\r\n     \r\n\r\n\r\n\r\n\r\n\r\n","title":"How to handle special character (such as pipe) for spring webflux controller on server side?","body":"<p><strong>Short answer</strong>: The validation of URL characters is done by <code>java.net.URI</code>, not Netty, Springboot or Tomcat. This makes it very difficult/unrealistic to bypass, especially as <code>java.net.URI</code> is declared <code>final</code>.</p>\n<p><strong>Long answer</strong>:\nI set the following packages to <code>TRACE</code> logging:</p>\n<pre><code>logging.level.org.netty=TRACE\nlogging.level.org.springframework=TRACE\n</code></pre>\n<p>On calling the service with url with Postman's 'Encode URL automatically' switched off: http://localhost:8088/api/test?identifier=test|code the following was written to the logs:</p>\n<pre><code>DEBUG o.s.h.s.r.ReactorHttpHandlerAdapter      : Failed to get request URI: Illegal character in query at index 46: http://localhost:8088/api/test?identifier=test|code\n</code></pre>\n<p><code>o.s.h.s.r.ReactorHttpHandlerAdapter</code> is <code>org.springframework.http.server.reactive.ReactorHttpHandlerAdapter</code></p>\n<p><code>ReactorHttpHandlerAdapter</code> calls <code>reactor.netty.http.HttpOperations&lt;INBOUND extends NettyInbound, OUTBOUND extends NettyOutbound&gt;</code>\nwhich uses <code>java.net.URI.create(String str)</code>\nwhich eventually hits <code>java.net.URI.create.match(char c, long lowMask, long highMask)</code></p>\n<p><code>match()</code> tests that the characters in the url are all included in the following:</p>\n<pre><code>// Character-class masks, in reverse order from RFC2396 because\n// initializers for static fields cannot make forward references.\n\n// digit    = &quot;0&quot; | &quot;1&quot; | &quot;2&quot; | &quot;3&quot; | &quot;4&quot; | &quot;5&quot; | &quot;6&quot; | &quot;7&quot; |\n//            &quot;8&quot; | &quot;9&quot;\nprivate static final long L_DIGIT = 0x3FF000000000000L; // lowMask('0', '9');\nprivate static final long H_DIGIT = 0L;\n\n// upalpha  = &quot;A&quot; | &quot;B&quot; | &quot;C&quot; | &quot;D&quot; | &quot;E&quot; | &quot;F&quot; | &quot;G&quot; | &quot;H&quot; | &quot;I&quot; |\n//            &quot;J&quot; | &quot;K&quot; | &quot;L&quot; | &quot;M&quot; | &quot;N&quot; | &quot;O&quot; | &quot;P&quot; | &quot;Q&quot; | &quot;R&quot; |\n//            &quot;S&quot; | &quot;T&quot; | &quot;U&quot; | &quot;V&quot; | &quot;W&quot; | &quot;X&quot; | &quot;Y&quot; | &quot;Z&quot;\nprivate static final long L_UPALPHA = 0L;\nprivate static final long H_UPALPHA = 0x7FFFFFEL; // highMask('A', 'Z');\n\n// lowalpha = &quot;a&quot; | &quot;b&quot; | &quot;c&quot; | &quot;d&quot; | &quot;e&quot; | &quot;f&quot; | &quot;g&quot; | &quot;h&quot; | &quot;i&quot; |\n//            &quot;j&quot; | &quot;k&quot; | &quot;l&quot; | &quot;m&quot; | &quot;n&quot; | &quot;o&quot; | &quot;p&quot; | &quot;q&quot; | &quot;r&quot; |\n//            &quot;s&quot; | &quot;t&quot; | &quot;u&quot; | &quot;v&quot; | &quot;w&quot; | &quot;x&quot; | &quot;y&quot; | &quot;z&quot;\nprivate static final long L_LOWALPHA = 0L;\nprivate static final long H_LOWALPHA = 0x7FFFFFE00000000L; // highMask('a', 'z');\n\n// alpha         = lowalpha | upalpha\nprivate static final long L_ALPHA = L_LOWALPHA | L_UPALPHA;\nprivate static final long H_ALPHA = H_LOWALPHA | H_UPALPHA;\n\n// alphanum      = alpha | digit\nprivate static final long L_ALPHANUM = L_DIGIT | L_ALPHA;\nprivate static final long H_ALPHANUM = H_DIGIT | H_ALPHA;\n\n// hex           = digit | &quot;A&quot; | &quot;B&quot; | &quot;C&quot; | &quot;D&quot; | &quot;E&quot; | &quot;F&quot; |\n//                         &quot;a&quot; | &quot;b&quot; | &quot;c&quot; | &quot;d&quot; | &quot;e&quot; | &quot;f&quot;\nprivate static final long L_HEX = L_DIGIT;\nprivate static final long H_HEX = 0x7E0000007EL; // highMask('A', 'F') | highMask('a', 'f');\n\n// mark          = &quot;-&quot; | &quot;_&quot; | &quot;.&quot; | &quot;!&quot; | &quot;~&quot; | &quot;*&quot; | &quot;'&quot; |\n//                 &quot;(&quot; | &quot;)&quot;\nprivate static final long L_MARK = 0x678200000000L; // lowMask(&quot;-_.!~*'()&quot;);\nprivate static final long H_MARK = 0x4000000080000000L; // highMask(&quot;-_.!~*'()&quot;);\n\n// unreserved    = alphanum | mark\nprivate static final long L_UNRESERVED = L_ALPHANUM | L_MARK;\nprivate static final long H_UNRESERVED = H_ALPHANUM | H_MARK;\n\n// reserved      = &quot;;&quot; | &quot;/&quot; | &quot;?&quot; | &quot;:&quot; | &quot;@&quot; | &quot;&amp;&quot; | &quot;=&quot; | &quot;+&quot; |\n//                 &quot;$&quot; | &quot;,&quot; | &quot;[&quot; | &quot;]&quot;\n// Added per RFC2732: &quot;[&quot;, &quot;]&quot;\nprivate static final long L_RESERVED = 0xAC00985000000000L; // lowMask(&quot;;/?:@&amp;=+$,[]&quot;);\nprivate static final long H_RESERVED = 0x28000001L; // highMask(&quot;;/?:@&amp;=+$,[]&quot;);\n\n// The zero'th bit is used to indicate that escape pairs and non-US-ASCII\n// characters are allowed; this is handled by the scanEscape method below.\nprivate static final long L_ESCAPED = 1L;\nprivate static final long H_ESCAPED = 0L;\n\n// uric          = reserved | unreserved | escaped\nprivate static final long L_URIC = L_RESERVED | L_UNRESERVED | L_ESCAPED;\nprivate static final long H_URIC = H_RESERVED | H_UNRESERVED | H_ESCAPED;\n\n// pchar         = unreserved | escaped |\n//                 &quot;:&quot; | &quot;@&quot; | &quot;&amp;&quot; | &quot;=&quot; | &quot;+&quot; | &quot;$&quot; | &quot;,&quot;\nprivate static final long L_PCHAR\n    = L_UNRESERVED | L_ESCAPED | 0x2400185000000000L; // lowMask(&quot;:@&amp;=+$,&quot;);\nprivate static final long H_PCHAR\n    = H_UNRESERVED | H_ESCAPED | 0x1L; // highMask(&quot;:@&amp;=+$,&quot;);\n\n// All valid path characters\nprivate static final long L_PATH = L_PCHAR | 0x800800000000000L; // lowMask(&quot;;/&quot;);\nprivate static final long H_PATH = H_PCHAR; // highMask(&quot;;/&quot;) == 0x0L;\n\n// Dash, for use in domainlabel and toplabel\nprivate static final long L_DASH = 0x200000000000L; // lowMask(&quot;-&quot;);\nprivate static final long H_DASH = 0x0L; // highMask(&quot;-&quot;);\n\n// Dot, for use in hostnames\nprivate static final long L_DOT = 0x400000000000L; // lowMask(&quot;.&quot;);\nprivate static final long H_DOT = 0x0L; // highMask(&quot;.&quot;);\n\n// userinfo      = *( unreserved | escaped |\n//                    &quot;;&quot; | &quot;:&quot; | &quot;&amp;&quot; | &quot;=&quot; | &quot;+&quot; | &quot;$&quot; | &quot;,&quot; )\nprivate static final long L_USERINFO\n    = L_UNRESERVED | L_ESCAPED | 0x2C00185000000000L; // lowMask(&quot;;:&amp;=+$,&quot;);\nprivate static final long H_USERINFO\n    = H_UNRESERVED | H_ESCAPED; // | highMask(&quot;;:&amp;=+$,&quot;) == 0L;\n\n// reg_name      = 1*( unreserved | escaped | &quot;$&quot; | &quot;,&quot; |\n//                     &quot;;&quot; | &quot;:&quot; | &quot;@&quot; | &quot;&amp;&quot; | &quot;=&quot; | &quot;+&quot; )\nprivate static final long L_REG_NAME\n    = L_UNRESERVED | L_ESCAPED | 0x2C00185000000000L; // lowMask(&quot;$,;:@&amp;=+&quot;);\nprivate static final long H_REG_NAME\n    = H_UNRESERVED | H_ESCAPED | 0x1L; // highMask(&quot;$,;:@&amp;=+&quot;);\n\n// All valid characters for server-based authorities\nprivate static final long L_SERVER\n    = L_USERINFO | L_ALPHANUM | L_DASH | 0x400400000000000L; // lowMask(&quot;.:@[]&quot;);\nprivate static final long H_SERVER\n    = H_USERINFO | H_ALPHANUM | H_DASH | 0x28000001L; // highMask(&quot;.:@[]&quot;);\n\n// Special case of server authority that represents an IPv6 address\n// In this case, a % does not signify an escape sequence\nprivate static final long L_SERVER_PERCENT\n    = L_SERVER | 0x2000000000L; // lowMask(&quot;%&quot;);\nprivate static final long H_SERVER_PERCENT\n    = H_SERVER; // | highMask(&quot;%&quot;) == 0L;\n\n// scheme        = alpha *( alpha | digit | &quot;+&quot; | &quot;-&quot; | &quot;.&quot; )\nprivate static final long L_SCHEME = L_ALPHA | L_DIGIT | 0x680000000000L; // lowMask(&quot;+-.&quot;);\nprivate static final long H_SCHEME = H_ALPHA | H_DIGIT; // | highMask(&quot;+-.&quot;) == 0L\n\n// scope_id = alpha | digit | &quot;_&quot; | &quot;.&quot;\nprivate static final long L_SCOPE_ID\n    = L_ALPHANUM | 0x400000000000L; // lowMask(&quot;_.&quot;);\nprivate static final long H_SCOPE_ID\n    = H_ALPHANUM | 0x80000000L; // highMask(&quot;_.&quot;);\n\n// -- Escaping and encoding --\n\nprivate static final char[] hexDigits = {\n    '0', '1', '2', '3', '4', '5', '6', '7',\n    '8', '9', 'A', 'B', 'C', 'D', 'E', 'F'\n};\n</code></pre>\n<p>So to implement this <code>java.net.URI</code> must to be replaced with one that includes '|' in the following mask. Also a fork of netty that uses this variant of <code>java.net.URI</code> will need to be created:</p>\n<pre><code>private static final long L_MARK = 0x678200000000L; // lowMask(&quot;-_.!~*'()&quot;);\nprivate static final long H_MARK = 0x4000000080000000L; // highMask(&quot;-_.!~*'()&quot;);\n</code></pre>\n<p>Stack from netty <code>resolvePath()</code> to to <code>URI$Parser.match()</code> - from callee to caller:</p>\n<pre><code>URI.match(char, long, long) line: 2637  \nURI$Parser.scan(int, int, long, long) line: 3120    \nURI$Parser.checkChars(int, int, long, long, String) line: 3143  \nURI$Parser.checkChar(int, long, long, String) line: 3155    \nURI$Parser.parse(boolean) line: 3170    \nURI.&lt;init&gt;(String) line: 623    \nURI.create(String) line: 904    \nHttpOperations&lt;INBOUND,OUTBOUND&gt;.resolvePath(String) line: 429  \n \n</code></pre>\n"}],"owner":{"account_id":9797098,"reputation":582,"user_id":7259705,"display_name":"Jonathan Hagen"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":463,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75814040,"answer_count":1,"score":1,"last_activity_date":1679497797,"creation_date":1679075399,"question_id":75770686,"body_markdown":"I have implemented spring webflux controller like this:\r\n```\r\n@GetMapping(path = &quot;/test&quot;, produces = APPLICATION_JSON_VALUE)\r\n    public Mono&lt;String&gt; getData(ServerHttpRequest serverHttpRequest) {\r\n        String param = serverHttpRequest.getURI().getRawQuery();\r\n        return Mono.just(&quot;TEST&quot;);\r\n    }\r\n```\r\nMy goal is to get the whole query and do something with it. For instance, if url is `http://localhost:8080/test?identifier=test|code`, I want `identifier=test|code` string and pass directly to another server.\r\n\r\nHowever, when I send url with some special character such as pipe (|), I get 400 Bad request.\r\n\r\nAll the answers that I could find was that client should encode special character (for pipe, it should be %7C). However, I want to see if there is any option for server side to handle.\r\n\r\nMy app uses Netty instead of Tomcat (not sure if this is helpful). I saw something about &quot;relaxedQueryChar&quot; about Tomcat but I don&#39;t think it is related to Netty.\r\n\r\nHow can I handle this on server side?\r\n\r\n","title":"How to handle special character (such as pipe) for spring webflux controller on server side?","body":"<p>I have implemented spring webflux controller like this:</p>\n<pre><code>@GetMapping(path = &quot;/test&quot;, produces = APPLICATION_JSON_VALUE)\n    public Mono&lt;String&gt; getData(ServerHttpRequest serverHttpRequest) {\n        String param = serverHttpRequest.getURI().getRawQuery();\n        return Mono.just(&quot;TEST&quot;);\n    }\n</code></pre>\n<p>My goal is to get the whole query and do something with it. For instance, if url is <code>http://localhost:8080/test?identifier=test|code</code>, I want <code>identifier=test|code</code> string and pass directly to another server.</p>\n<p>However, when I send url with some special character such as pipe (|), I get 400 Bad request.</p>\n<p>All the answers that I could find was that client should encode special character (for pipe, it should be %7C). However, I want to see if there is any option for server side to handle.</p>\n<p>My app uses Netty instead of Tomcat (not sure if this is helpful). I saw something about &quot;relaxedQueryChar&quot; about Tomcat but I don't think it is related to Netty.</p>\n<p>How can I handle this on server side?</p>\n"},{"tags":["java","mapstruct"],"comments":[{"owner":{"account_id":17835,"reputation":303895,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":0,"creation_date":1679480004,"post_id":75810882,"comment_id":133728141,"body_markdown":"Does one of them extend the other? If they don&#39;t then you definitely can&#39;t cast one to the other. Casting in Java doesn&#39;t change objects: it only changes the type that a reference is assumed to be (and checks that the assumptions is correctly, usually). In short: they are probably not *the same* in any sense that Java knows or cares about.","body":"Does one of them extend the other? If they don&#39;t then you definitely can&#39;t cast one to the other. Casting in Java doesn&#39;t change objects: it only changes the type that a reference is assumed to be (and checks that the assumptions is correctly, usually). In short: they are probably not <i>the same</i> in any sense that Java knows or cares about."},{"owner":{"account_id":17795939,"reputation":117,"user_id":12923772,"display_name":"Paco Pinazo Guna"},"score":0,"creation_date":1679480063,"post_id":75810882,"comment_id":133728156,"body_markdown":"No, they don&#39;t extend... Is there any way to obtain this?","body":"No, they don&#39;t extend... Is there any way to obtain this?"},{"owner":{"account_id":17835,"reputation":303895,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":0,"creation_date":1679480601,"post_id":75810882,"comment_id":133728281,"body_markdown":"Something like mapstruct will likely be necessary, so I suggest you [edit] your question to describe what you tried there and how/why it failed.","body":"Something like mapstruct will likely be necessary, so I suggest you <a href=\"https://stackoverflow.com/posts/75810882/edit\">edit</a> your question to describe what you tried there and how/why it failed."},{"owner":{"account_id":17795939,"reputation":117,"user_id":12923772,"display_name":"Paco Pinazo Guna"},"score":0,"creation_date":1679481064,"post_id":75810882,"comment_id":133728406,"body_markdown":"Edited, added the class I&#39;ve tried","body":"Edited, added the class I&#39;ve tried"},{"owner":{"account_id":39208,"reputation":251240,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"score":0,"creation_date":1679481186,"post_id":75810882,"comment_id":133728433,"body_markdown":"Classes in different packages are … distinct classes. Unless one extends the other, you cannot cast them.","body":"Classes in different packages are … distinct classes. Unless one extends the other, you cannot cast them."},{"owner":{"account_id":17006998,"reputation":713,"user_id":12302982,"display_name":"Igor Flakiewicz"},"score":0,"creation_date":1679481245,"post_id":75810882,"comment_id":133728446,"body_markdown":"You can use jackson to convert it to json then convert that json into the object from another package.","body":"You can use jackson to convert it to json then convert that json into the object from another package."},{"owner":{"account_id":248321,"reputation":62665,"user_id":523612,"accept_rate":100,"display_name":"Karl Knechtel"},"score":0,"creation_date":1679481494,"post_id":75810882,"comment_id":133728503,"body_markdown":"If it&#39;s in a different package, then **it is a different type**, and it **does not matter** if the name is the same. If the types are not related by inheritance, then casting will not be possible.","body":"If it&#39;s in a different package, then <b>it is a different type</b>, and it <b>does not matter</b> if the name is the same. If the types are not related by inheritance, then casting will not be possible."},{"owner":{"account_id":248321,"reputation":62665,"user_id":523612,"accept_rate":100,"display_name":"Karl Knechtel"},"score":0,"creation_date":1679481590,"post_id":75810882,"comment_id":133728521,"body_markdown":"&quot;In reality, they are the same, but with each project, I generate a PagedDataAndSortDto wich changes the package&quot; - **Don&#39;t do that. That is the cause of the problem.** Instead, just import and use the same single definition in the places that need it. That&#39;s supposed to be part of the point of writing classes, right? Code reuse?","body":"&quot;In reality, they are the same, but with each project, I generate a PagedDataAndSortDto wich changes the package&quot; - <b>Don&#39;t do that. That is the cause of the problem.</b> Instead, just import and use the same single definition in the places that need it. That&#39;s supposed to be part of the point of writing classes, right? Code reuse?"},{"owner":{"account_id":18420841,"reputation":1402,"user_id":13418510,"display_name":"TomStroemer"},"score":0,"creation_date":1679497568,"post_id":75810882,"comment_id":133733275,"body_markdown":"Why not create a simple library for all your common classes and use them in all your projects? Or do you have a &quot;master project&quot; that you use in every other one - put it there...","body":"Why not create a simple library for all your common classes and use them in all your projects? Or do you have a &quot;master project&quot; that you use in every other one - put it there..."}],"answers":[{"tags":[],"owner":{"account_id":12037792,"reputation":1783,"user_id":8805742,"display_name":"mahfuj asif"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1679481230,"creation_date":1679481230,"answer_id":75811110,"question_id":75810882,"body_markdown":"You can convert the object to json string first then convert back to object using `ObjectMapper`. If you have a object named &#39;a.Pojo&#39; and want to convert to `b.Ano`, you can do the following\r\n\r\n```\r\nObjectMapper objectMapper = new ObjectMapper();\r\nAno ano = objectMapper.readValue(objectMapper.writeValueAsString(pojo), Ano.class);\r\n```","title":"Casting an object to the same type but different package","body":"<p>You can convert the object to json string first then convert back to object using <code>ObjectMapper</code>. If you have a object named 'a.Pojo' and want to convert to <code>b.Ano</code>, you can do the following</p>\n<pre><code>ObjectMapper objectMapper = new ObjectMapper();\nAno ano = objectMapper.readValue(objectMapper.writeValueAsString(pojo), Ano.class);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":968743,"reputation":3452,"user_id":991710,"accept_rate":82,"display_name":"filpa"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1679497599,"creation_date":1679497599,"answer_id":75814000,"question_id":75810882,"body_markdown":"IMO, using Jackson&#39;s `ObjectMapper` is shoving the problem under the rug.\r\n\r\nYou have two separate classes that just *happen* to look the same. If one of these changes, due to:\r\n\r\n* Developer error\r\n* A bug in your code generation code \r\n* Any other reason\r\n\r\nthen the `ObjectMapper` approach might end up causing a lot of frustration due to some hard-to-find bugs (&quot;why is this field null? I set it!&quot;).\r\n\r\nIdeally, you would have a &quot;leading&quot; service which provides the models for its domain and exports these as a standalone library so that any other service that uses them is in agreement about what the objects look like.\r\n\r\nIf the refactoring hurdle is too great for the above approach, I would still recommend MapStruct for this use case instead of `ObjectMapper` so as to avoid unnecessary overhead from the reflection shenanigans that `ObjectMapper` performs and have a bit more type/field-safety when mapping between objects.","title":"Casting an object to the same type but different package","body":"<p>IMO, using Jackson's <code>ObjectMapper</code> is shoving the problem under the rug.</p>\n<p>You have two separate classes that just <em>happen</em> to look the same. If one of these changes, due to:</p>\n<ul>\n<li>Developer error</li>\n<li>A bug in your code generation code</li>\n<li>Any other reason</li>\n</ul>\n<p>then the <code>ObjectMapper</code> approach might end up causing a lot of frustration due to some hard-to-find bugs (&quot;why is this field null? I set it!&quot;).</p>\n<p>Ideally, you would have a &quot;leading&quot; service which provides the models for its domain and exports these as a standalone library so that any other service that uses them is in agreement about what the objects look like.</p>\n<p>If the refactoring hurdle is too great for the above approach, I would still recommend MapStruct for this use case instead of <code>ObjectMapper</code> so as to avoid unnecessary overhead from the reflection shenanigans that <code>ObjectMapper</code> performs and have a bit more type/field-safety when mapping between objects.</p>\n"}],"owner":{"account_id":17795939,"reputation":117,"user_id":12923772,"display_name":"Paco Pinazo Guna"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":452,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75811110,"answer_count":2,"score":0,"last_activity_date":1679497599,"creation_date":1679479834,"question_id":75810882,"body_markdown":"I have an object, let&#39;s call it X who type is:\r\n```\r\nen.testmodule.utils.gestionmoduleone.model.PagedDataAndSortDto\r\n```\r\nI want to cast it to:\r\n```\r\nen.utilities.dto.PagedDataAndSortDto (This dto is in another project)\r\n```\r\nIn reality, they are the same, but with each project, I generate a PagedDataAndSortDto which changes the package, example:\r\n\r\nProject 1:\r\n```\r\nen.testmodule.utils.gestionmoduleone.model.PagedDataAndSortDto\r\n```\r\n\r\nProject 2:\r\n```\r\nen.testmoduletwo.utils.gestionmoduleone.model.PagedDataAndSortDto\r\n```\r\n\r\nIs there any way I can cast the first type to the standard in the another project?\r\n\r\nI have tried using Mapstruct, but you can&#39;t use generic values there.\r\n\r\nThis is what I have tried:\r\n\r\n \r\n\r\n       @Mapper(componentModel = &quot;spring&quot;)\r\n    public abstract class PagedDataAndSortDtoMapper&lt;T, S&gt; {\r\n        @Mapping(target = &quot;NP&quot;, source = &quot;NP&quot;)\r\n        @Mapping(target = &quot;PP&quot;, source = &quot;PP&quot;)\r\n        @Mapping(target = &quot;PN&quot;, source = &quot;PN&quot;)\r\n        public abstract T fromHuerfana(S input);\r\n    \r\n    }\r\n\r\nAnd this is the error I&#39;ve got:\r\n\r\n&gt;Can&#39;t generate mapping method for a generic type variable source","title":"Casting an object to the same type but different package","body":"<p>I have an object, let's call it X who type is:</p>\n<pre><code>en.testmodule.utils.gestionmoduleone.model.PagedDataAndSortDto\n</code></pre>\n<p>I want to cast it to:</p>\n<pre><code>en.utilities.dto.PagedDataAndSortDto (This dto is in another project)\n</code></pre>\n<p>In reality, they are the same, but with each project, I generate a PagedDataAndSortDto which changes the package, example:</p>\n<p>Project 1:</p>\n<pre><code>en.testmodule.utils.gestionmoduleone.model.PagedDataAndSortDto\n</code></pre>\n<p>Project 2:</p>\n<pre><code>en.testmoduletwo.utils.gestionmoduleone.model.PagedDataAndSortDto\n</code></pre>\n<p>Is there any way I can cast the first type to the standard in the another project?</p>\n<p>I have tried using Mapstruct, but you can't use generic values there.</p>\n<p>This is what I have tried:</p>\n<pre><code>   @Mapper(componentModel = &quot;spring&quot;)\npublic abstract class PagedDataAndSortDtoMapper&lt;T, S&gt; {\n    @Mapping(target = &quot;NP&quot;, source = &quot;NP&quot;)\n    @Mapping(target = &quot;PP&quot;, source = &quot;PP&quot;)\n    @Mapping(target = &quot;PN&quot;, source = &quot;PN&quot;)\n    public abstract T fromHuerfana(S input);\n\n}\n</code></pre>\n<p>And this is the error I've got:</p>\n<blockquote>\n<p>Can't generate mapping method for a generic type variable source</p>\n</blockquote>\n"},{"tags":["java","parsing","decimal","number-formatting","decimalformat"],"comments":[{"owner":{"account_id":3023214,"reputation":20362,"user_id":2563754,"display_name":"Seelenvirtuose"},"score":1,"creation_date":1679167721,"post_id":75778113,"comment_id":133674471,"body_markdown":"Because the `,` is used as a _thousands separator_ in US and British english formats, I suppose this is simply ignored in the input string.","body":"Because the <code>,</code> is used as a <i>thousands separator</i> in US and British english formats, I suppose this is simply ignored in the input string."}],"answers":[{"tags":[],"owner":{"account_id":1992310,"reputation":11172,"user_id":1786065,"accept_rate":91,"display_name":"Rogue"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1679497163,"creation_date":1679168598,"answer_id":75778257,"question_id":75778113,"body_markdown":"`DecimalFormat` has an internal method, `#subparse`, which takes care of interpreting separators and other special characters (dependent on the `Locale` that you have passed in). It will track the characters of interest (like digits, the decimal separator, or currency symbols), but of particular interest is how &quot;grouping separators&quot; (e.g. `,` in UK, `.` in France) are handled when doing this parse:\r\n\r\n    char grouping = symbols.getGroupingSeparator();\r\n    //...\r\n    for (; position &lt; text.length(); ++position) {\r\n        char ch = text.charAt(position);\r\n        //...\r\n        } else if (!isExponent &amp;&amp; ch == grouping &amp;&amp; isGroupingUsed()) {\r\n            if (sawDecimal) {\r\n                break;\r\n            }\r\n            // Ignore grouping characters, if we are using them, but\r\n            // require that they be followed by a digit.  Otherwise\r\n            // we backup and reprocess them.\r\n            backup = position;\r\n        } //...\r\n    }\r\n\r\nSource: [DecimalFormat.java:2290](https://github.com/openjdk/jdk/blob/jdk-21+14/src/java.base/share/classes/java/text/DecimalFormat.java#L2465-L2472) (Note: The above was [refactored](https://github.com/openjdk/jdk/commit/4a28e27fd2f4f6f8ff2142e9f4696f622a9ecb1f#diff-2c34b675133fa96e6f7d7ebe4bf58f6a6680ec5cc4b96e0b8853c2885ee2a712) into `#subparseNumber` as of JDK 12)\r\n\r\nNote the `break` means to finish parsing the number, and the lack of appending to `digitList` means they effectively ignore these grouping separators. Further, the ignoring of these grouping separators is not dependent on how many digits have been parsed since the last separator. The only conditional based on previous separators is if the grouping separator appears _after_ the decimal separator, hence the `break`.","title":"Why is &quot;1,2,3&quot; parsed as 123 by Java&#39;s en-US DecimalFormat?","body":"<p><code>DecimalFormat</code> has an internal method, <code>#subparse</code>, which takes care of interpreting separators and other special characters (dependent on the <code>Locale</code> that you have passed in). It will track the characters of interest (like digits, the decimal separator, or currency symbols), but of particular interest is how &quot;grouping separators&quot; (e.g. <code>,</code> in UK, <code>.</code> in France) are handled when doing this parse:</p>\n<pre><code>char grouping = symbols.getGroupingSeparator();\n//...\nfor (; position &lt; text.length(); ++position) {\n    char ch = text.charAt(position);\n    //...\n    } else if (!isExponent &amp;&amp; ch == grouping &amp;&amp; isGroupingUsed()) {\n        if (sawDecimal) {\n            break;\n        }\n        // Ignore grouping characters, if we are using them, but\n        // require that they be followed by a digit.  Otherwise\n        // we backup and reprocess them.\n        backup = position;\n    } //...\n}\n</code></pre>\n<p>Source: <a href=\"https://github.com/openjdk/jdk/blob/jdk-21+14/src/java.base/share/classes/java/text/DecimalFormat.java#L2465-L2472\" rel=\"nofollow noreferrer\">DecimalFormat.java:2290</a> (Note: The above was <a href=\"https://github.com/openjdk/jdk/commit/4a28e27fd2f4f6f8ff2142e9f4696f622a9ecb1f#diff-2c34b675133fa96e6f7d7ebe4bf58f6a6680ec5cc4b96e0b8853c2885ee2a712\" rel=\"nofollow noreferrer\">refactored</a> into <code>#subparseNumber</code> as of JDK 12)</p>\n<p>Note the <code>break</code> means to finish parsing the number, and the lack of appending to <code>digitList</code> means they effectively ignore these grouping separators. Further, the ignoring of these grouping separators is not dependent on how many digits have been parsed since the last separator. The only conditional based on previous separators is if the grouping separator appears <em>after</em> the decimal separator, hence the <code>break</code>.</p>\n"},{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1679247198,"creation_date":1679225724,"answer_id":75781688,"question_id":75778113,"body_markdown":"&gt;  This explains &quot;how&quot; the parsing code does that. But not &quot;why&quot;. Is it a bug? Is &quot;1,2,3&quot; a valid number? \r\n\r\nThe why is that they decided to treat the &quot;grouping&quot; character (which in EN locales is `&#39;,&#39;`) leniently when parsing.  After all, the use of grouping characters ... and the number of digits in the groups ... are only conventions.  Lenient parsing is generally a good idea when dealing with inputs whose meaning is not ambiguous.  (Though that is debatable here.)\r\n\r\nBasically, in most contexts the grouping character is quietly ignored when parsing.  The [javadoc][1] for the `DecimalFormat.parse` method doesn&#39;t mention this.  However, the javadoc is largely silent on the format that the method accepts, so the behavior is not inconsistent with the documentation.\r\n\r\nThis was reported as bug [JDK-7049000][2] against Java 6 back in 2011, but you can see the bug report has received no attention.\r\n\r\nAnd here&#39;s the problem.  If they did try to do something to fix this bug / feature, the fix would be liable to cause problems for existing applications.  These apps could reject inputs that they previously accepted ... for no particularly good reason from the users&#39; point of view.\r\n\r\n-------------------\r\n\r\nSo, my advice would be to accept `DecimalFormat` for what it is.  If you particularly don&#39;t want to accept numbers with grouping characters:\r\n\r\n  - use `DecimalFormal.setDecimalFormatSymbols` to set the grouping separator to some character that can never appear, or\r\n\r\n  - validate or split your input numbers with (say) a regex prior to parsing them.\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/text/DecimalFormat.html#parse(java.lang.String,java.text.ParsePosition)\r\n  [2]: https://bugs.openjdk.org/browse/JDK-7049000","title":"Why is &quot;1,2,3&quot; parsed as 123 by Java&#39;s en-US DecimalFormat?","body":"<blockquote>\n<p>This explains &quot;how&quot; the parsing code does that. But not &quot;why&quot;. Is it a bug? Is &quot;1,2,3&quot; a valid number?</p>\n</blockquote>\n<p>The why is that they decided to treat the &quot;grouping&quot; character (which in EN locales is <code>','</code>) leniently when parsing.  After all, the use of grouping characters ... and the number of digits in the groups ... are only conventions.  Lenient parsing is generally a good idea when dealing with inputs whose meaning is not ambiguous.  (Though that is debatable here.)</p>\n<p>Basically, in most contexts the grouping character is quietly ignored when parsing.  The <a href=\"https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/text/DecimalFormat.html#parse(java.lang.String,java.text.ParsePosition)\" rel=\"nofollow noreferrer\">javadoc</a> for the <code>DecimalFormat.parse</code> method doesn't mention this.  However, the javadoc is largely silent on the format that the method accepts, so the behavior is not inconsistent with the documentation.</p>\n<p>This was reported as bug <a href=\"https://bugs.openjdk.org/browse/JDK-7049000\" rel=\"nofollow noreferrer\">JDK-7049000</a> against Java 6 back in 2011, but you can see the bug report has received no attention.</p>\n<p>And here's the problem.  If they did try to do something to fix this bug / feature, the fix would be liable to cause problems for existing applications.  These apps could reject inputs that they previously accepted ... for no particularly good reason from the users' point of view.</p>\n<hr />\n<p>So, my advice would be to accept <code>DecimalFormat</code> for what it is.  If you particularly don't want to accept numbers with grouping characters:</p>\n<ul>\n<li><p>use <code>DecimalFormal.setDecimalFormatSymbols</code> to set the grouping separator to some character that can never appear, or</p>\n</li>\n<li><p>validate or split your input numbers with (say) a regex prior to parsing them.</p>\n</li>\n</ul>\n"}],"owner":{"account_id":402847,"reputation":2233,"user_id":770254,"accept_rate":56,"display_name":"bruno"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":146,"favorite_count":0,"down_vote_count":2,"up_vote_count":3,"answer_count":2,"score":1,"last_activity_date":1679497163,"creation_date":1679166919,"question_id":75778113,"body_markdown":"Parsing &quot;_1,2,3_&quot; using the _en-US_&#39;s decimal format results in the number 123.\r\n\r\n```java\r\nimport java.text.*;\r\nimport java.util.Locale;\r\n\r\npublic class Main{\r\n\r\n    public static void main(String[] args) throws ParseException {\r\n\r\n        final String text = &quot;1,2,3&quot;;\r\n        final int weirdResult = 123;\r\n\r\n        final NumberFormat usDecimalFormat = DecimalFormat.getNumberInstance(Locale.US);\r\n        final Number parsedNumber = usDecimalFormat.parse(text);\r\n\r\n        if(parsedNumber.doubleValue() == weirdResult){\r\n            System.out.println(text + &quot; is bizarrely parsed as &quot; + weirdResult);\r\n        } else {\r\n            System.out.println(text + &quot; is parsed as &quot; + parsedNumber);\r\n        }\r\n    }\r\n}\r\n```\r\n[Run on Ideone](https://ideone.com/xaMmrq)\r\n\r\nThe above code actually prints `1,2,3 is bizarrely parsed as 123`.\r\n\r\nHow is &quot;1,2,3&quot; a valid number and why its value is 123? \r\n","title":"Why is &quot;1,2,3&quot; parsed as 123 by Java&#39;s en-US DecimalFormat?","body":"<p>Parsing &quot;<em>1,2,3</em>&quot; using the <em>en-US</em>'s decimal format results in the number 123.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.text.*;\nimport java.util.Locale;\n\npublic class Main{\n\n    public static void main(String[] args) throws ParseException {\n\n        final String text = &quot;1,2,3&quot;;\n        final int weirdResult = 123;\n\n        final NumberFormat usDecimalFormat = DecimalFormat.getNumberInstance(Locale.US);\n        final Number parsedNumber = usDecimalFormat.parse(text);\n\n        if(parsedNumber.doubleValue() == weirdResult){\n            System.out.println(text + &quot; is bizarrely parsed as &quot; + weirdResult);\n        } else {\n            System.out.println(text + &quot; is parsed as &quot; + parsedNumber);\n        }\n    }\n}\n</code></pre>\n<p><a href=\"https://ideone.com/xaMmrq\" rel=\"nofollow noreferrer\">Run on Ideone</a></p>\n<p>The above code actually prints <code>1,2,3 is bizarrely parsed as 123</code>.</p>\n<p>How is &quot;1,2,3&quot; a valid number and why its value is 123?</p>\n"},{"tags":["java","security","upcasting"],"comments":[{"owner":{"account_id":3557625,"reputation":198996,"user_id":2970947,"display_name":"Elliott Frisch"},"score":1,"creation_date":1679442730,"post_id":75807321,"comment_id":133722680,"body_markdown":"If it didn&#39;t work that way, `Object.toString()` would be the only `toString()` - do you think that would be good? Why not? BTW, `private` methods are not inherited. So that&#39;s even less relevant.","body":"If it didn&#39;t work that way, <code>Object.toString()</code> would be the only <code>toString()</code> - do you think that would be good? Why not? BTW, <code>private</code> methods are not inherited. So that&#39;s even less relevant."},{"owner":{"account_id":4728704,"reputation":17022,"user_id":3824919,"display_name":"Tom"},"score":1,"creation_date":1679442893,"post_id":75807321,"comment_id":133722710,"body_markdown":"When I say &quot;acrastt, state your name&quot;, you would say &quot;acrastt&quot;. When I look at you and say &quot;human, state your name&quot;, would you then say &quot;human&quot; or &quot;acrastt&quot;? This behaviour is what polymorphism is all about.","body":"When I say &quot;acrastt, state your name&quot;, you would say &quot;acrastt&quot;. When I look at you and say &quot;human, state your name&quot;, would you then say &quot;human&quot; or &quot;acrastt&quot;? This behaviour is what polymorphism is all about."}],"answers":[{"tags":[],"owner":{"account_id":18498094,"reputation":9,"user_id":17702835,"display_name":"David Ruiz"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1679497106,"creation_date":1679443880,"answer_id":75807410,"question_id":75807321,"body_markdown":"This is called [polymorphism](https://www.w3schools.com/java/java_polymorphism.asp#:~:text=Polymorphism%20means%20%22many%20forms%22%2C,methods%20to%20perform%20different%20tasks). \r\n\r\nIt requires 3 things to activate: \r\n1.Upcasting\r\n2.Inheritance\r\n3.Method overriding.\r\n\r\nLooking at your example you can find all 3 things are present:\r\n1. Upcasting is happening when invoke(Foo foo) takes Bar as input. The method recognizes this as a Foo object even though it stores a child of Foo. \r\n2. Inheritance is present since Bar is inheriting Foo.\r\n3. Method overriding is present because the method doSomething() has the same method signatuee for both Foo and Bar. \r\n\r\nFinally, this means that Java will let polymorphism take effect and the method that will be called is that of the child (Bar) and not that of Foo. \r\n\r\nRegarding your question on security, notice that the two methods you wrote writeData don&#39;t have the same signature. Additionally, you cannot override private methods in Java. These are two of the conditions of polymorphism to kick in. For those reasons it seems like your function is secure. ","title":"Will upcasting classes affect the method call? Why? Security issues?","body":"<p>This is called <a href=\"https://www.w3schools.com/java/java_polymorphism.asp#:%7E:text=Polymorphism%20means%20%22many%20forms%22%2C,methods%20to%20perform%20different%20tasks\" rel=\"nofollow noreferrer\">polymorphism</a>.</p>\n<p>It requires 3 things to activate:\n1.Upcasting\n2.Inheritance\n3.Method overriding.</p>\n<p>Looking at your example you can find all 3 things are present:</p>\n<ol>\n<li>Upcasting is happening when invoke(Foo foo) takes Bar as input. The method recognizes this as a Foo object even though it stores a child of Foo.</li>\n<li>Inheritance is present since Bar is inheriting Foo.</li>\n<li>Method overriding is present because the method doSomething() has the same method signatuee for both Foo and Bar.</li>\n</ol>\n<p>Finally, this means that Java will let polymorphism take effect and the method that will be called is that of the child (Bar) and not that of Foo.</p>\n<p>Regarding your question on security, notice that the two methods you wrote writeData don't have the same signature. Additionally, you cannot override private methods in Java. These are two of the conditions of polymorphism to kick in. For those reasons it seems like your function is secure.</p>\n"},{"tags":[],"owner":{"account_id":27393528,"reputation":353,"user_id":20896122,"display_name":"undefined symbol"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1679448979,"creation_date":1679448979,"answer_id":75807773,"question_id":75807321,"body_markdown":"&gt; since it&#39;s a Foo typed Object\r\n\r\nThis is the heart of your misconception. I assume you said it&#39;s &#39;Foo type&#39; because of the &#39;Foo foo&#39; declaration.\r\n\r\nThe object is actually a Bar.  It was created by `new Bar()`.  The object is really, and will be for as long as it exists, a Bar.\r\n\r\nA Bar is also a Foo, of course - that it what inheriting from Foo means. Nevertheless, its behaviour is that of a Bar.\r\n\r\nYou have a number of Foo variables - that is, variables that can contain a reference to a Foo object.  But the variable being a Foo variable does not make the Bar-ness of the actual object go away.\r\n\r\n","title":"Will upcasting classes affect the method call? Why? Security issues?","body":"<blockquote>\n<p>since it's a Foo typed Object</p>\n</blockquote>\n<p>This is the heart of your misconception. I assume you said it's 'Foo type' because of the 'Foo foo' declaration.</p>\n<p>The object is actually a Bar.  It was created by <code>new Bar()</code>.  The object is really, and will be for as long as it exists, a Bar.</p>\n<p>A Bar is also a Foo, of course - that it what inheriting from Foo means. Nevertheless, its behaviour is that of a Bar.</p>\n<p>You have a number of Foo variables - that is, variables that can contain a reference to a Foo object.  But the variable being a Foo variable does not make the Bar-ness of the actual object go away.</p>\n"}],"owner":{"account_id":24877651,"reputation":106,"user_id":18751272,"display_name":"acrastt"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":58,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1679474438,"accepted_answer_id":75807773,"answer_count":2,"score":0,"last_activity_date":1679497106,"creation_date":1679442580,"question_id":75807321,"body_markdown":"Let&#39;s have the specified code:\r\n```java\r\nclass Foo {\r\n    public void doSomething(){\r\n        System.out.println(&quot;Foo&quot;);\r\n    }\r\n}\r\nclass Bar extends Foo{\r\n    @Override\r\n    public void doSomething(){\r\n        System.out.println(&quot;Bar&quot;);\r\n    }\r\n}\r\npublic class doFoo{\r\n    public static invoke(Foo foo){\r\n        foo.doSomething();\r\n    }\r\n    \r\n    public static void main(String[] args){\r\n        invoke(new Bar()); // Foo or Bar?\r\n    }\r\n}\r\n```\r\n\r\nI tried running the code and the output is:\r\n```\r\nBar\r\n```\r\nThen here&#39;s why I get confused.\r\n\r\nFirst if it prints out `Bar`, and invoke has argument type `Foo`, why won&#39;t print out `Foo` since it&#39;s a `Foo` typed Object? Since `Foo.doSomething()` should print out `Foo`?\r\n\r\nSecond if this prints out `Bar`, wouldn&#39;t there be some security issues? Let&#39;s say there&#39;s a private method called `writeData(Database database, Data data)` method and `writeData(Data data)` calling it. Or as the follows:\r\n``` java\r\npublic void writeData(Data data){\r\n    writeData(DEFAULT_DATABASE != null ? DEFAULT_DATABASE : initializeDatabaseAndGet();\r\n}\r\nprivate void writeData(Database database, Data data){\r\n    // Idk what to write...\r\n}\r\n```\r\nIn this I could invoke writeData using Reflection and my custom implementation of Database. With my implementation sending passwords/tokens and things to hack into the database?\r\n\r\nAm I misunderstanding things here?","title":"Will upcasting classes affect the method call? Why? Security issues?","body":"<p>Let's have the specified code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>class Foo {\n    public void doSomething(){\n        System.out.println(&quot;Foo&quot;);\n    }\n}\nclass Bar extends Foo{\n    @Override\n    public void doSomething(){\n        System.out.println(&quot;Bar&quot;);\n    }\n}\npublic class doFoo{\n    public static invoke(Foo foo){\n        foo.doSomething();\n    }\n    \n    public static void main(String[] args){\n        invoke(new Bar()); // Foo or Bar?\n    }\n}\n</code></pre>\n<p>I tried running the code and the output is:</p>\n<pre><code>Bar\n</code></pre>\n<p>Then here's why I get confused.</p>\n<p>First if it prints out <code>Bar</code>, and invoke has argument type <code>Foo</code>, why won't print out <code>Foo</code> since it's a <code>Foo</code> typed Object? Since <code>Foo.doSomething()</code> should print out <code>Foo</code>?</p>\n<p>Second if this prints out <code>Bar</code>, wouldn't there be some security issues? Let's say there's a private method called <code>writeData(Database database, Data data)</code> method and <code>writeData(Data data)</code> calling it. Or as the follows:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public void writeData(Data data){\n    writeData(DEFAULT_DATABASE != null ? DEFAULT_DATABASE : initializeDatabaseAndGet();\n}\nprivate void writeData(Database database, Data data){\n    // Idk what to write...\n}\n</code></pre>\n<p>In this I could invoke writeData using Reflection and my custom implementation of Database. With my implementation sending passwords/tokens and things to hack into the database?</p>\n<p>Am I misunderstanding things here?</p>\n"},{"tags":["java","spring","postgresql","spring-boot"],"owner":{"account_id":25093748,"reputation":67,"user_id":18945133,"display_name":"coolguy123"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":59,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679497047,"creation_date":1679497047,"question_id":75813892,"body_markdown":"I&#39;m a bit new to Java so forgive me if this is easily solvable.\r\n\r\nI have a large CSV file with header values which are not mapable to a postgresql database or Java Object, as many have special characters in their name. An example of a header value would be:\r\n\r\n    Abstraction[high]-2017.31\r\n\r\nThe solution I found to saving the data in a database was to create a Java Object with a field representing each header entry, put with special characters removed, so it looks like:\r\n\r\n    @Column(name = &quot;Abstractionhigh201731&quot;)\r\n    private String Abstractionhigh201731;\r\n\r\nTherefore, the names of the columns in the database would be hardcoded and different from the headers in the CSV file, which I assume is what HeaderColumnNameMappingStrategy uses to read the CSV, because I noticed the data in columns that had parsed headers were all returning &quot;null&quot;, while the columns where the column header was equal to the Java Object property returned the correct data.\r\n\r\nThe solution to this is to use the column numbers in the CSV file rather than header names to map the CSV file, and I&#39;d like some clarification on doing that, which I assume must be quite easy, coming down to overriding a method.\r\n\r\nAlso, another useful thing would be to be able to dynamically modify the database, by adding and deleting columns in the table. If the Object properties are hardcoded that would not be possible. I&#39;m wondering if Spring offers something similar to Prisma in NextJS, where you have a schema and can freely delete and add columns to your schema, and so dynamically modify the structure of the table.\r\n","title":"Extend HeaderColumnNameMappingStrategy to utilize column number rather than name for mapping?","body":"<p>I'm a bit new to Java so forgive me if this is easily solvable.</p>\n<p>I have a large CSV file with header values which are not mapable to a postgresql database or Java Object, as many have special characters in their name. An example of a header value would be:</p>\n<pre><code>Abstraction[high]-2017.31\n</code></pre>\n<p>The solution I found to saving the data in a database was to create a Java Object with a field representing each header entry, put with special characters removed, so it looks like:</p>\n<pre><code>@Column(name = &quot;Abstractionhigh201731&quot;)\nprivate String Abstractionhigh201731;\n</code></pre>\n<p>Therefore, the names of the columns in the database would be hardcoded and different from the headers in the CSV file, which I assume is what HeaderColumnNameMappingStrategy uses to read the CSV, because I noticed the data in columns that had parsed headers were all returning &quot;null&quot;, while the columns where the column header was equal to the Java Object property returned the correct data.</p>\n<p>The solution to this is to use the column numbers in the CSV file rather than header names to map the CSV file, and I'd like some clarification on doing that, which I assume must be quite easy, coming down to overriding a method.</p>\n<p>Also, another useful thing would be to be able to dynamically modify the database, by adding and deleting columns in the table. If the Object properties are hardcoded that would not be possible. I'm wondering if Spring offers something similar to Prisma in NextJS, where you have a schema and can freely delete and add columns to your schema, and so dynamically modify the structure of the table.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":1894950,"reputation":18007,"user_id":1712135,"display_name":"deHaar"},"score":0,"creation_date":1679493102,"post_id":75813041,"comment_id":133731702,"body_markdown":"You can create a custom `OffsetDateTime` or `ZonedDateTime` and get the corresponding `Instant` from it without having to rely on the current date or time.","body":"You can create a custom <code>OffsetDateTime</code> or <code>ZonedDateTime</code> and get the corresponding <code>Instant</code> from it without having to rely on the current date or time."}],"answers":[{"tags":[],"owner":{"account_id":1894950,"reputation":18007,"user_id":1712135,"display_name":"deHaar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679493422,"creation_date":1679493422,"answer_id":75813206,"question_id":75813041,"body_markdown":"If you want to *create* your own timestamp and get its epoch milli values, you could create an `OffsetDateTime` (or `ZonedDateTime`) from your desired value, convert it to an `Instant` and receive the moment in time represented by epoch millis:\r\n\r\n```Java\r\npublic static void main(String[] args) {\r\n\t// create a custom date and time in UTC\r\n\tOffsetDateTime customOdt = OffsetDateTime.of(\r\n\t\t\t\t2023, 1, 1, 16, 0, 0, 0, ZoneOffset.UTC\r\n\t\t\t);\r\n\t// print it\r\n\tSystem.out.println(customOdt);\r\n\t// then print the underlying Instant\r\n\tSystem.out.println(customOdt.toInstant().toEpochMilli());\r\n}\r\n```\r\n\r\nOutput:\r\n\r\n```none\r\n2023-01-01T16:00Z\r\n1672588800000\r\n```","title":"How to set application time in Java?","body":"<p>If you want to <em>create</em> your own timestamp and get its epoch milli values, you could create an <code>OffsetDateTime</code> (or <code>ZonedDateTime</code>) from your desired value, convert it to an <code>Instant</code> and receive the moment in time represented by epoch millis:</p>\n<pre><code>public static void main(String[] args) {\n    // create a custom date and time in UTC\n    OffsetDateTime customOdt = OffsetDateTime.of(\n                2023, 1, 1, 16, 0, 0, 0, ZoneOffset.UTC\n            );\n    // print it\n    System.out.println(customOdt);\n    // then print the underlying Instant\n    System.out.println(customOdt.toInstant().toEpochMilli());\n}\n</code></pre>\n<p>Output:</p>\n<pre class=\"lang-none prettyprint-override\"><code>2023-01-01T16:00Z\n1672588800000\n</code></pre>\n"},{"tags":[],"owner":{"account_id":195169,"reputation":2946,"user_id":1128593,"display_name":"David Jones"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679496591,"creation_date":1679496591,"answer_id":75813797,"question_id":75813041,"body_markdown":"The best practice would be to use a `Clock` to provide the current instant.  A dependency injection framework would be the best way to achieve this.  This allows you to pass in either a system clock, a clock in an alternate time zone, a clock with an offset or a clock that always returns a fixed time.\r\n\r\n    function doSomethingWithTime(LocalDateTime time, Clock clock) {\r\n        assert time.isBefore(LocalDateTime.now(clock));\r\n    }","title":"How to set application time in Java?","body":"<p>The best practice would be to use a <code>Clock</code> to provide the current instant.  A dependency injection framework would be the best way to achieve this.  This allows you to pass in either a system clock, a clock in an alternate time zone, a clock with an offset or a clock that always returns a fixed time.</p>\n<pre><code>function doSomethingWithTime(LocalDateTime time, Clock clock) {\n    assert time.isBefore(LocalDateTime.now(clock));\n}\n</code></pre>\n"}],"owner":{"account_id":399350,"reputation":946,"user_id":764626,"accept_rate":33,"display_name":"Yash"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":78,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1679566003,"answer_count":2,"score":0,"last_activity_date":1679496591,"creation_date":1679492628,"question_id":75813041,"body_markdown":"In my Java application, I use several libraries which invoke `System.currentTimeMillis()` and `Instant.now()`. These functions provide the current timestamp.  \r\nI would like to set the time of the application to something different than the real time.  \r\nE.g. _1 Jan 2023 16:00_.\r\n\r\nThis will be set once at the start. During the course of execution, I want all current timestamp invocations to believe that the application has started at that time and will show timestamps accordingly, regardless of the real system time.\r\nI would like to do this without changing the time of the computer and without affectiing other applications running on the computer.  \r\nIs this possible?","title":"How to set application time in Java?","body":"<p>In my Java application, I use several libraries which invoke <code>System.currentTimeMillis()</code> and <code>Instant.now()</code>. These functions provide the current timestamp.<br />\nI would like to set the time of the application to something different than the real time.<br />\nE.g. <em>1 Jan 2023 16:00</em>.</p>\n<p>This will be set once at the start. During the course of execution, I want all current timestamp invocations to believe that the application has started at that time and will show timestamps accordingly, regardless of the real system time.\nI would like to do this without changing the time of the computer and without affectiing other applications running on the computer.<br />\nIs this possible?</p>\n"},{"tags":["java","apache-kafka","reactor-kafka"],"comments":[{"owner":{"account_id":7428434,"reputation":1471,"user_id":5650224,"display_name":"m4gic"},"score":0,"creation_date":1679042765,"post_id":75741512,"comment_id":133653419,"body_markdown":"Hello, maybe it would worth to mention what kind of issue you are facing :) it would be much easier to help you out.","body":"Hello, maybe it would worth to mention what kind of issue you are facing :) it would be much easier to help you out."}],"answers":[{"tags":[],"owner":{"account_id":12455565,"reputation":5317,"user_id":9068895,"display_name":"Alex"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1679496391,"creation_date":1679263462,"answer_id":75785206,"question_id":75741512,"body_markdown":"Reactor Kafka provides several interfaces for Kafka producers (senders). \r\n\r\nConsume and send data as a stream\r\n-\r\n\r\n`&lt;T&gt; Flux&lt;SenderResult&lt;T&gt;&gt; send(Publisher&lt;? extends SenderRecord&lt;K, V, T&gt;&gt; records)`\r\n\r\n\r\nIn this case we create `kafkaOutboundStream` by consuming messages from source topic and pass it to `kafkaSender.send()` that subscribes to this `Flux` and sends messages to Kafka. \r\n\r\nIn this case we can apply processing logic before or after sending data to Kafka. In the following `processRecord` is applied before. \r\n\r\n\r\n```\r\nFlux&lt;SenderResult&lt;ReceiverOffset&gt;&gt; transform() {\r\n    Flux&lt;SenderRecord&lt;String, String, ReceiverOffset&gt;&gt; kafkaOutboundStream = kafkaReceiver.receive()\r\n            .flatMap(sourceRecord -&gt;\r\n                    processRecord(sourceRecord)\r\n                            .map(resultRecord -&gt; SenderRecord.create(\r\n                                    new ProducerRecord&lt;&gt;(&quot;destination-topic&quot;, sourceRecord.key(), resultRecord),\r\n                                    sourceRecord.receiverOffset())\r\n                            )\r\n            );\r\n\r\n    return kafkaSender.send(kafkaOutboundStream)\r\n            .doOnNext(sourceRecord -&gt; sourceRecord.correlationMetadata().acknowledge());\r\n}\r\n\r\nprivate Mono&lt;String&gt; processRecord(ReceiverRecord&lt;String, String&gt; sourceRecord) {\r\n    String transformed = sourceRecord.value().toUpperCase();\r\n    return save(transformed)\r\n            .thenReturn(transformed);\r\n}\r\n```\r\n\r\n\r\nConsume and send data as multiple streams (fun-out)\r\n-\r\n\r\nIn case we want to send data to Kafka and save to database in parallel, we would need to &quot;fan-out&quot; source `Flux` to consume and process it in parallel by 2 different subscriptions.\r\n\r\n\r\n```\r\nFlux&lt;Tuple2&lt;SenderResult&lt;ReceiverOffset&gt;, String&gt;&gt; transform() {\r\n    Flux&lt;ReceiverRecord&lt;String, String&gt;&gt; source = kafkaReceiver.receive()\r\n            .publish()\r\n            .autoConnect(2);\r\n\r\n    var kafkaOutboundStream = source\r\n            .map(sourceRecord -&gt; SenderRecord.create(\r\n                    new ProducerRecord&lt;&gt;(&quot;destination-topic&quot;, sourceRecord.key(), sourceRecord.value().toUpperCase()),\r\n                    sourceRecord.receiverOffset())\r\n            );\r\n\r\n    var kafkaSenderStream = kafkaSender.send(kafkaOutboundStream);\r\n\r\n    var dbSaveStream = source\r\n            .flatMap(sourceRecord -&gt; save(sourceRecord.value().toUpperCase()));\r\n\r\n    return Flux.zip(kafkaSenderStream, dbSaveStream)\r\n            .doOnNext(resultRecord -&gt; resultRecord.getT1().correlationMetadata().acknowledge());\r\n}\r\n\r\n```\r\n\r\nIn this case you would need to `acknowledge` record when both operations are completed.\r\n\r\n\r\nConsume and send data record by record\r\n--\r\n\r\n`KafkaOutbound&lt;K, V&gt; createOutbound().send(Publisher&lt;? extends ProducerRecord&lt;K, V&gt;&gt; records)`\r\n\r\nAs an alternative, you can process data and send to kafka using `kafkaSender.createOutbound().send()` that is more close to the code you shared.\r\n\r\n```\r\nFlux&lt;Tuple2&lt;String, String&gt;&gt; transform2() {\r\n    return kafkaReceiver.receive()\r\n            .flatMap(sourceRecord -&gt; {\r\n                String transformed = sourceRecord.value().toUpperCase();\r\n                var resultRecord = new ProducerRecord&lt;&gt;(&quot;destination-topic&quot;, sourceRecord.key(), transformed);\r\n                return Mono.zip(sendToTopic(resultRecord), save(transformed))\r\n                        .doOnNext(rec -&gt; sourceRecord.receiverOffset().acknowledge());\r\n            });\r\n\r\n}\r\n\r\nprivate Mono&lt;String&gt; sendToTopic(ProducerRecord&lt;String, String&gt; message) {\r\n    return kafkaSender.createOutbound()\r\n            .send(Mono.just(message))\r\n            .then()\r\n            .thenReturn(message.value());\r\n}\r\n```\r\n\r\n","title":"Reactor Kafka to consume message and send it to another topic","body":"<p>Reactor Kafka provides several interfaces for Kafka producers (senders).</p>\n<h2>Consume and send data as a stream</h2>\n<p><code>&lt;T&gt; Flux&lt;SenderResult&lt;T&gt;&gt; send(Publisher&lt;? extends SenderRecord&lt;K, V, T&gt;&gt; records)</code></p>\n<p>In this case we create <code>kafkaOutboundStream</code> by consuming messages from source topic and pass it to <code>kafkaSender.send()</code> that subscribes to this <code>Flux</code> and sends messages to Kafka.</p>\n<p>In this case we can apply processing logic before or after sending data to Kafka. In the following <code>processRecord</code> is applied before.</p>\n<pre><code>Flux&lt;SenderResult&lt;ReceiverOffset&gt;&gt; transform() {\n    Flux&lt;SenderRecord&lt;String, String, ReceiverOffset&gt;&gt; kafkaOutboundStream = kafkaReceiver.receive()\n            .flatMap(sourceRecord -&gt;\n                    processRecord(sourceRecord)\n                            .map(resultRecord -&gt; SenderRecord.create(\n                                    new ProducerRecord&lt;&gt;(&quot;destination-topic&quot;, sourceRecord.key(), resultRecord),\n                                    sourceRecord.receiverOffset())\n                            )\n            );\n\n    return kafkaSender.send(kafkaOutboundStream)\n            .doOnNext(sourceRecord -&gt; sourceRecord.correlationMetadata().acknowledge());\n}\n\nprivate Mono&lt;String&gt; processRecord(ReceiverRecord&lt;String, String&gt; sourceRecord) {\n    String transformed = sourceRecord.value().toUpperCase();\n    return save(transformed)\n            .thenReturn(transformed);\n}\n</code></pre>\n<h2>Consume and send data as multiple streams (fun-out)</h2>\n<p>In case we want to send data to Kafka and save to database in parallel, we would need to &quot;fan-out&quot; source <code>Flux</code> to consume and process it in parallel by 2 different subscriptions.</p>\n<pre><code>Flux&lt;Tuple2&lt;SenderResult&lt;ReceiverOffset&gt;, String&gt;&gt; transform() {\n    Flux&lt;ReceiverRecord&lt;String, String&gt;&gt; source = kafkaReceiver.receive()\n            .publish()\n            .autoConnect(2);\n\n    var kafkaOutboundStream = source\n            .map(sourceRecord -&gt; SenderRecord.create(\n                    new ProducerRecord&lt;&gt;(&quot;destination-topic&quot;, sourceRecord.key(), sourceRecord.value().toUpperCase()),\n                    sourceRecord.receiverOffset())\n            );\n\n    var kafkaSenderStream = kafkaSender.send(kafkaOutboundStream);\n\n    var dbSaveStream = source\n            .flatMap(sourceRecord -&gt; save(sourceRecord.value().toUpperCase()));\n\n    return Flux.zip(kafkaSenderStream, dbSaveStream)\n            .doOnNext(resultRecord -&gt; resultRecord.getT1().correlationMetadata().acknowledge());\n}\n\n</code></pre>\n<p>In this case you would need to <code>acknowledge</code> record when both operations are completed.</p>\n<h2>Consume and send data record by record</h2>\n<p><code>KafkaOutbound&lt;K, V&gt; createOutbound().send(Publisher&lt;? extends ProducerRecord&lt;K, V&gt;&gt; records)</code></p>\n<p>As an alternative, you can process data and send to kafka using <code>kafkaSender.createOutbound().send()</code> that is more close to the code you shared.</p>\n<pre><code>Flux&lt;Tuple2&lt;String, String&gt;&gt; transform2() {\n    return kafkaReceiver.receive()\n            .flatMap(sourceRecord -&gt; {\n                String transformed = sourceRecord.value().toUpperCase();\n                var resultRecord = new ProducerRecord&lt;&gt;(&quot;destination-topic&quot;, sourceRecord.key(), transformed);\n                return Mono.zip(sendToTopic(resultRecord), save(transformed))\n                        .doOnNext(rec -&gt; sourceRecord.receiverOffset().acknowledge());\n            });\n\n}\n\nprivate Mono&lt;String&gt; sendToTopic(ProducerRecord&lt;String, String&gt; message) {\n    return kafkaSender.createOutbound()\n            .send(Mono.just(message))\n            .then()\n            .thenReturn(message.value());\n}\n</code></pre>\n"}],"owner":{"account_id":14482834,"reputation":3894,"user_id":10461625,"display_name":"PatPanda"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1057,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1679496391,"creation_date":1678864522,"question_id":75741512,"body_markdown":"What I would like to achieve:\r\n\r\n- 1: Consume messages from Kafka\r\n\r\n- 2: Apply some business transformation (uppercase in this example)\r\n\r\n- 3A: Save transformed message inside reactive database using non blocking reactive repository\r\n\r\n- 3B: Send transformed message back to Kafka in another topic\r\n\r\nhopefully 3A and 3B in parallel, since there is no dependency between them (dependency only on step 2)\r\n\r\nWhat I tried:\r\n\r\n- using project ```Reactor Kafka```, (and I hope to stick with Reactor Kafka only) I coded this\r\n\r\n```\r\npackage org.example;\r\n\r\nimport org.example.repository.MyReactiveRepository;\r\nimport org.slf4j.Logger;\r\nimport org.slf4j.LoggerFactory;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.boot.CommandLineRunner;\r\nimport org.springframework.stereotype.Service;\r\nimport reactor.core.publisher.Flux;\r\nimport reactor.core.publisher.Mono;\r\nimport reactor.kafka.receiver.KafkaReceiver;\r\nimport reactor.kafka.sender.KafkaSender;\r\n\r\n@Service\r\npublic class MyConsumerSender implements CommandLineRunner {\r\n\r\n    private static final Logger LOGGER = LoggerFactory.getLogger(MyConsumerSender.class);\r\n\r\n    @Autowired\r\n    private KafkaReceiver&lt;String, String&gt; kafkaReceiver;\r\n\r\n    @Autowired\r\n    private KafkaSender&lt;String, String&gt; kafkaSender;\r\n\r\n    @Autowired\r\n    private MyReactiveRepository myReactiveRepository;\r\n\r\n    @Override\r\n    public void run(String... args) {\r\n        consume().subscribe();\r\n    }\r\n\r\n    Flux&lt;String&gt; consume() {\r\n        return kafkaReceiver.receive()  //step 1\r\n                .flatMap(rec -&gt; { String transformedString = rec.value().toUpperCase(); //step 2\r\n                    Mono&lt;String&gt; repositorySaveMono = myReactiveRepository.save(transformedString); //step 3A\r\n                    Mono&lt;String&gt; kafkaSendMono = kafkaSender.send(transformedString); //step 3B, I am having issue here\r\n                    return Mono.zip(repositorySaveMono, kafkaSendMono);\r\n                });\r\n    }\r\n\r\n}\r\n```\r\n\r\nHowever, I am having a hard time with step 3B. I am facing issue with ```kafkaSender.send()``` API. Could you please help?","title":"Reactor Kafka to consume message and send it to another topic","body":"<p>What I would like to achieve:</p>\n<ul>\n<li><p>1: Consume messages from Kafka</p>\n</li>\n<li><p>2: Apply some business transformation (uppercase in this example)</p>\n</li>\n<li><p>3A: Save transformed message inside reactive database using non blocking reactive repository</p>\n</li>\n<li><p>3B: Send transformed message back to Kafka in another topic</p>\n</li>\n</ul>\n<p>hopefully 3A and 3B in parallel, since there is no dependency between them (dependency only on step 2)</p>\n<p>What I tried:</p>\n<ul>\n<li>using project <code>Reactor Kafka</code>, (and I hope to stick with Reactor Kafka only) I coded this</li>\n</ul>\n<pre><code>package org.example;\n\nimport org.example.repository.MyReactiveRepository;\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.CommandLineRunner;\nimport org.springframework.stereotype.Service;\nimport reactor.core.publisher.Flux;\nimport reactor.core.publisher.Mono;\nimport reactor.kafka.receiver.KafkaReceiver;\nimport reactor.kafka.sender.KafkaSender;\n\n@Service\npublic class MyConsumerSender implements CommandLineRunner {\n\n    private static final Logger LOGGER = LoggerFactory.getLogger(MyConsumerSender.class);\n\n    @Autowired\n    private KafkaReceiver&lt;String, String&gt; kafkaReceiver;\n\n    @Autowired\n    private KafkaSender&lt;String, String&gt; kafkaSender;\n\n    @Autowired\n    private MyReactiveRepository myReactiveRepository;\n\n    @Override\n    public void run(String... args) {\n        consume().subscribe();\n    }\n\n    Flux&lt;String&gt; consume() {\n        return kafkaReceiver.receive()  //step 1\n                .flatMap(rec -&gt; { String transformedString = rec.value().toUpperCase(); //step 2\n                    Mono&lt;String&gt; repositorySaveMono = myReactiveRepository.save(transformedString); //step 3A\n                    Mono&lt;String&gt; kafkaSendMono = kafkaSender.send(transformedString); //step 3B, I am having issue here\n                    return Mono.zip(repositorySaveMono, kafkaSendMono);\n                });\n    }\n\n}\n</code></pre>\n<p>However, I am having a hard time with step 3B. I am facing issue with <code>kafkaSender.send()</code> API. Could you please help?</p>\n"},{"tags":["java","unit-testing","executorservice"],"answers":[{"tags":[],"owner":{"account_id":947309,"reputation":663,"user_id":974287,"accept_rate":80,"display_name":"mrtexaz"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1572828236,"creation_date":1506280170,"answer_id":46393834,"question_id":46393697,"body_markdown":"You could use the Future instance returned by executorService.submit(R).\r\n\r\nFrom documentation:\r\n\r\nhttps://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ExecutorService.html#submit(java.lang.Runnable)\r\n\r\nSubmits a Runnable task for execution and returns a Future representing that task. **The Future&#39;s get method will return null upon successful completion.**\r\n\r\nExample:\r\n\r\n    @Test\r\n    void test() throws ExecutionException {\r\n        Future&lt;Boolean&gt; result = Executors.newSingleThreadExecutor().submit(() -&gt; {\r\n            int answer = 43;\r\n            assertEquals(42, answer);\r\n            return true;\r\n        }\r\n        assertTrue(result.get());\r\n    }\r\n\r\nThe inner assertion will throw an exception, which causes `result.get()` to throw its own exception. Thus the test will fail, and the exception&#39;s cause will tell you why (&quot;Expected 42, but was 43 instead&quot;).","title":"How to unit test a code snippet running inside executor service, instead waiting on Thread.sleep(time)","body":"<p>You could use the Future instance returned by executorService.submit(R).</p>\n\n<p>From documentation:</p>\n\n<p><a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ExecutorService.html#submit(java.lang.Runnable)\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ExecutorService.html#submit(java.lang.Runnable)</a></p>\n\n<p>Submits a Runnable task for execution and returns a Future representing that task. <strong>The Future's get method will return null upon successful completion.</strong></p>\n\n<p>Example:</p>\n\n<pre><code>@Test\nvoid test() throws ExecutionException {\n    Future&lt;Boolean&gt; result = Executors.newSingleThreadExecutor().submit(() -&gt; {\n        int answer = 43;\n        assertEquals(42, answer);\n        return true;\n    }\n    assertTrue(result.get());\n}\n</code></pre>\n\n<p>The inner assertion will throw an exception, which causes <code>result.get()</code> to throw its own exception. Thus the test will fail, and the exception's cause will tell you why (\"Expected 42, but was 43 instead\").</p>\n"},{"tags":[],"owner":{"account_id":11175092,"reputation":45706,"user_id":8200937,"display_name":"glytching"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1506281023,"creation_date":1506280354,"answer_id":46393866,"question_id":46393697,"body_markdown":"A few options:\r\n\r\n- Extract the code out of the executor service and test it &#39;stand alone&#39; i.e in your example test `executeTask1()` and `executeTask2()` on their own or even together but just not by executing them in a separate thread. The fact that you are &quot;passing an executor service object into this constructor class&quot; helps here since you could have \r\n - A test which mocks the executor service and verifies that you submit the correct runnable to it \r\n - Test(s) which verify the behaviour of `executeTask1()` and `executeTask2()` without running them in a separate thread. \r\n\r\n- Use a `CountDownLatch` to allow your code-in-executor-service to indicate to the test thread when it is finished. For example:\r\n\r\n        // this will be initialised and passed into the task which is run by the ExecutorService \r\n        // and will be decremented by that task on completion\r\n        private CountDownLatch countdownLatch; \r\n\r\n        @Test(timeout = 1000) // just in case the latch is never decremented\r\n        public void aTest() {\r\n            // run your test\r\n\r\n            // wait for completion\r\n            countdownLatch.await();\r\n\r\n            // assert \r\n            // ...\r\n        }\r\n\r\n- Accept that you have to wait for the other thread to complete and hide the ugliness of `Thread.sleep` calls in your test cases by using [Awaitility](http://www.awaitility.org/). For example:\r\n\r\n        @Test\r\n        public void aTest() {\r\n            // run your test\r\n\r\n            // wait for completion\r\n            await().atMost(1, SECONDS).until(taskHasCompleted());\r\n\r\n            // assert \r\n            // ...\r\n        }\r\n\r\n        private Callable&lt;Boolean&gt; taskHasCompleted() {\r\n            return new Callable&lt;Boolean&gt;() {\r\n                public Boolean call() throws Exception {\r\n                    // return true if your condition has been met\r\n                    return ...;\r\n                }\r\n            };\r\n        }","title":"How to unit test a code snippet running inside executor service, instead waiting on Thread.sleep(time)","body":"<p>A few options:</p>\n\n<ul>\n<li><p>Extract the code out of the executor service and test it 'stand alone' i.e in your example test <code>executeTask1()</code> and <code>executeTask2()</code> on their own or even together but just not by executing them in a separate thread. The fact that you are \"passing an executor service object into this constructor class\" helps here since you could have </p>\n\n<ul>\n<li>A test which mocks the executor service and verifies that you submit the correct runnable to it </li>\n<li>Test(s) which verify the behaviour of <code>executeTask1()</code> and <code>executeTask2()</code> without running them in a separate thread. </li>\n</ul></li>\n<li><p>Use a <code>CountDownLatch</code> to allow your code-in-executor-service to indicate to the test thread when it is finished. For example:</p>\n\n<pre><code>// this will be initialised and passed into the task which is run by the ExecutorService \n// and will be decremented by that task on completion\nprivate CountDownLatch countdownLatch; \n\n@Test(timeout = 1000) // just in case the latch is never decremented\npublic void aTest() {\n    // run your test\n\n    // wait for completion\n    countdownLatch.await();\n\n    // assert \n    // ...\n}\n</code></pre></li>\n<li><p>Accept that you have to wait for the other thread to complete and hide the ugliness of <code>Thread.sleep</code> calls in your test cases by using <a href=\"http://www.awaitility.org/\" rel=\"nofollow noreferrer\">Awaitility</a>. For example:</p>\n\n<pre><code>@Test\npublic void aTest() {\n    // run your test\n\n    // wait for completion\n    await().atMost(1, SECONDS).until(taskHasCompleted());\n\n    // assert \n    // ...\n}\n\nprivate Callable&lt;Boolean&gt; taskHasCompleted() {\n    return new Callable&lt;Boolean&gt;() {\n        public Boolean call() throws Exception {\n            // return true if your condition has been met\n            return ...;\n        }\n    };\n}\n</code></pre></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":290692,"reputation":1493,"user_id":592368,"accept_rate":89,"display_name":"claudio"},"down_vote_count":0,"up_vote_count":35,"is_accepted":false,"score":35,"last_activity_date":1527789831,"creation_date":1527789831,"answer_id":50630291,"question_id":46393697,"body_markdown":"You could also implement an ExecutorService yourself that will run the task in the same thread. For example:\r\n\r\n    public class CurrentThreadExecutor implements Executor {\r\n        public void execute(Runnable r) {\r\n            r.run();\r\n        }\r\n    }\r\n\r\nAnd then you could inherit from `AbstractExecutorService` and use this implementation.\r\n\r\nIf you&#39;re using Guava, another easy one is to use [MoreExecutors.newDirectExecutorService()][1] since that does the same thing without you having to create one yourself.\r\n\r\n\r\n  [1]: https://google.github.io/guava/releases/19.0/api/docs/com/google/common/util/concurrent/MoreExecutors.html#newDirectExecutorService%28%29","title":"How to unit test a code snippet running inside executor service, instead waiting on Thread.sleep(time)","body":"<p>You could also implement an ExecutorService yourself that will run the task in the same thread. For example:</p>\n\n<pre><code>public class CurrentThreadExecutor implements Executor {\n    public void execute(Runnable r) {\n        r.run();\n    }\n}\n</code></pre>\n\n<p>And then you could inherit from <code>AbstractExecutorService</code> and use this implementation.</p>\n\n<p>If you're using Guava, another easy one is to use <a href=\"https://google.github.io/guava/releases/19.0/api/docs/com/google/common/util/concurrent/MoreExecutors.html#newDirectExecutorService%28%29\" rel=\"noreferrer\">MoreExecutors.newDirectExecutorService()</a> since that does the same thing without you having to create one yourself.</p>\n"},{"tags":[],"owner":{"account_id":2162679,"reputation":2945,"user_id":1916501,"accept_rate":93,"display_name":"ejfrancis"},"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1546023148,"creation_date":1546023148,"answer_id":53963087,"question_id":46393697,"body_markdown":"Google Guava provides a great class called `MoreExecutors` which helped me out when testing code that runs in parallel threads via `Executor` or `ExecutorService` in JUnit. It lets you create `Executor` instances that just run everything in the same thread, essentially as a mock of a real `Executor`. The issue is when things get run in other threads that JUnit isn&#39;t aware of, so these `Executors` from `MoreExecutors` make everything much easier to test since it&#39;s not *actually* parallel in another thread.\r\n\r\nSee the `MoreExecutors` documentation https://google.github.io/guava/releases/19.0/api/docs/com/google/common/util/concurrent/MoreExecutors.html\r\n\r\nYou can modify your class constructor, or add a new constructor that you only use in tests, which lets you provide your own `Executor` or `ExecutorService`. Then pass in the one from `MoreExecutors`.\r\n\r\nSo in the test file you&#39;d create the mock executor using `MoreExecutors`\r\n \r\n\r\n    ExecutorService mockExecutor = MoreExecutors.newDirectExecutorService();\r\n\r\n    // or if you&#39;re using Executor instead of ExecutorService you can do MoreExecutors.newDirectExecutor()\r\n    \r\n    MyService myService = new MyService(mockExecutor);\r\n\r\nThen in your class, you only create a real Executor if it wasn&#39;t provided in the constructor\r\n \r\n\r\n    public MyService() {}\r\n        ExecutorService threadPool;\r\n    \r\n        public MyService(ExecutorService threadPool) {\r\n            this.threadPool = threadPool;\r\n        }\r\n    \r\n        public void someMethodToTest() {\r\n            if (this.threadPool == null) {\r\n                // if you didn&#39;t provide the executor via constructor in the unit test, \r\n                // it will create a real one\r\n                threadPool = Executors.newFixedThreadPool(3);\r\n            }\r\n            threadPool.execute(...etc etc)\r\n            threadPool.shutdown()\r\n        }\r\n    }\r\n\r\n","title":"How to unit test a code snippet running inside executor service, instead waiting on Thread.sleep(time)","body":"<p>Google Guava provides a great class called <code>MoreExecutors</code> which helped me out when testing code that runs in parallel threads via <code>Executor</code> or <code>ExecutorService</code> in JUnit. It lets you create <code>Executor</code> instances that just run everything in the same thread, essentially as a mock of a real <code>Executor</code>. The issue is when things get run in other threads that JUnit isn't aware of, so these <code>Executors</code> from <code>MoreExecutors</code> make everything much easier to test since it's not <em>actually</em> parallel in another thread.</p>\n\n<p>See the <code>MoreExecutors</code> documentation <a href=\"https://google.github.io/guava/releases/19.0/api/docs/com/google/common/util/concurrent/MoreExecutors.html\" rel=\"noreferrer\">https://google.github.io/guava/releases/19.0/api/docs/com/google/common/util/concurrent/MoreExecutors.html</a></p>\n\n<p>You can modify your class constructor, or add a new constructor that you only use in tests, which lets you provide your own <code>Executor</code> or <code>ExecutorService</code>. Then pass in the one from <code>MoreExecutors</code>.</p>\n\n<p>So in the test file you'd create the mock executor using <code>MoreExecutors</code></p>\n\n<pre><code>ExecutorService mockExecutor = MoreExecutors.newDirectExecutorService();\n\n// or if you're using Executor instead of ExecutorService you can do MoreExecutors.newDirectExecutor()\n\nMyService myService = new MyService(mockExecutor);\n</code></pre>\n\n<p>Then in your class, you only create a real Executor if it wasn't provided in the constructor</p>\n\n<pre><code>public MyService() {}\n    ExecutorService threadPool;\n\n    public MyService(ExecutorService threadPool) {\n        this.threadPool = threadPool;\n    }\n\n    public void someMethodToTest() {\n        if (this.threadPool == null) {\n            // if you didn't provide the executor via constructor in the unit test, \n            // it will create a real one\n            threadPool = Executors.newFixedThreadPool(3);\n        }\n        threadPool.execute(...etc etc)\n        threadPool.shutdown()\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16963771,"reputation":521,"user_id":12270243,"display_name":"Damonio"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1580332674,"creation_date":1574709449,"answer_id":59038688,"question_id":46393697,"body_markdown":"I agree with the comment of @ejfrancis, in my case what I did, is that since it was a local variable, I would move it to be a member variable and from there, I would simply use reflection in the test (probably reflection is not the best approach to go, but it will be less changes)\r\n\r\n    class MyClass {\r\n                private final ExecutorService executorService = \r\n                Executors.newFixedThreadPool(5);;\r\n    }\r\n\r\nThen from here I would just go in my test after the creation of the class like this:\r\n\r\n    @BeforeEach\r\n    void init(){\r\n       MyClass myClass = new Class();\r\n       ReflectionTestUtils.setField(myClass, &quot;executorService&quot;, MoreExecutors.newDirectExecutorService());\r\n    }\r\n\r\n\r\n\r\n\r\n","title":"How to unit test a code snippet running inside executor service, instead waiting on Thread.sleep(time)","body":"<p>I agree with the comment of @ejfrancis, in my case what I did, is that since it was a local variable, I would move it to be a member variable and from there, I would simply use reflection in the test (probably reflection is not the best approach to go, but it will be less changes)</p>\n\n<pre><code>class MyClass {\n            private final ExecutorService executorService = \n            Executors.newFixedThreadPool(5);;\n}\n</code></pre>\n\n<p>Then from here I would just go in my test after the creation of the class like this:</p>\n\n<pre><code>@BeforeEach\nvoid init(){\n   MyClass myClass = new Class();\n   ReflectionTestUtils.setField(myClass, \"executorService\", MoreExecutors.newDirectExecutorService());\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15387,"reputation":63718,"user_id":32453,"accept_rate":92,"display_name":"rogerdpack"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1633525714,"creation_date":1633367355,"answer_id":69439899,"question_id":46393697,"body_markdown":"Since you control the Executor, you can issue a shutdown on it:\r\n\r\n    ExecutorService myExecutorService = ...;\r\n    mTestObject = new TestObject(myExecutorService);\r\n    mTestObject.test();\r\n    myExecutorService.shutdown(); // this will wait for submitted jobs to finish, like a join\r\n    // now do asserts\r\n\r\nOr even if you have a getter for it, possibly same deal.\r\n\r\nIf you&#39;re real desperate you may be able to use a ThreadPoolExecutor instantiation of ExecutorService which has a `getActiveCount()` method and wait till it drops to zero...","title":"How to unit test a code snippet running inside executor service, instead waiting on Thread.sleep(time)","body":"<p>Since you control the Executor, you can issue a shutdown on it:</p>\n<pre><code>ExecutorService myExecutorService = ...;\nmTestObject = new TestObject(myExecutorService);\nmTestObject.test();\nmyExecutorService.shutdown(); // this will wait for submitted jobs to finish, like a join\n// now do asserts\n</code></pre>\n<p>Or even if you have a getter for it, possibly same deal.</p>\n<p>If you're real desperate you may be able to use a ThreadPoolExecutor instantiation of ExecutorService which has a <code>getActiveCount()</code> method and wait till it drops to zero...</p>\n"},{"tags":[],"owner":{"account_id":15387,"reputation":63718,"user_id":32453,"accept_rate":92,"display_name":"rogerdpack"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1633368231,"creation_date":1633368231,"answer_id":69440046,"question_id":46393697,"body_markdown":"If you control what `abd` is and can make it a mock, you could set a timeout that it be called eventually: https://stackoverflow.com/questions/22944202/mockito-wait-for-an-invocation-that-matches-arguments","title":"How to unit test a code snippet running inside executor service, instead waiting on Thread.sleep(time)","body":"<p>If you control what <code>abd</code> is and can make it a mock, you could set a timeout that it be called eventually: <a href=\"https://stackoverflow.com/questions/22944202/mockito-wait-for-an-invocation-that-matches-arguments\">Mockito: wait for an invocation that matches arguments</a></p>\n"},{"tags":[],"owner":{"account_id":875385,"reputation":6025,"user_id":925135,"accept_rate":82,"display_name":"Renetik"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1658881707,"creation_date":1658881707,"answer_id":73131066,"question_id":46393697,"body_markdown":"Just use `executor.awaitTermination(1, SECONDS)` as this will block and execute tasks waiting for execution after that you can see result and continue test code like in this one:\r\n\r\n    @Test\r\n    fun testFileJsonStore() {\r\n        val store = CSFileJsonStore(context, &quot;file&quot;)\r\n        val property: StoreTypesTestData by store.property(&quot;property&quot;)\r\n        assertEquals(5, property.int)\r\n    \r\n        property.string = &quot;new value&quot;\r\n        property.int = 123\r\n        property.jsonObject.lateString = &quot;new value&quot;\r\n        executor.awaitTermination(1, SECONDS)\r\n        assertEquals(\r\n            &quot;&quot;&quot;{&quot;property&quot;:{&quot;key1&quot;:&quot;new value&quot;,&quot;key2&quot;:123,&quot;key3&quot;:{&quot;lateStringId&quot;:&quot;new value&quot;}}}&quot;&quot;&quot;,\r\n            store.file.readString())\r\n    \r\n        val store2: CSStore = CSFileJsonStore(context, &quot;file&quot;)\r\n        val property2: StoreTypesTestData by store2.property(&quot;property&quot;)\r\n        assertEquals(&quot;new value&quot;, property2.string)\r\n        assertEquals(123, property2.int)\r\n        assertEquals(&quot;new value&quot;, property2.jsonObject.lateString)\r\n    }\r\n\r\n","title":"How to unit test a code snippet running inside executor service, instead waiting on Thread.sleep(time)","body":"<p>Just use <code>executor.awaitTermination(1, SECONDS)</code> as this will block and execute tasks waiting for execution after that you can see result and continue test code like in this one:</p>\n<pre><code>@Test\nfun testFileJsonStore() {\n    val store = CSFileJsonStore(context, &quot;file&quot;)\n    val property: StoreTypesTestData by store.property(&quot;property&quot;)\n    assertEquals(5, property.int)\n\n    property.string = &quot;new value&quot;\n    property.int = 123\n    property.jsonObject.lateString = &quot;new value&quot;\n    executor.awaitTermination(1, SECONDS)\n    assertEquals(\n        &quot;&quot;&quot;{&quot;property&quot;:{&quot;key1&quot;:&quot;new value&quot;,&quot;key2&quot;:123,&quot;key3&quot;:{&quot;lateStringId&quot;:&quot;new value&quot;}}}&quot;&quot;&quot;,\n        store.file.readString())\n\n    val store2: CSStore = CSFileJsonStore(context, &quot;file&quot;)\n    val property2: StoreTypesTestData by store2.property(&quot;property&quot;)\n    assertEquals(&quot;new value&quot;, property2.string)\n    assertEquals(123, property2.int)\n    assertEquals(&quot;new value&quot;, property2.jsonObject.lateString)\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6146602,"reputation":688,"user_id":4793190,"display_name":"Matt"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664486714,"creation_date":1664486714,"answer_id":73901782,"question_id":46393697,"body_markdown":"If you are using Kotlin with mockk, mocked ScheduledExecutorService is the way to go.\r\n\r\n```\r\nclass MyExecutorClass() {\r\n    fun executeSomething() {\r\n        Executors.newSingleThreadScheduledExecutor().schedule( {\r\n                // do something here\r\n            }, 3, TimeUnit.SECONDS)\r\n    }\r\n}\r\n       \r\n@Test\r\nfun myExecutorTest() {\r\n    // setup\r\n    val capturingSlotRunnable: CapturingSlot&lt;Runnable&gt; = slot()\r\n    mockkStatic(Executors::class)\r\n    val mockExecutor: ScheduledExecutorService = mockk(relaxed = true)\r\n    every { Executors.newSingleThreadScheduledExecutor() } returns mockExecutor\r\n    every { mockExecutor.schedule(capture(capturingSlotRunnable), any(), any()) } returns null\r\n    \r\n    // execute\r\n    val myExecutor = MyExecutorClass()\r\n    myExecutor.executeSomething()\r\n    val runnable = capturingSlotRunnable.captured\r\n    runnable.run()\r\n\r\n    // verify\r\n    // TODO: verify the executable block did whatever it was supposed to\r\n}\r\n```","title":"How to unit test a code snippet running inside executor service, instead waiting on Thread.sleep(time)","body":"<p>If you are using Kotlin with mockk, mocked ScheduledExecutorService is the way to go.</p>\n<pre><code>class MyExecutorClass() {\n    fun executeSomething() {\n        Executors.newSingleThreadScheduledExecutor().schedule( {\n                // do something here\n            }, 3, TimeUnit.SECONDS)\n    }\n}\n       \n@Test\nfun myExecutorTest() {\n    // setup\n    val capturingSlotRunnable: CapturingSlot&lt;Runnable&gt; = slot()\n    mockkStatic(Executors::class)\n    val mockExecutor: ScheduledExecutorService = mockk(relaxed = true)\n    every { Executors.newSingleThreadScheduledExecutor() } returns mockExecutor\n    every { mockExecutor.schedule(capture(capturingSlotRunnable), any(), any()) } returns null\n    \n    // execute\n    val myExecutor = MyExecutorClass()\n    myExecutor.executeSomething()\n    val runnable = capturingSlotRunnable.captured\n    runnable.run()\n\n    // verify\n    // TODO: verify the executable block did whatever it was supposed to\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1957366,"reputation":1175,"user_id":1760058,"accept_rate":46,"display_name":"egelev"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679495876,"creation_date":1679479219,"answer_id":75810770,"question_id":46393697,"body_markdown":"The Spring Framework provides `SyncTaskExecutor` which implements `TaskExecutor` hence `Executor`.\r\nIt simply executes the `Runnable` right away\r\n\r\n```\r\n\t@Override\r\n\tpublic void execute(Runnable task) {\r\n\t\tAssert.notNull(task, &quot;Runnable must not be null&quot;);\r\n\t\ttask.run();\r\n\t}\r\n```\r\n\r\nIn order to make all Spring `@Service`s make use of this `Executor` you can provide a `@TestConfiguration` class somewhere in the *src/test/java* folder.\r\n\r\n```\r\n@TestConfiguration\r\npublic class TestConfig {\r\n  \r\n  @Bean\r\n  public Executor syncTaskExecutor() {\r\n    return new SyncTaskExecutor();\r\n  }\r\n}\r\n```\r\n\r\n[@TestConfiguration][1] is very useful for overriding some `@Bean`s only for the scope of test execution. According to its documentation:\r\n\r\n&gt; @Configuration that can be used to define additional beans or\r\n&gt; customizations for a test. Unlike regular @Configuration classes the\r\n&gt; use of @TestConfiguration does not prevent auto-detection of\r\n&gt; @SpringBootConfiguration.\r\n\r\nAfter that the test class should be annotated with `@ContextConfiguration(classes = TestConfig.class)`\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/test/context/TestConfiguration.html","title":"How to unit test a code snippet running inside executor service, instead waiting on Thread.sleep(time)","body":"<p>The Spring Framework provides <code>SyncTaskExecutor</code> which implements <code>TaskExecutor</code> hence <code>Executor</code>.\nIt simply executes the <code>Runnable</code> right away</p>\n<pre><code>    @Override\n    public void execute(Runnable task) {\n        Assert.notNull(task, &quot;Runnable must not be null&quot;);\n        task.run();\n    }\n</code></pre>\n<p>In order to make all Spring <code>@Service</code>s make use of this <code>Executor</code> you can provide a <code>@TestConfiguration</code> class somewhere in the <em>src/test/java</em> folder.</p>\n<pre><code>@TestConfiguration\npublic class TestConfig {\n  \n  @Bean\n  public Executor syncTaskExecutor() {\n    return new SyncTaskExecutor();\n  }\n}\n</code></pre>\n<p><a href=\"https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/test/context/TestConfiguration.html\" rel=\"nofollow noreferrer\">@TestConfiguration</a> is very useful for overriding some <code>@Bean</code>s only for the scope of test execution. According to its documentation:</p>\n<blockquote>\n<p>@Configuration that can be used to define additional beans or\ncustomizations for a test. Unlike regular @Configuration classes the\nuse of @TestConfiguration does not prevent auto-detection of\n@SpringBootConfiguration.</p>\n</blockquote>\n<p>After that the test class should be annotated with <code>@ContextConfiguration(classes = TestConfig.class)</code></p>\n"}],"owner":{"account_id":10642445,"reputation":389,"user_id":7837009,"display_name":"samuel koduri"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":51520,"favorite_count":0,"down_vote_count":0,"up_vote_count":30,"answer_count":10,"score":30,"last_activity_date":1679495876,"creation_date":1506279296,"question_id":46393697,"body_markdown":"How to unit test a code that is running in executor service?\r\nIn my situation,\r\n\r\n    public void test() {\r\n        Runnable R = new Runnable() {\r\n            @Override\r\n            public void run() {\r\n                executeTask1();\r\n                executeTask2();\r\n            }\r\n        };\r\n\r\n        ExecutorService executorService = Executors.newSingleThreadExecutor();\r\n        executorService.submit(R);\r\n    }\r\n\r\nWhen I am unit testing, I would like to make some validations that method executes.\r\n\r\nI am executing this in an executor service, as it makes some network operations.\r\n\r\nIn my unit testing, I had to wait until this method finishes execution. Is there a better way I can do this, instead of waiting for `Thread.sleep(500)`.\r\n\r\nUnit testing code snippet:\r\n\r\n    @Test\r\n    public void testingTask() {\r\n        mTestObject.test();\r\n        final long threadSleepTime = 10000L;\r\n        Thread.sleep(threadSleepTime);\r\n        verify(abc, times(2))\r\n                .acquireClient(a, b, c);\r\n        verify(abd, times(1)).addCallback(callback);\r\n    }\r\n\r\nNote: I am passing an executor service object into this constructor class.\r\nI would like to know if there is a good way of testing instead of waiting for sleep time.","title":"How to unit test a code snippet running inside executor service, instead waiting on Thread.sleep(time)","body":"<p>How to unit test a code that is running in executor service?\nIn my situation,</p>\n\n<pre><code>public void test() {\n    Runnable R = new Runnable() {\n        @Override\n        public void run() {\n            executeTask1();\n            executeTask2();\n        }\n    };\n\n    ExecutorService executorService = Executors.newSingleThreadExecutor();\n    executorService.submit(R);\n}\n</code></pre>\n\n<p>When I am unit testing, I would like to make some validations that method executes.</p>\n\n<p>I am executing this in an executor service, as it makes some network operations.</p>\n\n<p>In my unit testing, I had to wait until this method finishes execution. Is there a better way I can do this, instead of waiting for <code>Thread.sleep(500)</code>.</p>\n\n<p>Unit testing code snippet:</p>\n\n<pre><code>@Test\npublic void testingTask() {\n    mTestObject.test();\n    final long threadSleepTime = 10000L;\n    Thread.sleep(threadSleepTime);\n    verify(abc, times(2))\n            .acquireClient(a, b, c);\n    verify(abd, times(1)).addCallback(callback);\n}\n</code></pre>\n\n<p>Note: I am passing an executor service object into this constructor class.\nI would like to know if there is a good way of testing instead of waiting for sleep time.</p>\n"},{"tags":["java","spring","spring-boot","spring-data-jpa"],"comments":[{"owner":{"account_id":3936694,"reputation":4506,"user_id":9244861,"accept_rate":67,"display_name":"Pavan Jadda"},"score":0,"creation_date":1679497466,"post_id":75813558,"comment_id":133733232,"body_markdown":"Could you share Github repo that reproduces the issue?","body":"Could you share Github repo that reproduces the issue?"},{"owner":{"account_id":8026267,"reputation":4734,"user_id":6053084,"display_name":"Turo"},"score":1,"creation_date":1679503150,"post_id":75813558,"comment_id":133734917,"body_markdown":"I explicitly pointed to the Repositories by the `EnableJpaRepositories(basePackages = &quot;...&quot;)` Annotation. By default Spring Data looks only in subpackages of the package of the Configuration class, so they say at https://www.baeldung.com/spring-data-annotations","body":"I explicitly pointed to the Repositories by the <code>EnableJpaRepositories(basePackages = &quot;...&quot;)</code> Annotation. By default Spring Data looks only in subpackages of the package of the Configuration class, so they say at <a href=\"https://www.baeldung.com/spring-data-annotations\" rel=\"nofollow noreferrer\">baeldung.com/spring-data-annotations</a>"}],"owner":{"account_id":218143,"reputation":119,"user_id":474323,"accept_rate":39,"display_name":"Walking Corpse"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":69,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1679495703,"creation_date":1679495323,"question_id":75813558,"body_markdown":"I have checked all available answers on stackoverflow and still could not find out what is going wrong.\r\nI have the spring boot application class definiton\r\n\r\n    package earnings.evaluatenews;\r\n\r\n    import org.springframework.boot.autoconfigure.SpringBootApplication;\r\n    import org.springframework.context.annotation.ComponentScan;\r\n    import org.springframework.context.annotation.Configuration;\r\n\r\n    @SpringBootApplication\r\n    @Configuration\r\n    @ComponentScan(basePackages = {&quot;earnings.repository&quot;, &quot;earnings.evaluatenews&quot;})\r\n    public class DuplicateNewsCheckerTestApplication {\r\n    }\r\n\r\nand the below Repository definition\r\n\r\n    package earnings.repository;\r\n    \r\n    import org.springframework.data.jpa.repository.JpaRepository;\r\n    import org.springframework.stereotype.Repository;\r\n    \r\n    @Repository\r\n    public interface TickersAlreadySeenTodayRepository extends JpaRepository&lt;TickersAlreadySeenToday, TickersAlreadySeenToday.TickerToday&gt; {\r\n    }\r\n\r\nI tried writing a @SpringBootTest Test class \r\n\r\n    package earnings.evaluatenews;\r\n    \r\n    import earnings.repository.TickersAlreadySeenTodayRepository;\r\n    import org.junit.jupiter.api.AfterEach;\r\n    import org.junit.jupiter.api.Test;\r\n    import org.junit.jupiter.api.extension.ExtendWith;\r\n    import org.junit.runner.RunWith;\r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.boot.test.context.SpringBootTest;\r\n    import org.springframework.context.annotation.ComponentScan;\r\n    import org.springframework.test.context.junit.jupiter.SpringExtension;\r\n    import org.springframework.test.context.junit4.SpringRunner;\r\n    \r\n    import static com.google.common.truth.Truth.assertThat;\r\n    \r\n    @ExtendWith(SpringExtension.class)\r\n    @RunWith(SpringRunner.class)\r\n    @SpringBootTest(classes = DuplicateNewsCheckerTestApplication.class,\r\n        properties = {\r\n            &quot;spring.datasource.url=jdbc:h2:file:~/ibkrtest_db&quot;},\r\n        webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)\r\n    class DuplicateNewsCheckerTest {\r\n    \r\n      @Autowired\r\n      TickersAlreadySeenTodayRepository tickersAlreadySeenTodayRepository;\r\n      . . . \r\n    }\r\n    \r\nBut it fails with \r\n\r\n&gt;  org.springframework.beans.factory.NoSuchBeanDefinitionException: No\r\n&gt; qualifying bean of type\r\n&gt; &#39;earnings.repository.TickersAlreadySeenTodayRepository&#39; available:\r\n&gt; expected at least 1 bean which qualifies as autowire candidate.\r\n&gt; Dependency annotations:\r\n&gt; {@org.springframework.beans.factory.annotation.Autowired(required=true)}\r\n\r\nI have also tried specifying a Test Configuration specifying the same scanned packages as the application being tested, but with the same error.\r\nWhat am I doing wrong? Please help before I shoot myself.","title":"No qualifying bean available","body":"<p>I have checked all available answers on stackoverflow and still could not find out what is going wrong.\nI have the spring boot application class definiton</p>\n<pre><code>package earnings.evaluatenews;\n\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.springframework.context.annotation.ComponentScan;\nimport org.springframework.context.annotation.Configuration;\n\n@SpringBootApplication\n@Configuration\n@ComponentScan(basePackages = {&quot;earnings.repository&quot;, &quot;earnings.evaluatenews&quot;})\npublic class DuplicateNewsCheckerTestApplication {\n}\n</code></pre>\n<p>and the below Repository definition</p>\n<pre><code>package earnings.repository;\n\nimport org.springframework.data.jpa.repository.JpaRepository;\nimport org.springframework.stereotype.Repository;\n\n@Repository\npublic interface TickersAlreadySeenTodayRepository extends JpaRepository&lt;TickersAlreadySeenToday, TickersAlreadySeenToday.TickerToday&gt; {\n}\n</code></pre>\n<p>I tried writing a @SpringBootTest Test class</p>\n<pre><code>package earnings.evaluatenews;\n\nimport earnings.repository.TickersAlreadySeenTodayRepository;\nimport org.junit.jupiter.api.AfterEach;\nimport org.junit.jupiter.api.Test;\nimport org.junit.jupiter.api.extension.ExtendWith;\nimport org.junit.runner.RunWith;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.test.context.SpringBootTest;\nimport org.springframework.context.annotation.ComponentScan;\nimport org.springframework.test.context.junit.jupiter.SpringExtension;\nimport org.springframework.test.context.junit4.SpringRunner;\n\nimport static com.google.common.truth.Truth.assertThat;\n\n@ExtendWith(SpringExtension.class)\n@RunWith(SpringRunner.class)\n@SpringBootTest(classes = DuplicateNewsCheckerTestApplication.class,\n    properties = {\n        &quot;spring.datasource.url=jdbc:h2:file:~/ibkrtest_db&quot;},\n    webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)\nclass DuplicateNewsCheckerTest {\n\n  @Autowired\n  TickersAlreadySeenTodayRepository tickersAlreadySeenTodayRepository;\n  . . . \n}\n</code></pre>\n<p>But it fails with</p>\n<blockquote>\n<p>org.springframework.beans.factory.NoSuchBeanDefinitionException: No\nqualifying bean of type\n'earnings.repository.TickersAlreadySeenTodayRepository' available:\nexpected at least 1 bean which qualifies as autowire candidate.\nDependency annotations:\n{@org.springframework.beans.factory.annotation.Autowired(required=true)}</p>\n</blockquote>\n<p>I have also tried specifying a Test Configuration specifying the same scanned packages as the application being tested, but with the same error.\nWhat am I doing wrong? Please help before I shoot myself.</p>\n"},{"tags":["java","hibernate"],"owner":{"account_id":2085211,"reputation":1024,"user_id":1856362,"accept_rate":80,"display_name":"BnJ"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679495666,"creation_date":1679495666,"question_id":75813615,"body_markdown":"Is it possible to setup Hibernate XML mapping to avoid `org.hibernate.ObjectNotFoundException: No row with the given identifier exists` when fetching entity linked to an other one who do not exists on an `&lt;any&gt;`:\r\n\r\n    &lt;any name=&quot;FOREIGN_OBJECT&quot; meta-type=&quot;java.lang.String&quot; id-type=&quot;java.lang.String&quot;&gt;\r\n    \t&lt;meta-value value=&quot;ABC&quot; class=&quot;pojo.ABC&quot;/&gt;\r\n    \t&lt;meta-value value=&quot;DEF&quot; class=&quot;pojo.DEF&quot;/&gt;\r\n    \t&lt;column name=&quot;TYPE&quot;&gt;&lt;/column&gt;\r\n    \t&lt;column name=&quot;FOREIGN_ID&quot;&gt;&lt;/column&gt;\r\n    &lt;/any&gt;\r\n\r\nLike in plain Java with `@NotFound(action = NotFoundAction.IGNORE)` ?","title":"Hibernate XML mapping - Ignore when not found on any","body":"<p>Is it possible to setup Hibernate XML mapping to avoid <code>org.hibernate.ObjectNotFoundException: No row with the given identifier exists</code> when fetching entity linked to an other one who do not exists on an <code>&lt;any&gt;</code>:</p>\n<pre><code>&lt;any name=&quot;FOREIGN_OBJECT&quot; meta-type=&quot;java.lang.String&quot; id-type=&quot;java.lang.String&quot;&gt;\n    &lt;meta-value value=&quot;ABC&quot; class=&quot;pojo.ABC&quot;/&gt;\n    &lt;meta-value value=&quot;DEF&quot; class=&quot;pojo.DEF&quot;/&gt;\n    &lt;column name=&quot;TYPE&quot;&gt;&lt;/column&gt;\n    &lt;column name=&quot;FOREIGN_ID&quot;&gt;&lt;/column&gt;\n&lt;/any&gt;\n</code></pre>\n<p>Like in plain Java with <code>@NotFound(action = NotFoundAction.IGNORE)</code> ?</p>\n"},{"tags":["java","time","timestamp","java-time","spring-data-jdbc"],"comments":[{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1679066838,"post_id":75766798,"comment_id":133659782,"body_markdown":"*So in my entity the field is declared as LocalDateTime.* Wrong. A `LocalDateTime` has both date and time of day so doesn’t work for the time part alone. *My understanding is that the framework converts my LocalDateTime to a java.sql.Date,* That would be wrong. Apart from the fact that they should not use `java.sql.Date` at all, that class was for a date without time of day, so unsuitable for a `LocalDateTime`.","body":"<i>So in my entity the field is declared as LocalDateTime.</i> Wrong. A <code>LocalDateTime</code> has both date and time of day so doesn’t work for the time part alone. <i>My understanding is that the framework converts my LocalDateTime to a java.sql.Date,</i> That would be wrong. Apart from the fact that they should not use <code>java.sql.Date</code> at all, that class was for a date without time of day, so unsuitable for a <code>LocalDateTime</code>."},{"owner":{"account_id":2113689,"reputation":13,"user_id":1878414,"display_name":"stessy"},"score":1,"creation_date":1679069863,"post_id":75766798,"comment_id":133660598,"body_markdown":"Maybe there is a misundestanding in my question. I want to store the date and time, thats&#39;s the reason why I use LocalDateTime. And my date is like 30-04-2020 03:26:50, so dd-MM-yyyy hh:mm:ss. With JPA it&#39;s simple as using the @Temporal annotation. But with spring-data-jdbc I didn&#39;t find any type of annotation to tell him to store my date as a timestamp. He keeps storing it by truncating hh:mm:ss which is the default behavior because behind they implicitely convert my LocalDateTime to a java.sql.Date.","body":"Maybe there is a misundestanding in my question. I want to store the date and time, thats&#39;s the reason why I use LocalDateTime. And my date is like 30-04-2020 03:26:50, so dd-MM-yyyy hh:mm:ss. With JPA it&#39;s simple as using the @Temporal annotation. But with spring-data-jdbc I didn&#39;t find any type of annotation to tell him to store my date as a timestamp. He keeps storing it by truncating hh:mm:ss which is the default behavior because behind they implicitely convert my LocalDateTime to a java.sql.Date."},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1679070114,"post_id":75766798,"comment_id":133660669,"body_markdown":"Which brand of database engine are you using under Spring JDBC?","body":"Which brand of database engine are you using under Spring JDBC?"},{"owner":{"account_id":2113689,"reputation":13,"user_id":1878414,"display_name":"stessy"},"score":1,"creation_date":1679071098,"post_id":75766798,"comment_id":133660962,"body_markdown":"Yep sorry it was unclear. \nI use H2 for my integration tests and Oracle as my primary database.","body":"Yep sorry it was unclear.  I use H2 for my integration tests and Oracle as my primary database."},{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":2,"creation_date":1679077654,"post_id":75766798,"comment_id":133662532,"body_markdown":"Edit your Question to state clearly (a) exactly what database engine you use, and (b) *precisely* what is the data type of the column.","body":"Edit your Question to state clearly (a) exactly what database engine you use, and (b) <i>precisely</i> what is the data type of the column."},{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":1,"creation_date":1679077668,"post_id":75766798,"comment_id":133662533,"body_markdown":"And delete irrelevant code and prose. Your question appears to be much too long for what I&#39;m guessing is a rather simple issue.","body":"And delete irrelevant code and prose. Your question appears to be much too long for what I&#39;m guessing is a rather simple issue."},{"owner":{"account_id":2113689,"reputation":13,"user_id":1878414,"display_name":"stessy"},"score":1,"creation_date":1679387157,"post_id":75766798,"comment_id":133708052,"body_markdown":"Well, finally the problem is between the seat and the keyboard. I use Liquibase to generate my tables and the datatype differs between H2 and Oracle for the Date. With Oracle you can use Date whilst with H2 you have to use Timestamp.","body":"Well, finally the problem is between the seat and the keyboard. I use Liquibase to generate my tables and the datatype differs between H2 and Oracle for the Date. With Oracle you can use Date whilst with H2 you have to use Timestamp."},{"owner":{"account_id":1629745,"reputation":18644,"user_id":1504556,"accept_rate":63,"display_name":"peterh"},"score":0,"creation_date":1693979258,"post_id":75766798,"comment_id":135829161,"body_markdown":"Why map to Java type `java.sql.Timestamp` in your entity  ?   Why not simply map to `Instant` ?    In the next [upcoming JPA spec](https://jakarta.ee/specifications/persistence/3.2/) support for `Timestamp` will be deprecated.  Why map to `LocalDateTime`?  Isn&#39;t what you really want is to store a point in time when something happened? Sounds more like an `Instant` to me.","body":"Why map to Java type <code>java.sql.Timestamp</code> in your entity  ?   Why not simply map to <code>Instant</code> ?    In the next <a href=\"https://jakarta.ee/specifications/persistence/3.2/\" rel=\"nofollow noreferrer\">upcoming JPA spec</a> support for <code>Timestamp</code> will be deprecated.  Why map to <code>LocalDateTime</code>?  Isn&#39;t what you really want is to store a point in time when something happened? Sounds more like an <code>Instant</code> to me."}],"answers":[{"tags":[],"owner":{"account_id":2113689,"reputation":13,"user_id":1878414,"display_name":"stessy"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1679495601,"creation_date":1679495601,"answer_id":75813604,"question_id":75766798,"body_markdown":"I finally understood what&#39;s going on.\r\n\r\nIn fact I use Liquibase to generate my tables.\r\n\r\nAnd after a small research I found that by using the **date** type the conversion to the database datatype differs between H2 and Oracle.\r\n\r\nWith H2 the **date** type means that only the date is stored.\r\nOn the other hand with Oracle the date and time are stored.\r\n\r\nSo the solution is to use two properties in your databaseChangeLog:\r\n\r\nFor H2: `&lt;property name=&quot;dateType&quot; value=&quot;timestamp&quot; dbms=&quot;h2&quot;/&gt;`\r\n\r\nFor Oracle: `&lt;property name=&quot;dateType&quot; value=&quot;date&quot; dbms=&quot;oracle&quot;/&gt;`\r\n\r\nAnd then use the property in your column definition:\r\n\r\n`&lt;column name=&quot;ACTION_DATE&quot; type=&quot;${dateType}&quot;/&gt;`\r\n\r\nHere is a link where all datatypes are listed: https://stackoverflow.com/a/28626825/1878414","title":"spring data jdbc store and retrieve LocalDateTime as java.sql.Timestamp instead of java.sql.Date","body":"<p>I finally understood what's going on.</p>\n<p>In fact I use Liquibase to generate my tables.</p>\n<p>And after a small research I found that by using the <strong>date</strong> type the conversion to the database datatype differs between H2 and Oracle.</p>\n<p>With H2 the <strong>date</strong> type means that only the date is stored.\nOn the other hand with Oracle the date and time are stored.</p>\n<p>So the solution is to use two properties in your databaseChangeLog:</p>\n<p>For H2: <code>&lt;property name=&quot;dateType&quot; value=&quot;timestamp&quot; dbms=&quot;h2&quot;/&gt;</code></p>\n<p>For Oracle: <code>&lt;property name=&quot;dateType&quot; value=&quot;date&quot; dbms=&quot;oracle&quot;/&gt;</code></p>\n<p>And then use the property in your column definition:</p>\n<p><code>&lt;column name=&quot;ACTION_DATE&quot; type=&quot;${dateType}&quot;/&gt;</code></p>\n<p>Here is a link where all datatypes are listed: <a href=\"https://stackoverflow.com/a/28626825/1878414\">https://stackoverflow.com/a/28626825/1878414</a></p>\n"}],"owner":{"account_id":2113689,"reputation":13,"user_id":1878414,"display_name":"stessy"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":726,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1679495601,"creation_date":1679050823,"question_id":75766798,"body_markdown":"I use spring-data-jdbc to store and retrieve data from the underlying repository.\r\n\r\nI have a date-time field that has to be stored with hour, minutes and seconds.\r\n\r\nSo in my entity the field is declared as LocalDateTime.\r\n\r\nMy understanding is that the framework converts my LocalDateTime to a java.sql.Date, so the precision is lost during the insertion in the database.\r\n\r\nI use `ListCrudRepository&lt;AuditLogEntity,Long&gt;` to store and retrieve the records.\r\n\r\nAfter multiple searches on the web, I didn&#39;t find any article, tutorial related to my problem.\r\n\r\n\r\nWhat I tried is to replace my LocalDateTime by Timestamp.\r\n\r\nHere is my entity:\r\n\r\n```\r\n@Data\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\n@Table(&quot;AUDIT_LOG&quot;)\r\npublic class AuditLogEntity {\r\n\r\n    @Id\r\n    private Long id;\r\n\r\n    @Column(&quot;USER_ID&quot;)\r\n    private String userId;\r\n\r\n    @Column(&quot;ACTION_ORIGIN&quot;)\r\n    private String actionOrigin;\r\n\r\n    @Column(&quot;ACTION_NAME&quot;)\r\n    private String actionName;\r\n\r\n    @Column(&quot;ACTION_DATE&quot;)\r\n    private Timestamp actionDate;\r\n\r\n    @Column(&quot;REFERENCE&quot;)\r\n    private String reference;\r\n\r\n    @Column(&quot;ACTION_BODY&quot;)\r\n    private String actionBody;\r\n\r\n    public static AuditLogEntity create(AuditLogCreation auditLogCreation) {\r\n        return new AuditLogEntity(null,\r\n            auditLogCreation.getUserId(),\r\n            auditLogCreation.getActionOrigin(),\r\n            auditLogCreation.getActionName(),\r\n            Timestamp.valueOf(auditLogCreation.getActionDate()),\r\n            auditLogCreation.getReference(),\r\n            auditLogCreation.getActionBody());\r\n\r\n    }\r\n\r\n    public static AuditLog toModel(AuditLogEntity entity) {\r\n        return new AuditLog(entity.getUserId(),\r\n            entity.getActionName(),\r\n            entity.getActionOrigin(),\r\n            entity.getActionDate().toLocalDateTime(),\r\n            entity.getReference(),\r\n            entity.getActionBody());\r\n    }\r\n```\r\n\r\nHere is my repository:\r\n\r\n```\r\n@Component\r\npublic class AuditLogRepositoryImpl implements AuditLogRepository {\r\n\r\n    private final JdbcAuditLogRepository jdbcAuditLogRepository;\r\n\r\n    public AuditLogRepositoryImpl(JdbcAuditLogRepository jdbcAuditLogRepository) {\r\n        this.jdbcAuditLogRepository = jdbcAuditLogRepository;\r\n    }\r\n\r\n    @Override\r\n    public AuditLog create(AuditLogCreation auditLogCreation) {\r\n        AuditLogEntity auditLogEntity = AuditLogEntity.create(auditLogCreation);\r\n        AuditLogEntity save = this.jdbcAuditLogRepository.save(auditLogEntity);\r\n        return AuditLogEntity.toModel(save);\r\n    }\r\n\r\n    @Override\r\n    public List&lt;AuditLog&gt; findAll() {\r\n        List&lt;AuditLogEntity&gt; all = this.jdbcAuditLogRepository.findAll();\r\n        return all\r\n            .stream()\r\n            .map(AuditLogEntity::toModel)\r\n            .toList();\r\n    }\r\n\r\n}\r\n```\r\n\r\nThe ListCrudRepository:\r\n\r\n```\r\n@Repository\r\npublic interface JdbcAuditLogRepository extends ListCrudRepository&lt;AuditLogEntity, Long&gt; {\r\n}\r\n```\r\n\r\nMy test:\r\n\r\n```\r\n@SpringBootTest\r\n@ActiveProfiles(&quot;integration&quot;)\r\nclass AuditLogRepositoryImplIntegrationTest {\r\n\r\n    @Inject\r\n    private AuditLogRepository auditLogRepository;\r\n\r\n    @Test\r\n    void test() {\r\n        LocalDateTime expected = LocalDateTime.of(LocalDate.of(2020, 4, 30), LocalTime.of(3, 26, 50));\r\n        AuditLogCreation auditLogCreation = AuditLogCreation.builder()\r\n            .userId(&quot;UserId&quot;)\r\n            .reference(&quot;Reference&quot;)\r\n            .actionName(&quot;Action Name&quot;)\r\n            .actionOrigin(&quot;Action origin&quot;)\r\n            .actionDate(expected)\r\n            .actionBody(&quot;Action Body&quot;)\r\n            .build();\r\n        this.auditLogRepository.create(auditLogCreation);\r\n        List&lt;AuditLog&gt; all = this.auditLogRepository.findAll();\r\n        AuditLog auditLog = all.get(0);\r\n        assertThat(auditLog.getActionDate()).isEqualTo(expected);\r\n    }\r\n\r\n}\r\n```\r\n\r\nAnd the result:\r\n\r\n```\r\norg.opentest4j.AssertionFailedError: \r\nexpected: 2020-04-30T03:26:50 (java.time.LocalDateTime)\r\n but was: 2020-04-30T00:00 (java.time.LocalDateTime)\r\nwhen comparing values using &#39;ChronoLocalDateTime.timeLineOrder()&#39;\r\nExpected :2020-04-30T03:26:50 (java.time.LocalDateTime)\r\nActual   :2020-04-30T00:00 (java.time.LocalDateTime)\r\n\r\n```\r\n\r\nIf I check the following topic: https://stackoverflow.com/questions/64886345/spring-data-jdbc-microsecond-precision-lost-during-insert-of-localdatetime-type It seems he succeeds in storing the date with a precision of the milliseconds whilst on my side only the date without hh:MM:ss is stored.\r\n\r\n\r\nSo I&#39;m a bit lost. Am I missing something?\r\n\r\nThanks for your help.","title":"spring data jdbc store and retrieve LocalDateTime as java.sql.Timestamp instead of java.sql.Date","body":"<p>I use spring-data-jdbc to store and retrieve data from the underlying repository.</p>\n<p>I have a date-time field that has to be stored with hour, minutes and seconds.</p>\n<p>So in my entity the field is declared as LocalDateTime.</p>\n<p>My understanding is that the framework converts my LocalDateTime to a java.sql.Date, so the precision is lost during the insertion in the database.</p>\n<p>I use <code>ListCrudRepository&lt;AuditLogEntity,Long&gt;</code> to store and retrieve the records.</p>\n<p>After multiple searches on the web, I didn't find any article, tutorial related to my problem.</p>\n<p>What I tried is to replace my LocalDateTime by Timestamp.</p>\n<p>Here is my entity:</p>\n<pre><code>@Data\n@NoArgsConstructor\n@AllArgsConstructor\n@Table(&quot;AUDIT_LOG&quot;)\npublic class AuditLogEntity {\n\n    @Id\n    private Long id;\n\n    @Column(&quot;USER_ID&quot;)\n    private String userId;\n\n    @Column(&quot;ACTION_ORIGIN&quot;)\n    private String actionOrigin;\n\n    @Column(&quot;ACTION_NAME&quot;)\n    private String actionName;\n\n    @Column(&quot;ACTION_DATE&quot;)\n    private Timestamp actionDate;\n\n    @Column(&quot;REFERENCE&quot;)\n    private String reference;\n\n    @Column(&quot;ACTION_BODY&quot;)\n    private String actionBody;\n\n    public static AuditLogEntity create(AuditLogCreation auditLogCreation) {\n        return new AuditLogEntity(null,\n            auditLogCreation.getUserId(),\n            auditLogCreation.getActionOrigin(),\n            auditLogCreation.getActionName(),\n            Timestamp.valueOf(auditLogCreation.getActionDate()),\n            auditLogCreation.getReference(),\n            auditLogCreation.getActionBody());\n\n    }\n\n    public static AuditLog toModel(AuditLogEntity entity) {\n        return new AuditLog(entity.getUserId(),\n            entity.getActionName(),\n            entity.getActionOrigin(),\n            entity.getActionDate().toLocalDateTime(),\n            entity.getReference(),\n            entity.getActionBody());\n    }\n</code></pre>\n<p>Here is my repository:</p>\n<pre><code>@Component\npublic class AuditLogRepositoryImpl implements AuditLogRepository {\n\n    private final JdbcAuditLogRepository jdbcAuditLogRepository;\n\n    public AuditLogRepositoryImpl(JdbcAuditLogRepository jdbcAuditLogRepository) {\n        this.jdbcAuditLogRepository = jdbcAuditLogRepository;\n    }\n\n    @Override\n    public AuditLog create(AuditLogCreation auditLogCreation) {\n        AuditLogEntity auditLogEntity = AuditLogEntity.create(auditLogCreation);\n        AuditLogEntity save = this.jdbcAuditLogRepository.save(auditLogEntity);\n        return AuditLogEntity.toModel(save);\n    }\n\n    @Override\n    public List&lt;AuditLog&gt; findAll() {\n        List&lt;AuditLogEntity&gt; all = this.jdbcAuditLogRepository.findAll();\n        return all\n            .stream()\n            .map(AuditLogEntity::toModel)\n            .toList();\n    }\n\n}\n</code></pre>\n<p>The ListCrudRepository:</p>\n<pre><code>@Repository\npublic interface JdbcAuditLogRepository extends ListCrudRepository&lt;AuditLogEntity, Long&gt; {\n}\n</code></pre>\n<p>My test:</p>\n<pre><code>@SpringBootTest\n@ActiveProfiles(&quot;integration&quot;)\nclass AuditLogRepositoryImplIntegrationTest {\n\n    @Inject\n    private AuditLogRepository auditLogRepository;\n\n    @Test\n    void test() {\n        LocalDateTime expected = LocalDateTime.of(LocalDate.of(2020, 4, 30), LocalTime.of(3, 26, 50));\n        AuditLogCreation auditLogCreation = AuditLogCreation.builder()\n            .userId(&quot;UserId&quot;)\n            .reference(&quot;Reference&quot;)\n            .actionName(&quot;Action Name&quot;)\n            .actionOrigin(&quot;Action origin&quot;)\n            .actionDate(expected)\n            .actionBody(&quot;Action Body&quot;)\n            .build();\n        this.auditLogRepository.create(auditLogCreation);\n        List&lt;AuditLog&gt; all = this.auditLogRepository.findAll();\n        AuditLog auditLog = all.get(0);\n        assertThat(auditLog.getActionDate()).isEqualTo(expected);\n    }\n\n}\n</code></pre>\n<p>And the result:</p>\n<pre><code>org.opentest4j.AssertionFailedError: \nexpected: 2020-04-30T03:26:50 (java.time.LocalDateTime)\n but was: 2020-04-30T00:00 (java.time.LocalDateTime)\nwhen comparing values using 'ChronoLocalDateTime.timeLineOrder()'\nExpected :2020-04-30T03:26:50 (java.time.LocalDateTime)\nActual   :2020-04-30T00:00 (java.time.LocalDateTime)\n\n</code></pre>\n<p>If I check the following topic: <a href=\"https://stackoverflow.com/questions/64886345/spring-data-jdbc-microsecond-precision-lost-during-insert-of-localdatetime-type\">Spring-data-jdbc microsecond precision lost during insert of LocalDateTime type variable</a> It seems he succeeds in storing the date with a precision of the milliseconds whilst on my side only the date without hh:MM:ss is stored.</p>\n<p>So I'm a bit lost. Am I missing something?</p>\n<p>Thanks for your help.</p>\n"},{"tags":["java","android","react-native","kotlin","gradle"],"answers":[{"tags":[],"owner":{"account_id":23776591,"reputation":19,"user_id":17789948,"display_name":"Cahyanudien AS"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1679495445,"creation_date":1679495129,"answer_id":75813521,"question_id":75765628,"body_markdown":"[same problem (link image)][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Q5ToM.png\r\n\r\n first, have you checked your setup : \r\n\r\n `npx react-native doctor`\r\n\r\nlink https://reactnative.dev/docs/environment-setup \r\n\r\nif all setup correct, have you tried to repro after a fresh run \r\n \r\n\r\n    git clean -fdx\r\n\r\nin your project?\r\nif still happening, clean your Windows Gradle cache :\r\n\r\n    C:\\Users\\user\\.gradle\\\r\n\r\nplease check more info by leotm : https://github.com/facebook/react-native/issues/34295#issuecomment-1201269698\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Q5ToM.png","title":"Failed to create Jar file C:\\Users\\User\\.gradle\\caches\\jars-9\\196b729407d7fbb2907378f4b4c34b5a\\kotlin-gradle-plugin-1.6.10.jar","body":"<p><a href=\"https://i.stack.imgur.com/Q5ToM.png\" rel=\"nofollow noreferrer\">same problem (link image)</a></p>\n<p>first, have you checked your setup :</p>\n<p><code>npx react-native doctor</code></p>\n<p>link <a href=\"https://reactnative.dev/docs/environment-setup\" rel=\"nofollow noreferrer\">https://reactnative.dev/docs/environment-setup</a></p>\n<p>if all setup correct, have you tried to repro after a fresh run</p>\n<pre><code>git clean -fdx\n</code></pre>\n<p>in your project?\nif still happening, clean your Windows Gradle cache :</p>\n<pre><code>C:\\Users\\user\\.gradle\\\n</code></pre>\n<p>please check more info by leotm : <a href=\"https://github.com/facebook/react-native/issues/34295#issuecomment-1201269698\" rel=\"nofollow noreferrer\">https://github.com/facebook/react-native/issues/34295#issuecomment-1201269698</a></p>\n"}],"owner":{"account_id":19912683,"reputation":346,"user_id":14590393,"display_name":"Shehan DMG"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5662,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":1,"score":5,"last_activity_date":1679495445,"creation_date":1679043996,"question_id":75765628,"body_markdown":"This is my first real react-native project. I was running the project with expo go without any issues. And then to add google oauth I had to expo eject the project. After ejecting(now a bare react-native project) I get this error..(I got few errors which I fixed. I&#39;m stuck with this.)\r\n\r\nWhen I run yarn android build fails with this error.\r\n\r\n```` \r\nFAILURE: Build failed with an exception.\r\n\r\n* What went wrong:\r\nA problem occurred configuring project &#39;:react-native-gradle-plugin&#39;.\r\n&gt; java.util.concurrent.ExecutionException: org.gradle.api.GradleException: Failed to create Jar file C:\\Users\\User\\.gradle\\caches\\jars-9\\196b729407d7fbb2907378f4b4c34b5a\\kotlin-gradle-plugin-1.6.10.jar.\r\n\r\n* Try:\r\n&gt; Run with --stacktrace option to get the stack trace.\r\n&gt; Run with --info or --debug option to get more log output.\r\n&gt; Run with --scan to get full insights.\r\n\r\n* Get more help at https://help.gradle.org \r\n````\r\n\r\nI tried cleaning gradle cache, build folder and they didn&#39;t work. Appreciate if someone can give some pointers. If you want to see build.gradle,manifest files let me know in comments I will update the question.","title":"Failed to create Jar file C:\\Users\\User\\.gradle\\caches\\jars-9\\196b729407d7fbb2907378f4b4c34b5a\\kotlin-gradle-plugin-1.6.10.jar","body":"<p>This is my first real react-native project. I was running the project with expo go without any issues. And then to add google oauth I had to expo eject the project. After ejecting(now a bare react-native project) I get this error..(I got few errors which I fixed. I'm stuck with this.)</p>\n<p>When I run yarn android build fails with this error.</p>\n<pre><code>FAILURE: Build failed with an exception.\n\n* What went wrong:\nA problem occurred configuring project ':react-native-gradle-plugin'.\n&gt; java.util.concurrent.ExecutionException: org.gradle.api.GradleException: Failed to create Jar file C:\\Users\\User\\.gradle\\caches\\jars-9\\196b729407d7fbb2907378f4b4c34b5a\\kotlin-gradle-plugin-1.6.10.jar.\n\n* Try:\n&gt; Run with --stacktrace option to get the stack trace.\n&gt; Run with --info or --debug option to get more log output.\n&gt; Run with --scan to get full insights.\n\n* Get more help at https://help.gradle.org \n</code></pre>\n<p>I tried cleaning gradle cache, build folder and they didn't work. Appreciate if someone can give some pointers. If you want to see build.gradle,manifest files let me know in comments I will update the question.</p>\n"},{"tags":["java","hadoop","parquet"],"answers":[{"tags":[],"owner":{"account_id":320466,"reputation":8954,"user_id":638764,"display_name":"mazaneicha"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1580165484,"creation_date":1580164183,"answer_id":59939823,"question_id":59939309,"body_markdown":"[parquet-tools][1] utility seems like a good place to start. It does have some Hadoop dependencies, but works as well with local files as with HDFS (depending on `defaultFS` in `Configuration`). If you have licensing restrictions (tools are Apache V2, as everything else), you can probably just review the source for one of the content-printing [commands][2] (cat, head, or dump) for inspiration.\r\n\r\nThe closest thing to your Avro example would be using [ParquetFileReader][3], I guess.\r\n\r\n      Configuration conf = new Configuration();\r\n      Path path = new Path(&quot;/parquet/file/path&quot;);\r\n      ParquetMetadata footer = ParquetFileReader.readFooter(conf, path, ParquetMetadataConverter.NO_FILTER);\r\n      ParquetFileReader reader = new ParquetFileReader(conf, path, footer);\r\n\r\n\r\n  [1]: https://github.com/apache/parquet-mr/tree/master/parquet-tools\r\n  [2]: https://github.com/apache/parquet-mr/tree/master/parquet-tools/src/main/java/org/apache/parquet/tools/command\r\n  [3]: https://www.javadoc.io/doc/org.apache.parquet/parquet-hadoop/1.8.3/org/apache/parquet/hadoop/ParquetFileReader.html#ParquetFileReader(org.apache.hadoop.conf.Configuration,%20org.apache.hadoop.fs.Path,%20org.apache.parquet.hadoop.metadata.ParquetMetadata)","title":"Read local Parquet file without Hadoop Path API","body":"<p><a href=\"https://github.com/apache/parquet-mr/tree/master/parquet-tools\" rel=\"nofollow noreferrer\">parquet-tools</a> utility seems like a good place to start. It does have some Hadoop dependencies, but works as well with local files as with HDFS (depending on <code>defaultFS</code> in <code>Configuration</code>). If you have licensing restrictions (tools are Apache V2, as everything else), you can probably just review the source for one of the content-printing <a href=\"https://github.com/apache/parquet-mr/tree/master/parquet-tools/src/main/java/org/apache/parquet/tools/command\" rel=\"nofollow noreferrer\">commands</a> (cat, head, or dump) for inspiration.</p>\n\n<p>The closest thing to your Avro example would be using <a href=\"https://www.javadoc.io/doc/org.apache.parquet/parquet-hadoop/1.8.3/org/apache/parquet/hadoop/ParquetFileReader.html#ParquetFileReader(org.apache.hadoop.conf.Configuration,%20org.apache.hadoop.fs.Path,%20org.apache.parquet.hadoop.metadata.ParquetMetadata)\" rel=\"nofollow noreferrer\">ParquetFileReader</a>, I guess.</p>\n\n<pre><code>  Configuration conf = new Configuration();\n  Path path = new Path(\"/parquet/file/path\");\n  ParquetMetadata footer = ParquetFileReader.readFooter(conf, path, ParquetMetadataConverter.NO_FILTER);\n  ParquetFileReader reader = new ParquetFileReader(conf, path, footer);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14322132,"reputation":1318,"user_id":10345160,"display_name":"UDIT JOSHI"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1580806217,"creation_date":1580794335,"answer_id":60051177,"question_id":59939309,"body_markdown":"You can use [ParquetFileReader][1] class for that\r\n\r\n    dependencies {\r\n    \tcompile group: &#39;org.apache.hadoop&#39;, name: &#39;hadoop-common&#39;, version: &#39;3.2.0&#39;\r\n    \tcompile group: &#39;org.apache.parquet&#39;, name: &#39;parquet-hadoop&#39;, version: &#39;1.10.1&#39;\r\n    }\r\n\r\nYou can specify your local directory path here\r\n\r\n\r\n    private static Path path = new Path(&quot;file:\\\\C:\\\\myfile.snappy.parquet&quot;);\r\n    \r\n    ParquetFileReader r = new ParquetFileReader(conf, path, footer);\r\n\r\n\r\n  [1]: https://www.javadoc.io/doc/org.apache.parquet/parquet-hadoop/1.10.1/org/apache/parquet/hadoop/ParquetFileReader.html","title":"Read local Parquet file without Hadoop Path API","body":"<p>You can use <a href=\"https://www.javadoc.io/doc/org.apache.parquet/parquet-hadoop/1.10.1/org/apache/parquet/hadoop/ParquetFileReader.html\" rel=\"nofollow noreferrer\">ParquetFileReader</a> class for that</p>\n\n<pre><code>dependencies {\n    compile group: 'org.apache.hadoop', name: 'hadoop-common', version: '3.2.0'\n    compile group: 'org.apache.parquet', name: 'parquet-hadoop', version: '1.10.1'\n}\n</code></pre>\n\n<p>You can specify your local directory path here</p>\n\n<pre><code>private static Path path = new Path(\"file:\\\\C:\\\\myfile.snappy.parquet\");\n\nParquetFileReader r = new ParquetFileReader(conf, path, footer);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":47176,"reputation":33749,"user_id":139595,"accept_rate":88,"display_name":"J&#246;rn Horstmann"},"down_vote_count":0,"up_vote_count":14,"is_accepted":true,"score":14,"last_activity_date":1679495067,"creation_date":1580858988,"answer_id":60067027,"question_id":59939309,"body_markdown":"Unfortunately the java parquet implementation is not independent of some hadoop libraries. There is an existing issue in their bugtracker to [make it easy to read and write parquet files in java without depending on hadoop][1] but there does not seem to be much progress on it. The `InputFile` interface was added to add a bit of decoupling, but a lot of the classes that implement the metadata part of parquet and also all compression codecs live inside the hadoop dependency.\r\n\r\nI found [another implementation of `InputFile` in the smile library][2], this might be more efficient than going through the hadoop filesystem abstraction, but does not solve the dependency problem.\r\n\r\n\r\nAs other answers already mention, you can create an hadoop `Path` for a local file and use that without problems.\r\n\r\n    java.io.File file = ...\r\n    new org.apache.hadoop.fs.Path(file.toURI())\r\n\r\nThe dependency tree that is pulled in by hadoop can be reduced a lot by defining some exclusions. I&#39;m using the following to reduce the bloat (using gradle syntax):\r\n\r\n    compile(&quot;org.apache.hadoop:hadoop-common:3.1.0&quot;) {\r\n        exclude(group: &#39;org.slf4j&#39;)\r\n        exclude(group: &#39;org.mortbay.jetty&#39;)\r\n        exclude(group: &#39;javax.servlet.jsp&#39;)\r\n        exclude(group: &#39;com.sun.jersey&#39;)\r\n        exclude(group: &#39;log4j&#39;)\r\n        exclude(group: &#39;org.apache.curator&#39;)\r\n        exclude(group: &#39;org.apache.zookeeper&#39;)\r\n        exclude(group: &#39;org.apache.kerby&#39;)\r\n        exclude(group: &#39;com.google.protobuf&#39;)\r\n    }\r\n\r\n\r\n [1]: https://issues.apache.org/jira/browse/PARQUET-1126\r\n [2]: https://github.com/haifengl/smile/blob/master/base/src/main/java/smile/io/LocalInputFile.java","title":"Read local Parquet file without Hadoop Path API","body":"<p>Unfortunately the java parquet implementation is not independent of some hadoop libraries. There is an existing issue in their bugtracker to <a href=\"https://issues.apache.org/jira/browse/PARQUET-1126\" rel=\"nofollow noreferrer\">make it easy to read and write parquet files in java without depending on hadoop</a> but there does not seem to be much progress on it. The <code>InputFile</code> interface was added to add a bit of decoupling, but a lot of the classes that implement the metadata part of parquet and also all compression codecs live inside the hadoop dependency.</p>\n<p>I found <a href=\"https://github.com/haifengl/smile/blob/master/base/src/main/java/smile/io/LocalInputFile.java\" rel=\"nofollow noreferrer\">another implementation of <code>InputFile</code> in the smile library</a>, this might be more efficient than going through the hadoop filesystem abstraction, but does not solve the dependency problem.</p>\n<p>As other answers already mention, you can create an hadoop <code>Path</code> for a local file and use that without problems.</p>\n<pre><code>java.io.File file = ...\nnew org.apache.hadoop.fs.Path(file.toURI())\n</code></pre>\n<p>The dependency tree that is pulled in by hadoop can be reduced a lot by defining some exclusions. I'm using the following to reduce the bloat (using gradle syntax):</p>\n<pre><code>compile(&quot;org.apache.hadoop:hadoop-common:3.1.0&quot;) {\n    exclude(group: 'org.slf4j')\n    exclude(group: 'org.mortbay.jetty')\n    exclude(group: 'javax.servlet.jsp')\n    exclude(group: 'com.sun.jersey')\n    exclude(group: 'log4j')\n    exclude(group: 'org.apache.curator')\n    exclude(group: 'org.apache.zookeeper')\n    exclude(group: 'org.apache.kerby')\n    exclude(group: 'com.google.protobuf')\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9304566,"reputation":391,"user_id":6908781,"display_name":"Long Vu"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1580874374,"creation_date":1580871407,"answer_id":60068402,"question_id":59939309,"body_markdown":"If the need for not using Hadoop is really unavoidable, you can try Spark and run it in a local version. A quick start guide can be find here: https://spark.apache.org/docs/latest/index.html. For downloading, you can download at this link: https://archive.apache.org/dist/spark/ (find a version you like, there is always a build without hadoop. Unfortunately, the size of compressed version is still around 10-15M). You will also able to find some Java example at examples/src/main.\r\n\r\nAfter that, you can read the file in as a Spark Dataframe like this\r\n\r\n    import org.apache.spark.api.java.*;\r\n    import org.apache.spark.api.java.function.*; \r\n           \r\n    SparkSession spark = SparkSession.builder().appName(&quot;Reducing dependecy by adding more dependencies&quot;).master(&quot;local[*]&quot;).getOrCreate();\r\n            DataFrame parquet = sqlContext.read().parquet(&quot;C:/files/myfile.csv.parquet&quot;);\r\n        parquet.show(20);\r\n\r\nThis solution do satisfy the original conditions in the question. However, it doesn&#39;t devoid from the fact that it&#39;s like beating around the bush (but hell yeah it&#39;s funny). Still, it might helps to open a new possible way to tackle this.\r\n\r\n\r\n","title":"Read local Parquet file without Hadoop Path API","body":"<p>If the need for not using Hadoop is really unavoidable, you can try Spark and run it in a local version. A quick start guide can be find here: <a href=\"https://spark.apache.org/docs/latest/index.html\" rel=\"nofollow noreferrer\">https://spark.apache.org/docs/latest/index.html</a>. For downloading, you can download at this link: <a href=\"https://archive.apache.org/dist/spark/\" rel=\"nofollow noreferrer\">https://archive.apache.org/dist/spark/</a> (find a version you like, there is always a build without hadoop. Unfortunately, the size of compressed version is still around 10-15M). You will also able to find some Java example at examples/src/main.</p>\n\n<p>After that, you can read the file in as a Spark Dataframe like this</p>\n\n<pre><code>import org.apache.spark.api.java.*;\nimport org.apache.spark.api.java.function.*; \n\nSparkSession spark = SparkSession.builder().appName(\"Reducing dependecy by adding more dependencies\").master(\"local[*]\").getOrCreate();\n        DataFrame parquet = sqlContext.read().parquet(\"C:/files/myfile.csv.parquet\");\n    parquet.show(20);\n</code></pre>\n\n<p>This solution do satisfy the original conditions in the question. However, it doesn't devoid from the fact that it's like beating around the bush (but hell yeah it's funny). Still, it might helps to open a new possible way to tackle this.</p>\n"},{"tags":[],"owner":{"account_id":401157,"reputation":1787,"user_id":767547,"accept_rate":50,"display_name":"Martin"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1643961095,"creation_date":1643899736,"answer_id":70973376,"question_id":59939309,"body_markdown":"Here is a complete sample application, also using the LocalInputFile.java class that is part of the solution above, to read a parquet file with minimum dependencies:\r\n\r\nhttps://github.com/GeoscienceAustralia/wit_tooling/tree/main/examples/java/parquet-reader\r\n\r\nIn contrast to the other example solutions, this project also avoids the Avro dependency.","title":"Read local Parquet file without Hadoop Path API","body":"<p>Here is a complete sample application, also using the LocalInputFile.java class that is part of the solution above, to read a parquet file with minimum dependencies:</p>\n<p><a href=\"https://github.com/GeoscienceAustralia/wit_tooling/tree/main/examples/java/parquet-reader\" rel=\"nofollow noreferrer\">https://github.com/GeoscienceAustralia/wit_tooling/tree/main/examples/java/parquet-reader</a></p>\n<p>In contrast to the other example solutions, this project also avoids the Avro dependency.</p>\n"}],"owner":{"account_id":377596,"reputation":5231,"user_id":729819,"accept_rate":83,"display_name":"Ben Watson"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10304,"favorite_count":0,"down_vote_count":0,"up_vote_count":16,"accepted_answer_id":60067027,"answer_count":5,"score":16,"last_activity_date":1679495067,"creation_date":1580161253,"question_id":59939309,"body_markdown":"I&#39;m trying to read a local Parquet file, however the only APIs I can find are tightly coupled with Hadoop, and require a Hadoop `Path` as input (even for pointing to a local file).\r\n\r\n```\r\nParquetReader&lt;GenericRecord&gt; reader = AvroParquetReader.&lt;GenericRecord&gt;builder(file).build();\r\nGenericRecord nextRecord = reader.read();\r\n```\r\n\r\nis the most popular answer in https://stackoverflow.com/questions/28615511/how-to-read-a-parquet-file-in-a-standalone-java-code, but requires a Hadoop `Path` and has now been deprecated for a mysterious [`InputFile`][1] instead. The only implementation of `InputFile` I can find is `HadoopInputFile`, so again no help.\r\n\r\nIn Avro this is a simple:\r\n```\r\nDatumReader&lt;GenericRecord&gt; datumReader = new GenericDatumReader&lt;&gt;();\r\nthis.dataFileReader = new DataFileReader&lt;&gt;(file, datumReader);\r\n```\r\n\r\n(where file is `java.io.File`). What&#39;s the Parquet equivalent?\r\n\r\nI am asking for no Hadoop `Path` dependency in the answers, because Hadoop drags in bloat and jar hell, and it seems silly to require it for reading local files.\r\n\r\nTo further explain the backstory, I maintain a small [IntelliJ plugin][3] that allows users to drag-and-drop Avro files into a pane for viewing in a table. This plugin is currently 5MB. If I include Parquet and Hadoop dependencies, it bloats to over 50MB, and [doesn&#39;t even work][2].\r\n\r\n---\r\n\r\n**POST-ANSWER ADDENDUM**\r\n\r\nNow that I have it working (thanks to the accepted answer), here is my working solution that avoids all the annoying errors that can be dragged in by depending heavily on the Hadoop `Path` API:\r\n\r\n - [ParquetFileReader.java][4]\r\n - [LocalInputFile.java][5]\r\n\r\n  [1]: https://github.com/apache/parquet-mr/blob/master/parquet-common/src/main/java/org/apache/parquet/io/InputFile.java\r\n  [2]: https://stackoverflow.com/questions/60019230/unable-to-read-local-file-with-hdfs-api-in-intellij-plugin\r\n  [3]: https://github.com/benwatson528/intellij-avro-plugin\r\n  [4]: https://github.com/benwatson528/intellij-avro-parquet-plugin/blob/master/src/main/java/uk/co/hadoopathome/intellij/viewer/fileformat/ParquetFileReader.java\r\n  [5]: https://github.com/benwatson528/intellij-avro-parquet-plugin/blob/master/src/main/java/uk/co/hadoopathome/intellij/viewer/fileformat/LocalInputFile.java","title":"Read local Parquet file without Hadoop Path API","body":"<p>I'm trying to read a local Parquet file, however the only APIs I can find are tightly coupled with Hadoop, and require a Hadoop <code>Path</code> as input (even for pointing to a local file).</p>\n\n<pre><code>ParquetReader&lt;GenericRecord&gt; reader = AvroParquetReader.&lt;GenericRecord&gt;builder(file).build();\nGenericRecord nextRecord = reader.read();\n</code></pre>\n\n<p>is the most popular answer in <a href=\"https://stackoverflow.com/questions/28615511/how-to-read-a-parquet-file-in-a-standalone-java-code\">how to read a parquet file, in a standalone java code?</a>, but requires a Hadoop <code>Path</code> and has now been deprecated for a mysterious <a href=\"https://github.com/apache/parquet-mr/blob/master/parquet-common/src/main/java/org/apache/parquet/io/InputFile.java\" rel=\"noreferrer\"><code>InputFile</code></a> instead. The only implementation of <code>InputFile</code> I can find is <code>HadoopInputFile</code>, so again no help.</p>\n\n<p>In Avro this is a simple:</p>\n\n<pre><code>DatumReader&lt;GenericRecord&gt; datumReader = new GenericDatumReader&lt;&gt;();\nthis.dataFileReader = new DataFileReader&lt;&gt;(file, datumReader);\n</code></pre>\n\n<p>(where file is <code>java.io.File</code>). What's the Parquet equivalent?</p>\n\n<p>I am asking for no Hadoop <code>Path</code> dependency in the answers, because Hadoop drags in bloat and jar hell, and it seems silly to require it for reading local files.</p>\n\n<p>To further explain the backstory, I maintain a small <a href=\"https://github.com/benwatson528/intellij-avro-plugin\" rel=\"noreferrer\">IntelliJ plugin</a> that allows users to drag-and-drop Avro files into a pane for viewing in a table. This plugin is currently 5MB. If I include Parquet and Hadoop dependencies, it bloats to over 50MB, and <a href=\"https://stackoverflow.com/questions/60019230/unable-to-read-local-file-with-hdfs-api-in-intellij-plugin\">doesn't even work</a>.</p>\n\n<hr>\n\n<p><strong>POST-ANSWER ADDENDUM</strong></p>\n\n<p>Now that I have it working (thanks to the accepted answer), here is my working solution that avoids all the annoying errors that can be dragged in by depending heavily on the Hadoop <code>Path</code> API:</p>\n\n<ul>\n<li><a href=\"https://github.com/benwatson528/intellij-avro-parquet-plugin/blob/master/src/main/java/uk/co/hadoopathome/intellij/viewer/fileformat/ParquetFileReader.java\" rel=\"noreferrer\">ParquetFileReader.java</a></li>\n<li><a href=\"https://github.com/benwatson528/intellij-avro-parquet-plugin/blob/master/src/main/java/uk/co/hadoopathome/intellij/viewer/fileformat/LocalInputFile.java\" rel=\"noreferrer\">LocalInputFile.java</a></li>\n</ul>\n"},{"tags":["java","hook","karate"],"comments":[{"owner":{"account_id":48302,"reputation":55353,"user_id":143475,"display_name":"Peter Thomas"},"score":0,"creation_date":1679497314,"post_id":75813410,"comment_id":133733172,"body_markdown":"indeed possible that there is a bug in karate. only way to be sure is if you follow this process: https://github.com/karatelabs/karate/wiki/How-to-Submit-an-Issue - and we welcome code contributions. that said, if you are just concerned with before and after the suite, why don&#39;t you just do it in the `testParallel()` block: https://stackoverflow.com/a/60944060/143475","body":"indeed possible that there is a bug in karate. only way to be sure is if you follow this process: <a href=\"https://github.com/karatelabs/karate/wiki/How-to-Submit-an-Issue\" rel=\"nofollow noreferrer\">github.com/karatelabs/karate/wiki/How-to-Submit-an-Issue</a> - and we welcome code contributions. that said, if you are just concerned with before and after the suite, why don&#39;t you just do it in the <code>testParallel()</code> block: <a href=\"https://stackoverflow.com/a/60944060/143475\">stackoverflow.com/a/60944060/143475</a>"}],"owner":{"account_id":28086760,"reputation":11,"user_id":21457012,"display_name":"arhadoop"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":117,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1679494870,"creation_date":1679494580,"question_id":75813410,"body_markdown":"I would like to understand how the com.intuit.karate.RuntimeHook class behaves when the methods are overwritten.\r\nI did the following\r\n\r\n\r\n```\r\npublic class MyHook implements RuntimeHook {\r\n @Override\r\n  public void beforeSuite(Suite suite){\r\n    \r\n    Runner.runFeature(&quot;call my feature&quot;, null, true);\r\n  \r\n  }\r\n\r\n  @Override\r\n  public void afterSuite(Suite suite) {\r\n    Runner.runFeature(&quot;call another feature&quot;, null, true);\r\n\r\n  } \r\n}\r\n```\r\n\r\n\r\nAfter I called this class:  MyHook from my Runner Class:\r\nInside my Runner class I have this method\r\n\r\n\r\n```\r\n @Test\r\n    void testParallel() { \r\n        Results results = Runner.path(&quot;my classpath&quot;)\r\n                .hook(new MyHook())\r\n                .parallel(1);\r\n        assertEquals(0, results.getFailCount(), results.getErrorMessages());\r\n    }\r\n```\r\n\r\n\r\n\r\n\r\nWhen I run my test Suite the methods** beforeSuite and afterSuite are called twice.**\r\n**Why this is happening?**\r\n**If I remove the call of the class: MyHook  from my Runner the methods are called just once.**\r\nMy intention with this class is to run a set of data before my tests and clean the data after all the tests are finished.","title":"com.intuit.karate.RuntimeHook behaviour when methods are Overwritten","body":"<p>I would like to understand how the com.intuit.karate.RuntimeHook class behaves when the methods are overwritten.\nI did the following</p>\n<pre><code>public class MyHook implements RuntimeHook {\n @Override\n  public void beforeSuite(Suite suite){\n    \n    Runner.runFeature(&quot;call my feature&quot;, null, true);\n  \n  }\n\n  @Override\n  public void afterSuite(Suite suite) {\n    Runner.runFeature(&quot;call another feature&quot;, null, true);\n\n  } \n}\n</code></pre>\n<p>After I called this class:  MyHook from my Runner Class:\nInside my Runner class I have this method</p>\n<pre><code> @Test\n    void testParallel() { \n        Results results = Runner.path(&quot;my classpath&quot;)\n                .hook(new MyHook())\n                .parallel(1);\n        assertEquals(0, results.getFailCount(), results.getErrorMessages());\n    }\n</code></pre>\n<p>When I run my test Suite the methods** beforeSuite and afterSuite are called twice.**\n<strong>Why this is happening?</strong>\n<strong>If I remove the call of the class: MyHook  from my Runner the methods are called just once.</strong>\nMy intention with this class is to run a set of data before my tests and clean the data after all the tests are finished.</p>\n"},{"tags":["java","oop"],"answers":[{"tags":[],"owner":{"account_id":33407,"reputation":876,"user_id":93508,"display_name":"gbvb"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1296781944,"creation_date":1296781944,"answer_id":4893587,"question_id":4893558,"body_markdown":"It depends on how you treat setters. If you believe that the class can be derived from, you might allow such a call out so that you can override the behavior elsewhere. Otherwise, you can set it as it. \r\n\r\nOf course, Allowing setters explicitly be called would also provide ways to inject additional behaviors during the setting (such as applying security if need be).","title":"calling setters from a constructor","body":"<p>It depends on how you treat setters. If you believe that the class can be derived from, you might allow such a call out so that you can override the behavior elsewhere. Otherwise, you can set it as it. </p>\n\n<p>Of course, Allowing setters explicitly be called would also provide ways to inject additional behaviors during the setting (such as applying security if need be).</p>\n"},{"tags":[],"owner":{"account_id":11683,"reputation":1438179,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"down_vote_count":1,"up_vote_count":94,"is_accepted":true,"score":93,"last_activity_date":1296782160,"creation_date":1296782160,"answer_id":4893604,"question_id":4893558,"body_markdown":"Personally, I would set the variable directly in *most* cases.\r\n\r\nMethods *usually* expect that the instance is fully-formed by the time they&#39;re called. In particular, calling an overridden method from a constructor is a recipe for hard-to-understand code and hard-to-spot bugs.\r\n\r\nHaving said that, I often try to make classes immutable anyway, in which case not only is there no setter, but you *have* to set the final variable from the constructor (or a variable initializer) anyway :)\r\n\r\nWhere properties have logic, setter logic is usually validation and sometimes change propagation to observers. I&#39;d usually expect the constructor parameters to be checked explicitly at the start of the method, and you wouldn&#39;t *want* any change propagation to occur before an instance is fully created anyway.","title":"calling setters from a constructor","body":"<p>Personally, I would set the variable directly in <em>most</em> cases.</p>\n\n<p>Methods <em>usually</em> expect that the instance is fully-formed by the time they're called. In particular, calling an overridden method from a constructor is a recipe for hard-to-understand code and hard-to-spot bugs.</p>\n\n<p>Having said that, I often try to make classes immutable anyway, in which case not only is there no setter, but you <em>have</em> to set the final variable from the constructor (or a variable initializer) anyway :)</p>\n\n<p>Where properties have logic, setter logic is usually validation and sometimes change propagation to observers. I'd usually expect the constructor parameters to be checked explicitly at the start of the method, and you wouldn't <em>want</em> any change propagation to occur before an instance is fully created anyway.</p>\n"},{"tags":[],"owner":{"account_id":172795,"reputation":4791,"user_id":401060,"display_name":"Tyler Holien"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1296782211,"creation_date":1296782211,"answer_id":4893613,"question_id":4893558,"body_markdown":"Unless your setter is doing something more complex than `this.x = x`, I would just set the variable directly. The parameter maps directly to your instance variable, and to me it&#39;s more intent-revealing.","title":"calling setters from a constructor","body":"<p>Unless your setter is doing something more complex than <code>this.x = x</code>, I would just set the variable directly. The parameter maps directly to your instance variable, and to me it's more intent-revealing.</p>\n"},{"tags":[],"owner":{"account_id":268218,"reputation":1319,"user_id":556855,"display_name":"Stewart Murrie"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1296782258,"creation_date":1296782258,"answer_id":4893616,"question_id":4893558,"body_markdown":"I rarely do it, and I&#39;ve never had an issue because of that.  It can also have unintended consequences, especially if your setters are overridden in a subclass, or if your setters fire off additional method calls which might not be appropriate during initialization.","title":"calling setters from a constructor","body":"<p>I rarely do it, and I've never had an issue because of that.  It can also have unintended consequences, especially if your setters are overridden in a subclass, or if your setters fire off additional method calls which might not be appropriate during initialization.</p>\n"},{"tags":[],"owner":{"account_id":266709,"reputation":11846,"user_id":554431,"display_name":"bestsss"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1296783029,"creation_date":1296782620,"answer_id":4893646,"question_id":4893558,"body_markdown":"I dont mind either and I don&#39;t have strong pref [and dont adhere to some strict standards], just use your judgment. But if you go w/ setters anyone who overrides the class must be aware the object may not be fully created. That being said make sure no extra code in the setters can publish `this` reference.\r\n\r\nSetters can be useful for standard range checks and so on, thus no extra code to verify the input is needed. Again using setters is slightly dirtier approach.\r\n\r\nUsing the field has obvious benefits (like making sure whoever subclass will not be able to maliciously alter the behavior) and it&#39;s usually preferred, esp. in libraries.\r\n\r\nActually c-tor is one the 3 possible way to create an object (serialization + clone are the other 2), some transient state might need to be handled outside the c-tor, so you still have what to ponder about fields vs setters. (Edit, there is another half way: Unsafe but that&#39;s what serialization uses)","title":"calling setters from a constructor","body":"<p>I dont mind either and I don't have strong pref [and dont adhere to some strict standards], just use your judgment. But if you go w/ setters anyone who overrides the class must be aware the object may not be fully created. That being said make sure no extra code in the setters can publish <code>this</code> reference.</p>\n\n<p>Setters can be useful for standard range checks and so on, thus no extra code to verify the input is needed. Again using setters is slightly dirtier approach.</p>\n\n<p>Using the field has obvious benefits (like making sure whoever subclass will not be able to maliciously alter the behavior) and it's usually preferred, esp. in libraries.</p>\n\n<p>Actually c-tor is one the 3 possible way to create an object (serialization + clone are the other 2), some transient state might need to be handled outside the c-tor, so you still have what to ponder about fields vs setters. (Edit, there is another half way: Unsafe but that's what serialization uses)</p>\n"},{"tags":[],"owner":{"account_id":264830,"reputation":70811,"user_id":551406,"accept_rate":95,"display_name":"Michael Berry"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1296783480,"creation_date":1296783480,"answer_id":4893727,"question_id":4893558,"body_markdown":"My preference is to set them directly in the constructor for a few reasons. Firstly something like `this.x = x;` is just as clear, if not more so than calling a separate method that does the same thing. Secondly the method may have potentially been overridden unless it&#39;s marked final, and calling potentially overridden methods from a constructor is a big no-no in my book. Thirdly, most methods generally assume that the object is already complete when they&#39;re executing, not half way through being constructed. Whilst this shouldn&#39;t cause any issues in this simple case, in more complex cases it can cause seriously subtle bugs that take ages to track down.\r\n\r\nThe main argument for using setters / getters everywhere is that it means you can rename the field by just changing its name in 3 places, its definition, the getter / setter methods, and all should compile and be fine. That argument is null and void these days in my opinion, since any decent modern IDE will rename all occurrences of such a field with a simple keyboard shortcut.","title":"calling setters from a constructor","body":"<p>My preference is to set them directly in the constructor for a few reasons. Firstly something like <code>this.x = x;</code> is just as clear, if not more so than calling a separate method that does the same thing. Secondly the method may have potentially been overridden unless it's marked final, and calling potentially overridden methods from a constructor is a big no-no in my book. Thirdly, most methods generally assume that the object is already complete when they're executing, not half way through being constructed. Whilst this shouldn't cause any issues in this simple case, in more complex cases it can cause seriously subtle bugs that take ages to track down.</p>\n\n<p>The main argument for using setters / getters everywhere is that it means you can rename the field by just changing its name in 3 places, its definition, the getter / setter methods, and all should compile and be fine. That argument is null and void these days in my opinion, since any decent modern IDE will rename all occurrences of such a field with a simple keyboard shortcut.</p>\n"},{"tags":[],"owner":{"account_id":270764,"reputation":4103,"user_id":560902,"accept_rate":80,"display_name":"Jochen Bedersdorfer"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1296783514,"creation_date":1296783514,"answer_id":4893734,"question_id":4893558,"body_markdown":"There is a single reason why our coding standards require the use of accessors (which may also be private). \r\nIf you quickly want to find out what code is changing a field, you simply bring up the call-hierarchy for the setter in Eclipse! \r\n\r\nThis is a huge time-saver in a codebase that has reached 2 million lines of code and also eases refactoring.\r\n","title":"calling setters from a constructor","body":"<p>There is a single reason why our coding standards require the use of accessors (which may also be private). \nIf you quickly want to find out what code is changing a field, you simply bring up the call-hierarchy for the setter in Eclipse! </p>\n\n<p>This is a huge time-saver in a codebase that has reached 2 million lines of code and also eases refactoring.</p>\n"},{"tags":[],"owner":{"account_id":6664,"reputation":85927,"user_id":11296,"display_name":"Bert F"},"down_vote_count":0,"up_vote_count":37,"is_accepted":false,"score":37,"last_activity_date":1483111184,"creation_date":1296785761,"answer_id":4893909,"question_id":4893558,"body_markdown":"I follow two rules about constructors to minimize problems which are why I would not use the mutator method:\r\n\r\n***Constructors (of non-final classes) should call only final or private methods***. If you decide to ignore this rule and let the constructor call non-final/non-private methods, then:\r\n\r\n  * those methods and any methods they may call must be careful not to assume the instance is fully initialized, and\r\n  * the subclasses that override those methods (subclasses that may not even be aware that the superclass constructor is calls those methods) must not assume that the subclass constructor and superclasses&#39; constructors have been fully executed. This problem gets worse the deeper down the inheritance hierarchy the superclass with the &quot;evil&quot; constructor is.\r\n\r\n*Is all that extra cognitive baggage worth it?* You could allow an exception for simple mutators that only assign a value to an instance variable, since there&#39;s little benefit, even that doesn&#39;t seem worth it.\r\n\r\n[[ @Jon Skeet mentions this in his answer: &quot;... In particular, calling an overridden method from a constructor is a recipe for hard-to-understand code and hard-to-spot bugs.&quot; But I don&#39;t think the ramifications of this problem is stressed enough. ]]\r\n\r\n***Constructors should be cautious about leaking `this` before the instance is fully initialized.*** While the previous rule was about methods inside the class and subclasses accessing ivars, you must also be careful about (even final/private) methods passing `this` to other classes and utility functions before `this` is fully initialized.  The more non-private, overridable methods that the constructor calls, the greater the risk of leaking `this`.  \r\n\r\n-----\r\n\r\nSome references about constructors calling non-final, non-private methods:\r\n\r\nhttps://www.securecoding.cert.org/confluence/display/java/MET05-J.+Ensure+that+constructors+do+not+call+overridable+methods\r\n\r\nhttp://www.javaworld.com/article/2074669/core-java/java-netbeans--overridable-method-call-in-constructor.html\r\n\r\nhttp://www.javaspecialists.eu/archive/Issue210.html\r\n\r\n","title":"calling setters from a constructor","body":"<p>I follow two rules about constructors to minimize problems which are why I would not use the mutator method:</p>\n\n<p><strong><em>Constructors (of non-final classes) should call only final or private methods</em></strong>. If you decide to ignore this rule and let the constructor call non-final/non-private methods, then:</p>\n\n<ul>\n<li>those methods and any methods they may call must be careful not to assume the instance is fully initialized, and</li>\n<li>the subclasses that override those methods (subclasses that may not even be aware that the superclass constructor is calls those methods) must not assume that the subclass constructor and superclasses' constructors have been fully executed. This problem gets worse the deeper down the inheritance hierarchy the superclass with the \"evil\" constructor is.</li>\n</ul>\n\n<p><em>Is all that extra cognitive baggage worth it?</em> You could allow an exception for simple mutators that only assign a value to an instance variable, since there's little benefit, even that doesn't seem worth it.</p>\n\n<p>[[ @Jon Skeet mentions this in his answer: \"... In particular, calling an overridden method from a constructor is a recipe for hard-to-understand code and hard-to-spot bugs.\" But I don't think the ramifications of this problem is stressed enough. ]]</p>\n\n<p><strong><em>Constructors should be cautious about leaking <code>this</code> before the instance is fully initialized.</em></strong> While the previous rule was about methods inside the class and subclasses accessing ivars, you must also be careful about (even final/private) methods passing <code>this</code> to other classes and utility functions before <code>this</code> is fully initialized.  The more non-private, overridable methods that the constructor calls, the greater the risk of leaking <code>this</code>.  </p>\n\n<hr>\n\n<p>Some references about constructors calling non-final, non-private methods:</p>\n\n<p><a href=\"https://www.securecoding.cert.org/confluence/display/java/MET05-J.+Ensure+that+constructors+do+not+call+overridable+methods\" rel=\"noreferrer\">https://www.securecoding.cert.org/confluence/display/java/MET05-J.+Ensure+that+constructors+do+not+call+overridable+methods</a></p>\n\n<p><a href=\"http://www.javaworld.com/article/2074669/core-java/java-netbeans--overridable-method-call-in-constructor.html\" rel=\"noreferrer\">http://www.javaworld.com/article/2074669/core-java/java-netbeans--overridable-method-call-in-constructor.html</a></p>\n\n<p><a href=\"http://www.javaspecialists.eu/archive/Issue210.html\" rel=\"noreferrer\">http://www.javaspecialists.eu/archive/Issue210.html</a></p>\n"},{"tags":[],"owner":{"account_id":6922386,"reputation":706,"user_id":5314581,"accept_rate":70,"display_name":"Tymur Berezhnoi"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1679494745,"creation_date":1450946712,"answer_id":34449808,"question_id":4893558,"body_markdown":"Invoking any *`public`*, *`static`*, *non-`final`* methods within constructor it&#39;s up to you, but the best practice is never invoke such methods within constructor, because this methods can be overridden in subclasses and actually only overridden version of this methods will be invoked (If you use polymorphic behavior).\r\n\r\nFor example:\r\n\r\n    public class Foo {\r\n\t\r\n\t    public Foo() {\r\n\t\t    doSmth(); // If you use polymorphic behavior this method will never be invoked\r\n\t    }\r\n\r\n\t    public void doSmth() {\r\n\t\t    System.out.println(&quot;doSmth in super class&quot;);\r\n    \t}\r\n\t\r\n\t    public static void main(String[] args) {\r\n\t\t    new Bar(200);\r\n\t    }\r\n    }\r\n\r\n    class Bar extends Foo {\r\n\r\n\t    private int y;;\r\n\t\r\n    \tpublic Bar(int y) {\r\n\t    \tthis.y = y;\r\n    \t}\r\n\t\r\n\t    @Override\r\n    \tpublic void doSmth() { // This version will be invoked even before Barr object initialized\r\n    \t\tSystem.out.println(y);\r\n\t    }\r\n\t\r\n    }\r\n\r\nIt will print 0.\r\n\r\nFor mo details read [Bruce Eckel &quot;Thinking in Java&quot;][1] chapter &quot;Polymorphism&quot;\r\n\r\n\r\n  [1]: http://www.amazon.com/Thinking-Java-Edition-Bruce-Eckel/dp/0131872486","title":"calling setters from a constructor","body":"<p>Invoking any <em><code>public</code></em>, <em><code>static</code></em>, <em>non-<code>final</code></em> methods within constructor it's up to you, but the best practice is never invoke such methods within constructor, because this methods can be overridden in subclasses and actually only overridden version of this methods will be invoked (If you use polymorphic behavior).</p>\n<p>For example:</p>\n<pre><code>public class Foo {\n\n    public Foo() {\n        doSmth(); // If you use polymorphic behavior this method will never be invoked\n    }\n\n    public void doSmth() {\n        System.out.println(&quot;doSmth in super class&quot;);\n    }\n\n    public static void main(String[] args) {\n        new Bar(200);\n    }\n}\n\nclass Bar extends Foo {\n\n    private int y;;\n\n    public Bar(int y) {\n        this.y = y;\n    }\n\n    @Override\n    public void doSmth() { // This version will be invoked even before Barr object initialized\n        System.out.println(y);\n    }\n\n}\n</code></pre>\n<p>It will print 0.</p>\n<p>For mo details read <a href=\"https://rads.stackoverflow.com/amzn/click/com/0131872486\" rel=\"nofollow noreferrer\" rel=\"nofollow noreferrer\">Bruce Eckel &quot;Thinking in Java&quot;</a> chapter &quot;Polymorphism&quot;</p>\n"}],"owner":{"account_id":173934,"reputation":5023,"user_id":402963,"accept_rate":100,"display_name":"Billworth Vandory"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":46895,"favorite_count":0,"down_vote_count":0,"up_vote_count":73,"accepted_answer_id":4893604,"answer_count":9,"score":73,"last_activity_date":1679494745,"creation_date":1296781691,"question_id":4893558,"body_markdown":"\r\nWhat are the pro&#39;s and con&#39;s of calling out to a mutator from a constructor (if any)\r\n\r\ni.e.:\r\n\r\n    public MyConstructor(int x) {\r\n      this.x = x;\r\n    }\r\n\r\nversus:\r\n\r\n    public MyConstructor(int x) {\r\n      setX(x);\r\n    }\r\n    \r\n    public void setX(int x) {\r\n      this.x = x;\r\n    }\r\n\r\nDo you have a preference?  (This is not homework, just looking at our coding standards doc where it says to always call out to mutators when setting instance var&#39;s in the constructor and I don&#39;t always to this)\r\n\r\n","title":"calling setters from a constructor","body":"<p>What are the pro's and con's of calling out to a mutator from a constructor (if any)</p>\n\n<p>i.e.:</p>\n\n<pre><code>public MyConstructor(int x) {\n  this.x = x;\n}\n</code></pre>\n\n<p>versus:</p>\n\n<pre><code>public MyConstructor(int x) {\n  setX(x);\n}\n\npublic void setX(int x) {\n  this.x = x;\n}\n</code></pre>\n\n<p>Do you have a preference?  (This is not homework, just looking at our coding standards doc where it says to always call out to mutators when setting instance var's in the constructor and I don't always to this)</p>\n"},{"tags":["java","constructor"],"comments":[{"owner":{"account_id":794766,"reputation":158675,"user_id":871026,"accept_rate":76,"display_name":"Reimeus"},"score":1,"creation_date":1679494631,"post_id":75813386,"comment_id":133732251,"body_markdown":"the 2nd method is less secure as `setItem` can be overridden","body":"the 2nd method is less secure as <code>setItem</code> can be overridden"},{"owner":{"account_id":17835,"reputation":303895,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":1,"creation_date":1679494670,"post_id":75813386,"comment_id":133732262,"body_markdown":"Calling methods that a superclass could override in a constructor [is a bad idea](https://stackoverflow.com/questions/3404301/whats-wrong-with-overridable-method-calls-in-constructors). That means **if** you want to call your setters, they should be `final`.","body":"Calling methods that a superclass could override in a constructor <a href=\"https://stackoverflow.com/questions/3404301/whats-wrong-with-overridable-method-calls-in-constructors\">is a bad idea</a>. That means <b>if</b> you want to call your setters, they should be <code>final</code>."}],"owner":{"account_id":26559860,"reputation":49,"user_id":20187870,"display_name":"Juan David"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1679494675,"answer_count":0,"score":0,"last_activity_date":1679494683,"creation_date":1679494461,"question_id":75813386,"body_markdown":"Is this better?\r\n\r\n    public MyClass(String item){\r\n        this.item = item;\r\n    }\r\n\r\nOr this?\r\n\r\n    public MyClass(String item){\r\n        setItem(String item);\r\n    }\r\n\r\nOr are they the same?\r\n\r\nI have been taught both ways, but one professor said that the second method was more secure. I&#39;m not sure why though.\r\n","title":"In a class constructor, is it better to explicitly initialize the fields, or to call setter methods, or is it all the same?","body":"<p>Is this better?</p>\n<pre><code>public MyClass(String item){\n    this.item = item;\n}\n</code></pre>\n<p>Or this?</p>\n<pre><code>public MyClass(String item){\n    setItem(String item);\n}\n</code></pre>\n<p>Or are they the same?</p>\n<p>I have been taught both ways, but one professor said that the second method was more secure. I'm not sure why though.</p>\n"},{"tags":["java","spring","error-handling"],"answers":[{"tags":[],"owner":{"account_id":19535095,"reputation":2864,"user_id":14294053,"display_name":"Mar-Z"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1679494255,"creation_date":1679494255,"answer_id":75813351,"question_id":75813056,"body_markdown":"Extending the class defined in an external library won&#39;t help you because the new class will have a different name and will not be used from the external library. (Unless you can edit their code - probably not an option?).\r\n\r\nThere is a trick however: you can implement your own class with exactly the same signature as the external one. Including the package tree.\r\n\r\nYour class will be found by class loader **before** the external one and hence will be the only one used in application.","title":"How to override third party library&#39;s interface implementation?","body":"<p>Extending the class defined in an external library won't help you because the new class will have a different name and will not be used from the external library. (Unless you can edit their code - probably not an option?).</p>\n<p>There is a trick however: you can implement your own class with exactly the same signature as the external one. Including the package tree.</p>\n<p>Your class will be found by class loader <strong>before</strong> the external one and hence will be the only one used in application.</p>\n"}],"owner":{"account_id":15112091,"reputation":71,"user_id":17936812,"display_name":"rsfan23"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":123,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75813351,"answer_count":1,"score":0,"last_activity_date":1679494255,"creation_date":1679492680,"question_id":75813056,"body_markdown":"Currently in my Spring project I&#39;m using an external library, which provides its own error handler, which is an implementation of an interface. However, due to poor error handling implementation, I would prefer to implement the interface myself and then somehow instruct Java to use my own implementation instead of the provided one. Is something like this possible?\r\n\r\nI tried to make a new class extending current error handler and override methods I want to change, but the overridden methods keep getting invoked instead of my own methods.","title":"How to override third party library&#39;s interface implementation?","body":"<p>Currently in my Spring project I'm using an external library, which provides its own error handler, which is an implementation of an interface. However, due to poor error handling implementation, I would prefer to implement the interface myself and then somehow instruct Java to use my own implementation instead of the provided one. Is something like this possible?</p>\n<p>I tried to make a new class extending current error handler and override methods I want to change, but the overridden methods keep getting invoked instead of my own methods.</p>\n"},{"tags":["java","java-8","java-stream"],"comments":[{"owner":{"account_id":7595189,"reputation":44576,"user_id":5761558,"display_name":"ernest_k"},"score":0,"creation_date":1540454690,"post_id":52984252,"comment_id":92874274,"body_markdown":"Did you attempt to implement it?","body":"Did you attempt to implement it?"}],"answers":[{"tags":[],"owner":{"account_id":1263831,"reputation":388998,"user_id":1221571,"accept_rate":67,"display_name":"Eran"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1540455670,"creation_date":1540454776,"answer_id":52984319,"question_id":52984252,"body_markdown":"Use `Collectors.groupingBy`:\r\n\r\n    Map&lt;Integer, List&lt;EmployeeJob&gt;&gt; map =\r\n        list.stream()\r\n            .collect(Collectors.groupingBy(ej -&gt; ej.getEmployee().getEmployeeId()));","title":"Java 8 group lists to map","body":"<p>Use <code>Collectors.groupingBy</code>:</p>\n\n<pre><code>Map&lt;Integer, List&lt;EmployeeJob&gt;&gt; map =\n    list.stream()\n        .collect(Collectors.groupingBy(ej -&gt; ej.getEmployee().getEmployeeId()));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1522669,"reputation":11674,"user_id":1421925,"accept_rate":90,"display_name":"Magnilex"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1540454788,"creation_date":1540454788,"answer_id":52984322,"question_id":52984252,"body_markdown":"[`groupingBy()`][1] does exactly this:\r\n\r\n    Map&lt;Integer, List&lt;EmployeeJob&gt;&gt; map = jobs.stream().collect(groupingBy(job -&gt; job.getEmployee().getEmployeeId()));\r\n\r\nUnfortunately, you cannot use a method reference since you have to go through the `Employee` class.\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/stream/Collectors.html","title":"Java 8 group lists to map","body":"<p><a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/stream/Collectors.html\" rel=\"nofollow noreferrer\"><code>groupingBy()</code></a> does exactly this:</p>\n\n<pre><code>Map&lt;Integer, List&lt;EmployeeJob&gt;&gt; map = jobs.stream().collect(groupingBy(job -&gt; job.getEmployee().getEmployeeId()));\n</code></pre>\n\n<p>Unfortunately, you cannot use a method reference since you have to go through the <code>Employee</code> class.</p>\n"},{"tags":[],"owner":{"account_id":5870718,"reputation":3152,"user_id":4623129,"display_name":"Khalid Shah"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1540455232,"creation_date":1540455232,"answer_id":52984446,"question_id":52984252,"body_markdown":"    public static void main(String[] args) {\r\n\r\n    List&lt;EmployeeJob&gt; listEmployees= new ArrayList&lt;&gt;();\r\n    System.out.println(listEmployees);//previous list\r\n    \r\n    Map&lt;Integer, List&lt;EmployeeJob&gt;&gt; newMap =\r\n        listEmployees.stream()\r\n            .collect(Collectors.groupingBy(employee-&gt;employee.getEmployee().getEmployeeId()));\r\n    System.out.println(newMap); // new expected map\r\n    }","title":"Java 8 group lists to map","body":"<pre><code>public static void main(String[] args) {\n\nList&lt;EmployeeJob&gt; listEmployees= new ArrayList&lt;&gt;();\nSystem.out.println(listEmployees);//previous list\n\nMap&lt;Integer, List&lt;EmployeeJob&gt;&gt; newMap =\n    listEmployees.stream()\n        .collect(Collectors.groupingBy(employee-&gt;employee.getEmployee().getEmployeeId()));\nSystem.out.println(newMap); // new expected map\n}\n</code></pre>\n"}],"owner":{"account_id":1046862,"reputation":1573,"user_id":1051671,"accept_rate":50,"display_name":"RSCode"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":294,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"accepted_answer_id":52984319,"answer_count":3,"score":1,"last_activity_date":1679494251,"creation_date":1540454525,"question_id":52984252,"body_markdown":"I have a Employee and a EmployeeJob class with the following signatures:\r\n\r\n    public class Employee {\r\n    \r\n        public Integer employeeId;\r\n    \r\n        public Integer getEmployeeId() {\r\n            return employeeId;\r\n        }\r\n    \r\n        public void setEmployeeId(Integer employeeId) {\r\n            this.employeeId = employeeId;\r\n        }\r\n    }\r\n\r\n    public class EmployeeJob {\r\n    \r\n    \tprivate Integer employeeJobId;\r\n    \tprivate Employee employee;\r\n    \tprivate String jobName;\r\n    \tpublic Integer getEmployeeJobId() {\r\n    \t\treturn employeeJobId;\r\n    \t}\r\n    \tpublic void setEmployeeJobId(Integer employeeJobId) {\r\n    \t\tthis.employeeJobId = employeeJobId;\r\n    \t}\r\n    \tpublic Employee getEmployee() {\r\n    \t\treturn employee;\r\n    \t}\r\n    \tpublic void setEmployee(Employee employee) {\r\n    \t\tthis.employee = employee;\r\n    \t}\r\n    \tpublic String getJobName() {\r\n    \t\treturn jobName;\r\n    \t}\r\n    \tpublic void setJobName(String jobName) {\r\n    \t\tthis.jobName = jobName;\r\n    \t}\r\n    }\r\n\r\n\r\nI want a `Map&lt;Integer, List&lt;EmployeeJob&gt;&gt;` from a `List&lt;EmployeeJob&gt;` where the key would be the **employeeId** from the **Employee** class. How can I can I use java 8 streams to group that list by its **employee-&gt;employeeId**?.\r\n\r\nIt is possible to solve in a single stream or should I split it somehow or go for the classical solution? \r\n","title":"Java 8 group lists to map","body":"<p>I have a Employee and a EmployeeJob class with the following signatures:</p>\n\n<pre><code>public class Employee {\n\n    public Integer employeeId;\n\n    public Integer getEmployeeId() {\n        return employeeId;\n    }\n\n    public void setEmployeeId(Integer employeeId) {\n        this.employeeId = employeeId;\n    }\n}\n\npublic class EmployeeJob {\n\n    private Integer employeeJobId;\n    private Employee employee;\n    private String jobName;\n    public Integer getEmployeeJobId() {\n        return employeeJobId;\n    }\n    public void setEmployeeJobId(Integer employeeJobId) {\n        this.employeeJobId = employeeJobId;\n    }\n    public Employee getEmployee() {\n        return employee;\n    }\n    public void setEmployee(Employee employee) {\n        this.employee = employee;\n    }\n    public String getJobName() {\n        return jobName;\n    }\n    public void setJobName(String jobName) {\n        this.jobName = jobName;\n    }\n}\n</code></pre>\n\n<p>I want a <code>Map&lt;Integer, List&lt;EmployeeJob&gt;&gt;</code> from a <code>List&lt;EmployeeJob&gt;</code> where the key would be the <strong>employeeId</strong> from the <strong>Employee</strong> class. How can I can I use java 8 streams to group that list by its <strong>employee->employeeId</strong>?.</p>\n\n<p>It is possible to solve in a single stream or should I split it somehow or go for the classical solution? </p>\n"},{"tags":["java","spring","spring-boot","yaml"],"comments":[{"owner":{"account_id":8056033,"reputation":2316,"user_id":6073148,"accept_rate":75,"display_name":"Zahid Khan"},"score":0,"creation_date":1679471845,"post_id":75809600,"comment_id":133726169,"body_markdown":"Please remove @PropertySource(value=&quot;classpath:utility-customization.yaml&quot;, ignoreResourceNotFound = true) and check what results it yield.","body":"Please remove @PropertySource(value=&quot;classpath:utility-customization.yaml&quot;&zwnj;&#8203;, ignoreResourceNotFound = true) and check what results it yield."},{"owner":{"account_id":20613136,"reputation":21,"user_id":15131863,"display_name":"Dante1501"},"score":0,"creation_date":1679473223,"post_id":75809600,"comment_id":133726443,"body_markdown":"I have tried this but still same error NullPointer Exception","body":"I have tried this but still same error NullPointer Exception"},{"owner":{"account_id":8056033,"reputation":2316,"user_id":6073148,"accept_rate":75,"display_name":"Zahid Khan"},"score":0,"creation_date":1679481857,"post_id":75809600,"comment_id":133728585,"body_markdown":"Could you share the link of github repo?","body":"Could you share the link of github repo?"},{"owner":{"account_id":20613136,"reputation":21,"user_id":15131863,"display_name":"Dante1501"},"score":0,"creation_date":1679490818,"post_id":75809600,"comment_id":133731008,"body_markdown":"https://github.com/dante1501/utility-tool","body":"<a href=\"https://github.com/dante1501/utility-tool\" rel=\"nofollow noreferrer\">github.com/dante1501/utility-tool</a>"}],"answers":[{"tags":[],"owner":{"account_id":16260922,"reputation":89,"user_id":11742268,"display_name":"Ashutosh Mishra"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679493970,"creation_date":1679493970,"answer_id":75813301,"question_id":75809600,"body_markdown":"You can refer below changes in your code:\r\n\r\napplication.yaml\r\n\r\n    \r\n    spring:\r\n      profiles:\r\n        include: utility-customization\r\n\r\nre-name your utility-customization.yaml to application-utility-customization.yaml\r\n\r\nThen, in your application-utility-customization.yaml give proper syntax so that map object can be mapped like below:\r\n\r\n    utility:\r\n      customization:\r\n        section:\r\n          headerSection:\r\n            - displayName: &#39;Gerrit&#39;\r\n              link: &#39;#&#39;\r\n            - displayName: &#39;Gerrit1&#39;\r\n              link: &#39;#&#39;\r\n\r\n\r\nNow remove // @PropertySource(value=&quot;classpath:utility-customization.yaml&quot;) in SectionConfigurations\r\n\r\nAll of this extra work because @PropertySource annotation do not work with YAML files by default.\r\n\r\nHope this helps for you.","title":"Customize properties in Springboot","body":"<p>You can refer below changes in your code:</p>\n<p>application.yaml</p>\n<pre><code>spring:\n  profiles:\n    include: utility-customization\n</code></pre>\n<p>re-name your utility-customization.yaml to application-utility-customization.yaml</p>\n<p>Then, in your application-utility-customization.yaml give proper syntax so that map object can be mapped like below:</p>\n<pre><code>utility:\n  customization:\n    section:\n      headerSection:\n        - displayName: 'Gerrit'\n          link: '#'\n        - displayName: 'Gerrit1'\n          link: '#'\n</code></pre>\n<p>Now remove // @PropertySource(value=&quot;classpath:utility-customization.yaml&quot;) in SectionConfigurations</p>\n<p>All of this extra work because @PropertySource annotation do not work with YAML files by default.</p>\n<p>Hope this helps for you.</p>\n"}],"owner":{"account_id":20613136,"reputation":21,"user_id":15131863,"display_name":"Dante1501"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":71,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1679493970,"creation_date":1679471546,"question_id":75809600,"body_markdown":"I need to use customize properties in springboot by retriving value from yaml file and stored it in Map.\r\nSectionConfigurations \r\n```\r\npackage com.tool.osoutilityapp.customconfig;\r\n\r\n\r\nimport com.tool.osoutilityapp.customconfig.model.Content;\r\nimport org.springframework.boot.context.properties.ConfigurationProperties;\r\nimport org.springframework.context.annotation.Configuration;\r\nimport org.springframework.context.annotation.PropertySource;\r\nimport java.util.List;\r\nimport java.util.Map;\r\n\r\n@Configuration\r\n@PropertySource(value=&quot;classpath:utility-customization.yaml&quot;, ignoreResourceNotFound = true)\r\n@ConfigurationProperties(prefix = &quot;utility.customization&quot;)\r\npublic class SectionConfigurations {\r\n\r\n    private Map&lt;String, List&lt;Content&gt;&gt; section;\r\n\r\n    public Map&lt;String, List&lt;Content&gt;&gt; getSection() {\r\n        return section;\r\n    }\r\n\r\n    public void setSection(Map&lt;String, List&lt;Content&gt;&gt; section) {\r\n        this.section = section;\r\n    }\r\n```\r\n\r\nContent\r\n```\r\npackage com.tool.osoutilityapp.customconfig.model;\r\n\r\npublic class Content {\r\n    private String displayName;\r\n    private String link;\r\n\r\n    public String getDisplayName() {\r\n        return displayName;\r\n    }\r\n\r\n    public void setDisplayName(String displayName) {\r\n        this.displayName = displayName;\r\n    }\r\n\r\n    public String getLink() {\r\n        return link;\r\n    }\r\n\r\n    public void setLink(String link) {\r\n        this.link = link;\r\n    }\r\n}\r\n\r\n```\r\nutility-customization.yaml\r\n\r\n```\r\nutility:\r\n  customization:\r\n    section:\r\n      headerSection:\r\n        - content:\r\n            displayName: &quot;Gerrit&quot;\r\n            link: &quot;#&quot;\r\n        - content:\r\n            displayName: &quot;Gerrit1&quot;\r\n            link: &quot;#&quot;\r\n\r\n```\r\n\r\nUtilityController .java\r\n```\r\npackage com.tool.osoutilityapp.controller;\r\n\r\nimport com.tool.osoutilityapp.customconfig.SectionConfigurations;\r\nimport com.tool.osoutilityapp.customconfig.model.Content;\r\nimport com.tool.osoutilityapp.exception.CustomizeException;\r\nimport com.tool.osoutilityapp.model.UIElements;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.stereotype.Controller;\r\nimport org.springframework.ui.Model;\r\nimport org.springframework.web.bind.annotation.RequestMapping;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\n@Controller\r\npublic class UtilityController {\r\n\r\n    @Autowired\r\n    private SectionConfigurations configurations;\r\n\r\n    @RequestMapping(&quot;/osoUtilityCustomize&quot;)\r\n    public String customizeHome(Model model) throws Exception {\r\n        try{\r\n            List&lt;Content&gt; data = configurations.getSection().get(&quot;headerSection&quot;);\r\n        }catch (Exception e){\r\n            throw new CustomizeException(&quot;Customize content from file not loaded&quot;);\r\n        }\r\n        return &quot;customize-utility&quot;;\r\n    }\r\n}\r\n\r\n```\r\n\r\n**\r\nWhen i try this configuration i will suppose to get value in data attribute from yaml file but its throwing exception.\r\n**\r\n[![enter image description here][1]][1]\r\n*\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/KLGXO.png","title":"Customize properties in Springboot","body":"<p>I need to use customize properties in springboot by retriving value from yaml file and stored it in Map.\nSectionConfigurations</p>\n<pre><code>package com.tool.osoutilityapp.customconfig;\n\n\nimport com.tool.osoutilityapp.customconfig.model.Content;\nimport org.springframework.boot.context.properties.ConfigurationProperties;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.context.annotation.PropertySource;\nimport java.util.List;\nimport java.util.Map;\n\n@Configuration\n@PropertySource(value=&quot;classpath:utility-customization.yaml&quot;, ignoreResourceNotFound = true)\n@ConfigurationProperties(prefix = &quot;utility.customization&quot;)\npublic class SectionConfigurations {\n\n    private Map&lt;String, List&lt;Content&gt;&gt; section;\n\n    public Map&lt;String, List&lt;Content&gt;&gt; getSection() {\n        return section;\n    }\n\n    public void setSection(Map&lt;String, List&lt;Content&gt;&gt; section) {\n        this.section = section;\n    }\n</code></pre>\n<p>Content</p>\n<pre><code>package com.tool.osoutilityapp.customconfig.model;\n\npublic class Content {\n    private String displayName;\n    private String link;\n\n    public String getDisplayName() {\n        return displayName;\n    }\n\n    public void setDisplayName(String displayName) {\n        this.displayName = displayName;\n    }\n\n    public String getLink() {\n        return link;\n    }\n\n    public void setLink(String link) {\n        this.link = link;\n    }\n}\n\n</code></pre>\n<p>utility-customization.yaml</p>\n<pre><code>utility:\n  customization:\n    section:\n      headerSection:\n        - content:\n            displayName: &quot;Gerrit&quot;\n            link: &quot;#&quot;\n        - content:\n            displayName: &quot;Gerrit1&quot;\n            link: &quot;#&quot;\n\n</code></pre>\n<p>UtilityController .java</p>\n<pre><code>package com.tool.osoutilityapp.controller;\n\nimport com.tool.osoutilityapp.customconfig.SectionConfigurations;\nimport com.tool.osoutilityapp.customconfig.model.Content;\nimport com.tool.osoutilityapp.exception.CustomizeException;\nimport com.tool.osoutilityapp.model.UIElements;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.stereotype.Controller;\nimport org.springframework.ui.Model;\nimport org.springframework.web.bind.annotation.RequestMapping;\n\nimport java.util.ArrayList;\nimport java.util.List;\n\n@Controller\npublic class UtilityController {\n\n    @Autowired\n    private SectionConfigurations configurations;\n\n    @RequestMapping(&quot;/osoUtilityCustomize&quot;)\n    public String customizeHome(Model model) throws Exception {\n        try{\n            List&lt;Content&gt; data = configurations.getSection().get(&quot;headerSection&quot;);\n        }catch (Exception e){\n            throw new CustomizeException(&quot;Customize content from file not loaded&quot;);\n        }\n        return &quot;customize-utility&quot;;\n    }\n}\n\n</code></pre>\n<p>**\nWhen i try this configuration i will suppose to get value in data attribute from yaml file but its throwing exception.\n**\n<a href=\"https://i.stack.imgur.com/KLGXO.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/KLGXO.png\" alt=\"enter image description here\" /></a>\n*</p>\n"},{"tags":["java","spring","spring-mvc","annotations"],"answers":[{"tags":[],"owner":{"account_id":78522,"reputation":31537,"user_id":223429,"display_name":"Eugene Kuleshov"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1357136960,"creation_date":1274907866,"answer_id":2916786,"question_id":2916757,"body_markdown":"You should try [Spring Roo][1]. It will generate a simple Spring application for you using simple commands and then you can incrementally extend it. It is a great tool for learning Spring as well as for rapid application development.\r\n\r\nYou can also find several examples of Spring 3.0 MVC [framework](https://src.springframework.org/svn/spring-samples/).\r\n\r\n\r\n  [1]: http://www.springsource.org/roo","title":"Spring 3 Annotations","body":"<p>You should try <a href=\"http://www.springsource.org/roo\" rel=\"nofollow noreferrer\">Spring Roo</a>. It will generate a simple Spring application for you using simple commands and then you can incrementally extend it. It is a great tool for learning Spring as well as for rapid application development.</p>\n\n<p>You can also find several examples of Spring 3.0 MVC <a href=\"https://src.springframework.org/svn/spring-samples/\" rel=\"nofollow noreferrer\">framework</a>.</p>\n"},{"tags":[],"owner":{"account_id":56519,"reputation":22672,"user_id":169277,"accept_rate":97,"display_name":"ant"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1357137000,"creation_date":1274908271,"answer_id":2916840,"question_id":2916757,"body_markdown":"I&#39;d recommend you checkout some of projects from [here](http://www.springbyexample.org/maven/site/spring-by-example-util/1.2/source-repository.html)\r\n\r\n\r\n\r\nand try going trough book spring in action(manning) they give very good example on how to use aspects\r\n\r\nor refer to this [question](https://stackoverflow.com/questions/2560210/learning-spring-mvc-for-web-projects/2560296#2560296) \r\n\r\n","title":"Spring 3 Annotations","body":"<p>I'd recommend you checkout some of projects from <a href=\"http://www.springbyexample.org/maven/site/spring-by-example-util/1.2/source-repository.html\" rel=\"nofollow noreferrer\">here</a></p>\n\n<p>and try going trough book spring in action(manning) they give very good example on how to use aspects</p>\n\n<p>or refer to this <a href=\"https://stackoverflow.com/questions/2560210/learning-spring-mvc-for-web-projects/2560296#2560296\">question</a> </p>\n"},{"tags":[],"owner":{"account_id":49860,"reputation":10595,"user_id":148608,"display_name":"Espen"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1679493967,"creation_date":1274952190,"answer_id":2919882,"question_id":2916757,"body_markdown":"the absolute simplest alternative if you&#39;re familiar with Eclipse is to use [SpringSource Tool Suite][1] (Eclipse plugins)\r\n\r\nThis product has a tcServer bundled inside.\r\n\r\nBy default, STS will start with &quot;dashboard&quot; page in the editor window. From here, you can click on creating a controller as demonstrated by this screenshot:\r\n\r\n[![alt text][2]][2]  \n&lt;sub&gt;(source: [espenberntsenpublic at sites.google.com](https://sites.google.com/site/espenberntsenpublic/stackoverflow/controller-tutorial.png))&lt;/sub&gt;  \n\r\n\r\nThis is a quite simple controller and all you have to do to get it deployed on the bundled tcServer (Tomcat with some extra management features) is to click &quot;next&quot; a few times in the wizard. \r\n\r\nThat&#39;s a very good starting point for doing your own testing!\r\n\r\n\r\n  [1]: https://tanzu.vmware.com/tanzu\r\n  [2]: https://i.stack.imgur.com/45w50.png","title":"Spring 3 Annotations","body":"<p>the absolute simplest alternative if you're familiar with Eclipse is to use <a href=\"https://tanzu.vmware.com/tanzu\" rel=\"nofollow noreferrer\">SpringSource Tool Suite</a> (Eclipse plugins)</p>\n<p>This product has a tcServer bundled inside.</p>\n<p>By default, STS will start with &quot;dashboard&quot; page in the editor window. From here, you can click on creating a controller as demonstrated by this screenshot:</p>\n<p><a href=\"https://i.stack.imgur.com/45w50.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/45w50.png\" alt=\"alt text\" /></a><br />\n<sub>(source: <a href=\"https://sites.google.com/site/espenberntsenpublic/stackoverflow/controller-tutorial.png\" rel=\"nofollow noreferrer\">espenberntsenpublic at sites.google.com</a>)</sub></p>\n<p>This is a quite simple controller and all you have to do to get it deployed on the bundled tcServer (Tomcat with some extra management features) is to click &quot;next&quot; a few times in the wizard.</p>\n<p>That's a very good starting point for doing your own testing!</p>\n"},{"tags":[],"owner":{"account_id":160026,"reputation":8395,"user_id":379779,"accept_rate":57,"display_name":"zawhtut"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1294462529,"creation_date":1294462529,"answer_id":4632419,"question_id":2916757,"body_markdown":"I endorse this blog post,[Layered architecture with Hibernate and Spring][1]. It was a great help for me when I tried to move from the declared xml approach to annotations. It contains the usages of annotations in Entity, Dao and Service layers.\r\n\r\n\r\n  \r\n\r\n\r\n  [1]: http://carinae.net/2009/11/layered-architecture-with-hibernate-and-spring-3/","title":"Spring 3 Annotations","body":"<p>I endorse this blog post,<a href=\"http://carinae.net/2009/11/layered-architecture-with-hibernate-and-spring-3/\" rel=\"nofollow\">Layered architecture with Hibernate and Spring</a>. It was a great help for me when I tried to move from the declared xml approach to annotations. It contains the usages of annotations in Entity, Dao and Service layers.</p>\n"}],"owner":{"account_id":95165,"reputation":5883,"user_id":259348,"accept_rate":72,"display_name":"walnutmon"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2244,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":2916786,"answer_count":4,"score":4,"last_activity_date":1679493967,"creation_date":1274907471,"question_id":2916757,"body_markdown":"I can&#39;t get spring annotations to work at all, I&#39;m just trying to get the simplest thing to work...\r\n\r\n.../mycontext/something -&gt; invokes method:\r\n\r\n    @RequestMapping(value = &quot;/something&quot;)\r\n    @ResponseBody\r\n    public String helloWorld() {\r\n        System.out.println(&quot;hello world&quot;);\r\n        return &quot;Hello World&quot;;\r\n    }\r\n\r\nMy main problem is no matter how hard I try, I can&#39;t find a complete SIMPLE example of the configuration files needed, every spring tutorial is filled with junk, I just one one controller to handle a request with a mapping and can&#39;t get it to work\r\n\r\ndoes anyone know of a simple and complete spring example.  pet-clinic is no good, it&#39;s way too complicated, I have a tiny basic use case and it&#39;s proving to be a real pain to get working (this always happens with Spring)","title":"Spring 3 Annotations","body":"<p>I can't get spring annotations to work at all, I'm just trying to get the simplest thing to work...</p>\n\n<p>.../mycontext/something -> invokes method:</p>\n\n<pre><code>@RequestMapping(value = \"/something\")\n@ResponseBody\npublic String helloWorld() {\n    System.out.println(\"hello world\");\n    return \"Hello World\";\n}\n</code></pre>\n\n<p>My main problem is no matter how hard I try, I can't find a complete SIMPLE example of the configuration files needed, every spring tutorial is filled with junk, I just one one controller to handle a request with a mapping and can't get it to work</p>\n\n<p>does anyone know of a simple and complete spring example.  pet-clinic is no good, it's way too complicated, I have a tiny basic use case and it's proving to be a real pain to get working (this always happens with Spring)</p>\n"},{"tags":["java","algorithm","sorting","quicksort"],"comments":[{"owner":{"account_id":4127333,"reputation":34381,"user_id":3386109,"display_name":"user3386109"},"score":2,"creation_date":1679015284,"post_id":75762911,"comment_id":133649496,"body_markdown":"In the `quickSorting` method, you have an unused variable called `pivot`.","body":"In the <code>quickSorting</code> method, you have an unused variable called <code>pivot</code>."},{"owner":{"account_id":86477,"reputation":192886,"user_id":240443,"accept_rate":79,"display_name":"Amadan"},"score":1,"creation_date":1679015385,"post_id":75762911,"comment_id":133649508,"body_markdown":"You are supposed to subsort from first to pivot and pivot+1 to last, but you are sorting almost all of the elements in both subsorts,","body":"You are supposed to subsort from first to pivot and pivot+1 to last, but you are sorting almost all of the elements in both subsorts,"},{"owner":{"account_id":17741504,"reputation":1083,"user_id":12881733,"display_name":"Bill Mair"},"score":0,"creation_date":1679015585,"post_id":75762911,"comment_id":133649531,"body_markdown":"Adding Random isn&#39;t an issue? See: https://www.baeldung.com/java-quicksort","body":"Adding Random isn&#39;t an issue? See: <a href=\"https://www.baeldung.com/java-quicksort\" rel=\"nofollow noreferrer\">baeldung.com/java-quicksort</a>"},{"owner":{"account_id":732315,"reputation":4996,"user_id":681444,"display_name":"racraman"},"score":0,"creation_date":1679015725,"post_id":75762911,"comment_id":133649544,"body_markdown":"Looking at a few sites (inc Baeldung and Wikipedia), I don’t see that they have that extra `swap` before the `for`.","body":"Looking at a few sites (inc Baeldung and Wikipedia), I don’t see that they have that extra <code>swap</code> before the <code>for</code>."},{"owner":{"account_id":17741504,"reputation":1083,"user_id":12881733,"display_name":"Bill Mair"},"score":0,"creation_date":1679016606,"post_id":75762911,"comment_id":133649655,"body_markdown":"Still not getting why `int randPivot = rand.nextInt(last - first) + first;` is making this **any** better.","body":"Still not getting why <code>int randPivot = rand.nextInt(last - first) + first;</code> is making this <b>any</b> better."},{"owner":{"account_id":6170834,"reputation":1988,"user_id":4809143,"display_name":"moreON"},"score":3,"creation_date":1679019669,"post_id":75762911,"comment_id":133650021,"body_markdown":"@BillMair There&#39;s nothing inherently wrong with using a random pivot, it&#39;s a reasonable and not highly uncommon pivot selection strategy. It&#39;s easy to implement, it&#39;s fast to calculate, and it has a very low probability of resulting in quadratic runtime, and there&#39;s no specific common types of input on which it is guaranteed to cause quadratic runtime. Yes, unlike median-of-medians pivot selection that guarantees a worst-case `O(nlogn)` run-time, it _could_ still result in an unlucky `O(n^2)` run-time, but that&#39;s highly unlikely.","body":"@BillMair There&#39;s nothing inherently wrong with using a random pivot, it&#39;s a reasonable and not highly uncommon pivot selection strategy. It&#39;s easy to implement, it&#39;s fast to calculate, and it has a very low probability of resulting in quadratic runtime, and there&#39;s no specific common types of input on which it is guaranteed to cause quadratic runtime. Yes, unlike median-of-medians pivot selection that guarantees a worst-case <code>O(nlogn)</code> run-time, it <i>could</i> still result in an unlucky <code>O(n^2)</code> run-time, but that&#39;s highly unlikely."},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1679031156,"post_id":75762911,"comment_id":133651258,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."}],"answers":[{"tags":[],"owner":{"account_id":28083875,"reputation":81,"user_id":21454529,"display_name":"Allison Chen"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1679493815,"creation_date":1679493815,"answer_id":75813269,"question_id":75762911,"body_markdown":"Maybe you should modify your `quickSorting` method and partition the array around the `pivot`.\r\n   \r\n\r\n    private void quickSorting(int [] array, int first, int last){\r\n        if (first  &lt; last){\r\n            int pivot = partitioning(array, first, last);\r\n            quickSorting(array, first, pivot - 1);\r\n            quickSorting(array, pivot + 1, last);\r\n        }\r\n    }\r\n","title":"What is wrong with this quicksort algorithm?","body":"<p>Maybe you should modify your <code>quickSorting</code> method and partition the array around the <code>pivot</code>.</p>\n<pre><code>private void quickSorting(int [] array, int first, int last){\n    if (first  &lt; last){\n        int pivot = partitioning(array, first, last);\n        quickSorting(array, first, pivot - 1);\n        quickSorting(array, pivot + 1, last);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":27939108,"reputation":49,"user_id":21335474,"display_name":"User"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":60,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":75813269,"answer_count":1,"score":-1,"last_activity_date":1679493815,"creation_date":1679014867,"question_id":75762911,"body_markdown":"```java\r\npublic class QuicksortRandomPivot{\r\n    \r\n    Random rand = new Random();\r\n\r\n    private int partitioning(int [] array,  int first, int last){\r\n        int randPivot = rand.nextInt(last - first) + first;\r\n        int pivot = array[randPivot];\r\n        int i = first - 1;\r\n        swap(array, randPivot, last);\r\n    \r\n        for (int j = first; j &lt;= last - 1; j++){\r\n            if (array[j]&lt;= pivot){\r\n                i++;\r\n                swap(array, i, j);\r\n            }\r\n        }\r\n        swap(array, i+1, last);\r\n        return i+1;\r\n    }\r\n\r\n    private void quickSorting(int [] array, int first, int last){\r\n        if (first  &lt; last){\r\n            int pivot = partitioning(array, first, last);\r\n            quickSorting(array, first, last - 1);\r\n            quickSorting(array, first + 1, last);\r\n        }\r\n    \r\n    }\r\n \r\n```\r\n\r\n\r\n\r\nBTW there is more to the code but it is just swap and sort method which I&#39;m pretty sure work perfectly so the problem definitely lies somewhere here. Why is my code so slow? Whenever I try with an array length more than 30 it takes kinda a lot of time, specially if I try with 50 or over then it runs but nothing gets printed out so there has got to be a problem. This was my understanding of how the implementation should go, am I correct? If not what did I do wrong?","title":"What is wrong with this quicksort algorithm?","body":"<pre class=\"lang-java prettyprint-override\"><code>public class QuicksortRandomPivot{\n    \n    Random rand = new Random();\n\n    private int partitioning(int [] array,  int first, int last){\n        int randPivot = rand.nextInt(last - first) + first;\n        int pivot = array[randPivot];\n        int i = first - 1;\n        swap(array, randPivot, last);\n    \n        for (int j = first; j &lt;= last - 1; j++){\n            if (array[j]&lt;= pivot){\n                i++;\n                swap(array, i, j);\n            }\n        }\n        swap(array, i+1, last);\n        return i+1;\n    }\n\n    private void quickSorting(int [] array, int first, int last){\n        if (first  &lt; last){\n            int pivot = partitioning(array, first, last);\n            quickSorting(array, first, last - 1);\n            quickSorting(array, first + 1, last);\n        }\n    \n    }\n \n</code></pre>\n<p>BTW there is more to the code but it is just swap and sort method which I'm pretty sure work perfectly so the problem definitely lies somewhere here. Why is my code so slow? Whenever I try with an array length more than 30 it takes kinda a lot of time, specially if I try with 50 or over then it runs but nothing gets printed out so there has got to be a problem. This was my understanding of how the implementation should go, am I correct? If not what did I do wrong?</p>\n"},{"tags":["java","jenkins","groovy","jenkins-job-dsl"],"comments":[{"owner":{"account_id":2634232,"reputation":985,"user_id":2279385,"display_name":"mwallner"},"score":1,"creation_date":1679329513,"post_id":75792716,"comment_id":133698386,"body_markdown":"pretty dated Jenkins version that is... I&#39;d try to see if you can reproduce the issue with the current LTS version, Jenkins migrated to all-things-utf8 with the jdk11 switch somewhen back in 2022.","body":"pretty dated Jenkins version that is... I&#39;d try to see if you can reproduce the issue with the current LTS version, Jenkins migrated to all-things-utf8 with the jdk11 switch somewhen back in 2022."},{"owner":{"account_id":1333316,"reputation":26958,"user_id":1276664,"accept_rate":17,"display_name":"daggett"},"score":0,"creation_date":1679331564,"post_id":75792716,"comment_id":133698985,"body_markdown":"try to use html encoded chars: `currentBuild.displayName = &quot;&amp;#x1F680; job name&quot;`","body":"try to use html encoded chars: <code>currentBuild.displayName = &quot;&amp;#x1F680; job name&quot;</code>"},{"owner":{"account_id":125310,"reputation":37567,"user_id":321013,"accept_rate":85,"display_name":"Martin Ba"},"score":0,"creation_date":1679383364,"post_id":75792716,"comment_id":133707230,"body_markdown":"@daggett - The display name of a Job is not an html field. The escape sequence will show up verbatim on the UI.","body":"@daggett - The display name of a Job is not an html field. The escape sequence will show up verbatim on the UI."},{"owner":{"account_id":1333316,"reputation":26958,"user_id":1276664,"accept_rate":17,"display_name":"daggett"},"score":0,"creation_date":1679418917,"post_id":75792716,"comment_id":133717560,"body_markdown":"Jenkins 2.319.1 `currentBuild.displayName =  &quot;\\uD83D\\uDE80 job name&quot;` works well - i see a rocket","body":"Jenkins 2.319.1 <code>currentBuild.displayName =  &quot;\\uD83D\\uDE80 job name&quot;</code> works well - i see a rocket"},{"owner":{"account_id":125310,"reputation":37567,"user_id":321013,"accept_rate":85,"display_name":"Martin Ba"},"score":0,"creation_date":1679493535,"post_id":75792716,"comment_id":133731881,"body_markdown":"@daggett - I haven&#39;t yet gotten around to trying a recent build, but `currentBuild.displayName` - are you talking about the display name of a *build* or of the job itself (-&gt; https://jenkinsci.github.io/job-dsl-plugin/#method/javaposse.jobdsl.dsl.jobs.FreeStyleJob.displayName )","body":"@daggett - I haven&#39;t yet gotten around to trying a recent build, but <code>currentBuild.displayName</code> - are you talking about the display name of a <i>build</i> or of the job itself (-&gt; <a href=\"https://jenkinsci.github.io/job-dsl-plugin/#method/javaposse.jobdsl.dsl.jobs.FreeStyleJob.displayName\" rel=\"nofollow noreferrer\">jenkinsci.github.io/job-dsl-plugin/#method/&hellip;</a> )"}],"owner":{"account_id":125310,"reputation":37567,"user_id":321013,"accept_rate":85,"display_name":"Martin Ba"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":135,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1679493579,"creation_date":1679328662,"question_id":75792716,"body_markdown":"We tried to create a Job with a display name containing a Rocket Emoji with the Jenkins Job-DSL plugin:\r\n\r\n    freeStyleJob(...) {\r\n      ...\r\n      final def disp_name = &quot;+02 &#128640; Release&quot; // a\r\n      // final def disp_name = &quot;\\uD83D\\uDE80 Release&quot; // b\r\n      displayName(disp_name)\r\n    ...\r\n\r\nNote: [`FreeStyleJob.displayName`](https://jenkinsci.github.io/job-dsl-plugin/#method/javaposse.jobdsl.dsl.jobs.FreeStyleJob.displayName)\r\n\r\n* Unicode Code Point is `0x1F47D`\r\n* The surrogate pair for this is `\\uD83D\\uDE80`\r\n* It does not matter whether the source code contains the utf-8 emoji sequence or the surrogate pair escape sequence.\r\n\r\nIt is possible to inspect the groovy/java string via simple println from withing the Job DSL script.\r\n\r\n    println &quot;job has display_name: $disp_name&quot;\r\n    for (int i=0; i&lt;disp_name.length(); ++i) {\r\n    \tprintln(sprintf(&quot;i $i %08X vs. %04X&quot;, java.lang.Character.codePointAt(disp_name, i), (int)disp_name.charAt(i)))\r\n    }\r\n\r\nThis shows that the string is reported correctly encoded:\r\n\r\n    job has display_name: +02 ? Release\r\n    i 0 0000002B vs. 002B\r\n    i 1 00000030 vs. 0030\r\n    i 2 00000032 vs. 0032\r\n    i 3 00000020 vs. 0020\r\n    i 4 0001F680 vs. D83D\r\n    i 5 0000DE80 vs. DE80\r\n    i 6 00000020 vs. 0020\r\n    i 7 00000052 vs. 0052\r\n    ...\r\n\r\n(The `?` in the string trace output is to be expected on windows, as we do not currently specify the log output encoding to be UTF8.)\r\n\r\n**However** after the Job DSL Job has run successfully, the resulting job will show the following as display name:\r\n\r\n    +02  Release Build\r\n\r\nThat is, the rocket is truncated to `0xF680` which is *not any* meaningful code point, but simply the lower 16 bit of `0001F680`.\r\n\r\nWe **can** create such a job description in the Jenkins Web UI with no problem.\r\n\r\nIt seems at some point in the processing from the Job DSL groovy over to the Jenkins internal APIs the characters get truncated to 16bit?\r\n\r\n----\r\nWindows, Jenkins 2.263.4 with Job DSL plugin version 1.76\r\n\r\n","title":"Jenkins Job DSL groovy mangles emoji code points","body":"<p>We tried to create a Job with a display name containing a Rocket Emoji with the Jenkins Job-DSL plugin:</p>\n<pre><code>freeStyleJob(...) {\n  ...\n  final def disp_name = &quot;+02 🚀 Release&quot; // a\n  // final def disp_name = &quot;\\uD83D\\uDE80 Release&quot; // b\n  displayName(disp_name)\n...\n</code></pre>\n<p>Note: <a href=\"https://jenkinsci.github.io/job-dsl-plugin/#method/javaposse.jobdsl.dsl.jobs.FreeStyleJob.displayName\" rel=\"nofollow noreferrer\"><code>FreeStyleJob.displayName</code></a></p>\n<ul>\n<li>Unicode Code Point is <code>0x1F47D</code></li>\n<li>The surrogate pair for this is <code>\\uD83D\\uDE80</code></li>\n<li>It does not matter whether the source code contains the utf-8 emoji sequence or the surrogate pair escape sequence.</li>\n</ul>\n<p>It is possible to inspect the groovy/java string via simple println from withing the Job DSL script.</p>\n<pre><code>println &quot;job has display_name: $disp_name&quot;\nfor (int i=0; i&lt;disp_name.length(); ++i) {\n    println(sprintf(&quot;i $i %08X vs. %04X&quot;, java.lang.Character.codePointAt(disp_name, i), (int)disp_name.charAt(i)))\n}\n</code></pre>\n<p>This shows that the string is reported correctly encoded:</p>\n<pre><code>job has display_name: +02 ? Release\ni 0 0000002B vs. 002B\ni 1 00000030 vs. 0030\ni 2 00000032 vs. 0032\ni 3 00000020 vs. 0020\ni 4 0001F680 vs. D83D\ni 5 0000DE80 vs. DE80\ni 6 00000020 vs. 0020\ni 7 00000052 vs. 0052\n...\n</code></pre>\n<p>(The <code>?</code> in the string trace output is to be expected on windows, as we do not currently specify the log output encoding to be UTF8.)</p>\n<p><strong>However</strong> after the Job DSL Job has run successfully, the resulting job will show the following as display name:</p>\n<pre><code>+02  Release Build\n</code></pre>\n<p>That is, the rocket is truncated to <code>0xF680</code> which is <em>not any</em> meaningful code point, but simply the lower 16 bit of <code>0001F680</code>.</p>\n<p>We <strong>can</strong> create such a job description in the Jenkins Web UI with no problem.</p>\n<p>It seems at some point in the processing from the Job DSL groovy over to the Jenkins internal APIs the characters get truncated to 16bit?</p>\n<hr />\n<p>Windows, Jenkins 2.263.4 with Job DSL plugin version 1.76</p>\n"},{"tags":["java","swing","icons","font-awesome"],"answers":[{"tags":[],"owner":{"account_id":111681,"reputation":13319,"user_id":1480018,"accept_rate":87,"display_name":"Paul Taylor"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1679493568,"creation_date":1679493568,"answer_id":75813233,"question_id":75812041,"body_markdown":"Got it working, merged code from two answers to https://stackoverflow.com/questions/24177348/font-awesome-with-swing, madprogrammers and  jIconFont code.\r\n\r\n    import java.awt.*;\r\n    import java.awt.image.BufferedImage;\r\n    import java.io.File;\r\n    import java.io.InputStream;\r\n    import javax.imageio.ImageIO;\r\n    import javax.swing.*;\r\n    \r\n    public class FontAwesomeImageCreator\r\n    {\r\n    \r\n        public static void main(String[] args) throws Exception\r\n        {\r\n            InputStream is = FontAwesomeImageCreator.class.getResourceAsStream(&quot;/fa-thin-100.ttf&quot;);\r\n            Font font = Font.createFont(Font.TRUETYPE_FONT, is);\r\n            font = font.deriveFont(Font.PLAIN, 128f);\r\n            saveImage(&quot;\\ue024&quot;, font, Color.BLACK, &quot;radar.png&quot;);\r\n            saveImage(&quot;\\ue024&quot;, font, Color.WHITE, &quot;radar_dark.png&quot;);\r\n        }\r\n    \r\n    \r\n        private static void saveImage(String text, Font font, Color color, String filename) throws Exception\r\n        {\r\n            BufferedImage bi = buildImage (text, font, color);\r\n            File outputfile = new File(&quot;C:\\\\Code\\\\icons&quot;, filename);\r\n            ImageIO.write(bi, &quot;png&quot;, outputfile);\r\n        }\r\n    \r\n        private static BufferedImage buildImage(String text, Font font, Color color) {\r\n            JLabel label = new JLabel(text);\r\n            label.setForeground(color);\r\n            label.setFont(font);\r\n            Dimension dim = label.getPreferredSize();\r\n            int width = dim.width + 1;\r\n            int height = dim.height + 1;\r\n            label.setSize(width, height);\r\n            BufferedImage bufImage =\r\n                    new BufferedImage(width, height, BufferedImage.TYPE_INT_ARGB);\r\n            Graphics2D g2d = bufImage.createGraphics();\r\n            g2d.setRenderingHint(\r\n                    RenderingHints.KEY_TEXT_ANTIALIASING,\r\n                    RenderingHints.VALUE_TEXT_ANTIALIAS_ON);\r\n            g2d.setRenderingHint(\r\n                    RenderingHints.KEY_FRACTIONALMETRICS,\r\n                    RenderingHints.VALUE_FRACTIONALMETRICS_ON);\r\n            label.print(g2d);\r\n            g2d.dispose();\r\n            return bufImage;\r\n        }\r\n    \r\n    }\r\n\r\nSo in this example hardcoded to use the Font Awesome 6 **thin** style, ands create a transparent black and white bitmap image of size 128 x 128 for the radar icon. Could be easily enough parameterized for more general use.","title":"How do I use FontAwesome 6 icons that are based on a true type font into a Icon for use in Java","body":"<p>Got it working, merged code from two answers to <a href=\"https://stackoverflow.com/questions/24177348/font-awesome-with-swing\">Font Awesome with Swing</a>, madprogrammers and  jIconFont code.</p>\n<pre><code>import java.awt.*;\nimport java.awt.image.BufferedImage;\nimport java.io.File;\nimport java.io.InputStream;\nimport javax.imageio.ImageIO;\nimport javax.swing.*;\n\npublic class FontAwesomeImageCreator\n{\n\n    public static void main(String[] args) throws Exception\n    {\n        InputStream is = FontAwesomeImageCreator.class.getResourceAsStream(&quot;/fa-thin-100.ttf&quot;);\n        Font font = Font.createFont(Font.TRUETYPE_FONT, is);\n        font = font.deriveFont(Font.PLAIN, 128f);\n        saveImage(&quot;\\ue024&quot;, font, Color.BLACK, &quot;radar.png&quot;);\n        saveImage(&quot;\\ue024&quot;, font, Color.WHITE, &quot;radar_dark.png&quot;);\n    }\n\n\n    private static void saveImage(String text, Font font, Color color, String filename) throws Exception\n    {\n        BufferedImage bi = buildImage (text, font, color);\n        File outputfile = new File(&quot;C:\\\\Code\\\\icons&quot;, filename);\n        ImageIO.write(bi, &quot;png&quot;, outputfile);\n    }\n\n    private static BufferedImage buildImage(String text, Font font, Color color) {\n        JLabel label = new JLabel(text);\n        label.setForeground(color);\n        label.setFont(font);\n        Dimension dim = label.getPreferredSize();\n        int width = dim.width + 1;\n        int height = dim.height + 1;\n        label.setSize(width, height);\n        BufferedImage bufImage =\n                new BufferedImage(width, height, BufferedImage.TYPE_INT_ARGB);\n        Graphics2D g2d = bufImage.createGraphics();\n        g2d.setRenderingHint(\n                RenderingHints.KEY_TEXT_ANTIALIASING,\n                RenderingHints.VALUE_TEXT_ANTIALIAS_ON);\n        g2d.setRenderingHint(\n                RenderingHints.KEY_FRACTIONALMETRICS,\n                RenderingHints.VALUE_FRACTIONALMETRICS_ON);\n        label.print(g2d);\n        g2d.dispose();\n        return bufImage;\n    }\n\n}\n</code></pre>\n<p>So in this example hardcoded to use the Font Awesome 6 <strong>thin</strong> style, ands create a transparent black and white bitmap image of size 128 x 128 for the radar icon. Could be easily enough parameterized for more general use.</p>\n"}],"owner":{"account_id":111681,"reputation":13319,"user_id":1480018,"accept_rate":87,"display_name":"Paul Taylor"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":215,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75813233,"answer_count":1,"score":0,"last_activity_date":1679493568,"creation_date":1679486787,"question_id":75812041,"body_markdown":"This answer from madprogrammer shows how I can display a FontAwesome icon on a *JLabel* https://stackoverflow.com/questions/24177348/font-awesome-with-swing but my action code is of the form \r\n\r\n    public class EmptyDatabaseAction extends AbstractAction\r\n    {\r\n    \r\n        public EmptyDatabaseAction()\r\n        {\r\n            super(TextLabel.MENU_EMPTY_DB.getMsg());\r\n            this.putValue(Action.SMALL_ICON, Icons.EMPTY_DATABASE.getIconSmall());\r\n            this.putValue(Action.LARGE_ICON_KEY, Icons.EMPTY_DATABASE.getIconLarge());\r\n            this.putValue(Action.SHORT_DESCRIPTION,TextLabel.MENU_EMPTY_DB.getMsg());\r\n        }\r\n        .....\r\n    }\r\n\r\nI.e I define a SMALL_ICON and LARGE_ICON_KEY, it expects subclass of Icon (actually ImageIcon), but the FontAwesome is based on Fonts, so how do I convert a Font based image to an Icon ?","title":"How do I use FontAwesome 6 icons that are based on a true type font into a Icon for use in Java","body":"<p>This answer from madprogrammer shows how I can display a FontAwesome icon on a <em>JLabel</em> <a href=\"https://stackoverflow.com/questions/24177348/font-awesome-with-swing\">Font Awesome with Swing</a> but my action code is of the form</p>\n<pre><code>public class EmptyDatabaseAction extends AbstractAction\n{\n\n    public EmptyDatabaseAction()\n    {\n        super(TextLabel.MENU_EMPTY_DB.getMsg());\n        this.putValue(Action.SMALL_ICON, Icons.EMPTY_DATABASE.getIconSmall());\n        this.putValue(Action.LARGE_ICON_KEY, Icons.EMPTY_DATABASE.getIconLarge());\n        this.putValue(Action.SHORT_DESCRIPTION,TextLabel.MENU_EMPTY_DB.getMsg());\n    }\n    .....\n}\n</code></pre>\n<p>I.e I define a SMALL_ICON and LARGE_ICON_KEY, it expects subclass of Icon (actually ImageIcon), but the FontAwesome is based on Fonts, so how do I convert a Font based image to an Icon ?</p>\n"},{"tags":["java","docker","kotlin","rust","dockerfile"],"comments":[{"owner":{"account_id":446597,"reputation":22464,"user_id":839733,"accept_rate":69,"display_name":"Abhijit Sarkar"},"score":1,"creation_date":1678817319,"post_id":75736655,"comment_id":133605842,"body_markdown":"Rust app can be packaged to native code targeted for the platform of your choice.","body":"Rust app can be packaged to native code targeted for the platform of your choice."},{"owner":{"account_id":7046236,"reputation":20136,"user_id":5397009,"accept_rate":89,"display_name":"Jmb"},"score":1,"creation_date":1678868050,"post_id":75736655,"comment_id":133614492,"body_markdown":"Simply `COPY` the compiled executable to the container.","body":"Simply <code>COPY</code> the compiled executable to the container."},{"owner":{"account_id":7046236,"reputation":20136,"user_id":5397009,"accept_rate":89,"display_name":"Jmb"},"score":1,"creation_date":1678868113,"post_id":75736655,"comment_id":133614509,"body_markdown":"Or see [this question](https://stackoverflow.com/q/63186252/5397009) for an example of a multi-stage Docker configuration that copies the source to an intermediate Docker image for compiling, and then only copies the final executable to the production image.","body":"Or see <a href=\"https://stackoverflow.com/q/63186252/5397009\">this question</a> for an example of a multi-stage Docker configuration that copies the source to an intermediate Docker image for compiling, and then only copies the final executable to the production image."}],"answers":[{"tags":[],"owner":{"account_id":5066903,"reputation":843,"user_id":4066795,"accept_rate":75,"display_name":"etchesketch"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1679493462,"creation_date":1679493462,"answer_id":75813214,"question_id":75736655,"body_markdown":"I think the solution you are looking for is called a multi-stage build. Essentially you will want to create a Dockerfile that will have &quot;stages&quot;. Each stage will be dedicated to different parts of the build. The final stage will produce the image that is used by containers.\r\n\r\nYou will probably start with a rust image and then `git clone` your rust app, `cargo install`, and `cargo build` it before moving on to the stage where your Kotlin app is built. Once you get to the stage where you build the Kotlin image you can copy over your built rust executable.\r\n\r\nThe [official rust image][1] has an example of this usage\r\n```\r\nFROM rust:1.67 as builder\r\nWORKDIR /usr/src/myapp\r\nCOPY . .\r\nRUN cargo install --path .\r\n\r\nFROM debian:bullseye-slim\r\nRUN apt-get update &amp;&amp; apt-get install -y extra-runtime-dependencies &amp;&amp; rm -rf /var/lib/apt/lists/*\r\nCOPY --from=builder /usr/local/cargo/bin/myapp /usr/local/bin/myapp\r\nCMD [&quot;myapp&quot;]\r\n```\r\n\r\nIf you scroll down a bit there is also a link to more information about multi-stage builds. https://docs.docker.com/develop/develop-images/multistage-build/\r\n\r\n\r\n  [1]: https://hub.docker.com/_/rust","title":"How to use a Rust application from a Kotlin application within a docker container?","body":"<p>I think the solution you are looking for is called a multi-stage build. Essentially you will want to create a Dockerfile that will have &quot;stages&quot;. Each stage will be dedicated to different parts of the build. The final stage will produce the image that is used by containers.</p>\n<p>You will probably start with a rust image and then <code>git clone</code> your rust app, <code>cargo install</code>, and <code>cargo build</code> it before moving on to the stage where your Kotlin app is built. Once you get to the stage where you build the Kotlin image you can copy over your built rust executable.</p>\n<p>The <a href=\"https://hub.docker.com/_/rust\" rel=\"nofollow noreferrer\">official rust image</a> has an example of this usage</p>\n<pre><code>FROM rust:1.67 as builder\nWORKDIR /usr/src/myapp\nCOPY . .\nRUN cargo install --path .\n\nFROM debian:bullseye-slim\nRUN apt-get update &amp;&amp; apt-get install -y extra-runtime-dependencies &amp;&amp; rm -rf /var/lib/apt/lists/*\nCOPY --from=builder /usr/local/cargo/bin/myapp /usr/local/bin/myapp\nCMD [&quot;myapp&quot;]\n</code></pre>\n<p>If you scroll down a bit there is also a link to more information about multi-stage builds. <a href=\"https://docs.docker.com/develop/develop-images/multistage-build/\" rel=\"nofollow noreferrer\">https://docs.docker.com/develop/develop-images/multistage-build/</a></p>\n"}],"owner":{"account_id":16348365,"reputation":378,"user_id":11807541,"display_name":"Sayantan Ghosh"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":63,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1679493462,"creation_date":1678815898,"question_id":75736655,"body_markdown":"I have a Rust application (written by a different author) which indexes some VCF files. I have written a Kotlin application which takes in some VCF file paths, makes some modifications and fetches data - with which it should then ideally call the aforementioned Rust application.\r\n\r\nI have implemented it locally, where I have the Rust application repo built, so I am using DefaultExecutor class to run the Rust application from command line. I want to move the whole process into a docker container. I am confused on how to capture the Rust application within the container. Should I use a `RUN git clone.....` for the Kotlin application Dockerfile to fetch the code (it is a private repo). I wanted to know if there is a better way to implement this instead of pulling the source code inside the container.\r\n\r\nAlso, not sure if there is a way to get the Rust application executable only inside the docker container. How would this be implemented?","title":"How to use a Rust application from a Kotlin application within a docker container?","body":"<p>I have a Rust application (written by a different author) which indexes some VCF files. I have written a Kotlin application which takes in some VCF file paths, makes some modifications and fetches data - with which it should then ideally call the aforementioned Rust application.</p>\n<p>I have implemented it locally, where I have the Rust application repo built, so I am using DefaultExecutor class to run the Rust application from command line. I want to move the whole process into a docker container. I am confused on how to capture the Rust application within the container. Should I use a <code>RUN git clone.....</code> for the Kotlin application Dockerfile to fetch the code (it is a private repo). I wanted to know if there is a better way to implement this instead of pulling the source code inside the container.</p>\n<p>Also, not sure if there is a way to get the Rust application executable only inside the docker container. How would this be implemented?</p>\n"},{"tags":["java","spring-boot","spring-security","firebase-authentication"],"answers":[{"tags":[],"owner":{"account_id":7134819,"reputation":5058,"user_id":5454842,"display_name":"Marcus Hert da Coregio"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679493284,"creation_date":1679493284,"answer_id":75813178,"question_id":75810801,"body_markdown":"In your `FirebaseAuthenticationFilter` if there is no `Authorization` header, you can just let the `FilterChain` continue its processing:\r\n\r\n```java\r\nfinal String token = request.getHeader(AUTH_HEADER);\r\nif(token == null) {\r\n    return null;\r\n}\r\n```\r\n\r\nIt shouldn&#39;t be a problem since you configured the `AuthorizationFilter` (`authorizeHttpRequests()`) to permit access to `/api/v1/habit/**` and to require authentication for every other path.","title":"White listing URLs with Java Spring Boot Security that used Firebaes Authentication","body":"<p>In your <code>FirebaseAuthenticationFilter</code> if there is no <code>Authorization</code> header, you can just let the <code>FilterChain</code> continue its processing:</p>\n<pre class=\"lang-java prettyprint-override\"><code>final String token = request.getHeader(AUTH_HEADER);\nif(token == null) {\n    return null;\n}\n</code></pre>\n<p>It shouldn't be a problem since you configured the <code>AuthorizationFilter</code> (<code>authorizeHttpRequests()</code>) to permit access to <code>/api/v1/habit/**</code> and to require authentication for every other path.</p>\n"}],"owner":{"account_id":6751225,"reputation":312,"user_id":5201157,"accept_rate":88,"display_name":"Minon Weerasinghe"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":77,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1679493284,"creation_date":1679479420,"question_id":75810801,"body_markdown":"I&#39;m building a simple API using Java Spring Boot. This does basic CRUD operations. I want some of the paths to be authenticated and some to not be. In this example I want the ```/habit/my``` path to white listed while all the other paths to be secured. One of the other secure paths I&#39;m working with is ```/user```.\r\n\r\nThe issue I have is in this current implemenation. All request including the white listed once hits the filter and says its need to be authenticated. I&#39;m not really sure what I&#39;m doing wrong. I could really use some help understanding where I might be going wrong. very new to working with Java and Spring Boot.\r\n\r\nHere I&#39;ve shared by AuthenticationFilter, Auth Provider, Model(to store authenticated user) and the security config.\r\n\r\nAuthenticationFilter\r\n```\r\npublic class FirebaseAuthenticationFilter extends AbstractAuthenticationProcessingFilter {\r\n\r\n    private static final String AUTH_HEADER = &quot;Authorization&quot;;\r\n\r\n    public FirebaseAuthenticationFilter() {\r\n        super(request -&gt; true);\r\n    }\r\n\r\n    @Override\r\n    public Authentication attemptAuthentication(HttpServletRequest request, HttpServletResponse response) throws AuthenticationException, IOException, ServletException {\r\n        final String token = request.getHeader(AUTH_HEADER);\r\n        if(token == null) {\r\n            throw new IllegalArgumentException(&quot;No Auth Token in header - &quot; + AUTH_HEADER);\r\n        }\r\n        try {\r\n            FirebaseToken firebaseToken = FirebaseAuth.getInstance().verifyIdToken(token);\r\n            AbstractAuthenticationToken authenticationToken = new FirebaseAuthenticationToken(firebaseToken);\r\n            return getAuthenticationManager().authenticate(authenticationToken);\r\n        }\r\n        catch (FirebaseException e) {\r\n            throw new IllegalArgumentException(e.getMessage());\r\n        }\r\n    }\r\n\r\n    @Override\r\n    protected void successfulAuthentication(HttpServletRequest request, HttpServletResponse response, FilterChain chain, Authentication authResult) throws IOException, ServletException {\r\n        // This updates the SecurityContextHolder\r\n        super.successfulAuthentication(request, response, chain, authResult);\r\n        chain.doFilter(request,response);\r\n    }\r\n}\r\n\r\n```\r\nAuthentication Provider\r\n```\r\n@Component\r\npublic class FirebaseAuthenticationProvider implements AuthenticationProvider {\r\n    @Override\r\n    public Authentication authenticate(Authentication authentication) throws AuthenticationException {\r\n        FirebaseAuthenticationToken firebaseAuthenticationToken = (FirebaseAuthenticationToken) authentication;\r\n        firebaseAuthenticationToken.setAuthenticated(true);\r\n        return firebaseAuthenticationToken;\r\n    }\r\n\r\n    @Override\r\n    public boolean supports(Class&lt;?&gt; authentication) {\r\n        return FirebaseAuthenticationToken.class.isAssignableFrom(authentication);\r\n    }\r\n}\r\n\r\n```\r\nAuthenticationToken(Model)\r\n```\r\npublic class FirebaseAuthenticationToken extends AbstractAuthenticationToken {\r\n\r\n    private final FirebaseToken firebaseToken;\r\n\r\n    public FirebaseAuthenticationToken(FirebaseToken firebaseToken)  {\r\n        super(null);\r\n        this.firebaseToken = firebaseToken;\r\n        setAuthenticated(true);\r\n    }\r\n\r\n    @Override\r\n    public Object getCredentials() {\r\n        return firebaseToken;\r\n    }\r\n\r\n    public String getEmail() {\r\n        return firebaseToken.getEmail();\r\n    }\r\n\r\n    public String getAuthUid() {\r\n        return firebaseToken.getUid();\r\n    }\r\n\r\n    @Override\r\n    public Object getPrincipal() {\r\n        return firebaseToken.getClaims();\r\n    }\r\n\r\n    @Override\r\n    public boolean implies(Subject subject) {\r\n        return super.implies(subject);\r\n    }\r\n}\r\n\r\n```\r\nSecurityConfig\r\n```\r\n@RequiredArgsConstructor\r\n@Configuration\r\n@EnableWebSecurity\r\npublic class SecurityConfig {\r\n\r\n    final private FirebaseAuthenticationProvider firebaseAuthenticationProvider;\r\n    @Bean\r\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\r\n        FirebaseAuthenticationFilter filter = new FirebaseAuthenticationFilter();\r\n        //AuthenticationManager is responsible for invoking the authentication provider(s) to authenticate the user.\r\n        filter.setAuthenticationManager(http.getSharedObject(AuthenticationManager.class));\r\n\r\n        http\r\n                .csrf().disable()\r\n                .authenticationProvider(firebaseAuthenticationProvider)\r\n                .authorizeHttpRequests((authz) -&gt; authz\r\n                        .requestMatchers(&quot;/api/v1/habit/**&quot;).permitAll()\r\n                        .anyRequest().authenticated()\r\n                )\r\n                .addFilterAt(filter, BasicAuthenticationFilter.class);\r\n        return http.build();\r\n    }\r\n}\r\n\r\n```","title":"White listing URLs with Java Spring Boot Security that used Firebaes Authentication","body":"<p>I'm building a simple API using Java Spring Boot. This does basic CRUD operations. I want some of the paths to be authenticated and some to not be. In this example I want the <code>/habit/my</code> path to white listed while all the other paths to be secured. One of the other secure paths I'm working with is <code>/user</code>.</p>\n<p>The issue I have is in this current implemenation. All request including the white listed once hits the filter and says its need to be authenticated. I'm not really sure what I'm doing wrong. I could really use some help understanding where I might be going wrong. very new to working with Java and Spring Boot.</p>\n<p>Here I've shared by AuthenticationFilter, Auth Provider, Model(to store authenticated user) and the security config.</p>\n<p>AuthenticationFilter</p>\n<pre><code>public class FirebaseAuthenticationFilter extends AbstractAuthenticationProcessingFilter {\n\n    private static final String AUTH_HEADER = &quot;Authorization&quot;;\n\n    public FirebaseAuthenticationFilter() {\n        super(request -&gt; true);\n    }\n\n    @Override\n    public Authentication attemptAuthentication(HttpServletRequest request, HttpServletResponse response) throws AuthenticationException, IOException, ServletException {\n        final String token = request.getHeader(AUTH_HEADER);\n        if(token == null) {\n            throw new IllegalArgumentException(&quot;No Auth Token in header - &quot; + AUTH_HEADER);\n        }\n        try {\n            FirebaseToken firebaseToken = FirebaseAuth.getInstance().verifyIdToken(token);\n            AbstractAuthenticationToken authenticationToken = new FirebaseAuthenticationToken(firebaseToken);\n            return getAuthenticationManager().authenticate(authenticationToken);\n        }\n        catch (FirebaseException e) {\n            throw new IllegalArgumentException(e.getMessage());\n        }\n    }\n\n    @Override\n    protected void successfulAuthentication(HttpServletRequest request, HttpServletResponse response, FilterChain chain, Authentication authResult) throws IOException, ServletException {\n        // This updates the SecurityContextHolder\n        super.successfulAuthentication(request, response, chain, authResult);\n        chain.doFilter(request,response);\n    }\n}\n\n</code></pre>\n<p>Authentication Provider</p>\n<pre><code>@Component\npublic class FirebaseAuthenticationProvider implements AuthenticationProvider {\n    @Override\n    public Authentication authenticate(Authentication authentication) throws AuthenticationException {\n        FirebaseAuthenticationToken firebaseAuthenticationToken = (FirebaseAuthenticationToken) authentication;\n        firebaseAuthenticationToken.setAuthenticated(true);\n        return firebaseAuthenticationToken;\n    }\n\n    @Override\n    public boolean supports(Class&lt;?&gt; authentication) {\n        return FirebaseAuthenticationToken.class.isAssignableFrom(authentication);\n    }\n}\n\n</code></pre>\n<p>AuthenticationToken(Model)</p>\n<pre><code>public class FirebaseAuthenticationToken extends AbstractAuthenticationToken {\n\n    private final FirebaseToken firebaseToken;\n\n    public FirebaseAuthenticationToken(FirebaseToken firebaseToken)  {\n        super(null);\n        this.firebaseToken = firebaseToken;\n        setAuthenticated(true);\n    }\n\n    @Override\n    public Object getCredentials() {\n        return firebaseToken;\n    }\n\n    public String getEmail() {\n        return firebaseToken.getEmail();\n    }\n\n    public String getAuthUid() {\n        return firebaseToken.getUid();\n    }\n\n    @Override\n    public Object getPrincipal() {\n        return firebaseToken.getClaims();\n    }\n\n    @Override\n    public boolean implies(Subject subject) {\n        return super.implies(subject);\n    }\n}\n\n</code></pre>\n<p>SecurityConfig</p>\n<pre><code>@RequiredArgsConstructor\n@Configuration\n@EnableWebSecurity\npublic class SecurityConfig {\n\n    final private FirebaseAuthenticationProvider firebaseAuthenticationProvider;\n    @Bean\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n        FirebaseAuthenticationFilter filter = new FirebaseAuthenticationFilter();\n        //AuthenticationManager is responsible for invoking the authentication provider(s) to authenticate the user.\n        filter.setAuthenticationManager(http.getSharedObject(AuthenticationManager.class));\n\n        http\n                .csrf().disable()\n                .authenticationProvider(firebaseAuthenticationProvider)\n                .authorizeHttpRequests((authz) -&gt; authz\n                        .requestMatchers(&quot;/api/v1/habit/**&quot;).permitAll()\n                        .anyRequest().authenticated()\n                )\n                .addFilterAt(filter, BasicAuthenticationFilter.class);\n        return http.build();\n    }\n}\n\n</code></pre>\n"},{"tags":["java","mysql","amazon-web-services"],"comments":[{"owner":{"account_id":7501,"reputation":187942,"user_id":13070,"accept_rate":90,"display_name":"Mark B"},"score":0,"creation_date":1471552529,"post_id":39026014,"comment_id":65405043,"body_markdown":"If you ticked the box to failover then the master never &quot;came back online&quot;. The master became the standby and the standby was promoted to master. The DNS would have switched so that the address you were using to connect to the master would have switched to the new master (old standby).","body":"If you ticked the box to failover then the master never &quot;came back online&quot;. The master became the standby and the standby was promoted to master. The DNS would have switched so that the address you were using to connect to the master would have switched to the new master (old standby)."},{"owner":{"account_id":1954753,"reputation":2098,"user_id":1758023,"accept_rate":94,"display_name":"Mark"},"score":0,"creation_date":1471560254,"post_id":39026014,"comment_id":65407856,"body_markdown":"You&#39;re correct, I used the wrong terminology. How do I detect this switch of the DNS in my code? I set java.security.Security.setProperty(&quot;networkaddress.cache.ttl&quot;, &quot;10&quot;); as mentioned in the AWS docs (they said 60 seconds, but I was trying it at 10)","body":"You&#39;re correct, I used the wrong terminology. How do I detect this switch of the DNS in my code? I set java.security.Security.setProperty(&quot;networkaddress.cache.ttl&zwnj;&#8203;&quot;, &quot;10&quot;); as mentioned in the AWS docs (they said 60 seconds, but I was trying it at 10)"},{"owner":{"account_id":7501,"reputation":187942,"user_id":13070,"accept_rate":90,"display_name":"Mark B"},"score":0,"creation_date":1471566253,"post_id":39026014,"comment_id":65409251,"body_markdown":"That should be all you need to do.","body":"That should be all you need to do."}],"answers":[{"tags":[],"owner":{"account_id":1954753,"reputation":2098,"user_id":1758023,"accept_rate":94,"display_name":"Mark"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1471812865,"creation_date":1471812865,"answer_id":39068776,"question_id":39026014,"body_markdown":"I was able to get the failover to work. (It was actually working, I was just not waiting long enough to see it happen). I had some C3P0 settings that were set too high, that was causing C3P0 to not see that the connections were failed.","title":"How to failover to an AWS RDS MySQL replica in Java","body":"<p>I was able to get the failover to work. (It was actually working, I was just not waiting long enough to see it happen). I had some C3P0 settings that were set too high, that was causing C3P0 to not see that the connections were failed.</p>\n"}],"owner":{"account_id":1954753,"reputation":2098,"user_id":1758023,"accept_rate":94,"display_name":"Mark"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":725,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":39068776,"answer_count":1,"score":0,"last_activity_date":1679493204,"creation_date":1471548146,"question_id":39026014,"body_markdown":"I have an AWS MySQL instance on which I have set Multi-AZ redundancy to True. I also have a read-replica that I will use for read-only queries. I am using C3P0 as my connection pool. AWS gives the endpoint for the master instance and for the read-replica, but does not give an endpoint for the redundant master. I am creating two connection pools, one for read access and one for write access. How do I ensure that my service will be able to reach the redundant master if the master fails over? I read about setting the ttl, I am setting that to 30. However, I rebooted the master (and ticked the failover button), but my service was unable to write data until the master had finished rebooting and came back online. I am using Guice to inject the connection pools into my code.","title":"How to failover to an AWS RDS MySQL replica in Java","body":"<p>I have an AWS MySQL instance on which I have set Multi-AZ redundancy to True. I also have a read-replica that I will use for read-only queries. I am using C3P0 as my connection pool. AWS gives the endpoint for the master instance and for the read-replica, but does not give an endpoint for the redundant master. I am creating two connection pools, one for read access and one for write access. How do I ensure that my service will be able to reach the redundant master if the master fails over? I read about setting the ttl, I am setting that to 30. However, I rebooted the master (and ticked the failover button), but my service was unable to write data until the master had finished rebooting and came back online. I am using Guice to inject the connection pools into my code.</p>\n"},{"tags":["javascript","java","selenium-webdriver","shadow-dom"],"owner":{"account_id":10421616,"reputation":4105,"user_id":11061080,"display_name":"SeleniumUser"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679493014,"creation_date":1679491755,"question_id":75812870,"body_markdown":"I have an issue automating a auto-complete search results after enetring characters in the input box. Looks like input entered not recognised and hence the issue. We are using. The input fields is in the in the shadow dom. \r\n\r\n**I can access input field using below javascript**\r\n\r\n    document.querySelector(&quot;xweb-bar&quot;).shadowRoot.querySelector(&#39;#search&#39;).shadowRoot.querySelector(&#39;input.ui5-input-inner&#39;)\r\n\r\n**Able to enter text using below :**\r\n\r\n    document.querySelector(&quot;xweb-bar&quot;).shadowRoot.querySelector(&#39;#search&#39;).shadowRoot.querySelector(&#39;input.ui5-input-inner&#39;).value=&#39;Jane Smith&#39;\r\n\r\n**What I have tried :** \r\n  \r\n\r\n    JavascriptExecutor js = (JavascriptExecutor) getDriver();\r\n    document.querySelector(&quot;xweb-bar&quot;).shadowRoot.querySelector(&#39;#search&#39;).shadowRoot.querySelector(&#39;input.ui5-input-inner&#39;).value=&#39;Jane Smith&#39;;\r\n    document.querySelector(&quot;xweb-bar&quot;).shadowRoot.querySelector(&#39;#search&#39;).shadowRoot.querySelector(&#39;input.ui5-input-inner&#39;).dispatchEvent(new Event(&#39;input&#39;,{&#39;bubbles&#39;:true, cancelable: false}))&quot;);\r\n\r\nBut still no luck and facing issue while performing automation.\r\n\r\n  [![\\[1\\]: https://i.stack.imgur.com/SS02R.png][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/42khQ.png","title":"Shadow DOM not recognising added text?","body":"<p>I have an issue automating a auto-complete search results after enetring characters in the input box. Looks like input entered not recognised and hence the issue. We are using. The input fields is in the in the shadow dom.</p>\n<p><strong>I can access input field using below javascript</strong></p>\n<pre><code>document.querySelector(&quot;xweb-bar&quot;).shadowRoot.querySelector('#search').shadowRoot.querySelector('input.ui5-input-inner')\n</code></pre>\n<p><strong>Able to enter text using below :</strong></p>\n<pre><code>document.querySelector(&quot;xweb-bar&quot;).shadowRoot.querySelector('#search').shadowRoot.querySelector('input.ui5-input-inner').value='Jane Smith'\n</code></pre>\n<p><strong>What I have tried :</strong></p>\n<pre><code>JavascriptExecutor js = (JavascriptExecutor) getDriver();\ndocument.querySelector(&quot;xweb-bar&quot;).shadowRoot.querySelector('#search').shadowRoot.querySelector('input.ui5-input-inner').value='Jane Smith';\ndocument.querySelector(&quot;xweb-bar&quot;).shadowRoot.querySelector('#search').shadowRoot.querySelector('input.ui5-input-inner').dispatchEvent(new Event('input',{'bubbles':true, cancelable: false}))&quot;);\n</code></pre>\n<p>But still no luck and facing issue while performing automation.</p>\n<p><a href=\"https://i.stack.imgur.com/42khQ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/42khQ.png\" alt=\"[1]: https://i.stack.imgur.com/SS02R.png\" /></a></p>\n"},{"tags":["java","ssh","sftp","jsch"],"answers":[{"tags":[],"owner":{"account_id":453710,"reputation":192093,"user_id":850848,"accept_rate":80,"display_name":"Martin Prikryl"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1679405878,"creation_date":1679380687,"answer_id":75797971,"question_id":75796411,"body_markdown":"Yes, that&#39;s a *passphrase* (not a *password*) used to encrypt the private key file.\r\n\r\nIf your private key is not encrypted, use [the overload that does not take the `passphrase`](https://epaul.github.io/jsch-documentation/javadoc/com/jcraft/jsch/JSch.html#addIdentity-java.lang.String-).\r\n\r\n``` java\r\npublic void addIdentity(String prvkey)\r\n```","title":"How to use private key without password in JSch?","body":"<p>Yes, that's a <em>passphrase</em> (not a <em>password</em>) used to encrypt the private key file.</p>\n<p>If your private key is not encrypted, use <a href=\"https://epaul.github.io/jsch-documentation/javadoc/com/jcraft/jsch/JSch.html#addIdentity-java.lang.String-\" rel=\"nofollow noreferrer\">the overload that does not take the <code>passphrase</code></a>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public void addIdentity(String prvkey)\n</code></pre>\n"}],"owner":{"account_id":987434,"reputation":10946,"user_id":1005607,"accept_rate":64,"display_name":"gene b."},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":301,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75797971,"answer_count":1,"score":1,"last_activity_date":1679492928,"creation_date":1679358396,"question_id":75796411,"body_markdown":"I am trying to use [JSch][1] to SFTP a file to a remote location. Per [this article][2], when you do SFTP, you can use **either**  a private key **or** a password for authentication. We are doing private-key authentication.\r\n\r\nJSch has a method called [`addIdentity()`][3] where you register your private key, but it also takes a password:\r\n\r\n&gt; `void\taddIdentity(String prvkey, String passphrase)`\r\n&gt;\r\n&gt; Adds an identity to be used for public-key authentication.\r\n\r\nDoes this refer to the private key also being password-protected itself? What if the private key has no password protection?\r\n\r\n  [1]: http://www.jcraft.com/jsch/\r\n  [2]: https://www.goanywhere.com/blog/are-ssh-keys-or-passwords-better-for-sftp-authentication\r\n  [3]: https://epaul.github.io/jsch-documentation/simple.javadoc/com/jcraft/jsch/JSch.html#addIdentity-java.lang.String-java.lang.String-","title":"How to use private key without password in JSch?","body":"<p>I am trying to use <a href=\"http://www.jcraft.com/jsch/\" rel=\"nofollow noreferrer\">JSch</a> to SFTP a file to a remote location. Per <a href=\"https://www.goanywhere.com/blog/are-ssh-keys-or-passwords-better-for-sftp-authentication\" rel=\"nofollow noreferrer\">this article</a>, when you do SFTP, you can use <strong>either</strong>  a private key <strong>or</strong> a password for authentication. We are doing private-key authentication.</p>\n<p>JSch has a method called <a href=\"https://epaul.github.io/jsch-documentation/simple.javadoc/com/jcraft/jsch/JSch.html#addIdentity-java.lang.String-java.lang.String-\" rel=\"nofollow noreferrer\"><code>addIdentity()</code></a> where you register your private key, but it also takes a password:</p>\n<blockquote>\n<p><code>void addIdentity(String prvkey, String passphrase)</code></p>\n<p>Adds an identity to be used for public-key authentication.</p>\n</blockquote>\n<p>Does this refer to the private key also being password-protected itself? What if the private key has no password protection?</p>\n"},{"tags":["java","spring","spring-boot","spring-boot-test"],"comments":[{"owner":{"account_id":9235242,"reputation":1488,"user_id":6860078,"display_name":"tbatch"},"score":1,"creation_date":1679494528,"post_id":75813095,"comment_id":133732219,"body_markdown":"You&#39;ve annotated the class with `@SpringBootTest`.  The class can&#39;t load until Spring Boot has loaded.  If you want to run code before Spring Boot, you can&#39;t have it as part of the Spring configuration.","body":"You&#39;ve annotated the class with <code>@SpringBootTest</code>.  The class can&#39;t load until Spring Boot has loaded.  If you want to run code before Spring Boot, you can&#39;t have it as part of the Spring configuration."},{"owner":{"account_id":445204,"reputation":127,"user_id":837508,"display_name":"szakal"},"score":0,"creation_date":1679506335,"post_id":75813095,"comment_id":133735762,"body_markdown":"ok, thx. but has it changed? I don&#39;t see any info in spring boot&#39;s migration guides. so far it worked without any issues. The problem is I have to start a wiremock before the context is loaded. and so far I was doing it using @BeforeAll annotation, but after bumping the version it stopped working","body":"ok, thx. but has it changed? I don&#39;t see any info in spring boot&#39;s migration guides. so far it worked without any issues. The problem is I have to start a wiremock before the context is loaded. and so far I was doing it using @BeforeAll annotation, but after bumping the version it stopped working"},{"owner":{"account_id":4104221,"reputation":3989,"user_id":3368818,"accept_rate":75,"display_name":"Woodchuck"},"score":0,"creation_date":1679513094,"post_id":75813095,"comment_id":133737371,"body_markdown":"Which JUnit version are you using? Maybe whichever version you’re using (to get @BeforeAll) is not a compatible dependency of Spring Boot 3, which I believe requires Java 17.","body":"Which JUnit version are you using? Maybe whichever version you’re using (to get @BeforeAll) is not a compatible dependency of Spring Boot 3, which I believe requires Java 17."},{"owner":{"account_id":445204,"reputation":127,"user_id":837508,"display_name":"szakal"},"score":0,"creation_date":1679644796,"post_id":75813095,"comment_id":133761397,"body_markdown":"I&#39;m not specifing junit version so I guess it&#39;s compatible with spring-boot3. And it&#39;s: 5.9.2.\n\nI think, what happens is: spring test runner reads the main class with the context, it starts context initialization and then loads the test class. However, as I mentioned it used to work differently. I managed to hack it and move my initialization to static{} block in the main class which obviously has lots of drawbacks, but I managed to spin wiremock before the context. However, there must be a more elegant solution..","body":"I&#39;m not specifing junit version so I guess it&#39;s compatible with spring-boot3. And it&#39;s: 5.9.2.  I think, what happens is: spring test runner reads the main class with the context, it starts context initialization and then loads the test class. However, as I mentioned it used to work differently. I managed to hack it and move my initialization to static{} block in the main class which obviously has lots of drawbacks, but I managed to spin wiremock before the context. However, there must be a more elegant solution.."}],"owner":{"account_id":445204,"reputation":127,"user_id":837508,"display_name":"szakal"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":445,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":0,"score":4,"last_activity_date":1679492851,"creation_date":1679492851,"question_id":75813095,"body_markdown":"Let&#39;s consider the following test:\r\n```java\r\n@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)\r\npublic class ExampleTest {\r\n\r\n    static {\r\n        System.out.println(&quot;hello from static&quot;);\r\n    }\r\n\r\n    @BeforeAll\r\n    static void beforeAll() {\r\n        System.out.println(&quot;before all!&quot;);\r\n    }\r\n\r\n    @Test\r\n    void contextLoads() {\r\n        System.out.println(&quot;hello!&quot;);\r\n    }\r\n}\r\n```\r\n\r\nI would expect that first, the class loader loads the class and static functions are called. Then the object is instantiated and spring-boot context loads.\r\n\r\nInstated, I see in logs:\r\n```\r\n...\r\n\r\n  .   ____          _            __ _ _\r\n /\\\\ / ___&#39;_ __ _ _(_)_ __  __ _ \\ \\ \\ \\\r\n( ( )\\___ | &#39;_ | &#39;_| | &#39;_ \\/ _` | \\ \\ \\ \\\r\n \\\\/  ___)| |_)| | | | | || (_| |  ) ) ) )\r\n  &#39;  |____| .__|_| |_|_| |_\\__, | / / / /\r\n =========|_|==============|___/=/_/_/_/\r\n :: Spring Boot ::                (v3.0.4)\r\n\r\n(...)\r\n\r\nhello from static\r\nbefore all!\r\n```\r\n\r\n\r\nI think in Spring Boot 2.7.x it used to work as I expect but after migrating to Spring Boot 3 the outcome is as presented above.\r\n\r\nIt comes down to the question: how to run any code before Spring Boot starts loading the context?","title":"Run code before SpringBootTest loads context in spring-boot 3","body":"<p>Let's consider the following test:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)\npublic class ExampleTest {\n\n    static {\n        System.out.println(&quot;hello from static&quot;);\n    }\n\n    @BeforeAll\n    static void beforeAll() {\n        System.out.println(&quot;before all!&quot;);\n    }\n\n    @Test\n    void contextLoads() {\n        System.out.println(&quot;hello!&quot;);\n    }\n}\n</code></pre>\n<p>I would expect that first, the class loader loads the class and static functions are called. Then the object is instantiated and spring-boot context loads.</p>\n<p>Instated, I see in logs:</p>\n<pre><code>...\n\n  .   ____          _            __ _ _\n /\\\\ / ___'_ __ _ _(_)_ __  __ _ \\ \\ \\ \\\n( ( )\\___ | '_ | '_| | '_ \\/ _` | \\ \\ \\ \\\n \\\\/  ___)| |_)| | | | | || (_| |  ) ) ) )\n  '  |____| .__|_| |_|_| |_\\__, | / / / /\n =========|_|==============|___/=/_/_/_/\n :: Spring Boot ::                (v3.0.4)\n\n(...)\n\nhello from static\nbefore all!\n</code></pre>\n<p>I think in Spring Boot 2.7.x it used to work as I expect but after migrating to Spring Boot 3 the outcome is as presented above.</p>\n<p>It comes down to the question: how to run any code before Spring Boot starts loading the context?</p>\n"},{"tags":["java","eclipse","gradle","manifest"],"owner":{"account_id":3480299,"reputation":71,"user_id":2912559,"accept_rate":25,"display_name":"Dravenj"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679492822,"creation_date":1679490364,"question_id":75812630,"body_markdown":"Within the application, I want to display the version of the product using &lt;some class&gt;.class.getPackage().getImplementationVersion() as a consistent construct. This works fine when the application code is ran from a JAR that includes the META-INF/MANIFEST.MF. \r\n\r\nHow can this be done when coding and testing in Eclipse? We use Gradle currently and can generate whatever upon startup, but the application project outputs class files into a bin folder. Including a META-INF/MANIFEST.MF in the bin or the direct sub folder of bin is not recognized, and the method call always returns null. Is there any way to have eclipse recognize a MANIFEST.MF while developing and retaining the project folder output location or on the flip side, is there a way to have the project run with a Gradle built JAR instead of output folder in Eclipse?","title":"Manifest usage while developing in Eclipse using Gradle","body":"<p>Within the application, I want to display the version of the product using .class.getPackage().getImplementationVersion() as a consistent construct. This works fine when the application code is ran from a JAR that includes the META-INF/MANIFEST.MF.</p>\n<p>How can this be done when coding and testing in Eclipse? We use Gradle currently and can generate whatever upon startup, but the application project outputs class files into a bin folder. Including a META-INF/MANIFEST.MF in the bin or the direct sub folder of bin is not recognized, and the method call always returns null. Is there any way to have eclipse recognize a MANIFEST.MF while developing and retaining the project folder output location or on the flip side, is there a way to have the project run with a Gradle built JAR instead of output folder in Eclipse?</p>\n"},{"tags":["java","jackson","pojo"],"comments":[{"owner":{"account_id":213468,"reputation":103486,"user_id":466862,"display_name":"Mark Rotteveel"},"score":1,"creation_date":1679492744,"post_id":75812646,"comment_id":133731593,"body_markdown":"Why are you roundtripping through Jackson? Why are you not directly creating instances of `mObj`?","body":"Why are you roundtripping through Jackson? Why are you not directly creating instances of <code>mObj</code>?"}],"answers":[{"tags":[],"owner":{"account_id":19934545,"reputation":554,"user_id":14607529,"display_name":"ODDminus1"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679492701,"creation_date":1679491845,"answer_id":75812881,"question_id":75812646,"body_markdown":"It seems to be working fine with using the setters you acquire from Lombok:\r\n```java\r\nvar mObjList = data.entrySet().stream()\r\n        .map(entry -&gt; {\r\n            mObj myMObj = new mObj();\r\n            myMObj.setId(entry.getKey());\r\n            myMObj.setValue(entry.getValue());\r\n            return myMObj;\r\n        }).toList();\r\n```\r\nOtherwise, I&#39;d recommend adding an @AllArgsConstructor to your class to allow this simplification:\r\n\r\n```java\r\nvar mObjList = data.entrySet().stream()\r\n        .map(entry -&gt; new mObj(entry.getKey(), entry.getValue()))\r\n        .toList();\r\n```","title":"Convert Map to POJO while maintaining original Types in Java","body":"<p>It seems to be working fine with using the setters you acquire from Lombok:</p>\n<pre class=\"lang-java prettyprint-override\"><code>var mObjList = data.entrySet().stream()\n        .map(entry -&gt; {\n            mObj myMObj = new mObj();\n            myMObj.setId(entry.getKey());\n            myMObj.setValue(entry.getValue());\n            return myMObj;\n        }).toList();\n</code></pre>\n<p>Otherwise, I'd recommend adding an @AllArgsConstructor to your class to allow this simplification:</p>\n<pre class=\"lang-java prettyprint-override\"><code>var mObjList = data.entrySet().stream()\n        .map(entry -&gt; new mObj(entry.getKey(), entry.getValue()))\n        .toList();\n</code></pre>\n"}],"owner":{"account_id":24758513,"reputation":1,"user_id":18643196,"display_name":"br03"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":53,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1679492701,"creation_date":1679490467,"question_id":75812646,"body_markdown":"I need to convert a Map&lt;String, Object&gt; into a POJO and maintain all original types of the Map.\r\n\r\nTake as example this simple POJO:\r\n```\r\n@Data\r\n@JsonInclude(Include.NON_NULL)\r\npublic class mObj{\r\n    private String id;\r\n    private Object value;\r\n}\r\n```\r\n\r\nI need value to be of same type store inside Map&lt;String, Object&gt;. \r\nSo if my map is: \r\n```    \r\nMap&lt;String, Object&gt; data = Map.of(&quot;id&quot;, &quot;123&quot;,  &quot;value&quot;, OffsetDateTime.now(ZoneId.of(&quot;Z&quot;)));\r\n```\r\nthen I&#39;m expecting after converting to myObj that class of Object value is OffsetDateTime. \r\n\r\nI&#39;ve tried to use Jackson for the conversion and though it seems to retain most types, it&#39;s not working fine for timestamp classes like java.time.OffsetDateTime. Instead it converts it to String.\r\n\r\nHow can I maintain the original type coming in the Map for this kind of cases?\r\n","title":"Convert Map to POJO while maintaining original Types in Java","body":"<p>I need to convert a Map&lt;String, Object&gt; into a POJO and maintain all original types of the Map.</p>\n<p>Take as example this simple POJO:</p>\n<pre><code>@Data\n@JsonInclude(Include.NON_NULL)\npublic class mObj{\n    private String id;\n    private Object value;\n}\n</code></pre>\n<p>I need value to be of same type store inside Map&lt;String, Object&gt;.\nSo if my map is:</p>\n<pre><code>Map&lt;String, Object&gt; data = Map.of(&quot;id&quot;, &quot;123&quot;,  &quot;value&quot;, OffsetDateTime.now(ZoneId.of(&quot;Z&quot;)));\n</code></pre>\n<p>then I'm expecting after converting to myObj that class of Object value is OffsetDateTime.</p>\n<p>I've tried to use Jackson for the conversion and though it seems to retain most types, it's not working fine for timestamp classes like java.time.OffsetDateTime. Instead it converts it to String.</p>\n<p>How can I maintain the original type coming in the Map for this kind of cases?</p>\n"},{"tags":["java","multithreading","loops","arraylist"],"comments":[{"owner":{"account_id":20834787,"reputation":5,"user_id":15303202,"display_name":"aidan gaskin"},"score":0,"creation_date":1679398250,"post_id":75800528,"comment_id":133710967,"body_markdown":"@xerx593 to call the addAll() method, the LoadTest variables would already have to be part of some collection, would they not? In that case, I would still need to add a separate add() statement of sorts to each LoadTest. Please advise if this is not the case.","body":"@xerx593 to call the addAll() method, the LoadTest variables would already have to be part of some collection, would they not? In that case, I would still need to add a separate add() statement of sorts to each LoadTest. Please advise if this is not the case."},{"owner":{"account_id":422870,"reputation":25925,"user_id":801894,"display_name":"Solomon Slow"},"score":0,"creation_date":1679398509,"post_id":75800528,"comment_id":133711040,"body_markdown":"It&#39;s hard to write a program that truly does 40 different things without writing a _lot_ of lines of code. Each one of those 40 different threads must have its own unique thread function, right? That&#39;s got to be at least a few hundred lines of code right there. And then you had to write at least 40 different lines to create each thread, and more lines of code to create the parameters that are passed to each thread. It&#39;s kind of hard to imagine how you can avoid writing 40 `.start()` calls... \\*IF\\* the threads _truly are_ doing 40 different things.","body":"It&#39;s hard to write a program that truly does 40 different things without writing a <i>lot</i> of lines of code. Each one of those 40 different threads must have its own unique thread function, right? That&#39;s got to be at least a few hundred lines of code right there. And then you had to write at least 40 different lines to create each thread, and more lines of code to create the parameters that are passed to each thread. It&#39;s kind of hard to imagine how you can avoid writing 40 <code>.start()</code> calls... *IF* the threads <i>truly are</i> doing 40 different things."},{"owner":{"account_id":20834787,"reputation":5,"user_id":15303202,"display_name":"aidan gaskin"},"score":0,"creation_date":1679398694,"post_id":75800528,"comment_id":133711083,"body_markdown":"@SolomonSlow Its plausible I make each of the 40 threads carry out the same functionality. Would this potentially lead to a solution of skipping the 40 .add()/.start() calls do you think?","body":"@SolomonSlow Its plausible I make each of the 40 threads carry out the same functionality. Would this potentially lead to a solution of skipping the 40 .add()/.start() calls do you think?"},{"owner":{"account_id":422870,"reputation":25925,"user_id":801894,"display_name":"Solomon Slow"},"score":0,"creation_date":1679398935,"post_id":75800528,"comment_id":133711143,"body_markdown":"If 40 threads all are running the same thread function, maybe with different parameters for each, then you almost certainly can create them and start them in a loop. Maybe the loop iterates over some collection of 40 different objects or &quot;records&quot; or &quot;configurations&quot; from which the parameters for the thread function are obtained.","body":"If 40 threads all are running the same thread function, maybe with different parameters for each, then you almost certainly can create them and start them in a loop. Maybe the loop iterates over some collection of 40 different objects or &quot;records&quot; or &quot;configurations&quot; from which the parameters for the thread function are obtained."},{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":0,"creation_date":1679401246,"post_id":75800528,"comment_id":133711736,"body_markdown":"Maybe the use of [executors](https://docs.oracle.com/javase/tutorial/essential/concurrency/executors.html) is appropriate for your situation?","body":"Maybe the use of <a href=\"https://docs.oracle.com/javase/tutorial/essential/concurrency/executors.html\" rel=\"nofollow noreferrer\">executors</a> is appropriate for your situation?"}],"answers":[{"tags":[],"owner":{"account_id":20834787,"reputation":5,"user_id":15303202,"display_name":"aidan gaskin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1679400467,"creation_date":1679400467,"answer_id":75801010,"question_id":75800528,"body_markdown":"I have managed to work this. Code implementation below. Thank you for your comments helping. \r\n\r\n\tpublic static void doTest() throws InterruptedException\r\n\t{\r\n\t\t//list to hold the threads\r\n\t\tArrayList&lt;LoadTest&gt; threadList = new ArrayList&lt;LoadTest&gt;();\r\n\t\t//defining the number of threads \r\n\t\tLoadTest[] objects = new LoadTest[40];\r\n\t\t//loop through the size of the LoadTest list and create a new thread\r\n\t\tfor(int i = 0; i&lt;objects.length; i++)\r\n\t\t{\r\n\t\t\tobjects[i] = new LoadTest();\r\n\t\t}\r\n\t\t\r\n\t\t//add the load test to the ArrayList \r\n\t\tfor(LoadTest obj: objects)\r\n\t\t{\r\n\t\t\tif(obj.getClass() == LoadTest.class)\r\n\t\t\t{\r\n\t\t\t\tthreadList.add(obj);\r\n\t\t\t}\r\n\t\t}\r\n\t\t//run all tests \r\n\t\tfor(LoadTest temp: threadList)\r\n\t\t{\r\n\t\t\ttemp.start();\r\n\t\t}\r\n\t\t//seperate loop to ensure all tests run concurrently, but\r\n\t\t//programme prints execution time seperately\r\n\t\tfor(LoadTest temp: threadList)\r\n\t\t{\r\n\t\t\ttemp.join();\r\n\t\t}\r\n\t}","title":"Adding multiple variables, of a single datatype/class, to an ArrayList without singularly calling the .add method?","body":"<p>I have managed to work this. Code implementation below. Thank you for your comments helping.</p>\n<pre><code>public static void doTest() throws InterruptedException\n{\n    //list to hold the threads\n    ArrayList&lt;LoadTest&gt; threadList = new ArrayList&lt;LoadTest&gt;();\n    //defining the number of threads \n    LoadTest[] objects = new LoadTest[40];\n    //loop through the size of the LoadTest list and create a new thread\n    for(int i = 0; i&lt;objects.length; i++)\n    {\n        objects[i] = new LoadTest();\n    }\n    \n    //add the load test to the ArrayList \n    for(LoadTest obj: objects)\n    {\n        if(obj.getClass() == LoadTest.class)\n        {\n            threadList.add(obj);\n        }\n    }\n    //run all tests \n    for(LoadTest temp: threadList)\n    {\n        temp.start();\n    }\n    //seperate loop to ensure all tests run concurrently, but\n    //programme prints execution time seperately\n    for(LoadTest temp: threadList)\n    {\n        temp.join();\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3380632,"reputation":14294,"user_id":2837741,"accept_rate":100,"display_name":"daniu"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679401641,"creation_date":1679401641,"answer_id":75801206,"question_id":75800528,"body_markdown":"Since you just want to start all your threads, and keep them in a list just to join on them afterwards, this is an alternative to do this:\r\n\r\n```\r\nExecutorService executor = Executors.newFixedThreadPool(40);\r\nCompletableFuture[] futures =\r\n IntStream.range(0, 40)          // a loop to 40 essentially\r\n .mapToObj(i -&gt; new LoadTest())  // create a task in each \r\n .map(lt -&gt; CompletableFuture.runAsync(lt, executor)) // submit to a thread\r\n .toArray(CompletableFuture[]::new);  // collect all the threads\r\nCompletableFuture.allOf(futures).join();\r\n```\r\n\r\nIn general, directly creating a `Thread` and starting it is a somewhat obsolete means of concurrency in Java. The `ExecutorService` allows you to define a pool of threads your tasks will run in, giving you better control over how many threads actually run in parallel. `CompletableFuture` is a high level construct to easily manage concurrent processing pipelines.","title":"Adding multiple variables, of a single datatype/class, to an ArrayList without singularly calling the .add method?","body":"<p>Since you just want to start all your threads, and keep them in a list just to join on them afterwards, this is an alternative to do this:</p>\n<pre><code>ExecutorService executor = Executors.newFixedThreadPool(40);\nCompletableFuture[] futures =\n IntStream.range(0, 40)          // a loop to 40 essentially\n .mapToObj(i -&gt; new LoadTest())  // create a task in each \n .map(lt -&gt; CompletableFuture.runAsync(lt, executor)) // submit to a thread\n .toArray(CompletableFuture[]::new);  // collect all the threads\nCompletableFuture.allOf(futures).join();\n</code></pre>\n<p>In general, directly creating a <code>Thread</code> and starting it is a somewhat obsolete means of concurrency in Java. The <code>ExecutorService</code> allows you to define a pool of threads your tasks will run in, giving you better control over how many threads actually run in parallel. <code>CompletableFuture</code> is a high level construct to easily manage concurrent processing pipelines.</p>\n"},{"tags":[],"owner":{"account_id":5998820,"reputation":12656,"user_id":4712734,"display_name":"DuncG"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679492614,"creation_date":1679492246,"answer_id":75812972,"question_id":75800528,"body_markdown":"Implement your task as `Runnable` rather than as a sub-class of `Thread`, this means you can use it with `Thread` or `ExecutorService`. If say you needed 10,000 instances later on, then a fixed sized thread pool `ExecutorService` or use of LOOM virtual threads would be preferred to something that `extends Thread`:\r\n\r\n    class LoadTest implements Runnable {\r\n        public void run() {\r\n            // whatever\r\n        }\r\n    }\r\n\r\nYou don&#39;t need a lot of code to kick off 40 instances, each in own named thread which might help if debugging or viewing stack traces:\r\n\r\n    List&lt;Thread&gt; tasks = IntStream.range(0, 40)\r\n            .mapToObj(i -&gt; new Thread(new LoadTest(), &quot;MyThread-&quot;+i))\r\n            .peek(Thread::start)\r\n            .toList();\r\n\r\n    // Wait for all to end\r\n    for(Thread t : tasks) {\r\n        t.join();\r\n    }\r\n","title":"Adding multiple variables, of a single datatype/class, to an ArrayList without singularly calling the .add method?","body":"<p>Implement your task as <code>Runnable</code> rather than as a sub-class of <code>Thread</code>, this means you can use it with <code>Thread</code> or <code>ExecutorService</code>. If say you needed 10,000 instances later on, then a fixed sized thread pool <code>ExecutorService</code> or use of LOOM virtual threads would be preferred to something that <code>extends Thread</code>:</p>\n<pre><code>class LoadTest implements Runnable {\n    public void run() {\n        // whatever\n    }\n}\n</code></pre>\n<p>You don't need a lot of code to kick off 40 instances, each in own named thread which might help if debugging or viewing stack traces:</p>\n<pre><code>List&lt;Thread&gt; tasks = IntStream.range(0, 40)\n        .mapToObj(i -&gt; new Thread(new LoadTest(), &quot;MyThread-&quot;+i))\n        .peek(Thread::start)\n        .toList();\n\n// Wait for all to end\nfor(Thread t : tasks) {\n    t.join();\n}\n</code></pre>\n"}],"owner":{"account_id":20834787,"reputation":5,"user_id":15303202,"display_name":"aidan gaskin"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":68,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"accepted_answer_id":75801010,"answer_count":3,"score":-1,"last_activity_date":1679492614,"creation_date":1679397615,"question_id":75800528,"body_markdown":"I currently have 40 unique threads in Java, all of which will carry out their own duties, however for each thread to start we need to call the .start() method. \r\n\r\nIn order to do this will incur an additional 40 statements, calling .start() on each thread, and it doesn&#39;t seem intuitive. \r\n\r\nI wanted to add all 40 threads to an ArrayList and loop through it to call .start() on all threads. However, even just adding the threads to an ArrayList requires 40 additional statements, calling .add() to each thread. \r\n\r\nI have tried some reflection techniques, to no avail (I am still a newbie programmer). \r\n\r\nIs there a simple solution I am missing? Does Java not support this? \r\n\r\n\r\nSo my basic code so far follows this format:\r\n\r\n    public static void main(String[] args)\r\n    {\r\n        LoadTest thread1 = new LoadTest(); //then this is repeated 40 times. \r\n        thread1.start(); //this is repeated 40 times.\r\n    }\r\n\r\n","title":"Adding multiple variables, of a single datatype/class, to an ArrayList without singularly calling the .add method?","body":"<p>I currently have 40 unique threads in Java, all of which will carry out their own duties, however for each thread to start we need to call the .start() method.</p>\n<p>In order to do this will incur an additional 40 statements, calling .start() on each thread, and it doesn't seem intuitive.</p>\n<p>I wanted to add all 40 threads to an ArrayList and loop through it to call .start() on all threads. However, even just adding the threads to an ArrayList requires 40 additional statements, calling .add() to each thread.</p>\n<p>I have tried some reflection techniques, to no avail (I am still a newbie programmer).</p>\n<p>Is there a simple solution I am missing? Does Java not support this?</p>\n<p>So my basic code so far follows this format:</p>\n<pre><code>public static void main(String[] args)\n{\n    LoadTest thread1 = new LoadTest(); //then this is repeated 40 times. \n    thread1.start(); //this is repeated 40 times.\n}\n</code></pre>\n"},{"tags":["java","visual-studio-code","gradle"],"comments":[{"owner":{"account_id":74704,"reputation":11534,"user_id":214525,"accept_rate":100,"display_name":"f1sh"},"score":1,"creation_date":1679492668,"post_id":75813028,"comment_id":133731557,"body_markdown":"your vscode seems to use a different java version to run your code. Can you verify that in the settings?","body":"your vscode seems to use a different java version to run your code. Can you verify that in the settings?"},{"owner":{"account_id":2024954,"reputation":51,"user_id":7769830,"display_name":"Rain"},"score":0,"creation_date":1679493499,"post_id":75813028,"comment_id":133731860,"body_markdown":"Hm, the only thing I can see is by looking at the Java projects section in the explorer, and it says JRE System Library [JavaSE-19] there.","body":"Hm, the only thing I can see is by looking at the Java projects section in the explorer, and it says JRE System Library [JavaSE-19] there."},{"owner":{"account_id":6286249,"reputation":180,"user_id":4885365,"display_name":"Mruk"},"score":1,"creation_date":1679494364,"post_id":75813028,"comment_id":133732158,"body_markdown":"Upgrade to a newer version of Gradle that supports Java 19. Alternatively, you can downgrade your system&#39;s Java version to a version that is compatible with Gradle 7.4.2, such as Java 17.","body":"Upgrade to a newer version of Gradle that supports Java 19. Alternatively, you can downgrade your system&#39;s Java version to a version that is compatible with Gradle 7.4.2, such as Java 17."},{"owner":{"account_id":2024954,"reputation":51,"user_id":7769830,"display_name":"Rain"},"score":0,"creation_date":1679495033,"post_id":75813028,"comment_id":133732386,"body_markdown":"That explains why it works on the command line, the system version is 8.0.2. What I&#39;m _not_ following is why it keeps pulling in 7.4.2 when the file specifies Java 19, and the wrapper properties specifies 8.0.2. I&#39;ve cleaned out all gradle files from the directory and it&#39;s _still_ pulling 7.4.2.","body":"That explains why it works on the command line, the system version is 8.0.2. What I&#39;m <i>not</i> following is why it keeps pulling in 7.4.2 when the file specifies Java 19, and the wrapper properties specifies 8.0.2. I&#39;ve cleaned out all gradle files from the directory and it&#39;s <i>still</i> pulling 7.4.2."},{"owner":{"account_id":2024954,"reputation":51,"user_id":7769830,"display_name":"Rain"},"score":0,"creation_date":1679496837,"post_id":75813028,"comment_id":133733009,"body_markdown":"Well, I thought it was due to the Gradle extension in VS Code not supporting Java 19, but the prerelease version does and _that_ keeps trying to use 7.4.2. Odd.","body":"Well, I thought it was due to the Gradle extension in VS Code not supporting Java 19, but the prerelease version does and <i>that</i> keeps trying to use 7.4.2. Odd."},{"owner":{"account_id":25311208,"reputation":7305,"user_id":19133920,"display_name":"JialeDu"},"score":0,"creation_date":1679552128,"post_id":75813028,"comment_id":133742709,"body_markdown":"Install a newer version of Gradle globally.","body":"Install a newer version of Gradle globally."},{"owner":{"account_id":2024954,"reputation":51,"user_id":7769830,"display_name":"Rain"},"score":0,"creation_date":1679575187,"post_id":75813028,"comment_id":133748062,"body_markdown":"The global install was already the latest version. I&#39;m not sure why it was being so uncooperative, but I wound up falling back to 7.4.2 and Java 17.","body":"The global install was already the latest version. I&#39;m not sure why it was being so uncooperative, but I wound up falling back to 7.4.2 and Java 17."},{"owner":{"account_id":2024954,"reputation":51,"user_id":7769830,"display_name":"Rain"},"score":0,"creation_date":1679664161,"post_id":75813028,"comment_id":133766104,"body_markdown":"I think the problem with doing that here is that it isn&#39;t really a solution--it&#39;s the obvious workaround, but it won&#39;t help if you need to use any of those versions for some reason.","body":"I think the problem with doing that here is that it isn&#39;t really a solution--it&#39;s the obvious workaround, but it won&#39;t help if you need to use any of those versions for some reason."},{"owner":{"account_id":25311208,"reputation":7305,"user_id":19133920,"display_name":"JialeDu"},"score":0,"creation_date":1679983499,"post_id":75813028,"comment_id":133814094,"body_markdown":"If you have the full error log and how to reproduce it, you can [report it on GitHub](https://github.com/redhat-developer/vscode-java/issues/new) to get a developer response.","body":"If you have the full error log and how to reproduce it, you can <a href=\"https://github.com/redhat-developer/vscode-java/issues/new\" rel=\"nofollow noreferrer\">report it on GitHub</a> to get a developer response."}],"owner":{"account_id":2024954,"reputation":51,"user_id":7769830,"display_name":"Rain"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":209,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679492588,"creation_date":1679492588,"question_id":75813028,"body_markdown":"I have a Gradle project, and it compiles if I use `gradle build` directly. Everything works, all the tasks are executed successfully, etc.\r\n\r\nBut when I hit run in VS Code, it throws out the following error:\r\n```\r\nThe supplied phased action failed with an exception.\r\nCould not open init generic class cache for initialization script &#39;C:\\Users\\Person\\AppData\\Roaming\\Code\\User\\globalStorage\\redhat.java\\1.16.0\\config_win\\org.eclipse.osgi\\53\\0\\.cp\\gradle\\init\\init.gradle&#39; (C:\\Users\\Person\\.gradle\\caches\\7.4.2\\scripts\\7s4n1zerenary6wu67e7f3xej).\r\nCould not compile initialization script &#39;C:\\Users\\Person\\AppData\\Roaming\\Code\\User\\globalStorage\\redhat.java\\1.16.0\\config_win\\org.eclipse.osgi\\53\\0\\.cp\\gradle\\init\\init.gradle&#39;.\r\nstartup failed:\r\nGeneral error during conversion: Unsupported class file major version 63\r\n```\r\n\r\nMajor version 63 corresponds to Java 19, and Java 19 is returned by `java -version` and on the path correctly. And, obviously, there&#39;s no problem with building it directly.\r\n\r\nTo make it extra strange, the project then runs despite the build failure (probably because it&#39;s already compiled).","title":"Gradle Compiles via Command Line but not Visual Studio Code","body":"<p>I have a Gradle project, and it compiles if I use <code>gradle build</code> directly. Everything works, all the tasks are executed successfully, etc.</p>\n<p>But when I hit run in VS Code, it throws out the following error:</p>\n<pre><code>The supplied phased action failed with an exception.\nCould not open init generic class cache for initialization script 'C:\\Users\\Person\\AppData\\Roaming\\Code\\User\\globalStorage\\redhat.java\\1.16.0\\config_win\\org.eclipse.osgi\\53\\0\\.cp\\gradle\\init\\init.gradle' (C:\\Users\\Person\\.gradle\\caches\\7.4.2\\scripts\\7s4n1zerenary6wu67e7f3xej).\nCould not compile initialization script 'C:\\Users\\Person\\AppData\\Roaming\\Code\\User\\globalStorage\\redhat.java\\1.16.0\\config_win\\org.eclipse.osgi\\53\\0\\.cp\\gradle\\init\\init.gradle'.\nstartup failed:\nGeneral error during conversion: Unsupported class file major version 63\n</code></pre>\n<p>Major version 63 corresponds to Java 19, and Java 19 is returned by <code>java -version</code> and on the path correctly. And, obviously, there's no problem with building it directly.</p>\n<p>To make it extra strange, the project then runs despite the build failure (probably because it's already compiled).</p>\n"},{"tags":["java","mongodb","spring-boot","testing"],"owner":{"account_id":6414100,"reputation":2253,"user_id":4972832,"accept_rate":83,"display_name":"Pranav MS"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":425,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679492452,"creation_date":1679492452,"question_id":75813004,"body_markdown":"\r\nJava Version  :\r\n\r\n    PS C:\\Users\\pranav\\workspace\\verification-service&gt; java -version\r\n    openjdk version &quot;1.8.0_332&quot;\r\n    IBM Semeru Runtime Open Edition (build 1.8.0_332-b09)                                                                                  \r\n    Eclipse OpenJ9 VM (build openj9-0.32.0, JRE 1.8.0 Windows 10 amd64-64-Bit Compressed References 20220422_375 (JIT enabled, AOT enabled)\r\n    OpenJ9   - 9a84ec34e                                                                                                                   \r\n    OMR      - ab24b6666                                                                                                                   \r\n    JCL      - 0b8b8af39a based on jdk8u332-b09)                 \r\n\r\nWhile I am running my test cases it ends up the mongo db error like below.\r\n\r\n    Error creating bean with name &#39;embeddedMongoServer&#39; defined in class path resource [org/springframework/boot/autoconfigure/mongo/embedded/EmbeddedMongoAutoConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [de.flapdoodle.embed.mongo.MongodExecutable]: Factory method &#39;embeddedMongoServer&#39; threw exception; nested exception is java.lang.IllegalArgumentException: this version does not support 32Bit: Version{3.5.5}:Windows:B32\r\n\r\nI have googled but the all the solutions are not working in my case. please help.\r\n\r\nSystem config :\r\n\r\n    Device name\tDESKTOP\r\n    Processor\t11th Gen Intel(R) Core(TM) i5-1135G7 @ 2.40GHz   1.38 GHz\r\n    Installed RAM\t32.0 GB (31.7 GB usable)\r\n    Device ID\t1E79DD99-B448-4FD6-AA3C-632703A24E7E\r\n    Product ID\t00330-80000-00000-AA875\r\n    System type\t64-bit operating system, x64-based processor\r\n    Pen and touch\tNo pen or touch input is available for this display\r\n\r\nFlapdoodle embedded mongo dependency \r\n\r\n    &lt;dependency&gt;\r\n    \t&lt;groupId&gt;de.flapdoodle.embed&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;de.flapdoodle.embed.mongo&lt;/artifactId&gt;\r\n    \t&lt;version&gt;2.0.3&lt;/version&gt;\r\n    \t&lt;scope&gt;test&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n\r\nPOM file config\r\n\r\n    &lt;parent&gt;\r\n    \t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n    \t&lt;version&gt;2.1.4.RELEASE&lt;/version&gt;\r\n    \t&lt;relativePath/&gt;  \r\n    &lt;/parent&gt;\r\n    \r\n    &lt;properties&gt;\r\n    \t&lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n    \t&lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\r\n    \t&lt;slf4j-api.version&gt;1.7.26&lt;/slf4j-api.version&gt;\r\n    \t&lt;java.version&gt;1.8&lt;/java.version&gt;\r\n    \t&lt;spring-cloud.version&gt;Greenwich.SR1&lt;/spring-cloud.version&gt;\r\n    \t&lt;spring.framework.version&gt;5.1.6.RELEASE&lt;/spring.framework.version&gt;\r\n    &lt;/properties&gt;","title":"[de.flapdoodle.embed.mongo.MongodExecutable]: this version does not support 32Bit: Version{3.5.5}:Windows:B32","body":"<p>Java Version  :</p>\n<pre><code>PS C:\\Users\\pranav\\workspace\\verification-service&gt; java -version\nopenjdk version &quot;1.8.0_332&quot;\nIBM Semeru Runtime Open Edition (build 1.8.0_332-b09)                                                                                  \nEclipse OpenJ9 VM (build openj9-0.32.0, JRE 1.8.0 Windows 10 amd64-64-Bit Compressed References 20220422_375 (JIT enabled, AOT enabled)\nOpenJ9   - 9a84ec34e                                                                                                                   \nOMR      - ab24b6666                                                                                                                   \nJCL      - 0b8b8af39a based on jdk8u332-b09)                 \n</code></pre>\n<p>While I am running my test cases it ends up the mongo db error like below.</p>\n<pre><code>Error creating bean with name 'embeddedMongoServer' defined in class path resource [org/springframework/boot/autoconfigure/mongo/embedded/EmbeddedMongoAutoConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [de.flapdoodle.embed.mongo.MongodExecutable]: Factory method 'embeddedMongoServer' threw exception; nested exception is java.lang.IllegalArgumentException: this version does not support 32Bit: Version{3.5.5}:Windows:B32\n</code></pre>\n<p>I have googled but the all the solutions are not working in my case. please help.</p>\n<p>System config :</p>\n<pre><code>Device name DESKTOP\nProcessor   11th Gen Intel(R) Core(TM) i5-1135G7 @ 2.40GHz   1.38 GHz\nInstalled RAM   32.0 GB (31.7 GB usable)\nDevice ID   1E79DD99-B448-4FD6-AA3C-632703A24E7E\nProduct ID  00330-80000-00000-AA875\nSystem type 64-bit operating system, x64-based processor\nPen and touch   No pen or touch input is available for this display\n</code></pre>\n<p>Flapdoodle embedded mongo dependency</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;de.flapdoodle.embed&lt;/groupId&gt;\n    &lt;artifactId&gt;de.flapdoodle.embed.mongo&lt;/artifactId&gt;\n    &lt;version&gt;2.0.3&lt;/version&gt;\n    &lt;scope&gt;test&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>POM file config</p>\n<pre><code>&lt;parent&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n    &lt;version&gt;2.1.4.RELEASE&lt;/version&gt;\n    &lt;relativePath/&gt;  \n&lt;/parent&gt;\n\n&lt;properties&gt;\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n    &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\n    &lt;slf4j-api.version&gt;1.7.26&lt;/slf4j-api.version&gt;\n    &lt;java.version&gt;1.8&lt;/java.version&gt;\n    &lt;spring-cloud.version&gt;Greenwich.SR1&lt;/spring-cloud.version&gt;\n    &lt;spring.framework.version&gt;5.1.6.RELEASE&lt;/spring.framework.version&gt;\n&lt;/properties&gt;\n</code></pre>\n"},{"tags":["java","spring","thymeleaf","spring-thymeleaf"],"comments":[{"owner":{"account_id":213468,"reputation":103486,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1679491860,"post_id":75812276,"comment_id":133731300,"body_markdown":"You are probably using incompatible versions, because you specify different versions for your Thymeleaf dependencies. Try to use version 3.1.1.RELEASE **or** 3.0.15.RELEASE for **both** Thymeleaf dependencies.","body":"You are probably using incompatible versions, because you specify different versions for your Thymeleaf dependencies. Try to use version 3.1.1.RELEASE <b>or</b> 3.0.15.RELEASE for <b>both</b> Thymeleaf dependencies."},{"owner":{"account_id":9860912,"reputation":21,"user_id":7303965,"display_name":"tarif aljnidi"},"score":0,"creation_date":1679492899,"post_id":75812276,"comment_id":133731639,"body_markdown":"yes you are right if I use 3.1.1.RELEASE for both Thymeleaf dependencies, it works fine .","body":"yes you are right if I use 3.1.1.RELEASE for both Thymeleaf dependencies, it works fine ."}],"owner":{"account_id":9860912,"reputation":21,"user_id":7303965,"display_name":"tarif aljnidi"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":12,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1679492929,"answer_count":0,"score":0,"last_activity_date":1679492052,"creation_date":1679488159,"question_id":75812276,"body_markdown":"In a Spring application I am getting NoSuchMethodError exception after upgrading from Spring 4 to Spring 5.\r\n\r\nThe new pom.xml dependencies:\r\n```xml\r\n&lt;dependency&gt;\r\n\t&lt;groupId&gt;org.thymeleaf&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;thymeleaf&lt;/artifactId&gt;\r\n\t&lt;version&gt;3.1.1.RELEASE&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n&lt;dependency&gt;\r\n\t&lt;groupId&gt;org.thymeleaf&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;thymeleaf-spring5&lt;/artifactId&gt;\r\n\t&lt;version&gt;3.0.15.RELEASE&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\nThe old pom.xml dependencies:\r\n```xml\r\n&lt;dependency&gt;\r\n\t&lt;groupId&gt;org.thymeleaf&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;thymeleaf&lt;/artifactId&gt;\r\n\t&lt;version&gt;2.1.4.RELEASE&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n&lt;dependency&gt;\r\n\t&lt;groupId&gt;org.thymeleaf&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;thymeleaf-spring4&lt;/artifactId&gt;\r\n\t&lt;version&gt;2.1.4.RELEASE&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n``` \r\nThe exception is:\r\n```none\r\njava.lang.NoSuchMethodError: org.thymeleaf.context.WebExpressionContext.&lt;init&gt;(Lorg/thymeleaf/IEngineConfiguration;Ljavax/servlet/http/HttpServletRequest;Ljavax/servlet/http/HttpServletResponse;Ljavax/servlet/ServletContext;Ljava/util/Locale;Ljava/util/Map;)V\r\n\tat org.thymeleaf.spring5.view.ThymeleafView.renderFragment(ThymeleafView.java:259)\r\n\tat org.thymeleaf.spring5.view.ThymeleafView.render(ThymeleafView.java:190)\r\n\tat org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1405)\r\n\tat org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1149)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1088)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:964)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898)\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:655)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:764)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n```\r\n","title":"Upgrade to Spring 5 java.lang.NoSuchMethodError org.thymeleaf.context.WebExpressionContext","body":"<p>In a Spring application I am getting NoSuchMethodError exception after upgrading from Spring 4 to Spring 5.</p>\n<p>The new pom.xml dependencies:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.thymeleaf&lt;/groupId&gt;\n    &lt;artifactId&gt;thymeleaf&lt;/artifactId&gt;\n    &lt;version&gt;3.1.1.RELEASE&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.thymeleaf&lt;/groupId&gt;\n    &lt;artifactId&gt;thymeleaf-spring5&lt;/artifactId&gt;\n    &lt;version&gt;3.0.15.RELEASE&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>The old pom.xml dependencies:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.thymeleaf&lt;/groupId&gt;\n    &lt;artifactId&gt;thymeleaf&lt;/artifactId&gt;\n    &lt;version&gt;2.1.4.RELEASE&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.thymeleaf&lt;/groupId&gt;\n    &lt;artifactId&gt;thymeleaf-spring4&lt;/artifactId&gt;\n    &lt;version&gt;2.1.4.RELEASE&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>The exception is:</p>\n<pre class=\"lang-none prettyprint-override\"><code>java.lang.NoSuchMethodError: org.thymeleaf.context.WebExpressionContext.&lt;init&gt;(Lorg/thymeleaf/IEngineConfiguration;Ljavax/servlet/http/HttpServletRequest;Ljavax/servlet/http/HttpServletResponse;Ljavax/servlet/ServletContext;Ljava/util/Locale;Ljava/util/Map;)V\n    at org.thymeleaf.spring5.view.ThymeleafView.renderFragment(ThymeleafView.java:259)\n    at org.thymeleaf.spring5.view.ThymeleafView.render(ThymeleafView.java:190)\n    at org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1405)\n    at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1149)\n    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1088)\n    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:964)\n    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)\n    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:655)\n    at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:764)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\n    at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\n</code></pre>\n"},{"tags":["java","spring-boot","scheduler","spring-cloud-config-server"],"owner":{"account_id":27363740,"reputation":1,"user_id":20870939,"display_name":"kannan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":69,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679491994,"creation_date":1679491557,"question_id":75812834,"body_markdown":"I have some application.properties variables in my config repo and I want to fetch that to my application into a constatnt variable and further the same constatnt variable needs to use at\r\n\r\n`@Schedued(corn=Myclass.`**`MY_CONSTANT`**`)`\r\n\r\nI have tried many ways but unable to set value to constant variable from git.\r\n\r\nIs it possible to set a java constant using @Value ?\r\n\r\nThanks in adv.\r\n\r\n`@Value(&quot;${test.name}&quot;)`\r\n\r\n`public static final String MY_CONSTANT;`","title":"How to set values from java config server(git repo) using @Value annotation for Constant variable","body":"<p>I have some application.properties variables in my config repo and I want to fetch that to my application into a constatnt variable and further the same constatnt variable needs to use at</p>\n<p><code>@Schedued(corn=Myclass.</code><strong><code>MY_CONSTANT</code></strong><code>)</code></p>\n<p>I have tried many ways but unable to set value to constant variable from git.</p>\n<p>Is it possible to set a java constant using @Value ?</p>\n<p>Thanks in adv.</p>\n<p><code>@Value(&quot;${test.name}&quot;)</code></p>\n<p><code>public static final String MY_CONSTANT;</code></p>\n"},{"tags":["java","android","admob"],"owner":{"account_id":26260429,"reputation":195,"user_id":19931837,"display_name":"Manisha"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":54,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679491617,"creation_date":1679491617,"question_id":75812840,"body_markdown":"I have created Method Class for preload my admob ads like below\r\n\r\n    public class Method {\r\n      public InterstitialAd mInterstitialAd;\r\n      private Activity activity;\r\n    \r\n       public Method(Activity activity) {\r\n            this.activity = activity;\r\n        }\r\n      public void loadAd() {\r\n            AdRequest adRequest = new AdRequest.Builder().build();\r\n            InterstitialAd.load(\r\n                    activity,\r\n                    Constant.appRP.getInterstitial_ad_id(),\r\n                    adRequest,\r\n                    new InterstitialAdLoadCallback() {\r\n                        @Override\r\n                        public void onAdLoaded(@NonNull InterstitialAd interstitialAd) {\r\n                            Log.e(&quot;ADSERRR&quot;,&quot;LOADED&quot;);\r\n                            mInterstitialAd = interstitialAd;\r\n    \r\n                            interstitialAd.setFullScreenContentCallback( new FullScreenContentCallback() {\r\n                                        @Override\r\n                                        public void onAdDismissedFullScreenContent() {\r\n                                            loadAd();\r\n                                        }\r\n                                        @Override\r\n                                        public void onAdShowedFullScreenContent() {\r\n                                            loadAd();\r\n                                        }\r\n    \r\n                                        @Override\r\n                                        public void onAdFailedToShowFullScreenContent(AdError adError) {\r\n                                            mInterstitialAd = null;\r\n                                            Log.d(&quot;TAG&quot;, &quot;The ad failed to show.&quot;);\r\n                                        }\r\n    \r\n    \r\n    \r\n                            });\r\n                        }\r\n    \r\n                        @Override\r\n                        public void onAdFailedToLoad(@NonNull LoadAdError loadAdError) {\r\n                            // Handle the error\r\n                            Log.e(&quot;ADSERRR&quot;, loadAdError.getMessage());\r\n                            mInterstitialAd = null;\r\n    \r\n                        }\r\n    \r\n            });\r\n        }\r\n    \r\n        public void showAds() {\r\n            if (mInterstitialAd != null) {\r\n                mInterstitialAd.show(activity);\r\n            } else {\r\n                Toast.makeText(activity, &quot;Ad did not load&quot;, Toast.LENGTH_SHORT).show();\r\n            }\r\n        }\r\n    }\r\n\r\nNow I am Requesting Preload Ads From My MainActivity Like this\r\n\r\n    methods = new Method(MainActivity.this);\r\n    methods.loadAd();\r\n\r\nIts preloading ads as per my goal but When I try to show Ads From My Fragment, Its always getting failed\r\n\r\nMy code showing ads in fragment is like this\r\n\r\n    methods = new Method(getActivity());\r\n    methods.showAds();\r\nI am trying to achieve it from last 2 hours but its always getting failed to show the ads. Let me know if someone here can help me for give a clue.\r\n\r\nThanks!\r\n","title":"Admob Ads Preload From Activity and Show in Fragments","body":"<p>I have created Method Class for preload my admob ads like below</p>\n<pre><code>public class Method {\n  public InterstitialAd mInterstitialAd;\n  private Activity activity;\n\n   public Method(Activity activity) {\n        this.activity = activity;\n    }\n  public void loadAd() {\n        AdRequest adRequest = new AdRequest.Builder().build();\n        InterstitialAd.load(\n                activity,\n                Constant.appRP.getInterstitial_ad_id(),\n                adRequest,\n                new InterstitialAdLoadCallback() {\n                    @Override\n                    public void onAdLoaded(@NonNull InterstitialAd interstitialAd) {\n                        Log.e(&quot;ADSERRR&quot;,&quot;LOADED&quot;);\n                        mInterstitialAd = interstitialAd;\n\n                        interstitialAd.setFullScreenContentCallback( new FullScreenContentCallback() {\n                                    @Override\n                                    public void onAdDismissedFullScreenContent() {\n                                        loadAd();\n                                    }\n                                    @Override\n                                    public void onAdShowedFullScreenContent() {\n                                        loadAd();\n                                    }\n\n                                    @Override\n                                    public void onAdFailedToShowFullScreenContent(AdError adError) {\n                                        mInterstitialAd = null;\n                                        Log.d(&quot;TAG&quot;, &quot;The ad failed to show.&quot;);\n                                    }\n\n\n\n                        });\n                    }\n\n                    @Override\n                    public void onAdFailedToLoad(@NonNull LoadAdError loadAdError) {\n                        // Handle the error\n                        Log.e(&quot;ADSERRR&quot;, loadAdError.getMessage());\n                        mInterstitialAd = null;\n\n                    }\n\n        });\n    }\n\n    public void showAds() {\n        if (mInterstitialAd != null) {\n            mInterstitialAd.show(activity);\n        } else {\n            Toast.makeText(activity, &quot;Ad did not load&quot;, Toast.LENGTH_SHORT).show();\n        }\n    }\n}\n</code></pre>\n<p>Now I am Requesting Preload Ads From My MainActivity Like this</p>\n<pre><code>methods = new Method(MainActivity.this);\nmethods.loadAd();\n</code></pre>\n<p>Its preloading ads as per my goal but When I try to show Ads From My Fragment, Its always getting failed</p>\n<p>My code showing ads in fragment is like this</p>\n<pre><code>methods = new Method(getActivity());\nmethods.showAds();\n</code></pre>\n<p>I am trying to achieve it from last 2 hours but its always getting failed to show the ads. Let me know if someone here can help me for give a clue.</p>\n<p>Thanks!</p>\n"},{"tags":["java","bpmn","business-process-management","camunda"],"answers":[{"tags":[],"owner":{"account_id":2120498,"reputation":3230,"user_id":1883842,"display_name":"Greg Harley"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1474566198,"creation_date":1474566198,"answer_id":39645579,"question_id":39640993,"body_markdown":"A process instance is a currently executing &quot;instance&quot; of a process definition.\r\nPut another way, every time you start a process you create a process &quot;instance&quot;.\r\n\r\nSo, for any given process definition, you may have a number of &quot;instances&quot; and each &quot;instance&quot; may have one of more active &quot;tasks&quot; (sometimes service tasks, sometimes user tasks and sometimes other wait states - e.g. timer).\r\n\r\nBefore I can answer your question, I need to understand what it is you are trying to retrieve.\r\n\r\nAre you looking for all tasks for a a given process definition? If so, this equates to all of the tasks for all of the &quot;instances&quot;. For this, you would query all instances for a process definition and then all tasks for each instance.\r\n\r\nOr, are you looking for only the tasks for a single instance. The code you posted will retrieve the tasks for a single instance, but you need to pass in the instance id retrieved by querying the runtimeService for active instances than match your required query parameters (e.g. business data, process variables or simply by process definition).\r\n\r\nHope this helps, let us know specifically what you are trying to achieve and I&#39;m sure we can help.\r\n\r\nRegards,\r\nGreg","title":"Camunda : get active tasks","body":"<p>A process instance is a currently executing \"instance\" of a process definition.\nPut another way, every time you start a process you create a process \"instance\".</p>\n\n<p>So, for any given process definition, you may have a number of \"instances\" and each \"instance\" may have one of more active \"tasks\" (sometimes service tasks, sometimes user tasks and sometimes other wait states - e.g. timer).</p>\n\n<p>Before I can answer your question, I need to understand what it is you are trying to retrieve.</p>\n\n<p>Are you looking for all tasks for a a given process definition? If so, this equates to all of the tasks for all of the \"instances\". For this, you would query all instances for a process definition and then all tasks for each instance.</p>\n\n<p>Or, are you looking for only the tasks for a single instance. The code you posted will retrieve the tasks for a single instance, but you need to pass in the instance id retrieved by querying the runtimeService for active instances than match your required query parameters (e.g. business data, process variables or simply by process definition).</p>\n\n<p>Hope this helps, let us know specifically what you are trying to achieve and I'm sure we can help.</p>\n\n<p>Regards,\nGreg</p>\n"},{"tags":[],"owner":{"account_id":2486854,"reputation":5426,"user_id":2165134,"display_name":"Zelldon"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1474566747,"creation_date":1474566747,"answer_id":39645752,"question_id":39640993,"body_markdown":"The following statement will return all active tasks, which can be also standalone tasks.\r\n\r\n    processEngine.getTaskService().createTaskQuery().active().list()\r\n\r\nIf you want to get all active tasks corresponding to a specific running process you have to add the `.processInstanceId(processInstanceId)` to the statement before the `.list()`. The `processInstanceId` is the `id` which identifies the process instance. If you start a process/workflow a  process instance will be created with an unique id. To get these id you can for example execute the following statement.  \r\n\r\n    int processInstanceId = processEngine.getRuntimeService()\r\n     .createProcessInstanceQuery()\r\n     .processDefinitionKey(processDefinitionKey)\r\n     .singleResult()\r\n     .getId()\r\n\r\nThe variable `processDefinitionKey` is the id which is set in the process definition xml.\r\n\r\n","title":"Camunda : get active tasks","body":"<p>The following statement will return all active tasks, which can be also standalone tasks.</p>\n\n<pre><code>processEngine.getTaskService().createTaskQuery().active().list()\n</code></pre>\n\n<p>If you want to get all active tasks corresponding to a specific running process you have to add the <code>.processInstanceId(processInstanceId)</code> to the statement before the <code>.list()</code>. The <code>processInstanceId</code> is the <code>id</code> which identifies the process instance. If you start a process/workflow a  process instance will be created with an unique id. To get these id you can for example execute the following statement.  </p>\n\n<pre><code>int processInstanceId = processEngine.getRuntimeService()\n .createProcessInstanceQuery()\n .processDefinitionKey(processDefinitionKey)\n .singleResult()\n .getId()\n</code></pre>\n\n<p>The variable <code>processDefinitionKey</code> is the id which is set in the process definition xml.</p>\n"}],"owner":{"account_id":4820806,"reputation":33,"user_id":3891546,"display_name":"Soleferry"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10631,"favorite_count":0,"down_vote_count":1,"up_vote_count":3,"accepted_answer_id":39645752,"answer_count":2,"score":2,"last_activity_date":1679491471,"creation_date":1474552331,"question_id":39640993,"body_markdown":"How can i get a list of active tasks in the code i use in Camunda ?\r\n\r\nI already look at this answer &quot;https://stackoverflow.com/questions/23359503/how-to-query-the-position-of-a-process-instance&quot; but i can&#39;t understand what is &quot;processInstanceId&quot; and where i am supposed to get it to make this method works.\r\n\r\nHere&#39;s the code i&#39;m currently trying : \r\n\r\n    package org.camunda.bpm;\r\n\r\n    import java.util.HashMap;\r\n    import java.util.List;\r\n    import java.util.Map;\r\n    import org.camunda.bpm.engine.ProcessEngine;\r\n    import org.camunda.bpm.engine.RepositoryService;\r\n    import org.camunda.bpm.engine.RuntimeService;\r\n    import org.camunda.bpm.engine.runtime.ProcessInstance;\r\n    import org.camunda.bpm.model.bpmn.BpmnModelInstance;\r\n    import org.camunda.bpm.model.xml.instance.ModelElementInstance;\r\n\r\n    public class AllActiveActivities {\r\n\r\n    public Map&lt;String, String&gt; getAllActiveActivities(String processInstanceId) {\r\n    // get engine services\r\n    ProcessEngine processEngine = BpmPlatform.getDefaultProcessEngine()\r\n    RuntimeService runtimeService = processEngine.getRuntimeService();\r\n    RepositoryService repositoryService = processEngine.getRepositoryService();\r\n\r\n    // get the process instance\r\n    ProcessInstance processInstance =\r\n        runtimeService.createProcessInstanceQuery()\r\n            .processInstanceId(processInstanceId)\r\n            .singleResult();\r\n\r\n    HashMap&lt;String, String&gt; activityNameByActivityId = new HashMap&lt;String, String&gt;();\r\n\r\n    // get all active activities of the process instance\r\n    List&lt;String&gt; activeActivityIds =\r\n        runtimeService.getActiveActivityIds(processInstance.getId());\r\n\r\n    // get bpmn model of the process instance\r\n    BpmnModelInstance bpmnModelInstance =\r\n        repositoryService.getBpmnModelInstance(processInstance.getProcessDefinitionId());\r\n\r\n    for (String activeActivityId : activeActivityIds) {\r\n      // get the speaking name of each activity in the diagram\r\n      ModelElementInstance modelElementById =\r\n          bpmnModelInstance.getModelElementById(activeActivityId);\r\n      String activityName = modelElementById.getAttributeValue(&quot;name&quot;);\r\n\r\n      activityNameByActivityId.put(activeActivityId, activityName);\r\n    }\r\n\r\n    // map contains now all active activities\r\n    return activityNameByActivityId;\r\n    }\r\n\r\n    }\r\n\r\nThanks in advance for your help.","title":"Camunda : get active tasks","body":"<p>How can i get a list of active tasks in the code i use in Camunda ?</p>\n\n<p>I already look at this answer \"<a href=\"https://stackoverflow.com/questions/23359503/how-to-query-the-position-of-a-process-instance\">How to query the position of a process instance?</a>\" but i can't understand what is \"processInstanceId\" and where i am supposed to get it to make this method works.</p>\n\n<p>Here's the code i'm currently trying : </p>\n\n<pre><code>package org.camunda.bpm;\n\nimport java.util.HashMap;\nimport java.util.List;\nimport java.util.Map;\nimport org.camunda.bpm.engine.ProcessEngine;\nimport org.camunda.bpm.engine.RepositoryService;\nimport org.camunda.bpm.engine.RuntimeService;\nimport org.camunda.bpm.engine.runtime.ProcessInstance;\nimport org.camunda.bpm.model.bpmn.BpmnModelInstance;\nimport org.camunda.bpm.model.xml.instance.ModelElementInstance;\n\npublic class AllActiveActivities {\n\npublic Map&lt;String, String&gt; getAllActiveActivities(String processInstanceId) {\n// get engine services\nProcessEngine processEngine = BpmPlatform.getDefaultProcessEngine()\nRuntimeService runtimeService = processEngine.getRuntimeService();\nRepositoryService repositoryService = processEngine.getRepositoryService();\n\n// get the process instance\nProcessInstance processInstance =\n    runtimeService.createProcessInstanceQuery()\n        .processInstanceId(processInstanceId)\n        .singleResult();\n\nHashMap&lt;String, String&gt; activityNameByActivityId = new HashMap&lt;String, String&gt;();\n\n// get all active activities of the process instance\nList&lt;String&gt; activeActivityIds =\n    runtimeService.getActiveActivityIds(processInstance.getId());\n\n// get bpmn model of the process instance\nBpmnModelInstance bpmnModelInstance =\n    repositoryService.getBpmnModelInstance(processInstance.getProcessDefinitionId());\n\nfor (String activeActivityId : activeActivityIds) {\n  // get the speaking name of each activity in the diagram\n  ModelElementInstance modelElementById =\n      bpmnModelInstance.getModelElementById(activeActivityId);\n  String activityName = modelElementById.getAttributeValue(\"name\");\n\n  activityNameByActivityId.put(activeActivityId, activityName);\n}\n\n// map contains now all active activities\nreturn activityNameByActivityId;\n}\n\n}\n</code></pre>\n\n<p>Thanks in advance for your help.</p>\n"},{"tags":["java","firebase","firebase-realtime-database"],"comments":[{"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1679484667,"post_id":75810988,"comment_id":133729329,"body_markdown":"Did you see this [answer](https://stackoverflow.com/questions/50413117/how-to-get-unique-random-product-in-node-firebase/50413208)?","body":"Did you see this <a href=\"https://stackoverflow.com/questions/50413117/how-to-get-unique-random-product-in-node-firebase/50413208\">answer</a>?"},{"owner":{"account_id":25796148,"reputation":35,"user_id":19539291,"display_name":"Stan271937"},"score":0,"creation_date":1679488479,"post_id":75810988,"comment_id":133730352,"body_markdown":"I do not understand what this do:\nArrayAdapter arrayAdapter = new ArrayAdapter&lt;&gt;(context, android.R.layout.simple_list_item_1, randomProductList);\nlistView.setAdapter(arrayAdapter);","body":"I do not understand what this do: ArrayAdapter arrayAdapter = new ArrayAdapter&lt;&gt;(context, android.R.layout.simple_list_item_1, randomProductList); listView.setAdapter(arrayAdapter);"}],"answers":[{"tags":[],"owner":{"account_id":72426,"reputation":573714,"user_id":209103,"accept_rate":73,"display_name":"Frank van Puffelen"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1679491108,"creation_date":1679491108,"answer_id":75812756,"question_id":75810988,"body_markdown":"It looks like you&#39;ve copy/pasted the same block of code 4 times. In cases like that, you can typically use a loop to accomplish the same result without copy/paste.\r\n```\r\ndatabaseReference.child(&quot;Quiz&quot;).child(&quot;Level_1&quot;).addListenerForSingleValueEvent(new ValueEventListener() {\r\n    @Override\r\n    public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n        for (int theme=1; theme &lt;= 5; theme++) { // &#128072;\r\n            for (DataSnapshot questions : snapshot.child(&quot;Theme_&quot;+theme).getChildren()) {\r\n                String getQuestion = questions.child(&quot;questionText&quot;).getValue(String.class);\r\n                String getOption1 = questions.child(&quot;option1Text&quot;).getValue(String.class);\r\n                String getOption2 = questions.child(&quot;option2Text&quot;).getValue(String.class);\r\n                String getOption3 = questions.child(&quot;option3Text&quot;).getValue(String.class);\r\n                String getOption4 = questions.child(&quot;option4Text&quot;).getValue(String.class);\r\n                String getAnswer = questions.child(&quot;answerText&quot;).getValue(String.class);\r\n                String imgToken = questions.child(&quot;imgToken&quot;).getValue(String.class);\r\n    \r\n                QuestionsList questionslist = new QuestionsList(getQuestion, getOption1, getOption2, getOption3, getOption4, getAnswer, imgToken);\r\n                theme1List.add(questionslist);\r\n                Collections.shuffle(theme1List);\r\n    \r\n                questionslists.add(theme-1, theme1List.get(0)); // &#128072;\r\n            }\r\n        }\r\n\r\n        Collections.shuffle(questionslists);\r\n        totalQuestionTV.setText(&quot;/&quot;+questionslists.size());\r\n        total = questionslists.size();\r\n        startQuizTimer();\r\n\r\n        selectQuestion(currentQuestionPosition);\r\n    }\r\n    @Override\r\n    public void onCancelled(@NonNull DatabaseError error) {\r\n        Toast.makeText(MainActivity.this, &quot;Failed&quot;, Toast.LENGTH_SHORT).show();\r\n    }\r\n});\r\n```","title":"How to get data from firebase realtime database child randlomly to android studio app?","body":"<p>It looks like you've copy/pasted the same block of code 4 times. In cases like that, you can typically use a loop to accomplish the same result without copy/paste.</p>\n<pre><code>databaseReference.child(&quot;Quiz&quot;).child(&quot;Level_1&quot;).addListenerForSingleValueEvent(new ValueEventListener() {\n    @Override\n    public void onDataChange(@NonNull DataSnapshot snapshot) {\n        for (int theme=1; theme &lt;= 5; theme++) { // 👈\n            for (DataSnapshot questions : snapshot.child(&quot;Theme_&quot;+theme).getChildren()) {\n                String getQuestion = questions.child(&quot;questionText&quot;).getValue(String.class);\n                String getOption1 = questions.child(&quot;option1Text&quot;).getValue(String.class);\n                String getOption2 = questions.child(&quot;option2Text&quot;).getValue(String.class);\n                String getOption3 = questions.child(&quot;option3Text&quot;).getValue(String.class);\n                String getOption4 = questions.child(&quot;option4Text&quot;).getValue(String.class);\n                String getAnswer = questions.child(&quot;answerText&quot;).getValue(String.class);\n                String imgToken = questions.child(&quot;imgToken&quot;).getValue(String.class);\n    \n                QuestionsList questionslist = new QuestionsList(getQuestion, getOption1, getOption2, getOption3, getOption4, getAnswer, imgToken);\n                theme1List.add(questionslist);\n                Collections.shuffle(theme1List);\n    \n                questionslists.add(theme-1, theme1List.get(0)); // 👈\n            }\n        }\n\n        Collections.shuffle(questionslists);\n        totalQuestionTV.setText(&quot;/&quot;+questionslists.size());\n        total = questionslists.size();\n        startQuizTimer();\n\n        selectQuestion(currentQuestionPosition);\n    }\n    @Override\n    public void onCancelled(@NonNull DatabaseError error) {\n        Toast.makeText(MainActivity.this, &quot;Failed&quot;, Toast.LENGTH_SHORT).show();\n    }\n});\n</code></pre>\n"}],"owner":{"account_id":25796148,"reputation":35,"user_id":19539291,"display_name":"Stan271937"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75812756,"answer_count":1,"score":0,"last_activity_date":1679491108,"creation_date":1679480518,"question_id":75810988,"body_markdown":"i am trying to fetch data from 5 different childs randomly to arrayList. My firebase database looks like this:\r\n```\r\n&quot;Quiz&quot;: {\r\n    &quot;Level_1&quot;: {\r\n      &quot;Theme_1&quot;: [\r\n        null,\r\n        {\r\n          &quot;answerText&quot;: &quot;1&quot;,\r\n          &quot;imgToken&quot;: &quot;img1-1&quot;,\r\n          &quot;option1Text&quot;: &quot;Warshaw&quot;,\r\n          &quot;option2Text&quot;: &quot;Brelin&quot;,\r\n          &quot;option3Text&quot;: &quot;Paris&quot;,\r\n          &quot;option4Text&quot;: &quot;Prague&quot;,\r\n          &quot;questionID&quot;: 1,\r\n          &quot;questionText&quot;: &quot;What is the capital of Poland ?&quot;\r\n        },\r\n        {\r\n           &quot;answerText&quot;: &quot;3&quot;,\r\n          &quot;imgToken&quot;: &quot;img1-2&quot;,\r\n          &quot;option1Text&quot;: &quot;Oslo&quot;,\r\n          &quot;option2Text&quot;: &quot;Helsinky&quot;,\r\n          &quot;option3Text&quot;: &quot;Budapest&quot;,\r\n          &quot;option4Text&quot;: &quot;Wiena&quot;,\r\n          &quot;questionID&quot;: 2,\r\n          &quot;questionText&quot;: &quot;What is the capital of Hungary ?&quot;\r\n        },\r\n \r\n```\r\n...continues to question n.10\r\n\r\nI have there 5 Levels with 5 themes in them and each theme contains 10 questions. Is there any way how to get randomly 1 question from each 5 themes from 1 level to ArrayList in Android Studio using Java ? \r\n\r\nI tried to get all 10 questions from theme 1 to ArrayList, then do Collections.shuffle and add question from 0th position to new ArrayList which i am using in the quiz but it is too complicated and if there would be more than 5 level, or more than 5 themes it will crash or will not work. \r\n\r\nAlso this code looks terrible and i think could be written better.\r\n\r\n```\r\ndatabaseReference.child(&quot;Quiz&quot;).child(&quot;Level_1&quot;).addListenerForSingleValueEvent(new ValueEventListener() {\r\n    @Override\r\n    public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n        for (DataSnapshot questions : snapshot.child(&quot;Theme_1&quot;).getChildren()){\r\n\r\n            String getQuestion = questions.child(&quot;questionText&quot;).getValue(String.class);\r\n            String getOption1 = questions.child(&quot;option1Text&quot;).getValue(String.class);\r\n            String getOption2 = questions.child(&quot;option2Text&quot;).getValue(String.class);\r\n            String getOption3 = questions.child(&quot;option3Text&quot;).getValue(String.class);\r\n            String getOption4 = questions.child(&quot;option4Text&quot;).getValue(String.class);\r\n            String getAnswer = questions.child(&quot;answerText&quot;).getValue(String.class);\r\n            String imgToken = questions.child(&quot;imgToken&quot;).getValue(String.class);\r\n\r\n            QuestionsList questionslist = new QuestionsList(getQuestion, getOption1, getOption2, getOption3, getOption4, getAnswer, imgToken);\r\n            theme1List.add(questionslist);\r\n            Collections.shuffle(theme1List);\r\n        }\r\n\r\n        for (DataSnapshot questions : snapshot.child(&quot;Theme_2&quot;).getChildren()){\r\n            String getQuestion = questions.child(&quot;questionText&quot;).getValue(String.class);\r\n            String getOption1 = questions.child(&quot;option1Text&quot;).getValue(String.class);\r\n            String getOption2 = questions.child(&quot;option2Text&quot;).getValue(String.class);\r\n            String getOption3 = questions.child(&quot;option3Text&quot;).getValue(String.class);\r\n            String getOption4 = questions.child(&quot;option4Text&quot;).getValue(String.class);\r\n            String getAnswer = questions.child(&quot;answerText&quot;).getValue(String.class);\r\n            String imgToken = questions.child(&quot;imgToken&quot;).getValue(String.class);\r\n\r\n            QuestionsList questionslist = new QuestionsList(getQuestion, getOption1, getOption2, getOption3, getOption4, getAnswer, imgToken);\r\n            theme2List.add(questionslist);\r\n            Collections.shuffle(theme2List);\r\n        }\r\n\r\n        for (DataSnapshot questions : snapshot.child(&quot;Theme_3&quot;).getChildren()){\r\n            String getQuestion = questions.child(&quot;questionText&quot;).getValue(String.class);\r\n            String getOption1 = questions.child(&quot;option1Text&quot;).getValue(String.class);\r\n            String getOption2 = questions.child(&quot;option2Text&quot;).getValue(String.class);\r\n            String getOption3 = questions.child(&quot;option3Text&quot;).getValue(String.class);\r\n            String getOption4 = questions.child(&quot;option4Text&quot;).getValue(String.class);\r\n            String getAnswer = questions.child(&quot;answerText&quot;).getValue(String.class);\r\n            String imgToken = questions.child(&quot;imgToken&quot;).getValue(String.class);\r\n\r\n            QuestionsList questionslist = new QuestionsList(getQuestion, getOption1, getOption2, getOption3, getOption4, getAnswer, imgToken);\r\n            theme3List.add(questionslist);\r\n            Collections.shuffle(theme3List);\r\n        }\r\n\r\n        for (DataSnapshot questions : snapshot.child(&quot;Theme_4&quot;).getChildren()){\r\n            String getQuestion = questions.child(&quot;questionText&quot;).getValue(String.class);\r\n            String getOption1 = questions.child(&quot;option1Text&quot;).getValue(String.class);\r\n            String getOption2 = questions.child(&quot;option2Text&quot;).getValue(String.class);\r\n            String getOption3 = questions.child(&quot;option3Text&quot;).getValue(String.class);\r\n            String getOption4 = questions.child(&quot;option4Text&quot;).getValue(String.class);\r\n            String getAnswer = questions.child(&quot;answerText&quot;).getValue(String.class);\r\n            String imgToken = questions.child(&quot;imgToken&quot;).getValue(String.class);\r\n\r\n            QuestionsList questionslist = new QuestionsList(getQuestion, getOption1, getOption2, getOption3, getOption4, getAnswer, imgToken);\r\n            theme4List.add(questionslist);\r\n            Collections.shuffle(theme4List);\r\n        }\r\n\r\n        for (DataSnapshot questions : snapshot.child(&quot;Theme_5&quot;).getChildren()){\r\n            String getQuestion = questions.child(&quot;questionText&quot;).getValue(String.class);\r\n            String getOption1 = questions.child(&quot;option1Text&quot;).getValue(String.class);\r\n            String getOption2 = questions.child(&quot;option2Text&quot;).getValue(String.class);\r\n            String getOption3 = questions.child(&quot;option3Text&quot;).getValue(String.class);\r\n            String getOption4 = questions.child(&quot;option4Text&quot;).getValue(String.class);\r\n            String getAnswer = questions.child(&quot;answerText&quot;).getValue(String.class);\r\n            String imgToken = questions.child(&quot;imgToken&quot;).getValue(String.class);\r\n\r\n            QuestionsList questionslist = new QuestionsList(getQuestion, getOption1, getOption2, getOption3, getOption4, getAnswer, imgToken);\r\n            theme5List.add(questionslist);\r\n            Collections.shuffle(theme5List);\r\n        }\r\n\r\n        questionslists.add(0,theme1List.get(0));\r\n        questionslists.add(1,theme2List.get(0));\r\n        questionslists.add(2,theme3List.get(0));\r\n        questionslists.add(3,theme4List.get(0));\r\n        questionslists.add(4,theme5List.get(0));\r\n\r\n        Collections.shuffle(questionslists);\r\n        totalQuestionTV.setText(&quot;/&quot;+questionslists.size());\r\n        total = questionslists.size();\r\n        startQuizTimer();\r\n\r\n        selectQuestion(currentQuestionPosition);\r\n\r\n    }\r\n    @Override\r\n    public void onCancelled(@NonNull DatabaseError error) {\r\n        Toast.makeText(MainActivity.this, &quot;Failed&quot;, Toast.LENGTH_SHORT).show();\r\n    }\r\n});\r\n```","title":"How to get data from firebase realtime database child randlomly to android studio app?","body":"<p>i am trying to fetch data from 5 different childs randomly to arrayList. My firebase database looks like this:</p>\n<pre><code>&quot;Quiz&quot;: {\n    &quot;Level_1&quot;: {\n      &quot;Theme_1&quot;: [\n        null,\n        {\n          &quot;answerText&quot;: &quot;1&quot;,\n          &quot;imgToken&quot;: &quot;img1-1&quot;,\n          &quot;option1Text&quot;: &quot;Warshaw&quot;,\n          &quot;option2Text&quot;: &quot;Brelin&quot;,\n          &quot;option3Text&quot;: &quot;Paris&quot;,\n          &quot;option4Text&quot;: &quot;Prague&quot;,\n          &quot;questionID&quot;: 1,\n          &quot;questionText&quot;: &quot;What is the capital of Poland ?&quot;\n        },\n        {\n           &quot;answerText&quot;: &quot;3&quot;,\n          &quot;imgToken&quot;: &quot;img1-2&quot;,\n          &quot;option1Text&quot;: &quot;Oslo&quot;,\n          &quot;option2Text&quot;: &quot;Helsinky&quot;,\n          &quot;option3Text&quot;: &quot;Budapest&quot;,\n          &quot;option4Text&quot;: &quot;Wiena&quot;,\n          &quot;questionID&quot;: 2,\n          &quot;questionText&quot;: &quot;What is the capital of Hungary ?&quot;\n        },\n \n</code></pre>\n<p>...continues to question n.10</p>\n<p>I have there 5 Levels with 5 themes in them and each theme contains 10 questions. Is there any way how to get randomly 1 question from each 5 themes from 1 level to ArrayList in Android Studio using Java ?</p>\n<p>I tried to get all 10 questions from theme 1 to ArrayList, then do Collections.shuffle and add question from 0th position to new ArrayList which i am using in the quiz but it is too complicated and if there would be more than 5 level, or more than 5 themes it will crash or will not work.</p>\n<p>Also this code looks terrible and i think could be written better.</p>\n<pre><code>databaseReference.child(&quot;Quiz&quot;).child(&quot;Level_1&quot;).addListenerForSingleValueEvent(new ValueEventListener() {\n    @Override\n    public void onDataChange(@NonNull DataSnapshot snapshot) {\n        for (DataSnapshot questions : snapshot.child(&quot;Theme_1&quot;).getChildren()){\n\n            String getQuestion = questions.child(&quot;questionText&quot;).getValue(String.class);\n            String getOption1 = questions.child(&quot;option1Text&quot;).getValue(String.class);\n            String getOption2 = questions.child(&quot;option2Text&quot;).getValue(String.class);\n            String getOption3 = questions.child(&quot;option3Text&quot;).getValue(String.class);\n            String getOption4 = questions.child(&quot;option4Text&quot;).getValue(String.class);\n            String getAnswer = questions.child(&quot;answerText&quot;).getValue(String.class);\n            String imgToken = questions.child(&quot;imgToken&quot;).getValue(String.class);\n\n            QuestionsList questionslist = new QuestionsList(getQuestion, getOption1, getOption2, getOption3, getOption4, getAnswer, imgToken);\n            theme1List.add(questionslist);\n            Collections.shuffle(theme1List);\n        }\n\n        for (DataSnapshot questions : snapshot.child(&quot;Theme_2&quot;).getChildren()){\n            String getQuestion = questions.child(&quot;questionText&quot;).getValue(String.class);\n            String getOption1 = questions.child(&quot;option1Text&quot;).getValue(String.class);\n            String getOption2 = questions.child(&quot;option2Text&quot;).getValue(String.class);\n            String getOption3 = questions.child(&quot;option3Text&quot;).getValue(String.class);\n            String getOption4 = questions.child(&quot;option4Text&quot;).getValue(String.class);\n            String getAnswer = questions.child(&quot;answerText&quot;).getValue(String.class);\n            String imgToken = questions.child(&quot;imgToken&quot;).getValue(String.class);\n\n            QuestionsList questionslist = new QuestionsList(getQuestion, getOption1, getOption2, getOption3, getOption4, getAnswer, imgToken);\n            theme2List.add(questionslist);\n            Collections.shuffle(theme2List);\n        }\n\n        for (DataSnapshot questions : snapshot.child(&quot;Theme_3&quot;).getChildren()){\n            String getQuestion = questions.child(&quot;questionText&quot;).getValue(String.class);\n            String getOption1 = questions.child(&quot;option1Text&quot;).getValue(String.class);\n            String getOption2 = questions.child(&quot;option2Text&quot;).getValue(String.class);\n            String getOption3 = questions.child(&quot;option3Text&quot;).getValue(String.class);\n            String getOption4 = questions.child(&quot;option4Text&quot;).getValue(String.class);\n            String getAnswer = questions.child(&quot;answerText&quot;).getValue(String.class);\n            String imgToken = questions.child(&quot;imgToken&quot;).getValue(String.class);\n\n            QuestionsList questionslist = new QuestionsList(getQuestion, getOption1, getOption2, getOption3, getOption4, getAnswer, imgToken);\n            theme3List.add(questionslist);\n            Collections.shuffle(theme3List);\n        }\n\n        for (DataSnapshot questions : snapshot.child(&quot;Theme_4&quot;).getChildren()){\n            String getQuestion = questions.child(&quot;questionText&quot;).getValue(String.class);\n            String getOption1 = questions.child(&quot;option1Text&quot;).getValue(String.class);\n            String getOption2 = questions.child(&quot;option2Text&quot;).getValue(String.class);\n            String getOption3 = questions.child(&quot;option3Text&quot;).getValue(String.class);\n            String getOption4 = questions.child(&quot;option4Text&quot;).getValue(String.class);\n            String getAnswer = questions.child(&quot;answerText&quot;).getValue(String.class);\n            String imgToken = questions.child(&quot;imgToken&quot;).getValue(String.class);\n\n            QuestionsList questionslist = new QuestionsList(getQuestion, getOption1, getOption2, getOption3, getOption4, getAnswer, imgToken);\n            theme4List.add(questionslist);\n            Collections.shuffle(theme4List);\n        }\n\n        for (DataSnapshot questions : snapshot.child(&quot;Theme_5&quot;).getChildren()){\n            String getQuestion = questions.child(&quot;questionText&quot;).getValue(String.class);\n            String getOption1 = questions.child(&quot;option1Text&quot;).getValue(String.class);\n            String getOption2 = questions.child(&quot;option2Text&quot;).getValue(String.class);\n            String getOption3 = questions.child(&quot;option3Text&quot;).getValue(String.class);\n            String getOption4 = questions.child(&quot;option4Text&quot;).getValue(String.class);\n            String getAnswer = questions.child(&quot;answerText&quot;).getValue(String.class);\n            String imgToken = questions.child(&quot;imgToken&quot;).getValue(String.class);\n\n            QuestionsList questionslist = new QuestionsList(getQuestion, getOption1, getOption2, getOption3, getOption4, getAnswer, imgToken);\n            theme5List.add(questionslist);\n            Collections.shuffle(theme5List);\n        }\n\n        questionslists.add(0,theme1List.get(0));\n        questionslists.add(1,theme2List.get(0));\n        questionslists.add(2,theme3List.get(0));\n        questionslists.add(3,theme4List.get(0));\n        questionslists.add(4,theme5List.get(0));\n\n        Collections.shuffle(questionslists);\n        totalQuestionTV.setText(&quot;/&quot;+questionslists.size());\n        total = questionslists.size();\n        startQuizTimer();\n\n        selectQuestion(currentQuestionPosition);\n\n    }\n    @Override\n    public void onCancelled(@NonNull DatabaseError error) {\n        Toast.makeText(MainActivity.this, &quot;Failed&quot;, Toast.LENGTH_SHORT).show();\n    }\n});\n</code></pre>\n"},{"tags":["java","spring","kotlin","spring-integration","google-cloud-pubsub"],"answers":[{"tags":[],"owner":{"account_id":3273937,"reputation":114855,"user_id":2756547,"accept_rate":75,"display_name":"Artem Bilan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1679490913,"creation_date":1679411157,"answer_id":75802924,"question_id":75801643,"body_markdown":"The `PubSubMessageSource` does not produce batches. It fetches them indeed, but then it emits cached messages one by one:\r\n\r\n      protected Object doReceive(int fetchSize) {\r\n        if (this.cachedMessages.isEmpty()) {\r\n          Integer maxMessages = (fetchSize &gt; 0) ? fetchSize : 1;\r\n    \r\n          List&lt;? extends ConvertedAcknowledgeablePubsubMessage&lt;?&gt;&gt; messages =\r\n              this.pubSubSubscriberOperations.pullAndConvert(\r\n                  this.subscriptionName, maxMessages, !this.blockOnPull, this.payloadType);\r\n          if (messages.isEmpty()) {\r\n            return null;\r\n          } else if (messages.size() == 1) {\r\n            // don&#39;t bother storing.\r\n            return processMessage(messages.get(0));\r\n          } else {\r\n            this.cachedMessages.addAll(messages);\r\n          }\r\n        }\r\n    \r\n        return processMessage(this.cachedMessages.pollFirst());\r\n      }\r\n\r\nI don&#39;t see any batch producing support in those Spring Integration channel adapters for Pub/Sub: https://github.com/GoogleCloudPlatform/spring-cloud-gcp/tree/main/spring-cloud-gcp-pubsub/src/main/java/com/google/cloud/spring/pubsub/integration/inbound","title":"Batch listener for pubsub with spring integration","body":"<p>The <code>PubSubMessageSource</code> does not produce batches. It fetches them indeed, but then it emits cached messages one by one:</p>\n<pre><code>  protected Object doReceive(int fetchSize) {\n    if (this.cachedMessages.isEmpty()) {\n      Integer maxMessages = (fetchSize &gt; 0) ? fetchSize : 1;\n\n      List&lt;? extends ConvertedAcknowledgeablePubsubMessage&lt;?&gt;&gt; messages =\n          this.pubSubSubscriberOperations.pullAndConvert(\n              this.subscriptionName, maxMessages, !this.blockOnPull, this.payloadType);\n      if (messages.isEmpty()) {\n        return null;\n      } else if (messages.size() == 1) {\n        // don't bother storing.\n        return processMessage(messages.get(0));\n      } else {\n        this.cachedMessages.addAll(messages);\n      }\n    }\n\n    return processMessage(this.cachedMessages.pollFirst());\n  }\n</code></pre>\n<p>I don't see any batch producing support in those Spring Integration channel adapters for Pub/Sub: <a href=\"https://github.com/GoogleCloudPlatform/spring-cloud-gcp/tree/main/spring-cloud-gcp-pubsub/src/main/java/com/google/cloud/spring/pubsub/integration/inbound\" rel=\"nofollow noreferrer\">https://github.com/GoogleCloudPlatform/spring-cloud-gcp/tree/main/spring-cloud-gcp-pubsub/src/main/java/com/google/cloud/spring/pubsub/integration/inbound</a></p>\n"}],"owner":{"account_id":8173271,"reputation":175,"user_id":6152945,"accept_rate":60,"display_name":"Piotr"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":333,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75802924,"answer_count":1,"score":1,"last_activity_date":1679490913,"creation_date":1679404121,"question_id":75801643,"body_markdown":"I am trying to use pubsub subscription. I managed to connect to subscription and get messages using google documentation. Unfortunately handling messages is slow and it would be much faster if I could get messages in batches. Here is my working code that can process one message at time:\r\n\r\n    @Bean\r\n    fun inputMessageChannel(): MessageChannel {\r\n        return PublishSubscribeChannel()\r\n    }\r\n\r\n    @Bean\r\n    @InboundChannelAdapter(channel = &quot;inputMessageChannel&quot;)\r\n    fun inboundChannelAdapter(\r\n        pubSubTemplate: PubSubTemplate\r\n    ): MessageSource&lt;Any&gt; {\r\n        val messageSource = PubSubMessageSource(pubSubTemplate, pubSubConfig.subscription)\r\n        messageSource.setAckMode(AckMode.MANUAL)\r\n        return messageSource\r\n    }\r\n\r\n    @ServiceActivator(inputChannel = &quot;inputMessageChannel&quot;)\r\n    fun messageReceiver(\r\n        message: Message&lt;ByteArray&gt;\r\n    ) {\r\n        try {\r\n            handleMessage(message.payload)\r\n            message.headers.get(GcpPubSubHeaders.ORIGINAL_MESSAGE, BasicAcknowledgeablePubsubMessage::class.java)?.ack()\r\n        } catch (e: Exception) {\r\n            log.error(e) { &quot;Failed to handle message: ${message.payload}&quot; }\r\n        }\r\n    }\r\nI tried changing messageReceiver function to work with list of messages like that:\r\n\r\n    @ServiceActivator(inputChannel = &quot;inputMessageChannel&quot;)\r\n    fun messageReceiver(\r\n        messages: List&lt;Message&lt;ByteArray&gt;&gt;\r\n    ) {\r\n        try {\r\n            handleBatchMessages(messages)\r\n            messages.forEach {\r\n                it.headers.get(GcpPubSubHeaders.ORIGINAL_MESSAGE, BasicAcknowledgeablePubsubMessage::class.java)?.ack()\r\n            }\r\n        } catch (e: Exception) {\r\n            log.error(e) { &quot;Failed to handle messages.&quot; }\r\n        }\r\n    }\r\n\r\nbut i get \r\n\r\n    org.springframework.messaging.MessageHandlingException: error occurred during processing message in &#39;MethodInvokingMessageProcessor&#39; [org.springframework.integration.handler.MethodInvokingMessageProcessor@7cd56906], failedMessage=GenericMessage [...\r\n    ...\r\n    Caused by: java.lang.ClassCastException: class java.lang.Byte cannot be cast to class org.springframework.messaging.Message (java.lang.Byte is in module java.base of loader &#39;bootstrap&#39;; org.springframework.messaging.Message is in unnamed module of loader &#39;app&#39;)\r\n\r\nHow can i process list of messages instead of single message at a time?","title":"Batch listener for pubsub with spring integration","body":"<p>I am trying to use pubsub subscription. I managed to connect to subscription and get messages using google documentation. Unfortunately handling messages is slow and it would be much faster if I could get messages in batches. Here is my working code that can process one message at time:</p>\n<pre><code>@Bean\nfun inputMessageChannel(): MessageChannel {\n    return PublishSubscribeChannel()\n}\n\n@Bean\n@InboundChannelAdapter(channel = &quot;inputMessageChannel&quot;)\nfun inboundChannelAdapter(\n    pubSubTemplate: PubSubTemplate\n): MessageSource&lt;Any&gt; {\n    val messageSource = PubSubMessageSource(pubSubTemplate, pubSubConfig.subscription)\n    messageSource.setAckMode(AckMode.MANUAL)\n    return messageSource\n}\n\n@ServiceActivator(inputChannel = &quot;inputMessageChannel&quot;)\nfun messageReceiver(\n    message: Message&lt;ByteArray&gt;\n) {\n    try {\n        handleMessage(message.payload)\n        message.headers.get(GcpPubSubHeaders.ORIGINAL_MESSAGE, BasicAcknowledgeablePubsubMessage::class.java)?.ack()\n    } catch (e: Exception) {\n        log.error(e) { &quot;Failed to handle message: ${message.payload}&quot; }\n    }\n}\n</code></pre>\n<p>I tried changing messageReceiver function to work with list of messages like that:</p>\n<pre><code>@ServiceActivator(inputChannel = &quot;inputMessageChannel&quot;)\nfun messageReceiver(\n    messages: List&lt;Message&lt;ByteArray&gt;&gt;\n) {\n    try {\n        handleBatchMessages(messages)\n        messages.forEach {\n            it.headers.get(GcpPubSubHeaders.ORIGINAL_MESSAGE, BasicAcknowledgeablePubsubMessage::class.java)?.ack()\n        }\n    } catch (e: Exception) {\n        log.error(e) { &quot;Failed to handle messages.&quot; }\n    }\n}\n</code></pre>\n<p>but i get</p>\n<pre><code>org.springframework.messaging.MessageHandlingException: error occurred during processing message in 'MethodInvokingMessageProcessor' [org.springframework.integration.handler.MethodInvokingMessageProcessor@7cd56906], failedMessage=GenericMessage [...\n...\nCaused by: java.lang.ClassCastException: class java.lang.Byte cannot be cast to class org.springframework.messaging.Message (java.lang.Byte is in module java.base of loader 'bootstrap'; org.springframework.messaging.Message is in unnamed module of loader 'app')\n</code></pre>\n<p>How can i process list of messages instead of single message at a time?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":74704,"reputation":11534,"user_id":214525,"accept_rate":100,"display_name":"f1sh"},"score":2,"creation_date":1679488626,"post_id":75812302,"comment_id":133730389,"body_markdown":"I think `&amp;#135;` only works when ISO-8859-1 is used. Since we live in a UTF world, try `&amp;#8225;` instead.","body":"I think <code>&amp;#135;</code> only works when ISO-8859-1 is used. Since we live in a UTF world, try <code>&amp;#8225;</code> instead."},{"owner":{"account_id":15278830,"reputation":1642,"user_id":11023821,"display_name":"Ralf Ulrich"},"score":0,"creation_date":1679488931,"post_id":75812302,"comment_id":133730491,"body_markdown":"... thus, you are not looking for ASCII but UTF (UTF8 typically). Please rephrase your question. Otherwise, in ASCII what you want is impossible.","body":"... thus, you are not looking for ASCII but UTF (UTF8 typically). Please rephrase your question. Otherwise, in ASCII what you want is impossible."},{"owner":{"account_id":3383678,"reputation":4957,"user_id":2840178,"accept_rate":88,"display_name":"kar"},"score":0,"creation_date":1679489331,"post_id":75812302,"comment_id":133730600,"body_markdown":"@f1sh Thanks, makes sense. &amp;#8225; worked and that would fit for my use case.","body":"@f1sh Thanks, makes sense. &amp;#8225; worked and that would fit for my use case."}],"answers":[{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679490622,"creation_date":1679490622,"answer_id":75812670,"question_id":75812302,"body_markdown":"The translation you are trying to perform here would require a non-standard interpretation of HTML character references.  \r\n\r\nAccording to the HTML 5 specification (see [HTML 5 - 8.1.4 Character references][1]) the numeric codes in a decimal or hexadecimal character reference are Unicode codepoints.  The Unicode codepoint you using there is U+0087 which is a control code (ESA or End of Selected Area).  It is not a printing character.\r\n\r\nSo ... in fact ... your first attempt is most likely giving you the **correct** translation of `&amp;#135;`.  It is there ... but you can&#39;t see anything when you print it on a normal console.\r\n\r\nAs others have noted, the HTML character reference for the ‡ character is actually `&amp;#8225`.\r\n\r\n---------------------\r\n\r\nNote that the meaning of an HTML character reference does not depend on the character encoding used in the HTML document representation; e.g. per the HTTP `Content-type` header or the document&#39;s `&lt;meta&gt;` tag.  The HTML 5 spec says that it is Unicode, and that&#39;s it.\r\n\r\n  [1]: https://www.w3.org/TR/2011/WD-html5-20110405/syntax.html#character-references","title":"Unable to convert ASCII html code to String","body":"<p>The translation you are trying to perform here would require a non-standard interpretation of HTML character references.</p>\n<p>According to the HTML 5 specification (see <a href=\"https://www.w3.org/TR/2011/WD-html5-20110405/syntax.html#character-references\" rel=\"nofollow noreferrer\">HTML 5 - 8.1.4 Character references</a>) the numeric codes in a decimal or hexadecimal character reference are Unicode codepoints.  The Unicode codepoint you using there is U+0087 which is a control code (ESA or End of Selected Area).  It is not a printing character.</p>\n<p>So ... in fact ... your first attempt is most likely giving you the <strong>correct</strong> translation of <code>&amp;#135;</code>.  It is there ... but you can't see anything when you print it on a normal console.</p>\n<p>As others have noted, the HTML character reference for the ‡ character is actually <code>&amp;#8225</code>.</p>\n<hr />\n<p>Note that the meaning of an HTML character reference does not depend on the character encoding used in the HTML document representation; e.g. per the HTTP <code>Content-type</code> header or the document's <code>&lt;meta&gt;</code> tag.  The HTML 5 spec says that it is Unicode, and that's it.</p>\n"}],"owner":{"account_id":3383678,"reputation":4957,"user_id":2840178,"accept_rate":88,"display_name":"kar"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":64,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1679490622,"creation_date":1679488291,"question_id":75812302,"body_markdown":"I am trying to convert a String which has html ASCII code in it such as follows:\r\n\r\n    &quot;Hello, world! &amp;#135; end&quot;\r\n\r\nAfter conversion, I am looking to achieve the following:\r\n\r\n    &quot;Hello, world! ‡ end&quot;\r\n\r\nBut I end up with: \r\n\r\n    Hello, world!  end\r\n\r\nWhy? \r\n\r\nASCII Table just for reference if needed.\r\n&lt;br/&gt;https://www.ascii-code.com/\r\n\r\nTried both following methods resulting in same outcome. \r\n\r\nAttempt 1\r\n\r\n    import org.apache.commons.text.StringEscapeUtils;\r\n    String str = &quot;Hello, world! &amp;#135; end&quot;;\r\n    String res = StringEscapeUtils.unescapeHtml4(str); // same for unescapeHtml3\r\n    System.out.println(res); // &quot;Hello, world!  end&quot; \r\n\r\nAttempt 2\r\n\r\n    String getUpdatedStr() {\r\n        String str = &quot;Hello, world! &amp;#135; end&quot;;\r\n        String regex = &quot;&amp;#(\\\\d+);&quot;;\r\n        Pattern pattern = Pattern.compile(regex);\r\n        Matcher matcher = pattern.matcher(str);\r\n        StringBuffer sb = new StringBuffer();\r\n        while (matcher.find()) {\r\n            int asciiValue = Integer.parseInt(matcher.group(1));\r\n            char asciiChar = (char) asciiValue;\r\n            matcher.appendReplacement(sb, Character.toString(asciiChar));\r\n        }\r\n        matcher.appendTail(sb);\r\n        return sb.toString(); // &quot;Hello, world!  end&quot; \r\n    }","title":"Unable to convert ASCII html code to String","body":"<p>I am trying to convert a String which has html ASCII code in it such as follows:</p>\n<pre><code>&quot;Hello, world! &amp;#135; end&quot;\n</code></pre>\n<p>After conversion, I am looking to achieve the following:</p>\n<pre><code>&quot;Hello, world! ‡ end&quot;\n</code></pre>\n<p>But I end up with:</p>\n<pre><code>Hello, world!  end\n</code></pre>\n<p>Why?</p>\n<p>ASCII Table just for reference if needed.\n<br/>https://www.ascii-code.com/</p>\n<p>Tried both following methods resulting in same outcome.</p>\n<p>Attempt 1</p>\n<pre><code>import org.apache.commons.text.StringEscapeUtils;\nString str = &quot;Hello, world! &amp;#135; end&quot;;\nString res = StringEscapeUtils.unescapeHtml4(str); // same for unescapeHtml3\nSystem.out.println(res); // &quot;Hello, world!  end&quot; \n</code></pre>\n<p>Attempt 2</p>\n<pre><code>String getUpdatedStr() {\n    String str = &quot;Hello, world! &amp;#135; end&quot;;\n    String regex = &quot;&amp;#(\\\\d+);&quot;;\n    Pattern pattern = Pattern.compile(regex);\n    Matcher matcher = pattern.matcher(str);\n    StringBuffer sb = new StringBuffer();\n    while (matcher.find()) {\n        int asciiValue = Integer.parseInt(matcher.group(1));\n        char asciiChar = (char) asciiValue;\n        matcher.appendReplacement(sb, Character.toString(asciiChar));\n    }\n    matcher.appendTail(sb);\n    return sb.toString(); // &quot;Hello, world!  end&quot; \n}\n</code></pre>\n"},{"tags":["java","cryptography"],"comments":[{"owner":{"account_id":12359353,"reputation":42427,"user_id":9014097,"display_name":"Topaco"},"score":0,"creation_date":1679499585,"post_id":75812556,"comment_id":133733822,"body_markdown":"This is not a regular multiplication, but an [elliptic curve point multiplication](https://en.wikipedia.org/wiki/Elliptic_curve_point_multiplication). BC implements this, JCA/JCE does not (at least does not expose public methods for this), as far as I know. Implementing this with plain Java (i.e. without third-party libraries like BC) is probably comparatively costly (at least if you want it to be efficient and secure).","body":"This is not a regular multiplication, but an <a href=\"https://en.wikipedia.org/wiki/Elliptic_curve_point_multiplication\" rel=\"nofollow noreferrer\">elliptic curve point multiplication</a>. BC implements this, JCA/JCE does not (at least does not expose public methods for this), as far as I know. Implementing this with plain Java (i.e. without third-party libraries like BC) is probably comparatively costly (at least if you want it to be efficient and secure)."},{"owner":{"account_id":112158,"reputation":4626,"user_id":295962,"accept_rate":84,"display_name":"Hank"},"score":0,"creation_date":1679567730,"post_id":75812556,"comment_id":133746193,"body_markdown":"@Topaco thank you - happy for you to post this as an answer","body":"@Topaco thank you - happy for you to post this as an answer"}],"owner":{"account_id":112158,"reputation":4626,"user_id":295962,"accept_rate":84,"display_name":"Hank"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":172,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1679489858,"creation_date":1679489858,"question_id":75812556,"body_markdown":"Plenty of solutions here discuss how to derive the ECDSA public key from its private key, _using BouncyCastle_. I&#39;m looking for a solution in plain java &gt;= 11.\r\n\r\nChatGPT suggests this: \r\n\r\n```java\r\n    // Get the parameters of the private key\r\n    ECParameterSpec ecSpec = ((ECPrivateKey) privateKey).getParams();\r\n    \r\n    // Generate a public key using the private key parameters\r\n    ECPoint Q = ecSpec.getGenerator().multiply(privateKey.getS());\r\n    ECPublicKeySpec pubKeySpec = new ECPublicKeySpec(Q, ecSpec);\r\n    \r\n    // Get a KeyFactory object that can generate EC public keys\r\n    KeyFactory keyFactory = KeyFactory.getInstance(&quot;EC&quot;);\r\n    \r\n    // Generate the public key\r\n    PublicKey publicKey = keyFactory.generatePublic(pubKeySpec);\r\n```\r\n\r\nBut [`java.security.spec.ECPoint`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/security/spec/ECPoint.html) does not offer a `multiply()` method, unlike [`org.bouncycastle.math.ec.ECPoint`](https://bouncycastle.org/docs/docs1.8on/org/bouncycastle/math/ec/ECPoint.html#multiply-java.math.BigInteger-). I&#39;d like to stick to native Java without BC, if possible. What can I do?","title":"Calculate ECDSA public key from private key in native java without BouncyCastle","body":"<p>Plenty of solutions here discuss how to derive the ECDSA public key from its private key, <em>using BouncyCastle</em>. I'm looking for a solution in plain java &gt;= 11.</p>\n<p>ChatGPT suggests this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    // Get the parameters of the private key\n    ECParameterSpec ecSpec = ((ECPrivateKey) privateKey).getParams();\n    \n    // Generate a public key using the private key parameters\n    ECPoint Q = ecSpec.getGenerator().multiply(privateKey.getS());\n    ECPublicKeySpec pubKeySpec = new ECPublicKeySpec(Q, ecSpec);\n    \n    // Get a KeyFactory object that can generate EC public keys\n    KeyFactory keyFactory = KeyFactory.getInstance(&quot;EC&quot;);\n    \n    // Generate the public key\n    PublicKey publicKey = keyFactory.generatePublic(pubKeySpec);\n</code></pre>\n<p>But <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/security/spec/ECPoint.html\" rel=\"nofollow noreferrer\"><code>java.security.spec.ECPoint</code></a> does not offer a <code>multiply()</code> method, unlike <a href=\"https://bouncycastle.org/docs/docs1.8on/org/bouncycastle/math/ec/ECPoint.html#multiply-java.math.BigInteger-\" rel=\"nofollow noreferrer\"><code>org.bouncycastle.math.ec.ECPoint</code></a>. I'd like to stick to native Java without BC, if possible. What can I do?</p>\n"},{"tags":["java","jdbc","prepared-statement"],"comments":[{"owner":{"account_id":2577620,"reputation":1618,"user_id":2234942,"accept_rate":43,"display_name":"Kalaiarasan Manimaran"},"score":0,"creation_date":1422945565,"post_id":28292644,"comment_id":44938528,"body_markdown":"tell me why you need to have ArrayList of PreparedStatement? You can use single PreparedStatement and add them in the batch and execute the batch, that will be meaningful i guess","body":"tell me why you need to have ArrayList of PreparedStatement? You can use single PreparedStatement and add them in the batch and execute the batch, that will be meaningful i guess"}],"answers":[{"tags":[],"owner":{"account_id":2577620,"reputation":1618,"user_id":2234942,"accept_rate":43,"display_name":"Kalaiarasan Manimaran"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1422946069,"creation_date":1422945721,"answer_id":28292871,"question_id":28292644,"body_markdown":"Still you want PreparedStatement , place the logic of the function in your PreparedStatement code itself.The below solution will help you.\r\n\r\n    conn.setAutoCommit(false);\r\n\r\n    PreparedStatement ps = //instantiate\r\n    pstmt.setInt( 1, 1243);\r\n    pstmt.setString( 2, &quot;test&quot; );\r\n    pstmt.setString( 3, &quot;test&quot; );\r\n    pstmt.setInt( 4, 123 );\r\n                                          \r\n    ps.addBatch();\r\n        \r\n    pstmt.setInt( 1, 1243);\r\n    pstmt.setString( 2, &quot;12334&quot; );\r\n    pstmt.setString( 3, &quot;21423&quot; );\r\n    pstmt.setInt( 4, 123 );\r\n                                           \r\n    ps.addBatch();\r\n        \r\n    int[] count = ps.executeBatch();\r\n    conn.commit();","title":"Convert from List of preparedStatements to PreparedStatement batch","body":"<p>Still you want PreparedStatement , place the logic of the function in your PreparedStatement code itself.The below solution will help you.</p>\n\n<pre><code>conn.setAutoCommit(false);\n\nPreparedStatement ps = //instantiate\npstmt.setInt( 1, 1243);\npstmt.setString( 2, \"test\" );\npstmt.setString( 3, \"test\" );\npstmt.setInt( 4, 123 );\n\nps.addBatch();\n\npstmt.setInt( 1, 1243);\npstmt.setString( 2, \"12334\" );\npstmt.setString( 3, \"21423\" );\npstmt.setInt( 4, 123 );\n\nps.addBatch();\n\nint[] count = ps.executeBatch();\nconn.commit();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1297214,"reputation":965,"user_id":1247963,"accept_rate":88,"display_name":"codechefvaibhavkashyap"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1422945994,"creation_date":1422945994,"answer_id":28292940,"question_id":28292644,"body_markdown":"For batch execution, you can use Prepared statement&#39;s native executeBatch() method.\r\nTo improve performance of Java database application is running queries with setAutoCommit(false). By default new JDBC connection has there auto commit mode ON, which means every individual SQL Statement will be executed in its own transaction. while without auto commit you can group SQL statement into logical transaction, which can either be committed or rolled back by calling commit() or rollback().\r\n\r\nBelow code explains further :-\r\n\r\n\t\r\n\r\n    PreparedStatement preparedStatement = null;\r\n                preparedStatement = dbConnection.prepareStatement(insertTableSQL);\r\n     \r\n    \t\t\tdbConnection.setAutoCommit(false);\r\n     \r\n    \t\t\tpreparedStatement.setInt(1, 101);\r\n    \t\t\tpreparedStatement.setString(2, &quot;test1&quot;);\r\n    \t\t\tpreparedStatement.addBatch();\r\n     \r\n    \t\t\tpreparedStatement.setInt(1, 102);\r\n    \t\t\tpreparedStatement.setString(2, &quot;test2&quot;);\r\n    \t\t\tpreparedStatement.addBatch();\r\n     \r\n    \t\t\tpreparedStatement.setInt(1, 103);\r\n    \t\t\tpreparedStatement.setString(2, &quot;test3&quot;);\r\n    \t\t\tpreparedStatement.addBatch();\r\n     \r\n    \t\t\tpreparedStatement.executeBatch();\r\n     \r\n    \t\t\tdbConnection.commit();","title":"Convert from List of preparedStatements to PreparedStatement batch","body":"<p>For batch execution, you can use Prepared statement's native executeBatch() method.\nTo improve performance of Java database application is running queries with setAutoCommit(false). By default new JDBC connection has there auto commit mode ON, which means every individual SQL Statement will be executed in its own transaction. while without auto commit you can group SQL statement into logical transaction, which can either be committed or rolled back by calling commit() or rollback().</p>\n\n<p>Below code explains further :-</p>\n\n<pre><code>PreparedStatement preparedStatement = null;\n            preparedStatement = dbConnection.prepareStatement(insertTableSQL);\n\n            dbConnection.setAutoCommit(false);\n\n            preparedStatement.setInt(1, 101);\n            preparedStatement.setString(2, \"test1\");\n            preparedStatement.addBatch();\n\n            preparedStatement.setInt(1, 102);\n            preparedStatement.setString(2, \"test2\");\n            preparedStatement.addBatch();\n\n            preparedStatement.setInt(1, 103);\n            preparedStatement.setString(2, \"test3\");\n            preparedStatement.addBatch();\n\n            preparedStatement.executeBatch();\n\n            dbConnection.commit();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1297214,"reputation":965,"user_id":1247963,"accept_rate":88,"display_name":"codechefvaibhavkashyap"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1422946778,"creation_date":1422946778,"answer_id":28293097,"question_id":28292644,"body_markdown":"instead doubting one&#39;s help better suggest solutions. Anyways enjoy the whole class.\r\n\r\n    /*\r\n     * To change this license header, choose License Headers in Project Properties.\r\n     * To change this template file, choose Tools | Templates\r\n     * and open the template in the editor.\r\n     */\r\n    package test;\r\n    \r\n    /**\r\n     *\r\n     * @author vaibhav.kashyap\r\n     */\r\n    \r\n    \r\n    import java.sql.DriverManager;\r\n    import java.sql.Connection;\r\n    import java.sql.PreparedStatement;\r\n    import java.sql.SQLException;\r\n     \r\n    public class PreparedBatchJDBC {\r\n     \r\n    \tprivate static final String DB_DRIVER = &quot;com.mysql.jdbc.Driver&quot;;\r\n    \tprivate static final String DB_CONNECTION = &quot;jdbc:mysql://localhost:3306/mydb&quot;;\r\n    \tprivate static final String DB_USER = &quot;root&quot;;\r\n    \tprivate static final String DB_PASSWORD = &quot;root&quot;;\r\n     \r\n    \tpublic static void main(String[] argv) {\r\n     \r\n    \t\ttry {\r\n     \r\n    \t\t\tbatchInsertRecordsIntoTable();\r\n     \r\n    \t\t} catch (SQLException e) {\r\n     \r\n    \t\t\tSystem.out.println(e.getMessage());\r\n     \r\n    \t\t}\r\n     \r\n    \t}\r\n     \r\n    \tprivate static void batchInsertRecordsIntoTable() throws SQLException {\r\n     \r\n    \t\tConnection dbConnection = null;\r\n    \t\tPreparedStatement preparedStatement = null;\r\n     \r\n    \t\tString insertTableSQL = &quot;INSERT INTO DBUSER&quot;\r\n    \t\t\t\t+ &quot;(USER_ID, USERNAME, CREATED_BY, CREATED_DATE) VALUES&quot;\r\n    \t\t\t\t+ &quot;(?,?,?,?)&quot;;\r\n     \r\n    \t\ttry {\r\n    \t\t\tdbConnection = getDBConnection();\r\n    \t\t\tpreparedStatement = dbConnection.prepareStatement(insertTableSQL);\r\n     \r\n    \t\t\tdbConnection.setAutoCommit(false);\r\n     \r\n    \t\t\tpreparedStatement.setInt(1, 101);\r\n    \t\t\tpreparedStatement.setString(2, &quot;test1&quot;);\r\n    \t\t\tpreparedStatement.setString(3, &quot;system&quot;);\r\n    \t\t\tpreparedStatement.setTimestamp(4, getCurrentTimeStamp());\r\n    \t\t\tpreparedStatement.addBatch();\r\n     \r\n    \t\t\tpreparedStatement.setInt(1, 102);\r\n    \t\t\tpreparedStatement.setString(2, &quot;test2&quot;);\r\n    \t\t\tpreparedStatement.setString(3, &quot;system&quot;);\r\n    \t\t\tpreparedStatement.setTimestamp(4, getCurrentTimeStamp());\r\n    \t\t\tpreparedStatement.addBatch();\r\n     \r\n    \t\t\tpreparedStatement.setInt(1, 103);\r\n    \t\t\tpreparedStatement.setString(2, &quot;test3&quot;);\r\n    \t\t\tpreparedStatement.setString(3, &quot;system&quot;);\r\n    \t\t\tpreparedStatement.setTimestamp(4, getCurrentTimeStamp());\r\n    \t\t\tpreparedStatement.addBatch();\r\n     \r\n    \t\t\tpreparedStatement.executeBatch();\r\n     \r\n    \t\t\tdbConnection.commit();\r\n     \r\n    \t\t\tSystem.out.println(&quot;Record is inserted into DBUSER table!&quot;);\r\n     \r\n    \t\t} catch (SQLException e) {\r\n     \r\n    \t\t\tSystem.out.println(e.getMessage());\r\n    \t\t\tdbConnection.rollback();\r\n     \r\n    \t\t} finally {\r\n     \r\n    \t\t\tif (preparedStatement != null) {\r\n    \t\t\t\tpreparedStatement.close();\r\n    \t\t\t}\r\n     \r\n    \t\t\tif (dbConnection != null) {\r\n    \t\t\t\tdbConnection.close();\r\n    \t\t\t}\r\n     \r\n    \t\t}\r\n     \r\n    \t}\r\n     \r\n    \tprivate static Connection getDBConnection() {\r\n     \r\n    \t\tConnection dbConnection = null;\r\n     \r\n    \t\ttry {\r\n     \r\n    \t\t\tClass.forName(DB_DRIVER);\r\n     \r\n    \t\t} catch (ClassNotFoundException e) {\r\n     \r\n    \t\t\tSystem.out.println(e.getMessage());\r\n     \r\n    \t\t}\r\n     \r\n    \t\ttry {\r\n     \r\n    \t\t\tdbConnection = DriverManager.getConnection(\r\n                                  DB_CONNECTION, DB_USER,DB_PASSWORD);\r\n    \t\t\treturn dbConnection;\r\n     \r\n    \t\t} catch (SQLException e) {\r\n     \r\n    \t\t\tSystem.out.println(e.getMessage());\r\n     \r\n    \t\t}\r\n     \r\n    \t\treturn dbConnection;\r\n     \r\n    \t}\r\n     \r\n    \tprivate static java.sql.Timestamp getCurrentTimeStamp() {\r\n     \r\n    \t\tjava.util.Date today = new java.util.Date();\r\n    \t\treturn new java.sql.Timestamp(today.getTime());\r\n     \r\n    \t}\r\n     \r\n    }\r\n\r\nHope this would help too.\r\n","title":"Convert from List of preparedStatements to PreparedStatement batch","body":"<p>instead doubting one's help better suggest solutions. Anyways enjoy the whole class.</p>\n\n<pre><code>/*\n * To change this license header, choose License Headers in Project Properties.\n * To change this template file, choose Tools | Templates\n * and open the template in the editor.\n */\npackage test;\n\n/**\n *\n * @author vaibhav.kashyap\n */\n\n\nimport java.sql.DriverManager;\nimport java.sql.Connection;\nimport java.sql.PreparedStatement;\nimport java.sql.SQLException;\n\npublic class PreparedBatchJDBC {\n\n    private static final String DB_DRIVER = \"com.mysql.jdbc.Driver\";\n    private static final String DB_CONNECTION = \"jdbc:mysql://localhost:3306/mydb\";\n    private static final String DB_USER = \"root\";\n    private static final String DB_PASSWORD = \"root\";\n\n    public static void main(String[] argv) {\n\n        try {\n\n            batchInsertRecordsIntoTable();\n\n        } catch (SQLException e) {\n\n            System.out.println(e.getMessage());\n\n        }\n\n    }\n\n    private static void batchInsertRecordsIntoTable() throws SQLException {\n\n        Connection dbConnection = null;\n        PreparedStatement preparedStatement = null;\n\n        String insertTableSQL = \"INSERT INTO DBUSER\"\n                + \"(USER_ID, USERNAME, CREATED_BY, CREATED_DATE) VALUES\"\n                + \"(?,?,?,?)\";\n\n        try {\n            dbConnection = getDBConnection();\n            preparedStatement = dbConnection.prepareStatement(insertTableSQL);\n\n            dbConnection.setAutoCommit(false);\n\n            preparedStatement.setInt(1, 101);\n            preparedStatement.setString(2, \"test1\");\n            preparedStatement.setString(3, \"system\");\n            preparedStatement.setTimestamp(4, getCurrentTimeStamp());\n            preparedStatement.addBatch();\n\n            preparedStatement.setInt(1, 102);\n            preparedStatement.setString(2, \"test2\");\n            preparedStatement.setString(3, \"system\");\n            preparedStatement.setTimestamp(4, getCurrentTimeStamp());\n            preparedStatement.addBatch();\n\n            preparedStatement.setInt(1, 103);\n            preparedStatement.setString(2, \"test3\");\n            preparedStatement.setString(3, \"system\");\n            preparedStatement.setTimestamp(4, getCurrentTimeStamp());\n            preparedStatement.addBatch();\n\n            preparedStatement.executeBatch();\n\n            dbConnection.commit();\n\n            System.out.println(\"Record is inserted into DBUSER table!\");\n\n        } catch (SQLException e) {\n\n            System.out.println(e.getMessage());\n            dbConnection.rollback();\n\n        } finally {\n\n            if (preparedStatement != null) {\n                preparedStatement.close();\n            }\n\n            if (dbConnection != null) {\n                dbConnection.close();\n            }\n\n        }\n\n    }\n\n    private static Connection getDBConnection() {\n\n        Connection dbConnection = null;\n\n        try {\n\n            Class.forName(DB_DRIVER);\n\n        } catch (ClassNotFoundException e) {\n\n            System.out.println(e.getMessage());\n\n        }\n\n        try {\n\n            dbConnection = DriverManager.getConnection(\n                              DB_CONNECTION, DB_USER,DB_PASSWORD);\n            return dbConnection;\n\n        } catch (SQLException e) {\n\n            System.out.println(e.getMessage());\n\n        }\n\n        return dbConnection;\n\n    }\n\n    private static java.sql.Timestamp getCurrentTimeStamp() {\n\n        java.util.Date today = new java.util.Date();\n        return new java.sql.Timestamp(today.getTime());\n\n    }\n\n}\n</code></pre>\n\n<p>Hope this would help too.</p>\n"}],"owner":{"account_id":2928320,"reputation":1666,"user_id":5946480,"display_name":"Rishi Prakash"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":815,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1679489668,"creation_date":1422944623,"question_id":28292644,"body_markdown":"I have an arrayList of PreparedStatement\r\n\r\n    ArrayList&lt;PreparedStatement&gt; prestmtBatchList = new ArrayList&lt;PreparedStatement&gt;();\r\n\r\nWith time I add a number of preparedStatements in it:\r\n\r\n    PreparedStatement ps = DBUtility.returnInsertQueryAsString(&quot;ind_it_decl_sec10log&quot;, keysToSaveInLog, itdeclsec10loginfo, con);\r\n    \t\t\t\t\t\t\t\t\tif(!ErmUtil.isNull(ps)){\r\n    \t\t\t\t\t\t\t\t\t\tprestmtBatchList.add(ps);\r\n    \t\t\t\t\t\t\t\t\t}\r\n\r\nI want to execute them at once, hence need to be converted in Batch. I know it sounds silly to do this.\r\n","title":"Convert from List of preparedStatements to PreparedStatement batch","body":"<p>I have an arrayList of PreparedStatement</p>\n\n<pre><code>ArrayList&lt;PreparedStatement&gt; prestmtBatchList = new ArrayList&lt;PreparedStatement&gt;();\n</code></pre>\n\n<p>With time I add a number of preparedStatements in it:</p>\n\n<pre><code>PreparedStatement ps = DBUtility.returnInsertQueryAsString(\"ind_it_decl_sec10log\", keysToSaveInLog, itdeclsec10loginfo, con);\n                                    if(!ErmUtil.isNull(ps)){\n                                        prestmtBatchList.add(ps);\n                                    }\n</code></pre>\n\n<p>I want to execute them at once, hence need to be converted in Batch. I know it sounds silly to do this.</p>\n"},{"tags":["java","spring","spring-boot","junit5"],"answers":[{"tags":[],"owner":{"account_id":7601548,"reputation":1081,"user_id":5765951,"display_name":"Arho Huttunen"},"down_vote_count":0,"up_vote_count":13,"is_accepted":true,"score":13,"last_activity_date":1679488871,"creation_date":1604467908,"answer_id":64674701,"question_id":64672608,"body_markdown":"The mocks need to be initialized before they can be used. There are several options to do this.\r\n\r\nThe first option would be to use `@SpringExtension` which will initialize the mocks annotated with `@MockBean`:\r\n\r\n```java\r\n@ExtendWith(SpringExtension.class)\r\npublic class CompteServiceImplTest {\r\n    @Autowired\r\n    private CompteService CompteService;\r\n\r\n    @MockBean\r\n    private compteRepository compteRepository;\r\n\r\n    // ...\r\n}\r\n```\r\nThis will make sure that the repository bean is mocked before the service bean is autowired.\r\n\r\nHowever, since you are writing a unit test for the service, you don&#39;t need the Spring extension at all. The second option is to use `@Mock` instead of `@MockBean`, and call `@InjectMocks` in conjunction with the `MockitoExtension` for constructing the service under test:\r\n\r\n```java\r\n@ExtendWith(MockitoExtension.class)\r\npublic class CompteServiceImplTest {\r\n    @InjectMocks\r\n    private CompteService CompteService;\r\n    @Mock\r\n    private compteRepository compteRepository;\r\n\r\n    // ...\r\n}\r\n```\r\n\r\nAlternatively, you could just call `MockitoAnnotations.initMocks()`, which will initialize the mocks annotated with `@Mock`, and use constructor injection for your service:\r\n\r\n```java\r\npublic class CompteServiceImplTest {\r\n    private CompteService CompteService;\r\n\r\n    @Mock\r\n    private compteRepository compteRepository;\r\n\r\n    @BeforeEach\r\n    void setUp() {\r\n        MockitoAnnotations.initMocks(this);\r\n        CompteService = new CompteServiceImpl(compteRepository, ...);\r\n    }\r\n\r\n    // ...\r\n}\r\n```\r\n\r\nFinally, you could do it all without annotations just by calling `Mockito.mock()` directly:\r\n\r\n```java\r\npublic class CompteServiceImplTest {\r\n    private compteRepository compteRepository;\r\n\r\n    @BeforeEach\r\n    void setUp() {\r\n        compteRepository = Mockito.mock();\r\n        CompteService = new CompteServiceImpl(compteRepository, ...);\r\n    }\r\n\r\n    // ...\r\n}\r\n```\r\n\r\n**EDIT:**\r\n\r\nSince Mockito 3, the `MockitoAnnotations.initMocks()` has been deprecated in favour of `MockitoAnnotations.openMocks()`. This method returns an instance of `AutoCloseable` which can be used to close the resource after the test.\r\n\r\n```java\r\npublic class CompteServiceImplTest {\r\n    private CompteService CompteService;\r\n\r\n    @Mock\r\n    private compteRepository compteRepository;\r\n\r\n    private AutoCloseable closeable;\r\n\r\n    @BeforeEach\r\n    void setUp() {\r\n        closeable = MockitoAnnotations.openMocks(this);\r\n        CompteService = new CompteServiceImpl(compteRepository, ...);\r\n    }\r\n\r\n    @AfterEach\r\n    void tearDown() {\r\n        closeable.close();\r\n    }\r\n\r\n    // ...\r\n}\r\n```","title":"NullPointerException in Junit 5 @MockBean","body":"<p>The mocks need to be initialized before they can be used. There are several options to do this.</p>\n<p>The first option would be to use <code>@SpringExtension</code> which will initialize the mocks annotated with <code>@MockBean</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@ExtendWith(SpringExtension.class)\npublic class CompteServiceImplTest {\n    @Autowired\n    private CompteService CompteService;\n\n    @MockBean\n    private compteRepository compteRepository;\n\n    // ...\n}\n</code></pre>\n<p>This will make sure that the repository bean is mocked before the service bean is autowired.</p>\n<p>However, since you are writing a unit test for the service, you don't need the Spring extension at all. The second option is to use <code>@Mock</code> instead of <code>@MockBean</code>, and call <code>@InjectMocks</code> in conjunction with the <code>MockitoExtension</code> for constructing the service under test:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@ExtendWith(MockitoExtension.class)\npublic class CompteServiceImplTest {\n    @InjectMocks\n    private CompteService CompteService;\n    @Mock\n    private compteRepository compteRepository;\n\n    // ...\n}\n</code></pre>\n<p>Alternatively, you could just call <code>MockitoAnnotations.initMocks()</code>, which will initialize the mocks annotated with <code>@Mock</code>, and use constructor injection for your service:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class CompteServiceImplTest {\n    private CompteService CompteService;\n\n    @Mock\n    private compteRepository compteRepository;\n\n    @BeforeEach\n    void setUp() {\n        MockitoAnnotations.initMocks(this);\n        CompteService = new CompteServiceImpl(compteRepository, ...);\n    }\n\n    // ...\n}\n</code></pre>\n<p>Finally, you could do it all without annotations just by calling <code>Mockito.mock()</code> directly:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class CompteServiceImplTest {\n    private compteRepository compteRepository;\n\n    @BeforeEach\n    void setUp() {\n        compteRepository = Mockito.mock();\n        CompteService = new CompteServiceImpl(compteRepository, ...);\n    }\n\n    // ...\n}\n</code></pre>\n<p><strong>EDIT:</strong></p>\n<p>Since Mockito 3, the <code>MockitoAnnotations.initMocks()</code> has been deprecated in favour of <code>MockitoAnnotations.openMocks()</code>. This method returns an instance of <code>AutoCloseable</code> which can be used to close the resource after the test.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class CompteServiceImplTest {\n    private CompteService CompteService;\n\n    @Mock\n    private compteRepository compteRepository;\n\n    private AutoCloseable closeable;\n\n    @BeforeEach\n    void setUp() {\n        closeable = MockitoAnnotations.openMocks(this);\n        CompteService = new CompteServiceImpl(compteRepository, ...);\n    }\n\n    @AfterEach\n    void tearDown() {\n        closeable.close();\n    }\n\n    // ...\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":987434,"reputation":10946,"user_id":1005607,"accept_rate":64,"display_name":"gene b."},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1679489601,"creation_date":1679263312,"answer_id":75785190,"question_id":64672608,"body_markdown":"Here&#39;s what&#39;s working for me:\r\n\r\n    @ExtendWith(MockitoExtension.class)\r\n    public class Ar11ApplicationServiceTest {\r\n    \t\r\n    \t// The inner DAO is mocked\r\n        @Mock\r\n        private Ar11ApplicationDAO ar11ApplicationDAO;\r\n        \r\n        // InjectMocks\r\n        @InjectMocks\r\n        private Ar11ApplicationServiceImpl ar11ApplicationService; // Note Implementation\r\n    \r\n    \t@BeforeEach\r\n    \tvoid setUp() throws Exception {\r\n            // ... Set up any collections to be returned for Mock objects\r\n            // ... when(..) -&gt; then(..)\r\n        }\r\n    \r\n    \t@Test\r\n    \tvoid testService_HappyPath() {\r\n            // Call service method to be tested\r\n            ar11ApplicationService.process();  \r\n        }","title":"NullPointerException in Junit 5 @MockBean","body":"<p>Here's what's working for me:</p>\n<pre><code>@ExtendWith(MockitoExtension.class)\npublic class Ar11ApplicationServiceTest {\n    \n    // The inner DAO is mocked\n    @Mock\n    private Ar11ApplicationDAO ar11ApplicationDAO;\n    \n    // InjectMocks\n    @InjectMocks\n    private Ar11ApplicationServiceImpl ar11ApplicationService; // Note Implementation\n\n    @BeforeEach\n    void setUp() throws Exception {\n        // ... Set up any collections to be returned for Mock objects\n        // ... when(..) -&gt; then(..)\n    }\n\n    @Test\n    void testService_HappyPath() {\n        // Call service method to be tested\n        ar11ApplicationService.process();  \n    }\n</code></pre>\n"}],"owner":{"account_id":3346587,"reputation":674,"user_id":2811635,"accept_rate":62,"display_name":"Ousmane MBINTE"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":14953,"favorite_count":0,"down_vote_count":0,"up_vote_count":11,"accepted_answer_id":64674701,"answer_count":2,"score":11,"last_activity_date":1679489601,"creation_date":1604449017,"question_id":64672608,"body_markdown":"I wrote a JUnit 5 test for my service in my Spring Boot application.\r\nI used `@MockBean` to mock `PasswordEncoder` and other beans but I obtain a `NullPointerException`.\r\n\r\nI always obtain a NullPointerException during the `when` call : \r\n`\r\nwhen(compteRepository.getByLogin(anyString())).thenReturn(Optional.of(acc));\r\n`\r\n\r\nService\r\n\r\n    package com.compte.application.impl;\r\n    \r\n    import com.compte.application.CompteService;\r\n    import com.compte.domain.exceptions.EntityNotFoundExcpetion;\r\n    import com.compte.domain.model.Compte;\r\n    import com.compte.domain.model.CompteUpdatedData;\r\n    import com.compte.domain.repository.CompteRepository;\r\n    import com.compte.domain.utils.CompteUtil;\r\n    import lombok.AllArgsConstructor;\r\n    import org.slf4j.Logger;\r\n    import org.slf4j.LoggerFactory;\r\n    import org.springframework.security.crypto.password.PasswordEncoder;\r\n    \r\n    import java.time.LocalDate;\r\n    import java.util.Optional;\r\n    \r\n    /**\r\n     * @author mbint\r\n     */\r\n    @AllArgsConstructor\r\n    public class CompteServiceImpl implements CompteService{\r\n    \r\n        private final static Logger LOGGER = LoggerFactory.getLogger(CompteService.class);\r\n    \r\n        private CompteRepository CompteRepository;\r\n        private PasswordEncoder passwordEncoder;\r\n    \r\n        @Override\r\n        public Optional&lt;Compte&gt; getByLogin(String login) {\r\n            return CompteRepository.getByLogin(login);\r\n        }\r\n    \r\n        @Override\r\n        public void update(final Long id, CompteUpdatedData updatedData) {\r\n            Optional&lt;Compte&gt; optional = CompteRepository.getById(id);\r\n            if(optional.isPresent()) {\r\n                Compte Compte = optional.get();\r\n                Compte.setFirstName(updatedData.getFirstName());\r\n                Compte.setLastName(updatedData.getLastName());\r\n                CompteRepository.save(Compte);\r\n            } else {\r\n                throw new EntityNotFoundExcpetion(&quot;Compte: &quot; + id + &quot; not found !!&quot;);\r\n            }\r\n        }\r\n    }\r\n\r\nJunit Test\r\n\r\n    package com.compte.application;\r\n    \r\n    import com.compte.application.impl.CompteServiceImpl;\r\n    import com.compte.domain.model.Compte;\r\n    import com.compte.domain.model.CompteUpdatedData;\r\n    import com.compte.domain.repository.compteRepository;\r\n    import org.junit.jupiter.api.Assertions;\r\n    import org.junit.jupiter.api.DisplayName;\r\n    import org.junit.jupiter.api.Test;\r\n    import org.springframework.boot.test.mock.mockito.MockBean;\r\n    import org.springframework.security.crypto.password.PasswordEncoder;\r\n    \r\n    import java.util.ArrayList;\r\n    import java.util.List;\r\n    import java.util.Optional;\r\n    \r\n    import static org.mockito.Mockito.*;\r\n    \r\n    \r\n    /**\r\n     * @author mbint\r\n     */\r\n    public class CompteServiceImplTest {\r\n    \r\n        private final static String PASSWORD = &quot;Passw00rd&quot;;\r\n    \r\n        @MockBean\r\n        private compteRepository compteRepository;\r\n        @MockBean\r\n        private PasswordEncoder passwordEncoder;\r\n        private CompteService CompteService = new CompteServiceImpl(compteRepository, passwordEncoder);\r\n    \r\n        @DisplayName((&quot;Should return existing user&quot;))\r\n        @Test\r\n        private void given_login_then_return_existing_user() {\r\n            Compte acc = Compte.builder().id(1L)\r\n                    .firstName(&quot;Luc&quot;)\r\n                    .lastName(&quot;JOJO&quot;)\r\n                    .login(&quot;xxx@gmail.com&quot;)\r\n                    .password(&quot;xxxxxxxxxxxxxxx&quot;)\r\n                    .build();\r\n            when(compteRepository.getByLogin(anyString())).thenReturn(Optional.of(acc));\r\n    \r\n            Optional&lt;Compte&gt; optional = CompteService.getByLogin(&quot;xxx@gmail.com&quot;);\r\n            Compte Compte = optional.get();\r\n    \r\n            Assertions.assertSame(1L, acc.getId());\r\n            Assertions.assertSame(&quot;xxx@gmail.com&quot;, Compte.getLogin());\r\n        }\r\n    \r\n        @DisplayName(&quot;Should update existing user&quot;)\r\n        @Test\r\n        public void given_edited_Compte_then_update_user() {\r\n            Compte acc = Compte.builder().id(1L)\r\n                    .firstName(&quot;Luc&quot;)\r\n                    .lastName(&quot;JOJO&quot;)\r\n                    .email(&quot;xxx@gmail.com&quot;)\r\n                    .password(&quot;xxxxxxxxxxxxxxx&quot;)\r\n                    .build();\r\n            when(compteRepository.getById(anyLong())).thenReturn(Optional.of(acc));\r\n    \r\n            CompteUpdatedData updatedData = CompteUpdatedData.builder()\r\n                    .firstName(&quot;Moos&quot;)\r\n                    .lastName(&quot;Man&quot;)\r\n                    .build();\r\n            CompteService.update(1L, updatedData);\r\n            Assertions.assertSame(&quot;Moos&quot;, acc.getFirstName());\r\n        }\r\n    \r\n        private List&lt;Compte&gt; getComptes() {\r\n            List&lt;Compte&gt; Comptes = new ArrayList&lt;&gt;();\r\n    \r\n            Compte acc1 = Compte.builder()\r\n                    .id(1L)\r\n                    .firstName(&quot;Luc&quot;)\r\n                    .lastName(&quot;JOJO&quot;)\r\n                    .email(&quot;xxx@gmail.com&quot;)\r\n                    .login(&quot;xxx@gmail.com&quot;)\r\n                    .build();\r\n            Comptes.add(acc1);\r\n    \r\n            Compte acc2= Compte.builder()\r\n                    .id(2L)\r\n                    .firstName(&quot;Jean&quot;)\r\n                    .lastName(&quot;KELLY&quot;)\r\n                    .email(&quot;jean.kelly@gmail.com&quot;)\r\n                    .login(&quot;jean.kelly@gmail.com&quot;)\r\n                    .build();\r\n            Comptes.add(acc2);\r\n    \r\n            Compte acc3= Compte.builder()\r\n                    .id(3L)\r\n                    .firstName(&quot;Marc&quot;)\r\n                    .lastName(&quot;BARBY&quot;)\r\n                    .email(&quot;marc.barby@gmail.com&quot;)\r\n                    .login(&quot;marc.barby@gmail.com&quot;)\r\n                    .build();\r\n            Comptes.add(acc3);\r\n    \r\n            return Comptes;\r\n        }\r\n    \r\n    }\r\n\r\nSpring boot application\r\n\r\n    package com.compte;\r\n    \r\n    import com.compte.application.CompteService;\r\n    import com.compte.application.impl.CompteServiceImpl;\r\n    import com.compte.domain.repository.CompteRepository;\r\n    import com.compte.infrastructure.repository.database.CompteDBRepositiry;\r\n    import com.ombsc.bargo.common.config.SwaggerConfig;\r\n    import org.springframework.boot.SpringApplication;\r\n    import org.springframework.boot.autoconfigure.SpringBootApplication;\r\n    import org.springframework.context.annotation.Bean;\r\n    import org.springframework.context.annotation.ComponentScan;\r\n    import org.springframework.context.annotation.Import;\r\n    import org.springframework.hateoas.client.LinkDiscoverer;\r\n    import org.springframework.hateoas.client.LinkDiscoverers;\r\n    import org.springframework.hateoas.mediatype.collectionjson.CollectionJsonLinkDiscoverer;\r\n    import org.springframework.plugin.core.SimplePluginRegistry;\r\n    import org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;\r\n    import org.springframework.security.crypto.password.PasswordEncoder;\r\n    \r\n    import java.util.ArrayList;\r\n    import java.util.List;\r\n    \r\n    @ComponentScan({&quot;com.compte.interfaces.interfaces&quot;})\r\n    @SpringBootApplication\r\n    @Import({SwaggerConfig.class})\r\n    public class CompteApplication {\r\n    \r\n        public static void main(String[] args) {\r\n            SpringApplication.run(CompteApplication.class, args);\r\n        }\r\n    \r\n        @Bean\r\n        public CompteRepository getRepository() {\r\n            return new CompteDBRepositiry();\r\n        }\r\n    \r\n        @Bean\r\n        public PasswordEncoder passwordEncoder() {\r\n            return new BCryptPasswordEncoder();\r\n        }\r\n    \r\n    \r\n        @Bean\r\n        public CompteService CompteService(CompteRepository repository, PasswordEncoder passwordEncoder) {\r\n            return new CompteServiceImpl(repository, passwordEncoder);\r\n        }\r\n    \r\n        @Bean\r\n        public LinkDiscoverers discovers() {\r\n            List&lt;LinkDiscoverer&gt; plugins = new ArrayList&lt;&gt;();\r\n            plugins.add(new CollectionJsonLinkDiscoverer());\r\n            return new LinkDiscoverers(SimplePluginRegistry.create(plugins));\r\n        }\r\n    }\r\n\r\n","title":"NullPointerException in Junit 5 @MockBean","body":"<p>I wrote a JUnit 5 test for my service in my Spring Boot application.\nI used <code>@MockBean</code> to mock <code>PasswordEncoder</code> and other beans but I obtain a <code>NullPointerException</code>.</p>\n<p>I always obtain a NullPointerException during the <code>when</code> call :\n<code>when(compteRepository.getByLogin(anyString())).thenReturn(Optional.of(acc));</code></p>\n<p>Service</p>\n<pre><code>package com.compte.application.impl;\n\nimport com.compte.application.CompteService;\nimport com.compte.domain.exceptions.EntityNotFoundExcpetion;\nimport com.compte.domain.model.Compte;\nimport com.compte.domain.model.CompteUpdatedData;\nimport com.compte.domain.repository.CompteRepository;\nimport com.compte.domain.utils.CompteUtil;\nimport lombok.AllArgsConstructor;\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\nimport org.springframework.security.crypto.password.PasswordEncoder;\n\nimport java.time.LocalDate;\nimport java.util.Optional;\n\n/**\n * @author mbint\n */\n@AllArgsConstructor\npublic class CompteServiceImpl implements CompteService{\n\n    private final static Logger LOGGER = LoggerFactory.getLogger(CompteService.class);\n\n    private CompteRepository CompteRepository;\n    private PasswordEncoder passwordEncoder;\n\n    @Override\n    public Optional&lt;Compte&gt; getByLogin(String login) {\n        return CompteRepository.getByLogin(login);\n    }\n\n    @Override\n    public void update(final Long id, CompteUpdatedData updatedData) {\n        Optional&lt;Compte&gt; optional = CompteRepository.getById(id);\n        if(optional.isPresent()) {\n            Compte Compte = optional.get();\n            Compte.setFirstName(updatedData.getFirstName());\n            Compte.setLastName(updatedData.getLastName());\n            CompteRepository.save(Compte);\n        } else {\n            throw new EntityNotFoundExcpetion(&quot;Compte: &quot; + id + &quot; not found !!&quot;);\n        }\n    }\n}\n</code></pre>\n<p>Junit Test</p>\n<pre><code>package com.compte.application;\n\nimport com.compte.application.impl.CompteServiceImpl;\nimport com.compte.domain.model.Compte;\nimport com.compte.domain.model.CompteUpdatedData;\nimport com.compte.domain.repository.compteRepository;\nimport org.junit.jupiter.api.Assertions;\nimport org.junit.jupiter.api.DisplayName;\nimport org.junit.jupiter.api.Test;\nimport org.springframework.boot.test.mock.mockito.MockBean;\nimport org.springframework.security.crypto.password.PasswordEncoder;\n\nimport java.util.ArrayList;\nimport java.util.List;\nimport java.util.Optional;\n\nimport static org.mockito.Mockito.*;\n\n\n/**\n * @author mbint\n */\npublic class CompteServiceImplTest {\n\n    private final static String PASSWORD = &quot;Passw00rd&quot;;\n\n    @MockBean\n    private compteRepository compteRepository;\n    @MockBean\n    private PasswordEncoder passwordEncoder;\n    private CompteService CompteService = new CompteServiceImpl(compteRepository, passwordEncoder);\n\n    @DisplayName((&quot;Should return existing user&quot;))\n    @Test\n    private void given_login_then_return_existing_user() {\n        Compte acc = Compte.builder().id(1L)\n                .firstName(&quot;Luc&quot;)\n                .lastName(&quot;JOJO&quot;)\n                .login(&quot;xxx@gmail.com&quot;)\n                .password(&quot;xxxxxxxxxxxxxxx&quot;)\n                .build();\n        when(compteRepository.getByLogin(anyString())).thenReturn(Optional.of(acc));\n\n        Optional&lt;Compte&gt; optional = CompteService.getByLogin(&quot;xxx@gmail.com&quot;);\n        Compte Compte = optional.get();\n\n        Assertions.assertSame(1L, acc.getId());\n        Assertions.assertSame(&quot;xxx@gmail.com&quot;, Compte.getLogin());\n    }\n\n    @DisplayName(&quot;Should update existing user&quot;)\n    @Test\n    public void given_edited_Compte_then_update_user() {\n        Compte acc = Compte.builder().id(1L)\n                .firstName(&quot;Luc&quot;)\n                .lastName(&quot;JOJO&quot;)\n                .email(&quot;xxx@gmail.com&quot;)\n                .password(&quot;xxxxxxxxxxxxxxx&quot;)\n                .build();\n        when(compteRepository.getById(anyLong())).thenReturn(Optional.of(acc));\n\n        CompteUpdatedData updatedData = CompteUpdatedData.builder()\n                .firstName(&quot;Moos&quot;)\n                .lastName(&quot;Man&quot;)\n                .build();\n        CompteService.update(1L, updatedData);\n        Assertions.assertSame(&quot;Moos&quot;, acc.getFirstName());\n    }\n\n    private List&lt;Compte&gt; getComptes() {\n        List&lt;Compte&gt; Comptes = new ArrayList&lt;&gt;();\n\n        Compte acc1 = Compte.builder()\n                .id(1L)\n                .firstName(&quot;Luc&quot;)\n                .lastName(&quot;JOJO&quot;)\n                .email(&quot;xxx@gmail.com&quot;)\n                .login(&quot;xxx@gmail.com&quot;)\n                .build();\n        Comptes.add(acc1);\n\n        Compte acc2= Compte.builder()\n                .id(2L)\n                .firstName(&quot;Jean&quot;)\n                .lastName(&quot;KELLY&quot;)\n                .email(&quot;jean.kelly@gmail.com&quot;)\n                .login(&quot;jean.kelly@gmail.com&quot;)\n                .build();\n        Comptes.add(acc2);\n\n        Compte acc3= Compte.builder()\n                .id(3L)\n                .firstName(&quot;Marc&quot;)\n                .lastName(&quot;BARBY&quot;)\n                .email(&quot;marc.barby@gmail.com&quot;)\n                .login(&quot;marc.barby@gmail.com&quot;)\n                .build();\n        Comptes.add(acc3);\n\n        return Comptes;\n    }\n\n}\n</code></pre>\n<p>Spring boot application</p>\n<pre><code>package com.compte;\n\nimport com.compte.application.CompteService;\nimport com.compte.application.impl.CompteServiceImpl;\nimport com.compte.domain.repository.CompteRepository;\nimport com.compte.infrastructure.repository.database.CompteDBRepositiry;\nimport com.ombsc.bargo.common.config.SwaggerConfig;\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.ComponentScan;\nimport org.springframework.context.annotation.Import;\nimport org.springframework.hateoas.client.LinkDiscoverer;\nimport org.springframework.hateoas.client.LinkDiscoverers;\nimport org.springframework.hateoas.mediatype.collectionjson.CollectionJsonLinkDiscoverer;\nimport org.springframework.plugin.core.SimplePluginRegistry;\nimport org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;\nimport org.springframework.security.crypto.password.PasswordEncoder;\n\nimport java.util.ArrayList;\nimport java.util.List;\n\n@ComponentScan({&quot;com.compte.interfaces.interfaces&quot;})\n@SpringBootApplication\n@Import({SwaggerConfig.class})\npublic class CompteApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(CompteApplication.class, args);\n    }\n\n    @Bean\n    public CompteRepository getRepository() {\n        return new CompteDBRepositiry();\n    }\n\n    @Bean\n    public PasswordEncoder passwordEncoder() {\n        return new BCryptPasswordEncoder();\n    }\n\n\n    @Bean\n    public CompteService CompteService(CompteRepository repository, PasswordEncoder passwordEncoder) {\n        return new CompteServiceImpl(repository, passwordEncoder);\n    }\n\n    @Bean\n    public LinkDiscoverers discovers() {\n        List&lt;LinkDiscoverer&gt; plugins = new ArrayList&lt;&gt;();\n        plugins.add(new CollectionJsonLinkDiscoverer());\n        return new LinkDiscoverers(SimplePluginRegistry.create(plugins));\n    }\n}\n</code></pre>\n"},{"tags":["java","jax-ws","w3c","mtom"],"answers":[{"tags":[],"owner":{"account_id":4116323,"reputation":145,"user_id":3377771,"display_name":"Dove"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1679489457,"creation_date":1679489457,"answer_id":75812493,"question_id":75812391,"body_markdown":"We found the solution:\r\nIt is enough to upgrade jaxws (jaxws-rt or jaxws-ri - depends on your usage).\r\n\r\nWe upgraded to version 2.3.6 released 6.2.2023:\r\n```\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;com.sun.xml.ws&lt;/groupId&gt;\r\n    &lt;artifactId&gt;jaxws-rt&lt;/artifactId&gt;\r\n    &lt;version&gt;2.3.6&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\nDidn&#39;t find any release notes so far. \r\n- tag - https://github.com/eclipse-ee4j/metro-jax-ws/releases/tag/2.3.6\r\n- branch https://github.com/eclipse-ee4j/metro-jax-ws/commits/2.3.6-RELEASE","title":"JAX-WS server application cannot start due to schema validation","body":"<p>We found the solution:\nIt is enough to upgrade jaxws (jaxws-rt or jaxws-ri - depends on your usage).</p>\n<p>We upgraded to version 2.3.6 released 6.2.2023:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.sun.xml.ws&lt;/groupId&gt;\n    &lt;artifactId&gt;jaxws-rt&lt;/artifactId&gt;\n    &lt;version&gt;2.3.6&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>Didn't find any release notes so far.</p>\n<ul>\n<li>tag - <a href=\"https://github.com/eclipse-ee4j/metro-jax-ws/releases/tag/2.3.6\" rel=\"nofollow noreferrer\">https://github.com/eclipse-ee4j/metro-jax-ws/releases/tag/2.3.6</a></li>\n<li>branch <a href=\"https://github.com/eclipse-ee4j/metro-jax-ws/commits/2.3.6-RELEASE\" rel=\"nofollow noreferrer\">https://github.com/eclipse-ee4j/metro-jax-ws/commits/2.3.6-RELEASE</a></li>\n</ul>\n"}],"owner":{"account_id":4116323,"reputation":145,"user_id":3377771,"display_name":"Dove"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":247,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75812493,"answer_count":1,"score":0,"last_activity_date":1679489457,"creation_date":1679488920,"question_id":75812391,"body_markdown":"Application can&#39;t start with following exception:\r\n\r\n```\r\nINFO: Initializing Spring root WebApplicationContext\r\n15:19:04.697 [main] ERROR org.springframework.web.context.ContextLoader - Context initialization failed\r\norg.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;com.sun.xml.ws.transport.http.servlet.SpringBinding#1&#39; defined in class path resource [applicationContext.xml]: Cannot create inner bean &#39;(inner bean)#e5522a5&#39; of type [org.jvnet.jax_ws_commons.spring.SpringService] while setting bean property &#39;service&#39;; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;(inner bean)#e5522a5&#39;: FactoryBean threw exception on object creation; nested exception is javax.xml.ws.WebServiceException: org.xml.sax.SAXParseException; systemId: http://www.w3.org/2005/05/xmlmime; lineNumber: 1; columnNumber: 1; Premature end of file.\r\n        at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveInnerBean(BeanDefinitionValueResolver.java:389) ~[spring-beans-5.3.21.jar:5.3.21]\r\n        at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:134) ~[spring-beans-5.3.21.jar:5.3.21]\r\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1707) ~[spring-beans-5.3.21.jar:5.3.21]\r\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1452) ~[spring-beans-5.3.21.jar:5.3.21]\r\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:619) ~[spring-beans-5.3.21.jar:5.3.21]\r\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.21.jar:5.3.21]\r\n        at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.21.jar:5.3.21]\r\n        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.21.jar:5.3.21]\r\n        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.21.jar:5.3.21]\r\n        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.21.jar:5.3.21]\r\n        at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:955) ~[spring-beans-5.3.21.jar:5.3.21]\r\n        at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918) ~[spring-context-5.3.21.jar:5.3.21]\r\n        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583) ~[spring-context-5.3.21.jar:5.3.21]\r\n        at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:401) ~[spring-web-5.3.21.jar:5.3.21]\r\n        at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:292) ~[spring-web-5.3.21.jar:5.3.21]\r\n        at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:103) ~[spring-web-5.3.21.jar:5.3.21]\r\n        at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4206) ~[catalina-6.0.37.jar:6.0.37]\r\n        at org.apache.catalina.core.StandardContext.start(StandardContext.java:4705) ~[catalina-6.0.37.jar:6.0.37]\r\n        at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057) ~[catalina-6.0.37.jar:6.0.37]\r\n        at org.apache.catalina.core.StandardHost.start(StandardHost.java:840) ~[catalina-6.0.37.jar:6.0.37]\r\n        at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057) ~[catalina-6.0.37.jar:6.0.37]\r\n        at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:463) ~[catalina-6.0.37.jar:6.0.37]\r\n        at org.apache.catalina.startup.Embedded.start(Embedded.java:825) ~[catalina-6.0.37.jar:6.0.37]\r\n        at org.apache.tomcat.maven.plugin.tomcat6.AbstractRunMojo.startContainer(AbstractRunMojo.java:997) ~[tomcat6-maven-plugin-2.2.jar:2.2]\r\n        at org.apache.tomcat.maven.plugin.tomcat6.AbstractRunMojo.execute(AbstractRunMojo.java:512) ~[tomcat6-maven-plugin-2.2.jar:2.2]\r\n        at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:137) ~[maven-core-3.8.7.jar:3.8.7]\r\n        at org.apache.maven.lifecycle.internal.MojoExecutor.doExecute2(MojoExecutor.java:370) ~[maven-core-3.8.7.jar:3.8.7]\r\n        at org.apache.maven.lifecycle.internal.MojoExecutor.doExecute(MojoExecutor.java:351) ~[maven-core-3.8.7.jar:3.8.7]\r\n        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:215) ~[maven-core-3.8.7.jar:3.8.7]\r\n        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:171) ~[maven-core-3.8.7.jar:3.8.7]\r\n        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:163) ~[maven-core-3.8.7.jar:3.8.7]\r\n        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:117) ~[maven-core-3.8.7.jar:3.8.7]\r\n        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:81) ~[maven-core-3.8.7.jar:3.8.7]\r\n        at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build(SingleThreadedBuilder.java:56) ~[maven-core-3.8.7.jar:3.8.7]\r\n        at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:128) ~[maven-core-3.8.7.jar:3.8.7]\r\n        at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:298) ~[maven-core-3.8.7.jar:3.8.7]\r\n        at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:192) ~[maven-core-3.8.7.jar:3.8.7]\r\n        at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:105) ~[maven-core-3.8.7.jar:3.8.7]\r\n        at org.apache.maven.cli.MavenCli.execute(MavenCli.java:960) ~[maven-embedder-3.8.7.jar:3.8.7]\r\n        at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:293) ~[maven-embedder-3.8.7.jar:3.8.7]\r\n        at org.apache.maven.cli.MavenCli.main(MavenCli.java:196) ~[maven-embedder-3.8.7.jar:3.8.7]\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:1.8.0_352]\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:1.8.0_352]\r\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:1.8.0_352]\r\n        at java.lang.reflect.Method.invoke(Method.java:498) ~[?:1.8.0_352]\r\n        at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:282) ~[plexus-classworlds-2.6.0.jar:?]\r\n        at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:225) ~[plexus-classworlds-2.6.0.jar:?]\r\n        at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:406) ~[plexus-classworlds-2.6.0.jar:?]\r\n        at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:347) ~[plexus-classworlds-2.6.0.jar:?]\r\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;(inner bean)#e5522a5&#39;: FactoryBean threw exception on object creation; nested exception is javax.xml.ws.WebServiceException: org.xml.sax.SAXParseException; systemId: http://www.w3.org/2005/05/xmlmime; lineNumber: 1; columnNumber: 1; Premature end of file.\r\n        at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.doGetObjectFromFactoryBean(FactoryBeanRegistrySupport.java:176) ~[spring-beans-5.3.21.jar:5.3.21]\r\n        at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.getObjectFromFactoryBean(FactoryBeanRegistrySupport.java:135) ~[spring-beans-5.3.21.jar:5.3.21]\r\n        at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveInnerBean(BeanDefinitionValueResolver.java:377) ~[spring-beans-5.3.21.jar:5.3.21]\r\n        ... 48 more\r\nCaused by: javax.xml.ws.WebServiceException: org.xml.sax.SAXParseException; systemId: http://www.w3.org/2005/05/xmlmime; lineNumber: 1; columnNumber: 1; Premature end of file.\r\n        at com.sun.xml.ws.server.ServerSchemaValidationTube.&lt;init&gt;(ServerSchemaValidationTube.java:70) ~[jaxws-rt-2.3.5.jar:2.3.5]\r\n        at com.sun.xml.ws.api.pipe.ServerTubeAssemblerContext.createValidationTube(ServerTubeAssemblerContext.java:187) ~[jaxws-rt-2.3.5.jar:2.3.5]\r\n        at com.sun.xml.ws.assembler.jaxws.ValidationTubeFactory.createTube(ValidationTubeFactory.java:34) ~[jaxws-rt-2.3.5.jar:2.3.5]\r\n        at com.sun.xml.ws.assembler.TubeCreator.createTube(TubeCreator.java:67) ~[jaxws-rt-2.3.5.jar:2.3.5]\r\n        at com.sun.xml.ws.assembler.MetroTubelineAssembler.createServer(MetroTubelineAssembler.java:166) ~[jaxws-rt-2.3.5.jar:2.3.5]\r\n        at com.sun.xml.ws.server.WSEndpointImpl.&lt;init&gt;(WSEndpointImpl.java:163) ~[jaxws-rt-2.3.5.jar:2.3.5]\r\n        at com.sun.xml.ws.server.EndpointFactory.create(EndpointFactory.java:307) ~[jaxws-rt-2.3.5.jar:2.3.5]\r\n        at com.sun.xml.ws.server.EndpointFactory.create(EndpointFactory.java:302) ~[jaxws-rt-2.3.5.jar:2.3.5]\r\n        at com.sun.xml.ws.server.EndpointFactory.createEndpoint(EndpointFactory.java:134) ~[jaxws-rt-2.3.5.jar:2.3.5]\r\n        at com.sun.xml.ws.api.server.WSEndpoint.create(WSEndpoint.java:578) ~[jaxws-rt-2.3.5.jar:2.3.5]\r\n        at com.sun.xml.ws.api.server.WSEndpoint.create(WSEndpoint.java:560) ~[jaxws-rt-2.3.5.jar:2.3.5]\r\n        at org.jvnet.jax_ws_commons.spring.SpringService.getObject(SpringService.java:368) ~[jaxws-spring-1.9.jar:?]\r\n        at org.jvnet.jax_ws_commons.spring.SpringService.getObject(SpringService.java:80) ~[jaxws-spring-1.9.jar:?]\r\n        at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.doGetObjectFromFactoryBean(FactoryBeanRegistrySupport.java:169) ~[spring-beans-5.3.21.jar:5.3.21]\r\n        at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.getObjectFromFactoryBean(FactoryBeanRegistrySupport.java:135) ~[spring-beans-5.3.21.jar:5.3.21]\r\n        at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveInnerBean(BeanDefinitionValueResolver.java:377) ~[spring-beans-5.3.21.jar:5.3.21]\r\n        ... 48 more\r\nCaused by: org.xml.sax.SAXParseException: Premature end of file.\r\n        at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.createSAXParseException(ErrorHandlerWrapper.java:204) ~[?:1.8.0_352]\r\n        at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.fatalError(ErrorHandlerWrapper.java:178) ~[?:1.8.0_352]\r\n        at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:399) ~[?:1.8.0_352]\r\n        at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:326) ~[?:1.8.0_352]\r\n        at com.sun.org.apache.xerces.internal.impl.XMLScanner.reportFatalError(XMLScanner.java:1466) ~[?:1.8.0_352]\r\n        at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl$PrologDriver.next(XMLDocumentScannerImpl.java:1013) ~[?:1.8.0_352]\r\n        at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(XMLDocumentScannerImpl.java:601) ~[?:1.8.0_352]\r\n        at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.next(XMLNSDocumentScannerImpl.java:112) ~[?:1.8.0_352]\r\n        at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScannerImpl.java:504) ~[?:1.8.0_352]\r\n        at com.sun.org.apache.xerces.internal.impl.xs.opti.SchemaParsingConfig.parse(SchemaParsingConfig.java:629) ~[?:1.8.0_352]\r\n        at com.sun.org.apache.xerces.internal.impl.xs.opti.SchemaParsingConfig.parse(SchemaParsingConfig.java:685) ~[?:1.8.0_352]\r\n        at com.sun.org.apache.xerces.internal.impl.xs.opti.SchemaDOMParser.parse(SchemaDOMParser.java:530) ~[?:1.8.0_352]\r\n        at com.sun.org.apache.xerces.internal.impl.xs.traversers.XSDHandler.getSchemaDocument(XSDHandler.java:2180) ~[?:1.8.0_352]\r\n        at com.sun.org.apache.xerces.internal.impl.xs.traversers.XSDHandler.resolveSchema(XSDHandler.java:2083) ~[?:1.8.0_352]\r\n        at com.sun.org.apache.xerces.internal.impl.xs.traversers.XSDHandler.constructTrees(XSDHandler.java:1013) ~[?:1.8.0_352]\r\n        at com.sun.org.apache.xerces.internal.impl.xs.traversers.XSDHandler.constructTrees(XSDHandler.java:1125) ~[?:1.8.0_352]\r\n        at com.sun.org.apache.xerces.internal.impl.xs.traversers.XSDHandler.constructTrees(XSDHandler.java:1125) ~[?:1.8.0_352]\r\n        at com.sun.org.apache.xerces.internal.impl.xs.traversers.XSDHandler.parseSchema(XSDHandler.java:624) ~[?:1.8.0_352]\r\n        at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaLoader.loadSchema(XMLSchemaLoader.java:609) ~[?:1.8.0_352]\r\n        at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaLoader.loadGrammar(XMLSchemaLoader.java:568) ~[?:1.8.0_352]\r\n        at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaLoader.loadGrammar(XMLSchemaLoader.java:534) ~[?:1.8.0_352]\r\n        at com.sun.org.apache.xerces.internal.jaxp.validation.XMLSchemaFactory.newSchema(XMLSchemaFactory.java:253) ~[?:1.8.0_352]\r\n        at com.sun.xml.ws.server.ServerSchemaValidationTube.&lt;init&gt;(ServerSchemaValidationTube.java:68) ~[jaxws-rt-2.3.5.jar:2.3.5]\r\n        at com.sun.xml.ws.api.pipe.ServerTubeAssemblerContext.createValidationTube(ServerTubeAssemblerContext.java:187) ~[jaxws-rt-2.3.5.jar:2.3.5]\r\n        at com.sun.xml.ws.assembler.jaxws.ValidationTubeFactory.createTube(ValidationTubeFactory.java:34) ~[jaxws-rt-2.3.5.jar:2.3.5]\r\n        at com.sun.xml.ws.assembler.TubeCreator.createTube(TubeCreator.java:67) ~[jaxws-rt-2.3.5.jar:2.3.5]\r\n        at com.sun.xml.ws.assembler.MetroTubelineAssembler.createServer(MetroTubelineAssembler.java:166) ~[jaxws-rt-2.3.5.jar:2.3.5]\r\n        at com.sun.xml.ws.server.WSEndpointImpl.&lt;init&gt;(WSEndpointImpl.java:163) ~[jaxws-rt-2.3.5.jar:2.3.5]\r\n        at com.sun.xml.ws.server.EndpointFactory.create(EndpointFactory.java:307) ~[jaxws-rt-2.3.5.jar:2.3.5]\r\n        at com.sun.xml.ws.server.EndpointFactory.create(EndpointFactory.java:302) ~[jaxws-rt-2.3.5.jar:2.3.5]\r\n        at com.sun.xml.ws.server.EndpointFactory.createEndpoint(EndpointFactory.java:134) ~[jaxws-rt-2.3.5.jar:2.3.5]\r\n        at com.sun.xml.ws.api.server.WSEndpoint.create(WSEndpoint.java:578) ~[jaxws-rt-2.3.5.jar:2.3.5]\r\n        at com.sun.xml.ws.api.server.WSEndpoint.create(WSEndpoint.java:560) ~[jaxws-rt-2.3.5.jar:2.3.5]\r\n        at org.jvnet.jax_ws_commons.spring.SpringService.getObject(SpringService.java:368) ~[jaxws-spring-1.9.jar:?]\r\n        at org.jvnet.jax_ws_commons.spring.SpringService.getObject(SpringService.java:80) ~[jaxws-spring-1.9.jar:?]\r\n        at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.doGetObjectFromFactoryBean(FactoryBeanRegistrySupport.java:169) ~[spring-beans-5.3.21.jar:5.3.21]\r\n        at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.getObjectFromFactoryBean(FactoryBeanRegistrySupport.java:135) ~[spring-beans-5.3.21.jar:5.3.21]\r\n        at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveInnerBean(BeanDefinitionValueResolver.java:377) ~[spring-beans-5.3.21.jar:5.3.21]\r\n        ... 48 more\r\nJan 26, 2023 3:19:04 PM org.apache.catalina.core.StandardContext listenerStart\r\nSEVERE: Exception sending context initialized event to listener instance of class org.springframework.web.context.ContextLoaderListener\r\norg.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;com.sun.xml.ws.transport.http.servlet.SpringBinding#1&#39; defined in class path resource [applicationContext.xml]: Cannot create inner bean &#39;(inner bean)#e5522a5&#39; of type [org.jvnet.jax_ws_commons.spring.SpringService] while setting bean property &#39;service&#39;; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;(inner bean)#e5522a5&#39;: FactoryBean threw exception on object creation; nested exception is javax.xml.ws.WebServiceException: org.xml.sax.SAXParseException; systemId: http://www.w3.org/2005/05/xmlmime; lineNumber: 1; columnNumber: 1; Premature end of file.\r\n        at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveInnerBean(BeanDefinitionValueResolver.java:389)\r\n        at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:134)\r\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1707)\r\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1452)\r\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:619)\r\n        at org.springframework.beans.factory.support.Abstract\r\nAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542)\r\n        at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335)\r\n        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\r\n        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)\r\n        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)\r\n        at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:955)\r\n        at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918)\r\n        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583)\r\n        at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:401)\r\n        at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:292)\r\n        at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:103)\r\n        at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4206)\r\n        at org.apache.catalina.core.StandardContext.start(StandardContext.java:4705)\r\n        at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057)\r\n        at org.apache.catalina.core.StandardHost.start(StandardHost.java:840)\r\n        at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057)\r\n        at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:463)\r\n        at org.apache.catalina.startup.Embedded.start(Embedded.java:825)\r\n        at org.apache.tomcat.maven.plugin.tomcat6.AbstractRunMojo.startContainer(AbstractRunMojo.java:997)\r\n        at org.apache.tomcat.maven.plugin.tomcat6.AbstractRunMojo.execute(AbstractRunMojo.java:512)\r\n        at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:137)\r\n        at org.apache.maven.lifecycle.internal.MojoExecutor.doExecute2(MojoExecutor.java:370)\r\n        at org.apache.maven.lifecycle.internal.MojoExecutor.doExecute(MojoExecutor.java:351)\r\n        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:215)\r\n        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:171)\r\n        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:163)\r\n        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:117)\r\n        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:81)\r\n        at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build(SingleThreadedBuilder.java:56)\r\n        at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:128)\r\n        at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:298)\r\n        at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:192)\r\n        at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:105)\r\n        at org.apache.maven.cli.MavenCli.execute(MavenCli.java:960)\r\n        at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:293)\r\n        at org.apache.maven.cli.MavenCli.main(MavenCli.java:196)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n        at java.lang.reflect.Method.invoke(Method.java:498)\r\n\r\n        at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:282)\r\n        at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:225)\r\n        at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:406)\r\n        at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:347)\r\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;(inner bean)#e5522a5&#39;: FactoryBean threw exception on object creation; nested exception is javax.xml.ws.WebServiceException: org.xml.sax.SAXParseException; systemId: http://www.w3.org/2005/05/xmlmime; lineNumber: 1; columnNumber: 1; Premature end of file.\r\n        at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.doGetObjectFromFactoryBean(FactoryBeanRegistrySupport.java:176)\r\n        at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.getObjectFromFactoryBean(FactoryBeanRegistrySupport.java:135)\r\n        at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveInnerBean(BeanDefinitionValueResolver.java:377)\r\n        ... 48 more\r\nCaused by: javax.xml.ws.WebServiceException: org.xml.sax.SAXParseException; systemId: http://www.w3.org/2005/05/xmlmime; lineNumber: 1; columnNumber: 1; Premature end of file.\r\n        at com.sun.xml.ws.server.ServerSchemaValidationTube.&lt;init&gt;(ServerSchemaValidationTube.java:70)\r\n        at com.sun.xml.ws.api.pipe.ServerTubeAssemblerContext.createValidationTube(ServerTubeAssemblerContext.java:187)\r\n        at com.sun.xml.ws.assembler.jaxws.ValidationTubeFactory.createTube(ValidationTubeFactory.java:34)\r\n        at com.sun.xml.ws.assembler.TubeCreator.createTube(TubeCreator.java:67)\r\n        at com.sun.xml.ws.assembler.MetroTubelineAssembler.createServer(MetroTubelineAssembler.java:166)\r\n        at com.sun.xml.ws.server.WSEndpointImpl.&lt;init&gt;(WSEndpointImpl.java:163)\r\n        at com.sun.xml.ws.server.EndpointFactory.create(EndpointFactory.java:307)\r\n        at com.sun.xml.ws.server.EndpointFactory.create(EndpointFactory.java:302)\r\n        at com.sun.xml.ws.server.EndpointFactory.createEndpoint(EndpointFactory.java:134)\r\n        at com.sun.xml.ws.api.server.WSEndpoint.create(WSEndpoint.java:578)\r\n        at com.sun.xml.ws.api.server.WSEndpoint.create(WSEndpoint.java:560)\r\n        at org.jvnet.jax_ws_commons.spring.SpringService.getObject(SpringService.java:368)\r\n        at org.jvnet.jax_ws_commons.spring.SpringService.getObject(SpringService.java:80)\r\n        at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.doGetObjectFromFactoryBean(FactoryBeanRegistrySupport.java:169)\r\n        ... 50 more\r\nCaused by: org.xml.sax.SAXParseException; systemId: http://www.w3.org/2005/05/xmlmime; lineNumber: 1; columnNumber: 1; Premature end of file.\r\n        at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.createSAXParseException(ErrorHandlerWrapper.java:204)\r\n        at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.fatalError(ErrorHandlerWrapper.java:178)\r\n        at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:399)\r\n        at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:326)\r\n        at com.sun.org.apache.xerces.internal.impl.XMLScanner.reportFatalError(XMLScanner.java:1466)\r\n        at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl$PrologDriver.next(XMLDocumentScannerImpl.java:1013)\r\n        at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(XMLDocumentScannerImpl.java:601)\r\n        at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.next(XMLNSDocumentScannerImpl.java:112)\r\n        at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScannerImpl.java:504)\r\n        at com.sun.org.apache.xerces.internal.impl.xs.opti.SchemaParsingConfig.parse(SchemaParsingConfig.java:629)\r\n        at com.sun.org.apache.xerces.internal.impl.xs.opti.SchemaParsingConfig.parse(SchemaParsingConfig.java:685)\r\n        at com.sun.org.apache.xerces.internal.impl.xs.opti.SchemaDOMParser.parse(SchemaDOMParser.java:530)\r\n        at com.sun.org.apache.xerces.internal.impl.xs.traversers.XSDHandler.getSchemaDocument(XSDHandler.java:2180)\r\n        at com.sun.org.apache.xerces.internal.impl.xs.traversers.XSDHandler.resolveSchema(XSDHandler.java:2083)\r\n        at com.sun.org.apache.xerces.internal.impl.xs.traversers.XSDHandler.constructTrees(XSDHandler.java:1013)\r\n        at com.sun.org.apache.xerces.internal.impl.xs.traversers.XSDHandler.constructTrees(XSDHandler.java:1125)\r\n        at com.sun.org.apache.xerces.internal.impl.xs.traversers.XSDHandler.constructTrees(XSDHandler.java:1125)\r\n        at com.sun.org.apache.xerces.internal.impl.xs.traversers.XSDHandler.parseSchema(XSDHandler.java:624)\r\n        at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaLoader.loadSchema(XMLSchemaLoader.java:609)\r\n        at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaLoader.loadGrammar(XMLSchemaLoader.java:568)\r\n        at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaLoader.loadGrammar(XMLSchemaLoader.java:534)\r\n        at com.sun.org.apache.xerces.internal.jaxp.validation.XMLSchemaFactory.newSchema(XMLSchemaFactory.java:253)\r\n        at com.sun.xml.ws.server.ServerSchemaValidationTube.&lt;init&gt;(ServerSchemaValidationTube.java:68)\r\n        ... 63 more\r\n\r\nJan 26, 2023 3:19:04 PM org.apache.catalina.core.StandardContext start\r\nSEVERE: Error listenerStart\r\n```\r\n\r\nIssues started around middle of January 2023 when tried to restart the server.\r\n\r\nSeems that issue is caused by the redirect (HTTP 302) from HTTP to HTTPS and application cannot process it.\r\nSo probably related to HTTPS redirect (newly done) by w3c.org. More details in:\r\n- https://www.w3.org/blog/2022/07/redirecting-to-https-on-www-w3-org/\r\n- https://www.w3.org/blog/2022/08/https-redirection-observations/\r\n\r\nRelated to the fact that app is using `@SchemaValidation` (com.sun.xml.ws.developer) and in the WSDL we have element with `type=&quot;xs:base64Binary&quot; xmime:expectedContentTypes=&quot;application/octet-stream&quot; xmlns:xmime=&quot;http://www.w3.org/2005/05/xmlmime&quot;` (due to the MTOM)\r\n\r\nApplication is using:\r\n- openjdk version &quot;1.8.0_362&quot; (Temurin)\r\n- Apache Tomcat 8.5.78\r\n- jaxws-ri 2.3.5\r\n\r\nWe were trying to use different JDK to try if there could be difference in SAX parser. But no luck.\r\n\r\nIs there please a way how to resolve it? (questions next to linked w3c.org articles remains not answered)","title":"JAX-WS server application cannot start due to schema validation","body":"<p>Application can't start with following exception:</p>\n<pre><code>INFO: Initializing Spring root WebApplicationContext\n15:19:04.697 [main] ERROR org.springframework.web.context.ContextLoader - Context initialization failed\norg.springframework.beans.factory.BeanCreationException: Error creating bean with name 'com.sun.xml.ws.transport.http.servlet.SpringBinding#1' defined in class path resource [applicationContext.xml]: Cannot create inner bean '(inner bean)#e5522a5' of type [org.jvnet.jax_ws_commons.spring.SpringService] while setting bean property 'service'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name '(inner bean)#e5522a5': FactoryBean threw exception on object creation; nested exception is javax.xml.ws.WebServiceException: org.xml.sax.SAXParseException; systemId: http://www.w3.org/2005/05/xmlmime; lineNumber: 1; columnNumber: 1; Premature end of file.\n        at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveInnerBean(BeanDefinitionValueResolver.java:389) ~[spring-beans-5.3.21.jar:5.3.21]\n        at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:134) ~[spring-beans-5.3.21.jar:5.3.21]\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1707) ~[spring-beans-5.3.21.jar:5.3.21]\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1452) ~[spring-beans-5.3.21.jar:5.3.21]\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:619) ~[spring-beans-5.3.21.jar:5.3.21]\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.21.jar:5.3.21]\n        at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.21.jar:5.3.21]\n        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.21.jar:5.3.21]\n        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.21.jar:5.3.21]\n        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.21.jar:5.3.21]\n        at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:955) ~[spring-beans-5.3.21.jar:5.3.21]\n        at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918) ~[spring-context-5.3.21.jar:5.3.21]\n        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583) ~[spring-context-5.3.21.jar:5.3.21]\n        at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:401) ~[spring-web-5.3.21.jar:5.3.21]\n        at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:292) ~[spring-web-5.3.21.jar:5.3.21]\n        at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:103) ~[spring-web-5.3.21.jar:5.3.21]\n        at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4206) ~[catalina-6.0.37.jar:6.0.37]\n        at org.apache.catalina.core.StandardContext.start(StandardContext.java:4705) ~[catalina-6.0.37.jar:6.0.37]\n        at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057) ~[catalina-6.0.37.jar:6.0.37]\n        at org.apache.catalina.core.StandardHost.start(StandardHost.java:840) ~[catalina-6.0.37.jar:6.0.37]\n        at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057) ~[catalina-6.0.37.jar:6.0.37]\n        at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:463) ~[catalina-6.0.37.jar:6.0.37]\n        at org.apache.catalina.startup.Embedded.start(Embedded.java:825) ~[catalina-6.0.37.jar:6.0.37]\n        at org.apache.tomcat.maven.plugin.tomcat6.AbstractRunMojo.startContainer(AbstractRunMojo.java:997) ~[tomcat6-maven-plugin-2.2.jar:2.2]\n        at org.apache.tomcat.maven.plugin.tomcat6.AbstractRunMojo.execute(AbstractRunMojo.java:512) ~[tomcat6-maven-plugin-2.2.jar:2.2]\n        at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:137) ~[maven-core-3.8.7.jar:3.8.7]\n        at org.apache.maven.lifecycle.internal.MojoExecutor.doExecute2(MojoExecutor.java:370) ~[maven-core-3.8.7.jar:3.8.7]\n        at org.apache.maven.lifecycle.internal.MojoExecutor.doExecute(MojoExecutor.java:351) ~[maven-core-3.8.7.jar:3.8.7]\n        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:215) ~[maven-core-3.8.7.jar:3.8.7]\n        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:171) ~[maven-core-3.8.7.jar:3.8.7]\n        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:163) ~[maven-core-3.8.7.jar:3.8.7]\n        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:117) ~[maven-core-3.8.7.jar:3.8.7]\n        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:81) ~[maven-core-3.8.7.jar:3.8.7]\n        at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build(SingleThreadedBuilder.java:56) ~[maven-core-3.8.7.jar:3.8.7]\n        at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:128) ~[maven-core-3.8.7.jar:3.8.7]\n        at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:298) ~[maven-core-3.8.7.jar:3.8.7]\n        at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:192) ~[maven-core-3.8.7.jar:3.8.7]\n        at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:105) ~[maven-core-3.8.7.jar:3.8.7]\n        at org.apache.maven.cli.MavenCli.execute(MavenCli.java:960) ~[maven-embedder-3.8.7.jar:3.8.7]\n        at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:293) ~[maven-embedder-3.8.7.jar:3.8.7]\n        at org.apache.maven.cli.MavenCli.main(MavenCli.java:196) ~[maven-embedder-3.8.7.jar:3.8.7]\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:1.8.0_352]\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:1.8.0_352]\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:1.8.0_352]\n        at java.lang.reflect.Method.invoke(Method.java:498) ~[?:1.8.0_352]\n        at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:282) ~[plexus-classworlds-2.6.0.jar:?]\n        at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:225) ~[plexus-classworlds-2.6.0.jar:?]\n        at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:406) ~[plexus-classworlds-2.6.0.jar:?]\n        at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:347) ~[plexus-classworlds-2.6.0.jar:?]\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name '(inner bean)#e5522a5': FactoryBean threw exception on object creation; nested exception is javax.xml.ws.WebServiceException: org.xml.sax.SAXParseException; systemId: http://www.w3.org/2005/05/xmlmime; lineNumber: 1; columnNumber: 1; Premature end of file.\n        at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.doGetObjectFromFactoryBean(FactoryBeanRegistrySupport.java:176) ~[spring-beans-5.3.21.jar:5.3.21]\n        at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.getObjectFromFactoryBean(FactoryBeanRegistrySupport.java:135) ~[spring-beans-5.3.21.jar:5.3.21]\n        at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveInnerBean(BeanDefinitionValueResolver.java:377) ~[spring-beans-5.3.21.jar:5.3.21]\n        ... 48 more\nCaused by: javax.xml.ws.WebServiceException: org.xml.sax.SAXParseException; systemId: http://www.w3.org/2005/05/xmlmime; lineNumber: 1; columnNumber: 1; Premature end of file.\n        at com.sun.xml.ws.server.ServerSchemaValidationTube.&lt;init&gt;(ServerSchemaValidationTube.java:70) ~[jaxws-rt-2.3.5.jar:2.3.5]\n        at com.sun.xml.ws.api.pipe.ServerTubeAssemblerContext.createValidationTube(ServerTubeAssemblerContext.java:187) ~[jaxws-rt-2.3.5.jar:2.3.5]\n        at com.sun.xml.ws.assembler.jaxws.ValidationTubeFactory.createTube(ValidationTubeFactory.java:34) ~[jaxws-rt-2.3.5.jar:2.3.5]\n        at com.sun.xml.ws.assembler.TubeCreator.createTube(TubeCreator.java:67) ~[jaxws-rt-2.3.5.jar:2.3.5]\n        at com.sun.xml.ws.assembler.MetroTubelineAssembler.createServer(MetroTubelineAssembler.java:166) ~[jaxws-rt-2.3.5.jar:2.3.5]\n        at com.sun.xml.ws.server.WSEndpointImpl.&lt;init&gt;(WSEndpointImpl.java:163) ~[jaxws-rt-2.3.5.jar:2.3.5]\n        at com.sun.xml.ws.server.EndpointFactory.create(EndpointFactory.java:307) ~[jaxws-rt-2.3.5.jar:2.3.5]\n        at com.sun.xml.ws.server.EndpointFactory.create(EndpointFactory.java:302) ~[jaxws-rt-2.3.5.jar:2.3.5]\n        at com.sun.xml.ws.server.EndpointFactory.createEndpoint(EndpointFactory.java:134) ~[jaxws-rt-2.3.5.jar:2.3.5]\n        at com.sun.xml.ws.api.server.WSEndpoint.create(WSEndpoint.java:578) ~[jaxws-rt-2.3.5.jar:2.3.5]\n        at com.sun.xml.ws.api.server.WSEndpoint.create(WSEndpoint.java:560) ~[jaxws-rt-2.3.5.jar:2.3.5]\n        at org.jvnet.jax_ws_commons.spring.SpringService.getObject(SpringService.java:368) ~[jaxws-spring-1.9.jar:?]\n        at org.jvnet.jax_ws_commons.spring.SpringService.getObject(SpringService.java:80) ~[jaxws-spring-1.9.jar:?]\n        at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.doGetObjectFromFactoryBean(FactoryBeanRegistrySupport.java:169) ~[spring-beans-5.3.21.jar:5.3.21]\n        at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.getObjectFromFactoryBean(FactoryBeanRegistrySupport.java:135) ~[spring-beans-5.3.21.jar:5.3.21]\n        at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveInnerBean(BeanDefinitionValueResolver.java:377) ~[spring-beans-5.3.21.jar:5.3.21]\n        ... 48 more\nCaused by: org.xml.sax.SAXParseException: Premature end of file.\n        at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.createSAXParseException(ErrorHandlerWrapper.java:204) ~[?:1.8.0_352]\n        at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.fatalError(ErrorHandlerWrapper.java:178) ~[?:1.8.0_352]\n        at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:399) ~[?:1.8.0_352]\n        at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:326) ~[?:1.8.0_352]\n        at com.sun.org.apache.xerces.internal.impl.XMLScanner.reportFatalError(XMLScanner.java:1466) ~[?:1.8.0_352]\n        at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl$PrologDriver.next(XMLDocumentScannerImpl.java:1013) ~[?:1.8.0_352]\n        at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(XMLDocumentScannerImpl.java:601) ~[?:1.8.0_352]\n        at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.next(XMLNSDocumentScannerImpl.java:112) ~[?:1.8.0_352]\n        at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScannerImpl.java:504) ~[?:1.8.0_352]\n        at com.sun.org.apache.xerces.internal.impl.xs.opti.SchemaParsingConfig.parse(SchemaParsingConfig.java:629) ~[?:1.8.0_352]\n        at com.sun.org.apache.xerces.internal.impl.xs.opti.SchemaParsingConfig.parse(SchemaParsingConfig.java:685) ~[?:1.8.0_352]\n        at com.sun.org.apache.xerces.internal.impl.xs.opti.SchemaDOMParser.parse(SchemaDOMParser.java:530) ~[?:1.8.0_352]\n        at com.sun.org.apache.xerces.internal.impl.xs.traversers.XSDHandler.getSchemaDocument(XSDHandler.java:2180) ~[?:1.8.0_352]\n        at com.sun.org.apache.xerces.internal.impl.xs.traversers.XSDHandler.resolveSchema(XSDHandler.java:2083) ~[?:1.8.0_352]\n        at com.sun.org.apache.xerces.internal.impl.xs.traversers.XSDHandler.constructTrees(XSDHandler.java:1013) ~[?:1.8.0_352]\n        at com.sun.org.apache.xerces.internal.impl.xs.traversers.XSDHandler.constructTrees(XSDHandler.java:1125) ~[?:1.8.0_352]\n        at com.sun.org.apache.xerces.internal.impl.xs.traversers.XSDHandler.constructTrees(XSDHandler.java:1125) ~[?:1.8.0_352]\n        at com.sun.org.apache.xerces.internal.impl.xs.traversers.XSDHandler.parseSchema(XSDHandler.java:624) ~[?:1.8.0_352]\n        at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaLoader.loadSchema(XMLSchemaLoader.java:609) ~[?:1.8.0_352]\n        at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaLoader.loadGrammar(XMLSchemaLoader.java:568) ~[?:1.8.0_352]\n        at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaLoader.loadGrammar(XMLSchemaLoader.java:534) ~[?:1.8.0_352]\n        at com.sun.org.apache.xerces.internal.jaxp.validation.XMLSchemaFactory.newSchema(XMLSchemaFactory.java:253) ~[?:1.8.0_352]\n        at com.sun.xml.ws.server.ServerSchemaValidationTube.&lt;init&gt;(ServerSchemaValidationTube.java:68) ~[jaxws-rt-2.3.5.jar:2.3.5]\n        at com.sun.xml.ws.api.pipe.ServerTubeAssemblerContext.createValidationTube(ServerTubeAssemblerContext.java:187) ~[jaxws-rt-2.3.5.jar:2.3.5]\n        at com.sun.xml.ws.assembler.jaxws.ValidationTubeFactory.createTube(ValidationTubeFactory.java:34) ~[jaxws-rt-2.3.5.jar:2.3.5]\n        at com.sun.xml.ws.assembler.TubeCreator.createTube(TubeCreator.java:67) ~[jaxws-rt-2.3.5.jar:2.3.5]\n        at com.sun.xml.ws.assembler.MetroTubelineAssembler.createServer(MetroTubelineAssembler.java:166) ~[jaxws-rt-2.3.5.jar:2.3.5]\n        at com.sun.xml.ws.server.WSEndpointImpl.&lt;init&gt;(WSEndpointImpl.java:163) ~[jaxws-rt-2.3.5.jar:2.3.5]\n        at com.sun.xml.ws.server.EndpointFactory.create(EndpointFactory.java:307) ~[jaxws-rt-2.3.5.jar:2.3.5]\n        at com.sun.xml.ws.server.EndpointFactory.create(EndpointFactory.java:302) ~[jaxws-rt-2.3.5.jar:2.3.5]\n        at com.sun.xml.ws.server.EndpointFactory.createEndpoint(EndpointFactory.java:134) ~[jaxws-rt-2.3.5.jar:2.3.5]\n        at com.sun.xml.ws.api.server.WSEndpoint.create(WSEndpoint.java:578) ~[jaxws-rt-2.3.5.jar:2.3.5]\n        at com.sun.xml.ws.api.server.WSEndpoint.create(WSEndpoint.java:560) ~[jaxws-rt-2.3.5.jar:2.3.5]\n        at org.jvnet.jax_ws_commons.spring.SpringService.getObject(SpringService.java:368) ~[jaxws-spring-1.9.jar:?]\n        at org.jvnet.jax_ws_commons.spring.SpringService.getObject(SpringService.java:80) ~[jaxws-spring-1.9.jar:?]\n        at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.doGetObjectFromFactoryBean(FactoryBeanRegistrySupport.java:169) ~[spring-beans-5.3.21.jar:5.3.21]\n        at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.getObjectFromFactoryBean(FactoryBeanRegistrySupport.java:135) ~[spring-beans-5.3.21.jar:5.3.21]\n        at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveInnerBean(BeanDefinitionValueResolver.java:377) ~[spring-beans-5.3.21.jar:5.3.21]\n        ... 48 more\nJan 26, 2023 3:19:04 PM org.apache.catalina.core.StandardContext listenerStart\nSEVERE: Exception sending context initialized event to listener instance of class org.springframework.web.context.ContextLoaderListener\norg.springframework.beans.factory.BeanCreationException: Error creating bean with name 'com.sun.xml.ws.transport.http.servlet.SpringBinding#1' defined in class path resource [applicationContext.xml]: Cannot create inner bean '(inner bean)#e5522a5' of type [org.jvnet.jax_ws_commons.spring.SpringService] while setting bean property 'service'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name '(inner bean)#e5522a5': FactoryBean threw exception on object creation; nested exception is javax.xml.ws.WebServiceException: org.xml.sax.SAXParseException; systemId: http://www.w3.org/2005/05/xmlmime; lineNumber: 1; columnNumber: 1; Premature end of file.\n        at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveInnerBean(BeanDefinitionValueResolver.java:389)\n        at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:134)\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1707)\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1452)\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:619)\n        at org.springframework.beans.factory.support.Abstract\nAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542)\n        at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335)\n        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\n        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)\n        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)\n        at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:955)\n        at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918)\n        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583)\n        at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:401)\n        at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:292)\n        at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:103)\n        at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4206)\n        at org.apache.catalina.core.StandardContext.start(StandardContext.java:4705)\n        at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057)\n        at org.apache.catalina.core.StandardHost.start(StandardHost.java:840)\n        at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057)\n        at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:463)\n        at org.apache.catalina.startup.Embedded.start(Embedded.java:825)\n        at org.apache.tomcat.maven.plugin.tomcat6.AbstractRunMojo.startContainer(AbstractRunMojo.java:997)\n        at org.apache.tomcat.maven.plugin.tomcat6.AbstractRunMojo.execute(AbstractRunMojo.java:512)\n        at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:137)\n        at org.apache.maven.lifecycle.internal.MojoExecutor.doExecute2(MojoExecutor.java:370)\n        at org.apache.maven.lifecycle.internal.MojoExecutor.doExecute(MojoExecutor.java:351)\n        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:215)\n        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:171)\n        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:163)\n        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:117)\n        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:81)\n        at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build(SingleThreadedBuilder.java:56)\n        at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:128)\n        at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:298)\n        at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:192)\n        at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:105)\n        at org.apache.maven.cli.MavenCli.execute(MavenCli.java:960)\n        at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:293)\n        at org.apache.maven.cli.MavenCli.main(MavenCli.java:196)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n        at java.lang.reflect.Method.invoke(Method.java:498)\n\n        at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:282)\n        at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:225)\n        at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:406)\n        at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:347)\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name '(inner bean)#e5522a5': FactoryBean threw exception on object creation; nested exception is javax.xml.ws.WebServiceException: org.xml.sax.SAXParseException; systemId: http://www.w3.org/2005/05/xmlmime; lineNumber: 1; columnNumber: 1; Premature end of file.\n        at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.doGetObjectFromFactoryBean(FactoryBeanRegistrySupport.java:176)\n        at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.getObjectFromFactoryBean(FactoryBeanRegistrySupport.java:135)\n        at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveInnerBean(BeanDefinitionValueResolver.java:377)\n        ... 48 more\nCaused by: javax.xml.ws.WebServiceException: org.xml.sax.SAXParseException; systemId: http://www.w3.org/2005/05/xmlmime; lineNumber: 1; columnNumber: 1; Premature end of file.\n        at com.sun.xml.ws.server.ServerSchemaValidationTube.&lt;init&gt;(ServerSchemaValidationTube.java:70)\n        at com.sun.xml.ws.api.pipe.ServerTubeAssemblerContext.createValidationTube(ServerTubeAssemblerContext.java:187)\n        at com.sun.xml.ws.assembler.jaxws.ValidationTubeFactory.createTube(ValidationTubeFactory.java:34)\n        at com.sun.xml.ws.assembler.TubeCreator.createTube(TubeCreator.java:67)\n        at com.sun.xml.ws.assembler.MetroTubelineAssembler.createServer(MetroTubelineAssembler.java:166)\n        at com.sun.xml.ws.server.WSEndpointImpl.&lt;init&gt;(WSEndpointImpl.java:163)\n        at com.sun.xml.ws.server.EndpointFactory.create(EndpointFactory.java:307)\n        at com.sun.xml.ws.server.EndpointFactory.create(EndpointFactory.java:302)\n        at com.sun.xml.ws.server.EndpointFactory.createEndpoint(EndpointFactory.java:134)\n        at com.sun.xml.ws.api.server.WSEndpoint.create(WSEndpoint.java:578)\n        at com.sun.xml.ws.api.server.WSEndpoint.create(WSEndpoint.java:560)\n        at org.jvnet.jax_ws_commons.spring.SpringService.getObject(SpringService.java:368)\n        at org.jvnet.jax_ws_commons.spring.SpringService.getObject(SpringService.java:80)\n        at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.doGetObjectFromFactoryBean(FactoryBeanRegistrySupport.java:169)\n        ... 50 more\nCaused by: org.xml.sax.SAXParseException; systemId: http://www.w3.org/2005/05/xmlmime; lineNumber: 1; columnNumber: 1; Premature end of file.\n        at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.createSAXParseException(ErrorHandlerWrapper.java:204)\n        at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.fatalError(ErrorHandlerWrapper.java:178)\n        at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:399)\n        at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:326)\n        at com.sun.org.apache.xerces.internal.impl.XMLScanner.reportFatalError(XMLScanner.java:1466)\n        at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl$PrologDriver.next(XMLDocumentScannerImpl.java:1013)\n        at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(XMLDocumentScannerImpl.java:601)\n        at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.next(XMLNSDocumentScannerImpl.java:112)\n        at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScannerImpl.java:504)\n        at com.sun.org.apache.xerces.internal.impl.xs.opti.SchemaParsingConfig.parse(SchemaParsingConfig.java:629)\n        at com.sun.org.apache.xerces.internal.impl.xs.opti.SchemaParsingConfig.parse(SchemaParsingConfig.java:685)\n        at com.sun.org.apache.xerces.internal.impl.xs.opti.SchemaDOMParser.parse(SchemaDOMParser.java:530)\n        at com.sun.org.apache.xerces.internal.impl.xs.traversers.XSDHandler.getSchemaDocument(XSDHandler.java:2180)\n        at com.sun.org.apache.xerces.internal.impl.xs.traversers.XSDHandler.resolveSchema(XSDHandler.java:2083)\n        at com.sun.org.apache.xerces.internal.impl.xs.traversers.XSDHandler.constructTrees(XSDHandler.java:1013)\n        at com.sun.org.apache.xerces.internal.impl.xs.traversers.XSDHandler.constructTrees(XSDHandler.java:1125)\n        at com.sun.org.apache.xerces.internal.impl.xs.traversers.XSDHandler.constructTrees(XSDHandler.java:1125)\n        at com.sun.org.apache.xerces.internal.impl.xs.traversers.XSDHandler.parseSchema(XSDHandler.java:624)\n        at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaLoader.loadSchema(XMLSchemaLoader.java:609)\n        at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaLoader.loadGrammar(XMLSchemaLoader.java:568)\n        at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaLoader.loadGrammar(XMLSchemaLoader.java:534)\n        at com.sun.org.apache.xerces.internal.jaxp.validation.XMLSchemaFactory.newSchema(XMLSchemaFactory.java:253)\n        at com.sun.xml.ws.server.ServerSchemaValidationTube.&lt;init&gt;(ServerSchemaValidationTube.java:68)\n        ... 63 more\n\nJan 26, 2023 3:19:04 PM org.apache.catalina.core.StandardContext start\nSEVERE: Error listenerStart\n</code></pre>\n<p>Issues started around middle of January 2023 when tried to restart the server.</p>\n<p>Seems that issue is caused by the redirect (HTTP 302) from HTTP to HTTPS and application cannot process it.\nSo probably related to HTTPS redirect (newly done) by w3c.org. More details in:</p>\n<ul>\n<li><a href=\"https://www.w3.org/blog/2022/07/redirecting-to-https-on-www-w3-org/\" rel=\"nofollow noreferrer\">https://www.w3.org/blog/2022/07/redirecting-to-https-on-www-w3-org/</a></li>\n<li><a href=\"https://www.w3.org/blog/2022/08/https-redirection-observations/\" rel=\"nofollow noreferrer\">https://www.w3.org/blog/2022/08/https-redirection-observations/</a></li>\n</ul>\n<p>Related to the fact that app is using <code>@SchemaValidation</code> (com.sun.xml.ws.developer) and in the WSDL we have element with <code>type=&quot;xs:base64Binary&quot; xmime:expectedContentTypes=&quot;application/octet-stream&quot; xmlns:xmime=&quot;http://www.w3.org/2005/05/xmlmime&quot;</code> (due to the MTOM)</p>\n<p>Application is using:</p>\n<ul>\n<li>openjdk version &quot;1.8.0_362&quot; (Temurin)</li>\n<li>Apache Tomcat 8.5.78</li>\n<li>jaxws-ri 2.3.5</li>\n</ul>\n<p>We were trying to use different JDK to try if there could be difference in SAX parser. But no luck.</p>\n<p>Is there please a way how to resolve it? (questions next to linked w3c.org articles remains not answered)</p>\n"},{"tags":["java","android","arraylist"],"comments":[{"owner":{"account_id":4832345,"reputation":405,"user_id":3900210,"accept_rate":71,"display_name":"Sagar"},"score":0,"creation_date":1679485443,"post_id":75811690,"comment_id":133729527,"body_markdown":"you can convert it to a serializeable object and then pass it along.","body":"you can convert it to a serializeable object and then pass it along."},{"owner":{"account_id":27973898,"reputation":23,"user_id":21363112,"display_name":"louisMay"},"score":0,"creation_date":1679485678,"post_id":75811690,"comment_id":133729588,"body_markdown":"And how is that? Sorry, but I don&#180;t know a lot about java","body":"And how is that? Sorry, but I don&#180;t know a lot about java"},{"owner":{"account_id":4832345,"reputation":405,"user_id":3900210,"accept_rate":71,"display_name":"Sagar"},"score":0,"creation_date":1679485870,"post_id":75811690,"comment_id":133729633,"body_markdown":"maybe this can help. https://stackoverflow.com/a/39252048/3900210","body":"maybe this can help. <a href=\"https://stackoverflow.com/a/39252048/3900210\">stackoverflow.com/a/39252048/3900210</a>"}],"answers":[{"tags":[],"owner":{"account_id":1301014,"reputation":8110,"user_id":1250929,"accept_rate":72,"display_name":"Kristy Welsh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1679489378,"creation_date":1679489378,"answer_id":75812482,"question_id":75811690,"body_markdown":"You can convert your arrayList of arrayLists into jason, then pass the string to the other activity.  Then in the activity, decode the json into your object.  Check out the [Gson library from google][1].  \r\n\r\n\r\n  [1]: https://github.com/google/gson","title":"Is it possible to send an arrayList of arrayLists from one activity to another in android?","body":"<p>You can convert your arrayList of arrayLists into jason, then pass the string to the other activity.  Then in the activity, decode the json into your object.  Check out the <a href=\"https://github.com/google/gson\" rel=\"nofollow noreferrer\">Gson library from google</a>.</p>\n"}],"owner":{"account_id":27973898,"reputation":23,"user_id":21363112,"display_name":"louisMay"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":34,"favorite_count":0,"down_vote_count":2,"up_vote_count":2,"accepted_answer_id":75812482,"answer_count":1,"score":0,"last_activity_date":1679489378,"creation_date":1679484607,"question_id":75811690,"body_markdown":"I have this arrayList: `public ArrayList&lt;ArrayList&lt;String&gt;&gt; ejemplo=new ArrayList&lt;&gt;();` and I&#180;d like to send it to another activity in my project but I don&#180;t know how. \r\nI have read that there is: `intent.putStringArrayListExtra();` but it is to send an arrayList and in my case if I use that it says that it&#180;s expecting an `arrayList&lt;String&gt;` and I&#180;m providing an \r\n`ArrayList&lt;ArrayList&lt;String&gt;&gt;`.\r\nAny idea? Thank you.","title":"Is it possible to send an arrayList of arrayLists from one activity to another in android?","body":"<p>I have this arrayList: <code>public ArrayList&lt;ArrayList&lt;String&gt;&gt; ejemplo=new ArrayList&lt;&gt;();</code> and I´d like to send it to another activity in my project but I don´t know how.\nI have read that there is: <code>intent.putStringArrayListExtra();</code> but it is to send an arrayList and in my case if I use that it says that it´s expecting an <code>arrayList&lt;String&gt;</code> and I´m providing an\n<code>ArrayList&lt;ArrayList&lt;String&gt;&gt;</code>.\nAny idea? Thank you.</p>\n"},{"tags":["java","spring-boot","spring-data-jpa","swagger","swagger-ui"],"owner":{"account_id":22491324,"reputation":1,"user_id":16689005,"display_name":"Arij"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":137,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679489276,"creation_date":1679488473,"question_id":75812327,"body_markdown":"hello guys i integrated swagger to test apis, but i don&#39;t get all my apis in swagger-ui.html  , there is 3 apis not showing in swagger noting that i added @Tag annotations &amp; i use springdoc open api. \r\nthe configuration in the main package is working because the other apis  show normally  in swagger , whats the problem?\r\n\r\n\r\n\r\nhere is my api that doesn&#39;t work : \r\n```\r\npackage com.arij.gestiondestagiaire.controller.api;\r\n\r\nimport com.arij.gestiondestagiaire.DTO.ServiceRecrutementDTO;\r\n\r\nimport io.swagger.v3.oas.annotations.tags.Tag;\r\nimport org.springframework.http.MediaType;\r\nimport org.springframework.web.bind.annotation.*;\r\n\r\nimport java.util.List;\r\n\r\nimport static com.arij.gestiondestagiaire.utils.Constants.APP_ROOT;\r\n@Tag(name=APP_ROOT+&quot;/service&quot;)\r\npublic interface serviceRecrutementApi {\r\n    @PostMapping(value =APP_ROOT+ &quot;/service/create&quot;, consumes = MediaType.APPLICATION_JSON_VALUE, produces= MediaType.APPLICATION_JSON_VALUE)\r\n    ServiceRecrutementDTO save(@RequestBody ServiceRecrutementDTO service);\r\n    @GetMapping(value=APP_ROOT+&quot;/service/{serviceId}&quot; ,produces= MediaType.APPLICATION_JSON_VALUE)\r\n    ServiceRecrutementDTO findById(@PathVariable(&quot;serviceId&quot;) Long id);\r\n    @GetMapping(value=APP_ROOT+&quot;/service/nom/{nom}&quot;,produces= MediaType.APPLICATION_JSON_VALUE)\r\n    ServiceRecrutementDTO findByNom(@PathVariable(&quot;nom&quot;) String nom);\r\n\r\n    @GetMapping(value=APP_ROOT+&quot;/service/all&quot;,produces= MediaType.APPLICATION_JSON_VALUE)\r\n    List&lt;ServiceRecrutementDTO&gt; findAll();\r\n    @DeleteMapping(value=APP_ROOT+&quot;/service/delete/{serviceId}&quot;,produces= MediaType.APPLICATION_JSON_VALUE)\r\n    void delete(@PathVariable(&quot;serviceId&quot;) Long id);\r\n}\r\n\r\n```\r\nand here is swagger configuration \r\n\r\n```\r\npackage com.arij.gestiondestagiaire.config;\r\n\r\nimport com.arij.gestiondestagiaire.utils.Constants;\r\nimport org.springdoc.core.models.GroupedOpenApi;\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.context.annotation.Configuration;\r\n\r\n\r\nimport io.swagger.v3.oas.annotations.OpenAPIDefinition;\r\nimport io.swagger.v3.oas.annotations.info.Info;\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.context.annotation.Configuration;\r\nimport org.springframework.web.servlet.config.annotation.EnableWebMvc;\r\n\r\n\r\nimport static com.arij.gestiondestagiaire.utils.Constants.APP_ROOT;\r\n\r\n@Configuration\r\n@EnableWebMvc\r\n@OpenAPIDefinition(info = @Info(title = &quot;Gestion de Stagiaire&quot;, description = &quot;Gestion de Stagiaire API documentation&quot;, version = &quot;1.0&quot;))\r\npublic class swaggerConfig {\r\n\r\n\r\n\r\n    @Bean\r\n    public GroupedOpenApi api() {\r\n        return GroupedOpenApi.builder()\r\n                .group(&quot;REST API&quot;)\r\n                .pathsToMatch(&quot;/&quot; + Constants.APP_ROOT + &quot;/**&quot;)\r\n                .packagesToScan(&quot;com.arij.gestiondestagiaire&quot;)\r\n                .build();\r\n    }\r\n}\r\n```\r\n","title":"some apis don&#39;t show in swagger","body":"<p>hello guys i integrated swagger to test apis, but i don't get all my apis in swagger-ui.html  , there is 3 apis not showing in swagger noting that i added @Tag annotations &amp; i use springdoc open api.\nthe configuration in the main package is working because the other apis  show normally  in swagger , whats the problem?</p>\n<p>here is my api that doesn't work :</p>\n<pre><code>package com.arij.gestiondestagiaire.controller.api;\n\nimport com.arij.gestiondestagiaire.DTO.ServiceRecrutementDTO;\n\nimport io.swagger.v3.oas.annotations.tags.Tag;\nimport org.springframework.http.MediaType;\nimport org.springframework.web.bind.annotation.*;\n\nimport java.util.List;\n\nimport static com.arij.gestiondestagiaire.utils.Constants.APP_ROOT;\n@Tag(name=APP_ROOT+&quot;/service&quot;)\npublic interface serviceRecrutementApi {\n    @PostMapping(value =APP_ROOT+ &quot;/service/create&quot;, consumes = MediaType.APPLICATION_JSON_VALUE, produces= MediaType.APPLICATION_JSON_VALUE)\n    ServiceRecrutementDTO save(@RequestBody ServiceRecrutementDTO service);\n    @GetMapping(value=APP_ROOT+&quot;/service/{serviceId}&quot; ,produces= MediaType.APPLICATION_JSON_VALUE)\n    ServiceRecrutementDTO findById(@PathVariable(&quot;serviceId&quot;) Long id);\n    @GetMapping(value=APP_ROOT+&quot;/service/nom/{nom}&quot;,produces= MediaType.APPLICATION_JSON_VALUE)\n    ServiceRecrutementDTO findByNom(@PathVariable(&quot;nom&quot;) String nom);\n\n    @GetMapping(value=APP_ROOT+&quot;/service/all&quot;,produces= MediaType.APPLICATION_JSON_VALUE)\n    List&lt;ServiceRecrutementDTO&gt; findAll();\n    @DeleteMapping(value=APP_ROOT+&quot;/service/delete/{serviceId}&quot;,produces= MediaType.APPLICATION_JSON_VALUE)\n    void delete(@PathVariable(&quot;serviceId&quot;) Long id);\n}\n\n</code></pre>\n<p>and here is swagger configuration</p>\n<pre><code>package com.arij.gestiondestagiaire.config;\n\nimport com.arij.gestiondestagiaire.utils.Constants;\nimport org.springdoc.core.models.GroupedOpenApi;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\n\n\nimport io.swagger.v3.oas.annotations.OpenAPIDefinition;\nimport io.swagger.v3.oas.annotations.info.Info;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.web.servlet.config.annotation.EnableWebMvc;\n\n\nimport static com.arij.gestiondestagiaire.utils.Constants.APP_ROOT;\n\n@Configuration\n@EnableWebMvc\n@OpenAPIDefinition(info = @Info(title = &quot;Gestion de Stagiaire&quot;, description = &quot;Gestion de Stagiaire API documentation&quot;, version = &quot;1.0&quot;))\npublic class swaggerConfig {\n\n\n\n    @Bean\n    public GroupedOpenApi api() {\n        return GroupedOpenApi.builder()\n                .group(&quot;REST API&quot;)\n                .pathsToMatch(&quot;/&quot; + Constants.APP_ROOT + &quot;/**&quot;)\n                .packagesToScan(&quot;com.arij.gestiondestagiaire&quot;)\n                .build();\n    }\n}\n</code></pre>\n"},{"tags":["java","android","firebase"],"answers":[{"tags":[],"owner":{"account_id":20640830,"reputation":128,"user_id":15153537,"display_name":"Prabhav Sharma"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1620549824,"creation_date":1620549125,"answer_id":67455718,"question_id":67455228,"body_markdown":"You need to add the firebase dependencies, and create a project in your firebase console. Then add the .json file to the project following the instructions when you add the project to firebase console, refer the documentation\r\n\r\nhttps://firebase.google.com/docs/android/setup\r\n\r\nStep by step guide:\r\nOpen the project level gradle file add google service dependency \r\n\r\n    classpath &#39;com.google.gms:google-services:4.3.5&#39;\r\n\r\n\r\nThen in the module level gradle file add, google plugin, firebase BOM dependency and dependency for realtime database, \r\n\r\n        plugins {\r\n        id &#39;com.google.gms.google-services&#39;\r\n    }\r\n    dependencies {\r\n      implementation &#39;com.google.firebase:firebase-database&#39;\r\n        implementation &#39;com.google.firebase:firebase-analytics&#39;\r\n        implementation platform(&#39;com.google.firebase:firebase-bom:26.5.0&#39;)\r\n    }\r\n\r\nCreate a project in your firebase console and download the google-services.json file and add it to the app folder in your android project\r\n\r\nGradle sync the project and it will connect to the Realtime database. \r\n\r\n\r\nNote: For the SHA-1 signing certificate required while adding project to firebase console, look for Gradle on the right side menu, \r\nApp name&gt; Tasks&gt; Android&gt; signingReport, and copy the SHA-1 id\r\n\r\n \r\n\r\n\r\n\r\n","title":"Cannot connect to firebase gradle build issues Android Studio","body":"<p>You need to add the firebase dependencies, and create a project in your firebase console. Then add the .json file to the project following the instructions when you add the project to firebase console, refer the documentation</p>\n<p><a href=\"https://firebase.google.com/docs/android/setup\" rel=\"nofollow noreferrer\">https://firebase.google.com/docs/android/setup</a></p>\n<p>Step by step guide:\nOpen the project level gradle file add google service dependency</p>\n<pre><code>classpath 'com.google.gms:google-services:4.3.5'\n</code></pre>\n<p>Then in the module level gradle file add, google plugin, firebase BOM dependency and dependency for realtime database,</p>\n<pre><code>    plugins {\n    id 'com.google.gms.google-services'\n}\ndependencies {\n  implementation 'com.google.firebase:firebase-database'\n    implementation 'com.google.firebase:firebase-analytics'\n    implementation platform('com.google.firebase:firebase-bom:26.5.0')\n}\n</code></pre>\n<p>Create a project in your firebase console and download the google-services.json file and add it to the app folder in your android project</p>\n<p>Gradle sync the project and it will connect to the Realtime database.</p>\n<p>Note: For the SHA-1 signing certificate required while adding project to firebase console, look for Gradle on the right side menu,\nApp name&gt; Tasks&gt; Android&gt; signingReport, and copy the SHA-1 id</p>\n"},{"tags":[],"owner":{"account_id":18724988,"reputation":519,"user_id":13651898,"display_name":"Supun Ayeshmantha"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679489174,"creation_date":1679489174,"answer_id":75812438,"question_id":67455228,"body_markdown":"If you are using a older gradle version and there might be a chance of getting this error because of the SDK version 33 unstable with gradle verison 7.2.1.\r\n \r\nIf you update gradle verison , you may need to update the Android studio as well. As a temperary fix you can add the following in **gradle.properties**\r\n\r\n    android.suppressUnsupportedCompileSdk=33","title":"Cannot connect to firebase gradle build issues Android Studio","body":"<p>If you are using a older gradle version and there might be a chance of getting this error because of the SDK version 33 unstable with gradle verison 7.2.1.</p>\n<p>If you update gradle verison , you may need to update the Android studio as well. As a temperary fix you can add the following in <strong>gradle.properties</strong></p>\n<pre><code>android.suppressUnsupportedCompileSdk=33\n</code></pre>\n"}],"owner":{"account_id":20339927,"reputation":95,"user_id":14919528,"display_name":"Parvanshu Sharma"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1684,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"accepted_answer_id":67455718,"answer_count":2,"score":1,"last_activity_date":1679489174,"creation_date":1620544941,"question_id":67455228,"body_markdown":"I am a kid developer and new to programming, i was connecting one of my android app to firebase realtime database using Firebase assistant in android studio, when i clicked on **Connect to Firebase**, i got and error message as ```Could not parse the Android Application Module&#39;s Gradle config. Resolve gradle build issues and/or resync.```\r\n\r\nI saw many posts on google but cannot find my answer, please help me out!\r\n\r\nHere is my app/build.gradle.-\r\n\r\n```\r\nplugins {\r\n    id &#39;com.android.application&#39;\r\n}\r\n\r\nandroid {\r\n    compileSdkVersion 30\r\n    buildToolsVersion &quot;30.0.3&quot;\r\n\r\n    defaultConfig {\r\n        applicationId &quot;com.example.compassfoodlife&quot;\r\n        minSdkVersion 16\r\n        targetSdkVersion 30\r\n        versionCode 1\r\n        versionName &quot;1.0&quot;\r\n\r\n        testInstrumentationRunner &quot;androidx.test.runner.AndroidJUnitRunner&quot;\r\n    }\r\n\r\n    buildTypes {\r\n        release {\r\n            minifyEnabled false\r\n            proguardFiles getDefaultProguardFile(&#39;proguard-android-optimize.txt&#39;), &#39;proguard-rules.pro&#39;\r\n        }\r\n    }\r\n    compileOptions {\r\n        sourceCompatibility JavaVersion.VERSION_1_8\r\n        targetCompatibility JavaVersion.VERSION_1_8\r\n    }\r\n}\r\n\r\ndependencies {\r\n\r\n    implementation &#39;androidx.appcompat:appcompat:1.2.0&#39;\r\n    implementation &#39;com.google.android.material:material:1.3.0&#39;\r\n    implementation &#39;androidx.constraintlayout:constraintlayout:2.0.4&#39;\r\n    testImplementation &#39;junit:junit:4.+&#39;\r\n    androidTestImplementation &#39;androidx.test.ext:junit:1.1.2&#39;\r\n    androidTestImplementation &#39;androidx.test.espresso:espresso-core:3.3.0&#39;\r\n}\r\n```\r\n\r\nAnd here comes my build.gradle file code\r\n\r\n```\r\n// Top-level build file where you can add configuration options common to all sub-projects/modules.\r\nbuildscript {\r\n    repositories {\r\n        google()\r\n        mavenCentral()\r\n    }\r\n    dependencies {\r\n        classpath &quot;com.android.tools.build:gradle:4.2.0&quot;\r\n\r\n        // NOTE: Do not place your application dependencies here; they belong\r\n        // in the individual module build.gradle files\r\n    }\r\n}\r\n\r\nallprojects {\r\n    repositories {\r\n        google()\r\n        mavenCentral()\r\n        jcenter() // Warning: this repository is going to shut down soon\r\n    }\r\n}\r\n\r\ntask clean(type: Delete) {\r\n    delete rootProject.buildDir\r\n}\r\n```\r\nIt is showing this, see the image \r\n[here][1]\r\n.\r\n\r\n  [1]: https://i.stack.imgur.com/cNJgY.png","title":"Cannot connect to firebase gradle build issues Android Studio","body":"<p>I am a kid developer and new to programming, i was connecting one of my android app to firebase realtime database using Firebase assistant in android studio, when i clicked on <strong>Connect to Firebase</strong>, i got and error message as <code>Could not parse the Android Application Module's Gradle config. Resolve gradle build issues and/or resync.</code></p>\n<p>I saw many posts on google but cannot find my answer, please help me out!</p>\n<p>Here is my app/build.gradle.-</p>\n<pre><code>plugins {\n    id 'com.android.application'\n}\n\nandroid {\n    compileSdkVersion 30\n    buildToolsVersion &quot;30.0.3&quot;\n\n    defaultConfig {\n        applicationId &quot;com.example.compassfoodlife&quot;\n        minSdkVersion 16\n        targetSdkVersion 30\n        versionCode 1\n        versionName &quot;1.0&quot;\n\n        testInstrumentationRunner &quot;androidx.test.runner.AndroidJUnitRunner&quot;\n    }\n\n    buildTypes {\n        release {\n            minifyEnabled false\n            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'\n        }\n    }\n    compileOptions {\n        sourceCompatibility JavaVersion.VERSION_1_8\n        targetCompatibility JavaVersion.VERSION_1_8\n    }\n}\n\ndependencies {\n\n    implementation 'androidx.appcompat:appcompat:1.2.0'\n    implementation 'com.google.android.material:material:1.3.0'\n    implementation 'androidx.constraintlayout:constraintlayout:2.0.4'\n    testImplementation 'junit:junit:4.+'\n    androidTestImplementation 'androidx.test.ext:junit:1.1.2'\n    androidTestImplementation 'androidx.test.espresso:espresso-core:3.3.0'\n}\n</code></pre>\n<p>And here comes my build.gradle file code</p>\n<pre><code>// Top-level build file where you can add configuration options common to all sub-projects/modules.\nbuildscript {\n    repositories {\n        google()\n        mavenCentral()\n    }\n    dependencies {\n        classpath &quot;com.android.tools.build:gradle:4.2.0&quot;\n\n        // NOTE: Do not place your application dependencies here; they belong\n        // in the individual module build.gradle files\n    }\n}\n\nallprojects {\n    repositories {\n        google()\n        mavenCentral()\n        jcenter() // Warning: this repository is going to shut down soon\n    }\n}\n\ntask clean(type: Delete) {\n    delete rootProject.buildDir\n}\n</code></pre>\n<p>It is showing this, see the image\n<a href=\"https://i.stack.imgur.com/cNJgY.png\" rel=\"nofollow noreferrer\">here</a>\n.</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":2274915,"reputation":1871,"user_id":2001453,"display_name":"Mario Norato"},"score":0,"creation_date":1415744423,"post_id":26875635,"comment_id":42308976,"body_markdown":"See the following SO answer... [Hope this can be of help][1]\r\n\r\n\r\n  [1]: http://stackoverflow.com/questions/12678949/android-set-layout-background-programmatically","body":"See the following SO answer... [Hope this can be of help][1]        [1]: <a href=\"http://stackoverflow.com/questions/12678949/android-set-layout-background-programmatically\" title=\"android set layout background programmatically\">stackoverflow.com/questions/12678949/&hellip;</a>"},{"owner":{"account_id":1405205,"reputation":7819,"user_id":1333114,"accept_rate":87,"display_name":"James Cross"},"score":0,"creation_date":1415744450,"post_id":26875635,"comment_id":42308994,"body_markdown":"Stick a debug point in the onCheckedChanged() listener and when it is hit see if all the RadioButton objects are set properly.","body":"Stick a debug point in the onCheckedChanged() listener and when it is hit see if all the RadioButton objects are set properly."},{"owner":{"account_id":361730,"reputation":24051,"user_id":704513,"accept_rate":96,"display_name":"Houcine"},"score":0,"creation_date":1415745425,"post_id":26875635,"comment_id":42309422,"body_markdown":"what is in the line 43 of your ThemeActivity ?","body":"what is in the line 43 of your ThemeActivity ?"},{"owner":{"account_id":4442161,"reputation":772,"user_id":3616467,"accept_rate":83,"display_name":"Robert"},"score":0,"creation_date":1415745717,"post_id":26875635,"comment_id":42309540,"body_markdown":"@Houcine: in the line 43 is: relativeLayout.setBackgroundResource(R.drawable.mountains);","body":"@Houcine: in the line 43 is: relativeLayout.setBackgroundResource(R.drawable.mountains);"},{"owner":{"account_id":361730,"reputation":24051,"user_id":704513,"accept_rate":96,"display_name":"Houcine"},"score":0,"creation_date":1415745828,"post_id":26875635,"comment_id":42309582,"body_markdown":"the relativeLayout variable is null. because you have a NullPointerException. check if the relativeLayout is different from null and display logs, or try to debug it. and before doing this, clean your project.","body":"the relativeLayout variable is null. because you have a NullPointerException. check if the relativeLayout is different from null and display logs, or try to debug it. and before doing this, clean your project."},{"owner":{"account_id":4442161,"reputation":772,"user_id":3616467,"accept_rate":83,"display_name":"Robert"},"score":0,"creation_date":1415750439,"post_id":26875635,"comment_id":42311013,"body_markdown":"@Houcine: thanks for your advice, i&#39;ll try this and let you know. Just now i checked the relativeLayout variable. You&#39;re right, it&#39;s null. Have you got any idea why? I&#39;ve got a &quot;relativeLayout=(RelativeLayout) findViewById(R.id.relativeLayoutid);&quot; so this variable shouldn&#39;t be null.","body":"@Houcine: thanks for your advice, i&#39;ll try this and let you know. Just now i checked the relativeLayout variable. You&#39;re right, it&#39;s null. Have you got any idea why? I&#39;ve got a &quot;relativeLayout=(RelativeLayout) findViewById(R.id.relativeLayoutid);&quot; so this variable shouldn&#39;t be null."},{"owner":{"account_id":361730,"reputation":24051,"user_id":704513,"accept_rate":96,"display_name":"Houcine"},"score":0,"creation_date":1415789711,"post_id":26875635,"comment_id":42325326,"body_markdown":"the reason of this nullpointerException could be a wrong id of your RelativeLayout , or your view that you try to find by its id is in another layout different from the one you set as a contentView of your Activity. \nthe second reason is calling findViewById() before setContentView(int layoutResId). Try to modify the Id of your relativeLayout and if it exists on your layout xml file .Then clean your project.","body":"the reason of this nullpointerException could be a wrong id of your RelativeLayout , or your view that you try to find by its id is in another layout different from the one you set as a contentView of your Activity.  the second reason is calling findViewById() before setContentView(int layoutResId). Try to modify the Id of your relativeLayout and if it exists on your layout xml file .Then clean your project."},{"owner":{"account_id":4442161,"reputation":772,"user_id":3616467,"accept_rate":83,"display_name":"Robert"},"score":0,"creation_date":1415972975,"post_id":26875635,"comment_id":42407962,"body_markdown":"@Houcine: thanks for your help. It works! I&#39;ve added relativeLayout=(RelativeLayout) findViewById(R.id.relativeLayoutid) and setBackgroundResource() method in my main activity instead of my theme activity. I&#39;ve moved these things behind setContentView() method. Finally I&#39;ve created a static variable which is placed as the setBackgroundResource() method parameter and i change this static variable in my theme activity where I&#39;ve got radio buttons. I&#39;ve edited my main post and i&#39;ve put there a solution.","body":"@Houcine: thanks for your help. It works! I&#39;ve added relativeLayout=(RelativeLayout) findViewById(R.id.relativeLayoutid) and setBackgroundResource() method in my main activity instead of my theme activity. I&#39;ve moved these things behind setContentView() method. Finally I&#39;ve created a static variable which is placed as the setBackgroundResource() method parameter and i change this static variable in my theme activity where I&#39;ve got radio buttons. I&#39;ve edited my main post and i&#39;ve put there a solution."},{"owner":{"account_id":361730,"reputation":24051,"user_id":704513,"accept_rate":96,"display_name":"Houcine"},"score":0,"creation_date":1416004746,"post_id":26875635,"comment_id":42424141,"body_markdown":"@Maniek : you&#39;re welcome, glad that it works for you.","body":"@Maniek : you&#39;re welcome, glad that it works for you."}],"answers":[{"tags":[],"owner":{"account_id":431636,"reputation":4711,"user_id":815837,"accept_rate":62,"display_name":"Martin"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1415745741,"creation_date":1415745741,"answer_id":26875997,"question_id":26875635,"body_markdown":"I used this code for a shopping cart//catalog app.  The radiobuttons were used to hold the product color information, so a user selecting a color, represented by a radiobutton with a different color background, determined the product color of the image.\r\n\r\n     color[i] = new RadioButton(getActivity());\r\n\t color[i].setButtonDrawable(R.drawable.color_radio_button);\r\n\t if (sdkVersion &lt; 16) {\r\n\t\tcolor[i].setBackgroundDrawable(bkg);\r\n\t } else {\r\n\t\tcolor[i].setBackground(bkg);\r\n\t }\r\n\r\n\r\n---------\r\nDrawable\r\n---------\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;selector xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;\r\n\r\n    &lt;item android:drawable=&quot;@drawable/color_radio_selected&quot; android:state_focused=&quot;true&quot;/&gt;\r\n    &lt;item android:drawable=&quot;@drawable/color_radio_selected&quot; android:state_pressed=&quot;true&quot;/&gt;\r\n    &lt;item android:drawable=&quot;@drawable/color_radio_selected&quot; android:state_selected=&quot;true&quot;/&gt;\r\n    &lt;item android:drawable=&quot;@drawable/color_radio_selected&quot; android:state_checked=&quot;true&quot;/&gt;\r\n    &lt;item android:drawable=&quot;@drawable/color_radio_unselected&quot;/&gt;\r\n\r\n    &lt;/selector&gt;\r\n\r\n-----------\r\nImage\r\n-----------\r\n![enter image description here][1]\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/M6RpP.png","title":"How to set the background image programmatically?","body":"<p>I used this code for a shopping cart//catalog app.  The radiobuttons were used to hold the product color information, so a user selecting a color, represented by a radiobutton with a different color background, determined the product color of the image.</p>\n\n<pre><code> color[i] = new RadioButton(getActivity());\n color[i].setButtonDrawable(R.drawable.color_radio_button);\n if (sdkVersion &lt; 16) {\n    color[i].setBackgroundDrawable(bkg);\n } else {\n    color[i].setBackground(bkg);\n }\n</code></pre>\n\n<hr>\n\n<h2>Drawable</h2>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;selector xmlns:android=\"http://schemas.android.com/apk/res/android\"&gt;\n\n&lt;item android:drawable=\"@drawable/color_radio_selected\" android:state_focused=\"true\"/&gt;\n&lt;item android:drawable=\"@drawable/color_radio_selected\" android:state_pressed=\"true\"/&gt;\n&lt;item android:drawable=\"@drawable/color_radio_selected\" android:state_selected=\"true\"/&gt;\n&lt;item android:drawable=\"@drawable/color_radio_selected\" android:state_checked=\"true\"/&gt;\n&lt;item android:drawable=\"@drawable/color_radio_unselected\"/&gt;\n\n&lt;/selector&gt;\n</code></pre>\n\n<hr>\n\n<h2>Image</h2>\n\n<p><img src=\"https://i.stack.imgur.com/M6RpP.png\" alt=\"enter image description here\"></p>\n"},{"tags":[],"owner":{"account_id":10098590,"reputation":79,"user_id":7463173,"display_name":"Roshaan Qurban"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1503562731,"creation_date":1503562731,"answer_id":45856429,"question_id":26875635,"body_markdown":"   final RelativeLayout imageView = (RelativeLayout) mLockscreenView.findViewById(R.id.mainImage);\r\n          imageView.setBackgroundResource(R.drawable.bgg);\r\n","title":"How to set the background image programmatically?","body":"<p>final RelativeLayout imageView = (RelativeLayout) mLockscreenView.findViewById(R.id.mainImage);\n          imageView.setBackgroundResource(R.drawable.bgg);</p>\n"}],"owner":{"account_id":4442161,"reputation":772,"user_id":3616467,"accept_rate":83,"display_name":"Robert"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":12418,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":2,"score":3,"last_activity_date":1679489169,"creation_date":1415744187,"question_id":26875635,"body_markdown":"I&#39;ve got a problem with setting a background image programmatically. I cannot do it.\r\n\r\nThis is my theme class. There are radio buttons in the code that should change the main background. So far I&#39;ve written implementation for two radio buttons (i.e. radioButtonMountains and radioButtonSea) that should load two different images (i.e. mountains.png and sea.png).\r\n\r\n\tpublic class ThemeActivity extends BasicActivity {\r\n\r\n\t\t@Override\r\n\t\tprotected void onCreate(Bundle savedInstanceState) {\r\n\t\t\tsuper.onCreate(savedInstanceState);\r\n\r\n\t\t\tsetContentView(R.layout.activity_theme);\r\n\r\n\t\t\tActionBar actionBar = getActionBar();\r\n\t\t\tactionBar.setDisplayHomeAsUpEnabled(true);\r\n\t\t\tactionBar.setTitle(&quot;Motywy&quot;);\r\n\t\t\t\r\n\t\t\tsetAction();\r\n\t\t}\r\n\t\t\r\n\t\tprivate void setAction(){\r\n\t\t\t\r\n\t\t\trelativeLayout=(RelativeLayout) findViewById(R.id.relativeLayoutid);\r\n\t\t\t\r\n\t\t\tradioGroup=(RadioGroup) findViewById(R.id.radioGroup);\r\n\t\t\tradioButtonMountains=(RadioButton) findViewById(R.id.radioMountains);\r\n\t\t\tradioButtonCity=(RadioButton) findViewById(R.id.radioCity);\r\n\t\t\tradioButtonSea=(RadioButton) findViewById(R.id.radioSea);\r\n\t\t\tradioButtonNature=(RadioButton) findViewById(R.id.radioNature);\r\n\t\t\t\r\n\t\t\tradioGroup.setOnCheckedChangeListener(new OnCheckedChangeListener() {\r\n\t\t\t\t\r\n\t\t\t\t@Override\r\n\t\t\t\tpublic void onCheckedChanged(RadioGroup group, int checkedId) {\r\n\r\n\t\t\t\t\tif(radioButtonMountains.isChecked()){\r\n\t\t\t\t\t\r\n\t\t\t\t\t\t//relativeLayout.setBackgroundDrawable(getResources().getDrawable(R.drawable.mountains));\r\n\t\t\t\t\t\t//relativeLayout.setBackground(getResources().getDrawable(R.drawable.mountains));\r\n\t\t\t\t\t\trelativeLayout.setBackgroundResource(R.drawable.mountains);\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\telse if(radioButtonCity.isChecked()){\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\telse if(radioButtonSea.isChecked()){\r\n\t\t\t\t\trelativeLayout.setBackgroundResource(R.drawable.sea);\r\n\t\t\t\t}\r\n\t\t\t\telse if(radioButtonNature.isChecked()){\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t});\t\t\t\t\r\n\t}\r\n\r\nThis is my activity_main.xml for my main class (if you want i can paste the code with my main class). I&#39;ve added &#39;android:id=&quot;@+id/relativeLayoutid&quot;&#39; which is referred to above.\r\n\r\n\t&lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n\t\tandroid:id=&quot;@+id/relativeLayoutid&quot; \r\n\t\tandroid:layout_width=&quot;fill_parent&quot;\r\n\t\tandroid:layout_height=&quot;fill_parent&quot;\r\n\t\tandroid:background=&quot;@drawable/sea&quot;\r\n\t\tandroid:orientation=&quot;vertical&quot; &gt;\r\n\r\n    // other things like a ImageButton, a TextView etc\r\n\r\n\t&lt;/RelativeLayout&gt;\r\n\r\nFinally, when I click, one of the radio buttons is replaced by:\r\n\r\n\t11-11 21:28:34.172: D/AndroidRuntime(22316): Shutting down VM\r\n\t11-11 21:28:34.172: W/dalvikvm(22316): threadid=1: thread exiting with uncaught exception (group=0x411162a0)\r\n\t11-11 21:28:34.202: E/AndroidRuntime(22316): FATAL EXCEPTION: main\r\n\t11-11 21:28:34.202: E/AndroidRuntime(22316): java.lang.NullPointerException\r\n\t11-11 21:28:34.202: E/AndroidRuntime(22316): \tat com.example.runapp.ThemeActivity$1.onCheckedChanged(ThemeActivity.java:43)\r\n\t11-11 21:28:34.202: E/AndroidRuntime(22316): \tat android.widget.RadioGroup.setCheckedId(RadioGroup.java:174)\r\n\t11-11 21:28:34.202: E/AndroidRuntime(22316): \tat android.widget.RadioGroup.access$600(RadioGroup.java:54)\r\n\t11-11 21:28:34.202: E/AndroidRuntime(22316): \tat android.widget.RadioGroup$CheckedStateTracker.onCheckedChanged(RadioGroup.java:358)\r\n\t11-11 21:28:34.202: E/AndroidRuntime(22316): \tat android.widget.CompoundButton.setChecked(CompoundButton.java:140)\r\n\t11-11 21:28:34.202: E/AndroidRuntime(22316): \tat android.widget.CompoundButton.toggle(CompoundButton.java:92)\r\n\t11-11 21:28:34.202: E/AndroidRuntime(22316): \tat android.widget.RadioButton.toggle(RadioButton.java:76)\r\n\t11-11 21:28:34.202: E/AndroidRuntime(22316): \tat android.widget.CompoundButton.performClick(CompoundButton.java:104)\r\n\t11-11 21:28:34.202: E/AndroidRuntime(22316): \tat android.view.View$PerformClick.run(View.java:17082)\r\n\t11-11 21:28:34.202: E/AndroidRuntime(22316): \tat android.os.Handler.handleCallback(Handler.java:615)\r\n\t11-11 21:28:34.202: E/AndroidRuntime(22316): \tat android.os.Handler.dispatchMessage(Handler.java:92)\r\n\t11-11 21:28:34.202: E/AndroidRuntime(22316): \tat android.os.Looper.loop(Looper.java:137)\r\n\t11-11 21:28:34.202: E/AndroidRuntime(22316): \tat android.app.ActivityThread.main(ActivityThread.java:4867)\r\n\t11-11 21:28:34.202: E/AndroidRuntime(22316): \tat java.lang.reflect.Method.invokeNative(Native Method)\r\n\t11-11 21:28:34.202: E/AndroidRuntime(22316): \tat java.lang.reflect.Method.invoke(Method.java:511)\r\n\t11-11 21:28:34.202: E/AndroidRuntime(22316): \tat com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1007)\r\n\t11-11 21:28:34.202: E/AndroidRuntime(22316): \tat com.android.internal.os.ZygoteInit.main(ZygoteInit.java:774)\r\n\t11-11 21:28:34.202: E/AndroidRuntime(22316): \tat dalvik.system.NativeStart.main(Native Method)\r\n\r\nand the application closed. I tried use this way:\r\n\r\n    relativeLayout.setBackgroundResource(R.drawable.mountains);\r\n\r\nand this way:\r\n\r\n    relativeLayout.setBackground(getResources().getDrawable(R.drawable.mountains));\r\n\r\nand this way:\r\n\r\n    relativeLayout.setBackgroundDrawable(getResources().getDrawable(R.drawable.mountains));\r\n\r\nand none of them work.\r\n\r\nHow can i fix this issue? What should i correct?\r\n\r\n**The solution:**\r\n==============\r\n1. Move the relativeLayout=(RelativeLayout) findViewById(R.id.relativeLayoutid) and setBackgroundResource() method to the main activity behind setContentView() method.\r\n2. Create a static variable and put this varaible in the setBackgroundResource() method as the parameter.\r\n3. Change the static variable in theme activity where you&#39;ve got radio buttons.\r\n\r\nMainActivity class:\r\n\r\n\t@TargetApi(Build.VERSION_CODES.ICE_CREAM_SANDWICH)\r\n\tpublic class MainActivity extends BasicActivity implements OnClickListener {\r\n\r\n\t\tpublic final static String EXTRA_MESSAGE = &quot;com.example.helloworld.MESSAGE&quot;;\r\n\r\n\t\t@Override\r\n\t\tprotected void onCreate(Bundle savedInstanceState) {\r\n\t\t\tsuper.onCreate(savedInstanceState);\r\n\r\n\t\t\t//other things\r\n\t\t\t\r\n\t\t\tsetContentView(R.layout.activity_main);\r\n\t\t\t\r\n\t\t\trelativeLayout=(RelativeLayout) findViewById(R.id.relativeLayoutid);\r\n\t\t\t\r\n\t\t\tif(image==0) relativeLayout.setBackgroundResource(R.drawable.mountains);\r\n\t\t\telse relativeLayout.setBackgroundResource(image);\r\n\r\n\t\t\t//other things\r\n\t\t}\r\n\r\n\t\t//other things\r\n\t\t\r\n\t\tpublic RelativeLayout relativeLayout;\r\n\t\tpublic static int image;\r\n\t}\r\n\r\nactivity_main.xml for MainActivity class:\r\n\r\n\t&lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n\t\tandroid:id=&quot;@+id/relativeLayoutid&quot; \r\n\t\tandroid:layout_width=&quot;fill_parent&quot;\r\n\t\tandroid:layout_height=&quot;fill_parent&quot;\r\n\t\tandroid:background=&quot;@drawable/sea&quot;\r\n\t\tandroid:orientation=&quot;vertical&quot; &gt;\r\n\r\n    // other things like a ImageButton, a TextView etc\r\n\r\n\t&lt;/RelativeLayout&gt;\r\n\r\nThemeActivity class where I change the main background:\r\n\r\n\tpublic class ThemeActivity extends BasicActivity {\r\n\r\n\t\t@Override\r\n\t\tprotected void onCreate(Bundle savedInstanceState) {\r\n\t\t\tsuper.onCreate(savedInstanceState);\r\n\r\n\t\t\tsetContentView(R.layout.activity_theme);\r\n\r\n\t\t\tActionBar actionBar = getActionBar();\r\n\t\t\tactionBar.setDisplayHomeAsUpEnabled(true);\r\n\t\t\tactionBar.setTitle(&quot;Theme&quot;);\r\n\r\n\t\t\tsetAction();\r\n\t\t}\r\n\t\t\r\n\t\tprivate void setAction(){\r\n\t\t\t\r\n\t\t\tradioGroup=(RadioGroup) findViewById(R.id.radioGroup);\r\n\t\t\tradioButtonMountains=(RadioButton) findViewById(R.id.radioMountains);\r\n\t\t\tradioButtonCity=(RadioButton) findViewById(R.id.radioCity);\r\n\t\t\tradioButtonSea=(RadioButton) findViewById(R.id.radioSea);\r\n\t\t\tradioButtonNature=(RadioButton) findViewById(R.id.radioNature);\r\n\r\n\t\t\tsetRadioChoose();\r\n\t\t\t\r\n\t\t\tradioGroup.setOnCheckedChangeListener(new OnCheckedChangeListener() {\r\n\t\t\t\t\r\n\t\t\t\t@Override\r\n\t\t\t\tpublic void onCheckedChanged(RadioGroup group, int checkedId) {\r\n\t\t\t\t\t\r\n\t\t\t\t\tif(radioButtonMountains.isChecked()){\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tMainActivity.image=R.drawable.mountains;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if(radioButtonCity.isChecked()){\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tMainActivity.image=R.drawable.city;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if(radioButtonSea.isChecked()){\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tMainActivity.image=R.drawable.sea;\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if(radioButtonNature.isChecked()){\r\n\r\n\t\t\t\t\t\tMainActivity.image=R.drawable.nature;\t\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tsaveRadioChoose(checkedId);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\tprivate void setRadioChoose(){\r\n\t\t\t\r\n\t\t\tradioChoose=PreferenceManager.getDefaultSharedPreferences(getBaseContext());\r\n\t\t\tradioChooseEdit=radioChoose.edit();\r\n\t\t\t\r\n\t\t\tint radio=radioChoose.getInt(&quot;RADIO&quot;, 0);\r\n\t\t\t\r\n\t\t\tif(radio==radioButtonMountains.getId()) radioButtonMountains.setChecked(true);\r\n\t\t\telse if(radio==radioButtonCity.getId()) radioButtonCity.setChecked(true);\r\n\t\t\telse if(radio==radioButtonSea.getId()) radioButtonSea.setChecked(true);\r\n\t\t\telse if(radio==radioButtonNature.getId()) radioButtonNature.setChecked(true);\r\n\t\t\telse if(radio==0) radioButtonMountains.setChecked(true);\r\n\t\t}\r\n\t\t\r\n\t\tprivate void saveRadioChoose(int checkedId){\r\n\t\t\t\r\n\t\t\tradioChooseEdit.putInt(&quot;RADIO&quot;, checkedId);\r\n\t\t\tradioChooseEdit.commit();\r\n\t\t}\r\n\t\t\r\n\t\tprivate RadioGroup radioGroup;\r\n\t\tprivate RadioButton radioButtonMountains;\r\n\t\tprivate RadioButton radioButtonCity;\r\n\t\tprivate RadioButton radioButtonSea;\r\n\t\tprivate RadioButton radioButtonNature;\r\n\t\t\r\n\t\tprivate SharedPreferences radioChoose;\r\n\t\tprivate SharedPreferences.Editor radioChooseEdit;\r\n\t}\r\n","title":"How to set the background image programmatically?","body":"<p>I've got a problem with setting a background image programmatically. I cannot do it.</p>\n<p>This is my theme class. There are radio buttons in the code that should change the main background. So far I've written implementation for two radio buttons (i.e. radioButtonMountains and radioButtonSea) that should load two different images (i.e. mountains.png and sea.png).</p>\n<pre><code>public class ThemeActivity extends BasicActivity {\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n\n        setContentView(R.layout.activity_theme);\n\n        ActionBar actionBar = getActionBar();\n        actionBar.setDisplayHomeAsUpEnabled(true);\n        actionBar.setTitle(&quot;Motywy&quot;);\n        \n        setAction();\n    }\n    \n    private void setAction(){\n        \n        relativeLayout=(RelativeLayout) findViewById(R.id.relativeLayoutid);\n        \n        radioGroup=(RadioGroup) findViewById(R.id.radioGroup);\n        radioButtonMountains=(RadioButton) findViewById(R.id.radioMountains);\n        radioButtonCity=(RadioButton) findViewById(R.id.radioCity);\n        radioButtonSea=(RadioButton) findViewById(R.id.radioSea);\n        radioButtonNature=(RadioButton) findViewById(R.id.radioNature);\n        \n        radioGroup.setOnCheckedChangeListener(new OnCheckedChangeListener() {\n            \n            @Override\n            public void onCheckedChanged(RadioGroup group, int checkedId) {\n\n                if(radioButtonMountains.isChecked()){\n                \n                    //relativeLayout.setBackgroundDrawable(getResources().getDrawable(R.drawable.mountains));\n                    //relativeLayout.setBackground(getResources().getDrawable(R.drawable.mountains));\n                    relativeLayout.setBackgroundResource(R.drawable.mountains);                 \n            }\n            else if(radioButtonCity.isChecked()){\n                \n            }\n            else if(radioButtonSea.isChecked()){\n                relativeLayout.setBackgroundResource(R.drawable.sea);\n            }\n            else if(radioButtonNature.isChecked()){\n                \n            }\n\n        }\n    });             \n}\n</code></pre>\n<p>This is my activity_main.xml for my main class (if you want i can paste the code with my main class). I've added 'android:id=&quot;@+id/relativeLayoutid&quot;' which is referred to above.</p>\n<pre><code>&lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    android:id=&quot;@+id/relativeLayoutid&quot; \n    android:layout_width=&quot;fill_parent&quot;\n    android:layout_height=&quot;fill_parent&quot;\n    android:background=&quot;@drawable/sea&quot;\n    android:orientation=&quot;vertical&quot; &gt;\n\n// other things like a ImageButton, a TextView etc\n\n&lt;/RelativeLayout&gt;\n</code></pre>\n<p>Finally, when I click, one of the radio buttons is replaced by:</p>\n<pre><code>11-11 21:28:34.172: D/AndroidRuntime(22316): Shutting down VM\n11-11 21:28:34.172: W/dalvikvm(22316): threadid=1: thread exiting with uncaught exception (group=0x411162a0)\n11-11 21:28:34.202: E/AndroidRuntime(22316): FATAL EXCEPTION: main\n11-11 21:28:34.202: E/AndroidRuntime(22316): java.lang.NullPointerException\n11-11 21:28:34.202: E/AndroidRuntime(22316):    at com.example.runapp.ThemeActivity$1.onCheckedChanged(ThemeActivity.java:43)\n11-11 21:28:34.202: E/AndroidRuntime(22316):    at android.widget.RadioGroup.setCheckedId(RadioGroup.java:174)\n11-11 21:28:34.202: E/AndroidRuntime(22316):    at android.widget.RadioGroup.access$600(RadioGroup.java:54)\n11-11 21:28:34.202: E/AndroidRuntime(22316):    at android.widget.RadioGroup$CheckedStateTracker.onCheckedChanged(RadioGroup.java:358)\n11-11 21:28:34.202: E/AndroidRuntime(22316):    at android.widget.CompoundButton.setChecked(CompoundButton.java:140)\n11-11 21:28:34.202: E/AndroidRuntime(22316):    at android.widget.CompoundButton.toggle(CompoundButton.java:92)\n11-11 21:28:34.202: E/AndroidRuntime(22316):    at android.widget.RadioButton.toggle(RadioButton.java:76)\n11-11 21:28:34.202: E/AndroidRuntime(22316):    at android.widget.CompoundButton.performClick(CompoundButton.java:104)\n11-11 21:28:34.202: E/AndroidRuntime(22316):    at android.view.View$PerformClick.run(View.java:17082)\n11-11 21:28:34.202: E/AndroidRuntime(22316):    at android.os.Handler.handleCallback(Handler.java:615)\n11-11 21:28:34.202: E/AndroidRuntime(22316):    at android.os.Handler.dispatchMessage(Handler.java:92)\n11-11 21:28:34.202: E/AndroidRuntime(22316):    at android.os.Looper.loop(Looper.java:137)\n11-11 21:28:34.202: E/AndroidRuntime(22316):    at android.app.ActivityThread.main(ActivityThread.java:4867)\n11-11 21:28:34.202: E/AndroidRuntime(22316):    at java.lang.reflect.Method.invokeNative(Native Method)\n11-11 21:28:34.202: E/AndroidRuntime(22316):    at java.lang.reflect.Method.invoke(Method.java:511)\n11-11 21:28:34.202: E/AndroidRuntime(22316):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1007)\n11-11 21:28:34.202: E/AndroidRuntime(22316):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:774)\n11-11 21:28:34.202: E/AndroidRuntime(22316):    at dalvik.system.NativeStart.main(Native Method)\n</code></pre>\n<p>and the application closed. I tried use this way:</p>\n<pre><code>relativeLayout.setBackgroundResource(R.drawable.mountains);\n</code></pre>\n<p>and this way:</p>\n<pre><code>relativeLayout.setBackground(getResources().getDrawable(R.drawable.mountains));\n</code></pre>\n<p>and this way:</p>\n<pre><code>relativeLayout.setBackgroundDrawable(getResources().getDrawable(R.drawable.mountains));\n</code></pre>\n<p>and none of them work.</p>\n<p>How can i fix this issue? What should i correct?</p>\n<h1><strong>The solution:</strong></h1>\n<ol>\n<li>Move the relativeLayout=(RelativeLayout) findViewById(R.id.relativeLayoutid) and setBackgroundResource() method to the main activity behind setContentView() method.</li>\n<li>Create a static variable and put this varaible in the setBackgroundResource() method as the parameter.</li>\n<li>Change the static variable in theme activity where you've got radio buttons.</li>\n</ol>\n<p>MainActivity class:</p>\n<pre><code>@TargetApi(Build.VERSION_CODES.ICE_CREAM_SANDWICH)\npublic class MainActivity extends BasicActivity implements OnClickListener {\n\n    public final static String EXTRA_MESSAGE = &quot;com.example.helloworld.MESSAGE&quot;;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n\n        //other things\n        \n        setContentView(R.layout.activity_main);\n        \n        relativeLayout=(RelativeLayout) findViewById(R.id.relativeLayoutid);\n        \n        if(image==0) relativeLayout.setBackgroundResource(R.drawable.mountains);\n        else relativeLayout.setBackgroundResource(image);\n\n        //other things\n    }\n\n    //other things\n    \n    public RelativeLayout relativeLayout;\n    public static int image;\n}\n</code></pre>\n<p>activity_main.xml for MainActivity class:</p>\n<pre><code>&lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    android:id=&quot;@+id/relativeLayoutid&quot; \n    android:layout_width=&quot;fill_parent&quot;\n    android:layout_height=&quot;fill_parent&quot;\n    android:background=&quot;@drawable/sea&quot;\n    android:orientation=&quot;vertical&quot; &gt;\n\n// other things like a ImageButton, a TextView etc\n\n&lt;/RelativeLayout&gt;\n</code></pre>\n<p>ThemeActivity class where I change the main background:</p>\n<pre><code>public class ThemeActivity extends BasicActivity {\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n\n        setContentView(R.layout.activity_theme);\n\n        ActionBar actionBar = getActionBar();\n        actionBar.setDisplayHomeAsUpEnabled(true);\n        actionBar.setTitle(&quot;Theme&quot;);\n\n        setAction();\n    }\n    \n    private void setAction(){\n        \n        radioGroup=(RadioGroup) findViewById(R.id.radioGroup);\n        radioButtonMountains=(RadioButton) findViewById(R.id.radioMountains);\n        radioButtonCity=(RadioButton) findViewById(R.id.radioCity);\n        radioButtonSea=(RadioButton) findViewById(R.id.radioSea);\n        radioButtonNature=(RadioButton) findViewById(R.id.radioNature);\n\n        setRadioChoose();\n        \n        radioGroup.setOnCheckedChangeListener(new OnCheckedChangeListener() {\n            \n            @Override\n            public void onCheckedChanged(RadioGroup group, int checkedId) {\n                \n                if(radioButtonMountains.isChecked()){\n                    \n                    MainActivity.image=R.drawable.mountains;\n                }\n                else if(radioButtonCity.isChecked()){\n                    \n                    MainActivity.image=R.drawable.city;\n                }\n                else if(radioButtonSea.isChecked()){\n                    \n                    MainActivity.image=R.drawable.sea;                  \n                }\n                else if(radioButtonNature.isChecked()){\n\n                    MainActivity.image=R.drawable.nature;   \n                }\n\n                saveRadioChoose(checkedId);\n            }\n        });\n        \n    }\n    \n    private void setRadioChoose(){\n        \n        radioChoose=PreferenceManager.getDefaultSharedPreferences(getBaseContext());\n        radioChooseEdit=radioChoose.edit();\n        \n        int radio=radioChoose.getInt(&quot;RADIO&quot;, 0);\n        \n        if(radio==radioButtonMountains.getId()) radioButtonMountains.setChecked(true);\n        else if(radio==radioButtonCity.getId()) radioButtonCity.setChecked(true);\n        else if(radio==radioButtonSea.getId()) radioButtonSea.setChecked(true);\n        else if(radio==radioButtonNature.getId()) radioButtonNature.setChecked(true);\n        else if(radio==0) radioButtonMountains.setChecked(true);\n    }\n    \n    private void saveRadioChoose(int checkedId){\n        \n        radioChooseEdit.putInt(&quot;RADIO&quot;, checkedId);\n        radioChooseEdit.commit();\n    }\n    \n    private RadioGroup radioGroup;\n    private RadioButton radioButtonMountains;\n    private RadioButton radioButtonCity;\n    private RadioButton radioButtonSea;\n    private RadioButton radioButtonNature;\n    \n    private SharedPreferences radioChoose;\n    private SharedPreferences.Editor radioChooseEdit;\n}\n</code></pre>\n"},{"tags":["java","oop"],"comments":[{"owner":{"display_name":"user6073886"},"score":8,"creation_date":1679476198,"post_id":75810240,"comment_id":133727237,"body_markdown":"Create an abstract class or interface that contains the common methods of A and B, then have your method accept any object of that abstract class or interface.","body":"Create an abstract class or interface that contains the common methods of A and B, then have your method accept any object of that abstract class or interface."},{"owner":{"account_id":8400075,"reputation":81,"user_id":6305621,"display_name":"Sopheak"},"score":0,"creation_date":1679477365,"post_id":75810240,"comment_id":133727515,"body_markdown":"Why don&#39;t you use POJO in both classes? You might not need to write the function.","body":"Why don&#39;t you use POJO in both classes? You might not need to write the function."}],"answers":[{"tags":[],"owner":{"account_id":2818342,"reputation":299838,"user_id":2422776,"display_name":"Mureinik"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1679484783,"creation_date":1679484783,"answer_id":75811728,"question_id":75810240,"body_markdown":"You could extract the common attributes to a base class and have both `A` and `B` extend it:\r\n\r\n```java\r\npublic abstract class AbstractFraction {\r\n    protected Long numerator;\r\n    protected Long denominator;\r\n\r\n    // getters and setters\r\n}\r\n\r\nclass A extends AbstractFraction {\r\n    String firstName;\r\n    // getter and setter for firstName\r\n}\r\n\r\nclass B extends AbstractFraction {\r\n    String address;\r\n    // getter and setter for address\r\n}\r\n\r\npublic class FractionUtil {\r\n    Double F(AbstractFraction input) {\r\n        return input.getNumerator()/ input.getDenominator();\r\n    }\r\n}\r\n```","title":"Same function but different input class","body":"<p>You could extract the common attributes to a base class and have both <code>A</code> and <code>B</code> extend it:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public abstract class AbstractFraction {\n    protected Long numerator;\n    protected Long denominator;\n\n    // getters and setters\n}\n\nclass A extends AbstractFraction {\n    String firstName;\n    // getter and setter for firstName\n}\n\nclass B extends AbstractFraction {\n    String address;\n    // getter and setter for address\n}\n\npublic class FractionUtil {\n    Double F(AbstractFraction input) {\n        return input.getNumerator()/ input.getDenominator();\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":22415215,"reputation":49,"user_id":16623376,"display_name":"ripunjoym1998"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":78,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"accepted_answer_id":75811728,"answer_count":1,"score":-1,"last_activity_date":1679489099,"creation_date":1679476092,"question_id":75810240,"body_markdown":"I have a function that performs the following task:\r\n\r\n```java\r\nDouble F(Class input){\r\n    return input.getNumerator()/ input.getDenominator();\r\n}\r\n```\r\n\r\nNow, I have two classes that will be using this same function, class A and class B and they look like this:\r\n\r\n```java\r\nclass A {\r\n    Long numerator;\r\n    Long denominator;\r\n    String firstName;\r\n    //getters and setters\r\n}\r\n\r\nclass B {\r\n    Long numerator;\r\n    Long denominator;\r\n    String address;\r\n    //getters and setters\r\n}\r\n```\r\n\r\nTherefore class A and class B have some common variables/getter-setters but not all. Function F requires only the common variables of class A and class B. Now, I need to run function F for both classes, but I don&#39;t want to write the exact same function twice for each class and duplicate the code. I want to instead have the input for Function F in such a way that it can accept both Class A and Class B and use their common getter-setters. How should I proceed with this?","title":"Same function but different input class","body":"<p>I have a function that performs the following task:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Double F(Class input){\n    return input.getNumerator()/ input.getDenominator();\n}\n</code></pre>\n<p>Now, I have two classes that will be using this same function, class A and class B and they look like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>class A {\n    Long numerator;\n    Long denominator;\n    String firstName;\n    //getters and setters\n}\n\nclass B {\n    Long numerator;\n    Long denominator;\n    String address;\n    //getters and setters\n}\n</code></pre>\n<p>Therefore class A and class B have some common variables/getter-setters but not all. Function F requires only the common variables of class A and class B. Now, I need to run function F for both classes, but I don't want to write the exact same function twice for each class and duplicate the code. I want to instead have the input for Function F in such a way that it can accept both Class A and Class B and use their common getter-setters. How should I proceed with this?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":19462,"reputation":102762,"user_id":45664,"accept_rate":91,"display_name":"Andrzej Doyle"},"score":2,"creation_date":1383218286,"post_id":19704996,"comment_id":29270333,"body_markdown":"What is the &quot;same method&quot; that you&#39;re using?  A JSON file **is** a text file, so the method (probably some version of `String.replace`) should still work!","body":"What is the &quot;same method&quot; that you&#39;re using?  A JSON file <b>is</b> a text file, so the method (probably some version of <code>String.replace</code>) should still work!"},{"owner":{"account_id":1498910,"reputation":992,"user_id":1404195,"accept_rate":89,"display_name":"The_Lost_Avatar"},"score":0,"creation_date":1383218292,"post_id":19704996,"comment_id":29270337,"body_markdown":"Please show the full JSON file and some of your code as to what you are doing.","body":"Please show the full JSON file and some of your code as to what you are doing."}],"answers":[{"tags":[],"owner":{"account_id":2305374,"reputation":44549,"user_id":2024761,"display_name":"Rahul"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1383218815,"creation_date":1383218815,"answer_id":19705267,"question_id":19704996,"body_markdown":"You cannot replace a value as such. Therefore, you need to remove it from the json and add it back.\r\n\r\n    JSONObject js = new JSONObject(); // Your jsonobject here, this is just a sample\r\n    js.remove(&quot;id&quot;); // Since you want to replace the value associated with id, remove it\r\n    js.put(&quot;id&quot;, &quot;HELLO&quot;); // add the new value for id","title":"How to replace a value of a json file in java","body":"<p>You cannot replace a value as such. Therefore, you need to remove it from the json and add it back.</p>\n\n<pre><code>JSONObject js = new JSONObject(); // Your jsonobject here, this is just a sample\njs.remove(\"id\"); // Since you want to replace the value associated with id, remove it\njs.put(\"id\", \"HELLO\"); // add the new value for id\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3492407,"reputation":74,"user_id":2921721,"display_name":"LC1NS4N3"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1383219068,"creation_date":1383219068,"answer_id":19705363,"question_id":19704996,"body_markdown":"try this\r\n\r\n    &gt;     &quot;id&quot;: {\r\n    &gt;         &quot;type&quot;: &quot;String&quot;,\r\n    &gt;         &quot;value&quot;: &quot;TEXT&quot; ...\r\n    &gt; \r\n    &gt; JSONObject modifiedjson=new JSONObject();\r\n    &gt; modifiedjson.put(&quot;type&quot;,childobject.get(&quot;type&quot;));\r\n    &gt; modifiedjson.put(&quot;id&quot;,&quot;HELLO&quot;);\r\n\r\n","title":"How to replace a value of a json file in java","body":"<p>try this</p>\n\n<pre><code>&gt;     \"id\": {\n&gt;         \"type\": \"String\",\n&gt;         \"value\": \"TEXT\" ...\n&gt; \n&gt; JSONObject modifiedjson=new JSONObject();\n&gt; modifiedjson.put(\"type\",childobject.get(\"type\"));\n&gt; modifiedjson.put(\"id\",\"HELLO\");\n</code></pre>\n"},{"tags":[],"owner":{"account_id":130772,"reputation":71463,"user_id":330280,"accept_rate":92,"display_name":"aleroot"},"down_vote_count":2,"up_vote_count":6,"is_accepted":true,"score":4,"last_activity_date":1383219152,"creation_date":1383219152,"answer_id":19705386,"question_id":19704996,"body_markdown":"Without using a JSON parser as someone suggested, you can do it simply with a regex :\r\n\r\n    str = str.replaceAll(&quot;(\\\\s*?\\&quot;id\\&quot;\\\\s*?:\\\\s*?)\\&quot;TEXT\\&quot;,&quot;, &quot;$1\\&quot;HELLO\\&quot;&quot;);\r\n\r\nIf the &quot;TEXT&quot; string is an unique placeholder for your replacement, you could simply use String [replace][1] method, in this way : \r\n\r\n    str.replace(&quot;\\&quot;TEXT\\&quot;&quot;, &quot;\\&quot;HELLO\\&quot;&quot;);\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#replace%28char,%20char%29","title":"How to replace a value of a json file in java","body":"<p>Without using a JSON parser as someone suggested, you can do it simply with a regex :</p>\n\n<pre><code>str = str.replaceAll(\"(\\\\s*?\\\"id\\\"\\\\s*?:\\\\s*?)\\\"TEXT\\\",\", \"$1\\\"HELLO\\\"\");\n</code></pre>\n\n<p>If the \"TEXT\" string is an unique placeholder for your replacement, you could simply use String <a href=\"http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#replace%28char,%20char%29\" rel=\"nofollow\">replace</a> method, in this way : </p>\n\n<pre><code>str.replace(\"\\\"TEXT\\\"\", \"\\\"HELLO\\\"\");\n</code></pre>\n"}],"owner":{"account_id":3365593,"reputation":107,"user_id":2826304,"accept_rate":89,"display_name":"user2826304"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":53587,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"accepted_answer_id":19705386,"answer_count":3,"score":7,"last_activity_date":1679489090,"creation_date":1383218126,"question_id":19704996,"body_markdown":"I need some help with replacing a line in a json file. I have attempted using the same method i use to replace a line in a text file with no success.\r\n\r\nBasically the json file contains the following string:\r\n\r\n      &quot;id&quot;: &quot;TEXT&quot;,\r\n\r\nAnd i want to replace the `TEXT` with `HELLO`\r\n\r\nHow would i do this, also i have the `json_simple` library imported if that is of any use for this.\r\n\r\nAny help with this would be greatly appreciated.\r\n\r\nThanks.\r\n","title":"How to replace a value of a json file in java","body":"<p>I need some help with replacing a line in a json file. I have attempted using the same method i use to replace a line in a text file with no success.</p>\n<p>Basically the json file contains the following string:</p>\n<pre><code>  &quot;id&quot;: &quot;TEXT&quot;,\n</code></pre>\n<p>And i want to replace the <code>TEXT</code> with <code>HELLO</code></p>\n<p>How would i do this, also i have the <code>json_simple</code> library imported if that is of any use for this.</p>\n<p>Any help with this would be greatly appreciated.</p>\n<p>Thanks.</p>\n"},{"tags":["java","openssl","pkcs#7"],"owner":{"account_id":28085858,"reputation":1,"user_id":21456243,"display_name":"B G Mehta"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679488421,"creation_date":1679488421,"question_id":75812318,"body_markdown":"I am looking for Java equivalent code for below openssl command, anyone can also explain below command it will be helpful  \r\n\r\nopenssl crl2pkcs7 -nocrl -certfile server-cert.crt -certfile other_pub.pem -out output_p7.p7b&#39;\r\n\r\n\r\nI tried using Bounty Castle library for generating PKCS7 output but library need signer info which is confusing as above command does not have any signer info requirement, basically 2 certificate are input to generate PKCS7 output ","title":"What will be Java equivalent for openssl crl2pkcs7 command","body":"<p>I am looking for Java equivalent code for below openssl command, anyone can also explain below command it will be helpful</p>\n<p>openssl crl2pkcs7 -nocrl -certfile server-cert.crt -certfile other_pub.pem -out output_p7.p7b'</p>\n<p>I tried using Bounty Castle library for generating PKCS7 output but library need signer info which is confusing as above command does not have any signer info requirement, basically 2 certificate are input to generate PKCS7 output</p>\n"},{"tags":["java","arrays","sorting","time-complexity"],"comments":[{"owner":{"account_id":17476274,"reputation":25017,"user_id":12671057,"display_name":"Kelly Bundy"},"score":0,"creation_date":1679327824,"post_id":75779984,"comment_id":133697918,"body_markdown":"@JimGarrison They&#39;re sorting 600000 strings with a Theta(n&#178;) algorithm and it took 3 hours and 6 hours, respectively. How is that a microbenchmark?","body":"@JimGarrison They&#39;re sorting 600000 strings with a Theta(n&#178;) algorithm and it took 3 hours and 6 hours, respectively. How is that a microbenchmark?"},{"owner":{"account_id":17476274,"reputation":25017,"user_id":12671057,"display_name":"Kelly Bundy"},"score":0,"creation_date":1679348923,"post_id":75779984,"comment_id":133703082,"body_markdown":"Please tell us more about your array/strings and provide a [mre].","body":"Please tell us more about your array/strings and provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."},{"owner":{"account_id":17476274,"reputation":25017,"user_id":12671057,"display_name":"Kelly Bundy"},"score":0,"creation_date":1679352586,"post_id":75779984,"comment_id":133703700,"body_markdown":"@JimGarrison Actually I see two possible interesting explanations that really come from what they&#39;re doing, not from benchmarking mistakes.","body":"@JimGarrison Actually I see two possible interesting explanations that really come from what they&#39;re doing, not from benchmarking mistakes."},{"owner":{"account_id":9760,"reputation":85859,"user_id":18157,"accept_rate":100,"display_name":"Jim Garrison"},"score":0,"creation_date":1679355776,"post_id":75779984,"comment_id":133704143,"body_markdown":"@KellyBundy Agreed, reopened.","body":"@KellyBundy Agreed, reopened."},{"owner":{"account_id":17476274,"reputation":25017,"user_id":12671057,"display_name":"Kelly Bundy"},"score":0,"creation_date":1679357048,"post_id":75779984,"comment_id":133704305,"body_markdown":"@JimGarrison Thanks. Now I&#39;m debating with myself whether I should post what I&#39;m thinking and risk them never providing more Infos and an mre, or wait for that...","body":"@JimGarrison Thanks. Now I&#39;m debating with myself whether I should post what I&#39;m thinking and risk them never providing more Infos and an mre, or wait for that..."}],"answers":[{"tags":[],"owner":{"account_id":28054732,"reputation":9,"user_id":21429951,"display_name":"frozenproof"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1679198710,"creation_date":1679198710,"answer_id":75780018,"question_id":75779984,"body_markdown":"Aren&#39;t you using the same array in the variable field by the function ? \r\n [same variable ?][1].\r\n\r\nThis may have to do with machine load . Usually , your machine may spend different amount of CPU cycles on each task , and perfoming certain task may push the priority for the execution down a bit , which lead to some delay .\r\n\r\nIf you perform raw execution of each algorithm around 50 times , the difference is uncanny on recorded time. \r\n\r\n  [1]: https://i.stack.imgur.com/qcdFc.png","title":"Why is Bubble/Selection/Pancake Sort faster when testing it with unsorted values?","body":"<p>Aren't you using the same array in the variable field by the function ?\n<a href=\"https://i.stack.imgur.com/qcdFc.png\" rel=\"nofollow noreferrer\">same variable ?</a>.</p>\n<p>This may have to do with machine load . Usually , your machine may spend different amount of CPU cycles on each task , and perfoming certain task may push the priority for the execution down a bit , which lead to some delay .</p>\n<p>If you perform raw execution of each algorithm around 50 times , the difference is uncanny on recorded time.</p>\n"},{"tags":[],"owner":{"account_id":17476274,"reputation":25017,"user_id":12671057,"display_name":"Kelly Bundy"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1679488349,"creation_date":1679359043,"answer_id":75796441,"question_id":75779984,"body_markdown":"Given the long runtimes of 3 and 6 hours, I see two possible interesting explanations:\r\n\r\n1. You always compare neighbor elements. When the array is *unsorted*, neighbor strings likely already differ at the first character, which makes the comparisons fast. When the array is *sorted*, neighbor strings likely share a common prefix, which makes comparisons slower.\r\n\r\n2. You created the string objects in unsorted order, for example reading a file of unsorted strings into memory. I&#39;m not much familiar with Java, but I suspect it does create them mostly sequentially in memory. So at the start, going through the strings in array order accesses the memory sequentially, which is cache-friendly. But then the sorting changes the array order. So going through the strings of the sorted array accesses the memory &quot;randomly&quot;, which is cache-unfriendly.\r\n\r\n**Update** after your question update with the additional timings and link to code/data: Both of the above reasons apply, although I suspect the cache one is the main one. Your timings show that with fewer and fewer words, the &quot;sorted&quot; case gets better and better compared to the &quot;unsorted&quot; case. That&#39;s expected, as for small inputs, more/everything fits in caches, and common prefixes are short (unless you choose similar words, but you didn&#39;t), so those two disadvantages of &quot;sorted&quot; go away. And the &quot;unsorted&quot; case still suffers from having to do the swap work and from branch prediction failures, making it slower than &quot;sorted&quot; when &quot;sorted&quot; doesn&#39;t have its disadvantages anymore. Also see [Why is processing a sorted array slower than an unsorted array?](https://stackoverflow.com/q/14023988/12671057) as well as [Why is processing a sorted array faster than processing an unsorted array?](https://stackoverflow.com/q/11227809/12671057) (Note that one says slower and the other says faster, and both are correct, for different usages and reasons).\r\n\r\nI was able to reliably reproduce the &quot;unsorted&quot; case being faster than the &quot;sorted&quot; case (1.2 seconds vs 2.0 seconds, doing five rounds and ignoring the first round for warmup) with 10000 artificially created strings of 100 characters each. &lt;strike&gt;Still hoping that you&#39;ll share more infos about your data and runnable complete code, but&lt;/strike&gt; (see update paragraph above) I think the above aspects are interesting anyway.\r\n\r\nSample benchmark results:\r\n```\r\nunsorted 1.263458034\r\nsorted   1.985379993\r\n\r\nunsorted 1.115940408\r\nsorted   1.830749365\r\n\r\nunsorted 1.157192938\r\nsorted   2.175659597\r\n\r\nunsorted 0.950845856\r\nsorted   1.712224688\r\n\r\nunsorted 1.243945757\r\nsorted   1.979670624\r\n```\r\nCode ([Attempt This Online!](https://ato.pxeger.com/run?1=tVTBjpswED20J75ihFTJLhs2WSmrViSnnntKbikHQ5x0ENjImKyqKF-ylxx2f6pf0zEQIJtV1UtHAoznzZs3npGfXzJxEOfza213ky-_P37AotTGgtsNa4t5-DnyvLJOckwhzUVVwXeBCo6eB9BtV1ZY-hw0bqEgJ1tZg2q_iUGYfcUJC2Q7bRgqYl5OI8gWc3oFAW99zpxPwRJmU7Ko3-65nrTZVmu9cuqWoOTTxaXiAU1JoMmClAUXKkLK0XudjWg2GBMT8_3AsX37KYxIrTSMpbTkDD89PAaPc855aGQphWUkjQcYeT1hrtXeld9IWv2qrCxCJZReYyEZH2QldZLk0uVko_x3oEaYLlzXNiypLpsr5teqIpzcgg8BsJsEMGmTc7iHmfzKR8r-o6hOEvybKML4P5TfcZ489zRL4jsIK6-mZyRpNEPmrh0O3k7d205TlTRRCAsanwnMIggCHHp-vOp-H5W1UVkXhZfI7HparqObMd0BI0mbjAqbxWGqi1IYudbtZsyJcMpvom55mtNtagQ6v5LkDKzRu-jBfwH_DehAjvgWcvLe_zt1HTq1d0F3JVyuhj8)):\r\n\r\n```java\r\nimport java.util.*;\r\n\r\npublic class Main {\r\n\r\n  public static void main(String[] args) {\r\n    for(int j=0; j&lt;5; j++){\r\n        int n = 10000;\r\n        String[] wordsToSort = new String[n];\r\n        for (int i=0;i&lt;n;i++)\r\n            wordsToSort[i] = (&quot;&quot;+new Character((char)(i%26+65))).repeat(100)+i;\r\n\r\n        long start = System.nanoTime();\r\n        bubbleSort(wordsToSort, n);\r\n        System.out.println(&quot;unsorted &quot; + (System.nanoTime() - start) / 1e9);\r\n\r\n        start = System.nanoTime();\r\n        bubbleSort(wordsToSort, n);\r\n        System.out.println(&quot;sorted   &quot; + (System.nanoTime() - start) / 1e9 + &quot;\\n&quot;);\r\n    }\r\n  }\r\n\r\n    private static void bubbleSort(String[] arr, int n) {\r\n\r\n        for (int i = 0; i &lt; n - 1; ++i)\r\n        {\r\n            for (int j = 0; j &lt; n - i - 1; ++j)\r\n            {\r\n                if (arr[j + 1].compareTo(arr[j]) &lt; 0)\r\n                {\r\n                    String temp = arr[j + 1];\r\n                    arr[j + 1] = arr[j];\r\n                    arr[j] = temp;\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n```\r\n","title":"Why is Bubble/Selection/Pancake Sort faster when testing it with unsorted values?","body":"<p>Given the long runtimes of 3 and 6 hours, I see two possible interesting explanations:</p>\n<ol>\n<li><p>You always compare neighbor elements. When the array is <em>unsorted</em>, neighbor strings likely already differ at the first character, which makes the comparisons fast. When the array is <em>sorted</em>, neighbor strings likely share a common prefix, which makes comparisons slower.</p>\n</li>\n<li><p>You created the string objects in unsorted order, for example reading a file of unsorted strings into memory. I'm not much familiar with Java, but I suspect it does create them mostly sequentially in memory. So at the start, going through the strings in array order accesses the memory sequentially, which is cache-friendly. But then the sorting changes the array order. So going through the strings of the sorted array accesses the memory &quot;randomly&quot;, which is cache-unfriendly.</p>\n</li>\n</ol>\n<p><strong>Update</strong> after your question update with the additional timings and link to code/data: Both of the above reasons apply, although I suspect the cache one is the main one. Your timings show that with fewer and fewer words, the &quot;sorted&quot; case gets better and better compared to the &quot;unsorted&quot; case. That's expected, as for small inputs, more/everything fits in caches, and common prefixes are short (unless you choose similar words, but you didn't), so those two disadvantages of &quot;sorted&quot; go away. And the &quot;unsorted&quot; case still suffers from having to do the swap work and from branch prediction failures, making it slower than &quot;sorted&quot; when &quot;sorted&quot; doesn't have its disadvantages anymore. Also see <a href=\"https://stackoverflow.com/q/14023988/12671057\">Why is processing a sorted array slower than an unsorted array?</a> as well as <a href=\"https://stackoverflow.com/q/11227809/12671057\">Why is processing a sorted array faster than processing an unsorted array?</a> (Note that one says slower and the other says faster, and both are correct, for different usages and reasons).</p>\n<p>I was able to reliably reproduce the &quot;unsorted&quot; case being faster than the &quot;sorted&quot; case (1.2 seconds vs 2.0 seconds, doing five rounds and ignoring the first round for warmup) with 10000 artificially created strings of 100 characters each. <strike>Still hoping that you'll share more infos about your data and runnable complete code, but</strike> (see update paragraph above) I think the above aspects are interesting anyway.</p>\n<p>Sample benchmark results:</p>\n<pre><code>unsorted 1.263458034\nsorted   1.985379993\n\nunsorted 1.115940408\nsorted   1.830749365\n\nunsorted 1.157192938\nsorted   2.175659597\n\nunsorted 0.950845856\nsorted   1.712224688\n\nunsorted 1.243945757\nsorted   1.979670624\n</code></pre>\n<p>Code (<a href=\"https://ato.pxeger.com/run?1=tVTBjpswED20J75ihFTJLhs2WSmrViSnnntKbikHQ5x0ENjImKyqKF-ylxx2f6pf0zEQIJtV1UtHAoznzZs3npGfXzJxEOfza213ky-_P37AotTGgtsNa4t5-DnyvLJOckwhzUVVwXeBCo6eB9BtV1ZY-hw0bqEgJ1tZg2q_iUGYfcUJC2Q7bRgqYl5OI8gWc3oFAW99zpxPwRJmU7Ko3-65nrTZVmu9cuqWoOTTxaXiAU1JoMmClAUXKkLK0XudjWg2GBMT8_3AsX37KYxIrTSMpbTkDD89PAaPc855aGQphWUkjQcYeT1hrtXeld9IWv2qrCxCJZReYyEZH2QldZLk0uVko_x3oEaYLlzXNiypLpsr5teqIpzcgg8BsJsEMGmTc7iHmfzKR8r-o6hOEvybKML4P5TfcZ489zRL4jsIK6-mZyRpNEPmrh0O3k7d205TlTRRCAsanwnMIggCHHp-vOp-H5W1UVkXhZfI7HparqObMd0BI0mbjAqbxWGqi1IYudbtZsyJcMpvom55mtNtagQ6v5LkDKzRu-jBfwH_DehAjvgWcvLe_zt1HTq1d0F3JVyuhj8\" rel=\"nofollow noreferrer\">Attempt This Online!</a>):</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.*;\n\npublic class Main {\n\n  public static void main(String[] args) {\n    for(int j=0; j&lt;5; j++){\n        int n = 10000;\n        String[] wordsToSort = new String[n];\n        for (int i=0;i&lt;n;i++)\n            wordsToSort[i] = (&quot;&quot;+new Character((char)(i%26+65))).repeat(100)+i;\n\n        long start = System.nanoTime();\n        bubbleSort(wordsToSort, n);\n        System.out.println(&quot;unsorted &quot; + (System.nanoTime() - start) / 1e9);\n\n        start = System.nanoTime();\n        bubbleSort(wordsToSort, n);\n        System.out.println(&quot;sorted   &quot; + (System.nanoTime() - start) / 1e9 + &quot;\\n&quot;);\n    }\n  }\n\n    private static void bubbleSort(String[] arr, int n) {\n\n        for (int i = 0; i &lt; n - 1; ++i)\n        {\n            for (int j = 0; j &lt; n - i - 1; ++j)\n            {\n                if (arr[j + 1].compareTo(arr[j]) &lt; 0)\n                {\n                    String temp = arr[j + 1];\n                    arr[j + 1] = arr[j];\n                    arr[j] = temp;\n                }\n            }\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":27991586,"reputation":57,"user_id":21377330,"display_name":"Sheep_Walker"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":111,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":75796441,"answer_count":2,"score":0,"last_activity_date":1679488349,"creation_date":1679197950,"question_id":75779984,"body_markdown":"I have read in many places that the best case for those algorithms is when the array is already sorted and so making the program run them faster. For some reason, When I test the algorithms with unsorted and the same but sorted values, they run faster in the first case. Why?\r\n\r\nThis is the code for bubble sort:\r\n\r\n```java\r\n// ----------------- (1) Bubble Sort -----------------------------\r\n        // Unsorted\r\n        long startTime11 = System.nanoTime();\r\n        Sorting.bubbleSort(wordsToSort);\r\n        long endTime11 = System.nanoTime();\r\n        long timeLapsed11 = endTime11 - startTime11;\r\n        // Already sorted\r\n        long startTime12 = System.nanoTime();\r\n        Sorting.bubbleSort(wordsToSort);\r\n        long endTime12 = System.nanoTime();\r\n        long timeLapsed12 = endTime12 - startTime12;\r\n        // formats time with commas\r\n        String formated11 = formatter.format(timeLapsed11);\r\n        String formated12 = formatter.format(timeLapsed12);\r\n```\r\n\r\nbubbleSort method:\r\n\r\n```java\r\nprivate static void bubbleSort(String[] arr, int n) {\r\n\r\n        for (int i = 0; i &lt; n - 1; ++i)\r\n        {\r\n            for (int j = 0; j &lt; n - i - 1; ++j)\r\n            {\r\n                if (arr[j + 1].compareTo(arr[j]) &lt; 0)\r\n                {\r\n                    String temp = arr[j + 1];\r\n                    arr[j + 1] = arr[j];\r\n                    arr[j] = temp;\r\n                }\r\n            }\r\n        }\r\n    }\r\n```\r\n\r\nCPU Time:\r\n\r\n**Unsorted:** 11, 372, 240, 025, 900 nanoseconds.\r\n\r\n**Sorted:** 22, 020, 911, 806, 900 nanoseconds.\r\n\r\nThe array has more than 600,000 elements in it.\r\n\r\n\r\nMore case results:\r\n-------------------\r\n\r\nTest two of the array of +600000 elements:\r\n\r\n**Unsorted:** 11, 392, 317, 750, 900 nanoseconds.\r\n\r\n**Sorted:** 22, 024, 687, 559, 200 nanoseconds.\r\n\r\n-----------\r\n\r\nArray of 15000 words:\r\n\r\n**Unsorted:** 1, 407, 057, 900 nanoseconds.\r\n\r\n**Sorted:** 1, 650, 519, 600 nanoseconds.\r\n\r\n**Unsorted:** 1, 430, 736, 200 nanoseconds.\r\n\r\n**Sorted:** 1, 645, 250, 000 nanoseconds.\r\n\r\n-------------------\r\n\r\nArray of 15000 words (Warmup phase added; advised from the comments)\r\n\r\n**Unsorted:** 1, 453, 011, 900 nanoseconds.\r\n\r\n**Sorted:** 1, 660, 550, 800 nanoseconds.\r\n\r\n**Unsorted:** 2, 025, 017, 800 nanoseconds.\r\n\r\n**Sorted:** 2, 466, 999, 700 nanoseconds.\r\n\r\n--------------------\r\n\r\nArray of 2500 words\r\n\r\n**Unsorted:** 44, 016, 900 nanoseconds.\r\n\r\n**Sorted:** 20, 703, 300 nanoseconds.\r\n\r\n**Unsorted:** 47, 074, 400 nanoseconds.\r\n\r\n**Sorted:** 36, 121, 700 nanoseconds.\r\n\r\n--------------\r\n\r\nArray of 600 words\r\n\r\n**Unsorted:** 7, 104, 600 nanoseconds.\r\n\r\n**Sorted:** 1, 392, 100 nanoseconds.\r\n\r\n**Unsorted:** 7, 144, 500 nanoseconds.\r\n\r\n**Sorted:** 1, 324, 600 nanoseconds.\r\n\r\n-------------------\r\n\r\nHere is the code with some txt files to test them and know better how to answer: https://github.com/Obed-Padilla/Sorting-algorithms ","title":"Why is Bubble/Selection/Pancake Sort faster when testing it with unsorted values?","body":"<p>I have read in many places that the best case for those algorithms is when the array is already sorted and so making the program run them faster. For some reason, When I test the algorithms with unsorted and the same but sorted values, they run faster in the first case. Why?</p>\n<p>This is the code for bubble sort:</p>\n<pre class=\"lang-java prettyprint-override\"><code>// ----------------- (1) Bubble Sort -----------------------------\n        // Unsorted\n        long startTime11 = System.nanoTime();\n        Sorting.bubbleSort(wordsToSort);\n        long endTime11 = System.nanoTime();\n        long timeLapsed11 = endTime11 - startTime11;\n        // Already sorted\n        long startTime12 = System.nanoTime();\n        Sorting.bubbleSort(wordsToSort);\n        long endTime12 = System.nanoTime();\n        long timeLapsed12 = endTime12 - startTime12;\n        // formats time with commas\n        String formated11 = formatter.format(timeLapsed11);\n        String formated12 = formatter.format(timeLapsed12);\n</code></pre>\n<p>bubbleSort method:</p>\n<pre class=\"lang-java prettyprint-override\"><code>private static void bubbleSort(String[] arr, int n) {\n\n        for (int i = 0; i &lt; n - 1; ++i)\n        {\n            for (int j = 0; j &lt; n - i - 1; ++j)\n            {\n                if (arr[j + 1].compareTo(arr[j]) &lt; 0)\n                {\n                    String temp = arr[j + 1];\n                    arr[j + 1] = arr[j];\n                    arr[j] = temp;\n                }\n            }\n        }\n    }\n</code></pre>\n<p>CPU Time:</p>\n<p><strong>Unsorted:</strong> 11, 372, 240, 025, 900 nanoseconds.</p>\n<p><strong>Sorted:</strong> 22, 020, 911, 806, 900 nanoseconds.</p>\n<p>The array has more than 600,000 elements in it.</p>\n<h2>More case results:</h2>\n<p>Test two of the array of +600000 elements:</p>\n<p><strong>Unsorted:</strong> 11, 392, 317, 750, 900 nanoseconds.</p>\n<p><strong>Sorted:</strong> 22, 024, 687, 559, 200 nanoseconds.</p>\n<hr />\n<p>Array of 15000 words:</p>\n<p><strong>Unsorted:</strong> 1, 407, 057, 900 nanoseconds.</p>\n<p><strong>Sorted:</strong> 1, 650, 519, 600 nanoseconds.</p>\n<p><strong>Unsorted:</strong> 1, 430, 736, 200 nanoseconds.</p>\n<p><strong>Sorted:</strong> 1, 645, 250, 000 nanoseconds.</p>\n<hr />\n<p>Array of 15000 words (Warmup phase added; advised from the comments)</p>\n<p><strong>Unsorted:</strong> 1, 453, 011, 900 nanoseconds.</p>\n<p><strong>Sorted:</strong> 1, 660, 550, 800 nanoseconds.</p>\n<p><strong>Unsorted:</strong> 2, 025, 017, 800 nanoseconds.</p>\n<p><strong>Sorted:</strong> 2, 466, 999, 700 nanoseconds.</p>\n<hr />\n<p>Array of 2500 words</p>\n<p><strong>Unsorted:</strong> 44, 016, 900 nanoseconds.</p>\n<p><strong>Sorted:</strong> 20, 703, 300 nanoseconds.</p>\n<p><strong>Unsorted:</strong> 47, 074, 400 nanoseconds.</p>\n<p><strong>Sorted:</strong> 36, 121, 700 nanoseconds.</p>\n<hr />\n<p>Array of 600 words</p>\n<p><strong>Unsorted:</strong> 7, 104, 600 nanoseconds.</p>\n<p><strong>Sorted:</strong> 1, 392, 100 nanoseconds.</p>\n<p><strong>Unsorted:</strong> 7, 144, 500 nanoseconds.</p>\n<p><strong>Sorted:</strong> 1, 324, 600 nanoseconds.</p>\n<hr />\n<p>Here is the code with some txt files to test them and know better how to answer: <a href=\"https://github.com/Obed-Padilla/Sorting-algorithms\" rel=\"nofollow noreferrer\">https://github.com/Obed-Padilla/Sorting-algorithms</a></p>\n"},{"tags":["java","android","xml","gridview","android-widget"],"comments":[{"owner":{"account_id":21896421,"reputation":187,"user_id":17846979,"display_name":"RandomLonelyDev"},"score":0,"creation_date":1679573599,"post_id":75812197,"comment_id":133747581,"body_markdown":"Why is XML so important in doing this? just resize with the java commands?","body":"Why is XML so important in doing this? just resize with the java commands?"}],"owner":{"account_id":26209094,"reputation":1,"user_id":19888255,"display_name":"Bohdan Shcherba"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":72,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679487667,"creation_date":1679487667,"question_id":75812197,"body_markdown":"I am working on an Android app that includes a widget on the home screen. I am trying to resize the widget programmatically using Java XML, but I&#39;m having some trouble with it.\r\n\r\nI have tried to use the AppWidgetManager and RemoteViews classes to resize the widget, but I couldn&#39;t find a way to do it properly.\r\n\r\nCan someone please help me with this issue? How can I resize the widget on the home screen programmatically using Java and XML in Android?\r\n\r\nJust to clarify, I have a GridView in XML that contains widget items. I want to change the height of the widget items inside the grid when the height of the grid is changed.\r\n\r\nHere is the code I have tried so far:\r\n\r\ncalendar_widget.xml\r\n```\r\n&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:layout_height=&quot;match_parent&quot;\r\n    android:orientation=&quot;vertical&quot;\r\n\r\n    android:background=&quot;#34FFFFFF&quot;\r\n    &gt;\r\n\r\n ...\r\n    \r\n    &lt;FrameLayout\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;fill_parent&quot;&gt;\r\n\r\n        &lt;GridView\r\n            android:id=&quot;@+id/grid_view&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;fill_parent&quot;\r\n            android:gravity=&quot;center&quot;\r\n\r\n            android:numColumns=&quot;7&quot; &gt;\r\n\r\n        &lt;/GridView&gt;\r\n        \r\n       ...\r\n    &lt;/FrameLayout&gt;\r\n&lt;/LinearLayout&gt;\r\n```\r\nmy_item_layout.xml - it is item that within grid\r\n```\r\n&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    android:id=&quot;@+id/item_view&quot;\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:layout_height=&quot;match_parent&quot;\r\n    android:layout_marginHorizontal=&quot;2dp&quot;\r\n    android:layout_marginVertical=&quot;2dp&quot;\r\n    android:orientation=&quot;vertical&quot;\r\n    android:layout_weight=&quot;3&quot;\r\n    android:background=&quot;@color/light_blue_200&quot;\r\n    &gt;\r\n\r\n    &lt;TextView\r\n        android:id=&quot;@+id/text_view&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;\r\n\r\n        android:text=&quot;1&quot;\r\n        android:textAlignment=&quot;center&quot;\r\n        android:textColor=&quot;@color/black&quot;\r\n        android:textSize=&quot;20sp&quot;\r\n        android:maxHeight=&quot;100dp&quot;/&gt;\r\n\r\n&lt;/LinearLayout&gt;\r\n```\r\n\r\nCalendarWidget\r\n\r\n```\r\npublic class CalendarWidget extends AppWidgetProvider {\r\n\r\n    static void updateAppWidget(Context context, AppWidgetManager appWidgetManager,\r\n                                int appWidgetId) {\r\n\r\n        // Construct the RemoteViews object\r\n        RemoteViews views = new RemoteViews(context.getPackageName(), R.layout.calendar_widget);\r\n\r\n        // Get the layout resource ID associated with the RemoteView\r\n\r\n\r\n        Intent intent = new Intent(context, MyWidgetRemoteViewsService.class);\r\n        intent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_ID, appWidgetId);\r\n        intent.setData(Uri.parse(intent.toUri(Intent.URI_INTENT_SCHEME)));\r\n\r\n        views.setRemoteAdapter(R.id.grid_view, intent);\r\n\r\n        views.setEmptyView(R.id.grid_view, R.id.example_widget_empty_view);\r\n\r\n        views.setTextViewText(R.id.monthYearText, new DateManager().monthYearFromDate());\r\n        appWidgetManager.notifyAppWidgetViewDataChanged(appWidgetId, R.id.grid_view);\r\n\r\n        // Instruct the widget manager to update the widget\r\n        appWidgetManager.updateAppWidget(appWidgetId, views);\r\n    }\r\n\r\n    @Override\r\n    public void onUpdate(Context context, AppWidgetManager appWidgetManager, int[] appWidgetIds) {\r\n        // There may be multiple widgets active, so update all of them\r\n        for (int appWidgetId : appWidgetIds) {\r\n            updateAppWidget(context, appWidgetManager, appWidgetId);\r\n        }\r\n        super.onUpdate(context, appWidgetManager, appWidgetIds);\r\n    }\r\n\r\n    @Override\r\n    public void onAppWidgetOptionsChanged(Context context, AppWidgetManager appWidgetManager, int appWidgetId, Bundle newOptions) {\r\n        RemoteViews views = new RemoteViews(context.getPackageName(), R.layout.calendar_widget);\r\n\r\n        appWidgetManager.updateAppWidget(appWidgetId, views);\r\n\r\n    }\r\n\r\n\r\n    private void resizeWidget(Bundle appWidgetOptions, RemoteViews views) {\r\n        int minWidth = appWidgetOptions.getInt(AppWidgetManager.OPTION_APPWIDGET_MIN_WIDTH);\r\n        int maxWidth = appWidgetOptions.getInt(AppWidgetManager.OPTION_APPWIDGET_MAX_WIDTH);\r\n        int minHeight = appWidgetOptions.getInt(AppWidgetManager.OPTION_APPWIDGET_MIN_HEIGHT);\r\n        int maxHeight = appWidgetOptions.getInt(AppWidgetManager.OPTION_APPWIDGET_MAX_HEIGHT);\r\n\r\n    }\r\n\r\n    @Override\r\n    public void onEnabled(Context context) {\r\n        // Enter relevant functionality for when the first widget is created\r\n    }\r\n\r\n    @Override\r\n    public void onDisabled(Context context) {\r\n        // Enter relevant functionality for when the last widget is disabled\r\n    }\r\n}\r\n```\r\n[When i resize widget i want that items change height](https://i.stack.imgur.com/aEPEK.png)\r\n\r\nThank you in advance for your help!\r\n\r\n\r\nI have tried to use the AppWidgetManager and RemoteViews classes to resize the widget, but I couldn&#39;t find a way to do it properly.","title":"How to make dynamic resize a widget on the home screen using Java XML in Android?","body":"<p>I am working on an Android app that includes a widget on the home screen. I am trying to resize the widget programmatically using Java XML, but I'm having some trouble with it.</p>\n<p>I have tried to use the AppWidgetManager and RemoteViews classes to resize the widget, but I couldn't find a way to do it properly.</p>\n<p>Can someone please help me with this issue? How can I resize the widget on the home screen programmatically using Java and XML in Android?</p>\n<p>Just to clarify, I have a GridView in XML that contains widget items. I want to change the height of the widget items inside the grid when the height of the grid is changed.</p>\n<p>Here is the code I have tried so far:</p>\n<p>calendar_widget.xml</p>\n<pre><code>&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    android:orientation=&quot;vertical&quot;\n\n    android:background=&quot;#34FFFFFF&quot;\n    &gt;\n\n ...\n    \n    &lt;FrameLayout\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;fill_parent&quot;&gt;\n\n        &lt;GridView\n            android:id=&quot;@+id/grid_view&quot;\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;fill_parent&quot;\n            android:gravity=&quot;center&quot;\n\n            android:numColumns=&quot;7&quot; &gt;\n\n        &lt;/GridView&gt;\n        \n       ...\n    &lt;/FrameLayout&gt;\n&lt;/LinearLayout&gt;\n</code></pre>\n<p>my_item_layout.xml - it is item that within grid</p>\n<pre><code>&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    android:id=&quot;@+id/item_view&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    android:layout_marginHorizontal=&quot;2dp&quot;\n    android:layout_marginVertical=&quot;2dp&quot;\n    android:orientation=&quot;vertical&quot;\n    android:layout_weight=&quot;3&quot;\n    android:background=&quot;@color/light_blue_200&quot;\n    &gt;\n\n    &lt;TextView\n        android:id=&quot;@+id/text_view&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;match_parent&quot;\n\n        android:text=&quot;1&quot;\n        android:textAlignment=&quot;center&quot;\n        android:textColor=&quot;@color/black&quot;\n        android:textSize=&quot;20sp&quot;\n        android:maxHeight=&quot;100dp&quot;/&gt;\n\n&lt;/LinearLayout&gt;\n</code></pre>\n<p>CalendarWidget</p>\n<pre><code>public class CalendarWidget extends AppWidgetProvider {\n\n    static void updateAppWidget(Context context, AppWidgetManager appWidgetManager,\n                                int appWidgetId) {\n\n        // Construct the RemoteViews object\n        RemoteViews views = new RemoteViews(context.getPackageName(), R.layout.calendar_widget);\n\n        // Get the layout resource ID associated with the RemoteView\n\n\n        Intent intent = new Intent(context, MyWidgetRemoteViewsService.class);\n        intent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_ID, appWidgetId);\n        intent.setData(Uri.parse(intent.toUri(Intent.URI_INTENT_SCHEME)));\n\n        views.setRemoteAdapter(R.id.grid_view, intent);\n\n        views.setEmptyView(R.id.grid_view, R.id.example_widget_empty_view);\n\n        views.setTextViewText(R.id.monthYearText, new DateManager().monthYearFromDate());\n        appWidgetManager.notifyAppWidgetViewDataChanged(appWidgetId, R.id.grid_view);\n\n        // Instruct the widget manager to update the widget\n        appWidgetManager.updateAppWidget(appWidgetId, views);\n    }\n\n    @Override\n    public void onUpdate(Context context, AppWidgetManager appWidgetManager, int[] appWidgetIds) {\n        // There may be multiple widgets active, so update all of them\n        for (int appWidgetId : appWidgetIds) {\n            updateAppWidget(context, appWidgetManager, appWidgetId);\n        }\n        super.onUpdate(context, appWidgetManager, appWidgetIds);\n    }\n\n    @Override\n    public void onAppWidgetOptionsChanged(Context context, AppWidgetManager appWidgetManager, int appWidgetId, Bundle newOptions) {\n        RemoteViews views = new RemoteViews(context.getPackageName(), R.layout.calendar_widget);\n\n        appWidgetManager.updateAppWidget(appWidgetId, views);\n\n    }\n\n\n    private void resizeWidget(Bundle appWidgetOptions, RemoteViews views) {\n        int minWidth = appWidgetOptions.getInt(AppWidgetManager.OPTION_APPWIDGET_MIN_WIDTH);\n        int maxWidth = appWidgetOptions.getInt(AppWidgetManager.OPTION_APPWIDGET_MAX_WIDTH);\n        int minHeight = appWidgetOptions.getInt(AppWidgetManager.OPTION_APPWIDGET_MIN_HEIGHT);\n        int maxHeight = appWidgetOptions.getInt(AppWidgetManager.OPTION_APPWIDGET_MAX_HEIGHT);\n\n    }\n\n    @Override\n    public void onEnabled(Context context) {\n        // Enter relevant functionality for when the first widget is created\n    }\n\n    @Override\n    public void onDisabled(Context context) {\n        // Enter relevant functionality for when the last widget is disabled\n    }\n}\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/aEPEK.png\" rel=\"nofollow noreferrer\">When i resize widget i want that items change height</a></p>\n<p>Thank you in advance for your help!</p>\n<p>I have tried to use the AppWidgetManager and RemoteViews classes to resize the widget, but I couldn't find a way to do it properly.</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9437,"page":555,"page_size":100}
